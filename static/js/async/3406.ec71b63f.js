/*! For license information please see 3406.ec71b63f.js.LICENSE.txt */
(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["3406"],{89121:function(t,e,i){"use strict";var r,n;i.d(e,{o:()=>r}),(n=r||(r={})).DSV="dsv",n.TREE="tree",n.GEO="geo",n.BYTE="bytejson",n.HEX="hex",n.GRAPH="graph",n.TABLE="table",n.GEO_GRATICULE="geo-graticule"},99127:function(t,e,i){"use strict";i.d(e,{q:()=>o});var r=i(21883),n=i.n(r),s=i(85476),a=i(18350);class o{constructor(t){var e;let i;this.options=t,this.isDataSet=!0,this.transformMap={},this.parserMap={},this.dataViewMap={},this.target=new(n()),i=(null==t?void 0:t.name)?t.name:(0,a.F)("dataset"),this.name=i,this._logger=null!=(e=null==t?void 0:t.logger)?e:s.Y.getInstance()}setLogger(t){this._logger=t}getDataView(t){return this.dataViewMap[t]}setDataView(t,e){var i;this.dataViewMap[t]&&(null==(i=this._logger)||i.error(`Error: dataView ${t} 之前已存在，请重新命名`)),this.dataViewMap[t]=e}removeDataView(t){this.dataViewMap[t]=null,delete this.dataViewMap[t]}registerParser(t,e){var i;this.parserMap[t]&&(null==(i=this._logger)||i.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.parserMap[t]=e}removeParser(t){this.parserMap[t]=null,delete this.parserMap[t]}getParser(t){return this.parserMap[t]||this.parserMap.default}registerTransform(t,e){var i;this.transformMap[t]&&(null==(i=this._logger)||i.warn(`Warn: transform ${t} 之前已注册，执行覆盖逻辑`)),this.transformMap[t]=e}removeTransform(t){this.transformMap[t]=null,delete this.transformMap[t]}getTransform(t){return this.transformMap[t]}multipleDataViewAddListener(t,e,i){this._callMap||(this._callMap=new Map);let r=this._callMap.get(i);r||(r=()=>{t.some(t=>t.isRunning)||i()}),t.forEach(t=>{t.target.addListener(e,r)}),this._callMap.set(i,r)}allDataViewAddListener(t,e){this.multipleDataViewAddListener(Object.values(this.dataViewMap),t,e)}multipleDataViewRemoveListener(t,e,i){if(this._callMap){let r=this._callMap.get(i);r&&t.forEach(t=>{t.target.removeListener(e,r)}),this._callMap.delete(i)}}multipleDataViewUpdateInParse(t){t.forEach(t=>{var e;return null==(e=this.getDataView(t.name))?void 0:e.markRunning()}),t.forEach(t=>{var e;return null==(e=this.getDataView(t.name))?void 0:e.parseNewData(t.data,t.options)})}multipleDataViewUpdateInRawData(t){t.forEach(t=>{var e;return null==(e=this.getDataView(t.name))?void 0:e.markRunning()}),t.forEach(t=>{var e;return null==(e=this.getDataView(t.name))?void 0:e.updateRawData(t.data,t.options)})}destroy(){this.transformMap=null,this.parserMap=null,this.dataViewMap=null,this._callMap=null,this.target.removeAllListeners()}}},28919:function(t,e,i){"use strict";i.d(e,{V:()=>c,v:()=>d});var r=i(21883),n=i.n(r),s=i(75133),a=i(65755),o=i(20408),l=i(54326),h=i(18350),u=i(52536);class c{constructor(t,e){let i;this.dataSet=t,this.options=e,this.isDataView=!0,this.target=new(n()),this.parseOption=null,this.transformsArr=[],this.isRunning=!1,this.rawData={},this.history=!1,this.parserData={},this.latestData={},this._fields=null,this.reRunAllTransform=(t={})=>{let e=this.latestData;return this.isRunning=!0,this.resetTransformData(),this.transformsArr.forEach(e=>{this.executeTransform(e,{pushHistory:t.pushHistory,emitMessage:!1})}),this.isRunning=!1,!1===t.emitMessage||t.skipEqual&&(0,s.X)(e,this.latestData)||this.target.emit("change",{latestData:this.latestData}),this},this.markRunning=()=>{this.isRunning=!0,this.target.emit("markRunning",[])},i=(null==e?void 0:e.name)?e.name:(0,h.F)("dataview"),this.name=i,(null==e?void 0:e.history)&&(this.history=e.history,this.historyData=[]),this.dataSet.setDataView(i,this),this.setFields(null==e?void 0:e.fields)}parse(t,e,i=!1){var r;this.isRunning=!0,i&&this.target.emit("beforeParse",[]),e&&(this.parseOption=e);let n=this.cloneParseData(t,e);if(null==e?void 0:e.type){let t=(null!=(r=this.dataSet.getParser(e.type))?r:this.dataSet.getParser("bytejson"))(n,e.options,this);this.rawData=n,this.parserData=t,this.history&&this.historyData.push(n,t),this.latestData=t}else this.parserData=n,this.rawData=n,this.history&&this.historyData.push(n),this.latestData=n;return this.isRunning=!1,i&&this.target.emit("afterParse",[]),this}transform(t,e=!0){if(this.isRunning=!0,t&&t.type){let i=!0;if("fields"===t.type){this._fields=t.options.fields;let e=this.transformsArr.findIndex(e=>e.type===t.type);e>=0&&(i=!1,this.transformsArr[e].options.fields=this._fields)}i&&this.transformsArr.push(t),e&&this.executeTransform(t)}return this.sortTransform(),this.isRunning=!1,this}sortTransform(){this.transformsArr.length>=2&&this.transformsArr.sort((t,e)=>{var i,r;return(null!=(i=t.level)?i:0)-(null!=(r=e.level)?r:0)})}executeTransform(t,e={}){let{pushHistory:i,emitMessage:r,skipEqual:n}=e,a=this.dataSet.getTransform(t.type),o=this.latestData,l=a(o,t.options);this.history&&!1!==i&&this.historyData.push(l),this.latestData=l,!1===r||n&&(0,s.X)(o,this.latestData)||this.target.emit("change",{latestData:this.latestData})}resetTransformData(){this.latestData=this.parserData,this.history&&(this.historyData.length=0,this.historyData.push(this.rawData,this.parserData))}cloneParseData(t,e){let i=!1;return t instanceof c||!0!==(null==e?void 0:e.clone)||(i=!0),i?(0,a.Z)(t):t}parseNewData(t,e){this.parse(t,e||this.parseOption),this.reRunAllTransform()}updateRawData(t,e){let i=this.cloneParseData(t,e);this.rawData=i,this.parserData=i,this.latestData=i,this.reRunAllTransform()}getFields(){var t;return this._fields?this._fields:"dataview"===(null==(t=this.parseOption)?void 0:t.type)&&1===this.rawData.length&&this.rawData[0].getFields?this.rawData[0].getFields():null}setFields(t,e=!1){this._fields=t&&e?(0,o.Z)({},this._fields,t):t;let i=this.transformsArr.find(t=>"fields"===t.type);!(0,l.Z)(this._fields)&&(0,l.Z)(i)?(this.dataSet.registerTransform("fields",u.X),this.transform({type:"fields",options:{fields:this._fields}},!1)):i&&(i.options.fields=this._fields)}destroy(){this.dataSet.removeDataView(this.name),this.latestData=null,this.rawData=null,this.parserData=null,this.transformsArr=null,this.target=null}}function d(t){return t instanceof c}},74230:function(t,e,i){"use strict";i.d(e,{i:()=>s});var r=i(63778),n=i(95723);let s=(t,e,i)=>{let s=!(0,r.Z)(null==e?void 0:e.dependencyUpdate)||(null==e?void 0:e.dependencyUpdate);if(!t||!(0,n.Z)(t))throw TypeError("Invalid data: must be DataView array!");return(0,n.Z)(i.rawData)&&i.rawData.forEach(t=>{t.target&&(t.target.removeListener("change",i.reRunAllTransform),t.target.removeListener("markRunning",i.markRunning))}),s&&t.forEach(t=>{t.target.addListener("change",i.reRunAllTransform),t.target.addListener("markRunning",i.markRunning)}),t}},17721:function(t,e,i){"use strict";i.d(e,{$W:()=>y,UI:()=>v,mK:()=>b});var r={},n={};function s(t){return Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function a(t){var e=Object.create(null),i=[];return t.forEach(function(t){for(var r in t)r in e||i.push(e[r]=r)}),i}function o(t,e){var i=t+"",r=i.length;return r<e?Array(e-r+1).join(0)+i:i}function l(t){var e=RegExp('["'+t+"\n\r]"),i=t.charCodeAt(0);function l(t,e){var s,a=[],o=t.length,l=0,h=0,u=o<=0,c=!1;function d(){if(u)return n;if(c)return c=!1,r;var e,s,a=l;if(34===t.charCodeAt(a)){for(;l++<o&&34!==t.charCodeAt(l)||34===t.charCodeAt(++l););return(e=l)>=o?u=!0:10===(s=t.charCodeAt(l++))?c=!0:13===s&&(c=!0,10===t.charCodeAt(l)&&++l),t.slice(a+1,e-1).replace(/""/g,'"')}for(;l<o;){if(10===(s=t.charCodeAt(e=l++)))c=!0;else if(13===s)c=!0,10===t.charCodeAt(l)&&++l;else if(s!==i)continue;return t.slice(a,e)}return u=!0,t.slice(a,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(s=d())!==n;){for(var p=[];s!==r&&s!==n;)p.push(s),s=d();e&&null==(p=e(p,h++))||a.push(p)}return a}function h(e,i){return e.map(function(e){return i.map(function(t){return c(e[t])}).join(t)})}function u(e){return e.map(c).join(t)}function c(t){var i,r,n,s,a,l;return null==t?"":t instanceof Date?(r=(i=t).getUTCHours(),n=i.getUTCMinutes(),s=i.getUTCSeconds(),a=i.getUTCMilliseconds(),isNaN(i)?"Invalid Date":((l=i.getUTCFullYear())<0?"-"+o(-l,6):l>9999?"+"+o(l,6):o(l,4))+"-"+o(i.getUTCMonth()+1,2)+"-"+o(i.getUTCDate(),2)+(a?"T"+o(r,2)+":"+o(n,2)+":"+o(s,2)+"."+o(a,3)+"Z":s?"T"+o(r,2)+":"+o(n,2)+":"+o(s,2)+"Z":n||r?"T"+o(r,2)+":"+o(n,2)+"Z":"")):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var i,r,n=l(t,function(t,n){var a;if(i)return i(t,n-1);r=t,i=e?(a=s(t),function(i,r){return e(a(i),r,t)}):s(t)});return n.columns=r||[],n},parseRows:l,format:function(e,i){return null==i&&(i=a(e)),[i.map(c).join(t)].concat(h(e,i)).join("\n")},formatBody:function(t,e){return null==e&&(e=a(t)),h(t,e).join("\n")},formatRows:function(t){return t.map(u).join("\n")},formatRow:u,formatValue:c}}var h=l(","),u=h.parse;h.parseRows,h.format,h.formatBody,h.formatRows,h.formatRow,h.formatValue;var c=l("	"),d=c.parse;c.parseRows,c.format,c.formatBody,c.formatRows,c.formatRow,c.formatValue;var p=i(83624),f=i(89121),g=i(3544);let m={delimiter:","},y=(t,e={},i)=>{i.type=f.o.DSV;let{delimiter:r}=(0,g.g)(m,e);if(!(0,p.Z)(r))throw TypeError("Invalid delimiter: must be a string!");return l(r).parse(t)},v=(t,e={},i)=>(i.type=f.o.DSV,u(t)),b=(t,e={},i)=>(i.type=f.o.DSV,d(t))},58809:function(t,e,i){"use strict";i.d(e,{bL:()=>A,_s:()=>_});var r=i(70522),n=i(89121),s=i(3544);function a(t){var e={type:"Feature"};return Object.keys(t).forEach(function(i){switch(i){case"type":case"properties":case"geometry":return;default:e[i]=t[i]}}),e.properties=function t(e){var i={};return e&&Object.keys(e).forEach(function(r){var n=e[r];"object"==typeof n?null===n?i[r]=null:Array.isArray(n)?i[r]=n.map(function(t){return t}):i[r]=t(n):i[r]=n}),i}(t.properties),e.geometry=o(t.geometry),e}function o(t){var e={type:t.type};return(t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type)?e.geometries=t.geometries.map(function(t){return o(t)}):e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map(function(e){return t(e)})}(t.coordinates),e}let l=function(t){if(!t)throw Error("geojson is required");switch(t.type){case"Feature":return a(t);case"FeatureCollection":var e,i;return i={type:"FeatureCollection"},Object.keys(e=t).forEach(function(t){switch(t){case"type":case"features":return;default:i[t]=e[t]}}),i.features=e.features.map(function(t){return a(t)}),i;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return o(t);default:throw Error("unknown GeoJSON type")}};function h(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function u(t){for(var e,i,r=h(t),n=0,s=1;s<r.length;)e=i||r[0],n+=((i=r[s])[0]-e[0])*(i[1]+e[1]),s++;return n>0}var c=i(49015);function d(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function p(t,e){var i,r,n,s,a,o,l,h,u,c,d=0,p="FeatureCollection"===t.type,f="Feature"===t.type,g=p?t.features.length:1;for(i=0;i<g;i++){for(n=0,o=p?t.features[i].geometry:f?t.geometry:t,h=p?t.features[i].properties:f?t.properties:{},u=p?t.features[i].bbox:f?t.bbox:void 0,c=p?t.features[i].id:f?t.id:void 0,a=(l=!!o&&"GeometryCollection"===o.type)?o.geometries.length:1;n<a;n++){if(null===(s=l?o.geometries[n]:o)){if(!1===e(null,d,h,u,c))return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(s,d,h,u,c))return!1;break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===e(s.geometries[r],d,h,u,c))return!1;break;default:throw Error("Unknown Geometry Type")}}d++}}function f(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return p(t,function(t){f(t,e)}),t;case"LineString":return g(h(t),e),t;case"Polygon":return m(h(t),e),t;case"MultiLineString":return h(t).forEach(function(t){g(t,e)}),t;case"MultiPolygon":return h(t).forEach(function(t){m(t,e)}),t;case"Point":case"MultiPoint":return t}}function g(t,e){u(t)===e&&t.reverse()}function m(t,e){u(t[0])!==e&&t[0].reverse();for(var i=1;i<t.length;i++)u(t[i])===e&&t[i].reverse()}let y=function(t,e){if(e=e||{},!(0,c.Kn)(e))throw Error("options is invalid");var i=e.reverse||!1,r=e.mutate||!1;if(!t)throw Error("<geojson> is required");if("boolean"!=typeof i)throw Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw Error("<mutate> must be a boolean");!1===r&&(t=l(t));var n=[];switch(t.type){case"GeometryCollection":return p(t,function(t){f(t,i)}),t;case"FeatureCollection":return d(t,function(t){d(f(t,i),function(t){n.push(t)})}),(0,c.uf)(n)}return f(t,i)},v=function(t){if(!t)throw Error("geojson is required");var e,i=[];return e=function(t){i.push(t)},p(t,function(t,i,r,n,s){var a,o=null===t?null:t.type;switch(o){case null:case"Point":case"LineString":case"Polygon":if(!1===e((0,c.zL)(t,r,{bbox:n,id:s}),i,0))return!1;return}switch(o){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var h={type:a,coordinates:t.coordinates[l]};if(!1===e((0,c.zL)(h,r),i,l))return!1}}),(0,c.uf)(i)};var b=i(80971);let x=(0,r.Z)(),_={centroid:!1,name:!1,bbox:!1,rewind:!1},w=t=>{if(t.geometry.type.startsWith("Multi")){let e=v(t).features[0];return Object.assign(Object.assign({},e),e.properties)}return Object.assign(Object.assign({},t),t.properties)},S=t=>{let e=[];return t.forEach(t=>{"FeatureCollection"===t.type?t.features.forEach(t=>{e.push(w(t))}):e.push(w(t))}),e},A=(t,e={},i)=>{i.type=n.o.GEO;let{centroid:r,name:a,bbox:o,rewind:l}=(0,s.g)(_,e);if(Array.isArray(t))return S(t);let h=t.features;return l&&(h=y(t,{reverse:!(0,b.Z)(l)||l.reverse}).features),h.forEach(t=>{if(r){let e=x.centroid(t);t.centroidX=e[0],t.centroidY=e[1]}if(a&&(t.name=t.properties.name),o){let e=x.bounds(t);t.bbox=e}}),t.features=h,t}},26665:function(t,e,i){"use strict";function r(t){return t}function n(t,e){var i=e.id,n=e.bbox,s=null==e.properties?{}:e.properties,a=function(t,e){var i=function(t){if(null==t)return r;var e,i,n=t.scale[0],s=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,r){r||(e=i=0);var l=2,h=t.length,u=Array(h);for(u[0]=(e+=t[0])*n+a,u[1]=(i+=t[1])*s+o;l<h;)u[l]=t[l],++l;return u}}(t.transform),n=t.arcs;function s(t){return i(t)}function a(t){for(var e=[],r=0,s=t.length;r<s;++r)!function(t,e){e.length&&e.pop();for(var r=n[t<0?~t:t],s=0,a=r.length;s<a;++s)e.push(i(r[s],s));t<0&&function(t,e){for(var i,r=t.length,n=r-e;n<--r;)i=t[n],t[n++]=t[r],t[r]=i}(e,a)}(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(o)}return function t(e){var i,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":i=s(e.coordinates);break;case"MultiPoint":i=e.coordinates.map(s);break;case"LineString":i=a(e.arcs);break;case"MultiLineString":i=e.arcs.map(a);break;case"Polygon":i=l(e.arcs);break;case"MultiPolygon":i=e.arcs.map(l);break;default:return null}return{type:r,coordinates:i}}(e)}(t,e);return null==i&&null==n?{type:"Feature",properties:s,geometry:a}:null==n?{type:"Feature",id:i,properties:s,geometry:a}:{type:"Feature",id:i,bbox:n,properties:s,geometry:a}}i.d(e,{Q:()=>u});var s=i(83624),a=i(89121),o=i(3544),l=i(58809);let h={},u=(t,e,i)=>{var r;i.type=a.o.GEO;let u=(0,o.g)(l._s,h,e),{object:c}=u;if(!(0,s.Z)(c))throw TypeError("Invalid object: must be a string!");let d=("string"==typeof(r=t.objects[c])&&(r=t.objects[r]),"GeometryCollection"===r.type?{type:"FeatureCollection",features:r.geometries.map(function(e){return n(t,e)})}:n(t,r));return(0,l.bL)(d,u,i)}},36248:function(t,e,i){"use strict";i.d(e,{UQ:()=>tC});var r,n,s=i(70522),a=i(96265),o=i(96819);function l(){var t,e=[];return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){e.push(t=[])},lineEnd:o.Z,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function h(t,e){return(0,a.Wn)(t[0]-e[0])<a.Ho&&(0,a.Wn)(t[1]-e[1])<a.Ho}function u(t,e,i,r){this.x=t,this.z=e,this.o=i,this.e=r,this.v=!1,this.n=this.p=null}function c(t,e,i,r,n){var s,o,l=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,i,r=t[0],o=t[e];if(h(r,o)){if(!r[2]&&!o[2]){for(n.lineStart(),s=0;s<e;++s)n.point((r=t[s])[0],r[1]);n.lineEnd();return}o[0]+=2*a.Ho}l.push(i=new u(r,t,null,!0)),c.push(i.o=new u(r,null,i,!1)),l.push(i=new u(o,t,null,!1)),c.push(i.o=new u(o,null,i,!0))}}),l.length){for(c.sort(e),d(l),d(c),s=0,o=c.length;s<o;++s)c[s].e=i=!i;for(var p,f,g=l[0];;){for(var m=g,y=!0;m.v;)if((m=m.n)===g)return;p=m.z,n.lineStart();do{if(m.v=m.o.v=!0,m.e){if(y)for(s=0,o=p.length;s<o;++s)n.point((f=p[s])[0],f[1]);else r(m.x,m.n.x,1,n);m=m.n}else{if(y)for(s=(p=m.p.z).length-1;s>=0;--s)n.point((f=p[s])[0],f[1]);else r(m.x,m.p.x,-1,n);m=m.p}p=(m=m.o).z,y=!y}while(!m.v);n.lineEnd()}}}function d(t){if(e=t.length){for(var e,i,r=0,n=t[0];++r<e;)n.n=i=t[r],i.p=n,n=i;n.n=i=t[0],i.p=n}}function p(t){return[(0,a.fv)(t[1],t[0]),(0,a.ZR)(t[2])]}function f(t){var e=t[0],i=t[1],r=(0,a.mC)(i);return[r*(0,a.mC)(e),r*(0,a.O$)(e),(0,a.O$)(i)]}function g(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function m(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function y(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function v(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function b(t){var e=(0,a._b)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var x=(0,i(48097).Z)();function _(t){return(0,a.Wn)(t[0])<=a.pi?t[0]:(0,a.Xx)(t[0])*(((0,a.Wn)(t[0])+a.pi)%a.BZ-a.pi)}function w(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var S=(1===(n=w).length&&(r=n,n=function(t,e){return w(r(t),e)}),{left:function(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;0>n(t[s],e)?i=s+1:r=s}return i},right:function(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;n(t[s],e)>0?r=s:i=s+1}return i}});S.right,S.left;var A=Array.prototype;function C(t){for(var e,i,r,n=t.length,s=-1,a=0;++s<n;)a+=t[s].length;for(i=Array(a);--n>=0;)for(e=(r=t[n]).length;--e>=0;)i[--a]=r[e];return i}function D(t,e,i,r){return function(n){var s,o,h,u=e(n),d=l(),p=e(d),g=!1,y={point:v,lineStart:S,lineEnd:A,polygonStart:function(){y.point=D,y.lineStart=M,y.lineEnd=E,o=[],s=[]},polygonEnd:function(){y.point=v,y.lineStart=S,y.lineEnd=A,o=C(o);var t=function(t,e){var i=_(e),r=e[1],n=(0,a.O$)(r),s=[(0,a.O$)(i),-(0,a.mC)(i),0],o=0,l=0;x.reset(),1===n?r=a.ou+a.Ho:-1===n&&(r=-a.ou-a.Ho);for(var h=0,u=t.length;h<u;++h)if(d=(c=t[h]).length)for(var c,d,p=c[d-1],g=_(p),y=p[1]/2+a.pu,v=(0,a.O$)(y),w=(0,a.mC)(y),S=0;S<d;++S,g=C,v=T,w=B,p=A){var A=c[S],C=_(A),D=A[1]/2+a.pu,T=(0,a.O$)(D),B=(0,a.mC)(D),M=C-g,E=M>=0?1:-1,k=E*M,F=k>a.pi,R=v*T;if(x.add((0,a.fv)(R*E*(0,a.O$)(k),w*B+R*(0,a.mC)(k))),o+=F?M+E*a.BZ:M,F^g>=i^C>=i){var P=m(f(p),f(A));b(P);var O=m(s,P);b(O);var L=(F^M>=0?-1:1)*(0,a.ZR)(O[2]);(r>L||r===L&&(P[0]||P[1]))&&(l+=F^M>=0?1:-1)}}return(o<-a.Ho||o<a.Ho&&x<-a.Ho)^1&l}(s,r);o.length?(g||(n.polygonStart(),g=!0),c(o,B,t,i,n)):t&&(g||(n.polygonStart(),g=!0),n.lineStart(),i(null,null,1,n),n.lineEnd()),g&&(n.polygonEnd(),g=!1),o=s=null},sphere:function(){n.polygonStart(),n.lineStart(),i(null,null,1,n),n.lineEnd(),n.polygonEnd()}};function v(e,i){t(e,i)&&n.point(e,i)}function w(t,e){u.point(t,e)}function S(){y.point=w,u.lineStart()}function A(){y.point=v,u.lineEnd()}function D(t,e){h.push([t,e]),p.point(t,e)}function M(){p.lineStart(),h=[]}function E(){D(h[0][0],h[0][1]),p.lineEnd();var t,e,i,r,a=p.clean(),l=d.result(),u=l.length;if(h.pop(),s.push(h),h=null,u){if(1&a){if((e=(i=l[0]).length-1)>0){for(g||(n.polygonStart(),g=!0),n.lineStart(),t=0;t<e;++t)n.point((r=i[t])[0],r[1]);n.lineEnd()}return}u>1&&2&a&&l.push(l.pop().concat(l.shift())),o.push(l.filter(T))}}return y}}function T(t){return t.length>1}function B(t,e){return((t=t.x)[0]<0?t[1]-a.ou-a.Ho:a.ou-t[1])-((e=e.x)[0]<0?e[1]-a.ou-a.Ho:a.ou-e[1])}A.slice,A.map;let M=D(function(){return!0},function(t){var e,i=NaN,r=NaN,n=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,o){var l,h,u,c,d,p,f,g=s>0?a.pi:-a.pi,m=(0,a.Wn)(s-i);(0,a.Wn)(m-a.pi)<a.Ho?(t.point(i,r=(r+o)/2>0?a.ou:-a.ou),t.point(n,r),t.lineEnd(),t.lineStart(),t.point(g,r),t.point(s,r),e=0):n!==g&&m>=a.pi&&((0,a.Wn)(i-n)<a.Ho&&(i-=n*a.Ho),(0,a.Wn)(s-g)<a.Ho&&(s-=g*a.Ho),l=i,h=r,u=s,c=o,f=(0,a.O$)(l-u),r=(0,a.Wn)(f)>a.Ho?(0,a.z4)(((0,a.O$)(h)*(p=(0,a.mC)(c))*(0,a.O$)(u)-(0,a.O$)(c)*(d=(0,a.mC)(h))*(0,a.O$)(l))/(d*p*f)):(h+c)/2,t.point(n,r),t.lineEnd(),t.lineStart(),t.point(g,r),e=0),t.point(i=s,r=o),n=g},lineEnd:function(){t.lineEnd(),i=r=NaN},clean:function(){return 2-e}}},function(t,e,i,r){var n;if(null==t)n=i*a.ou,r.point(-a.pi,n),r.point(0,n),r.point(a.pi,n),r.point(a.pi,0),r.point(a.pi,-n),r.point(0,-n),r.point(-a.pi,-n),r.point(-a.pi,0),r.point(-a.pi,n);else if((0,a.Wn)(t[0]-e[0])>a.Ho){var s=t[0]<e[0]?a.pi:-a.pi;n=i*s/2,r.point(-s,n),r.point(0,n),r.point(s,n)}else r.point(e[0],e[1])},[-a.pi,-a.ou]);function E(t,e){e=f(e),e[0]-=t,b(e);var i=(0,a.Kh)(-e[1]);return((0>-e[2]?-i:i)+a.BZ-a.Ho)%a.BZ}function k(t,e,i,r){function n(n,s){return t<=n&&n<=i&&e<=s&&s<=r}function s(n,s,a,l){var h=0,c=0;if(null==n||(h=o(n,a))!==(c=o(s,a))||0>u(n,s)^a>0)do l.point(0===h||3===h?t:i,h>1?r:e);while((h=(h+a+4)%4)!==c);else l.point(s[0],s[1])}function o(r,n){return(0,a.Wn)(r[0]-t)<a.Ho?n>0?0:3:(0,a.Wn)(r[0]-i)<a.Ho?n>0?2:1:(0,a.Wn)(r[1]-e)<a.Ho?+(n>0):n>0?3:2}function h(t,e){return u(t.x,e.x)}function u(t,e){var i=o(t,1),r=o(e,1);return i!==r?i-r:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}return function(a){var o,u,d,p,f,g,m,y,v,b,x,_=a,w=l(),S={point:A,lineStart:function(){S.point=D,u&&u.push(d=[]),b=!0,v=!1,m=y=NaN},lineEnd:function(){o&&(D(p,f),g&&v&&w.rejoin(),o.push(w.result())),S.point=A,v&&_.lineEnd()},polygonStart:function(){_=w,o=[],u=[],x=!0},polygonEnd:function(){var e=function(){for(var e=0,i=0,n=u.length;i<n;++i)for(var s,a,o=u[i],l=1,h=o.length,c=o[0],d=c[0],p=c[1];l<h;++l)s=d,a=p,d=(c=o[l])[0],p=c[1],a<=r?p>r&&(d-s)*(r-a)>(p-a)*(t-s)&&++e:p<=r&&(d-s)*(r-a)<(p-a)*(t-s)&&--e;return e}(),i=x&&e,n=(o=C(o)).length;(i||n)&&(a.polygonStart(),i&&(a.lineStart(),s(null,null,1,a),a.lineEnd()),n&&c(o,h,e,s,a),a.polygonEnd()),_=a,o=u=d=null}};function A(t,e){n(t,e)&&_.point(t,e)}function D(s,a){var o=n(s,a);if(u&&d.push([s,a]),b)p=s,f=a,g=o,b=!1,o&&(_.lineStart(),_.point(s,a));else if(o&&v)_.point(s,a);else{var l=[m=Math.max(-1e9,Math.min(1e9,m)),y=Math.max(-1e9,Math.min(1e9,y))],h=[s=Math.max(-1e9,Math.min(1e9,s)),a=Math.max(-1e9,Math.min(1e9,a))];!function(t,e,i,r,n,s){var a,o=t[0],l=t[1],h=e[0],u=e[1],c=0,d=1,p=h-o,f=u-l;if(a=i-o,!p&&a>0)return;if(a/=p,p<0){if(a<c)return;a<d&&(d=a)}else if(p>0){if(a>d)return;a>c&&(c=a)}if(a=n-o,p||!(a<0)){if(a/=p,p<0){if(a>d)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<d&&(d=a)}if(a=r-l,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<d&&(d=a)}else if(f>0){if(a>d)return;a>c&&(c=a)}if(a=s-l,f||!(a<0)){if(a/=f,f<0){if(a>d)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<d&&(d=a)}return c>0&&(t[0]=o+c*p,t[1]=l+c*f),d<1&&(e[0]=o+d*p,e[1]=l+d*f),!0}}}}(l,h,t,e,i,r)?o&&(_.lineStart(),_.point(s,a),x=!1):(v||(_.lineStart(),_.point(l[0],l[1])),_.point(h[0],h[1]),o||_.lineEnd(),x=!1)}m=s,y=a,v=o}return S}}function F(t,e){function i(i,r){return e((i=t(i,r))[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,r){return(i=e.invert(i,r))&&t.invert(i[0],i[1])}),i}var R=i(90607);function P(t,e){return[(0,a.Wn)(t)>a.pi?t+Math.round(-t/a.BZ)*a.BZ:t,e]}function O(t,e,i){return(t%=a.BZ)?e||i?F(I(t),z(e,i)):I(t):e||i?z(e,i):P}function L(t){return function(e,i){return[(e+=t)>a.pi?e-a.BZ:e<-a.pi?e+a.BZ:e,i]}}function I(t){var e=L(t);return e.invert=L(-t),e}function z(t,e){var i=(0,a.mC)(t),r=(0,a.O$)(t),n=(0,a.mC)(e),s=(0,a.O$)(e);function o(t,e){var o=(0,a.mC)(e),l=(0,a.mC)(t)*o,h=(0,a.O$)(t)*o,u=(0,a.O$)(e),c=u*i+l*r;return[(0,a.fv)(h*n-c*s,l*i-u*r),(0,a.ZR)(c*n+h*s)]}return o.invert=function(t,e){var o=(0,a.mC)(e),l=(0,a.mC)(t)*o,h=(0,a.O$)(t)*o,u=(0,a.O$)(e),c=u*n-h*s;return[(0,a.fv)(h*n+u*s,l*i+c*r),(0,a.ZR)(c*i-l*r)]},o}function Z(t){return function(e){var i=new j;for(var r in t)i[r]=t[r];return i.stream=e,i}}function j(){}P.invert=P,j.prototype={constructor:j,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var W=i(99848),U=i(42838);function N(t,e,i){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),(0,W.Z)(i,t.stream(U.Z)),e(U.Z.result()),null!=r&&t.clipExtent(r),t}function H(t,e,i){return N(t,function(i){var r=e[1][0]-e[0][0],n=e[1][1]-e[0][1],s=Math.min(r/(i[1][0]-i[0][0]),n/(i[1][1]-i[0][1])),a=+e[0][0]+(r-s*(i[1][0]+i[0][0]))/2,o=+e[0][1]+(n-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([a,o])},i)}function G(t,e,i){return H(t,[[0,0],e],i)}function V(t,e,i){return N(t,function(i){var r=+e,n=r/(i[1][0]-i[0][0]),s=(r-n*(i[1][0]+i[0][0]))/2,a=-n*i[0][1];t.scale(150*n).translate([s,a])},i)}function X(t,e,i){return N(t,function(i){var r=+e,n=r/(i[1][1]-i[0][1]),s=-n*i[0][0],a=(r-n*(i[1][1]+i[0][1]))/2;t.scale(150*n).translate([s,a])},i)}var Y=(0,a.mC)(30*a.uR);function $(t,e){var i;return+e?function(t,e){function i(r,n,s,o,l,h,u,c,d,p,f,g,m,y){var v=u-r,b=c-n,x=v*v+b*b;if(x>4*e&&m--){var _=o+p,w=l+f,S=h+g,A=(0,a._b)(_*_+w*w+S*S),C=(0,a.ZR)(S/=A),D=(0,a.Wn)((0,a.Wn)(S)-1)<a.Ho||(0,a.Wn)(s-d)<a.Ho?(s+d)/2:(0,a.fv)(w,_),T=t(D,C),B=T[0],M=T[1],E=B-r,k=M-n,F=b*E-v*k;(F*F/x>e||(0,a.Wn)((v*E+b*k)/x-.5)>.3||o*p+l*f+h*g<Y)&&(i(r,n,s,o,l,h,B,M,D,_/=A,w/=A,S,m,y),y.point(B,M),i(B,M,D,_,w,S,u,c,d,p,f,g,m,y))}}return function(e){var r,n,s,a,o,l,h,u,c,d,p,g,m={point:y,lineStart:v,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=_},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function y(i,r){i=t(i,r),e.point(i[0],i[1])}function v(){u=NaN,m.point=b,e.lineStart()}function b(r,n){var s=f([r,n]),a=t(r,n);i(u,c,h,d,p,g,u=a[0],c=a[1],h=r,d=s[0],p=s[1],g=s[2],16,e),e.point(u,c)}function x(){m.point=y,e.lineEnd()}function _(){v(),m.point=w,m.lineEnd=S}function w(t,e){b(r=t,e),n=u,s=c,a=d,o=p,l=g,m.point=b}function S(){i(u,c,h,d,p,g,n,s,r,a,o,l,16,e),m.lineEnd=x,x()}return m}}(t,e):(i=t,Z({point:function(t,e){t=i(t,e),this.stream.point(t[0],t[1])}}))}var q=Z({point:function(t,e){this.stream.point(t*a.uR,e*a.uR)}});function K(t,e,i,r,n,s){var o=(0,a.mC)(s),l=(0,a.O$)(s),h=o*t,u=l*t,c=o/t,d=l/t,p=(l*i-o*e)/t,f=(l*e+o*i)/t;function g(t,s){return[h*(t*=r)-u*(s*=n)+e,i-u*t-h*s]}return g.invert=function(t,e){return[r*(c*t-d*e+p),n*(f-d*t-c*e)]},g}function Q(t){return J(function(){return t})()}function J(t){var e,i,r,n,s,o,l,u,c,d,b=150,x=480,_=250,w=0,S=0,A=0,C=0,T=0,B=0,P=1,L=1,I=null,z=M,j=null,W=R.Z,U=.5;function N(t){return u(t[0]*a.uR,t[1]*a.uR)}function Y(t){return(t=u.invert(t[0],t[1]))&&[t[0]*a.RW,t[1]*a.RW]}function Q(){var t=K(b,0,0,P,L,B).apply(null,e(w,S)),r=(B?K:function(t,e,i,r,n){function s(s,a){return[e+t*(s*=r),i-t*(a*=n)]}return s.invert=function(s,a){return[(s-e)/t*r,(i-a)/t*n]},s})(b,x-t[0],_-t[1],P,L,B);return i=O(A,C,T),l=F(e,r),u=F(i,l),o=$(l,U),J()}function J(){return c=d=null,N}return N.stream=function(t){var e;return c&&d===t?c:c=q((e=i,Z({point:function(t,i){var r=e(t,i);return this.stream.point(r[0],r[1])}}))(z(o(W(d=t)))))},N.preclip=function(t){return arguments.length?(z=t,I=void 0,J()):z},N.postclip=function(t){return arguments.length?(W=t,j=r=n=s=null,J()):W},N.clipAngle=function(t){return arguments.length?(z=+t?function(t){var e=(0,a.mC)(t),i=6*a.uR,r=e>0,n=(0,a.Wn)(e)>a.Ho;function s(t,i){return(0,a.mC)(t)*(0,a.mC)(i)>e}function o(t,i,r){var n=f(t),s=f(i),o=[1,0,0],l=m(n,s),h=g(l,l),u=l[0],c=h-u*u;if(!c)return!r&&t;var d=m(o,l),b=v(o,e*h/c);y(b,v(l,-e*u/c));var x=g(b,d),_=g(d,d),w=x*x-_*(g(b,b)-1);if(!(w<0)){var S=(0,a._b)(w),A=v(d,(-x-S)/_);if(y(A,b),A=p(A),!r)return A;var C,D=t[0],T=i[0],B=t[1],M=i[1];T<D&&(C=D,D=T,T=C);var E=T-D,k=(0,a.Wn)(E-a.pi)<a.Ho,F=k||E<a.Ho;if(!k&&M<B&&(C=B,B=M,M=C),F?k?B+M>0^A[1]<((0,a.Wn)(A[0]-D)<a.Ho?B:M):B<=A[1]&&A[1]<=M:E>a.pi^(D<=A[0]&&A[0]<=T)){var R=v(d,(-x+S)/_);return y(R,b),[A,p(R)]}}}function l(e,i){var n=r?t:a.pi-t,s=0;return e<-n?s|=1:e>n&&(s|=2),i<-n?s|=4:i>n&&(s|=8),s}return D(s,function(t){var e,i,u,c,d;return{lineStart:function(){c=u=!1,d=1},point:function(p,f){var g,m,y=[p,f],v=s(p,f),b=r?v?0:l(p,f):v?l(p+(p<0?a.pi:-a.pi),f):0;!e&&(c=u=v)&&t.lineStart(),v!==u&&(!(m=o(e,y))||h(e,m)||h(y,m))&&(y[2]=1),v!==u?(d=0,v?(t.lineStart(),m=o(y,e),t.point(m[0],m[1])):(m=o(e,y),t.point(m[0],m[1],2),t.lineEnd()),e=m):n&&e&&r^v&&!(b&i)&&(g=o(y,e,!0))&&(d=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3))),!v||e&&h(e,y)||t.point(y[0],y[1]),e=y,u=v,i=b},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return d|(c&&u)<<1}}},function(e,r,n,s){!function(t,e,i,r,n,s){if(i){var o=(0,a.mC)(e),l=(0,a.O$)(e),h=r*i;null==n?(n=e+r*a.BZ,s=e-h/2):(n=E(o,n),s=E(o,s),(r>0?n<s:n>s)&&(n+=r*a.BZ));for(var u,c=n;r>0?c>s:c<s;c-=h)u=p([o,-l*(0,a.mC)(c),-l*(0,a.O$)(c)]),t.point(u[0],u[1])}}(s,t,i,n,e,r)},r?[0,-t]:[-a.pi,t-a.pi])}(I=t*a.uR):(I=null,M),J()):I*a.RW},N.clipExtent=function(t){return arguments.length?(W=null==t?(j=r=n=s=null,R.Z):k(j=+t[0][0],r=+t[0][1],n=+t[1][0],s=+t[1][1]),J()):null==j?null:[[j,r],[n,s]]},N.scale=function(t){return arguments.length?(b=+t,Q()):b},N.translate=function(t){return arguments.length?(x=+t[0],_=+t[1],Q()):[x,_]},N.center=function(t){return arguments.length?(w=t[0]%360*a.uR,S=t[1]%360*a.uR,Q()):[w*a.RW,S*a.RW]},N.rotate=function(t){return arguments.length?(A=t[0]%360*a.uR,C=t[1]%360*a.uR,T=t.length>2?t[2]%360*a.uR:0,Q()):[A*a.RW,C*a.RW,T*a.RW]},N.angle=function(t){return arguments.length?(B=t%360*a.uR,Q()):B*a.RW},N.reflectX=function(t){return arguments.length?(P=t?-1:1,Q()):P<0},N.reflectY=function(t){return arguments.length?(L=t?-1:1,Q()):L<0},N.precision=function(t){return arguments.length?(o=$(l,U=t*t),J()):(0,a._b)(U)},N.fitExtent=function(t,e){return H(N,t,e)},N.fitSize=function(t,e){return G(N,t,e)},N.fitWidth=function(t,e){return V(N,t,e)},N.fitHeight=function(t,e){return X(N,t,e)},function(){return e=t.apply(this,arguments),N.invert=e.invert&&Y,Q()}}function tt(t){var e=0,i=a.pi/3,r=J(t),n=r(e,i);return n.parallels=function(t){return arguments.length?r(e=t[0]*a.uR,i=t[1]*a.uR):[e*a.RW,i*a.RW]},n}function te(t,e){var i=(0,a.O$)(t),r=(i+(0,a.O$)(e))/2;if((0,a.Wn)(r)<a.Ho){var n=(0,a.mC)(t);function s(t,e){return[t*n,(0,a.O$)(e)/n]}return s.invert=function(t,e){return[t/n,(0,a.ZR)(e*n)]},s}var o=1+i*(2*r-i),l=(0,a._b)(o)/r;function h(t,e){var i=(0,a._b)(o-2*r*(0,a.O$)(e))/r;return[i*(0,a.O$)(t*=r),l-i*(0,a.mC)(t)]}return h.invert=function(t,e){var i=l-e,n=(0,a.fv)(t,(0,a.Wn)(i))*(0,a.Xx)(i);return i*r<0&&(n-=a.pi*(0,a.Xx)(t)*(0,a.Xx)(i)),[n/r,(0,a.ZR)((o-(t*t+i*i)*r*r)/(2*r))]},h}function ti(){return tt(te).scale(155.424).center([0,33.6442])}function tr(){return ti().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tn(t){return function(e,i){var r=(0,a.mC)(e),n=(0,a.mC)(i),s=t(r*n);return[s*n*(0,a.O$)(e),s*(0,a.O$)(i)]}}function ts(t){return function(e,i){var r=(0,a._b)(e*e+i*i),n=t(r),s=(0,a.O$)(n),o=(0,a.mC)(n);return[(0,a.fv)(e*s,r*o),(0,a.ZR)(r&&i*s/r)]}}var ta=tn(function(t){return(0,a._b)(2/(1+t))});ta.invert=ts(function(t){return 2*(0,a.ZR)(t/2)});var to=tn(function(t){return(t=(0,a.Kh)(t))&&t/(0,a.O$)(t)});function tl(t,e){return[t,(0,a.cM)((0,a.OR)((a.ou+e)/2))]}function th(t){var e,i,r,n=Q(t),s=n.center,o=n.scale,l=n.translate,h=n.clipExtent,u=null;function c(){var s=a.pi*o(),l=n((function(t){function e(e){return e=t(e[0]*a.uR,e[1]*a.uR),e[0]*=a.RW,e[1]*=a.RW,e}return t=O(t[0]*a.uR,t[1]*a.uR,t.length>2?t[2]*a.uR:0),e.invert=function(e){return e=t.invert(e[0]*a.uR,e[1]*a.uR),e[0]*=a.RW,e[1]*=a.RW,e},e})(n.rotate()).invert([0,0]));return h(null==u?[[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]]:t===tl?[[Math.max(l[0]-s,u),e],[Math.min(l[0]+s,i),r]]:[[u,Math.max(l[1]-s,e)],[i,Math.min(l[1]+s,r)]])}return n.scale=function(t){return arguments.length?(o(t),c()):o()},n.translate=function(t){return arguments.length?(l(t),c()):l()},n.center=function(t){return arguments.length?(s(t),c()):s()},n.clipExtent=function(t){return arguments.length?(null==t?u=e=i=r=null:(u=+t[0][0],e=+t[0][1],i=+t[1][0],r=+t[1][1]),c()):null==u?null:[[u,e],[i,r]]},c()}function tu(t){return(0,a.OR)((a.ou+t)/2)}function tc(t,e){var i=(0,a.mC)(t),r=t===e?(0,a.O$)(t):(0,a.cM)(i/(0,a.mC)(e))/(0,a.cM)(tu(e)/tu(t)),n=i*(0,a.sQ)(tu(t),r)/r;if(!r)return tl;function s(t,e){n>0?e<-a.ou+a.Ho&&(e=-a.ou+a.Ho):e>a.ou-a.Ho&&(e=a.ou-a.Ho);var i=n/(0,a.sQ)(tu(e),r);return[i*(0,a.O$)(r*t),n-i*(0,a.mC)(r*t)]}return s.invert=function(t,e){var i=n-e,s=(0,a.Xx)(r)*(0,a._b)(t*t+i*i),o=(0,a.fv)(t,(0,a.Wn)(i))*(0,a.Xx)(i);return i*r<0&&(o-=a.pi*(0,a.Xx)(t)*(0,a.Xx)(i)),[o/r,2*(0,a.z4)((0,a.sQ)(n/s,1/r))-a.ou]},s}function td(t,e){return[t,e]}function tp(t,e){var i=(0,a.mC)(t),r=t===e?(0,a.O$)(t):(i-(0,a.mC)(e))/(e-t),n=i/r+t;if((0,a.Wn)(r)<a.Ho)return td;function s(t,e){var i=n-e,s=r*t;return[i*(0,a.O$)(s),n-i*(0,a.mC)(s)]}return s.invert=function(t,e){var i=n-e,s=(0,a.fv)(t,(0,a.Wn)(i))*(0,a.Xx)(i);return i*r<0&&(s-=a.pi*(0,a.Xx)(t)*(0,a.Xx)(i)),[s/r,n-(0,a.Xx)(r)*(0,a._b)(t*t+i*i)]},s}to.invert=ts(function(t){return t}),tl.invert=function(t,e){return[t,2*(0,a.z4)((0,a.Qq)(e))-a.ou]},td.invert=td;var tf=(0,a._b)(3)/2;function tg(t,e){var i=(0,a.ZR)(tf*(0,a.O$)(e)),r=i*i,n=r*r*r;return[t*(0,a.mC)(i)/(tf*(1.340264+-.24331799999999998*r+n*(.0062510000000000005+.034164*r))),i*(1.340264+-.081106*r+n*(893e-6+.003796*r))]}function tm(t,e){var i=(0,a.mC)(e),r=(0,a.mC)(t)*i;return[i*(0,a.O$)(t)/r,(0,a.O$)(e)/r]}function ty(t,e){var i=e*e,r=i*i;return[t*(.8707-.131979*i+r*(-.013791+r*(.003971*i-.001529*r))),e*(1.007226+i*(.015085+r*(-.044475+.028874*i-.005916*r)))]}function tv(t,e){return[(0,a.mC)(e)*(0,a.O$)(t),(0,a.O$)(e)]}function tb(t,e){var i=(0,a.mC)(e),r=1+(0,a.mC)(t)*i;return[i*(0,a.O$)(t)/r,(0,a.O$)(e)/r]}function tx(t,e){return[(0,a.cM)((0,a.OR)((a.ou+e)/2)),-t]}tg.invert=function(t,e){for(var i,r,n=e,s=n*n,o=s*s*s,l=0;l<12&&(r=n*(1.340264+-.081106*s+o*(893e-6+.003796*s))-e,n-=i=r/(1.340264+-.24331799999999998*s+o*(.0062510000000000005+.034164*s)),o=(s=n*n)*s*s,!((0,a.Wn)(i)<a.aW));++l);return[tf*t*(1.340264+-.24331799999999998*s+o*(.0062510000000000005+.034164*s))/(0,a.mC)(n),(0,a.ZR)((0,a.O$)(n)/tf)]},tm.invert=ts(a.z4),ty.invert=function(t,e){var i,r=e,n=25;do{var s=r*r,o=s*s;r-=i=(r*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.045255+o*(-.311325+.259866*s-.005916*11*o)))}while((0,a.Wn)(i)>a.Ho&&--n>0);return[t/(.8707+(s=r*r)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),r]},tv.invert=ts(a.ZR),tb.invert=ts(function(t){return 2*(0,a.z4)(t)}),tx.invert=function(t,e){return[-e,2*(0,a.z4)((0,a.Qq)(t))-a.ou]},(0,s.Z)();let t_={},tw={albers:tr,albersusa:function(){var t,e,i,r,n,s,o=tr(),l=ti().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=ti().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){s=[t,e]}};function c(t){var e=t[0],a=t[1];return s=null,i.point(e,a),s||(r.point(e,a),s)||(n.point(e,a),s)}function d(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),i=o.translate(),r=(t[0]-i[0])/e,n=(t[1]-i[1])/e;return(n>=.12&&n<.234&&r>=-.425&&r<-.214?l:n>=.166&&n<.234&&r>=-.214&&r<-.115?h:o).invert(t)},c.stream=function(i){var r,n;return t&&e===i?t:(n=(r=[o.stream(e=i),l.stream(i),h.stream(i)]).length,t={point:function(t,e){for(var i=-1;++i<n;)r[i].point(t,e)},sphere:function(){for(var t=-1;++t<n;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<n;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<n;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<n;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<n;)r[t].polygonEnd()}})},c.precision=function(t){return arguments.length?(o.precision(t),l.precision(t),h.precision(t),d()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),l.scale(.35*t),h.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),s=+t[0],c=+t[1];return i=o.translate(t).clipExtent([[s-.455*e,c-.238*e],[s+.455*e,c+.238*e]]).stream(u),r=l.translate([s-.307*e,c+.201*e]).clipExtent([[s-.425*e+a.Ho,c+.12*e+a.Ho],[s-.214*e-a.Ho,c+.234*e-a.Ho]]).stream(u),n=h.translate([s-.205*e,c+.212*e]).clipExtent([[s-.214*e+a.Ho,c+.166*e+a.Ho],[s-.115*e-a.Ho,c+.234*e-a.Ho]]).stream(u),d()},c.fitExtent=function(t,e){return H(c,t,e)},c.fitSize=function(t,e){return G(c,t,e)},c.fitWidth=function(t,e){return V(c,t,e)},c.fitHeight=function(t,e){return X(c,t,e)},c.scale(1070)},azimuthalequalarea:function(){return Q(ta).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return Q(to).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return tt(tc).scale(109.5).parallels([30,30])},conicequalarea:ti,conicequidistant:function(){return tt(tp).scale(131.154).center([0,13.9389])},equalearth:function(){return Q(tg).scale(177.158)},equirectangular:function(){return Q(td).scale(152.63)},gnomonic:function(){return Q(tm).scale(144.049).clipAngle(60)},identity:function(){var t,e,i,r,n,s,o,l=1,h=0,u=0,c=1,d=1,p=0,f=null,g=1,m=1,y=Z({point:function(t,e){var i=x([t,e]);this.stream.point(i[0],i[1])}}),v=R.Z;function b(){return g=l*c,m=l*d,s=o=null,x}function x(i){var r=i[0]*g,n=i[1]*m;if(p){var s=n*t-r*e;r=r*t+n*e,n=s}return[r+h,n+u]}return x.invert=function(i){var r=i[0]-h,n=i[1]-u;if(p){var s=n*t+r*e;r=r*t-n*e,n=s}return[r/g,n/m]},x.stream=function(t){return s&&o===t?s:s=y(v(o=t))},x.postclip=function(t){return arguments.length?(v=t,f=i=r=n=null,b()):v},x.clipExtent=function(t){return arguments.length?(v=null==t?(f=i=r=n=null,R.Z):k(f=+t[0][0],i=+t[0][1],r=+t[1][0],n=+t[1][1]),b()):null==f?null:[[f,i],[r,n]]},x.scale=function(t){return arguments.length?(l=+t,b()):l},x.translate=function(t){return arguments.length?(h=+t[0],u=+t[1],b()):[h,u]},x.angle=function(i){return arguments.length?(p=i%360*a.uR,e=(0,a.O$)(p),t=(0,a.mC)(p),b()):p*a.RW},x.reflectX=function(t){return arguments.length?(c=t?-1:1,b()):c<0},x.reflectY=function(t){return arguments.length?(d=t?-1:1,b()):d<0},x.fitExtent=function(t,e){return H(x,t,e)},x.fitSize=function(t,e){return G(x,t,e)},x.fitWidth=function(t,e){return V(x,t,e)},x.fitHeight=function(t,e){return X(x,t,e)},x},mercator:function(){return th(tl).scale(961/a.BZ)},naturalearth1:function(){return Q(ty).scale(175.295)},orthographic:function(){return Q(tv).scale(249.5).clipAngle(90+a.Ho)},stereographic:function(){return Q(tb).scale(250).clipAngle(142)},transversemercator:function(){var t=th(tx),e=t.center,i=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?i([t[0],t[1],t.length>2?t[2]+90:90]):[(t=i())[0],t[1],t[2]-90]},i([0,0,90]).scale(159.155)}},tS=["clipAngle","clipExtent","scale","translate","center","rotate","precision","reflectX","reflectY","parallels","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function tA(t,e){return function i(){let r=e();return r.type=t,r.path=(0,s.Z)().projection(r),r.copy=r.copy||function(){let t=i();return tS.forEach(e=>{r[e]&&t[e](r[e]())}),t.path.pointRadius(r.path.pointRadius()),t},r}}function tC(t,e){let i=t.toLowerCase();return arguments.length>1?tA(i,e):tw[i]?(t_[i]||(t_[i]=tA(i,tw[i])),t_[i]):null}},22345:function(t,e,i){"use strict";i.d(e,{L:()=>a});var r=i(95723),n=i(54326);let s=(t,e)=>{var i,n,s,a;let{numBins:o,thresholds:l,countName:h,percentageName:u,valuesName:c,countField:d,field:p,n:f,x0Name:g,x1Name:m}=e,y=e.groupField,v=Array.isArray(y)?y.length>0:!!y,b=[];if(!v)for(let t=0;t<o;t++){let i={[g]:l[t],[m]:l[t+1],[h]:0};e.includeValues&&(i[c]=[]),b.push(i)}let x=v?Array(o).fill(0).map(()=>new Map):[],_=v?Array(o).fill(0).map(()=>new Map):[],w=[],S=new Set,A=new Map;for(let s=0;s<f;s++){let a=t[s][p];if(null==a)continue;let u=+a;if(Number.isFinite(u))for(let a=0;a<o;a++){let p=l[a],f=l[a+1];if(u>=p&&u<f||a===o-1&&u<=f){let o=null!=(i=t[s][d])?i:1;if(v){let i;i=(0,r.Z)(y)?y.map(e=>String(t[s][e])).join("||"):String(t[s][y]);let l=x[a],h=null!=(n=l.get(i))?n:0;if(l.set(i,h+o),S.has(i)||(S.add(i),w.push(i),(0,r.Z)(y)?A.set(i,Object.fromEntries(y.map(e=>[e,t[s][e]]))):A.set(i,t[s][y])),e&&e.includeValues){let e=_[a];e.has(i)||e.set(i,[]);let r=e.get(i);r&&r.push(t[s])}}else b[a][h]+=o;e&&e.includeValues&&!v&&b[a][c].push(t[s]);break}}}let C=0,D=[];if(v){for(let t=0;t<o;t++)for(let i of w){let n=null!=(s=x[t].get(i))?s:0,o={[g]:l[t],[m]:l[t+1],[h]:n},u=null!=(a=A.get(i))?a:{};if((0,r.Z)(y))for(let t of y)o[t]=u[t];else y&&(o[y]=u);e&&e.includeValues&&(o[c]=_[t].get(i)||[]),D.push(o),C+=n}let t=C;for(let e of D)e[u]=t>0?e[h]/t:0}else{for(let t=0,e=b.length;t<e;t++)C+=b[t][h];for(let t=0,e=b.length;t<e;t++)b[t][u]=C>0?b[t][h]/C:0,D.push(b[t])}return D},a=(t,e)=>{var i,a,o,l,h,u,c,d,p,f;let g=null==e?void 0:e.field;if(!g)return[];let m=e.countField,y=t.length,v,b=1/0,x=-1/0;if(e.extent)b=e.extent[0],x=e.extent[1];else for(let e=0;e<y;e++){let i=t[e][g];if((0,n.Z)(i))continue;let r=+i;Number.isFinite(r)&&(r<b&&(b=r),r>x&&(x=r))}if(!Number.isFinite(b)||!Number.isFinite(x)||0===y)return[];if(e.thresholds&&e.thresholds.length)(v=e.thresholds.slice()).sort((t,e)=>t-e);else if("number"==typeof e.step&&e.step>0){let t=e.step,i=b;for(e.extent||(i=Math.floor(b/t)*t),v=[i];i<=x;)i+=t,v.push(i)}else{let t=e.bins&&e.bins>0?Math.floor(e.bins):10;if(x-b>1){let e=Math.floor(b),i=Math.ceil((x-e)/t);v=Array(t+1);for(let r=0;r<=t;r++)if(v[r]=e+i*r,v[r]>x){t=r,v.length=t+1;break}}else{let e=(x-b)/t;v=Array(t+1);for(let i=0;i<=t;i++)if(v[i]=b+e*i,v[i]>x){t=i,v.length=t+1;break}}}let _=Math.max(0,v.length-1);if(0===_)return[];let w=null!=(a=null==(i=e.outputNames)?void 0:i.x0)?a:"x0",S=null!=(l=null==(o=e.outputNames)?void 0:o.x1)?l:"x1",A=null!=(u=null==(h=e.outputNames)?void 0:h.count)?u:"count",C=null!=(d=null==(c=e.outputNames)?void 0:c.values)?d:"values",D=null!=(f=null==(p=e.outputNames)?void 0:p.percentage)?f:"percentage",T=(0,r.Z)(null==e?void 0:e.facetField)?null==e?void 0:e.facetField:(null==e?void 0:e.facetField)?[e.facetField]:[],B=(0,r.Z)(null==e?void 0:e.groupField)?null==e?void 0:e.groupField:(null==e?void 0:e.groupField)?[e.groupField]:[],M=B.length?B:void 0,E=Object.assign(Object.assign({},e),{numBins:_,thresholds:v,countName:A,percentageName:D,valuesName:C,countField:m,field:g,n:y,x0Name:w,x1Name:S,groupField:M});if(!T.length)return s(t,E);let k={};return t.forEach(t=>{let e=T.map(e=>null==t?void 0:t[e]).join("-&&-");k[e]?k[e].push(t):k[e]=[t]}),Object.values(k).map(t=>{let e=[...B,...T];return s(t,Object.assign(Object.assign({},E),{groupField:e.length?e:void 0,n:t.length}))}).flat()}},67844:function(t,e,i){"use strict";i.d(e,{r:()=>o});var r=i(95723),n=i(54326),s=i(94030),a=i(39708);let o=(t,e)=>{var i,o,l,h,u,c,d,p,f,g,m,y,v,b,x;let _=null==e?void 0:e.field;if(!_)return[];let w=null==e?void 0:e.groupField,S=null!=(i=null==e?void 0:e.whiskers)?i:1.5,A=!!(null==e?void 0:e.includeValues),C=null!=(o=null==e?void 0:e.outputNames)?o:{},D=null!=(l=C.key)?l:(0,r.Z)(w)?null:null!=w?w:"key",T=null!=(h=C.count)?h:"count",B=null!=(u=C.mean)?u:"mean",M=null!=(c=C.q1)?c:"q1",E=null!=(d=C.median)?d:"median",k=null!=(p=C.q3)?p:"q3",F=null!=(f=C.iqr)?f:"iqr",R=null!=(g=C.min)?g:"min",P=null!=(m=C.max)?m:"max",O=null!=(y=C.lowerWhisker)?y:"lowerWhisker",L=null!=(v=C.upperWhisker)?v:"upperWhisker",I=null!=(b=C.outliers)?b:"outliers",z=null!=(x=C.values)?x:"values",Z=new Map,j=new Map,W=new Map,U=t.length;for(let e=0;e<U;e++){let i,s=t[e],a=s[_];if((0,n.Z)(a))continue;let o=+a;if(!Number.isFinite(o))continue;i=(0,r.Z)(w)?w.map(t=>String(s[t])).join("||"):w?String(s[w]):"___all",Z.has(i)||(Z.set(i,[]),A&&j.set(i,[]),(0,r.Z)(w)?W.set(i,Object.fromEntries(w.map(t=>[t,s[t]]))):W.set(i,w?s[w]:null));let l=Z.get(i);if(l&&l.push(o),A){let t=j.get(i);t&&t.push(s)}}(0,r.Z)(S)&&(S=[(0,s.Z)(Math.min.apply(null,S),0,1),(0,s.Z)(Math.max.apply(null,S),0,1)]);let N=[];for(let[t,e]of Z){if(!e||0===e.length)continue;let i=e.slice().sort((t,e)=>t-e),n=i.length,s=i[0],o=i[i.length-1],l=0;for(let t=0;t<i.length;t++)l+=i[t];let h=l/n,u=(0,a.s)(i,.25),c=(0,a.s)(i,.5),d=(0,a.s)(i,.75),p=d-u,f=(0,r.Z)(S)?(0,a.s)(i,S[0]):u-S*p,g=(0,r.Z)(S)?(0,a.s)(i,S[1]):d+S*p,m=[];for(let t=0;t<i.length;t++)(i[t]<f||i[t]>g)&&m.push(i[t]);let y={},v=W.get(t);if(null!==D)y[D]=v;else if((0,r.Z)(w)){let t=v||{};for(let e of w)y[e]=t[e]}y[T]=n,y[B]=h,y[M]=u,y[E]=c,y[k]=d,y[F]=p,y[R]=s,y[P]=o,y[O]=f,y[L]=g,y[I]=m,A&&(y[z]=j.get(t)||[]),N.push(y)}return N}},52536:function(t,e,i){"use strict";i.d(e,{X:()=>s});var r=i(89530),n=i(64776);let s=(t,e)=>{var i,s;if(!(null==e?void 0:e.fields)||0===t.length)return t;let a=e.fields,o=t[0],l={},h=[];for(let e in a)if(Object.prototype.hasOwnProperty.call(a,e)){let u,c=a[e];if(c.sort&&((0,r.Z)(c.sortIndex)||(c.sortIndex=0),(0,n.Z)(c.sortReverse)||(c.sortReverse="desc"===c.sort)),!c.type){let r=o;e in o||(r=null!=(i=t.find(t=>e in t))?i:o),c.type="number"==typeof r[e]?"linear":"ordinal"}if("number"==typeof c.sortIndex&&(u={key:e,type:c.type,index:c.sortIndex,sortIndex:{},sortIndexCount:0,sortReverse:!0===c.sortReverse},h.push(u)),(null==(s=c.domain)?void 0:s.length)>0)if("ordinal"===c.type){c._domainCache={},l[e]=c;let t={};c.domain.forEach((e,i)=>{t[e]=i,c._domainCache[e]=i}),u&&(u.sortIndex=t,u.sortIndexCount=c.domain.length)}else c.domain.length>=2&&(l[e]=c)}return Object.keys(l).length>0&&(t=t.filter(t=>{for(let e in l){let i=l[e];if("ordinal"===i.type){if(!(t[e]in i._domainCache))return!1}else if(i.domain[0]>t[e]||i.domain[1]<t[e])return!1}return!0})),h.sort((t,e)=>t.index-e.index),t.sort((t,e)=>(function(t,e,i){for(let r=0;r<i.length;r++){let n=i[r],s=0;if("ordinal"===n.type?(void 0===n.sortIndex[e[n.key]]&&(n.sortIndex[e[n.key]]=n.sortIndexCount++),void 0===n.sortIndex[t[n.key]]&&(n.sortIndex[t[n.key]]=n.sortIndexCount++),s=n.sortIndex[t[n.key]]-n.sortIndex[e[n.key]]):"linear"===n.type&&(s=t[n.key]-e[n.key]),n.sortReverse&&(s=-s),0!==s)return s}return 0})(t,e,h)),t}},33141:function(t,e,i){"use strict";i.d(e,{h:()=>r});let r=(t,e)=>{let{callback:i}=e;return i&&(t=t.filter(i)),t}},7187:function(t,e,i){"use strict";i.d(e,{g:()=>r});let r=(t,e)=>{let{fields:i,key:r,value:n,retains:s}=e,a=[];for(let e=0;e<t.length;e++)i.forEach(o=>{let l={};if(l[r]=o,l[n]=t[e][o],s)s.forEach(i=>{l[i]=t[e][i]});else for(let r in t[e])-1===i.indexOf(r)&&(l[r]=t[e][r]);a.push(l)});return a}},49527:function(t,e,i){"use strict";i.d(e,{o:()=>o});var r=i(30939),n=i.n(r),s=i(3544);let a={tolerance:.01},o=(t,e)=>{let{tolerance:i}=(0,s.g)(a,e);return n()(t,i)}},3544:function(t,e,i){"use strict";i.d(e,{g:()=>s});var r=i(65755),n=i(80971);let s=function(t,...e){return function(t,...e){t||(t={});let i=-1,r=e.length;for(;++i<r;){var s=t,a=e[i];if((0,n.Z)(a)&&s!==a)for(let t in a)!function t(e,i,r){let s=i[r];if(void 0===s)e[r]=null;else if((0,n.Z)(s))for(let i in(0,n.Z)(e[r])||(e[r]={}),s)t(e[r],s,i);else e[r]=s}(s,a,t)}return t}((0,r.Z)(t),...e)}},18350:function(t,e,i){"use strict";i.d(e,{F:()=>n});let r=0;function n(t="dataset"){return r>1e8&&(r=0),t+"_"+r++}},88131:function(t,e,i){"use strict";i.d(e,{l:()=>A});var r=i(93364),n=i(9706),s=i(37258);function a(t,e){let i=t.radius-e.radius,r=e.x-t.x,n=e.y-t.y;return i<0||i*i<r*r+n*n}function o(t,e){let i=t.radius-e.radius+1e-9*Math.max(t.radius,e.radius,1),r=e.x-t.x,n=e.y-t.y;return i>0&&i*i>r*r+n*n}function l(t,e){for(let i=0;i<e.length;++i)if(!o(t,e[i]))return!1;return!0}function h(t,e){let i=t.x,r=t.y,n=t.radius,s=e.x,a=e.y,o=e.radius,l=s-i,h=a-r,u=o-n,c=Math.sqrt(l*l+h*h);return{x:(i+s+l/c*u)/2,y:(r+a+h/c*u)/2,radius:(c+n+o)/2}}function u(t,e,i){let r=t.x,n=t.y,s=t.radius,a=e.x,o=e.y,l=e.radius,h=i.x,u=i.y,c=i.radius,d=r-a,p=r-h,f=n-o,g=n-u,m=l-s,y=c-s,v=r*r+n*n-s*s,b=v-a*a-o*o+l*l,x=v-h*h-u*u+c*c,_=p*f-d*g,w=(f*x-g*b)/(2*_)-r,S=(g*m-f*y)/_,A=(p*b-d*x)/(2*_)-n,C=(d*y-p*m)/_,D=S*S+C*C-1,T=2*(s+w*S+A*C),B=w*w+A*A-s*s,M=-(Math.abs(D)>1e-6?(T+Math.sqrt(T*T-4*D*B))/(2*D):B/T);return{x:r+w+S*M,y:n+A+C*M,radius:M}}function c(t,e,i){let r,n,s,a,o=t.x-e.x,l=t.y-e.y,h=o*o+l*l;h?(n=e.radius+i.radius,n*=n,a=t.radius+i.radius,n>(a*=a)?(r=(h+a-n)/(2*h),s=Math.sqrt(Math.max(0,a/h-r*r)),i.x=t.x-r*o-s*l,i.y=t.y-r*l+s*o):(r=(h+n-a)/(2*h),s=Math.sqrt(Math.max(0,n/h-r*r)),i.x=e.x+r*o-s*l,i.y=e.y+r*l+s*o)):(i.x=e.x+i.radius,i.y=e.y)}function d(t,e){let i=t.radius+e.radius-1e-6,r=e.x-t.x,n=e.y-t.y;return i>0&&i*i>r*r+n*n}function p(t){let e=t._,i=t.next._,r=e.radius+i.radius,n=(e.x*i.radius+i.x*e.radius)/r,s=(e.y*i.radius+i.y*e.radius)/r;return n*n+s*s}function f(t){return{_:t,next:null,prev:null}}var g=i(65709),m=i(70082),y=i(61369),v=i(37651),b=i(89079);let x=t=>0;function _(t){return function(e){e.children||(e.radius=Math.max(0,+t(e)||0))}}function w(t,e,i){return function(r){let g=null==r?void 0:r.children;if(g){let m,y=g.length,v=t(r)*e||0;if(v)for(m=0;m<y;++m)g[m].radius+=v;let b=function(t,e){let i=(t=(0,n.IX)(t)).length;if(!i)return 0;let r=t[0];if(r.x=0,r.y=0,1===i)return r.radius;let g=t[1];if(r.x=-g.radius,g.x=r.radius,g.y=0,2===i)return r.radius+g.radius;let m=t[2];c(g,r,m);let y,v,b,x,_,w,S,A=f(r),C=f(g),D=f(m);A.next=C,D.prev=C,C.next=D,A.prev=D,D.next=A,C.prev=A;for(let e=3;e<i;++e){S=!1,m=t[e],c(A._,C._,m),D=f(m),y=C.next,v=A.prev,b=C._.radius,x=A._.radius;do if(b<=x){if(d(y._,D._)){C=y,A.next=C,C.prev=A,--e,S=!0;break}b+=y._.radius,y=y.next}else{if(d(v._,D._)){(A=v).next=C,C.prev=A,--e,S=!0;break}x+=v._.radius,v=v.prev}while(y!==v.next);if(!S){for(D.prev=A,D.next=C,A.next=C.prev=C=D,_=p(A),D=D.next;D!==C;)(w=p(D))<_&&(A=D,_=w),D=D.next;C=A.next}}let T=[C._];for(D=C.next;D!==C;)T.push(D._),D=D.next;m=function(t,e){let i=0,r=(0,n.Sy)(Array.from(t),e),c=r.length,d,p,f=[];for(;i<c;)d=r[i],p&&o(p,d)?++i:(p=function(t){switch(t.length){case 1:var e;return{x:(e=t[0]).x,y:e.y,radius:e.radius};case 2:return h(t[0],t[1]);case 3:return u(t[0],t[1],t[2])}}(f=function(t,e){let i,r;if(l(e,t))return[e];for(i=0;i<t.length;++i)if(a(e,t[i])&&l(h(t[i],e),t))return[t[i],e];for(i=0;i<t.length-1;++i)for(r=i+1;r<t.length;++r)if(a(h(t[i],t[r]),e)&&a(h(t[i],e),t[r])&&a(h(t[r],e),t[i])&&l(u(t[i],t[r],e),t))return[t[i],t[r],e];s.Y.getInstance().error("error when packEncloseRandom")}(f,d)),i=0);return p}(T,e);for(let e=0;e<i;++e)r=t[e],r.x-=m.x,r.y-=m.y;return m.radius}(g,i);if(v)for(m=0;m<y;++m)g[m].radius-=v;r.radius=b+v}}}function S(t,e){return function(i,r,n){i.radius*=t,i.maxDepth=e,n&&(i.x=n.x+t*i.x,i.y=n.y+t*i.y)}}class A{constructor(t){this.options=t;let e=null==t?void 0:t.nodeKey,i=(0,g.Z)(e)?e:e?(0,m.EP)(e):null;this._getNodeKey=i,this._getPadding=(0,y.Z)(null==t?void 0:t.padding)?e=>t.padding:(0,v.Z)(null==t?void 0:t.padding)?e=>{var i;return null!=(i=t.padding[e.depth+1])?i:0}:()=>0,this._maxDepth=-1}layout(t,e){var i;let n="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};if(!t||!t.length)return[];let s=[],a=(0,r.Ch)(t,s,0,-1,null,this._getNodeKey);this._maxDepth=a.maxDepth;let o=(0,b.JY)(),l={flattenIndex:-1,maxDepth:-1,key:"root",depth:-1,index:-1,value:a.sum,datum:null,children:s,x:n.x0+n.width/2,y:n.y0+n.height/2},{nodeSort:h,setRadius:u,padding:c,includeRoot:d}=null!=(i=this.options)?i:{};if(!1!==h){let t=(0,g.Z)(h)?this.options.nodeKey:A.defaultOpionts.nodeSort;(0,r.R$)([l],e=>{e.children&&e.children.length&&e.children.sort(t)})}if(u)(0,r.R$)([l],_(u)),(0,r.Ye)([l],w(this._getPadding,.5,o)),(0,r.R$)([l],S(1,this._maxDepth));else{let t=Math.min(n.width,n.height);(0,r.R$)([l],_(A.defaultOpionts.setRadius)),(0,r.Ye)([l],w(x,1,o)),c&&(0,r.Ye)([l],w(this._getPadding,l.radius/t,o)),(0,r.R$)([l],S(t/(2*l.radius),this._maxDepth))}return d?[l]:s}}A.defaultOpionts={setRadius:t=>Math.sqrt(t.value),padding:0,nodeSort:(t,e)=>e.value-t.value}},4057:function(t,e,i){"use strict";i.d(e,{V:()=>_});var r=i(9706),n=i(50890),s=i(69988),a=i(65709),o=i(70082),l=i(37258),h=i(83510),u=i(43122),c=i(61369),d=i(51318),p=i(82206);let f=t=>{let e=0;return t.forEach((t,i)=>{var r;(0,n.Z)(t.value)&&((null==(r=t.children)?void 0:r.length)?t.value=f(t.children):t.value=0),e+=Math.abs(t.value)}),e};function g(t){return t.depth}function m(t,e){return e-1-t.endDepth}let y=(t,e)=>(null==t?void 0:t.y0)-(null==e?void 0:e.y0),v=(t,e)=>{if((0,n.Z)(t.value))return null;let i=(e?t.targetLinks:t.sourceLinks).reduce((t,e)=>((0,n.Z)(e.value)?t.count+=1:t.sum+=e.value,t),{sum:0,count:0});return i.count>0?(t.value-i.sum)/i.count:null},b={left:g,right:m,justify:function(t,e){return t.sourceLinks.length?t.depth:e-1},center:function(t,e,i){return t.targetLinks.length?t.depth:t.sourceLinks.length?(0,r.iH)(t.sourceLinks.map(t=>i[t.target].depth))-1:0},start:g,end:m},x=(0,s.i)(0,1);class _{constructor(t){this._ascendingSourceBreadth=(t,e)=>y(this._nodeMap[t.source],this._nodeMap[e.source])||t.index-e.index,this._ascendingTargetBreadth=(t,e)=>y(this._nodeMap[t.target],this._nodeMap[e.target])||t.index-e.index,this.options=Object.assign({},_.defaultOptions,t);let e=this.options.nodeKey,i=(0,a.Z)(e)?e:e?(0,o.EP)(e):null;this._getNodeKey=i,this._logger=l.Y.getInstance(),this._alignFunc=(0,a.Z)(this.options.setNodeLayer)?t=>this.options.setNodeLayer(t.datum):b[this.options.nodeAlign]}layout(t,e){if(!t)return null;let i="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};"vertical"===this.options.direction?this._viewBox={x0:i.y0,x1:i.y1,y0:i.x0,y1:i.x1,width:i.height,height:i.width}:this._viewBox=i;let r=this.computeNodeLinks(t),s=r.nodes,a=r.links;if(this._nodeMap=r.nodeMap,this.computeNodeValues(s),this.computeNodeDepths(s),["right","end","justify"].includes(this.options.nodeAlign)&&this.computeNodeEndDepths(s),this._maxDepth<=0)return null;let o=this.computeNodeBreadths(s);if(this.computeLinkBreadths(s),s.forEach(t=>{t.sourceLinks=t.sourceLinks.filter(t=>!(0,n.Z)(t.source)&&!(0,n.Z)(t.target)),t.targetLinks=t.targetLinks.filter(t=>!(0,n.Z)(t.source)&&!(0,n.Z)(t.target))}),a=a.filter(t=>!(0,n.Z)(t.source)&&!(0,n.Z)(t.target)),"vertical"===this.options.direction)if(this.options.inverse){let t=this._viewBox.x1;s.forEach(e=>{let{y0:i,y1:r,x0:n,x1:s}=e;e.y0=t-s,e.y1=t-n,e.x0=i,e.x1=r}),a.forEach(e=>{e.vertical=!0;let{x0:i,x1:r,y0:n,y1:s}=e;e.x0=n,e.x1=s,e.y0=t-i,e.y1=t-r})}else s.forEach(t=>{let{y0:e,y1:i}=t;t.y0=t.x0,t.y1=t.x1,t.x0=e,t.x1=i}),a.forEach(t=>{t.vertical=!0;let e=t.x0,i=t.x1;t.x0=t.y0,t.x1=t.y1,t.y0=e,t.y1=i});else this.options.inverse&&(s.forEach(t=>{let{x0:e,x1:r}=t;t.x0=i.x1-r,t.x1=i.x1-e}),a.forEach(t=>{t.x0=i.x1-t.x0,t.x1=i.x1-t.x1}));return a.forEach(t=>{let e=this._nodeMap[t.source],i=this._nodeMap[t.target];t.sourceRect={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},t.targetRect={x0:i.x0,x1:i.x1,y1:i.y1,y0:i.y0}}),{nodes:s,links:a,columns:o}}computeHierarchicNodeLinks(t){return function(t,e){let i=[],r=[],s={},a={},o=[];return function(t,e,i=[],r={},s){f(t);let a=(t,o,l)=>{t.forEach((t,h)=>{let u=e?e(t):l?`${l[l.length-1].key}-${h}`:`${o}-${h}`,c=(0,n.Z)(t.value)?0:(0,d.s)(t.value);if(r[u])r[u].value=void 0;else{let e={depth:o,datum:t,index:h,key:u,value:c,sourceLinks:[],targetLinks:[]};r[u]=e,i.push(e)}l&&s&&s.push({source:l[l.length-1].key,target:u,value:c,parents:l}),t.children&&t.children.length&&a(t.children,o+1,l?l.concat([r[u]]):[r[u]])})};a(t,0,null)}(t,e,i,s,o),o.forEach((t,e)=>{let i=`${t.source}-${t.target}`,n=(0,p.Z)(t,["parents"]);if(n.parents=t.parents.map(t=>(0,p.Z)(t,["sourceLinks","targetLinks"])),a[i])return a[i].value+=(0,d.s)(t.value),void a[i].datum.push(n);let o={index:e,key:`${t.source}-${t.target}`,source:t.source,target:t.target,datum:[n],value:t.value,parents:t.parents.map(t=>t.key)};r.push(o),s[t.source].sourceLinks.push(o),s[t.target].targetLinks.push(o),a[i]=o}),{nodes:i,links:r,nodeMap:s}}(t,this._getNodeKey)}computeSourceTargetNodeLinks(t){let e=[],i=[],s={};t.nodes&&t.nodes.forEach((t,i)=>{let r={depth:-1,datum:t,index:i,key:this._getNodeKey?this._getNodeKey(t):i,value:t.value,sourceLinks:[],targetLinks:[]};s[r.key]=r,e.push(r)});let a=[];return t.links.forEach((r,o)=>{let l=!(0,n.Z)(r.source),h=!(0,n.Z)(r.target);if(t.nodes&&(!s[r.source]||!s[r.target]))return;t.nodes||!l||s[r.source]||(s[r.source]={value:void 0,depth:-1,index:e.length,key:r.source,datum:null,sourceLinks:[],targetLinks:[]},e.push(s[r.source])),t.nodes||!h||s[r.target]||(s[r.target]={value:void 0,depth:-1,index:e.length,key:r.target,datum:null,sourceLinks:[],targetLinks:[]},e.push(s[r.target]));let u={index:o,source:r.source,target:r.target,datum:r,value:r.value};this.options.divideNodeValueToLink&&(0,n.Z)(r.value)&&a.push(u),i.push(u),l&&s[r.source].sourceLinks.push(u),h&&s[r.target].targetLinks.push(u)}),this.options.divideNodeValueToLink&&a.length&&a.forEach(t=>{let e=[v(s[t.source]),v(s[t.target],!0)].filter(t=>!(0,n.Z)(t));e.length&&(t.value=(0,r.iH)(e))}),{nodeMap:s,nodes:e,links:i}}computeNodeLinks(t){let e;"links"in t?e=this.computeSourceTargetNodeLinks(t):(this._isHierarchic=!0,e=this.computeHierarchicNodeLinks(t.nodes));let i=e.nodes,r=e.links;if(this.options.linkSortBy)for(let t=0,e=i.length;t<e;t++)i[t].sourceLinks.sort(this.options.linkSortBy),i[t].targetLinks.sort(this.options.linkSortBy);return this.options.dropIsolatedNode&&(i=i.filter(t=>t.targetLinks.length||t.sourceLinks.length)),{nodes:i,links:r,nodeMap:e.nodeMap}}computeNodeValues(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.value=Math.max((0,n.Z)(i.value)?0:(0,d.s)(i.value),i.sourceLinks.reduce((t,e)=>{var i;return t+(null!=(i=(0,d.s)(e.value))?i:0)},0),i.targetLinks.reduce((t,e)=>{var i;return t+(null!=(i=(0,d.s)(e.value))?i:0)},0))}}computeNodeDepths(t){var e;let i=t.length,r,n,s=t,o=0,l=-1,h=(0,a.Z)(this.options.setNodeLayer)?this.options.setNodeLayer:null;for(;s.length&&o<i;){r=[],n={};for(let t=0,i=s.length;t<i;t++){let i=s[t];if(i&&(i.depth=h&&null!=(e=h(i.datum))?e:o,h&&(l=Math.max(i.depth,l)),i.sourceLinks&&i.sourceLinks.length))for(let t=0,e=i.sourceLinks.length;t<e;t++){let e=i.sourceLinks[t];n[e.target]||(r.push(this._nodeMap[e.target]),n[e.target]=!0)}}s=r,o+=1}o>i&&this._logger.warn("Error: there is a circular link"),this._maxDepth=h?l+1:o}computeNodeEndDepths(t){let e=t.length,i,r,n=t,s=0;for(;n.length&&s<e;){i=[],r={};for(let t=0,e=n.length;t<e;t++){let e=n[t];if(e){e.endDepth=s;for(let t=0,n=e.targetLinks.length;t<n;t++){let n=e.targetLinks[t];r[n.source]||(i.push(this._nodeMap[n.source]),r[n.source]=!0)}}}n=i,s+=1}s>e&&this._logger.warn("Error: there is a circular link")}computeNodeLayers(t){let e=this.options.nodeWidth,i=this.options.linkWidth,r=this.options.minStepWidth,s=this._viewBox.width,o=null,l=null,d=!1;if((0,h.Z)(e)){let t=(0,u.Z)(parseFloat(e.replace("%",""))/100,0,1),i=s/(this._maxDepth-1+t);r>0&&(i=Math.max(r,i)),o=i*t,l=i*(1-t),d=!0}else if((0,c.Z)(e)){if(o=e,(0,c.Z)(i))l=i;else if((0,n.Z)(i)){let t=(s-e)/(this._maxDepth-1);r>0&&(t=Math.max(r,t)),l=t-e}d=!0}else(0,a.Z)(e)&&(0,c.Z)(i)&&(l=i);let p=[];for(let e=0,i=t.length;e<i;e++){let i=t[e];i.layer=this._isHierarchic?i.depth:(0,u.Z)(Math.floor(this._alignFunc(i,this._maxDepth,this._nodeMap)),0,this._maxDepth-1);let r=i.layer;r===this._maxDepth-1&&(i.isLastLayer=!0),d&&(i.x0=this._viewBox.x0+r*(o+l),i.x1=i.x0+o),p[r]?p[r].push(i):p[r]=[i]}if(this.options.nodeSortBy)for(let t=0,e=p.length;t<e;t++)p[t].sort(this.options.nodeSortBy);if(!d&&(0,a.Z)(e)){let t=this._viewBox.x0;for(let r=0;r<this._maxDepth;r++){let n=p[r],s=0,h=0;for(let r=0,u=n&&n.length;r<u;r++){let u=n[r],c=e(u);u.x0=t,u.x1=t+c,s=Math.max(o,c);let d=u.sourceLinks;for(let t=0,e=d.length;t<e;t++){let e=d[t];h=Math.max(h,(0,a.Z)(i)?i(e,this._viewBox):l)}}t+=s+h}}return p}initializeNodeBreadths(t){var e,i,r;let s=null!=(e=this.options.minLinkHeight)?e:0,o=null!=(i=this.options.minNodeHeight)?i:0,l=null!=(r=this.options.maxNodeHeight)?r:1/0,h=this.options.maxLinkHeight;((0,n.Z)(o)||o<s)&&(o=s),((0,n.Z)(h)||h>l)&&(h=l);let u=0,d=null,p=null;if((0,a.Z)(this.options.nodeGap))d=this.options.nodeGap,u=t.reduce((t,e)=>{let i=e.reduce((t,e)=>t+e.value,0),r=e.reduce((t,e)=>t+this.options.nodeGap(e),0);return Math.min(t,(this._viewBox.height-r)/i)},1/0);else{let e=t.reduce((t,e)=>Math.max(t,e.length),0),i=this._viewBox.height/e,r=Math.min(this.options.nodeGap,i);if(o+r>i&&(r=o>=i?i/2:(i-o)/2,o=Math.min(i-r,o)),d=()=>r,this._gapY=r,this.options.equalNodeHeight)p=this._viewBox.height/e-r;else{let e=o>0?Math.max(r,o):r;u=t.reduce((t,i)=>{let r=i.reduce((t,e)=>t+e.value,0);return Math.min(t,(this._viewBox.height-((i.length-1)*e+o))/r)},1/0)}}let f="start"===this.options.gapPosition,g=!f&&"end"!==this.options.gapPosition,m=(0,c.Z)(this.options.nodeHeight)?t=>this.options.nodeHeight:(0,a.Z)(this.options.nodeHeight)?this.options.nodeHeight:p>0?t=>p:t=>Math.max(t.value*u,0),y=(0,c.Z)(this.options.linkHeight)?()=>this.options.linkHeight:(0,a.Z)(this.options.linkHeight)?this.options.linkHeight:(t,e,i)=>Math.min(Math.max(e.value?i*x(t.value/e.value):0,s,0),h);for(let e=0,i=t.length;e<i;e++){let i=t[e];if(!i||!i.length)continue;let r=this._viewBox.y0,n=0,s=0,a=0;for(let t=0,e=i.length;t<e;t++){let e=i[t];n=d(e),f&&(r+=n),s=Math.min(Math.max(a=m(e),o),l),e.y0=r,e.y1=r+s,r=f?e.y1:e.y1+n;for(let t=0,i=e.sourceLinks.length;t<i;t++){let i=e.sourceLinks[t];i.thickness=y(i,e,a)}}let h=this._viewBox.y1-r+(g?n:0);if(h>0)if("start"===this.options.crossNodeAlign);else if("end"===this.options.crossNodeAlign)for(let t=0,e=i.length;t<e;++t){let e=i[t];e.y0+=h,e.y1+=h}else if("parent"===this.options.crossNodeAlign){let r=i.reduce((t,e)=>(e.targetLinks&&e.targetLinks.length&&e.targetLinks.forEach(e=>{t[e.source]=!0}),t),{});if(Object.keys(r).length&&t[e-1]&&t[e-1].length){let n=t[e-1].filter(t=>r[t.key]);if(n&&n.length&&n[0].y0!==i[0].y0){let t=n[0].y0-i[0].y0;for(let e=0,r=i.length;e<r;++e){let r=i[e];r.y0+=t,r.y1+=t}}}}else{h/=i.length+1;for(let t=0,e=i.length;t<e;++t){let e=i[t];e.y0+=h*(t+1),e.y1+=h*(t+1)}}else if(h<0&&i.length>1&&n+(h/=i.length-1)>=0){n+=h,this._gapY=Math.min(n);for(let t=1,e=i.length;t<e;++t){let e=i[t];e.y0+=h*t,e.y1+=h*t}}this.reorderLinks(i)}}computeNodeBreadths(t){let e=this.computeNodeLayers(t);this.initializeNodeBreadths(e);let i=this.options.iterations;if(!this._isHierarchic&&!(0,a.Z)(this.options.setNodeLayer)&&!(0,a.Z)(this.options.nodeGap))for(let t=0;t<i;++t){let r=Math.pow(.99,t),n=Math.max(1-r,(t+1)/i);this.relaxRightToLeft(e,r,n),this.relaxLeftToRight(e,r,n)}return e}relaxLeftToRight(t,e,i){for(let r=1,s=t.length;r<s;++r){let s=t[r];for(let t=0,i=s.length;t<i;t++){let i=s[t],r=0,n=0;for(let t=0,e=i.targetLinks.length;t<e;t++){let e=i.targetLinks[t],s=e.value*(i.layer-this._nodeMap[e.source].layer);r+=this.targetTop(this._nodeMap[e.source],i)*s,n+=s}if(!(n>0))continue;let a=(r/n-i.y0)*e;i.y0+=a,i.y1+=a,this.reorderNodeLinks(i)}(0,n.Z)(this.options.nodeSortBy)&&s.sort(y),this.resolveCollisions(s,i)}}relaxRightToLeft(t,e,i){for(let r=t.length-2;r>=0;--r){let n=t[r];for(let t=0,i=n.length;t<i;t++){let i=n[t],r=0,s=0;for(let t=0,e=i.sourceLinks.length;t<e;t++){let e=i.sourceLinks[t],n=e.value*(this._nodeMap[e.target].layer-i.layer);r+=this.sourceTop(i,this._nodeMap[e.target])*n,s+=n}if(!(s>0))continue;let a=(r/s-i.y0)*e;i.y0+=a,i.y1+=a,this.reorderNodeLinks(i)}void 0===this.options.nodeSortBy&&n.sort(y),this.resolveCollisions(n,i)}}resolveCollisions(t,e){let i=t.length>>1,r=t[i];this.resolveCollisionsBottomToTop(t,r.y0-this._gapY,i-1,e),this.resolveCollisionsTopToBottom(t,r.y1+this._gapY,i+1,e),this.resolveCollisionsBottomToTop(t,this._viewBox.y1,t.length-1,e),this.resolveCollisionsTopToBottom(t,this._viewBox.y0,0,e)}resolveCollisionsTopToBottom(t,e,i,r){for(;i<t.length;++i){let n=t[i],s=(e-n.y0)*r;s>1e-6&&(n.y0+=s,n.y1+=s),e=n.y1+this._gapY}}resolveCollisionsBottomToTop(t,e,i,r){for(;i>=0;--i){let n=t[i],s=(n.y1-e)*r;s>1e-6&&(n.y0-=s,n.y1-=s),e=n.y0-this._gapY}}targetTop(t,e){let i,r,n,s=t.y0-(t.sourceLinks.length-1)*this._gapY/2;for(i=0,r=t.sourceLinks.length;i<r&&(n=t.sourceLinks[i]).target!==e.key;i++)s+=n.thickness+this._gapY;for(i=0,r=e.targetLinks.length;i<r&&(n=e.targetLinks[i]).source!==t.key;i++)s-=n.thickness;return s}sourceTop(t,e){let i,r,n,s=e.y0-(e.targetLinks.length-1)*this._gapY/2;for(i=0,r=e.targetLinks.length;i<r&&(n=e.targetLinks[i]).source!==t.key;i++)s+=n.thickness+this._gapY;for(i=0,r=t.sourceLinks.length;i<r&&(n=t.sourceLinks[i]).target!==e.key;i++)s-=n.thickness;return s}computeLinkBreadthsNoOverlap(t){for(let e=0,i=t.length;e<i;e++){let i=t[e],r=i.y0,n=!1;for(let t=0,e=i.sourceLinks.length;t<e;t++){let e=i.sourceLinks[t];n||(e.y0=r+e.thickness/2),e.x0=i.x1,r+e.thickness>i.y1||n?(e.y0=i.y1-e.thickness/2,n=!0):r+=e.thickness}let s=i.y0;n=!1;for(let t=0,e=i.targetLinks.length;t<e;t++){let e=i.targetLinks[t];n||(e.y1=s+e.thickness/2),e.x1=i.x0,s+e.thickness>i.y1||n?(e.y1=i.y1-e.thickness/2,n=!0):s+=e.thickness}}}computeLinkBreadthsOverlap(t){let e=this.options.linkOverlap;for(let i=0,r=t.length;i<r;i++){let r=t[i],n="start"===e?r.y0:"end"===e?r.y1:(r.y0+r.y1)/2,s="start"===e?.5:"end"===e?-.5:0;for(let t=0,e=r.sourceLinks.length;t<e;t++){let e=r.sourceLinks[t];e.y0=n+s*e.thickness,e.x0=r.x1}for(let t=0,e=r.targetLinks.length;t<e;t++){let e=r.targetLinks[t];e.y1=n+s*e.thickness,e.x1=r.x0}}}computeLinkBreadths(t){this.options.linkOverlap?this.computeLinkBreadthsOverlap(t):this.computeLinkBreadthsNoOverlap(t)}reorderNodeLinks(t){if((0,n.Z)(this.options.linkSortBy)){let e=t.targetLinks,i=t.sourceLinks;for(let t=0,i=e.length;t<i;t++){let i=e[t];this._nodeMap[i.source].sourceLinks.sort(this._ascendingTargetBreadth)}for(let t=0,e=i.length;t<e;t++){let e=i[t];this._nodeMap[e.target].targetLinks.sort(this._ascendingSourceBreadth)}}}reorderLinks(t){if((0,n.Z)(this.options.linkSortBy))for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sourceLinks.sort(this._ascendingTargetBreadth),i.targetLinks.sort(this._ascendingSourceBreadth)}}}_.defaultOptions={iterations:6,nodeAlign:"justify",direction:"horizontal",nodeWidth:24,nodeGap:8,crossNodeAlign:"middle",dropIsolatedNode:!0}},31563:function(t,e,i){"use strict";i.d(e,{p:()=>m});var r=i(57153),n=i(93364),s=i(37651),a=i(58470);let o=(t,e=!1)=>e?"boolean"==typeof t:!0===t||!1===t||(0,a.Z)(t,"Boolean");var l=i(65709),h=i(70082),u=i(50890),c=i(83510);let d=(t,e)=>(0,u.Z)(t)?e:(0,c.Z)(t)?e*parseFloat(t)/100:t;var p=i(51873),f=i(86624);let g={x0:"startAngle",x1:"endAngle",y0:"innerRadius",y1:"outerRadius"};class m{constructor(t){this._layoutNode=t=>{if(t.maxDepth=this._maxDepth,t.children){let e=this._parsedInnerRadius[t.depth+1],i=this._parsedOutterRadius[t.depth+1];(0,r.Z)(t,t.startAngle,Math.min(e,i),t.endAngle,Math.max(e,i),g);let n=(0,s.Z)(this.options.label)?this.options.label[t.depth+1]:this.options.label;t.children.forEach(t=>{if(t.x=this._parsedCenter[0],t.y=this._parsedCenter[1],n)return this._layoutLabel(t,o(n)?{align:"center",rotate:"radial"}:n)})}},this.options=t?Object.assign({},m.defaultOpionts,t):Object.assign({},m.defaultOpionts);let e=this.options.nodeKey,i=(0,l.Z)(e)?e:e?(0,h.EP)(e):null;this._getNodeKey=i,this._maxDepth=-1}_parseRadius(t,e){let i=t.x0+d(this.options.center[0],t.width),r=t.y0+d(this.options.center[1],t.height),n=Math.min(t.width/2,t.height/2),a=this.options.innerRadius,o=this.options.outerRadius,l=(0,s.Z)(a),h=l?a.map(t=>d(t,n)):d(a,n),c=(0,s.Z)(o),f=this.options.gapRadius,g=c?o.map(t=>d(t,n)):d(o,n),m=(0,p.w)(0,e+1);if(l)this._parsedInnerRadius=m.map((t,e)=>{let i=h[e];return(0,u.Z)(i)?n:i}),this._parsedOutterRadius=m.map((t,i)=>{var r,a;return c?null!=(r=g[i])?r:n:i<e?this._parsedInnerRadius[i+1]-((0,s.Z)(f)?null!=(a=f[i])?a:0:f):g});else if(c)this._parsedOutterRadius=m.map((t,e)=>(0,u.Z)(g[e])?n:g[e]),this._parsedInnerRadius=m.map((t,e)=>{var i;return 0===e?h:this._parsedOutterRadius[e-1]-((0,s.Z)(f)?null!=(i=f[e])?i:0:f)});else{let t=d(a,n),i=(g-t)/(e+1);this._parsedInnerRadius=m.map((e,r)=>t+r*i),this._parsedOutterRadius=m.map((t,e)=>{var r;return this._parsedInnerRadius[e]+i-((0,s.Z)(f)?null!=(r=f[e])?r:0:f)})}this._parsedCenter=[i,r],this._maxRadius=n}layout(t,e){let i="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)};if(!t||!t.length)return[];let r=[],s=(0,n.Ch)(t,r,0,-1,null,this._getNodeKey);return this._parseRadius(i,s.maxDepth),this._maxDepth=s.maxDepth,this._layout(r,{flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:s.sum,datum:null,children:r,startAngle:this.options.startAngle,endAngle:this.options.endAngle}),r}_layout(t,e){this._layoutNode(e),t.forEach(t=>{var e;(null==(e=null==t?void 0:t.children)?void 0:e.length)?this._layout(t.children,t):this._layoutNode(t)})}_layoutLabel(t,e){var i;let r=(t.startAngle+t.endAngle)/2,n=("start"===e.align?t.innerRadius:"end"===e.align?t.outerRadius:(t.innerRadius+t.outerRadius)/2)+(null!=(i=e.offset)?i:0),s=(0,f.op)({x:this._parsedCenter[0],y:this._parsedCenter[1]},n,r);if(t.label={x:s.x,y:s.y,textBaseline:"middle"},"tangential"===e.rotate)t.label.angle=r-Math.PI/2,t.label.textAlign="center",t.label.maxLineWidth=Math.abs(t.endAngle-t.startAngle)*n;else{let i=r%(2*Math.PI),n=i<0?i+2*Math.PI:i;n>Math.PI/2&&n<1.5*Math.PI?(t.label.angle=n+Math.PI,t.label.textAlign="start"===e.align?"end":"end"===e.align?"start":"center"):(t.label.angle=n,t.label.textAlign=e.align),t.label.maxLineWidth=t.isLeaf?void 0:Math.abs(t.outerRadius-t.innerRadius)}}}m.defaultOpionts={startAngle:Math.PI/2,endAngle:-3*Math.PI/2,center:["50%","50%"],gapRadius:0,innerRadius:0,outerRadius:"70%"}},57153:function(t,e,i){"use strict";function r(t,e,i,n,s,a={x0:"x0",x1:"x1",y0:"y0",y1:"y1"}){let o=t.children,l,h=-1,u=o.length,c=t.value&&(n-e)/t.value;for(;++h<u;)(l=o[h])[a.y0]=i,l[a.y1]=s,l[a.x0]=e,l[a.x1]=e+=l.value*c}i.d(e,{Z:()=>r})},79478:function(t,e,i){"use strict";i.d(e,{j:()=>d});var r=i(57153);function n(t,e,i,r,n){let s=t.children,a,o=-1,l=s.length,h=t.value&&(n-i)/t.value;for(;++o<l;)(a=s[o]).x0=e,a.x1=r,a.y0=i,i+=a.value*h,a.y1=i}let s=t=>(e,i,s,a,o)=>{!function(t,e,i,s,a,o){let l=[],h=e.children,u,c,d=0,p=0,f=h.length,g,m,y,v,b,x,_,w,S,A=e.value;for(;d<f;){g=a-i,m=o-s;do y=h[p++].value;while(!y&&p<f);for(v=y,_=Math.max((b=y)/(S=y*y*(w=Math.max(m/g,g/m)/(A*t))),S/v);p<f;++p){if(y+=c=h[p].value,c<v&&(v=c),c>b&&(b=c),(x=Math.max(b/(S=y*y*w),S/v))>_){y-=c;break}_=x}u=Object.assign({},e,{value:y,children:h.slice(d,p)}),l.push(u),g<m?(0,r.Z)(u,i,s,a,A?s+=m*y/A:o):n(u,i,s,A?i+=g*y/A:a,o),A-=y,d=p}}(t,e,i,s,a,o)};var a=i(93364),o=i(37651),l=i(65709),h=i(70082),u=i(61369);let c={binary:function(t,e,i,r,n){let s=t.children,a=s.length,o=0,l=Array(a+1);l[0]=0;for(let t=0;t<a;++t)o+=s[t].value,l[t+1]=o;let h=(t,e,i,r,n,a,o)=>{if(t>=e-1){let e=s[t];return e.x0=r,e.y0=n,e.x1=a,void(e.y1=o)}let u=l[t],c=i/2+u,d=t+1,p=e-1;for(;d<p;){let t=d+p>>>1;l[t]<c?d=t+1:p=t}c-l[d-1]<l[d]-c&&t+1<d&&--d;let f=l[d]-u,g=i-f;if(a-r>o-n){let s=i?(r*g+a*f)/i:a;h(t,d,f,r,n,s,o),h(d,e,g,s,n,a,o)}else{let s=i?(n*g+o*f)/i:o;h(t,d,f,r,n,a,s),h(d,e,g,r,s,a,o)}};h(0,a,t.value,e,i,r,n)},dice:r.Z,slice:n,sliceDice:function(t,e,i,s,a){(t.depth%2==1?n:r.Z)(t,e,i,s,a)}};class d{constructor(t){var e;this._filterByArea=(t,e)=>{var i;let r=this._getMinAreaByDepth(t.depth);if(r>0&&t.value*e<r)return!1;if(null==(i=t.children)?void 0:i.length){let i=t.children.filter(t=>this._filterByArea(t,e));i.length?i.length!==t.children.length&&(t.children=i):(t.isLeaf=!0,t.children=null)}return!0},this._getMinAreaByDepth=t=>{var e;return t<0?0:null!=(e=(0,o.Z)(this.options.minVisibleArea)?this.options.minVisibleArea[t]:this.options.minVisibleArea)?e:0},this._getGapWidthByDepth=t=>{var e;return t<0?0:null!=(e=(0,o.Z)(this.options.gapWidth)?this.options.gapWidth[t]:this.options.gapWidth)?e:0},this._getPaddingByDepth=t=>{var e;return t<0?0:null!=(e=(0,o.Z)(this.options.padding)?this.options.padding[t]:this.options.padding)?e:0},this._getLabelPaddingByDepth=t=>{var e;return t<0?0:null!=(e=(0,o.Z)(this.options.labelPadding)?this.options.labelPadding[t]:this.options.labelPadding)?e:0},this._layoutNode=t=>{let e=this._getGapWidthByDepth(t.depth),i=t.x0,r=t.y0,n=t.x1,s=t.y1;if(t.maxDepth=this._maxDepth,e>0&&(i+=e/2,n-=e/2,r+=e/2,s-=e/2,i>n&&(n=i=(i+n)/2),r>s&&(s=r=(r+s)/2),t.x0=i,t.x1=n,t.y0=r,t.y1=s),t.children){let e=this._getLabelPaddingByDepth(t.depth),a=this._getPaddingByDepth(t.depth);a>0&&a<Math.min(n-i,s-r)/2&&(r+=a,s-=a,i+=a,n-=a),e>0&&("top"===this.options.labelPosition&&r+e<s?(t.labelRect={x0:i,y0:r,x1:n,y1:r+e},r+=e):"bottom"===this.options.labelPosition&&s-e>r?(t.labelRect={x0:i,y0:s-e,x1:n,y1:s},s-=e):"left"===this.options.labelPosition&&i+e<n?(t.labelRect={x0:i,y0:r,x1:i+e,y1:s},i+=e):"right"===this.options.labelPosition&&n-e>i&&(t.labelRect={x0:n-e,y0:r,x1:n,y1:s},n-=e));let o=this._getGapWidthByDepth(t.depth+1);o>0&&(i-=o/2,n+=o/2,r-=o/2,s+=o/2),this._splitNode(t,i,r,n,s)}},this.options=Object.assign({},d.defaultOpionts,t);let i=this.options.nodeKey,r=(0,l.Z)(i)?i:i?(0,h.EP)(i):null;this._getNodeKey=r,this._splitNode="squarify"===this.options.splitType?s(this.options.aspectRatio):null!=(e=c[this.options.splitType])?e:c.binary,this._maxDepth=-1}layout(t,e){var i;if(!t||!t.length)return[];let r="width"in e?{x0:0,x1:e.width,y0:0,y1:e.height,width:e.width,height:e.height}:{x0:Math.min(e.x0,e.x1),x1:Math.max(e.x0,e.x1),y0:Math.min(e.y0,e.y1),y1:Math.max(e.y0,e.y1),width:Math.abs(e.x1-e.x0),height:Math.abs(e.y1-e.y0)},n=[],s=(0,a.Ch)(t,n,0,-1,null,this._getNodeKey,this.options.valueField);if(this._maxDepth=s.maxDepth,s.sum<=0)return[];let o={flattenIndex:-1,maxDepth:-1,key:"-1",depth:-1,index:-1,value:s.sum,datum:null,x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,children:n},l=r.width*r.height/s.sum;return this._filterByArea(o,l),this._layout(o),null!=(i=o.children)?i:[]}_filterChildren(t){let e=this.options.maxDepth;if((0,u.Z)(e)&&e>=0&&t.depth>=e)return!1;let i=this.options.minChildrenVisibleArea;if((0,u.Z)(i)&&Math.abs((t.x1-t.x0)*(t.y1-t.y0))<i)return!1;let r=this.options.minChildrenVisibleSize;return!(0,u.Z)(r)||!(Math.abs(t.x1-t.x0)<r||Math.abs(t.y1-t.y0)<r)}_layout(t){var e;this._filterChildren(t)||(t.children=null,t.isLeaf=!0),this._layoutNode(t),(null==(e=t.children)?void 0:e.length)&&t.children.forEach(t=>{var e;(null==(e=null==t?void 0:t.children)?void 0:e.length)?this._layout(t):this._layoutNode(t)})}}d.defaultOpionts={aspectRatio:(1+Math.sqrt(5))/2,gapWidth:0,labelPadding:0,labelPosition:"top",splitType:"binary",minVisibleArea:10}},93364:function(t,e,i){"use strict";i.d(e,{Ch:()=>s,R$:()=>a,Ye:()=>o,bp:()=>l});var r=i(50890),n=i(51318);let s=(t,e,i=0,a=-1,o,l,h="value")=>{let u=0,c=null!=a?a:-1,d=i;return t.forEach((t,a)=>{var p,f;let g={flattenIndex:++c,key:l?l(t):`${null!=(p=null==o?void 0:o.key)?p:""}-${a}`,maxDepth:-1,depth:i,index:a,value:t[h],isLeaf:!0,datum:o?o.datum.concat(t):[t],parentKey:null==o?void 0:o.key};if(null==(f=t.children)?void 0:f.length){g.children=[],g.isLeaf=!1;let e=s(t.children,g.children,i+1,c,g,l,h);g.value=(0,r.Z)(t[h])?e.sum:Math.max(e.sum,(0,n.s)(t[h])),c=e.flattenIndex,d=Math.max(e.maxDepth,d)}else g.isLeaf=!0,g.value=(0,n.s)(t[h]);u+=Math.abs(g.value),e.push(g)}),{sum:u,maxDepth:d,flattenIndex:c}},a=(t,e,i,r)=>{let n=r;return t.forEach((t,r)=>{var s;n=e(t,r,i,n),(null==(s=t.children)?void 0:s.length)&&(n=a(t.children,e,t,n))}),r},o=(t,e,i,r)=>{let n=r;return t.forEach((t,r)=>{var s;(null==(s=t.children)?void 0:s.length)&&(n=o(t.children,e,t,n)),n=e(t,r,i,n)}),n},l=(t,e=[],i)=>{let r=(null==i?void 0:i.maxDepth)>=0;return t.forEach(t=>{(!r||t.depth<=i.maxDepth)&&(e.push((null==i?void 0:i.callback)?i.callback(t):t),t.children&&(r&&t.depth===i.maxDepth?(t.children=null,t.isLeaf=!0):l(t.children,e,i)))}),e}},58403:function(t,e,i){"use strict";i.d(e,{Qn:()=>y,Sl:()=>g,_y:()=>u,at:()=>o,dm:()=>d,ee:()=>c,q7:()=>p,rp:()=>l,tc:()=>m});var r=i(42504),n=i(19600),s=i(14688),a=i(86624);let o=(t,e,i)=>{let{threshold:r,invert:s=!1}=null!=e?e:{};if(!t||"#fff"===t)return(t,e,i)=>{let a=t.width;if(0===t.data[e*a*4+4*i+3])return!s;let o=t.data[e*a*4+4*i+0],l=t.data[e*a*4+4*i+1],h=t.data[e*a*4+4*i+2];if(255===o&&255===l&&255===h)return!s;if((0,n.Z)(r)){let t=.3*o+.59*l+.11*h;return s?t<=r:t>=r}return!1};let a=i({width:1,height:1}).getContext("2d",{willReadFrequently:!0});a.fillStyle=t,a.fillRect(0,0,1,1);let o=a.getImageData(0,0,1,1).data;return(t,e,i)=>{let r=t.width;return[0,1,2,3].every(n=>s?t.data[4*(e*r+i)+n]!==o[n]:t.data[4*(e*r+i)+n]===o[n])}},l=(t,e,i,r,n=!1,s)=>{let{backgroundColor:a="#fff"}=t,{fill:o="#000"}=t;n&&([a,o]=[o,a]);let l=r||s({width:e,height:i,dpr:1}),u=l.getContext("2d",{willReadFrequently:!0});if(r){let t=r.width,n=r.height;u.clearRect(0,0,t,n),r.style.width=`${e}px`,r.style.height=`${i}px`,r.width=e,r.height=i}return u.fillStyle=a,u.fillRect(0,0,l.width,l.height),"text"===t.type?h(t,o,l.width,l.height,u):"geometric"===t.type&&f(t,o,l.width,l.height,u),l},h=(t,e,i,r,n)=>{let{fontFamily:a="sans-serif",fontWeight:o="normal",fontStyle:l="normal",fontVariant:h="normal",text:u,hollow:c}=t,d=12;n.font=`${l} ${h} ${o} ${d}px ${a}`,n.textAlign="center",n.textBaseline="middle",n.fillStyle=e;let p=n.measureText(u),f="normal"!==l?1.1:1,g=(0,s.Z)(p.actualBoundingBoxRight)&&(0,s.Z)(p.actualBoundingBoxLeft)?Math.ceil(f*(Math.abs(p.actualBoundingBoxRight)+Math.abs(p.actualBoundingBoxLeft))):0,m=Math.max(Math.ceil(p.width),g,d);if(c&&(n.globalCompositeOperation="xor"),m>i){let t=Math.min(i/m,r/d);n.fillText(u,i/2,r/2),n.scale(t,t)}else d=Math.min(d=Math.floor(d*i/m),r),n.font=`${l} ${h} ${o} ${d}px ${a}`,n.fillText(u,Math.floor(i/2),Math.floor(r/2))},u=(t,e,i=0,r)=>{let n=2*Math.PI/r;return Array(r).fill(0).map((r,s)=>(0,a.op)(t,e,i+s*n))},c=(t,e,i=0,n)=>{let s=2*Math.PI/n,o=(0,r.jc)("cardioid");return Array(n).fill(0).map((r,n)=>{let l=i+n*s,h=e*o(l);return(0,a.op)(t,h,l)})},d=(t,e)=>{t.beginPath(),e.forEach((e,i)=>{0===i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)}),t.closePath(),t.fill()},p=(t,e)=>{let i;t.beginPath(),e.forEach((e,r)=>{0===r?t.moveTo(e.x,e.y):t.bezierCurveTo(e.x,e.y,i.x,i.y,e.x,e.y),i=e}),t.closePath(),t.fill()},f=(t,e,i,n,s)=>{let{hollow:a}=t,{center:o,maxRadius:l}=(0,r.nf)(t.shape,[i,n]);s.fillStyle=e,a&&(s.globalCompositeOperation="xor");let h=o[0],f=o[1];if("cardioid"===t.shape)p(s,c({x:h,y:f},l,0,100));else if("circle"===t.shape)s.beginPath(),s.arc(h,f,l,0,2*Math.PI,!0),s.fill();else if("diamond"===t.shape)d(s,u({x:h,y:f},l,-Math.PI/2,4));else if("square"===t.shape)d(s,u({x:h,y:f},l,-Math.PI/4,4));else if("pentagon"===t.shape)d(s,u({x:h,y:f},l,Math.PI/2,5));else if("triangle"===t.shape||"triangleUpright"===t.shape)d(s,u({x:h,y:f},l,-Math.PI/2,3));else if("triangleForward"===t.shape)d(s,u({x:h,y:f},l,0,3));else if("star"===t.shape){let t=u({x:h,y:f},l,-Math.PI/2,5),e=u({x:h,y:f},l/(2*Math.cos(Math.PI/5)),-Math.PI/2+Math.PI/5,5),i=[];for(let r=0;r<5;r++)i.push(t[r]),i.push(e[r]);d(s,i)}else s.fillRect(0,0,i,n)};function g(t){let{size:e,maskCanvas:i}=t,r=i.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,i.width,i.height),n=Array(e[0]*e[1]).fill(0),s=1,a=[[0,1],[1,0],[-1,0],[0,-1]],o=[];for(let i=0;i<e[1];i++)for(let l=0;l<e[0];l++)if(0===n[i*e[0]+l]&&!t.isEmptyPixel(r,i,l)){n[i*e[0]+l]=s,o.push([i,l]);for(let i=0;i<o.length;i++)for(let l=0;l<4;l++){let h=o[i][0]+a[l][0],u=o[i][1]+a[l][1];h=h<0?0:h>=e[1]?e[1]-1:h,u=u<0?0:u>=e[0]?e[0]-1:u,0!==n[h*e[0]+u]||t.isEmptyPixel(r,h,u)||(n[h*e[0]+u]=s,o.push([h,u]))}s++,o=[]}let l={},h={},u={},c={},d={},p={},f={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0,width:0,height:0},g=[];for(let t=0;t<e[1];t++)for(let i=0;i<e[0];i++){let r=n[t*e[0]+i];0!==r&&(function(t,i){let r=[[0,1],[1,0],[-1,0],[0,-1]];if(0===t||0===i||t===e[1]-1||i===e[0]-1)return!0;for(let s=0;s<4;s++){let a=t+r[s][0],o=i+r[s][1];if(a=a<0?0:a>=e[1]?e[1]-1:a,o=o<0?0:o>=e[0]?e[0]-1:o,0===n[a*e[0]+o])return!0}return!1}(t,i)&&(g.push([t,i]),l[r]=l[r]||[],l[r].push([i,t]),c[r]||(c[r]=[1/0,-1/0,1/0,-1/0]),t<c[r][0]&&(c[r][0]=t),t>c[r][1]&&(c[r][1]=t),i<c[r][2]&&(c[r][2]=i),i>c[r][3]&&(c[r][3]=i),i<f.x1&&(f.x1=i),i>f.x2&&(f.x2=i),t<f.y1&&(f.y1=t),t>f.y2&&(f.y2=t)),h[r]=(h[r]||0)+1)}let m=[];for(let t in l){let e=l[t],i=~~(e.reduce((t,e)=>t+e[0],0)/e.length),r=~~(e.reduce((t,e)=>t+e[1],0)/e.length);u[t]=[i,r],m.push(...e);let[n,s,a,o]=c[t];d[t]=~~Math.max(Math.sqrt((i-a)**2+(r-n)**2),Math.sqrt((i-o)**2+(r-s)**2),Math.sqrt((i-a)**2+(r-s)**2),Math.sqrt((i-o)**2+(r-n)**2)),p[t]=(o-a)/(s-n)}let y=Object.keys(u).map(t=>({label:t-1,boundary:l[t],area:h[t],center:u[t],maxPoint:c[t],maxR:d[t],ratio:p[t]}));f.width=f.x2-f.x1+1,f.height=f.y2-f.y1+1;let v=~~(m.reduce((t,e)=>t+e[0],0)/m.length),b=~~(m.reduce((t,e)=>t+e[1],0)/m.length),x=~~Math.max(Math.sqrt((v-f.x1)**2+(b-f.y1)**2),Math.sqrt((v-f.x2)**2+(b-f.y2)**2),Math.sqrt((v-f.x1)**2+(b-f.y2)**2),Math.sqrt((v-f.x2)**2+(b-f.y1)**2)),_=f.width/f.height,w=Object.keys(h).reduce((t,e)=>t+h[e],0),S={regions:y,labels:n,labelNumber:s-1};if(t.blur){let i=t.blur,r=function(t,e,i,r){let n=Math.ceil(r/2),s=function(t,e){let i=Array(2*t+1).fill(0),r=0;for(let n=-t;n<=t;n++){let s=Math.exp(-n*n/(2*e*e));i[n+t]=s,r+=s}for(let t=0;t<i.length;t++)i[t]/=r;return i}(n,r/3),a=Array(t.length).fill(0),o=Array(t.length).fill(0);for(let r=0;r<i;r++)for(let i=0;i<e;i++){let o=0;for(let a=-n;a<=n;a++)o+=t[r*e+Math.min(Math.max(i+a,0),e-1)]*s[a+n];a[r*e+i]=o}for(let t=0;t<e;t++)for(let r=0;r<i;r++){let l=0;for(let o=-n;o<=n;o++)l+=a[Math.min(Math.max(r+o,0),i-1)*e+t]*s[o+n];o[r*e+t]=Math.max(0,Math.min(1,l))}return o}(n,e[0],e[1],i);(function(t,e,i,r,n=1){let s=Array(t.length).fill(0);for(let[t,a]of e)if(s[t*i+a]=1,n>1){for(let e=1-n;e<=n-1;e++)for(let o=1-n;o<=n-1;o++)if(Math.sqrt(e*e+o*o)<n){let n=t+e,l=a+o;n>=0&&n<r&&l>=0&&l<i&&(s[n*i+l]=1)}}return s})(n,g,e[0],e[1],Math.ceil(i/2)).forEach((t,e)=>{1===t&&(n[e]=r[e])})}return Object.assign(t,{segmentation:S,shapeBounds:f,shapeMaxR:x,shapeRatio:_,shapeCenter:[v,b],shapeArea:w})}function m(t,e,i){e.width=t.width,e.height=t.height;let r=e.getContext("2d",{willReadFrequently:!0});r.clearRect(0,0,e.width,e.height),r.drawImage(t,0,0);let n=e.width,s=r.getImageData(0,0,e.width,e.height),a=0,o=s.height,l=0,h=s.width,u=(t,e)=>{for(let r=0;r<t;++r)if(!i(s,e,r))return!1;return!0},c=(t,e,r)=>{for(let n=e;n<r;++n)if(!i(s,n,t))return!1;return!0};for(;a<o&&u(n,a);)++a;for(;o-1>a&&u(n,o-1);)--o;for(;l<h&&c(l,a,o);)++l;for(;h-1>l&&c(h-1,a,o);)--h;let d=r.getImageData(l,a,h-l,o-a);return e.width=d.width,e.height=d.height,r.clearRect(0,0,e.width,e.height),r.putImageData(d,0,0),e}function y(t,e){let i=t.width,r=t.height,n=e[0]/i;r*n>e[1]&&(n=e[1]/r);let s=Math.floor(n*i),a=Math.floor(n*r);return{x:(e[0]-s)/2,y:(e[1]-a)/2,width:s,height:a,scale:n}}},47811:function(t,e,i){"use strict";i.d(e,{p:()=>s,l:()=>a});let r=t=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(t),n=t=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(t);function s(t,e){return t&&(r(t)||n(t)||t.startsWith("<svg"))?new Promise((i,r)=>{var n;let s=e({image:t}),a=null==(n=s.resources)?void 0:n.get(t);a&&"success"===a.state&&a.data?i(a.data):(s.successCallback=()=>{var e;if(s){let n=null==(e=s.resources)?void 0:e.get(t);n&&"success"===n.state&&n.data?i(n.data):r(Error("image load failed: "+t))}else r(Error("image load failed: "+t))},s.failCallback=()=>{r(Error("image load failed: "+t))})}):null}function a(t,e){return Promise.allSettled(t.map(t=>s(t,e)))}},42504:function(t,e,i){"use strict";i.d(e,{JZ:()=>r,jc:()=>a,nf:()=>s});let r={triangleForward:function(){return function(t){let e=t%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))}},triangleUpright:n,triangle:n,diamond:function(){return function(t){let e=t%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e))}},square:function(){return function(t){return Math.min(1/Math.abs(Math.cos(t)),1/Math.abs(Math.sin(t)))}},star:function(){return function(t){let e=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-e)+3.07768*Math.sin(2*Math.PI/10-e)):1/(Math.cos(e)+3.07768*Math.sin(e))}},cardioid:function(){return function(t){return 1+Math.sin(t)}},circle:function(){return function(){return 1}},pentagon:function(){return function(t){let e=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(e)+.726543*Math.sin(e))}}};function n(){return function(t){let e=(t+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))}}function s(t,e){let i=e[0],r=e[1],n=1,s=[e[0]>>1,e[1]>>1];switch(t){case"cardioid":s[1]=~~(r/2.7*.4),n=Math.floor(Math.min(i/2.3,r/2.6));break;case"triangleForward":n=r/Math.sqrt(.75)>i?Math.floor(i/2):Math.floor(r/(2*Math.sqrt(.75)));break;case"triangle":case"triangleUpright":s[1]=~~(r/1.5),n=Math.floor(Math.min(r/1.5,i/2));break;case"circle":case"diamond":case"square":case"star":case"pentagon":n=Math.floor(Math.min(i/2,r/2));break;default:n=Math.floor(Math.max(i/2,r/2))}return{maxRadius:n,center:s}}let a=t=>r[t]?r[t]():r.circle()},1058:function(t,e,i){"use strict";i.d(e,{$:()=>r});let r={archimedean:function(t){let e=t[0]/t[1];return t=>[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]},rectangular:function(t){let e=4*t[0]/t[1],i=0,r=0;return t=>{let n=t<0?-1:1;switch(Math.sqrt(1+4*n*t)-n&3){case 0:i+=e;break;case 1:r+=4;break;case 2:i-=e;break;default:r-=4}return[i,r]}}}},56674:function(t,e,i){"use strict";i.d(e,{Hr:()=>n,P0:()=>a,Yq:()=>h,cC:()=>l});var r,n,s=i(50890);(r=n||(n={})).BEFORE_WORDCLOUD_SHAPE_LAYOUT="beforeWordcloudShapeLayout",r.AFTER_WORDCLOUD_SHAPE_LAYOUT="afterWordcloudShapeLayout",r.AFTER_WORDCLOUD_SHAPE_DRAW="afterWordcloudShapeDraw";let a=(t,e)=>{if(1===e.length&&"#537EF5"===e[0])return!0;if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},o=t=>/^[\u4e00-\u9fa5]+$/.test(t),l=(t,e)=>{if((0,s.Z)(t))return 0;let i=0;for(let e of t)o(e)?i+=1:i+=.53;return i};function h(t){return"function"==typeof t?t:function(){return t}}},66974:function(t,e,i){"use strict";i.d(e,{v:()=>P});var r=i(50890),n=i(37258),s=i(56674);function a(t,e,i){let{stepFactor:r,importantWordCount:n,globalShinkLimit:s}=e,{size:a,segmentation:{regions:l},tempCanvas:h,boardSize:d,shapeCenter:p,shapeMaxR:f,shapeRatio:g}=i,m=h.getContext("2d",{willReadFrequently:!0}),y=c(i),v=y.slice(0),b=e.fontSizeShrinkFactor,x=null,_=1,w=1,S=0;t.length>n&&(S=t.sort((t,e)=>e.weight-t.weight)[n].weight);for(let e=0;e<l.length;e++){let{words:i,center:n,maxR:c,ratio:p}=l[e],f=!1;for(let e=0;e<i.length;e++){u(h,m,t,e);let l=i[e];if(l.x=n[0],l.y=n[1],!l.skip&&l.hasText&&l.sprite&&o(v,l,c,p,a,d,r))l.hasPlaced=!0;else{if(!l.skip&&l.weight>S&&w>s){let e=l.datum[Symbol.for("vGrammar_id")];e!==x&&(x=e,_=w),w*=b,t.forEach(t=>{t.hasText=!1,t.sprite=null,t.fontSize=t.fontSize*b}),v=y.slice(0),f=!0;break}if(!l.skip&&l.datum[Symbol.for("vGrammar_id")]===x){t.forEach(t=>{t.hasText=!1,t.sprite=null,t.fontSize=t.fontSize/w}),l.skip=!0,w=_,x=null,v=y.slice(0),f=!0;break}}}f&&(e=-1)}for(let i=0;i<e.textLayoutTimes;i++){let i=t.filter(t=>(t.hasPlaced||(t.hasText=!1,t.sprite=null,t.fontSize=Math.max(~~(t.fontSize*e.fontSizeShrinkFactor),e.minFontSize)),!t.hasPlaced));if(0===i.length)break;for(let t=0;t<i.length;t++){let e=i[t];u(h,m,i,t),e.x=p[0],e.y=p[1],e.hasText&&o(v,e,f,g,a,d,r)&&(e.hasPlaced=!0)}}e.board=v}function o(t,e,i,r,n,s,a){var o;let u=e.x,c=e.y,d=(o=r,function(t){return[o*(t*=.1)*Math.cos(t),t*Math.sin(t)]}),p=+a,f,g,m,y=-p;for(;f=d(y+=p);){let{wordSize:r,bounds:{dTop:a,dBottom:o,dLeft:d,dRight:p}}=e;if(Math.min(Math.abs(g=f[0]),Math.abs(m=f[1]))>=i)break;if(e.x=~~(u+g),e.y=~~(c+m),!(e.x-d<0||e.x+p>n[0]||e.y-a<0||e.y+o>n[1]||h(e,t,s)))return l(e,t,s),!0}return!1}function l(t,e,i){let{wordSize:r}=t,n=t.sprite,s=r[0]>>5,a=i[0]>>5,o=t.x-(s<<4),l=o%32,h=32-l,u=r[1],c,d=(t.y-(r[1]>>1))*a+(o>>5);if(0===l)for(let t=0;t<u;t++){for(let i=0;i<s;i++)e[d+i]|=n[t*s+i];d+=a}else for(let t=0;t<u;t++){c=0;for(let i=0;i<=s;i++)e[d+i]|=c<<h|(i<s?(c=n[t*s+i])>>>l:0);d+=a}}function h(t,e,i){let{sprite:r,wordSize:n}=t,s=i[0]>>5,a=n[0]>>5,o=t.x-(a<<4),l=o%32,h=32-l,u=n[1],c,d=(t.y-(n[1]>>1))*s+(o>>5);if(0===l)for(let t=0;t<u;t++){for(let i=0;i<a;i++)if(e[d+i]&r[t*a+i])return!0;d+=s}else for(let t=0;t<u;t++){c=0;for(let i=0;i<=a;i++)if((c<<h|(i<a?(c=r[t*a+i])>>>l:0))&e[d+i])return!0;d+=s}return!1}function u(t,e,i,r){let n,s;if(i[r].sprite||0===i[r].fontSize)return;let a=Math.PI/180,o=i.length;t.width=2048,t.height=2048,e.clearRect(0,0,2048,2048),e.textAlign="center";let l,h,u=0,c=0,d=0,p=0,f=r;for(--r;++r<o;){let t=i[r],n=Math.max(t.fontSize,2);if(e.save(),e.font=t.fontStyle+" "+t.fontWeight+" "+n+"px "+t.fontFamily,l=e.measureText(t.text+"m").width+2*t.padding,h=2*n+2*t.padding,0!==t.rotate){let e=Math.sin(t.rotate*a),i=Math.cos(t.rotate*a),r=l*i,n=l*e,s=h*i,o=h*e;l=Math.max(Math.abs(r+o),Math.abs(r-o)),h=~~Math.max(Math.abs(n+s),Math.abs(n-s))}if(l=l+31>>5<<5,(h=Math.ceil(h))>d&&(d=h),u+l>=2048&&(u=0,c+=d,d=h),c+h>=2048){if(0===c){t.hasText=!1;continue}break}c+h>=p&&(p=c+h),e.translate(u+(l>>1),c+(h>>1)),0!==t.rotate&&e.rotate(t.rotate*a),e.fillText(t.text,0,0),t.padding&&(e.lineWidth=2*t.padding,e.strokeText(t.text,0,0)),e.restore(),t.LT=[u,c],t.wordSize=[l,h],t.hasText=!0,u+=l}if(0===p)return;let g=e.getImageData(0,0,2048,p).data;for(;--r>=f;){let t=i[r];if(!t.hasText){t.bounds={dTop:1/0,dBottom:-1/0,dLeft:1/0,dRight:-1/0};break}let{LT:e=[0,0],wordSize:a}=t;[u,c]=e;let o=a[0]>>5,l=Array(o*a[1]).fill(0),[h,d,p,f]=[1/0,-1/0,1/0,-1/0];for(s=0;s<a[1];s++){let t;for(n=0;n<a[0];n++)if(g[4*((c+s)*2048+(u+n))+3]>0){let e=1<<31-n%32;l[o*s+(n>>5)]|=e,n<p&&(p=n),n>f&&(f=n),t|=e}t&&(s<h&&(h=s),s>d&&(d=s))}t.bounds={dTop:(a[1]>>1)-h,dBottom:d-(a[1]>>1),dLeft:(a[0]>>1)-p,dRight:f-(a[0]>>1)},t.sprite=l,delete t.LT}}function c(t){let{segmentation:{labels:e},boardSize:i,size:r}=t,n=i[0]>>5,s=Array(n*r[1]).fill(0);for(let t=0;t<r[1];t++)for(let i=0;i<r[0];i++)if(0===e[t*r[0]+i]){let e=1<<31-i%32;s[n*t+(i>>5)]|=e}if(i[0]>r[0]){let t=(1<<i[0]-r[0])-1;for(let e=0;e<r[1];e++)s[n*e+n-1]|=t}return s}var d=i(58403),p=i(47811),f=i(89079),g=i(83510),m=i(70082),y=i(9706),v=i(86624),b=i(65709),x=i(73554),_=i(42183),w=i(82162),S=i(14688);let A=Symbol("implicit");class C extends w.s{specified(t){var e;return t?(this._specified=Object.assign(null!=(e=this._specified)?e:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}constructor(){super(),this.type=_._f.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=A}clone(){let t=(new C).domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&t.specified(this._specified),t}calculateVisibleDomain(t){return(0,S.Z)(this._rangeFactorStart)&&(0,S.Z)(this._rangeFactorEnd)&&2===t.length?[this.invert(t[0]),this.invert(t[1])]:this._domain}scale(t){let e=`${t}`,i=this._getSpecifiedValue(e);if(void 0!==i)return i;let r=this._index.get(e);if(!r){if(this._unknown!==A)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}let n=this._ordinalRange[(r-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(n):n}invert(t){let e=0;for(;e<this._ordinalRange.length&&this._ordinalRange[e]!==t;)e++;return this._domain[(e-1)%this._domain.length]}domain(t){if(!t)return this._domain.slice();for(let e of(this._domain=[],this._index=new Map,t)){let t=`${e}`;this._index.has(t)||this._index.set(t,this._domain.push(e))}return this}range(t){if(!t)return this._ordinalRange.slice();let e=Array.from(t);return this._ordinalRange=e,this}index(t){var e;return this._index&&null!=(e=this._index.get(`${t}`))?e:-1}}var D=i(13959),T=i(40499);let B={x:"x",y:"y",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle",opacity:"opacity",visible:"visible",isFillingWord:"isFillingWord",color:"color"};class M{constructor(t){this.progressiveResult=[],this.options=t}layout(t){this.data=t;let e=this.options,i={shapeUrl:e.shape,size:e.size,ratio:e.ratio||.8,tempCanvas:void 0,boardSize:[0,0],random:!1,randomGenerator:void 0},r=this.options.createCanvas({width:e.size[0],height:e.size[1]}),n=r.getContext("2d",{willReadFrequently:!0});if(n.textAlign="center",n.textBaseline="middle",i.tempCanvas=r,i.boardSize=[e.size[0]+31>>5<<5,e.size[1]],i.random?i.randomGenerator=Math.random:i.randomGenerator=(0,f.s6)(),this.segmentationInput=i,(0,g.Z)(i.shapeUrl)){i.isEmptyPixel=(0,d.at)(void 0,void 0,this.options.createCanvas);let t=(0,p.p)(i.shapeUrl,this.options.createImage);t?(this.isImageFinished=!1,this.isLayoutFinished=!1,t.then(t=>{this.isImageFinished=!0;let r=this.options.createCanvas({width:e.size[0],height:e.size[1],dpr:1});i.maskCanvas=r;let n=r.getContext("2d");e.removeWhiteBorder&&(0,d.tc)(t,r,i.isEmptyPixel);let s=(0,d.Qn)(t,e.size);n.clearRect(0,0,e.size[0],e.size[1]),n.drawImage(t,s.x,s.y,s.width,s.height),this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(i.maskCanvas)}).catch(t=>{this.isImageFinished=!0})):(this.isImageFinished=!0,this.isLayoutFinished=!0)}else if(i.shapeUrl&&("text"===i.shapeUrl.type||"geometric"===i.shapeUrl.type)){i.isEmptyPixel=(0,d.at)(i.shapeUrl.backgroundColor,void 0,this.options.createCanvas);let t=(0,d.rp)(i.shapeUrl,e.size[0],e.size[1],void 0,!1,this.options.createCanvas);i.maskCanvas=t,this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(t),this.doLayout(),this.isImageFinished=!0,this.isLayoutFinished=!0}}canAnimate(){return!0}unfinished(){return!this.isLayoutFinished}output(){return this.progressiveResult}progressiveRun(){this.isImageFinished&&!this.isLayoutFinished&&(this.segmentationInput.maskCanvas&&this.doLayout(),this.isLayoutFinished=!0)}progressiveOutput(){return this.progressiveResult}doLayout(){var t,e,i,r,n,p,f,g,b,x,_,w,S,A,C,D,T,M,F,R,P;let O,L,I=this.segmentationInput,z=(0,d.Sl)(I);if(!z.segmentation.regions.length)return;let Z=this.options,j=this.data,W=Z.colorMode||"ordinal",U={getText:(0,m.RF)(Z.text),getFontSize:(0,m.RF)(Z.fontSize),fontSizeRange:Z.fontSizeRange,colorMode:W,getColor:Z.colorField?(0,m.RF)(Z.colorField):(0,m.RF)(Z.text),getFillingColor:(0,m.RF)(Z.fillingColorField),colorList:Z.colorList||("ordinal"===W?["#2E62F1"]:["#537EF5","#2E62F1","#2358D8","#184FBF","#0C45A6","#013B8E"]),getColorHex:(0,m.RF)(Z.colorHexField),getFontFamily:(0,m.RF)(Z.fontFamily||"sans-serif"),rotateList:Z.rotateList||[0],getPadding:(0,m.RF)(Z.padding||1),getFontStyle:(0,m.RF)(Z.fontStyle||"normal"),getFontWeight:(0,m.RF)(Z.fontWeight||"normal"),getFontOpacity:Z.fontOpacity?(0,m.RF)(Z.fontOpacity):()=>1};k(j,U,z);let N={size:Z.size,ratio:Z.ratio||.8,shapeUrl:Z.shape,random:void 0===Z.random||Z.random,textLayoutTimes:null!=(t=Z.textLayoutTimes)?t:3,removeWhiteBorder:Z.removeWhiteBorder,layoutMode:null!=(e=Z.layoutMode)?e:"default",fontSizeShrinkFactor:null!=(i=Z.fontSizeShrinkFactor)?i:.8,stepFactor:null!=(r=Z.stepFactor)?r:1,importantWordCount:null!=(n=Z.importantWordCount)?n:10,globalShinkLimit:Z.globalShinkLimit||.2,fontSizeEnlargeFactor:null!=(p=Z.fontSizeEnlargeFactor)?p:1.5,fillingRatio:null!=(f=Z.fillingRatio)?f:.7,fillingTimes:null!=(g=Z.fillingTimes)?g:4,fillingXStep:Z.fillingXRatioStep?Math.max(Math.floor(Z.size[0]*Z.fillingXRatioStep),1):null!=(b=Z.fillingXStep)?b:4,fillingYStep:Z.fillingYRatioStep?Math.max(Math.floor(Z.size[1]*Z.fillingYRatioStep),1):null!=(x=Z.fillingYStep)?x:4,fillingInitialFontSize:Z.fillingInitialFontSize,fillingDeltaFontSize:Z.fillingDeltaFontSize,fillingInitialOpacity:null!=(_=Z.fillingInitialOpacity)?_:.8,fillingDeltaOpacity:null!=(w=Z.fillingDeltaOpacity)?w:.05,getFillingFontFamily:(0,m.RF)(Z.fillingFontFamily||"sans-serif"),getFillingFontStyle:(0,m.RF)(Z.fillingFontStyle||"normal"),getFillingFontWeight:(0,m.RF)(Z.fillingFontWeight||"normal"),getFillingPadding:(0,m.RF)(null!=(S=Z.fillingPadding)?S:.4),fillingRotateList:null!=(A=Z.fillingRotateList)?A:[0,90],fillingDeltaFontSizeFactor:null!=(C=Z.fillingDeltaFontSizeFactor)?C:.2,fillingColorList:Z.fillingColorList||["#537EF5"],sameColorList:!1,minInitFontSize:null!=(D=Z.minInitFontSize)?D:10,minFontSize:null!=(T=Z.minFontSize)?T:4,minFillFontSize:null!=(M=Z.minFillFontSize)?M:2},H=(0,s.P0)(U.colorList,N.fillingColorList);N.sameColorList=H,E(j,U,N,Z),function(t,e,i,r){let{getText:n}=e,{fillingInitialFontSize:a,fillingDeltaFontSize:o}=i,{fillingRatio:l}=i,h=Math.ceil(Math.sqrt(r.shapeArea)/4);if(!a||!o){let e,u=t.reduce((t,e)=>{let i=(0,s.cC)(n(e));return i>h?t:t+i},0)/t.length;a=~~(e=0===u?8:Math.sqrt(.2*r.shapeArea/u*(l/100))),o=e*i.fillingDeltaFontSizeFactor,Object.assign(i,{fillingInitialFontSize:a,fillingDeltaFontSize:o})}}(j,U,N,z);let{getText:G,getFontFamily:V,getFontStyle:X,getFontWeight:Y,getPadding:$,getColor:q,getFillingColor:K,getColorHex:Q,fontSizeScale:J,colorScale:tt,fillingColorScale:te,getFontOpacity:ti,rotateList:tr}=U,tn=j.map(t=>{var e,i;return{x:0,y:0,weight:0,text:G(t),fontFamily:V(t),fontWeight:Y(t),fontStyle:X(t),rotate:tr[~~(I.randomGenerator()*tr.length)],fontSize:Math.max(N.minInitFontSize,~~J(t)),opacity:ti(t),padding:$(t),color:Q&&Q(t)||tt&&tt(q(t))||"black",fillingColor:!K||(null==(e=Z.colorField)?void 0:e.field)===(null==(i=Z.fillingColorField)?void 0:i.field)&&H?void 0:Q&&Q(t)||te&&te(K(t))||"black",datum:t,visible:!0,hasPlaced:!1}}),ts=(0,y.CE)(tn.map(t=>t.fontSize));tn.forEach(t=>t.weight=t.fontSize/ts),tn.sort((t,e)=>e.weight-t.weight);let{fillingWords:ta,successedWords:to,failedWords:tl}=function(t,e,i){(function(t,e){let{segmentation:{regions:i}}=e,r=-1/0,n=0,s=0;i.forEach((t,e)=>{let i=t.area;i>r&&(r=i,s=e),n+=i});let a=0;i.forEach(e=>{let i=e.area,s=Math.ceil(i/n*t.length),o=i/r;e.words=[],e.regionNum=s,e.regionWeight=o,a+=s}),a<t.length&&(i[s].wordsNum+=t.length-a);let o=s,l=i.map(t=>t.regionNum);t.forEach(t=>{let e=0,r=0;t.regionIndex=-1;do{if(l[o]>0&&t.weight<=i[o].regionWeight){t.regionIndex=o,i[o].words.push(t),l[o]--,o=(o+1)%i.length;break}o=(o+1)%i.length,e++,++r>i.length+1&&(i.forEach(t=>{t.regionWeight+=.15}),r=0)}while(-1===t.regionIndex&&e<3*i.length);-1===t.regionIndex&&(t.regionIndex=s,i[s].words.push(t),l[s]--)}),i.forEach(t=>{t.words.sort((t,e)=>e.weight-t.weight)})})(t,i),"ensureMapping"===e.layoutMode?a(t,e,i):"ensureMappingEnlarge"===e.layoutMode?function(t,e,i){let{size:r,stepFactor:n,importantWordCount:s}=e,{segmentation:{regions:l},tempCanvas:h,boardSize:d,shapeCenter:p,shapeMaxR:f,shapeRatio:g}=i,m=h.getContext("2d",{willReadFrequently:!0}),y=c(i),v=y.slice(0),b=e.fontSizeEnlargeFactor,x=Math.min(s,t.length),_=0;t.length>x&&(_=t.sort((t,e)=>e.weight-t.weight)[x-1].weight);let w=0,S=1,A=!1;for(let s=0;s<l.length;s++){let{words:c,center:p,maxR:f,ratio:g}=l[s],C=!1;for(let s=0;s<c.length;s++){u(h,m,t,s);let l=c[s];if(l.x=p[0],l.y=p[1],l.hasText&&l.sprite&&o(v,l,f,g,r,d,n)){if(l.hasPlaced=!0,l.weight>=_&&w++,w>=x&&!A){S*=b,t.forEach(t=>{t.hasText=!1,t.sprite=null,t.fontSize=t.fontSize*b}),v=y.slice(0),C=!0,w=0;break}}else{if(l.weight>=_&&S>1){t.forEach(t=>{t.hasText=!1,t.sprite=null,t.fontSize=t.fontSize/b}),S/=b,A=!0,v=y.slice(0),C=!0;break}if(l.weight>=_)return a(t,e,i)}}C&&(s=-1)}for(let i=0;i<e.textLayoutTimes;i++){let i=t.filter(t=>(t.hasPlaced||(t.hasText=!1,t.sprite=null,t.fontSize=Math.max(~~(t.fontSize*e.fontSizeShrinkFactor),e.minFontSize)),!t.hasPlaced));if(0===i.length)break;for(let t=0;t<i.length;t++){let e=i[t];u(h,m,i,t),e.x=p[0],e.y=p[1],e.hasText&&o(v,e,f,g,r,d,n)&&(e.hasPlaced=!0)}}e.board=v}(t,e,i):function(t,e,i){let{size:r,stepFactor:n}=e,{segmentation:{regions:s},tempCanvas:a,boardSize:l,shapeCenter:h,shapeMaxR:d,shapeRatio:p}=i,f=c(i),g=a.getContext("2d",{willReadFrequently:!0});for(let e of s){let{words:i,center:s,maxR:h,ratio:c}=e;for(let e=0;e<i.length;e++){u(a,g,t,e);let d=i[e];d.x=s[0],d.y=s[1],d.hasText&&d.sprite&&o(f,d,h,c,r,l,n)&&(d.hasPlaced=!0)}}for(let i=0;i<e.textLayoutTimes;i++){let i=t.filter(t=>(t.hasPlaced||(t.hasText=!1,t.sprite=null,t.fontSize=Math.max(~~(t.fontSize*e.fontSizeShrinkFactor),e.minFontSize)),!t.hasPlaced));if(0===i.length)break;for(let t=0;t<i.length;t++){let e=i[t];u(a,g,i,t),e.x=h[0],e.y=h[1],e.hasText&&o(f,e,d,p,r,l,n)&&(e.hasPlaced=!0)}}e.board=f}(t,e,i);let r=function(t,e,i){let{size:r,fillingTimes:n,fillingXStep:s,fillingYStep:a,getFillingFontStyle:o,getFillingFontWeight:c,getFillingFontFamily:d,fillingInitialFontSize:p,fillingDeltaFontSize:f,fillingInitialOpacity:g,fillingDeltaOpacity:m,fillingRotateList:y,getFillingPadding:v,random:b,board:x,minFillFontSize:_}=e,{boardSize:w,shapeBounds:S,tempCanvas:A,randomGenerator:C}=i,D=A.getContext("2d",{willReadFrequently:!0}),T=p,B=g,M=[];for(let e=0;e<n;e++)(function(e,i){let n=t.map(t=>{let{text:r,color:n,fillingColor:s,hasPlaced:a,datum:l}=t;return{x:0,y:0,weight:0,text:r,fontFamily:d(l),fontStyle:o(l),fontWeight:c(l),fontSize:e,rotate:y[~~(C()*y.length)],padding:v(l),opacity:i,visible:!0,color:n,fillingColor:s,hasPlaced:a,datum:l}});E(n);let p=0,{x1:f,y1:g,x2:m,y2:_}=S,[T,B]=[f+~~(C()*s*2),g+~~(C()*a*2)];for(let t=B;t<=_;t+=a)for(let e=T;e<=m;e+=s){u(A,D,n,p);let i=n[p];i.x=e,i.y=t;let{wordSize:s,bounds:a,hasPlaced:o}=i;if(!o||!a){++p===n.length&&(p=0,b&&E(n));continue}let{dTop:c,dBottom:d,dLeft:f,dRight:g}=a;i.x-f<0||i.x+g>r[0]||i.y-c<0||i.y+d>r[1]||i.hasText&&i.sprite&&!h(i,x,w)&&(l(i,x,w),M.push(Object.assign({},i)),++p===n.length&&(p=0,b&&E(n)))}})(T,B),T=Math.max(T>f?T-f:f,_),B=B>m?B-m:m;return M;function E(t){return t.sort(()=>C()-.5)}}(t,e,i),n=[],s=[];for(let e=0;e<t.length;e++)t[e].hasPlaced?s.push(t[e]):n.push(t[e]);return n.forEach(t=>t.visible=!1),{fillingWords:r,successedWords:s,failedWords:n}}(tn,N,z),th=null!=(R=null==(F=Z.text)?void 0:F.field)?R:"textKey",tu=null!=(P=Z.dataIndexKey)?P:"defaultDataIndexKey",tc=Z.as?Object.assign(Object.assign({},B),Z.as):B,td=[];for(let t=0;t<tn.length;++t)(L=(O=tn[t]).datum)[tc.x]=O.x,L[tc.y]=O.y,L[tc.fontFamily]=O.fontFamily,L[tc.fontSize]=O.fontSize,L[tc.fontStyle]=O.fontStyle,L[tc.fontWeight]=O.fontWeight,L[tc.angle]=(0,v.M4)(O.rotate),L[tc.opacity]=O.opacity,L[tc.visible]=O.visible,L[tc.isFillingWord]=!1,L[tc.color]=O.color,L[tu]=`${O.text}_${t}_keyword`,td.push(L);let tp=[];ta.forEach((t,e)=>{var i,r;let n=Object.assign({},t.datum);n[tc.x]=t.x,n[tc.y]=t.y,n[tc.fontFamily]=t.fontFamily,n[tc.fontSize]=t.fontSize,n[tc.fontStyle]=t.fontStyle,n[tc.fontWeight]=t.fontWeight,n[tc.angle]=(0,v.M4)(t.rotate),n[tc.opacity]=t.opacity,n[tc.visible]=t.visible,n[tc.isFillingWord]=!0,n[tc.color]=K?(null==(i=Z.colorField)?void 0:i.field)===(null==(r=Z.fillingColorField)?void 0:r.field)&&H?t.color:t.fillingColor:N.fillingColorList[~~(I.randomGenerator()*N.fillingColorList.length)],n[th]=t.text,n[tu]=`${t.text}_${e}_fillingWords`,tp.push(n)}),this.options.onLayoutFinished&&this.options.onLayoutFinished({successedWords:to,failedWords:tl}),this.progressiveResult=td.concat(tp)}release(){this.segmentationInput=null,this.data=null,this.progressiveResult=null,this.options=null}}let E=(t,e,i,r)=>{var n,s,a,o;let{colorMode:l,getColor:h,getFillingColor:u}=e,{sameColorList:c}=i,d,p,f=e.colorList,g=i.fillingColorList;if("ordinal"===l){let e=t.map(t=>h(t));if(d=t=>(new C).domain(e).range(f).scale(t),u&&((null==(n=r.colorField)?void 0:n.field)!==(null==(s=r.fillingColorField)?void 0:s.field)||!c)){let e=t.map(t=>u(t));p=t=>(new C).domain(e).range(g).scale(t)}}else{1===f.length&&(f=[f[0],f[0]]);let e=(new D.f).domain(R(h,t)).range(f);if(d=t=>e.scale(t),u&&((null==(a=r.colorField)?void 0:a.field)!==(null==(o=r.fillingColorField)?void 0:o.field)||!c)){1===g.length&&(g=[g[0],g[0]]);let e=(new D.f).domain(R(u,t)).range(g);p=t=>e.scale(t)}}Object.assign(e,{colorScale:d,fillingColorScale:p})},k=(t,e,i)=>{let r,{fontSizeRange:n}=e,{getFontSize:a,getText:o}=e;if(a){if(a&&n){let e=(new T.a).domain(R(a,t)).range(n);r=t=>e.scale(a(t))}else if(a&&(0,b.Z)(a)&&!n){let[e,s]=R(a,t),l=F(t.map(t=>({text:o(t),value:a(t),weight:s===e?1:(a(t)-e)/(s-e)})),i,!0);n=[~~(.5*l),~~l];let h=(new T.a).domain(R(a,t)).range(n);r=t=>h.scale(a(t))}}else{let e=F(t.map(t=>({text:o(t)})),i,!1);r=(0,s.Yq)(e)}Object.assign(e,{getFontSize:a,fontSizeRange:n,fontSizeScale:r})},F=(t,e,i)=>{let r=e.shapeArea,n=e.ratio,a=e.segmentation.regions,o=Math.ceil(Math.sqrt(r)/12),l=t.reduce((t,e)=>{let r=(0,s.cC)(e.text);return r<o?t+r*(i?(.5+.5*e.weight)**2:1):t},0);if(0===l)return 12;let h=20;if(1===a.length)h=Math.sqrt(r/(1.7*l)*n);else{let t=[];for(let e=0;e<a.length;e++){let i=a[e].area,s=a[e].ratio,o=i/r;if(o<.1)continue;let h=Math.sqrt(i/(l*(s<1?2.7-s:1.7)*o)*n);t.push(h)}h=t.length?Math.min(...t):Math.sqrt(r/(1.7*l)*n)}return h},R=(t,e)=>{let i,r=1/0,n=-1/0,s=e.length;for(let a=0;a<s;++a)(i=(0,x.H)(t(e[a])))<r&&(r=i),i>n&&(n=i);return 1===e.length&&r===n&&(r-=1e4),[r,n]},P=(t,e,i)=>{if(!t.size||(0,r.Z)(t.size[0])||(0,r.Z)(t.size[1])||t.size[0]<=0||t.size[1]<=0)return n.Y.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];if(t.size=[Math.ceil(t.size[0]),Math.ceil(t.size[1])],t.shape||n.Y.getInstance().error("WordcloudShape shape must be specified."),t.text||n.Y.getInstance().error("WordcloudShape text must be specified."),t.onBeforeLayout&&t.onBeforeLayout(),!e||0===e.length)return[];let s=new M(t);return s.layout(e),s.unfinished()?{progressive:s}:s.output()}},69211:function(t,e,i){"use strict";i.d(e,{I:()=>c});var r=i(19461),n=i(65709),s=i(50890),a=i(86624),o=i(9706),l=i(89079),h=i(42504),u=i(68601);class c{constructor(t){var e,i;switch(this.options=(0,r.Z)({},c.defaultOptions,t),(0,n.Z)(this.options.shape)?this.shape=this.options.shape:this.shape=(0,h.jc)(this.options.shape),this.getText=null!=(e=(0,u.Yq)(this.options.text))?e:t=>t,this.getTextFontWeight=(0,u.Yq)(this.options.fontWeight),this.getTextFontSize=(0,u.Yq)(this.options.fontSize),this.getTextFontStyle=(0,u.Yq)(this.options.fontStyle),this.getTextFontFamily=(0,u.Yq)(this.options.fontFamily),this.outputCallback=null!=(i=this.options.outputCallback)?i:t=>t,this.options.color){case"random-dark":this.getTextColor=()=>(0,u.u6)(10,50);break;case"random-light":this.getTextColor=()=>(0,u.u6)(50,90);break;default:this.getTextColor=(0,u.Yq)(this.options.color)}if((0,s.Z)(this.options.rotate))if(this.options.useRandomRotate){let t=Math.abs(this.options.maxRotation-this.options.minRotation),e=Math.abs(Math.floor(this.options.rotationSteps)),i=Math.min(this.options.maxRotation,this.options.minRotation);this.getTextRotate=()=>0===this.options.rotateRatio||Math.random()>this.options.rotateRatio?0:0===t?i:e>0?i+Math.floor(Math.random()*e)*t/(e-1):i+Math.random()*t}else this.getTextRotate=()=>0;else this.getTextRotate=(0,n.Z)(this.options.rotate)?t=>{var e;return(0,a.M4)(null!=(e=this.options.rotate(t))?e:0)}:(t,e)=>{let i=(0,o.IX)(this.options.rotate),r=this.options.random?Math.random():(0,l.b8)(e);return(0,a.M4)(i[Math.floor(r*i.length)])}}canRepeat(){return!1}exceedTime(){var t;return this.options.progressiveStep>0?this.progressiveIndex>=((null!=(t=this.currentStepIndex)?t:-1)+1)*this.options.progressiveStep:this.options.progressiveTime>0&&(new Date).getTime()-this.escapeTime>this.options.progressiveTime}progressiveRun(){var t;if(this.options.progressiveStep>0?this.currentStepIndex=(null!=(t=this.currentStepIndex)?t:-1)+1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.data&&this.progressiveIndex<this.data.length){this.progressiveResult=[];let t=this.progressiveIndex,e=0,i=this.options.maxSingleWordTryCount,r=Math.min(this.options.maxFailCount,this.originalData.length);for(;t<this.data.length&&this.failCount<r;){let n=this.layoutWord(t);if(e++,(n||e>i)&&(t++,e=0,this.failCount=n?0:this.failCount+1),this.progressiveIndex=t,this.exceedTime())break;t===this.data.length&&this.failCount<r&&this.options.repeatFill&&this.canRepeat()&&(this.data=[...this.data,...this.originalData.map(t=>Object.assign(Object.assign({},t),{isFill:!0}))],this.isTryRepeatFill=!0)}return this.progressiveResult}return this.result}initProgressive(){this.failCount=0,this.progressiveIndex=0,this.options.progressiveStep>0?this.currentStepIndex=-1:this.options.progressiveTime>0&&(this.escapeTime=Date.now()),this.progressiveResult=[]}output(){return this.result?this.outputCallback(this.result):null}progressiveOutput(){return this.progressiveResult?this.outputCallback(this.progressiveResult):null}unfinished(){return this.data&&this.data.length&&!(0,s.Z)(this.progressiveIndex)&&this.progressiveIndex<this.data.length}release(){this.data=null,this.result=null,this.progressiveIndex=null,this.progressiveResult=null}}c.defaultOptions={fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",fontStyle:"normal",minFontSize:12,drawOutOfBound:!1,shrink:!1,minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,rotateRatio:.1,random:!1,shape:"circle",progressiveTime:0,progressiveStep:0,repeatFill:!1,fillTextFontSize:12,maxFailCount:20}},84592:function(t,e,i){"use strict";i.d(e,{X:()=>h});var r=i(69211),n=i(68601),s=i(1058),a=i(42504),o=i(19461),l=i(83510);class h extends r.I{constructor(t){var e;super((0,o.Z)({},h.defaultOptions,t)),this.cw=64,this.ch=2048,this._size=[256,256],this._isBoardExpandCompleted=!1,this._placeStatus=0,this._tTemp=null,this._dtTemp=null,this._dy=0,this.cacheMap=new Map,this.options.minFontSize<=h.defaultOptions.minFontSize&&(this.options.minFontSize=h.defaultOptions.minFontSize),this.spiral=(0,l.Z)(this.options.spiral)?null!=(e=s.$[this.options.spiral])?e:s.$.archimedean:this.options.spiral,this.random=this.options.random?Math.random:()=>1,this.getTextPadding=(0,n.Yq)(this.options.padding)}zoomRatio(){return this._originSize[0]/this._size[0]}dy(){return this._dy}layoutWord(t){let e=this.data[t];if(""===(""+e.text).trim())return!0;let{maxRadius:i,center:r}=(0,a.nf)(this.options.shape,this._size);if(e.x=r[0],e.y=r[1],function(t,e,i,r,n,s){let a,o,l,h,u;if(e.sprite)return;let c=t.context,d=t.ratio;c.setTransform(d,0,0,d,0,0),c.clearRect(0,0,(n<<5)/d,s/d);let p=0,f=0,g=0,m=i.length;for(--r;++r<m;){if(e=i[r],c.save(),c.font=e.fontStyle+" "+e.fontWeight+" "+~~((e.fontSize+1)/d)+"px "+e.fontFamily,a=c.measureText(e.text+"m").width*d,l=e.fontSize<<1,e.angle){let t=Math.sin(e.angle),i=Math.cos(e.angle),r=a*i,n=a*t,s=l*i,o=l*t;a=Math.max(Math.abs(r+o),Math.abs(r-o))+31>>5<<5,l=~~Math.max(Math.abs(n+s),Math.abs(n-s))}else a=a+31>>5<<5;if(l>g&&(g=l),p+a>=n<<5&&(p=0,f+=g,g=0),f+l>=s)break;c.translate((p+(a>>1))/d,(f+(l>>1))/d),e.angle&&c.rotate(e.angle),c.fillText(e.text,0,0),e.padding&&(c.lineWidth=2*e.padding,c.strokeText(e.text,0,0)),c.restore(),e.width=a,e.height=l,e.xoff=p,e.yoff=f,e.x1=a>>1,e.y1=l>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,p+=a}let y=c.getImageData(0,0,(n<<5)/d,s/d).data,v=[];for(;--r>=0;){if(!(e=i[r]).hasText)continue;for(o=(a=e.width)>>5,l=e.y1-e.y0,h=0;h<l*o;h++)v[h]=0;if(null==(p=e.xoff))return;f=e.yoff;let t=0,s=-1;for(u=0;u<l;u++){for(h=0;h<a;h++){let e=o*u+(h>>5),i=y[(f+u)*(n<<5)+(p+h)<<2]?1<<31-h%32:0;v[e]|=i,t|=i}t?s=u:(e.y0++,l--,u--,f++)}e.y1=e.y0+s,e.sprite=v.slice(0,(e.y1-e.y0)*o)}}(this.contextAndRatio,e,this.data,t,this.cw,this.ch),this._placeStatus=0,e.hasText&&this.place(this._board,e,this._bounds,i))return this.result.push(e),this._bounds?function(t,e){let i=t[0],r=t[1];e.x+e.x0<i.x&&(i.x=e.x+e.x0),e.y+e.y0<i.y&&(i.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}(this._bounds,e):this._bounds=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}],e.x-=this._size[0]>>1,e.y-=this._size[1]>>1,this._tTemp=null,this._dtTemp=null,!0;if(this.updateBoardExpandStatus(e.fontSize),e.hasText&&this.shouldShrinkContinue()){if(1===this._placeStatus){let t=e.fontSize*this._originSize[0]/this.options.minFontSize,i=Math.max(e.width,e.height);if(i<=t)this._board=this.expandBoard(this._board,this._bounds,i/this._size[0]);else{if(!this.options.clip)return!0;this._board=this.expandBoard(this._board,this._bounds,t/this._size[0])}}else this._placeStatus,this._board=this.expandBoard(this._board,this._bounds);return this.updateBoardExpandStatus(e.fontSize),!1}return this._tTemp=null,this._dtTemp=null,!0}layout(t,e){this.initProgressive(),this.result=[],this._size=[e.width,e.height],this.clearCache(),this._originSize=[...this._size];let i=this.getContext(this.options.createCanvas({width:1,height:1}));this.contextAndRatio=i,this._board=new Uint32Array((this._size[0]>>5)*this._size[1]).fill(0),this._bounds=null,t.length,this.result=[];let r=t.map((t,e)=>({text:this.getText(t),fontFamily:this.getTextFontFamily(t),fontStyle:this.getTextFontStyle(t),fontWeight:this.getTextFontWeight(t),angle:this.getTextRotate(t,e),fontSize:~~this.getTextFontSize(t),padding:this.getTextPadding(t),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:t,x:0,y:0,width:0,height:0})).sort(function(t,e){return e.fontSize-t.fontSize});if(this.originalData=r,this.data=r,this.progressiveRun(),!this.options.clip&&this.options.enlarge&&this._bounds&&this.shrinkBoard(this._bounds),this._bounds&&["cardioid","triangle","triangle-upright"].includes(this.options.shape)){let t=(this._bounds[0].y+this._bounds[1].y)/2;this._dy=-(t-this._originSize[1]/2)}return this.result}formatTagItem(t){let e,i,r=this._size,n=this.zoomRatio(),s=this.dy(),a=r[0]>>1,o=r[1]>>1,l=t.length,h=[];for(let r=0;r<l;++r)e=t[r],(i={}).datum=e.datum,i.x=(e.x+a)*n,i.y=(e.y+o+s)*n,i.fontFamily=e.fontFamily,i.fontSize=e.fontSize*n,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.angle=e.angle,h.push(i);return h}output(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.result)):this.formatTagItem(this.result)}progressiveOutput(){return this.outputCallback?this.outputCallback(this.formatTagItem(this.progressiveResult)):this.formatTagItem(this.progressiveResult)}updateBoardExpandStatus(t){this._isBoardExpandCompleted=t*(this._originSize[0]/this._size[0])<this.options.minFontSize}shouldShrinkContinue(){return!this.options.clip&&this.options.shrink&&!this._isBoardExpandCompleted}shrinkBoard(t){let e=t[0],i=t[1];if(i.x>=this._size[0]||i.y>=this._size[1])return;let r=Math.min(e.x,this._size[0]-i.x),n=Math.min(e.y,this._size[1]-i.y),s=2*Math.min(r/this._size[0],n/this._size[1]);this._size=this._size.map(t=>t*(1-s))}expandBoard(t,e,i){let r=this._size[0],n=this._size[1],s=r>>5,a=r*(i||1.1)-r>>5,o=2*a>2?a:2;o%2!=0&&o++;let l=Math.ceil(n*(o<<5)/r);l%2!=0&&l++;let h=r+(o<<5),u=n+l,c=h>>5,d=o/2,p=l/2,f=new Uint32Array(u*c).fill(0);for(let e=0;e<n;e++){let i=e*s,r=i+s,n=(e+p)*c+d,a=t.slice(i,r);f.set(a,n)}if(this._size=[h,u],e){let t=(o<<5)/2,i=l/2;e[0].x+=t,e[0].y+=i,e[1].x+=t,e[1].y+=i}return f}insertZerosToArray(t,e,i){if(this.options.customInsertZerosToArray)return this.options.customInsertZerosToArray(t,e,i);let r=Math.floor(i/6e4);for(let i=0;i<r;i++)t.splice(e+6e4*i,0,...Array(6e4).fill(0));t.splice(e+6e4*r,0,...Array(i%6e4).fill(0))}getContext(t){t.width=1,t.height=1;let e=Math.sqrt(t.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1).data.length>>2);t.width=(this.cw<<5)/e,t.height=this.ch/e;let i=t.getContext("2d",{willReadFrequently:!0});return i.fillStyle=i.strokeStyle="red",i.textAlign="center",{context:i,ratio:e,canvas:t}}place(t,e,i,r){let n=!1;if(this.shouldShrinkContinue()&&(e.width>this._size[0]||e.height>this._size[1]))return this._placeStatus=1,!1;let s=.5>this.random()?1:-1;if(!this.shouldShrinkContinue()&&this.isSizeLargerThanMax(e,s))return null;let a=e.x,o=e.y,l=Math.sqrt(this._size[0]*this._size[0]+this._size[1]*this._size[1]),h=this.spiral(this._size),d,p,f,g,m=-s;for(this._tTemp=null,this._dtTemp=null;d=h(m+=s);){let h=Math.sqrt((p=d[0])**2+(f=d[1])**2),b=Math.atan(f/p);p<0?b+=Math.PI:f<0&&(b=2*Math.PI+b);let x=this.shape(b);if(Math.min(Math.abs(p),Math.abs(f))>=l)break;if(h>=r)n&&null===this._tTemp&&(this._tTemp=m,this._dtTemp=s);else{var y,v;if(e.x=a+~~(h*x*Math.cos(-b)),e.y=o+~~(h*x*Math.sin(-b)),g=e,this.options.clip)if(this.shouldShrinkContinue()){if(c(g,this._size)){n&&null===this._tTemp&&(this._tTemp=m,this._dtTemp=s);continue}}else{if(u(g,this._size)){n&&null===this._tTemp&&(this._tTemp=m,this._dtTemp=s);continue}c(g,this._size)&&(g=function(t,e){let i=t.sprite,r=t.y1-t.y0,n=t.width>>5,s=0,a=[],o=Math.max(-(t.y0+t.y),0),l=Math.min(r+(e[1]-(t.y1+t.y)),r),h=Math.max(-(t.x0+t.x),0)>>5,u=Math.min(n+(e[0]-(t.x1+t.x)>>5)+1,n);for(let t=0;t<r;t++){for(let e=0;e<n;e++)t<o||l<=t||e<h||u<=e||a.push(i[s+e]);s+=n}let c=h<<5,d=n-u<<5,p=r-l;return Object.assign(Object.assign({},t),{width:t.width-c-d,height:t.height-o-p,x0:t.x0+c,x1:t.x1-d,y0:t.y0+o,y1:t.y1-p,x:t.x+c/2-d/2,sprite:a})}(g,this._size))}else if(c(g,this._size)){n&&null===this._tTemp&&(this._tTemp=m,this._dtTemp=s);continue}if(n=!0,(!i||(y=g,v=i,y.x+y.x1>v[0].x&&y.x+y.x0<v[1].x&&y.y+y.y1>v[0].y&&y.y+y.y0<v[1].y))&&(!i||!function(t,e,i){let r=i[0]>>5,n=t.sprite,s=t.width>>5,a=t.x-(s<<4),o=127&a,l=32-o,h=t.y1-t.y0,u,c=(t.y+t.y0)*r+(a>>5);for(let t=0;t<h;t++){u=0;for(let i=0;i<=s;i++)if((u<<l|(i<s?(u=n[t*s+i])>>>o:0))&e[c+i])return!0;c+=r}return!1}(g,t,this._size))){let i=g.sprite,r=g.width>>5,n=this._size[0]>>5,s=g.x-(r<<4),a=127&s,o=32-a,l=g.y1-g.y0,h,u=(g.y+g.y0)*n+(s>>5);for(let e=0;e<l;e++){h=0;for(let n=0;n<=r;n++)t[u+n]|=h<<o|(n<r?(h=i[e*r+n])>>>a:0);u+=n}return e.sprite=null,g.sprite=null,!0}}}return null!==this._tTemp&&(this._placeStatus=3),this.shouldShrinkContinue()||this.setCache(g,s),!1}clearCache(){this.cacheMap.clear()}setCache(t,e){let i=`${t.angle}-${e}`,r=t.x1-t.x0,n=t.y1-t.y0;if(!this.cacheMap.has(i))return void this.cacheMap.set(i,{width:r,height:n});let{width:s,height:a}=this.cacheMap.get(i);(r<s&&n<a||r<=s&&n<a)&&this.cacheMap.set(i,{width:r,height:n})}isSizeLargerThanMax(t,e){let i=`${t.angle}-${e}`;if(!this.cacheMap.has(i))return!1;let{width:r,height:n}=this.cacheMap.get(i),s=t.x1-t.x0,a=t.y1-t.y0;return s>=r&&a>=n}}h.defaultOptions={enlarge:!1,minFontSize:2,maxSingleWordTryCount:2};let u=(t,e)=>t.x+t.x0>e[0]||t.y+t.y0>e[0]||t.x+t.x1<0||t.y+t.y1<0,c=(t,e)=>t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>e[0]||t.y+t.y1>e[1]},83393:function(t,e,i){"use strict";i.d(e,{x:()=>s});var r=i(69211),n=i(19461);class s extends r.I{constructor(t){super((0,n.Z)({},s.defaultOptions,t)),this.random=this.options.random?Math.random:()=>0,this.aspectRatio=1}fit(t){for(let r=0,n=this.result.length;r<n;r++){var e,i;if(e=t,i=this.result[r],!(e.left+e.width<i.left||e.top+e.height<i.top||e.left>i.left+i.width||e.top>i.top+i.height))return!1}return!0}getTextInfo(t,e){let i={datum:t,fontSize:this.getTextFontSize(t),fontWeight:this.getTextFontWeight(t),fontStyle:this.getTextFontStyle(t),fontFamily:this.getTextFontFamily(t),angle:this.getTextRotate(t,e),text:this.getText(t)+"",x:this.center[0],y:this.center[1]},r=this.options.getTextBounds(i);return i.width=r.width(),i.height=r.height(),i.top=this.center[1]-i.height+.21*i.height,i.left=this.center[0]-i.width/2,i}layoutWord(t){let e=this.getTextInfo(this.data[t],t),i=2*Math.PI,r=0,n=e.left,s=e.top,a=e.width,o=e.height,l=1,h=this.fit(e);for(;!h&&r<this.maxRadius;)r+=.5,l=this.shape(r/this.maxRadius*2*Math.PI),i+=.5*(this.options.random?this.random()>.5?1:-1:t%2==0?1:-1),n=this.center[0]-a/2+r*l*Math.cos(i)*this.aspectRatio,s=this.center[1]-o/2+r*l*Math.sin(i),e.left=n,e.top=s,e.x=n+a/2,e.y=s+o/2,h=this.fit(e);return!!h&&!!(this.options.clip||e.left>=0&&e.left+e.width<=this.width&&e.top>=0&&e.top+e.height<=this.height)&&(this.result.push(e),!0)}layout(t,e){if(!(null==t?void 0:t.length))return[];this.initProgressive(),this.result=[],this.maxRadius=Math.sqrt(e.width*e.width+e.height*e.height)/2,this.center=[e.width/2,e.height/2],this.width=e.width,this.height=e.height,this.data=t.sort((t,e)=>this.getTextFontSize(e)-this.getTextFontSize(t));let i=0;for(;i<t.length&&(this.layoutWord(i),i++,this.progressiveIndex=i,!this.exceedTime()););return this.result}}s.defaultOptions={enlarge:!1}},53724:function(t,e,i){"use strict";i.d(e,{M:()=>h});var r=i(69211),n=i(58403),s=i(42504),a=i(19461),o=i(9706);let l=t=>{let e=typeof t;return null!==t&&"object"===e||"function"===e};class h extends r.I{constructor(t){super((0,a.Z)({},h.defaultOptions,t)),this.fillGridAt=(t,e)=>{t>=this.ngx||e>=this.ngy||t<0||e<0||(this.grid[t][e]=!1)},this.updateGrid=(t,e,i,r,n)=>{let s=n.occupied,a=s.length;for(;a--;){let i=t+s[a][0],r=e+s[a][1];i>=this.ngx||r>=this.ngy||i<0||r<0||this.fillGridAt(i,r)}},this.gridSize=Math.max(Math.floor(this.options.gridSize),4)}getPointsAtRadius(t){if(this.pointsAtRadius[t])return this.pointsAtRadius[t];let e=8*t,i=e,r=[];for(0===t&&r.push([this.center[0],this.center[1],0]);i--;){let n=this.shape(i/e*2*Math.PI);r.push([this.center[0]+t*n*Math.cos(-i/e*2*Math.PI),this.center[1]+t*n*Math.sin(-i/e*2*Math.PI)*this.options.ellipticity,i/e*2*Math.PI])}return this.pointsAtRadius[t]=r,r}getTextInfo(t,e=1,i){var r;let n=this.options.clip?1:e,s=Math.max(Math.floor((this.isTryRepeatFill?this.options.fillTextFontSize:this.getTextFontSize(t))*n),this.options.minFontSize),a=this.getText(t)+"";if(this.options.clip&&(a=a.slice(0,Math.ceil(a.length*e))),!a)return null;let o=this.getTextFontWeight(t),l=this.getTextFontStyle(t),h=this.getTextRotate&&null!=(r=this.getTextRotate(t,i))?r:0,u=this.getTextFontFamily(t),c=this.options.createCanvas({width:1,height:1}),d=c.getContext("2d",{willReadFrequently:!0});d.font=l+" "+o+" "+s.toString(10)+"px "+u;let p=d.measureText(a).width,f=Math.max(s,d.measureText("m").width,d.measureText("Ｗ").width),g=p+2*f,m=3*f,y=Math.ceil(g/this.gridSize),v=Math.ceil(m/this.gridSize);g=y*this.gridSize;let b=-p/2,x=-(.4*f),_=Math.ceil((g*Math.abs(Math.sin(h))+(m=v*this.gridSize)*Math.abs(Math.cos(h)))/this.gridSize),w=Math.ceil((g*Math.abs(Math.cos(h))+m*Math.abs(Math.sin(h)))/this.gridSize),S=w*this.gridSize,A=_*this.gridSize;c.setAttribute("width",""+S),c.setAttribute("height",""+A),d.scale(1,1),d.translate(S/2,A/2),d.rotate(-h),d.font=l+" "+o+" "+s.toString(10)+"px "+u,d.fillStyle="#000",d.textBaseline="middle",d.fillText(a,b,x);let C=d.getImageData(0,0,S,A).data;if(this.exceedTime())return null;let D=[],T,B=w,M=[_/2,w/2,_/2,w/2],E=(t,e,i)=>{let r=this.gridSize;for(;r--;){let n=this.gridSize;for(;n--;)if(C[4*((e*this.gridSize+r)*S+(t*this.gridSize+n))+3])return i.push([t,e]),t<M[3]&&(M[3]=t),t>M[1]&&(M[1]=t),e<M[0]&&(M[0]=e),void(e>M[2]&&(M[2]=e))}};for(;B--;)for(T=_;T--;)E(B,T,D);return{datum:t,occupied:D,bounds:M,gw:w,gh:_,fillTextOffsetX:b,fillTextOffsetY:x,fillTextWidth:p,fillTextHeight:f,fontSize:s,fontStyle:l,fontWeight:o,fontFamily:u,angle:h,text:a}}calculateEmptyRate(){let t=this.ngx*this.ngy,e=0;for(let t=0;t<this.ngx;t++)for(let i=0;i<this.ngy;i++)this.grid[t][i]&&e++;return e/t}canFitText(t,e,i,r,n){let s=n.length;for(;s--;){let i=t+n[s][0],r=e+n[s][1];if(i>=this.ngx||r>=this.ngy||i<0||r<0){if(!this.options.drawOutOfBound)return!1}else if(!this.grid[i][r])return!1}return!0}layoutWord(t,e=1){let i=this.data[t],r=this.getTextInfo(i,e,t);if(!r||this.exceedTime())return!1;if(!this.options.drawOutOfBound&&(!this.options.shrink||r.fontSize<=this.options.minFontSize)&&!this.options.clip){let t=r.bounds;if(t[1]-t[3]+1>this.ngx||t[2]-t[0]+1>this.ngy)return!1}let n=this.maxRadius+1,s=t=>{let e=Math.floor(t[0]-r.gw/2),i=Math.floor(t[1]-r.gh/2),s=r.gw,a=r.gh;return!!this.canFitText(e,i,s,a,r.occupied)&&(r.distance=this.maxRadius-n,r.theta=t[2],this.outputText(e,i,r),this.updateGrid(e,i,s,a,r),!0)};for(;n--;){let t=this.getPointsAtRadius(this.maxRadius-n);if(this.options.random&&(t=[].concat(t),(0,o.Sy)(t)),t.some(s))return!0}return(this.options.clip||!!(this.options.shrink&&r.fontSize>this.options.minFontSize))&&this.layoutWord(t,.75*e)}outputText(t,e,i){let r=this.getTextColor(i),n={text:i.text,datum:i.datum,color:r,fontStyle:i.fontStyle,fontWeight:i.fontWeight,fontFamily:i.fontFamily,angle:i.angle,width:i.fillTextWidth,height:i.fillTextHeight,x:(t+i.gw/2)*this.gridSize,y:(e+i.gh/2)*this.gridSize+i.fillTextOffsetY+.5*i.fontSize,fontSize:i.fontSize};this.result.push(n),this.progressiveResult&&this.progressiveResult.push(n)}initGrid(t){this.grid=[];let e=this.options.shape;if(l(e)){let i=(0,n.rp)(e,t.width,t.height,void 0,!1,this.options.createCanvas),r=i.getContext("2d").getImageData(0,0,this.ngx*this.gridSize,this.ngy*this.gridSize);this.options.onUpdateMaskCanvas&&this.options.onUpdateMaskCanvas(i);let s=(0,n.at)(e.backgroundColor,void 0,this.options.createCanvas),a=(t,e)=>{let i=this.gridSize;for(;i--;){let n=this.gridSize;for(;n--;)if(!s(r,e*this.gridSize+i,t*this.gridSize+n))return void(this.grid[t][e]=!0)}this.grid[t][e]=!1},o=this.ngx;for(;o--;){this.grid[o]=[];let t=this.ngy;for(;t--;)a(o,t),!1!==this.grid[o][t]&&(this.grid[o][t]=!0)}r=s=void 0}else{let t=this.ngx;for(;t--;){this.grid[t]=[];let e=this.ngy;for(;e--;)this.grid[t][e]=!0}}}canRepeat(){return this.calculateEmptyRate()>.001}layout(t,e){this.initProgressive(),this.drawnCount=0,this.isTryRepeatFill=!1,this.originalData=t,this.data=t,this.pointsAtRadius=[],this.ngx=Math.floor(e.width/this.gridSize),this.ngy=Math.floor(e.height/this.gridSize);let{center:i,maxRadius:r}=(0,s.nf)(this.options.shape,[e.width,e.height]);return this.center=e.origin?[e.origin[0]/this.gridSize,e.origin[1]/this.gridSize]:[i[0]/this.gridSize,i[1]/this.gridSize],this.maxRadius=Math.floor(r/this.gridSize),this.initGrid(e),this.result=[],this.progressiveRun()}}h.defaultOptions={gridSize:8,ellipticity:1,maxSingleWordTryCount:1}},68601:function(t,e,i){"use strict";i.d(e,{Yq:()=>s,u6:()=>n});var r=i(65709);let n=(t,e)=>"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(e-t)+t).toFixed()+"%)";function s(t){return(0,r.Z)(t)?t:function(){return t}}},98705:function(t,e,i){"use strict";i.d(e,{v:()=>p});var r=i(84592),n=i(53724),s=i(83393),a=i(37258),o=i(61369),l=i(83510),h=i(65709),u=i(37651),c=i(73554);let d={x:"x",y:"y",z:"z",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",angle:"angle"},p=(t,e)=>{var i,l,h,u,c,p;if(t.size&&(t.size[0]<=0||t.size[1]<=0))return a.Y.getInstance().info("Wordcloud size dimensions must be greater than 0"),[];let g=(null!=(i=t.size)?i:[500,500]).slice();g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]);let v=t.fontFamily?f(t.fontFamily):"sans-serif",b=t.fontStyle?f(t.fontStyle):"normal",x=t.fontWeight?f(t.fontWeight):"normal",_=t.rotate?f(t.rotate):0,w=f(t.text),S=null!=(l=t.spiral)?l:"archimedean",A=t.padding?f(t.padding):1,C=null!=(h=t.shape)?h:"square",D=null!=(u=t.shrink)&&u,T=null!=(c=t.enlarge)&&c,B=null!=(p=t.clip)&&p,M=t.minFontSize,E=t.randomVisible,k=t.as?Object.assign(Object.assign({},d),t.as):d,F=t.depth_3d,R=t.postProjection,P=t.fontSize?f(t.fontSize):14,O=t.fontSizeRange;if(O&&!(0,o.Z)(P)){let t=P,i=m(y(t,e),O);P=e=>i(t(e))}let L=r.X;"fast"===t.layoutType?L=s.x:"grid"===t.layoutType&&(L=n.M);let I=new L(Object.assign(Object.assign({},t),{text:w,padding:A,spiral:S,shape:C,rotate:_,fontFamily:v,fontStyle:b,fontWeight:x,fontSize:P,shrink:D,clip:B,enlarge:T,minFontSize:M,random:E,outputCallback:e=>{let i,r,n=[];for(let s=0,a=e.length;s<a;s++)(i=(r=e[s]).datum)[k.x]=r.x,i[k.y]=r.y,i[k.fontFamily]=r.fontFamily,i[k.fontSize]=r.fontSize,i[k.fontStyle]=r.fontStyle,i[k.fontWeight]=r.fontWeight,i[k.angle]=r.angle,"StereographicProjection"===R&&function(t,e,i,r,n){let s=Math.max(t[0],t[1])/2,a=function(t,e,i,r,n){let{x:s,y:a}=n,o=s/t*Math.PI*2,l=Math.PI-a/e*Math.PI;return{x:i*Math.sin(l+=(l<Math.PI/2?1:-1)*Math.pow(Math.min(l-Math.PI/2,1),2)/5)*Math.cos(o)+r.x,y:i*Math.cos(l)+r.y,z:i*Math.sin(l)*Math.sin(o)+r.z}}(t[0],t[1],s,{x:s,y:s,z:null!=n?n:s},e);i[r.x]=a.x,i[r.y]=a.y,i[r.z]=a.z}(g,r,i,k,F),t.dataIndexKey&&(i[t.dataIndexKey]=`${s}`),n.push(i);return n}}));return I.layout(e,{width:g[0],height:g[1]}),t.progressiveStep>0||t.progressiveTime>0?{progressive:I}:I.output()},f=t=>(0,l.Z)(t)||(0,o.Z)(t)||(0,h.Z)(t)||(0,u.Z)(t)?t:e=>e[t.field],g=t=>t<0?-Math.sqrt(-t):Math.sqrt(t),m=(t,e,i)=>{if(t[0]===t[1])return t=>e[0];let r=g(t[0]),n=g(t[1]),s=Math.min(r,n),a=Math.max(r,n);return t=>(g(t)-s)/(a-s)*(e[1]-e[0])+e[0]},y=(t,e)=>{let i,r=1/0,n=-1/0,s=e.length;for(let a=0;a<s;++a)(i=(0,c.H)(t(e[a])))<r&&(r=i),i>n&&(n=i);return 1===e.length&&r===n&&(r-=1e4),[r,n]}},96534:function(t,e,i){"use strict";i.d(e,{r:()=>o});var r=i(66252),n=i(27753),s=i(43225),a=i(41551);class o{constructor(t=n.R.GenAutoIncrementId(),e=a.P,i){this.id=t,this.status=s.t.INITIAL,this._timeline=e,e.addAnimate(this),this.slience=i,this._startTime=0,this._duration=0,this._totalDuration=0,this._loopCount=0,this._currentLoop=0,this._bounce=!1,this._firstStep=null,this._lastStep=null,this._startProps={},this._endProps={},this._preventAttrs=new Set,this.currentTime=0,this.interpolateUpdateFunction=null,this.priority=0}getStartProps(){return this._startProps}getEndProps(){return this._endProps}setTimeline(t){this._timeline=t}getTimeline(){return this._timeline}get timeline(){return this._timeline}bind(t){return this.target=t,this.target.animates||(this.target.animates=new Map),this.target.animates.set(this.id,this),this.onRemove(()=>{this.stop(),this.target.animates.delete(this.id)}),this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.target.animationAttribute||(this.target.animationAttribute={}),this}to(t,e=300,i="linear"){let n=new r.h(s.T.to,t,e,i);return n.bind(this.target,this),this.updateStepAfterAppend(n),this}wait(t){let e=new r.o(s.T.wait,{},t,"linear");return e.bind(this.target,this),this.updateStepAfterAppend(e),this}updateStepAfterAppend(t){this._firstStep?this._lastStep.append(t):this._firstStep=t,this._lastStep=t,this.parseStepProps(t),this.updateDuration()}parseStepProps(t){this._lastStep&&(t.propKeys=t.propKeys||Object.keys(t.props),Object.keys(this._endProps).forEach(e=>{var i;t.props[e]=null!=(i=t.props[e])?i:this._endProps[e]}),t.propKeys.forEach(e=>{this._endProps[e]=t.props[e]}))}reSyncProps(){if(!this._lastStep)return;this._endProps={};let t=this._firstStep;for(;t;)Object.keys(this._endProps).forEach(e=>{var i;t.props[e]=null!=(i=t.props[e])?i:this._endProps[e]}),t.propKeys.forEach(e=>{this._endProps[e]=t.props[e]}),t=t.next}from(t,e=300,i="linear"){let n=new r.h(s.T.from,t,e,i);return this._firstStep?this._lastStep.append(n):this._firstStep=n,this._lastStep=n,this.updateDuration(),this}play(t){return t.bind(this.target,this),this.updateStepAfterAppend(t),this}pause(){this.status===s.t.RUNNING&&(this.status=s.t.PAUSED)}resume(){this.status===s.t.PAUSED&&(this.status=s.t.RUNNING)}onStart(t){var e;t?(this._onStart||(this._onStart=[]),this._onStart.push(t)):(null==(e=this._onStart)||e.forEach(t=>t()),Object.keys(this._endProps).forEach(t=>{this._startProps[t]=this.target.getComputedAttribute(t)}))}onEnd(t){var e;t?(this._onEnd||(this._onEnd=[]),this._onEnd.push(t)):null==(e=this._onEnd)||e.forEach(t=>t())}onFrame(t){t&&(this._onFrame||(this._onFrame=[]),this._onFrame.push(t))}onRemove(t){var e;t?(this._onRemove||(this._onRemove=[]),this._onRemove.push(t)):null==(e=this._onRemove)||e.forEach(t=>t())}preventAttr(t){this._preventAttrs.add(t),delete this._startProps[t],delete this._endProps[t];let e=this._firstStep;for(;e;)e.deleteSelfAttr(t),e=e.next}preventAttrs(t){t.forEach(t=>this._preventAttrs.add(t))}validAttr(t){return!this._preventAttrs.has(t)}runCb(t){var e;return null==(e=this._lastStep)||e.onEnd(t),this}startAt(t){return this._startTime=t,this}customInterpolate(t,e,i,r,n,s){return!1}getFromValue(){return this._startProps}getToValue(){return this._endProps}stop(t){let e=this._firstStep;for(;e;)e.stop(),e=e.next;this.status!==s.t.END&&this.onEnd(),this.status=s.t.END,this.target&&("start"===t?this.target.setAttributes(this._startProps):"end"===t?this.target.setAttributes(this._endProps):t&&this.target.setAttributes(t))}release(){this.status=s.t.END,this._onRemove&&this._onRemove.forEach(t=>t()),this._onStart=[],this._onFrame=[],this._onEnd=[],this._onRemove=[],this.forEachStep(t=>{t.release()})}getDuration(){return this._duration}getStartTime(){return this._startTime}afterAll(t){if(!t||0===t.length)return this;let e=0;return t.forEach(t=>{let i=t.getStartTime()+t.getTotalDuration();e=Math.max(e,i)}),this.startAt(e)}after(t){if(!t)return this;let e=t.getStartTime()+t.getTotalDuration();return this.startAt(e)}parallel(t){return t&&this.startAt(t.getStartTime()),this}loop(t){return!0===t?t=1/0:!1===t&&(t=0),this._loopCount=t,this.updateDuration(),this}bounce(t){return this._bounce=t,this}advance(t){var e,i,r;if(this.status===s.t.END)return void console.warn("aaa 动画已经结束，不能推进");let n=this.currentTime+t;if(n<this._startTime)return void(this.currentTime=n);if(n>=this._startTime+this._totalDuration)return null==(e=this._lastStep)||e.onUpdate(!0,1,{}),null==(i=this._lastStep)||i.onEnd(),this.onEnd(),void(this.status=s.t.END);this.status=s.t.RUNNING,this.currentTime<=this._startTime&&this.onStart(),this.currentTime=n;let a=n-this._startTime,o=!1,l=!1;if(this._loopCount>0){a=(n-this._startTime)%this._duration;let t=Math.floor((n-this._startTime)/this._duration);o=t>this._currentLoop,this._currentLoop=t,(l=this._bounce&&t%2==1)&&(a=this._duration-a)}o&&!l&&this.target.setAttributes(this._startProps);let h=null;if(this._lastStep===this._firstStep)h=this._firstStep;else{let t=this._firstStep;for(;t;){let e=t.getStartTime(),i=t.getDuration();if(a>=e&&a<=e+i){h=t;break}t=t.next}}if(!h)return;h!==this.lastRunStep&&(null==(r=this.lastRunStep)||r.onEnd()),this.lastRunStep=h;let u=(a-h.getStartTime())/h.getDuration(),c=u>=1;h.update(c,u,{}),c&&(h.onEnd(),this.lastRunStep=null)}updateDuration(){this._lastStep?(this._duration=this._lastStep.getStartTime()+this._lastStep.getDuration(),this._totalDuration=this._duration*(this._loopCount+1)):this._duration=0}getTotalDuration(){return this._totalDuration}getLoop(){return this._loopCount}forEachStep(t){let e=this._firstStep;for(;e;)t(e),e=e.next}}},1444:function(t,e,i){"use strict";i.d(e,{L:()=>s});var r=i(67412);class n{constructor(t){this.tasks=[],this.started=!1,this.completed=0,this.totalDuration=0,this.onStartCallbacks=[],this.onEndCallbacks=[],this.onUpdateCallbacks=[],this.component=t}animate(t,e){return this.started?console.warn("Cannot add animations after animation has started"):this.tasks.push({graphic:t,config:e}),this}onStart(t){return this.onStartCallbacks.push(t),this}onEnd(t){return this.onEndCallbacks.push(t),this}onUpdate(t){return this.onUpdateCallbacks.push(t),this}start(){return this.started?console.warn("Animation has already started"):(this.started=!0,this.completed=0,this.onStartCallbacks.forEach(t=>t()),0===this.tasks.length?setTimeout(()=>{this.onEndCallbacks.forEach(t=>t())},0):this.tasks.forEach(t=>{let e=new r.a(t.graphic);e.onEnd(()=>{this.completed++,this.completed===this.tasks.length&&this.onEndCallbacks.forEach(t=>t())});let i=e.executeItem(t.config,t.graphic);t.animate=i,i.forEach(t=>{this.totalDuration=Math.max(this.totalDuration,t.getStartTime()+t.getDuration())})})),this}deleteSelfAttr(t){this.tasks.forEach(e=>{e.animate&&e.animate.forEach(e=>e.preventAttr(t))})}stop(t){return this.tasks.forEach(e=>{e.animate&&e.animate.forEach(e=>e.stop(t))}),this.started&&this.completed!==this.tasks.length&&(this.onEndCallbacks.forEach(t=>t()),this.completed=this.tasks.length),this}getDuration(){return this.totalDuration}}function s(t){return new n(t)}},15982:function(t,e,i){"use strict";i.d(e,{Or:()=>s,_j:()=>a,rd:()=>n});var r=i(66252);class n extends r.h{constructor(t,e,i,r,n){super("customAnimate",e,i,r),this.type="customAnimate",this.customFrom=t,this.params=n,this.from=t,this.to=e}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(e);this.onUpdate(t,r,i),this.syncAttributeUpdate()}setProps(t){this.props=t,this.propKeys=Object.keys(t),this.animate.reSyncProps()}}class s extends n{completeBind(t){this.setStartTime(0),this._animator&&this._animator.start(),this.setDuration(t.getDuration())}stop(){this._animator&&this._animator.stop()}}class a extends n{constructor(t,e,i,r,n){super(t,e,i,r,n),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0,this._beforeStageRender=()=>{if(!this.willCallBeforeStageRender)return;this.willCallBeforeStageRender=!1;let t=this.target.stage,e=t.window.getContext().canvas.nativeCanvas,i=this.beforeStageRender(t,e);i&&this.renderToStage(t,i)},this._afterStageRender=()=>{if(!this.willCallAfterStageRender)return;this.willCallAfterStageRender=!1;let t=this.target.stage,e=t.window.getContext().canvas.nativeCanvas,i=this.afterStageRender(t,e);i&&this.renderToStage(t,i)},this.props={}}beforeStageRender(t,e){return!1}afterStageRender(t,e){return!1}onFirstRun(){super.onFirstRun(),this.target.stage.setBeforeRender(this._beforeStageRender),this.target.stage.setAfterRender(this._afterStageRender),this.target.stage.disableDirtyBounds()}stop(){super.stop(),this.target.stage.removeBeforeRender(this._beforeStageRender),this.target.stage.removeAfterRender(this._afterStageRender)}onUpdate(t,e,i){super.onUpdate(t,e,i),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0}renderToStage(t,e){let i=t.window.getContext().canvas.nativeCanvas,r=i.getContext("2d");return!!r&&(r.clearRect(0,0,i.width,i.height),r.drawImage(e,0,0),i)}}},43453:function(t,e,i){"use strict";i.d(e,{Hp:()=>et});var r=i(67412),n=i(15982);class s extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i;super.onBind();let r=this.target.getFinalAttribute(),n=null!=(t=this.target.attribute)?t:{},s={},a=null!=(e=this.from)?e:{};this.keys.forEach(t=>{var e,i,o;s[t]=null!=(e=null==r?void 0:r[t])?e:1,a[t]=null!=(o=null!=(i=a[t])?i:n[t])?o:0});let o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),this.props=s,this.propKeys=this.keys,this.from=a,this.to=s,!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(a)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class a extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){super.onBind();let t=this.target.attribute,e={},i={};this.keys.forEach(r=>{var n;e[r]=0,i[r]=null!=(n=t[r])?n:1}),this.props=e,this.propKeys=this.keys,this.from=i,this.to=e,Object.assign(this.target.attribute,i),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class o extends s{constructor(t,e,i,r,n){super(t,e,i,r,n),this.keys=["clipRange"],this.from={clipRange:0}}onFirstRun(){var t;super.onFirstRun();let{clipDimension:e}=(null==(t=this.params)?void 0:t.options)||{};e&&(this.target.attribute.clipRangeByDimension=e)}}class l extends a{constructor(t,e,i,r,n){super(t,e,i,r,n),this.keys=["clipRange"]}}class h extends s{constructor(t,e,i,r,n){super(t,e,i,r,n),this.keys=["opacity","fillOpacity","strokeOpacity"],this.from={opacity:0,fillOpacity:0,strokeOpacity:0}}}class u extends a{constructor(t,e,i,r,n){super(t,e,i,r,n),this.keys=["opacity","fillOpacity","strokeOpacity"]}}var c=i(4654);let d=(t,e,i)=>{let r=t.getFinalAttribute();return e&&"anticlockwise"===e.orient?{from:{startAngle:null==r?void 0:r.endAngle},to:{startAngle:null==r?void 0:r.startAngle}}:{from:{endAngle:null==r?void 0:r.startAngle},to:{endAngle:null==r?void 0:r.endAngle}}},p=(t,e,i)=>{let r=t.getFinalAttribute();if(e&&"anticlockwise"===e.orient){let t=(0,c.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:t,endAngle:t},to:{startAngle:null==r?void 0:r.startAngle,endAngle:null==r?void 0:r.endAngle}}}let n=(0,c.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:n,endAngle:n},to:{startAngle:null==r?void 0:r.startAngle,endAngle:null==r?void 0:r.endAngle}}},f=(t,e,i)=>{var r;return!1!==(null!=(r=null==e?void 0:e.overall)&&r)?p(t,e):d(t,e)},g=(t,e,i)=>{let r=t.attribute;return e&&"anticlockwise"===e.orient?{from:{startAngle:r.startAngle},to:{startAngle:null==r?void 0:r.endAngle}}:{from:{endAngle:r.endAngle},to:{endAngle:null==r?void 0:r.startAngle}}},m=(t,e,i)=>{let r=t.attribute;if(e&&"anticlockwise"===e.orient){let t=(0,c.Z)(e.overall)?e.overall:2*Math.PI;return{from:{startAngle:r.startAngle,endAngle:r.endAngle},to:{startAngle:t,endAngle:t}}}let n=(0,c.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{startAngle:r.startAngle,endAngle:r.endAngle},to:{startAngle:n,endAngle:n}}};class y extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}determineUpdateFunction(){this.propKeys?this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:"startAngle"===this.propKeys[0]?this._updateFunction=this.updateStartAngle:"endAngle"===this.propKeys[0]?this._updateFunction=this.updateEndAngle:this.valid=!1:this.valid=!1}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];let e=this.propKeys.indexOf(t);-1!==e&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:"startAngle"===this.propKeys[0]?this._updateFunction=this.updateStartAngle:"endAngle"===this.propKeys[0]?this._updateFunction=this.updateEndAngle:this._updateFunction=null}updateStartAngle(t){this.target.attribute.startAngle=this.from.startAngle+(this.to.startAngle-this.from.startAngle)*t}updateEndAngle(t){this.target.attribute.endAngle=this.from.endAngle+(this.to.endAngle-this.from.endAngle)*t}updateAngle(t){this.updateStartAngle(t),this.updateEndAngle(t)}onUpdate(t,e,i){this._updateFunction&&(this._updateFunction(e),this.target.addUpdateShapeAndBoundsTag())}}class v extends y{onBind(){var t,e,i;super.onBind();let{from:r,to:n}=f(this.target,this.params.options,this.params),s=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:r;this.props=n,this.propKeys=Object.keys(n).filter(t=>null!=n[t]),this.from=s,this.to=n;let a=this.target.getFinalAttribute();a&&this.target.setAttributes(a),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(s),this.determineUpdateFunction()}}class b extends y{onBind(){var t,e,i;super.onBind();let{from:r,to:n}=(t=this.target,e=this.params.options,this.params,!1!==(null!=(i=null==e?void 0:e.overall)&&i)?m(t,e):g(t,e));this.props=n,this.propKeys=Object.keys(n).filter(t=>null!=n[t]),this.from=null!=r?r:this.target.attribute,this.to=n,this.determineUpdateFunction()}}var x=i(64776);let _=(t,e,i)=>{let r=t.getFinalAttribute();switch(null==e?void 0:e.direction){case"x":{let t=r.x,e=r.x1,i=r.width;return{from:(0,x.Z)(i)?{x:t+i/2,x1:void 0,width:0}:{x:(t+e)/2,x1:(t+e)/2,width:void 0},to:{x:t,x1:e,width:i}}}case"y":{let t=r.y,e=r.y1,i=r.height;return{from:(0,x.Z)(i)?{y:t+i/2,y1:void 0,height:0}:{y:(t+e)/2,y1:(t+e)/2,height:void 0},to:{y:t,y1:e,height:i}}}default:{let t=r.x,e=r.x1,i=r.width,n=r.y,s=r.y1,a=r.height,o={};return(0,x.Z)(i)?(o.x=t+i/2,o.width=0,o.x1=void 0):(o.x=(t+e)/2,o.x1=(t+e)/2,o.width=void 0),(0,x.Z)(a)?(o.y=n+a/2,o.height=0,o.y1=void 0):(o.y=(n+s)/2,o.y1=(n+s)/2,o.height=void 0),{from:o,to:{x:t,y:n,x1:e,y1:s,width:i,height:a}}}}},w=(t,e,i)=>{let r=t.attribute;switch(null==e?void 0:e.direction){case"x":{let t=r.x,e=r.x1,i=r.width;return{to:(0,x.Z)(i)?{x:t+i/2,x1:void 0,width:0}:{x:(t+e)/2,x1:(t+e)/2,width:void 0}}}case"y":{let t=r.y,e=r.y1,i=r.height;return{to:(0,x.Z)(i)?{y:t+i/2,y1:void 0,height:0}:{y:(t+e)/2,y1:(t+e)/2,height:void 0}}}default:{let t=r.x,e=r.y,i=r.x1,n=r.y1,s=r.width,a=r.height,o={};return(0,x.Z)(s)?(o.x=t+s/2,o.width=0,o.x1=void 0):(o.x=(t+i)/2,o.x1=(t+i)/2,o.width=void 0),(0,x.Z)(a)?(o.y=e+a/2,o.height=0,o.y1=void 0):(o.y=(e+n)/2,o.y1=(e+n)/2,o.height=void 0),{to:o}}}};class S extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i;super.onBind();let{from:r,to:n}=_(this.target,this.params.options,this.params),s=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:r;this.props=n,this.propKeys=Object.keys(n).filter(t=>null!=n[t]),this.from=s,this.to=n;let a=this.target.getFinalAttribute();a&&this.target.setAttributes(a),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(s)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class A extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){super.onBind();let{from:t,to:e}=w(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter(t=>null!=e[t]),this.from=null!=t?t:this.target.attribute,this.to=e}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}var C=i(54326);let D=(t,e,i)=>{var r;return!1!==(null!=(r=null==e?void 0:e.overall)&&r)?function(t,e,i){var r,n,s;let a,o=t.getFinalAttribute(),l=o.y,h=o.y1,u=o.height;return e&&"negative"===e.orient?(0,c.Z)(e.overall)?a=e.overall:i.group?(a=null!=(s=null!=(r=i.groupHeight)?r:null==(n=e.layoutRect)?void 0:n.height)?s:i.group.getBounds().height(),i.groupHeight=a):a=i.height:a=(0,c.Z)(null==e?void 0:e.overall)?e.overall:0,{from:{y:a,y1:(0,C.Z)(h)?void 0:a,height:(0,C.Z)(u)?void 0:0},to:{y:l,y1:h,height:u}}}(t,e,i):function(t,e,i){let r=t.getFinalAttribute(),n=r.y,s=r.y1,a=r.height;if(e&&"negative"===e.orient){let t=(0,x.Z)(a)?Math.max(n,n+a):Math.max(n,s);return{from:{y:t,y1:(0,C.Z)(s)?void 0:t,height:(0,C.Z)(a)?void 0:0},to:{y:n,y1:s,height:a}}}let o=(0,x.Z)(a)?Math.min(n,n+a):Math.min(n,s);return{from:{y:o,y1:(0,C.Z)(s)?void 0:o,height:(0,C.Z)(a)?void 0:0},to:{y:n,y1:s,height:a}}}(t,e,0)};class T extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i;super.onBind();let{from:r,to:n}=D(this.target,this.params.options,this.params),s=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:r;this.props=n,this.propKeys=Object.keys(n).filter(t=>null!=n[t]),this.from=s,this.to=n;let a=this.target.getFinalAttribute();a&&this.target.setAttributes(a),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(s)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class B extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i,r;super.onBind();let{from:n,to:s}=(t=this.target,e=this.params.options,i=this.params,!1!==(null!=(r=null==e?void 0:e.overall)&&r)?function(t,e,i){var r,n,s;let a,o=t.getFinalAttribute(),l=o.y1,h=o.height;return e&&"negative"===e.orient?(0,c.Z)(e.overall)?a=e.overall:i.group?(a=null!=(s=null!=(r=i.groupHeight)?r:null==(n=e.layoutRect)?void 0:n.height)?s:i.group.getBounds().height(),i.groupHeight=a):a=i.height:a=(0,c.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{y:a,y1:(0,C.Z)(l)?void 0:a,height:(0,C.Z)(h)?void 0:0}}}(t,e,i):function(t,e,i){let r=t.getFinalAttribute(),n=r.y,s=r.y1,a=r.height;if(e&&"negative"===e.orient){let t=(0,x.Z)(a)?Math.max(n,n+a):Math.max(n,s);return{to:{y:t,y1:(0,C.Z)(s)?void 0:t,height:(0,C.Z)(a)?void 0:0}}}let o=(0,x.Z)(a)?Math.min(n,n+a):Math.min(n,s);return{to:{y:o,y1:(0,C.Z)(s)?void 0:o,height:(0,C.Z)(a)?void 0:0}}}(t,e,0));this.props=s,this.propKeys=Object.keys(s).filter(t=>null!=s[t]),this.from=null!=n?n:this.target.attribute,this.to=s}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}var M=i(19626),E=i(89530);let k=(t,e,i)=>{let r=t.getFinalAttribute().points,n={x:0,y:0};return r.forEach(t=>{n.x+=t.x,n.y+=t.y}),n.x/=r.length,n.y/=r.length,e&&e.center&&((0,E.Z)(e.center.x)&&(n.x=e.center.x),(0,E.Z)(e.center.y)&&(n.y=e.center.y)),"area"===t.type&&(n.x1=n.x,n.y1=n.y),r.map(t=>Object.assign({},t,n))},F=(t,e,i)=>{let r=t.getFinalAttribute();return{from:{points:k(t,e)},to:{points:r.points}}};class R extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onUpdate(t,e,i){var r,n;let s=null==(r=this.from)?void 0:r.points,a=null==(n=this.to)?void 0:n.points;s&&a&&(this.target.attribute.points=s.map((t,i)=>(0,M.q9)(s[i],a[i],e)),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag())}}class P extends R{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:e,to:i}=F(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}else this.valid=!1}}class O extends R{onBind(){var t,e;if(super.onBind(),["area","line"].includes(this.target.type)){let i=this.target.getFinalAttribute(),{from:r,to:n}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:k(t,e)}});this.props=n,this.propKeys=Object.keys(n).filter(t=>null!=n[t]),this.from=r||i,this.to=n}else this.valid=!1}}let L=(t,e,i)=>t.getFinalAttribute().points.map(i=>{if(e&&"negative"===e.orient){let e=t.stage.viewWidth;return t.parent.parent.parent&&(e=t.parent.parent.parent.AABBBounds.width()),Object.assign(Object.assign({},i),{x:e,y:i.y,x1:e,y1:i.y1,defined:!1!==i.defined})}return Object.assign(Object.assign({},i),{x:0,y:i.y,x1:0,y1:i.y1,defined:!1!==i.defined})}),I=(t,e,i)=>{let r=t.getFinalAttribute();return{from:{points:L(t,e)},to:{points:r.points}}};class z extends R{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:e,to:i}=I(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}else this.valid=!1}}class Z extends R{onBind(){var t,e;if(super.onBind(),["area","line"].includes(this.target.type)){let i=this.target.getFinalAttribute(),{from:r,to:n}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:L(t,e)}});this.props=n,this.propKeys=Object.keys(n).filter(t=>null!=n[t]),this.from=r||i,this.to=n}else this.valid=!1}}let j=(t,e,i)=>t.getFinalAttribute().points.map(i=>{if(e&&"negative"===e.orient){let e=t.stage.viewHeight;return t.parent.parent.parent&&(e=t.parent.parent.parent.AABBBounds.height()),Object.assign(Object.assign({},i),{x:i.x,y:e,x1:i.x1,y1:e,defined:!1!==i.defined})}return Object.assign(Object.assign({},i),{x:i.x,y:0,x1:i.x1,y1:0,defined:!1!==i.defined})}),W=(t,e,i)=>{let r=t.getFinalAttribute();return{from:{points:j(t,e)},to:{points:r.points}}};class U extends R{onBind(){var t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:e,to:i}=W(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}else this.valid=!1}}class N extends R{onBind(){var t,e;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:i,to:r}=(t=this.target,e=this.params.options,this.params,{from:{points:t.getFinalAttribute().points},to:{points:j(t,e)}});this.props=r,this.propKeys=Object.keys(r).filter(t=>null!=r[t]),this.from=null!=i?i:this.target.attribute,this.to=r}else this.valid=!1}}let H=(t,e,i)=>{let r=t.getFinalAttribute();return e&&"inside"===e.orient?{from:{innerRadius:null==r?void 0:r.outerRadius},to:{innerRadius:null==r?void 0:r.innerRadius}}:{from:{outerRadius:null==r?void 0:r.innerRadius},to:{outerRadius:null==r?void 0:r.outerRadius}}},G=(t,e,i)=>{let r=t.getFinalAttribute(),n=(0,c.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:n,outerRadius:n},to:{innerRadius:null==r?void 0:r.innerRadius,outerRadius:null==r?void 0:r.outerRadius}}},V=(t,e,i)=>{var r;return!1!==(null!=(r=null==e?void 0:e.overall)&&r)?G(t,e):H(t,e)},X=(t,e,i)=>{let r=t.getFinalAttribute();return e&&"inside"===e.orient?{from:{innerRadius:null==r?void 0:r.innerRadius},to:{innerRadius:null==r?void 0:r.outerRadius}}:{from:{outerRadius:null==r?void 0:r.outerRadius},to:{outerRadius:null==r?void 0:r.innerRadius}}},Y=(t,e,i)=>{let r=t.getFinalAttribute(),n=(0,c.Z)(null==e?void 0:e.overall)?e.overall:0;return{from:{innerRadius:null==r?void 0:r.innerRadius,outerRadius:null==r?void 0:r.outerRadius},to:{innerRadius:n,outerRadius:n}}};class $ extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class q extends ${onBind(){var t,e,i;super.onBind();let{from:r,to:n}=V(this.target,this.params.options,this.params),s=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:r;this.props=n,this.propKeys=Object.keys(n).filter(t=>null!=n[t]),this.from=s,this.to=n;let a=this.target.getFinalAttribute();a&&this.target.setAttributes(a),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(s)}}class K extends ${onBind(){var t,e,i;super.onBind();let{to:r}=(t=this.target,e=this.params.options,this.params,!1!==(null!=(i=null==e?void 0:e.overall)&&i)?Y(t,e):X(t,e));this.props=r,this.propKeys=Object.keys(r).filter(t=>null!=r[t]),this.from=this.target.attribute,this.to=r}}let Q=(t,e,i)=>{var r;return!1!==(null!=(r=null==e?void 0:e.overall)&&r)?function(t,e,i){var r;let n,s=t.getFinalAttribute(),a=s.x,o=s.x1,l=s.width;return e&&"negative"===e.orient?(0,c.Z)(e.overall)?n=e.overall:i.group?(n=null!=(r=i.groupWidth)?r:i.group.getBounds().width(),i.groupWidth=n):n=i.width:n=(0,c.Z)(null==e?void 0:e.overall)?null==e?void 0:e.overall:0,{from:{x:n,x1:(0,C.Z)(o)?void 0:n,width:(0,C.Z)(l)?void 0:0},to:{x:a,x1:o,width:l}}}(t,e,i):function(t,e,i){let r=t.getFinalAttribute(),n=r.x,s=r.x1,a=r.width;if(e&&"negative"===e.orient){let t=(0,x.Z)(a)?Math.max(n,n+a):Math.max(n,s);return{from:{x:t,x1:(0,C.Z)(s)?void 0:t,width:(0,C.Z)(a)?void 0:0},to:{x:n,x1:s,width:a}}}let o=(0,x.Z)(a)?Math.min(n,n+a):Math.min(n,s);return{from:{x:o,x1:(0,C.Z)(s)?void 0:o,width:(0,C.Z)(a)?void 0:0},to:{x:n,x1:s,width:a}}}(t,e,0)};class J extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i;super.onBind();let{from:r,to:n}=Q(this.target,this.params.options,this.params),s=null!=(e=null==(t=this.target.context)?void 0:t.lastAttrs)?e:r;this.props=n,this.propKeys=Object.keys(n).filter(t=>null!=n[t]),this.from=s,this.to=n;let a=this.target.getFinalAttribute();a&&this.target.setAttributes(a),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(s)}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tt extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i,r;super.onBind();let{from:n,to:s}=(t=this.target,e=this.params.options,i=this.params,!1!==(null!=(r=null==e?void 0:e.overall)&&r)?function(t,e,i){var r;let n,s=t.getFinalAttribute(),a=s.x1,o=s.width;return e&&"negative"===e.orient?(0,c.Z)(e.overall)?n=e.overall:i.group?(n=null!=(r=i.groupWidth)?r:i.group.getBounds().width(),i.groupWidth=n):n=i.width:n=(0,c.Z)(null==e?void 0:e.overall)?e.overall:0,{to:{x:n,x1:(0,C.Z)(a)?void 0:n,width:(0,C.Z)(o)?void 0:0}}}(t,e,i):function(t,e,i){let r=t.getFinalAttribute(),n=r.x,s=r.x1,a=r.width;if(e&&"negative"===e.orient){let t=(0,x.Z)(a)?Math.max(n,n+a):Math.max(n,s);return{to:{x:t,x1:(0,C.Z)(s)?void 0:t,width:(0,C.Z)(a)?void 0:0}}}let o=(0,x.Z)(a)?Math.min(n,n+a):Math.min(n,s);return{to:{x:o,x1:(0,C.Z)(s)?void 0:o,width:(0,C.Z)(a)?void 0:0}}}(t,e,0));this.props=s,this.propKeys=Object.keys(s).filter(t=>null!=s[t]),this.from=null!=n?n:this.target.attribute,this.to=s}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class te extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.fromText="",this.toText="",this.showCursor=!1,this.cursorChar="|",this.blinkCursor=!0,this.beforeText="",this.afterText="",void 0!==(null==n?void 0:n.showCursor)&&(this.showCursor=n.showCursor),void 0!==(null==n?void 0:n.cursorChar)&&(this.cursorChar=n.cursorChar),void 0!==(null==n?void 0:n.blinkCursor)&&(this.blinkCursor=n.blinkCursor),void 0!==(null==n?void 0:n.beforeText)&&(this.beforeText=n.beforeText),void 0!==(null==n?void 0:n.afterText)&&(this.afterText=n.afterText)}onFirstRun(){var t,e;let i=this.getLastProps(),r=this.getEndProps(),n=null!=(t=i.text)?t:"",s=null!=(e=r.text)?e:"";this.valid=!0,this.fromText=n.toString(),this.toText=s.toString(),this.toText||""===this.toText||(this.valid=!1)}onEnd(t){super.onEnd(t),t||(this.showCursor&&!this.blinkCursor?this.target.setAttribute("text",this.beforeText+this.toText+this.cursorChar+this.afterText):this.target.setAttribute("text",this.beforeText+this.toText+this.afterText))}onUpdate(t,e,i){let r,n;if(!this.valid)return;let s=this.toText.length,a=this.fromText.length;a>s?(r=Math.round(a-(a-s)*e),n=this.fromText.substring(0,r)):(r=Math.round(a+(s-a)*e),n=this.toText.startsWith(this.fromText)?this.toText.substring(0,r):r<=a?this.fromText.substring(0,r):this.toText.substring(0,r-a+Math.min(a,r)));let o=this.beforeText+n+this.afterText;this.showCursor&&(this.blinkCursor?Math.floor(e/.1)%2==0&&(o=this.beforeText+n+this.cursorChar+this.afterText):o=this.beforeText+n+this.cursorChar+this.afterText),this.target.setAttribute("text",o)}}var ti=i(1444);class tr extends n.Or{onBind(){let t,e;super.onBind();let i=(0,ti.L)(this.target);this._animator=i;let r=this.duration,n=this.easing,s=this.target,{symbolStartOuterType:a="scale",titleType:o="typewriter",titlePanelType:l="scale"}=this.params,h=r/10;if(s._symbolStart.setAttributes({scaleX:0,scaleY:0}),i.animate(s._symbolStart,{type:"to",to:{scaleX:1,scaleY:1},duration:5*h,easing:n}),"scale"===a?(t={scaleX:0,scaleY:0},e={scaleX:1,scaleY:1}):(t={clipRange:0},e={clipRange:1}),s._symbolStartOuter.setAttributes(t),i.animate(s._symbolStartOuter,{type:"to",to:e,duration:5*h,easing:n}),s._symbolEnd.setAttributes({scaleX:0,scaleY:0}),i.animate(s._symbolEnd,{type:"to",to:{scaleX:1,scaleY:1},duration:2*h,delay:8*h,easing:n}),s._line.setAttributes({clipRange:0}),i.animate(s._line,{type:"to",to:{clipRange:1},duration:9*h,easing:n}),"typewriter"===o){let t=s._titleTop.attribute.text;s._titleTop.setAttributes({text:""}),i.animate(s._titleTop,{type:"custom",delay:5*h,duration:4*h,easing:"linear",to:{text:t},custom:te});let e=s._titleBottom.attribute.text;s._titleBottom.setAttributes({text:""}),i.animate(s._titleBottom,{type:"custom",delay:5*h,duration:4*h,easing:"linear",to:{text:e},custom:te})}else s._titleTop.setAttributes({dy:s._titleTop.AABBBounds.height()+10}),i.animate(s._titleTop,{type:"to",to:{dy:0},delay:5*h,duration:4*h,easing:"linear"}),s._titleBottom.setAttributes({dy:-(10+s._titleBottom.AABBBounds.height())}),i.animate(s._titleBottom,{type:"to",to:{dy:0},delay:5*h,duration:4*h,easing:"linear"});"scale"===l?[s._titleTopPanel,s._titleBottomPanel].forEach(t=>{var e;let s=null!=(e=t.attribute.scaleX)?e:1;t.setAttributes({scaleX:0}),i.animate(t,{type:"to",to:{scaleX:s},duration:r,easing:n})}):"stroke"===l&&[s._titleTopPanel,s._titleBottomPanel].forEach(t=>{let e=t.AABBBounds,s=2*(e.width()+e.height());t.setAttributes({lineDash:[0,10*s]}),i.animate(t,{type:"to",to:{lineDash:[s,10*s]},duration:r,easing:n})}),this.completeBind(i)}}class tn extends n.Or{onBind(){super.onBind();let t=(0,ti.L)(this.target);this._animator=t;let e=this.duration,i=this.easing,r=this.target,{mode:n}=this.params;"scale"===n?t.animate(r._symbolStart,{type:"to",to:{scaleX:0,scaleY:0},duration:e,easing:i}):(t.animate(r._line,{type:"to",to:{clipRange:0},duration:e,easing:i}),t.animate(r._symbolStart,{type:"to",to:{scaleX:0,scaleY:0},duration:e/2,delay:e/2,easing:i}),t.animate(r._symbolEnd,{type:"to",to:{scaleX:0,scaleY:0},duration:e,easing:i}),t.animate(r._titleTop,{type:"to",to:{dy:r._titleTop.AABBBounds.height()+10},duration:e/2,easing:i}),t.animate(r._titleBottom,{type:"to",to:{dy:-(10+r._titleBottom.AABBBounds.height())},duration:e/2,easing:i}),t.animate(r._symbolStartOuter,{type:"to",to:{clipRange:0},duration:e/2,delay:e/2,easing:i}),t.animate(r._titleTopPanel,{type:"to",to:{scaleX:0},duration:e,easing:i}),t.animate(r._titleBottomPanel,{type:"to",to:{scaleX:0},duration:e,easing:i})),this.completeBind(t)}}class ts extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.formatTemplate=null,this.decimalLength=null==n?void 0:n.decimalLength,(null==n?void 0:n.formatTemplate)&&n.formatTemplate.includes("{{var}}")&&(this.formatTemplate=n.formatTemplate)}onFirstRun(){var t,e,i;let r=this.getLastProps(),n=this.getEndProps(),s=null!=(t=r.text)?t:0,a=null!=(e=n.text)?e:0;this.valid=!0;let o=0,l=0,h="",u="",c=0;if("number"==typeof s)o=s,c=Math.max(c,(s.toString().split(".")[1]||"").length);else{if("string"!=typeof s)return void(this.valid=!1);if(s.endsWith("%")){h="%";let t=s.substring(0,s.length-1).replace(/,/g,"");if(isNaN(o=parseFloat(t)/100))return void(this.valid=!1);c=Math.max(c,(t.split(".")[1]||"").length+2)}else{let t=s.replace(/,/g,"");if(isNaN(o=parseFloat(t)))return void(this.valid=!1);s.includes(",")&&(h=","),c=Math.max(c,(t.split(".")[1]||"").length)}}if("number"==typeof a)l=a,c=Math.max(c,(a.toString().split(".")[1]||"").length);else{if("string"!=typeof a)return void(this.valid=!1);if(a.endsWith("%")){u="%";let t=a.substring(0,a.length-1).replace(/,/g,"");if(isNaN(l=parseFloat(t)/100))return void(this.valid=!1);c=Math.max(c,(t.split(".")[1]||"").length+2)}else{let t=a.replace(/,/g,"");if(isNaN(l=parseFloat(t)))return void(this.valid=!1);a.includes(",")&&(u=","),c=Math.max(c,(t.split(".")[1]||"").length)}}if(null==(i=this.params)?void 0:i.format){switch(this.params.format){case"percent":this.format="%";break;case"thousandth":this.format=",";break;case"none":this.format="";break;default:this.format=u||h}"%"===this.format&&"%"!==u&&"%"!==h&&void 0===this.decimalLength&&(this.decimalLength=2),"%"===this.format||"%"!==u&&"%"!==h||(o*=100,l*=100)}else this.format=u||h;this.fromNumber=o,this.toNumber=l,void 0===this.decimalLength&&(this.decimalLength=c)}onEnd(t){super.onEnd(t),t||this.props&&this.target.setAttributes(this.props)}onUpdate(t,e,i){if(!this.valid)return;let r=this.fromNumber+(this.toNumber-this.fromNumber)*e,n="",s=this.format,a=("%"===s?100*r:r).toFixed(this.decimalLength),o,l=a;if(parseFloat(a)===Math.floor(parseFloat(a))&&(l=Math.floor(parseFloat(a))),"%"===s)o=`${l}%`;else if(","===s){let t=l.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),o=t.join(".")}else o=l;n=this.formatTemplate?this.formatTemplate.replace("{{var}}",o.toString()):o,this.target.setAttribute("text",n)}}class ta extends n.Or{onBind(){super.onBind();let t=(0,ti.L)(this.target);this._animator=t;let e=this.duration,i=this.easing,r=this.target,{wave:n}=this.params;if(r.setAttributes({scaleX:0,scaleY:0}),t.animate(r,{type:"to",to:{scaleX:1,scaleY:1},duration:e/3*2,easing:i}),r.titleShape&&t.animate(r.titleShape,{type:"custom",to:{text:r.titleShape.attribute.text},duration:e,easing:i,custom:te}),r.contentShape&&t.animate(r.contentShape,{type:"custom",to:{text:r.contentShape.attribute.text},duration:e,easing:i,custom:te}),n){let s=e/6;t.animate(r.group,{timeSlices:[{duration:s,effects:{type:"to",to:{angle:n},easing:i}},{duration:2*s,effects:{type:"to",to:{angle:-n},easing:i}},{duration:2*s,effects:{type:"to",to:{angle:n},easing:i}},{duration:s,effects:{type:"to",to:{angle:0},easing:i}}]})}this.completeBind(t)}}class to extends n.Or{onBind(){super.onBind();let t=(0,ti.L)(this.target);this._animator=t;let e=this.duration,i=this.easing,r=this.target;t.animate(r,{type:"to",to:{scaleX:0,scaleY:0},duration:e,easing:i}),this.completeBind(t)}}var tl=i(47634);class th extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.showCursor=!1,this.cursorChar="|",this.blinkCursor=!0,this.fadeInChars=!1,this.fadeInDuration=.3,this.strokeFirst=!1,this.strokeToFillRatio=.3,void 0!==(null==n?void 0:n.showCursor)&&(this.showCursor=n.showCursor),void 0!==(null==n?void 0:n.cursorChar)&&(this.cursorChar=n.cursorChar),void 0!==(null==n?void 0:n.blinkCursor)&&(this.blinkCursor=n.blinkCursor),void 0!==(null==n?void 0:n.fadeInChars)&&(this.fadeInChars=n.fadeInChars),void 0!==(null==n?void 0:n.fadeInDuration)&&(this.fadeInDuration=n.fadeInDuration),void 0!==(null==n?void 0:n.strokeFirst)&&(this.strokeFirst=n.strokeFirst),void 0!==(null==n?void 0:n.strokeToFillRatio)&&(this.strokeToFillRatio=n.strokeToFillRatio)}onFirstRun(){let t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=e.textConfig?[...e.textConfig]:[],this.valid=!0,this.originalTextConfig&&0!==this.originalTextConfig.length?(this.fromTextConfig=t.textConfig&&t.textConfig.length>0?tl.H.TransformTextConfig2SingleCharacter(t.textConfig):[],this.toTextConfig=tl.H.TransformTextConfig2SingleCharacter(this.originalTextConfig)):this.valid=!1}onEnd(t){super.onEnd(t),t||this.target.setAttribute("textConfig",this.originalTextConfig)}onUpdate(t,e,i){let r,n;if(!this.valid)return;let s=this.toTextConfig.length,a=this.fromTextConfig.length,o=this.fadeInChars?1-this.fadeInDuration:1;if(r=a>s?Math.round(a-(a-s)*e):this.fadeInChars?Math.round(a+(s-a)*Math.min(1,e/o)):Math.round(a+(s-a)*e),n=a>s?this.fromTextConfig.slice(0,r):this.toTextConfig.slice(0,r).map((t,i)=>{if("text"in t){let r=Object.assign({},t);if(this.strokeFirst){let t=i/s*o,n=Math.max(0,e-t),a=1-t,l=Math.min(1,n/(this.strokeToFillRatio*a));"fill"in r&&r.fill&&(r.stroke=r.fill,l<1&&(r.fillOpacity=l)),this.fadeInChars&&(r.opacity=Math.max(0,Math.min(1,Math.min(1,n/(this.fadeInDuration*a)))))}else this.fadeInChars&&(r.opacity=Math.max(0,Math.min(1,(e-i/s*o)/this.fadeInDuration)));return r}return t}),this.showCursor&&r<s){let t=!0;if(this.blinkCursor&&(t=Math.floor(e/.1)%2==0),t&&n.length>0){let t=n.length-1,e=n[t];if("text"in e)n[t]=Object.assign(Object.assign({},e),{text:String(e.text)+this.cursorChar});else{let t={text:this.cursorChar,fontSize:16};n.push(t)}}}this.target.setAttribute("textConfig",n)}}class tu extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.showCursor=!1,this.cursorChar="|",this.blinkCursor=!0,this.beforeText="",this.afterText="",this.fadeOutChars=!1,this.fadeOutDuration=.3,this.direction="backward",void 0!==(null==n?void 0:n.showCursor)&&(this.showCursor=n.showCursor),void 0!==(null==n?void 0:n.cursorChar)&&(this.cursorChar=n.cursorChar),void 0!==(null==n?void 0:n.blinkCursor)&&(this.blinkCursor=n.blinkCursor),void 0!==(null==n?void 0:n.beforeText)&&(this.beforeText=n.beforeText),void 0!==(null==n?void 0:n.afterText)&&(this.afterText=n.afterText),void 0!==(null==n?void 0:n.fadeOutChars)&&(this.fadeOutChars=n.fadeOutChars),void 0!==(null==n?void 0:n.fadeOutDuration)&&(this.fadeOutDuration=n.fadeOutDuration),void 0!==(null==n?void 0:n.direction)&&(this.direction=n.direction),this.propKeys=["textConfig"]}onFirstRun(){let t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=t.textConfig?[...t.textConfig]:[],this.valid=!0,this.originalTextConfig&&0!==this.originalTextConfig.length?(this.fromTextConfig=tl.H.TransformTextConfig2SingleCharacter(this.originalTextConfig),this.toTextConfig=e.textConfig&&e.textConfig.length>0?tl.H.TransformTextConfig2SingleCharacter(e.textConfig):[]):this.valid=!1}onEnd(t){super.onEnd(t),t||(this.toTextConfig.length>0?this.target.setAttribute("textConfig",this.toTextConfig):this.target.setAttribute("textConfig",[]))}onUpdate(t,e,i){let r;if(!this.valid)return;let n=this.fromTextConfig.length,s=this.fadeOutChars?1-this.fadeOutDuration:1;if("forward"===this.direction){r=this.fadeOutChars?Math.round(n*(1-Math.min(1,e/s))):Math.round(n*(1-e));let t="forward"===this.direction?this.fromTextConfig.slice(n-r):this.fromTextConfig.slice(0,r);this.fadeOutChars&&(t=this.applyFadeEffect(t,e,n,r)),this.showCursor&&r>0&&(t=this.addCursor(t,e)),this.target.setAttribute("textConfig",t)}else{r=this.fadeOutChars?Math.round(n*(1-Math.min(1,e/s))):Math.round(n*(1-e));let t=this.fromTextConfig.slice(0,r);this.fadeOutChars&&(t=this.applyFadeEffect(t,e,n,r)),this.showCursor&&r>0&&(t=this.addCursor(t,e)),this.target.setAttribute("textConfig",t)}}applyFadeEffect(t,e,i,r){this.direction;let n=Math.max(0,1-Math.min(1,(e-(1-this.fadeOutDuration))/this.fadeOutDuration));return t.map((e,i)=>{if("forward"===this.direction){if(0===i&&"text"in e)return Object.assign(Object.assign({},e),{opacity:n})}else if(i===t.length-1&&"text"in e)return Object.assign(Object.assign({},e),{opacity:n});return e})}addCursor(t,e){let i=!0;if(this.blinkCursor&&(i=Math.floor(e/.1)%2==0),i&&t.length>0){let e="forward"===this.direction?0:t.length-1,i=t[e];if("text"in i){let r=[...t];return"forward"===this.direction?r[e]=Object.assign(Object.assign({},i),{text:this.cursorChar+String(i.text)}):r[e]=Object.assign(Object.assign({},i),{text:String(i.text)+this.cursorChar}),r}}return t}}class tc extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.singleCharConfig=[],this.fadeInDuration=.3,this.slideDirection="right",this.slideDistance=30,this.wordByWord=!1,this.wordRegex=/[a-zA-Z]+(-[a-zA-Z]+)*|[\u4e00-\u9fa5]+|[0-9]+|[^\s\w\u4e00-\u9fa5]/g,this.wordGroups=[],void 0!==(null==n?void 0:n.fadeInDuration)&&(this.fadeInDuration=n.fadeInDuration),void 0!==(null==n?void 0:n.slideDirection)&&(this.slideDirection=n.slideDirection),void 0!==(null==n?void 0:n.slideDistance)&&(this.slideDistance=n.slideDistance),void 0!==(null==n?void 0:n.wordByWord)&&(this.wordByWord=n.wordByWord),void 0!==(null==n?void 0:n.wordRegex)&&(this.wordRegex=n.wordRegex)}onFirstRun(){let t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=e.textConfig?[...e.textConfig]:[],this.valid=!0,this.originalTextConfig&&0!==this.originalTextConfig.length?(this.fromTextConfig=t.textConfig&&t.textConfig.length>0?tl.H.TransformTextConfig2SingleCharacter(t.textConfig):[],this.toTextConfig=tl.H.TransformTextConfig2SingleCharacter(this.originalTextConfig),this.singleCharConfig=this.toTextConfig.map(t=>"text"in t?Object.assign(Object.assign({},t),{opacity:0,dx:this.getInitialDx(),dy:this.getInitialDy()}):Object.assign(Object.assign({},t),{opacity:0})),this.wordByWord&&this.calculateWordGroups()):this.valid=!1}calculateWordGroups(){this.wordGroups=[];let t="",e={},i,r=0;for(this.toTextConfig.forEach((i,n)=>{if("text"in i){let s=String(i.text);t+=s,e[r]=n,r++}}),this.wordRegex.lastIndex=0;null!==(i=this.wordRegex.exec(t));){let t=i.index,r=i.index+i[0].length,n=[];for(let i=t;i<r;i++)void 0!==e[i]&&n.push(e[i]);n.length>0&&this.wordGroups.push(n)}let n=new Set;this.wordGroups.forEach(t=>{t.forEach(t=>n.add(t))});for(let t=0;t<this.toTextConfig.length;t++)"text"in this.toTextConfig[t]&&!n.has(t)&&this.wordGroups.push([t])}getInitialDx(){switch(this.slideDirection){case"left":return-this.slideDistance;case"right":return this.slideDistance;default:return 0}}getInitialDy(){switch(this.slideDirection){case"up":return-this.slideDistance;case"down":return this.slideDistance;default:return 0}}onEnd(t){super.onEnd(t),t||this.target.setAttribute("textConfig",this.originalTextConfig)}onUpdate(t,e,i){let r;if(!this.valid)return;let n=1-this.fadeInDuration;r=this.wordByWord&&this.wordGroups.length>0?this.updateByWord(e,n):this.updateByCharacter(e,n),this.target.setAttribute("textConfig",r)}updateByWord(t,e){let i=this.wordGroups.length,r=[...this.singleCharConfig];for(let n=0;n<this.wordGroups.length;n++){let s;if(t<(s="left"===this.slideDirection?(i-1-n)/i*e:n/i*e)){for(let t of this.wordGroups[n]){let e=r[t];"text"in e&&(r[t]=Object.assign(Object.assign({},e),{opacity:0,dx:this.getInitialDx(),dy:this.getInitialDy()}))}continue}let a=Math.max(0,Math.min(1,(t-s)/this.fadeInDuration)),o=this.getInitialDx()*(1-a),l=this.getInitialDy()*(1-a);for(let t of this.wordGroups[n]){let e=r[t];"text"in e&&(r[t]=Object.assign(Object.assign({},e),{opacity:a,dx:o,dy:l}))}}return r}updateByCharacter(t,e){let i=this.toTextConfig.length,r=[...this.singleCharConfig];for(let n=0;n<r.length;n++){let s=r[n];if("text"in s){let a;if(t<(a="left"===this.slideDirection?(i-1-n)/i*e:n/i*e)){r[n]=Object.assign(Object.assign({},s),{opacity:0,dx:this.getInitialDx(),dy:this.getInitialDy()});continue}let o=Math.max(0,Math.min(1,(t-a)/this.fadeInDuration)),l=this.getInitialDx()*(1-o),h=this.getInitialDy()*(1-o);r[n]=Object.assign(Object.assign({},s),{opacity:o,dx:l,dy:h})}}return r}}class td extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.fromTextConfig=[],this.toTextConfig=[],this.originalTextConfig=[],this.singleCharConfig=[],this.fadeOutDuration=.3,this.slideDirection="right",this.slideDistance=30,this.wordByWord=!1,this.wordRegex=/[a-zA-Z]+(-[a-zA-Z]+)*|[\u4e00-\u9fa5]+|[0-9]+|[^\s\w\u4e00-\u9fa5]/g,this.wordGroups=[],this.reverseOrder=!1,void 0!==(null==n?void 0:n.fadeOutDuration)&&(this.fadeOutDuration=n.fadeOutDuration),void 0!==(null==n?void 0:n.slideDirection)&&(this.slideDirection=n.slideDirection),void 0!==(null==n?void 0:n.slideDistance)&&(this.slideDistance=n.slideDistance),void 0!==(null==n?void 0:n.wordByWord)&&(this.wordByWord=n.wordByWord),void 0!==(null==n?void 0:n.wordRegex)&&(this.wordRegex=n.wordRegex),void 0!==(null==n?void 0:n.reverseOrder)&&(this.reverseOrder=n.reverseOrder),this.propKeys=["textConfig"]}onFirstRun(){let t=this.getLastProps(),e=this.getEndProps();this.originalTextConfig=t.textConfig?[...t.textConfig]:[],this.valid=!0,this.originalTextConfig&&0!==this.originalTextConfig.length?(this.fromTextConfig=tl.H.TransformTextConfig2SingleCharacter(this.originalTextConfig),this.toTextConfig=e.textConfig&&e.textConfig.length>0?tl.H.TransformTextConfig2SingleCharacter(e.textConfig):[],this.singleCharConfig=this.fromTextConfig.map(t=>"text"in t?Object.assign(Object.assign({},t),{opacity:1,dx:0,dy:0}):Object.assign(Object.assign({},t),{opacity:1})),this.wordByWord&&this.calculateWordGroups()):this.valid=!1}calculateWordGroups(){this.wordGroups=[];let t="",e={},i,r=0;for(this.fromTextConfig.forEach((i,n)=>{if("text"in i){let s=String(i.text);t+=s,e[r]=n,r++}}),this.wordRegex.lastIndex=0;null!==(i=this.wordRegex.exec(t));){let t=i.index,r=i.index+i[0].length,n=[];for(let i=t;i<r;i++)void 0!==e[i]&&n.push(e[i]);n.length>0&&this.wordGroups.push(n)}let n=new Set;this.wordGroups.forEach(t=>{t.forEach(t=>n.add(t))});for(let t=0;t<this.fromTextConfig.length;t++)"text"in this.fromTextConfig[t]&&!n.has(t)&&this.wordGroups.push([t])}getTargetDx(){switch(this.slideDirection){case"left":return-this.slideDistance;case"right":return this.slideDistance;default:return 0}}getTargetDy(){switch(this.slideDirection){case"up":return-this.slideDistance;case"down":return this.slideDistance;default:return 0}}onEnd(t){super.onEnd(t),t||(this.toTextConfig.length>0?this.target.setAttribute("textConfig",this.toTextConfig):this.target.setAttribute("textConfig",[]))}onUpdate(t,e,i){let r;if(!this.valid)return;let n=1-this.fadeOutDuration;r=this.wordByWord&&this.wordGroups.length>0?this.updateByWord(e,n):this.updateByCharacter(e,n),this.target.setAttribute("textConfig",r)}updateByWord(t,e){let i=this.wordGroups.length,r=[...this.singleCharConfig];for(let n=0;n<this.wordGroups.length;n++){let s;if(t<(s=this.reverseOrder?"left"===this.slideDirection?n/i*e:(i-1-n)/i*e:"left"===this.slideDirection?(i-1-n)/i*e:n/i*e)){for(let t of this.wordGroups[n]){let e=r[t];"text"in e&&(r[t]=Object.assign(Object.assign({},e),{opacity:1,dx:0,dy:0}))}continue}let a=Math.max(0,Math.min(1,(t-s)/this.fadeOutDuration)),o=this.getTargetDx()*a,l=this.getTargetDy()*a,h=1-a;for(let t of this.wordGroups[n]){let e=r[t];"text"in e&&(r[t]=Object.assign(Object.assign({},e),{opacity:h,dx:o,dy:l}))}}return r}updateByCharacter(t,e){let i=this.fromTextConfig.length,r=[...this.singleCharConfig];for(let n=0;n<r.length;n++){let s=r[n];if("text"in s){let a;if(t<(a=this.reverseOrder?"left"===this.slideDirection?n/i*e:(i-1-n)/i*e:"left"===this.slideDirection?(i-1-n)/i*e:n/i*e)){r[n]=Object.assign(Object.assign({},s),{opacity:1,dx:0,dy:0});continue}let o=Math.max(0,Math.min(1,(t-a)/this.fadeOutDuration)),l=this.getTargetDx()*o,h=this.getTargetDy()*o,u=1-o;r[n]=Object.assign(Object.assign({},s),{opacity:u,dx:l,dy:h})}}return r}}class tp extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i,r,n,s,a,o,l,h,u;let c,d;super.onBind();let p=this.target.getFinalAttribute(),f=null!=(t=this.target.attribute)?t:{};switch(null==(e=this.params)?void 0:e.direction){case"x":c={scaleX:null!=(i=f.scaleX)?i:0},d={scaleX:null!=(r=null==p?void 0:p.scaleX)?r:1},this._updateFunction=this.updateX;break;case"y":c={scaleY:null!=(n=f.scaleY)?n:0},d={scaleY:null!=(s=null==p?void 0:p.scaleY)?s:1},this._updateFunction=this.updateY;break;default:c={scaleX:null!=(a=f.scaleX)?a:0,scaleY:null!=(o=f.scaleY)?o:0},d={scaleX:null!=(l=null==p?void 0:p.scaleX)?l:1,scaleY:null!=(h=null==p?void 0:p.scaleY)?h:1},this._updateFunction=this.updateXY}let g=this.target.getFinalAttribute();g&&this.target.setAttributes(g),this.props=d,this.from=c,this.to=d,!1!==(null==(u=this.params.controlOptions)?void 0:u.immediatelyApply)&&this.target.setAttributes(c)}onEnd(t){super.onEnd(t)}updateX(t){this.target.attribute.scaleX=this.from.scaleX+(this.to.scaleX-this.from.scaleX)*t}updateY(t){this.target.attribute.scaleY=this.from.scaleY+(this.to.scaleY-this.from.scaleY)*t}updateXY(t){this.updateX(t),this.updateY(t)}deleteSelfAttr(t){delete this.props[t],this.fromProps&&delete this.fromProps[t];let e=this.propKeys.indexOf(t);-1!==e&&this.propKeys.splice(e,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateXY:"scaleX"===this.propKeys[0]?this._updateFunction=this.updateX:"scaleY"===this.propKeys[0]?this._updateFunction=this.updateY:this._updateFunction=null}onUpdate(t,e,i){this._updateFunction&&(this._updateFunction(e),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag())}}class tf extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i,r,n;let s,a;super.onBind();let o=this.target.attribute;switch(null==(t=this.params)?void 0:t.direction){case"x":s={scaleX:null!=(e=null==o?void 0:o.scaleX)?e:1},a={scaleX:0};break;case"y":s={scaleY:null!=(i=null==o?void 0:o.scaleY)?i:1},a={scaleY:0};break;default:s={scaleX:null!=(r=null==o?void 0:o.scaleX)?r:1,scaleY:null!=(n=null==o?void 0:o.scaleY)?n:1},a={scaleX:0,scaleY:0}}this.props=a,this.from=s,this.to=a}onEnd(t){super.onEnd(t)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}}class tg extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.fromProps[i],this.props[i],r,this,this.target)}),this.onUpdate(t,r,i),this.syncAttributeUpdate()}}var tm=i(51711);class ty extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i,r,n,s,a,o,l,h,u,c;super.onBind();let d=this.target.getFinalAttribute(),p=(null==(t=this.params)?void 0:t.direction)||"right",f=(null==(e=this.params)?void 0:e.distance)||50,g=null!=(r=null==(i=this.params)?void 0:i.fromOpacity)?r:0,m={opacity:g,baseOpacity:g},y={opacity:1,baseOpacity:1};"top"===p?(m.y=(null!=(n=d.y)?n:0)-f,y.y=null!=(s=d.y)?s:0,this.propKeys=["opacity","baseOpacity","y"]):"bottom"===p?(m.y=(null!=(a=d.y)?a:0)+f,y.y=null!=(o=d.y)?o:0,this.propKeys=["opacity","baseOpacity","y"]):("left"===p?(m.x=(null!=(l=d.x)?l:0)-f,y.x=null!=(h=d.x)?h:0):(m.x=(null!=(u=d.x)?u:0)+f,y.x=null!=(c=d.x)?c:0),this.propKeys=["opacity","baseOpacity","x"]),this.from=m,this.to=y,this.props=y,this.target.setAttributes(m)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tv extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i,r,n,s,a;super.onBind();let o=this.target.getFinalAttribute(),l=null!=(e=null==(t=this.params)?void 0:t.fromScale)?e:0,h=(null==(i=this.params)?void 0:i.direction)||"xy",u=null!=(n=null==(r=this.params)?void 0:r.fromOpacity)?n:0,c={opacity:u,baseOpacity:u},d={opacity:1,baseOpacity:1};this.propKeys=["opacity","baseOpacity"],"x"!==h&&"xy"!==h||(c.scaleX=l,d.scaleX=null!=(s=o.scaleX)?s:1,this.propKeys.push("scaleX")),"y"!==h&&"xy"!==h||(c.scaleY=l,d.scaleY=null!=(a=o.scaleY)?a:1,this.propKeys.push("scaleY")),this.from=c,this.to=d,this.props=d,this.target.setAttributes(c)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tb extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e,i,r,n,s,a,o,l;super.onBind();let h=this.target.getFinalAttribute(),u=null!=(e=null==(t=this.params)?void 0:t.fromAngle)?e:2*Math.PI,c=null!=(r=null==(i=this.params)?void 0:i.fromScale)?r:0,d=null!=(s=null==(n=this.params)?void 0:n.fromOpacity)?s:0,p={opacity:d,baseOpacity:d,angle:u,scaleX:c,scaleY:c},f={opacity:1,baseOpacity:1,angle:null!=(a=h.angle)?a:0,scaleX:null!=(o=h.scaleX)?o:1,scaleY:null!=(l=h.scaleY)?l:1};this.propKeys=["opacity","baseOpacity","angle","scaleX","scaleY"],this.from=p,this.to=f,this.props=f,this.target.setAttributes(p)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tx extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.perimeter=0,this.originalAttributes={}}onBind(){var t,e,i,r,n,s,a,o,l,h,u,c,d,p,f,g,m,y;if(super.onBind(),this.originalAttributes=Object.assign({},this.target.getAttributes()),"rect"===this.target.type){let i=this.target.attribute,r=null!=(t=i.width)?t:100,n=null!=(e=i.height)?e:100;this.perimeter=2*(r+n)}else if("circle"===this.target.type){let t=null!=(i=this.target.attribute.radius)?i:50;this.perimeter=2*Math.PI*t}else if("ellipse"===this.target.type){let t=this.target.attribute,e=null!=(r=t.radiusX)?r:50,i=null!=(n=t.radiusY)?n:50;this.perimeter=2*Math.PI*Math.sqrt((e*e+i*i)/2)}else this.perimeter=1e3;let v=null!=(a=null==(s=this.params)?void 0:s.lineWidth)?a:2,b=null!=(l=null==(o=this.params)?void 0:o.strokeColor)?l:"black",x=null!=(u=null==(h=this.params)?void 0:h.fromOpacity)?u:1,_=null!=(d=null==(c=this.params)?void 0:c.dashLength)?d:this.perimeter,w=null!=(f=null==(p=this.params)?void 0:p.showFill)&&f,S=null!=(m=null==(g=this.params)?void 0:g.fillOpacity)?m:0;this.from={lineDash:[_,_],lineDashOffset:_,lineWidth:v,stroke:b,strokeOpacity:x},this.to={lineDash:[_,_],lineDashOffset:0,lineWidth:v,stroke:b,strokeOpacity:x},w?(this.from.fillOpacity=S,this.to.fillOpacity=null!=(y=this.originalAttributes.fillOpacity)?y:1):(this.from.fillOpacity=0,this.to.fillOpacity=0),this.propKeys=["lineDash","lineDashOffset","lineWidth","stroke","strokeOpacity","fillOpacity"],this.props=this.to,this.target.setAttributes(this.from)}onUpdate(t,e,i){var r;let n=this.target.attribute;n.lineDashOffset=this.from.lineDashOffset+(this.to.lineDashOffset-this.from.lineDashOffset)*e,(null==(r=this.params)?void 0:r.showFill)&&(n.fillOpacity=this.from.fillOpacity+(this.to.fillOpacity-this.from.fillOpacity)*e)}onEnd(){var t;if(super.onEnd(),!(null==(t=this.params)?void 0:t.showFill)){let t=Object.assign({},this.originalAttributes);t.fillOpacity=0,this.target.setAttributes(t)}}}class t_ extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.perimeter=0,this.originalAttributes={}}onFirstRun(){var t,e,i,r,n,s,a,o,l,h,u,c,d,p,f,g;if(this.originalAttributes=Object.assign({},this.target.getAttributes()),"rect"===this.target.type){let i=this.target.attribute,r=null!=(t=i.width)?t:100,n=null!=(e=i.height)?e:100;this.perimeter=2*(r+n)}else if("circle"===this.target.type){let t=null!=(i=this.target.attribute.radius)?i:50;this.perimeter=2*Math.PI*t}else if("ellipse"===this.target.type){let t=this.target.attribute,e=null!=(r=t.radiusX)?r:50,i=null!=(n=t.radiusY)?n:50;this.perimeter=2*Math.PI*Math.sqrt((e*e+i*i)/2)}else this.perimeter=1e3;let m=null!=(a=null==(s=this.params)?void 0:s.lineWidth)?a:2,y=null!=(l=null==(o=this.params)?void 0:o.strokeColor)?l:"black",v=null!=(u=null==(h=this.params)?void 0:h.fromOpacity)?u:1,b=null!=(d=null==(c=this.params)?void 0:c.dashLength)?d:this.perimeter,x=null!=(f=null==(p=this.params)?void 0:p.showFill)&&f;this.from={lineDash:[b,b],lineDashOffset:0,lineWidth:m,stroke:y,strokeOpacity:v},this.to={lineDash:[b,b],lineDashOffset:-b,lineWidth:m,stroke:y,strokeOpacity:v},x?this.from.fillOpacity=null!=(g=this.originalAttributes.fillOpacity)?g:1:this.from.fillOpacity=0,this.to.fillOpacity=0,this.propKeys=["lineDash","lineDashOffset","lineWidth","stroke","strokeOpacity","fillOpacity"],this.props=this.to,this.target.setAttributes(this.from)}onUpdate(t,e,i){var r;let n=this.target.attribute;n.lineDashOffset=this.from.lineDashOffset+(this.to.lineDashOffset-this.from.lineDashOffset)*e,(null==(r=this.params)?void 0:r.showFill)&&(n.fillOpacity=this.from.fillOpacity+(this.to.fillOpacity-this.from.fillOpacity)*e)}}class tw extends n.rd{constructor(t,e,i,r,n){var s;super(t,e,i,r,n);let a=null!=(s=null==n?void 0:n.slideRatio)?s:.5;this.slideInDuration=i*a,this.growInDuration=i*(1-a)}onBind(){var t,e,i,n,s,a;super.onBind();let o=new r.a(this.target);o.execute({type:"custom",custom:ty,customParameters:{direction:(null==(t=this.params)?void 0:t.slideDirection)||"right",distance:(null==(e=this.params)?void 0:e.slideDistance)||50,fromOpacity:null!=(n=null==(i=this.params)?void 0:i.fromOpacity)?n:0},duration:this.slideInDuration,easing:this.easing}),o.execute({type:"custom",custom:tv,customParameters:{fromScale:(null==(s=this.params)?void 0:s.fromScale)||.5,direction:(null==(a=this.params)?void 0:a.scaleDirection)||"xy",fromOpacity:1},duration:this.growInDuration,easing:this.easing,delay:this.slideInDuration})}onUpdate(t,e,i){}}class tS extends n.rd{constructor(t,e,i,r,n){var s;super(t,e,i,r,n);let a=null!=(s=null==n?void 0:n.slideRatio)?s:.5;this.slideInDuration=i*a,this.spinInDuration=i*(1-a)}onBind(){var t,e,i,n,s,a;super.onBind();let o=new r.a(this.target);o.execute({type:"custom",custom:ty,customParameters:{direction:(null==(t=this.params)?void 0:t.slideDirection)||"right",distance:(null==(e=this.params)?void 0:e.slideDistance)||50,fromOpacity:null!=(n=null==(i=this.params)?void 0:i.fromOpacity)?n:0},duration:this.slideInDuration,easing:this.easing}),o.execute({type:"custom",custom:tb,customParameters:{fromAngle:(null==(s=this.params)?void 0:s.fromAngle)||Math.PI,fromScale:(null==(a=this.params)?void 0:a.fromScale)||.5,fromOpacity:1},duration:this.spinInDuration,easing:this.easing,delay:this.slideInDuration})}onUpdate(t,e,i){}}class tA extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onFirstRun(){var t,e,i,r,n,s,a,o,l,h,u,c,d,p;let f=this.target.getAttributes(),g=(null==(t=this.params)?void 0:t.direction)||"right",m=(null==(e=this.params)?void 0:e.distance)||50,y=null!=(r=null==(i=this.params)?void 0:i.fromOpacity)?r:1,v=null!=(s=null==(n=this.params)?void 0:n.toOpacity)?s:0,b={opacity:y,baseOpacity:y},x={opacity:v,baseOpacity:v};"top"===g?(b.y=null!=(a=f.y)?a:0,x.y=(null!=(o=f.y)?o:0)-m,this.propKeys=["opacity","baseOpacity","y"]):"bottom"===g?(b.y=null!=(l=f.y)?l:0,x.y=(null!=(h=f.y)?h:0)+m,this.propKeys=["opacity","baseOpacity","y"]):("left"===g?(b.x=null!=(u=f.x)?u:0,x.x=(null!=(c=f.x)?c:0)-m):(b.x=null!=(d=f.x)?d:0,x.x=(null!=(p=f.x)?p:0)+m),this.propKeys=["opacity","baseOpacity","x"]),this.from=b,this.to=x,this.props=x}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tC extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onFirstRun(){var t,e,i,r,n,s,a,o,l;let h=this.target.getAttributes(),u=null!=(e=null==(t=this.params)?void 0:t.fromScale)?e:0,c=(null==(i=this.params)?void 0:i.direction)||"xy",d=null!=(n=null==(r=this.params)?void 0:r.fromOpacity)?n:1,p=null!=(a=null==(s=this.params)?void 0:s.toOpacity)?a:0,f={opacity:d,baseOpacity:d},g={opacity:p,baseOpacity:p};this.propKeys=["opacity","baseOpacity"],"x"!==c&&"xy"!==c||(f.scaleX=null!=(o=h.scaleX)?o:1,g.scaleX=u,this.propKeys.push("scaleX")),"y"!==c&&"xy"!==c||(f.scaleY=null!=(l=h.scaleY)?l:1,g.scaleY=u,this.propKeys.push("scaleY")),this.from=f,this.to=g,this.props=g}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tD extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onFirstRun(){var t,e,i,r,n,s,a,o,l,h,u;let c=this.target.getAttributes(),d=null!=(e=null==(t=this.params)?void 0:t.fromAngle)?e:2*Math.PI,p=null!=(r=null==(i=this.params)?void 0:i.fromScale)?r:0,f=null!=(s=null==(n=this.params)?void 0:n.fromOpacity)?s:1,g=null!=(o=null==(a=this.params)?void 0:a.toOpacity)?o:0,m={opacity:f,baseOpacity:f,angle:null!=(l=c.angle)?l:0,scaleX:null!=(h=c.scaleX)?h:1,scaleY:null!=(u=c.scaleY)?u:1},y={opacity:g,baseOpacity:g,angle:d,scaleX:p,scaleY:p};this.propKeys=["opacity","baseOpacity","angle","scaleX","scaleY"],this.from=m,this.to=y,this.props=y}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tT extends n.rd{constructor(t,e,i,r,n){var s;super(t,e,i,r,n);let a=null!=(s=null==n?void 0:n.slideRatio)?s:.5;this.growOutDuration=i*(1-a),this.slideOutDuration=i*a}onFirstRun(){var t,e,i,n;let s=new r.a(this.target);s.execute({type:"custom",custom:tC,customParameters:{fromScale:(null==(t=this.params)?void 0:t.fromScale)||.5,direction:(null==(e=this.params)?void 0:e.scaleDirection)||"xy",fromOpacity:1,toOpacity:1},duration:this.growOutDuration,easing:this.easing}),s.execute({type:"custom",custom:tA,customParameters:{direction:(null==(i=this.params)?void 0:i.slideDirection)||"right",distance:(null==(n=this.params)?void 0:n.slideDistance)||50,fromOpacity:1},duration:this.slideOutDuration,easing:this.easing,delay:this.growOutDuration})}onUpdate(t,e,i){}}class tB extends n.rd{constructor(t,e,i,r,n){var s;super(t,e,i,r,n);let a=null!=(s=null==n?void 0:n.slideRatio)?s:.5;this.spinOutDuration=i*(1-a),this.slideOutDuration=i*a}onFirstRun(){var t,e,i,n;let s=new r.a(this.target);s.execute({type:"custom",custom:tD,customParameters:{fromAngle:(null==(t=this.params)?void 0:t.fromAngle)||Math.PI,fromScale:(null==(e=this.params)?void 0:e.fromScale)||.5,fromOpacity:1,toOpacity:1},duration:this.spinOutDuration,easing:this.easing}),s.execute({type:"custom",custom:tA,customParameters:{direction:(null==(i=this.params)?void 0:i.slideDirection)||"right",distance:(null==(n=this.params)?void 0:n.slideDistance)||50,fromOpacity:1},duration:this.slideOutDuration,easing:this.easing,delay:this.spinOutDuration})}onUpdate(t,e,i){}}class tM extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.originalAttributes={},this.pulseCount=3,this.pulseOpacity=.3,this.pulseScale=1.05,this.pulseColor=null,this.pulseColorIntensity=.2,this.strokeOnly=!1,this.fillOnly=!1,this.useScale=!0,this.useOpacity=!0,this.useStroke=!0,this.useFill=!0,this.useColor=!1,this.originalFill=null,this.originalStroke=null,void 0!==(null==n?void 0:n.pulseCount)&&(this.pulseCount=n.pulseCount),void 0!==(null==n?void 0:n.pulseScale)&&(this.pulseScale=n.pulseScale),void 0!==(null==n?void 0:n.pulseColor)&&(this.pulseColor=n.pulseColor),void 0!==(null==n?void 0:n.pulseColorIntensity)&&(this.pulseColorIntensity=n.pulseColorIntensity),void 0!==(null==n?void 0:n.strokeOnly)&&(this.strokeOnly=n.strokeOnly),void 0!==(null==n?void 0:n.fillOnly)&&(this.fillOnly=n.fillOnly),void 0!==(null==n?void 0:n.useScale)&&(this.useScale=n.useScale),void 0!==(null==n?void 0:n.useOpacity)&&(this.useOpacity=n.useOpacity),void 0!==(null==n?void 0:n.useStroke)&&(this.useStroke=n.useStroke),void 0!==(null==n?void 0:n.useFill)&&(this.useFill=n.useFill),void 0!==(null==n?void 0:n.useColor)&&(this.useColor=n.useColor)}onBind(){super.onBind(),this.originalAttributes=Object.assign({},this.target.getAttributes()),this.useColor&&(this.originalFill=this.originalAttributes.fill||null,this.originalStroke=this.originalAttributes.stroke||null,this.pulseColor||(this.fillOnly&&this.originalFill?this.pulseColor=this.originalFill:this.strokeOnly&&this.originalStroke?this.pulseColor=this.originalStroke:this.originalFill?this.pulseColor=this.originalFill:this.originalStroke?this.pulseColor=this.originalStroke:this.pulseColor="#FFFFFF"))}onUpdate(t,e,i){let r=Math.abs(Math.sin(e*Math.PI*this.pulseCount)),n=this.target.attribute;if(this.useOpacity){let t=1+(this.pulseOpacity-1)*r;this.useStroke&&(n.strokeOpacity=(this.originalAttributes.strokeOpacity||1)*t),this.useFill&&(n.fillOpacity=(this.originalAttributes.fillOpacity||1)*t)}if(this.useScale){let t=1+(this.pulseScale-1)*r;n.scaleX=(this.originalAttributes.scaleX||1)*t,n.scaleY=(this.originalAttributes.scaleY||1)*t}this.useColor&&this.pulseColor&&this.applyColorPulse(n,r),this.target.addUpdateShapeAndBoundsTag(),this.target.addUpdatePositionTag()}applyColorPulse(t,e){let i=this.pulseColorIntensity*e;this.useFill&&this.originalFill&&this.pulseColor&&(t.fill=(0,tm.BM)(this.originalFill,this.pulseColor,i,!0)),this.useStroke&&this.originalStroke&&this.pulseColor&&(t.stroke=(0,tm.BM)(this.originalStroke,this.pulseColor,i,!0))}onEnd(){super.onEnd(),this.target.setAttributes(this.originalAttributes)}}class tE extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onBind(){var t,e;super.onBind();let{diffAttrs:i={}}=null!=(t=this.target.context)?t:{},{options:r}=this.params;i=Object.assign({},i),(null==(e=null==r?void 0:r.excludeChannels)?void 0:e.length)&&r.excludeChannels.forEach(t=>{delete i[t]}),this.props=i}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.fromProps[i],this.props[i],r,this,this.target)}),this.onUpdate(t,r,i)}}var tk=i(96241);let tF=(t,e,i)=>{var r,n,s,a;let{offset:o=0,orient:l,direction:h,point:u,excludeChannels:c=[],layoutRect:d={}}=null!=e?e:{},p=0,f=0;"negative"===l&&(p=null!=(r=d.width)?r:t.stage.viewWidth,f=null!=(n=d.height)?n:t.stage.viewHeight),p+=o,f+=o;let g=(0,tk.Z)(u)?u.call(null,null==(a=null==(s=t.context)?void 0:s.data)?void 0:a[0],t,i):u,m=t.getGraphicAttribute("x"),y=t.getGraphicAttribute("y"),v=c.includes("x")?m:g&&(0,E.Z)(g.x)?g.x:p,b=c.includes("y")?y:g&&(0,E.Z)(g.y)?g.y:f;switch(h){case"x":return{from:{x:c.includes("x")?m:v},to:{x:m}};case"y":return{from:{y:b},to:{y:y}};default:return{from:{x:v,y:b},to:{x:m,y:y}}}},tR=(t,e,i)=>{var r,n,s,a;let{offset:o=0,orient:l,direction:h,point:u}=null!=e?e:{},c=i.group?i.group.AABBBounds:null,d=null!=(r=c.width())?r:i.width,p=null!=(n=c.height())?n:i.height,f=(0,tk.Z)(u)?u.call(null,null==(a=null==(s=t.context)?void 0:s.data)?void 0:a[0],t,i):u,g=f&&(0,E.Z)(f.x)?f.x:("negative"===l?d:0)+o,m=f&&(0,E.Z)(f.y)?f.y:("negative"===l?p:0)+o;switch(h){case"x":return{from:{x:t.getGraphicAttribute("x")},to:{x:g}};case"y":return{from:{y:t.getGraphicAttribute("y")},to:{y:m}};default:return{from:{x:t.getGraphicAttribute("x"),y:t.getGraphicAttribute("y")},to:{x:g,y:m}}}};class tP extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tO extends tP{onBind(){var t;super.onBind();let{from:e,to:i}=tF(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(t=>null!=i[t]),this.from=e,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}}class tL extends tP{onBind(){super.onBind();let{from:t,to:e}=tR(this.target,this.params.options,this.params);this.props=e,this.propKeys=Object.keys(e).filter(t=>null!=e[t]),this.from=t,this.to=e}}var tI=i(36163);let tz=(t,e)=>{var i;let r=null!=(i=t.getFinalAttribute().angle)?i:0,n=0;return{from:{angle:(0,tI.Yt)(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:(0,E.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2},to:{angle:r}}},tZ=(t,e)=>{var i;let r=null!=(i=t.getFinalAttribute().angle)?i:0,n=0;return n=(0,tI.Yt)(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:(0,E.Z)(null==e?void 0:e.angle)?e.angle:"anticlockwise"===(null==e?void 0:e.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2,{from:{angle:r},to:{angle:n}}};class tj extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}onUpdate(t,e,i){let r=this.target.attribute;this.propKeys.forEach(t=>{r[t]=this.from[t]+(this.to[t]-this.from[t])*e}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class tW extends tj{onBind(){var t;super.onBind();let{from:e,to:i}=tz(this.target,this.params.options);this.props=i,this.propKeys=["angle"],this.from=e,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(e)}}class tU extends tj{onBind(){super.onBind();let{from:t,to:e}=tZ(this.target,this.params.options);this.props=e,this.propKeys=["angle"],this.from=t,this.to=e}}class tN extends n.rd{constructor(t,e,i,r,n){var s;super(t,e,i,r,n),n&&(this.pathLength=n.path.getLength(),this.path=n.path,this.distance=n.distance,this.totalLength=this.distance*this.pathLength,this.initAngle=null!=(s=n.initAngle)?s:0,this.changeAngle=!!n.changeAngle,this.cb=n.cb)}onBind(){this.from={x:0,y:0},this.to=this.path.getAttrAt(this.totalLength).pos,this.props=this.to}onUpdate(t,e,i){let r={},n=this.totalLength*e,{pos:s,angle:a}=this.path.getAttrAt(n);r.x=s.x,r.y=s.y,this.changeAngle&&(r.angle=a+this.initAngle),this.cb&&this.cb(this.from,this.to,e,this.target),this.target.setAttributes(r)}}class tH extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n),this.from=null!=t?t:{}}onBind(){var t,e;super.onBind(),Object.keys(this.from).forEach(t=>{null==this.props[t]&&(this.props[t]=this.target.getGraphicAttribute(t))});let i=this.target.getFinalAttribute();"appear"===(null==(t=this.target.context)?void 0:t.animationState)&&i&&this.target.setAttributes(i),!1!==(null==(e=this.params.controlOptions)?void 0:e.immediatelyApply)&&this.target.setAttributes(this.from)}onFirstRun(){this.from=Object.assign(Object.assign({},this.getLastProps()),this.from);let t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(e=>{var i;this.from[e]=null!=(i=this.from[e])?i:t[e]}),this.target.setAttributes(this.from)}deleteSelfAttr(t){super.deleteSelfAttr(t),delete this.from[t]}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.from,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.from[i],this.props[i],r,this,this.target)}),this.onUpdate(t,r,i),this.syncAttributeUpdate()}}var tG=i(92631),tV=i(78085),tX=i(97708),tY=i(25033),t$=i(19498);class tq extends n.rd{constructor(t,e,i,r,n){super(t,e,i,r,n)}getEndProps(){return{}}onStart(){this.target&&("rect"===this.target.type?this.onStartRect():"line"===this.target.type?this.onStartLineOrArea("line"):"area"===this.target.type&&this.onStartLineOrArea("area"))}onStartLineOrArea(t){var e;let i=this.target.attachShadow(),r=tG.w.graphicService.creator[t](Object.assign({},null==(e=this.params)?void 0:e.attribute));this[t]=r,r.pathProxy=new tV.r,i.add(r)}onStartRect(){var t,e,i;let r=this.target.attachShadow(),n=null==(e=null==(t=this.params)?void 0:t.isHorizontal)||e,s=n?"height":"width",a=this.target.AABBBounds[s](),o=n?0:this.target.AABBBounds.y1,l=tG.w.graphicService.creator.rect(Object.assign(Object.assign({[s]:a,fill:"#bcdeff",shadowBlur:30,shadowColor:"#bcdeff"},null==(i=this.params)?void 0:i.attribute),{x:0,y:o,[n?"width":"height"]:0}));this.rect=l,r.add(l)}onBind(){}onEnd(){this.target.detachShadow()}onUpdate(t,e,i){return this.rect?this.onUpdateRect(t,e,i):this.line||this.area?this.onUpdateLineOrArea(t,e,i):void 0}onUpdateRect(t,e,i){var r,n,s,a,o,l,h,u,c,d,p,f,g,m,y,v;let b=null==(n=null==(r=this.params)?void 0:r.isHorizontal)||n,x=this.target.attribute;if(b){let i=null!=(a=null!=(s=x.width)?s:Math.abs(x.x1-x.x))?a:250,r=null!=(l=null==(o=this.params)?void 0:o.streamLength)?l:i,n=null!=(c=null==(u=null==(h=this.params)?void 0:h.attribute)?void 0:u.width)?c:60,d=-n,p=d+(r-d)*e,f=Math.max(p,0),g=Math.min(Math.min(p+n,n),r-p),m=g+f>i?Math.max(i-f,0):g;this.rect.setAttributes({x:f+Math.min(x.x1-x.x,0),width:m},!1,{type:tX.Gk.ANIMATE_PLAY,animationState:{ratio:e,end:t}})}else{let i,r=null!=(p=null!=(d=x.height)?d:Math.abs(x.y1-x.y))?p:250,n=null!=(g=null==(f=this.params)?void 0:f.streamLength)?g:r,s=null!=(v=null==(y=null==(m=this.params)?void 0:m.attribute)?void 0:y.height)?v:60,a=r-(n+s)*e,o=Math.min(a,r),l=Math.min(r-a,s);o<=0?(i=Math.max(o+l,0),o=0):i=l,this.rect.setAttributes({y:o+Math.min(x.y1-x.y,0),height:i},!1,{type:tX.Gk.ANIMATE_PLAY,animationState:{ratio:e,end:t}})}}onUpdateLineOrArea(t,e,i){let r=this.line||this.area;if(!r)return;let n=r.pathProxy,s=this.target;s.cache||s.cacheArea?this._onUpdateLineOrAreaWithCache(n,s,t,e,i):this._onUpdateLineWithoutCache(n,s,t,e,i);let a=s.attribute;r.setAttributes(Object.assign({stroke:a.stroke},r.attribute)),r.addUpdateBoundTag()}_onUpdateLineOrAreaWithCache(t,e,i,r,n){var s,a;if(t.clear(),"line"===e.type){let i=e.cache;Array.isArray(i)||(i=[i]);let n=i.reduce((t,e)=>t+e.getLength(),0),s=[];return i.forEach(t=>{t.curves.forEach(t=>s.push(t))}),this._updateCurves(t,s,n,r)}if("area"===e.type&&(null==(a=null==(s=e.cacheArea)?void 0:s.top)?void 0:a.curves)){let i=e.cacheArea,n=i.top.curves.reduce((t,e)=>t+e.getLength(),0);return this._updateCurves(t,i.top.curves,n,r)}}_updateCurves(t,e,i,r){var n,s;let a=i*r,o=Math.min(a+(null!=(s=null==(n=this.params)?void 0:n.streamLength)?s:10),i),l=0,h=!1;for(let i=0;i<e.length;i++)if(!1!==e[i].defined){let r=e[i],n=r.getLength(),s=1-(l+n-a)/n,u,c=1-(l+n-o)/n;if(l<a&&l+n>a)if(h=!0,r.p2&&r.p3){let[e,i]=(0,tY.m)(r,s);t.moveTo(i.p0.x,i.p0.y),u=i}else{let e=r.getPointAt(s);t.moveTo(e.x,e.y)}if(l<o&&l+n>o){if(r.p2&&r.p3){u&&(c=(o-a)/u.getLength());let[e]=(0,tY.m)(u||r,c);t.bezierCurveTo(e.p1.x,e.p1.y,e.p2.x,e.p2.y,e.p3.x,e.p3.y)}else{let e=r.getPointAt(c);t.lineTo(e.x,e.y)}break}if(h)if(r.p2&&r.p3){let e=u||r;t.bezierCurveTo(e.p1.x,e.p1.y,e.p2.x,e.p2.y,e.p3.x,e.p3.y)}else t.lineTo(r.p1.x,r.p1.y);l+=n}}_onUpdateLineWithoutCache(t,e,i,r,n){var s,a;let{points:o,curveType:l}=e.attribute;if(!o||o.length<2||"linear"!==l)return;let h=0;for(let t=1;t<o.length;t++)h+=t$.HL.distancePP(o[t],o[t-1]);let u=h*r,c=Math.min(u+(null!=(a=null==(s=this.params)?void 0:s.streamLength)?a:10),h),d=[],p=0;for(let t=1;t<o.length;t++){let e=t$.HL.distancePP(o[t],o[t-1]);if(p<u&&p+e>u&&d.push(t$.HL.pointAtPP(o[t-1],o[t],1-(p+e-u)/e)),p<c&&p+e>c){d.push(t$.HL.pointAtPP(o[t-1],o[t],1-(p+e-c)/e));break}d.length&&d.push(o[t]),p+=e}if(d.length&&!(d.length<2)){t.clear(),t.moveTo(d[0].x,d[0].y);for(let e=1;e<d.length;e++)t.lineTo(d[e].x,d[e].y)}}}var tK=i(73036);class tQ extends n._j{constructor(t,e,i,r,n){super(t,e,i,r,n),this.webglCanvas=null,this.gl=null,this.program=null,this.currentAnimationRatio=0,this.animationTime=0}onUpdate(t,e,i){super.onUpdate(t,e,i),this.currentAnimationRatio=e,this.animationTime=e*Math.PI*2}getAnimationTime(){return this.currentAnimationRatio>0?this.animationTime:Date.now()/1e3}getDurationFromParent(){return this.duration||1e3}initWebGL(t){try{if(this.webglCanvas=tK.rF.createCanvas({width:t.width,height:t.height,dpr:tK.rF.devicePixelRatio}),!this.webglCanvas)return console.warn("WebGL canvas creation failed"),!1;this.webglCanvas.style.width=t.style.width||`${t.width}px`,this.webglCanvas.style.height=t.style.height||`${t.height}px`;let e=null;try{(e=this.webglCanvas.getContext("webgl"))||(e=this.webglCanvas.getContext("experimental-webgl"))}catch(t){console.warn("Failed to get WebGL context:",t)}if(this.gl=e,!this.gl)return console.warn("WebGL not supported"),!1;let i=this.getShaderSources();return this.program=this.createShaderProgram(i.vertex,i.fragment),null!==this.program}catch(t){return console.warn("Failed to initialize WebGL:",t),!1}}createShaderProgram(t,e){if(!this.gl)return null;let i=this.createShader(this.gl.VERTEX_SHADER,t),r=this.createShader(this.gl.FRAGMENT_SHADER,e);if(!i||!r)return null;let n=this.gl.createProgram();return n?(this.gl.attachShader(n,i),this.gl.attachShader(n,r),this.gl.linkProgram(n),this.gl.getProgramParameter(n,this.gl.LINK_STATUS)?n:(console.error("Shader program link error:",this.gl.getProgramInfoLog(n)),null)):null}createShader(t,e){if(!this.gl)return null;let i=this.gl.createShader(t);return i?(this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.error("Shader compile error:",this.gl.getShaderInfoLog(i)),this.gl.deleteShader(i),null)):null}setupWebGLState(t){this.gl&&this.webglCanvas&&(this.webglCanvas.width===t.width&&this.webglCanvas.height===t.height||(this.webglCanvas.width=t.width,this.webglCanvas.height=t.height),this.gl.viewport(0,0,this.webglCanvas.width,this.webglCanvas.height),this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT))}createFullScreenQuad(){if(!this.gl)return null;let t=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW),e}createTextureFromCanvas(t){if(!this.gl)return null;let e=this.gl.createTexture();return this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),e}setupVertexAttributes(){if(!this.gl||!this.program)return;let t=this.gl.getAttribLocation(this.program,"a_position"),e=this.gl.getAttribLocation(this.program,"a_texCoord");this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,2,this.gl.FLOAT,!1,16,8)}createOutputCanvas(t){let e=tK.rF.createCanvas({width:t.width,height:t.height,dpr:tK.rF.devicePixelRatio}),i=e.getContext("2d");return i?(i.clearRect(0,0,t.width,t.height),i.drawImage(t,0,0),{canvas:e,ctx:i}):null}getShaderSources(){return null}applyWebGLEffect(t){return null}applyCanvas2DEffect(t){return null}supportsWebGL(){return null!==this.getShaderSources()}supportsCanvas2D(){return this.applyCanvas2DEffect!==tQ.prototype.applyCanvas2DEffect}release(){super.release(),this.gl&&(this.program&&(this.gl.deleteProgram(this.program),this.program=null),this.gl=null),this.webglCanvas&&(this.webglCanvas=null),this.currentAnimationRatio=0,this.animationTime=0}afterStageRender(t,e){let i=null;if(this.supportsWebGL()&&(this.gl||this.initWebGL(e)||console.warn("WebGL初始化失败，尝试Canvas 2D回退"),this.gl)){if(i=this.applyWebGLEffect(e))return i;console.warn("WebGL特效执行失败，尝试Canvas 2D回退")}if(this.supportsCanvas2D()){if(i=this.applyCanvas2DEffect(e))return i;console.warn("Canvas 2D特效执行失败")}return this.supportsWebGL()||this.supportsCanvas2D()||console.error(`特效类 ${this.constructor.name} 未实现任何渲染方法。请实现 applyWebGLEffect 或 applyCanvas2DEffect 方法。`),e}}class tJ extends tQ{constructor(t,e,i,r,n){super(t,e,i,r,n)}getShaderSources(){return null}applyWebGLEffect(t){return null}}class t0 extends tQ{constructor(t,e,i,r,n){super(t,e,i,r,n)}getShaderSources(){return null}applyWebGLEffect(t){return null}applyCanvas2DEffect(t){return null}supportsWebGL(){return this.getShaderSources!==t0.prototype.getShaderSources&&null!==this.getShaderSources()}supportsCanvas2D(){return this.applyCanvas2DEffect!==t0.prototype.applyCanvas2DEffect}afterStageRender(t,e){var i,r;let n=null;if(!1!==(null==(r=null==(i=this.params)?void 0:i.options)?void 0:r.useWebGL)){if(this.supportsWebGL()&&(this.gl||this.initWebGL(e)||console.warn("WebGL初始化失败，尝试Canvas 2D回退"),this.gl)){if(n=this.applyWebGLEffect(e))return n;console.warn("WebGL特效执行失败，尝试Canvas 2D回退")}if(this.supportsCanvas2D()){if(n=this.applyCanvas2DEffect(e))return n;console.warn("Canvas 2D特效执行失败")}}else if(this.supportsCanvas2D()){if(n=this.applyCanvas2DEffect(e))return n;console.warn("Canvas 2D特效执行失败")}else console.warn(`${this.constructor.name}: useWebGL=false 但未实现Canvas 2D方法`);return this.supportsWebGL()||this.supportsCanvas2D()||console.error(`特效类 ${this.constructor.name} 未实现任何渲染方法。请实现 applyWebGLEffect 或 applyCanvas2DEffect 方法。`),e}}class t1{static createTempCanvas(t,e,i){return tK.rF.createCanvas({width:t,height:e,dpr:i||tK.rF.devicePixelRatio})}static cloneImageData(t){return new ImageData(new Uint8ClampedArray(t.data),t.width,t.height)}static lerp(t,e,i){return t*(1-i)+e*i}static smoothstep(t,e,i){let r=Math.max(0,Math.min(1,(i-t)/(e-t)));return r*r*(3-2*r)}static distance(t,e,i,r){let n=i-t,s=r-e;return Math.sqrt(n*n+s*s)}static normalizeAngle(t){return(t+Math.PI)/(2*Math.PI)}static pixelNoise(t,e,i){if(i<=0)return 0;let r=43758.5453*Math.sin(Math.floor(t/i)*i*12.9898+Math.floor(e/i)*i*78.233);return r-Math.floor(r)}static generateNoiseTexture(t,e){let i=new Uint8Array(t*e);for(let t=0;t<i.length;t++)i[t]=Math.floor(256*Math.random());return i}static applyCSSFilter(t,e){let i=this.createTempCanvas(t.width,t.height),r=i.getContext("2d");return r?(r.filter=e,r.drawImage(t,0,0),r.filter="none",i):t}static extractChannel(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i.length);for(let t=0;t<i.length;t+=4)s[t]=0,s[t+1]=0,s[t+2]=0,s[t+3]=i[t+3],e>=0&&e<=2&&(s[t+e]=i[t+e]);return new ImageData(s,r,n)}static blendImageData(t,e,i){let{data:r,width:n,height:s}=t,{data:a}=e,o=new Uint8ClampedArray(r.length);for(let t=0;t<r.length;t+=4)o[t]=Math.round(this.lerp(r[t],a[t],i)),o[t+1]=Math.round(this.lerp(r[t+1],a[t+1],i)),o[t+2]=Math.round(this.lerp(r[t+2],a[t+2],i)),o[t+3]=Math.round(this.lerp(r[t+3],a[t+3],i));return new ImageData(o,n,s)}static getLuminance(t,e,i){return .299*t+.587*e+.114*i}static applySepiaToPixel(t,e,i){return[Math.min(255,.393*t+.769*e+.189*i),Math.min(255,.349*t+.686*e+.168*i),Math.min(255,.272*t+.534*e+.131*i)]}static calculateDynamicStrength(t,e){return e/(2*Math.PI)*t}}class t2{}t2.STANDARD_VERTEX_SHADER="\n    attribute vec2 a_position;\n    attribute vec2 a_texCoord;\n    varying vec2 v_texCoord;\n\n    void main() {\n      gl_Position = vec4(a_position, 0.0, 1.0);\n      v_texCoord = a_texCoord;\n    }\n  ",t2.SHADER_FUNCTIONS="\n    // 亮度计算函数\n    float luminance(vec3 color) {\n      return dot(color, vec3(0.299, 0.587, 0.114));\n    }\n\n    // 褐色调函数\n    vec3 sepia(vec3 color) {\n      float r = color.r * 0.393 + color.g * 0.769 + color.b * 0.189;\n      float g = color.r * 0.349 + color.g * 0.686 + color.b * 0.168;\n      float b = color.r * 0.272 + color.g * 0.534 + color.b * 0.131;\n      return vec3(r, g, b);\n    }\n\n    // 线性插值函数\n    float lerp(float a, float b, float t) {\n      return a * (1.0 - t) + b * t;\n    }\n\n\n    // 简单噪声函数\n    float pixelNoise(vec2 coord, float pixelSize) {\n      vec2 gridCoord = floor(coord / pixelSize) * pixelSize;\n      return fract(sin(dot(gridCoord, vec2(12.9898, 78.233))) * 43758.5453123);\n    }\n\n    // 动态强度计算\n    float calculateDynamicStrength(float baseStrength, float time) {\n      return baseStrength * (time / 6.28318531); // 2π\n    }\n  ";class t3 extends t0{constructor(t,e,i,r,n){var s,a,o,l;super(t,e,i,r,n),this.noiseData=null;let h=null==(s=null==n?void 0:n.options)?void 0:s.noiseScale,u=void 0!==h?Math.max(0,Math.floor(h)):8;this.dissolveConfig={dissolveType:(null==(a=null==n?void 0:n.options)?void 0:a.dissolveType)||"outward",useWebGL:void 0===(null==(o=null==n?void 0:n.options)?void 0:o.useWebGL)||n.options.useWebGL,noiseScale:u,fadeEdge:void 0===(null==(l=null==n?void 0:n.options)?void 0:l.fadeEdge)||n.options.fadeEdge}}getShaderSources(){return{vertex:t2.STANDARD_VERTEX_SHADER,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform sampler2D u_noiseTexture;
      uniform float u_time;
      uniform int u_dissolveType;
      uniform vec2 u_resolution;
      uniform float u_noiseScale;
      uniform bool u_fadeEdge;
      varying vec2 v_texCoord;

      ${t2.SHADER_FUNCTIONS}

      // 向外溶解函数
      float outwardDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float distFromCenter = length(uv - center);
        float maxDist = length(vec2(0.5, 0.5));

        // 归一化距离 (0为中心，1为边缘)
        float normalizedDist = distFromCenter / maxDist;

        // 向外溶解：从边缘开始溶解，time控制溶解进度
        // 增加安全边距，确保动画结束时完全溶解
        float edgeThreshold = 1.2 - time * 1.5;

        // 当pixelSize > 0时添加颗粒效果
        if (pixelSize > 0.0) {
          // 添加基于像素大小的噪声，让边缘呈现颗粒状
          vec2 pixelCoord = uv * resolution; // 转换为像素坐标
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.4; // 增强噪声影响
          edgeThreshold += noiseInfluence;
          return normalizedDist > edgeThreshold ? 0.0 : 1.0;
        } else {
          // 平滑溶解：根据fadeEdge决定是否使用渐变
          if (u_fadeEdge) {
            // 柔和边缘：返回渐变值
            float fadeWidth = 0.15; // 渐变宽度
            return 1.0 - smoothstep(edgeThreshold - fadeWidth, edgeThreshold, normalizedDist);
          } else {
            // 硬边缘：返回0或1
            return normalizedDist > edgeThreshold ? 0.0 : 1.0;
          }
        }
      }

      // 向内溶解函数
      float inwardDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float distFromCenter = length(uv - center);
        float maxDist = length(vec2(0.5, 0.5));

        float normalizedDist = distFromCenter / maxDist;

        // 向内溶解：从中心开始溶解，time控制溶解进度
        // 增加系数，确保动画结束时完全溶解
        float centerThreshold = time * 1.4;

        // 当pixelSize > 0时添加颗粒效果
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.4;
          centerThreshold += noiseInfluence;
          return normalizedDist < centerThreshold ? 0.0 : 1.0;
        } else {
          // 平滑溶解：根据fadeEdge决定是否使用渐变
          if (u_fadeEdge) {
            // 柔和边缘：返回渐变值
            float fadeWidth = 0.15; // 渐变宽度
            return smoothstep(centerThreshold, centerThreshold + fadeWidth, normalizedDist);
          } else {
            // 硬边缘：返回0或1
            return normalizedDist < centerThreshold ? 0.0 : 1.0;
          }
        }
      }

      // 径向溶解函数
      float radialDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        vec2 center = vec2(0.5, 0.5);
        float angle = atan(uv.y - center.y, uv.x - center.x);
        float normalizedAngle = (angle + 3.14159) / (2.0 * 3.14159);

        // 径向溶解：按角度顺序溶解，time控制溶解进度
        // 增加系数，确保动画结束时完全溶解
        float angleThreshold = time * 1.2;

        // 当pixelSize > 0时添加颗粒效果
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          angleThreshold += noiseInfluence;
          return normalizedAngle < angleThreshold ? 0.0 : 1.0;
        } else {
          // 平滑溶解：根据fadeEdge决定是否使用渐变
          if (u_fadeEdge) {
            // 柔和边缘：返回渐变值
            float fadeWidth = 0.08; // 渐变宽度
            return smoothstep(angleThreshold, angleThreshold + fadeWidth, normalizedAngle);
          } else {
            // 硬边缘：返回0或1
            return normalizedAngle < angleThreshold ? 0.0 : 1.0;
          }
        }
      }

      // 从左到右溶解函数
      float leftToRightDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // 左到右溶解：从x=0开始向x=1溶解
        float dissolvePosition = time * 1.2; // 增加系数确保完全溶解

        // 当pixelSize > 0时添加颗粒效果
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.x < dissolvePosition ? 0.0 : 1.0;
        } else {
          // 平滑溶解：根据fadeEdge决定是否使用渐变
          if (u_fadeEdge) {
            // 柔和边缘：返回渐变值
            float fadeWidth = 0.08; // 渐变宽度
            return smoothstep(dissolvePosition, dissolvePosition + fadeWidth, uv.x);
          } else {
            // 硬边缘：返回0或1
            return uv.x < dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // 从右到左溶解函数
      float rightToLeftDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // 右到左溶解：从x=1开始向x=0溶解
        float dissolvePosition = 1.0 - time * 1.2; // 增加系数确保完全溶解

        // 当pixelSize > 0时添加颗粒效果
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.x > dissolvePosition ? 0.0 : 1.0;
        } else {
          // 平滑溶解：根据fadeEdge决定是否使用渐变
          if (u_fadeEdge) {
            // 柔和边缘：返回渐变值
            float fadeWidth = 0.08; // 渐变宽度
            return smoothstep(dissolvePosition - fadeWidth, dissolvePosition, uv.x);
          } else {
            // 硬边缘：返回0或1
            return uv.x > dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // 从上到下溶解函数
      float topToBottomDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // 上到下溶解：从y=0开始向y=1溶解
        float dissolvePosition = time * 1.2; // 增加系数确保完全溶解

        // 当pixelSize > 0时添加颗粒效果
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.y < dissolvePosition ? 0.0 : 1.0;
        } else {
          // 平滑溶解：根据fadeEdge决定是否使用渐变
          if (u_fadeEdge) {
            // 柔和边缘：返回渐变值
            float fadeWidth = 0.08; // 渐变宽度
            return smoothstep(dissolvePosition, dissolvePosition + fadeWidth, uv.y);
          } else {
            // 硬边缘：返回0或1
            return uv.y < dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      // 从下到上溶解函数
      float bottomToTopDissolve(vec2 uv, float time, float pixelSize, vec2 resolution) {
        // 下到上溶解：从y=1开始向y=0溶解
        float dissolvePosition = 1.0 - time * 1.2; // 增加系数确保完全溶解

        // 当pixelSize > 0时添加颗粒效果
        if (pixelSize > 0.0) {
          vec2 pixelCoord = uv * resolution;
          float noiseValue = pixelNoise(pixelCoord, pixelSize);
          float noiseInfluence = (noiseValue - 0.5) * 0.3;
          dissolvePosition += noiseInfluence;
          return uv.y > dissolvePosition ? 0.0 : 1.0;
        } else {
          // 平滑溶解：根据fadeEdge决定是否使用渐变
          if (u_fadeEdge) {
            // 柔和边缘：返回渐变值
            float fadeWidth = 0.08; // 渐变宽度
            return smoothstep(dissolvePosition - fadeWidth, dissolvePosition, uv.y);
          } else {
            // 硬边缘：返回0或1
            return uv.y > dissolvePosition ? 0.0 : 1.0;
          }
        }
      }

      void main() {
        vec2 uv = v_texCoord;
        vec4 texColor = texture2D(u_texture, uv);

        float alpha = 1.0;

        // 根据溶解类型选择对应的溶解函数
        if (u_dissolveType == 0) {
          alpha = outwardDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 1) {
          alpha = inwardDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 2) {
          alpha = radialDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 3) {
          alpha = leftToRightDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 4) {
          alpha = rightToLeftDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 5) {
          alpha = topToBottomDissolve(uv, u_time, u_noiseScale, u_resolution);
        } else if (u_dissolveType == 6) {
          alpha = bottomToTopDissolve(uv, u_time, u_noiseScale, u_resolution);
        }

        gl_FragColor = vec4(texColor.rgb, texColor.a * alpha);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return t;this.setupWebGLState(t);let e=this.createTextureFromCanvas(t);if(!e)return t;this.noiseData||(this.noiseData=t1.generateNoiseTexture(256,256));let i=this.gl.createTexture();this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,256,256,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,this.noiseData),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);let r=this.createFullScreenQuad();return r?(this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setUniforms(),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.deleteTexture(e),this.gl.deleteTexture(i),this.gl.deleteBuffer(r),this.webglCanvas):t}setUniforms(){if(!this.gl||!this.program||!this.webglCanvas)return;let t=this.gl.getUniformLocation(this.program,"u_texture"),e=this.gl.getUniformLocation(this.program,"u_noiseTexture"),i=this.gl.getUniformLocation(this.program,"u_time"),r=this.gl.getUniformLocation(this.program,"u_dissolveType"),n=this.gl.getUniformLocation(this.program,"u_resolution"),s=this.gl.getUniformLocation(this.program,"u_noiseScale"),a=this.gl.getUniformLocation(this.program,"u_fadeEdge");this.gl.uniform1i(t,0),this.gl.uniform1i(e,1),this.gl.uniform1f(i,this.currentAnimationRatio),this.gl.uniform2f(n,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1f(s,this.dissolveConfig.noiseScale),this.gl.uniform1i(a,+!!this.dissolveConfig.fadeEdge),this.gl.uniform1i(r,{outward:0,inward:1,radial:2,leftToRight:3,rightToLeft:4,topToBottom:5,bottomToTop:6}[this.dissolveConfig.dissolveType]||0)}applyCanvas2DEffect(t){let e,i=this.createOutputCanvas(t);if(!i)return t;let{canvas:r,ctx:n}=i,s=n.getImageData(0,0,t.width,t.height),a=this.currentAnimationRatio;switch(this.dissolveConfig.dissolveType){case"outward":e=this.applyOutwardDissolve(s,a);break;case"inward":e=this.applyInwardDissolve(s,a);break;case"radial":e=this.applyRadialDissolve(s,a);break;case"leftToRight":e=this.applyLeftToRightDissolve(s,a);break;case"rightToLeft":e=this.applyRightToLeftDissolve(s,a);break;case"topToBottom":e=this.applyTopToBottomDissolve(s,a);break;case"bottomToTop":e=this.applyBottomToTopDissolve(s,a);break;default:e=s}return n.putImageData(e,0,0),r}applyOutwardDissolve(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i.length);s.set(i);let a=r/2,o=n/2,l=Math.sqrt(a*a+o*o),h=this.dissolveConfig.noiseScale;for(let t=0;t<n;t++)for(let i=0;i<r;i++){let n=i-a,u=t-o,c=Math.sqrt(n*n+u*u)/l,d=1.2-1.4*e,p=1;if(h>0)d+=.4*(t1.pixelNoise(i,t,h)-.5),p=c>d?0:1;else if(this.dissolveConfig.fadeEdge){let t=d-.15;p=c<t?1:c>d?0:1-(c-t)/(d-t)}else p=c>d?0:1;let f=4*(t*r+i);s[f+3]=Math.floor(s[f+3]*p)}return new ImageData(s,r,n)}applyInwardDissolve(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i.length);s.set(i);let a=r/2,o=n/2,l=Math.sqrt(a*a+o*o),h=this.dissolveConfig.noiseScale;for(let t=0;t<n;t++)for(let i=0;i<r;i++){let n=i-a,u=t-o,c=Math.sqrt(n*n+u*u)/l,d=1.4*e,p=1;if(h>0)d+=.4*(t1.pixelNoise(i,t,h)-.5),p=c<d?0:1;else if(this.dissolveConfig.fadeEdge){let t=d+.15;p=c<d?0:c>t?1:(c-d)/(t-d)}else p=c<d?0:1;let f=4*(t*r+i);s[f+3]=Math.floor(s[f+3]*p)}return new ImageData(s,r,n)}applyRadialDissolve(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i.length);s.set(i);let a=r/2,o=n/2,l=this.dissolveConfig.noiseScale;for(let t=0;t<n;t++)for(let i=0;i<r;i++){let n=(Math.atan2(t-o,i-a)+Math.PI)/(2*Math.PI),h=1.2*e,u=1;if(l>0)h+=.3*(t1.pixelNoise(i,t,l)-.5),u=n<h?0:1;else if(this.dissolveConfig.fadeEdge){let t=h+.08;u=n<h?0:n>t?1:(n-h)/(t-h)}else u=n<h?0:1;let c=4*(t*r+i);s[c+3]=Math.floor(s[c+3]*u)}return new ImageData(s,r,n)}applyLeftToRightDissolve(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i.length);s.set(i);let a=this.dissolveConfig.noiseScale;for(let t=0;t<n;t++)for(let i=0;i<r;i++){let n=i/r,o=1.2*e,l=1;if(a>0)o+=.3*(t1.pixelNoise(i,t,a)-.5),l=n<o?0:1;else if(this.dissolveConfig.fadeEdge){let t=o+.08;l=n<o?0:n>t?1:(n-o)/(t-o)}else l=n<o?0:1;let h=4*(t*r+i);s[h+3]=Math.floor(s[h+3]*l)}return new ImageData(s,r,n)}applyRightToLeftDissolve(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i.length);s.set(i);let a=this.dissolveConfig.noiseScale;for(let t=0;t<n;t++)for(let i=0;i<r;i++){let n=i/r,o=1-1.2*e,l=1;if(a>0)o+=.3*(t1.pixelNoise(i,t,a)-.5),l=n>o?0:1;else if(this.dissolveConfig.fadeEdge){let t=o-.08;l=n<t?1:n>o?0:1-(n-t)/(o-t)}else l=n>o?0:1;let h=4*(t*r+i);s[h+3]=Math.floor(s[h+3]*l)}return new ImageData(s,r,n)}applyTopToBottomDissolve(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i.length);s.set(i);let a=this.dissolveConfig.noiseScale;for(let t=0;t<n;t++)for(let i=0;i<r;i++){let o=t/n,l=1.2*e,h=1;if(a>0)l+=.3*(t1.pixelNoise(i,t,a)-.5),h=o<l?0:1;else if(this.dissolveConfig.fadeEdge){let t=l+.08;h=o<l?0:o>t?1:(o-l)/(t-l)}else h=o<l?0:1;let u=4*(t*r+i);s[u+3]=Math.floor(s[u+3]*h)}return new ImageData(s,r,n)}applyBottomToTopDissolve(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i.length);s.set(i);let a=this.dissolveConfig.noiseScale;for(let t=0;t<n;t++)for(let i=0;i<r;i++){let o=t/n,l=1-1.2*e,h=1;if(a>0)l+=.3*(t1.pixelNoise(i,t,a)-.5),h=o>l?0:1;else if(this.dissolveConfig.fadeEdge){let t=l-.08;h=o<t?1:o>l?0:1-(o-t)/(l-t)}else h=o>l?0:1;let u=4*(t*r+i);s[u+3]=Math.floor(s[u+3]*h)}return new ImageData(s,r,n)}}class t5 extends t0{constructor(t,e,i,r,n){var s,a,o;super(t,e,i,r,n);let l=Math.max(0,Math.min(1,void 0!==(null==(s=null==n?void 0:n.options)?void 0:s.strength)?n.options.strength:1));this.colorConfig={effectType:(null==(a=null==n?void 0:n.options)?void 0:a.effectType)||"grayscale",strength:l,useWebGL:void 0===(null==(o=null==n?void 0:n.options)?void 0:o.useWebGL)||n.options.useWebGL}}getShaderSources(){return{vertex:t2.STANDARD_VERTEX_SHADER,fragment:`
      precision mediump float;
      uniform sampler2D u_texture;
      uniform float u_time;
      uniform float u_strength;
      uniform int u_effectType;
      uniform vec2 u_resolution;
      varying vec2 v_texCoord;

      ${t2.SHADER_FUNCTIONS}

      void main() {
        vec2 uv = v_texCoord;
        vec4 originalColor = texture2D(u_texture, uv);
        vec3 color = originalColor.rgb;

        // 计算动态强度
        float dynamicStrength = calculateDynamicStrength(u_strength, u_time);

        if (u_effectType == 0) {
          // 灰度效果
          float gray = luminance(color);
          vec3 grayColor = vec3(gray);
          color = mix(color, grayColor, dynamicStrength);
        } else if (u_effectType == 1) {
          // 褐色调效果
          vec3 sepiaColor = sepia(color);
          color = mix(color, sepiaColor, dynamicStrength);
        }

        gl_FragColor = vec4(color, originalColor.a);
      }
    `}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t);let e=this.createTextureFromCanvas(t);if(!e)return null;let i=this.createFullScreenQuad();if(!i)return this.gl.deleteTexture(e),null;try{return this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setColorUniforms(),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.webglCanvas}finally{this.gl.deleteTexture(e),this.gl.deleteBuffer(i)}}setColorUniforms(){if(!this.gl||!this.program)return;let t=this.getAnimationTime(),e=this.gl.getUniformLocation(this.program,"u_time"),i=this.gl.getUniformLocation(this.program,"u_strength"),r=this.gl.getUniformLocation(this.program,"u_effectType"),n=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform1f(e,t),this.gl.uniform1f(i,this.colorConfig.strength),this.gl.uniform2f(n,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1i(r,{grayscale:0,sepia:1}[this.colorConfig.effectType]||0)}applyCanvas2DEffect(t){if(this.colorConfig.strength<=0){let e=this.createOutputCanvas(t);return e?e.canvas:null}if(this.canUseCSSFilter())return this.applyCSSFilter(t);let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let r,n=i.getImageData(0,0,t.width,t.height),s=this.getAnimationTime();switch(this.colorConfig.effectType){case"grayscale":default:r=this.applyGrayscaleEffect(n,this.colorConfig.strength,s);break;case"sepia":r=this.applySepiaEffect(n,this.colorConfig.strength,s)}return i.clearRect(0,0,t.width,t.height),i.putImageData(r,0,0),e.canvas}catch(t){return console.warn("Canvas 2D color effect failed:",t),null}}canUseCSSFilter(){var t;return!!window.useFilterAPI&&"undefined"!=typeof CSS&&(null==(t=CSS.supports)?void 0:t.call(CSS,"filter","grayscale(1)"))}applyCSSFilter(t){try{let e=t1.createTempCanvas(t.width,t.height),i=e.getContext("2d");if(!i)return null;let r=this.getAnimationTime(),n=t1.calculateDynamicStrength(this.colorConfig.strength,r),s="";return"grayscale"===this.colorConfig.effectType?s=`grayscale(${Math.min(1,n)})`:"sepia"===this.colorConfig.effectType&&(s=`sepia(${Math.min(1,n)})`),i.filter=s,i.drawImage(t,0,0),i.filter="none",e}catch(t){return console.warn("CSS Filter API failed, falling back to pixel processing:",t),null}}applyGrayscaleEffect(t,e,i){let{data:r,width:n,height:s}=t,a=new Uint8ClampedArray(r.length),o=t1.calculateDynamicStrength(e,i);for(let t=0;t<r.length;t+=4){let e=r[t],i=r[t+1],n=r[t+2],s=r[t+3],l=t1.getLuminance(e,i,n);a[t]=Math.round(t1.lerp(e,l,o)),a[t+1]=Math.round(t1.lerp(i,l,o)),a[t+2]=Math.round(t1.lerp(n,l,o)),a[t+3]=s}return new ImageData(a,n,s)}applySepiaEffect(t,e,i){let{data:r,width:n,height:s}=t,a=new Uint8ClampedArray(r.length),o=t1.calculateDynamicStrength(e,i);for(let t=0;t<r.length;t+=4){let e=r[t],i=r[t+1],n=r[t+2],s=r[t+3],[l,h,u]=t1.applySepiaToPixel(e,i,n);a[t]=Math.round(t1.lerp(e,l,o)),a[t+1]=Math.round(t1.lerp(i,h,o)),a[t+2]=Math.round(t1.lerp(n,u,o)),a[t+3]=s}return new ImageData(a,n,s)}afterStageRender(t,e){if(this.canUseCSSFilter()&&this.colorConfig.strength>0){let t=this.applyCSSFilter(e);if(t)return t}return super.afterStageRender(t,e)}}class t8 extends t0{constructor(t,e,i,r,n){var s,a,o;super(t,e,i,r,n),this.distortionConfig={distortionType:(null==(s=null==n?void 0:n.options)?void 0:s.distortionType)||"wave",strength:(null==(a=null==n?void 0:n.options)?void 0:a.strength)||.3,useWebGL:void 0===(null==(o=null==n?void 0:n.options)?void 0:o.useWebGL)||n.options.useWebGL}}getShaderSources(){return{vertex:"\n      attribute vec2 a_position;\n      attribute vec2 a_texCoord;\n      varying vec2 v_texCoord;\n\n      void main() {\n        gl_Position = vec4(a_position, 0.0, 1.0);\n        v_texCoord = a_texCoord;\n      }\n    ",fragment:"\n      precision mediump float;\n      uniform sampler2D u_texture;\n      uniform float u_time;\n      uniform float u_strength;\n      uniform int u_distortionType;\n      uniform vec2 u_resolution;\n      varying vec2 v_texCoord;\n\n      // 波浪扭曲函数\n      vec2 wave(vec2 uv, float time, float strength) {\n        float waveX = sin(uv.y * 10.0 + time * 3.0) * strength * 0.1;\n        float waveY = sin(uv.x * 10.0 + time * 2.0) * strength * 0.1;\n        return uv + vec2(waveX, waveY);\n      }\n\n      // 涟漪扭曲函数\n      vec2 ripple(vec2 uv, float time, float strength) {\n        vec2 center = vec2(0.5, 0.5);\n        float distance = length(uv - center);\n        float ripple = sin(distance * 20.0 - time * 5.0) * strength * 0.1;\n        vec2 direction = normalize(uv - center);\n        return uv + direction * ripple;\n      }\n\n      // 漩涡扭曲函数\n      vec2 swirl(vec2 uv, float time, float strength) {\n        vec2 center = vec2(0.5, 0.5);\n        vec2 delta = uv - center;\n        float dist = length(delta);\n        float originalAngle = atan(delta.y, delta.x);\n        float rotationAngle = dist * strength * time * 2.0;\n        float finalAngle = originalAngle + rotationAngle;\n        return center + dist * vec2(cos(finalAngle), sin(finalAngle));\n      }\n\n      void main() {\n        vec2 uv = v_texCoord;\n\n        // 根据扭曲类型应用相应变换\n        if (u_distortionType == 0) {\n          uv = wave(uv, u_time, u_strength);\n        } else if (u_distortionType == 1) {\n          uv = ripple(uv, u_time, u_strength);\n        } else if (u_distortionType == 2) {\n          uv = swirl(uv, u_time, u_strength);\n        }\n\n        // 边界检查\n        if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        } else {\n          gl_FragColor = texture2D(u_texture, uv);\n        }\n      }\n    "}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t);let e=this.createTextureFromCanvas(t);if(!e)return null;let i=this.createFullScreenQuad();if(!i)return this.gl.deleteTexture(e),null;try{return this.gl.useProgram(this.program),this.setupVertexAttributes(),this.setDistortionUniforms(),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.webglCanvas}finally{this.gl.deleteTexture(e),this.gl.deleteBuffer(i)}}setDistortionUniforms(){if(!this.gl||!this.program)return;let t=this.getAnimationTime(),e=this.gl.getUniformLocation(this.program,"u_time"),i=this.gl.getUniformLocation(this.program,"u_strength"),r=this.gl.getUniformLocation(this.program,"u_distortionType"),n=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform1f(e,t),this.gl.uniform1f(i,this.distortionConfig.strength),this.gl.uniform2f(n,this.webglCanvas.width,this.webglCanvas.height),this.gl.uniform1i(r,{wave:0,ripple:1,swirl:2}[this.distortionConfig.distortionType]||0)}applyCanvas2DEffect(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let r,n=i.getImageData(0,0,t.width,t.height),s=this.getAnimationTime();switch(this.distortionConfig.distortionType){case"wave":r=this.applyWaveDistortion(n,this.distortionConfig.strength,s);break;case"ripple":r=this.applyRippleDistortion(n,this.distortionConfig.strength,s);break;case"swirl":r=this.applySwirlDistortion(n,this.distortionConfig.strength,s);break;default:r=n}return i.clearRect(0,0,t.width,t.height),i.putImageData(r,0,0),e.canvas}catch(t){return console.warn("Canvas 2D distortion effect failed:",t),null}}applyWaveDistortion(t,e,i){let{data:r,width:n,height:s}=t,a=new Uint8ClampedArray(r.length);for(let t=0;t<s;t++)for(let o=0;o<n;o++){let l=Math.sin(.1*t+3*i)*e*20,h=Math.sin(.1*o+2*i)*e*20,u=Math.round(o-l),c=Math.round(t-h),d=4*(t*n+o);if(u>=0&&u<n&&c>=0&&c<s){let t=4*(c*n+u);a[d]=r[t],a[d+1]=r[t+1],a[d+2]=r[t+2],a[d+3]=r[t+3]}else a[d+3]=0}return new ImageData(a,n,s)}applyRippleDistortion(t,e,i){let{data:r,width:n,height:s}=t,a=new Uint8ClampedArray(r.length),o=n/2,l=s/2;for(let t=0;t<s;t++)for(let h=0;h<n;h++){let u=h-o,c=t-l,d=Math.sin(.2*Math.sqrt(u*u+c*c)-5*i)*e*10,p=Math.atan2(c,u),f=Math.round(h-Math.cos(p)*d),g=Math.round(t-Math.sin(p)*d),m=4*(t*n+h);if(f>=0&&f<n&&g>=0&&g<s){let t=4*(g*n+f);a[m]=r[t],a[m+1]=r[t+1],a[m+2]=r[t+2],a[m+3]=r[t+3]}else a[m+3]=0}return new ImageData(a,n,s)}applySwirlDistortion(t,e,i){let{data:r,width:n,height:s}=t,a=new Uint8ClampedArray(r.length),o=n/2,l=s/2;for(let t=0;t<s;t++)for(let h=0;h<n;h++){let u=h-o,c=t-l,d=Math.sqrt(u*u+c*c),p=Math.atan2(c,u)+d*e*i*.02,f=Math.round(o+d*Math.cos(p)),g=Math.round(l+d*Math.sin(p)),m=4*(t*n+h);if(f>=0&&f<n&&g>=0&&g<s){let t=4*(g*n+f);a[m]=r[t],a[m+1]=r[t+1],a[m+2]=r[t+2],a[m+3]=r[t+3]}else a[m+3]=0}return new ImageData(a,n,s)}afterStageRender(t,e){return this.distortionConfig.strength<=0?e:super.afterStageRender(t,e)}}class t4 extends t0{constructor(t,e,i,r,n){var s,a,o,l,h;super(t,e,i,r,n),this.particles=[],this.positionBuffer=null,this.colorBuffer=null,this.particleConfig={effectType:(null==(s=null==n?void 0:n.options)?void 0:s.effectType)||"gravity",count:(null==(a=null==n?void 0:n.options)?void 0:a.count)||4e3,size:(null==(o=null==n?void 0:n.options)?void 0:o.size)||20,strength:(null==(l=null==n?void 0:n.options)?void 0:l.strength)||1.5,useWebGL:void 0===(null==(h=null==n?void 0:n.options)?void 0:h.useWebGL)||n.options.useWebGL}}getShaderSources(){return{vertex:"\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_size;\n\n      uniform vec2 u_resolution;\n      uniform float u_time;\n      uniform float u_forceStrength;\n      uniform int u_effectType;\n\n      varying vec4 v_color;\n\n      void main() {\n        // 将像素坐标转换为剪辑空间坐标\n        vec2 clipSpace = ((a_position / u_resolution) * 2.0) - 1.0;\n        clipSpace.y = -clipSpace.y; // 翻转Y轴\n\n        gl_Position = vec4(clipSpace, 0.0, 1.0);\n        gl_PointSize = a_size;\n        v_color = a_color;\n      }\n    ",fragment:"\n      precision mediump float;\n      varying vec4 v_color;\n\n      void main() {\n        // 创建圆形粒子\n        vec2 coord = gl_PointCoord - vec2(0.5);\n        float distance = length(coord);\n\n        if (distance > 0.5) {\n          discard;\n        }\n\n        // 保持原始颜色，只调整透明度渐变\n        gl_FragColor = vec4(v_color.rgb, v_color.a);\n      }\n    "}}applyWebGLEffect(t){if(!this.gl||!this.program||!this.webglCanvas)return null;this.setupWebGLState(t),0===this.particles.length&&this.extractParticles(t),this.updateParticles(t);let e=this.gl;return e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.program),this.prepareAndDrawParticles(e),this.webglCanvas}applyCanvas2DEffect(t){let e=this.createOutputCanvas(t);if(!e)return null;let{canvas:i,ctx:r}=e,n=this.currentAnimationRatio;switch(this.particleConfig.effectType){case"explode":this.applyCanvas2DExplode(r,t,n);break;case"gravity":this.applyCanvas2DGravity(r,t,n);break;case"vortex":this.applyCanvas2DVortex(r,t,n);break;default:r.globalAlpha=Math.max(0,1-n),r.drawImage(t,0,0)}return i}extractParticles(t){let e=t1.createTempCanvas(t.width,t.height,1),i=e.getContext("2d");if(!i)return;i.drawImage(t,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height).data;this.particles=[];let n=Math.max(1,Math.floor(Math.sqrt(e.width*e.height/(1.5*this.particleConfig.count))));for(let i=0;i<e.height;i+=n)for(let s=0;s<e.width;s+=n){let n=4*(i*e.width+s),a=r[n],o=r[n+1],l=r[n+2],h=r[n+3];if(h>5){let r=s/e.width*t.width,n=i/e.height*t.height,u={x:r,y:n,originX:r,originY:n,vx:0,vy:0,r:a/255,g:o/255,b:l/255,a:Math.max(.6,h/255),life:1,size:this.particleConfig.size*(1+.5*Math.random())};this.particles.push(u)}}}updateParticles(t){let e=t.width/2,i=t.height/2,r=this.currentAnimationRatio,n=this.getDurationFromParent(),s=n<2e3,a=s?Math.max(1.5,3e3/n):1,o=s?Math.min(2,2e3/n):1;this.particles.forEach(n=>{let l=n.x-e,h=n.y-i,u=Math.sqrt(l*l+h*h),c=Math.atan2(h,l);this.applyParticleForces(n,c,u,r,o,t),this.updateParticleProperties(n,r,s,a,o)})}applyParticleForces(t,e,i,r,n,s){let a=this.getAnimationTime();switch(this.particleConfig.effectType){case"explode":let o=r*this.particleConfig.strength*n*5;t.vx+=Math.cos(e)*o,t.vy+=Math.sin(e)*o;break;case"gravity":this.applyGravityEffect(t,r,n,s,a);break;case"vortex":this.applyVortexEffect(t,r,n,s,e,i)}}applyGravityEffect(t,e,i,r,n){let s=(t.originX+.7*t.originY)/(r.width+r.height)*.8;if(e>s){let r=(e-s)/(1-s),a=this.particleConfig.strength*r*r*12*i;t.vy+=a;let o=Math.sin(3*n+.02*t.originX)*Math.cos(2*n+.015*t.originY);t.vx+=o*this.particleConfig.strength*2*i}}applyVortexEffect(t,e,i,r,n,s){let a=r.width/2,o=r.height/2,l=n+e*Math.PI*.8,h=s+e*Math.max(r.width,r.height)*1.26,u=a+Math.cos(l)*h,c=o+Math.sin(l)*h,d=e*this.particleConfig.strength*.08*i;t.vx+=(u-t.x)*d,t.vy+=(c-t.y)*d}updateParticleProperties(t,e,i,r,n){let s=i?.99:.98;(t.vx*=s,t.vy*=s,t.x+=t.vx,t.y+=t.vy,i)?(t.life=Math.max(0,1-e*Math.max(.1,.5/r)),t.a=Math.max(.2,t.life*Math.min(1,1.2*t.a)),t.size=Math.max(.7*this.particleConfig.size,this.particleConfig.size*(.5+.5*t.life))):(t.life=Math.max(0,1-.2*e),t.a=Math.max(.1,t.life*Math.min(1,1.5*t.a)),t.size=Math.max(.5*this.particleConfig.size,this.particleConfig.size*(.3+.7*t.life)))}prepareAndDrawParticles(t){let e=new Float32Array(2*this.particles.length),i=new Float32Array(4*this.particles.length),r=new Float32Array(this.particles.length);this.particles.forEach((t,n)=>{e[2*n]=t.x,e[2*n+1]=t.y,i[4*n]=t.r,i[4*n+1]=t.g,i[4*n+2]=t.b,i[4*n+3]=Math.max(.1,t.a),r[n]=Math.max(6,1.5*t.size)}),this.updateParticleBuffers(t,e,i,r),this.setParticleUniforms(t),t.drawArrays(t.POINTS,0,this.particles.length),this.cleanupTempBuffers(t)}updateParticleBuffers(t,e,i,r){this.positionBuffer||(this.positionBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW);let n=t.getAttribLocation(this.program,"a_position");t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),this.colorBuffer||(this.colorBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,i,t.DYNAMIC_DRAW);let s=t.getAttribLocation(this.program,"a_color");t.enableVertexAttribArray(s),t.vertexAttribPointer(s,4,t.FLOAT,!1,0,0);let a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,r,t.DYNAMIC_DRAW);let o=t.getAttribLocation(this.program,"a_size");t.enableVertexAttribArray(o),t.vertexAttribPointer(o,1,t.FLOAT,!1,0,0),this._tempSizeBuffer=a}setParticleUniforms(t){let e=t.getUniformLocation(this.program,"u_resolution"),i=t.getUniformLocation(this.program,"u_time"),r=t.getUniformLocation(this.program,"u_forceStrength"),n=t.getUniformLocation(this.program,"u_effectType");t.uniform2f(e,this.webglCanvas.width,this.webglCanvas.height),t.uniform1f(i,this.getAnimationTime()),t.uniform1f(r,this.particleConfig.strength),t.uniform1i(n,{explode:0,vortex:1,gravity:2}[this.particleConfig.effectType]||0)}cleanupTempBuffers(t){let e=this._tempSizeBuffer;e&&(t.deleteBuffer(e),delete this._tempSizeBuffer)}applyCanvas2DExplode(t,e,i){let r=e.width/2,n=e.height/2;t.save(),t.globalAlpha=Math.max(0,1-i),t.translate(r,n);let s=1+.5*i;t.scale(s,s),t.translate(-r,-n),t.drawImage(e,0,0),t.restore()}applyCanvas2DGravity(t,e,i){t.save(),t.globalAlpha=Math.max(0,1-i);let r=i*e.height*.3;t.drawImage(e,0,r),t.restore()}applyCanvas2DVortex(t,e,i){let r=e.width/2,n=e.height/2;t.save(),t.globalAlpha=Math.max(0,1-i),t.translate(r,n),t.rotate(i*Math.PI*2),t.translate(-r,-n),t.drawImage(e,0,0),t.restore()}}class t6 extends tJ{constructor(t,e,i,r,n){var s,a;super(t,e,i,r,n),this.glitchConfig={effectType:(null==(s=null==n?void 0:n.options)?void 0:s.effectType)||"rgb-shift",intensity:void 0!==(null==(a=null==n?void 0:n.options)?void 0:a.intensity)?n.options.intensity:.5}}applyCanvas2DEffect(t){if(this.glitchConfig.intensity<=0){let e=this.createOutputCanvas(t);return e?e.canvas:null}try{switch(this.glitchConfig.effectType){case"rgb-shift":default:return this.applyRGBShiftGlitch(t);case"digital-distortion":return this.applyDigitalDistortionGlitch(t);case"scan-lines":return this.applyScanLineGlitch(t);case"data-corruption":return this.applyDataCorruptionGlitch(t)}}catch(t){return console.warn("Glitch effect failed:",t),null}}applyRGBShiftGlitch(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{i.clearRect(0,0,t.width,t.height);let r=t1.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),n=Math.floor(20*r),s=this.generateRandomOffset(n),a=this.generateRandomOffset(n,.3),o=this.generateRandomOffset(-n),l=t1.createTempCanvas(t.width,t.height),h=l.getContext("2d");h.drawImage(t,0,0);let u=h.getImageData(0,0,t.width,t.height),c=t1.extractChannel(u,0),d=t1.extractChannel(u,1),p=t1.extractChannel(u,2);return i.globalCompositeOperation="screen",h.clearRect(0,0,t.width,t.height),h.putImageData(c,0,0),i.drawImage(l,s.x,s.y),h.clearRect(0,0,t.width,t.height),h.putImageData(d,0,0),i.drawImage(l,a.x,a.y),h.clearRect(0,0,t.width,t.height),h.putImageData(p,0,0),i.drawImage(l,o.x,o.y),i.globalCompositeOperation="source-over",e.canvas}catch(t){return console.warn("RGB shift glitch failed:",t),null}}applyDigitalDistortionGlitch(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let r=i.getImageData(0,0,t.width,t.height),n=t1.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),s=this.processDigitalDistortion(r,n);return i.clearRect(0,0,t.width,t.height),i.putImageData(s,0,0),e.canvas}catch(t){return console.warn("Digital distortion glitch failed:",t),null}}applyScanLineGlitch(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let r=t1.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),n=Math.max(2,Math.floor(10-8*r));i.globalCompositeOperation="multiply";for(let e=0;e<t.height;e+=n)if(Math.random()<r){let n=.1+.4*r;i.fillStyle=`rgba(0, 0, 0, ${n})`,i.fillRect(0,e,t.width,1)}i.globalCompositeOperation="screen";let s=Math.floor(20*r);for(let e=0;e<s;e++){let e=Math.random()*t.height,n=.3*r;i.fillStyle=`rgba(255, 255, 255, ${n})`,i.fillRect(0,Math.floor(e),t.width,1)}return i.globalCompositeOperation="source-over",e.canvas}catch(t){return console.warn("Scan line glitch failed:",t),null}}applyDataCorruptionGlitch(t){let e=this.createOutputCanvas(t);if(!e)return null;let{ctx:i}=e;try{let r=i.getImageData(0,0,t.width,t.height),n=t1.calculateDynamicStrength(this.glitchConfig.intensity,this.getAnimationTime()),s=this.processDataCorruption(r,n);return i.clearRect(0,0,t.width,t.height),i.putImageData(s,0,0),e.canvas}catch(t){return console.warn("Data corruption glitch failed:",t),null}}generateRandomOffset(t,e=1){return{x:(Math.random()-.5)*t,y:(Math.random()-.5)*t*e}}processDigitalDistortion(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i),a=Math.floor(20*e)+5,o=Math.floor(n/a);for(let t=0;t<a;t++)if(Math.random()<e){let i=t*o,a=Math.min(i+o,n),l=Math.floor((Math.random()-.5)*r*e*.1);this.shiftSliceHorizontal(s,r,n,i,a,l)}let l=.3*e;for(let t=0;t<i.length;t+=4)Math.random()<l&&(s[t]=255*Math.random(),s[t+1]=255*Math.random(),s[t+2]=255*Math.random());return new ImageData(s,r,n)}shiftSliceHorizontal(t,e,i,r,n,s){let a=new Uint8ClampedArray(4*e);for(let i=r;i<n;i++){let r=i*e*4;for(let i=0;i<4*e;i++)a[i]=t[r+i];for(let i=0;i<e;i++){let n=r+4*i,o=(i-s+e)%e*4;t[n]=a[o],t[n+1]=a[o+1],t[n+2]=a[o+2],t[n+3]=a[o+3]}}}processDataCorruption(t,e){let{data:i,width:r,height:n}=t,s=new Uint8ClampedArray(i),a=Math.floor(15*e)+5;for(let t=0;t<a;t++)if(Math.random()<e){let t=Math.floor(Math.random()*r),e=Math.floor(5*Math.random())+1,i=.5>Math.random()?0:255;for(let a=0;a<n;a++)for(let n=0;n<e&&t+n<r;n++){let e=4*(a*r+t+n);s[e]=i,s[e+1]=i,s[e+2]=i}}let o=Math.floor(20*e);for(let t=0;t<o;t++){let t=Math.floor(Math.random()*r),e=Math.floor(Math.random()*n),i=Math.floor(20*Math.random())+5,a=Math.floor(10*Math.random())+2;this.corruptBlock(s,r,n,t,e,i,a)}return new ImageData(s,r,n)}corruptBlock(t,e,i,r,n,s,a){for(let o=0;o<a&&n+o<i;o++)for(let i=0;i<s&&r+i<e;i++){let s=4*((n+o)*e+(r+i));.7>Math.random()&&(t[s]=255*Math.random(),t[s+1]=255*Math.random(),t[s+2]=255*Math.random())}}}class t7 extends n._j{constructor(t,e,i,r,n){var s,a;super(t,e,i,r,n),this.blurConfig={blurRadius:(null==(s=null==n?void 0:n.options)?void 0:s.blurRadius)||8,useOptimizedBlur:void 0===(null==(a=null==n?void 0:n.options)?void 0:a.useOptimizedBlur)||n.options.useOptimizedBlur}}applyCSSBlur(t,e){let i=tK.rF.createCanvas({width:t.width,height:t.height,dpr:tK.rF.devicePixelRatio}),r=i.getContext("2d");return r?(r.filter=`blur(${e}px)`,r.drawImage(t,0,0),r.filter="none",i):t}applyDownsampleBlur(t,e){let{width:i,height:r}=t,n=Math.max(1,Math.floor(e/2)),s=Math.floor(i/n),a=Math.floor(r/n),o=tK.rF.createCanvas({width:s,height:a,dpr:1}),l=o.getContext("2d");if(!l)return t;let h=tK.rF.createCanvas({width:i,height:r,dpr:1}),u=h.getContext("2d");return u?(u.putImageData(t,0,0),l.drawImage(h,0,0,s,a),l.filter=`blur(${e/n}px)`,l.drawImage(o,0,0),l.filter="none",u.clearRect(0,0,i,r),u.drawImage(o,0,0,i,r),u.getImageData(0,0,i,r)):t}afterStageRender(t,e){let i;if(this.blurConfig.blurRadius<=0)return e;if(this.blurConfig.useOptimizedBlur)i=this.applyCSSBlur(e,this.blurConfig.blurRadius);else{let t=tK.rF.createCanvas({width:e.width,height:e.height,dpr:tK.rF.devicePixelRatio}),r=t.getContext("2d");if(!r)return!1;r.clearRect(0,0,e.width,e.height),r.drawImage(e,0,0);let n=r.getImageData(0,0,e.width,e.height),s=this.applyDownsampleBlur(n,this.blurConfig.blurRadius);r.putImageData(s,0,0),i=t}let r=i.getContext("2d");return r&&(r.globalCompositeOperation="overlay",r.fillStyle="rgba(255, 255, 255, 0.1)",r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="source-over"),i}}class t9 extends tQ{constructor(t,e,i,r,n){var s,a;super(t,e,i,r,n),this.pixelationConfig={maxPixelSize:(null==(s=null==n?void 0:n.options)?void 0:s.maxPixelSize)||20,method:(null==(a=null==n?void 0:n.options)?void 0:a.method)||"out"}}applyDownsamplePixelation(t,e){if(e<=1)return t;let{width:i,height:r}=t,n=Math.ceil(i/e),s=Math.ceil(r/e),a=tK.rF.createCanvas({width:n,height:s,dpr:1}),o=a.getContext("2d");if(!o)return t;let l=tK.rF.createCanvas({width:i,height:r,dpr:tK.rF.devicePixelRatio}),h=l.getContext("2d");return h?(o.imageSmoothingEnabled=!1,h.imageSmoothingEnabled=!1,o.drawImage(t,0,0,n,s),h.drawImage(a,0,0,i,r),l):t}updateAnimationProgress(){return"in"===this.pixelationConfig.method?this.pixelationConfig.maxPixelSize-this.currentAnimationRatio*(this.pixelationConfig.maxPixelSize-1):1+this.currentAnimationRatio*(this.pixelationConfig.maxPixelSize-1)}afterStageRender(t,e){let i=this.updateAnimationProgress();return i<=1?e:this.applyDownsamplePixelation(e,i)}}let et=()=>{r.a.registerBuiltInAnimate("increaseCount",ts),r.a.registerBuiltInAnimate("fromTo",tH),r.a.registerBuiltInAnimate("scaleIn",tp),r.a.registerBuiltInAnimate("scaleOut",tf),r.a.registerBuiltInAnimate("growHeightIn",T),r.a.registerBuiltInAnimate("growHeightOut",B),r.a.registerBuiltInAnimate("growWidthIn",J),r.a.registerBuiltInAnimate("growWidthOut",tt),r.a.registerBuiltInAnimate("growCenterIn",S),r.a.registerBuiltInAnimate("growCenterOut",A),r.a.registerBuiltInAnimate("clipIn",o),r.a.registerBuiltInAnimate("clipOut",l),r.a.registerBuiltInAnimate("fadeIn",h),r.a.registerBuiltInAnimate("fadeOut",u),r.a.registerBuiltInAnimate("growPointsIn",P),r.a.registerBuiltInAnimate("growPointsOut",O),r.a.registerBuiltInAnimate("growPointsXIn",z),r.a.registerBuiltInAnimate("growPointsXOut",Z),r.a.registerBuiltInAnimate("growPointsYIn",U),r.a.registerBuiltInAnimate("growPointsYOut",N),r.a.registerBuiltInAnimate("growAngleIn",v),r.a.registerBuiltInAnimate("growAngleOut",b),r.a.registerBuiltInAnimate("growRadiusIn",q),r.a.registerBuiltInAnimate("growRadiusOut",K),r.a.registerBuiltInAnimate("moveIn",tO),r.a.registerBuiltInAnimate("moveOut",tL),r.a.registerBuiltInAnimate("rotateIn",tW),r.a.registerBuiltInAnimate("rotateOut",tU),r.a.registerBuiltInAnimate("update",tE),r.a.registerBuiltInAnimate("state",tg),r.a.registerBuiltInAnimate("labelItemAppear",tr),r.a.registerBuiltInAnimate("labelItemDisappear",tn),r.a.registerBuiltInAnimate("poptipAppear",ta),r.a.registerBuiltInAnimate("poptipDisappear",to),r.a.registerBuiltInAnimate("inputText",te),r.a.registerBuiltInAnimate("inputRichText",th),r.a.registerBuiltInAnimate("outputRichText",tu),r.a.registerBuiltInAnimate("slideRichText",tc),r.a.registerBuiltInAnimate("slideOutRichText",td),r.a.registerBuiltInAnimate("slideIn",ty),r.a.registerBuiltInAnimate("growIn",tv),r.a.registerBuiltInAnimate("spinIn",tb),r.a.registerBuiltInAnimate("moveScaleIn",tw),r.a.registerBuiltInAnimate("moveRotateIn",tS),r.a.registerBuiltInAnimate("strokeIn",tx),r.a.registerBuiltInAnimate("slideOut",tA),r.a.registerBuiltInAnimate("growOut",tC),r.a.registerBuiltInAnimate("spinOut",tD),r.a.registerBuiltInAnimate("moveScaleOut",tT),r.a.registerBuiltInAnimate("moveRotateOut",tB),r.a.registerBuiltInAnimate("strokeOut",t_),r.a.registerBuiltInAnimate("pulse",tM),r.a.registerBuiltInAnimate("MotionPath",tN),r.a.registerBuiltInAnimate("streamLight",tq),r.a.registerBuiltInAnimate("dissolve",t3),r.a.registerBuiltInAnimate("grayscale",t5),r.a.registerBuiltInAnimate("distortion",t8),r.a.registerBuiltInAnimate("particle",t4),r.a.registerBuiltInAnimate("glitch",t6),r.a.registerBuiltInAnimate("gaussianBlur",t7),r.a.registerBuiltInAnimate("pixelation",t9)}},67412:function(t,e,i){"use strict";i.d(e,{a:()=>o});var r=i(43225),n=i(95723),s=i(96241);function a(t){if(!t||!(0,s.Z)(t))return 0;let e=Function.prototype.toString.call(t);if(/^class\s/.test(e))return 1;if(!t.prototype)return 2;if(t.prototype.constructor===t){let e=Object.getOwnPropertyDescriptor(t,"prototype");if(e&&!e.writable)return 1}return 2}class o{static registerBuiltInAnimate(t,e){o.builtInAnimateMap[t]=e}constructor(t){this._animates=[],this._startCallbacks=[],this._endCallbacks=[],this._started=!1,this._activeCount=0,this._target=t}get started(){return this._started}onStart(t){t?(this._startCallbacks.push(t),this._started&&this._activeCount>0&&t()):this._startCallbacks.forEach(t=>{t()})}onEnd(t){t?this._endCallbacks.push(t):this._endCallbacks.forEach(t=>{t()})}_trackAnimation(t){this._animates.push(t),this._activeCount++,1!==this._activeCount||this._started||(this._started=!0,this.onStart()),t.onEnd(()=>{this._activeCount--;let e=this._animates.indexOf(t);e>=0&&this._animates.splice(e,1),0===this._activeCount&&this._started&&(this._started=!1,this.onEnd())})}parseParams(t,e,i){var r,s;let l=this.resolveValue(t.totalTime,void 0,void 0),h=this.resolveValue(t.startTime,void 0,0),u=Object.assign({},t);u.oneByOneDelay=0,u.startTime=h,u.totalTime=l;let c=this.resolveValue(t.oneByOne,i,!1);if(e){let t=u.timeSlices;(0,n.Z)(t)||(u.timeSlices=[t]);let e=0;u.timeSlices=u.timeSlices.map(t=>{let r=this.resolveValue(t.delay,i,0),n=this.resolveValue(t.delayAfter,i,0),s=this.resolveValue(t.duration,i,300);return e+=r+s+n,Object.assign(Object.assign({},t),{delay:r,delayAfter:n,duration:s})});let r=0;c&&(r="number"==typeof c?c:c?e:0),u.oneByOneDelay=r;let s=1;if(l){let t=e+r*(this._target.count-2);s=l?l/t:1}u.timeSlices=u.timeSlices.map(t=>{let e=t.effects;return Array.isArray(e)||(e=[e]),Object.assign(Object.assign({},t),{delay:t.delay*s,delayAfter:t.delayAfter*s,duration:t.duration*s,effects:e.map(t=>{var e,i;let r=null!=(e=t.custom)?e:o.builtInAnimateMap[null!=(i=t.type)?i:"fromTo"],n=a(r);return Object.assign(Object.assign({},t),{custom:r,customType:n})})})}),u.oneByOneDelay=r*s,u.startTime=h*s}else{let e=this.resolveValue(t.delay,i,0),n=this.resolveValue(t.delayAfter,i,0),d=this.resolveValue(t.duration,i,300),p=0;c&&(p="number"==typeof c?c:c?e+n+d:0),u.oneByOneDelay=p,u.custom=null!=(r=t.custom)?r:o.builtInAnimateMap[null!=(s=t.type)?s:"fromTo"];let f=a(u.custom);if(u.customType=f,l){let t=e+n+d+p*(this._target.count-2),i=l?l/t:1;u.delay=e*i,u.delayAfter=n*i,u.duration=d*i,u.oneByOneDelay=p*i,u.startTime=h}}return u}execute(t){Array.isArray(t)?t.forEach(t=>this._execute(t)):this._execute(t)}_execute(t){let e;if(t.selfOnly)return this._executeItem(t,this._target,0,1);let i="timeSlices"in t;i&&t.partitioner&&(e=(null!=e?e:this._target.getChildren()).filter(e=>{var i,r;return t.partitioner(null==(r=null==(i=e.context)?void 0:i.data)?void 0:r[0],e,{})})),i&&t.sort&&(e=null!=e?e:this._target.getChildren()).sort((e,i)=>{var r,n,s,a;return t.sort(null==(n=null==(r=e.context)?void 0:r.data)?void 0:n[0],null==(a=null==(s=i.context)?void 0:s.data)?void 0:a[0],e,i,{})});let r=i?(e,r,n)=>{let s=this.parseParams(t,i,e),a=this.executeTimelineItem(s,e,r,n);a&&this._trackAnimation(a)}:(e,r,n)=>{let s=this.parseParams(t,i,e),a=this.executeTypeConfigItem(s,e,r,n);a&&this._trackAnimation(a)};e?e.forEach((t,i)=>r(t,i,e.length)):this._target.count<=1?r(this._target,0,1):this._target.forEachChildren((t,e)=>r(t,e,this._target.count-1))}executeTypeConfigItem(t,e,i,r){var n,a,o,l,h,u,c,d;let{type:p="fromTo",channel:f,customParameters:g,easing:m="linear",delay:y=0,delayAfter:v=0,duration:b=300,startTime:x=0,oneByOneDelay:_=0,loop:w,bounce:S,priority:A=0,options:C,custom:D,customType:T,controlOptions:B}=t,M=e.animate();M.priority=A;let E=(0,s.Z)(y)?y(null==(a=null==(n=e.context)?void 0:n.data)?void 0:a[0],e,{}):y,k=null==(l=null==(o=e.context)?void 0:o.data)?void 0:l[0],F=null==(h=e.context)?void 0:h.indexKey;k&&F&&(i=null!=(u=k[F])?u:i),M.startAt(x);let R=i*_+E;R>0&&M.wait(R);let P=null,O=t.to,L=t.from;O||(P||(P=this.createPropsFromChannel(f,e)),O=P.props),L||(P||(P=this.createPropsFromChannel(f,e)),L=P.from),this._handleRunAnimate(M,D,T,L,O,b,m,g,B,C,p,e);let I=0;_&&(I=_*(r-i-1));let z=(0,s.Z)(v)?v(null==(d=null==(c=e.context)?void 0:c.data)?void 0:d[0],e,{}):v;return z>0&&(I+=z),I>0&&M.wait(I),w&&w>0&&M.loop(w),S&&M.bounce(!0),M}_handleRunAnimate(t,e,i,r,n,o,l,h,u,c,d,p){var f,g,m,y,v,b,x,_;if(e&&i){i=a(e);let d=this.resolveValue(h,p);"function"==typeof d&&(d=d(null==(g=null==(f=p.context)?void 0:f.data)?void 0:g[0],p,{})),d=Object.assign({width:(null==(m=p.stage)?void 0:m.width)||0,height:(null==(y=p.stage)?void 0:y.height)||0,group:this._target.parent},d);let w=(0,s.Z)(c)?c.call(null,null!=(b=d&&(null==(v=d.data)?void 0:v[0]))?b:null==(_=null==(x=p.context)?void 0:x.data)?void 0:_[0],p,d):c;d.options=w,d.controlOptions=u,1===i?this.createCustomAnimation(t,e,r,n,o,l,d):2===i&&this.createCustomInterpolatorAnimation(t,e,n,o,l,d)}else"to"===d?t.to(n,o,l):"from"===d&&t.from(n,o,l)}executeTimelineItem(t,e,i,r){var n,s,a,o;let{timeSlices:l,startTime:h=0,loop:u,bounce:c,oneByOneDelay:d,priority:p,controlOptions:f}=t,g=null==(s=null==(n=e.context)?void 0:n.data)?void 0:s[0],m=null==(a=e.context)?void 0:a.indexKey;g&&m&&(i=null!=(o=g[m])?o:i);let y=e.animate();return y.priority=p,y.startAt(h),y.wait(i*d),u&&u>0&&y.loop(u),c&&y.bounce(!0),(Array.isArray(l)?l:[l]).forEach(t=>{this.applyTimeSliceToAnimate(t,y,e,f)}),d&&y.wait(d*(r-i-1)),y}applyTimeSliceToAnimate(t,e,i,r){var n,l,h,u;let{effects:c,duration:d=300,delay:p=0,delayAfter:f=0}=t,g=(0,s.Z)(p)?p(null==(l=null==(n=i.context)?void 0:n.data)?void 0:l[0],i,{}):p,m=(0,s.Z)(f)?f(null==(u=null==(h=i.context)?void 0:h.data)?void 0:u[0],i,{}):f;g>0&&e.wait(g),(Array.isArray(c)?c:[c]).forEach(t=>{var n;let{type:s="fromTo",channel:l,customParameters:h,easing:u="linear",options:c}=t,p=null,f=t.to,g=t.from;f||(p||(p=this.createPropsFromChannel(l,i)),f=p.props),g||(p||(p=this.createPropsFromChannel(l,i)),g=p.from);let m=null!=(n=t.custom)?n:o.builtInAnimateMap[s],y=t.custom?t.customType:a(m);this._handleRunAnimate(e,m,y,g,f,d,u,h,r,c,s,i)}),m>0&&e.wait(m)}createCustomInterpolatorAnimation(t,e,i,r,n,s){let a={};Object.keys(i).forEach(e=>{a[e]=t.target.getComputedAttribute(e)}),t.interpolateUpdateFunction=(i,r,n,a,o)=>{e(n,i,r,a,o,t.target,s)},t.to(i,r,n)}createCustomAnimation(t,e,i,r,n,s,a){let o=new e(i,r,n,s,a);t.play(o)}createPropsFromChannel(t,e){let i={},r=null;return t&&(Array.isArray(t)?t.forEach(t=>{var r,n;let s=null==(n=null==(r=e.context)?void 0:r.diffAttrs)?void 0:n[t];void 0!==s&&(i[t]=s)}):Object.keys(t).forEach(n=>{var s,a,o,l;let h=t[n];void 0!==h.to&&("function"==typeof h.to?i[n]=h.to(null==(a=null==(s=e.context)?void 0:s.data)?void 0:a[0],e,{}):i[n]=h.to),void 0!==h.from&&(r||(r={}),"function"==typeof h.from?r[n]=h.from(null==(l=null==(o=e.context)?void 0:o.data)?void 0:l[0],e,{}):r[n]=h.from)})),{from:r,props:i}}resolveValue(t,e,i){var r,n;return void 0===t?i:"function"==typeof t&&e?t(null==(n=null==(r=e.context)?void 0:r.data)?void 0:n[0],e,{}):t}executeItem(t,e,i=0,r=1){return Array.isArray(t)?t.map(t=>this._executeItem(t,e,i,r)).filter(Boolean):[this._executeItem(t,e,i,r)].filter(Boolean)}_executeItem(t,e,i=0,r=1){if(!e)return null;let n="timeSlices"in t,s=null,a=this.parseParams(t,n);return(s=n?this.executeTimelineItem(a,e,i,r):this.executeTypeConfigItem(a,e,i,r))&&this._trackAnimation(s),s}stop(t,e=!0){for(;this._animates.length>0;){let i=this._animates.pop();!1===e&&(i.status=r.t.END),null==i||i.stop(t)}this._animates=[],this._activeCount=0,this._started&&(this._started=!1,e&&this.onEnd())}}o.builtInAnimateMap={}},88237:function(t,e,i){"use strict";i.d(e,{d:()=>x});var r=i(52462),n=i(12430);class s{constructor(){this.transitions=new Map,this.registerDefaultTransitions()}static getInstance(){return s.instance||(s.instance=new s),s.instance}registerDefaultTransitions(){this.registerTransition("appear","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("appear","appear",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("appear","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("appear","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("normal","normal",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("normal","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("exit","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","enter",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","exit",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("enter","enter",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("enter","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("disappear","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("disappear","appear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("update","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("state","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","exit",()=>({allowTransition:!0,stopOriginalTransition:!0}))}isTransitionAllowed(t,e,i){var r,n,s,a;let o=null==(r=this.transitions.get(t))?void 0:r.get(e);return o||(o=null==(n=this.transitions.get(t))?void 0:n.get("*"))||(o=null==(s=this.transitions.get("*"))?void 0:s.get(e))||(o=null==(a=this.transitions.get("*"))?void 0:a.get("*"))?o(i,t):{allowTransition:!0,stopOriginalTransition:!0}}registerTransition(t,e,i){let r=this.transitions.get(t);r||(r=new Map,this.transitions.set(t,r)),r.set(e,i)}}s.getInstance();var a=i(67412),o=i(95723);let l="appear",h="disappear",u="update",c="highlight",d="unhighlight";class p{constructor(t){this.graphic=t}registerState(t){this.states||(this.states=new Map),this.states.set(t.name,t)}clearStates(){var t;null==(t=this.states)||t.clear()}}class f{constructor(t){this.stateList=null,this.graphic=t}applyState(t,e,i){let r=s.getInstance(),n=[],l=[];if(this.stateList&&this.stateList.length?t.forEach((t,i)=>{let s={allowTransition:!0};this.stateList.forEach(e=>{let i=r.isTransitionAllowed(e.state,t,this.graphic);s.allowTransition=s.allowTransition&&i.allowTransition}),s.allowTransition&&(l.push({state:t,animationConfig:(0,o.Z)(e[i])?e[i].map(t=>t.animation):e[i].animation,executor:new a.a(this.graphic)}),this.stateList.forEach(e=>{r.isTransitionAllowed(e.state,t,this.graphic).stopOriginalTransition&&n.push(e)}))}):t.forEach((t,i)=>{l.push({state:t,animationConfig:(0,o.Z)(e[i])?e[i].map(t=>t.animation):e[i].animation,executor:new a.a(this.graphic)})}),n.forEach(t=>{t.executor.stop(null,!1)}),l.length){l[0].executor.execute(l[0].animationConfig);for(let t=0;t<l.length;t++){let e=l[t+1],r=l[t];r.executor.onEnd(()=>{e&&e.executor.execute(e.animationConfig),this.stateList=this.stateList.filter(t=>t!==r),t===l.length-1&&i&&i(!1)})}}else i&&i(!0);this.stateList?this.stateList=this.stateList.filter(t=>!n.includes(t)):this.stateList=[],this.stateList.push(...l)}applyAppearState(t,e){this.applyState([l],[{name:l,animation:t}],e)}applyDisappearState(t,e){this.applyState([h],[{name:h,animation:t}],e)}applyUpdateState(t,e){this.applyState([u],[{name:u,animation:t}],e)}applyHighlightState(t,e){this.applyState([c],[{name:c,animation:t}],e)}applyUnhighlightState(t,e){this.applyState([d],[{name:d,animation:t}],e)}stopState(t,e){var i;let r=null==(i=this.stateList)?void 0:i.find(e=>e.state===t);r&&r.executor.stop(e)}clearState(){var t;null==(t=this.stateList)||t.forEach(t=>{t.executor.stop(null,!1)}),this.stateList=null}reApplyState(t){var e;let i=null==(e=this.stateList)?void 0:e.find(e=>e.state===t);if(i&&i.executor.started){let t=this.stateList.slice();i.executor.stop(),this.stateList=t,i.executor.execute(i.animationConfig)}}}class g{_getAnimationStateManager(t){return t._animationStateManager||(t._animationStateManager=new f(t)),t._animationStateManager}_getAnimationStateStore(t){return t._animationStateStore||(t._animationStateStore=new p(t)),t._animationStateStore}registerAnimationState(t){return this._getAnimationStateStore(this).registerState(t),this}applyAnimationState(t,e,i){return this._getAnimationStateManager(this).applyState(t,e,i),this}applyAppearState(t,e){return this._getAnimationStateManager(this).applyAppearState(t,e),this}applyDisappearState(t,e){return this._getAnimationStateManager(this).applyDisappearState(t,e),this}applyUpdateState(t,e){return this._getAnimationStateManager(this).applyUpdateState(t,e),this}applyHighlightState(t,e){return this._getAnimationStateManager(this).applyHighlightState(t,e),this}applyUnhighlightState(t,e){return this._getAnimationStateManager(this).applyUnhighlightState(t,e),this}stopAnimationState(t,e,i=!1){return this._getAnimationStateManager(this).stopState(t,e),i&&this.isContainer&&this.forEachChildren(r=>{r.stopAnimationState(t,e,i)}),this}clearAnimationStates(){let t=this._animationStateManager;return t&&t.clearState(),this}reApplyAnimationState(t,e=!1){let i=this._animationStateManager;return i&&i.reApplyState(t),e&&this.isContainer&&this.forEachChildren(i=>{i.reApplyAnimationState(t,e)}),this}static extend(t){return(new g)._getAnimationStateManager(t),t}}var m=i(96534),y=i(41551),v=i(71204);class b{getAttributes(t=!1){return t&&this.finalAttribute?this.finalAttribute:this.attribute}animate(t){var e,i,r;let n=new m.r(null==t?void 0:t.id,null!=(i=null!=(e=null==t?void 0:t.timeline)?e:this.stage&&this.stage.getTimeline())?i:y.P,null==t?void 0:t.slience);if(n.bind(this),t){let{onStart:e,onEnd:i,onRemove:r}=t;null!=e&&n.onStart(e),null!=i&&n.onEnd(i),null!=r&&n.onRemove(r)}return null==(r=this.stage)||r.ticker.start(),n}createTimeline(){return new y.L}createTicker(t){return new v.H(t)}setFinalAttributes(t){this.finalAttribute||(this.finalAttribute={}),Object.assign(this.finalAttribute,t)}initFinalAttributes(t){this.finalAttribute=t}initAnimateExecutor(){this._animateExecutor||(this._animateExecutor=new a.a(this))}executeAnimation(t){return this.initAnimateExecutor(),this._animateExecutor.execute(t),this}executeAnimations(t){return this.initAnimateExecutor(),t.forEach(t=>{this._animateExecutor.execute(t)}),this}getFinalAttribute(){return this.finalAttribute}getGraphicAttribute(t,e=!1){return!e&&this.finalAttribute?this.finalAttribute[t]:this.attribute[t]}pauseAnimation(t=!1){this.animates&&this.animates.forEach(t=>t.pause()),t&&this.isContainer&&this.forEachChildren(e=>{e.pauseAnimation(t)})}resumeAnimation(t=!1){this.animates&&this.animates.forEach(t=>t.resume()),t&&this.isContainer&&this.forEachChildren(e=>{e.resumeAnimation(t)})}stopAnimation(t=!1){this.animates&&this.animates.forEach(t=>t.stop()),t&&this.isContainer&&this.forEachChildren(e=>{e.stopAnimation(t)})}}function x(){(0,n.jB)(r.zs,g),(0,n.jB)(r.zs,b)}},66252:function(t,e,i){"use strict";i.d(e,{h:()=>p,o:()=>f});var r=i(27753),n=i(97958),s=i(8830);class a{constructor(){}static linear(t){return t}static none(){return this.linear}static get(t){return t<-1?t=-1:t>1&&(t=1),function(e){return 0===t?e:t<0?e*(-(e*t)+1+t):e*((2-e)*t+(1-t))}}static getPowIn(t){return function(e){return Math.pow(e,t)}}static getPowOut(t){return function(e){return 1-Math.pow(1-e,t)}}static getPowInOut(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}static getBackIn(t){return function(e){return e*e*((t+1)*e-t)}}static getBackOut(t){return function(e){return--e*e*((t+1)*e+t)+1}}static getBackInOut(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}static sineIn(t){return 1-Math.cos(t*Math.PI/2)}static sineOut(t){return Math.sin(t*Math.PI/2)}static sineInOut(t){return-(Math.cos(Math.PI*t)-1)/2}static expoIn(t){return 0===t?0:Math.pow(2,10*t-10)}static expoOut(t){return 1===t?1:1-Math.pow(2,-10*t)}static expoInOut(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}static circIn(t){return-(Math.sqrt(1-t*t)-1)}static circOut(t){return Math.sqrt(1- --t*t)}static circInOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}static bounceOut(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}static bounceIn(t){return 1-a.bounceOut(1-t)}static bounceInOut(t){return t<.5?.5*a.bounceIn(2*t):.5*a.bounceOut(2*t-1)+.5}static getElasticIn(t,e){return function(i){if(0===i||1===i)return i;let r=e/s.f7*Math.asin(1/t);return-t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*s.f7/e)}}static getElasticOut(t,e){return function(i){if(0===i||1===i)return i;let r=e/s.f7*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-r)*s.f7/e)+1}}static getElasticInOut(t,e){return function(i){let r=e/s.f7*Math.asin(1/t);return(i*=2)<1?-(t*Math.pow(2,10*(i-=1))*Math.sin((i-r)*s.f7/e)*.5):t*Math.pow(2,-10*(i-=1))*Math.sin((i-r)*s.f7/e)*.5+1}}static registerFunc(t,e){a[t]=e}}a.quadIn=a.getPowIn(2),a.quadOut=a.getPowOut(2),a.quadInOut=a.getPowInOut(2),a.cubicIn=a.getPowIn(3),a.cubicOut=a.getPowOut(3),a.cubicInOut=a.getPowInOut(3),a.quartIn=a.getPowIn(4),a.quartOut=a.getPowOut(4),a.quartInOut=a.getPowInOut(4),a.quintIn=a.getPowIn(5),a.quintOut=a.getPowOut(5),a.quintInOut=a.getPowInOut(5),a.backIn=a.getBackIn(1.7),a.backOut=a.getBackOut(1.7),a.backInOut=a.getBackInOut(1.7),a.elasticIn=a.getElasticIn(1,.3),a.elasticOut=a.getElasticOut(1,.3),a.elasticInOut=a.getElasticInOut(1,.3*1.5),a.easeInOutQuad=t=>(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2),a.easeOutElastic=t=>{let e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1},a.easeInOutElastic=t=>{let e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1};for(let t=0;t<10;t++)a[`flicker${t}`]=e=>(function(t,e){let i=1/e,r=1;for(;t>i;)t-=i,r*=-1;let n=r*t/i;return n>0?n:1+n})(e,t);for(let t=2;t<10;t++)a[`aIn${t}`]=e=>t*e*e+(1-t)*e;var o=i(51711),l=i(19626);let h=new class{constructor(){this.opacity=(t,e,i,r,n,s)=>{s.attribute.opacity=e+(i-e)*r},this.baseOpacity=(t,e,i,r,n,s)=>{s.attribute.baseOpacity=e+(i-e)*r},this.fillOpacity=(t,e,i,r,n,s)=>{s.attribute.fillOpacity=e+(i-e)*r},this.strokeOpacity=(t,e,i,r,n,s)=>{s.attribute.strokeOpacity=e+(i-e)*r},this.zIndex=(t,e,i,r,n,s)=>{s.attribute.zIndex=e+(i-e)*r},this.backgroundOpacity=(t,e,i,r,n,s)=>{s.attribute.backgroundOpacity=e+(i-e)*r},this.shadowOffsetX=(t,e,i,r,n,s)=>{s.attribute.shadowOffsetX=e+(i-e)*r},this.shadowOffsetY=(t,e,i,r,n,s)=>{s.attribute.shadowOffsetY=e+(i-e)*r},this.shadowBlur=(t,e,i,r,n,s)=>{s.attribute.shadowBlur=e+(i-e)*r},this.fill=(t,e,i,r,n,s)=>{s.attribute.fill=(0,o.BM)(e,i,r,!1)},this.fillPure=(t,e,i,r,n,s)=>{s.attribute.fill=n.fromParsedProps.fill?(0,o.Ib)(n.fromParsedProps.fill,n.toParsedProps.fill,r):n.toParsedProps.fill},this.stroke=(t,e,i,r,n,s)=>{s.attribute.stroke=(0,o.BM)(e,i,r,!1)},this.strokePure=(t,e,i,r,n,s)=>{s.attribute.stroke=n.fromParsedProps.stroke?(0,o.Ib)(n.fromParsedProps.stroke,n.toParsedProps.stroke,r):n.toParsedProps.stroke},this.width=(t,e,i,r,n,s)=>{s.attribute.width=e+(i-e)*r,s.addUpdateBoundTag()},this.height=(t,e,i,r,n,s)=>{s.attribute.height=e+(i-e)*r,s.addUpdateBoundTag()},this.x=(t,e,i,r,n,s)=>{s.attribute.x=e+(i-e)*r,s.addUpdateBoundTag(),s.addUpdatePositionTag()},this.y=(t,e,i,r,n,s)=>{s.attribute.y=e+(i-e)*r,s.addUpdateBoundTag(),s.addUpdatePositionTag()},this.dx=(t,e,i,r,n,s)=>{s.attribute.dx=e+(i-e)*r,s.addUpdateBoundTag(),s.addUpdatePositionTag()},this.dy=(t,e,i,r,n,s)=>{s.attribute.dy=e+(i-e)*r,s.addUpdateBoundTag(),s.addUpdatePositionTag()},this.angle=(t,e,i,r,n,s)=>{s.attribute.angle=e+(i-e)*r,s.addUpdateBoundTag(),s.addUpdatePositionTag()},this.scaleX=(t,e,i,r,n,s)=>{s.attribute.scaleX=e+(i-e)*r,s.addUpdateBoundTag(),s.addUpdatePositionTag()},this.scaleY=(t,e,i,r,n,s)=>{s.attribute.scaleY=e+(i-e)*r,s.addUpdateBoundTag(),s.addUpdatePositionTag()},this.lineWidth=(t,e,i,r,n,s)=>{s.attribute.lineWidth=e+(i-e)*r,s.addUpdateBoundTag()},this.startAngle=(t,e,i,r,n,s)=>{s.attribute.startAngle=e+(i-e)*r,s.addUpdateBoundTag()},this.endAngle=(t,e,i,r,n,s)=>{s.attribute.endAngle=e+(i-e)*r,s.addUpdateBoundTag()},this.radius=(t,e,i,r,n,s)=>{s.attribute.radius=e+(i-e)*r,s.addUpdateBoundTag()},this.outerRadius=(t,e,i,r,n,s)=>{s.attribute.outerRadius=e+(i-e)*r,s.addUpdateBoundTag()},this.innerRadius=(t,e,i,r,n,s)=>{s.attribute.innerRadius=e+(i-e)*r,s.addUpdateBoundTag()},this.size=(t,e,i,r,n,s)=>{s.attribute.size=e+(i-e)*r,s.addUpdateBoundTag()},this.points=(t,e,i,r,n,s)=>{s.attribute.points=(0,l.SA)(e,i,r),s.addUpdateBoundTag()}}};function u(t,e,i,r,n,s){if(Number.isFinite(i)&&Number.isFinite(e))return s.attribute[t]=e+(i-e)*r,!0;if(Array.isArray(i)&&Array.isArray(e)&&i.length===e.length){let n=[],a=!0;for(let t=0;t<i.length;t++){let s=e[t],o=s+(i[t]-s)*r;if(!Number.isFinite(o)){a=!1;break}n.push(o)}return a&&(s.attribute[t]=n),!0}return!1}var c=i(83624);function d(){}class p{constructor(t,e,i,n){var s;this._startTime=0,this._hasFirstRun=!1,this._syncAttributeUpdate=()=>{this.target.setAttributes(this.target.attribute)},this.type=t,this.props=e,this.duration=i,this.easing=n?"function"==typeof n?n:null!=(s=a[n])?s:a.linear:a.linear,"wait"===t&&(this.onUpdate=d),this.id=r.R.GenAutoIncrementId(),this.syncAttributeUpdate=d}bind(t,e){this.target=t,this.animate=e,this.onBind(),this.syncAttributeUpdate()}append(t){this.next=t,t.prev=this,t.setStartTime(this.getStartTime()+this.duration,!1)}updateDownstreamStartTimes(){let t=this.next,e=this._startTime+this.duration;for(;t;)t.setStartTime(e,!1),e+=t.duration,t=t.next;this.animate.updateDuration()}getLastProps(){return this.prev?this.prev.props||{}:this.animate.getStartProps()}setDuration(t,e=!0){this.duration=t,e&&this.updateDownstreamStartTimes()}getDuration(){return this.duration}determineInterpolateUpdateFunction(){if(!this.props)return;let t=[];this.propKeys.forEach(e=>{if("fill"===e||"stroke"===e){let i=this.fromProps[e],r=this.props[e];if((0,c.Z)(i)&&(0,c.Z)(r)){let s=n.VH.Get(i,n.Mr.Color255),a=n.VH.Get(r,n.Mr.Color255);this.fromParsedProps||(this.fromParsedProps={}),this.toParsedProps||(this.toParsedProps={}),this.fromParsedProps[e]=s,this.toParsedProps[e]=a,t.push(h["fill"===e?"fillPure":"strokePure"])}else h[e]?t.push(h[e]):t.push(u)}else h[e]?t.push(h[e]):t.push(u)}),this.interpolateUpdateFunctions=t}setStartTime(t,e=!0){this._startTime=t,e&&this.updateDownstreamStartTimes()}getStartTime(){return this._startTime}onBind(){"glyph"===this.target.type&&(this.syncAttributeUpdate=this._syncAttributeUpdate)}onFirstRun(){}onStart(){if(!this._hasFirstRun){this._hasFirstRun=!0,this.fromProps=this.getLastProps();let t=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(e=>{var i;this.fromProps[e]=null!=(i=this.fromProps[e])?i:t[e]}),this.determineInterpolateUpdateFunction(),this.tryPreventConflict(),this.trySyncStartProps(),this.onFirstRun()}}tryPreventConflict(){let t=this.animate;this.target.animates.forEach(e=>{if(e===t||e.priority>t.priority||e.priority===1/0)return;let i=e.getStartProps();this.propKeys.forEach(t=>{null!=i[t]&&e.preventAttr(t)})})}deleteSelfAttr(t){var e;delete this.props[t],this.fromProps&&delete this.fromProps[t];let i=this.propKeys.indexOf(t);-1!==i&&(this.propKeys.splice(i,1),null==(e=this.interpolateUpdateFunctions)||e.splice(i,1))}trySyncStartProps(){this.propKeys.forEach(t=>{this.fromProps[t]=this.animate.target.getComputedAttribute(t)})}update(t,e,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(e);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((t,e)=>{if(!this.animate.validAttr(this.propKeys[e]))return;let i=this.propKeys[e];t(i,this.fromProps[i],this.props[i],r,this,this.target)}),this.onUpdate(t,r,i),this.syncAttributeUpdate()}onUpdate(t,e,i){}onEnd(t){this.target.setAttributes(this.props),t?this._endCb=t:this._endCb&&this._endCb(this.animate,this)}getEndProps(){return this.props}getFromProps(){return this.fromProps}getMergedEndProps(){return this.getEndProps()}stop(){}release(){}}class f extends p{constructor(t,e,i,r){super(t,e,i,r)}onStart(){super.onStart();let t=this.getFromProps();this.target.setAttributes(t)}update(t,e,i){this.onStart()}determineInterpolateUpdateFunction(){}}},71204:function(t,e,i){"use strict";i.d(e,{H:()=>c});var r,n,s=i(21883),a=i.n(s),o=i(30528);(r=n||(n={}))[r.INITIAL=0]="INITIAL",r[r.RUNNING=1]="RUNNING",r[r.PAUSE=2]="PAUSE";var l=i(92631);let h=new o.A;class u{constructor(){this.released=!1}tick(t,e){h.addAnimationFrameCb(()=>{if(!this.released)return e(this)})}release(){this.released=!0}getTime(){return Date.now()}}class c extends a(){constructor(t){super(),this.timelines=[],this.frameTimeHistory=[],this.handleTick=(t,e)=>{let{once:i=!1}=null!=e?e:{};if(this.ifCanStop())return this.stop(),!1;let r=t.getTime();this._lastTickTime=r,this.lastFrameTime<0&&(this.lastFrameTime=r-this.interval+this.timeOffset,this.frameTimeHistory.push(this.lastFrameTime));let n=r-this.lastFrameTime,s=this.checkSkip(n);return s||(this._handlerTick(n),this.lastFrameTime=r,this.frameTimeHistory.push(this.lastFrameTime)),i||t.tick(this.interval,this.handleTick),!s},this._handlerTick=t=>{this.status===n.RUNNING&&(this.tickCounts++,this.timelines.forEach(e=>{e.tick(t)}),this.emit("tick",t))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.stage=t,this.autoStop=!0,this.interval=16,this.computeTimeOffsetAndJitter()}bindStage(t){this.stage=t}computeTimeOffsetAndJitter(){this.timeOffset=Math.floor(Math.random()*this.interval),this._jitter=Math.min(Math.max(.2*this.interval,6),.7*this.interval)}init(){this.interval=16,this.status=n.INITIAL,l.w.global.hooks.onSetEnv.tap("graph-ticker",()=>{this.initHandler(!1)}),l.w.global.env&&this.initHandler(!1)}addTimeline(t){this.timelines.push(t)}remTimeline(t){this.timelines=this.timelines.filter(e=>e!==t)}getTimelines(){return this.timelines}initHandler(t=!1){this.setupTickHandler(t)}setupTickHandler(t=!1){if(!t&&this.tickerHandler)return!0;let e=new u;return this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=e,!0}setInterval(t){this.interval=t,this.computeTimeOffsetAndJitter()}getInterval(){return this.interval}setFPS(t){this.setInterval(Math.floor(1e3/t))}getFPS(){return 1e3/this.interval}tick(t){this.tickerHandler.tick(t,t=>this.handleTick(t,{once:!0}))}tickTo(t){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(t,t=>{this.handleTick(t,{once:!0})})}pause(){return this.status!==n.INITIAL&&(this.status=n.PAUSE,!0)}resume(){return this.status!==n.INITIAL&&(this.status=n.RUNNING,!0)}ifCanStop(){return!!(this.autoStop&&(!this.timelines.length||this.timelines.every(t=>!t.isRunning())))||!1}start(t=!1){return!(this.status===n.RUNNING||!this.tickerHandler||!t&&(this.status===n.PAUSE||this.ifCanStop()))&&(this.status=n.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=n.INITIAL,this.setupTickHandler(!0),this.lastFrameTime=-1}trySyncTickStatus(){this.status===n.INITIAL&&this.timelines.some(t=>t.isRunning())?this.start():this.status===n.RUNNING&&this.timelines.every(t=>!t.isRunning())&&this.stop()}release(){var t;this.stop(),this.timelines=[],null==(t=this.tickerHandler)||t.release(),this.tickerHandler=null,this.lastFrameTime=-1}checkSkip(t){var e,i,r;return"performance"!==(null==(r=null==(i=null==(e=this.stage)?void 0:e.params)?void 0:i.optimize)?void 0:r.tickRenderMode)&&t<this.interval+2*(Math.random()-.5)*this._jitter}}},41551:function(t,e,i){"use strict";i.d(e,{L:()=>o,P:()=>l});var r=i(27753),n=i(43225),s=i(21883),a=i.n(s);class o extends a(){get animateCount(){return this._animateCount}constructor(){super(),this.head=null,this.tail=null,this.animateMap=new Map,this._animateCount=0,this._playSpeed=1,this._totalDuration=0,this._startTime=0,this._currentTime=0,this._animationEndFlag=!0,this.id=r.R.GenAutoIncrementId(),this.paused=!1}isRunning(){return!this.paused&&this._animateCount>0}forEachAccessAnimate(t){let e=this.head,i=0;for(;e;){let r=e.next;t(e.animate,i),i++,e=r}}addAnimate(t){let e={animate:t,next:null,prev:null};this.head?this.tail&&(this.tail.next=e,e.prev=this.tail,this.tail=e):(this.head=e,this.tail=e),this.animateMap.set(t,e),this._animateCount++,this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())}pause(){this.paused=!0}resume(){this.paused=!1}tick(t){if(this.paused)return;this._animationEndFlag&&(this._animationEndFlag=!1,this.emit("animationStart"));let e=t*this._playSpeed;this._currentTime+=e,this.forEachAccessAnimate((t,i)=>{t.status===n.t.END?this.removeAnimate(t,!0):t.status!==n.t.RUNNING&&t.status!==n.t.INITIAL||t.advance(e)}),0===this._animateCount&&(this._animationEndFlag=!0,this.emit("animationEnd"))}clear(){this.forEachAccessAnimate(t=>{t.release()}),this.head=null,this.tail=null,this.animateMap.clear(),this._animateCount=0,this._totalDuration=0}removeAnimate(t,e=!0){let i=this.animateMap.get(t);i&&(e&&(t._onRemove&&t._onRemove.forEach(t=>t()),t.release()),i.prev?i.prev.next=i.next:this.head=i.next,i.next?i.next.prev=i.prev:this.tail=i.prev,this.animateMap.delete(t),this._animateCount--,t.getStartTime()+t.getDuration()>=this._totalDuration&&this.recalculateTotalDuration())}recalculateTotalDuration(){this._totalDuration=0,this.forEachAccessAnimate(t=>{this._totalDuration=Math.max(this._totalDuration,t.getStartTime()+t.getDuration())})}getTotalDuration(){return this._totalDuration}getPlaySpeed(){return this._playSpeed}setPlaySpeed(t){this._playSpeed=t}getPlayState(){return this.paused?"paused":0===this.animateCount?"stopped":"playing"}setStartTime(t){this._startTime=t}getStartTime(){return this._startTime}getCurrentTime(){return this._currentTime}setCurrentTime(t){this._currentTime=t}}let l=new o;l.isGlobal=!0},94231:function(t,e,i){"use strict";i.d(e,{P:()=>n,p:()=>r});let r={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},labelHoverOnAxis:{visible:!1,space:7,padding:2,position:0,autoRotate:!1,textStyle:{fontSize:12,fill:"red",fontWeight:"normal",fillOpacity:1},background:{visible:!0,style:{cornerRadius:2,fill:"black"}}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}},n={size:8,stroke:"#000",lineWidth:1,zIndex:1}},1769:function(t,e,i){"use strict";i.d(e,{$:()=>tW});var r,n,s,a,o,l,h=i(64639),u=i(20408),c=i(44843),d=i(36163),p=i(25397),f=i(54326),g=i(89530),m=i(99051),y=i(96241),v=i(64776),b=i(12430),x=i(66987),_=i(95723),w=i(50322),S=i(11511),A=i(67286),C=i(64871),D=i(34505),T=i(77909),B=i(22415),M=i(89677),E=i(13922),k=i(34865),F=i(26845),R=i(47816),P=i(17852),O=i(10773);function L(t,e,i,r){if(e&&e.length){t.moveTo(e[0].x+i,e[0].y+r);for(let n=1;n<e.length;n++)t.lineTo(e[n].x+i,e[n].y+r)}}function I(t,e){return Math.sqrt(t*t+e*e)}function z(t,e,i,r,n){let s=e/i;return{x:t.x-r*s,y:t.y-n*s}}var Z=i(75946);let j=i(60865).H,W=M.R6;var U=function(t,e){return function(i,r){e(i,r,t)}};let N=class extends Z.Y{constructor(t){super(),this.graphicRenderContributions=t,this.numberType=O.Kh,this.builtinContributions=[W,j],this.init(t)}drawShape(t,e,i,r,n,s,a,o){let l=(0,P.gh)(t,null==s?void 0:s.theme).polygon,{points:h=l.points,cornerRadius:u=l.cornerRadius,x:c=l.x,y:d=l.y,closePath:p=l.closePath,fillStrokeOrder:f=l.fillStrokeOrder}=t.attribute,g=this.valid(t,l,a,o);if(!g)return;let{fVisible:m,sVisible:y,doFill:v,doStroke:b}=g;e.beginPath(),u<=0||(0,_.Z)(u)&&u.every(t=>0===t)?L(e.camera?e:e.nativeContext,h,i,r):function(t,e,i,r,n,s=!0){var a;if(e.length<3)return L(t,e,i,r);let o=0,l=e.length-1;s||(o+=1,l-=1,t.moveTo(e[0].x+i,e[0].y+r));for(let s=o;s<=l;s++){let o=e[0===s?l:(s-1)%e.length],h=e[s%e.length],u=e[(s+1)%e.length],c=h.x-o.x,d=h.y-o.y,p=h.x-u.x,f=h.y-u.y,g=Math.abs(Math.tan((Math.atan2(d,c)-Math.atan2(f,p))/2)),m=Array.isArray(n)?null!=(a=n[s%e.length])?a:0:n,y=m/g,v=I(c,d),b=I(p,f),x=Math.min(v,b);y>x&&(y=x,m=x*g);let _=z(h,y,v,c,d),w=z(h,y,b,p,f),S=2*h.x-_.x-w.x,A=2*h.y-_.y-w.y,C=I(S,A),D=z(h,I(y,m),C,S,A),T=Math.atan2(_.y-D.y,_.x-D.x),B=Math.atan2(w.y-D.y,w.x-D.x),M=B-T;M<0&&(T=B,M=-M),M>Math.PI&&(M-=Math.PI),0===s?t.moveTo(_.x+i,_.y+r):t.lineTo(_.x+i,_.y+r),M&&t.arcTo(h.x+i,h.y+r,w.x+i,w.y+r,m),t.lineTo(w.x+i,w.y+r)}s||t.lineTo(e[l+1].x+i,e[l+1].y+r)}(e.camera?e:e.nativeContext,h,i,r,u,p),p&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,i,r,v,b,m,y,l,n,a,o);let x=()=>{v&&(a?a(e,t.attribute,l):m&&(e.setCommonStyle(t,t.attribute,c-i,d-r,l),e.fill()))},w=()=>{b&&(o?o(e,t.attribute,l):y&&(e.setStrokeStyle(t,t.attribute,c-i,d-r,l),e.stroke()))};f?(w(),x()):(x(),w()),this.afterRenderStep(t,e,i,r,v,b,m,y,l,n,a,o)}draw(t,e,i,r){let n=(0,P.gh)(t,null==r?void 0:r.theme).polygon;this._draw(t,n,!1,i,r)}};N=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,k.b)(),U(0,(0,F.f)(T.Qc)),U(0,(0,R.t)(E.U7)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],N);var H=i(32227);let G=!1,V=new B.n(t=>{G||(G=!0,t(H.ZT).to(N).inSingletonScope(),t(H.uz).toService(H.ZT),t(E.U7).toService(M.Sg),(0,T.yb)(t,E.U7))});var X=i(66417),Y=i(57355),$=i(55082);let q=class extends $.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=O.Kh}};q=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,k.b)(),(r=(0,F.f)(H.ZT),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],q);let K=!1,Q=new B.n((t,e,i,r)=>{K||(K=!0,t(Y.ww).to(q).inSingletonScope(),t(Y.EL).toService(Y.ww))}),J=class extends $.o{constructor(t){super(),this.canvasRenderer=t,this.type="polygon",this.numberType=O.Kh}};J=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,k.b)(),(n=(0,F.f)(H.ZT),function(t,e){n(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],J);let tt=!1,te=new B.n((t,e,i,r)=>{tt||(tt=!0,t(Y.uV).to(J).inSingletonScope(),t(Y.XN).toService(Y.uV))});function ti(){ti.__loaded||(ti.__loaded=!0,x.i.RegisterGraphicCreator("polygon",C.p),D.n.load(V),D.n.load(X.X?Q:te))}ti.__loaded=!1;var tr=i(16636),tn=i(9762);(0,S.M)(),(0,A.N)(),ti(),(0,tr.k)();class ts extends w.k{getStartAngle(){return(0,tn.LW)(this._startAngle)}getEndAngle(){return(0,tn.LW)(this._endAngle)}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,u.Z)({},ts.defaultAttributes,t)),this.name="segment",this.key="segment",this.lines=[]}render(){this.removeAllChild(!0),this._reset();let{startSymbol:t,endSymbol:e,lineStyle:i,state:r,visible:n=!0,multiSegment:s,mainSegmentIndex:a}=this.attribute;if(!n)return;this._computeLineAngle();let o=this._getMainSegmentPoints(),l=this._renderSymbol(t,o,"start"),h=this._renderSymbol(e,o,"end");if(this.startSymbol=l,this.endSymbol=h,s){let t=[...this.attribute.points];if((0,g.Z)(a))t[a]=this._clipPoints(t[a]);else{let e=this._clipPoints((0,m.VF)(t));t[0][0]=e[0],t[t.length-1][t[t.length-1].length-1]=e[e.length-1]}t.forEach((t,e)=>{var n,s;let a=x.i.line(Object.assign(Object.assign({points:t},(0,_.Z)(i)?null!=(n=i[e])?n:i[i.length-1]:i),{fill:!1}));a.name=`${this.name}-line`,a.id=this._getNodeId("line"+e),(0,c.Z)(null==r?void 0:r.line)||(a.states=(0,_.Z)(r.line)?null!=(s=r.line[e])?s:r.line[r.line.length-1]:r.line),this.add(a),this.lines.push(a)})}else{let t=x.i.line;(0,m.IX)(i)[0].cornerRadius&&(t=x.i.polygon);let e=t(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},(0,m.IX)(i)[0]),{fill:!1,closePath:!1}));e.name=`${this.name}-line`,e.id=this._getNodeId("line"),(0,c.Z)(null==r?void 0:r.line)||(e.states=[].concat(r.line)[0]),this.add(e),this.lines.push(e)}}_computeStartRotate(t){return t+Math.PI/2}_computeEndRotate(t){return t+Math.PI/2}_renderSymbol(t,e,i){let r;if(!e.length)return;let{autoRotate:n=!0}=t;if(t&&t.visible){let s,a,o=this.getStartAngle(),l=this.getEndAngle(),{state:h}=this.attribute,u=e[0],d=e[e.length-1],{refX:p=0,refY:f=0,refAngle:m=0,style:y,symbolType:v,size:b=12}=t;"start"===i?(s={x:u.x+((0,g.Z)(o)?p*Math.cos(o)+f*Math.cos(o-Math.PI/2):0),y:u.y+((0,g.Z)(o)?p*Math.sin(o)+f*Math.sin(o-Math.PI/2):0)},a=this._computeStartRotate(this._startAngle)):(s={x:d.x+((0,g.Z)(l)?p*Math.cos(l)+f*Math.cos(l-Math.PI/2):0),y:d.y+((0,g.Z)(l)?p*Math.sin(l)+f*Math.sin(l-Math.PI/2):0)},a=this._computeEndRotate(this._endAngle)),(r=x.i.symbol(Object.assign(Object.assign(Object.assign({},s),{symbolType:v,size:b,angle:n?a+m:0,strokeBoundsBuffer:0}),y))).name=`${this.name}-${i}-symbol`,r.id=this._getNodeId(`${i}-symbol`),(0,c.Z)(null==h?void 0:h.symbol)||(r.states=h.symbol),"start"===i?(0,c.Z)(null==h?void 0:h.startSymbol)||(r.states=h.startSymbol):(0,c.Z)(null==h?void 0:h.endSymbol)||(r.states=h.endSymbol),this.add(r)}return r}_getMainSegmentPoints(){let t;if(this._mainSegmentPoints)return this._mainSegmentPoints;let{points:e,multiSegment:i,mainSegmentIndex:r}=this.attribute;return t=i?(0,g.Z)(r)?e[r]:(0,m.VF)(e):e,this._mainSegmentPoints=t,t}_clipPoints(t){let{startSymbol:e={},endSymbol:i={}}=this.attribute,r=t;if(e.visible){let i=e.clip?e.size||10:0;r=[{x:t[0].x-i/2*(Math.cos(this._startAngle)||0),y:t[0].y-i/2*(Math.sin(this._startAngle)||0)},...r.slice(1)]}if(i.visible){let e=i.clip?i.size||10:0,n={x:t[t.length-1].x-e/2*(Math.cos(this._endAngle)||0),y:t[t.length-1].y-e/2*(Math.sin(this._endAngle)||0)};r=[...r.slice(0,r.length-1),n]}return r}_computeLineAngle(){let t=this._getMainSegmentPoints();if(t.length<=1)return;let e=t[0],i=t[1],r=t[t.length-2],n=t[t.length-1],s=[e.x-i.x,e.y-i.y],a=Math.atan2(s[1],s[0]),o=[n.x-r.x,n.y-r.y],l=Math.atan2(o[1],o[0]);this._startAngle=a,this._endAngle=l}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}ts.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}};var ta=i(80494),to=i(59417),tl=i(75133),th=i(65755),tu=i(8830),tc=i(26152),td=i(56431),tp=i(1573);(s=o||(o={})).innerView="inner-view",s.axisContainer="axis-container",s.labelContainer="axis-label-container",s.tickContainer="axis-tick-container",s.tick="axis-tick",s.subTick="axis-sub-tick",s.label="axis-label",s.title="axis-title",s.labelHoverOnAxis="axis-label-hover-on-axis",s.gridContainer="axis-grid-container",s.grid="axis-grid",s.gridRegion="axis-grid-region",s.line="axis-line",s.background="axis-background",s.axisLabelBackground="axis-label-background",s.axisBreak="axis-break",s.axisBreakSymbol="axis-break-symbol",(a=l||(l={})).selected="selected",a.selectedReverse="selected_reverse",a.hover="hover",a.hoverReverse="hover_reverse";let tf={[l.selectedReverse]:{},[l.selected]:{},[l.hover]:{},[l.hoverReverse]:{}};var tg=i(94231),tm=i(79521);let ty=(t,e,i)=>{let r=t.target;return r!==i&&r.name&&!(0,c.Z)(r.states)?(r.addState(tp.HW.hover,!0),(0,td.Ck)(e,t=>{t!==r&&t.name&&!(0,c.Z)(t.states)&&t.addState(tp.HW.hoverReverse,!0)}),r):i},tv=(t,e,i)=>i?((0,td.Ck)(e,t=>{t.name&&!(0,c.Z)(t.states)&&(t.removeState(tp.HW.hoverReverse),t.removeState(tp.HW.hover))}),null):i,tb=(t,e,i)=>{let r=t.target;return i===r&&r.hasState(tp.HW.selected)?((0,td.Ck)(e,t=>{t.name&&!(0,c.Z)(t.states)&&(t.removeState(tp.HW.selectedReverse),t.removeState(tp.HW.selected))}),null):r.name&&!(0,c.Z)(r.states)?(r.addState(tp.HW.selected,!0),(0,td.Ck)(e,t=>{t!==r&&t.name&&!(0,c.Z)(t.states)&&t.addState(tp.HW.selectedReverse,!0)}),r):i};var tx=i(80971);class t_ extends w.k{_prepareAnimate(t){if(!1!==this.attribute.animation){let{animation:e,animationEnter:i,animationExit:r,animationUpdate:n}=this.attribute,s=(0,tx.Z)(e)?e:{};this._animationConfig={enter:!1!==i&&(0,u.Z)({},t,s,null!=i?i:{}),exit:!1!==r&&(0,u.Z)({},t,s,null!=r?r:{}),update:!1!==n&&((0,_.Z)(n)?n:(0,u.Z)({},t,s,null!=n?n:{}))}}else this._animationConfig={enter:!1,exit:!1,update:!1}}}let tw={type:"default",duration:300,easing:"linear"};class tS extends t_{constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=t=>{this._lastHover=ty(t,this.axisContainer,this._lastHover)},this._onUnHover=t=>{this._lastHover=tv(t,this.axisContainer,this._lastHover)},this._onClick=t=>{this._lastSelect=tb(t,this.axisContainer,this._lastSelect)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(t){let e=(0,th.Z)(this.attribute);e.scale=this.attribute.scale,this.attribute=t;let i=x.i.group({x:this.attribute.x,y:this.attribute.y});return this.add(i),this._renderInner(i),this.removeChild(i),this.attribute=e,i.AABBBounds}render(){this._prepare(),this._prevInnerView=this._innerView&&(0,tm.uX)(this._innerView),this.removeAllChild(!0),this._innerView=x.i.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent(),this.runAnimation()}_prepare(){this._prepareAnimate(tw)}_bindEvent(){if(this.attribute.disableTriggerEvent)return;let{hover:t,select:e}=this.attribute;t&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),e&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(t){let{title:e,label:i,tick:r,line:n,items:s}=this.attribute,a=x.i.group({x:0,y:0,zIndex:1,pickable:!1});if(a.name=o.axisContainer,a.id=this._getNodeId("container"),a.setMode(this.mode),this.axisContainer=a,t.add(a),n&&n.visible&&this.renderLine(a),s&&s.length&&(this.data=this._transformItems(s[0]),r&&r.visible&&this.renderTicks(a),i&&i.visible)){let t=x.i.group({x:0,y:0,pickable:!1});t.name=o.labelContainer,t.id=this._getNodeId("label-container"),this.axisLabelsContainer=t,a.add(t),s.forEach((e,i)=>{let r=this.renderLabels(t,e,i),n=r.getChildren();this.beforeLabelsOverlap(n,e,r,i,s.length),this.handleLabelsOverlap(n,e,r,i,s.length),this.afterLabelsOverlap(n,e,r,i,s.length);let a=0,o=0,l="center",h="middle",u=0;n.forEach((t,e)=>{var i;let r=t.attribute,n=null!=(i=r.angle)?i:0,s=t.AABBBounds,c=s.width(),d=s.height();n&&(c=Math.abs(c*Math.cos(n)),d=Math.abs(d*Math.sin(n))),a=Math.max(a,c),o=Math.max(o,d),l=r.textAlign,h=r.textBaseline,0===e&&(u=r.x)}),this.axisLabelLayerSize[i]={width:a,height:o,labelPos:u,textAlign:l,textBaseline:h}})}e&&e.visible&&this.renderTitle(a)}renderTicks(t){let e=this.getTickLineItems(),i=x.i.group({x:0,y:0,pickable:!1});i.name=o.tickContainer,i.id=this._getNodeId("tick-container"),t.add(i),e.forEach((t,r)=>{var n;let s=x.i.line(Object.assign({},this._getTickLineAttribute("tick",t,r,e)));if(s.name=o.tick,s.id=this._getNodeId(t.id),(0,c.Z)(null==(n=this.attribute.tick)?void 0:n.state))s.states=tp.n0;else{let t=this.data[r],e=(0,u.Z)({},tp.n0,this.attribute.tick.state);Object.keys(e).forEach(i=>{(0,y.Z)(e[i])&&(e[i]=e[i](t.rawValue,r,t,this.data))}),s.states=e}i.add(s)}),this.tickLineItems=e;let{subTick:r}=this.attribute;if(r&&r.visible){let t=this.getSubTickLineItems();t.length&&t.forEach((t,n)=>{let s=x.i.line(Object.assign({},this._getTickLineAttribute("subTick",t,n,e)));if(s.name=o.subTick,s.id=this._getNodeId(`${n}`),(0,c.Z)(r.state))s.states=tp.n0;else{let i=(0,u.Z)({},tp.n0,r.state);Object.keys(i).forEach(r=>{(0,y.Z)(i[r])&&(i[r]=i[r](t.value,n,t,e))}),s.states=i}i.add(s)}),this.subTickLineItems=t}}renderLabels(t,e,i){let{dataFilter:r}=this.attribute.label;r&&(0,y.Z)(r)&&(e=r(e,i));let n=this._transformItems(e),s=x.i.group({x:0,y:0,pickable:!1});return s.name=`${o.labelContainer}-layer-${i}`,s.id=this._getNodeId(`label-container-layer-${i}`),t.add(s),n.forEach((t,e)=>{var r;let a=this._getLabelAttribute(t,e,n,i),l=(0,tc.vS)(a);if(l.name=o.label,l.id=this._getNodeId(`layer${i}-label-${t.id}`),(0,c.Z)(null==(r=this.attribute.label)?void 0:r.state))l.states=tp.n0;else{let r=(0,u.Z)({},tp.n0,this.attribute.label.state);Object.keys(r).forEach(s=>{(0,y.Z)(r[s])&&(r[s]=r[s](t,e,n,i))}),l.states=r}l.data=Object.assign(Object.assign({},t),{index:e,layer:i}),s.add(l)}),s}renderTitle(t){let e=this.getTitleAttribute(),i=new to.V(Object.assign({},e));i.name=o.title,i.id=this._getNodeId("title"),t.add(i)}getVerticalCoord(t,e,i){return(0,tm.cN)(t,this.getVerticalVector(e,i,t))}getTickLineItems(){let{tick:t}=this.attribute,e=this.data,i=[],{alignWithLabel:r,inside:n=!1,length:s,dataFilter:a}=t,o=1;return e.length>=2&&(o=e[1].value-e[0].value),(a&&(0,y.Z)(a)?a(e):e).forEach(t=>{let e=t.point,a=t.value;if(!r){let i=t.value-o/2;if(this.isInValidValue(i))return;e=this.getTickCoord(i),a=i}let l=this.getVerticalCoord(e,s,n);if("3d"===this.mode){let r=this.getVerticalVector(s,n,e),o=0,h=0;(0,tu.Wn)(r[0])>(0,tu.Wn)(r[1])?o=tu.pi/2*(l.x>e.x?1:-1):h=tu.pi/2*(l.y>e.y?-1:1),i.push({start:e,end:l,value:a,id:`tick-${t.id}`,anchor:[e.x,e.y],alpha:o,beta:h})}else i.push({start:e,end:l,value:a,id:`tick-${t.id}`})}),i}getSubTickLineItems(){let{subTick:t}=this.attribute,e=[],{count:i=4,inside:r=!1,length:n=2}=t,s=this.tickLineItems,a=s.length;if(a>=2)for(let t=0;t<a-1;t++){let a=s[t],o=s[t+1];for(let t=0;t<i;t++){let s=(t+1)/(i+1),l=(1-s)*a.value+s*o.value,h=this.getTickCoord(l),u=this.getVerticalCoord(h,n,r);e.push({start:h,end:u,value:l,id:`sub-tick-${l}`})}}return e}_getTickLineAttribute(t,e,i,r){let n=(0,p.Z)(this.attribute,`${t}.style`),s=this.data[i];n=(0,y.Z)(n)?(0,u.Z)({},(0,p.Z)(tg.p,`${t}.style`),"tick"===t?n(s.rawValue,i,s,this.data):n(e.value,i,e,r)):n;let{start:a,end:o,anchor:l,alpha:h,beta:c}=e;return Object.assign({points:[a,o],anchor:l,alpha:h,beta:c},n)}_getLabelAttribute(t,e,i,r){var n,s;let{space:a=4,inside:o=!1,formatMethod:l,type:h="text",text:c}=this.attribute.label,d=a,f=0;(null==(n=this.attribute.tick)?void 0:n.visible)&&this.attribute.tick.inside===o&&(f=this.attribute.tick.length||4),(null==(s=this.attribute.subTick)?void 0:s.visible)&&this.attribute.subTick.inside===o&&(f=Math.max(f,this.attribute.subTick.length||2)),d+=f;let g=this.getRelativeVector(t.point);r>0&&(0===g[1]?d+=(this.axisLabelLayerSize[r-1].height+(0,p.Z)(this.attribute,"label.space",4))*r:d+=(this.axisLabelLayerSize[r-1].width+(0,p.Z)(this.attribute,"label.space",4))*r);let m=this.getVerticalCoord(t.point,d,o),v=this.getVerticalVector(d||1,o,m),b=l?l(`${t.label}`,t,e,i,r):t.label,{style:x}=this.attribute.label;x=(0,y.Z)(x)?(0,u.Z)({},tg.p.label.style,x(t,e,i,r)):x;let _=this.getLabelAlign(v,o,x.angle);return x=(0,u.Z)(_,x),(0,y.Z)(x.text)&&(x.text=x.text({label:t.label,value:t.rawValue,index:t.index,layer:r})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(m,v,b,x)),{text:null!=c?c:b,_originText:t.label,lineHeight:null==x?void 0:x.fontSize,type:h}),x)}getLabelPosition(t,e,i,r){return t}_transformItems(t){let e=[];return t.forEach(t=>{var i;e.push(Object.assign(Object.assign({},t),{point:this.getTickCoord(t.value),id:null!=(i=t.id)?i:t.label}))}),e}runAnimation(){let t=this.lastScale;if(this.attribute.scale){let t=this.attribute.scale;this.lastScale=t.clone(),this.lastScale.range([0,1])}if(this.attribute.animation&&this.applyAnimationState){let e=this.getInnerView(),i=this.getPrevInnerView();if(!i)return;let r=this._animationConfig;this._newElementAttrMap={},(0,td.Ck)(e,e=>{var n;if("group"!==e.type&&e.id){let s=i[e.id];if(e.setFinalAttributes(e.attribute),s){s.release();let i=s.attribute,a=e.getFinalAttribute(),o=function(t,e,i){let r={};for(let i in e)i in t&&(0,tl.X)(t[i],e[i])||(r[i]=e[i]);return r}(i,a),l=Object.keys(o).length>0;if("opacity"in i&&a.opacity!==i.opacity&&(o.opacity=null!=(n=a.opacity)?n:1,l=!0),r.update&&l){this._newElementAttrMap[e.id]={state:"update",node:e,attrs:e.attribute};let i=s.attribute;e.setAttributes(i),e.applyAnimationState(["update"],[{name:"update",animation:Object.assign(Object.assign({selfOnly:!0},r.update),{type:"axisUpdate",customParameters:{config:r.update,diffAttrs:o,lastScale:t}})}])}}else r.enter&&(this._newElementAttrMap[e.id]={state:"enter",node:e,attrs:e.attribute},e.applyAnimationState(["enter"],[{name:"enter",animation:Object.assign(Object.assign({},r.enter),{type:"axisEnter",selfOnly:!0,customParameters:{config:r.enter,lastScale:t,getTickCoord:this.getTickCoord.bind(this)}})}]))}})}}release(){super.release(),this._prevInnerView=null,this._innerView=null}}let tA={parity:function(t){return t.filter((t,e)=>e%2?t.setAttribute("opacity",0):1)},greedy:function(t,e){let i;return t.filter((t,r)=>r&&(0,tm.qw)(i,t,e)?t.setAttribute("opacity",0):(i=t,1))}};function tC(t){let e;return(e=t.OBBBounds.empty()?t.AABBBounds:t.OBBBounds).width()>1&&e.height()>1}function tD(t,e,i,r,n=!1){if(i&&!t.attribute.opacity){let i=e.length;if(i>1){t.setAttribute("opacity",1);for(let t=0;t<i;t++){let s=n?e[i-1-t]:e[t];if(!r(s))break;s.setAttribute("opacity",0)}}}}var tT=i(36760);function tB(t=0){if(t<0)for(;t<0;)t+=2*Math.PI;if(t>0)for(;t>=2*Math.PI;)t-=2*Math.PI;return t}function tM(t,e=0){let i,r=["center","left","left","left","center","right","right","right","left"],n=["top","top","middle","bottom","bottom","bottom","middle","top","top"];"top"===t&&(r=["center","right","right","right","center","left","left","left","right"],n=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);let s=(e=tB(e))/(.5*Math.PI);return{textAlign:r[i=s===Math.floor(s)?2*Math.floor(s):2*Math.floor(s)+1],textBaseline:n[i]}}function tE(t,e=0){let i,r=["right","right","center","left","left","left","center","right","right"],n=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];"right"===t&&(r=["left","left","center","right","right","right","center","left","left"],n=["middle","middle","bottom","bottom","middle","middle","top","middle","middle"]);let s=(e=tB(e))/(.5*Math.PI);return{textAlign:r[i=s===Math.floor(s)?2*Math.floor(s):2*Math.floor(s)+1],textBaseline:n[i]}}function tk(t,e,i){let r;return(0,g.Z)(e)&&(r=Math.abs(e-t)),(0,g.Z)(i)&&(r=(0,g.Z)(r)?Math.min(Math.abs(t-i),r):Math.abs(t-i)),r}var tF=i(74512),tR=i(24599),tP=i(99754),tO=i(15982),tL=i(1444),tI=i(67412);class tz extends tO.Or{onBind(){var t;let e=(0,tL.L)(this.target);this._animator=e;let i=this.duration,r=this.easing,{config:n,lastScale:s,getTickCoord:a}=this.params,o=1,l=this.target.data;if(s&&a&&l){o=.7;let t=a(s.scale(l.rawValue)),n=this.target.attribute.x,h=this.target.attribute.y;this.target.setAttributes({x:t.x,y:t.y}),e.animate(this.target,{type:"to",to:{x:n,y:h},duration:i,easing:r})}e.animate(this.target,{type:null!=(t=n.type)?t:"fadeIn",to:n.to,duration:i*o,easing:r}),this.completeBind(e)}}class tZ extends tO.Or{onBind(){let t=(0,tL.L)(this.target);this._animator=t;let e=this.duration,i=this.easing,{config:r,diffAttrs:n}=this.params;t.animate(this.target,{type:"to",to:Object.assign({},n),duration:e,easing:i,customParameters:{diffAttrs:Object.assign({},n)}}),this.completeBind(t)}deleteSelfAttr(t){super.deleteSelfAttr(t),this._animator.deleteSelfAttr(t)}tryPreventConflict(){}}var tj=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)0>e.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i};(0,S.M)(),(0,A.N)(),(0,tF.v)(),(0,tR.g)(),tI.a.registerBuiltInAnimate("axisEnter",tz),tI.a.registerBuiltInAnimate("axisUpdate",tZ),(0,tP.k)();class tW extends tS{constructor(t,e){var i;if(t.labelHoverOnAxis&&(t.labelHoverOnAxis.textStyle=Object.assign({},t.label.style,t.labelHoverOnAxis.textStyle),void 0===t.labelHoverOnAxis.space)){let{padding:e=2}=t.labelHoverOnAxis,r=(0,h.o)(e),n="bottom"===t.orient?r[0]:"left"===t.orient?r[1]:"top"===t.orient?r[2]:r[3],s=(null!=(i=t.label.space)?i:tW.defaultAttributes.label.space)-n;t.labelHoverOnAxis.space=s}super((null==e?void 0:e.skipDefault)?t:(0,u.Z)({},tW.defaultAttributes,t),e),this.labelHoverOnAxisGroup=null}_renderInner(t){var e;if(this._breaks=null,this.attribute.breaks&&this.attribute.breaks.length){let t=[];for(let e=0;e<this.attribute.breaks.length;e++){let{range:i,breakSymbol:r,rawRange:n}=this.attribute.breaks[e];t.push({startPoint:this.getTickCoord(i[0]),endPoint:this.getTickCoord(i[1]),range:i,breakSymbol:r,rawRange:n})}this._breaks=t}super._renderInner(t),this._breaks&&this._breaks.length&&this._breaks.forEach((e,i)=>{let{startPoint:r,endPoint:n,breakSymbol:s,rawRange:a}=e;if(!1!==(null==s?void 0:s.visible)){let e=x.i.group({zIndex:999});e.name=o.axisBreak,e.id=this._getNodeId(`${o.axisBreak}-${i}`),e.data=a;let l=(0,tm.uf)(s),h=x.i.symbol(Object.assign({x:r.x,y:r.y},l));h.name=o.axisBreakSymbol;let u=x.i.symbol(Object.assign({x:n.x,y:n.y},l));u.name=o.axisBreakSymbol,e.add(h),e.add(u),t.add(e)}});let{panel:i}=this.attribute;if(i&&i.visible){let t=this.axisContainer,r=t.AABBBounds,n=x.i.rect(Object.assign({x:r.x1,y:r.y1,width:r.width(),height:r.height()},i.style));n.name=o.background,n.id=this._getNodeId("background"),n.states=(0,u.Z)({},tf,null!=(e=i.state)?e:{}),t.insertBefore(n,t.firstChild)}let{labelHoverOnAxis:r}=this.attribute;r&&r.visible&&this.renderLabelHoverOnAxis()}renderLabelHoverOnAxis(){let t=this.getLabelHoverOnAxisAttribute(),e=new to.V(Object.assign({},t));e.name=o.title,e.id=this._getNodeId("hover-on-label"),this.labelHoverOnAxisGroup=e,this.axisContainer.add(e)}renderLine(t){let{start:e,end:i,line:r}=this.attribute,{startSymbol:n,endSymbol:s,style:a,state:l}=r,h=Object.assign({startSymbol:n,endSymbol:s,lineStyle:a},tj(r,["startSymbol","endSymbol","style","state"]));if(this._breaks&&this._breaks.length){let t=[],r=e;this._breaks.forEach(e=>{let{startPoint:i,endPoint:n}=e;t.push([r,i]),r=n}),t.push([r,i]),h.points=t,h.multiSegment=!0}else h.points=[e,i];(0,c.Z)(l)||(h.state={line:(0,u.Z)({},tf,l),symbol:(0,u.Z)({},tf,l)});let d=new ts(h);d.name=o.line,d.id=this._getNodeId("line"),t.add(d)}getTextAlign(t){let e="center";return(0,d.Yt)(t[0],0)?(0,d.Yt)(t[1],0)?Object.is(t[1],-0)?e="start":Object.is(t[0],-0)&&(e="end"):e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e}getTitleAttribute(){var t,e,i;let r=this.attribute.title,{position:n="middle",space:s=4,textStyle:a={},autoRotate:o=!0,shape:l,background:h,state:c={},maxWidth:d}=r,m=tj(r,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]),y=.5;"start"===n?y=0:"end"===n&&(y=1);let{verticalFactor:v=1}=this.attribute,b=this.getTickCoord(y),x=this.getRelativeVector(),_=0;if((null==(t=this.attribute.label)?void 0:t.visible)&&!1===this.attribute.label.inside){let t=+(0,p.Z)(this.attribute,"label.space",4);_+=t;let e=Object.keys(this.axisLabelLayerSize).length;if(0===x[1]){let i=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(i)?_+=i+(e-1)*t:_=0}else if(0===x[0])if(this.axisLabelsContainer&&this.axisLabelsContainer.AABBBounds&&!this.axisLabelsContainer.AABBBounds.empty()){let i=this.axisLabelLayerSize[0].labelPos,r=this.axisLabelsContainer.AABBBounds;_+=(1==-1*v?r.x2>i?Math.min(r.x2-i,r.width()):0:r.x1<i?Math.min(i-r.x1,r.width()):0)+(e-1)*t}else _=0;else Object.keys(this.axisLabelLayerSize).forEach((e,i)=>{_+=this.axisLabelLayerSize[e].width+(i>0?t:0)})}let w=0;(null==(e=this.attribute.tick)?void 0:e.visible)&&!1===this.attribute.tick.inside&&(w=this.attribute.tick.length||4),(null==(i=this.attribute.subTick)?void 0:i.visible)&&!1===this.attribute.subTick.inside&&(w=Math.max(w,this.attribute.subTick.length||2));let S=w+_+s,A=this.getActualOffset(S),C=this.getVerticalCoord(b,A,!1),D=this.getVerticalVector(A,!1,{x:0,y:0}),T,B,{angle:M}=m;if(T="start"===n?"start":"end"===n?"end":"center",(0,f.Z)(M)&&o){M=(0,ta.Dg)(x,[1,0],!0);let{verticalFactor:t=1}=this.attribute;B=1==-1*t?"bottom":"top"}else T=this.getTextAlign(D),B=this.getTextBaseline(D,!1);let E=d;if((0,f.Z)(E)){let{verticalLimitSize:t,verticalMinSize:e,orient:i}=this.attribute,r=Math.min(t||1/0,e||1/0);if((0,g.Z)(r))if("bottom"===i||"top"===i)if(M!==Math.PI/2){let t=Math.abs(Math.cos(null!=M?M:0));E=t<1e-6?1/0:this.attribute.end.x/t}else E=r-A;else if(M&&0!==M){let t=Math.abs(Math.sin(M));E=t<1e-6?1/0:this.attribute.end.y/t}else E=r-A}let k=Object.assign(Object.assign(Object.assign({},C),m),{maxWidth:E,textStyle:Object.assign({textAlign:T,textBaseline:B},a),state:{text:(0,u.Z)({},tf,c.text),shape:(0,u.Z)({},tf,c.shape),panel:(0,u.Z)({},tf,c.background)}});return k.angle=M,l&&l.visible&&(k.shape=Object.assign({visible:!0},l.style),l.space&&(k.space=l.space)),h&&h.visible&&(k.panel=Object.assign({visible:!0},h.style)),k}getLabelHoverOnAxisAttribute(){var t,e;let{orient:i}=this.attribute,r=this.attribute.labelHoverOnAxis,{position:n=0,space:s=4,autoRotate:a=!0,textStyle:o={},background:l={},formatMethod:h,text:u="",maxWidth:c}=r,d=tj(r,["position","space","autoRotate","textStyle","background","formatMethod","text","maxWidth"]),p=this.getTickCoord(0);"bottom"===i||"top"===i?p.x=n:p.y=n;let g=0;(null==(t=this.attribute.tick)?void 0:t.visible)&&!1===this.attribute.tick.inside&&(g=this.attribute.tick.length||4),(null==(e=this.attribute.subTick)?void 0:e.visible)&&!1===this.attribute.subTick.inside&&(g=Math.max(g,this.attribute.subTick.length||2));let m=g+0+s,y=this.getVerticalCoord(p,m,!1),v=this.getVerticalVector(m,!1,{x:0,y:0}),b,{angle:x}=d,_="center";if((0,f.Z)(x)&&a){let t=this.getRelativeVector();x=(0,ta.Dg)(t,[1,0],!0);let{verticalFactor:e=1}=this.attribute;b=1==-1*e?"bottom":"top"}else{let{textAlign:t,textBaseline:e}=this.getLabelAlign(v,!1,o.angle);_=t,b=e}let w=h?h(u):u,S=Object.assign(Object.assign(Object.assign({},y),d),{maxWidth:c,textStyle:Object.assign({textAlign:_,textBaseline:b},o),text:w});return S.angle=x,l&&l.visible&&(S.panel=Object.assign(Object.assign({visible:!0},d.panel),l.style)),S}getTextBaseline(t,e){let i="middle",{verticalFactor:r=1}=this.attribute;return(0,d.Yt)(t[1],0)?i=!(0,d.Yt)(t[0],0)||Object.is(t[0],-0)||Object.is(t[1],-0)?"middle":1==(e?1:-1)*r?"bottom":"top":t[1]>0?i="top":t[1]<0&&(i="bottom"),i}getLabelAlign(t,e,i){let r=this.attribute.orient;if(["top","bottom","right","left"].includes(r)||0===t[0]&&0===t[1]){if("top"===r||"bottom"===r)return tM(e?"bottom"===r?"top":"bottom":r,i);if("left"===r||"right"===r)return tE(e?"left"===r?"right":"left":r,i)}return{textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline(t,e)}}beforeLabelsOverlap(t,e,i,r,n){var s,a,o,l;let{flush:h=!1}=this.attribute.label||{};if(h&&t.length){let{orient:e,start:i,end:r}=this.attribute,n="bottom"===e||"top"===e,h=t[0],u=(0,m.Z$)(t),c=n?h.attribute.x>u.attribute.x:h.attribute.y<u.attribute.y;if(n){let t=c?u:h,e=c?h:u,n=i.x,o=r.x,l=t.AABBBounds.x1,d=e.AABBBounds.x2;l<n&&(t.attribute.angle?t.setAttributes({dx:(null!=(s=t.attribute.dx)?s:0)+n-l}):t.setAttributes({x:n,textAlign:"left"})),d>o&&(e.attribute.angle?e.setAttributes({dx:(null!=(a=e.attribute.dx)?a:0)+o-d}):e.setAttributes({x:o,textAlign:"right"}))}else{let t=c?u:h,e=c?h:u,n=t.AABBBounds.y2,s=e.AABBBounds.y1,a=i.y,d=r.y;s<a&&(e.attribute.angle?e.setAttributes({dy:(null!=(o=e.attribute.dy)?o:0)+a-s}):e.setAttributes({y:a,textBaseline:"top"})),n>d&&(t.attribute.angle?t.setAttributes({dy:(null!=(l=t.attribute.dy)?l:0)+d-n}):t.setAttributes({y:d,textBaseline:"bottom"}))}}}handleLabelsOverlap(t,e,i,r,n){if((0,c.Z)(t))return;let{verticalLimitSize:s,label:a,orient:o}=this.attribute,l=this._getAxisLabelLimitLength(s,n),{layoutFunc:h,autoRotate:u,autoRotateAngle:d,autoLimit:p,limitEllipsis:v,autoHide:b,autoHideMethod:x,autoHideSeparation:_,lastVisible:w,firstVisible:S,autoWrap:A,overflowLimitLength:C}=a;if((0,y.Z)(h))h(t,e,r,this);else{if(u)!function(t,e){if((0,c.Z)(t))return;let{orient:i,labelRotateAngle:r=[0,45,90]}=e;if(0===r.length||t.some(t=>!!t.attribute.angle))return;let n=0,s=0,a=r;for(t.length>2&&("bottom"===i||"top"===i?Math.abs(t[1].attribute.x-t[0].attribute.x)<t[0].attribute.fontSize/2&&(a=[r[r.length-1]]):Math.abs(t[1].attribute.y-t[0].attribute.y)<t[0].attribute.fontSize/2&&(a=[r[r.length-1]])),a&&a.length>0&&(s=a.length);n<s;){var o,l;let e=a[n++];if(t.forEach(t=>{t.attribute.angle=(0,tn.M4)(e)}),o=i,l=t,"bottom"!==o&&"top"!==o||function(t,e){e.forEach(e=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},tM(t,e.attribute.angle)),{angle:tB(e.attribute.angle)}))})}(o,l),"left"!==o&&"right"!==o||function(t,e){e.forEach((e,i)=>{e.attribute.angle&&e.setAttributes(Object.assign(Object.assign({},tE(t,e.attribute.angle)),{angle:tB(e.attribute.angle)}))})}(o,l),(0,tT.PY)(l),!function(t){for(let e=1;e<t.length;e++)if((0,tT.Ph)(t[e-1],t[e]))return!0;return!1}(t))break}}(t,{labelRotateAngle:d,orient:o});else if(A){let e="left"===o||"right"===o?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x);!function(t,e){let{limitLength:i,axisLength:r,ellipsis:n="...",orient:s}=e;if((0,c.Z)(t)||!(0,g.Z)(i))return;let a=t[0].attribute.angle,o=(0,tT.nw)(a),l=(0,tT.GK)(a),h="top"===s||"bottom"===s,u=r/t.length;t.forEach((e,r)=>{var s,a,c,d,p;if(h){if(l&&Math.floor(e.AABBBounds.height())<=i)return;if(o){let i=tk(e.attribute.x,null==(s=t[r+1])?void 0:s.attribute.x,null==(a=t[r-1])?void 0:a.attribute.x);(0,g.Z)(i)&&(u=(0,tu.VV)(u,i))}}else{if(l){let i=tk(e.attribute.y,null==(c=t[r+1])?void 0:c.attribute.y,null==(d=t[r-1])?void 0:d.attribute.y);(0,g.Z)(i)&&(u=(0,tu.VV)(u,i))}if(o&&Math.floor(e.AABBBounds.width())<=i)return}let f=null,m=null;h?l?(f=i,m=u):(f=u,m=i):l?(f=u,m=i):(f=i,m=u),e.setAttributes({maxLineWidth:f,ellipsis:null!=(p=e.attribute.ellipsis)?p:n,whiteSpace:"normal",heightLimit:m})})}(t,{orient:o,limitLength:l,axisLength:e,ellipsis:v})}if(!A&&p&&(0,g.Z)(l)&&l>0){let e="left"===o||"right"===o,i=e?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x),r=e?i/t.length:b||u?1/0:i/t.length;!function(t,e){var i;let{limitLength:r,verticalLimitLength:n,ellipsis:s="...",orient:a,axisLength:o}=e;if((0,c.Z)(t)||!(0,g.Z)(r))return;let l=(i=e.overflowLimitLength,(0,g.Z)(i)?{left:i,right:i}:(0,tx.Z)(i)?{left:i.left||0,right:i.right||0}:{left:0,right:0}),h=t[0],u=h.attribute.angle,d=!(0,f.Z)(u),p=d?Math.cos(u):1,m=d?Math.sin(u):0,y=(0,tT.nw)(u),v=(0,tT.GK)(u),b="top"===a||"bottom"===a,x=h.attribute.direction,_=!y&&!v&&b&&(t.length<2||t.some(t=>Math.abs(t.AABBBounds.width()-h.AABBBounds.width())>=2))&&h.AABBBounds.width()>Math.abs(r/m);t.forEach(t=>{var e;if(b&&(v&&Math.floor(t.AABBBounds.height())<=r||y&&Math.floor(t.AABBBounds.width())<=n))return;if(!b&&("vertical"===x&&Math.floor(t.AABBBounds.height())<=n||"vertical"!==x&&(y&&Math.floor(t.AABBBounds.width())<=r||v&&Math.floor(t.AABBBounds.height())<=n)))return;let i=null;if(y||v)i=b?y?n:r:"vertical"===x||v?n:r;else if(b){let{x1:e,x2:n}=t.AABBBounds,s=m/p,a=Math.abs(r/m);i=_&&s>0&&e<=o+l.right&&r/s+e>o+l.right?Math.min((o-e+l.right)/Math.abs(p),a):_&&s<0&&n>=-l.left&&r/s+n<-l.left?Math.min((n+l.left)/Math.abs(p),a):a}else i=Math.abs(r/p);(0,g.Z)(t.attribute.maxLineWidth)&&(i=(0,g.Z)(i)?Math.min(t.attribute.maxLineWidth,i):t.attribute.maxLineWidth),t.setAttributes({maxLineWidth:i,ellipsis:null!=(e=t.attribute.ellipsis)?e:s})})}(t,{limitLength:l,verticalLimitLength:r,ellipsis:v,orient:o,axisLength:i,overflowLimitLength:C})}b&&function(t,e){let i;if((0,c.Z)(t))return;let r=t.filter(tC);if((0,c.Z)(r))return;r.forEach(t=>t.setAttribute("opacity",1)),i=r;let{method:n="parity",separation:s=0}=e,a=(0,y.Z)(n)?n:tA[n]||tA.parity;if(i.length>=3&&(0,tm.A9)(i,s)){do i=a(i,s);while(i.length>=3&&(0,tm.A9)(i,s));let t=(t,e,i=!0)=>i&&t<3||e,n=t(i.length,e.firstVisible,!1),o=t(i.length,e.lastVisible),l=r[0],h=(0,m.Z$)(r);(0,tm.qw)(l,h,s)&&n&&o&&(h.setAttribute("opacity",0),o=!1),tD(l,i,n,t=>(0,tm.qw)(t,l,s)),tD(h,i,o,t=>(0,tm.qw)(t,h,s)||!(!n||t===l)&&(0,tm.qw)(t,l,s),!0)}r.forEach(t=>{t.setAttribute("visible",!!t.attribute.opacity)})}(t,{orient:o,method:x,separation:_,lastVisible:w,firstVisible:S})}}afterLabelsOverlap(t,e,i,r,n){let{verticalLimitSize:s,orient:a}=this.attribute,l="bottom"===a||"top"===a,h=i.AABBBounds,u=l?h.height():h.width(),{verticalMinSize:c}=this.attribute;if((0,g.Z)(c)&&(!(0,g.Z)(s)||c<=s)){let t,e;u=Math.max(u,this._getAxisLabelLimitLength(c,n)),"left"===a?(t=h.x2-u,e=h.y1):"right"===a?(t=h.x1,e=h.y1):"top"===a?(t=h.x1,e=h.y2-u):"bottom"===a&&(t=h.x1,e=h.y1);let r=x.i.rect({x:t,y:e,width:l?h.width():u,height:l?u:h.height(),pickable:!1});r.name=o.axisLabelBackground,r.id=this._getNodeId("axis-label-background"),i.insertBefore(r,i.firstChild)}if((0,v.Z)(this.attribute.label.containerAlign)){var d,p,f;let e;"left"===a?e=h.x2-u:"right"===a?e=h.x1:"top"===a?e=h.y2-u:"bottom"===a&&(e=h.y1),d=e,p=u,f=this.attribute.label.containerAlign,"left"===a||"right"===a?"left"===f?t.forEach(t=>{var e;t.setAttributes({dx:(null!=(e=t.attribute.dx)?e:0)+d-t.AABBBounds.x1})}):"right"===f?t.forEach(t=>{var e;t.setAttributes({dx:(null!=(e=t.attribute.dx)?e:0)+d+p-t.AABBBounds.x2})}):"center"===f&&t.forEach(t=>{var e;t.setAttributes({dx:(null!=(e=t.attribute.dx)?e:0)+d+p/2-(t.AABBBounds.x1+t.AABBBounds.x2)/2})}):"bottom"!==a&&"top"!==a||("top"===f?t.forEach(t=>{var e;t.setAttributes({dy:(null!=(e=t.attribute.dy)?e:0)+d-t.AABBBounds.y1})}):"bottom"===f?t.forEach(t=>{var e;t.setAttributes({dy:(null!=(e=t.attribute.dy)?e:0)+d+p-t.AABBBounds.y2})}):"middle"===f&&t.forEach(t=>{var e;t.setAttributes({dy:(null!=(e=t.attribute.dy)?e:0)+d+p/2-(t.AABBBounds.y1+t.AABBBounds.y2)/2})}))}}_getAxisLabelLimitLength(t,e){var i,r,n,s,a;let{label:o,title:l,line:u,tick:c}=this.attribute,d=null!=(i=o.space)?i:4,p=t,f=0,g=0,m=u&&u.visible?null!=(r=u.style.lineWidth)?r:1:0,y=c&&c.visible?null!=(n=c.length)?n:4:0;if(l&&l.visible&&"string"==typeof l.text){f=(0,tc.fe)(l.text,l.textStyle,null==(a=null==(s=this.stage)?void 0:s.getTheme())?void 0:a.text).height;let t=(0,h.o)(l.padding);g=l.space+t[0]+t[2]}return p&&(p=(p-d-g-f-m-y)/e),p}showLabelHoverOnAxis(t,e,i=!0){if(this.attribute.labelHoverOnAxis){let r=this.axisContainer.AABBBounds,n=r.width(),s=r.height(),a=r.x1,o=r.y1,l=r.x2,h=r.y2;if(this.labelHoverOnAxisGroup){let{formatMethod:i}=this.attribute.labelHoverOnAxis,r=i?i(e):e;this.labelHoverOnAxisGroup.setAttribute("text",r),this.labelHoverOnAxisGroup.setAttribute("visible",!0),this.labelHoverOnAxisGroup.setAttribute("visibleAll",!0),"left"===this.attribute.orient||"right"===this.attribute.orient?this.labelHoverOnAxisGroup.setAttributes({y:t}):this.labelHoverOnAxisGroup.setAttributes({x:t})}else this.attribute.labelHoverOnAxis.visible=!0,this.attribute.labelHoverOnAxis.position=t,this.attribute.labelHoverOnAxis.text=e,this.renderLabelHoverOnAxis();if(i){let i=this.axisContainer.AABBBounds,r=i.width()-n,u=i.height()-s;r>0&&("top"===this.attribute.orient||"bottom"===this.attribute.orient)&&(i.x1<a?this.showLabelHoverOnAxis(t+r,e,!1):i.x2>l&&this.showLabelHoverOnAxis(t-r,e,!1)),u>0&&("left"===this.attribute.orient||"right"===this.attribute.orient)&&(i.y1<o?this.showLabelHoverOnAxis(t+u,e,!1):i.y2>h&&this.showLabelHoverOnAxis(t-u,e,!1))}}}hideLabelHoverOnAxis(){this.attribute.labelHoverOnAxis&&this.labelHoverOnAxisGroup&&this.labelHoverOnAxisGroup.setAttributes({visible:!1,visibleAll:!1})}getActualOffset(t){let e=this.attribute.orient;return"left"===e||"right"===e?this.attribute.width?this.attribute.width:(this.attribute.maxWidth&&(t=Math.min(t,this.attribute.maxWidth)),this.attribute.minWidth&&(t=Math.max(t,this.attribute.minWidth)),t):t}release(){super.release(),this._breaks=null}}tW.defaultAttributes=tg.p,(0,b.jB)(tW,class{isInValidValue(t){return t<0||t>1}getTickCoord(t){let{start:e}=this.attribute,i=this.getRelativeVector();return{x:e.x+i[0]*t,y:e.y+i[1]*t}}getRelativeVector(t){let{start:e,end:i}=this.attribute;return[i.x-e.x,i.y-e.y]}getVerticalVector(t,e=!1,i){let{verticalFactor:r=1}=this.attribute,n=this.getRelativeVector(),s=(0,ta.Fv)(n),a=[s[1],-1*s[0]];return(0,ta.bA)(a,t*(e?1:-1)*r)}})},36760:function(t,e,i){"use strict";i.d(e,{GK:()=>l,PY:()=>s,Ph:()=>a,nw:()=>h});var r=i(19273),n=i(54326);function s(t){t.forEach(t=>{if(t.rotatedBounds||!t.attribute.angle)return;let e=function(t){let e=t.AABBBounds;return{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,centerX:t.attribute.x,centerY:t.attribute.y,angle:t.attribute.angle}}(t),i=(0,r.xj)({x:t.attribute.x,y:t.attribute.y},e.angle,{x:e.centerX,y:e.centerY}),n=i.x-e.centerX,s=i.y-e.centerY;e.x1+=n,e.x2+=n,e.y1+=s,e.y2+=s,e.centerX+=n,e.centerY+=s,t.rotatedBounds=e})}function a(t,e){var i,n;return(null==(i=t.OBBBounds)?void 0:i.empty())||(null==(n=e.OBBBounds)?void 0:n.empty())?(0,r.SX)(t.AABBBounds,e.AABBBounds,!1)&&(!t.rotatedBounds||!e.rotatedBounds||(0,r.nn)(t.rotatedBounds,e.rotatedBounds,!0)):t.OBBBounds.intersects(e.OBBBounds)}let o=Math.sin(Math.PI/10);function l(t,e=o){let i=!(0,n.Z)(t)&&0!==t,r=i?Math.cos(t):1;return i&&Math.abs(r)<=e}function h(t,e=o){let i=!(0,n.Z)(t)&&0!==t,r=i?Math.sin(t):0;return!i||Math.abs(r)<=e}},31820:function(t,e,i){"use strict";i.d(e,{s:()=>F});var r=i(37196),n=i(64776),s=i(96241),a=i(99051),o=i(63401),l=i(9762),h=i(26001),u=i(26152);let c=t=>t.map((t,e)=>({index:e,value:t})),d=(t,e,i=0)=>{let r=new o.FB(t).expand(i/2),n=new o.FB(e).expand(i/2);return r.intersects(n)},p=(t,e,i,r)=>i<t?Math.max(t-e/2,i):i>t?Math.min(t-e/2,i-e):i<r?i:i-e,f=(t,e,i)=>{var r,n,s;let{labelStyle:a,axisOrientType:c,labelFlush:d,labelFormatter:f,startAngle:g=0}=i,m=null!=(r=a.angle)?r:0;"vertical"===a.direction&&(m+=(0,l.M4)(90));let y=["bottom","top"].includes(c),v=["left","right"].includes(c),b=1,x=0;y||(v?(b=0,x=1):g&&(b=Math.cos(g),x=-Math.sin(g)));let _=(0,u.gM)(a),w=t.range(),S=[];for(let i=0;i<e.length;i++){let r=e[i],l=f?f(r):`${r}`;if((0,h.Z)(l)){S=void 0;break}let{width:u,height:c}=_.quickMeasure(l),g=Math.max(u,12),A=Math.max(c,12),C=t.scale(r),D=b*C,T=x*C,B,M,E=D,k=T;d&&y&&0===i?E=p(D,g,w[0],w[w.length-1]):d&&y&&i===e.length-1?E=p(D,g,w[w.length-1],w[0]):B=null!=(n=a.textAlign)?n:"center","right"===B?E-=g:"center"===B&&(E-=g/2),d&&v&&0===i?k=p(T,A,w[0],w[w.length-1]):d&&v&&i===e.length-1?k=p(T,A,w[w.length-1],w[0]):M=null!=(s=a.textBaseline)?s:"middle","bottom"===M?k-=A:"middle"===M&&(k-=A/2);let F=(new o.FB).set(E,k,E+g,k+A);m&&F.rotate(m,D,T),S.push(F)}return S},g=t=>["bottom","top","z"].includes(t);var m=i(79521);function y(t,e,i,r){let n,{breakData:s}=t;if(s&&s()){let{breakDomains:t}=s(),a=e.domain();n=[];for(let e=0;e<a.length-1;e++)r(i,[a[e],a[e+1]]).forEach(e=>{t.some(t=>e>=t[0]&&e<=t[1])||n.push(e)});e.domain(a)}else n=r(i);return n}function v(t,e,i,r,n=!1){if(i&&!e.includes(t)){let i=e.length;if(i>1){n?e.push(t):e.unshift(t);for(let t=0;t<i;t++){let s=n?i-1-t:t;if(!r(e[s]))break;e.splice(s,1),t--,i--}}}}let b=(t,e)=>{var i,o,l,h,u,d;let p;if(!(0,r.z2)(t.type))return c(t.domain());let g=t.range(),b=Math.abs(g[g.length-1]-g[0]);if(b<2)return c([t.domain()[0]]);let{tickCount:_,forceTickCount:w,tickStep:S,noDecimals:A=!1,labelStyle:C,breakData:D}=e;if((0,n.Z)(S))u=t.stepTicks(S),p=(d=D&&D()?D().breakDomains:null)&&d.length?u.filter(t=>d.every(e=>t<e[0]||t>e[1])):u;else if((0,n.Z)(w))p=y(e,t,w,(e,i)=>i&&i.length?t.domain(i,!0).forceTicks(e):t.forceTicks(e));else if("d3"===e.tickMode)p=y(e,t,null!=(i=(0,s.Z)(_)?_({axisLength:b,labelStyle:C}):_)?i:5,(e,i)=>i&&i.length?t.domain(i,!0).d3Ticks(e,{noDecimals:A}):t.d3Ticks(e,{noDecimals:A}));else{let i=null!=(o=(0,s.Z)(_)?_({axisLength:b,labelStyle:C}):_)?o:5,r=(0,s.Z)(e.tickMode)?e.tickMode:void 0;p=y(e,t,i,(e,i)=>i&&i.length?t.domain(i,!0).ticks(e,{noDecimals:A,customTicks:r}):t.ticks(e,{noDecimals:A,customTicks:r}))}let T=t.domain();if(e.labelFirstVisible&&T[0]!==p[0]&&!p.includes(T[0])&&p.unshift(T[0]),e.labelLastVisible&&T[T.length-1]!==p[p.length-1]&&!p.includes(T[T.length-1])&&p.push(T[T.length-1]),e.sampling&&p.length>1&&("cartesian"===e.coordinateType||"polar"===e.coordinateType&&"radius"===e.axisOrientType)){let i,{labelGap:r=4,labelFlush:n}=e;if(6*p.length>b){let r=[],n=Math.floor(6*p.length/b);p.forEach((t,e)=>{e%n!=0&&e!==p.length-1||r.push(t)}),i=null==(l=f(t,r,e))?void 0:l.map((t,e)=>({AABBBounds:t,value:r[e]}))}else i=null==(h=f(t,p,e))?void 0:h.map((t,e)=>({AABBBounds:t,value:p[e]}));if(i){let t=i[0],s=(0,a.Z$)(i),o=D&&D()?x.greedy:x.parity;for(;i.length>=3&&(0,m.A9)(i,r);)i=o(i,r);let l=e.labelFirstVisible,h=e.labelLastVisible;(0,m.qw)(t,s,r)&&i.includes(s)&&i.length>1&&l&&h&&(i.splice(i.indexOf(s),1),h=!1),v(t,i,l,e=>(0,m.qw)(e,t,r)),v(s,i,h,e=>(0,m.qw)(e,s,r)||!(!l||e===t)&&(0,m.qw)(e,t,r),!0);let u=i.map(t=>t.value);u.length<3&&n&&(u.length>1&&u.pop(),(0,a.Z$)(u)!==(0,a.Z$)(p)&&u.push((0,a.Z$)(p))),p=u}}return c(p)},x={parity:function(t){return t.filter((t,e)=>e%2==0)},greedy:function(t,e){let i;return t.filter((t,r)=>(!r||!(0,m.qw)(i,t,e))&&(i=t,!0))}};var _=i(54326),w=i(51400);let S=(t,e,i,r)=>{let n=f(t,e,i);return n&&n.map(t=>r?[t.x1,t.x2,t.width()]:[t.y1,t.y2,t.height()])},A=(t,e,i=0)=>Math.max(t[0],e[0])-i/2<=Math.min(t[1],e[1])+i/2,C=(t,e)=>t[1]<e[0]?e[0]-t[1]:e[1]<t[0]?t[0]-e[1]:0,D=(t,e)=>{var i;let r,o=t.domain();if(!o.length)return[];let{tickCount:l,forceTickCount:h,tickStep:u,labelGap:d=4,axisOrientType:p,labelStyle:f}=e,m=g(p),y=t.range(),v=t.calculateWholeRangeSize();if(v<2)return e.labelLastVisible?c([o[o.length-1]]):c([o[0]]);if((0,n.Z)(u))r=t.stepTicks(u);else if((0,n.Z)(h))r=t.forceTicks(h);else if((0,n.Z)(l)){let e=(0,s.Z)(l)?l({axisLength:v,labelStyle:f}):l;r=t.ticks(e)}else if(e.sampling){let n=(null!=(i=e.labelStyle.fontSize)?i:12)+2,s=(0,a.iH)(y),l=(0,a.CE)(y);if(o.length<=v/n){let i=S(t,o,e,m);if(i){let n=Math.min(...i.map(t=>t[2])),a=(l-s)/o.length,h=T(o,i,d,e.labelLastVisible,Math.floor(n/a),!1);r=t.stepTicks(h.step),e.labelLastVisible&&(h.delCount&&(r=r.slice(0,r.length-h.delCount)),r.push(o[o.length-1]))}}else{let i=S(t,[o[0],o[Math.floor(o.length/2)],o[o.length-1]],e,m);if(i){let n=null;i.forEach(t=>{n?n[2]<t[2]&&(n=t):n=t});let a=l-s-d>0?Math.ceil(o.length*(d+n[2])/(l-s-d)):o.length-1;r=t.stepTicks(a),!e.labelLastVisible||r.length&&r[r.length-1]===o[o.length-1]||(r.length&&Math.abs(t.scale(r[r.length-1])-t.scale(o[o.length-1]))<n[2]&&(r=r.slice(0,-1)),r.push(o[o.length-1]))}}}return(0,_.Z)(r)&&(r=t.domain()),c(r)},T=(t,e,i,r,n,s)=>{let a=0,o=0,l=-1,h=Number.MAX_VALUE,u=r=>{let n=!0,s=0;do s+r<t.length&&A(e[s],e[s+r],i)&&(n=!1),s+=r;while(n&&s<t.length);return n},c=(0,w.o0)(n,t.length,t=>u(t)?1:-1),d=c;do if(!(d>c)||s||u(d)){if(!r){o=d;break}{let r=t.length-1,n,s=0;n=t.length%d>0?t.length-t.length%d+d:t.length;do{if((n-=d)!==r&&!A(e[n],e[r],i))break;s++}while(n>0);if(n===r){o=d,a=s;break}{let i=Math.floor(t.length/d)-s+1;if(i<l)break;{l=i;let t=C(e[n],e[r]),u=n-d>=0?C(e[n-d],e[n]):t,c=Math.abs(t-u);if(c<h&&(h=c,o=d,a=s),t<=u)break}}}d++}else d++;while(d<=t.length);return{step:o,delCount:a}};var B=i(36163);let M=(t,e,i)=>{var r;let{labelStyle:n,getRadius:s,labelOffset:a,labelFormatter:l,inside:h}=i,c=null==s?void 0:s(),d=null!=(r=n.angle)?r:0,p=(0,u.gM)(n);return e.map(e=>{let i=l?l(e):`${e}`,{width:r,height:s}=p.quickMeasure(i),u=Math.max(r,12),f=Math.max(s,12),g=t.scale(e),y={x:0,y:0},v=0,b=0,x={align:n.textAlign,baseline:n.textBaseline},{x:_,y:w}=(0,m.DJ)(g,y,c,a,h);return x.align||((0,B.Yt)(_,y.x)?x.baseline||(x.baseline=w>y.y?"top":"bottom"):_>y.x?x.align="left":_<y.x&&(x.align="right")),v=_+("right"===x.align?-u:"left"===x.align?0:-u/2),b=w+("bottom"===x.baseline?-f:"top"===x.baseline?0:-f/2),(new o.FB).set(v,b,v+u,b+f).rotate(d,v+u/2,b+f/2)})},E=(t,e)=>{let i,{tickCount:r,forceTickCount:o,tickStep:l,getRadius:h,labelOffset:u,labelGap:d=0,labelStyle:p}=e,f=null==h?void 0:h();if(!f||f<=0)return c(t.domain());if((0,n.Z)(l))i=t.stepTicks(l);else if((0,n.Z)(o))i=t.forceTicks(o);else if((0,n.Z)(r)){let e=t.range(),n=Math.abs(e[e.length-1]-e[0]),a=(0,s.Z)(r)?r({axisLength:n,labelStyle:p}):r;i=t.ticks(a)}else if(e.sampling){let r=t.domain(),n=t.range(),s=M(t,r,e),o=(0,a.iH)(n),l=Math.abs((0,a.CE)(n)-o)*(f+u)/r.length,{step:h,delCount:c}=k(r,s,d,Math.floor(s.reduce((t,e)=>Math.min(t,e.width(),e.height()),Number.MAX_VALUE)/l));i=(i=t.stepTicks(h)).slice(0,i.length-c)}else i=t.domain();return c(i)},k=(t,e,i,r)=>{let n=r;do{let r=!0;n++;let s=0;do s+n<t.length&&d(e[s],e[s+n],i)&&(r=!1),s+=n;while(r&&s<t.length);if(r)break}while(n<=t.length);let s=0;if(t.length>2){let i=t.length-t.length%n;for(i>=t.length&&(i-=n);i>0&&d(e[0],e[i]);)s++,i-=n}return{step:n,delCount:s}},F=(t,e)=>{if((0,r.z2)(t.type))return b(t,e);if((0,r.lK)(t.type)){if("cartesian"===e.coordinateType)return D(t,e);if("polar"===e.coordinateType&&"angle"===e.axisOrientType)return E(t,e)}return c(t.domain())}},79521:function(t,e,i){"use strict";i.d(e,{A9:()=>m,DJ:()=>f,cN:()=>d,qw:()=>g,uX:()=>c,uf:()=>u});var r=i(20408),n=i(9762),s=i(48393),a=i(56431),o=i(80494),l=i(94231),h=i(36760);function u(t={}){var e,i;let{style:n={},angle:s=.5*Math.PI}=t,a=(0,r.Z)({},l.P,n),o=null!=(e=a.size)?e:l.P.size;return Object.assign(Object.assign({},a),{symbolType:null!=(i=a.symbolType)?i:`M ${-o/2} ${o*Math.sin(s)} L ${o/2} ${-o*Math.sin(s)}`,symbolSize:o})}function c(t){let e={};return(0,a.Ck)(t,t=>{"group"!==t.type&&t.id&&(e[t.id]=t)}),e}function d(t,e){return{x:t.x+e[0],y:t.y+e[1]}}function p(t,e,i,r=!1,n=!1){let s=[e.x-i.x,e.y-i.y];return(0,o.bA)(s,(r?-1:1)*(n?-1:1)*t/(0,o.kE)(s))}function f(t,e,i,r,s){var a;let o=(0,n.op)({x:0,y:0},i,t),l=d(o,p(r,o,e,s));return a=p(r||1,l,e,s),{x:l.x+a[0],y:l.y+a[1]}}function g(t,e,i){var r;let n=null==(r=t.attribute)?void 0:r.angle;if((0,h.nw)(n,Number.EPSILON))return i>(0,s.YB)(t.AABBBounds,e.AABBBounds);let a=t.OBBBounds,o=e.OBBBounds;return!a||!o||a.empty()||o.empty()?i>(0,s.YB)(t.AABBBounds,e.AABBBounds):a.intersects(o)||i>(0,s.up)(a,o)}function m(t,e){for(let i,r=1,n=t.length,s=t[0];r<n;s=i,++r)if(g(s,i=t[r],e))return!0;return!1}},43064:function(t,e,i){"use strict";i.d(e,{J:()=>d});var r=i(20408),n=i(50322),s=i(22288),a=i(50074),o=i(63654),l=i(11511),h=i(99754),u=i(24599),c=i(29922);(0,l.M)(),(0,h.k)(),(0,u.g)(),(0,c.i)();class d extends n.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},d.defaultAttributes,t)),this._handlePointerUp=()=>{this.attribute.disabled||(this.attribute.checked?this.setAttribute("checked",!1):this.setAttribute("checked",!0),this.setAttribute("indeterminate",!1),this._dispatchEvent("checkbox_state_change",{eventType:"checkbox_state_change",checked:this.attribute.checked}),this.stage.renderNextFrame())},this.renderGroup(),this.onBeforeAttributeUpdate=(t,e,i)=>{"interactive"in t&&this.setAttribute("pickable",t.interactive),"disabled"in t&&this.setAttribute("cursor",t.disable?this.attribute.disableCursor:this.attribute.cursor)},this.addEventListener("pointerup",this._handlePointerUp)}render(){this.removeAllChild(!0),this.renderBox(),this.renderIcon(),this.renderText(),this.layout()}renderBox(){this._box=new s.U((0,r.Z)({},this.attribute.box));let t=this.attribute.checked||this.attribute.indeterminate;t&&this.attribute.disabled?this._box.setAttributes({fill:this.attribute.box.disableCheckedFill,stroke:this.attribute.box.disableCheckedStroke}):t?this._box.setAttributes({fill:this.attribute.box.checkedFill,stroke:this.attribute.box.checkedStroke}):this.attribute.disabled&&this._box.setAttributes({fill:this.attribute.box.disableFill}),this.appendChild(this._box)}renderIcon(){this._checkIcon=new a.E((0,r.Z)({image:this.attribute.icon.checkIconImage},this.attribute.icon)),this.appendChild(this._checkIcon),this._indeterminateIcon=new a.E((0,r.Z)({image:this.attribute.icon.indeterminateIconImage},this.attribute.icon)),this.appendChild(this._indeterminateIcon),this.attribute.checked?(this._checkIcon.setAttribute("visible",!0),this._indeterminateIcon.setAttribute("visible",!1)):this.attribute.indeterminate?(this._checkIcon.setAttribute("visible",!1),this._indeterminateIcon.setAttribute("visible",!0)):(this._checkIcon.setAttribute("visible",!1),this._indeterminateIcon.setAttribute("visible",!1))}renderText(){this._text=new o.x((0,r.Z)({wrap:!0},this.attribute.text)),this.attribute.disabled&&this._text.setAttribute("fill",this.attribute.text.disableFill),this.appendChild(this._text)}renderGroup(){this.attribute.interactive||this.setAttribute("pickable",!1),this.attribute.disabled&&this.setAttribute("cursor",this.attribute.disableCursor)}layout(){let t=this.attribute.box.height,e=this.attribute.icon.height,i=this._text.AABBBounds.height(),r=Math.max(t,e,i),n=r/2-e/2,s=this.attribute.box.width,a=this.attribute.icon.width,o=Math.max(s,a),l=o/2-a/2,h=o+this.attribute.spaceBetweenTextAndIcon;this._box.setAttributes({x:o/2-s/2,y:r/2-t/2}),this._checkIcon.setAttributes({x:l,y:n}),this._indeterminateIcon.setAttributes({x:l,y:n}),this._text.setAttributes({x:h,y:r/2-i/2})}initAttributes(t,e){t=(null==e?void 0:e.skipDefault)?t:(0,r.Z)({},d.defaultAttributes,t),super.initAttributes(t),this.renderGroup(),this.render()}}d.defaultAttributes={interactive:!0,disabled:!1,checked:!1,indeterminate:!1,cursor:"pointer",disableCursor:"not-allowed",spaceBetweenTextAndIcon:8,text:{text:"text",fontSize:14,fill:"#000",disableFill:"rgb(201,205,212)",textBaseline:"top",pickable:!1},icon:{checkIconImage:'<svg width="200" height="200" viewBox="0 0 1024 1024" fill="#fff" xmlns="http://www.w3.org/2000/svg"><path d="M877.44815445 206.10060629a64.72691371 64.72691371 0 0 0-95.14856334 4.01306852L380.73381888 685.46812814 235.22771741 533.48933518a64.72691371 64.72691371 0 0 0-92.43003222-1.03563036l-45.82665557 45.82665443a64.72691371 64.72691371 0 0 0-0.90617629 90.61767965l239.61903446 250.10479331a64.72691371 64.72691371 0 0 0 71.19960405 15.14609778 64.33855261 64.33855261 0 0 0 35.08198741-21.23042702l36.24707186-42.71976334 40.5190474-40.77795556-3.36579926-3.49525333 411.40426297-486.74638962a64.72691371 64.72691371 0 0 0-3.88361443-87.64024149l-45.3088404-45.43829334z"></path></svg>',indeterminateIconImage:'<svg width="200" height="200" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none"><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="5" d="M5 12h14"/></svg>',width:10,height:10,pickable:!1},box:{width:14,height:14,cornerRadius:2,fill:"#fff",stroke:"rgb(229,230,235)",disableFill:"rgb(242,243,245)",checkedFill:"rgb(22, 93, 255)",checkedStroke:"rgb(22, 93, 255)",disableCheckedFill:"rgb(148, 191, 255)",disableCheckedStroke:"rgb(148, 191, 255)",pickable:!1}}},1573:function(t,e,i){"use strict";var r,n;i.d(e,{$M:()=>a,HW:()=>r,Ze:()=>l,eV:()=>u,gB:()=>c,iR:()=>s,m3:()=>h,n0:()=>o});let s="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",a=14;(n=r||(r={})).selected="selected",n.selectedReverse="selected_reverse",n.hover="hover",n.hoverReverse="hover_reverse";let o={[r.selectedReverse]:{},[r.selected]:{},[r.hover]:{},[r.hoverReverse]:{}},l={container:"",width:30,height:30,style:{}},h="scrollDown",u="scrollDrag",c="scrollUp"},50322:function(t,e,i){"use strict";i.d(e,{k:()=>u});var r=i(8849),n=i(35357),s=i(26001),a=i(96241),o=i(20408),l=i(54326);let h=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"];class u extends r.ZA{constructor(t,e){super(t),this._skipRenderAttributes=h,(null==e?void 0:e.mode)&&(this.mode=e.mode,this.setMode(e.mode)),(null==e?void 0:e.skipDefault)&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=t,this.onSetStage(()=>{this.render(),this.bindEvents()})}setAttribute(t,e,i,r){let n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,r);if(n)return this._setAttributes(n,i);(0,s.Z)(this.attribute[t])&&(0,s.Z)(e)&&!(0,a.Z)(this.attribute[t])&&!(0,a.Z)(e)?(0,o.Z)(this.attribute[t],e):this.attribute[t]=e,this._skipRenderAttributes.includes(t)||this.render(),this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(i||this.needUpdateTag(t))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(t,e,i){return t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t,this._setAttributes(t,e)}_setAttributes(t,e){let i=Object.keys(t);this._mergeAttributes(t,i),i.every(t=>this._skipRenderAttributes.includes(t))||this.render(),this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(e||this.needUpdateTags(i))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(t,e){(0,l.Z)(e)&&(e=Object.keys(t));for(let i=0;i<e.length;i++){let r=e[i];!(0,s.Z)(this.attribute[r])||(0,a.Z)(this.attribute[r])||(0,a.Z)(t[r])?this.attribute[r]=t[r]:(0,o.Z)(this.attribute[r],t[r])}}bindEvents(){}_getNodeId(t){var e;return`${null!=(e=this.id)?e:this._uid}-${this.name}-${t}`}_dispatchEvent(t,e){var i;let r=new n.A(t,e);r.manager=null==(i=this.stage)?void 0:i.eventSystem.manager,this.dispatchEvent(r)}eventPosToStagePos(t){var e,i;let r={x:0,y:0},n=null!=(i=null==(e=this.stage)?void 0:e.eventPointTransform(t))?i:{x:0,y:0};return this.globalTransMatrix.transformPoint(n,r),r}}},48530:function(t,e,i){"use strict";i.d(e,{S:()=>u});var r=i(20408),n=i(50322),s=i(50074),a=i(63654),o=i(11511),l=i(24599),h=i(29922);(0,o.M)(),(0,l.g)(),(0,h.i)();class u extends n.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},u.defaultAttributes,t))}render(){this.removeAllChild(!0),this.renderIcon(),this.renderText(),this.layout()}renderIcon(){this._emptyTipIcon=new s.E((0,r.Z)({image:this.attribute.icon.image},this.attribute.icon)),this.appendChild(this._emptyTipIcon)}renderText(){this._text=new a.x((0,r.Z)({wrap:!0},this.attribute.text)),this.appendChild(this._text)}layout(){let t=this.attribute.icon.height,e=this._text.AABBBounds.height(),i=this.attribute.icon.width,{width:r,height:n,spaceBetweenTextAndIcon:s}=this.attribute;this._emptyTipIcon.setAttribute("x",r/2-i/2),this._emptyTipIcon.setAttribute("y",n/2-t/2-e/2-s/2),this._text.setAttribute("x",r/2),this._text.setAttribute("textAlign","center"),this._text.setAttribute("y",n/2+t/2+s/2),this._text.setAttribute("textBaseline","middle")}}u.defaultAttributes={spaceBetweenTextAndIcon:20,text:{text:"no data",fontSize:14,fill:"#000",disableFill:"rgb(201,205,212)",pickable:!1},icon:{image:'<svg t="1716726614852" class="icon" viewBox="0 0 1194 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2621" width="200" height="200"><path d="M1038.694079 367.237067c13.265507 23.342857-16.633865-40.004445-63.05621-40.004446H219.018794c-26.558738 0-46.46393 13.334815-63.05621 40.004446S0.006238 607.277601 0.006238 650.608819V940.647979a82.351494 82.351494 0 0 0 82.961402 83.349526H1111.702885a82.337632 82.337632 0 0 0 82.975264-83.349526V650.608819c0-43.331218-155.970208-283.371753-155.970208-283.371752zM730.066575 667.284269a136.328386 136.328386 0 0 1-132.738243 133.33429 133.417459 133.417459 0 0 1-132.738243-133.33429v-6.681269a40.6698 40.6698 0 0 0-36.497473-26.66963H73.015044l119.458874-220.02445s23.231965-40.004445 53.103614-40.004446h713.481918c26.544876 0 29.871649 10.008042 46.436207 40.004446L1128.33675 633.947231H769.904682c-26.184476 0-39.838107 7.623855-39.838107 33.337038zM338.505391 210.559919l-89.601086-86.69016a22.178487 22.178487 0 0 1 0-33.26773 21.984425 21.984425 0 0 1 33.170699 0l89.601087 86.676299a22.317102 22.317102 0 0 1 0 33.26773 24.950798 24.950798 0 0 1-33.1707 0z m252.197118-40.059891a25.532983 25.532983 0 0 1-6.639685-16.633865l-3.326773-126.694606A28.263709 28.263709 0 0 1 603.995739 0.515788c13.251646-3.326773 23.204242 10.021904 26.544877 23.342858V153.866163a28.249847 28.249847 0 0 1-23.259688 26.66963c-6.611961-3.312911-13.279369-3.312911-16.578419-10.035765z m235.646421 33.337038a22.372548 22.372548 0 0 1 0-33.337038l86.288175-90.030795a22.039871 22.039871 0 0 1 33.170699 0 22.289379 22.289379 0 0 1 0 33.364761l-82.961401 90.003072a25.962691 25.962691 0 0 1-36.483611 0z" fill="#8a8a8a" p-id="2622"></path></svg>',width:100,height:100,pickable:!1}}},56483:function(t,e,i){"use strict";i.d(e,{U:()=>h});var r=i(64639),n=i(64776),s=i(66987),a=i(50322),o=i(59417),l=i(14604);class h extends a.k{constructor(){super(...arguments),this.name="legend",this._title=null}render(){this.removeAllChild(!0);let{interactive:t=!0,title:e,padding:i=0}=this.attribute;this._parsedPadding=(0,r.o)(i);let n=s.i.group({x:this._parsedPadding[3],y:this._parsedPadding[0],pickable:t,childrenPickable:t});n.name=l.GN.innerView,this.add(n),this._innerView=n,(null==e?void 0:e.visible)&&this._renderTitle(e),this._renderContent(),this._adjustLayout(),t&&this._bindEvents();let a=this._innerView.AABBBounds;this.attribute.width=a.width()+this._parsedPadding[1]+this._parsedPadding[3],this.attribute.height=a.height()+this._parsedPadding[0]+this._parsedPadding[2]}_renderTitle(t){let{text:e="",textStyle:i,padding:s=0,background:a,minWidth:h,maxWidth:u,shape:c}=t,d={x:0,y:0,text:e,textStyle:i,padding:(0,r.o)(s),minWidth:h,maxWidth:u};c&&c.visible&&(d.shape=Object.assign({visible:!0},c.style),(0,n.Z)(c.space)&&(d.space=c.space)),a&&a.visible&&(d.panel=Object.assign({visible:!0},a.style));let p=new o.V(d);p.name=l.GN.title,this._title=p,this._innerView.add(p)}_adjustLayout(){var t;if(this._title){let e=this._innerView.AABBBounds.width(),i=this._title.AABBBounds.width(),r=null==(t=this.attribute.title)?void 0:t.align;"center"===r?this._title.setAttribute("x",(e-i)/2):"end"===r&&this._title.setAttribute("x",e-i)}}}},14217:function(t,e,i){"use strict";i.d(e,{e:()=>c});var r=i(20408),n=i(54326),s=i(25397),a=i(44843),o=i(10145),l=i(56483),h=i(48554),u=i(14604);(0,i(83937).Fw)();class c extends l.U{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},c.defaultAttributes,t)),this.name="colorLegend",this._onSliderToolipChange=t=>{let e=this._slider.tooltipShape;if(e&&t.detail&&!(0,n.Z)(t.detail.value)){let i=this._colorScale.scale(t.detail.value);e.setAttribute("fill",i)}this.dispatchEvent(t)},this._onSliderChange=t=>{this._updateColor(),this.dispatchEvent(t)}}setSelected(t){this._slider&&(this._slider.setValue(t),this._updateColor())}_renderContent(){let{colors:t,slidable:e,layout:i,align:r,min:n,max:a,value:l,railWidth:c,railHeight:d,showHandler:p=!0,handlerSize:f,handlerStyle:g,railStyle:m,trackStyle:y,startText:v,endText:b,handlerText:x,showTooltip:_,tooltip:w,inverse:S,disableTriggerEvent:A}=this.attribute,C=[],D=(a-n)/(t.length-1);for(let e=0;e<t.length;e++)C.push(n+D*e);this._colorScale=(new o.f).domain(C,!0).range(t),this._color=this._getTrackColor();let T=new h.i({x:0,y:0,range:{draggableTrack:!0},slidable:e,layout:i,align:r,min:n,max:a,value:l,railWidth:c,railHeight:d,showHandler:p,handlerSize:f,handlerStyle:g,railStyle:m,trackStyle:Object.assign({fill:this._color},y),startText:v,endText:b,handlerText:x,showTooltip:_,tooltip:w,disableTriggerEvent:A,inverse:S});this._innerView.add(T),this._slider=T,T.translateTo(0-T.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+(0,s.Z)(this.attribute,"title.space",u.$5):0)-T.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}_getTrackColor(){let{colors:t,layout:e,inverse:i}=this.attribute;if((0,a.Z)(t))return;let r=t.length;if(1===r)return t[0];let n=[];for(let e=0;e<r;e++){let i=e/(r-1);n.push({offset:i,color:t[e]})}let s="horizontal"===e,o={gradient:"linear",stops:n,x0:0,y0:0,x1:+!!s,y1:+!s};return i&&(s?(o.x0=1,o.x1=0):(o.y0=1,o.y1=0)),o}_updateColor(){var t;let{layout:e="horizontal",colors:i,railWidth:r,railHeight:n}=this.attribute,{startHandler:s,endHandler:a,track:o,attribute:l}=this._slider,{startValue:h,endValue:u,startPos:c,endPos:d}=this._slider.currentValue,p=null==(t=l.handlerStyle)?void 0:t.fill;if(s&&!p){let t=this._colorScale.scale(h);s.setAttribute("fill",t)}if(a&&!p){let t=this._colorScale.scale(u);a.setAttribute("fill",t)}let f="horizontal"===e?r:n;if(Math.abs(c-d)!==f&&i&&i.length>1){let t=this._color.stops,e=Math.min(c,d)/f,i=Math.max(c,d)/f,r=i-e,n=t.filter(t=>t.offset>e&&t.offset<i),s=Math.min(h,u),a=Math.max(h,u),l=this._colorScale.scale(s),p=this._colorScale.scale(a),g=[{offset:0,color:l}];n.forEach(t=>{g.push({offset:(t.offset-e)/r,color:t.color})}),g.push({offset:1,color:p}),o.setAttribute("fill",Object.assign(Object.assign({},this._color),{stops:g}))}}}c.defaultAttributes={layout:"horizontal",title:{align:"start",space:u.$5,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{fill:null,lineWidth:4,stroke:"#fff",outerBorder:{distance:2,lineWidth:1,stroke:"#ccc"}},tooltip:{shapeStyle:{lineWidth:4,stroke:"#fff"}}}},14604:function(t,e,i){"use strict";var r,n,s,a,o,l;i.d(e,{$5:()=>g,DN:()=>c,GN:()=>s,Nu:()=>p,SX:()=>h,Th:()=>m,dk:()=>n,g:()=>u,qL:()=>d,so:()=>f,uu:()=>r});let h=10,u=8,c=8,d=8,p=16,f=8,g=12,m=12;(a=r||(r={})).selected="selected",a.unSelected="unSelected",a.selectedHover="selectedHover",a.unSelectedHover="unSelectedHover",a.focus="focus",(o=n||(n={})).legendItemHover="legendItemHover",o.legendItemUnHover="legendItemUnHover",o.legendItemClick="legendItemClick",o.legendItemAttributeUpdate="legendItemAttributeUpdate",(l=s||(s={})).innerView="innerView",l.title="legendTitle",l.item="legendItem",l.itemShape="legendItemShape",l.itemLabel="legendItemLabel",l.itemValue="legendItemValue",l.focus="legendItemFocus"},3290:function(t,e,i){"use strict";i.d(e,{W:()=>M});var r=i(20408),n=i(95723),s=i(64776),a=i(44843),o=i(99051),l=i(25397),h=i(80971),u=i(64639),c=i(54326),d=i(49275),p=i(36163),f=i(94030),g=i(96241),m=i(66987),y=i(56483),v=i(4654),b=i(50322),x=i(26152),_=i(7291);let w={space:8,style:{fill:"rgb(47, 69, 84)",cursor:"pointer",size:15},state:{disable:{fill:"rgb(170, 170, 170)",cursor:"not-allowed"},hover:{}}};(0,_.s)();class S extends b.k{getCurrent(){return this._current}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},S.defaultAttributes,t)),this.name="pager",this._current=1,this._onHover=t=>{let e=t.target;e.hasState("disable")||e.addState("hover")},this._onUnHover=t=>{t.target.removeState("hover")},this._onClick=t=>{let e=t.target;if("preHandler"===e.name){if(1===this._current)return;this._current-=1,1===this._current?e.addState("disable"):e.removeState("disable"),this._dispatchEvent("toPrev",{current:this._current,total:this._total,direction:"pre",event:t})}if("nextHandler"===e.name){if(this._current===this._total)return;this._current+=1,this._current===this._total?e.addState("disable"):e.removeState("disable"),this._dispatchEvent("toNext",{current:this._current,total:this._total,direction:"next",event:t})}this._current>1&&this.preHandler.removeState("disable"),this._current<this._total&&this.nextHandler.removeState("disable"),this.text.setAttribute("text",this._getPageText(this._current))}}render(){var t,e,i;this._reset();let{layout:r="horizontal",handler:n=w,total:s,defaultCurrent:a=1,textStyle:o,padding:l=0}=this.attribute;this._current=a;let h=(0,u.o)(l),c="horizontal"===r,d=m.i.group({x:0,y:0}),p=n.style||{},f=p.size||15,g=null!=(t=n.space)?t:8,y=n.state||{},{preShape:b,nextShape:_}=n;b||(b=c?"triangleLeft":"triangleUp"),_||(_=c?"triangleRight":"triangleDown");let S=m.i.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},p),{x:0,y:0,symbolType:b,size:f}));S.states=y,S.name="preHandler",this.preHandler=S,d.add(S);let{width:A,height:C}=(0,x.fe)(this._getPageText(s),Object.assign({textAlign:"center",textBaseline:"middle"},o),null==(i=null==(e=this.stage)?void 0:e.getTheme())?void 0:i.text),D=(0,v.Z)(f)?f:f[0],T=(0,v.Z)(f)?f:f[1],B=m.i.text(Object.assign({x:c?D/2+g+A/2:0,y:c?0:T/2+g+C/2,text:this._getPageText(a),textAlign:"center",textBaseline:"middle",lineHeight:null==o?void 0:o.fontSize},o));this.text=B,d.add(B);let M=m.i.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},p),{x:c?D+2*g+A:0,y:c?0:T+2*g+C,symbolType:_,size:f}));M.name="nextHandler",M.states=y,this.nextHandler=M,d.add(M),1===this._total?(S.addState("disable"),M.addState("disable")):1===this._current?S.addState("disable"):this._current===s&&M.addState("disable");let E=d.AABBBounds,k=E.width(),F=E.height();d.translateTo(0-E.x1+h[3],0-E.y1+h[0]),this.add(d),this.attribute.width=k+h[1]+h[3],this.attribute.height=F+h[0]+h[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}_reset(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}_getPageText(t){let{pageFormatter:e}=this.attribute;return e?(0,g.Z)(e)?e(t,this._total):`${e}`.replace("{current}",`${t}`).replace("{total}",`${this._total}`):`${t}/${this._total}`}setTotal(t){t!==this.attribute.total&&(this._total=t,1!==this._current&&this._current<=t?this.setAttributes({total:t,defaultCurrent:this._current}):this.setAttribute("total",t))}}S.defaultAttributes={handler:w,textStyle:{fill:"rgb(51, 51, 51)",fontSize:12}};var A=i(14604),C=i(83937),D=i(88266),T=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)0>e.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i};let B={[A.uu.focus]:{},[A.uu.selected]:{},[A.uu.selectedHover]:{},[A.uu.unSelected]:{},[A.uu.unSelectedHover]:{}};(0,C.cV)();class M extends y.U{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},M.defaultAttributes,t)),this.name="discreteLegend",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._contentMaxHeight=0,this._onHover=t=>{let e=t.target;if(e&&e.name&&e.name.startsWith(A.GN.item)){let i=e.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===i.id)return;this._unHover(this._lastActiveItem,t)}this._hover(i,t)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,t),this._lastActiveItem=null)},this._onUnHover=t=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,t),this._lastActiveItem=null)},this._onClick=t=>{var e,i,r,n;let s=t.target;if(s&&s.name&&s.name.startsWith(A.GN.item)){let a=s.delegate,{selectMode:o="multiple"}=this.attribute;if(s.name===A.GN.focus||"focus"===o){let r=a.hasState(A.uu.focus);a.toggleState(A.uu.focus),r?null==(e=this._itemsContainer)||e.getChildren().forEach(e=>{this._removeLegendItemState(e,[A.uu.unSelected,A.uu.unSelectedHover,A.uu.focus],t),this._setLegendItemState(e,A.uu.selected,t)}):(this._setLegendItemState(a,A.uu.selected,t),this._removeLegendItemState(a,[A.uu.unSelected,A.uu.unSelectedHover],t),null==(i=this._itemsContainer)||i.getChildren().forEach(e=>{a!==e&&(this._removeLegendItemState(e,[A.uu.selected,A.uu.selectedHover,A.uu.focus],t),this._setLegendItemState(e,A.uu.unSelected,t))}))}else{null==(r=this._itemsContainer)||r.getChildren().forEach(t=>{t.removeState(A.uu.focus)});let{allowAllCanceled:e=!0}=this.attribute,i=a.hasState(A.uu.selected),s=this._getSelectedLegends();if("multiple"===o){if(!1===e&&i&&1===s.length)return void this._dispatchLegendEvent(A.dk.legendItemClick,a,t);i?(this._removeLegendItemState(a,[A.uu.selected,A.uu.selectedHover],t),this._setLegendItemState(a,A.uu.unSelected,t)):(this._setLegendItemState(a,A.uu.selected,t),this._removeLegendItemState(a,[A.uu.unSelected,A.uu.unSelectedHover],t))}else this._setLegendItemState(a,A.uu.selected,t),this._removeLegendItemState(a,[A.uu.unSelected,A.uu.unSelectedHover],t),null==(n=this._itemsContainer)||n.getChildren().forEach(e=>{a!==e&&(this._removeLegendItemState(e,[A.uu.selected,A.uu.selectedHover],t),this._setLegendItemState(e,A.uu.unSelected,t))})}this._dispatchLegendEvent(A.dk.legendItemClick,a,t)}}}render(){super.render(),this._lastActiveItem=null}setSelected(t){var e;(null==(e=this._itemsContainer)?void 0:e.getChildren()).forEach(e=>{let i=e.data;t.includes(i.label)?(this._setLegendItemState(e,A.uu.selected),this._removeLegendItemState(e,[A.uu.unSelected,A.uu.unSelectedHover])):(this._removeLegendItemState(e,[A.uu.selected,A.uu.selectedHover]),this._setLegendItemState(e,A.uu.unSelected))})}_renderItems(){let{item:t={},maxCol:e=1,maxRow:i=2,maxWidth:r,defaultSelected:a,lazyload:o,autoPage:l}=this.attribute,{spaceCol:h=A.Nu,spaceRow:u=A.so,verticalAlign:c="middle"}=t,d=this._itemsContainer,{items:p,isHorizontal:f,startIndex:g,isScrollbar:m}=this._itemContext,y=m?1:f?i:e,v=this._contentMaxHeight,b,{doWrap:x,maxWidthInCol:_,startX:w,startY:S,pages:C}=this._itemContext,D=0,T=0,B=[];for(let t=g,e=p.length;t<e&&!(o&&C>this._itemContext.currentPage*y);t++){o&&(this._itemContext.startIndex=t+1),(b=p[t]).id||(b.id=b.label),b.index=t;let e=!0;(0,n.Z)(a)&&(e=a.includes(b.label));let i=this._renderEachItem(b,e,t,p),g=i.attribute.width,y=i.attribute.height;this._itemHeight=Math.max(this._itemHeight,y),_=Math.max(g,_),this._itemMaxWidth=Math.max(g,this._itemMaxWidth),f?((0,s.Z)(r)&&(m&&l?x=(C=Math.ceil((w+g)/r))>1:w+g>r&&(x=!0,w>0&&("middle"!==c&&"bottom"!==c||B.forEach(t=>{t.setAttributes({y:t.attribute.y+(T-t.attribute.height)/("middle"===c?2:1)})}),C+=1,w=0,S+=T+u,T=0,B.length=0))),0===w&&0===S||i.setAttributes({x:w,y:S}),w+=h+g,T=Math.max(T,y),B.push(i)):((0,s.Z)(v)&&(m&&l?x=(C=Math.ceil((S+y)/v))>1:v<=y?(C+=1,x=!0,S=0,t>0&&(w+=D+h)):v<S+y&&(C+=1,x=!0,S=0,w+=_+h,_=0)),0===w&&0===S||i.setAttributes({x:w,y:S}),S+=u+y),d.add(i),D=g}return f&&("middle"===c||"bottom"===c)&&B.forEach(t=>{t.setAttributes({y:t.attribute.y+(T-t.attribute.height)/("middle"===c?2:1)})}),this._itemContext.doWrap=x,this._itemContext.startX=w,this._itemContext.startY=S,this._itemContext.maxWidthInCol=_,this._itemContext.pages=C,this._itemContext.maxPages=y,m&&(this._itemContext.totalPage=C),o||(this._itemContext.startIndex=p.length),this._itemContext}_renderContent(){let{item:t={},items:e,reversed:i,maxWidth:r,maxHeight:n}=this.attribute;if(!1===t.visible||(0,a.Z)(e))return;let h=e;i&&(h=null==e?void 0:e.reverse()),this._contentMaxHeight=Math.max(0,n-this._parsedPadding[0]-this._parsedPadding[2]);let u=m.i.group({x:0,y:0});this._itemsContainer=u;let{layout:c,autoPage:d}=this.attribute,{maxWidth:p,width:f,height:g}=t,y=[];(0,s.Z)(p)&&y.push(p),(0,s.Z)(f)&&y.push(f),y.length&&((0,s.Z)(r)&&y.push(r),this._itemWidthByUser=(0,o.iH)(y)),(0,s.Z)(g)&&(this._itemHeightByUser=g);let v=this.attribute.pager;this._itemContext={currentPage:v&&v.defaultCurrent||1,doWrap:!1,maxWidthInCol:0,maxPages:1,pages:1,startX:0,startY:0,startIndex:0,items:h,isHorizontal:"horizontal"===c,totalPage:1/0,isScrollbar:v&&"scrollbar"===v.type,clipContainer:void 0},this._itemContext=this._renderItems();let b=!1;this._itemContext.doWrap&&d&&this._itemContext.pages>this._itemContext.maxPages&&(b=this._renderPagerComponent()),b||(u.setAttribute("y",this._title?this._title.AABBBounds.height()+(0,l.Z)(this.attribute,"title.space",8):0),this._innerView.add(u))}_bindEvents(){if(this.attribute.disableTriggerEvent||!this._itemsContainer)return;let{hover:t=!0,select:e=!0}=this.attribute;if(t){let e="pointermove",i="pointerleave";(0,h.Z)(t)&&(t.trigger&&(e=t.trigger),t.triggerOff&&(i=t.triggerOff)),this._itemsContainer.addEventListener(e,this._onHover),this._itemsContainer.addEventListener(i,this._onUnHover)}if(e){let t="pointerdown";(0,h.Z)(e)&&e.trigger&&(t=e.trigger),this._itemsContainer.addEventListener(t,this._onClick)}}_autoEllipsis(t,e,i,r){var n,s;let{label:a,value:o}=this.attribute.item,l=r.AABBBounds,h=i.AABBBounds,u=l.width(),c=h.width(),d=!1;"labelFirst"===t?c>e?d=!0:r.setAttribute("maxLineWidth",e-c):"valueFirst"===t?u>e?d=!0:i.setAttribute("maxLineWidth",e-u):u+c>e&&(d=!0),d&&(r.setAttribute("maxLineWidth",Math.max(e*(null!=(n=a.widthRatio)?n:.5),e-c)),i.setAttribute("maxLineWidth",Math.max(e*(null!=(s=o.widthRatio)?s:.5),e-u)))}_renderEachItem(t,e,i,r){var a,o;let h,{id:d,label:p,value:f,shape:g}=t,{padding:y=0,focus:v,focusIconStyle:b,align:_,autoEllipsisStrategy:w}=this.attribute.item,{shape:S,label:C,value:D,background:T}=this.attribute.item,B=this._handleStyle(S,t,e,i,r),M=this._handleStyle(C,t,e,i,r),E=this._handleStyle(D,t,e,i,r),k=this._handleStyle(T,t,e,i,r),F=(0,u.o)(y);!1===T.visible?(h=m.i.group({x:0,y:0,cursor:null==(a=k.style)?void 0:a.cursor}),this._appendDataToShape(h,A.GN.item,t,h)):(h=m.i.group(Object.assign({x:0,y:0},k.style)),this._appendDataToShape(h,A.GN.item,t,h,k.state)),h.id=`${null!=d?d:p}-${i}`,h.addState(e?A.uu.selected:A.uu.unSelected);let R=m.i.group({x:0,y:0,pickable:!1});h.add(R);let P,O=0,L=0,I=0;if(S&&!1!==S.visible){let i=(0,l.Z)(B,"style.size",A.SX);L=(0,n.Z)(i)?i[0]||0:i,I=(0,l.Z)(S,"space",A.g);let r=m.i.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:"circle",strokeBoundsBuffer:0},g),B.style));Object.keys(B.state||{}).forEach(t=>{let e=B.state[t].fill||B.state[t].stroke;g.fill&&(0,c.Z)(B.state[t].fill)&&e&&(B.state[t].fill=e),g.stroke&&(0,c.Z)(B.state[t].stroke)&&e&&(B.state[t].stroke=e)}),this._appendDataToShape(r,A.GN.itemShape,t,h,B.state),r.addState(e?A.uu.selected:A.uu.unSelected),R.add(r)}let z=0;if(v){let e=(0,l.Z)(b,"size",A.SX);P=m.i.symbol(Object.assign(Object.assign({x:0,y:-e/2-1,strokeBoundsBuffer:0,boundsPadding:F},b),{visible:!0,pickMode:"imprecise"})),this._appendDataToShape(P,A.GN.focus,t,h),z=e}let Z=C.formatMethod?C.formatMethod(p,t,i):p,j=Object.assign(Object.assign({x:L/2+I,y:0,textAlign:"start",textBaseline:"middle",lineHeight:null==(o=M.style)?void 0:o.fontSize},M.style),{text:Z,_originText:C.formatMethod?p:void 0}),W=(0,x.vS)(j);this._appendDataToShape(W,A.GN.itemLabel,t,h,M.state),W.addState(e?A.uu.selected:A.uu.unSelected),R.add(W);let U=(0,l.Z)(C,"space",A.DN);if((0,s.Z)(f)){let r=(0,l.Z)(D,"space",v?A.qL:0),n=D.formatMethod?D.formatMethod(f,t,i):f,s=Object.assign(Object.assign({x:0,y:0,textAlign:"start",textBaseline:"middle",lineHeight:E.style.fontSize},E.style),{text:n,_originText:D.formatMethod?f:void 0}),a=(0,x.vS)(s);if(this._appendDataToShape(a,A.GN.itemValue,t,h,E.state),a.addState(e?A.uu.selected:A.uu.unSelected),this._itemWidthByUser){let t=this._itemWidthByUser-F[1]-F[3]-L-I-U-z-r;this._autoEllipsis(w,t,W,a),D.alignRight?a.setAttributes({textAlign:"right",x:this._itemWidthByUser-L/2-F[1]-F[3]-z-r}):a.setAttribute("x",U+(W.AABBBounds.empty()?0:W.AABBBounds.x2))}else a.setAttribute("x",U+(W.AABBBounds.empty()?0:W.AABBBounds.x2));O=r+(a.AABBBounds.empty()?0:a.AABBBounds.x2),R.add(a)}else this._itemWidthByUser&&W.setAttribute("maxLineWidth",this._itemWidthByUser-F[1]-F[3]-L-I-z),O=U+(W.AABBBounds.empty()?0:W.AABBBounds.x2);P&&(P.setAttribute("x",O),R.add(P));let N=R.AABBBounds,H=N.width();if("right"===_){let t=N.x2,e=N.x1;R.forEachChildren((i,r)=>{"symbol"!==i.type&&"right"!==i.attribute.textAlign||i===P?i.setAttribute("x",e+t-i.attribute.x-i.AABBBounds.width()):"symbol"!==i.type?i.setAttributes({x:e+t-i.attribute.x,textAlign:"left"}):i.setAttribute("x",e+t-i.attribute.x)})}let G=N.height(),V=(0,s.Z)(this.attribute.item.width)?this.attribute.item.width:H+F[1]+F[3],X=this._itemHeightByUser||G+F[0]+F[2];return h.attribute.width=V,h.attribute.height=X,P&&P.setAttribute("visible",!1),R.translateTo(-N.x1+F[3],-N.y1+F[0]),h}_createPager(t){var e,i;let{disableTriggerEvent:n,maxRow:s}=this.attribute,a=t=>t<=99?99:t<=999?999:9999;return new S(this._itemContext.isHorizontal?Object.assign(Object.assign({layout:1===s?"horizontal":"vertical",total:a(this._itemContext.pages)},(0,r.Z)({handler:{preShape:"triangleUp",nextShape:"triangleDown"}},t)),{defaultCurrent:null==(e=this.attribute.pager)?void 0:e.defaultCurrent,disableTriggerEvent:n}):Object.assign({layout:"horizontal",total:a(this._itemContext.pages),disableTriggerEvent:n,defaultCurrent:null==(i=this.attribute.pager)?void 0:i.defaultCurrent},t))}_createScrollbar(t,e){let{disableTriggerEvent:i}=this.attribute;return new D.B(this._itemContext.isHorizontal?Object.assign(Object.assign({direction:"horizontal",disableTriggerEvent:i,range:[0,.5],height:12*(!1!==t.visible)},t),{width:e}):Object.assign(Object.assign({direction:"vertical",width:12*(!1!==t.visible),range:[0,.5]},t),{height:e,disableTriggerEvent:i}))}_updatePositionOfPager(t,e,i){let{pager:r}=this.attribute,{totalPage:n,isHorizontal:s}=this._itemContext,a=r&&r.position||"middle";if(this._pagerComponent.setTotal(n),s){let r;r="start"===a?t:"end"===a?t+i-this._pagerComponent.AABBBounds.height()/2:t+i/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({x:e-this._pagerComponent.AABBBounds.width(),y:r})}else{let t;t="start"===a?0:"end"===a?e-this._pagerComponent.AABBBounds.width():(e-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({x:t,y:i-this._pagerComponent.AABBBounds.height()})}}_computeScrollbarDelta(){let t,{isHorizontal:e,clipContainer:i}=this._itemContext,r=this._itemsContainer.AABBBounds,n=i.AABBBounds;return e?n.width()/r.width():n.height()/r.height()}_updatePositionOfScrollbar(t,e,i){let{isHorizontal:r,currentPage:n,totalPage:s}=this._itemContext,a=(n-1)/s;this._pagerComponent.setScrollRange([a,a+this._computeScrollbarDelta()]),r?this._pagerComponent.setAttributes({x:0,y:i+e}):this._pagerComponent.setAttributes({x:t,y:i})}_bindEventsOfPager(t,e){let{animation:i=!0,animationDuration:r=450,animationEasing:n="quadIn"}=this.attribute.pager||{},s=this._itemContext.isScrollbar?t=>{let{value:e}=t.detail;return 0===e[0]?1:1===e[1]?this._itemContext.totalPage:e[0]*this._itemContext.totalPage+1}:t=>t.detail.current,a=a=>{let o=s(a);if(o!==this._itemContext.currentPage){if(this._itemContext.currentPage=o,this._itemContext&&this._itemContext.startIndex<this._itemContext.items.length){this._renderItems();let t=Math.ceil(this._itemContext.pages/this._itemContext.maxPages);if(this._itemContext.totalPage=t,this._itemContext.isScrollbar&&this._pagerComponent){let t=this._computeScrollbarDelta(),[e]=this._pagerComponent.getScrollRange();this._pagerComponent.setScrollRange([e,e+t])}}if(this._itemContext.isScrollbar){let[t]=this._pagerComponent.getScrollRange(),s=(this._itemContext.isHorizontal?this._itemsContainer.AABBBounds.width():this._itemsContainer.AABBBounds.height())*t;this.updateScrollMask(),i?this._itemsContainer.animate().to({[e]:-s},r,n):this._itemsContainer.setAttribute(e,-s)}else i?this._itemsContainer.animate().to({[e]:-(o-1)*t},r,n):this._itemsContainer.setAttribute(e,-(o-1)*t)}};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener("scrollDrag",a),this._pagerComponent.addEventListener("scrollUp",a),this.attribute.pager.roamScroll&&(this.addEventListener("wheel",t=>t.nativeEvent.preventDefault()),this.addEventListener("wheel",(0,d.Z)(t=>{let e=this._pagerComponent,i=e.getScrollRange(),{direction:r}=e.attribute,{width:n,height:s}=e.getSliderRenderBounds(),a="vertical"===r?t.deltaY/s:t.deltaX/n;e.setScrollRange([i[0]+a,i[1]+a],!0),this.updateScrollMask()},50)))):(this._pagerComponent.addEventListener("toPrev",a),this._pagerComponent.addEventListener("toNext",a))}_renderPager(){let t=this._title?this._title.AABBBounds.height()+(0,l.Z)(this.attribute,"title.space",8):0,{maxWidth:e,maxCol:i=1,maxRow:r=2,item:n={},pager:s={}}=this.attribute,{spaceCol:a=A.Nu,spaceRow:o=A.so}=n,h=this._itemsContainer,{space:u=A.Th,defaultCurrent:c=1}=s,d=T(s,["space","defaultCurrent"]),{isHorizontal:p}=this._itemContext,f=this._contentMaxHeight,g,y=0,v=0,b=0,x=0,_=0,w=0,S=1;if(p){if(v=(r-1)*o+this._itemHeight*r,y=e,g=this._createPager(d),this._pagerComponent=g,this._innerView.add(g),(b=e-g.AABBBounds.width()-u)<=0)return this._innerView.removeChild(g),!1;h.getChildren().forEach((t,e)=>{let{width:i,height:r}=t.attribute;b<_+i&&e>0&&(_=0,w+=r+o,S+=1),e>0&&t.setAttributes({x:_,y:w}),_+=a+i}),this._itemContext.startX=_,this._itemContext.startY=w,this._itemContext.pages=S;let i=Math.ceil(S/r);this._itemContext.totalPage=i,this._updatePositionOfPager(t,y,v)}else{if(y=this._itemMaxWidth*i+(i-1)*a,v=f,b=y,g=this._createPager(d),this._pagerComponent=g,this._innerView.add(g),(x=f-g.AABBBounds.height()-u-t)<=0)return this._innerView.removeChild(g),!1;h.getChildren().forEach((t,e)=>{let{width:i,height:r}=t.attribute;x<w+r&&e>0&&(w=0,_+=this._itemMaxWidth+a,S+=1),e>0&&t.setAttributes({x:_,y:w}),w+=o+r});let e=Math.ceil(S/i);this._itemContext.totalPage=e,this._updatePositionOfPager(t,y,v)}c>1&&(p?h.setAttribute("y",-(c-1)*(v+o)):h.setAttribute("x",-(c-1)*(y+a)));let C=m.i.group({x:0,y:t,width:p?b:y,height:p?v:x,clip:!0,pickable:!1});return C.add(h),this._innerView.add(C),this._itemContext.clipContainer=C,this._bindEventsOfPager(p?v+o:y+a,p?"y":"x"),!0}_renderScrollbar(){var t;let e=this._title?this._title.AABBBounds.height()+(0,l.Z)(this.attribute,"title.space",8):0,{maxWidth:i,item:r={},pager:n={}}=this.attribute,{spaceCol:s=A.Nu,spaceRow:a=A.so}=r,o=this._itemsContainer,{space:h=A.Th,defaultCurrent:u=1}=n,c=T(n,["space","defaultCurrent"]),{isHorizontal:d}=this._itemContext,p=this._contentMaxHeight,f,g=0,y=0,v=0,b=1;if(d)g=i,y=this._itemHeight,f=this._createScrollbar(c,g),this._pagerComponent=f,this._innerView.add(f);else{if(y=p-e,g=this._itemMaxWidth,f=this._createScrollbar(c,y),this._pagerComponent=f,this._innerView.add(f),y<=0)return this._innerView.removeChild(f),!1;let t=o.getChildren(),i=t.map(t=>t.attribute.height);if(1===i.length||i.every(t=>t===i[0])){let e=i[0],r=Math.floor(y/(a+e));y=r*(a+e),b=Math.ceil(t.length/r)}else t.forEach((t,e)=>{let{height:i}=t.attribute,r=b,n=v;b=Math.floor((v+i)/y)+1,v+=a+i,r!==b&&e===o.getChildren().length-1&&v-y>=1/3*i&&(y=n+i,b-=1)});this._itemContext.totalPage=b,this._itemContext.pages=b}if(u>1)if(d){let t=this._itemsContainer.AABBBounds.width()-g;o.setAttribute("x",-Math.min((u-1)*(g+s),t))}else{let t=this._itemsContainer.AABBBounds.height()-y;o.setAttribute("y",-Math.min((u-1)*(y+a),t))}let x=m.i.group({x:0,y:e,width:g,height:y,clip:!0,pickable:!1});return x.add(o),this._innerView.add(x),this._itemContext.clipContainer=x,this._updatePositionOfScrollbar(g,y,e),(null==(t=n.scrollMask)?void 0:t.visible)&&this.renderScrollMask(x),this._bindEventsOfPager(d?g:y,d?"x":"y"),!0}renderScrollMask(t){let{scrollMask:e={}}=this.attribute.pager,{visible:i=!0,gradientLength:r=16,gradientStops:n}=e;if(!i||!n)return;let s=t.AABBBounds.width(),a=t.AABBBounds.height(),o=this._itemContext.isHorizontal?s:a,l=n.map(t=>({offset:r*t.offset/o,color:t.color})),h=n.map(t=>({offset:(o-r*t.offset)/o,color:t.color})),u=m.i.rect({x:0,y:0,width:s,height:a});this._scrollMask=u,this._scrollMaskContext={startStops:l,endStops:h},this.updateScrollMask(),t.add(u)}updateScrollMask(){if(!this._scrollMask||!this._pagerComponent||!this._itemContext.isScrollbar)return;let[t,e]=this._pagerComponent.getScrollRange(),i=[];(0,p.Yt)((0,f.Z)(e,0,1),1)||i.push(...this._scrollMaskContext.endStops),(0,p.Yt)((0,f.Z)(t,0,1),0)||i.push(...this._scrollMaskContext.startStops),i.length&&(this._itemContext.isHorizontal?this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:i}}):this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:0,y1:1,stops:i}}))}_renderPagerComponent(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}_hover(t,e){this._lastActiveItem=t,t.hasState(A.uu.selected)?this._setLegendItemState(t,A.uu.selectedHover,e):this._setLegendItemState(t,A.uu.unSelectedHover,e);let i=t.getChildren()[0].find(t=>t.name===A.GN.focus,!1);i&&i.setAttribute("visible",!0),this._dispatchLegendEvent(A.dk.legendItemHover,t,e)}_unHover(t,e){let i=!1;(t.hasState(A.uu.unSelectedHover)||t.hasState(A.uu.selectedHover))&&(i=!0),t.removeState(A.uu.unSelectedHover),t.removeState(A.uu.selectedHover),t.getChildren()[0].getChildren().forEach(t=>{!i&&(t.hasState(A.uu.unSelectedHover)||t.hasState(A.uu.selectedHover))&&(i=!0),t.removeState(A.uu.unSelectedHover),t.removeState(A.uu.selectedHover)});let r=t.getChildren()[0].find(t=>t.name===A.GN.focus,!1);r&&r.setAttribute("visible",!1),i&&this._dispatchLegendEvent(A.dk.legendItemAttributeUpdate,t,e),this._dispatchLegendEvent(A.dk.legendItemUnHover,t,e)}_setLegendItemState(t,e,i){let r=!1;t.hasState(e)||(r=!0),t.addState(e,!0),t.getChildren()[0].getChildren().forEach(t=>{t.name!==A.GN.focus&&(r||t.hasState(e)||(r=!0),t.addState(e,!0))}),r&&this._dispatchLegendEvent(A.dk.legendItemAttributeUpdate,t,i)}_removeLegendItemState(t,e,i){let r=!1;e.forEach(e=>{!r&&t.hasState(e)&&(r=!0),t.removeState(e)}),t.getChildren()[0].getChildren().forEach(t=>{t.name!==A.GN.focus&&e.forEach(e=>{!r&&t.hasState(e)&&(r=!0),t.removeState(e)})}),r&&this._dispatchLegendEvent(A.dk.legendItemAttributeUpdate,t,i)}_getSelectedLegends(){var t;let e=[];return null==(t=this._itemsContainer)||t.getChildren().forEach(t=>{t.hasState(A.uu.selected)&&e.push(t.data)}),e}_appendDataToShape(t,e,i,n,s={}){t.name=e,t.data=i,t.delegate=n,t.states=(0,r.Z)({},B,s)}_dispatchLegendEvent(t,e,i){let r=this._getSelectedLegends();r.sort((t,e)=>t.index-e.index);let n=r.map(t=>t.label);this._dispatchEvent(t,{item:e,data:e.data,selected:e.hasState(A.uu.selected),currentSelectedItems:r,currentSelected:n,event:i})}_handleStyle(t,e,i,r,n){let s={};return t.style&&((0,g.Z)(t.style)?s.style=t.style(e,i,r,n):s.style=t.style),t.state&&(s.state={},Object.keys(t.state).forEach(a=>{t.state[a]&&((0,g.Z)(t.state[a])?s.state[a]=t.state[a](e,i,r,n):s.state[a]=t.state[a])})),s}release(){super.release(),this.removeAllEventListeners()}}M.defaultAttributes={layout:"horizontal",title:{align:"start",space:A.$5,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:A.Nu,spaceRow:A.so,shape:{space:A.g,style:{size:A.SX,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:A.DN,style:{fontSize:12,fill:"#2C3542",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"}},focus:!1,focusIconStyle:{size:A.SX,symbolType:"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#333",cursor:"pointer"}},autoPage:!0,pager:{space:A.Th,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!0}},83937:function(t,e,i){"use strict";i.d(e,{cV:()=>K,Vo:()=>J,Fw:()=>Q});var r,n,s=i(11511),a=i(54326),o=i(83624),l=i(52462),h=i(78085),u=i(17852),c=i(92631),d=i(10773),p=i(86339);let f=["path","customPath",...l.DH];class g extends l.zs{constructor(t){super(t),this.type="path",this.numberType=d.qm}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{path:t}=this.attribute;return null!=t&&""!==t}getParsedPathShape(){let t=this.getGraphicTheme();if(!this.valid)return t.path;let e=this.attribute;return e.path instanceof h.r?e.path:((0,a.Z)(this.cache)&&this.doUpdatePathShape(),this.cache instanceof h.r?this.cache:t.path)}getGraphicTheme(){return(0,u.gh)(this).path}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let t=this.getParsedPathShape();i.union(t.getBounds())}let{tb1:r,tb2:n}=c.w.graphicService.updateTempAABBBounds(i);(0,p.E)(t,e,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;let{lineJoin:s=e.lineJoin}=t;return c.w.graphicService.transformAABBBounds(t,i,e,"miter"===s,this),i}doUpdateAABBBounds(t){return this.doUpdatePathShape(),super.doUpdateAABBBounds(t)}doUpdatePathShape(){let t=this.attribute;(0,o.Z)(t.path,!0)?this.cache=(new h.r).fromString(t.path):t.customPath&&(this.cache=new h.r,t.customPath(this.cache,this))}needUpdateTags(t){return super.needUpdateTags(t,f)}needUpdateTag(t){return super.needUpdateTag(t,f)}toCustomPath(){return(new h.r).fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new g(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return g.NOWORK_ANIMATE_ATTR}}function m(t){return new g(t)}g.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},l.Wl);var y=i(66987),v=i(34505),b=i(77909),x=i(22415),_=i(89677),w=i(13922),S=i(34865),A=i(26845),C=i(47816),D=i(72618),T=i(75946);let B=i(60865).H,M=_.R6;var E=function(t,e){return function(i,r){e(i,r,t)}};let k=class extends T.Y{constructor(t){super(),this.graphicRenderContributions=t,this.numberType=d.qm,this.builtinContributions=[M,B],this.init(t)}drawShape(t,e,i,r,n,s,a,o){var l,h,c;let d=null!=(l=this.tempTheme)?l:(0,u.gh)(t,null==s?void 0:s.theme).path,{x:p=d.x,y:f=d.y,fillStrokeOrder:g=d.fillStrokeOrder}=t.attribute,m=null!=(h=this.z)?h:0,y=this.valid(t,d,a,o);if(!y)return;let{fVisible:v,sVisible:b,doFill:x,doStroke:_}=y;if(e.beginPath(),t.pathShape)(0,D.h)(t.pathShape.commandList,e,i,r,1,1,m);else{let n=null!=(c=t.attribute.path)?c:d.path;(0,D.h)(n.commandList,e,i,r,1,1,m)}e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,d),this.beforeRenderStep(t,e,i,r,x,_,v,b,d,n,a,o);let w=()=>{_&&(o?o(e,t.attribute,d):b&&(e.setStrokeStyle(t,t.attribute,p-i,f-r,d),e.stroke()))},S=()=>{x&&(a?a(e,t.attribute,d):v&&(e.setCommonStyle(t,t.attribute,p-i,f-r,d),e.fill()))};g?(w(),S()):(S(),w()),this.afterRenderStep(t,e,i,r,x,_,v,b,d,n,a,o)}draw(t,e,i,r){let n=(0,u.gh)(t,null==r?void 0:r.theme).path;this.tempTheme=n,this._draw(t,n,!1,i,r),this.tempTheme=null}};k=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,S.b)(),E(0,(0,A.f)(b.Qc)),E(0,(0,C.t)(w.Mj)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],k);var F=i(32227);let R=!1,P=new x.n(t=>{R||(R=!0,t(k).toSelf().inSingletonScope(),t(F.lG).to(k).inSingletonScope(),t(F.uz).toService(F.lG),t(w.Mj).toService(_.Sg),(0,b.yb)(t,w.Mj))});var O=i(66417),L=i(57355),I=i(26984);let z=class extends I.Q{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=d.qm}};z=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,S.b)(),(r=(0,A.f)(F.lG),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],z);let Z=!1,j=new x.n((t,e,i,r)=>{Z||(Z=!0,t(L.ks).to(z).inSingletonScope(),t(L.EL).toService(L.ks))});var W=i(55082);let U=class extends W.o{constructor(t){super(),this.canvasRenderer=t,this.type="path",this.numberType=d.qm}};U=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,S.b)(),(n=(0,A.f)(F.lG),function(t,e){n(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],U);let N=!1,H=new x.n((t,e,i,r)=>{N||(N=!0,t(L.Ex).to(U).inSingletonScope(),t(L.XN).toService(L.Ex))});function G(){G.__loaded||(G.__loaded=!0,y.i.RegisterGraphicCreator("path",m),v.n.load(P),v.n.load(O.X?j:H))}G.__loaded=!1;var V=i(30381),X=i(7291),Y=i(13436),$=i(47169);function q(){(0,s.M)(),(0,V.b)()}function K(){q(),(0,X.s)(),(0,$.M)()}function Q(){q(),(0,Y.d)()}function J(){q(),(0,Y.d)(),G()}},39489:function(t,e,i){"use strict";i.d(e,{D:()=>h});var r=i(66987),n=i(20408),s=i(25397),a=i(56483),o=i(48554),l=i(14604);(0,i(83937).Vo)();class h extends a.U{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,n.Z)({},h.defaultAttributes,t)),this.name="sizeLegend",this._onSliderChange=t=>{this.dispatchEvent(t)},this._onSliderToolipChange=t=>{this.dispatchEvent(t)}}setSelected(t){this._slider&&this._slider.setValue(t)}_renderContent(){let{slidable:t,layout:e,align:i,min:n,max:a,value:h,railWidth:u,railHeight:c,showHandler:d=!0,handlerSize:p,handlerStyle:f,railStyle:g,trackStyle:m,startText:y,endText:v,handlerText:b,showTooltip:x,tooltip:_,sizeBackground:w,disableTriggerEvent:S,inverse:A}=this.attribute,C=r.i.group({x:0,y:0});this._innerView.add(C);let D=new o.i({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:t,layout:e,align:i,min:n,max:a,value:h,railWidth:u,railHeight:c,showHandler:d,handlerSize:p,handlerStyle:Object.assign({symbolType:function(t="bottom"){let e=0;return"top"===t?`
    M${e},-6L${e-3.5},-2.5
    v5
    h7
    v-5
    Z
`:"left"===t?(e=1,`
    M${e-6},0L${e-6+2.5},-3.5
    h5
    v7
    h-5
    Z
`):"right"===t?(e=-1,`
    M${e+6},0L${e+6-2.5},-3.5
    h-5
    v7
    h5
    Z
  `):`
    M${e},6L${e-3.5},2.5
    v-5
    h7
    v5
    Z
`}(i)},f),railStyle:g,trackStyle:m,startText:y,endText:v,handlerText:b,showTooltip:x,tooltip:_,disableTriggerEvent:S,inverse:A});C.add(D);let T,B=0;"horizontal"===e?"top"===i?(T=`M0,0L${u},0L${A?0:u},12Z`,B=c):(T=`M0,12L${u},12L${A?0:u},0Z`,D.setAttribute("y",12)):"left"===i?T=`M${u},0L${u+12},${A?0:c}L${u},${c}Z`:(T=`M0,${A?0:c}L12,${c}L12,0Z`,D.setAttribute("x",12));let M=r.i.path(Object.assign(Object.assign({x:0,y:B,path:T},w),{zIndex:0}));C.add(M);let E=this._title?this._title.AABBBounds.height()+(0,s.Z)(this.attribute,"title.space",l.$5):0;C.translate(0-C.AABBBounds.x1,E-C.AABBBounds.y1),this._slider=D}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}}h.defaultAttributes={layout:"horizontal",title:{align:"start",space:l.$5,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:"#ccc",fill:"#fff"},sizeBackground:{fill:"rgba(20,20,20,0.1)"}}},7291:function(t,e,i){"use strict";i.d(e,{s:()=>a});var r=i(11511),n=i(16636),s=i(24599);function a(){(0,r.M)(),(0,n.k)(),(0,s.g)()}},60779:function(t,e,i){"use strict";i.d(e,{C:()=>O});var r=i(22415),n=i(13922),s=i(89340),a=i(34505),o=i(34865),l=i(63401),h=i(20408),u=i(64639),c=i(64776),d=i(95723),p=i(44843),f=i(8830),g=i(63778),m=i(19273),y=i(50322),v=i(84306),b=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)0>e.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i};let x=new l.FB;(0,v.q)();let _="M -0.5 -0.5, L -0.5 0.5, L 0.5 -0.5, Z",w="M -0.5 -0.5, L -0.5 0.5, L 0.5 0.5, Z",S="M -0.5 -0.5, L 0.5 -0.5, L 0.5 0.5, Z",A="M 0.5 -0.5, L 0.5 0.5, L -0.5 0.5, Z",C={tl:_,tr:S,bl:w,br:A,lt:_,lb:w,rt:S,rb:A};class D extends y.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,h.Z)({},D.defaultAttributes,t)),this.name="poptip",this.positionList=["top","tl","tr","bottom","bl","br","left","lt","lb","right","rt","rb"]}render(){var t,e,i,r,n,s,a,o,h;let{titleStyle:y={},position:v,contentStyle:_={},panel:w,logoSymbol:S,poptipAnchor:A="position",logoText:D,logoTextStyle:T={},triangleMode:B="default",space:M=4,minWidth:E=0,maxWidth:k=1/0,padding:F=4,maxWidthPercent:R,visible:P,state:O,dx:L=0,dy:I=0,positionBounds:z}=this.attribute,{title:Z="",content:j=""}=this.attribute;Z=this.attribute.titleFormatMethod?this.attribute.titleFormatMethod(Z):Z,j=this.attribute.contentFormatMethod?this.attribute.contentFormatMethod(j):j;let W=(0,u.o)(F),U=this.createOrUpdateChild("poptip-content",{x:0,y:0,zIndex:1},"group");this.group=U;let N=k-W[1]-W[3],H=(0,c.Z)(Z)&&!1!==P,G=Object.assign(Object.assign({text:(0,d.Z)(Z)?Z:[Z],visible:H,wrap:!0},y),{x:W[3],y:W[0],maxLineWidth:N,textAlign:"left",textBaseline:"top"}),V=U.createOrUpdateChild("poptip-title",G,"text");(0,p.Z)(null==O?void 0:O.title)||(V.states=O.title);let X=V.AABBBounds,Y=X.height(),$=X.width(),q=Y+M;H||(q=0);let K=(0,c.Z)(j)&&!1!==P,Q=Object.assign(Object.assign({text:(0,d.Z)(j)?j:[j],visible:K,wrap:!0},_),{x:W[3],y:W[0]+q,maxLineWidth:N,textAlign:"left",textBaseline:"top"}),J=U.createOrUpdateChild("poptip-content",Q,"text");(0,p.Z)(null==O?void 0:O.content)||(J.states=O.content);let tt=J.AABBBounds,te=tt.height(),ti=tt.width();K&&(q+=te),this.titleShape=V,this.contentShape=J;let tr=(0,f.Fp)($+W[1]+W[3],ti+W[1]+W[3]);tr>k?tr=k:tr<E&&(tr=E);let tn=W[0]+W[2]+q,{visible:ts,square:ta}=w,to=b(w,["visible","square"]);if(ta){let t=(0,f.Fp)(tr,tn);tr=t;let e=t-tn;tn=t,V.setAttributes({dy:e/2}),J.setAttributes({dy:e/2})}let tl=null!=(t=to.size)?t:12,th=(0,d.Z)(tl)?[tl[0]+(null!=(e=to.space)?e:0),tl[1]+(null!=(i=to.space)?i:0)]:tl+(null!=(r=to.space)?r:0),tu=null!=(n=to.lineWidth)?n:1,tc=this.stage?[null!=(s=this.stage.viewWidth)?s:this.stage.width,null!=(a=this.stage.viewHeight)?a:this.stage.height]:void 0;if(tc){let t=this.AABBBounds,e=Math.max(null!=(o=this.attribute.x)?o:t.x1,tc[0]-t.x1);if((e=Math.min(e-(((0,d.Z)(tl)?tl[0]:12)+3),e*R))<tr){tr=e;let t=W[1]+W[3];V.setAttribute("maxLineWidth",e-t),J.setAttribute("maxLineWidth",e-t),tn=W[0]+W[2],H&&(tn+=V.AABBBounds.height()+M),tn+=J.AABBBounds.height()}}let td="auto"===v||(0,d.Z)(v),tp=(0,d.Z)(v)?v:this.positionList,tf,tg=-1/0;for(let t=0;t<tp.length+1;t++){let e=td?tp[t===tp.length?tf:t]:v,i="arrow2Left",r=((0,d.Z)(tl)?tl[0]:tl)/4,n=0;"top"===e||"bottom"===e||"left"===e||"right"===e?i="arrow2Left":"concise"===B&&(i=C[e],r=["tl","bl","rt","rb"].includes(e)?((0,d.Z)(tl)?tl[0]:tl)/2:-((0,d.Z)(tl)?tl[0]:tl)/2,n=["tl","tr","lb","rb"].includes(e)?-((0,d.Z)(tl)?tl[1]:tl)/2:((0,d.Z)(tl)?tl[1]:tl)/2);let{angle:s,offset:a}=this.getAngleAndOffset(e,tr,tn,(0,d.Z)(th)?th:[th,th-tu],i),o,u={x:0,y:0};if("bounds"===A&&z&&(u=this.calculateAnchorPoint(e,z)),(0,g.Z)(ts)){let t;o=U.createOrUpdateChild("poptip-symbol-panel",Object.assign(Object.assign({},to),{visible:ts&&(K||H),x:r,y:n,strokeBoundsBuffer:-1,boundsPadding:-2,anchor:[0,0],symbolType:i,angle:s,dx:a[0],dy:a[1]-(null!=(h=to.space)?h:0),size:tl,zIndex:9}),"symbol"),(0,p.Z)(null==O?void 0:O.panel)||(o.states=O.panel),t=w.panelSymbolType?U.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},to),{visible:ts&&(K||H),x:0,y:0,symbolType:"rect",size:[tr,tn],zIndex:-8}),"symbol"):U.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},to),{visible:ts&&(K||H),x:0,y:0,width:tr,height:tn,zIndex:-8}),"rect"),(0,p.Z)(null==O?void 0:O.panel)||(t.states=O.panel)}if(U.setAttributes({x:-a[0]+L+u.x,y:-a[1]+I+u.y,anchor:[r,n]}),S){let{size:t=12}=S,e=(0,d.Z)(t)?t:[t,t];"auto"===e[1]&&(e[1]=tn),"auto"===e[0]&&(e[0]=tn);let i=e[0];U.createOrUpdateChild("poptip-logo",Object.assign(Object.assign({},S),{x:0,y:tn/2,visible:ts&&(K||H),zIndex:10,size:e}),"symbol"),U.setAttributes({x:-a[0]+L+i/2,y:-a[1]+I}),D&&U.createOrUpdateChild("poptip-logo-text",Object.assign(Object.assign({},T),{x:0,y:tn/2,visible:ts&&(K||H),text:D,textAlign:"center",textBaseline:"middle",zIndex:10}),"text")}if(!tc)break;{x.setValue(0,0,tr,tn).transformWithMatrix(U.globalTransMatrix);let i=(new l.YZ).setValue(0,0,tc[0],tc[1]);if(td){if((0,m.RA)(x,i,!1))break;{let e=(0,m.di)(x,i,!1),r=(e.x2-e.x1)*(e.y2-e.y1);r>tg&&(tg=r,tf=t)}}if(["top","bottom","left","right"].includes(e)){let t="top"===e||"bottom"===e,r="left"===e||"right"===e,n=!1;if(t?n="top"===e&&x.y1<0||"bottom"===e&&x.y2>i.y2:r&&(n="left"===e&&x.x1<0||"right"===e&&x.x2>i.x2),!n){let e=0,n=((0,d.Z)(tl)?tl[1]:tl)/2;t?(x.x1<0?e=-x.x1:x.x2>i.x2&&(e=i.x2-x.x2),U.setAttribute("x",U.attribute.x+e),o.setAttribute("dx",(0,f.VV)((0,f.Fp)(o.attribute.dx-e,n),x.width()-n))):r&&(x.y1<0?e=-x.y1:x.y2>i.y2&&(e=i.y2-x.y2),U.setAttribute("y",U.attribute.y+e),o.setAttribute("dy",(0,f.VV)((0,f.Fp)(o.attribute.dy-e,n),x.height()-n)));break}}if(!td)break}}}calculateAnchorPoint(t,e){if(!e)return{x:0,y:0};let{x:i,y:r}=this.attribute,{x1:n,y1:s,x2:a,y2:o}=e,l=a-n,h=o-s;switch(t){case"top":case"tl":case"tr":return{x:n+l/2-i,y:s-r};case"bottom":case"bl":case"br":return{x:n+l/2-i,y:o-r};case"left":case"lt":case"lb":return{x:n-i,y:s+h/2-r};case"right":case"rt":case"rb":return{x:a-i,y:s+h/2-r};default:return{x:0,y:0}}}getAngleAndOffset(t,e,i,r,n){let s="arrow2Left"===n?r[1]/2:r[1];switch(t){case"tl":return{angle:"arrow2Left"===n?f.pi/2*3:0,offset:"arrow2Left"===n?[e/4,i+s]:[0,i+s]};case"top":return{angle:f.pi/2*3,offset:[e/2,i+s]};case"tr":return{angle:"arrow2Left"===n?f.pi/2*3:0,offset:"arrow2Left"===n?[e/4*3,i+s]:[e,i+s]};case"rt":return{angle:0,offset:"arrow2Left"===n?[-s,i/5]:[-s,0]};case"right":return{angle:0,offset:[-s,i/2]};case"rb":return{angle:0,offset:"arrow2Left"===n?[-s,i/5*4]:[-s,i]};case"bl":return{angle:"arrow2Left"===n?f.pi/2:0,offset:"arrow2Left"===n?[e/4,-s]:[0,-s]};case"bottom":return{angle:f.pi/2,offset:[e/2,-s]};case"br":return{angle:"arrow2Left"===n?f.pi/2:0,offset:"arrow2Left"===n?[e/4*3,-s]:[e,-s]};case"lt":return{angle:"arrow2Left"===n?f.pi:0,offset:"arrow2Left"===n?[e+s,i/5]:[e+s,0]};case"left":return{angle:f.pi,offset:[e+s,i/2]};case"lb":return{angle:"arrow2Left"===n?f.pi:0,offset:"arrow2Left"===n?[e+s,i/5*4]:[e+s,i]}}}}D.defaultAttributes={position:"rt",visible:!0,title:null,content:null,titleStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},contentStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},panel:{},maxWidthPercent:.8,space:8,padding:10};var T=i(41097);let B=class{render(t,e,i,r,n,s,a,o,l,u,c,d,p){var f,g,m;if(1===t._showPoptip){let{visible:e,visibleCb:i}=t.attribute.poptip||{};if(!1===e||i&&!1===i(t))return;let r={};(0,h.Z)(r,D.defaultAttributes,t.attribute.poptip?t.attribute.poptip:{}),this.poptipComponent?this.poptipComponent.initAttributes(r):this.poptipComponent=new D(r);let n=t.attribute.poptip||{};if("text"===t.type&&null==n.title&&null==n.content){let e={};m=n,(0,h.Z)(e,T.r.poptip,m),(n=e).content=null!=(f=n.content)?f:t.attribute.text}let s=t.globalTransMatrix;this.poptipComponent.setAttributes(Object.assign(Object.assign({visibleAll:!0,pickable:!1,childrenPickable:!1,poptipAnchor:"bounds"},n),{x:s.e,y:s.f,positionBounds:t.globalAABBBounds})),u.stage.tryInitInteractiveLayer();let a=u.stage.getLayer("_builtin_interactive");a&&a.add(this.poptipComponent)}else 2===t._showPoptip&&(t._showPoptip=0,this.poptipComponent&&(this.poptipComponent.setAttributes({visibleAll:!1}),null==(g=this.poptipComponent.parent)||g.removeChild(this.poptipComponent),this.poptipComponent=null))}};B=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,o.b)()],B);var M=i(27753),E=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};class k{constructor(){this.activeEvent="onRegister",this._uid=M.R.GenAutoIncrementId(),this.poptip=t=>{let e=t.target;this.needHide(e)?this.unpoptip(t):e!==this.activeGraphic&&(this.needShow(e)&&(e.setAttributes({}),e._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(e,!0))},this.unpoptip=t=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(t){this.pluginService=t;let{stage:e}=this.pluginService;e.addEventListener("pointerover",this.poptip)}needHide(t){return t.isContainer||!t.attribute}needShow(t){return!!t.attribute.poptip}setActiveGraphic(t,e){this.activeGraphic=t,this.pluginService.stage.renderNextFrame()}deactivate(t){let{stage:e}=this.pluginService;e.removeEventListener("pointerover",this.poptip)}}let F=class extends k{constructor(){super(...arguments),this.name="poptip",this.key=this.name+this._uid}};F=E([(0,o.b)()],F);let R=class extends k{constructor(){super(...arguments),this.name="poptipForText",this.key=this.name+this._uid,this.pointerlave=t=>{let{stage:e}=this.pluginService;t.target===e&&this.unpoptip(t)}}activate(t){super.activate(t);let{stage:e}=this.pluginService;e.addEventListener("pointerleave",this.pointerlave)}needHide(t){return"text"!==t.type||!t.cliped||t.isContainer||!t.attribute||t.attribute.disableAutoClipedPoptip}needShow(t){return!0}deactivate(t){let{stage:e}=this.pluginService;super.deactivate(t),e.removeEventListener("pointerleave",this.pointerlave)}};R=E([(0,o.b)()],R);let P=new r.n((t,e,i,r)=>{i(B)||(t(B).toSelf().inSingletonScope(),t(n.tg).toService(B)),i(F)||(t(F).toSelf(),t(s.X).toService(F)),i(R)||(t(R).toSelf(),t(s.X).toService(R))});function O(){a.n.load(P)}},84306:function(t,e,i){"use strict";i.d(e,{C:()=>u,q:()=>h});var r=i(20408),n=i(41097),s=i(11511),a=i(24599),o=i(16636),l=i(99754);function h(){(0,s.M)(),(0,a.g)(),(0,o.k)(),(0,l.k)()}function u(t){(0,r.Z)(n.r.poptip,n.t,t)}},41097:function(t,e,i){"use strict";i.d(e,{r:()=>s,t:()=>n});var r=i(20408);let n={visible:!0,position:"auto",titleStyle:{fontSize:16,fill:"#08979c"},contentStyle:{fontSize:12,fill:"green"},panel:{visible:!0,fill:"#e6fffb",size:12,space:0,stroke:"#87e8de",lineWidth:1,cornerRadius:4}},s={poptip:(0,r.Z)({},n)}},36637:function(t,e,i){"use strict";i.d(e,{Y:()=>b});var r=i(20408),n=i(50322),s=i(638),a=i(63654),o=i(11511),l=i(99754),h=i(95723),u=i(79861),c=i(92631),d=i(19626);let p=["heightLimit","lineClamp"];class f extends a.x{constructor(t){super(Object.assign(Object.assign({},t),{wrap:!0}))}_isValid(){let{text:t}=this.attribute;return(0,h.Z)(t)?!t.every(t=>null==t||""===t):null!=t&&""!==t}updateMultilineAABBBounds(t){var e,i,r,n,s;let a=this.getGraphicTheme(),{fontFamily:o=a.fontFamily,textAlign:l=a.textAlign,textBaseline:h=a.textBaseline,fontSize:p=a.fontSize,ellipsis:f=a.ellipsis,maxLineWidth:g,stroke:m=a.stroke,lineWidth:y=a.lineWidth,wordBreak:v=a.wordBreak,fontWeight:b=a.fontWeight,ignoreBuf:x=a.ignoreBuf,heightLimit:_=0,suffixPosition:w=a.suffixPosition,lineClamp:S}=this.attribute,A=null!=(e=(0,d.VA)(this.attribute.lineHeight,this.attribute.fontSize||a.fontSize))?e:this.attribute.fontSize||a.fontSize;if(!this.shouldUpdateShape()&&(null==(i=this.cache)?void 0:i.layoutData)){let t=this.cache.layoutData.bbox;return this._AABBBounds.set(t.xOffset,t.yOffset,t.xOffset+t.width,t.yOffset+t.height),m&&this._AABBBounds.expand(y/2),this._AABBBounds}let C=c.w.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(r=this.stage)?void 0:r.textMeasureId)),D=new u.j(o,{fontSize:p,fontWeight:b,fontFamily:o},C),T=t.map(t=>t.toString()),B=[],M=[0,0],E=1/0;if(_>0&&(E=Math.max(Math.floor(_/A),1)),S&&(E=Math.min(E,S)),"number"==typeof g&&g!==1/0){if(g>0)for(let t=0;t<T.length;t++){let e=T[t],i=!0;if(t===E-1){let t=D.textMeasure.clipTextWithSuffix(e,D.textOptions,g,f,!1,w);B.push({str:t.str,width:t.width,ascent:0,descent:0,keepCenterInLine:!1});break}let r=D.textMeasure.clipText(e,D.textOptions,g,"break-word"===v);if(""!==e&&""===r.str){if(f){let t=D.textMeasure.clipTextWithSuffix(e,D.textOptions,g,f,!1,w);r.str=null!=(n=t.str)?n:"",r.width=null!=(s=t.width)?s:0}else r.str="",r.width=0;i=!1}if(B.push({str:r.str,width:r.width,ascent:0,descent:0,keepCenterInLine:!1}),r.str.length===e.length);else if(i){let i=e.substring(r.str.length);T.splice(t+1,0,i)}}let t=0;B.forEach(e=>{t=Math.max(t,e.width)}),M[0]=t}else{let t,e,i=0;for(let r=0,n=T.length;r<n;r++){if(r===E-1){let t=D.textMeasure.clipTextWithSuffix(T[r],D.textOptions,g,f,!1,w);B.push({str:t.str,width:t.width,ascent:0,descent:0,keepCenterInLine:!1}),i=Math.max(i,t.width);break}e=T[r],i=Math.max(i,t=D.textMeasure.measureTextWidth(e,D.textOptions,"break-word"===v)),B.push({str:e,width:t,ascent:0,descent:0,keepCenterInLine:!1})}M[0]=i}M[1]=B.length*(A+2*!x);let k={xOffset:0,yOffset:0,width:M[0],height:M[1]};D.LayoutBBox(k,l,h);let F=D.layoutWithBBox(k,B,l,h,A);return this.cache.layoutData=F,this.clearUpdateShapeTag(),this._AABBBounds.set(k.xOffset,k.yOffset,k.xOffset+k.width,k.yOffset+k.height),m&&this._AABBBounds.expand(y/2),this._AABBBounds}needUpdateTags(t){for(let e=0;e<p.length;e++){let i=p[e];if(-1!==t.indexOf(i))return!0}return super.needUpdateTags(t)}needUpdateTag(t){for(let e=0;e<p.length;e++)if(t===p[e])return!0;return super.needUpdateTag(t)}getNoWorkAnimateAttr(){return f.NOWORK_ANIMATE_ATTR}}function g(t){return new f(t)}var m=i(66987);function y(){y.__loaded||(y.__loaded=!0,m.i.RegisterGraphicCreator("wrapText",g))}y.__loaded=!1;var v=i(29922);(0,o.M)(),(0,l.k)(),y(),(0,v.i)();class b extends n.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},b.defaultAttributes,t)),this._handlePointerUp=()=>{this.attribute.disabled||this.attribute.checked||(this.setAttribute("checked",!0),this._dispatchEvent("radio_checked",{eventType:"radio_checked",target:this}),this.stage.renderNextFrame())},this.renderGroup(),this.onBeforeAttributeUpdate=(t,e,i)=>{"interactive"in t&&this.setAttribute("pickable",t.interactive),"disabled"in t&&this.setAttribute("cursor",t.disable?this.attribute.disableCursor:this.attribute.cursor)},this.addEventListener("pointerup",this._handlePointerUp)}render(){this.removeAllChild(!0),this.renderCircle(),this.renderText(),this.layout()}renderCircle(){this._circle=new s.w((0,r.Z)({},this.attribute.circle));let t=this.attribute.checked;t&&this.attribute.disabled?this._circle.setAttributes({fill:this.attribute.circle.disableCheckedFill,stroke:this.attribute.circle.disableCheckedStroke}):t?this._circle.setAttributes({fill:this.attribute.circle.checkedFill,stroke:this.attribute.circle.checkedStroke}):this.attribute.disabled&&this._circle.setAttributes({fill:this.attribute.circle.disableFill}),this.appendChild(this._circle)}renderText(){this._text=new a.x((0,r.Z)({},this.attribute.text)),this.attribute.disabled&&this._text.setAttribute("fill",this.attribute.text.disableFill),this.appendChild(this._text)}renderGroup(){this.attribute.interactive||this.setAttribute("pickable",!1),this.attribute.disabled&&this.setAttribute("cursor",this.attribute.disableCursor)}layout(){let t=2*(this.attribute.circle.outerRadius+this.attribute.circle.lineWidth),e=this._text.AABBBounds.height(),i=Math.max(t,e),r=i/2-t/2+this.attribute.circle.outerRadius+this.attribute.circle.lineWidth,n=2*(this.attribute.circle.outerRadius+this.attribute.circle.lineWidth),s=this.attribute.circle.outerRadius+this.attribute.circle.lineWidth,a=n+this.attribute.spaceBetweenTextAndIcon;this._circle.setAttributes({x:s,y:r}),this._text.setAttributes({x:a,y:i/2-e/2})}initAttributes(t,e){t=(null==e?void 0:e.skipDefault)?t:(0,r.Z)({},b.defaultAttributes,t),super.initAttributes(t),this.renderGroup(),this.render()}}b.defaultAttributes={interactive:!0,disabled:!1,checked:!1,cursor:"pointer",disableCursor:"not-allowed",spaceBetweenTextAndIcon:8,text:{text:"text",fontSize:14,fill:"#000",disableFill:"rgb(201,205,212)",textBaseline:"top",pickable:!1},circle:{outerRadius:7,innerRadius:3,startAngle:0,endAngle:2*Math.PI,lineWidth:1,fill:"#fff",stroke:"rgb(229,230,235)",disableFill:"rgb(242,243,245)",checkedFill:"rgb(22, 93, 255)",checkedStroke:"rgb(22, 93, 255)",disableCheckedFill:"rgb(148, 191, 255)",disableCheckedStroke:"rgb(148, 191, 255)",pickable:!1}}},47169:function(t,e,i){"use strict";i.d(e,{M:()=>s});var r=i(11511),n=i(99754);function s(){(0,r.M)(),(0,n.k)()}},88266:function(t,e,i){"use strict";i.d(e,{B:()=>m});var r=i(73036),n=i(80204),s=i(49275),a=i(20408),o=i(64776),l=i(94030),h=i(51996),u=i(64639),c=i(50322),d=i(47169),p=i(1573),f=i(75771);let g={debounce:n.Z,throttle:s.Z};(0,d.M)();class m extends c.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,a.Z)({},m.defaultAttributes,t)),this.name="scrollbar",this._handleTouchMove=t=>{(0,o.Z)(this._prePos)&&t.preventDefault()},this._onRailPointerDown=t=>{let e,{viewX:i,viewY:r}=t,{direction:n,width:s,height:a,range:o}=this.attribute,h=this._sliderSize,[u,c]=this._getScrollRange();if("vertical"===n){let t=r-this._viewPosition.y,i=(0,l.Z)(t-h/2,u,c);e=t/a,this._slider.setAttribute("y",i,!0)}else{let t=i-this._viewPosition.x,r=(0,l.Z)(t-h/2,u,c);e=t/s,this._slider.setAttribute("x",r,!0)}this.setScrollRange([e-(o[1]-o[0])/2,e+(o[1]-o[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=t=>{this._clearDragEvents();let{stopSliderDownPropagation:e=!0}=this.attribute;e&&t.stopPropagation();let{direction:i}=this.attribute,{x:n,y:s}=this.stage.eventPointTransform(t);this._prePos="horizontal"===i?n:s,this._dispatchEvent(p.m3,{pos:this._prePos,event:t});let a=(0,f.G)(),o="browser"===r.rF.env?r.rF:this.stage;o.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),a.forEach(t=>{o.addEventListener(t,this._onSliderPointerUp)})},this._computeScrollValue=t=>{let{direction:e}=this.attribute,{x:i,y:r}=this.stage.eventPointTransform(t),n,s,a=0,{width:o,height:l}=this.getSliderRenderBounds();return n="vertical"===e?((s=r)-this._prePos)/l:((s=i)-this._prePos)/o,[s,n]},this._onSliderPointerMove=t=>{let{stopSliderMovePropagation:e=!0}=this.attribute;e&&t.stopPropagation();let i=this.getScrollRange(),[r,n]=this._computeScrollValue(t);this.setScrollRange([i[0]+n,i[1]+n],!0),this._prePos=r},this._onSliderPointerMoveWithDelay=0===this.attribute.delayTime?this._onSliderPointerMove:g[this.attribute.delayType](this._onSliderPointerMove,this.attribute.delayTime),this._onSliderPointerUp=t=>{let{range:e,limitRange:i=[0,1]}=this.attribute,r=this.getScrollRange(),[n,s]=this._computeScrollValue(t),a=[r[0]+s,r[1]+s];this._prePos=null,this._dispatchEvent(p.gB,{pre:e,value:(0,h.Z)(a,i[0],i[1])}),this._clearDragEvents()}}setScrollRange(t,e=!0){let{direction:i="horizontal",limitRange:r=[0,1],range:n,realTime:s=!0}=this.attribute,a=(0,h.Z)(t,r[0],r[1]);if(e){let t=this._getSliderPos(a);if(this._slider){let e=t[1]-t[0];this._sliderSize=e,"horizontal"===i?this._slider.setAttributes({x:t[0],width:e},!0):this._slider.setAttributes({y:t[0],height:e},!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()}}this.attribute.range=a,s&&this._dispatchEvent(p.eV,{pre:n,value:a})}getScrollRange(){return this.attribute.range}bindEvents(){if(this.attribute.disableTriggerEvent)return;let{delayType:t="throttle",delayTime:e=0}=this.attribute;this._rail&&this._rail.addEventListener("pointerdown",g[t](this._onRailPointerDown,e)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown),("browser"===r.rF.env?r.rF:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1})}render(){let t;this._reset();let{direction:e="horizontal",width:i,height:r,range:n,limitRange:s=[0,1],railStyle:a,sliderStyle:o,padding:l=2}=this.attribute,c=this.createOrUpdateChild("scrollbar-container",{},"group"),d=c.createOrUpdateChild("scrollbar-rail",Object.assign({x:0,y:0,width:i,height:r},a),"rect");this._rail=d;let p=this.getSliderRenderBounds(),f=this._getSliderPos((0,h.Z)(n,s[0],s[1])),g=f[1]-f[0];this._sliderSize=g,t="horizontal"===e?{x:f[0],y:p.y1,width:g,height:p.height}:{x:p.x1,y:f[0],width:p.width,height:g};let m=c.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},t),{cornerRadius:this._getDefaultSliderCornerRadius()}),o),{boundsPadding:(0,u.o)(l),pickMode:"imprecise"}),"rect");this._slider=m,this._container=c;let y=this._container.AABBBounds;this._viewPosition={x:y.x1,y:y.y1}}getSliderRenderBounds(){if(this._sliderRenderBounds)return this._sliderRenderBounds;let{width:t,height:e,padding:i=2}=this.attribute,[r,n,s,a]=(0,u.o)(i),o={x1:a,y1:r,x2:t-n,y2:e-s,width:Math.max(0,t-(a+n)),height:Math.max(0,e-(r+s))};return this._sliderRenderBounds=o,o}_getDefaultSliderCornerRadius(){let{direction:t,round:e}=this.attribute;if(e){let{width:e,height:i}=this.getSliderRenderBounds();return"horizontal"===t?i:e}return 0}_getSliderPos(t){let{direction:e}=this.attribute,{width:i,height:r,x1:n,y1:s}=this.getSliderRenderBounds();return"horizontal"===e?[i*t[0]+n,i*t[1]+n]:[r*t[0]+s,r*t[1]+s]}_getScrollRange(){if(this._sliderLimitRange)return this._sliderLimitRange;let{limitRange:t=[0,1],direction:e}=this.attribute,[i,r]=(0,h.Z)(t,0,1),{width:n,height:s,x1:a,y1:o}=this.getSliderRenderBounds(),l=this._sliderSize;return"horizontal"===e?(0,h.Z)([a+i*n,a+r*n],a,n-l):(0,h.Z)([o+i*s,o+r*s],o,s-l)}_clearDragEvents(){let t=(0,f.G)(),e="browser"===r.rF.env?r.rF:this.stage;e.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),t.forEach(t=>{e.removeEventListener(t,this._onSliderPointerUp)})}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}release(t){super.release(t),("browser"===r.rF.env?r.rF:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}),this._clearDragEvents()}}m.defaultAttributes={direction:"horizontal",round:!0,sliderSize:20,sliderStyle:{fill:"rgba(0, 0, 0, .5)"},railStyle:{fill:"rgba(0, 0, 0, .0)"},padding:2,scrollRange:[0,1],delayType:"throttle",delayTime:0,realTime:!0}},13436:function(t,e,i){"use strict";i.d(e,{d:()=>o});var r=i(11511),n=i(24599),s=i(99754),a=i(16636);function o(){(0,r.M)(),(0,n.g)(),(0,s.k)(),(0,a.k)()}},48554:function(t,e,i){"use strict";i.d(e,{i:()=>x});var r,n,s=i(95723),a=i(20408),o=i(94030),l=i(64776),h=i(99051),u=i(54326),c=i(51996),d=i(80971),p=i(73036),f=i(66987),g=i(50322);(r=n||(n={})).innerView="innerView",r.railContainer="sliderRailContainer",r.rail="sliderRail",r.startText="sliderStartText",r.endText="sliderEndText",r.startHandler="sliderStartHandler",r.startHandlerText="startHandlerText",r.endHandler="sliderEndHandler",r.endHandlerText="sliderEndHandlerText",r.track="sliderTrack",r.trackContainer="sliderTrackContainer";var m=i(13436),y=i(75771);function v(t){return(0,s.Z)(t)?t:[t,t]}function b(t){return t?"ew-resize":"ns-resize"}(0,m.d)();class x extends g.k{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}get tooltipShape(){return this._tooltipShape}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,a.Z)({},x.defaultAttributes,t)),this.name="slider",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onTooltipShow=t=>{this._isChanging||this._tooltipState&&this._tooltipState.isActive||(this._tooltipState?this._tooltipState.isActive=!0:this._tooltipState={isActive:!0},this._onTooltipUpdate(t),this._dispatchTooltipEvent("sliderTooltipShow"))},this._onTooltipUpdate=t=>{if(this._isChanging||!this._tooltipState||!this._tooltipState.isActive)return;let e=this._isHorizontal?this._rail.globalAABBBounds.width():this._rail.globalAABBBounds.height(),i=(0,o.Z)(this._isHorizontal?(t.viewX-this._rail.globalAABBBounds.x1)/e:(t.viewY-this._rail.globalAABBBounds.y1)/e,0,1);i!==this._tooltipState.pos&&(this._tooltipState.pos=i,this._tooltipState.value=this.calculateValueByPos(i*e),this._updateTooltip(),this._dispatchTooltipEvent("sliderTooltipUpdate"))},this._onTooltipHide=()=>{let{tooltip:t}=this.attribute;t&&t.alwaysShow||(this._tooltipState=null,this._tooltipShape&&this._tooltipShape.setAttribute("visible",!1),this._tooltipText&&this._tooltipText.setAttribute("visible",!1),this._dispatchTooltipEvent("sliderTooltipHide"))},this._onHandlerPointerdown=t=>{this._clearAllDragEvents(),this._isChanging=!0;let{x:e,y:i}=this.stage.eventPointTransform(t);this._currentHandler=t.target,this._prePos=this._isHorizontal?e:i;let r=(0,y.G)(),n="browser"===p.rF.env?p.rF:this.stage;n.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),r.forEach(t=>{n.addEventListener(t,this._onHandlerPointerUp)})},this._onHandlerPointerMove=t=>{var e,i;this._isChanging=!0;let{railWidth:r,railHeight:n,min:s,max:a}=this.attribute;if(a===s)return;let{x:l,y:h}=this.stage.eventPointTransform(t),u,c,d,p=0;this._isHorizontal?(p=(u=l)-this._prePos,c=null==(i=this._currentHandler)?void 0:i.attribute.x,d=r):(p=(u=h)-this._prePos,c=null==(e=this._currentHandler)?void 0:e.attribute.y,d=n);let f=(0,o.Z)(c+p,0,d),g=this.calculateValueByPos(f);"text"===this._currentHandler.type?this._updateHandlerText(this._currentHandler,f,g):this._updateHandler(this._currentHandler,f,g),this._updateTrack(),this._prePos=u,this._dispatchChangeEvent()},this._onHandlerPointerUp=t=>{this._isChanging=!1,this._currentHandler=null,this._clearAllDragEvents()},this._handleTouchMove=t=>{this._isChanging&&t.preventDefault()},this._onTrackPointerdown=t=>{this._clearAllDragEvents(),this._isChanging=!0;let{x:e,y:i}=this.stage.eventPointTransform(t);this._prePos=this._isHorizontal?e:i;let r=(0,y.G)(),n="browser"===p.rF.env?p.rF:this.stage;n.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),r.forEach(t=>{n.addEventListener(t,this._onTrackPointerUp)})},this._onTrackPointerMove=t=>{let e,i,r;this._isChanging=!0;let{railWidth:n,railHeight:s,min:a,max:l,inverse:h}=this.attribute;if(l===a)return;let{startHandler:u,endHandler:c}=this._getHandlers(),{x:d,y:p}=this.stage.eventPointTransform(t);this._isHorizontal?(e=d,i=this._track.attribute.width,r=n):(e=p,i=this._track.attribute.height,r=s);let f=e-this._prePos;if(u){let t=this._isHorizontal?u.attribute.x:u.attribute.y,e=h?(0,o.Z)(t+f,i,r):(0,o.Z)(t+f,0,r-i),n=this.calculateValueByPos(e);this._updateHandler(u,e,n)}if(c){let t=this._isHorizontal?c.attribute.x:c.attribute.y,e=h?(0,o.Z)(t+f,0,r-i):(0,o.Z)(t+f,i,r),n=this.calculateValueByPos(e),s=null==u?void 0:u.attribute;this._updateHandler(c,e,n),this._track.setAttributes(this._isHorizontal?{x:Math.min(s.x,c.attribute.x),width:Math.abs(s.x-c.attribute.x)}:{y:Math.min(s.y,c.attribute.y),height:Math.abs(s.y-c.attribute.y)})}this._prePos=e,this._dispatchChangeEvent()},this._onTrackPointerUp=t=>{this._isChanging=!1,this._clearAllDragEvents()},this._onRailPointerDown=t=>{let e,i,r;this._clearAllDragEvents(),this._isChanging=!0;let{railWidth:n,railHeight:s,min:a,max:o}=this.attribute;if(o===a)return;let h=this._startHandler,u=this._endHandler;this._isHorizontal?(e=t.viewX-this._rail.globalAABBBounds.x1,i=null==h?void 0:h.attribute.x,r=null==u?void 0:u.attribute.x):(e=t.viewY-this._rail.globalAABBBounds.y1,i=null==h?void 0:h.attribute.y,r=null==u?void 0:u.attribute.y);let c=this.calculateValueByPos(e);if((0,l.Z)(r)){let t=Math.abs(e-i)>Math.abs(e-r)?u:h;this._updateHandler(t,e,c)}else this._updateHandler(h,e,c);this._updateTrack(),this._dispatchChangeEvent()}}calculatePosByValue(t,e){let{layout:i,railWidth:r,railHeight:n,min:s,max:a,inverse:o}=this.attribute,l=0;return l=s===a?"start"===e?0:+("end"===e):(t-s)/(a-s),(o?1-l:l)*("vertical"===i?n:r)}calculateValueByPos(t){let{layout:e,railWidth:i,railHeight:r,min:n,max:s,inverse:a}=this.attribute,o="vertical"===e?r:i;return n+(s-n)*(a?1-t/o:t/o)}setValue(t){let{min:e,max:i}=this.attribute;if(i===e)return;let[r,n]=(0,h.IX)(t),{startHandler:s,endHandler:a}=this._getHandlers();s&&this._updateHandler(s,this.calculatePosByValue(r),r),a&&this._updateHandler(a,this.calculatePosByValue(n),n),this._updateTrack()}render(){var t,e;let i;this.removeAllChild(!0);let{layout:r="horizontal",railWidth:s,railHeight:a,startText:o,endText:h,min:c,max:d,showHandler:p=!0,showTooltip:g}=this.attribute,{value:m}=this.attribute;(0,u.Z)(m)&&(m=[c,d]),this._currentValue={startValue:v(m)[0],endValue:v(m)[1]};let y="horizontal"===r;this._isHorizontal=y;let b=f.i.group({x:0,y:0});b.name=n.innerView,this.add(b),this._innerView=b;let x,_=0;if(o&&o.visible){(x=f.i.text(Object.assign({x:y?0:s/2,y:y?a/2:0,textAlign:y?"start":"center",textBaseline:y?"middle":"top",text:o.text,lineHeight:null==(t=o.style)?void 0:t.fontSize},o.style))).name=n.startText,b.add(x);let e=(0,l.Z)(o.space)?o.space:0;_+=(y?x.AABBBounds.width():x.AABBBounds.height())+e}let w=f.i.group({x:y?_:0,y:y?0:_});b.add(w);let S=f.i.group({x:0,y:0});if(S.name=n.railContainer,this._railContainer=S,w.add(S),this._mainContainer=w,this._renderRail(S),_+=y?s:a,h&&h.visible){let t=(0,l.Z)(h.space)?h.space:0;(i=f.i.text(Object.assign({x:y?_+t:s/2,y:y?a/2:_+t,textAlign:y?"start":"center",textBaseline:y?"middle":"top",text:h.text,lineHeight:null==(e=h.style)?void 0:e.fontSize},h.style))).name=n.endText,b.add(i)}this._renderTrack(S),p&&(this._renderHandlers(w),this._bindEvents()),g&&(this._renderTooltip(),this._bindTooltipEvents())}_renderRail(t){let{railWidth:e,railHeight:i,railStyle:r,slidable:s}=this.attribute,a="default";!1!==s&&(a="pointer");let o=f.i.rect(Object.assign({x:0,y:0,width:e,height:i,cursor:a},r));return o.name=n.rail,t.add(o),this._rail=o,o}_renderHandlers(t){let{range:e,min:i,max:r,handlerSize:s=14,handlerStyle:a,handlerText:o,railHeight:l,railWidth:h,slidable:c}=this.attribute,{value:d}=this.attribute;(0,u.Z)(d)&&(d=[i,r]);let p=o&&o.visible,f=this._isHorizontal,[g,m]=v(d),y=this.calculatePosByValue(g,e?"start":"end"),x=this._renderHandler(Object.assign({x:f?y:h/2,y:f?l/2:y,size:s,strokeBoundsBuffer:0,cursor:!1===c?"default":b(f)},a));if(x.name=n.startHandler,this._startHandler=x,t.add(x),this._currentValue.startPos=y,p){let i=this._renderHandlerText(g,e?"start":"end");i.name=n.startHandlerText,t.add(i),this._startHandlerText=i}if(e){let e=this.calculatePosByValue(m,"end"),i=this._renderHandler(Object.assign({x:f?e:h/2,y:f?l/2:e,size:s,strokeBoundsBuffer:0,cursor:!1===c?"default":b(f)},a));if(i.name=n.endHandler,this._endHandler=i,t.add(i),this._currentValue.endPos=e,p){let e=this._renderHandlerText(m,"end");e.name=n.endHandlerText,t.add(e),this._endHandlerText=e}}}_renderTrack(t){let e,i,r,{range:s,min:a,max:l,railHeight:h,railWidth:p,trackStyle:g,railStyle:m,slidable:y,value:v}=this.attribute;if((0,u.Z)(v))s?(e=a,i=l):e=i=a;else if(s){let t=(0,c.Z)(v,a,l);e=t[0],i=t[1]}else e=a,i=(0,o.Z)(v,a,l);let x=this._isHorizontal;s||(e=a);let _=f.i.group({x:0,y:0,width:p,height:h,cornerRadius:null==m?void 0:m.cornerRadius,clip:!0,pickable:!1});_.name=n.trackContainer;let w=(0,d.Z)(s)&&!0===s.draggableTrack;r=!1===y?"default":!1===s||!1===w?"pointer":b(x);let S=this.calculatePosByValue(e,"start"),A=this.calculatePosByValue(i,s?"end":"start"),C=f.i.rect(Object.assign({x:x?Math.min(S,A):0,y:x?0:Math.min(S,A),width:x?Math.abs(A-S):p,height:x?h:Math.abs(A-S),cursor:r},g));C.name=n.track,this._track=C,_.add(C),t.add(_)}_renderHandler(t){return f.i.symbol(t)}_renderHandlerText(t,e){var i,r,n;let{align:s,handlerSize:a=14,handlerText:o={},railHeight:l,railWidth:h,slidable:u}=this.attribute,c=this._isHorizontal,d=this.calculatePosByValue(t,e),p=null!=(i=o.space)?i:4,g={text:o.formatter?o.formatter(t):t.toFixed(null!=(r=o.precision)?r:0),lineHeight:null==(n=o.style)?void 0:n.lineHeight,cursor:!1===u?"default":b(c)};return c?"top"===s?(g.textBaseline="bottom",g.textAlign="center",g.x=d,g.y=(l-a)/2-p):(g.textBaseline="top",g.textAlign="center",g.x=d,g.y=(l+a)/2+p):("left"===s?(g.textBaseline="middle",g.textAlign="end",g.x=(h-a)/2-p):(g.textBaseline="middle",g.textAlign="start",g.x=(h+a)/2+p),g.y=d),f.i.text(Object.assign(Object.assign({},g),o.style))}_renderTooltip(){var t;let{tooltip:e,railHeight:i,railWidth:r,align:n}=this.attribute;e&&e.alwaysShow?this._tooltipState={value:this._currentValue.startValue,pos:this._currentValue.startPos}:this._tooltipState=null;let s=this._isHorizontal?0:r/2,a=this._isHorizontal?i/2:0;if(e&&e.shape){let t=f.i.symbol(Object.assign({pickable:!1,visible:!!this._tooltipState,x:s,y:a,symbolType:"circle"},e.shapeStyle));this._tooltipShape=t,this._mainContainer.add(t)}let o=e&&e.text||{},l=null!=(t=o.space)?t:6,h={pickable:!1,visible:!!this._tooltipState,text:""};this._isHorizontal?(h.x=s,h.y="top"===n?a-i/2-l:a+i/2+l,h.textAlign="center",h.textBaseline="top"===n?"bottom":"top"):(h.y=a,h.x="left"===n?s-r/2-l:a+r/2+l,h.textAlign="left"===n?"end":"start",h.textBaseline="middle");let u=f.i.text(Object.assign(Object.assign({},h),o.style));this._mainContainer.add(u),this._tooltipText=u,this._tooltipState&&this._updateTooltip()}_updateTooltip(){var t,e;if(!this._tooltipShape&&!this._tooltipText||!this._tooltipState)return;let{railWidth:i,railHeight:r}=this.attribute,n=this._isHorizontal?i:r,s=this._tooltipState.pos*n,a=this._isHorizontal?"x":"y";this._tooltipShape&&this._tooltipShape.setAttributes({visible:!0,[a]:s});let{align:o}=this.attribute;if(this._tooltipText){let i=this.attribute.tooltip&&this.attribute.tooltip.text||{};this._tooltipText.setAttributes({visible:!0,[a]:s,text:i.formatter?i.formatter(this._tooltipState.value):this._isHorizontal||"left"!==o?`≈ ${this._tooltipState.value.toFixed(null!=(e=i.precision)?e:0)}`:`${this._tooltipState.value.toFixed(null!=(t=i.precision)?t:0)} ≈`})}}_bindEvents(){if(this.attribute.disableTriggerEvent)return;let{slidable:t,range:e}=this.attribute;t&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),(0,d.Z)(e)&&e.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown),("browser"===p.rF.env?p.rF:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}))}_bindTooltipEvents(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener("pointerenter",this._onTooltipShow),this._mainContainer.addEventListener("pointermove",this._onTooltipUpdate),this._mainContainer.addEventListener("pointerleave",this._onTooltipHide))}_clearAllDragEvents(){let t=(0,y.G)(),e="browser"===p.rF.env?p.rF:this.stage;e.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),t.forEach(t=>{e.removeEventListener(t,this._onHandlerPointerUp)}),e.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),t.forEach(t=>{e.removeEventListener(t,this._onTrackPointerUp)})}_updateTrack(){let{inverse:t,railWidth:e,railHeight:i}=this.attribute,r=this._startHandler,n=this._endHandler;if(this._isHorizontal){let i=null==r?void 0:r.attribute.x;if(n){let t=null==n?void 0:n.attribute.x;this._track.setAttributes({x:Math.min(i,t),width:Math.abs(i-t)})}else t?this._track.setAttributes({x:i,width:e-i}):this._track.setAttributes({width:i})}else{let e=null==r?void 0:r.attribute.y;if(n){let t=null==n?void 0:n.attribute.y;this._track.setAttributes({y:Math.min(e,t),height:Math.abs(e-t)})}else t?this._track.setAttributes({y:e,height:i-e}):this._track.setAttributes({height:e})}}_updateHandler(t,e,i){var r;let s=this._isHorizontal;t.setAttribute(s?"x":"y",e);let a=t.name===n.startHandler?this._startHandlerText:this._endHandlerText;if(a){let{handlerText:t={}}=this.attribute;a.setAttributes({text:t.formatter?t.formatter(i):i.toFixed(null!=(r=t.precision)?r:0),[s?"x":"y"]:e})}t.name===n.startHandler?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_updateHandlerText(t,e,i){var r;let s=this._isHorizontal,{handlerText:a={}}=this.attribute;t.setAttributes({[s?"x":"y"]:e,text:a.formatter?a.formatter(i):i.toFixed(null!=(r=a.precision)?r:0)});let o=t.name===n.startHandlerText?this._startHandler:this._endHandler;o&&o.setAttributes({[s?"x":"y"]:e}),t.name===n.startHandlerText?(this._currentValue.startValue=i,this._currentValue.startPos=e):(this._currentValue.endValue=i,this._currentValue.endPos=e)}_dispatchChangeEvent(){let t=!!this.attribute.range,e=this._currentValue;this._dispatchEvent("change",{value:t?[Math.min(e.endValue,e.startValue),Math.max(e.endValue,e.startValue)]:e.startValue,position:t?[Math.min(e.endPos,e.startPos),Math.max(e.endPos,e.startPos)]:e.startPos})}_dispatchTooltipEvent(t){this._dispatchEvent("sliderTooltip",{type:t,position:this._tooltipState&&this._tooltipState.pos,value:this._tooltipState&&this._tooltipState.value})}_getHandlers(){let{inverse:t}=this.attribute,e=this._startHandler,i=this._endHandler;return i&&(this._isHorizontal?(!t&&i.attribute.x<(null==e?void 0:e.attribute.x)||t&&i.attribute.x>(null==e?void 0:e.attribute.x))&&([e,i]=[i,e]):(!t&&i.attribute.y<(null==e?void 0:e.attribute.y)||t&&i.attribute.y>(null==e?void 0:e.attribute.y))&&([e,i]=[i,e])),{startHandler:e,endHandler:i}}release(t){super.release(t),("browser"===p.rF.env?p.rF:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}),this._clearAllDragEvents()}}x.defaultAttributes={slidable:!0,layout:"horizontal",align:"bottom",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},tooltip:{shapeStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},text:{style:{fill:"#2C3542",fontSize:12}}},railStyle:{fill:"rgba(0,0,0,.04)"},trackStyle:{fill:"#91caff"},showValue:!0,valueStyle:{fill:"#2C3542",fontSize:12},startText:{style:{fill:"#2C3542",fontSize:12}},endText:{style:{fill:"#2C3542",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:"#2C3542",fontSize:12}}}},23162:function(t,e,i){"use strict";i.d(e,{r:()=>p});var r=i(20408),n=i(50322),s=i(22288),a=i(24217),o=i(63654),l=i(11511),h=i(99754),u=i(24599),c=i(76401),d=i(26152);(0,l.M)(),(0,h.k)(),(0,u.g)(),(0,c.f)();class p extends n.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},p.defaultAttributes,t)),this._handlePointerUp=()=>{this.attribute.disabled||(this.attribute.checked?this.setAttribute("checked",!1):this.setAttribute("checked",!0),this._dispatchEvent("switch_state_change",{eventType:"switch_state_change",checked:this.attribute.checked}),this.stage.renderNextFrame())},this.renderGroup(),this.onBeforeAttributeUpdate=(t,e,i)=>{"interactive"in t&&this.setAttribute("pickable",t.interactive),"disabled"in t&&this.setAttribute("cursor",t.disable?this.attribute.disableCursor:this.attribute.cursor)},this.addEventListener("pointerup",this._handlePointerUp)}render(){this.removeAllChild(!0),this.renderBox(),this.renderCircle(),this.renderText(),this.layout()}renderBox(){this._box=new s.U((0,r.Z)({},this.attribute.box)),this.attribute.disabled&&this.attribute.checked?this._box.setAttributes({fill:this.attribute.box.disableCheckedFill}):this.attribute.disabled&&!this.attribute.checked?this._box.setAttributes({fill:this.attribute.box.disableUncheckedFill}):this.attribute.checked?this._box.setAttributes({fill:this.attribute.box.checkedFill}):this._box.setAttributes({fill:this.attribute.box.uncheckedFill}),this.appendChild(this._box)}renderCircle(){this._circle=new a.C((0,r.Z)({},this.attribute.circle)),this.appendChild(this._circle)}renderText(){var t,e,i;this._text=new o.x((0,r.Z)({},null!=(t=this.attribute.text)?t:{})),this.attribute.checked&&(null==(e=this.attribute.text)?void 0:e.checkedText)?this._text.setAttributes({text:this.attribute.text.checkedText}):(null==(i=this.attribute.text)?void 0:i.uncheckedText)&&this._text.setAttributes({text:this.attribute.text.uncheckedText}),this.appendChild(this._text)}renderGroup(){this.attribute.interactive||this.setAttribute("pickable",!1),this.attribute.disabled&&this.setAttribute("cursor",this.attribute.disableCursor)}layout(){var t,e,i,r,n,s,a,o,l,h;let u=this.attribute.spaceBetweenTextAndCircle,c=this.attribute.circle.radius,p=this.attribute.box.height,f=2*c,g=this._text.AABBBounds.height(),m=Math.max(p,f,g),y=this.attribute.box.width,v=2*c,b=(0,d.fe)((null!=(i=null==(e=null==(t=this.attribute.text)?void 0:t.checkedText)?void 0:e.length)?i:0)>(null!=(s=null==(n=null==(r=this.attribute.text)?void 0:r.uncheckedText)?void 0:n.length)?s:0)?null!=(o=null==(a=this.attribute.text)?void 0:a.checkedText)?o:"":null!=(h=null==(l=this.attribute.text)?void 0:l.uncheckedText)?h:"",this._text.attribute).width,x=Math.max(y,v+b+3*u),_=p/2-v/2+c,w=_+c+u;this._box.setAttributes({width:x,height:m}),this._circle.setAttributes({y:m/2-f/2+c,x:this.attribute.checked?x-_:_}),this._text.setAttributes({x:this.attribute.checked?x-w-b:w,y:m/2-g/2})}initAttributes(t,e){t=(null==e?void 0:e.skipDefault)?t:(0,r.Z)({},p.defaultAttributes,t),super.initAttributes(t),this.renderGroup(),this.render()}}p.defaultAttributes={interactive:!0,disabled:!1,checked:!1,cursor:"pointer",disableCursor:"not-allowed",circle:{radius:8,fill:"#FFF",pickable:!1},box:{width:40,height:24,cornerRadius:12,uncheckedFill:"rgb(201,205,212)",checkedFill:"#165DFF",disableUncheckedFill:"rgb(242,243,245)",disableCheckedFill:"rgb(148,191,255)",pickable:!1},text:{textAlign:"left",textBaseline:"top",pickable:!1},spaceBetweenTextAndCircle:6}},30381:function(t,e,i){"use strict";i.d(e,{b:()=>l});var r=i(11511),n=i(99754),s=i(16636),a=i(74512),o=i(24599);function l(){(0,r.M)(),(0,n.k)(),(0,s.k)(),(0,a.v)(),(0,o.g)()}},59417:function(t,e,i){"use strict";i.d(e,{V:()=>y});var r=i(78085),n=i(20408),s=i(64639),a=i(63778),o=i(4654),l=i(44843),h=i(64776),u=i(54326),c=i(80971),d=i(99051),p=i(50322),f=i(26152),g=i(30381),m=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&0>e.indexOf(r)&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)0>e.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i};(0,g.b)();class y extends p.k{getBgRect(){return this._bgRect}getTextShape(){return this._textShape}constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,n.Z)({},y.defaultAttributes,t)),this.name="tag",this._tagStates=[],this._rectStates=[],this._symbolStates=[],this._textStates=[]}render(){var t,e,i;let n,p,g;this.cacheStates();let{text:y="",textStyle:v={},shape:b={},panel:x={},space:_=4,minWidth:w,maxWidth:S,padding:A=4,visible:C,state:D,type:T,textAlwaysCenter:B,containerTextAlign:M}=this.attribute,E=(0,s.o)(A),k=this.createOrUpdateChild("tag-content",{x:0,y:0,zIndex:1},"group"),F,R=-E[3],P=-E[0],O=E[1]+E[3],L=E[0]+E[2],I=0,z=0,{visible:Z}=b,j=m(b,["visible"]);if((0,a.Z)(Z)){let t=(null==j?void 0:j.size)||10,e=(0,o.Z)(t)?t:Math.max(t[0],t[1]);F=k.createOrUpdateChild("tag-shape",Object.assign(Object.assign({symbolType:"circle",size:t,strokeBoundsBuffer:0},j),{visible:Z,x:e/2,y:e/2}),"symbol"),(0,l.Z)(null==D?void 0:D.shape)||(F.states=D.shape),Z&&(z=e+_)}if(O+=z,I+=z,(0,f.TV)({text:y})||"rich"===T){let t=Object.assign(Object.assign(Object.assign({},(0,f.ut)(Object.assign({type:T,text:y},v))),v),{visible:(0,h.Z)(y)&&!1!==C,x:I,y:0});(0,u.Z)(t.lineHeight)&&(t.lineHeight=v.fontSize),p=(n=k.createOrUpdateChild("tag-text",t,"richtext")).AABBBounds.width(),g=n.AABBBounds.height()}else{let i=Object.assign(Object.assign({text:(0,c.Z)(y)&&"type"in y&&"text"===y.type?y.text:y,visible:(0,h.Z)(y)&&!1!==C,lineHeight:null==v?void 0:v.fontSize},v),{x:I,y:0});(0,u.Z)(i.lineHeight)&&(i.lineHeight=v.fontSize),n=k.createOrUpdateChild("tag-text",i,"text");let r=(0,f.fe)(i.text,v,null==(e=null==(t=this.stage)?void 0:t.getTheme())?void 0:e.text);p=r.width,g=r.height}O+=p;let W=null!=(i=b.size)?i:10,U=(0,o.Z)(W)?W:Math.max(W[0],W[1]);L+=Math.max(g,b.visible?U:0);let{textAlign:N,textBaseline:H}=v;((0,h.Z)(w)||(0,h.Z)(S))&&((0,h.Z)(w)&&O<w&&(O=w),(0,h.Z)(S)&&O>S&&(O=S,n.setAttribute("maxLineWidth",S-E[1]-E[2]))),R=0,P=0;let G=0;"left"===N||"start"===N?G=1:"right"===N||"end"===N?G=-1:"center"===N&&(G=0),G?G<0?(R-=O,F&&F.setAttribute("x",(F.attribute.x||0)-p),k.setAttribute("x",-E[1]-z)):G>0&&k.setAttribute("x",E[3]):(R-=O/2,F&&F.setAttribute("x",(F.attribute.x||0)-p/2),k.setAttribute("x",-z/2));let V=(t,e)=>{"richtext"===n.type?n.setAttributes({x:t,textAlign:e,textConfig:(0,d.IX)(n.attribute.textConfig).map(t=>Object.assign(Object.assign({},t),{textAlign:e}))}):n.setAttributes({x:t,textAlign:e})};if((M?"center"===M:B)&&G){let t=O-E[1]-E[3],e=p+z,i=1===G?(t-e)/2+z+p/2:E[0]+z-(O/2+e/2-z)+p/2;if(V(i,"center"),F){let t=i-p/2-z+U/2;F.setAttributes({x:t})}}if(("left"===M||"start"===M)&&1!==G){let t=O-E[1]-E[3],e=0===G?-t/2+z/2:-O+E[3]+E[1]+z;V(e+z,"left"),F&&F.setAttributes({x:e+U/2})}if(("right"===M||"end"===M)&&-1!==G){let t=O-E[1]-E[3],e=0===G?t/2+z/2:t;if(V(e,"right"),F){let t=e-p-z+U/2;F.setAttributes({x:t})}}"middle"===H?(P-=L/2,F&&F.setAttribute("y",0)):"bottom"===H?(P-=L,F&&F.setAttribute("y",-g/2),k.setAttribute("y",-E[2])):"top"===H&&(k.setAttribute("y",E[0]),F&&F.setAttribute("y",g/2)),(0,l.Z)(null==D?void 0:D.text)||(n.states=D.text);let{visible:X}=x,Y=m(x,["visible"]);if(C&&(0,a.Z)(X)){let t=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},Y),{visible:X&&!!y,width:O,height:L,x:R,y:P}),"rect");if((0,l.Z)(null==D?void 0:D.panel)||(t.states=D.panel),Y.customShape){let e=Y.customShape;t.pathProxy=t=>e(this,t,new r.r)}this._bgRect=t}this._textShape=n,this._symbol=F,this.resetStates()}initAttributes(t,e){t=(null==e?void 0:e.skipDefault)?t:(0,n.Z)({},y.defaultAttributes,t),super.initAttributes(t),this.render()}addState(t,e,i){super.addState(t,e,i),this._textShape&&this._textShape.addState(t,e,i),this._bgRect&&this._bgRect.addState(t,e,i),this._symbol&&this._symbol.addState(t,e,i)}removeState(t,e){super.removeState(t,e),this._textShape&&this._textShape.removeState(t,e),this._bgRect&&this._bgRect.removeState(t,e),this._symbol&&this._symbol.removeState(t,e)}cacheStates(){var t,e,i,r,n,s,a,o,l,h,u,c,d,p;this._tagStates=null!=(e=null==(t=this.currentStates)?void 0:t.slice())?e:[],this._rectStates=null!=(n=null==(r=null==(i=this._bgRect)?void 0:i.currentStates)?void 0:r.slice())?n:[],this._symbolStates=null!=(o=null==(a=null==(s=this._symbol)?void 0:s.currentStates)?void 0:a.slice())?o:[],this._textStates=null!=(u=null==(h=null==(l=this._textShape)?void 0:l.currentStates)?void 0:h.slice())?u:[],this.clearStates(),null==(c=this._bgRect)||c.clearStates(),null==(d=this._symbol)||d.clearStates(),null==(p=this._textShape)||p.clearStates()}resetStates(){var t,e,i;this._tagStates.length&&this.useStates(this._tagStates),this._rectStates.length&&(null==(t=this._bgRect)||t.useStates(this._rectStates)),this._symbolStates.length&&(null==(e=this._symbol)||e.useStates(this._symbolStates)),this._textStates.length&&(null==(i=this._textShape)||i.useStates(this._textStates))}}y.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},space:4,padding:4,shape:{fill:"#000"}}},88919:function(t,e,i){"use strict";i.d(e,{D:()=>d});var r=i(20408),n=i(64639),s=i(64776),a=i(95723),o=i(50322),l=i(1573),h=i(11511),u=i(24599),c=i(74512);(0,h.M)(),(0,u.g)(),(0,c.v)();class d extends o.k{constructor(t,e){super((null==e?void 0:e.skipDefault)?t:(0,r.Z)({},d.defaultAttributes,t)),this.name="title"}render(){var t,e,i,r,o,h,u,c,d,p,f,g,m,y,v,b,x,_,w,S;let{textType:A,text:C,subtextType:D,textStyle:T={},subtext:B,subtextStyle:M={},width:E,height:k,minWidth:F,maxWidth:R,minHeight:P,maxHeight:O,align:L,verticalAlign:I,padding:z=0}=this.attribute,Z=(0,n.o)(z),j=this.createOrUpdateChild("title-container",{x:Z[3],y:Z[0],zIndex:1},"group"),W=null!=(t=T.height)?t:k;if(!1!==this.attribute.visible&&!1!==T.visible){let{width:t,maxHeight:n,maxWidth:c,x:d=0,y:p=0,ellipsis:f=!0,wordBreak:g="break-word",maxWidth:m,lineClamp:y}=T;if("rich"===A||(0,s.Z)(T.character)){let r=Object.assign({x:d,y:p,width:null!=(e=null!=t?t:E)?e:0,height:null!=W?W:0,ellipsis:null==f||f,wordBreak:null!=g?g:"break-word",maxHeight:null!=n?n:O,maxWidth:null!=c?c:m,textConfig:null!=(i=T.character)?i:C},T);this._mainTitle=j.createOrUpdateChild("mainTitle",r,"richtext")}else if("html"===A){let e=Object.assign({html:Object.assign(Object.assign({dom:C},l.Ze),T),x:d,y:p,width:null!=(r=null!=t?t:E)?r:0,height:null!=W?W:0,ellipsis:f,wordBreak:g,maxHeight:null!=n?n:O,maxWidth:null!=c?c:m,textConfig:[]},T);this._mainTitle=j.createOrUpdateChild("mainTitle",e,"richtext")}else(0,s.Z)(C)&&(this._mainTitle=j.createOrUpdateChild("mainTitle",Object.assign(Object.assign({text:(0,a.Z)(C)?C:[C],whiteSpace:"normal"},T),{maxLineWidth:null!=(h=null!=(o=T.maxLineWidth)?o:t)?h:E,heightLimit:null!=(u=T.height)?u:O,lineClamp:y,ellipsis:f,x:d,y:p}),"text"))}let U=this._mainTitle?this._mainTitle.AABBBounds.height():0,N=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(!1!==this.attribute.visible&&!1!==M.visible){let{width:t,height:e,maxWidth:i,maxHeight:r,x:n=0,y:o=0,ellipsis:h=!0,wordBreak:u="break-word",lineClamp:v}=M,b=Math.max(Number.MIN_VALUE,O-U);if("rich"===D||(0,s.Z)(M.character)){let s=Object.assign({x:n,y:o,width:null!=(c=null!=t?t:E)?c:0,height:null!=(d=null!=e?e:k)?d:0,ellipsis:h,wordBreak:u,maxHeight:null!=r?r:b,maxWidth:null!=i?i:R,textConfig:null!=(p=M.character)?p:B},M);this._subTitle=j.createOrUpdateChild("subTitle",s,"richtext")}else if("html"===D){let s=Object.assign({html:Object.assign(Object.assign({dom:B},l.Ze),M),x:n,y:o,width:null!=(f=null!=t?t:E)?f:0,height:null!=(g=null!=e?e:k)?g:0,ellipsis:h,wordBreak:u,maxHeight:null!=r?r:b,maxWidth:null!=i?i:R,textConfig:[]},M);this._subTitle=j.createOrUpdateChild("subTitle",s,"richtext")}else(0,s.Z)(B)&&(this._subTitle=j.createOrUpdateChild("subTitle",Object.assign(Object.assign({text:(0,a.Z)(B)?B:[B],whiteSpace:"normal"},M),{maxLineWidth:null!=(m=M.maxLineWidth)?m:E,heightLimit:null!=(y=M.heightLimit)?y:b,lineClamp:v,ellipsis:h,x:0,y:U}),"text"))}let H=this._subTitle?this._subTitle.AABBBounds.height():0,G=Math.max(N,this._subTitle?this._subTitle.AABBBounds.width():0),V=U+(null!=(v=M.height)?v:H);if((0,s.Z)(E)&&(G=E),(0,s.Z)(k)&&(V=k),(0,s.Z)(F)&&G<F&&(G=F),(0,s.Z)(R)&&G>R&&(G=R),(0,s.Z)(P)&&V<P&&(V=P),(0,s.Z)(O)&&V>O&&(V=O),j.attribute.width=G,j.attribute.height=V,j.attribute.boundsPadding=Z,this._mainTitle){if((0,s.Z)(L)||(0,s.Z)(T.align)){let t=T.align?T.align:L,e=null!=(b=T.width)?b:G;"center"===t?(this._mainTitle.setAttribute("x",e/2),this._mainTitle.setAttribute("textAlign","center")):"right"===t?(this._mainTitle.setAttribute("x",e),this._mainTitle.setAttribute("textAlign","right")):(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left"))}let t=T.verticalAlign?T.verticalAlign:I,e=null!=W?W:this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height();"middle"===t?(this._mainTitle.setAttribute("y",e/2),this._mainTitle.setAttribute("textBaseline","middle")):"bottom"===t?(this._mainTitle.setAttribute("y",e),this._mainTitle.setAttribute("textBaseline","bottom")):(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top"))}if(this._subTitle){if((0,s.Z)(L)||(0,s.Z)(M.align)){let t=M.align?M.align:L,e=null!=(_=null!=(x=M.width)?x:T.width)?_:G;"center"===t?(this._subTitle.setAttribute("x",e/2),this._subTitle.setAttribute("textAlign","center")):"right"===t?(this._subTitle.setAttribute("x",e),this._subTitle.setAttribute("textAlign","right")):(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left"))}let t=M.verticalAlign?M.verticalAlign:I,e=this._mainTitle?(0,s.Z)(W)?this._mainTitle.AABBBounds.y1+Math.max(this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height(),W):this._mainTitle.AABBBounds.y2:0,i=null!=(S=null!=(w=M.height)?w:k)?S:this._subTitle.AABBBounds.empty()?0:this._subTitle.AABBBounds.height();"middle"===t?(this._subTitle.setAttribute("y",e+i/2),this._subTitle.setAttribute("textBaseline","middle")):"bottom"===t?(this._subTitle.setAttribute("y",e+i),this._subTitle.setAttribute("textBaseline","bottom")):(this._subTitle.setAttribute("y",e),this._subTitle.setAttribute("textBaseline","top"))}}}d.defaultAttributes={textStyle:{ellipsis:"...",fill:"#333",fontSize:20,fontWeight:"bold",textAlign:"left",textBaseline:"top"},subtextStyle:{ellipsis:"...",fill:"#6F6F6F",fontSize:16,fontWeight:"normal",textAlign:"left",textBaseline:"top"}}},56431:function(t,e,i){"use strict";i.d(e,{Ck:()=>function t(e,i){e.forEachChildren(e=>{let r=i(e);e.isContainer&&!r&&t(e,i)})}})},75771:function(t,e,i){"use strict";i.d(e,{G:()=>n});var r=i(73036);function n(){return"browser"===r.rF.env?["pointerup","pointerleave","pointercancel"]:["pointerup","pointerleave","pointerupoutside"]}},80494:function(t,e,i){"use strict";i.d(e,{Dg:()=>o,Fv:()=>a,bA:()=>n,kE:()=>s});var r=i(8830);function n(t,e){return[t[0]*e,t[1]*e]}function s(t){let[e,i]=t;return Math.sqrt(e*e+i*i)}function a(t){let e=s(t);return e>0&&(e=1/e),[t[0]*e,t[1]*e]}function o(t,e,i){let n=function(t,e){let[i,r]=t,[n,s]=e,a=Math.sqrt((i*i+r*r)*(n*n+s*s));return Math.acos(Math.min(Math.max(a&&(i*n+r*s)/a,-1),1))}(t,e),s=(0,r.ir)(t,e)>=0;return i?s?2*Math.PI-n:n:s?n:2*Math.PI-n}},26152:function(t,e,i){"use strict";i.d(e,{TV:()=>c,fe:()=>u,gM:()=>h,ut:()=>p,vS:()=>f});var r=i(68130),n=i(66987),s=i(64449),a=i(80971),o=i(64776),l=i(1573);let h=(t,e,i,n)=>new s.e(Object.assign({defaultFontParams:Object.assign({fontFamily:l.iR,fontSize:l.$M},n),getTextBounds:i?void 0:r.o,specialCharSet:"-/: .,@%'\"~"+s.e.ALPHABET_CHAR_SET+s.e.ALPHABET_CHAR_SET.toUpperCase()},null!=e?e:{}),t);function u(t,e,i={}){if(!t)return{width:0,height:0};let n=(0,r.o)({text:t,fontFamily:e.fontFamily||i.fontFamily||l.iR,fontSize:e.fontSize||i.fontSize||12,fontWeight:e.fontWeight||i.fontWeight,textAlign:e.textAlign||"center",textBaseline:e.textBaseline,ellipsis:!!e.ellipsis,maxLineWidth:e.maxLineWidth||1/0,lineHeight:e.fontSize||i.fontSize||12});return{width:n.width(),height:n.height()}}function c(t,e="type"){return"rich"===d(t,e)}function d(t,e="type"){var i,r;return(0,a.Z)(t.text)&&"type"in t.text?null!=(i=t.text.type)?i:"text":e in t&&null!=(r=t[e])?r:"text"}function p(t){var e,i;return(0,o.Z)(t.maxLineWidth)&&(t.maxWidth=t.maxLineWidth,delete t.maxLineWidth),t.width=null!=(e=t.width)?e:0,t.height=null!=(i=t.height)?i:0,t.textConfig=t.text.text||t.text,t}function f(t,e="type"){let i=d(t,e);return"rich"===i?n.i.richtext(p(t)):("html"===i?t=function(t){let{text:e,_originText:i}=t,{text:r}=e;return t.html=r,t.text=i,t.renderable=!1,t}(t):"react"===i&&(t=function(t){let{text:e,_originText:i}=t,{text:r}=e;return t.react=r,t.text=i,t.renderable=!1,t}(t)),n.i.text(t))}},65242:function(t,e,i){"use strict";i.d(e,{et:()=>n});var r=i(63401);Symbol.for("BoundsAllocate");let n=new class{constructor(){this.pools=[];for(let t=0;t<10;t++)this.pools.push(new r.FB)}allocate(t,e,i,n){if(!this.pools.length)return(new r.FB).setValue(t,e,i,n);let s=this.pools.pop();return s.x1=t,s.y1=e,s.x2=i,s.y2=n,s}allocateByObj(t){if(!this.pools.length)return new r.FB(t);let e=this.pools.pop();return e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}},32207:function(t,e,i){"use strict";i.d(e,{A:()=>s});var r=i(92631),n=i(42761);let s=new class{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(t){if(!this.pools.length){let e=(0,n.JN)(Object.assign({nativeCanvas:r.w.global.createCanvas(t)},t));return this.allocatedCanvas.push(e),e}let e=this.pools.pop();return e.resize(t.width,t.height),e.dpr=t.dpr,e}allocateByObj(t){if(!this.pools.length){let e={width:t.width/t.dpr,height:t.height/t.dpr,dpr:t.dpr},i=(0,n.JN)(Object.assign({nativeCanvas:r.w.global.createCanvas(e)},e));return this.allocatedCanvas.push(i),i}let e=this.pools.pop();return e.width=t.width,e.height=t.height,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}},80358:function(t,e,i){"use strict";i.d(e,{QE:()=>o,yp:()=>l});var r=i(69182),n=i(41712);function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Symbol.for("MatrixAllocate"),Symbol.for("Mat4Allocate");class a{constructor(){this.pools=[]}static identity(t){return(0,n.TL)(t)}allocate(){if(!this.pools.length)return s();let t=this.pools.pop();return a.identity(t),t}allocateByObj(t){let e;e=this.pools.length?this.pools.pop():s();for(let i=0;i<e.length;i++)e[i]=t[i];return e}free(t){t&&this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}}let o=new class{constructor(){this.pools=[]}allocate(t,e,i,n,s,a){if(!this.pools.length)return new r.y(t,e,i,n,s,a);let o=this.pools.pop();return o.a=t,o.b=e,o.c=i,o.d=n,o.e=s,o.f=a,o}allocateByObj(t){if(!this.pools.length)return new r.y(t.a,t.b,t.c,t.d,t.e,t.f);let e=this.pools.pop();return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f,e}free(t){this.pools.push(t)}get length(){return this.pools.length}release(...t){this.pools=[]}},l=new a},92631:function(t,e,i){"use strict";i.d(e,{w:()=>s});var r=i(34505),n=i(22649);let s=new class{get renderService(){return this._renderService||(this._renderService=r.n.get(n.p)),this._renderService}}},57852:function(t,e,i){"use strict";i.d(e,{MB:()=>u,Of:()=>c});var r=i(31982),n=i(8830),s=i(92631),a=i(51711);class o{static GetCanvas(){try{return o.canvas||(o.canvas=s.w.global.createCanvas({})),o.canvas}catch(t){return null}}static GetCtx(){if(!o.ctx){let t=o.GetCanvas();o.ctx=t.getContext("2d")}return o.ctx}}class l extends r.L{static getInstance(){return l._instance||(l._instance=new l),l._instance}constructor(t=[],e=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;let i=o.GetCanvas(),r=o.GetCtx();if(i.width=e,i.height=1,!r)return;if(r.translate(0,0),!r)throw Error("获取ctx发生错误");let n=r.createLinearGradient(0,0,e,0);t.forEach(t=>{n.addColorStop(t[0],t[1])}),r.fillStyle=n,r.fillRect(0,0,e,1),this.rgbaSet=r.getImageData(0,0,e,1).data}getColor(t){let e=this.rgbaSet.slice(4*t,4*t+4);return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]/255})`}GetOrCreate(t,e,i,r,n=[],s=100){let a=`${t}${e}${i}${r}`;n.forEach(t=>a+=t.join()),a+=s;let o=this.dataMap.get(a);return o||(o={data:new l(n,s),timestamp:[]},this.addLimitedTimestamp(o,Date.now(),{}),this.dataMap.set(a,o)),this.clearCache(this.dataMap,this.cacheParams),o.data}}class h{static GetSize(t){for(let e=0;e<h.ImageSize.length;e++)if(h.ImageSize[e]>=t)return h.ImageSize[e];return t}static Get(t,e,i,r,n,s,a){let o=h.GenKey(t,e,i,r,n),l=h.cache[o];if(!l||0===l.length)return null;for(let t=0;t<l.length;t++)if(l[t].width>=s&&l[t].height>=a)return l[t].pattern;return null}static Set(t,e,i,r,n,s,a,o){let l=h.GenKey(t,e,i,r,n);h.cache[l]?h.cache[l].push({width:a,height:o,pattern:s}):h.cache[l]=[{width:a,height:o,pattern:s}]}static GenKey(t,e,i,r,n){return`${e},${i},${r},${n},${t.join()}`}}function u(t,e,i,r){let{stops:s,startAngle:o,endAngle:l}=r;for(;i<0;)i+=n.f7;for(;i>n.f7;)i-=n.f7;if(i<o||i>l)return s[0].color;let h,u,c=(i-o)/(l-o);for(let t=0;t<s.length;t++)if(s[t].offset>=c){h=s[t-1],u=s[t];break}return c=(c-h.offset)/(u.offset-h.offset),(0,a.BM)(h.color,u.color,c,!1)}function c(t,e,i,r,n,s,a,u,c){let d=Math.floor(180*n/Math.PI),p=o.GetCanvas(),f=o.GetCtx();if(!f)return null;let g=h.GetSize(u),m=h.GetSize(c),y=h.Get(e,i,r,s,a,g,m);if(y)return y;let v=Math.sqrt(Math.max(Math.max(Math.pow(i,2)+Math.pow(r,2),Math.pow(g-i,2)+Math.pow(r,2)),Math.max(Math.pow(g-i,2)+Math.pow(m-r,2),Math.pow(i,2)+Math.pow(m-r,2)))),b=d+1,x=n/Math.max(1,b-1),_=l.getInstance().GetOrCreate(i,r,g,m,e,b),w=2*Math.PI*v/360;p.width=g,p.height=m,f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,g,m),f.translate(i,r),f.rotate(s);for(let t=0,e=b-1;t<e&&!(s+t*x>a);t++){let e=_.getColor(t);f.beginPath(),f.rotate(x),f.moveTo(0,0),f.lineTo(v,-2*w),f.lineTo(v,0),f.fillStyle=e,f.closePath(),f.fill()}let S=f.getImageData(0,0,g,m);return p.width=S.width,p.height=S.height,f.putImageData(S,0,0),(y=t.createPattern(p,"no-repeat"))&&h.Set(e,i,r,s,a,y,g,m),y}h.cache={},h.ImageSize=[20,40,80,160,320,640,1280,2560]},5445:function(t,e,i){"use strict";i.d(e,{A:()=>n,r:()=>r});let r=Symbol.for("CanvasFactory"),n=Symbol.for("Context2dFactory")},34829:function(t,e,i){"use strict";i.d(e,{u:()=>r});class r{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}get nativeCanvas(){return this._nativeCanvas}set nativeCanvas(t){this._nativeCanvas=t}get width(){return this._pixelWidth}set width(t){this._pixelWidth=t,this._displayWidth=t/(this._dpr||1)}get height(){return this._pixelHeight}set height(t){this._pixelHeight=t,this._displayHeight=t/(this._dpr||1)}getContext(t){return this._context}get visiable(){return this._visiable}set visiable(t){this._visiable=t,t?this.show():this.hide()}get dpr(){return this._dpr}set dpr(t){this._dpr=t,this.resize(this._displayWidth,this._displayHeight)}constructor(t){var e;let{nativeCanvas:i,width:r=500,height:n=500,dpr:s=1,x:a,y:o,id:l,canvasControled:h=!0}=t;this._x=null!=a?a:0,this._y=null!=o?o:0,this._pixelWidth=r*s,this._pixelHeight=n*s,this._visiable=!1!==t.visiable,this.controled=h,this._displayWidth=r,this._displayHeight=n,this._dpr=s,this._nativeCanvas=i,this._id=null!=(e=i.id)?e:l,l&&(i.id=l),this.init(t)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(t){}resize(t,e){}toDataURL(t,e){return""}readPixels(t,e,i,r){return this._context.getImageData(t,e,i,r)}convertToBlob(t){throw Error("暂未实现")}transferToImageBitmap(){throw Error("暂未实现")}release(...t){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}}r.env="browser"},42761:function(t,e,i){"use strict";i.d(e,{JN:()=>h,XS:()=>T,me:()=>B});var r=i(8830),n=i(42708),s=i(18210),a=i(34505),o=i(92631),l=i(5445);function h(t){return a.n.getNamed(l.r,o.w.global.env)(t)}let u=Math.sqrt(3),c=1/3;function d(t){return t>-_&&t<_}let p=[0,0],f=[0,0],g=[0,0];function m(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function y(t,e,i,r){let n=1-r;return n*(n*t+2*r*e)+r*r*i}function v(t,e,i,r,n){let s=1-n;return s*s*(s*t+3*n*e)+n*n*(n*r+3*s*i)}function b(t){return(t%=r.f7)<0&&(t+=r.f7),t}function x(t,e,i,r,n,s,a){if(0===n)return!1;let o=n/2,l=0,h=t;if(a>e+o&&a>r+o||a<e-o&&a<r-o||s>t+o&&s>i+o||s<t-o&&s<i-o)return!1;if(t===i)return Math.abs(s-t)<=n/2;let u=(l=(e-r)/(t-i))*s-a+(t*r-i*e)/(t-i);return u*u/(l*l+1)<=n/2*n/2}let _=1e-4,w=[-1,-1,-1],S=[-1,-1];function A(t){return Math.round(t/r.pi*1e8)/1e8%2*r.pi}let C=[0,0];function D(t,e,i,a,o){let l=t.length,h,D,T=0,B=0,M=0,E=0,k=0;for(let L=0;L<l;L++){var F,R,P,O;let l=t[L],I=0===L;l[0]===s.m.M&&L>1&&(i||(T+=(0,n.N0)(B,M,E,k,a,o))),I&&(B=l[1],M=l[2],E=B,k=M);let z=l[0],Z=l[1],j=l[2],W=l[3],U=l[4],N=l[5],H=l[6],G=U,V=N;C[0]=G,C[1]=V,function(t,e){let i=A(t[0]);i<0&&(i+=r.f7);let n=i-t[0],s=t[1];s+=n,!e&&s-i>=r.f7?s=i+r.f7:e&&i-s>=r.f7?s=i-r.f7:!e&&i>s?s=i+(r.f7-A(i-s)):e&&i<s&&(s=i-(r.f7-A(s-i))),t[0]=i,t[1]=s}(C,!!l[6]),G=C[0],V=C[1];let X=G,Y=V-G,$=!!(1-!l[6]),q=(a-Z)*W/W+Z;switch(z){case s.m.M:E=Z,k=j,B=E,M=k;break;case s.m.L:if(i){if(x(B,M,Z,j,e,a,o))return!0}else T+=(0,n.N0)(B,M,Z,j,a,o)||0;B=Z,M=j;break;case s.m.C:if(i){if(F=B,R=M,0!==e&&(!(o>R+e)||!(o>j+e)||!(o>U+e)||!(o>H+e))&&(!(o<R-e)||!(o<j-e)||!(o<U-e)||!(o<H-e))&&(!(a>F+e)||!(a>Z+e)||!(a>W+e)||!(a>N+e))&&(!(a<F-e)||!(a<Z-e)||!(a<W-e)||!(a<N-e))&&function(t,e,i,r,n,s,a,o,l,h,u){let c,d,y,b,x=0,_=.005,w=1/0;p[0]=l,p[1]=h;for(let l=0;l<1;l+=.05)f[0]=v(t,i,n,a,l),f[1]=v(e,r,s,o,l),(y=m(p,f))<w&&(x=l,w=y);w=1/0;for(let l=0;l<32&&!(_<1e-4);l++)c=x-_,d=x+_,f[0]=v(t,i,n,a,c),f[1]=v(e,r,s,o,c),y=m(f,p),c>=0&&y<w?(x=c,w=y):(g[0]=v(t,i,n,a,d),g[1]=v(e,r,s,o,d),b=m(g,p),d<=1&&b<w?(x=d,w=b):_*=.5);return Math.sqrt(w)}(F,R,Z,j,W,U,N,H,a,o,0)<=e/2)return!0}else T+=function(t,e,i,r,n,s,a,o,l,h){if(h>e&&h>r&&h>s&&h>o||h<e&&h<r&&h<s&&h<o)return 0;let p=function(t,e,i,r,n,s){let a=r+3*(e-i)-t,o=3*(i-2*e+t),l=3*(e-t),h=t-n,p=o*o-3*a*l,f=o*l-9*a*h,g=l*l-3*o*h,m=0;if(d(p)&&d(f))if(d(o))s[0]=0;else{let t=-l/o;t>=0&&t<=1&&(s[m++]=t)}else{let t=f*f-4*p*g;if(d(t)){let t=f/p,e=-o/a+t,i=-t/2;e>=0&&e<=1&&(s[m++]=e),i>=0&&i<=1&&(s[m++]=i)}else if(t>0){let e=Math.sqrt(t),i=p*o+1.5*a*(-f+e),r=p*o+1.5*a*(-f-e),n=(-o-((i=i<0?-Math.pow(-i,c):Math.pow(i,c))+(r=r<0?-Math.pow(-r,c):Math.pow(r,c))))/(3*a);n>=0&&n<=1&&(s[m++]=n)}else{let t=Math.acos((2*p*o-3*a*f)/(2*Math.sqrt(p*p*p)))/3,e=Math.sqrt(p),i=Math.cos(t),r=(-o-2*e*i)/(3*a),n=(-o+e*(i+u*Math.sin(t)))/(3*a),l=(-o+e*(i-u*Math.sin(t)))/(3*a);r>=0&&r<=1&&(s[m++]=r),n>=0&&n<=1&&(s[m++]=n),l>=0&&l<=1&&(s[m++]=l)}}return m}(e,r,s,o,h,w);if(0===p)return 0;let f=0,g=-1,m=0,y=0;for(let h=0;h<p;h++){let u=w[h],c=0===u||1===u?.5:1;v(t,i,n,a,u)<l||(g<0&&(g=function(t,e,i,r,n){let s=6*i-12*e+6*t,a=9*e+3*r-3*t-9*i,o=3*e-3*t,l=0;if(d(a)){if(s>_||s<-_){let t=-o/s;t>=0&&t<=1&&(n[l++]=t)}}else{let t=s*s-4*a*o;if(d(t))n[0]=-s/(2*a);else if(t>0){let e=Math.sqrt(t),i=(-s+e)/(2*a),r=(-s-e)/(2*a);i>=0&&i<=1&&(n[l++]=i),r>=0&&r<=1&&(n[l++]=r)}}return l}(e,r,s,o,S),S[1]<S[0]&&g>1&&function(){let t=S[0];S[0]=S[1],S[1]=t}(),m=v(e,r,s,o,S[0]),g>1&&(y=v(e,r,s,o,S[1]))),2===g?u<S[0]?f+=m<e?c:-c:u<S[1]?f+=y<m?c:-c:f+=o<y?c:-c:u<S[0]?f+=m<e?c:-c:f+=o<m?c:-c)}return f}(B,M,Z,j,W,U,N,H,a,o)||0;B=N,M=H;break;case s.m.Q:if(i){if(P=B,O=M,0!==e&&(!(o>O+e)||!(o>j+e)||!(o>U+e))&&(!(o<O-e)||!(o<j-e)||!(o<U-e))&&(!(a>P+e)||!(a>Z+e)||!(a>W+e))&&(!(a<P-e)||!(a<Z-e)||!(a<W-e))&&function(t,e,i,r,n,s,a,o,l){let h=0,u=.005,c=1/0;p[0]=a,p[1]=o;for(let a=0;a<1;a+=.05){f[0]=y(t,i,n,a),f[1]=y(e,r,s,a);let o=m(p,f);o<c&&(h=a,c=o)}c=1/0;for(let a=0;a<32&&!(u<1e-4);a++){let a=h-u,o=h+u;f[0]=y(t,i,n,a),f[1]=y(e,r,s,a);let l=m(f,p);if(a>=0&&l<c)h=a,c=l;else{g[0]=y(t,i,n,o),g[1]=y(e,r,s,o);let a=m(g,p);o<=1&&a<c?(h=o,c=a):u*=.5}}return Math.sqrt(c)}(P,O,Z,j,W,U,a,o,0)<=e/2)return!0}else T+=function(t,e,i,r,n,s,a,o){if(o>e&&o>r&&o>s||o<e&&o<r&&o<s)return 0;let l=function(t,e,i,r,n){let s=t-2*e+i,a=2*(e-t),o=t-r,l=0;if(d(s)){if(a>_||a<-_){let t=-o/a;t>=0&&t<=1&&(n[l++]=t)}}else{let t=a*a-4*s*o;if(d(t)){let t=-a/(2*s);t>=0&&t<=1&&(n[l++]=t)}else if(t>0){let e=Math.sqrt(t),i=(-a+e)/(2*s),r=(-a-e)/(2*s);i>=0&&i<=1&&(n[l++]=i),r>=0&&r<=1&&(n[l++]=r)}}return l}(e,r,s,o,w);if(0===l)return 0;let h=function(t,e,i){let r=t+i-2*e;return 0===r?.5:(t-e)/r}(e,r,s);if(h>=0&&h<=1){let o=0,u=y(e,r,s,h);for(let r=0;r<l;r++){let l=0===w[r]||1===w[r]?.5:1;y(t,i,n,w[r])<a||(w[r]<h?o+=u<e?l:-l:o+=s<u?l:-l)}return o}let u=0===w[0]||1===w[0]?.5:1;return y(t,i,n,w[0])<a?0:s<e?u:-u}(B,M,Z,j,W,U,a,o)||0;B=W,M=U;break;case s.m.A:if(h=Math.cos(X)*W+Z,D=Math.sin(X)*W+j,I?(E=h,k=D):T+=(0,n.N0)(B,M,h,D,a,o),i){if(function(t,e,i,n,s,a,o,l,h){if(0===o)return!1;let u=Math.sqrt((l-=t)*l+(h-=e)*h);if(u-o>i||u+o<i)return!1;if(Math.abs(n-s)%r.f7<1e-4)return!0;if(a){let t=n;n=b(s),s=b(t)}else n=b(n),s=b(s);n>s&&(s+=r.f7);let c=Math.atan2(h,l);return c<0&&(c+=r.f7),c>=n&&c<=s||c+r.f7>=n&&c+r.f7<=s}(Z,j,W,X,X+Y,$,e,q,o))return!0}else T+=function(t,e,i,n,s,a,o,l){if((l-=e)>i||l<-i)return 0;let h=Math.sqrt(i*i-l*l);w[0]=-h,w[1]=h;let u=Math.abs(n-s);if(u<1e-4)return 0;if(u>=r.f7-1e-4)return n=0,s=r.f7,o>=w[0]+t&&o<=w[1]+t?a?1:-1:0;if(n>s){let t=n;n=s,s=t}n<0&&(n+=r.f7,s+=r.f7);let c=0;for(let e=0;e<2;e++){let i=w[e];if(i+t>o){let t=Math.atan2(l,i),e=a?1:-1;t<0&&(t=r.f7+t),(t>=n&&t<=s||t+r.f7>=n&&t+r.f7<=s)&&(t>r.pi/2&&t<1.5*r.pi&&(e=-e),c+=e)}}return c}(Z,j,W,X,X+Y,$,q,o);B=Math.cos(X+Y)*W+Z,M=Math.sin(X+Y)*W+j;break;case s.m.R:if(E=B=Z,k=M=j,h=E+W,D=k+U,i){if(x(E,k,h,k,e,a,o)||x(h,k,h,D,e,a,o)||x(h,D,E,D,e,a,o)||x(E,D,E,k,e,a,o))return!0}else T+=(0,n.N0)(h,k,h,D,a,o),T+=(0,n.N0)(E,D,E,k,a,o);break;case s.m.Z:if(i){if(x(B,M,E,k,e,a,o))return!0}else T+=(0,n.N0)(B,M,E,k,a,o);B=E,M=k}}return i||Math.abs(M-k)<_||(T+=(0,n.N0)(B,M,E,k,a,o)||0),0!==T}function T(t,e,i){return D(t,0,!1,e,i)}function B(t,e,i,r){return D(t,e,!0,i,r)}},51711:function(t,e,i){"use strict";i.d(e,{BM:()=>o,Ib:()=>h});var r=i(97958),n=i(4654),s=i(95723);function a(t,e=!1){return Array.isArray(t)&&(0,n.Z)(t[0])?e?`rgb(${Math.round(t[0])},${Math.round(t[1])},${Math.round(t[2])},${t[3].toFixed(2)})`:`rgb(${Math.round(t[0])},${Math.round(t[1])},${Math.round(t[2])})`:t}function o(t,e,i,r,a){return Array.isArray(t)&&!(0,n.Z)(t[0])||Array.isArray(e)&&!(0,n.Z)(e[0])?[,,,,].fill(0).map((n,a)=>{var o,h;return l((0,s.Z)(t)?null!=(o=t[a])?o:t[0]:t,(0,s.Z)(e)?null!=(h=e[a])?h:e[0]:e,i,r)}):l(t,e,i,r,a)}function l(t,e,i,n,s){if(!t||!e)return t&&a(t)||e&&a(e)||!1;let l,h,u=!1,c=!1;if(Array.isArray(t)?l=t:"string"==typeof t?l=r.VH.Get(t,r.Mr.Color255):u=!0,Array.isArray(e)?h=e:"string"==typeof e?h=r.VH.Get(e,r.Mr.Color255):c=!0,u!==c){let r=u?t:e,l=u?e:t,h=Object.assign(Object.assign({},r),{stops:r.stops.map(t=>Object.assign(Object.assign({},t),{color:a(l)}))});return u?o(r,h,i,n,s):o(h,r,i,n,s)}if(u){if(t.gradient===e.gradient){let r=t.stops,n=e.stops;if(r.length!==n.length)return!1;if("linear"===t.gradient){var p,f,g,m=t,y=e,v=i;let r=m.stops,n=y.stops;return{gradient:"linear",x0:m.x0+(y.x0-m.x0)*v,x1:m.x1+(y.x1-m.x1)*v,y0:m.y0+(y.y0-m.y0)*v,y1:m.y1+(y.y1-m.y1)*v,stops:Array(r.length).fill(0).map((t,e)=>({color:d(r[e].color,n[e].color,v),offset:r[e].offset+(n[e].offset-r[e].offset)*v}))}}if("radial"===t.gradient){var b=t,x=e,_=i;let r=b.stops,n=x.stops;return{gradient:"radial",x0:b.x0+(x.x0-b.x0)*_,x1:b.x1+(x.x1-b.x1)*_,y0:b.y0+(x.y0-b.y0)*_,y1:b.y1+(x.y1-b.y1)*_,r0:b.r0+(x.r0-b.r0)*_,r1:b.r1+(x.r1-b.r1)*_,stops:Array(r.length).fill(0).map((t,e)=>({color:d(r[e].color,n[e].color,_),offset:r[e].offset+(n[e].offset-r[e].offset)*_}))}}if("conical"===t.gradient){var w=t,S=e,A=i;let r=w.stops,n=S.stops;return{gradient:"conical",startAngle:w.startAngle+(S.startAngle-w.startAngle)*A,endAngle:w.endAngle+(S.endAngle-w.endAngle)*A,x:w.x+(S.x-w.x)*A,y:w.y+(S.y-w.y)*A,stops:Array(r.length).fill(0).map((t,e)=>({color:d(r[e].color,n[e].color,A),offset:r[e].offset+(n[e].offset-r[e].offset)*A}))}}}return!1}return s&&s(l,h),a((p=l,f=h,g=i,[p[0]+(f[0]-p[0])*g,p[1]+(f[1]-p[1])*g,p[2]+(f[2]-p[2])*g,p[3]+(f[3]-p[3])*g]),n)}function h(t,e,i){return`rgba(${t[0]+(e[0]-t[0])*i},${t[1]+(e[1]-t[1])*i},${t[2]+(e[2]-t[2])*i},${t[3]+(e[3]-t[3])*i})`}let u=[0,0,0,0],c=[0,0,0,0];function d(t,e,i){return r.VH.Get(t,r.Mr.Color255,u),r.VH.Get(e,r.Mr.Color255,c),`rgba(${Math.round(u[0]+(c[0]-u[0])*i)},${Math.round(u[1]+(c[1]-u[1])*i)},${Math.round(u[2]+(c[2]-u[2])*i)},${u[3]+(c[3]-u[3])*i})`}},97958:function(t,e,i){"use strict";i.d(e,{Mr:()=>n,VH:()=>a});var r,n,s=i(60692);(r=n||(n={}))[r.Color255=0]="Color255",r[r.Color1=1]="Color1";class a{static Get(t,e=n.Color1,i=[0,0,0,1]){if(e===n.Color1){let e=a.store1[t];if(e)return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i;let r=s.Il.parseColorString(t);if(r){let e=[r.r/255,r.g/255,r.b/255,r.opacity];a.store1[t]=e,a.store255[t]=[r.r,r.g,r.b,r.opacity],i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]}return i}let r=a.store255[t];if(r)return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i;let o=s.Il.parseColorString(t);return o&&(a.store1[t]=[o.r/255,o.g/255,o.b/255,o.opacity],a.store255[t]=[o.r,o.g,o.b,o.opacity],i[0]=o.r,i[1]=o.g,i[2]=o.b,i[3]=o.opacity),i}static Set(t,e,i){if(e===n.Color1)a.store1[t]||(a.store1[t]=i,a.store255[t]=[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),Math.floor(255*i[3])]);else{if(a.store255[t])return;a.store255[t]=i,a.store1[t]=[i[0]/255,i[1]/255,i[2]/255,i[3]]}}}a.store255={},a.store1={}},33793:function(t,e,i){"use strict";i.d(e,{y:()=>s});var r=i(8830),n=i(10773);let s=(t,e,i,s)=>{let a,o=!1,l=!1;if(e.forEachChildren(t=>!(o=t.numberType===n.IJ)),e.forEachChildren(t=>!(l=!!t.findFace)),o){let t=e.getChildren(),n=[...t];n.sort((t,e)=>{var i,n,s,a;let o=(null!=(n=null!=(i=t.attribute.startAngle)?i:0+t.attribute.endAngle)?n:0)/2,l=(null!=(a=null!=(s=e.attribute.startAngle)?s:0+e.attribute.endAngle)?a:0)/2;for(;o<0;)o+=r.f7;for(;l<0;)l+=r.f7;return l-o}),n.forEach(t=>{t._next=null,t._prev=null}),e.removeAllChild(),e.update(),n.forEach(t=>{e.appendChild(t)}),s.hack_pieFace="outside",(a=i(o,l))&&a.graphic||(s.hack_pieFace="inside",a=i(o,l)),a&&a.graphic||(s.hack_pieFace="top",a=i(o,l)),e.removeAllChild(),t.forEach(t=>{t._next=null,t._prev=null}),t.forEach(t=>{e.appendChild(t)})}else if(l){let r=e.getChildren(),n=r.map(e=>({ave_z:e.findFace().vertices.map(i=>{var r;return t.view(i[0],i[1],null!=(r=i[2]+e.attribute.z)?r:0)[2]}).reduce((t,e)=>t+e,0),g:e}));n.sort((t,e)=>e.ave_z-t.ave_z),e.removeAllChild(),n.forEach(t=>{t.g._next=null,t.g._prev=null}),e.update(),n.forEach(t=>{e.add(t.g)}),a=i(o,l),e.removeAllChild(),r.forEach(t=>{t._next=null,t._prev=null}),e.update(),r.forEach(t=>{e.add(t)})}else a=i(o,l);return a}},47070:function(t,e,i){"use strict";var r,n;i.d(e,{Z:()=>s});let s=(r={},function(t){Object.prototype.hasOwnProperty;let e="function"==typeof Symbol,i=e&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=(e&&void 0!==Symbol.iterator&&Symbol.iterator,Object.create,Object.getPrototypeOf(Function)),n=("object"==typeof process&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL,Map),s=new WeakMap;function a(t,e,i){let r=s.get(t);if(l(r)){if(!i)return;r=new n,s.set(t,r)}let a=r.get(e);if(l(a)){if(!i)return;a=new n,r.set(e,a)}return a}function o(t,e,i){let r=a(e,i,!1);return!l(r)&&!!r.has(t)}function l(t){return void 0===t}function h(t){return null===t}function u(t){return"object"==typeof t?null!==t:"function"==typeof t}function c(t){let e=function(t,e){switch(function(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}let r="string",n=function(t,e){let i=t[e];if(null!=i){if(!d(i))throw TypeError();return i}}(t,i);if(void 0!==n){let e=n.call(t,r);if(u(e))throw TypeError();return e}return function(t,e){if("string"===e){let e=t.toString;if(d(e)){let i=e.call(t);if(!u(i))return i}let i=t.valueOf;if(d(i)){let e=i.call(t);if(!u(e))return e}}else{let e=t.valueOf;if(d(e)){let i=e.call(t);if(!u(i))return i}let i=t.toString;if(d(i)){let e=i.call(t);if(!u(e))return e}}throw TypeError()}(t,r)}(t,0);return"symbol"==typeof e?e:""+e}function d(t){return"function"==typeof t}function p(t){let e=Object.getPrototypeOf(t);if("function"!=typeof t||t===r||e!==r)return e;let i=t.prototype,n=i&&Object.getPrototypeOf(i);if(null==n||n===Object.prototype)return e;let s=n.constructor;return"function"!=typeof s||s===t?e:s}t("defineMetadata",function(t,e,i,r){var n,s;if(!u(i))throw TypeError();return n=t,s=e,void a(i,r,!0).set(n,s)}),t("hasMetadata",function(t,e,i){if(!u(e))throw TypeError();return l(i)||(i=c(i)),function t(e,i,r){if(o(e,i,r))return!0;let n=p(i);return null!==n&&t(e,n,r)}(t,e,i)}),t("hasOwnMetadata",function(t,e,i){if(!u(e))throw TypeError();return l(i)||(i=c(i)),o(t,e,i)}),t("getMetadata",function(t,e,i){if(!u(e))throw TypeError();return l(i)||(i=c(i)),function t(e,i,r){if(o(e,i,r)){var n=e,s=i,h=r;let t=a(s,h,!1);return l(t)?void 0:t.get(n)}let u=p(i);return null===u?void 0:t(e,u,r)}(t,e,i)})}(function(t,e){"function"!=typeof r[t]&&Object.defineProperty(r,t,{configurable:!0,writable:!0,value:e}),n&&n(t,e)}),r)},97792:function(t,e,i){"use strict";i.d(e,{Ci:()=>s,P:()=>o,Pv:()=>h,hN:()=>u});var r=i(19498);function n(t,e){let i=0,n=t.length;for(let s=0;s<n;s++){let a=t[s],o=e[s],l=t[(s+1)%n],h=e[(s+1)%n];i+=r.HL.distanceNN(a,o,l,h)}return i/2}function s(t,e,i,r,s){return n([t.x,e.x,i.x,r.x],[t.y,e.y,i.y,r.y])}function a(t,e,i,r,n){let s=1-n;return s*s*s*t+3*e*n*s*s+3*i*n*n*s+r*n*n*n}function o(t,e,i,n,s){let o=a(t.x,e.x,i.x,n.x,s),l=a(t.y,e.y,i.y,n.y,s);return new r.E9(o,l)}function l(t,e,i,r){let n=1-r;return n*n*t+2*n*r*e+r*r*i}function h(t,e,i,n){let s=l(t.x,e.x,i.x,n),a=l(t.y,e.y,i.y,n);return new r.E9(s,a)}function u(t,e,i,r){return n([t.x,e.x,i.x],[t.y,e.y,i.y])}},49029:function(t,e,i){"use strict";i.d(e,{C:()=>s});var r=i(8830);let n=r.BZ-1e-8;class s{constructor(t){this.init(t)}init(t){this.bounds=t}arc(t,e,i,s,a,o){if(Math.abs(a-s)>n)return this.bounds.add(t-i,e-i),void this.bounds.add(t+i,e+i);let l,h,u,c,d=1/0,p=-1/0,f=1/0,g=-1/0;function m(t){u=i*Math.cos(t),c=i*Math.sin(t),u<d&&(d=u),u>p&&(p=u),c<f&&(f=c),c>g&&(g=c)}if(m(s),m(a),a!==s)if((s%=r.BZ)<0&&(s+=r.BZ),(a%=r.BZ)<0&&(a+=r.BZ),a<s&&(o=!o,l=s,s=a,a=l),o)for(a-=r.BZ,l=s-s%r.ou,h=0;h<4&&l>a;++h,l-=r.ou)m(l);else for(l=s-s%r.ou+r.ou,h=0;h<4&&l<a;++h,l+=r.ou)m(l);this.bounds.add(t+d,e+f),this.bounds.add(t+p,e+g)}arcTo(t,e,i,r,n){this.bounds.add(t,e)}bezierCurveTo(t,e,i,r,n,s){this.bounds.add(t,e),this.bounds.add(i,r),this.bounds.add(n,s)}closePath(){}ellipse(){throw Error("不支持ellipse")}lineTo(t,e){this.bounds.add(t,e)}moveTo(t,e){this.bounds.add(t,e)}quadraticCurveTo(t,e,i,r){this.bounds.add(t,e),this.bounds.add(i,r)}rect(t,e,i,r){this.bounds.add(t,e),this.bounds.add(t+i,e+r)}clear(){this.bounds.clear()}release(...t){}}},33880:function(t,e,i){"use strict";i.d(e,{D:()=>o,L:()=>l});var r=i(95723),n=i(8830);let s=function(){let t={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i},e="";function i(t){let i=Error(e+": "+t);throw i.source=e,i}function r(){return n("linear",t.linearGradient,s)||n("radial",t.radialGradient,o)||n("conic",t.conicGradient,a)}function n(e,r,n){let s=y(r);if(s){y(t.startCall)||i("Missing (");let r=function(r){let s=n();return s&&(y(t.comma)||i("Missing comma before color stops")),{type:e,orientation:s,colorStops:d(p)}}(0);return y(t.endCall)||i("Missing )"),r}}function s(){return m("directional",t.sideOrCorner,1)||m("angular",t.angleValue,1)}function a(){return m("angular",t.fromAngleValue,1)}function o(){let i,r,n=l();return n&&((i=[]).push(n),r=e,y(t.comma)&&((n=l())?i.push(n):e=r)),i}function l(){let t=function(){let t=m("shape",/^(circle)/i,0);return t&&(t.style=g()||h()),t}()||function(){let t=m("shape",/^(ellipse)/i,0);return t&&(t.style=f()||h()),t}();if(t)t.at=u();else{let e=h();if(e){t=e;let i=u();i&&(t.at=i)}else{let e=c();e&&(t={type:"default-radial",at:e})}}return t}function h(){return m("extent-keyword",t.extentKeywords,1)}function u(){if(m("position",/^at/,0)){let t=c();return t||i("Missing positioning value"),t}}function c(){let t={x:f(),y:f()};if(t.x||t.y)return{type:"position",value:t}}function d(e){let r=e(),n=[];if(r)for(n.push(r);y(t.comma);)(r=e())?n.push(r):i("One extra comma");return n}function p(){let e=m("hex",t.hexColor,1)||m("rgba",t.rgbaColor,1)||m("rgb",t.rgbColor,1)||m("literal",t.literalColor,0);return e||i("Expected color definition"),e.length=f(),e}function f(){return m("%",t.percentageValue,1)||m("position-keyword",t.positionKeywords,1)||g()}function g(){return m("px",t.pixelValue,1)||m("em",t.emValue,1)}function m(t,e,i){let r=y(e);if(r)return{type:t,value:r[i]}}function y(t){let i=/^[\n\r\t\s]+/.exec(e);i&&v(i[0].length);let r=t.exec(e);return r&&v(r[0].length),r}function v(t){e=e.substr(t)}return function(t){return e=t.toString(),function(){let t=d(r);return e.length>0&&i("Invalid input not EOF"),t}()}}();class a{static IsGradient(t){return!("string"==typeof t&&!t.includes("gradient"))}static IsGradientStr(t){return"string"==typeof t&&t.includes("gradient")}static Parse(t){if(a.IsGradientStr(t))try{let e=s(t)[0];if(e){if("linear"===e.type)return a.ParseLinear(e);if("radial"===e.type)return a.ParseRadial(e);if("conic"===e.type)return a.ParseConic(e)}}catch(t){}return t}static processColorStops(t){if(!t||0===t.length)return[];if(t.some(t=>t.length)){let e=t.map(t=>({color:t.value,offset:t.length?parseFloat(t.length.value)/100:-1}));e[0].offset<0&&(e[0].offset=0),e[e.length-1].offset<0&&(e[e.length-1].offset=1);for(let t=1;t<e.length-1;t++)if(e[t].offset<0){let i=t-1,r=t+1;for(;r<e.length&&e[r].offset<0;)r++;let n=e[i].offset,s=e[r].offset,a=r-i;for(let t=1;t<a;t++)e[i+t].offset=n+(s-n)*t/a;t=r-1}return e}return t.map((e,i)=>{let r=t.length>1?i/(t.length-1):0;return{color:e.value,offset:r}})}static ParseConic(t){let{orientation:e,colorStops:i=[]}=t,r=n.pi/2,s=parseFloat(e.value)/180*n.pi-r;return{gradient:"conical",x:.5,y:.5,startAngle:s,endAngle:s+n.f7,stops:a.processColorStops(i)}}static ParseRadial(t){let{colorStops:e=[]}=t;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:a.processColorStops(e)}}static ParseLinear(t){let{orientation:e,colorStops:i=[]}=t,r=n.pi/2,s="angular"===e.type?parseFloat(e.value)/180*n.pi:0;for(;s<0;)s+=n.f7;for(;s>=n.f7;)s-=n.f7;let o=0,l=0,h=0,u=0;return s<r?(o=0,l=1,h=Math.sin(s),u=l-Math.cos(s)):s<n.pi?(o=0,l=0,h=Math.cos(s-r),u=Math.sin(s-r)):s<n.pi+r?(l=0,h=(o=1)-Math.sin(s-n.pi),u=Math.cos(s-n.pi)):(h=(o=1)-Math.cos(s-r-n.pi),u-=Math.sin(s-r-n.pi)),{gradient:"linear",x0:o,y0:l,x1:h,y1:u,stops:a.processColorStops(i)}}}function o(t,e,i){let r=e,{a:n,b:s,c:a,d:o}=t.currentMatrix,l=Math.sign(n)*Math.sqrt(n*n+s*s),h=Math.sign(o)*Math.sqrt(a*a+o*o);return l+h===0?0:r=r/Math.abs(l+h)*2*i}function l(t,e,i,n=0,s=0){var o,h,u,c;let d,p;if(!e||!0===e)return"black";if((0,r.Z)(e))for(let t=0;t<e.length&&!(p=e[t]);t++);else p=e;if("string"==typeof(p=a.Parse(p)))return p;if(i.AABBBounds&&(!i.attribute||0!==i.attribute.scaleX||0!==i.attribute.scaleY)){let e=i.AABBBounds,r=e.x2-e.x1,a=e.y2-e.y1,l=e.x1-n,f=e.y1-s;if(i.attribute){let{scaleX:t=1,scaleY:e=1,angle:n=0}=i.attribute;r/=t,a/=e,l/=t,f/=e,(n||1!==t||1!==e)&&(l=null!=(o=i.x1WithoutTransform)?o:0,f=null!=(h=i.y1WithoutTransform)?h:0,r=null!=(u=i.widthWithoutTransform)?u:r,a=null!=(c=i.heightWithoutTransform)?c:a)}"linear"===p.gradient?d=function(t,e,i,r,n,s){var a,o,l,h;let u=t.createLinearGradient(i+(null!=(a=e.x0)?a:0)*n,r+(null!=(o=e.y0)?o:0)*s,i+(null!=(l=e.x1)?l:1)*n,r+(null!=(h=e.y1)?h:0)*s);return e.stops.forEach(t=>{u.addColorStop(t.offset,t.color)}),u}(t,p,l,f,r,a):"conical"===p.gradient?d=function(t,e,i,r,n,s){var a,o;let l=t.createConicGradient(i+(null!=(a=e.x)?a:0)*n,r+(null!=(o=e.y)?o:0)*s,e.startAngle,e.endAngle);return e.stops.forEach(t=>{l.addColorStop(t.offset,t.color)}),l.GetPattern?l.GetPattern(n+i,s+r,void 0):l}(t,p,l,f,r,a):"radial"===p.gradient&&(d=function(t,e,i,r,n,s){var a,o,l,h,u,c;let d=t.createRadialGradient(i+(null!=(a=e.x0)?a:.5)*n,r+(null!=(o=e.y0)?o:.5)*s,Math.max(n,s)*(null!=(l=e.r0)?l:0),i+(null!=(h=e.x1)?h:.5)*n,r+(null!=(u=e.y1)?u:.5)*s,Math.max(n,s)*(null!=(c=e.r1)?c:.5));return e.stops.forEach(t=>{d.addColorStop(t.offset,t.color)}),d}(t,p,l,f,r,a))}return d||"orange"}},77909:function(t,e,i){"use strict";i.d(e,{EM:()=>a,Qc:()=>r,yb:()=>s});let r=Symbol("ContributionProvider");class n{constructor(t,e){this.serviceIdentifier=t,this.container=e,o.setStore(this.serviceIdentifier,this)}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}refresh(){this.caches&&(this.caches.length=0,this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier)))}}function s(t,e){t(r).toDynamicValue(({container:t})=>new n(e,t)).inSingletonScope().whenTargetNamed(e)}function a(t,e){t(r).toDynamicValue(({container:t})=>new n(e,t)).whenTargetNamed(e)}class o{static getStore(t){return this.store.get(t)}static setStore(t,e){this.store.set(t,e)}static refreshAllContributions(){this.store.forEach(t=>{t.refresh()})}}o.store=new Map},78085:function(t,e,i){"use strict";i.d(e,{r:()=>_});var r=i(49029),n=i(63401);class s{constructor(){this._curves=[],this.bounds=new n.FB}get curves(){return this._curves}getCurveLengths(){return this._curves.map(t=>t.getLength())}getPointAt(t){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}var a=i(18210),o=i(8830),l=i(97708),h=i(9762);function u(t,e,i,r){let n=function(t,e,i,r,n,s,a,l,u){let c=(0,h.M4)(a),d=Math.sin(c),p=Math.cos(c),f=p*(l-t)*.5+d*(u-e)*.5,g=p*(u-e)*.5-d*(l-t)*.5,m=f*f/((i=Math.abs(i))*i)+g*g/((r=Math.abs(r))*r);m>1&&(i*=m=Math.sqrt(m),r*=m);let y=p/i,v=d/i,b=-d/r,x=p/r,_=y*l+v*u,w=b*l+x*u,S=y*t+v*e,A=b*t+x*e,C=1/((S-_)*(S-_)+(A-w)*(A-w))-.25;C<0&&(C=0);let D=Math.sqrt(C);s===n&&(D=-D);let T=.5*(_+S)-D*(A-w),B=.5*(w+A)+D*(S-_),M=Math.atan2(w-B,_-T),E=Math.atan2(A-B,S-T)-M;E<0&&1===s?E+=o.BZ:E>0&&0===s&&(E-=o.BZ);let k=Math.ceil(Math.abs(E/(o.ou+.001))),F=[];for(let t=0;t<k;++t){let e=M+t*E/k,n=M+(t+1)*E/k;F[t]=[T,B,e,n,i,r,d,p]}return F}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,i);for(let e=0;e<n.length;++e){let i=function(t){let e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=l*s,u=-o*a,c=o*s,d=l*a,p=Math.cos(r),f=Math.sin(r),g=Math.cos(n),m=Math.sin(n),y=.5*(n-r),v=Math.sin(.5*y),b=8/3*v*v/Math.sin(y),x=e+p-b*f,_=i+f+b*p,w=e+g,S=i+m,A=w+b*m,C=S-b*g;return[h*x+u*_,c*x+d*_,h*A+u*C,c*A+d*C,h*w+u*S,c*w+d*S]}(n[e]);t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}}let c=(t,e,i,r,n,s,a,o=!1)=>{let l=2*Math.PI,h=(e%l+l)%l,u,c=(i%l+l)%l;o?c>=h&&(c-=l):c<=h&&(c+=l);let d=Math.ceil(Math.abs(u=c-h)/(.5*Math.PI)),p=u/d;for(let e=0;e<d;e++){let i=h+p*e,l=h+p*(e+1),u=4/3*Math.tan(Math.abs(p)/4),c=Math.cos(i),d=Math.sin(i),f=Math.cos(l),g=Math.sin(l),m=c*s+r,y=d*a+n,v=f*s+r,b=g*a+n,x=o?-1:1,_=s*u*x,w=a*u*x;t.push(m-_*d,y+w*c,v+_*g,b-w*f,v,b)}};var d=i(72618),p=i(19498),f=i(63915),g=i(25033),m=i(97792),y=i(8020);class v extends y.H{constructor(t,e,i){super(),this.type=l.D5.QuadraticBezierCurve,this.p0=t,this.p1=e,this.p2=i}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y)}getPointAt(t){if(!1!==this.defined)return(0,m.Pv)(this.p0,this.p1,this.p2,t);throw Error("defined为false的点不能getPointAt")}calcLength(){return this._validPoint()?(0,m.hN)(this.p0,this.p1,this.p2,0):60}calcProjLength(t){return t===l.Nm.ROW?(0,o.Wn)(this.p0.x-this.p2.x):t===l.Nm.COLUMN?(0,o.Wn)(this.p0.y-this.p2.y):0}getAngleAt(t){let e=(0,o.Fp)(t-.01,0),i=(0,o.VV)(t+.01,1),r=this.getPointAt(e),n=this.getPointAt(i);return(0,o.fv)(n.y-r.y,n.x-r.x)}draw(t,e,i,r,n,s){if(t.moveTo(this.p0.x*r+e,this.p0.y*n+i),s>=1)t.quadraticCurveTo(this.p1.x*r+e,this.p1.y*n+i,this.p2.x*r+e,this.p2.y*n+i);else if(s>0){let[a]=function(t,e){let{p0:i,p1:r,p2:n}=t,s=(0,m.Pv)(i,r,n,e),a=p.HL.pointAtPP(i,r,e),o=p.HL.pointAtPP(r,n,e);return[new v(i,a,s),new v(s,o,n)]}(this,s);t.quadraticCurveTo(a.p1.x*r+e,a.p1.y*n+i,a.p2.x*r+e,a.p2.y*n+i)}}getYAt(t){throw Error("QuadraticBezierCurve暂不支持getYAt")}includeX(t){throw Error("QuadraticBezierCurve暂不支持includeX")}}class b{constructor(t){this.path=t,this._lastX=this._lastY=this._startX=this._startY=0}moveTo(t,e){return this._lastX=this._startX=t,this._lastY=this._startY=e,this}lineTo(t,e){let i=this.addLinearCurve(t,e);this.path.addCurve(i),this._lastX=t,this._lastY=e}addLinearCurve(t,e){return new f.g(new p.E9(this._lastX,this._lastY),new p.E9(t,e))}quadraticCurveTo(t,e,i,r){let n=new v(new p.E9(this._lastX,this._lastY),new p.E9(t,e),new p.E9(i,r));this.path.addCurve(n),this._lastX=i,this._lastY=r}bezierCurveTo(t,e,i,r,n,s){let a=new g.A(new p.E9(this._lastX,this._lastY),new p.E9(t,e),new p.E9(i,r),new p.E9(n,s));this.path.addCurve(a),this._lastX=n,this._lastY=s}arcTo(t,e,i,r,n){throw Error("CurveContext不支持调用arcTo")}ellipse(t,e,i,r,n,s,a,o){throw Error("CurveContext不支持调用ellipse")}rect(t,e,i,r){throw Error("CurveContext不支持调用rect")}arc(t,e,i,r,n,s){throw Error("CurveContext不支持调用arc")}closePath(){this.path.curves.length<2||this.lineTo(this._startX,this._startY)}}var x=i(23436);class _ extends s{constructor(t){super(),this.commandList=[],t&&(this._ctx=t),this._boundsContext=new r.C(this.bounds)}get curves(){return this.tryBuildCurves()}setCtx(t){this._ctx=t}moveTo(t,e){return this.commandList.push([a.m.M,t,e]),this._ctx&&this._ctx.moveTo(t,e),this}lineTo(t,e){return this.commandList.push([a.m.L,t,e]),this._ctx&&this._ctx.lineTo(t,e),this}quadraticCurveTo(t,e,i,r){return this.commandList.push([a.m.Q,t,e,i,r]),this._ctx&&this._ctx.quadraticCurveTo(t,e,i,r),this}bezierCurveTo(t,e,i,r,n,s){return this.commandList.push([a.m.C,t,e,i,r,n,s]),this._ctx&&this._ctx.bezierCurveTo(t,e,i,r,n,s),this}arcTo(t,e,i,r,n){return this.commandList.push([a.m.AT,t,e,i,r,n]),this._ctx&&this._ctx.arcTo(t,e,i,r,n),this}ellipse(t,e,i,r,n,s,o,l){return this.commandList.push([a.m.E,t,e,i,r,n,s,o,l]),this._ctx&&this._ctx.ellipse(t,e,i,r,n,s,o,l),this}rect(t,e,i,r){return this.commandList.push([a.m.R,t,e,i,r]),this._ctx&&this._ctx.rect(t,e,i,r),this}arc(t,e,i,r,n,s){return this.commandList.push([a.m.A,t,e,i,r,n,s]),this._ctx&&this._ctx.arc(t,e,i,r,n,s),this}closePath(){return this.commandList.push([a.m.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(t){this._curves.push(t)}clear(){this.transformCbList=null,this.commandList.length=0,this._curves.length=0}beginPath(){this.clear()}tryBuildCurves(){if(!this._curves||!this._curves.length){let t=new b(this);(0,d.h)(this.commandList,t,0,0,1,1)}return this._curves}toString(){if(!this.toStringCbList){let t=[];t[a.m.M]=t=>`M${t[1]} ${t[2]}`,t[a.m.L]=t=>`L${t[1]} ${t[2]}`,t[a.m.Q]=t=>`Q${t[1]} ${t[2]} ${t[3]} ${t[4]}`,t[a.m.C]=t=>`C${t[1]} ${t[2]} ${t[3]} ${t[4]} ${t[5]} ${t[6]}`,t[a.m.A]=t=>{let e=[],i=t[1],r=t[2],n=t[3],s=t[4];c(e,s,t[5],i,r,n,n,t[6]);let a="";for(let t=0;t<e.length;t+=6)a+=`C${e[t]} ${e[t+1]} ${e[t+2]} ${e[t+3]} ${e[t+4]} ${e[t+5]}`;return a},t[a.m.R]=t=>`M${t[1]} ${t[2]} h${t[3]} v${t[4]} H${t[1]}Z`,t[a.m.Z]=t=>"Z",this.toStringCbList=t}let t=this.toStringCbList,e="";return this.commandList.forEach(i=>{e+=t[i[0]](i)}),e}fromString(t,e,i,r,n){this.clear();let s=(0,a.U)(t);return this._runCommandStrList(s,e,i,r,n),this._updateBounds(),this}fromLine(t){let{points:e,curveType:i,clipRangeByDimension:r}=t.attribute;if(!e)return;let n=(0,x.X0)(e,i);"x"===r?this.direction=l.Nm.ROW:"y"===r?this.direction=l.Nm.COLUMN:"auto"===r&&(this.direction=n.direction),this._curves=n.curves}fromCustomPath2D(t,e,i,r,n){return this.clear(),this._runCommandList(t.commandList,e,i,r,n),this._updateBounds(),this}transform(t,e,i,r){let n=this.commandList;if(!this.transformCbList){let t=[];t[a.m.M]=this.moveToTransform,t[a.m.L]=this.lineToTransform,t[a.m.Q]=this.quadraticCurveToTransform,t[a.m.C]=this.bezierCurveToTransform,t[a.m.AT]=this.arcToTransform,t[a.m.E]=this.ellipseTransform,t[a.m.R]=this.rectTransform,t[a.m.A]=this.arcTransform,t[a.m.Z]=this.closePathTransform,this.transformCbList=t}n.forEach(n=>{this.transformCbList[n[0]](n,t,e,i,r)}),this._updateBounds()}moveToTransform(t,e,i,r,n){t[1]=t[1]*r+e,t[2]=t[2]*n+i}lineToTransform(t,e,i,r,n){t[1]=t[1]*r+e,t[2]=t[2]*n+i}quadraticCurveToTransform(t,e,i,r,n){t[1]=t[1]*r+e,t[2]=t[2]*n+i,t[3]=t[3]*r+e,t[4]=t[4]*n+i}bezierCurveToTransform(t,e,i,r,n){t[1]=t[1]*r+e,t[2]=t[2]*n+i,t[3]=t[3]*r+e,t[4]=t[4]*n+i,t[5]=t[5]*r+e,t[6]=t[6]*n+i}arcToTransform(t,e,i,r,n){t[1]=t[1]*r+e,t[2]=t[2]*n+i,t[3]=t[3]*r+e,t[4]=t[4]*n+i,t[5]=t[5]*(r+n)/2}ellipseTransform(t,e,i,r,n){t[1]=t[1]*r+e,t[2]=t[2]*n+i,t[3]=t[3]*r,t[4]=t[4]*n}rectTransform(t,e,i,r,n){t[1]=t[1]*r+e,t[2]=t[2]*n+i,t[3]=t[3]*r,t[4]=t[4]*n}arcTransform(t,e,i,r,n){t[1]=t[1]*r+e,t[2]=t[2]*n+i,t[3]=t[3]*(r+n)/2}closePathTransform(){}_runCommandStrList(t,e=0,i=0,r=1,n=1){let s,a,o,l,h,c=null,d=0,p=0,f=0,g=0;for(let m=0,y=t.length;m<y;++m){switch(s=t[m],1===r&&1===n||(s=function(t,e,i){let r=w[0]=t[0];if("a"===r||"A"===r)w[1]=e*t[1],w[2]=i*t[2],w[3]=t[3],w[4]=t[4],w[5]=t[5],w[6]=e*t[6],w[7]=i*t[7];else if("h"===r||"H"===r)w[1]=e*t[1];else if("v"===r||"V"===r)w[1]=i*t[1];else for(let r=1,n=t.length;r<n;++r)w[r]=(r%2==1?e:i)*t[r];return w}(s,r,n)),s[0]){case"l":d+=s[1],p+=s[2],this.lineTo(d+e,p+i);break;case"L":d=s[1],p=s[2],this.lineTo(d+e,p+i);break;case"h":d+=s[1],this.lineTo(d+e,p+i);break;case"H":d=s[1],this.lineTo(d+e,p+i);break;case"v":p+=s[1],this.lineTo(d+e,p+i);break;case"V":p=s[1],this.lineTo(d+e,p+i);break;case"m":d+=s[1],p+=s[2],this.moveTo(d+e,p+i);break;case"M":d=s[1],p=s[2],this.moveTo(d+e,p+i);break;case"c":a=d+s[5],o=p+s[6],f=d+s[3],g=p+s[4],this.bezierCurveTo(d+s[1]+e,p+s[2]+i,f+e,g+i,a+e,o+i),d=a,p=o;break;case"C":d=s[5],p=s[6],f=s[3],g=s[4],this.bezierCurveTo(s[1]+e,s[2]+i,f+e,g+i,d+e,p+i);break;case"s":a=d+s[3],o=p+s[4],null===c[0].match(/[CcSs]/)?(f=d,g=p):(f=2*d-f,g=2*p-g),l=d+s[1],h=p+s[2],this.bezierCurveTo(f+e,g+i,l+e,h+i,a+e,o+i),f=l,g=h,d=a,p=o;break;case"S":a=s[3],o=s[4],null===c[0].match(/[CcSs]/)?(f=d,g=p):(f=2*d-f,g=2*p-g),l=s[1],h=s[2],this.bezierCurveTo(f+e,g+i,l+e,h+i,a+e,o+i),f=l,g=h,d=a,p=o;break;case"q":a=d+s[3],o=p+s[4],f=d+s[1],g=p+s[2],this.quadraticCurveTo(f+e,g+i,a+e,o+i),d=a,p=o;break;case"Q":a=s[3],o=s[4],this.quadraticCurveTo(s[1]+e,s[2]+i,a+e,o+i),d=a,p=o,f=s[1],g=s[2];break;case"t":a=d+s[1],o=p+s[2],null===c[0].match(/[QqTt]/)?(f=d,g=p):"t"===c[0]?(f=2*d-l,g=2*p-h):"q"===c[0]&&(f=2*d-f,g=2*p-g),l=f,h=g,this.quadraticCurveTo(f+e,g+i,a+e,o+i),d=a,p=o,f=d+s[1],g=p+s[2];break;case"T":a=s[1],o=s[2],f=2*d-f,g=2*p-g,this.quadraticCurveTo(f+e,g+i,a+e,o+i),d=a,p=o;break;case"a":u(this,d+e,p+i,[s[1],s[2],s[3],s[4],s[5],s[6]+d+e,s[7]+p+i]),d+=s[6],p+=s[7];break;case"A":u(this,d+e,p+i,[s[1],s[2],s[3],s[4],s[5],s[6]+e,s[7]+i]),d=s[6],p=s[7];break;case"z":case"Z":this.closePath()}c=s}}_runCommandList(t,e=0,i=0,r=1,n=1){if(0!==e||0!==i||1!==r||1!==n)for(let s=0,o=t.length;s<o;++s){let o=t[s].slice();switch(o[0]){case a.m.L:this.lineToTransform(o,e,i,r,n);break;case a.m.M:this.moveToTransform(o,e,i,r,n);break;case a.m.C:this.bezierCurveToTransform(o,e,i,r,n);break;case a.m.Q:this.quadraticCurveToTransform(o,e,i,r,n);break;case a.m.A:this.arcToTransform(o,e,i,r,n);break;case a.m.E:this.ellipseTransform(o,e,i,r,n);break;case a.m.R:this.rectTransform(o,e,i,r,n);break;case a.m.AT:this.arcToTransform(o,e,i,r,n);break;case a.m.Z:this.closePath()}}else this.commandList=t.map(t=>t.slice())}_updateBounds(){this.bounds.clear(),(0,d.h)(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===l.Nm.COLUMN){if(!this._curves.length)return 0;let t=this._curves[0],e=this._curves[this._curves.length-1];return(0,o.Wn)(t.p0.y-e.p1.y)}if(this.direction===l.Nm.ROW){if(!this._curves.length)return 0;let t=this._curves[0],e=this._curves[this._curves.length-1];return(0,o.Wn)(t.p0.x-e.p1.x)}return this._curves.reduce((t,e)=>t+e.getLength(),0)}getYAt(t){if(!this.curves)return 1/0;for(let e=0;e<this.curves.length;e++){let i=this.curves[e];if(i.includeX(t))return i.getYAt(t)}return 1/0}getAttrAt(t){if(!this._curves)return{pos:{x:0,y:0},angle:0};let e,i=0;for(let r=0;r<this._curves.length;r++){let n=(e=this._curves[r]).getLength(this.direction);if(i+n>=t)break;i+=n}let r=(t-i)/e.getLength(this.direction);return{pos:e.getPointAt(r),angle:e.getAngleAt(r)}}drawWithClipRange(t,e,i,r,n){this.tryBuildCurves();let s=this.getLength()*n,a=0;for(let n=0;n<this._curves.length;n++){let o=this._curves[n],l=o.getLength(this.direction);if(!(a+l<=s)){let n=1-(a+l-s)/l;o.draw(t,i,r,e,e,n);break}o.draw(t,i,r,e,e,1),a+=l}}}let w=["l",0,0,0,0,0,0,0]},97708:function(t,e,i){"use strict";var r,n,s,a,o,l,h,u,c,d,p,f;i.d(e,{D5:()=>o,Gk:()=>s,Gz:()=>r,LZ:()=>n,Nm:()=>a,Oh:()=>l}),(h=r||(r={}))[h.NONE=0]="NONE",h[h.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",h[h.UPDATE_SHAPE=2]="UPDATE_SHAPE",h[h.CLEAR_SHAPE=253]="CLEAR_SHAPE",h[h.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",h[h.INIT=179]="INIT",h[h.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",h[h.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",h[h.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",h[h.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",h[h.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",h[h.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",h[h.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",h[h.CLEAR_LAYOUT=127]="CLEAR_LAYOUT",(u=n||(n={}))[u.GLOBAL=1]="GLOBAL",u[u.LOCAL=16]="LOCAL",u[u.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",u[u.LOCAL_ACCURATE=48]="LOCAL_ACCURATE",(c=s||(s={}))[c.INIT=0]="INIT",c[c.DEFAULT=1]="DEFAULT",c[c.STATE=2]="STATE",c[c.ANIMATE_BIND=10]="ANIMATE_BIND",c[c.ANIMATE_PLAY=11]="ANIMATE_PLAY",c[c.ANIMATE_START=12]="ANIMATE_START",c[c.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",c[c.ANIMATE_END=14]="ANIMATE_END",c[c.TRANSLATE=20]="TRANSLATE",c[c.TRANSLATE_TO=21]="TRANSLATE_TO",c[c.SCALE=22]="SCALE",c[c.SCALE_TO=23]="SCALE_TO",c[c.ROTATE=24]="ROTATE",c[c.ROTATE_TO=25]="ROTATE_TO",(d=a||(a={}))[d.ROW=1]="ROW",d[d.COLUMN=2]="COLUMN",(p=o||(o={}))[p.CubicBezierCurve=0]="CubicBezierCurve",p[p.QuadraticBezierCurve=1]="QuadraticBezierCurve",p[p.ArcCurve=2]="ArcCurve",p[p.LineCurve=3]="LineCurve",p[p.EllipseCurve=4]="EllipseCurve",p[p.MoveCurve=5]="MoveCurve",(f=l||(l={}))[f.beforeFillStroke=0]="beforeFillStroke",f[f.afterFillStroke=1]="afterFillStroke"},44475:function(t,e,i){"use strict";i.d(e,{w:()=>r});class r{constructor(){this._listenerMap=new Map,this._eventListenerTransformer=t=>t}setEventListenerTransformer(t){this._eventListenerTransformer=t||(t=>t)}addEventListener(t,e,i){if(!e)return;let r=t=>{let i=this._eventListenerTransformer(t);"function"==typeof e?e(i):e.handleEvent&&e.handleEvent(i)};this._listenerMap.has(t)||this._listenerMap.set(t,new Map),this._listenerMap.get(t).set(e,r),this._nativeAddEventListener(t,r,i)}removeEventListener(t,e,i){var r;if(!e)return;let n=null==(r=this._listenerMap.get(t))?void 0:r.get(e);n&&(this._nativeRemoveEventListener(t,n,i),this._listenerMap.get(t).delete(e),0===this._listenerMap.get(t).size&&this._listenerMap.delete(t))}dispatchEvent(t){return this._nativeDispatchEvent(t)}clearAllEventListeners(){this._listenerMap.forEach((t,e)=>{t.forEach((t,i)=>{this._nativeRemoveEventListener(e,t,void 0)})}),this._listenerMap.clear()}_nativeAddEventListener(t,e,i){throw Error("_nativeAddEventListener must be implemented by derived classes")}_nativeRemoveEventListener(t,e,i){throw Error("_nativeRemoveEventListener must be implemented by derived classes")}_nativeDispatchEvent(t){throw Error("_nativeDispatchEvent must be implemented by derived classes")}}},27753:function(t,e,i){"use strict";i.d(e,{R:()=>r});class r{static GenAutoIncrementId(){return r.auto_increment_id++}}r.auto_increment_id=0},26845:function(t,e,i){"use strict";i.d(e,{f:()=>n});var r=i(66512);let n=(0,i(87201).v)(r.B8)},87201:function(t,e,i){"use strict";i.d(e,{f:()=>a,v:()=>o});var r=i(62149),n=i(66512),s=i(47070);function a(t){return(e,i,r)=>{var a,o;let l,h;a=n.LD,o=r.toString(),l={},s.Z.hasOwnMetadata(a,e)&&(l=s.Z.getMetadata(a,e)),void 0===(h=l[o])&&(h=[]),h.push(t),l[o]=h,s.Z.defineMetadata(a,l,e)}}function o(t){return e=>(i,n,s)=>a(new r.S(t,e))(i,n,s)}},34865:function(t,e,i){"use strict";i.d(e,{b:()=>s});var r=i(66512),n=i(47070);function s(){return function(t){return n.Z.defineMetadata(r.FL,null,t),t}}},47816:function(t,e,i){"use strict";i.d(e,{t:()=>a});var r=i(62149),n=i(66512),s=i(87201);function a(t){return(0,s.f)(new r.S(n.vO,t))}},22415:function(t,e,i){"use strict";i.d(e,{n:()=>n});var r=i(27753);class n{constructor(t){this.id=r.R.GenAutoIncrementId(),this.registry=t}}},62149:function(t,e,i){"use strict";i.d(e,{S:()=>n});var r=i(66512);class n{constructor(t,e){this.key=t,this.value=e}toString(){return this.key===r.vO?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}},66512:function(t,e,i){"use strict";i.d(e,{B8:()=>n,FL:()=>o,LD:()=>a,Lc:()=>s,vO:()=>r});let r="named",n="inject",s="multi_inject",a="inversify:tagged",o="inversify:paramtypes"},41712:function(t,e,i){"use strict";function r(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function n(t,e,i){let r=Math.sin(i),n=Math.cos(i),s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],u=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+h*r,t[5]=a*n+u*r,t[6]=o*n+c*r,t[7]=l*n+d*r,t[8]=h*n-s*r,t[9]=u*n-a*r,t[10]=c*n-o*r,t[11]=d*n-l*r,t}function s(t,e,i){let r=Math.sin(i),n=Math.cos(i),s=e[0],a=e[1],o=e[2],l=e[3],h=e[8],u=e[9],c=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-h*r,t[1]=a*n-u*r,t[2]=o*n-c*r,t[3]=l*n-d*r,t[8]=s*r+h*n,t[9]=a*r+u*n,t[10]=o*r+c*n,t[11]=l*r+d*n,t}function a(t,e,i){let r=Math.sin(i),n=Math.cos(i),s=e[0],a=e[1],o=e[2],l=e[3],h=e[4],u=e[5],c=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+h*r,t[1]=a*n+u*r,t[2]=o*n+c*r,t[3]=l*n+d*r,t[4]=h*n-s*r,t[5]=u*n-a*r,t[6]=c*n-o*r,t[7]=d*n-l*r,t}function o(t,e,i){let r,n,s,a,o,l,h,u,c,d,p,f,g=i[0],m=i[1],y=i[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*y+e[12],t[13]=e[1]*g+e[5]*m+e[9]*y+e[13],t[14]=e[2]*g+e[6]*m+e[10]*y+e[14],t[15]=e[3]*g+e[7]*m+e[11]*y+e[15]):(r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],h=e[6],u=e[7],c=e[8],d=e[9],p=e[10],f=e[11],t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=o,t[5]=l,t[6]=h,t[7]=u,t[8]=c,t[9]=d,t[10]=p,t[11]=f,t[12]=r*g+o*m+c*y+e[12],t[13]=n*g+l*m+d*y+e[13],t[14]=s*g+h*m+p*y+e[14],t[15]=a*g+u*m+f*y+e[15]),t}function l(t,e){t[0]=e.a,t[1]=e.b,t[2]=0,t[3]=0,t[4]=e.c,t[5]=e.d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e.e,t[13]=e.f,t[14]=0,t[15]=1}function h(t,e,i){let r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u(t,e,i){let r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],h=e[6],u=e[7],c=e[8],d=e[9],p=e[10],f=e[11],g=e[12],m=e[13],y=e[14],v=e[15],b=i[0],x=i[1],_=i[2],w=i[3];return t[0]=b*r+x*o+_*c+w*g,t[1]=b*n+x*l+_*d+w*m,t[2]=b*s+x*h+_*p+w*y,t[3]=b*a+x*u+_*f+w*v,b=i[4],x=i[5],_=i[6],w=i[7],t[4]=b*r+x*o+_*c+w*g,t[5]=b*n+x*l+_*d+w*m,t[6]=b*s+x*h+_*p+w*y,t[7]=b*a+x*u+_*f+w*v,b=i[8],x=i[9],_=i[10],w=i[11],t[8]=b*r+x*o+_*c+w*g,t[9]=b*n+x*l+_*d+w*m,t[10]=b*s+x*h+_*p+w*y,t[11]=b*a+x*u+_*f+w*v,b=i[12],x=i[13],_=i[14],w=i[15],t[12]=b*r+x*o+_*c+w*g,t[13]=b*n+x*l+_*d+w*m,t[14]=b*s+x*h+_*p+w*y,t[15]=b*a+x*u+_*f+w*v,t}function c(t,e,i){let r=e[0],n=e[1],s=e[2],a=i[3]*r+i[7]*n+i[11]*s+i[15];return a=a||1,t[0]=(i[0]*r+i[4]*n+i[8]*s+i[12])/a,t[1]=(i[1]*r+i[5]*n+i[9]*s+i[13])/a,t[2]=(i[2]*r+i[6]*n+i[10]*s+i[14])/a,t}i.d(e,{B$:()=>l,G9:()=>u,Iu:()=>o,TL:()=>r,fF:()=>c,jI:()=>a,lM:()=>n,mN:()=>h,uD:()=>s})},18210:function(t,e,i){"use strict";let r,n,s,a,o;i.d(e,{U:()=>c,m:()=>u});let l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,h={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},u={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};function c(t){let e,i;if(!t)return[];let u=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(null===u)return[];let c=[];for(let t=0,d=u.length;t<d;t++)if(n=(r=u[t]).slice(1),e=[s=r[0]],null!==(i=n.match(l))){for(let t=0,r=i.length;t<r;t++)Number.isNaN(a=parseFloat(i[t]))||e.push(a);if(o=h[s],e.length-1>o){let t,i=s;for(let r=1,n=e.length;r<n;r+=o){t=[i];for(let i=r,n=r+o;i<n;i++)t.push(e[i]);c.push(t),"m"===i?i="l":"M"===i&&(i="L")}}else c.push(e)}else c.push(e);return c}},30528:function(t,e,i){"use strict";i.d(e,{A:()=>s});var r=i(92631);let n=0;class s{constructor(){this.nextAnimationFrameCbs=new Map,this._rafHandle=null,this.runAnimationFrame=t=>{this._rafHandle=null;let e=this.nextAnimationFrameCbs;this.nextAnimationFrameCbs=new Map,e.forEach(e=>e(t))},this.tryRunAnimationFrameNextFrame=()=>{null===this._rafHandle&&0!==this.nextAnimationFrameCbs.size&&(this._rafHandle=r.w.global.getRequestAnimationFrame()(this.runAnimationFrame))}}addAnimationFrameCb(t){return this.nextAnimationFrameCbs.set(++n,t),this.tryRunAnimationFrameNextFrame(),n}removeAnimationFrameCb(t){return!!this.nextAnimationFrameCbs.has(t)&&(this.nextAnimationFrameCbs.delete(t),!0)}}},72618:function(t,e,i){"use strict";i.d(e,{h:()=>n});let r=[(t,e,i,r,n,s,a)=>e.arc(t[1]*n+i,t[2]*s+r,t[3]*(n+s)/2,t[4],t[5],t[6],a),(t,e,i,r,n,s,a)=>e.arcTo(t[1]*n+i,t[2]*s+r,t[3]*n+i,t[4]*s+r,t[5]*(n+s)/2,a),(t,e,i,r,n,s,a)=>e.bezierCurveTo(t[1]*n+i,t[2]*s+r,t[3]*n+i,t[4]*s+r,t[5]*n+i,t[6]*s+r,a),(t,e,i,r)=>e.closePath(),(t,e,i,r,n,s)=>e.ellipse(t[1]*n+i,t[2]*s+r,t[3]*n,t[4]*s,t[5],t[6],t[7],t[8]),(t,e,i,r,n,s,a)=>e.lineTo(t[1]*n+i,t[2]*s+r,a),(t,e,i,r,n,s,a)=>e.moveTo(t[1]*n+i,t[2]*s+r,a),(t,e,i,r,n,s,a)=>e.quadraticCurveTo(t[1]*n+i,t[2]*s+r,t[3]*n+i,t[4]*s+r,a),(t,e,i,r,n,s,a)=>e.rect(t[1]*n+i,t[2]*s+r,t[3]*n,t[4]*s,a)];function n(t,e,i=0,s=0,a=1,o=1,l){for(let n=0;n<t.length;n++){let h=t[n];r[h[0]](h,e,i,s,a,o,l)}}},86083:function(t,e,i){"use strict";i.d(e,{V3:()=>l,fW:()=>o,hJ:()=>h});var r=i(8830),n=i(97708),s=i(66187);function a(t,e,i,r,n,s,a){var o;let l=e.p0,h=r;if(i&&i.originP1===i.originP2&&(l=i.p0),e.defined)r||(t.lineTo(l.x+n,l.y+s,a),h=!r);else{let u,{originP1:c,originP2:d}=e;if(c&&!1!==c.defined&&!i?u=l:c&&!1!==d.defined&&(u=null!=(o=e.p3)?o:e.p1),r){h=!r;let i=u?u.x:e.p0.x,o=u?u.y:e.p0.y;t.moveTo(i+n,o+s,a)}else u&&(h=!r,t.lineTo(u.x+n,u.y+s,a))}return h}function o(t,e,i,o,l){let h,{offsetX:u=0,offsetY:c=0,offsetZ:d=0,mode:p="none",drawConnect:f=!1}=l||{};if(f&&"none"===p||!e)return;let g=!0,{curves:m}=e;if(i>=1){if(f){let e,i=!0;m.forEach((r,n)=>{r.originP1!==r.originP2&&(i=a(t,r,e,i,u,c,d)),e=r})}else m.forEach(e=>{e.defined?(g&&t.moveTo(e.p0.x+u,e.p0.y+c,d),(0,s.w)(t,e,1,l),g=!1):g=!0});return}if(i<=0)return;"x"===o?h=n.Nm.ROW:"y"===o?h=n.Nm.COLUMN:"auto"===o&&(h=e.direction);let y=i*e.tryUpdateLength(h),v=0,b=!0,x=null;for(let e=0,i=m.length;e<i;e++){let i=m[e],n=i.getLength(h),o=(y-v)/n;if(v+=n,o<0)break;if(f){if(i.originP1===i.originP2){x=i;continue}b=a(t,i,x,b,u,c,d),x=i}else{if(!i.defined){g=!0;continue}g&&t.moveTo(i.p0.x+u,i.p0.y+c,d),(0,s.w)(t,i,(0,r.VV)(o,1),l),g=!1}}}function l(t,e,i,r){let{offsetX:n=0,offsetY:s=0}=r||{},a=e?e.points[e.points.length-1]:i.points[0];t.moveTo(a.x+n,a.y+s),i.points.forEach(e=>{!1!==e.defined?t.lineTo(e.x+n,e.y+s):t.moveTo(e.x+n,e.y+s)})}function h(t,e,i,r){let{offsetX:n=0,offsetY:s=0}=r||{},{points:a}=i,o=[],l=0;for(let t=0;t<a.length;t++)!1===a[t].defined&&(l+1!==t&&o.slice(l,t),l=t);o.push(a),o.forEach((i,r)=>{var a,o,l,h;let u=e&&0===r?e.points[e.points.length-1]:i[0];t.moveTo(u.x+n,u.y+s),i.forEach(e=>{!1!==e.defined?t.lineTo(e.x+n,e.y+s):t.moveTo(e.x+n,e.y+s)});for(let e=i.length-1;e>=0;e--){let r=i[e];t.lineTo(null!=(a=r.x1)?a:r.x,null!=(o=r.y1)?o:r.y)}t.lineTo(null!=(l=u.x1)?l:u.x,null!=(h=u.y1)?h:u.y),t.closePath()})}},66187:function(t,e,i){"use strict";i.d(e,{w:()=>n});var r=i(25033);function n(t,e,i,n){if(!e.p1)return;let{offsetX:s=0,offsetY:a=0,offsetZ:o=0}=n||{};if(1===i)e.p2&&e.p3?t.bezierCurveTo(s+e.p1.x,a+e.p1.y,s+e.p2.x,a+e.p2.y,s+e.p3.x,a+e.p3.y,o):t.lineTo(s+e.p1.x,a+e.p1.y,o);else if(e.p2&&e.p3){let[n]=(0,r.m)(e,i);t.bezierCurveTo(s+n.p1.x,a+n.p1.y,s+n.p2.x,a+n.p2.y,s+n.p3.x,a+n.p3.y,o)}else{let r=e.getPointAt(i);t.lineTo(s+r.x,a+r.y,o)}}},8020:function(t,e,i){"use strict";i.d(e,{H:()=>r});class r{getLength(t){return null!=t?this.calcProjLength(t):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}},25033:function(t,e,i){"use strict";i.d(e,{A:()=>h,m:()=>l});var r=i(19498),n=i(8830),s=i(8020),a=i(97708),o=i(97792);function l(t,e){let{p0:i,p1:n,p2:s,p3:a}=t,l=(0,o.P)(i,n,s,a,e),u=r.HL.pointAtPP(i,n,e),c=r.HL.pointAtPP(n,s,e),d=r.HL.pointAtPP(s,a,e),p=r.HL.pointAtPP(u,c,e),f=r.HL.pointAtPP(c,d,e);return[new h(i,u,p,l),new h(l,f,d,a)]}class h extends s.H{constructor(t,e,i,r){super(),this.type=a.D5.CubicBezierCurve,this.p0=t,this.p1=e,this.p2=i,this.p3=r}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(t){if(!1!==this.defined)return(0,o.P)(this.p0,this.p1,this.p2,this.p3,t);throw Error("defined为false的点不能getPointAt")}calcLength(){return this._validPoint()?(0,o.Ci)(this.p0,this.p1,this.p2,this.p3,0):60}calcProjLength(t){return t===a.Nm.ROW?(0,n.Wn)(this.p0.x-this.p3.x):t===a.Nm.COLUMN?(0,n.Wn)(this.p0.y-this.p3.y):0}getAngleAt(t){let e=(0,n.Fp)(t-.01,0),i=(0,n.VV)(t+.01,1),r=this.getPointAt(e),s=this.getPointAt(i);return(0,n.fv)(s.y-r.y,s.x-r.x)}draw(t,e,i,r,n,s){if(t.moveTo(this.p0.x*r+e,this.p0.y*n+i),s>=1)t.bezierCurveTo(this.p1.x*r+e,this.p1.y*n+i,this.p2.x*r+e,this.p2.y*n+i,this.p3.x*r+e,this.p3.y*n+i);else if(s>0){let[a]=l(this,s);t.bezierCurveTo(a.p1.x*r+e,a.p1.y*n+i,a.p2.x*r+e,a.p2.y*n+i,a.p3.x*r+e,a.p3.y*n+i)}}includeX(t){let e=(0,n.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(0,n.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x);return t>=e&&t<=i}getYAt(t){let e=(0,n.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(t-e)/((0,n.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x)-e);return this.getPointAt(i).y}}},63915:function(t,e,i){"use strict";i.d(e,{d:()=>o,g:()=>l});var r=i(19498),n=i(8830),s=i(8020),a=i(97708);function o(t,e){let{p0:i,p1:n}=t,s=r.HL.pointAtPP(i,n,e);return[new l(i,s),new l(s,n)]}class l extends s.H{constructor(t,e){super(),this.type=a.D5.LineCurve,this.p0=t,this.p1=e}getPointAt(t){if(!1!==this.defined)return r.HL.pointAtPP(this.p0,this.p1,t);throw Error("defined为false的点不能getPointAt")}getAngleAt(t){return null==this.angle&&(this.angle=(0,n.fv)(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?r.HL.distancePP(this.p0,this.p1):60}calcProjLength(t){return t===a.Nm.ROW?(0,n.Wn)(this.p0.x-this.p1.x):t===a.Nm.COLUMN?(0,n.Wn)(this.p0.y-this.p1.y):0}draw(t,e,i,r,n,s){if(t.moveTo(this.p0.x*r+e,this.p0.y*n+i),s>=1)t.lineTo(this.p1.x*r+e,this.p1.y*n+i);else if(s>0){let a=this.getPointAt(s);t.lineTo(a.x*r+e,a.y*n+i)}}includeX(t){return t>=this.p0.x&&t<=this.p1.x||t>=this.p1.x&&t<=this.p0.x}getYAt(t){if(this.includeX(t)){let e=this.p0,i=this.p1;this.p0.x>this.p1.x&&(e=this.p1,i=this.p0);let r=(t-e.x)/(i.x-e.x);return e.y+r*(i.y-e.y)}return 1/0}}},23436:function(t,e,i){"use strict";i.d(e,{X0:()=>M});var r=i(8830),n=i(19498),s=i(97708),a=i(25033),o=i(63915);class l{get endX(){return this._lastX}get endY(){return this._lastY}constructor(t,e){this.init(t,e)}init(t,e){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=t,this.direction=e,this.curves=[]}bezierCurveTo(t,e,i,r,s,o,l,h){let u=new a.A(new n.E9(this._lastX,this._lastY),new n.E9(t,e),new n.E9(i,r),new n.E9(s,o));u.originP1=this._lastOriginP,u.originP2=h,u.defined=l,this.curves.push(u),this._lastX=s,this._lastY=o,this._lastOriginP=h}closePath(){if(this.curves.length<2)return;let t=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,t.defined,this._startOriginP)}ellipse(){throw Error("SegContext不支持调用ellipse")}lineTo(t,e,i,r){let n=this.addLinearCurve(t,e,i,this._lastOriginP,r);this.curves.push(n),this._lastX=t,this._lastY=e,this._lastOriginP=r}moveTo(t,e,i){return this._lastX=this._startX=t,this._lastY=this._startY=e,this._lastOriginP=i,this._startOriginP=i,this}quadraticCurveTo(t,e,i,r){throw Error("SegContext不支持调用quadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(t){return this.getLength(t)}addLinearCurve(t,e,i,r,s){let a=new o.g(new n.E9(this._lastX,this._lastY),new n.E9(t,e));return a.originP1=r,a.originP2=s,a.defined=i,a}getPointAt(t){throw Error("暂未实现")}getCurveLengths(){return[]}getLength(t){var e,i;if(t===s.Nm.COLUMN){if(!this.curves.length)return 0;let t=this.curves[0],i=this.curves[this.curves.length-1],n=null!=(e=i.p3)?e:i.p1;return(0,r.Wn)(t.p0.y-n.y)}if(t===s.Nm.ROW){if(!this.curves.length)return 0;let t=this.curves[0],e=this.curves[this.curves.length-1],n=null!=(i=e.p3)?i:e.p1;return(0,r.Wn)(t.p0.x-n.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce((t,e)=>t+e.getLength(),0)),this.length}}class h extends l{bezierCurveTo(t,e,i,r,n,s,a,o){return super.bezierCurveTo(e,t,r,i,s,n,a,o)}lineTo(t,e,i,r){return super.lineTo(e,t,i,r)}moveTo(t,e,i){return super.moveTo(e,t,i)}clear(){return super.clear()}}function u(t,e,i=1){let r=!1;for(let i=0,n=e.length;i<=n;i++)i>=n===r&&((r=!r)?t.lineStart():t.lineEnd()),r&&t.point(e[i])}function c(t,e,i){let n=null!=e?e:(0,r.Wn)(i[i.length-1].x-i[0].x)>(0,r.Wn)(i[i.length-1].y-i[0].y)?s.Nm.ROW:s.Nm.COLUMN;return"monotoneY"===t?new h(t,n):new l(t,n)}class d{constructor(t,e){this.context=t,e&&(this.startPoint=e)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t)}this._lastDefined=t.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function p(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;let n=c("linear",i,t);return u(new d(n,r),t,1),n}function f(t,e,i,r,n){t.context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+i)/6,r,t.lastPoint1)}class g{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){2===this._point&&f(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;break;default:f(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}function m(t,e,i){let r=t._x1-t._x0,n=e-t._x1,s=(t._y1-t._y0)/(r||Number(n<0&&-0)),a=(i-t._y1)/(n||Number(r<0&&-0));return((s<0?-1:1)+(a<0?-1:1))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs((s*n+a*r)/(r+n)))||0}function y(t,e){let i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function v(t,e,i,r,n){let s=t._x0,a=t._y0,o=t._x1,l=t._y1,h=(o-s)/3;t.context.bezierCurveTo(s+h,a+h*e,o-h,l-h*i,o,l,r,t.lastPoint1)}class b{constructor(t,e){this.context=t,this.startPoint=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:v(this,this._t0,y(this,this._t0),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1)}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let e=NaN,i=t.x,r=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,r,!1!==this._lastDefined1&&!1!==this._lastDefined2,t):this.context.moveTo(i,r,t);break;case 1:this._point=2;break;case 2:this._point=3,v(this,y(this,e=m(this,i,r)),e,!1!==this._lastDefined1&&!1!==this._lastDefined2,t);break;default:v(this,this._t0,e=m(this,i,r),!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=r,this._t0=e,this._lastDefined1=this._lastDefined2,this._lastDefined2=!1!==t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}class x extends b{constructor(t,e){super(t,e)}point(t){return super.point({y:t.x,x:t.y,defined:t.defined})}}class _{constructor(t,e=.5,i){this.context=t,this._t=e,this.startPoint=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&2===this._point&&this.context.lineTo(this._x,this._y,!1!==this._lastDefined,this.lastPoint),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(t){let e=t.x,i=t.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t):this.context.moveTo(e,i,t);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,i,!1!==this._lastDefined&&!1!==t.defined,this.lastPoint),this.context.lineTo(e,i,!1!==this._lastDefined&&!1!==t.defined,t);else{let r=this._x*(1-this._t)+e*this._t;.5===this._t?this.context.lineTo(r,this._y,!1!==this._lastDefined,this.lastPoint):this.context.lineTo(r,this._y,!1!==this._lastDefined&&!1!==t.defined,this.lastPoint),this.context.lineTo(r,i,!1!==this._lastDefined&&!1!==t.defined,t)}}this._lastDefined=t.defined,this._x=e,this._y=i,this.lastPoint=t}tryUpdateLength(){return this.context.tryUpdateLength()}}class w extends _{lineEnd(){this.context.closePath()}}function S(t,e,i={}){let{direction:n,startPoint:a}=i;if(t.length<2-Number(!!a))return null;let o=new l("step",null!=n?n:(0,r.Wn)(t[t.length-1].x-t[0].x)>(0,r.Wn)(t[t.length-1].y-t[0].y)?s.Nm.ROW:s.Nm.COLUMN);return u(new _(o,e,a),t,1),o}class A extends d{lineEnd(){this.context.closePath()}}function C(t,e,i,n,s){let a=t._x1,o=t._y1,l=t._x2,h=t._y2;if(t._l01_a>r.Ho){let e=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,i=3*t._l01_a*(t._l01_a+t._l12_a);a=(a*e-t._x0*t._l12_2a+t._x2*t._l01_2a)/i,o=(o*e-t._y0*t._l12_2a+t._y2*t._l01_2a)/i}if(t._l23_a>r.Ho){let r=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,n=3*t._l23_a*(t._l23_a+t._l12_a);l=(l*r+t._x1*t._l23_2a-e*t._l12_2a)/n,h=(h*r+t._y1*t._l23_2a-i*t._l12_2a)/n}t.context.bezierCurveTo(a,o,l,h,t._x2,t._y2,n,t.lastPoint1)}function D(t,e){return function(i,r,n={}){let{direction:s,startPoint:a}=n;if(i.length<2-Number(!!a))return null;if(i.length<3-Number(!!a))return p(i,n);let o=c(t,s,i);return u(new e(o,r,a),i,2),o}}let T=D("catmullRom",class{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x2,this._y2,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:this.point({x:this._x2,y:this._y2})}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(t){let{x:e,y:i}=t;if(this._point){let t=this._x2-e,r=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2):this.context.moveTo(e,i);break;case 1:this._point=2;break;case 2:this._point=3;default:C(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}}),B=D("catmullRomClosed",class{constructor(t,e=.5,i){this.context=t,this.startPoint=i,this._alpha=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 1:this.context.moveTo(this._x3,this._y3,this.lastPoint1),this.context.closePath();break;case 2:this.context.lineTo(this._x3,this._y3,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),this.context.closePath();break;case 3:this.point({x:this._x3,y:this._y3}),this.point({x:this._x4,y:this._y4}),this.point({x:this._x5,y:this._y5})}}point(t){let{x:e,y:i}=t;if(this._point){let t=this._x2-e,r=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=i;break;case 1:this._point=2,this.context.moveTo(this._x4=e,this._y4=i,t);break;case 2:this._point=3,this._x5=e,this._y5=i;break;default:C(this,e,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=t.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=t}tryUpdateLength(){return this.context.tryUpdateLength()}});function M(t,e,i){var n,a;switch(e){case"linear":default:return p(t,i);case"basis":return function(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;if(t.length<3-Number(!!r))return p(t,e);let n=c("basis",i,t);return u(new g(n,r),t,2),n}(t,i);case"monotoneX":return function(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;if(t.length<3-Number(!!r))return p(t,e);let n=c("monotoneX",i,t);return u(new b(n,r),t,2),n}(t,i);case"monotoneY":return function(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;if(t.length<3-Number(!!r))return p(t,e);let n=c("monotoneY",i,t);return u(new x(n,r),t,2),n}(t,i);case"step":return S(t,.5,i);case"stepClosed":return function(t,e,i={}){let{direction:n,startPoint:a}=i;if(t.length<2-Number(!!a))return null;let o=new l("step",null!=n?n:(0,r.Wn)(t[t.length-1].x-t[0].x)>(0,r.Wn)(t[t.length-1].y-t[0].y)?s.Nm.ROW:s.Nm.COLUMN);return u(new w(o,.5,a),t,1),o}(t,0,i);case"stepBefore":return S(t,0,i);case"stepAfter":return S(t,1,i);case"catmullRom":return T(t,null!=(n=null==i?void 0:i.curveTension)?n:.5,i);case"catmullRomClosed":return B(t,null!=(a=null==i?void 0:i.curveTension)?a:.5,i);case"linearClosed":return function(t,e={}){let{direction:i,startPoint:r}=e;if(t.length<2-Number(!!r))return null;let n=c("linear",i,t);return u(new A(n,r),t,1),n}(t,i)}}},90383:function(t,e,i){"use strict";i.d(e,{U:()=>o});var r=i(8830),n=i(4654),s=i(99051);let a=r.pi/2;function o(t,e,i,l,h,u,c=!0,d){let p;if(Array.isArray(c)&&(d=c,c=!0),l<0&&(e+=l,l=-l),h<0&&(i+=h,h=-h),(0,n.Z)(u,!0))p=[u=(0,r.Wn)(u),u,u,u];else if(Array.isArray(u)){let t,e,i=u;switch(i.length){case 0:p=[0,0,0,0];break;case 1:p=[t=(0,r.Wn)(i[0]),t,t,t];break;case 2:case 3:p=[t=(0,r.Wn)(i[0]),e=(0,r.Wn)(i[1]),t,e];break;default:(p=i)[0]=(0,r.Wn)(p[0]),p[1]=(0,r.Wn)(p[1]),p[2]=(0,r.Wn)(p[2]),p[3]=(0,r.Wn)(p[3])}}else p=[0,0,0,0];if(l<0||p[0]+p[1]+p[2]+p[3]<1e-12)return t.rect(e,i,l,h);let[f,g,m,y]=[[e,i],[e+l,i],[e+l,i+h],[e,i+h]],v=Math.min(l/2,h/2),b=[Math.min(v,p[0]),Math.min(v,p[1]),Math.min(v,p[2]),Math.min(v,p[3])],x=[f[0]+b[0],f[1]],_=[f[0],f[1]+b[0]],w=[g[0]-b[1],g[1]],S=[g[0],g[1]+b[1]],A=[m[0]-b[2],m[1]],C=[m[0],m[1]-b[2]],D=[y[0]+b[3],y[1]],T=[y[0],y[1]-b[3]];if(t.moveTo(x[0],x[1]),c){if(d&&d[0]?d[0](x[0],x[1],w[0],w[1]):t.lineTo(w[0],w[1]),!(0,s.h6)(w,S)){d&&d[0]&&t.moveTo(w[0],w[1]);let e=w[0],i=w[1]+b[1];t.arc(e,i,b[1],-a,0,!1)}if(d&&d[1]?d[1](S[0],S[1],C[0],C[1]):t.lineTo(C[0],C[1]),!(0,s.h6)(A,C)){let e=C[0]-b[2],i=C[1];d&&d[1]&&t.moveTo(C[0],C[1]),t.arc(e,i,b[2],0,a,!1)}if(d&&d[2]?d[2](A[0],A[1],D[0],D[1]):t.lineTo(D[0],D[1]),!(0,s.h6)(D,T)){let e=D[0],i=D[1]-b[3];d&&d[2]&&t.moveTo(D[0],D[1]),t.arc(e,i,b[3],a,r.pi,!1)}if(d&&d[3]?d[3](T[0],T[1],_[0],_[1]):t.lineTo(_[0],_[1]),!(0,s.h6)(x,_)){let e=x[0],i=x[1]+b[0];d&&d[3]&&t.moveTo(_[0],_[1]),t.arc(e,i,b[0],r.pi,r.pi+a,!1)}}else d&&d[0]?d[0](x[0],x[1],w[0],w[1]):t.lineTo(w[0],w[1]),d&&d[1]?d[1](w[0],w[1],A[0],A[1]):t.lineTo(A[0],A[1]),d&&d[2]?d[2](A[0],A[1],D[0],D[1]):t.lineTo(D[0],D[1]),d&&d[2]?d[2](D[0],D[1],x[0],x[1]):t.lineTo(x[0],x[1]);return d||t.closePath(),t}},54161:function(t,e,i){"use strict";function r(t,e,i){let r={},n=[];return t.forEachChildren(t=>{let{zIndex:i=e}=t.attribute;r[i]?r[i].push(t):(r[i]=[t],n.push(i))},i),n.sort((t,e)=>i?e-t:t-e),{childMap:r,zIdxArray:n}}function n(t,e,i,s=!1,a=!1){let o=!1;if(a)o=!0;else{let i;t.forEachChildren((t,r)=>{let{zIndex:n=e}=t.attribute;if(0===r)i=n;else if(i!==n)return o=!0,!0;return!1},s)}if(o){let{childMap:n,zIdxArray:o}=r(t,e,s),l=!1;for(let t=0;t<o.length&&!l;t++){let e=n[o[t]];a&&e.sort((t,e)=>{var i,r;return(s?-1:1)*((null!=(i=e.attribute.z)?i:0)-(null!=(r=t.attribute.z)?r:0))});for(let t=0;t<e.length;t++)if(i(e[t],t)){l=!0;break}}}else t.forEachChildren(i,s)}function s(t,e,i,r=!1){var n,a,o,l;return n=this,a=void 0,o=void 0,l=function*(){yield t.forEachChildrenAsync(i,r)},new(o||(o=Promise))(function(t,e){function i(t){try{s(l.next(t))}catch(t){e(t)}}function r(t){try{s(l.throw(t))}catch(t){e(t)}}function s(e){var n;e.done?t(e.value):((n=e.value)instanceof o?n:new o(function(t){t(n)})).then(i,r)}s((l=l.apply(n,a||[])).next())})}function a(t,e,i,n=!1){let s=!1;t.forEachChildren((t,e)=>{let{zIndex:r=i}=t.attribute;if(0===e);else if(void 0!==r)return s=!0,!0;return!1},n);let o=null,l=!1;if(s){let{childMap:s,zIdxArray:a}=r(t,i,n),h=!1;for(let t=0;t<a.length&&!h;t++){let i=s[a[t]];for(let t=0;t<i.length;t++){if(l){h=!0,o=i[t];break}i[t]._uid!==e||(l=!0)}}}else t.forEachChildren(t=>l?(o=t,!0):(t._uid===e&&(l=!0),!1),n);return o}i.d(e,{Ud:()=>s,kD:()=>n,qA:()=>a})},52807:function(t,e,i){"use strict";function r(t,e){return"end"===t||"right"===t?-e:"center"===t?-e/2:0}function n(t,e,i,r=0){return"middle"===t?-e/2:"top"===t?0:"bottom"===t?r-e:t&&"alphabetic"!==t?0:(i||(i=e),-(e-i)/2-.79*i)}i.d(e,{js:()=>r,nV:()=>n})},19626:function(t,e,i){"use strict";i.d(e,{Dn:()=>c,SA:()=>v,VA:()=>S,dZ:()=>_,dj:()=>p,hT:()=>b,jx:()=>m,q9:()=>y});var r,n,s=i(63778),a=i(95723),o=i(8830),l=i(19498),h=i(83624);(r=n||(n={}))[r.Top=1]="Top",r[r.Right=2]="Right",r[r.Bottom=4]="Bottom",r[r.Left=8]="Left",r[r.ALL=15]="ALL";let u=[!1,!1,!1,!1],c=t=>{var e;let i=!0;if((0,s.Z)(t,!0)){for(let r=0;r<4;r++)u[r]=t,i&&(i=!(null!=(e=u[r])&&!e));i=t}else if(Array.isArray(t))for(let e=0;e<4;e++)u[e]=!!t[e],i&&(i=!!u[e]);else u[0]=!1,u[1]=!1,u[2]=!1,u[3]=!1;return{isFullStroke:i,stroke:u}},d=[0,0,0,0],p=t=>t?(0,a.Z)(t)?0===t.length?0:1===t.length?t[0]:2===t.length?(d[0]=t[0],d[2]=t[0],d[1]=t[1],d[3]=t[1],d):t:t:0,f=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],g=[1,2,3,0,1,2,3,0];function m(t,e,i,r){for(;t>=o.f7;)t-=o.f7;for(;t<0;)t+=o.f7;for(;t>e;)e+=o.f7;f[0].x=i,f[1].y=i,f[2].x=-i,f[3].y=-i;let n=Math.ceil(t/o.ou)%4,s=Math.ceil(e/o.ou)%4;if(r.add((0,o.mC)(t)*i,(0,o.O$)(t)*i),r.add((0,o.mC)(e)*i,(0,o.O$)(e)*i),n!==s||e-t>o.pi){let t=!1;for(let e=0;e<g.length;e++)if(t||n!==g[e]){if(t&&s===g[e])break;if(t){let t=f[g[e]];r.add(t.x,t.y)}}else{t=!0;let e=f[n];r.add(e.x,e.y)}}}function y(t,e,i){let{x:r,y:n}=(0,o.KU)(t.x,t.y,e.x,e.y,i),{x:s,y:a}=(0,o.KU)(t.x1,t.y1,e.x1,e.y1,i),h=new l.E9(r,n,s,a);return h.defined=e.defined,h}function v(t,e,i){if(!t||!e)return[];Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);let r=[];if(t.length>e.length){r=e.map(t=>{let e=new l.E9(t.x,t.y,t.x1,t.y1);return e.defined=t.defined,e});for(let n=0;n<e.length;n++)r[n]=y(t[n],e[n],i)}else{r=e.map(t=>{let e=new l.E9(t.x,t.y,t.x1,t.y1);return e.defined=t.defined,e});for(let n=0;n<t.length;n++)r[n]=y(t[n],e[n],i)}return r}function b(t,e){if((0,a.Z)(t)){let i;for(let r=0;r<t.length&&void 0===i;r++)i=t[r][e];return i}return t[e]}class x{constructor(t=x.TimeOut){this.durations=[],this.timeout=t,this.lastDate=0,this.durationsListThreshold=30}call(t){return this.lastDate=Date.now(),setTimeout(()=>{this.appendDuration(Date.now()-this.lastDate),t(0)},this.timeout,!0)}clear(t){clearTimeout(t)}appendDuration(t){this.durations.push(t),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((t,e)=>t+e,0)/this.durations.length,1e3/60),1e3/30)}}x.TimeOut=1e3/60;let _=new x,w=(t,e)=>(0,h.Z)(t)&&"%"===t[t.length-1]?e*(Number.parseFloat(t.substring(0,t.length-1))/100):t,S=(t,e)=>{let i=w(t,e);return isNaN(i)?i:Math.max(e,i)}},77067:function(t,e,i){"use strict";i.d(e,{D0:()=>r,iR:()=>s,y2:()=>n});let r=Symbol.for("EnvContribution"),n=Symbol.for("VGlobal"),s="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,'-apple-system',segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol"},34505:function(t,e,i){"use strict";let r;i.d(e,{n:()=>g});var n=i(27753);let s={Singleton:"Singleton",Transient:"Transient"},a={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid"};class o{constructor(t,e){this.id=n.R.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=a.Invalid,this.constraint=t=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){let t=new o(this.serviceIdentifier,this.scope);return t.activated=t.scope===s.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.provider=this.provider,t.constraint=this.constraint,t.cache=this.cache,t}}var l=i(66512),h=i(47070);class u{getConstructorMetadata(t){return{compilerGeneratedMetadata:h.Z.getMetadata(l.FL,t),userGeneratedMetadata:h.Z.getMetadata(l.LD,t)||{}}}getPropertiesMetadata(t){throw Error("暂未实现")}}var c=i(62149);let d=(r=l.vO,t=>{let e=e=>{if(null==e)return!1;if(e.key===r&&e.value===t)return!0;if(null==e.constructorArgsMetadata)return!1;let i=e.constructorArgsMetadata;for(let e=0;e<i.length;e++)if(i[e].key===r&&i[e].value===t)return!0;return!1};return e.metaData=new c.S(r,t),e});class p{constructor(t){this._binding=t}inRequestScope(){throw Error("暂未实现")}inSingletonScope(){return this._binding.scope=s.Singleton,this}inTransientScope(){return this._binding.scope=s.Transient,this}whenTargetNamed(t){return this._binding.constraint=d(t),this}}class f{constructor(t){this._binding=t}to(t){return this._binding.type=a.Instance,this._binding.implementationType=t,new p(this._binding)}toSelf(){let t=this._binding.serviceIdentifier;return this.to(t)}toDynamicValue(t){return this._binding.type=a.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new p(this._binding)}toConstantValue(t){return this._binding.type=a.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=s.Singleton,new p(this._binding)}toFactory(t){return this._binding.type=a.Factory,this._binding.factory=t,this._binding.scope=s.Singleton,new p(this._binding)}toService(t){this.toDynamicValue(e=>e.container.get(t))}}let g=new class{constructor(t){let e=t||{};e.defaultScope=e.defaultScope||s.Transient,this.options=e,this.id=n.R.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new u}load(t){let e=this._getContainerModuleHelpersFactory()(t.id);t.registry(e.bindFunction,e.unbindFunction,e.isboundFunction,e.rebindFunction)}get(t){let e=this._getNotAllArgs(t,!1);return this._get(e)}getAll(t){let e=this._getAllArgs(t);return this._get(e)}getTagged(t,e,i){let r=this._getNotAllArgs(t,!1,e,i);return this._get(r)}getNamed(t,e){return this.getTagged(t,l.vO,e)}isBound(t){return this._bindingDictionary.has(t)}bind(t){let e=new o(t,this.options.defaultScope),i=this._bindingDictionary.get(t)||[];return i.push(e),this._bindingDictionary.set(t,i),new f(e)}unbind(t){this._bindingDictionary.delete(t)}rebind(t){return this.unbind(t),this.bind(t)}_getContainerModuleHelpersFactory(){let t=(t,e)=>{t._binding.moduleId=e},e=e=>i=>{let r=this.bind(i);return t(r,e),r},i=()=>t=>this.unbind(t),r=()=>t=>this.isBound(t),n=e=>i=>{let r=this.rebind(i);return t(r,e),r};return t=>({bindFunction:e(t),isboundFunction:r(),rebindFunction:n(t),unbindFunction:i(),unbindAsyncFunction:t=>null})}_getNotAllArgs(t,e,i,r){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:i,value:r}}_getAllArgs(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}}_get(t){let e=[];return this._bindingDictionary.get(t.serviceIdentifier).filter(e=>e.constraint(t)).forEach(t=>{e.push(this._resolveFromBinding(t))}),t.isMultiInject||1!==e.length?e:e[0]}_getChildRequest(t){let e=t.implementationType,{userGeneratedMetadata:i}=this._metadataReader.getConstructorMetadata(e),r=Object.keys(i),n=[];for(let t=0;t<r.length;t++){let e=i[t],r={};e.forEach(t=>{r[t.key]=t.value});let s={inject:r[l.B8],multiInject:r[l.Lc]},a=s.inject||s.multiInject,o={serviceIdentifier:a,constructorArgsMetadata:e},h=(this._bindingDictionary.get(a)||[]).filter(t=>t.constraint(o));if(h.length){let t={injectIdentifier:a,metadata:e,bindings:h};n.push(t)}}return n}_resolveFromBinding(t){let e=this._getResolvedFromBinding(t);return this._saveToScope(t,e),e}_getResolvedFromBinding(t){let e;switch(t.type){case a.ConstantValue:case a.Function:e=t.cache;break;case a.Instance:e=this._resolveInstance(t,t.implementationType);break;default:e=t.dynamicValue({container:this})}return e}_resolveInstance(t,e){if(t.activated)return t.cache;let i=this._getChildRequest(t);return this._createInstance(e,i)}_createInstance(t,e){return e.length?new t(...this._resolveRequests(e)):new t}_resolveRequests(t){return t.map(t=>t.bindings.length>1?t.bindings.map(t=>this._resolveFromBinding(t)):this._resolveFromBinding(t.bindings[0]))}_saveToScope(t,e){t.scope===s.Singleton&&(t.cache=e,t.activated=!0)}}},90881:function(t,e,i){"use strict";i.d(e,{Gp:()=>r,IT:()=>s,XJ:()=>l,kj:()=>a,no:()=>n,ym:()=>o});let r=Symbol.for("TransformUtil"),n=Symbol.for("GraphicUtil"),s=Symbol.for("LayerService"),a=Symbol.for("StaticLayerHandlerContribution"),o=Symbol.for("DynamicLayerHandlerContribution"),l=Symbol.for("VirtualLayerHandlerContribution")},90004:function(t,e,i){"use strict";i.d(e,{z:()=>s});var r=i(34865),n=i(63401);let s=class{configure(t,...e){t.env===this.type&&t.setActiveEnvContribution(this)}getNativeAABBBounds(t){return new n.FB}removeDom(t){return!1}createDom(t){return null}updateDom(t,e){return!1}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(t){return document.getElementById(t)}getRootElement(){return document.body}loadJson(t){let e=fetch(t).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(t){return fetch(t).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadBlob(t){return fetch(t).then(t=>t.blob()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}getElementTop(t,e){return 0}getElementLeft(t,e){return 0}getElementTopLeft(t,e){return{top:0,left:0}}loadFont(t,e,i){var r,n,s,a;return r=this,n=void 0,a=function*(){return{loadState:"fail"}},new(s=void 0,s=Promise)(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof s?r:new s(function(t){t(r)})).then(i,o)}l((a=a.apply(r,n||[])).next())})}isMacOS(){return!1}copyToClipBoard(t){return Promise.resolve(null)}};s=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)()],s)},79861:function(t,e,i){"use strict";i.d(e,{j:()=>n});var r=i(20533);class n{constructor(t,e,i){this.fontFamily=t,this.textOptions=e,this.textMeasure=i}LayoutBBox(t,e,i,r){if(t.xOffset="left"===e||"start"===e?0:"center"===e?-(t.width/2):"right"===e||"end"===e?-t.width:0,"top"===i)t.yOffset=0;else if("middle"===i)t.yOffset=-(t.height/2);else if("alphabetic"===i){let e=.79;if(1===r.length){let t=r[0];e=t.ascent/(t.ascent+t.descent)}t.yOffset=-(t.height*e)}else t.yOffset=-t.height;return t}GetLayoutByLines(t,e,i,n,s="",a,o){let{lineWidth:l,suffixPosition:h="end",measureMode:u=r.r.actualBounding,keepCenterInLine:c=!1}=null!=o?o:{};t=t.map(t=>t.toString());let d=[],p=[0,0];if("number"==typeof l&&l!==1/0){let e;for(let i=0,r=t.length;i<r;i++){let r=this.textMeasure.measureTextPixelADscentAndWidth(t[i],this.textOptions,u),n=t[i].toString();if(r.width>l){let r=this.textMeasure.clipTextWithSuffix(t[i],this.textOptions,l,s,a,h);n=r.str,e=r.width}else e=r.width;d.push({str:n,width:e,ascent:r.ascent,descent:r.descent,keepCenterInLine:c})}p[0]=l}else{let e,i,r=0;for(let n=0,s=t.length;n<s;n++){i=t[n];let s=this.textMeasure.measureTextPixelADscentAndWidth(t[n],this.textOptions,u);r=Math.max(r,e=s.width),d.push({str:i,width:e,ascent:s.ascent,descent:s.descent,keepCenterInLine:c})}p[0]=r}p[1]=d.length*n,p[0]=d.reduce((t,e)=>Math.max(t,e.width),0);let f={xOffset:0,yOffset:0,width:p[0],height:p[1]};return this.LayoutBBox(f,e,i,d),this.layoutWithBBox(f,d,e,i,n)}layoutWithBBox(t,e,i,r,n){let s=[0,0],a=e.length*n;"top"===r||("middle"===r?s[1]=(t.height-a)/2:"bottom"===r&&(s[1]=t.height-a));for(let a=0;a<e.length;a++)this.lineOffset(t,e[a],i,r,n,s);return{bbox:t,lines:e,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:n,textAlign:i,textBaseline:r}}lineOffset(t,e,i,r,n,s){if("left"===i||"start"===i?e.leftOffset=0:"center"===i?e.leftOffset=(t.width-e.width)/2:"right"!==i&&"end"!==i||(e.leftOffset=t.width-e.width),e.topOffset=n/2+(e.ascent-e.descent)/2+s[1],!e.keepCenterInLine){let t=e.ascent+e.descent+0;if(t<n-0&&("bottom"===r?e.topOffset+=(n-t)/2:"top"===r&&(e.topOffset-=(n-t)/2)),"alphabetic"===r){let t=n/(e.ascent+e.descent);e.topOffset=n/2+(e.ascent-e.descent)/2*t+s[1]}}return s[1]+=n,e}}},31659:function(t,e,i){"use strict";i.d(e,{j:()=>h,f:()=>u});var r=i(34865),n=i(20533),s=i(82265),a=i(2105),o=i(85476);let l=class{constructor(){this.id="ATextMeasure"}configure(t,e){this.canvas=t.canvas,this.context=t.context,t.bindTextMeasure(this)}_measureTextWithoutAlignBaseline(t,e,i){this.context.setTextStyleWithoutAlignBaseline(e);let r=this.context.measureText(t);return i?this.compatibleMetrics(r,e):r}_measureTextWithAlignBaseline(t,e,i){this.context.setTextStyle(e);let r=this.context.measureText(t);return i?this.compatibleMetrics(r,e):r}compatibleMetrics(t,e){if(null==t.actualBoundingBoxAscent||null==t.actualBoundingBoxDescent||null==t.fontBoundingBoxAscent||null==t.fontBoundingBoxDescent){t={width:t.width};let{ascent:i,descent:r}=this.measureTextBoundADscentEstimate(e);t.actualBoundingBoxAscent=i,t.actualBoundingBoxDescent=r,t.fontBoundingBoxAscent=i,t.fontBoundingBoxDescent=r}if(null==t.actualBoundingBoxLeft||null==t.actualBoundingBoxRight){t={width:t.width,actualBoundingBoxAscent:t.actualBoundingBoxAscent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent};let{left:i,right:r}=this.measureTextBoundLeftRightEstimate(e);t.actualBoundingBoxLeft=i,t.actualBoundingBoxRight=r}return t}estimate(t,{fontSize:e=s.T5.fontSize}){let i=0,r=0;for(let e=0;e<t.length;e++)128>t.charCodeAt(e)?i++:r++;return{width:~~(.8*i*e+r*e),height:e}}measureTextWidth(t,e,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e)).width:this.estimate(t,e).width}measureTextBoundsWidth(t,e,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e)).width:this.estimate(t,e).width}measureTextBoundsLeftRight(t,e,i){return this.context?{left:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).actualBoundingBoxLeft,right:i.actualBoundingBoxRight}:this.measureTextBoundLeftRightEstimate(e)}measureTextPixelHeight(t,e,i){var r;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e,!0)).actualBoundingBoxAscent-i.actualBoundingBoxDescent):null!=(r=e.fontSize)?r:s.q9.fontSize}measureTextPixelADscent(t,e,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent}:this.measureTextBoundADscentEstimate(e)}measureTextBoundHieght(t,e,i){var r;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(t,e,!0)).fontBoundingBoxAscent-i.fontBoundingBoxDescent):null!=(r=e.fontSize)?r:s.q9.fontSize}measureTextBoundADscent(t,e,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(t,e,!0)).fontBoundingBoxAscent,descent:i.fontBoundingBoxDescent}:this.measureTextBoundADscentEstimate(e)}measureTextBoundADscentEstimate(t){var e;let i=null!=(e=t.fontSize)?e:s.q9.fontSize;return{ascent:.79*i,descent:.21*i}}measureTextBoundLeftRightEstimate(t){var e;let i=null!=(e=t.fontSize)?e:s.q9.fontSize,{textAlign:r}=t;return"center"===r?{left:i/2,right:i/2}:"right"===r||"end"===r?{left:i,right:0}:{left:0,right:i}}measureTextPixelADscentAndWidth(t,e,i){if(!this.context)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(e)),{width:this.estimate(t,e).width});let r=this._measureTextWithoutAlignBaseline(t,e,!0);if(i===n.r.actualBounding)return{ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,width:r.width};if(i===n.r.estimate)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(e)),{width:r.width});if(i===n.r.fontBounding){let t=r.fontBoundingBoxAscent,e=r.fontBoundingBoxDescent;if(r.actualBoundingBoxDescent&&e<r.actualBoundingBoxDescent){let i=r.actualBoundingBoxDescent-e;e+=i,t-=i}else if(r.actualBoundingBoxAscent&&t<r.actualBoundingBoxAscent){let i=r.actualBoundingBoxAscent-t;t+=i,e-=i}return{ascent:t,descent:e,width:r.width}}return{ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,width:r.width}}measureText(t,e){return this.context?(this.context.setTextStyleWithoutAlignBaseline(e),this.context.measureText(t)):this.estimate(t,e)}clipTextVertical(t,e,i,r){if(0===t.length)return{verticalList:t,width:0};let{fontSize:n=12}=e;t.forEach(t=>{t.width=0===t.direction?n:this.measureTextWidth(t.text,e)});let s=[],o=0,l=0;for(;l<t.length&&o+t[l].width<i;l++)o+=t[l].width,s.push(t[l]);if(t[l]&&t[l].text.length>1){let n=this._clipText(t[l].text,e,i-o,0,t[l].text.length-1,"end",!1);if(r&&n.str!==t[l].text){let i="",r=0;for(let e=0;e<l;e++){let n=t[e];i+=n.text,r+=n.text.length}i+=t[l].text;let s=r+n.str.length,o=(0,a.SZ)(i,s);(o-=r)!=n.str.length-1&&(n.str=n.str.substring(0,o),n.width=this.measureTextWidth(n.str,e))}s.push(Object.assign(Object.assign({},t[l]),{text:n.str,width:n.width})),o+=n.width}return{verticalList:s,width:o}}clipText(t,e,i,r,n){if(0===t.length)return{str:"",width:0};let s=this.measureTextWidth(t,e);if(s<=i)return{str:t,width:s};if((s=this.measureTextWidth(t[0],e))>i)return{str:"",width:0};let o=this._clipText(t,e,i,0,t.length-1,"end",!1);if(r&&o.str!==t){let i=(0,a.SZ)(t,o.str.length,n);i!==o.str.length&&(i>o.str.length&&(o.wordBreaked=i,i=o.str.length),o.str=t.substring(0,i),o.width=this.measureTextWidth(o.str,e))}return o}_clipText(t,e,i,r,n,s,a){let o;if("start"===s)o=this._clipTextStart(t,e,i,r,n),a&&(o.result=a+o.str);else if("middle"===s){let r=this._clipTextMiddle(t,e,i,"","",0,0,1);o={str:"none",width:r.width,result:r.left+a+r.right}}else o=this._clipTextEnd(t,e,i,r,n),a&&(o.result=o.str+a);return o}_clipTextEnd(t,e,i,r,n){let s;if(r===n){o.Y.getInstance().warn(`【_clipTextEnd】不应该走到这里${t}, ${r}, ${n}`);let i=t.substring(0,n+1);return{str:i,width:this.measureTextWidth(i,e)}}let a=Math.floor((r+n)/2),l=t.substring(0,a+1),h=this.measureTextWidth(l,e);if(h>i){if(l.length<=1)return{str:"",width:0};let n=t.substring(0,a);return(s=this.measureTextWidth(n,e))<=i?{str:n,width:s}:this._clipTextEnd(t,e,i,r,a)}if(h<i){if(a>=t.length-1)return{str:t,width:this.measureTextWidth(t,e)};let r=t.substring(0,a+2);return(s=this.measureTextWidth(r,e))>=i?{str:l,width:h}:this._clipTextEnd(t,e,i,a,n)}return{str:l,width:h}}_clipTextStart(t,e,i,r,n){let s,a=Math.ceil((r+n)/2),o=t.substring(a-1,t.length),l=this.measureTextWidth(o,e);if(l>i){if(o.length<=1)return{str:"",width:0};let r=t.substring(a,t.length);return(s=this.measureTextWidth(r,e))<=i?{str:r,width:s}:this._clipTextStart(t,e,i,a,t.length)}if(l<i){if(a<=0)return{str:t,width:this.measureTextWidth(t,e)};let n=t.substring(a-2,t.length);return(s=this.measureTextWidth(n,e))>=i?{str:o,width:l}:this._clipTextStart(t,e,i,r,a)}return{str:o,width:l}}_clipTextMiddle(t,e,i,r,n,s,a,o){let l=t.substring(0,o),h=this.measureTextWidth(l,e);if(h+a>i)return{left:r,right:n,width:s+a};let u=t.substring(t.length-o,t.length),c=this.measureTextWidth(u,e);return h+c>i?{left:l,right:n,width:h+a}:this._clipTextMiddle(t,e,i,l,u,h,c,o+1)}clipTextWithSuffixVertical(t,e,i,r,n,s){let a;if(""===r)return this.clipTextVertical(t,e,i,n);if(0===t.length)return{verticalList:t,width:0};let o=this.clipTextVertical(t,e,i,n);if(o.verticalList.length===t.length&&o.verticalList[o.verticalList.length-1].width===t[t.length-1].width)return o;let l=this.measureTextWidth(r,e);if(l>i)return o;if(i-=l,"start"===s){let s=this.revertVerticalList(t);a=this.clipTextVertical(s,e,i,n);let o=this.revertVerticalList(a.verticalList);o.unshift({text:r,direction:1,width:l}),a.verticalList=o}else if("middle"===s){let s=this.clipTextVertical(t,e,i/2,n),o=this.revertVerticalList(t),h=this.clipTextVertical(o,e,i/2,n);s.verticalList.push({text:r,direction:1,width:l}),this.revertVerticalList(h.verticalList).forEach(t=>s.verticalList.push(t)),a={verticalList:s.verticalList,width:s.width+h.width}}else(a=this.clipTextVertical(t,e,i,n)).verticalList.push({text:r,direction:1,width:l});return a.width+=l,a}revertVerticalList(t){return t.reverse().map(t=>{let e=t.text.split("").reverse().join("");return Object.assign(Object.assign({},t),{text:e})})}clipTextWithSuffix(t,e,i,r,n,s,o=!1){if(""===r)return this.clipText(t,e,i,n);if(0===t.length)return{str:"",width:0};let l=this.measureTextWidth(t,e);if(!o&&l<=i)return{str:t,width:l};let h=this.measureTextWidth(r,e);if(h>i)return{str:"",width:0};if(o&&l+h<=i)return{str:t+r,width:l+h};i-=h;let u=this._clipText(t,e,i,0,t.length-1,s,r);if(n&&u.str!==t){let i=(0,a.SZ)(t,u.str.length);i!==u.str.length&&(u.result=t.substring(0,i),u.width=this.measureTextWidth(u.str,e))}else o&&u.str===t&&(u.result=t+r);return u.str=u.result,u.width+=h,u}};l=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)()],l);let h=Symbol.for("TextMeasureContribution"),u=class extends l{constructor(){super(...arguments),this.id="DefaultTextMeasureContribution"}};u=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)()],u)},47774:function(t,e,i){"use strict";i.d(e,{X:()=>o});var r=i(34865),n=i(27753),s=i(63401),a=i(69182);let o=class{constructor(){this._uid=n.R.GenAutoIncrementId(),this.viewBox=new s.FB,this.modelMatrix=new a.y(1,0,0,1,0,0)}onChange(t){this._onChangeCb=t}configure(t,e){e.env===this.type&&t.setWindowHandler(this)}release(...t){this.releaseWindow()}isVisible(t){return!0}onVisibleChange(t){}getTopLeft(t){return{top:0,left:0}}setViewBox(t){this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(t,e,i,r,n,s){this.modelMatrix.setValue(t,e,i,r,n,s)}getViewBoxTransform(){return this.modelMatrix}};o=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],o)},28364:function(t,e,i){"use strict";i.d(e,{Il:()=>d,Oo:()=>u,zd:()=>c});var r=i(34865),n=i(36163),s=i(27753),a=i(34505),o=i(46009),l=i(92631),h=i(44475);let u=Symbol.for("VWindow"),c=Symbol.for("WindowHandlerContribution"),d=class extends h.w{get width(){if(this._handler){let t=this._handler.getWH();return this._width=t.width}return this._width}get height(){if(this._handler){let t=this._handler.getWH();return this._height=t.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){super(),this.hooks={onChange:new o.n(["x","y","width","height"])},this.active=()=>{let t=this.global;t.env&&!this.actived&&(a.n.getNamed(c,t.env).configure(this,t),this.actived=!0)},this._uid=s.R.GenAutoIncrementId(),this.global=l.w.global,this.postInit()}_nativeAddEventListener(t,e,i){return this._handler.addEventListener(t,e,i)}_nativeRemoveEventListener(t,e,i){return this._handler.removeEventListener(t,e,i)}_nativeDispatchEvent(t){return this._handler.dispatchEvent(t)}postInit(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}get style(){var t;return null!=(t=this._handler.getStyle())?t:{}}set style(t){this._handler.setStyle(t)}create(t){var e,i;this._handler.createWindow(t);let r=this._handler.getWH();this._width=r.width,this._height=r.height,t.viewBox?this.setViewBox(t.viewBox):!1!==t.canvasControled?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:null!=(e=t.width)?e:this._width,y2:null!=(i=t.height)?i:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(t){this._handler=t}setDpr(t){return this._handler.setDpr(t)}resize(t,e){return this._handler.resizeWindow(t,e)}configure(){throw Error("暂不支持")}release(){return this.global.hooks.onSetEnv.unTap("window",this.active),this.clearAllEventListeners(),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(t){return this._handler.getImageBuffer?this._handler.getImageBuffer(t):null}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(t){this._handler.clearViewBox(t)}setViewBox(t){this._handler.setViewBox(t)}setViewBoxTransform(t,e,i,r,n,s){this._handler.setViewBoxTransform(t,e,i,r,n,s)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(t,e){let i=this._handler.getViewBox(),r={x:t,y:e};return this._handler.getViewBoxTransform().transformPoint({x:t,y:e},r),r.x-=i.x1,r.y-=i.y1,r}hasSubView(){let t=this._handler.getViewBox();return!(0===t.x1&&0===t.y1&&(0,n.Yt)(this.width,t.width())&&(0,n.Yt)(this.height,t.height()))}isVisible(t){return this._handler.isVisible(t)}onVisibleChange(t){return this._handler.onVisibleChange(t)}getTopLeft(t){return this._handler.getTopLeft(t)}};d=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],d)},24197:function(t,e,i){"use strict";i.d(e,{H:()=>U});var r=i(83624),n=i(63401),s=i(19498),a=i(28364),o=i(36123),l=i(56073),h=i(21883),u=i.n(h),c=i(85476),d=i(15928);class p extends d.x{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,r,n,s,a,o,l,h,u,c,d,p,f){throw Error("Method not implemented.")}}class f extends p{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw Error("getPredictedEvents is not supported!")}clone(){var t,e,i;let r=new f(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,null==(t=this.manager)||t.copyPointerData(this,r),null==(e=this.manager)||e.copyMouseData(this,r),null==(i=this.manager)||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();let n=this.composedDetailPath();return r.detailPath=n&&n.slice(),r.type=this.type,r}}class g extends p{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var t,e,i;let r=new g(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,null==(t=this.manager)||t.copyWheelData(this,r),null==(e=this.manager)||e.copyMouseData(this,r),null==(i=this.manager)||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();let n=this.composedDetailPath();return r.detailPath=n&&n.slice(),r.type=this.type,r}}g.DOM_DELTA_PIXEL=0,g.DOM_DELTA_LINE=1,g.DOM_DELTA_PAGE=2;var m=i(66456),y=i(54628);function v(t){return"mouse"===t||"pen"===t}class b{constructor(t,e){this.dispatch=new(u()),this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(t,e)=>{if(!(t instanceof f))return void c.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.createPointerEvent(t,t.type,e);if(this.dispatchEvent(i,"pointerdown"),"touch"===i.pointerType)this.dispatchEvent(i,"touchstart");else if(v(i.pointerType)){let t=2===i.button;this.dispatchEvent(i,t?"rightdown":"mousedown")}this.trackingData(t.pointerId).pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)},this.onPointerMove=(t,e)=>{var i,r;if(!(t instanceof f))return void c.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let n=this.createPointerEvent(t,t.type,e),s=v(n.pointerType),a=this.trackingData(t.pointerId),o=this.findMountedTarget(a.overTargets);if(a.overTargets&&o&&o!==this.rootTarget&&o!==n.target){let e="mousemove"===t.type?"mouseout":"pointerout",i=this.createPointerEvent(t,e,o||void 0);if(this.dispatchEvent(i,"pointerout"),s&&this.dispatchEvent(i,"mouseout"),!n.composedPath().includes(o)){let e=this.createPointerEvent(t,"pointerleave",o||void 0);for(e.eventPhase=e.AT_TARGET;e.target&&!n.composedPath().includes(e.target);)e.currentTarget=e.target,this.notifyTarget(e),s&&this.notifyTarget(e,"mouseleave"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(i)}if(o!==n.target){let e="mousemove"===t.type?"mouseover":"pointerover",i=this.clonePointerEvent(n,e);this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover");let r=null==o?void 0:o.parent;for(;r&&r!==this.rootTarget.parent&&r!==n.target;)r=r.parent;if(!r||r===this.rootTarget.parent){let t=this.clonePointerEvent(n,"pointerenter");t.eventPhase=t.AT_TARGET;let e=t.target,i=new Set,r=o;for(;r&&r!==this.rootTarget;)i.add(r),r=r.parent;for(;e&&e!==o&&e!==this.rootTarget.parent;)i.has(e)||(t.currentTarget=e,this.notifyTarget(t),s&&this.notifyTarget(t,"mouseenter")),e=e.parent;this.freeEvent(t)}this.freeEvent(i)}this.dispatchEvent(n,"pointermove"),"touch"===n.pointerType&&this.dispatchEvent(n,"touchmove"),s&&(this.dispatchEvent(n,"mousemove"),this.cursorTarget=n.target,this.cursor=(null==(r=null==(i=n.target)?void 0:i.attribute)?void 0:r.cursor)||this.rootTarget.getCursor()),a.overTargets=n.composedPath(),this.freeEvent(n)},this.onPointerOver=(t,e)=>{var i,r;if(!(t instanceof f))return void c.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let n=this.trackingData(t.pointerId),s=this.createPointerEvent(t,t.type,e),a=v(s.pointerType);this.dispatchEvent(s,"pointerover"),a&&this.dispatchEvent(s,"mouseover"),"mouse"===s.pointerType&&(this.cursorTarget=s.target,this.cursor=(null==(r=null==(i=s.target)?void 0:i.attribute)?void 0:r.cursor)||this.rootTarget.getCursor());let o=this.clonePointerEvent(s,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),a&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;n.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(o)},this.onPointerOut=(t,e)=>{if(!(t instanceof f))return void c.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(t.pointerId);if(i.overTargets){let e=v(t.pointerType),r=this.findMountedTarget(i.overTargets),n=this.createPointerEvent(t,"pointerout",r||void 0);this.dispatchEvent(n),e&&this.dispatchEvent(n,"mouseout");let s=this.createPointerEvent(t,"pointerleave",r||void 0);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),e&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;i.overTargets=[],this.freeEvent(n),this.freeEvent(s)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(t,e)=>{var i;if(!(t instanceof f))return void c.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let r=y.m.now(),n=this.createPointerEvent(t,t.type,e);if(this.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)this.dispatchEvent(n,"touchend");else if(v(n.pointerType)){let t=2===n.button;this.dispatchEvent(n,t?"rightup":"mouseup")}let s=this.trackingData(t.pointerId),a=this.findMountedTarget(s.pressTargetsByButton[t.button]),o=a;if(a&&!n.composedPath().includes(a)){let e=a;for(;e&&!n.composedPath().includes(e);){if(n.currentTarget=e,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)this.notifyTarget(n,"touchendoutside");else if(v(n.pointerType)){let t=2===n.button;this.notifyTarget(n,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete s.pressTargetsByButton[t.button],o=e}if(o){let e=this.clonePointerEvent(n,"click");e.target=o,e.path=[],e.detailPath=[],s.clicksByButton[t.button]||(s.clicksByButton[t.button]={clickCount:0,target:e.target,timeStamp:r});let a=s.clicksByButton[t.button];a.target===e.target&&r-a.timeStamp<(null!=(i=this._config.clickInterval)?i:200)?++a.clickCount:a.clickCount=1,a.target=e.target,a.timeStamp=r,e.detail=a.clickCount,v(e.pointerType)?(this.dispatchEvent(e,"click"),2===a.clickCount&&this.dispatchEvent(e,"dblclick")):"touch"===e.pointerType&&this._config.supportsTouchEvents&&(this.dispatchEvent(e,"tap"),2===a.clickCount&&this.dispatchEvent(e,"dbltap")),this.dispatchEvent(e,"pointertap"),this.freeEvent(e)}this.freeEvent(n)},this.onPointerUpOutside=(t,e)=>{if(!(t instanceof f))return void c.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(t.pointerId),r=this.findMountedTarget(i.pressTargetsByButton[t.button]),n=this.createPointerEvent(t,t.type,e);if(r){let e=r;for(;e;)n.currentTarget=e,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):v(n.pointerType)&&this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),e=e.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(n)},this.onWheel=(t,e)=>{if(!(t instanceof g))return void c.Y.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");let i=this.createWheelEvent(t,e);this.dispatchEvent(i),this.freeEvent(i)},this.rootTarget=t,this.mappingTable={},this._config=Object.assign({clickInterval:200},e),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((t,e)=>t.priority-e.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){var e,i,r,n,s,a,o;let l;if(!this.rootTarget)return;let h=this.mappingTable[t.type],u=`${t.canvasX}-${t.canvasY}`;if((null==(e=this._prePointTargetCache)?void 0:e[u])&&(null==(r=null==(i=this._prePointTargetCache)?void 0:i[u])?void 0:r.stage)&&(null==(s=null==(n=this._prePointTargetCache)?void 0:n[u])?void 0:s.stage.renderCount)===(null==(a=this._prePointTargetCache)?void 0:a.stageRenderCount)?l=this._prePointTargetCache[u]:(l=this.pickTarget(t.viewX,t.viewY,t),t.pickParams||(this._prePointTargetCache={[u]:l,stageRenderCount:null!=(o=null==l?void 0:l.stage.renderCount)?o:-1})),h)for(let e=0,i=h.length;e<i;e++)h[e].fn(t,l);else c.Y.getInstance().warn(`[EventManager]: Event mapping not defined for ${t.type}`)}propagate(t,e){if(!t.target)return;let i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,n=i.length-1;r<n;r++)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}propagationPath(t){let e=[t];for(let i=0;i<2048&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}notifyTarget(t,e){if(this.pauseNotify)return;e=null!=e?e:t.type;let i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){var r,n;let s=this.allocateEvent(f);return this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=i||this.pickTarget(null!=(r=s.viewX)?r:s.global.x,null!=(n=s.viewY)?n:s.global.y,s),"string"==typeof e&&(s.type=e),s}createWheelEvent(t,e){var i,r;let n=this.allocateEvent(g);return this.copyWheelData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=e||this.pickTarget(null!=(i=n.viewX)?i:n.global.x,null!=(r=n.viewY)?r:n.global.y,n),n}clonePointerEvent(t,e){let i=this.allocateEvent(f);i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice();let r=t.composedDetailPath();return i.detailPath=r&&r.slice(),i.type=null!=e?e:i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof f&&e instanceof f&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof p&&e instanceof p&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach(i=>{e[i].x=t[i].x,e[i].y=t[i].y}))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=y.m.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.x=t.layer.x,e.layer.y=t.layer.y,e.page.x=t.page.x,e.page.y=t.page.y,e.pickParams=t.pickParams}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){var e;this.eventPool.has(t)||this.eventPool.set(t,[]);let i=(null==(e=this.eventPool.get(t))?void 0:e.pop())||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=[],i.detailPath=[],i.target=null,i}freeEvent(t){var e;if(t.manager!==this)throw Error("It is illegal to free an event not managed by this EventManager!");let i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),null==(e=this.eventPool.get(i))||e.push(t)}notifyListeners(t,e){let i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeEventListener(e,i.fn,{once:!0}),i.fn.call(i.context,t);else for(let r=0,n=i.length;r<n&&!t.propagationImmediatelyStopped;r++)i[r].once&&t.currentTarget.removeEventListener(e,i[r].fn,{once:!0}),i[r].fn.call(i[r].context,t);this.emitDelegation(t,e)}emitDelegation(t,e){let i=t.currentTarget._events[m.g];if(i)if("fn"in i)i.fn.call(i.context,t,e);else for(let r=0,n=i.length;r<n&&!t.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,t,e)}pickTarget(t,e,i){let r,n=this.rootTarget.pick(t,e);return r=n&&n.graphic?n.graphic:n&&n.group?n.group:this.rootTarget.AABBBounds.contains(t,e)?this.rootTarget:null,i&&(i.pickParams=n.params),r}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}}let x={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class _{constructor(t){this.resolution=1,this.onPointerDown=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(!t.cancelable&&"cancelable"in t||t.preventDefault());for(let t=0,i=e.length;t<i;t++){let i=e[t],r=this.bootstrapEvent(this.rootPointerEvent,i);this.manager.mapEvent(r)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerMove=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType||this.isEventOutsideOfTargetElement(t))return;let e=this.normalizeToPointerData(t);for(let t=0,i=e.length;t<i;t++){let i=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerUp=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.isEventOutsideOfTargetViewPort(t)?"outside":"",i=this.normalizeToPointerData(t);for(let t=0,r=i.length;t<r;t++){let r=this.bootstrapEvent(this.rootPointerEvent,i[t]);r.type+=e,this.manager.mapEvent(r)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerOverOut=t=>{if(this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=this.normalizeToPointerData(t);for(let t=0,i=e.length;t<i;t++){let i=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onWheel=t=>{let e=this.normalizeWheelEvent(t);this.manager.mapEvent(e)};let{targetElement:e,resolution:i,rootNode:r,global:n,autoPreventDefault:s=!1,clickInterval:a,supportsTouchEvents:o=n.supportsTouchEvents,supportsPointerEvents:l=n.supportsPointerEvents}=t;this.manager=new b(r,{clickInterval:a,supportsTouchEvents:o}),this.globalObj=n,this.supportsPointerEvents=l,this.supportsTouchEvents=o,this.supportsMouseEvents=n.supportsMouseEvents,this.applyStyles=n.applyStyles,this.autoPreventDefault=s,this.eventsAdded=!1,this.rootPointerEvent=new f,this.rootWheelEvent=new g,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=i,this.setTargetElement(e)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(t,e){if(!e&&!this.manager.rootTarget.window._handler.canvas.controled)return;t||(t="default");let{applyStyles:i,domElement:n}=this;if(this.currentCursor===t)return;this.currentCursor=t;let s=this.cursorStyles[t];s?"string"==typeof s&&i?n.style.cursor=s:"function"==typeof s?s(t):"object"==typeof s&&i&&Object.assign(n.style,s):i&&(0,r.Z)(t)&&!(0,o.Z)(this.cursorStyles,t)&&(n.style.cursor=t)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;let{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerUp,!0)):(e.addEventListener("pointermove",this.onPointerMove,!0),e.addEventListener("pointerup",this.onPointerUp,!0)),e.addEventListener("pointerdown",this.onPointerDown,!0),e.addEventListener("pointerleave",this.onPointerOverOut,!0),e.addEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.addEventListener("mousemove",this.onPointerMove,!0),t.addEventListener("mouseup",this.onPointerUp,!0)):(e.addEventListener("mousemove",this.onPointerMove,!0),e.addEventListener("mouseup",this.onPointerUp,!0)),e.addEventListener("mousedown",this.onPointerDown,!0),e.addEventListener("mouseout",this.onPointerOverOut,!0),e.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.addEventListener("touchstart",this.onPointerDown,!0),e.addEventListener("touchend",this.onPointerUp,!0),e.addEventListener("touchmove",this.onPointerMove,!0)),e.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;let{globalObj:t,domElement:e}=this;this.supportsPointerEvents?(t.getDocument()?(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerUp,!0)):(e.removeEventListener("pointermove",this.onPointerMove,!0),e.removeEventListener("pointerup",this.onPointerUp,!0)),e.removeEventListener("pointerdown",this.onPointerDown,!0),e.removeEventListener("pointerleave",this.onPointerOverOut,!0),e.removeEventListener("pointerover",this.onPointerOverOut,!0)):(t.getDocument()?(t.removeEventListener("mousemove",this.onPointerMove,!0),t.removeEventListener("mouseup",this.onPointerUp,!0)):(e.removeEventListener("mousemove",this.onPointerMove,!0),e.removeEventListener("mouseup",this.onPointerUp,!0)),e.removeEventListener("mousedown",this.onPointerDown,!0),e.removeEventListener("mouseout",this.onPointerOverOut,!0),e.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(e.removeEventListener("touchstart",this.onPointerDown,!0),e.removeEventListener("touchend",this.onPointerUp,!0),e.removeEventListener("touchmove",this.onPointerMove,!0)),e.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(t){return this.domElement.pointTransform?this.domElement.pointTransform(t.x,t.y):t}mapToCanvasPoint(t){var e,i;let r=null==(e=this.globalObj)?void 0:e.mapToCanvasPoint(t,this.domElement);if(r)return r;let n=0,s=0;if(t.changedTouches){let e=null!=(i=t.changedTouches[0])?i:{};n=e.clientX||0,s=e.clientY||0}else n=t.clientX||0,s=t.clientY||0;let a=this.domElement.getBoundingClientRect();return{x:n-a.left,y:s-a.top}}normalizeToPointerData(t){let e=[];if(this.supportsTouchEvents&&t.changedTouches&&t.changedTouches.length)for(let i=0,r=t.changedTouches.length;i<r;i++){let r=t.changedTouches[i];(0,l.Z)(r.button)&&(r.button=0),(0,l.Z)(r.buttons)&&(r.buttons=1),(0,l.Z)(r.isPrimary)&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),(0,l.Z)(r.width)&&(r.width=r.radiusX||1),(0,l.Z)(r.height)&&(r.height=r.radiusY||1),(0,l.Z)(r.tiltX)&&(r.tiltX=0),(0,l.Z)(r.tiltY)&&(r.tiltY=0),(0,l.Z)(r.pointerType)&&(r.pointerType="touch"),(0,l.Z)(r.pointerId)&&(r.pointerId=r.identifier||0),(0,l.Z)(r.pressure)&&(r.pressure=r.force||.5),(0,l.Z)(r.twist)&&(r.twist=0),(0,l.Z)(r.tangentialPressure)&&(r.tangentialPressure=0),(0,l.Z)(r.layerX)&&(r.layerX=r.offsetX=r.clientX),(0,l.Z)(r.layerY)&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=t.type,e.push(r)}else this.globalObj.supportsMouseEvents&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof PointerEvent)||((0,l.Z)(t.isPrimary)&&(t.isPrimary=!0),(0,l.Z)(t.width)&&(t.width=1),(0,l.Z)(t.height)&&(t.height=1),(0,l.Z)(t.tiltX)&&(t.tiltX=0),(0,l.Z)(t.tiltY)&&(t.tiltY=0),(0,l.Z)(t.pointerType)&&(t.pointerType="mouse"),(0,l.Z)(t.pointerId)&&(t.pointerId=1),(0,l.Z)(t.pressure)&&(t.pressure=.5),(0,l.Z)(t.twist)&&(t.twist=0),(0,l.Z)(t.tangentialPressure)&&(t.tangentialPressure=0),t.isNormalized=!0),e.push(t);return e}normalizeWheelEvent(t){let e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;let{x:i,y:r}=this.mapToCanvasPoint(t);e.canvas.x=i,e.canvas.y=r,e.global.x=i,e.global.y=r,e.offset.x=i,e.offset.y=r;let{x:n,y:s}=this.mapToViewportPoint(e);return e.viewport.x=n,e.viewport.y=s,e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);let{x:i,y:r}=this.mapToCanvasPoint(e);t.canvas.x=i,t.canvas.y=r,t.global.x=i,t.global.y=r,t.offset.x=i,t.offset.y=r;let{x:n,y:s}=this.mapToViewportPoint(t);return t.viewport.x=n,t.viewport.y=s,t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=x[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=y.m.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null}isEventOutsideOfTargetViewPort(t){if(this.isEventOutsideOfTargetElement(t))return!0;if(this.domElement.getViewBox){let e=this.mapToViewportPoint(this.mapToCanvasPoint(t)),i=this.domElement.getViewBox(),r=i.width(),n=i.height();return!(e.x<r&&e.y<n&&e.x>0&&e.y>0)}return!1}isEventOutsideOfTargetElement(t){let e=t.target;return t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]),e!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}pauseTriggerEvent(){this.manager.pauseNotify=!0}resumeTriggerEvent(){this.manager.pauseNotify=!1}}var w=i(34505),S=i(22649),A=i(8849),C=i(17852),D=i(54045),T=i(89340),B=i(27753);class M{constructor(){this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=B.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&null!=t.stage&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t;let e=this.pluginService.stage;e&&(e.graphicService.hooks.onAttributeUpdate.tap(this.key,this.handleChange),e.graphicService.hooks.onSetStage.tap(this.key,this.handleChange),e.graphicService.hooks.onRemove.tap(this.key,this.handleChange))}deactivate(t){let e=t=>t.filter(t=>t.name!==this.key),i=this.pluginService.stage;i&&(i.graphicService.hooks.onAttributeUpdate.taps=e(i.graphicService.hooks.onAttributeUpdate.taps),i.graphicService.hooks.onSetStage.taps=e(i.graphicService.hooks.onSetStage.taps),i.graphicService.hooks.onRemove.taps=e(i.graphicService.hooks.onRemove.taps))}}var E=i(92631);class k{constructor(){this.name="AutoRefreshPlugin",this.activeEvent="onRegister",this._uid=B.R.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=t=>{t.glyphHost&&(t=t.glyphHost),t.stage===this.pluginService.stage&&null!=t.stage&&t.stage.renderNextFrame()}}activate(t){this.pluginService=t,this.dpr=E.w.global.devicePixelRatio,this.refresh()}refresh(){this._refreshByMediaQuery()||this._refreshByRaf()}_refreshByRaf(){let t=E.w.global.getRequestAnimationFrame();this.rafId=t(()=>{E.w.global.devicePixelRatio!==this.dpr&&(this.dpr=E.w.global.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0)),this.refresh()})}_refreshByMediaQuery(){try{let t=`(resolution: ${window.devicePixelRatio}dppx)`,e=()=>{window.devicePixelRatio!==this.dpr&&(this.dpr=window.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0))},i=matchMedia(t);i&&i.addEventListener("change",e),this.autoRefreshCbs||(this.autoRefreshCbs=[]),this.autoRefreshCbs.push(()=>{i&&i.removeEventListener("change",e)})}catch(t){return!1}return!0}deactivate(t){var e;let i=E.w.global.getCancelAnimationFrame();i&&this.rafId&&i(this.rafId),null==(e=this.autoRefreshCbs)||e.forEach(t=>{t()}),this.autoRefreshCbs=void 0}}class F{constructor(){this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=B.R.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t;let e=this.pluginService.stage;e&&(e.graphicService.hooks.onAddIncremental.tap(this.key,(e,i,r)=>{e.glyphHost&&(e=e.glyphHost),e.stage===t.stage&&null!=e.stage&&(this.nextUserParams.startAtId=i._uid,this.renderNextFrame(i))}),e.graphicService.hooks.onClearIncremental.tap(this.key,(e,i)=>{e.stage===t.stage&&null!=e.stage&&(this.nextUserParams.startAtId=e._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(e))}))}deactivate(t){let e=this.pluginService.stage;e&&(e.graphicService.hooks.onAddIncremental.taps=e.graphicService.hooks.onAddIncremental.taps.filter(t=>t.name!==this.key),e.graphicService.hooks.onClearIncremental.taps=e.graphicService.hooks.onClearIncremental.taps.filter(t=>t.name!==this.key))}renderNextFrame(t){this.nextFrameRenderGroupSet.add(t),this.willNextFrameRender||(this.willNextFrameRender=!0,E.w.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){let t=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach(e=>{let i=e.layer;if(!i||!e.layer.subLayers)return;let r=e.layer.subLayers.get(e._uid);r&&r.drawContribution&&r.drawContribution.draw(t.renderService,Object.assign({stage:t,layer:i,viewBox:t.window.getViewBox(),transMatrix:t.window.getViewBoxTransform(),clear:"transparent",renderService:t.renderService,updateBounds:!1,startAtId:e._uid,context:r.layer.getNativeHandler().getContext()},this.nextUserParams))}),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}let R=new n.FB;class P{constructor(){this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=B.R.GenAutoIncrementId(),this.key=this.name+this._uid}activate(t){this.pluginService=t,t.stage.hooks.afterRender.tap(this.key,t=>{t&&t===this.pluginService.stage&&t.dirtyBounds.clear()});let e=this.pluginService.stage;e&&(e.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(t,e,i,r)=>{t.glyphHost&&(t=t.glyphHost),e&&e===this.pluginService.stage&&e.renderCount&&(t.isContainer&&!t.shouldSelfChangeUpdateAABBBounds()||i&&(R.setValue(r.x1,r.y1,r.x2,r.y2),e.dirty(R,t.parent&&t.parent.globalTransMatrix)))}),e.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(t,e,i,r,n)=>{e&&e===this.pluginService.stage&&e.renderCount&&(t.isContainer&&!n||e.dirty(r.globalAABBBounds))}),e.graphicService.hooks.clearAABBBounds.tap(this.key,(t,e,i)=>{e&&e===this.pluginService.stage&&e.renderCount&&e&&e.dirty(i)}),e.graphicService.hooks.onRemove.tap(this.key,t=>{let e=t.stage;e&&e===this.pluginService.stage&&e.renderCount&&e&&e.dirty(t.globalAABBBounds)}))}deactivate(t){let e=this.pluginService.stage;e&&(e.graphicService.hooks.beforeUpdateAABBBounds.taps=e.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(t=>t.name!==this.key),e.graphicService.hooks.afterUpdateAABBBounds.taps=e.graphicService.hooks.afterUpdateAABBBounds.taps.filter(t=>t.name!==this.key),e.graphicService.hooks.clearAABBBounds.taps=e.graphicService.hooks.clearAABBBounds.taps.filter(t=>t.name!==this.key),e.hooks.afterRender.taps=e.hooks.afterRender.taps.filter(t=>t.name!==this.key),e.graphicService.hooks.onRemove.taps=e.graphicService.hooks.onRemove.taps.filter(t=>t.name!==this.key))}}var O=i(46009),L=i(90881),I=i(89495),z=i(60651),Z=i(10773);let j={BACKGROUND:"white"};class W extends A.ZA{set viewBox(t){this.window.setViewBox(t)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(t){let e=this.window.getViewBox();e.translate(t-e.x1,0),this.window.setViewBox(e)}get y(){return this.window.getViewBox().y1}set y(t){let e=this.window.getViewBox();e.translate(0,t-e.y1),this.window.setViewBox(e)}get width(){return this.window.width}set width(t){this.resize(t,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(t){this.resizeView(t,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(t){this.resizeView(this.viewWidth,t)}get height(){return this.window.height}set height(t){this.resize(this.width,t)}get dpr(){return this.window.dpr}set dpr(t){this.setDpr(t)}get background(){var t;return null!=(t=this._background)?t:j.BACKGROUND}set background(t){this._background=t}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}get ticker(){return this._ticker}set ticker(t){t.bindStage(this),this._ticker&&this._ticker.removeListener("tick",this.afterTickCb),t.addTimeline(this.timeline),this._ticker=t,this._ticker.on("tick",this.afterTickCb)}constructor(t={}){var e,i;super({}),this.tickedBeforeRender=!0,this._onVisibleChange=t=>{if(!(this._skipRender<0))if(t){if(this.dirtyBounds){let t=this.window.getViewBox();this.dirtyBounds.setValue(t.x1,t.y1,t.width(),t.height())}this._skipRender>1&&this.renderNextFrame(),this._skipRender=0}else this._skipRender=1},this.beforeRender=t=>{this._beforeRenderList.forEach(e=>e(t))},this.afterClearScreen=t=>{this._afterClearScreen&&this._afterClearScreen(t)},this.afterClearRect=t=>{this._afterClearRect&&this._afterClearRect(t)},this.afterRender=t=>{this.renderCount++,this._afterRenderList.forEach(e=>e(t)),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach(e=>e(t)),this._afterNextRenderCbs=null,this.tickedBeforeRender=!1},this.afterTickCb=()=>{this.tickedBeforeRender=!0,"rendering"!==this.state&&this.renderNextFrame()},this.params=t,this.theme=new C.Q2,this.hooks={beforeRender:new O.n(["stage"]),afterRender:new O.n(["stage"]),afterClearScreen:new O.n(["stage"]),afterClearRect:new O.n(["stage"])},this.global=E.w.global,!this.global.env&&(0,I.kP)()&&this.global.setEnv("browser"),this.window=w.n.get(a.Oo),this.renderService=w.n.get(S.p),this.pluginService=w.n.get(T.H),this.layerService=w.n.get(L.IT),this.graphicService=w.n.get(Z.fB),this.pluginService.active(this,t),this._beforeRenderList=[],this._afterRenderList=[],this.window.create({width:t.width,height:t.height,viewBox:t.viewBox,container:t.container,dpr:t.dpr||this.global.devicePixelRatio,canvasControled:!1!==t.canvasControled,title:t.title||"",canvas:t.canvas}),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._background=null!=(e=t.background)?e:j.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=t.renderStyle,t.autoRender&&this.enableAutoRender(),t.autoRefresh&&this.enableAutoRefresh(),!1===t.disableDirtyBounds&&this.enableDirtyBounds(),t.enableHtmlAttribute&&this.enableHtmlAttribute(t.enableHtmlAttribute),t.ReactDOM&&this.enableReactAttribute(t.ReactDOM),t.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),t.beforeRender&&this._beforeRenderList.push(t.beforeRender),t.afterRender&&this._afterRenderList.push(t.afterRender),this.hooks.afterClearScreen.tap("constructor",this.afterClearScreen),this.hooks.afterClearRect.tap("constructor",this.afterClearRect),this._afterClearScreen=t.afterClearScreen,this._afterClearRect=t.afterClearRect,this.supportInteractiveLayer=!1!==t.interactiveLayer,t.optimize||(t.optimize={tickRenderMode:"effect"}),this.optmize(t.optimize),t.background&&(0,r.Z)(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background}),this.initAnimate(t),this.rafId=null!=(i=t.rafId)?i:Math.floor(6*Math.random())}initAnimate(t){var e;this.createTicker&&this.createTimeline&&(this._ticker=t.ticker||this.createTicker(this),this._ticker.bindStage(this),"performance"===(null==(e=this.params.optimize)?void 0:e.tickRenderMode)&&this._ticker.setFPS(30),this.timeline=this.createTimeline(),this._ticker.addTimeline(this.timeline),this._ticker.on("tick",this.afterTickCb))}startAnimate(){this._ticker&&this.timeline&&(this._ticker.start(),this.timeline.resume())}pauseRender(t=-1){this._skipRender=t}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new _(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(t){t?this._skipRender=-1/0:!1!==this.params.optimize.skipRenderWithOutRange?this._skipRender=+!this.window.isVisible():this._skipRender=0}optmize(t){this.optmizeRender(t.skipRenderWithOutRange),this.params.optimize=t}optmizeRender(t=!1){t&&(this._skipRender=this._skipRender<0?this._skipRender:+!this.window.isVisible(),this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(t){let{center:e={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:i={},alpha:r=0,beta:n=0,camera:s,fieldRatio:a=1,fieldDepth:o}=t;return Object.assign(Object.assign({},t),{center:e,light:i,alpha:r,beta:n,camera:s,fieldRatio:a,fieldDepth:o})}set3dOptions(t){var e,i,r,n,s,a;this.option3d=t;let{light:o,center:l,camera:h,alpha:u,beta:c,fieldRatio:d,fieldDepth:p}=this.get3dOptions(t),{dir:f=[1,1,-1],color:g="white",ambient:m}=o,y=(null!=(e=l.x)?e:this.width/2)+(null!=(i=l.dx)?i:0),v=(null!=(r=l.y)?r:this.height/2)+(null!=(n=l.dy)?n:0),b=[y,v,(null!=(s=l.z)?s:0)+(null!=(a=l.dz)?a:0)],x=0,_=0,w=0;h||(x=Math.sin(u)+y,_=Math.sin(c)+v,w=Math.cos(u)*Math.cos(c)*1);let S=z.F.getPlugin("DirectionalLight");S&&(this.light=new S(f,g,m));let A={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:d,fieldDepth:p,viewParams:{pos:[x,_,w],center:b,up:[0,1,0]}};if(this.camera)this.camera.params=A;else{let t=z.F.getPlugin("OrthoCamera");t&&(this.camera=new t(A))}t.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(t){this._beforeRenderList.push(t)}removeBeforeRender(t){this._beforeRenderList=this._beforeRenderList.filter(e=>e!==t)}setAfterRender(t){this._afterRenderList.push(t)}removeAfterRender(t){this._afterRenderList=this._afterRenderList.filter(e=>e!==t)}afterNextRender(t){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(t)}enableView3dTransform(){if(this.view3dTranform)return;this.view3dTranform=!0;let t=z.F.getPlugin("ViewTransform3dPlugin");t&&this.pluginService.register(new t)}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new M))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableAutoRefresh(){this.autoRefresh||"node"===this.global.env||(this.autoRefresh=!0,this.pluginService.register(new k))}disableAutoRefresh(){this.autoRefresh&&(this.autoRefresh=!1,this.pluginService.findPluginsByName("AutoRefreshPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new F))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new n.YZ;let t=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];t?t.activate(this.pluginService):(t=new P,this.pluginService.register(t))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableLayout(){if(this._enableLayout)return;this._enableLayout=!0;let t=z.F.getPlugin("FlexLayoutPlugin");t&&this.pluginService.register(new t)}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableHtmlAttribute(t){if(this.htmlAttribute)return;let e=z.F.getPlugin("HtmlAttributePlugin");e&&(this.htmlAttribute=t,this.pluginService.register(new e))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}enableReactAttribute(t){if(this.reactAttribute)return;let e=z.F.getPlugin("ReactAttributePlugin");e&&(this.reactAttribute=t,this.pluginService.register(new e))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach(t=>{this.pluginService.unRegister(t)}))}getPluginsByName(t){return this.pluginService.findPluginsByName(t)}tryUpdateAABBBounds(){let t=this.window.getViewBox();return this._AABBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._AABBBounds}combineLayer(t,e){throw Error("暂不支持")}createLayer(t,e){if("released"===this.releaseStatus)return;let i=this.layerService.createLayer(this,{main:!1,layerMode:e,canvasId:t});return this.appendChild(i),i}sortLayer(t){let e=this.children;e.sort(t),this.removeAllChild(),e.forEach(t=>{this.appendChild(t)})}removeLayer(t){return this.removeChild(this.findChildByUid(t))}tryInitInteractiveLayer(){"released"!==this.releaseStatus&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(t){this.window.clearViewBox(t)}render(t,e){if("released"===this.releaseStatus)return;this.startAnimate();let i=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=e,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=i,this._skipRender&&this._skipRender++}combineLayersToWindow(){if("harmony"===this.global.env){let t=this.window.getContext().nativeContext;this.forEachChildren((e,i)=>{if(i>0){let i=e.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();t.transferFromImageBitmap(i)}})}}renderNextFrame(t,e){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(t||this).forEach(t=>{this.nextFrameRenderLayerSet.add(t)}),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getSpecifiedRequestAnimationFrame(this.rafId)(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){if("released"===this.releaseStatus)return;this.startAnimate();let t=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=t,this._skipRender&&this._skipRender++}renderLayerList(t,e){let i=[];for(let e=0;e<t.length;e++){let r=t[e];"virtual"===r.layerMode&&(r=r.getNativeHandler().mainHandler.layer),i.includes(r)||i.push(r)}i.forEach(t=>{t.renderCount>this.renderCount||(t.renderCount=this.renderCount+1,t===this.interactiveLayer&&this.dirtyBounds&&this.dirtyBounds.clear(),t.render({renderService:this.renderService,background:t===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}),this.interactiveLayer&&!t.includes(this.interactiveLayer)&&(this.dirtyBounds&&this.dirtyBounds.clear(),this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},e)))}resizeWindow(t,e,i=!0){this.window.resize(t,e),i&&this.render()}resize(t,e,i=!0){"released"!==this.releaseStatus&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.window.resize(t,e),this.forEachChildren(i=>{i.resize(t,e)}),this.camera&&this.option3d&&this.set3dOptions(this.option3d),i&&this.render())}resizeView(t,e,i=!0){"released"!==this.releaseStatus&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+t,this.viewBox.y1+e),this.forEachChildren(i=>{i.resizeView(t,e)}),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),i&&this.render())}setViewBox(t,e,i,r,n){let s=!0;"object"==typeof t?(this.viewBox.setValue(t.x1,t.y1,t.x2,t.y2),!1===e&&(s=!1)):(this.viewBox.setValue(t,e,t+i,e+r),!1===n&&(s=!1)),this.forEachChildren(t=>{t.resizeView(this.viewBox.width(),this.viewBox.height())}),s&&this.render()}setDpr(t,e=!0){this.forEachChildren(e=>{e.setDpr(t)}),e&&this.render()}setOrigin(t,e){throw Error("暂不支持")}export(t){throw Error("暂不支持")}pick(t,e){if("released"===this.releaseStatus)return;let i=this.getPickerService().pick(this.children,new s.E9(t,e),{bounds:this.AABBBounds});return!(!(null==i?void 0:i.graphic)&&!(null==i?void 0:i.group))&&i}setToFrame(t){throw Error("暂不支持")}release(){var t,e;super.release(),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach(t=>{t.release()}),this.interactiveLayer&&(this.interactiveLayer.forEachChildren(t=>{t.setStage&&t.setStage(null,null),this.interactiveLayer.removeChild(t)}),this.interactiveLayer.release()),this.window.release(),null==(t=this._ticker)||t.remTimeline(null==this?void 0:this.timeline),null==(e=this._ticker)||e.removeListener("tick",this.afterTickCb),this.renderService.renderTreeRoots=[]}setStage(t){}dirty(t,e){"released"!==this.releaseStatus&&(e&&t.transformWithMatrix(e),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(t.x1,t.y1,t.x2,t.y2),this.dirtyBounds.union(t))}getLayer(t){return this.children.filter(e=>e.name===t)[0]}renderTo(t){"released"!==this.releaseStatus&&this.forEachChildren((e,i)=>{e.drawTo(t,{renderService:this.renderService,viewBox:t.getViewBox(),transMatrix:t.getViewBoxTransform(),background:e===this.defaultLayer?this.background:void 0,clear:0===i,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})})}renderToNewWindow(t=!0,e){if("released"===this.releaseStatus)return;let i=w.n.get(a.Oo),r=e?-e.x1:0,n=e?-e.y1:0,s=e?e.x2:this.viewWidth,o=e?e.y2:this.viewHeight,l=e?e.width():this.viewWidth,h=e?e.height():this.viewHeight;return i.create({viewBox:{x1:r,y1:n,x2:s,y2:o},width:l,height:h,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""}),this.renderTo(i),i}toCanvas(t=!0,e){if("released"===this.releaseStatus)return;let i=this.renderToNewWindow(t,e).getNativeHandler();return i.nativeCanvas?i.nativeCanvas:null}setCursor(t){this._cursor=t,this.eventSystem.setCursor(t,"ignore")}getCursor(){return this._cursor}eventPointTransform(t){let e=this.global.mapToCanvasPoint(t,this.window);return this.stage.window.pointTransform(e.x,e.y)}pauseTriggerEvent(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}resumeTriggerEvent(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}getPickerService(){return this.pickerService||(this.pickerService=w.n.get(D.hH)),this.pickerService}reInit(){this.renderService.reInit(),this.pickerService.reInit()}}function U(t){return new W(t)}},89495:function(t,e,i){"use strict";let r;i.d(e,{KV:()=>o,kP:()=>a});var n=i(92631);function s(){if(null==r)try{let t=document.createElement("canvas"),e=t.getContext("2d");(r=!!(window&&t.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&e&&e.isPointInPath&&e.isPointInStroke))&&(r=!!document.createElement)}catch(t){r=!1}}function a(){s();let t=n.w.global&&n.w.global.env;return t?"browser"===t:r}function o(){s();let t=n.w.global&&n.w.global.env;return t?"node"===t:!r}},66456:function(t,e,i){"use strict";i.d(e,{g:()=>r});let r="*"},15928:function(t,e,i){"use strict";i.d(e,{x:()=>n});var r=i(96241);class n{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=n.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}composedDetailPath(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}_composedDetailPath(t){if(t&&t.graphic){let e=t.graphic;if(e.stage){let i=e.stage.eventSystem.manager.propagationPath(e);this.detailPath.push(i),this._composedDetailPath(t.params)}}}preventDefault(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault()}catch(t){this.nativeEvent.preventDefault&&(0,r.Z)(this.nativeEvent.preventDefault)&&this.nativeEvent.preventDefault()}this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation()}catch(t){this.nativeEvent.stopPropagation&&(0,r.Z)(this.nativeEvent.stopPropagation)&&this.nativeEvent.stopPropagation()}this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw Error("Method not implemented.")}}},35357:function(t,e,i){"use strict";i.d(e,{A:()=>n});var r=i(15928);class n extends r.x{constructor(t,e){super(),this.type=t,this.detail=e}}},54628:function(t,e,i){"use strict";i.d(e,{m:()=>r});let r="object"==typeof performance&&performance.now?performance:Date},60651:function(t,e,i){"use strict";i.d(e,{F:()=>r});class r{static registerPlugin(t,e){r._pluginClasses[t]=e}static getPlugin(t){return r._pluginClasses[t]}}r._pluginClasses={}},638:function(t,e,i){"use strict";i.d(e,{Q:()=>m,w:()=>g});var r=i(4654),n=i(95723),s=i(9762),a=i(8830),o=i(52462),l=i(78085),h=i(19626),u=i(17852),c=i(92631),d=i(10773),p=i(86339);let f=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...o.DH];class g extends o.zs{constructor(t){super(t),this.type="arc",this.numberType=d.r_}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{startAngle:t,endAngle:e,outerRadius:i,innerRadius:r}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)&&this._validNumber(r)}getParsedCornerRadius(){let t=this.getGraphicTheme(),{cornerRadius:e=t.cornerRadius,innerPadding:i=t.innerPadding,outerPadding:s=t.outerPadding}=this.attribute,{outerRadius:a=t.outerRadius,innerRadius:o=t.innerRadius}=this.attribute;if(a+=s,o-=i,0===e||"0%"===e)return 0;let l=Math.abs(a-o),h=t=>Math.min((0,r.Z)(t,!0)?t:l*parseFloat(t)/100,l/2);if((0,n.Z)(e)){let t=e.map(t=>h(t)||0);return 0===t.length?[t[0],t[0],t[0],t[0]]:2===t.length?[t[0],t[1],t[0],t[1]]:(3===t.length&&t.push(0),t)}return h(e)}getParsedAngle(){let t=this.getGraphicTheme(),{startAngle:e=t.startAngle,endAngle:i=t.endAngle}=this.attribute,{cap:r=t.cap}=this.attribute,n=i-e>=0?1:-1,o=i-e;if(i=(e=(0,s.gt)(e))+o,r&&(0,a.Wn)(o)<a.f7-a.Ho){let s=1,o=1;r.length&&(s=Number(r[0]),o=Number(r[1]));let{outerRadius:l=t.outerRadius,innerRadius:h=t.innerRadius}=this.attribute,{outerPadding:u=t.outerPadding,innerPadding:c=t.innerPadding}=this.attribute,d=Math.abs((l+=u)-(h-=c))/2,p=d/l;if(d>a.Ho&&l>a.Ho)return{startAngle:e-n*p*s,endAngle:i+n*p*o,sc:n*p*s,ec:n*p*o}}return{startAngle:e,endAngle:i}}getParsePadAngle(t,e){let i=this.getGraphicTheme(),{innerPadding:r=i.innerPadding,outerPadding:n=i.outerPadding,padAngle:s=i.padAngle}=this.attribute,{outerRadius:o=i.outerRadius,innerRadius:l=i.innerRadius}=this.attribute;o+=n,l-=r;let{padRadius:h=(0,a._b)(o*o+l*l)}=this.attribute,u=(0,a.Wn)(e-t),c=t,d=e,p=t,f=e,g=s/2,m=u,y=u;if(g>a.Ho&&h>a.Ho){let i=e>t?1:-1,r=(0,a.ZR)(Number(h)/l*(0,a.O$)(g)),n=(0,a.ZR)(Number(h)/o*(0,a.O$)(g));return(m-=2*r)>a.Ho?(r*=i,p+=r,f-=r):(m=0,p=f=(t+e)/2),(y-=2*n)>a.Ho?(n*=i,c+=n,d-=n):(y=0,c=d=(t+e)/2),{outerStartAngle:c,outerEndAngle:d,innerStartAngle:p,innerEndAngle:f,innerDeltaAngle:m,outerDeltaAngle:y}}return{outerStartAngle:c,outerEndAngle:d,innerStartAngle:p,innerEndAngle:f,innerDeltaAngle:m,outerDeltaAngle:y}}getGraphicTheme(){return(0,u.gh)(this).arc}updateAABBBounds(t,e,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateArcAABBBoundsImprecise(t,e,i):this.updateArcAABBBoundsAccurate(t,e,i));let{tb1:n,tb2:s}=c.w.graphicService.updateTempAABBBounds(i);(0,p.E)(t,e,n),i.union(n),n.setValue(s.x1,s.y1,s.x2,s.y2),this.setWidthHeightWithoutTransform(i);let{lineJoin:a=e.lineJoin}=t;return c.w.graphicService.transformAABBBounds(t,i,e,"miter"===a,this),i}updateArcAABBBoundsImprecise(t,e,i){let{outerRadius:r=e.outerRadius,innerRadius:n=e.innerRadius}=t,{outerPadding:s=e.outerPadding,innerPadding:a=e.innerPadding}=t;return(r+=s)<(n-=a)&&(r=n),i.set(-r,-r,r,r),i}updateArcAABBBoundsAccurate(t,e,i){let{outerRadius:r=e.outerRadius,innerRadius:n=e.innerRadius}=t,{outerPadding:s=e.outerPadding,innerPadding:o=e.innerPadding}=t;if((r+=s)<(n-=o)){let t=r;r=n,n=t}let{endAngle:l=e.endAngle,startAngle:u=e.startAngle}=t;if(u>l){let t=u;u=l,l=t}return r<=a.Ho?i.set(0,0,0,0):Math.abs(l-u)>a.f7-a.Ho?i.set(-r,-r,r,r):((0,h.jx)(u,l,r,i),(0,h.jx)(u,l,n,i)),i}needUpdateTags(t){return super.needUpdateTags(t,f)}needUpdateTag(t){return super.needUpdateTag(t,f)}toCustomPath(){var t,e,i,r;let n=super.toCustomPath();if(n)return n;let s=this.attribute,{startAngle:o,endAngle:h}=this.getParsedAngle(),u=(null!=(t=s.innerRadius)?t:0)-(null!=(e=s.innerPadding)?e:0),c=(null!=(i=s.outerRadius)?i:0)-(null!=(r=s.outerPadding)?r:0),d=(0,a.Wn)(h-o),p=h>o;if(c<u){let t=c;c=u,u=t}if(n=new l.r,c<=a.Ho)n.moveTo(0,0);else if(d>=a.f7-a.Ho)n.moveTo(0+c*(0,a.mC)(o),0+c*(0,a.O$)(o)),n.arc(0,0,c,o,h,!p),u>a.Ho&&(n.moveTo(0+u*(0,a.mC)(h),0+u*(0,a.O$)(h)),n.arc(0,0,u,h,o,p));else{let t=c*(0,a.mC)(o),e=c*(0,a.O$)(o),i=u*(0,a.mC)(h),r=u*(0,a.O$)(h);n.moveTo(0+t,0+e),n.arc(0,0,c,o,h,!p),n.lineTo(0+i,0+r),n.arc(0,0,u,h,o,p),n.closePath()}return n}clone(){return new g(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return g.NOWORK_ANIMATE_ATTR}}function m(t){return new g(t)}g.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},o.Wl)},68130:function(t,e,i){"use strict";let r;i.d(e,{o:()=>s});var n=i(66987);function s(t){return r||(r=n.i.CreateGraphic("text",{})),r.initAttributes(t),r.AABBBounds}},24217:function(t,e,i){"use strict";i.d(e,{C:()=>d,y:()=>p});var r=i(8830),n=i(52462),s=i(78085),a=i(19626),o=i(17852),l=i(92631),h=i(10773),u=i(86339);let c=["radius","startAngle","endAngle",...n.DH];class d extends n.zs{constructor(t={radius:1}){super(t),this.type="circle",this.numberType=h.Aw}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{startAngle:t,endAngle:e,radius:i}=this.attribute;return this._validNumber(t)&&this._validNumber(e)&&this._validNumber(i)}getGraphicTheme(){return(0,o.gh)(this).circle}updateAABBBounds(t,e,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateCircleAABBBoundsImprecise(t,e,i):this.updateCircleAABBBoundsAccurate(t,e,i));let{tb1:n,tb2:s}=l.w.graphicService.updateTempAABBBounds(i);return(0,u.E)(t,e,n),i.union(n),n.setValue(s.x1,s.y1,s.x2,s.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,l.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}updateCircleAABBBoundsImprecise(t,e,i){let{radius:r=e.radius}=t;return i.set(-r,-r,r,r),i}updateCircleAABBBoundsAccurate(t,e,i){let{startAngle:n=e.startAngle,endAngle:s=e.endAngle,radius:o=e.radius}=t;return s-n>r.f7-r.Ho?i.set(-o,-o,o,o):(0,a.jx)(n,s,o,i),i}needUpdateTags(t){return super.needUpdateTags(t,c)}needUpdateTag(t){return super.needUpdateTag(t,c)}toCustomPath(){var t,e,i;let r=super.toCustomPath();if(r)return r;let n=this.attribute,a=null!=(t=n.radius)?t:this.getDefaultAttribute("radius"),o=null!=(e=n.startAngle)?e:this.getDefaultAttribute("startAngle"),l=null!=(i=n.endAngle)?i:this.getDefaultAttribute("endAngle");return(r=new s.r).arc(0,0,a,o,l),r}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}}function p(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=n.Wl},82265:function(t,e,i){"use strict";i.d(e,{F1:()=>l,Iq:()=>B,J7:()=>w,T5:()=>T,Up:()=>m,VF:()=>A,WC:()=>c,YW:()=>E,ZD:()=>S,bZ:()=>b,e9:()=>x,eh:()=>y,h8:()=>_,jK:()=>M,kx:()=>C,pp:()=>h,q9:()=>d,t8:()=>v,th:()=>D,xF:()=>g});var r=i(69182),n=i(8830),s=i(85476),a=i(78085),o=i(20533);let l={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new r.y},h={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},u={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},c=Object.assign({outerBorder:Object.assign(Object.assign({},u),{distance:0}),innerBorder:Object.assign(Object.assign({},u),{distance:0})},u),d={text:"",maxLineWidth:1/0,maxWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:"PingFang SC,Microsoft Yahei,system-ui,'-apple-system',segoe ui,\n    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol",fontWeight:"",ellipsis:"…",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0,measureMode:o.r.fontBounding,keepCenterInLine:!1},p=Object.assign(Object.assign(Object.assign(Object.assign({forceBoundsWidth:void 0,forceBoundsHeight:void 0,opacity:1,background:null,autoAnimateTexture:!1,textureRatio:1,textureOptions:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,backgroundKeepAspectRatio:!1,backgroundClip:!0,backgroundScale:1,backgroundOffsetX:0,backgroundOffsetY:0,blur:0,filter:"",cursor:null,html:null,react:null,vue:null},h),c),{alignSelf:"auto"}),{pickStrokeBuffer:0}),f={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},g=Object.assign(Object.assign(Object.assign({strokeSeg:null,renderable:!0,pickable:!0,shadowGraphic:void 0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,fillStrokeOrder:0,renderStyle:"default",pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden",shadowPickMode:"graphic",keepStrokeScale:!1,clipConfig:null,roughStyle:null},{_debug_bounds:!1}),p),l),m=Object.assign(Object.assign({},g),{startAngle:0,endAngle:n.f7,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),y=Object.assign(Object.assign(Object.assign({},g),f),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1,curveTension:1}),v=Object.assign(Object.assign({},g),{radius:1,startAngle:0,endAngle:n.f7}),b=Object.assign(Object.assign({},g),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",baseOpacity:1,cornerType:"round"}),x=Object.assign(Object.assign({},g),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),_=Object.assign(Object.assign(Object.assign({},g),f),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1,curveTension:1}),w=Object.assign(Object.assign({},g),{path:new a.r,fillStrokeOrder:1,clipRange:1,customPath:()=>{s.Y.getInstance().warn("空函数")}}),S=Object.assign(Object.assign({},g),{points:[],cornerRadius:0,closePath:!0}),A=Object.assign(Object.assign({},g),{width:100,height:100,spikes:5,thickness:.5}),C=Object.assign(Object.assign({},g),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0,cornerType:"round",drawStrokeWhenZeroWH:!1});Object.assign(Object.assign({},g),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0,cornerType:"round",drawStrokeWhenZeroWH:!1});let D=Object.assign(Object.assign({},g),{symbolType:"circle",size:10,keepDirIn3d:!0,clipRange:1}),T=Object.assign(Object.assign(Object.assign({},g),d),{strokeBoundsBuffer:0,keepDirIn3d:!0}),B=Object.assign(Object.assign(Object.assign({},g),d),{upgradeAttrs:null,editable:!1,editOptions:null,ascentDescentMode:"actual",width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],disableAutoWrapLine:!1,maxHeight:void 0,maxWidth:void 0,singleLine:!1}),M=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0,maxWidth:500,maxHeight:500},g),{fill:!0,cornerRadius:0,cornerType:"round"}),E=Object.assign(Object.assign({},M),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1})},10773:function(t,e,i){"use strict";i.d(e,{$M:()=>f,Aw:()=>o,B5:()=>g,Hf:()=>u,IJ:()=>s,IO:()=>b,I_:()=>l,Kh:()=>d,Lo:()=>x,PN:()=>h,Ri:()=>a,Us:()=>m,_u:()=>p,fB:()=>y,qm:()=>c,r_:()=>n,tA:()=>v});var r=i(55105);let n=(0,r.Gg)(),s=(0,r.Gg)(),a=(0,r.Gg)(),o=(0,r.Gg)();(0,r.Gg)();let l=(0,r.Gg)(),h=(0,r.Gg)(),u=(0,r.Gg)(),c=(0,r.Gg)(),d=(0,r.Gg)();(0,r.Gg)();let p=(0,r.Gg)();(0,r.Gg)();let f=(0,r.Gg)();(0,r.Gg)();let g=(0,r.Gg)(),m=(0,r.Gg)(),y=Symbol.for("GraphicService"),v=Symbol.for("GraphicCreator"),b={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"},x=Object.keys(b)},66987:function(t,e,i){"use strict";i.d(e,{i:()=>r});let r=new class{constructor(){this.store=new Map}RegisterGraphicCreator(t,e){this.store.set(t,e),this[t]=e}CreateGraphic(t,e){let i=this.store.get(t);return i?i(e):null}}},86339:function(t,e,i){"use strict";i.d(e,{E:()=>r});let r=(t,e,i)=>{let{outerBorder:r,shadowBlur:n=e.shadowBlur}=t;if(r){let t=e.outerBorder,{distance:s=t.distance,lineWidth:a=t.lineWidth}=r;i.expand(s+(n+a)/2)}return i}},44176:function(t,e,i){"use strict";i.d(e,{JG:()=>v,M_:()=>y,RT:()=>m});var r,n=i(34865),s=i(26845),a=i(63401),o=i(4654),l=i(46009),h=i(52807),u=i(55105),c=i(80358),d=i(49029),p=i(72618),f=i(10773),g=i(41712);function m(t,e,i){var r;let{x:n=i.x,y:s=i.y,z:a=i.z,dx:o=i.dx,dy:l=i.dy,dz:h=i.dz,scaleX:u=i.scaleX,scaleY:d=i.scaleY,scaleZ:p=i.scaleZ,alpha:f=i.alpha,beta:m=i.beta,angle:y=i.angle,anchor3d:v=e.attribute.anchor,anchor:b}=e.attribute,x=[0,0,0];if(v){if("string"==typeof v[0]){let t=parseFloat(v[0])/100,i=e.AABBBounds;x[0]=i.x1+(i.x2-i.x1)*t}else x[0]=v[0];if("string"==typeof v[1]){let t=parseFloat(v[1])/100,i=e.AABBBounds;x[1]=i.x1+(i.x2-i.x1)*t}else x[1]=v[1];x[2]=null!=(r=v[2])?r:0}if((0,g.TL)(t),(0,g.Iu)(t,t,[n+o,s+l,a+h]),(0,g.Iu)(t,t,[x[0],x[1],x[2]]),(0,g.lM)(t,t,m),(0,g.uD)(t,t,f),(0,g.Iu)(t,t,[-x[0],-x[1],x[2]]),(0,g.mN)(t,t,[u,d,p]),y){let i=c.yp.allocate(),r=[0,0];if(b){if("string"==typeof v[0]){let t=parseFloat(v[0])/100,i=e.AABBBounds;r[0]=i.x1+(i.x2-i.x1)*t}else r[0]=v[0];if("string"==typeof v[1]){let t=parseFloat(v[1])/100,i=e.AABBBounds;r[1]=i.x1+(i.x2-i.x1)*t}else r[1]=v[1]}(0,g.Iu)(i,i,[r[0],r[1],0]),(0,g.jI)(i,i,y),(0,g.Iu)(i,i,[-r[0],-r[1],0]),(0,g.G9)(t,t,i)}}function y(t){let{alpha:e,beta:i}=t.attribute;return e||i}let v=class{constructor(t){this.creator=t,this.hooks={onAttributeUpdate:new l.n(["graphic"]),onSetStage:new l.n(["graphic","stage"]),onRemove:new l.n(["graphic"]),onRelease:new l.n(["graphic"]),onAddIncremental:new l.n(["graphic","group","stage"]),onClearIncremental:new l.n(["graphic","group","stage"]),beforeUpdateAABBBounds:new l.n(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new l.n(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"]),clearAABBBounds:new l.n(["graphic","stage","aabbBounds"])},this.tempAABBBounds1=new a.FB,this.tempAABBBounds2=new a.FB}onAttributeUpdate(t){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(t)}onSetStage(t,e){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(t,e)}onRemove(t){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(t)}onRelease(t){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(t)}onAddIncremental(t,e,i){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(t,e,i)}onClearIncremental(t,e){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(t,e)}beforeUpdateAABBBounds(t,e,i,r){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(t,e,i,r)}afterUpdateAABBBounds(t,e,i,r,n){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(t,e,i,r,n)}clearAABBBounds(t,e,i){this.hooks.clearAABBBounds.taps.length&&this.hooks.clearAABBBounds.call(t,e,i)}updatePathProxyAABBBounds(t,e){let i="function"==typeof e.pathProxy?e.pathProxy(e.attribute):e.pathProxy;if(!i)return!1;let r=new d.C(t);return(0,p.h)(i.commandList,r,0,0),!0}updateHTMLTextAABBBounds(t,e,i,r){let{textAlign:n,textBaseline:s}=t;if(null!=t.forceBoundsHeight){let e=(0,o.Z)(t.forceBoundsHeight)?t.forceBoundsHeight:t.forceBoundsHeight(),r=(0,h.nV)(s,e,e);i.set(i.x1,r,i.x2,r+e)}if(null!=t.forceBoundsWidth){let e=(0,o.Z)(t.forceBoundsWidth)?t.forceBoundsWidth:t.forceBoundsWidth(),r=(0,h.js)(n,e);i.set(r,i.y1,r+e,i.y2)}}combindShadowAABBBounds(t,e){if(e&&e.shadowRoot){let i=e.shadowRoot.AABBBounds;t.union(i)}}transformAABBBounds(t,e,i,r,n){if(!e.empty()){let{scaleX:n=i.scaleX,scaleY:s=i.scaleY,stroke:a=i.stroke,shadowBlur:o=i.shadowBlur,lineWidth:l=i.lineWidth,pickStrokeBuffer:h=i.pickStrokeBuffer,strokeBoundsBuffer:c=i.strokeBoundsBuffer}=t,d=this.tempAABBBounds1,p=this.tempAABBBounds2;if(a&&l){let t=(l+h)/Math.abs(n+s);(0,u.ph)(d,t,r,c),e.union(d),d.setValue(p.x1,p.y1,p.x2,p.y2)}if(o){let{shadowOffsetX:r=i.shadowOffsetX,shadowOffsetY:a=i.shadowOffsetY}=t,l=o/Math.abs(n+s)*2;(0,u.ph)(d,l,!1,c+1),d.translate(r,a),e.union(d)}}if(this.combindShadowAABBBounds(e,n),e.empty())return;let s=!0,o=n.transMatrix;n&&n.isContainer&&(s=1!==o.a||0!==o.b||0!==o.c||1!==o.d||0!==o.e||0!==o.f),s&&(0,a.n2)(e,e,o)}validCheck(t,e,i,r){if(!r||null!=t.forceBoundsHeight||null!=t.forceBoundsWidth||r.shadowRoot||r.isContainer)return!0;let{visible:n=e.visible}=t;return!(!r.valid||!n)||(i.empty()||(r.parent&&i.transformWithMatrix(r.parent.globalTransMatrix),this.clearAABBBounds(r,r.stage,i),i.clear()),!1)}updateTempAABBBounds(t){let e=this.tempAABBBounds1,i=this.tempAABBBounds2;return e.setValue(t.x1,t.y1,t.x2,t.y2),i.setValue(t.x1,t.y1,t.x2,t.y2),{tb1:e,tb2:i}}};v=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)(),(r=(0,s.f)(f.tA),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],v)},52462:function(t,e,i){"use strict";i.d(e,{zs:()=>t5,DH:()=>tQ,Wl:()=>t3});var r=i(63401),n=i(95723),s=i(8830),a=i(69182),o=i(19498),l=i(54326),h=i(83624),u=i(36410),c=i(6761),d=i(80971),p=i(21883),f=i.n(p),g=i(85476),m=i(63778),y=i(96241),v=i(27753);class b extends f(){get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=v.R.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(t,e=!1){if(e){let e=this._lastChild,i=0;for(;e;){if(t(e,i++))return;e=e._prev}}else{let e=this._firstChild,i=0;for(;e;){if(t(e,i++))return;e=e._next}}}forEachChildrenAsync(t,e=!1){var i,r,n,s;return i=this,r=void 0,n=void 0,s=function*(){if(e){let e=this._lastChild,i=0;for(;e;){let r=t(e,i++);if(r.then&&(r=yield r),r)return;e=e._prev}}else{let e=this._firstChild,i=0;for(;e;){let r=t(e,i++);if(r.then&&(r=yield r),r)return;e=e._next}}},new(n||(n=Promise))(function(t,e){function a(t){try{l(s.next(t))}catch(t){e(t)}}function o(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):((i=e.value)instanceof n?i:new n(function(t){t(i)})).then(a,o)}l((s=s.apply(i,r||[])).next())})}forEach(t){return this.forEachChildren(t)}appendChild(t,e=!0){if(this._uid===t._uid)return null;if(!e&&t.isAncestorsOf(this))throw Error("【Node::appendChild】不能将父辈元素append为子元素");return t.parent&&t.parent.removeChild(t),t.parent=this,this._lastChild?(this._lastChild._next=t,t._prev=this._lastChild,this._lastChild=t):(this._firstChild=this._lastChild=t,t._prev=t._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this.setCount(t.count),this._structEdit=!0,t}appendChildArrHighPerformance(t,e=!1){return console.error("暂不支持该函数"),t}insertBefore(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw Error("【Node::insertBefore】不能将父辈元素insert为子元素");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,t._prev=e._prev,e._prev?e._prev._next=t:this._firstChild=t,e._prev=t,t._next=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertAfter(t,e){if(!e)return this.appendChild(t);if(this===t||t===e)return null;if(t.isAncestorsOf(this))throw Error("【Node::insertAfter】不能将父辈元素insert为子元素");return e.parent!==this?null:(t.parent&&t.parent.removeChild(t),t.parent=this,e._next?(e._next._prev=t,t._next=e._next):this._lastChild=t,e._next=t,t._prev=e,this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t)}insertInto(t,e){if(!this._ignoreWarn&&this._nodeList&&g.Y.getInstance().warn("insertIntoKeepIdx和insertInto混用可能会存在错误"),e>=this.childrenCount)return this.appendChild(t);if(this===t)return null;if(t.isAncestorsOf(this))throw Error("【Node::insertBefore】不能将父辈元素insert为子元素");if(t.parent&&t.parent.removeChild(t),t.parent=this,0===e)t._next=this._firstChild,this._firstChild&&(this._firstChild._prev=t),t._prev=null,this._firstChild=t;else{let i=this._firstChild;for(let t=0;t<e;t++){if(!i)return null;t>0&&(i=i._next)}if(!i)return null;t._next=i._next,t._prev=i,i._next=t,t._next&&(t._next._prev=t)}return this._idMap||(this._idMap=new Map),this._idMap.set(t._uid,t),this._structEdit=!0,this.setCount(t.count),t}insertIntoKeepIdx(t,e){let i;if(this._nodeList||(this._nodeList=this.children),this._nodeList[e]){let i=this._nodeList[e];return this._nodeList.splice(e,0,t),this.insertBefore(t,i)}this._nodeList[e]=t;for(let t=e-1;t>=0&&!(i=this._nodeList[t]);t--);if(i)return i._next?this.insertBefore(t,i._next):this.appendChild(t);this._ignoreWarn=!0;let r=this.insertInto(t,0);return this._ignoreWarn=!1,r}removeChild(t){if(!this._idMap||!this._idMap.has(t._uid))return null;if(this._idMap.delete(t._uid),this._nodeList){let e=this._nodeList.findIndex(e=>e===t);e>=0&&this._nodeList.splice(e,1)}return t._prev?t._prev._next=t._next:this._firstChild=t._next,t._next?t._next._prev=t._prev:this._lastChild=t._prev,t.parent=null,t._prev=null,t._next=null,this._structEdit=!0,this.setCount(-t.count),t}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(t){if(!this._idMap)return;this._nodeList&&(this._nodeList.length=0);let e=this._firstChild;for(;e;){let t=e._next;e.parent=null,e._prev=null,e._next=null,e=e._next,e=t}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(t,e){throw Error("暂不支持")}find(t,e=!1){let i=null;return this.forEachChildren((e,r)=>!(e===this||!t(e,r))&&(i=e,!0)),e&&this.forEachChildren(e=>{if(e.isContainer){let r=e.find(t,!0);if(r)return i=r,!0}return!1}),i}findAll(t,e=!1){let i=[];return this.forEachChildren((e,r)=>{e!==this&&t(e,r)&&i.push(e)}),e&&this.forEachChildren(e=>{if(e.isContainer){let r=e.findAll(t,!0);r.length&&(i=i.concat(r))}}),i}getElementById(t){return this.find(e=>e.id===t,!0)}findChildById(t){return this.getElementById(t)}findChildByUid(t){return this._idMap&&this._idMap.get(t)||null}getElementsByName(t){return this.findAll(e=>e.name===t,!0)}findChildrenByName(t){return this.getElementsByName(t)}getElementsByType(t){return this.findAll(e=>e.type===t,!0)}getChildByName(t,e=!1){return this.find(e=>e.name===t,e)}getChildAt(t){let e=this._firstChild;if(!e)return null;for(let i=0;i<t;i++){if(!e._next)return null;e=e._next}return e}at(t){return this.getChildAt(t)}containNode(t){if(!this._idMap)return!1;if(this._idMap.has(t._uid))return!0;let e=this._firstChild;for(;e;){if(e.containNode(t))return!0;e=e._next}return!1}getRootNode(){let t=this.parent;for(;null==t?void 0:t.parent;)t=t.parent;return t||this}hasChildNodes(){return null!==this._firstChild}addChild(t){return this.appendChild(t)}add(t){return this.appendChild(t)}getChildren(){let t=[],e=this._firstChild;for(;e;)t.push(e),e=e._next;return t}isChildOf(t){return!!this.parent&&this.parent._uid===t._uid}isParentOf(t){return t.isChildOf(this)}isDescendantsOf(t){let e=this.parent;if(!e)return!1;do{if(e._uid===t._uid)return!0;e=e.parent}while(null!==e);return!1}isAncestorsOf(t){return t.isDescendantsOf(this)}getAncestor(t){throw Error("暂不支持")}setAllDescendantsProps(t,e){let i=this._firstChild;for(;i;)i[t]=e,i.setAllDescendantsProps(t,e),i=i._next}setCount(t){this._count+=t;let e=this.parent;if(e)do e._count+=t,e=e.parent;while(null!==e)}clone(){throw Error("暂不支持")}cloneTo(t){throw Error("暂不支持")}getParent(){return this.parent}del(t){return this.removeChild(t)}addEventListener(t,e,i){let r=(0,m.Z)(i,!0)&&i||(0,d.Z)(i)&&i.capture,n=(0,d.Z)(i)&&i.once,s=(0,y.Z)(e)?void 0:e;return t=r?`${t}capture`:t,e=(0,y.Z)(e)?e:e.handleEvent,n?super.once(t,e,s):super.on(t,e,s),this}on(t,e,i){return this.addEventListener(t,e,i)}removeEventListener(t,e,i){let r=(0,m.Z)(i,!0)&&i||(0,d.Z)(i)&&i.capture,n=(0,y.Z)(e)?void 0:e;t=r?`${t}capture`:t,e=(0,y.Z)(e)?e:e.handleEvent;let s=(0,d.Z)(i)&&i.once;return super.off(t,e,n,s),this}off(t,e,i){return this.removeEventListener(t,e,i)}once(t,e,i){return(0,d.Z)(i)?(i.once=!0,this.addEventListener(t,e,i)):this.addEventListener(t,e,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(t,...e){return super.emit(t.type,t,...e),!t.defaultPrevented}emit(t,e){return this.dispatchEvent(t,e)}release(){this.removeAllListeners()}}var x=i(35357),_=i(15928),w=i(82265),S=i(92631),A=i(78085),C=i(84453),D=i(97708),T=i(49029),B=i(72618),M=i(19626),E=i(4654);class k{bounds(t,e){if((0,E.Z)(t)){let i=t/2;e.x1=-i,e.x2=i,e.y1=-i,e.y2=i}else e.x1=-t[0]/2,e.x2=t[0]/2,e.y1=-t[1]/2,e.y2=t[1]/2}parseSize(t){return(0,E.Z)(t)?t:Math.min(t[0],t[1])}}function F(t,e,i,r,n){return n?t.arc(i,r,e,0,s.BZ,!1,n):t.arc(i,r,e,0,s.BZ),!1}let R=new class extends k{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(t,e,i,r,n){return F(t,this.parseSize(e)/2,i,r,n)}drawOffset(t,e,i,r,n,s){return F(t,this.parseSize(e)/2+n,i,r,s)}drawToSvgPath(t,e,i,r){let n=this.parseSize(t)/2;return`M ${e-n}, ${i} a ${n},${n} 0 1,0 ${2*n},0 a ${n},${n} 0 1,0 -${2*n},0`}},P=new class extends k{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(t,e,i,r,n){var s;return s=this.parseSize(e)/6,t.moveTo(-3*s+i,-s+r,n),t.lineTo(-s+i,-s+r,n),t.lineTo(-s+i,-3*s+r,n),t.lineTo(s+i,-3*s+r,n),t.lineTo(s+i,-s+r,n),t.lineTo(3*s+i,-s+r,n),t.lineTo(3*s+i,s+r,n),t.lineTo(s+i,s+r,n),t.lineTo(s+i,3*s+r,n),t.lineTo(-s+i,3*s+r,n),t.lineTo(-s+i,s+r,n),t.lineTo(-3*s+i,s+r,n),t.closePath(),!0}drawOffset(t,e,i,r,n,s){var a;return a=this.parseSize(e)/6,t.moveTo(-3*a+i-n,-a+r-n,s),t.lineTo(-a+i-n,-a+r-n,s),t.lineTo(-a+i-n,-3*a+r-n,s),t.lineTo(a+i+n,-3*a+r-n,s),t.lineTo(a+i+n,-a+r-n,s),t.lineTo(3*a+i+n,-a+r-n,s),t.lineTo(3*a+i+n,a+r+n,s),t.lineTo(a+i+n,a+r+n,s),t.lineTo(a+i+n,3*a+r+n,s),t.lineTo(-a+i-n,3*a+r+n,s),t.lineTo(-a+i-n,a+r+n,s),t.lineTo(-3*a+i-n,a+r+n,s),t.closePath(),!0}};function O(t,e,i,r,n){return t.moveTo(i,r-e,n),t.lineTo(e+i,r,n),t.lineTo(i,r+e,n),t.lineTo(i-e,r,n),t.closePath(),!0}let L=new class extends k{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(t,e,i,r,n){return O(t,this.parseSize(e)/2,i,r,n)}drawFitDir(t,e,i,r,n){return O(t,this.parseSize(e)/2,i,r,n)}drawOffset(t,e,i,r,n,s){return O(t,this.parseSize(e)/2+n,i,r,s)}};function I(t,e,i,r){let n=2*e;return t.rect(i-e,r-e,n,n),!1}let z=new class extends k{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(t,e,i,r){return I(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,n){return I(t,this.parseSize(e)/2+n,i,r)}};function Z(t,e,i,r,n=0){return t.moveTo(i+e+2*n,e+r+n),t.lineTo(i-e-2*n,e+r+n),t.lineTo(i,r-e-2*n),t.closePath(),!0}class j extends k{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(t,e,i,r){return Z(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,n){return Z(t,this.parseSize(e)/2,i,r,n)}}let W=new j,U=new class extends j{constructor(){super(...arguments),this.type="triangle"}},N=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),H=Math.sin(s.BZ/10)*N,G=-Math.cos(s.BZ/10)*N;function V(t,e,i,r){let n=H*e,a=G*e;t.moveTo(i,-e+r),t.lineTo(n+i,a+r);for(let o=1;o<5;++o){let l=s.BZ*o/5,h=Math.cos(l),u=Math.sin(l);t.lineTo(u*e+i,-h*e+r),t.lineTo(h*n-u*a+i,u*n+h*a+r)}return t.closePath(),!0}let X=new class extends k{constructor(){super(...arguments),this.type="star",this.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"}draw(t,e,i,r){return V(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,n){return V(t,this.parseSize(e)/2+n,i,r)}},Y=(0,s._b)(3);function $(t,e,i,r){let n=e/Y,s=n/5;return t.moveTo(0+i,-e+r),t.lineTo(n/2+i,r),t.lineTo(s/2+i,r),t.lineTo(s/2+i,e+r),t.lineTo(-s/2+i,e+r),t.lineTo(-s/2+i,r),t.lineTo(-n/2+i,r),t.closePath(),!0}let q=new class extends k{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(t,e,i,r){return $(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,n){return $(t,this.parseSize(e)/2+n,i,r)}};function K(t,e,i,r){let n=2*e;return t.moveTo(i,-e+r),t.lineTo(n/3/2+i,e+r),t.lineTo(-n/3/2+i,e+r),t.closePath(),!0}let Q=new class extends k{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(t,e,i,r){return K(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,n){return K(t,this.parseSize(e)/2+n,i,r)}};function J(t,e,i,r){return t.moveTo(-e+i,r),t.lineTo(i,e+r),!1}let tt=new class extends k{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(t,e,i,r){return J(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,n){return J(t,this.parseSize(e)/2+n,i,r)}},te=(0,s._b)(3)/2,ti=1/(0,s._b)(12);function tr(t,e,i,r){let n=e/2,s=e*ti,a=e*ti+e,o=-n;return t.moveTo(n+i,s+r),t.lineTo(n+i,a+r),t.lineTo(o+i,a+r),t.lineTo(-.5*n-te*s+i,te*n+-.5*s+r),t.lineTo(-.5*n-te*a+i,te*n+-.5*a+r),t.lineTo(-.5*o-te*a+i,te*o+-.5*a+r),t.lineTo(-.5*n+te*s+i,-.5*s-te*n+r),t.lineTo(-.5*n+te*a+i,-.5*a-te*n+r),t.lineTo(-.5*o+te*a+i,-.5*a-te*o+r),t.closePath(),!1}let tn=new class extends k{constructor(){super(...arguments),this.type="wye",this.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z"}draw(t,e,i,r){return tr(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,n){return tr(t,this.parseSize(e)/2+n,i,r)}};function ts(t,e,i,r,n){return t.moveTo(-e+i-2*n,r),t.lineTo(e+i+n,e+r+2*n),t.lineTo(e+i+n,r-e-2*n),t.closePath(),!0}let ta=new class extends k{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(t,e,i,r){return ts(t,this.parseSize(e)/2,i,r,0)}drawOffset(t,e,i,r,n){return ts(t,this.parseSize(e)/2,i,r,n)}};function to(t,e,i,r,n=0){return t.moveTo(i-e-n,e+r+2*n),t.lineTo(e+i+2*n,r),t.lineTo(i-e-n,r-e-2*n),t.closePath(),!0}let tl=new class extends k{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(t,e,i,r){return to(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,n){return to(t,this.parseSize(e)/2,i,r,n)}};function th(t,e,i,r,n=0){return t.moveTo(i-e-2*n,r-e-n),t.lineTo(i+e+2*n,r-e-n),t.lineTo(i,r+e+2*n),t.closePath(),!0}let tu=new class extends k{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(t,e,i,r){return th(t,this.parseSize(e)/2,i,r)}drawOffset(t,e,i,r,n){return th(t,this.parseSize(e)/2,i,r,n)}},tc=(0,s._b)(3);function td(t,e,i,r){let n=e*tc;return t.moveTo(i,r+-n/3*2),t.lineTo(e+i,r+n),t.lineTo(i-e,r+n),t.closePath(),!0}let tp=new class extends k{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(t,e,i,r){return td(t,this.parseSize(e)/2/tc,i,r)}drawOffset(t,e,i,r,n){return td(t,this.parseSize(e)/2/tc+n,i,r)}};function tf(t,e,i,r){let n=2*e;return t.moveTo(e+i,r-n),t.lineTo(i-e,r),t.lineTo(e+i,n+r),!0}let tg=new class extends k{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(t,e,i,r){return tf(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,n){return tf(t,this.parseSize(e)/4+n,i,r)}};function tm(t,e,i,r){let n=2*e;return t.moveTo(i-e,r-n),t.lineTo(i+e,r),t.lineTo(i-e,n+r),!0}let ty=new class extends k{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(t,e,i,r){return tm(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,n){return tm(t,this.parseSize(e)/4+n,i,r)}};function tv(t,e,i,r){let n=2*e;return t.moveTo(i-n,r+e),t.lineTo(i,r-e),t.lineTo(i+n,r+e),!0}let tb=new class extends k{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(t,e,i,r){return tv(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,n){return tv(t,this.parseSize(e)/4+n,i,r)}};function tx(t,e,i,r){let n=2*e;return t.moveTo(i-n,r-e),t.lineTo(i,r+e),t.lineTo(i+n,r-e),!0}let t_=new class extends k{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(t,e,i,r){return tx(t,this.parseSize(e)/4,i,r)}drawOffset(t,e,i,r,n){return tx(t,this.parseSize(e)/4+n,i,r)}};function tw(t,e,i,r,n){return t.moveTo(i,r-e),t.lineTo(i,r+e),!0}let tS=new class extends k{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(t,e,i,r,n){return tw(t,this.parseSize(e)/2,i,r,n)}drawOffset(t,e,i,r,n,s){return tw(t,this.parseSize(e)/2+n,i,r,s)}drawToSvgPath(t,e,i,r){let n=this.parseSize(t)/2;return`M ${e}, ${i-n} L ${e},${i+n}`}};function tA(t,e,i,r,n){return t.moveTo(i-e,r),t.lineTo(i+e,r),!0}let tC=new class extends k{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(t,e,i,r,n){return tA(t,this.parseSize(e)/2,i,r,n)}drawOffset(t,e,i,r,n,s){return tA(t,this.parseSize(e)/2+n,i,r,s)}drawToSvgPath(t,e,i,r){let n=this.parseSize(t)/2;return`M ${e-n}, ${i} L ${e+n},${i}`}};function tD(t,e,i,r,n){return t.moveTo(i-e,r-e),t.lineTo(i+e,r+e),t.moveTo(i+e,r-e),t.lineTo(i-e,r+e),!0}let tT=new class extends k{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(t,e,i,r,n){return tD(t,this.parseSize(e)/2,i,r,n)}drawOffset(t,e,i,r,n,s){return tD(t,this.parseSize(e)/2+n,i,r,s)}drawToSvgPath(t,e,i,r){let n=this.parseSize(t)/2;return`M ${e-n}, ${i-n} L ${e+n},${i+n} M ${e+n}, ${i-n} L ${e-n},${i+n}`}};function tB(t,e,i,r){return t.rect(i-e[0]/2,r-e[1]/2,e[0],e[1]),!1}function tM(t,e,i,r){let n=e/2;return t.rect(i-e/2,r-n/2,e,n),!1}let tE=new class extends k{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(t,e,i,r){return(0,E.Z)(e)?tM(t,e,i,r):tB(t,e,i,r)}drawWithClipRange(t,e,i,r,n,s,a){(0,E.Z)(e)&&(e=[e,e/2]);let o=2*(e[0]+e[1])*n,l=[{x:i+e[0]/2,y:r-e[1]/2},{x:i+e[0]/2,y:r+e[1]/2},{x:i-e[0]/2,y:r+e[1]/2},{x:i-e[0]/2,y:r-e[1]/2}],h=0,u=l[3];t.moveTo(u.x,u.y);for(let e=0;e<l.length;e++){let i=l[e],r=Math.sqrt((i.x-u.x)*(i.x-u.x)+(i.y-u.y)*(i.y-u.y));if(h+r>o){let e=(i.x-u.x)*(o-h)/r,n=(i.y-u.y)*(o-h)/r;t.lineTo(u.x+e,u.y+n);break}t.lineTo(i.x,i.y),u=i,h+=r}return!1}drawOffset(t,e,i,r,n){return(0,E.Z)(e)?tM(t,e+2*n,i,r):tB(t,[e[0]+2*n,e[1]+2*n],i,r)}},tk={};[R,P,L,z,tp,U,X,q,Q,tt,tn,ta,tl,W,tu,tg,ty,tb,t_,tE,tS,tC,tT].forEach(t=>{tk[t.type]=t});let tF={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"},tR=new r.FB;class tP{constructor(t,e,i=!1){this.pathStr="",this.type=t,(0,n.Z)(e)?this.svgCache=e:this.path=e,this.isSvg=i}drawOffset(t,e,i,r,n,s,a){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(n=>{t.beginPath(),(0,B.h)(n.path.commandList,t,i,r,e,e),a&&a(n.path,n.attribute)}),!1):((0,B.h)(this.path.commandList,t,i,r,e+n,e+n),!1)}draw(t,e,i,r,n,s){return e=this.parseSize(e),this.drawOffset(t,e,i,r,0,n,s)}parseSize(t){return(0,E.Z)(t)?t:Math.min(t[0],t[1])}drawWithClipRange(t,e,i,r,n,s,a){return e=this.parseSize(e),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(s=>{s.path.drawWithClipRange(t,e,i,r,n),a&&a(s.path,s.attribute)}),!1):(this.path.drawWithClipRange(t,e,i,r,n),!1)}bounds(t,e){if(t=this.parseSize(t),this.isSvg){if(!this.svgCache)return;return e.clear(),void this.svgCache.forEach(({path:i})=>{tR.x1=i.bounds.x1*t,tR.y1=i.bounds.y1*t,tR.x2=i.bounds.x2*t,tR.y2=i.bounds.y2*t,e.union(tR)})}this.path.bounds&&(e.x1=this.path.bounds.x1*t,e.y1=this.path.bounds.y1*t,e.x2=this.path.bounds.x2*t,e.y2=this.path.bounds.y2*t)}}class tO{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}function tL(t,e,i,r){let n=t.indexOf(e,i);if(-1===n)throw Error(r);return n+e.length-1}function tI(t,e,i,r=">"){let n=function(t,e,i=">"){let r,n="";for(let s=e;s<t.length;s++){let e=t[s];if(r)e===r&&(r="");else if('"'===e||"'"===e)r=e;else if(e===i[0]){if(!i[1]||t[s+1]===i[1])return{data:n,index:s}}else"	"===e&&(e=" ");n+=e}}(t,e+1,r);if(!n)return;let s=n.data,a=n.index,o=s.search(/\s/),l=s,h=!0;-1!==o&&(l=s.substr(0,o).replace(/\s\s*$/,""),s=s.substr(o+1));let u=l;if(i){let t=l.indexOf(":");-1!==t&&(h=(l=l.substr(t+1))!==n.data.substr(t+1))}return{tagName:l,tagExp:s,closeIndex:a,attrExpPresent:h,rawTagName:u}}let tz=RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");class tZ{constructor(t){this.currentNode=null,this.options=t,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(t,e,i){let r=e.tagname;"string"==typeof r&&(e.tagname=r),t.addChild(e)}buildAttributesMap(t,e,i){let r={};if(!t)return;let n=function(t,e){let i=[],r=e.exec(t);for(;r;){let n=[];n.startIndex=e.lastIndex-r[0].length;let s=r.length;for(let t=0;t<s;t++)n.push(r[t]);i.push(n),r=e.exec(t)}return i}(t,tz),s=n.length;for(let t=0;t<s;t++){let e=n[t][1],i=n[t][4];e&&(r[e]=void 0===i||(isNaN(i)?i:Number(i)))}return r}parseXml(t){t=t.replace(/\r\n?/g,"\n");let e=new tO("!xml"),i=e,r="",n="";for(let s=0;s<t.length;s++)if("<"===t[s])if("/"===t[s+1]){let e=tL(t,">",s,"Closing Tag is not closed."),a=n.lastIndexOf(".");n=n.substring(0,a),(i=this.tagsNodeStack.pop())&&i.child&&r&&i.child[i.child.length-1][":@"]&&(i.child[i.child.length-1][":@"].text=r),r="",s=e}else if("?"===t[s+1])s=tI(t,s,!1,"?>").closeIndex+1;else if("!--"===t.substr(s+1,3))s=tL(t,"--\x3e",s+4,"Comment is not closed.");else{let a=tI(t,s,!1),o=a.tagName,l=a.tagExp,h=a.attrExpPresent,u=a.closeIndex;if(o!==e.tagname&&(n+=n?"."+o:o),l.length>0&&l.lastIndexOf("/")===l.length-1){"/"===o[o.length-1]?(o=o.substr(0,o.length-1),n=n.substr(0,n.length-1),l=o):l=l.substr(0,l.length-1);let t=new tO(o);o!==l&&h&&(t[":@"]=this.buildAttributesMap(l,n,o)),this.addChild(i,t,n),n=n.substr(0,n.lastIndexOf("."))}else{let t=new tO(o);this.tagsNodeStack.push(i),o!==l&&h&&(t[":@"]=this.buildAttributesMap(l,n,o)),this.addChild(i,t,n),i=t}r="",s=u}else r+=t[s];return e.child}}class tj{constructor(t){this.options=Object.assign({},tj.defaultOptions,t)}valid(t){return t.startsWith("<")}parse(t){var e,i;return!!this.valid&&(e=new tZ(this.options).parseXml(t),this.options,function t(e,i){let r={};for(let n=0;n<e.length;n++){let s=e[n],a=function(t){let e=Object.keys(t);for(let t=0;t<e.length;t++){let i=e[t];if(":@"!==i)return i}}(s),o="";if(o=void 0===i?a:i+"."+a,void 0!==a&&s[a]){let e=t(s[a],o);Object.keys(e).length,s[":@"]&&function(t,e,i){if(e){let i=Object.keys(e),r=i.length;for(let n=0;n<r;n++){let r=i[n];t[r]=e[r]}}}(e,s[":@"],0),void 0!==r[a]&&r.hasOwnProperty(a)?(Array.isArray(r[a])||(r[a]=[r[a]]),r[a].push(e)):r[a]=e}}return r}(e))}}tj.defaultOptions={};var tW=i(10773);let tU={duration:200,easing:"cubicOut"};var tN=i(34865),tH=i(42761),tG=i(33880),tV=i(80358);let tX=new a.y(1,0,0,1,0,0),tY={x:0,y:0},t$=class{get nativeContext(){return this.path}constructor(t,e){this.matrix=new a.y(1,0,0,1,0,0),this.stack=[],this.dpr=e,this.applyedMatrix=new a.y(1,0,0,1,0,0),this.path=new A.r,this._clearMatrix=new a.y(1,0,0,1,0,0)}getCanvas(){throw Error("不支持getCanvas")}getContext(){throw Error("不支持getContext")}setTransformForCurrent(t=!1){!t&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix=this.cloneMatrix(this.matrix))}get currentMatrix(){return this.matrix}cloneMatrix(t){return tV.QE.allocateByObj(t)}clear(){this.save(),this.resetTransform(),this.restore()}reset(){this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new a.y(1,0,0,1,0,0),this.stack.length=0}restore(){this.stack.length>0&&(tV.QE.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent())}highPerformanceRestore(){this.stack.length>0&&(tV.QE.free(this.matrix),this.matrix=this.stack.pop())}rotate(t,e=!0){this.matrix.rotate(t),e&&this.setTransformForCurrent()}save(){let t=this.cloneMatrix(this.matrix);this.stack.push(t)}highPerformanceSave(){let t=this.cloneMatrix(this.matrix);this.stack.push(t)}scale(t,e,i=!0){this.matrix.scale(t,e),i&&this.setTransformForCurrent()}setScale(t,e,i=!0){this.matrix.setScale(t,e),i&&this.setTransformForCurrent()}scalePoint(t,e,i,r,n=!0){this.translate(i,r,!1),this.scale(t,e,!1),this.translate(-i,-r,!1),n&&this.setTransformForCurrent()}setTransform(t,e,i,r,n,s,a=!0,o=this.dpr){this.matrix.setValue(o*t,o*e,o*i,o*r,o*n,o*s),a&&this.setTransformForCurrent()}setTransformFromMatrix(t,e=!0,i=this.dpr){this.matrix.setValue(t.a*i,t.b*i,t.c*i,t.d*i,t.e*i,t.f*i),e&&this.setTransformForCurrent()}resetTransform(t=!0,e=this.dpr){this.setTransform(e,0,0,e,0,0),t&&this.setTransformForCurrent()}transform(t,e,i,r,n,s,a=!0){this.matrix.multiply(t,e,i,r,n,s),a&&this.setTransformForCurrent()}transformFromMatrix(t,e){this.matrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f),e&&this.setTransformForCurrent()}translate(t,e,i=!0){this.matrix.translate(t,e),i&&this.setTransformForCurrent()}rotateDegrees(t,e=!0){let i=t*Math.PI/180;this.rotate(i,e)}rotateAbout(t,e,i,r=!0){this.translate(e,i,!1),this.rotate(t,!1),this.translate(-e,-i,!1),r&&this.setTransformForCurrent()}rotateDegreesAbout(t,e,i,r=!0){this.translate(e,i,!1),this.rotateDegrees(t,!1),this.translate(-e,-i,!1),r&&this.setTransformForCurrent()}beginPath(){this.path.clear()}clip(t,e){}arc(t,e,i,r,n,s){this.path.arc(t,e,i,r,n,s)}arcTo(t,e,i,r,n){this.path.arcTo(t,e,i,r,n)}bezierCurveTo(t,e,i,r,n,s){this.path.bezierCurveTo(t,e,i,r,n,s)}closePath(){this.path.closePath()}ellipse(t,e,i,r,n,s,a,o){}lineTo(t,e){this.path.lineTo(t,e)}moveTo(t,e){this.path.moveTo(t,e)}quadraticCurveTo(t,e,i,r){this.path.quadraticCurveTo(t,e,i,r)}rect(t,e,i,r){this.path.rect(t,e,i,r)}createImageData(t,e){return null}createLinearGradient(t,e,i,r){throw Error("不支持createLinearGradient")}createPattern(t,e){throw Error("不支持createPattern")}createRadialGradient(t,e,i,r,n,s){throw Error("不支持createRadialGradient")}createConicGradient(t,e,i,r){return null}fill(t,e){}fillRect(t,e,i,r){this.path.rect(t,e,i,r)}clearRect(t,e,i,r){}fillText(t,e,i){}getImageData(t,e,i,r){return null}getLineDash(){return[]}isPointInPath(t,e){return this.matrix.transformPoint({x:t,y:e},tY),(0,tH.XS)(this.path.commandList,tY.x,tY.y)}isPointInStroke(t,e){if(!this.lineWidth)return!1;this.matrix.transformPoint({x:t,y:e},tY);let i=(0,tG.D)(this,this.lineWidth,this.dpr);return(0,tH.me)(this.path.commandList,i,tY.x,tY.y)}measureText(t){throw Error("不支持measureText")}putImageData(t,e,i){throw Error("不支持measureText")}setLineDash(t){}stroke(t){}strokeRect(t,e,i,r){this.path.rect(t,e,i,r)}strokeText(t,e,i){}drawImage(){}setCommonStyle(t,e,i,r,n){}_setCommonStyle(t,e,i,r){}setStrokeStyle(t,e,i,r,n){}_setStrokeStyle(t,e,i,r){}setTextStyleWithoutAlignBaseline(t,e){}setTextStyle(t,e){}draw(){}clearMatrix(t=!0,e=this.dpr){this.setTransformFromMatrix(tX,t,e)}setClearMatrix(t,e,i,r,n,s){this._clearMatrix.setValue(t,e,i,r,n,s)}onlyTranslate(t=this.dpr){return this.matrix.a===t&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===t}release(...t){this.stack.forEach(t=>tV.QE.free(t)),this.stack.length=0}};t$=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,tN.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],t$);let tq=new r.FB,tK=new a.y;new r.FB;let tQ=["lineWidth","scaleX","scaleY","angle","anchor","visible"],tJ=["x","y"],t0=["scaleX","scaleY"],t1=["angle"],t2=new o.E9,t3={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class t5 extends b{static mixin(t){let e=Object.keys(t);for(let i=0;i<e.length;++i){let r=e[i];Object.defineProperty(t5.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get AABBBounds(){return this.tryUpdateAABBBounds()}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(t={}){var e;super(),this._AABBBounds=new r.FB,this._updateTag=D.Gz.INIT,this.attribute=t,this.valid=this.isValid(),this.updateAABBBoundsStamp=0,t.background?this.loadImage(null!=(e=t.background.background)?e:t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic)}getGraphicService(){var t,e;return null!=(e=null==(t=this.stage)?void 0:t.graphicService)?e:S.w.graphicService}getAttributes(){return this.attribute}setMode(t){"3d"===t?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(t,e=!1){var i,r;let{dx:n=t.dx,dy:s=t.dy}=this.attribute;if(e&&this.parent){let t=this.parent.attribute;t2.x=n+(null!=(i=t.scrollX)?i:0),t2.y=s+(null!=(r=t.scrollY)?r:0)}else t2.x=n,t2.y=s;return t2}onAnimateBind(t){this._emitCustomEvent("animate-bind",t)}tryUpdateAABBBounds(){let t="imprecise"===this.attribute.boundsMode;if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let e=this.doUpdateAABBBounds(t);return this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),"empty"===this.attribute.boundsMode&&e.clear(),e}tryUpdateOBBBounds(){return(this._OBBBounds||(this._OBBBounds=new r.a5),this.tryUpdateAABBBounds(),this.updateOBBBoundsStamp===this.updateAABBBoundsStamp)?this._OBBBounds:(this.updateOBBBoundsStamp=this.updateAABBBoundsStamp,this.valid)?this.doUpdateOBBBounds():(this._OBBBounds.clear(),this._OBBBounds)}combindShadowAABBBounds(t){if(this.shadowRoot){let e=this.shadowRoot.AABBBounds.clone();t.union(e)}}doUpdateOBBBounds(){return this._OBBBounds}getClipPath(){let{clipConfig:t}=this.attribute;if(!t)return null;this.clipPathMap||(this.clipPathMap=new Map);let{shape:e}=t,i=this.clipPathMap.get(e)||null;return i||(this.clipPathMap.size>10&&this.clipPathMap.clear(),(i=this.parsePath(e))&&this.clipPathMap.set(e,i)),i}parsePath(t){var e;if(!t)return null;let i=tk[t];if(i||(i=t5.userSymbolMap[t]))return i;if(!0===((e=t=tF[t]||t).startsWith("<svg")||e.startsWith("<?xml"))){let{svg:e}=(new tj).parse(t);if(!e)return null;let i=(0,n.Z)(e.path)?e.path:[e.path];tq.clear();let r=[];i.forEach(t=>{let e=(new A.r).fromString(t.d),i={};tW.Lo.forEach(e=>{t[e]&&(i[tW.IO[e]]=t[e])}),r.push({path:e,attribute:i}),tq.union(e.bounds)});let a=tq.width(),o=tq.height(),l=1/(0,s.Fp)(a,o);r.forEach(t=>t.path.transform(0,0,l,l));let h=new tP(t,r,!0);return t5.userSymbolMap[t]=h,h}let r=(new A.r).fromString(t),a=r.bounds.width(),o=r.bounds.height(),l=1/(0,s.Fp)(a,o);r.transform(0,0,l,l);let h=new tP(t,r);return t5.userSymbolMap[t]=h,h}doUpdateAABBBounds(t){this.updateAABBBoundsStamp++;let e=this.getGraphicTheme();this._AABBBounds.clear();let i=this.attribute,r=this.updateAABBBounds(i,e,this._AABBBounds,t),{boundsPadding:n=e.boundsPadding}=i,s=(0,M.dj)(n);return s&&r.expand(s),this.clearUpdateBoundTag(),r}updatePathProxyAABBBounds(t){let e="function"==typeof this.pathProxy?this.pathProxy(this.attribute):this.pathProxy;if(!e)return!1;let i=new T.C(t);return(0,B.h)(e.commandList,i,0,0),!0}tryUpdateGlobalAABBBounds(){let t=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(t.x1,t.y1,t.x2,t.y2):this._globalAABBBounds=t.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(t=!0){if(this._globalTransMatrix){if(this.parent){let t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(t=!0){return this._transMatrix||(this._transMatrix=new a.y),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),t&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?(!!(this._updateTag&D.Gz.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds())&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this):!!(this._updateTag&D.Gz.UPDATE_BOUNDS)&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&D.Gz.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&D.Gz.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&D.Gz.UPDATE_LOCAL_MATRIX)}isValid(){var t,e;let i=this.attribute;return Number.isFinite((null!=(t=i.x)?t:0)+(null!=(e=i.y)?e:0))}_validNumber(t){return null==t||Number.isFinite(t)}shouldUpdateShape(){return!!(this._updateTag&D.Gz.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=D.Gz.CLEAR_SHAPE}containsPoint(t,e,i,r){if(!r)return!1;if(i===D.LZ.GLOBAL){let i=new o.E9(t,e);this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),t=i.x,e=i.y}return r.containsPoint(this,{x:t,y:e})}setWidthHeightWithoutTransform(t){this.widthWithoutTransform=t.x2-t.x1,this.heightWithoutTransform=t.y2-t.y1}setAttributesAndPreventAnimate(t,e=!1,i,r){this.setAttributes(t,e,i),this.animates&&this.animates.forEach(e=>{(e.priority!==1/0||r)&&Object.keys(t).forEach(t=>{e.preventAttr(t)})})}setAttributes(t,e=!1,i){t&&((t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,i)||t).background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._setAttributes(t,e,i))}_setAttributes(t,e=!1,i){let r=Object.keys(t);for(let e=0;e<r.length;e++){let i=r[e];this.attribute[i]=t[i]}this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(e||this.needUpdateTags(r))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)}setAttribute(t,e,i,r){var n;let s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[t]:e},this.attribute,t,r);s?this._setAttributes(s,i,r):(0,l.Z)(null==(n=this.normalAttrs)?void 0:n[t])?(this.attribute[t]=e,this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(i||this.needUpdateTag(t))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)):this.normalAttrs[t]=e,"background"===t?this.loadImage(e,!0):"shadowGraphic"===t&&this.setShadowGraphic(e)}needUpdateTags(t,e=tQ){for(let i=0;i<e.length;i++){let r=e[i];if(-1!==t.indexOf(r))return!0}return!1}needUpdateTag(t,e=tQ){for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}initAttributes(t){let e={type:D.Gk.INIT};t=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,null,e)||t,this.attribute=t,t.background?this.loadImage(t.background,!0):t.shadowGraphic&&this.setShadowGraphic(t.shadowGraphic),this._updateTag=D.Gz.INIT,this.valid=this.isValid(),this.onAttributeUpdate(e)}translate(t,e){var i,r;if(0===t&&0===e)return this;let n={type:D.Gk.TRANSLATE},s=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,tJ,n);s&&(t=s.x,e=s.y,delete s.x,delete s.y,this._setAttributes(s));let a=this.attribute,o=a.postMatrix;return o?S.w.transformUtil.fromMatrix(o,o).translate(t,e):(a.x=(null!=(i=a.x)?i:w.F1.x)+t,a.y=(null!=(r=a.y)?r:w.F1.y)+e),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this}translateTo(t,e){let i=this.attribute;if(i.x===t&&i.y===e)return this;let r={type:D.Gk.TRANSLATE_TO},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:t,y:e},this.attribute,tJ,r);return n?this._setAttributes(n,!1,r):(i.x=t,i.y=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)),this}scale(t,e,i){var r,n;if(1===t&&1===e)return this;let s={type:D.Gk.SCALE},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e,scaleCenter:i},this.attribute,t0,s);o&&(t=o.scaleX,e=o.scaleY,delete o.scaleX,delete o.scaleY,this._setAttributes(o));let l=this.attribute;if(i){let{postMatrix:r}=this.attribute;r||(l.postMatrix=r=new a.y),S.w.transformUtil.fromMatrix(r,r).scale(t,e,i)}else l.scaleX=(null!=(r=l.scaleX)?r:w.F1.scaleX)*t,l.scaleY=(null!=(n=l.scaleY)?n:w.F1.scaleY)*e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(s),this}scaleTo(t,e){let i=this.attribute;if(i.scaleX===t&&i.scaleY===e)return this;let r={type:D.Gk.SCALE_TO},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:t,scaleY:e},this.attribute,t0,r);return n?this._setAttributes(n,!1,r):(i.scaleX=t,i.scaleY=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)),this}rotate(t,e){var i;if(0===t)return this;let r={type:D.Gk.ROTATE},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:t,rotateCenter:e},this.attribute,t1,r);n&&(delete n.angle,this._setAttributes(n,!1,r));let s=this.attribute;if(e){let{postMatrix:i}=this.attribute;i||(s.postMatrix=i=new a.y),S.w.transformUtil.fromMatrix(i,i).rotate(t,e)}else s.angle=(null!=(i=s.angle)?i:w.F1.angle)+t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}rotateTo(t){let e=this.attribute;if(e.angle===t)return this;let i={type:D.Gk.ROTATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(t,this.attribute,t1,i);return r?this._setAttributes(r,!1,i):(e.angle=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)),this}skewTo(t,e){return this}onAttributeUpdate(t){t&&t.skipUpdateCallback||(this.getGraphicService().onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",t))}update(t){t?(t.bounds&&this.tryUpdateAABBBounds(),t.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(),this.tryUpdateLocalTransMatrix())}hasState(t){return!(!this.currentStates||!this.currentStates.length)&&(!!(0,l.Z)(t)||this.currentStates.includes(t))}getState(t){var e;return null==(e=this.states)?void 0:e[t]}applyStateAttrs(t,e,i,r){var n,s;if(i){let e,i=Object.keys(t),a=this.getNoWorkAnimateAttr(),o={};i.forEach(i=>{a[i]?(e||(e={}),e[i]=t[i]):o[i]=r&&void 0===t[i]?this.getDefaultAttribute(i):t[i]});let l=null!=(s=null!=(n=this.context&&this.context.stateAnimateConfig)?n:this.stateAnimateConfig)?s:tU;this.applyAnimationState(["state"],[{name:"state",animation:{type:"state",to:o,duration:l.duration,easing:l.easing}}]),e&&this.setAttributesAndPreventAnimate(e,!1,{type:D.Gk.STATE}),this.finalAttribute&&Object.assign(this.finalAttribute,t)}else this.stopStateAnimates(),this.setAttributesAndPreventAnimate(t,!1,{type:D.Gk.STATE}),this.finalAttribute&&Object.assign(this.finalAttribute,t);this._emitCustomEvent("afterStateUpdate",{type:D.Gk.STATE})}updateNormalAttrs(t){let e={};this.normalAttrs?(Object.keys(t).forEach(t=>{t in this.normalAttrs?(e[t]=this.normalAttrs[t],delete this.normalAttrs[t]):e[t]=this.getNormalAttribute(t)}),Object.keys(this.normalAttrs).forEach(e=>{t[e]=this.normalAttrs[e]})):Object.keys(t).forEach(t=>{e[t]=this.getNormalAttribute(t)}),this.normalAttrs=e}stopStateAnimates(t="end"){this.animates&&this.animates.forEach(e=>{e.stateNames&&(e.stop(t),this.animates.delete(e.id))})}getNormalAttribute(t){var e,i;let r=this.attribute[t];return this.animates&&this.animates.size?null==(e=this.finalAttribute)?void 0:e[t]:null!=r?r:null==(i=this.finalAttribute)?void 0:i[t]}clearStates(t){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,t,!0)):this.currentStates=[],this.normalAttrs=null}removeState(t,e){if(this.currentStates){let i=(0,n.Z)(t)?e=>!t.includes(e):e=>e!==t,r=this.currentStates.filter(i);r.length!==this.currentStates.length&&this.useStates(r,e)}}toggleState(t,e){if(this.hasState(t))this.removeState(t,e);else if((this.currentStates?this.currentStates.indexOf(t):-1)<0){let i=this.currentStates?this.currentStates.slice():[];i.push(t),this.useStates(i,e)}}addState(t,e,i){var r;if(this.currentStates&&this.currentStates.includes(t)&&(e||1===this.currentStates.length))return;let n=e&&(null==(r=this.currentStates)?void 0:r.length)?this.currentStates.concat([t]):[t];this.useStates(n,i)}useStates(t,e){var i;if(!t.length)return void this.clearStates(e);if(!((null==(i=this.currentStates)?void 0:i.length)!==t.length||t.some((t,e)=>this.currentStates[e]!==t)))return;let r={};t.forEach(e=>{var i;let n=this.stateProxy?this.stateProxy(e,t):null==(i=this.states)?void 0:i[e];n&&Object.assign(r,n)}),this.updateNormalAttrs(r),this.currentStates=t,this.applyStateAttrs(r,t,e)}addUpdateBoundTag(){this._updateTag|=D.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=D.Gz.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=D.Gz.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&D.Gz.UPDATE_SHAPE_AND_BOUNDS)===D.Gz.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=D.Gz.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=D.Gz.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=D.Gz.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=D.Gz.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=D.Gz.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=D.Gz.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=D.Gz.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&D.Gz.UPDATE_LAYOUT)}getAnchor(t,e,i){let r=[0,0],n=()=>{if(e.b)return e.b;let t=this.clone();return t.attribute.angle=0,t.attribute.scaleCenter=null,i&&(t.attribute.scaleX=1,t.attribute.scaleY=1),e.b=t.AABBBounds,e.b};if("string"==typeof t[0]){let e=parseFloat(t[0])/100,i=n();r[0]=i.x1+(i.x2-i.x1)*e}else r[0]=t[0];if("string"==typeof t[1]){let e=parseFloat(t[1])/100,i=n();r[1]=i.y1+(i.y2-i.y1)*e}else r[1]=t[1];return r}doUpdateLocalMatrix(){let{x:t=w.F1.x,y:e=w.F1.y,scaleX:i=w.F1.scaleX,scaleY:r=w.F1.scaleY,angle:n=w.F1.angle,scaleCenter:s,anchor:o,postMatrix:l}=this.attribute,h=[0,0],u={};if(o&&n&&(h=this.getAnchor(o,u)),s&&(1!==i||1!==r)){let a=this._transMatrix;a.reset(),a.translate(h[0],h[1]),a.rotate(n),a.translate(-h[0],-h[1]),a.translate(t,e),h=this.getAnchor(s,u,!0),S.w.transformUtil.fromMatrix(a,a).scale(i,r,{x:h[0],y:h[1]})}else(0,a.X)(this._transMatrix,this._transMatrix.reset(),t,e,i,r,n,o&&h);let c=this.getOffsetXY(w.F1);if(this._transMatrix.e+=c.x,this._transMatrix.f+=c.y,l){let t=tK.setValue(l.a,l.b,l.c,l.d,l.e,l.f),e=this._transMatrix;t.multiply(e.a,e.b,e.c,e.d,e.e,e.f),e.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);let{scrollX:t=0,scrollY:e=0}=this.parent.attribute;this._globalTransMatrix.translate(t,e)}}setStage(t,e){if(this.stage!==t){if(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this.animates&&this.animates.size){let e=t.getTimeline();this.animates.forEach(t=>{t.timeline.isGlobal&&(t.setTimeline(e),e.addAnimate(t))})}this._onSetStage&&this._onSetStage(this,t,e),this.getGraphicService().onSetStage(this,t)}}setStageToShadowRoot(t,e){this.shadowRoot&&this.shadowRoot.setStage(t,e)}onAddStep(t){}onStop(t){t&&this.setAttributes(t,!1,{type:D.Gk.ANIMATE_END})}getDefaultAttribute(t){return this.getGraphicTheme()[t]}getComputedAttribute(t){var e;return null!=(e=this.attribute[t])?e:this.getDefaultAttribute(t)}onSetStage(t,e=!1){this._onSetStage=t,e&&this.stage&&t(this,this.stage)}attachShadow(t){return t&&(t.shadowHost=this),this.shadowRoot=null!=t?t:S.w.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot.release(!0),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map(t=>t.toJson())}}createPathProxy(t){return(0,h.Z)(t,!0)?this.pathProxy=(new A.r).fromString(t):this.pathProxy=new A.r,this.pathProxy}loadImage(t,e=!1){var i;if(!t||e&&!(!(i=t).fill&&!i.stroke))return;this.resources||(this.resources=new Map);let r={data:"init",state:null};this.resources.set(t,r),"string"==typeof t?(r.state="loading",t.startsWith("<svg")?(C.h.GetSvg(t,this),this.backgroundImg=this.backgroundImg||e):((0,u.Z)(t)||t.includes("/")||(0,c.Z)(t))&&(C.h.GetImage(t,this),this.backgroundImg=this.backgroundImg||e)):(0,d.Z)(t)?(r.state="success",r.data=t,this.backgroundImg=this.backgroundImg||e):r.state="fail"}setShadowGraphic(t){t?this.attachShadow().add(t):this.detachShadow()}imageLoadSuccess(t,e,i){if(!this.resources)return;let r=this.resources.get(t);r&&(r.state="success",r.data=e,i&&i(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(t,e){if(!this.resources)return;let i=this.resources.get(t);i&&(i.state="fail",e&&e())}_stopAnimates(t){t&&t.forEach(t=>{t.stop()})}stopAnimates(t=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&t&&this.forEachChildren(e=>{e.stopAnimates(t)})}release(){this.releaseStatus="released",this.stopAnimates(),S.w.graphicService.onRelease(this)}_emitCustomEvent(t,e){var i,r;if(this._events&&t in this._events){let n=new x.A(t,e);n.bubbles=!1,n.manager=null==(r=null==(i=this.stage)?void 0:i.eventSystem)?void 0:r.manager,this.dispatchEvent(n)}}toCustomPath(){var t,e,i;let r=null==(i=null==(e=(null==(t=this.stage)?void 0:t.renderService)||S.w.renderService)?void 0:e.drawContribution)?void 0:i.getRenderContribution(this);if(r){let t=new t$(null,1);return r.drawShape(this,t,0,0,{},{}),t.path}return null}}t5.userSymbolMap={},t5.mixin({dispatchEvent(t){var e;if(!(t instanceof _.x))throw Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=[],t.detailPath&&(t.detailPath=[]),t.target=this,null==(e=null==t?void 0:t.manager)||e.dispatchEvent(t),!t.defaultPrevented},emit(t,e){return this.dispatchEvent(new x.A(t,e))}})},8849:function(t,e,i){"use strict";i.d(e,{ZA:()=>d,sS:()=>p});var r,n,s=i(19498),a=i(92631),o=i(52462),l=i(17852),h=i(97708),u=i(10773),c=i(82265);(r=n||(n={}))[r.LESS_GROUP=0]="LESS_GROUP",r[r.MORE_GROUP=1]="MORE_GROUP";class d extends o.zs{constructor(t){super(t),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=u.I_,this._childUpdateTag=h.Gz.UPDATE_BOUNDS}setMode(t){"3d"===t?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(t){return this.theme||(this.theme=new l.Q2),this.theme.setTheme(t,this)}createTheme(){this.theme||(this.theme=new l.Q2)}visibleAll(t){this.setAttribute("visible",t),this.forEachChildren(e=>{e.isContainer&&e.visibleAll?e.visibleAll(t):e.setAttribute("visible",t)})}hideAll(){this.visibleAll(!1)}showAll(){this.visibleAll(!0)}containsPoint(t,e,i){if(i===h.LZ.GLOBAL){let i=new s.E9(t,e);return this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),this.AABBBounds.contains(i.x,i.y)}return this.AABBBounds.contains(t,e)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&h.Gz.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let t=this.shouldSelfChangeUpdateAABBBounds(),e=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,t),"empty"===this.attribute.boundsMode&&e.clear(),e}doUpdateLocalMatrix(){let{x:t=c.F1.x,y:e=c.F1.y,dx:i=c.F1.dx,dy:r=c.F1.dy,scaleX:n=c.F1.scaleX,scaleY:s=c.F1.scaleY,angle:a=c.F1.angle,postMatrix:o}=this.attribute;if(0!==t||0!==e||0!==i||0!==r||1!==n||1!==s||0!==a||o)return super.doUpdateLocalMatrix();this._transMatrix.reset()}getGraphicTheme(){return(0,l.gh)(this).group}updateAABBBounds(t,e,i){let r=i;i=i.clone();let{width:n,height:s,path:o,clip:l=e.clip}=t;if(o&&o.length?o.forEach(t=>{i.union(t.AABBBounds)}):null!=n&&null!=s&&i.set(0,0,Math.max(0,n),Math.max(0,s)),!l){this.forEachChildren(t=>{i.union(t.AABBBounds)});let{scrollX:e=0,scrollY:r=0}=t;i.translate(e,r)}return a.w.graphicService.updateTempAABBBounds(i),a.w.graphicService.transformAABBBounds(t,i,e,!1,this),r.copy(i),r}doUpdateAABBBounds(){this.updateAABBBoundsStamp++;let t=super.doUpdateAABBBounds();return this.parent&&this.parent.addChildUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),t}clearUpdateBoundTag(){this._updateTag&=h.Gz.CLEAR_BOUNDS,this._childUpdateTag&=h.Gz.CLEAR_BOUNDS}addUpdateBoundTag(){this._updateTag|=h.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&h.Gz.UPDATE_BOUNDS||(this._childUpdateTag|=h.Gz.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(t){let e=super.appendChild(t);return this.stage&&e&&(e.stage=this.stage,e.layer=this.layer),this.addUpdateBoundTag(),this.getGraphicService().onAddIncremental(t,this,this.stage),e}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),this.getGraphicService().onClearIncremental(this,this.stage)}_updateChildToStage(t){return this.stage&&t&&t.setStage(this.stage,this.layer),this.addUpdateBoundTag(),t}appendChild(t,e=!0){let i=super.appendChild(t);return e&&this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertBefore(t,e){return this._updateChildToStage(super.insertBefore(t,e))}insertAfter(t,e){return this._updateChildToStage(super.insertAfter(t,e))}insertInto(t,e){return this._updateChildToStage(super.insertInto(t,e))}removeChild(t){let e=super.removeChild(t);return this.getGraphicService().onRemove(t),t.stage=null,this.addUpdateBoundTag(),e}removeAllChild(t=!1){this.forEachChildren(e=>{this.getGraphicService().onRemove(e),t&&e.isContainer&&e.removeAllChild(t)}),super.removeAllChild(),this.addUpdateBoundTag()}setStage(t,e){this.stage!==t&&(this.stage=t,this.layer=e,this.setStageToShadowRoot(t,e),this._onSetStage&&this._onSetStage(this,t,e),this.getGraphicService().onSetStage(this,t),this.forEachChildren(e=>{e.setStage(t,this.layer)}))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren(t=>{t.isContainer&&t.addUpdateGlobalPositionTag()})}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){let t=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&h.Gz.UPDATE_GLOBAL_MATRIX)}_getChildByName(t,e){return this.find(e=>e.name===t,e)}createOrUpdateChild(t,e,i){let r=this._getChildByName(t);return r?r.setAttributes(e):((r=a.w.graphicService.creator[i](e)).name=t,this.add(r)),r}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}release(t){t&&this.forEachChildren(e=>{e.release(t)}),super.release()}}function p(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=o.Wl},50074:function(t,e,i){"use strict";i.d(e,{B:()=>c,E:()=>u});var r=i(52462),n=i(82265),s=i(17852),a=i(92631),o=i(10773),l=i(86339);let h=["width","height","image",...r.DH];class u extends r.zs{constructor(t){super(t),this.type="image",this.numberType=o.PN,this.loadImage(this.attribute.image)}getImageElement(){let{image:t}=this.attribute;if(!t||!this.resources)return null;let e=this.resources.get(t);return"success"!==e.state?null:e.data}get width(){return this.tryUpdateAABBBounds(),this._actualWidth}get height(){return this.tryUpdateAABBBounds(),this._actualHeight}get repeatX(){var t;return null!=(t=this.attribute.repeatX)?t:"no-repeat"}set repeatX(t){this.attribute.repeatX===t&&(this.attribute.repeatX=t)}get repeatY(){var t;return null!=(t=this.attribute.repeatY)?t:"no-repeat"}set repeatY(t){this.attribute.repeatY===t&&(this.attribute.repeatY=t)}get image(){return this.attribute.image}set image(t){t!==this.attribute.image&&(this.attribute.image=t,this.loadImage(this.attribute.image))}imageLoadSuccess(t,e,i){super.imageLoadSuccess(t,e,()=>{this.successCallback&&this.successCallback()}),this.addUpdateBoundTag()}imageLoadFail(t,e){super.imageLoadFail(t,()=>{this.failCallback&&this.failCallback()})}setAttributes(t,e,i){return t.image&&this.loadImage(t.image),super.setAttributes(t,e,i)}setAttribute(t,e,i,r){return"image"===t&&this.loadImage(e),super.setAttribute(t,e,i,r)}getGraphicTheme(){return(0,s.gh)(this).image}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let{maxWidth:r=e.maxWidth,maxHeight:n=e.maxHeight}=t,{width:s,height:a}=t;if(null==s||null==a){let t=this.getImageElement();if(t){let e=t.width,i=t.height;if(null!=s)a=i/e*s;else if(null!=a)s=e/i*a;else{let t=e/i;t>r/n?(s=r,a=r/t):(a=n,s=n*t)}}else s=r,a=n}this._actualWidth=s,this._actualHeight=a,i.set(0,0,s,a)}let{tb1:r,tb2:n}=a.w.graphicService.updateTempAABBBounds(i);return(0,l.E)(t,e,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,a.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}getDefaultAttribute(t){return n.jK[t]}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function c(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},r.Wl)},9252:function(t,e,i){"use strict";i.d(e,{W:()=>c,x:()=>u});var r=i(52462),n=i(17852),s=i(92631),a=i(19626),o=i(78085),l=i(10773);let h=["segments","points","curveType","curveTension",...r.DH];class u extends r.zs{constructor(t={}){super(t),this.type="line",this.numberType=l.Hf}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;let{points:t,segments:e}=this.attribute;return e?0!==e.length:!!t&&!(t.length<=1)}_interpolate(t,e,i,r,n){"points"===t&&(n.points=(0,a.SA)(i,r,e))}getGraphicTheme(){return(0,n.gh)(this).line}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||(t.segments?this.updateLineAABBBoundsBySegments(t,e,i):this.updateLineAABBBoundsByPoints(t,e,i)),s.w.graphicService.updateTempAABBBounds(i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;let{lineJoin:r=e.lineJoin}=t;return s.w.graphicService.transformAABBBounds(t,i,e,"miter"===r,this),i}updateLineAABBBoundsByPoints(t,e,i,r){let{points:n=e.points,connectedType:s}=t;return n.forEach(t=>{!1===t.defined&&"connect"!==s||i.add(t.x,t.y)}),i}updateLineAABBBoundsBySegments(t,e,i,r){let{segments:n=e.segments,connectedType:s}=t;return n.forEach(t=>{t.points.forEach(t=>{!1===t.defined&&"connect"!==s||i.add(t.x,t.y)})}),i}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}toCustomPath(){let t=super.toCustomPath();if(t)return t;let e=this.attribute;t=new o.r;let i=e.segments,r=e=>{if(e&&e.length){let i=!0;e.forEach(e=>{!1!==e.defined&&(i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y),i=!1)})}};return i&&i.length?i.forEach(t=>{r(t.points)}):e.points&&r(e.points),t}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function c(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},r.Wl)},64871:function(t,e,i){"use strict";i.d(e,{p:()=>c});var r=i(52462),n=i(17852),s=i(19626),a=i(78085),o=i(92631),l=i(10773);let h=["points","cornerRadius",...r.DH];class u extends r.zs{constructor(t){super(t),this.type="polygon",this.numberType=l.Kh}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{points:t}=this.attribute;return t&&t.length>=2}getGraphicTheme(){return(0,n.gh)(this).polygon}updateAABBBounds(t,e,i){this.updatePathProxyAABBBounds(i)||this.updatePolygonAABBBoundsImprecise(t,e,i),o.w.graphicService.updateTempAABBBounds(i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;let{lineJoin:r=e.lineJoin}=t;return o.w.graphicService.transformAABBBounds(t,i,e,"miter"===r,this),i}updatePolygonAABBBoundsImprecise(t,e,i){let{points:r=e.points}=t;return r.forEach(t=>{i.add(t.x,t.y)}),i}_interpolate(t,e,i,r,n){"points"===t&&(n.points=(0,s.SA)(i,r,e))}needUpdateTags(t){return super.needUpdateTags(t,h)}needUpdateTag(t){return super.needUpdateTag(t,h)}toCustomPath(){let t=super.toCustomPath();if(t)return t;let e=this.attribute.points;return t=new a.r,e.forEach((e,i)=>{0===i?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)}),t.closePath(),t}clone(){return new u(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return u.NOWORK_ANIMATE_ATTR}}function c(t){return new u(t)}u.NOWORK_ANIMATE_ATTR=r.Wl},22288:function(t,e,i){"use strict";i.d(e,{U:()=>d,f:()=>p});var r=i(52462),n=i(78085),s=i(17852),a=i(92631),o=i(10773),l=i(54326);let h=t=>{if(!t)return{x:0,y:0,width:0,height:0};let e=(0,l.Z)(t.width)?t.x1-t.x:t.width,i=(0,l.Z)(t.height)?t.y1-t.y:t.height,r=0,n=0;return e<0?(r=e,e=-e):Number.isNaN(e)&&(e=0),i<0?(n=i,i=-i):Number.isNaN(i)&&(i=0),{x:r,y:n,width:e,height:i}};var u=i(86339);let c=["width","x1","y1","height","cornerRadius",...r.DH];class d extends r.zs{constructor(t){super(t),this.type="rect",this.numberType=o._u}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}getGraphicTheme(){return(0,s.gh)(this).rect}updateAABBBounds(t,e,i){if(!this.updatePathProxyAABBBounds(i)){let{width:e,height:r}=t,{x1:n,y1:s,x:a,y:o}=t;e=null!=e?e:n-a,r=null!=r?r:s-o,(isFinite(e)||isFinite(r)||isFinite(a)||isFinite(o))&&i.set(0,0,e||0,r||0)}let{tb1:r,tb2:n}=a.w.graphicService.updateTempAABBBounds(i);return(0,u.E)(t,e,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,a.w.graphicService.transformAABBBounds(t,i,e,!1,this),i}needUpdateTags(t){return super.needUpdateTags(t,c)}needUpdateTag(t){return super.needUpdateTag(t,c)}toCustomPath(){let t=super.toCustomPath();if(t)return t;let{x:e,y:i,width:r,height:s}=h(this.attribute);return(t=new n.r).moveTo(e,i),t.rect(e,i,r,s),t}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}}function p(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=r.Wl},47634:function(t,e,i){"use strict";i.d(e,{H:()=>w,p:()=>S});var r=i(83624),n=i(4654),s=i(52462),a=i(82265),o=i(2105);class l{constructor(t,e,i,r,n,s,a,l,h,u,c,d,p,f){this.left=t,this.top=e,this.width=i,this.height=r,this.actualHeight=0,this.bottom=e+r,this.right=t+i,this.ellipsis=n,this.wordBreak=s,this.verticalDirection=a,this.lines=[],this.globalAlign=l,this.globalBaseline=h,this.layoutDirection=u,this.directionKey=o.i7[this.layoutDirection],this.isWidthMax=c,this.isHeightMax=d,this.singleLine=p,f?(f.clear(),this.icons=f):this.icons=new Map}draw(t,e){let{width:i,height:r}=this.getActualSize(),n=this.isWidthMax?Math.min(this.width,i):this.width||i||0,s=this.isHeightMax?Math.min(this.height,r):this.height||r||0;s=Math.min(s,r);let a=0;switch(this.globalBaseline){case"top":a=0;break;case"middle":a=-s/2;break;case"bottom":a=-s}let o=0;"right"===this.globalAlign||"end"===this.globalAlign?o=-n:"center"===this.globalAlign&&(o=-n/2);let l=this[this.directionKey.height];this.singleLine&&(l=this.lines[0].height+1);let h=!1;if("middle"===this.verticalDirection)if(this.actualHeight>=l&&0!==l)for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i];if(r+n<this[this.directionKey.top]||r+n>this[this.directionKey.top]+l)break;let s=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+l&&(s=!0,h=!0),this.lines[i].draw(t,s,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}else{let i=Math.floor((l-this.actualHeight)/2);"vertical"===this.layoutDirection?o+=i:a+=i;for(let i=0;i<this.lines.length;i++)this.lines[i].draw(t,!1,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}else if("bottom"===this.verticalDirection&&"vertical"!==this.layoutDirection)for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i],s=l-this.lines[i].top-this.lines[i].height;if(0===l)this.lines[i].draw(t,!1,o,s+a,this.ellipsis,e);else{if(s+n>this[this.directionKey.top]+l||s<this[this.directionKey.top])return h;{let r=!1;this.ellipsis&&this.lines[i+1]&&s-this.lines[i+1].height<this[this.directionKey.top]&&(r=!0,h=!0),this.lines[i].draw(t,r,o,s+a,this.ellipsis,e)}}}else{"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&this.singleLine&&this.isWidthMax&&(o+=this.lines[0].height+1);for(let i=0;i<this.lines.length;i++){"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&(o-=this.lines[i].height+this.lines[i].top);let{top:r,height:n}=this.lines[i];if(0===l)this.lines[i].draw(t,!1,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e);else{if(r+n<this[this.directionKey.top]||r+n>this[this.directionKey.top]+l)return h;{let r=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+l&&(r=!0,h=!0),this.lines[i].draw(t,r,this.lines[i][this.directionKey.left]+o,this.lines[i][this.directionKey.top]+a,this.ellipsis,e)}}}}return h}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let t=0,e=0;for(let i=0;i<this.lines.length;i++){let r=this.lines[i];r.actualWidth>t&&(t=r.actualWidth),e+=r.height}return{width:"vertical"===this.layoutDirection?e:t,height:"vertical"===this.layoutDirection?t:e}}getActualSizeWidthEllipsis(){let t=0,e=0,{width:i,height:r}=this.getRawActualSize();this.width;let n=this.height||r||0;n=Math.min(n,r);let s=this[this.directionKey.height];if(this.singleLine&&(s=this.lines[0].height+1),"middle"===this.verticalDirection)if(this.actualHeight>=s&&0!==s)for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i];if(r+n<this[this.directionKey.top]||r+n>this[this.directionKey.top]+s);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+s){let r=!0===this.ellipsis?"...":this.ellipsis||"",n=this.lines[i].getWidthWithEllips(r);n>t&&(t=n),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else{this.actualHeight;for(let i=0;i<this.lines.length;i++)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else if("bottom"===this.verticalDirection)for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i],a=s-this.lines[i].top-this.lines[i].height;if(0===s)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height;else if(a+n>this[this.directionKey.top]+s||a<this[this.directionKey.top]);else if(this.ellipsis&&this.lines[i+1]&&a-this.lines[i+1].height<this[this.directionKey.top]){let r=!0===this.ellipsis?"...":this.ellipsis||"",n=this.lines[i].getWidthWithEllips(r);n>t&&(t=n),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}else for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i];if(0===s)this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height;else if(r+n<this[this.directionKey.top]||r+n>this[this.directionKey.top]+s);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+s){let r=!0===this.ellipsis?"...":this.ellipsis||"",n=this.lines[i].getWidthWithEllips(r);n>t&&(t=n),e+=this.lines[i].height}else this.lines[i].actualWidth>t&&(t=this.lines[i].actualWidth),e+=this.lines[i].height}return{width:"vertical"===this.layoutDirection?e:t,height:"vertical"===this.layoutDirection?t:e}}}var h=i(19626);function u(t,e,i,r){let n=Math.round(t),s=Math.round(i),a=Math.round(e),o=Math.round(r);return{left:t>n?n:n-.5,top:i>s?s:s-.5,right:a>e?a:a+.5,bottom:o>r?o:o+.5}}class c{constructor(t,e,i,r){var n,s;this.fontSize=i.fontSize||16,this.textBaseline=i.textBaseline||"alphabetic",this.ascentDescentMode=r;let a=(0,h.VA)(i.lineHeight,this.fontSize);this.lineHeight="number"==typeof a?a>this.fontSize?a:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;let{ascent:l,height:u,descent:c,width:d}=(0,o.MS)(t,i,this.ascentDescentMode),p=0,f=0,g=0;this.height>u&&(f=Math.ceil(p=(this.height-u)/2),g=Math.floor(p)),"top"===this.textBaseline?(this.ascent=p,this.descent=u-p):"bottom"===this.textBaseline?(this.ascent=u-p,this.descent=p):"middle"===this.textBaseline?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=l+f,this.descent=c+g),this.length=t.length,this.width=d||0,this.text=t||"",this.newLine=e||!1,this.character=i,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,this.space=i.space,this.dx=null!=(n=i.dx)?n:0,this.dy=null!=(s=i.dy)?s:0,"vertical"===i.direction&&(this.direction=i.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}updateWidth(){let{width:t}=(0,o.MS)(this.text,this.character,this.ascentDescentMode);this.width=t,"vertical"===this.direction&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}drawBackground(t,e,i,r,n,s,a){if(""===this.text||"\n"===this.text||!this.character.background||this.character.backgroundOpacity&&!(this.character.backgroundOpacity>0))return;let l=e+i,h=this.text,c=this.left+r;l+=this.top;let d=this.direction;if(this.verticalEllipsis)h=this.ellipsisStr,d="vertical",l-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)h+=this.ellipsisStr,"right"!==s&&"end"!==s||(c-=this.ellipsisWidth);else if("replace"===this.ellipsis){let t=(0,o.Hi)(h,("vertical"===d?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,h.length-1);if(h=h.slice(0,t)+this.ellipsisStr,"right"===s||"end"===s)if("vertical"===d);else{let{width:e}=(0,o.MS)(this.text.slice(t),this.character,this.ascentDescentMode);c-=this.ellipsisWidth-e}}}return Object.assign(Object.assign({},u(c,c+(this.widthOrigin||this.width),e,e+a)),{fillStyle:this.character.background,globalAlpha:this.character.backgroundOpacity})}draw(t,e,i,r,n,s,a){var l;let h=e+i,c=this.text,d=this.left+r+(null!=(l=this.space)?l:0)/2;h+=this.top;let p=this.direction;if(this.verticalEllipsis)c=this.ellipsisStr,p="vertical",h-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)c+=this.ellipsisStr,"right"!==s&&"end"!==s||(d-=this.ellipsisWidth);else if("replace"===this.ellipsis){let t=(0,o.Hi)(c,("vertical"===p?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,c.length-1);if(c=c.slice(0,t)+this.ellipsisStr,"right"===s||"end"===s)if("vertical"===p);else{let{width:e}=(0,o.MS)(this.text.slice(t),this.character,this.ascentDescentMode);d-=this.ellipsisWidth-e}}}switch(this.character.script){case"super":h-=this.ascent*(1/3);break;case"sub":h+=this.descent/2}"vertical"===p&&(t.save(),t.rotateAbout(Math.PI/2,d,h),t.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),t.translate(d,h),d=0,h=0);let{lineWidth:f=1}=this.character;if(this.character.stroke&&f&&t.strokeText(c,d+this.dx,h+this.dy),this.character.fill&&t.fillText(c,d+this.dx,h+this.dy),this.character.fill){if(this.character.lineThrough||this.character.underline){if(this.character.underline){let e=1+h,i=u(d,d+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+h,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}if(this.character.lineThrough){let e=1+h-this.ascent/2,i=u(d,d+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+h-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}else if("underline"===this.character.textDecoration){let e=1+h,i=u(d,d+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+h,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}else if("line-through"===this.character.textDecoration){let e=1+h-this.ascent/2,i=u(d,d+(this.widthOrigin||this.width),e,e+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));t.fillRect(i.left,1+h-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}"vertical"===p&&t.restore()}getWidthWithEllips(t){let e=this.text,i="vertical"===t?this.height:this.width;if("hide"===this.ellipsis)return i;if("add"===this.ellipsis)return i+this.ellipsisWidth;if("replace"===this.ellipsis){let t=(0,o.Hi)(e,i-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,e.length-1);e=e.slice(0,t)+this.ellipsisStr;let{width:r}=(0,o.MS)(this.text.slice(t),this.character,this.ascentDescentMode);return i+this.ellipsisWidth-r}return i}}var d=i(95723),p=i(50074);class f extends p.E{constructor(t){if(super(t),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],"always"===t.backgroundShowMode&&(this._hovered=!0),t.margin){let e=(0,h.dj)(t.margin);this._marginArray="number"==typeof e?[e,e,e,e]:e}this.onBeforeAttributeUpdate=(t,e,i)=>{if((0,d.Z)(i)&&-1!==i.indexOf("margin")||"margin"===i)if(e.margin){let t=(0,h.dj)(e.margin);this._marginArray="number"==typeof t?[t,t,t,t]:t}else this._marginArray=[0,0,0,0]}}get width(){var t;return(null!=(t=this.attribute.width)?t:0)+this._marginArray[1]+this._marginArray[3]}get height(){var t;return(null!=(t=this.attribute.height)?t:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();let{width:t=a.jK.width,height:e=a.jK.height}=this.attribute,{backgroundWidth:i=t,backgroundHeight:r=e}=this.attribute;return this._AABBBounds.expand([0,(i-t)/2*2,(r-e)/2*2,0]),this._AABBBounds}setHoverState(t){"hover"===this.attribute.backgroundShowMode&&this._hovered!==t&&(this._hovered=t)}}class g{constructor(t,e,i,r,n,s,a,l){this.left=t,this.width=e,this.baseline=i,this.ascent=r,this.descent=n,this.top=i-r,this.paragraphs=s.map(t=>t),this.textAlign=(this.paragraphs[0]instanceof f?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=a,this.directionKey=o.i7[this.direction],this.actualWidth=0;let h=0;this.paragraphs.forEach((t,e)=>{if(0===e&&t instanceof c){let e=o.cV.exec(t.text);0!==(null==e?void 0:e.index)&&(t.text=t.text.slice(null==e?void 0:e.index),t.updateWidth())}this.actualWidth+=t[this.directionKey.width],h=Math.max(t[this.directionKey.height],h)}),this.height=h,this.blankWidth=l?0:this.width-this.actualWidth,this.calcOffset(e,l)}calcOffset(t,e){let i=this.directionKey,r=this.height,n=this.left,s=0;this.actualWidth<t&&!e&&("right"===this.textAlign||"end"===this.textAlign?n=t-this.actualWidth:"center"===this.textAlign?n=(t-this.actualWidth)/2:"justify"===this.textAlign&&(this.paragraphs.length<2?n=(t-this.actualWidth)/2:s=(t-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map(function(t){t instanceof f?(t["_"+i.x]=n,n+=t[i.width]+s,t["_"+i.y]="top"===t.attribute.textBaseline?0:"bottom"===t.attribute.textBaseline?r-t.height:(r-t.height)/2):(t[i.left]=n,n+=t[i.width]+s)})}draw(t,e,i,r,n,s){if(n&&(e||this.paragraphs.some(t=>t.overflow))){let t=!0,i=!1;for(let e=this.paragraphs.length-1;e>=0;e--){let r=this.paragraphs[e];if(r.overflow)t=t&&""===r.text;else if(t){i=!0;break}}let r=0;if(!i)for(let t=this.paragraphs.length-1;t>=0;t--){let i=this.paragraphs[t];if(i.overflow){if(""===i.text)break;continue}if(i instanceof f)break;if("vertical"===this.direction&&"vertical"!==i.direction){i.verticalEllipsis=!0;break}let s=!0===n?"...":n||"";i.ellipsisStr=s;let{width:a}=(0,o.MS)(s,i.character,i.ascentDescentMode),l=a||0;if(l<=this.blankWidth+r){e&&(i.ellipsis="add");break}if(l<=this.blankWidth+r+i.width){i.ellipsis="replace",i.ellipsisWidth=l,i.ellipsisOtherParagraphWidth=this.blankWidth+r;break}i.ellipsis="hide",r+=i.width}}let a="",l=-1,h=[],u=[h];this.paragraphs.forEach((e,n)=>{if(e instanceof f)return;let s=e.drawBackground(t,r,this.ascent,i,0===n,this.textAlign,this.height);s&&(a===s.fillStyle&&l===s.globalAlpha||(h=[],u.push(h),a=s.fillStyle,l=s.globalAlpha),h.push(s))}),u.forEach(e=>{if(0===e.length)return;let i=e[0],r=e[e.length-1];t.fillStyle=i.fillStyle,t.globalAlpha=i.globalAlpha,t.fillRect(i.left,i.top,r.right-i.left,r.bottom-i.top)}),this.paragraphs.forEach((e,n)=>{if(e instanceof f)return e.setAttributes({x:i+e._x,y:r+e._y}),void s(e,t,i+e._x,r+e._y,this.ascent);let a={x1:this.left,y1:this.top,x2:this.left+this.actualWidth,y2:this.top+this.height};(0,o.p3)(t,e.character),(0,o.nq)(t,e.character,a),e.draw(t,r,this.ascent,i,0===n,this.textAlign,this.height)})}getWidthWithEllips(t){let e=0;for(let i=this.paragraphs.length-1;i>=0;i--){let r=this.paragraphs[i];if(r instanceof f)break;let{width:n}=(0,o.MS)(t,r.character,r.ascentDescentMode),s=n||0;if(s<=this.blankWidth+e){r.ellipsis="add",r.ellipsisWidth=s;break}if(s<=this.blankWidth+e+r.width){r.ellipsis="replace",r.ellipsisWidth=s,r.ellipsisOtherParagraphWidth=this.blankWidth+e;break}r.ellipsis="hide",e+=r.width}let i=0;return this.paragraphs.forEach((t,e)=>{i+=t instanceof f?t.width:t.getWidthWithEllips(this.direction)}),i}}class m{constructor(t){this.frame=t,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=t.layoutDirection,this.directionKey=o.i7[this.direction]}store(t){if(t instanceof f){this.frame.icons.set(t.richtextId,t),this.lineBuffer.push(t),this.lineWidth+=t[this.directionKey.width];let e=0,i=0;"top"===t.attribute.textBaseline?(e=0,i=t.height):"bottom"===t.attribute.textBaseline?(e=t.height,i=0):(e=t.height/2,i=t.height/2),this.maxAscent=Math.max(this.maxAscent,e),this.maxDescent=Math.max(this.maxDescent,i)}else this.lineBuffer.push(t),0!==t.text.length?(this.lineWidth+=t[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,t.ascent),this.maxDescent=Math.max(this.maxDescent,t.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,t.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,t.descent))}send(){if(0===this.lineBuffer.length)return;let t=0===this.maxAscent?this.maxAscentForBlank:this.maxAscent,e=0===this.maxDescent?this.maxDescentForBlank:this.maxDescent,i=new g(this.frame.left,this[this.directionKey.width],this.y+t,t,e,this.lineBuffer,this.direction,"horizontal"===this.direction?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(i),this.frame.actualHeight+=i.height,this.y+=i.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(t,e=!1){t instanceof f?"horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):0===this.lineBuffer.length?(this.store(t),this.send()):(this.send(),this.deal(t)):"number"!=typeof this.width||this.width<0||(t.newLine&&this.send(),(0!==t.text.length||this.newLine)&&("horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+t[this.directionKey.width]<=this[this.directionKey.width]?this.store(t):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(t)):this.cut(t,e)))}cut(t,e){let i=this[this.directionKey.width]-this.lineWidth||0,r=Math.ceil(i/t[this.directionKey.width]*t.length)||0,n=(0,o.Hi)(t.text,i,t.character,r,"break-word"===this.frame.wordBreak);if(0!==n){let[i,r]=function(t,e){let i=t.text.slice(0,e),r=t.text.slice(e);return[new c(i,t.newLine,t.character,t.ascentDescentMode),new c(r,!0,t.character,t.ascentDescentMode)]}(t,n);this.store(i),e?this.send():this.deal(r)}else 0!==this.lineBuffer.length&&(this.send(),this.deal(t))}}var y=i(17852),v=i(92631),b=i(10773);let x=!1;try{x=Intl&&"function"==typeof Intl.Segmenter}catch(t){x=!1}let _=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection","fill","stroke","fontSize","fontFamily","fontStyle","fontWeight","lineWidth","opacity","fillOpacity","strokeOpacity",...s.DH];class w extends s.zs{constructor(t){super(t),this.type="richtext",this._currentHoverIcon=null,this.numberType=b.$M,this.onBeforeAttributeUpdate=(t,e,i)=>{for(let i in t)if("hoverIconId"===i){if(t[i]===e[i])continue;let r=this._frameCache.icons.get(t[i]);this.updateHoverIconState(r)}}}get width(){var t;return null!=(t=this.attribute.width)?t:a.Iq.width}set width(t){this.attribute.width!==t&&(this.attribute.width=t,this.addUpdateShapeAndBoundsTag())}get height(){var t;return null!=(t=this.attribute.height)?t:a.Iq.height}set height(t){this.attribute.height!==t&&(this.attribute.height=t,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(t){this.attribute.maxWidth!==t&&(this.attribute.maxWidth=t,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(t){this.attribute.maxHeight!==t&&(this.attribute.maxHeight=t,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var t;return null!=(t=this.attribute.ellipsis)?t:a.Iq.ellipsis}set ellipsis(t){this.attribute.ellipsis!==t&&(this.attribute.ellipsis=t,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var t;return null!=(t=this.attribute.wordBreak)?t:a.Iq.wordBreak}set wordBreak(t){this.attribute.wordBreak!==t&&(this.attribute.wordBreak=t,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var t;return null!=(t=this.attribute.verticalDirection)?t:a.Iq.verticalDirection}set verticalDirection(t){this.attribute.verticalDirection!==t&&(this.attribute.verticalDirection=t,this.addUpdateShapeAndBoundsTag())}get textAlign(){var t;return null!=(t=this.attribute.textAlign)?t:a.Iq.textAlign}set textAlign(t){this.attribute.textAlign!==t&&(this.attribute.textAlign=t,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var t;return null!=(t=this.attribute.textBaseline)?t:a.Iq.textBaseline}set textBaseline(t){this.attribute.textBaseline!==t&&(this.attribute.textBaseline=t,this.addUpdateShapeAndBoundsTag())}get textConfig(){var t;return null!=(t=this.attribute.textConfig)?t:a.Iq.textConfig}set textConfig(t){this.attribute.textConfig=t,this.addUpdateShapeAndBoundsTag()}getGraphicTheme(){return(0,y.gh)(this).richtext}static AllSingleCharacter(t){return t.lines?t.lines.every(t=>t.paragraphs.every(t=>!(t.text&&(0,r.Z)(t.text)&&w.splitText(t.text).length>1))):t.every(t=>t.isComposing||!(t.text&&(0,r.Z)(t.text)&&w.splitText(t.text).length>1))}static splitText(t){if(x){let e=new Intl.Segmenter(void 0,{granularity:"grapheme"}),i=[];for(let{segment:r}of e.segment(t))i.push(r);return i}return Array.from(t)}static TransformTextConfig2SingleCharacter(t){let e=[];return t.forEach(t=>{let i=w.splitText(t.text.toString());if((0,r.Z)(t.text)&&i.length>1)for(let r=0;r<i.length;r++){let n=i[r];e.push(Object.assign(Object.assign({},t),{text:n}))}else e.push(t)}),e}updateAABBBounds(t,e,i){var r,n,s,a;let{width:o=e.width,height:l=e.height,maxWidth:h=e.maxWidth,maxHeight:u=e.maxHeight,textAlign:c=e.textAlign,textBaseline:d=null!=(n=null!=(r=t.textBaseline)?r:e.textBaseline)?n:"top",editOptions:p}=t;if(o>0&&l>0)i.set(0,0,o,l);else{let{width:t,height:e}=this.getFrameCache().getActualSize(),r=o||t||0,n=l||e||0;n="number"==typeof u&&n>u?u:n||0,r="number"==typeof h&&r>h?h:r||0,i.set(0,0,r,n)}!p||!p.keepHeightWhileEmpty||i.height()||(null==(s=t.textConfig)?void 0:s.length)||(i.y2=i.y1+(null!=(a=t.fontSize)?a:12),i.x2=i.x1+2);let f=0;switch(d){case"top":f=0;break;case"middle":f=-i.height()/2;break;case"bottom":f=-i.height()}let g=0;switch(c){case"left":g=0;break;case"center":g=-i.width()/2;break;case"right":g=-i.width()}return l||("middle"===this.verticalDirection?f-=i.height()/2:"bottom"===this.verticalDirection&&(f-=i.height())),i.translate(g,f),v.w.graphicService.updateTempAABBBounds(i),null==t.forceBoundsHeight&&null==t.forceBoundsWidth||v.w.graphicService.updateHTMLTextAABBBounds(t,e,i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,v.w.graphicService.transformAABBBounds(t,i,e,!1,this),0===i.width()&&0===i.height()&&i.clear(),i}needUpdateTags(t){return super.needUpdateTags(t,_)}needUpdateTag(t){return super.needUpdateTag(t,_)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}get cliped(){let t=this.getFrameCache();if(t.actualHeight>t.height)return!0;let{disableAutoWrapLine:e}=this.attribute;if(e)for(let e=0;e<t.lines.length;e++){let i=t.lines[e];for(let t=0;t<i.paragraphs.length;t++){let e=i.paragraphs[t];if(e.overflow&&""!==e.text)return!0}}return!1}combinedStyleToCharacter(t){let{fill:e,stroke:i,fontSize:r,fontFamily:n,fontStyle:s,fontWeight:a,lineWidth:o,opacity:l,fillOpacity:h,lineHeight:u,strokeOpacity:c,upgradeAttrs:d}=this.attribute,p=Object.assign({fill:e,stroke:i,fontSize:r,fontFamily:n,fontStyle:s,fontWeight:a,lineWidth:o,opacity:l,fillOpacity:h,strokeOpacity:c},t);return(null==d?void 0:d.lineHeight)&&(p.lineHeight=u),p}doUpdateFrameCache(t){var e;let{maxWidth:i,maxHeight:r,width:s,height:a,ellipsis:o,wordBreak:h,verticalDirection:u,textAlign:d,textBaseline:p,layoutDirection:g,singleLine:y,disableAutoWrapLine:v,editable:b,ascentDescentMode:x,upgradeAttrs:_}=this.attribute,S=_&&_.multiBreakLine,{textConfig:A=[]}=this.attribute;b&&A.length>0&&!w.AllSingleCharacter(A)&&(A=w.TransformTextConfig2SingleCharacter(A),this.attribute.textConfig=A);let C=[],D=null!=t?t:A;for(let t=0;t<D.length;t++)if("image"in D[t]){let e=this.combinedStyleToCharacter(D[t]);e.lineWidth=void 0;let i=e.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(e.id);if(i)C.push(i);else{let t=new f(e);t.successCallback=()=>{var t;this.addUpdateBoundTag(),null==(t=this.stage)||t.renderNextFrame()},t.richtextId=e.id,C.push(t)}}else{let e=this.combinedStyleToCharacter(D[t]);if((0,n.Z)(e.text)&&(e.text=`${e.text}`),e.text&&e.text.includes("\n")){let i=e.text.split("\n");for(let r=0;r<i.length;r++)if(0===r)C.push(new c(i[r],!1,e,x));else if(i[r]||t===D.length-1)C.push(new c(i[r],!0,e,x));else{let e=this.combinedStyleToCharacter(D[t+1]);C.push(new c(i[r],!0,e,x))}}else e.text&&C.push(new c(e.text,!1,e,x))}let T="number"==typeof i&&Number.isFinite(i)&&i>0,B="number"==typeof r&&Number.isFinite(r)&&r>0,M="number"==typeof s&&Number.isFinite(s)&&s>0&&(!T||s<=i),E="number"==typeof a&&Number.isFinite(a)&&a>0&&(!B||a<=r),k=new l(0,0,(M?s:T?i:0)||0,(E?a:B?r:0)||0,o,h,u,d,p,g||"horizontal",!M&&T,!E&&B,y||!1,null==(e=this._frameCache)?void 0:e.icons),F=new m(k);if(F.newLine=S,v){let t=0,e=!1;for(let i=0;i<C.length;i++){let r=C[i];e?(r.overflow=!0,r.left=1/0,r.top=1/0,r.newLine||k.lines[k.lines.length-1].paragraphs.push(r)):F.deal(r,!0),k.lines.length!==t&&(t=k.lines.length,F.lineBuffer.length=0,r.overflow=!0,r.left=1e3,r.top=1e3,k.lines[k.lines.length-1].paragraphs.push(r),e=!0),r.newLine&&(e=!1,F.lineWidth=0),F.send()}}else for(let t=0;t<C.length;t++)F.deal(C[t]);if(F.send(),!("horizontal"===k.layoutDirection?M:E)){let t=k.getActualSizeWidthEllipsis(),e="horizontal"===k.layoutDirection?t.width:t.height;("horizontal"===k.layoutDirection?T:B)&&(e=Math.min(e,"horizontal"===k.layoutDirection?i:r)),k.lines.forEach(function(t){t.calcOffset(e,!1)})}S&&k.lines.forEach(t=>{let e=t.paragraphs;t.paragraphs=t.paragraphs.filter(t=>""!==t.text),0===t.paragraphs.length&&e.length&&(e[0].text="\n",t.paragraphs.push(e[0]))}),this._frameCache=k}clone(){return new w(Object.assign({},this.attribute))}setStage(t,e){super.setStage(t,e),this.getFrameCache().icons.forEach(i=>{i.setStage(t,e)})}bindIconEvent(){this.addEventListener("pointermove",t=>{let e=this.pickIcon(t.global);e&&e===this._currentHoverIcon||(e?this.setAttribute("hoverIconId",e.richtextId):!e&&this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0))}),this.addEventListener("pointerleave",t=>{this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0)})}updateHoverIconState(t){var e,i,r,n,s;t?(null==(e=this._currentHoverIcon)||e.setHoverState(!1),this._currentHoverIcon=t,this._currentHoverIcon.setHoverState(!0),null==(i=this.stage)||i.setCursor(t.attribute.cursor),null==(r=this.stage)||r.renderNextFrame()):(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,null==(n=this.stage)||n.setCursor(),null==(s=this.stage)||s.renderNextFrame())}pickIcon(t){let e,i=this.getFrameCache(),{e:r,f:n}=this.globalTransMatrix;return i.icons.forEach((i,s)=>{var a,o;let l=i.AABBBounds.clone();l.translate(i._marginArray[3],i._marginArray[0]),l.containsPoint({x:t.x-r,y:t.y-n})&&((e=i).globalX=(null!=(a=e.attribute.x)?a:0)+r+i._marginArray[3],e.globalY=(null!=(o=e.attribute.y)?o:0)+n+i._marginArray[0])}),e}getNoWorkAnimateAttr(){return w.NOWORK_ANIMATE_ATTR}}function S(t){return new w(t)}w.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},s.Wl)},2105:function(t,e,i){"use strict";i.d(e,{Hi:()=>f,MS:()=>m,SZ:()=>g,cV:()=>u,i7:()=>a,nq:()=>d,p3:()=>p});var r=i(92631),n=i(33880),s=i(77067);let a={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},o={fontSize:16,fontFamily:s.iR,fill:!0,stroke:!1,fontWeight:"normal",lineHeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",script:"normal"};String.fromCharCode(160);let l=/\w|\(|\)|-/,h=/[.?!,;:/，。？！、；：]/,u=/\S/,c=(t,e)=>{let i=e.fontSize||16;switch(e.script){case"super":case"sub":i*=.8}t.setTextStyle({textAlign:"left",textBaseline:e.textBaseline||"alphabetic",fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||"",fontSize:i,fontFamily:e.fontFamily})};function d(t,e,i){let r=e&&e.fill||o.fill;if(!r)return void(t.globalAlpha=0);let{fillOpacity:s=1,opacity:a=1}=e;t.globalAlpha=s*a,t.fillStyle=i?(0,n.L)(t,r,{AABBBounds:i}):r,c(t,e)}function p(t,e){let i=e&&e.stroke||o.stroke;if(!i)return void(t.globalAlpha=0);let{strokeOpacity:r=1,opacity:n=1}=e;t.globalAlpha=r*n,t.lineWidth=e&&"number"==typeof e.lineWidth?e.lineWidth:1,t.strokeStyle=i,c(t,e)}function f(t,e,i,n,s){if(t.length<=1||!e||e<=0)return 0;let a=r.w.graphicUtil.textMeasure,o=n,l=t.slice(0,o),h=Math.floor(a.measureText(l,i).width),u=t.slice(0,o+1),c=Math.floor(a.measureText(u,i).width);for(;h>e||c<=e;){if(h>e?o--:o++,o>t.length){o=t.length;break}if(o<0){o=0;break}l=t.slice(0,o),h=Math.floor(a.measureText(l,i).width),u=t.slice(0,o+1),c=Math.floor(a.measureText(u,i).width)}return s&&(o=g(t,o)),o}function g(t,e,i=!1){let r=e;for(;l.test(t[r-1])&&l.test(t[r])||h.test(t[r]);)if(--r<=0)return i?function(t,e){let i=e;for(;l.test(t[i+1])&&l.test(t[i])||h.test(t[i]);)if(++i>=t.length)return i;return i+1}(t,e):e;return r}function m(t,e,i="actual"){var n;if(""===t)return{ascent:0,height:0,descent:0,width:0};let s=r.w.graphicUtil.textMeasure.measureText(t,e),a={ascent:0,height:0,descent:0,width:0},o="actual"===i?s.actualBoundingBoxAscent:s.fontBoundingBoxAscent,l="actual"===i?s.actualBoundingBoxDescent:s.fontBoundingBoxDescent;"number"!=typeof o||"number"!=typeof l?(a.width=Math.floor(s.width),a.height=e.fontSize||0,a.ascent=a.height,a.descent=0):(a.width=Math.floor(s.width),a.height=Math.floor(o+l),a.ascent=Math.floor(o),a.descent=a.height-a.ascent);let h=null!=(n=e.space)?n:0;return a.width+=h,a}},78503:function(t,e,i){"use strict";i.d(e,{t:()=>p});var r=i(95723),n=i(52462),s=i(17852),a=i(92631),o=i(78085),l=i(10773),h=i(55105);let u=(t,e,i)=>{let{outerBorder:r,shadowBlur:n=e.shadowBlur,strokeBoundsBuffer:s=e.strokeBoundsBuffer}=t;if(r){let t=e.outerBorder,{distance:a=t.distance,lineWidth:o=t.lineWidth}=r;(0,h.ph)(i,a+(n+o)/2,!0,s)}return i},c=["symbolType","size",...n.DH];class d extends n.zs{constructor(t={symbolType:"circle"}){super(t),this.type="symbol",this.numberType=l.B5}getParsedPath(){return this.shouldUpdateShape()&&(this._parsedPath=this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}getParsedPath2D(t=0,e=0,i=1){let r=null;try{r=new Path2D}catch(t){return null}let n=this.getParsedPath();if(!n)return null;n.draw(r,i,t,e)}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{size:t}=this.attribute;return(0,r.Z)(t)?2===t.length&&t.every(this._validNumber):this._validNumber(t)}doUpdateParsedPath(){let{symbolType:t="circle"}=this.attribute;return super.parsePath(t)}getGraphicTheme(){return(0,s.gh)(this).symbol}updateAABBBounds(t,e,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateSymbolAABBBoundsImprecise(t,e,i):this.updateSymbolAABBBoundsAccurate(t,e,i));let{tb1:n,tb2:s}=a.w.graphicService.updateTempAABBBounds(i);u(t,e,n),i.union(n),n.setValue(s.x1,s.y1,s.x2,s.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,this.x1WithoutTransform=i.x1,this.y1WithoutTransform=i.y1;let{lineJoin:o=e.lineJoin}=t;return a.w.graphicService.transformAABBBounds(t,i,e,"miter"===o,this),i}updateSymbolAABBBoundsImprecise(t,e,i){let{size:n=e.size}=t;if((0,r.Z)(n))i.set(-n[0]/2,-n[1]/2,n[0]/2,n[1]/2);else{let t=n/2;i.set(-t,-t,t,t)}return i}updateSymbolAABBBoundsAccurate(t,e,i){let{size:r=e.size}=t,n=this.getParsedPath();return n&&n.bounds(r,i),i}needUpdateTags(t){return super.needUpdateTags(t,c)}needUpdateTag(t){return super.needUpdateTag(t,c)}toCustomPath(){let t=this.getParsedPath();if(!t)return null;let e=this.attribute.size,i=(0,r.Z)(e)?e:[e,e];return t.path?(new o.r).fromCustomPath2D(t.path,0,0,i[0],i[1]):(new o.r).fromString(t.pathStr,0,0,i[0],i[1])}clone(){return new d(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return d.NOWORK_ANIMATE_ATTR}}function p(t){return new d(t)}d.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},n.Wl)},63654:function(t,e,i){"use strict";i.d(e,{r:()=>v,x:()=>y});var r=i(90180),n=i(95723),s=i(19273),a=i(63401),o=i(8830),l=i(52807),h=i(79861),u=i(92631),c=i(52462),d=i(17852),p=i(19626),f=i(10773),g=i(55105);let m=["text","maxLineWidth","maxWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...c.DH];class y extends c.zs{get font(){let t=this.getGraphicTheme();return this._font||(this._font=(0,r.U)(this.attribute,t)),this._font}get clipedText(){var t;let e=this.attribute,i=this.getGraphicTheme();return Number.isFinite(this.getMaxWidth(i))?(this.tryUpdateAABBBounds(),this.cache.clipedText):(null!=(t=e.text)?t:i.text).toString()}get clipedWidth(){return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){var t,e;let i=this.getGraphicTheme(),r=this.attribute;if(!Number.isFinite(this.getMaxWidth(i)))return!1;let{text:n}=this.attribute;if(this.tryUpdateAABBBounds(),null==(e=null==(t=this.cache)?void 0:t.layoutData)?void 0:e.lines){let t="";return this.cache.layoutData.lines.forEach(e=>{t+=e.str}),(Array.isArray(n)?n.join(""):n).toString()!==t}return"vertical"===r.direction&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map(t=>t.text).join("")!==r.text.toString():null!=this.clipedText&&this.clipedText!==r.text.toString()}get multilineLayout(){return this.tryUpdateAABBBounds(),this.cache.layoutData}get isMultiLine(){return Array.isArray(this.attribute.text)||"normal"===this.attribute.whiteSpace}constructor(t={text:"",fontSize:16}){super(t),this.type="text",this.numberType=f.Us,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{text:t}=this.attribute;return(0,n.Z)(t)?!t.every(t=>null==t||""===t):null!=t&&""!==t}getGraphicTheme(){return(0,d.gh)(this).text}doUpdateOBBBounds(){let t=this.getGraphicTheme();this._OBBBounds.clear();let e=this.attribute,{angle:i=t.angle}=e;if(!i){let t=this.AABBBounds;return this._OBBBounds.setValue(t.x1,t.y1,t.x2,t.y2),this._OBBBounds}this.obbText||(this.obbText=new y({})),this.obbText.setAttributes(Object.assign(Object.assign({},e),{angle:0}));let r=this.obbText.AABBBounds,{x:n,y:a}=e,o={x:(r.x1+r.x2)/2,y:(r.y1+r.y2)/2},l=(0,s.xj)(o,i,{x:n,y:a});return this._OBBBounds.copy(r),this._OBBBounds.translate(l.x-o.x,l.y-o.y),this._OBBBounds.angle=i,this._OBBBounds}updateAABBBounds(t,e,i){let{text:r=e.text}=this.attribute;Array.isArray(r)?this.updateMultilineAABBBounds(r):this.updateSingallineAABBBounds(r);let{tb1:n}=u.w.graphicService.updateTempAABBBounds(i),{scaleX:s=e.scaleX,scaleY:o=e.scaleY,shadowBlur:l=e.shadowBlur,strokeBoundsBuffer:h=e.strokeBoundsBuffer}=t;if(l){let t=l/Math.abs(s+o);(0,g.ph)(n,t,!0,h),i.union(n)}return u.w.graphicService.combindShadowAABBBounds(i,this),null==t.forceBoundsHeight&&null==t.forceBoundsWidth||u.w.graphicService.updateHTMLTextAABBBounds(t,e,i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,(0,a.n2)(i,i,this.transMatrix),i}updateSingallineAABBBounds(t){this.updateMultilineAABBBounds([t]);let e=this.cache.layoutData;if(e&&e.lines&&e.lines.length){let t=e.lines[0];this.cache.clipedText=t.str,this.cache.clipedWidth=t.width}return this._AABBBounds}updateMultilineAABBBounds(t){let e=this.getGraphicTheme(),{direction:i=e.direction,underlineOffset:r=e.underlineOffset}=this.attribute,n="horizontal"===i?this.updateHorizontalMultilineAABBBounds(t):this.updateVerticalMultilineAABBBounds(t);return"horizontal"===i&&r&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+r),n}guessLineHeightBuf(t){return t?.1*t:0}updateHorizontalMultilineAABBBounds(t){var e,i;let r=this.getGraphicTheme(),n=this.attribute,{fontFamily:s=r.fontFamily,textAlign:a=r.textAlign,textBaseline:o=r.textBaseline,fontSize:l=r.fontSize,fontWeight:c=r.fontWeight,ellipsis:d=r.ellipsis,maxLineWidth:p,stroke:f=r.stroke,wrap:g=r.wrap,measureMode:m=r.measureMode,lineWidth:y=r.lineWidth,whiteSpace:v=r.whiteSpace,suffixPosition:b=r.suffixPosition,ignoreBuf:x=r.ignoreBuf,keepCenterInLine:_=r.keepCenterInLine}=n,w=x?0:this.guessLineHeightBuf(l),S=this.getLineHeight(n,r,w);if("normal"===v||g)return this.updateWrapAABBBounds(t);if(!this.shouldUpdateShape()&&(null==(e=this.cache)?void 0:e.layoutData)){let t=this.cache.layoutData.bbox;return this._AABBBounds.set(t.xOffset,t.yOffset,t.xOffset+t.width,t.yOffset+t.height),f&&this._AABBBounds.expand(y/2),this._AABBBounds}let A=u.w.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(i=this.stage)?void 0:i.textMeasureId)),C=new h.j(s,{fontSize:l,fontWeight:c,fontFamily:s,lineHeight:S},A).GetLayoutByLines(t,a,o,S,!0===d?r.ellipsis:d||void 0,!1,{lineWidth:p,suffixPosition:b,measureMode:m,keepCenterInLine:_}),{bbox:D}=C;return this.cache.layoutData=C,this.clearUpdateShapeTag(),this._AABBBounds.set(D.xOffset,D.yOffset,D.xOffset+D.width,D.yOffset+D.height),f&&this._AABBBounds.expand(y/2),this._AABBBounds}updateWrapAABBBounds(t){var e,i,r,s;let a=this.getGraphicTheme(),{fontFamily:o=a.fontFamily,textAlign:l=a.textAlign,textBaseline:c=a.textBaseline,fontSize:d=a.fontSize,ellipsis:p=a.ellipsis,maxLineWidth:f,stroke:g=a.stroke,lineWidth:m=a.lineWidth,wordBreak:y=a.wordBreak,fontWeight:v=a.fontWeight,ignoreBuf:b=a.ignoreBuf,measureMode:x=a.measureMode,suffixPosition:_=a.suffixPosition,heightLimit:w=0,lineClamp:S,keepCenterInLine:A=a.keepCenterInLine}=this.attribute,C=b?0:this.guessLineHeightBuf(d),D=this.getLineHeight(this.attribute,a,C);if(!this.shouldUpdateShape()&&(null==(e=this.cache)?void 0:e.layoutData)){let t=this.cache.layoutData.bbox;return this._AABBBounds.set(t.xOffset,t.yOffset,t.xOffset+t.width,t.yOffset+t.height),g&&this._AABBBounds.expand(m/2),this._AABBBounds}let T=u.w.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(i=this.stage)?void 0:i.textMeasureId)),B={fontSize:d,fontWeight:v,fontFamily:o,lineHeight:D},M=new h.j(o,B,T),E=(0,n.Z)(t)?t.map(t=>t.toString()):[t.toString()],k=[],F=[0,0],R=1/0;if(w>0&&(R=Math.max(Math.floor(w/D),1)),S&&(R=Math.min(R,S)),"number"==typeof f&&f!==1/0){if(f>0)for(let t=0;t<E.length;t++){let e=E[t],i=!0;if(t===R-1){let i=T.clipTextWithSuffix(e,B,f,p,!1,_,t!==E.length-1),r=T.measureTextPixelADscentAndWidth(i.str,B,x);k.push({str:i.str,width:i.width,ascent:r.ascent,descent:r.descent,keepCenterInLine:A});break}let n=T.clipText(e,B,f,"break-all"!==y,"keep-all"===y);if(""!==e&&""===n.str||n.wordBreaked){if(p){let t=T.clipTextWithSuffix(e,B,f,p,!1,_);n.str=null!=(r=t.str)?r:"",n.width=null!=(s=t.width)?s:0}else n.str="",n.width=0;i=!1}let a=T.measureTextPixelADscentAndWidth(n.str,B,x);k.push({str:n.str,width:n.width,ascent:a.ascent,descent:a.descent,keepCenterInLine:A});let o=n.str.length;if(n.wordBreaked&&(""===e||""!==n.str)&&(i=!0,o=n.wordBreaked),n.str.length===e.length);else if(i){let i=e.substring(o);"keep-all"===y&&(i=i.replace(/^\s+/g,"")),E.splice(t+1,0,i)}}let t=0;k.forEach(e=>{t=Math.max(t,e.width)}),F[0]=t}else{let t,e,i=0;for(let r=0,n=E.length;r<n;r++){if(r===R-1){let t=T.clipTextWithSuffix(E[r],B,f,p,!1,_),e=T.measureTextPixelADscentAndWidth(t.str,B,x);k.push({str:t.str,width:t.width,ascent:e.ascent,descent:e.descent,keepCenterInLine:A}),i=Math.max(i,t.width);break}e=E[r],i=Math.max(i,t=T.measureTextWidth(e,B));let n=T.measureTextPixelADscentAndWidth(e,B,x);k.push({str:e,width:t,ascent:n.ascent,descent:n.descent,keepCenterInLine:A})}F[0]=i}F[1]=k.length*D;let P={xOffset:0,yOffset:0,width:F[0],height:F[1]};M.LayoutBBox(P,l,c,k);let O=M.layoutWithBBox(P,k,l,c,D);return this.cache.layoutData=O,this.clearUpdateShapeTag(),this._AABBBounds.set(P.xOffset,P.yOffset,P.xOffset+P.width,P.yOffset+P.height),g&&this._AABBBounds.expand(m/2),this._AABBBounds}updateVerticalMultilineAABBBounds(t){var e,i,r;let n,s=this.getGraphicTheme(),a=u.w.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(e=this.stage)?void 0:e.textMeasureId)),h=this.attribute,{maxLineWidth:c=s.maxLineWidth,ellipsis:d=s.ellipsis,fontFamily:p=s.fontFamily,fontSize:f=s.fontSize,fontWeight:m=s.fontWeight,stroke:v=s.stroke,lineWidth:b=s.lineWidth,verticalMode:x=s.verticalMode,suffixPosition:_=s.suffixPosition}=h,w=this.getLineHeight(h,s,0),{textAlign:S=s.textAlign,textBaseline:A=s.textBaseline}=h;if(!x){let t=S;S=null!=(i=y.baselineMapAlign[A])?i:"left",A=null!=(r=y.alignMapBaseline[t])?r:"top"}if(n=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach(t=>{let e=t.reduce((t,e)=>t+e.width,0);n=(0,o.Fp)(e,n)});let t=(0,l.js)(S,n),e=this.cache.verticalList.length*w,i=(0,l.nV)(A,e,f);return this._AABBBounds.set(i,t,i+e,t+n),v&&this._AABBBounds.expand(b/2),this._AABBBounds}let C=t.map(t=>(0,g.Xk)(t.toString()));C.forEach((t,e)=>{if(Number.isFinite(c))if(d){let i=!0===d?s.ellipsis:d,r=a.clipTextWithSuffixVertical(t,{fontSize:f,fontWeight:m,fontFamily:p},c,i,!1,_);C[e]=r.verticalList,n=r.width}else{let i=a.clipTextVertical(t,{fontSize:f,fontWeight:m,fontFamily:p},c,!1);C[e]=i.verticalList,n=i.width}else n=0,t.forEach(t=>{let e=t.direction===g.m5.HORIZONTAL?f:a.measureTextWidth(t.text,{fontSize:f,fontWeight:m,fontFamily:p});n+=e,t.width=e})}),this.cache.verticalList=C,this.clearUpdateShapeTag(),this.cache.verticalList.forEach(t=>{let e=t.reduce((t,e)=>t+e.width,0);n=(0,o.Fp)(e,n)});let D=(0,l.js)(S,n),T=this.cache.verticalList.length*w,B=(0,l.nV)(A,T,f);return this._AABBBounds.set(B,D,B+T,D+n),v&&this._AABBBounds.expand(b/2),this._AABBBounds}getMaxWidth(t){var e,i;let r=this.attribute;return null!=(i=null!=(e=r.maxLineWidth)?e:r.maxWidth)?i:t.maxWidth}getLineHeight(t,e,i){var r;return null!=(r=(0,p.VA)(t.lineHeight,t.fontSize||e.fontSize))?r:(t.fontSize||e.fontSize)+i}needUpdateTags(t,e=m){return super.needUpdateTags(t,e)}needUpdateTag(t,e=m){return super.needUpdateTag(t,e)}_interpolate(t,e,i,r,n){"text"===t&&(n.text=r)}clone(){return new y(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return y.NOWORK_ANIMATE_ATTR}getBaselineMapAlign(){return y.baselineMapAlign}getAlignMapBaseline(){return y.alignMapBaseline}}function v(t){return new y(t)}y.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},c.Wl),y.baselineMapAlign={top:"left",bottom:"right",middle:"center"},y.alignMapBaseline={left:"top",right:"bottom",center:"middle"}},17852:function(t,e,i){"use strict";i.d(e,{Q2:()=>h,gh:()=>function t(e,i){return e.glyphHost?t(e.glyphHost):i?(e.isContainer,i):function(t){let e;if(e=t.isContainer?t:t.parent){for(;e&&!e.theme;)e=e.parent;return e?(e.theme||e.createTheme(),e.theme.getTheme(e)):u.getTheme()}return null}(e)||e.attachedThemeGraphic&&t(e.attachedThemeGraphic)||u.getTheme()}});var r=i(85476),n=i(82265);let s={arc:n.Up,area:n.eh,circle:n.t8,line:n.h8,path:n.J7,symbol:n.th,text:n.T5,rect:n.kx,polygon:n.ZD,star:n.VF,richtext:n.Iq,richtextIcon:n.YW,image:n.jK,group:n.bZ,glyph:n.e9},a=Object.keys(s);function o(t,e){Object.keys(e).forEach(i=>{t[i]=e[i]})}let l={arc:Object.assign({},s.arc),area:Object.assign({},s.area),circle:Object.assign({},s.circle),line:Object.assign({},s.line),path:Object.assign({},s.path),symbol:Object.assign({},s.symbol),text:Object.assign({},s.text),rect:Object.assign({},s.rect),polygon:Object.assign({},s.polygon),star:Object.assign({},s.star),richtext:Object.assign({},s.richtext),richtextIcon:Object.assign({},s.richtextIcon),image:Object.assign({},s.image),group:Object.assign({},s.group),glyph:Object.assign({},s.glyph)};class h{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},a.forEach(t=>{this._defaultTheme[t]=Object.create(l[t])}),this.combinedTheme=this._defaultTheme}getTheme(t){if(!t||!this.dirty)return this.combinedTheme;let e={},i=this.getParentWithTheme(t);return i&&(e=i.theme),this.applyTheme(t,e),this.combinedTheme}getParentWithTheme(t){for(;t.parent;)if((t=t.parent).theme)return t;return null}applyTheme(t,e,i=!1){if(this.dirty){let n=this.getParentWithTheme(t);if(n){let t=n.theme;(t.dirty||i)&&t.applyTheme(n,e,!0)}this.userTheme?this.doCombine(n&&n.theme.combinedTheme):(n?this.combinedTheme=n.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,r.Y.getInstance().warn("未知错误，走到不应该走的区域里")),this.dirty=!1)}return this.combinedTheme}doCombine(t){let e=this.userTheme,i=this.combinedTheme;a.forEach(r=>{let n=Object.create(l[r]);t&&t[r]&&o(n,t[r]),i[r]&&o(n,i[r]),e[r]&&o(n,e[r]),this.combinedTheme[r]=n}),e.common&&a.forEach(t=>{o(this.combinedTheme[t],e.common)}),this.dirty=!1}setTheme(t,e){let i=this.userTheme;i?Object.keys(t).forEach(e=>{i[e]?Object.assign(i[e],t[e]):i[e]=Object.assign({},t[e])}):i=t,this.userTheme=i,this.dirty=!0,this.dirtyChildren(e)}resetTheme(t,e){this.userTheme=t,this.dirty=!0,this.dirtyChildren(e)}dirtyChildren(t){t.forEachChildren(t=>{t.isContainer&&(t.theme&&(t.theme.dirty=!0),this.dirtyChildren(t))})}}let u=new h},55105:function(t,e,i){"use strict";var r,n;function s(t,e,i,r=0){var n,a;return t.expand(e+(r/2+(i?(n=i,a=e,n?a:0):0))),t}i.d(e,{Gg:()=>o,Xk:()=>l,m5:()=>r,ph:()=>s});let a=0;function o(){return a++}function l(t){let e=[],i=0,n="";for(let s=0;s<t.length;s++)!function(t){if(h.has(t))return!0;if(u.has(t))return!1;let e=!1;return 256>t.codePointAt(0)&&(e=!0),e}(t[s])?(i&&(e.push({text:n,direction:r.VERTICAL}),n="",i=0),e.push({text:t[s],direction:r.HORIZONTAL})):i?n+=t[s]:(i=1,n=t[s]);return n&&e.push({text:n,direction:r.VERTICAL}),e}(n=r||(r={}))[n.HORIZONTAL=0]="HORIZONTAL",n[n.VERTICAL=1]="VERTICAL";let h=new Map;["…","（","）","—","【","】","「","」","《","》"].forEach(t=>h.set(t,!0));let u=new Map;[""].forEach(t=>u.set(t,!0))},43225:function(t,e,i){"use strict";var r,n,s,a;i.d(e,{T:()=>r,t:()=>n}),(s=r||(r={})).wait="wait",s.from="from",s.to="to",s.customAnimate="customAnimate",(a=n||(n={}))[a.INITIAL=0]="INITIAL",a[a.RUNNING=1]="RUNNING",a[a.PAUSED=2]="PAUSED",a[a.END=3]="END"},20533:function(t,e,i){"use strict";var r,n;i.d(e,{r:()=>r}),(n=r||(r={}))[n.estimate=0]="estimate",n[n.actualBounding=1]="actualBounding",n[n.fontBounding=2]="fontBounding"},73036:function(t,e,i){"use strict";i.d(e,{rF:()=>t5,WN:()=>t8,VJ:()=>t3});var r,n=i(22415),s=i(34865),a=i(26845),o=i(47816),l=i(77909),h=i(46009),u=i(77067),c=i(27753),d=i(30528),p=i(44475),f=function(t,e){return function(i,r){e(i,r,t)}};let g=class extends p.w{get env(){return this._env}get isImageAnonymous(){return this._isImageAnonymous}set isImageAnonymous(t){this._isImageAnonymous=t}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(t){this._env||this.setEnv("browser"),this.envContribution.supportEvent=t}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=t}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=t}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(t){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=t}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(t){this._env||this.setEnv("browser"),this.envContribution.applyStyles=t}constructor(t){super(),this.contributions=t,this._isImageAnonymous=!0,this._performanceRAFList=[],this.eventListenerTransformer=t=>t,this.id=c.R.GenAutoIncrementId(),this.hooks={onSetEnv:new h.n(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}_nativeAddEventListener(t,e,i){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(t,e,i)}_nativeRemoveEventListener(t,e,i){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(t,e,i)}_nativeDispatchEvent(t){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(t)}bindContribution(t){let e=[];if(this.contributions.getContributions().forEach(i=>{let r=i.configure(this,t);r&&r.then&&e.push(r)}),e.length)return Promise.all(e)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(t,e){if(e&&!0===e.force||this._env!==t)return this.deactiveCurrentEnv(),this.activeEnv(t,e)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(t,e){let i=this._env;this._env=t;let r=this.bindContribution(e);if(r&&r.then)return r.then(()=>{this.envParams=e,this.hooks.onSetEnv.call(i,t,this)});this.envParams=e,this.hooks.onSetEnv.call(i,t,this)}setActiveEnvContribution(t){this.envContribution=t}createCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(t)}createOffscreenCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(t)}releaseCanvas(t){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(t)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getSpecifiedRequestAnimationFrame(t){this._env||this.setEnv("browser"),this._performanceRAFList[t]||(this._performanceRAFList[t]=new d.A);let e=this._performanceRAFList[t];return t=>e.addAnimationFrameCb(t)}getSpecifiedCancelAnimationFrame(t){if(this._env||this.setEnv("browser"),!this._performanceRAFList[t])return()=>!1;let e=this._performanceRAFList[t];return t=>e.removeAnimationFrameCb(t)}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(t){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(t):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(t,e){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(t,e):null}loadImage(t){return this._env||this.setEnv("browser"),this.envContribution.loadImage(t)}loadSvg(t){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(t)}loadJson(t){return this._env||this.setEnv("browser"),this.envContribution.loadJson(t)}loadArrayBuffer(t){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(t)}loadBlob(t){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(t)}loadFont(t,e,i){var r,n,s,a;return r=this,n=void 0,s=void 0,a=function*(){return this._env||this.setEnv("browser"),this.envContribution.loadFont(t,e,i)},new(s||(s=Promise))(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof s?r:new s(function(t){t(r)})).then(i,o)}l((a=a.apply(r,n||[])).next())})}isChrome(){return null!=this._isChrome||(this._env||this.setEnv("browser"),this._isChrome="browser"===this._env&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return null!=this._isSafari||(this._env||this.setEnv("browser"),this._isSafari="browser"===this._env&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(t){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(t)}removeDom(t){return this._env||this.setEnv("browser"),this.envContribution.removeDom(t)}createDom(t){return this._env||this.setEnv("browser"),this.envContribution.createDom(t)}updateDom(t,e){return this._env||this.setEnv("browser"),this.envContribution.updateDom(t,e)}getElementTop(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTop(t,e)}getElementLeft(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(t,e)}getElementTopLeft(t,e=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(t,e)}isMacOS(){return this._env||this.setEnv("browser"),this.envContribution.isMacOS()}copyToClipBoard(t){return this._env||this.setEnv("browser"),this.envContribution.copyToClipBoard(t)}};g=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),f(0,(0,a.f)(l.Qc)),f(0,(0,o.t)(u.D0)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],g);var m=i(31659),y=i(82265),v=i(64449),b=i(69182),x=i(32207),_=i(92631),w=i(34505),S=i(28364),A=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a},C=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},D=function(t,e){return function(i,r){e(i,r,t)}};let T=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(t){this.contributions=t,this.configured=!1,this.global=_.w.global,this._textMeasureMap=new Map,this.global.hooks.onSetEnv.tap("graphic-util",(t,e,i)=>{this.configured=!1,this.configure(i,e)})}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}getTextMeasureInstance(t){return t&&this._textMeasureMap.get(t)||this.textMeasure}configure(t,e){this.configured||(this.contributions.getContributions().forEach(t=>{t.configure(this,e)}),this.configured=!0)}tryInitCanvas(){if(!this._canvas){let t=x.A.shareCanvas();this._canvas=t,this._context=t.getContext("2d")}}bindTextMeasure(t){this._textMeasure&&"DefaultTextMeasureContribution"!==t.id||(this._textMeasure=t),this._textMeasureMap.has(t.id)||this._textMeasureMap.set(t.id,t)}measureText(t,e,i="native"){var r;this.configure(this.global,this.global.env);let n=this.global.measureTextMethod;this.global.measureTextMethod=i;let s={width:this._textMeasure.measureTextWidth(t,e),height:null!=(r=e.fontSize)?r:y.q9.fontSize};return this.global.measureTextMethod=n,s}createTextMeasureInstance(t,e,i){return this.configure(this.global,this.global.env),new v.e(Object.assign({defaultFontParams:{fontFamily:y.q9.fontFamily,fontSize:y.q9.fontSize},getCanvasForMeasure:i||(()=>this.canvas),getTextBounds:void 0,specialCharSet:"-/: .,@%'\"~"+v.e.ALPHABET_CHAR_SET+v.e.ALPHABET_CHAR_SET.toUpperCase()},null!=e?e:{}),t)}drawGraphicToCanvas(t,e,i){if(!e.defaultLayer)return null;let r=w.n.get(S.Oo),n=t.AABBBounds,s=n.width(),a=n.height(),o=-n.x1,l=-n.y1;r.create({viewBox:{x1:o,y1:l,x2:n.x2,y2:n.y2},width:s,height:a,canvas:i,dpr:e.window.dpr,canvasControled:!0,offscreen:!0,title:""});let h=e.params.optimize.disableCheckGraphicWidthOutRange;e.params.optimize.disableCheckGraphicWidthOutRange=!0,e.defaultLayer.getNativeHandler().drawTo(r,[t],{transMatrix:r.getViewBoxTransform(),viewBox:r.getViewBox(),stage:e,layer:e.defaultLayer,renderService:e.renderService,background:"transparent",clear:!0,updateBounds:!1}),e.params.optimize.disableCheckGraphicWidthOutRange=h;let u=r.getNativeHandler();return u.nativeCanvas?u.nativeCanvas:null}};T=A([(0,s.b)(),D(0,(0,a.f)(l.Qc)),D(0,(0,o.t)(m.j)),C("design:paramtypes",[Object])],T),(tY=t$||(t$={}))[tY.transform=0]="transform",tY[tY.matrix=1]="matrix";let B=new b.y,M=class{constructor(){this.matrix=new b.y}init(t){return this.mode=t$.transform,this.originTransform=t,this.matrix.reset(),this}fromMatrix(t,e){return this.mode=t$.matrix,this.outSourceMatrix=t,this.outTargetMatrix=e,this}scaleMatrix(t,e,i){let r=this.outSourceMatrix;if(B.setValue(r.a,r.b,r.c,r.d,r.e,r.f),this.outTargetMatrix.reset(),i){let{x:r,y:n}=i;this.outTargetMatrix.translate(r,n),this.outTargetMatrix.scale(t,e),this.outTargetMatrix.translate(-r,-n)}else this.outTargetMatrix.scale(t,e);return this.outTargetMatrix.multiply(B.a,B.b,B.c,B.d,B.e,B.f),this}rotateMatrix(t,e){let i=this.outSourceMatrix;if(B.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),e){let{x:i,y:r}=e;this.outTargetMatrix.translate(i,r),this.outTargetMatrix.rotate(t),this.outTargetMatrix.translate(-i,-r)}else this.outTargetMatrix.rotate(t);return this.outTargetMatrix.multiply(B.a,B.b,B.c,B.d,B.e,B.f),this}scale(t,e,i){return this.mode===t$.matrix?this.scaleMatrix(t,e,i):this}rotate(t,e){return this.mode===t$.matrix?this.rotateMatrix(t,e):this}translateMatrix(t,e){let i=this.outSourceMatrix;return B.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(t,e),this.outTargetMatrix.multiply(B.a,B.b,B.c,B.d,B.e,B.f),this}translate(t,e){return this.mode===t$.matrix?this.translateMatrix(t,e):this}simplify(t){return this.mode===t$.matrix?this.simplifyMatrix(t):this}simplifyMatrix(t){return this}};M=A([(0,s.b)(),C("design:paramtypes",[])],M);var E=i(17852),k=i(8849);class F extends k.ZA{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw Error("暂不支持")}get dpr(){return this._dpr}constructor(t,e,i,r){var n;super({}),this.stage=t,this.global=e,this.window=i,this.main=r.main,this.layerHandler=r.layerHandler,this.layerHandler.init(this,i,{main:r.main,canvasId:r.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:null!=(n=r.zIndex)?n:0}),this.layer=this,this.subLayers=new Map,this.theme=new E.Q2,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(t=!0){let e=Array.from(this.subLayers.values()).sort((t,e)=>t.zIndex-e.zIndex);this.layerHandler.merge(e.map(e=>(e.layer.subLayers.size&&e.layer.combineSubLayer(t),e.layer.getNativeHandler()))),t&&e.forEach(t=>{t.group&&(t.group.incremental=0)}),e.forEach(t=>{_.w.layerService.releaseLayer(this.stage,t.layer)}),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(t,e){super.setStage(t,this)}pick(t,e){throw Error("暂不支持")}tryRenderSecondaryLayer(t,e){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach(i=>{i.layer.renderCount=this.renderCount,i.layer.render(t,e)})}render(t,e){var i;this.layerHandler.render([this],{renderService:t.renderService,stage:this.stage,layer:this,viewBox:t.viewBox,transMatrix:t.transMatrix,background:null!=(i=t.background)?i:this.background,updateBounds:t.updateBounds},e),this.afterDrawCbs.forEach(t=>t(this)),this.tryRenderSecondaryLayer(t,e)}resize(t,e){this.layerHandler.resize(t,e)}resizeView(t,e){this.layerHandler.resizeView(t,e)}setDpr(t){this.layerHandler.setDpr(t)}afterDraw(t){this.afterDrawCbs.push(t)}startAnimate(t){throw Error("暂不支持")}setToFrame(t){throw Error("暂不支持")}prepare(t,e){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach(t=>{_.w.layerService.releaseLayer(this.stage,t.layer)})}drawTo(t,e){var i;this.layerHandler.drawTo(t,[this],Object.assign({background:null!=(i=e.background)?i:this.background,renderService:e.renderService,viewBox:e.viewBox,transMatrix:e.transMatrix,stage:this.stage,layer:this},e)),this.afterDrawCbs.forEach(t=>t(this))}}var R=i(90881);let P=tq=class{static GenerateLayerId(){return`${tq.idprefix}_${tq.prefix_count++}`}constructor(){this.layerMap=new Map,this.global=_.w.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(t){return this.layerMap.get(t)}getRecommendedLayerType(t){return t||(0!==this.staticLayerCountInEnv?"static":0!==this.dynamicLayerCountInEnv?"dynamic":"virtual")}getLayerHandler(t){return"static"===t?w.n.get(R.kj):"dynamic"===t?w.n.get(R.ym):w.n.get(R.XJ)}createLayer(t,e={main:!1}){var i;this.tryInit();let r=this.getRecommendedLayerType(e.layerMode);r=e.main||e.canvasId?"static":r;let n=this.getLayerHandler(r),s=new F(t,this.global,t.window,Object.assign(Object.assign({main:!1},e),{layerMode:r,canvasId:null!=(i=e.canvasId)?i:tq.GenerateLayerId(),layerHandler:n})),a=this.layerMap.get(t)||[];return a.push(s),this.layerMap.set(t,a),this.staticLayerCountInEnv--,s}prepareStageLayer(t){let e;t.forEachChildren(t=>{let i=t.getNativeHandler();"virtual"===i.type?(i.mainHandler=e,e.secondaryHandlers.push(i)):(e=i).secondaryHandlers=[]})}releaseLayer(t,e){e.release();let i=this.layerMap.get(t)||[];this.layerMap.set(t,i.filter(t=>t!==e))}layerCount(t){return(this.layerMap.get(t)||[]).length}restLayerCount(t){return 10*("browser"===this.global.env)}releaseStage(t){this.layerMap.delete(t)}};P.idprefix="visactor_layer",P.prefix_count=0,P=tq=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],P);let O=new n.n(t=>{t(u.y2).to(g).inSingletonScope(),t(S.Oo).to(S.Il),t(R.no).to(T).inSingletonScope(),t(R.Gp).to(M).inSingletonScope(),t(R.IT).to(P).inSingletonScope()});var L=i(32227);let I=class{constructor(t){this.drawContribution=t}prepare(t){t&&this.renderTreeRoots.forEach(e=>{this._prepare(e,t)})}_prepare(t,e){t.forEachChildren(t=>{this._prepare(t,e)}),t.update({bounds:e,trans:!0})}prepareRenderList(){}beforeDraw(t){}draw(t){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(t){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}reInit(){this.drawContribution.reInit()}render(t,e){this.renderTreeRoots=t,this.drawParams=e;let i=e.updateBounds;this.prepare(i),this.prepareRenderList(),this.beforeDraw(e),this.draw(e),this.afterDraw(e),this.drawParams=null}};I=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),(tK=(0,a.f)(L.Iv),function(t,e){tK(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],I);var z=i(22649);let Z=new n.n(t=>{t(z.p).to(I)});var j=i(54045),W=i(19498),U=i(80358),N=i(33793),H=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};let G=class{constructor(){this.order=1}afterPickItem(t,e,i,r,n){if(t.graphic){let e=t.graphic;for(;e.parent;)e=e.parent;e.shadowHost&&(t.params={shadowTarget:t.graphic},t.graphic=e.shadowHost)}return t}};G=H([(0,s.b)()],G);let V=class{constructor(){this.order=1}afterPickItem(t,e,i,r,n){return t.attribute.shadowRootIdx>0||!t.attribute.shadowRootIdx?this._pickItem(t,e,i,r,n):null}beforePickItem(t,e,i,r,n){return t.attribute.shadowRootIdx<0?this._pickItem(t,e,i,r,n):null}_pickItem(t,e,i,r,n){var s;if(!t.shadowRoot)return null;let{parentMatrix:a}=n||{};if(!a)return null;let o=e.pickContext;o.highPerformanceSave();let l=null==(s=(0,E.gh)(t))?void 0:s[t.type],{shadowPickMode:h=null==l?void 0:l.shadowPickMode}=t.attribute,u=t.shadowRoot,c=U.QE.allocateByObj(a),d=new W.E9(c.a*i.x+c.c*i.y+c.e,c.b*i.x+c.d*i.y+c.f),p=e.pickGroup(u,d,c,r);return o.highPerformanceRestore(),!p.graphic&&p.group&&"full"===h&&(p.graphic=p.group),p}};V=H([(0,s.b)()],V);let X=class{constructor(){this.order=1}beforePickItem(t,e,i,r,n){let s=t.baseGraphic;if(s&&s.parent){let t=new W.E9(i.x,i.y),n=e.pickContext;n.highPerformanceSave();let a=s.parent.globalTransMatrix;a.transformPoint(t,t);let o=s.isContainer?e.pickGroup(s,t.clone(),a,r):e.pickItem(s,t.clone(),a,r);return n.highPerformanceRestore(),o}return null}};X=H([(0,s.b)()],X);let Y=class{constructor(){this.order=1}beforePickItem(t,e,i,r,n){if(!t.in3dMode||r.in3dInterceptor)return null;let s=e.pickContext,a=t.stage;if(!s||!a)return null;if(r.in3dInterceptor=!0,s.save(),this.initCanvasCtx(s),s.camera=a.camera,t.isContainer){let a=(0,N.y)(s,t,()=>e.pickGroup(t,i,n.parentMatrix,r),r);return s.camera=null,r.in3dInterceptor=!1,s.restore(),a}return s.restore(),null}initCanvasCtx(t){t.setTransformForCurrent()}};Y=H([(0,s.b)()],Y);let $=new n.n((t,e,i)=>{i(j.hH)||(t(j.BR).toSelf(),t(j.hH).toService(j.BR)),t(Y).toSelf().inSingletonScope(),t(j.uH).toService(Y),t(V).toSelf().inSingletonScope(),t(j.uH).toService(V),t(X).toSelf().inSingletonScope(),t(j.uH).toService(X),(0,l.yb)(t,j.uH),t(G).toSelf().inSingletonScope(),t(j.tn).toService(G),(0,l.yb)(t,j.tn)});var q=i(44176),K=i(10773),Q=i(66987);let J=new n.n(t=>{t(K.fB).to(q.JG),t(K.tA).toConstantValue(Q.i)});var tt=i(89340),te=function(t,e){return function(i,r){e(i,r,t)}};let ti=class{constructor(t){this.autoEnablePlugins=t,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(t,e){this.stage=t,this.actived=!0;let{pluginList:i}=e;i&&w.n.isBound(tt.X)&&this.autoEnablePlugins.getContributions().forEach(t=>{i.includes(t.name)&&this.register(t)})}findPluginsByName(t){let e=[];return this.onStartupFinishedPlugin.forEach(i=>{i.name===t&&e.push(i)}),this.onRegisterPlugin.forEach(i=>{i.name===t&&e.push(i)}),e}register(t){"onStartupFinished"===t.activeEvent?this.onStartupFinishedPlugin.push(t):"onRegister"===t.activeEvent&&(this.onRegisterPlugin.push(t),t.activate(this))}unRegister(t){"onStartupFinished"===t.activeEvent?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(t),1):"onRegister"===t.activeEvent&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(t),1),t.deactivate(this)}release(...t){this.onStartupFinishedPlugin.forEach(t=>{t.deactivate(this)}),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach(t=>{t.deactivate(this)}),this.onRegisterPlugin=[]}};ti=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),te(0,(0,a.f)(l.Qc)),te(0,(0,o.t)(tt.X)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],ti);let tr=new n.n(t=>{t(tt.H).to(ti),(0,l.EM)(t,tt.X)}),tn=new n.n(t=>{(0,l.yb)(t,u.D0)}),ts=new n.n(t=>{t(m.j).to(m.f).inSingletonScope(),(0,l.yb)(t,m.j)});var ta=i(42761);let to=class{constructor(){this.type="static",this.offscreen=!1,this.global=_.w.global}setDpr(t){this.canvas.dpr=t}init(t,e,i){if(this.layer=t,this.window=e,i.main)this.main=!0,this.context=e.getContext(),this.canvas=this.context.getCanvas();else{let t;this.main=!1,i.canvasId&&(t=this.global.getElementById(i.canvasId)),t||(t=this.global.createCanvas({width:e.width,height:e.height})),t.style&&(t.style["pointer-events"]="none");let r=e.getContext().getCanvas().nativeCanvas,n=(0,ta.JN)({nativeCanvas:t,width:e.width,height:e.height,dpr:e.dpr,id:i.canvasId,canvasControled:!0,container:e.getContainer(),x:r.offsetLeft,y:r.offsetTop});n.applyPosition(),this.canvas=n,this.context=n.getContext()}}resize(t,e){this.canvas.resize(t,e)}resizeView(t,e){}render(t,e,i){var r;if(!this.main){let t=this.window.getContext().getCanvas().nativeCanvas;t&&(this.canvas.x!==t.offsetLeft||this.canvas.y!==t.offsetTop)&&(this.canvas.x=t.offsetLeft,this.canvas.y=t.offsetTop,this.canvas.applyPosition())}e.renderService.render(t,Object.assign(Object.assign({context:this.context,clear:null!=(r=e.background)?r:"#ffffff"},e),i))}merge(t){t.forEach(t=>{let e=t.getContext().canvas.nativeCanvas;this.context.drawImage(e,0,0)})}prepare(t,e){}drawTo(t,e,i){var r;let n=t.getContext();i.renderService.render(e,Object.assign(Object.assign({context:n},i),{clear:i.clear?null!=(r=i.background)?r:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};to=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],to);let tl=new n.n(t=>{t(to).toSelf(),t(R.kj).toService(to)});var th=i(66512);let tu=(0,i(87201).v)(th.Lc);var tc=i(54161),td=i(63401),tp=i(95723),tf=i(19273),tg=i(85476),tm=i(85668),ty=i(33880),tv=i(65242),tb=function(t,e){return function(i,r){e(i,r,t)}};let tx=class{constructor(t,e){this.contributions=t,this.drawItemInterceptorContributions=e,this._renderInGroup=(t,e,i,r)=>{var n;t?e.forEachChildren(t=>{i.break||(t.isContainer?this.renderGroup(t,i,r):this.renderItem(t,i))}):(0,tc.kD)(e,y.xF.zIndex,t=>{i.break||(t.isContainer?this.renderGroup(t,i,r):this.renderItem(t,i))},!1,!!(null==(n=i.context)?void 0:n.camera))},this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new td.YZ,this.backupDirtyBounds=new td.YZ,this.global=_.w.global,this.layerService=_.w.layerService,(0,tp.Z)(this.contributions)||(this.contributions=[this.contributions]),this.init()}reInit(){this.init(),this.contributions.forEach(t=>{t.reInit()})}init(){this.contributions.forEach(t=>{if(t.style){let e=this.styleRenderMap.get(t.style)||new Map;e.set(t.numberType,t),this.styleRenderMap.set(t.style,e)}else this.defaultRenderMap.set(t.numberType,t)}),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort((t,e)=>t.order-e.order)}prepareForDraw(t,e){e.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!e.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(t,e){var i;this.prepareForDraw(t,e),e.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(e.renderStyle)||this.defaultRenderMap,this.currentRenderService=t;let{context:r,stage:n,viewBox:s,transMatrix:a}=e;if(!r)return;let o=this.dirtyBounds.setValue(0,0,s.width(),s.height());if(n.dirtyBounds&&!n.dirtyBounds.empty()){let t=(0,tf.di)(o,n.dirtyBounds,!1);o.x1=Math.floor(t.x1),o.y1=Math.floor(t.y1),o.x2=Math.ceil(t.x2),o.y2=Math.ceil(t.y2)}let l=r.dpr%1;(l||.5!==l)&&(o.x1=Math.floor(o.x1*r.dpr)/r.dpr,o.y1=Math.floor(o.y1*r.dpr)/r.dpr,o.x2=Math.ceil(o.x2*r.dpr)/r.dpr,o.y2=Math.ceil(o.y2*r.dpr)/r.dpr),this.backupDirtyBounds.copy(o),r.reset(!1),r.save(),r.setClearMatrix(a.a,a.b,a.c,a.d,a.e,a.f),r.clearMatrix(!1),r.translate(s.x1,s.y1,!0),r.beginPath(),r.rect(o.x1,o.y1,o.width(),o.height()),r.clip(),n.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(t,r,e),(null==(i=t.drawParams)?void 0:i.stage)&&t.drawParams.stage.hooks.afterClearScreen.call(t.drawParams),t.renderTreeRoots.sort((t,e)=>{var i,r;return(null!=(i=t.attribute.zIndex)?i:y.xF.zIndex)-(null!=(r=e.attribute.zIndex)?r:y.xF.zIndex)}).forEach(t=>{t.isContainer?this.renderGroup(t,e,U.QE.allocate(1,0,0,1,0,0)):this.renderItem(t,e)}),r.restore(),r.draw()}doRegister(){throw Error("暂不支持")}_findNextGraphic(t){let e=t.parent,i=t._uid;for(;e;){let t=(0,tc.qA)(e,i,y.xF.zIndex);if(t)return t;i=e._uid,e=e.parent}return null}renderGroup(t,e,i,r){if(e.break||!1===t.attribute.visibleAll)return;if(t.incremental&&(null==e.startAtId||e.startAtId===t._uid))return e.break=!0,void this._increaseRender(t,e);if(this.useDirtyBounds&&!(0,tf.SX)(t.AABBBounds,this.dirtyBounds,!1)&&"empty"!==t.attribute.boundsMode)return;let n,s=i;if(this.useDirtyBounds){n=tv.et.allocateByObj(this.dirtyBounds);let e=t.transMatrix;s=U.QE.allocateByObj(i).multiply(e.a,e.b,e.c,e.d,e.e,e.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(s.getInverse())}e.isGroupScroll=!(!t.attribute.scrollX&&!t.attribute.scrollY),this.renderItem(t,e,{renderInGroupParams:{skipSort:r,nextM:s},renderInGroup:this._renderInGroup}),this.useDirtyBounds&&(this.dirtyBounds.copy(n),tv.et.free(n),U.QE.free(s))}_increaseRender(t,e){let{layer:i,stage:r}=e,{subLayers:n}=i,s=n.get(t._uid);s||(s={layer:this.layerService.createLayer(r),zIndex:n.size,group:t},n.set(t._uid,s));let a=s.layer.getNativeHandler().getContext(),o=s.drawContribution||w.n.get(L.Pf);o.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),o.draw(this.currentRenderService,Object.assign(Object.assign({},e),{drawContribution:o,clear:"transparent",layer:s.layer,context:a,startAtId:t._uid,break:!1})),s.drawContribution=o;let l=this._findNextGraphic(t);if(l)if(l.isContainer&&l.incremental)this._increaseRender(l,e);else{let t=n.get(l._uid);t||(t={layer:this.layerService.createLayer(r),zIndex:n.size},n.set(l._uid,t));let i=t.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},e),{drawContribution:o,clear:"transparent",layer:t.layer,context:i,startAtId:l._uid,break:!1}))}}getRenderContribution(t){let e;return e||(e=this.selectRenderByNumberType(t.numberType,t)),e||(e=this.selectRenderByType(t.type)),e}renderItem(t,e,i){if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let n=this.InterceptorContributions[r];if(n.beforeDrawItem&&n.beforeDrawItem(t,this.currentRenderService,e,this,i))return}let r=this.getRenderContribution(t);if(!r)return;let n,s=!1;if(e.isGroupScroll){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;s=!0,this.scrollMatrix||(this.scrollMatrix=U.QE.allocate(1,0,0,1,0,0)),this.scrollMatrix.translate(-e,-i)}if(s&&(n=this.dirtyBounds.clone().transformWithMatrix(this.scrollMatrix)),this.useDirtyBounds&&!t.isContainer&&"empty"!==t.attribute.boundsMode&&!(0,tf.SX)(t.AABBBounds,null!=n?n:this.dirtyBounds,!1)){if(s&&t.parent){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(e,i)}return}let a=null!=e.startAtId&&t._uid!==e.startAtId;if(t._uid===e.startAtId&&(e.startAtId=null),i&&(i.skipDraw=a),a?t.isContainer&&r.draw(t,this.currentRenderService,e,i):r.draw(t,this.currentRenderService,e,i),s&&t.parent){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(e,i)}if(this.InterceptorContributions.length)for(let i=0;i<this.InterceptorContributions.length;i++){let r=this.InterceptorContributions[i];if(r.afterDrawItem&&r.afterDrawItem(t,this.currentRenderService,e,this))return}}selectRenderByType(t){return tg.Y.getInstance().warn("未知错误，不应该走到这里"),null}selectRenderByNumberType(t,e){let i;if(e.attribute.renderStyle){let r=this.styleRenderMap.get(e.attribute.renderStyle);i=r&&r.get(t)}return i||this.currentRenderMap.get(t)||this.defaultRenderMap.get(t)}clearScreen(t,e,i){var r,n,s;let{clear:a,viewBox:o}=i,l=o.width(),h=o.height();if(a){e.clearRect(0,0,l,h),(null==(r=t.drawParams)?void 0:r.stage)&&t.drawParams.stage.hooks.afterClearRect.call(t.drawParams);let i=null==(n=t.drawParams)?void 0:n.stage;if(i&&(e.globalAlpha=null!=(s=i.attribute.opacity)?s:1),i&&i.backgroundImg&&i.resources){let t=i.resources.get(a);t&&"success"===t.state&&t.data&&e.drawImage(t.data,0,0,l,h)}else e.fillStyle=(0,ty.L)(e,a,{AABBBounds:{x1:0,y1:0,x2:0+l,y2:0+h}},0,0),e.fillRect(0,0,l,h)}}afterDraw(t,e){}};tx=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),tb(0,tu(L.uz)),tb(1,(0,a.f)(l.Qc)),tb(1,(0,o.t)(tm.xL)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Array,Object])],tx);var t_=i(90383),tw=i(4928),tS=i(13922),tA=i(97708),tC=i(89677);class tD extends tC.M2{constructor(){super(...arguments),this.time=tA.Oh.beforeFillStroke}drawShape(t,e,i,r,n,s,a,o,l,h,u,c){let{background:d,backgroundMode:p=l.backgroundMode,backgroundFit:f=l.backgroundFit,backgroundKeepAspectRatio:g=l.backgroundKeepAspectRatio,backgroundScale:m=l.backgroundScale,backgroundOffsetX:y=l.backgroundOffsetX,backgroundOffsetY:v=l.backgroundOffsetY}=t.attribute;if(d)if(t.backgroundImg&&t.resources){let i=t.resources.get(d);if("success"!==i.state||!i.data)return;e.highPerformanceSave(),e.setTransformFromMatrix(t.parent.globalTransMatrix,!0);let r=t.AABBBounds;this.doDrawImage(e,i.data,r,{backgroundMode:p,backgroundFit:f,backgroundKeepAspectRatio:g,backgroundScale:m,backgroundOffsetX:y,backgroundOffsetY:v}),e.highPerformanceRestore(),e.setTransformForCurrent()}else e.highPerformanceSave(),e.fillStyle=d,e.fill(),e.highPerformanceRestore()}}let tT=new tD;var tB=i(41712),tM=function(t,e){return function(i,r){e(i,r,t)}};let tE=class{constructor(t){this.groupRenderContribitions=t,this.numberType=K.I_}reInit(){this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(tT)}drawShape(t,e,i,r,n,s,a,o,l){let{clip:h,fill:u,stroke:c,background:d}=t.attribute;if(!(h||u||c||d))return;l=null!=l?l:(0,E.gh)(t,null==s?void 0:s.theme).group;let{opacity:p=l.opacity,width:f=l.width,height:g=l.height,fillOpacity:m=l.fillOpacity,strokeOpacity:y=l.strokeOpacity,cornerRadius:v=l.cornerRadius,path:b=l.path,lineWidth:x=l.lineWidth,visible:_=l.visible,fillStrokeOrder:w=l.fillStrokeOrder,cornerType:S=l.cornerType,x:A=l.x,y:C=l.y}=t.attribute,D=(0,tw.GT)(p,m,f,g,u),T=(0,tw.Ze)(p,y,f,g),B=(0,tw.dz)(u,d),M=(0,tw.ak)(c,x);if(!t.valid||!_||!h&&(!B&&!M||!(D||T||a||o||d)))return;if(b&&b.length&&n.drawContribution){let t=e.disableFill,i=e.disableStroke,r=e.disableBeginPath;e.disableFill=!0,e.disableStroke=!0,e.disableBeginPath=!0,b.forEach(t=>{n.drawContribution.getRenderContribution(t).draw(t,n.renderService,n,s)}),e.disableFill=t,e.disableStroke=i,e.disableBeginPath=r}else 0===v||(0,tp.Z)(v)&&v.every(t=>0===t)?(e.beginPath(),e.rect(i,r,f,g)):(e.beginPath(),(0,t_.U)(e,i,r,f,g,v,"bevel"!==S));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(tT));let k={doFill:B,doStroke:M};e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this._groupRenderContribitions.forEach(s=>{s.time===tA.Oh.beforeFillStroke&&s.drawShape(t,e,i,r,B,M,D,T,l,n,a,o,k)}),h&&e.clip();let F=()=>{k.doFill&&(a?a(e,t.attribute,l):D&&(e.setCommonStyle(t,t.attribute,A-i,C-r,l),e.fill()))},R=()=>{k.doStroke&&(o?o(e,t.attribute,l):T&&(e.setStrokeStyle(t,t.attribute,A-i,C-r,l),e.stroke()))};w?(R(),F()):(F(),R()),this._groupRenderContribitions.forEach(s=>{s.time===tA.Oh.afterFillStroke&&s.drawShape(t,e,i,r,B,M,D,T,l,n,a,o)})}draw(t,e,i,r){var n,s;let a,{context:o}=i;if(!o)return;let{clip:l,baseOpacity:h=1,drawMode:u}=t.attribute,c=o.nativeContext,d=o.canvas.nativeCanvas;if(u>0){let{x:e,y:i,width:r,height:n}=t.attribute,s=o.canvas,a=_.w.global.createCanvas({width:s.width,height:s.height,dpr:1}),l=a.getContext("2d"),h=o.nativeContext.getTransform();l.setTransform(h.a,h.b,h.c,h.d,h.e,h.f),1===u&&(l.save(),l.clearRect(0,0,s.width,s.height),l.beginPath(),l.rect(e,i,r,n),l.clip(),l.drawImage(s.nativeCanvas,0,0,s.width,s.height,0,0,s.displayWidth,s.displayHeight),l.restore()),o.nativeContext=l,s.nativeCanvas=a}l?o.save():o.highPerformanceSave();let p=o.baseGlobalAlpha;o.baseGlobalAlpha*=h;let f=o.modelMatrix;if(o.camera){let e=(0,E.gh)(t,null==r?void 0:r.theme).group,i=U.yp.allocate(),n=U.yp.allocate();(0,q.RT)(n,t,e),(0,tB.G9)(i,f||i,n),o.modelMatrix=i,U.yp.free(n),o.setTransform(1,0,0,1,0,0,!0)}else o.transformFromMatrix(t.transMatrix,!0);o.beginPath(),r.skipDraw?this.drawShape(t,o,0,0,i,r,()=>!1,()=>!1):this.drawShape(t,o,0,0,i,null,null,null);let{scrollX:g,scrollY:m}=t.attribute;if((g||m)&&o.translate(g,m),r&&r.renderInGroup&&(a=r.renderInGroup(null==(n=r.renderInGroupParams)?void 0:n.skipSort,t,i,null==(s=r.renderInGroupParams)?void 0:s.nextM)),o.modelMatrix!==f&&U.yp.free(o.modelMatrix),o.modelMatrix=f,o.baseGlobalAlpha=p,u>0){let{x:e,y:i,width:r,height:n}=t.attribute,s=o.nativeContext,a=o.canvas.nativeCanvas;c.save(),c.setTransform(o.dpr,0,0,o.dpr,0,0,!0),1===u&&s.rect(e,i,r,n),c.drawImage(a,0,0,a.width,a.height,0,0,o.canvas.displayWidth,o.canvas.displayHeight);let l=s.getTransform();c.setTransform(l.a,l.b,l.c,l.d,l.e,l.f),o.nativeContext=c,o.canvas.nativeCanvas=d,c.restore()}a&&a.then?a.then(()=>{l?o.restore():o.highPerformanceRestore()}):l?o.restore():o.highPerformanceRestore()}};tE=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),tM(0,(0,a.f)(l.Qc)),tM(0,(0,o.t)(tS.jd)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tE);var tk=i(48206),tF=i(8830),tR=i(23436),tP=i(25033),tO=i(63915),tL=i(66187);function tI(t,e,i,r){let{offsetX:n=0,offsetY:s=0,offsetZ:a=0}=r||{},o=!0;e.forEach(e=>{e.defined?(o&&t.moveTo(e.p0.x+n,e.p0.y+s,a),(0,tL.w)(t,e,1,r),o=!1):o=!0}),o=!0;for(let e=i.length-1;e>=0;e--){let l=i[e];l.defined?(o&&t.lineTo(l.p0.x+n,l.p0.y+s,a),(0,tL.w)(t,l,1,r),o=!1):o=!0}t.closePath()}var tz=i(86083),tZ=i(75946),tj=i(60865),tW=i(19626);class tU extends tj.${constructor(){super(...arguments),this.time=tA.Oh.afterFillStroke}drawShape(t,e,i,r,n,s,a,o,l,h,u,c,d){var p,f,g,m;this.textureMap||this.initTextureMap(e,t.stage);let{attribute:y=t.attribute}=d||{},{texture:v=null!=(p=t.attribute.texture)?p:(0,tW.hT)(l,"texture"),textureColor:b=null!=(f=t.attribute.textureColor)?f:(0,tW.hT)(l,"textureColor"),textureSize:x=null!=(g=t.attribute.textureSize)?g:(0,tW.hT)(l,"textureSize"),texturePadding:_=null!=(m=t.attribute.texturePadding)?m:(0,tW.hT)(l,"texturePadding")}=y;v&&this.drawTexture(v,t,e,i,r,l,b,x,_)}}let tN=new tU,tH=tC.R6;var tG=function(t,e){return function(i,r){e(i,r,t)}};let tV=class extends tZ.Y{constructor(t){super(),this.graphicRenderContributions=t,this.numberType=K.Ri,this.builtinContributions=[tN,tH],this.init(t)}drawLinearAreaHighPerformance(t,e,i,r,n,s,a,o,l,h,u,c,d){var p,f,g;let{points:m}=t.attribute;if(m.length<2)return;e.beginPath();let y=null!=(p=this.z)?p:0,v=m[0];e.moveTo(v.x+a,v.y+o,y);for(let t=1;t<m.length;t++){let i=m[t];e.lineTo(i.x+a,i.y+o,y)}for(let t=m.length-1;t>=0;t--){let i=m[t];e.lineTo((null!=(f=i.x1)?f:i.x)+a,(null!=(g=i.y1)?g:i.y)+o,y)}e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,a,o,!!n,!1,i,!1,l,h,c,null,{attribute:t.attribute});let{x:b=0,x:x=0}=t.attribute;!1!==i&&(c?c(e,t.attribute,l):n&&(e.setCommonStyle(t,t.attribute,b-a,x-o,l),e.fill())),this.afterRenderStep(t,e,a,o,!!n,!1,i,!1,l,h,c,null,{attribute:t.attribute}),(()=>{var i,n;if(r){let{stroke:r=l&&l.stroke}=t.attribute;if((0,tp.Z)(r)&&(r[0]||r[2])&&!1===r[1]){if(e.beginPath(),r[0]){e.moveTo(v.x+a,v.y+o,y);for(let t=1;t<m.length;t++){let i=m[t];e.lineTo(i.x+a,i.y+o,y)}}else if(r[2]){let t=m[m.length-1];e.moveTo(t.x+a,t.y+o,y);for(let t=m.length-2;t>=0;t--){let r=m[t];e.lineTo((null!=(i=r.x1)?i:r.x)+a,(null!=(n=r.y1)?n:r.y)+o,y)}}}d?d(e,t.attribute,l):(e.setStrokeStyle(t,t.attribute,b-a,x-o,l),e.stroke())}})()}drawShape(t,e,i,r,n,s,a,o){var l,h,u,c,d,p;let f=(0,E.gh)(t,null==s?void 0:s.theme).area,{fill:g=f.fill,stroke:m=f.stroke,fillOpacity:y=f.fillOpacity,z:v=f.z,strokeOpacity:b=f.strokeOpacity,curveTension:x=f.curveTension,connectedType:_=f.connectedType}=t.attribute,w=this.valid(t,f,a,o);if(!w)return;let{doFill:S}=w,A=w.doStroke&&w.sVisible,{clipRange:C=f.clipRange,closePath:D,points:T,segments:B}=t.attribute,{curveType:M=f.curveType}=t.attribute;function k(t,e){return"connect"!==e?t:t.filter(t=>!1!==t.defined)}if(D&&"linear"===M&&(M="linearClosed"),1===C&&!B&&!T.some(t=>!1===t.defined)&&"linear"===M)return this.drawLinearAreaHighPerformance(t,e,!!g,A,y,b,i,r,f,n,s,a,o);if(t.shouldUpdateShape()){if(B&&B.length){let e,i,r,n=B.map((t,r)=>{if(t.points.length<=1&&0===r)return t.points[0]&&(i={endX:t.points[0].x,endY:t.points[0].y}),null;1===r?e={x:i.endX,y:i.endY}:r>1&&(e.x=i.endX,e.y=i.endY);let n=(0,tR.X0)(k(t.points,_),M,{startPoint:e,curveTension:x});return i=n,n}).filter(t=>!!t),s=[];for(let t=B.length-1;t>=0;t--){let e=B[t].points,i=[];for(let t=e.length-1;t>=0;t--)i.push({x:null!=(l=e[t].x1)?l:e[t].x,y:null!=(h=e[t].y1)?h:e[t].y});if(0!==t){let e=B[t-1].points,r=e[e.length-1];r&&i.push({x:null!=(u=r.x1)?u:r.x,y:null!=(c=r.y1)?c:r.y})}i.length>1&&(r=(0,tR.X0)(k(i,_),"stepBefore"===M?"stepAfter":"stepAfter"===M?"stepBefore":M,{curveTension:x}),s.unshift(r))}t.cacheArea=s.map((t,e)=>({top:n[e],bottom:t}))}else{if(!T||!T.length)return t.cacheArea=null,void t.clearUpdateShapeTag();{let e=k(T,_),i=[];for(let t=e.length-1;t>=0;t--)i.push({x:null!=(d=e[t].x1)?d:e[t].x,y:null!=(p=e[t].y1)?p:e[t].y});t.cacheArea={top:(0,tR.X0)(e,M,{curveTension:x}),bottom:(0,tR.X0)(i,"stepBefore"===M?"stepAfter":"stepAfter"===M?"stepBefore":M,{curveTension:x})}}}t.clearUpdateShapeTag()}if(Array.isArray(t.cacheArea)){let s=t.attribute.segments.filter(t=>t.points.length);if(1===s[0].points.length&&s.shift(),1===C){let l=!1;t.cacheArea.forEach((h,u)=>{l||(l=this.drawSegmentItem(e,h,S,y,A,b,s[u],[f,t.attribute],C,i,r,v,t,n,a,o))})}else{let l=C*t.cacheArea.reduce((t,e)=>t+e.top.getLength(),0),h=0,u=!1;t.cacheArea.forEach((c,d)=>{if(u)return;let p=c.top.getLength(),g=(l-h)/p;h+=p,g>0&&(u=this.drawSegmentItem(e,c,S,y,A,b,s[d],[f,t.attribute],(0,tF.VV)(g,1),i,r,v,t,n,a,o))})}}else this.drawSegmentItem(e,t.cacheArea,S,y,A,b,t.attribute,f,C,i,r,v,t,n,a,o)}draw(t,e,i,r){let n=(0,E.gh)(t,null==r?void 0:r.theme).area;this._draw(t,n,!1,i,r)}drawSegmentItem(t,e,i,r,n,s,a,o,l,h,u,c,d,p,f,g){return this._drawSegmentItem(t,e,i,r,n,s,a,o,l,h,u,c,d,p,f,g)}_drawSegmentItem(t,e,i,r,n,s,a,o,l,h,u,c,d,p,f,g){if(!(e&&e.top&&e.bottom&&e.top.curves&&e.top.curves.length&&e.bottom.curves&&e.bottom.curves.length))return;t.beginPath();let{points:m,segments:y}=d.attribute,v,b,x=tA.Nm.ROW;if(y){let t=y[y.length-1];b=y[0].points[0],v=t.points[t.points.length-1]}else b=m[0],v=m[m.length-1];let _=(0,tF.Wn)(v.x-b.x),w=(0,tF.Wn)(v.y-b.y);(function(t,e,i,r){var n;let{top:s,bottom:a}=e;if(s.curves.length!==a.curves.length)return;if(i>=1){let e=[],i=[],n=!0;for(let o=0,l=s.curves.length;o<l;o++){let h=s.curves[o];n!==h.defined?(n?(tI(t,e,i,r),e.length=0,i.length=0):(e.push(h),i.push(a.curves[l-o-1])),n=!n):n&&(e.push(h),i.push(a.curves[l-o-1]))}return tI(t,e,i,r)}if(i<=0)return;let{direction:o}=r||{},{curves:l}=s,h=null!=(n=l[l.length-1].p3)?n:l[l.length-1].p1,u=(0,tF.Wn)(h.x-l[0].p0.x),c=(0,tF.Wn)(h.y-l[0].p0.y);o=null!=o?o:u>c?tA.Nm.ROW:tA.Nm.COLUMN,Number.isFinite(u)||(o=tA.Nm.COLUMN),Number.isFinite(c)||(o=tA.Nm.ROW);let d=i*(o===tA.Nm.ROW?u:c),p=0,f=!0,g=[],m=[];for(let e=0,i=s.curves.length;e<i;e++){let n=s.curves[e],l=n.getLength(o),h=(d-p)/l;if(h<0)break;p+=l;let u=null,c=null;f!==n.defined?(f?(tI(t,g,m,r),g.length=0,m.length=0):(u=n,c=a.curves[i-e-1]),f=!f):f&&(u=n,c=a.curves[i-e-1]),u&&c&&(h<1&&(u=u.p2&&u.p3?(0,tP.m)(u,h)[0]:(0,tO.d)(u,h)[0],c=c.p2&&c.p3?(0,tP.m)(c,1-h)[1]:(0,tO.d)(c,1-h)[1]),u.defined=f,c.defined=f,g.push(u),m.push(c)),u=null,c=null}tI(t,g,m,r)})(t,e,l,{offsetX:h,offsetY:u,offsetZ:c,direction:x=null==v.x1?tA.Nm.ROW:null==v.y1?tA.Nm.COLUMN:Number.isFinite(_+w)?_>w?tA.Nm.ROW:tA.Nm.COLUMN:tA.Nm.ROW}),this.beforeRenderStep(d,t,h,u,!!r,!1,i,!1,o,p,f,null,{attribute:a}),t.setShadowBlendStyle&&t.setShadowBlendStyle(d,a,o);let{x:S=0,x:A=0}=a;return!1!==i&&(f?f(t,a,o):r&&(t.setCommonStyle(d,a,S-h,A-u,o),t.fill())),this.afterRenderStep(d,t,h,u,!!r,!1,i,!1,o,p,f,null,{attribute:a}),(()=>{if(!1!==n)if(g)g(t,a,o);else{let{stroke:i=o&&o[1]&&o[1].stroke}=a;(0,tp.Z)(i)&&(i[0]||i[2])&&!1===i[1]&&(t.beginPath(),(0,tz.fW)(t,i[0]?e.top:e.bottom,l,x===tA.Nm.ROW?"x":"y",{offsetX:h,offsetY:u,offsetZ:c})),t.setStrokeStyle(d,a,S-h,A-u,o),t.stroke()}})(),!1}};tV=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),tG(0,(0,a.f)(l.Qc)),tG(0,(0,o.t)(tS.Gq)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],tV);let tX=class extends tV{constructor(){super(...arguments),this.numberType=K.Ri}drawShape(t,e,i,r,n,s,a){if(t.incremental&&n.multiGraphicOptions){let{startAtIdx:s,length:o}=n.multiGraphicOptions,{segments:l=[]}=t.attribute;if(s>l.length)return;let h=(0,E.gh)(t).area,{fill:u=h.fill,fillOpacity:c=h.fillOpacity,opacity:d=h.opacity,visible:p=h.visible}=t.attribute,f=(0,tw.Bv)(d,c,u),g=(0,tw.dz)(u);if(t.valid&&p&&g&&(f||a))for(let n=s;n<s+o;n++)this.drawIncreaseSegment(t,e,l[n-1],l[n],t.attribute.segments[n],[h,t.attribute],i,r)}else super.drawShape(t,e,i,r,n,s,a)}drawIncreaseSegment(t,e,i,r,n,s,a,o){r&&(e.beginPath(),(0,tz.hJ)(e.camera?e:e.nativeContext,i,r,{offsetX:a,offsetY:o}),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,n,s),e.setCommonStyle(t,n,a,o,s),e.fill())}};tX=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)()],tX);var tY,t$,tq,tK,tQ,tJ=function(t,e){return function(i,r){e(i,r,t)}},t0=function(t,e,i,r){return new(i||(i=Promise))(function(n,s){function a(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(a,o)}l((r=r.apply(t,e||[])).next())})};(r=tQ||(tQ={}))[r.NORMAL=0]="NORMAL",r[r.STOP=1]="STOP";let t1=class extends tx{constructor(t,e,i,r){super(t,r),this.contributions=t,this.lineRender=e,this.areaRender=i,this.drawItemInterceptorContributions=r,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=tQ.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new h.n([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(t,e){return t0(this,void 0,void 0,function*(){if(this.checkingForDrawPromise)return;this.lastRenderService=t,this.lastDrawContext=e,this.checkingForDrawPromise=this.checkForDraw(e);let i=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,i)return;this.currentRenderService=t;let{context:r,viewBox:n}=e;r&&(r.inuse=!0,r.clearMatrix(),r.setTransformForCurrent(!0),r.save(),e.restartIncremental&&this.clearScreen(this.currentRenderService,r,e),r.translate(n.x1,n.y1,!0),r.save(),t.renderTreeRoots.sort((t,e)=>{var i,r;return(null!=(i=t.attribute.zIndex)?i:y.xF.zIndex)-(null!=(r=e.attribute.zIndex)?r:y.xF.zIndex)}).forEach(t=>{this.renderGroup(t,e)}),this.hooks.completeDraw.tap("top-draw",()=>{r.restore(),r.restore(),r.draw(),r.inuse=!1,this.rendering=!1}))})}_increaseRender(t,e){return t0(this,void 0,void 0,function*(){this.rendering=!0,yield this._renderIncrementalGroup(t,e)})}_renderIncrementalGroup(t,e){return t0(this,void 0,void 0,function*(){this.count=t.count,yield new Promise(i=>{this.renderItem(t,e,{drawingCb:()=>t0(this,void 0,void 0,function*(){if(2!==t.count)yield(0,tc.Ud)(t,y.xF.zIndex,(i,r)=>{if(this.status===tQ.STOP)return!0;if(i.isContainer||r<this.currentIdx)return!1;let n=this.currFrameStartAt+t.incremental;return r<n&&(this.currentIdx=r+1,this.renderItem(i,e)),r===n-1&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())}),i(!1);else{let r=t.getChildAt(0);if(r.incremental&&r.attribute.segments)for(r.incrementalAt||(r.incrementalAt=0);r.incrementalAt<r.attribute.segments.length;)e.multiGraphicOptions={startAtIdx:r.incrementalAt,length:r.incremental},this.renderItem(r,e),r.incrementalAt+=r.incremental,yield this.waitToNextFrame();else this.renderItem(r,e);i(!1)}})})}),this.hooks.completeDraw.call()})}waitToNextFrame(){return t0(this,void 0,void 0,function*(){return new Promise(t=>{this.global.getRequestAnimationFrame()(()=>{t(!1)})})})}checkForDraw(t){return t0(this,void 0,void 0,function*(){let e=this.rendering;return t.restartIncremental&&(e=!1,yield this.forceStop(),this.resetToInit()),e})}forceStop(){return t0(this,void 0,void 0,function*(){this.rendering&&(this.status=tQ.STOP,yield new Promise(t=>{this.hooks.completeDraw.tap("stopCb",()=>{this.status=tQ.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter(t=>"stopCb"!==t.name),t(!1)})}))})}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(t,e){return t0(this,void 0,void 0,function*(){if(!e.break&&!1!==t.attribute.visibleAll)return t.incremental&&e.startAtId===t._uid?(yield this._increaseRender(t,e),void(e.break=!0)):void(yield new Promise(i=>{this.renderItem(t,e,{drawingCb:()=>t0(this,void 0,void 0,function*(){yield(0,tc.Ud)(t,y.xF.zIndex,t=>t0(this,void 0,void 0,function*(){e.break||t.isContainer&&(yield this.renderGroup(t,e))})),i(!1)})})}))})}};t1=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)(),tJ(0,tu(L.uz)),tJ(1,(0,a.f)(tk.U)),tJ(2,(0,a.f)(tX)),tJ(3,(0,a.f)(l.Qc)),tJ(3,(0,o.t)(tm.xL)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Array,Object,Object,Object])],t1);let t2=new n.n(t=>{t(tC.M2).toSelf().inSingletonScope(),t(tj.$).toSelf().inSingletonScope(),t(L.Iv).to(tx),t(L.Pf).to(t1),t(L.Cb).to(tE).inSingletonScope(),t(L.uz).toService(L.Cb),(0,l.yb)(t,tS.jd),t(tC.Sg).toSelf().inSingletonScope(),(0,l.yb)(t,tS.tg),(0,l.yb)(t,L.uz),t(tm.pN).toSelf().inSingletonScope(),t(tm.xL).toService(tm.pN),(0,l.yb)(t,tm.xL)});function t3(){var t;t3.__loaded||(t3.__loaded=!0,w.n.load(O),w.n.load(J),w.n.load(Z),w.n.load($),w.n.load(tr),(t=w.n).load(tn),t.load(ts),t.load(tl),w.n.load(t2))}t3.__loaded=!1,t3();let t5=w.n.get(u.y2);_.w.global=t5;let t8=w.n.get(R.no);_.w.graphicUtil=t8;let t4=w.n.get(R.Gp);_.w.transformUtil=t4;let t6=w.n.get(K.fB);_.w.graphicService=t6;let t7=w.n.get(R.IT);_.w.layerService=t7},54045:function(t,e,i){"use strict";i.d(e,{BR:()=>n,hH:()=>r,tn:()=>a,uH:()=>s}),Symbol.for("GraphicPicker");let r=Symbol.for("PickerService");Symbol.for("BoundsPicker");let n=Symbol.for("GlobalPickerService"),s=Symbol.for("PickItemInterceptor"),a=Symbol.for("PickServiceInterceptor")},41857:function(t,e,i){"use strict";i.d(e,{E:()=>h});var r=i(17852),n=i(27753),s=i(63401),a=i(60651);let o=new s.FB;class l{constructor(){this.name="FlexLayoutPlugin",this.activeEvent="onRegister",this.id=n.R.GenAutoIncrementId(),this.key=this.name+this.id,this.tempBounds=new s.FB}pauseLayout(t){this.pause=t}tryLayoutChildren(t){t.firstChild&&this.tryLayout(t.firstChild)}tryLayout(t,e=!0){if(this.pause)return;let i=t.parent;if(!(e||i&&t.needUpdateLayout()))return;let n=(0,r.gh)(i).group,{display:s=n.display}=i.attribute;if("flex"!==s)return;let{flexDirection:a=n.flexDirection,flexWrap:o=n.flexWrap,alignItems:l=n.alignItems,clip:h=n.clip}=i.attribute,{alignContent:u=null!=l?l:n.alignContent}=i.attribute,{width:c,height:d,justifyContent:p=n.justifyContent}=i.attribute,f=i.getChildren();if(null==c||null==d){let t=0,e=0,i=0;if(f.forEach(r=>{let n=this.getAABBBounds(r);n.empty()||("column"===a||"column-reverse"===a?(e+=n.height(),t=Math.max(t,n.width())):(t+=n.width(),e=Math.max(e,n.height())),i+=n.x1,i+=n.y1,i+=n.x2,i+=n.y2)}),!isFinite(i))return;c=t,d=e}null==i.attribute.width?i.attribute.width=c:c=i.attribute.width,null==i.attribute.height?i.attribute.height=d:d=i.attribute.height,this.tempBounds.copy(i._AABBBounds);let g={main:{len:c,field:"x"},cross:{len:d,field:"y"}},m=g.main,y=g.cross;"column"!==a&&"column-reverse"!==a||(m.len=d,y.len=c,m.field="y",y.field="x"),"row-reverse"!==a&&"column-reverse"!==a||("flex-start"===p?p="flex-end":"flex-end"===p?p="flex-start":f.reverse());let v=0,b=0,x=[];f.forEach(t=>{let e=this.getAABBBounds(t);if(e.empty())return;let i="x"===m.field?e.width():e.height(),r="x"===y.field?e.width():e.height();x.push({mainLen:i,crossLen:r}),v+=i,b=Math.max(b,r)});let _=[];if(v>m.len&&"wrap"===o){let t=0,e=0;x.forEach(({mainLen:i,crossLen:r},n)=>{t+i>m.len?0===t?(_.push({idx:n,mainLen:t+i,crossLen:r}),t=0,e=0):(_.push({idx:n-1,mainLen:t,crossLen:e}),t=i,e=r):(t+=i,e=Math.max(e,r))}),_.push({idx:x.length-1,mainLen:t,crossLen:e})}else _.push({idx:x.length-1,mainLen:v,crossLen:b});let w=0;if(_.forEach(t=>{this.layoutMain(i,f,p,m,x,w,t),w=t.idx+1}),b=_.reduce((t,e)=>t+e.crossLen,0),1===_.length){let t={"flex-start":0,"flex-end":y.len,center:y.len/2};this.layoutCross(f,l,y,t,x,_[0],0)}else if("flex-start"===u){w=0;let t=0;_.forEach((e,i)=>{let r={"flex-start":t,"flex-end":t+e.crossLen,center:t+e.crossLen/2};this.layoutCross(f,"flex-start",y,r,x,_[i],w),w=e.idx+1,t+=e.crossLen})}else if("center"===u){w=0;let t=Math.max(0,(y.len-b)/2);_.forEach((e,i)=>{let r={"flex-start":t,"flex-end":t+e.crossLen,center:t+e.crossLen/2};this.layoutCross(f,"center",y,r,x,_[i],w),w=e.idx+1,t+=e.crossLen})}else if("space-around"===u){w=0;let t=Math.max(0,(y.len-b)/_.length/2),e=t;_.forEach((i,r)=>{let n={"flex-start":e,"flex-end":e+i.crossLen,center:e+i.crossLen/2};this.layoutCross(f,"flex-start",y,n,x,_[r],w),w=i.idx+1,e+=i.crossLen+2*t})}else if("space-between"===u){w=0;let t=Math.max(0,(y.len-b)/(2*_.length-2)),e=0;_.forEach((i,r)=>{let n={"flex-start":e,"flex-end":e+i.crossLen,center:e+i.crossLen/2};this.layoutCross(f,"flex-start",y,n,x,_[r],w),w=i.idx+1,e+=i.crossLen+2*t})}f.forEach((t,e)=>{t.addUpdateBoundTag(),t.addUpdatePositionTag(),t.clearUpdateLayoutTag()}),i.addUpdateLayoutTag();let S=this.getAABBBounds(i);h||this.tempBounds.equals(S)||this.tryLayout(i,!1)}getAABBBounds(t){this.skipBoundsTrigger=!0;let e=t.AABBBounds;return this.skipBoundsTrigger=!1,e}updateChildPos(t,e,i){return t+(null!=e?e:0)-i}layoutMain(t,e,i,r,n,s,a){var o,l,h,u,c,d,p,f,g,m,y,v,b,x;if("flex-start"===i){let t=0;for(let i=s;i<=a.idx;i++){let s=t+(o=e[i],l=r.field,0),a=this.getAABBBounds(e[i]);a.empty()||(e[i].attribute[r.field]=this.updateChildPos(s,e[i].attribute[r.field],a[`${r.field}1`])),t+=n[i].mainLen}}else if("flex-end"===i){let t=r.len;for(let i=a.idx;i>=s;i--){let s=(t-=n[i].mainLen)+(h=e[i],u=r.field,0),a=this.getAABBBounds(e[i]);a.empty()||(e[i].attribute[r.field]=this.updateChildPos(s,e[i].attribute[r.field],a[`${r.field}1`]))}}else if("space-around"===i)if(a.mainLen>=r.len){let t=0;for(let i=s;i<=a.idx;i++){let s=t+(c=e[i],d=r.field,0),a=this.getAABBBounds(e[i]);a.empty()||(e[i].attribute[r.field]=this.updateChildPos(s,e[i].attribute[r.field],a[`${r.field}1`])),t+=n[i].mainLen}}else{let t=a.idx-s+1,i=(r.len-a.mainLen)/t/2,o=i;for(let t=s;t<=a.idx;t++){let s=o+(p=e[t],f=r.field,0),a=this.getAABBBounds(e[t]);a.empty()||(e[t].attribute[r.field]=this.updateChildPos(s,e[t].attribute[r.field],a[`${r.field}1`])),o+=n[t].mainLen+2*i}}else if("space-between"===i)if(a.mainLen>=r.len){let t=0;for(let i=s;i<=a.idx;i++){let s=t+(g=e[i],m=r.field,0),a=this.getAABBBounds(e[i]);a.empty()||(e[i].attribute[r.field]=this.updateChildPos(s,e[i].attribute[r.field],a[`${r.field}1`])),t+=n[i].mainLen}}else{let t=a.idx-s+1,i=(r.len-a.mainLen)/(2*t-2),o=0;for(let t=s;t<=a.idx;t++){let s=o+(y=e[t],v=r.field,0),a=this.getAABBBounds(e[t]);a.empty()||(e[t].attribute[r.field]=this.updateChildPos(s,e[t].attribute[r.field],a[`${r.field}1`])),o+=n[t].mainLen+2*i}}else if("center"===i){let t=(r.len-a.mainLen)/2;for(let i=s;i<=a.idx;i++){let s=t+(b=e[i],x=r.field,0),a=this.getAABBBounds(e[i]);a.empty()||(e[i].attribute[r.field]=this.updateChildPos(s,e[i].attribute[r.field],a[`${r.field}1`])),t+=n[i].mainLen}}}layoutCross(t,e,i,r,n,s,a){var o,l,h,u,c,d,p;for(let f=a;f<=s.idx;f++){let s=t[f],{alignSelf:a}=s.attribute;a&&"auto"!==a||(a=e);let g=this.getAABBBounds(s),m=null!=(o=r[a])?o:r["flex-start"];"flex-end"===a?g.empty()||(s.attribute[i.field]=this.updateChildPos(m-n[f].crossLen+(l=0,h=i.field,0),s.attribute[i.field],g[`${i.field}1`])):"center"===a?g.empty()||(s.attribute[i.field]=this.updateChildPos(m-n[f].crossLen/2+(u=0,c=i.field,0),s.attribute[i.field],g[`${i.field}1`])):g.empty()||(s.attribute[i.field]=this.updateChildPos(m+(d=0,p=i.field,0),s.attribute[i.field],g[`${i.field}1`]))}}activate(t){this.pluginService=t;let e=this.pluginService.stage;e&&(e.graphicService.hooks.onAttributeUpdate.tap(this.key,t=>{t.glyphHost&&(t=t.glyphHost),t.stage&&t.stage===this.pluginService.stage&&this.tryLayout(t,!1)}),e.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(t,e,i,r)=>{t.glyphHost&&(t=t.glyphHost),e&&e===this.pluginService.stage&&t.isContainer&&!this.skipBoundsTrigger&&o.copy(r)}),e.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(t,e,i,r,n)=>{e&&e===this.pluginService.stage&&t.isContainer&&!this.skipBoundsTrigger&&(o.equals(i)||this.tryLayout(t,!1))}),e.graphicService.hooks.onSetStage.tap(this.key,t=>{t.glyphHost&&(t=t.glyphHost),this.tryLayout(t,!1)}))}deactivate(t){let e=this.pluginService.stage;e&&(e.graphicService.hooks.onAttributeUpdate.taps=e.graphicService.hooks.onAttributeUpdate.taps.filter(t=>t.name!==this.key),e.graphicService.hooks.beforeUpdateAABBBounds.taps=e.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(t=>t.name!==this.key),e.graphicService.hooks.afterUpdateAABBBounds.taps=e.graphicService.hooks.afterUpdateAABBBounds.taps.filter(t=>t.name!==this.key),e.graphicService.hooks.onSetStage.taps=e.graphicService.hooks.onSetStage.taps.filter(t=>t.name!==this.key))}}let h=()=>{a.F.registerPlugin("FlexLayoutPlugin",l)}},89340:function(t,e,i){"use strict";i.d(e,{H:()=>n,X:()=>r});let r=Symbol.for("AutoEnablePlugins"),n=Symbol.for("PluginService")},22649:function(t,e,i){"use strict";i.d(e,{p:()=>r});let r=Symbol.for("RenderService");Symbol.for("BeforeRenderConstribution")},75946:function(t,e,i){"use strict";i.d(e,{Y:()=>d});var r=i(44176),n=i(80358),s=i(4928),a=i(97708),o=i(41712),l=i(17852),h=i(72618),u=i(89677);let c={x:0,y:0,z:0,lastModelMatrix:null};class d{init(t){t&&(this._renderContribitions=t.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions||(this.builtinContributions=[]),this.builtinContributions.push(u.rJ),this.builtinContributions.push(u.Eo),this.builtinContributions.forEach(t=>this._renderContribitions.push(t)),this._renderContribitions.length&&(this._renderContribitions.sort((t,e)=>e.order-t.order),this._beforeRenderContribitions=this._renderContribitions.filter(t=>t.time===a.Oh.beforeFillStroke),this._afterRenderContribitions=this._renderContribitions.filter(t=>t.time===a.Oh.afterFillStroke))}reInit(){this.init(this.graphicRenderContributions)}beforeRenderStep(t,e,i,r,n,s,a,o,l,h,u,c,d){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach(p=>{(!p.supportedAppName||!t.stage||!t.stage.params||!t.stage.params.context||!t.stage.params.context.appName||(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(t.stage.params.context.appName))&&p.drawShape(t,e,i,r,n,s,a,o,l,h,u,c,d)})}afterRenderStep(t,e,i,r,n,s,a,o,l,h,u,c,d){this._afterRenderContribitions&&this._afterRenderContribitions.forEach(p=>{(!p.supportedAppName||!t.stage||!t.stage.params||!t.stage.params.context||!t.stage.params.context.appName||(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(t.stage.params.context.appName))&&p.drawShape(t,e,i,r,n,s,a,o,l,h,u,c,d)})}drawPathProxy(t,e,i,r,n,a,o,u){if(!t.pathProxy)return!1;let c=(0,l.gh)(t,null==a?void 0:a.theme)[t.type.replace("3d","")],{fill:d=c.fill,stroke:p=c.stroke,opacity:f=c.opacity,fillOpacity:g=c.fillOpacity,lineWidth:m=c.lineWidth,strokeOpacity:y=c.strokeOpacity,visible:v=c.visible,x:b=c.x,y:x=c.y}=t.attribute,_=(0,s.Bv)(f,g,d),w=(0,s.Kf)(f,y),S=(0,s.dz)(d),A=(0,s.ak)(p,m);if(!v||!S&&!A||!(_||w||o||u))return!0;e.beginPath();let C="function"==typeof t.pathProxy?t.pathProxy(t.attribute):t.pathProxy;return(0,h.h)(C.commandList,e,i,r),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,c),this.beforeRenderStep(t,e,i,r,S,A,_,w,c,n,o,u),A&&(u?u(e,t.attribute,c):w&&(e.setStrokeStyle(t,t.attribute,i-b,r-x,c),e.stroke())),S&&(o?o(e,t.attribute,c):_&&(e.setCommonStyle(t,t.attribute,i-b,r-x,c),e.fill())),this.afterRenderStep(t,e,i,r,S,A,_,w,c,n,o,u),!0}valid(t,e,i,r){let{fill:n=e.fill,background:a,stroke:o=e.stroke,opacity:l=e.opacity,fillOpacity:h=e.fillOpacity,lineWidth:u=e.lineWidth,strokeOpacity:c=e.strokeOpacity,visible:d=e.visible}=t.attribute,p=(0,s.Bv)(l,h,n),f=(0,s.Kf)(l,c),g=(0,s.dz)(n,a),m=(0,s.ak)(o,u);return!(!t.valid||!d)&&!(!g&&!m)&&!!(p||f||i||r||a)&&{fVisible:p,sVisible:f,doFill:g,doStroke:m}}transform(t,e,i,s=!1){let{x:a=e.x,y:l=e.y,z:h=e.z,scaleX:u=e.scaleX,scaleY:d=e.scaleY,angle:p=e.angle,postMatrix:f}=t.attribute,g=i.modelMatrix,m=i.camera;c.x=a,c.y=l,c.z=h,c.lastModelMatrix=g;let y=m&&(s||(0,r.M_)(t)),v=y?t.transMatrix.onlyTranslate()&&!f:1===u&&1===d&&0===p&&!f;if(y){let s=n.yp.allocate(),a=n.yp.allocate();(0,r.RT)(a,t,e),(0,o.G9)(s,g||s,a),c.x=0,c.y=0,c.z=0,i.modelMatrix=s,i.setTransform(1,0,0,1,0,0,!0),n.yp.free(a)}if(v&&!g){let r=t.getOffsetXY(e);c.x+=r.x,c.y+=r.y,c.z=h,i.setTransformForCurrent()}else if(y)c.x=0,c.y=0,c.z=0,i.setTransform(1,0,0,1,0,0,!0);else if(m&&i.project){let r=t.getOffsetXY(e);c.x+=r.x,c.y+=r.y,this.transformWithoutTranslate(i,c.x,c.y,c.z,u,d,p)}else i.transformFromMatrix(t.transMatrix,!0),c.x=0,c.y=0,c.z=0;return c}transformUseContext2d(t,e,i,r){let n=r.camera;if(this.camera=n,n){let e=t.AABBBounds,n=e.x2-e.x1,s=e.y2-e.y1,a=r.project(0,0,i),o=r.project(n,0,i),l=r.project(n,s,i),h={x:0,y:0},u={x:n,y:0},c={x:n,y:s};r.camera=null;let d=1/(h.x*(c.y-u.y)-u.x*c.y+c.x*u.y+(u.x-c.x)*h.y),p=-(h.y*(l.x-o.x)-u.y*l.x+c.y*o.x+(u.y-c.y)*a.x)*d,f=(u.y*l.y+h.y*(o.y-l.y)-c.y*o.y+(c.y-u.y)*a.y)*d,g=(h.x*(l.x-o.x)-u.x*l.x+c.x*o.x+(u.x-c.x)*a.x)*d,m=-(u.x*l.y+h.x*(o.y-l.y)-c.x*o.y+(c.x-u.x)*a.y)*d,y=(h.x*(c.y*o.x-u.y*l.x)+h.y*(u.x*l.x-c.x*o.x)+(c.x*u.y-u.x*c.y)*a.x)*d,v=(h.x*(c.y*o.y-u.y*l.y)+h.y*(u.x*l.y-c.x*o.y)+(c.x*u.y-u.x*c.y)*a.y)*d;r.setTransform(p,f,g,m,y,v,!0)}}restoreTransformUseContext2d(t,e,i,r){this.camera&&(r.camera=this.camera)}transformWithoutTranslate(t,e,i,r,n,s,a){let o=t.project(e,i,r);t.translate(o.x,o.y,!1),t.scale(n,s,!1),t.rotate(a,!1),t.translate(-o.x,-o.y,!1),t.setTransformForCurrent()}_draw(t,e,i,r,s,a){let{context:o}=r;if(!o)return;let{renderable:l}=t.attribute;if(!1===l)return;o.highPerformanceSave();let{x:h,y:u,z:c,lastModelMatrix:d}=this.transform(t,e,o,i);this.z=c,this.drawPathProxy(t,o,h,u,r,s)||(this.drawShape(t,o,h,u,r,s,null,null,a),this.z=0,o.modelMatrix!==d&&n.yp.free(o.modelMatrix),o.modelMatrix=d),o.highPerformanceRestore()}}},89677:function(t,e,i){"use strict";i.d(e,{Eo:()=>m,M2:()=>d,R6:()=>p,Sg:()=>f,rJ:()=>g});var r=i(34865),n=i(26845),s=i(47816),a=i(17852),o=i(32207),l=i(97708),h=i(77909),u=i(13922),c=function(t,e){return function(i,r){e(i,r,t)}};class d{constructor(){this.time=l.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,o,l,h,u,c,d,p){var f;let{background:g,backgroundOpacity:m=null!=(f=t.attribute.fillOpacity)?f:h.backgroundOpacity,opacity:y=h.opacity,backgroundMode:v=h.backgroundMode,backgroundFit:b=h.backgroundFit,backgroundKeepAspectRatio:x=h.backgroundKeepAspectRatio,backgroundScale:_=h.backgroundScale,backgroundOffsetX:w=h.backgroundOffsetX,backgroundOffsetY:S=h.backgroundOffsetY,backgroundClip:A=h.backgroundClip}=t.attribute;if(g)if(t.backgroundImg&&t.resources){let n=t.resources.get(g);if("success"!==n.state||!n.data)return;if(e.save(),t.parent&&!t.transMatrix.onlyTranslate()){let i=(0,a.gh)(t.parent).group,{scrollX:r=i.scrollX,scrollY:n=i.scrollY}=t.parent.attribute;e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.translate(r,n)}A&&e.clip();let s=t.AABBBounds;e.setCommonStyle(t,t.attribute,i,r,h),e.globalAlpha=m*y,this.doDrawImage(e,n.data,s,{backgroundMode:v,backgroundFit:b,backgroundKeepAspectRatio:x,backgroundScale:_,backgroundOffsetX:w,backgroundOffsetY:S}),e.restore(),t.transMatrix.onlyTranslate()||e.setTransformForCurrent()}else e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,r,h),e.globalAlpha=m*y,e.fillStyle=g,e.fill(),e.highPerformanceRestore()}doDrawImage(t,e,i,r){let{backgroundMode:n,backgroundFit:s,backgroundKeepAspectRatio:a,backgroundScale:l=1,backgroundOffsetX:h=0,backgroundOffsetY:u=0}=r,c=i.width(),d=i.height(),p=c,f=d;if("no-repeat"===n)if(s)if(a){let r=Math.max(c/e.width,d/e.height);t.drawImage(e,i.x1+h,i.y1+u,e.width*r*l,e.height*r*l)}else t.drawImage(e,i.x1,i.y1,i.width(),i.height());else{let r=e.width*l,n=e.height*l;t.drawImage(e,i.x1+h,i.y1+u,r,n)}else{if(s&&"repeat"!==n&&(e.width||e.height)){let i=e.width,r=e.height;"repeat-x"===n?(p=d/r*i,f=d):"repeat-y"===n&&(f=c/i*r,p=c);let s=t.dpr,a=o.A.allocate({width:p,height:f,dpr:s}),l=a.getContext("2d");l&&(l.inuse=!0,l.clearMatrix(),l.setTransformForCurrent(!0),l.clearRect(0,0,p,f),l.drawImage(e,0,0,p,f),e=a.nativeCanvas),o.A.free(a)}let r=t.dpr,a=t.createPattern(e,n);a.setTransform&&a.setTransform(new DOMMatrix([1/r,0,0,1/r,0,0])),t.fillStyle=a,t.translate(i.x1,i.y1),t.fillRect(0,0,c,d),t.translate(-i.x1,-i.y1)}}}let p=new d,f=class{constructor(t){this.subRenderContribitions=t,this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,a,o,l,h,u,c,d){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach(p=>{p.render(t,e,i,r,n,s,a,o,l,h,u,c,d)})}};f=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)(),c(0,(0,n.f)(h.Qc)),c(0,(0,s.t)(u.tg)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],f);let g=new class{constructor(){this.time=l.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,a,o,l,h,u,c,d){var p,f;let{clipConfig:g}=t.attribute;if(!g)return;let m=t.getClipPath();if(!m)return;let y=!(u||c),v=t.AABBBounds,b=null!=(p=t.attribute.width)?p:v.width(),x=null!=(f=t.attribute.height)?f:v.height();y&&e.save(),e.beginPath(),!1===m.draw(e,[b,x],i+b/2,r+x/2,0)&&e.closePath(),u&&u(e,t.attribute,l,!0),y&&e.clip()}},m=new class{constructor(){this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,a,o,l,h,u,c,d){let{clipConfig:p}=t.attribute;p&&t.getClipPath()&&(u||c||e.restore())}}},60865:function(t,e,i){"use strict";i.d(e,{$:()=>o,H:()=>l});var r=i(32207),n=i(97708),s=i(78503),a=i(8830);class o{constructor(){this.time=n.Oh.afterFillStroke,this.useStyle=!0,this.order=10,this._tempSymbolGraphic=null}createCommonPattern(t,e,i,n,s){let a=(t-2*e)/2,o=n.dpr,l=r.A.allocate({width:t,height:t,dpr:o}),h=l.getContext("2d");if(!h)return null;h.inuse=!0,h.clearMatrix(),h.setTransformForCurrent(!0),h.clearRect(0,0,t,t),s(a,h);let u=n.createPattern(l.nativeCanvas,"repeat");return u.setTransform&&u.setTransform(new DOMMatrix([1/o,0,0,1/o,0,0])),r.A.free(l),u}createCirclePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(t,e)=>{e.fillStyle=i,e.arc(t,t,t,0,a.f7),e.fill()})}createDiamondPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(e,r)=>{let n=t/2;r.fillStyle=i,r.moveTo(n,n-e),r.lineTo(e+n,n),r.lineTo(n,n+e),r.lineTo(n-e,n),r.closePath(),r.fill()})}createRectPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(t,r)=>{r.fillStyle=i,r.fillRect(e,e,2*t,2*t)})}createVerticalLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(r,n)=>{n.fillStyle=i,n.fillRect(e,0,2*r,t)})}createHorizontalLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(r,n)=>{n.fillStyle=i,n.fillRect(0,e,t,2*r)})}createBiasLRLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(e,r)=>{r.strokeStyle=i,r.lineWidth=e,r.moveTo(0,0),r.lineTo(t,t);let n=t/2,s=-n;r.moveTo(n,s),r.lineTo(n+t,s+t),r.moveTo(-n,-s),r.lineTo(-n+t,-s+t),r.stroke()})}createBiasRLLinePattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(e,r)=>{r.strokeStyle=i,r.lineWidth=e,r.moveTo(t,0),r.lineTo(0,t);let n=t/2;r.moveTo(t+n,n),r.lineTo(n,n+t),r.moveTo(t-n,-n),r.lineTo(-n,-n+t),r.stroke()})}createGridPattern(t,e,i,r){return this.createCommonPattern(t,e,i,r,(t,r)=>{r.fillStyle=i,r.fillRect(e,e,t,t),r.fillRect(e+t,e+t,t,t)})}initTextureMap(t,e){this.textureMap=new Map}drawShape(t,e,i,r,n,s,a,o,l,h,u,c,d){this.textureMap||this.initTextureMap(e,t.stage);let{texture:p=l.texture,textureColor:f=l.textureColor,textureSize:g=l.textureSize,texturePadding:m=l.texturePadding}=t.attribute;p&&this.drawTexture(p,t,e,i,r,l,f,g,m)}drawTexture(t,e,i,n,a,o,l,h,u){var c;let{textureRatio:d=o.textureRatio,textureOptions:p=null}=e.attribute,f=this.textureMap.get(t);if(!f)switch(t){case"circle":f=this.createCirclePattern(h,u,l,i);break;case"diamond":f=this.createDiamondPattern(h,u,l,i);break;case"rect":f=this.createRectPattern(h,u,l,i);break;case"vertical-line":f=this.createVerticalLinePattern(h,u,l,i);break;case"horizontal-line":f=this.createHorizontalLinePattern(h,u,l,i);break;case"bias-lr":f=this.createBiasLRLinePattern(h,u,l,i);break;case"bias-rl":f=this.createBiasRLLinePattern(h,u,l,i);break;case"grid":f=this.createGridPattern(h,u,l,i)}if(p&&p.dynamicTexture){let f,{gridConfig:g={},useNewCanvas:m}=p,y=e.AABBBounds;n=y.x1,a=y.y1;let v=i;if(m){let t=(f=r.A.allocate({width:y.width(),height:y.height(),dpr:i.dpr})).getContext("2d");t.clearRect(0,0,y.width(),y.height()),n=0,a=0,i=t}if(v.save(),e.parent&&!e.transMatrix.onlyTranslate()){let{scrollX:t=0,scrollY:i=0}=e.parent.attribute;v.setTransformFromMatrix(e.parent.globalTransMatrix),v.translate(t,i,!0)}v.setCommonStyle(e,e.attribute,n,a,o),v.clip();let b=y.width(),x=y.height(),_=g.columns?g.columns:Math.ceil(b/h),w=g.rows?g.rows:Math.ceil(x/h),S=g.gutterColumn?g.gutterColumn:2*u,A=g.gutterRow?g.gutterRow:2*u;this._tempSymbolGraphic||(this._tempSymbolGraphic=(0,s.t)({}));let C=g.columns?b/g.columns:h,D=g.rows?x/g.rows:h;this._tempSymbolGraphic.setAttributes({size:[C-S,D-A],symbolType:t});let T=this._tempSymbolGraphic.getParsedPath();for(let t=0;t<w;t++)for(let r=0;r<_;r++){let s=n+h/2+r*h,o=a+h/2+t*h;null==(c=p.beforeDynamicTexture)||c.call(p,i,t,r,w,_,d,e,y.width(),y.height()),i.beginPath(),!1===T.draw(i,Math.min(C-S,D-A),s,o,0)&&i.closePath(),i.fillStyle=l,p.dynamicTexture(i,t,r,w,_,d,e,y.width(),y.height())}m&&(v.globalAlpha=1,v.drawImage(f.nativeCanvas,0,0,f.nativeCanvas.width,f.nativeCanvas.height,y.x1,y.y1,y.width()*v.dpr,y.height()*v.dpr)),v.restore()}else if(f)i.highPerformanceSave(),i.setCommonStyle(e,e.attribute,n,a,o),i.fillStyle=f,i.fill(),i.highPerformanceRestore();else if("wave"===t){i.save(),i.setCommonStyle(e,e.attribute,n,a,o),i.clip();let t=e.AABBBounds;(function(t,e,i,r,n,s,a){let{fill:o="orange",percent:l=.6,frequency:h=4,opacity:u,phi:c=0}=n,{amplitude:d=10}=n;d*=e<=.5?4*e-1:-4*e+3;let p=r*(1-l),f=Math.max(Math.round(i/70),2);t.beginPath(),t.moveTo(0+s,r+a),t.lineTo(0+s,p+a);let g=i/h*e,m=i/Math.PI/(2*h);for(let e=0;e<i;e+=f){let i=d*Math.sin((e+g+c)/m+c);t.lineTo(e+s,p+i+a)}t.lineTo(i+s,r+a),t.closePath(),t.fillStyle=o,isFinite(u)&&(t.globalAlpha=u),t.fill()})(i,d,t.width(),t.height(),Object.assign(Object.assign({},p||{}),{fill:l}),n+t.x1-n,a+t.y1-a),i.restore()}}}let l=new o},13922:function(t,e,i){"use strict";i.d(e,{$K:()=>d,Cs:()=>s,Gq:()=>n,JO:()=>o,Mj:()=>l,OL:()=>r,U7:()=>h,X3:()=>c,d5:()=>u,jd:()=>a,tg:()=>p});let r=Symbol.for("ArcRenderContribution"),n=Symbol.for("AreaRenderContribution"),s=Symbol.for("CircleRenderContribution"),a=Symbol.for("GroupRenderContribution"),o=Symbol.for("ImageRenderContribution"),l=Symbol.for("PathRenderContribution"),h=Symbol.for("PolygonRenderContribution"),u=Symbol.for("RectRenderContribution"),c=Symbol.for("SymbolRenderContribution"),d=Symbol.for("TextRenderContribution");Symbol.for("StarRenderContribution"),Symbol.for("CommonRenderContribution");let p=Symbol.for("InteractiveSubRenderContribution")},3570:function(t,e,i){"use strict";i.d(e,{Er:()=>p,NB:()=>f,d4:()=>d,gq:()=>m,k7:()=>g,sH:()=>c});var r=i(95723),n=i(34865),s=i(33880),a=i(89677),o=i(90383),l=i(97708),h=i(60865),u=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};class c{constructor(){this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,n,a,l,h,u,c,d,p,f){let{outerBorder:g,innerBorder:m}=t.attribute,y=g&&!1!==g.visible,v=m&&!1!==m.visible;if(!y&&!v)return;let{cornerRadius:b=c.cornerRadius,cornerType:x=c.cornerType,opacity:_=c.opacity,x:w=c.x,y:S=c.y,scaleX:A=c.scaleX,scaleY:C=c.scaleY,x1:D,y1:T,keepStrokeScale:B=c.keepStrokeScale}=t.attribute,{width:M,height:E}=t.attribute;M=(null!=M?M:D-i)||0,E=(null!=E?E:T-n)||0;let k=(a,l)=>{let h=!(!a||!a.stroke),u="outerBorder"===l?-1:1,{distance:d=c[l].distance}=a,p=B?d:(0,s.D)(e,d,e.dpr),g=i+u*p,m=n+u*p,y=2*p;if(0===b||(0,r.Z)(b)&&b.every(t=>0===t)?(e.beginPath(),e.rect(g,m,M-u*y,E-u*y)):(e.beginPath(),(0,o.U)(e,g,m,M-u*y,E-u*y,b,"bevel"!==x)),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,c),f)f(e,a,c[l]);else if(h){let r=c[l].opacity;c[l].opacity=_,e.setStrokeStyle(t,a,(w-i)/A,(S-n)/C,c[l]),c[l].opacity=r,e.stroke()}};y&&k(g,"outerBorder"),v&&k(m,"innerBorder")}}let d=class{constructor(){this.time=l.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,a,o,l,h,u,c,d){let{stroke:p=l.stroke}=t.attribute;Array.isArray(p)&&p.some(t=>!1===t)&&(d.doStroke=!1)}};d=u([(0,n.b)()],d);let p=class{constructor(){this.time=l.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,n,s,a,l,h,u,c,d,p){let{x1:f,y1:g,x:m=u.x,y:y=u.y,stroke:v=u.stroke,cornerRadius:b=u.cornerRadius,cornerType:x=u.cornerType}=t.attribute,{width:_,height:w}=t.attribute;if(_=(null!=_?_:f-m)||0,w=(null!=w?w:g-y)||0,Array.isArray(v)&&v.some(t=>!1===t)){if(e.setStrokeStyle(t,t.attribute,i,n,u),!(0===b||(0,r.Z)(b)&&b.every(t=>0===t))){let r,s=0;return(0,o.U)(e,i,n,_,w,b,"bevel"!==x,[,,,,].fill(0).map((a,o)=>(a,l,h,c)=>{v[o]&&(s===o-1&&v[o]===r||(e.setStrokeStyle(t,Object.assign(Object.assign({},t.attribute),{stroke:v[o]}),i,n,u),e.beginPath(),e.moveTo(a,l),r=v[o]),s=o,e.lineTo(h,c),e.stroke(),3===o&&e.beginPath())})),void e.stroke()}if(e.beginPath(),e.moveTo(i,n),v[0]?e.lineTo(i+_,n):e.moveTo(i+_,n),v[1]?e.lineTo(i+_,n+w):e.moveTo(i+_,n+w),v[2]?e.lineTo(i,n+w):e.moveTo(i,n+w),v[3]){let t=v[0]?n-e.lineWidth/2:n;e.lineTo(i,t)}else e.moveTo(i,n);e.stroke()}}};p=u([(0,n.b)()],p);let f=new c,g=h.H,m=a.R6},10641:function(t,e,i){"use strict";i.d(e,{C:()=>u});var r=i(80971),n=i(97708),s=i(89677),a=i(65242),o=i(68130),l=i(90383);class h extends s.M2{constructor(){super(...arguments),this.time=n.Oh.beforeFillStroke}drawShape(t,e,i,n,s,h,u,c,d,p,f,g){var m,y,v,b,x,_,w,S,A,C;let D,{backgroundMode:T=d.backgroundMode,backgroundFit:B=d.backgroundFit,backgroundKeepAspectRatio:M=d.backgroundKeepAspectRatio}=t.attribute,E,{background:k}=t.attribute;if(!k)return;let F=()=>{"richtext"===t.type&&(e.restore(),e.save(),E&&e.setTransformFromMatrix(E,!0,1))};"richtext"===t.type&&(E=e.currentMatrix.clone(),e.restore(),e.save(),e.setTransformForCurrent());let R=(0,r.Z)(k)&&k.background,P=t.transMatrix.onlyTranslate();if(R){let e=t.AABBBounds,i=(null!=(m=k.x)?m:e.x1)+(null!=(y=k.dx)?y:0),r=(null!=(v=k.y)?v:e.y1)+(null!=(b=k.dy)?b:0),n=null!=(x=k.width)?x:e.width(),s=null!=(_=k.height)?_:e.height();if(D=a.et.allocate(i,r,i+n,r+s),k=k.background,!P){let t=D.width(),e=D.height();D.set((null!=(w=k.x)?w:0)+(null!=(S=k.dx)?S:0),(null!=(A=k.y)?A:0)+(null!=(C=k.dy)?C:0),t,e)}}else D=t.AABBBounds,P||(D=(0,o.o)(Object.assign(Object.assign({},t.attribute),{angle:0,scaleX:1,scaleY:1,x:0,y:0,dx:0,dy:0})).clone());if(t.backgroundImg&&t.resources){let r=t.resources.get(k);if("success"!==r.state||!r.data)return void F();e.highPerformanceSave(),P&&e.setTransformFromMatrix(t.parent.globalTransMatrix,!0),e.setCommonStyle(t,t.attribute,i,n,d),this.doDrawImage(e,r.data,D,{backgroundMode:T,backgroundFit:B,backgroundKeepAspectRatio:M}),e.highPerformanceRestore(),e.setTransformForCurrent()}else{let{backgroundCornerRadius:r}=t.attribute;e.highPerformanceSave(),e.setCommonStyle(t,t.attribute,i,n,d),e.fillStyle=k,r?((0,l.U)(e,D.x1,D.y1,D.width(),D.height(),r,!0),e.fill()):e.fillRect(D.x1,D.y1,D.width(),D.height()),e.highPerformanceRestore()}R&&a.et.free(D),F()}}let u=new h},85668:function(t,e,i){"use strict";i.d(e,{pN:()=>f,xL:()=>h});var r=i(34865),n=i(63401),s=i(41712),a=i(66987),o=i(80358),l=i(33793);let h=Symbol.for("DrawItemInterceptor"),u=new n.FB,c=new n.FB;class d{constructor(){this.order=1}afterDrawItem(t,e,i,r,n){return null==t.attribute.shadowRootIdx&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0||(t.attribute.shadowRootIdx>0||!t.attribute.shadowRootIdx||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0)&&this.drawItem(t,e,i,r,n),!1}beforeDrawItem(t,e,i,r,n){return null==t.attribute.shadowRootIdx&&t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx>0||(t.attribute.shadowRootIdx<0||t.shadowRoot&&t.shadowRoot.attribute.shadowRootIdx<0)&&this.drawItem(t,e,i,r,n),!1}drawItem(t,e,i,r,n){if(!t.shadowRoot)return!1;let{context:s}=i;if(s.highPerformanceSave(),s.transformFromMatrix(t.transMatrix,!0),r.dirtyBounds&&r.backupDirtyBounds){u.copy(r.dirtyBounds),c.copy(r.backupDirtyBounds);let e=t.globalTransMatrix.getInverse();r.dirtyBounds.copy(r.backupDirtyBounds).transformWithMatrix(e),r.backupDirtyBounds.copy(r.dirtyBounds)}return r.renderGroup(t.shadowRoot,i,o.QE.allocate(1,0,0,1,0,0)),s.highPerformanceRestore(),r.dirtyBounds&&r.backupDirtyBounds&&(r.dirtyBounds.copy(u),r.backupDirtyBounds.copy(c)),!0}}class p{constructor(){this.order=1}afterDrawItem(t,e,i,r,n){return t.attribute._debug_bounds&&this.drawItem(t,e,i,r,n),!1}drawItem(t,e,i,r,n){if(!t.attribute._debug_bounds)return!1;let{context:s}=i;s.highPerformanceSave(),t.parent&&s.setTransformFromMatrix(t.parent.globalTransMatrix,!0),t.glyphHost&&t.glyphHost.parent&&s.setTransformFromMatrix(t.glyphHost.parent.globalTransMatrix,!0);let a=t.AABBBounds;return!0!==t.attribute._debug_bounds&&t.attribute._debug_bounds(s,t),s.strokeRect(a.x1,a.y1,a.width(),a.height()),s.highPerformanceRestore(),!0}}let f=class{constructor(){this.order=1,this.interceptors=[new d,new m,new g,new p]}afterDrawItem(t,e,i,r,n){if((!t.in3dMode||i.in3dInterceptor)&&!t.shadowRoot&&!t.attribute._debug_bounds&&!(t.baseGraphic||t.attribute.globalZIndex||t.interactiveGraphic))return!1;for(let s=0;s<this.interceptors.length;s++)if(this.interceptors[s].afterDrawItem&&this.interceptors[s].afterDrawItem(t,e,i,r,n))return!0;return!1}beforeDrawItem(t,e,i,r,n){if((!t.in3dMode||i.in3dInterceptor)&&!t.shadowRoot&&!t.attribute._debug_bounds&&!(t.baseGraphic||t.attribute.globalZIndex||t.interactiveGraphic))return!1;for(let s=0;s<this.interceptors.length;s++)if(this.interceptors[s].beforeDrawItem&&this.interceptors[s].beforeDrawItem(t,e,i,r,n))return!0;return!1}};f=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],f);class g{constructor(){this.order=1}beforeDrawItem(t,e,i,r,n){return!this.processing&&(t.baseGraphic?this.beforeDrawInteractive(t,e,i,r,n):this.beforeSetInteractive(t,e,i,r,n))}beforeSetInteractive(t,e,i,r,n){let s=t.interactiveGraphic;if(t.attribute.globalZIndex){s||(s=t.clone(),t.interactiveGraphic=s,s.baseGraphic=t),s.setAttributes({globalZIndex:0,zIndex:t.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),i.stage.tryInitInteractiveLayer();let e=i.stage.getLayer("_builtin_interactive");return e&&this.getShadowRoot(e).add(s),!0}if(s){i.stage.tryInitInteractiveLayer();let e=i.stage.getLayer("_builtin_interactive");e&&this.getShadowRoot(e).removeChild(s),t.interactiveGraphic=null,s.baseGraphic=null}return!1}beforeDrawInteractive(t,e,i,r,n){let s=t.baseGraphic,a=!!s.stage,o=s.parent;for(;a&&o&&o.stage!==o;)a=!!o.stage,o=o.parent;if(!a){let e=i.stage.getLayer("_builtin_interactive");return e&&this.getShadowRoot(e).removeChild(t),!0}if(s){this.processing=!0;let{context:t}=i;return t.highPerformanceSave(),t.setTransformFromMatrix(s.parent.globalTransMatrix,!0),s.isContainer?r.renderGroup(s,i,s.parent.globalTransMatrix):r.renderItem(s,i),t.highPerformanceRestore(),this.processing=!1,!0}return!1}getShadowRoot(t){var e;let i=t.getElementById("_interactive_group");return i||((i=a.i.CreateGraphic("group",{})).id="_interactive_group",t.add(i)),null!=(e=i.shadowRoot)?e:i.attachShadow()}}class m{constructor(){this.order=1}beforeDrawItem(t,e,i,r,n){if(!t.in3dMode||i.in3dInterceptor)return!1;i.in3dInterceptor=!0;let{context:a,stage:h}=e.drawParams;a.canvas,a.save(),this.initCanvasCtx(a),a.camera=h.camera;let u=a.currentMatrix;u.a/=a.dpr,u.b/=a.dpr,u.c/=a.dpr,u.d/=a.dpr,u.e/=a.dpr,u.f/=a.dpr;let c=o.yp.allocate();(0,s.B$)(c,u);let d=a.modelMatrix;if(d){if(c){let t=o.yp.allocate();a.modelMatrix=(0,s.G9)(t,d,c)}}else a.modelMatrix=c;return a.setTransform(1,0,0,1,0,0,!0),t.isContainer?(0,l.y)(a,t,(e,n)=>r.renderGroup(t,i,t.parent.globalTransMatrix,!e&&n),i):r.renderItem(t,i),a.camera=null,a.restore(),a.modelMatrix!==d&&o.yp.free(a.modelMatrix),a.modelMatrix=d,i.in3dInterceptor=!1,!0}initCanvasCtx(t){t.setTransformForCurrent()}}},48206:function(t,e,i){"use strict";i.d(e,{U:()=>h});var r=i(34865),n=i(17852),s=i(10773),a=i(4928),o=i(86977),l=i(86083);let h=class extends o.X{constructor(){super(...arguments),this.numberType=s.Hf}drawShape(t,e,i,r,s,o,l,h){if(t.incremental&&s.multiGraphicOptions){let{startAtIdx:e,length:o}=s.multiGraphicOptions,{segments:u=[]}=t.attribute;if(e>u.length)return;let c=(0,n.gh)(t).line,{fill:d=c.fill,stroke:p=c.stroke,opacity:f=c.opacity,fillOpacity:g=c.fillOpacity,strokeOpacity:m=c.strokeOpacity,lineWidth:y=c.lineWidth,visible:v=c.visible}=t.attribute,b=(0,a.Bv)(f,g,d),x=(0,a.Kf)(f,m),_=(0,a.dz)(d),w=(0,a.ak)(p,y);if(!t.valid||!v||!_&&!w||!(b||x||l||h))return;let{context:S}=s;for(let n=e;n<e+o;n++)this.drawIncreaseSegment(t,S,u[n-1],u[n],t.attribute.segments[n],[c,t.attribute],i,r)}else super.drawShape(t,e,i,r,s,o,l,h)}drawIncreaseSegment(t,e,i,r,n,s,a,o){r&&(e.beginPath(),(0,l.V3)(e.nativeContext,i,r,{offsetX:a,offsetY:o}),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,n,s),e.setStrokeStyle(t,n,a,o,s),e.stroke())}};h=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,r.b)()],h)},86977:function(t,e,i){"use strict";i.d(e,{X:()=>c});var r=i(95723),n=i(8830),s=i(34865),a=i(17852),o=i(10773),l=i(75946),h=i(86083),u=i(23436);let c=class extends l.Y{constructor(){super(...arguments),this.numberType=o.Hf}draw(t,e,i,r){let n=(0,a.gh)(t,null==r?void 0:r.theme).line;this._draw(t,n,!1,i,r)}drawSegmentItem(t,e,i,n,s,a,o,l,u,c,d,p,f,g,m){var y;if(!e)return;t.beginPath();let v=null!=(y=this.z)?y:0;(0,h.fW)(t,e,u,c,{offsetX:d,offsetY:p,offsetZ:v}),f.cache&&!(0,r.Z)(f.cache)&&f.cache.curves.every(t=>t.defined)&&f.attribute.curveType&&f.attribute.curveType.includes("Closed")&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(f,o,l);let{x:b=0,x:x=0}=o;return!1!==i&&(g?g(t,o,l):s&&(t.setCommonStyle(f,o,b-d,x-p,l),t.fill())),!1!==n&&(m?m(t,o,l):a&&(t.setStrokeStyle(f,o,b-d,x-p,l),t.stroke())),!1}drawLinearLineHighPerformance(t,e,i,r,n,s,a,o,l,h,u,c,d){var p;e.beginPath();let f=null!=(p=this.z)?p:0,{points:g}=t.attribute,m=g[0];e.moveTo(m.x+a,m.y+o,f);for(let t=1;t<g.length;t++){let i=g[t];e.lineTo(i.x+a,i.y+o,f)}e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l);let{x:y=0,x:v=0}=t.attribute;!1!==i&&(c?c(e,t.attribute,l):n&&(e.setCommonStyle(t,t.attribute,y-a,v-o,l),e.fill())),!1!==r&&(d?d(e,t.attribute,l):s&&(e.setStrokeStyle(t,t.attribute,y-a,v-o,l),e.stroke()))}drawShape(t,e,i,r,s,o,l,h){let c=(0,a.gh)(t,null==o?void 0:o.theme).line,{fill:d=c.fill,stroke:p=c.stroke,fillOpacity:f=c.fillOpacity,strokeOpacity:g=c.strokeOpacity,segments:m,points:y,closePath:v,curveTension:b=c.curveTension,connectedType:x=c.connectedType}=t.attribute;if(!this.valid(t,c,l,h))return;let{curveType:_=c.curveType}=t.attribute;v&&"linear"===_&&(_="linearClosed");let{clipRange:w=c.clipRange,clipRangeByDimension:S=c.clipRangeByDimension}=t.attribute;if(1===w&&!m&&!y.some(t=>!1===t.defined)&&"linear"===_)return this.drawLinearLineHighPerformance(t,e,!!d,!!p,f,g,i,r,c,s,o,l,h);function A(t,e){return"none"===e?t:t.filter(t=>!1!==t.defined)}if(t.shouldUpdateShape()){let{points:e,segments:i}=t.attribute;if(i&&i.length){let e,r;if(t.cache=i.map((t,i)=>{if(t.points.length<=1&&0===i)return t.points[0]&&(r={endX:t.points[0].x,endY:t.points[0].y,curves:[{defined:!1!==t.points[0].defined}]}),null;1===i?e={x:r.endX,y:r.endY,defined:r.curves[r.curves.length-1].defined}:i>1&&(e.x=r.endX,e.y=r.endY,e.defined=r.curves[r.curves.length-1].defined);let n=(0,u.X0)(A(t.points,x),_,{startPoint:e,curveTension:b});return r=n,n}).filter(t=>!!t),"linearClosed"===_){let e;for(let i=0;i<t.cache.length;i++){let r=t.cache[i];for(let t=0;t<r.curves.length;t++)if(r.curves[t].defined){e=r.curves[t].p0;break}if(e)break}t.cache[t.cache.length-1]&&t.cache[t.cache.length-1].lineTo(e.x,e.y,!0)}}else{if(!e||!e.length)return t.cache=null,void t.clearUpdateShapeTag();t.cache=(0,u.X0)(A(e,x),_,{curveTension:b})}t.clearUpdateShapeTag()}if(Array.isArray(t.cache)){let s=t.attribute.segments.filter(t=>t.points.length);if(1===s[0].points.length&&s.shift(),1===w){let n=!1;t.cache.forEach((a,o)=>{n||(n=this.drawSegmentItem(e,a,!!d,!!p,f,g,s[o],[c,t.attribute],w,S,i,r,t,l,h))})}else{let a=w*t.cache.reduce((t,e)=>t+e.getLength(),0),o=0,u=!1;t.cache.forEach((m,y)=>{if(u)return;let v=m.getLength(),b=(a-o)/v;o+=v,b>0&&(u=this.drawSegmentItem(e,m,!!d,!!p,f,g,s[y],[c,t.attribute],(0,n.VV)(b,1),S,i,r,t,l,h))})}}else this.drawSegmentItem(e,t.cache,!!d,!!p,f,g,t.attribute,c,w,S,i,r,t,l,h)}};c=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,s.b)()],c)},32227:function(t,e,i){"use strict";i.d(e,{Cb:()=>o,EY:()=>p,Iv:()=>m,O:()=>l,Pf:()=>r,Uj:()=>c,Xe:()=>n,ZT:()=>u,aP:()=>s,e0:()=>g,fS:()=>f,lG:()=>h,tP:()=>d,uz:()=>a});let r=Symbol.for("IncrementalDrawContribution"),n=Symbol.for("ArcRender");Symbol.for("Arc3dRender"),Symbol.for("AreaRender");let s=Symbol.for("CircleRender"),a=Symbol.for("GraphicRender"),o=Symbol.for("GroupRender"),l=Symbol.for("LineRender"),h=Symbol.for("PathRender"),u=Symbol.for("PolygonRender"),c=Symbol.for("RectRender");Symbol.for("Rect3DRender");let d=Symbol.for("SymbolRender"),p=Symbol.for("TextRender"),f=Symbol.for("RichTextRender");Symbol.for("Pyramid3dRender"),Symbol.for("GlyphRender");let g=Symbol.for("ImageRender");Symbol.for("RenderSelector");let m=Symbol.for("DrawContribution");Symbol.for("StarRender")},4928:function(t,e,i){"use strict";i.d(e,{Bv:()=>o,Eg:()=>p,GT:()=>l,Kf:()=>h,ZN:()=>d,Ze:()=>u,ak:()=>a,dz:()=>s,gI:()=>c});var r=i(95723),n=i(8830);function s(t,e){return!(!t&&!e)}function a(t,e){return((0,r.Z)(t)?t.some(t=>t||void 0===t):!!t)&&e>0}function o(t,e,i){return i&&t*e>0}function l(t,e,i,r,n){return n&&t*e>0&&0!==i&&0!==r}function h(t,e){return t*e>0}function u(t,e,i,r,n){return n?t*e>0:t*e>0&&0!==i&&0!==r}function c(t,e,i,r,n,s,a){let o=t-i,l=e-r,h=(a?s:-s)/Math.sqrt(o*o+l*l),u=h*l,c=-h*o,d=t+u,p=e+c,f=i+u,g=r+c,m=(d+f)/2,y=(p+g)/2,v=f-d,b=g-p,x=v*v+b*b,_=n-s,w=d*g-f*p,S=(b<0?-1:1)*Math.sqrt(Math.max(0,_*_*x-w*w)),A=(w*b-v*S)/x,C=(-w*v-b*S)/x,D=(w*b+v*S)/x,T=(-w*v+b*S)/x,B=A-m,M=C-y,E=D-m,k=T-y;return B*B+M*M>E*E+k*k&&(A=D,C=T),{cx:A,cy:C,x01:-u,y01:-c,x11:A*(n/_-1),y11:C*(n/_-1)}}function d(t,e,i,s,a){let o,l,h,u,c=(0,n.Wn)(i-e),d=t.getParsedCornerRadius(),p=(0,r.Z)(d),{outerDeltaAngle:f,innerDeltaAngle:g,outerStartAngle:m,outerEndAngle:y,innerEndAngle:v,innerStartAngle:b}=t.getParsePadAngle(e,i),x=p?d[0]:d,_=p?d[1]:d,w=p?d[2]:d,S=p?d[3]:d,A=Math.max(_,x),C=Math.max(w,S),D=A,T=C,B=a*(0,n.mC)(m),M=a*(0,n.O$)(m),E=s*(0,n.mC)(v),k=s*(0,n.O$)(v);if((C>n.Ho||A>n.Ho)&&(o=a*(0,n.mC)(y),l=a*(0,n.O$)(y),h=s*(0,n.mC)(b),u=s*(0,n.O$)(b),c<n.pi)){let t=function(t,e,i,r,s,a,o,l){let h=i-t,u=r-e,c=o-s,d=l-a,p=d*h-c*u;return p*p<n.Ho?[]:(p=(c*(e-a)-d*(t-s))/p,[t+p*h,e+p*u])}(B,M,h,u,o,l,E,k);if(t){let e=B-t[0],i=M-t[1],r=o-t[0],h=l-t[1],u=1/(0,n.O$)((0,n.Kh)((e*r+i*h)/((0,n._b)(e*e+i*i)*(0,n._b)(r*r+h*h)))/2),c=(0,n._b)(t[0]*t[0]+t[1]*t[1]);T=(0,n.VV)(C,(s-c)/(u-1)),D=(0,n.VV)(A,(a-c)/(u+1))}}return{outerDeltaAngle:f,xors:B,yors:M,xirs:h,yirs:u,xore:o,yore:l,xire:E,yire:k,limitedOcr:D,limitedIcr:T,outerCornerRadiusStart:x,outerCornerRadiusEnd:_,maxOuterCornerRadius:A,maxInnerCornerRadius:C,outerStartAngle:m,outerEndAngle:y,innerDeltaAngle:g,innerEndAngle:v,innerStartAngle:b,innerCornerRadiusStart:S,innerCornerRadiusEnd:w}}function p(t,e,i,r,s,a,o){let{startAngle:l,endAngle:h}=t.getParsedAngle(),u=(0,n.Wn)(h-l),p=h>l,f=!1;if(s<a){let t=s;s=a,a=t}if(s<=n.Ho)e.moveTo(i,r);else if(u>=n.f7-n.Ho)e.moveTo(i+s*(0,n.mC)(l),r+s*(0,n.O$)(l)),e.arc(i,r,s,l,h,!p),a>n.Ho&&(e.moveTo(i+a*(0,n.mC)(h),r+a*(0,n.O$)(h)),e.arc(i,r,a,h,l,p));else{let{outerDeltaAngle:u,xors:g,yors:m,xirs:y,yirs:v,limitedOcr:b,outerCornerRadiusStart:x,outerCornerRadiusEnd:_,maxOuterCornerRadius:w,xore:S,yore:A,xire:C,yire:D,outerStartAngle:T,outerEndAngle:B,limitedIcr:M,innerDeltaAngle:E,innerEndAngle:k,innerStartAngle:F,innerCornerRadiusStart:R,innerCornerRadiusEnd:P,maxInnerCornerRadius:O}=d(t,l,h,a,s);if(u<.001)o&&(o[3]||o[1])&&e.moveTo(i+g,r+m),f=!0;else if(b>n.Ho){let t=(0,n.VV)(x,b),a=(0,n.VV)(_,b),l=c(y,v,g,m,s,t,Number(p)),h=c(S,A,C,D,s,a,Number(p));b<w&&t===a?!o||o[0]?(e.moveTo(i+l.cx+l.x01,r+l.cy+l.y01),e.arc(i+l.cx,r+l.cy,b,(0,n.fv)(l.y01,l.x01),(0,n.fv)(h.y01,h.x01),!p)):e.moveTo(i+l.cx+b*(0,n.mC)((0,n.fv)(h.y01,h.x01)),r+l.cy+b*(0,n.O$)((0,n.fv)(h.y01,h.x01))):!o||o[0]?(e.moveTo(i+l.cx+l.x01,r+l.cy+l.y01),t>0&&e.arc(i+l.cx,r+l.cy,t,(0,n.fv)(l.y01,l.x01),(0,n.fv)(l.y11,l.x11),!p),e.arc(i,r,s,(0,n.fv)(l.cy+l.y11,l.cx+l.x11),(0,n.fv)(h.cy+h.y11,h.cx+h.x11),!p),a>0&&e.arc(i+h.cx,r+h.cy,a,(0,n.fv)(h.y11,h.x11),(0,n.fv)(h.y01,h.x01),!p)):a>0?e.moveTo(i+h.cx+a*(0,n.mC)((0,n.fv)(h.y01,h.x01)),r+h.cy+a*(0,n.O$)((0,n.fv)(h.y01,h.x01))):e.moveTo(i+S,r+s*(0,n.O$)(B))}else!o||o[0]?(e.moveTo(i+g,r+m),e.arc(i,r,s,T,B,!p)):e.moveTo(i+s*(0,n.mC)(B),r+s*(0,n.O$)(B));if(!(a>n.Ho)||E<.001)!o||o[1]?e.lineTo(i+C,r+D):e.moveTo(i+C,r+D),f=!0;else if(M>n.Ho){let t=(0,n.VV)(R,M),s=(0,n.VV)(P,M),l=c(C,D,S,A,a,-s,Number(p)),h=c(g,m,y,v,a,-t,Number(p));if(!o||o[1]?e.lineTo(i+l.cx+l.x01,r+l.cy+l.y01):e.moveTo(i+l.cx+l.x01,r+l.cy+l.y01),M<O&&t===s){let t=(0,n.fv)(h.y01,h.x01);!o||o[2]?e.arc(i+l.cx,r+l.cy,M,(0,n.fv)(l.y01,l.x01),t,!p):e.moveTo(i+l.cx+(0,n.mC)(t),r+l.cy+(0,n.O$)(t))}else!o||o[2]?(s>0&&e.arc(i+l.cx,r+l.cy,s,(0,n.fv)(l.y01,l.x01),(0,n.fv)(l.y11,l.x11),!p),e.arc(i,r,a,(0,n.fv)(l.cy+l.y11,l.cx+l.x11),(0,n.fv)(h.cy+h.y11,h.cx+h.x11),p),t>0&&e.arc(i+h.cx,r+h.cy,t,(0,n.fv)(h.y11,h.x11),(0,n.fv)(h.y01,h.x01),!p)):t>0?e.moveTo(i+h.cx+t*(0,n.mC)((0,n.fv)(h.y01,h.x01)),r+h.cy+t*(0,n.O$)((0,n.fv)(h.y01,h.x01))):e.moveTo(i+y,r+v)}else!o||o[1]?e.lineTo(i+C,r+D):e.moveTo(i+C,r+D),!o||o[2]?e.arc(i,r,a,k,F,p):e.moveTo(i+a*(0,n.mC)(F),r+a*(0,n.O$)(F))}return o?o[3]&&e.lineTo(i+s*(0,n.mC)(l),r+s*(0,n.O$)(l)):e.closePath(),f}},84453:function(t,e,i){"use strict";i.d(e,{h:()=>n});var r=i(92631);class n{static GetImage(t,e){var i;let s=n.cache.get(t);s?"fail"===s.loadState?r.w.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):"init"===s.loadState||"loading"===s.loadState?null==(i=s.waitingMark)||i.push(e):e&&e.imageLoadSuccess(t,s.data):n.loadImage(t,e)}static GetSvg(t,e){var i;let s=n.cache.get(t);s?"fail"===s.loadState?r.w.global.getRequestAnimationFrame()(()=>{e.imageLoadFail(t)}):"init"===s.loadState||"loading"===s.loadState?null==(i=s.waitingMark)||i.push(e):e&&e.imageLoadSuccess(t,s.data):(s={type:"image",loadState:"init"},n.cache.set(t,s),s.dataPromise=r.w.global.loadSvg(t),s.dataPromise?(s.waitingMark=[e],s.dataPromise.then(e=>{var i;s.loadState=(null==e?void 0:e.data)?"success":"fail",s.data=null==e?void 0:e.data,null==(i=s.waitingMark)||i.map((i,r)=>{(null==e?void 0:e.data)?(s.loadState="success",s.data=e.data,i.imageLoadSuccess(t,e.data)):(s.loadState="fail",i.imageLoadFail(t))}),s.waitingMark&&(s.waitingMark=[])})):(s.loadState="fail",e.imageLoadFail(t)))}static GetFile(t,e){let i=n.cache.get(t);return i?"fail"===i.loadState?Promise.reject():"init"===i.loadState||"loading"===i.loadState?i.dataPromise.then(t=>t.data):Promise.resolve(i.data):(i={type:e,loadState:"init"},n.cache.set(t,i),"arrayBuffer"===e?i.dataPromise=r.w.global.loadArrayBuffer(t):"blob"===e?i.dataPromise=r.w.global.loadBlob(t):"json"===e&&(i.dataPromise=r.w.global.loadJson(t)),i.dataPromise.then(t=>t.data))}static loading(){setTimeout(()=>{if(!n.isLoading&&n.toLoadAueue.length){n.isLoading=!0;let t=n.toLoadAueue.splice(0,10),e=[];t.forEach(t=>{let{url:i,marks:s}=t,a={type:"image",loadState:"init"};if(n.cache.set(i,a),a.dataPromise=r.w.global.loadImage(i),a.dataPromise){a.waitingMark=s;let t=a.dataPromise.then(t=>{var e;a.loadState=(null==t?void 0:t.data)?"success":"fail",a.data=null==t?void 0:t.data,null==(e=a.waitingMark)||e.map((e,r)=>{(null==t?void 0:t.data)?(a.loadState="success",a.data=t.data,e.imageLoadSuccess(i,t.data)):(a.loadState="fail",e.imageLoadFail(i))}),a.waitingMark&&(a.waitingMark=[])});e.push(t)}else a.loadState="fail",s.forEach(t=>t.imageLoadFail(i))}),Promise.all(e).then(()=>{n.isLoading=!1,this.onLoadSuccessCb.forEach(t=>t()),n.loading()}).catch(t=>{console.error(t),n.isLoading=!1,this.onLoadSuccessCb.forEach(t=>t()),n.loading()})}},0)}static loadImage(t,e){let i=s(t,n.toLoadAueue);if(-1!==i)return n.toLoadAueue[i].marks.push(e),void n.loading();n.toLoadAueue.push({url:t,marks:[e]}),n.loading()}static improveImageLoading(t){let e=s(t,n.toLoadAueue);if(-1!==e){let t=n.toLoadAueue.splice(e,1);n.toLoadAueue.unshift(t[0])}}static onLoadSuccess(t){this.onLoadSuccessCb.push(t)}}function s(t,e){for(let i=0;i<e.length;i++)if(e[i].url===t)return i;return -1}n.cache=new Map,n.isLoading=!1,n.toLoadAueue=[],n.onLoadSuccessCb=[]},46009:function(t,e,i){"use strict";i.d(e,{n:()=>n});class r{constructor(t,e){this._args=t,this.name=e,this.taps=[]}tap(t,e){this._tap("sync",t,e)}unTap(t,e){let i="string"==typeof t?t.trim():t.name;i&&(this.taps=this.taps.filter(t=>!(t.name===i&&(!e||t.fn===e))))}_parseOptions(t,e,i){let r;if("string"==typeof e)r={name:e.trim()};else if("object"!=typeof e||null===e)throw Error("Invalid tap options");if("string"!=typeof r.name||""===r.name)throw Error("Missing name for tap");return Object.assign({type:t,fn:i},r)}_tap(t,e,i){this._insert(this._parseOptions(t,e,i))}_insert(t){let e;"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let i=0;"number"==typeof t.stage&&(i=t.stage);let r=this.taps.length;for(;r>0;){r--;let t=this.taps[r];this.taps[r+1]=t;let n=t.stage||0;if(e){if(e.has(t.name)){e.delete(t.name);continue}if(e.size>0)continue}if(!(n>i)){r++;break}}this.taps[r]=t}}class n extends r{call(...t){this.taps.map(t=>t.fn).forEach(e=>e(...t))}}},67916:function(t,e,i){"use strict";i.d(e,{s:()=>m});var r=i(8830),n=i(69182),s=i(85476),a=i(90180),o=i(82265),l=i(80358),h=i(41712),u=i(57852),c=i(92631),d=i(33880),p=i(34865);let f=[0,0,0],g=(t,e,i,n,s,a,o,l)=>{if(l)for(;i>e;)i-=r.f7;else for(;i<e;)i+=r.f7;let h=r.pi/3*(i>e?1:-1),u=e,c=u;for(;c!==i;){let e=4*Math.tan(Math.abs((c=h>0?Math.min(c+h,i):Math.max(c+h,i))-u)/4)/3,r=c<u?-1:1,l=Math.cos(u),d=Math.sin(u),p=Math.cos(c),f=Math.sin(c),g=l*a+n,m=d*o+s,y=p*a+n,v=f*o+s,b=a*e*r,x=o*e*r;t.push([g-b*d,m+x*l,y+b*f,v-x*p,y,v]),u=c}},m=class{set fillStyle(t){this.nativeContext.fillStyle=t}get fillStyle(){return this.nativeContext.fillStyle}set font(t){t!==this._font&&(this._font=t,this.nativeContext.font=t)}get font(){var t;return null!=(t=this._font)?t:this.nativeContext.font}set globalAlpha(t){this.nativeContext.globalAlpha=t*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(t){this.nativeContext.lineCap=t}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(t){this.nativeContext.lineDashOffset=t}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(t){this.nativeContext.lineJoin=t}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(t){this.nativeContext.lineWidth=t}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(t){this.nativeContext.miterLimit=t}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(t){this.nativeContext.shadowBlur=t}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(t){this.nativeContext.shadowColor=t}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(t){this.nativeContext.shadowOffsetX=t}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(t){this.nativeContext.shadowOffsetY=t}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(t){this.nativeContext.strokeStyle=t}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(t){this.nativeContext.textAlign=t}get textAlign(){return this.nativeContext.textAlign}set textBaseline(t){this.nativeContext.textBaseline=t}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(t){!!this._inuse!==t&&(this._inuse=t,t?(this.nativeContext.save(),this.reset()):this.nativeContext.restore())}constructor(t,e){this.fillAttributes=Object.assign(Object.assign({},o.pp),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},o.WC),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},o.q9),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;let i=t.nativeCanvas.getContext("2d");if(!i)throw Error("发生错误，获取2d上下文失败");this.nativeContext=i,this.canvas=t,this.matrix=new n.y(1,0,0,1,0,0),this.stack=[],this.dpr=e,this.applyedMatrix=new n.y(1,0,0,1,0,0),this._clearMatrix=new n.y(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(t=!0){this.stack.length&&s.Y.getInstance().warn("可能存在bug，matrix没有清空"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new n.y(1,0,0,1,0,0),this.stack.length=0,t&&this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(t=!1){!t&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(t){return l.QE.allocateByObj(t)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(l.QE.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0)),this.font="",this._clearFilterStyle=!1,this._clearShadowStyle=!1}highPerformanceRestore(){this.stack.length>0&&(l.QE.free(this.matrix),this.matrix=this.stack.pop())}rotate(t,e=!0){this.matrix.rotate(t),e&&this.setTransformForCurrent()}save(){let t=this.cloneMatrix(this.matrix);this.stack.push(t),this.nativeContext.save()}highPerformanceSave(){let t=this.cloneMatrix(this.matrix);this.stack.push(t)}scale(t,e,i=!0){this.matrix.scale(t,e),i&&this.setTransformForCurrent()}setScale(t,e,i=!0){this.matrix.setScale(t,e),i&&this.setTransformForCurrent()}scalePoint(t,e,i,r,n=!0){this.translate(i,r,!1),this.scale(t,e,!1),this.translate(-i,-r,!1),n&&this.setTransformForCurrent()}setTransform(t,e,i,r,n,s,a=!0,o=this.dpr){this.matrix.setValue(o*t,o*e,o*i,o*r,o*n,o*s),a&&this.setTransformForCurrent()}setTransformFromMatrix(t,e=!0,i=this.dpr){this.matrix.setValue(t.a*i,t.b*i,t.c*i,t.d*i,t.e*i,t.f*i),e&&this.setTransformForCurrent()}resetTransform(t=!0,e=this.dpr){this.setTransform(e,0,0,e,0,0),t&&this.setTransformForCurrent()}transform(t,e,i,r,n,s,a=!0){this.matrix.multiply(t,e,i,r,n,s),a&&this.setTransformForCurrent()}transformFromMatrix(t,e){this.matrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f),e&&this.setTransformForCurrent()}translate(t,e,i=!0){this.matrix.translate(t,e),i&&this.setTransformForCurrent()}rotateDegrees(t,e=!0){let i=t*Math.PI/180;this.rotate(i,e)}rotateAbout(t,e,i,r=!0){this.translate(e,i,!1),this.rotate(t,!1),this.translate(-e,-i,!1),r&&this.setTransformForCurrent()}rotateDegreesAbout(t,e,i,r=!0){this.translate(e,i,!1),this.rotateDegrees(t,!1),this.translate(-e,-i,!1),r&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(t,e){t?"string"==typeof t?this.nativeContext.clip(t):this.nativeContext.clip(t,e):this.nativeContext.clip()}arc(t,e,i,r,n,s,a){if(a=a||0,this.camera){let o=[];g(o,r,n,t,e,i,i,s);for(let t=0;t<o.length;++t){let e=o[t];this.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5],a)}}else this.nativeContext.arc(t,e,Math.max(0,i),r,n,s)}arcTo(t,e,i,r,n){this.nativeContext.arcTo(t,e,i,r,n)}bezierCurveTo(t,e,i,r,n,s,a){if(a=a||0,this.camera){let o=a,l=a;this.modelMatrix&&((0,h.fF)(f,[t,e,a],this.modelMatrix),t=f[0],e=f[1],o=f[2],(0,h.fF)(f,[i,r,a],this.modelMatrix),i=f[0],r=f[1],l=f[2],(0,h.fF)(f,[n,s,a],this.modelMatrix),n=f[0],s=f[1],a=f[2]);let u=this.camera.vp(n,s,a);n=u.x,s=u.y,t=(u=this.camera.vp(t,e,o)).x,e=u.y,i=(u=this.camera.vp(i,r,l)).x,r=u.y}this.nativeContext.bezierCurveTo(t,e,i,r,n,s)}closePath(){this.nativeContext.closePath()}ellipse(t,e,i,r,n,s,a,o){null==o?this.nativeContext.ellipse(t,e,i,r,n,s,a):this.nativeContext.ellipse(t,e,i,r,n,s,a,o)}lineTo(t,e,i){if(i=i||0,this.camera){this.modelMatrix&&((0,h.fF)(f,[t,e,i],this.modelMatrix),t=f[0],e=f[1],i=f[2]);let r=this.camera.vp(t,e,i);t=r.x,e=r.y}this.nativeContext.lineTo(t,e)}moveTo(t,e,i){if(i=i||0,this.camera){this.modelMatrix&&((0,h.fF)(f,[t,e,i],this.modelMatrix),t=f[0],e=f[1],i=f[2]);let r=this.camera.vp(t,e,i);t=r.x,e=r.y}this.nativeContext.moveTo(t,e)}quadraticCurveTo(t,e,i,r,n){if(n=n||0,this.camera){let s=n;this.modelMatrix&&((0,h.fF)(f,[t,e,n],this.modelMatrix),t=f[0],e=f[1],s=f[2],(0,h.fF)(f,[i,r,n],this.modelMatrix),i=f[0],r=f[1],n=f[2]);let a=this.camera.vp(i,r,n);i=a.x,r=a.y,t=(a=this.camera.vp(t,e,s)).x,e=a.y}this.nativeContext.quadraticCurveTo(t,e,i,r)}rect(t,e,i,r,n){n=n||0,this.camera?(this.moveTo(t,e,n),this.lineTo(t+i,e,n),this.lineTo(t+i,e+r,n),this.lineTo(t,e+r,n),this.closePath()):this.nativeContext.rect(t,e,i,r)}createImageData(){let t=arguments;return 2===t.length?this.nativeContext.createImageData(t[0],t[1]):1===t.length?this.nativeContext.createImageData(t[0]):null}createLinearGradient(t,e,i,r){return isFinite(t+e+i+r)||(t=0,e=0,i=0,r=0),this.nativeContext.createLinearGradient(t,e,i,r)}createPattern(t,e){return 0===t.width||0===t.height?null:this.nativeContext.createPattern(t,e)}createRadialGradient(t,e,i,r,n,s){return this.nativeContext.createRadialGradient(t,e,i,r,n,s)}createConicGradient(t,e,i,r){if(this.nativeContext.createConicGradient&&.001>Math.abs(r-i-2*Math.PI))return this.nativeContext.createConicGradient(i,t,e);let n,s=!1,a=this;return{stops:[],addColorStop(t,e){this.stops.push([t,e]),s=!0},GetPattern(o,l,h){return s&&(h||(h=r-i),n=(0,u.Of)(a,this.stops,t,e,h,i,r,o,l),s=!1),n}}}fill(t,e){this.disableFill||(t?this.nativeContext.fill(t):this.nativeContext.fill())}fillRect(t,e,i,r){this.nativeContext.fillRect(t,e,i,r)}clearRect(t,e,i,r){this.nativeContext.clearRect(t,e,i,r)}project(t,e,i){if(i=i||0,this.camera){this.modelMatrix&&((0,h.fF)(f,[t,e,i],this.modelMatrix),t=f[0],e=f[1],i=f[2]);let r=this.camera.vp(t,e,i);t=r.x,e=r.y}return{x:t,y:e}}view(t,e,i){return i=i||0,this.camera?(this.modelMatrix&&((0,h.fF)(f,[t,e,i],this.modelMatrix),t=f[0],e=f[1],i=f[2]),this.camera.view(t,e,i)):[t,e,i]}fillText(t,e,i,r){if(r=r||0,this.camera){this.modelMatrix&&((0,h.fF)(f,[e,i,r],this.modelMatrix),e=f[0],i=f[1],r=f[2]);let t=this.camera.vp(e,i,r);e=t.x,i=t.y}this.nativeContext.fillText(t,e,i)}getImageData(t,e,i,r){return this.nativeContext.getImageData(t,e,i,r)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(t,e){return this.nativeContext.isPointInPath(t,e)}isPointInStroke(t,e){return this.nativeContext.isPointInStroke(t,e)}measureText(t,e=c.w.global.measureTextMethod){var i,r;if(!e||"native"===e)return this.nativeContext.measureText(t);this.mathTextMeasure||(this.mathTextMeasure=c.w.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));let n=null!=(i=this.fontFamily)?i:o.q9.fontFamily,s=null!=(r=this.fontSize)?r:o.q9.fontSize;return this.mathTextMeasure.textSpec.fontFamily===n&&this.mathTextMeasure.textSpec.fontSize===s||(this.mathTextMeasure.textSpec.fontFamily=n,this.mathTextMeasure.textSpec.fontSize=s,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(t,e)}putImageData(t,e,i){this.nativeContext.putImageData(t,e,i)}setLineDash(t){let e=arguments,i=this.nativeContext;this.nativeContext.setLineDash?e[0]&&i.setLineDash(e[0]):"mozDash"in i?i.mozDash=e[0]:"webkitLineDash"in i&&(i.webkitLineDash=e[0])}stroke(t){this.disableStroke||(t?this.nativeContext.stroke(t):this.nativeContext.stroke())}strokeRect(t,e,i,r){this.nativeContext.strokeRect(t,e,i,r)}strokeText(t,e,i,r){if(r=r||0,this.camera){this.modelMatrix&&((0,h.fF)(f,[e,i,r],this.modelMatrix),e=f[0],i=f[1],r=f[2]);let t=this.camera.vp(e,i,r);e=t.x,i=t.y}this.nativeContext.strokeText(t,e,i)}drawImage(){let t=this.nativeContext,e=arguments;3===e.length?t.drawImage(e[0],e[1],e[2]):5===e.length?t.drawImage(e[0],e[1],e[2],e[3],e[4]):9===e.length&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}setCommonStyle(t,e,i,r,n){if(Array.isArray(n)){if(n.length<=1)return this._setCommonStyle(t,e,i,r,n[0]);let s=Object.create(n[0]);return n.forEach((t,e)=>{0!==e&&Object.assign(s,t)}),this._setCommonStyle(t,e,i,r,s)}return this._setCommonStyle(t,e,i,r,n)}_setCommonStyle(t,e,i,r,n){let s=this.nativeContext;n||(n=this.fillAttributes);let{fillOpacity:a=n.fillOpacity,opacity:o=n.opacity,fill:l=n.fill}=e;s.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12&&(s.fillStyle=(0,d.L)(this,l,t,i,r))}setShadowBlendStyle(t,e,i){if(Array.isArray(i)){if(i.length<=1)return this._setShadowBlendStyle(t,i[0]);let r=Object.create(i[0]);return i.forEach((t,e)=>{0!==e&&Object.assign(r,t)}),this._setShadowBlendStyle(t,e,r)}return this._setShadowBlendStyle(t,e,i)}_setShadowBlendStyle(t,e,i){let r=this.nativeContext;i||(i=this.fillAttributes);let{opacity:n=i.opacity,shadowBlur:s=i.shadowBlur,shadowOffsetX:a=i.shadowOffsetX,shadowOffsetY:o=i.shadowOffsetY,blur:l=i.blur,globalCompositeOperation:h=i.globalCompositeOperation}=e;if(!(n<=1e-12)){if(a||o||s){let{shadowColor:t=i.shadowColor,shadowOffsetX:n=i.shadowOffsetX,shadowOffsetY:a=i.shadowOffsetY}=e;r.shadowBlur=s*this.dpr,r.shadowColor=t,r.shadowOffsetX=n*this.dpr,r.shadowOffsetY=a*this.dpr,this._clearShadowStyle=!0}else this._clearShadowStyle&&(r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0);l?(r.filter=`blur(${l}px)`,this._clearFilterStyle=!0):this._clearFilterStyle&&(r.filter="blur(0px)",this._clearFilterStyle=!1),h?(r.globalCompositeOperation=h,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(r.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1)}}setStrokeStyle(t,e,i,r,n){if(Array.isArray(n)){if(n.length<=1)return this._setStrokeStyle(t,e,i,r,n[0]);let s=Object.create(n[0]);return n.forEach((t,e)=>{0!==e&&Object.assign(s,t)}),this._setStrokeStyle(t,e,i,r,s)}return this._setStrokeStyle(t,e,i,r,n)}_setStrokeStyle(t,e,i,r,n){let s=this.nativeContext;n||(n=this.strokeAttributes);let{strokeOpacity:a=n.strokeOpacity,opacity:o=n.opacity}=e;if(s.globalAlpha=a*o*this.baseGlobalAlpha,a>1e-12&&o>1e-12){let{lineWidth:a=n.lineWidth,stroke:o=n.stroke,lineJoin:l=n.lineJoin,lineDash:h=n.lineDash,lineDashOffset:u=n.lineDashOffset,lineCap:c=n.lineCap,miterLimit:p=n.miterLimit,keepStrokeScale:f=n.keepStrokeScale}=e;s.lineWidth=f?a:(0,d.D)(this,a,this.dpr),s.strokeStyle=(0,d.L)(this,o,t,i,r),s.lineJoin=l,h&&(s.setLineDash(h),s.lineDashOffset=u),s.lineCap=c,s.miterLimit=p}}setTextStyleWithoutAlignBaseline(t,e,i){let r=this.nativeContext;e||(e=this.textAttributes);let{scaleIn3d:n=e.scaleIn3d}=t;t.font?this.font=t.font:this.font=(0,a.U)(t,e,n&&this.camera&&this.camera.getProjectionScale(i));let{fontFamily:s=e.fontFamily,fontSize:o=e.fontSize}=t;this.fontFamily=s,this.fontSize=o,r.textAlign="left",r.textBaseline="alphabetic"}setTextStyle(t,e,i){var r,n;let s=this.nativeContext;e||(e=this.textAttributes),t.font?this.font=t.font:this.font=(0,a.U)(t,e,this.camera&&this.camera.getProjectionScale(i));let{fontFamily:o=e.fontFamily,fontSize:l=e.fontSize}=t;this.fontFamily=o,this.fontSize=l,s.textAlign=null!=(r=t.textAlign)?r:e.textAlign,s.textBaseline=null!=(n=t.textBaseline)?n:e.textBaseline}draw(){}clearMatrix(t=!0,e=this.dpr){this.setTransformFromMatrix(this._clearMatrix,t,e)}setClearMatrix(t,e,i,r,n,s){this._clearMatrix.setValue(t,e,i,r,n,s)}onlyTranslate(t=this.dpr){return this.matrix.a===t&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===t}release(...t){this.stack.forEach(t=>l.QE.free(t)),this.stack.length=0}};m.env="browser",m=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],m)},97325:function(t,e,i){"use strict";i.d(e,{l:()=>s});var r=i(22415),n=i(5445);function s(t,e){return new r.n(i=>{i(n.r).toDynamicValue(()=>e=>new t(e)).whenTargetNamed(t.env),i(n.A).toDynamicValue(()=>(t,i)=>new e(t,i)).whenTargetNamed(e.env)})}},80808:function(t,e,i){"use strict";i.d(e,{Ns:()=>X});var r,n=i(22415),s=i(77067),a=i(34829),o=i(92631),l=i(34865),h=i(67916);let u=class extends a.u{constructor(t){super(t)}init(t){let{container:e}=t;if("string"==typeof e){let t=o.w.global.getElementById(e);t&&(this._container=t)}else this._container=e;this._context=new h.s(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;let{nativeCanvas:t}=this;t.width=this._pixelWidth,t.height=this._pixelHeight,t.style&&this.setCanvasStyle(t,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(t),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){let t=this._nativeCanvas;t.style.position="absolute",t.style.top=`${this._y}px`,t.style.left=`${this._x}px`}resetStyle(t){if(!this.controled)return;let{width:e=this._displayWidth,height:i=this._displayHeight,dpr:r=this._dpr,x:n=this._x,y:s=this._y}=t,{nativeCanvas:a}=this;a.width=e*r,a.height=i*r,a.style&&this.setCanvasStyle(a,n,s,e,i),t.id&&(a.id=t.id),this.visiable||this.hide()}setCanvasStyle(t,e,i,r,n){this.controled&&(t.style.width=`${r}px`,t.style.height=`${n}px`)}toDataURL(t,e){return"image/jpeg"===t?this._nativeCanvas.toDataURL(t,e):"image/png"===t?this._nativeCanvas.toDataURL(t):this._nativeCanvas.toDataURL(t,e)}resize(t,e){this.controled&&(this._pixelWidth=t*this._dpr,this._pixelHeight=e*this._dpr,this._displayWidth=t,this._displayHeight=e,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${t}px`,this._nativeCanvas.style.height=`${e}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};u.env="browser",u=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],u);let c=(0,i(97325).l)(u,h.s);var d=i(54045),p=i(63401),f=i(69182),g=i(19498),m=i(26845),y=i(47816),v=i(54161),b=i(77909),x=i(17852),_=i(82265),w=i(41712),S=i(80358),A=function(t,e){return function(i,r){e(i,r,t)}};let C=class{constructor(t,e){this.pickItemInterceptorContributions=t,this.pickServiceInterceptorContributions=e,this.type="default",this.global=o.w.global}reInit(){this._init()}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort((t,e)=>t.order-e.order),this.pickerServiceInterceptorContributions=this.pickServiceInterceptorContributions.getContributions().sort((t,e)=>t.order-e.order)}pick(t,e,i){let r,n={graphic:null,group:null};i.pickerService=this;let s=i.bounds.width(),a=i.bounds.height();if(!(new p.FB).setValue(0,0,s,a).containsPoint(e))return n;this.pickContext&&(this.pickContext.inuse=!0),i.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);let o=new f.y(1,0,0,1,0,0);for(let s=t.length-1;s>=0&&!(n=t[s].isContainer?this.pickGroup(t[s],e,o,i):this.pickItem(t[s],e,o,i)).graphic;s--)r||(r=n.group);if(n.graphic||(n.group=r),this.pickContext&&(this.pickContext.inuse=!1),this.pickerServiceInterceptorContributions.length)for(let t=0;t<this.pickerServiceInterceptorContributions.length;t++){let r=this.pickerServiceInterceptorContributions[t];r.afterPickItem&&(n=r.afterPickItem(n,this,e,i,{parentMatrix:o}))}return n}containsPoint(t,e,i){var r;return!!(null==(r=this.pickItem(t,e,null,null!=i?i:{pickContext:this.pickContext,pickerService:this}))?void 0:r.graphic)}pickGroup(t,e,i,r){let n={group:null,graphic:null};if(!1===t.attribute.visibleAll)return n;let s=r.pickContext,a=s.modelMatrix;if(s.camera){let e=t.transMatrix,i=S.yp.allocate();if((0,w.B$)(i,e),a){if(i){let t=S.yp.allocate();s.modelMatrix=(0,w.G9)(t,a,i),S.yp.free(i)}}else(0,w.B$)(i,t.globalTransMatrix),s.modelMatrix=i}if(this.InterceptorContributions.length)for(let n=0;n<this.InterceptorContributions.length;n++){let o=this.InterceptorContributions[n];if(o.beforePickItem){let n=o.beforePickItem(t,this,e,r,{parentMatrix:i});if(n)return s.modelMatrix!==a&&S.yp.free(s.modelMatrix),s.modelMatrix=a,n}}let o=t.transMatrix,l=S.QE.allocateByObj(i),h=new g.E9(e.x,e.y);l.transformPoint(h,h);let u=t.AABBBounds.containsPoint(h);if(!u&&!t.stage.camera)return n;let c=this.pickItem(t,h.clone(),i,r);c&&c.graphic&&(n.graphic=c.graphic,n.params=c.params);let d=!1!==t.attribute.pickable&&u;return l.multiply(o.a,o.b,o.c,o.d,o.e,o.f),!1===t.attribute.childrenPickable||c&&c.graphic||(0,v.kD)(t,_.xF.zIndex,s=>{if(s.isContainer){let i=new g.E9(e.x,e.y),a=(0,x.gh)(t).group,{scrollX:o=a.scrollX,scrollY:h=a.scrollY}=t.attribute;i.x-=o,i.y-=h,n=this.pickGroup(s,i,l,r)}else{let a=new g.E9(e.x,e.y);l.transformPoint(a,a);let o=(0,x.gh)(t).group,{scrollX:h=o.scrollX,scrollY:u=o.scrollY}=t.attribute;a.x-=h,a.y-=u;let c=this.pickItem(s,a,i,r);c&&c.graphic&&(n.graphic=c.graphic,n.params=c.params)}return!!n.graphic||!!n.group},!0,!!s.camera),s.modelMatrix!==a&&S.yp.free(s.modelMatrix),s.modelMatrix=a,n.graphic||n.group||!d||t.stage.camera||(n.group=t),S.QE.free(l),n}selectPicker(t){return this.pickerMap.get(t.numberType)||null}};C=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),A(0,(0,m.f)(b.Qc)),A(0,(0,y.t)(d.uH)),A(1,(0,m.f)(b.Qc)),A(1,(0,y.t)(d.tn)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Object])],C);var D=i(32207),T=i(32227),B=i(57355),M=function(t,e){return function(i,r){e(i,r,t)}};let E=class extends C{constructor(t,e,i,r){super(i,r),this.contributions=t,this.drawContribution=e,this.pickItemInterceptorContributions=i,this.pickServiceInterceptorContributions=r,this.global.hooks.onSetEnv.tap("canvas-picker-service",(t,e,i)=>{this.configure(i,e)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(t=>{this.pickerMap.set(t.numberType,t)}),super._init()}configure(t,e){this.pickCanvas=D.A.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(t,e,i,r){if(!1===t.attribute.pickable)return null;if(this.InterceptorContributions.length)for(let n=0;n<this.InterceptorContributions.length;n++){let s=this.InterceptorContributions[n];if(s.beforePickItem){let n=s.beforePickItem(t,this,e,r,{parentMatrix:i});if(n)return n}}let n=this.pickerMap.get(t.numberType);if(!n)return null;let s=n.contains(t,e,r),a=s?t:null,o={graphic:a,params:s};if(a)return o;if(this.InterceptorContributions.length)for(let n=0;n<this.InterceptorContributions.length;n++){let s=this.InterceptorContributions[n];if(s.afterPickItem){let n=s.afterPickItem(t,this,e,r,{parentMatrix:i});if(n)return n}}return o}};E=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),M(0,(0,m.f)(b.Qc)),M(0,(0,y.t)(B.EL)),M(1,(0,m.f)(T.Iv)),M(2,(0,m.f)(b.Qc)),M(2,(0,y.t)(d.uH)),M(3,(0,m.f)(b.Qc)),M(3,(0,y.t)(d.tn)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Object,Object,Object])],E);var k=i(10773);let F=class{constructor(){this.type="group",this.numberType=k.I_}contains(t,e,i){return!1}};F=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)()],F);let R=new n.n((t,e,i,r)=>{R.__vloaded||(R.__vloaded=!0,t(B.pE).to(F).inSingletonScope(),t(B.EL).toService(B.pE),(0,b.yb)(t,B.EL))});R.__vloaded=!1;let P=new n.n((t,e,i,r)=>{i(E)||t(E).toSelf().inSingletonScope(),i(d.hH)?r(d.hH).toService(E):t(d.hH).toService(E)});var O=i(47774),L=i(28364);let I=r=class extends O.X{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${r.idprefix}_${r.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=o.w.global,this.viewBox=new p.FB,this.modelMatrix=new f.y(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch(t){console.error("发生错误，该环境不存在IntersectionObserver")}}isElementVisible(t){let e=t.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;return!(e.right<0||e.bottom<0||e.left>i||e.top>r)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);let t=new IntersectionObserver((t,e)=>{t.forEach(t=>{this._canvasIsIntersecting!==t.isIntersecting?(this._canvasIsIntersecting=t.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(t.isIntersecting)):this._canvasIsIntersecting=t.isIntersecting})});t&&t.observe(this.canvas.nativeCanvas)}createWindowByConfig(t){let e,i=this.global.createCanvas({width:t.width,height:t.height});if(!(e="string"==typeof t.container?this.global.getElementById(t.container):t.container?t.container:this.global.getRootElement()))throw Error("发生错误，containerId可能传入有误");t.offscreen?e=null:e.appendChild(i);let n={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:i,container:e,id:r.GenerateCanvasId(),canvasControled:!0};this.canvas=new u(n)}createWindowByCanvas(t){var e;let i;if("string"==typeof t.canvas){if(!(i=this.global.getElementById(t.canvas)))throw Error("canvasId 参数不正确，请确认canvas存在并插入dom")}else i=t.canvas;if(!i)throw Error("发生错误，传入的canvas不正确");let r=t.width,n=t.height;if(null==r||null==n||!t.canvasControled){let t=i.getBoundingClientRect();r=t.width,n=t.height}let s=t.dpr;null==s&&(s=null!=(e=i.getContext("2d").pixelRatio)?e:i.width/r),this.canvas=new u({width:r,height:n,dpr:s,nativeCanvas:i,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(t,e,i){return this.canvas.nativeCanvas.addEventListener(t,e,i)}removeEventListener(t,e,i){return this.canvas.nativeCanvas.removeEventListener(t,e,i)}dispatchEvent(t){return this.canvas.nativeCanvas.dispatchEvent(t)}getStyle(){var t;return null!=(t=this.canvas.nativeCanvas.style)?t:{}}setStyle(t){this.canvas.nativeCanvas.style=t}getBoundingClientRect(){let t=this.canvas.nativeCanvas,e=this.getWH();return t.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:e.width,height:e.height,left:0,top:0,right:0,bottom:0}}clearViewBox(t){let e=this.viewBox,i=this.getContext(),r=this.getDpr();i.nativeContext.save(),i.nativeContext.setTransform(r,0,0,r,0,0),i.clearRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1),t&&(i.fillStyle=t,i.fillRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1)),i.nativeContext.restore()}isVisible(t){return this._canvasIsIntersecting}onVisibleChange(t){this._onVisibleChangeCb=t}getTopLeft(t){return this.global.getElementTopLeft(this.canvas.nativeCanvas,t)}};I.env="browser",I.idprefix="visactor_window",I.prefix_count=0,I=r=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],I);let z=new n.n(t=>{t(I).toSelf(),t(L.zd).toDynamicValue(t=>t.container.get(I)).whenTargetNamed(I.env)});var Z=i(90004),j=i(27753),W=i(89530),U=i(83624);class N{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(t){this.dom=t}}function H(t,e=!1){let i=document.createElement("img");if(o.w.global.isImageAnonymous&&(i.crossOrigin="anonymous"),e){let e=new Blob([t],{type:"image/svg+xml"});t=window.URL.createObjectURL(e)}return(i.src=t,i.complete)?Promise.resolve(i):new Promise((t,e)=>{i.onload=()=>{t(i)},i.onerror=()=>{e(Error("加载失败"))}})}let G=class extends Z.z{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch(t){this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(t,e){var i,r;let n=0,s=0,a=0,o=0;if(t.changedTouches){let e=null!=(i=t.changedTouches[0])?i:{};n=e.clientX||0,s=e.clientY||0,a=n,o=s}else n=t.clientX||0,s=t.clientY||0,a=t.offsetX||0,o=t.offsetY||0;if(e){let t,i,a=n,o=s,l=e.getBoundingClientRect(),h=null==(r=e.getNativeHandler)?void 0:r.call(e).nativeCanvas;return h&&(t=l.width/h.offsetWidth,i=l.height/h.offsetHeight),{x:(a-l.left)/((0,W.Z)(t)?t:1),y:(o-l.top)/((0,W.Z)(i)?i:1)}}return{x:a,y:o}}getNativeAABBBounds(t){let e=t;return("string"==typeof t&&(e=(new DOMParser).parseFromString(t,"text/html").firstChild).lastChild&&(e=e.lastChild.firstChild),e.getBoundingClientRect)?new N(e.getBoundingClientRect()):new p.FB}removeDom(t){return t.parentElement.removeChild(t),!0}updateDom(t,e){let{width:i,height:r,style:n}=e;return n&&((0,U.Z)(n)?t.setAttribute("style",n):Object.keys(n).forEach(e=>{t.style[e]=n[e]})),null!=i&&(t.style.width=`${i}px`),null!=r&&(t.style.height=`${r}px`),!0}createDom(t){let{tagName:e="div",parent:i}=t,r=document.createElement(e);if(this.updateDom(r,t),i){let t=(0,U.Z)(i)?this.getElementById(i):i;t&&t.appendChild&&t.appendChild(r)}return r}loadImage(t){return H(t,!1).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadSvg(t){return H(t,!0).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}createCanvas(t){var e,i;let r=document.createElement("canvas");t.id&&(r.id=null!=(e=t.id)?e:j.R.GenAutoIncrementId().toString());let n=null!=(i=t.dpr)?i:window.devicePixelRatio;return t.width&&t.height&&(r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.width=t.width*n,r.height=t.height*n),r}createOffscreenCanvas(t){var e;let i=null!=(e=t.dpr)?e:window.devicePixelRatio;return new OffscreenCanvas(t.width*i,t.height*i)}releaseCanvas(t){let e;(e="string"==typeof t?document.getElementById(t):t)&&e.parentElement&&e.parentElement.removeChild(e)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(t,e,i){return document.addEventListener(t,e,i)}removeEventListener(t,e,i){return document.removeEventListener(t,e,i)}dispatchEvent(t){return document.dispatchEvent(t)}getElementById(t){return document.getElementById(t)}getRootElement(){return document.body}getDocument(){return document}release(...t){}getElementTop(t,e){let i=t.offsetTop,r=t.offsetParent;for(;null!==r;)i+=r.offsetTop,r=r.offsetParent;return i}getElementLeft(t,e){let i=t.offsetLeft,r=t.offsetParent;for(;null!==r;)i+=r.offsetLeft,r=r.offsetParent;return i}getElementTopLeft(t,e){let i=t.offsetTop,r=t.offsetLeft,n=t.offsetParent;for(;null!==n;)i+=n.offsetTop,r+=n.offsetLeft,n=n.offsetParent;return{top:i,left:r}}loadFont(t,e,i){var r,n,s,a;return r=this,n=void 0,s=void 0,a=function*(){return new FontFace(t,(0,U.Z)(e)?`url(${e})`:e,i).load().then(function(t){return document.fonts.add(t),{loadState:"success"}}).catch(function(t){return console.error("Failed to load font:",t),{loadState:"fail"}})},new(s||(s=Promise))(function(t,e){function i(t){try{l(a.next(t))}catch(t){e(t)}}function o(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof s?r:new s(function(t){t(r)})).then(i,o)}l((a=a.apply(r,n||[])).next())})}isMacOS(){if(void 0===this._isMacOS)try{this._isMacOS=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch(t){this._isMacOS=!1}return this._isMacOS}copyToClipBoard(t){return navigator.clipboard.writeText(t).then(()=>{}).catch(t=>{})}};G=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],G);let V=new n.n(t=>{V.isBrowserBound||(V.isBrowserBound=!0,t(G).toSelf().inSingletonScope(),t(s.D0).toService(G))});function X(t,e=!0){X.__loaded||(X.__loaded=!0,t.load(V),t.load(c),t.load(z),e&&(t.load(R),t.load(P)))}V.isBrowserBound=!1,X.__loaded=!1},15776:function(t,e,i){"use strict";i.d(e,{sn:()=>A});var r,n=i(22415),s=i(77067),a=i(34829),o=i(34865),l=i(69182),h=i(67916);let u=class extends h.s{constructor(t,e){super(t,e);let i=t.nativeCanvas.getContext("2d");if(!i)throw Error("发生错误，获取2d上下文失败");this.nativeContext=i,this.canvas=t,this.matrix=new l.y(1,0,0,1,0,0),this.stack=[],this.dpr=null!=e?e:1}release(...t){}};u.env="node",u=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,o.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object,Number])],u);var c=i(96241);let d=class extends a.u{constructor(t){super(t)}init(){this._context=new u(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...t){this._nativeCanvas.release&&(0,c.Z)(this._nativeCanvas.release)&&this._nativeCanvas.release()}};d.env="node",d=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,o.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],d);let p=(0,i(97325).l)(d,u);var f=i(47774),g=i(27753),m=i(26845),y=i(28364);let v=class extends f.X{get container(){return null}constructor(t){super(),this.global=t,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(t){t.canvas?this.createWindowByCanvas(t):this.createWindowByConfig(t)}createWindowByConfig(t){let e=this.global.createCanvas({width:t.width,height:t.height}),i={width:t.width,height:t.height,dpr:t.dpr,nativeCanvas:e,id:g.R.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new d(i)}createWindowByCanvas(t){var e;let i=t.canvas,r=null!=(e=t.dpr)?e:1,n=t.width,s=t.height;null!=n&&null!=s&&t.canvasControled||(n=i.width/r,s=i.height/r),this.canvas=new d({width:n,height:s,dpr:r,nativeCanvas:i,canvasControled:t.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(t,e){this.canvas.resize(t,e)}setDpr(t){this.canvas.dpr=t}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(t="image/png"){return this.canvas.nativeCanvas.toBuffer(t)}addEventListener(t,e,i){}dispatchEvent(t){return!0}removeEventListener(t,e,i){}getStyle(){}setStyle(t){}getBoundingClientRect(){return null}clearViewBox(t){}};v.env="node",v=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,o.b)(),(r=(0,m.f)(s.y2),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],v);let b=new n.n(t=>{t(v).toSelf(),t(y.zd).toDynamicValue(t=>t.container.get(v)).whenTargetNamed(v.env)});var x=i(90004),_=i(19626);let w=class extends x.z{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(t,e){t.env===this.type&&(t.setActiveEnvContribution(this),this.pkg=e)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(t){let e=fetch(t).then(t=>t.json());return e.then(t=>({data:t,state:"success"})).catch(()=>({data:null,state:"fail"})),e}loadArrayBuffer(t){return fetch(t).then(t=>t.arrayBuffer()).then(t=>({data:t,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadImage(t){let{loadImage:e}=this.pkg;return e?e(t).then(t=>({loadState:t?"success":"fail",data:t})).catch(()=>({loadState:"fail",data:null})):Promise.reject(Error("node-canvas loadImage could not be found!"))}loadSvg(t){let e=this.pkg.Resvg;if(!e)return Promise.reject(Error("@resvg/resvg-js svgParser could not be found!"));let i=new e(t).render().asPng();return this.loadImage(i)}createCanvas(t){return this.pkg.createCanvas(t.width,t.height)}releaseCanvas(t){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(t){return _.dZ.call(t)}}getCancelAnimationFrame(){return t=>{_.dZ.clear(t)}}addEventListener(t,e,i){}removeEventListener(t,e,i){}getElementById(t){return null}getRootElement(){return null}dispatchEvent(t){}release(...t){}createOffscreenCanvas(t){}};w=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,o.b)()],w);let S=new n.n(t=>{S.isNodeBound||(S.isNodeBound=!0,t(w).toSelf().inSingletonScope(),t(s.D0).toService(w))});function A(t,e=!0){A.__loaded||(A.__loaded=!0,t.load(S),t.load(p),t.load(b))}S.isNodeBound=!1,A.__loaded=!1},13942:function(t,e,i){"use strict";i.d(e,{o:()=>c});var r=i(54628),n=i(92631),s=i(66456),a=i(21883),o=i.n(a);let l=(t,e)=>{let i=e.x-t.x,r=e.y-t.y;return Math.abs(i)>Math.abs(r)?i>0?"right":"left":r>0?"down":"up"},h=(t,e)=>{let i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return Math.sqrt(i*i+r*r)},u=t=>{let e=t.length;if(1===e)return{x:Math.round(t[0].x),y:Math.round(t[0].y)};let i=0,r=0,n=0;for(;n<e;)i+=t[n].x,r+=t[n].y,n++;return{x:Math.round(i/e),y:Math.round(r/e)}};class c extends o(){constructor(t,e={}){var i,n,s,a,o,c,d,p,f,g;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=t=>{this.startTime=r.m.now();let{cachedEvents:e,startPoints:i}=this;t&&e.push(t.clone()),i.length=e.length;for(let t=0;t<e.length;t++){let{x:r,y:n}=e[t],s={x:r,y:n};i[t]=s}if(1!==i.length)this.startDistance=h(i[0],i[1]),this.center=u([i[0],i[1]]);else{let t=e[0];this.pressTimeout=setTimeout(()=>{t.direction="none",t.deltaX=0,t.deltaY=0,t.points=i,this.triggerStartEvent("press",t),this.triggerEvent("press",t),this.eventType="press",this.direction="none",this.pressTimeout=null},this.config.press.time)}},this.onMove=t=>{this.clearPressTimeout();let{startPoints:e,cachedEvents:i}=this;if(!e.length)return;let n=t.clone(),{x:s,y:a,pointerId:o}=n;for(let t=0,e=i.length;t<e;t++)if(o===i[t].pointerId){i[t]=n;break}let u={x:s,y:a},c=i.map(t=>({x:t.x,y:t.y})),d=r.m.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=d,this.lastMovePoint=u,1===e.length){let t=e[0],i=s-t.x,r=a-t.y,o=this.direction||l(t,u);this.direction=o;let h=this.getEventType(u);return n.direction=o,n.deltaX=i,n.deltaY=r,n.points=c,this.triggerStartEvent(h,n),void this.triggerEvent(h,n)}let{startDistance:p}=this;n.scale=h(c[0],c[1])/p,n.center=this.center,n.points=c,this.triggerStartEvent("pinch",n),this.triggerEvent("pinch",n)},this.onEnd=t=>{let e=t.clone(),{cachedEvents:i,startPoints:n}=this;if(e.points=i.map(t=>({x:t.x,y:t.y})),this.triggerEndEvent(e),1===i.length){let i=r.m.now(),s=this.lastMoveTime;if(i-s<100){let t=s-(this.prevMoveTime||this.startTime);if(t>0){let i=this.prevMovePoint||n[0],r=this.lastMovePoint||n[0],s=h(i,r),a=s/t;if(a>this.config.swipe.velocity&&s>this.config.swipe.threshold)return e.velocity=a,e.direction=l(i,r),this.triggerEvent("swipe",e),this.cachedEvents=[],this.startPoints=[],void this.reset()}}i-this.startTime<this.config.press.time&&(i-this.lastTapTime<this.config.tap.interval&&t.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=i,this.lastTapTarget=t.target,1===this.tapCount?this.triggerEvent("tap",e):2===this.tapCount&&(this.triggerEvent("doubletap",e),this.tapCount=0))}for(let t=0,r=i.length;t<r;t++)if(i[t].pointerId===e.pointerId){i.splice(t,1),n.splice(t,1);break}this.reset(),i.length>0&&this.onStart()},this.element=t,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:null!=(n=null==(i=null==e?void 0:e.press)?void 0:i.time)?n:251,threshold:null!=(a=null==(s=null==e?void 0:e.press)?void 0:s.threshold)?a:9},swipe:{threshold:null!=(c=null==(o=null==e?void 0:e.swipe)?void 0:o.threshold)?c:10,velocity:null!=(p=null==(d=null==e?void 0:e.swipe)?void 0:d.velocity)?p:.3},tap:{interval:null!=(g=null==(f=null==e?void 0:e.tap)?void 0:f.interval)?g:300}},this.initEvents()}initEvents(){let{element:t}=this;t&&(t.addEventListener("pointerdown",this.onStart),t.addEventListener("pointermove",this.onMove),t.addEventListener("pointerup",this.onEnd),t.addEventListener("pointerleave",this.onEnd),t.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){let{element:t}=this;t&&(t.removeEventListener("pointerdown",this.onStart),t.removeEventListener("pointermove",this.onMove),t.removeEventListener("pointerup",this.onEnd),t.removeEventListener("pointerleave",this.onEnd),t.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(t){let e,{eventType:i,startTime:n,startPoints:s}=this;return"press"===i?i:(e=r.m.now()-n>this.config.press.time&&h(s[0],t)<this.config.press.threshold?"press":"pan",this.eventType=e,e)}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}pushEvent(t,e){let{emitThrottles:i}=this,r={type:t,ev:e};for(let e=0,n=i.length;e<n;e++)if(i[e].type===t)return void i.splice(e,1,r);i.push(r)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(t,e){this.pushEvent(t,e);let{throttleTimer:i,emitThrottles:r}=this;i||(this.throttleTimer=n.w.global.getRequestAnimationFrame()(()=>{n.w.global.getCancelAnimationFrame()(this.throttleTimer),this.throttleTimer=null;for(let t=0,e=r.length;t<e;t++){let{type:e,ev:i}=r[t];this.emitEvent(e,i)}this.emitThrottles.length=0}))}triggerStartEvent(t,e){this.isProcess(t)||(this.enable(t),this.triggerEvent(`${t}start`,e))}triggerEndEvent(t){let e=this.processEvent;Object.keys(e).forEach(i=>{this.triggerEvent(`${i}end`,t),"press"===i&&this.triggerEvent(`${i}up`,t),delete e[i]})}emitEvent(t,e){if(!this.element)return;let i=this.element._events;this._callListeners(t,e,i[s.g]),this._callListeners(t,e,i[t]),this.emit(t,e)}_callListeners(t,e,i){if(i)if("fn"in i)i.fn.call(i.context,e,t);else for(let r=0,n=i.length;r<n&&!e.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,e,t)}}},91689:function(t,e,i){"use strict";i.d(e,{EG:()=>c,Jj:()=>m,NP:()=>s,Nv:()=>n,VA:()=>d,bZ:()=>f,p8:()=>g,qP:()=>l,q_:()=>a,rE:()=>h,rV:()=>u,sg:()=>p,uU:()=>o});var r=i(66987);let n={onPointerDown:"pointerdown",onPointerUp:"pointerup",onPointerUpOutside:"pointerupoutside",onPointerTap:"pointertap",onPointerOver:"pointerover",onPointerMove:"pointermove",onPointerEnter:"pointerenter",onPointerLeave:"pointerleave",onPointerOut:"pointerout",onMouseDown:"mousedown",onMouseUp:"mouseup",onMouseUpOutside:"mouseupoutside",onMouseMove:"mousemove",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onPinch:"pinch",onPinchStart:"pinchstart",onPinchEnd:"pinchend",onPan:"pan",onPanStart:"panstart",onPanEnd:"panend",onDrag:"drag",onDragStart:"dragstart",onDragEnter:"dragenter",onDragLeave:"dragleave",onDragOver:"dragover",onDragEnd:"dragend",onRightDown:"rightdown",onRightUp:"rightup",onRightUpOutside:"rightupoutside",onTouchStart:"touchstart",onTouchEnd:"touchend",onTouchEndOutside:"touchendoutside",onTouchMove:"touchmove",onTouchCancel:"touchcancel",onPress:"press",onPressUp:"pressup",onPressEnd:"pressend",onSwipe:"swipe",onDrop:"drop",onWeel:"wheel",onClick:"click",onDblClick:"dblclick"};function s(t){return r.i.arc(t?t.attribute:{})}function a(t){return r.i.area(t?t.attribute:{})}function o(t){return r.i.circle(t?t.attribute:{})}function l(t){return r.i.group(t?t.attribute:{})}function h(t){return r.i.glyph(t?t.attribute:{})}function u(t){return r.i.image(t?t.attribute:{})}function c(t){return r.i.line(t?t.attribute:{})}function d(t){return r.i.path(t?t.attribute:{})}function p(t){return r.i.polygon(t?t.attribute:{})}function f(t){return r.i.rect(t?t.attribute:{})}function g(t){return r.i.symbol(t?t.attribute:{})}function m(t){return r.i.text(t?t.attribute:{})}function y(t){return r.i.richtext(t?t.attribute:{})}Object.keys(n),y.Text=function(t){return Object.assign({type:"rich/text"},t)},y.Image=function(t){return Object.assign({type:"rich/image"},t)}},92257:function(t,e,i){"use strict";i.d(e,{D:()=>s});var r=i(75946),n=i(80358);class s extends r.Y{contains(t,e,i){let{pickContext:r}=null!=i?i:{};if(!r)return!1;let s=t.getGraphicTheme();r.highPerformanceSave();let{x:a,y:o,z:l,lastModelMatrix:h}=this.transform(t,s,r),u=e;if(r.camera){u=e.clone();let i=t.parent.globalTransMatrix;u.x=i.a*e.x+i.c*e.y+i.e,u.y=i.b*e.x+i.d*e.y+i.f}this.canvasRenderer.z=l;let c=!1;return this.canvasRenderer.drawShape(t,r,a,o,i,null,(t,e,i)=>!!c||(c=t.isPointInPath(u.x,u.y))),this.canvasRenderer.z=0,r.modelMatrix!==h&&n.yp.free(r.modelMatrix),r.modelMatrix=h,r.highPerformanceRestore(),c}}},26984:function(t,e,i){"use strict";i.d(e,{Q:()=>a});var r=i(75946),n=i(33880),s=i(80358);class a extends r.Y{contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;r.highPerformanceSave();let a=t.getGraphicTheme(),{x:o,y:l,z:h,lastModelMatrix:u}=this.transform(t,a,r),c=e;if(r.camera){c=e.clone();let i=t.parent.globalTransMatrix;c.x=i.a*e.x+i.c*e.y+i.e,c.y=i.b*e.x+i.d*e.y+i.f}this.canvasRenderer.z=h;let d=!1;return this.canvasRenderer.drawShape(t,r,o,l,{},null,t=>!!d||(d=t.isPointInPath(c.x,c.y)),(t,e,i)=>{if(d)return!0;let s=e.lineWidth||i.lineWidth,a=e.pickStrokeBuffer||i.pickStrokeBuffer;return r.lineWidth=e.keepStrokeScale||i.keepStrokeScale?s+a:(0,n.D)(r,s+a,r.dpr),d=t.isPointInStroke(c.x,c.y)}),this.canvasRenderer.z=0,r.modelMatrix!==u&&s.yp.free(r.modelMatrix),r.modelMatrix=u,r.highPerformanceRestore(),d}}},55082:function(t,e,i){"use strict";i.d(e,{o:()=>n});var r=i(33880);class n{contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode||!this.canvasRenderer)return!0;let{pickContext:n}=null!=i?i:{};if(!n)return!1;let s=t.getGraphicTheme();n.highPerformanceSave();let{x:a=s.x,y:o=s.y}=t.attribute;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(s);a+=e.x,o+=e.y,n.setTransformForCurrent()}else a=0,o=0,n.transformFromMatrix(t.transMatrix,!0);let l=!1,h=!1;return this.canvasRenderer.drawShape(t,n,a,o,{},null,(t,i,r,n)=>!(!l&&!h)||(l=t.isPointInPath(e.x,e.y),h=n||h,l),(t,i,s,a)=>{if(l||h)return!0;let o=i.lineWidth||s.lineWidth,u=i.pickStrokeBuffer||s.pickStrokeBuffer;return n.lineWidth=i.keepStrokeScale||s.keepStrokeScale?o+u:(0,r.D)(n,o+u,n.dpr),l=t.isPointInStroke(e.x,e.y),h=a||h,l}),n.highPerformanceRestore(),l}}},57355:function(t,e,i){"use strict";i.d(e,{EL:()=>A,ES:()=>m,Ex:()=>l,RC:()=>b,Rz:()=>g,Sp:()=>x,TF:()=>v,XN:()=>r,Yr:()=>u,ZY:()=>w,cs:()=>a,e_:()=>p,g2:()=>o,ks:()=>y,nb:()=>h,p1:()=>c,pE:()=>S,t3:()=>n,uV:()=>d,ww:()=>_,xp:()=>s,zT:()=>f});let r=Symbol.for("MathPickerContribution"),n=Symbol.for("MathArcPicker");Symbol.for("MathAreaPicker");let s=Symbol.for("MathCirclePicker"),a=Symbol.for("MathImagePicker"),o=Symbol.for("MathLinePicker"),l=Symbol.for("MathPathPicker"),h=Symbol.for("MathRectPicker"),u=Symbol.for("MathSymbolPicker"),c=Symbol.for("MathTextPicker"),d=Symbol.for("MathPolygonPicker");Symbol.for("MathGlyphPicker");let p=Symbol.for("CanvasArcPicker");Symbol.for("CanvasArc3dPicker"),Symbol.for("CanvasAreaPicker");let f=Symbol.for("CanvasCirclePicker"),g=Symbol.for("CanvasImagePicker");Symbol.for("CanvasGifImagePicker");let m=Symbol.for("CanvasLinePicker");Symbol.for("CanvasLottiePicker");let y=Symbol.for("CanvasPathPicker"),v=Symbol.for("CanvasRectPicker");Symbol.for("CanvasRect3dPicker");let b=Symbol.for("CanvasSymbolPicker"),x=Symbol.for("CanvasTextPicker"),_=Symbol.for("CanvasPolygonPicker");Symbol.for("CanvasPyramid3dPicker");let w=Symbol.for("CanvasRichTextPicker");Symbol.for("CanvasGlyphPicker");let S=Symbol.for("CanvasGroupPicker");Symbol.for("CanvasStarPicker");let A=Symbol.for("CanvasPickerContribution")},52632:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(10773),n=i(34865);let s=class{constructor(){this.type="image",this.numberType=r.PN}contains(t,e,i){let{pickContext:r}=null!=i?i:{};return!!r&&!!t.AABBBounds.containsPoint(e)}};s=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,n.b)()],s)},66417:function(t,e,i){"use strict";i.d(e,{X:()=>r});let r=(0,i(89495).kP)()},68825:function(t,e,i){"use strict";i.d(e,{x:()=>H});var r,n,s=i(638),a=i(66987),o=i(34505),l=i(77909),h=i(22415),u=i(8830),c=i(63778),d=i(34865),p=i(26845),f=i(47816),g=i(17852),m=i(19626),y=i(4928),v=i(57852),b=i(13922),x=i(10773),_=i(75946),w=i(33880),S=i(89677),A=i(97708),C=i(60865);let D=new class{constructor(){this.time=A.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,a,o,l,h,u,c){let{outerBorder:d,innerBorder:p}=t.attribute,f=d&&!1!==d.visible,g=p&&!1!==p.visible;if(!f&&!g)return;let{innerPadding:m=l.innerPadding,outerPadding:v=l.outerPadding,startAngle:b=l.startAngle,endAngle:x=l.endAngle,opacity:_=l.opacity,x:S=l.x,y:A=l.y,scaleX:C=l.scaleX,scaleY:D=l.scaleY,keepStrokeScale:T=l.keepStrokeScale}=t.attribute,{innerRadius:B=l.innerRadius,outerRadius:M=l.outerRadius}=t.attribute;M+=v,B-=m;let E=(n,s)=>{let a=!(!n||!n.stroke),{distance:o=l[s].distance}=n,h=T?o:(0,w.D)(e,o,e.dpr),u=o/M,d="outerBorder"===s?1:-1;if(t.setAttributes({outerRadius:M+d*h,innerRadius:B-d*h,startAngle:b-d*u,endAngle:x+d*u}),e.beginPath(),(0,y.Eg)(t,e,i,r,M+d*h,B-d*h),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),c)c(e,n,l[s]);else if(a){let a=l[s].opacity;l[s].opacity=_,e.setStrokeStyle(t,n,(S-i)/C,(A-r)/D,l[s]),l[s].opacity=a,e.stroke()}};f&&E(d,"outerBorder"),g&&E(p,"innerBorder"),t.setAttributes({outerRadius:M,innerRadius:B,startAngle:b,endAngle:x})}},T=C.H,B=S.R6;var M=function(t,e){return function(i,r){e(i,r,t)}};let E=class extends _.Y{constructor(t){super(),this.graphicRenderContributions=t,this.numberType=x.r_,this.builtinContributions=[D,B,T],this.init(t)}drawArcTailCapPath(t,e,i,r,n,s,a,o){let l=o-a,h=t.getParsedAngle(),c=h.startAngle,d=h.endAngle;d=o,(0,u.Wn)(d-c);let p=d>c,f=!1;if(n<s){let t=n;n=s,s=t}let{outerDeltaAngle:g,xors:m,yors:v,xirs:b,yirs:x,limitedOcr:_,outerCornerRadiusStart:w,outerCornerRadiusEnd:S,maxOuterCornerRadius:A,xore:C,yore:D,xire:T,yire:B,limitedIcr:M,innerDeltaAngle:E,innerStartAngle:k,innerCornerRadiusStart:F,innerCornerRadiusEnd:R,maxInnerCornerRadius:P}=(0,y.ZN)(t,c,d,s,n);if(_>u.Ho){let t=(0,u.VV)(w,_),s=(0,u.VV)(S,_),a=(0,y.gI)(b,x,m,v,n,t,Number(p)),o=(0,y.gI)(C,D,T,B,n,s,Number(p));if(_<A&&t===s)e.moveTo(i+a.cx+a.x01,r+a.cy+a.y01),e.arc(i+a.cx,r+a.cy,_,(0,u.fv)(a.y01,a.x01),(0,u.fv)(o.y01,o.x01),!p);else{let t=d-l-.03,a=(0,u.fv)(o.y11,o.x11);e.arc(i,r,n,t,a,!p),s>0&&e.arc(i+o.cx,r+o.cy,s,(0,u.fv)(o.y11,o.x11),(0,u.fv)(o.y01,o.x01),!p)}}else e.moveTo(i+m,r+v);if(!(s>u.Ho)||E<.001)e.lineTo(i+T,r+B),f=!0;else if(M>u.Ho){let t=(0,u.VV)(F,M),n=(0,u.VV)(R,M),a=(0,y.gI)(T,B,C,D,s,-n,Number(p)),o=(0,y.gI)(m,v,b,x,s,-t,Number(p));if(e.lineTo(i+a.cx+a.x01,r+a.cy+a.y01),M<P&&t===n){let t=(0,u.fv)(o.y01,o.x01);e.arc(i+a.cx,r+a.cy,M,(0,u.fv)(a.y01,a.x01),t,!p)}else{n>0&&e.arc(i+a.cx,r+a.cy,n,(0,u.fv)(a.y01,a.x01),(0,u.fv)(a.y11,a.x11),!p);let t=(0,u.fv)(a.cy+a.y11,a.cx+a.x11),o=d-l-.03;e.arc(i,r,s,t,o,p)}}else e.lineTo(i+s*(0,u.mC)(k),r+s*(0,u.O$)(k));return f}drawShape(t,e,i,r,n,s,a,o,l){l=null!=l?l:(0,g.gh)(t,null==s?void 0:s.theme).arc;let{fill:h=l.fill,stroke:d=l.stroke,x:p=l.x,y:f=l.y,fillStrokeOrder:b=l.fillStrokeOrder}=t.attribute,x=this.valid(t,l,a,o);if(!x)return;let{fVisible:_,sVisible:w,doFill:S,doStroke:A}=x,{outerPadding:C=l.outerPadding,innerPadding:D=l.innerPadding,cap:T=l.cap,forceShowCap:B=l.forceShowCap}=t.attribute,{outerRadius:M=l.outerRadius,innerRadius:E=l.innerRadius}=t.attribute;M+=C,E-=D;let k=0,F=((0,c.Z)(T)&&T||T[0])&&"conical"===h.gradient;if(F){let{sc:e,startAngle:i,endAngle:r}=t.getParsedAngle();(0,u.Wn)(r-i)<u.f7-u.Ho&&(k=e||0,h.startAngle-=k,h.endAngle-=k)}let R=!1,{isFullStroke:P,stroke:O}=(0,m.Dn)(d);if((S||P)&&(e.beginPath(),(0,y.Eg)(t,e,i,r,M,E),R=!0,e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,i,r,S,A,_,w,l,n,a,o),b?(this._runStroke(t,e,i,r,l,A,P,w,o),this._runFill(t,e,i,r,l,S,_,p,f,a)):(this._runFill(t,e,i,r,l,S,_,p,f,a),this._runStroke(t,e,i,r,l,A,P,w,o))),!P&&A&&(e.beginPath(),(0,y.Eg)(t,e,i,r,M,E,O),R||this.beforeRenderStep(t,e,i,r,S,A,_,w,l,n,a,o),o?o(e,t.attribute,l):w&&(e.setStrokeStyle(t,t.attribute,i,r,l),e.stroke())),((0,c.Z)(T)&&T||T[1])&&B){let{startAngle:s,endAngle:h}=t.getParsedAngle();if((0,u.Wn)(h-s)>=u.f7-u.Ho){e.beginPath();let s=Math.abs(M-E)/2/M,{endAngle:h=l.endAngle,fill:u=l.fill}=t.attribute;this.drawArcTailCapPath(t,e,i,r,M,E,h,h+s),R||this.beforeRenderStep(t,e,i,r,S,A,_,w,l,n,a,o),(()=>{if(S&&"conical"===u.gradient){let n=(0,v.MB)(0,0,h,u);a||y.Bv&&(e.setCommonStyle(t,t.attribute,i,r,l),e.fillStyle=n,e.fill())}})(),A&&(o||w&&(e.setStrokeStyle(t,t.attribute,i,r,l),e.stroke()))}}this.afterRenderStep(t,e,i,r,S,A,_,w,l,n,a,o),F&&(h.startAngle+=k,h.endAngle+=k)}_runFill(t,e,i,r,n,s,a,o,l,h){s&&(h?h(e,t.attribute,n):a&&(e.setCommonStyle(t,t.attribute,o-i,l-r,n),e.fill()))}_runStroke(t,e,i,r,n,s,a,o,l){s&&a&&(l?l(e,t.attribute,n):o&&(e.setStrokeStyle(t,t.attribute,i,r,n),e.stroke()))}draw(t,e,i,r){let n=(0,g.gh)(t,null==r?void 0:r.theme).arc;this._draw(t,n,!1,i,r,n)}};E=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,d.b)(),M(0,(0,p.f)(l.Qc)),M(0,(0,f.t)(b.OL)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],E);var k=i(32227);let F=!1,R=new h.n(t=>{F||(F=!0,t(E).toSelf().inSingletonScope(),t(k.Xe).to(E).inSingletonScope(),t(k.uz).toService(k.Xe),t(b.OL).toService(S.Sg),(0,l.yb)(t,b.OL))});var P=i(66417),O=i(55082);let L=class extends O.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=x.r_}};L=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,d.b)(),(r=(0,p.f)(k.Xe),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],L);var I=i(57355);let z=!1,Z=new h.n((t,e,i,r)=>{z||(z=!0,t(I.e_).to(L).inSingletonScope(),t(I.EL).toService(I.e_))}),j=class extends O.o{constructor(t){super(),this.canvasRenderer=t,this.type="arc",this.numberType=x.r_}};j=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,d.b)(),(n=(0,p.f)(k.Xe),function(t,e){n(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],j);let W=!1,U=new h.n((t,e,i,r)=>{W||(W=!0,t(I.t3).to(j).inSingletonScope(),t(I.XN).toService(I.t3))});function N(){N.__loaded||(N.__loaded=!0,a.i.RegisterGraphicCreator("arc",s.Q),o.n.load(R),o.n.load(P.X?Z:U))}N.__loaded=!1;let H=N},76401:function(t,e,i){"use strict";i.d(e,{f:()=>Z});var r,n,s=i(24217),a=i(66987),o=i(34505),l=i(77909),h=i(22415),u=i(34865),c=i(26845),d=i(47816),p=i(17852),f=i(10773),g=i(13922),m=i(75946),y=i(33880),v=i(89677),b=i(97708),x=i(60865);let _=new class{constructor(){this.time=b.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,a,o,l,h,u,c){let{outerBorder:d,innerBorder:p}=t.attribute,f=d&&!1!==d.visible,g=p&&!1!==p.visible;if(!f&&!g)return;let{radius:m=l.radius,startAngle:v=l.startAngle,endAngle:b=l.endAngle,opacity:x=l.opacity,x:_=l.x,y:w=l.y,scaleX:S=l.scaleX,scaleY:A=l.scaleY,keepStrokeScale:C=l.keepStrokeScale}=t.attribute,D=(n,s)=>{let a=!(!n||!n.stroke),{distance:o=l[s].distance}=n,h=C?o:(0,y.D)(e,o,e.dpr);if(e.beginPath(),e.arc(i,r,m+("outerBorder"===s?1:-1)*h,v,b),e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),c)c(e,n,l[s]);else if(a){let a=l[s].opacity;l[s].opacity=x,e.setStrokeStyle(t,n,(_-i)/S,(w-r)/A,l[s]),l[s].opacity=a,e.stroke()}};f&&D(d,"outerBorder"),g&&D(p,"innerBorder")}},w=x.H,S=v.R6;var A=function(t,e){return function(i,r){e(i,r,t)}};let C=class extends m.Y{constructor(t){super(),this.graphicRenderContributions=t,this.numberType=f.Aw,this.builtinContributions=[_,S,w],this.init(t)}drawShape(t,e,i,r,n,s,a,o){let l=(0,p.gh)(t,null==s?void 0:s.theme).circle,{radius:h=l.radius,startAngle:u=l.startAngle,endAngle:c=l.endAngle,x:d=l.x,y:f=l.y,fillStrokeOrder:g=l.fillStrokeOrder}=t.attribute,m=this.valid(t,l,a,o);if(!m)return;let{fVisible:y,sVisible:v,doFill:b,doStroke:x}=m;e.beginPath(),e.arc(i,r,h,u,c),e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,i,r,b,x,y,v,l,n,a,o);let _=()=>{b&&(a?a(e,t.attribute,l):y&&(e.setCommonStyle(t,t.attribute,d-i,f-r,l),e.fill()))},w=()=>{x&&(o?o(e,t.attribute,l):v&&(e.setStrokeStyle(t,t.attribute,d-i,f-r,l),e.stroke()))};g?(w(),_()):(_(),w()),this.afterRenderStep(t,e,i,r,b,x,y,v,l,n,a,o)}draw(t,e,i,r){let n=(0,p.gh)(t,null==r?void 0:r.theme).circle;this._draw(t,n,!1,i,r)}};C=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,u.b)(),A(0,(0,c.f)(l.Qc)),A(0,(0,d.t)(g.Cs)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],C);var D=i(32227);let T=!1,B=new h.n(t=>{T||(T=!0,t(C).toSelf().inSingletonScope(),t(D.aP).to(C).inSingletonScope(),t(D.uz).toService(D.aP),t(g.Cs).toService(v.Sg),(0,l.yb)(t,g.Cs))});var M=i(66417),E=i(57355),k=i(55082);let F=class extends k.o{constructor(t){super(),this.canvasRenderer=t,this.type="circle",this.numberType=f.Aw}};F=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,u.b)(),(r=(0,c.f)(D.aP),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],F);let R=!1,P=new h.n((t,e,i,r)=>{R||(R=!0,t(E.zT).to(F).inSingletonScope(),t(E.EL).toService(E.zT))}),O=class extends k.o{constructor(t){super(),this.canvasRenderer=t,this.type="circle",this.numberType=f.Aw}};O=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,u.b)(),(n=(0,c.f)(D.aP),function(t,e){n(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],O);let L=!1,I=new h.n((t,e,i,r)=>{L||(L=!0,t(E.xp).to(O).inSingletonScope(),t(E.XN).toService(E.xp))});function z(){z.__loaded||(z.__loaded=!0,a.i.RegisterGraphicCreator("circle",s.y),o.n.load(B),o.n.load(M.X?P:I))}z.__loaded=!1;let Z=z},11511:function(t,e,i){"use strict";i.d(e,{M:()=>a});var r=i(8849),n=i(66987);function s(){s.__loaded||(s.__loaded=!0,n.i.RegisterGraphicCreator("group",r.sS))}s.__loaded=!1;let a=s},29922:function(t,e,i){"use strict";i.d(e,{i:()=>U});var r,n=i(50074),s=i(66987),a=i(34505),o=i(77909),l=i(22415),h=i(89677),u=i(13922),c=i(34865),d=i(26845),p=i(47816),f=i(17852),g=i(10773),m=i(95723),y=i(83624),v=i(90383),b=i(75946),x=i(97708),_=i(3570);class w extends _.sH{constructor(){super(...arguments),this.time=x.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,a,o,l,h,u,c){return super.drawShape(t,e,i,r,n,s,a,o,l,h,u,c)}}let S=new w,A=h.R6;var C=i(84453),D=function(t,e){return function(i,r){e(i,r,t)}};let T=["","repeat-x","repeat-y","repeat"],B=class extends b.Y{constructor(t){super(),this.graphicRenderContributions=t,this.numberType=g.PN,this.builtinContributions=[S,A],this.init(t)}drawShape(t,e,i,r,n,s,a,o){let l=(0,f.gh)(t).image,{repeatX:h=l.repeatX,repeatY:u=l.repeatY,x:c=l.x,y:d=l.y,cornerRadius:p=l.cornerRadius,fillStrokeOrder:g=l.fillStrokeOrder,cornerType:y=l.cornerType,image:b}=t.attribute,x=this.valid(t,l,a);if(!x)return;let{fVisible:_,sVisible:w,doFill:S,doStroke:A}=x;if(!b||!t.resources)return;let C=t.resources.get(b);if("success"!==C.state)return;let D=t.width,B=t.height;e.beginPath();let M=!1;0===p||(0,m.Z)(p)&&p.every(t=>0===t)?e.rect(i,r,D,B):((0,v.U)(e,i,r,D,B,p,"bevel"!==y),M=!0),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l);let E=()=>{if(S){if(a)a(e,t.attribute,l);else if(_){e.setCommonStyle(t,t.attribute,i,r,l);let n=0;if("repeat"===h&&(n|=1),"repeat"===u&&(n|=2),n){let t=e.createPattern(C.data,T[n]);e.fillStyle=t,e.translate(i,r,!0),e.fillRect(0,0,D,B),e.translate(-i,-r,!0)}else e.drawImage(C.data,i,r,D,B)}}},k=()=>{A&&(o?o(e,t.attribute,l):w&&(e.setStrokeStyle(t,t.attribute,c-i,d-r,l),e.stroke()))};g?(k(),M&&(e.save(),e.clip()),this.beforeRenderStep(t,e,i,r,S,!1,_,!1,l,n,a),E(),M&&e.restore()):(M&&(e.save(),e.clip()),this.beforeRenderStep(t,e,i,r,S,!1,_,!1,l,n,a),E(),M&&e.restore(),k()),this.afterRenderStep(t,e,i,r,S,!1,_,!1,l,n,a)}draw(t,e,i){let{image:r}=t.attribute;if(!r||!t.resources)return;let n=t.resources.get(r);if("loading"===n.state&&(0,y.Z)(r))return void C.h.improveImageLoading(r);if("success"!==n.state)return;let{context:s}=e.drawParams;if(!s)return;let a=(0,f.gh)(t).image;this._draw(t,a,!1,i)}};B=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),D(0,(0,d.f)(o.Qc)),D(0,(0,p.t)(u.JO)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],B);var M=i(32227);let E=!1,k=new l.n(t=>{E||(E=!0,t(M.e0).to(B).inSingletonScope(),t(M.uz).toService(M.e0),t(u.JO).toService(h.Sg),(0,o.yb)(t,u.JO))});var F=i(66417),R=i(57355),P=i(55082);let O=class extends P.o{constructor(t){super(),this.canvasRenderer=t,this.type="image",this.numberType=g.PN}};O=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,c.b)(),(r=(0,d.f)(M.e0),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],O);let L=!1,I=new l.n((t,e,i,r)=>{L||(L=!0,t(R.Rz).to(O).inSingletonScope(),t(R.EL).toService(R.Rz))});var z=i(52632);let Z=!1,j=new l.n((t,e,i,r)=>{Z||(Z=!0,t(R.cs).to(z.Z).inSingletonScope(),t(z.Z).toService(R.cs))});function W(){W.__loaded||(W.__loaded=!0,s.i.RegisterGraphicCreator("image",n.B),a.n.load(k),a.n.load(F.X?I:j))}W.__loaded=!1;let U=W},67286:function(t,e,i){"use strict";i.d(e,{N:()=>B});var r,n,s=i(9252),a=i(66987),o=i(34505),l=i(22415),h=i(48206),u=i(86977),c=i(32227);let d=!1,p=new l.n(t=>{d||(d=!0,t(u.X).toSelf().inSingletonScope(),t(h.U).toSelf().inSingletonScope(),t(c.O).to(u.X).inSingletonScope(),t(c.uz).toService(c.O))});var f=i(66417),g=i(57355),m=i(10773),y=i(34865),v=i(26845),b=i(26984);let x=class extends b.Q{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=m.Hf}};x=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,y.b)(),(r=(0,v.f)(c.O),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],x);let _=!1,w=new l.n((t,e,i,r)=>{_||(_=!0,t(g.ES).to(x).inSingletonScope(),t(g.EL).toService(g.ES))});var S=i(55082);let A=class extends S.o{constructor(t){super(),this.canvasRenderer=t,this.type="line",this.numberType=m.Hf}};A=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,y.b)(),(n=(0,v.f)(c.O),function(t,e){n(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],A);let C=!1,D=new l.n((t,e,i,r)=>{C||(C=!0,t(g.g2).to(A).inSingletonScope(),t(g.XN).toService(g.g2))});function T(){T.__loaded||(T.__loaded=!0,a.i.RegisterGraphicCreator("line",s.W),o.n.load(p),o.n.load(f.X?w:D))}T.__loaded=!1;let B=T},99754:function(t,e,i){"use strict";i.d(e,{k:()=>W});var r,n,s=i(22288),a=i(66987),o=i(34505),l=i(77909),h=i(22415),u=i(3570),c=i(89677),d=i(13922),p=i(95723),f=i(34865),g=i(26845),m=i(47816),y=i(17852),v=i(10773),b=i(90383),x=i(4928),_=i(75946),w=function(t,e){return function(i,r){e(i,r,t)}};let S=class extends _.Y{constructor(t){super(),this.graphicRenderContributions=t,this.type="rect",this.numberType=v._u,this.builtinContributions=[u.NB,u.gq,u.k7],this.init(t)}drawShape(t,e,i,r,n,s,a,o,l){l=null!=l?l:(0,y.gh)(t,null==s?void 0:s.theme).rect;let{fill:h=l.fill,background:u,stroke:c=l.stroke,cornerRadius:d=l.cornerRadius,cornerType:f=l.cornerType,opacity:g=l.opacity,fillOpacity:m=l.fillOpacity,lineWidth:v=l.lineWidth,strokeOpacity:_=l.strokeOpacity,visible:w=l.visible,x1:S,y1:A,x:C=l.x,y:D=l.y,fillStrokeOrder:T=l.fillStrokeOrder,drawStrokeWhenZeroWH:B=l.drawStrokeWhenZeroWH}=t.attribute,{width:M,height:E}=t.attribute;M=(null!=M?M:S-C)||0,E=(null!=E?E:A-D)||0;let k=(0,x.GT)(g,m,M,E,h),F=(0,x.Ze)(g,_,M,E,B),R=(0,x.dz)(h,u),P=(0,x.ak)(c,v);if(!t.valid||!w||!R&&!P||!(k||F||a||o||u))return;0===d||(0,p.Z)(d)&&d.every(t=>0===t)?(e.beginPath(),e.rect(i,r,M,E)):(e.beginPath(),(0,b.U)(e,i,r,M,E,d,"bevel"!==f));let O={doFill:R,doStroke:P};e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,i,r,R,P,k,F,l,n,a,o,O),T?(this._runStroke(t,e,i,r,l,O,F,C,D,o),this._runFill(t,e,i,r,l,O,k,C,D,a)):(this._runFill(t,e,i,r,l,O,k,C,D,a),this._runStroke(t,e,i,r,l,O,F,C,D,o)),this.afterRenderStep(t,e,i,r,R,P,k,F,l,n,a,o)}_runFill(t,e,i,r,n,s,a,o,l,h){s.doFill&&(h?h(e,t.attribute,n):a&&(e.setCommonStyle(t,t.attribute,o-i,l-r,n),e.fill()))}_runStroke(t,e,i,r,n,s,a,o,l,h){s.doStroke&&(h?h(e,t.attribute,n):a&&(e.setStrokeStyle(t,t.attribute,o-i,l-r,n),e.stroke()))}draw(t,e,i,r){let n=(0,y.gh)(t,null==r?void 0:r.theme).rect;this._draw(t,n,!1,i,r,n)}};S=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,f.b)(),w(0,(0,g.f)(l.Qc)),w(0,(0,m.t)(d.d5)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],S);var A=i(32227);let C=!1,D=new h.n(t=>{C||(C=!0,t(S).toSelf().inSingletonScope(),t(A.Uj).to(S).inSingletonScope(),t(A.uz).toService(A.Uj),t(u.Er).toSelf(),t(u.d4).toSelf(),t(d.d5).toService(u.Er),t(d.d5).toService(u.d4),t(d.d5).toService(c.Sg),(0,l.yb)(t,d.d5))});var T=i(66417),B=i(57355),M=i(63401),E=i(4654),k=i(33880);let F=new M.FB;class R{constructor(){this.type="rect",this.numberType=v._u}contains(t,e,i){if(!t.AABBBounds.containsPoint(e))return!1;if("imprecise"===t.attribute.pickMode)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=t.getGraphicTheme(),{cornerRadius:s=n.cornerRadius}=t.attribute,{x:a=n.x,y:o=n.y}=t.attribute;r.highPerformanceSave();let l=!0;if(t.transMatrix.onlyTranslate()){let e=t.getOffsetXY(n);a+=e.x,o+=e.y,r.setTransformForCurrent()}else a=0,o=0,l=!1,r.transformFromMatrix(t.transMatrix,!0);let h=!0;if(!l||t.shadowRoot||(0,E.Z)(s,!0)&&0!==s||(0,p.Z)(s)&&s.some(t=>0!==t))h=!1,this.canvasRenderer.drawShape(t,r,a,o,{},null,(t,i,r)=>!!h||(h=t.isPointInPath(e.x,e.y)),(t,i,n)=>{if(h)return!0;let s=i.lineWidth||n.lineWidth,a=i.pickStrokeBuffer||n.pickStrokeBuffer;return r.lineWidth=i.keepStrokeScale||n.keepStrokeScale?s+a:(0,k.D)(r,s+a,r.dpr),h=t.isPointInStroke(e.x,e.y)});else{let{fill:i=n.fill,stroke:r=n.stroke,lineWidth:s=n.lineWidth}=t.attribute;if(i)h=!0;else if(r){let i=t.AABBBounds;F.setValue(i.x1,i.y1,i.x2,i.y2),F.expand(-s/2),h=!F.containsPoint(e)}}return r.highPerformanceRestore(),h}}let P=class extends R{constructor(t){super(),this.canvasRenderer=t}};P=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,f.b)(),(r=(0,g.f)(A.Uj),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],P);let O=!1,L=new h.n((t,e,i,r)=>{O||(O=!0,t(B.TF).to(P).inSingletonScope(),t(B.EL).toService(B.TF))}),I=class extends R{constructor(t){super(),this.canvasRenderer=t}};I=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,f.b)(),(n=(0,g.f)(A.Uj),function(t,e){n(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],I);let z=!1,Z=new h.n((t,e,i,r)=>{z||(z=!0,t(B.nb).to(I).inSingletonScope(),t(B.XN).toService(B.nb))});function j(){j.__loaded||(j.__loaded=!0,a.i.RegisterGraphicCreator("rect",s.f),o.n.load(D),o.n.load(T.X?L:Z))}j.__loaded=!1;let W=j},74512:function(t,e,i){"use strict";i.d(e,{v:()=>M});var r,n=i(47634),s=i(66987),a=i(34505),o=i(22415),l=i(34865),h=i(90383),u=i(17852),c=i(10773),d=i(4928),p=i(75946),f=i(10641);let g=class extends p.Y{constructor(){super(),this.numberType=c.$M,this.builtinContributions=[f.C],this.init()}drawShape(t,e,i,r,n){let s=(0,u.gh)(t).richtext,{strokeOpacity:a=s.strokeOpacity,opacity:o=s.opacity,fillOpacity:l=s.fillOpacity,visible:h=s.visible}=t.attribute;if(!t.valid||!h)return;let c=(0,d.Bv)(o,l,!0),p=(0,d.Bv)(o,a,!0);c&&(e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,s),e.translate(i,r),this.beforeRenderStep(t,e,i,r,c,p,c,p,s,n),t.getFrameCache().draw(e,this.drawIcon),this.afterRenderStep(t,e,i,r,c,p,c,p,s,n))}drawIcon(t,e,i,r,n){var s;let a=(0,u.gh)(t).richtextIcon,{width:o=a.width,height:l=a.height,opacity:c=a.opacity,image:d,backgroundFill:p=a.backgroundFill,backgroundFillOpacity:f=a.backgroundFillOpacity,backgroundStroke:g=a.backgroundStroke,backgroundStrokeOpacity:m=a.backgroundStrokeOpacity,backgroundRadius:y=a.backgroundRadius,margin:v}=t.attribute,{backgroundWidth:b=o,backgroundHeight:x=l}=t.attribute;if(v&&(i+=t._marginArray[3],r+=t._marginArray[0]),t._hovered){let t=(b-o)/2,n=(x-l)/2;0===y?(e.beginPath(),e.rect(i-t,r-n,b,x)):(e.beginPath(),(0,h.U)(e,i-t,r-n,b,x,y,!0)),p&&(e.globalAlpha=f,e.fillStyle=p,e.fill()),g&&(e.globalAlpha=m,e.strokeStyle=g,e.stroke())}let _=d&&(null==(s=null==t?void 0:t.resources)?void 0:s.get(d));_&&"success"===_.state&&(e.globalAlpha=c,e.drawImage(_.data,i,r,o,l))}draw(t,e,i){let r=(0,u.gh)(t).richtext;this._draw(t,r,!1,i)}};g=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[])],g);var m=i(32227);let y=!1,v=new o.n(t=>{y||(y=!0,t(m.fS).to(g).inSingletonScope(),t(m.uz).toService(m.fS))});var b=i(66417),x=i(57355),_=i(26845);let w=class{constructor(t){this.canvasRenderer=t,this.type="richtext",this.numberType=c.$M}contains(t,e,i){return!!t.AABBBounds.containsPoint(e)}};w=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,l.b)(),(r=(0,_.f)(m.fS),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],w);let S=!1,A=new o.n((t,e,i,r)=>{S||(S=!0,t(x.ZY).to(w).inSingletonScope(),t(x.EL).toService(x.ZY))});var C=i(52632);let D=!1,T=new o.n((t,e,i,r)=>{D||(D=!0,t(x.cs).to(C.Z).inSingletonScope(),t(C.Z).toService(x.cs))});function B(){B.__loaded||(B.__loaded=!0,s.i.RegisterGraphicCreator("richtext",n.p),a.n.load(v),a.n.load(b.X?A:T))}B.__loaded=!1;let M=B},66994:function(t,e,i){"use strict";i.d(e,{W:()=>l});var r=i(8849);class n extends r.ZA{constructor(t){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=t}clearUpdateBoundTag(){super.clearUpdateBoundTag(),this.shadowHost&&this.shadowHost.clearUpdateBoundTag()}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(t=!0){if(this.shouldUpdateGlobalMatrix()){let e=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f):this._globalTransMatrix=e.clone(),this.doUpdateGlobalMatrix(),t&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){let t=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(t.a,t.b,t.c,t.d,t.e,t.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}function s(t){return new n(t)}var a=i(66987);function o(){o.__loaded||(o.__loaded=!0,a.i.RegisterGraphicCreator("shadowRoot",s))}o.__loaded=!1;let l=o},16636:function(t,e,i){"use strict";i.d(e,{k:()=>N});var r,n,s=i(78503),a=i(66987),o=i(34505),l=i(77909),h=i(22415),u=i(89677),c=i(13922),d=i(32227),p=i(34865),f=i(26845),g=i(47816),m=i(17852),y=i(10773),v=i(75946),b=i(95723),x=i(33880),_=i(97708),w=i(60865);let S=new class{constructor(){this.time=_.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,a,o,l,h,u,c){let d=t.getParsedPath();if(!d)return;let{outerBorder:p,innerBorder:f}=t.attribute,g=p&&!1!==p.visible,m=f&&!1!==f.visible;if(!g&&!m)return;let{size:y=l.size,opacity:v=l.opacity,x:b=l.x,y:_=l.y,scaleX:w=l.scaleX,scaleY:S=l.scaleY,keepStrokeScale:A=l.keepStrokeScale}=t.attribute,C=(n,s)=>{let a=!(!n||!n.stroke),{distance:o=l[s].distance}=n,h=A?o:(0,x.D)(e,o,e.dpr);if(e.beginPath(),!1===d.drawOffset(e,y,i,r,("outerBorder"===s?1:-1)*h)&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),c)c(e,n,l[s]);else if(a){let a=l[s].opacity;l[s].opacity=v,e.setStrokeStyle(t,n,(b-i)/w,(_-r)/S,l[s]),l[s].opacity=a,e.stroke()}};g&&C(p,"outerBorder"),m&&C(f,"innerBorder")}},A=new class{constructor(){this.time=_.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(t,e,i,r,n,s,a,o,l,h,u,c,d){let{clipRange:p=l.clipRange,x:f=l.x,y:g=l.y,z:m=l.z,size:y=l.size,scaleX:v=l.scaleX,scaleY:b=l.scaleY}=t.attribute,x=t.getParsedPath();x&&p<1&&p>0&&(e.beginPath(),x.drawWithClipRange&&x.drawWithClipRange(e,y,i,r,p,m,(n,s)=>{var a,h,u,d;if(t._parsedPath.svgCache){let e=Object.assign({},s);e.fill=null!=(a=s.fill)?a:t.attribute.fill,e.opacity=null!=(h=s.opacity)?h:t.attribute.opacity,e.fillOpacity=t.attribute.fillOpacity,e.stroke=null!=(u=s.stroke)?u:t.attribute.stroke,e.lineWidth=null!=(d=s.lineWidth)?d:t.attribute.lineWidth,s=e}s.stroke&&(c?c(e,t.attribute,l):o&&(e.setStrokeStyle(t,s,(f-i)/v,(g-r)/b,l),e.stroke()))}),s&&!x.isSvg&&(c?c(e,t.attribute,l):o&&(e.setStrokeStyle(t,t.attribute,(f-i)/v,(g-r)/b,l),e.stroke())))}},C=w.H,D=u.R6;var T=function(t,e){return function(i,r){e(i,r,t)}};let B=class extends v.Y{constructor(t){super(),this.graphicRenderContributions=t,this.numberType=y.B5,this.builtinContributions=[S,D,C,A],this.init(t)}drawShape(t,e,i,r,n,s,a,o,l){var h;l=null!=l?l:(0,m.gh)(t,null==s?void 0:s.theme).symbol;let{size:u=l.size,x:c=l.x,y:d=l.y,scaleX:p=l.scaleX,scaleY:f=l.scaleY,fillStrokeOrder:g=l.fillStrokeOrder,clipRange:y=l.clipRange}=t.attribute,v=this.valid(t,l,a,o);if(!v)return;let{fVisible:x,sVisible:_,doFill:w,doStroke:S}=v,A=t.getParsedPath();if(!A)return;let{keepDirIn3d:C=l.keepDirIn3d}=t.attribute,D=null!=(h=this.z)?h:0;e.beginPath();let T=i,B=r,M=D,E=e.camera;if(C&&E&&e.project){let t=e.project(i,r,D);e.camera=null,(0,b.Z)(u)&&(u[0],u[1]),T=t.x,B=t.y,M=void 0}!1===A.draw(e,u,T,B,M,(n,s)=>{var h,u,m,v;if(t._parsedPath.svgCache){let e=Object.assign({},s);e.fill=null!=(h=s.fill)?h:t.attribute.fill,e.opacity=null!=(u=s.opacity)?u:t.attribute.opacity,e.fillOpacity=t.attribute.fillOpacity,e.stroke=null!=(m=s.stroke)?m:t.attribute.stroke,e.lineWidth=null!=(v=s.lineWidth)?v:t.attribute.lineWidth,s=e}let b=()=>{s.fill&&(a?a(e,t.attribute,l):(e.setCommonStyle(t,s,c-i,d-r,l),e.fill()))},x=()=>{s.stroke&&(o?o(e,t.attribute,l):_&&y>=1&&(e.setStrokeStyle(t,s,(c-i)/p,(d-r)/f,l),e.stroke()))};g?(x(),b()):(b(),x())})&&e.closePath(),e.camera=E,e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,l),this.beforeRenderStep(t,e,i,r,w,S,x,_,l,n,a,o),g?(this._runStroke(t,e,i,r,l,S,_,c,d,A,y,p,f,o),this._runFill(t,e,i,r,l,w,x,c,d,A,a)):(this._runFill(t,e,i,r,l,w,x,c,d,A,a),this._runStroke(t,e,i,r,l,S,_,c,d,A,y,p,f,o)),this.afterRenderStep(t,e,i,r,w,S,x,_,l,n,a,o)}_runFill(t,e,i,r,n,s,a,o,l,h,u){s&&!h.isSvg&&(u?u(e,t.attribute,n):a&&(e.setCommonStyle(t,t.attribute,o-i,l-r,n),e.fill()))}_runStroke(t,e,i,r,n,s,a,o,l,h,u,c,d,p){s&&!h.isSvg&&(p?p(e,t.attribute,n):a&&u>=1&&(e.setStrokeStyle(t,t.attribute,(o-i)/c,(l-r)/d,n),e.stroke()))}draw(t,e,i,r){let n=(0,m.gh)(t,null==r?void 0:r.theme).symbol;this._draw(t,n,!1,i,r)}};B=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),T(0,(0,f.f)(l.Qc)),T(0,(0,g.t)(c.X3)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],B);let M=!1,E=new h.n(t=>{M||(M=!0,t(B).toSelf().inSingletonScope(),t(d.tP).to(B).inSingletonScope(),t(d.uz).toService(d.tP),t(c.X3).toService(u.Sg),(0,l.yb)(t,c.X3))});var k=i(66417),F=i(57355),R=i(80358),P=i(92257);let O=class extends P.D{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=y.B5}contains(t,e,i){let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=t.getParsedPath();if(!r.camera){if(!t.AABBBounds.containsPoint(e))return!1;if(n.isSvg||"imprecise"===t.attribute.pickMode)return!0}r.highPerformanceSave();let s=t.getGraphicTheme(),{x:a,y:o,z:l,lastModelMatrix:h}=this.transform(t,s,r),u=e;if(r.camera){u=e.clone();let i=t.parent.globalTransMatrix;u.x=i.a*e.x+i.c*e.y+i.e,u.y=i.b*e.x+i.d*e.y+i.f}this.canvasRenderer.z=l;let c=!1;return this.canvasRenderer.drawShape(t,r,a,o,{},null,(t,e,i)=>!!c||(c=t.isPointInPath(u.x,u.y)),(t,e,i)=>{if(c)return!0;let n=e.lineWidth||i.lineWidth,s=e.pickStrokeBuffer||i.pickStrokeBuffer;return r.lineWidth=e.keepStrokeScale||i.keepStrokeScale?n+s:(0,x.D)(r,n+s,r.dpr),c=t.isPointInStroke(u.x,u.y)}),this.canvasRenderer.z=0,r.modelMatrix!==h&&R.yp.free(r.modelMatrix),r.modelMatrix=h,r.highPerformanceRestore(),c}};O=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(r=(0,f.f)(d.tP),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],O);let L=!1,I=new h.n((t,e,i,r)=>{L||(L=!0,t(F.RC).to(O).inSingletonScope(),t(F.EL).toService(F.RC))});var z=i(55082);let Z=class extends z.o{constructor(t){super(),this.canvasRenderer=t,this.type="symbol",this.numberType=y.B5}};Z=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,p.b)(),(n=(0,f.f)(d.tP),function(t,e){n(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],Z);let j=!1,W=new h.n((t,e,i,r)=>{j||(j=!0,t(F.Yr).to(Z).inSingletonScope(),t(F.XN).toService(F.Yr))});function U(){U.__loaded||(U.__loaded=!0,a.i.RegisterGraphicCreator("symbol",s.t),o.n.load(E),o.n.load(k.X?I:W))}U.__loaded=!1;let N=U},24599:function(t,e,i){"use strict";i.d(e,{g:()=>z});var r,n=i(63654),s=i(66987),a=i(34505),o=i(77909),l=i(22415),h=i(89677),u=i(13922),c=i(32227),d=i(34865),p=i(26845),f=i(47816),g=i(17852),m=i(10773),y=i(52807),v=i(75946),b=i(80358),x=i(8830),_=i(54326),w=i(19626),S=i(10641),A=function(t,e){return function(i,r){e(i,r,t)}};let C=class extends v.Y{constructor(t){super(),this.graphicRenderContributions=t,this.numberType=m.Us,this.builtinContributions=[S.C],this.init(t)}drawShape(t,e,i,r,n,s,a,o){var l,h,u;let c=(0,g.gh)(t,null==s?void 0:s.theme).text,{text:d,underline:p=c.underline,lineThrough:f=c.lineThrough,keepDirIn3d:m=c.keepDirIn3d,direction:y=c.direction,fontSize:v=c.fontSize,verticalMode:_=c.verticalMode,x:S=c.x,y:A=c.y}=t.attribute,C=null!=(l=(0,w.VA)(t.attribute.lineHeight,v))?l:v,D=this.valid(t,c,a,o);if(!D)return;let{fVisible:T,sVisible:B,doFill:M,doStroke:E}=D,k=!m,F=this.z||0;e.beginPath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(t,t.attribute,c),this.beforeRenderStep(t,e,i,r,M,E,T,B,c,n,a,o),k&&this.transformUseContext2d(t,c,F,e);let R=(n,s,l,h)=>{let u=i+s,d=r+l;if(h){e.highPerformanceSave(),u+=v;let t=b.QE.allocate(1,0,0,1,0,0);t.rotateByCenter(Math.PI/2,u,d),e.transformFromMatrix(t,!0),b.QE.free(t)}E&&(o?o(e,t.attribute,c):B&&(e.setStrokeStyle(t,t.attribute,S-i,A-r,c),e.strokeText(n,u,d,F))),M&&(a?a(e,t.attribute,c):T&&(e.setCommonStyle(t,t.attribute,S-i,A-r,c),e.fillText(n,u,d,F))),h&&(e.highPerformanceRestore(),e.setTransformForCurrent())};if(e.setTextStyleWithoutAlignBaseline(t.attribute,c,F),"horizontal"===y){let{multilineLayout:n}=t;if(!n)return void e.highPerformanceRestore();let{xOffset:s,yOffset:l}=n.bbox;E&&(o?o(e,t.attribute,c):B&&(e.setStrokeStyle(t,t.attribute,S-i,A-r,c),n.lines.forEach(t=>{e.strokeText(t.str,(t.leftOffset||0)+s+i,(t.topOffset||0)+l+r,F)}))),M&&(a?a(e,t.attribute,c):T&&(e.setCommonStyle(t,t.attribute,S-i,A-r,c),n.lines.forEach(n=>{e.fillText(n.str,(n.leftOffset||0)+s+i,(n.topOffset||0)+l+r,F),this.drawUnderLine(p,f,t,(n.leftOffset||0)+s+i,(n.topOffset||0)+l+r,n.descent,(n.descent-n.ascent)/2,F,c,e,{width:n.width})})))}else{let{textAlign:i=c.textAlign,textBaseline:r=c.textBaseline}=t.attribute;if(!_){let e=i;i=null!=(h=t.getBaselineMapAlign()[r])?h:"left",r=null!=(u=t.getAlignMapBaseline()[e])?u:"top"}t.tryUpdateAABBBounds();let{verticalList:n}=t.cache;e.textAlign="left",e.textBaseline="top";let s=C*n.length,a=0;n.forEach(t=>{let e=t.reduce((t,e)=>t+(e.width||0),0);a=(0,x.Fp)(e,a)});let o=0,l=0;"bottom"===r?l=-s:"middle"===r&&(l=-s/2),"center"===i?o-=a/2:"right"===i&&(o-=a),n.forEach((t,e)=>{let r=t.reduce((t,e)=>t+(e.width||0),0),n=a-r,h=o;"center"===i?h+=n/2:"right"===i&&(h+=n),t.forEach(t=>{let{text:i,width:r,direction:n}=t;R(i,s-(e+1)*C+l,h,n),h+=r})})}k&&this.restoreTransformUseContext2d(t,c,F,e),this.afterRenderStep(t,e,i,r,M,E,T,B,c,n,a,o)}draw(t,e,i,r){let n=(0,g.gh)(t,null==r?void 0:r.theme).text,{keepDirIn3d:s=n.keepDirIn3d}=t.attribute;this._draw(t,n,!s,i,r)}drawUnderLine(t,e,i,r,n,s,a,o,l,h,u){if(e+t<=0)return;let{textAlign:c=l.textAlign,fill:d=l.fill,opacity:p=l.opacity,underlineOffset:f=l.underlineOffset,underlineDash:g=l.underlineDash,fillOpacity:m=l.fillOpacity}=i.attribute,v=!(0,_.Z)(u),b=v?u.width:i.clipedWidth,x=v?0:(0,y.js)(c,b),w={lineWidth:0,stroke:d,opacity:p,strokeOpacity:m};if(t){w.lineWidth=t,h.setStrokeStyle(i,w,r,n,l),g&&h.setLineDash(g),h.beginPath();let e=n+s+f;h.moveTo(r+x,e,o),h.lineTo(r+x+b,e,o),h.stroke()}if(e){w.lineWidth=e,h.setStrokeStyle(i,w,r,n,l),h.beginPath();let t=n+a;h.moveTo(r+x,t,o),h.lineTo(r+x+b,t,o),h.stroke()}}};C=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,d.b)(),A(0,(0,p.f)(o.Qc)),A(0,(0,f.t)(u.$K)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],C);let D=!1,T=new l.n(t=>{D||(D=!0,t(c.EY).to(C).inSingletonScope(),t(c.uz).toService(c.EY),t(u.$K).toService(h.Sg),(0,o.yb)(t,u.$K))});var B=i(66417),M=i(57355),E=i(92257);let k=class extends E.D{constructor(t){super(),this.canvasRenderer=t,this.type="text",this.numberType=m.Us}contains(t,e,i){let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=t.AABBBounds;if(!r.camera)return!!n.containsPoint(e);r.highPerformanceSave();let s=t.getGraphicTheme(),{keepDirIn3d:a=s.keepDirIn3d}=t.attribute,{x:o,y:l,z:h,lastModelMatrix:u}=this.transform(t,s,r,!a);this.canvasRenderer.z=h;let c=e;if(r.camera){c=e.clone();let i=t.parent.globalTransMatrix;c.x=i.a*e.x+i.c*e.y+i.e,c.y=i.b*e.x+i.d*e.y+i.f}let d=!1;return this.canvasRenderer.drawShape(t,r,o,l,{},null,(e,i,r)=>{if(d)return!0;let{fontSize:n=s.fontSize,textBaseline:a=s.textBaseline,textAlign:u=s.textAlign}=t.attribute,p=t.AABBBounds,f=p.height(),g=p.width(),m=(0,y.nV)(a,f,n),v=(0,y.js)(u,g);return e.rect(v+o,m+l,g,f,h),d=e.isPointInPath(c.x,c.y)},(t,e,i)=>d),this.canvasRenderer.z=0,r.modelMatrix!==u&&b.yp.free(r.modelMatrix),r.modelMatrix=u,r.highPerformanceRestore(),d}};k=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,d.b)(),(r=(0,p.f)(c.EY),function(t,e){r(t,e,0)}),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Object])],k);let F=!1,R=new l.n((t,e,i,r)=>{F||(F=!0,t(M.Sp).to(k).inSingletonScope(),t(M.EL).toService(M.Sp))}),P=class{constructor(){this.type="text",this.numberType=m.Us}contains(t,e,i){return!!t.AABBBounds.containsPoint(e)}};P=function(t,e,i,r){var n,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,r);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(a=(s<3?n(a):s>3?n(e,i,a):n(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a}([(0,d.b)()],P);let O=!1,L=new l.n((t,e,i,r)=>{O||(O=!0,t(M.p1).to(P).inSingletonScope(),t(M.XN).toService(M.p1))});function I(){I.__loaded||(I.__loaded=!0,s.i.RegisterGraphicCreator("text",n.r),a.n.load(T),a.n.load(B.X?R:L))}I.__loaded=!1;let z=I},82162:function(t,e,i){"use strict";i.d(e,{s:()=>o});var r=i(14688),n=i(50890),s=i(43122),a=i(49545);class o{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:(0,r.Z)(this._rangeFactorStart)&&(0,r.Z)(this._rangeFactorEnd)&&2===t.length?(this._wholeRange=(0,a.BK)(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,e,i){return t?(2===t.length&&t.every(t=>t>=0&&t<=1)&&(this._wholeRange=null,0===t[0]&&1===t[1]?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):(0,r.Z)(this._rangeFactorStart)&&(0,r.Z)(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,e){var i;return(0,n.Z)(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,0===t&&((0,n.Z)(this._rangeFactorEnd)||1===this._rangeFactorEnd)?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t,this._rangeFactorEnd=null!=(i=this._rangeFactorEnd)?i:1)),this)}rangeFactorEnd(t,e){var i;return(0,n.Z)(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,0===t&&((0,n.Z)(this._rangeFactorStart)||0===this._rangeFactorStart)?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorEnd=t,this._rangeFactorStart=null!=(i=this._rangeFactorStart)?i:0)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);let{distortion:e=2,radiusRatio:i=.1,radius:r}=this._fishEyeOptions,a=this.range(),o=a[0],l=a[a.length-1],h=Math.min(o,l),u=Math.max(o,l),c=(0,s.Z)(null!=(t=this._fishEyeOptions.focus)?t:0,h,u),d=(0,n.Z)(r)?(u-h)*i:r,p=Math.exp(e);p=p/(p-1)*d;let f=e/d;this._fishEyeTransform=t=>{let e=Math.abs(t-c);return e>=d?t:e<=1e-6?c:c+(t-c)*(p*(1-Math.exp(-e*f))/e*.75+.25)}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}get(t,e){var i;return null!=(i=null==this?void 0:this[t])?i:e}}},13959:function(t,e,i){"use strict";i.d(e,{f:()=>$});var r={};i.r(r),i.d(r,{LX:()=>j});var n=i(42183),s=i(51873);let a=t=>{let e=null,i=null;return(...r)=>(e&&r.every((t,i)=>t===e[i])||(e=r,i=t(...r)),i)};var o=i(61369),l=i(49545);let h=Math.sqrt(50),u=Math.sqrt(10),c=Math.sqrt(2),d=(t,e,i)=>{let r=1,n=t,a=Math.floor((e-1)/2),o=Math.abs(t);return t>=0&&t<=Number.MIN_VALUE?n=0:t<0&&t>=-Number.MIN_VALUE?n=-(e-1):!i&&o<1?r=y(o).step:(i||o>1)&&(n=Math.floor(t)-a*r),r>0?(t>0?n=Math.max(n,0):t<0&&(n=Math.min(n,-(e-1)*r)),(0,s.w)(0,e).map(t=>n+t*r)):t>0?f(0,-(e-1)/r,r):f((e-1)/r,0,r)},p=a((t,e,i,r)=>{let n,s,a,o,l=-1;if(i*=1,(t*=1)==(e*=1)||Math.abs(t-e)<=Number.MIN_VALUE&&i>0)return[t];if((n=e<t)&&(s=t,t=e,e=s),!isFinite(o=v(t,e,i).step))return[];if(o>0){let i=Math.round(t/o),r=Math.round(e/o);for(i*o<t&&++i,r*o>e&&--r,a=Array(s=r-i+1);++l<s;)a[l]=(i+l)*o}else if(o<0&&(null==r?void 0:r.noDecimals)){o=1;let i=Math.ceil(t),r=Math.floor(e);if(!(i<=r))return[];for(a=Array(s=r-i+1);++l<s;)a[l]=i+l}else{let i=Math.round(t*(o=-o)),r=Math.round(e*o);for(i/o<t&&++i,r/o>e&&--r,a=Array(s=r-i+1);++l<s;)a[l]=(i+l)/o}return n&&a.reverse(),a}),f=(t,e,i)=>{let r,n,s=-1;if(i>0){let a=Math.floor(t/i),o=Math.ceil(e/i);for((a+1)*i<t&&++a,(o-1)*i>e&&--o,n=Array(r=o-a+1);++s<r;)n[s]=(a+s)*i}else{let a=Math.floor(t*(i=-i)),o=Math.ceil(e*i);for((a+1)/i<t&&++a,(o-1)/i>e&&--o,n=Array(r=o-a+1);++s<r;)n[s]=(a+s)/i}return n},g=(t,e,i)=>{let r,n=t[0],s=t[t.length-1],a=e-t.length;if(s<=0){let e=[];for(r=a;r>=1;r--)e.push(n-r*i);return e.concat(t)}if(n>=0){for(r=1;r<=a;r++)t.push(s+r*i);return t}let o=[],l=[];for(r=1;r<=a;r++)r%2==0?o=[n-Math.floor(r/2)*i].concat(o):l.push(s+Math.ceil(r/2)*i);return o.concat(t).concat(l)},m=a((t,e,i,r)=>{let n,s,a;if(i*=1,(t*=1)==(e*=1)||Math.abs(t-e)<=Number.MIN_VALUE&&i>0)return d(t,i,null==r?void 0:r.noDecimals);(n=e<t)&&(a=t,t=e,e=a);let o=v(t,e,i),l=o.step;if(!isFinite(l))return[];if(l>0){let r=1,{power:n,gap:a}=o,h=10===a?2*10**n:+(10**n);for(;r<=5&&(s=f(t,e,l)).length>i+1&&i>2;)l+=h,r+=1;i>2&&s.length<i-1&&(s=g(s,i,l))}else(null==r?void 0:r.noDecimals)&&l<0&&(l=1),s=f(t,e,l);return n&&s.reverse(),s}),y=t=>{let e=Math.floor(Math.log(t)/Math.LN10),i=t/10**e,r=1;return i>=h?r=10:i>=u?r=5:i>=c&&(r=2),e>=0?{step:r*10**e,gap:r,power:e}:{step:-(10**-e)/r,gap:r,power:e}};function v(t,e,i){return y((e-t)/Math.max(0,i))}function b(t,e,i){let r;if(i*=1,(t*=1)==(e*=1)&&i>0)return[t];if(i<=0||0==(r=(e-t)/Math.max(1,i-1))||!isFinite(r))return[];let n=Array(i);for(let e=0;e<i;e++)n[e]=t+e*r;return n}function x(t,e,i){let r,n,s=-1;if(i*=1,(n=(e*=1)<(t*=1))&&(r=t,t=e,e=r),!isFinite(i)||e-t<=i)return[t];let a=Math.floor((e-t)/i+1),o=Array(a);for(;++s<a;)o[s]=t+s*i;return n&&o.reverse(),o}function _(t,e=10){let i,r,n=0,s=t.length-1,a=t[n],o=t[s],l=10;for(o<a&&(r=a,a=o,o=r,r=n,n=s,s=r);l-- >0;){if((r=v(a,o,e).step)===i)return t[n]=a,t[s]=o,t;if(r>0)a=Math.floor(a/r)*r,o=Math.ceil(o/r)*r;else{if(!(r<0))break;a=Math.ceil(a*r)/r,o=Math.floor(o*r)/r}i=r}}let w=(t,e,i)=>1>Math.abs(e-t)?+i.toFixed(1):Math.round(+i);a((t,e,i,r,n,s,a)=>{let o=t,l=e,h=l<o;h&&([o,l]=[l,o]);let u,c,d=n(o),p=n(l),f=[];if(!(r%1)&&p-d<i){if(d=Math.floor(d),p=Math.ceil(p),o>0){for(;d<=p;++d)for(u=1;u<r;++u)if(!((c=d<0?u/s(-d):u*s(d))<o)){if(c>l)break;f.push(c)}}else for(;d<=p;++d)for(u=r-1;u>=1;--u)if(!((c=d>0?u/s(-d):u*s(d))<o)){if(c>l)break;f.push(c)}2*f.length<i&&(f=m(o,l,i))}else f=m(d,p,Math.min(p-d,i)).map(s);return f=f.filter(t=>0!==t),(null==a?void 0:a.noDecimals)&&(f=Array.from(new Set(f.map(t=>Math.floor(t))))),h?f.reverse():f}),a((t,e,i,r,n,s)=>{let a=[],o={},h=n(t),u=n(e),c=[];if(Number.isInteger(r))c=m(h,u,i);else{let t=(u-h)/(i-1);for(let e=0;e<i;e++)c.push(h+e*t)}return c.forEach(i=>{let n=s(i),h=Number.isInteger(r)?w(t,e,n):w(t,e,(0,l.ok)(n)),u=w(t,e,(0,l.uT)(h,[t,e]));o[u]||isNaN(u)||!(c.length>1)||(o[u]=1,a.push(u))}),a}),a((t,e,i,r,n)=>b(r(t),r(e),i).map(t=>(0,l.ok)(n(t)))),a((t,e,i,r,n)=>x(r(t),r(e),i).map(t=>(0,l.ok)(n(t))));var S=i(82162),A=i(37651),C=i(14688),D=i(50890),T=i(43122);function B(t,e,i){let r=(1-Math.abs(2*(i/=100)-1))*(e/=100),n=r*(1-Math.abs(t/60%2-1)),s=i-r/2,a=0,o=0,l=0;return 0<=t&&t<60?(a=r,o=n,l=0):60<=t&&t<120?(a=n,o=r,l=0):120<=t&&t<180?(a=0,o=r,l=n):180<=t&&t<240?(a=0,o=n,l=r):240<=t&&t<300?(a=n,o=0,l=r):300<=t&&t<360&&(a=r,o=0,l=n),{r:a=Math.round(255*(a+s)),g:o=Math.round(255*(o+s)),b:l=Math.round(255*(l+s))}}function M(t,e,i){t/=255;let r=Math.min(t,e/=255,i/=255),n=Math.max(t,e,i),s=n-r,a=0,o=0,l=0;return(a=Math.round(60*(a=0===s?0:n===t?(e-i)/s%6:n===e?(i-t)/s+2:(t-e)/s+4)))<0&&(a+=360),l=(n+r)/2,{h:a,s:o=+(100*(o=0===s?0:s/(1-Math.abs(2*l-1)))).toFixed(1),l:l=+(100*l).toFixed(1)}}let E=/^#([0-9a-f]{3,8})$/,k={transparent:0xffffff00},F={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function R(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function P(t){return(0,o.Z)(t)?new Z(t>>16,t>>8&255,255&t,1):(0,A.Z)(t)?new Z(t[0],t[1],t[2]):new Z(255,255,255)}function O(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function L(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let I=(t,e)=>{let i=E.exec(t);if(e||i){let t=parseInt(i[1],16),e=i[1].length;return 3===e?new Z((t>>8&15)+((t>>8&15)<<4),(t>>4&15)+((t>>4&15)<<4),(15&t)+((15&t)<<4),1):6===e?P(t):8===e?new Z(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):null}};class z{static Brighter(t,e=1){return 1===e?t:new z(t).brighter(e).toRGBA()}static SetOpacity(t,e=1){return 1===e?t:new z(t).setOpacity(e).toRGBA()}static getColorBrightness(t,e="hsl"){let i=t instanceof z?t:new z(t);switch(e){case"hsv":default:return i.getHSVBrightness();case"hsl":return i.getHSLBrightness();case"lum":return i.getLuminance();case"lum2":return i.getLuminance2();case"lum3":return i.getLuminance3();case"wcag":return i.getLuminanceWCAG()}}static parseColorString(t){if((0,C.Z)(k[t])){var e;return e=k[t],(0,o.Z)(e)?new Z(e>>>24,e>>>16&255,e>>>8&255,255&e):(0,A.Z)(e)?new Z(e[0],e[1],e[2],e[3]):new Z(255,255,255,1)}if((0,C.Z)(F[t]))return P(F[t]);let i=`${t}`.trim().toLowerCase(),r=I(i);if(void 0!==r)return r;if(/^(rgb|RGB|rgba|RGBA)/.test(i)){let t=i.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new Z(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),parseFloat(t[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(i)){let t=i.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),e=B(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10));return new Z(e.r,e.g,e.b,parseFloat(t[3]))}}constructor(t){let e=z.parseColorString(t);e?this.color=e:(console.warn(`Warn: 传入${t}无法解析为Color`),this.color=new Z(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){let{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t))),this}add(t){let{r:e,g:i,b:r}=this.color;return this.color.r+=Math.min(255,e+t.color.r),this.color.g+=Math.min(255,i+t.color.g),this.color.b+=Math.min(255,r+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){let{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,e,i){let r=this.color.opacity,n=M(this.color.r,this.color.g,this.color.b),s=B((0,D.Z)(t)?n.h:(0,T.Z)(t,0,360),(0,D.Z)(e)?n.s:e>=0&&e<=1?100*e:e,(0,D.Z)(i)?n.l:i<=1&&i>=0?100*i:i);return this.color=new Z(s.r,s.g,s.b,r),this}setRGB(t,e,i){return(0,D.Z)(t)||(this.color.r=t),(0,D.Z)(e)||(this.color.g=e),(0,D.Z)(i)||(this.color.b=i),this}setHex(t){let e=I(`${t}`.trim().toLowerCase(),!0);return null!=e?e:this}setColorName(t){let e=F[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(t=1){return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}getLuminanceWCAG(){let t=this.color.r/255,e=this.color.g/255,i=this.color.b/255;return .2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}clone(){return new z(this.color.toString())}copyGammaToLinear(t,e=2){return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}copyLinearToGamma(t,e=2){let i=e>0?1/e:1;return this.color.r=Math.pow(t.color.r,i),this.color.g=Math.pow(t.color.g,i),this.color.b=Math.pow(t.color.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=O(t.color.r),this.color.g=O(t.color.g),this.color.b=O(t.color.b),this}copyLinearToSRGB(t){return this.color.r=L(t.color.r),this.color.g=L(t.color.g),this.color.b=L(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class Z{constructor(t,e,i,r){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),(0,C.Z)(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return`#${R(this.r)+R(this.g)+R(this.b)+(1===this.opacity?"":R(255*this.opacity))}`}formatRgb(){let t=this.opacity;return`${1===t?"rgb(":"rgba("}${this.r},${this.g},${this.b}${1===t?")":`,${t})`}`}formatHsl(){let t=this.opacity,{h:e,s:i,l:r}=M(this.r,this.g,this.b);return`${1===t?"hsl(":"hsla("}${e},${i}%,${r}%${1===t?")":`,${t})`}`}toString(){return this.formatHex()}}function j(t,e){let i=t.r,r=e.r,n=t.g,s=e.g,a=t.b,o=e.b,l=t.opacity,h=e.opacity;return t=>new Z(Math.round(i*(1-t)+r*t),Math.round(n*(1-t)+s*t),Math.round(a*(1-t)+o*t),l*(1-t)+h*t)}function W(t,e){return i=>t*(1-i)+e*i}function U(t,e){return function(i){return Math.round(t*(1-i)+e*i)}}RegExp(/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g.source,"g");let{LX:N}=r;function H(t,e){let i,r=typeof e;if((0,D.Z)(e)||"boolean"===r)return()=>e;if("number"===r)return W(t,e);if("string"===r){if(i=z.parseColorString(e)){let e=N(z.parseColorString(t),i);return t=>e(t).formatRgb()}return W(Number(t),Number(e))}return e instanceof Z?N(t,e):e instanceof z?N(t.color,e.color):e instanceof Date?function(t,e){let i=t.valueOf(),r=e.valueOf(),n=new Date;return t=>(n.setTime(i*(1-t)+r*t),n)}(t,e):W(Number(t),Number(e))}var G=i(73554),V=i(69988);class X extends S.s{constructor(t=l.yR,e=l.yR){super(),this._unknown=void 0,this.transformer=t,this.untransformer=e,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=l.yR,this._piecewise=l.Pd,this._interpolate=H}calculateVisibleDomain(t){var e;return(0,C.Z)(this._rangeFactorStart)&&(0,C.Z)(this._rangeFactorEnd)&&2===t.length?[this.invert(t[0]),this.invert(t[1])]:null!=(e=this._niceDomain)?e:this._domain}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}scale(t){var e;if(Number.isNaN(t=Number(t))||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise((null!=(e=this._niceDomain)?e:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));let i=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(i):i}invert(t){var e;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),(null!=(e=this._niceDomain)?e:this._domain).map(this.transformer),W)),this._clamp(this.untransformer(this._input(t)))}domain(t,e){var i;if(!t)return(null!=(i=this._niceDomain)?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;let r=Array.from(t,G.H);return this._domain=r,this.rescale(e)}range(t,e){if(!t)return this._range.slice();let i=Array.from(t);return this._range=i,this.rescale(e)}rangeRound(t,e){let i=Array.from(t);return this._range=i,this._interpolate=U,this.rescale(e)}rescale(t){var e;if(t)return this;let i=null!=(e=this._niceDomain)?e:this._domain,r=i.length,n=this._range.length,s=Math.min(r,n);if(r&&r<n&&this._forceAlign){let t=n-r+1,e=i[r-1],a=r>=2?(e-i[r-2])/t:0;for(let n=1;n<=t;n++)i[r-2+n]=e-a*(t-n);s=n}return this._autoClamp&&(this._clamp=(0,V.i)(i[0],i[s-1])),this._piecewise=s>2?l.PP:l.Pd,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,e,i){return arguments.length?(e?(this._autoClamp=!1,this._clamp=e):(this._autoClamp=!!t,this._clamp=t?void 0:l.yR),this.rescale(i)):this._clamp!==l.yR}interpolate(t,e){return arguments.length?(this._interpolate=t,this.rescale(e)):this._interpolate}ticks(t=10){return[]}tickData(t=10){let e=this.ticks(t);return(null!=e?e:[]).map((t,e)=>({index:e,tick:t,value:(this.scale(t)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(t,e){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,e){return(0,D.Z)(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,e){return(0,D.Z)(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}}var Y=i(65709);class $ extends X{constructor(){super(...arguments),this.type=n._f.Linear}clone(){var t;let e=new $;return e.domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate),this._niceType&&(e._niceType=this._niceType,e._domainValidator=this._domainValidator,e._niceDomain=null==(t=this._niceDomain)?void 0:t.slice()),e}tickFormat(){return()=>{}}d3Ticks(t=10,e){let i=this.calculateVisibleDomain(this._range);return p(i[0],i[i.length-1],t,e)}ticks(t=10,e){var i;if((0,Y.Z)(null==e?void 0:e.customTicks))return e.customTicks(this,t);if((0,C.Z)(this._rangeFactorStart)&&(0,C.Z)(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&2===this._range.length||!this._niceType)return this.d3Ticks(t,e);let r=null!=(i=this._niceDomain)?i:this._domain,n=this._domain,s=r[0],a=r[r.length-1],o=m(n[0],n[n.length-1],t,e);if(!o.length)return o;if(this._domainValidator)o=o.filter(this._domainValidator);else if((o[0]!==s||o[o.length-1]!==a)&&this._niceType){let t=r.slice();if("all"===this._niceType?(t[0]=o[0],t[t.length-1]=o[o.length-1],this._niceDomain=t,this.rescale()):"min"===this._niceType&&o[0]!==s?(t[0]=o[0],this._niceDomain=t,this.rescale()):"max"===this._niceType&&o[o.length-1]!==a&&(t[t.length-1]=o[o.length-1],this._niceDomain=t,this.rescale()),"all"!==this._niceType){let e=Math.min(t[0],t[t.length-1]),i=Math.max(t[0],t[t.length-1]);o=o.filter(t=>t>=e&&t<=i)}}return o}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return b(e[0],e[e.length-1],t)}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return x(e[0],e[e.length-1],t)}nice(t=10,e){var i,r;let n=this._domain,s=[];if(e){let t=function(t,e){let i=(0,o.Z)(e.forceMin),r=(0,o.Z)(e.forceMax),n=null,s=[],a=null,l=i&&r?t=>t>=e.forceMin&&t<=e.forceMax:i?t=>t>=e.forceMin:r?t=>t<=e.forceMax:null;return i?s[0]=e.forceMin:(0,o.Z)(e.min)&&e.min<=Math.min(t[0],t[t.length-1])&&(s[0]=e.min),r?s[1]=e.forceMax:(0,o.Z)(e.max)&&e.max>=Math.max(t[0],t[t.length-1])&&(s[1]=e.max),(0,o.Z)(s[0])&&(0,o.Z)(s[1])?((a=t.slice())[0]=s[0],a[a.length-1]=s[1]):n=(0,o.Z)(s[0])||(0,o.Z)(s[1])?(0,o.Z)(s[0])?"max":"min":"all",{niceType:n,niceDomain:a,niceMinMax:s,domainValidator:l}}(n,e);if(s=t.niceMinMax,this._domainValidator=t.domainValidator,this._niceType=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){let e=_(n.slice(),t);"min"===this._niceType?e[e.length-1]=null!=(i=s[1])?i:e[e.length-1]:"max"===this._niceType&&(e[0]=null!=(r=s[0])?r:e[0]),this._niceDomain=e,this.rescale()}return this}niceMin(t=10){this._niceType="min";let e=this._domain[this._domain.length-1],i=_(this.domain(),t);return i&&(i[i.length-1]=e,this._niceDomain=i,this.rescale()),this}niceMax(t=10){this._niceType="max";let e=this._domain[0],i=_(this._domain.slice(),t);return i&&(i[0]=e,this._niceDomain=i,this.rescale()),this}}},40499:function(t,e,i){"use strict";i.d(e,{a:()=>a});var r=i(49545),n=i(13959),s=i(42183);class a extends n.f{constructor(){super(r._b,r.h6),this.type=s._f.Sqrt}clone(){return(new a).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate)}}},42183:function(t,e,i){"use strict";var r,n;i.d(e,{_f:()=>r}),(n=r||(r={})).Identity="identity",n.Linear="linear",n.Log="log",n.Pow="pow",n.Sqrt="sqrt",n.Symlog="symlog",n.Time="time",n.Quantile="quantile",n.Quantize="quantize",n.Threshold="threshold",n.Ordinal="ordinal",n.Point="point",n.Band="band";let s={};Object.values(r).forEach(t=>{s[t]=!0})},49545:function(t,e,i){"use strict";i.d(e,{BK:()=>h,PP:()=>u,Pd:()=>l,_b:()=>s,h6:()=>a,ok:()=>c,uT:()=>d,yR:()=>n});var r=i(45501);function n(t){return t}let s=t=>t<0?-Math.sqrt(-t):Math.sqrt(t),a=t=>t<0?-t*t:t*t;function o(t,e){if(t=Number(t),e=Number(e)-t)return i=>(i-t)/e;let i=Number.isNaN(e)?NaN:.5;return()=>i}function l(t,e,i){let r,n,s=t[0],a=t[1],l=e[0],h=e[1];return a<s?(r=o(a,s),n=i(h,l)):(r=o(s,a),n=i(l,h)),t=>n(r(t))}function h(t,e){let i=(t[1]-t[0])/(e[1]-e[0]),r=t[0]-i*e[0];return[r,i+r]}function u(t,e,i){let n=Math.min(t.length,e.length)-1,s=Array(n),a=Array(n),l=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<n;)s[l]=o(t[l],t[l+1]),a[l]=i(e[l],e[l+1]);return function(e){let i=(0,r.b4)(t,e,1,n)-1;return a[i](s[i](e))}}let c=(t,e=!1)=>{let i=Math.floor(Math.log10(t)),r=t/Math.pow(10,i);return(e?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,i)},d=(t,e)=>{let i,r;return e[0]<e[1]?(i=e[0],r=e[1]):(i=e[1],r=e[0]),Math.min(Math.max(t,i),r)}},68390:function(t,e,i){"use strict";i.d(e,{j:()=>g});var r=i(94030),n=i(64776),s=i(80097),a=i(36163),o=i(54326),l=i(4654),h=i(11809),u=i(18181),c=i(37196),d=i(53739);function p(t,e,i,r){let n=[],s=t;for(;s<=e;)n.push(s),s+=i;return r&&n.reverse(),n}function f(t,e,i,r){let n,s;if(e=Math.floor(+e),t=Math.floor(+t),!(i=Math.floor(+i)))return[];if(t===e)return[t];if(n=e<t){let i=t;t=e,e=i}let a=(0,d.i)(1,e-t+1)(i);if(s=Math.floor((e-t+1)/a),!r)for(;Math.ceil((e-t+1)/s)>i&&a>1;)a-=1,s=Math.floor((e-t)/a);return p(t,e,s,n)}class g extends h.J{constructor(t){super(),this.type=c._f.Band,this._range=[0,1],this._step=void 0,this._bandwidth=void 0,this._isFixed=!1,this._round=!1,this._paddingInner=0,this._paddingOuter=0,this._align=.5,this._unknown=void 0,delete this.unknown,this.rescale(t)}rescale(t,e){if(t)return this;this._wholeRange=null;let i=this._calculateWholeRange(this._range,e),n=super.domain().length,s=i[1]<i[0],a=i[Number(s)-0],o=i[1-Number(s)],l=(0,u.U6)(n,this._paddingInner,this._paddingOuter);return this._step=(o-a)/Math.max(1,l||1),this._round&&(this._step=Math.floor(this._step)),a+=(o-a-this._step*(n-this._paddingInner))*this._align,this.isBandwidthFixed()||(this._bandwidth=this._step*(1-this._paddingInner)),this._round&&(a=Math.round(a),this.isBandwidthFixed()||(this._bandwidth=Math.round(this._bandwidth))),this._bandRangeState={reverse:s,start:s?(0,r.Z)(a+this._step*(n-1),i[1],i[0]):(0,r.Z)(a,i[0],i[1]),min:s?i[1]:i[0],max:o,count:n},this.generateFishEyeTransform(),this}scale(t){if(!this._bandRangeState)return;let e=`${t}`,i=this._getSpecifiedValue(e);if(void 0!==i)return i;let n=this._index.get(e);if(!n){if(this._unknown!==h.O)return this._unknown;n=this._domain.push(t),this._index.set(e,n)}let{count:s,start:a,reverse:o,min:l,max:u}=this._bandRangeState,c=a+(n-1)%s*(o?-1:1)*this._step;return(0,r.Z)(this._fishEyeTransform?this._fishEyeTransform(c):c,l,u)}_calculateWholeRange(t,e){if(this._wholeRange)return this._wholeRange;if((this._minBandwidth||this._maxBandwidth)&&!this._isBandwidthFixedByUser()){let e;if((0,n.Z)(this._rangeFactorStart)&&(0,n.Z)(this._rangeFactorEnd)&&2===t.length){let i=(0,u.BK)(t,[this._rangeFactorStart,this._rangeFactorEnd]);e=Math.abs(i[1]-i[0])}else e=Math.abs(t[1]-t[0]);let i=(0,u.at)(super.domain().length,e,this._paddingInner,this._paddingOuter,this._round);i<this._minBandwidth?(this._bandwidth=this._minBandwidth,this._isFixed=!0):i>this._maxBandwidth?(this._bandwidth=this._maxBandwidth,this._isFixed=!0):(this._bandwidth=i,this._isFixed=!1)}if(this.isBandwidthFixed()){let i=(0,u.$l)(super.domain().length,this._bandwidth,this._paddingInner,this._paddingOuter)*Math.sign(t[1]-t[0]),r=Math.min((t[1]-t[0])/i,1);if((0,n.Z)(this._rangeFactorStart)&&(0,n.Z)(this._rangeFactorEnd)){let n=this._rangeFactorStart+r<=1,s=this._rangeFactorEnd-r>=0;if("rangeFactorStart"===e&&n?this._rangeFactorEnd=this._rangeFactorStart+r:"rangeFactorEnd"===e&&s?this._rangeFactorStart=this._rangeFactorEnd-r:t[0]<=t[1]?n?this._rangeFactorEnd=this._rangeFactorStart+r:s?this._rangeFactorStart=this._rangeFactorEnd-r:(this._rangeFactorStart=0,this._rangeFactorEnd=r):s?this._rangeFactorStart=this._rangeFactorEnd-r:n?this._rangeFactorEnd=this._rangeFactorStart+r:(this._rangeFactorStart=1-r,this._rangeFactorEnd=1),i>0){let e=t[0]-i*this._rangeFactorStart;this._wholeRange=[e,e+i]}else{let e=t[1]+i*(1-this._rangeFactorEnd);this._wholeRange=[e-i,e]}}else this._rangeFactorStart=0,this._rangeFactorEnd=r,this._wholeRange=[t[0],t[0]+i];return this._wholeRange}return super._calculateWholeRange(t)}calculateWholeRangeSize(){let t=this._calculateWholeRange(this._range);return Math.abs(t[1]-t[0])}calculateVisibleDomain(t){let e=this._domain;if((0,n.Z)(this._rangeFactorStart)&&(0,n.Z)(this._rangeFactorEnd)&&e.length){let i=this._getInvertIndex(t[0]),r=this._getInvertIndex(t[1]);return e.slice(Math.min(i,r),Math.max(i,r)+1)}return e}domain(t,e){return t?(super.domain(t),this.rescale(e)):super.domain()}range(t,e){return t?(this._range=[(0,s.H)(t[0]),(0,s.H)(t[1])],this.rescale(e)):this._range}rangeRound(t,e){return this._range=[(0,s.H)(t[0]),(0,s.H)(t[1])],this._round=!0,this.rescale(e)}ticks(t=10){let e=this.calculateVisibleDomain(this._range);return -1===t?e:f(0,e.length-1,t,!1).map(t=>e[t])}tickData(t=10){return this.ticks(t).map((t,e)=>({index:e,tick:t,value:(this.scale(t)-this._range[0]+this._bandwidth/2)/(this._range[1]-this._range[0])}))}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return f(0,e.length-1,t,!0).filter(t=>t<e.length).map(t=>e[t])}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(function(t,e,i){let r;if(e=Math.floor(+e),t=Math.floor(+t),i=(0,d.i)(1,e-t+1)(Math.floor(+i)),r=e<t){let i=t;t=e,e=i}return p(t,e,i,r)})(0,e.length-1,t).map(t=>e[t])}_getInvertIndex(t){let e=0,i=this.step()/2,r=this.bandwidth()/2,n=this._domain.length,s=this.range(),o=s[0]>s[s.length-1];for(e=0;e<n;e++){let s=this.scale(this._domain[e])+r;if(0===e&&(!o&&!(0,a.Vy)(t,s+i)||o&&!(0,a.SQ)(t,s-i))||e===n-1||!(0,a.SQ)(t,s-i)&&!(0,a.Vy)(t,s+i))break}return e>=0&&e<=n-1?e:n-1}invert(t){return this._domain[this._getInvertIndex(t)]}padding(t,e){return void 0!==t?(this._paddingOuter=Math.max(0,Math.min(Array.isArray(t)?Math.min.apply(null,t):t)),this._paddingInner=this._paddingOuter,this.rescale(e)):this._paddingInner}paddingInner(t,e){return void 0!==t?(this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingInner}paddingOuter(t,e){return void 0!==t?(this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale(e)):this._paddingOuter}step(){return this._step}round(t,e){return void 0!==t?(this._round=t,this.rescale(e)):this._round}align(t,e){return void 0!==t?(this._align=Math.max(0,Math.min(1,t)),this.rescale(e)):this._align}rangeFactor(t,e){return t?(super.rangeFactor(t),this.rescale(e)):super.rangeFactor()}rangeFactorStart(t,e){return(0,o.Z)(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this.rescale(e,"rangeFactorStart"))}rangeFactorEnd(t,e){return(0,o.Z)(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this.rescale(e,"rangeFactorEnd"))}bandwidth(t,e){return t?("auto"===t?(this._bandwidth=void 0,this._isFixed=!1):(this._bandwidth=t,this._isFixed=!0),this._userBandwidth=t,this.rescale(e)):this._bandwidth}maxBandwidth(t,e){return t?(this._maxBandwidth="auto"===t?void 0:t,this.rescale(e)):this._maxBandwidth}minBandwidth(t,e){return t?(this._minBandwidth="auto"===t?void 0:t,this.rescale(e)):this._minBandwidth}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}isBandwidthFixed(){return this._isFixed&&!!this._bandwidth}_isBandwidthFixedByUser(){return this._isFixed&&this._userBandwidth&&(0,l.Z)(this._userBandwidth)}clone(){var t,e,i;return new g(!0).domain(this._domain,!0).range(this._range,!0).round(this._round,!0).paddingInner(this._paddingInner,!0).paddingOuter(this._paddingOuter,!0).align(this._align,!0).bandwidth(null!=(t=this._userBandwidth)?t:"auto",!0).maxBandwidth(null!=(e=this._maxBandwidth)?e:"auto",!0).minBandwidth(null!=(i=this._maxBandwidth)?i:"auto")}}},41399:function(t,e,i){"use strict";i.d(e,{s:()=>o});var r=i(64776),n=i(54326),s=i(94030),a=i(18181);class o{constructor(){this._rangeFactorStart=null,this._rangeFactorEnd=null}_calculateWholeRange(t){return this._wholeRange?this._wholeRange:(0,r.Z)(this._rangeFactorStart)&&(0,r.Z)(this._rangeFactorEnd)&&2===t.length?(this._wholeRange=(0,a.BK)(t,[this._rangeFactorStart,this._rangeFactorEnd]),this._wholeRange):t}rangeFactor(t,e,i){return t?(2===t.length&&t.every(t=>t>=0&&t<=1)&&(this._wholeRange=null,0===t[0]&&1===t[1]?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t[0],this._rangeFactorEnd=t[1])),this):i?(this._wholeRange=null,this._rangeFactorStart=null,this._rangeFactorEnd=null,this):(0,r.Z)(this._rangeFactorStart)&&(0,r.Z)(this._rangeFactorEnd)?[this._rangeFactorStart,this._rangeFactorEnd]:null}rangeFactorStart(t,e){var i;return(0,n.Z)(t)?this._rangeFactorStart:(t>=0&&t<=1&&(this._wholeRange=null,0===t&&((0,n.Z)(this._rangeFactorEnd)||1===this._rangeFactorEnd)?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorStart=t,this._rangeFactorEnd=null!=(i=this._rangeFactorEnd)?i:1)),this)}rangeFactorEnd(t,e){var i;return(0,n.Z)(t)?this._rangeFactorEnd:(t>=0&&t<=1&&(this._wholeRange=null,0===t&&((0,n.Z)(this._rangeFactorStart)||0===this._rangeFactorStart)?(this._rangeFactorStart=null,this._rangeFactorEnd=null):(this._rangeFactorEnd=t,this._rangeFactorStart=null!=(i=this._rangeFactorStart)?i:0)),this)}generateFishEyeTransform(){var t;if(!this._fishEyeOptions)return void(this._fishEyeTransform=null);let{distortion:e=2,radiusRatio:i=.1,radius:r}=this._fishEyeOptions,a=this.range(),o=a[0],l=a[a.length-1],h=Math.min(o,l),u=Math.max(o,l),c=(0,s.Z)(null!=(t=this._fishEyeOptions.focus)?t:0,h,u),d=(0,n.Z)(r)?(u-h)*i:r,p=Math.exp(e);p=p/(p-1)*d;let f=e/d;this._fishEyeTransform=t=>{let e=Math.abs(t-c);return e>=d?t:e<=1e-6?c:c+(t-c)*(p*(1-Math.exp(-e*f))/e*.75+.25)}}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}get(t,e){var i;return null!=(i=null==this?void 0:this[t])?i:e}}},55691:function(t,e,i){"use strict";i.d(e,{y:()=>f});var r=i(41399),n=i(39126),s=i(54326),a=i(73619),o=i(60692);let{interpolateRgb:l}=n;function h(t,e){let i,r=typeof e;if((0,s.Z)(e)||"boolean"===r)return()=>e;if("number"===r)return(0,a.k4)(t,e);if("string"===r){if(i=o.Il.parseColorString(e)){let e=l(o.Il.parseColorString(t),i);return t=>e(t).formatRgb()}return(0,a.k4)(Number(t),Number(e))}return e instanceof o.eX?l(t,e):e instanceof o.Il?l(t.color,e.color):e instanceof Date?(0,a.NW)(t,e):(0,a.k4)(Number(t),Number(e))}var u=i(18181),c=i(64776),d=i(80097),p=i(53739);class f extends r.s{constructor(t=u.yR,e=u.yR){super(),this._unknown=void 0,this.transformer=t,this.untransformer=e,this._forceAlign=!0,this._domain=[0,1],this._range=[0,1],this._clamp=u.yR,this._piecewise=u.Pd,this._interpolate=h}calculateVisibleDomain(t){var e;return(0,c.Z)(this._rangeFactorStart)&&(0,c.Z)(this._rangeFactorEnd)&&2===t.length?[this.invert(t[0]),this.invert(t[1])]:null!=(e=this._niceDomain)?e:this._domain}fishEye(t,e,i){return t||i?(this._fishEyeOptions=t,this._fishEyeTransform=null,this.rescale(e)):this._fishEyeOptions}scale(t){var e;if(Number.isNaN(t=Number(t))||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise((null!=(e=this._niceDomain)?e:this._domain).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));let i=this._output(this.transformer(this._clamp(t)));return this._fishEyeTransform?this._fishEyeTransform(i):i}invert(t){var e;return this._input||(this._input=this._piecewise(this._calculateWholeRange(this._range),(null!=(e=this._niceDomain)?e:this._domain).map(this.transformer),a.k4)),this._clamp(this.untransformer(this._input(t)))}domain(t,e){var i;if(!t)return(null!=(i=this._niceDomain)?i:this._domain).slice();this._domainValidator=null,this._niceType=null,this._niceDomain=null;let r=Array.from(t,d.H);return this._domain=r,this.rescale(e)}range(t,e){if(!t)return this._range.slice();let i=Array.from(t);return this._range=i,this.rescale(e)}rangeRound(t,e){let i=Array.from(t);return this._range=i,this._interpolate=a.OD,this.rescale(e)}rescale(t){var e;if(t)return this;let i=null!=(e=this._niceDomain)?e:this._domain,r=i.length,n=this._range.length,s=Math.min(r,n);if(r&&r<n&&this._forceAlign){let t=n-r+1,e=i[r-1],a=r>=2?(e-i[r-2])/t:0;for(let n=1;n<=t;n++)i[r-2+n]=e-a*(t-n);s=n}return this._autoClamp&&(this._clamp=(0,p.i)(i[0],i[s-1])),this._piecewise=s>2?u.PP:u.Pd,this._output=this._input=null,this._wholeRange=null,this.generateFishEyeTransform(),this}clamp(t,e,i){return arguments.length?(e?(this._autoClamp=!1,this._clamp=e):(this._autoClamp=!!t,this._clamp=t?void 0:u.yR),this.rescale(i)):this._clamp!==u.yR}interpolate(t,e){return arguments.length?(this._interpolate=t,this.rescale(e)):this._interpolate}ticks(t=10){return[]}tickData(t=10){let e=this.ticks(t);return(null!=e?e:[]).map((t,e)=>({index:e,tick:t,value:(this.scale(t)-this._range[0])/(this._range[1]-this._range[0])}))}rangeFactor(t,e){return t?(super.rangeFactor(t),this._output=this._input=null,this):super.rangeFactor()}rangeFactorStart(t,e){return(0,s.Z)(t)?super.rangeFactorStart():(super.rangeFactorStart(t),this._output=this._input=null,this)}rangeFactorEnd(t,e){return(0,s.Z)(t)?super.rangeFactorEnd():(super.rangeFactorEnd(t),this._output=this._input=null,this)}forceAlignDomainRange(t){return arguments.length?(this._forceAlign=t,this):this._forceAlign}}},10145:function(t,e,i){"use strict";i.d(e,{f:()=>l});var r=i(37196),n=i(55405),s=i(55691),a=i(96241),o=i(64776);class l extends s.y{constructor(){super(...arguments),this.type=r._f.Linear}clone(){var t;let e=new l;return e.domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate),this._niceType&&(e._niceType=this._niceType,e._domainValidator=this._domainValidator,e._niceDomain=null==(t=this._niceDomain)?void 0:t.slice()),e}tickFormat(){return()=>{}}d3Ticks(t=10,e){let i=this.calculateVisibleDomain(this._range);return(0,n.Z6)(i[0],i[i.length-1],t,e)}ticks(t=10,e){var i;if((0,a.Z)(null==e?void 0:e.customTicks))return e.customTicks(this,t);if((0,o.Z)(this._rangeFactorStart)&&(0,o.Z)(this._rangeFactorEnd)&&(this._rangeFactorStart>0||this._rangeFactorEnd<1)&&2===this._range.length||!this._niceType)return this.d3Ticks(t,e);let r=null!=(i=this._niceDomain)?i:this._domain,s=this._domain,l=r[0],h=r[r.length-1],u=(0,n.sd)(s[0],s[s.length-1],t,e);if(!u.length)return u;if(this._domainValidator)u=u.filter(this._domainValidator);else if((u[0]!==l||u[u.length-1]!==h)&&this._niceType){let t=r.slice();if("all"===this._niceType?(t[0]=u[0],t[t.length-1]=u[u.length-1],this._niceDomain=t,this.rescale()):"min"===this._niceType&&u[0]!==l?(t[0]=u[0],this._niceDomain=t,this.rescale()):"max"===this._niceType&&u[u.length-1]!==h&&(t[t.length-1]=u[u.length-1],this._niceDomain=t,this.rescale()),"all"!==this._niceType){let e=Math.min(t[0],t[t.length-1]),i=Math.max(t[0],t[t.length-1]);u=u.filter(t=>t>=e&&t<=i)}}return u}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,n.S8)(e[0],e[e.length-1],t)}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(0,n.Hb)(e[0],e[e.length-1],t)}nice(t=10,e){var i,r;let s=this._domain,a=[];if(e){let t=(0,n.OQ)(s,e);if(a=t.niceMinMax,this._domainValidator=t.domainValidator,this._niceType=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else this._niceType="all";if(this._niceType){let e=(0,n.EL)(s.slice(),t);"min"===this._niceType?e[e.length-1]=null!=(i=a[1])?i:e[e.length-1]:"max"===this._niceType&&(e[0]=null!=(r=a[0])?r:e[0]),this._niceDomain=e,this.rescale()}return this}niceMin(t=10){this._niceType="min";let e=this._domain[this._domain.length-1],i=(0,n.EL)(this.domain(),t);return i&&(i[i.length-1]=e,this._niceDomain=i,this.rescale()),this}niceMax(t=10){this._niceType="max";let e=this._domain[0],i=(0,n.EL)(this._domain.slice(),t);return i&&(i[0]=e,this._niceDomain=i,this.rescale()),this}}},50151:function(t,e,i){"use strict";i.d(e,{n:()=>s});var r=i(55405),n=i(18181);class s{nice(t=10,e){var i,s,a,o;let l=this._domain,h=[],u=null;if(e){let t=(0,r.OQ)(l,e);if(h=t.niceMinMax,this._domainValidator=t.domainValidator,u=t.niceType,t.niceDomain)return this._niceDomain=t.niceDomain,this.rescale(),this}else u="all";if(u){let t=(0,n.kx)(l.slice(),null!=(s=null==(i=this.getNiceConfig)?void 0:i.call(this))?s:{floor:t=>Math.floor(t),ceil:t=>Math.ceil(t)});return"min"===u?t[t.length-1]=null!=(a=h[1])?a:t[t.length-1]:"max"===u&&(t[0]=null!=(o=h[0])?o:t[0]),this._niceDomain=t,this.rescale(),this}return this}niceMin(){let t=this._domain[this._domain.length-1];this.nice();let e=this._domain.slice();return this._domain&&(e[e.length-1]=t,this._niceDomain=e,this.rescale()),this}niceMax(){let t=this._domain[0];this.nice();let e=this._domain.slice();return this._domain&&(e[0]=t,this._niceDomain=e,this.rescale()),this}}},65880:function(t,e,i){"use strict";i.d(e,{Y:()=>u});var r=i(55405),n=i(55691),s=i(37196),a=i(18181),o=i(12430),l=i(50151);function h(t=Number.EPSILON){return e=>Math.max(e,t)}class u extends n.y{constructor(){super((0,a.J7)(10),(0,a.ye)(10)),this.type=s._f.Log,this._limit=h(),this._logs=this.transformer,this._pows=this.untransformer,this._domain=[1,10],this._base=10}clone(){return(new u).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).base(this._base)}rescale(t){var e;if(t)return this;super.rescale();let i=(0,a.J7)(this._base),r=(0,a.ye)(this._base);return(null!=(e=this._niceDomain)?e:this._domain)[0]<0?(this._logs=t=>-i(-t),this._pows=t=>-r(-t),this._limit=function(t=Number.EPSILON){return e=>Math.min(e,-t)}(),this.transformer=a.op,this.untransformer=a.ge):(this._logs=i,this._pows=r,this._limit=h(),this.transformer=this._logs,this.untransformer=r),this}scale(t){var e;if(Number.isNaN(t=Number(t))||this._domainValidator&&!this._domainValidator(t))return this._unknown;this._output||(this._output=this._piecewise((null!=(e=this._niceDomain)?e:this._domain).map(this._limit).map(this.transformer),this._calculateWholeRange(this._range),this._interpolate));let i=this._output(this.transformer(this._limit(this._clamp(t))));return this._fishEyeTransform?this._fishEyeTransform(i):i}base(t,e){return arguments.length?(this._base=t,this.rescale(e)):this._base}tickFormat(){return a.yR}d3Ticks(t=10,e){let i=this.domain(),n=this._limit(i[0]),s=this._limit(i[i.length-1]);return(0,r.e3)(n,s,t,this._base,this.transformer,this.untransformer,e)}ticks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,r.jb)(this._limit(e[0]),this._limit(e[e.length-1]),t,this._base,this.transformer,this.untransformer)}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,r.RX)(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(0,r.RX)(this._limit(e[0]),this._limit(e[e.length-1]),t,this.transformer,this.untransformer)}getNiceConfig(){return{floor:t=>this._pows(Math.floor(this._logs(this._limit(t)))),ceil:t=>Math.abs(t)>=1?Math.ceil(t):this._pows(Math.ceil(this._logs(this._limit(t))))}}}(0,o.jB)(u,l.n)},11809:function(t,e,i){"use strict";i.d(e,{J:()=>o,O:()=>a});var r=i(37196),n=i(41399),s=i(64776);let a=Symbol("implicit");class o extends n.s{specified(t){var e;return t?(this._specified=Object.assign(null!=(e=this._specified)?e:{},t),this):Object.assign({},this._specified)}_getSpecifiedValue(t){if(this._specified)return this._specified[t]}constructor(){super(),this.type=r._f.Ordinal,this._index=new Map,this._domain=[],this._ordinalRange=[],this._unknown=a}clone(){let t=(new o).domain(this._domain).range(this._ordinalRange).unknown(this._unknown);return this._specified&&t.specified(this._specified),t}calculateVisibleDomain(t){return(0,s.Z)(this._rangeFactorStart)&&(0,s.Z)(this._rangeFactorEnd)&&2===t.length?[this.invert(t[0]),this.invert(t[1])]:this._domain}scale(t){let e=`${t}`,i=this._getSpecifiedValue(e);if(void 0!==i)return i;let r=this._index.get(e);if(!r){if(this._unknown!==a)return this._unknown;r=this._domain.push(t),this._index.set(e,r)}let n=this._ordinalRange[(r-1)%this._ordinalRange.length];return this._fishEyeTransform?this._fishEyeTransform(n):n}invert(t){let e=0;for(;e<this._ordinalRange.length&&this._ordinalRange[e]!==t;)e++;return this._domain[(e-1)%this._domain.length]}domain(t){if(!t)return this._domain.slice();for(let e of(this._domain=[],this._index=new Map,t)){let t=`${e}`;this._index.has(t)||this._index.set(t,this._domain.push(e))}return this}range(t){if(!t)return this._ordinalRange.slice();let e=Array.from(t);return this._ordinalRange=e,this}index(t){var e;return this._index&&null!=(e=this._index.get(`${t}`))?e:-1}}},6119:function(t,e,i){"use strict";i.d(e,{Y:()=>s});var r=i(37196),n=i(68390);class s extends n.j{constructor(t){super(!1),this.type=r._f.Point,this._padding=0,this.paddingInner(1,t),this.padding=this.paddingOuter,this.paddingInner=void 0,this.paddingOuter=void 0}}},1466:function(t,e,i){"use strict";i.d(e,{g:()=>h});var r=i(12430),n=i(10145),s=i(37196),a=i(55405),o=i(18181),l=i(50151);class h extends n.f{constructor(){super((0,o.QG)(1),(0,o.Xw)(1)),this.type=s._f.Symlog,this._const=1}clone(){return(new h).domain(this._domain,!0).range(this._range,!0).unknown(this._unknown).clamp(this.clamp(),null,!0).interpolate(this._interpolate,!0).constant(this._const)}constant(t,e){return arguments.length?(this._const=t,this.transformer=(0,o.QG)(t),this.untransformer=(0,o.Xw)(t),this.rescale(e)):this._const}d3Ticks(t=10,e){let i=this.domain(),r=i[0],n=i[i.length-1];return(0,a.e3)(r,n,t,this._const,this.transformer,this.untransformer,e)}ticks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,a.jb)(e[0],e[e.length-1],t,this._const,this.transformer,this.untransformer)}forceTicks(t=10){let e=this.calculateVisibleDomain(this._range);return(0,a.RX)(e[0],e[e.length-1],t,this.transformer,this.untransformer)}stepTicks(t){let e=this.calculateVisibleDomain(this._range);return(0,a.RX)(e[0],e[e.length-1],t,this.transformer,this.untransformer)}}(0,r.jB)(h,l.n)},71881:function(t,e,i){"use strict";i.d(e,{v:()=>o});var r=i(54326),n=i(89530),s=i(51400),a=i(37196);class o{constructor(){this.type=a._f.Threshold,this._range=[0,1],this._domain=[.5],this.n=1}unknown(t){return arguments.length?(this._unknown=t,this):this._unknown}scale(t){return!(0,r.Z)(t)&&(0,n.Z)(+t)?this._range[(0,s.b4)(this._domain,t,0,this.n)]:this._unknown}invertExtent(t){let e=this._range.indexOf(t);return[this._domain[e-1],this._domain[e]]}domain(t){return t?(this._domain=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._domain.slice()}range(t){return t?(this._range=Array.from(t),this.n=Math.min(this._domain.length,this._range.length-1),this):this._range.slice()}clone(){return(new o).domain(this._domain).range(this._range).unknown(this._unknown)}}},37196:function(t,e,i){"use strict";var r,n;i.d(e,{_f:()=>r,dx:()=>o,lK:()=>l,z2:()=>a}),(n=r||(r={})).Identity="identity",n.Linear="linear",n.Log="log",n.Pow="pow",n.Sqrt="sqrt",n.Symlog="symlog",n.Time="time",n.Quantile="quantile",n.Quantize="quantize",n.Threshold="threshold",n.Ordinal="ordinal",n.Point="point",n.Band="band";let s={};function a(t){switch(t){case r.Linear:case r.Log:case r.Pow:case r.Sqrt:case r.Symlog:case r.Time:return!0;default:return!1}}function o(t){return!!s[t]}function l(t){switch(t){case r.Ordinal:case r.Point:case r.Band:return!0;default:return!1}}Object.values(r).forEach(t=>{s[t]=!0})},55405:function(t,e,i){"use strict";i.d(e,{EL:()=>b,Hb:()=>v,OQ:()=>x,RX:()=>A,S8:()=>y,Z6:()=>c,e3:()=>w,jb:()=>S,sd:()=>f});var r=i(14616),n=i(68432),s=i(4654),a=i(18181);let o=Math.sqrt(50),l=Math.sqrt(10),h=Math.sqrt(2),u=(t,e,i)=>{let n=1,s=t,a=Math.floor((e-1)/2),o=Math.abs(t);return t>=0&&t<=Number.MIN_VALUE?s=0:t<0&&t>=-Number.MIN_VALUE?s=-(e-1):!i&&o<1?n=g(o).step:(i||o>1)&&(s=Math.floor(t)-a*n),n>0?(t>0?s=Math.max(s,0):t<0&&(s=Math.min(s,-(e-1)*n)),(0,r.w)(0,e).map(t=>s+t*n)):t>0?d(0,-(e-1)/n,n):d((e-1)/n,0,n)},c=(0,n.H)((t,e,i,r)=>{let n,s,a,o,l=-1;if(i*=1,(t*=1)==(e*=1)||Math.abs(t-e)<=Number.MIN_VALUE&&i>0)return[t];if((n=e<t)&&(s=t,t=e,e=s),!isFinite(o=m(t,e,i).step))return[];if(o>0){let i=Math.round(t/o),r=Math.round(e/o);for(i*o<t&&++i,r*o>e&&--r,a=Array(s=r-i+1);++l<s;)a[l]=(i+l)*o}else if(o<0&&(null==r?void 0:r.noDecimals)){o=1;let i=Math.ceil(t),r=Math.floor(e);if(!(i<=r))return[];for(a=Array(s=r-i+1);++l<s;)a[l]=i+l}else{let i=Math.round(t*(o=-o)),r=Math.round(e*o);for(i/o<t&&++i,r/o>e&&--r,a=Array(s=r-i+1);++l<s;)a[l]=(i+l)/o}return n&&a.reverse(),a}),d=(t,e,i)=>{let r,n,s=-1;if(i>0){let a=Math.floor(t/i),o=Math.ceil(e/i);for((a+1)*i<t&&++a,(o-1)*i>e&&--o,n=Array(r=o-a+1);++s<r;)n[s]=(a+s)*i}else{let a=Math.floor(t*(i=-i)),o=Math.ceil(e*i);for((a+1)/i<t&&++a,(o-1)/i>e&&--o,n=Array(r=o-a+1);++s<r;)n[s]=(a+s)/i}return n},p=(t,e,i)=>{let r,n=t[0],s=t[t.length-1],a=e-t.length;if(s<=0){let e=[];for(r=a;r>=1;r--)e.push(n-r*i);return e.concat(t)}if(n>=0){for(r=1;r<=a;r++)t.push(s+r*i);return t}let o=[],l=[];for(r=1;r<=a;r++)r%2==0?o=[n-Math.floor(r/2)*i].concat(o):l.push(s+Math.ceil(r/2)*i);return o.concat(t).concat(l)},f=(0,n.H)((t,e,i,r)=>{let n,s,a;if(i*=1,(t*=1)==(e*=1)||Math.abs(t-e)<=Number.MIN_VALUE&&i>0)return u(t,i,null==r?void 0:r.noDecimals);(n=e<t)&&(a=t,t=e,e=a);let o=m(t,e,i),l=o.step;if(!isFinite(l))return[];if(l>0){let r=1,{power:n,gap:a}=o,h=10===a?2*10**n:+(10**n);for(;r<=5&&(s=d(t,e,l)).length>i+1&&i>2;)l+=h,r+=1;i>2&&s.length<i-1&&(s=p(s,i,l))}else(null==r?void 0:r.noDecimals)&&l<0&&(l=1),s=d(t,e,l);return n&&s.reverse(),s}),g=t=>{let e=Math.floor(Math.log(t)/Math.LN10),i=t/10**e,r=1;return i>=o?r=10:i>=l?r=5:i>=h&&(r=2),e>=0?{step:r*10**e,gap:r,power:e}:{step:-(10**-e)/r,gap:r,power:e}};function m(t,e,i){return g((e-t)/Math.max(0,i))}function y(t,e,i){let r;if(i*=1,(t*=1)==(e*=1)&&i>0)return[t];if(i<=0||0==(r=(e-t)/Math.max(1,i-1))||!isFinite(r))return[];let n=Array(i);for(let e=0;e<i;e++)n[e]=t+e*r;return n}function v(t,e,i){let r,n,s=-1;if(i*=1,(n=(e*=1)<(t*=1))&&(r=t,t=e,e=r),!isFinite(i)||e-t<=i)return[t];let a=Math.floor((e-t)/i+1),o=Array(a);for(;++s<a;)o[s]=t+s*i;return n&&o.reverse(),o}function b(t,e=10){let i,r,n=0,s=t.length-1,a=t[n],o=t[s],l=10;for(o<a&&(r=a,a=o,o=r,r=n,n=s,s=r);l-- >0;){if((r=m(a,o,e).step)===i)return t[n]=a,t[s]=o,t;if(r>0)a=Math.floor(a/r)*r,o=Math.ceil(o/r)*r;else{if(!(r<0))break;a=Math.ceil(a*r)/r,o=Math.floor(o*r)/r}i=r}}function x(t,e){let i=(0,s.Z)(e.forceMin),r=(0,s.Z)(e.forceMax),n=null,a=[],o=null,l=i&&r?t=>t>=e.forceMin&&t<=e.forceMax:i?t=>t>=e.forceMin:r?t=>t<=e.forceMax:null;return i?a[0]=e.forceMin:(0,s.Z)(e.min)&&e.min<=Math.min(t[0],t[t.length-1])&&(a[0]=e.min),r?a[1]=e.forceMax:(0,s.Z)(e.max)&&e.max>=Math.max(t[0],t[t.length-1])&&(a[1]=e.max),(0,s.Z)(a[0])&&(0,s.Z)(a[1])?((o=t.slice())[0]=a[0],o[o.length-1]=a[1]):n=(0,s.Z)(a[0])||(0,s.Z)(a[1])?(0,s.Z)(a[0])?"max":"min":"all",{niceType:n,niceDomain:o,niceMinMax:a,domainValidator:l}}let _=(t,e,i)=>1>Math.abs(e-t)?+i.toFixed(1):Math.round(+i),w=(0,n.H)((t,e,i,r,n,s,a)=>{let o=t,l=e,h=l<o;h&&([o,l]=[l,o]);let u,c,d=n(o),p=n(l),g=[];if(!(r%1)&&p-d<i){if(d=Math.floor(d),p=Math.ceil(p),o>0){for(;d<=p;++d)for(u=1;u<r;++u)if(!((c=d<0?u/s(-d):u*s(d))<o)){if(c>l)break;g.push(c)}}else for(;d<=p;++d)for(u=r-1;u>=1;--u)if(!((c=d>0?u/s(-d):u*s(d))<o)){if(c>l)break;g.push(c)}2*g.length<i&&(g=f(o,l,i))}else g=f(d,p,Math.min(p-d,i)).map(s);return g=g.filter(t=>0!==t),(null==a?void 0:a.noDecimals)&&(g=Array.from(new Set(g.map(t=>Math.floor(t))))),h?g.reverse():g}),S=(0,n.H)((t,e,i,r,n,s)=>{let o=[],l={},h=n(t),u=n(e),c=[];if(Number.isInteger(r))c=f(h,u,i);else{let t=(u-h)/(i-1);for(let e=0;e<i;e++)c.push(h+e*t)}return c.forEach(i=>{let n=s(i),h=Number.isInteger(r)?_(t,e,n):_(t,e,(0,a.ok)(n)),u=_(t,e,(0,a.uT)(h,[t,e]));l[u]||isNaN(u)||!(c.length>1)||(l[u]=1,o.push(u))}),o}),A=(0,n.H)((t,e,i,r,n)=>y(r(t),r(e),i).map(t=>(0,a.ok)(n(t))));(0,n.H)((t,e,i,r,n)=>v(r(t),r(e),i).map(t=>(0,a.ok)(n(t))))},18181:function(t,e,i){"use strict";i.d(e,{$l:()=>g,BK:()=>y,J7:()=>h,PP:()=>v,Pd:()=>p,QG:()=>u,U6:()=>f,Xw:()=>c,at:()=>m,ge:()=>a,kx:()=>b,ok:()=>x,op:()=>s,uT:()=>_,yR:()=>n,ye:()=>l});var r=i(51400);function n(t){return t}let s=t=>-Math.log(-t),a=t=>-Math.exp(-t),o=t=>isFinite(t)?Math.pow(10,t):t<0?0:t,l=t=>10===t?o:t===Math.E?Math.exp:e=>Math.pow(t,e),h=t=>t===Math.E?Math.log:10===t?Math.log10:2===t?Math.log2:(t=Math.log(t),e=>Math.log(e)/t),u=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),c=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t;function d(t,e){if(t=Number(t),e=Number(e)-t)return i=>(i-t)/e;let i=Number.isNaN(e)?NaN:.5;return()=>i}function p(t,e,i){let r,n,s=t[0],a=t[1],o=e[0],l=e[1];return a<s?(r=d(a,s),n=i(l,o)):(r=d(s,a),n=i(o,l)),t=>n(r(t))}function f(t,e,i){let r;return r=1===t?t+2*i:t-e+2*i,t?r>0?r:1:0}function g(t,e,i,r){return 1===i&&(i=0),f(t,i,r)*(e/(1-i))}function m(t,e,i,r,n){let s=e/Math.max(1,f(t,i,r)||1);n&&(s=Math.floor(s));let a=s*(1-i);return n&&(a=Math.round(a)),a}function y(t,e){let i=(t[1]-t[0])/(e[1]-e[0]),r=t[0]-i*e[0];return[r,i+r]}function v(t,e,i){let n=Math.min(t.length,e.length)-1,s=Array(n),a=Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=d(t[o],t[o+1]),a[o]=i(e[o],e[o+1]);return function(e){let i=(0,r.b4)(t,e,1,n)-1;return a[i](s[i](e))}}let b=(t,e)=>{let i=t.slice(),r=0,n=i.length-1,s=i[r],a=i[n];return a<s&&([r,n]=[n,r],[s,a]=[a,s]),i[r]=e.floor(s),i[n]=e.ceil(a),i},x=(t,e=!1)=>{let i=Math.floor(Math.log10(t)),r=t/Math.pow(10,i);return(e?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,i)},_=(t,e)=>{let i,r;return e[0]<e[1]?(i=e[0],r=e[1]):(i=e[1],r=e[0]),Math.min(Math.max(t,i),r)}},39873:function(t,e,i){"use strict";i.d(e,{u:()=>o});var r=i(96766),n=i(65755),s=i(28919);let a=t=>(0,s.v)(t)||(0,r.Re)(t);function o(t,e=["data"]){return(0,n.Z)(t,a,e)}},86624:function(t,e,i){"use strict";function r(t){return Math.PI/180*t}function n(t,e,i){return e?{x:t.x+e*Math.cos(i),y:t.y+e*Math.sin(i)}:{x:t.x,y:t.y}}i.d(e,{M4:()=>r,op:()=>n})},9706:function(t,e,i){"use strict";i.d(e,{CE:()=>a,IX:()=>s,Sy:()=>l,iH:()=>o});var r=i(37651),n=i(14688);function s(t){return(0,n.Z)(t)?(0,r.Z)(t)?t:[t]:[]}let a=(t,e)=>{var i;if(0===t.length)return;let r=t[0];for(let n=1;n<t.length;n++){let s=t[n];(null!=(i=null==e?void 0:e(s,r))?i:s-r)>0&&(r=s)}return r},o=(t,e)=>{var i;if(0===t.length)return;let r=t[0];for(let n=1;n<t.length;n++){let s=t[n];(null!=(i=null==e?void 0:e(s,r))?i:s-r)<0&&(r=s)}return r};function l(t,e=Math.random){let i,r,n=t.length;for(;n;)i=Math.floor(e()*n),r=t[--n],t[n]=t[i],t[i]=r;return t}},45501:function(t,e,i){"use strict";i.d(e,{Hr:()=>a,b4:()=>s});var r=i(50890),n=i(37258);function s(t,e,i=0,n){for((0,r.Z)(n)&&(n=t.length);i<n;){var a;let r=i+n>>>1;((a=t[r])<e?-1:a>e?1:a>=e?0:NaN)>0?n=r:i=r+1}return i}function a(t,e,i,r){var s,a;let o=null!=(s=null==r?void 0:r.maxIterations)?s:100,l=null!=(a=null==r?void 0:r.tolerance)?a:1e-10,h=t(e),u=t(i),c=i-e;if(h*u>0)return n.Y.getInstance().error("Initial bisect points must have opposite signs"),NaN;if(0===h)return e;if(0===u)return i;for(let i=0;i<o;++i){let i=e+(c/=2),r=t(i);if(r*h>=0&&(e=i),Math.abs(c)<l||0===r)return i}return e+c}},43122:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=function(t,e,i){return t<e?e:t>i?i:t}},69988:function(t,e,i){"use strict";function r(t,e){let i;return t>e&&(i=t,t=e,e=i),i=>Math.max(t,Math.min(e,i))}i.d(e,{i:()=>r})},70082:function(t,e,i){"use strict";i.d(e,{RF:()=>u,EP:()=>h});var r=i(83510);let n=(t,e,i)=>{let n=(0,r.Z)(e)?e.split("."):e;for(let e=0;e<n.length;e++)t=t?t[n[e]]:void 0;return void 0===t?i:t};var s=i(37651),a=i(65709);let o=t=>e=>n(e,t),l=(t,e={})=>{if((0,a.Z)(t))return t;let i=[t];return(e&&e.get||o)(i)},h=(t,e={})=>{if((0,s.Z)(t)){let i=t.map(t=>l(t,e));return t=>i.map(e=>e(t))}return l(t,e)},u=t=>t?"string"==typeof t||"number"==typeof t?()=>t:(0,a.Z)(t)?t:e=>e[t.field]:null},37651:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(58470);let n=t=>Array.isArray?Array.isArray(t):(0,r.Z)(t,"Array")},58862:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=function(t){return null!==t&&"function"!=typeof t&&Number.isFinite(t.length)}},65709:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>"function"==typeof t},50890:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>null==t},61369:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(58470);let n=(t,e=!1)=>{let i=typeof t;return e?"number"===i:"number"===i||(0,r.Z)(t,"Number")}},19185:function(t,e,i){"use strict";i.d(e,{Z:()=>s});let r=t=>"object"==typeof t&&null!==t;var n=i(58470);let s=function(t){if(!r(t)||!(0,n.Z)(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},83510:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(58470);let n=(t,e=!1)=>{let i=typeof t;return e?"string"===i:"string"===i||(0,r.Z)(t,"String")}},58470:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=(t,e)=>Object.prototype.toString.call(t)===`[object ${e}]`},14688:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>null!=t},19600:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(61369);let n=t=>(0,r.Z)(t)&&Number.isFinite(t)},19461:function(t,e,i){"use strict";i.d(e,{Z:()=>l});var r=i(37651),n=i(58862),s=i(19185),a=i(14688);function o(t,e,i){var r,n;(void 0===i||(r=t[e],r===(n=i)||Number.isNaN(r)&&Number.isNaN(n)))&&(void 0!==i||e in t)||(t[e]=i)}function l(t,...e){let i=-1,h=e.length;for(;++i<h;)!function t(e,i,l=!1,h=!1){if(i&&e!==i&&(0,a.Z)(i)&&"object"==typeof i){let u=Object(i),c=[];for(let t in u)c.push(t);let{length:d}=c,p=-1;for(;d--;){let d=c[++p];!(0,a.Z)(u[d])||"object"!=typeof u[d]||h&&(0,r.Z)(e[d])?o(e,d,u[d]):function(e,i,a,l=!1,h=!1){let u=e[a],c=i[a],d=i[a],p=!0;if((0,r.Z)(c)){if(l)d=[];else if((0,r.Z)(u))d=u;else if((0,n.Z)(u)){d=Array(u.length);let t=-1,e=u.length;for(;++t<e;)d[t]=u[t]}}else(0,s.Z)(c)?(d=null!=u?u:{},"function"!=typeof u&&"object"==typeof u||(d={})):p=!1;p&&t(d,c,l,h),o(e,a,d)}(e,i,d,l,h)}}}(t,e[i],!0);return t}},82206:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(19185),n=i(83510);function s(t,e){if(!t||!(0,r.Z)(t))return t;let i={};return Object.keys(t).forEach(r=>{let s=t[r],a=!1;e.forEach(t=>{((0,n.Z)(t)&&t===r||t instanceof RegExp&&r.match(t))&&(a=!0)}),a||(i[r]=s)}),i}},89079:function(t,e,i){"use strict";function r(t){return parseFloat("0."+Math.sin(t).toString().substring(6))}function n(t=1){let e=t;return()=>(e=(1664525*e+0x3c6ef35f)%0x100000000)/0x100000000}i.d(e,{JY:()=>n,b8:()=>r,s6:()=>s});let s=()=>{let t=-1,e=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9];return()=>(t=(t+1)%e.length,e[t])}},51873:function(t,e,i){"use strict";i.d(e,{w:()=>n});var r=i(14688);function n(t,e,i){(0,r.Z)(e)||(e=t,t=0),(0,r.Z)(i)||(i=1);let n=-1,s=0|Math.max(0,Math.ceil((e-t)/i)),a=Array(s);for(;++n<s;)a[n]=t+n*i;return a}},73554:function(t,e,i){"use strict";function r(t){return Number(t)}i.d(e,{H:()=>r})},51318:function(t,e,i){"use strict";i.d(e,{s:()=>n});var r=i(19600);function n(t){if((0,r.Z)(t))return t;let e=+t;return(0,r.Z)(e)?e:0}},37258:function(t,e,i){"use strict";i.d(e,{Y:()=>l});var r,n,s=i(61369);let a="undefined"!=typeof console;function o(t,e,i){let r=[e].concat([].slice.call(i));a&&console[t].apply(console,r)}(r=n||(n={}))[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Info=3]="Info",r[r.Debug=4]="Debug";class l{static getInstance(t,e){return l._instance&&(0,s.Z)(t)?l._instance.level(t):l._instance||(l._instance=new l(t,e)),l._instance}static setInstance(t){return l._instance=t}static setInstanceLevel(t){l._instance?l._instance.level(t):l._instance=new l(t)}static clearInstance(){l._instance=null}constructor(t=n.None,e){this._onErrorHandler=[],this._level=t,this._method=e}addErrorHandler(t){this._onErrorHandler.find(e=>e===t)||this._onErrorHandler.push(t)}removeErrorHandler(t){let e=this._onErrorHandler.findIndex(e=>e===t);e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach(e=>e(...t))}canLogInfo(){return this._level>=n.Info}canLogDebug(){return this._level>=n.Debug}canLogError(){return this._level>=n.Error}canLogWarn(){return this._level>=n.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var e;return this._level>=n.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):o(null!=(e=this._method)?e:"error","ERROR",t)),this}warn(...t){return this._level>=n.Warn&&o(this._method||"warn","WARN",t),this}info(...t){return this._level>=n.Info&&o(this._method||"log","INFO",t),this}debug(...t){return this._level>=n.Debug&&o(this._method||"log","DEBUG",t),this}}l._instance=null},9762:function(t,e,i){"use strict";i.d(e,{Dt:()=>s,Jl:()=>c,LW:()=>p,M4:()=>n,NC:()=>f,Oy:()=>d,Re:()=>g,SJ:()=>l,Zj:()=>a,gt:()=>o,op:()=>u,sO:()=>h,tc:()=>m});var r=i(8830);function n(t){return Math.PI/180*t}function s(t){return 180*t/Math.PI}let a=(t=0)=>{if(t<0)for(;t<-r.BZ;)t+=r.BZ;else if(t>0)for(;t>r.BZ;)t-=r.BZ;return t},o=a,l=(t=0)=>t>360||t<-360?t%360:t,h=l;function u(t,e,i){return e?{x:t.x+e*Math.cos(i),y:t.y+e*Math.sin(i)}:{x:t.x,y:t.y}}function c(t,e={x:0,y:0},i=0,r=2*Math.PI){let{x:n,y:s}=t,{x:a,y:o}=e,l=n-a,h=s-o,u=Math.sqrt(l*l+h*h);if(0===u)return{radius:0,angle:0};l/=u;let d=Math.atan2(h/=u,l);if(d<i)for(;d<=i;)d+=2*Math.PI;if(d>r)for(;d>=r;)d-=2*Math.PI;return{radius:u,angle:d}}function d(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function p(t){for(;t<0;)t+=2*Math.PI;for(;t>=2*Math.PI;)t-=2*Math.PI;return t}function f(t,e){let i=Math.abs(e-t);if(i>=2*Math.PI||2*Math.PI-i<1e-6)return[0,Math.PI/2,Math.PI,1.5*Math.PI];let r=p(Math.min(t,e)),n=r+i,s=[r,n],a=Math.floor(r/Math.PI)*Math.PI/2;for(;a<n;)a>r&&s.push(a),a+=Math.PI/2;return s}function g(t,e,i,r){let{x:n,y:s}=e,a=f(i,r),{width:o,height:l}=t,h=[];return a.forEach(t=>{let e=Math.sin(t),i=Math.cos(t);1===e?h.push(l-s):-1===e?h.push(s):1===i?h.push(o-n):-1===i?h.push(n):(e>0?h.push(Math.abs((l-s)/e)):h.push(Math.abs(s/e)),i>0?h.push(Math.abs((o-n)/i)):h.push(Math.abs(n/i)))}),Math.min.apply(null,h)}function m(t){return(t=p(t))>0&&t<=Math.PI/2?2:t>Math.PI/2&&t<=Math.PI?3:t>Math.PI&&t<=3*Math.PI/2?4:1}},60692:function(t,e,i){"use strict";i.d(e,{Il:()=>v,QP:()=>d,eX:()=>b});var r=i(4654),n=i(95723),s=i(64776),a=i(54326),o=i(94030),l=i(12317),h=i(53026);let u=/^#([0-9a-f]{3,8})$/,c={transparent:0xffffff00},d={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function p(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function f(t){return(0,r.Z)(t)?new b(t>>16,t>>8&255,255&t,1):(0,n.Z)(t)?new b(t[0],t[1],t[2]):new b(255,255,255)}function g(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function m(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let y=(t,e)=>{let i=u.exec(t);if(e||i){let t=parseInt(i[1],16),e=i[1].length;return 3===e?new b((t>>8&15)+((t>>8&15)<<4),(t>>4&15)+((t>>4&15)<<4),(15&t)+((15&t)<<4),1):6===e?f(t):8===e?new b(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):null}};class v{static Brighter(t,e=1){return 1===e?t:new v(t).brighter(e).toRGBA()}static SetOpacity(t,e=1){return 1===e?t:new v(t).setOpacity(e).toRGBA()}static getColorBrightness(t,e="hsl"){let i=t instanceof v?t:new v(t);switch(e){case"hsv":default:return i.getHSVBrightness();case"hsl":return i.getHSLBrightness();case"lum":return i.getLuminance();case"lum2":return i.getLuminance2();case"lum3":return i.getLuminance3();case"wcag":return i.getLuminanceWCAG()}}static parseColorString(t){if((0,s.Z)(c[t])){var e;return e=c[t],(0,r.Z)(e)?new b(e>>>24,e>>>16&255,e>>>8&255,255&e):(0,n.Z)(e)?new b(e[0],e[1],e[2],e[3]):new b(255,255,255,1)}if((0,s.Z)(d[t]))return f(d[t]);let i=`${t}`.trim().toLowerCase(),a=y(i);if(void 0!==a)return a;if(/^(rgb|RGB|rgba|RGBA)/.test(i)){let t=i.replace(/(?:\(|\)|rgba|RGBA|rgb|RGB)*/g,"").split(",");return new b(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),parseFloat(t[3]))}if(/^(hsl|HSL|hsla|HSLA)/.test(i)){let t=i.replace(/(?:\(|\)|hsla|HSLA|hsl|HSL)*/g,"").split(","),e=(0,l.Z)(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10));return new b(e.r,e.g,e.b,parseFloat(t[3]))}}constructor(t){let e=v.parseColorString(t);e?this.color=e:(console.warn(`Warn: 传入${t}无法解析为Color`),this.color=new b(255,255,255))}toRGBA(){return this.color.formatRgb()}toString(){return this.color.formatRgb()}toHex(){return this.color.formatHex()}toHsl(){return this.color.formatHsl()}brighter(t){let{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t))),this}add(t){let{r:e,g:i,b:r}=this.color;return this.color.r+=Math.min(255,e+t.color.r),this.color.g+=Math.min(255,i+t.color.g),this.color.b+=Math.min(255,r+t.color.b),this}sub(t){return this.color.r=Math.max(0,this.color.r-t.color.r),this.color.g=Math.max(0,this.color.g-t.color.g),this.color.b=Math.max(0,this.color.b-t.color.b),this}multiply(t){let{r:e,g:i,b:r}=this.color;return this.color.r=Math.max(0,Math.min(255,Math.floor(e*t.color.r))),this.color.g=Math.max(0,Math.min(255,Math.floor(i*t.color.g))),this.color.b=Math.max(0,Math.min(255,Math.floor(r*t.color.b))),this}getHSVBrightness(){return Math.max(this.color.r,this.color.g,this.color.b)/255}getHSLBrightness(){return .5*(Math.max(this.color.r,this.color.g,this.color.b)/255+Math.min(this.color.r,this.color.g,this.color.b)/255)}setHsl(t,e,i){let r=this.color.opacity,n=(0,h.Z)(this.color.r,this.color.g,this.color.b),s=(0,l.Z)((0,a.Z)(t)?n.h:(0,o.Z)(t,0,360),(0,a.Z)(e)?n.s:e>=0&&e<=1?100*e:e,(0,a.Z)(i)?n.l:i<=1&&i>=0?100*i:i);return this.color=new b(s.r,s.g,s.b,r),this}setRGB(t,e,i){return(0,a.Z)(t)||(this.color.r=t),(0,a.Z)(e)||(this.color.g=e),(0,a.Z)(i)||(this.color.b=i),this}setHex(t){let e=y(`${t}`.trim().toLowerCase(),!0);return null!=e?e:this}setColorName(t){let e=d[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}setScalar(t){return this.color.r=t,this.color.g=t,this.color.b=t,this}setOpacity(t=1){return this.color.opacity=t,this}getLuminance(){return(.2126*this.color.r+.7152*this.color.g+.0722*this.color.b)/255}getLuminance2(){return(.2627*this.color.r+.678*this.color.g+.0593*this.color.b)/255}getLuminance3(){return(.299*this.color.r+.587*this.color.g+.114*this.color.b)/255}getLuminanceWCAG(){let t=this.color.r/255,e=this.color.g/255,i=this.color.b/255;return .2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}clone(){return new v(this.color.toString())}copyGammaToLinear(t,e=2){return this.color.r=Math.pow(t.color.r,e),this.color.g=Math.pow(t.color.g,e),this.color.b=Math.pow(t.color.b,e),this}copyLinearToGamma(t,e=2){let i=e>0?1/e:1;return this.color.r=Math.pow(t.color.r,i),this.color.g=Math.pow(t.color.g,i),this.color.b=Math.pow(t.color.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.color.r=g(t.color.r),this.color.g=g(t.color.g),this.color.b=g(t.color.b),this}copyLinearToSRGB(t){return this.color.r=m(t.color.r),this.color.g=m(t.color.g),this.color.b=m(t.color.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}}class b{constructor(t,e,i,r){this.r=isNaN(+t)?255:Math.max(0,Math.min(255,+t)),this.g=isNaN(+e)?255:Math.max(0,Math.min(255,+e)),this.b=isNaN(+i)?255:Math.max(0,Math.min(255,+i)),(0,s.Z)(r)?this.opacity=isNaN(+r)?1:Math.max(0,Math.min(1,+r)):this.opacity=1}formatHex(){return`#${p(this.r)+p(this.g)+p(this.b)+(1===this.opacity?"":p(255*this.opacity))}`}formatRgb(){let t=this.opacity;return`${1===t?"rgb(":"rgba("}${this.r},${this.g},${this.b}${1===t?")":`,${t})`}`}formatHsl(){let t=this.opacity,{h:e,s:i,l:r}=(0,h.Z)(this.r,this.g,this.b);return`${1===t?"hsl(":"hsla("}${e},${i}%,${r}%${1===t?")":`,${t})`}`}toString(){return this.formatHex()}}},56874:function(t,e,i){"use strict";function r(t){let e="",i="",r="",n=+("#"===t[0]);for(let s=n;s<t.length;s++)"#"!==t[s]&&(s<n+2?e+=t[s]:s<n+4?i+=t[s]:s<n+6&&(r+=t[s]));return[parseInt(e,16),parseInt(i,16),parseInt(r,16)]}i.d(e,{Z:()=>r})},12317:function(t,e,i){"use strict";function r(t,e,i){let r=(1-Math.abs(2*(i/=100)-1))*(e/=100),n=r*(1-Math.abs(t/60%2-1)),s=i-r/2,a=0,o=0,l=0;return 0<=t&&t<60?(a=r,o=n,l=0):60<=t&&t<120?(a=n,o=r,l=0):120<=t&&t<180?(a=0,o=r,l=n):180<=t&&t<240?(a=0,o=n,l=r):240<=t&&t<300?(a=n,o=0,l=r):300<=t&&t<360&&(a=r,o=0,l=n),{r:a=Math.round(255*(a+s)),g:o=Math.round(255*(o+s)),b:l=Math.round(255*(l+s))}}i.d(e,{Z:()=>r})},39126:function(t,e,i){"use strict";i.r(e),i.d(e,{hexToRgb:()=>n.Z,rgbToHex:()=>a,DEFAULT_COLORS:()=>r.QP,hslToRgb:()=>s.Z,Color:()=>r.Il,interpolateRgb:()=>l,rgbToHsl:()=>o.Z,RGB:()=>r.eX});var r=i(60692),n=i(56874),s=i(12317);function a(t,e,i){return Number(0x1000000+(t<<16)+(e<<8)+i).toString(16).slice(1)}var o=i(53026);function l(t,e){let i=t.r,n=e.r,s=t.g,a=e.g,o=t.b,l=e.b,h=t.opacity,u=e.opacity;return t=>{let e=Math.round(i*(1-t)+n*t),c=Math.round(s*(1-t)+a*t),d=Math.round(o*(1-t)+l*t);return new r.eX(e,c,d,h*(1-t)+u*t)}}},53026:function(t,e,i){"use strict";function r(t,e,i){t/=255;let r=Math.min(t,e/=255,i/=255),n=Math.max(t,e,i),s=n-r,a=0,o=0,l=0;return(a=Math.round(60*(a=0===s?0:n===t?(e-i)/s%6:n===e?(i-t)/s+2:(t-e)/s+4)))<0&&(a+=360),l=(n+r)/2,{h:a,s:o=+(100*(o=0===s?0:s/(1-Math.abs(2*l-1)))).toFixed(1),l:l=+(100*l).toFixed(1)}}i.d(e,{Z:()=>r})},99051:function(t,e,i){"use strict";i.d(e,{CE:()=>h,IX:()=>a,Sy:()=>p,V4:()=>d,VF:()=>function t(e){if(!(0,r.Z)(e))return[e];let i=[];for(let r of e)i.push(...t(r));return i},Z$:()=>o,h6:()=>c,iH:()=>u,yP:()=>l});var r=i(95723),n=i(55592),s=i(64776);function a(t){return(0,s.Z)(t)?(0,r.Z)(t)?t:[t]:[]}function o(t){if((0,n.Z)(t))return t[t.length-1]}let l=t=>t.length<=1?0:o(t)-t[0],h=(t,e)=>{var i;if(0===t.length)return;let r=t[0];for(let n=1;n<t.length;n++){let s=t[n];(null!=(i=null==e?void 0:e(s,r))?i:s-r)>0&&(r=s)}return r},u=(t,e)=>{var i;if(0===t.length)return;let r=t[0];for(let n=1;n<t.length;n++){let s=t[n];(null!=(i=null==e?void 0:e(s,r))?i:s-r)<0&&(r=s)}return r};function c(t,e){if(!(0,r.Z)(t)||!(0,r.Z)(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function d(t){return t&&(0,r.Z)(t)?Array.from(new Set(a(t))):t}function p(t,e=Math.random){let i,r,n=t.length;for(;n;)i=Math.floor(e()*n),r=t[--n],t[n]=t[i],t[i]=r;return t}},60837:function(t,e,i){"use strict";function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}i.d(e,{j:()=>r})},51400:function(t,e,i){"use strict";i.d(e,{Hr:()=>o,b4:()=>a,lo:()=>l,o0:()=>h});var r=i(60837),n=i(54326),s=i(85476);function a(t,e,i=0,s){for((0,n.Z)(s)&&(s=t.length);i<s;){let n=i+s>>>1;(0,r.j)(t[n],e)>0?s=n:i=n+1}return i}function o(t,e,i,r){var n,a;let o=null!=(n=null==r?void 0:r.maxIterations)?n:100,l=null!=(a=null==r?void 0:r.tolerance)?a:1e-10,h=t(e),u=t(i),c=i-e;if(h*u>0)return s.Y.getInstance().error("Initial bisect points must have opposite signs"),NaN;if(0===h)return e;if(0===u)return i;for(let i=0;i<o;++i){let i=e+(c/=2),r=t(i);if(r*h>=0&&(e=i),Math.abs(c)<l||0===r)return i}return e+c}let l=(t,e)=>h(0,t.length,i=>e(t[i])),h=(t,e,i)=>{let r=t,n=e;for(;r<n;){let t=Math.floor((r+n)/2);i(t)>=0?n=t:r=t+1}return r}},94030:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=function(t,e,i){return t<e?e:t>i?i:t}},51996:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=(t,e,i)=>{let[r,n]=t;n<r&&(r=t[1],n=t[0]);let s=n-r;return s>=i-e?[e,i]:[r=Math.min(Math.max(r,e),i-s),r+s]}},53739:function(t,e,i){"use strict";function r(t,e){let i;return t>e&&(i=t,t=e,e=i),i=>Math.max(t,Math.min(e,i))}i.d(e,{i:()=>r})},65755:function(t,e,i){"use strict";i.d(e,{Z:()=>function t(e,i,h){let u;if(!(0,l.Z)(e)||"object"!=typeof e||i&&i(e))return e;let c=(0,r.Z)(e),d=e.length;u=c?Array(d):"object"==typeof e?{}:(0,n.Z)(e)||(0,a.Z)(e)||(0,o.Z)(e)?e:(0,s.Z)(e)?new Date(+e):void 0;let p=c?void 0:Object.keys(Object(e)),f=-1;if(u)for(;++f<(p||e).length;){let r=p?p[f]:f,n=e[r];h&&h.includes(r.toString())?u[r]=n:u[r]=t(n,i,h)}return u}});var r=i(95723),n=i(63778),s=i(1475),a=i(4654),o=i(83624),l=i(64776)},80204:function(t,e,i){"use strict";i.d(e,{Z:()=>a});var r=i(80971),n=i(89530);let s=!1;try{s="function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame}catch(t){s=!1}s=!1;let a=function(t,e,i){let a,o,l,h,u,c,d=0,p=!1,f=!1,g=!0,m=!e&&0!==e&&s;if("function"!=typeof t)throw TypeError("Expected a function");function y(e){let i=a,r=o;return a=o=void 0,d=e,h=t.apply(r,i)}function v(t,e){return m?(cancelAnimationFrame(u),requestAnimationFrame(t)):setTimeout(t,e)}function b(t){let i=t-c;return void 0===c||i>=e||i<0||f&&t-d>=l}function x(){let t=Date.now();if(b(t))return _(t);u=v(x,function(t){let i=t-d,r=e-(t-c);return f?Math.min(r,l-i):r}(t))}function _(t){return u=void 0,g&&a?y(t):(a=o=void 0,h)}function w(...t){let i=Date.now(),r=b(i);if(a=t,o=this,c=i,r){if(void 0===u){var n;return d=n=c,u=v(x,e),p?y(n):h}if(f)return u=v(x,e),y(c)}return void 0===u&&(u=v(x,e)),h}return e=+e||0,(0,r.Z)(i)&&(p=!!i.leading,(f="maxWait"in i)&&(l=Math.max((0,n.Z)(i.maxWait)?i.maxWait:0,e)),g="trailing"in i?!!i.trailing:g),w.cancel=function(){void 0!==u&&function(t){if(m)return cancelAnimationFrame(t);clearTimeout(t)}(u),d=0,a=c=o=u=void 0},w.flush=function(){return void 0===u?h:_(Date.now())},w.pending=function(){return void 0!==u},w}},10791:function(t,e,i){"use strict";function r(t){let e=t.length,i=t.slice().sort((t,e)=>t-e);function r(t){if(0===e)return 0;let r=0,n=e;for(;r<n;){let e=r+n>>>1;i[e]<=t?r=e+1:n=e}return r/e}return{evaluate:function(t){if(Array.isArray(t)){let e=[];for(let i=0;i<t.length;i++)e.push(r(t[i]));return e}return r(t)},evaluateGrid:function(t){let n=[];if(t<=0||0===e)return n;let s=i[0],a=i[e-1];if(s===a){for(let e=0;e<t;e++)n.push({x:s,y:1});return n}let o=(a-s)/(t-1);for(let e=0;e<t;e++){let i=e===t-1?a:s+o*e;n.push({x:i,y:r(i)})}return n},n:e}}i.d(e,{L:()=>r})},93690:function(t,e,i){"use strict";i.d(e,{W:()=>a});var r=i(96241),n=i(54326),s=i(4654);let a=(t,e)=>{let i,a,o=(0,r.Z)(e)?e:t=>t;if(t&&t.length){let e=t.length;for(let r=0;r<e;r+=1){let e=o(t[r]);(0,n.Z)(e)||!(0,s.Z)(e*=1)||Number.isNaN(e)||((0,n.Z)(i)?(i=e,a=e):(i=Math.min(i,e),a=Math.max(a,e)))}}return[i,a]}},4988:function(t,e,i){"use strict";i.d(e,{EP:()=>l,RF:()=>h,Yn:()=>a});var r=i(25397),n=i(95723),s=i(96241);let a=t=>e=>(0,r.Z)(e,t),o=(t,e={})=>{if((0,s.Z)(t))return t;let i=[t];return(e&&e.get||a)(i)},l=(t,e={})=>{if((0,n.Z)(t)){let i=t.map(t=>o(t,e));return t=>i.map(e=>e(t))}return o(t,e)},h=t=>t?"string"==typeof t||"number"==typeof t?()=>t:(0,s.Z)(t)?t:e=>e[t.field]:null},25397:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(83624);let n=(t,e,i)=>{let n=(0,r.Z)(e)?e.split("."):e;for(let e=0;e<n.length;e++)t=t?t[n[e]]:void 0;return void 0===t?i:t}},36123:function(t,e,i){"use strict";i.d(e,{Z:()=>n});let r=Object.prototype.hasOwnProperty,n=(t,e)=>null!=t&&r.call(t,e)},73619:function(t,e,i){"use strict";function r(t,e){return i=>t*(1-i)+e*i}function n(t,e){return function(i){return Math.round(t*(1-i)+e*i)}}function s(t,e){let i=t.valueOf(),r=e.valueOf(),n=new Date;return t=>(n.setTime(i*(1-t)+r*t),n)}i.d(e,{IT:()=>l,NW:()=>s,OD:()=>n,k4:()=>r});let a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=RegExp(a.source,"g");function l(t,e){var i,n;let s,l,h,u=a.lastIndex=o.lastIndex=0,c=-1,d=[],p=[];for(t+="",e+="";(s=a.exec(t))&&(l=o.exec(e));)(h=l.index)>u&&(h=e.slice(u,h),d[c]?d[c]+=h:d[++c]=h),(s=s[0])===(l=l[0])?d[c]?d[c]+=l:d[++c]=l:(d[++c]=null,p.push({i:c,x:r(s,l)})),u=o.lastIndex;return u<e.length&&(h=e.slice(u),d[c]?d[c]+=h:d[++c]=h),d.length<2?p[0]?(i=p[0].x,function(t){return i(t)+""}):(n=e,function(){return n}):(e=p.length,function(t){for(let i,r=0;r<e;++r)d[(i=p[r]).i]=i.x(t);return d.join("")})}},95723:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(42998);let n=t=>Array.isArray?Array.isArray(t):(0,r.Z)(t,"Array")},55592:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=function(t){return null!==t&&"function"!=typeof t&&Number.isFinite(t.length)}},6761:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>new RegExp(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/g).test(t)},63778:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(42998);let n=(t,e=!1)=>e?"boolean"==typeof t:!0===t||!1===t||(0,r.Z)(t,"Boolean")},1475:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(42998);let n=t=>(0,r.Z)(t,"Date")},44843:function(t,e,i){"use strict";i.d(e,{Z:()=>h});var r=i(54326),n=i(55592);let s=t=>({}).toString.call(t).replace(/^\[object /,"").replace(/]$/,""),a=Object.prototype,o=function(t){let e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||a)},l=Object.prototype.hasOwnProperty,h=function(t){if((0,r.Z)(t))return!0;if((0,n.Z)(t))return!t.length;let e=s(t);if("Map"===e||"Set"===e)return!t.size;if(o(t))return!Object.keys(t).length;for(let e in t)if(l.call(t,e))return!1;return!0}},75133:function(t,e,i){"use strict";i.d(e,{X:()=>function t(e,i,l){if(e===i)return!0;if(typeof e!=typeof i||null==e||null==i)return!1;if(Number.isNaN(e)&&Number.isNaN(i))return!0;if(a(e)!==a(i))return!1;if((0,n.Z)(e))return!!(null==l?void 0:l.skipFunction);if("object"!=typeof e)return!1;if((0,r.Z)(e)){if(e.length!==i.length)return!1;for(let r=e.length-1;r>=0;r--)if(!t(e[r],i[r],l))return!1;return!0}if(!(0,s.Z)(e))return!1;let h=o(e),u=o(i);if(h.length!==u.length)return!1;h.sort(),u.sort();for(let t=h.length-1;t>=0;t--)if(h[t]!=u[t])return!1;for(let r=h.length-1;r>=0;r--){let n=h[r];if(!t(e[n],i[n],l))return!1}return!0}});var r=i(95723),n=i(96241),s=i(26001);function a(t){return Object.prototype.toString.call(t)}function o(t){return Object.keys(t)}},96241:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>"function"==typeof t},54326:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>null==t},4654:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(42998);let n=(t,e=!1)=>{let i=typeof t;return e?"number"===i:"number"===i||(0,r.Z)(t,"Number")}},80741:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>"string"==typeof t&&!isNaN(Number(t))&&!isNaN(parseFloat(t))},80971:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>{let e=typeof t;return null!==t&&"object"===e||"function"===e}},60659:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>"object"==typeof t&&null!==t},26001:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(60659),n=i(42998);let s=function(t){if(!(0,r.Z)(t)||!(0,n.Z)(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},83624:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(42998);let n=(t,e=!1)=>{let i=typeof t;return e?"string"===i:"string"===i||(0,r.Z)(t,"String")}},42998:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=(t,e)=>Object.prototype.toString.call(t)===`[object ${e}]`},56073:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>void 0===t},64776:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>null!=t},89530:function(t,e,i){"use strict";i.d(e,{Z:()=>n});var r=i(4654);let n=t=>(0,r.Z)(t)&&Number.isFinite(t)},36410:function(t,e,i){"use strict";i.d(e,{Z:()=>r});let r=t=>new RegExp(/^(http(s)?:\/\/)\w+[^\s]+(\.[^\s]+){1,}$/).test(t)},14465:function(t,e,i){"use strict";i.d(e,{LQ:()=>s,RJ:()=>o,Um:()=>r,Y7:()=>n,ed:()=>a});let r=t=>1/Math.sqrt(2*Math.PI)*Math.exp(-.5*t*t),n=t=>1>=Math.abs(t)?.75*(1-t*t):0;function s(t,e,i=1){return t<=0||0===e?0:e*Math.pow(t,-1/(i+4))}function a(t,e,i=1){return t<=0||0===e?0:Math.pow(4/(i+2),1/(i+4))*e*Math.pow(t,-1/(i+4))}function o(t,e={}){let i=t.length,n=e.kernel||r,l=e.bandwidth;if(!l||l<=0){let r=function(t){let e=t.length;if(0===e)return 0;let i=0;for(let r=0;r<e;r++)i+=t[r];i/=e;let r=0;for(let n=0;n<e;n++){let e=t[n]-i;r+=e*e}return Math.sqrt(r/e)}(t)||0;l="silverman"===(e.bandwidthMethod||"scott")?a(i,r,1):s(i,r,1)}if(!l||l<=0)return{bandwidth:0,kernel:n,evaluate:t=>{if(Array.isArray(t)){let e=[];for(let i=0;i<t.length;i++)e.push(0);return e}return 0},evaluateGrid:e=>{let r=[];if(e<=0)return r;let n=1/0,s=-1/0;for(let e=0;e<i;e++){let i=t[e];i<n&&(n=i),i>s&&(s=i)}if(n===1/0||s===-1/0){for(let t=0;t<e;t++)r.push({x:0,y:0});return r}for(let t=0;t<e;t++)r.push({x:n,y:0});return r}};let h=1/(i*l);function u(e){let r=0;for(let s=0;s<i;s++)r+=n((e-t[s])/l);return r*h}return{bandwidth:l,kernel:n,evaluate:function(t){if(Array.isArray(t)){let e=[];for(let i=0;i<t.length;i++)e.push(u(t[i]));return e}return u(t)},evaluateGrid(e){let r=[];if(e<=0)return r;let n=1/0,s=-1/0;for(let e=0;e<i;e++){let i=t[e];i<n&&(n=i),i>s&&(s=i)}if(n===1/0||s===-1/0)return r;if(n===s){for(let t=0;t<e;t++)r.push({x:n,y:u(n)});return r}let a=(s-n)/(e-1);for(let t=0;t<e;t++){let i=t===e-1?s:n+a*t;r.push({x:i,y:u(i)})}return r}}}},93651:function(t,e,i){"use strict";i.d(e,{C:()=>s});var r=i(60837),n=i(39708);let s=(t,e)=>{let i=t;return!0!==e&&(i=t.sort(r.j)),(0,n.s)(i,.5)}},68432:function(t,e,i){"use strict";i.d(e,{H:()=>r});let r=t=>{let e=null,i=null;return(...r)=>(e&&r.every((t,i)=>t===e[i])||(e=r,i=t(...r)),i)}},20408:function(t,e,i){"use strict";i.d(e,{Z:()=>h,p:()=>o});var r=i(95723),n=i(55592),s=i(26001),a=i(64776);function o(t,e,i=!1,h=!1){if(e&&t!==e&&(0,a.Z)(e)&&"object"==typeof e){let u=Object(e),c=[];for(let t in u)c.push(t);let{length:d}=c,p=-1;for(;d--;){let d=c[++p];!(0,a.Z)(u[d])||"object"!=typeof u[d]||h&&(0,r.Z)(t[d])?l(t,d,u[d]):function(t,e,i,a=!1,h=!1){let u=t[i],c=e[i],d=e[i],p=!0;if((0,r.Z)(c)){if(a)d=[];else if((0,r.Z)(u))d=u;else if((0,n.Z)(u)){d=Array(u.length);let t=-1,e=u.length;for(;++t<e;)d[t]=u[t]}}else(0,s.Z)(c)?(d=null!=u?u:{},"function"!=typeof u&&"object"==typeof u||(d={})):p=!1;p&&o(d,c,a,h),l(t,i,d)}(t,e,d,i,h)}}}function l(t,e,i){var r,n;(void 0===i||(r=t[e],r===(n=i)||Number.isNaN(r)&&Number.isNaN(n)))&&(void 0!==i||e in t)||(t[e]=i)}function h(t,...e){let i=-1,r=e.length;for(;++i<r;)o(t,e[i],!0);return t}},12430:function(t,e,i){"use strict";function r(t){if(!t)return[];if(Object.keys)return Object.keys(t);let e=[];for(let i in t)t.hasOwnProperty(i)&&e.push(i);return e}function n(t,e,i){let n=r(e);for(let r=0;r<n.length;r++){let s=n[r];(i?null!=e[s]:null==t[s])&&(t[s]=e[s])}return t}function s(t,e,i=!0){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames){let r=Object.getOwnPropertyNames(e);for(let n=0;n<r.length;n++){let s=r[n];"constructor"!==s&&(i?null!=e[s]:null==t[s])&&(t[s]=e[s])}}else n(t,e,i)}i.d(e,{XP:()=>r,ce:()=>n,jB:()=>s})},36163:function(t,e,i){"use strict";function r(t,e,i=1e-10,n=1e-10){let s=i*Math.max(t,e);return Math.abs(t-e)<=Math.max(n,s)}function n(t,e,i,n){return t>e&&!r(t,e,i,n)}function s(t,e,i,n){return t<e&&!r(t,e,i,n)}i.d(e,{SQ:()=>s,Vy:()=>n,Yt:()=>r})},15215:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(26001),n=i(83624);function s(t,e){if(!t||!(0,r.Z)(t))return t;let i={};return Object.keys(t).forEach(r=>{let s=t[r],a=!1;e.forEach(t=>{((0,n.Z)(t)&&t===r||t instanceof RegExp&&r.match(t))&&(a=!0)}),a||(i[r]=s)}),i}},39708:function(t,e,i){"use strict";i.d(e,{s:()=>n});var r=i(80097);function n(t,e,i=r.H){let s=t.length;if(!s)return;if(e<=0||s<2)return i(t[0],0,t);if(e>=1)return i(t[s-1],s-1,t);let a=(s-1)*e,o=Math.floor(a),l=i(t[o],o,t);return l+(i(t[o+1],o+1,t)-l)*(a-o)}},14616:function(t,e,i){"use strict";i.d(e,{w:()=>n});var r=i(64776);function n(t,e,i){(0,r.Z)(e)||(e=t,t=0),(0,r.Z)(i)||(i=1);let n=-1,s=0|Math.max(0,Math.ceil((e-t)/i)),a=Array(s);for(;++n<s;)a[n]=t+n*i;return a}},34276:function(t,e,i){"use strict";i.d(e,{Pe:()=>s,fw:()=>l,tF:()=>a,xP:()=>o});var r=i(54326),n=i(13237);function s(t,e,i,r){let n=r-t*t;if(Math.abs(n)<Number.EPSILON)return{a:e,b:0};let s=(i-t*e)/n;return{a:e-s*t,b:s}}function a(t,e,i,n){for(let s=0;s<t.length;s++){let a=t[s],o=e(a),l=i(a);!(0,r.Z)(o)&&(o*=1)>=o&&!(0,r.Z)(l)&&(l*=1)>=l&&n(o,l,s)}}function o(t,e,i,n,s){let a=0,o=0;for(let l=0;l<t.length;l++){let h=t[l],u=i(h);if(!(0,r.Z)(u)&&(u*=1)>=u){let t=u-s(e(h));a+=t*t;let i=u-n;o+=i*i}}return 0===o?0:1-a/o}function l(t,e=t=>t.x,i=t=>t.y,r){var h;let u=null!=(h=null==r?void 0:r.alpha)?h:.05,c=0,d=0,p=0,f=0,g=0;a(t,e,i,(t,e)=>{c++,d+=(t-d)/c,p+=(e-p)/c,f+=(t*e-f)/c,g+=(t*t-g)/c});let{a:m,b:y}=s(d,p,f,g),v=t=>m+y*t,b=(0,n.zF)(t,e,i,v);return{coef:{a:m,b:y},predict:v,rSquared:o(t,e,i,p,v),evaluateGrid:function(t){let e=[];if(0===b.n||t<=0)return e;if(b.min===b.max){for(let i=0;i<t;i++)e.push({x:b.min,y:v(b.min)});return e}let i=(b.max-b.min)/(t-1);for(let r=0;r<t;r++){let n=r===t-1?b.max:b.min+i*r;e.push({x:n,y:v(n)})}return e},confidenceInterval:function(t=50){let e=[];if(0===b.n||t<=0)return e;let i=(0,n.fT)(1-u/2);if(b.min===b.max){let r=v(b.min),s=(0,n.Zv)(b.min,b);for(let n=0;n<t;n++)e.push({x:b.min,mean:r,lower:r-i*s.seMean,upper:r+i*s.seMean,predLower:r-i*s.sePred,predUpper:r+i*s.sePred});return e}let r=(b.max-b.min)/(t-1);for(let s=0;s<t;s++){let a=s===t-1?b.max:b.min+r*s,o=v(a),l=(0,n.Zv)(a,b);e.push({x:a,mean:o,lower:o-i*l.seMean,upper:o+i*l.seMean,predLower:o-i*l.sePred,predUpper:o+i*l.sePred})}return e}}}},44107:function(t,e,i){"use strict";i.d(e,{g:()=>s});var r=i(34276),n=i(13237);function s(t,e=t=>t.x,i=t=>t.y,a){var o,l,h;let u=null!=(o=null==a?void 0:a.maxIteration)?o:25,c=null!=(l=null==a?void 0:a.tol)?l:1e-6,d=null!=(h=null==a?void 0:a.alpha)?h:.05,p=[],f=[];(0,r.tF)(t,e,i,(t,e)=>{p.push(t),f.push(+!!e)});let g=p.length;if(0===g)return{coef:[0,0],predict:t=>0,evaluateGrid:t=>[],confidenceInterval:(t=50)=>[]};let m=0,y=0;for(let t=0;t<u;t++){let t=Array(g),e=!0;for(let e=0;e<g;e++){let i=1/(1+Math.exp(-(m+y*p[e])));t[e]=i}let i=0,r=0,n=0,s=0,a=0;for(let e=0;e<g;e++){let o=t[e]*(1-t[e]),l=f[e]-t[e];i+=l,r+=l*p[e],n+=o,s+=o*p[e],a+=o*p[e]*p[e]}let o=n*a-s*s;if(1e-12>Math.abs(o))break;let l=(a*i-s*r)/o,h=(-s*i+n*r)/o;if(m+=l,y+=h,(Math.abs(l)>c||Math.abs(h)>c)&&(e=!1),e)break}let v=t=>1/(1+Math.exp(-(m+y*t)));return{coef:[m,y],predict:v,evaluateGrid:function(n){let s=[];if(n<=0)return s;let a=1/0,o=-1/0;if((0,r.tF)(t,e,i,t=>{t<a&&(a=t),t>o&&(o=t)}),a===1/0||o===-1/0)return s;if(a===o){let t=v(a);for(let e=0;e<n;e++)s.push({x:a,y:t});return s}let l=(o-a)/(n-1);for(let t=0;t<n;t++){let e=t===n-1?o:a+l*t;s.push({x:e,y:v(e)})}return s},confidenceInterval:function(r=50){let s=[];if(r<=0)return s;let a=(0,n.zF)(t,e,i,v);if(0===a.n)return s;let o=Math.abs((0,n.fT)(1-d/2));if(a.min===a.max){let t=v(a.min),e=(0,n.Zv)(a.min,a);for(let i=0;i<r;i++)s.push({x:a.min,mean:t,lower:t-o*e.seMean,upper:t+o*e.seMean,predLower:t-o*e.sePred,predUpper:t+o*e.sePred});return s}let l=(a.max-a.min)/(r-1);for(let t=0;t<r;t++){let e=t===r-1?a.max:a.min+l*t,i=v(e),h=(0,n.Zv)(e,a);s.push({x:e,mean:i,lower:i-o*h.seMean,upper:i+o*h.seMean,predLower:i-o*h.sePred,predUpper:i+o*h.sePred})}return s}}}},72141:function(t,e,i){"use strict";i.d(e,{Q:()=>s});var r=i(34276),n=i(13237);function s(t,e=t=>t.x,i=t=>t.y,a={}){var o;let l=a.span||.3,h=+(0!==a.degree),u=null!=(o=a.alpha)?o:.05,c=null==a.iterations?2:a.iterations,d=a.maxSamples||1e3,p=[];(0,r.tF)(t,e,i,(t,e)=>{p.push({x:t,y:e})}),p.sort((t,e)=>t.x-e.x);let f=function(t,e){let i=t.length;if(i<=e)return t;let r=[],n=i/e;for(let s=0;s<e;s++){let e=Math.min(Math.floor(s*n),i-1);r.push(t[e])}return r}(p,d),g=f.length,m=Array(g),y=Array(g);for(let t=0;t<g;t++)m[t]=f[t].x,y[t]=f[t].y;function v(t,e){if(0===g)return 0;let i=0,r=g;for(;i<r;){let e=i+r>>1;m[e]<t?i=e+1:r=e}let n=Math.max(2,Math.min(g,Math.floor(l*g))),s=Math.min(g,Math.max(0,i-Math.floor(n/2))+n),a=Math.max(0,s-n),o=0,u=s-a,c=Array(u);for(let e=a;e<s;e++){let i=Math.abs(m[e]-t);c[e-a]=i,i>o&&(o=i)}let d=0,p=Array(u);for(let t=0;t<u;t++){let i=function(t){let e=Math.abs(t);if(e>=1)return 0;let i=1-e*e*e;return i*i*i}(0===o?0:c[t]/o);e&&null!=e[a+t]&&(i*=e[a+t]),p[t]=i,d+=i}if(0===d)return y[i<g?i:g-1];if(0===h){let t=0;for(let e=0;e<p.length;e++)t+=p[e]*y[a+e];return t/d}let f=0,v=0,b=0,x=0,_=0;for(let t=a;t<s;t++){let e=t-a,i=m[t],r=y[t],n=p[e];f+=n,v+=n*i,b+=n*r,x+=n*i*i,_+=n*i*r}let w=v/f,S=b/f,A=x-v*w,C=1e-12>Math.abs(A)?0:(_-v*S)/A;return S-C*w+C*t}function b(t){if(Array.isArray(t)){let e=t.length,i=Array(e);for(let r=0;r<e;r++)i[r]=v(t[r]);return i}return v(t)}return{predict:b,evaluate:b,evaluateGrid:function(t){let e;if(t<=0||0===g)return[];let i=Array(t),r=m[0],n=m[g-1];if(r===n){let e=v(r);for(let n=0;n<t;n++)i[n]={x:r,y:e};return i}let s=(n-r)/(t-1),o=null!=a.iterations?c:g>500?0:c;if(o>0)for(let t=0;t<o;t++){let t=Array(g),i=Array(g);for(let r=0;r<g;r++)t[r]=v(m[r],e),i[r]=Math.abs(y[r]-t[r]);let r=i.slice().sort((t,e)=>t-e)[Math.floor(g/2)]||0;e=Array(g);for(let t=0;t<g;t++){let n=0===r?0:i[t]/(6*r),s=Math.abs(n)>=1?0:(1-n*n)*(1-n*n);e[t]=s}}for(let a=0;a<t;a++){let o=a===t-1?n:r+s*a;i[a]={x:o,y:v(o,e)}}return i},confidenceInterval:function(r=50){let s=[];if(r<=0||0===g)return s;let a=m[0],o=m[g-1];if(void 0===a||void 0===o||a===1/0||o===-1/0)return s;let l=(0,n.zF)(t,e,i,t=>v(t));if(0===l.n)return s;let h=Math.abs((0,n.fT)(1-u/2));if(l.min===l.max){let t=v(l.min),e=(0,n.Zv)(l.min,l);for(let i=0;i<r;i++)s.push({x:l.min,mean:t,lower:t-h*e.seMean,upper:t+h*e.seMean,predLower:t-h*e.sePred,predUpper:t+h*e.sePred});return s}let c=(o-a)/(r-1);for(let t=0;t<r;t++){let e=t===r-1?o:a+c*t,i=v(e),u=(0,n.Zv)(e,l);s.push({x:e,mean:i,lower:i-h*u.seMean,upper:i+h*u.seMean,predLower:i-h*u.sePred,predUpper:i+h*u.sePred})}return s}}}},41995:function(t,e,i){"use strict";i.d(e,{N:()=>a});var r=i(34276),n=i(54326),s=i(13237);function a(t,e=t=>t.x,i=t=>t.y,o={}){var l,h;let u,c,d=null!=(l=o.degree)?l:0;d<0&&(d=0);let p=null!=(h=o.alpha)?h:.05,f=d+1,g=Array(2*d+1).fill(0);(0,r.tF)(t,e,i,(t,e)=>{let i=1;for(let e=0;e<g.length;e++)g[e]+=i,i*=t});let m=Array(f);for(let t=0;t<f;t++){m[t]=Array(f).fill(0);for(let e=0;e<f;e++)m[t][e]=g[t+e]}let y=Array(f).fill(0);(0,r.tF)(t,e,i,(t,e)=>{let i=1;for(let r=0;r<f;r++)y[r]+=e*i,i*=t});let v=function(t,e){let i=e.length,r=Array(i);for(let n=0;n<i;n++)r[n]=t[n].slice(),r[n].push(e[n]);for(let t=0;t<i;t++){let e=t,n=Math.abs(r[t][t]);for(let s=t+1;s<i;s++){let i=Math.abs(r[s][t]);i>n&&(n=i,e=s)}if(e!==t){let i=r[t];r[t]=r[e],r[e]=i}if(1e-12>Math.abs(r[t][t]))return Array(i).fill(0);for(let e=t+1;e<=i;e++)r[t][e]=r[t][e]/r[t][t];r[t][t]=1;for(let e=0;e<i;e++){if(e===t)continue;let n=r[e][t];if(0!==n){for(let s=t+1;s<=i;s++)r[e][s]-=n*r[t][s];r[e][t]=0}}}let n=Array(i);for(let t=0;t<i;t++)n[t]=r[t][i];return n}(m,y),b=t=>{let e=1,i=0;for(let r=0;r<v.length;r++)i+=v[r]*e,e*=t;return i};return{degree:d,coef:v,predict:b,rSquared:(0,r.xP)(t,e,i,(u=0,c=0,(0,r.tF)(t,e,i,(t,e)=>{u+=e,c++}),0===c?0:u/c),b),evaluateGrid(s){let a=[];if(s<=0)return a;let o=1/0,l=-1/0;if((0,r.tF)(t,e,i,t=>{(0,n.Z)(t)||(t<o&&(o=t),t>l&&(l=t))}),o===1/0||l===-1/0)return a;if(o===l){let t=b(o);for(let e=0;e<s;e++)a.push({x:o,y:t});return a}let h=(l-o)/(s-1);for(let t=0;t<s;t++){let e=t===s-1?l:o+h*t;a.push({x:e,y:b(e)})}return a},confidenceInterval(r=50){let n=[];if(r<=0)return n;let a=(0,s.zF)(t,e,i,b);if(0===a.n)return n;let o=Math.abs((0,s.fT)(1-p/2));if(a.min===a.max){let t=b(a.min),e=(0,s.Zv)(a.min,a);for(let i=0;i<r;i++)n.push({x:a.min,mean:t,lower:t-o*e.seMean,upper:t+o*e.seMean,predLower:t-o*e.sePred,predUpper:t+o*e.sePred});return n}let l=(a.max-a.min)/(r-1);for(let t=0;t<r;t++){let e=t===r-1?a.max:a.min+l*t,i=b(e),h=(0,s.Zv)(e,a);n.push({x:e,mean:i,lower:i-o*h.seMean,upper:i+o*h.seMean,predLower:i-o*h.sePred,predUpper:i+o*h.sePred})}return n}}}},13237:function(t,e,i){"use strict";i.d(e,{Zv:()=>a,fT:()=>n,zF:()=>s});var r=i(54326);function n(t){let e,i;return t<=0||t>=1?0:t<.02425?(((((-.00778489400243029*(e=Math.sqrt(-2*Math.log(t)))+-.322396458041136)*e+-2.40075827716184)*e+-2.54973253934373)*e+4.37466414146497)*e+2.93816398269878)/((((.00778469570904146*e+.32246712907004)*e+2.445134137143)*e+3.75440866190742)*e+1):t<=.97575?(((((-39.6968302866538*(i=(e=t-.5)*e)+220.946098424521)*i-275.928510446969)*i+138.357751867269)*i-30.6647980661472)*i+2.50662827745924)*e/(((((-54.4760987982241*i+161.585836858041)*i-155.698979859887)*i+66.8013118877197)*i-13.2806815528857)*i+1):-(((((-.00778489400243029*(e=Math.sqrt(-2*Math.log(1-t)))+-.322396458041136)*e+-2.40075827716184)*e+-2.54973253934373)*e+4.37466414146497)*e+2.93816398269878)/((((.00778469570904146*e+.32246712907004)*e+2.445134137143)*e+3.75440866190742)*e+1)}function s(t,e,i,n){let s=1/0,a=-1/0,o=0,l=0;for(let n=0;n<t.length;n++){let h=t[n],u=e(h),c=i(h);!(0,r.Z)(u)&&(u*=1)>=u&&!(0,r.Z)(c)&&(c*=1)>=c&&(u<s&&(s=u),u>a&&(a=u),o++,l+=u)}if(0===o)return{min:s,max:a,n:o,X:0,SSE:0,Sxx:0};let h=l/o,u=0,c=0;for(let s=0;s<t.length;s++){let a=t[s],o=e(a),l=i(a);if(!(0,r.Z)(o)&&(o*=1)>=o&&!(0,r.Z)(l)&&(l*=1)>=l){let t=l-n(o);u+=t*t;let e=o-h;c+=e*e}}return{min:s,max:a,n:o,X:h,SSE:u,Sxx:c}}function a(t,e){let{n:i,X:r,Sxx:n,SSE:s}=e,a=i>2?s/(i-2):0;return{seMean:n>0?Math.sqrt(a*(1/i+(t-r)*(t-r)/n)):Math.sqrt(a/i),sePred:Math.sqrt(a*(1+1/i+(n>0?(t-r)*(t-r)/n:0)))}}},49275:function(t,e,i){"use strict";i.d(e,{Z:()=>s});var r=i(80204),n=i(80971);let s=function(t,e,i){let s=!0,a=!0;if("function"!=typeof t)throw TypeError("Expected a function");return(0,n.Z)(i)&&(s="leading"in i?!!i.leading:s,a="trailing"in i?!!i.trailing:a),(0,r.Z)(t,e,{leading:s,trailing:a,maxWait:e})}},80097:function(t,e,i){"use strict";function r(t){return Number(t)}i.d(e,{H:()=>r})},22197:function(t,e,i){"use strict";i.d(e,{y:()=>s});var r=i(54326),n=i(83624);let s=(t,e)=>(0,r.Z)(t)?e:(0,n.Z)(t)?e*parseFloat(t)/100:t},63401:function(t,e,i){"use strict";i.d(e,{FB:()=>h,YZ:()=>l,a5:()=>u,n2:()=>a,sT:()=>o});var r=i(95723),n=i(19273),s=i(8830);function a(t,e,i){let{x1:r,y1:n,x2:s,y2:a}=e;return i.onlyTranslate()?(t!==e&&t.setValue(e.x1,e.y1,e.x2,e.y2),t.translate(i.e,i.f)):(t.clear(),t.add(i.a*r+i.c*n+i.e,i.b*r+i.d*n+i.f),t.add(i.a*s+i.c*n+i.e,i.b*s+i.d*n+i.f),t.add(i.a*s+i.c*a+i.e,i.b*s+i.d*a+i.f),t.add(i.a*r+i.c*a+i.e,i.b*r+i.d*a+i.f)),e}function o(t,e,i,r,n,a,o){if(!((0,s.Wn)(r)<=s.Ho||(0,s.Wn)(n)<=s.Ho)){if(1!==r&&t.scaleX(r),1!==n&&t.scaleY(n),isFinite(a)&&Math.abs(a)>s.Ho){let e=0,i=0;void 0!==o&&(e=o[0],i=o[1]),t.rotate(a,e,i)}t.translate(e,i)}}class l{constructor(t){t?this.setValue(t.x1,t.y1,t.x2,t.y2):this.clear()}clone(){return new l(this)}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}setValue(t=0,e=0,i=0,r=0){return this.x1=t,this.y1=e,this.x2=i,this.y2=r,this}set(t=0,e=0,i=0,r=0){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this}add(t=0,e=0){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}expand(t=0){return(0,r.Z)(t)?(this.y1-=t[0],this.x2+=t[1],this.y2+=t[2],this.x1-=t[3]):(this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t),this}round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this}translate(t=0,e=0){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}rotate(t=0,e=0,i=0){let r=this.rotatedPoints(t,e,i);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])}scale(t=0,e=0,i=0,r=0){let n=this.scalePoints(t,e,i,r);return this.clear().add(n[0],n[1]).add(n[2],n[3])}union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this}intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this}encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2}alignsWith(t){return t&&(this.x1===t.x1||this.x2===t.x2||this.y1===t.y1||this.y2===t.y2)}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}contains(t=0,e=0){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)}containsPoint(t){return!(t.x<this.x1||t.x>this.x2||t.y<this.y1||t.y>this.y2)}width(){return this.empty()?0:this.x2-this.x1}height(){return this.empty()?0:this.y2-this.y1}scaleX(t=0){return this.x1*=t,this.x2*=t,this}scaleY(t=0){return this.y1*=t,this.y2*=t,this}transformWithMatrix(t){return a(this,this,t),this}copy(t){return this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this}rotatedPoints(t,e,i){let{x1:r,y1:n,x2:s,y2:a}=this,o=Math.cos(t),l=Math.sin(t),h=e-e*o+i*l,u=i-e*l-i*o;return[o*r-l*n+h,l*r+o*n+u,o*r-l*a+h,l*r+o*a+u,o*s-l*n+h,l*s+o*n+u,o*s-l*a+h,l*s+o*a+u]}scalePoints(t,e,i,r){let{x1:n,y1:s,x2:a,y2:o}=this;return[t*n+(1-t)*i,e*s+(1-e)*r,t*a+(1-t)*i,e*o+(1-e)*r]}}class h extends l{}class u extends l{constructor(t,e=0){var i;super(t),t&&(this.angle=null!=(i=t.angle)?i:e)}intersects(t){return(0,n.nn)(this,t)}setValue(t=0,e=0,i=0,r=0,n=0){return super.setValue(t,e,i,r),this.angle=n,this}clone(){return new u(this)}getRotatedCorners(){let t={x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2};return[(0,n.xj)({x:this.x1,y:this.y1},this.angle,t),(0,n.xj)({x:this.x2,y:this.y1},this.angle,t),(0,n.xj)({x:this.x1,y:this.y2},this.angle,t),(0,n.xj)({x:this.x2,y:this.y2},this.angle,t)]}}},69182:function(t,e,i){"use strict";i.d(e,{X:()=>a,y:()=>s});var r=i(9762),n=i(8830);class s{constructor(t=1,e=0,i=0,r=1,n=0,s=0){this.a=t,this.b=e,this.c=i,this.d=r,this.e=n,this.f=s}equalToMatrix(t){return this.e===t.e&&this.f===t.f&&this.a===t.a&&this.d===t.d&&this.b===t.b&&this.c===t.c}equalTo(t,e,i,r,n,s){return this.e===n&&this.f===s&&this.a===t&&this.d===r&&this.b===e&&this.c===i}setValue(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.e=n,this.f=s,this}reset(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}getInverse(){let t=this.a,e=this.b,i=this.c,r=this.d,n=this.e,a=this.f,o=new s,l=t*r-e*i;return o.a=r/l,o.b=-e/l,o.c=-i/l,o.d=t/l,o.e=(i*a-r*n)/l,o.f=-(t*a-e*n)/l,o}rotate(t){let e=Math.cos(t),i=Math.sin(t),r=this.a*e+this.c*i,n=this.b*e+this.d*i,s=-(this.a*i)+this.c*e,a=-(this.b*i)+this.d*e;return this.a=r,this.b=n,this.c=s,this.d=a,this}rotateByCenter(t,e,i){let r=Math.cos(t),n=Math.sin(t),s=r*this.a-n*this.b,a=n*this.a+r*this.b,o=r*this.c-n*this.d,l=n*this.c+r*this.d,h=r*this.e-n*this.f+((1-r)*e+n*i),u=n*this.e+r*this.f+((1-r)*i-n*e);return this.a=s,this.b=a,this.c=o,this.d=l,this.e=h,this.f=u,this}scale(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this}setScale(t,e){return this.b=this.b/this.a*t,this.c=this.c/this.d*e,this.a=t,this.d=e,this}transform(t,e,i,r,n,s){return this.multiply(t,e,i,r,n,s),this}translate(t,e){return this.e+=this.a*t+this.c*e,this.f+=this.b*t+this.d*e,this}transpose(){let{a:t,b:e,c:i,d:r,e:n,f:s}=this;return this.a=e,this.b=t,this.c=r,this.d=i,this.e=s,this.f=n,this}multiply(t,e,i,r,n,s){let a=this.a,o=this.b,l=this.c,h=this.d,u=a*n+l*s+this.e,c=o*n+h*s+this.f;return this.a=a*t+l*e,this.b=o*t+h*e,this.c=a*i+l*r,this.d=o*i+h*r,this.e=u,this.f=c,this}interpolate(t,e){let i=new s;return i.a=this.a+(t.a-this.a)*e,i.b=this.b+(t.b-this.b)*e,i.c=this.c+(t.c-this.c)*e,i.d=this.d+(t.d-this.d)*e,i.e=this.e+(t.e-this.e)*e,i.f=this.f+(t.f-this.f)*e,i}transformPoint(t,e){let{a:i,b:r,c:n,d:s,e:a,f:o}=this,l=i*s-r*n,{x:h,y:u}=t;e.x=s/l*h+-n/l*u+(n*o-s*a)/l,e.y=-r/l*h+i/l*u+-(i*o-r*a)/l}onlyTranslate(t=1){return this.a===t&&0===this.b&&0===this.c&&this.d===t}clone(){return new s(this.a,this.b,this.c,this.d,this.e,this.f)}toTransformAttrs(){let t=this.a,e=this.b,i=this.c,n=this.d,s=t*n-e*i,a={x:this.e,y:this.f,rotateDeg:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!==t||0!==e){let r=Math.sqrt(t*t+e*e);a.rotateDeg=e>0?Math.acos(t/r):-Math.acos(t/r),a.scaleX=r,a.scaleY=s/r,a.skewX=(t*i+e*n)/s,a.skewY=0}else if(0!==i||0!==n){let r=Math.sqrt(i*i+n*n);a.rotateDeg=Math.PI/2-(n>0?Math.acos(-i/r):-Math.acos(i/r)),a.scaleX=s/r,a.scaleY=r,a.skewX=0,a.skewY=(t*i+e*n)/s}return a.rotateDeg=(0,r.Dt)(a.rotateDeg),a}}function a(t,e,i,r,s,a,o,l){let h,u,c=e.a,d=e.b,p=e.c,f=e.d,g=e.e,m=e.f,y=(0,n.mC)(o),v=(0,n.O$)(o);l?(h=l[0],u=l[1]):(h=i,u=r);let b=h-i,x=u-r,_=c*y+p*v,w=d*y+f*v,S=p*y-c*v,A=f*y-d*v;t.a=s*_,t.b=s*w,t.c=a*S,t.d=a*A,t.e=g+c*h+p*u-_*b-S*x,t.f=m+d*h+f*u-w*b-A*x}},19498:function(t,e,i){"use strict";i.d(e,{D6:()=>o,E9:()=>s,HL:()=>a});var r=i(4654),n=i(8830);class s{constructor(t=0,e=0,i,r){this.x=0,this.y=0,this.x=t,this.y=e,this.x1=i,this.y1=r}clone(){return new s(this.x,this.y)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x1=t.x1,this.y1=t.y1,this.defined=t.defined,this.context=t.context,this}set(t,e){return this.x=t,this.y=e,this}add(t){return(0,r.Z)(t)?(this.x+=t,void(this.y+=t)):(this.x+=t.x,this.y+=t.y,this)}sub(t){return(0,r.Z)(t)?(this.x-=t,void(this.y-=t)):(this.x-=t.x,this.y-=t.y,this)}multi(t){throw Error("暂不支持")}div(t){throw Error("暂不支持")}}class a{static distancePP(t,e){return(0,n._b)((0,n.sQ)(t.x-e.x,2)+(0,n.sQ)(t.y-e.y,2))}static distanceNN(t,e,i,r){return(0,n._b)((0,n.sQ)(t-i,2)+(0,n.sQ)(e-r,2))}static distancePN(t,e,i){return(0,n._b)((0,n.sQ)(e-t.x,2)+(0,n.sQ)(i-t.y,2))}static pointAtPP(t,e,i){return new s((e.x-t.x)*i+t.x,(e.y-t.y)*i+t.y)}}class o{constructor(t=0,e=0,i,r){this.r=0,this.theta=0,this.r=t,this.theta=e,this.r1=i,this.theta1=r}clone(){return new o(this.r,this.theta)}copyFrom(t){return this.r=t.r,this.theta=t.theta,this.r1=t.r1,this.theta1=t.theta1,this.defined=t.defined,this.context=t.context,this}set(t,e){return this.r=t,this.theta=e,this}}},96766:function(t,e,i){"use strict";function r(t,e=0,i=0){let n;if(!t)return{width:e,height:i};try{n=null==window?void 0:window.getComputedStyle}catch(t){n=()=>({})}let s=n(t);if(/^(\d*\.?\d+)(px)$/.exec(s.width)){let r=parseFloat(s.width)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)||t.clientWidth-1,n=parseFloat(s.height)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)||t.clientHeight-1;return{width:r<=0?e:r,height:n<=0?i:n}}return{width:e,height:i}}function n(t){let{x:e,y:i}=t.getBoundingClientRect();return{x:e,y:i}}function s(t,e){let i=n(t),r=n(e);return{x:i.x-r.x,y:i.y-r.y}}i.d(e,{Kj:()=>s,LM:()=>h,Op:()=>r,Re:()=>g,Wf:()=>l,Z2:()=>p,cY:()=>c,cx:()=>o,to:()=>n,vj:()=>a,wv:()=>d,yZ:()=>u,zW:()=>f});let a=t=>{var e,i,r;return t===(null==(e=null==globalThis?void 0:globalThis.document)?void 0:e.body)?(null==(r=null==(i=null==globalThis?void 0:globalThis.document)?void 0:i.documentElement)?void 0:r.scrollLeft)||t.scrollLeft:"html"===t.tagName.toLowerCase()?0:t.scrollLeft},o=t=>{var e,i,r;return t===(null==(e=null==globalThis?void 0:globalThis.document)?void 0:e.body)?(null==(r=null==(i=null==globalThis?void 0:globalThis.document)?void 0:i.documentElement)?void 0:r.scrollTop)||t.scrollTop:"html"===t.tagName.toLowerCase()?0:t.scrollTop},l=t=>t.getBoundingClientRect().width/t.offsetWidth,h=t=>t.getBoundingClientRect().height/t.offsetHeight,u=t=>t.offsetWidth>0?l(t):h(t);function c(t,e){let i=t.parentNode;for(;null!==i;){if(i===e)return!0;i=i.parentNode}return!1}let d=(t="")=>{let e={};return t.split(";").forEach(t=>{if(t){let i=t.split(":");if(2===i.length){let t=i[0].trim(),r=i[1].trim();t&&r&&(e[t]=r)}}}),e},p=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function f(t){return t.replace(/-([a-z])/g,(t,e)=>e.toUpperCase())}function g(t){try{return t instanceof Element}catch(i){let e=Object.keys(t);return["children","innerHTML","classList","setAttribute","tagName","getBoundingClientRect"].every(t=>e.includes(t))}}},63144:function(t,e,i){"use strict";let r;function n(t,e){let i=e?t.toExponential(e-1):t.toExponential(),r=i.indexOf("e");if(r<0)return null;let n=i.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+i.slice(r+1)]}function s(t,e){let i=n(t,e);if(!i)return t+"";let r=i[0],s=i[1];return s<0?"0."+Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+Array(s-r.length+2).join("0")}i.d(e,{BG:()=>c,wG:()=>h,ts:()=>u,C6:()=>l});var a=i(43127);let o=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];class l{constructor(){var t,e;this.locale={thousands:",",grouping:[3],currency:["$",""]},this.group=void 0===this.locale.grouping||void 0===this.locale.thousands?t=>t:(t=[...this.locale.grouping].map(Number),e=`${this.locale.thousands}`,function(i,r){let n=i.length,s=[],a=0,o=t[0],l=0;for(;n>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(i.substring(n-=o,n+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}),this.currencyPrefix=void 0===this.locale.currency?"":this.locale.currency[0]+"",this.currencySuffix=void 0===this.locale.currency?"":this.locale.currency[1]+"",this.decimal=void 0===this.locale.decimal?".":this.locale.decimal+"",this.numerals=void 0===this.locale.numerals?t=>t:c([...this.locale.numerals].map(String)),this.percent=void 0===this.locale.percent?"%":this.locale.percent+"",this.minus=void 0===this.locale.minus?"−":this.locale.minus+"",this.nan=void 0===this.locale.nan?"NaN":this.locale.nan+"",this.formatter=t=>this.newFormat(t),this.format=(t,e)=>this.formatter(t)(e),this.formatPrefix=(t,e)=>this._formatPrefix(t,e)}static getInstance(){return l.instance||(l.instance=new l),l.instance}newFormat(t){let e=(0,a.YQ)(t),i=e.fill,n=e.align,s=e.sign,l=e.symbol,u=e.zero,c=e.width,d=e.comma,p=e.precision,f=e.trim,g=e.type;"n"===g?(d=!0,g="g"):h[g]||(void 0===p&&(p=12),f=!0,g="g"),(u||"0"===i&&"="===n)&&(u=!0,i="0",n="=");let m="$"===l?this.currencyPrefix:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",y="$"===l?this.currencySuffix:/[%p]/.test(g)?this.percent:"",v=h[g],b=/[defgprstz%]/.test(g);p=void 0===p?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));let{nan:x,minus:_,decimal:w,group:S,numerals:A}=this;function C(t){let e,a,l,h=m,C=y,D=t;if("c"===g)C=v(D)+C,D="";else{let t=(D*=1)<0||1/D<0;if(D=isNaN(D)?x:v(Math.abs(D),p),f&&(D=function(t){let e=t.length,i,r=-1;t:for(let n=1;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(D)),t&&0==+D&&"+"!==s&&(t=!1),h=(t?"("===s?s:_:"-"===s||"("===s?"":s)+h,C=("s"===g?o[8+r/3]:"")+C+(t&&"("===s?")":""),b){for(e=-1,a=D.length;++e<a;)if(48>(l=D.charCodeAt(e))||l>57){C=(46===l?w+D.slice(e+1):D.slice(e))+C,D=D.slice(0,e);break}}}d&&!u&&(D=S(D,1/0));let T=h.length+D.length+C.length,B=T<c?Array(c-T+1).join(i):"";switch(d&&u&&(D=S(B+D,B.length?c-C.length:1/0),B=""),n){case"<":D=h+D+C+B;break;case"=":D=h+B+D+C;break;case"^":D=B.slice(0,T=B.length>>1)+h+D+C+B.slice(T);break;default:D=B+h+D+C}return A(D)}return C.toString=function(){return t+""},C}_formatPrefix(t,e){let i=(0,a.YQ)(t);i.type="f";let r=this.newFormat(i.toString()),n=3*Math.max(-8,Math.min(8,Math.floor(u(e)/3))),s=Math.pow(10,-n),l=o[8+n/3];return function(t){return r(s*t)+l}}}let h={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},f:(t,e)=>t.toFixed(e),e:(t,e)=>t.toExponential(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>s(100*t,e),r:s,s:function(t,e){let i=n(t,e);if(!i)return t+"";let s=i[0],a=i[1],o=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,l=s.length;return o===l?s:o>l?s+Array(o-l+1).join("0"):o>0?s.slice(0,o)+"."+s.slice(o):"0."+Array(1-o).join("0")+n(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16),t:(t,e)=>Number.isInteger(t)?t.toFixed(2):Math.floor(t*Math.pow(10,e))/Math.pow(10,e)+"",z:(t,e)=>t%1==0?t+"":t.toFixed(e)};function u(t){let e=n(Math.abs(t));return e?e[1]:NaN}function c(t){return function(e){return e.replace(/[0-9]/g,e=>t[+e])}}},43127:function(t,e,i){"use strict";i.d(e,{DC:()=>s,YQ:()=>a,vr:()=>n});var r=i(85476);class n{constructor(t={}){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}toString(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}}let s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(t){let e;if(e=s.exec(t))return new n({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]});r.Y.getInstance().error("invalid format: "+t)}},13339:function(t,e,i){"use strict";i.d(e,{k:()=>r});class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}constructor(){this.locale_shortWeekdays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.locale_periods=["AM","PM"],this.locale_weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.locale_shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.numberRe=/^\s*\d+/,this.pads={"-":"",_:" ",0:"0"},this.requoteRe=/[\\^$*+?|[\]().{}]/g,this.locale_months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.formatShortWeekday=t=>this.locale_shortWeekdays[t.getDay()],this.formatWeekday=t=>this.locale_weekdays[t.getDay()],this.formatShortMonth=t=>this.locale_shortMonths[t.getMonth()],this.formatMonth=t=>this.locale_months[t.getMonth()],this.formatDayOfMonth=(t,e)=>this.pad(t.getDate(),e,2),this.formatHour24=(t,e)=>this.pad(t.getHours(),e,2),this.formatHour12=(t,e)=>this.pad(t.getHours()%12||12,e,2),this.formatMilliseconds=(t,e)=>this.pad(t.getMilliseconds(),e,3),this.formatMonthNumber=(t,e)=>this.pad(t.getMonth()+1,e,2),this.formatMinutes=(t,e)=>this.pad(t.getMinutes(),e,2),this.formatPeriod=t=>this.locale_periods[+(t.getHours()>=12)],this.formatSeconds=(t,e)=>this.pad(t.getSeconds(),e,2),this.formatFullYear=(t,e)=>this.pad(t.getFullYear()%1e4,e,4),this.formatUTCShortWeekday=t=>this.locale_shortWeekdays[t.getUTCDay()],this.formatUTCWeekday=t=>this.locale_weekdays[t.getUTCDay()],this.formatUTCShortMonth=t=>this.locale_shortMonths[t.getUTCMonth()],this.formatUTCMonth=t=>this.locale_months[t.getUTCMonth()],this.formatUTCDayOfMonth=(t,e)=>this.pad(t.getUTCDate(),e,2),this.formatUTCHour24=(t,e)=>this.pad(t.getUTCHours(),e,2),this.formatUTCHour12=(t,e)=>this.pad(t.getUTCHours()%12||12,e,2),this.formatUTCMilliseconds=(t,e)=>this.pad(t.getUTCMilliseconds(),e,3),this.formatUTCMonthNumber=(t,e)=>this.pad(t.getUTCMonth()+1,e,2),this.formatUTCMinutes=(t,e)=>this.pad(t.getUTCMinutes(),e,2),this.formatUTCPeriod=t=>this.locale_periods[+(t.getUTCHours()>=12)],this.formatUTCSeconds=(t,e)=>this.pad(t.getUTCSeconds(),e,2),this.formatUTCFullYear=(t,e)=>this.pad(t.getUTCFullYear()%1e4,e,4),this.formats={a:this.formatShortWeekday,A:this.formatWeekday,b:this.formatShortMonth,B:this.formatMonth,d:this.formatDayOfMonth,e:this.formatDayOfMonth,H:this.formatHour24,I:this.formatHour12,L:this.formatMilliseconds,m:this.formatMonthNumber,M:this.formatMinutes,p:this.formatPeriod,S:this.formatSeconds,Y:this.formatFullYear},this.utcFormats={a:this.formatUTCShortWeekday,A:this.formatUTCWeekday,b:this.formatUTCShortMonth,B:this.formatUTCMonth,d:this.formatUTCDayOfMonth,e:this.formatUTCDayOfMonth,H:this.formatUTCHour24,I:this.formatUTCHour12,L:this.formatUTCMilliseconds,m:this.formatUTCMonthNumber,M:this.formatUTCMinutes,p:this.formatUTCPeriod,S:this.formatUTCSeconds,Y:this.formatUTCFullYear},this.parseShortWeekday=(t,e,i)=>{let r=this.shortWeekdayRe.exec(e.slice(i));return r?(t.w=this.shortWeekdayLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseWeekday=(t,e,i)=>{let r=this.weekdayRe.exec(e.slice(i));return r?(t.w=this.weekdayLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseShortMonth=(t,e,i)=>{let r=this.shortMonthRe.exec(e.slice(i));return r?(t.m=this.shortMonthLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseMonth=(t,e,i)=>{let r=this.monthRe.exec(e.slice(i));return r?(t.m=this.monthLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseDayOfMonth=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1},this.parseHour24=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1},this.parseMilliseconds=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1},this.parseMonthNumber=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.m=r-1,i+r[0].length):-1},this.parseMinutes=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1},this.parsePeriod=(t,e,i)=>{let r=this.periodRe.exec(e.slice(i));return r?(t.p=this.periodLookup.get(r[0].toLowerCase()),i+r[0].length):-1},this.parseSeconds=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1},this.parseFullYear=(t,e,i)=>{let r=this.numberRe.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1},this.parses={a:this.parseShortWeekday,A:this.parseWeekday,b:this.parseShortMonth,B:this.parseMonth,d:this.parseDayOfMonth,e:this.parseDayOfMonth,H:this.parseHour24,I:this.parseHour24,L:this.parseMilliseconds,m:this.parseMonthNumber,M:this.parseMinutes,p:this.parsePeriod,S:this.parseSeconds,Y:this.parseFullYear},this.timeFormat=(t,e)=>this.newFormat(t,this.formats)(new Date(this.getFullTimeStamp(e))),this.timeUTCFormat=(t,e)=>this.newFormat(t,this.utcFormats)(new Date(this.getFullTimeStamp(e))),this.timeParse=(t,e)=>this.newParse(t,!1)(e+""),this.requoteF=this.requote.bind(this),this.periodRe=this.formatRe(this.locale_periods),this.periodLookup=this.formatLookup(this.locale_periods),this.weekdayRe=this.formatRe(this.locale_weekdays),this.weekdayLookup=this.formatLookup(this.locale_weekdays),this.shortWeekdayRe=this.formatRe(this.locale_shortWeekdays),this.shortWeekdayLookup=this.formatLookup(this.locale_shortWeekdays),this.monthRe=this.formatRe(this.locale_months),this.monthLookup=this.formatLookup(this.locale_months),this.shortMonthRe=this.formatRe(this.locale_shortMonths),this.shortMonthLookup=this.formatLookup(this.locale_shortMonths)}requote(t){return t.replace(this.requoteRe,"\\$&")}localDate(t){if(0<=t.y&&t.y<100){let e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}utcDate(t){if(0<=t.y&&t.y<100){let e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}newDate(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}formatRe(t){return RegExp("^(?:"+t.map(this.requoteF).join("|")+")","i")}formatLookup(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}pad(t,e,i){let r=t<0?"-":"",n=(r?-t:t)+"",s=n.length;return r+(s<i?Array(i-s+1).join(e)+n:n)}parseSpecifier(t,e,i,r){let n,s,a=0,o=e.length,l=i.length;for(;a<o;){if(r>=l)return -1;if(37===(n=e.charCodeAt(a++))){if(n=e.charAt(a++),!(s=this.parses[n in this.pads?e.charAt(a++):n])||(r=s(t,i,r))<0)return -1}else if(n!==i.charCodeAt(r++))return -1}return r}newParse(t,e){let i=this;return function(r){let n=i.newDate(1900,void 0,1);return i.parseSpecifier(n,t,r+="",0)!==r.length?null:"Q"in n?new Date(n.Q):"s"in n?new Date(1e3*n.s+("L"in n?n.L:0)):(!e||"Z"in n||(n.Z=0),"p"in n&&(n.H=n.H%12+12*n.p),void 0===n.m&&(n.m="q"in n?n.q:0),"Z"in n?(n.H+=n.Z/100|0,n.M+=n.Z%100,i.utcDate(n)):i.localDate(n))}}newFormat(t,e){let i=this;return function(r){let n,s,a=[],o=-1,l=0,h=t.length;for(r instanceof Date||(r=new Date(+r));++o<h;)37===t.charCodeAt(o)&&(a.push(t.slice(l,o)),(s=i.pads[n=t.charAt(++o)])?n=t.charAt(++o):s="e"===n?" ":"0",a.push(n=(0,e[n])(r,s)),l=o+1);return a.push(t.slice(l,o)),a.join("")}}getFullTimeStamp(t){let e=parseInt(t+"",10);return 10===String(e).length?1e3*e:e}}},19273:function(t,e,i){"use strict";i.d(e,{EU:()=>n,Jz:()=>h,Kj:()=>l,RA:()=>d,SX:()=>p,di:()=>u,nn:()=>b,qr:()=>f,xj:()=>m});var r,n,s=i(9762),a=i(8830);function o(t,e,i){t[0]=e[0]-i[0],t[1]=e[1]-i[1]}function l(t,e,i,r){let n=t[0],s=e[0],a=i[0],o=r[0];return s<n&&([n,s]=[s,n]),o<a&&([o,a]=[a,o]),!(s<a||o<n)&&(n=t[1],s=e[1],a=i[1],o=r[1],s<n&&([n,s]=[s,n]),o<a&&([o,a]=[a,o]),!(s<a||o<n))}function h(t,e,i,r){if(!l(t,e,i,r))return!1;let n=[0,0],s=[0,0],h=[0,0];if(o(n,e,t),o(s,r,i),(0,a.Bw)(n,s))return!0;o(h,i,t);let u=(0,a.ir)(h,s)/(0,a.ir)(n,s);return u>=0&&u<=1&&[t[0]+n[0]*u,t[1]+n[1]*u]}function u(t,e,i){if(null===t)return e;if(null===e)return t;let{x11:r,x12:n,y11:s,y12:a,x21:o,x22:l,y21:h,y22:u}=c(t,e,i);return r>=l||n<=o||s>=u||a<=h?{x1:0,y1:0,x2:0,y2:0}:{x1:Math.max(r,o),y1:Math.max(s,h),x2:Math.min(n,l),y2:Math.min(a,u)}}(r=n||(n={}))[r.NONE=0]="NONE",r[r.BBOX1=1]="BBOX1",r[r.BBOX2=2]="BBOX2";let c=(t,e,i)=>{let r=t.x1,n=t.x2,s=t.y1,a=t.y2,o=e.x1,l=e.x2,h=e.y1,u=e.y2;return i&&(r>n&&([r,n]=[n,r]),s>a&&([s,a]=[a,s]),o>l&&([o,l]=[l,o]),h>u&&([h,u]=[u,h])),{x11:r,x12:n,y11:s,y12:a,x21:o,x22:l,y21:h,y22:u}};function d(t,e,i){if(!t||!e)return n.NONE;let{x11:r,x12:s,y11:a,y12:o,x21:l,x22:h,y21:u,y22:d}=c(t,e,i);return r>l&&s<h&&a>u&&o<d?n.BBOX1:l>r&&h<s&&u>a&&d<o?n.BBOX2:n.NONE}function p(t,e,i){if(t&&e){if(!i)return!(t.x1>e.x2||t.x2<e.x1||t.y1>e.y2||t.y2<e.y1);let{x11:r,x12:n,y11:s,y12:a,x21:o,x22:l,y21:h,y22:u}=c(t,e,!0);return!(r>l||n<o||s>u||a<h)}return!0}function f(t,e,i){if(!e)return!0;if(!i)return t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2;let r=e.x1,n=e.x2,s=e.y1,a=e.y2;return r>n&&([r,n]=[n,r]),s>a&&([s,a]=[a,s]),t.x>=r&&t.x<=n&&t.y>=s&&t.y<=a}function g(t,e){return Math.abs(e[0]*t[0]+e[1]*t[1])}function m({x:t,y:e},i,r={x:0,y:0}){return{x:(t-r.x)*Math.cos(i)-(e-r.y)*Math.sin(i)+r.x,y:(t-r.x)*Math.sin(i)+(e-r.y)*Math.cos(i)+r.y}}function y(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}}function v(t,e){let i=e?(0,s.M4)(t.angle):t.angle,r=y(t);return[m({x:t.x1,y:t.y1},i,r),m({x:t.x2,y:t.y1},i,r),m({x:t.x2,y:t.y2},i,r),m({x:t.x1,y:t.y2},i,r)]}function b(t,e,i=!1){let r=v(t,i),n=v(e,i),o=(t,e)=>[e.x-t.x,e.y-t.y],l=o(y(t),y(e)),h=o(r[0],r[1]),u=o(r[1],r[2]),c=o(n[0],n[1]),d=o(n[1],n[2]),p=i?(0,s.M4)(t.angle):t.angle,f=i?(0,s.M4)(90-t.angle):t.angle+a.ou,m=i?(0,s.M4)(e.angle):e.angle,x=i?(0,s.M4)(90-e.angle):e.angle+a.ou;f>a.f7&&(f-=a.f7),x>a.f7&&(x-=a.f7);let _=(t,e,i,r)=>{let n=[Math.cos(e),Math.sin(e)];return t+(g(n,i)+g(n,r))/2>g(n,l)};return _((t.x2-t.x1)/2,p,c,d)&&_((t.y2-t.y1)/2,f,c,d)&&_((e.x2-e.x1)/2,m,h,u)&&_((e.y2-e.y1)/2,x,h,u)}},48393:function(t,e,i){"use strict";i.d(e,{YB:()=>n,up:()=>s,v1:()=>r});let r=(t,e)=>{let{x1:i,x2:r,y1:n,y2:s}=t,a=Math.abs(r-i),o=Math.abs(s-n),l=(i+r)/2,h=(n+s)/2,u=0,c=0;switch(e){case"top":case"inside-top":c=-.5;break;case"bottom":case"inside-bottom":c=.5;break;case"left":case"inside-left":u=-.5;break;case"right":case"inside-right":u=.5;break;case"top-right":u=.5,c=-.5;break;case"top-left":u=-.5,c=-.5;break;case"bottom-right":u=.5,c=.5;break;case"bottom-left":u=-.5,c=.5}return{x:l+=u*a,y:h+=c*o}},n=(t,e)=>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),s=(t,e)=>{let i=[{x:Math.cos(t.angle),y:Math.sin(t.angle)},{x:-Math.sin(t.angle),y:Math.cos(t.angle)},{x:Math.cos(e.angle),y:Math.sin(t.angle)},{x:-Math.sin(e.angle),y:Math.cos(t.angle)}];function r(t,e,i){let r=t.getRotatedCorners().map(t=>t.x*e+t.y*i);return{min:Math.min(...r),max:Math.max(...r)}}let n=0;for(let s of i){let i=r(t,s.x,s.y),a=r(e,s.x,s.y);n=Math.max(n,i.max<a.min?a.min-i.max:a.max<i.min?i.min-a.max:0)}return n}},42708:function(t,e,i){"use strict";i.d(e,{N0:()=>a,O0:()=>s,iO:()=>l,yB:()=>n});var r=i(19273);function n(t,e,i,n,s){for(let a=0,o=s[s.length-1];a<s.length;a++){let l=s[a];if((0,r.Kj)([t,e],[i,n],[l.x,l.y],[o.x,o.y]))return!0;o=l}return!1}function s(t,e,i){let r=0,n=t[0];if(!n)return!1;for(let s=1;s<t.length;s++){let o=t[s];r+=a(n.x,n.y,o.x,o.y,e,i),n=o}let s=t[0];return o(n.x,s.x)&&o(n.y,s.y)||(r+=a(n.x,n.y,s.x,s.y,e,i)),0!==r}function a(t,e,i,r,n,s){if(s>e&&s>r||s<e&&s<r||r===e)return 0;let a=(s-e)/(r-e),o=r<e?1:-1;1!==a&&0!==a||(o=r<e?.5:-.5);let l=a*(i-t)+t;return l===n?1/0:l>n?o:0}function o(t,e){return 1e-8>Math.abs(t-e)}function l(t,e){for(let i=0;i<e.length;i++)if(s(t,e[i].x,e[i].y)||i>0&&n(e[i-1].x,e[i-1].y,e[i].x,e[i].y,t))return!0;return!1}},64449:function(t,e,i){"use strict";i.d(e,{e:()=>h});var r=i(64776),n=i(54326),s=i(83624),a=i(95723),o=i(3132),l=i(90180);class h{constructor(t,e){this._numberCharSize=null,this._fullCharSize=null,this._letterCharSize=null,this._specialCharSizeMap={},this._canvas=null,this._context=null,this._contextSaved=!1,this._notSupportCanvas=!1,this._notSupportVRender=!1,this._userSpec={},this.specialCharSet="-/: .,@%'\"~",this._option=t,this._userSpec=null!=e?e:{},this.textSpec=this._initSpec(),(0,r.Z)(t.specialCharSet)&&(this.specialCharSet=t.specialCharSet),this._standardMethod=(0,r.Z)(t.getTextBounds)?this.fullMeasure.bind(this):this.measureWithNaiveCanvas.bind(this)}initContext(){if(this._notSupportCanvas)return!1;if((0,n.Z)(this._canvas)&&((0,r.Z)(this._option.getCanvasForMeasure)&&(this._canvas=this._option.getCanvasForMeasure()),(0,n.Z)(this._canvas)&&"undefined"!=typeof window&&void 0!==window.document&&globalThis&&(0,r.Z)(globalThis.document)&&(this._canvas=globalThis.document.createElement("canvas"))),(0,n.Z)(this._context)&&(0,r.Z)(this._canvas)){let t=this._canvas.getContext("2d");(0,r.Z)(t)&&(t.save(),t.font=(0,l.U)(this.textSpec),this._contextSaved=!0,this._context=t)}return!(0,n.Z)(this._context)||(this._notSupportCanvas=!0,!1)}_initSpec(){var t,e,i;let{defaultFontParams:r={}}=this._option,{fontStyle:n=r.fontStyle,fontVariant:a=r.fontVariant,fontWeight:o=null!=(t=r.fontWeight)?t:"normal",fontSize:l=null!=(e=r.fontSize)?e:12,fontFamily:h=null!=(i=r.fontFamily)?i:"sans-serif",align:u,textAlign:c=null!=u?u:"center",baseline:d,textBaseline:p=null!=d?d:"middle",ellipsis:f,limit:g}=this._userSpec,{lineHeight:m=l}=this._userSpec;return(0,s.Z)(m)&&"%"===m[m.length-1]&&(m=l*(Number.parseFloat(m.substring(0,m.length-1))/100)),{fontStyle:n,fontVariant:a,fontFamily:h,fontSize:l,fontWeight:o,textAlign:c,textBaseline:p,ellipsis:f,limit:g,lineHeight:m}}measure(t,e){switch(e){case"vrender":case"canopus":return this.fullMeasure(t);case"canvas":return this.measureWithNaiveCanvas(t);case"simple":return this.quickMeasureWithoutCanvas(t);default:return this.quickMeasure(t)}}fullMeasure(t){let e;if((0,n.Z)(t))return{width:0,height:0};if((0,n.Z)(this._option.getTextBounds)||!this._notSupportVRender)return this.measureWithNaiveCanvas(t);let{fontFamily:i,fontSize:r,fontWeight:s,textAlign:a,textBaseline:o,ellipsis:l,limit:h,lineHeight:u}=this.textSpec;try{let n=this._option.getTextBounds({text:t,fontFamily:i,fontSize:r,fontWeight:s,textAlign:a,textBaseline:o,ellipsis:!!l,maxLineWidth:h||1/0,lineHeight:u});e={width:n.width(),height:n.height()}}catch(i){this._notSupportVRender=!0,e=this.measureWithNaiveCanvas(t)}return e}measureWithNaiveCanvas(t){return this._measureReduce(t,this._measureWithNaiveCanvas.bind(this))}_measureWithNaiveCanvas(t){if(!this.initContext())return this._quickMeasureWithoutCanvas(t);let e=this._context.measureText(t),{fontSize:i,lineHeight:r}=this.textSpec;return{width:e.width,height:null!=r?r:i,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent}}quickMeasure(t){return this._measureReduce(t,this._quickMeasure.bind(this))}_quickMeasure(t){let e={width:0,height:0};for(let i=0;i<t.length;i++){let r=t[i],s=this._measureSpecialChar(r);(0,n.Z)(s)&&h.NUMBERS_CHAR_SET.includes(r)&&(s=this._measureNumberChar()),(0,n.Z)(s)&&["F","W"].includes((0,o.F)(r))&&(s=this._measureFullSizeChar()),(0,n.Z)(s)&&(s=this._measureLetterChar()),e.width+=s.width,e.height=Math.max(e.height,s.height),(0,n.Z)(s.fontBoundingBoxAscent)||(e.fontBoundingBoxAscent=s.fontBoundingBoxAscent),(0,n.Z)(s.fontBoundingBoxDescent)||(e.fontBoundingBoxDescent=s.fontBoundingBoxDescent)}return e}quickMeasureWithoutCanvas(t){return this._measureReduce(t,this._quickMeasureWithoutCanvas.bind(this))}_quickMeasureWithoutCanvas(t){let e={width:0,height:0},{fontSize:i,lineHeight:r}=this.textSpec;for(let r=0;r<t.length;r++){let n=t[r],s=["F","W"].includes((0,o.F)(n))?1:.53;e.width+=s*i}return e.height=null!=r?r:i,e}_measureReduce(t,e){let{fontSize:i,lineHeight:s}=this.textSpec,o={width:0,height:0};if((0,n.Z)(t))return o;if((0,a.Z)(t)){let n=t.filter(r.Z).map(t=>t.toString());return 0===n.length?o:1===n.length?e(n[0]):{width:n.reduce((t,i)=>Math.max(t,e(i).width),0),height:n.length*((null!=s?s:i)+1)+1}}return e(t.toString())}_measureNumberChar(){if((0,n.Z)(this._numberCharSize)){let t=this._standardMethod(h.NUMBERS_CHAR_SET);this._numberCharSize={width:t.width/h.NUMBERS_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._numberCharSize}_measureFullSizeChar(){return(0,n.Z)(this._fullCharSize)&&(this._fullCharSize=this._standardMethod(h.FULL_SIZE_CHAR)),this._fullCharSize}_measureLetterChar(){if((0,n.Z)(this._letterCharSize)){let t=this._standardMethod(h.ALPHABET_CHAR_SET);this._letterCharSize={width:t.width/h.ALPHABET_CHAR_SET.length,height:t.height,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent}}return this._letterCharSize}_measureSpecialChar(t){return(0,r.Z)(this._specialCharSizeMap[t])?this._specialCharSizeMap[t]:this.specialCharSet.includes(t)?(this._specialCharSizeMap[t]=this._standardMethod(t),this._specialCharSizeMap[t]):null}release(){(0,r.Z)(this._canvas)&&(this._canvas=null),(0,r.Z)(this._context)&&(this._contextSaved&&(this._context.restore(),this._contextSaved=!1),this._context=null)}}h.ALPHABET_CHAR_SET="abcdefghijklmnopqrstuvwxyz",h.NUMBERS_CHAR_SET="0123456789",h.FULL_SIZE_CHAR="字"},90180:function(t,e,i){"use strict";function r(t,e={},i){i||(i=1);let{fontStyle:n=e.fontStyle,fontVariant:s=e.fontVariant,fontWeight:a=e.fontWeight,fontSize:o=e.fontSize,fontFamily:l=e.fontFamily}=t;return(n?n+" ":"")+(s?s+" ":"")+(a?a+" ":"")+o*i+"px "+(l||"sans-serif")}i.d(e,{U:()=>r})},3132:function(t,e,i){"use strict";function r(t,e=!0){if("string"!=typeof t||0===t.length||0===(t=n(t)).length)return 0;t=t.replace(o(),"  ");let i=e?1:2,s=0;for(let e of t){let t=e.codePointAt(0);if(!(t<=31)&&(!(t>=127)||!(t<=159))&&(!(t>=768)||!(t<=879)))switch(a(e)){case"F":case"W":s+=2;break;case"A":s+=i;break;default:s+=1}}return s}i.d(e,{F:()=>a,Z:()=>r});let n=t=>{if("string"!=typeof t)throw TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(s(),"")},s=({onlyFirst:t=!1}={})=>RegExp("[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))",t?void 0:"g"),a=t=>{let e=t.charCodeAt(0),i=2===t.length?t.charCodeAt(1):0,r=e;return 55296<=e&&e<=56319&&56320<=i&&i<=57343&&(e&=1023,i&=1023,r=(e<<10|i)+65536),12288===r||65281<=r&&r<=65376||65504<=r&&r<=65510?"F":8361===r||65377<=r&&r<=65470||65474<=r&&r<=65479||65482<=r&&r<=65487||65490<=r&&r<=65495||65498<=r&&r<=65500||65512<=r&&r<=65518?"H":4352<=r&&r<=4447||4515<=r&&r<=4519||4602<=r&&r<=4607||9001<=r&&r<=9002||11904<=r&&r<=11929||11931<=r&&r<=12019||12032<=r&&r<=12245||12272<=r&&r<=12283||12289<=r&&r<=12350||12353<=r&&r<=12438||12441<=r&&r<=12543||12549<=r&&r<=12589||12593<=r&&r<=12686||12688<=r&&r<=12730||12736<=r&&r<=12771||12784<=r&&r<=12830||12832<=r&&r<=12871||12880<=r&&r<=13054||13056<=r&&r<=19903||19968<=r&&r<=42124||42128<=r&&r<=42182||43360<=r&&r<=43388||44032<=r&&r<=55203||55216<=r&&r<=55238||55243<=r&&r<=55291||63744<=r&&r<=64255||65040<=r&&r<=65049||65072<=r&&r<=65106||65108<=r&&r<=65126||65128<=r&&r<=65131||110592<=r&&r<=110593||127488<=r&&r<=127490||127504<=r&&r<=127546||127552<=r&&r<=127560||127568<=r&&r<=127569||131072<=r&&r<=194367||177984<=r&&r<=196605||196608<=r&&r<=262141?"W":32<=r&&r<=126||162<=r&&r<=163||165<=r&&r<=166||172===r||175===r||10214<=r&&r<=10221||10629<=r&&r<=10630?"Na":161===r||164===r||167<=r&&r<=168||170===r||173<=r&&r<=174||176<=r&&r<=180||182<=r&&r<=186||188<=r&&r<=191||198===r||208===r||215<=r&&r<=216||222<=r&&r<=225||230===r||232<=r&&r<=234||236<=r&&r<=237||240===r||242<=r&&r<=243||247<=r&&r<=250||252===r||254===r||257===r||273===r||275===r||283===r||294<=r&&r<=295||299===r||305<=r&&r<=307||312===r||319<=r&&r<=322||324===r||328<=r&&r<=331||333===r||338<=r&&r<=339||358<=r&&r<=359||363===r||462===r||464===r||466===r||468===r||470===r||472===r||474===r||476===r||593===r||609===r||708===r||711===r||713<=r&&r<=715||717===r||720===r||728<=r&&r<=731||733===r||735===r||768<=r&&r<=879||913<=r&&r<=929||931<=r&&r<=937||945<=r&&r<=961||963<=r&&r<=969||1025===r||1040<=r&&r<=1103||1105===r||8208===r||8211<=r&&r<=8214||8216<=r&&r<=8217||8220<=r&&r<=8221||8224<=r&&r<=8226||8228<=r&&r<=8231||8240===r||8242<=r&&r<=8243||8245===r||8251===r||8254===r||8308===r||8319===r||8321<=r&&r<=8324||8364===r||8451===r||8453===r||8457===r||8467===r||8470===r||8481<=r&&r<=8482||8486===r||8491===r||8531<=r&&r<=8532||8539<=r&&r<=8542||8544<=r&&r<=8555||8560<=r&&r<=8569||8585===r||8592<=r&&r<=8601||8632<=r&&r<=8633||8658===r||8660===r||8679===r||8704===r||8706<=r&&r<=8707||8711<=r&&r<=8712||8715===r||8719===r||8721===r||8725===r||8730===r||8733<=r&&r<=8736||8739===r||8741===r||8743<=r&&r<=8748||8750===r||8756<=r&&r<=8759||8764<=r&&r<=8765||8776===r||8780===r||8786===r||8800<=r&&r<=8801||8804<=r&&r<=8807||8810<=r&&r<=8811||8814<=r&&r<=8815||8834<=r&&r<=8835||8838<=r&&r<=8839||8853===r||8857===r||8869===r||8895===r||8978===r||9312<=r&&r<=9449||9451<=r&&r<=9547||9552<=r&&r<=9587||9600<=r&&r<=9615||9618<=r&&r<=9621||9632<=r&&r<=9633||9635<=r&&r<=9641||9650<=r&&r<=9651||9654<=r&&r<=9655||9660<=r&&r<=9661||9664<=r&&r<=9665||9670<=r&&r<=9672||9675===r||9678<=r&&r<=9681||9698<=r&&r<=9701||9711===r||9733<=r&&r<=9734||9737===r||9742<=r&&r<=9743||9748<=r&&r<=9749||9756===r||9758===r||9792===r||9794===r||9824<=r&&r<=9825||9827<=r&&r<=9829||9831<=r&&r<=9834||9836<=r&&r<=9837||9839===r||9886<=r&&r<=9887||9918<=r&&r<=9919||9924<=r&&r<=9933||9935<=r&&r<=9953||9955===r||9960<=r&&r<=9983||10045===r||10071===r||10102<=r&&r<=10111||11093<=r&&r<=11097||12872<=r&&r<=12879||57344<=r&&r<=63743||65024<=r&&r<=65039||65533===r||127232<=r&&r<=127242||127248<=r&&r<=127277||127280<=r&&r<=127337||127344<=r&&r<=127386||917760<=r&&r<=917999||983040<=r&&r<=1048573||1048576<=r&&r<=1114109?"A":"N"},o=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g},85476:function(t,e,i){"use strict";i.d(e,{Y:()=>l,h:()=>n});var r,n,s=i(4654);let a="undefined"!=typeof console;function o(t,e,i){let r=[e].concat([].slice.call(i));a&&console[t].apply(console,r)}(r=n||(n={}))[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Info=3]="Info",r[r.Debug=4]="Debug";class l{static getInstance(t,e){return l._instance&&(0,s.Z)(t)?l._instance.level(t):l._instance||(l._instance=new l(t,e)),l._instance}static setInstance(t){return l._instance=t}static setInstanceLevel(t){l._instance?l._instance.level(t):l._instance=new l(t)}static clearInstance(){l._instance=null}constructor(t=n.None,e){this._onErrorHandler=[],this._level=t,this._method=e}addErrorHandler(t){this._onErrorHandler.find(e=>e===t)||this._onErrorHandler.push(t)}removeErrorHandler(t){let e=this._onErrorHandler.findIndex(e=>e===t);e<0||this._onErrorHandler.splice(e,1)}callErrorHandler(...t){this._onErrorHandler.forEach(e=>e(...t))}canLogInfo(){return this._level>=n.Info}canLogDebug(){return this._level>=n.Debug}canLogError(){return this._level>=n.Error}canLogWarn(){return this._level>=n.Warn}level(t){return arguments.length?(this._level=+t,this):this._level}error(...t){var e;return this._level>=n.Error&&(this._onErrorHandler.length?this.callErrorHandler(...t):o(null!=(e=this._method)?e:"error","ERROR",t)),this}warn(...t){return this._level>=n.Warn&&o(this._method||"warn","WARN",t),this}info(...t){return this._level>=n.Info&&o(this._method||"log","INFO",t),this}debug(...t){return this._level>=n.Debug&&o(this._method||"log","DEBUG",t),this}}l._instance=null},31982:function(t,e,i){"use strict";i.d(e,{L:()=>r});class r{constructor(){this.CLEAN_THRESHOLD=1e3,this.L_TIME=1e3,this.R_COUNT=1,this.R_TIMESTAMP_MAX_SIZE=20}clearCache(t,e){let{CLEAN_THRESHOLD:i=this.CLEAN_THRESHOLD,L_TIME:r=this.L_TIME,R_COUNT:n=this.R_COUNT}=e;if(t.size<i)return 0;let s=0,a=e=>{s++,t.delete(e)},o=Date.now();return t.forEach((t,e)=>{if(t.timestamp.length<n)return a(e);let i=0;for(;o-t.timestamp[t.timestamp.length-1-i]<r&&!(++i>=n););if(i<n)return a(e);for(;o-t.timestamp[0]>r;)t.timestamp.shift()}),s}addLimitedTimestamp(t,e,i){let{R_TIMESTAMP_MAX_SIZE:r=this.R_TIMESTAMP_MAX_SIZE}=i;t.timestamp.length>r&&t.timestamp.shift(),t.timestamp.push(e)}clearTimeStamp(t,e){let{L_TIME:i=this.L_TIME}=e,r=Date.now();t.forEach(t=>{for(;r-t.timestamp[0]>i;)t.timestamp.shift()})}clearItemTimestamp(t,e){let{L_TIME:i=this.L_TIME}=e,r=Date.now();for(;r-t.timestamp[0]>i;)t.timestamp.shift()}}},8830:function(t,e,i){"use strict";i.d(e,{BZ:()=>a,Bw:()=>B,Ct:()=>S,Fp:()=>g,Ho:()=>r,Ih:()=>D,KU:()=>w,Kh:()=>x,Nb:()=>o,O$:()=>y,U4:()=>T,VV:()=>m,Wn:()=>d,ZR:()=>_,_b:()=>v,el:()=>l,f2:()=>F,f7:()=>c,fv:()=>p,hY:()=>k,i1:()=>C,i4:()=>E,ir:()=>A,l7:()=>M,lE:()=>h,mC:()=>f,ou:()=>s,pi:()=>n,qQ:()=>u,sQ:()=>b});let r=1e-12,n=Math.PI,s=n/2,a=2*n,o=4,l=.001,h=1e-7,u=10,c=2*Math.PI,d=Math.abs,p=Math.atan2,f=Math.cos,g=Math.max,m=Math.min,y=Math.sin,v=Math.sqrt,b=Math.pow;function x(t){return t>1?0:t<-1?n:Math.acos(t)}function _(t){return t>=1?s:t<=-1?-s:Math.asin(t)}function w(t,e,i,r,n){let s=i,a=r;return"number"==typeof t&&"number"==typeof i&&(s=(1-n)*t+n*i),"number"==typeof e&&"number"==typeof r&&(a=(1-n)*e+n*r),{x:s,y:a}}function S(t,e,i){let r=i.x-e.x,n=i.y-e.y,s=t.x-e.x;return Math.abs(r*(t.y-e.y)-s*n)/Math.sqrt(r*r+n*n)}function A(t,e){return t[0]*e[1]-t[1]*e[0]}function C(t,e){return t.x*e.y-t.y*e.x}function D(t,e){let i=0;for(let r=0;r<t.length;++r)i+=t[r]*e[r];return i}function T(t,e){return 1e-12>d(t-e)}function B(t,e){return d(t[0]-e[0])+d(t[1]-e[1])<1e-12}function M(t,e=10){return Math.round(t*e)/e}function E(t){let e=t.toString().split(/[eE]/),i=(e[0].split(".")[1]||"").length-(+e[1]||0);return i>0?i:0}function k(t,e){return M(t+e,10**Math.max(E(t),E(e)))}function F(t,e){return M(t-e,10**Math.max(E(t),E(e)))}},64639:function(t,e,i){"use strict";i.d(e,{o:()=>a});var r=i(89530),n=i(95723),s=i(80971);function a(t){if((0,r.Z)(t))return[t,t,t,t];if((0,n.Z)(t)){let e=t.length;if(1===e){let e=t[0];return[e,e,e,e]}if(2===e){let[e,i]=t;return[e,i,e,i]}if(3===e){let[e,i,r]=t;return[e,i,r,i]}if(4===e)return t}if((0,s.Z)(t)){let{top:e=0,right:i=0,bottom:r=0,left:n=0}=t;return[e,i,r,n]}return[0,0,0,0]}},78596:function(t){var e={},i=RegExp("^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$","i"),r=["style","variant","weight","size","lineHeight","family"],n=/([\.0-9]+)(.*)/,s=function(t,e,i){var r=t.match(n);if(r){t=parseFloat(r[1]);var s=r[2].toLowerCase().trim(),a=Math.round(t);switch(a===t&&(t=a),s){case"em":if(null===e)return;return t*e;case"px":return t;case"pt":return t/(72/i);case"pc":return t/(6/i);case"mm":return i/25.4*t;case"cm":return i/2.54*t;case"in":return t*i;case"%":if(null===e)return;return t/100*e}}},a={size:s,lineHeight:s},o={serif:1,"sans-serif":1,cursive:1,fantasy:1,monospace:1},l=t.exports=function(t,n,s){var h=t+"-"+(n||"null")+"@"+s;if(s=s||96,void 0!==e[h])return e[h];if(n&&(n=l(n,null,s)),"inherit"===t)return n;var u=i.exec(t);if(!u){e[h]=null;return}u.shift();for(var c={},d=0;d<u.length;d++){var p=r[d],f=u[d];if(a[p]&&f){var g=n&&n[p]||null,m=a[p](f,g,s);f=void 0===m&&"lineHeight"===p&&f?c.size*parseFloat(f):m}if(f&&"normal"!==f){if("inherit"===f){if(!n)return;f=n[p]}f.trim&&(f=f.trim()),c[p]=f}}Object.keys(c).length||(c=null),e[h]=c;var y=[];c.style&&y.push(c.style),c.variant&&y.push(c.variant),c.weight&&"400"!==c.weight&&"normal"!==c.weight&&y.push(c.weight),y.push(c.size+"px"),c.lineHeight&&(y[y.length-1]+="/"+c.lineHeight+"px");var v=c.family.split(",");return c.family=v.map(function(t){return o[(t=t.trim()).toLowerCase()]&&(t=t.toLowerCase()),t}),y.push(c.family),Object.defineProperty(c,"toString",{value:function(){return y.map(function(t){return Array.isArray(t)?t.map(function(t){return t.indexOf(" ")>-1?'"'+t.replace(/["']/g,"")+'"':t}).join(", "):t}).join(" ")}}),c};t.exports.generics=o},48097:function(t,e,i){"use strict";function r(){return new n}function n(){this.reset()}i.d(e,{Z:()=>r}),n.prototype={constructor:n,reset:function(){this.s=this.t=0},add:function(t){a(s,t,this.t),a(this,s.s,this.s),this.s?this.t+=s.t:this.s=s.t},valueOf:function(){return this.s}};var s=new n;function a(t,e,i){var r=t.s=e+i,n=r-e;t.t=e-(r-n)+(i-n)}},90607:function(t,e,i){"use strict";function r(t){return t}i.d(e,{Z:()=>r})},96265:function(t,e,i){"use strict";i.d(e,{BZ:()=>l,Ho:()=>r,Kh:()=>w,O$:()=>v,OR:()=>_,Qq:()=>g,RW:()=>h,Wn:()=>c,Xx:()=>b,ZR:()=>S,_b:()=>x,aW:()=>n,cM:()=>m,fv:()=>p,mC:()=>f,ou:()=>a,pi:()=>s,pu:()=>o,sQ:()=>y,uR:()=>u,z4:()=>d});var r=1e-6,n=1e-12,s=Math.PI,a=s/2,o=s/4,l=2*s,h=180/s,u=s/180,c=Math.abs,d=Math.atan,p=Math.atan2,f=Math.cos,g=Math.exp,m=Math.log,y=Math.pow,v=Math.sin,b=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,_=Math.tan;function w(t){return t>1?0:t<-1?s:Math.acos(t)}function S(t){return t>1?a:t<-1?-a:Math.asin(t)}},96819:function(t,e,i){"use strict";function r(){}i.d(e,{Z:()=>r})},42838:function(t,e,i){"use strict";i.d(e,{Z:()=>l});var r=i(96819),n=1/0,s=1/0,a=-1/0,o=a;let l={point:function(t,e){t<n&&(n=t),t>a&&(a=t),e<s&&(s=e),e>o&&(o=e)},lineStart:r.Z,lineEnd:r.Z,polygonStart:r.Z,polygonEnd:r.Z,result:function(){var t=[[n,s],[a,o]];return a=o=-(s=n=1/0),t}}},70522:function(t,e,i){"use strict";i.d(e,{Z:()=>te});var r,n,s,a,o=i(90607),l=i(99848),h=i(48097),u=i(96265),c=i(96819),d=(0,h.Z)(),p=(0,h.Z)(),f={point:c.Z,lineStart:c.Z,lineEnd:c.Z,polygonStart:function(){f.lineStart=g,f.lineEnd=v},polygonEnd:function(){f.lineStart=f.lineEnd=f.point=c.Z,d.add((0,u.Wn)(p)),p.reset()},result:function(){var t=d/2;return d.reset(),t}};function g(){f.point=m}function m(t,e){f.point=y,r=s=t,n=a=e}function y(t,e){p.add(a*t-s*e),s=t,a=e}function v(){y(r,n)}var b,x,_,w,S=i(42838),A=0,C=0,D=0,T=0,B=0,M=0,E=0,k=0,F=0,R={point:P,lineStart:O,lineEnd:z,polygonStart:function(){R.lineStart=Z,R.lineEnd=j},polygonEnd:function(){R.point=P,R.lineStart=O,R.lineEnd=z},result:function(){var t=F?[E/F,k/F]:M?[T/M,B/M]:D?[A/D,C/D]:[NaN,NaN];return A=C=D=T=B=M=E=k=F=0,t}};function P(t,e){A+=t,C+=e,++D}function O(){R.point=L}function L(t,e){R.point=I,P(_=t,w=e)}function I(t,e){var i=t-_,r=e-w,n=(0,u._b)(i*i+r*r);T+=n*(_+t)/2,B+=n*(w+e)/2,M+=n,P(_=t,w=e)}function z(){R.point=P}function Z(){R.point=W}function j(){U(b,x)}function W(t,e){R.point=U,P(b=_=t,x=w=e)}function U(t,e){var i=t-_,r=e-w,n=(0,u._b)(i*i+r*r);T+=n*(_+t)/2,B+=n*(w+e)/2,M+=n,E+=(n=w*t-_*e)*(_+t),k+=n*(w+e),F+=3*n,P(_=t,w=e)}function N(t){this._context=t}N.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,u.BZ)}},result:c.Z};var H,G,V,X,Y,$=(0,h.Z)(),q={point:c.Z,lineStart:function(){q.point=K},lineEnd:function(){H&&Q(G,V),q.point=c.Z},polygonStart:function(){H=!0},polygonEnd:function(){H=null},result:function(){var t=+$;return $.reset(),t}};function K(t,e){q.point=Q,G=X=t,V=Y=e}function Q(t,e){X-=t,Y-=e,$.add((0,u._b)(X*X+Y*Y)),X=t,Y=e}function J(){this._string=[]}function tt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function te(t,e){var i,r,n=4.5;function s(t){return t&&("function"==typeof n&&r.pointRadius(+n.apply(this,arguments)),(0,l.Z)(t,i(r))),r.result()}return s.area=function(t){return(0,l.Z)(t,i(f)),f.result()},s.measure=function(t){return(0,l.Z)(t,i(q)),q.result()},s.bounds=function(t){return(0,l.Z)(t,i(S.Z)),S.Z.result()},s.centroid=function(t){return(0,l.Z)(t,i(R)),R.result()},s.projection=function(e){return arguments.length?(i=null==e?(t=null,o.Z):(t=e).stream,s):t},s.context=function(t){return arguments.length?(r=null==t?(e=null,new J):new N(e=t),"function"!=typeof n&&r.pointRadius(n),s):e},s.pointRadius=function(t){return arguments.length?(n="function"==typeof t?t:(r.pointRadius(+t),+t),s):n},s.projection(t).context(e)}J.prototype={_radius:4.5,_circle:tt(4.5),pointRadius:function(t){return(t*=1)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=tt(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(!this._string.length)return null;var t=this._string.join("");return this._string=[],t}}},99848:function(t,e,i){"use strict";function r(t,e){t&&s.hasOwnProperty(t.type)&&s[t.type](t,e)}i.d(e,{Z:()=>l});var n={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,s=i.length;++n<s;)r(i[n].geometry,e)}},s={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)t=i[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){a(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)a(i[r],e,0)},Polygon:function(t,e){o(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)o(i[r],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,s=i.length;++n<s;)r(i[n],e)}};function a(t,e,i){var r,n=-1,s=t.length-i;for(e.lineStart();++n<s;)r=t[n],e.point(r[0],r[1],r[2]);e.lineEnd()}function o(t,e){var i=-1,r=t.length;for(e.polygonStart();++i<r;)a(t[i],e,1);e.polygonEnd()}function l(t,e){t&&n.hasOwnProperty(t.type)?n[t.type](t,e):r(t,e)}},21883:function(t){"use strict";var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,r,s,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new n(r,s||t,a),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1)),o.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,a=Array(s);n<s;n++)a[n]=r[n].fn;return a},o.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,n,s,a){var o=i?i+t:t;if(!this._events[o])return!1;var l,h,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,n),!0;case 5:return u.fn.call(u.context,e,r,n,s),!0;case 6:return u.fn.call(u.context,e,r,n,s,a),!0}for(h=1,l=Array(c-1);h<c;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var d,p=u.length;for(h=0;h<p;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,r);break;case 4:u[h].fn.call(u[h].context,e,r,n);break;default:if(!l)for(d=1,l=Array(c-1);d<c;d++)l[d-1]=arguments[d];u[h].fn.apply(u[h].context,l)}}return!0},o.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||a(this,s);else{for(var l=0,h=[],u=o.length;l<u;l++)(o[l].fn!==e||n&&!o[l].once||r&&o[l].context!==r)&&h.push(o[l]);h.length?this._events[s]=1===h.length?h[0]:h:a(this,s)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o},50958:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deinterlace=void 0,e.deinterlace=function(t,e){for(var i=Array(t.length),r=t.length/e,n=[0,4,2,1],s=[8,8,4,2],a=0,o=0;o<4;o++)for(var l=n[o];l<r;l+=s[o])!function(r,n){var s=t.slice(n*e,(n+1)*e);i.splice.apply(i,[r*e,e].concat(s))}(l,a),a++;return i}},29216:function(t,e,i){"use strict";e.decompressFrames=e.parseGIF=void 0;var r,n=(r=i(95205))&&r.__esModule?r:{default:r},s=i(74223),a=i(4545),o=i(50958),l=i(11783);e.parseGIF=function(t){var e=new Uint8Array(t);return(0,s.parse)((0,a.buildStream)(e),n.default)};var h=function(t){for(var e=t.pixels.length,i=new Uint8ClampedArray(4*e),r=0;r<e;r++){var n=4*r,s=t.pixels[r],a=t.colorTable[s]||[0,0,0];i[n]=a[0],i[n+1]=a[1],i[n+2]=a[2],i[n+3]=255*(s!==t.transparentIndex)}return i},u=function(t,e,i){if(!t.image)return void console.warn("gif frame does not have associated image.");var r=t.image,n=r.descriptor.width*r.descriptor.height,s=(0,l.lzw)(r.data.minCodeSize,r.data.blocks,n);r.descriptor.lct.interlaced&&(s=(0,o.deinterlace)(s,r.descriptor.width));var a={pixels:s,dims:{top:t.image.descriptor.top,left:t.image.descriptor.left,width:t.image.descriptor.width,height:t.image.descriptor.height}};return r.descriptor.lct&&r.descriptor.lct.exists?a.colorTable=r.lct:a.colorTable=e,t.gce&&(a.delay=10*(t.gce.delay||10),a.disposalType=t.gce.extras.disposal,t.gce.extras.transparentColorGiven&&(a.transparentIndex=t.gce.transparentColorIndex)),i&&(a.patch=h(a)),a};e.decompressFrames=function(t,e){return t.frames.filter(function(t){return t.image}).map(function(i){return u(i,t.gct,e)})}},11783:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lzw=void 0,e.lzw=function(t,e,i){var r,n,s,a,o,l,h,u,c,d,p,f,g,m,y,v=Array(i),b=Array(4096),x=Array(4096),_=Array(4097);for(u=0,o=(n=1<<t)+1,r=n+2,h=-1,s=(1<<(a=t+1))-1;u<n;u++)b[u]=0,x[u]=u;for(c=0,d=p=f=g=m=y=0;c<i;){if(0===g){if(p<a){d+=e[y]<<p,p+=8,y++;continue}if(u=d&s,d>>=a,p-=a,u>r||u==o)break;if(u==n){s=(1<<(a=t+1))-1,r=n+2,h=-1;continue}if(-1==h){_[g++]=x[u],h=u,f=u;continue}for(l=u,u==r&&(_[g++]=f,u=h);u>n;)_[g++]=x[u],u=b[u];f=255&x[u],_[g++]=f,r<4096&&(b[r]=h,x[r]=f,(++r&s)==0&&r<4096&&(a++,s+=r)),h=l}g--,v[m++]=_[g],c++}for(c=m;c<i;c++)v[c]=0;return v}},74223:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loop=e.conditional=e.parse=void 0,e.parse=function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;if(Array.isArray(i))i.forEach(function(i){return t(e,i,r,n)});else if("function"==typeof i)i(e,r,n,t);else{var s=Object.keys(i)[0];Array.isArray(i[s])?(n[s]={},t(e,i[s],r,n[s])):n[s]=i[s](e,r,n,t)}return r},e.conditional=function(t,e){return function(i,r,n,s){e(i,r,n)&&s(i,t,r,n)}},e.loop=function(t,e){return function(i,r,n,s){for(var a=[],o=i.pos;e(i,r,n);){var l={};if(s(i,t,r,l),i.pos===o)break;o=i.pos,a.push(l)}return a}}},4545:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readBits=e.readArray=e.readUnsigned=e.readString=e.peekBytes=e.readBytes=e.peekByte=e.readByte=e.buildStream=void 0,e.buildStream=function(t){return{data:t,pos:0}};var i=function(){return function(t){return t.data[t.pos++]}};e.readByte=i,e.peekByte=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(e){return e.data[e.pos+t]}};var r=function(t){return function(e){return e.data.subarray(e.pos,e.pos+=t)}};e.readBytes=r,e.peekBytes=function(t){return function(e){return e.data.subarray(e.pos,e.pos+t)}},e.readString=function(t){return function(e){return Array.from(r(t)(e)).map(function(t){return String.fromCharCode(t)}).join("")}},e.readUnsigned=function(t){return function(e){var i=r(2)(e);return t?(i[1]<<8)+i[0]:(i[0]<<8)+i[1]}},e.readArray=function(t,e){return function(i,n,s){for(var a="function"==typeof e?e(i,n,s):e,o=r(t),l=Array(a),h=0;h<a;h++)l[h]=o(i);return l}};var n=function(t,e,i){for(var r=0,n=0;n<i;n++)r+=t[e+n]&&Math.pow(2,i-n-1);return r};e.readBits=function(t){return function(e){for(var r=i()(e),s=Array(8),a=0;a<8;a++)s[7-a]=!!(r&1<<a);return Object.keys(t).reduce(function(e,i){var r=t[i];return r.length?e[i]=n(s,r.index,r.length):e[i]=s[r.index],e},{})}}},95205:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(74223),n=i(4545),s={blocks:function(t){for(var e=[],i=t.data.length,r=0,s=(0,n.readByte)()(t);0!==s&&s;s=(0,n.readByte)()(t)){if(t.pos+s>=i){var a=i-t.pos;e.push((0,n.readBytes)(a)(t)),r+=a;break}e.push((0,n.readBytes)(s)(t)),r+=s}for(var o=new Uint8Array(r),l=0,h=0;h<e.length;h++)o.set(e[h],l),l+=e[h].length;return o}},a=(0,r.conditional)({gce:[{codes:(0,n.readBytes)(2)},{byteSize:(0,n.readByte)()},{extras:(0,n.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,n.readUnsigned)(!0)},{transparentColorIndex:(0,n.readByte)()},{terminator:(0,n.readByte)()}]},function(t){var e=(0,n.peekBytes)(2)(t);return 33===e[0]&&249===e[1]}),o=(0,r.conditional)({image:[{code:(0,n.readByte)()},{descriptor:[{left:(0,n.readUnsigned)(!0)},{top:(0,n.readUnsigned)(!0)},{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{lct:(0,n.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,r.conditional)({lct:(0,n.readArray)(3,function(t,e,i){return Math.pow(2,i.descriptor.lct.size+1)})},function(t,e,i){return i.descriptor.lct.exists}),{data:[{minCodeSize:(0,n.readByte)()},s]}]},function(t){return 44===(0,n.peekByte)()(t)}),l=(0,r.conditional)({text:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{preData:function(t,e,i){return(0,n.readBytes)(i.text.blockSize)(t)}},s]},function(t){var e=(0,n.peekBytes)(2)(t);return 33===e[0]&&1===e[1]}),h=(0,r.conditional)({application:[{codes:(0,n.readBytes)(2)},{blockSize:(0,n.readByte)()},{id:function(t,e,i){return(0,n.readString)(i.blockSize)(t)}},s]},function(t){var e=(0,n.peekBytes)(2)(t);return 33===e[0]&&255===e[1]}),u=(0,r.conditional)({comment:[{codes:(0,n.readBytes)(2)},s]},function(t){var e=(0,n.peekBytes)(2)(t);return 33===e[0]&&254===e[1]});e.default=[{header:[{signature:(0,n.readString)(3)},{version:(0,n.readString)(3)}]},{lsd:[{width:(0,n.readUnsigned)(!0)},{height:(0,n.readUnsigned)(!0)},{gct:(0,n.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,n.readByte)()},{pixelAspectRatio:(0,n.readByte)()}]},(0,r.conditional)({gct:(0,n.readArray)(3,function(t,e){return Math.pow(2,e.lsd.gct.size+1)})},function(t,e){return e.lsd.gct.exists}),{frames:(0,r.loop)([a,h,u,o,l],function(t){var e=(0,n.peekByte)()(t);return 33===e||44===e})}]},85208:function(t,e,i){var r=i(34440),n=i(84108),s=i(61085),a=i(77706),o=i(8636);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=n,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,t.exports=l},81998:function(t,e,i){var r=i(90266),n=i(42875),s=i(45828),a=i(24115),o=i(67690);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=n,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,t.exports=l},72887:function(t,e,i){t.exports=i(65234)(i(83250),"Map")},95678:function(t,e,i){var r=i(39016),n=i(62363),s=i(64348),a=i(53062),o=i(30262);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=n,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,t.exports=l},70861:function(t,e,i){t.exports=i(83250).Symbol},29233:function(t){t.exports=function(t,e){for(var i=-1,r=null==t?0:t.length,n=Array(r);++i<r;)n[i]=e(t[i],i,t);return n}},18498:function(t,e,i){var r=i(58260);t.exports=function(t,e){for(var i=t.length;i--;)if(r(t[i][0],e))return i;return -1}},40548:function(t,e,i){var r=i(24007),n=i(86040);t.exports=function(t,e){e=r(e,t);for(var i=0,s=e.length;null!=t&&i<s;)t=t[n(e[i++])];return i&&i==s?t:void 0}},69823:function(t,e,i){var r=i(70861),n=i(91339),s=i(25151),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?n(t):s(t)}},99817:function(t,e,i){var r=i(45563),n=i(28597),s=i(93702),a=i(55784),o=/^\[object .+?Constructor\]$/,l=Object.prototype,h=Function.prototype.toString,u=l.hasOwnProperty,c=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||n(t))&&(r(t)?c:o).test(a(t))}},86245:function(t,e,i){var r=i(70861),n=i(29233),s=i(55589),a=i(52624),o=1/0,l=r?r.prototype:void 0,h=l?l.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return n(e,t)+"";if(a(e))return h?h.call(e):"";var i=e+"";return"0"==i&&1/e==-o?"-0":i}},24007:function(t,e,i){var r=i(55589),n=i(5130),s=i(44041),a=i(99835);t.exports=function(t,e){return r(t)?t:n(t,e)?[t]:s(a(t))}},1622:function(t,e,i){t.exports=i(83250)["__core-js_shared__"]},20302:function(t,e,i){t.exports="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g},77570:function(t,e,i){var r=i(58949);t.exports=function(t,e){var i=t.__data__;return r(e)?i["string"==typeof e?"string":"hash"]:i.map}},65234:function(t,e,i){var r=i(99817),n=i(67736);t.exports=function(t,e){var i=n(t,e);return r(i)?i:void 0}},91339:function(t,e,i){var r=i(70861),n=Object.prototype,s=n.hasOwnProperty,a=n.toString,o=r?r.toStringTag:void 0;t.exports=function(t){var e=s.call(t,o),i=t[o];try{t[o]=void 0;var r=!0}catch(t){}var n=a.call(t);return r&&(e?t[o]=i:delete t[o]),n}},67736:function(t){t.exports=function(t,e){return null==t?void 0:t[e]}},34440:function(t,e,i){var r=i(24545);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},84108:function(t){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=!!e,e}},61085:function(t,e,i){var r=i(24545),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return n.call(e,t)?e[t]:void 0}},77706:function(t,e,i){var r=i(24545),n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:n.call(e,t)}},8636:function(t,e,i){var r=i(24545);t.exports=function(t,e){var i=this.__data__;return this.size+=+!this.has(t),i[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},5130:function(t,e,i){var r=i(55589),n=i(52624),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var i=typeof t;return!!("number"==i||"symbol"==i||"boolean"==i||null==t||n(t))||a.test(t)||!s.test(t)||null!=e&&t in Object(e)}},58949:function(t){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},28597:function(t,e,i){var r,n=i(1622),s=(r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!s&&s in t}},90266:function(t){t.exports=function(){this.__data__=[],this.size=0}},42875:function(t,e,i){var r=i(18498),n=Array.prototype.splice;t.exports=function(t){var e=this.__data__,i=r(e,t);return!(i<0)&&(i==e.length-1?e.pop():n.call(e,i,1),--this.size,!0)}},45828:function(t,e,i){var r=i(18498);t.exports=function(t){var e=this.__data__,i=r(e,t);return i<0?void 0:e[i][1]}},24115:function(t,e,i){var r=i(18498);t.exports=function(t){return r(this.__data__,t)>-1}},67690:function(t,e,i){var r=i(18498);t.exports=function(t,e){var i=this.__data__,n=r(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}},39016:function(t,e,i){var r=i(85208),n=i(81998),s=i(72887);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||n),string:new r}}},62363:function(t,e,i){var r=i(77570);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=!!e,e}},64348:function(t,e,i){var r=i(77570);t.exports=function(t){return r(this,t).get(t)}},53062:function(t,e,i){var r=i(77570);t.exports=function(t){return r(this,t).has(t)}},30262:function(t,e,i){var r=i(77570);t.exports=function(t,e){var i=r(this,t),n=i.size;return i.set(t,e),this.size+=+(i.size!=n),this}},32924:function(t,e,i){var r=i(67997);t.exports=function(t){var e=r(t,function(t){return 500===i.size&&i.clear(),t}),i=e.cache;return e}},24545:function(t,e,i){t.exports=i(65234)(Object,"create")},25151:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},83250:function(t,e,i){var r=i(20302),n="object"==typeof self&&self&&self.Object===Object&&self;t.exports=r||n||Function("return this")()},44041:function(t,e,i){var r=i(32924),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g;t.exports=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(n,function(t,i,r,n){e.push(r?n.replace(s,"$1"):i||t)}),e})},86040:function(t,e,i){var r=i(52624),n=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-n?"-0":e}},55784:function(t){var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},58260:function(t){t.exports=function(t,e){return t===e||t!=t&&e!=e}},13546:function(t,e,i){var r=i(40548);t.exports=function(t,e,i){var n=null==t?void 0:r(t,e);return void 0===n?i:n}},55589:function(t){t.exports=Array.isArray},45563:function(t,e,i){var r=i(69823),n=i(93702);t.exports=function(t){if(!n(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},93702:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},50440:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},52624:function(t,e,i){var r=i(69823),n=i(50440);t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==r(t)}},67997:function(t,e,i){var r=i(95678);function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw TypeError("Expected a function");var i=function(){var r=arguments,n=e?e.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var a=t.apply(this,r);return i.cache=s.set(n,a)||s,a};return i.cache=new(n.Cache||r),i}n.Cache=r,t.exports=n},99835:function(t,e,i){var r=i(86245);t.exports=function(t){return null==t?"":r(t)}},30939:function(t,e,i){var r=i(25666);function n(e,i){var r=e.geometry,n=r.type;if("LineString"===n)r.coordinates=t.exports.simplify(r.coordinates,i);else if("Polygon"===n||"MultiLineString"===n)for(var s=0;s<r.coordinates.length;s++)r.coordinates[s]=t.exports.simplify(r.coordinates[s],i);else if("MultiPolygon"===n)for(var a=0;a<r.coordinates.length;a++)for(var o=0;o<r.coordinates[a].length;o++)r.coordinates[a][o]=t.exports.simplify(r.coordinates[a][o],i);return e}t.exports=function(t,e,i){return(i||(t=JSON.parse(JSON.stringify(t))),t.features)?function(t,e){for(var i=0;i<t.features.length;i++)t.features[i]=n(t.features[i],e);return t}(t,e):t.type&&"Feature"===t.type?n(t,e):Error("FeatureCollection or individual Feature required")},t.exports.simplify=function(t,e){return r(t,e)}},25666:function(t,e,i){var r=i(45549),n=function(t,e){for(var i=0,s=0,a=1;a<=t.length-2;a++){var o=new r(t[0],t[t.length-1]).perpendicularDistance(t[a]);o>i&&(s=a,i=o)}if(i>e)var l=n(t.slice(0,s),e),h=n(t.slice(s,t.length),e),u=l.concat(h);else u=t.length>1?[t[0],t[t.length-1]]:[t[0]];return u};t.exports=n},45549:function(t){var e=function(t,e){this.p1=t,this.p2=e};e.prototype.rise=function(){return this.p2[1]-this.p1[1]},e.prototype.run=function(){return this.p2[0]-this.p1[0]},e.prototype.slope=function(){return this.rise()/this.run()},e.prototype.yIntercept=function(){return this.p1[1]-this.p1[0]*this.slope(this.p1,this.p2)},e.prototype.isVertical=function(){return!isFinite(this.slope())},e.prototype.isHorizontal=function(){return this.p1[1]==this.p2[1]},e.prototype._perpendicularDistanceHorizontal=function(t){return Math.abs(this.p1[1]-t[1])},e.prototype._perpendicularDistanceVertical=function(t){return Math.abs(this.p1[0]-t[0])},e.prototype._perpendicularDistanceHasSlope=function(t){var e=this.slope(),i=this.yIntercept();return Math.abs(e*t[0]-t[1]+i)/Math.sqrt(Math.pow(e,2)+1)},e.prototype.perpendicularDistance=function(t){return this.isVertical()?this._perpendicularDistanceVertical(t):this.isHorizontal()?this._perpendicularDistanceHorizontal(t):this._perpendicularDistanceHasSlope(t)},t.exports=e},72513:function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{_:()=>r})},49015:function(t,e,i){"use strict";i.d(e,{Kn:()=>o,lF:()=>a,uf:()=>s,zL:()=>n});var r={centimeters:0x25f96350,centimetres:0x25f96350,degrees:6371008.8/111325,feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:6371008.8,metres:6371008.8,miles:3958.761333810546,millimeters:0x17bbde120,millimetres:0x17bbde120,nauticalmiles:6371008.8/1852,radians:1,yards:6967335.223679999};function n(t,e,i){void 0===i&&(i={});var r={type:"Feature"};return(0===i.id||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function a(t,e){void 0===e&&(e="kilometers");var i=r[e];if(!i)throw Error(e+" units is invalid");return t/i}function o(t){return!!t&&t.constructor===Object}},84086:function(t,e,i){"use strict";i.d(e,{a:()=>n});var r=i(65751);function n(...t){return(0,r.a)(s,t)}function s(t,e){let i={};for(let r of e)r in t&&(i[r]=t[r]);return i}},83671:function(t,e,i){"use strict";i.d(e,{a:()=>n});var r=i(25441);function n(t,...e){let i=t,s=e.map(t=>"lazy"in t?function(t){let{lazy:e,lazyArgs:i}=t;return Object.assign(e(...i),{isSingle:e.single??!1,index:0,items:[]})}(t):void 0),a=0;for(;a<e.length;){var o;if(void 0===s[a]||!("string"==typeof(o=i)||"object"==typeof o&&null!==o&&Symbol.iterator in o)){i=(0,e[a])(i),a+=1;continue}let t=[];for(let i=a;i<e.length;i++){let e=s[i];if(void 0===e||(t.push(e),e.isSingle))break}let n=[];for(let e of i)if(function t(e,i,n){if(0===n.length)return i.push(e),!1;let s=e,a=r.a,o=!1;for(let[e,r]of n.entries()){let{index:l,items:h}=r;if(h.push(s),a=r(s,l,h),r.index+=1,a.hasNext){if(a.hasMany){for(let r of a.next)if(t(r,i,n.slice(e+1)))return!0;return o}s=a.next}if(!a.hasNext)break;a.done&&(o=!0)}return a.hasNext&&i.push(s),o}(e,n,t))break;let{isSingle:l}=t.at(-1);i=l?n[0]:n,a+=t.length}return i}},94321:function(t,e,i){"use strict";i.d(e,{a:()=>n});var r=i(65751);function n(...t){return(0,r.a)(s,t)}function s(t,e){let i={};for(let[r,n]of Object.entries(t)){let s=e(n,r,t);i[r]=s}return i}},57969:function(t,e,i){"use strict";i.d(e,{a:()=>n});var r=i(65751);function n(...t){return(0,r.a)(s,t)}var s=(t,e)=>({...t,...e})},36922:function(t,e,i){"use strict";function r(t){return"number"==typeof t&&!Number.isNaN(t)}i.d(e,{a:()=>r})},36628:function(t,e,i){"use strict";i.d(e,{a:()=>s});var r=i(12437),n=i(25441);function s(...t){return(0,r.a)(a,t)}function a(t){let e=new Set;return(i,r,s)=>{let a=t(i,r,s);return e.has(a)?n.a:(e.add(a),{done:!1,hasNext:!0,next:i})}}},25441:function(t,e,i){"use strict";i.d(e,{a:()=>r});var r={done:!1,hasNext:!1}},51560:function(t,e,i){"use strict";i.d(e,{a:()=>n});var r=i(65751);function n(...t){return(0,r.a)(function t(e,i=[],r=[]){if("function"==typeof e)return e;if("object"!=typeof e||null===e)return structuredClone(e);let n=Object.getPrototypeOf(e);if(!Array.isArray(e)&&null!==n&&n!==Object.prototype)return structuredClone(e);let s=i.indexOf(e);return -1!==s?r[s]:(i.push(e),Array.isArray(e)?function(e,i,r){let n=[];for(let[s,a]of(r.push(n),e.entries()))n[s]=t(a,i,r);return n}(e,i,r):function(e,i,r){let n={};for(let[s,a]of(r.push(n),Object.entries(e)))n[s]=t(a,i,r);return n}(e,i,r))},t)}},16304:function(t,e,i){"use strict";function r(t){return Array.isArray(t)}i.d(e,{a:()=>r})},6070:function(t,e,i){"use strict";function r(t){if("object"!=typeof t||null===t)return!1;let e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}i.d(e,{a:()=>r})},24922:function(t,e,i){"use strict";i.d(e,{a:()=>n});var r=i(65751);function n(...t){return(0,r.a)(function t(e,i){if(e===i||Object.is(e,i))return!0;if("object"!=typeof e||"object"!=typeof i||null===e||null===i||Object.getPrototypeOf(e)!==Object.getPrototypeOf(i))return!1;if(Array.isArray(e)){var r=e,n=i;if(r.length!==n.length)return!1;for(let[e,i]of r.entries())if(!t(i,n[e]))return!1;return!0}if(e instanceof Map){var s=e,a=i;if(s.size!==a.size)return!1;for(let[e,i]of s.entries())if(!a.has(e)||!t(i,a.get(e)))return!1;return!0}if(e instanceof Set){var o=e,l=i;if(o.size!==l.size)return!1;let r=[...l];for(let e of o){let i=!1;for(let[n,s]of r.entries())if(t(e,s)){i=!0,r.splice(n,1);break}if(!i)return!1}return!0}if(e instanceof Date)return e.getTime()===i.getTime();if(e instanceof RegExp)return e.toString()===i.toString();if(Object.keys(e).length!==Object.keys(i).length)return!1;for(let[r,n]of Object.entries(e))if(!(r in i)||!t(n,i[r]))return!1;return!0},t)}},83498:function(t,e,i){"use strict";i.d(e,{a:()=>n});var r=i(65751);function n(...t){return(0,r.a)(s,t)}var s=(t,e)=>{let i=Object.create(null);for(let r=0;r<t.length;r++){let n=t[r],s=e(n,r,t);if(void 0!==s){let t=i[s];void 0===t?i[s]=[n]:t.push(n)}}return Object.setPrototypeOf(i,Object.prototype),i}},12341:function(t,e,i){"use strict";function r(t){return null==t}i.d(e,{a:()=>r})},24356:function(t,e,i){"use strict";i.d(e,{a:()=>a});var r=i(65751);function n(...t){return(0,r.a)(s,t)}var s=(t,e)=>t.length>=e;function a(...t){return(0,r.a)(o,t)}function o(t,e){if(!n(e,1))return{...t};if(!n(e,2)){let{[e[0]]:i,...r}=t;return r}let i={...t};for(let t of e)delete i[t];return i}},12437:function(t,e,i){"use strict";i.d(e,{a:()=>n});var r=i(83671);function n(t,e){let i=e.length-t.length;if(1===i){let[i,...n]=e;return(0,r.a)(i,{lazy:t,lazyArgs:n})}if(0===i){let i={lazy:t,lazyArgs:e};return Object.assign(t=>(0,r.a)(t,i),i)}throw Error("Wrong number of arguments")}},34712:function(t,e,i){"use strict";i.d(e,{a:()=>n});var r=i(65751);function n(...t){return(0,r.a)(s,t)}function s(t,e){let i=[...t];return i.sort(e),i}},62443:function(t,e,i){"use strict";function r(t){return"object"==typeof t&&null!==t}i.d(e,{a:()=>r})},41514:function(t,e,i){"use strict";i.d(e,{a:()=>s});var r=i(6070),n=i(65751);function s(...t){return(0,n.a)(function t(e,i){let n={...e,...i};for(let s in i){if(!(s in e))continue;let{[s]:a}=e;if(!(0,r.a)(a))continue;let{[s]:o}=i;(0,r.a)(o)&&(n[s]=t(a,o))}return n},t)}},40160:function(t,e,i){"use strict";i.d(e,{a:()=>s});var r=i(12437),n=i(25441);function s(...t){return(0,r.a)(a,t)}function a(){let t=new Set;return e=>t.has(e)?n.a:(t.add(e),{done:!1,hasNext:!0,next:e})}},53126:function(t,e,i){"use strict";function r(t){return"string"==typeof t}i.d(e,{a:()=>r})},60647:function(t,e,i){"use strict";function r(t){return void 0===t||("string"==typeof t||Array.isArray(t)?0===t.length:0===Object.keys(t).length)}i.d(e,{a:()=>r})},65751:function(t,e,i){"use strict";function r(t,e,i){let r=t.length-e.length;if(0===r)return t(...e);if(1===r){let r;return r=i=>t(i,...e),void 0===i?r:Object.assign(r,{lazy:i,lazyArgs:e})}throw Error("Wrong number of arguments")}i.d(e,{a:()=>r})}}]);
//# sourceMappingURL=3406.ec71b63f.js.map