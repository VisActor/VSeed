"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["5199"],{60378:function(e,t,o){o.r(t),o.d(t,{Builder:()=>z,FoldMeasureId:()=>ep,FoldMeasureName:()=>es,FoldMeasureValue:()=>eu,FoldPrimaryMeasureValue:()=>ec,FoldSecondaryMeasureValue:()=>ef,ORIGINAL_DATA:()=>eb,Separator:()=>em,UnfoldDimensionGroup:()=>eg,UnfoldDimensionGroupId:()=>eh,areaAdvancedPipeline:()=>tU,areaPercentAdvancedPipeline:()=>t2,areaPercentSpecPipeline:()=>t4,areaRangeAdvancedPipeline:()=>t9,areaRangeSpecPipeline:()=>on,areaSpecPipeline:()=>t0,autoFormatter:()=>eK,autoNumFormatter:()=>eN,barAdvancedPipeline:()=>tX,barParallelAdvancedPipeline:()=>tN,barParallelSpecPipeline:()=>tK,barPercentAdvancedPipeline:()=>t$,barPercentSpecPipeline:()=>tY,barSpecPipeline:()=>tV,columnAdvancedPipeline:()=>ty,columnParallelAdvancedPipeline:()=>tF,columnParallelSpecPipeline:()=>tM,columnPercentAdvancedPipeline:()=>tP,columnPercentSpecPipeline:()=>tL,columnSpecPipeline:()=>tk,createFormatter:()=>eG,createNumFormatter:()=>eH,darkTheme:()=>ip,dataReshapeFor1D:()=>t6,dataReshapeFor1D1M:()=>oB,dataReshapeFor1D2M:()=>os,dataReshapeFor2D1M:()=>th,dataReshapeFor2D1M0Name:()=>eI,donutAdvancedPipeline:()=>oO,donutSpecPipeline:()=>oV,dualAxisAdvancedPipeline:()=>om,dualAxisSpecPipeline:()=>oM,execPipeline:()=>y,findAllDimensions:()=>j,findAllMeasures:()=>L,findDimensionById:()=>G,findFirstDimension:()=>K,findFirstMeasure:()=>B,findMeasureById:()=>P,foldMeasures:()=>ey,funnelAdvancedPipeline:()=>o7,funnelSpecPipeline:()=>it,heatmapAdvancedPipeline:()=>ii,heatmapSpecPipeline:()=>ir,i18n:()=>k,intl:()=>A,isDimensionSelector:()=>e2,isMeasureSelector:()=>e1,isPartialDatumSelector:()=>e0,isPivotChart:()=>ei,isPivotTable:()=>ee,isTable:()=>Q,isVChart:()=>eo,isVTable:()=>et,isValueSelector:()=>eQ,lightTheme:()=>is,lineAdvancedPipeline:()=>eX,lineSpecPipeline:()=>tc,measureDepth:()=>J,pieAdvancedPipeline:()=>oX,pieSpecPipeline:()=>oZ,pivotTableAdvancedPipeline:()=>$,pivotTableSpecPipeline:()=>Y,preorderTraverse:()=>_,radarAdvancedPipeline:()=>o1,radarSpecPipeline:()=>o5,registerAll:()=>ih,registerArea:()=>t1,registerAreaPercent:()=>t8,registerAreaRange:()=>or,registerBar:()=>tH,registerBarParallel:()=>tj,registerBarPercent:()=>tq,registerColumn:()=>tS,registerColumnParallel:()=>t_,registerColumnPercent:()=>tW,registerCustomTheme:()=>iu,registerDarkTheme:()=>ig,registerDonut:()=>oH,registerFunnel:()=>io,registerHeatmap:()=>id,registerLightTheme:()=>ic,registerLine:()=>tf,registerPie:()=>ow,registerPivotTable:()=>q,registerRadar:()=>o3,registerRose:()=>oq,registerRoseParallel:()=>o0,registerScatter:()=>og,registerTable:()=>N,roseAdvancedPipeline:()=>oG,roseParallelAdvancedPipeline:()=>oU,roseParallelSpecPipeline:()=>oQ,roseSpecPipeline:()=>oY,scatterAdvancedPipeline:()=>op,scatterSpecPipeline:()=>of,selector:()=>eJ,tableAdvancedPipeline:()=>D,tableSpecPipeline:()=>H,unfoldDimensions:()=>ex,updateAdvanced:()=>im,updateSpec:()=>ib,zAdvancedVSeed:()=>lU,zAnalysis:()=>lF,zAnnotation:()=>lA,zAnnotationArea:()=>lI,zAnnotationHorizontalLine:()=>lR,zAnnotationPoint:()=>lv,zAnnotationVerticalLine:()=>lC,zArea:()=>lZ,zAreaConfig:()=>i3,zAreaPercent:()=>lw,zAreaPercentConfig:()=>i7,zAreaRange:()=>lO,zAreaRangeConfig:()=>i6,zAreaStyle:()=>ly,zAxis:()=>ls,zBackgroundColor:()=>iN,zBar:()=>lT,zBarConfig:()=>i4,zBarParallel:()=>lX,zBarParallelConfig:()=>i8,zBarPercent:()=>lD,zBarPercentConfig:()=>i5,zBarStyle:()=>lh,zChartType:()=>iy,zColor:()=>iG,zColorLegend:()=>iY,zColumn:()=>lB,zColumnConfig:()=>i0,zColumnParallel:()=>lL,zColumnParallelConfig:()=>i1,zColumnPercent:()=>lW,zColumnPercentConfig:()=>i2,zConfig:()=>ld,zCrosshairLine:()=>iE,zCrosshairRect:()=>iV,zCustomTheme:()=>lu,zCustomThemeConfig:()=>lp,zDataset:()=>iC,zDatasetReshapeInfo:()=>iT,zDatum:()=>iv,zDimension:()=>iR,zDimensionGroup:()=>iI,zDimensionTree:()=>ik,zDimensions:()=>iA,zDonut:()=>lK,zDonutConfig:()=>ll,zDualAxis:()=>lV,zDualAxisConfig:()=>i9,zDualChartType:()=>ix,zDualMeasure:()=>iP,zDualMeasures:()=>iB,zEncoding:()=>iX,zFoldInfo:()=>iL,zFunnel:()=>l$,zFunnelConfig:()=>ln,zHeatmap:()=>lY,zHeatmapConfig:()=>lr,zLabel:()=>ij,zLegend:()=>i$,zLine:()=>lP,zLineConfig:()=>iQ,zLineStyle:()=>lb,zLinearColor:()=>iK,zLocale:()=>lz,zMarkStyle:()=>lx,zMeasure:()=>iF,zMeasureGroup:()=>iz,zMeasureTree:()=>i_,zMeasures:()=>iM,zNumFormat:()=>iS,zPie:()=>lG,zPieConfig:()=>li,zPivotTable:()=>l_,zPivotTableConfig:()=>iJ,zPointStyle:()=>lm,zRadar:()=>lj,zRadarConfig:()=>la,zRose:()=>lH,zRoseConfig:()=>lt,zRoseParallel:()=>lN,zRoseParallelConfig:()=>lo,zScatter:()=>lE,zScatterConfig:()=>le,zSort:()=>lk,zSortLegend:()=>lS,zStackCornerRadius:()=>iH,zTable:()=>lM,zTableConfig:()=>iU,zTheme:()=>lc,zTooltip:()=>iq,zUnfoldInfo:()=>iW,zVSeed:()=>lq,zXBandAxis:()=>iD,zXLinearAxis:()=>iw,zYBandAxis:()=>iZ,zYLinearAxis:()=>iO});var i=o(12341),l=o(2875),a=o(83361),n=o(51560),r=o(62443),d=o(57969),s=o(24356),p=o(34712),u=o(84086),c=o(36922),f=o(60647),g=o(83498),h=o(16304),m=o(53126),b=o(24709);let y=(e,t,o={})=>e.reduce((e,o)=>o(e,t),o),x=e=>{let t="undefined"!=typeof performance?performance.now():Date.now(),{chartType:o}=e.vseed;if(!o)throw Error("chartType is nil in buildAdvanced");let i=z.getAdvancedPipeline(o);if(!i)throw Error(`no advanced pipeline for chartType ${o}`);let l={vseed:e.vseed,customTheme:z.getThemeMap()};try{return y(i,l)}catch(e){throw console.error(e),Error("buildAdvanced error, see error info in console")}finally{let o="undefined"!=typeof performance?performance.now():Date.now();e.performance.buildAdvanced=`${(o-t).toFixed(4)}ms`}},v=(e,t)=>{let o="undefined"!=typeof performance?performance.now():Date.now(),{chartType:i}=e.vseed;if(!i)throw Error("chartType is nil in buildSpec");let l=z.getSpecPipeline(i);if(!l)throw Error(`no spec pipeline for chartType ${i}`);let a={vseed:e.vseed,advancedVSeed:t};try{return y(l,a)}catch(e){throw console.error(e),Error("buildSpec error, see error info in console")}finally{let t="undefined"!=typeof performance?performance.now():Date.now();e.performance.buildSpec=`${(t-o).toFixed(4)}ms`}},C=e=>{let t=e.buildAdvanced();if(e.advancedVSeed=t,!t)throw Error("advancedVSeed is null");let o=e.buildSpec(t);return e.spec=o,o};var R=JSON.parse('{"指标名称":{"en-US":"MeasureName","zh-CN":"指标名称"},"指标Id":{"en-US":"MeasureId","zh-CN":"指标Id"},"指标值":{"en-US":"MeasureValue","zh-CN":"指标值"}}');class I{static instance;translateMap=R;locale="zh-CN";canTranslate=e=>!!this.translateMap[e];i18n=(e,...t)=>{let o=e.map((e,o)=>e+(t[o]||"")).join(""),l=this.translateMap?.[o]?.[this.locale];return(0,i.a)(l)?(console.warn(`i18n ${this.locale} no translate: ${o}`),o):l};setLocale=e=>{this.locale=e};getLocale=()=>this.locale;static getInstance(){return I.instance||(I.instance=new I),I.instance}}let A=I.getInstance(),k=A.i18n,S=e=>{let t=e.advancedVSeed;if(!t)return[];let{datasetReshapeInfo:o}=t,i=(0,l.a)(o.flatMap(e=>e.unfoldInfo.colorItems)),a=o.reduce((e,t)=>({...e,...t.unfoldInfo.colorIdMap}),{});return i.map(e=>a[e])},F=e=>{let t=e.advancedVSeed;if(!t)return{};let{datasetReshapeInfo:o}=t;return o.reduce((e,t)=>({...e,...t.unfoldInfo.colorIdMap}),{})};class z{_vseed;_advancedVSeed=null;_spec=null;_performance={};constructor(e){this._vseed=e,this._vseed.locale=e.locale||A.getLocale()}build=()=>C(this);buildSpec=e=>v(this,e);buildAdvanced=()=>x(this);getColorItems=()=>S(this);getColorIdMap=()=>F(this);get vseed(){return this._vseed}set vseed(e){this._vseed=e}get advancedVSeed(){return this._advancedVSeed}set advancedVSeed(e){this._advancedVSeed=e}get spec(){return this._spec}set spec(e){this._spec=e}get performance(){return this._performance}set performance(e){this._performance=e}static getAdvancedPipeline=e=>{let t=z._customAdvancedPipe[e],o=z._advancedPipelineMap[e];return t&&o.push(t),o};static getSpecPipeline=e=>{let t=z._customSpecPipe[e],o=z._specPipelineMap[e];return t&&o.push(t),o};static getTheme=e=>z._themeMap[e];static getThemeMap=()=>z._themeMap;static from=e=>new z(e);static _advancedPipelineMap={};static _specPipelineMap={};static _customAdvancedPipe={};static _customSpecPipe={};static _themeMap={}}let M=(e,t)=>{let{vseed:o}=t,{chartType:i,locale:l}=o;return{...e,chartType:i,locale:l||"zh-CN"}},_=(e,t)=>{if(!e||0===e.length)return;let o=[...e].reverse();for(;o.length>0;){let e=o.pop();if(!0===t(e))return;if(!("children"in e))continue;let i=e.children;if(i&&i.length>0)for(let e=i.length-1;e>=0;e--){let t=i[e];o.push(t)}}},P=(e=[],t)=>{let o;if(e)return _(e,e=>!("children"in e)&&e.id===t&&(o=e,!0)),o},B=(e=[])=>{let t;if(e)return _(e,e=>!("children"in e)&&(t=e,!0)),t},L=(e=[])=>{if(!e)return[];let t=[];return _(e,e=>("children"in e||t.push(e),!1)),t},W=(e,t)=>{let{vseed:o}=t,{dataset:i}=o;return{...e,dataset:i}},T=(e,t)=>{let{customTheme:o,vseed:i}=t,{theme:l="light",chartType:r}=i,d={...e};if(!o||!o[l])return d;let s=o?.[l].config?.[r];if(s){let e=d.config?.[r]||{},t=(0,a.a)(s,(0,n.a)(e));for(let e in t)Array.isArray(t[e])&&(t[e]=X(t[e],s[e]));d.config={[r]:t}}let p=o?.[l]?.config?.[r];return d.customTheme={config:{[r]:p}},d},X=(e,t)=>!Array.isArray(e)||e.some(e=>!(0,r.a)(e))?e:e.map(e=>(0,d.a)(t,e)),D=[M,(e,t)=>{let o={...e},{vseed:i}=t,{measures:l,dataset:a}=i;if(!a)throw Error("dataset is required");if(0===a.length)return o;if(l)return o.measures=l,o;let n=a.slice(0,100);return o.measures=Object.keys(n.reduce((e,t)=>({...e,...t}),{})).filter(e=>n.some(t=>"number"==typeof t[e])&&!["",null,void 0].includes(e)).map(e=>({id:e,alias:e})),o},(e,t)=>{let o={...e},{vseed:i}=t,{dimensions:l,dataset:a}=i,n=L(e.measures);if(!a)throw Error("dataset is required");if(0===a.length)return o;if(l)return o.dimensions=l.map(e=>({location:"dimension",...e})),o;let r=a.slice(0,100);return o.dimensions=Object.keys(r.reduce((e,t)=>({...e,...t}),{})).filter(e=>r.some(t=>"string"==typeof t[e])&&!["",null,void 0].includes(e)&&!n.some(t=>t.id===e)).map(e=>({id:e,alias:e,location:"dimension"})),o},W,T],Z=(e,t)=>e.map(e=>{if("children"in e&&Array.isArray(e.children)){let o=e.id,i=e.alias??e.id,l=t?.(e)||{};return{field:o,title:i,columns:Z(e.children,t),...l}}{let o=e.id;return{field:o,title:e.alias??e.id,...t?.(e)||{}}}})||[],w=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{customTheme:l,chartType:a}=i,n=l?.config?.[a];if(!o.theme||!n)return o;let r=n.borderColor||"rgb(224, 224, 224)",d=n.bodyBackgroundColor||"#fff",s=n.bodyFontColor||"#1B1F23",p=n.bodyFontSize||12,u=n.hoverBodyBackgroundColor||"#bedaff",c=n.hoverBodyInlineBackgroundColor||"#bedaff";return o.theme.bodyStyle={borderColor:r,borderLineWidth:1,padding:[8.6,12,8.6,12],textAlign:"right",hover:{cellBgColor:u,inlineRowBgColor:c,inlineColumnBgColor:c},color:s,fontSize:p,fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",bgColor:d,lineHeight:1.5*p},o},O=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{customTheme:l,chartType:a}=i,n=l?.config?.[a];if(!o.theme||!n)return o;let r=n.borderColor||"rgb(224, 224, 224)",d=n.headerBackgroundColor||"#EEF1F5",s=n.headerFontColor||"#1B1F23",p=n.headerFontSize||12,u=n.hoverHeaderBackgroundColor||"#bedaff",c=n.hoverHeaderInlineBackgroundColor||"#bedaff";return o.theme.headerStyle={borderColor:r,borderLineWidth:1,padding:[8,12,8,12],textAlign:"center",hover:{cellBgColor:u,inlineRowBgColor:c,inlineColumnBgColor:c},frameStyle:{borderColor:[null,null,r,null],borderLineWidth:1},fontSize:p,fontVariant:"normal",fontStyle:"normal",fontWeight:"bold",color:s,bgColor:d,lineHeight:1.5*p},o},E=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{customTheme:l,chartType:a}=i,n=l?.config?.[a];if(!o.theme||!n)return o;let r=n.borderColor||"rgb(224, 224, 224)";return o.theme.frameStyle={borderColor:r,borderLineWidth:0,cornerRadius:4},o},V=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{customTheme:l,chartType:a}=i,n=l?.config?.[a];if(!o.theme||!n)return o;let r=n.selectedBorderColor||"rgb(224, 224, 224)",d=n.selectedBackgroundColor||"rgb(224, 224, 224, 0.5)";return o.theme.selectionStyle={cellBorderColor:r,cellBorderLineWidth:2,cellBgColor:d},o},H=[(e,t)=>{let{advancedVSeed:o}=t,{dataset:i}=o;return{...e,records:i,widthMode:"standard",heightMode:"autoHeight",autoWrapText:!0,columnResizeMode:"all",showHeader:!0,tooltip:{isShowOverflowTextTooltip:!0},animationAppear:{duration:300,delay:250,type:"one-by-one",direction:"row"},hover:{highlightMode:"row"},theme:{underlayBackgroundColor:"transparent"}}},(e,t)=>{let{advancedVSeed:o}=t,i=o.dimensions,l={...e},a=Z(i,e=>"children"in e?{}:{width:"auto"});return{...l,columns:[...l.columns||[],...a]}},(e,t)=>{let{advancedVSeed:o}=t,i=o.measures,l={...e},a=Z(i,e=>"children"in e?{}:{width:"auto"});return{...l,columns:[...l.columns||[],...a]}},w,O,E,V],N=()=>{z._advancedPipelineMap.table=D,z._specPipelineMap.table=H},G=(e=[],t)=>{let o;if(e)return _(e,e=>!("children"in e)&&e.id===t&&(o=e,!0)),o},K=(e=[])=>{let t;if(e)return _(e,e=>!("children"in e)&&(t=e,!0)),t},j=(e=[])=>{if(!e)return[];let t=[];return _(e,e=>("children"in e||t.push(e),!1)),t},$=[M,(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,a=L(i.measures);if(!l)throw Error("dataset is required");if(0===l.length)return o;if(i.measures)return o.measures=L(a),o;let n=l.slice(0,100);return o.measures=Object.keys(n.reduce((e,t)=>({...e,...t}),{})).filter(e=>n.some(t=>"number"==typeof t[e])&&!["",null,void 0].includes(e)).map(e=>({id:e,alias:e})),o},(e,t)=>{let o={...e},{vseed:i}=t,{dimensions:l,dataset:a}=i,n=L(e.measures);if(!a)throw Error("dataset is required");if(0===a.length)return o;if(l)return o.dimensions=j(l).map((e,t)=>"rowDimension"===e.location||"columnDimension"===e.location?e:{...e,location:t%2==0?"columnDimension":"rowDimension"}),o;let r=a.slice(0,100),d=r.reduce((e,t)=>({...e,...t}),{}),s=0;return o.dimensions=Object.keys(d).filter(e=>r.some(t=>"string"==typeof t[e])&&!["",null,void 0].includes(e)&&!n.some(t=>t.id===e)).map(e=>({id:e,alias:e,location:s++%2==0?"columnDimension":"rowDimension"})),o},W,T],Y=[(e,t)=>{let{advancedVSeed:o}=t,{dataset:i}=o;return{...e,records:i,widthMode:"standard",heightMode:"autoHeight",autoWrapText:!0,columnResizeMode:"all",columnResizeType:"column",showColumnHeader:!0,showRowHeader:!0,select:{highlightMode:"cell",headerSelectMode:"inline"},hover:{highlightMode:"cross"},tooltip:{isShowOverflowTextTooltip:!0},widthAdaptiveMode:"all",animationAppear:{duration:300,delay:250,type:"one-by-one",direction:"row"},theme:{underlayBackgroundColor:"transparent"}}},(e,t)=>{let{advancedVSeed:o}=t,i=o.dimensions.filter(e=>"columnDimension"===e.location);return{...e,columns:i.map(e=>({dimensionKey:e.id,title:e.alias||e.id,width:"auto"}))}},(e,t)=>{let{advancedVSeed:o}=t,i=o.dimensions.filter(e=>"rowDimension"===e.location);return{...e,rows:i.map(e=>({dimensionKey:e.id,title:e.alias||e.id,width:"auto"}))}},(e,t)=>{let{advancedVSeed:o}=t,i=o.measures;return{...e,indicatorsAsCol:!0,indicatorTitle:A.i18n`指标名称`,indicators:i.map(e=>({cellType:"text",indicatorKey:e.id,title:e.alias||e.id,width:"auto"}))}},w,O,(e,t)=>{let o={...e},{advancedVSeed:i}=t,{customTheme:l,chartType:a}=i,n=l?.config?.[a];if(!o.theme||!n)return o;let r=n.borderColor||"rgb(224, 224, 224)",d=n.headerBackgroundColor||"#EEF1F5",s=n.headerFontColor||"#1B1F23",p=n.headerFontSize||12,u=n.hoverHeaderBackgroundColor||"#bedaff",c=n.hoverHeaderInlineBackgroundColor||"#bedaff";return o.theme.rowHeaderStyle={borderColor:r,borderLineWidth:1,padding:[8.6,12,8.6,12],textAlign:"left",hover:{cellBgColor:u,inlineRowBgColor:c,inlineColumnBgColor:c},frameStyle:{borderColor:[null,r,null,null],borderLineWidth:1},fontSize:p,fontVariant:"normal",fontStyle:"normal",fontWeight:"bold",color:s,bgColor:d,lineHeight:1.5*p},o},(e,t)=>{let o={...e},{advancedVSeed:i}=t,{customTheme:l,chartType:a}=i,n=l?.config?.[a];if(!o.theme||!n)return o;let r=n.borderColor||"rgb(224, 224, 224)",d=n.headerBackgroundColor||"#EEF1F5",s=n.headerFontColor||"#1B1F23",p=n.headerFontSize||12,u=n.hoverHeaderInlineBackgroundColor,c=n.hoverHeaderBackgroundColor;return o.theme.cornerHeaderStyle={borderColor:[r,r],borderLineWidth:1,padding:[8,12,8,12],textAlign:"left",hover:{cellBgColor:c,inlineRowBgColor:u,inlineColumnBgColor:u},frameStyle:{borderColor:[null,r,r,null],borderLineWidth:1},fontSize:p,fontVariant:"normal",fontStyle:"normal",fontWeight:"bold",color:s,bgColor:d,lineHeight:1.5*p},o},E,V],q=()=>{z._advancedPipelineMap.pivotTable=$,z._specPipelineMap.pivotTable=Y},U=(e,t)=>{let{vseed:o}=t,{chartType:i,locale:l}=o;return{...e,chartType:i,locale:l||"zh-CN"}},J=(e=[])=>{if(!e)return 0;let t=1;return _(e,e=>("children"in e&&(t=Math.max(t,1+J(e.children))),!1)),t},Q=e=>"table"===e.chartType,ee=e=>"pivotTable"===e.chartType,et=e=>["table","pivotTable"].includes(e.chartType),eo=e=>!et(e),ei=e=>{if(et(e))return!1;if("dualAxis"===e.chartType)return e.measures?3===J(e.measures):!!e.dualMeasures&&!!(e.dualMeasures.length>1);let{measures:t=[],dimensions:o=[]}=e,i=o&&o.some(e=>"rowDimension"===e.location||"columnDimension"===e.location),l=t&&t.some(e=>e&&e.children);return i||l},el=(e,t)=>{let o={...e},{vseed:i}=t,{measures:l,dataset:a}=i;if(!a)throw Error("dataset is required");if(0===a.length)return o;if(ei(i))return ea(e,t);if(l)return o.measures=l,o;let n=a.slice(0,100);return o.measures=Object.keys(n.reduce((e,t)=>({...e,...t}),{})).filter(e=>n.some(t=>"number"==typeof t[e])&&!["",null,void 0].includes(e)).map(e=>({id:e,alias:e})),o},ea=(e,t)=>{let{vseed:o}=t,{measures:i}=o,l=i?.some(e=>e.children);if(!i)return e;if(!l){let t=[{id:"measureGroup",alias:"measureGroup",children:i}];return{...e,measures:t}}let a=en(),n=[];for(let e of i)"children"in e?(a.children?.length&&(a.alias=a.children.map(e=>e.alias).join("-"),a.id=a.alias+a.children.map(e=>e.id).join("-"),n.push(a),a=en()),n.push(e)):a.children?.push(e);return a.children?.length&&(a.alias=a.children.map(e=>e.alias).join("-"),a.id=a.alias+a.children.map(e=>e.id).join("-"),n.push(a),a=en()),e.measures=n,e},en=()=>({id:"",alias:"",children:[]}),er=(e,t)=>{let o={...e},{vseed:i}=t,{dimensions:l,dataset:a}=i,n=L(e.measures);if(!a)throw Error("dataset is required");if(0===a.length)return o;if(l)return o.dimensions=l.map(e=>({location:"dimension",...e})),o;let r=a.slice(0,100);return o.dimensions=Object.keys(r.reduce((e,t)=>({...e,...t}),{})).filter(e=>r.some(t=>"string"==typeof t[e])&&!["",null,void 0].includes(e)&&!n.some(t=>t.id===e)).map(e=>({id:e,alias:e,location:"dimension"})),o},ed=(e,t)=>(o,i)=>{let{vseed:l}=i;return ei(l)?y(t,i,o):y(e,i,o)},es="__MeaName__",ep="__MeaId__",eu="__MeaValue__",ec="__MeaPrimaryValue__",ef="__MeaSecondaryValue__",eg="__DimGroup__",eh="__DimGroupID__",em="-",eb="__OriginalData__",ey=(e,t,o=ep,i=es,l=eu)=>{let a={measureId:o,measureName:i,measureValue:l,foldMap:{}},n=Array(e.length*t.length),r=0,d=t.map(e=>e.id);for(let p=0;p<e.length;p++)for(let u=0;u<t.length;u++){let c=(0,s.a)({...e[p]},d);c[eb]=e[p];let{id:f,alias:g}=t[u];c[f]=e[p][f],c[o]=f,c[i]=g||f,c[l]=e[p][f],a.foldMap[f]=g,n[r++]=c}return{dataset:n,foldInfo:a}},ex=(e,t,o,i=0,a=eg,n=eh,r=ep,d=em)=>{if(i<0||i>=t.length)throw Error("unfoldStartIndex is out of range");let s=t.slice(i),p={groupName:a,groupId:n,colorItems:[],colorIdMap:{}};if(0===t.length||0===o.length)return{dataset:e,unfoldInfo:{groupName:a,groupId:n,colorItems:[],colorIdMap:{}}};let u=[],c={};for(let t=0;t<e.length;t++){let o=e[t],i=ev(s,o,d),l=o[r]?[i,o[r]].join(d):i;o[a]=i,o[n]=l,u.push(l),c[l]=i}return p.colorItems=(0,l.a)(u),p.colorIdMap=c,{dataset:e,unfoldInfo:p}},ev=(e,t,o)=>e.map(e=>String(t[e.id])).join(o),eC=(e,t,o,i=eg,a=eh)=>{let n={groupName:i,groupId:a,colorItems:[],colorIdMap:{}};if(0===t.length)return{dataset:e,unfoldInfo:{groupName:i,groupId:a,colorItems:[],colorIdMap:{}}};let r=[],d={};for(let t=0;t<e.length;t++){let l=e[t];l[i]=o,l[a]=o,r.push(o),d[o]=o}return n.colorItems=(0,l.a)(r),n.colorIdMap=d,{dataset:e,unfoldInfo:n}},eR={dataset:[],foldInfo:{foldMap:{},measureId:"",measureName:"",measureValue:""},unfoldInfo:{groupName:"",groupId:"",colorItems:[],colorIdMap:{}}},eI=(e,t,o,i)=>{let{foldMeasureId:l=ep,foldMeasureName:a=es,foldMeasureValue:n=eu,unfoldDimensionGroup:r=eg,unfoldDimensionGroupId:d=eh}=i||{};if(0===t.length&&0===o.length)return eR;let{dataset:s,foldInfo:p}=ey(e,o,l,a,n);if(0===t.length){let{dataset:e,unfoldInfo:t}=eC(s,[{id:n,alias:k`指标值`}],k`指标名称`,r,d);return{dataset:e,foldInfo:p,unfoldInfo:t}}{let e=1===o.length,i=1===t.length,u=[...t];(!e||i)&&u.push({id:a,alias:k`指标名称`,location:"dimension"});let{dataset:c,unfoldInfo:f}=ex(s,u,[{id:n,alias:k`指标值`}],1,r,d,l);return{dataset:c,foldInfo:p,unfoldInfo:f}}},eA=(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{dimensions:a,measures:n}=e;if(!n||!a||!l)return o;if(0===n.length)throw Error("measures can not be empty");let{dataset:r,foldInfo:d,unfoldInfo:s}=eI(l,a,n);return{...o,dataset:r,datasetReshapeInfo:[{id:"2D1M",index:0,foldInfo:d,unfoldInfo:s}],dimensions:a,measures:n}},ek=(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{measures:a}=e,n=e.dimensions;if(!a||!n)return o;let r=[];a&&a.forEach(e=>{e.children&&e.children.length>0&&r.push(e)});let d=n.filter(e=>"dimension"===e.location),s=[],p=[];return r.forEach((e,t)=>{let o=e.children;if(!o)return;let i=e.id,{dataset:a,foldInfo:n,unfoldInfo:r}=eI(l,d,o,{foldMeasureId:ep,foldMeasureName:es,foldMeasureValue:eu+i,unfoldDimensionGroup:eg});s.push(a),p.push({id:i,index:t,foldInfo:n,unfoldInfo:r})}),{...o,dataset:s,datasetReshapeInfo:p}},eS=e=>{let t={...e},{datasetReshapeInfo:o,dimensions:i}=e;if(!o||!i)return t;let l=i.find(e=>"rowDimension"!==e.location&&"columnDimension"!==e.location)||i[0],a=0===i.length,n=o.reduce((e,t)=>{let{foldInfo:o,unfoldInfo:i}=t,n=[a?o.measureName:l?.id],r=[o.measureValue];return[...e,{x:n,y:r,group:[i.groupId],color:[o.measureName]}]},[]);return{...t,encoding:n}},eF=(e,t)=>{let o={...e},{vseed:i}=t,{sort:l,dataset:a}=i,{encoding:n}=e,r=n?.[0]?.x?.[0];if(!l||!r)return e;o.analysis||(o.analysis={}),o.analysis.orderMapping||(o.analysis.orderMapping={});let d=e_(l,r,a);return o.analysis.orderMapping[r]=d,o},ez=(e,t)=>{let o={...e},{vseed:i}=t,{sort:l,dataset:a}=i,{encoding:n}=e,r=n?.[0]?.y?.[0];if(!l||!r)return e;o.analysis||(o.analysis={}),o.analysis.orderMapping||(o.analysis.orderMapping={});let d=e_(l,r,a);return o.analysis.orderMapping[r]=d,o},eM=(e,t)=>{let o={...e},{vseed:i}=t,{sortLegend:l}=i,{datasetReshapeInfo:a}=e,n=a?.[0]?.unfoldInfo?.groupId,r=a?.[0]?.unfoldInfo?.colorIdMap,d=a?.[0]?.unfoldInfo?.colorItems;if(!l||!n||!r||!d)return e;if(o.analysis||(o.analysis={}),o.analysis.orderMapping||(o.analysis.orderMapping={}),l.customOrder){let e=Object.keys(r).reduce((e,t)=>(e[r[t]]=t,e),{}),t=l.customOrder.map(t=>e[t]?e[t]:t);return o.analysis.orderMapping[n]=t,o}let s=e_(l,n,e.dataset?.flat(2)||[]);return o.analysis.orderMapping[n]=s,o},e_=(e,t,o)=>{if(e.customOrder)return e.customOrder;let i=e.order||"asc",a=e.orderBy,n=(0,p.a)(o,(e,o)=>{let l=e[a||t],n=o[a||t];return"asc"===i?l<n?-1:+(l>n):l>n?-1:+(l<n)});return(0,l.a)(n.map(e=>e[t]))},eP=(e,t)=>{let{vseed:o}=t,{chartType:i}=o,l={...e},a=(0,u.a)(o,["backgroundColor","color","label","legend","tooltip","xAxis","yAxis","crosshairLine"]);return l.config={...l.config||{},[i]:{...a}},l},eB=(e,t)=>{let{vseed:o}=t,{chartType:i}=o,l={...e},a=(0,u.a)(o,["backgroundColor","color","label","legend","tooltip","xAxis","yAxis","crosshairRect","stackCornerRadius"]);return l.config={...l.config||{},[i]:{...a}},l},eL=(e,t)=>{let{vseed:o}=t,{chartType:i}=o,l={...e},a=(0,u.a)(o,["backgroundColor","color","label","legend","tooltip"]);return l.config={...l.config||{},[i]:{...a}},l},eW=(e,t)=>{let{vseed:o}=t,i=(0,u.a)(o,["barStyle","pointStyle","lineStyle","areaStyle"]);return{...e,markStyle:i}},eT=(e,t)=>{let{vseed:o}=t,i=(0,u.a)(o,["annotationPoint","annotationHorizontalLine","annotationVerticalLine","annotationArea"]);return{...e,annotation:i}},eX=[U,el,er,ed([eA],[ek]),eS,eF,eM,eP,T,eW,eT],eD=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;return l[0].y&&l[0].x&&l[0].group&&(o.type="line",o.direction="vertical",o.xField=l[0].x[0],o.yField=l[0].y[0],o.seriesField=l[0].group[0],o.padding=0,o.region=[{clip:!0}],o.animation=!0),o},eZ=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{datasetReshapeInfo:l,chartType:a}=i,{unfoldInfo:n}=l[0],r=i.config[a];if(!r||!r.color)return o;let d=n.colorItems,s=n.colorIdMap,{color:p}=r,{colorScheme:u,colorMapping:c}=p,f=[];return c&&Object.entries(c).sort((e,t)=>e[0].split(em).length-t[0].split(em).length).forEach(([e,t])=>{for(let[o]of Object.entries(s).filter(([t,o])=>o.includes(e)))f.push([o,t])}),o.color={type:"ordinal",domain:d,range:u,specified:Object.fromEntries(f)},o},ew=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{chartType:l}=i,{backgroundColor:a}=i.config[l];return{...o,background:a}},eO=(e,t)=>{let{advancedVSeed:o,vseed:i}=t,{encoding:l,analysis:a,datasetReshapeInfo:n}=o,{orderMapping:r={}}=a??{},d=l[0]?.angle?.[0],s=l[0]?.x?.[0],p=l[0]?.group?.[0],u=n[0].id,c={};if(d&&(c[d]={sortIndex:0}),s){let e=r[s];e?c[s]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:c[s]={sortIndex:0}}if(p){let e=r[p];e?c[p]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:c[p]={sortIndex:0}}return{...e,data:{id:u,values:ei(i)?void 0:o.dataset,fields:c}}},eE=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{dataset:l}=i;return l.length<5e3||(o.large=!0,o.largeThreshold=5e3,o.progressiveStep=400,o.progressiveThreshold=8e3),o},eV=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,n=i.config?.[a]?.xAxis;if(o.axes||(o.axes=[]),!n)return o.axes=[...o.axes,{visible:!0,type:"band",orient:"bottom"}],o;let{visible:r=!0,label:d,tick:s,title:p,grid:u,line:c,labelAutoHide:f,labelAutoHideGap:g,labelAutoLimit:h,labelAutoLimitLength:m=80,labelAutoRotate:b,labelAutoRotateAngleRange:y}=n,x={visible:r,type:"band",orient:"bottom",maxHeight:m+60,sampling:!(f||b||h),hover:!0,label:{visible:d?.visible,flush:!0,space:8,style:{maxLineWidth:m,fill:d?.labelColor,angle:d?.labelAngle,fontSize:d?.labelFontSize,fontWeight:d?.labelFontWeight},minGap:g,autoHide:f,autoHideMethod:"greedy",autoHideSeparation:g,autoLimit:h,autoRotate:b,autoRotateAngle:y,lastVisible:!0},title:{visible:p?.visible,text:p?.titleText,style:{fill:p?.titleColor,fontSize:p?.titleFontSize,fontWeight:p?.titleFontWeight}},tick:{visible:s?.visible,tickSize:s?.tickSize,inside:s?.tickInside,style:{stroke:s?.tickColor}},grid:{visible:u?.visible,style:{lineWidth:u?.gridWidth,stroke:u?.gridColor}},domainLine:{visible:c?.visible,style:{lineWidth:c?.lineWidth,stroke:c?.lineColor}},paddingInner:[.15,.1],paddingOuter:[.075,.1]};return o.axes=[...o.axes,x],o},eH=(e,t=A.getLocale())=>{let{type:o="number",ratio:i=1,symbol:l="",thousandSeparator:a=!0,prefix:n="",suffix:r="",fractionDigits:d=2,significantDigits:s,roundingMode:p="halfExpand",roundingPriority:u="auto"}=e||{},f={style:"decimal",notation:"scientific"===o?"scientific":"standard",roundingMode:p,roundingPriority:u};(0,c.a)(d)&&d>=0&&(f.minimumFractionDigits=d,f.maximumFractionDigits=d),(0,c.a)(s)&&s>0&&s>0&&(f.minimumSignificantDigits=s,f.maximumSignificantDigits=s);let g=new Intl.NumberFormat(t,f);return e=>{let t=Number(e),d="";if(Number.isNaN(t))return t.toString();"percent"===o?(t*=100,d="%"):"permille"===o?(t*=1e3,d="‰"):"number"===o&&(t/=i||1);let s=g.format(t);if(a){let e=s.split(".");e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),s=e.join(".")}return`${n}${s}${d}${l}${r}`}},eN=(e,t=A.getLocale())=>{if(null==e||Number.isNaN(Number(e)))return String(e);let o={style:"decimal",notation:"compact"};return o.minimumFractionDigits=0,o.maximumFractionDigits=2,new Intl.NumberFormat(t,{...o}).format(Number(e))},eG=e=>eH(e),eK=(e,t)=>eN(e,t),ej=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,{locale:n}=i,r=i.config?.[a]?.yAxis;if(o.axes||(o.axes=[]),!r)return o.axes=[...o.axes,{visible:!0,type:"linear",orient:"left"}],o;let{visible:d=!0,label:s,tick:p,title:u,grid:c,line:f,zero:g,nice:h,inverse:m,max:b,min:y,log:x,logBase:v=10}=r,C={visible:d,type:x?"log":"linear",base:v,orient:"left",nice:h,zero:!x&&g,inverse:m,max:b,min:y,label:{visible:s?.visible,formatMethod:e=>eK(e,n),style:{fill:s?.labelColor,angle:s?.labelAngle,fontSize:s?.labelFontSize,fontWeight:s?.labelFontWeight}},title:{visible:u?.visible,text:u?.titleText,style:{fill:u?.titleColor,fontSize:u?.titleFontSize,fontWeight:u?.titleFontWeight}},tick:{visible:p?.visible,tickSize:p?.tickSize,inside:p?.tickInside,style:{stroke:p?.tickColor}},grid:{visible:c?.visible,style:{lineWidth:c?.gridWidth,stroke:c?.gridColor}},domainLine:{visible:f?.visible,style:{lineWidth:f?.lineWidth,stroke:f?.lineColor}},innerOffset:{top:7}};return o.axes=[...o.axes,C],o},e$=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{measures:l,datasetReshapeInfo:a,locale:n}=i,{chartType:r}=i,d=i.config[r];if(!d||!d.label)return o;let{measureId:s,measureValue:p}=a[0].foldInfo,{label:u}=d,{enable:c}=u;return o.label={visible:c,formatMethod:(e,t)=>{let o=[];return o.push((e=>{let o=P(l,t[s]);if(!o)return e;let{format:i={},autoFormat:a=!0}=o;return(0,f.a)(i)?a?eK(e,n):String(e):eG(i)(e)})(t[p])),o.join(" ")}},o},eY=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{measures:l,datasetReshapeInfo:a,chartType:n,locale:r,dimensions:d}=i,{tooltip:s={enable:!0}}=i.config[n],{enable:p}=s,{measureId:u,measureValue:c,measureName:g}=a[0].foldInfo,{groupName:h}=a[0].unfoldInfo;return o.tooltip={visible:p,mark:{title:{visible:!0},content:[...d.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:t=>e.alias||e.id?e.alias||e.id:t&&t[e.id],value:t=>t&&t[e.id]})),{visible:!0,hasShape:!0,key:e=>e&&e[g||h]||"",value:e=>{if(!e)return"";let t=e[c],o=P(l,e[u]);if(!o)return String(t);let{format:i={},autoFormat:a=!0}=o;return(0,f.a)(i)?a?eK(t,r):String(t):eG(i)(t)}}]},dimension:{content:[{visible:!0,key:e=>e&&e[h]||"",value:e=>{if(!e)return"";let t=e[c],o=P(l,e[u]);if(!o)return String(t);let{format:i={},autoFormat:a=!0}=o;return(0,f.a)(i)?a?eK(t,r):String(t):eG(i)(t)},shapeType:"rectRound"}]}},o},eq=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,n=i.config?.[a]?.crosshairLine;if(!n)return o;o.crosshair||(o.crosshair={});let{visible:r=!0,lineColor:d,labelColor:s,labelVisible:p,labelBackgroundColor:u}=n;return o.crosshair.xField={visible:r,line:{type:"line",style:{lineWidth:1,opacity:1,stroke:d,lineDash:[4,2]}},label:{visible:p,labelBackground:{visible:p,style:{fill:u}},style:{fill:s}}},o},eU=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{datasetReshapeInfo:l,chartType:a}=i,{unfoldInfo:n}=l[0],r=i.config[a];if(!r||!r.legend)return o;let{legend:d}=r,{enable:s,position:p="bottom",labelFontColor:u,labelFontSize:c=12,labelFontWeight:f,maxSize:g=1,border:h,shapeType:m="rectRound"}=d||{};return o.legends={type:"discrete",visible:s,maxCol:Math.max(1,g),maxRow:Math.max(1,g),autoPage:!0,orient:["bottom","bottomLeft","bottomRight","bl","br"].includes(p)?"bottom":["top","topLeft","topRight","tl","tr"].includes(p)?"top":["left","leftTop","leftBottom","lt","lb"].includes(p)?"left":"right",position:["topLeft","bottomLeft","leftTop","rightTop","lt","rt","tl","bl"].includes(p)?"start":["topRight","bottomRight","leftBottom","rightBottom","lb","rb","rt","br"].includes(p)?"end":"middle",data:h?e=>e.map(e=>(e.shape.outerBorder={stroke:e.shape.fill,distance:3,lineWidth:1},e)):void 0,item:{focus:!0,maxWidth:"30%",focusIconStyle:{size:c+2,fill:u,fontWeight:f},shape:{space:h?6:4,style:{symbolType:m,size:h?8:10}},label:{formatMethod:e=>n.colorIdMap[String(e)]??e,style:{fontSize:c,fill:u,fontWeight:f}},background:{state:{selectedHover:{fill:u,fillOpacity:.05}}}},padding:0},o},eJ=(e,t)=>{if(!t)return!0;let o=Object.keys(e).filter(e=>e.toLocaleLowerCase().startsWith("__vchart")),i=(0,s.a)(e,o);return(Array.isArray(t)?t:[t]).every(e=>{if(eQ(e)){if(Object.values(i).find(t=>t===e))return!0}else if(e1(e)){let t=e.operator||e.op,o=Array.isArray(e.value)?e.value:[e.value];switch(t){case"=":case"==":if(i[e.field]===o[0])return!0;break;case"!=":if(i[e.field]!==o[0])return!0;break;case">":if(i[e.field]>o[0])return!0;break;case"<":if(i[e.field]<o[0])return!0;break;case">=":if(i[e.field]>=o[0])return!0;break;case"<=":if(i[e.field]<=o[0])return!0;break;case"between":if(Array.isArray(e.value)&&i[e.field]>=o[0]&&i[e.field]<=o[1])return!0}}else if(e2(e)){let t=e.operator||e.op,o=Array.isArray(e.value)?e.value:[e.value];switch(t){case"in":if(o.includes(i[e.field]))return!0;break;case"not in":if(!o.includes(i[e.field]))return!0}}else if(e0(e)&&Object.keys(e).every(t=>i[t]===e[t]))return!0;return!1})},eQ=e=>"string"==typeof e||"number"==typeof e,e0=e=>"object"==typeof e&&null!==e,e1=e=>"object"==typeof e&&null!==e&&"field"in e&&("operator"in e||"op"in e)&&"value"in e&&(["=","==","!=",">","<",">=","<=","between"].includes(e.operator)||["=","==","!=",">","<",">=","<=","between"].includes(e.op)),e2=e=>"object"==typeof e&&null!==e&&"field"in e&&("operator"in e||"op"in e)&&"value"in e&&(["in","not in"].includes(e.operator)||["in","not in"].includes(e.op)),e4=(e,t)=>{let{advancedVSeed:o}=t,{markStyle:i}=o,{pointStyle:l}=i,a={...e};if(!l)return a;let n=(Array.isArray(l)?l:[l]).reduce((e,t,o)=>{let{pointBorderColor:i,pointBorderStyle:l,pointBorderWidth:a=1,pointColor:n,pointColorOpacity:r,pointSize:d}=t;return{...e,[`custom${o+1}`]:{level:o+1,filter:e=>!!eJ(e,t.selector),style:{size:d,fill:n,fillOpacity:r,innerBorder:{stroke:i,lineWidth:a,distance:(a||0)/2,lineDash:"dashed"===l?[5,2]:"dotted"===l?[2,5]:[0,0]}}}}},{});return{...a,point:{state:{...n}}}},e8=e=>{let t=e.point||{};return{...e,point:{...t,state:{...t.state||{},dimension_hover:{scaleX:1.4,scaleY:1.4}}}}},e5=(e,t)=>{let o=e.point||{},{advancedVSeed:i}=t,{encoding:l}=i;return{...e,point:{...o,state:{...o.state||{},hover:{scaleX:1.4,scaleY:1.4,stroke:(e,t)=>{let o=l[0]?.group?.[0];return t.seriesColor(e[o])},fillOpacity:.6,lineWidth:1}}}}},e3=(e,t)=>{let{advancedVSeed:o}=t,{markStyle:i,encoding:l,dataset:a}=o,{lineStyle:n}=i;if(!n)return e;let r={...e},d=Array.isArray(n)?n:[n],s=l[0]?.group?.[0],p=(0,g.a)(a,e=>e[s??""]),u=d.reduce((e,t,o)=>{let{lineColor:i,lineColorOpacity:l,lineSmooth:a,lineStyle:n,lineWidth:r}=t,d=(r??2)*2,u=r??2;return{...e,[`custom${o+1}`]:{level:o+1,filter:e=>{for(let o of p[e[s??""]])if(eJ(o,t.selector))return!0;return!1},style:{curveType:a?"monotone":"linear",strokeOpacity:l,stroke:i,lineWidth:r,lineDash:"dashed"===n?[d,d]:"dotted"===n?[u/2,2*u]:[0,0]}}}},{});return{...r,line:{state:{...u}}}},e7=(e,t)=>Object.entries(e).every(([e,o])=>"string"!=typeof o&&"number"!=typeof o||t[e]===o),e6=(e,t)=>{let{advancedVSeed:o}=t,{annotation:i}=o;if(!i||!i.annotationPoint)return e;let{annotationPoint:l}=i,a=(Array.isArray(l)?l:[l]).flatMap(e=>{let{selector:t,text:i="",textColor:l="#ffffff",textFontSize:a=12,textFontWeight:n=400,textAlign:r="center",textBaseline:d="top",backgroundBorderColor:s,backgroundBorderRadius:p=4,backgroundBorderWidth:u=1,backgroundColor:c="#212121",backgroundPadding:f=2,backgroundVisible:g=!0,offsetX:h=0,offsetY:m=0}=e,b=o.dataset.flat();return(t?b.filter(e=>eJ(e,t)):[]).map(e=>({zIndex:1e3,regionRelative:!0,position:(t,o)=>{let i=t.find(t=>e7(e,t));if(i){let{x:e,y:t}=o.dataToPosition(i);return{x:e,y:t}}},itemLine:{visible:!1},itemContent:{offsetY:m,offsetX:h,text:{text:i,style:{visible:!0,textAlign:r,textBaseline:d,fill:l,stroke:c,lineWidth:1,fontSize:a,fontWeight:n,dy:a},labelBackground:{visible:g,padding:f,style:{cornerRadius:p??4,fill:c,stroke:s,lineWidth:u,dy:a}}}}}))});return{...e,markPoint:a}},e9=(e,t)=>{let{advancedVSeed:o}=t,{annotation:i,encoding:l}=o;if(!i||!i.annotationVerticalLine)return e;let{annotationVerticalLine:a}=i,n=Array.isArray(a)?a:[a],r={outsideStart:"start",outsideEnd:"end",outsideMiddle:"middle",insideStart:"insideStartTop",insideMiddle:"insideMiddleTop",insideEnd:"insideEndTop"},d=n.flatMap(e=>{let{selector:t,xValue:i,text:a="",textPosition:n="insideEnd",textColor:d="#ffffff",textFontSize:s=12,textFontWeight:p=400,textAlign:u="right",textBaseline:f="top",backgroundVisible:g=!0,backgroundBorderColor:b="#212121",backgroundColor:y="#212121",backgroundBorderRadius:x=4,backgroundBorderWidth:v=1,backgroundPadding:C=2,lineVisible:R=!0,lineColor:I="#212121",lineWidth:A=1,lineStyle:k="dashed",offsetX:S=0,offsetY:F=0}=e,z=o.dataset.flat(),M=e=>({x:e,zIndex:1e3,offsetX:S,offsetY:F,line:{style:{visible:R,stroke:I,lineStyle:k,lineWidth:A,lineDash:"dashed"===k?[5,2]:"dotted"===k?[2,5]:[0]}},label:{text:a,position:r[n],style:{visible:!0,stroke:y,lineWidth:1,textAlign:u,textBaseline:f,fill:d,fontSize:s,fontWeight:p,dy:s},labelBackground:{visible:g,padding:C,style:{dy:s,cornerRadius:x??4,fill:y,stroke:b,lineWidth:v}}},endSymbol:{visible:!0,size:10+A,style:{dy:4,fill:I}}});return!t&&(0,h.a)(i)||(0,m.a)(i)||(0,c.a)(i)?(Array.isArray(i)?i:[i]).map(M):(t?z.filter(e=>eJ(e,t)):[]).map(e=>{let t=l[0]?.x?.[0];return t?M(e[t]):{}})}),s=[...e.markLine||[],...d||[]];return{...e,markLine:s}},te=(e,t)=>{let{advancedVSeed:o}=t,{annotation:i,encoding:l}=o;if(!i||!i.annotationHorizontalLine)return e;let{annotationHorizontalLine:a}=i,n=Array.isArray(a)?a:[a],r={outsideStart:"start",outsideEnd:"end",outsideMiddle:"middle",insideStart:"insideStartTop",insideMiddle:"insideMiddleTop",insideEnd:"insideEndTop"},d=n.flatMap(e=>{let{selector:t,yValue:i,text:a="",textPosition:n="insideEnd",textColor:d="#ffffff",textFontSize:s=12,textFontWeight:p=400,textAlign:u="right",textBaseline:f="top",lineColor:g="#212121",lineStyle:b="dashed",lineVisible:y=!0,lineWidth:x=1,backgroundVisible:v=!0,backgroundColor:C="#212121",backgroundBorderColor:R="#212121",backgroundBorderRadius:I=4,backgroundBorderWidth:A=1,backgroundPadding:k=2,offsetX:S=0,offsetY:F=0}=e,z=o.dataset.flat(),M=e=>({y:e,offsetX:S,offsetY:F,zIndex:1e3,line:{style:{visible:y,stroke:g,lineStyle:b,lineWidth:x,lineDash:"dashed"===b?[5,2]:"dotted"===b?[2,5]:[0]}},label:{text:a,position:r[n],style:{visible:!0,dy:s,stroke:C,lineWidth:1,textAlign:u,textBaseline:f,fill:d,fontSize:s,fontWeight:p},labelBackground:{visible:v,padding:k,style:{dy:s,cornerRadius:I??4,fill:C,stroke:R,lineWidth:A}}},endSymbol:{visible:!0,size:10+x,style:{dx:-4,fill:g}}});return!t&&(0,h.a)(i)||(0,m.a)(i)||(0,c.a)(i)?(Array.isArray(i)?i:[i]).map(M):(t?z.filter(e=>eJ(e,t)):[]).map(e=>{let t=l[0]?.y?.[0];return t?M(e[t]):{}})}),s=[...e.markLine||[],...d||[]];return{...e,markLine:s}},tt=(e,t)=>{let{advancedVSeed:o}=t,{annotation:i}=o;if(!i||!i.annotationArea)return e;let{annotationArea:l}=i,a=Array.isArray(l)?l:[l],n={top:"insideTop",topRight:"insideTopRight",topLeft:"insideTopLeft",bottom:"insideBottom",bottomLeft:"insideBottomLeft",bottomRight:"insideBottomRight",left:"insideLeft",right:"insideRight"},r=a.flatMap(e=>{let{selector:t,text:i="",textPosition:l="top",textColor:a="#ffffff",textFontSize:r=12,textFontWeight:d=400,textAlign:s="center",textBaseline:p="top",backgroundVisible:u=!0,backgroundColor:c="#191d24",backgroundBorderColor:f="#191d24",backgroundBorderWidth:g=1,backgroundBorderRadius:h=4,backgroundPadding:m=4,areaColor:b="#888888",areaColorOpacity:y=.15,areaBorderColor:x="#888888",areaBorderRadius:v=4,areaBorderWidth:C=1,outerPadding:R=4,offsetX:I=0,offsetY:A=0}=e,k=o.dataset.flat(),S=t?k.filter(e=>eJ(e,t)):[];return{zIndex:1e3,regionRelative:!0,offsetX:I,offsetY:A,positions:(e,t)=>{let o=e.filter(e=>S.some(t=>e7(t,e))).map(e=>t.dataToPosition(e)),i=t.getYAxisHelper(),l=t.getXAxisHelper();if("function"==typeof l?.getBandwidth){let e=i.getScale(),t=Math.min(...o.map(e=>e.x))-R,l=Math.max(...o.map(e=>e.x))+R,a=Math.min(...e.range()),n=Math.max(...e.range());return[{x:t,y:a},{x:l,y:a},{x:l,y:n},{x:t,y:n}]}if("function"==typeof i?.getBandwidth){let e=l.getScale(),t=Math.min(...o.map(e=>e.y))-R,i=Math.max(...o.map(e=>e.y))+R,a=Math.min(...e.range()),n=Math.max(...e.range());return[{x:a,y:t},{x:n,y:t},{x:n,y:i},{x:a,y:i}]}return[]},label:{position:n[l],visible:!0,text:i,style:{dy:r,textAlign:s,textBaseline:p,fill:a,stroke:c,lineWidth:1,fontSize:r,fontWeight:d},labelBackground:{visible:u,padding:m,style:{dy:r,cornerRadius:h??4,fill:c,stroke:f,lineWidth:g}}},area:{style:{visible:!0,fill:b,fillOpacity:y,stroke:x,lineWidth:C,cornerRadius:v}}}});return{...e,markArea:r}},to=e=>({...e,animation:!0,rows:[],columns:[],indicators:[],records:[],widthMode:"adaptive",heightMode:"adaptive",indicatorsAsCol:!1}),ti=e=>{let t={...e},o="rgba(0,0,0,0)",i="rgba(178,186,207, 0.2)";return{...t,theme:{underlayBackgroundColor:o,bodyStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:[0,0,2,0],bgColor:o,padding:[0,0,1,0],hover:{cellBgColor:"transparent"}},headerStyle:{borderColor:"rgba(0,4,20,0.2)",fontSize:12,color:"#333333",textAlign:"center",borderLineWidth:0,bgColor:o,hover:{cellBgColor:i}},rowHeaderStyle:{borderColor:"rgba(0,4,20,0.2)",fontSize:12,color:"#333333",borderLineWidth:0,bgColor:o,hover:{cellBgColor:i}},cornerHeaderStyle:{borderColor:"rgba(0,4,20,0.2)",textAlign:"center",fontSize:12,color:"#333333",fontWeight:"bold",borderLineWidth:[0,0,0,0],bgColor:o,hover:{cellBgColor:i}},cornerRightTopCellStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:o,hover:{cellBgColor:i}},cornerLeftBottomCellStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:o,hover:{cellBgColor:i}},cornerRightBottomCellStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:o,hover:{cellBgColor:i}},rightFrozenStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:o,hover:{cellBgColor:i}},bottomFrozenStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:o,hover:{cellBgColor:i}},selectionStyle:{cellBgColor:"",cellBorderColor:""},frameStyle:{borderLineWidth:0,bgColor:o}}}},tl=e=>(t,o)=>{let i={...t},{advancedVSeed:a}=o,{measures:n,datasetReshapeInfo:r,encoding:d}=a,s=(0,l.a)(r.flatMap(e=>e.unfoldInfo.colorItems)),p=r.map((t,i)=>{let l=n?.find(e=>e.id===t.id),r=[d[i]],p=[{...t,unfoldInfo:{...t.unfoldInfo,colorItems:s}}],u=y(e,{...o,advancedVSeed:{...a,datasetReshapeInfo:p,encoding:r}},{});return{indicatorKey:t.id,title:l?.alias,cellType:"chart",chartModule:"vchart",chartSpec:u,style:{padding:[1,1,0,1]}}});return{...i,indicators:p}},ta=e=>({...e,indicatorsAsCol:!1}),tn=e=>({...e,indicatorsAsCol:!0}),tr=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{dataset:l,datasetReshapeInfo:a}=i,n=l.reduce((e,t,o)=>(e[a[o].id]=t,e),{});return{...o,records:n}},td=(e,t)=>{let o={...e},{advancedVSeed:i}=t,l=i.dimensions;if(!l)return o;let a=l.filter(e=>"rowDimension"===e.location).map(e=>({dimensionKey:e.id,title:e.alias||e.id}));return{...o,rows:a}},ts=(e,t)=>{let o={...e},{advancedVSeed:i}=t,l=i.dimensions;if(!l)return o;let a=l.filter(e=>"columnDimension"===e.location).map(e=>({dimensionKey:e.id,title:e.alias||e.id}));return{...o,columns:a}},tp=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{chartType:a}=i,n=i.config[a];if(!n||!n.legend)return o;let{datasetReshapeInfo:r}=i,d=(0,l.a)(r.flatMap(e=>e.unfoldInfo.colorItems)),s=r.reduce((e,t)=>({...e,...t.unfoldInfo.colorIdMap}),{}),{legend:p,color:u}=n,{colorScheme:c}=u,{enable:f,position:g="bottom",labelFontColor:h,labelFontSize:m=12,labelFontWeight:b=400,maxSize:y=1,border:x,shapeType:v="rectRound"}=p||{},C={visible:f,type:"discrete",orient:["bottom","bottomLeft","bottomRight","bl","br"].includes(g)?"bottom":["top","topLeft","topRight","tl","tr"].includes(g)?"top":["left","leftTop","leftBottom","lt","lb"].includes(g)?"left":"right",position:["topLeft","bottomLeft","leftTop","rightTop","lt","rt","tl","bl"].includes(g)?"start":["topRight","bottomRight","leftBottom","rightBottom","lb","rb","rt","br"].includes(g)?"end":"middle",maxCol:Math.max(1,y),maxRow:Math.max(1,y),data:d.map((e,t)=>({label:e,shape:{outerBorder:x?{stroke:c?.[t],distance:3,lineWidth:1}:void 0,fill:c?.[t]}})),item:{focus:!0,maxWidth:"30%",focusIconStyle:{size:m+2,fill:h,fontWeight:b},shape:{space:x?6:4,style:{symbolType:v,size:x?8:10}},label:{formatMethod:e=>s[String(e)]??e,style:{fontSize:m,fill:h,fontWeight:b}},background:{state:{selectedHover:{fill:h,fillOpacity:.05}}}}};return{...o,legends:C}},tu=(e,t)=>(o,i)=>{let{vseed:l}=i;return ei(l)?y(t,i,o):y(e,i,o)},tc=[tu([eD,eZ,ew,eO,eE,eV,ej,e$,eY,eq,eU,e4,e8,e3,e6,e9,te,tt],[to,ti,ta,tr,tl([eD,eZ,ew,eO,eE,eV,ej,e$,eY,eq,e4,e8,e3,e6,e9,te,tt]),td,ts,tp])],tf=()=>{z._advancedPipelineMap.line=eX,z._specPipelineMap.line=tc},tg={dataset:[],foldInfo:{foldMap:{},measureId:"",measureName:"",measureValue:""},unfoldInfo:{groupName:"",groupId:"",colorItems:[],colorIdMap:{}}},th=(e,t,o,i)=>{let{foldMeasureId:l=ep,foldMeasureName:a=es,foldMeasureValue:n=eu,unfoldDimensionGroup:r=eg,unfoldDimensionGroupId:d=eh}=i||{};if(0===t.length&&0===o.length)return tg;let{dataset:s,foldInfo:p}=ey(e,o,l,a,n);if(0===t.length){let{dataset:e,unfoldInfo:t}=ex(s,[{id:l,alias:k`指标Id`,location:"dimension"},{id:a,alias:k`指标名称`,location:"dimension"}],[{id:n,alias:k`指标值`}],1,r,d,l);return{dataset:e,foldInfo:p,unfoldInfo:t}}{let e=1===o.length,i=1===t.length,u=[...t];(!e||i)&&u.push({id:a,alias:k`指标名称`,location:"dimension"});let{dataset:c,unfoldInfo:f}=ex(s,u,[{id:n,alias:k`指标值`}],1,r,d,l);return{dataset:c,foldInfo:p,unfoldInfo:f}}},tm=(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{dimensions:a,measures:n}=e;if(!n||!a||!l)return o;if(0===n.length)throw Error("measures can not be empty");let{dataset:r,foldInfo:d,unfoldInfo:s}=th(l,a,n);return{...o,dataset:r,datasetReshapeInfo:[{id:"2D1M",index:0,foldInfo:d,unfoldInfo:s}],dimensions:a,measures:n}},tb=(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{measures:a}=e,n=e.dimensions;if(!a||!n)return o;let r=[];a&&a.forEach(e=>{e.children&&e.children.length>0&&r.push(e)});let d=n.filter(e=>"dimension"===e.location),s=[],p=[];return r.forEach((e,t)=>{let o=e.children;if(!o)return;let i=e.id,{dataset:a,foldInfo:n,unfoldInfo:r}=th(l,d,o,{foldMeasureId:ep,foldMeasureName:es,foldMeasureValue:eu+i,unfoldDimensionGroup:eg});s.push(a),p.push({id:i,index:t,foldInfo:n,unfoldInfo:r})}),{...o,dataset:s,datasetReshapeInfo:p}},ty=[U,el,er,ed([tm],[tb]),eS,eF,eM,eB,T,eW,eT],tx=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;return l[0].y&&l[0].x&&l[0].group&&(o.type="bar",o.direction="vertical",o.xField=l[0].x[0],o.yField=l[0].y[0],o.seriesField=l[0].group[0],o.padding=0,o.region=[{clip:!0}],o.animation=!0),o},tv=(e,t)=>{let{advancedVSeed:o,vseed:i}=t,{chartType:l}=i,a=o.config?.[l]?.stackCornerRadius;return{...e,stackCornerRadius:a}},tC=e=>{let t={...e};return t.stackInverse=!0,t},tR=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,n=i.config?.[a]?.crosshairRect;if(!n)return o;o.crosshair||(o.crosshair={});let{visible:r=!0,rectColor:d,labelColor:s,labelVisible:p,labelBackgroundColor:u}=n;return o.crosshair.xField={visible:r,line:{type:"rect",style:{lineWidth:0,opacity:.2,fill:d}},label:{visible:p,labelBackground:{visible:p,style:{fill:u}},style:{fill:s}}},o},tI=(e,t)=>{let{advancedVSeed:o}=t,{markStyle:i,dataset:l}=o,{barStyle:a}=i,n=l.length<=100,r={...e,bar:{style:{stroke:"#fff",lineWidth:+!!n},state:{hover:{fillOpacity:.6}}}};if(!a)return r;let d=(Array.isArray(a)?a:[a]).reduce((e,t,o)=>{let{barBorderColor:i,barBorderStyle:l,barBorderWidth:a=1,barColor:n,barColorOpacity:r,barRadius:d}=t;return{...e,[`custom${o+1}`]:{level:o+1,filter:e=>!!eJ(e,t.selector),style:{fill:n,fillOpacity:r,cornerRadius:d,innerBorder:{stroke:i,lineWidth:a,distance:(a||0)/2,lineDash:"dashed"===l?[5,2]:"dotted"===l?[2,5]:[0,0]}}}}},{});return{...r,bar:{state:{...d}}}},tA=(e,t)=>{let{advancedVSeed:o}=t,{annotation:i}=o;if(!i||!i.annotationArea)return e;let{annotationArea:l}=i,a=Array.isArray(l)?l:[l],n={top:"insideTop",topRight:"insideTopRight",topLeft:"insideTopLeft",bottom:"insideBottom",bottomLeft:"insideBottomLeft",bottomRight:"insideBottomRight",left:"insideLeft",right:"insideRight"},r=a.flatMap(e=>{let{selector:t,text:i="",textPosition:l="top",textColor:a="#ffffff",textFontSize:r=12,textFontWeight:d=400,textAlign:s="center",textBaseline:p="top",backgroundVisible:u=!0,backgroundColor:c="#191d24",backgroundBorderColor:f="#191d24",backgroundBorderWidth:g=1,backgroundBorderRadius:h=4,backgroundPadding:m=4,areaColor:b="#888888",areaColorOpacity:y=.15,areaBorderColor:x="#888888",areaBorderRadius:v=4,areaBorderWidth:C=1,outerPadding:R=4,offsetX:I=0,offsetY:A=0}=e,k=o.dataset.flat(),S=t?k.filter(e=>eJ(e,t)):[];return{zIndex:1e3,regionRelative:!0,offsetX:I,offsetY:A,positions:(e,t)=>{let o=e.filter(e=>S.some(t=>e7(t,e))).map(e=>t.dataToPosition(e)),i=t.getYAxisHelper(),l=t.getXAxisHelper();if("function"==typeof l?.getBandwidth){let e=t.fieldX.length??0,a=l?.getBandwidth?.(e-1),n=i.getScale(),r=Math.min(...o.map(e=>e.x))-R,d=Math.max(...o.map(e=>e.x))+a+R,s=Math.min(...n.range()),p=Math.max(...n.range());return[{x:r,y:s},{x:d,y:s},{x:d,y:p},{x:r,y:p}]}if("function"==typeof i?.getBandwidth){let e=t.fieldY.length??0,a=i?.getBandwidth?.(e-1),n=l.getScale(),r=Math.min(...o.map(e=>e.y))-R,d=Math.max(...o.map(e=>e.y))+a+R,s=Math.min(...n.range()),p=Math.max(...n.range());return[{x:s,y:r},{x:p,y:r},{x:p,y:d},{x:s,y:d}]}return[]},label:{position:n[l],visible:!0,text:i,style:{dy:r,textAlign:s,textBaseline:p,stroke:c,lineWidth:1,fill:a,fontSize:r,fontWeight:d},labelBackground:{visible:u,padding:m,style:{dy:r,cornerRadius:h??4,fill:c,stroke:f,lineWidth:g}}},area:{style:{visible:!0,fill:b,fillOpacity:y,stroke:x,lineWidth:C,cornerRadius:v}}}});return{...e,markArea:r}},tk=[tu([tx,tv,tC,eZ,ew,eO,eE,eV,ej,e$,eY,tR,eU,tI,e6,e9,te,tA],[to,ti,ta,tr,tl([tx,tv,tC,eZ,ew,eO,eE,eV,ej,e$,eY,tR,tI,e6,e9,te,tA]),td,ts,tp])],tS=()=>{z._advancedPipelineMap.column=ty,z._specPipelineMap.column=tk},tF=[U,el,er,ed([tm],[tb]),eS,eF,eM,eB,T,eW,eT],tz=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l,datasetReshapeInfo:a}=i,{unfoldInfo:n}=a[0];return l[0].y&&l[0].x&&l[0].group&&(o.type="bar",o.direction="vertical",o.xField=[l[0].x[0],n.groupId],o.yField=l[0].y[0],o.seriesField=l[0].group[0],o.padding=0,o.region=[{clip:!0}],o.animation=!0),o},tM=[tu([tz,tv,eZ,ew,eO,eE,eV,ej,e$,eY,eU,tR,tI,e6,e9,te,tA],[to,ti,ta,tr,tl([tz,tv,eZ,ew,eO,eE,eV,ej,e$,eY,tR,tI,e6,e9,te,tA]),td,ts,tp])],t_=()=>{z._advancedPipelineMap.columnParallel=tF,z._specPipelineMap.columnParallel=tM},tP=[U,el,er,ed([tm],[tb]),eS,eF,eM,eB,T,eW,eT],tB=(e,t)=>{let o={...e};return o.percent=!0,o},tL=[tu([tx,tv,tC,eZ,ew,tB,eO,eE,eV,ej,e$,eY,tR,eU,tI,e6,e9,te,tA],[to,ti,ta,tr,tl([tx,tv,tC,eZ,tB,ew,eO,eE,eV,ej,e$,eY,tR,tI,e6,e9,te,tA]),td,ts,tp])],tW=()=>{z._advancedPipelineMap.columnPercent=tP,z._specPipelineMap.columnPercent=tL},tT=e=>{let t={...e},{datasetReshapeInfo:o,dimensions:i}=e;if(!o||!i)return t;let l=i.find(e=>"rowDimension"!==e.location&&"columnDimension"!==e.location)||i[0],a=0===i.length,n=o.reduce((e,t)=>{let{foldInfo:o,unfoldInfo:i}=t,n=[a?o.measureName:l?.id],r=[o.measureValue];return[...e,{x:r,y:n,group:[i.groupId],color:[o.measureName]}]},[]);return{...t,encoding:n}},tX=[U,el,er,ed([tm],[tb]),tT,ez,eM,eB,T,eW,eT],tD=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;return l[0].y&&l[0].x&&l[0].group&&(o.type="bar",o.direction="horizontal",o.yField=l[0].y?.[0],o.xField=l[0].x?.[0],o.seriesField=l[0].group?.[0],o.padding=0,o.region=[{clip:!0}],o.animation=!0),o},tZ=(e,t)=>{let{advancedVSeed:o,vseed:i}=t,{encoding:l,analysis:a,datasetReshapeInfo:n}=o,{orderMapping:r={}}=a??{},d=l[0]?.angle?.[0],s=l[0]?.y?.[0],p=l[0]?.group?.[0],u=n[0].id,c={};if(d&&(c[d]={sortIndex:0}),s){let e=r[s];e?c[s]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:c[s]={sortIndex:0}}if(p){let e=r[p];e?c[p]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:c[p]={sortIndex:0}}return{...e,data:{id:u,values:ei(i)?void 0:o.dataset,fields:c}}},tw=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,{locale:n}=i,r=i.config?.[a]?.xAxis;if(o.axes||(o.axes=[]),!r)return o.axes=[...o.axes,{visible:!0,type:"linear",orient:"bottom"}],o;let{visible:d=!0,label:s,tick:p,title:u,grid:c,line:f,zero:g,nice:h,inverse:m,max:b,min:y,log:x,logBase:v=10}=r,C={visible:d,type:x?"log":"linear",base:v,orient:"bottom",nice:h,zero:!x&&g,inverse:m,max:b,min:y,label:{visible:s?.visible,formatMethod:e=>eK(e,n),style:{fill:s?.labelColor,angle:s?.labelAngle,fontSize:s?.labelFontSize,fontWeight:s?.labelFontWeight}},title:{visible:u?.visible,text:u?.titleText,style:{fill:u?.titleColor,fontSize:u?.titleFontSize,fontWeight:u?.titleFontWeight}},tick:{visible:p?.visible,tickSize:p?.tickSize,inside:p?.tickInside,style:{stroke:p?.tickColor}},grid:{visible:c?.visible,style:{lineWidth:c?.gridWidth,stroke:c?.gridColor}},domainLine:{visible:f?.visible,style:{lineWidth:f?.lineWidth,stroke:f?.lineColor}},innerOffset:{right:7}};return o.axes=[...o.axes,C],o},tO=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,n=i.config?.[a]?.yAxis;if(o.axes||(o.axes=[]),!n)return o.axes=[...o.axes,{visible:!0,type:"band",orient:"left"}],o;let{visible:r=!0,label:d,tick:s,title:p,grid:u,line:c,labelAutoHide:f,labelAutoHideGap:g,labelAutoLimit:h,labelAutoLimitLength:m=80,labelAutoRotate:b,labelAutoRotateAngleRange:y}=n,x={visible:r,type:"band",orient:"left",maxWidth:m+60,sampling:!(f||b||h),hover:!0,label:{visible:d?.visible,flush:!0,containerAlign:"right",space:8,style:{maxLineWidth:m,fill:d?.labelColor,angle:d?.labelAngle,fontSize:d?.labelFontSize,fontWeight:d?.labelFontWeight},minGap:g,autoHide:f,autoHideMethod:"greedy",autoHideSeparation:g,autoLimit:h,autoRotate:b,autoRotateAngle:y,lastVisible:!0},title:{visible:p?.visible,text:p?.titleText,style:{fill:p?.titleColor,fontSize:p?.titleFontSize,fontWeight:p?.titleFontWeight}},tick:{visible:s?.visible,tickSize:s?.tickSize,inside:s?.tickInside,style:{stroke:s?.tickColor}},grid:{visible:u?.visible,style:{lineWidth:u?.gridWidth,stroke:u?.gridColor}},domainLine:{visible:c?.visible,style:{lineWidth:c?.lineWidth,stroke:c?.lineColor}},paddingInner:[.15,.1],paddingOuter:[.075,.1]};return o.axes=[...o.axes,x],o},tE=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,n=i.config?.[a]?.crosshairRect;if(!n)return o;o.crosshair||(o.crosshair={});let{visible:r=!0,rectColor:d,labelColor:s,labelVisible:p,labelBackgroundColor:u}=n;return o.crosshair.yField={visible:r,line:{type:"rect",style:{lineWidth:0,opacity:.2,fill:d}},label:{visible:p,labelBackground:{visible:p,style:{fill:u}},style:{fill:s}}},o},tV=[tu([tD,tv,eZ,ew,tZ,eE,tw,tO,e$,eY,tE,eU,tI,e6,e9,te,tA],[to,ti,tn,tr,tl([tD,tv,eZ,ew,tZ,eE,tw,tO,e$,e$,eY,tE,tI,e6,e9,te,tA]),td,ts,tp])],tH=()=>{z._advancedPipelineMap.bar=tX,z._specPipelineMap.bar=tV},tN=[U,el,er,ed([tm],[tb]),tT,ez,eM,eB,T,eW,eT],tG=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l,datasetReshapeInfo:a}=i,{unfoldInfo:n}=a[0];return l[0].y&&l[0].x&&l[0].group&&(o.type="bar",o.direction="horizontal",o.yField=[l[0].y[0],n.groupId],o.xField=l[0].x[0],o.seriesField=l[0].group[0],o.padding=0,o.region=[{clip:!0}],o.animation=!0),o},tK=[tu([tG,tv,eZ,ew,tZ,eE,tw,tO,e$,eY,tE,eU,tI,e6,e9,te,tA],[to,ti,tn,tr,tl([tG,tv,eZ,ew,tZ,tw,tO,e$,eY,tE,tI,e6,e9,te,tA]),td,ts,tp])],tj=()=>{z._advancedPipelineMap.barParallel=tN,z._specPipelineMap.barParallel=tK},t$=[U,el,er,ed([tm],[tb]),tT,ez,eM,eB,T,eW,eT],tY=[tu([tD,tv,eZ,ew,tB,tZ,eE,tw,tO,e$,eY,tE,eU,tI,e6,e9,te,tA],[to,ti,tn,tr,tl([tD,tv,eZ,ew,tB,tZ,tO,tw,e$,eY,tE,tI,e6,e9,te,tA]),td,ts,tp])],tq=()=>{z._advancedPipelineMap.barPercent=t$,z._specPipelineMap.barPercent=tY},tU=[U,el,er,ed([eA],[ek]),eS,eF,eM,eP,T,eW,eT],tJ=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;return l[0].y&&l[0].x&&l[0].group&&(o.type="area",o.direction="vertical",o.xField=l[0].x[0],o.yField=l[0].y[0],o.seriesField=l[0].group[0],o.padding=0,o.region=[{clip:!0}],o.animation=!0),o},tQ=(e,t)=>{let{advancedVSeed:o}=t,{markStyle:i,encoding:l,dataset:a}=o,{areaStyle:n}=i;if(!n)return e;let r={...e},d=Array.isArray(n)?n:[n],s=l[0]?.group?.[0],p=(0,g.a)(a,e=>e[s??""]),u=d.reduce((e,t,o)=>{let{areaColor:i,areaColorOpacity:l}=t;return{...e,[`custom${o+1}`]:{level:o+1,filter:e=>{for(let o of p[e[s??""]])if(eJ(o,t.selector))return!0;return!1},style:{fill:i,fillOpacity:l}}}},{});return{...r,area:{state:{...u}}}},t0=[tu([tJ,tC,eZ,ew,eO,eE,eV,ej,e$,eY,eq,eU,e4,e8,e3,tQ,e6,e9,te,tt],[to,ti,ta,tr,tl([tJ,eZ,ew,tC,eO,eE,eV,ej,e$,eY,eq,e4,e8,e3,tQ,e6,e9,te,tt]),td,ts,tp])],t1=()=>{z._advancedPipelineMap.area=tU,z._specPipelineMap.area=t0},t2=[U,el,er,ed([eA],[ek]),eS,eF,eM,eP,T,eW,eT],t4=[tu([tJ,tC,eZ,ew,tB,eO,eE,eV,ej,e$,eY,eq,eU,e4,e3,tQ,e6,e9,te,tt],[to,ti,ta,tr,tl([tJ,tC,eZ,ew,tB,eO,eE,eV,ej,e$,eY,eq,e4,e3,tQ,e6,e9,te,tt]),td,ts,tp])],t8=()=>{z._advancedPipelineMap.areaPercent=t2,z._specPipelineMap.areaPercent=t4},t5=e=>{let t=L(e);if(t.length<=2)return t;let o=e.filter(e=>"children"in e),i=e.filter(e=>!("children"in e));for(let e=0;e<i.length;e+=2){let i=t3();i.children=t.slice(e,e+2),o.push(i)}return o},t3=()=>({id:"",alias:"",children:[]}),t7={dataset:[],foldInfo:{foldMap:{},measureId:"",measureName:"",measureValue:""},unfoldInfo:{groupName:"",groupId:"",colorItems:[],colorIdMap:{}}},t6=(e,t,o,i)=>{let{foldMeasureId:l=ep,foldMeasureName:a=es,foldMeasureValue:n=eu,unfoldDimensionGroup:r=eg,unfoldDimensionGroupId:d=eh}=i||{};if(0===t.length&&0===o.length)return t7;if(0===t.length){let{dataset:t,unfoldInfo:o}=ex(e,[],[],0,r,d,l);return{dataset:t,foldInfo:{foldMap:{},measureId:l,measureName:a,measureValue:n},unfoldInfo:o}}{let{dataset:o,unfoldInfo:i}=ex(e,[...t],[{id:n,alias:k`指标值`}],0,r,d,l);return{dataset:o,foldInfo:{foldMap:{},measureId:l,measureName:a,measureValue:n},unfoldInfo:i}}},t9=[U,(e,t)=>{let o={...e},{vseed:i}=t,{measures:l,dataset:a}=i;if(!a)throw Error("dataset is required");if(0===a.length)return o;if(l)return o.measures=t5(l),o;let n=a.slice(0,100);return o.measures=t5(Object.keys(n.reduce((e,t)=>({...e,...t}),{})).filter(e=>n.some(t=>"number"==typeof t[e])&&!["",null,void 0].includes(e)).map(e=>({id:e,alias:e}))),o},er,ed([(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{dimensions:a,measures:n}=e;if(!n||!a||!l)return o;if(0===n.length)throw Error("measures can not be empty");let{dataset:r,foldInfo:d,unfoldInfo:s}=t6(l,a,n);return{...o,dataset:r,datasetReshapeInfo:[{id:"1D2M",index:0,foldInfo:d,unfoldInfo:s}]}}],[(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{measures:a}=e,n=e.dimensions;if(!a||!n)return o;let r=[];a&&a.forEach(e=>{e.children&&e.children.length>0&&r.push(e)});let d=[],s=[];return r.forEach((e,t)=>{let o=e.children;if(!o)return;let i=n.filter(e=>"dimension"===e.location),a=e.id,{dataset:r,foldInfo:p,unfoldInfo:u}=t6(l,i,o,{foldMeasureId:ep,foldMeasureName:es,foldMeasureValue:eu+a,unfoldDimensionGroup:eg});d.push(r),s.push({id:a,index:t,foldInfo:p,unfoldInfo:u})}),{...o,dataset:d,datasetReshapeInfo:s}}]),e=>{let t={...e},{datasetReshapeInfo:o,measures:i}=e;if(!o||!i)return t;let l=o.reduce((e,t,o)=>{let l=i[o];if("children"in l){let o=l.children?.[0],i=l.children?.[1]||o,{foldInfo:a,unfoldInfo:n}=t,r=[n.groupId],d=[o?.id,i?.id];return[...e,{x:r,y:d,group:[n.groupId],color:[a.measureName]}]}{let l=i[o],a=i[o+1]||l,{foldInfo:n,unfoldInfo:r}=t,d=[r.groupId],s=[l.id,a.id];return[...e,{x:d,y:s,group:[r.groupId],color:[n.measureName]}]}},[]);return{...t,encoding:l}},eF,eP,T,eW,eT],oe=(...e)=>{let t={type:"common",padding:0,region:[{clip:!0}]};return(o,i)=>(t.series=e.map(e=>y(e,i,{})),t)},ot=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;if(!l[0].y||!l[0].x||!l[0].group)return o;let{color:a}=i.config.areaRange;return o.type="rangeArea",o.direction="vertical",o.stack=!1,o.xField=l[0].x[0],o.yField=[l[0].y[0],l[0].y[1]],o.animation=!0,o.area={style:{fill:a.colorScheme?.[0]}},o},oo=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;if(!l[0].y||!l[0].x||!l[0].group)return o;let{color:a}=i.config.areaRange;return o.type="line",o.direction="vertical",o.stack=!1,o.xField=l[0].x[0],o.yField=[l[0].y[0]],o.animation=!0,o.line={style:{stroke:a.colorScheme?.[0]}},o.point={style:{visible:!1,fill:a.colorScheme?.[0]}},o},oi=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;if(!l[0].y||!l[0].x||!l[0].group)return o;let{color:a}=i.config.areaRange;return o.type="line",o.direction="vertical",o.stack=!1,o.xField=l[0].x[0],o.yField=[l[0].y[1]],o.animation=!0,o.line={style:{stroke:a.colorScheme?.[0]}},o.point={style:{visible:!1,fill:a.colorScheme?.[0]}},o},ol=e=>{let t={...e};return t.tooltip={visible:!1},t},oa=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{measures:l,datasetReshapeInfo:a,chartType:n,locale:r,encoding:d}=i,{tooltip:s={enable:!0}}=i.config[n],{enable:p}=s,{groupName:u}=a[0].unfoldInfo,c=d[0]?.y||[];return o.tooltip={visible:p,dimension:{content:[{visible:!0,key:e=>e&&e[u]||"",value:e=>e?c.map(t=>{let o=e[t],i=P(l,t);if(!i)return String(o);let{format:a={},autoFormat:n=!0}=i;return(0,f.a)(a)?n?eK(o,r):String(o):eG(a)(o)}).join(" ~ "):"",shapeType:"rectRound"},...c.map(e=>{let t=P(l,e);return{visible:!0,key:t?.alias||e,value:t=>{if(!t)return"";let o=t[e],i=P(l,e);if(!i)return String(o);let{format:a={},autoFormat:n=!0}=i;return(0,f.a)(a)?n?eK(o,r):String(o):eG(a)(o)},shapeType:"rectRound"}})]}},o},on=[tu([oe([ot,tQ],[oo,e3,e4,e8,ol],[oi,e3,e4,e8,ol]),eO,eE,ew,eV,ej,e$,oa,eq,e6,e9,te,tt],[to,ti,ta,tr,tl([oe([ot,tQ],[oo,e3,e4,e8,ol],[oi,e3,e4,e8,ol]),ew,eO,eE,eV,ej,e$,oa,eq,e6,e9,te,tt]),td,ts])],or=()=>{z._advancedPipelineMap.areaRange=t9,z._specPipelineMap.areaRange=on},od={dataset:[],foldInfo:{foldMap:{},measureId:"",measureName:"",measureValue:""},unfoldInfo:{groupName:"",groupId:"",colorItems:[],colorIdMap:{}}},os=(e,t,o,i)=>{let{foldMeasureId:l=ep,foldMeasureName:a=es,foldMeasureValue:n=eu,unfoldDimensionGroup:r=eg,unfoldDimensionGroupId:d=eh}=i||{};if(0===t.length&&0===o.length)return od;let{dataset:s,foldInfo:p}=ey(e,o.length>1?o.slice(1):o,l,a,n);if(0===t.length){let{dataset:e,unfoldInfo:t}=ex(s,[{id:n,alias:k`指标值`,location:"dimension"}],[{id:n,alias:k`指标值`}],0,r,d,l);return{dataset:e,foldInfo:p,unfoldInfo:t}}{let{dataset:e,unfoldInfo:o}=ex(s,[...t],[{id:n,alias:k`指标值`}],0,r,d,l);return{dataset:e,foldInfo:p,unfoldInfo:o}}},op=[U,el,er,ed([(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{dimensions:a,measures:n}=e;if(!n||!a||!l)return o;if(0===n.length)throw Error("measures can not be empty");let{dataset:r,foldInfo:d,unfoldInfo:s}=os(l,a,n);return{...o,dataset:r,datasetReshapeInfo:[{id:"1D2M",index:0,foldInfo:d,unfoldInfo:s}]}}],[(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{measures:a}=e,n=e.dimensions;if(!a||!n)return o;let r=[];a&&a.forEach(e=>{e.children&&e.children.length>0&&r.push(e)});let d=[],s=[];return r.forEach((e,t)=>{let o=e.children;if(!o)return;let i=n.filter(e=>"dimension"===e.location),a=e.id,{dataset:r,foldInfo:p,unfoldInfo:u}=os(l,i,o,{foldMeasureId:ep,foldMeasureName:es,foldMeasureValue:eu+a,unfoldDimensionGroup:eg});d.push(r),s.push({id:a,index:t,foldInfo:p,unfoldInfo:u})}),{...o,dataset:d,datasetReshapeInfo:s}}]),e=>{let t={...e},{datasetReshapeInfo:o,measures:i}=e;if(!o||!i)return t;let l=B(i),a=o.reduce((e,t)=>{let{foldInfo:o,unfoldInfo:i}=t,a=[l?.id],n=[o.measureValue];return[...e,{x:a,y:n,group:[i.groupId],color:[i.groupId]}]},[]);return{...t,encoding:a}},eP,T,eW,eT],ou=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;return l[0].y&&l[0].x&&l[0].group&&(o.type="scatter",o.direction="vertical",o.xField=l[0].x[0],o.yField=l[0].y[0],o.seriesField=l[0].group[0],o.padding=0,o.region=[{clip:!0}],o.animation=!0),o},oc=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,n=i.config?.[a]?.crosshairLine;if(!n)return o;o.crosshair||(o.crosshair={});let{visible:r=!0,lineColor:d,labelColor:s,labelVisible:p,labelBackgroundColor:u}=n;return o.crosshair.yField={visible:r,line:{type:"line",style:{lineWidth:1,opacity:1,stroke:d,lineDash:[4,2]}},label:{visible:p,labelBackground:{visible:p,style:{fill:u}},style:{fill:s}}},o},of=[tu([ou,eZ,ew,eO,eE,tw,ej,e$,eY,eq,oc,eU,e4,e5,e6,e9,te,tt],[to,ti,ta,tr,tl([ou,eZ,ew,eO,eE,tw,ej,e$,eY,eq,oc,e4,e5,e6,e9,te,tt]),td,ts,tp])],og=()=>{z._advancedPipelineMap.scatter=op,z._specPipelineMap.scatter=of},oh=e=>{let t=e.map((e,t)=>{let{primaryMeasures:o,secondaryMeasures:i}=e,l=[],a="";if(o){let e=Array.isArray(o)?o:[o];a+=e.map(e=>e.alias||e.id).toString(),l.push({id:`${t}-primary`,alias:e.map(e=>e.alias||e.id).toString(),children:e})}if(i){let e=Array.isArray(i)?i:[i];a+=e.map(e=>e.alias||e.id).toString(),l.push({id:`${t}-secondary`,alias:e.map(e=>e.alias||e.id).toString(),children:e})}return{id:a,alias:a,children:l}});return 1===e.length?t[0].children||[]:t},om=[U,(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l,dualMeasures:a,measures:n}=i;if(!l)throw Error("dataset is required");if(0===l.length)return o;if(a)return o.measures=oh(a),o;if(n&&J(n)>1)return o.measures=n,o;let r=l.slice(0,100),d=r.reduce((e,t)=>({...e,...t}),{}),s=n||Object.keys(d).filter(e=>r.some(t=>"number"==typeof t[e])&&!["",null,void 0].includes(e)).map(e=>({id:e,alias:e}));return 0===s.length?o.measures=[]:1===s.length?o.measures=[{id:"primary",alias:"primary",children:s}]:s.length>1&&(o.measures=[{id:"primary",alias:"primary",children:s.slice(0,1)},{id:"secondary",alias:"secondary",children:s.slice(1)}]),o},er,ed([(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{dimensions:a,measures:n}=e;if(!n||!a||!l)return o;if(0===n.length)throw Error("measures can not be empty");if(n.length>2)throw Error("measures can not be more than 2");let r=a.filter(e=>"dimension"===e.location),d=[],s=[],p=[],u=n[0],c=n[1]||[];if(u&&u.children){let{dataset:e,foldInfo:t,unfoldInfo:o}=th(l,r,u.children,{foldMeasureValue:ec});d.push(e),s.push(t),p.push(o)}if(c&&c.children){let{dataset:e,foldInfo:t,unfoldInfo:o}=th(l,r,c.children,{foldMeasureValue:ef});d.push(e),s.push(t),p.push(o)}let f={groupName:p[0].groupName,groupId:p[0].groupId,colorItems:p.flatMap(e=>e.colorItems),colorIdMap:p.reduce((e,t)=>({...e,...t.colorIdMap}),{})};return{...o,dataset:d,datasetReshapeInfo:[{id:"2D2M",index:0,foldInfo:s[0],foldInfoList:s,unfoldInfo:f}]}}],[(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{dimensions:a,measures:n}=e;if(!n||!a||!l)return o;let r=a.filter(e=>"dimension"===e.location),d=[],s=[];return n.forEach((e,t)=>{let o=e.children||[];if(0===o.length)throw Error("measures can not be empty");if(o.length>2)throw Error("measures can not be more than 2");let i=[],a=[],n=[],p=o[0],u=o[1]||o[0];if(p&&p.children){let{dataset:e,foldInfo:o,unfoldInfo:d}=th(l,r,p.children,{foldMeasureValue:`${ec}${t}`});i.push(e),a.push(o),n.push(d)}if(u&&u.children){let{dataset:e,foldInfo:o,unfoldInfo:d}=th(l,r,u.children,{foldMeasureValue:`${ef}${t}`});i.push(e),a.push(o),n.push(d)}d.push(i.flat(2));let c={groupName:n[0].groupName,groupId:n[0].groupId,colorItems:n.flatMap(e=>e.colorItems),colorIdMap:n.reduce((e,t)=>({...e,...t.colorIdMap}),{})},f={id:`2D2M-${t}`,index:t,foldInfo:a[0],unfoldInfo:c,foldInfoList:a};s.push(f)}),{...o,dataset:d,datasetReshapeInfo:s}}]),e=>{let t={...e},{datasetReshapeInfo:o,dimensions:i}=e;if(!o||!i)return t;let l=i.find(e=>"rowDimension"!==e.location&&"columnDimension"!==e.location)||i[0],a=0===i.length,n=o.reduce((e,t)=>{let{foldInfoList:o,unfoldInfo:i}=t,n=[a?o[0].measureName:l?.id],r=o.map(e=>e.measureValue);return[...e,{x:n,y:r,group:[i.groupId],color:[o[0].measureName]}]},[]);return{...t,encoding:n}},eF,eM,(e,t)=>{let{vseed:o}=t,{chartType:i}=o,l={...e},a=(0,u.a)(o,["backgroundColor","color","label","legend","tooltip","dualChartType","primaryYAxis","secondaryYAxis","crosshairLine"]);return l.config={...l.config||{},[i]:{...a}},l},T,eW,eT],ob=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l,datasetReshapeInfo:a}=i;return l[0].y&&l[0].x&&l[0].group&&(o.id=`${a[0].id}-primary-series`,o.type="bar",o.direction="vertical",o.xField=l[0].x[0],o.yField=l[0].y[0],o.seriesField=l[0].group[0],o.animation=!0),o},oy=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l,datasetReshapeInfo:a}=i;return l[0].y&&l[0].x&&l[0].group&&(o.id=`${a[0].id}-secondary-series`,o.type="line",o.direction="vertical",o.xField=l[0].x[0],o.yField=l[0].y[1],o.seriesField=l[0].group[0],o.animation=!0),o},ox=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,{datasetReshapeInfo:n}=i,r=n[0].index,d=i.config?.[a]?.dualChartType||{primary:"column",secondary:"line"},s=Array.isArray(d)?d[r].primary||d[0].primary:d.primary;switch(s){case"line":o.type="line";break;case"column":o.type="bar";break;case"columnParallel":Array.isArray(o.xField)?o.xField.push(n[0].unfoldInfo.groupId):o.xField&&(o.xField=[o.xField,n[0].unfoldInfo.groupId]),o.type="bar";break;case"columnPercent":o.type="bar",o.percent=!0;break;case"area":o.type="area";break;case"areaPercent":o.type="area",o.percent=!0;break;case"scatter":o.type="scatter";break;default:o.type=s}return o},ov=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,{datasetReshapeInfo:n}=i,r=i.config?.[a]?.dualChartType||{primary:"column",secondary:"line"},d=n[0].index,s=Array.isArray(r)?r[d].secondary||r[0].secondary:r.secondary;switch(s){case"line":o.type="line";break;case"column":o.type="bar";break;case"columnParallel":Array.isArray(o.xField)?o.xField.push(n[0].unfoldInfo.groupId):o.xField&&(o.xField=[o.xField,n[0].unfoldInfo.groupId]),o.type="bar";break;case"columnPercent":o.type="bar",o.percent=!0;break;case"area":o.type="area";break;case"areaPercent":o.type="area",o.percent=!0;break;case"scatter":o.type="scatter";break;default:o.type=s}return o},oC=(e,t)=>{let{advancedVSeed:o,vseed:i}=t,{encoding:l,analysis:a,datasetReshapeInfo:n}=o,{orderMapping:r={}}=a??{},d=l[0]?.x?.[0],s=l[0]?.group?.[0],p=n[0].id,u={};if(d){let e=r[d];e?u[d]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:u[d]={sortIndex:0}}if(s){let e=r[s];e?u[s]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:u[s]={sortIndex:0}}return{...e,data:{id:`${p}-primary-dataset`,values:ei(i)?void 0:o.dataset[0],fields:u}}},oR=(e,t)=>{let{advancedVSeed:o,vseed:i}=t,{encoding:l,analysis:a,datasetReshapeInfo:n}=o,{orderMapping:r={}}=a??{},d=l[0]?.x?.[0],s=l[0]?.group?.[0],p=n[0].id,u={};if(d){let e=r[d];e?u[d]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:u[d]={sortIndex:0}}if(s){let e=r[s];e?u[s]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:u[s]={sortIndex:0}}return{...e,data:{id:`${p}-secondary-dataset`,values:ei(i)?void 0:o.dataset[1],fields:u}}},oI=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{measures:l,datasetReshapeInfo:a,locale:n}=i,{chartType:r}=i,d=i.config[r];if(!d||!d.label)return o;let{measureId:s,measureValue:p}=a[0].foldInfoList[0],{label:u}=d,{enable:c}=u;return o.label={visible:c,formatMethod:(e,t)=>{let o=[];return o.push((e=>{let o=P(l,t[s]);if(!o)return e;let{format:i={},autoFormat:a=!0}=o;return(0,f.a)(i)?a?eK(e,n):String(e):eG(i)(e)})(t[p])),o.join(" ")}},o},oA=(e,t)=>{let o={...e},{advancedVSeed:l}=t,{measures:a,datasetReshapeInfo:n,locale:r}=l,{chartType:d}=l,s=l.config[d];if(!s||!s.label||(0,i.a)(n[0].foldInfoList?.[1]))return o;let{measureId:p,measureValue:u}=n[0].foldInfoList[1],{label:c}=s,{enable:g}=c;return o.label={visible:g,formatMethod:(e,t)=>{let o=[];return o.push((e=>{let o=P(a,t[p]);if(!o)return e;let{format:i={},autoFormat:l=!0}=o;return(0,f.a)(i)?l?eK(e,r):String(e):eG(i)(e)})(t[u])),o.join(" ")}},o},ok=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{measures:l,datasetReshapeInfo:a,chartType:n,locale:r,dimensions:d}=i,{tooltip:s={enable:!0}}=i.config[n],{enable:p}=s,u=a[0].foldInfoList,c=a[0].unfoldInfo,{measureId:g,measureValue:h,measureName:m}=u[0],{groupName:b}=c;return o.tooltip={visible:p,mark:{title:{visible:!0},content:[...d.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:t=>e.alias||e.id?e.alias||e.id:t&&t[e.id],value:t=>t&&t[e.id]})),{visible:!0,hasShape:!0,key:e=>e&&e[m||b]||"",value:e=>{if(!e)return"";let t=e[h],o=P(l,e[g]);if(!o)return String(t);let{format:i={},autoFormat:a=!0}=o;return(0,f.a)(i)?a?eK(t,r):String(t):eG(i)(t)}}]},dimension:{content:[{visible:!0,key:e=>e&&e[b]||"",value:e=>{if(!e)return"";let t=e[h],o=P(l,e[g]);if(!o)return String(t);let{format:i={},autoFormat:a=!0}=o;return(0,f.a)(i)?a?eK(t,r):String(t):eG(i)(t)},shapeType:"rectRound"}]}},o},oS=(e,t)=>{let o={...e},{advancedVSeed:l}=t,{measures:a,datasetReshapeInfo:n,chartType:r,locale:d,dimensions:s}=l,{tooltip:p={enable:!0}}=l.config[r],{enable:u}=p;if((0,i.a)(n[0].foldInfoList?.[1]))return o;let c=n[0].foldInfoList,g=n[0].unfoldInfo,{measureId:h,measureValue:m,measureName:b}=c[1],{groupName:y}=g;return o.tooltip={visible:u,mark:{title:{visible:!0},content:[...s.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:t=>e.alias||e.id?e.alias||e.id:t&&t[e.id],value:t=>t&&t[e.id]})),{visible:!0,hasShape:!0,key:e=>e&&e[b||y]||"",value:e=>{if(!e)return"";let t=e[m],o=P(a,e[h]);if(!o)return String(t);let{format:i={},autoFormat:l=!0}=o;return(0,f.a)(i)?l?eK(t,d):String(t):eG(i)(t)}}]},dimension:{content:[{visible:!0,key:e=>e&&e[y]||"",value:e=>{if(!e)return"";let t=e[m],o=P(a,e[h]);if(!o)return String(t);let{format:i={},autoFormat:l=!0}=o;return(0,f.a)(i)?l?eK(t,d):String(t):eG(i)(t)},shapeType:"rectRound"}]}},o},oF=(e,t)=>{let o={...e},{advancedVSeed:i,vseed:l}=t,{chartType:a}=l,{locale:n,datasetReshapeInfo:r}=i,d=r[0].index,s=i.config?.[a]?.primaryYAxis,p=Array.isArray(s)?s[d]||s[0]:s;if(r[0].foldInfoList?.[0]&&(0,f.a)(r[0].foldInfoList[0].foldMap))return o;let u=`${r[0].id}-primary-axis`,c=`${r[0].id}-primary-series`;if(o.axes||(o.axes=[]),!p)return o.axes=[...o.axes,{visible:!0,id:u,seriesId:c,type:"linear",orient:"left",sync:{axisId:`${r[0].id}-secondary-axis`,tickAlign:!1,zeroAlign:!0}}],o;let{visible:g=!0,label:h,tick:m,title:b,grid:y,line:x,zero:v,nice:C,inverse:R,max:I,min:A,log:k,logBase:S=10}=p,F={visible:g,id:u,seriesId:c,sync:{axisId:`${r[0].id}-secondary-axis`,tickAlign:!1,zeroAlign:!0},type:k?"log":"linear",base:S,orient:"left",nice:C,zero:!k&&v,inverse:R,max:I,min:A,label:{visible:h?.visible,formatMethod:e=>eK(e,n),style:{fill:h?.labelColor,angle:h?.labelAngle,fontSize:h?.labelFontSize,fontWeight:h?.labelFontWeight}},title:{visible:b?.visible,text:b?.titleText,style:{fill:b?.titleColor,fontSize:b?.titleFontSize,fontWeight:b?.titleFontWeight}},tick:{visible:m?.visible,tickSize:m?.tickSize,inside:m?.tickInside,style:{stroke:m?.tickColor}},grid:{visible:y?.visible,style:{lineWidth:y?.gridWidth,stroke:y?.gridColor}},domainLine:{visible:x?.visible,style:{lineWidth:x?.lineWidth,stroke:x?.lineColor}},innerOffset:{top:7}};return o.axes=[...o.axes,F],o},oz=(e,t)=>{let o={...e},{advancedVSeed:l,vseed:a}=t,{chartType:n}=a,{locale:r,datasetReshapeInfo:d}=l,s=d[0].index,p=l.config?.[n]?.secondaryYAxis,u=Array.isArray(p)?p[s]||p[0]:p;if((0,i.a)(d[0].foldInfoList?.[1]))return o;let c=`${d[0].id}-secondary-axis`,f=`${d[0].id}-secondary-series`;if(o.axes||(o.axes=[]),!u)return o.axes=[...o.axes,{visible:!0,id:c,seriesId:f,type:"linear",orient:"right"}],o;let{visible:g=!0,label:h,tick:m,title:b,grid:y,line:x,zero:v,nice:C,inverse:R,max:I,min:A,log:k,logBase:S=10}=u,F={visible:g,id:c,seriesId:f,type:k?"log":"linear",base:S,orient:"right",nice:C,zero:!k&&v,inverse:R,max:I,min:A,label:{visible:h?.visible,formatMethod:e=>eK(e,r),style:{fill:h?.labelColor,angle:h?.labelAngle,fontSize:h?.labelFontSize,fontWeight:h?.labelFontWeight}},title:{visible:b?.visible,text:b?.titleText,style:{fill:b?.titleColor,fontSize:b?.titleFontSize,fontWeight:b?.titleFontWeight}},tick:{visible:m?.visible,tickSize:m?.tickSize,inside:m?.tickInside,style:{stroke:m?.tickColor}},grid:{visible:y?.visible,style:{lineWidth:y?.gridWidth,stroke:y?.gridColor}},domainLine:{visible:x?.visible,style:{lineWidth:x?.lineWidth,stroke:x?.lineColor}},innerOffset:{top:7}};return o.axes=[...o.axes,F],o},oM=[tu([oe([ob,ox,oC,oI,ok,eE,tI,e4,e8,e3,tQ],[oy,ov,oR,oA,oS,eE,tI,e4,e8,e3,tQ]),eV,oF,oz,eZ,ew,eU,tR,e6,e9,te,tt],[to,ti,ta,tr,tl([oe([ob,ox,oC,oI,ok,eE,tI,e4,e8,e3,tQ],[oy,ov,oR,oA,oS,eE,tI,e4,e8,e3,tQ]),eV,oF,oz,eZ,ew,tR,e6,e9,te,tt]),td,ts,tp])],o_=()=>{z._advancedPipelineMap.dualAxis=om,z._specPipelineMap.dualAxis=oM},oP={dataset:[],foldInfo:{foldMap:{},measureId:"",measureName:"",measureValue:""},unfoldInfo:{groupName:"",groupId:"",colorItems:[],colorIdMap:{}}},oB=(e,t,o,i)=>{let{foldMeasureId:l=ep,foldMeasureName:a=es,foldMeasureValue:n=eu,unfoldDimensionGroup:r=eg,unfoldDimensionGroupId:d=eh}=i||{};if(0===t.length&&0===o.length)return oP;let{dataset:s,foldInfo:p}=ey(e,o,l,a,n);if(0===t.length){let{dataset:e,unfoldInfo:t}=ex(s,[{id:a,alias:k`指标名称`,location:"dimension"}],[{id:n,alias:k`指标值`}],0,r,d,l);return{dataset:e,foldInfo:p,unfoldInfo:t}}{let{dataset:e,unfoldInfo:i}=ex(s,1===o.length?[...t]:[...t,{id:a,alias:k`指标名称`,location:"dimension"}],[{id:n,alias:k`指标值`}],0,r,d,l);return{dataset:e,foldInfo:p,unfoldInfo:i}}},oL=(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{dimensions:a,measures:n}=e;if(!n||!a||!l)return o;if(0===n.length)throw Error("measures can not be empty");let{dataset:r,foldInfo:d,unfoldInfo:s}=oB(l,a,n);return{...o,dataset:r,datasetReshapeInfo:[{id:"1D1M",index:0,foldInfo:d,unfoldInfo:s}]}},oW=(e,t)=>{let o={...e},{vseed:i}=t,{dataset:l}=i,{measures:a}=e,n=e.dimensions;if(!a||!n)return o;let r=[];a&&a.forEach(e=>{e.children&&e.children.length>0&&r.push(e)});let d=[],s=[];return r.forEach((e,t)=>{let o=e.children;if(!o)return;let i=n.filter(e=>"dimension"===e.location),a=e.id,{dataset:r,foldInfo:p,unfoldInfo:u}=oB(l,i,o,{foldMeasureId:ep,foldMeasureName:es,foldMeasureValue:eu+a,unfoldDimensionGroup:eg});d.push(r),s.push({id:a,index:t,foldInfo:p,unfoldInfo:u})}),{...o,dataset:d,datasetReshapeInfo:s}},oT=e=>{let t={...e},{datasetReshapeInfo:o}=e;if(!o)return t;let i=o.reduce((e,t)=>{let{foldInfo:o,unfoldInfo:i}=t,l=[o.measureValue],a=[i.groupId];return[...e,{angle:a,radius:l,group:[i.groupId],color:[i.groupId]}]},[]);return{...t,encoding:i}},oX=[U,el,er,ed([oL],[oW]),oT,eL,T,eT],oD=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l,dataset:a}=i;if(!l[0].angle||!l[0].radius||!l[0].group)return o;let n=a.length<=30;return o.type="pie",o.outerRadius=.8,o.innerRadius=0,o.valueField=l[0].radius[0],o.categoryField=l[0].angle[0],o.seriesField=l[0].group[0],o.padding=0,o.region=[{clip:!0}],o.pie={style:{stroke:"#ffffff",lineWidth:+!!n,centerOffset:0},state:{hover:{outerRadius:1.1*o.outerRadius}}},o.animation=!0,o},oZ=[tu([oD,eZ,ew,eO,eE,e$,eY,eU,e6,e9,te,tt],[to,ti,ta,tr,tl([oD,eZ,ew,eO,eE,e$,eY,e6,e9,te,tt]),td,ts,tp])],ow=()=>{z._advancedPipelineMap.pie=oX,z._specPipelineMap.pie=oZ},oO=[U,el,er,ed([oL],[oW]),oT,eL,T,eT],oE=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l,dataset:a}=i;if(!l[0].angle||!l[0].radius||!l[0].group)return o;let n=a.length<=30;return o.type="pie",o.outerRadius=.8,o.innerRadius=.8*o.outerRadius,o.valueField=l[0].radius[0],o.categoryField=l[0].angle[0],o.seriesField=l[0].group[0],o.padding=0,o.region=[{clip:!0}],o.pie={style:{stroke:"#ffffff",lineWidth:+!!n},state:{hover:{outerRadius:1.1*o.outerRadius}}},o.animation=!0,o},oV=[tu([oE,eZ,ew,eO,eE,e$,eY,eU,e6,e9,te,tt],[to,ti,ta,tr,tl([oE,eZ,ew,eO,eE,e$,eY,e6,e9,te,tt]),td,ts,tp])],oH=()=>{z._advancedPipelineMap.donut=oO,z._specPipelineMap.donut=oV},oN=e=>{let t={...e},{datasetReshapeInfo:o,dimensions:i,measures:l}=e;if(!o||!i||!l)return t;let a=i.find(e=>"rowDimension"!==e.location&&"columnDimension"!==e.location)||i[0],n=1===i.length&&1===l.length,r=0===i.length,d=o.reduce((e,t)=>{let{foldInfo:o,unfoldInfo:i}=t,l=[o.measureValue],d=[r?o.measureName:a?.id];return[...e,{angle:d,radius:l,group:[n?a?.id:i.groupId],color:[n?a?.id:i.groupId]}]},[]);return{...t,encoding:d}},oG=[U,el,er,ed([tm],[tb]),oN,eL,T,eW,eT],oK=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l,dataset:a,datasetReshapeInfo:n}=i,{foldInfo:r}=n[0];return l[0].radius&&l[0].angle&&l[0].group&&(o.type="rose",o.categoryField=l[0].angle[0],o.valueField=l[0].radius[0],o.seriesField=l[0].group[0],o.padding=0,o.outerRadius=.9,o.innerRadius=0,a.flat().find(e=>e[r.measureValue]<0)&&(o.innerRadius=.05),o.rose={style:{stroke:"#ffffff",lineWidth:1},state:{hover:{lineWidth:1,fillOpacity:.6}}},o.region=[{clip:!0}],o.animation=!0),o},oj=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{dimensions:l,measures:a}=i;if(!l||!a)return o;let n=0===l.length,r=1===l.length&&1===a.length,d=!(n||r);return o.axes||(o.axes=[]),o.axes.push({orient:"radius",visible:d,zero:!0,nice:!!d,grid:{visible:d},tick:{visible:d},label:{visible:d},domainLine:{visible:d}}),o},o$=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{dimensions:l,measures:a}=i;if(!l||!a)return o;let n=0===l.length,r=1===l.length&&1===a.length,d=!(n||r);return o.axes||(o.axes=[]),o.axes.push({orient:"angle",visible:d,zero:!0,nice:!!d,paddingInner:d?[.15,.1]:[0,0],paddingOuter:d?[.075,.1]:[0,0],grid:{visible:d},domainLine:{visible:d},tick:{visible:d}}),o},oY=[tu([oK,tv,tC,eZ,ew,eO,eE,oj,o$,e$,eY,tR,eU],[to,ti,ta,tr,tl([oK,tv,tC,eZ,ew,eO,eE,oj,o$,e$,eY,tR]),td,ts,tp])],oq=()=>{z._advancedPipelineMap.rose=oG,z._specPipelineMap.rose=oY},oU=[U,el,er,ed([tm],[tb]),oN,eL,T,eW,eT],oJ=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l,datasetReshapeInfo:a,dataset:n}=i,{unfoldInfo:r,foldInfo:d}=a[0];return l[0].radius&&l[0].angle&&l[0].group&&(o.type="rose",o.categoryField=[l[0].angle[0],r.groupId],o.valueField=l[0].radius[0],o.seriesField=l[0].group[0],o.padding=0,o.outerRadius=.9,o.innerRadius=0,n.flat().find(e=>e[d.measureValue]<0)&&(o.innerRadius=.05),o.rose={style:{stroke:"#ffffff",lineWidth:1},state:{hover:{lineWidth:1,fillOpacity:.6}}},o.region=[{clip:!0}],o.animation=!0),o},oQ=[tu([oJ,tv,eZ,ew,eO,eE,oj,o$,e$,eY,eU,tR,e6,e9,te,tA],[to,ti,ta,tr,tl([oJ,tv,eZ,ew,eO,eE,oj,o$,e$,eY,tR,e6,e9,te,tA]),td,ts,tp])],o0=()=>{z._advancedPipelineMap.roseParallel=oU,z._specPipelineMap.roseParallel=oQ},o1=[U,el,er,ed([eA],[ek]),e=>{let t={...e},{datasetReshapeInfo:o,dimensions:i,measures:l}=e;if(!o||!i||!l)return t;let a=i.find(e=>"rowDimension"!==e.location&&"columnDimension"!==e.location)||i[0],n=0===i.length,r=o.reduce((e,t)=>{let{foldInfo:o,unfoldInfo:i}=t,l=[n?o.measureName:a?.id],r=[o.measureValue];return[...e,{angle:l,radius:r,group:[i.groupId],color:[i.groupId]}]},[]);return{...t,encoding:r}},eM,eL,T,eW,eT],o2=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;return l[0].angle&&l[0].radius&&l[0].group&&(o.type="radar",o.angleField=l[0].angle[0],o.radiusField=l[0].radius[0],o.seriesField=l[0].group[0],o.padding=0,o.region=[{clip:!0}],o.animation=!0),o},o4=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{dimensions:l,measures:a}=i;return l&&a&&(o.axes||(o.axes=[]),o.axes.push({orient:"angle",visible:!0,zero:!0,nice:!0,grid:{visible:!0},domainLine:{visible:!0},tick:{visible:!0}})),o},o8=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{dimensions:l,measures:a}=i;return l&&a&&(o.axes||(o.axes=[]),o.axes.push({orient:"radius",visible:!0,zero:!0,nice:!0,grid:{visible:!0},tick:{visible:!0},label:{visible:!0},domainLine:{visible:!0}})),o},o5=[tu([o2,eZ,ew,eO,eE,o4,o8,e$,eY,eq,eU,e4,e8,e3,tQ],[to,ti,ta,tr,tl([o2,eZ,ew,eO,eE,o4,o8,e$,eY,eq,e4,e8,e3,tQ]),td,ts,tp])],o3=()=>{z._advancedPipelineMap.radar=o1,z._specPipelineMap.radar=o5},o7=[U,el,er,ed([oL],[oW]),e=>{let t={...e},{datasetReshapeInfo:o}=e;if(!o)return t;let i=o.reduce((e,t)=>{let{foldInfo:o,unfoldInfo:i}=t,l=[o.measureValue];return[...e,{size:l,group:[i.groupId],color:[o.measureValue]}]},[]);return{...t,encoding:i}},eL,T,eT],o6=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;return l[0].size&&l[0].group&&l[0].color&&(o.type="funnel",o.valueField=l[0].size[0],o.categoryField=l[0].group[0],o.padding=0,o.isTransform=!0,o.shape="rect",o.maxSize="75%",o.minSize="10%",o.region=[{clip:!0}],o.funnel={style:{cornerRadius:4,fill:{field:l[0].color[0],scale:"color"}},state:{hover:{fillOpacity:.6}}},o.transformLabel={visible:!0},o.animation=!0),o},o9=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{datasetReshapeInfo:l,chartType:a,encoding:n}=i,r=i.config[a];if(!r||!r.color)return o;let{color:d}=r,{colorScheme:s}=d;return o.color={type:"linear",domain:[{dataId:l[0].id,fields:n?.[0]?.color}],range:s},o},ie=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{chartType:l}=i,a=i.config[l],{encoding:n}=i;if(!n[0].color||!a||!a.legend)return o;let{legend:r}=a,{enable:d,position:s="bottom"}=r||{},p=["bottom","bottomLeft","bottomRight","bl","br"].includes(s)?"bottom":["top","topLeft","topRight","tl","tr"].includes(s)?"top":["left","leftTop","leftBottom","lt","lb"].includes(s)?"left":"right";return o.legends={type:"color",visible:d,orient:p,position:["topLeft","bottomLeft","leftTop","rightTop","lt","rt","tl","bl"].includes(s)?"start":["topRight","bottomRight","leftBottom","rightBottom","lb","rb","rt","br"].includes(s)?"end":"middle",field:n[0].color[0],inverse:!!["left","right"].includes(p)},o},it=[tu([o6,o9,ew,eO,e$,eY,ie,e6,e9,te,tt],[to,ti,ta,tr,tl([o6,o9,ew,eO,e$,eY,ie,e6,e9,te,tt]),td,ts])],io=()=>{z._advancedPipelineMap.funnel=o7,z._specPipelineMap.funnel=it},ii=[U,el,er,ed([tm],[tb]),e=>{let t={...e},{datasetReshapeInfo:o,dimensions:i}=e;if(!o||!i)return t;let l=i.find(e=>"rowDimension"!==e.location&&"columnDimension"!==e.location)||i[0],a=0===i.length,n=o.reduce((e,t)=>{let{foldInfo:o,unfoldInfo:i}=t,n=[a?o.measureName:l?.id];return[...e,{x:n,y:[i.groupName],color:[o.measureValue]}]},[]);return{...t,encoding:n}},eF,eL,T,eW,eT],il=e=>{let t={...e};return t.label?t.label.smartInvert=!0:t.label={smartInvert:!0},t},ia=(e,t)=>{let o={...e},{advancedVSeed:i}=t,{encoding:l}=i;return l[0].y&&l[0].x&&l[0].color&&(o.type="heatmap",o.direction="vertical",o.xField=l[0].x[0],o.yField=l[0].y[0],o.valueField=l[0].color[0],o.padding=0,o.cell={style:{shape:"rect",stroke:"#ffffff",lineWidth:1,fill:{field:l[0].color[0],scale:"color"}}},o.axes=[{type:"band",orient:"left",bandPadding:0},{type:"band",orient:"bottom",bandPadding:0}],o.region=[{clip:!0}],o.animation=!0),o},ir=[tu([ia,o9,ew,eO,e$,il,ie,eY,e4,e8,e3,e6,e9,te,tt],[to,ti,ta,tr,tl([ia,o9,ew,eO,e$,il,ie,eY,e4,e8,e3,e6,e9,te,tt]),td,ts])],id=()=>{z._advancedPipelineMap.heatmap=ii,z._specPipelineMap.heatmap=ir},is=()=>{let e={nice:!0,zero:!0,inverse:!1,label:{visible:!0,labelAngle:0,labelColor:"#797B85",labelFontSize:12,labelFontWeight:400},title:{visible:!1,titleText:"",titleColor:"#646A73",titleFontSize:12,titleFontWeight:400},grid:{visible:!0,gridColor:"#36415926",gridWidth:.5},tick:{visible:!1,tickInside:!1,tickSize:4,tickColor:"#3641594d"},line:{visible:!1,lineColor:"#3641594d",lineWidth:1}},t={labelAutoHide:!0,labelAutoHideGap:4,labelAutoLimit:!0,labelAutoLimitLength:80,labelAutoRotate:!1,labelAutoRotateAngleRange:[0,-45,-90],label:{visible:!0,labelAngle:0,labelColor:"#797B85",labelFontSize:12,labelFontWeight:400},title:{visible:!1,titleText:"",titleColor:"#646A73",titleFontSize:12,titleFontWeight:400},grid:{visible:!1,gridColor:"#36415926",gridWidth:.5},tick:{visible:!1,tickInside:!1,tickSize:4,tickColor:"#3641594d"},line:{visible:!0,lineColor:"#3641594d",lineWidth:1}},o={...t,labelAutoHide:!1,labelAutoHideGap:1,labelAutoLimit:!1,labelAutoLimitLength:void 0,labelAutoRotate:!1,labelAutoRotateAngleRange:[0,-45,-90]},i={visible:!0,labelVisible:!0,lineColor:"#3641594d",labelColor:"#ffffff",labelBackgroundColor:"#364159"},l={visible:!0,labelVisible:!0,rectColor:"#3641594d",labelColor:"#ffffff",labelBackgroundColor:"#364159"},a={backgroundColor:"transparent",color:{colorScheme:["#8D72F6","#5766EC","#66A3FE","#51D5E6","#4EC0B3","#F9DF90","#F9AD71","#ED8888","#E9A0C3","#D77DD3"]},label:{enable:!0},tooltip:{enable:!0},legend:{enable:!0,border:!0,maxSize:1,shapeType:"rectRound",position:"rt",labelFontColor:"#646A73",labelFontSize:12,labelFontWeight:400}},n={borderColor:"#e3e5eb",bodyFontSize:12,bodyFontColor:"#141414",bodyBackgroundColor:"transparent",headerFontSize:12,headerFontColor:"#21252c",headerBackgroundColor:"#f6f7f9",hoverBodyBackgroundColor:"#bedaff",hoverBodyInlineBackgroundColor:"#bedaff33",hoverHeaderBackgroundColor:"#D9DDE4",hoverHeaderInlineBackgroundColor:"#D9DDE455",selectedBorderColor:"#4080ff",selectedBackgroundColor:"#bedaff33"};return{config:{table:n,pivotTable:n,line:{...a,xAxis:t,yAxis:e,crosshairLine:i},column:{...a,xAxis:t,yAxis:e,crosshairRect:l,stackCornerRadius:[4,4,0,0]},columnParallel:{...a,xAxis:t,yAxis:e,crosshairRect:l,stackCornerRadius:[4,4,0,0]},columnPercent:{...a,xAxis:t,yAxis:e,crosshairRect:l,stackCornerRadius:[4,4,0,0]},bar:{...a,xAxis:e,yAxis:o,crosshairRect:l,stackCornerRadius:[0,4,4,0]},barParallel:{...a,xAxis:e,yAxis:o,crosshairRect:l,stackCornerRadius:[0,4,4,0]},barPercent:{...a,xAxis:e,yAxis:o,crosshairRect:l,stackCornerRadius:[0,4,4,0]},area:{...a,xAxis:t,yAxis:e,crosshairLine:i},areaPercent:{...a,xAxis:t,yAxis:e,crosshairLine:i},areaRange:{...a,xAxis:t,yAxis:e,crosshairLine:i},scatter:{...a,xAxis:{...e,line:{...e.line,visible:!0}},yAxis:{...e,line:{...e.line,visible:!0}},crosshairLine:i},dualAxis:{...a,xAxis:t,primaryYAxis:e,secondaryYAxis:{...e,grid:{visible:!1}},dualChartType:{primary:"column",secondary:"line"},crosshairRect:l},pie:{...a},donut:{...a},radar:{...a},rose:{...a},roseParallel:{...a},funnel:{...a,color:{colorScheme:["#5766EC","#6372F0","#7080F4","#7C8CFA","#8998FF","#95A3FF","#A0AEFF","#ACB9FF","#B7C4FF","#C2CEFF"].reverse()}},heatmap:{...a,color:{colorScheme:["#5766EC","#6372F0","#7080F4","#7C8CFA","#8998FF","#95A3FF","#A0AEFF","#ACB9FF","#B7C4FF","#C2CEFF"].reverse()}}}}},ip=()=>{let e={nice:!0,zero:!0,label:{visible:!0,labelAngle:0,labelColor:"#E2E3E6",labelFontSize:12,labelFontWeight:400},title:{visible:!1,titleText:"",titleColor:"#FDFDFD",titleFontSize:12,titleFontWeight:400},grid:{visible:!0,gridColor:"#404349",gridWidth:.5},tick:{visible:!1,tickInside:!1,tickSize:4,tickColor:"#4B4F54"},line:{visible:!1,lineColor:"#4B4F54",lineWidth:1}},t={labelAutoHide:!0,labelAutoHideGap:4,labelAutoLimit:!0,labelAutoLimitLength:80,labelAutoRotate:!1,labelAutoRotateAngleRange:[0,-45,-90],label:{visible:!0,labelAngle:0,labelColor:"#E2E3E6",labelFontSize:12,labelFontWeight:400},title:{visible:!1,titleText:"",titleColor:"#FDFDFD",titleFontSize:12,titleFontWeight:400},grid:{visible:!1,gridColor:"#404349",gridWidth:.5},tick:{visible:!1,tickInside:!1,tickSize:4,tickColor:"#4B4F54"},line:{visible:!0,lineColor:"#4B4F54",lineWidth:1}},o={...t,labelAutoHide:!1,labelAutoHideGap:1,labelAutoLimit:!1,labelAutoLimitLength:void 0,labelAutoRotate:!1,labelAutoRotateAngleRange:[0,-45,-90]},i={visible:!0,labelVisible:!0,lineColor:"#E2E3E6",labelColor:"#4B4F54",labelBackgroundColor:"#ffffff"},l={visible:!0,labelVisible:!0,lineColor:"#E2E3E6",labelColor:"#4B4F54",labelBackgroundColor:"#ffffff"},a={backgroundColor:"transparent",color:{colorScheme:["#2E62F1","#4DC36A","#FF8406","#FFCC00","#4F44CF","#5AC8FA","#003A8C","#B08AE2","#FF6341","#98DD62"]},label:{enable:!0},tooltip:{enable:!0},legend:{enable:!0,border:!0,maxSize:1,position:"rt",shapeType:"rectRound",labelFontColor:"#FDFDFD",labelFontSize:12,labelFontWeight:400}},n={borderColor:"#4b4e53",bodyFontSize:12,bodyFontColor:"#fdfdfd",bodyBackgroundColor:"transparent",headerFontSize:12,headerFontColor:"#fdfdfd",headerBackgroundColor:"#36393e",hoverBodyBackgroundColor:"#4284ff66",hoverBodyInlineBackgroundColor:"#4284ff10",hoverHeaderBackgroundColor:"#6f7984cc",hoverHeaderInlineBackgroundColor:"#4b4f54",selectedBorderColor:"#3073f2",selectedBackgroundColor:"#4284ff33"};return{config:{table:n,pivotTable:n,line:{...a,xAxis:t,yAxis:e,crosshairLine:i},column:{...a,xAxis:t,yAxis:e,crosshairRect:l,stackCornerRadius:[4,4,0,0]},columnParallel:{...a,xAxis:t,yAxis:e,crosshairRect:l,stackCornerRadius:[4,4,0,0]},columnPercent:{...a,xAxis:t,yAxis:e,crosshairRect:l,stackCornerRadius:[4,4,0,0]},bar:{...a,xAxis:e,yAxis:o,crosshairRect:l,stackCornerRadius:[0,4,4,0]},barParallel:{...a,xAxis:e,yAxis:o,crosshairRect:l,stackCornerRadius:[0,4,4,0]},barPercent:{...a,xAxis:e,yAxis:o,crosshairRect:l,stackCornerRadius:[0,4,4,0]},area:{...a,xAxis:t,yAxis:e,crosshairLine:i},areaPercent:{...a,xAxis:t,yAxis:e,crosshairLine:i},areaRange:{...a,xAxis:t,yAxis:e,crosshairLine:i},scatter:{...a,xAxis:{...e,line:{...e.line,visible:!0}},yAxis:{...e,line:{...e.line,visible:!0}},crosshairLine:i},dualAxis:{...a,xAxis:t,primaryYAxis:e,secondaryYAxis:{...e,grid:{visible:!1}},dualChartType:{primary:"column",secondary:"line"},crosshairRect:l},pie:{...a},donut:{...a},radar:{...a},rose:{...a},roseParallel:{...a},funnel:{...a,color:{colorScheme:["#2E62F1","#3A6EF6","#4780FA","#548CFE","#6198FF","#6FA3FF","#7CACFF","#88B7FF","#94C2FF","#A0CEFF"]}},heatmap:{...a}}}},iu=(e,t)=>{let o="function"==typeof t?t({lightTheme:is(),darkTheme:ip()}):t;z._themeMap[e]=o},ic=()=>{iu("light",is())},ig=()=>{iu("dark",ip())},ih=()=>{N(),q(),tf(),tS(),t_(),tW(),tH(),tj(),tq(),t1(),t8(),or(),og(),o_(),ow(),oH(),oq(),o0(),o3(),io(),id(),ic(),ig()},im=(e,t)=>{z._customAdvancedPipe[e]=t},ib=(e,t)=>{z._customSpecPipe[e]=t},iy=b.Km(["table","pivotTable","line","column","columnPercent","columnParallel","bar","barPercent","barParallel","area","areaPercent","areaRange","scatter","dualAxis","rose","roseParallel","pie","donut","radar","funnel","heatmap"]),ix=b.Ry({primary:b.Km(["line","column","columnParallel","area","scatter"]).default("column"),secondary:b.Km(["line","column","columnParallel","area","scatter"]).default("line")}),iv=b.IM(b.Z_().or(b.Rx()),b.Yj()),iC=b.IX(iv),iR=b.Ry({id:b.Z_(),alias:b.Z_().optional(),location:b.Km(["dimension","rowDimension","columnDimension"]).default("dimension")}),iI=b.Ry({id:b.Z_(),alias:b.Z_().optional(),get children(){return b.IX(iI.or(iR)).optional()}}),iA=b.IX(iR),ik=b.IX(iI.or(iR)),iS=b.Ry({type:b.Km(["number","percent","permille","scientific"]).default("number").optional(),ratio:b.Rx().default(1).optional(),symbol:b.Z_().default("").optional(),thousandSeparator:b.O7().default(!1).optional(),prefix:b.Z_().default("").optional(),suffix:b.Z_().default("").optional(),fractionDigits:b.Rx().default(2).optional(),significantDigits:b.Rx().default(0).optional(),roundingPriority:b.Km(["morePrecision","lessPrecision"]).default("morePrecision").optional(),roundingMode:b.Km(["floor","ceil","halfEven","expand","trunc","halfFloor","halfCeil","halfExpand","halfTrunc"]).default("halfCeil").optional()}).optional(),iF=b.Ry({id:b.Z_(),alias:b.Z_().optional(),autoFormat:b.O7().default(!0),format:iS.default({})}),iz=b.Ry({id:b.Z_(),alias:b.Z_().optional(),get children(){return b.IX(iz.or(iF)).optional()}}),iM=b.IX(iF),i_=b.IX(iz.or(iF)),iP=b.Ry({id:b.Z_(),primaryMeasures:b.IX(iF).or(iF).optional(),secondaryMeasures:b.IX(iF).or(iF).optional()}),iB=b.IX(iP),iL=b.Ry({foldMap:b.IM(b.Z_(),b.Z_().or(b.S1())),measureId:b.Z_(),measureName:b.Z_(),measureValue:b.Z_()}),iW=b.Ry({colorItems:b.IX(b.Z_()),groupId:b.Z_(),colorIdMap:b.IM(b.Z_(),b.Z_()),groupName:b.Z_()}),iT=b.IX(b.Ry({id:b.Z_(),index:b.Rx(),foldInfo:iL,foldInfoList:b.IX(iL).optional(),unfoldInfo:iW})),iX=b.IX(b.Ry({x:b.IX(b.Z_()).optional(),y:b.IX(b.Z_()).optional(),color:b.IX(b.Z_()).optional(),group:b.IX(b.Z_()).optional(),angle:b.IX(b.Z_()).optional(),radius:b.IX(b.Z_()).optional(),tooltip:b.IX(b.Z_()).optional(),size:b.IX(b.Z_()).optional()})),iD=b.Ry({visible:b.O7().default(!0).optional(),labelAutoHide:b.O7().default(!0).optional(),labelAutoHideGap:b.Rx().default(0).optional(),labelAutoRotate:b.O7().default(!0).optional(),labelAutoRotateAngleRange:b.IX(b.Rx()).default([0,-45,-90]).optional(),labelAutoLimit:b.O7().default(!0).optional(),labelAutoLimitLength:b.Rx().default(100).optional(),label:b.Ry({visible:b.O7().default(!0).optional(),labelColor:b.Z_().default("#797B85").optional(),labelFontSize:b.Rx().default(12).optional(),labelFontWeight:b.Rx().default(400).optional(),labelAngle:b.Rx().default(0).optional()}).optional(),line:b.Ry({visible:b.O7().default(!0).optional(),lineColor:b.Z_().default("rgba(54, 65, 89, 0.30)").optional(),lineWidth:b.Rx().default(1).optional()}).optional(),tick:b.Ry({visible:b.O7().default(!0).optional(),tickInside:b.O7().default(!1).optional(),tickColor:b.Z_().default("rgba(54, 65, 89, 0.30)").optional(),tickSize:b.Rx().default(4).optional()}).optional(),title:b.Ry({visible:b.O7().default(!1).optional(),titleText:b.Z_().default("").optional(),titleColor:b.Z_().default("#646A73").optional(),titleFontSize:b.Rx().default(12).optional(),titleFontWeight:b.Rx().default(400).optional()}).optional(),grid:b.Ry({visible:b.O7().default(!1).optional(),gridColor:b.Z_().default("rgba(54, 65, 89, 0.15)").optional(),gridWidth:b.Rx().default(.5).optional()}).optional()}),iZ=iD,iw=b.Ry({visible:b.O7().default(!0).optional(),min:b.Rx().optional(),max:b.Rx().optional(),nice:b.O7().default(!0).optional(),zero:b.O7().default(!0).optional(),log:b.O7().default(!1).optional(),logBase:b.Rx().default(10).optional(),inverse:b.O7().default(!1).optional(),label:b.Ry({visible:b.O7().default(!0).optional(),labelColor:b.Z_().default("#797B85").optional(),labelFontSize:b.Rx().default(12).optional(),labelFontWeight:b.Rx().default(400).optional(),labelAngle:b.Rx().default(0).optional()}).optional(),line:b.Ry({visible:b.O7().default(!0).optional(),lineColor:b.Z_().default("rgba(54, 65, 89, 0.30)").optional(),lineWidth:b.Rx().default(1).optional()}).optional(),tick:b.Ry({visible:b.O7().default(!0).optional(),tickInside:b.O7().default(!1).optional(),tickColor:b.Z_().default("rgba(54, 65, 89, 0.30)").optional(),tickSize:b.Rx().default(4).optional()}).optional(),title:b.Ry({visible:b.O7().default(!1).optional(),titleText:b.Z_().default("").optional(),titleColor:b.Z_().default("#646A73").optional(),titleFontSize:b.Rx().default(12).optional(),titleFontWeight:b.Rx().default(400).optional()}).optional(),grid:b.Ry({visible:b.O7().default(!1).optional(),gridColor:b.Z_().default("rgba(54, 65, 89, 0.15)").optional(),gridWidth:b.Rx().default(.5).optional()}).optional()}),iO=iw,iE=b.Ry({visible:b.O7().optional(),lineColor:b.Z_().optional(),labelColor:b.Z_().optional(),labelVisible:b.O7().optional(),labelBackgroundColor:b.Z_().optional()}),iV=b.Ry({visible:b.O7().optional(),rectColor:b.Z_().optional(),labelColor:b.Z_().optional(),labelVisible:b.O7().optional(),labelBackgroundColor:b.Z_().optional()}),iH=b.Rx().or(b.IX(b.Rx())).default([3,3,0,0]),iN=b.Z_().default("transparent").optional(),iG=b.Ry({colorScheme:b.IX(b.Z_()).optional(),colorMapping:b.IM(b.Z_(),b.Z_()).optional()}),iK=b.Ry({colorScheme:b.IX(b.Z_()).optional()}),ij=b.Ry({enable:b.O7().default(!0).optional()}),i$=b.Ry({enable:b.O7().default(!0).optional(),border:b.O7().default(!0).optional(),maxSize:b.Rx().default(1).optional(),shapeType:b.Km(["circle","cross","diamond","square","arrow","arrow2Left","arrow2Right","wedge","thinTriangle","triangle","triangleUp","triangleDown","triangleRight","triangleLeft","stroke","star","wye","rect","arrowLeft","arrowRight","rectRound","roundLine"]).default("rectRound").optional(),position:b.Km(["left","leftTop","leftBottom","lt","lb","top","topLeft","topRight","tl","tr","right","rightTop","rightBottom","rt","rb","bottom","bottomLeft","bottomRight","bl","br"]).default("bottom").optional(),labelFontSize:b.Rx().default(12).optional(),labelFontColor:b.Z_().default("#fff").optional(),labelFontWeight:b.Rx().or(b.Z_()).default(400).optional()}),iY=b.Ry({position:b.Km(["left","leftTop","leftBottom","lt","lb","top","topLeft","topRight","tl","tr","right","rightTop","rightBottom","rt","rb","bottom","bottomLeft","bottomRight","bl","br"]).default("bottom").optional(),enable:b.O7().default(!0).optional()}),iq=b.Ry({enable:b.O7().default(!0).optional()}),iU=b.Ry({borderColor:b.Z_().optional(),bodyFontSize:b.Rx().optional(),bodyFontColor:b.Z_().optional(),bodyBackgroundColor:b.Z_().optional(),hoverBodyBackgroundColor:b.Z_().optional(),hoverBodyInlineBackgroundColor:b.Z_().optional(),headerFontSize:b.Rx().optional(),headerFontColor:b.Z_().optional(),headerBackgroundColor:b.Z_().optional(),hoverHeaderBackgroundColor:b.Z_().optional(),hoverHeaderInlineBackgroundColor:b.Z_().optional(),selectedBorderColor:b.Z_().optional(),selectedBackgroundColor:b.Z_().optional()}),iJ=iU,iQ=b.Ry({backgroundColor:iN.optional(),label:ij.optional(),color:iG.optional(),tooltip:iq.optional(),legend:i$.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairLine:iE.optional()}),i0=b.Ry({backgroundColor:iN.optional(),label:ij.optional(),color:iG.optional(),tooltip:iq.optional(),legend:i$.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairRect:iV.optional(),stackCornerRadius:iH.optional()}),i1=i0,i2=i0,i4=b.Ry({backgroundColor:iN.optional(),label:ij.optional(),color:iG.optional(),tooltip:iq.optional(),legend:i$.optional(),xAxis:iw.optional(),yAxis:iZ.optional(),crosshairRect:iV.optional(),stackCornerRadius:iH.optional()}),i8=i4,i5=i4,i3=b.Ry({backgroundColor:iN.optional(),label:ij.optional(),color:iG.optional(),tooltip:iq.optional(),legend:i$.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairLine:iE.optional()}),i7=i3,i6=i3,i9=b.Ry({backgroundColor:iN.optional(),label:ij.optional(),color:iG.optional(),tooltip:iq.optional(),legend:i$.optional(),dualChartType:b.IX(ix).or(ix).optional(),primaryYAxis:b.IX(iO).or(iO).optional(),secondaryYAxis:b.IX(iO).or(iO).optional(),xAxis:iD.optional(),crosshairRect:iV.optional()}),le=b.Ry({backgroundColor:iN.optional(),label:ij.optional(),color:iG.optional(),tooltip:iq.optional(),legend:i$.optional(),xAxis:iw.optional(),yAxis:iO.optional(),crosshairLine:iE.optional()}),lt=b.Ry({backgroundColor:iN.optional(),label:ij.optional(),color:iG.optional(),tooltip:iq.optional(),legend:i$.optional()}),lo=lt,li=b.Ry({backgroundColor:iN.optional(),label:ij.optional(),color:iG.optional(),tooltip:iq.optional(),legend:i$.optional()}),ll=li,la=li,ln=li,lr=li,ld=b.Ry({table:iU.optional(),pivotTable:iJ.optional(),line:iQ.optional(),column:i0.optional(),columnParallel:i1.optional(),columnPercent:i2.optional(),bar:i4.optional(),barParallel:i8.optional(),barPercent:i5.optional(),area:i3.optional(),areaPercent:i7.optional(),areaRange:i6.optional(),scatter:le.optional(),dualAxis:i9.optional(),rose:lt.optional(),roseParallel:lo.optional(),pie:li.optional(),donut:ll.optional(),radar:la.optional(),funnel:ln.optional(),heatmap:lr.optional()}),ls=b.Ry({visible:b.O7().default(!0).optional(),min:b.Rx().optional(),max:b.Rx().optional(),nice:b.O7().default(!0).optional(),zero:b.O7().default(!0).optional(),inverse:b.O7().default(!1).optional(),log:b.O7().default(!1).optional(),logBase:b.Rx().default(10).optional(),labelAutoHide:b.O7().default(!0).optional(),labelAutoHideGap:b.Rx().default(4).optional(),labelAutoRotate:b.O7().default(!0).optional(),labelAutoRotateAngleRange:b.IX(b.Rx()).default([0,-45,-90]).optional(),labelAutoLimit:b.O7().default(!0).optional(),labelAutoLimitLength:b.Rx().default(100).optional(),label:b.Ry({visible:b.O7().default(!0).optional(),labelColor:b.Z_().default("#797B85").optional(),labelFontSize:b.Rx().default(12).optional(),labelFontWeight:b.Rx().default(400).optional(),labelAngle:b.Rx().default(0).optional()}).optional(),line:b.Ry({visible:b.O7().default(!0).optional(),lineColor:b.Z_().default("rgba(54, 65, 89, 0.30)").optional(),lineWidth:b.Rx().default(1).optional()}).optional(),tick:b.Ry({visible:b.O7().default(!0).optional(),tickInside:b.O7().default(!1).optional(),tickColor:b.Z_().default("rgba(54, 65, 89, 0.30)").optional(),tickSize:b.Rx().default(4).optional()}).optional(),title:b.Ry({visible:b.O7().default(!1).optional(),titleText:b.Z_().default("").optional(),titleColor:b.Z_().default("#646A73").optional(),titleFontSize:b.Rx().default(12).optional(),titleFontWeight:b.Rx().default(400).optional()}).optional(),grid:b.Ry({visible:b.O7().default(!1).optional(),gridColor:b.Z_().default("rgba(54, 65, 89, 0.15)").optional(),gridWidth:b.Rx().default(.5).optional()}).optional()}),lp=b.Ry({config:ld.optional()}),lu=b.IM(b.Z_(),lp).optional(),lc=b.Z_(),lf=b.G0([b.Z_(),b.Rx(),b.Ry({field:b.Z_(),operator:b.Km(["=","==","!=",">","<",">=","<=","between"]).optional(),op:b.Km(["=","==","!=",">","<",">=","<=","between"]).optional(),value:b.G0([b.Z_(),b.Rx(),b.IX(b.G0([b.Z_(),b.Rx()]))])}),b.Ry({field:b.Z_(),operator:b.Km(["in","not in"]).optional(),op:b.Km(["in","not in"]).optional(),value:b.G0([b.Z_(),b.Rx(),b.IX(b.G0([b.Z_(),b.Rx()]))])})]),lg=b.IX(lf),lh=b.Ry({selector:b.G0([lf,lg]).optional(),barColor:b.Z_().optional(),barColorOpacity:b.Rx().optional(),barBorderColor:b.Z_().optional(),barBorderWidth:b.Rx().optional(),barBorderStyle:b.G0([b.i0("solid"),b.i0("dashed"),b.i0("dotted")]).optional(),barRadius:b.G0([b.Rx(),b.IX(b.Rx())]).optional()}),lm=b.Ry({selector:b.G0([lf,lg]).optional(),pointSize:b.Rx().optional(),pointColor:b.Z_().optional(),pointColorOpacity:b.Rx().optional(),pointBorderColor:b.Z_().optional(),pointBorderWidth:b.Rx().optional(),pointBorderStyle:b.G0([b.Km(["solid","dashed","dotted"])]).optional()}),lb=b.Ry({selector:b.G0([lf,lg]).optional(),lineSmooth:b.O7().optional(),lineColor:b.Z_().optional(),lineColorOpacity:b.Rx().optional(),lineWidth:b.Rx().optional(),lineStyle:b.G0([b.Km(["solid","dashed","dotted"])]).optional()}),ly=b.Ry({selector:b.G0([lf,lg]).optional(),areaColor:b.Z_().optional(),areaColorOpacity:b.Rx().optional()}),lx=b.Ry({barStyle:lh.or(b.IX(lh)).optional(),pointStyle:lm.or(b.IX(lm)).optional(),lineStyle:lb.or(b.IX(lb)).optional(),areaStyle:ly.or(b.IX(ly)).optional()}),lv=b.Ry({selector:b.G0([lf,lg]),text:b.Z_().or(b.IX(b.Z_())).optional(),textColor:b.Z_().default("#ffffff").optional(),textFontSize:b.Rx().default(12).optional(),textFontWeight:b.Rx().default(400).optional(),textAlign:b.Km(["left","right","center"]).default("center").optional(),textBaseline:b.Km(["top","middle","bottom"]).default("middle").optional(),backgroundVisible:b.O7().default(!0).optional(),backgroundColor:b.Z_().default("#212121").optional(),backgroundBorderColor:b.Z_().optional(),backgroundBorderWidth:b.Rx().default(1).optional(),backgroundBorderRadius:b.Rx().default(4).optional(),backgroundPadding:b.Rx().optional(),offsetY:b.Rx().default(0).optional(),offsetX:b.Rx().default(0).optional()}),lC=b.Ry({selector:b.G0([lf,lg]).optional(),xValue:b.G0([b.Rx(),b.Z_(),b.IX(b.G0([b.Rx(),b.Z_()]))]).optional(),text:b.Z_().or(b.IX(b.Z_())).optional(),textPosition:b.Km(["outsideStart","outsideEnd","outsideMiddle","insideStart","insideMiddle","insideEnd"]).default("insideEnd").optional(),textColor:b.Z_().default("#ffffff").optional(),textFontSize:b.Rx().default(12).optional(),textFontWeight:b.Rx().default(400).optional(),textAlign:b.Km(["left","right","center"]).default("right").optional(),textBaseline:b.Km(["top","middle","bottom"]).default("top").optional(),lineVisible:b.O7().default(!0).optional(),lineColor:b.Z_().default("#212121").optional(),lineWidth:b.Rx().default(1).optional(),lineStyle:b.G0([b.i0("solid"),b.i0("dashed"),b.i0("dotted")]).default("dashed").optional(),backgroundVisible:b.O7().default(!0).optional(),backgroundColor:b.Z_().default("#212121").optional(),backgroundBorderColor:b.Z_().default("#212121").optional(),backgroundBorderRadius:b.Rx().default(4).optional(),backgroundBorderWidth:b.Rx().default(1).optional(),backgroundPadding:b.Rx().default(2).optional(),offsetX:b.Rx().default(0),offsetY:b.Rx().default(0)}),lR=b.Ry({selector:b.G0([lf,lg]).optional(),yValue:b.G0([b.Rx(),b.Z_(),b.IX(b.G0([b.Rx(),b.Z_()]))]).optional(),text:b.Z_().or(b.IX(b.Z_())).optional(),textPosition:b.Km(["outsideStart","outsideEnd","outsideMiddle","insideStart","insideMiddle","insideEnd"]).default("insideEnd").optional(),textColor:b.Z_().default("#ffffff").optional(),textFontSize:b.Rx().default(12).optional(),textFontWeight:b.Rx().default(400).optional(),textAlign:b.Km(["left","right","center"]).default("right").optional(),textBaseline:b.Km(["top","middle","bottom"]).default("top").optional(),lineVisible:b.O7().default(!0).optional(),lineColor:b.Z_().default("#212121").optional(),lineWidth:b.Rx().default(1).optional(),lineStyle:b.G0([b.i0("solid"),b.i0("dashed"),b.i0("dotted")]).default("dashed").optional(),backgroundVisible:b.O7().default(!0).optional(),backgroundColor:b.Z_().default("#212121").optional(),backgroundBorderColor:b.Z_().default("#212121").optional(),backgroundBorderRadius:b.Rx().default(4).optional(),backgroundBorderWidth:b.Rx().default(1).optional(),backgroundPadding:b.Rx().default(2).optional(),offsetX:b.Rx().default(0),offsetY:b.Rx().default(0)}),lI=b.Ry({selector:b.G0([lf,lg]),textPosition:b.Km(["top","topRight","topLeft","bottom","bottomLeft","bottomRight","left","right"]).default("top").optional(),text:b.Z_().or(b.IX(b.Z_())).optional(),textColor:b.Z_().default("#ffffff").optional(),textFontSize:b.Rx().default(12).optional(),textFontWeight:b.Rx().default(400).optional(),textAlign:b.Km(["left","right","center"]).default("center").optional(),textBaseline:b.Km(["top","middle","bottom"]).default("top").optional(),backgroundVisible:b.O7().default(!0).optional(),backgroundColor:b.Z_().default("#191d24").optional(),backgroundBorderColor:b.Z_().default("#191d24").optional(),backgroundBorderWidth:b.Rx().default(1).optional(),backgroundBorderRadius:b.Rx().default(4).optional(),backgroundPadding:b.Rx().default(4).optional(),areaColor:b.Z_().default("#888888").optional(),areaColorOpacity:b.Rx().default(.15).optional(),areaBorderColor:b.Z_().default("#888888").optional(),areaBorderWidth:b.Rx().default(1).optional(),areaBorderRadius:b.Rx().default(4).optional(),outerPadding:b.Rx().default(4).optional(),offsetX:b.Rx().default(0).optional(),offsetY:b.Rx().default(0).optional()}),lA=b.Ry({annotationPoint:lv.or(b.IX(lv)).optional(),annotationVerticalLine:lC.or(b.IX(lC)).optional(),annotationHorizontalLine:lR.or(b.IX(lR)).optional(),annotationArea:lI.or(b.IX(lI)).optional()}),lk=b.Ry({order:b.Km(["asc","desc"]).default("asc"),orderBy:b.Z_().optional(),customOrder:b.IX(b.Yj()).optional()}),lS=b.Ry({order:b.Km(["asc","desc"]).default("asc"),orderBy:b.Z_().optional(),customOrder:b.IX(b.Yj()).optional()}),lF=b.Ry({orderMapping:b.IM(b.Z_(),b.IX(b.Z_())).optional()}),lz=b.Km(["zh-CN","en-US"]).default("zh-CN"),lM=b.Ry({chartType:b.i0("table"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),theme:lc.optional(),locale:lz.optional()}),l_=b.Ry({chartType:b.i0("pivotTable"),dataset:iC.optional(),dimensions:iA.optional(),measures:iM.optional(),backgroundColor:iN.optional(),theme:lc.optional(),locale:lz.optional()}),lP=b.Ry({chartType:b.i0("line"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairLine:iE.optional(),sort:lk.optional(),sortLegend:lS.optional(),theme:lc.optional(),pointStyle:b.IX(lm).or(lm).optional(),lineStyle:b.IX(lb).or(lb).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lB=b.Ry({chartType:b.i0("column"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairRect:iV.optional(),stackCornerRadius:iH.optional(),theme:lc.optional(),barStyle:b.IX(lh).or(lh).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lL=b.Ry({chartType:b.i0("columnParallel"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairRect:iV.optional(),stackCornerRadius:iH.optional(),theme:lc.optional(),barStyle:b.IX(lh).or(lh).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lW=b.Ry({chartType:b.i0("columnPercent"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairRect:iV.optional(),stackCornerRadius:iH.optional(),theme:lc.optional(),barStyle:b.IX(lh).or(lh).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lT=b.Ry({chartType:b.i0("bar"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iw.optional(),yAxis:iZ.optional(),crosshairRect:iV.optional(),stackCornerRadius:iH.optional(),theme:lc.optional(),barStyle:b.IX(lh).or(lh).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lX=b.Ry({chartType:b.i0("barParallel"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iw.optional(),yAxis:iZ.optional(),crosshairRect:iV.optional(),stackCornerRadius:iH.optional(),theme:lc.optional(),barStyle:b.IX(lh).or(lh).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lD=b.Ry({chartType:b.i0("barPercent"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iw.optional(),yAxis:iZ.optional(),crosshairRect:iV.optional(),stackCornerRadius:iH.optional(),theme:lc.optional(),barStyle:b.IX(lh).or(lh).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lZ=b.Ry({chartType:b.i0("area"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairLine:iE.optional(),theme:lc.optional(),pointStyle:b.IX(lm).or(lm).optional(),lineStyle:b.IX(lb).or(lb).optional(),areaStyle:b.IX(ly).or(ly).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lw=b.Ry({chartType:b.i0("areaPercent"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairLine:iE.optional(),theme:lc.optional(),pointStyle:b.IX(lm).or(lm).optional(),lineStyle:b.IX(lb).or(lb).optional(),areaStyle:b.IX(ly).or(ly).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lO=b.Ry({chartType:b.i0("areaRange"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),label:ij.optional(),xAxis:iD.optional(),yAxis:iO.optional(),crosshairLine:iE.optional(),theme:lc.optional(),pointStyle:b.IX(lm).or(lm).optional(),lineStyle:b.IX(lb).or(lb).optional(),areaStyle:b.IX(ly).or(ly).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lE=b.Ry({chartType:b.i0("scatter"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),xAxis:iw.optional(),yAxis:iO.optional(),crosshairLine:iE.optional(),theme:lc.optional(),pointStyle:b.IX(lm).or(lm).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lV=b.Ry({chartType:b.i0("dualAxis"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),dualMeasures:iB.optional(),dualChartType:b.IX(ix).or(ix).optional(),primaryYAxis:b.IX(iO).or(iO).optional(),secondaryYAxis:b.IX(iO).or(iO).optional(),xAxis:iD.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),crosshairRect:iV.optional(),sort:lk.optional(),sortLegend:lS.optional(),theme:lc.optional(),barStyle:b.IX(lh).or(lh).optional(),pointStyle:b.IX(lm).or(lm).optional(),lineStyle:b.IX(lb).or(lb).optional(),areaStyle:b.IX(ly).or(ly).optional(),annotationPoint:b.IX(lv).or(lv).optional(),annotationVerticalLine:b.IX(lC).or(lC).optional(),annotationHorizontalLine:b.IX(lR).or(lR).optional(),annotationArea:b.IX(lI).or(lI).optional(),locale:lz.optional()}),lH=b.Ry({chartType:b.i0("rose"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),theme:lc.optional(),locale:lz.optional()}),lN=b.Ry({chartType:b.i0("roseParallel"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),theme:lc.optional(),locale:lz.optional()}),lG=b.Ry({chartType:b.i0("pie"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),theme:lc.optional(),locale:lz.optional()}),lK=b.Ry({chartType:b.i0("donut"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),theme:lc.optional(),locale:lz.optional()}),lj=b.Ry({chartType:b.i0("radar"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iG.optional(),label:ij.optional(),legend:i$.optional(),tooltip:iq.optional(),theme:lc.optional(),locale:lz.optional()}),l$=b.Ry({chartType:b.i0("funnel"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iK.optional(),label:ij.optional(),legend:iY.optional(),tooltip:iq.optional(),theme:lc.optional(),locale:lz.optional()}),lY=b.Ry({chartType:b.i0("heatmap"),dataset:iC.optional(),dimensions:iA.optional(),measures:i_.optional(),backgroundColor:iN.optional(),color:iK.optional(),label:ij.optional(),legend:iY.optional(),tooltip:iq.optional(),theme:lc.optional(),locale:lz.optional()}),lq=b.VK("chartType",[lM,l_,lP,lB,lL,lW,lT,lX,lD,lZ,lw,lO,lE,lV,lG,lK,lH,lN,lj,l$,lY]),lU=b.Ry({chartType:iy,dataset:iC,datasetReshapeInfo:iT,dimensions:ik,measures:i_,encoding:iX,config:ld,analysis:lF,theme:lc,markStyle:lx,customTheme:lp,annotation:lA,locale:lz})}}]);
//# sourceMappingURL=5199.bf141833.js.map