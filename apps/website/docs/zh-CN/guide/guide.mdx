---
pageType: doc
---

# 功能介绍

## 图表类型切换

```tsx direction=vertical
import { useRef, useEffect, useState } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)
  const [chartType, setChartType] = useState('line')
  const chartTypes = [
    'line',
    'column',
    'columnPercent',
    'columnParallel',
    'bar',
    'barPercent',
    'barParallel',
    'area',
    'areaPercent',
    'rose',
    'roseParallel',
    'pie',
    'donut',
    'funnel'
  ]

  const changeChartType = (c) => () => {
    setChartType(c)
  }

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType,
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
      ],
    }
    const builder = Builder.from(vseed)
    const spec = builder.build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()
    return () => vchart.release()
  }, [chartType])

  return (
    <div style={{ display: 'flex', flexDirection: 'column' }}>
      <div>
        {chartTypes.map((d) => {
          return (
            <span key={d} style={{ margin: '0 2px' }}>
              <button
                onClick={changeChartType(d)}
                style={{ fontSize: 10, padding: '0 2px', border: '1px solid #cccccc' }}
              >
                {d}
              </button>
            </span>
          )
        })}
      </div>
      <div ref={ref} style={{ height: 260, width: '100%' }}></div>
    </div>
  )
}

export default Demo
```

## 数据重塑

```tsx direction=vertical
import { useRef, useEffect, useState } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)
  const datasetList = [
    // 单指标零维度
    [{ profit: 10 }],
    // 单指标单维度
    [
      { date: '2019', profit: 10 },
      { date: '2020', profit: 30 },
      { date: '2021', profit: 30 },
      { date: '2022', profit: 50 },
      { date: '2023', profit: 40 },
    ],
    // 单指标多维度
    [
      { date: '2019', region: 'east', city: 'A', profit: 10 },
      { date: '2019', region: 'east', city: 'B', profit: 30 },
      { date: '2019', region: 'east', city: 'C', profit: 30 },
      { date: '2019', region: 'east', city: 'D', profit: 50 },
      { date: '2019', region: 'east', city: 'E', profit: 40 },

      { date: '2020', region: 'north of east', city: 'A', profit: 10 },
      { date: '2020', region: 'north of east', city: 'B', profit: 30 },
      { date: '2020', region: 'north of east', city: 'C', profit: 30 },
      { date: '2020', region: 'north of east', city: 'D', profit: 50 },
      { date: '2020', region: 'north of east', city: 'E', profit: 40 },
    ],
    // 多指标零维度
    [{ profit: 1, sales: 2, discount: 0.1 }],
    // 多指标单维度
    [
      { date: '2019', profit: 10, sales: 20, discount: 0.1 },
      { date: '2020', profit: 30, sales: 60, discount: 0.1 },
      { date: '2021', profit: 30, sales: 60, discount: 0.1 },
      { date: '2022', profit: 50, sales: 100, discount: 0.1 },
      { date: '2023', profit: 40, sales: 80, discount: 0.1 },
    ],
    // 多指标多维度
    [
      { date: '2019', region: 'east', city: 'A', profit: 10, sales: 20, discount: 0.1 },
      { date: '2019', region: 'east', city: 'B', profit: 30, sales: 60, discount: 0.1 },
      { date: '2019', region: 'east', city: 'C', profit: 30, sales: 60, discount: 0.1 },
      { date: '2019', region: 'east', city: 'D', profit: 50, sales: 100, discount: 0.1 },
      { date: '2019', region: 'east', city: 'E', profit: 40, sales: 80, discount: 0.1 },

      { date: '2020', region: 'north of east', city: 'A', profit: 10, sales: 20, discount: 0.1 },
      { date: '2020', region: 'north of east', city: 'B', profit: 30, sales: 60, discount: 0.1 },
      { date: '2020', region: 'north of east', city: 'C', profit: 30, sales: 60, discount: 0.1 },
      { date: '2020', region: 'north of east', city: 'D', profit: 50, sales: 100, discount: 0.1 },
      { date: '2020', region: 'north of east', city: 'E', profit: 40, sales: 80, discount: 0.1 },
    ],
  ]

  const chartTypes = [
    'line',
    'column',
    'columnPercent',
    'columnParallel',
    'bar',
    'barPercent',
    'barParallel',
    'area',
    'areaPercent',
    'rose',
    'roseParallel',
    'pie',
    'donut',
    'funnel',
  ]

  const [chartType, setChartType] = useState('columnParallel')
  const [dataset, setDataset] = useState(datasetList[1])
  const builderRef = useRef(null)
  const changeDataset = (c) => () => {
    setDataset(c)
  }

  const changeChartType = (c) => () => {
    setChartType(c)
  }

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType,
      dataset,
      legend: {
        position: 'bottom',
      },
    }

    const builder = Builder.from(vseed)
    const spec = builder.build()
    builderRef.current = builder
    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  }, [dataset, chartType])

  return (
    <div
      style={{ display: 'flex', flexDirection: 'column' }}
      onClick={() => {
        console.group(`selected ${chartType}`)
        console.log('builder', builderRef.current)
        console.log('spec', builderRef.current.spec)
        console.log('vseed', builderRef.current.vseed)
        console.log('advancedVSeed', builderRef.current.advancedVSeed)
        console.groupEnd()
      }}
    >
      <div>
        {datasetList.map((d, index) => {
          return (
            <span key={index} style={{ margin: '0 2px' }}>
              <button
                onClick={changeDataset(d)}
                style={{ fontSize: 10, padding: '0 2px', border: '1px solid #cccccc' }}
              >
                {`dataset` + (index + 1)}
              </button>
            </span>
          )
        })}
      </div>
      <div>
        {chartTypes.map((d) => {
          return (
            <span key={d} style={{ margin: '0 2px' }}>
              <button
                onClick={changeChartType(d)}
                style={{ fontSize: 10, padding: '0 2px', border: '1px solid #cccccc' }}
              >
                {d}
              </button>
            </span>
          )
        })}
      </div>

      <div ref={ref} style={{ height: 260, width: '100%' }}></div>
    </div>
  )
}

export default Demo
```

## 数据格式

```tsx direction=vertical
import { useDark } from 'rspress/runtime'

import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder, isPivotChart, isVChart, isVTable } from '@visactor/vseed'
import { ListTable, PivotChart, register } from '@visactor/vtable'

registerAll()
register.chartModule('vchart', VChart)

const Demo = () => {
  const vseed: VSeed = {
    chartType: 'columnParallel',
    measures: [
      {
        id: 'profit',
        alias: '利润',
        autoFormat: false,
        format: {
          type: 'number',
          ratio: 1000,
          thousandSeparator: true,
          decimalPlaces: 0,
          symbol: '千',
          prefix: '利润',
          suffix: '$',
        },
      },
      {
        id: 'sales',
        alias: '销售额',
        autoFormat: true,
      },
    ],
    dimensions: [{ id: 'date', alias: '日期', location: 'dimension' }],
    dataset: [
      { date: '2019', profit: 10000, sales: 200000, discount: 0.5, rateOfReturn: 0.001 },
      { date: '2020', profit: 20000, sales: 400000, discount: 0.2, rateOfReturn: 0.002 },
      { date: '2021', profit: 30000, sales: 600000, discount: 0.4, rateOfReturn: 0.003 },
      { date: '2022', profit: 40000, sales: 800000, discount: 0.2, rateOfReturn: 0.004 },
      { date: '2023', profit: 50000, sales: 1000000, discount: 0.05, rateOfReturn: 0.005 },
    ],
  }

  return <SimpleVSeedRender vseed={vseed} />
}

const SimpleVSeedRender = (props: { vseed: VSeed }) => {
  const { vseed } = props
  const ref = useRef<HTMLDivElement>(null)
  const dark = useDark()
  useEffect(() => {
    if (!ref.current) {
      return
    }
    const theme = dark ? 'dark' : 'light'
    const spec = Builder.from({ ...vseed, theme }).build()

    if (isPivotChart(vseed)) {
      const tableInstance = new PivotChart(ref.current, spec)
      return () => tableInstance.release()
    } else if (isVChart(vseed)) {
      const vchart = new VChart(spec, { dom: ref.current })
      vchart.renderSync()
      return () => vchart.release()
    } else if (isVTable(vseed)) {
      const tableInstance = new ListTable(ref.current, spec)
      return () => tableInstance.release()
    }
  }, [vseed, dark])

  return <div ref={ref} style={{ height: 300, width: '100%' }}></div>
}

export default Demo
```

## 透视与组合

### 指标分组

```tsx direction=vertical
import { useRef, useEffect, memo } from 'react'
import VChart from '@visactor/vchart'
import { register, PivotChart, PivotChartConstructorOptions } from '@visactor/vtable'
import { registerAll, VSeed, Builder, UnfoldDimensionGroupId } from '@visactor/vseed'

register.chartModule('vchart', VChart)
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'line',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
      ],
      dimensions: [{ id: 'date', alias: '日期' }],
      measures: [
        {
          id: 'profit-group',
          children: [{ id: 'profit', alias: '利润' }],
        },
        {
          id: 'sales-group',
          children: [{ id: 'sales', alias: '销售额' }],
        },
      ],
    }

    const builder = Builder.from(vseed)
    const spec = builder.build()

    const tableInstance = new PivotChart(ref.current, spec)

    tableInstance.on('legend_item_click', (args) => {
      console.log('LEGEND_ITEM_CLICK', args)
      tableInstance.updateFilterRules([
        {
          filterKey: UnfoldDimensionGroupId,
          filteredValues: args.value,
        },
      ])
    })

    return () => tableInstance.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

### 行列透视

```tsx direction=vertical
import { useRef, useEffect, memo } from 'react'
import VChart from '@visactor/vchart'
import { register, PivotChart, PivotChartConstructorOptions } from '@visactor/vtable'
import { registerAll, VSeed, Builder, UnfoldDimensionGroupId } from '@visactor/vseed'

register.chartModule('vchart', VChart)
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'column',
      dataset: [
        { date: '2019', category: 'food', profit: 10, sales: 88 },
        { date: '2019', category: 'book', profit: 33, sales: 210 },
        { date: '2019', category: 'tools', profit: 27, sales: 150 },

        { date: '2020', category: 'food', profit: 10, sales: 100 },
        { date: '2020', category: 'book', profit: 11, sales: 122 },
        { date: '2020', category: 'tools', profit: 23, sales: 150 },

        { date: '2021', category: 'food', profit: 10, sales: 100 },
        { date: '2021', category: 'book', profit: 30, sales: 190 },
        { date: '2021', category: 'tools', profit: 15, sales: 50 },
      ],
      dimensions: [
        { id: 'date', alias: '日期' },
        { id: 'category', alias: '类型', location: 'columnDimension' },
      ],
      measures: [
        {
          id: 'profit-group',
          children: [{ id: 'profit', alias: '利润' }],
        },
        {
          id: 'sales-group',
          children: [{ id: 'sales', alias: '销售额' }],
        },
      ],
    }

    const builder = Builder.from(vseed)
    const spec = builder.build()

    const tableInstance = new PivotChart(ref.current, spec)

    tableInstance.on('legend_item_click', (args) => {
      console.log('LEGEND_ITEM_CLICK', args)
      tableInstance.updateFilterRules([
        {
          filterKey: UnfoldDimensionGroupId,
          filteredValues: args.value,
        },
      ])
    })

    return () => tableInstance.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

## 条件样式

### 矩形图元样式

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'column',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      barStyle: [
        {
          barRadius: 10,
          barColorOpacity: 0.25,
        },
        {
          selector: {
            field: 'sales',
            op: '>',
            value: 400,
          },
          // selector: {
          //   field: 'sales',
          //   op: '>=',
          //   value: 400,
          // },
          // selector: 30,
          // selector: [40,30,50],
          // selector: { date:"2019" },
          // selector: [{ date:"2019" },{ date:"2020", profit: 30 }],
          barColorOpacity: 1,
          barRadius: 0,
        },
      ],
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

### 点图元样式

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'line',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      pointStyle: [
        {
          pointSize: 10,
          pointColorOpacity: 0.25,
        },
        {
          selector: {
            field: 'profit',
            op: '>',
            value: 40,
          },
          // selector: {
          //   field: 'sales',
          //   op: '>=',
          //   value: 400,
          // },
          // selector: 30,
          // selector: [40,30,50],
          // selector: { date:"2019" },
          // selector: [{ date:"2019" },{ date:"2020", profit: 30 }],
          pointColorOpacity: 1,
          pointSize: 20,
        },
      ],
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

### 线图元样式

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'line',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      lineStyle: [
        {
          lineWidth: 2,
          lineColorOpacity: 0.25,
          lineSmooth: true,
        },
        {
          selector: {
            field: 'profit',
            op: '>',
            value: 40,
          },
          // selector: {
          //   field: 'sales',
          //   op: '>=',
          //   value: 400,
          // },
          // selector: 30,
          // selector: [40,30,50],
          // selector: { date:"2019" },
          // selector: [{ date:"2019" },{ date:"2020", profit: 30 }],
          lineColorOpacity: 1,
          lineWidth: 5,
        },
      ],
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

### 面图元样式

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'area',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      areaStyle: [
        {
          areaColorOpacity: 0.2,
        },
        {
          selector: {
            field: 'profit',
            op: '>',
            value: 40,
          },
          // selector: {
          //   field: 'sales',
          //   op: '>=',
          //   value: 400,
          // },
          // selector: 30,
          // selector: [40,30,50],
          // selector: { date:"2019" },
          // selector: [{ date:"2019" },{ date:"2020", profit: 30 }],
          areaColorOpacity: 1,
        },
      ],
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

## 标注

### 数据点标注

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'area',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      annotationPoint: {
        selector: {
          field: 'profit',
          op: '>',
          value: 10,
        },
        // selector: {
        //   field: 'sales',
        //   op: '>=',
        //   value: 400,
        // },
        // selector: 30,
        // selector: [40,30,50],
        // selector: { date:"2019" },
        // selector: [{ date:"2019" },{ date:"2020", profit: 30 }],

        text: '数据点标注',
      },
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

### 数据水平线标注

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'area',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      annotationHorizontalLine: {
        yValue: 170,
        text: '利润 70',
      },
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

### 数据垂直线标注

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'columnParallel',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      annotationVerticalLine: {
        selector: '2023',
        text: '23年',
      },
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

### 数据区域标注

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'columnParallel',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      annotationArea: {
        selector: [{ date: '2022' }, { date: '2023' }],
        text: '22~23年',
        textPosition: 'top',
        textAlign: 'center',
      },
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

## 跨平台渲染

:::tip
`vseed`支持无损序列化, 因此可以`跨平台传输`, `复制粘贴`, 在Node环境、浏览器环境, 都可以直接通过`builder`获取到完整的spec
:::

```tsx direction=vertical
import { useRef, useEffect, useState } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const [vseed, setVSeed] = useState()
  const ref = useRef()
  const chartRef = useRef()
  const vseed1: VSeed = {
    chartType: 'line',
    dataset: [
      { date: '2019', profit: 10, sales: 100 },
      { date: '2020', profit: 30, sales: 200 },
      { date: '2021', profit: 30, sales: 300 },
      { date: '2022', profit: 50, sales: 400 },
      { date: '2023', profit: 40, sales: 500 },
    ],
  }

  const vseed2: VSeed = {
    chartType: 'bar',
    dataset: [
      { date: '2019', profit: 10, sales: 100 },
      { date: '2020', profit: 30, sales: 200 },
      { date: '2021', profit: 30, sales: 300 },
      { date: '2022', profit: 50, sales: 400 },
      { date: '2023', profit: 40, sales: 500 },
    ],
  }

  const copyVSeed1 = async () => {
    await navigator.clipboard.writeText(JSON.stringify(vseed1))
  }
  const copyVSeed2 = async () => {
    await navigator.clipboard.writeText(JSON.stringify(vseed2))
  }

  const paste = async () => {
    try {
      if (chartRef.current) {
        chartRef.current.release()
      }
      const clipboardText = await navigator.clipboard.readText()
      const parsedVSeed = JSON.parse(clipboardText)

      const builder = Builder.from(parsedVSeed)
      const advancedVSeed = builder.buildAdvanced()
      const spec = builder.buildSpec(advancedVSeed)
      const vchart = new VChart(spec, { dom: ref.current })
      vchart.renderSync()

      chartRef.current = vchart
    } catch (error) {
      console.log('debug', error)
      alert('从剪切板读取内容时出错')
    }
  }

  return (
    <div style={{ display: 'flex' }}>
      <div style={{ width: 100 }}>
        <button onClick={copyVSeed1} style={{ width: 100, marginBottom: 4 }}>
          copy demo1
        </button>
        <button onClick={copyVSeed2} style={{ width: 100, marginBottom: 4 }}>
          copy demo2
        </button>
        <button onClick={paste} style={{ width: 100 }}>
          paste
        </button>
      </div>

      <div ref={ref} style={{ height: 260, width: 'calc(100% - 100px)' }}></div>
    </div>
  )
}

export default Demo
```

## 分离式构建

:::tip
通常情况下, 图表的数据处理比较耗时, VSeed支持拆分数据处理与数据渲染, `build`提供`buildAdvanced`和`buildSpec`进行分离式构建
:::

```tsx pure title=分离式构建 {4,7}
const builder = Builder.from(vseed)

// Node.js
const advancedVSeed = builder.buildAdvanced()

// Web Browser
const spec = builder.buildSpec(advancedVSeed)

// spec用于渲染
```

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'line',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
      ],
    }
    const builder = Builder.from(vseed)
    const advancedVSeed = builder.buildAdvanced()
    const spec = builder.buildSpec(advancedVSeed)

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

## 国际化

```tsx direction=vertical
import { useDark } from 'rspress/runtime'

import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder, isPivotChart, isVChart, isVTable } from '@visactor/vseed'
import { ListTable, PivotChart, register } from '@visactor/vtable'

registerAll()
register.chartModule('vchart', VChart)

const Demo = () => {
  const vseed: VSeed = {
    chartType: 'columnParallel',
    locale: 'en-US',
    measures: [
      {
        id: 'profit',
        alias: '利润',
        autoFormat: true,
      },
      {
        id: 'sales',
        alias: '销售额',
        autoFormat: true,
      },
      {
        id: 'discount',
        alias: '折扣',
        autoFormat: true,
      },
      {
        id: 'rateOfReturn',
        alias: '回报率',
        autoFormat: true,
      },
    ],
    dimensions: [{ id: 'date', alias: '日期', location: 'dimension' }],
    dataset: [
      { date: '2019', profit: 10000, sales: 200000, discount: 0.5, rateOfReturn: 0.001 },
      { date: '2020', profit: 20000, sales: 400000, discount: 0.2, rateOfReturn: 0.002 },
      { date: '2021', profit: 30000, sales: 600000, discount: 0.4, rateOfReturn: 0.003 },
      { date: '2022', profit: 40000, sales: 800000, discount: 0.2, rateOfReturn: 0.004 },
      { date: '2023', profit: 50000, sales: 1000000, discount: 0.05, rateOfReturn: 0.005 },
    ],
  }

  return <SimpleVSeedRender vseed={vseed} />
}

const SimpleVSeedRender = (props: { vseed: VSeed }) => {
  const { vseed } = props
  const ref = useRef<HTMLDivElement>(null)
  const dark = useDark()
  useEffect(() => {
    if (!ref.current) {
      return
    }
    const theme = dark ? 'dark' : 'light'
    const spec = Builder.from({ ...vseed, theme }).build()

    if (isPivotChart(vseed)) {
      const tableInstance = new PivotChart(ref.current, spec)
      return () => tableInstance.release()
    } else if (isVChart(vseed)) {
      const vchart = new VChart(spec, { dom: ref.current })
      vchart.renderSync()
      return () => vchart.release()
    } else if (isVTable(vseed)) {
      const tableInstance = new ListTable(ref.current, spec)
      return () => tableInstance.release()
    }
  }, [vseed, dark])

  return <div ref={ref} style={{ height: 300, width: '100%' }}></div>
}

export default Demo
```
