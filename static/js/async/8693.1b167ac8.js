/*! For license information please see 8693.1b167ac8.js.LICENSE.txt */
"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["8693"],{36602:function(e,t,i){i.d(t,{iN:()=>y,R_:()=>s,Ti:()=>w,ez:()=>h});var r=i(38187);let n=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function l(e,t,i){let r;return(r=Math.round(e.h)>=60&&240>=Math.round(e.h)?i?Math.round(e.h)-2*t:Math.round(e.h)+2*t:i?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function o(e,t,i){let r;return 0===e.h&&0===e.s?e.s:((r=i?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),i&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(100*r)/100)}function a(e,t,i){let r;return Math.round(100*Math.max(0,Math.min(1,i?e.v+.05*t:e.v-.15*t)))/100}function s(e,t={}){let i=[],h=new r.t(e),d=h.toHsv();for(let e=5;e>0;e-=1){let t=new r.t({h:l(d,e,!0),s:o(d,e,!0),v:a(d,e,!0)});i.push(t)}i.push(h);for(let e=1;e<=4;e+=1){let t=new r.t({h:l(d,e),s:o(d,e),v:a(d,e)});i.push(t)}return"dark"===t.theme?n.map(({index:e,amount:n})=>new r.t(t.backgroundColor||"#141414").mix(i[e],n).toHexString()):i.map(e=>e.toHexString())}let h={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},d=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];d.primary=d[5];let u=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];u.primary=u[5];let c=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];c.primary=c[5];let p=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];p.primary=p[5];let g=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];g.primary=g[5];let f=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];f.primary=f[5];let m=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];m.primary=m[5];let b=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];b.primary=b[5];let y=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];y.primary=y[5];let v=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];v.primary=v[5];let _=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];_.primary=_[5];let C=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];C.primary=C[5];let x=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];x.primary=x[5];let w={red:d,volcano:u,orange:c,gold:p,yellow:g,lime:f,green:m,cyan:b,blue:y,geekblue:v,purple:_,magenta:C,grey:x},S=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];S.primary=S[5];let A=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];A.primary=A[5];let k=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];k.primary=k[5];let M=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];M.primary=M[5];let T=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];T.primary=T[5];let R=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];R.primary=R[5];let E=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];E.primary=E[5];let P=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];P.primary=P[5];let B=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];B.primary=B[5];let I=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];I.primary=I[5];let L=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];L.primary=L[5];let F=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];F.primary=F[5];let H=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];H.primary=H[5]},64033:function(e,t,i){i.d(t,{IX:()=>k,rb:()=>I});var r=i(8230),n=i(57068);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,n,l,o,a=[],s=!0,h=!1;try{if(l=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;s=!1}else for(;!(s=(r=l.call(i)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){h=!0,n=e}finally{try{if(!s&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(h)throw n}}return a}}(e,t)||(0,n.Z)(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=i(14816),a=i(88185),s=i(44194),h=i(55839),d=i(70062),u=i(86873),c=i(83436),p=i(8159),g=i(62391),f=(0,u.Z)(function e(){(0,d.Z)(this,e)}),m="CALC_UNIT",b=RegExp(m,"g");function y(e){return"number"==typeof e?"".concat(e).concat(m):e}var v=function(e){(0,p.Z)(i,e);var t=(0,g.Z)(i);function i(e,n){(0,d.Z)(this,i),l=t.call(this),(0,o.Z)((0,c.Z)(l),"result",""),(0,o.Z)((0,c.Z)(l),"unitlessCssVar",void 0),(0,o.Z)((0,c.Z)(l),"lowPriority",void 0);var l,a=(0,r.Z)(e);return l.unitlessCssVar=n,e instanceof i?l.result="(".concat(e.result,")"):"number"===a?l.result=y(e):"string"===a&&(l.result=e),l}return(0,u.Z)(i,[{key:"add",value:function(e){return e instanceof i?this.result="".concat(this.result," + ").concat(e.getResult()):("number"==typeof e||"string"==typeof e)&&(this.result="".concat(this.result," + ").concat(y(e))),this.lowPriority=!0,this}},{key:"sub",value:function(e){return e instanceof i?this.result="".concat(this.result," - ").concat(e.getResult()):("number"==typeof e||"string"==typeof e)&&(this.result="".concat(this.result," - ").concat(y(e))),this.lowPriority=!0,this}},{key:"mul",value:function(e){return this.lowPriority&&(this.result="(".concat(this.result,")")),e instanceof i?this.result="".concat(this.result," * ").concat(e.getResult(!0)):("number"==typeof e||"string"==typeof e)&&(this.result="".concat(this.result," * ").concat(e)),this.lowPriority=!1,this}},{key:"div",value:function(e){return this.lowPriority&&(this.result="(".concat(this.result,")")),e instanceof i?this.result="".concat(this.result," / ").concat(e.getResult(!0)):("number"==typeof e||"string"==typeof e)&&(this.result="".concat(this.result," / ").concat(e)),this.lowPriority=!1,this}},{key:"getResult",value:function(e){return this.lowPriority||e?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(e){var t=this,i=(e||{}).unit,r=!0;return("boolean"==typeof i?r=i:Array.from(this.unitlessCssVar).some(function(e){return t.result.includes(e)})&&(r=!1),this.result=this.result.replace(b,r?"px":""),void 0!==this.lowPriority)?"calc(".concat(this.result,")"):this.result}}]),i}(f),_=function(e){(0,p.Z)(i,e);var t=(0,g.Z)(i);function i(e){var r;return(0,d.Z)(this,i),r=t.call(this),(0,o.Z)((0,c.Z)(r),"result",0),e instanceof i?r.result=e.result:"number"==typeof e&&(r.result=e),r}return(0,u.Z)(i,[{key:"add",value:function(e){return e instanceof i?this.result+=e.result:"number"==typeof e&&(this.result+=e),this}},{key:"sub",value:function(e){return e instanceof i?this.result-=e.result:"number"==typeof e&&(this.result-=e),this}},{key:"mul",value:function(e){return e instanceof i?this.result*=e.result:"number"==typeof e&&(this.result*=e),this}},{key:"div",value:function(e){return e instanceof i?this.result/=e.result:"number"==typeof e&&(this.result/=e),this}},{key:"equal",value:function(){return this.result}}]),i}(f);let C=function(e,t){var i="css"===e?v:_;return function(e){return new i(e,t)}},x=function(e,t){return"".concat([t,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};i(10894);let w=function(e,t,i,r){var n=(0,a.Z)({},t[e]);null!=r&&r.deprecatedTokens&&r.deprecatedTokens.forEach(function(e){var t,i=l(e,2),r=i[0],o=i[1];(null!=n&&n[r]||null!=n&&n[o])&&(null!=n[o]||(n[o]=null==n?void 0:n[r]))});var o=(0,a.Z)((0,a.Z)({},i),n);return Object.keys(o).forEach(function(e){o[e]===t[e]&&delete o[e]}),o};var S="undefined"!=typeof CSSINJS_STATISTIC,A=!0;function k(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(!S)return Object.assign.apply(Object,[{}].concat(t));A=!1;var n={};return t.forEach(function(e){"object"===(0,r.Z)(e)&&Object.keys(e).forEach(function(t){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){return e[t]}})})}),A=!0,n}var M={};function T(){}let R=function(e){var t,i=e,r=T;return S&&"undefined"!=typeof Proxy&&(t=new Set,i=new Proxy(e,{get:function(e,i){if(A){var r;null==(r=t)||r.add(i)}return e[i]}}),r=function(e,i){var r;M[e]={global:Array.from(t),component:(0,a.Z)((0,a.Z)({},null==(r=M[e])?void 0:r.component),i)}}),{token:i,keys:t,flush:r}},E=function(e,t,i){if("function"==typeof i){var r;return i(k(t,null!=(r=t[e])?r:{}))}return null!=i?i:{}};var P=new(function(){function e(){(0,d.Z)(this,e),(0,o.Z)(this,"map",new Map),(0,o.Z)(this,"objectIDMap",new WeakMap),(0,o.Z)(this,"nextID",0),(0,o.Z)(this,"lastAccessBeat",new Map),(0,o.Z)(this,"accessBeat",0)}return(0,u.Z)(e,[{key:"set",value:function(e,t){this.clear();var i=this.getCompositeKey(e);this.map.set(i,t),this.lastAccessBeat.set(i,Date.now())}},{key:"get",value:function(e){var t=this.getCompositeKey(e),i=this.map.get(t);return this.lastAccessBeat.set(t,Date.now()),this.accessBeat+=1,i}},{key:"getCompositeKey",value:function(e){var t=this;return e.map(function(e){return e&&"object"===(0,r.Z)(e)?"obj_".concat(t.getObjectID(e)):"".concat((0,r.Z)(e),"_").concat(e)}).join("|")}},{key:"getObjectID",value:function(e){if(this.objectIDMap.has(e))return this.objectIDMap.get(e);var t=this.nextID;return this.objectIDMap.set(e,t),this.nextID+=1,t}},{key:"clear",value:function(){var e=this;if(this.accessBeat>1e4){var t=Date.now();this.lastAccessBeat.forEach(function(i,r){t-i>6e5&&(e.map.delete(r),e.lastAccessBeat.delete(r))}),this.accessBeat=0}}}]),e}());let B=function(){return{}},I=function(e){var t=e.useCSP,i=void 0===t?B:t,n=e.useToken,d=e.usePrefix,u=e.getResetStyles,c=e.getCommonStyle,p=e.getCompUnitless;function g(t,o,p){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=Array.isArray(t)?t:[t,t],m=l(f,1)[0],b=f.join("-"),y=e.layer||{name:"antd"};return function(e){var t,l,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,v=n(),_=v.theme,S=v.realToken,A=v.hashId,M=v.token,T=v.cssVar,B=v.zeroRuntime;if((0,s.useMemo)(function(){return B},[]))return A;var I=d(),L=I.rootPrefixCls,F=I.iconPrefixCls,H=i(),O=(t=function(){var e=new Set;return Object.keys(g.unitless||{}).forEach(function(t){e.add((0,h.ks)(t,T.prefix)),e.add((0,h.ks)(t,x(m,T.prefix)))}),C("css",e)},l=["css",m,null==T?void 0:T.prefix],s.useMemo(function(){var e=P.get(l);if(e)return e;var i=t();return P.set(l,i),i},l)),D={max:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return"max(".concat(t.map(function(e){return(0,h.bf)(e)}).join(","),")")},min:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return"min(".concat(t.map(function(e){return(0,h.bf)(e)}).join(","),")")}},z=D.max,W=D.min,Z={theme:_,token:M,hashId:A,nonce:function(){return H.nonce},clientOnly:g.clientOnly,layer:y,order:g.order||-999};return"function"==typeof u&&(0,h.xy)((0,a.Z)((0,a.Z)({},Z),{},{clientOnly:!1,path:["Shared",L]}),function(){return u(M,{prefix:{rootPrefixCls:L,iconPrefixCls:F},csp:H})}),(0,h.xy)((0,a.Z)((0,a.Z)({},Z),{},{path:[b,e,F]}),function(){if(!1===g.injectStyle)return[];var t=R(M),i=t.token,n=t.flush,l=E(m,S,p),a=".".concat(e),s=w(m,S,l,{deprecatedTokens:g.deprecatedTokens});l&&"object"===(0,r.Z)(l)&&Object.keys(l).forEach(function(e){l[e]="var(".concat((0,h.ks)(e,x(m,T.prefix)),")")});var d=k(i,{componentCls:a,prefixCls:e,iconCls:".".concat(F),antCls:".".concat(L),calc:O,max:z,min:W},l),u=o(d,{hashId:A,prefixCls:e,rootPrefixCls:L,iconPrefixCls:F});n(m,s);var b="function"==typeof c?c(d,e,f,g.resetFont):null;return[!1===g.resetStyle?null:b,u]}),A}}return{genStyleHooks:function(e,t,i,r){var l,s,d,u,c,f,m=Array.isArray(e)?e[0]:e;function b(e){return"".concat(String(m)).concat(e.slice(0,1).toUpperCase()).concat(e.slice(1))}var y=(null==r?void 0:r.unitless)||{},v="function"==typeof p?p(e):{},_=(0,a.Z)((0,a.Z)({},v),{},(0,o.Z)({},b("zIndexPopup"),!0));Object.keys(y).forEach(function(e){_[b(e)]=y[e]});var C=(0,a.Z)((0,a.Z)({},r),{},{unitless:_,prefixToken:b}),x=g(e,t,i,C),S=(l=m,s=i,u=(d=C).unitless,c=d.prefixToken,f=d.ignore,function(e){var t=n(),i=t.cssVar,r=t.realToken;return(0,h.CI)({path:[l],prefix:i.prefix,key:i.key,unitless:u,ignore:f,token:r,scope:e},function(){var e=E(l,r,s),t=w(l,r,e,{deprecatedTokens:null==d?void 0:d.deprecatedTokens});return e&&Object.keys(e).forEach(function(e){t[c(e)]=t[e],delete t[e]}),t}),null==i?void 0:i.key});return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return[x(e,t),S(t)]}},genSubStyleComponent:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=g(e,t,i,(0,a.Z)({resetStyle:!1,order:-998},r));return function(e){var t=e.prefixCls,i=e.rootCls,r=void 0===i?t:i;return n(t,r),null}},genComponentStyleHook:g}}},55839:function(e,t,i){let r;i.d(t,{CI:()=>eP,uP:()=>p,fp:()=>O,ks:()=>R,E4:()=>eB,jG:()=>_,xy:()=>eE,bf:()=>k});let n=function(e){for(var t,i=0,r=0,n=e.length;n>=4;++r,n-=4)t=(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))*0x5bd1e995+((t>>>16)*59797<<16),t^=t>>>24,i=(65535&t)*0x5bd1e995+((t>>>16)*59797<<16)^(65535&i)*0x5bd1e995+((i>>>16)*59797<<16);switch(n){case 3:i^=(255&e.charCodeAt(r+2))<<16;case 2:i^=(255&e.charCodeAt(r+1))<<8;case 1:i^=255&e.charCodeAt(r),i=(65535&i)*0x5bd1e995+((i>>>16)*59797<<16)}return i^=i>>>13,(((i=(65535&i)*0x5bd1e995+((i>>>16)*59797<<16))^i>>>15)>>>0).toString(36)};var l=i(90054),o=i(44194);function a(e){return e.join("%")}i(55668),i(64246);let s=0;class h{instanceId;constructor(e){this.instanceId=e}cache=new Map;updateTimes=new Map;extracted=new Set;get(e){return this.opGet(a(e))}opGet(e){return this.cache.get(e)||null}update(e,t){return this.opUpdate(a(e),t)}opUpdate(e,t){let i=t(this.cache.get(e));null===i?(this.cache.delete(e),this.updateTimes.delete(e)):(this.cache.set(e,i),this.updateTimes.set(e,s),s+=1)}}let d="data-token-hash",u="data-css-hash",c="__cssinjs_instance__",p=o.createContext({hashPriority:"low",cache:function(){let e=Math.random().toString(12).slice(2);if("undefined"!=typeof document&&document.head&&document.body){let t=document.body.querySelectorAll(`style[${u}]`)||[],{firstChild:i}=document.head;Array.from(t).forEach(t=>{t[c]||=e,t[c]===e&&document.head.insertBefore(t,i)});let r={};Array.from(document.querySelectorAll(`style[${u}]`)).forEach(t=>{let i=t.getAttribute(u);r[i]?t[c]===e&&t.parentNode?.removeChild(t):r[i]=!0})}return new h(e)}(),defaultCache:!0,autoPrefix:!1});var g=i(64438);class f{static MAX_CACHE_SIZE=20;static MAX_CACHE_OFFSET=5;cache;keys;cacheCallTimes;constructor(){this.cache=new Map,this.keys=[],this.cacheCallTimes=0}size(){return this.keys.length}internalGet(e,t=!1){let i={map:this.cache};return e.forEach(e=>{i=i?i?.map?.get(e):void 0}),i?.value&&t&&(i.value[1]=this.cacheCallTimes++),i?.value}get(e){return this.internalGet(e,!0)?.[0]}has(e){return!!this.internalGet(e)}set(e,t){if(!this.has(e)){if(this.size()+1>f.MAX_CACHE_SIZE+f.MAX_CACHE_OFFSET){let[e]=this.keys.reduce((e,t)=>{let[,i]=e;return this.internalGet(t)[1]<i?[t,this.internalGet(t)[1]]:e},[this.keys[0],this.cacheCallTimes]);this.delete(e)}this.keys.push(e)}let i=this.cache;e.forEach((r,n)=>{if(n===e.length-1)i.set(r,{value:[t,this.cacheCallTimes++]});else{let e=i.get(r);e?e.map||(e.map=new Map):i.set(r,{map:new Map}),i=i.get(r).map}})}deleteByPath(e,t){let i=e.get(t[0]);if(1===t.length)return i.map?e.set(t[0],{map:i.map}):e.delete(t[0]),i.value?.[0];let r=this.deleteByPath(i.map,t.slice(1));return i.map&&0!==i.map.size||i.value||e.delete(t[0]),r}delete(e){if(this.has(e))return this.keys=this.keys.filter(t=>!function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(t,e)),this.deleteByPath(this.cache,e)}}var m=i(57705);let b=0;class y{derivatives;id;constructor(e){this.derivatives=Array.isArray(e)?e:[e],this.id=b,0===e.length&&(0,m.Kp)(e.length>0,"[Ant Design CSS-in-JS] Theme should have at least one derivative function."),b+=1}getDerivativeToken(e){return this.derivatives.reduce((t,i)=>i(e,t),void 0)}}let v=new f;function _(e){let t=Array.isArray(e)?e:[e];return v.has(t)||v.set(t,new y(t)),v.get(t)}let C=new WeakMap,x={},w=new WeakMap;function S(e){let t=w.get(e)||"";return t||(Object.keys(e).forEach(i=>{let r=e[i];t+=i,r instanceof y?t+=r.id:r&&"object"==typeof r?t+=S(r):t+=r}),t=n(t),w.set(e,t)),t}`random-${Date.now()}-${Math.random()}`.replace(/\./g,"");let A=(0,g.Z)();function k(e){return"number"==typeof e?`${e}px`:e}function M(e){let{hashCls:t,hashPriority:i="low"}=e||{};if(!t)return"";let r=`.${t}`;return"low"===i?`:where(${r})`:r}let T=e=>null!=e,R=(e,t="")=>`--${t?`${t}-`:""}${e}`.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase(),E=(e,t,i)=>{let{hashCls:r,hashPriority:n="low"}=i||{};return Object.keys(e).length?`${M({hashCls:r,hashPriority:n})}.${t}${i?.scope?`.${i.scope}`:""}{${Object.entries(e).map(([e,t])=>`${e}:${t};`).join("")}}`:""},P=(e,t,i)=>{let{hashCls:r,hashPriority:n="low",prefix:l,unitless:o,ignore:a,preserve:s}=i||{},h={},d={};return Object.entries(e).forEach(([e,t])=>{if(s?.[e])d[e]=t;else if(("string"==typeof t||"number"==typeof t)&&!a?.[e]){let i=R(e,l);h[i]="number"!=typeof t||o?.[e]?String(t):`${t}px`,d[e]=`var(${i})`}}),[d,E(h,t,{scope:i?.scope,hashCls:r,hashPriority:n})]},B=new Map;function I(e,t,i,r,n){let{cache:l}=o.useContext(p),s=a([e,...t]),h=e=>{l.opUpdate(s,t=>{let[r=0,n]=t||[void 0,void 0],l=[r,n||i()];return e?e(l):l})};o.useMemo(()=>{h()},[s]);let d=l.opGet(s)[1];return(0,o.useInsertionEffect)(()=>(h(([e,t])=>[e+1,t]),B.has(s)||(n?.(d),B.set(s,!0),Promise.resolve().then(()=>{B.delete(s)})),()=>{l.opUpdate(s,e=>{let[t=0,i]=e||[];return 0==t-1?(r?.(i,!1),B.delete(s),null):[t-1,i]})}),[s]),d}let L={},F=new Map,H=(e,t,i,r)=>{let n={...i.getDerivativeToken(e),...t};return r&&(n=r(n)),n};function O(e,t,i){let{cache:{instanceId:r},container:a,hashPriority:s}=(0,o.useContext)(p),{salt:h="",override:g=L,formatToken:f,getComputedToken:m,cssVar:b}=i,y=function(e,t){let i=C;for(let e=0;e<t.length;e+=1){let r=t[e];i.has(r)||i.set(r,new WeakMap),i=i.get(r)}return i.has(x)||i.set(x,e()),i.get(x)}(()=>Object.assign({},...t),t),v=S(y),_=S(g),w=S(b);return I("token",[h,e.id,v,_,w],()=>{var t;let i=m?m(y,g,e):H(y,g,e,f),r={...i},l=`${h}_${b.prefix}`,o=n(l),a=`css-${o}`;r._tokenKey=n(`${l}_${S(r)}`);let[d,u]=P(i,b.key,{prefix:b.prefix,ignore:b.ignore,unitless:b.unitless,preserve:b.preserve,hashPriority:s,hashCls:b.hashed?a:void 0});return d._hashId=o,t=b.key,F.set(t,(F.get(t)||0)+1),[d,a,r,u,b.key]},([,,,,e])=>{F.set(e,(F.get(e)||0)-1);let t=new Set;F.forEach((e,i)=>{e<=0&&t.add(i)}),F.size-t.size>-1&&t.forEach(e=>{"undefined"!=typeof document&&document.querySelectorAll(`style[${d}="${e}"]`).forEach(e=>{e[c]===r&&e.parentNode?.removeChild(e)}),F.delete(e)})},([,,,e,t])=>{if(!e)return;let i=(0,l.hq)(e,n(`css-var-${t}`),{mark:u,prepend:"queue",attachTo:a,priority:-999});i[c]=r,i.setAttribute(d,t)})}let D={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var z="-ms-",W="-moz-",Z="-webkit-",N="comm",$="rule",j="decl",G="@keyframes",V=Math.abs,U=String.fromCharCode,K=Object.assign;function X(e,t){return(e=t.exec(e))?e[0]:e}function Y(e,t,i){return e.replace(t,i)}function q(e,t,i){return e.indexOf(t,i)}function J(e,t){return 0|e.charCodeAt(t)}function Q(e,t,i){return e.slice(t,i)}function ee(e){return e.length}function et(e,t){return t.push(e),e}function ei(e,t){return e.filter(function(e){return!X(e,t)})}function er(e,t){for(var i="",r=0;r<e.length;r++)i+=t(e[r],r,e,t)||"";return i}function en(e,t,i,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case"@namespace":case j:return e.return=e.return||e.value;case N:return"";case G:return e.return=e.value+"{"+er(e.children,r)+"}";case $:if(!ee(e.value=e.props.join(",")))return""}return ee(i=er(e.children,r))?e.return=e.value+"{"+i+"}":""}var el=1,eo=1,ea=0,es=0,eh=0,ed="";function eu(e,t,i,r,n,l,o,a){return{value:e,root:t,parent:i,type:r,props:n,children:l,line:el,column:eo,length:o,return:"",siblings:a}}function ec(e,t){return K(eu("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function ep(e){for(;e.root;)e=ec(e.root,{children:[e]});et(e,e.siblings)}function eg(){return eh=es<ea?J(ed,es++):0,eo++,10===eh&&(eo=1,el++),eh}function ef(){return J(ed,es)}function em(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eb(e){var t,i;return(t=es-1,i=function e(t){for(;eg();)switch(eh){case t:return es;case 34:case 39:34!==t&&39!==t&&e(eh);break;case 40:41===t&&e(t);break;case 92:eg()}return es}(91===e?e+2:40===e?e+1:e),Q(ed,t,i)).trim()}function ey(e){var t,i;return i=function e(t,i,r,n,l,o,a,s,h){for(var d,u,c,p,g=0,f=0,m=a,b=0,y=0,v=0,_=1,C=1,x=1,w=0,S="",A=l,k=o,M=n,T=S;C;)switch(v=w,w=eg()){case 40:if(108!=v&&58==J(T,m-1)){-1!=q(T+=Y(eb(w),"&","&\f"),"&\f",V(g?s[g-1]:0))&&(x=-1);break}case 34:case 39:case 91:T+=eb(w);break;case 9:case 10:case 13:case 32:T+=function(e){for(;eh=ef();)if(eh<33)eg();else break;return em(e)>2||em(eh)>3?"":" "}(v);break;case 92:T+=function(e,t){for(var i;--t&&eg()&&!(eh<48)&&!(eh>102)&&(!(eh>57)||!(eh<65))&&(!(eh>70)||!(eh<97)););return i=es+(t<6&&32==ef()&&32==eg()),Q(ed,e,i)}(es-1,7);continue;case 47:switch(ef()){case 42:case 47:et((d=function(e,t){for(;eg();)if(e+eh===57)break;else if(e+eh===84&&47===ef())break;return"/*"+Q(ed,t,es-1)+"*"+U(47===e?e:eg())}(eg(),es),u=i,c=r,p=h,eu(d,u,c,N,U(eh),Q(d,2,-2),0,p)),h),(5==em(v||1)||5==em(ef()||1))&&ee(T)&&" "!==Q(T,-1,void 0)&&(T+=" ");break;default:T+="/"}break;case 123*_:s[g++]=ee(T)*x;case 125*_:case 59:case 0:switch(w){case 0:case 125:C=0;case 59+f:-1==x&&(T=Y(T,/\f/g,"")),y>0&&(ee(T)-m||0===_&&47===v)&&et(y>32?e_(T+";",n,r,m-1,h):e_(Y(T," ","")+";",n,r,m-2,h),h);break;case 59:T+=";";default:if(et(M=ev(T,i,r,g,f,l,s,S,A=[],k=[],m,o),o),123===w)if(0===f)e(T,i,M,M,A,o,m,s,k);else{switch(b){case 99:if(110===J(T,3))break;case 108:if(97===J(T,2))break;default:f=0;case 100:case 109:case 115:}f?e(t,M,M,n&&et(ev(t,M,M,0,0,l,s,S,l,A=[],m,k),k),l,k,m,s,n?A:k):e(T,M,M,M,[""],k,0,s,k)}}g=f=y=0,_=x=1,S=T="",m=a;break;case 58:m=1+ee(T),y=v;default:if(_<1){if(123==w)--_;else if(125==w&&0==_++&&125==(eh=es>0?J(ed,--es):0,eo--,10===eh&&(eo=1,el--),eh))continue}switch(T+=U(w),w*_){case 38:x=f>0?1:(T+="\f",-1);break;case 44:s[g++]=(ee(T)-1)*x,x=1;break;case 64:45===ef()&&(T+=eb(eg())),b=ef(),f=m=ee(S=T+=function(e){for(;!em(ef());)eg();return Q(ed,e,es)}(es)),w++;break;case 45:45===v&&2==ee(T)&&(_=0)}}return o}("",null,null,null,[""],(t=e,el=eo=1,ea=ee(ed=t),es=0,e=[]),0,[0],e),ed="",i}function ev(e,t,i,r,n,l,o,a,s,h,d,u){for(var c=n-1,p=0===n?l:[""],g=p.length,f=0,m=0,b=0;f<r;++f)for(var y=0,v=Q(e,c+1,c=V(m=o[f])),_=e;y<g;++y)(_=(m>0?p[y]+" "+v:Y(v,/&\f/g,p[y])).trim())&&(s[b++]=_);return eu(e,t,i,0===n?$:a,s,h,d,u)}function e_(e,t,i,r,n){return eu(e,t,i,j,Q(e,0,r),Q(e,r+1,-1),r,n)}function eC(e,t,i,r){if(e.length>-1&&!e.return)switch(e.type){case j:e.return=function e(t,i,r){var n;switch(n=i,45^J(t,0)?(((n<<2^J(t,0))<<2^J(t,1))<<2^J(t,2))<<2^J(t,3):0){case 5103:return Z+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:case 6391:case 5879:case 5623:case 6135:case 4599:return Z+t+t;case 4855:return Z+t.replace("add","source-over").replace("substract","source-out").replace("intersect","source-in").replace("exclude","xor")+t;case 4789:return W+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Z+t+W+t+z+t+t;case 5936:switch(J(t,i+11)){case 114:return Z+t+z+Y(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Z+t+z+Y(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Z+t+z+Y(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Z+t+z+t+t;case 6165:return Z+t+z+"flex-"+t+t;case 5187:return Z+t+Y(t,/(\w+).+(:[^]+)/,Z+"box-$1$2"+z+"flex-$1$2")+t;case 5443:return Z+t+z+"flex-item-"+Y(t,/flex-|-self/g,"")+(X(t,/flex-|baseline/)?"":z+"grid-row-"+Y(t,/flex-|-self/g,""))+t;case 4675:return Z+t+z+"flex-line-pack"+Y(t,/align-content|flex-|-self/g,"")+t;case 5548:return Z+t+z+Y(t,"shrink","negative")+t;case 5292:return Z+t+z+Y(t,"basis","preferred-size")+t;case 6060:return Z+"box-"+Y(t,"-grow","")+Z+t+z+Y(t,"grow","positive")+t;case 4554:return Z+Y(t,/([^-])(transform)/g,"$1"+Z+"$2")+t;case 6187:return Y(Y(Y(t,/(zoom-|grab)/,Z+"$1"),/(image-set)/,Z+"$1"),t,"")+t;case 5495:case 3959:return Y(t,/(image-set\([^]*)/,Z+"$1$`$1");case 4968:return Y(Y(t,/(.+:)(flex-)?(.*)/,Z+"box-pack:$3"+z+"flex-pack:$3"),/space-between/,"justify")+Z+t+t;case 4200:if(!X(t,/flex-|baseline/))return z+"grid-column-align"+Q(t,i)+t;break;case 2592:case 3360:return z+Y(t,"template-","")+t;case 4384:case 3616:if(r&&r.some(function(e,t){return i=t,X(e.props,/grid-\w+-end/)}))return~q(t+(r=r[i].value),"span",0)?t:z+Y(t,"-start","")+t+z+"grid-row-span:"+(~q(r,"span",0)?X(r,/\d+/):X(r,/\d+/)-X(t,/\d+/))+";";return z+Y(t,"-start","")+t;case 4896:case 4128:return r&&r.some(function(e){return X(e.props,/grid-\w+-start/)})?t:z+Y(Y(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Y(t,/(.+)-inline(.+)/,Z+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ee(t)-1-i>6)switch(J(t,i+1)){case 109:if(45!==J(t,i+4))break;case 102:return Y(t,/(.+:)(.+)-([^]+)/,"$1"+Z+"$2-$3$1"+W+(108==J(t,i+3)?"$3":"$2-$3"))+t;case 115:return~q(t,"stretch",0)?e(Y(t,"stretch","fill-available"),i,r)+t:t}break;case 5152:case 5920:return Y(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(e,i,r,n,l,o,a){return z+i+":"+r+a+(n?z+i+"-span:"+(l?o:o-r)+a:"")+t});case 4949:if(121===J(t,i+6))return Y(t,":",":"+Z)+t;break;case 6444:switch(J(t,45===J(t,14)?18:11)){case 120:return Y(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Z+(45===J(t,14)?"inline-":"")+"box$3$1"+Z+"$2$3$1"+z+"$2box$3")+t;case 100:return Y(t,":",":"+z)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Y(t,"scroll-","scroll-snap-")+t}return t}(e.value,e.length,i);return;case G:return er([ec(e,{value:Y(e.value,"@","@"+Z)})],r);case $:if(e.length){var n,l;return n=i=e.props,l=function(t){switch(X(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ep(ec(e,{props:[Y(t,/:(read-\w+)/,":"+W+"$1")]})),ep(ec(e,{props:[t]})),K(e,{props:ei(i,r)});break;case"::placeholder":ep(ec(e,{props:[Y(t,/:(plac\w+)/,":"+Z+"input-$1")]})),ep(ec(e,{props:[Y(t,/:(plac\w+)/,":"+W+"$1")]})),ep(ec(e,{props:[Y(t,/:(plac\w+)/,z+"input-$1")]})),ep(ec(e,{props:[t]})),K(e,{props:ei(i,r)})}return""},n.map(l).join("")}}}let ex="data-ant-cssinjs-cache-path",ew="_FILE_STYLE__",eS=!0,eA="_multi_value_";function ek(e,t){var i,r;return(t?er(ey(e),(r=(i=[eC,en]).length,function(e,t,n,l){for(var o="",a=0;a<r;a++)o+=i[a](e,t,n,l)||"";return o})):er(ey(e),en)).replace(/\{%%%\:[^;];}/g,";")}function eM(e,t,i="high"){if(!t)return e;let r=M({hashCls:t,hashPriority:i});return e.split(",").map(e=>{let t=e.trim().split(/\s+/),i=t[0]||"",n=i.match(/^\w+/)?.[0]||"";return[i=`${n}${r}${i.slice(n.length)}`,...t.slice(1)].join(" ")}).join(",")}let eT=(e,t={},{root:i,injectHash:r,parentSelectors:n}={root:!0,parentSelectors:[]})=>{let{hashId:l,layer:o,path:a,hashPriority:s,transformers:h=[],linters:d=[]}=t,u="",c={};function p(e){let i=e.getName(l);if(!c[i]){let[r]=eT(e.style,t,{root:!1,parentSelectors:n});c[i]=`@keyframes ${e.getName(l)}${r}`}}return(function e(t,i=[]){return t.forEach(t=>{Array.isArray(t)?e(t,i):t&&i.push(t)}),i})(Array.isArray(e)?e:[e]).forEach(e=>{let o="string"!=typeof e||i?e:{};if("string"==typeof o)u+=`${o}
`;else if(o._keyframe)p(o);else{let e=h.reduce((e,t)=>t?.visit?.(e)||e,o);Object.keys(e).forEach(o=>{let a=e[o];if("object"!=typeof a||!a||"animationName"===o&&a._keyframe||"object"==typeof a&&a&&("_skip_check_"in a||eA in a)){function h(e,t){let i=e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),r=t;D[e]||"number"!=typeof r||0===r||(r=`${r}px`),"animationName"===e&&t?._keyframe&&(p(t),r=t.getName(l)),u+=`${i}:${r};`}let e=a?.value??a;"object"==typeof a&&a?.[eA]&&Array.isArray(e)?e.forEach(e=>{h(o,e)}):T(e)&&h(o,e)}else{let e=!1,h=o.trim(),d=!1;(i||r)&&l?h.startsWith("@")?e=!0:h="&"===h?eM("",l,s):eM(o,l,s):i&&!l&&("&"===h||""===h)&&(h="",d=!0);let[p,g]=eT(a,t,{root:d,injectHash:e,parentSelectors:[...n,h]});c={...c,...g},u+=`${h}${p}`}})}}),i?o&&(u&&(u=`@layer ${o.name} {${u}}`),o.dependencies&&(c[`@layer ${o.name}`]=o.dependencies.map(e=>`@layer ${e}, ${o.name};`).join("\n"))):u=`{${u}}`,[u,c]};function eR(e,t){return n(`${e.join("%")}${t}`)}function eE(e,t){let{path:i,hashId:n,layer:a,nonce:s,clientOnly:h,order:d=0}=e,{mock:f,hashPriority:m,container:b,transformers:y,linters:v,cache:_,layer:C,autoPrefix:x}=o.useContext(p),w=[n||""];C&&w.push("layer"),w.push(...i),I("style",w,()=>{let e=w.join("|");if(function(e){if(!r&&(r={},(0,g.Z)())){let e=document.createElement("div");e.className=ex,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);let t=getComputedStyle(e).content||"";(t=t.replace(/^"/,"").replace(/"$/,"")).split(";").forEach(e=>{let[t,i]=e.split(":");r[t]=i});let i=document.querySelector(`style[${ex}]`);i&&(eS=!1,i.parentNode?.removeChild(i)),document.body.removeChild(e)}return!!r[e]}(e)){let[t,i]=function(e){let t=r[e],i=null;if(t&&(0,g.Z)())if(eS)i=ew;else{let t=document.querySelector(`style[${u}="${r[e]}"]`);t?i=t.innerHTML:delete r[e]}return[i,t]}(e);if(t)return[t,i,{},h,d]}let[l,o]=eT(t(),{hashId:n,hashPriority:m,layer:C?a:void 0,path:i.join("-"),transformers:y,linters:v}),s=ek(l,x||!1),c=eR(w,s);return[s,c,o,h,d]},(e,t)=>{let[,i]=e;t&&A&&(0,l.jL)(i,{mark:u,attachTo:b})},e=>{let[t,i,r,,n]=e;if(A&&t!==ew){let e={mark:u,prepend:!C&&"queue",attachTo:b,priority:n},o="function"==typeof s?s():s;o&&(e.csp={nonce:o});let a=[],h=[];Object.keys(r).forEach(e=>{e.startsWith("@layer")?a.push(e):h.push(e)}),a.forEach(t=>{(0,l.hq)(ek(r[t],x||!1),`_layer-${t}`,{...e,prepend:!0})}),(0,l.hq)(t,i,e)[c]=_.instanceId,h.forEach(t=>{(0,l.hq)(ek(r[t],x||!1),`_effect-${t}`,e)})}})}let eP=(e,t)=>{let{key:i,prefix:r,unitless:n,ignore:a,token:s,hashId:h,scope:g=""}=e,{cache:{instanceId:f},container:m,hashPriority:b}=(0,o.useContext)(p),{_tokenKey:y}=s,v=[...e.path,i,g,y];return I("cssVar",v,()=>{let[e,l]=P(t(),i,{prefix:r,unitless:n,ignore:a,scope:g,hashPriority:b,hashCls:h}),o=eR(v,l);return[e,l,o,i]},([,,e])=>{A&&(0,l.jL)(e,{mark:u,attachTo:m})},([,e,t])=>{if(!e)return;let r=(0,l.hq)(e,t,{mark:u,prepend:"queue",attachTo:m,priority:-999});r[c]=f,r.setAttribute(d,i)})},eB=class{name;style;constructor(e,t){this.name=e,this.style=t}getName(e=""){return e?`${e}-${this.name}`:this.name}_keyframe=!0};function eI(e){return e.notSplit=!0,e}eI(["borderTop","borderBottom"]),eI(["borderTop"]),eI(["borderBottom"]),eI(["borderLeft","borderRight"]),eI(["borderLeft"]),eI(["borderRight"])},38187:function(e,t,i){i.d(t,{t:()=>s});let r={aliceblue:"9ehhb",antiquewhite:"9sgk7",aqua:"1ekf",aquamarine:"4zsno",azure:"9eiv3",beige:"9lhp8",bisque:"9zg04",black:"0",blanchedalmond:"9zhe5",blue:"73",blueviolet:"5e31e",brown:"6g016",burlywood:"8ouiv",cadetblue:"3qba8",chartreuse:"4zshs",chocolate:"87k0u",coral:"9yvyo",cornflowerblue:"3xael",cornsilk:"9zjz0",crimson:"8l4xo",cyan:"1ekf",darkblue:"3v",darkcyan:"rkb",darkgoldenrod:"776yz",darkgray:"6mbhl",darkgreen:"jr4",darkgrey:"6mbhl",darkkhaki:"7ehkb",darkmagenta:"5f91n",darkolivegreen:"3bzfz",darkorange:"9yygw",darkorchid:"5z6x8",darkred:"5f8xs",darksalmon:"9441m",darkseagreen:"5lwgf",darkslateblue:"2th1n",darkslategray:"1ugcv",darkslategrey:"1ugcv",darkturquoise:"14up",darkviolet:"5rw7n",deeppink:"9yavn",deepskyblue:"11xb",dimgray:"442g9",dimgrey:"442g9",dodgerblue:"16xof",firebrick:"6y7tu",floralwhite:"9zkds",forestgreen:"1cisi",fuchsia:"9y70f",gainsboro:"8m8kc",ghostwhite:"9pq0v",goldenrod:"8j4f4",gold:"9zda8",gray:"50i2o",green:"pa8",greenyellow:"6senj",grey:"50i2o",honeydew:"9eiuo",hotpink:"9yrp0",indianred:"80gnw",indigo:"2xcoy",ivory:"9zldc",khaki:"9edu4",lavenderblush:"9ziet",lavender:"90c8q",lawngreen:"4vk74",lemonchiffon:"9zkct",lightblue:"6s73a",lightcoral:"9dtog",lightcyan:"8s1rz",lightgoldenrodyellow:"9sjiq",lightgray:"89jo3",lightgreen:"5nkwg",lightgrey:"89jo3",lightpink:"9z6wx",lightsalmon:"9z2ii",lightseagreen:"19xgq",lightskyblue:"5arju",lightslategray:"4nwk9",lightslategrey:"4nwk9",lightsteelblue:"6wau6",lightyellow:"9zlcw",lime:"1edc",limegreen:"1zcxe",linen:"9shk6",magenta:"9y70f",maroon:"4zsow",mediumaquamarine:"40eju",mediumblue:"5p",mediumorchid:"79qkz",mediumpurple:"5r3rv",mediumseagreen:"2d9ip",mediumslateblue:"4tcku",mediumspringgreen:"1di2",mediumturquoise:"2uabw",mediumvioletred:"7rn9h",midnightblue:"z980",mintcream:"9ljp6",mistyrose:"9zg0x",moccasin:"9zfzp",navajowhite:"9zest",navy:"3k",oldlace:"9wq92",olive:"50hz4",olivedrab:"472ub",orange:"9z3eo",orangered:"9ykg0",orchid:"8iu3a",palegoldenrod:"9bl4a",palegreen:"5yw0o",paleturquoise:"6v4ku",palevioletred:"8k8lv",papayawhip:"9zi6t",peachpuff:"9ze0p",peru:"80oqn",pink:"9z8wb",plum:"8nba5",powderblue:"6wgdi",purple:"4zssg",rebeccapurple:"3zk49",red:"9y6tc",rosybrown:"7cv4f",royalblue:"2jvtt",saddlebrown:"5fmkz",salmon:"9rvci",sandybrown:"9jn1c",seagreen:"1tdnb",seashell:"9zje6",sienna:"6973h",silver:"7ir40",skyblue:"5arjf",slateblue:"45e4t",slategray:"4e100",slategrey:"4e100",snow:"9zke2",springgreen:"1egv",steelblue:"2r1kk",tan:"87yx8",teal:"pds",thistle:"8ggk8",tomato:"9yqfb",turquoise:"2j4r4",violet:"9b10u",wheat:"9ld4j",white:"9zldr",whitesmoke:"9lhpx",yellow:"9zl6o",yellowgreen:"61fzm"},n=Math.round;function l(e,t){let i=e.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=i.map(e=>parseFloat(e));for(let e=0;e<3;e+=1)r[e]=t(r[e]||0,i[e]||"",e);return i[3]?r[3]=i[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}let o=(e,t,i)=>0===i?e:e/100;function a(e,t){let i=t||255;return e>i?i:e<0?0:e}class s{isValid=!0;r=0;g=0;b=0;a=1;_h;_s;_l;_v;_max;_min;_brightness;constructor(e){function t(t){return t[0]in e&&t[1]in e&&t[2]in e}if(e)if("string"==typeof e){let t=e.trim();function i(e){return t.startsWith(e)}if(/^#?[A-F\d]{3,8}$/i.test(t))this.fromHexString(t);else if(i("rgb"))this.fromRgbString(t);else if(i("hsl"))this.fromHslString(t);else if(i("hsv")||i("hsb"))this.fromHsvString(t);else{let e=r[t.toLowerCase()];e&&this.fromHexString(parseInt(e,36).toString(16).padStart(6,"0"))}}else if(e instanceof s)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(t("rgb"))this.r=a(e.r),this.g=a(e.g),this.b=a(e.b),this.a="number"==typeof e.a?a(e.a,1):1;else if(t("hsl"))this.fromHsl(e);else if(t("hsv"))this.fromHsv(e);else throw Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){let t=this.toHsv();return t.h=e,this._c(t)}getLuminance(){function e(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}let t=e(this.r);return .2126*t+.7152*e(this.g)+.0722*e(this.b)}getHue(){if(void 0===this._h){let e=this.getMax()-this.getMin();0===e?this._h=0:this._h=n(60*(this.r===this.getMax()?(this.g-this.b)/e+6*(this.g<this.b):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(void 0===this._s){let e=this.getMax()-this.getMin();0===e?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return void 0===this._l&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return void 0===this._v&&(this._v=this.getMax()/255),this._v}getBrightness(){return void 0===this._brightness&&(this._brightness=(299*this.r+587*this.g+114*this.b)/1e3),this._brightness}darken(e=10){let t=this.getHue(),i=this.getSaturation(),r=this.getLightness()-e/100;return r<0&&(r=0),this._c({h:t,s:i,l:r,a:this.a})}lighten(e=10){let t=this.getHue(),i=this.getSaturation(),r=this.getLightness()+e/100;return r>1&&(r=1),this._c({h:t,s:i,l:r,a:this.a})}mix(e,t=50){let i=this._c(e),r=t/100,l=e=>(i[e]-this[e])*r+this[e],o={r:n(l("r")),g:n(l("g")),b:n(l("b")),a:n(100*l("a"))/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){let t=this._c(e),i=this.a+t.a*(1-this.a),r=e=>n((this[e]*this.a+t[e]*t.a*(1-this.a))/i);return this._c({r:r("r"),g:r("g"),b:r("b"),a:i})}isDark(){return 128>this.getBrightness()}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#",t=(this.r||0).toString(16);e+=2===t.length?t:"0"+t;let i=(this.g||0).toString(16);e+=2===i.length?i:"0"+i;let r=(this.b||0).toString(16);if(e+=2===r.length?r:"0"+r,"number"==typeof this.a&&this.a>=0&&this.a<1){let t=n(255*this.a).toString(16);e+=2===t.length?t:"0"+t}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){let e=this.getHue(),t=n(100*this.getSaturation()),i=n(100*this.getLightness());return 1!==this.a?`hsla(${e},${t}%,${i}%,${this.a})`:`hsl(${e},${t}%,${i}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return 1!==this.a?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,t,i){let r=this.clone();return r[e]=a(t,i),r}_c(e){return new this.constructor(e)}getMax(){return void 0===this._max&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return void 0===this._min&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){let t=e.replace("#","");function i(e,i){return parseInt(t[e]+t[i||e],16)}t.length<6?(this.r=i(0),this.g=i(1),this.b=i(2),this.a=t[3]?i(3)/255:1):(this.r=i(0,1),this.g=i(2,3),this.b=i(4,5),this.a=t[6]?i(6,7)/255:1)}fromHsl({h:e,s:t,l:i,a:r}){if(this._h=e%360,this._s=t,this._l=i,this.a="number"==typeof r?r:1,t<=0){let e=n(255*i);this.r=e,this.g=e,this.b=e}let l=0,o=0,a=0,s=e/60,h=(1-Math.abs(2*i-1))*t,d=h*(1-Math.abs(s%2-1));s>=0&&s<1?(l=h,o=d):s>=1&&s<2?(l=d,o=h):s>=2&&s<3?(o=h,a=d):s>=3&&s<4?(o=d,a=h):s>=4&&s<5?(l=d,a=h):s>=5&&s<6&&(l=h,a=d);let u=i-h/2;this.r=n((l+u)*255),this.g=n((o+u)*255),this.b=n((a+u)*255)}fromHsv({h:e,s:t,v:i,a:r}){this._h=e%360,this._s=t,this._v=i,this.a="number"==typeof r?r:1;let l=n(255*i);if(this.r=l,this.g=l,this.b=l,t<=0)return;let o=e/60,a=Math.floor(o),s=o-a,h=n(i*(1-t)*255),d=n(i*(1-t*s)*255),u=n(i*(1-t*(1-s))*255);switch(a){case 0:this.g=u,this.b=h;break;case 1:this.r=d,this.b=h;break;case 2:this.r=h,this.b=u;break;case 3:this.r=h,this.g=d;break;case 4:this.r=u,this.g=h;break;default:this.g=h,this.b=d}}fromHsvString(e){let t=l(e,o);this.fromHsv({h:t[0],s:t[1],v:t[2],a:t[3]})}fromHslString(e){let t=l(e,o);this.fromHsl({h:t[0],s:t[1],l:t[2],a:t[3]})}fromRgbString(e){let t=l(e,(e,t)=>t.includes("%")?n(e/100*255):e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}}},981:function(e,t,i){i.d(t,{Z:()=>C});var r=i(44194),n=i(10976),l=i(36602),o=i(33393),a=i(90054),s=i(37410),h=i(57705);function d(e){return"object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"==typeof e.icon||"function"==typeof e.icon)}function u(e={}){return Object.keys(e).reduce((t,i)=>{let r=e[i];return"class"===i?(t.className=r,delete t.class):(delete t[i],t[i.replace(/-(.)/g,(e,t)=>t.toUpperCase())]=r),t},{})}function c(e){return(0,l.R_)(e)[0]}function p(e){return e?Array.isArray(e)?e:[e]:[]}let g=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
  vertical-align: inherit;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,f=e=>{let{csp:t,prefixCls:i,layer:n}=(0,r.useContext)(o.Z),l=g;i&&(l=l.replace(/anticon/g,i)),n&&(l=`@layer ${n} {
${l}
}`),(0,r.useEffect)(()=>{let i=e.current,r=(0,s.A)(i);(0,a.hq)(l,"@ant-design-icons",{prepend:!n,csp:t,attachTo:r})},[])},m={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},b=e=>{var t,i;let{icon:n,className:l,onClick:o,style:a,primaryColor:s,secondaryColor:p,...g}=e,b=r.useRef(null),y=m;if(s&&(y={primaryColor:s,secondaryColor:p||c(s)}),f(b),t=d(n),i=`icon should be icon definiton, but got ${n}`,(0,h.Wn)(t,`[@ant-design/icons] ${i}`),!d(n))return null;let v=n;return v&&"function"==typeof v.icon&&(v={...v,icon:v.icon(y.primaryColor,y.secondaryColor)}),function e(t,i,n){return n?r.createElement(t.tag,{key:i,...u(t.attrs),...n},(t.children||[]).map((r,n)=>e(r,`${i}-${t.tag}-${n}`))):r.createElement(t.tag,{key:i,...u(t.attrs)},(t.children||[]).map((r,n)=>e(r,`${i}-${t.tag}-${n}`)))}(v.icon,`svg-${v.name}`,{className:l,onClick:o,style:a,"data-icon":v.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",...g,ref:b})};function y(e){let[t,i]=p(e);return b.setTwoToneColors({primaryColor:t,secondaryColor:i})}function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}b.displayName="IconReact",b.getTwoToneColors=function(){return{...m}},b.setTwoToneColors=function({primaryColor:e,secondaryColor:t}){m.primaryColor=e,m.secondaryColor=t||c(e),m.calculated=!!t},y(l.iN.primary);let _=r.forwardRef((e,t)=>{let{className:i,icon:l,spin:a,rotate:s,tabIndex:h,onClick:d,twoToneColor:u,...c}=e,{prefixCls:g="anticon",rootClassName:f}=r.useContext(o.Z),m=(0,n.W)(f,g,{[`${g}-${l.name}`]:!!l.name,[`${g}-spin`]:!!a||"loading"===l.name},i),y=h;void 0===y&&d&&(y=-1);let _=s?{msTransform:`rotate(${s}deg)`,transform:`rotate(${s}deg)`}:void 0,[C,x]=p(u);return r.createElement("span",v({role:"img","aria-label":l.name},c,{ref:t,tabIndex:y,onClick:d,className:m}),r.createElement(b,{icon:l,primaryColor:C,secondaryColor:x,style:_}))});_.getTwoToneColor=function(){let e=b.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},_.setTwoToneColor=y;let C=_},33393:function(e,t,i){i.d(t,{Z:()=>r});let r=(0,i(44194).createContext)({})},46857:function(e,t,i){i.d(t,{Z:()=>a});var r=i(44194);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};var l=i(981);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let a=r.forwardRef((e,t)=>r.createElement(l.Z,o({},e,{ref:t,icon:n})))},57258:function(e,t,i){i.d(t,{Z:()=>a});var r=i(44194);let n={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};var l=i(981);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let a=r.forwardRef((e,t)=>r.createElement(l.Z,o({},e,{ref:t,icon:n})))},94400:function(e,t,i){i.d(t,{Z:()=>a});var r=i(44194);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var l=i(981);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let a=r.forwardRef((e,t)=>r.createElement(l.Z,o({},e,{ref:t,icon:n})))},69535:function(e,t,i){i.d(t,{Z:()=>a});var r=i(44194);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8zM656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z"}}]},name:"font-size",theme:"outlined"};var l=i(981);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let a=r.forwardRef((e,t)=>r.createElement(l.Z,o({},e,{ref:t,icon:n})))},24281:function(e,t,i){i.d(t,{Z:()=>a});var r=i(44194);let n={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};var l=i(981);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let a=r.forwardRef((e,t)=>r.createElement(l.Z,o({},e,{ref:t,icon:n})))},40474:function(e,t,i){i.d(t,{Z:()=>a});var r=i(44194);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z"}}]},name:"number",theme:"outlined"};var l=i(981);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let a=r.forwardRef((e,t)=>r.createElement(l.Z,o({},e,{ref:t,icon:n})))},27502:function(e,t,i){i.d(t,{ZP:()=>K,zt:()=>s});var r=i(51827),n=i(73260),l=i(10976),o=i(44194);let a=o.createContext({});function s({children:e,...t}){return o.createElement(a.Provider,{value:t},e)}var h=i(10894),d=i(25820),u=i(26560);let c="none",p="appear",g="enter",f="leave",m="none",b="prepare",y="start",v="active",_="prepared";var C=i(64438);function x(e,t){let i={};return i[e.toLowerCase()]=t.toLowerCase(),i[`Webkit${e}`]=`webkit${t}`,i[`Moz${e}`]=`moz${t}`,i[`ms${e}`]=`MS${t}`,i[`O${e}`]=`o${t.toLowerCase()}`,i}let w=function(e,t){let i={animationend:x("Animation","AnimationEnd"),transitionend:x("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete i.animationend.animation,"TransitionEvent"in t||delete i.transitionend.transition),i}((0,C.Z)(),"undefined"!=typeof window?window:{}),S={};(0,C.Z)()&&({style:S}=document.createElement("div"));let A={};function k(e){if(A[e])return A[e];let t=w[e];if(t){let i=Object.keys(t),r=i.length;for(let n=0;n<r;n+=1){let r=i[n];if(Object.prototype.hasOwnProperty.call(t,r)&&r in S)return A[e]=t[r],A[e]}}return""}let M=k("animationend"),T=k("transitionend"),R=M||"animationend",E=T||"transitionend";function P(e,t){return e?"object"==typeof e?e[t.replace(/-\w/g,e=>e[1].toUpperCase())]:`${e}-${t}`:null}let B=e=>{let t=(0,o.useRef)();function i(t){t&&(t.removeEventListener(E,e),t.removeEventListener(R,e))}return o.useEffect(()=>()=>{i(t.current),t.current=null},[]),[function(r){t.current&&t.current!==r&&i(t.current),r&&r!==t.current&&(r.addEventListener(E,e),r.addEventListener(R,e),t.current=r)},i]},I=(0,C.Z)()?o.useLayoutEffect:o.useEffect;var L=i(18839);let F=()=>{let e=o.useRef(null);function t(){L.Z.cancel(e.current)}return o.useEffect(()=>()=>{t()},[]),[function i(r,n=2){t();let l=(0,L.Z)(()=>{n<=1?r({isCanceled:()=>l!==e.current}):i(r,n-1)});e.current=l},t]},H=[b,y,v,"end"],O=[b,_];function D(e){return e===v||"end"===e}let z=(e,t,i)=>{let[r,n]=(0,d.Z)(m),[l,a]=F(),s=t?O:H;return I(()=>{if(r!==m&&"end"!==r){let e=s.indexOf(r),t=s[e+1],o=i(r);!1===o?n(t,!0):t&&l(e=>{function i(){e.isCanceled()||n(t,!0)}!0===o?i():Promise.resolve(o).then(i)})}},[e,r]),o.useEffect(()=>()=>{a()},[]),[function(){n(b,!0)},r]},W=function(e){let t=e;"object"==typeof e&&({transitionSupport:t}=e);let i=o.forwardRef((e,i)=>{let s,{visible:m=!0,removeOnLeave:C=!0,forceRender:x,children:w,motionName:S,leavedClassName:A,eventProps:k}=e,{motion:M}=o.useContext(a),T=!!(e.motionName&&t&&!1!==M),R=(0,o.useRef)();function E(){return(0,r.bn)(R.current)}let[L,F,H,O]=function(e,t,i,{motionEnter:r=!0,motionAppear:n=!0,motionLeave:l=!0,motionDeadline:a,motionLeaveImmediately:s,onAppearPrepare:m,onEnterPrepare:C,onLeavePrepare:x,onAppearStart:w,onEnterStart:S,onLeaveStart:A,onAppearActive:k,onEnterActive:M,onLeaveActive:T,onAppearEnd:R,onEnterEnd:E,onLeaveEnd:P,onVisibleChanged:L}){let[F,H]=(0,d.Z)(),[O,W]=function(e){let[,t]=o.useReducer(e=>e+1,0),i=o.useRef(e);return[(0,u.Z)(()=>i.current),(0,u.Z)(e=>{i.current="function"==typeof e?e(i.current):e,t()})]}(c),[Z,N]=(0,d.Z)(null),$=O(),j=(0,o.useRef)(!1),G=(0,o.useRef)(null),V=(0,o.useRef)(!1);function U(){W(c),N(null,!0)}let K=(0,h.zX)(e=>{let t,r=O();if(r===c)return;let n=i();if(e&&!e.deadline&&e.target!==n)return;let l=V.current;r===p&&l?t=R?.(n,e):r===g&&l?t=E?.(n,e):r===f&&l&&(t=P?.(n,e)),l&&!1!==t&&U()}),[X]=B(K),Y=e=>{switch(e){case p:return{[b]:m,[y]:w,[v]:k};case g:return{[b]:C,[y]:S,[v]:M};case f:return{[b]:x,[y]:A,[v]:T};default:return{}}},q=o.useMemo(()=>Y($),[$]),[J,Q]=z($,!e,e=>{if(e===b){let e=q[b];return!!e&&e(i())}return Q in q&&N(q[Q]?.(i(),null)||null),Q===v&&$!==c&&(X(i()),a>0&&(clearTimeout(G.current),G.current=setTimeout(()=>{K({deadline:!0})},a))),Q===_&&U(),!0});V.current=D(Q);let ee=(0,o.useRef)(null);I(()=>{let i;if(j.current&&ee.current===t)return;H(t);let o=j.current;j.current=!0,!o&&t&&n&&(i=p),o&&t&&r&&(i=g),(o&&!t&&l||!o&&s&&!t&&l)&&(i=f);let a=Y(i);i&&(e||a[b])?(W(i),J()):W(c),ee.current=t},[t]),(0,o.useEffect)(()=>{($!==p||n)&&($!==g||r)&&($!==f||l)||W(c)},[n,r,l]),(0,o.useEffect)(()=>()=>{j.current=!1,clearTimeout(G.current)},[]);let et=o.useRef(!1);(0,o.useEffect)(()=>{F&&(et.current=!0),void 0!==F&&$===c&&((et.current||F)&&L?.(F),et.current=!0)},[F,$]);let ei=Z;return q[b]&&Q===y&&(ei={transition:"none",...ei}),[O,Q,ei,F??t]}(T,m,E,e),W=L(),Z=o.useRef(O);O&&(Z.current=!0);let N=o.useMemo(()=>{let e={};return Object.defineProperties(e,{nativeElement:{enumerable:!0,get:E},inMotion:{enumerable:!0,get:()=>()=>L()!==c},enableMotion:{enumerable:!0,get:()=>()=>T}}),e},[]);o.useImperativeHandle(i,()=>N,[]);let $={...k,visible:m};if(w)if(W===c)s=O?w({...$},R):!C&&Z.current&&A?w({...$,className:A},R):!x&&(C||A)?null:w({...$,style:{display:"none"}},R);else{let e;F===b?e="prepare":D(F)?e="active":F===y&&(e="start");let t=P(S,`${W}-${e}`);s=w({...$,className:(0,l.W)(P(S,W),{[t]:t&&e,[S]:"string"==typeof S}),style:H},R)}else s=null;return o.isValidElement(s)&&(0,n.Yr)(s)&&((0,n.C4)(s)||(s=o.cloneElement(s,{ref:R}))),s});return i.displayName="CSSMotion",i}(!!(M&&T)),Z="keep",N="remove",$="removed";function j(e){let t;return{...t=e&&"object"==typeof e&&"key"in e?e:{key:e},key:String(t.key)}}function G(e=[]){return e.map(j)}function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let U=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e,t=W){class i extends o.Component{static defaultProps={component:"div"};state={keyEntities:[]};static getDerivedStateFromProps({keys:e},{keyEntities:t}){return{keyEntities:(function(e=[],t=[]){let i=[],r=0,n=t.length,l=G(e),o=G(t);l.forEach(e=>{let t=!1;for(let l=r;l<n;l+=1){let n=o[l];if(n.key===e.key){r<l&&(i=i.concat(o.slice(r,l).map(e=>({...e,status:"add"}))),r=l),i.push({...n,status:Z}),r+=1,t=!0;break}}t||i.push({...e,status:N})}),r<n&&(i=i.concat(o.slice(r).map(e=>({...e,status:"add"}))));let a={};return i.forEach(({key:e})=>{a[e]=(a[e]||0)+1}),Object.keys(a).filter(e=>a[e]>1).forEach(e=>{(i=i.filter(({key:t,status:i})=>t!==e||i!==N)).forEach(t=>{t.key===e&&(t.status=Z)})}),i})(t,G(e)).filter(e=>{let i=t.find(({key:t})=>e.key===t);return!i||i.status!==$||e.status!==N})}}removeKey=e=>{this.setState(t=>({keyEntities:t.keyEntities.map(t=>t.key!==e?t:{...t,status:$})}),()=>{let{keyEntities:e}=this.state;0===e.filter(({status:e})=>e!==$).length&&this.props.onAllRemoved&&this.props.onAllRemoved()})};render(){let{keyEntities:e}=this.state,{component:i,children:r,onVisibleChanged:n,onAllRemoved:l,...a}=this.props,s=i||o.Fragment,h={};return U.forEach(e=>{h[e]=a[e],delete a[e]}),delete a.keys,o.createElement(s,a,e.map(({status:e,...i},l)=>o.createElement(t,V({},h,{key:i.key,visible:"add"===e||e===Z,eventProps:i,onVisibleChanged:e=>{n?.(e,{key:i.key}),e||this.removeKey(i.key)}}),(e,t)=>r({...e,index:l},t))))}}}(0);let K=W},30936:function(e,t,i){i.d(t,{Z:()=>_});var r=i(48970),n=i(44194),l=i(10976),o=i(86144),a=i(68176);let s=void 0,h=n.forwardRef(function(e,t){let i,{prefixCls:a,invalidate:h,item:d,renderItem:u,responsive:c,responsiveDisabled:p,registerSize:g,itemKey:f,className:m,style:b,children:y,display:v,order:_,component:C="div",...x}=e,w=c&&!v;n.useEffect(()=>()=>{g(f,null)},[]);let S=u&&d!==s?u(d,{index:_}):y;h||(i={opacity:+!w,height:w?0:s,overflowY:w?"hidden":s,order:c?_:s,pointerEvents:w?"none":s,position:w?"absolute":s});let A={};w&&(A["aria-hidden"]=!0);let k=n.createElement(C,(0,r.Z)({className:(0,l.W)(!h&&a,m),style:{...i,...b}},A,x,{ref:t}),S);return c&&(k=n.createElement(o.ZP,{onResize:({offsetWidth:e})=>{g(f,e)},disabled:p},k)),k});var d=i(26560),u=i(56321),c=i(18839);function p(e,t){let[i,r]=n.useState(t);return[i,(0,d.Z)(t=>{e(()=>{r(t)})})]}let g=n.createContext(null),f=n.forwardRef((e,t)=>{let i=n.useContext(g);if(!i){let{component:i="div",...l}=e;return n.createElement(i,(0,r.Z)({},l,{ref:t}))}let{className:o,...a}=i,{className:s,...d}=e;return n.createElement(g.Provider,{value:null},n.createElement(h,(0,r.Z)({ref:t,className:(0,l.W)(o,s)},a,d)))}),m="responsive",b="invalidate";function y(e){return`+ ${e.length} ...`}let v=n.forwardRef(function(e,t){let{prefixCls:i="rc-overflow",data:s=[],renderItem:d,renderRawItem:f,itemKey:v,itemWidth:_=10,ssr:C,style:x,className:w,maxCount:S,renderRest:A,renderRawRest:k,prefix:M,suffix:T,component:R="div",itemComponent:E,onVisibleChange:P,...B}=e,I="full"===C,L=function(){let e=n.useRef(null);return t=>{if(!e.current){e.current=[];var i=()=>{(0,u.unstable_batchedUpdates)(()=>{e.current.forEach(e=>{e()}),e.current=null})};if("undefined"==typeof MessageChannel)(0,c.Z)(i);else{let e=new MessageChannel;e.port1.onmessage=()=>i(),e.port2.postMessage(void 0)}}e.current.push(t)}}(),[F,H]=p(L,null),O=F||0,[D,z]=p(L,new Map),[W,Z]=p(L,0),[N,$]=p(L,0),[j,G]=p(L,0),[V,U]=p(L,0),[K,X]=(0,n.useState)(null),[Y,q]=(0,n.useState)(null),J=n.useMemo(()=>null===Y&&I?Number.MAX_SAFE_INTEGER:Y||0,[Y,F]),[Q,ee]=(0,n.useState)(!1),et=`${i}-item`,ei=Math.max(W,N),er=S===m,en=s.length&&er,el=S===b,eo=en||"number"==typeof S&&s.length>S,ea=(0,n.useMemo)(()=>{let e=s;return en?e=null===F&&I?s:s.slice(0,Math.min(s.length,O/_)):"number"==typeof S&&(e=s.slice(0,S)),e},[s,_,F,S,en]),es=(0,n.useMemo)(()=>en?s.slice(J+1):s.slice(ea.length),[s,ea,en,J]),eh=(0,n.useCallback)((e,t)=>"function"==typeof v?v(e):(v&&e?.[v])??t,[v]),ed=(0,n.useCallback)(d||(e=>e),[d]);function eu(e,t,i){(Y!==e||void 0!==t&&t!==K)&&(q(e),i||(ee(e<s.length-1),P?.(e)),void 0!==t&&X(t))}function ec(e,t){z(i=>{let r=new Map(i);return null===t?r.delete(e):r.set(e,t),r})}function ep(e){return D.get(eh(ea[e],e))}(0,a.Z)(()=>{if(O&&"number"==typeof ei&&ea){let e=j+V,t=ea.length,i=t-1;if(!t)return void eu(0,null);for(let r=0;r<t;r+=1){let t=ep(r);if(I&&(t=t||0),void 0===t){eu(r-1,void 0,!0);break}if(e+=t,0===i&&e<=O||r===i-1&&e+ep(i)<=O){eu(i,null);break}if(e+ei>O){eu(r-1,e-t-V+N);break}}T&&ep(0)+V>O&&X(null)}},[O,D,N,j,V,eh,ea]);let eg=Q&&!!es.length,ef={};null!==K&&en&&(ef={position:"absolute",left:K,top:0});let em={prefixCls:et,responsive:en,component:E,invalidate:el},eb=f?(e,t)=>{let i=eh(e,t);return n.createElement(g.Provider,{key:i,value:{...em,order:t,item:e,itemKey:i,registerSize:ec,display:t<=J}},f(e,t))}:(e,t)=>{let i=eh(e,t);return n.createElement(h,(0,r.Z)({},em,{order:t,key:i,item:e,renderItem:ed,itemKey:i,registerSize:ec,display:t<=J}))},ey={order:eg?J:Number.MAX_SAFE_INTEGER,className:`${et}-rest`,registerSize:function(e,t){$(t),Z(N)},display:eg},ev=A||y,e_=k?n.createElement(g.Provider,{value:{...em,...ey}},k(es)):n.createElement(h,(0,r.Z)({},em,ey),"function"==typeof ev?ev(es):ev),eC=n.createElement(R,(0,r.Z)({className:(0,l.W)(!el&&i,w),style:x,ref:t},B),M&&n.createElement(h,(0,r.Z)({},em,{responsive:er,responsiveDisabled:!en,order:-1,className:`${et}-prefix`,registerSize:function(e,t){G(t)},display:!0}),M),ea.map(eb),eo?e_:null,T&&n.createElement(h,(0,r.Z)({},em,{responsive:er,responsiveDisabled:!en,order:J,className:`${et}-suffix`,registerSize:function(e,t){U(t)},display:!0,style:ef}),T));return er?n.createElement(o.ZP,{onResize:function(e,t){H(t.clientWidth)},disabled:!en},eC):eC});v.Item=f,v.RESPONSIVE=m,v.INVALIDATE=b;let _=v},65460:function(e,t,i){i.d(t,{Z:()=>r});let r={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}},86144:function(e,t,i){let r;i.d(t,{ZP:()=>b,yU:()=>p});var n=i(44194),l=i(48071);i(57705);var o=i(51827),a=i(73260);let s=n.createContext(null),h=new Map;function d(e){e.forEach(e=>{let{target:t}=e;h.get(t)?.forEach(e=>e(t))})}function u(){return r||(r=new ResizeObserver(d)),r}var c=i(10894);function p(e,t,i,r){let l=n.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),o=(0,c.zX)(e=>{let{width:t,height:n}=e.getBoundingClientRect(),{offsetWidth:o,offsetHeight:a}=e,s=Math.floor(t),h=Math.floor(n);if(l.current.width!==s||l.current.height!==h||l.current.offsetWidth!==o||l.current.offsetHeight!==a){let d={width:s,height:h,offsetWidth:o,offsetHeight:a};l.current=d;let u=o===Math.round(t)?t:o,c=a===Math.round(n)?n:a,p={...d,offsetWidth:u,offsetHeight:c};r?.(p,e),Promise.resolve().then(()=>{i?.(p,e)})}}),a="function"==typeof t;n.useEffect(()=>{let i=a?t():t;return i&&e&&(h.has(i)||(h.set(i,new Set),u().observe(i)),h.get(i).add(o)),()=>{i&&h.has(i)&&(h.get(i).delete(o),h.get(i).size||(u().unobserve(i),h.delete(i)))}},[e,a?0:t])}let g=n.forwardRef(function(e,t){let{children:i,disabled:r,onResize:l,data:h}=e,d=n.useRef(null),u=n.useContext(s),c="function"==typeof i,g=c?i(d):i,f=!c&&n.isValidElement(g)&&(0,a.Yr)(g),m=f?(0,a.C4)(g):null,b=(0,a.x1)(m,d),y=()=>(0,o.bn)(d.current);return n.useImperativeHandle(t,()=>y()),p(!r,y,l,(e,t)=>{u?.(e,t,h)}),f?n.cloneElement(g,{ref:b}):g});function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let m=n.forwardRef(function(e,t){let{children:i}=e;return("function"==typeof i?[i]:(0,l.Z)(i)).map((i,r)=>{let l=i?.key||`rc-observer-key-${r}`;return n.createElement(g,f({},e,{key:l,ref:0===r?t:void 0}),i)})});m.Collection=function({children:e,onBatchResize:t}){let i=n.useRef(0),r=n.useRef([]),l=n.useContext(s),o=n.useCallback((e,n,o)=>{i.current+=1;let a=i.current;r.current.push({size:e,element:n,data:o}),Promise.resolve().then(()=>{a===i.current&&(t?.(r.current),r.current=[])}),l?.(e,n,o)},[t,l]);return n.createElement(s.Provider,{value:o},e)};let b=m},81801:function(e,t,i){i.d(t,{_v:()=>Q,ZP:()=>ee});var r=i(64438),n=i(73260);i(57705);var l=i(44194),o=i(56321);let a=l.createContext(null);var s=i(68176);let h=[];var d=i(90054);let u=`rc-util-locker-${Date.now()}`,c=0;var p=i(10894),g=i(32162);let f=[],m=0,b=e=>{if("Escape"===e.key&&!e.isComposing){if(Date.now()-m<200)return;let t=f.length;for(let i=t-1;i>=0;i-=1)f[i].onEsc({top:i===t-1,event:e})}},y=()=>{m=Date.now()},v=e=>!1!==e&&((0,r.Z)()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null),_=l.forwardRef((e,t)=>{let{open:i,autoLock:m,getContainer:_,debug:C,autoDestroy:x=!0,children:w,onEsc:S}=e,[A,k]=l.useState(i),M=A||i;l.useEffect(()=>{(x||i)&&k(i)},[i,x]);let[T,R]=l.useState(()=>v(_));l.useEffect(()=>{let e=v(_);R(()=>e??null)});let[E,P]=function(e,t){let[i]=l.useState(()=>(0,r.Z)()?document.createElement("div"):null),n=l.useRef(!1),o=l.useContext(a),[d,u]=l.useState(h),c=o||(n.current?void 0:e=>{u(t=>[e,...t])});function p(){i.parentElement||document.body.appendChild(i),n.current=!0}function g(){i.parentElement?.removeChild(i),n.current=!1}return(0,s.Z)(()=>(e?o?o(p):p():g(),g),[e]),(0,s.Z)(()=>{d.length&&(d.forEach(e=>e()),u(h))},[d]),[i,c]}(M&&!T,0),B=T??E,I=!!(m&&i&&(0,r.Z)()&&(B===E||B===document.body)),[L]=l.useState(()=>(c+=1,`${u}_${c}`));(0,s.Z)(()=>{if(I){var e;let t=(e=document.body,"undefined"==typeof document||!e||!(e instanceof Element)?{width:0,height:0}:function(e){let t,i,r=`rc-scrollbar-measure-${Math.random().toString(36).substring(7)}`,n=document.createElement("div");n.id=r;let l=n.style;if(l.position="absolute",l.left="0",l.top="0",l.width="100px",l.height="100px",l.overflow="scroll",e){let n=getComputedStyle(e);l.scrollbarColor=n.scrollbarColor,l.scrollbarWidth=n.scrollbarWidth;let o=getComputedStyle(e,"::-webkit-scrollbar"),a=parseInt(o.width,10),s=parseInt(o.height,10);try{let e=a?`width: ${o.width};`:"",t=s?`height: ${o.height};`:"";(0,d.hq)(`
#${r}::-webkit-scrollbar {
${e}
${t}
}`,r)}catch(e){console.error(e),t=a,i=s}}document.body.appendChild(n);let o=e&&t&&!isNaN(t)?t:n.offsetWidth-n.clientWidth,a=e&&i&&!isNaN(i)?i:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),(0,d.jL)(r),{width:o,height:a}}(e)).width,i=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;(0,d.hq)(`
html body {
  overflow-y: hidden;
  ${i?`width: calc(100% - ${t}px);`:""}
}`,L)}else(0,d.jL)(L);return()=>{(0,d.jL)(L)}},[I,L]);let F=(0,g.Z)(),H=(0,p.zX)(S),O=()=>{f.find(e=>e.id===F)||f.push({id:F,onEsc:H})},D=()=>{f=f.filter(e=>e.id!==F)};(0,l.useMemo)(()=>{i?O():i||D()},[i]),(0,l.useEffect)(()=>{if(i)return O(),window.addEventListener("keydown",b),window.addEventListener("compositionend",y),()=>{D(),0===f.length&&(window.removeEventListener("keydown",b),window.removeEventListener("compositionend",y))}},[i]);let z=null;w&&(0,n.Yr)(w)&&t&&(z=(0,n.C4)(w));let W=(0,n.x1)(z,t);if(!M||!(0,r.Z)()||void 0===T)return null;let Z=!1===B,N=w;return t&&(N=l.cloneElement(w,{ref:W})),l.createElement(a.Provider,{value:P},Z?N:(0,o.createPortal)(N,B))});var C=i(10976),x=i(86144),w=i(51827),S=i(37410),A=i(26560),k=i(27502);function M(e){let{prefixCls:t,align:i,arrow:r,arrowPos:n}=e,{className:o,content:a,style:s}=r||{},{x:h=0,y:d=0}=n,u=l.useRef(null);if(!i||!i.points)return null;let c={position:"absolute"};if(!1!==i.autoArrow){let e=i.points[0],t=i.points[1],r=e[0],n=e[1],l=t[0],o=t[1];r!==l&&["t","b"].includes(r)?"t"===r?c.top=0:c.bottom=0:c.top=d,n!==o&&["l","r"].includes(n)?"l"===n?c.left=0:c.right=0:c.left=h}return l.createElement("div",{ref:u,className:(0,C.W)(`${t}-arrow`,o),style:{...c,...s}},a)}function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function R(e){let{prefixCls:t,open:i,zIndex:r,mask:n,motion:o,mobile:a}=e;return n?l.createElement(k.ZP,T({},o,{motionAppear:!0,visible:i,removeOnLeave:!0}),({className:e})=>l.createElement("div",{style:{zIndex:r},className:(0,C.W)(`${t}-mask`,a&&`${t}-mobile-mask`,e)})):null}let E=l.memo(({children:e})=>e,(e,t)=>t.cache);function P(e,t,i,r,n,l,o,a){let s="auto",h=e?{}:{left:"-1000vw",top:"-1000vh",right:s,bottom:s};if(!e&&(t||!i)){let{points:e}=r,t=r.dynamicInset||r._experimental?.dynamicInset,i=t&&"r"===e[0][1],d=t&&"b"===e[0][0];i?(h.right=n,h.left=s):(h.left=o,h.right=s),d?(h.bottom=l,h.top=s):(h.top=a,h.bottom=s)}return h}function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let I=l.forwardRef((e,t)=>{let{onEsc:i,popup:r,className:o,prefixCls:a,style:h,target:d,onVisibleChanged:u,open:c,keepDom:g,fresh:f,onClick:m,mask:b,arrow:y,arrowPos:v,align:_,motion:w,maskMotion:S,mobile:A,forceRender:T,getPopupContainer:I,autoDestroy:L,portal:F,children:H,zIndex:O,onMouseEnter:D,onMouseLeave:z,onPointerEnter:W,onPointerDownCapture:Z,ready:N,offsetX:$,offsetY:j,offsetR:G,offsetB:V,onAlign:U,onPrepare:K,onResize:X,stretch:Y,targetWidth:q,targetHeight:J}=e,Q="function"==typeof r?r():r,ee=c||g,et=!!A,[ei,er,en]=l.useMemo(()=>A?[A.mask,A.maskMotion,A.motion]:[b,S,w],[A,b,S,w]),el=I?.length>0,[eo,ea]=l.useState(!I||!el);(0,s.Z)(()=>{!eo&&el&&d&&ea(!0)},[eo,el,d]);let es=(0,p.zX)((e,t)=>{X?.(e,t),U()}),eh=P(et,N,c,_,G,V,$,j);if(!eo)return null;let ed={};return Y&&(Y.includes("height")&&J?ed.height=J:Y.includes("minHeight")&&J&&(ed.minHeight=J),Y.includes("width")&&q?ed.width=q:Y.includes("minWidth")&&q&&(ed.minWidth=q)),c||(ed.pointerEvents="none"),l.createElement(F,{open:T||ee,getContainer:I&&(()=>I(d)),autoDestroy:L,onEsc:i},l.createElement(R,{prefixCls:a,open:c,zIndex:O,mask:ei,motion:er,mobile:et}),l.createElement(x.ZP,{onResize:es,disabled:!c},e=>l.createElement(k.ZP,B({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:T,leavedClassName:`${a}-hidden`},en,{onAppearPrepare:K,onEnterPrepare:K,visible:c,onVisibleChanged:e=>{w?.onVisibleChanged?.(e),u(e)}}),({className:i,style:r},s)=>{let d=(0,C.W)(a,i,o,{[`${a}-mobile`]:et});return l.createElement("div",{ref:(0,n.sQ)(e,t,s),className:d,style:{"--arrow-x":`${v.x||0}px`,"--arrow-y":`${v.y||0}px`,...eh,...ed,...r,boxSizing:"border-box",zIndex:O,...h},onMouseEnter:D,onMouseLeave:z,onPointerEnter:W,onClick:m,onPointerDownCapture:Z},y&&l.createElement(M,{prefixCls:a,arrow:y,arrowPos:v,align:_}),l.createElement(E,{cache:!c&&!f},Q))})),H)}),L=l.createContext(null),F=l.createContext(null);function H(e){return e?Array.isArray(e)?e:[e]:[]}var O=i(56899);function D(e,t,i,r){let{points:n}=i,l=Object.keys(e);for(let i=0;i<l.length;i+=1){let o=l[i];if(function(e=[],t=[],i){let r=(e,t)=>e[t]||"";return i?r(e,0)===r(t,0):r(e,0)===r(t,0)&&r(e,1)===r(t,1)}(e[o]?.points,n,r))return`${t}-placement-${o}`}return""}function z(e){return e.ownerDocument.defaultView}function W(e){let t=[],i=e?.parentElement,r=["hidden","scroll","clip","auto"];for(;i;){let{overflowX:e,overflowY:n,overflow:l}=z(i).getComputedStyle(i);[e,n,l].some(e=>r.includes(e))&&t.push(i),i=i.parentElement}return t}function Z(e,t=1){return Number.isNaN(e)?t:e}function N(e){return Z(parseFloat(e),0)}function $(e,t){let i={...e};return(t||[]).forEach(e=>{if(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)return;let{overflow:t,overflowClipMargin:r,borderTopWidth:n,borderBottomWidth:l,borderLeftWidth:o,borderRightWidth:a}=z(e).getComputedStyle(e),s=e.getBoundingClientRect(),{offsetHeight:h,clientHeight:d,offsetWidth:u,clientWidth:c}=e,p=N(n),g=N(l),f=N(o),m=N(a),b=Z(Math.round(s.width/u*1e3)/1e3),y=Z(Math.round(s.height/h*1e3)/1e3),v=p*y,_=f*b,C=0,x=0;if("clip"===t){let e=N(r);C=e*b,x=e*y}let w=s.x+_-C,S=s.y+v-x,A=w+s.width+2*C-_-m*b-(u-c-f-m)*b,k=S+s.height+2*x-v-g*y-(h-d-p-g)*y;i.left=Math.max(i.left,w),i.top=Math.max(i.top,S),i.right=Math.min(i.right,A),i.bottom=Math.min(i.bottom,k)}),i}function j(e,t=0){let i=`${t}`,r=i.match(/^(.*)\%$/);return r?e*(parseFloat(r[1])/100):parseFloat(i)}function G(e,t){let[i,r]=t||[];return[j(e.width,i),j(e.height,r)]}function V(e=""){return[e[0],e[1]]}function U(e,t){let i,r,n=t[0],l=t[1];return r="t"===n?e.y:"b"===n?e.y+e.height:e.y+e.height/2,{x:"l"===l?e.x:"r"===l?e.x+e.width:e.x+e.width/2,y:r}}function K(e,t){let i=[...e];return i[t]=({t:"b",b:"t",l:"r",r:"l"})[e[t]]||"c",i}function X(e,t,i,r,n,o,a,h){let[d,u]=l.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:n[r]||{}}),c=l.useRef(0),p=l.useMemo(()=>!t||h?[]:W(t),[t]),g=l.useRef({});e||(g.current={});let f=(0,A.Z)(()=>{if(t&&i&&e&&!h){let e,h,d,c,f,m=t.ownerDocument,b=z(t),{position:y}=b.getComputedStyle(t),v=t.style.left,_=t.style.top,C=t.style.right,x=t.style.bottom,S=t.style.overflow,A={...n[r],...o},k=m.createElement("div");if(t.parentElement?.appendChild(k),k.style.left=`${t.offsetLeft}px`,k.style.top=`${t.offsetTop}px`,k.style.position=y,k.style.height=`${t.offsetHeight}px`,k.style.width=`${t.offsetWidth}px`,t.style.left="0",t.style.top="0",t.style.right="auto",t.style.bottom="auto",t.style.overflow="hidden",Array.isArray(i))e={x:i[0],y:i[1],width:0,height:0};else{let t=i.getBoundingClientRect();t.x=t.x??t.left,t.y=t.y??t.top,e={x:t.x,y:t.y,width:t.width,height:t.height}}let M=t.getBoundingClientRect(),{height:T,width:R}=b.getComputedStyle(t);M.x=M.x??M.left,M.y=M.y??M.top;let{clientWidth:E,clientHeight:P,scrollWidth:B,scrollHeight:I,scrollTop:L,scrollLeft:F}=m.documentElement,H=M.height,D=M.width,W=e.height,N=e.width,{htmlRegion:j}=A,X="visible",Y="visibleFirst";"scroll"!==j&&j!==Y&&(j=X);let q=j===Y,J=$({left:-F,top:-L,right:B-F,bottom:I-L},p),Q=$({left:0,top:0,right:E,bottom:P},p),ee=j===X?Q:J,et=q?Q:ee;t.style.left="auto",t.style.top="auto",t.style.right="0",t.style.bottom="0";let ei=t.getBoundingClientRect();t.style.left=v,t.style.top=_,t.style.right=C,t.style.bottom=x,t.style.overflow=S,t.parentElement?.removeChild(k);let er=Z(Math.round(D/parseFloat(R)*1e3)/1e3),en=Z(Math.round(H/parseFloat(T)*1e3)/1e3);if(0===er||0===en||(0,w.Sh)(i)&&!(0,O.Z)(i))return;let{offset:el,targetOffset:eo}=A,[ea,es]=G(M,el),[eh,ed]=G(e,eo);e.x-=eh,e.y-=ed;let[eu,ec]=A.points||[],ep=V(ec),eg=V(eu),ef=U(e,ep),em=U(M,eg),eb={...A},ey=[eg,ep],ev=ef.x-em.x+ea,e_=ef.y-em.y+es;function l(e,t,i=ee){let r=M.x+e,n=M.y+t,o=Math.max(r,i.left),a=Math.max(n,i.top);return Math.max(0,(Math.min(r+D,i.right)-o)*(Math.min(n+H,i.bottom)-a))}let eC=l(ev,e_),ex=l(ev,e_,Q),ew=U(e,["t","l"]),eS=U(M,["t","l"]),eA=U(e,["b","r"]),ek=U(M,["b","r"]),{adjustX:eM,adjustY:eT,shiftX:eR,shiftY:eE}=A.overflow||{},eP=e=>"boolean"==typeof e?e:e>=0;function s(){d=(h=M.y+e_)+H,f=(c=M.x+ev)+D}s();let eB=eP(eT),eI=eg[0]===ep[0];if(eB&&"t"===eg[0]&&(d>et.bottom||g.current.bt)){let e=e_;eI?e-=H-W:e=ew.y-ek.y-es;let t=l(ev,e),i=l(ev,e,Q);t>eC||t===eC&&(!q||i>=ex)?(g.current.bt=!0,e_=e,es=-es,ey=[K(ey[0],0),K(ey[1],0)]):g.current.bt=!1}if(eB&&"b"===eg[0]&&(h<et.top||g.current.tb)){let e=e_;eI?e+=H-W:e=eA.y-eS.y-es;let t=l(ev,e),i=l(ev,e,Q);t>eC||t===eC&&(!q||i>=ex)?(g.current.tb=!0,e_=e,es=-es,ey=[K(ey[0],0),K(ey[1],0)]):g.current.tb=!1}let eL=eP(eM),eF=eg[1]===ep[1];if(eL&&"l"===eg[1]&&(f>et.right||g.current.rl)){let e=ev;eF?e-=D-N:e=ew.x-ek.x-ea;let t=l(e,e_),i=l(e,e_,Q);t>eC||t===eC&&(!q||i>=ex)?(g.current.rl=!0,ev=e,ea=-ea,ey=[K(ey[0],1),K(ey[1],1)]):g.current.rl=!1}if(eL&&"r"===eg[1]&&(c<et.left||g.current.lr)){let e=ev;eF?e+=D-N:e=eA.x-eS.x-ea;let t=l(e,e_),i=l(e,e_,Q);t>eC||t===eC&&(!q||i>=ex)?(g.current.lr=!0,ev=e,ea=-ea,ey=[K(ey[0],1),K(ey[1],1)]):g.current.lr=!1}eb.points=[ey[0].join(""),ey[1].join("")],s();let eH=!0===eR?0:eR;"number"==typeof eH&&(c<Q.left&&(ev-=c-Q.left-ea,e.x+N<Q.left+eH&&(ev+=e.x-Q.left+N-eH)),f>Q.right&&(ev-=f-Q.right-ea,e.x>Q.right-eH&&(ev+=e.x-Q.right+eH)));let eO=!0===eE?0:eE;"number"==typeof eO&&(h<Q.top&&(e_-=h-Q.top-es,e.y+W<Q.top+eO&&(e_+=e.y-Q.top+W-eO)),d>Q.bottom&&(e_-=d-Q.bottom-es,e.y>Q.bottom-eO&&(e_+=e.y-Q.bottom+eO)));let eD=M.x+ev,ez=M.y+e_,eW=e.x,eZ=e.y,eN=Math.max(eD,eW),e$=Math.min(eD+D,eW+N),ej=Math.max(ez,eZ),eG=Math.min(ez+H,eZ+W);a?.(t,eb);let eV=ei.right-M.x-(ev+M.width),eU=ei.bottom-M.y-(e_+M.height);1===er&&(ev=Math.floor(ev),eV=Math.floor(eV)),1===en&&(e_=Math.floor(e_),eU=Math.floor(eU)),u({ready:!0,offsetX:ev/er,offsetY:e_/en,offsetR:eV/er,offsetB:eU/en,arrowX:((eN+e$)/2-eD)/er,arrowY:((ej+eG)/2-ez)/en,scaleX:er,scaleY:en,align:eb})}}),m=()=>{u(e=>({...e,ready:!1}))};return(0,s.Z)(m,[r]),(0,s.Z)(()=>{e||m()},[e]),[d.ready,d.offsetX,d.offsetY,d.offsetR,d.offsetB,d.arrowX,d.arrowY,d.scaleX,d.scaleY,d.align,()=>{c.current+=1;let e=c.current;Promise.resolve().then(()=>{c.current===e&&f()})}]}function Y(){let e=l.useRef(null),t=()=>{e.current&&(clearTimeout(e.current),e.current=null)};return l.useEffect(()=>()=>{t()},[]),(i,r)=>{t(),0===r?i():e.current=setTimeout(()=>{i()},1e3*r)}}function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let J=e=>{let{prefixCls:t,isMobile:i,ready:r,open:n,align:o,offsetR:a,offsetB:s,offsetX:h,offsetY:d,arrowPos:u,popupSize:c,motion:p,uniqueContainerClassName:g,uniqueContainerStyle:f}=e,m=`${t}-unique-container`,[b,y]=l.useState(!1),v=P(i,r,n,o,a,s,h,d),_=l.useRef(v);r&&(_.current=v);let x={};return c&&(x.width=c.width,x.height=c.height),l.createElement(k.ZP,q({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,leavedClassName:`${m}-hidden`},p,{visible:n,onVisibleChanged:e=>{y(e)}}),({className:e,style:t})=>{let i=(0,C.W)(m,e,g,{[`${m}-visible`]:b});return l.createElement("div",{className:i,style:{"--arrow-x":`${u?.x||0}px`,"--arrow-y":`${u?.y||0}px`,..._.current,...x,...t,...f}})})},Q=({children:e,postTriggerProps:t})=>{let[i,r,n,o]=function(){let[e,t]=l.useState(null),[i,r]=l.useState(!1),[n,o]=l.useState(!1),a=l.useRef(null);return[(0,p.zX)(e=>{!1===e?(a.current=null,r(!1)):n&&i?a.current=e:(r(!0),t(e),a.current=null,i||o(!0))}),i,e,(0,p.zX)(e=>{e?(o(!1),a.current&&(t(a.current),a.current=null)):(o(!1),a.current=null)})]}(),a=l.useMemo(()=>n&&t?t(n):n,[n,t]),[s,h]=l.useState(null),[d,u]=l.useState(null),c=l.useRef(null),g=(0,p.zX)(e=>{c.current=e,(0,w.Sh)(e)&&s!==e&&h(e)}),f=l.useRef(null),m=Y(),b=(0,p.zX)((e,t)=>{f.current=t,m(()=>{i(e)},e.delay)}),y=e=>{m(()=>{f.current?.()||i(!1)},e)},v=(0,p.zX)(e=>{o(e)}),[x,S,A,k,M,T,R,,,E,P]=X(r,s,a?.target,a?.popupPlacement,a?.builtinPlacements||{},a?.popupAlign,void 0,!1),B=l.useMemo(()=>{if(!a)return"";let e=D(a.builtinPlacements||{},a.prefixCls||"",E,!1);return(0,C.W)(e,a.getPopupClassNameFromAlign?.(E))},[E,a?.getPopupClassNameFromAlign,a?.builtinPlacements,a?.prefixCls]),H=l.useMemo(()=>({show:b,hide:y}),[]);l.useEffect(()=>{P()},[a?.target]);let O=(0,p.zX)(()=>(P(),Promise.resolve())),z=l.useRef({}),W=l.useContext(L),Z=l.useMemo(()=>({registerSubPopup:(e,t)=>{z.current[e]=t,W?.registerSubPopup(e,t)}}),[W]),N=a?.prefixCls;return l.createElement(F.Provider,{value:H},e,a&&l.createElement(L.Provider,{value:Z},l.createElement(I,{ref:g,portal:_,onEsc:a.onEsc,prefixCls:N,popup:a.popup,className:(0,C.W)(a.popupClassName,B,`${N}-unique-controlled`),style:a.popupStyle,target:a.target,open:r,keepDom:!0,fresh:!0,autoDestroy:!1,onVisibleChanged:v,ready:x,offsetX:S,offsetY:A,offsetR:k,offsetB:M,onAlign:P,onPrepare:O,onResize:e=>u({width:e.offsetWidth,height:e.offsetHeight}),arrowPos:{x:T,y:R},align:E,zIndex:a.zIndex,mask:a.mask,arrow:a.arrow,motion:a.popupMotion,maskMotion:a.maskMotion,getPopupContainer:a.getPopupContainer},l.createElement(J,{prefixCls:N,isMobile:!1,ready:x,open:r,align:E,offsetR:k,offsetB:M,offsetX:S,offsetY:A,arrowPos:{x:T,y:R},popupSize:d,motion:a.popupMotion,uniqueContainerClassName:(0,C.W)(a.uniqueContainerClassName,B),uniqueContainerStyle:a.uniqueContainerStyle}))))},ee=function(e=_){return l.forwardRef((t,i)=>{var r;let a,h,{prefixCls:d="rc-trigger-popup",children:u,action:c="hover",showAction:f,hideAction:m,popupVisible:b,defaultPopupVisible:y,onOpenChange:v,afterOpenChange:_,onPopupVisibleChange:k,afterPopupVisibleChange:M,mouseEnterDelay:T,mouseLeaveDelay:R=.1,focusDelay:E,blurDelay:P,mask:B,maskClosable:O=!0,getPopupContainer:Z,forceRender:N,autoDestroy:$,popup:j,popupClassName:G,uniqueContainerClassName:V,uniqueContainerStyle:U,popupStyle:K,popupPlacement:q,builtinPlacements:J={},popupAlign:Q,zIndex:ee,stretch:et,getPopupClassNameFromAlign:ei,fresh:er,unique:en,alignPoint:el,onPopupClick:eo,onPopupAlign:ea,arrow:es,popupMotion:eh,maskMotion:ed,mobile:eu,...ec}=t,ep=void 0===b,eg=!!eu,ef=l.useRef({}),em=l.useContext(L),eb=l.useMemo(()=>({registerSubPopup:(e,t)=>{ef.current[e]=t,em?.registerSubPopup(e,t)}}),[em]),ey=l.useContext(F),ev=(0,g.Z)(),[e_,eC]=l.useState(null),ex=l.useRef(null),ew=(0,A.Z)(e=>{ex.current=e,(0,w.Sh)(e)&&e_!==e&&eC(e),em?.registerSubPopup(ev,e)}),[eS,eA]=l.useState(null),ek=l.useRef(null),eM=(0,A.Z)(e=>{let t=(0,w.bn)(e);(0,w.Sh)(t)&&eS!==t&&(eA(t),ek.current=t)}),eT={},eR=(0,A.Z)(e=>eS?.contains(e)||(0,S.A)(eS)?.host===e||e===eS||e_?.contains(e)||(0,S.A)(e_)?.host===e||e===e_||Object.values(ef.current).some(t=>t?.contains(e)||e===t)),eE=es?{...!0!==es?es:{}}:null,[eP,eB]=(0,p.zk)(y||!1,b),eI=eP||!1,eL=l.useMemo(()=>{let e="function"==typeof u?u({open:eI}):u;return l.Children.only(e)},[u,eI]),eF=eL?.props||{},eH=(0,A.Z)(()=>eI),eO=(0,A.Z)((e=0)=>({popup:j,target:eS,delay:e,prefixCls:d,popupClassName:G,uniqueContainerClassName:V,uniqueContainerStyle:U,popupStyle:K,popupPlacement:q,builtinPlacements:J,popupAlign:Q,zIndex:ee,mask:B,maskClosable:O,popupMotion:eh,maskMotion:ed,arrow:eE,getPopupContainer:Z,getPopupClassNameFromAlign:ei,id:ev,onEsc:eN}));(0,s.Z)(()=>{ey&&en&&eS&&!ep&&!em&&(eI?ey.show(eO(T),eH):ey.hide(R))},[eI,eS]);let eD=l.useRef(eI);eD.current=eI;let ez=(0,A.Z)(e=>{(0,o.flushSync)(()=>{eI!==e&&(eB(e),v?.(e),k?.(e))})}),eW=Y(),eZ=(e,t=0)=>void 0!==b?void eW(()=>{ez(e)},t):ey&&en&&ep&&!em?void(e?ey.show(eO(t),eH):ey.hide(t)):void eW(()=>{ez(e)},t);function eN({top:e}){e&&eZ(!1)}let[e$,ej]=l.useState(!1);(0,s.Z)(e=>{(!e||eI)&&ej(!0)},[eI]);let[eG,eV]=l.useState(null),[eU,eK]=l.useState(null),eX=e=>{eK([e.clientX,e.clientY])},[eY,eq,eJ,eQ,e0,e1,e2,e3,e4,e5,e6]=X(eI,e_,el&&null!==eU?eU:eS,q,J,Q,ea,eg),[e8,e7]=l.useMemo(()=>{let e=H(f??c),t=H(m??c),i=new Set(e),r=new Set(t);return i.has("hover")&&!i.has("click")&&i.add("touch"),r.has("hover")&&!r.has("click")&&r.add("touch"),[i,r]},[c,f,m]),e9=e8.has("click"),te=e7.has("click")||e7.has("contextMenu"),tt=(0,A.Z)(()=>{e$||e6()});r=()=>{eD.current&&el&&te&&eZ(!1)},(0,s.Z)(()=>{if(eI&&eS&&e_){let t=W(eS),i=W(e_),n=z(e_),l=new Set([n,...t,...i]);function e(){tt(),r()}return l.forEach(t=>{t.addEventListener("scroll",e,{passive:!0})}),n.addEventListener("resize",e,{passive:!0}),tt(),()=>{l.forEach(t=>{t.removeEventListener("scroll",e),n.removeEventListener("resize",e)})}}},[eI,eS,e_]),(0,s.Z)(()=>{tt()},[eU,q]),(0,s.Z)(()=>{eI&&!J?.[q]&&tt()},[JSON.stringify(Q)]);let ti=l.useMemo(()=>{let e=D(J,d,e5,el);return(0,C.W)(e,ei?.(e5))},[e5,ei,J,d,el]);l.useImperativeHandle(i,()=>({nativeElement:ek.current,popupElement:ex.current,forceAlign:tt}));let[tr,tn]=l.useState(0),[tl,to]=l.useState(0),ta=()=>{if(et&&eS){let e=eS.getBoundingClientRect();tn(e.width),to(e.height)}};function ts(e,t,i,r,n){eT[e]=(l,...o)=>{n&&n()||(r?.(l),eZ(t,i)),eF[e]?.(l,...o)}}(0,s.Z)(()=>{eG&&(e6(),eG(),eV(null))},[eG]);let th=e8.has("touch"),td=e7.has("touch"),tu=l.useRef(!1);(th||td)&&(eT.onTouchStart=(...e)=>{tu.current=!0,eD.current&&td?eZ(!1):!eD.current&&th&&eZ(!0),eF.onTouchStart?.(...e)}),(e9||te)&&(eT.onClick=(e,...t)=>{eD.current&&te?eZ(!1):!eD.current&&e9&&(eX(e),eZ(!0)),eF.onClick?.(e,...t),tu.current=!1});let tc=function(e,t,i,r,n,o,a,s){let h=l.useRef(e);h.current=e;let d=l.useRef(!1);return l.useEffect(()=>{if(t&&r&&(!n||o)){let e=()=>{d.current=!1},t=e=>{!h.current||a(e.composedPath?.()?.[0]||e.target)||d.current||s(!1)},n=z(r);n.addEventListener("pointerdown",e,!0),n.addEventListener("mousedown",t,!0),n.addEventListener("contextmenu",t,!0);let l=(0,S.A)(i);return l&&(l.addEventListener("mousedown",t,!0),l.addEventListener("contextmenu",t,!0)),()=>{n.removeEventListener("pointerdown",e,!0),n.removeEventListener("mousedown",t,!0),n.removeEventListener("contextmenu",t,!0),l&&(l.removeEventListener("mousedown",t,!0),l.removeEventListener("contextmenu",t,!0))}}},[t,i,r,n,o]),function(){d.current=!0}}(eI,te||td,eS,e_,B,O,eR,eZ),tp=e8.has("hover"),tg=e7.has("hover"),tf=()=>tu.current;if(tp){let e=e=>{eX(e)};ts("onMouseEnter",!0,T,e,tf),ts("onPointerEnter",!0,T,e,tf),a=e=>{(eI||e$)&&e_?.contains(e.target)&&eZ(!0,T)},el&&(eT.onMouseMove=e=>{eF.onMouseMove?.(e)})}tg&&(ts("onMouseLeave",!1,R,void 0,tf),ts("onPointerLeave",!1,R,void 0,tf),h=()=>{eZ(!1,R)}),e8.has("focus")&&ts("onFocus",!0,E),e7.has("focus")&&ts("onBlur",!1,P),e8.has("contextMenu")&&(eT.onContextMenu=(e,...t)=>{eD.current&&e7.has("contextMenu")?eZ(!1):(eX(e),eZ(!0)),e.preventDefault(),eF.onContextMenu?.(e,...t)});let tm=l.useRef(!1);tm.current||=N||eI||e$;let tb={...eF,...eT},ty={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach(e=>{ec[e]&&(ty[e]=(...t)=>{tb[e]?.(...t),ec[e](...t)})}),(0,x.yU)(eI,eS,()=>{ta(),tt()});let tv=(0,n.x1)(eM,(0,n.C4)(eL)),t_=l.cloneElement(eL,{...tb,...ty,ref:tv});return l.createElement(l.Fragment,null,t_,tm.current&&(!ey||!en)&&l.createElement(L.Provider,{value:eb},l.createElement(I,{portal:e,ref:ew,prefixCls:d,popup:j,className:(0,C.W)(G,!eg&&ti),style:K,target:eS,onMouseEnter:a,onMouseLeave:h,onPointerEnter:a,zIndex:ee,open:eI,keepDom:e$,fresh:er,onClick:eo,onPointerDownCapture:tc,mask:B,motion:eh,maskMotion:ed,onVisibleChanged:e=>{ej(!1),e6(),_?.(e),M?.(e)},onPrepare:()=>new Promise(e=>{ta(),eV(()=>e)}),forceRender:N,autoDestroy:$||!1,getPopupContainer:Z,onEsc:eN,align:e5,arrow:eE,arrowPos:{x:e1,y:e2},ready:eY,offsetX:eq,offsetY:eJ,offsetR:eQ,offsetB:e0,onAlign:tt,stretch:et,targetWidth:tr/e3,targetHeight:tl/e4,mobile:eu})))})}(_)},48071:function(e,t,i){i.d(t,{Z:()=>function e(t,i={}){let l=[];return n.Children.forEach(t,t=>{(null!=t||i.keepEmpty)&&(Array.isArray(t)?l=l.concat(e(t)):(0,r.Z)(t)&&t.props?l=l.concat(e(t.props.children,i)):l.push(t))}),l}});var r=i(66608),n=i(44194)},64438:function(e,t,i){i.d(t,{Z:()=>r});function r(){return!!("undefined"!=typeof window&&window.document&&window.document.createElement)}},90054:function(e,t,i){i.d(t,{jL:()=>c,hq:()=>p});var r=i(64438);let n="data-rc-order",l="data-rc-priority",o=new Map;function a({mark:e}={}){return e?e.startsWith("data-")?e:`data-${e}`:"rc-util-key"}function s(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function h(e){return Array.from((o.get(e)||e).children).filter(e=>"STYLE"===e.tagName)}function d(e,t={}){if(!(0,r.Z)())return null;let{csp:i,prepend:o,priority:a=0}=t,u="queue"===o?"prependQueue":o?"prepend":"append",c="prependQueue"===u,p=document.createElement("style");p.setAttribute(n,u),c&&a&&p.setAttribute(l,`${a}`),i?.nonce&&(p.nonce=i?.nonce),p.innerHTML=e;let g=s(t),{firstChild:f}=g;if(o){if(c){let e=(t.styles||h(g)).filter(e=>!!["prepend","prependQueue"].includes(e.getAttribute(n))&&a>=Number(e.getAttribute(l)||0));if(e.length)return g.insertBefore(p,e[e.length-1].nextSibling),p}g.insertBefore(p,f)}else g.appendChild(p);return p}function u(e,t={}){let{styles:i}=t;return(i||=h(s(t))).find(i=>i.getAttribute(a(t))===e)}function c(e,t={}){let i=u(e,t);i&&s(t).removeChild(i)}function p(e,t,i={}){let r=s(i),n=h(r),l={...i,styles:n},c=o.get(r);if(!c||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);let i=t;for(;i;){if(i===e)return!0;i=i.parentNode}return!1}(document,c)){let e=d("",l),{parentNode:t}=e;o.set(r,t),r.removeChild(e)}let g=u(t,l);if(g)return l.csp?.nonce&&g.nonce!==l.csp?.nonce&&(g.nonce=l.csp?.nonce),g.innerHTML!==e&&(g.innerHTML=e),g;let f=d(e,l);return f.setAttribute(a(l),t),f}},51827:function(e,t,i){function r(e){return e instanceof HTMLElement||e instanceof SVGElement}function n(e){return e&&"object"==typeof e&&r(e.nativeElement)?e.nativeElement:r(e)?e:null}i.d(t,{Sh:()=>r,bn:()=>n})},56899:function(e,t,i){i.d(t,{Z:()=>r});let r=e=>{if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){let{width:t,height:i}=e.getBBox();if(t||i)return!0}if(e.getBoundingClientRect){let{width:t,height:i}=e.getBoundingClientRect();if(t||i)return!0}}return!1}},37410:function(e,t,i){function r(e){return e?.getRootNode?.()}function n(e){return r(e)instanceof ShadowRoot?r(e):null}i.d(t,{A:()=>n})},93676:function(e,t,i){i.d(t,{Z:()=>n});let r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){let{keyCode:t}=e;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=r.F1&&t<=r.F12)return!1;switch(t){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=r.ZERO&&e<=r.NINE||e>=r.NUM_ZERO&&e<=r.NUM_MULTIPLY||e>=r.A&&e<=r.Z||-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},isEditableTarget:function(e){let t=e.target;if(!(t instanceof HTMLElement))return!1;let i=t.tagName;return"INPUT"===i||"TEXTAREA"===i||"SELECT"===i||!!t.isContentEditable}},n=r},66608:function(e,t,i){i.d(t,{Z:()=>o});let r=Symbol.for("react.element"),n=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function o(e){return e&&"object"==typeof e&&(e.$$typeof===r||e.$$typeof===n)&&e.type===l}},9708:function(e,t,i){i.d(t,{Z:()=>l});var r=i(44194),n=i(68176);function l(e,t){let[i,l]=(0,r.useState)(e),o=void 0!==t?t:i;return(0,n.Z)(e=>{e||l(t)},[t]),[o,l]}},26560:function(e,t,i){i.d(t,{Z:()=>n});var r=i(44194);let n=function(e){let t=r.useRef(e);return t.current=e,r.useCallback((...e)=>t.current?.(...e),[])}},32162:function(e,t,i){i.d(t,{Z:()=>a});var r,n=i(44194);let l=0,o={...r||(r=i.t(n,2))}.useId,a=o?function(e){let t=o();return e||t}:function(e){let[t,i]=n.useState("ssr-id");return(n.useEffect(()=>{let e=l;l+=1,i(`rc_unique_${e}`)},[]),e)?e:t}},68176:function(e,t,i){i.d(t,{Z:()=>a,o:()=>o});var r=i(44194);let n=(0,i(64438).Z)()?r.useLayoutEffect:r.useEffect,l=(e,t)=>{let i=r.useRef(!0);n(()=>e(i.current),t),n(()=>(i.current=!1,()=>{i.current=!0}),[])},o=(e,t)=>{l(t=>{if(!t)return e()},t)},a=l},55668:function(e,t,i){i.d(t,{Z:()=>n});var r=i(44194);function n(e,t,i){let n=r.useRef({});return(!("value"in n.current)||i(n.current.condition,t))&&(n.current.value=e(),n.current.condition=t),n.current.value}},25820:function(e,t,i){i.d(t,{Z:()=>n});var r=i(44194);function n(e){let t=r.useRef(!1),[i,n]=r.useState(e);return r.useEffect(()=>(t.current=!1,()=>{t.current=!0}),[]),[i,function(e,i){i&&t.current||n(e)}]}},10894:function(e,t,i){i.d(t,{qo:()=>h.Z,zX:()=>r.Z,x1:()=>l.x1,CE:()=>s.Z,bT:()=>o.bT,TS:()=>o.TS,zk:()=>n.Z,Kp:()=>a.ZP});var r=i(26560);i(68176),i(25820);var n=i(9708),l=i(73260),o=i(46136),a=i(57705),s=i(52074),h=i(48071)},64246:function(e,t,i){i.d(t,{Z:()=>n});var r=i(57705);let n=function(e,t,i=!1){let n=new Set;return function e(t,l,o=1){let a=n.has(t);if((0,r.ZP)(!a,"Warning: There may be circular references"),a)return!1;if(t===l)return!0;if(i&&o>1)return!1;n.add(t);let s=o+1;if(Array.isArray(t)){if(!Array.isArray(l)||t.length!==l.length)return!1;for(let i=0;i<t.length;i++)if(!e(t[i],l[i],s))return!1;return!0}if(t&&l&&"object"==typeof t&&"object"==typeof l){let i=Object.keys(t);return i.length===Object.keys(l).length&&i.every(i=>e(t[i],l[i],s))}return!1}(e,t)}},52074:function(e,t,i){i.d(t,{Z:()=>r});function r(e,t){let i=Object.assign({},e);return Array.isArray(t)&&t.forEach(e=>{delete i[e]}),i}},6207:function(e,t,i){i.d(t,{Z:()=>a});let r=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,n=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,l=`${r} ${n}`.split(/[\s\n]+/);function o(e,t){return 0===e.indexOf(t)}function a(e,t=!1){let i;i=!1===t?{aria:!0,data:!0,attr:!0}:!0===t?{aria:!0}:{...t};let r={};return Object.keys(e).forEach(t=>{(i.aria&&("role"===t||o(t,"aria-"))||i.data&&o(t,"data-")||i.attr&&l.includes(t))&&(r[t]=e[t])}),r}},18839:function(e,t,i){i.d(t,{Z:()=>s});let r=e=>+setTimeout(e,16),n=e=>clearTimeout(e);"undefined"!=typeof window&&"requestAnimationFrame"in window&&(r=e=>window.requestAnimationFrame(e),n=e=>window.cancelAnimationFrame(e));let l=0,o=new Map,a=(e,t=1)=>{let i=l+=1;return!function t(n){if(0===n)o.delete(i),e();else{let e=r(()=>{t(n-1)});o.set(i,e)}}(t),i};a.cancel=e=>{let t=o.get(e);return o.delete(e),n(t)};let s=a},73260:function(e,t,i){i.d(t,{C4:()=>p,Yr:()=>u,sQ:()=>h,x1:()=>d});var r=i(44194),n=i(87101),l=i(55668),o=i(66608);let a=Number(r.version.split(".")[0]),s=(e,t)=>{"function"==typeof e?e(t):"object"==typeof e&&e&&"current"in e&&(e.current=t)},h=(...e)=>{let t=e.filter(Boolean);return t.length<=1?t[0]:t=>{e.forEach(e=>{s(e,t)})}},d=(...e)=>(0,l.Z)(()=>h(...e),e,(e,t)=>e.length!==t.length||e.every((e,i)=>e!==t[i])),u=e=>{if(!e)return!1;if(c(e)&&a>=19)return!0;let t=(0,n.isMemo)(e)?e.type.type:e.type;return("function"!=typeof t||!!t.prototype?.render||t.$$typeof===n.ForwardRef)&&("function"!=typeof e||!!e.prototype?.render||e.$$typeof===n.ForwardRef)};function c(e){return(0,r.isValidElement)(e)&&!(0,o.Z)(e)}let p=e=>e&&c(e)?e.props.propertyIsEnumerable("ref")?e.props.ref:e.ref:null},88659:function(e,t,i){i.d(t,{Z:()=>r});function r(e,t){let i=e;for(let e=0;e<t.length;e+=1){if(null==i)return;i=i[t[e]]}return i}},46136:function(e,t,i){i.d(t,{TS:()=>s,ZP:()=>n,bT:()=>a});var r=i(88659);function n(e,t,i,l=!1){return t.length&&l&&void 0===i&&!(0,r.Z)(e,t.slice(0,-1))?e:function e(t,i,r,n){let l;if(!i.length)return r;let[o,...a]=i;return l=t||"number"!=typeof o?Array.isArray(t)?[...t]:{...t}:[],n&&void 0===r&&1===a.length?delete l[o][a[0]]:l[o]=e(l[o],a,r,n),l}(e,t,i,l)}function l(e){return Array.isArray(e)?[]:{}}let o="undefined"==typeof Reflect?Object.keys:Reflect.ownKeys;function a(e,t={}){let{prepareArray:i}=t,s=i||(()=>[]),h=l(e[0]);return e.forEach(e=>{!function t(i,a){let d=new Set(a),u=(0,r.Z)(e,i),c=Array.isArray(u);if(c||"object"==typeof u&&null!==u&&Object.getPrototypeOf(u)===Object.prototype){if(!d.has(u)){d.add(u);let e=(0,r.Z)(h,i);c?h=n(h,i,s(e,u)):e&&"object"==typeof e||(h=n(h,i,l(u))),o(u).forEach(e=>{Object.getOwnPropertyDescriptor(u,e).enumerable&&t([...i,e],d)})}}else h=n(h,i,u)}([])}),h}function s(...e){return a(e)}},57705:function(e,t,i){i.d(t,{Kp:()=>l,Wn:()=>s,ZP:()=>h});let r={},n=[];function l(e,t){}function o(e,t){}function a(e,t,i){t||r[i]||(e(!1,i),r[i]=!0)}function s(e,t){a(l,e,t)}s.preMessage=e=>{n.push(e)},s.resetWarned=function(){r={}},s.noteOnce=function(e,t){a(o,e,t)};let h=s},14385:function(e,t,i){let r,n,l,o,a,s,h,d,u;i.d(t,{ZPm:()=>Fh});let c=e=>e;(e4=su||(su={}))["desktop-browser"]="desktop-browser",e4["mobile-browser"]="mobile-browser",e4.node="node",e4.worker="worker",e4.miniApp="miniApp",e4.wx="wx",e4.tt="tt",e4.harmony="harmony",e4["desktop-miniApp"]="desktop-miniApp",e4.lynx="lynx",(e5=sc||(sc={})).cartesianAxis="cartesianAxis",e5.cartesianBandAxis="cartesianAxis-band",e5.cartesianLinearAxis="cartesianAxis-linear",e5.cartesianTimeAxis="cartesianAxis-time",e5.cartesianLogAxis="cartesianAxis-log",e5.cartesianSymlogAxis="cartesianAxis-symlog",e5.polarAxis="polarAxis",e5.polarBandAxis="polarAxis-band",e5.polarLinearAxis="polarAxis-linear",e5.crosshair="crosshair",e5.cartesianCrosshair="cartesianCrosshair",e5.polarCrosshair="polarCrosshair",e5.dataZoom="dataZoom",e5.geoCoordinate="geoCoordinate",e5.indicator="indicator",e5.discreteLegend="discreteLegend",e5.continuousLegend="continuousLegend",e5.colorLegend="colorLegend",e5.sizeLegend="sizeLegend",e5.markLine="markLine",e5.markArea="markArea",e5.markPoint="markPoint",e5.polarMarkLine="polarMarkLine",e5.polarMarkArea="polarMarkArea",e5.polarMarkPoint="polarMarkPoint",e5.geoMarkPoint="geoMarkPoint",e5.tooltip="tooltip",e5.title="title",e5.player="player",e5.scrollBar="scrollBar",e5.label="label",e5.totalLabel="totalLabel",e5.brush="brush",e5.poptip="poptip",e5.customMark="customMark";var p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K,X,Y,q,J,Q,ee,et,ei,er,en,el,eo,ea,es,eh,ed,eu,ec,ep,eg,ef,em,eb,ey,ev,e_,eC,ex,ew,eS,eA,ek,eM,eT,eR,eE,eP,eB,eI,eL,eF,eH,eO,eD,ez,eW,eZ,eN,e$,ej,eG,eV,eU,eK,eX,eY,eq,eJ,eQ,e0,e1,e2,e3,e4,e5,e6,e8,e7,e9,te,tt,ti,tr,tn,tl,to,ta,ts,th,td,tu,tc,tp=i(99127),tg=i(74230),tf=i(28919);class tm{static GenAutoIncrementId(){return tm.auto_increment_id++}}tm.auto_increment_id=0;class tb{constructor(e){this.id=tm.GenAutoIncrementId(),this.registry=e}}let ty="named",tv="inject",t_="multi_inject",tC="inversify:tagged",tx="inversify:paramtypes",tw=(a7={},function(e){Object.prototype.hasOwnProperty;let t="function"==typeof Symbol,i=t&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=(t&&void 0!==Symbol.iterator&&Symbol.iterator,Object.create,Object.getPrototypeOf(Function)),n=("object"==typeof process&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL,Map),l=new WeakMap;function o(e,t,i){let r=l.get(e);if(s(r)){if(!i)return;r=new n,l.set(e,r)}let o=r.get(t);if(s(o)){if(!i)return;o=new n,r.set(t,o)}return o}function a(e,t,i){let r=o(t,i,!1);return!s(r)&&!!r.has(e)}function s(e){return void 0===e}function h(e){return null===e}function d(e){return"object"==typeof e?null!==e:"function"==typeof e}function u(e){let t=function(e,t){switch(function(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}let r="string",n=function(e,t){let i=e[t];if(null!=i){if(!c(i))throw TypeError();return i}}(e,i);if(void 0!==n){let t=n.call(e,r);if(d(t))throw TypeError();return t}return function(e,t){if("string"===t){let t=e.toString;if(c(t)){let i=t.call(e);if(!d(i))return i}let i=e.valueOf;if(c(i)){let t=i.call(e);if(!d(t))return t}}else{let t=e.valueOf;if(c(t)){let i=t.call(e);if(!d(i))return i}let i=e.toString;if(c(i)){let t=i.call(e);if(!d(t))return t}}throw TypeError()}(e,r)}(e,0);return"symbol"==typeof t?t:""+t}function c(e){return"function"==typeof e}function p(e){let t=Object.getPrototypeOf(e);if("function"!=typeof e||e===r||t!==r)return t;let i=e.prototype,n=i&&Object.getPrototypeOf(i);if(null==n||n===Object.prototype)return t;let l=n.constructor;return"function"!=typeof l||l===e?t:l}e("defineMetadata",function(e,t,i,r){var n,l;if(!d(i))throw TypeError();return n=e,l=t,void o(i,r,!0).set(n,l)}),e("hasMetadata",function(e,t,i){if(!d(t))throw TypeError();return s(i)||(i=u(i)),function e(t,i,r){if(a(t,i,r))return!0;let n=p(i);return null!==n&&e(t,n,r)}(e,t,i)}),e("hasOwnMetadata",function(e,t,i){if(!d(t))throw TypeError();return s(i)||(i=u(i)),a(e,t,i)}),e("getMetadata",function(e,t,i){if(!d(t))throw TypeError();return s(i)||(i=u(i)),function e(t,i,r){if(a(t,i,r)){var n=t,l=i,h=r;let e=o(l,h,!1);return s(e)?void 0:e.get(n)}let d=p(i);return null===d?void 0:e(t,d,r)}(e,t,i)})}(function(e,t){"function"!=typeof a7[e]&&Object.defineProperty(a7,e,{configurable:!0,writable:!0,value:t}),a9&&a9(e,t)}),a7);function tS(){return function(e){return tw.defineMetadata(tx,null,e),e}}class tA{constructor(e,t){this.key=e,this.value=t}toString(){return this.key===ty?`named: ${String(this.value).toString()} `:`tagged: { key:${this.key.toString()}, value: ${String(this.value)} }`}}function tk(e){return(t,i,r)=>{var n;let l,o;n=r.toString(),l={},tw.hasOwnMetadata(tC,t)&&(l=tw.getMetadata(tC,t)),void 0===(o=l[n])&&(o=[]),o.push(e),l[n]=o,tw.defineMetadata(tC,l,t)}}function tM(e){return t=>(i,r,n)=>tk(new tA(e,t))(i,r,n)}let tT=tM(tv);function tR(e){return tk(new tA(ty,e))}let tE=Symbol("ContributionProvider");class tP{constructor(e,t){this.serviceIdentifier=e,this.container=t,tI.setStore(this.serviceIdentifier,this)}getContributions(){return this.caches||(this.caches=[],this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier))),this.caches}refresh(){this.caches&&(this.caches.length=0,this.container&&this.container.isBound(this.serviceIdentifier)&&this.caches.push(...this.container.getAll(this.serviceIdentifier)))}}function tB(e,t){e(tE).toDynamicValue(({container:e})=>new tP(t,e)).inSingletonScope().whenTargetNamed(t)}class tI{static getStore(e){return this.store.get(e)}static setStore(e,t){this.store.set(e,t)}static refreshAllContributions(){this.store.forEach(e=>{e.refresh()})}}tI.store=new Map;class tL{constructor(e,t){this._args=e,this.name=t,this.taps=[]}tap(e,t){this._tap("sync",e,t)}unTap(e,t){let i="string"==typeof e?e.trim():e.name;i&&(this.taps=this.taps.filter(e=>!(e.name===i&&(!t||e.fn===t))))}_parseOptions(e,t,i){let r;if("string"==typeof t)r={name:t.trim()};else if("object"!=typeof t||null===t)throw Error("Invalid tap options");if("string"!=typeof r.name||""===r.name)throw Error("Missing name for tap");return Object.assign({type:e,fn:i},r)}_tap(e,t,i){this._insert(this._parseOptions(e,t,i))}_insert(e){let t;"string"==typeof e.before?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before));let i=0;"number"==typeof e.stage&&(i=e.stage);let r=this.taps.length;for(;r>0;){r--;let e=this.taps[r];this.taps[r+1]=e;let n=e.stage||0;if(t){if(t.has(e.name)){t.delete(e.name);continue}if(t.size>0)continue}if(!(n>i)){r++;break}}this.taps[r]=e}}class tF extends tL{call(...e){this.taps.map(e=>e.fn).forEach(t=>t(...e))}}let tH=Symbol.for("EnvContribution"),tO=Symbol.for("VGlobal"),tD={Singleton:"Singleton",Transient:"Transient"},tz={ConstantValue:"ConstantValue",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid"};class tW{constructor(e,t){this.id=tm.GenAutoIncrementId(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=tz.Invalid,this.constraint=e=>!0,this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.dynamicValue=null}clone(){let e=new tW(this.serviceIdentifier,this.scope);return e.activated=e.scope===tD.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.provider=this.provider,e.constraint=this.constraint,e.cache=this.cache,e}}class tZ{getConstructorMetadata(e){return{compilerGeneratedMetadata:tw.getMetadata(tx,e),userGeneratedMetadata:tw.getMetadata(tC,e)||{}}}getPropertiesMetadata(e){throw Error("")}}let tN=e=>{let t=t=>{if(null==t)return!1;if(t.key===ty&&t.value===e)return!0;if(null==t.constructorArgsMetadata)return!1;let i=t.constructorArgsMetadata;for(let t=0;t<i.length;t++)if(i[t].key===ty&&i[t].value===e)return!0;return!1};return t.metaData=new tA(ty,e),t};class t${constructor(e){this._binding=e}inRequestScope(){throw Error("")}inSingletonScope(){return this._binding.scope=tD.Singleton,this}inTransientScope(){return this._binding.scope=tD.Transient,this}whenTargetNamed(e){return this._binding.constraint=tN(e),this}}class tj{constructor(e){this._binding=e}to(e){return this._binding.type=tz.Instance,this._binding.implementationType=e,new t$(this._binding)}toSelf(){let e=this._binding.serviceIdentifier;return this.to(e)}toDynamicValue(e){return this._binding.type=tz.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new t$(this._binding)}toConstantValue(e){return this._binding.type=tz.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=tD.Singleton,new t$(this._binding)}toFactory(e){return this._binding.type=tz.Factory,this._binding.factory=e,this._binding.scope=tD.Singleton,new t$(this._binding)}toService(e){this.toDynamicValue(t=>t.container.get(e))}}let tG=new class{constructor(e){let t=e||{};t.defaultScope=t.defaultScope||tD.Transient,this.options=t,this.id=tm.GenAutoIncrementId(),this._bindingDictionary=new Map,this._metadataReader=new tZ}load(e){let t=this._getContainerModuleHelpersFactory()(e.id);e.registry(t.bindFunction,t.unbindFunction,t.isboundFunction,t.rebindFunction)}get(e){let t=this._getNotAllArgs(e,!1);return this._get(t)}getAll(e){let t=this._getAllArgs(e);return this._get(t)}getTagged(e,t,i){let r=this._getNotAllArgs(e,!1,t,i);return this._get(r)}getNamed(e,t){return this.getTagged(e,ty,t)}isBound(e){return this._bindingDictionary.has(e)}bind(e){let t=new tW(e,this.options.defaultScope),i=this._bindingDictionary.get(e)||[];return i.push(t),this._bindingDictionary.set(e,i),new tj(t)}unbind(e){this._bindingDictionary.delete(e)}rebind(e){return this.unbind(e),this.bind(e)}_getContainerModuleHelpersFactory(){let e=(e,t)=>{e._binding.moduleId=t},t=t=>i=>{let r=this.bind(i);return e(r,t),r},i=()=>e=>this.unbind(e),r=()=>e=>this.isBound(e),n=t=>i=>{let r=this.rebind(i);return e(r,t),r};return e=>({bindFunction:t(e),isboundFunction:r(),rebindFunction:n(e),unbindFunction:i(),unbindAsyncFunction:e=>null})}_getNotAllArgs(e,t,i,r){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:i,value:r}}_getAllArgs(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}}_get(e){let t=[];return this._bindingDictionary.get(e.serviceIdentifier).filter(t=>t.constraint(e)).forEach(e=>{t.push(this._resolveFromBinding(e))}),e.isMultiInject||1!==t.length?t:t[0]}_getChildRequest(e){let t=e.implementationType,{userGeneratedMetadata:i}=this._metadataReader.getConstructorMetadata(t),r=Object.keys(i),n=[];for(let e=0;e<r.length;e++){let t=i[e],r={};t.forEach(e=>{r[e.key]=e.value});let l={inject:r[tv],multiInject:r[t_]},o=l.inject||l.multiInject,a={serviceIdentifier:o,constructorArgsMetadata:t},s=(this._bindingDictionary.get(o)||[]).filter(e=>e.constraint(a));if(s.length){let e={injectIdentifier:o,metadata:t,bindings:s};n.push(e)}}return n}_resolveFromBinding(e){let t=this._getResolvedFromBinding(e);return this._saveToScope(e,t),t}_getResolvedFromBinding(e){let t;switch(e.type){case tz.ConstantValue:case tz.Function:t=e.cache;break;case tz.Instance:t=this._resolveInstance(e,e.implementationType);break;default:t=e.dynamicValue({container:this})}return t}_resolveInstance(e,t){if(e.activated)return e.cache;let i=this._getChildRequest(e);return this._createInstance(t,i)}_createInstance(e,t){return t.length?new e(...this._resolveRequests(t)):new e}_resolveRequests(e){return e.map(e=>e.bindings.length>1?e.bindings.map(e=>this._resolveFromBinding(e)):this._resolveFromBinding(e.bindings[0]))}_saveToScope(e,t){e.scope===tD.Singleton&&(e.cache=t,e.activated=!0)}},tV=Symbol.for("RenderService");Symbol.for("BeforeRenderConstribution");let tU=new class{get renderService(){return this._renderService||(this._renderService=tG.get(tV)),this._renderService}},tK=0;class tX{constructor(){this.nextAnimationFrameCbs=new Map,this._rafHandle=null,this.runAnimationFrame=e=>{this._rafHandle=null;let t=this.nextAnimationFrameCbs;this.nextAnimationFrameCbs=new Map,t.forEach(t=>t(e))},this.tryRunAnimationFrameNextFrame=()=>{null===this._rafHandle&&0!==this.nextAnimationFrameCbs.size&&(this._rafHandle=tU.global.getRequestAnimationFrame()(this.runAnimationFrame))}}addAnimationFrameCb(e){return this.nextAnimationFrameCbs.set(++tK,e),this.tryRunAnimationFrameNextFrame(),tK}removeAnimationFrameCb(e){return!!this.nextAnimationFrameCbs.has(e)&&(this.nextAnimationFrameCbs.delete(e),!0)}}class tY{constructor(){this._listenerMap=new Map,this._eventListenerTransformer=e=>e}setEventListenerTransformer(e){this._eventListenerTransformer=e||(e=>e)}addEventListener(e,t,i){if(!t)return;let r=e=>{let i=this._eventListenerTransformer(e);"function"==typeof t?t(i):t.handleEvent&&t.handleEvent(i)};this._listenerMap.has(e)||this._listenerMap.set(e,new Map),this._listenerMap.get(e).set(t,r),this._nativeAddEventListener(e,r,i)}removeEventListener(e,t,i){var r;if(!t)return;let n=null==(r=this._listenerMap.get(e))?void 0:r.get(t);n&&(this._nativeRemoveEventListener(e,n,i),this._listenerMap.get(e).delete(t),0===this._listenerMap.get(e).size&&this._listenerMap.delete(e))}dispatchEvent(e){return this._nativeDispatchEvent(e)}clearAllEventListeners(){this._listenerMap.forEach((e,t)=>{e.forEach((e,i)=>{this._nativeRemoveEventListener(t,e,void 0)})}),this._listenerMap.clear()}_nativeAddEventListener(e,t,i){throw Error("_nativeAddEventListener must be implemented by derived classes")}_nativeRemoveEventListener(e,t,i){throw Error("_nativeRemoveEventListener must be implemented by derived classes")}_nativeDispatchEvent(e){throw Error("_nativeDispatchEvent must be implemented by derived classes")}}var tq=function(e,t){return function(i,r){t(i,r,e)}};let tJ=class extends tY{get env(){return this._env}get isImageAnonymous(){return this._isImageAnonymous}set isImageAnonymous(e){this._isImageAnonymous=e}get devicePixelRatio(){return this._env||this.setEnv("browser"),this.envContribution.getDevicePixelRatio()}get supportEvent(){return this._env||this.setEnv("browser"),this.envContribution.supportEvent}set supportEvent(e){this._env||this.setEnv("browser"),this.envContribution.supportEvent=e}get supportsTouchEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents}set supportsTouchEvents(e){this._env||this.setEnv("browser"),this.envContribution.supportsTouchEvents=e}get supportsPointerEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents}set supportsPointerEvents(e){this._env||this.setEnv("browser"),this.envContribution.supportsPointerEvents=e}get supportsMouseEvents(){return this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents}set supportsMouseEvents(e){this._env||this.setEnv("browser"),this.envContribution.supportsMouseEvents=e}get applyStyles(){return this._env||this.setEnv("browser"),this.envContribution.applyStyles}set applyStyles(e){this._env||this.setEnv("browser"),this.envContribution.applyStyles=e}constructor(e){super(),this.contributions=e,this._isImageAnonymous=!0,this._performanceRAFList=[],this.eventListenerTransformer=e=>e,this.id=tm.GenAutoIncrementId(),this.hooks={onSetEnv:new tF(["lastEnv","env","global"])},this.measureTextMethod="native",this.optimizeVisible=!1}_nativeAddEventListener(e,t,i){return this._env||this.setEnv("browser"),this.envContribution.addEventListener(e,t,i)}_nativeRemoveEventListener(e,t,i){return this._env||this.setEnv("browser"),this.envContribution.removeEventListener(e,t,i)}_nativeDispatchEvent(e){return this._env||this.setEnv("browser"),this.envContribution.dispatchEvent(e)}bindContribution(e){let t=[];if(this.contributions.getContributions().forEach(i=>{let r=i.configure(this,e);r&&r.then&&t.push(r)}),t.length)return Promise.all(t)}getDynamicCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getDynamicCanvasCount()}getStaticCanvasCount(){return this._env||this.setEnv("browser"),this.envContribution.getStaticCanvasCount()}setEnv(e,t){if(t&&!0===t.force||this._env!==e)return this.deactiveCurrentEnv(),this.activeEnv(e,t)}deactiveCurrentEnv(){this.envContribution&&this.envContribution.release()}activeEnv(e,t){let i=this._env;this._env=e;let r=this.bindContribution(t);if(r&&r.then)return r.then(()=>{this.envParams=t,this.hooks.onSetEnv.call(i,e,this)});this.envParams=t,this.hooks.onSetEnv.call(i,e,this)}setActiveEnvContribution(e){this.envContribution=e}createCanvas(e){return this._env||this.setEnv("browser"),this.envContribution.createCanvas(e)}createOffscreenCanvas(e){return this._env||this.setEnv("browser"),this.envContribution.createOffscreenCanvas(e)}releaseCanvas(e){return this._env||this.setEnv("browser"),this.envContribution.releaseCanvas(e)}getRequestAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getRequestAnimationFrame()}getSpecifiedRequestAnimationFrame(e){this._env||this.setEnv("browser"),this._performanceRAFList[e]||(this._performanceRAFList[e]=new tX);let t=this._performanceRAFList[e];return e=>t.addAnimationFrameCb(e)}getSpecifiedCancelAnimationFrame(e){if(this._env||this.setEnv("browser"),!this._performanceRAFList[e])return()=>!1;let t=this._performanceRAFList[e];return e=>t.removeAnimationFrameCb(e)}getCancelAnimationFrame(){return this._env||this.setEnv("browser"),this.envContribution.getCancelAnimationFrame()}getElementById(e){return this._env||this.setEnv("browser"),this.envContribution.getElementById?this.envContribution.getElementById(e):null}getRootElement(){return this._env||this.setEnv("browser"),this.envContribution.getRootElement?this.envContribution.getRootElement():null}getDocument(){return this._env||this.setEnv("browser"),this.envContribution.getDocument?this.envContribution.getDocument():null}mapToCanvasPoint(e,t){return this._env||this.setEnv("browser"),this.envContribution.mapToCanvasPoint?this.envContribution.mapToCanvasPoint(e,t):null}loadImage(e){return this._env||this.setEnv("browser"),this.envContribution.loadImage(e)}loadSvg(e){return this._env||this.setEnv("browser"),this.envContribution.loadSvg(e)}loadJson(e){return this._env||this.setEnv("browser"),this.envContribution.loadJson(e)}loadArrayBuffer(e){return this._env||this.setEnv("browser"),this.envContribution.loadArrayBuffer(e)}loadBlob(e){return this._env||this.setEnv("browser"),this.envContribution.loadBlob(e)}loadFont(e,t,i){var r,n,l,o;return r=this,n=void 0,l=void 0,o=function*(){return this._env||this.setEnv("browser"),this.envContribution.loadFont(e,t,i)},new(l||(l=Promise))(function(e,t){function i(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):((r=t.value)instanceof l?r:new l(function(e){e(r)})).then(i,a)}s((o=o.apply(r,n||[])).next())})}isChrome(){return null!=this._isChrome||(this._env||this.setEnv("browser"),this._isChrome="browser"===this._env&&navigator.userAgent.indexOf("Chrome")>-1),this._isChrome}isSafari(){return null!=this._isSafari||(this._env||this.setEnv("browser"),this._isSafari="browser"===this._env&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)),this._isSafari}getNativeAABBBounds(e){return this._env||this.setEnv("browser"),this.envContribution.getNativeAABBBounds(e)}removeDom(e){return this._env||this.setEnv("browser"),this.envContribution.removeDom(e)}createDom(e){return this._env||this.setEnv("browser"),this.envContribution.createDom(e)}updateDom(e,t){return this._env||this.setEnv("browser"),this.envContribution.updateDom(e,t)}getElementTop(e,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTop(e,t)}getElementLeft(e,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementLeft(e,t)}getElementTopLeft(e,t=!1){return this._env||this.setEnv("browser"),this.envContribution.getElementTopLeft(e,t)}isMacOS(){return this._env||this.setEnv("browser"),this.envContribution.isMacOS()}copyToClipBoard(e){return this._env||this.setEnv("browser"),this.envContribution.copyToClipBoard(e)}};tJ=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),tq(0,tT(tE)),tq(0,tR(tH)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],tJ),(se=sp||(sp={}))[se.estimate=0]="estimate",se[se.actualBounding=1]="actualBounding",se[se.fontBounding=2]="fontBounding";var tQ=i(69182),t0=i(8830),t1=i(85476);let t2=t0.BZ-1e-8;class t3{constructor(e){this.init(e)}init(e){this.bounds=e}arc(e,t,i,r,n,l){if(Math.abs(n-r)>t2)return this.bounds.add(e-i,t-i),void this.bounds.add(e+i,t+i);let o,a,s,h,d=1/0,u=-1/0,c=1/0,p=-1/0;function g(e){s=i*Math.cos(e),h=i*Math.sin(e),s<d&&(d=s),s>u&&(u=s),h<c&&(c=h),h>p&&(p=h)}if(g(r),g(n),n!==r)if((r%=t0.BZ)<0&&(r+=t0.BZ),(n%=t0.BZ)<0&&(n+=t0.BZ),n<r&&(l=!l,o=r,r=n,n=o),l)for(n-=t0.BZ,o=r-r%t0.ou,a=0;a<4&&o>n;++a,o-=t0.ou)g(o);else for(o=r-r%t0.ou+t0.ou,a=0;a<4&&o<n;++a,o+=t0.ou)g(o);this.bounds.add(e+d,t+c),this.bounds.add(e+u,t+p)}arcTo(e,t,i,r,n){this.bounds.add(e,t)}bezierCurveTo(e,t,i,r,n,l){this.bounds.add(e,t),this.bounds.add(i,r),this.bounds.add(n,l)}closePath(){}ellipse(){throw Error("ellipse")}lineTo(e,t){this.bounds.add(e,t)}moveTo(e,t){this.bounds.add(e,t)}quadraticCurveTo(e,t,i,r){this.bounds.add(e,t),this.bounds.add(i,r)}rect(e,t,i,r){this.bounds.add(e,t),this.bounds.add(e+i,t+r)}clear(){this.bounds.clear()}release(...e){}}var t4=i(63401);class t5{constructor(){this._curves=[],this.bounds=new t4.FB}get curves(){return this._curves}getCurveLengths(){return this._curves.map(e=>e.getLength())}getPointAt(e){return{x:0,y:0}}getLength(){return 0}getBounds(){return this.bounds}}let t6=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,t8={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7},t7={A:0,AT:1,C:2,Z:3,E:4,L:5,M:6,Q:7,R:8};(st=sg||(sg={}))[st.NONE=0]="NONE",st[st.UPDATE_BOUNDS=1]="UPDATE_BOUNDS",st[st.UPDATE_SHAPE=2]="UPDATE_SHAPE",st[st.CLEAR_SHAPE=253]="CLEAR_SHAPE",st[st.UPDATE_SHAPE_AND_BOUNDS=3]="UPDATE_SHAPE_AND_BOUNDS",st[st.INIT=179]="INIT",st[st.CLEAR_BOUNDS=254]="CLEAR_BOUNDS",st[st.UPDATE_GLOBAL_MATRIX=32]="UPDATE_GLOBAL_MATRIX",st[st.CLEAR_GLOBAL_MATRIX=223]="CLEAR_GLOBAL_MATRIX",st[st.UPDATE_LOCAL_MATRIX=16]="UPDATE_LOCAL_MATRIX",st[st.CLEAR_LOCAL_MATRIX=239]="CLEAR_LOCAL_MATRIX",st[st.UPDATE_GLOBAL_LOCAL_MATRIX=48]="UPDATE_GLOBAL_LOCAL_MATRIX",st[st.UPDATE_LAYOUT=128]="UPDATE_LAYOUT",st[st.CLEAR_LAYOUT=127]="CLEAR_LAYOUT",(si=sf||(sf={}))[si.GLOBAL=1]="GLOBAL",si[si.LOCAL=16]="LOCAL",si[si.GLOBAL_ACCURATE=3]="GLOBAL_ACCURATE",si[si.LOCAL_ACCURATE=48]="LOCAL_ACCURATE",(sr=sm||(sm={}))[sr.INIT=0]="INIT",sr[sr.DEFAULT=1]="DEFAULT",sr[sr.STATE=2]="STATE",sr[sr.ANIMATE_BIND=10]="ANIMATE_BIND",sr[sr.ANIMATE_PLAY=11]="ANIMATE_PLAY",sr[sr.ANIMATE_START=12]="ANIMATE_START",sr[sr.ANIMATE_UPDATE=13]="ANIMATE_UPDATE",sr[sr.ANIMATE_END=14]="ANIMATE_END",sr[sr.TRANSLATE=20]="TRANSLATE",sr[sr.TRANSLATE_TO=21]="TRANSLATE_TO",sr[sr.SCALE=22]="SCALE",sr[sr.SCALE_TO=23]="SCALE_TO",sr[sr.ROTATE=24]="ROTATE",sr[sr.ROTATE_TO=25]="ROTATE_TO",(sn=sb||(sb={}))[sn.ROW=1]="ROW",sn[sn.COLUMN=2]="COLUMN",(sl=sy||(sy={}))[sl.CubicBezierCurve=0]="CubicBezierCurve",sl[sl.QuadraticBezierCurve=1]="QuadraticBezierCurve",sl[sl.ArcCurve=2]="ArcCurve",sl[sl.LineCurve=3]="LineCurve",sl[sl.EllipseCurve=4]="EllipseCurve",sl[sl.MoveCurve=5]="MoveCurve",(so=sv||(sv={}))[so.beforeFillStroke=0]="beforeFillStroke",so[so.afterFillStroke=1]="afterFillStroke";var t9=i(9762);function ie(e,t,i,r){let n=function(e,t,i,r,n,l,o,a,s){let h=(0,t9.M4)(o),d=Math.sin(h),u=Math.cos(h),c=u*(a-e)*.5+d*(s-t)*.5,p=u*(s-t)*.5-d*(a-e)*.5,g=c*c/((i=Math.abs(i))*i)+p*p/((r=Math.abs(r))*r);g>1&&(i*=g=Math.sqrt(g),r*=g);let f=u/i,m=d/i,b=-d/r,y=u/r,v=f*a+m*s,_=b*a+y*s,C=f*e+m*t,x=b*e+y*t,w=1/((C-v)*(C-v)+(x-_)*(x-_))-.25;w<0&&(w=0);let S=Math.sqrt(w);l===n&&(S=-S);let A=.5*(v+C)-S*(x-_),k=.5*(_+x)+S*(C-v),M=Math.atan2(_-k,v-A),T=Math.atan2(x-k,C-A)-M;T<0&&1===l?T+=t0.BZ:T>0&&0===l&&(T-=t0.BZ);let R=Math.ceil(Math.abs(T/(t0.ou+.001))),E=[];for(let e=0;e<R;++e){let t=M+e*T/R,n=M+(e+1)*T/R;E[e]=[A,k,t,n,i,r,d,u]}return E}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,i);for(let t=0;t<n.length;++t){let i=function(e){let t=e[0],i=e[1],r=e[2],n=e[3],l=e[4],o=e[5],a=e[6],s=e[7],h=s*l,d=-a*o,u=a*l,c=s*o,p=Math.cos(r),g=Math.sin(r),f=Math.cos(n),m=Math.sin(n),b=.5*(n-r),y=Math.sin(.5*b),v=8/3*y*y/Math.sin(b),_=t+p-v*g,C=i+g+v*p,x=t+f,w=i+m,S=x+v*m,A=w-v*f;return[h*_+d*C,u*_+c*C,h*S+d*A,u*S+c*A,h*x+d*w,u*x+c*w]}(n[t]);e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}}let it=(e,t,i,r,n,l,o,a=!1)=>{let s=2*Math.PI,h=(t%s+s)%s,d,u=(i%s+s)%s;a?u>=h&&(u-=s):u<=h&&(u+=s);let c=Math.ceil(Math.abs(d=u-h)/(.5*Math.PI)),p=d/c;for(let t=0;t<c;t++){let i=h+p*t,s=h+p*(t+1),d=4/3*Math.tan(Math.abs(p)/4),u=Math.cos(i),c=Math.sin(i),g=Math.cos(s),f=Math.sin(s),m=u*l+r,b=c*o+n,y=g*l+r,v=f*o+n,_=a?-1:1,C=l*d*_,x=o*d*_;e.push(m-C*c,b+x*u,y+C*f,v-x*g,y,v)}},ii=[(e,t,i,r,n,l,o)=>t.arc(e[1]*n+i,e[2]*l+r,e[3]*(n+l)/2,e[4],e[5],e[6],o),(e,t,i,r,n,l,o)=>t.arcTo(e[1]*n+i,e[2]*l+r,e[3]*n+i,e[4]*l+r,e[5]*(n+l)/2,o),(e,t,i,r,n,l,o)=>t.bezierCurveTo(e[1]*n+i,e[2]*l+r,e[3]*n+i,e[4]*l+r,e[5]*n+i,e[6]*l+r,o),(e,t,i,r)=>t.closePath(),(e,t,i,r,n,l)=>t.ellipse(e[1]*n+i,e[2]*l+r,e[3]*n,e[4]*l,e[5],e[6],e[7],e[8]),(e,t,i,r,n,l,o)=>t.lineTo(e[1]*n+i,e[2]*l+r,o),(e,t,i,r,n,l,o)=>t.moveTo(e[1]*n+i,e[2]*l+r,o),(e,t,i,r,n,l,o)=>t.quadraticCurveTo(e[1]*n+i,e[2]*l+r,e[3]*n+i,e[4]*l+r,o),(e,t,i,r,n,l,o)=>t.rect(e[1]*n+i,e[2]*l+r,e[3]*n,e[4]*l,o)];function ir(e,t,i=0,r=0,n=1,l=1,o){for(let a=0;a<e.length;a++){let s=e[a];ii[s[0]](s,t,i,r,n,l,o)}}var il=i(19498);class io{getLength(e){return null!=e?this.calcProjLength(e):(Number.isFinite(this.length)||(this.length=this.calcLength()),this.length)}}function ia(e,t){let{p0:i,p1:r}=e,n=il.HL.pointAtPP(i,r,t);return[new is(i,n),new is(n,r)]}class is extends io{constructor(e,t){super(),this.type=sy.LineCurve,this.p0=e,this.p1=t}getPointAt(e){if(!1!==this.defined)return il.HL.pointAtPP(this.p0,this.p1,e);throw Error("definedfalsegetPointAt")}getAngleAt(e){return null==this.angle&&(this.angle=(0,t0.fv)(this.p1.y-this.p0.y,this.p1.x-this.p0.x)),this.angle}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y)}calcLength(){return this._validPoint()?il.HL.distancePP(this.p0,this.p1):60}calcProjLength(e){return e===sb.ROW?(0,t0.Wn)(this.p0.x-this.p1.x):e===sb.COLUMN?(0,t0.Wn)(this.p0.y-this.p1.y):0}draw(e,t,i,r,n,l){if(e.moveTo(this.p0.x*r+t,this.p0.y*n+i),l>=1)e.lineTo(this.p1.x*r+t,this.p1.y*n+i);else if(l>0){let o=this.getPointAt(l);e.lineTo(o.x*r+t,o.y*n+i)}}includeX(e){return e>=this.p0.x&&e<=this.p1.x||e>=this.p1.x&&e<=this.p0.x}getYAt(e){if(this.includeX(e)){let t=this.p0,i=this.p1;this.p0.x>this.p1.x&&(t=this.p1,i=this.p0);let r=(e-t.x)/(i.x-t.x);return t.y+r*(i.y-t.y)}return 1/0}}function ih(e,t){let i=0,r=e.length;for(let n=0;n<r;n++){let l=e[n],o=t[n],a=e[(n+1)%r],s=t[(n+1)%r];i+=il.HL.distanceNN(l,o,a,s)}return i/2}function id(e,t,i,r,n){let l=1-n;return l*l*l*e+3*t*n*l*l+3*i*n*n*l+r*n*n*n}function iu(e,t,i,r,n){let l=id(e.x,t.x,i.x,r.x,n),o=id(e.y,t.y,i.y,r.y,n);return new il.E9(l,o)}function ic(e,t,i,r){let n=1-r;return n*n*e+2*n*r*t+r*r*i}function ip(e,t,i,r){let n=ic(e.x,t.x,i.x,r),l=ic(e.y,t.y,i.y,r);return new il.E9(n,l)}function ig(e,t){let{p0:i,p1:r,p2:n,p3:l}=e,o=iu(i,r,n,l,t),a=il.HL.pointAtPP(i,r,t),s=il.HL.pointAtPP(r,n,t),h=il.HL.pointAtPP(n,l,t),d=il.HL.pointAtPP(a,s,t),u=il.HL.pointAtPP(s,h,t);return[new im(i,a,d,o),new im(o,u,h,l)]}class im extends io{constructor(e,t,i,r){super(),this.type=sy.CubicBezierCurve,this.p0=e,this.p1=t,this.p2=i,this.p3=r}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y+this.p3.x+this.p3.y)}getPointAt(e){if(!1!==this.defined)return iu(this.p0,this.p1,this.p2,this.p3,e);throw Error("definedfalsegetPointAt")}calcLength(){var e,t,i,r;return this._validPoint()?(e=this.p0,t=this.p1,i=this.p2,r=this.p3,ih([e.x,t.x,i.x,r.x],[e.y,t.y,i.y,r.y])):60}calcProjLength(e){return e===sb.ROW?(0,t0.Wn)(this.p0.x-this.p3.x):e===sb.COLUMN?(0,t0.Wn)(this.p0.y-this.p3.y):0}getAngleAt(e){let t=(0,t0.Fp)(e-.01,0),i=(0,t0.VV)(e+.01,1),r=this.getPointAt(t),n=this.getPointAt(i);return(0,t0.fv)(n.y-r.y,n.x-r.x)}draw(e,t,i,r,n,l){if(e.moveTo(this.p0.x*r+t,this.p0.y*n+i),l>=1)e.bezierCurveTo(this.p1.x*r+t,this.p1.y*n+i,this.p2.x*r+t,this.p2.y*n+i,this.p3.x*r+t,this.p3.y*n+i);else if(l>0){let[o]=ig(this,l);e.bezierCurveTo(o.p1.x*r+t,o.p1.y*n+i,o.p2.x*r+t,o.p2.y*n+i,o.p3.x*r+t,o.p3.y*n+i)}}includeX(e){let t=(0,t0.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(0,t0.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x);return e>=t&&e<=i}getYAt(e){let t=(0,t0.VV)(this.p0.x,this.p1.x,this.p2.x,this.p3.x),i=(e-t)/((0,t0.Fp)(this.p0.x,this.p1.x,this.p2.x,this.p3.x)-t);return this.getPointAt(i).y}}class ib extends io{constructor(e,t,i){super(),this.type=sy.QuadraticBezierCurve,this.p0=e,this.p1=t,this.p2=i}_validPoint(){return Number.isFinite(this.p0.x+this.p0.y+this.p1.x+this.p1.y+this.p2.x+this.p2.y)}getPointAt(e){if(!1!==this.defined)return ip(this.p0,this.p1,this.p2,e);throw Error("definedfalsegetPointAt")}calcLength(){var e,t,i;return this._validPoint()?(e=this.p0,t=this.p1,i=this.p2,ih([e.x,t.x,i.x],[e.y,t.y,i.y])):60}calcProjLength(e){return e===sb.ROW?(0,t0.Wn)(this.p0.x-this.p2.x):e===sb.COLUMN?(0,t0.Wn)(this.p0.y-this.p2.y):0}getAngleAt(e){let t=(0,t0.Fp)(e-.01,0),i=(0,t0.VV)(e+.01,1),r=this.getPointAt(t),n=this.getPointAt(i);return(0,t0.fv)(n.y-r.y,n.x-r.x)}draw(e,t,i,r,n,l){if(e.moveTo(this.p0.x*r+t,this.p0.y*n+i),l>=1)e.quadraticCurveTo(this.p1.x*r+t,this.p1.y*n+i,this.p2.x*r+t,this.p2.y*n+i);else if(l>0){let[o]=function(e,t){let{p0:i,p1:r,p2:n}=e,l=ip(i,r,n,t),o=il.HL.pointAtPP(i,r,t),a=il.HL.pointAtPP(r,n,t);return[new ib(i,o,l),new ib(l,a,n)]}(this,l);e.quadraticCurveTo(o.p1.x*r+t,o.p1.y*n+i,o.p2.x*r+t,o.p2.y*n+i)}}getYAt(e){throw Error("QuadraticBezierCurvegetYAt")}includeX(e){throw Error("QuadraticBezierCurveincludeX")}}class iy{constructor(e){this.path=e,this._lastX=this._lastY=this._startX=this._startY=0}moveTo(e,t){return this._lastX=this._startX=e,this._lastY=this._startY=t,this}lineTo(e,t){let i=this.addLinearCurve(e,t);this.path.addCurve(i),this._lastX=e,this._lastY=t}addLinearCurve(e,t){return new is(new il.E9(this._lastX,this._lastY),new il.E9(e,t))}quadraticCurveTo(e,t,i,r){let n=new ib(new il.E9(this._lastX,this._lastY),new il.E9(e,t),new il.E9(i,r));this.path.addCurve(n),this._lastX=i,this._lastY=r}bezierCurveTo(e,t,i,r,n,l){let o=new im(new il.E9(this._lastX,this._lastY),new il.E9(e,t),new il.E9(i,r),new il.E9(n,l));this.path.addCurve(o),this._lastX=n,this._lastY=l}arcTo(e,t,i,r,n){throw Error("CurveContextarcTo")}ellipse(e,t,i,r,n,l,o,a){throw Error("CurveContextellipse")}rect(e,t,i,r){throw Error("CurveContextrect")}arc(e,t,i,r,n,l){throw Error("CurveContextarc")}closePath(){this.path.curves.length<2||this.lineTo(this._startX,this._startY)}}class iv{get endX(){return this._lastX}get endY(){return this._lastY}constructor(e,t){this.init(e,t)}init(e,t){this._lastX=this._lastY=this._startX=this._startY=0,this.curveType=e,this.direction=t,this.curves=[]}bezierCurveTo(e,t,i,r,n,l,o,a){let s=new im(new il.E9(this._lastX,this._lastY),new il.E9(e,t),new il.E9(i,r),new il.E9(n,l));s.originP1=this._lastOriginP,s.originP2=a,s.defined=o,this.curves.push(s),this._lastX=n,this._lastY=l,this._lastOriginP=a}closePath(){if(this.curves.length<2)return;let e=this.curves[this.curves.length-1];this.lineTo(this._startX,this._startY,e.defined,this._startOriginP)}ellipse(){throw Error("SegContextellipse")}lineTo(e,t,i,r){let n=this.addLinearCurve(e,t,i,this._lastOriginP,r);this.curves.push(n),this._lastX=e,this._lastY=t,this._lastOriginP=r}moveTo(e,t,i){return this._lastX=this._startX=e,this._lastY=this._startY=t,this._lastOriginP=i,this._startOriginP=i,this}quadraticCurveTo(e,t,i,r){throw Error("SegContextquadraticCurveTo")}clear(){this.curves=[],this.length=NaN}tryUpdateLength(e){return this.getLength(e)}addLinearCurve(e,t,i,r,n){let l=new is(new il.E9(this._lastX,this._lastY),new il.E9(e,t));return l.originP1=r,l.originP2=n,l.defined=i,l}getPointAt(e){throw Error("")}getCurveLengths(){return[]}getLength(e){var t,i;if(e===sb.COLUMN){if(!this.curves.length)return 0;let e=this.curves[0],i=this.curves[this.curves.length-1],r=null!=(t=i.p3)?t:i.p1;return(0,t0.Wn)(e.p0.y-r.y)}if(e===sb.ROW){if(!this.curves.length)return 0;let e=this.curves[0],t=this.curves[this.curves.length-1],r=null!=(i=t.p3)?i:t.p1;return(0,t0.Wn)(e.p0.x-r.x)}return Number.isFinite(this.length)||(this.length=this.curves.reduce((e,t)=>e+t.getLength(),0)),this.length}}class i_ extends iv{bezierCurveTo(e,t,i,r,n,l,o,a){return super.bezierCurveTo(t,e,r,i,l,n,o,a)}lineTo(e,t,i,r){return super.lineTo(t,e,i,r)}moveTo(e,t,i){return super.moveTo(t,e,i)}clear(){return super.clear()}}function iC(e,t,i=1){let r=!1;for(let i=0,n=t.length;i<=n;i++)i>=n===r&&((r=!r)?e.lineStart():e.lineEnd()),r&&e.point(t[i])}function ix(e,t,i){let r=null!=t?t:(0,t0.Wn)(i[i.length-1].x-i[0].x)>(0,t0.Wn)(i[i.length-1].y-i[0].y)?sb.ROW:sb.COLUMN;return"monotoneY"===e?new i_(e,r):new iv(e,r)}class iw{constructor(e,t){this.context=e,t&&(this.startPoint=t)}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){let t=e.x,i=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e):this.context.moveTo(t,i,e);break;case 1:this._point=2;default:this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e)}this._lastDefined=e.defined}tryUpdateLength(){return this.context.tryUpdateLength()}}function iS(e,t={}){let{direction:i,startPoint:r}=t;if(e.length<2-Number(!!r))return null;let n=ix("linear",i,e);return iC(new iw(n,r),e,1),n}function iA(e,t,i,r,n){e.context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6,r,e.lastPoint1)}class ik{constructor(e,t){this.context=e,this.startPoint=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){2===this._point&&iA(this,6*this._x1-(this._x0+4*this._x1),6*this._y1-(this._y0+4*this._y1),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){let t=e.x,i=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,e):this.context.moveTo(t,i,e);break;case 1:this._point=2;break;default:iA(this,t,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}}function iM(e,t,i){let r=e._x1-e._x0,n=t-e._x1,l=(e._y1-e._y0)/(r||Number(n<0&&-0)),o=(i-e._y1)/(n||Number(r<0&&-0));return((l<0?-1:1)+(o<0?-1:1))*Math.min(Math.abs(l),Math.abs(o),.5*Math.abs((l*n+o*r)/(r+n)))||0}function iT(e,t){let i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function iR(e,t,i,r,n){let l=e._x0,o=e._y0,a=e._x1,s=e._y1,h=(a-l)/3;e.context.bezierCurveTo(l+h,o+h*t,a-h,s-h*i,a,s,r,e.lastPoint1)}class iE{constructor(e,t){this.context=e,this.startPoint=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x1,this._y1,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:iR(this,this._t0,iT(this,this._t0),!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1)}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){let t=NaN,i=e.x,r=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(i,r,!1!==this._lastDefined1&&!1!==this._lastDefined2,e):this.context.moveTo(i,r,e);break;case 1:this._point=2;break;case 2:this._point=3,iR(this,iT(this,t=iM(this,i,r)),t,!1!==this._lastDefined1&&!1!==this._lastDefined2,e);break;default:iR(this,this._t0,t=iM(this,i,r),!1!==this._lastDefined1&&!1!==this._lastDefined2,e)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=r,this._t0=t,this._lastDefined1=this._lastDefined2,this._lastDefined2=!1!==e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}}class iP extends iE{constructor(e,t){super(e,t)}point(e){return super.point({y:e.x,x:e.y,defined:e.defined})}}class iB{constructor(e,t=.5,i){this.context=e,this._t=t,this.startPoint=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x=this._y=NaN,this._point=0,this.startPoint&&this.point(this.startPoint)}lineEnd(){0<this._t&&this._t<1&&2===this._point&&this.context.lineTo(this._x,this._y,!1!==this._lastDefined,this.lastPoint),(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}point(e){let t=e.x,i=e.y;switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e):this.context.moveTo(t,i,e);break;case 1:this._point=2;default:if(this._t<=0)this.context.lineTo(this._x,i,!1!==this._lastDefined&&!1!==e.defined,this.lastPoint),this.context.lineTo(t,i,!1!==this._lastDefined&&!1!==e.defined,e);else{let r=this._x*(1-this._t)+t*this._t;.5===this._t?this.context.lineTo(r,this._y,!1!==this._lastDefined,this.lastPoint):this.context.lineTo(r,this._y,!1!==this._lastDefined&&!1!==e.defined,this.lastPoint),this.context.lineTo(r,i,!1!==this._lastDefined&&!1!==e.defined,e)}}this._lastDefined=e.defined,this._x=t,this._y=i,this.lastPoint=e}tryUpdateLength(){return this.context.tryUpdateLength()}}class iI extends iB{lineEnd(){this.context.closePath()}}function iL(e,t,i={}){let{direction:r,startPoint:n}=i;if(e.length<2-Number(!!n))return null;let l=new iv("step",null!=r?r:(0,t0.Wn)(e[e.length-1].x-e[0].x)>(0,t0.Wn)(e[e.length-1].y-e[0].y)?sb.ROW:sb.COLUMN);return iC(new iB(l,t,n),e,1),l}class iF extends iw{lineEnd(){this.context.closePath()}}function iH(e,t,i,r,n){let l=e._x1,o=e._y1,a=e._x2,s=e._y2;if(e._l01_a>t0.Ho){let t=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,i=3*e._l01_a*(e._l01_a+e._l12_a);l=(l*t-e._x0*e._l12_2a+e._x2*e._l01_2a)/i,o=(o*t-e._y0*e._l12_2a+e._y2*e._l01_2a)/i}if(e._l23_a>t0.Ho){let r=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,n=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*r+e._x1*e._l23_2a-t*e._l12_2a)/n,s=(s*r+e._y1*e._l23_2a-i*e._l12_2a)/n}e.context.bezierCurveTo(l,o,a,s,e._x2,e._y2,r,e.lastPoint1)}function iO(e,t){return function(i,r,n={}){let{direction:l,startPoint:o}=n;if(i.length<2-Number(!!o))return null;if(i.length<3-Number(!!o))return iS(i,n);let a=ix(e,l,i);return iC(new t(a,r,o),i,2),a}}let iD=iO("catmullRom",class{constructor(e,t=.5,i){this.context=e,this.startPoint=i,this._alpha=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 2:this.context.lineTo(this._x2,this._y2,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1);break;case 3:this.point({x:this._x2,y:this._y2})}(this._line||0!==this._line&&1===this._point)&&this.context.closePath(),this._line=1-this._line}point(e){let{x:t,y:i}=e;if(this._point){let e=this._x2-t,r=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this.context.lineTo(t,i,!1!==this._lastDefined1&&!1!==this._lastDefined2):this.context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;default:iH(this,t,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}}),iz=iO("catmullRomClosed",class{constructor(e,t=.5,i){this.context=e,this.startPoint=i,this._alpha=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}lineEnd(){switch(this._point){case 1:this.context.moveTo(this._x3,this._y3,this.lastPoint1),this.context.closePath();break;case 2:this.context.lineTo(this._x3,this._y3,!1!==this._lastDefined1&&!1!==this._lastDefined2,this.lastPoint1),this.context.closePath();break;case 3:this.point({x:this._x3,y:this._y3}),this.point({x:this._x4,y:this._y4}),this.point({x:this._x5,y:this._y5})}}point(e){let{x:t,y:i}=e;if(this._point){let e=this._x2-t,r=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this.context.moveTo(this._x4=t,this._y4=i,e);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:iH(this,t,i,!1!==this._lastDefined1&&!1!==this._lastDefined2,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i,this._lastDefined1=this._lastDefined2,this._lastDefined2=e.defined,this.lastPoint0=this.lastPoint1,this.lastPoint1=e}tryUpdateLength(){return this.context.tryUpdateLength()}});function iW(e,t,i){var r,n;switch(t){case"linear":default:return iS(e,i);case"basis":return function(e,t={}){let{direction:i,startPoint:r}=t;if(e.length<2-Number(!!r))return null;if(e.length<3-Number(!!r))return iS(e,t);let n=ix("basis",i,e);return iC(new ik(n,r),e,2),n}(e,i);case"monotoneX":return function(e,t={}){let{direction:i,startPoint:r}=t;if(e.length<2-Number(!!r))return null;if(e.length<3-Number(!!r))return iS(e,t);let n=ix("monotoneX",i,e);return iC(new iE(n,r),e,2),n}(e,i);case"monotoneY":return function(e,t={}){let{direction:i,startPoint:r}=t;if(e.length<2-Number(!!r))return null;if(e.length<3-Number(!!r))return iS(e,t);let n=ix("monotoneY",i,e);return iC(new iP(n,r),e,2),n}(e,i);case"step":return iL(e,.5,i);case"stepClosed":return function(e,t,i={}){let{direction:r,startPoint:n}=i;if(e.length<2-Number(!!n))return null;let l=new iv("step",null!=r?r:(0,t0.Wn)(e[e.length-1].x-e[0].x)>(0,t0.Wn)(e[e.length-1].y-e[0].y)?sb.ROW:sb.COLUMN);return iC(new iI(l,.5,n),e,1),l}(e,0,i);case"stepBefore":return iL(e,0,i);case"stepAfter":return iL(e,1,i);case"catmullRom":return iD(e,null!=(r=null==i?void 0:i.curveTension)?r:.5,i);case"catmullRomClosed":return iz(e,null!=(n=null==i?void 0:i.curveTension)?n:.5,i);case"linearClosed":return function(e,t={}){let{direction:i,startPoint:r}=t;if(e.length<2-Number(!!r))return null;let n=ix("linear",i,e);return iC(new iF(n,r),e,1),n}(e,i)}}class iZ extends t5{constructor(e){super(),this.commandList=[],e&&(this._ctx=e),this._boundsContext=new t3(this.bounds)}get curves(){return this.tryBuildCurves()}setCtx(e){this._ctx=e}moveTo(e,t){return this.commandList.push([t7.M,e,t]),this._ctx&&this._ctx.moveTo(e,t),this}lineTo(e,t){return this.commandList.push([t7.L,e,t]),this._ctx&&this._ctx.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.commandList.push([t7.Q,e,t,i,r]),this._ctx&&this._ctx.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,n,l){return this.commandList.push([t7.C,e,t,i,r,n,l]),this._ctx&&this._ctx.bezierCurveTo(e,t,i,r,n,l),this}arcTo(e,t,i,r,n){return this.commandList.push([t7.AT,e,t,i,r,n]),this._ctx&&this._ctx.arcTo(e,t,i,r,n),this}ellipse(e,t,i,r,n,l,o,a){return this.commandList.push([t7.E,e,t,i,r,n,l,o,a]),this._ctx&&this._ctx.ellipse(e,t,i,r,n,l,o,a),this}rect(e,t,i,r){return this.commandList.push([t7.R,e,t,i,r]),this._ctx&&this._ctx.rect(e,t,i,r),this}arc(e,t,i,r,n,l){return this.commandList.push([t7.A,e,t,i,r,n,l]),this._ctx&&this._ctx.arc(e,t,i,r,n,l),this}closePath(){return this.commandList.push([t7.Z]),this._ctx&&this._ctx.closePath(),this}addCurve(e){this._curves.push(e)}clear(){this.transformCbList=null,this.commandList.length=0,this._curves.length=0}beginPath(){this.clear()}tryBuildCurves(){if(!this._curves||!this._curves.length){let e=new iy(this);ir(this.commandList,e,0,0,1,1)}return this._curves}toString(){if(!this.toStringCbList){let e=[];e[t7.M]=e=>`M${e[1]} ${e[2]}`,e[t7.L]=e=>`L${e[1]} ${e[2]}`,e[t7.Q]=e=>`Q${e[1]} ${e[2]} ${e[3]} ${e[4]}`,e[t7.C]=e=>`C${e[1]} ${e[2]} ${e[3]} ${e[4]} ${e[5]} ${e[6]}`,e[t7.A]=e=>{let t=[],i=e[1],r=e[2],n=e[3],l=e[4];it(t,l,e[5],i,r,n,n,e[6]);let o="";for(let e=0;e<t.length;e+=6)o+=`C${t[e]} ${t[e+1]} ${t[e+2]} ${t[e+3]} ${t[e+4]} ${t[e+5]}`;return o},e[t7.R]=e=>`M${e[1]} ${e[2]} h${e[3]} v${e[4]} H${e[1]}Z`,e[t7.Z]=e=>"Z",this.toStringCbList=e}let e=this.toStringCbList,t="";return this.commandList.forEach(i=>{t+=e[i[0]](i)}),t}fromString(e,t,i,s,h){this.clear();let d=function(e){let t,i;if(!e)return[];let s=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);if(null===s)return[];let h=[];for(let e=0,d=s.length;e<d;e++)if(n=(r=s[e]).slice(1),t=[l=r[0]],null!==(i=n.match(t6))){for(let e=0,r=i.length;e<r;e++)Number.isNaN(o=parseFloat(i[e]))||t.push(o);if(a=t8[l],t.length-1>a){let e,i=l;for(let r=1,n=t.length;r<n;r+=a){e=[i];for(let i=r,n=r+a;i<n;i++)e.push(t[i]);h.push(e),"m"===i?i="l":"M"===i&&(i="L")}}else h.push(t)}else h.push(t);return h}(e);return this._runCommandStrList(d,t,i,s,h),this._updateBounds(),this}fromLine(e){let{points:t,curveType:i,clipRangeByDimension:r}=e.attribute;if(!t)return;let n=iW(t,i);"x"===r?this.direction=sb.ROW:"y"===r?this.direction=sb.COLUMN:"auto"===r&&(this.direction=n.direction),this._curves=n.curves}fromCustomPath2D(e,t,i,r,n){return this.clear(),this._runCommandList(e.commandList,t,i,r,n),this._updateBounds(),this}transform(e,t,i,r){let n=this.commandList;if(!this.transformCbList){let e=[];e[t7.M]=this.moveToTransform,e[t7.L]=this.lineToTransform,e[t7.Q]=this.quadraticCurveToTransform,e[t7.C]=this.bezierCurveToTransform,e[t7.AT]=this.arcToTransform,e[t7.E]=this.ellipseTransform,e[t7.R]=this.rectTransform,e[t7.A]=this.arcTransform,e[t7.Z]=this.closePathTransform,this.transformCbList=e}n.forEach(n=>{this.transformCbList[n[0]](n,e,t,i,r)}),this._updateBounds()}moveToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i}lineToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i}quadraticCurveToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r+t,e[4]=e[4]*n+i}bezierCurveToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r+t,e[4]=e[4]*n+i,e[5]=e[5]*r+t,e[6]=e[6]*n+i}arcToTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r+t,e[4]=e[4]*n+i,e[5]=e[5]*(r+n)/2}ellipseTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r,e[4]=e[4]*n}rectTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*r,e[4]=e[4]*n}arcTransform(e,t,i,r,n){e[1]=e[1]*r+t,e[2]=e[2]*n+i,e[3]=e[3]*(r+n)/2}closePathTransform(){}_runCommandStrList(e,t=0,i=0,r=1,n=1){let l,o,a,s,h,d=null,u=0,c=0,p=0,g=0;for(let f=0,m=e.length;f<m;++f){switch(l=e[f],1===r&&1===n||(l=function(e,t,i){let r=iN[0]=e[0];if("a"===r||"A"===r)iN[1]=t*e[1],iN[2]=i*e[2],iN[3]=e[3],iN[4]=e[4],iN[5]=e[5],iN[6]=t*e[6],iN[7]=i*e[7];else if("h"===r||"H"===r)iN[1]=t*e[1];else if("v"===r||"V"===r)iN[1]=i*e[1];else for(let r=1,n=e.length;r<n;++r)iN[r]=(r%2==1?t:i)*e[r];return iN}(l,r,n)),l[0]){case"l":u+=l[1],c+=l[2],this.lineTo(u+t,c+i);break;case"L":u=l[1],c=l[2],this.lineTo(u+t,c+i);break;case"h":u+=l[1],this.lineTo(u+t,c+i);break;case"H":u=l[1],this.lineTo(u+t,c+i);break;case"v":c+=l[1],this.lineTo(u+t,c+i);break;case"V":c=l[1],this.lineTo(u+t,c+i);break;case"m":u+=l[1],c+=l[2],this.moveTo(u+t,c+i);break;case"M":u=l[1],c=l[2],this.moveTo(u+t,c+i);break;case"c":o=u+l[5],a=c+l[6],p=u+l[3],g=c+l[4],this.bezierCurveTo(u+l[1]+t,c+l[2]+i,p+t,g+i,o+t,a+i),u=o,c=a;break;case"C":u=l[5],c=l[6],p=l[3],g=l[4],this.bezierCurveTo(l[1]+t,l[2]+i,p+t,g+i,u+t,c+i);break;case"s":o=u+l[3],a=c+l[4],null===d[0].match(/[CcSs]/)?(p=u,g=c):(p=2*u-p,g=2*c-g),s=u+l[1],h=c+l[2],this.bezierCurveTo(p+t,g+i,s+t,h+i,o+t,a+i),p=s,g=h,u=o,c=a;break;case"S":o=l[3],a=l[4],null===d[0].match(/[CcSs]/)?(p=u,g=c):(p=2*u-p,g=2*c-g),s=l[1],h=l[2],this.bezierCurveTo(p+t,g+i,s+t,h+i,o+t,a+i),p=s,g=h,u=o,c=a;break;case"q":o=u+l[3],a=c+l[4],p=u+l[1],g=c+l[2],this.quadraticCurveTo(p+t,g+i,o+t,a+i),u=o,c=a;break;case"Q":o=l[3],a=l[4],this.quadraticCurveTo(l[1]+t,l[2]+i,o+t,a+i),u=o,c=a,p=l[1],g=l[2];break;case"t":o=u+l[1],a=c+l[2],null===d[0].match(/[QqTt]/)?(p=u,g=c):"t"===d[0]?(p=2*u-s,g=2*c-h):"q"===d[0]&&(p=2*u-p,g=2*c-g),s=p,h=g,this.quadraticCurveTo(p+t,g+i,o+t,a+i),u=o,c=a,p=u+l[1],g=c+l[2];break;case"T":o=l[1],a=l[2],p=2*u-p,g=2*c-g,this.quadraticCurveTo(p+t,g+i,o+t,a+i),u=o,c=a;break;case"a":ie(this,u+t,c+i,[l[1],l[2],l[3],l[4],l[5],l[6]+u+t,l[7]+c+i]),u+=l[6],c+=l[7];break;case"A":ie(this,u+t,c+i,[l[1],l[2],l[3],l[4],l[5],l[6]+t,l[7]+i]),u=l[6],c=l[7];break;case"z":case"Z":this.closePath()}d=l}}_runCommandList(e,t=0,i=0,r=1,n=1){if(0!==t||0!==i||1!==r||1!==n)for(let l=0,o=e.length;l<o;++l){let o=e[l].slice();switch(o[0]){case t7.L:this.lineToTransform(o,t,i,r,n);break;case t7.M:this.moveToTransform(o,t,i,r,n);break;case t7.C:this.bezierCurveToTransform(o,t,i,r,n);break;case t7.Q:this.quadraticCurveToTransform(o,t,i,r,n);break;case t7.A:this.arcToTransform(o,t,i,r,n);break;case t7.E:this.ellipseTransform(o,t,i,r,n);break;case t7.R:this.rectTransform(o,t,i,r,n);break;case t7.AT:this.arcToTransform(o,t,i,r,n);break;case t7.Z:this.closePath()}}else this.commandList=e.map(e=>e.slice())}_updateBounds(){this.bounds.clear(),ir(this.commandList,this._boundsContext)}release(){this.commandList=[],this._boundsContext=null,this._ctx=null}getLength(){if(this.direction===sb.COLUMN){if(!this._curves.length)return 0;let e=this._curves[0],t=this._curves[this._curves.length-1];return(0,t0.Wn)(e.p0.y-t.p1.y)}if(this.direction===sb.ROW){if(!this._curves.length)return 0;let e=this._curves[0],t=this._curves[this._curves.length-1];return(0,t0.Wn)(e.p0.x-t.p1.x)}return this._curves.reduce((e,t)=>e+t.getLength(),0)}getYAt(e){if(!this.curves)return 1/0;for(let t=0;t<this.curves.length;t++){let i=this.curves[t];if(i.includeX(e))return i.getYAt(e)}return 1/0}getAttrAt(e){if(!this._curves)return{pos:{x:0,y:0},angle:0};let t,i=0;for(let r=0;r<this._curves.length;r++){let n=(t=this._curves[r]).getLength(this.direction);if(i+n>=e)break;i+=n}let r=(e-i)/t.getLength(this.direction);return{pos:t.getPointAt(r),angle:t.getAngleAt(r)}}drawWithClipRange(e,t,i,r,n){this.tryBuildCurves();let l=this.getLength()*n,o=0;for(let n=0;n<this._curves.length;n++){let a=this._curves[n],s=a.getLength(this.direction);if(!(o+s<=l)){let n=1-(o+s-l)/s;a.draw(e,i,r,t,t,n);break}a.draw(e,i,r,t,t,1),o+=s}}}let iN=["l",0,0,0,0,0,0,0],i$={x:0,y:0,z:0,dx:0,dy:0,dz:0,scrollX:0,scrollY:0,scaleX:1,scaleY:1,scaleZ:1,angle:0,alpha:0,beta:0,scaleCenter:[0,0],anchor:[0,0],anchor3d:[0,0],postMatrix:new tQ.y},ij={fillOpacity:1,fill:!1,shadowBlur:0,shadowColor:"black",shadowOffsetX:0,shadowOffsetY:0},iG={strokeOpacity:1,lineDash:[],lineDashOffset:0,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,strokeBoundsBuffer:2,stroke:!1},iV=Object.assign({outerBorder:Object.assign(Object.assign({},iG),{distance:0}),innerBorder:Object.assign(Object.assign({},iG),{distance:0})},iG),iU={text:"",maxLineWidth:1/0,maxWidth:1/0,textAlign:"left",textBaseline:"alphabetic",fontSize:16,fontFamily:"PingFang SC,Microsoft Yahei,system-ui,'-apple-system',segoe ui,\n    Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol",fontWeight:"",ellipsis:"",fontVariant:"",fontStyle:"",lineHeight:void 0,underline:0,lineThrough:0,scaleIn3d:!1,direction:"horizontal",wordBreak:"break-all",ignoreBuf:!1,verticalMode:0,wrap:!1,whiteSpace:"no-wrap",heightLimit:1/0,lineClamp:1/0,suffixPosition:"end",underlineDash:[],underlineOffset:0,disableAutoClipedPoptip:void 0,measureMode:sp.fontBounding,keepCenterInLine:!1},iK=Object.assign(Object.assign(Object.assign(Object.assign({forceBoundsWidth:void 0,forceBoundsHeight:void 0,opacity:1,background:null,autoAnimateTexture:!1,textureRatio:1,textureOptions:null,backgroundOpacity:1,backgroundCornerRadius:0,texture:null,textureColor:"black",textureSize:10,texturePadding:2,backgroundMode:"no-repeat",backgroundFit:!0,backgroundKeepAspectRatio:!1,backgroundClip:!0,backgroundScale:1,backgroundOffsetX:0,backgroundOffsetY:0,blur:0,filter:"",cursor:null,html:null,react:null,vue:null},ij),iV),{alignSelf:"auto"}),{pickStrokeBuffer:0}),iX={connectedType:"none",connectedStyle:{},connectedX:NaN,connectedY:NaN},iY=Object.assign(Object.assign(Object.assign({strokeSeg:null,renderable:!0,pickable:!0,shadowGraphic:void 0,childrenPickable:!0,fillPickable:!0,strokePickable:!0,visible:!0,zIndex:0,layout:null,boundsPadding:0,fillStrokeOrder:0,renderStyle:"default",pickMode:"accurate",customPickShape:null,boundsMode:"accurate",keepDirIn3d:!0,shadowRootIdx:1,globalZIndex:1,globalCompositeOperation:"",overflow:"hidden",shadowPickMode:"graphic",keepStrokeScale:!1,clipConfig:null,roughStyle:null},{_debug_bounds:!1}),iK),i$),iq=Object.assign(Object.assign({},iY),{startAngle:0,endAngle:t0.f7,innerRadius:0,outerRadius:1,innerPadding:0,outerPadding:0,cornerRadius:0,padRadius:0,padAngle:0,cap:!1,forceShowCap:!1}),iJ=Object.assign(Object.assign(Object.assign({},iY),iX),{points:[],segments:[],curveType:"linear",clipRange:1,closePath:!1,curveTension:1}),iQ=Object.assign(Object.assign({},iY),{radius:1,startAngle:0,endAngle:t0.f7}),i0=Object.assign(Object.assign({},iY),{width:0,height:0,cornerRadius:0,path:[],clip:!1,visibleAll:!0,display:"relative",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",baseOpacity:1,cornerType:"round"}),i1=Object.assign(Object.assign({},iY),{path:"",width:0,height:0,cornerRadius:0,clip:!1}),i2=Object.assign(Object.assign(Object.assign({},iY),iX),{points:[],segments:[],curveType:"linear",clipRange:1,clipRangeByDimension:"default",closePath:!1,curveTension:1}),i3=Object.assign(Object.assign({},iY),{path:new iZ,fillStrokeOrder:1,clipRange:1,customPath:()=>{t1.Y.getInstance().warn("")}}),i4=Object.assign(Object.assign({},iY),{points:[],cornerRadius:0,closePath:!0}),i5=Object.assign(Object.assign({},iY),{width:100,height:100,spikes:5,thickness:.5}),i6=Object.assign(Object.assign({},iY),{width:0,height:0,x1:0,y1:0,strokeBoundsBuffer:0,cornerRadius:0,cornerType:"round",drawStrokeWhenZeroWH:!1});Object.assign(Object.assign({},iY),{width:0,height:0,x1:0,y1:0,cornerRadius:0,length:0,cornerType:"round",drawStrokeWhenZeroWH:!1});let i8=Object.assign(Object.assign({},iY),{symbolType:"circle",size:10,keepDirIn3d:!0,clipRange:1}),i7=Object.assign(Object.assign(Object.assign({},iY),iU),{strokeBoundsBuffer:0,keepDirIn3d:!0}),i9=Object.assign(Object.assign(Object.assign({},iY),iU),{upgradeAttrs:null,editable:!1,editOptions:null,ascentDescentMode:"actual",width:300,height:300,ellipsis:!0,wordBreak:"break-word",verticalDirection:"top",textAlign:"left",textBaseline:"top",layoutDirection:"horizontal",textConfig:[],disableAutoWrapLine:!1,maxHeight:void 0,maxWidth:void 0,singleLine:!1}),re=Object.assign(Object.assign({repeatX:"no-repeat",repeatY:"no-repeat",image:"",width:0,height:0,maxWidth:500,maxHeight:500},iY),{fill:!0,cornerRadius:0,cornerType:"round"}),rt=Object.assign(Object.assign({},re),{backgroundShowMode:"never",backgroundWidth:0,backgroundHeight:0,textAlign:"left",textBaseline:"middle",direction:"horizontal",margin:0,id:"",width:20,height:20,backgroundFill:"rgba(101, 117, 168, 0.1)",backgroundFillOpacity:1,backgroundStroke:!1,backgroundStrokeOpacity:1,backgroundRadius:4,opacity:1});var ri=i(95723);let rr=function(){let e={linearGradient:/^(linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,fromAngleValue:/^from\s*(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/(^\#[0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^(rgb\(\d{1,3},\s*\d{1,3},\s*\d{1,3}\))/i,rgbaColor:/^(rgba\(\d{1,3},\s*\d{1,3},\s*\d{1,3},\s*((\d\.\d+)|\d{1,3})\))/i},t="";function i(e){let i=Error(t+": "+e);throw i.source=t,i}function r(){return n("linear",e.linearGradient,l)||n("radial",e.radialGradient,a)||n("conic",e.conicGradient,o)}function n(t,r,n){let l=b(r);if(l){b(e.startCall)||i("Missing (");let r=function(r){let l=n();return l&&(b(e.comma)||i("Missing comma before color stops")),{type:t,orientation:l,colorStops:c(p)}}(0);return b(e.endCall)||i("Missing )"),r}}function l(){return m("directional",e.sideOrCorner,1)||m("angular",e.angleValue,1)}function o(){return m("angular",e.fromAngleValue,1)}function a(){let i,r,n=s();return n&&((i=[]).push(n),r=t,b(e.comma)&&((n=s())?i.push(n):t=r)),i}function s(){let e=function(){let e=m("shape",/^(circle)/i,0);return e&&(e.style=f()||h()),e}()||function(){let e=m("shape",/^(ellipse)/i,0);return e&&(e.style=g()||h()),e}();if(e)e.at=d();else{let t=h();if(t){e=t;let i=d();i&&(e.at=i)}else{let t=u();t&&(e={type:"default-radial",at:t})}}return e}function h(){return m("extent-keyword",e.extentKeywords,1)}function d(){if(m("position",/^at/,0)){let e=u();return e||i("Missing positioning value"),e}}function u(){let e={x:g(),y:g()};if(e.x||e.y)return{type:"position",value:e}}function c(t){let r=t(),n=[];if(r)for(n.push(r);b(e.comma);)(r=t())?n.push(r):i("One extra comma");return n}function p(){let t=m("hex",e.hexColor,1)||m("rgba",e.rgbaColor,1)||m("rgb",e.rgbColor,1)||m("literal",e.literalColor,0);return t||i("Expected color definition"),t.length=g(),t}function g(){return m("%",e.percentageValue,1)||m("position-keyword",e.positionKeywords,1)||f()}function f(){return m("px",e.pixelValue,1)||m("em",e.emValue,1)}function m(e,t,i){let r=b(t);if(r)return{type:e,value:r[i]}}function b(e){let i=/^[\n\r\t\s]+/.exec(t);i&&y(i[0].length);let r=e.exec(t);return r&&y(r[0].length),r}function y(e){t=t.substr(e)}return function(e){return t=e.toString(),function(){let e=c(r);return t.length>0&&i("Invalid input not EOF"),e}()}}();class rn{static IsGradient(e){return!("string"==typeof e&&!e.includes("gradient"))}static IsGradientStr(e){return"string"==typeof e&&e.includes("gradient")}static Parse(e){if(rn.IsGradientStr(e))try{let t=rr(e)[0];if(t){if("linear"===t.type)return rn.ParseLinear(t);if("radial"===t.type)return rn.ParseRadial(t);if("conic"===t.type)return rn.ParseConic(t)}}catch(e){}return e}static processColorStops(e){if(!e||0===e.length)return[];if(e.some(e=>e.length)){let t=e.map(e=>({color:e.value,offset:e.length?parseFloat(e.length.value)/100:-1}));t[0].offset<0&&(t[0].offset=0),t[t.length-1].offset<0&&(t[t.length-1].offset=1);for(let e=1;e<t.length-1;e++)if(t[e].offset<0){let i=e-1,r=e+1;for(;r<t.length&&t[r].offset<0;)r++;let n=t[i].offset,l=t[r].offset,o=r-i;for(let e=1;e<o;e++)t[i+e].offset=n+(l-n)*e/o;e=r-1}return t}return e.map((t,i)=>{let r=e.length>1?i/(e.length-1):0;return{color:t.value,offset:r}})}static ParseConic(e){let{orientation:t,colorStops:i=[]}=e,r=t0.pi/2,n=parseFloat(t.value)/180*t0.pi-r;return{gradient:"conical",x:.5,y:.5,startAngle:n,endAngle:n+t0.f7,stops:rn.processColorStops(i)}}static ParseRadial(e){let{colorStops:t=[]}=e;return{gradient:"radial",x0:.5,y0:.5,x1:.5,y1:.5,r0:0,r1:1,stops:rn.processColorStops(t)}}static ParseLinear(e){let{orientation:t,colorStops:i=[]}=e,r=t0.pi/2,n="angular"===t.type?parseFloat(t.value)/180*t0.pi:0;for(;n<0;)n+=t0.f7;for(;n>=t0.f7;)n-=t0.f7;let l=0,o=0,a=0,s=0;return n<r?(l=0,o=1,a=Math.sin(n),s=o-Math.cos(n)):n<t0.pi?(l=0,o=0,a=Math.cos(n-r),s=Math.sin(n-r)):n<t0.pi+r?(o=0,a=(l=1)-Math.sin(n-t0.pi),s=Math.cos(n-t0.pi)):(a=(l=1)-Math.cos(n-r-t0.pi),s-=Math.sin(n-r-t0.pi)),{gradient:"linear",x0:l,y0:o,x1:a,y1:s,stops:rn.processColorStops(i)}}}function rl(e,t,i){let r=t,{a:n,b:l,c:o,d:a}=e.currentMatrix,s=Math.sign(n)*Math.sqrt(n*n+l*l),h=Math.sign(a)*Math.sqrt(o*o+a*a);return s+h===0?0:r=r/Math.abs(s+h)*2*i}function ro(e,t,i,r=0,n=0){var l,o,a,s;let h,d;if(!t||!0===t)return"black";if((0,ri.Z)(t))for(let e=0;e<t.length&&!(d=t[e]);e++);else d=t;if("string"==typeof(d=rn.Parse(d)))return d;if(i.AABBBounds&&(!i.attribute||0!==i.attribute.scaleX||0!==i.attribute.scaleY)){let t=i.AABBBounds,u=t.x2-t.x1,c=t.y2-t.y1,p=t.x1-r,g=t.y1-n;if(i.attribute){let{scaleX:e=1,scaleY:t=1,angle:r=0}=i.attribute;u/=e,c/=t,p/=e,g/=t,(r||1!==e||1!==t)&&(p=null!=(l=i.x1WithoutTransform)?l:0,g=null!=(o=i.y1WithoutTransform)?o:0,u=null!=(a=i.widthWithoutTransform)?a:u,c=null!=(s=i.heightWithoutTransform)?s:c)}"linear"===d.gradient?h=function(e,t,i,r,n,l){var o,a,s,h;let d=e.createLinearGradient(i+(null!=(o=t.x0)?o:0)*n,r+(null!=(a=t.y0)?a:0)*l,i+(null!=(s=t.x1)?s:1)*n,r+(null!=(h=t.y1)?h:0)*l);return t.stops.forEach(e=>{d.addColorStop(e.offset,e.color)}),d}(e,d,p,g,u,c):"conical"===d.gradient?h=function(e,t,i,r,n,l){var o,a;let s=e.createConicGradient(i+(null!=(o=t.x)?o:0)*n,r+(null!=(a=t.y)?a:0)*l,t.startAngle,t.endAngle);return t.stops.forEach(e=>{s.addColorStop(e.offset,e.color)}),s.GetPattern?s.GetPattern(n+i,l+r,void 0):s}(e,d,p,g,u,c):"radial"===d.gradient&&(h=function(e,t,i,r,n,l){var o,a,s,h,d,u;let c=e.createRadialGradient(i+(null!=(o=t.x0)?o:.5)*n,r+(null!=(a=t.y0)?a:.5)*l,Math.max(n,l)*(null!=(s=t.r0)?s:0),i+(null!=(h=t.x1)?h:.5)*n,r+(null!=(d=t.y1)?d:.5)*l,Math.max(n,l)*(null!=(u=t.r1)?u:.5));return t.stops.forEach(e=>{c.addColorStop(e.offset,e.color)}),c}(e,d,p,g,u,c))}return h||"orange"}let ra={horizontal:{width:"width",height:"height",left:"left",top:"top",x:"x",y:"y",bottom:"bottom"},vertical:{width:"height",height:"width",left:"top",top:"left",x:"y",y:"x",bottom:"right"}},rs={fill:!0,stroke:!1};String.fromCharCode(160);let rh=/\w|\(|\)|-/,rd=/[.?!,;:/]/,ru=/\S/,rc=(e,t)=>{let i=t.fontSize||16;switch(t.script){case"super":case"sub":i*=.8}e.setTextStyle({textAlign:"left",textBaseline:t.textBaseline||"alphabetic",fontStyle:t.fontStyle||"",fontWeight:t.fontWeight||"",fontSize:i,fontFamily:t.fontFamily})};function rp(e,t,i,r,n){if(e.length<=1||!t||t<=0)return 0;let l=tU.graphicUtil.textMeasure,o=r,a=e.slice(0,o),s=Math.floor(l.measureText(a,i).width),h=e.slice(0,o+1),d=Math.floor(l.measureText(h,i).width);for(;s>t||d<=t;){if(s>t?o--:o++,o>e.length){o=e.length;break}if(o<0){o=0;break}a=e.slice(0,o),s=Math.floor(l.measureText(a,i).width),h=e.slice(0,o+1),d=Math.floor(l.measureText(h,i).width)}return n&&(o=rg(e,o)),o}function rg(e,t,i=!1){let r=t;for(;rh.test(e[r-1])&&rh.test(e[r])||rd.test(e[r]);)if(--r<=0)return i?function(e,t){let i=t;for(;rh.test(e[i+1])&&rh.test(e[i])||rd.test(e[i]);)if(++i>=e.length)return i;return i+1}(e,t):t;return r}function rf(e,t,i="actual"){var r;if(""===e)return{ascent:0,height:0,descent:0,width:0};let n=tU.graphicUtil.textMeasure.measureText(e,t),l={ascent:0,height:0,descent:0,width:0},o="actual"===i?n.actualBoundingBoxAscent:n.fontBoundingBoxAscent,a="actual"===i?n.actualBoundingBoxDescent:n.fontBoundingBoxDescent;"number"!=typeof o||"number"!=typeof a?(l.width=Math.floor(n.width),l.height=t.fontSize||0,l.ascent=l.height,l.descent=0):(l.width=Math.floor(n.width),l.height=Math.floor(o+a),l.ascent=Math.floor(o),l.descent=l.height-l.ascent);let s=null!=(r=t.space)?r:0;return l.width+=s,l}let rm=class{constructor(){this.id="ATextMeasure"}configure(e,t){this.canvas=e.canvas,this.context=e.context,e.bindTextMeasure(this)}_measureTextWithoutAlignBaseline(e,t,i){this.context.setTextStyleWithoutAlignBaseline(t);let r=this.context.measureText(e);return i?this.compatibleMetrics(r,t):r}_measureTextWithAlignBaseline(e,t,i){this.context.setTextStyle(t);let r=this.context.measureText(e);return i?this.compatibleMetrics(r,t):r}compatibleMetrics(e,t){if(null==e.actualBoundingBoxAscent||null==e.actualBoundingBoxDescent||null==e.fontBoundingBoxAscent||null==e.fontBoundingBoxDescent){e={width:e.width};let{ascent:i,descent:r}=this.measureTextBoundADscentEstimate(t);e.actualBoundingBoxAscent=i,e.actualBoundingBoxDescent=r,e.fontBoundingBoxAscent=i,e.fontBoundingBoxDescent=r}if(null==e.actualBoundingBoxLeft||null==e.actualBoundingBoxRight){e={width:e.width,actualBoundingBoxAscent:e.actualBoundingBoxAscent,actualBoundingBoxDescent:e.actualBoundingBoxDescent,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent};let{left:i,right:r}=this.measureTextBoundLeftRightEstimate(t);e.actualBoundingBoxLeft=i,e.actualBoundingBoxRight=r}return e}estimate(e,{fontSize:t=i7.fontSize}){let i=0,r=0;for(let t=0;t<e.length;t++)128>e.charCodeAt(t)?i++:r++;return{width:~~(.8*i*t+r*t),height:t}}measureTextWidth(e,t,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(e,t)).width:this.estimate(e,t).width}measureTextBoundsWidth(e,t,i){return this.context?(i=null!=i?i:this._measureTextWithoutAlignBaseline(e,t)).width:this.estimate(e,t).width}measureTextBoundsLeftRight(e,t,i){return this.context?{left:(i=null!=i?i:this._measureTextWithAlignBaseline(e,t,!0)).actualBoundingBoxLeft,right:i.actualBoundingBoxRight}:this.measureTextBoundLeftRightEstimate(t)}measureTextPixelHeight(e,t,i){var r;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(e,t,!0)).actualBoundingBoxAscent-i.actualBoundingBoxDescent):null!=(r=t.fontSize)?r:iU.fontSize}measureTextPixelADscent(e,t,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(e,t,!0)).actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent}:this.measureTextBoundADscentEstimate(t)}measureTextBoundHieght(e,t,i){var r;return this.context?Math.abs((i=null!=i?i:this._measureTextWithoutAlignBaseline(e,t,!0)).fontBoundingBoxAscent-i.fontBoundingBoxDescent):null!=(r=t.fontSize)?r:iU.fontSize}measureTextBoundADscent(e,t,i){return this.context?{ascent:(i=null!=i?i:this._measureTextWithAlignBaseline(e,t,!0)).fontBoundingBoxAscent,descent:i.fontBoundingBoxDescent}:this.measureTextBoundADscentEstimate(t)}measureTextBoundADscentEstimate(e){var t;let i=null!=(t=e.fontSize)?t:iU.fontSize;return{ascent:.79*i,descent:.21*i}}measureTextBoundLeftRightEstimate(e){var t;let i=null!=(t=e.fontSize)?t:iU.fontSize,{textAlign:r}=e;return"center"===r?{left:i/2,right:i/2}:"right"===r||"end"===r?{left:i,right:0}:{left:0,right:i}}measureTextPixelADscentAndWidth(e,t,i){if(!this.context)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(t)),{width:this.estimate(e,t).width});let r=this._measureTextWithoutAlignBaseline(e,t,!0);if(i===sp.actualBounding)return{ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,width:r.width};if(i===sp.estimate)return Object.assign(Object.assign({},this.measureTextBoundADscentEstimate(t)),{width:r.width});if(i===sp.fontBounding){let e=r.fontBoundingBoxAscent,t=r.fontBoundingBoxDescent;if(r.actualBoundingBoxDescent&&t<r.actualBoundingBoxDescent){let i=r.actualBoundingBoxDescent-t;t+=i,e-=i}else if(r.actualBoundingBoxAscent&&e<r.actualBoundingBoxAscent){let i=r.actualBoundingBoxAscent-e;e+=i,t-=i}return{ascent:e,descent:t,width:r.width}}return{ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,width:r.width}}measureText(e,t){return this.context?(this.context.setTextStyleWithoutAlignBaseline(t),this.context.measureText(e)):this.estimate(e,t)}clipTextVertical(e,t,i,r){if(0===e.length)return{verticalList:e,width:0};let{fontSize:n=12}=t;e.forEach(e=>{e.width=0===e.direction?n:this.measureTextWidth(e.text,t)});let l=[],o=0,a=0;for(;a<e.length&&o+e[a].width<i;a++)o+=e[a].width,l.push(e[a]);if(e[a]&&e[a].text.length>1){let n=this._clipText(e[a].text,t,i-o,0,e[a].text.length-1,"end",!1);if(r&&n.str!==e[a].text){let i="",r=0;for(let t=0;t<a;t++){let n=e[t];i+=n.text,r+=n.text.length}i+=e[a].text;let l=rg(i,r+n.str.length);(l-=r)!=n.str.length-1&&(n.str=n.str.substring(0,l),n.width=this.measureTextWidth(n.str,t))}l.push(Object.assign(Object.assign({},e[a]),{text:n.str,width:n.width})),o+=n.width}return{verticalList:l,width:o}}clipText(e,t,i,r,n){if(0===e.length)return{str:"",width:0};let l=this.measureTextWidth(e,t);if(l<=i)return{str:e,width:l};if((l=this.measureTextWidth(e[0],t))>i)return{str:"",width:0};let o=this._clipText(e,t,i,0,e.length-1,"end",!1);if(r&&o.str!==e){let i=rg(e,o.str.length,n);i!==o.str.length&&(i>o.str.length&&(o.wordBreaked=i,i=o.str.length),o.str=e.substring(0,i),o.width=this.measureTextWidth(o.str,t))}return o}_clipText(e,t,i,r,n,l,o){let a;if("start"===l)a=this._clipTextStart(e,t,i,r,n),o&&(a.result=o+a.str);else if("middle"===l){let r=this._clipTextMiddle(e,t,i,"","",0,0,1);a={str:"none",width:r.width,result:r.left+o+r.right}}else a=this._clipTextEnd(e,t,i,r,n),o&&(a.result=a.str+o);return a}_clipTextEnd(e,t,i,r,n){let l;if(r===n){t1.Y.getInstance().warn(`_clipTextEnd${e}, ${r}, ${n}`);let i=e.substring(0,n+1);return{str:i,width:this.measureTextWidth(i,t)}}let o=Math.floor((r+n)/2),a=e.substring(0,o+1),s=this.measureTextWidth(a,t);if(s>i){if(a.length<=1)return{str:"",width:0};let n=e.substring(0,o);return(l=this.measureTextWidth(n,t))<=i?{str:n,width:l}:this._clipTextEnd(e,t,i,r,o)}if(s<i){if(o>=e.length-1)return{str:e,width:this.measureTextWidth(e,t)};let r=e.substring(0,o+2);return(l=this.measureTextWidth(r,t))>=i?{str:a,width:s}:this._clipTextEnd(e,t,i,o,n)}return{str:a,width:s}}_clipTextStart(e,t,i,r,n){let l,o=Math.ceil((r+n)/2),a=e.substring(o-1,e.length),s=this.measureTextWidth(a,t);if(s>i){if(a.length<=1)return{str:"",width:0};let r=e.substring(o,e.length);return(l=this.measureTextWidth(r,t))<=i?{str:r,width:l}:this._clipTextStart(e,t,i,o,e.length)}if(s<i){if(o<=0)return{str:e,width:this.measureTextWidth(e,t)};let n=e.substring(o-2,e.length);return(l=this.measureTextWidth(n,t))>=i?{str:a,width:s}:this._clipTextStart(e,t,i,r,o)}return{str:a,width:s}}_clipTextMiddle(e,t,i,r,n,l,o,a){let s=e.substring(0,a),h=this.measureTextWidth(s,t);if(h+o>i)return{left:r,right:n,width:l+o};let d=e.substring(e.length-a,e.length),u=this.measureTextWidth(d,t);return h+u>i?{left:s,right:n,width:h+o}:this._clipTextMiddle(e,t,i,s,d,h,u,a+1)}clipTextWithSuffixVertical(e,t,i,r,n,l){let o;if(""===r)return this.clipTextVertical(e,t,i,n);if(0===e.length)return{verticalList:e,width:0};let a=this.clipTextVertical(e,t,i,n);if(a.verticalList.length===e.length&&a.verticalList[a.verticalList.length-1].width===e[e.length-1].width)return a;let s=this.measureTextWidth(r,t);if(s>i)return a;if(i-=s,"start"===l){let l=this.revertVerticalList(e);o=this.clipTextVertical(l,t,i,n);let a=this.revertVerticalList(o.verticalList);a.unshift({text:r,direction:1,width:s}),o.verticalList=a}else if("middle"===l){let l=this.clipTextVertical(e,t,i/2,n),a=this.revertVerticalList(e),h=this.clipTextVertical(a,t,i/2,n);l.verticalList.push({text:r,direction:1,width:s}),this.revertVerticalList(h.verticalList).forEach(e=>l.verticalList.push(e)),o={verticalList:l.verticalList,width:l.width+h.width}}else(o=this.clipTextVertical(e,t,i,n)).verticalList.push({text:r,direction:1,width:s});return o.width+=s,o}revertVerticalList(e){return e.reverse().map(e=>{let t=e.text.split("").reverse().join("");return Object.assign(Object.assign({},e),{text:t})})}clipTextWithSuffix(e,t,i,r,n,l,o=!1){if(""===r)return this.clipText(e,t,i,n);if(0===e.length)return{str:"",width:0};let a=this.measureTextWidth(e,t);if(!o&&a<=i)return{str:e,width:a};let s=this.measureTextWidth(r,t);if(s>i)return{str:"",width:0};if(o&&a+s<=i)return{str:e+r,width:a+s};i-=s;let h=this._clipText(e,t,i,0,e.length-1,l,r);if(n&&h.str!==e){let i=rg(e,h.str.length);i!==h.str.length&&(h.result=e.substring(0,i),h.width=this.measureTextWidth(h.str,t))}else o&&h.str===e&&(h.result=e+r);return h.str=h.result,h.width+=s,h}};rm=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],rm);let rb=Symbol.for("TextMeasureContribution"),ry=class extends rm{constructor(){super(...arguments),this.id="DefaultTextMeasureContribution"}};ry=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],ry);var rv=i(64449),r_=i(42708);let rC=Symbol.for("CanvasFactory"),rx=Symbol.for("Context2dFactory");function rw(e){return tG.getNamed(rC,tU.global.env)(e)}let rS=Math.sqrt(3),rA=1/3;function rk(e){return e>-rF&&e<rF}let rM=[0,0],rT=[0,0],rR=[0,0];function rE(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}function rP(e,t,i,r){let n=1-r;return n*(n*e+2*r*t)+r*r*i}function rB(e,t,i,r,n){let l=1-n;return l*l*(l*e+3*n*t)+n*n*(n*r+3*l*i)}function rI(e){return(e%=t0.f7)<0&&(e+=t0.f7),e}function rL(e,t,i,r,n,l,o){if(0===n)return!1;let a=n/2,s=0,h=e;if(o>t+a&&o>r+a||o<t-a&&o<r-a||l>e+a&&l>i+a||l<e-a&&l<i-a)return!1;if(e===i)return Math.abs(l-e)<=n/2;let d=(s=(t-r)/(e-i))*l-o+(e*r-i*t)/(e-i);return d*d/(s*s+1)<=n/2*n/2}let rF=1e-4,rH=[-1,-1,-1],rO=[-1,-1];function rD(e){return Math.round(e/t0.pi*1e8)/1e8%2*t0.pi}let rz=[0,0];function rW(e,t,i,r,n){let l=e.length,o,a,s=0,h=0,d=0,u=0,c=0;for(let b=0;b<l;b++){var p,g,f,m;let l=e[b],y=0===b;l[0]===t7.M&&b>1&&(i||(s+=(0,r_.N0)(h,d,u,c,r,n))),y&&(h=l[1],d=l[2],u=h,c=d);let v=l[0],_=l[1],C=l[2],x=l[3],w=l[4],S=l[5],A=l[6],k=w,M=S;rz[0]=k,rz[1]=M,function(e,t){let i=rD(e[0]);i<0&&(i+=t0.f7);let r=i-e[0],n=e[1];n+=r,!t&&n-i>=t0.f7?n=i+t0.f7:t&&i-n>=t0.f7?n=i-t0.f7:!t&&i>n?n=i+(t0.f7-rD(i-n)):t&&i<n&&(n=i-(t0.f7-rD(n-i))),e[0]=i,e[1]=n}(rz,!!l[6]),k=rz[0],M=rz[1];let T=k,R=M-k,E=!!(1-!l[6]),P=(r-_)*x/x+_;switch(v){case t7.M:u=_,c=C,h=u,d=c;break;case t7.L:if(i){if(rL(h,d,_,C,t,r,n))return!0}else s+=(0,r_.N0)(h,d,_,C,r,n)||0;h=_,d=C;break;case t7.C:if(i){if(p=h,g=d,0!==t&&(!(n>g+t)||!(n>C+t)||!(n>w+t)||!(n>A+t))&&(!(n<g-t)||!(n<C-t)||!(n<w-t)||!(n<A-t))&&(!(r>p+t)||!(r>_+t)||!(r>x+t)||!(r>S+t))&&(!(r<p-t)||!(r<_-t)||!(r<x-t)||!(r<S-t))&&function(e,t,i,r,n,l,o,a,s,h,d){let u,c,p,g,f=0,m=.005,b=1/0;rM[0]=s,rM[1]=h;for(let s=0;s<1;s+=.05)rT[0]=rB(e,i,n,o,s),rT[1]=rB(t,r,l,a,s),(p=rE(rM,rT))<b&&(f=s,b=p);b=1/0;for(let s=0;s<32&&!(m<1e-4);s++)u=f-m,c=f+m,rT[0]=rB(e,i,n,o,u),rT[1]=rB(t,r,l,a,u),p=rE(rT,rM),u>=0&&p<b?(f=u,b=p):(rR[0]=rB(e,i,n,o,c),rR[1]=rB(t,r,l,a,c),g=rE(rR,rM),c<=1&&g<b?(f=c,b=g):m*=.5);return Math.sqrt(b)}(p,g,_,C,x,w,S,A,r,n,0)<=t/2)return!0}else s+=function(e,t,i,r,n,l,o,a,s,h){if(h>t&&h>r&&h>l&&h>a||h<t&&h<r&&h<l&&h<a)return 0;let d=function(e,t,i,r,n,l){let o=r+3*(t-i)-e,a=3*(i-2*t+e),s=3*(t-e),h=e-n,d=a*a-3*o*s,u=a*s-9*o*h,c=s*s-3*a*h,p=0;if(rk(d)&&rk(u))if(rk(a))l[0]=0;else{let e=-s/a;e>=0&&e<=1&&(l[p++]=e)}else{let e=u*u-4*d*c;if(rk(e)){let e=u/d,t=-a/o+e,i=-e/2;t>=0&&t<=1&&(l[p++]=t),i>=0&&i<=1&&(l[p++]=i)}else if(e>0){let t=Math.sqrt(e),i=d*a+1.5*o*(-u+t),r=d*a+1.5*o*(-u-t),n=(-a-((i=i<0?-Math.pow(-i,rA):Math.pow(i,rA))+(r=r<0?-Math.pow(-r,rA):Math.pow(r,rA))))/(3*o);n>=0&&n<=1&&(l[p++]=n)}else{let e=Math.acos((2*d*a-3*o*u)/(2*Math.sqrt(d*d*d)))/3,t=Math.sqrt(d),i=Math.cos(e),r=(-a-2*t*i)/(3*o),n=(-a+t*(i+rS*Math.sin(e)))/(3*o),s=(-a+t*(i-rS*Math.sin(e)))/(3*o);r>=0&&r<=1&&(l[p++]=r),n>=0&&n<=1&&(l[p++]=n),s>=0&&s<=1&&(l[p++]=s)}}return p}(t,r,l,a,h,rH);if(0===d)return 0;let u=0,c=-1,p=0,g=0;for(let h=0;h<d;h++){let d=rH[h],f=0===d||1===d?.5:1;rB(e,i,n,o,d)<s||(c<0&&(c=function(e,t,i,r,n){let l=6*i-12*t+6*e,o=9*t+3*r-3*e-9*i,a=3*t-3*e,s=0;if(rk(o)){if(l>rF||l<-rF){let e=-a/l;e>=0&&e<=1&&(n[s++]=e)}}else{let e=l*l-4*o*a;if(rk(e))n[0]=-l/(2*o);else if(e>0){let t=Math.sqrt(e),i=(-l+t)/(2*o),r=(-l-t)/(2*o);i>=0&&i<=1&&(n[s++]=i),r>=0&&r<=1&&(n[s++]=r)}}return s}(t,r,l,a,rO),rO[1]<rO[0]&&c>1&&function(){let e=rO[0];rO[0]=rO[1],rO[1]=e}(),p=rB(t,r,l,a,rO[0]),c>1&&(g=rB(t,r,l,a,rO[1]))),2===c?d<rO[0]?u+=p<t?f:-f:d<rO[1]?u+=g<p?f:-f:u+=a<g?f:-f:d<rO[0]?u+=p<t?f:-f:u+=a<p?f:-f)}return u}(h,d,_,C,x,w,S,A,r,n)||0;h=S,d=A;break;case t7.Q:if(i){if(f=h,m=d,0!==t&&(!(n>m+t)||!(n>C+t)||!(n>w+t))&&(!(n<m-t)||!(n<C-t)||!(n<w-t))&&(!(r>f+t)||!(r>_+t)||!(r>x+t))&&(!(r<f-t)||!(r<_-t)||!(r<x-t))&&function(e,t,i,r,n,l,o,a,s){let h=0,d=.005,u=1/0;rM[0]=o,rM[1]=a;for(let o=0;o<1;o+=.05){rT[0]=rP(e,i,n,o),rT[1]=rP(t,r,l,o);let a=rE(rM,rT);a<u&&(h=o,u=a)}u=1/0;for(let o=0;o<32&&!(d<1e-4);o++){let o=h-d,a=h+d;rT[0]=rP(e,i,n,o),rT[1]=rP(t,r,l,o);let s=rE(rT,rM);if(o>=0&&s<u)h=o,u=s;else{rR[0]=rP(e,i,n,a),rR[1]=rP(t,r,l,a);let o=rE(rR,rM);a<=1&&o<u?(h=a,u=o):d*=.5}}return Math.sqrt(u)}(f,m,_,C,x,w,r,n,0)<=t/2)return!0}else s+=function(e,t,i,r,n,l,o,a){if(a>t&&a>r&&a>l||a<t&&a<r&&a<l)return 0;let s=function(e,t,i,r,n){let l=e-2*t+i,o=2*(t-e),a=e-r,s=0;if(rk(l)){if(o>rF||o<-rF){let e=-a/o;e>=0&&e<=1&&(n[s++]=e)}}else{let e=o*o-4*l*a;if(rk(e)){let e=-o/(2*l);e>=0&&e<=1&&(n[s++]=e)}else if(e>0){let t=Math.sqrt(e),i=(-o+t)/(2*l),r=(-o-t)/(2*l);i>=0&&i<=1&&(n[s++]=i),r>=0&&r<=1&&(n[s++]=r)}}return s}(t,r,l,a,rH);if(0===s)return 0;let h=function(e,t,i){let r=e+i-2*t;return 0===r?.5:(e-t)/r}(t,r,l);if(h>=0&&h<=1){let a=0,d=rP(t,r,l,h);for(let r=0;r<s;r++){let s=0===rH[r]||1===rH[r]?.5:1;rP(e,i,n,rH[r])<o||(rH[r]<h?a+=d<t?s:-s:a+=l<d?s:-s)}return a}let d=0===rH[0]||1===rH[0]?.5:1;return rP(e,i,n,rH[0])<o?0:l<t?d:-d}(h,d,_,C,x,w,r,n)||0;h=x,d=w;break;case t7.A:if(o=Math.cos(T)*x+_,a=Math.sin(T)*x+C,y?(u=o,c=a):s+=(0,r_.N0)(h,d,o,a,r,n),i){if(function(e,t,i,r,n,l,o,a,s){if(0===o)return!1;let h=Math.sqrt((a-=e)*a+(s-=t)*s);if(h-o>i||h+o<i)return!1;if(Math.abs(r-n)%t0.f7<1e-4)return!0;if(l){let e=r;r=rI(n),n=rI(e)}else r=rI(r),n=rI(n);r>n&&(n+=t0.f7);let d=Math.atan2(s,a);return d<0&&(d+=t0.f7),d>=r&&d<=n||d+t0.f7>=r&&d+t0.f7<=n}(_,C,x,T,T+R,E,t,P,n))return!0}else s+=function(e,t,i,r,n,l,o,a){if((a-=t)>i||a<-i)return 0;let s=Math.sqrt(i*i-a*a);rH[0]=-s,rH[1]=s;let h=Math.abs(r-n);if(h<1e-4)return 0;if(h>=t0.f7-1e-4)return r=0,n=t0.f7,o>=rH[0]+e&&o<=rH[1]+e?l?1:-1:0;if(r>n){let e=r;r=n,n=e}r<0&&(r+=t0.f7,n+=t0.f7);let d=0;for(let t=0;t<2;t++){let i=rH[t];if(i+e>o){let e=Math.atan2(a,i),t=l?1:-1;e<0&&(e=t0.f7+e),(e>=r&&e<=n||e+t0.f7>=r&&e+t0.f7<=n)&&(e>t0.pi/2&&e<1.5*t0.pi&&(t=-t),d+=t)}}return d}(_,C,x,T,T+R,E,P,n);h=Math.cos(T+R)*x+_,d=Math.sin(T+R)*x+C;break;case t7.R:if(u=h=_,c=d=C,o=u+x,a=c+w,i){if(rL(u,c,o,c,t,r,n)||rL(o,c,o,a,t,r,n)||rL(o,a,u,a,t,r,n)||rL(u,a,u,c,t,r,n))return!0}else s+=(0,r_.N0)(o,c,o,a,r,n),s+=(0,r_.N0)(u,a,u,c,r,n);break;case t7.Z:if(i){if(rL(h,d,u,c,t,r,n))return!0}else s+=(0,r_.N0)(h,d,u,c,r,n);h=u,d=c}}return i||Math.abs(d-c)<rF||(s+=(0,r_.N0)(h,d,u,c,r,n)||0),0!==s}let rZ=new class{constructor(){this.pools=[],this.allocatedCanvas=[]}shareCanvas(){return this.allocatedCanvas.length?this.allocatedCanvas[0]:this.getCommonCanvas()}getCommonCanvas(){return this._commonCanvas||(this._commonCanvas=this.allocate({width:100,height:100,dpr:2})),this._commonCanvas}allocate(e){if(!this.pools.length){let t=rw(Object.assign({nativeCanvas:tU.global.createCanvas(e)},e));return this.allocatedCanvas.push(t),t}let t=this.pools.pop();return t.resize(e.width,e.height),t.dpr=e.dpr,t}allocateByObj(e){if(!this.pools.length){let t={width:e.width/e.dpr,height:e.height/e.dpr,dpr:e.dpr},i=rw(Object.assign({nativeCanvas:tU.global.createCanvas(t)},t));return this.allocatedCanvas.push(i),i}let t=this.pools.pop();return t.width=e.width,t.height=e.height,t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(...e){this.pools=[]}};var rN=i(36163);let r$=Symbol.for("VWindow"),rj=Symbol.for("WindowHandlerContribution"),rG=class extends tY{get width(){if(this._handler){let e=this._handler.getWH();return this._width=e.width}return this._width}get height(){if(this._handler){let e=this._handler.getWH();return this._height=e.height}return this._height}get dpr(){return this._handler.getDpr()}constructor(){super(),this.hooks={onChange:new tF(["x","y","width","height"])},this.active=()=>{let e=this.global;e.env&&!this.actived&&(tG.getNamed(rj,e.env).configure(this,e),this.actived=!0)},this._uid=tm.GenAutoIncrementId(),this.global=tU.global,this.postInit()}_nativeAddEventListener(e,t,i){return this._handler.addEventListener(e,t,i)}_nativeRemoveEventListener(e,t,i){return this._handler.removeEventListener(e,t,i)}_nativeDispatchEvent(e){return this._handler.dispatchEvent(e)}postInit(){this.global.hooks.onSetEnv.tap("window",this.active),this.active()}get style(){var e;return null!=(e=this._handler.getStyle())?e:{}}set style(e){this._handler.setStyle(e)}create(e){var t,i;this._handler.createWindow(e);let r=this._handler.getWH();this._width=r.width,this._height=r.height,e.viewBox?this.setViewBox(e.viewBox):!1!==e.canvasControled?this.setViewBox({x1:0,y1:0,x2:this._width,y2:this._height}):this.setViewBox({x1:0,y1:0,x2:null!=(t=e.width)?t:this._width,y2:null!=(i=e.height)?i:this._height}),this.title=this._handler.getTitle(),this.resizable=!0}setWindowHandler(e){this._handler=e}setDpr(e){return this._handler.setDpr(e)}resize(e,t){return this._handler.resizeWindow(e,t)}configure(){throw Error("")}release(){return this.global.hooks.onSetEnv.unTap("window",this.active),this.clearAllEventListeners(),this._handler.releaseWindow()}getContext(){return this._handler.getContext()}getNativeHandler(){return this._handler.getNativeHandler()}getImageBuffer(e){return this._handler.getImageBuffer?this._handler.getImageBuffer(e):null}getBoundingClientRect(){return this._handler.getBoundingClientRect()}getContainer(){return this._handler.container}clearViewBox(e){this._handler.clearViewBox(e)}setViewBox(e){this._handler.setViewBox(e)}setViewBoxTransform(e,t,i,r,n,l){this._handler.setViewBoxTransform(e,t,i,r,n,l)}getViewBox(){return this._handler.getViewBox()}getViewBoxTransform(){return this._handler.getViewBoxTransform()}pointTransform(e,t){let i=this._handler.getViewBox(),r={x:e,y:t};return this._handler.getViewBoxTransform().transformPoint({x:e,y:t},r),r.x-=i.x1,r.y-=i.y1,r}hasSubView(){let e=this._handler.getViewBox();return!(0===e.x1&&0===e.y1&&(0,rN.Yt)(this.width,e.width())&&(0,rN.Yt)(this.height,e.height()))}isVisible(e){return this._handler.isVisible(e)}onVisibleChange(e){return this._handler.onVisibleChange(e)}getTopLeft(e){return this._handler.getTopLeft(e)}};rG=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],rG);var rV=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o},rU=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},rK=function(e,t){return function(i,r){t(i,r,e)}};let rX=class{get canvas(){return this.tryInitCanvas(),this._canvas}get context(){return this.tryInitCanvas(),this._context}constructor(e){this.contributions=e,this.configured=!1,this.global=tU.global,this._textMeasureMap=new Map,this.global.hooks.onSetEnv.tap("graphic-util",(e,t,i)=>{this.configured=!1,this.configure(i,t)})}get textMeasure(){return this._textMeasure||this.configure(this.global,this.global.env),this._textMeasure}getTextMeasureInstance(e){return e&&this._textMeasureMap.get(e)||this.textMeasure}configure(e,t){this.configured||(this.contributions.getContributions().forEach(e=>{e.configure(this,t)}),this.configured=!0)}tryInitCanvas(){if(!this._canvas){let e=rZ.shareCanvas();this._canvas=e,this._context=e.getContext("2d")}}bindTextMeasure(e){this._textMeasure&&"DefaultTextMeasureContribution"!==e.id||(this._textMeasure=e),this._textMeasureMap.has(e.id)||this._textMeasureMap.set(e.id,e)}measureText(e,t,i="native"){var r;this.configure(this.global,this.global.env);let n=this.global.measureTextMethod;this.global.measureTextMethod=i;let l={width:this._textMeasure.measureTextWidth(e,t),height:null!=(r=t.fontSize)?r:iU.fontSize};return this.global.measureTextMethod=n,l}createTextMeasureInstance(e,t,i){return this.configure(this.global,this.global.env),new rv.e(Object.assign({defaultFontParams:{fontFamily:iU.fontFamily,fontSize:iU.fontSize},getCanvasForMeasure:i||(()=>this.canvas),getTextBounds:void 0,specialCharSet:"-/: .,@%'\"~"+rv.e.ALPHABET_CHAR_SET+rv.e.ALPHABET_CHAR_SET.toUpperCase()},null!=t?t:{}),e)}drawGraphicToCanvas(e,t,i){if(!t.defaultLayer)return null;let r=tG.get(r$),n=e.AABBBounds,l=n.width(),o=n.height(),a=-n.x1,s=-n.y1;r.create({viewBox:{x1:a,y1:s,x2:n.x2,y2:n.y2},width:l,height:o,canvas:i,dpr:t.window.dpr,canvasControled:!0,offscreen:!0,title:""});let h=t.params.optimize.disableCheckGraphicWidthOutRange;t.params.optimize.disableCheckGraphicWidthOutRange=!0,t.defaultLayer.getNativeHandler().drawTo(r,[e],{transMatrix:r.getViewBoxTransform(),viewBox:r.getViewBox(),stage:t,layer:t.defaultLayer,renderService:t.renderService,background:"transparent",clear:!0,updateBounds:!1}),t.params.optimize.disableCheckGraphicWidthOutRange=h;let d=r.getNativeHandler();return d.nativeCanvas?d.nativeCanvas:null}};rX=rV([tS(),rK(0,tT(tE)),rK(0,tR(rb)),rU("design:paramtypes",[Object])],rX),(sa=s_||(s_={}))[sa.transform=0]="transform",sa[sa.matrix=1]="matrix";let rY=new tQ.y,rq=class{constructor(){this.matrix=new tQ.y}init(e){return this.mode=s_.transform,this.originTransform=e,this.matrix.reset(),this}fromMatrix(e,t){return this.mode=s_.matrix,this.outSourceMatrix=e,this.outTargetMatrix=t,this}scaleMatrix(e,t,i){let r=this.outSourceMatrix;if(rY.setValue(r.a,r.b,r.c,r.d,r.e,r.f),this.outTargetMatrix.reset(),i){let{x:r,y:n}=i;this.outTargetMatrix.translate(r,n),this.outTargetMatrix.scale(e,t),this.outTargetMatrix.translate(-r,-n)}else this.outTargetMatrix.scale(e,t);return this.outTargetMatrix.multiply(rY.a,rY.b,rY.c,rY.d,rY.e,rY.f),this}rotateMatrix(e,t){let i=this.outSourceMatrix;if(rY.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),t){let{x:i,y:r}=t;this.outTargetMatrix.translate(i,r),this.outTargetMatrix.rotate(e),this.outTargetMatrix.translate(-i,-r)}else this.outTargetMatrix.rotate(e);return this.outTargetMatrix.multiply(rY.a,rY.b,rY.c,rY.d,rY.e,rY.f),this}scale(e,t,i){return this.mode===s_.matrix?this.scaleMatrix(e,t,i):this}rotate(e,t){return this.mode===s_.matrix?this.rotateMatrix(e,t):this}translateMatrix(e,t){let i=this.outSourceMatrix;return rY.setValue(i.a,i.b,i.c,i.d,i.e,i.f),this.outTargetMatrix.reset(),this.outTargetMatrix.translate(e,t),this.outTargetMatrix.multiply(rY.a,rY.b,rY.c,rY.d,rY.e,rY.f),this}translate(e,t){return this.mode===s_.matrix?this.translateMatrix(e,t):this}simplify(e){return this.mode===s_.matrix?this.simplifyMatrix(e):this}simplifyMatrix(e){return this}};rq=rV([tS(),rU("design:paramtypes",[])],rq);let rJ={arc:iq,area:iJ,circle:iQ,line:i2,path:i3,symbol:i8,text:i7,rect:i6,polygon:i4,star:i5,richtext:i9,richtextIcon:rt,image:re,group:i0,glyph:i1},rQ=Object.keys(rJ);function r0(e,t){Object.keys(t).forEach(i=>{e[i]=t[i]})}let r1={arc:Object.assign({},rJ.arc),area:Object.assign({},rJ.area),circle:Object.assign({},rJ.circle),line:Object.assign({},rJ.line),path:Object.assign({},rJ.path),symbol:Object.assign({},rJ.symbol),text:Object.assign({},rJ.text),rect:Object.assign({},rJ.rect),polygon:Object.assign({},rJ.polygon),star:Object.assign({},rJ.star),richtext:Object.assign({},rJ.richtext),richtextIcon:Object.assign({},rJ.richtextIcon),image:Object.assign({},rJ.image),group:Object.assign({},rJ.group),glyph:Object.assign({},rJ.glyph)};class r2{constructor(){this.initTheme(),this.dirty=!1}initTheme(){this._defaultTheme={},rQ.forEach(e=>{this._defaultTheme[e]=Object.create(r1[e])}),this.combinedTheme=this._defaultTheme}getTheme(e){if(!e||!this.dirty)return this.combinedTheme;let t={},i=this.getParentWithTheme(e);return i&&(t=i.theme),this.applyTheme(e,t),this.combinedTheme}getParentWithTheme(e){for(;e.parent;)if((e=e.parent).theme)return e;return null}applyTheme(e,t,i=!1){if(this.dirty){let r=this.getParentWithTheme(e);if(r){let e=r.theme;(e.dirty||i)&&e.applyTheme(r,t,!0)}this.userTheme?this.doCombine(r&&r.theme.combinedTheme):(r?this.combinedTheme=r.theme.combinedTheme:(this.combinedTheme=this._defaultTheme,t1.Y.getInstance().warn("")),this.dirty=!1)}return this.combinedTheme}doCombine(e){let t=this.userTheme,i=this.combinedTheme;rQ.forEach(r=>{let n=Object.create(r1[r]);e&&e[r]&&r0(n,e[r]),i[r]&&r0(n,i[r]),t[r]&&r0(n,t[r]),this.combinedTheme[r]=n}),t.common&&rQ.forEach(e=>{r0(this.combinedTheme[e],t.common)}),this.dirty=!1}setTheme(e,t){let i=this.userTheme;i?Object.keys(e).forEach(t=>{i[t]?Object.assign(i[t],e[t]):i[t]=Object.assign({},e[t])}):i=e,this.userTheme=i,this.dirty=!0,this.dirtyChildren(t)}resetTheme(e,t){this.userTheme=e,this.dirty=!0,this.dirtyChildren(t)}dirtyChildren(e){e.forEachChildren(e=>{e.isContainer&&(e.theme&&(e.theme.dirty=!0),this.dirtyChildren(e))})}}let r3=new r2;function r4(e,t){return e.glyphHost?r4(e.glyphHost):t?(e.isContainer,t):function(e){let t;if(t=e.isContainer?e:e.parent){for(;t&&!t.theme;)t=t.parent;return t?(t.theme||t.createTheme(),t.theme.getTheme(t)):r3.getTheme()}return null}(e)||e.attachedThemeGraphic&&r4(e.attachedThemeGraphic)||r3.getTheme()}var r5=i(54326),r6=i(83624),r8=i(36410),r7=i(6761),r9=i(80971),ne=i(21883),nt=i.n(ne),ni=i(63778),nr=i(96241);class nn extends nt(){get previousSibling(){return this._prev}get nextSibling(){return this._next}get children(){return this.getChildren()}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get count(){return this._count}get childrenCount(){return this._idMap?this._idMap.size:0}constructor(){super(),this._uid=tm.GenAutoIncrementId(),this._firstChild=null,this._lastChild=null,this.parent=null,this._count=1}forEachChildren(e,t=!1){if(t){let t=this._lastChild,i=0;for(;t;){if(e(t,i++))return;t=t._prev}}else{let t=this._firstChild,i=0;for(;t;){if(e(t,i++))return;t=t._next}}}forEachChildrenAsync(e,t=!1){var i,r,n,l;return i=this,r=void 0,n=void 0,l=function*(){if(t){let t=this._lastChild,i=0;for(;t;){let r=e(t,i++);if(r.then&&(r=yield r),r)return;t=t._prev}}else{let t=this._firstChild,i=0;for(;t;){let r=e(t,i++);if(r.then&&(r=yield r),r)return;t=t._next}}},new(n||(n=Promise))(function(e,t){function o(e){try{s(l.next(e))}catch(e){t(e)}}function a(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var i;t.done?e(t.value):((i=t.value)instanceof n?i:new n(function(e){e(i)})).then(o,a)}s((l=l.apply(i,r||[])).next())})}forEach(e){return this.forEachChildren(e)}appendChild(e,t=!0){if(this._uid===e._uid)return null;if(!t&&e.isAncestorsOf(this))throw Error("Node::appendChildappend");return e.parent&&e.parent.removeChild(e),e.parent=this,this._lastChild?(this._lastChild._next=e,e._prev=this._lastChild,this._lastChild=e):(this._firstChild=this._lastChild=e,e._prev=e._next=null),this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this.setCount(e.count),this._structEdit=!0,e}appendChildArrHighPerformance(e,t=!1){return console.error(""),e}insertBefore(e,t){if(!t)return this.appendChild(e);if(this===e||e===t)return null;if(e.isAncestorsOf(this))throw Error("Node::insertBeforeinsert");return t.parent!==this?null:(e.parent&&e.parent.removeChild(e),e.parent=this,e._prev=t._prev,t._prev?t._prev._next=e:this._firstChild=e,t._prev=e,e._next=t,this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e)}insertAfter(e,t){if(!t)return this.appendChild(e);if(this===e||e===t)return null;if(e.isAncestorsOf(this))throw Error("Node::insertAfterinsert");return t.parent!==this?null:(e.parent&&e.parent.removeChild(e),e.parent=this,t._next?(t._next._prev=e,e._next=t._next):this._lastChild=e,t._next=e,e._prev=t,this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e)}insertInto(e,t){if(!this._ignoreWarn&&this._nodeList&&t1.Y.getInstance().warn("insertIntoKeepIdxinsertInto"),t>=this.childrenCount)return this.appendChild(e);if(this===e)return null;if(e.isAncestorsOf(this))throw Error("Node::insertBeforeinsert");if(e.parent&&e.parent.removeChild(e),e.parent=this,0===t)e._next=this._firstChild,this._firstChild&&(this._firstChild._prev=e),e._prev=null,this._firstChild=e;else{let i=this._firstChild;for(let e=0;e<t;e++){if(!i)return null;e>0&&(i=i._next)}if(!i)return null;e._next=i._next,e._prev=i,i._next=e,e._next&&(e._next._prev=e)}return this._idMap||(this._idMap=new Map),this._idMap.set(e._uid,e),this._structEdit=!0,this.setCount(e.count),e}insertIntoKeepIdx(e,t){let i;if(this._nodeList||(this._nodeList=this.children),this._nodeList[t]){let i=this._nodeList[t];return this._nodeList.splice(t,0,e),this.insertBefore(e,i)}this._nodeList[t]=e;for(let e=t-1;e>=0&&!(i=this._nodeList[e]);e--);if(i)return i._next?this.insertBefore(e,i._next):this.appendChild(e);this._ignoreWarn=!0;let r=this.insertInto(e,0);return this._ignoreWarn=!1,r}removeChild(e){if(!this._idMap||!this._idMap.has(e._uid))return null;if(this._idMap.delete(e._uid),this._nodeList){let t=this._nodeList.findIndex(t=>t===e);t>=0&&this._nodeList.splice(t,1)}return e._prev?e._prev._next=e._next:this._firstChild=e._next,e._next?e._next._prev=e._prev:this._lastChild=e._prev,e.parent=null,e._prev=null,e._next=null,this._structEdit=!0,this.setCount(-e.count),e}delete(){this.parent&&this.parent.removeChild(this)}removeAllChild(e){if(!this._idMap)return;this._nodeList&&(this._nodeList.length=0);let t=this._firstChild;for(;t;){let e=t._next;t.parent=null,t._prev=null,t._next=null,t=t._next,t=e}this._firstChild=null,this._lastChild=null,this._idMap.clear(),this._structEdit=!0,this.setCount(1-this._count)}replaceChild(e,t){throw Error("")}find(e,t=!1){let i=null;return this.forEachChildren((t,r)=>!(t===this||!e(t,r))&&(i=t,!0)),t&&this.forEachChildren(t=>{if(t.isContainer){let r=t.find(e,!0);if(r)return i=r,!0}return!1}),i}findAll(e,t=!1){let i=[];return this.forEachChildren((t,r)=>{t!==this&&e(t,r)&&i.push(t)}),t&&this.forEachChildren(t=>{if(t.isContainer){let r=t.findAll(e,!0);r.length&&(i=i.concat(r))}}),i}getElementById(e){return this.find(t=>t.id===e,!0)}findChildById(e){return this.getElementById(e)}findChildByUid(e){return this._idMap&&this._idMap.get(e)||null}getElementsByName(e){return this.findAll(t=>t.name===e,!0)}findChildrenByName(e){return this.getElementsByName(e)}getElementsByType(e){return this.findAll(t=>t.type===e,!0)}getChildByName(e,t=!1){return this.find(t=>t.name===e,t)}getChildAt(e){let t=this._firstChild;if(!t)return null;for(let i=0;i<e;i++){if(!t._next)return null;t=t._next}return t}at(e){return this.getChildAt(e)}containNode(e){if(!this._idMap)return!1;if(this._idMap.has(e._uid))return!0;let t=this._firstChild;for(;t;){if(t.containNode(e))return!0;t=t._next}return!1}getRootNode(){let e=this.parent;for(;null==e?void 0:e.parent;)e=e.parent;return e||this}hasChildNodes(){return null!==this._firstChild}addChild(e){return this.appendChild(e)}add(e){return this.appendChild(e)}getChildren(){let e=[],t=this._firstChild;for(;t;)e.push(t),t=t._next;return e}isChildOf(e){return!!this.parent&&this.parent._uid===e._uid}isParentOf(e){return e.isChildOf(this)}isDescendantsOf(e){let t=this.parent;if(!t)return!1;do{if(t._uid===e._uid)return!0;t=t.parent}while(null!==t);return!1}isAncestorsOf(e){return e.isDescendantsOf(this)}getAncestor(e){throw Error("")}setAllDescendantsProps(e,t){let i=this._firstChild;for(;i;)i[e]=t,i.setAllDescendantsProps(e,t),i=i._next}setCount(e){this._count+=e;let t=this.parent;if(t)do t._count+=e,t=t.parent;while(null!==t)}clone(){throw Error("")}cloneTo(e){throw Error("")}getParent(){return this.parent}del(e){return this.removeChild(e)}addEventListener(e,t,i){let r=(0,ni.Z)(i,!0)&&i||(0,r9.Z)(i)&&i.capture,n=(0,r9.Z)(i)&&i.once,l=(0,nr.Z)(t)?void 0:t;return e=r?`${e}capture`:e,t=(0,nr.Z)(t)?t:t.handleEvent,n?super.once(e,t,l):super.on(e,t,l),this}on(e,t,i){return this.addEventListener(e,t,i)}removeEventListener(e,t,i){let r=(0,ni.Z)(i,!0)&&i||(0,r9.Z)(i)&&i.capture,n=(0,nr.Z)(t)?void 0:t;e=r?`${e}capture`:e,t=(0,nr.Z)(t)?t:t.handleEvent;let l=(0,r9.Z)(i)&&i.once;return super.off(e,t,n,l),this}off(e,t,i){return this.removeEventListener(e,t,i)}once(e,t,i){return(0,r9.Z)(i)?(i.once=!0,this.addEventListener(e,t,i)):this.addEventListener(e,t,{once:!0})}removeAllEventListeners(){return super.removeAllListeners(),this}removeAllListeners(){return this.removeAllEventListeners()}dispatchEvent(e,...t){return super.emit(e.type,e,...t),!e.defaultPrevented}emit(e,t){return this.dispatchEvent(e,t)}release(){this.removeAllListeners()}}class nl{get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get x(){return this.canvas.x}get y(){return this.canvas.y}get canvasX(){return this.canvas.x}get canvasY(){return this.canvas.y}get viewX(){return this.viewport.x}get viewY(){return this.viewport.y}constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=nl.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer={x:0,y:0},this.page={x:0,y:0},this.canvas={x:0,y:0},this.viewport={x:0,y:0},this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.composedDetailPath(),this.path}composedDetailPath(){return this.pickParams&&this.pickParams.graphic?(this.detailPath=this.path.slice(),this._composedDetailPath(this.pickParams)):this.detailPath=this.path.slice(),this.detailPath}_composedDetailPath(e){if(e&&e.graphic){let t=e.graphic;if(t.stage){let i=t.stage.eventSystem.manager.propagationPath(t);this.detailPath.push(i),this._composedDetailPath(e.params)}}}preventDefault(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault()}catch(e){this.nativeEvent.preventDefault&&(0,nr.Z)(this.nativeEvent.preventDefault)&&this.nativeEvent.preventDefault()}this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){try{this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.stopPropagation()}catch(e){this.nativeEvent.stopPropagation&&(0,nr.Z)(this.nativeEvent.stopPropagation)&&this.nativeEvent.stopPropagation()}this.propagationStopped=!0}initEvent(){}initUIEvent(){}clone(){throw Error("Method not implemented.")}}class no extends nl{constructor(e,t){super(),this.type=e,this.detail=t}}class na{static GetImage(e,t){var i;let r=na.cache.get(e);r?"fail"===r.loadState?tU.global.getRequestAnimationFrame()(()=>{t.imageLoadFail(e)}):"init"===r.loadState||"loading"===r.loadState?null==(i=r.waitingMark)||i.push(t):t&&t.imageLoadSuccess(e,r.data):na.loadImage(e,t)}static GetSvg(e,t){var i;let r=na.cache.get(e);r?"fail"===r.loadState?tU.global.getRequestAnimationFrame()(()=>{t.imageLoadFail(e)}):"init"===r.loadState||"loading"===r.loadState?null==(i=r.waitingMark)||i.push(t):t&&t.imageLoadSuccess(e,r.data):(r={type:"image",loadState:"init"},na.cache.set(e,r),r.dataPromise=tU.global.loadSvg(e),r.dataPromise?(r.waitingMark=[t],r.dataPromise.then(t=>{var i;r.loadState=(null==t?void 0:t.data)?"success":"fail",r.data=null==t?void 0:t.data,null==(i=r.waitingMark)||i.map((i,n)=>{(null==t?void 0:t.data)?(r.loadState="success",r.data=t.data,i.imageLoadSuccess(e,t.data)):(r.loadState="fail",i.imageLoadFail(e))}),r.waitingMark&&(r.waitingMark=[])})):(r.loadState="fail",t.imageLoadFail(e)))}static GetFile(e,t){let i=na.cache.get(e);return i?"fail"===i.loadState?Promise.reject():"init"===i.loadState||"loading"===i.loadState?i.dataPromise.then(e=>e.data):Promise.resolve(i.data):(i={type:t,loadState:"init"},na.cache.set(e,i),"arrayBuffer"===t?i.dataPromise=tU.global.loadArrayBuffer(e):"blob"===t?i.dataPromise=tU.global.loadBlob(e):"json"===t&&(i.dataPromise=tU.global.loadJson(e)),i.dataPromise.then(e=>e.data))}static loading(){setTimeout(()=>{if(!na.isLoading&&na.toLoadAueue.length){na.isLoading=!0;let e=na.toLoadAueue.splice(0,10),t=[];e.forEach(e=>{let{url:i,marks:r}=e,n={type:"image",loadState:"init"};if(na.cache.set(i,n),n.dataPromise=tU.global.loadImage(i),n.dataPromise){n.waitingMark=r;let e=n.dataPromise.then(e=>{var t;n.loadState=(null==e?void 0:e.data)?"success":"fail",n.data=null==e?void 0:e.data,null==(t=n.waitingMark)||t.map((t,r)=>{(null==e?void 0:e.data)?(n.loadState="success",n.data=e.data,t.imageLoadSuccess(i,e.data)):(n.loadState="fail",t.imageLoadFail(i))}),n.waitingMark&&(n.waitingMark=[])});t.push(e)}else n.loadState="fail",r.forEach(e=>e.imageLoadFail(i))}),Promise.all(t).then(()=>{na.isLoading=!1,this.onLoadSuccessCb.forEach(e=>e()),na.loading()}).catch(e=>{console.error(e),na.isLoading=!1,this.onLoadSuccessCb.forEach(e=>e()),na.loading()})}},0)}static loadImage(e,t){let i=ns(e,na.toLoadAueue);if(-1!==i)return na.toLoadAueue[i].marks.push(t),void na.loading();na.toLoadAueue.push({url:e,marks:[t]}),na.loading()}static improveImageLoading(e){let t=ns(e,na.toLoadAueue);if(-1!==t){let e=na.toLoadAueue.splice(t,1);na.toLoadAueue.unshift(e[0])}}static onLoadSuccess(e){this.onLoadSuccessCb.push(e)}}function ns(e,t){for(let i=0;i<t.length;i++)if(t[i].url===e)return i;return -1}na.cache=new Map,na.isLoading=!1,na.toLoadAueue=[],na.onLoadSuccessCb=[],(ss=sC||(sC={}))[ss.Top=1]="Top",ss[ss.Right=2]="Right",ss[ss.Bottom=4]="Bottom",ss[ss.Left=8]="Left",ss[ss.ALL=15]="ALL";let nh=[!1,!1,!1,!1],nd=e=>{var t;let i=!0;if((0,ni.Z)(e,!0)){for(let r=0;r<4;r++)nh[r]=e,i&&(i=!(null!=(t=nh[r])&&!t));i=e}else if(Array.isArray(e))for(let t=0;t<4;t++)nh[t]=!!e[t],i&&(i=!!nh[t]);else nh[0]=!1,nh[1]=!1,nh[2]=!1,nh[3]=!1;return{isFullStroke:i,stroke:nh}},nu=[0,0,0,0],nc=e=>e?(0,ri.Z)(e)?0===e.length?0:1===e.length?e[0]:2===e.length?(nu[0]=e[0],nu[2]=e[0],nu[1]=e[1],nu[3]=e[1],nu):e:e:0,np=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],ng=[1,2,3,0,1,2,3,0];function nf(e,t,i,r){for(;e>=t0.f7;)e-=t0.f7;for(;e<0;)e+=t0.f7;for(;e>t;)t+=t0.f7;np[0].x=i,np[1].y=i,np[2].x=-i,np[3].y=-i;let n=Math.ceil(e/t0.ou)%4,l=Math.ceil(t/t0.ou)%4;if(r.add((0,t0.mC)(e)*i,(0,t0.O$)(e)*i),r.add((0,t0.mC)(t)*i,(0,t0.O$)(t)*i),n!==l||t-e>t0.pi){let e=!1;for(let t=0;t<ng.length;t++)if(e||n!==ng[t]){if(e&&l===ng[t])break;if(e){let e=np[ng[t]];r.add(e.x,e.y)}}else{e=!0;let t=np[n];r.add(t.x,t.y)}}}function nm(e,t,i){let{x:r,y:n}=(0,t0.KU)(e.x,e.y,t.x,t.y,i),{x:l,y:o}=(0,t0.KU)(e.x1,e.y1,t.x1,t.y1,i),a=new il.E9(r,n,l,o);return a.defined=t.defined,a}function nb(e,t,i){if(!e||!t)return[];Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);let r=[];if(e.length>t.length){r=t.map(e=>{let t=new il.E9(e.x,e.y,e.x1,e.y1);return t.defined=e.defined,t});for(let n=0;n<t.length;n++)r[n]=nm(e[n],t[n],i)}else{r=t.map(e=>{let t=new il.E9(e.x,e.y,e.x1,e.y1);return t.defined=e.defined,t});for(let n=0;n<e.length;n++)r[n]=nm(e[n],t[n],i)}return r}function ny(e,t){if((0,ri.Z)(e)){let i;for(let r=0;r<e.length&&void 0===i;r++)i=e[r][t];return i}return e[t]}class nv{constructor(e=nv.TimeOut){this.durations=[],this.timeout=e,this.lastDate=0,this.durationsListThreshold=30}call(e){return this.lastDate=Date.now(),setTimeout(()=>{this.appendDuration(Date.now()-this.lastDate),e(0)},this.timeout,!0)}clear(e){clearTimeout(e)}appendDuration(e){this.durations.push(e),this.durations.length>this.durationsListThreshold&&this.durations.shift(),this.timeout=Math.min(Math.max(this.durations.reduce((e,t)=>e+t,0)/this.durations.length,1e3/60),1e3/30)}}nv.TimeOut=1e3/60;let n_=new nv,nC=(e,t)=>(0,r6.Z)(e)&&"%"===e[e.length-1]?t*(Number.parseFloat(e.substring(0,e.length-1))/100):e,nx=(e,t)=>{let i=nC(e,t);return isNaN(i)?i:Math.max(t,i)};var nw=i(4654);class nS{bounds(e,t){if((0,nw.Z)(e)){let i=e/2;t.x1=-i,t.x2=i,t.y1=-i,t.y2=i}else t.x1=-e[0]/2,t.x2=e[0]/2,t.y1=-e[1]/2,t.y2=e[1]/2}parseSize(e){return(0,nw.Z)(e)?e:Math.min(e[0],e[1])}}function nA(e,t,i,r,n){return n?e.arc(i,r,t,0,t0.BZ,!1,n):e.arc(i,r,t,0,t0.BZ),!1}let nk=new class extends nS{constructor(){super(...arguments),this.type="circle",this.pathStr="M0.5,0A0.5,0.5,0,1,1,-0.5,0A0.5,0.5,0,1,1,0.5,0"}draw(e,t,i,r,n){return nA(e,this.parseSize(t)/2,i,r,n)}drawOffset(e,t,i,r,n,l){return nA(e,this.parseSize(t)/2+n,i,r,l)}drawToSvgPath(e,t,i,r){let n=this.parseSize(e)/2;return`M ${t-n}, ${i} a ${n},${n} 0 1,0 ${2*n},0 a ${n},${n} 0 1,0 -${2*n},0`}},nM=new class extends nS{constructor(){super(...arguments),this.type="cross",this.pathStr="M-0.5,-0.2L-0.5,0.2L-0.2,0.2L-0.2,0.5L0.2,0.5L0.2,0.2L0.5,0.2L0.5,-0.2L0.2,-0.2L0.2,-0.5L-0.2,-0.5L-0.2,-0.2Z"}draw(e,t,i,r,n){var l;return l=this.parseSize(t)/6,e.moveTo(-3*l+i,-l+r,n),e.lineTo(-l+i,-l+r,n),e.lineTo(-l+i,-3*l+r,n),e.lineTo(l+i,-3*l+r,n),e.lineTo(l+i,-l+r,n),e.lineTo(3*l+i,-l+r,n),e.lineTo(3*l+i,l+r,n),e.lineTo(l+i,l+r,n),e.lineTo(l+i,3*l+r,n),e.lineTo(-l+i,3*l+r,n),e.lineTo(-l+i,l+r,n),e.lineTo(-3*l+i,l+r,n),e.closePath(),!0}drawOffset(e,t,i,r,n,l){var o;return o=this.parseSize(t)/6,e.moveTo(-3*o+i-n,-o+r-n,l),e.lineTo(-o+i-n,-o+r-n,l),e.lineTo(-o+i-n,-3*o+r-n,l),e.lineTo(o+i+n,-3*o+r-n,l),e.lineTo(o+i+n,-o+r-n,l),e.lineTo(3*o+i+n,-o+r-n,l),e.lineTo(3*o+i+n,o+r+n,l),e.lineTo(o+i+n,o+r+n,l),e.lineTo(o+i+n,3*o+r+n,l),e.lineTo(-o+i-n,3*o+r+n,l),e.lineTo(-o+i-n,o+r+n,l),e.lineTo(-3*o+i-n,o+r+n,l),e.closePath(),!0}};function nT(e,t,i,r,n){return e.moveTo(i,r-t,n),e.lineTo(t+i,r,n),e.lineTo(i,r+t,n),e.lineTo(i-t,r,n),e.closePath(),!0}let nR=new class extends nS{constructor(){super(...arguments),this.type="diamond",this.pathStr="M-0.5,0L0,-0.5L0.5,0L0,0.5Z"}draw(e,t,i,r,n){return nT(e,this.parseSize(t)/2,i,r,n)}drawFitDir(e,t,i,r,n){return nT(e,this.parseSize(t)/2,i,r,n)}drawOffset(e,t,i,r,n,l){return nT(e,this.parseSize(t)/2+n,i,r,l)}};function nE(e,t,i,r){let n=2*t;return e.rect(i-t,r-t,n,n),!1}let nP=new class extends nS{constructor(){super(...arguments),this.type="square",this.pathStr="M-0.5,-0.5h1v1h-1Z"}draw(e,t,i,r){return nE(e,this.parseSize(t)/2,i,r)}drawOffset(e,t,i,r,n){return nE(e,this.parseSize(t)/2+n,i,r)}};function nB(e,t,i,r,n=0){return e.moveTo(i+t+2*n,t+r+n),e.lineTo(i-t-2*n,t+r+n),e.lineTo(i,r-t-2*n),e.closePath(),!0}class nI extends nS{constructor(){super(...arguments),this.type="triangleUp",this.pathStr="M0.5,0.5 L-0.5,0.5 L0,-0.5 Z"}draw(e,t,i,r){return nB(e,this.parseSize(t)/2,i,r)}drawOffset(e,t,i,r,n){return nB(e,this.parseSize(t)/2,i,r,n)}}let nL=new nI,nF=new class extends nI{constructor(){super(...arguments),this.type="triangle"}},nH=Math.sin(Math.PI/10)/Math.sin(7*Math.PI/10),nO=Math.sin(t0.BZ/10)*nH,nD=-Math.cos(t0.BZ/10)*nH;function nz(e,t,i,r){let n=nO*t,l=nD*t;e.moveTo(i,-t+r),e.lineTo(n+i,l+r);for(let o=1;o<5;++o){let a=t0.BZ*o/5,s=Math.cos(a),h=Math.sin(a);e.lineTo(h*t+i,-s*t+r),e.lineTo(s*n-h*l+i,h*n+s*l+r)}return e.closePath(),!0}let nW=new class extends nS{constructor(){super(...arguments),this.type="star",this.pathStr="M0 -1L0.22451398828979266 -0.3090169943749474L0.9510565162951535 -0.30901699437494745L0.3632712640026804 0.1180339887498948L0.5877852522924732 0.8090169943749473L8.326672684688674e-17 0.3819660112501051L-0.587785252292473 0.8090169943749476L-0.3632712640026804 0.11803398874989487L-0.9510565162951536 -0.30901699437494723L-0.22451398828979274 -0.30901699437494734Z"}draw(e,t,i,r){return nz(e,this.parseSize(t)/2,i,r)}drawOffset(e,t,i,r,n){return nz(e,this.parseSize(t)/2+n,i,r)}},nZ=(0,t0._b)(3);function nN(e,t,i,r){let n=t/nZ,l=n/5;return e.moveTo(0+i,-t+r),e.lineTo(n/2+i,r),e.lineTo(l/2+i,r),e.lineTo(l/2+i,t+r),e.lineTo(-l/2+i,t+r),e.lineTo(-l/2+i,r),e.lineTo(-n/2+i,r),e.closePath(),!0}let n$=new class extends nS{constructor(){super(...arguments),this.type="arrow",this.pathStr="M-0.07142857142857142,0.5L0.07142857142857142,0.5L0.07142857142857142,-0.0625L0.2,-0.0625L0,-0.5L-0.2,-0.0625L-0.07142857142857142,-0.0625Z"}draw(e,t,i,r){return nN(e,this.parseSize(t)/2,i,r)}drawOffset(e,t,i,r,n){return nN(e,this.parseSize(t)/2+n,i,r)}};function nj(e,t,i,r){let n=2*t;return e.moveTo(i,-t+r),e.lineTo(n/3/2+i,t+r),e.lineTo(-n/3/2+i,t+r),e.closePath(),!0}let nG=new class extends nS{constructor(){super(...arguments),this.type="wedge",this.pathStr="M0,-0.5773502691896257L-0.125,0.28867513459481287L0.125,0.28867513459481287Z"}draw(e,t,i,r){return nj(e,this.parseSize(t)/2,i,r)}drawOffset(e,t,i,r,n){return nj(e,this.parseSize(t)/2+n,i,r)}};function nV(e,t,i,r){return e.moveTo(-t+i,r),e.lineTo(i,t+r),!1}let nU=new class extends nS{constructor(){super(...arguments),this.type="stroke",this.pathStr=""}draw(e,t,i,r){return nV(e,this.parseSize(t)/2,i,r)}drawOffset(e,t,i,r,n){return nV(e,this.parseSize(t)/2+n,i,r)}},nK=(0,t0._b)(3)/2,nX=1/(0,t0._b)(12);function nY(e,t,i,r){let n=t/2,l=t*nX,o=t*nX+t,a=-n;return e.moveTo(n+i,l+r),e.lineTo(n+i,o+r),e.lineTo(a+i,o+r),e.lineTo(-.5*n-nK*l+i,nK*n+-.5*l+r),e.lineTo(-.5*n-nK*o+i,nK*n+-.5*o+r),e.lineTo(-.5*a-nK*o+i,nK*a+-.5*o+r),e.lineTo(-.5*n+nK*l+i,-.5*l-nK*n+r),e.lineTo(-.5*n+nK*o+i,-.5*o-nK*n+r),e.lineTo(-.5*a+nK*o+i,-.5*o-nK*a+r),e.closePath(),!1}let nq=new class extends nS{constructor(){super(...arguments),this.type="wye",this.pathStr="M0.25 0.14433756729740646L0.25 0.6443375672974064L-0.25 0.6443375672974064L-0.25 0.14433756729740643L-0.6830127018922193 -0.10566243270259357L-0.4330127018922193 -0.5386751345948129L0 -0.28867513459481287L0.4330127018922193 -0.5386751345948129L0.6830127018922193 -0.10566243270259357Z"}draw(e,t,i,r){return nY(e,this.parseSize(t)/2,i,r)}drawOffset(e,t,i,r,n){return nY(e,this.parseSize(t)/2+n,i,r)}};function nJ(e,t,i,r,n){return e.moveTo(-t+i-2*n,r),e.lineTo(t+i+n,t+r+2*n),e.lineTo(t+i+n,r-t-2*n),e.closePath(),!0}let nQ=new class extends nS{constructor(){super(...arguments),this.type="triangleLeft",this.pathStr="M-0.5,0 L0.5,0.5 L0.5,-0.5 Z"}draw(e,t,i,r){return nJ(e,this.parseSize(t)/2,i,r,0)}drawOffset(e,t,i,r,n){return nJ(e,this.parseSize(t)/2,i,r,n)}};function n0(e,t,i,r,n=0){return e.moveTo(i-t-n,t+r+2*n),e.lineTo(t+i+2*n,r),e.lineTo(i-t-n,r-t-2*n),e.closePath(),!0}let n1=new class extends nS{constructor(){super(...arguments),this.type="triangleRight",this.pathStr="M-0.5,0.5 L0.5,0 L-0.5,-0.5 Z"}draw(e,t,i,r){return n0(e,this.parseSize(t)/2,i,r)}drawOffset(e,t,i,r,n){return n0(e,this.parseSize(t)/2,i,r,n)}};function n2(e,t,i,r,n=0){return e.moveTo(i-t-2*n,r-t-n),e.lineTo(i+t+2*n,r-t-n),e.lineTo(i,r+t+2*n),e.closePath(),!0}let n3=new class extends nS{constructor(){super(...arguments),this.type="triangleDown",this.pathStr="M-0.5,-0.5 L0.5,-0.5 L0,0.5 Z"}draw(e,t,i,r){return n2(e,this.parseSize(t)/2,i,r)}drawOffset(e,t,i,r,n){return n2(e,this.parseSize(t)/2,i,r,n)}},n4=(0,t0._b)(3);function n5(e,t,i,r){let n=t*n4;return e.moveTo(i,r+-n/3*2),e.lineTo(t+i,r+n),e.lineTo(i-t,r+n),e.closePath(),!0}let n6=new class extends nS{constructor(){super(...arguments),this.type="thinTriangle",this.pathStr="M0,-0.5773502691896257L-0.5,0.28867513459481287L0.5,0.28867513459481287Z"}draw(e,t,i,r){return n5(e,this.parseSize(t)/2/n4,i,r)}drawOffset(e,t,i,r,n){return n5(e,this.parseSize(t)/2/n4+n,i,r)}};function n8(e,t,i,r){let n=2*t;return e.moveTo(t+i,r-n),e.lineTo(i-t,r),e.lineTo(t+i,n+r),!0}let n7=new class extends nS{constructor(){super(...arguments),this.type="arrow2Left",this.pathStr="M 0.25 -0.5 L -0.25 0 l 0.25 0.5"}draw(e,t,i,r){return n8(e,this.parseSize(t)/4,i,r)}drawOffset(e,t,i,r,n){return n8(e,this.parseSize(t)/4+n,i,r)}};function n9(e,t,i,r){let n=2*t;return e.moveTo(i-t,r-n),e.lineTo(i+t,r),e.lineTo(i-t,n+r),!0}let le=new class extends nS{constructor(){super(...arguments),this.type="arrow2Right",this.pathStr="M -0.25 -0.5 l 0.25 0 l -0.25 0.5"}draw(e,t,i,r){return n9(e,this.parseSize(t)/4,i,r)}drawOffset(e,t,i,r,n){return n9(e,this.parseSize(t)/4+n,i,r)}};function lt(e,t,i,r){let n=2*t;return e.moveTo(i-n,r+t),e.lineTo(i,r-t),e.lineTo(i+n,r+t),!0}let li=new class extends nS{constructor(){super(...arguments),this.type="arrow2Up",this.pathStr="M -0.5 0.25 L 0 -0.25 l 0.5 0.25"}draw(e,t,i,r){return lt(e,this.parseSize(t)/4,i,r)}drawOffset(e,t,i,r,n){return lt(e,this.parseSize(t)/4+n,i,r)}};function lr(e,t,i,r){let n=2*t;return e.moveTo(i-n,r-t),e.lineTo(i,r+t),e.lineTo(i+n,r-t),!0}let ln=new class extends nS{constructor(){super(...arguments),this.type="arrow2Down",this.pathStr="M -0.5 -0.25 L 0 0.25 l 0.5 -0.25"}draw(e,t,i,r){return lr(e,this.parseSize(t)/4,i,r)}drawOffset(e,t,i,r,n){return lr(e,this.parseSize(t)/4+n,i,r)}};function ll(e,t,i,r,n){return e.moveTo(i,r-t),e.lineTo(i,r+t),!0}let lo=new class extends nS{constructor(){super(...arguments),this.type="lineV",this.pathStr="M0,-0.5L0,0.5"}draw(e,t,i,r,n){return ll(e,this.parseSize(t)/2,i,r,n)}drawOffset(e,t,i,r,n,l){return ll(e,this.parseSize(t)/2+n,i,r,l)}drawToSvgPath(e,t,i,r){let n=this.parseSize(e)/2;return`M ${t}, ${i-n} L ${t},${i+n}`}};function la(e,t,i,r,n){return e.moveTo(i-t,r),e.lineTo(i+t,r),!0}let ls=new class extends nS{constructor(){super(...arguments),this.type="lineH",this.pathStr="M-0.5,0L0.5,0"}draw(e,t,i,r,n){return la(e,this.parseSize(t)/2,i,r,n)}drawOffset(e,t,i,r,n,l){return la(e,this.parseSize(t)/2+n,i,r,l)}drawToSvgPath(e,t,i,r){let n=this.parseSize(e)/2;return`M ${t-n}, ${i} L ${t+n},${i}`}};function lh(e,t,i,r,n){return e.moveTo(i-t,r-t),e.lineTo(i+t,r+t),e.moveTo(i+t,r-t),e.lineTo(i-t,r+t),!0}let ld=new class extends nS{constructor(){super(...arguments),this.type="close",this.pathStr="M-0.5,-0.5L0.5,0.5,M0.5,-0.5L-0.5,0.5"}draw(e,t,i,r,n){return lh(e,this.parseSize(t)/2,i,r,n)}drawOffset(e,t,i,r,n,l){return lh(e,this.parseSize(t)/2+n,i,r,l)}drawToSvgPath(e,t,i,r){let n=this.parseSize(e)/2;return`M ${t-n}, ${i-n} L ${t+n},${i+n} M ${t+n}, ${i-n} L ${t-n},${i+n}`}};function lu(e,t,i,r){return e.rect(i-t[0]/2,r-t[1]/2,t[0],t[1]),!1}function lc(e,t,i,r){let n=t/2;return e.rect(i-t/2,r-n/2,t,n),!1}let lp=new class extends nS{constructor(){super(...arguments),this.type="rect",this.pathStr="M -0.5,0.25 L 0.5,0.25 L 0.5,-0.25,L -0.5,-0.25 Z"}draw(e,t,i,r){return(0,nw.Z)(t)?lc(e,t,i,r):lu(e,t,i,r)}drawWithClipRange(e,t,i,r,n,l,o){(0,nw.Z)(t)&&(t=[t,t/2]);let a=2*(t[0]+t[1])*n,s=[{x:i+t[0]/2,y:r-t[1]/2},{x:i+t[0]/2,y:r+t[1]/2},{x:i-t[0]/2,y:r+t[1]/2},{x:i-t[0]/2,y:r-t[1]/2}],h=0,d=s[3];e.moveTo(d.x,d.y);for(let t=0;t<s.length;t++){let i=s[t],r=Math.sqrt((i.x-d.x)*(i.x-d.x)+(i.y-d.y)*(i.y-d.y));if(h+r>a){let t=(i.x-d.x)*(a-h)/r,n=(i.y-d.y)*(a-h)/r;e.lineTo(d.x+t,d.y+n);break}e.lineTo(i.x,i.y),d=i,h+=r}return!1}drawOffset(e,t,i,r,n){return(0,nw.Z)(t)?lc(e,t+2*n,i,r):lu(e,[t[0]+2*n,t[1]+2*n],i,r)}},lg={};[nk,nM,nR,nP,n6,nF,nW,n$,nG,nU,nq,nQ,n1,nL,n3,n7,le,li,ln,lp,lo,ls,ld].forEach(e=>{lg[e.type]=e});let lf={arrowLeft:"M 0.25 -0.5 L -0.25 0 l 0.5 0.5",arrowRight:"M -0.25 -0.5 l 0.5 0.5 l -0.5 0.5",rectRound:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",roundLine:"M 1.2392 -0.258 L -1.3432 -0.258 C -1.4784 -0.258 -1.588 -0.1436 -1.588 -0.002 c 0 0.1416 0.1096 0.256 0.2448 0.256 l 2.5824 0 c 0.1352 0 0.2448 -0.1144 0.2448 -0.256 C 1.484 -0.1436 1.3744 -0.258 1.2392 -0.258 z"},lm=new t4.FB;class lb{constructor(e,t,i=!1){this.pathStr="",this.type=e,(0,ri.Z)(t)?this.svgCache=t:this.path=t,this.isSvg=i}drawOffset(e,t,i,r,n,l,o){return t=this.parseSize(t),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(n=>{e.beginPath(),ir(n.path.commandList,e,i,r,t,t),o&&o(n.path,n.attribute)}),!1):(ir(this.path.commandList,e,i,r,t+n,t+n),!1)}draw(e,t,i,r,n,l){return t=this.parseSize(t),this.drawOffset(e,t,i,r,0,n,l)}parseSize(e){return(0,nw.Z)(e)?e:Math.min(e[0],e[1])}drawWithClipRange(e,t,i,r,n,l,o){return t=this.parseSize(t),this.isSvg?!!this.svgCache&&(this.svgCache.forEach(l=>{l.path.drawWithClipRange(e,t,i,r,n),o&&o(l.path,l.attribute)}),!1):(this.path.drawWithClipRange(e,t,i,r,n),!1)}bounds(e,t){if(e=this.parseSize(e),this.isSvg){if(!this.svgCache)return;return t.clear(),void this.svgCache.forEach(({path:i})=>{lm.x1=i.bounds.x1*e,lm.y1=i.bounds.y1*e,lm.x2=i.bounds.x2*e,lm.y2=i.bounds.y2*e,t.union(lm)})}this.path.bounds&&(t.x1=this.path.bounds.x1*e,t.y1=this.path.bounds.y1*e,t.x2=this.path.bounds.x2*e,t.y2=this.path.bounds.y2*e)}}class ly{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}function lv(e,t,i,r){let n=e.indexOf(t,i);if(-1===n)throw Error(r);return n+t.length-1}function l_(e,t,i,r=">"){let n=function(e,t,i=">"){let r,n="";for(let l=t;l<e.length;l++){let t=e[l];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else if(t===i[0]){if(!i[1]||e[l+1]===i[1])return{data:n,index:l}}else"	"===t&&(t=" ");n+=t}}(e,t+1,r);if(!n)return;let l=n.data,o=n.index,a=l.search(/\s/),s=l,h=!0;-1!==a&&(s=l.substr(0,a).replace(/\s\s*$/,""),l=l.substr(a+1));let d=s;if(i){let e=s.indexOf(":");-1!==e&&(h=(s=s.substr(e+1))!==n.data.substr(e+1))}return{tagName:s,tagExp:l,closeIndex:o,attrExpPresent:h,rawTagName:d}}let lC=RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");class lx{constructor(e){this.currentNode=null,this.options=e,this.tagsNodeStack=[],this.docTypeEntities={}}addChild(e,t,i){let r=t.tagname;"string"==typeof r&&(t.tagname=r),e.addChild(t)}buildAttributesMap(e,t,i){let r={};if(!e)return;let n=function(e,t){let i=[],r=t.exec(e);for(;r;){let n=[];n.startIndex=t.lastIndex-r[0].length;let l=r.length;for(let e=0;e<l;e++)n.push(r[e]);i.push(n),r=t.exec(e)}return i}(e,lC),l=n.length;for(let e=0;e<l;e++){let t=n[e][1],i=n[e][4];t&&(r[t]=void 0===i||(isNaN(i)?i:Number(i)))}return r}parseXml(e){e=e.replace(/\r\n?/g,"\n");let t=new ly("!xml"),i=t,r="",n="";for(let l=0;l<e.length;l++)if("<"===e[l])if("/"===e[l+1]){let t=lv(e,">",l,"Closing Tag is not closed."),o=n.lastIndexOf(".");n=n.substring(0,o),(i=this.tagsNodeStack.pop())&&i.child&&r&&i.child[i.child.length-1][":@"]&&(i.child[i.child.length-1][":@"].text=r),r="",l=t}else if("?"===e[l+1])l=l_(e,l,!1,"?>").closeIndex+1;else if("!--"===e.substr(l+1,3))l=lv(e,"--\x3e",l+4,"Comment is not closed.");else{let o=l_(e,l,!1),a=o.tagName,s=o.tagExp,h=o.attrExpPresent,d=o.closeIndex;if(a!==t.tagname&&(n+=n?"."+a:a),s.length>0&&s.lastIndexOf("/")===s.length-1){"/"===a[a.length-1]?(a=a.substr(0,a.length-1),n=n.substr(0,n.length-1),s=a):s=s.substr(0,s.length-1);let e=new ly(a);a!==s&&h&&(e[":@"]=this.buildAttributesMap(s,n,a)),this.addChild(i,e,n),n=n.substr(0,n.lastIndexOf("."))}else{let e=new ly(a);this.tagsNodeStack.push(i),a!==s&&h&&(e[":@"]=this.buildAttributesMap(s,n,a)),this.addChild(i,e,n),i=e}r="",l=d}else r+=e[l];return t.child}}class lw{constructor(e){this.options=Object.assign({},lw.defaultOptions,e)}valid(e){return e.startsWith("<")}parse(e){var t,i;return!!this.valid&&(t=new lx(this.options).parseXml(e),this.options,function e(t,i){let r={};for(let n=0;n<t.length;n++){let l=t[n],o=function(e){let t=Object.keys(e);for(let e=0;e<t.length;e++){let i=t[e];if(":@"!==i)return i}}(l),a="";if(a=void 0===i?o:i+"."+o,void 0!==o&&l[o]){let t=e(l[o],a);Object.keys(t).length,l[":@"]&&function(e,t,i){if(t){let i=Object.keys(t),r=i.length;for(let n=0;n<r;n++){let r=i[n];e[r]=t[r]}}}(t,l[":@"],0),void 0!==r[o]&&r.hasOwnProperty(o)?(Array.isArray(r[o])||(r[o]=[r[o]]),r[o].push(t)):r[o]=t}}return r}(t))}}function lS(e,t,i,r=0){var n,l;return e.expand(t+(r/2+(i?(n=i,l=t,n?l:0):0))),e}lw.defaultOptions={};let lA=0;function lk(){return lA++}(sh=sx||(sx={}))[sh.HORIZONTAL=0]="HORIZONTAL",sh[sh.VERTICAL=1]="VERTICAL";let lM=new Map;["","","","","","","","","",""].forEach(e=>lM.set(e,!0));let lT=new Map;[""].forEach(e=>lT.set(e,!0));let lR=lk(),lE=lk(),lP=lk(),lB=lk(),lI=lk(),lL=lk(),lF=lk(),lH=lk(),lO=lk(),lD=lk();lk();let lz=lk();lk();let lW=lk();lk();let lZ=lk(),lN=lk(),l$=Symbol.for("GraphicService"),lj=Symbol.for("GraphicCreator"),lG={"stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-width":"lineWidth","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity",stroke:"stroke",fill:"fill"},lV=Object.keys(lG),lU={duration:200,easing:"cubicOut"};function lK(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lX(e,t,i){let r,n,l,o,a,s,h,d,u,c,p,g,f=i[0],m=i[1],b=i[2];return t===e?(e[12]=t[0]*f+t[4]*m+t[8]*b+t[12],e[13]=t[1]*f+t[5]*m+t[9]*b+t[13],e[14]=t[2]*f+t[6]*m+t[10]*b+t[14],e[15]=t[3]*f+t[7]*m+t[11]*b+t[15]):(r=t[0],n=t[1],l=t[2],o=t[3],a=t[4],s=t[5],h=t[6],d=t[7],u=t[8],c=t[9],p=t[10],g=t[11],e[0]=r,e[1]=n,e[2]=l,e[3]=o,e[4]=a,e[5]=s,e[6]=h,e[7]=d,e[8]=u,e[9]=c,e[10]=p,e[11]=g,e[12]=r*f+a*m+u*b+t[12],e[13]=n*f+s*m+c*b+t[13],e[14]=l*f+h*m+p*b+t[14],e[15]=o*f+d*m+g*b+t[15]),e}function lY(e,t){e[0]=t.a,e[1]=t.b,e[2]=0,e[3]=0,e[4]=t.c,e[5]=t.d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t.e,e[13]=t.f,e[14]=0,e[15]=1}function lq(e,t,i){let r=t[0],n=t[1],l=t[2],o=t[3],a=t[4],s=t[5],h=t[6],d=t[7],u=t[8],c=t[9],p=t[10],g=t[11],f=t[12],m=t[13],b=t[14],y=t[15],v=i[0],_=i[1],C=i[2],x=i[3];return e[0]=v*r+_*a+C*u+x*f,e[1]=v*n+_*s+C*c+x*m,e[2]=v*l+_*h+C*p+x*b,e[3]=v*o+_*d+C*g+x*y,v=i[4],_=i[5],C=i[6],x=i[7],e[4]=v*r+_*a+C*u+x*f,e[5]=v*n+_*s+C*c+x*m,e[6]=v*l+_*h+C*p+x*b,e[7]=v*o+_*d+C*g+x*y,v=i[8],_=i[9],C=i[10],x=i[11],e[8]=v*r+_*a+C*u+x*f,e[9]=v*n+_*s+C*c+x*m,e[10]=v*l+_*h+C*p+x*b,e[11]=v*o+_*d+C*g+x*y,v=i[12],_=i[13],C=i[14],x=i[15],e[12]=v*r+_*a+C*u+x*f,e[13]=v*n+_*s+C*c+x*m,e[14]=v*l+_*h+C*p+x*b,e[15]=v*o+_*d+C*g+x*y,e}function lJ(e,t,i){let r=t[0],n=t[1],l=t[2],o=i[3]*r+i[7]*n+i[11]*l+i[15];return o=o||1,e[0]=(i[0]*r+i[4]*n+i[8]*l+i[12])/o,e[1]=(i[1]*r+i[5]*n+i[9]*l+i[13])/o,e[2]=(i[2]*r+i[6]*n+i[10]*l+i[14])/o,e}function lQ(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Symbol.for("MatrixAllocate"),Symbol.for("Mat4Allocate");class l0{constructor(){this.pools=[]}static identity(e){return lK(e)}allocate(){if(!this.pools.length)return lQ();let e=this.pools.pop();return l0.identity(e),e}allocateByObj(e){let t;t=this.pools.length?this.pools.pop():lQ();for(let i=0;i<t.length;i++)t[i]=e[i];return t}free(e){e&&this.pools.push(e)}get length(){return this.pools.length}release(...e){this.pools=[]}}let l1=new class{constructor(){this.pools=[]}allocate(e,t,i,r,n,l){if(!this.pools.length)return new tQ.y(e,t,i,r,n,l);let o=this.pools.pop();return o.a=e,o.b=t,o.c=i,o.d=r,o.e=n,o.f=l,o}allocateByObj(e){if(!this.pools.length)return new tQ.y(e.a,e.b,e.c,e.d,e.e,e.f);let t=this.pools.pop();return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.e=e.e,t.f=e.f,t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(...e){this.pools=[]}},l2=new l0,l3=new tQ.y(1,0,0,1,0,0),l4={x:0,y:0},l5=class{get nativeContext(){return this.path}constructor(e,t){this.matrix=new tQ.y(1,0,0,1,0,0),this.stack=[],this.dpr=t,this.applyedMatrix=new tQ.y(1,0,0,1,0,0),this.path=new iZ,this._clearMatrix=new tQ.y(1,0,0,1,0,0)}getCanvas(){throw Error("getCanvas")}getContext(){throw Error("getContext")}setTransformForCurrent(e=!1){!e&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix=this.cloneMatrix(this.matrix))}get currentMatrix(){return this.matrix}cloneMatrix(e){return l1.allocateByObj(e)}clear(){this.save(),this.resetTransform(),this.restore()}reset(){this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new tQ.y(1,0,0,1,0,0),this.stack.length=0}restore(){this.stack.length>0&&(l1.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent())}highPerformanceRestore(){this.stack.length>0&&(l1.free(this.matrix),this.matrix=this.stack.pop())}rotate(e,t=!0){this.matrix.rotate(e),t&&this.setTransformForCurrent()}save(){let e=this.cloneMatrix(this.matrix);this.stack.push(e)}highPerformanceSave(){let e=this.cloneMatrix(this.matrix);this.stack.push(e)}scale(e,t,i=!0){this.matrix.scale(e,t),i&&this.setTransformForCurrent()}setScale(e,t,i=!0){this.matrix.setScale(e,t),i&&this.setTransformForCurrent()}scalePoint(e,t,i,r,n=!0){this.translate(i,r,!1),this.scale(e,t,!1),this.translate(-i,-r,!1),n&&this.setTransformForCurrent()}setTransform(e,t,i,r,n,l,o=!0,a=this.dpr){this.matrix.setValue(a*e,a*t,a*i,a*r,a*n,a*l),o&&this.setTransformForCurrent()}setTransformFromMatrix(e,t=!0,i=this.dpr){this.matrix.setValue(e.a*i,e.b*i,e.c*i,e.d*i,e.e*i,e.f*i),t&&this.setTransformForCurrent()}resetTransform(e=!0,t=this.dpr){this.setTransform(t,0,0,t,0,0),e&&this.setTransformForCurrent()}transform(e,t,i,r,n,l,o=!0){this.matrix.multiply(e,t,i,r,n,l),o&&this.setTransformForCurrent()}transformFromMatrix(e,t){this.matrix.multiply(e.a,e.b,e.c,e.d,e.e,e.f),t&&this.setTransformForCurrent()}translate(e,t,i=!0){this.matrix.translate(e,t),i&&this.setTransformForCurrent()}rotateDegrees(e,t=!0){let i=e*Math.PI/180;this.rotate(i,t)}rotateAbout(e,t,i,r=!0){this.translate(t,i,!1),this.rotate(e,!1),this.translate(-t,-i,!1),r&&this.setTransformForCurrent()}rotateDegreesAbout(e,t,i,r=!0){this.translate(t,i,!1),this.rotateDegrees(e,!1),this.translate(-t,-i,!1),r&&this.setTransformForCurrent()}beginPath(){this.path.clear()}clip(e,t){}arc(e,t,i,r,n,l){this.path.arc(e,t,i,r,n,l)}arcTo(e,t,i,r,n){this.path.arcTo(e,t,i,r,n)}bezierCurveTo(e,t,i,r,n,l){this.path.bezierCurveTo(e,t,i,r,n,l)}closePath(){this.path.closePath()}ellipse(e,t,i,r,n,l,o,a){}lineTo(e,t){this.path.lineTo(e,t)}moveTo(e,t){this.path.moveTo(e,t)}quadraticCurveTo(e,t,i,r){this.path.quadraticCurveTo(e,t,i,r)}rect(e,t,i,r){this.path.rect(e,t,i,r)}createImageData(e,t){return null}createLinearGradient(e,t,i,r){throw Error("createLinearGradient")}createPattern(e,t){throw Error("createPattern")}createRadialGradient(e,t,i,r,n,l){throw Error("createRadialGradient")}createConicGradient(e,t,i,r){return null}fill(e,t){}fillRect(e,t,i,r){this.path.rect(e,t,i,r)}clearRect(e,t,i,r){}fillText(e,t,i){}getImageData(e,t,i,r){return null}getLineDash(){return[]}isPointInPath(e,t){return this.matrix.transformPoint({x:e,y:t},l4),rW(this.path.commandList,0,!1,l4.x,l4.y)}isPointInStroke(e,t){var i;if(!this.lineWidth)return!1;this.matrix.transformPoint({x:e,y:t},l4);let r=rl(this,this.lineWidth,this.dpr);return i=this.path.commandList,rW(i,r,!0,l4.x,l4.y)}measureText(e){throw Error("measureText")}putImageData(e,t,i){throw Error("measureText")}setLineDash(e){}stroke(e){}strokeRect(e,t,i,r){this.path.rect(e,t,i,r)}strokeText(e,t,i){}drawImage(){}setCommonStyle(e,t,i,r,n){}_setCommonStyle(e,t,i,r){}setStrokeStyle(e,t,i,r,n){}_setStrokeStyle(e,t,i,r){}setTextStyleWithoutAlignBaseline(e,t){}setTextStyle(e,t){}draw(){}clearMatrix(e=!0,t=this.dpr){this.setTransformFromMatrix(l3,e,t)}setClearMatrix(e,t,i,r,n,l){this._clearMatrix.setValue(e,t,i,r,n,l)}onlyTranslate(e=this.dpr){return this.matrix.a===e&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===e}release(...e){this.stack.forEach(e=>l1.free(e)),this.stack.length=0}};l5=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Number])],l5);let l6=new t4.FB,l8=new tQ.y;new t4.FB;let l7=["lineWidth","scaleX","scaleY","angle","anchor","visible"],l9=["x","y"],oe=["scaleX","scaleY"],ot=["angle"],oi=new il.E9,or={strokeSeg:1,boundsPadding:2,pickMode:1,boundsMode:1,customPickShape:1,pickable:1,childrenPickable:1,visible:1,zIndex:1,layout:1,keepDirIn3d:1,globalZIndex:1,outerBorder:1,innerBorder:1,lineDash:1,lineCap:1,lineJoin:1,miterLimit:2,strokeBoundsBuffer:2,scaleCenter:1,anchor:1,anchor3d:1,postMatrix:1,backgroundMode:2,background:1,texture:1,cursor:1,html:1};class on extends nn{static mixin(e){let t=Object.keys(e);for(let i=0;i<t.length;++i){let r=t[i];Object.defineProperty(on.prototype,r,Object.getOwnPropertyDescriptor(e,r))}}get AABBBounds(){return this.tryUpdateAABBBounds()}get OBBBounds(){return this.tryUpdateOBBBounds()}get globalAABBBounds(){return this.tryUpdateGlobalAABBBounds()}get transMatrix(){return this.tryUpdateLocalTransMatrix(!0)}get globalTransMatrix(){return this.tryUpdateGlobalTransMatrix(!0)}constructor(e={}){var t;super(),this._AABBBounds=new t4.FB,this._updateTag=sg.INIT,this.attribute=e,this.valid=this.isValid(),this.updateAABBBoundsStamp=0,e.background?this.loadImage(null!=(t=e.background.background)?t:e.background,!0):e.shadowGraphic&&this.setShadowGraphic(e.shadowGraphic)}getGraphicService(){var e,t;return null!=(t=null==(e=this.stage)?void 0:e.graphicService)?t:tU.graphicService}getAttributes(){return this.attribute}setMode(e){"3d"===e?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}getOffsetXY(e,t=!1){var i,r;let{dx:n=e.dx,dy:l=e.dy}=this.attribute;if(t&&this.parent){let e=this.parent.attribute;oi.x=n+(null!=(i=e.scrollX)?i:0),oi.y=l+(null!=(r=e.scrollY)?r:0)}else oi.x=n,oi.y=l;return oi}onAnimateBind(e){this._emitCustomEvent("animate-bind",e)}tryUpdateAABBBounds(){let e="imprecise"===this.attribute.boundsMode;if(!this.shouldUpdateAABBBounds())return this._AABBBounds;if(!this.valid)return this._AABBBounds.clear(),this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let t=this.doUpdateAABBBounds(e);return this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,!0),"empty"===this.attribute.boundsMode&&t.clear(),t}tryUpdateOBBBounds(){return(this._OBBBounds||(this._OBBBounds=new t4.a5),this.tryUpdateAABBBounds(),this.updateOBBBoundsStamp===this.updateAABBBoundsStamp)?this._OBBBounds:(this.updateOBBBoundsStamp=this.updateAABBBoundsStamp,this.valid)?this.doUpdateOBBBounds():(this._OBBBounds.clear(),this._OBBBounds)}combindShadowAABBBounds(e){if(this.shadowRoot){let t=this.shadowRoot.AABBBounds.clone();e.union(t)}}doUpdateOBBBounds(){return this._OBBBounds}getClipPath(){let{clipConfig:e}=this.attribute;if(!e)return null;this.clipPathMap||(this.clipPathMap=new Map);let{shape:t}=e,i=this.clipPathMap.get(t)||null;return i||(this.clipPathMap.size>10&&this.clipPathMap.clear(),(i=this.parsePath(t))&&this.clipPathMap.set(t,i)),i}parsePath(e){var t;if(!e)return null;let i=lg[e];if(i||(i=on.userSymbolMap[e]))return i;if(!0===((t=e=lf[e]||e).startsWith("<svg")||t.startsWith("<?xml"))){let{svg:t}=(new lw).parse(e);if(!t)return null;let i=(0,ri.Z)(t.path)?t.path:[t.path];l6.clear();let r=[];i.forEach(e=>{let t=(new iZ).fromString(e.d),i={};lV.forEach(t=>{e[t]&&(i[lG[t]]=e[t])}),r.push({path:t,attribute:i}),l6.union(t.bounds)});let n=l6.width(),l=l6.height(),o=1/(0,t0.Fp)(n,l);r.forEach(e=>e.path.transform(0,0,o,o));let a=new lb(e,r,!0);return on.userSymbolMap[e]=a,a}let r=(new iZ).fromString(e),n=r.bounds.width(),l=r.bounds.height(),o=1/(0,t0.Fp)(n,l);r.transform(0,0,o,o);let a=new lb(e,r);return on.userSymbolMap[e]=a,a}doUpdateAABBBounds(e){this.updateAABBBoundsStamp++;let t=this.getGraphicTheme();this._AABBBounds.clear();let i=this.attribute,r=this.updateAABBBounds(i,t,this._AABBBounds,e),{boundsPadding:n=t.boundsPadding}=i,l=nc(n);return l&&r.expand(l),this.clearUpdateBoundTag(),r}updatePathProxyAABBBounds(e){let t="function"==typeof this.pathProxy?this.pathProxy(this.attribute):this.pathProxy;if(!t)return!1;let i=new t3(e);return ir(t.commandList,i,0,0),!0}tryUpdateGlobalAABBBounds(){let e=this.AABBBounds;return this._globalAABBBounds?this._globalAABBBounds.setValue(e.x1,e.y1,e.x2,e.y2):this._globalAABBBounds=e.clone(),this._globalAABBBounds.empty()||this.parent&&this._globalAABBBounds.transformWithMatrix(this.parent.globalTransMatrix),this._globalAABBBounds}tryUpdateGlobalTransMatrix(e=!0){if(this._globalTransMatrix){if(this.parent){let e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();return this.shouldUpdateGlobalMatrix()&&this.doUpdateGlobalMatrix(),this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!0}tryUpdateLocalTransMatrix(e=!0){return this._transMatrix||(this._transMatrix=new tQ.y),this.shouldUpdateLocalMatrix()&&(this.doUpdateLocalMatrix(),e&&this.clearUpdateLocalPositionTag()),this._transMatrix}shouldUpdateAABBBounds(){return this.shadowRoot?(!!(this._updateTag&sg.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds())&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this):!!(this._updateTag&sg.UPDATE_BOUNDS)&&this.getGraphicService().validCheck(this.attribute,this.getGraphicTheme(),this._AABBBounds,this)}shouldSelfChangeUpdateAABBBounds(){return this.shadowRoot?!!(this._updateTag&sg.UPDATE_BOUNDS)||this.shadowRoot.shouldUpdateAABBBounds():!!(this._updateTag&sg.UPDATE_BOUNDS)}shouldUpdateLocalMatrix(){return!!(this._updateTag&sg.UPDATE_LOCAL_MATRIX)}isValid(){var e,t;let i=this.attribute;return Number.isFinite((null!=(e=i.x)?e:0)+(null!=(t=i.y)?t:0))}_validNumber(e){return null==e||Number.isFinite(e)}shouldUpdateShape(){return!!(this._updateTag&sg.UPDATE_SHAPE)}clearUpdateShapeTag(){this._updateTag&=sg.CLEAR_SHAPE}containsPoint(e,t,i,r){if(!r)return!1;if(i===sf.GLOBAL){let i=new il.E9(e,t);this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),e=i.x,t=i.y}return r.containsPoint(this,{x:e,y:t})}setWidthHeightWithoutTransform(e){this.widthWithoutTransform=e.x2-e.x1,this.heightWithoutTransform=e.y2-e.y1}setAttributesAndPreventAnimate(e,t=!1,i,r){this.setAttributes(e,t,i),this.animates&&this.animates.forEach(t=>{(t.priority!==1/0||r)&&Object.keys(e).forEach(e=>{t.preventAttr(e)})})}setAttributes(e,t=!1,i){e&&((e=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,null,i)||e).background?this.loadImage(e.background,!0):e.shadowGraphic&&this.setShadowGraphic(e.shadowGraphic),this._setAttributes(e,t,i))}_setAttributes(e,t=!1,i){let r=Object.keys(e);for(let t=0;t<r.length;t++){let i=r[t];this.attribute[i]=e[i]}this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(t||this.needUpdateTags(r))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)}setAttribute(e,t,i,r){var n;let l=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[e]:t},this.attribute,e,r);l?this._setAttributes(l,i,r):(0,r5.Z)(null==(n=this.normalAttrs)?void 0:n[e])?(this.attribute[e]=t,this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(i||this.needUpdateTag(e))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)):this.normalAttrs[e]=t,"background"===e?this.loadImage(t,!0):"shadowGraphic"===e&&this.setShadowGraphic(t)}needUpdateTags(e,t=l7){for(let i=0;i<t.length;i++){let r=t[i];if(-1!==e.indexOf(r))return!0}return!1}needUpdateTag(e,t=l7){for(let i=0;i<t.length;i++)if(e===t[i])return!0;return!1}initAttributes(e){let t={type:sm.INIT};e=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,null,t)||e,this.attribute=e,e.background?this.loadImage(e.background,!0):e.shadowGraphic&&this.setShadowGraphic(e.shadowGraphic),this._updateTag=sg.INIT,this.valid=this.isValid(),this.onAttributeUpdate(t)}translate(e,t){var i,r;if(0===e&&0===t)return this;let n={type:sm.TRANSLATE},l=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:e,y:t},this.attribute,l9,n);l&&(e=l.x,t=l.y,delete l.x,delete l.y,this._setAttributes(l));let o=this.attribute,a=o.postMatrix;return a?tU.transformUtil.fromMatrix(a,a).translate(e,t):(o.x=(null!=(i=o.x)?i:i$.x)+e,o.y=(null!=(r=o.y)?r:i$.y)+t),this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(n),this}translateTo(e,t){let i=this.attribute;if(i.x===e&&i.y===t)return this;let r={type:sm.TRANSLATE_TO},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({x:e,y:t},this.attribute,l9,r);return n?this._setAttributes(n,!1,r):(i.x=e,i.y=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)),this}scale(e,t,i){var r,n;if(1===e&&1===t)return this;let l={type:sm.SCALE},o=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:e,scaleY:t,scaleCenter:i},this.attribute,oe,l);o&&(e=o.scaleX,t=o.scaleY,delete o.scaleX,delete o.scaleY,this._setAttributes(o));let a=this.attribute;if(i){let{postMatrix:r}=this.attribute;r||(a.postMatrix=r=new tQ.y),tU.transformUtil.fromMatrix(r,r).scale(e,t,i)}else a.scaleX=(null!=(r=a.scaleX)?r:i$.scaleX)*e,a.scaleY=(null!=(n=a.scaleY)?n:i$.scaleY)*t;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(l),this}scaleTo(e,t){let i=this.attribute;if(i.scaleX===e&&i.scaleY===t)return this;let r={type:sm.SCALE_TO},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({scaleX:e,scaleY:t},this.attribute,oe,r);return n?this._setAttributes(n,!1,r):(i.scaleX=e,i.scaleY=t,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r)),this}rotate(e,t){var i;if(0===e)return this;let r={type:sm.ROTATE},n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({angle:e,rotateCenter:t},this.attribute,ot,r);n&&(delete n.angle,this._setAttributes(n,!1,r));let l=this.attribute;if(t){let{postMatrix:i}=this.attribute;i||(l.postMatrix=i=new tQ.y),tU.transformUtil.fromMatrix(i,i).rotate(e,t)}else l.angle=(null!=(i=l.angle)?i:i$.angle)+e;return this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(r),this}rotateTo(e){let t=this.attribute;if(t.angle===e)return this;let i={type:sm.ROTATE_TO},r=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,ot,i);return r?this._setAttributes(r,!1,i):(t.angle=e,this.addUpdatePositionTag(),this.addUpdateBoundTag(),this.addUpdateLayoutTag(),this.onAttributeUpdate(i)),this}skewTo(e,t){return this}onAttributeUpdate(e){e&&e.skipUpdateCallback||(this.getGraphicService().onAttributeUpdate(this),this._emitCustomEvent("afterAttributeUpdate",e))}update(e){e?(e.bounds&&this.tryUpdateAABBBounds(),e.trans&&this.tryUpdateLocalTransMatrix()):(this.tryUpdateAABBBounds(),this.tryUpdateLocalTransMatrix())}hasState(e){return!(!this.currentStates||!this.currentStates.length)&&(!!(0,r5.Z)(e)||this.currentStates.includes(e))}getState(e){var t;return null==(t=this.states)?void 0:t[e]}applyStateAttrs(e,t,i,r){var n,l;if(i){let t,i=Object.keys(e),o=this.getNoWorkAnimateAttr(),a={};i.forEach(i=>{o[i]?(t||(t={}),t[i]=e[i]):a[i]=r&&void 0===e[i]?this.getDefaultAttribute(i):e[i]});let s=null!=(l=null!=(n=this.context&&this.context.stateAnimateConfig)?n:this.stateAnimateConfig)?l:lU;this.applyAnimationState(["state"],[{name:"state",animation:{type:"state",to:a,duration:s.duration,easing:s.easing}}]),t&&this.setAttributesAndPreventAnimate(t,!1,{type:sm.STATE}),this.finalAttribute&&Object.assign(this.finalAttribute,e)}else this.stopStateAnimates(),this.setAttributesAndPreventAnimate(e,!1,{type:sm.STATE}),this.finalAttribute&&Object.assign(this.finalAttribute,e);this._emitCustomEvent("afterStateUpdate",{type:sm.STATE})}updateNormalAttrs(e){let t={};this.normalAttrs?(Object.keys(e).forEach(e=>{e in this.normalAttrs?(t[e]=this.normalAttrs[e],delete this.normalAttrs[e]):t[e]=this.getNormalAttribute(e)}),Object.keys(this.normalAttrs).forEach(t=>{e[t]=this.normalAttrs[t]})):Object.keys(e).forEach(e=>{t[e]=this.getNormalAttribute(e)}),this.normalAttrs=t}stopStateAnimates(e="end"){this.animates&&this.animates.forEach(t=>{t.stateNames&&(t.stop(e),this.animates.delete(t.id))})}getNormalAttribute(e){var t,i;let r=this.attribute[e];return this.animates&&this.animates.size?null==(t=this.finalAttribute)?void 0:t[e]:null!=r?r:null==(i=this.finalAttribute)?void 0:i[e]}clearStates(e){this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,e,!0)):this.currentStates=[],this.normalAttrs=null}removeState(e,t){if(this.currentStates){let i=(0,ri.Z)(e)?t=>!e.includes(t):t=>t!==e,r=this.currentStates.filter(i);r.length!==this.currentStates.length&&this.useStates(r,t)}}toggleState(e,t){if(this.hasState(e))this.removeState(e,t);else if((this.currentStates?this.currentStates.indexOf(e):-1)<0){let i=this.currentStates?this.currentStates.slice():[];i.push(e),this.useStates(i,t)}}addState(e,t,i){var r;if(this.currentStates&&this.currentStates.includes(e)&&(t||1===this.currentStates.length))return;let n=t&&(null==(r=this.currentStates)?void 0:r.length)?this.currentStates.concat([e]):[e];this.useStates(n,i)}useStates(e,t){var i;if(!e.length)return void this.clearStates(t);if(!((null==(i=this.currentStates)?void 0:i.length)!==e.length||e.some((e,t)=>this.currentStates[t]!==e)))return;this.stateSort&&(e=e.sort(this.stateSort));let r={};e.forEach(t=>{var i;let n=this.stateProxy?this.stateProxy(t,e):null==(i=this.states)?void 0:i[t];n&&Object.assign(r,n)}),this.updateNormalAttrs(r),this.currentStates=e,this.applyStateAttrs(r,e,t)}addUpdateBoundTag(){this._updateTag|=sg.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}addUpdateShapeTag(){this._updateTag|=sg.UPDATE_SHAPE}addUpdateShapeAndBoundsTag(){this._updateTag|=sg.UPDATE_SHAPE_AND_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag(),this.glyphHost&&this.glyphHost.addUpdateBoundTag()}updateShapeAndBoundsTagSetted(){return(this._updateTag&sg.UPDATE_SHAPE_AND_BOUNDS)===sg.UPDATE_SHAPE_AND_BOUNDS}clearUpdateBoundTag(){this._updateTag&=sg.CLEAR_BOUNDS}addUpdatePositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=sg.UPDATE_GLOBAL_LOCAL_MATRIX}addUpdateGlobalPositionTag(){this.shadowRoot&&this.shadowRoot.addUpdateGlobalPositionTag(),this._updateTag|=sg.UPDATE_GLOBAL_MATRIX}clearUpdateLocalPositionTag(){this._updateTag&=sg.CLEAR_LOCAL_MATRIX}clearUpdateGlobalPositionTag(){this._updateTag&=sg.CLEAR_GLOBAL_MATRIX}addUpdateLayoutTag(){this._updateTag|=sg.UPDATE_LAYOUT}clearUpdateLayoutTag(){this._updateTag&=sg.CLEAR_LAYOUT}needUpdateLayout(){return!!(this._updateTag&sg.UPDATE_LAYOUT)}getAnchor(e,t,i){let r=[0,0],n=()=>{if(t.b)return t.b;let e=this.clone();return e.attribute.angle=0,e.attribute.scaleCenter=null,i&&(e.attribute.scaleX=1,e.attribute.scaleY=1),t.b=e.AABBBounds,t.b};if("string"==typeof e[0]){let t=parseFloat(e[0])/100,i=n();r[0]=i.x1+(i.x2-i.x1)*t}else r[0]=e[0];if("string"==typeof e[1]){let t=parseFloat(e[1])/100,i=n();r[1]=i.y1+(i.y2-i.y1)*t}else r[1]=e[1];return r}doUpdateLocalMatrix(){let{x:e=i$.x,y:t=i$.y,scaleX:i=i$.scaleX,scaleY:r=i$.scaleY,angle:n=i$.angle,scaleCenter:l,anchor:o,postMatrix:a}=this.attribute,s=[0,0],h={};if(o&&n&&(s=this.getAnchor(o,h)),l&&(1!==i||1!==r)){let o=this._transMatrix;o.reset(),o.translate(s[0],s[1]),o.rotate(n),o.translate(-s[0],-s[1]),o.translate(e,t),s=this.getAnchor(l,h,!0),tU.transformUtil.fromMatrix(o,o).scale(i,r,{x:s[0],y:s[1]})}else(0,tQ.X)(this._transMatrix,this._transMatrix.reset(),e,t,i,r,n,o&&s);let d=this.getOffsetXY(i$);if(this._transMatrix.e+=d.x,this._transMatrix.f+=d.y,a){let e=l8.setValue(a.a,a.b,a.c,a.d,a.e,a.f),t=this._transMatrix;e.multiply(t.a,t.b,t.c,t.d,t.e,t.f),t.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}doUpdateGlobalMatrix(){if(this.parent){this._globalTransMatrix.multiply(this.transMatrix.a,this.transMatrix.b,this.transMatrix.c,this.transMatrix.d,this.transMatrix.e,this.transMatrix.f);let{scrollX:e=0,scrollY:t=0}=this.parent.attribute;this._globalTransMatrix.translate(e,t)}}setStage(e,t){if(this.stage!==e){if(this.stage=e,this.layer=t,this.setStageToShadowRoot(e,t),this.animates&&this.animates.size){let t=e.getTimeline();this.animates.forEach(e=>{e.timeline.isGlobal&&(e.setTimeline(t),t.addAnimate(e))})}this._onSetStage&&this._onSetStage(this,e,t),this.getGraphicService().onSetStage(this,e)}}setStageToShadowRoot(e,t){this.shadowRoot&&this.shadowRoot.setStage(e,t)}onAddStep(e){}onStop(e){e&&this.setAttributes(e,!1,{type:sm.ANIMATE_END})}getDefaultAttribute(e){return this.getGraphicTheme()[e]}getComputedAttribute(e){var t;return null!=(t=this.attribute[e])?t:this.getDefaultAttribute(e)}onSetStage(e,t=!1){this._onSetStage=e,t&&this.stage&&e(this,this.stage)}attachShadow(e){return e&&(e.shadowHost=this),this.shadowRoot=null!=e?e:tU.graphicService.creator.shadowRoot(this),this.addUpdateBoundTag(),this.shadowRoot.setStage(this.stage,this.layer),this.shadowRoot}detachShadow(){this.shadowRoot&&(this.addUpdateBoundTag(),this.shadowRoot.release(!0),this.shadowRoot=null)}toJson(){return{attribute:this.attribute,_uid:this._uid,type:this.type,name:this.name,children:this.children.map(e=>e.toJson())}}createPathProxy(e){return(0,r6.Z)(e,!0)?this.pathProxy=(new iZ).fromString(e):this.pathProxy=new iZ,this.pathProxy}loadImage(e,t=!1){var i;if(!e||t&&!(!(i=e).fill&&!i.stroke))return;this.resources||(this.resources=new Map);let r={data:"init",state:null};this.resources.set(e,r),"string"==typeof e?(r.state="loading",e.startsWith("<svg")?(na.GetSvg(e,this),this.backgroundImg=this.backgroundImg||t):((0,r8.Z)(e)||e.includes("/")||(0,r7.Z)(e))&&(na.GetImage(e,this),this.backgroundImg=this.backgroundImg||t)):(0,r9.Z)(e)?(r.state="success",r.data=e,this.backgroundImg=this.backgroundImg||t):r.state="fail"}setShadowGraphic(e){e?this.attachShadow().add(e):this.detachShadow()}imageLoadSuccess(e,t,i){if(!this.resources)return;let r=this.resources.get(e);r&&(r.state="success",r.data=t,i&&i(),this.addUpdateBoundTag(),this.stage&&this.stage.renderNextFrame())}imageLoadFail(e,t){if(!this.resources)return;let i=this.resources.get(e);i&&(i.state="fail",t&&t())}_stopAnimates(e){e&&e.forEach(e=>{e.stop()})}stopAnimates(e=!1){this._stopAnimates(this.animates),this.shadowRoot&&this.shadowRoot.stopAnimates(!0),this.isContainer&&e&&this.forEachChildren(t=>{t.stopAnimates(e)})}release(){this.releaseStatus="released",this.stopAnimates(),tU.graphicService.onRelease(this)}_emitCustomEvent(e,t){var i,r;if(this._events&&e in this._events){let n=new no(e,t);n.bubbles=!1,n.manager=null==(r=null==(i=this.stage)?void 0:i.eventSystem)?void 0:r.manager,this.dispatchEvent(n)}}toCustomPath(){var e,t,i;let r=null==(i=null==(t=(null==(e=this.stage)?void 0:e.renderService)||tU.renderService)?void 0:t.drawContribution)?void 0:i.getRenderContribution(this);if(r){let e=new l5(null,1);return r.drawShape(this,e,0,0,{},{}),e.path}return null}}on.userSymbolMap={},on.mixin({dispatchEvent(e){var t;if(!(e instanceof nl))throw Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=[],e.detailPath&&(e.detailPath=[]),e.target=this,null==(t=null==e?void 0:e.manager)||t.dispatchEvent(e),!e.defaultPrevented},emit(e,t){return this.dispatchEvent(new no(e,t))}}),(sd=sw||(sw={}))[sd.LESS_GROUP=0]="LESS_GROUP",sd[sd.MORE_GROUP=1]="MORE_GROUP";class ol extends on{constructor(e){super(e),this.type="group",this.parent=null,this.isContainer=!0,this.numberType=lL,this._childUpdateTag=sg.UPDATE_BOUNDS}setMode(e){"3d"===e?this.set3dMode():this.set2dMode()}set3dMode(){this.in3dMode=!0}set2dMode(){this.in3dMode=!1}setTheme(e){return this.theme||(this.theme=new r2),this.theme.setTheme(e,this)}createTheme(){this.theme||(this.theme=new r2)}visibleAll(e){this.setAttribute("visible",e),this.forEachChildren(t=>{t.isContainer&&t.visibleAll?t.visibleAll(e):t.setAttribute("visible",e)})}hideAll(){this.visibleAll(!1)}showAll(){this.visibleAll(!0)}containsPoint(e,t,i){if(i===sf.GLOBAL){let i=new il.E9(e,t);return this.parent&&this.parent.globalTransMatrix.transformPoint(i,i),this.AABBBounds.contains(i.x,i.y)}return this.AABBBounds.contains(e,t)}shouldUpdateAABBBounds(){return!!super.shouldUpdateAABBBounds()||!!(this._childUpdateTag&sg.UPDATE_BOUNDS)}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.getGraphicService().beforeUpdateAABBBounds(this,this.stage,!0,this._AABBBounds);let e=this.shouldSelfChangeUpdateAABBBounds(),t=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),this.getGraphicService().afterUpdateAABBBounds(this,this.stage,this._AABBBounds,this,e),"empty"===this.attribute.boundsMode&&t.clear(),t}doUpdateLocalMatrix(){let{x:e=i$.x,y:t=i$.y,dx:i=i$.dx,dy:r=i$.dy,scaleX:n=i$.scaleX,scaleY:l=i$.scaleY,angle:o=i$.angle,postMatrix:a}=this.attribute;if(0!==e||0!==t||0!==i||0!==r||1!==n||1!==l||0!==o||a)return super.doUpdateLocalMatrix();this._transMatrix.reset()}getGraphicTheme(){return r4(this).group}updateAABBBounds(e,t,i){let r=i;i=i.clone();let{width:n,height:l,path:o,clip:a=t.clip}=e;if(o&&o.length?o.forEach(e=>{i.union(e.AABBBounds)}):null!=n&&null!=l&&i.set(0,0,Math.max(0,n),Math.max(0,l)),!a){this.forEachChildren(e=>{i.union(e.AABBBounds)});let{scrollX:t=0,scrollY:r=0}=e;i.translate(t,r)}return tU.graphicService.updateTempAABBBounds(i),tU.graphicService.transformAABBBounds(e,i,t,!1,this),r.copy(i),r}doUpdateAABBBounds(){this.updateAABBBoundsStamp++;let e=super.doUpdateAABBBounds();return this.parent&&this.parent.addChildUpdateBoundTag(),this._emitCustomEvent("AAABBBoundsChange"),e}clearUpdateBoundTag(){this._updateTag&=sg.CLEAR_BOUNDS,this._childUpdateTag&=sg.CLEAR_BOUNDS}addUpdateBoundTag(){this._updateTag|=sg.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag()}addChildUpdateBoundTag(){this._childUpdateTag&sg.UPDATE_BOUNDS||(this._childUpdateTag|=sg.UPDATE_BOUNDS,this.parent&&this.parent.addChildUpdateBoundTag())}getTheme(){return this.theme.getTheme(this)}incrementalAppendChild(e){let t=super.appendChild(e);return this.stage&&t&&(t.stage=this.stage,t.layer=this.layer),this.addUpdateBoundTag(),this.getGraphicService().onAddIncremental(e,this,this.stage),t}incrementalClearChild(){super.removeAllChild(),this.addUpdateBoundTag(),this.getGraphicService().onClearIncremental(this,this.stage)}_updateChildToStage(e){return this.stage&&e&&e.setStage(this.stage,this.layer),this.addUpdateBoundTag(),e}appendChild(e,t=!0){let i=super.appendChild(e);return t&&this.stage&&i&&i.setStage(this.stage,this.layer),this.addUpdateBoundTag(),i}insertBefore(e,t){return this._updateChildToStage(super.insertBefore(e,t))}insertAfter(e,t){return this._updateChildToStage(super.insertAfter(e,t))}insertInto(e,t){return this._updateChildToStage(super.insertInto(e,t))}removeChild(e){let t=super.removeChild(e);return this.getGraphicService().onRemove(e),e.stage=null,this.addUpdateBoundTag(),t}removeAllChild(e=!1){this.forEachChildren(t=>{this.getGraphicService().onRemove(t),e&&t.isContainer&&t.removeAllChild(e)}),super.removeAllChild(),this.addUpdateBoundTag()}setStage(e,t){this.stage!==e&&(this.stage=e,this.layer=t,this.setStageToShadowRoot(e,t),this._onSetStage&&this._onSetStage(this,e,t),this.getGraphicService().onSetStage(this,e),this.forEachChildren(t=>{t.setStage(e,this.layer)}))}addUpdatePositionTag(){super.addUpdatePositionTag(),this.forEachChildren(e=>{e.isContainer&&e.addUpdateGlobalPositionTag()})}addUpdateGlobalPositionTag(){super.addUpdateGlobalPositionTag(),this.forEachChildren(e=>{e.isContainer&&e.addUpdateGlobalPositionTag()})}tryUpdateGlobalTransMatrix(e=!0){if(this.shouldUpdateGlobalMatrix()){if(this._globalTransMatrix){if(this.parent){let e=this.parent.globalTransMatrix;this._globalTransMatrix.setValue(e.a,e.b,e.c,e.d,e.e,e.f)}}else this._globalTransMatrix=this.parent?this.parent.globalTransMatrix.clone():this.transMatrix.clone();this.doUpdateGlobalMatrix(),e&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}shouldUpdateGlobalMatrix(){return!!(this._updateTag&sg.UPDATE_GLOBAL_MATRIX)}_getChildByName(e,t){return this.find(t=>t.name===e,t)}createOrUpdateChild(e,t,i){let r=this._getChildByName(e);return r?r.setAttributes(t):((r=tU.graphicService.creator[i](t)).name=e,this.add(r)),r}clone(){return new ol(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return ol.NOWORK_ANIMATE_ATTR}release(e){e&&this.forEachChildren(t=>{t.release(e)}),super.release()}}function oo(e){return new ol(e)}ol.NOWORK_ANIMATE_ATTR=or;class oa extends ol{get offscreen(){return this.layerHandler.offscreen}get layerMode(){return this.layerHandler.type}get width(){return this.stage?this.stage.width:0}get height(){return this.stage?this.stage.height:0}get viewWidth(){return this.stage?this.stage.viewWidth:0}get viewHeight(){return this.stage?this.stage.viewHeight:0}get dirtyBound(){throw Error("")}get dpr(){return this._dpr}constructor(e,t,i,r){var n;super({}),this.stage=e,this.global=t,this.window=i,this.main=r.main,this.layerHandler=r.layerHandler,this.layerHandler.init(this,i,{main:r.main,canvasId:r.canvasId,width:this.viewWidth,height:this.viewHeight,zIndex:null!=(n=r.zIndex)?n:0}),this.layer=this,this.subLayers=new Map,this.theme=new r2,this.background="rgba(0, 0, 0, 0)",this.afterDrawCbs=[]}combineSubLayer(e=!0){let t=Array.from(this.subLayers.values()).sort((e,t)=>e.zIndex-t.zIndex);this.layerHandler.merge(t.map(t=>(t.layer.subLayers.size&&t.layer.combineSubLayer(e),t.layer.getNativeHandler()))),e&&t.forEach(e=>{e.group&&(e.group.incremental=0)}),t.forEach(e=>{tU.layerService.releaseLayer(this.stage,e.layer)}),this.subLayers.clear()}getNativeHandler(){return this.layerHandler}setStage(e,t){super.setStage(e,this)}pick(e,t){throw Error("")}tryRenderSecondaryLayer(e,t){this.layerHandler.secondaryHandlers&&this.layerHandler.secondaryHandlers.length&&this.layerHandler.secondaryHandlers.forEach(i=>{i.layer.renderCount=this.renderCount,i.layer.render(e,t)})}render(e,t){var i;this.layerHandler.render([this],{renderService:e.renderService,stage:this.stage,layer:this,viewBox:e.viewBox,transMatrix:e.transMatrix,background:null!=(i=e.background)?i:this.background,updateBounds:e.updateBounds},t),this.afterDrawCbs.forEach(e=>e(this)),this.tryRenderSecondaryLayer(e,t)}resize(e,t){this.layerHandler.resize(e,t)}resizeView(e,t){this.layerHandler.resizeView(e,t)}setDpr(e){this.layerHandler.setDpr(e)}afterDraw(e){this.afterDrawCbs.push(e)}startAnimate(e){throw Error("")}setToFrame(e){throw Error("")}prepare(e,t){}release(){super.release(),this.layerHandler.release(),this.subLayers&&this.subLayers.forEach(e=>{tU.layerService.releaseLayer(this.stage,e.layer)})}drawTo(e,t){var i;this.layerHandler.drawTo(e,[this],Object.assign({background:null!=(i=t.background)?i:this.background,renderService:t.renderService,viewBox:t.viewBox,transMatrix:t.transMatrix,stage:this.stage,layer:this},t)),this.afterDrawCbs.forEach(e=>e(this))}}let os=Symbol.for("TransformUtil"),oh=Symbol.for("GraphicUtil"),od=Symbol.for("LayerService"),ou=Symbol.for("StaticLayerHandlerContribution"),oc=Symbol.for("DynamicLayerHandlerContribution"),op=Symbol.for("VirtualLayerHandlerContribution"),og=sS=class{static GenerateLayerId(){return`${sS.idprefix}_${sS.prefix_count++}`}constructor(){this.layerMap=new Map,this.global=tU.global}tryInit(){this.inited||(this.staticLayerCountInEnv=this.global.getStaticCanvasCount(),this.dynamicLayerCountInEnv=this.global.getDynamicCanvasCount(),this.inited=!0)}getStageLayer(e){return this.layerMap.get(e)}getRecommendedLayerType(e){return e||(0!==this.staticLayerCountInEnv?"static":0!==this.dynamicLayerCountInEnv?"dynamic":"virtual")}getLayerHandler(e){return"static"===e?tG.get(ou):"dynamic"===e?tG.get(oc):tG.get(op)}createLayer(e,t={main:!1}){var i;this.tryInit();let r=this.getRecommendedLayerType(t.layerMode);r=t.main||t.canvasId?"static":r;let n=this.getLayerHandler(r),l=new oa(e,this.global,e.window,Object.assign(Object.assign({main:!1},t),{layerMode:r,canvasId:null!=(i=t.canvasId)?i:sS.GenerateLayerId(),layerHandler:n})),o=this.layerMap.get(e)||[];return o.push(l),this.layerMap.set(e,o),this.staticLayerCountInEnv--,l}prepareStageLayer(e){let t;e.forEachChildren(e=>{let i=e.getNativeHandler();"virtual"===i.type?(i.mainHandler=t,t.secondaryHandlers.push(i)):(t=i).secondaryHandlers=[]})}releaseLayer(e,t){t.release();let i=this.layerMap.get(e)||[];this.layerMap.set(e,i.filter(e=>e!==t))}layerCount(e){return(this.layerMap.get(e)||[]).length}restLayerCount(e){return 10*("browser"===this.global.env)}releaseStage(e){this.layerMap.delete(e)}};og.idprefix="visactor_layer",og.prefix_count=0,og=sS=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],og);let of=new tb(e=>{e(tO).to(tJ).inSingletonScope(),e(r$).to(rG),e(oh).to(rX).inSingletonScope(),e(os).to(rq).inSingletonScope(),e(od).to(og).inSingletonScope()}),om=Symbol.for("IncrementalDrawContribution"),ob=Symbol.for("ArcRender");Symbol.for("Arc3dRender");let oy=Symbol.for("AreaRender"),ov=Symbol.for("CircleRender"),o_=Symbol.for("GraphicRender"),oC=Symbol.for("GroupRender"),ox=Symbol.for("LineRender"),ow=Symbol.for("PathRender"),oS=Symbol.for("PolygonRender"),oA=Symbol.for("RectRender");Symbol.for("Rect3DRender");let ok=Symbol.for("SymbolRender"),oM=Symbol.for("TextRender"),oT=Symbol.for("RichTextRender");Symbol.for("Pyramid3dRender");let oR=Symbol.for("GlyphRender"),oE=Symbol.for("ImageRender");Symbol.for("RenderSelector");let oP=Symbol.for("DrawContribution");Symbol.for("StarRender");let oB=class{constructor(e){this.drawContribution=e}prepare(e){e&&this.renderTreeRoots.forEach(t=>{this._prepare(t,e)})}_prepare(e,t){e.forEachChildren(e=>{this._prepare(e,t)}),e.update({bounds:t,trans:!0})}prepareRenderList(){}beforeDraw(e){}draw(e){this.drawContribution.draw(this,Object.assign({},this.drawParams))}afterDraw(e){this.drawContribution.afterDraw&&this.drawContribution.afterDraw(this,Object.assign({},this.drawParams))}reInit(){this.drawContribution.reInit()}render(e,t){this.renderTreeRoots=e,this.drawParams=t;let i=t.updateBounds;this.prepare(i),this.prepareRenderList(),this.beforeDraw(t),this.draw(t),this.afterDraw(t),this.drawParams=null}};oB=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(sA=tT(oP),function(e,t){sA(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],oB);let oI=new tb(e=>{e(tV).to(oB)});Symbol.for("GraphicPicker");let oL=Symbol.for("PickerService");Symbol.for("BoundsPicker");let oF=Symbol.for("GlobalPickerService"),oH=Symbol.for("PickItemInterceptor"),oO=Symbol.for("PickServiceInterceptor"),oD=(e,t,i,r)=>{let n,l=!1,o=!1;if(t.forEachChildren(e=>!(l=e.numberType===lE)),t.forEachChildren(e=>!(o=!!e.findFace)),l){let e=t.getChildren(),a=[...e];a.sort((e,t)=>{var i,r,n,l;let o=(null!=(r=null!=(i=e.attribute.startAngle)?i:0+e.attribute.endAngle)?r:0)/2,a=(null!=(l=null!=(n=t.attribute.startAngle)?n:0+t.attribute.endAngle)?l:0)/2;for(;o<0;)o+=t0.f7;for(;a<0;)a+=t0.f7;return a-o}),a.forEach(e=>{e._next=null,e._prev=null}),t.removeAllChild(),t.update(),a.forEach(e=>{t.appendChild(e)}),r.hack_pieFace="outside",(n=i(l,o))&&n.graphic||(r.hack_pieFace="inside",n=i(l,o)),n&&n.graphic||(r.hack_pieFace="top",n=i(l,o)),t.removeAllChild(),e.forEach(e=>{e._next=null,e._prev=null}),e.forEach(e=>{t.appendChild(e)})}else if(o){let r=t.getChildren(),a=r.map(t=>({ave_z:t.findFace().vertices.map(i=>{var r;return e.view(i[0],i[1],null!=(r=i[2]+t.attribute.z)?r:0)[2]}).reduce((e,t)=>e+t,0),g:t}));a.sort((e,t)=>t.ave_z-e.ave_z),t.removeAllChild(),a.forEach(e=>{e.g._next=null,e.g._prev=null}),t.update(),a.forEach(e=>{t.add(e.g)}),n=i(l,o),t.removeAllChild(),r.forEach(e=>{e._next=null,e._prev=null}),t.update(),r.forEach(e=>{t.add(e)})}else n=i(l,o);return n};var oz=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o};let oW=class{constructor(){this.order=1}afterPickItem(e,t,i,r,n){if(e.graphic){let t=e.graphic;for(;t.parent;)t=t.parent;t.shadowHost&&(e.params={shadowTarget:e.graphic},e.graphic=t.shadowHost)}return e}};oW=oz([tS()],oW);let oZ=class{constructor(){this.order=1}afterPickItem(e,t,i,r,n){return e.attribute.shadowRootIdx>0||!e.attribute.shadowRootIdx?this._pickItem(e,t,i,r,n):null}beforePickItem(e,t,i,r,n){return e.attribute.shadowRootIdx<0?this._pickItem(e,t,i,r,n):null}_pickItem(e,t,i,r,n){var l;if(!e.shadowRoot)return null;let{parentMatrix:o}=n||{};if(!o)return null;let a=t.pickContext;a.highPerformanceSave();let s=null==(l=r4(e))?void 0:l[e.type],{shadowPickMode:h=null==s?void 0:s.shadowPickMode}=e.attribute,d=e.shadowRoot,u=l1.allocateByObj(o),c=new il.E9(u.a*i.x+u.c*i.y+u.e,u.b*i.x+u.d*i.y+u.f),p=t.pickGroup(d,c,u,r);return a.highPerformanceRestore(),!p.graphic&&p.group&&"full"===h&&(p.graphic=p.group),p}};oZ=oz([tS()],oZ);let oN=class{constructor(){this.order=1}beforePickItem(e,t,i,r,n){let l=e.baseGraphic;if(l&&l.parent){let e=new il.E9(i.x,i.y),n=t.pickContext;n.highPerformanceSave();let o=l.parent.globalTransMatrix;o.transformPoint(e,e);let a=l.isContainer?t.pickGroup(l,e.clone(),o,r):t.pickItem(l,e.clone(),o,r);return n.highPerformanceRestore(),a}return null}};oN=oz([tS()],oN);let o$=class{constructor(){this.order=1}beforePickItem(e,t,i,r,n){if(!e.in3dMode||r.in3dInterceptor)return null;let l=t.pickContext,o=e.stage;if(!l||!o)return null;if(r.in3dInterceptor=!0,l.save(),this.initCanvasCtx(l),l.camera=o.camera,e.isContainer){let o=oD(l,e,()=>t.pickGroup(e,i,n.parentMatrix,r),r);return l.camera=null,r.in3dInterceptor=!1,l.restore(),o}return l.restore(),null}initCanvasCtx(e){e.setTransformForCurrent()}};o$=oz([tS()],o$);let oj=new tb((e,t,i)=>{i(oL)||(e(oF).toSelf(),e(oL).toService(oF)),e(o$).toSelf().inSingletonScope(),e(oH).toService(o$),e(oZ).toSelf().inSingletonScope(),e(oH).toService(oZ),e(oN).toSelf().inSingletonScope(),e(oH).toService(oN),tB(e,oH),e(oW).toSelf().inSingletonScope(),e(oO).toService(oW),tB(e,oO)});var oG=i(96766),oV=i(64776);function oU(e,t){return"end"===e||"right"===e?-t:"center"===e?-t/2:0}function oK(e,t,i,r=0){return"middle"===e?-t/2:"top"===e?0:"bottom"===e?r-t:e&&"alphabetic"!==e?0:(i||(i=t),-(t-i)/2-.79*i)}function oX(e,t,i){var r;let{x:n=i.x,y:l=i.y,z:o=i.z,dx:a=i.dx,dy:s=i.dy,dz:h=i.dz,scaleX:d=i.scaleX,scaleY:u=i.scaleY,scaleZ:c=i.scaleZ,alpha:p=i.alpha,beta:g=i.beta,angle:f=i.angle,anchor3d:m=t.attribute.anchor,anchor:b}=t.attribute,y=[0,0,0];if(m){if("string"==typeof m[0]){let e=parseFloat(m[0])/100,i=t.AABBBounds;y[0]=i.x1+(i.x2-i.x1)*e}else y[0]=m[0];if("string"==typeof m[1]){let e=parseFloat(m[1])/100,i=t.AABBBounds;y[1]=i.x1+(i.x2-i.x1)*e}else y[1]=m[1];y[2]=null!=(r=m[2])?r:0}if(lK(e),lX(e,e,[n+a,l+s,o+h]),lX(e,e,[y[0],y[1],y[2]]),function(e,t,i){let r=Math.sin(i),n=Math.cos(i),l=t[4],o=t[5],a=t[6],s=t[7],h=t[8],d=t[9],u=t[10],c=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=l*n+h*r,e[5]=o*n+d*r,e[6]=a*n+u*r,e[7]=s*n+c*r,e[8]=h*n-l*r,e[9]=d*n-o*r,e[10]=u*n-a*r,e[11]=c*n-s*r}(e,e,g),function(e,t,i){let r=Math.sin(i),n=Math.cos(i),l=t[0],o=t[1],a=t[2],s=t[3],h=t[8],d=t[9],u=t[10],c=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*n-h*r,e[1]=o*n-d*r,e[2]=a*n-u*r,e[3]=s*n-c*r,e[8]=l*r+h*n,e[9]=o*r+d*n,e[10]=a*r+u*n,e[11]=s*r+c*n}(e,e,p),lX(e,e,[-y[0],-y[1],y[2]]),function(e,t,i){let r=i[0],n=i[1],l=i[2];e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*l,e[9]=t[9]*l,e[10]=t[10]*l,e[11]=t[11]*l,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(e,e,[d,u,c]),f){let i=l2.allocate(),r=[0,0];if(b){if("string"==typeof m[0]){let e=parseFloat(m[0])/100,i=t.AABBBounds;r[0]=i.x1+(i.x2-i.x1)*e}else r[0]=m[0];if("string"==typeof m[1]){let e=parseFloat(m[1])/100,i=t.AABBBounds;r[1]=i.x1+(i.x2-i.x1)*e}else r[1]=m[1]}lX(i,i,[r[0],r[1],0]),function(e,t,i){let r=Math.sin(i),n=Math.cos(i),l=t[0],o=t[1],a=t[2],s=t[3],h=t[4],d=t[5],u=t[6],c=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=l*n+h*r,e[1]=o*n+d*r,e[2]=a*n+u*r,e[3]=s*n+c*r,e[4]=h*n-l*r,e[5]=d*n-o*r,e[6]=u*n-a*r,e[7]=c*n-s*r}(i,i,f),lX(i,i,[-r[0],-r[1],0]),lq(e,e,i)}}let oY=class{constructor(e){this.creator=e,this.hooks={onAttributeUpdate:new tF(["graphic"]),onSetStage:new tF(["graphic","stage"]),onRemove:new tF(["graphic"]),onRelease:new tF(["graphic"]),onAddIncremental:new tF(["graphic","group","stage"]),onClearIncremental:new tF(["graphic","group","stage"]),beforeUpdateAABBBounds:new tF(["graphic","stage","willUpdate","aabbBounds"]),afterUpdateAABBBounds:new tF(["graphic","stage","aabbBounds","globalAABBBounds","selfChange"]),clearAABBBounds:new tF(["graphic","stage","aabbBounds"])},this.tempAABBBounds1=new t4.FB,this.tempAABBBounds2=new t4.FB}onAttributeUpdate(e){this.hooks.onAttributeUpdate.taps.length&&this.hooks.onAttributeUpdate.call(e)}onSetStage(e,t){this.hooks.onSetStage.taps.length&&this.hooks.onSetStage.call(e,t)}onRemove(e){this.hooks.onRemove.taps.length&&this.hooks.onRemove.call(e)}onRelease(e){this.hooks.onRelease.taps.length&&this.hooks.onRelease.call(e)}onAddIncremental(e,t,i){this.hooks.onAddIncremental.taps.length&&this.hooks.onAddIncremental.call(e,t,i)}onClearIncremental(e,t){this.hooks.onClearIncremental.taps.length&&this.hooks.onClearIncremental.call(e,t)}beforeUpdateAABBBounds(e,t,i,r){this.hooks.beforeUpdateAABBBounds.taps.length&&this.hooks.beforeUpdateAABBBounds.call(e,t,i,r)}afterUpdateAABBBounds(e,t,i,r,n){this.hooks.afterUpdateAABBBounds.taps.length&&this.hooks.afterUpdateAABBBounds.call(e,t,i,r,n)}clearAABBBounds(e,t,i){this.hooks.clearAABBBounds.taps.length&&this.hooks.clearAABBBounds.call(e,t,i)}updatePathProxyAABBBounds(e,t){let i="function"==typeof t.pathProxy?t.pathProxy(t.attribute):t.pathProxy;if(!i)return!1;let r=new t3(e);return ir(i.commandList,r,0,0),!0}updateHTMLTextAABBBounds(e,t,i,r){let{textAlign:n,textBaseline:l}=e;if(null!=e.forceBoundsHeight){let t=(0,nw.Z)(e.forceBoundsHeight)?e.forceBoundsHeight:e.forceBoundsHeight(),r=oK(l,t,t);i.set(i.x1,r,i.x2,r+t)}if(null!=e.forceBoundsWidth){let t=(0,nw.Z)(e.forceBoundsWidth)?e.forceBoundsWidth:e.forceBoundsWidth(),r=oU(n,t);i.set(r,i.y1,r+t,i.y2)}}combindShadowAABBBounds(e,t){if(t&&t.shadowRoot){let i=t.shadowRoot.AABBBounds;e.union(i)}}transformAABBBounds(e,t,i,r,n){if(!t.empty()){let{scaleX:n=i.scaleX,scaleY:l=i.scaleY,stroke:o=i.stroke,shadowBlur:a=i.shadowBlur,lineWidth:s=i.lineWidth,pickStrokeBuffer:h=i.pickStrokeBuffer,strokeBoundsBuffer:d=i.strokeBoundsBuffer}=e,u=this.tempAABBBounds1,c=this.tempAABBBounds2;if(o&&s&&(lS(u,(s+h)/Math.abs(n+l),r,d),t.union(u),u.setValue(c.x1,c.y1,c.x2,c.y2)),a){let{shadowOffsetX:r=i.shadowOffsetX,shadowOffsetY:o=i.shadowOffsetY}=e;lS(u,a/Math.abs(n+l)*2,!1,d+1),u.translate(r,o),t.union(u)}}if(this.combindShadowAABBBounds(t,n),t.empty())return;let l=!0,o=n.transMatrix;n&&n.isContainer&&(l=1!==o.a||0!==o.b||0!==o.c||1!==o.d||0!==o.e||0!==o.f),l&&(0,t4.n2)(t,t,o)}validCheck(e,t,i,r){if(!r||null!=e.forceBoundsHeight||null!=e.forceBoundsWidth||r.shadowRoot||r.isContainer)return!0;let{visible:n=t.visible}=e;return!(!r.valid||!n)||(i.empty()||(r.parent&&i.transformWithMatrix(r.parent.globalTransMatrix),this.clearAABBBounds(r,r.stage,i),i.clear()),!1)}updateTempAABBBounds(e){let t=this.tempAABBBounds1,i=this.tempAABBBounds2;return t.setValue(e.x1,e.y1,e.x2,e.y2),i.setValue(e.x1,e.y1,e.x2,e.y2),{tb1:t,tb2:i}}};oY=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(sk=tT(lj),function(e,t){sk(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],oY);let oq=new class{constructor(){this.store=new Map}RegisterGraphicCreator(e,t){this.store.set(e,t),this[e]=t}CreateGraphic(e,t){let i=this.store.get(e);return i?i(t):null}},oJ=new tb(e=>{e(l$).to(oY),e(lj).toConstantValue(oq)}),oQ=Symbol.for("AutoEnablePlugins"),o0=Symbol.for("PluginService");var o1=function(e,t){return function(i,r){t(i,r,e)}};let o2=class{constructor(e){this.autoEnablePlugins=e,this.onStartupFinishedPlugin=[],this.onRegisterPlugin=[],this.actived=!1}active(e,t){this.stage=e,this.actived=!0;let{pluginList:i}=t;i&&tG.isBound(oQ)&&this.autoEnablePlugins.getContributions().forEach(e=>{i.includes(e.name)&&this.register(e)})}findPluginsByName(e){let t=[];return this.onStartupFinishedPlugin.forEach(i=>{i.name===e&&t.push(i)}),this.onRegisterPlugin.forEach(i=>{i.name===e&&t.push(i)}),t}register(e){"onStartupFinished"===e.activeEvent?this.onStartupFinishedPlugin.push(e):"onRegister"===e.activeEvent&&(this.onRegisterPlugin.push(e),e.activate(this))}unRegister(e){"onStartupFinished"===e.activeEvent?this.onStartupFinishedPlugin.splice(this.onStartupFinishedPlugin.indexOf(e),1):"onRegister"===e.activeEvent&&this.onRegisterPlugin.splice(this.onStartupFinishedPlugin.indexOf(e),1),e.deactivate(this)}release(...e){this.onStartupFinishedPlugin.forEach(e=>{e.deactivate(this)}),this.onStartupFinishedPlugin=[],this.onRegisterPlugin.forEach(e=>{e.deactivate(this)}),this.onRegisterPlugin=[]}};o2=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),o1(0,tT(tE)),o1(0,tR(oQ)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],o2);let o3=new tb(e=>{e(o0).to(o2),e(tE).toDynamicValue(({container:e})=>new tP(oQ,e)).whenTargetNamed(oQ)}),o4=new tb(e=>{tB(e,tH)}),o5=new tb(e=>{e(rb).to(ry).inSingletonScope(),tB(e,rb)}),o6=class{constructor(){this.type="static",this.offscreen=!1,this.global=tU.global}setDpr(e){this.canvas.dpr=e}init(e,t,i){if(this.layer=e,this.window=t,i.main)this.main=!0,this.context=t.getContext(),this.canvas=this.context.getCanvas();else{let e;this.main=!1,i.canvasId&&(e=this.global.getElementById(i.canvasId)),e||(e=this.global.createCanvas({width:t.width,height:t.height})),e.style&&(e.style["pointer-events"]="none");let r=t.getContext().getCanvas().nativeCanvas,n=rw({nativeCanvas:e,width:t.width,height:t.height,dpr:t.dpr,id:i.canvasId,canvasControled:!0,container:t.getContainer(),x:r.offsetLeft,y:r.offsetTop});n.applyPosition(),this.canvas=n,this.context=n.getContext()}}resize(e,t){this.canvas.resize(e,t)}resizeView(e,t){}render(e,t,i){var r;if(!this.main){let e=this.window.getContext().getCanvas().nativeCanvas;e&&(this.canvas.x!==e.offsetLeft||this.canvas.y!==e.offsetTop)&&(this.canvas.x=e.offsetLeft,this.canvas.y=e.offsetTop,this.canvas.applyPosition())}t.renderService.render(e,Object.assign(Object.assign({context:this.context,clear:null!=(r=t.background)?r:"#ffffff"},t),i))}merge(e){e.forEach(e=>{let t=e.getContext().canvas.nativeCanvas;this.context.drawImage(t,0,0)})}prepare(e,t){}drawTo(e,t,i){var r;let n=e.getContext();i.renderService.render(t,Object.assign(Object.assign({context:n},i),{clear:i.clear?null!=(r=i.background)?r:"#fff":void 0}))}getContext(){return this.context}release(){this.canvas.release()}};o6=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],o6);let o8=new tb(e=>{e(o6).toSelf(),e(ou).toService(o6)}),o7=tM(t_);function o9(e,t,i){let r={},n=[];return e.forEachChildren(e=>{let{zIndex:i=t}=e.attribute;r[i]?r[i].push(e):(r[i]=[e],n.push(i))},i),n.sort((e,t)=>i?t-e:e-t),{childMap:r,zIdxArray:n}}function ae(e,t,i,r=!1,n=!1){let l=!1;if(n)l=!0;else{let i;e.forEachChildren((e,r)=>{let{zIndex:n=t}=e.attribute;if(0===r)i=n;else if(i!==n)return l=!0,!0;return!1},r)}if(l){let{childMap:l,zIdxArray:o}=o9(e,t,r),a=!1;for(let e=0;e<o.length&&!a;e++){let t=l[o[e]];n&&t.sort((e,t)=>{var i,n;return(r?-1:1)*((null!=(i=t.attribute.z)?i:0)-(null!=(n=e.attribute.z)?n:0))});for(let e=0;e<t.length;e++)if(i(t[e],e)){a=!0;break}}}else e.forEachChildren(i,r)}function at(e,t,i,r=!1){var n,l,o,a;return n=this,l=void 0,o=void 0,a=function*(){yield e.forEachChildrenAsync(i,r)},new(o||(o=Promise))(function(e,t){function i(e){try{s(a.next(e))}catch(e){t(e)}}function r(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):((n=t.value)instanceof o?n:new o(function(e){e(n)})).then(i,r)}s((a=a.apply(n,l||[])).next())})}var ai=i(19273);let ar=Symbol.for("DrawItemInterceptor"),an=new t4.FB,al=new t4.FB;class ao{constructor(){this.order=1}afterDrawItem(e,t,i,r,n){return null==e.attribute.shadowRootIdx&&e.shadowRoot&&e.shadowRoot.attribute.shadowRootIdx<0||(e.attribute.shadowRootIdx>0||!e.attribute.shadowRootIdx||e.shadowRoot&&e.shadowRoot.attribute.shadowRootIdx>0)&&this.drawItem(e,t,i,r,n),!1}beforeDrawItem(e,t,i,r,n){return null==e.attribute.shadowRootIdx&&e.shadowRoot&&e.shadowRoot.attribute.shadowRootIdx>0||(e.attribute.shadowRootIdx<0||e.shadowRoot&&e.shadowRoot.attribute.shadowRootIdx<0)&&this.drawItem(e,t,i,r,n),!1}drawItem(e,t,i,r,n){if(!e.shadowRoot)return!1;let{context:l}=i;if(l.highPerformanceSave(),l.transformFromMatrix(e.transMatrix,!0),r.dirtyBounds&&r.backupDirtyBounds){an.copy(r.dirtyBounds),al.copy(r.backupDirtyBounds);let t=e.globalTransMatrix.getInverse();r.dirtyBounds.copy(r.backupDirtyBounds).transformWithMatrix(t),r.backupDirtyBounds.copy(r.dirtyBounds)}return r.renderGroup(e.shadowRoot,i,l1.allocate(1,0,0,1,0,0)),l.highPerformanceRestore(),r.dirtyBounds&&r.backupDirtyBounds&&(r.dirtyBounds.copy(an),r.backupDirtyBounds.copy(al)),!0}}class aa{constructor(){this.order=1}afterDrawItem(e,t,i,r,n){return e.attribute._debug_bounds&&this.drawItem(e,t,i,r,n),!1}drawItem(e,t,i,r,n){if(!e.attribute._debug_bounds)return!1;let{context:l}=i;l.highPerformanceSave(),e.parent&&l.setTransformFromMatrix(e.parent.globalTransMatrix,!0),e.glyphHost&&e.glyphHost.parent&&l.setTransformFromMatrix(e.glyphHost.parent.globalTransMatrix,!0);let o=e.AABBBounds;return!0!==e.attribute._debug_bounds&&e.attribute._debug_bounds(l,e),l.strokeRect(o.x1,o.y1,o.width(),o.height()),l.highPerformanceRestore(),!0}}let as=class{constructor(){this.order=1,this.interceptors=[new ao,new ad,new ah,new aa]}afterDrawItem(e,t,i,r,n){if((!e.in3dMode||i.in3dInterceptor)&&!e.shadowRoot&&!e.attribute._debug_bounds&&!(e.baseGraphic||e.attribute.globalZIndex||e.interactiveGraphic))return!1;for(let l=0;l<this.interceptors.length;l++)if(this.interceptors[l].afterDrawItem&&this.interceptors[l].afterDrawItem(e,t,i,r,n))return!0;return!1}beforeDrawItem(e,t,i,r,n){if((!e.in3dMode||i.in3dInterceptor)&&!e.shadowRoot&&!e.attribute._debug_bounds&&!(e.baseGraphic||e.attribute.globalZIndex||e.interactiveGraphic))return!1;for(let l=0;l<this.interceptors.length;l++)if(this.interceptors[l].beforeDrawItem&&this.interceptors[l].beforeDrawItem(e,t,i,r,n))return!0;return!1}};as=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],as);class ah{constructor(){this.order=1}beforeDrawItem(e,t,i,r,n){return!this.processing&&(e.baseGraphic?this.beforeDrawInteractive(e,t,i,r,n):this.beforeSetInteractive(e,t,i,r,n))}beforeSetInteractive(e,t,i,r,n){let l=e.interactiveGraphic;if(e.attribute.globalZIndex){l||(l=e.clone(),e.interactiveGraphic=l,l.baseGraphic=e),l.setAttributes({globalZIndex:0,zIndex:e.attribute.globalZIndex},!1,{skipUpdateCallback:!0}),i.stage.tryInitInteractiveLayer();let t=i.stage.getLayer("_builtin_interactive");return t&&this.getShadowRoot(t).add(l),!0}if(l){i.stage.tryInitInteractiveLayer();let t=i.stage.getLayer("_builtin_interactive");t&&this.getShadowRoot(t).removeChild(l),e.interactiveGraphic=null,l.baseGraphic=null}return!1}beforeDrawInteractive(e,t,i,r,n){let l=e.baseGraphic,o=!!l.stage,a=l.parent;for(;o&&a&&a.stage!==a;)o=!!a.stage,a=a.parent;if(!o){let t=i.stage.getLayer("_builtin_interactive");return t&&this.getShadowRoot(t).removeChild(e),!0}if(l){this.processing=!0;let{context:e}=i;return e.highPerformanceSave(),e.setTransformFromMatrix(l.parent.globalTransMatrix,!0),l.isContainer?r.renderGroup(l,i,l.parent.globalTransMatrix):r.renderItem(l,i),e.highPerformanceRestore(),this.processing=!1,!0}return!1}getShadowRoot(e){var t;let i=e.getElementById("_interactive_group");return i||((i=oq.CreateGraphic("group",{})).id="_interactive_group",e.add(i)),null!=(t=i.shadowRoot)?t:i.attachShadow()}}class ad{constructor(){this.order=1}beforeDrawItem(e,t,i,r,n){if(!e.in3dMode||i.in3dInterceptor)return!1;i.in3dInterceptor=!0;let{context:l,stage:o}=t.drawParams;l.canvas,l.save(),this.initCanvasCtx(l),l.camera=o.camera;let a=l.currentMatrix;a.a/=l.dpr,a.b/=l.dpr,a.c/=l.dpr,a.d/=l.dpr,a.e/=l.dpr,a.f/=l.dpr;let s=l2.allocate();lY(s,a);let h=l.modelMatrix;return h?s&&(l.modelMatrix=lq(l2.allocate(),h,s)):l.modelMatrix=s,l.setTransform(1,0,0,1,0,0,!0),e.isContainer?oD(l,e,(t,n)=>r.renderGroup(e,i,e.parent.globalTransMatrix,!t&&n),i):r.renderItem(e,i),l.camera=null,l.restore(),l.modelMatrix!==h&&l2.free(l.modelMatrix),l.modelMatrix=h,i.in3dInterceptor=!1,!0}initCanvasCtx(e){e.setTransformForCurrent()}}Symbol.for("BoundsAllocate");let au=new class{constructor(){this.pools=[];for(let e=0;e<10;e++)this.pools.push(new t4.FB)}allocate(e,t,i,r){if(!this.pools.length)return(new t4.FB).setValue(e,t,i,r);let n=this.pools.pop();return n.x1=e,n.y1=t,n.x2=i,n.y2=r,n}allocateByObj(e){if(!this.pools.length)return new t4.FB(e);let t=this.pools.pop();return t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t}free(e){this.pools.push(e)}get length(){return this.pools.length}release(...e){this.pools=[]}};var ac=function(e,t){return function(i,r){t(i,r,e)}};let ap=class{constructor(e,t){this.contributions=e,this.drawItemInterceptorContributions=t,this._renderInGroup=(e,t,i,r)=>{var n;e?t.forEachChildren(e=>{i.break||(e.isContainer?this.renderGroup(e,i,r):this.renderItem(e,i))}):ae(t,iY.zIndex,e=>{i.break||(e.isContainer?this.renderGroup(e,i,r):this.renderItem(e,i))},!1,!!(null==(n=i.context)?void 0:n.camera))},this.currentRenderMap=new Map,this.defaultRenderMap=new Map,this.styleRenderMap=new Map,this.dirtyBounds=new t4.YZ,this.backupDirtyBounds=new t4.YZ,this.global=tU.global,this.layerService=tU.layerService,(0,ri.Z)(this.contributions)||(this.contributions=[this.contributions]),this.init()}reInit(){this.init(),this.contributions.forEach(e=>{e.reInit()})}init(){this.contributions.forEach(e=>{if(e.style){let t=this.styleRenderMap.get(e.style)||new Map;t.set(e.numberType,e),this.styleRenderMap.set(e.style,t)}else this.defaultRenderMap.set(e.numberType,e)}),this.InterceptorContributions=this.drawItemInterceptorContributions.getContributions().sort((e,t)=>e.order-t.order)}prepareForDraw(e,t){t.updateBounds?this.useDirtyBounds=!0:this.useDirtyBounds=!t.stage.params.optimize.disableCheckGraphicWidthOutRange}draw(e,t){var i;this.prepareForDraw(e,t),t.drawContribution=this,this.currentRenderMap=this.styleRenderMap.get(t.renderStyle)||this.defaultRenderMap,this.currentRenderService=e;let{context:r,stage:n,viewBox:l,transMatrix:o}=t;if(!r)return;let a=this.dirtyBounds.setValue(0,0,l.width(),l.height());if(n.dirtyBounds&&!n.dirtyBounds.empty()){let e=(0,ai.di)(a,n.dirtyBounds,!1);a.x1=Math.floor(e.x1),a.y1=Math.floor(e.y1),a.x2=Math.ceil(e.x2),a.y2=Math.ceil(e.y2)}let s=r.dpr%1;(s||.5!==s)&&(a.x1=Math.floor(a.x1*r.dpr)/r.dpr,a.y1=Math.floor(a.y1*r.dpr)/r.dpr,a.x2=Math.ceil(a.x2*r.dpr)/r.dpr,a.y2=Math.ceil(a.y2*r.dpr)/r.dpr),this.backupDirtyBounds.copy(a),r.reset(!1),r.save(),r.setClearMatrix(o.a,o.b,o.c,o.d,o.e,o.f),r.clearMatrix(!1),r.translate(l.x1,l.y1,!0),r.beginPath(),r.rect(a.x1,a.y1,a.width(),a.height()),r.clip(),n.camera&&(this.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),this.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0)),this.clearScreen(e,r,t),(null==(i=e.drawParams)?void 0:i.stage)&&e.drawParams.stage.hooks.afterClearScreen.call(e.drawParams),e.renderTreeRoots.sort((e,t)=>{var i,r;return(null!=(i=e.attribute.zIndex)?i:iY.zIndex)-(null!=(r=t.attribute.zIndex)?r:iY.zIndex)}).forEach(e=>{e.isContainer?this.renderGroup(e,t,l1.allocate(1,0,0,1,0,0)):this.renderItem(e,t)}),r.restore(),r.draw()}doRegister(){throw Error("")}_findNextGraphic(e){let t=e.parent,i=e._uid;for(;t;){let e=function(e,t,i,r=!1){let n=!1;e.forEachChildren((e,t)=>{let{zIndex:r=i}=e.attribute;if(0===t);else if(void 0!==r)return n=!0,!0;return!1},r);let l=null,o=!1;if(n){let{childMap:n,zIdxArray:a}=o9(e,i,r),s=!1;for(let e=0;e<a.length&&!s;e++){let i=n[a[e]];for(let e=0;e<i.length;e++){if(o){s=!0,l=i[e];break}i[e]._uid!==t||(o=!0)}}}else e.forEachChildren(e=>o?(l=e,!0):(e._uid===t&&(o=!0),!1),r);return l}(t,i,iY.zIndex);if(e)return e;i=t._uid,t=t.parent}return null}renderGroup(e,t,i,r){if(t.break||!1===e.attribute.visibleAll)return;if(e.incremental&&(null==t.startAtId||t.startAtId===e._uid))return t.break=!0,void this._increaseRender(e,t);if(this.useDirtyBounds&&!(0,ai.SX)(e.AABBBounds,this.dirtyBounds,!1)&&"empty"!==e.attribute.boundsMode)return;let n,l=i;if(this.useDirtyBounds){n=au.allocateByObj(this.dirtyBounds);let t=e.transMatrix;l=l1.allocateByObj(i).multiply(t.a,t.b,t.c,t.d,t.e,t.f),this.dirtyBounds.copy(this.backupDirtyBounds).transformWithMatrix(l.getInverse())}t.isGroupScroll=!(!e.attribute.scrollX&&!e.attribute.scrollY),this.renderItem(e,t,{renderInGroupParams:{skipSort:r,nextM:l},renderInGroup:this._renderInGroup}),this.useDirtyBounds&&(this.dirtyBounds.copy(n),au.free(n),l1.free(l))}_increaseRender(e,t){let{layer:i,stage:r}=t,{subLayers:n}=i,l=n.get(e._uid);l||(l={layer:this.layerService.createLayer(r),zIndex:n.size,group:e},n.set(e._uid,l));let o=l.layer.getNativeHandler().getContext(),a=l.drawContribution||tG.get(om);a.dirtyBounds.setValue(-1/0,-1/0,1/0,1/0),a.backupDirtyBounds.setValue(-1/0,-1/0,1/0,1/0),a.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:a,clear:"transparent",layer:l.layer,context:o,startAtId:e._uid,break:!1})),l.drawContribution=a;let s=this._findNextGraphic(e);if(s)if(s.isContainer&&s.incremental)this._increaseRender(s,t);else{let e=n.get(s._uid);e||(e={layer:this.layerService.createLayer(r),zIndex:n.size},n.set(s._uid,e));let i=e.layer.getNativeHandler().getContext();this.draw(this.currentRenderService,Object.assign(Object.assign({},t),{drawContribution:a,clear:"transparent",layer:e.layer,context:i,startAtId:s._uid,break:!1}))}}getRenderContribution(e){let t;return t||(t=this.selectRenderByNumberType(e.numberType,e)),t||(t=this.selectRenderByType(e.type)),t}renderItem(e,t,i){if(this.InterceptorContributions.length)for(let r=0;r<this.InterceptorContributions.length;r++){let n=this.InterceptorContributions[r];if(n.beforeDrawItem&&n.beforeDrawItem(e,this.currentRenderService,t,this,i))return}let r=this.getRenderContribution(e);if(!r)return;let n,l=!1;if(t.isGroupScroll){let{scrollX:t=0,scrollY:i=0}=e.parent.attribute;l=!0,this.scrollMatrix||(this.scrollMatrix=l1.allocate(1,0,0,1,0,0)),this.scrollMatrix.translate(-t,-i)}if(l&&(n=this.dirtyBounds.clone().transformWithMatrix(this.scrollMatrix)),this.useDirtyBounds&&!e.isContainer&&"empty"!==e.attribute.boundsMode&&!(0,ai.SX)(e.AABBBounds,null!=n?n:this.dirtyBounds,!1)){if(l&&e.parent){let{scrollX:t=0,scrollY:i=0}=e.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(t,i)}return}let o=null!=t.startAtId&&e._uid!==t.startAtId;if(e._uid===t.startAtId&&(t.startAtId=null),i&&(i.skipDraw=o),o?e.isContainer&&r.draw(e,this.currentRenderService,t,i):r.draw(e,this.currentRenderService,t,i),l&&e.parent){let{scrollX:t=0,scrollY:i=0}=e.parent.attribute;this.scrollMatrix&&this.scrollMatrix.translate(t,i)}if(this.InterceptorContributions.length)for(let i=0;i<this.InterceptorContributions.length;i++){let r=this.InterceptorContributions[i];if(r.afterDrawItem&&r.afterDrawItem(e,this.currentRenderService,t,this))return}}selectRenderByType(e){return t1.Y.getInstance().warn(""),null}selectRenderByNumberType(e,t){let i;if(t.attribute.renderStyle){let r=this.styleRenderMap.get(t.attribute.renderStyle);i=r&&r.get(e)}return i||this.currentRenderMap.get(e)||this.defaultRenderMap.get(e)}clearScreen(e,t,i){var r,n,l;let{clear:o,viewBox:a}=i,s=a.width(),h=a.height();if(o){t.clearRect(0,0,s,h),(null==(r=e.drawParams)?void 0:r.stage)&&e.drawParams.stage.hooks.afterClearRect.call(e.drawParams);let i=null==(n=e.drawParams)?void 0:n.stage;if(i&&(t.globalAlpha=null!=(l=i.attribute.opacity)?l:1),i&&i.backgroundImg&&i.resources){let e=i.resources.get(o);e&&"success"===e.state&&e.data&&t.drawImage(e.data,0,0,s,h)}else t.fillStyle=ro(t,o,{AABBBounds:{x1:0,y1:0,x2:0+s,y2:0+h}},0,0),t.fillRect(0,0,s,h)}}afterDraw(e,t){}};ap=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),ac(0,o7(o_)),ac(1,tT(tE)),ac(1,tR(ar)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Array,Object])],ap);var ag=i(99051);let af=t0.pi/2;function am(e,t,i,r,n,l,o=!0,a){let s;if(Array.isArray(o)&&(a=o,o=!0),r<0&&(t+=r,r=-r),n<0&&(i+=n,n=-n),(0,nw.Z)(l,!0))s=[l=(0,t0.Wn)(l),l,l,l];else if(Array.isArray(l)){let e,t,i=l;switch(i.length){case 0:s=[0,0,0,0];break;case 1:s=[e=(0,t0.Wn)(i[0]),e,e,e];break;case 2:case 3:s=[e=(0,t0.Wn)(i[0]),t=(0,t0.Wn)(i[1]),e,t];break;default:(s=i)[0]=(0,t0.Wn)(s[0]),s[1]=(0,t0.Wn)(s[1]),s[2]=(0,t0.Wn)(s[2]),s[3]=(0,t0.Wn)(s[3])}}else s=[0,0,0,0];if(r<0||s[0]+s[1]+s[2]+s[3]<1e-12)return e.rect(t,i,r,n);let[h,d,u,c]=[[t,i],[t+r,i],[t+r,i+n],[t,i+n]],p=Math.min(r/2,n/2),g=[Math.min(p,s[0]),Math.min(p,s[1]),Math.min(p,s[2]),Math.min(p,s[3])],f=[h[0]+g[0],h[1]],m=[h[0],h[1]+g[0]],b=[d[0]-g[1],d[1]],y=[d[0],d[1]+g[1]],v=[u[0]-g[2],u[1]],_=[u[0],u[1]-g[2]],C=[c[0]+g[3],c[1]],x=[c[0],c[1]-g[3]];if(e.moveTo(f[0],f[1]),o){if(a&&a[0]?a[0](f[0],f[1],b[0],b[1]):e.lineTo(b[0],b[1]),!(0,ag.h6)(b,y)){a&&a[0]&&e.moveTo(b[0],b[1]);let t=b[0],i=b[1]+g[1];e.arc(t,i,g[1],-af,0,!1)}if(a&&a[1]?a[1](y[0],y[1],_[0],_[1]):e.lineTo(_[0],_[1]),!(0,ag.h6)(v,_)){let t=_[0]-g[2],i=_[1];a&&a[1]&&e.moveTo(_[0],_[1]),e.arc(t,i,g[2],0,af,!1)}if(a&&a[2]?a[2](v[0],v[1],C[0],C[1]):e.lineTo(C[0],C[1]),!(0,ag.h6)(C,x)){let t=C[0],i=C[1]-g[3];a&&a[2]&&e.moveTo(C[0],C[1]),e.arc(t,i,g[3],af,t0.pi,!1)}if(a&&a[3]?a[3](x[0],x[1],m[0],m[1]):e.lineTo(m[0],m[1]),!(0,ag.h6)(f,m)){let t=f[0],i=f[1]+g[0];a&&a[3]&&e.moveTo(m[0],m[1]),e.arc(t,i,g[0],t0.pi,t0.pi+af,!1)}}else a&&a[0]?a[0](f[0],f[1],b[0],b[1]):e.lineTo(b[0],b[1]),a&&a[1]?a[1](b[0],b[1],v[0],v[1]):e.lineTo(v[0],v[1]),a&&a[2]?a[2](v[0],v[1],C[0],C[1]):e.lineTo(C[0],C[1]),a&&a[2]?a[2](C[0],C[1],f[0],f[1]):e.lineTo(f[0],f[1]);return a||e.closePath(),e}function ab(e,t){return((0,ri.Z)(e)?e.some(e=>e||void 0===e):!!e)&&t>0}function ay(e,t,i){return i&&e*t>0}function av(e,t,i,r,n){return n&&e*t>0&&0!==i&&0!==r}function a_(e,t,i,r,n){return n?e*t>0:e*t>0&&0!==i&&0!==r}function aC(e,t,i,r,n,l,o){let a=e-i,s=t-r,h=(o?l:-l)/Math.sqrt(a*a+s*s),d=h*s,u=-h*a,c=e+d,p=t+u,g=i+d,f=r+u,m=(c+g)/2,b=(p+f)/2,y=g-c,v=f-p,_=y*y+v*v,C=n-l,x=c*f-g*p,w=(v<0?-1:1)*Math.sqrt(Math.max(0,C*C*_-x*x)),S=(x*v-y*w)/_,A=(-x*y-v*w)/_,k=(x*v+y*w)/_,M=(-x*y+v*w)/_,T=S-m,R=A-b,E=k-m,P=M-b;return T*T+R*R>E*E+P*P&&(S=k,A=M),{cx:S,cy:A,x01:-d,y01:-u,x11:S*(n/C-1),y11:A*(n/C-1)}}function ax(e,t,i,r,n){let l,o,a,s,h=(0,t0.Wn)(i-t),d=e.getParsedCornerRadius(),u=(0,ri.Z)(d),{outerDeltaAngle:c,innerDeltaAngle:p,outerStartAngle:g,outerEndAngle:f,innerEndAngle:m,innerStartAngle:b}=e.getParsePadAngle(t,i),y=u?d[0]:d,v=u?d[1]:d,_=u?d[2]:d,C=u?d[3]:d,x=Math.max(v,y),w=Math.max(_,C),S=x,A=w,k=n*(0,t0.mC)(g),M=n*(0,t0.O$)(g),T=r*(0,t0.mC)(m),R=r*(0,t0.O$)(m);if((w>t0.Ho||x>t0.Ho)&&(l=n*(0,t0.mC)(f),o=n*(0,t0.O$)(f),a=r*(0,t0.mC)(b),s=r*(0,t0.O$)(b),h<t0.pi)){let e=function(e,t,i,r,n,l,o,a){let s=i-e,h=r-t,d=o-n,u=a-l,c=u*s-d*h;return c*c<t0.Ho?[]:(c=(d*(t-l)-u*(e-n))/c,[e+c*s,t+c*h])}(k,M,a,s,l,o,T,R);if(e){let t=k-e[0],i=M-e[1],a=l-e[0],s=o-e[1],h=1/(0,t0.O$)((0,t0.Kh)((t*a+i*s)/((0,t0._b)(t*t+i*i)*(0,t0._b)(a*a+s*s)))/2),d=(0,t0._b)(e[0]*e[0]+e[1]*e[1]);A=(0,t0.VV)(w,(r-d)/(h-1)),S=(0,t0.VV)(x,(n-d)/(h+1))}}return{outerDeltaAngle:c,xors:k,yors:M,xirs:a,yirs:s,xore:l,yore:o,xire:T,yire:R,limitedOcr:S,limitedIcr:A,outerCornerRadiusStart:y,outerCornerRadiusEnd:v,maxOuterCornerRadius:x,maxInnerCornerRadius:w,outerStartAngle:g,outerEndAngle:f,innerDeltaAngle:p,innerEndAngle:m,innerStartAngle:b,innerCornerRadiusStart:C,innerCornerRadiusEnd:_}}function aw(e,t,i,r,n,l,o){let{startAngle:a,endAngle:s}=e.getParsedAngle(),h=(0,t0.Wn)(s-a),d=s>a,u=!1;if(n<l){let e=n;n=l,l=e}if(n<=t0.Ho)t.moveTo(i,r);else if(h>=t0.f7-t0.Ho)t.moveTo(i+n*(0,t0.mC)(a),r+n*(0,t0.O$)(a)),t.arc(i,r,n,a,s,!d),l>t0.Ho&&(t.moveTo(i+l*(0,t0.mC)(s),r+l*(0,t0.O$)(s)),t.arc(i,r,l,s,a,d));else{let{outerDeltaAngle:h,xors:c,yors:p,xirs:g,yirs:f,limitedOcr:m,outerCornerRadiusStart:b,outerCornerRadiusEnd:y,maxOuterCornerRadius:v,xore:_,yore:C,xire:x,yire:w,outerStartAngle:S,outerEndAngle:A,limitedIcr:k,innerDeltaAngle:M,innerEndAngle:T,innerStartAngle:R,innerCornerRadiusStart:E,innerCornerRadiusEnd:P,maxInnerCornerRadius:B}=ax(e,a,s,l,n);if(h<.001)o&&(o[3]||o[1])&&t.moveTo(i+c,r+p),u=!0;else if(m>t0.Ho){let e=(0,t0.VV)(b,m),l=(0,t0.VV)(y,m),a=aC(g,f,c,p,n,e,Number(d)),s=aC(_,C,x,w,n,l,Number(d));m<v&&e===l?!o||o[0]?(t.moveTo(i+a.cx+a.x01,r+a.cy+a.y01),t.arc(i+a.cx,r+a.cy,m,(0,t0.fv)(a.y01,a.x01),(0,t0.fv)(s.y01,s.x01),!d)):t.moveTo(i+a.cx+m*(0,t0.mC)((0,t0.fv)(s.y01,s.x01)),r+a.cy+m*(0,t0.O$)((0,t0.fv)(s.y01,s.x01))):!o||o[0]?(t.moveTo(i+a.cx+a.x01,r+a.cy+a.y01),e>0&&t.arc(i+a.cx,r+a.cy,e,(0,t0.fv)(a.y01,a.x01),(0,t0.fv)(a.y11,a.x11),!d),t.arc(i,r,n,(0,t0.fv)(a.cy+a.y11,a.cx+a.x11),(0,t0.fv)(s.cy+s.y11,s.cx+s.x11),!d),l>0&&t.arc(i+s.cx,r+s.cy,l,(0,t0.fv)(s.y11,s.x11),(0,t0.fv)(s.y01,s.x01),!d)):l>0?t.moveTo(i+s.cx+l*(0,t0.mC)((0,t0.fv)(s.y01,s.x01)),r+s.cy+l*(0,t0.O$)((0,t0.fv)(s.y01,s.x01))):t.moveTo(i+_,r+n*(0,t0.O$)(A))}else!o||o[0]?(t.moveTo(i+c,r+p),t.arc(i,r,n,S,A,!d)):t.moveTo(i+n*(0,t0.mC)(A),r+n*(0,t0.O$)(A));if(!(l>t0.Ho)||M<.001)!o||o[1]?t.lineTo(i+x,r+w):t.moveTo(i+x,r+w),u=!0;else if(k>t0.Ho){let e=(0,t0.VV)(E,k),n=(0,t0.VV)(P,k),a=aC(x,w,_,C,l,-n,Number(d)),s=aC(c,p,g,f,l,-e,Number(d));if(!o||o[1]?t.lineTo(i+a.cx+a.x01,r+a.cy+a.y01):t.moveTo(i+a.cx+a.x01,r+a.cy+a.y01),k<B&&e===n){let e=(0,t0.fv)(s.y01,s.x01);!o||o[2]?t.arc(i+a.cx,r+a.cy,k,(0,t0.fv)(a.y01,a.x01),e,!d):t.moveTo(i+a.cx+(0,t0.mC)(e),r+a.cy+(0,t0.O$)(e))}else!o||o[2]?(n>0&&t.arc(i+a.cx,r+a.cy,n,(0,t0.fv)(a.y01,a.x01),(0,t0.fv)(a.y11,a.x11),!d),t.arc(i,r,l,(0,t0.fv)(a.cy+a.y11,a.cx+a.x11),(0,t0.fv)(s.cy+s.y11,s.cx+s.x11),d),e>0&&t.arc(i+s.cx,r+s.cy,e,(0,t0.fv)(s.y11,s.x11),(0,t0.fv)(s.y01,s.x01),!d)):e>0?t.moveTo(i+s.cx+e*(0,t0.mC)((0,t0.fv)(s.y01,s.x01)),r+s.cy+e*(0,t0.O$)((0,t0.fv)(s.y01,s.x01))):t.moveTo(i+g,r+f)}else!o||o[1]?t.lineTo(i+x,r+w):t.moveTo(i+x,r+w),!o||o[2]?t.arc(i,r,l,T,R,d):t.moveTo(i+l*(0,t0.mC)(R),r+l*(0,t0.O$)(R))}return o?o[3]&&t.lineTo(i+n*(0,t0.mC)(a),r+n*(0,t0.O$)(a)):t.closePath(),u}let aS=Symbol.for("ArcRenderContribution"),aA=Symbol.for("AreaRenderContribution"),ak=Symbol.for("CircleRenderContribution"),aM=Symbol.for("GroupRenderContribution"),aT=Symbol.for("ImageRenderContribution"),aR=Symbol.for("PathRenderContribution"),aE=Symbol.for("PolygonRenderContribution"),aP=Symbol.for("RectRenderContribution"),aB=Symbol.for("SymbolRenderContribution"),aI=Symbol.for("TextRenderContribution");Symbol.for("StarRenderContribution"),Symbol.for("CommonRenderContribution");let aL=Symbol.for("InteractiveSubRenderContribution");var aF=function(e,t){return function(i,r){t(i,r,e)}};class aH{constructor(){this.time=sv.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){var p;let{background:g,backgroundOpacity:f=null!=(p=e.attribute.fillOpacity)?p:s.backgroundOpacity,opacity:m=s.opacity,backgroundMode:b=s.backgroundMode,backgroundFit:y=s.backgroundFit,backgroundKeepAspectRatio:v=s.backgroundKeepAspectRatio,backgroundScale:_=s.backgroundScale,backgroundOffsetX:C=s.backgroundOffsetX,backgroundOffsetY:x=s.backgroundOffsetY,backgroundClip:w=s.backgroundClip}=e.attribute;if(g)if(e.backgroundImg&&e.resources){let n=e.resources.get(g);if("success"!==n.state||!n.data)return;if(t.save(),e.parent&&!e.transMatrix.onlyTranslate()){let i=r4(e.parent).group,{scrollX:r=i.scrollX,scrollY:n=i.scrollY}=e.parent.attribute;t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.translate(r,n)}w&&t.clip();let l=e.AABBBounds;t.setCommonStyle(e,e.attribute,i,r,s),t.globalAlpha=f*m,this.doDrawImage(t,n.data,l,{backgroundMode:b,backgroundFit:y,backgroundKeepAspectRatio:v,backgroundScale:_,backgroundOffsetX:C,backgroundOffsetY:x}),t.restore(),e.transMatrix.onlyTranslate()||t.setTransformForCurrent()}else t.highPerformanceSave(),t.setCommonStyle(e,e.attribute,i,r,s),t.globalAlpha=f*m,t.fillStyle=g,t.fill(),t.highPerformanceRestore()}doDrawImage(e,t,i,r){let{backgroundMode:n,backgroundFit:l,backgroundKeepAspectRatio:o,backgroundScale:a=1,backgroundOffsetX:s=0,backgroundOffsetY:h=0}=r,d=i.width(),u=i.height(),c=d,p=u;if("no-repeat"===n)if(l)if(o){let r=Math.max(d/t.width,u/t.height);e.drawImage(t,i.x1+s,i.y1+h,t.width*r*a,t.height*r*a)}else e.drawImage(t,i.x1,i.y1,i.width(),i.height());else{let r=t.width*a,n=t.height*a;e.drawImage(t,i.x1+s,i.y1+h,r,n)}else{if(l&&"repeat"!==n&&(t.width||t.height)){let i=t.width,r=t.height;"repeat-x"===n?(c=u/r*i,p=u):"repeat-y"===n&&(p=d/i*r,c=d);let l=e.dpr,o=rZ.allocate({width:c,height:p,dpr:l}),a=o.getContext("2d");a&&(a.inuse=!0,a.clearMatrix(),a.setTransformForCurrent(!0),a.clearRect(0,0,c,p),a.drawImage(t,0,0,c,p),t=o.nativeCanvas),rZ.free(o)}let r=e.dpr,o=e.createPattern(t,n);o.setTransform&&o.setTransform(new DOMMatrix([1/r,0,0,1/r,0,0])),e.fillStyle=o,e.translate(i.x1,i.y1),e.fillRect(0,0,d,u),e.translate(-i.x1,-i.y1)}}}let aO=new aH,aD=class{constructor(e){this.subRenderContribitions=e,this.time=sv.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){this._subRenderContribitions||(this._subRenderContribitions=this.subRenderContribitions.getContributions()),this._subRenderContribitions.forEach(p=>{p.render(e,t,i,r,n,l,o,a,s,h,d,u,c)})}};aD=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),aF(0,tT(tE)),aF(0,tR(aL)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],aD);let az=new class{constructor(){this.time=sv.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){var p,g;let{clipConfig:f}=e.attribute;if(!f)return;let m=e.getClipPath();if(!m)return;let b=!(d||u),y=e.AABBBounds,v=null!=(p=e.attribute.width)?p:y.width(),_=null!=(g=e.attribute.height)?g:y.height();b&&t.save(),t.beginPath(),!1===m.draw(t,[v,_],i+v/2,r+_/2,0)&&t.closePath(),d&&d(t,e.attribute,s,!0),b&&t.clip()}},aW=new class{constructor(){this.time=sv.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{clipConfig:p}=e.attribute;p&&e.getClipPath()&&(d||u||t.restore())}},aZ=new class extends aH{constructor(){super(...arguments),this.time=sv.beforeFillStroke}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){let{background:c,backgroundMode:p=s.backgroundMode,backgroundFit:g=s.backgroundFit,backgroundKeepAspectRatio:f=s.backgroundKeepAspectRatio,backgroundScale:m=s.backgroundScale,backgroundOffsetX:b=s.backgroundOffsetX,backgroundOffsetY:y=s.backgroundOffsetY}=e.attribute;if(c)if(e.backgroundImg&&e.resources){let i=e.resources.get(c);if("success"!==i.state||!i.data)return;t.highPerformanceSave(),t.setTransformFromMatrix(e.parent.globalTransMatrix,!0);let r=e.AABBBounds;this.doDrawImage(t,i.data,r,{backgroundMode:p,backgroundFit:g,backgroundKeepAspectRatio:f,backgroundScale:m,backgroundOffsetX:b,backgroundOffsetY:y}),t.highPerformanceRestore(),t.setTransformForCurrent()}else t.highPerformanceSave(),t.fillStyle=c,t.fill(),t.highPerformanceRestore()}};var aN=function(e,t){return function(i,r){t(i,r,e)}};let a$=class{constructor(e){this.groupRenderContribitions=e,this.numberType=lL}reInit(){this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(aZ)}drawShape(e,t,i,r,n,l,o,a,s){let{clip:h,fill:d,stroke:u,background:c}=e.attribute;if(!(h||d||u||c))return;s=null!=s?s:r4(e,null==l?void 0:l.theme).group;let{opacity:p=s.opacity,width:g=s.width,height:f=s.height,fillOpacity:m=s.fillOpacity,strokeOpacity:b=s.strokeOpacity,cornerRadius:y=s.cornerRadius,path:v=s.path,lineWidth:_=s.lineWidth,visible:C=s.visible,fillStrokeOrder:x=s.fillStrokeOrder,cornerType:w=s.cornerType,x:S=s.x,y:A=s.y}=e.attribute,k=av(p,m,g,f,d),M=a_(p,b,g,f),T=!(!d&&!c),R=ab(u,_);if(!e.valid||!C||!h&&(!T&&!R||!(k||M||o||a||c)))return;if(v&&v.length&&n.drawContribution){let e=t.disableFill,i=t.disableStroke,r=t.disableBeginPath;t.disableFill=!0,t.disableStroke=!0,t.disableBeginPath=!0,v.forEach(e=>{n.drawContribution.getRenderContribution(e).draw(e,n.renderService,n,l)}),t.disableFill=e,t.disableStroke=i,t.disableBeginPath=r}else 0===y||(0,ri.Z)(y)&&y.every(e=>0===e)?(t.beginPath(),t.rect(i,r,g,f)):(t.beginPath(),am(t,i,r,g,f,y,"bevel"!==w));this._groupRenderContribitions||(this._groupRenderContribitions=this.groupRenderContribitions.getContributions()||[],this._groupRenderContribitions.push(aZ));let E={doFill:T,doStroke:R};t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),this._groupRenderContribitions.forEach(l=>{l.time===sv.beforeFillStroke&&l.drawShape(e,t,i,r,T,R,k,M,s,n,o,a,E)}),h&&t.clip();let P=()=>{E.doFill&&(o?o(t,e.attribute,s):k&&(t.setCommonStyle(e,e.attribute,S-i,A-r,s),t.fill()))},B=()=>{E.doStroke&&(a?a(t,e.attribute,s):M&&(t.setStrokeStyle(e,e.attribute,S-i,A-r,s),t.stroke()))};x?(B(),P()):(P(),B()),this._groupRenderContribitions.forEach(l=>{l.time===sv.afterFillStroke&&l.drawShape(e,t,i,r,T,R,k,M,s,n,o,a)})}draw(e,t,i,r){var n,l;let o,{context:a}=i;if(!a)return;let{clip:s,baseOpacity:h=1,drawMode:d}=e.attribute,u=a.nativeContext,c=a.canvas.nativeCanvas;if(d>0){let{x:t,y:i,width:r,height:n}=e.attribute,l=a.canvas,o=tU.global.createCanvas({width:l.width,height:l.height,dpr:1}),s=o.getContext("2d"),h=a.nativeContext.getTransform();s.setTransform(h.a,h.b,h.c,h.d,h.e,h.f),1===d&&(s.save(),s.clearRect(0,0,l.width,l.height),s.beginPath(),s.rect(t,i,r,n),s.clip(),s.drawImage(l.nativeCanvas,0,0,l.width,l.height,0,0,l.displayWidth,l.displayHeight),s.restore()),a.nativeContext=s,l.nativeCanvas=o}s?a.save():a.highPerformanceSave();let p=a.baseGlobalAlpha;a.baseGlobalAlpha*=h;let g=a.modelMatrix;if(a.camera){let t=r4(e,null==r?void 0:r.theme).group,i=l2.allocate(),n=l2.allocate();oX(n,e,t),lq(i,g||i,n),a.modelMatrix=i,l2.free(n),a.setTransform(1,0,0,1,0,0,!0)}else a.transformFromMatrix(e.transMatrix,!0);a.beginPath(),r.skipDraw?this.drawShape(e,a,0,0,i,r,()=>!1,()=>!1):this.drawShape(e,a,0,0,i,null,null,null);let{scrollX:f,scrollY:m}=e.attribute;if((f||m)&&a.translate(f,m),r&&r.renderInGroup&&(o=r.renderInGroup(null==(n=r.renderInGroupParams)?void 0:n.skipSort,e,i,null==(l=r.renderInGroupParams)?void 0:l.nextM)),a.modelMatrix!==g&&l2.free(a.modelMatrix),a.modelMatrix=g,a.baseGlobalAlpha=p,d>0){let{x:t,y:i,width:r,height:n}=e.attribute,l=a.nativeContext,o=a.canvas.nativeCanvas;u.save(),u.setTransform(a.dpr,0,0,a.dpr,0,0,!0),1===d&&l.rect(t,i,r,n),u.drawImage(o,0,0,o.width,o.height,0,0,a.canvas.displayWidth,a.canvas.displayHeight);let s=l.getTransform();u.setTransform(s.a,s.b,s.c,s.d,s.e,s.f),a.nativeContext=u,a.canvas.nativeCanvas=c,u.restore()}o&&o.then?o.then(()=>{s?a.restore():a.highPerformanceRestore()}):s?a.restore():a.highPerformanceRestore()}};a$=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),aN(0,tT(tE)),aN(0,tR(aM)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],a$);let aj={x:0,y:0,z:0,lastModelMatrix:null};class aG{init(e){e&&(this._renderContribitions=e.getContributions()),this._renderContribitions||(this._renderContribitions=[]),this.builtinContributions||(this.builtinContributions=[]),this.builtinContributions.push(az),this.builtinContributions.push(aW),this.builtinContributions.forEach(e=>this._renderContribitions.push(e)),this._renderContribitions.length&&(this._renderContribitions.sort((e,t)=>t.order-e.order),this._beforeRenderContribitions=this._renderContribitions.filter(e=>e.time===sv.beforeFillStroke),this._afterRenderContribitions=this._renderContribitions.filter(e=>e.time===sv.afterFillStroke))}reInit(){this.init(this.graphicRenderContributions)}beforeRenderStep(e,t,i,r,n,l,o,a,s,h,d,u,c){this._beforeRenderContribitions&&this._beforeRenderContribitions.forEach(p=>{(!p.supportedAppName||!e.stage||!e.stage.params||!e.stage.params.context||!e.stage.params.context.appName||(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(e.stage.params.context.appName))&&p.drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c)})}afterRenderStep(e,t,i,r,n,l,o,a,s,h,d,u,c){this._afterRenderContribitions&&this._afterRenderContribitions.forEach(p=>{(!p.supportedAppName||!e.stage||!e.stage.params||!e.stage.params.context||!e.stage.params.context.appName||(Array.isArray(p.supportedAppName)?p.supportedAppName:[p.supportedAppName]).includes(e.stage.params.context.appName))&&p.drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c)})}drawPathProxy(e,t,i,r,n,l,o,a){if(!e.pathProxy)return!1;let s=r4(e,null==l?void 0:l.theme)[e.type.replace("3d","")],{fill:h=s.fill,stroke:d=s.stroke,opacity:u=s.opacity,fillOpacity:c=s.fillOpacity,lineWidth:p=s.lineWidth,strokeOpacity:g=s.strokeOpacity,visible:f=s.visible,x:m=s.x,y:b=s.y}=e.attribute,y=h&&u*c>0,v=u*g>0,_=!!h,C=ab(d,p);return!f||!_&&!C||!y&&!v&&!o&&!a||(t.beginPath(),ir(("function"==typeof e.pathProxy?e.pathProxy(e.attribute):e.pathProxy).commandList,t,i,r),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),this.beforeRenderStep(e,t,i,r,_,C,y,v,s,n,o,a),C&&(a?a(t,e.attribute,s):v&&(t.setStrokeStyle(e,e.attribute,i-m,r-b,s),t.stroke())),_&&(o?o(t,e.attribute,s):y&&(t.setCommonStyle(e,e.attribute,i-m,r-b,s),t.fill())),this.afterRenderStep(e,t,i,r,_,C,y,v,s,n,o,a),!0)}valid(e,t,i,r){let{fill:n=t.fill,background:l,stroke:o=t.stroke,opacity:a=t.opacity,fillOpacity:s=t.fillOpacity,lineWidth:h=t.lineWidth,strokeOpacity:d=t.strokeOpacity,visible:u=t.visible}=e.attribute,c=n&&a*s>0,p=a*d>0,g=!(!n&&!l),f=ab(o,h);return!(!e.valid||!u)&&!(!g&&!f)&&!!(c||p||i||r||l)&&{fVisible:c,sVisible:p,doFill:g,doStroke:f}}transform(e,t,i,r=!1){let{x:n=t.x,y:l=t.y,z:o=t.z,scaleX:a=t.scaleX,scaleY:s=t.scaleY,angle:h=t.angle,postMatrix:d}=e.attribute,u=i.modelMatrix,c=i.camera;aj.x=n,aj.y=l,aj.z=o,aj.lastModelMatrix=u;let p=c&&(r||function(e){let{alpha:t,beta:i}=e.attribute;return t||i}(e)),g=p?e.transMatrix.onlyTranslate()&&!d:1===a&&1===s&&0===h&&!d;if(p){let r=l2.allocate(),n=l2.allocate();oX(n,e,t),lq(r,u||r,n),aj.x=0,aj.y=0,aj.z=0,i.modelMatrix=r,i.setTransform(1,0,0,1,0,0,!0),l2.free(n)}if(g&&!u){let r=e.getOffsetXY(t);aj.x+=r.x,aj.y+=r.y,aj.z=o,i.setTransformForCurrent()}else if(p)aj.x=0,aj.y=0,aj.z=0,i.setTransform(1,0,0,1,0,0,!0);else if(c&&i.project){let r=e.getOffsetXY(t);aj.x+=r.x,aj.y+=r.y,this.transformWithoutTranslate(i,aj.x,aj.y,aj.z,a,s,h)}else i.transformFromMatrix(e.transMatrix,!0),aj.x=0,aj.y=0,aj.z=0;return aj}transformUseContext2d(e,t,i,r){let n=r.camera;if(this.camera=n,n){let t=e.AABBBounds,n=t.x2-t.x1,l=t.y2-t.y1,o=r.project(0,0,i),a=r.project(n,0,i),s=r.project(n,l,i),h={x:0,y:0},d={x:n,y:0},u={x:n,y:l};r.camera=null;let c=1/(h.x*(u.y-d.y)-d.x*u.y+u.x*d.y+(d.x-u.x)*h.y),p=-(h.y*(s.x-a.x)-d.y*s.x+u.y*a.x+(d.y-u.y)*o.x)*c,g=(d.y*s.y+h.y*(a.y-s.y)-u.y*a.y+(u.y-d.y)*o.y)*c,f=(h.x*(s.x-a.x)-d.x*s.x+u.x*a.x+(d.x-u.x)*o.x)*c,m=-(d.x*s.y+h.x*(a.y-s.y)-u.x*a.y+(u.x-d.x)*o.y)*c,b=(h.x*(u.y*a.x-d.y*s.x)+h.y*(d.x*s.x-u.x*a.x)+(u.x*d.y-d.x*u.y)*o.x)*c,y=(h.x*(u.y*a.y-d.y*s.y)+h.y*(d.x*s.y-u.x*a.y)+(u.x*d.y-d.x*u.y)*o.y)*c;r.setTransform(p,g,f,m,b,y,!0)}}restoreTransformUseContext2d(e,t,i,r){this.camera&&(r.camera=this.camera)}transformWithoutTranslate(e,t,i,r,n,l,o){let a=e.project(t,i,r);e.translate(a.x,a.y,!1),e.scale(n,l,!1),e.rotate(o,!1),e.translate(-a.x,-a.y,!1),e.setTransformForCurrent()}_draw(e,t,i,r,n,l){let{context:o}=r;if(!o)return;let{renderable:a}=e.attribute;if(!1===a)return;o.highPerformanceSave();let{x:s,y:h,z:d,lastModelMatrix:u}=this.transform(e,t,o,i);this.z=d,this.drawPathProxy(e,o,s,h,r,n)||(this.drawShape(e,o,s,h,r,n,null,null,l),this.z=0,o.modelMatrix!==u&&l2.free(o.modelMatrix),o.modelMatrix=u),o.highPerformanceRestore()}}function aV(e,t,i,r){if(!t.p1)return;let{offsetX:n=0,offsetY:l=0,offsetZ:o=0}=r||{};if(1===i)t.p2&&t.p3?e.bezierCurveTo(n+t.p1.x,l+t.p1.y,n+t.p2.x,l+t.p2.y,n+t.p3.x,l+t.p3.y,o):e.lineTo(n+t.p1.x,l+t.p1.y,o);else if(t.p2&&t.p3){let[r]=ig(t,i);e.bezierCurveTo(n+r.p1.x,l+r.p1.y,n+r.p2.x,l+r.p2.y,n+r.p3.x,l+r.p3.y,o)}else{let r=t.getPointAt(i);e.lineTo(n+r.x,l+r.y,o)}}function aU(e,t,i,r,n,l,o){var a;let s=t.p0,h=r;if(i&&i.originP1===i.originP2&&(s=i.p0),t.defined)r||(e.lineTo(s.x+n,s.y+l,o),h=!r);else{let d,{originP1:u,originP2:c}=t;if(u&&!1!==u.defined&&!i?d=s:u&&!1!==c.defined&&(d=null!=(a=t.p3)?a:t.p1),r){h=!r;let i=d?d.x:t.p0.x,a=d?d.y:t.p0.y;e.moveTo(i+n,a+l,o)}else d&&(h=!r,e.lineTo(d.x+n,d.y+l,o))}return h}function aK(e,t,i,r,n){let l,{offsetX:o=0,offsetY:a=0,offsetZ:s=0,mode:h="none",drawConnect:d=!1}=n||{};if(d&&"none"===h||!t)return;let u=!0,{curves:c}=t;if(i>=1){if(d){let t,i=!0;c.forEach((r,n)=>{r.originP1!==r.originP2&&(i=aU(e,r,t,i,o,a,s)),t=r})}else c.forEach(t=>{t.defined?(u&&e.moveTo(t.p0.x+o,t.p0.y+a,s),aV(e,t,1,n),u=!1):u=!0});return}if(i<=0)return;"x"===r?l=sb.ROW:"y"===r?l=sb.COLUMN:"auto"===r&&(l=t.direction);let p=i*t.tryUpdateLength(l),g=0,f=!0,m=null;for(let t=0,i=c.length;t<i;t++){let i=c[t],r=i.getLength(l),h=(p-g)/r;if(g+=r,h<0)break;if(d){if(i.originP1===i.originP2){m=i;continue}f=aU(e,i,m,f,o,a,s),m=i}else{if(!i.defined){u=!0;continue}u&&e.moveTo(i.p0.x+o,i.p0.y+a,s),aV(e,i,(0,t0.VV)(h,1),n),u=!1}}}let aX=class extends aG{constructor(){super(...arguments),this.numberType=lH}draw(e,t,i,r){let n=r4(e,null==r?void 0:r.theme).line;this._draw(e,n,!1,i,r)}drawSegmentItem(e,t,i,r,n,l,o,a,s,h,d,u,c,p,g){var f;if(!t)return;e.beginPath(),aK(e,t,s,h,{offsetX:d,offsetY:u,offsetZ:null!=(f=this.z)?f:0}),c.cache&&!(0,ri.Z)(c.cache)&&c.cache.curves.every(e=>e.defined)&&c.attribute.curveType&&c.attribute.curveType.includes("Closed")&&e.closePath(),e.setShadowBlendStyle&&e.setShadowBlendStyle(c,o,a);let{x:m=0,x:b=0}=o;return!1!==i&&(p?p(e,o,a):n&&(e.setCommonStyle(c,o,m-d,b-u,a),e.fill())),!1!==r&&(g?g(e,o,a):l&&(e.setStrokeStyle(c,o,m-d,b-u,a),e.stroke())),!1}drawLinearLineHighPerformance(e,t,i,r,n,l,o,a,s,h,d,u,c){var p;t.beginPath();let g=null!=(p=this.z)?p:0,{points:f}=e.attribute,m=f[0];t.moveTo(m.x+o,m.y+a,g);for(let e=1;e<f.length;e++){let i=f[e];t.lineTo(i.x+o,i.y+a,g)}t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s);let{x:b=0,x:y=0}=e.attribute;!1!==i&&(u?u(t,e.attribute,s):n&&(t.setCommonStyle(e,e.attribute,b-o,y-a,s),t.fill())),!1!==r&&(c?c(t,e.attribute,s):l&&(t.setStrokeStyle(e,e.attribute,b-o,y-a,s),t.stroke()))}drawShape(e,t,i,r,n,l,o,a){let s=r4(e,null==l?void 0:l.theme).line,{fill:h=s.fill,stroke:d=s.stroke,fillOpacity:u=s.fillOpacity,strokeOpacity:c=s.strokeOpacity,segments:p,points:g,closePath:f,curveTension:m=s.curveTension,connectedType:b=s.connectedType}=e.attribute;if(!this.valid(e,s,o,a))return;let{curveType:y=s.curveType}=e.attribute;f&&"linear"===y&&(y="linearClosed");let{clipRange:v=s.clipRange,clipRangeByDimension:_=s.clipRangeByDimension}=e.attribute;if(1===v&&!p&&!g.some(e=>!1===e.defined)&&"linear"===y)return this.drawLinearLineHighPerformance(e,t,!!h,!!d,u,c,i,r,s,n,l,o,a);function C(e,t){return"none"===t?e:e.filter(e=>!1!==e.defined)}if(e.shouldUpdateShape()){let{points:t,segments:i}=e.attribute;if(i&&i.length){let t,r;if(e.cache=i.map((e,i)=>{if(e.points.length<=1&&0===i)return e.points[0]&&(r={endX:e.points[0].x,endY:e.points[0].y,curves:[{defined:!1!==e.points[0].defined}]}),null;1===i?t={x:r.endX,y:r.endY,defined:r.curves[r.curves.length-1].defined}:i>1&&(t.x=r.endX,t.y=r.endY,t.defined=r.curves[r.curves.length-1].defined);let n=iW(C(e.points,b),y,{startPoint:t,curveTension:m});return r=n,n}).filter(e=>!!e),"linearClosed"===y){let t;for(let i=0;i<e.cache.length;i++){let r=e.cache[i];for(let e=0;e<r.curves.length;e++)if(r.curves[e].defined){t=r.curves[e].p0;break}if(t)break}e.cache[e.cache.length-1]&&e.cache[e.cache.length-1].lineTo(t.x,t.y,!0)}}else{if(!t||!t.length)return e.cache=null,void e.clearUpdateShapeTag();e.cache=iW(C(t,b),y,{curveTension:m})}e.clearUpdateShapeTag()}if(Array.isArray(e.cache)){let n=e.attribute.segments.filter(e=>e.points.length);if(1===n[0].points.length&&n.shift(),1===v){let l=!1;e.cache.forEach((p,g)=>{l||(l=this.drawSegmentItem(t,p,!!h,!!d,u,c,n[g],[s,e.attribute],v,_,i,r,e,o,a))})}else{let l=v*e.cache.reduce((e,t)=>e+t.getLength(),0),p=0,g=!1;e.cache.forEach((f,m)=>{if(g)return;let b=f.getLength(),y=(l-p)/b;p+=b,y>0&&(g=this.drawSegmentItem(t,f,!!h,!!d,u,c,n[m],[s,e.attribute],(0,t0.VV)(y,1),_,i,r,e,o,a))})}}else this.drawSegmentItem(t,e.cache,!!h,!!d,u,c,e.attribute,s,v,_,i,r,e,o,a)}};aX=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],aX);let aY=class extends aX{constructor(){super(...arguments),this.numberType=lH}drawShape(e,t,i,r,n,l,o,a){if(e.incremental&&n.multiGraphicOptions){let{startAtIdx:t,length:l}=n.multiGraphicOptions,{segments:s=[]}=e.attribute;if(t>s.length)return;let h=r4(e).line,{fill:d=h.fill,stroke:u=h.stroke,opacity:c=h.opacity,fillOpacity:p=h.fillOpacity,strokeOpacity:g=h.strokeOpacity,lineWidth:f=h.lineWidth,visible:m=h.visible}=e.attribute,b=ab(u,f);if(!e.valid||!m||!d&&!b||!(d&&c*p>0||c*g>0||o||a))return;let{context:y}=n;for(let n=t;n<t+l;n++)this.drawIncreaseSegment(e,y,s[n-1],s[n],e.attribute.segments[n],[h,e.attribute],i,r)}else super.drawShape(e,t,i,r,n,l,o,a)}drawIncreaseSegment(e,t,i,r,n,l,o,a){r&&(t.beginPath(),function(e,t,i,r){let{offsetX:n=0,offsetY:l=0}=r||{},o=t?t.points[t.points.length-1]:i.points[0];e.moveTo(o.x+n,o.y+l),i.points.forEach(t=>{!1!==t.defined?e.lineTo(t.x+n,t.y+l):e.moveTo(t.x+n,t.y+l)})}(t.nativeContext,i,r,{offsetX:o,offsetY:a}),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,n,l),t.setStrokeStyle(e,n,o,a,l),t.stroke())}};function aq(e,t,i,r){let{offsetX:n=0,offsetY:l=0,offsetZ:o=0}=r||{},a=!0;t.forEach(t=>{t.defined?(a&&e.moveTo(t.p0.x+n,t.p0.y+l,o),aV(e,t,1,r),a=!1):a=!0}),a=!0;for(let t=i.length-1;t>=0;t--){let s=i[t];s.defined?(a&&e.lineTo(s.p0.x+n,s.p0.y+l,o),aV(e,s,1,r),a=!1):a=!0}e.closePath()}aY=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],aY);let aJ=(e,t,i)=>{let{outerBorder:r,shadowBlur:n=t.shadowBlur,strokeBoundsBuffer:l=t.strokeBoundsBuffer}=e;if(r){let e=t.outerBorder,{distance:o=e.distance,lineWidth:a=e.lineWidth}=r;lS(i,o+(n+a)/2,!0,l)}return i},aQ=["symbolType","size",...l7];class a0 extends on{constructor(e={symbolType:"circle"}){super(e),this.type="symbol",this.numberType=lZ}getParsedPath(){return this.shouldUpdateShape()&&(this._parsedPath=this.doUpdateParsedPath(),this.clearUpdateShapeTag()),this._parsedPath}getParsedPath2D(e=0,t=0,i=1){let r=null;try{r=new Path2D}catch(e){return null}let n=this.getParsedPath();if(!n)return null;n.draw(r,i,e,t)}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{size:e}=this.attribute;return(0,ri.Z)(e)?2===e.length&&e.every(this._validNumber):this._validNumber(e)}doUpdateParsedPath(){let{symbolType:e="circle"}=this.attribute;return super.parsePath(e)}getGraphicTheme(){return r4(this).symbol}updateAABBBounds(e,t,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateSymbolAABBBoundsImprecise(e,t,i):this.updateSymbolAABBBoundsAccurate(e,t,i));let{tb1:n,tb2:l}=tU.graphicService.updateTempAABBBounds(i);aJ(e,t,n),i.union(n),n.setValue(l.x1,l.y1,l.x2,l.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,this.x1WithoutTransform=i.x1,this.y1WithoutTransform=i.y1;let{lineJoin:o=t.lineJoin}=e;return tU.graphicService.transformAABBBounds(e,i,t,"miter"===o,this),i}updateSymbolAABBBoundsImprecise(e,t,i){let{size:r=t.size}=e;if((0,ri.Z)(r))i.set(-r[0]/2,-r[1]/2,r[0]/2,r[1]/2);else{let e=r/2;i.set(-e,-e,e,e)}return i}updateSymbolAABBBoundsAccurate(e,t,i){let{size:r=t.size}=e,n=this.getParsedPath();return n&&n.bounds(r,i),i}needUpdateTags(e){return super.needUpdateTags(e,aQ)}needUpdateTag(e){return super.needUpdateTag(e,aQ)}toCustomPath(){let e=this.getParsedPath();if(!e)return null;let t=this.attribute.size,i=(0,ri.Z)(t)?t:[t,t];return e.path?(new iZ).fromCustomPath2D(e.path,0,0,i[0],i[1]):(new iZ).fromString(e.pathStr,0,0,i[0],i[1])}clone(){return new a0(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return a0.NOWORK_ANIMATE_ATTR}}function a1(e){return new a0(e)}a0.NOWORK_ANIMATE_ATTR=Object.assign({symbolType:1},or);class a2{constructor(){this.time=sv.afterFillStroke,this.useStyle=!0,this.order=10,this._tempSymbolGraphic=null}createCommonPattern(e,t,i,r,n){let l=(e-2*t)/2,o=r.dpr,a=rZ.allocate({width:e,height:e,dpr:o}),s=a.getContext("2d");if(!s)return null;s.inuse=!0,s.clearMatrix(),s.setTransformForCurrent(!0),s.clearRect(0,0,e,e),n(l,s);let h=r.createPattern(a.nativeCanvas,"repeat");return h.setTransform&&h.setTransform(new DOMMatrix([1/o,0,0,1/o,0,0])),rZ.free(a),h}createCirclePattern(e,t,i,r){return this.createCommonPattern(e,t,i,r,(e,t)=>{t.fillStyle=i,t.arc(e,e,e,0,t0.f7),t.fill()})}createDiamondPattern(e,t,i,r){return this.createCommonPattern(e,t,i,r,(t,r)=>{let n=e/2;r.fillStyle=i,r.moveTo(n,n-t),r.lineTo(t+n,n),r.lineTo(n,n+t),r.lineTo(n-t,n),r.closePath(),r.fill()})}createRectPattern(e,t,i,r){return this.createCommonPattern(e,t,i,r,(e,r)=>{r.fillStyle=i,r.fillRect(t,t,2*e,2*e)})}createVerticalLinePattern(e,t,i,r){return this.createCommonPattern(e,t,i,r,(r,n)=>{n.fillStyle=i,n.fillRect(t,0,2*r,e)})}createHorizontalLinePattern(e,t,i,r){return this.createCommonPattern(e,t,i,r,(r,n)=>{n.fillStyle=i,n.fillRect(0,t,e,2*r)})}createBiasLRLinePattern(e,t,i,r){return this.createCommonPattern(e,t,i,r,(t,r)=>{r.strokeStyle=i,r.lineWidth=t,r.moveTo(0,0),r.lineTo(e,e);let n=e/2,l=-n;r.moveTo(n,l),r.lineTo(n+e,l+e),r.moveTo(-n,-l),r.lineTo(-n+e,-l+e),r.stroke()})}createBiasRLLinePattern(e,t,i,r){return this.createCommonPattern(e,t,i,r,(t,r)=>{r.strokeStyle=i,r.lineWidth=t,r.moveTo(e,0),r.lineTo(0,e);let n=e/2;r.moveTo(e+n,n),r.lineTo(n,n+e),r.moveTo(e-n,-n),r.lineTo(-n,-n+e),r.stroke()})}createGridPattern(e,t,i,r){return this.createCommonPattern(e,t,i,r,(e,r)=>{r.fillStyle=i,r.fillRect(t,t,e,e),r.fillRect(t+e,t+e,e,e)})}initTextureMap(e,t){this.textureMap=new Map}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){this.textureMap||this.initTextureMap(t,e.stage);let{texture:p=s.texture,textureColor:g=s.textureColor,textureSize:f=s.textureSize,texturePadding:m=s.texturePadding}=e.attribute;p&&this.drawTexture(p,e,t,i,r,s,g,f,m)}drawTexture(e,t,i,r,n,l,o,a,s){var h;let{textureRatio:d=l.textureRatio,textureOptions:u=null}=t.attribute,c=this.textureMap.get(e);if(!c)switch(e){case"circle":c=this.createCirclePattern(a,s,o,i);break;case"diamond":c=this.createDiamondPattern(a,s,o,i);break;case"rect":c=this.createRectPattern(a,s,o,i);break;case"vertical-line":c=this.createVerticalLinePattern(a,s,o,i);break;case"horizontal-line":c=this.createHorizontalLinePattern(a,s,o,i);break;case"bias-lr":c=this.createBiasLRLinePattern(a,s,o,i);break;case"bias-rl":c=this.createBiasRLLinePattern(a,s,o,i);break;case"grid":c=this.createGridPattern(a,s,o,i)}if(u&&u.dynamicTexture){let c,{gridConfig:p={},useNewCanvas:g}=u,f=t.AABBBounds;r=f.x1,n=f.y1;let m=i;if(g){let e=(c=rZ.allocate({width:f.width(),height:f.height(),dpr:i.dpr})).getContext("2d");e.clearRect(0,0,f.width(),f.height()),r=0,n=0,i=e}if(m.save(),t.parent&&!t.transMatrix.onlyTranslate()){let{scrollX:e=0,scrollY:i=0}=t.parent.attribute;m.setTransformFromMatrix(t.parent.globalTransMatrix),m.translate(e,i,!0)}m.setCommonStyle(t,t.attribute,r,n,l),m.clip();let b=f.width(),y=f.height(),v=p.columns?p.columns:Math.ceil(b/a),_=p.rows?p.rows:Math.ceil(y/a),C=p.gutterColumn?p.gutterColumn:2*s,x=p.gutterRow?p.gutterRow:2*s;this._tempSymbolGraphic||(this._tempSymbolGraphic=a1({}));let w=p.columns?b/p.columns:a,S=p.rows?y/p.rows:a;this._tempSymbolGraphic.setAttributes({size:[w-C,S-x],symbolType:e});let A=this._tempSymbolGraphic.getParsedPath();for(let e=0;e<_;e++)for(let l=0;l<v;l++){let s=r+a/2+l*a,c=n+a/2+e*a;null==(h=u.beforeDynamicTexture)||h.call(u,i,e,l,_,v,d,t,f.width(),f.height()),i.beginPath(),!1===A.draw(i,Math.min(w-C,S-x),s,c,0)&&i.closePath(),i.fillStyle=o,u.dynamicTexture(i,e,l,_,v,d,t,f.width(),f.height())}g&&(m.globalAlpha=1,m.drawImage(c.nativeCanvas,0,0,c.nativeCanvas.width,c.nativeCanvas.height,f.x1,f.y1,f.width()*m.dpr,f.height()*m.dpr)),m.restore()}else if(c)i.highPerformanceSave(),i.setCommonStyle(t,t.attribute,r,n,l),i.fillStyle=c,i.fill(),i.highPerformanceRestore();else if("wave"===e){i.save(),i.setCommonStyle(t,t.attribute,r,n,l),i.clip();let e=t.AABBBounds;(function(e,t,i,r,n,l,o){let{fill:a="orange",percent:s=.6,frequency:h=4,opacity:d,phi:u=0}=n,{amplitude:c=10}=n;c*=t<=.5?4*t-1:-4*t+3;let p=r*(1-s),g=Math.max(Math.round(i/70),2);e.beginPath(),e.moveTo(0+l,r+o),e.lineTo(0+l,p+o);let f=i/h*t,m=i/Math.PI/(2*h);for(let t=0;t<i;t+=g){let i=c*Math.sin((t+f+u)/m+u);e.lineTo(t+l,p+i+o)}e.lineTo(i+l,r+o),e.closePath(),e.fillStyle=a,isFinite(d)&&(e.globalAlpha=d),e.fill()})(i,d,e.width(),e.height(),Object.assign(Object.assign({},u||{}),{fill:o}),r+e.x1-r,n+e.y1-n),i.restore()}}}let a3=new a2,a4=new class extends a2{constructor(){super(...arguments),this.time=sv.afterFillStroke}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){var p,g,f,m;this.textureMap||this.initTextureMap(t,e.stage);let{attribute:b=e.attribute}=c||{},{texture:y=null!=(p=e.attribute.texture)?p:ny(s,"texture"),textureColor:v=null!=(g=e.attribute.textureColor)?g:ny(s,"textureColor"),textureSize:_=null!=(f=e.attribute.textureSize)?f:ny(s,"textureSize"),texturePadding:C=null!=(m=e.attribute.texturePadding)?m:ny(s,"texturePadding")}=b;y&&this.drawTexture(y,e,t,i,r,s,v,_,C)}};var a5=function(e,t){return function(i,r){t(i,r,e)}};let a6=class extends aG{constructor(e){super(),this.graphicRenderContributions=e,this.numberType=lP,this.builtinContributions=[a4,aO],this.init(e)}drawLinearAreaHighPerformance(e,t,i,r,n,l,o,a,s,h,d,u,c){var p,g,f;let{points:m}=e.attribute;if(m.length<2)return;t.beginPath();let b=null!=(p=this.z)?p:0,y=m[0];t.moveTo(y.x+o,y.y+a,b);for(let e=1;e<m.length;e++){let i=m[e];t.lineTo(i.x+o,i.y+a,b)}for(let e=m.length-1;e>=0;e--){let i=m[e];t.lineTo((null!=(g=i.x1)?g:i.x)+o,(null!=(f=i.y1)?f:i.y)+a,b)}t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),this.beforeRenderStep(e,t,o,a,!!n,!1,i,!1,s,h,u,null,{attribute:e.attribute});let{x:v=0,x:_=0}=e.attribute;!1!==i&&(u?u(t,e.attribute,s):n&&(t.setCommonStyle(e,e.attribute,v-o,_-a,s),t.fill())),this.afterRenderStep(e,t,o,a,!!n,!1,i,!1,s,h,u,null,{attribute:e.attribute}),(()=>{var i,n;if(r){let{stroke:r=s&&s.stroke}=e.attribute;if((0,ri.Z)(r)&&(r[0]||r[2])&&!1===r[1]){if(t.beginPath(),r[0]){t.moveTo(y.x+o,y.y+a,b);for(let e=1;e<m.length;e++){let i=m[e];t.lineTo(i.x+o,i.y+a,b)}}else if(r[2]){let e=m[m.length-1];t.moveTo(e.x+o,e.y+a,b);for(let e=m.length-2;e>=0;e--){let r=m[e];t.lineTo((null!=(i=r.x1)?i:r.x)+o,(null!=(n=r.y1)?n:r.y)+a,b)}}}c?c(t,e.attribute,s):(t.setStrokeStyle(e,e.attribute,v-o,_-a,s),t.stroke())}})()}drawShape(e,t,i,r,n,l,o,a){var s,h,d,u,c,p;let g=r4(e,null==l?void 0:l.theme).area,{fill:f=g.fill,stroke:m=g.stroke,fillOpacity:b=g.fillOpacity,z:y=g.z,strokeOpacity:v=g.strokeOpacity,curveTension:_=g.curveTension,connectedType:C=g.connectedType}=e.attribute,x=this.valid(e,g,o,a);if(!x)return;let{doFill:w}=x,S=x.doStroke&&x.sVisible,{clipRange:A=g.clipRange,closePath:k,points:M,segments:T}=e.attribute,{curveType:R=g.curveType}=e.attribute;function E(e,t){return"connect"!==t?e:e.filter(e=>!1!==e.defined)}if(k&&"linear"===R&&(R="linearClosed"),1===A&&!T&&!M.some(e=>!1===e.defined)&&"linear"===R)return this.drawLinearAreaHighPerformance(e,t,!!f,S,b,v,i,r,g,n,l,o,a);if(e.shouldUpdateShape()){if(T&&T.length){let t,i,r,n=T.map((e,r)=>{if(e.points.length<=1&&0===r)return e.points[0]&&(i={endX:e.points[0].x,endY:e.points[0].y}),null;1===r?t={x:i.endX,y:i.endY}:r>1&&(t.x=i.endX,t.y=i.endY);let n=iW(E(e.points,C),R,{startPoint:t,curveTension:_});return i=n,n}).filter(e=>!!e),l=[];for(let e=T.length-1;e>=0;e--){let t=T[e].points,i=[];for(let e=t.length-1;e>=0;e--)i.push({x:null!=(s=t[e].x1)?s:t[e].x,y:null!=(h=t[e].y1)?h:t[e].y});if(0!==e){let t=T[e-1].points,r=t[t.length-1];r&&i.push({x:null!=(d=r.x1)?d:r.x,y:null!=(u=r.y1)?u:r.y})}i.length>1&&(r=iW(E(i,C),"stepBefore"===R?"stepAfter":"stepAfter"===R?"stepBefore":R,{curveTension:_}),l.unshift(r))}e.cacheArea=l.map((e,t)=>({top:n[t],bottom:e}))}else{if(!M||!M.length)return e.cacheArea=null,void e.clearUpdateShapeTag();{let t=E(M,C),i=[];for(let e=t.length-1;e>=0;e--)i.push({x:null!=(c=t[e].x1)?c:t[e].x,y:null!=(p=t[e].y1)?p:t[e].y});e.cacheArea={top:iW(t,R,{curveTension:_}),bottom:iW(i,"stepBefore"===R?"stepAfter":"stepAfter"===R?"stepBefore":R,{curveTension:_})}}}e.clearUpdateShapeTag()}if(Array.isArray(e.cacheArea)){let l=e.attribute.segments.filter(e=>e.points.length);if(1===l[0].points.length&&l.shift(),1===A){let s=!1;e.cacheArea.forEach((h,d)=>{s||(s=this.drawSegmentItem(t,h,w,b,S,v,l[d],[g,e.attribute],A,i,r,y,e,n,o,a))})}else{let s=A*e.cacheArea.reduce((e,t)=>e+t.top.getLength(),0),h=0,d=!1;e.cacheArea.forEach((u,c)=>{if(d)return;let p=u.top.getLength(),f=(s-h)/p;h+=p,f>0&&(d=this.drawSegmentItem(t,u,w,b,S,v,l[c],[g,e.attribute],(0,t0.VV)(f,1),i,r,y,e,n,o,a))})}}else this.drawSegmentItem(t,e.cacheArea,w,b,S,v,e.attribute,g,A,i,r,y,e,n,o,a)}draw(e,t,i,r){let n=r4(e,null==r?void 0:r.theme).area;this._draw(e,n,!1,i,r)}drawSegmentItem(e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f){return this._drawSegmentItem(e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f)}_drawSegmentItem(e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f){if(!(t&&t.top&&t.bottom&&t.top.curves&&t.top.curves.length&&t.bottom.curves&&t.bottom.curves.length))return;e.beginPath();let{points:m,segments:b}=c.attribute,y,v,_=sb.ROW;if(b){let e=b[b.length-1];v=b[0].points[0],y=e.points[e.points.length-1]}else v=m[0],y=m[m.length-1];let C=(0,t0.Wn)(y.x-v.x),x=(0,t0.Wn)(y.y-v.y);(function(e,t,i,r){var n;let{top:l,bottom:o}=t;if(l.curves.length!==o.curves.length)return;if(i>=1){let t=[],i=[],n=!0;for(let a=0,s=l.curves.length;a<s;a++){let h=l.curves[a];n!==h.defined?(n?(aq(e,t,i,r),t.length=0,i.length=0):(t.push(h),i.push(o.curves[s-a-1])),n=!n):n&&(t.push(h),i.push(o.curves[s-a-1]))}return aq(e,t,i,r)}if(i<=0)return;let{direction:a}=r||{},{curves:s}=l,h=null!=(n=s[s.length-1].p3)?n:s[s.length-1].p1,d=(0,t0.Wn)(h.x-s[0].p0.x),u=(0,t0.Wn)(h.y-s[0].p0.y);a=null!=a?a:d>u?sb.ROW:sb.COLUMN,Number.isFinite(d)||(a=sb.COLUMN),Number.isFinite(u)||(a=sb.ROW);let c=i*(a===sb.ROW?d:u),p=0,g=!0,f=[],m=[];for(let t=0,i=l.curves.length;t<i;t++){let n=l.curves[t],s=n.getLength(a),h=(c-p)/s;if(h<0)break;p+=s;let d=null,u=null;g!==n.defined?(g?(aq(e,f,m,r),f.length=0,m.length=0):(d=n,u=o.curves[i-t-1]),g=!g):g&&(d=n,u=o.curves[i-t-1]),d&&u&&(h<1&&(d=d.p2&&d.p3?ig(d,h)[0]:ia(d,h)[0],u=u.p2&&u.p3?ig(u,1-h)[1]:ia(u,1-h)[1]),d.defined=g,u.defined=g,f.push(d),m.push(u)),d=null,u=null}aq(e,f,m,r)})(e,t,s,{offsetX:h,offsetY:d,offsetZ:u,direction:_=null==y.x1?sb.ROW:null==y.y1?sb.COLUMN:Number.isFinite(C+x)?C>x?sb.ROW:sb.COLUMN:sb.ROW}),this.beforeRenderStep(c,e,h,d,!!r,!1,i,!1,a,p,g,null,{attribute:o}),e.setShadowBlendStyle&&e.setShadowBlendStyle(c,o,a);let{x:w=0,x:S=0}=o;return!1!==i&&(g?g(e,o,a):r&&(e.setCommonStyle(c,o,w-h,S-d,a),e.fill())),this.afterRenderStep(c,e,h,d,!!r,!1,i,!1,a,p,g,null,{attribute:o}),(()=>{if(!1!==n)if(f)f(e,o,a);else{let{stroke:i=a&&a[1]&&a[1].stroke}=o;(0,ri.Z)(i)&&(i[0]||i[2])&&!1===i[1]&&(e.beginPath(),aK(e,i[0]?t.top:t.bottom,s,_===sb.ROW?"x":"y",{offsetX:h,offsetY:d,offsetZ:u})),e.setStrokeStyle(c,o,w-h,S-d,a),e.stroke()}})(),!1}};a6=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),a5(0,tT(tE)),a5(0,tR(aA)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],a6);let a8=class extends a6{constructor(){super(...arguments),this.numberType=lP}drawShape(e,t,i,r,n,l,o){if(e.incremental&&n.multiGraphicOptions){let{startAtIdx:l,length:a}=n.multiGraphicOptions,{segments:s=[]}=e.attribute;if(l>s.length)return;let h=r4(e).area,{fill:d=h.fill,fillOpacity:u=h.fillOpacity,opacity:c=h.opacity,visible:p=h.visible}=e.attribute;if(e.valid&&p&&d&&(d&&c*u>0||o))for(let n=l;n<l+a;n++)this.drawIncreaseSegment(e,t,s[n-1],s[n],e.attribute.segments[n],[h,e.attribute],i,r)}else super.drawShape(e,t,i,r,n,l,o)}drawIncreaseSegment(e,t,i,r,n,l,o,a){r&&(t.beginPath(),function(e,t,i,r){let{offsetX:n=0,offsetY:l=0}=r||{},{points:o}=i,a=[],s=0;for(let e=0;e<o.length;e++)!1===o[e].defined&&(s+1!==e&&a.slice(s,e),s=e);a.push(o),a.forEach((i,r)=>{var o,a,s,h;let d=t&&0===r?t.points[t.points.length-1]:i[0];e.moveTo(d.x+n,d.y+l),i.forEach(t=>{!1!==t.defined?e.lineTo(t.x+n,t.y+l):e.moveTo(t.x+n,t.y+l)});for(let t=i.length-1;t>=0;t--){let r=i[t];e.lineTo(null!=(o=r.x1)?o:r.x,null!=(a=r.y1)?a:r.y)}e.lineTo(null!=(s=d.x1)?s:d.x,null!=(h=d.y1)?h:d.y),e.closePath()})}(t.camera?t:t.nativeContext,i,r,{offsetX:o,offsetY:a}),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,n,l),t.setCommonStyle(e,n,o,a,l),t.fill())}};a8=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],a8);var a7,a9,se,st,si,sr,sn,sl,so,sa,ss,sh,sd,su,sc,sp,sg,sf,sm,sb,sy,sv,s_,sC,sx,sw,sS,sA,sk,sM,sT=function(e,t){return function(i,r){t(i,r,e)}},sR=function(e,t,i,r){return new(i||(i=Promise))(function(n,l){function o(e){try{s(r.next(e))}catch(e){l(e)}}function a(e){try{s(r.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}s((r=r.apply(e,t||[])).next())})};(p=sM||(sM={}))[p.NORMAL=0]="NORMAL",p[p.STOP=1]="STOP";let sE=class extends ap{constructor(e,t,i,r){super(e,r),this.contributions=e,this.lineRender=t,this.areaRender=i,this.drawItemInterceptorContributions=r,this.rendering=!1,this.currFrameStartAt=0,this.currentIdx=0,this.status=sM.NORMAL,this.checkingForDrawPromise=null,this.hooks={completeDraw:new tF([])},this.defaultRenderMap.set(this.lineRender.numberType,this.lineRender),this.defaultRenderMap.set(this.areaRender.numberType,this.areaRender)}draw(e,t){return sR(this,void 0,void 0,function*(){if(this.checkingForDrawPromise)return;this.lastRenderService=e,this.lastDrawContext=t,this.checkingForDrawPromise=this.checkForDraw(t);let i=yield this.checkingForDrawPromise;if(this.checkingForDrawPromise=null,i)return;this.currentRenderService=e;let{context:r,viewBox:n}=t;r&&(r.inuse=!0,r.clearMatrix(),r.setTransformForCurrent(!0),r.save(),t.restartIncremental&&this.clearScreen(this.currentRenderService,r,t),r.translate(n.x1,n.y1,!0),r.save(),e.renderTreeRoots.sort((e,t)=>{var i,r;return(null!=(i=e.attribute.zIndex)?i:iY.zIndex)-(null!=(r=t.attribute.zIndex)?r:iY.zIndex)}).forEach(e=>{this.renderGroup(e,t)}),this.hooks.completeDraw.tap("top-draw",()=>{r.restore(),r.restore(),r.draw(),r.inuse=!1,this.rendering=!1}))})}_increaseRender(e,t){return sR(this,void 0,void 0,function*(){this.rendering=!0,yield this._renderIncrementalGroup(e,t)})}_renderIncrementalGroup(e,t){return sR(this,void 0,void 0,function*(){this.count=e.count,yield new Promise(i=>{this.renderItem(e,t,{drawingCb:()=>sR(this,void 0,void 0,function*(){if(2!==e.count)yield at(e,iY.zIndex,(i,r)=>{if(this.status===sM.STOP)return!0;if(i.isContainer||r<this.currentIdx)return!1;let n=this.currFrameStartAt+e.incremental;return r<n&&(this.currentIdx=r+1,this.renderItem(i,t)),r===n-1&&(this.currFrameStartAt=this.currentIdx,this.waitToNextFrame())}),i(!1);else{let r=e.getChildAt(0);if(r.incremental&&r.attribute.segments)for(r.incrementalAt||(r.incrementalAt=0);r.incrementalAt<r.attribute.segments.length;)t.multiGraphicOptions={startAtIdx:r.incrementalAt,length:r.incremental},this.renderItem(r,t),r.incrementalAt+=r.incremental,yield this.waitToNextFrame();else this.renderItem(r,t);i(!1)}})})}),this.hooks.completeDraw.call()})}waitToNextFrame(){return sR(this,void 0,void 0,function*(){return new Promise(e=>{this.global.getRequestAnimationFrame()(()=>{e(!1)})})})}checkForDraw(e){return sR(this,void 0,void 0,function*(){let t=this.rendering;return e.restartIncremental&&(t=!1,yield this.forceStop(),this.resetToInit()),t})}forceStop(){return sR(this,void 0,void 0,function*(){this.rendering&&(this.status=sM.STOP,yield new Promise(e=>{this.hooks.completeDraw.tap("stopCb",()=>{this.status=sM.NORMAL,this.hooks.completeDraw.taps=this.hooks.completeDraw.taps.filter(e=>"stopCb"!==e.name),e(!1)})}))})}resetToInit(){this.currFrameStartAt=0,this.currentIdx=0}renderGroup(e,t){return sR(this,void 0,void 0,function*(){if(!t.break&&!1!==e.attribute.visibleAll)return e.incremental&&t.startAtId===e._uid?(yield this._increaseRender(e,t),void(t.break=!0)):void(yield new Promise(i=>{this.renderItem(e,t,{drawingCb:()=>sR(this,void 0,void 0,function*(){yield at(e,iY.zIndex,e=>sR(this,void 0,void 0,function*(){t.break||e.isContainer&&(yield this.renderGroup(e,t))})),i(!1)})})}))})}};sE=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),sT(0,o7(o_)),sT(1,tT(aY)),sT(2,tT(a8)),sT(3,tT(tE)),sT(3,tR(ar)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Array,Object,Object,Object])],sE);let sP=new tb(e=>{e(aH).toSelf().inSingletonScope(),e(a2).toSelf().inSingletonScope(),e(oP).to(ap),e(om).to(sE),e(oC).to(a$).inSingletonScope(),e(o_).toService(oC),tB(e,aM),e(aD).toSelf().inSingletonScope(),tB(e,aL),tB(e,o_),e(as).toSelf().inSingletonScope(),e(ar).toService(as),tB(e,ar)});function sB(){sB.__loaded||(sB.__loaded=!0,tG.load(of),tG.load(oJ),tG.load(oI),tG.load(oj),tG.load(o3),tG.load(o4),tG.load(o5),tG.load(o8),tG.load(sP))}sB.__loaded=!1,sB();let sI=tG.get(tO);function sL(e){return function(t){return(0,ri.Z)(e)?e.reduce((e,t)=>null==e?void 0:e[t],t):null==t?void 0:t[e]}}tU.global=sI,tU.graphicUtil=tG.get(oh),tU.transformUtil=tG.get(os),tU.graphicService=tG.get(l$),tU.layerService=tG.get(od);var sF=i(26001);let sH=0;function sO(){return sH>=9999999&&(sH=0),sH++}var sD=i(89530);function sz(e){return null!=e&&""!==e&&(!!(0,nw.Z)(e)||+e==+e)}function sW(e){return!(!e||0===e.length)&&!(0,r5.Z)(e[0])&&!(0,r5.Z)(e[0].dataId)&&(0,ri.Z)(e[0].fields)}function sZ(e){switch(e){case"left":case"right":case"top":case"bottom":return!0;default:return!1}}function sN(e){return!!(0,r6.Z)(e)&&!!e.endsWith("%")&&sz(e.substring(0,e.length-1))}function s$(e,t,i,r=0){var n,l;return(0,nw.Z)(e)?e:sN(e)?Number(e.substring(0,e.length-1))*t/100:(0,nr.Z)(e)?e(i):(0,r9.Z)(e)?t*(null!=(n=e.percent)?n:0)+(null!=(l=e.offset)?l:0):r}function sj(e,t,i){var r,n,l,o;let a={top:0,bottom:0,left:0,right:0};return Object.values(e).every(e=>(0,nw.Z)(e))?(a.top=null!=(r=e.top)?r:0,a.right=null!=(n=e.right)?n:0,a.bottom=null!=(l=e.bottom)?l:0,a.left=null!=(o=e.left)?o:0):[{orients:["left","right"],size:t.width},{orients:["top","bottom"],size:t.height}].forEach(t=>{t.orients.forEach(r=>{a[r]=s$(e[r],t.size,i)})}),a}function sG(e){let t={};return(0,ri.Z)(e)?((0,r5.Z)(e[0])||(t.top=t.left=t.bottom=t.right=e[0]),(0,r5.Z)(e[1])||(t.left=t.right=e[1]),(0,r5.Z)(e[2])||(t.bottom=e[2]),(0,r5.Z)(e[3])||(t.left=e[3]),t):(0,nw.Z)(e)||sN(e)||(0,nr.Z)(e)||(0,r9.Z)(e)&&("percent"in e||"offset"in e)?(t.top=t.left=t.bottom=t.right=e,t):(0,r9.Z)(e)?t=Object.assign({},e):t}function sV(e,t,i){return i?{x:e.x+t.x,y:e.y+t.y}:e}let sU=(e,t)=>{let i=Number(e),r=e.toString();return isNaN(i)&&"%"===r[r.length-1]?t*(Number(r.slice(0,r.length-1))/100):i};function sK(){if(null==s)try{let e=document.createElement("canvas"),t=e.getContext("2d");(s=!!(window&&e.getBoundingClientRect&&requestAnimationFrame&&window.devicePixelRatio&&t&&t.isPointInPath&&t.isPointInStroke))&&(s=!!document.createElement)}catch(e){s=!1}let e=tU.global&&tU.global.env;return e?"browser"===e:s}let sX=sK(),sY=sX&&globalThis?globalThis.document:void 0;function sq(e){return("desktop-browser"===e||"mobile-browser"===e)&&sX}function sJ(e){return sQ(e)||"mobile-browser"===e}function sQ(e){return e.includes("miniApp")||"lynx"===e||"wx"===e||"harmony"===e}let s0=(e,...t)=>s3.silent?null:t1.Y.getInstance().info(`[VChart log]: ${e}`,...t),s1=(e,t)=>((0,nr.Z)(s3.warnHandler)&&s3.warnHandler.call(null,e,t),t?t1.Y.getInstance().warn(`[VChart warn]: ${e}`,t):t1.Y.getInstance().warn(`[VChart warn]: ${e}`)),s2=(e,t,i)=>{if(!s3.silent){if(!(0,nr.Z)(s3.errorHandler))throw Error(e);s3.errorHandler.call(null,e,t)}},s3={silent:!1,warnHandler:!1,errorHandler:!1};var s4=i(60692),s5=i(53026),s6=i(12317);function s8(e){var t,i;let{type:r}=e;return r===z.sankey?null!=(t=e.direction)?t:"horizontal":null!=(i=e.direction)?i:"vertical"}(g=z||(z={})).area="area",g.line="line",g.bar="bar",g.rangeColumn="rangeColumn",g.rangeArea="rangeArea",g.dot="dot",g.geo="geo",g.link="link",g.map="map",g.pie="pie",g.radar="radar",g.rose="rose",g.scatter="scatter",g.circularProgress="circularProgress",g.wordCloud="wordCloud",g.funnel="funnel",g.linearProgress="linearProgress",g.boxPlot="boxPlot",g.sankey="sankey",g.gaugePointer="gaugePointer",g.gauge="gauge",g.treemap="treemap",g.sunburst="sunburst",g.circlePacking="circlePacking",g.waterfall="waterfall",g.heatmap="heatmap",g.correlation="correlation",g.liquid="liquid",g.venn="venn",g.mosaic="mosaic",g.pictogram="pictogram",(f=W||(W={})).label="label",f.point="point",f.line="line",f.area="area",f.bar="bar",f.boxPlot="boxPlot",f.outlier="outlier",f.circlePacking="circlePacking",f.group="group",f.gridBackground="gridBackground",f.grid="grid",f.dot="dot",f.title="title",f.subTitle="subTitle",f.symbol="symbol",f.funnel="funnel",f.transform="transform",f.transformLabel="transformLabel",f.outerLabel="outerLabel",f.outerLabelLine="outerLabelLine",f.pin="pin",f.pinBackground="pinBackground",f.pointer="pointer",f.segment="segment",f.track="track",f.cell="cell",f.cellBackground="cellBackground",f.link="link",f.arrow="arrow",f.pie="pie",f.labelLine="labelLine",f.progress="progress",f.minLabel="minLabel",f.maxLabel="maxLabel",f.rose="rose",f.node="node",f.sunburst="sunburst",f.nonLeaf="nonLeaf",f.leaf="leaf",f.nonLeafLabel="nonLeafLabel",f.leaderLine="leaderLine",f.stackLabel="stackLabel",f.word="word",f.fillingWord="fillingWord",f.wordMask="wordMask",f.nodePoint="nodePoint",f.ripplePoint="ripplePoint",f.centerPoint="centerPoint",f.centerLabel="centerLabel",f.barBackground="barBackground",f.lineLabel="lineLabel",f.areaLabel="areaLabel",f.liquidGroup="liquidGroup",f.liquid="liquid",f.liquidBackground="liquidBackground",f.liquidOutline="liquidOutline",f.circle="circle",f.overlap="overlap",f.overlapLabel="overlapLabel";let s7={primaryFontColor:"titleFontColor",tertiaryFontColor:"labelFontColor",axisLabelFontColor:"axisFontColor",axisMarkerFontColor:"labelReverseFontColor",dataZoomHandleStrokeColor:"dataZoomHandlerStrokeColor",sliderHandleColor:"dataZoomHandlerFillColor",sliderRailColor:"dataZoomBackgroundColor",sliderTrackColor:"dataZoomSelectedColor",playerControllerColor:"dataZoomSelectedColor",popupBackgroundColor:"tooltipBackgroundColor",hoverBackgroundColor:"axisGridColor"},s9={titleFontColor:"primaryFontColor",labelFontColor:"tertiaryFontColor",axisFontColor:"axisLabelFontColor",labelReverseFontColor:"axisMarkerFontColor",dataZoomHandlerStrokeColor:"dataZoomHandleStrokeColor",dataZoomHandlerFillColor:"sliderHandleColor",dataZoomBackgroundColor:"sliderRailColor",dataZoomSelectedColor:"sliderTrackColor",tooltipBackgroundColor:"popupBackgroundColor"};function he(e,t){if(!e)return[];let i=ho(e,t);if(!i||(0,ri.Z)(i))return null!=i?i:[];if((0,r9.Z)(i)){let{dataScheme:r}=i;return r?hl(r)?r.map(i=>Object.assign(Object.assign({},i),{scheme:i.scheme.map(i=>hn(i)?hi(e,i,t):i).filter(oV.Z)})):r.map(i=>hn(i)?hi(e,i,t):i).filter(oV.Z):[]}return[]}function ht(e,t){var i,r;return hl(e)?null!=(r=null==(i=e.find(e=>(0,oV.Z)(e.isAvailable)?(0,nr.Z)(e.isAvailable)?e.isAvailable(t):!!e.isAvailable:!(0,oV.Z)(e.maxDomainLength)||(null==t?void 0:t.length)<=e.maxDomainLength))?void 0:i.scheme)?r:e[e.length-1].scheme:e}function hi(e,t,i){var r;let n,l=ho(e,i);if(!l)return;let{palette:o}=l;if((0,r9.Z)(o)&&(n=null!=(r=function(e,t){let i=s7[t];if(i&&e[i])return e[i];if(e[t])return e[t];let r=s9[t];return r?e[r]:void 0}(o,t.key))?r:t.default),!n)return;if((0,r5.Z)(t.a)&&(0,r5.Z)(t.l)||!(0,r6.Z)(n))return n;let a=new s4.Il(n);if((0,oV.Z)(t.l)){let{r:e,g:i,b:r}=a.color,{h:n,s:l}=(0,s5.Z)(e,i,r),o=(0,s6.Z)(n,l,t.l),s=new s4.Il(`rgb(${o.r}, ${o.g}, ${o.b})`);s.setOpacity(a.color.opacity),a=s}return(0,oV.Z)(t.a)&&a.setOpacity(t.a),a.toRGBA()}let hr=(e,t)=>{if(t&&hn(e)){let i=hi(t,e);if(i)return i}return e};function hn(e){return e&&"palette"===e.type&&!!e.key}function hl(e){return!(!(0,ri.Z)(e)||0===e.length)&&e.every(e=>(0,oV.Z)(e.scheme))}function ho(e,t){var i,r;let n,{type:l}=null!=t?t:{};if(!t||(0,r5.Z)(l))n=null==e?void 0:e.default;else{let o=s8(t);n=null!=(r=null!=(i=null==e?void 0:e[`${l}_${o}`])?i:null==e?void 0:e[l])?r:null==e?void 0:e.default}return n}var ha=i(20408);function hs(e,...t){let i=-1,r=t.length;for(;++i<r;){let r=t[i];(0,ha.p)(e,r,!0,!0)}return e}var hh=i(52536),hd=i(33141),hu=i(7187),hc=i(17721);class hp{static registerChart(e,t){hp._charts[e]=t}static registerSeries(e,t){hp._series[e]=t}static registerComponent(e,t,i,r){hp._components[e]={cmp:t,alwaysCheck:i,createOrder:null!=r?r:0}}static registerGraphicComponent(e,t){hp._graphicComponents[e]=t}static createGraphicComponent(e,t,i){let r=hp._graphicComponents[e];return r?r(t,i):null}static registerMark(e,t){hp._marks[e]=t}static registerRegion(e,t){hp._regions[e]=t}static registerTransform(e,t){hp.transforms[e]=t}static registerGrammarTransform(e,t){hp._grammarTransforms[e]=t}static getGrammarTransform(e){return hp._grammarTransforms[e]}static registerLayout(e,t){hp._layout[e]=t}static registerAnimation(e,t){hp._animations[e]=t}static registerImplement(e,t){hp._implements[e]=t}static registerChartPlugin(e,t){hp._chartPlugin[e]=t}static registerVChartPlugin(e,t){hp._vChartPlugin[e]=t}static registerComponentPlugin(e,t){hp._componentPlugin[e]=t}static createChart(e,t,i){return hp._charts[e]?new(0,hp._charts[e])(t,i):null}static getChart(e){return hp._charts[e]}static createChartSpecTransformer(e,t){if(!hp._charts[e])return null;let i=hp._charts[e];return new(0,i.transformerConstructor)(Object.assign({seriesType:i.seriesType},t))}static createRegion(e,t,i){return hp._regions[e]?new(0,hp._regions[e])(t,i):null}static createRegionSpecTransformer(e,t){return hp._regions[e]?new(0,hp._regions[e].transformerConstructor)(t):null}static createSeries(e,t,i){return hp._series[e]?new(0,hp._series[e])(t,i):null}static createSeriesSpecTransformer(e,t){return hp._series[e]?new(0,hp._series[e].transformerConstructor)(t):null}static createMark(e,t,i){if(!hp._marks[e])return null;let r=new(0,hp._marks[e])(t,i);return"group"===r.type&&r.setMarkConfig({interactive:!1}),r}static getComponents(){return Object.values(hp._components)}static getComponentInKey(e){return hp._components[e].cmp}static getLayout(){return Object.values(hp._layout)}static getLayoutInKey(e){return hp._layout[e]}static getSeries(){return Object.values(hp._series)}static getSeriesInType(e){return hp._series[e]}static getRegionInType(e){return hp._regions[e]}static getAnimationInKey(e){return hp._animations[e]}static getImplementInKey(e){return hp._implements[e]}static getSeriesMarkMap(e){return hp._series[e]?hp._series[e].mark:{}}static getSeriesBuiltInTheme(e){for(let t in hp._series){let i=hp._series[t];if(i&&i.builtInTheme&&i.builtInTheme[e])return i.builtInTheme[e]}return null}static getComponentBuiltInTheme(e){for(let t in hp._components){let i=hp._components[t];if(i&&i.cmp&&i.cmp.builtInTheme&&i.cmp.builtInTheme[e])return i.cmp.builtInTheme[e]}return null}static getChartPlugins(){return Object.values(hp._chartPlugin)}static getVChartPlugins(){return Object.values(hp._vChartPlugin)}static getComponentPlugins(){return Object.values(hp._componentPlugin)}static getComponentPluginInType(e){return hp._componentPlugin[e]}static registerFormatter(e){this._formatter=e}static getFormatter(){return this._formatter}static createInteractionTrigger(e,t){let i=hp._interactionTriggers[e];return i?new i(t):null}static hasInteractionTrigger(e){return!!hp._interactionTriggers[e]}static getComposedEvent(e){return hp._composedEventMap[e]}}function hg(e,...t){return hs(hf(e),...t.map(hf))}function hf(e){var t,i;if(!e)return e;let r=((i=e.colorScheme)&&(i=Object.keys(i).reduce((e,t)=>{let r=i[t];return e[t]=(0,ri.Z)(r)?{dataScheme:r}:r,e},{})),i);return Object.assign({},e,{colorScheme:r,token:null!=(t=e.token)?t:{},series:Object.assign({},e.series)})}hp._charts={},hp._series={},hp._components={},hp._graphicComponents={},hp._marks={},hp._regions={},hp._animations={},hp._implements={},hp._chartPlugin={},hp._vChartPlugin={},hp._componentPlugin={},hp.transforms={fields:hh.X,filter:hd.h,fold:hu.g},hp.dataParser={csv:hc.UI,dsv:hc.$W,tsv:hc.mK},hp._layout={},hp._grammarTransforms={},hp._stageEventPlugins={},hp.registerStageEventPlugin=(e,t)=>{hp._stageEventPlugins[e]=t},hp.getStageEventPlugin=e=>hp._stageEventPlugins[e],hp._interactionTriggers={},hp.registerInteractionTrigger=(e,t)=>{hp._interactionTriggers[e]=t},hp._composedEventMap={},hp.registerComposedEvent=(e,t)=>{hp._composedEventMap[e]=t},hp._tooltipProcessors={},hp.registerTooltipProcessor=(e,t)=>{hp._tooltipProcessors[e]=t},hp.createTooltipProcessor=(e,t)=>{let i=hp._tooltipProcessors[e];return i?new i(t):null};let hm=[{maxDomainLength:10,scheme:["#1664FF","#1AC6FF","#FF8A00","#3CC780","#7442D4","#FFC400","#304D77","#B48DEB","#009488","#FF7DDA"]},{scheme:["#1664FF","#B2CFFF","#1AC6FF","#94EFFF","#FF8A00","#FFCE7A","#3CC780","#B9EDCD","#7442D4","#DDC5FA","#FFC400","#FAE878","#304D77","#8B959E","#B48DEB","#EFE3FF","#009488","#59BAA8","#FF7DDA","#FFCFEE"]}],hb={fontFamily:"PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,'-apple-system',segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol",fontSize:14,l1FontSize:32,l1LineHeight:"150%",l2FontSize:20,l2LineHeight:"140%",l3FontSize:16,l3LineHeight:"150%",l4FontSize:14,l4LineHeight:"150%",l5FontSize:12,l5LineHeight:"130%",l6FontSize:10,l6LineHeight:"120%"},hy={name:"light",background:{type:"palette",key:"backgroundColor"},padding:20,fontFamily:{type:"token",key:"fontFamily"},colorScheme:{default:{dataScheme:hm,palette:{backgroundColor:"#ffffff",borderColor:"#e3e5e8",shadowColor:"rgba(33,37,44,0.1)",hoverBackgroundColor:"#f1f2f5",sliderRailColor:"#f1f3f4",sliderHandleColor:"#ffffff",sliderTrackColor:"#0040ff",popupBackgroundColor:"#ffffff",primaryFontColor:"#21252c",secondaryFontColor:"#606773",tertiaryFontColor:"#89909d",axisLabelFontColor:"#89909d",disableFontColor:"#bcc1cb",axisMarkerFontColor:"#ffffff",axisGridColor:"#f1f2f5",axisDomainColor:"#d9dde4",dataZoomHandleStrokeColor:"#aeb5be",dataZoomChartColor:"#c9ced8",playerControllerColor:"#0040ff",scrollBarSliderColor:"rgba(0,0,0,0.3)",axisMarkerBackgroundColor:"#21252c",markLabelBackgroundColor:"#f1f2f5",markLineStrokeColor:"#606773",dangerColor:"#e33232",warningColor:"#ffc528",successColor:"#07a35a",infoColor:"#3073f2",discreteLegendPagerTextColor:"rgb(51, 51, 51)",discreteLegendPagerHandlerColor:"rgb(47, 69, 84)",discreteLegendPagerHandlerDisableColor:"rgb(170, 170, 170)",emptyCircleColor:"#e3e5e8",linearProgressTrackColor:"#E7EBED"}}},token:hb,component:{poptip:{visible:!0,position:"auto",padding:8,titleStyle:{fontSize:{type:"token",key:"l5FontSize"},fontWeight:"bold",fill:{type:"palette",key:"primaryFontColor"}},contentStyle:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"primaryFontColor"}},panel:{visible:!0,fill:{type:"palette",key:"popupBackgroundColor"},cornerRadius:3,lineWidth:0,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"},size:0,space:12}}},mark:{text:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1}}},markByName:{label:{style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fillOpacity:1,lineJoin:"bevel"}},area:{style:{fillOpacity:.2}},line:{style:{lineWidth:2,lineCap:"round",lineJoin:"round"}},point:{style:{size:8,stroke:{type:"palette",key:"backgroundColor"},lineWidth:1,fillOpacity:1}},word:{style:{fontWeight:null,fontSize:null}},fillingWord:{style:{fontWeight:null,fontSize:null}},barBackground:{visible:!1,style:{fill:{type:"palette",key:"primaryFontColor",a:.06},stroke:"transparent"}}},animationThreshold:2e3},hv={[hy.name]:hy},h_=hy.name,hC=new Map(Object.keys(hv).map(e=>[e,hv[e]])),hx=new Map,hw=new Map(Object.keys(hv).map(e=>[e,e===h_])),hS=(e,t)=>{if(!e)return;let i=hT(t);hC.set(e,i),hw.set(e,!0)},hA=(e=h_)=>(hw.has(e)&&!hw.get(e)&&hS(e,hC.get(e)),hC.get(e)),hk=e=>hC.delete(e)&&hx.delete(e)&&hw.delete(e),hM=e=>!!(0,r6.Z)(e)&&hC.has(e),hT=e=>{var t;return hg({},hA(null!=(t=e.type)?t:h_),e)};class hR{static registerInstance(e){hR.instances.set(e.id,e)}static unregisterInstance(e){hR.instances.delete(e.id)}static getInstance(e){return hR.instances.get(e)}static instanceExist(e){return hR.instances.has(e)}static forEach(e,t=[],i){let r=(0,ag.IX)(t);return hR.instances.forEach((t,i,n)=>{r.includes(i)||e(t,i,n)},i)}}hR.instances=new Map;class hE{static registerTheme(e,t){hS(e,t)}static getTheme(e,t=!1){return hA(e)}static removeTheme(e){return hk(e)}static themeExist(e){return hM(e)}static getDefaultTheme(){return hE.themes.get(h_)}static setCurrentTheme(e){hE.themeExist(e)&&(hE._currentThemeName=e,hR.forEach(t=>null==t?void 0:t.setCurrentTheme(e)))}static getCurrentTheme(e=!1){return hE.getTheme(hE._currentThemeName,e)}static getCurrentThemeName(){return hE._currentThemeName}}function hP(e){return(0,r6.Z)(e)?hE.themeExist(e)?hE.getTheme(e):{}:(0,r9.Z)(e)?e:{}}hE.themes=hC,hE._currentThemeName=h_;class hB{getComposedEventMap(){return this._composedEventMap}constructor(e,t){this._composedEventMap=new Map,this._eventDispatcher=e,this._mode=t}on(e,t,i){let r="function"==typeof t?{query:null,callback:t}:{query:t,callback:i},n=hp.getComposedEvent(e);if(n){let t=new n(this._eventDispatcher,this._mode);t.register(e,r),this._composedEventMap.set(i,{eventType:e,event:t})}else this._eventDispatcher.register(e,r);return this}off(e,t,i){var r,n;let l=null!=i?i:t;if(hp.getComposedEvent(e))if(l)null==(r=this._composedEventMap.get(l))||r.event.unregister(),this._composedEventMap.delete(l);else for(let t of this._composedEventMap.entries())t[1].eventType===e&&(null==(n=this._composedEventMap.get(t[0]))||n.event.unregister(),this._composedEventMap.delete(t[0]));else if(l){let i={callback:l,query:null,filter:{nodeName:null,type:e,level:null,source:t.source,markName:null,filter:null,userId:null}};this._eventDispatcher.unregister(e,i)}else this._eventDispatcher.unregister(e);return this}emit(e,t,i){return this._eventDispatcher.dispatch(e,t,i),this}prevent(e,t){return this._eventDispatcher.prevent(e,t),this}allow(e){return this._eventDispatcher.allow(e),this}release(){this._eventDispatcher.clear(),this._composedEventMap.clear()}}(m=Z||(Z={})).BEFORE_EVALUATE_DATA="beforeEvaluateData",m.AFTER_EVALUATE_DATA="afterEvaluateData",m.BEFORE_EVALUATE_SCALE="beforeEvaluateScale",m.AFTER_EVALUATE_SCALE="afterEvaluateScale",m.BEFORE_PARSE_VIEW="beforeParseView",m.AFTER_PARSE_VIEW="afterParseView",m.BEFORE_TRANSFORM="beforeTransform",m.AFTER_TRANSFORM="afterTransform",m.BEFORE_CREATE_VRENDER_STAGE="beforeCreateVRenderStage",m.AFTER_CREATE_VRENDER_STAGE="afterCreateVRenderStage",m.BEFORE_CREATE_VRENDER_LAYER="beforeCreateVRenderLayer",m.AFTER_CREATE_VRENDER_LAYER="afterCreateVRenderLayer",m.BEFORE_STAGE_RESIZE="beforeStageResize",m.AFTER_STAGE_RESIZE="afterStageResize",m.BEFORE_VRENDER_DRAW="beforeVRenderDraw",m.AFTER_VRENDER_DRAW="afterVRenderDraw",m.BEFORE_MARK_JOIN="beforeMarkJoin",m.AFTER_MARK_JOIN="afterMarkJoin",m.BEFORE_MARK_UPDATE="beforeMarkUpdate",m.AFTER_MARK_UPDATE="afterMarkUpdate",m.BEFORE_MARK_STATE="beforeMarkState",m.AFTER_MARK_STATE="afterMarkState",m.BEFORE_MARK_ENCODE="beforeMarkEncode",m.AFTER_MARK_ENCODE="afterMarkEncode",m.BEFORE_DO_LAYOUT="beforeDoLayout",m.AFTER_DO_LAYOUT="afterDoLayout",m.BEFORE_MARK_LAYOUT_END="beforeMarkLayoutEnd",m.AFTER_MARK_LAYOUT_END="afterMarkLayoutEnd",m.BEFORE_DO_RENDER="beforeDoRender",m.AFTER_DO_RENDER="afterDoRender",m.BEFORE_MARK_RENDER_END="beforeMarkRenderEnd",m.AFTER_MARK_RENDER_END="afterMarkRenderEnd",m.BEFORE_CREATE_VRENDER_MARK="beforeCreateVRenderMark",m.AFTER_CREATE_VRENDER_MARK="afterCreateVRenderMark",m.BEFORE_ADD_VRENDER_MARK="beforeAddVRenderMark",m.AFTER_ADD_VRENDER_MARK="afterAddVRenderMark",m.AFTER_VRENDER_NEXT_RENDER="afterVRenderNextRender",m.BEFORE_ELEMENT_UPDATE_DATA="beforeElementUpdateData",m.AFTER_ELEMENT_UPDATE_DATA="afterElementUpdateData",m.BEFORE_ELEMENT_STATE="beforeElementState",m.AFTER_ELEMENT_STATE="afterElementState",m.BEFORE_ELEMENT_ENCODE="beforeElementEncode",m.AFTER_ELEMENT_ENCODE="afterElementEncode",m.ANIMATION_START="animationStart",m.ANIMATION_END="animationEnd",m.ELEMENT_ANIMATION_START="elementAnimationStart",m.ELEMENT_ANIMATION_END="elementAnimationEnd",m.ALL_ANIMATION_START="allAnimationStart",m.ALL_ANIMATION_END="allAnimationEnd";let hI=["pointerdown","pointerup","pointerupoutside","pointertap","pointerover","pointermove","pointerenter","pointerleave","pointerout","mousedown","mouseup","mouseupoutside","rightdown","rightup","rightupoutside","click","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave","wheel","touchstart","touchend","touchendoutside","touchmove","touchcancel","tap","dragstart","drag","dragenter","dragleave","dragover","dragend","drop","pan","panstart","panend","press","pressup","pressend","pinch","pinchstart","pinchend","swipe"];(b=N||(N={})).initialized="initialized",b.rendered="rendered",b.renderFinished="renderFinished",b.animationFinished="animationFinished",b.regionSeriesDataFilterOver="regionSeriesDataFilterOver",b.afterInitData="afterInitData",b.afterInitEvent="afterInitEvent",b.afterInitMark="afterInitMark",b.rawDataUpdate="rawDataUpdate",b.viewDataFilterOver="viewDataFilterOver",b.viewDataUpdate="viewDataUpdate",b.viewDataStatisticsUpdate="viewDataStatisticsUpdate",b.markDeltaYUpdate="markDeltaYUpdate",b.viewDataLabelUpdate="viewDataLabelUpdate",b.scaleDomainUpdate="scaleDomainUpdate",b.scaleRawDomainUpdate="scaleRawDomainUpdate",b.scaleUpdate="scaleUpdate",b.dataZoomChange="dataZoomChange",b.drill="drill",b.layoutStart="layoutStart",b.layoutEnd="layoutEnd",b.layoutRectUpdate="layoutRectUpdate",b.playerPlay="playerPlay",b.playerPause="playerPause",b.playerEnd="playerEnd",b.playerChange="playerChange",b.playerForward="playerForward",b.playerBackward="playerBackward",b.scrollBarChange="scrollBarChange",b.brushStart="brushStart",b.brushChange="brushChange",b.brushEnd="brushEnd",b.brushClear="brushClear",b.brushActive="brushActive",b.legendSelectedDataChange="legendSelectedDataChange",b.legendFilter="legendFilter",b.legendItemClick="legendItemClick",b.legendItemHover="legendItemHover",b.legendItemUnHover="legendItemUnHover",b.tooltipShow="tooltipShow",b.tooltipHide="tooltipHide",b.tooltipRelease="tooltipRelease",b.afterResize="afterResize",b.afterRender="afterRender",b.afterLayout="afterLayout",b.afterMarkLayoutEnd="afterMarkLayoutEnd",b.afterWordcloudShapeDraw="afterWordcloudShapeDraw",(y=$||($={})).chart="chart",y.window="window",y.canvas="canvas",(v=j||(j={})).vchart="vchart",v.chart="chart",v.model="model",v.mark="mark";let hL=[j.mark,j.model,j.chart,j.vchart];class hF{constructor(){this._map=new Map,this._levelNodes=new Map,this._levelNodes.set(j.vchart,[]),this._levelNodes.set(j.chart,[]),this._levelNodes.set(j.model,[]),this._levelNodes.set(j.mark,[])}addHandler(e,t){var i;let r={level:t,handler:e};return null==(i=this._levelNodes.get(t))||i.push(r),this._map.set(e.callback,r),this}removeHandler(e){let t=this._map.get(e.callback);if(!t)return this;this._map.delete(e.callback);let i=this._levelNodes.get(t.level),r=null==i?void 0:i.findIndex(t=>t.handler.callback===e.callback);return void 0!==r&&r>=0&&(null==i||i.splice(r,1)),this}preventHandler(e){return e&&(e.prevented=!0),this}allowHandler(e){return e&&(e.prevented=!1),this}getHandlers(e){var t;return(null==(t=this._levelNodes.get(e))?void 0:t.map(e=>e.handler))||[]}getAllHandlers(){return Array.from(this._map.values()).map(e=>e.handler)||[]}getCount(){return this._map.size}release(){this._map.clear(),this._levelNodes.clear()}}var hH=i(25397),hO=i(49275),hD=i(80204);let hz=e=>"line"===e||"area"===e,hW=e=>{if(!e||!e.context)return null;let{data:t,markType:i}=e.context;return"line"===i||"area"===i?t:null==t?void 0:t[0]},hZ=(e,t)=>{let i=t;for(;(null==i?void 0:i.parent)&&i.parent!==e;)if((i=i.parent).context)return i;return null},hN=(e,t)=>{let i=e.getAttributes(!0),r={};return Object.keys(t).forEach(e=>{i[e]!==t[e]&&(r[e]=t[e])}),r},h$={cartesianAxis:"axis","cartesianAxis-band":"axis","cartesianAxis-linear":"axis","cartesianAxis-time":"axis",polarAxis:"axis","polarAxis-band":"axis","polarAxis-linear":"axis",discreteLegend:"legend",continuousLegend:"legend",colorLegend:"legend",sizeLegend:"legend"};class hj{constructor(e,t){this._viewBubbles=new Map,this._windowBubbles=new Map,this._canvasBubbles=new Map,this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this._onDelegate=e=>{var t;let i=this.globalInstance.getChart(),r=(0,oV.Z)(e.modelId)&&(null==i?void 0:i.getModelById(e.modelId))||void 0,n=(0,oV.Z)(e.markId)&&(null==i?void 0:i.getMarkById(e.markId))||null,l=(0,hH.Z)(e.event,"target"),o=e.datum;r&&"component"===r.modelType&&(o=null!=(t=r.getDatum(l))?t:o);let a={event:e.event,item:e.item,source:e.source,datum:o,chart:i,model:r,mark:null!=n?n:void 0,node:l};this.dispatch(e.type,a)},this._onDelegateInteractionEvent=e=>{let t=this.globalInstance.getChart(),i=e.event,r=null;i.graphics&&(r=i.graphics);let n={event:e.event,chart:t,graphics:r,datums:r&&r.map(e=>hW(e))};this.dispatch(e.type,n)},this.globalInstance=e,this._compiler=t}register(e,t){var i,r,n,l,o;this._parseQuery(t);let a=this.getEventBubble((null==(i=t.filter)?void 0:i.source)||$.chart),s=this.getEventListeners((null==(r=t.filter)?void 0:r.source)||$.chart);if(a.get(e)||a.set(e,new hF),a.get(e).addHandler(t,null==(n=t.filter)?void 0:n.level),this._isValidEvent(e)&&!s.has(e)){let i=this._onDelegate.bind(this);this._compiler.addEventListener(null==(l=t.filter)?void 0:l.source,e,i),s.set(e,i)}else if(this._isInteractionEvent(e)&&!s.has(e)){let i=this._onDelegateInteractionEvent.bind(this);this._compiler.addEventListener(null==(o=t.filter)?void 0:o.source,e,i),s.set(e,i)}return this}unregister(e,t){var i,r,n,l;let o=!1,a=this.getEventBubble((null==(i=null==t?void 0:t.filter)?void 0:i.source)||$.chart),s=this.getEventListeners((null==(r=null==t?void 0:t.filter)?void 0:r.source)||$.chart);if(t){let i=a.get(e);null==i||i.removeHandler(t),0===(null==i?void 0:i.getCount())&&(null==i||i.release(),a.delete(e),o=!0),(null==(n=null==t?void 0:t.wrappedCallback)?void 0:n.cancel)&&t.wrappedCallback.cancel()}else{let t=a.get(e);null==t||t.release(),a.delete(e),o=!0}if(o&&this._isValidEvent(e)){let i=s.get(e);this._compiler.removeEventListener((null==(l=null==t?void 0:t.filter)?void 0:l.source)||$.chart,e,i),s.delete(e)}return this}dispatch(e,t,i){let r=this.getEventBubble(t.source||$.chart).get(e);if(!r)return this;let n=!1;if(i){let l=r.getHandlers(i);n=this._invoke(l,e,t)}else{let i=0;for(;!n&&i<hL.length;)n=this._invoke(r.getHandlers(hL[i]),e,t),i++}return this}prevent(e,t){return["canvas","chart","window"].forEach(i=>{let r=this.getEventBubble(i).get(e);r&&r.getAllHandlers().forEach(e=>{t?hL.indexOf(e.filter.level)<hL.indexOf(t.level)&&e.callback!==t.handler&&r.preventHandler(e):r.preventHandler(e)})}),this}allow(e){return["canvas","chart","window"].forEach(t=>{let i=this.getEventBubble(t).get(e);i&&i.getAllHandlers().forEach(e=>i.allowHandler(e))}),this}clear(){[$.chart,$.window,$.canvas].forEach(e=>{let t=this.getEventListeners(e);for(let i of t.entries())this._compiler.removeEventListener(e,i[0],i[1]);t.clear()}),[this._viewBubbles,this._windowBubbles,this._canvasBubbles].forEach(e=>{for(let t of e.values())t.release();e.clear()})}release(){this.clear(),this.globalInstance=null,this._compiler=null}_filter(e,t,i){var r,n,l;if((0,nr.Z)(e.filter)&&!e.filter(i)||e.nodeName&&(0,hH.Z)(i,"node.name")!==e.nodeName||e.markName&&(null==(r=null==i?void 0:i.mark)?void 0:r.name)!==e.markName)return!1;let o=null==(n=i.model)?void 0:n.type;return h$[o]&&(o=h$[o]),(!e.type||o===e.type)&&!("mark"===e.level&&!e.type&&!(null==i?void 0:i.mark))&&!("model"===e.level&&!e.type&&!(null==i?void 0:i.model))&&(!(0,oV.Z)(e.userId)||(null==(l=i.model)?void 0:l.userId)===e.userId)}_invoke(e,t,i){return e.map(e=>{var r,n,l;let o=e.filter;if(!e.prevented&&(!e.query||this._filter(o,t,i))){let t=(e.wrappedCallback||e.callback).call(null,Object.assign({},i)),o=null!=t?t:null==(r=e.query)?void 0:r.consume;return o&&(null==(n=i.event)||n.stopPropagation(),null==(l=i.event)||l.preventDefault()),!!o}}).some(e=>!0===e)}_getQueryLevel(e){return e?e.level?e.level:(0,oV.Z)(e.id)?j.model:j.vchart:j.vchart}_parseQuery(e){var t;let i=e.query;(null==i?void 0:i.throttle)?e.wrappedCallback=(0,hO.Z)(e.callback,i.throttle):(null==i?void 0:i.debounce)&&(e.wrappedCallback=(0,hD.Z)(e.callback,i.debounce));let r=this._getQueryLevel(i),n=null,l=$.chart,o=null,a=null,s=null;return(null==i?void 0:i.nodeName)&&(o=i.nodeName),(null==i?void 0:i.markName)&&(a=i.markName),(null==i?void 0:i.type)&&(r===j.model||r===j.mark)&&(n=i.type),(null==i?void 0:i.source)&&(l=i.source),(0,oV.Z)(null==i?void 0:i.id)&&(s=null==i?void 0:i.id,r=j.model),e.filter={level:r,markName:a,type:n,source:l,nodeName:o,userId:s,filter:null!=(t=null==i?void 0:i.filter)?t:null},e}getEventBubble(e){switch(e){case $.chart:return this._viewBubbles;case $.window:return this._windowBubbles;case $.canvas:return this._canvasBubbles;default:return this._viewBubbles}}getEventListeners(e){switch(e){case $.chart:return this._viewListeners;case $.window:return this._windowListeners;case $.canvas:return this._canvasListeners;default:return this._viewListeners}}_isValidEvent(e){return hI.includes(e)||Object.values(Z).includes(e)}_isInteractionEvent(e){let t;return e&&(t=e.split(":")[0])&&hp.hasInteractionTrigger(t)}}var hG=i(58809),hV=i(26665),hU=i(49527);function hK(e,t,i){e.getTransform(t)||e.registerTransform(t,i)}function hX(e,t,i){e.getParser(t)||e.registerParser(t,i)}let hY=new Map;function hq(e,t,i={type:"geojson",centroid:!0}){hY.has(e)&&s1(`map type of '${e}' already exists, will be overwritten.`),h||(hX(h=new tp.q,"geojson",hG.bL),hX(h,"topojson",hV.Q),hK(h,"simplify",hU.o));let r=new tf.V(h),n=(0,ha.Z)({},{centroid:!0,simplify:!1},i);"topojson"===i.type?r.parse(t,{type:"topojson",options:n}):r.parse(t,{type:"geojson",options:n});let{simplify:l}=i;!0===l?r.transform({type:"simplify"}):(0,r9.Z)(l)&&r.transform({type:"simplify",options:l}),hY.set(e,r)}function hJ(e){hY.has(e)?hY.delete(e):s1(`map type of '${e}' does not exists.`)}var hQ=i(65755);function h0(e,t=!1){let i=t;return e.latestData instanceof tf.V&&(i=!1),i?(0,hQ.Z)(e.latestData):e.latestData&&e.latestData.slice()}let h1=(e,t)=>0===e.length?[]:1===e.length?h0(e[0],null==t?void 0:t.deep):e.map(e=>h0(e,null==t?void 0:t.deep));function h2(e,t,i){hK(t=t instanceof tp.q?t:e.dataSet,"copyDataView",h1);let r=new tf.V(t,i);return r.parse([e],{type:"dataview"}),r.transform({type:"copyDataView",level:G.copyDataView}),r}function h3(e,t,i=[]){let r;if(e instanceof tf.V)return e;let{id:n,values:l=[],fromDataIndex:o,fromDataId:a,transforms:s=[]}=e,h=e.parser?(0,hQ.Z)(e.parser):{clone:!0},d=(0,hQ.Z)(e.fields);h.clone=!1!==h.clone;let u=i.find(e=>e.name===n);if(u)r=u;else{let e={name:n};if(d&&(e.fields=d),r=new tf.V(t,e),"string"==typeof a){let e=i.find(e=>e.name===a);if(!e)return s1(`no data matches fromDataId ${a}`),null;r.parse([e],{type:"dataview"}),r.transform({type:"copyDataView"})}else if("number"==typeof o){let e=i[o];if(!e)return s1(`no data matches fromDataIndex ${o}`),null;r.parse([e],{type:"dataview"}),r.transform({type:"copyDataView"})}else Array.isArray(l)?r.parse(l,h):(0,r6.Z)(l)&&(!h||["csv","dsv","tsv"].includes(h.type))?r.parse(l,null!=h?h:{type:"csv"}):(r.parse([]),s1("values should be array"));s&&s.length&&s.forEach(e=>{t.getTransform(e.type)&&r.transform(e)})}return r}function h4(e,t,i){e&&(t.fields&&e.setFields(t.fields,i),e.parseNewData(t.values,t.parser))}(_=G||(G={}))[_.copyDataView=-10]="copyDataView",_[_.treemapFilter=-8]="treemapFilter",_[_.treemapFlatten=-7]="treemapFlatten",_[_.dotObjFlat=-7]="dotObjFlat",_[_.linkDotInfo=-7]="linkDotInfo",_[_.sankeyLayout=-7]="sankeyLayout",_[_.dataZoomFilter=-6]="dataZoomFilter",_[_.legendFilter=-5]="legendFilter",(C=V||(V={})).appear="appear",C.disappear="disappear",C.enter="enter",C.update="update",C.state="state",C.exit="exit",C.normal="normal",C.none="none",(x=U||(U={})).before="before",x.layouting="layouting",x.reevaluate="reevaluate",x.after="after";var h5=i(36123),h6=i(56073);class h8 extends nl{constructor(){super(...arguments),this.client={x:0,y:0},this.movement={x:0,y:0},this.offset={x:0,y:0},this.global={x:0,y:0},this.screen={x:0,y:0}}get clientX(){return this.client.x}get clientY(){return this.client.y}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,r,n,l,o,a,s,h,d,u,c,p,g){throw Error("Method not implemented.")}}class h7 extends h8{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw Error("getPredictedEvents is not supported!")}clone(){var e,t,i;let r=new h7(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,null==(e=this.manager)||e.copyPointerData(this,r),null==(t=this.manager)||t.copyMouseData(this,r),null==(i=this.manager)||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();let n=this.composedDetailPath();return r.detailPath=n&&n.slice(),r.type=this.type,r}}class h9 extends h8{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}clone(){var e,t,i;let r=new h9(this.manager);r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.detailPath=[],r.target=null,r.nativeEvent=this.nativeEvent,r.originalEvent=this.originalEvent,null==(e=this.manager)||e.copyWheelData(this,r),null==(t=this.manager)||t.copyMouseData(this,r),null==(i=this.manager)||i.copyData(this,r),r.target=this.target,r.path=this.composedPath().slice();let n=this.composedDetailPath();return r.detailPath=n&&n.slice(),r.type=this.type,r}}h9.DOM_DELTA_PIXEL=0,h9.DOM_DELTA_LINE=1,h9.DOM_DELTA_PAGE=2;let de="object"==typeof performance&&performance.now?performance:Date;function dt(e){return"mouse"===e||"pen"===e}class di{constructor(e,t){this.dispatch=new(nt()),this.cursorTarget=null,this.pauseNotify=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.onPointerDown=(e,t)=>{if(!(e instanceof h7))return void t1.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.createPointerEvent(e,e.type,t);if(this.dispatchEvent(i,"pointerdown"),"touch"===i.pointerType)this.dispatchEvent(i,"touchstart");else if(dt(i.pointerType)){let e=2===i.button;this.dispatchEvent(i,e?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=i.composedPath(),this.freeEvent(i)},this.onPointerMove=(e,t)=>{var i,r;if(!(e instanceof h7))return void t1.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let n=this.createPointerEvent(e,e.type,t),l=dt(n.pointerType),o=this.trackingData(e.pointerId),a=this.findMountedTarget(o.overTargets);if(o.overTargets&&a&&a!==this.rootTarget&&a!==n.target){let t="mousemove"===e.type?"mouseout":"pointerout",i=this.createPointerEvent(e,t,a||void 0);if(this.dispatchEvent(i,"pointerout"),l&&this.dispatchEvent(i,"mouseout"),!n.composedPath().includes(a)){let t=this.createPointerEvent(e,"pointerleave",a||void 0);for(t.eventPhase=t.AT_TARGET;t.target&&!n.composedPath().includes(t.target);)t.currentTarget=t.target,this.notifyTarget(t),l&&this.notifyTarget(t,"mouseleave"),t.target=t.target.parent;this.freeEvent(t)}this.freeEvent(i)}if(a!==n.target){let t="mousemove"===e.type?"mouseover":"pointerover",i=this.clonePointerEvent(n,t);this.dispatchEvent(i,"pointerover"),l&&this.dispatchEvent(i,"mouseover");let r=null==a?void 0:a.parent;for(;r&&r!==this.rootTarget.parent&&r!==n.target;)r=r.parent;if(!r||r===this.rootTarget.parent){let e=this.clonePointerEvent(n,"pointerenter");e.eventPhase=e.AT_TARGET;let t=e.target,i=new Set,r=a;for(;r&&r!==this.rootTarget;)i.add(r),r=r.parent;for(;t&&t!==a&&t!==this.rootTarget.parent;)i.has(t)||(e.currentTarget=t,this.notifyTarget(e),l&&this.notifyTarget(e,"mouseenter")),t=t.parent;this.freeEvent(e)}this.freeEvent(i)}this.dispatchEvent(n,"pointermove"),"touch"===n.pointerType&&this.dispatchEvent(n,"touchmove"),l&&(this.dispatchEvent(n,"mousemove"),this.cursorTarget=n.target,this.cursor=(null==(r=null==(i=n.target)?void 0:i.attribute)?void 0:r.cursor)||this.rootTarget.getCursor()),o.overTargets=n.composedPath(),this.freeEvent(n)},this.onPointerOver=(e,t)=>{var i,r;if(!(e instanceof h7))return void t1.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let n=this.trackingData(e.pointerId),l=this.createPointerEvent(e,e.type,t),o=dt(l.pointerType);this.dispatchEvent(l,"pointerover"),o&&this.dispatchEvent(l,"mouseover"),"mouse"===l.pointerType&&(this.cursorTarget=l.target,this.cursor=(null==(r=null==(i=l.target)?void 0:i.attribute)?void 0:r.cursor)||this.rootTarget.getCursor());let a=this.clonePointerEvent(l,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),o&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;n.overTargets=l.composedPath(),this.freeEvent(l),this.freeEvent(a)},this.onPointerOut=(e,t)=>{if(!(e instanceof h7))return void t1.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(e.pointerId);if(i.overTargets){let t=dt(e.pointerType),r=this.findMountedTarget(i.overTargets),n=this.createPointerEvent(e,"pointerout",r||void 0);this.dispatchEvent(n),t&&this.dispatchEvent(n,"mouseout");let l=this.createPointerEvent(e,"pointerleave",r||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==this.rootTarget.parent;)l.currentTarget=l.target,this.notifyTarget(l),t&&this.notifyTarget(l,"mouseleave"),l.target=l.target.parent;i.overTargets=[],this.freeEvent(n),this.freeEvent(l)}this.cursorTarget=null,this.cursor=""},this.onPointerUp=(e,t)=>{var i;if(!(e instanceof h7))return void t1.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let r=de.now(),n=this.createPointerEvent(e,e.type,t);if(this.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)this.dispatchEvent(n,"touchend");else if(dt(n.pointerType)){let e=2===n.button;this.dispatchEvent(n,e?"rightup":"mouseup")}let l=this.trackingData(e.pointerId),o=this.findMountedTarget(l.pressTargetsByButton[e.button]),a=o;if(o&&!n.composedPath().includes(o)){let t=o;for(;t&&!n.composedPath().includes(t);){if(n.currentTarget=t,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)this.notifyTarget(n,"touchendoutside");else if(dt(n.pointerType)){let e=2===n.button;this.notifyTarget(n,e?"rightupoutside":"mouseupoutside")}t=t.parent}delete l.pressTargetsByButton[e.button],a=t}if(a){let t=this.clonePointerEvent(n,"click");t.target=a,t.path=[],t.detailPath=[],l.clicksByButton[e.button]||(l.clicksByButton[e.button]={clickCount:0,target:t.target,timeStamp:r});let o=l.clicksByButton[e.button];o.target===t.target&&r-o.timeStamp<(null!=(i=this._config.clickInterval)?i:200)?++o.clickCount:o.clickCount=1,o.target=t.target,o.timeStamp=r,t.detail=o.clickCount,dt(t.pointerType)?(this.dispatchEvent(t,"click"),2===o.clickCount&&this.dispatchEvent(t,"dblclick")):"touch"===t.pointerType&&this._config.supportsTouchEvents&&(this.dispatchEvent(t,"tap"),2===o.clickCount&&this.dispatchEvent(t,"dbltap")),this.dispatchEvent(t,"pointertap"),this.freeEvent(t)}this.freeEvent(n)},this.onPointerUpOutside=(e,t)=>{if(!(e instanceof h7))return void t1.Y.getInstance().warn("EventManager cannot map a non-pointer event as a pointer event");let i=this.trackingData(e.pointerId),r=this.findMountedTarget(i.pressTargetsByButton[e.button]),n=this.createPointerEvent(e,e.type,t);if(r){let t=r;for(;t;)n.currentTarget=t,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):dt(n.pointerType)&&this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),t=t.parent;delete i.pressTargetsByButton[e.button]}this.freeEvent(n)},this.onWheel=(e,t)=>{if(!(e instanceof h9))return void t1.Y.getInstance().warn("EventManager cannot map a non-wheel event as a wheel event");let i=this.createWheelEvent(e,t);this.dispatchEvent(i),this.freeEvent(i)},this.rootTarget=e,this.mappingTable={},this._config=Object.assign({clickInterval:200},t),this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((e,t)=>e.priority-t.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){var t,i,r,n,l,o,a;let s;if(!this.rootTarget)return;let h=this.mappingTable[e.type],d=`${e.canvasX}-${e.canvasY}`;if((null==(t=this._prePointTargetCache)?void 0:t[d])&&(null==(r=null==(i=this._prePointTargetCache)?void 0:i[d])?void 0:r.stage)&&(null==(l=null==(n=this._prePointTargetCache)?void 0:n[d])?void 0:l.stage.renderCount)===(null==(o=this._prePointTargetCache)?void 0:o.stageRenderCount)?s=this._prePointTargetCache[d]:(s=this.pickTarget(e.viewX,e.viewY,e),e.pickParams||(this._prePointTargetCache={[d]:s,stageRenderCount:null!=(a=null==s?void 0:s.stage.renderCount)?a:-1})),h)for(let t=0,i=h.length;t<i;t++)h[t].fn(e,s);else t1.Y.getInstance().warn(`[EventManager]: Event mapping not defined for ${e.type}`)}propagate(e,t){if(!e.target)return;let i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,n=i.length-1;r<n;r++)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}propagationPath(e){let t=[e];for(let i=0;i<2048&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}notifyTarget(e,t){if(this.pauseNotify)return;t=null!=t?t:e.type;let i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){var r,n;let l=this.allocateEvent(h7);return this.copyPointerData(e,l),this.copyMouseData(e,l),this.copyData(e,l),l.nativeEvent=e.nativeEvent,l.originalEvent=e,l.target=i||this.pickTarget(null!=(r=l.viewX)?r:l.global.x,null!=(n=l.viewY)?n:l.global.y,l),"string"==typeof t&&(l.type=t),l}createWheelEvent(e,t){var i,r;let n=this.allocateEvent(h9);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=t||this.pickTarget(null!=(i=n.viewX)?i:n.global.x,null!=(r=n.viewY)?r:n.global.y,n),n}clonePointerEvent(e,t){let i=this.allocateEvent(h7);i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice();let r=e.composedDetailPath();return i.detailPath=r&&r.slice(),i.type=null!=t?t:i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof h7&&t instanceof h7&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof h8&&t instanceof h8&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.ctrlKey=e.ctrlKey,t.shiftKey=e.shiftKey,t.metaKey=e.metaKey,["client","movement","canvas","screen","global","offset","viewport"].forEach(i=>{t[i].x=e[i].x,t[i].y=e[i].y}))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=de.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.x=e.layer.x,t.layer.y=e.layer.y,t.page.x=e.page.x,t.page.y=e.page.y,t.pickParams=e.pickParams}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){var t;this.eventPool.has(e)||this.eventPool.set(e,[]);let i=(null==(t=this.eventPool.get(e))?void 0:t.pop())||new e(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=[],i.detailPath=[],i.target=null,i}freeEvent(e){var t;if(e.manager!==this)throw Error("It is illegal to free an event not managed by this EventManager!");let i=e.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),null==(t=this.eventPool.get(i))||t.push(e)}notifyListeners(e,t){let i=e.currentTarget._events[t];if(i)if("fn"in i)i.once&&e.currentTarget.removeEventListener(t,i.fn,{once:!0}),i.fn.call(i.context,e);else for(let r=0,n=i.length;r<n&&!e.propagationImmediatelyStopped;r++)i[r].once&&e.currentTarget.removeEventListener(t,i[r].fn,{once:!0}),i[r].fn.call(i[r].context,e);this.emitDelegation(e,t)}emitDelegation(e,t){let i=e.currentTarget._events["*"];if(i)if("fn"in i)i.fn.call(i.context,e,t);else for(let r=0,n=i.length;r<n&&!e.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,e,t)}pickTarget(e,t,i){let r,n=this.rootTarget.pick(e,t);return r=n&&n.graphic?n.graphic:n&&n.group?n.group:this.rootTarget.AABBBounds.contains(e,t)?this.rootTarget:null,i&&(i.pickParams=n.params),r}release(){this.dispatch.removeAllListeners(),this.eventPool.clear(),this.rootTarget=null,this.mappingTable=null,this.mappingState=null,this.cursorTarget=null}}let dr={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class dn{constructor(e){this.resolution=1,this.onPointerDown=e=>{if(this.supportsTouchEvents&&"touch"===e.pointerType)return;let t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(!e.cancelable&&"cancelable"in e||e.preventDefault());for(let e=0,i=t.length;e<i;e++){let i=t[e],r=this.bootstrapEvent(this.rootPointerEvent,i);this.manager.mapEvent(r)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerMove=e=>{if(this.supportsTouchEvents&&"touch"===e.pointerType||this.isEventOutsideOfTargetElement(e))return;let t=this.normalizeToPointerData(e);for(let e=0,i=t.length;e<i;e++){let i=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerUp=e=>{if(this.supportsTouchEvents&&"touch"===e.pointerType)return;let t=this.isEventOutsideOfTargetViewPort(e)?"outside":"",i=this.normalizeToPointerData(e);for(let e=0,r=i.length;e<r;e++){let r=this.bootstrapEvent(this.rootPointerEvent,i[e]);r.type+=t,this.manager.mapEvent(r)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onPointerOverOut=e=>{if(this.supportsTouchEvents&&"touch"===e.pointerType)return;let t=this.normalizeToPointerData(e);for(let e=0,i=t.length;e<i;e++){let i=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.manager.mapEvent(i)}this.setCursor(this.manager.cursor,this.manager.cursorTarget),this.rootPointerEvent.nativeEvent=null},this.onWheel=e=>{let t=this.normalizeWheelEvent(e);this.manager.mapEvent(t)};let{targetElement:t,resolution:i,rootNode:r,global:n,autoPreventDefault:l=!1,clickInterval:o,supportsTouchEvents:a=n.supportsTouchEvents,supportsPointerEvents:s=n.supportsPointerEvents}=e;this.manager=new di(r,{clickInterval:o,supportsTouchEvents:a}),this.globalObj=n,this.supportsPointerEvents=s,this.supportsTouchEvents=a,this.supportsMouseEvents=n.supportsMouseEvents,this.applyStyles=n.applyStyles,this.autoPreventDefault=l,this.eventsAdded=!1,this.rootPointerEvent=new h7,this.rootWheelEvent=new h9,this.cursorStyles={default:"inherit",pointer:"pointer"},this.resolution=i,this.setTargetElement(t)}release(){this.removeEvents(),this.manager&&this.manager.release(),this.domElement=null,this.manager=null,this.globalObj=null}setCursor(e,t){if(!t&&!this.manager.rootTarget.window._handler.canvas.controled)return;e||(e="default");let{applyStyles:i,domElement:r}=this;if(this.currentCursor===e)return;this.currentCursor=e;let n=this.cursorStyles[e];n?"string"==typeof n&&i?r.style.cursor=n:"function"==typeof n?n(e):"object"==typeof n&&i&&Object.assign(r.style,n):i&&(0,r6.Z)(e)&&!(0,h5.Z)(this.cursorStyles,e)&&(r.style.cursor=e)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;let{globalObj:e,domElement:t}=this;this.supportsPointerEvents?(e.getDocument()?(e.addEventListener("pointermove",this.onPointerMove,!0),e.addEventListener("pointerup",this.onPointerUp,!0)):(t.addEventListener("pointermove",this.onPointerMove,!0),t.addEventListener("pointerup",this.onPointerUp,!0)),t.addEventListener("pointerdown",this.onPointerDown,!0),t.addEventListener("pointerleave",this.onPointerOverOut,!0),t.addEventListener("pointerover",this.onPointerOverOut,!0)):(e.getDocument()?(e.addEventListener("mousemove",this.onPointerMove,!0),e.addEventListener("mouseup",this.onPointerUp,!0)):(t.addEventListener("mousemove",this.onPointerMove,!0),t.addEventListener("mouseup",this.onPointerUp,!0)),t.addEventListener("mousedown",this.onPointerDown,!0),t.addEventListener("mouseout",this.onPointerOverOut,!0),t.addEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(t.addEventListener("touchstart",this.onPointerDown,!0),t.addEventListener("touchend",this.onPointerUp,!0),t.addEventListener("touchmove",this.onPointerMove,!0)),t.addEventListener("wheel",this.onWheel,{capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;let{globalObj:e,domElement:t}=this;this.supportsPointerEvents?(e.getDocument()?(e.removeEventListener("pointermove",this.onPointerMove,!0),e.removeEventListener("pointerup",this.onPointerUp,!0)):(t.removeEventListener("pointermove",this.onPointerMove,!0),t.removeEventListener("pointerup",this.onPointerUp,!0)),t.removeEventListener("pointerdown",this.onPointerDown,!0),t.removeEventListener("pointerleave",this.onPointerOverOut,!0),t.removeEventListener("pointerover",this.onPointerOverOut,!0)):(e.getDocument()?(e.removeEventListener("mousemove",this.onPointerMove,!0),e.removeEventListener("mouseup",this.onPointerUp,!0)):(t.removeEventListener("mousemove",this.onPointerMove,!0),t.removeEventListener("mouseup",this.onPointerUp,!0)),t.removeEventListener("mousedown",this.onPointerDown,!0),t.removeEventListener("mouseout",this.onPointerOverOut,!0),t.removeEventListener("mouseover",this.onPointerOverOut,!0)),this.supportsTouchEvents&&(t.removeEventListener("touchstart",this.onPointerDown,!0),t.removeEventListener("touchend",this.onPointerUp,!0),t.removeEventListener("touchmove",this.onPointerMove,!0)),t.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapToViewportPoint(e){return this.domElement.pointTransform?this.domElement.pointTransform(e.x,e.y):e}mapToCanvasPoint(e){var t,i;let r=null==(t=this.globalObj)?void 0:t.mapToCanvasPoint(e,this.domElement);if(r)return r;let n=0,l=0;if(e.changedTouches){let t=null!=(i=e.changedTouches[0])?i:{};n=t.clientX||0,l=t.clientY||0}else n=e.clientX||0,l=e.clientY||0;let o=this.domElement.getBoundingClientRect();return{x:n-o.left,y:l-o.top}}normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e.changedTouches&&e.changedTouches.length)for(let i=0,r=e.changedTouches.length;i<r;i++){let r=e.changedTouches[i];(0,h6.Z)(r.button)&&(r.button=0),(0,h6.Z)(r.buttons)&&(r.buttons=1),(0,h6.Z)(r.isPrimary)&&(r.isPrimary=1===e.touches.length&&"touchstart"===e.type),(0,h6.Z)(r.width)&&(r.width=r.radiusX||1),(0,h6.Z)(r.height)&&(r.height=r.radiusY||1),(0,h6.Z)(r.tiltX)&&(r.tiltX=0),(0,h6.Z)(r.tiltY)&&(r.tiltY=0),(0,h6.Z)(r.pointerType)&&(r.pointerType="touch"),(0,h6.Z)(r.pointerId)&&(r.pointerId=r.identifier||0),(0,h6.Z)(r.pressure)&&(r.pressure=r.force||.5),(0,h6.Z)(r.twist)&&(r.twist=0),(0,h6.Z)(r.tangentialPressure)&&(r.tangentialPressure=0),(0,h6.Z)(r.layerX)&&(r.layerX=r.offsetX=r.clientX),(0,h6.Z)(r.layerY)&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=e.type,t.push(r)}else this.globalObj.supportsMouseEvents&&(!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof PointerEvent)||((0,h6.Z)(e.isPrimary)&&(e.isPrimary=!0),(0,h6.Z)(e.width)&&(e.width=1),(0,h6.Z)(e.height)&&(e.height=1),(0,h6.Z)(e.tiltX)&&(e.tiltX=0),(0,h6.Z)(e.tiltY)&&(e.tiltY=0),(0,h6.Z)(e.pointerType)&&(e.pointerType="mouse"),(0,h6.Z)(e.pointerId)&&(e.pointerId=1),(0,h6.Z)(e.pressure)&&(e.pressure=.5),(0,h6.Z)(e.twist)&&(e.twist=0),(0,h6.Z)(e.tangentialPressure)&&(e.tangentialPressure=0),e.isNormalized=!0),t.push(e);return t}normalizeWheelEvent(e){let t=this.rootWheelEvent;this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ;let{x:i,y:r}=this.mapToCanvasPoint(e);t.canvas.x=i,t.canvas.y=r,t.global.x=i,t.global.y=r,t.offset.x=i,t.offset.y=r;let{x:n,y:l}=this.mapToViewportPoint(t);return t.viewport.x=n,t.viewport.y=l,t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t);let{x:i,y:r}=this.mapToCanvasPoint(t);e.canvas.x=i,e.canvas.y=r,e.global.x=i,e.global.y=r,e.offset.x=i,e.offset.y=r;let{x:n,y:l}=this.mapToViewportPoint(e);return e.viewport.x=n,e.viewport.y=l,e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=dr[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=de.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.shiftKey=t.shiftKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null}isEventOutsideOfTargetViewPort(e){if(this.isEventOutsideOfTargetElement(e))return!0;if(this.domElement.getViewBox){let t=this.mapToViewportPoint(this.mapToCanvasPoint(e)),i=this.domElement.getViewBox(),r=i.width(),n=i.height();return!(t.x<r&&t.y<n&&t.x>0&&t.y>0)}return!1}isEventOutsideOfTargetElement(e){let t=e.target;return e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]),t!==(this.domElement.getNativeHandler?this.domElement.getNativeHandler().nativeCanvas:this.domElement)}pauseTriggerEvent(){this.manager.pauseNotify=!0}resumeTriggerEvent(){this.manager.pauseNotify=!1}}class dl{constructor(){this.name="AutoRenderPlugin",this.activeEvent="onRegister",this._uid=tm.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=e=>{e.glyphHost&&(e=e.glyphHost),e.stage===this.pluginService.stage&&null!=e.stage&&e.stage.renderNextFrame()}}activate(e){this.pluginService=e;let t=this.pluginService.stage;t&&(t.graphicService.hooks.onAttributeUpdate.tap(this.key,this.handleChange),t.graphicService.hooks.onSetStage.tap(this.key,this.handleChange),t.graphicService.hooks.onRemove.tap(this.key,this.handleChange))}deactivate(e){let t=e=>e.filter(e=>e.name!==this.key),i=this.pluginService.stage;i&&(i.graphicService.hooks.onAttributeUpdate.taps=t(i.graphicService.hooks.onAttributeUpdate.taps),i.graphicService.hooks.onSetStage.taps=t(i.graphicService.hooks.onSetStage.taps),i.graphicService.hooks.onRemove.taps=t(i.graphicService.hooks.onRemove.taps))}}class da{constructor(){this.name="AutoRefreshPlugin",this.activeEvent="onRegister",this._uid=tm.GenAutoIncrementId(),this.key=this.name+this._uid,this.handleChange=e=>{e.glyphHost&&(e=e.glyphHost),e.stage===this.pluginService.stage&&null!=e.stage&&e.stage.renderNextFrame()}}activate(e){this.pluginService=e,this.dpr=tU.global.devicePixelRatio,this.refresh()}refresh(){this._refreshByMediaQuery()||this._refreshByRaf()}_refreshByRaf(){let e=tU.global.getRequestAnimationFrame();this.rafId=e(()=>{tU.global.devicePixelRatio!==this.dpr&&(this.dpr=tU.global.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0)),this.refresh()})}_refreshByMediaQuery(){try{let e=`(resolution: ${window.devicePixelRatio}dppx)`,t=()=>{window.devicePixelRatio!==this.dpr&&(this.dpr=window.devicePixelRatio,this.pluginService.stage.setDpr(this.dpr,!0))},i=matchMedia(e);i&&i.addEventListener("change",t),this.autoRefreshCbs||(this.autoRefreshCbs=[]),this.autoRefreshCbs.push(()=>{i&&i.removeEventListener("change",t)})}catch(e){return!1}return!0}deactivate(e){var t;let i=tU.global.getCancelAnimationFrame();i&&this.rafId&&i(this.rafId),null==(t=this.autoRefreshCbs)||t.forEach(e=>{e()}),this.autoRefreshCbs=void 0}}class ds{constructor(){this.name="IncrementalAutoRenderPlugin",this.activeEvent="onRegister",this.nextFrameRenderGroupSet=new Set,this.willNextFrameRender=!1,this.nextUserParams={},this._uid=tm.GenAutoIncrementId(),this.key=this.name+this._uid}activate(e){this.pluginService=e;let t=this.pluginService.stage;t&&(t.graphicService.hooks.onAddIncremental.tap(this.key,(t,i,r)=>{t.glyphHost&&(t=t.glyphHost),t.stage===e.stage&&null!=t.stage&&(this.nextUserParams.startAtId=i._uid,this.renderNextFrame(i))}),t.graphicService.hooks.onClearIncremental.tap(this.key,(t,i)=>{t.stage===e.stage&&null!=t.stage&&(this.nextUserParams.startAtId=t._uid,this.nextUserParams.restartIncremental=!0,this.renderNextFrame(t))}))}deactivate(e){let t=this.pluginService.stage;t&&(t.graphicService.hooks.onAddIncremental.taps=t.graphicService.hooks.onAddIncremental.taps.filter(e=>e.name!==this.key),t.graphicService.hooks.onClearIncremental.taps=t.graphicService.hooks.onClearIncremental.taps.filter(e=>e.name!==this.key))}renderNextFrame(e){this.nextFrameRenderGroupSet.add(e),this.willNextFrameRender||(this.willNextFrameRender=!0,tU.global.getRequestAnimationFrame()(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){let e=this.pluginService.stage;this.nextFrameRenderGroupSet.size&&(this.nextFrameRenderGroupSet.forEach(t=>{let i=t.layer;if(!i||!t.layer.subLayers)return;let r=t.layer.subLayers.get(t._uid);r&&r.drawContribution&&r.drawContribution.draw(e.renderService,Object.assign({stage:e,layer:i,viewBox:e.window.getViewBox(),transMatrix:e.window.getViewBoxTransform(),clear:"transparent",renderService:e.renderService,updateBounds:!1,startAtId:t._uid,context:r.layer.getNativeHandler().getContext()},this.nextUserParams))}),this.nextUserParams={},this.nextFrameRenderGroupSet.clear())}}let dh=new t4.FB;class dd{constructor(){this.name="DirtyBoundsPlugin",this.activeEvent="onRegister",this._uid=tm.GenAutoIncrementId(),this.key=this.name+this._uid}activate(e){this.pluginService=e,e.stage.hooks.afterRender.tap(this.key,e=>{e&&e===this.pluginService.stage&&e.dirtyBounds.clear()});let t=this.pluginService.stage;t&&(t.graphicService.hooks.beforeUpdateAABBBounds.tap(this.key,(e,t,i,r)=>{e.glyphHost&&(e=e.glyphHost),t&&t===this.pluginService.stage&&t.renderCount&&(e.isContainer&&!e.shouldSelfChangeUpdateAABBBounds()||i&&(dh.setValue(r.x1,r.y1,r.x2,r.y2),t.dirty(dh,e.parent&&e.parent.globalTransMatrix)))}),t.graphicService.hooks.afterUpdateAABBBounds.tap(this.key,(e,t,i,r,n)=>{t&&t===this.pluginService.stage&&t.renderCount&&(e.isContainer&&!n||t.dirty(r.globalAABBBounds))}),t.graphicService.hooks.clearAABBBounds.tap(this.key,(e,t,i)=>{t&&t===this.pluginService.stage&&t.renderCount&&t&&t.dirty(i)}),t.graphicService.hooks.onRemove.tap(this.key,e=>{let t=e.stage;t&&t===this.pluginService.stage&&t.renderCount&&t&&t.dirty(e.globalAABBBounds)}))}deactivate(e){let t=this.pluginService.stage;t&&(t.graphicService.hooks.beforeUpdateAABBBounds.taps=t.graphicService.hooks.beforeUpdateAABBBounds.taps.filter(e=>e.name!==this.key),t.graphicService.hooks.afterUpdateAABBBounds.taps=t.graphicService.hooks.afterUpdateAABBBounds.taps.filter(e=>e.name!==this.key),t.graphicService.hooks.clearAABBBounds.taps=t.graphicService.hooks.clearAABBBounds.taps.filter(e=>e.name!==this.key),t.hooks.afterRender.taps=t.hooks.afterRender.taps.filter(e=>e.name!==this.key),t.graphicService.hooks.onRemove.taps=t.graphicService.hooks.onRemove.taps.filter(e=>e.name!==this.key))}}class du{static registerPlugin(e,t){du._pluginClasses[e]=t}static getPlugin(e){return du._pluginClasses[e]}}du._pluginClasses={};let dc={BACKGROUND:"white"};class dp extends ol{set viewBox(e){this.window.setViewBox(e)}get viewBox(){return this.window.getViewBox()}get x(){return this.window.getViewBox().x1}set x(e){let t=this.window.getViewBox();t.translate(e-t.x1,0),this.window.setViewBox(t)}get y(){return this.window.getViewBox().y1}set y(e){let t=this.window.getViewBox();t.translate(0,e-t.y1),this.window.setViewBox(t)}get width(){return this.window.width}set width(e){this.resize(e,this.height)}get viewWidth(){return this.window.getViewBox().width()}set viewWidth(e){this.resizeView(e,this.viewHeight)}get viewHeight(){return this.window.getViewBox().height()}set viewHeight(e){this.resizeView(this.viewWidth,e)}get height(){return this.window.height}set height(e){this.resize(this.width,e)}get dpr(){return this.window.dpr}set dpr(e){this.setDpr(e)}get background(){var e;return null!=(e=this._background)?e:dc.BACKGROUND}set background(e){this._background=e}get defaultLayer(){return this.at(0)}get eventSystem(){return this._eventSystem}get ticker(){return this._ticker}set ticker(e){e.bindStage(this),this._ticker&&this._ticker.removeListener("tick",this.afterTickCb),e.addTimeline(this.timeline),this._ticker=e,this._ticker.on("tick",this.afterTickCb)}constructor(e={}){var t,i;super({}),this.tickedBeforeRender=!0,this._onVisibleChange=e=>{if(!(this._skipRender<0))if(e){if(this.dirtyBounds){let e=this.window.getViewBox();this.dirtyBounds.setValue(e.x1,e.y1,e.width(),e.height())}this._skipRender>1&&this.renderNextFrame(),this._skipRender=0}else this._skipRender=1},this.beforeRender=e=>{this._beforeRenderList.forEach(t=>t(e))},this.afterClearScreen=e=>{this._afterClearScreen&&this._afterClearScreen(e)},this.afterClearRect=e=>{this._afterClearRect&&this._afterClearRect(e)},this.afterRender=e=>{this.renderCount++,this._afterRenderList.forEach(t=>t(e)),this._afterNextRenderCbs&&this._afterNextRenderCbs.forEach(t=>t(e)),this._afterNextRenderCbs=null,this.tickedBeforeRender=!1},this.afterTickCb=()=>{this.tickedBeforeRender=!0,"rendering"!==this.state&&this.renderNextFrame()},this.params=e,this.theme=new r2,this.hooks={beforeRender:new tF(["stage"]),afterRender:new tF(["stage"]),afterClearScreen:new tF(["stage"]),afterClearRect:new tF(["stage"])},this.global=tU.global,!this.global.env&&sK()&&this.global.setEnv("browser"),this.window=tG.get(r$),this.renderService=tG.get(tV),this.pluginService=tG.get(o0),this.layerService=tG.get(od),this.graphicService=tG.get(l$),this.pluginService.active(this,e),this._beforeRenderList=[],this._afterRenderList=[],this.window.create({width:e.width,height:e.height,viewBox:e.viewBox,container:e.container,dpr:e.dpr||this.global.devicePixelRatio,canvasControled:!1!==e.canvasControled,title:e.title||"",canvas:e.canvas}),this.state="normal",this.renderCount=0,this.tryInitEventSystem(),this._background=null!=(t=e.background)?t:dc.BACKGROUND,this.appendChild(this.layerService.createLayer(this,{main:!0})),this.nextFrameRenderLayerSet=new Set,this.willNextFrameRender=!1,this.stage=this,this.renderStyle=e.renderStyle,e.autoRender&&this.enableAutoRender(),e.autoRefresh&&this.enableAutoRefresh(),!1===e.disableDirtyBounds&&this.enableDirtyBounds(),e.enableHtmlAttribute&&this.enableHtmlAttribute(e.enableHtmlAttribute),e.ReactDOM&&this.enableReactAttribute(e.ReactDOM),e.enableLayout&&this.enableLayout(),this.hooks.beforeRender.tap("constructor",this.beforeRender),this.hooks.afterRender.tap("constructor",this.afterRender),e.beforeRender&&this._beforeRenderList.push(e.beforeRender),e.afterRender&&this._afterRenderList.push(e.afterRender),this.hooks.afterClearScreen.tap("constructor",this.afterClearScreen),this.hooks.afterClearRect.tap("constructor",this.afterClearRect),this._afterClearScreen=e.afterClearScreen,this._afterClearRect=e.afterClearRect,this.supportInteractiveLayer=!1!==e.interactiveLayer,e.optimize||(e.optimize={tickRenderMode:"effect"}),this.optmize(e.optimize),e.background&&(0,r6.Z)(this._background)&&this._background.includes("/")&&this.setAttributes({background:this._background}),this.initAnimate(e),this.rafId=null!=(i=e.rafId)?i:Math.floor(6*Math.random())}initAnimate(e){var t;this.createTicker&&this.createTimeline&&(this._ticker=e.ticker||this.createTicker(this),this._ticker.bindStage(this),"performance"===(null==(t=this.params.optimize)?void 0:t.tickRenderMode)&&this._ticker.setFPS(30),this.timeline=this.createTimeline(),this._ticker.addTimeline(this.timeline),this._ticker.on("tick",this.afterTickCb))}startAnimate(){this._ticker&&this.timeline&&(this._ticker.start(),this.timeline.resume())}pauseRender(e=-1){this._skipRender=e}resumeRender(){this._skipRender=0}tryInitEventSystem(){this.global.supportEvent&&!this._eventSystem&&(this._eventSystem=new dn(Object.assign({targetElement:this.window,resolution:this.window.dpr||this.global.devicePixelRatio,rootNode:this,global:this.global,supportsPointerEvents:this.params.supportsPointerEvents,supportsTouchEvents:this.params.supportsTouchEvents},this.params.event)))}preventRender(e){e?this._skipRender=-1/0:!1!==this.params.optimize.skipRenderWithOutRange?this._skipRender=+!this.window.isVisible():this._skipRender=0}optmize(e){this.optmizeRender(e.skipRenderWithOutRange),this.params.optimize=e}optmizeRender(e=!1){e&&(this._skipRender=this._skipRender<0?this._skipRender:+!this.window.isVisible(),this.window.onVisibleChange(this._onVisibleChange))}getTimeline(){return this.timeline}get3dOptions(e){let{center:t={x:this.width/2,y:this.height/2,z:0,dx:0,dy:0,dz:0},light:i={},alpha:r=0,beta:n=0,camera:l,fieldRatio:o=1,fieldDepth:a}=e;return Object.assign(Object.assign({},e),{center:t,light:i,alpha:r,beta:n,camera:l,fieldRatio:o,fieldDepth:a})}set3dOptions(e){var t,i,r,n,l,o;this.option3d=e;let{light:a,center:s,camera:h,alpha:d,beta:u,fieldRatio:c,fieldDepth:p}=this.get3dOptions(e),{dir:g=[1,1,-1],color:f="white",ambient:m}=a,b=(null!=(t=s.x)?t:this.width/2)+(null!=(i=s.dx)?i:0),y=(null!=(r=s.y)?r:this.height/2)+(null!=(n=s.dy)?n:0),v=[b,y,(null!=(l=s.z)?l:0)+(null!=(o=s.dz)?o:0)],_=0,C=0,x=0;h||(_=Math.sin(d)+b,C=Math.sin(u)+y,x=Math.cos(d)*Math.cos(u)*1);let w=du.getPlugin("DirectionalLight");w&&(this.light=new w(g,f,m));let S={left:0,right:this.width,top:0,bottom:this.height,fieldRatio:c,fieldDepth:p,viewParams:{pos:[_,C,x],center:v,up:[0,1,0]}};if(this.camera)this.camera.params=S;else{let e=du.getPlugin("OrthoCamera");e&&(this.camera=new e(S))}e.enableView3dTransform&&this.enableView3dTransform()}setBeforeRender(e){this._beforeRenderList.push(e)}removeBeforeRender(e){this._beforeRenderList=this._beforeRenderList.filter(t=>t!==e)}setAfterRender(e){this._afterRenderList.push(e)}removeAfterRender(e){this._afterRenderList=this._afterRenderList.filter(t=>t!==e)}afterNextRender(e){this._afterNextRenderCbs||(this._afterNextRenderCbs=[]),this._afterNextRenderCbs.push(e)}enableView3dTransform(){if(this.view3dTranform)return;this.view3dTranform=!0;let e=du.getPlugin("ViewTransform3dPlugin");e&&this.pluginService.register(new e)}disableView3dTranform(){this.view3dTranform&&(this.view3dTranform=!1,this.pluginService.findPluginsByName("ViewTransform3dPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableAutoRender(){this.autoRender||(this.autoRender=!0,this.pluginService.register(new dl))}disableAutoRender(){this.autoRender&&(this.autoRender=!1,this.pluginService.findPluginsByName("AutoRenderPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableAutoRefresh(){this.autoRefresh||"node"===this.global.env||(this.autoRefresh=!0,this.pluginService.register(new da))}disableAutoRefresh(){this.autoRefresh&&(this.autoRefresh=!1,this.pluginService.findPluginsByName("AutoRefreshPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableIncrementalAutoRender(){this.increaseAutoRender||(this.increaseAutoRender=!0,this.pluginService.register(new ds))}disableIncrementalAutoRender(){this.increaseAutoRender&&(this.increaseAutoRender=!1,this.pluginService.findPluginsByName("IncrementalAutoRenderPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableDirtyBounds(){if(this.dirtyBounds)return;this.dirtyBounds=new t4.YZ;let e=this.pluginService.findPluginsByName("DirtyBoundsPlugin")[0];e?e.activate(this.pluginService):(e=new dd,this.pluginService.register(e))}disableDirtyBounds(){this.dirtyBounds&&(this.dirtyBounds=null,this.pluginService.findPluginsByName("DirtyBoundsPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableLayout(){if(this._enableLayout)return;this._enableLayout=!0;let e=du.getPlugin("FlexLayoutPlugin");e&&this.pluginService.register(new e)}disableLayout(){this._enableLayout&&(this._enableLayout=!1,this.pluginService.findPluginsByName("FlexLayoutPlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableHtmlAttribute(e){if(this.htmlAttribute)return;let t=du.getPlugin("HtmlAttributePlugin");t&&(this.htmlAttribute=e,this.pluginService.register(new t))}disableHtmlAttribute(){this.htmlAttribute&&(this.htmlAttribute=!1,this.pluginService.findPluginsByName("HtmlAttributePlugin").forEach(e=>{this.pluginService.unRegister(e)}))}enableReactAttribute(e){if(this.reactAttribute)return;let t=du.getPlugin("ReactAttributePlugin");t&&(this.reactAttribute=e,this.pluginService.register(new t))}disableReactAttribute(){this.reactAttribute&&(this.reactAttribute=!1,this.pluginService.findPluginsByName("ReactAttributePlugin").forEach(e=>{this.pluginService.unRegister(e)}))}getPluginsByName(e){return this.pluginService.findPluginsByName(e)}tryUpdateAABBBounds(){let e=this.window.getViewBox();return this._AABBBounds.setValue(e.x1,e.y1,e.x2,e.y2),this._AABBBounds}combineLayer(e,t){throw Error("")}createLayer(e,t){if("released"===this.releaseStatus)return;let i=this.layerService.createLayer(this,{main:!1,layerMode:t,canvasId:e});return this.appendChild(i),i}sortLayer(e){let t=this.children;t.sort(e),this.removeAllChild(),t.forEach(e=>{this.appendChild(e)})}removeLayer(e){return this.removeChild(this.findChildByUid(e))}tryInitInteractiveLayer(){"released"!==this.releaseStatus&&this.supportInteractiveLayer&&!this.interactiveLayer&&(this.interactiveLayer=this.createLayer(),this.interactiveLayer.name="_builtin_interactive",this.interactiveLayer.attribute.pickable=!1,this.nextFrameRenderLayerSet.add(this.interactiveLayer))}clearViewBox(e){this.window.clearViewBox(e)}render(e,t){if("released"===this.releaseStatus)return;this.startAnimate();let i=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this._skipRender||(this.lastRenderparams=t,this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(this.children),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=i,this._skipRender&&this._skipRender++}combineLayersToWindow(){if("harmony"===this.global.env){let e=this.window.getContext().nativeContext;this.forEachChildren((t,i)=>{if(i>0){let i=t.getNativeHandler().getContext().canvas.nativeCanvas.nativeCanvas._c.transferToImageBitmap();e.transferFromImageBitmap(i)}})}}renderNextFrame(e,t){this.nextFrameRenderLayerSet.size!==this.childrenCount&&(e||this).forEach(e=>{this.nextFrameRenderLayerSet.add(e)}),this.willNextFrameRender||(this.willNextFrameRender=!0,this.global.getSpecifiedRequestAnimationFrame(this.rafId)(()=>{this._doRenderInThisFrame(),this.willNextFrameRender=!1}))}_doRenderInThisFrame(){if("released"===this.releaseStatus)return;this.startAnimate();let e=this.state;this.state="rendering",this.layerService.prepareStageLayer(this),this.nextFrameRenderLayerSet.size&&!this._skipRender&&(this.hooks.beforeRender.call(this),this._skipRender||(this.renderLayerList(Array.from(this.nextFrameRenderLayerSet.values()),this.lastRenderparams||{}),this.combineLayersToWindow(),this.nextFrameRenderLayerSet.clear()),this.hooks.afterRender.call(this)),this.state=e,this._skipRender&&this._skipRender++}renderLayerList(e,t){let i=[];for(let t=0;t<e.length;t++){let r=e[t];"virtual"===r.layerMode&&(r=r.getNativeHandler().mainHandler.layer),i.includes(r)||i.push(r)}i.forEach(e=>{e.renderCount>this.renderCount||(e.renderCount=this.renderCount+1,e===this.interactiveLayer&&this.dirtyBounds&&this.dirtyBounds.clear(),e.render({renderService:this.renderService,background:e===this.defaultLayer?this.background:void 0,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},t)))}),this.interactiveLayer&&!e.includes(this.interactiveLayer)&&(this.dirtyBounds&&this.dirtyBounds.clear(),this.interactiveLayer.render({renderService:this.renderService,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty()),viewBox:this.window.getViewBox(),transMatrix:this.window.getViewBoxTransform()},Object.assign({renderStyle:this.renderStyle},t)))}resizeWindow(e,t,i=!0){this.window.resize(e,t),i&&this.render()}resize(e,t,i=!0){"released"!==this.releaseStatus&&(this.window.hasSubView()||this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+e,this.viewBox.y1+t),this.window.resize(e,t),this.forEachChildren(i=>{i.resize(e,t)}),this.camera&&this.option3d&&this.set3dOptions(this.option3d),i&&this.render())}resizeView(e,t,i=!0){"released"!==this.releaseStatus&&(this.viewBox.setValue(this.viewBox.x1,this.viewBox.y1,this.viewBox.x1+e,this.viewBox.y1+t),this.forEachChildren(i=>{i.resizeView(e,t)}),this.camera&&(this.camera.params=Object.assign(Object.assign({},this.camera.params),{right:this.width,bottom:this.height})),i&&this.render())}setViewBox(e,t,i,r,n){let l=!0;"object"==typeof e?(this.viewBox.setValue(e.x1,e.y1,e.x2,e.y2),!1===t&&(l=!1)):(this.viewBox.setValue(e,t,e+i,t+r),!1===n&&(l=!1)),this.forEachChildren(e=>{e.resizeView(this.viewBox.width(),this.viewBox.height())}),l&&this.render()}setDpr(e,t=!0){this.forEachChildren(t=>{t.setDpr(e)}),t&&this.render()}setOrigin(e,t){throw Error("")}export(e){throw Error("")}pick(e,t){if("released"===this.releaseStatus)return;let i=this.getPickerService().pick(this.children,new il.E9(e,t),{bounds:this.AABBBounds});return!(!(null==i?void 0:i.graphic)&&!(null==i?void 0:i.group))&&i}setToFrame(e){throw Error("")}release(){var e,t;super.release(),this.hooks.beforeRender.unTap("constructor",this.beforeRender),this.hooks.afterRender.unTap("constructor",this.afterRender),this.eventSystem&&this.eventSystem.release(),this.layerService.releaseStage(this),this.pluginService.release(),this.forEach(e=>{e.release()}),this.interactiveLayer&&(this.interactiveLayer.forEachChildren(e=>{e.setStage&&e.setStage(null,null),this.interactiveLayer.removeChild(e)}),this.interactiveLayer.release()),this.window.release(),null==(e=this._ticker)||e.remTimeline(null==this?void 0:this.timeline),null==(t=this._ticker)||t.removeListener("tick",this.afterTickCb),this.renderService.renderTreeRoots=[]}setStage(e){}dirty(e,t){"released"!==this.releaseStatus&&(t&&e.transformWithMatrix(t),this.dirtyBounds.empty()&&this.dirtyBounds.setValue(e.x1,e.y1,e.x2,e.y2),this.dirtyBounds.union(e))}getLayer(e){return this.children.filter(t=>t.name===e)[0]}renderTo(e){"released"!==this.releaseStatus&&this.forEachChildren((t,i)=>{t.drawTo(e,{renderService:this.renderService,viewBox:e.getViewBox(),transMatrix:e.getViewBoxTransform(),background:t===this.defaultLayer?this.background:void 0,clear:0===i,updateBounds:!(!this.dirtyBounds||this.dirtyBounds.empty())})})}renderToNewWindow(e=!0,t){if("released"===this.releaseStatus)return;let i=tG.get(r$),r=t?-t.x1:0,n=t?-t.y1:0,l=t?t.x2:this.viewWidth,o=t?t.y2:this.viewHeight,a=t?t.width():this.viewWidth,s=t?t.height():this.viewHeight;return i.create({viewBox:{x1:r,y1:n,x2:l,y2:o},width:a,height:s,dpr:this.window.dpr,canvasControled:!0,offscreen:!0,title:""}),this.renderTo(i),i}toCanvas(e=!0,t){if("released"===this.releaseStatus)return;let i=this.renderToNewWindow(e,t).getNativeHandler();return i.nativeCanvas?i.nativeCanvas:null}setCursor(e){this._cursor=e,this.eventSystem.setCursor(e,"ignore")}getCursor(){return this._cursor}eventPointTransform(e){let t=this.global.mapToCanvasPoint(e,this.window);return this.stage.window.pointTransform(t.x,t.y)}pauseTriggerEvent(){this._eventSystem&&this._eventSystem.pauseTriggerEvent()}resumeTriggerEvent(){this._eventSystem&&this._eventSystem.resumeTriggerEvent()}getPickerService(){return this.pickerService||(this.pickerService=tG.get(oL)),this.pickerService}reInit(){this.renderService.reInit(),this.pickerService.reInit()}}let dg="__VCHART",df=`${dg}_DEFAULT_DATA_INDEX`,dm=`${dg}_DEFAULT_DATA_KEY`,db=`${dg}_DEFAULT_DATA_SERIES_FIELD`,dy=`${dg}_DEFAULT_SERIES_STYLE_NAME`,dv=`${dg}_STACK_KEY`,d_=`${dg}_STACK_START`,dC=`${dg}_STACK_END`,dx=`${dg}_STACK_START_PERCENT`,dw=`${dg}_STACK_END_PERCENT`,dS=`${dg}_STACK_START_OffsetSilhouette`,dA=`${dg}_STACK_END_OffsetSilhouette`,dk=`${dg}_STACK_TOTAL`,dM=`${dg}_STACK_TOTAL_PERCENT`,dT=`${dg}_STACK_TOTAL_TOP`,dR=`${dg}_STACK_TOTAL_BOTTOM`,dE=`${dg}_SEGMENT_START`,dP=`${dg}_SEGMENT_END`,dB=`${dg}_KEY`,dI=`${dg}_MAP_LOOK_UP_KEY`,dL=["line","area","trail"];function dF(e,t,i){let r=new Map;if(!e||0===e.length)return{keys:[],data:r};if(!t)return r.set(dB,i?e.slice().sort(i):e.slice()),{keys:[dB],data:r};if(1===e.length){let i=t(e[0],0);return r.set(i,[e[0]]),{keys:[i],data:r}}let n=new Set;return e.forEach((e,i)=>{var l;let o=t(e,i),a=null!=(l=r.get(o))?l:[];a.push(e),r.set(o,a),n.add(o)}),i&&n.forEach(e=>{r.get(e).sort(i)}),{keys:Array.from(n),data:r}}let dH=(e,t,i={})=>(e&&Object.keys(e).forEach(r=>{i[r]=e[r](t)}),i);function dO(e,t,i,r,n){let l=e=>{if(!r&&e&&(!i||i(e))){let i=t.call(null,e);if(n&&i)return i}if("group"===e.type){let t=e.getMarks();if(t)for(let e=0;e<t.length;e++){let i=l(t[e]);if(i&&n)return i}}if(r&&e&&(!i||i(e))){let i=t.call(null,e);if(i&&n)return i}};return l(e)}function dD(e){let t=[];return e.forEach(e=>{dO(e,e=>{"group"!==e.type&&"component"!==e.type&&t.push(e)})}),t}function dz(e,t,i,r){let n=dF(e,e=>i(e)),l=dF(t,e=>r(e)),o=e,a=t,s=[];return l.keys.forEach(e=>{if(!(0,r5.Z)(e)){let t=n.data.get(e),i=l.data.get(e);t&&i&&(s.push({prev:t,next:i}),o=o.filter(e=>!t.includes(e)),a=a.filter(e=>!i.includes(e)))}}),{prev:o,next:a,update:s}}let dW=`${dg}_BuiltIn_CallBack_Disappear`;(w=K||(K={})).render="render",w.disappear="disappear";class dZ{get stateAnimationConfig(){return this._stateAnimationConfig}getRootGroup(){return this._rootGroup}constructor(e,t){this._count=0,this._rootMarks=[],this._viewListeners=new Map,this._windowListeners=new Map,this._canvasListeners=new Map,this.isInited=!1,this._released=!1,this._compileChart=null,this.handleLayoutEnd=()=>{var e,t;null==(t=null==(e=this._compileChart)?void 0:e.getEvent())||t.emit(N.afterMarkLayoutEnd,{chart:this._compileChart})},this.handleStageRender=()=>{var e,t;null==(t=null==(e=this._compileChart)?void 0:e.getEvent())||t.emit(N.afterRender,{chart:this._compileChart})},this._handleAfterNextRender=()=>{var e,t,i,r;this._stage&&!this._option.disableDirtyBounds&&this._stage.enableDirtyBounds(),this._compileChart&&(null==(e=this._compileChart.getEvent())||e.emit(N.renderFinished,{chart:this._compileChart,vchart:null==(t=this._compileChart.getOption())?void 0:t.globalInstance})),null==(r=null==(i=this._option.performanceHook)?void 0:i.afterVRenderDraw)||r.call(i,this._compileChart.getOption().globalInstance)},this.handleProgressiveFrame=()=>{this._progressiveMarks.length&&this._progressiveMarks.forEach(e=>{e.isDoingProgressive()&&e.renderProgressive()}),this.doPreProgressive()},this._container=e,this._option=t}getChart(){return this._compileChart}getCanvas(){var e;return null==(e=this._stage)?void 0:e.window.getNativeHandler().nativeCanvas}getStage(){return this._stage}initView(){var e,t,i,r;if(this._released||(this.isInited=!0,this._stage))return;let{autoRefreshDpr:n,dpr:l,mode:o,modeParams:a,gestureConfig:s,interactive:h,clickInterval:d,autoPreventDefault:u,background:c}=this._option;sI.setEnv(function(e){switch(e){case su["desktop-browser"]:case su["mobile-browser"]:break;case su.node:case su.worker:return"node";case su.miniApp:case su["desktop-miniApp"]:return"feishu";case su.lynx:return"lynx";case su.wx:return"wx";case su.tt:return"tt";case su.harmony:return"harmony"}return"browser"}(o),null!=a?a:{}),this._stage=null!=(e=this._option.stage)?e:new dp(Object.assign({background:c,width:this._width,height:this._height,container:null!=(t=this._container.dom)?t:null,canvas:null!=(i=this._container.canvas)?i:null,dpr:l,viewBox:this._option.viewBox,canvasControled:this._option.canvasControled,beforeRender:e=>{var t,i,r;null==(t=this._compileChart)||t.onBeforeRender(),null==(r=(i=this._option).beforeRender)||r.call(i,e)},afterRender:this._option.afterRender,disableDirtyBounds:!0,autoRender:!0,ticker:this._option.ticker,pluginList:this._option.pluginList,enableHtmlAttribute:this._option.enableHtmlAttribute,optimize:this._option.optimize,supportsTouchEvents:this._option.supportsTouchEvents,supportsPointerEvents:this._option.supportsPointerEvents,event:{clickInterval:d,autoPreventDefault:u},ReactDOM:this._option.ReactDOM,autoRefresh:(0,oV.Z)(n)?n:!(0,oV.Z)(l)},null!=(r=this._option.renderHooks)?r:{})),this._stage.enableIncrementalAutoRender(),this._stage.setTheme({symbol:{shape:"circle",size:8},text:{fontSize:14,fill:"#000000"}});let p=oo({x:0,y:0,width:this._width,height:this._height});p.name="root",this._stage.defaultLayer.appendChild(p),this._rootGroup=p;let g=((0,oV.Z)(s)?s:sJ(o))&&!1!==h&&hp.getStageEventPlugin("gesture");g&&(this._gestureController=new g(this._stage,(0,r9.Z)(s)?s:{})),this._setCanvasStyle(),this.getStage().hooks.afterRender.tap("chart-event",this.handleStageRender),!1!==h&&this._viewListeners.forEach(e=>{})}getLayoutState(){return this._layoutState}updateLayoutTag(){this._layoutState=U.before}_setCanvasStyle(){if(this._stage&&this._container.dom&&!(0,r6.Z)(this._container.dom)){this._container.dom.style.display="block",this._container.dom.style.position="relative";let e=this.getCanvas();e&&(e.style.display="block")}}compile(e,t){if(this._released)return;let{chart:i}=e;this._compileChart=i,this.initView(),this._stage&&("render"!==(null==t?void 0:t.actionSource)&&this._cachedMarks&&(this.reuseOrMorphing(t.morphConfig),this._cachedMarks=null),i.compile(),i.afterCompile())}clearNextRender(){return!!this._nextRafId&&(sI.getSpecifiedCancelAnimationFrame(10)(this._nextRafId),this._nextRafId=null,!0)}clear(e){let{chart:t}=e;this.clearNextRender(),t.clear()}renderNextTick(e){this._released||(this._nextRafId&&this.clearNextRender(),this._nextRafId=sI.getSpecifiedRequestAnimationFrame(10)(()=>{this._nextRafId=null,this.render(e)}))}_commitedAll(){return this._rootMarks.some(e=>dO(e,e=>e.commit()))}_hasCommitedMark(){return this._rootMarks.some(e=>dO(e,e=>e.isCommited(),null,null,!0))}_doRender(e){var t,i,r,n,l,o;null==(i=null==(t=this._option.performanceHook)?void 0:t.beforeDoRender)||i.call(t,this._compileChart.getOption().globalInstance),this._stage&&(this._rootMarks.forEach(e=>{dO(e,e=>{e.needClear&&(this._progressiveMarks||e.runAnimation(),e.clearExitGraphics(),e.needClear=!1)},null,!0)}),null==(n=null==(r=this._option.performanceHook)?void 0:r.beforeVRenderDraw)||n.call(r,this._compileChart.getOption().globalInstance),this._stage.disableDirtyBounds(),this._stage.afterNextRender(this._handleAfterNextRender),e&&(this._stage.render(),null==(o=null==(l=this._option.performanceHook)?void 0:l.afterVRenderDraw)||o.call(l,this._compileChart.getOption().globalInstance)))}renderMarks(){var e;this._hasCommitedMark()&&(s0(`--- start of renderMarks(${this._count}) ---`),this.clearProgressive(),this._rootMarks.forEach(e=>{e.render()}),this._layoutState===U.before&&(this._layoutState=U.layouting,null==(e=this._compileChart)||e.onLayout(),this._layoutState=U.reevaluate,this._hasCommitedMark()&&this._rootMarks.forEach(e=>{e.render()}),this.handleLayoutEnd()),this.findProgressiveMarks(),this.updateStateAnimation(),this._doRender(!0),this.doPreProgressive(),s0(`--- start of renderMarks(${this._count}) ---`),this._count++)}reuseOrMorphing(e={}){let{reuse:t=!0,morph:i=!0,morphAll:r=!1,animation:n={},enableExitAnimation:l=!1}=e,o=dD(this._rootMarks),{update:a,exit:s}=function(e,t,i){let r={enter:[],exit:[],update:[]},n=[],l=[];e.forEach(e=>{i.morph&&e.getMarkConfig().morph||i.morphAll||i.reuse?n.push(e):r.exit.push({prev:[e]})}),t.forEach(e=>{i.morph&&e.getMarkConfig().morph||i.morphAll||i.reuse?l.push(e):r.enter.push({next:[e]})});let o=dz(n,l,e=>e.getMarkConfig().morphKey,e=>e.getMarkConfig().morphKey);n=o.prev,l=o.next,r.update=r.update.concat(o.update);let a=dz(n,l,e=>`${e.getUserId()}`,e=>`${e.getUserId()}`);n=a.prev,l=a.next,r.update=r.update.concat(a.update);let s=dF(n,e=>{var t,i;return null==(i=null==(t=e.group)?void 0:t.id)?void 0:i.call(t)}),h=dF(l,e=>{var t,i;return null==(i=null==(t=e.group)?void 0:t.id)?void 0:i.call(t)});return Object.keys(h).forEach(e=>{let t=s.data.get(e),i=h.data.get(e);if(t&&i){for(let e=0;e<Math.max(t.length,i.length);e+=1){let n=t[e],l=i[e];n&&l?r.update.push({prev:[n],next:[l]}):n?r.exit.push({prev:[n]}):l&&r.enter.push({next:[l]})}n=n.filter(e=>!t.includes(e)),l=l.filter(e=>!i.includes(e))}}),n.forEach(e=>r.exit.push({prev:[e]})),l.forEach(e=>r.enter.push({next:[e]})),r}(this._cachedMarks,o,{morph:i,morphAll:r,reuse:t});a.forEach(({prev:e,next:i})=>{if(t&&1===e.length&&1===i.length&&e[0].type===i[0].type)i[0].reuse(e[0]);else{let t=e.filter(e=>e.getMarkConfig().morph)[0];t&&i.forEach(e=>{e.getMarkConfig().morph&&e.prepareMorph(t)})}}),s.forEach(({prev:e})=>{e.forEach(e=>{e.removeProduct()})})}render(e){if(this._released||(this.clearNextRender(),this.initView(),!this._stage))return;let{width:t,height:i}=this._rootGroup.attribute;this._width===t&&this._height===i||this._rootGroup.setAttributes({width:this._width,height:this._height}),this.renderMarks(),this.clearNextRender()&&this.renderMarks()}setStageAnimationConfig(e){let t={};Object.keys(e).forEach(i=>{let r=e[i];(0,ri.Z)(r)?t[i]="disappear"===i?r.map(e=>{var t;return"function"==typeof(t=e.callBack)&&/^class\s/.test(t.toString())?Object.assign(Object.assign({},e),{custom:e.callBack}):Object.assign(Object.assign({},e),{type:dW,customParameters:{callBack:e.callBack}})}):r.map(e=>{var t;let i=null!=(t=e.options)?t:{};return Object.assign(Object.assign({},e),{options:(...e)=>Object.assign({},"function"==typeof i?i(...e):i)})}):t[i]=Object.assign({},e[i])}),this._stateAnimationConfig=t}updateStateAnimation(){let e=[];this._rootMarks.forEach(t=>{dO(t,t=>{e.push(t)})});let t=e.map(e=>e.getAnimationState()),i=t.every(e=>e===V.appear)?V.appear:t.every(e=>e===V.disappear)?V.disappear:V.none;this._stage.context||(this._stage.context={}),this._stage.context.animationState=i}updateViewBox(e,t=!0){if(!this._stage)return;let i=this._stage.viewBox;!e||i&&i.x1===e.x1&&i.y1===e.y1&&i.x2===e.x2&&i.y2===e.y2||this._stage.setViewBox(e,t)}resize(e,t,i=!0){if(!this._stage)return;let r=this._width!==e||this._height!==t;this._width=e,this._height=t,r&&(this._stage.resize(e,t),this._commitedAll(),i&&this.render({morph:!1}))}setBackground(e){this._stage&&(this._stage.background=e)}setSize(e,t){this._width=e,this._height=t,this._stage}setViewBox(e,t=!0){this.updateViewBox(e,t)}addEventListener(e,t,i){var r,n;if(!1!==this._option.interactive){if(e===$.chart){let n=this.getRootGroup(),l=(function(r){var l;let o=r.target,a=null;o&&(a=(0,oV.Z)(o.context)?o:hZ(n,o));let s=null!=(l=null==a?void 0:a.context)?l:{},h=(0,oV.Z)(s.markId)?s.markId:null,d=(0,oV.Z)(s.modelId)?s.modelId:null,u=(0,oV.Z)(s.modelUserId)?s.modelUserId:null,c=(0,oV.Z)(s.markUserId)?s.markUserId:null,p={event:r,type:t,source:e,item:a,datum:hW(a),markId:h,modelId:d,markUserId:c,modelUserId:u};i.call(null,p)}).bind(this);this._viewListeners.set(i,{type:t,callback:l}),null==(r=this._stage)||r.addEventListener(t,l)}else if(e===$.window){let r=(function(r){i.call(null,{event:r,type:t,source:e,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null})}).bind(this);this._windowListeners.set(i,{type:t,callback:r});let n=this._getGlobalThis();null==n||n.addEventListener(t,r)}else if(e===$.canvas){let r=(function(r){i.call(null,{event:r,type:t,source:e,item:null,datum:null,markId:null,modelId:null,markUserId:null,modelUserId:null})}).bind(this);this._canvasListeners.set(i,{type:t,callback:r});let l=null==(n=this.getStage())?void 0:n.window;null==l||l.addEventListener(t,r)}}}removeEventListener(e,t,i){var r,n,l,o,a;if(!1!==this._option.interactive){if(e===$.chart){let e=null==(r=this._viewListeners.get(i))?void 0:r.callback;e&&(null==(n=this._stage)||n.removeEventListener(t,e)),this._viewListeners.delete(i)}else if(e===$.window){let e=this._getGlobalThis(),r=null==(l=this._windowListeners.get(i))?void 0:l.callback;r&&(null==e||e.removeEventListener(t,r)),this._windowListeners.delete(i)}else if(e===$.canvas){let e=null==(o=this.getStage())?void 0:o.window,r=null==(a=this._canvasListeners.get(i))?void 0:a.callback;e&&r&&(null==e||e.removeEventListener(t,r)),this._canvasListeners.delete(i)}}}releaseEvent(){let e=this.getStage();e&&e.hooks.afterRender.unTap("chart-event",this.handleStageRender),this._viewListeners.clear(),this._windowListeners.clear(),this._canvasListeners.clear()}release(){var e;this.clearNextRender(),this.releaseEvent(),this._option=this._container=null,this.releaseGrammar(!0),this._stage!==(null==(e=this._option)?void 0:e.stage)&&this._stage.release(),this._stage=null,this.isInited=!1,this._compileChart=null,this._released=!0}releaseGrammar(e=!1){e?this._rootMarks.forEach(e=>{dO(e,e=>{e.removeProduct()},null,!0)}):this._cachedMarks=dD(this._rootMarks),this._rootMarks=[]}addRootMark(e){this._rootMarks.includes(e)||this._rootMarks.push(e)}getRootMarks(){return this._rootMarks}removeRootMark(e){let t=this._rootMarks.findIndex(t=>t===e);return t>=0&&(this._rootMarks.splice(t,1),!0)}_getGlobalThis(){var e;return sq(this._option.mode)?globalThis:null==(e=this.getStage())?void 0:e.window}_combineIncrementalLayers(){this._stage&&(function(e){var t,i,r,n;return t=this,i=void 0,r=void 0,n=function*(){let t=[],i=e.getChildren();yield new Promise(e=>{tU.global.getRequestAnimationFrame()(()=>{e(null)})}),i.forEach(e=>{e.subLayers.size&&e.subLayers.forEach(e=>{e.drawContribution&&e.drawContribution.hooks&&e.drawContribution.rendering&&t.push(new Promise(t=>{e.drawContribution.hooks.completeDraw.tap("outWait",()=>{e.drawContribution.hooks.completeDraw.taps=e.drawContribution.hooks.completeDraw.taps.filter(e=>"outWait"!==e.name),t(null)})}))})}),yield Promise.all(t)},new(r||(r=Promise))(function(e,l){function o(e){try{s(n.next(e))}catch(e){l(e)}}function a(e){try{s(n.throw(e))}catch(e){l(e)}}function s(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(o,a)}s((n=n.apply(t,i||[])).next())})})(this._stage).then(()=>{this._stage&&this._stage.defaultLayer.combineSubLayer()})}findProgressiveMarks(){let e=[];return this._rootMarks.forEach(t=>{dO(t,t=>{t.isProgressive()&&e.push(t)})}),e.length?(this._progressiveMarks=e,this._combineIncrementalLayers(),e):(this._progressiveMarks=null,null)}doPreProgressive(){if(this._progressiveMarks&&this._progressiveMarks.some(e=>e.isDoingProgressive())){let e=sI.getSpecifiedRequestAnimationFrame(10);this._progressiveRafId=e(this.handleProgressiveFrame)}else this._progressiveMarks&&this._progressiveMarks.every(e=>e.canAnimateAfterProgressive())?this._progressiveMarks.forEach(e=>{e.runAnimation()}):this._progressiveMarks&&(this._progressiveMarks=null)}clearProgressive(){this._progressiveRafId&&sI.getSpecifiedCancelAnimationFrame(10)(this._progressiveRafId),this._progressiveMarks&&this._progressiveMarks.length&&(this._progressiveMarks.forEach(e=>{e.clearProgressive()}),this._progressiveMarks=null)}}var dN=i(75133),d$=i(44843);let dj={visible:!0,position:"auto",titleStyle:{fontSize:16,fill:"#08979c"},contentStyle:{fontSize:12,fill:"green"},panel:{visible:!0,fill:"#e6fffb",size:12,space:0,stroke:"#87e8de",lineWidth:1,cornerRadius:4}},dG={poptip:(0,ha.Z)({},dj)};function dV(){dV.__loaded||(dV.__loaded=!0,oq.RegisterGraphicCreator("group",oo))}dV.__loaded=!1;var dU=i(90180);class dK{constructor(e,t,i){this.fontFamily=e,this.textOptions=t,this.textMeasure=i}LayoutBBox(e,t,i,r){if(e.xOffset="left"===t||"start"===t?0:"center"===t?-(e.width/2):"right"===t||"end"===t?-e.width:0,"top"===i)e.yOffset=0;else if("middle"===i)e.yOffset=-(e.height/2);else if("alphabetic"===i){let t=.79;if(1===r.length){let e=r[0];t=e.ascent/(e.ascent+e.descent)}e.yOffset=-(e.height*t)}else e.yOffset=-e.height;return e}GetLayoutByLines(e,t,i,r,n="",l,o){let{lineWidth:a,suffixPosition:s="end",measureMode:h=sp.actualBounding,keepCenterInLine:d=!1}=null!=o?o:{};e=e.map(e=>e.toString());let u=[],c=[0,0];if("number"==typeof a&&a!==1/0){let t;for(let i=0,r=e.length;i<r;i++){let r=this.textMeasure.measureTextPixelADscentAndWidth(e[i],this.textOptions,h),o=e[i].toString();if(r.width>a){let r=this.textMeasure.clipTextWithSuffix(e[i],this.textOptions,a,n,l,s);o=r.str,t=r.width}else t=r.width;u.push({str:o,width:t,ascent:r.ascent,descent:r.descent,keepCenterInLine:d})}c[0]=a}else{let t,i,r=0;for(let n=0,l=e.length;n<l;n++){i=e[n];let l=this.textMeasure.measureTextPixelADscentAndWidth(e[n],this.textOptions,h);r=Math.max(r,t=l.width),u.push({str:i,width:t,ascent:l.ascent,descent:l.descent,keepCenterInLine:d})}c[0]=r}c[1]=u.length*r,c[0]=u.reduce((e,t)=>Math.max(e,t.width),0);let p={xOffset:0,yOffset:0,width:c[0],height:c[1]};return this.LayoutBBox(p,t,i,u),this.layoutWithBBox(p,u,t,i,r)}layoutWithBBox(e,t,i,r,n){let l=[0,0],o=t.length*n;"top"===r||("middle"===r?l[1]=(e.height-o)/2:"bottom"===r&&(l[1]=e.height-o));for(let o=0;o<t.length;o++)this.lineOffset(e,t[o],i,r,n,l);return{bbox:e,lines:t,fontFamily:this.fontFamily,fontSize:this.textOptions.fontSize,fontWeight:this.textOptions.fontWeight,lineHeight:n,textAlign:i,textBaseline:r}}lineOffset(e,t,i,r,n,l){if("left"===i||"start"===i?t.leftOffset=0:"center"===i?t.leftOffset=(e.width-t.width)/2:"right"!==i&&"end"!==i||(t.leftOffset=e.width-t.width),t.topOffset=n/2+(t.ascent-t.descent)/2+l[1],!t.keepCenterInLine){let e=t.ascent+t.descent+0;if(e<n-0&&("bottom"===r?t.topOffset+=(n-e)/2:"top"===r&&(t.topOffset-=(n-e)/2)),"alphabetic"===r){let e=n/(t.ascent+t.descent);t.topOffset=n/2+(t.ascent-t.descent)/2*e+l[1]}}return l[1]+=n,t}}let dX=["text","maxLineWidth","maxWidth","textAlign","textBaseline","heightLimit","lineClamp","fontSize","fontFamily","fontWeight","ellipsis","lineHeight","direction","wordBreak","heightLimit","lineClamp",...l7];class dY extends on{get font(){let e=this.getGraphicTheme();return this._font||(this._font=(0,dU.U)(this.attribute,e)),this._font}get clipedText(){var e;let t=this.attribute,i=this.getGraphicTheme();return Number.isFinite(this.getMaxWidth(i))?(this.tryUpdateAABBBounds(),this.cache.clipedText):(null!=(e=t.text)?e:i.text).toString()}get clipedWidth(){return this.tryUpdateAABBBounds(),this.cache.clipedWidth}get cliped(){var e,t;let i=this.getGraphicTheme(),r=this.attribute;if(!Number.isFinite(this.getMaxWidth(i)))return!1;let{text:n}=this.attribute;if(this.tryUpdateAABBBounds(),null==(t=null==(e=this.cache)?void 0:e.layoutData)?void 0:t.lines){let e="";return this.cache.layoutData.lines.forEach(t=>{e+=t.str}),(Array.isArray(n)?n.join(""):n).toString()!==e}return"vertical"===r.direction&&this.cache.verticalList&&this.cache.verticalList[0]?this.cache.verticalList[0].map(e=>e.text).join("")!==r.text.toString():null!=this.clipedText&&this.clipedText!==r.text.toString()}get multilineLayout(){return this.tryUpdateAABBBounds(),this.cache.layoutData}get isMultiLine(){return Array.isArray(this.attribute.text)||"normal"===this.attribute.whiteSpace}constructor(e={text:"",fontSize:16}){super(e),this.type="text",this.numberType=lN,this.cache={}}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{text:e}=this.attribute;return(0,ri.Z)(e)?!e.every(e=>null==e||""===e):null!=e&&""!==e}getGraphicTheme(){return r4(this).text}doUpdateOBBBounds(){let e=this.getGraphicTheme();this._OBBBounds.clear();let t=this.attribute,{angle:i=e.angle}=t;if(!i){let e=this.AABBBounds;return this._OBBBounds.setValue(e.x1,e.y1,e.x2,e.y2),this._OBBBounds}this.obbText||(this.obbText=new dY({})),this.obbText.setAttributes(Object.assign(Object.assign({},t),{angle:0}));let r=this.obbText.AABBBounds,{x:n,y:l}=t,o={x:(r.x1+r.x2)/2,y:(r.y1+r.y2)/2},a=(0,ai.xj)(o,i,{x:n,y:l});return this._OBBBounds.copy(r),this._OBBBounds.translate(a.x-o.x,a.y-o.y),this._OBBBounds.angle=i,this._OBBBounds}updateAABBBounds(e,t,i){let{text:r=t.text}=this.attribute;Array.isArray(r)?this.updateMultilineAABBBounds(r):this.updateSingallineAABBBounds(r);let{tb1:n}=tU.graphicService.updateTempAABBBounds(i),{scaleX:l=t.scaleX,scaleY:o=t.scaleY,shadowBlur:a=t.shadowBlur,strokeBoundsBuffer:s=t.strokeBoundsBuffer}=e;return a&&(lS(n,a/Math.abs(l+o),!0,s),i.union(n)),tU.graphicService.combindShadowAABBBounds(i,this),null==e.forceBoundsHeight&&null==e.forceBoundsWidth||tU.graphicService.updateHTMLTextAABBBounds(e,t,i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,(0,t4.n2)(i,i,this.transMatrix),i}updateSingallineAABBBounds(e){this.updateMultilineAABBBounds([e]);let t=this.cache.layoutData;if(t&&t.lines&&t.lines.length){let e=t.lines[0];this.cache.clipedText=e.str,this.cache.clipedWidth=e.width}return this._AABBBounds}updateMultilineAABBBounds(e){let t=this.getGraphicTheme(),{direction:i=t.direction,underlineOffset:r=t.underlineOffset}=this.attribute,n="horizontal"===i?this.updateHorizontalMultilineAABBBounds(e):this.updateVerticalMultilineAABBBounds(e);return"horizontal"===i&&r&&this._AABBBounds.add(this._AABBBounds.x1,this._AABBBounds.y2+r),n}guessLineHeightBuf(e){return e?.1*e:0}updateHorizontalMultilineAABBBounds(e){var t,i;let r=this.getGraphicTheme(),n=this.attribute,{fontFamily:l=r.fontFamily,textAlign:o=r.textAlign,textBaseline:a=r.textBaseline,fontSize:s=r.fontSize,fontWeight:h=r.fontWeight,ellipsis:d=r.ellipsis,maxLineWidth:u,stroke:c=r.stroke,wrap:p=r.wrap,measureMode:g=r.measureMode,lineWidth:f=r.lineWidth,whiteSpace:m=r.whiteSpace,suffixPosition:b=r.suffixPosition,ignoreBuf:y=r.ignoreBuf,keepCenterInLine:v=r.keepCenterInLine}=n,_=y?0:this.guessLineHeightBuf(s),C=this.getLineHeight(n,r,_);if("normal"===m||p)return this.updateWrapAABBBounds(e);if(!this.shouldUpdateShape()&&(null==(t=this.cache)?void 0:t.layoutData)){let e=this.cache.layoutData.bbox;return this._AABBBounds.set(e.xOffset,e.yOffset,e.xOffset+e.width,e.yOffset+e.height),c&&this._AABBBounds.expand(f/2),this._AABBBounds}let x=new dK(l,{fontSize:s,fontWeight:h,fontFamily:l,lineHeight:C},tU.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(i=this.stage)?void 0:i.textMeasureId))).GetLayoutByLines(e,o,a,C,!0===d?r.ellipsis:d||void 0,!1,{lineWidth:u,suffixPosition:b,measureMode:g,keepCenterInLine:v}),{bbox:w}=x;return this.cache.layoutData=x,this.clearUpdateShapeTag(),this._AABBBounds.set(w.xOffset,w.yOffset,w.xOffset+w.width,w.yOffset+w.height),c&&this._AABBBounds.expand(f/2),this._AABBBounds}updateWrapAABBBounds(e){var t,i,r,n;let l=this.getGraphicTheme(),{fontFamily:o=l.fontFamily,textAlign:a=l.textAlign,textBaseline:s=l.textBaseline,fontSize:h=l.fontSize,ellipsis:d=l.ellipsis,maxLineWidth:u,stroke:c=l.stroke,lineWidth:p=l.lineWidth,wordBreak:g=l.wordBreak,fontWeight:f=l.fontWeight,ignoreBuf:m=l.ignoreBuf,measureMode:b=l.measureMode,suffixPosition:y=l.suffixPosition,heightLimit:v=0,lineClamp:_,keepCenterInLine:C=l.keepCenterInLine}=this.attribute,x=m?0:this.guessLineHeightBuf(h),w=this.getLineHeight(this.attribute,l,x);if(!this.shouldUpdateShape()&&(null==(t=this.cache)?void 0:t.layoutData)){let e=this.cache.layoutData.bbox;return this._AABBBounds.set(e.xOffset,e.yOffset,e.xOffset+e.width,e.yOffset+e.height),c&&this._AABBBounds.expand(p/2),this._AABBBounds}let S=tU.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(i=this.stage)?void 0:i.textMeasureId)),A={fontSize:h,fontWeight:f,fontFamily:o,lineHeight:w},k=new dK(o,A,S),M=(0,ri.Z)(e)?e.map(e=>e.toString()):[e.toString()],T=[],R=[0,0],E=1/0;if(v>0&&(E=Math.max(Math.floor(v/w),1)),_&&(E=Math.min(E,_)),"number"==typeof u&&u!==1/0){if(u>0)for(let e=0;e<M.length;e++){let t=M[e],i=!0;if(e===E-1){let i=S.clipTextWithSuffix(t,A,u,d,!1,y,e!==M.length-1),r=S.measureTextPixelADscentAndWidth(i.str,A,b);T.push({str:i.str,width:i.width,ascent:r.ascent,descent:r.descent,keepCenterInLine:C});break}let l=S.clipText(t,A,u,"break-all"!==g,"keep-all"===g);if(""!==t&&""===l.str||l.wordBreaked){if(d){let e=S.clipTextWithSuffix(t,A,u,d,!1,y);l.str=null!=(r=e.str)?r:"",l.width=null!=(n=e.width)?n:0}else l.str="",l.width=0;i=!1}let o=S.measureTextPixelADscentAndWidth(l.str,A,b);T.push({str:l.str,width:l.width,ascent:o.ascent,descent:o.descent,keepCenterInLine:C});let a=l.str.length;if(l.wordBreaked&&(""===t||""!==l.str)&&(i=!0,a=l.wordBreaked),l.str.length===t.length);else if(i){let i=t.substring(a);"keep-all"===g&&(i=i.replace(/^\s+/g,"")),M.splice(e+1,0,i)}}let e=0;T.forEach(t=>{e=Math.max(e,t.width)}),R[0]=e}else{let e,t,i=0;for(let r=0,n=M.length;r<n;r++){if(r===E-1){let e=S.clipTextWithSuffix(M[r],A,u,d,!1,y),t=S.measureTextPixelADscentAndWidth(e.str,A,b);T.push({str:e.str,width:e.width,ascent:t.ascent,descent:t.descent,keepCenterInLine:C}),i=Math.max(i,e.width);break}t=M[r],i=Math.max(i,e=S.measureTextWidth(t,A));let n=S.measureTextPixelADscentAndWidth(t,A,b);T.push({str:t,width:e,ascent:n.ascent,descent:n.descent,keepCenterInLine:C})}R[0]=i}R[1]=T.length*w;let P={xOffset:0,yOffset:0,width:R[0],height:R[1]};k.LayoutBBox(P,a,s,T);let B=k.layoutWithBBox(P,T,a,s,w);return this.cache.layoutData=B,this.clearUpdateShapeTag(),this._AABBBounds.set(P.xOffset,P.yOffset,P.xOffset+P.width,P.yOffset+P.height),c&&this._AABBBounds.expand(p/2),this._AABBBounds}updateVerticalMultilineAABBBounds(e){var t,i,r;let n,l=this.getGraphicTheme(),o=tU.graphicUtil.getTextMeasureInstance(this.textMeasureId||(null==(t=this.stage)?void 0:t.textMeasureId)),a=this.attribute,{maxLineWidth:s=l.maxLineWidth,ellipsis:h=l.ellipsis,fontFamily:d=l.fontFamily,fontSize:u=l.fontSize,fontWeight:c=l.fontWeight,stroke:p=l.stroke,lineWidth:g=l.lineWidth,verticalMode:f=l.verticalMode,suffixPosition:m=l.suffixPosition}=a,b=this.getLineHeight(a,l,0),{textAlign:y=l.textAlign,textBaseline:v=l.textBaseline}=a;if(!f){let e=y;y=null!=(i=dY.baselineMapAlign[v])?i:"left",v=null!=(r=dY.alignMapBaseline[e])?r:"top"}if(n=0,!this.shouldUpdateShape()&&this.cache){this.cache.verticalList.forEach(e=>{let t=e.reduce((e,t)=>e+t.width,0);n=(0,t0.Fp)(t,n)});let e=oU(y,n),t=this.cache.verticalList.length*b,i=oK(v,t,u);return this._AABBBounds.set(i,e,i+t,e+n),p&&this._AABBBounds.expand(g/2),this._AABBBounds}let _=e.map(e=>(function(e){let t=[],i=0,r="";for(let n=0;n<e.length;n++)!function(e){if(lM.has(e))return!0;if(lT.has(e))return!1;let t=!1;return 256>e.codePointAt(0)&&(t=!0),t}(e[n])?(i&&(t.push({text:r,direction:sx.VERTICAL}),r="",i=0),t.push({text:e[n],direction:sx.HORIZONTAL})):i?r+=e[n]:(i=1,r=e[n]);return r&&t.push({text:r,direction:sx.VERTICAL}),t})(e.toString()));_.forEach((e,t)=>{if(Number.isFinite(s))if(h){let i=!0===h?l.ellipsis:h,r=o.clipTextWithSuffixVertical(e,{fontSize:u,fontWeight:c,fontFamily:d},s,i,!1,m);_[t]=r.verticalList,n=r.width}else{let i=o.clipTextVertical(e,{fontSize:u,fontWeight:c,fontFamily:d},s,!1);_[t]=i.verticalList,n=i.width}else n=0,e.forEach(e=>{let t=e.direction===sx.HORIZONTAL?u:o.measureTextWidth(e.text,{fontSize:u,fontWeight:c,fontFamily:d});n+=t,e.width=t})}),this.cache.verticalList=_,this.clearUpdateShapeTag(),this.cache.verticalList.forEach(e=>{let t=e.reduce((e,t)=>e+t.width,0);n=(0,t0.Fp)(t,n)});let C=oU(y,n),x=this.cache.verticalList.length*b,w=oK(v,x,u);return this._AABBBounds.set(w,C,w+x,C+n),p&&this._AABBBounds.expand(g/2),this._AABBBounds}getMaxWidth(e){var t,i;let r=this.attribute;return null!=(i=null!=(t=r.maxLineWidth)?t:r.maxWidth)?i:e.maxWidth}getLineHeight(e,t,i){var r;return null!=(r=nx(e.lineHeight,e.fontSize||t.fontSize))?r:(e.fontSize||t.fontSize)+i}needUpdateTags(e,t=dX){return super.needUpdateTags(e,t)}needUpdateTag(e,t=dX){return super.needUpdateTag(e,t)}_interpolate(e,t,i,r,n){"text"===e&&(n.text=r)}clone(){return new dY(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return dY.NOWORK_ANIMATE_ATTR}getBaselineMapAlign(){return dY.baselineMapAlign}getAlignMapBaseline(){return dY.alignMapBaseline}}function dq(e){return new dY(e)}function dJ(e){return d||(d=oq.CreateGraphic("text",{})),d.initAttributes(e),d.AABBBounds}dY.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,direction:1,textAlign:1,textBaseline:1,fontFamily:1,fontWeight:1},or),dY.baselineMapAlign={top:"left",bottom:"right",middle:"center"},dY.alignMapBaseline={left:"top",right:"bottom",center:"middle"};let dQ=new class extends aH{constructor(){super(...arguments),this.time=sv.beforeFillStroke}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){var c,p,g,f,m,b,y,v,_,C;let x,{backgroundMode:w=s.backgroundMode,backgroundFit:S=s.backgroundFit,backgroundKeepAspectRatio:A=s.backgroundKeepAspectRatio}=e.attribute,k,{background:M}=e.attribute;if(!M)return;let T=()=>{"richtext"===e.type&&(t.restore(),t.save(),k&&t.setTransformFromMatrix(k,!0,1))};"richtext"===e.type&&(k=t.currentMatrix.clone(),t.restore(),t.save(),t.setTransformForCurrent());let R=(0,r9.Z)(M)&&M.background,E=e.transMatrix.onlyTranslate();if(R){let t=e.AABBBounds,i=(null!=(c=M.x)?c:t.x1)+(null!=(p=M.dx)?p:0),r=(null!=(g=M.y)?g:t.y1)+(null!=(f=M.dy)?f:0),n=null!=(m=M.width)?m:t.width(),l=null!=(b=M.height)?b:t.height();if(x=au.allocate(i,r,i+n,r+l),M=M.background,!E){let e=x.width(),t=x.height();x.set((null!=(y=M.x)?y:0)+(null!=(v=M.dx)?v:0),(null!=(_=M.y)?_:0)+(null!=(C=M.dy)?C:0),e,t)}}else x=e.AABBBounds,E||(x=dJ(Object.assign(Object.assign({},e.attribute),{angle:0,scaleX:1,scaleY:1,x:0,y:0,dx:0,dy:0})).clone());if(e.backgroundImg&&e.resources){let n=e.resources.get(M);if("success"!==n.state||!n.data)return void T();t.highPerformanceSave(),E&&t.setTransformFromMatrix(e.parent.globalTransMatrix,!0),t.setCommonStyle(e,e.attribute,i,r,s),this.doDrawImage(t,n.data,x,{backgroundMode:w,backgroundFit:S,backgroundKeepAspectRatio:A}),t.highPerformanceRestore(),t.setTransformForCurrent()}else{let{backgroundCornerRadius:n}=e.attribute;t.highPerformanceSave(),t.setCommonStyle(e,e.attribute,i,r,s),t.fillStyle=M,n?(am(t,x.x1,x.y1,x.width(),x.height(),n,!0),t.fill()):t.fillRect(x.x1,x.y1,x.width(),x.height()),t.highPerformanceRestore()}R&&au.free(x),T()}};var d0=function(e,t){return function(i,r){t(i,r,e)}};let d1=class extends aG{constructor(e){super(),this.graphicRenderContributions=e,this.numberType=lN,this.builtinContributions=[dQ],this.init(e)}drawShape(e,t,i,r,n,l,o,a){var s,h,d;let u=r4(e,null==l?void 0:l.theme).text,{text:c,underline:p=u.underline,lineThrough:g=u.lineThrough,keepDirIn3d:f=u.keepDirIn3d,direction:m=u.direction,fontSize:b=u.fontSize,verticalMode:y=u.verticalMode,x:v=u.x,y:_=u.y}=e.attribute,C=null!=(s=nx(e.attribute.lineHeight,b))?s:b,x=this.valid(e,u,o,a);if(!x)return;let{fVisible:w,sVisible:S,doFill:A,doStroke:k}=x,M=!f,T=this.z||0;t.beginPath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,u),this.beforeRenderStep(e,t,i,r,A,k,w,S,u,n,o,a),M&&this.transformUseContext2d(e,u,T,t);let R=(n,l,s,h)=>{let d=i+l,c=r+s;if(h){t.highPerformanceSave(),d+=b;let e=l1.allocate(1,0,0,1,0,0);e.rotateByCenter(Math.PI/2,d,c),t.transformFromMatrix(e,!0),l1.free(e)}k&&(a?a(t,e.attribute,u):S&&(t.setStrokeStyle(e,e.attribute,v-i,_-r,u),t.strokeText(n,d,c,T))),A&&(o?o(t,e.attribute,u):w&&(t.setCommonStyle(e,e.attribute,v-i,_-r,u),t.fillText(n,d,c,T))),h&&(t.highPerformanceRestore(),t.setTransformForCurrent())};if(t.setTextStyleWithoutAlignBaseline(e.attribute,u,T),"horizontal"===m){let{multilineLayout:n}=e;if(!n)return void t.highPerformanceRestore();let{xOffset:l,yOffset:s}=n.bbox;k&&(a?a(t,e.attribute,u):S&&(t.setStrokeStyle(e,e.attribute,v-i,_-r,u),n.lines.forEach(e=>{t.strokeText(e.str,(e.leftOffset||0)+l+i,(e.topOffset||0)+s+r,T)}))),A&&(o?o(t,e.attribute,u):w&&(t.setCommonStyle(e,e.attribute,v-i,_-r,u),n.lines.forEach(n=>{t.fillText(n.str,(n.leftOffset||0)+l+i,(n.topOffset||0)+s+r,T),this.drawUnderLine(p,g,e,(n.leftOffset||0)+l+i,(n.topOffset||0)+s+r,n.descent,(n.descent-n.ascent)/2,T,u,t,{width:n.width})})))}else{let{textAlign:i=u.textAlign,textBaseline:r=u.textBaseline}=e.attribute;if(!y){let t=i;i=null!=(h=e.getBaselineMapAlign()[r])?h:"left",r=null!=(d=e.getAlignMapBaseline()[t])?d:"top"}e.tryUpdateAABBBounds();let{verticalList:n}=e.cache;t.textAlign="left",t.textBaseline="top";let l=C*n.length,o=0;n.forEach(e=>{let t=e.reduce((e,t)=>e+(t.width||0),0);o=(0,t0.Fp)(t,o)});let a=0,s=0;"bottom"===r?s=-l:"middle"===r&&(s=-l/2),"center"===i?a-=o/2:"right"===i&&(a-=o),n.forEach((e,t)=>{let r=e.reduce((e,t)=>e+(t.width||0),0),n=o-r,h=a;"center"===i?h+=n/2:"right"===i&&(h+=n),e.forEach(e=>{let{text:i,width:r,direction:n}=e;R(i,l-(t+1)*C+s,h,n),h+=r})})}M&&this.restoreTransformUseContext2d(e,u,T,t),this.afterRenderStep(e,t,i,r,A,k,w,S,u,n,o,a)}draw(e,t,i,r){let n=r4(e,null==r?void 0:r.theme).text,{keepDirIn3d:l=n.keepDirIn3d}=e.attribute;this._draw(e,n,!l,i,r)}drawUnderLine(e,t,i,r,n,l,o,a,s,h,d){if(t+e<=0)return;let{textAlign:u=s.textAlign,fill:c=s.fill,opacity:p=s.opacity,underlineOffset:g=s.underlineOffset,underlineDash:f=s.underlineDash,fillOpacity:m=s.fillOpacity}=i.attribute,b=!(0,r5.Z)(d),y=b?d.width:i.clipedWidth,v=b?0:oU(u,y),_={lineWidth:0,stroke:c,opacity:p,strokeOpacity:m};if(e){_.lineWidth=e,h.setStrokeStyle(i,_,r,n,s),f&&h.setLineDash(f),h.beginPath();let t=n+l+g;h.moveTo(r+v,t,a),h.lineTo(r+v+y,t,a),h.stroke()}if(t){_.lineWidth=t,h.setStrokeStyle(i,_,r,n,s),h.beginPath();let e=n+o;h.moveTo(r+v,e,a),h.lineTo(r+v+y,e,a),h.stroke()}}};d1=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),d0(0,tT(tE)),d0(0,tR(aI)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],d1);let d2=!1,d3=new tb(e=>{d2||(d2=!0,e(oM).to(d1).inSingletonScope(),e(o_).toService(oM),e(aI).toService(aD),tB(e,aI))}),d4=sK(),d5=Symbol.for("MathPickerContribution"),d6=Symbol.for("MathArcPicker"),d8=Symbol.for("MathAreaPicker"),d7=Symbol.for("MathCirclePicker"),d9=Symbol.for("MathImagePicker"),ue=Symbol.for("MathLinePicker"),ut=Symbol.for("MathPathPicker"),ui=Symbol.for("MathRectPicker"),ur=Symbol.for("MathSymbolPicker"),un=Symbol.for("MathTextPicker"),ul=Symbol.for("MathPolygonPicker"),uo=Symbol.for("MathGlyphPicker"),ua=Symbol.for("CanvasArcPicker");Symbol.for("CanvasArc3dPicker");let us=Symbol.for("CanvasAreaPicker"),uh=Symbol.for("CanvasCirclePicker"),ud=Symbol.for("CanvasImagePicker");Symbol.for("CanvasGifImagePicker");let uu=Symbol.for("CanvasLinePicker");Symbol.for("CanvasLottiePicker");let uc=Symbol.for("CanvasPathPicker"),up=Symbol.for("CanvasRectPicker");Symbol.for("CanvasRect3dPicker");let ug=Symbol.for("CanvasSymbolPicker"),uf=Symbol.for("CanvasTextPicker"),um=Symbol.for("CanvasPolygonPicker");Symbol.for("CanvasPyramid3dPicker");let ub=Symbol.for("CanvasRichTextPicker"),uy=Symbol.for("CanvasGlyphPicker"),uv=Symbol.for("CanvasGroupPicker");Symbol.for("CanvasStarPicker");let u_=Symbol.for("CanvasPickerContribution");class uC extends aG{contains(e,t,i){let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=e.getGraphicTheme();r.highPerformanceSave();let{x:l,y:o,z:a,lastModelMatrix:s}=this.transform(e,n,r),h=t;if(r.camera){h=t.clone();let i=e.parent.globalTransMatrix;h.x=i.a*t.x+i.c*t.y+i.e,h.y=i.b*t.x+i.d*t.y+i.f}this.canvasRenderer.z=a;let d=!1;return this.canvasRenderer.drawShape(e,r,l,o,i,null,(e,t,i)=>!!d||(d=e.isPointInPath(h.x,h.y))),this.canvasRenderer.z=0,r.modelMatrix!==s&&l2.free(r.modelMatrix),r.modelMatrix=s,r.highPerformanceRestore(),d}}let ux=class extends uC{constructor(e){super(),this.canvasRenderer=e,this.type="text",this.numberType=lN}contains(e,t,i){let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=e.AABBBounds;if(!r.camera)return!!n.containsPoint(t);r.highPerformanceSave();let l=e.getGraphicTheme(),{keepDirIn3d:o=l.keepDirIn3d}=e.attribute,{x:a,y:s,z:h,lastModelMatrix:d}=this.transform(e,l,r,!o);this.canvasRenderer.z=h;let u=t;if(r.camera){u=t.clone();let i=e.parent.globalTransMatrix;u.x=i.a*t.x+i.c*t.y+i.e,u.y=i.b*t.x+i.d*t.y+i.f}let c=!1;return this.canvasRenderer.drawShape(e,r,a,s,{},null,(t,i,r)=>{if(c)return!0;let{fontSize:n=l.fontSize,textBaseline:o=l.textBaseline,textAlign:d=l.textAlign}=e.attribute,p=e.AABBBounds,g=p.height(),f=p.width(),m=oK(o,g,n),b=oU(d,f);return t.rect(b+a,m+s,f,g,h),c=t.isPointInPath(u.x,u.y)},(e,t,i)=>c),this.canvasRenderer.z=0,r.modelMatrix!==d&&l2.free(r.modelMatrix),r.modelMatrix=d,r.highPerformanceRestore(),c}};ux=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(S=tT(oM),function(e,t){S(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],ux);let uw=!1,uS=new tb((e,t,i,r)=>{uw||(uw=!0,e(uf).to(ux).inSingletonScope(),e(u_).toService(uf))}),uA=class{constructor(){this.type="text",this.numberType=lN}contains(e,t,i){return!!e.AABBBounds.containsPoint(t)}};uA=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],uA);let uk=!1,uM=new tb((e,t,i,r)=>{uk||(uk=!0,e(un).to(uA).inSingletonScope(),e(d5).toService(un))});function uT(){uT.__loaded||(uT.__loaded=!0,oq.RegisterGraphicCreator("text",dq),tG.load(d3),tG.load(d4?uS:uM))}uT.__loaded=!1;let uR=new class{constructor(){this.time=sv.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){let c=e.getParsedPath();if(!c)return;let{outerBorder:p,innerBorder:g}=e.attribute,f=p&&!1!==p.visible,m=g&&!1!==g.visible;if(!f&&!m)return;let{size:b=s.size,opacity:y=s.opacity,x:v=s.x,y:_=s.y,scaleX:C=s.scaleX,scaleY:x=s.scaleY,keepStrokeScale:w=s.keepStrokeScale}=e.attribute,S=(n,l)=>{let o=!(!n||!n.stroke),{distance:a=s[l].distance}=n,h=w?a:rl(t,a,t.dpr);if(t.beginPath(),!1===c.drawOffset(t,b,i,r,("outerBorder"===l?1:-1)*h)&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u)u(t,n,s[l]);else if(o){let o=s[l].opacity;s[l].opacity=y,t.setStrokeStyle(e,n,(v-i)/C,(_-r)/x,s[l]),s[l].opacity=o,t.stroke()}};f&&S(p,"outerBorder"),m&&S(g,"innerBorder")}},uE=new class{constructor(){this.time=sv.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{clipRange:p=s.clipRange,x:g=s.x,y:f=s.y,z:m=s.z,size:b=s.size,scaleX:y=s.scaleX,scaleY:v=s.scaleY}=e.attribute,_=e.getParsedPath();_&&p<1&&p>0&&(t.beginPath(),_.drawWithClipRange&&_.drawWithClipRange(t,b,i,r,p,m,(n,l)=>{var o,h,d,c;if(e._parsedPath.svgCache){let t=Object.assign({},l);t.fill=null!=(o=l.fill)?o:e.attribute.fill,t.opacity=null!=(h=l.opacity)?h:e.attribute.opacity,t.fillOpacity=e.attribute.fillOpacity,t.stroke=null!=(d=l.stroke)?d:e.attribute.stroke,t.lineWidth=null!=(c=l.lineWidth)?c:e.attribute.lineWidth,l=t}l.stroke&&(u?u(t,e.attribute,s):a&&(t.setStrokeStyle(e,l,(g-i)/y,(f-r)/v,s),t.stroke()))}),l&&!_.isSvg&&(u?u(t,e.attribute,s):a&&(t.setStrokeStyle(e,e.attribute,(g-i)/y,(f-r)/v,s),t.stroke())))}};var uP=function(e,t){return function(i,r){t(i,r,e)}};let uB=class extends aG{constructor(e){super(),this.graphicRenderContributions=e,this.numberType=lZ,this.builtinContributions=[uR,aO,a3,uE],this.init(e)}drawShape(e,t,i,r,n,l,o,a,s){var h;s=null!=s?s:r4(e,null==l?void 0:l.theme).symbol;let{size:d=s.size,x:u=s.x,y:c=s.y,scaleX:p=s.scaleX,scaleY:g=s.scaleY,fillStrokeOrder:f=s.fillStrokeOrder,clipRange:m=s.clipRange}=e.attribute,b=this.valid(e,s,o,a);if(!b)return;let{fVisible:y,sVisible:v,doFill:_,doStroke:C}=b,x=e.getParsedPath();if(!x)return;let{keepDirIn3d:w=s.keepDirIn3d}=e.attribute,S=null!=(h=this.z)?h:0;t.beginPath();let A=i,k=r,M=S,T=t.camera;if(w&&T&&t.project){let e=t.project(i,r,S);t.camera=null,(0,ri.Z)(d)&&(d[0],d[1]),A=e.x,k=e.y,M=void 0}!1===x.draw(t,d,A,k,M,(n,l)=>{var h,d,b,y;if(e._parsedPath.svgCache){let t=Object.assign({},l);t.fill=null!=(h=l.fill)?h:e.attribute.fill,t.opacity=null!=(d=l.opacity)?d:e.attribute.opacity,t.fillOpacity=e.attribute.fillOpacity,t.stroke=null!=(b=l.stroke)?b:e.attribute.stroke,t.lineWidth=null!=(y=l.lineWidth)?y:e.attribute.lineWidth,l=t}let _=()=>{l.fill&&(o?o(t,e.attribute,s):(t.setCommonStyle(e,l,u-i,c-r,s),t.fill()))},C=()=>{l.stroke&&(a?a(t,e.attribute,s):v&&m>=1&&(t.setStrokeStyle(e,l,(u-i)/p,(c-r)/g,s),t.stroke()))};f?(C(),_()):(_(),C())})&&t.closePath(),t.camera=T,t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),this.beforeRenderStep(e,t,i,r,_,C,y,v,s,n,o,a),f?(this._runStroke(e,t,i,r,s,C,v,u,c,x,m,p,g,a),this._runFill(e,t,i,r,s,_,y,u,c,x,o)):(this._runFill(e,t,i,r,s,_,y,u,c,x,o),this._runStroke(e,t,i,r,s,C,v,u,c,x,m,p,g,a)),this.afterRenderStep(e,t,i,r,_,C,y,v,s,n,o,a)}_runFill(e,t,i,r,n,l,o,a,s,h,d){l&&!h.isSvg&&(d?d(t,e.attribute,n):o&&(t.setCommonStyle(e,e.attribute,a-i,s-r,n),t.fill()))}_runStroke(e,t,i,r,n,l,o,a,s,h,d,u,c,p){l&&!h.isSvg&&(p?p(t,e.attribute,n):o&&d>=1&&(t.setStrokeStyle(e,e.attribute,(a-i)/u,(s-r)/c,n),t.stroke()))}draw(e,t,i,r){let n=r4(e,null==r?void 0:r.theme).symbol;this._draw(e,n,!1,i,r)}};uB=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),uP(0,tT(tE)),uP(0,tR(aB)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],uB);let uI=!1,uL=new tb(e=>{uI||(uI=!0,e(uB).toSelf().inSingletonScope(),e(ok).to(uB).inSingletonScope(),e(o_).toService(ok),e(aB).toService(aD),tB(e,aB))}),uF=class extends uC{constructor(e){super(),this.canvasRenderer=e,this.type="symbol",this.numberType=lZ}contains(e,t,i){let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=e.getParsedPath();if(!r.camera){if(!e.AABBBounds.containsPoint(t))return!1;if(n.isSvg||"imprecise"===e.attribute.pickMode)return!0}r.highPerformanceSave();let l=e.getGraphicTheme(),{x:o,y:a,z:s,lastModelMatrix:h}=this.transform(e,l,r),d=t;if(r.camera){d=t.clone();let i=e.parent.globalTransMatrix;d.x=i.a*t.x+i.c*t.y+i.e,d.y=i.b*t.x+i.d*t.y+i.f}this.canvasRenderer.z=s;let u=!1;return this.canvasRenderer.drawShape(e,r,o,a,{},null,(e,t,i)=>!!u||(u=e.isPointInPath(d.x,d.y)),(e,t,i)=>{if(u)return!0;let n=t.lineWidth||i.lineWidth,l=t.pickStrokeBuffer||i.pickStrokeBuffer;return r.lineWidth=t.keepStrokeScale||i.keepStrokeScale?n+l:rl(r,n+l,r.dpr),u=e.isPointInStroke(d.x,d.y)}),this.canvasRenderer.z=0,r.modelMatrix!==h&&l2.free(r.modelMatrix),r.modelMatrix=h,r.highPerformanceRestore(),u}};uF=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(A=tT(ok),function(e,t){A(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],uF);let uH=!1,uO=new tb((e,t,i,r)=>{uH||(uH=!0,e(ug).to(uF).inSingletonScope(),e(u_).toService(ug))});class uD{contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode||!this.canvasRenderer)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=e.getGraphicTheme();r.highPerformanceSave();let{x:l=n.x,y:o=n.y}=e.attribute;if(e.transMatrix.onlyTranslate()){let t=e.getOffsetXY(n);l+=t.x,o+=t.y,r.setTransformForCurrent()}else l=0,o=0,r.transformFromMatrix(e.transMatrix,!0);let a=!1,s=!1;return this.canvasRenderer.drawShape(e,r,l,o,{},null,(e,i,r,n)=>!(!a&&!s)||(a=e.isPointInPath(t.x,t.y),s=n||s,a),(e,i,n,l)=>{if(a||s)return!0;let o=i.lineWidth||n.lineWidth,h=i.pickStrokeBuffer||n.pickStrokeBuffer;return r.lineWidth=i.keepStrokeScale||n.keepStrokeScale?o+h:rl(r,o+h,r.dpr),a=e.isPointInStroke(t.x,t.y),s=l||s,a}),r.highPerformanceRestore(),a}}let uz=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="symbol",this.numberType=lZ}};uz=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(k=tT(ok),function(e,t){k(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],uz);let uW=!1,uZ=new tb((e,t,i,r)=>{uW||(uW=!0,e(ur).to(uz).inSingletonScope(),e(d5).toService(ur))});function uN(){uN.__loaded||(uN.__loaded=!0,oq.RegisterGraphicCreator("symbol",a1),tG.load(uL),tG.load(d4?uO:uZ))}uN.__loaded=!1;let u$=e=>{if(!e)return{x:0,y:0,width:0,height:0};let t=(0,r5.Z)(e.width)?e.x1-e.x:e.width,i=(0,r5.Z)(e.height)?e.y1-e.y:e.height,r=0,n=0;return t<0?(r=t,t=-t):Number.isNaN(t)&&(t=0),i<0?(n=i,i=-i):Number.isNaN(i)&&(i=0),{x:r,y:n,width:t,height:i}},uj=(e,t,i)=>{let{outerBorder:r,shadowBlur:n=t.shadowBlur}=e;if(r){let e=t.outerBorder,{distance:l=e.distance,lineWidth:o=e.lineWidth}=r;i.expand(l+(n+o)/2)}return i},uG=["width","x1","y1","height","cornerRadius",...l7];class uV extends on{constructor(e){super(e),this.type="rect",this.numberType=lz}isValid(){return super.isValid()&&this._isValid()}_isValid(){return!0}getGraphicTheme(){return r4(this).rect}updateAABBBounds(e,t,i){if(!this.updatePathProxyAABBBounds(i)){let{width:t,height:r}=e,{x1:n,y1:l,x:o,y:a}=e;t=null!=t?t:n-o,r=null!=r?r:l-a,(isFinite(t)||isFinite(r)||isFinite(o)||isFinite(a))&&i.set(0,0,t||0,r||0)}let{tb1:r,tb2:n}=tU.graphicService.updateTempAABBBounds(i);return uj(e,t,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,tU.graphicService.transformAABBBounds(e,i,t,!1,this),i}needUpdateTags(e){return super.needUpdateTags(e,uG)}needUpdateTag(e){return super.needUpdateTag(e,uG)}toCustomPath(){let e=super.toCustomPath();if(e)return e;let{x:t,y:i,width:r,height:n}=u$(this.attribute);return(e=new iZ).moveTo(t,i),e.rect(t,i,r,n),e}clone(){return new uV(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return uV.NOWORK_ANIMATE_ATTR}}function uU(e){return new uV(e)}uV.NOWORK_ANIMATE_ATTR=or;var uK=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o};class uX{constructor(){this.time=sv.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){let{outerBorder:c,innerBorder:p}=e.attribute,g=c&&!1!==c.visible,f=p&&!1!==p.visible;if(!g&&!f)return;let{cornerRadius:m=s.cornerRadius,cornerType:b=s.cornerType,opacity:y=s.opacity,x:v=s.x,y:_=s.y,scaleX:C=s.scaleX,scaleY:x=s.scaleY,x1:w,y1:S,keepStrokeScale:A=s.keepStrokeScale}=e.attribute,{width:k,height:M}=e.attribute;k=(null!=k?k:w-i)||0,M=(null!=M?M:S-r)||0;let T=(n,l)=>{let o=!(!n||!n.stroke),a="outerBorder"===l?-1:1,{distance:h=s[l].distance}=n,d=A?h:rl(t,h,t.dpr),c=i+a*d,p=r+a*d,g=2*d;if(0===m||(0,ri.Z)(m)&&m.every(e=>0===e)?(t.beginPath(),t.rect(c,p,k-a*g,M-a*g)):(t.beginPath(),am(t,c,p,k-a*g,M-a*g,m,"bevel"!==b)),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u)u(t,n,s[l]);else if(o){let o=s[l].opacity;s[l].opacity=y,t.setStrokeStyle(e,n,(v-i)/C,(_-r)/x,s[l]),s[l].opacity=o,t.stroke()}};g&&T(c,"outerBorder"),f&&T(p,"innerBorder")}}let uY=class{constructor(){this.time=sv.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{stroke:p=s.stroke}=e.attribute;Array.isArray(p)&&p.some(e=>!1===e)&&(c.doStroke=!1)}};uY=uK([tS()],uY);let uq=class{constructor(){this.time=sv.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){let{x1:c,y1:p,x:g=s.x,y:f=s.y,stroke:m=s.stroke,cornerRadius:b=s.cornerRadius,cornerType:y=s.cornerType}=e.attribute,{width:v,height:_}=e.attribute;if(v=(null!=v?v:c-g)||0,_=(null!=_?_:p-f)||0,Array.isArray(m)&&m.some(e=>!1===e)){if(t.setStrokeStyle(e,e.attribute,i,r,s),!(0===b||(0,ri.Z)(b)&&b.every(e=>0===e))){let n,l=0;return am(t,i,r,v,_,b,"bevel"!==y,[,,,,].fill(0).map((o,a)=>(o,h,d,u)=>{m[a]&&(l===a-1&&m[a]===n||(t.setStrokeStyle(e,Object.assign(Object.assign({},e.attribute),{stroke:m[a]}),i,r,s),t.beginPath(),t.moveTo(o,h),n=m[a]),l=a,t.lineTo(d,u),t.stroke(),3===a&&t.beginPath())})),void t.stroke()}if(t.beginPath(),t.moveTo(i,r),m[0]?t.lineTo(i+v,r):t.moveTo(i+v,r),m[1]?t.lineTo(i+v,r+_):t.moveTo(i+v,r+_),m[2]?t.lineTo(i,r+_):t.moveTo(i,r+_),m[3]){let e=m[0]?r-t.lineWidth/2:r;t.lineTo(i,e)}else t.moveTo(i,r);t.stroke()}}};uq=uK([tS()],uq);let uJ=new uX;var uQ=function(e,t){return function(i,r){t(i,r,e)}};let u0=class extends aG{constructor(e){super(),this.graphicRenderContributions=e,this.type="rect",this.numberType=lz,this.builtinContributions=[uJ,aO,a3],this.init(e)}drawShape(e,t,i,r,n,l,o,a,s){s=null!=s?s:r4(e,null==l?void 0:l.theme).rect;let{fill:h=s.fill,background:d,stroke:u=s.stroke,cornerRadius:c=s.cornerRadius,cornerType:p=s.cornerType,opacity:g=s.opacity,fillOpacity:f=s.fillOpacity,lineWidth:m=s.lineWidth,strokeOpacity:b=s.strokeOpacity,visible:y=s.visible,x1:v,y1:_,x:C=s.x,y:x=s.y,fillStrokeOrder:w=s.fillStrokeOrder,drawStrokeWhenZeroWH:S=s.drawStrokeWhenZeroWH}=e.attribute,{width:A,height:k}=e.attribute,M=av(g,f,A=(null!=A?A:v-C)||0,k=(null!=k?k:_-x)||0,h),T=a_(g,b,A,k,S),R=!(!h&&!d),E=ab(u,m);if(!e.valid||!y||!R&&!E||!(M||T||o||a||d))return;0===c||(0,ri.Z)(c)&&c.every(e=>0===e)?(t.beginPath(),t.rect(i,r,A,k)):(t.beginPath(),am(t,i,r,A,k,c,"bevel"!==p));let P={doFill:R,doStroke:E};t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),this.beforeRenderStep(e,t,i,r,R,E,M,T,s,n,o,a,P),w?(this._runStroke(e,t,i,r,s,P,T,C,x,a),this._runFill(e,t,i,r,s,P,M,C,x,o)):(this._runFill(e,t,i,r,s,P,M,C,x,o),this._runStroke(e,t,i,r,s,P,T,C,x,a)),this.afterRenderStep(e,t,i,r,R,E,M,T,s,n,o,a)}_runFill(e,t,i,r,n,l,o,a,s,h){l.doFill&&(h?h(t,e.attribute,n):o&&(t.setCommonStyle(e,e.attribute,a-i,s-r,n),t.fill()))}_runStroke(e,t,i,r,n,l,o,a,s,h){l.doStroke&&(h?h(t,e.attribute,n):o&&(t.setStrokeStyle(e,e.attribute,a-i,s-r,n),t.stroke()))}draw(e,t,i,r){let n=r4(e,null==r?void 0:r.theme).rect;this._draw(e,n,!1,i,r,n)}};u0=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),uQ(0,tT(tE)),uQ(0,tR(aP)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],u0);let u1=!1,u2=new tb(e=>{u1||(u1=!0,e(u0).toSelf().inSingletonScope(),e(oA).to(u0).inSingletonScope(),e(o_).toService(oA),e(uq).toSelf(),e(uY).toSelf(),e(aP).toService(uq),e(aP).toService(uY),e(aP).toService(aD),tB(e,aP))}),u3=new t4.FB;class u4{constructor(){this.type="rect",this.numberType=lz}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=e.getGraphicTheme(),{cornerRadius:l=n.cornerRadius}=e.attribute,{x:o=n.x,y:a=n.y}=e.attribute;r.highPerformanceSave();let s=!0;if(e.transMatrix.onlyTranslate()){let t=e.getOffsetXY(n);o+=t.x,a+=t.y,r.setTransformForCurrent()}else o=0,a=0,s=!1,r.transformFromMatrix(e.transMatrix,!0);let h=!0;if(!s||e.shadowRoot||(0,nw.Z)(l,!0)&&0!==l||(0,ri.Z)(l)&&l.some(e=>0!==e))h=!1,this.canvasRenderer.drawShape(e,r,o,a,{},null,(e,i,r)=>!!h||(h=e.isPointInPath(t.x,t.y)),(e,i,n)=>{if(h)return!0;let l=i.lineWidth||n.lineWidth,o=i.pickStrokeBuffer||n.pickStrokeBuffer;return r.lineWidth=i.keepStrokeScale||n.keepStrokeScale?l+o:rl(r,l+o,r.dpr),h=e.isPointInStroke(t.x,t.y)});else{let{fill:i=n.fill,stroke:r=n.stroke,lineWidth:l=n.lineWidth}=e.attribute;if(i)h=!0;else if(r){let i=e.AABBBounds;u3.setValue(i.x1,i.y1,i.x2,i.y2),u3.expand(-l/2),h=!u3.containsPoint(t)}}return r.highPerformanceRestore(),h}}let u5=class extends u4{constructor(e){super(),this.canvasRenderer=e}};u5=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(M=tT(oA),function(e,t){M(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],u5);let u6=!1,u8=new tb((e,t,i,r)=>{u6||(u6=!0,e(up).to(u5).inSingletonScope(),e(u_).toService(up))}),u7=class extends u4{constructor(e){super(),this.canvasRenderer=e}};u7=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(T=tT(oA),function(e,t){T(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],u7);let u9=!1,ce=new tb((e,t,i,r)=>{u9||(u9=!0,e(ui).to(u7).inSingletonScope(),e(d5).toService(ui))});function ct(){ct.__loaded||(ct.__loaded=!0,oq.RegisterGraphicCreator("rect",uU),tG.load(u2),tG.load(d4?u8:ce))}function ci(e){e.crosshair=(0,ag.IX)(e.crosshair||{}).map(t=>hs({["horizontal"===e.direction?"yField":"xField"]:{visible:!0,line:{visible:!0,type:"rect"}}},t))}function cr(e,t,i){var r;let{width:n,height:l}=e;if((0,oV.Z)(n)&&(0,oV.Z)(l))return{width:n,height:l};let o=i.width,a=i.height,s=t.container,h=t.canvas;if(s){let{width:e,height:t}=(0,oG.Op)(s,i.width,i.height);o=e,a=t}else if(h&&sq(t.mode)){let e;e=(0,r6.Z)(h)?sI.getElementById(h):h;let{width:t,height:r}=(0,oG.Op)(e,i.width,i.height);o=t,a=r}else if(sQ(t.mode)&&(null==(r=t.modeParams)?void 0:r.domref)){let e=t.modeParams.domref;o=e.width,a=e.height}return{width:o=null!=n?n:o,height:a=null!=l?l:a}}function cn(e,...t){let i=i=>t.reduce((e,t)=>e||(null==t?void 0:t[i]),e[i]);return Object.assign(e,{change:i("change"),reCompile:i("reCompile"),reMake:i("reMake"),reRender:i("reRender"),reSize:i("reSize"),reTransformSpec:i("reTransformSpec"),changeTheme:i("changeTheme"),changeBackground:i("changeBackground")}),e}function cl(e,t){return"line"===e||"area"===e||"common"===e&&t.series.every(e=>"area"===e.type||"line"===e.type)?{paddingInner:1,paddingOuter:0}:{paddingOuter:0}}ct.__loaded=!1,(R=X||(X={}))[R.SeriesGroup=0]="SeriesGroup",R[R.Axis_Grid=50]="Axis_Grid",R[R.CrossHair_Grid=100]="CrossHair_Grid",R[R.Region=450]="Region",R[R.Mark=300]="Mark",R[R.Node=400]="Node",R[R.Axis=100]="Axis",R[R.MarkLine=500]="MarkLine",R[R.MarkArea=100]="MarkArea",R[R.MarkPoint=500]="MarkPoint",R[R.DataZoom=500]="DataZoom",R[R.ScrollBar=500]="ScrollBar",R[R.Player=500]="Player",R[R.Legend=500]="Legend",R[R.CrossHair=500]="CrossHair",R[R.Indicator=500]="Indicator",R[R.Title=500]="Title",R[R.Label=500]="Label",R[R.Brush=500]="Brush",R[R.CustomMark=500]="CustomMark",R[R.Interaction=700]="Interaction",(E=Y||(Y={}))[E.Indicator=10]="Indicator",E[E.Region=20]="Region",E[E.Axis=30]="Axis",E[E.DataZoom=40]="DataZoom",E[E.Player=40]="Player",E[E.ScrollBar=40]="ScrollBar",E[E.Legend=50]="Legend",E[E.Title=70]="Title",E[E.CustomMark=70]="CustomMark",(P=q||(q={}))[P.Default=0]="Default",P[P.Theme=1]="Theme",P[P.Chart=2]="Chart",P[P.Base_Series=3]="Base_Series",P[P.Series=4]="Series",P[P.Mark=5]="Mark",P[P.User_Chart=6]="User_Chart",P[P.User_Series=7]="User_Series",P[P.User_Mark=8]="User_Mark",P[P.User_SeriesStyle=9]="User_SeriesStyle",P[P.Built_In=99]="Built_In";class co{constructor(){this._children=[],this._markNameMap={},this._infoMap=new Map}getMarkNameMap(){return this._markNameMap}addMark(e,t){(0,r5.Z)(e)||(this._children.push(e),this._markNameMap[e.name]=e,this._infoMap.set(e,(0,ha.Z)({},co.defaultMarkInfo,t)))}removeMark(e){let t=this._children.findIndex(t=>t.name===e);t>=0&&(this._infoMap.delete(this._children[t]),delete this._markNameMap[e],this._children.splice(t,1))}clear(){this._children=[],this._markNameMap={},this._infoMap.clear()}forEach(e){this._children.forEach(e)}includes(e,t){return this._children.includes(e,t)}get(e){return isNaN(Number(e))?this._markNameMap[e]:this._children[e]}getMarks(){return this._children.slice()}getMarksInType(e){let t=(0,ag.IX)(e);return this._children.filter(e=>t.includes(e.type))}getMarkInId(e){return this._children.find(t=>t.id===e)}getMarkWithInfo(e){return this._children.find(t=>Object.keys(e).every(i=>e[i]===this._infoMap.get(t)[i]))}}co.defaultMarkInfo={};class ca{getOption(){return this._option}constructor(e){this._option=e,this.getCompiler=this._option.getCompiler}getStage(){var e;return null==(e=this.getCompiler())?void 0:e.getStage()}release(){this._option=null,this.getCompiler=null}}class cs{constructor(e){this._option=e,this.type=e.type}_initTheme(e,t){return this._theme=this.getTheme(e,t),this._mergeThemeToSpec(e,t)}getTheme(e,t){}transformSpec(e,t,i){this._transformSpecBeforeMergingTheme(e,t,i);let r=this._initTheme(e,t);return this._transformSpecAfterMergingTheme(r.spec,t,i),r}_transformSpecBeforeMergingTheme(e,t,i){}_transformSpecAfterMergingTheme(e,t,i){}_mergeThemeToSpec(e,t){let i=this._theme;if(this._shouldMergeThemeToSpec()){let r=this._getDefaultSpecFromChart(t),n=e=>hs({},i,r,e);return(0,ri.Z)(e)?{spec:e.map(e=>n(e)),theme:i}:{spec:n(e),theme:i}}return{spec:e,theme:i}}_shouldMergeThemeToSpec(){return!0}_getDefaultSpecFromChart(e){}}let ch=(e,t,i)=>{if((0,r5.Z)(t))return e;let r=t[0];return(0,r5.Z)(r)?e:1===t.length?(e[r]=i,e):((0,r5.Z)(e[r])&&("number"==typeof t[1]?e[r]=[]:e[r]={}),ch(e[r],t.slice(1),i))},cd=(e,t,i)=>{if(!(0,r5.Z)(t))return(0,hH.Z)(e,t,i)};var cu=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class cc extends ca{getSpec(){return this._spec||{}}getSpecPath(){var e;return null==(e=this._option)?void 0:e.specPath}getSpecInfoPath(){var e,t,i;return null!=(t=null==(e=this._option)?void 0:e.specInfoPath)?t:null==(i=this._option)?void 0:i.specPath}getData(){return this._data}get layout(){return this._layout}getOption(){return this._option}getMarks(){var e,t;return null!=(t=null==(e=this._marks)?void 0:e.getMarks())?t:[]}getMarkNameMap(){var e;return null==(e=this._marks)?void 0:e.getMarkNameMap()}getMarkSet(){return this._marks}getChart(){return this._option.getChart()}get _theme(){var e;return null==(e=this.getSpecInfo())?void 0:e.theme}constructor(e,t){var i;super(t),this.transformerConstructor=cs,this.type="null",this.modelType="null",this.userId=void 0,this._data=null,this._layout=null,this.specKey="",this._marks=new co,this._lastLayoutRect=null,this.id=sO(),this.userId=e.id,this._spec=e,this.effect={},this.event=new hB(t.eventDispatcher,t.mode),null==(i=t.map)||i.set(this.id,this)}_releaseEvent(){this.event.release()}created(){this.setAttrFromSpec()}init(e){}afterInit(){}getVisible(){var e;return!1!==(null==(e=this._spec)?void 0:e.visible)}onLayoutStart(e,t){var i;null==(i=this._layout)||i.onLayoutStart(e,t)}onLayoutEnd(){var e;null==(e=this._layout)||e.onLayoutEnd(),this.getMarks().forEach(e=>e.commit(!1,!0))}onEvaluateEnd(e){}onBeforeRender(){}onDataUpdate(){}beforeRelease(){}clear(){this.getMarks().forEach(e=>{var t;return null==(t=e.clear)?void 0:t.call(e)})}release(){var e;this._releaseEvent(),this._spec=void 0,this.getMarks().forEach(e=>e.release()),null==(e=this._data)||e.release(),this._data=null,this._marks.clear(),super.release()}updateSpec(e){var t;let i=this._compareSpec(e,this._spec);return(i.reRender||i.reMake||i.reCompile)&&(null==(t=this._layout)||t.setWillLayoutTag()),this._spec=e,i}_compareSpec(e,t){return{change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1}}reInit(e){e&&(this._spec=e),this.setAttrFromSpec()}updateLayoutAttribute(){}setAttrFromSpec(){var e;null==(e=this._layout)||e.setAttrFromSpec(this._spec,this._option.getChartViewRect())}_convertMarkStyle(e){return Object.assign({},e)}setMarkStyle(e,t,i,r){(0,oV.Z)(e)&&(0,oV.Z)(t)&&e.setStyle(this._convertMarkStyle(t),i,r)}initMarkStyleWithSpec(e,t){if(!(0,oV.Z)(e)||!(0,oV.Z)(t))return;let{style:i,state:r}=t,n=Object.assign({},t);i&&(n.style=this._convertMarkStyle(i)),r&&(n.state={},Object.keys(r).forEach(e=>{n.state[e]=this._convertMarkStyle(r[e])})),e.initStyleWithSpec(n)}stateKeyToSignalName(e,t){let i=`${dg}_${this.modelType}_${this.type}_${this.id}_${e}`;return t&&(i+=`_${t}`),i}compileData(){var e;null==(e=this._data)||e.compile()}compileMarks(e){this.getMarks().forEach(t=>{t.compile({group:e})})}_createMark(e,t={},i){let{type:r,name:n}=e,{parent:l}=t,o=cu(t,["parent"]),a=hp.createMark(r,n,Object.assign({model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._option.globalScale},o));return l?l.addMark(a):this.getCompiler().addRootMark(a),a&&(a.created(),i&&a.setMarkConfig(i)),a}_getDataIdKey(){}getColorScheme(){var e,t;return null==(t=(e=this._option).getTheme)?void 0:t.call(e,"colorScheme")}getSpecInfo(){var e,t,i;return cd(null!=(i=null==(t=(e=this._option).getSpecInfo)?void 0:t.call(e))?i:{},this.getSpecInfoPath())}getSpecIndex(){let e=this.getSpecPath();if(!(null==e?void 0:e.length))return 0;let t=Number(e[e.length-1]);return isNaN(t)?0:t}updateAnimateStateCallback(e){this._aniamtionStateCallback=e}getAnimationStateCallback(){return this._aniamtionStateCallback}}class cp{getSpec(){return this._spec||{}}getLayoutStartPoint(){return this._layoutStartPoint}get layoutRectLevelMap(){return this._layoutRectLevelMap}get minWidth(){return this._minWidth}set minWidth(e){this._minWidth=e}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth=e}get minHeight(){return this._minHeight}set minHeight(e){this._minHeight=e}get maxHeight(){return this._maxHeight}set maxHeight(e){this._maxHeight=e}get lastComputeRect(){return this._lastComputeRect}getLastComputeOutBounds(){return this._lastComputeOutBounds}get layoutOrient(){return this._layoutOrient}set layoutOrient(e){this._layoutOrient=e}get model(){return this._model}get type(){return this._model.type}get willLayoutTag(){return this._willLayoutTag}constructor(e,t){var i;this.layoutClip=!1,this.autoIndent=!1,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:0,height:0},this._layoutRectLevelMap={width:0,height:0},this._minWidth=null,this._maxWidth=null,this._minHeight=null,this._maxHeight=null,this._lastComputeRect=null,this._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0},this.getLayoutRect=()=>this._layoutRect,this.layoutType="normal",this._layoutOrient="left",this.layoutPaddingLeft=0,this.layoutPaddingTop=0,this.layoutPaddingRight=0,this.layoutPaddingBottom=0,this.layoutOffsetX=0,this.layoutOffsetY=0,this.layoutLevel=Y.Region,this._willLayoutTag=!0,this._model=e,this._option=t,this.layoutLevel=t.layoutLevel,this.layoutType=t.layoutType,t.layoutOrient&&(this.layoutOrient=t.layoutOrient),this._spec=null==(i=null==e?void 0:e.getSpec)?void 0:i.call(e)}_setLayoutAttributeFromSpec(e,t){var i,r,n,l;if(this._spec&&!1!==this._spec.visible){let o=sj(sG(e.padding),t,t);this._option.transformLayoutPadding&&(o=this._option.transformLayoutPadding(o)),this.layoutPaddingLeft=o.left,this.layoutPaddingRight=o.right,this.layoutPaddingTop=o.top,this.layoutPaddingBottom=o.bottom,this._minHeight=(0,r5.Z)(e.minHeight)?null!=(i=this._minHeight)?i:null:s$(e.minHeight,t.height,t),this._maxHeight=(0,r5.Z)(e.maxHeight)?null!=(r=this._maxHeight)?r:null:s$(e.maxHeight,t.height,t),this._minWidth=(0,r5.Z)(e.minWidth)?null!=(n=this._minWidth)?n:null:s$(e.minWidth,t.width,t),this._maxWidth=(0,r5.Z)(e.maxWidth)?null!=(l=this._maxWidth)?l:null:s$(e.maxWidth,t.width,t),e.width&&this.setLayoutRect({width:s$(e.width,t.width,t)},{width:9}),e.height&&this.setLayoutRect({height:s$(e.height,t.height,t)},{height:9}),(0,r5.Z)(e.offsetX)||(this.layoutOffsetX=s$(e.offsetX,t.width,t)),(0,r5.Z)(e.offsetY)||(this.layoutOffsetY=s$(e.offsetY,t.height,t)),e.alignSelf&&(this.alignSelf=e.alignSelf)}}setAttrFromSpec(e,t){var i,r,n,l;this._spec=e,this.layoutType=null!=(i=e.layoutType)?i:this.layoutType,this.layoutLevel=null!=(r=e.layoutLevel)?r:this.layoutLevel,this.layoutOrient=null!=(n=e.orient)?n:this.layoutOrient,this._setLayoutAttributeFromSpec(e,t),this.layoutClip=null!=(l=e.clip)?l:this.layoutClip}onLayoutStart(e,t){this._setLayoutAttributeFromSpec(this._spec,t)}onLayoutEnd(){}_getAbsoluteSpecValue(e){let t={top:null,bottom:null,left:null,right:null};return["top","bottom","left","right"].forEach(i=>{(0,r5.Z)(this._spec[i])||(t[i]=s$(this._spec[i],"top"===i||"bottom"===i?e.height:e.width,e))}),t}absoluteLayoutInRect(e){let{top:t,bottom:i,left:r,right:n}=this._getAbsoluteSpecValue(e),l={width:e.width-this.layoutPaddingLeft-this.layoutPaddingRight,height:e.height-this.layoutPaddingTop-this.layoutPaddingBottom};(0,r5.Z)(r)||(l.width-=r),(0,r5.Z)(n)||(l.width-=n),(0,r5.Z)(t)||(l.height-=t),(0,r5.Z)(i)||(l.height-=i),this.setLayoutRect(l);let{width:o,height:a}=this.computeBoundsInRect(this.getLayoutRect());this.setLayoutRect({width:o,height:a});let s={x:e.x,y:e.y};!0===this._spec.center?(s.x=e.x+.5*e.width-.5*o,s.y=e.y+.5*e.height-.5*a):((0,r5.Z)(r)?(0,r5.Z)(n)||(s.x=e.x+e.width-this.layoutPaddingRight-n-o):s.x=e.x+r+this.layoutPaddingLeft,(0,r5.Z)(t)?(0,r5.Z)(i)||(s.y=e.y+e.height-this.layoutPaddingBottom-i-a):s.y=e.y+t+this.layoutPaddingTop),this.setLayoutStartPosition(s)}setLayoutStartPosition(e){var t,i;this._option.transformLayoutPosition&&(e=this._option.transformLayoutPosition(e)),(0,sD.Z)(e.x)&&(this._layoutStartPoint.x=e.x),(0,sD.Z)(e.y)&&(this._layoutStartPoint.y=e.y),null==(i=(t=this._model).afterSetLayoutStartPoint)||i.call(t,this._layoutStartPoint)}setLayoutRect({width:e,height:t},i){var r,n,l,o;(0,sD.Z)(e)&&(null!=(r=null==i?void 0:i.width)?r:0)>=this._layoutRectLevelMap.width&&(this._layoutRect.width=e,this._layoutRectLevelMap.width=null!=(n=null==i?void 0:i.width)?n:0),(0,sD.Z)(t)&&(null!=(l=null==i?void 0:i.height)?l:0)>=this._layoutRectLevelMap.height&&(this._layoutRect.height=t,this._layoutRectLevelMap.height=null!=(o=null==i?void 0:i.height)?o:0),this.setRectInSpec(this._layoutRect)}getLayout(){return{x:this._layoutStartPoint.x,y:this._layoutStartPoint.y,width:this._layoutRect.width,height:this._layoutRect.height}}mergeLayoutRect({width:e,height:t}){let i={width:e,height:t};return this._layoutRectLevelMap.width>0&&(i.width=this._layoutRect.width),this._layoutRectLevelMap.height>0&&(i.height=this._layoutRect.height),i}getOrientPosAttribute(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"x":"y"}getOrientSizeAttribute(){return"bottom"===this._layoutOrient||"top"===this._layoutOrient?"width":"height"}changeBoundsBySetting(e){return this._layoutRectLevelMap.width>0&&(e.x2=e.x1+this._layoutRect.width),this._layoutRectLevelMap.height>0&&(e.y2=e.y1+this._layoutRect.height),e.x1-=this._layoutStartPoint.x,e.x2-=this._layoutStartPoint.x,e.y1-=this._layoutStartPoint.y,e.y2-=this._layoutStartPoint.y,e}setRectInSpec(e){let t=Object.assign({},e);return this._layoutRectLevelMap.width<9?((0,r5.Z)(this._minWidth)||(t.width=Math.max(t.width,this._minWidth)),(0,r5.Z)(this._maxWidth)||(t.width=Math.min(t.width,this._maxWidth))):t.width=this._layoutRect.width,this._layoutRectLevelMap.height<9?((0,r5.Z)(this._minHeight)||(t.height=Math.max(t.height,this._minHeight)),(0,r5.Z)(this._maxHeight)||(t.height=Math.min(t.height,this._maxHeight))):t.height=this._layoutRect.height,t}computeBoundsInRect(e){if(this._lastComputeRect=e,("region-relative"===this.layoutType||"region-relative-overlap"===this.layoutType)&&(9===this._layoutRectLevelMap.width&&("left"===this.layoutOrient||"right"===this.layoutOrient)||9===this._layoutRectLevelMap.height&&("bottom"===this.layoutOrient||"top"===this.layoutOrient)))return this._layoutRect;let t=Object.assign({},this._model.getBoundsInRect(this.setRectInSpec(e),e));this.changeBoundsBySetting(t),this.autoIndent&&t.x2-t.x1>0&&t.y2-t.y1>0&&(this._lastComputeOutBounds.x1=Math.ceil(-t.x1),this._lastComputeOutBounds.x2=Math.ceil(t.x2-e.width),this._lastComputeOutBounds.y1=Math.ceil(-t.y1),this._lastComputeOutBounds.y2=Math.ceil(t.y2-e.height));let i=this.setRectInSpec(t?{width:Math.ceil(Math.min(t.x2-t.x1,e.width)),height:Math.ceil(Math.min(t.y2-t.y1,e.height))}:{width:0,height:0});return this._option.transformLayoutRect&&(i=this._option.transformLayoutRect(i)),i}getModelId(){return this._model.id}getModelVisible(){return this._model.getVisible()}setWillLayoutTag(){this._willLayoutTag=!0}clearWillLayoutTag(){this._willLayoutTag=!1}}class cg extends cc{constructor(){super(...arguments),this.layoutType="normal",this.layoutLevel=0,this.layoutZIndex=0,this._forceLayoutTag=!1,this._layout=null,this._orient=null,this._layoutRect={width:0,height:0},this._layoutStartPos={x:0,y:0},this._isLayout=!0,this.getGraphicBounds=()=>this._layout?{x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}:{x1:0,x2:0,y1:0,y2:0},this._transformLayoutRect=null,this._transformLayoutPosition=null,this._transformLayoutPadding=null}get layoutOrient(){return this._orient}set layoutOrient(e){this._orient=e,this._layout&&(this._layout.layoutOrient=e)}initLayout(){"none"!==this.layoutType&&(this._layout=new cp(this,{layoutType:this.layoutType,layoutLevel:this.layoutLevel,layoutOrient:this._orient,transformLayoutRect:this._transformLayoutRect,transformLayoutPosition:this._transformLayoutPosition,transformLayoutPadding:this._transformLayoutPadding}),this._orient&&"radius"!==this._orient&&"angle"!==this._orient&&this._layout&&(this._layout.layoutOrient=this._orient))}onLayoutStart(e,t){this._isLayout=!0,super.onLayoutStart(e,t)}onLayoutEnd(){super.onLayoutEnd(),this.updateLayoutAttribute();let e=this.getLayoutRect();!this._forceLayoutTag&&(0,dN.X)(this._lastLayoutRect,e)||(this._lastLayoutRect=Object.assign({},e)),this._forceLayoutTag=!1,this._isLayout=!1}afterSetLayoutStartPoint(e){}_forceLayout(){var e,t;this._isLayout||(null==(e=this._layout)||e.setWillLayoutTag(),this._forceLayoutTag=!0,null==(t=this._option.globalInstance.getChart())||t.setLayoutTag(!0))}getLayoutStartPoint(){return this._layout?this._layout.getLayoutStartPoint():this._layoutStartPos}setLayoutStartPosition(e){return this._layout?this._layout.setLayoutStartPosition(e):this._layoutStartPos=(0,ha.Z)(this._layoutStartPos,e)}getLayoutRect(){return this._layout?this._layout.getLayoutRect():this._layoutRect}setLayoutRect(e,t){return this._layout?this._layout.setLayoutRect(e):this._lastLayoutRect=(0,ha.Z)(this._layoutRect,e)}getLastComputeOutBounds(){var e;return null==(e=this._layout)?void 0:e.getLastComputeOutBounds()}setAttrFromSpec(){var e,t,i,r,n;super.setAttrFromSpec(),this.layoutClip=null!=(e=this._spec.clip)?e:this.layoutClip,this.layoutZIndex=null!=(t=this._spec.zIndex)?t:this.layoutZIndex,this.layoutType=null!=(i=this._spec.layoutType)?i:this.layoutType,this._orient=null!=(r=this._spec.orient)?r:this._orient,this.layoutLevel=null!=(n=this._spec.layoutLevel)?n:this.layoutLevel}}class cf extends cs{_initTheme(e,t){return{spec:e,theme:this._theme}}}class cm extends cg{getMaxWidth(){return this._layout.maxWidth}setMaxWidth(e){this._layout.maxWidth=e}getMaxHeight(){return this._layout.maxHeight}setMaxHeight(e){this._layout.maxHeight=e}getGroupMark(){return this._groupMark}getInteractionMark(){return this._interactionMark}getStackInverse(){return!0===this._spec.stackInverse}getStackSort(){return!0===this._spec.stackSort}constructor(e,t){var i;super(e,t),this.transformerConstructor=cf,this.modelType="region",this.specKey="region",this.type=cm.type,this._series=[],this.layoutType="region",this.layoutZIndex=X.Region,this.seriesDataFilterOver=()=>{this.event.emit(N.regionSeriesDataFilterOver,{model:this,chart:this.getChart()}),this._series.forEach(e=>{e.getViewDataFilter()&&e.reTransformViewData()})},this.getBoundsInRect=()=>({x1:this._layout.getLayoutStartPoint().x,y1:this._layout.getLayoutStartPoint().y,x2:this._layout.getLayoutStartPoint().x+this._layout.getLayoutRect().width,y2:this._layout.getLayoutStartPoint().y+this._layout.getLayoutRect().height}),this.userId=e.id,this.coordinate=null!=(i=e.coordinate)?i:"cartesian"}_getClipDefaultValue(){var e,t,i,r;let n=this._option.getChart().getSpec(),l=null==(t=null==(e=n.dataZoom)?void 0:e.some)?void 0:t.call(e,e=>{var t;return"axis"===(null!=(t=e.filterMode)?t:"filter")}),o=null==(r=null==(i=n.scrollBar)?void 0:i.some)?void 0:r.call(i,e=>{var t;return"axis"===(null!=(t=e.filterMode)?t:"axis")});return!(!l&&!o)||this._layout.layoutClip}created(){var e,t;this.initLayout(),super.created();let i=null!=(e=this._spec.clip)?e:this._getClipDefaultValue();this._groupMark=this._createGroupMark("regionGroup",this.userId,this.layoutZIndex),this._spec.roam&&this._groupMark.setMarkConfig({interactive:!0}),this._interactionMark=this._createGroupMark("regionInteractionGroup",(null!=(t=this.userId)?t:this.type)+"_interaction",X.Interaction),(0,d$.Z)(this._spec.style)||(this._backgroundMark=this._createMark({type:"rect",name:"regionBackground"},{parent:this._groupMark}),i&&(this._foregroundMark=this._createMark({type:"rect",name:"regionForeground"},{parent:this._groupMark})),[this._backgroundMark,this._foregroundMark].forEach(e=>{e&&(e.created(),this.setMarkStyle(e,{width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height},"normal",q.Built_In),this._groupMark.addMark(e))}),this._backgroundMark&&this._backgroundMark.setMarkConfig({zIndex:X.SeriesGroup-1}),this._foregroundMark&&this._foregroundMark.setMarkConfig({zIndex:X.Mark+1}))}_createGroupMark(e,t,i){var r,n;let l=this._createMark({type:"group",name:e});l.setUserId(t),l.setMarkConfig({zIndex:i});let o=null!=(r=this._spec.clip)?r:this._getClipDefaultValue();return this.setMarkStyle(l,{x:()=>this.getLayoutStartPoint().x,y:()=>this.getLayoutStartPoint().y,width:()=>this.getLayoutRect().width,height:()=>this.getLayoutRect().height,clip:o},"normal",q.Built_In),this.setMarkStyle(l,{cornerRadius:null==(n=this._spec.style)?void 0:n.cornerRadius},"normal",q.User_Mark),this._marks.addMark(l),l}init(e){super.init(e),this.initMark(),this.initSeriesDataflow()}initMark(){this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}_initBackgroundMarkStyle(){var e,t;this._backgroundMark&&(this.setMarkStyle(this._backgroundMark,Object.assign({fillOpacity:+(null!=(e=this._spec.style)&&!!e.fill)},this._spec.style),"normal",q.User_Mark),(null!=(t=this._spec.clip)?t:this._getClipDefaultValue())&&this.setMarkStyle(this._backgroundMark,{strokeOpacity:0},"normal",q.Built_In))}_initForegroundMarkStyle(){this._foregroundMark&&this.setMarkStyle(this._foregroundMark,Object.assign(Object.assign({},this._spec.style),{fillOpacity:0,pickable:!1}),"normal",q.User_Mark)}_compareSpec(e,t){let i=super._compareSpec(e,t);return(0,dN.X)(null==t?void 0:t.style,null==e?void 0:e.style)||(i.reMake=!0),i}reInit(e){super.reInit(e),this._initBackgroundMarkStyle(),this._initForegroundMarkStyle()}addSeries(e){e&&(this._series.includes(e)||this._series.push(e))}removeSeries(e){if(!e)return;let t=this._series.findIndex(t=>t===e);t>=0&&this._series.splice(t,1)}getSeries(e={}){return this._series.filter(t=>{var i,r;return(!e.name||(null==t?void 0:t.name)===e.name)&&(!e.userId||(0,ag.IX)(e.userId).includes(t.userId))&&(!(0,oV.Z)(e.specIndex)||(0,ag.IX)(e.specIndex).includes(t.getSpecIndex()))&&(!e.id||t.id===e.id)&&(!e.type||t.type===e.type)&&(!e.coordinateType||t.coordinate===e.coordinateType)&&(!e.dataName||(null==(r=null==(i=t.getRawData)?void 0:i.call(t))?void 0:r.name)===e.dataName)})}getSeriesInName(e){return this.getSeries({name:e})[0]}getSeriesInUserId(e){return this.getSeries({userId:e})[0]}getSeriesInId(e){return this.getSeries({id:e})[0]}getSeriesInType(e){return this.getSeries({type:e})}getSeriesInCoordinateType(e){return this.getSeries({coordinateType:e})}getSeriesInDataName(e){return this.getSeries({dataName:e})}initSeriesDataflow(){let e=this._series.map(e=>{var t;return null!=(t=e.getViewDataFilter())?t:e.getViewData()}).filter(e=>!!e);this._option.dataSet.multipleDataViewAddListener(e,"change",this.seriesDataFilterOver)}release(){super.release(),this._series=[]}compileMarks(e){this.getMarks().forEach(t=>{t.compile({group:e,context:{model:this}})})}compile(){this.compileMarks()}onLayoutEnd(){this._series.forEach(e=>e.onLayoutEnd()),super.onLayoutEnd()}}function cb(e){let t=[],i=[],r=[];return e.forEach(e=>{(0,r5.Z)(e.getSpec().position)||"start"===e.getSpec().position?t.push(e):"middle"===e.getSpec().position?i.push(e):"end"===e.getSpec().position&&r.push(e)}),{startItems:t,endItems:r,middleItems:i}}function cy(e,t,i){t?e.forEach(e=>{let t=(0,ag.Z$)(e),r=(i-(t.getLayoutStartPoint().y+t.getLayoutRect().height-e[0].getLayoutStartPoint().y))/2;e.forEach(e=>{e.setLayoutStartPosition({x:e.getLayoutStartPoint().x,y:e.getLayoutStartPoint().y+r})})}):e.forEach(e=>{let t=(0,ag.Z$)(e),r=(i-(t.getLayoutStartPoint().x+t.getLayoutRect().width-e[0].getLayoutStartPoint().x))/2;e.forEach(e=>{e.setLayoutStartPosition({x:e.getLayoutStartPoint().x+r,y:e.getLayoutStartPoint().y})})})}function cv(e,t,i,r){let n;e.forEach((e,l)=>{e.length>1&&(n=i[l],e.forEach(e=>{if(!e.alignSelf||"start"===e.alignSelf)return;let i=e.getLayoutStartPoint(),l="middle"===e.alignSelf?.5:1,o=t?n-(e.getLayoutRect().width+e.layoutPaddingLeft+e.layoutPaddingRight):n-(e.getLayoutRect().height+e.layoutPaddingTop+e.layoutPaddingBottom);t?e.setLayoutStartPosition({x:i.x+r*o*l,y:i.y}):e.setLayoutStartPosition({x:i.x,y:i.y+r*o*l})}))})}function c_(e,t,i,r,n,l){if(e.length){let o=0,a="right"===n,s=a?-1:1,h=a?t.rightCurrent:t.leftCurrent,d=t.topCurrent,u=[],c=[],p=[];e.forEach(e=>{let{rect:r}=cS(e,t,l),n=r.height+e.layoutPaddingTop+e.layoutPaddingBottom,g=r.width+e.layoutPaddingLeft+e.layoutPaddingRight,f=a?-r.width-e.layoutPaddingRight:e.layoutPaddingLeft;e.setLayoutStartPosition({x:h+e.layoutOffsetX+f,y:d+e.layoutOffsetY+e.layoutPaddingTop}),(d+=n)>i&&c.length?(p.push(o),h+=s*o,o=g,d=t.topCurrent+n,e.setLayoutStartPosition({x:h+e.layoutOffsetX+f,y:t.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),u.push(c),c=[e]):(o=Math.max(o,g),c.push(e))}),p.push(o),u.push(c),cv(u,!0,p,s),r&&cy(u,!0,i),a?t.rightCurrent=h+s*o:t.leftCurrent=h+s*o}}function cC(e,t,i,r,n){if(e.length){let i=0,l="right"===r,o=l?-1:1,a=l?t.rightCurrent:t.leftCurrent,s=t.bottomCurrent,h=[],d=[],u=[];e.forEach(e=>{let{rect:r}=cS(e,t,n),c=r.height+e.layoutPaddingTop+e.layoutPaddingBottom,p=r.width+e.layoutPaddingLeft+e.layoutPaddingRight,g=l?-r.width-e.layoutPaddingRight:e.layoutPaddingLeft;s<c&&d.length?(u.push(i),a+=o*i,i=p,s=t.bottomCurrent,e.setLayoutStartPosition({x:a+e.layoutOffsetX+g,y:s+e.layoutOffsetY-r.height-e.layoutPaddingBottom}),h.push(d),d=[e]):(e.setLayoutStartPosition({x:a+e.layoutOffsetX+g,y:s+e.layoutOffsetY-r.height-e.layoutPaddingBottom}),i=Math.max(i,p),s-=c,d.push(e))}),u.push(i),h.push(d),cv(h,!0,u,o),l?t.rightCurrent=a+o*i:t.leftCurrent=a+o*i}}function cx(e,t,i,r,n,l){if(e.length){let o="top"===n,a=o?1:-1,s=0,h=t.leftCurrent,d=o?t.topCurrent:t.bottomCurrent,u=[],c=[],p=[];e.forEach(e=>{let{rect:r}=cS(e,t,l),n=r.height+e.layoutPaddingTop+e.layoutPaddingBottom,g=r.width+e.layoutPaddingLeft+e.layoutPaddingRight,f=o?e.layoutPaddingTop:-r.height-e.layoutPaddingBottom;e.setLayoutStartPosition({x:h+e.layoutOffsetX+e.layoutPaddingLeft,y:d+e.layoutOffsetY+f}),(h+=g)>i&&c.length?(p.push(s),h=t.leftCurrent+g,d+=a*s,s=n,e.setLayoutStartPosition({x:t.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:d+e.layoutOffsetY+f}),u.push(c),c=[e]):(s=Math.max(s,n),c.push(e))}),p.push(s),u.push(c),cv(u,!1,p,a),r&&cy(u,!1,i),o?t.topCurrent=d+a*s:t.bottomCurrent=d+a*s}}function cw(e,t,i,r,n){if(e.length){let i="top"===r,l=i?1:-1,o=0,a=t.rightCurrent,s=i?t.topCurrent:t.bottomCurrent,h=[],d=[],u=[];e.forEach(e=>{let{layoutTag:r,layoutRect:u,rect:c}=cS(e,t,n),p=c.height+e.layoutPaddingTop+e.layoutPaddingBottom,g=c.width+e.layoutPaddingLeft+e.layoutPaddingRight,f=i?e.layoutPaddingTop:-c.height-e.layoutPaddingBottom;a<g&&d.length?(a=t.rightCurrent,s+=l*o,o=p,e.setLayoutStartPosition({x:t.rightCurrent+e.layoutOffsetX-c.width-e.layoutPaddingRight,y:s+e.layoutOffsetY+f}),h.push(d),d=[e]):(d.push(e),e.setLayoutStartPosition({x:a+e.layoutOffsetX-c.width-e.layoutPaddingRight,y:s+e.layoutOffsetY+f}),o=Math.max(o,p),a-=g)}),u.push(o),h.push(d),cv(h,!1,u,l),i?t.topCurrent=s+l*o:t.bottomCurrent=s+l*o}}function cS(e,t,i,r=!0){let n,l,o="recomputeHeight",a="recomputeWidth",s="width";"top"!==e.layoutOrient&&"bottom"!==e.layoutOrient||(o="recomputeWidth",a="recomputeHeight",s="height");let h=!(!e.willLayoutTag&&!1===i[o]);if(h){let o=Object.assign({},e.getLayoutRect()),d=e.lastComputeRect;n=t.getItemComputeLayoutRect(e),!e.willLayoutTag&&(0,dN.X)(n,d)?(h=!1,l=e.getLayoutRect()):(l=e.computeBoundsInRect(n),(0,dN.X)(o[s],l[s])?h=!1:(r&&e.setLayoutRect(l),i[a]=!0))}else n=e.getLastComputeOutBounds(),l=e.getLayoutRect();return{layoutRect:n,rect:l,layoutTag:h}}cm.type="region",cm.transformerConstructor=cf,cm.specKey="region";class cA{constructor(e,t){this.leftCurrent=0,this.topCurrent=0,this.rightCurrent=0,this.bottomCurrent=0,this.recomputeWidth=!1,this.recomputeHeight=!1,this._onError=null==t?void 0:t.onError}_layoutInit(e,t,i,r){this._chartLayoutRect=i,this._chartViewBox=r,this.leftCurrent=i.x,this.topCurrent=i.y,this.rightCurrent=i.x+i.width,this.bottomCurrent=i.height+i.y,this.recomputeWidth=!1,this.recomputeHeight=!1,t.sort((e,t)=>t.layoutLevel-e.layoutLevel)}_layoutNormalItems(e,t){this.layoutNormalInlineItems(e.filter(e=>"normal-inline"===e.layoutType),t),this.layoutNormalItems(e.filter(e=>"normal"===e.layoutType),t)}_groupItems(e){let t=e.filter(e=>"region"===e.layoutType),i=e.filter(e=>"region-relative"===e.layoutType),r=e.filter(e=>"region-relative-overlap"===e.layoutType),n=i.concat(r),l={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}};return r.forEach(e=>{l[e.layoutOrient].items.push(e)}),{regionItems:t,relativeItems:i,relativeOverlapItems:r,allRelatives:n,overlapItems:l}}layoutItems(e,t,i,r){var n,l,o;this._layoutInit(e,t,i,r);let a={recomputeWidth:this.recomputeWidth,recomputeHeight:this.recomputeHeight},s=null!=(o=null==(l=null==(n=null==e?void 0:e.getSpec())?void 0:n.layout)?void 0:l.secondLayoutLeftRight)&&o;this._layoutNormalItems(t,a);let h={left:this.leftCurrent,top:this.topCurrent,right:this.rightCurrent,bottom:this.bottomCurrent},{regionItems:d,relativeItems:u,relativeOverlapItems:c,allRelatives:p,overlapItems:g}=this._groupItems(t);this.layoutRegionItems(d,u,c,g,a,s),this._processAutoIndent(d,u,c,g,p,h,a,s),this.layoutAbsoluteItems(t.filter(e=>"absolute"===e.layoutType)),t.forEach(e=>{e.clearWillLayoutTag()})}_processAutoIndent(e,t,i,r={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},n,l,o,a=!1){if(n.some(e=>e.autoIndent)){let{top:s,bottom:h,left:d,right:u}=this._checkAutoIndent(n,l);(s||h||d||u)&&(this.topCurrent=l.top+s,this.bottomCurrent=l.bottom-h,this.leftCurrent=l.left+d,this.rightCurrent=l.right-u,this.layoutRegionItems(e,t,i,r,o,a))}}layoutNormalItems(e,t){e.forEach(e=>{let{rect:i}=cS(e,this,t);"left"===e.layoutOrient?(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.leftCurrent+=i.width+e.layoutPaddingLeft+e.layoutPaddingRight):"top"===e.layoutOrient?(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.topCurrent+=i.height+e.layoutPaddingTop+e.layoutPaddingBottom):"right"===e.layoutOrient?(e.setLayoutStartPosition({x:this.rightCurrent+e.layoutOffsetX-i.width-e.layoutPaddingRight,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.rightCurrent-=i.width+e.layoutPaddingLeft+e.layoutPaddingRight):"bottom"===e.layoutOrient&&(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingRight,y:this.bottomCurrent+e.layoutOffsetY-i.height-e.layoutPaddingBottom}),this.bottomCurrent-=i.height+e.layoutPaddingTop+e.layoutPaddingBottom)})}layoutNormalInlineItems(e,t){let i=e.filter(e=>"left"===e.layoutOrient),r=e.filter(e=>"right"===e.layoutOrient),n=e.filter(e=>"top"===e.layoutOrient),l=e.filter(e=>"bottom"===e.layoutOrient),o=this._chartLayoutRect.width+this._chartLayoutRect.x,a=this._chartLayoutRect.height+this._chartLayoutRect.y;return i.length&&function(e,t,i,r){let{startItems:n,middleItems:l,endItems:o}=cb(e);n.length&&c_(n,t,i,!1,"left",r),l.length&&c_(l,t,i,!0,"left",r),o.length&&cC(o,t,i,"left",r)}(i,this,a,t),n.length&&function(e,t,i,r){let{startItems:n,middleItems:l,endItems:o}=cb(e);n.length&&cx(n,t,i,!1,"top",r),l.length&&cx(l,t,i,!0,"top",r),o.length&&cw(o,t,i,"top",r)}(n,this,o,t),r.length&&function(e,t,i,r){let{startItems:n,middleItems:l,endItems:o}=cb(e);n.length&&c_(n,t,i,!1,"right",r),l.length&&c_(l,t,i,!0,"right",r),o.length&&cC(o,t,i,"right",r)}(r,this,a,t),l.length&&function(e,t,i,r){let{startItems:n,middleItems:l,endItems:o}=cb(e);n.length&&cx(n,t,i,!1,"bottom",r),l.length&&cx(l,t,i,!0,"bottom",r),o.length&&cw(o,t,i,"bottom",r)}(l,this,o,t),!0}_layoutRelativeOverlap(e,t,i){t.items.forEach(e=>{let{rect:r}=cS(e,this,i);t.rect.width=Math.max(r.width+e.layoutPaddingLeft+e.layoutPaddingRight,t.rect.width),t.rect.height=Math.max(r.height+e.layoutPaddingTop+e.layoutPaddingBottom,t.rect.height)}),t.items.forEach(i=>{(0,dN.X)(i.getLayoutRect(),t.rect)||i.setLayoutRect(t.rect),"left"===e?i.setLayoutStartPosition({x:this.leftCurrent+i.layoutOffsetX}):"right"===e?i.setLayoutStartPosition({x:this.rightCurrent-t.rect.width+i.layoutOffsetX}):"top"===e?i.setLayoutStartPosition({x:this.topCurrent+i.layoutOffsetY}):i.setLayoutStartPosition({x:this.bottomCurrent-t.rect.height+i.layoutOffsetY})}),"left"===e?this.leftCurrent+=t.rect.width:"right"===e?this.rightCurrent-=t.rect.width:"top"===e?this.topCurrent+=t.rect.height:this.bottomCurrent-=t.rect.height}_layoutRelativeItem(e,t){let{rect:i}=cS(e,this,t,!1);"left"===e.layoutOrient||"right"===e.layoutOrient?e.setLayoutRect({width:i.width}):e.setLayoutRect({height:i.height}),"left"===e.layoutOrient?(e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft}),this.leftCurrent+=i.width+e.layoutPaddingLeft+e.layoutPaddingRight):"right"===e.layoutOrient?(this.rightCurrent-=i.width+e.layoutPaddingLeft+e.layoutPaddingRight,e.setLayoutStartPosition({x:this.rightCurrent+e.layoutOffsetX+e.layoutPaddingLeft})):"top"===e.layoutOrient?(e.setLayoutStartPosition({y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop}),this.topCurrent+=i.height+e.layoutPaddingTop+e.layoutPaddingBottom):"bottom"===e.layoutOrient&&(this.bottomCurrent-=i.height+e.layoutPaddingTop+e.layoutPaddingBottom,e.setLayoutStartPosition({y:this.bottomCurrent+e.layoutOffsetY+e.layoutPaddingTop}))}_layoutRegionItem(e,t,i){let r=Math.max(Math.min(t,...e.map(e=>{var t;return null!=(t=e.maxWidth)?t:Number.MAX_VALUE})),0),n=Math.max(Math.min(i,...e.map(e=>{var t;return null!=(t=e.maxHeight)?t:Number.MAX_VALUE})),0);return e.forEach(e=>{let t=r-e.layoutPaddingLeft-e.layoutPaddingRight,i=n-e.layoutPaddingTop-e.layoutPaddingBottom;e.setLayoutRect({width:t,height:i}),e.setLayoutStartPosition({x:this.leftCurrent+e.layoutOffsetX+e.layoutPaddingLeft,y:this.topCurrent+e.layoutOffsetY+e.layoutPaddingTop})}),{regionHeight:n,regionWidth:r}}layoutRegionItems(e,t,i,r={left:{items:[],rect:{width:0,height:0}},right:{items:[],rect:{width:0,height:0}},top:{items:[],rect:{width:0,height:0}},bottom:{items:[],rect:{width:0,height:0}},z:{items:[],rect:{width:0,height:0}}},n,l=!1){let o=this.leftCurrent,a=this.rightCurrent,s=this.rightCurrent-this.leftCurrent,h=this.bottomCurrent-this.topCurrent;t.filter(e=>"left"===e.layoutOrient||"right"===e.layoutOrient).forEach(e=>{this._layoutRelativeItem(e,n)}),this._layoutRelativeOverlap("left",r.left,n),this._layoutRelativeOverlap("right",r.right,n),s=this.rightCurrent-this.leftCurrent,t.filter(e=>"top"===e.layoutOrient||"bottom"===e.layoutOrient).forEach(e=>{this._layoutRelativeItem(e,n)}),this._layoutRelativeOverlap("top",r.top,n),this._layoutRelativeOverlap("bottom",r.bottom,n),h=this.bottomCurrent-this.topCurrent,l&&(this.leftCurrent=o,this.rightCurrent=a,t.filter(e=>"left"===e.layoutOrient||"right"===e.layoutOrient).forEach(e=>{this._layoutRelativeItem(e,n)}),s=this.rightCurrent-this.leftCurrent);let{regionWidth:d,regionHeight:u}=this._layoutRegionItem(e,s,h);t.concat(i).forEach(t=>{if(["left","right"].includes(t.layoutOrient)){let i=this.filterRegionsWithID(e,t.layoutBindRegionID[0]);t.setLayoutRect({height:i.getLayoutRect().height}),t.setLayoutStartPosition({y:i.getLayoutStartPoint().y+t.layoutOffsetY+t.layoutPaddingTop}),"right"===t.layoutOrient&&t.setLayoutStartPosition({x:t.getLayoutStartPoint().x+d-s})}else if(["top","bottom"].includes(t.layoutOrient)){let i=this.filterRegionsWithID(e,t.layoutBindRegionID[0]);t.setLayoutRect({width:i.getLayoutRect().width}),t.setLayoutStartPosition({x:i.getLayoutStartPoint().x+t.layoutOffsetX+t.layoutPaddingLeft}),"bottom"===t.layoutOrient&&t.setLayoutStartPosition({y:t.getLayoutStartPoint().y+u-h})}})}layoutAbsoluteItems(e){e.forEach(e=>{e.willLayoutTag&&e.absoluteLayoutInRect(this._chartLayoutRect)})}filterRegionsWithID(e,t){var i;let r=e.find(e=>e.getModelId()===t);return r||(null!=(i=this._onError)?i:s2)("can not find target region item, invalid id"),r}getItemComputeLayoutRect(e){return{width:this.rightCurrent-this.leftCurrent-e.layoutPaddingLeft-e.layoutPaddingRight,height:this.bottomCurrent-this.topCurrent-e.layoutPaddingTop-e.layoutPaddingBottom}}_checkAutoIndent(e,t){let i={top:0,left:0,bottom:0,right:0};return e.forEach(e=>{if(!e.getModelVisible()||!e.autoIndent)return;let r="left"===e.layoutOrient||"right"===e.layoutOrient,n=e.getLastComputeOutBounds(),l=this._getOutInLayout(n,e,t);r?(i.top=Math.max(i.top,l.top),i.bottom=Math.max(i.bottom,l.bottom)):(i.left=Math.max(i.left,l.left),i.right=Math.max(i.right,l.right))}),i}_getOutInLayout(e,t,i){let{x:r,y:n}=t.getLayoutStartPoint(),{width:l,height:o}=t.getLayoutRect();return{left:i.left-(r-e.x1),right:r+l+e.x2-i.right,top:i.top-(n-e.y1),bottom:n+o+e.y2-i.bottom}}}cA.type="base",(B=J||(J={})).enter="enter",B.update="update",B.exit="exit",B.unChange="unChange",(I=Q||(Q={})).STATE_NORMAL="normal",I.STATE_HOVER="hover",I.STATE_HOVER_REVERSE="hover_reverse",I.STATE_DIMENSION_HOVER="dimension_hover",I.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",I.STATE_SELECTED="selected",I.STATE_SELECTED_REVERSE="selected_reverse",I.STATE_SANKEY_EMPHASIS="selected",I.STATE_SANKEY_EMPHASIS_REVERSE="blur",I.STATE_HIGHLIGHT="highlight",I.STATE_BLUR="blur",I.STATE_ACTIVE="active",(L=ee||(ee={})).STATE_HOVER_REVERSE="hover_reverse",L.STATE_DIMENSION_HOVER_REVERSE="dimension_hover_reverse",L.STATE_SELECTED_REVERSE="selected_reverse";var ck=i(10145),cM=i(68390),cT=i(6119),cR=i(11809),cE=i(71881);class cP extends cR.J{range(e){return e?(this._range=e,this._resetRange(),this):super.range()}domain(e){return e?(super.domain(e),this._resetRange(),this):super.domain()}_resetRange(){if(!hl(this._range))return void super.range(this._range);let e=ht(this._range,this._domain);super.range(e)}}let cB={linear:ck.f,band:cM.j,point:cT.Y,ordinal:cR.J,threshold:cE.v,colorOrdinal:cP};function cI(e){let t=cB[e];return t?new t:null}function cL(e,t,i){if(!t)return e;let r=t.range(),n=i&&t._calculateWholeRange?t._calculateWholeRange(r):t.range();return Math.min(Math.max(Math.min(n[0],n[n.length-1]),e),Math.max(n[0],n[n.length-1]))}function cF(e,t,i){if(!t)return!0;let r=t.range(),n=(i&&t._calculateWholeRange?t._calculateWholeRange(r):t.range()).map(e=>t.invert(e)),l=Math.min(n[0],n[n.length-1]),o=Math.max(n[0],n[n.length-1]);return Array.isArray(e)?e.every(e=>e>=l&&e<=o):e>=l&&e<=o}function cH(e){return(0,oV.Z)(null==e?void 0:e.field)&&(0,oV.Z)(null==e?void 0:e.scale)}let cO=["linear","radial","conical"],cD={linear:{x0:0,y0:0,x1:1,y1:1},radial:{x0:0,y0:0,x1:1,y1:1,r0:0,r1:1},conical:{x:.5,y:.5,startAngle:0,endAngle:2*Math.PI}};var cz=i(37196);let cW={};Object.values(Q).forEach(e=>{cW[e]=!0}),Q.STATE_HOVER,Q.STATE_HOVER_REVERSE,Q.STATE_SELECTED,Q.STATE_SELECTED_REVERSE,Q.STATE_DIMENSION_HOVER,Q.STATE_DIMENSION_HOVER_REVERSE;class cZ extends ca{compile(){}getStateMap(){return this._stateMap}_getDefaultStateMap(){return{}}constructor(e){super(e),this.initStateMap()}initStateMap(e){this._stateMap=null!=e?e:this._getDefaultStateMap()}updateState(e,t){if(e&&((0,ha.Z)(this._stateMap,e),!t))return this.getCompiler().renderNextTick()}}class cN extends cZ{getStateInfoList(){return this._stateInfoList}constructor(e,t){super(e),this._stateInfoList=[],this._mark=t}_getDefaultStateMap(){return{markUpdateRank:1}}getStateInfo(e){return this._stateInfoList.find(t=>t.stateValue===e)}addStateInfo(e){if(this.getStateInfo(e.stateValue))return;e.level=e.level||0;let t=!0;for(let i=0;i<this._stateInfoList.length;i++){let r=this._stateInfoList[i].level;if(r&&r>e.level){this._stateInfoList.splice(i,0,e),t=!1;break}}t&&this._stateInfoList.push(e)}_clearStateBeforeSet(e){e.datums=null,e.items=null,e.fields=null,e.filter=null}changeStateInfo(e){let t=this.getStateInfo(e.stateValue);if(t){if(void 0!==e.datums&&(this._clearStateBeforeSet(t),t.datums=e.datums,t.datumKeys=e.datumKeys),void 0!==e.items&&(this._clearStateBeforeSet(t),t.items=e.items),void 0!==e.fields)if(this._clearStateBeforeSet(t),null===e.fields)t.fields=e.fields;else for(let i in t.fields=t.fields||{},e.fields){let r=e.fields[i];t.fields[i]=t.fields[i]||{};let n=t.fields[i];(0,oV.Z)(r.domain)&&(n.domain=r.domain),(0,oV.Z)(r.type)&&(n.type=r.type)}e.filter&&(this._clearStateBeforeSet(t),t.filter=e.filter)}else this.addStateInfo(e)}clearStateInfo(e){e.forEach(e=>{this.getStateInfo(e)&&this.changeStateInfo({stateValue:e,datumKeys:null,datums:null,fields:null,items:null,filter:null,cache:{}})})}_isMultiMark(){var e;return!this._mark||(e=this._mark.type,dL.includes(e))}checkOneState(e,t,i){var r;let n=!1,l=!1;if((0,oV.Z)(i.datums)&&i.datums.length>0)n=this.checkDatumState(i,t),l=!0;else if(i.items)n=null!=(r=this.checkItemsState(i,e))&&r,l=!0;else if(i.fields)n=this.checkFieldsState(i,t,e),l=!0;else if(!n&&i.filter){let r={mark:this._mark,renderNode:e,type:this._mark.type};n=i.filter(null==t?void 0:t[0],r),l=!0}return l?n?"in":"out":"skip"}checkState(e,t){var i;let r=(null!=(i=e.context.states)?i:[]).filter(e=>!!cW[e]).map(e=>[e,10]);for(let i=0;i<this._stateInfoList.length;i++){let n=this._stateInfoList[i],l=this.checkOneState(e,t,n);"skip"!==l&&"in"===l&&r.push([n.stateValue,n.level])}return r.map(e=>e[0])}checkDatumState(e,t){let i=!1,r=t[0];if((0,ri.Z)(e.datums)){let t=this._isMultiMark(),n=e.datumKeys||Object.keys(e.datums[0]).filter(e=>!e.startsWith(dg));i=e.datums.some(e=>t&&(0,ri.Z)(null==e?void 0:e.items)?n.every(t=>{var i,n;return(null==(n=null==(i=null==e?void 0:e.items)?void 0:i[0])?void 0:n[t])===(null==r?void 0:r[t])}):n.every(t=>(null==e?void 0:e[t])===(null==r?void 0:r[t])))}else if((0,r9.Z)(e.datums)){let t=e.datumKeys||Object.keys(e.datums).filter(e=>!e.startsWith(dg)),n=this._isMultiMark();i=t.every(t=>{var i,l;return n?(null==(i=e.datums.items)?void 0:i[0][t])===r[t]:(null==(l=e.datums)?void 0:l[t])===r[t]})}else i=t===e.datums;return i}checkItemsState(e,t){var i;return null==(i=e.items)?void 0:i.includes(t)}checkFieldsState(e,t,i){var r;let n=!0;for(let l in e.fields){let o=e.fields[l],a=o.type,s=o.domain,h=null==(r=t[0])?void 0:r[l];if((0,cz.z2)(a)&&s.length>1){if(this.checkLinearFieldState(s,l,t,i)){n=!1;break}n=!0}else{if(!s.some(e=>e===h)){n=!1;break}n=!0}}return n}checkLinearFieldState(e,t,i,r){var n;let l=this._isMultiMark()?null==(n=i[0])?void 0:n[t]:i[t];return l<e[0]||l>e[e.length-1]}release(){}}class c$ extends ca{constructor(){super(...arguments),this.id=sO(),this._compiledProductId=null}getProductId(){var e;return null!=(e=this._compiledProductId)?e:this.generateProductId()}compile(e){this._compileProduct(e)}setTransform(e){this._transform=e}runTransforms(e,t){if(!e||!e.length)return t;let i=t;return e.forEach(e=>{var t;i=null==(t=hp.getGrammarTransform(e.type))?void 0:t.transform(e,i)}),i}}class cj extends c${getProduct(){return this._product||(this._product=this.runTransforms(this._transform,this.getLatestData())),this._product}getDataView(){return this._data}setDataView(e){this._data=e}getLatestData(){var e;return null==(e=this._data)?void 0:e.latestData}constructor(e,t){super(e),this._data=null,this._data=t}removeProduct(){this._product=null,this._prevProduct=null,this._compiledProductId=null}release(){this.removeProduct(),super.release(),this._data=null}addRelatedMark(e){this._relatedMarks||(this._relatedMarks={}),this._relatedMarks[e.id]=e}updateData(e){if(this._compileProduct(),this._relatedMarks){let t=!1;if(Object.keys(this._relatedMarks).forEach(e=>{this._relatedMarks[e]&&(t=!0,this._relatedMarks[e].commit())}),!e&&t)return this.getCompiler().renderNextTick()}}_compileProduct(){this._prevProduct=this._product,this._product=null}generateProductId(){var e;return`${null==(e=this.getDataView())?void 0:e.name}`}}(F=et||(et={}))[F.Color255=0]="Color255",F[F.Color1=1]="Color1";class cG{static Get(e,t=et.Color1,i=[0,0,0,1]){if(t===et.Color1){let t=cG.store1[e];if(t)return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i;let r=s4.Il.parseColorString(e);if(r){let t=[r.r/255,r.g/255,r.b/255,r.opacity];cG.store1[e]=t,cG.store255[e]=[r.r,r.g,r.b,r.opacity],i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]}return i}let r=cG.store255[e];if(r)return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i;let n=s4.Il.parseColorString(e);return n&&(cG.store1[e]=[n.r/255,n.g/255,n.b/255,n.opacity],cG.store255[e]=[n.r,n.g,n.b,n.opacity],i[0]=n.r,i[1]=n.g,i[2]=n.b,i[3]=n.opacity),i}static Set(e,t,i){if(t===et.Color1)cG.store1[e]||(cG.store1[e]=i,cG.store255[e]=[Math.floor(255*i[0]),Math.floor(255*i[1]),Math.floor(255*i[2]),Math.floor(255*i[3])]);else{if(cG.store255[e])return;cG.store255[e]=i,cG.store1[e]=[i[0]/255,i[1]/255,i[2]/255,i[3]]}}}function cV(e,t=!1){return Array.isArray(e)&&(0,nw.Z)(e[0])?t?`rgb(${Math.round(e[0])},${Math.round(e[1])},${Math.round(e[2])},${e[3].toFixed(2)})`:`rgb(${Math.round(e[0])},${Math.round(e[1])},${Math.round(e[2])})`:e}function cU(e,t,i,r,n){return Array.isArray(e)&&!(0,nw.Z)(e[0])||Array.isArray(t)&&!(0,nw.Z)(t[0])?[,,,,].fill(0).map((n,l)=>{var o,a;return cK((0,ri.Z)(e)?null!=(o=e[l])?o:e[0]:e,(0,ri.Z)(t)?null!=(a=t[l])?a:t[0]:t,i,r)}):cK(e,t,i,r,n)}function cK(e,t,i,r,n){if(!e||!t)return e&&cV(e)||t&&cV(t)||!1;let l,o,a=!1,s=!1;if(Array.isArray(e)?l=e:"string"==typeof e?l=cG.Get(e,et.Color255):a=!0,Array.isArray(t)?o=t:"string"==typeof t?o=cG.Get(t,et.Color255):s=!0,a!==s){let l=a?e:t,o=a?t:e,s=Object.assign(Object.assign({},l),{stops:l.stops.map(e=>Object.assign(Object.assign({},e),{color:cV(o)}))});return a?cU(l,s,i,r,n):cU(s,l,i,r,n)}if(a){if(e.gradient===t.gradient){let r=e.stops,n=t.stops;if(r.length!==n.length)return!1;if("linear"===e.gradient){var h,d,u,c=e,p=t,g=i;let r=c.stops,n=p.stops;return{gradient:"linear",x0:c.x0+(p.x0-c.x0)*g,x1:c.x1+(p.x1-c.x1)*g,y0:c.y0+(p.y0-c.y0)*g,y1:c.y1+(p.y1-c.y1)*g,stops:Array(r.length).fill(0).map((e,t)=>({color:cJ(r[t].color,n[t].color,g),offset:r[t].offset+(n[t].offset-r[t].offset)*g}))}}if("radial"===e.gradient){var f=e,m=t,b=i;let r=f.stops,n=m.stops;return{gradient:"radial",x0:f.x0+(m.x0-f.x0)*b,x1:f.x1+(m.x1-f.x1)*b,y0:f.y0+(m.y0-f.y0)*b,y1:f.y1+(m.y1-f.y1)*b,r0:f.r0+(m.r0-f.r0)*b,r1:f.r1+(m.r1-f.r1)*b,stops:Array(r.length).fill(0).map((e,t)=>({color:cJ(r[t].color,n[t].color,b),offset:r[t].offset+(n[t].offset-r[t].offset)*b}))}}if("conical"===e.gradient){var y=e,v=t,_=i;let r=y.stops,n=v.stops;return{gradient:"conical",startAngle:y.startAngle+(v.startAngle-y.startAngle)*_,endAngle:y.endAngle+(v.endAngle-y.endAngle)*_,x:y.x+(v.x-y.x)*_,y:y.y+(v.y-y.y)*_,stops:Array(r.length).fill(0).map((e,t)=>({color:cJ(r[t].color,n[t].color,_),offset:r[t].offset+(n[t].offset-r[t].offset)*_}))}}}return!1}return n&&n(l,o),cV((h=l,d=o,u=i,[h[0]+(d[0]-h[0])*u,h[1]+(d[1]-h[1])*u,h[2]+(d[2]-h[2])*u,h[3]+(d[3]-h[3])*u]),r)}function cX(e,t,i){return`rgba(${e[0]+(t[0]-e[0])*i},${e[1]+(t[1]-e[1])*i},${e[2]+(t[2]-e[2])*i},${e[3]+(t[3]-e[3])*i})`}cG.store255={},cG.store1={};let cY=[0,0,0,0],cq=[0,0,0,0];function cJ(e,t,i){return cG.Get(e,et.Color255,cY),cG.Get(t,et.Color255,cq),`rgba(${Math.round(cY[0]+(cq[0]-cY[0])*i)},${Math.round(cY[1]+(cq[1]-cY[1])*i)},${Math.round(cY[2]+(cq[2]-cY[2])*i)},${cY[3]+(cq[3]-cY[3])*i})`}function cQ(e,t,i,r,n,l){let o=(t-e)*n+e,a=(i-t)*n+t,s=(r-i)*n+i,h=(a-o)*n+o,d=(s-a)*n+a,u=(d-h)*n+h;l[0]=e,l[1]=o,l[2]=h,l[3]=u,l[4]=u,l[5]=d,l[6]=s,l[7]=r}function c0(e,t){let i=e||t,r=i.length,n=i[r-2],l=i[r-1],o=[];for(let e=0;e<t.length;e+=2)o[e]=n,o[e+1]=l;return o}function c1(e){let t=0,i=0,r=0,n=e.length;for(let l=0,o=n-2;l<n;o=l,l+=2){let n=e[o],a=e[o+1],s=e[l],h=e[l+1],d=n*h-s*a;t+=d,i+=(n+s)*d,r+=(a+h)*d}return 0===t?[e[0]||0,e[1]||0,0]:[i/t/3,r/t/3,t]}function c2(e){let t=new iZ,i=e.toString();if(!i)return[];t.fromString(i);let r=t.tryBuildCurves();if(!r||0===r.length)return[];let n=[],l=null;l=[];let o=0,a=0,s=0,h=0,d=!0;for(let e=0;e<r.length;e++){let t=r[e];if(d&&(o=t.p0.x,a=t.p0.y,s=o,h=a,l=[o,a],n.push(l),d=!1),t.p1&&t.p2&&t.p3)l.push(t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y),s=t.p3.x,h=t.p3.y;else if(t.p1&&t.p2){let e=t.p1.x,i=t.p1.y,r=t.p2.x,n=t.p2.y;l.push(s+2/3*(e-s),h+2/3*(i-h),r+2/3*(e-r),n+2/3*(i-n),r,n),s=r,h=n}else if(t.p1){let e=t.p1.x,i=t.p1.y;1e-10>Math.abs(s-e)&&1e-10>Math.abs(h-i)||l.push(s,h,e,i,e,i),s=e,h=i}if(r.length,e<r.length-1){let t=r[e+1];(Math.abs(s-t.p0.x)>1e-10||Math.abs(h-t.p0.y)>1e-10)&&(d=!0)}}let u=n.filter(e=>e.length>2);return 1===u.length?[u[0]]:u}function c3(e,t){for(let i=0;i<e.length;i++){let r=e[i];for(let e=0;e<r.length;e+=2){let i=r[e],n=r[e+1],l={x:i,y:n};t.transformPoint({x:i,y:n},l),r[e]=l.x,r[e+1]=l.y}}}function c4(e,t,i){let r,n,l=e/t;e>=t?(n=Math.ceil(Math.sqrt(i*l)),0===(r=Math.floor(i/n))&&(r=1,n=i)):(r=Math.ceil(Math.sqrt(i/l)),0===(n=Math.floor(i/r))&&(n=1,r=i));let o=[];for(let e=0;e<r;e++)o.push(n);let a=i-r*n;if(a>0)for(let e=0;e<a;e+=n)e+n<a?o.push(n):o.push(a-e);return o}let c5=(e,t)=>{let{width:i,height:r}=u$(e.attribute),n=c4(i,r,t),l=[],o=r/n.length;for(let e=0,t=n.length;e<t;e++){let t=n[e],r=i/t;for(let i=0;i<t;i++)l.push({x:0+i*r,y:0+e*o,width:r,height:o})}return l},c6=(e,t)=>{let i=e.getParsedAngle(),r=i.startAngle,n=i.endAngle,l=e.getComputedAttribute("innerRadius"),o=e.getComputedAttribute("outerRadius"),a=Math.abs(r-n),s=Math.abs(o-l),h=c4(a*(l+o)/2,s,t),d=[],u=s/h.length,c=o>=l?1:-1,p=n>=r?1:-1;for(let e=0,t=h.length;e<t;e++){let t=h[e],i=a/t;for(let n=0;n<t;n++)d.push({innerRadius:o-u*e*c,outerRadius:o-u*(e+1)*c,startAngle:r+i*n*p,endAngle:r+i*(n+1)*p})}return d},c8=(e,t)=>{let i=e.getComputedAttribute("startAngle"),r=e.getComputedAttribute("endAngle"),n=e.getComputedAttribute("radius"),l=Math.abs(i-r),o=c4(l*n,n,t),a=[],s=l/o[0],h=n/o.length,d=r>=i?1:-1;for(let e=0,t=o.length;e<t;e++)for(let t=0,r=o[e];t<r;t++)a.push({innerRadius:h*e,outerRadius:h*(e+1),startAngle:i+s*t*d,endAngle:i+s*(t+1)*d});return a},c7=(e,t)=>{let i=e.filter(e=>!1!==e.defined&&(0,nw.Z)(e.x)&&(0,nw.Z)(e.y));if(0===i.length)return[];if(1===i.length)return Array(t).fill(0).map(e=>i[0]);let r=[];if(t<=i.length){let e=i.length/t,n=0,l=0;for(;n<t;)r.push(i[Math.floor(l)]),l+=e,n++;return r}let n=t-i.length,l=1/(n/(i.length-1)+1),o=0;for(let t=0,i=e.length;t<i;t++)if(r.push(e[t]),t<i-1){let i=l,a=e[t].x,s=e[t].y,h=e[t+1].x,d=e[t+1].y;for(;i<1&&o<n;)r.push({x:a+(h-a)*i,y:s+(d-s)*i}),i+=l,o+=1}return r},c9=(e,t)=>{var i,r;let n=e.attribute,l=n.points,o=n.segments;l||(l=o.reduce((e,t)=>{var i;return e.concat(null!=(i=t.points)?i:[])},[]));let a=l.filter(e=>!1!==e.defined&&(0,nw.Z)(e.x)&&(0,nw.Z)(e.y));if(!a.length)return[];let s=[];a.forEach(e=>{s.push({x:e.x,y:e.y})});for(let e=a.length-1;e>=0;e--){let t=a[e];s.push({x:null!=(i=t.x1)?i:t.x,y:null!=(r=t.y1)?r:t.y})}let h=[];return pn(s,t,h),h},pe=(e,t)=>{let i=e.attribute,r=i.points;return r?c7(r,t):i.segments?c7(i.segments.reduce((e,t)=>{var i;return e.concat(null!=(i=t.points)?i:[])},[]),t):[]},pt=e=>e.map(e=>({x:e.x,y:e.y})),pi=(e,t,i)=>{let r=e.length,n=[];for(let a=0;a<r;a++){var l,o;let s=e[a],h=a===r-1?e[0]:e[a+1],d=(0,ai.Jz)([t.x,t.y],[i.x,i.y],[s.x,s.y],[h.x,h.y]);d&&"boolean"!=typeof d&&n.push({dot:(l=[d[0]-t.x,d[1]-t.x],o=[i.x-t.x,i.y-t.x],l[0]*o[1]-l[1]*o[0]),point:{x:d[0],y:d[1]},edgeIndex:a})}if(n.length<2)return[pt(e),pt(e)];n.sort((e,t)=>e.dot-t.dot);let a=n[0],s=n[n.length-1];a.edgeIndex>s.edgeIndex&&([a,s]=[s,a]);let h=a.point,d=s.point,u=[{x:h.x,y:h.y}];for(let t=a.edgeIndex+1;t<=s.edgeIndex;t++)u.push({x:e[t].x,y:e[t].y});u.push({x:d.x,y:d.y});let c=[{x:d.x,y:d.y}];for(let t=s.edgeIndex+1,i=a.edgeIndex+r;t<=i;t++){let i=e[t%r];c.push({x:i.x,y:i.y})}return c.push({x:h.x,y:h.y}),[u,c]},pr=e=>{let t=new t4.YZ;e.forEach(e=>{t.add(e.x,e.y)});let i=t.width(),r=t.height();if(i>=r){let r=t.x1+i/2;return pi(e,{x:r,y:t.y1},{x:r,y:t.y2})}let n=t.y1+r/2;return pi(e,{x:t.x1,y:n},{x:t.x2,y:n})},pn=(e,t,i)=>{if(1===t)i.push({points:e});else{let r=Math.floor(t/2),n=pr(e);pn(n[0],r,i),pn(n[1],t-r,i)}},pl=(e,t)=>{let i=e.attribute.points;if(!i||!i.length)return[];if(1===t)return[{points:pt(i)}];let r=[];return pn(i,t,r),r},po=(e,t)=>{let i=c2(e.getParsedPathShape());if(!i.length||t<0)return[];let r=i.length;if(i.length>=t){let e=[],n=Math.floor(i.length/t);for(let l=0;l<t;l++){let o=i.slice(l*n,l===t-1?r:(l+1)*n);e.push({path:function(e){let t=new iZ;for(let i=0;i<e.length;i++){let r=e[i];if(r.length>2){t.moveTo(r[0],r[1]);for(let e=2;e<r.length;e+=6)t.bezierCurveTo(r[e],r[e+1],r[e+2],r[e+3],r[e+4],r[e+5])}}return t}(o)})}return e}let n=[],l=Math.floor(t/r),o=t;for(let e=0;e<r;e++){let t=[];for(let r=2,n=i[e].length;r<n;r+=2)t.push({x:i[0][r],y:i[0][r+1]});pn(t,e===r-1?o:l,n),o-=l}return n};(H=ei||(ei={})).wait="wait",H.from="from",H.to="to",H.customAnimate="customAnimate",(O=er||(er={}))[O.INITIAL=0]="INITIAL",O[O.RUNNING=1]="RUNNING",O[O.PAUSED=2]="PAUSED",O[O.END=3]="END";class pa{constructor(){}static linear(e){return e}static none(){return this.linear}static get(e){return e<-1?e=-1:e>1&&(e=1),function(t){return 0===e?t:e<0?t*(-(t*e)+1+e):t*((2-t)*e+(1-e))}}static getPowIn(e){return function(t){return Math.pow(t,e)}}static getPowOut(e){return function(t){return 1-Math.pow(1-t,e)}}static getPowInOut(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}}static getBackIn(e){return function(t){return t*t*((e+1)*t-e)}}static getBackOut(e){return function(t){return--t*t*((e+1)*t+e)+1}}static getBackInOut(e){return e*=1.525,function(t){return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}}static sineIn(e){return 1-Math.cos(e*Math.PI/2)}static sineOut(e){return Math.sin(e*Math.PI/2)}static sineInOut(e){return-(Math.cos(Math.PI*e)-1)/2}static expoIn(e){return 0===e?0:Math.pow(2,10*e-10)}static expoOut(e){return 1===e?1:1-Math.pow(2,-10*e)}static expoInOut(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}static circIn(e){return-(Math.sqrt(1-e*e)-1)}static circOut(e){return Math.sqrt(1- --e*e)}static circInOut(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}static bounceOut(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}static bounceIn(e){return 1-pa.bounceOut(1-e)}static bounceInOut(e){return e<.5?.5*pa.bounceIn(2*e):.5*pa.bounceOut(2*e-1)+.5}static getElasticIn(e,t){return function(i){if(0===i||1===i)return i;let r=t/t0.f7*Math.asin(1/e);return-e*Math.pow(2,10*(i-=1))*Math.sin((i-r)*t0.f7/t)}}static getElasticOut(e,t){return function(i){if(0===i||1===i)return i;let r=t/t0.f7*Math.asin(1/e);return e*Math.pow(2,-10*i)*Math.sin((i-r)*t0.f7/t)+1}}static getElasticInOut(e,t){return function(i){let r=t/t0.f7*Math.asin(1/e);return(i*=2)<1?-(e*Math.pow(2,10*(i-=1))*Math.sin((i-r)*t0.f7/t)*.5):e*Math.pow(2,-10*(i-=1))*Math.sin((i-r)*t0.f7/t)*.5+1}}static registerFunc(e,t){pa[e]=t}}pa.quadIn=pa.getPowIn(2),pa.quadOut=pa.getPowOut(2),pa.quadInOut=pa.getPowInOut(2),pa.cubicIn=pa.getPowIn(3),pa.cubicOut=pa.getPowOut(3),pa.cubicInOut=pa.getPowInOut(3),pa.quartIn=pa.getPowIn(4),pa.quartOut=pa.getPowOut(4),pa.quartInOut=pa.getPowInOut(4),pa.quintIn=pa.getPowIn(5),pa.quintOut=pa.getPowOut(5),pa.quintInOut=pa.getPowInOut(5),pa.backIn=pa.getBackIn(1.7),pa.backOut=pa.getBackOut(1.7),pa.backInOut=pa.getBackInOut(1.7),pa.elasticIn=pa.getElasticIn(1,.3),pa.elasticOut=pa.getElasticOut(1,.3),pa.elasticInOut=pa.getElasticInOut(1,.3*1.5),pa.easeInOutQuad=e=>(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2),pa.easeOutElastic=e=>{let t=2*Math.PI/3;return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*t)+1},pa.easeInOutElastic=e=>{let t=2*Math.PI/4.5;return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1};for(let e=0;e<10;e++)pa[`flicker${e}`]=t=>(function(e,t){let i=1/t,r=1;for(;e>i;)e-=i,r*=-1;let n=r*e/i;return n>0?n:1+n})(t,e);for(let e=2;e<10;e++)pa[`aIn${e}`]=t=>e*t*t+(1-e)*t;let ps=new class{constructor(){this.opacity=(e,t,i,r,n,l)=>{l.attribute.opacity=t+(i-t)*r},this.baseOpacity=(e,t,i,r,n,l)=>{l.attribute.baseOpacity=t+(i-t)*r},this.fillOpacity=(e,t,i,r,n,l)=>{l.attribute.fillOpacity=t+(i-t)*r},this.strokeOpacity=(e,t,i,r,n,l)=>{l.attribute.strokeOpacity=t+(i-t)*r},this.zIndex=(e,t,i,r,n,l)=>{l.attribute.zIndex=t+(i-t)*r},this.backgroundOpacity=(e,t,i,r,n,l)=>{l.attribute.backgroundOpacity=t+(i-t)*r},this.shadowOffsetX=(e,t,i,r,n,l)=>{l.attribute.shadowOffsetX=t+(i-t)*r},this.shadowOffsetY=(e,t,i,r,n,l)=>{l.attribute.shadowOffsetY=t+(i-t)*r},this.shadowBlur=(e,t,i,r,n,l)=>{l.attribute.shadowBlur=t+(i-t)*r},this.fill=(e,t,i,r,n,l)=>{l.attribute.fill=cU(t,i,r,!1)},this.fillPure=(e,t,i,r,n,l)=>{l.attribute.fill=n.fromParsedProps.fill?cX(n.fromParsedProps.fill,n.toParsedProps.fill,r):n.toParsedProps.fill},this.stroke=(e,t,i,r,n,l)=>{l.attribute.stroke=cU(t,i,r,!1)},this.strokePure=(e,t,i,r,n,l)=>{l.attribute.stroke=n.fromParsedProps.stroke?cX(n.fromParsedProps.stroke,n.toParsedProps.stroke,r):n.toParsedProps.stroke},this.width=(e,t,i,r,n,l)=>{l.attribute.width=t+(i-t)*r,l.addUpdateBoundTag()},this.height=(e,t,i,r,n,l)=>{l.attribute.height=t+(i-t)*r,l.addUpdateBoundTag()},this.x=(e,t,i,r,n,l)=>{l.attribute.x=t+(i-t)*r,l.addUpdateBoundTag(),l.addUpdatePositionTag()},this.y=(e,t,i,r,n,l)=>{l.attribute.y=t+(i-t)*r,l.addUpdateBoundTag(),l.addUpdatePositionTag()},this.dx=(e,t,i,r,n,l)=>{l.attribute.dx=t+(i-t)*r,l.addUpdateBoundTag(),l.addUpdatePositionTag()},this.dy=(e,t,i,r,n,l)=>{l.attribute.dy=t+(i-t)*r,l.addUpdateBoundTag(),l.addUpdatePositionTag()},this.angle=(e,t,i,r,n,l)=>{l.attribute.angle=t+(i-t)*r,l.addUpdateBoundTag(),l.addUpdatePositionTag()},this.scaleX=(e,t,i,r,n,l)=>{l.attribute.scaleX=t+(i-t)*r,l.addUpdateBoundTag(),l.addUpdatePositionTag()},this.scaleY=(e,t,i,r,n,l)=>{l.attribute.scaleY=t+(i-t)*r,l.addUpdateBoundTag(),l.addUpdatePositionTag()},this.lineWidth=(e,t,i,r,n,l)=>{l.attribute.lineWidth=t+(i-t)*r,l.addUpdateBoundTag()},this.startAngle=(e,t,i,r,n,l)=>{l.attribute.startAngle=t+(i-t)*r,l.addUpdateBoundTag()},this.endAngle=(e,t,i,r,n,l)=>{l.attribute.endAngle=t+(i-t)*r,l.addUpdateBoundTag()},this.radius=(e,t,i,r,n,l)=>{l.attribute.radius=t+(i-t)*r,l.addUpdateBoundTag()},this.outerRadius=(e,t,i,r,n,l)=>{l.attribute.outerRadius=t+(i-t)*r,l.addUpdateBoundTag()},this.innerRadius=(e,t,i,r,n,l)=>{l.attribute.innerRadius=t+(i-t)*r,l.addUpdateBoundTag()},this.size=(e,t,i,r,n,l)=>{l.attribute.size=t+(i-t)*r,l.addUpdateBoundTag()},this.points=(e,t,i,r,n,l)=>{l.attribute.points=nb(t,i,r),l.addUpdateBoundTag()}}};function ph(e,t,i,r,n,l){if(Number.isFinite(i)&&Number.isFinite(t))return l.attribute[e]=t+(i-t)*r,!0;if(Array.isArray(i)&&Array.isArray(t)&&i.length===t.length){let n=[],o=!0;for(let e=0;e<i.length;e++){let l=t[e],a=l+(i[e]-l)*r;if(!Number.isFinite(a)){o=!1;break}n.push(a)}return o&&(l.attribute[e]=n),!0}return!1}function pd(){}class pu{constructor(e,t,i,r){var n;this._startTime=0,this._hasFirstRun=!1,this._syncAttributeUpdate=()=>{this.target.setAttributes(this.target.attribute)},this.type=e,this.props=t,this.duration=i,this.easing=r?"function"==typeof r?r:null!=(n=pa[r])?n:pa.linear:pa.linear,"wait"===e&&(this.onUpdate=pd),this.id=tm.GenAutoIncrementId(),this.syncAttributeUpdate=pd}bind(e,t){this.target=e,this.animate=t,this.onBind(),this.syncAttributeUpdate()}append(e){this.next=e,e.prev=this,e.setStartTime(this.getStartTime()+this.duration,!1)}updateDownstreamStartTimes(){let e=this.next,t=this._startTime+this.duration;for(;e;)e.setStartTime(t,!1),t+=e.duration,e=e.next;this.animate.updateDuration()}getLastProps(){return this.prev?this.prev.props||{}:this.animate.getStartProps()}setDuration(e,t=!0){this.duration=e,t&&this.updateDownstreamStartTimes()}getDuration(){return this.duration}determineInterpolateUpdateFunction(){if(!this.props)return;let e=[];this.propKeys.forEach(t=>{if("fill"===t||"stroke"===t){let i=this.fromProps[t],r=this.props[t];if((0,r6.Z)(i)&&(0,r6.Z)(r)){let n=cG.Get(i,et.Color255),l=cG.Get(r,et.Color255);this.fromParsedProps||(this.fromParsedProps={}),this.toParsedProps||(this.toParsedProps={}),this.fromParsedProps[t]=n,this.toParsedProps[t]=l,e.push(ps["fill"===t?"fillPure":"strokePure"])}else ps[t]?e.push(ps[t]):e.push(ph)}else ps[t]?e.push(ps[t]):e.push(ph)}),this.interpolateUpdateFunctions=e}setStartTime(e,t=!0){this._startTime=e,t&&this.updateDownstreamStartTimes()}getStartTime(){return this._startTime}onBind(){"glyph"===this.target.type&&(this.syncAttributeUpdate=this._syncAttributeUpdate)}onFirstRun(){}onStart(){if(!this._hasFirstRun){this._hasFirstRun=!0,this.fromProps=this.getLastProps();let e=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(t=>{var i;this.fromProps[t]=null!=(i=this.fromProps[t])?i:e[t]}),this.determineInterpolateUpdateFunction(),this.tryPreventConflict(),this.trySyncStartProps(),this.onFirstRun()}}tryPreventConflict(){let e=this.animate;this.target.animates.forEach(t=>{if(t===e||t.priority>e.priority||t.priority===1/0)return;let i=t.getStartProps();this.propKeys.forEach(e=>{null!=i[e]&&t.preventAttr(e)})})}deleteSelfAttr(e){var t;delete this.props[e],this.fromProps&&delete this.fromProps[e];let i=this.propKeys.indexOf(e);-1!==i&&(this.propKeys.splice(i,1),null==(t=this.interpolateUpdateFunctions)||t.splice(i,1))}trySyncStartProps(){this.propKeys.forEach(e=>{this.fromProps[e]=this.animate.target.getComputedAttribute(e)})}update(e,t,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(t);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((e,t)=>{if(!this.animate.validAttr(this.propKeys[t]))return;let i=this.propKeys[t];e(i,this.fromProps[i],this.props[i],r,this,this.target)}),this.onUpdate(e,r,i),this.syncAttributeUpdate()}onUpdate(e,t,i){}onEnd(e){this.target.setAttributes(this.props),e?this._endCb=e:this._endCb&&this._endCb(this.animate,this)}getEndProps(){return this.props}getFromProps(){return this.fromProps}getMergedEndProps(){return this.getEndProps()}stop(){}release(){}}class pc extends pu{constructor(e,t,i,r){super(e,t,i,r)}onStart(){super.onStart();let e=this.getFromProps();this.target.setAttributes(e)}update(e,t,i){this.onStart()}determineInterpolateUpdateFunction(){}}class pp extends pu{constructor(e,t,i,r,n){super("customAnimate",t,i,r),this.type="customAnimate",this.customFrom=e,this.params=n,this.from=e,this.to=t}update(e,t,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(t);this.onUpdate(e,r,i),this.syncAttributeUpdate()}setProps(e){this.props=e,this.propKeys=Object.keys(e),this.animate.reSyncProps()}}class pg extends pp{completeBind(e){this.setStartTime(0),this._animator&&this._animator.start(),this.setDuration(e.getDuration())}stop(){this._animator&&this._animator.stop()}}class pf extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0,this.checkStatusAfterRender=!0,this._beforeStageRender=()=>{if(!this.willCallBeforeStageRender)return;this.willCallBeforeStageRender=!1;let e=this.target.stage,t=e.window.getContext().canvas.nativeCanvas,i=this.beforeStageRender(e,t);i&&this.renderToStage(e,i)},this._afterStageRender=()=>{if(!this.willCallAfterStageRender)return;this.willCallAfterStageRender=!1;let e=this.target.stage,t=e.window.getContext().canvas.nativeCanvas,i=this.afterStageRender(e,t);i&&this.renderToStage(e,i),this.checkStatusAfterRender&&this.animate.status===er.END&&this.animate.timeline.removeAnimate(this.animate)},this.props={}}beforeStageRender(e,t){return!1}afterStageRender(e,t){return!1}onFirstRun(){super.onFirstRun(),this.target.stage.setBeforeRender(this._beforeStageRender),this.target.stage.setAfterRender(this._afterStageRender),this.target.stage.disableDirtyBounds()}stop(){super.stop(),this.target.stage.removeBeforeRender(this._beforeStageRender),this.target.stage.removeAfterRender(this._afterStageRender)}onUpdate(e,t,i){super.onUpdate(e,t,i),this.willCallBeforeStageRender=!0,this.willCallAfterStageRender=!0}renderToStage(e,t){let i=e.window.getContext().canvas.nativeCanvas,r=i.getContext("2d");return!!r&&(r.clearRect(0,0,i.width,i.height),r.drawImage(t,0,0),i)}}let pm={duration:1e3,easing:"quadInOut"},pb=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","scrollX","scrollY"],py=e=>pb.includes(e),pv=(e,t,i)=>{e.forEach(e=>{if(Number.isFinite(e.to))t[e.key]=e.from+(e.to-e.from)*i;else if("fill"===e.key||"stroke"===e.key){let r=cU(e.from,e.to,i,!1);r&&(t[e.key]=r)}})},p_=(e,t,i)=>{let r=[],n=[];t.clear();for(let l=0;l<e.length;l++){let o=e[l],a=o.from,s=o.to,h=o.rotation*i,d=o.fromCp,u=o.toCp,c=Math.sin(h),p=Math.cos(h);n[0]=d[0]+(u[0]-d[0])*i,n[1]=d[1]+(u[1]-d[1])*i;for(let e=0;e<a.length;e+=2){let t=a[e],l=a[e+1],o=t*(1-i)+s[e]*i,h=l*(1-i)+s[e+1]*i;r[e]=o*p-h*c+n[0],r[e+1]=o*c+h*p+n[1]}let g=r[0],f=r[1];t.moveTo(g,f);for(let e=2;e<a.length;e+=6){let i=r[e],n=r[e+1],l=r[e+2],o=r[e+3],a=r[e+4],s=r[e+5];g===i&&f===n&&l===a&&o===s?t.lineTo(a,s):t.bezierCurveTo(i,n,l,o,a,s),g=a,f=s}}},pC=(e,t,i)=>{let r=e?c2(e):[],n=c2(t);i&&r&&(i.fromTransform&&c3(r,i.fromTransform.clone().getInverse()),c3(r,i.toTransfrom));let[l,o]=function(e,t){let i,r,n=[],l=[];for(let o=0;o<Math.max(e.length,t.length);o++){let a,s,h=e[o],d=t[o];h?d?([a,s]=function(e,t){let i=e.length,r=t.length;if(i===r)return[e,t];let n=[],l=[],o=i<r?e:t,a=Math.min(i,r),s=Math.abs(r-i)/6,h=Math.ceil(s/((a-2)/6)),d=[o[0],o[1]],u=s;for(let e=2;e<a;e+=6){let t=o[e-2],i=o[e-1],r=o[e],a=o[e+1],s=o[e+2],c=o[e+3],p=o[e+4],g=o[e+5];if(u<=0){d.push(r,a,s,c,p,g);continue}let f=Math.min(u,h)+1;for(let e=1;e<=f;e++){let o=e/f;cQ(t,r,s,p,o,n),cQ(i,a,c,g,o,l),t=n[3],i=l[3],d.push(n[1],l[1],n[2],l[2],t,i),r=n[5],a=l[5],s=n[6],c=l[6]}u-=f-1}return o===e?[d,t]:[e,d]}(h,d),i=a,r=s):(s=c0(r,h),a=h):(a=c0(i,d),s=d),n.push(a),l.push(s)}return[n,l]}(r,n);return e?function(e,t,i,r){let n,l=[];for(let i=0;i<e.length;i++){let o=e[i],a=t[i],s=c1(o),h=c1(a);null==n&&(n=s[2]<0!=h[2]<0);let d=[],u=[],c=0,p=1/0,g=[],f=o.length;n&&(o=function(e){let t=[],i=e.length;for(let r=0;r<i;r+=2)t[r]=e[i-r-2],t[r+1]=e[i-r-1];return t}(o));let m=6*function(e,t,i,r){let n=(e.length-2)/6,l=1/0,o=0,a=e.length,s=a-2;for(let h=0;h<n;h++){let n=6*h,d=0;for(let l=0;l<a;l+=2){let o=0===l?n:(n+l-2)%s+2,a=e[o]-i[0],h=e[o+1]-i[1],u=t[l]-r[0]-a,c=t[l+1]-r[1]-h;d+=u*u+c*c}d<l&&(l=d,o=h)}return o}(o,a,s,h),b=f-2;for(let e=0;e<b;e+=2){let t=(m+e)%b+2;d[e+2]=o[t]-s[0],d[e+3]=o[t+1]-s[1]}d[0]=o[m]-s[0],d[1]=o[m+1]-s[1];{let e=r/10;for(let t=-r/2;t<=r/2;t+=e){let e=Math.sin(t),i=Math.cos(t),r=0;for(let t=0;t<o.length;t+=2){let n=d[t],l=d[t+1],o=a[t]-h[0],s=a[t+1]-h[1],u=o*i-s*e,c=o*e+s*i;g[t]=u,g[t+1]=c;let p=u-n,f=c-l;r+=p*p+f*f}if(r<p){p=r,c=t;for(let e=0;e<g.length;e++)u[e]=g[e]}}}l.push({from:d,to:u,fromCp:s,toCp:h,rotation:-c})}return l}(l,o,10,Math.PI):o.map((e,t)=>({from:l[t],to:e,fromCp:[0,0],toCp:[0,0],rotation:0}))},px=["fill","fillOpacity","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","lineDashOffset"],pw=(e,t)=>{if(!e||!t)return null;let i=[],r=!1;return Object.keys(e).forEach(n=>{if(!px.includes(n))return;let l=t[n];if(!(0,r5.Z)(l)&&!(0,r5.Z)(e[n])&&l!==e[n]){if("fill"===n||"stroke"===n){let t=e=>"string"==typeof e?cG.Get(e,et.Color255):e;i.push({from:(0,ri.Z)(e[n])?e[n].map(t):t(e[n]),to:(0,ri.Z)(l)?l.map(t):t(l),key:n})}else i.push({from:e[n],to:l,key:n});r=!0}}),r?i:null};class pS extends pp{constructor(e,t,i){super({},{},t,i),this.morphingData=e.morphingData,this.otherAttrs=e.otherAttrs,this.saveOnEnd=e.saveOnEnd}getEndProps(){return{}}onBind(){this.target.createPathProxy(),this.onUpdate(!1,0,this.target.attribute)}onEnd(){}onUpdate(e,t,i){let r=this.target,n="function"==typeof r.pathProxy?r.pathProxy(r.attribute):r.pathProxy;p_(this.morphingData,n,t),this.otherAttrs&&this.otherAttrs.length&&pv(this.otherAttrs,i,t),this.target.setAttributes(i),e&&!this.saveOnEnd&&(this.target.pathProxy=null)}}let pA=(e,t,i,r)=>{var n,l,o;if(e&&(!e.valid||!e.toCustomPath))return __DEV__&&console.error(e," is not validate"),null;if(!t.valid||!t.toCustomPath)return __DEV__&&console.error(t," is not validate"),null;let a=null==e?void 0:e.globalTransMatrix;r&&a&&(a=r.clone().multiply(a.a,a.b,a.c,a.d,a.e,a.f));let s=pC(null==(n=null==e?void 0:e.toCustomPath)?void 0:n.call(e),t.toCustomPath(),{fromTransform:a,toTransfrom:t.globalTransMatrix}),h=pw(null==e?void 0:e.attribute,t.attribute),d=t.animate(i);(null==i?void 0:i.delay)&&d.wait(i.delay);let u=new pS({morphingData:s,otherAttrs:h},null!=(l=null==i?void 0:i.duration)?l:pm.duration,null!=(o=null==i?void 0:i.easing)?o:pm.easing);return d.play(u),d},pk=(e,t,i)=>{var r;let n=t.filter(e=>e&&e.toCustomPath&&e.valid);n.length||__DEV__&&console.error(n," is not validate"),e.valid&&e.toCustomPath||__DEV__&&console.error(e," is not validate");let l=("clone"===(null==i?void 0:i.splitPath)?pE:null!=(r=null==i?void 0:i.splitPath)?r:pP)(e,n.length,!1),o=null==i?void 0:i.onEnd,a=n.length,s=()=>{0==--a&&o&&o()};n.forEach((t,r)=>{var o;let a=l[r],h=(null!=(o=null==i?void 0:i.delay)?o:0)+((null==i?void 0:i.individualDelay)?i.individualDelay(r,n.length,a,t):0);pA(a,t,Object.assign({},i,{onEnd:s,delay:h}),e.globalTransMatrix)})};class pM extends pp{constructor(e,t,i){super({},{},t,i),this.morphingData=e.morphingData,this.otherAttrs=e.otherAttrs}getEndProps(){return{}}onBind(){this.addPathProxy()}addPathProxy(){this.target.shadowRoot.forEachChildren(e=>{e.createPathProxy()}),this.onUpdate(!1,0,this.target.attribute)}clearPathProxy(){this.target.shadowRoot.forEachChildren(e=>{e.pathProxy=null})}onEnd(){}onUpdate(e,t,i){this.target.shadowRoot.forEachChildren((e,i)=>{var r;p_(this.morphingData[i],"function"==typeof e.pathProxy?e.pathProxy(e.attribute):e.pathProxy,t),(null==(r=this.otherAttrs)?void 0:r[i])&&this.otherAttrs[i].length&&pv(this.otherAttrs[i],e.attribute,t)}),e&&(this.clearPathProxy(),this.morphingData=null)}}let pT=e=>{let t={};return Object.keys(e).forEach(i=>{py(i)||(t[i]=e[i])}),t},pR=(e,t,i)=>{let r=pT(e.attribute),n=e.attachShadow();if(t.length)n.setTheme({[t[0].type]:r}),t.forEach(e=>{e.setAttributes({pickable:!1}),n.appendChild(e)});else{let l=e.AABBBounds,o=l.width(),a=l.height();n.setTheme({rect:r}),Array(i).fill(0).forEach(e=>{let i=tU.graphicService.creator.rect({x:0,y:0,width:o,height:a,pickable:!1});n.appendChild(i),t.push(i)})}},pE=(e,t,i)=>{let r=[],n=i?null:pT(e.attribute),l=e.toCustomPath();for(let e=0;e<t;e++){let e={path:(new iZ).fromCustomPath2D(l)};r.push(tU.graphicService.creator.path(i?e:Object.assign({},n,e)))}return i&&pR(e,r,t),r},pP=(e,t,i)=>{let r=[],n=i?null:pT(e.attribute);if("rect"===e.type)c5(e,t).forEach(e=>{r.push(tU.graphicService.creator.rect(i?e:Object.assign({},n,e)))});else if("arc"===e.type)c6(e,t).forEach(e=>{r.push(tU.graphicService.creator.arc(i?e:Object.assign({},n,e)))});else if("circle"===e.type)c8(e,t).forEach(e=>{r.push(tU.graphicService.creator.arc(i?e:Object.assign({},n,e)))});else if("line"===e.type){let l=pe(e,t),o={size:10,symbolType:"circle"};l.forEach(e=>{r.push(tU.graphicService.creator.symbol(i?Object.assign({},e,o):Object.assign({},n,e,o)))})}else"polygon"===e.type?pl(e,t).forEach(e=>{r.push(tU.graphicService.creator.polygon(i?e:Object.assign({},n,e)))}):"area"===e.type?c9(e,t).forEach(e=>{r.push(tU.graphicService.creator.polygon(i?e:Object.assign({},n,e)))}):"path"===e.type&&po(e,t).forEach(e=>{"path"in e?r.push(tU.graphicService.creator.path(i?e:Object.assign({},n,e))):r.push(tU.graphicService.creator.polygon(i?e:Object.assign({},n,e)))});return i&&pR(e,r,t),r},pB=(e,t,i)=>{var r,n,l;let o=e.filter(e=>e.toCustomPath&&e.valid);o.length||__DEV__&&console.error(e," is not validate"),t.valid&&t.toCustomPath||__DEV__&&console.error(t," is not validate");let a=("clone"===(null==i?void 0:i.splitPath)?pE:null!=(r=null==i?void 0:i.splitPath)?r:pP)(t,o.length,!0),s=t.attribute;t.setAttribute("visible",!1);let h=o.map((e,t)=>pC(e.toCustomPath(),a[t].toCustomPath(),{fromTransform:e.globalTransMatrix,toTransfrom:a[t].globalTransMatrix})),d=o.map((e,t)=>pw(e.attribute,s));if(null==i?void 0:i.individualDelay){let r=i.onEnd,n=o.length,l=()=>{0==--n&&(t.setAttributes({visible:!0,ratio:null},!1,{type:sm.ANIMATE_END}),t.detachShadow(),r&&r())};a.forEach((t,r)=>{var n,a,s;let u=(null!=(n=i.delay)?n:0)+i.individualDelay(r,o.length,e[r],t),c=t.animate(Object.assign({},i,{onEnd:l}));c.wait(u),c.play(new pS({morphingData:h[r],saveOnEnd:!0,otherAttrs:d[r]},null!=(a=i.duration)?a:pm.duration,null!=(s=i.easing)?s:pm.easing))})}else{let e=null==i?void 0:i.onEnd,r=i?Object.assign({},i):{};r.onEnd=()=>{t.setAttribute("visible",!0,!1,{type:sm.ANIMATE_END}),t.detachShadow(),e&&e()};let o=t.animate(r);(null==i?void 0:i.delay)&&o.wait(i.delay),o.play(new pM({morphingData:h,otherAttrs:d},null!=(n=null==i?void 0:i.duration)?n:pm.duration,null!=(l=null==i?void 0:i.easing)?l:pm.easing))}},pI=(e,t,i,r)=>"function"==typeof e?e(t,i,r):e,pL=(e,t,i,r,n)=>{var l;let o={prev:e.map(e=>{var t,i;return null==(i=null==(t=e.context)?void 0:t.data)?void 0:i[0]}),next:t.map(e=>{var t,i;return null==(i=null==(t=e.context)?void 0:t.data)?void 0:i[0]})},a={prev:e.slice(),next:t.slice()},s=null!=(l=i.animation)?l:{},h=s.easing,d=pI(s.delay,n,o,a),u=pI(s.duration,n,o,a),c=pI(s.oneByOne,n,o,a),p=pI(s.splitPath,n,o,a),g=(0,sD.Z)(c)&&c>0?e=>(0,nw.Z)(c)?e*c:!0===c?e*u:0:void 0;1!==e.length&&0!==e.length||1!==t.length?1===e.length&&t.length>1?pk(e[0],t,{delay:d,duration:u,easing:h,onEnd:r,individualDelay:g,splitPath:p}):e.length>1&&1===t.length&&pB(e,t[0],{delay:d,duration:u,easing:h,onEnd:r,individualDelay:g,splitPath:p}):pA(e[0],t[0],{delay:d,duration:u,easing:h,onEnd:r})},pF=(e,t)=>{let i=Math.floor(e.length/t);return Array(t).fill(0).map((r,n)=>e.slice(i*n,n===t-1?e.length:i*(n+1)))},pH=e=>{let t=e.getMarkConfig();(0,oV.Z)(t.morphElementKey)&&e.getGraphics().forEach(e=>{var i,r;let n=null==(r=null==(i=e.context)?void 0:i.data)?void 0:r[0];n&&(e.context.morphKey=n[t.morphElementKey])})},pO=(e,t,i={})=>{let r=[],n=[];e.forEach(e=>{pH(e),r.push(...e.getGraphics())}),t.forEach(e=>{pH(e),n.push(...e.getGraphics())});let l=e=>{var t,i,r;return null!=(i=null==(t=e.context)?void 0:t.morphKey)?i:null==(r=e.context)?void 0:r.key},o=new Map,a=new Map;if(r.forEach(e=>{let t=l(e);t&&(o.has(t)||o.set(t,[]),o.get(t).push(e))}),n.forEach(e=>{let t=l(e);t&&(a.has(t)||a.set(t,[]),a.get(t).push(e))}),o.size!==a.size||!Array.from(o.keys()).every(e=>a.has(e)))return!1;let s=[...new Set([...o.keys()].filter(e=>a.has(e)))],h=[...a.keys()].filter(e=>!o.has(e)),d=0,u=()=>{0==(d-=1)&&t.forEach(e=>{})};return h.forEach(e=>{pL([],a.get(e),i,u,{}),d+=1}),s.forEach(e=>{let t=o.get(e),r=a.get(e),n=Math.min(t.length,r.length);if(n>0){let e=pF(t,n),l=pF(r,n);for(let t=0;t<n;t++)pL(e[t],l[t],i,u,{}),d+=1}}),0===d&&u(),!0};var pD=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class pz extends c${commit(e,t){t&&this.getMarks().length>0&&this.getMarks().forEach(e=>e.commit(!1,t)),this._isCommited=!0,e&&this.getCompiler().renderNextTick()}uncommit(){this._isCommited=!1}isCommited(){return this._isCommited}getMarkConfig(){return this._markConfig}setMarkConfig(e){Object.keys(e).forEach(t=>{this._markConfig[t]=e[t]})}getVisible(){return this._visible}setVisible(e){this._visible=e}getUserId(){return this._userId}setUserId(e){(0,oV.Z)(e)&&(this._userId=e)}getDataView(){var e;return null==(e=this._data)?void 0:e.getDataView()}setDataView(e){(0,r5.Z)(this._data)&&this.initMarkData(this._option),this._data.setDataView(e)}getData(){return this._data}setData(e){this._data=e,e&&e.addRelatedMark(this)}hasState(e){return e in this.state.getStateMap()}getState(e){return this.state.getStateMap()[e]}getAnimationConfig(){return this._animationConfig}setAnimationConfig(e){let t="group"===this.type?{selfOnly:!0}:{},i=e=>{var i;let r=null!=(i=e.options)?i:{};return Object.assign(Object.assign(Object.assign({},t),e),{options:(e,t,i)=>{var n,l;let o="function"==typeof r?r(e,t,i):r;if(t&&t.context&&t.context.compiler&&(0,oV.Z)(t.context.modelId)){let e=null==(n=t.context.compiler.getChart())?void 0:n.getModelById(t.context.modelId);return Object.assign(Object.assign({},o),{layoutRect:null==(l=null==e?void 0:e.getLayoutRect)?void 0:l.call(e)})}return Object.assign({},o)}})},r={};Object.keys(e).forEach(t=>{let n=e[t];(0,ri.Z)(n)?r[t]=n.map(i):(0,oV.Z)(n)&&(r[t]=i(n))}),this._animationConfig=r}disableAnimationByState(e){let t=(0,ag.IX)(e);this._disabledAnimationStates=[...new Set([...this._disabledAnimationStates,...t])]}enableAnimationByState(e){let t=(0,ag.IX)(e);this._disabledAnimationStates=this._disabledAnimationStates.filter(e=>!t.includes(e))}setSkipBeforeLayouted(e){this._skipBeforeLayouted=e}setGroupKey(e){this._groupKey=e}getProduct(){return this._product}initMarkData(e){this._data=new cj(e),this._data.addRelatedMark(this)}_compileProduct(e){this.commit(),this._context=null==e?void 0:e.context;let t=this.getProduct();if(this._visible){if((0,oV.Z)(t))e.group&&t.parent!==e.group&&e.group.appendChild(t);else{if(!this.getCompiler().isInited)return;this._initProduct(null==e?void 0:e.group)}(0,r5.Z)(this._product)||(this.compileData(),this.compileState(),this.compileEncode())}else(0,oV.Z)(t)&&this.removeProduct()}_initProduct(e){var t;if(!this.getStage())return;let i=this.getProductId();this._product=oo("group"!==this.type?{pickable:!1,zIndex:this._markConfig.zIndex,overflow:this._markConfig.overflow}:{}),this._product.name=i,this._product.mark=this,(null!=e?e:null==(t=this.getCompiler())?void 0:t.getRootGroup()).appendChild(this._product),this._compiledProductId=i}generateProductId(){return this._userId?`${this._userId}`:`${this.name}_${this.id}`}layout(e){}compileData(){(0,r5.Z)(this._data)||this._data.compile()}compileEncode(){}compileState(){}compileAnimation(){}compileContext(e){this._context=Object.assign({markId:this.id,modelId:this.model.id,markUserId:this._userId,modelUserId:this.model.userId},e)}getContext(){return this._context}compileTransform(){}updateState(e,t){return this.commit(),this.state.updateState(e,t)}getMarks(){return[]}runAnimationByState(e){}stopAnimationByState(e){}pauseAnimationByState(e){}resumeAnimationByState(e){}removeProduct(){this._product&&this._product.parent&&this._product.parent.removeChild(this._product),this._product=null,this._compiledProductId=null}release(){this.state.release(),super.release(),this._lastMark=null}setSimpleStyle(e){this._simpleStyle=e}getSimpleStyle(){return this._simpleStyle}constructor(e,t){var i;super(t),this.type=void 0,this.name="mark",this._markConfig={zIndex:X.Mark,morph:!1},this._visible=!0,this.stateStyle={},this._unCompileChannel={},this._disabledAnimationStates=[],this._skipBeforeLayouted=!1,this._extensionChannel={},this._computeExChannel={},this._graphicMap=new Map,this._graphics=[],this._getEncoderOfStyle=(e,t)=>{if(t&&e){let i={};return Object.keys(t).forEach(t=>{this._unCompileChannel[t]||(i[t]=this._computeAttribute(t,e))}),i}return null},this._setGraphicFromMarkConfig=e=>{let{setCustomizedShape:t,graphicName:i}=this._markConfig;t&&(e.pathProxy=i=>t(e.context.data,i,new iZ)),i&&((0,nr.Z)(i)?e.name=i(e):e.name=i)},this._setStateOfGraphic=(e,t)=>{e.clearStates(),e.stateProxy=null,e.context.diffState!==J.enter&&e.context.diffState!==J.update||(e.stateProxy=(t,i)=>{var r;return this._runEncoderOfGraphic(null==(r=this._encoderOfState)?void 0:r[t],e)},e.context.states&&e.useStates(e.context.states,t))},this.name=e,this.model=t.model,this.key=t.key,this.state=new cN(t,this),this._attributeContext=t.attributeContext,null==(i=t.map)||i.set(this.id,this)}created(){this._initStyle()}initStyleWithSpec(e){e&&((0,oV.Z)(e.id)&&(this._userId=e.id),(0,ni.Z)(e.interactive)&&(this._markConfig.interactive=e.interactive),(0,oV.Z)(e.zIndex)&&(this._markConfig.zIndex=e.zIndex),(0,ni.Z)(e.visible)&&this.setVisible(e.visible),this._markConfig.setCustomizedShape=e.customShape,this._stateSort=e.stateSort,this._initSpecStyle(e))}_transformStyleValue(e,t){if(e.scale){let i=e.scale,r=i.range();return i.range(r.map(t)),e}return"function"==typeof e?(...i)=>t(e(...i)):t(e)}convertAngleToRadian(e){return this._transformStyleValue(e,t9.M4)}isUserLevel(e){return[q.User_Mark,q.User_Series,q.User_Chart,q.User_SeriesStyle].includes(e)}setStyle(e,t="normal",i=0){if((0,r5.Z)(e))return;void 0===this.stateStyle[t]&&(this.stateStyle[t]={});let r=this.isUserLevel(i);Object.keys(e).forEach(n=>{let l=e[n];(0,r5.Z)(l)||(l=this._filterAttribute(n,l,t,i,r),this.setAttribute(n,l,t,i))})}getStyle(e,t="normal"){var i;return null==(i=this.stateStyle[t][e])?void 0:i.style}_filterAttribute(e,t,i,r,n){let l=this._styleConvert(t);if(n)switch(e){case"angle":l=this.convertAngleToRadian(l);break;case"innerPadding":case"outerPadding":l=this._transformStyleValue(l,e=>-e);break;case"curveType":l=this._transformStyleValue(l,e=>{var t;return t=this._option.model.direction,"monotone"===e?"horizontal"===t?"monotoneY":"monotoneX":e})}return l}setReferer(e,t,i){var r;if(e)if(t&&i){let n=null!=(r=this.stateStyle[i])?r:{[t]:{}};this.stateStyle[i][t]=Object.assign(Object.assign({},n[t]),{referer:e})}else Object.entries(this.stateStyle).forEach(([t,i])=>{Object.entries(i).forEach(([i,r])=>{this.stateStyle[t][i].referer=e})})}setPostProcess(e,t,i="normal"){var r;(null==(r=this.stateStyle[i])?void 0:r[e])&&(this.stateStyle[i][e].postProcess=t)}getAttribute(e,t,i="normal"){return this._computeAttribute(e,i)(t)}getAttributesOfState(e,t="normal"){let i=this.stateStyle[t];if(i){let r={};return Object.keys(i).forEach(i=>{this._unCompileChannel[i]||(r[i]=this._computeAttribute(i,t)(e))}),r}}setAttribute(e,t,i="normal",r=0){var n;void 0===this.stateStyle[i]&&(this.stateStyle[i]={}),void 0===this.stateStyle[i][e]&&(this.stateStyle[i][e]={level:r,style:t,referer:void 0});let l=null==(n=this.stateStyle[i][e])?void 0:n.level;(0,oV.Z)(l)&&l<=r&&hs(this.stateStyle[i][e],{style:t,level:r}),"normal"!==i&&e in this._extensionChannel&&this._extensionChannel[e].forEach(e=>{void 0===this.stateStyle[i][e]&&(this.stateStyle[i][e]=this.stateStyle.normal[e])})}_getDefaultStyle(){return{visible:!0,x:0,y:0}}_styleConvert(e){if(!e)return e;if((0,cz.dx)(e.type)||e.scale){let t=function(e,t){var i,r;if("scale"in e&&e.scale)return(0,r6.Z)(e.scale)&&(null==t?void 0:t.globalScale)?t.globalScale.registerMarkAttributeScale(e,t.seriesId):e.scale;let n=cI(e.type);return n&&(i=n,r=e,i&&r&&(r.domain&&i.domain(r.domain),r.range&&i.range(r.range),r.specified&&i.specified&&i.specified(r.specified),r.clamp&&i.clamp&&i.clamp(r.clamp))),n}(e,{globalScale:this._option.globalScale,seriesId:this._option.seriesId});if(t)return{scale:t,field:e.field,changeDomain:e.changeDomain}}return e}_computeAttribute(e,t){var i;let r=null==(i=this.stateStyle[t])?void 0:i[e];r||(r=this.stateStyle.normal[e]);let n=this._computeStateAttribute(r,e,t),l=(0,nr.Z)(null==r?void 0:r.postProcess),o=e in this._computeExChannel;if(l&&o){let i=this._computeExChannel[e];return l=>{let o=n(l);return o=r.postProcess(o,l,this._attributeContext,this.getDataView()),i(e,l,t,o)}}if(l)return e=>r.postProcess(n(e),e,this._attributeContext,this.getDataView());if(o){let i=this._computeExChannel[e];return r=>i(e,r,t,n(r))}return n}_computeStateAttribute(e,t,i){var r;return e?e.referer?e.referer._computeAttribute(t,i):e.style?"function"==typeof e.style?t=>e.style(t,this._attributeContext,{mark:this},this.getDataView()):cO.includes(e.style.gradient)?this._computeGradientAttr(e.style):["outerBorder","innerBorder"].includes(t)?this._computeBorderAttr(e.style):(0,cz.dx)(null==(r=e.style.scale)?void 0:r.type)?t=>{let i=t;return"series"===this.model.modelType&&this.model.getMarkData&&(i=this.model.getMarkData(t)),e.style.scale.scale(i[e.style.field])}:t=>e.style:t=>e.style:e=>{}}_initStyle(){let e=this._getDefaultStyle();this.setStyle(e,"normal",0)}_initSpecStyle(e){e.style&&this.setStyle(e.style,"normal",q.User_Mark);let t=e.state;t&&Object.keys(t).forEach(e=>{let i=t[e];if("style"in i){let t=i.style,r={stateValue:e};"level"in i&&(r.level=i.level),"filter"in i&&(r=(0,nr.Z)(i.filter)?Object.assign({filter:i.filter},r):Object.assign(Object.assign({},i.filter),r)),this.state.addStateInfo(r),this.setStyle(t,e,q.User_Mark)}else this.setStyle(i,e,q.User_Mark)})}_computeGradientAttr(e){var t,i;let{gradient:r,scale:n,field:l}=e,o=pD(e,["gradient","scale","field"]),a=n,s=l;if(!(n&&l||"series"!==this.model.modelType)){let{scale:e,field:t}=this.model.getColorAttribute();n||(a=e),s||(s=t)}let h=ht(he(this.model.getColorScheme(),"series"===this.model.modelType?null==(i=(t=this.model).getSpec)?void 0:i.call(t):void 0),this.model.getDefaultColorDomain()),d=Object.assign(Object.assign({},cD[r]),o);return e=>{let t={},i=this.getDataView();return Object.keys(d).forEach(r=>{let n=d[r];"stops"===r?t.stops=n.map(t=>{let{opacity:r,color:n,offset:l}=t,o=null!=n?n:null==a?void 0:a.scale(e[s]);return(0,nr.Z)(n)&&(o=n(e,this._attributeContext,i)),(0,oV.Z)(r)&&(o=s4.Il.SetOpacity(o,r)),{offset:(0,nr.Z)(l)?l(e,this._attributeContext,i):l,color:o||h[0]}}):(0,nr.Z)(n)?t[r]=n(e,this._attributeContext,i):t[r]=n}),t.gradient=r,t}}_computeBorderAttr(e){let{scale:t,field:i}=e,r=pD(e,["scale","field"]);return e=>{var n,l,o;let a={};if(Object.keys(r).forEach(t=>{let i=r[t];(0,nr.Z)(i)?a[t]=i(e,this._attributeContext,this.getDataView()):a[t]=i}),"stroke"in a)cO.includes(null==(o=r.stroke)?void 0:o.gradient)&&(a.stroke=this._computeGradientAttr(r.stroke)(e));else{let r=ht(he(this.model.getColorScheme(),"series"===this.model.modelType?null==(l=(n=this.model).getSpec)?void 0:l.call(n):void 0),this.model.getDefaultColorDomain()),o=t,s=i;if(!(t&&i||"series"!==this.model.modelType)){let{scale:i,field:n}=this.model.getColorAttribute();t||(o=i),s||(s=n),a.stroke=(null==o?void 0:o.scale(e[s]))||r[0]}}return a}}_getDataByKey(e){return dF(e,(e,t)=>{var i;return`${this._groupKeyGetter(e)}_${null!=(i=this._keyGetter(e))?i:t}`})}_getCommonContext(){return{compiler:this.getCompiler(),markType:this.type,markId:this.id,modelId:this.model.id,markUserId:this._userId,modelUserId:this.model.userId}}prepareMorph(e){this._lastMark=e}reuse(e){this.type===e.type&&(this._product=e.getProduct(),this._graphics=e.getGraphics(),this._graphicMap=e._graphicMap,this._graphicMap.forEach(e=>{e.context=Object.assign(Object.assign({},e.context),this._getCommonContext())}),this._dataByKey=e._dataByKey,this._prevDataByKey=e._prevDataByKey,this.needClear=e.needClear)}_parseProgressiveContext(e){let t=this._markConfig.progressiveStep>0&&this._markConfig.progressiveThreshold>0&&this._markConfig.progressiveStep<this._markConfig.progressiveThreshold,i=this._markConfig.large&&this._markConfig.largeThreshold>0&&e.length>=this._markConfig.largeThreshold;if(t){let t=this._dataByGroup;return t&&t.keys&&t.keys.some(e=>t.data.get(e).length>this._markConfig.progressiveThreshold)?{large:i,progressive:{data:e,step:this._markConfig.progressiveStep,currentIndex:0,totalStep:t.keys.reduce((e,i)=>Math.max(Math.ceil(t.data.get(i).length/this._markConfig.progressiveStep),e),1),groupedData:t.data}}:{large:i}}return{large:i}}getGraphics(){return this._graphics}_createGraphic(e={}){return hp.createGraphicComponent(this.type,e)}_runGroupData(e){this._keyGetter=(0,nr.Z)(this.key)?this.key:(0,oV.Z)(this.key)?e=>null==e?void 0:e[this.key]:e=>null==e?void 0:e[dm],this._groupKeyGetter=(0,oV.Z)(this._groupKey)?e=>`${null==e?void 0:e[this._groupKey]}`:()=>"key",this._dataByGroup=dF(e,this._groupKeyGetter)}getAnimationState(){let e=this._graphics.map(e=>e.context.animationState),t=e.every(e=>e===V.appear)?V.appear:e.every(e=>e===V.disappear)?V.disappear:e[0];return null!=t?t:V.none}createAnimationStateList(e,t){var i;let r=t[e];return r&&Array.isArray(r)&&(r=1===r.length?r[0]:r),Array.isArray(r)?r.map((e,t)=>{var i;return Object.assign(Object.assign({},e),{priority:null!=(i=e.priority)?i:1/0})}):r?Object.assign(Object.assign({},r),{priority:"normal"===e?null!=(i=r.priority)?i:1/0:r.priority}):r}tryRunMorphing(e){if(this._lastMark){e.forEach(e=>{"appear"!==e.context.animationState&&"enter"!==e.context.animationState||e.setAttributes(e.getAttributes(!0))});let t=pO([this._lastMark],[this],{});return this._lastMark=null,t}return!1}_runStateAnimation(e){var t,i;if(!this._animationConfig||0===e.length||this.tryRunMorphing(e))return;let r=this.getAnimationConfig();if(null!=(t=this._markConfig.useSequentialAnimation)&&t&&this._runSequentialAnimations)return void this._runSequentialAnimations(e);let n=e.every(e=>"appear"===e.context.animationState),l=this.createAnimationStateList("appear",r);if(n&&this._product){let e=l?["appear"]:[],t=l?[{name:"appear",animation:l}]:[];if(r.normal){e.push("normal");let i={name:"normal",animation:this.createAnimationStateList("normal",r)};t.push(i)}this._product.applyAnimationState(e,t)}let o=!1;if(e.forEach(e=>{let t=e.context.animationState;if("appear"===t)return;let i=r[t];if(i&&i.length>0){let r=i.map((e,i)=>({name:`${t}_${i}`,animation:e}));r.forEach(t=>{t.animation.customParameters=e.context});let n=[t];e.applyAnimationState(n,[1===r.length?r[0]:r])}"enter"===t&&r.normal&&(o=!0)}),o&&this._product&&(null==(i=r.normal)?void 0:i.length)){this._product.stopAnimationState("normal","start");let e={name:"normal",animation:this.createAnimationStateList("normal",r)};this._product.applyAnimationState(["normal"],[e])}}_setAnimationState(e){var t,i,r;let n=(("component"===this.type?this.model.getAnimationStateCallback():null==(r=null==(i=(t=this.model).getRegion)?void 0:i.call(t))?void 0:r.getAnimationStateCallback())||(e=>{var t;let i=null==(t=e.context)?void 0:t.diffState;return i===V.exit?V.exit:i===V.update?V.update:V.appear}))(e);e.context.animationState=null!=n?n:e.context.diffState,e.context.animationState===J.exit&&(e.context.reusing=!0,e.animates&&e.animates.forEach(e=>e.stop()))}_runJoin(e){let t=this._getDataByKey(e),i=this._prevDataByKey,r=[],n=new Set(this._graphics.filter(e=>e.context.diffState===J.enter)),l=(e,t,i)=>{var l,o,a,s,h,d,u,c,p;let g,f;return(0,r5.Z)(t)?(g=this._graphicMap.get(e))&&(f=J.exit):(0,r5.Z)(i)?(g=this._graphicMap.has(e)?this._graphicMap.get(e):{},f=J.enter,g.isExiting=!1,this._graphicMap.set(e,g),r.push(g)):(g=this._graphicMap.get(e))&&(f=J.update,r.push(g)),g&&(n.delete(g),g.context=Object.assign(Object.assign({},this._getCommonContext()),{diffState:f,reusing:null==(l=g.context)?void 0:l.reusing,originalFieldX:null==(o=g.context)?void 0:o.originalFieldX,originalFieldY:null==(a=g.context)?void 0:a.originalFieldY,fieldX:null==(s=g.context)?void 0:s.fieldX,fieldY:null==(h=g.context)?void 0:h.fieldY,data:null!=t?t:null==(d=g.context)?void 0:d.data,uniqueKey:e,key:t?this._keyGetter(t[0]):null==(u=g.context)?void 0:u.key,groupKey:t?this._groupKeyGetter(t[0]):null==(c=g.context)?void 0:c.groupKey,indexKey:"__VCHART_DEFAULT_DATA_INDEX",stateAnimateConfig:null==(p=this.getAnimationConfig())?void 0:p.state}),this._setAnimationState(g)),g};if(i&&t){let e=new Map(i.data);t.keys.forEach(i=>{l(i,t.data.get(i),e.get(i)),e.delete(i)}),i.keys.forEach(t=>{e.has(t)&&l(t,null,e.get(t))})}else t?t.keys.forEach(e=>{let i=l(e,t.data.get(e),null);i&&(i.context.animationState=V.appear)}):i&&i.keys.forEach(e=>{l(e,null,i.data.get(e)).context.animationState=V.disappear});n.forEach(e=>{this._graphicMap.delete(e.context.uniqueKey),e.parent&&e.parent.removeChild(e),e.release()});let o=r.length;r.forEach((e,t)=>{e.context.graphicCount=o,e.context.graphicIndex=t,e.stateSort=this._stateSort}),this._dataByKey=t,this._graphics=r,this.needClear=!0}_runEncoderOfGraphic(e,t,i={}){return dH(e,t.context.data[0],i)}_runGroupEncoder(e){if(!this._dataByGroup)return null;let t={};return this._dataByGroup.keys.forEach(i=>{t[i]=dH(e,this._dataByGroup.data.get(i)[0])}),this._attrsByGroup=t,t}_transformGraphicAttributes(e,t,i){return Object.assign(Object.assign({},i),t)}_separateNormalStyle(e){let t={},i={};return Object.keys(e).forEach(r=>{this._unCompileChannel[r]||(this._option.noSeparateStyle||function(e,t,i){var r,n,l;let o=null==(r=t[e])?void 0:r.style;return n=e,l=o,!!(("fill"===n||"stroke"===n)&&(null==l?void 0:l.gradient)&&(null==l?void 0:l.stops)||(0,nr.Z)(o))||!(!(null==o?void 0:o.scale)||o.field===i)}(r,e,this._groupKey)?t[r]=e[r]:i[r]=e[r])}),{updateStyles:t,groupStyles:i}}_addProgressiveGraphic(e,t){e.incrementalAppendChild(t)}_runEncoder(e,t){var i;let r=t?null:this._runGroupEncoder(null==(i=this._encoderOfState)?void 0:i.group);e.forEach((e,t)=>{var i,n;let l=this._runEncoderOfGraphic(null==(i=this._encoderOfState)?void 0:i.update,e);null==(n=e.currentStates)||n.forEach(t=>{var i;let r=this._runEncoderOfGraphic(null==(i=this._encoderOfState)?void 0:i[t],e);l=Object.assign(Object.assign({},l),r)}),(0,r5.Z)(this._markConfig.interactive)||(l.pickable=this._markConfig.interactive);let o=this._transformGraphicAttributes(e,l,null==r?void 0:r[e.context.groupKey]);e.context.finalAttrs=o})}_runApplyGraphic(e){let t=this.hasAnimation();e.forEach((i,r)=>{var n,l;let o=i.context.finalAttrs,a=this.hasAnimationByState(i.context.animationState);if(i.setAttributes){let e=hN(i,o);i.context.diffAttrs=e,i.context.reusing?(i.context.lastAttrs=i.attribute,i.initAttributes({}),i.context.reusing=!1):a||(t?i.setAttributesAndPreventAnimate(e):i.setAttributes(e)),t&&i.setFinalAttributes(o)}else{let a=i;i=this._createGraphic(o),t&&(null==(n=i.setFinalAttributes)||n.call(i,o)),i.context=a.context,i.context.diffAttrs=o,i.stateSort=this._stateSort;let s=this._graphics===e?r:r+this._graphics.length-e.length;if(s>=0&&(this._graphics[s]=i),null==(l=this.renderContext)?void 0:l.progressive){let e=this._dataByGroup?this._dataByGroup.keys.indexOf(i.context.groupKey):0,t=e>=0?this._product.getChildAt(e):null;t&&this._addProgressiveGraphic(t,i)}else this._product.appendChild(i),this._graphicMap.set(i.context.uniqueKey,i)}this._setStateOfGraphic(i,a),this._setGraphicFromMarkConfig(i)})}_updateEncoderByState(){let e={};Object.keys(this.stateStyle).forEach(t=>{if(t===Q.STATE_NORMAL){let{groupStyles:i,updateStyles:r}=this._separateNormalStyle(this.stateStyle[t]);e.group=this._getEncoderOfStyle(t,i),e.update=this._getEncoderOfStyle(t,r)}else e[t]=this._getEncoderOfStyle(t,this.stateStyle[t])}),this._encoderOfState=e}_runState(e){e.forEach(e=>{var t;let i=[...(null!=(t=e.currentStates)?t:[]).filter(e=>!this.state.getStateInfo(e)),...this.state.checkState(e,e.context.data)];this._stateSort&&i.length&&i.sort(this._stateSort),e.context.states=i})}_getAttrsFromConfig(e={}){let{zIndex:t,clip:i,clipPath:r,overflow:n}=this._markConfig;if((0,r5.Z)(t)||(e.zIndex=t),(0,r5.Z)(i)||(e.clip=i),!(0,r5.Z)(r)){let t=(0,ri.Z)(r)?r:r(this._graphics);t&&t.length||(e.clip=!1),e.path=t}return(0,r5.Z)(n)||(e.overflow=n),e}_updateAttrsOfGroup(){var e;let t=this._getAttrsFromConfig();null==(e=this._product)||e.setAttributes(t),this._markConfig.support3d&&this._product&&this._product.setMode("3d")}_runBeforeTransform(e){var t;let i=null==(t=this._transform)?void 0:t.filter(e=>{if(e.type){let t=hp.getGrammarTransform(e.type);return t&&(!t.runType||"beforeJoin"===t.runType)}return!1});return this.runTransforms(i,e)}_runEncoderTransform(e,t){var i;let r=null==(i=this._transform)?void 0:i.filter(e=>{if(e.type){let i=hp.getGrammarTransform(e.type);return i&&"afterEncode"===i.runType&&!!i.canProgressive===t}return!1});return this.runTransforms(r,e)}renderInner(){var e,t,i;let r;this._updateEncoderByState();let n=null!=(t=null==(e=this._data)?void 0:e.getProduct())?t:[{}],l=this._runBeforeTransform(n);if(null==l?void 0:l.progressive){this.renderContext={beforeTransformProgressive:l.progressive};let e=l.progressive;if(e.canAnimate&&e.canAnimate()&&e.unfinished())return void this._updateAttrsOfGroup();r=e.output()}else r=(0,ag.IX)(l),this._runGroupData(r),this.renderContext=this._parseProgressiveContext(r);(null==(i=this.renderContext)?void 0:i.progressive)?(this._graphicMap.clear(),this._runProgressiveStep()):(this._runJoin(r),this._runState(this._graphics),this._runEncoder(this._graphics),this._runEncoderTransform(this._graphics,!1),this._runApplyGraphic(this._graphics)),this._updateAttrsOfGroup()}render(){this.isCommited()&&(!this.getVisible()||this._skipBeforeLayouted&&this.getCompiler().getLayoutState()===U.before||(s0(`render mark: ${this.getProductId()}, type is ${this.type}`),this.renderInner()),this.uncommit())}updateMarkState(e){if(!this._product)return;let t=this.state.getStateInfo(e);this._graphics.forEach(i=>{"in"===this.state.checkOneState(i,i.context.data,t)?i.addState(e,!0,this.hasAnimationByState("state")):i.removeState(e,this.hasAnimationByState("state"))})}clearExitGraphics(){this._prevDataByKey=this._dataByKey;let e=(e,t)=>{this._graphicMap.delete(t),e.parent&&e.parent.removeChild(e),e.release&&e.release()};this._graphicMap.forEach((t,i)=>{if(t.context.diffState===J.exit&&!t.isExiting)if(t.context.animationState===J.exit&&this.hasAnimationByState("exit")){t.isExiting=!0;let r=this.getAnimationConfig();if(r.exit&&r.exit.length){let n=r.exit.map((e,i)=>({name:`exit_${i}`,animation:Object.assign(Object.assign({},e),{customParameters:t.context})}));t.applyAnimationState(["exit"],[1===n.length?n[0]:n],()=>{e(t,i)})}}else e(t,i)})}isProgressive(){return this.renderContext&&(!!this.renderContext.progressive||!!this.renderContext.beforeTransformProgressive)}canAnimateAfterProgressive(){var e,t;return this.renderContext&&this.renderContext.beforeTransformProgressive&&(null==(t=(e=this.renderContext.beforeTransformProgressive).canAnimate)?void 0:t.call(e))}isDoingProgressive(){return this.renderContext&&(this.renderContext.progressive&&this.renderContext.progressive.currentIndex<this.renderContext.progressive.totalStep||this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.unfinished())}clearProgressive(){this.renderContext&&this.renderContext.progressive&&(this._graphics=[],this._product.children.forEach(e=>{e.incrementalClearChild()}),this._product.removeAllChild()),this.renderContext&&this.renderContext.beforeTransformProgressive&&this.renderContext.beforeTransformProgressive.release(),this.renderContext=null}restartProgressive(){this.renderContext&&this.renderContext.progressive&&(this.renderContext.progressive.currentIndex=0)}_runBeforeProgressive(){var e;let t=this.renderContext.beforeTransformProgressive;t.progressiveRun();let i=t.output();if(null==(e=t.canAnimate)?void 0:e.call(t)){if(t.unfinished())return;this._runGroupData(i),this._runJoin(i),this._runState(this._graphics),this._runEncoder(this._graphics),this._runApplyGraphic(this._graphics)}}_runProgressiveJoin(){let e=this.renderContext.progressive.currentIndex,t=[],i={};return this._dataByGroup.keys.forEach(r=>{let n=this.renderContext.progressive.groupedData.get(r),l=this.renderContext.progressive.step,o=n.slice(e*l,(e+1)*l),a=[];o.forEach((i,n)=>{let o=this._keyGetter(i),s={context:Object.assign(Object.assign({},this._getCommonContext()),{diffState:J.enter,data:[i],uniqueKey:`${r}_${null!=o?o:e*l+n}`,key:o,groupKey:r})};a.push(s),t.push(s)}),i[r]=a}),{graphicsByGroup:i,graphics:t,needUpdate:!0}}_createIncrementalGraphics(){this._product.removeAllChild(),this._dataByGroup.keys.forEach(e=>{let t=oo({pickable:!1,zIndex:this._markConfig.zIndex});t.incremental=this.renderContext.progressive.step,this._product.appendChild(t)})}_setCommonAttributesToTheme(e){var t,i,r;if(this._attrsByGroup&&e){let n=e.parent;n&&(null==(t=this._attrsByGroup)?void 0:t[null==(i=e.context)?void 0:i.groupKey])&&n.setTheme({common:this._attrsByGroup[null==(r=e.context)?void 0:r.groupKey]})}}_runProgressiveEncoder(e){0===this.renderContext.progressive.currentIndex?this._runEncoder(e):this._runEncoder(e,!0)}_runProgressiveApplyGraphic(e){0===this.renderContext.progressive.currentIndex?(this._runApplyGraphic(e),this._setCommonAttributesToTheme(e[0])):this._runApplyGraphic(e)}_runProgressiveStep(){let{graphics:e,graphicsByGroup:t,needUpdate:i}=this._runProgressiveJoin();0===this.renderContext.progressive.currentIndex?(this._createIncrementalGraphics(),this._graphics=e):i&&e.forEach(e=>{this._graphics.push(e)}),this._runState(e),Object.keys(t).forEach(e=>{this._runProgressiveEncoder(t[e])}),this._runEncoderTransform(this._graphics,!0),Object.keys(t).forEach(e=>{this._runProgressiveApplyGraphic(t[e])}),this.renderContext.progressive.currentIndex+=1}renderProgressive(){var e;(null==(e=this.renderContext)?void 0:e.beforeTransformProgressive)?this._runBeforeProgressive():this.renderContext.progressive&&this._runProgressiveStep()}hasAnimationByState(e){if(!e||!this._animationConfig||!this._animationConfig[e]||this._disabledAnimationStates.includes(e))return!1;let t=this._animationConfig[e];return t.length>0||(0,r9.Z)(t)}hasAnimation(){return!!this._animationConfig&&Object.keys(this._animationConfig).length>0}runAnimation(){this._runStateAnimation(this.getGraphics())}}class pW extends ol{constructor(e){super({x:0,y:0}),this.type="shadowroot",this.shadowHost=e}clearUpdateBoundTag(){super.clearUpdateBoundTag(),this.shadowHost&&this.shadowHost.clearUpdateBoundTag()}addUpdateBoundTag(){super.addUpdateBoundTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}addUpdateShapeAndBoundsTag(){super.addUpdateShapeAndBoundsTag(),this.shadowHost&&this.shadowHost.addUpdateBoundTag()}tryUpdateGlobalTransMatrix(e=!0){if(this.shouldUpdateGlobalMatrix()){let t=this.transMatrix;this._globalTransMatrix?this._globalTransMatrix.setValue(t.a,t.b,t.c,t.d,t.e,t.f):this._globalTransMatrix=t.clone(),this.doUpdateGlobalMatrix(),e&&this.clearUpdateGlobalPositionTag()}return this._globalTransMatrix}doUpdateGlobalMatrix(){if(this.shadowHost){let e=this.shadowHost.globalTransMatrix;this._globalTransMatrix.multiply(e.a,e.b,e.c,e.d,e.e,e.f)}}tryUpdateGlobalAABBBounds(){return this._globalAABBBounds?this._globalAABBBounds.setValue(this._AABBBounds.x1,this._AABBBounds.y1,this._AABBBounds.x2,this._AABBBounds.y2):this._globalAABBBounds=this._AABBBounds.clone(),this.shadowHost&&this._globalAABBBounds.transformWithMatrix(this.shadowHost.globalTransMatrix),this._globalAABBBounds}}function pZ(e){return new pW(e)}function pN(){pN.__loaded||(pN.__loaded=!0,oq.RegisterGraphicCreator("shadowRoot",pZ))}pN.__loaded=!1;class p$ extends pz{constructor(){super(...arguments),this.type=p$.type,this._marks=[],this._diffState=J.enter}getMarks(){return this._marks}isMarkExist(e){return void 0!==this._marks.find(t=>t.id===e.id)}addMark(e){return this.isMarkExist(e)?(s1("Mark already exists, add mark failed."),!1):(this._marks.push(e),!0)}removeMark(e){let t=this._marks.findIndex(t=>t.id===e.id||t.name===e.name);return -1===t?(s1("Mark does not exists, removeMark failed."),!1):(this._marks.splice(t,1),!0)}getMarkInType(e){return this._marks.filter(t=>t.type===e)}getMarkInId(e){return this._marks.find(t=>t.id===e)}getMarkInUserId(e){let t;return dO(this,e=>{t=e},t=>t.getUserId()===e,null,!0),t}getMarkInName(e){return this._marks.filter(t=>t.name===e)}_compileProduct(e){super._compileProduct(e),this.getMarks().forEach(e=>{e.compile({group:this._product})})}_getAttrsFromConfig(e={}){let t=super._getAttrsFromConfig(e);return(0,r5.Z)(this._markConfig.interactive)||(t.pickable=this._markConfig.interactive),e}getGraphics(){return[this._product]}renderInner(){var e;if(!this._product)return;let t=null!=(e=this._simpleStyle)?e:this.getAttributesOfState({});this._product.context=Object.assign(Object.assign(Object.assign({},this._product.context),this._getCommonContext()),{diffState:this._diffState}),this._setAnimationState(this._product);let i=this._getAttrsFromConfig(t);if(this._product.context.diffState===J.update){let e=this.hasAnimation(),t=hN(this._product,i);this._product.context.diffAttrs=t,this.hasAnimationByState(this._product.context.animationState)||(e?this._product.setAttributesAndPreventAnimate(t):this._product.setAttributes(t)),e&&this._product.setFinalAttributes(i)}else this._product.setAttributes(i);this.needClear=!0}clearExitGraphics(){this._diffState=J.update}render(){this._isCommited&&(s0(`render mark: ${this.getProductId()}, type is ${this.type}`),this.renderInner(),this.uncommit()),this.getMarks().forEach(e=>{e.render()})}release(){super.release(),this.removeProduct()}}p$.type="group";let pj=()=>{pN(),dV(),hp.registerMark(p$.type,p$)},pG=-.5*Math.PI,pV=1.5*Math.PI,pU="PingFang SC,Helvetica Neue,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol";(D=en||(en={})).selected="selected",D.selectedReverse="selected_reverse",D.hover="hover",D.hoverReverse="hover_reverse";let pK={[en.selectedReverse]:{},[en.selected]:{},[en.hover]:{},[en.hoverReverse]:{}},pX={container:"",width:30,height:30,style:{}},pY="scrollDrag",pq=(e,t,i,r)=>new rv.e(Object.assign({defaultFontParams:Object.assign({fontFamily:pU,fontSize:14},r),getTextBounds:i?void 0:dJ,specialCharSet:"-/: .,@%'\"~"+rv.e.ALPHABET_CHAR_SET+rv.e.ALPHABET_CHAR_SET.toUpperCase()},null!=t?t:{}),e);function pJ(e,t,i={}){if(!e)return{width:0,height:0};let r=dJ({text:e,fontFamily:t.fontFamily||i.fontFamily||pU,fontSize:t.fontSize||i.fontSize||12,fontWeight:t.fontWeight||i.fontWeight,textAlign:t.textAlign||"center",textBaseline:t.textBaseline,ellipsis:!!t.ellipsis,maxLineWidth:t.maxLineWidth||1/0,lineHeight:t.fontSize||i.fontSize||12});return{width:r.width(),height:r.height()}}function pQ(e,t="type"){var i,r;return(0,r9.Z)(e.text)&&"type"in e.text?null!=(i=e.text.type)?i:"text":t in e&&null!=(r=e[t])?r:"text"}function p0(e){var t,i;return(0,oV.Z)(e.maxLineWidth)&&(e.maxWidth=e.maxLineWidth,delete e.maxLineWidth),e.width=null!=(t=e.width)?t:0,e.height=null!=(i=e.height)?i:0,e.textConfig=e.text.text||e.text,e}function p1(e,t="type"){let i=pQ(e,t);return"rich"===i?oq.richtext(p0(e)):("html"===i?e=function(e){let{text:t,_originText:i}=e,{text:r}=t;return e.html=r,e.text=i,e.renderable=!1,e}(e):"react"===i&&(e=function(e){let{text:t,_originText:i}=e,{text:r}=t;return e.react=r,e.text=i,e.renderable=!1,e}(e)),oq.text(e))}function p2(e,t,i,r,n){"right"===e?"center"===i?t.setAttribute("x",r-n/2):"right"===i||"end"===i?t.setAttribute("x",r):t.setAttribute("x",r-n):"center"===i?t.setAttribute("x",r+n/2):"right"===i||"end"===i?t.setAttribute("x",r+n):t.setAttribute("x",r)}let p3=(e,t,i)=>pq(e,t,i,{fontFamily:hb.fontFamily,fontSize:hb.fontSize});class p4{static instance(){return p4.instance_||(p4.instance_=new p4),p4.instance_}constructor(){this.functions={}}registerFunction(e,t){e&&t&&(this.functions[e]=t)}unregisterFunction(e){e&&delete this.functions[e]}getFunction(e){return this.functions[e]||null}getFunctionNameList(){return Object.keys(this.functions)}}class p5{get displayWidth(){return this._pixelWidth/this._dpr}get displayHeight(){return this._pixelHeight/this._dpr}get id(){return this._id}get x(){return this._x}set x(e){this._x=e}get y(){return this._y}set y(e){this._y=e}get nativeCanvas(){return this._nativeCanvas}set nativeCanvas(e){this._nativeCanvas=e}get width(){return this._pixelWidth}set width(e){this._pixelWidth=e,this._displayWidth=e/(this._dpr||1)}get height(){return this._pixelHeight}set height(e){this._pixelHeight=e,this._displayHeight=e/(this._dpr||1)}getContext(e){return this._context}get visiable(){return this._visiable}set visiable(e){this._visiable=e,e?this.show():this.hide()}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this.resize(this._displayWidth,this._displayHeight)}constructor(e){var t;let{nativeCanvas:i,width:r=500,height:n=500,dpr:l=1,x:o,y:a,id:s,canvasControled:h=!0}=e;this._x=null!=o?o:0,this._y=null!=a?a:0,this._pixelWidth=r*l,this._pixelHeight=n*l,this._visiable=!1!==e.visiable,this.controled=h,this._displayWidth=r,this._displayHeight=n,this._dpr=l,this._nativeCanvas=i,this._id=null!=(t=i.id)?t:s,s&&(i.id=s),this.init(e)}getNativeCanvas(){return this._nativeCanvas}hide(){}show(){}applyPosition(){}resetStyle(e){}resize(e,t){}toDataURL(e,t){return""}readPixels(e,t,i,r){return this._context.getImageData(e,t,i,r)}convertToBlob(e){throw Error("")}transferToImageBitmap(){throw Error("")}release(...e){this.controled&&this._nativeCanvas.parentElement&&this._nativeCanvas.parentElement.removeChild(this._nativeCanvas)}}p5.env="browser";var p6=i(31982);class p8{static GetCanvas(){try{return p8.canvas||(p8.canvas=tU.global.createCanvas({})),p8.canvas}catch(e){return null}}static GetCtx(){if(!p8.ctx){let e=p8.GetCanvas();p8.ctx=e.getContext("2d")}return p8.ctx}}class p7 extends p6.L{static getInstance(){return p7._instance||(p7._instance=new p7),p7._instance}constructor(e=[],t=100){super(),this.cacheParams={CLEAN_THRESHOLD:100,L_TIME:1e3},this.dataMap=new Map;let i=p8.GetCanvas(),r=p8.GetCtx();if(i.width=t,i.height=1,!r)return;if(r.translate(0,0),!r)throw Error("ctx");let n=r.createLinearGradient(0,0,t,0);e.forEach(e=>{n.addColorStop(e[0],e[1])}),r.fillStyle=n,r.fillRect(0,0,t,1),this.rgbaSet=r.getImageData(0,0,t,1).data}getColor(e){let t=this.rgbaSet.slice(4*e,4*e+4);return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]/255})`}GetOrCreate(e,t,i,r,n=[],l=100){let o=`${e}${t}${i}${r}`;n.forEach(e=>o+=e.join()),o+=l;let a=this.dataMap.get(o);return a||(a={data:new p7(n,l),timestamp:[]},this.addLimitedTimestamp(a,Date.now(),{}),this.dataMap.set(o,a)),this.clearCache(this.dataMap,this.cacheParams),a.data}}class p9{static GetSize(e){for(let t=0;t<p9.ImageSize.length;t++)if(p9.ImageSize[t]>=e)return p9.ImageSize[t];return e}static Get(e,t,i,r,n,l,o){let a=p9.GenKey(e,t,i,r,n),s=p9.cache[a];if(!s||0===s.length)return null;for(let e=0;e<s.length;e++)if(s[e].width>=l&&s[e].height>=o)return s[e].pattern;return null}static Set(e,t,i,r,n,l,o,a){let s=p9.GenKey(e,t,i,r,n);p9.cache[s]?p9.cache[s].push({width:o,height:a,pattern:l}):p9.cache[s]=[{width:o,height:a,pattern:l}]}static GenKey(e,t,i,r,n){return`${t},${i},${r},${n},${e.join()}`}}p9.cache={},p9.ImageSize=[20,40,80,160,320,640,1280,2560];let ge=[0,0,0],gt=(e,t,i,r,n,l,o,a)=>{if(a)for(;i>t;)i-=t0.f7;else for(;i<t;)i+=t0.f7;let s=t0.pi/3*(i>t?1:-1),h=t,d=h;for(;d!==i;){let t=4*Math.tan(Math.abs((d=s>0?Math.min(d+s,i):Math.max(d+s,i))-h)/4)/3,a=d<h?-1:1,u=Math.cos(h),c=Math.sin(h),p=Math.cos(d),g=Math.sin(d),f=u*l+r,m=c*o+n,b=p*l+r,y=g*o+n,v=l*t*a,_=o*t*a;e.push([f-v*c,m+_*u,b+v*g,y-_*p,b,y]),h=d}},gi=class{set fillStyle(e){this.nativeContext.fillStyle=e}get fillStyle(){return this.nativeContext.fillStyle}set font(e){e!==this._font&&(this._font=e,this.nativeContext.font=e)}get font(){var e;return null!=(e=this._font)?e:this.nativeContext.font}set globalAlpha(e){this.nativeContext.globalAlpha=e*this.baseGlobalAlpha}get globalAlpha(){return this.nativeContext.globalAlpha}set lineCap(e){this.nativeContext.lineCap=e}get lineCap(){return this.nativeContext.lineCap}set lineDashOffset(e){this.nativeContext.lineDashOffset=e}get lineDashOffset(){return this.nativeContext.lineDashOffset}set lineJoin(e){this.nativeContext.lineJoin=e}get lineJoin(){return this.nativeContext.lineJoin}set lineWidth(e){this.nativeContext.lineWidth=e}get lineWidth(){return this.nativeContext.lineWidth}set miterLimit(e){this.nativeContext.miterLimit=e}get miterLimit(){return this.nativeContext.miterLimit}set shadowBlur(e){this.nativeContext.shadowBlur=e}get shadowBlur(){return this.nativeContext.shadowBlur}set shadowColor(e){this.nativeContext.shadowColor=e}get shadowColor(){return this.nativeContext.shadowColor}set shadowOffsetX(e){this.nativeContext.shadowOffsetX=e}get shadowOffsetX(){return this.nativeContext.shadowOffsetX}set shadowOffsetY(e){this.nativeContext.shadowOffsetY=e}get shadowOffsetY(){return this.nativeContext.shadowOffsetY}set strokeStyle(e){this.nativeContext.strokeStyle=e}get strokeStyle(){return this.nativeContext.strokeStyle}set textAlign(e){this.nativeContext.textAlign=e}get textAlign(){return this.nativeContext.textAlign}set textBaseline(e){this.nativeContext.textBaseline=e}get textBaseline(){return this.nativeContext.textBaseline}get inuse(){return!!this._inuse}set inuse(e){!!this._inuse!==e&&(this._inuse=e,e?(this.nativeContext.save(),this.reset()):(this.nativeContext.restore(),this._font=""))}constructor(e,t){this.fillAttributes=Object.assign(Object.assign({},ij),{opacity:1}),this.strokeAttributes=Object.assign(Object.assign({},iV),{opacity:1}),this.textAttributes=Object.assign(Object.assign({},iU),{opacity:1}),this._clearShadowStyle=!1,this._clearFilterStyle=!1,this._clearGlobalCompositeOperationStyle=!1;let i=e.nativeCanvas.getContext("2d");if(!i)throw Error("2d");this.nativeContext=i,this.canvas=e,this.matrix=new tQ.y(1,0,0,1,0,0),this.stack=[],this.dpr=t,this.applyedMatrix=new tQ.y(1,0,0,1,0,0),this._clearMatrix=new tQ.y(1,0,0,1,0,0),this.baseGlobalAlpha=1}reset(e=!0){this.stack.length&&t1.Y.getInstance().warn("bugmatrix"),this.matrix.setValue(1,0,0,1,0,0),this.applyedMatrix=new tQ.y(1,0,0,1,0,0),this.stack.length=0,e&&this.nativeContext.setTransform(1,0,0,1,0,0)}getCanvas(){return this.canvas}getContext(){return this.nativeContext}setTransformForCurrent(e=!1){!e&&this.applyedMatrix.equalToMatrix(this.matrix)||(this.applyedMatrix.setValue(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f),this.nativeContext.setTransform(this.matrix.a,this.matrix.b,this.matrix.c,this.matrix.d,this.matrix.e,this.matrix.f))}get currentMatrix(){return this.matrix}cloneMatrix(e){return l1.allocateByObj(e)}clear(){this.save(),this.resetTransform(),this.nativeContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.restore()}restore(){this.nativeContext.restore(),this.stack.length>0&&(l1.free(this.matrix),this.matrix=this.stack.pop(),this.setTransformForCurrent(!0)),this.font="",this._clearFilterStyle=!1,this._clearShadowStyle=!1}highPerformanceRestore(){this.stack.length>0&&(l1.free(this.matrix),this.matrix=this.stack.pop())}rotate(e,t=!0){this.matrix.rotate(e),t&&this.setTransformForCurrent()}save(){let e=this.cloneMatrix(this.matrix);this.stack.push(e),this.nativeContext.save()}highPerformanceSave(){let e=this.cloneMatrix(this.matrix);this.stack.push(e)}scale(e,t,i=!0){this.matrix.scale(e,t),i&&this.setTransformForCurrent()}setScale(e,t,i=!0){this.matrix.setScale(e,t),i&&this.setTransformForCurrent()}scalePoint(e,t,i,r,n=!0){this.translate(i,r,!1),this.scale(e,t,!1),this.translate(-i,-r,!1),n&&this.setTransformForCurrent()}setTransform(e,t,i,r,n,l,o=!0,a=this.dpr){this.matrix.setValue(a*e,a*t,a*i,a*r,a*n,a*l),o&&this.setTransformForCurrent()}setTransformFromMatrix(e,t=!0,i=this.dpr){this.matrix.setValue(e.a*i,e.b*i,e.c*i,e.d*i,e.e*i,e.f*i),t&&this.setTransformForCurrent()}resetTransform(e=!0,t=this.dpr){this.setTransform(t,0,0,t,0,0),e&&this.setTransformForCurrent()}transform(e,t,i,r,n,l,o=!0){this.matrix.multiply(e,t,i,r,n,l),o&&this.setTransformForCurrent()}transformFromMatrix(e,t){this.matrix.multiply(e.a,e.b,e.c,e.d,e.e,e.f),t&&this.setTransformForCurrent()}translate(e,t,i=!0){this.matrix.translate(e,t),i&&this.setTransformForCurrent()}rotateDegrees(e,t=!0){let i=e*Math.PI/180;this.rotate(i,t)}rotateAbout(e,t,i,r=!0){this.translate(t,i,!1),this.rotate(e,!1),this.translate(-t,-i,!1),r&&this.setTransformForCurrent()}rotateDegreesAbout(e,t,i,r=!0){this.translate(t,i,!1),this.rotateDegrees(e,!1),this.translate(-t,-i,!1),r&&this.setTransformForCurrent()}beginPath(){this.disableBeginPath||this.nativeContext.beginPath()}clip(e,t){e?"string"==typeof e?this.nativeContext.clip(e):this.nativeContext.clip(e,t):this.nativeContext.clip()}arc(e,t,i,r,n,l,o){if(o=o||0,this.camera){let a=[];gt(a,r,n,e,t,i,i,l);for(let e=0;e<a.length;++e){let t=a[e];this.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5],o)}}else this.nativeContext.arc(e,t,Math.max(0,i),r,n,l)}arcTo(e,t,i,r,n){this.nativeContext.arcTo(e,t,i,r,n)}bezierCurveTo(e,t,i,r,n,l,o){if(o=o||0,this.camera){let a=o,s=o;this.modelMatrix&&(lJ(ge,[e,t,o],this.modelMatrix),e=ge[0],t=ge[1],a=ge[2],lJ(ge,[i,r,o],this.modelMatrix),i=ge[0],r=ge[1],s=ge[2],lJ(ge,[n,l,o],this.modelMatrix),n=ge[0],l=ge[1],o=ge[2]);let h=this.camera.vp(n,l,o);n=h.x,l=h.y,e=(h=this.camera.vp(e,t,a)).x,t=h.y,i=(h=this.camera.vp(i,r,s)).x,r=h.y}this.nativeContext.bezierCurveTo(e,t,i,r,n,l)}closePath(){this.nativeContext.closePath()}ellipse(e,t,i,r,n,l,o,a){null==a?this.nativeContext.ellipse(e,t,i,r,n,l,o):this.nativeContext.ellipse(e,t,i,r,n,l,o,a)}lineTo(e,t,i){if(i=i||0,this.camera){this.modelMatrix&&(lJ(ge,[e,t,i],this.modelMatrix),e=ge[0],t=ge[1],i=ge[2]);let r=this.camera.vp(e,t,i);e=r.x,t=r.y}this.nativeContext.lineTo(e,t)}moveTo(e,t,i){if(i=i||0,this.camera){this.modelMatrix&&(lJ(ge,[e,t,i],this.modelMatrix),e=ge[0],t=ge[1],i=ge[2]);let r=this.camera.vp(e,t,i);e=r.x,t=r.y}this.nativeContext.moveTo(e,t)}quadraticCurveTo(e,t,i,r,n){if(n=n||0,this.camera){let l=n;this.modelMatrix&&(lJ(ge,[e,t,n],this.modelMatrix),e=ge[0],t=ge[1],l=ge[2],lJ(ge,[i,r,n],this.modelMatrix),i=ge[0],r=ge[1],n=ge[2]);let o=this.camera.vp(i,r,n);i=o.x,r=o.y,e=(o=this.camera.vp(e,t,l)).x,t=o.y}this.nativeContext.quadraticCurveTo(e,t,i,r)}rect(e,t,i,r,n){n=n||0,this.camera?(this.moveTo(e,t,n),this.lineTo(e+i,t,n),this.lineTo(e+i,t+r,n),this.lineTo(e,t+r,n),this.closePath()):this.nativeContext.rect(e,t,i,r)}createImageData(){let e=arguments;return 2===e.length?this.nativeContext.createImageData(e[0],e[1]):1===e.length?this.nativeContext.createImageData(e[0]):null}createLinearGradient(e,t,i,r){return isFinite(e+t+i+r)||(e=0,t=0,i=0,r=0),this.nativeContext.createLinearGradient(e,t,i,r)}createPattern(e,t){return 0===e.width||0===e.height?null:this.nativeContext.createPattern(e,t)}createRadialGradient(e,t,i,r,n,l){return this.nativeContext.createRadialGradient(e,t,i,r,n,l)}createConicGradient(e,t,i,r){if(this.nativeContext.createConicGradient&&.001>Math.abs(r-i-2*Math.PI))return this.nativeContext.createConicGradient(i,e,t);let n,l=!1,o=this;return{stops:[],addColorStop(e,t){this.stops.push([e,t]),l=!0},GetPattern(a,s,h){return l&&(h||(h=r-i),n=function(e,t,i,r,n,l,o,a,s){let h=Math.floor(180*n/Math.PI),d=p8.GetCanvas(),u=p8.GetCtx();if(!u)return null;let c=p9.GetSize(a),p=p9.GetSize(s),g=p9.Get(t,i,r,l,o,c,p);if(g)return g;let f=Math.sqrt(Math.max(Math.max(Math.pow(i,2)+Math.pow(r,2),Math.pow(c-i,2)+Math.pow(r,2)),Math.max(Math.pow(c-i,2)+Math.pow(p-r,2),Math.pow(i,2)+Math.pow(p-r,2)))),m=h+1,b=n/Math.max(1,m-1),y=p7.getInstance().GetOrCreate(i,r,c,p,t,m),v=2*Math.PI*f/360;d.width=c,d.height=p,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,c,p),u.translate(i,r),u.rotate(l);for(let e=0,t=m-1;e<t&&!(l+e*b>o);e++){let t=y.getColor(e);u.beginPath(),u.rotate(b),u.moveTo(0,0),u.lineTo(f,-2*v),u.lineTo(f,0),u.fillStyle=t,u.closePath(),u.fill()}let _=u.getImageData(0,0,c,p);return d.width=_.width,d.height=_.height,u.putImageData(_,0,0),(g=e.createPattern(d,"no-repeat"))&&p9.Set(t,i,r,l,o,g,c,p),g}(o,this.stops,e,t,h,i,r,a,s),l=!1),n}}}fill(e,t){this.disableFill||(e?this.nativeContext.fill(e):this.nativeContext.fill())}fillRect(e,t,i,r){this.nativeContext.fillRect(e,t,i,r)}clearRect(e,t,i,r){this.nativeContext.clearRect(e,t,i,r)}project(e,t,i){if(i=i||0,this.camera){this.modelMatrix&&(lJ(ge,[e,t,i],this.modelMatrix),e=ge[0],t=ge[1],i=ge[2]);let r=this.camera.vp(e,t,i);e=r.x,t=r.y}return{x:e,y:t}}view(e,t,i){return i=i||0,this.camera?(this.modelMatrix&&(lJ(ge,[e,t,i],this.modelMatrix),e=ge[0],t=ge[1],i=ge[2]),this.camera.view(e,t,i)):[e,t,i]}fillText(e,t,i,r){if(r=r||0,this.camera){this.modelMatrix&&(lJ(ge,[t,i,r],this.modelMatrix),t=ge[0],i=ge[1],r=ge[2]);let e=this.camera.vp(t,i,r);t=e.x,i=e.y}this.nativeContext.fillText(e,t,i)}getImageData(e,t,i,r){return this.nativeContext.getImageData(e,t,i,r)}getLineDash(){return this.nativeContext.getLineDash()}isPointInPath(e,t){return this.nativeContext.isPointInPath(e,t)}isPointInStroke(e,t){return this.nativeContext.isPointInStroke(e,t)}measureText(e,t=tU.global.measureTextMethod){var i,r;if(!t||"native"===t)return this.nativeContext.measureText(e);this.mathTextMeasure||(this.mathTextMeasure=tU.graphicUtil.createTextMeasureInstance({},{},()=>this.canvas.nativeCanvas));let n=null!=(i=this.fontFamily)?i:iU.fontFamily,l=null!=(r=this.fontSize)?r:iU.fontSize;return this.mathTextMeasure.textSpec.fontFamily===n&&this.mathTextMeasure.textSpec.fontSize===l||(this.mathTextMeasure.textSpec.fontFamily=n,this.mathTextMeasure.textSpec.fontSize=l,this.mathTextMeasure._numberCharSize=null,this.mathTextMeasure._fullCharSize=null,this.mathTextMeasure._letterCharSize=null,this.mathTextMeasure._specialCharSizeMap={}),this.mathTextMeasure.measure(e,t)}putImageData(e,t,i){this.nativeContext.putImageData(e,t,i)}setLineDash(e){let t=arguments,i=this.nativeContext;this.nativeContext.setLineDash?t[0]&&i.setLineDash(t[0]):"mozDash"in i?i.mozDash=t[0]:"webkitLineDash"in i&&(i.webkitLineDash=t[0])}stroke(e){this.disableStroke||(e?this.nativeContext.stroke(e):this.nativeContext.stroke())}strokeRect(e,t,i,r){this.nativeContext.strokeRect(e,t,i,r)}strokeText(e,t,i,r){if(r=r||0,this.camera){this.modelMatrix&&(lJ(ge,[t,i,r],this.modelMatrix),t=ge[0],i=ge[1],r=ge[2]);let e=this.camera.vp(t,i,r);t=e.x,i=e.y}this.nativeContext.strokeText(e,t,i)}drawImage(){let e=this.nativeContext,t=arguments;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}setCommonStyle(e,t,i,r,n){if(Array.isArray(n)){if(n.length<=1)return this._setCommonStyle(e,t,i,r,n[0]);let l=Object.create(n[0]);return n.forEach((e,t)=>{0!==t&&Object.assign(l,e)}),this._setCommonStyle(e,t,i,r,l)}return this._setCommonStyle(e,t,i,r,n)}_setCommonStyle(e,t,i,r,n){let l=this.nativeContext;n||(n=this.fillAttributes);let{fillOpacity:o=n.fillOpacity,opacity:a=n.opacity,fill:s=n.fill}=t;l.globalAlpha=o*a*this.baseGlobalAlpha,o>1e-12&&a>1e-12&&(l.fillStyle=ro(this,s,e,i,r))}setShadowBlendStyle(e,t,i){if(Array.isArray(i)){if(i.length<=1)return this._setShadowBlendStyle(e,i[0]);let r=Object.create(i[0]);return i.forEach((e,t)=>{0!==t&&Object.assign(r,e)}),this._setShadowBlendStyle(e,t,r)}return this._setShadowBlendStyle(e,t,i)}_setShadowBlendStyle(e,t,i){let r=this.nativeContext;i||(i=this.fillAttributes);let{opacity:n=i.opacity,shadowBlur:l=i.shadowBlur,shadowOffsetX:o=i.shadowOffsetX,shadowOffsetY:a=i.shadowOffsetY,blur:s=i.blur,globalCompositeOperation:h=i.globalCompositeOperation}=t;if(!(n<=1e-12)){if(o||a||l){let{shadowColor:e=i.shadowColor,shadowOffsetX:n=i.shadowOffsetX,shadowOffsetY:o=i.shadowOffsetY}=t;r.shadowBlur=l*this.dpr,r.shadowColor=e,r.shadowOffsetX=n*this.dpr,r.shadowOffsetY=o*this.dpr,this._clearShadowStyle=!0}else this._clearShadowStyle&&(r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0);s?(r.filter=`blur(${s}px)`,this._clearFilterStyle=!0):this._clearFilterStyle&&(r.filter="blur(0px)",this._clearFilterStyle=!1),h?(r.globalCompositeOperation=h,this._clearGlobalCompositeOperationStyle=!0):this._clearGlobalCompositeOperationStyle&&(r.globalCompositeOperation="source-over",this._clearGlobalCompositeOperationStyle=!1)}}setStrokeStyle(e,t,i,r,n){if(Array.isArray(n)){if(n.length<=1)return this._setStrokeStyle(e,t,i,r,n[0]);let l=Object.create(n[0]);return n.forEach((e,t)=>{0!==t&&Object.assign(l,e)}),this._setStrokeStyle(e,t,i,r,l)}return this._setStrokeStyle(e,t,i,r,n)}_setStrokeStyle(e,t,i,r,n){let l=this.nativeContext;n||(n=this.strokeAttributes);let{strokeOpacity:o=n.strokeOpacity,opacity:a=n.opacity}=t;if(l.globalAlpha=o*a*this.baseGlobalAlpha,o>1e-12&&a>1e-12){let{lineWidth:o=n.lineWidth,stroke:a=n.stroke,lineJoin:s=n.lineJoin,lineDash:h=n.lineDash,lineDashOffset:d=n.lineDashOffset,lineCap:u=n.lineCap,miterLimit:c=n.miterLimit,keepStrokeScale:p=n.keepStrokeScale}=t;l.lineWidth=p?o:rl(this,o,this.dpr),l.strokeStyle=ro(this,a,e,i,r),l.lineJoin=s,h&&(l.setLineDash(h),l.lineDashOffset=d),l.lineCap=u,l.miterLimit=c}}setTextStyleWithoutAlignBaseline(e,t,i){let r=this.nativeContext;t||(t=this.textAttributes);let{scaleIn3d:n=t.scaleIn3d}=e;e.font?this.font=e.font:this.font=(0,dU.U)(e,t,n&&this.camera&&this.camera.getProjectionScale(i));let{fontFamily:l=t.fontFamily,fontSize:o=t.fontSize}=e;this.fontFamily=l,this.fontSize=o,r.textAlign="left",r.textBaseline="alphabetic"}setTextStyle(e,t,i){var r,n;let l=this.nativeContext;t||(t=this.textAttributes),e.font?this.font=e.font:this.font=(0,dU.U)(e,t,this.camera&&this.camera.getProjectionScale(i));let{fontFamily:o=t.fontFamily,fontSize:a=t.fontSize}=e;this.fontFamily=o,this.fontSize=a,l.textAlign=null!=(r=e.textAlign)?r:t.textAlign,l.textBaseline=null!=(n=e.textBaseline)?n:t.textBaseline}draw(){}clearMatrix(e=!0,t=this.dpr){this.setTransformFromMatrix(this._clearMatrix,e,t)}setClearMatrix(e,t,i,r,n,l){this._clearMatrix.setValue(e,t,i,r,n,l)}onlyTranslate(e=this.dpr){return this.matrix.a===e&&0===this.matrix.b&&0===this.matrix.c&&this.matrix.d===e}release(...e){this.stack.forEach(e=>l1.free(e)),this.stack.length=0}};gi.env="browser",gi=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Number])],gi);let gr=class extends p5{constructor(e){super(e)}init(e){let{container:t}=e;if("string"==typeof t){let e=tU.global.getElementById(t);e&&(this._container=e)}else this._container=t;this._context=new gi(this,this._dpr),this.initStyle()}initStyle(){if(!this.controled)return;let{nativeCanvas:e}=this;e.width=this._pixelWidth,e.height=this._pixelHeight,e.style&&this.setCanvasStyle(e,this._x,this._y,this._displayWidth,this._displayHeight),this._container&&this._container.appendChild(e),this.visiable||this.hide()}hide(){this._nativeCanvas&&(this._nativeCanvas.style.display="none")}show(){this._nativeCanvas&&(this._nativeCanvas.style.display="block")}applyPosition(){let e=this._nativeCanvas;e.style.position="absolute",e.style.top=`${this._y}px`,e.style.left=`${this._x}px`}resetStyle(e){if(!this.controled)return;let{width:t=this._displayWidth,height:i=this._displayHeight,dpr:r=this._dpr,x:n=this._x,y:l=this._y}=e,{nativeCanvas:o}=this;o.width=t*r,o.height=i*r,o.style&&this.setCanvasStyle(o,n,l,t,i),e.id&&(o.id=e.id),this.visiable||this.hide()}setCanvasStyle(e,t,i,r,n){this.controled&&(e.style.width=`${r}px`,e.style.height=`${n}px`)}toDataURL(e,t){return"image/jpeg"===e?this._nativeCanvas.toDataURL(e,t):"image/png"===e?this._nativeCanvas.toDataURL(e):this._nativeCanvas.toDataURL(e,t)}resize(e,t){this.controled&&(this._pixelWidth=e*this._dpr,this._pixelHeight=t*this._dpr,this._displayWidth=e,this._displayHeight=t,this._nativeCanvas.style&&(this._nativeCanvas.style.width=`${e}px`,this._nativeCanvas.style.height=`${t}px`),this._nativeCanvas.width=this._pixelWidth,this._nativeCanvas.height=this._pixelHeight,this._context.dpr=this._dpr)}};function gn(e,t){return new tb(i=>{i(rC).toDynamicValue(()=>t=>new e(t)).whenTargetNamed(e.env),i(rx).toDynamicValue(()=>(e,i)=>new t(e,i)).whenTargetNamed(t.env)})}gr.env="browser";let gl=gn(gr=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],gr),gi);var go=function(e,t){return function(i,r){t(i,r,e)}};let ga=class{constructor(e,t){this.pickItemInterceptorContributions=e,this.pickServiceInterceptorContributions=t,this.type="default",this.global=tU.global}reInit(){this._init()}_init(){this.InterceptorContributions=this.pickItemInterceptorContributions.getContributions().sort((e,t)=>e.order-t.order),this.pickerServiceInterceptorContributions=this.pickServiceInterceptorContributions.getContributions().sort((e,t)=>e.order-t.order)}pick(e,t,i){let r,n={graphic:null,group:null};i.pickerService=this;let l=i.bounds.width(),o=i.bounds.height();if(!(new t4.FB).setValue(0,0,l,o).containsPoint(t))return n;this.pickContext&&(this.pickContext.inuse=!0),i.pickContext=this.pickContext,this.pickContext&&this.pickContext.clearMatrix(!0,1);let a=new tQ.y(1,0,0,1,0,0);for(let l=e.length-1;l>=0&&!(n=e[l].isContainer?this.pickGroup(e[l],t,a,i):this.pickItem(e[l],t,a,i)).graphic;l--)r||(r=n.group);if(n.graphic||(n.group=r),this.pickContext&&(this.pickContext.inuse=!1),this.pickerServiceInterceptorContributions.length)for(let e=0;e<this.pickerServiceInterceptorContributions.length;e++){let r=this.pickerServiceInterceptorContributions[e];r.afterPickItem&&(n=r.afterPickItem(n,this,t,i,{parentMatrix:a}))}return n}containsPoint(e,t,i){var r;return!!(null==(r=this.pickItem(e,t,null,null!=i?i:{pickContext:this.pickContext,pickerService:this}))?void 0:r.graphic)}pickGroup(e,t,i,r){let n={group:null,graphic:null};if(!1===e.attribute.visibleAll)return n;let l=r.pickContext,o=l.modelMatrix;if(l.camera){let t=e.transMatrix,i=l2.allocate();(lY(i,t),o)?i&&(l.modelMatrix=lq(l2.allocate(),o,i),l2.free(i)):(lY(i,e.globalTransMatrix),l.modelMatrix=i)}if(this.InterceptorContributions.length)for(let n=0;n<this.InterceptorContributions.length;n++){let a=this.InterceptorContributions[n];if(a.beforePickItem){let n=a.beforePickItem(e,this,t,r,{parentMatrix:i});if(n)return l.modelMatrix!==o&&l2.free(l.modelMatrix),l.modelMatrix=o,n}}let a=e.transMatrix,s=l1.allocateByObj(i),h=new il.E9(t.x,t.y);s.transformPoint(h,h);let d=e.AABBBounds.containsPoint(h);if(!d&&!e.stage.camera)return n;let u=this.pickItem(e,h.clone(),i,r);u&&u.graphic&&(n.graphic=u.graphic,n.params=u.params);let c=!1!==e.attribute.pickable&&d;return s.multiply(a.a,a.b,a.c,a.d,a.e,a.f),!1===e.attribute.childrenPickable||u&&u.graphic||ae(e,iY.zIndex,l=>{if(l.isContainer){let i=new il.E9(t.x,t.y),o=r4(e).group,{scrollX:a=o.scrollX,scrollY:h=o.scrollY}=e.attribute;i.x-=a,i.y-=h,n=this.pickGroup(l,i,s,r)}else{let o=new il.E9(t.x,t.y);s.transformPoint(o,o);let a=r4(e).group,{scrollX:h=a.scrollX,scrollY:d=a.scrollY}=e.attribute;o.x-=h,o.y-=d;let u=this.pickItem(l,o,i,r);u&&u.graphic&&(n.graphic=u.graphic,n.params=u.params)}return!!n.graphic||!!n.group},!0,!!l.camera),l.modelMatrix!==o&&l2.free(l.modelMatrix),l.modelMatrix=o,n.graphic||n.group||!c||e.stage.camera||(n.group=e),l1.free(s),n}selectPicker(e){return this.pickerMap.get(e.numberType)||null}};ga=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),go(0,tT(tE)),go(0,tR(oH)),go(1,tT(tE)),go(1,tR(oO)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object])],ga);var gs=function(e,t){return function(i,r){t(i,r,e)}};let gh=class extends ga{constructor(e,t,i,r){super(i,r),this.contributions=e,this.drawContribution=t,this.pickItemInterceptorContributions=i,this.pickServiceInterceptorContributions=r,this.global.hooks.onSetEnv.tap("canvas-picker-service",(e,t,i)=>{this.configure(i,t)}),this.configure(this.global,this.global.env),this.pickerMap=new Map,this.init()}init(){this.contributions.getContributions().forEach(e=>{this.pickerMap.set(e.numberType,e)}),super._init()}configure(e,t){this.pickCanvas=rZ.shareCanvas(),this.pickContext=this.pickCanvas.getContext("2d")}pickItem(e,t,i,r){if(!1===e.attribute.pickable)return null;if(this.InterceptorContributions.length)for(let n=0;n<this.InterceptorContributions.length;n++){let l=this.InterceptorContributions[n];if(l.beforePickItem){let n=l.beforePickItem(e,this,t,r,{parentMatrix:i});if(n)return n}}let n=this.pickerMap.get(e.numberType);if(!n)return null;let l=n.contains(e,t,r),o=l?e:null,a={graphic:o,params:l};if(o)return a;if(this.InterceptorContributions.length)for(let n=0;n<this.InterceptorContributions.length;n++){let l=this.InterceptorContributions[n];if(l.afterPickItem){let n=l.afterPickItem(e,this,t,r,{parentMatrix:i});if(n)return n}}return a}};gh=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),gs(0,tT(tE)),gs(0,tR(u_)),gs(1,tT(oP)),gs(2,tT(tE)),gs(2,tR(oH)),gs(3,tT(tE)),gs(3,tR(oO)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Object,Object,Object])],gh);let gd=class{constructor(){this.type="group",this.numberType=lL}contains(e,t,i){return!1}};gd=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],gd);let gu=new tb((e,t,i,r)=>{gu.__vloaded||(gu.__vloaded=!0,e(uv).to(gd).inSingletonScope(),e(u_).toService(uv),tB(e,u_))});gu.__vloaded=!1;let gc=new tb((e,t,i,r)=>{i(gh)||e(gh).toSelf().inSingletonScope(),i(oL)?r(oL).toService(gh):e(oL).toService(gh)}),gp=class{constructor(){this._uid=tm.GenAutoIncrementId(),this.viewBox=new t4.FB,this.modelMatrix=new tQ.y(1,0,0,1,0,0)}onChange(e){this._onChangeCb=e}configure(e,t){t.env===this.type&&e.setWindowHandler(this)}release(...e){this.releaseWindow()}isVisible(e){return!0}onVisibleChange(e){}getTopLeft(e){return{top:0,left:0}}setViewBox(e){this.viewBox.setValue(e.x1,e.y1,e.x2,e.y2)}getViewBox(){return this.viewBox}setViewBoxTransform(e,t,i,r,n,l){this.modelMatrix.setValue(e,t,i,r,n,l)}getViewBoxTransform(){return this.modelMatrix}};gp=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],gp);let gg=el=class extends gp{get container(){return this.canvas.nativeCanvas.parentElement}static GenerateCanvasId(){return`${el.idprefix}_${el.prefix_count++}`}constructor(){super(),this.type="browser",this._canvasIsIntersecting=!0,this.global=tU.global,this.viewBox=new t4.FB,this.modelMatrix=new tQ.y(1,0,0,1,0,0)}getTitle(){return this.canvas.id&&this.canvas.id.toString()}getWH(){return{width:this.canvas.width/(this.canvas.dpr||1),height:this.canvas.height/(this.canvas.dpr||1)}}getXY(){return this.canvas.nativeCanvas.getBoundingClientRect()}createWindow(e){e.canvas?this.createWindowByCanvas(e):this.createWindowByConfig(e),this.postInit()}postInit(){if(this.global.optimizeVisible)try{this.observerCanvas()}catch(e){console.error("IntersectionObserver")}}isElementVisible(e){let t=e.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight;return!(t.right<0||t.bottom<0||t.left>i||t.top>r)}observerCanvas(){this._canvasIsIntersecting=this.isElementVisible(this.canvas.nativeCanvas);let e=new IntersectionObserver((e,t)=>{e.forEach(e=>{this._canvasIsIntersecting!==e.isIntersecting?(this._canvasIsIntersecting=e.isIntersecting,this._onVisibleChangeCb&&this._onVisibleChangeCb(e.isIntersecting)):this._canvasIsIntersecting=e.isIntersecting})});e&&e.observe(this.canvas.nativeCanvas)}createWindowByConfig(e){let t,i=this.global.createCanvas({width:e.width,height:e.height});if(!(t="string"==typeof e.container?this.global.getElementById(e.container):e.container?e.container:this.global.getRootElement()))throw Error("containerId");e.offscreen?t=null:t.appendChild(i);let r={width:e.width,height:e.height,dpr:e.dpr,nativeCanvas:i,container:t,id:el.GenerateCanvasId(),canvasControled:!0};this.canvas=new gr(r)}createWindowByCanvas(e){var t;let i;if("string"==typeof e.canvas){if(!(i=this.global.getElementById(e.canvas)))throw Error("canvasId canvasdom")}else i=e.canvas;if(!i)throw Error("canvas");let r=e.width,n=e.height;if(null==r||null==n||!e.canvasControled){let e=i.getBoundingClientRect();r=e.width,n=e.height}let l=e.dpr;null==l&&(l=null!=(t=i.getContext("2d").pixelRatio)?t:i.width/r),this.canvas=new gr({width:r,height:n,dpr:l,nativeCanvas:i,canvasControled:e.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(e,t){this.canvas.resize(e,t)}setDpr(e){this.canvas.dpr=e}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}addEventListener(e,t,i){return this.canvas.nativeCanvas.addEventListener(e,t,i)}removeEventListener(e,t,i){return this.canvas.nativeCanvas.removeEventListener(e,t,i)}dispatchEvent(e){return this.canvas.nativeCanvas.dispatchEvent(e)}getStyle(){var e;return null!=(e=this.canvas.nativeCanvas.style)?e:{}}setStyle(e){this.canvas.nativeCanvas.style=e}getBoundingClientRect(){let e=this.canvas.nativeCanvas,t=this.getWH();return e.parentElement?this.canvas.nativeCanvas.getBoundingClientRect():{x:0,y:0,width:t.width,height:t.height,left:0,top:0,right:0,bottom:0}}clearViewBox(e){let t=this.viewBox,i=this.getContext(),r=this.getDpr();i.nativeContext.save(),i.nativeContext.setTransform(r,0,0,r,0,0),i.clearRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1),e&&(i.fillStyle=e,i.fillRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1)),i.nativeContext.restore()}isVisible(e){return this._canvasIsIntersecting}onVisibleChange(e){this._onVisibleChangeCb=e}getTopLeft(e){return this.global.getElementTopLeft(this.canvas.nativeCanvas,e)}};gg.env="browser",gg.idprefix="visactor_window",gg.prefix_count=0,gg=el=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],gg);let gf=new tb(e=>{e(gg).toSelf(),e(rj).toDynamicValue(e=>e.container.get(gg)).whenTargetNamed(gg.env)}),gm=class{configure(e,...t){e.env===this.type&&e.setActiveEnvContribution(this)}getNativeAABBBounds(e){return new t4.FB}removeDom(e){return!1}createDom(e){return null}updateDom(e,t){return!1}getDynamicCanvasCount(){return 999}getStaticCanvasCount(){return 999}getElementById(e){return document.getElementById(e)}getRootElement(){return document.body}loadJson(e){let t=fetch(e).then(e=>e.json());return t.then(e=>({data:e,state:"success"})).catch(()=>({data:null,state:"fail"})),t}loadArrayBuffer(e){return fetch(e).then(e=>e.arrayBuffer()).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadBlob(e){return fetch(e).then(e=>e.blob()).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}getElementTop(e,t){return 0}getElementLeft(e,t){return 0}getElementTopLeft(e,t){return{top:0,left:0}}loadFont(e,t,i){var r,n,l,o;return r=this,n=void 0,o=function*(){return{loadState:"fail"}},new(l=void 0,l=Promise)(function(e,t){function i(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):((r=t.value)instanceof l?r:new l(function(e){e(r)})).then(i,a)}s((o=o.apply(r,n||[])).next())})}isMacOS(){return!1}copyToClipBoard(e){return Promise.resolve(null)}};gm=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],gm);class gb{get x1(){return this.dom.getBoundingClientRect().left}get x2(){return this.dom.getBoundingClientRect().right}get y1(){return this.dom.getBoundingClientRect().top}get y2(){return this.dom.getBoundingClientRect().bottom}get width(){return this.dom.getBoundingClientRect().width}get height(){return this.dom.getBoundingClientRect().height}constructor(e){this.dom=e}}function gy(e,t=!1){let i=document.createElement("img");if(tU.global.isImageAnonymous&&(i.crossOrigin="anonymous"),t){let t=new Blob([e],{type:"image/svg+xml"});e=window.URL.createObjectURL(t)}return(i.src=e,i.complete)?Promise.resolve(i):new Promise((e,t)=>{i.onload=()=>{e(i)},i.onerror=()=>{t(Error(""))}})}let gv=class extends gm{constructor(){super(),this.type="browser",this.supportEvent=!0;try{this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.supportsMouseEvents=!!globalThis.MouseEvent}catch(e){this.supportsTouchEvents=!1,this.supportsPointerEvents=!1,this.supportsPointerEvents=!1}this.applyStyles=!0}mapToCanvasPoint(e,t){var i,r;let n=0,l=0,o=0,a=0;if(e.changedTouches){let t=null!=(i=e.changedTouches[0])?i:{};n=t.clientX||0,l=t.clientY||0,o=n,a=l}else n=e.clientX||0,l=e.clientY||0,o=e.offsetX||0,a=e.offsetY||0;if(t){let e,i,o=n,a=l,s=t.getBoundingClientRect(),h=null==(r=t.getNativeHandler)?void 0:r.call(t).nativeCanvas;return h&&(e=s.width/h.offsetWidth,i=s.height/h.offsetHeight),{x:(o-s.left)/((0,sD.Z)(e)?e:1),y:(a-s.top)/((0,sD.Z)(i)?i:1)}}return{x:o,y:a}}getNativeAABBBounds(e){let t=e;return("string"==typeof e&&(t=(new DOMParser).parseFromString(e,"text/html").firstChild).lastChild&&(t=t.lastChild.firstChild),t.getBoundingClientRect)?new gb(t.getBoundingClientRect()):new t4.FB}removeDom(e){return e.parentElement.removeChild(e),!0}updateDom(e,t){let{width:i,height:r,style:n}=t;return n&&((0,r6.Z)(n)?e.setAttribute("style",n):Object.keys(n).forEach(t=>{e.style[t]=n[t]})),null!=i&&(e.style.width=`${i}px`),null!=r&&(e.style.height=`${r}px`),!0}createDom(e){let{tagName:t="div",parent:i}=e,r=document.createElement(t);if(this.updateDom(r,e),i){let e=(0,r6.Z)(i)?this.getElementById(i):i;e&&e.appendChild&&e.appendChild(r)}return r}loadImage(e){return gy(e,!1).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadSvg(e){return gy(e,!0).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}createCanvas(e){var t,i;let r=document.createElement("canvas");e.id&&(r.id=null!=(t=e.id)?t:tm.GenAutoIncrementId().toString());let n=null!=(i=e.dpr)?i:window.devicePixelRatio;return e.width&&e.height&&(r.style.width=`${e.width}px`,r.style.height=`${e.height}px`,r.width=e.width*n,r.height=e.height*n),r}createOffscreenCanvas(e){var t;let i=null!=(t=e.dpr)?t:window.devicePixelRatio;return new OffscreenCanvas(e.width*i,e.height*i)}releaseCanvas(e){let t;(t="string"==typeof e?document.getElementById(e):e)&&t.parentElement&&t.parentElement.removeChild(t)}getDevicePixelRatio(){return window.devicePixelRatio}getRequestAnimationFrame(){return window.requestAnimationFrame}getCancelAnimationFrame(){return window.cancelAnimationFrame}addEventListener(e,t,i){return document.addEventListener(e,t,i)}removeEventListener(e,t,i){return document.removeEventListener(e,t,i)}dispatchEvent(e){return document.dispatchEvent(e)}getElementById(e){return document.getElementById(e)}getRootElement(){return document.body}getDocument(){return document}release(...e){}getElementTop(e,t){let i=e.offsetTop,r=e.offsetParent;for(;null!==r;)i+=r.offsetTop,r=r.offsetParent;return i}getElementLeft(e,t){let i=e.offsetLeft,r=e.offsetParent;for(;null!==r;)i+=r.offsetLeft,r=r.offsetParent;return i}getElementTopLeft(e,t){let i=e.offsetTop,r=e.offsetLeft,n=e.offsetParent;for(;null!==n;)i+=n.offsetTop,r+=n.offsetLeft,n=n.offsetParent;return{top:i,left:r}}loadFont(e,t,i){var r,n,l,o;return r=this,n=void 0,l=void 0,o=function*(){return new FontFace(e,(0,r6.Z)(t)?`url(${t})`:t,i).load().then(function(e){return document.fonts.add(e),{loadState:"success"}}).catch(function(e){return console.error("Failed to load font:",e),{loadState:"fail"}})},new(l||(l=Promise))(function(e,t){function i(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):((r=t.value)instanceof l?r:new l(function(e){e(r)})).then(i,a)}s((o=o.apply(r,n||[])).next())})}isMacOS(){if(void 0===this._isMacOS)try{this._isMacOS=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch(e){this._isMacOS=!1}return this._isMacOS}copyToClipBoard(e){return navigator.clipboard.writeText(e).then(()=>{}).catch(e=>{})}};gv=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],gv);let g_=new tb(e=>{g_.isBrowserBound||(g_.isBrowserBound=!0,e(gv).toSelf().inSingletonScope(),e(tH).toService(gv))});function gC(e,t=!0){gC.__loaded||(gC.__loaded=!0,e.load(g_),e.load(gl),e.load(gf),t&&(e.load(gu),e.load(gc)))}g_.isBrowserBound=!1,gC.__loaded=!1;let gx=class extends gi{constructor(e,t){super(e,t);let i=e.nativeCanvas.getContext("2d");if(!i)throw Error("2d");this.nativeContext=i,this.canvas=e,this.matrix=new tQ.y(1,0,0,1,0,0),this.stack=[],this.dpr=null!=t?t:1}release(...e){}};gx.env="node",gx=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object,Number])],gx);let gw=class extends p5{constructor(e){super(e)}init(){this._context=new gx(this,this._dpr),this.nativeCanvas.width=this._pixelWidth,this.nativeCanvas.height=this._pixelHeight}release(...e){this._nativeCanvas.release&&(0,nr.Z)(this._nativeCanvas.release)&&this._nativeCanvas.release()}};gw.env="node";let gS=gn(gw=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],gw),gx),gA=class extends gp{get container(){return null}constructor(e){super(),this.global=e,this.type="node"}getTitle(){return""}getWH(){return{width:this.canvas.displayWidth,height:this.canvas.displayHeight}}getXY(){return{x:0,y:0}}createWindow(e){e.canvas?this.createWindowByCanvas(e):this.createWindowByConfig(e)}createWindowByConfig(e){let t=this.global.createCanvas({width:e.width,height:e.height}),i={width:e.width,height:e.height,dpr:e.dpr,nativeCanvas:t,id:tm.GenAutoIncrementId().toString(),canvasControled:!0};this.canvas=new gw(i)}createWindowByCanvas(e){var t;let i=e.canvas,r=null!=(t=e.dpr)?t:1,n=e.width,l=e.height;null!=n&&null!=l&&e.canvasControled||(n=i.width/r,l=i.height/r),this.canvas=new gw({width:n,height:l,dpr:r,nativeCanvas:i,canvasControled:e.canvasControled})}releaseWindow(){this.canvas.release()}resizeWindow(e,t){this.canvas.resize(e,t)}setDpr(e){this.canvas.dpr=e}getContext(){return this.canvas.getContext()}getNativeHandler(){return this.canvas}getDpr(){return this.canvas.dpr}getImageBuffer(e="image/png"){return this.canvas.nativeCanvas.toBuffer(e)}addEventListener(e,t,i){}dispatchEvent(e){return!0}removeEventListener(e,t,i){}getStyle(){}setStyle(e){}getBoundingClientRect(){return null}clearViewBox(e){}};gA.env="node",gA=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(eo=tT(tO),function(e,t){eo(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],gA);let gk=new tb(e=>{e(gA).toSelf(),e(rj).toDynamicValue(e=>e.container.get(gA)).whenTargetNamed(gA.env)}),gM=class extends gm{constructor(){super(...arguments),this.type="node",this._lastTime=0,this.supportEvent=!1}configure(e,t){e.env===this.type&&(e.setActiveEnvContribution(this),this.pkg=t)}getDynamicCanvasCount(){return 0}getStaticCanvasCount(){return 999}loadJson(e){let t=fetch(e).then(e=>e.json());return t.then(e=>({data:e,state:"success"})).catch(()=>({data:null,state:"fail"})),t}loadArrayBuffer(e){return fetch(e).then(e=>e.arrayBuffer()).then(e=>({data:e,loadState:"success"})).catch(()=>({data:null,loadState:"fail"}))}loadImage(e){let{loadImage:t}=this.pkg;return t?t(e).then(e=>({loadState:e?"success":"fail",data:e})).catch(()=>({loadState:"fail",data:null})):Promise.reject(Error("node-canvas loadImage could not be found!"))}loadSvg(e){let t=this.pkg.Resvg;if(!t)return Promise.reject(Error("@resvg/resvg-js svgParser could not be found!"));let i=new t(e).render().asPng();return this.loadImage(i)}createCanvas(e){return this.pkg.createCanvas(e.width,e.height)}releaseCanvas(e){}getDevicePixelRatio(){return 1}getRequestAnimationFrame(){return function(e){return n_.call(e)}}getCancelAnimationFrame(){return e=>{n_.clear(e)}}addEventListener(e,t,i){}removeEventListener(e,t,i){}getElementById(e){return null}getRootElement(){return null}dispatchEvent(e){}release(...e){}createOffscreenCanvas(e){}};gM=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],gM);let gT=new tb(e=>{gT.isNodeBound||(gT.isNodeBound=!0,e(gM).toSelf().inSingletonScope(),e(tH).toService(gM))});function gR(e,t=!0){gR.__loaded||(gR.__loaded=!0,e.load(gT),e.load(gS),e.load(gk))}gT.isNodeBound=!1,gR.__loaded=!1;let gE=()=>{gC(tG)},gP=()=>{gR(tG)},gB=["animationThreshold","colorScheme","name","padding"],gI={name:"dark",colorScheme:{default:{dataScheme:hm,palette:{backgroundColor:"#202226",borderColor:"#404349",shadowColor:"rgba(0,0,0,0.1)",hoverBackgroundColor:"#404349",sliderRailColor:"#404349",sliderHandleColor:"#202226",sliderTrackColor:"#4284FF",popupBackgroundColor:"#404349",primaryFontColor:"#fdfdfd",secondaryFontColor:"#bbbdc3",tertiaryFontColor:"#888c93",axisLabelFontColor:"#888c93",disableFontColor:"#55595f",axisMarkerFontColor:"#202226",axisGridColor:"#404349",axisDomainColor:"#4b4f54",dataZoomHandleStrokeColor:"#bbbdc3",dataZoomChartColor:"#55595F",playerControllerColor:"#4284FF",scrollBarSliderColor:"rgba(255,255,255,0.3)",axisMarkerBackgroundColor:"#fdfdfd",markLabelBackgroundColor:"#404349",markLineStrokeColor:"#bbbdc3",dangerColor:"#eb4b4b",warningColor:"#f0bd30",successColor:"#14b267",infoColor:"#4284ff",discreteLegendPagerTextColor:"#BBBDC3",discreteLegendPagerHandlerColor:"#BBBDC3",discreteLegendPagerHandlerDisableColor:"#55595F",emptyCircleColor:"#bbbdc3",linearProgressTrackColor:"#404349"}}},component:{dataZoom:{selectedBackground:{style:{fillOpacity:.4,outerBorder:{strokeOpacity:.4}}}}}};class gL{constructor(){this.id=sO(),this._plugins=[]}add(e){if(!e||0===e.length)return null;let t=[];return e.forEach(e=>{this._plugins.find(t=>t.id===e.id)?s1("plugin"):(this._plugins.push(e),t.push(e),e.onAdd&&e.onAdd(this))}),t}load(e){let t=this.add(e);t&&t.length&&this.activate(e)}activate(e){e.length&&e.forEach(e=>{e.init&&e.init()})}get(e){return this._plugins.find(t=>t.id===e)}getAll(){return this._plugins.slice()}release(e){let t=this.get(e);t&&(t.release(this),this._plugins=this._plugins.filter(e=>e!==t))}releaseAll(){this._plugins.forEach(e=>{e.release(this)}),this._plugins=[]}clear(e){let t=this.get(e);t&&t.clear(this)}clearAll(){this._plugins.forEach(e=>{var t;null==(t=e.clear)||t.call(e,this)})}}class gF extends gL{constructor(e){super(),this.globalInstance=e}onInit(e){this._plugins.forEach(t=>{t.onInit&&t.onInit(this,e)})}onBeforeResize(e,t){this._plugins.forEach(i=>{i.onBeforeResize&&i.onBeforeResize(this,e,t)})}onAfterChartSpecTransform(e,t){this._plugins.forEach(i=>{i.onAfterChartSpecTransform&&i.onAfterChartSpecTransform(this,e,t)})}onAfterModelSpecTransform(e,t,i){this._plugins.forEach(r=>{r.onAfterModelSpecTransform&&r.onAfterModelSpecTransform(this,e,t,i)})}onBeforeInitChart(e,t){this._plugins.forEach(i=>{i.onBeforeInitChart&&i.onBeforeInitChart(this,e,t)})}onAfterInitChart(e,t){this._plugins.forEach(i=>{i.onAfterInitChart&&i.onAfterInitChart(this,e,t)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}var gH=i(12430);class gO{constructor(){this.transitions=new Map,this.registerDefaultTransitions()}static getInstance(){return gO.instance||(gO.instance=new gO),gO.instance}registerDefaultTransitions(){this.registerTransition("appear","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("appear","appear",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("appear","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("appear","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("normal","normal",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("normal","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("normal","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("exit","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","enter",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("exit","exit",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("enter","enter",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("enter","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("enter","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("disappear","*",()=>({allowTransition:!1,stopOriginalTransition:!1})),this.registerTransition("disappear","appear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("update","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("update","exit",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","*",()=>({allowTransition:!0,stopOriginalTransition:!1})),this.registerTransition("state","disappear",()=>({allowTransition:!0,stopOriginalTransition:!0})),this.registerTransition("state","exit",()=>({allowTransition:!0,stopOriginalTransition:!0}))}isTransitionAllowed(e,t,i){var r,n,l,o;let a=null==(r=this.transitions.get(e))?void 0:r.get(t);return a||(a=null==(n=this.transitions.get(e))?void 0:n.get("*"))||(a=null==(l=this.transitions.get("*"))?void 0:l.get(t))||(a=null==(o=this.transitions.get("*"))?void 0:o.get("*"))?a(i,e):{allowTransition:!0,stopOriginalTransition:!0}}registerTransition(e,t,i){let r=this.transitions.get(e);r||(r=new Map,this.transitions.set(e,r)),r.set(t,i)}}function gD(e){if(!e||!(0,nr.Z)(e))return 0;let t=Function.prototype.toString.call(e);if(/^class\s/.test(t))return 1;if(!e.prototype)return 2;if(e.prototype.constructor===e){let t=Object.getOwnPropertyDescriptor(e,"prototype");if(t&&!t.writable)return 1}return 2}gO.getInstance();class gz{static registerBuiltInAnimate(e,t){gz.builtInAnimateMap[e]=t}constructor(e){this._animates=[],this._startCallbacks=[],this._endCallbacks=[],this._started=!1,this._activeCount=0,this._target=e}get started(){return this._started}onStart(e){e?(this._startCallbacks.push(e),this._started&&this._activeCount>0&&e()):this._startCallbacks.forEach(e=>{e()})}onEnd(e){e?this._endCallbacks.push(e):this._endCallbacks.forEach(e=>{e()})}_trackAnimation(e){this._animates.push(e),this._activeCount++,1!==this._activeCount||this._started||(this._started=!0,this.onStart()),e.onEnd(()=>{this._activeCount--;let t=this._animates.indexOf(e);t>=0&&this._animates.splice(t,1),0===this._activeCount&&this._started&&(this._started=!1,this.onEnd())})}parseParams(e,t,i){var r,n;let l=this.resolveValue(e.totalTime,i,void 0),o=this.resolveValue(e.startTime,i,0),a=Object.assign({},e);a.oneByOneDelay=0,a.startTime=o,a.totalTime=l;let s=this.resolveValue(e.oneByOne,i,!1);if(t){let e=a.timeSlices;(0,ri.Z)(e)||(a.timeSlices=[e]);let t=0;a.timeSlices=a.timeSlices.map(e=>{let r=this.resolveValue(e.delay,i,0),n=this.resolveValue(e.delayAfter,i,0),l=this.resolveValue(e.duration,i,300);return t+=r+l+n,Object.assign(Object.assign({},e),{delay:r,delayAfter:n,duration:l})});let r=0;s&&(r="number"==typeof s?s:s?t:0),a.oneByOneDelay=r;let n=1;if(l){let e=t+r*(this._target.count-2);n=l?l/e:1}a.timeSlices=a.timeSlices.map(e=>{let t=e.effects;return Array.isArray(t)||(t=[t]),Object.assign(Object.assign({},e),{delay:e.delay*n,delayAfter:e.delayAfter*n,duration:e.duration*n,effects:t.map(e=>{var t,i;let r=null!=(t=e.custom)?t:gz.builtInAnimateMap[null!=(i=e.type)?i:"fromTo"],n=gD(r);return Object.assign(Object.assign({},e),{custom:r,customType:n})})})}),a.oneByOneDelay=r*n,a.startTime=o*n}else{let t=this.resolveValue(e.delay,i,0),h=this.resolveValue(e.delayAfter,i,0),d=this.resolveValue(e.duration,i,300),u=0;s&&(u="number"==typeof s?s:s?t+h+d:0),a.oneByOneDelay=u,a.custom=null!=(r=e.custom)?r:gz.builtInAnimateMap[null!=(n=e.type)?n:"fromTo"];let c=gD(a.custom);a.customType=c;let p=t+h+d+u*(this._target.count-2),g=(0,sD.Z)(l)?l/p:1;a.delay=t*g,a.delayAfter=h*g,a.duration=d*g,a.oneByOneDelay=u*g,a.startTime=o}return a}execute(e){Array.isArray(e)?e.forEach(e=>this._execute(e)):this._execute(e)}_execute(e){let t;if(e.selfOnly)return this._executeItem(e,this._target,0,1);let i="timeSlices"in e;i&&e.partitioner&&(t=(null!=t?t:this._target.getChildren()).filter(t=>{var i,r;return e.partitioner(null==(r=null==(i=t.context)?void 0:i.data)?void 0:r[0],t,{})})),i&&e.sort&&(t=null!=t?t:this._target.getChildren()).sort((t,i)=>{var r,n,l,o;return e.sort(null==(n=null==(r=t.context)?void 0:r.data)?void 0:n[0],null==(o=null==(l=i.context)?void 0:l.data)?void 0:o[0],t,i,{})});let r=i?(t,r,n)=>{let l=this.parseParams(e,i,t),o=this.executeTimelineItem(l,t,r,n);o&&this._trackAnimation(o)}:(t,r,n)=>{let l=this.parseParams(e,i,t),o=this.executeTypeConfigItem(l,t,r,n);o&&this._trackAnimation(o)};t?t.forEach((e,i)=>r(e,i,t.length)):this._target.count<=1?r(this._target,0,1):this._target.forEachChildren((e,t)=>r(e,t,this._target.count-1))}executeTypeConfigItem(e,t,i,r){var n,l,o,a,s,h,d,u;let{type:c="fromTo",channel:p,customParameters:g,easing:f="linear",delay:m=0,delayAfter:b=0,duration:y=300,startTime:v=0,oneByOneDelay:_=0,loop:C,bounce:x,priority:w=0,options:S,custom:A,customType:k,controlOptions:M}=e,T=t.animate();T.priority=w;let R=(0,nr.Z)(m)?m(null==(l=null==(n=t.context)?void 0:n.data)?void 0:l[0],t,{}):m,E=null==(a=null==(o=t.context)?void 0:o.data)?void 0:a[0],P=null==(s=t.context)?void 0:s.indexKey;E&&P&&(i=null!=(h=E[P])?h:i),T.startAt(v);let B=i*_+R;B>0&&T.wait(B);let I=null,L=e.to,F=e.from;L||(I||(I=this.createPropsFromChannel(p,t)),L=I.props),F||(I||(I=this.createPropsFromChannel(p,t)),F=I.from),this._handleRunAnimate(T,A,k,F,L,y,f,g,M,S,c,t);let H=0;_&&(H=_*(r-i-1));let O=(0,nr.Z)(b)?b(null==(u=null==(d=t.context)?void 0:d.data)?void 0:u[0],t,{}):b;return O>0&&(H+=O),H>0&&T.wait(H),C&&C>0&&T.loop(C),x&&T.bounce(!0),T}_handleRunAnimate(e,t,i,r,n,l,o,a,s,h,d,u){var c,p,g,f,m,b,y,v;if(t&&i){i=gD(t);let d=this.resolveValue(a,u);"function"==typeof d&&(d=d(null==(p=null==(c=u.context)?void 0:c.data)?void 0:p[0],u,{})),d=Object.assign({width:(null==(g=u.stage)?void 0:g.width)||0,height:(null==(f=u.stage)?void 0:f.height)||0,group:this._target.parent},d);let _=(0,nr.Z)(h)?h.call(null,null!=(b=d&&(null==(m=d.data)?void 0:m[0]))?b:null==(v=null==(y=u.context)?void 0:y.data)?void 0:v[0],u,d):h;d.options=_,d.controlOptions=s,1===i?this.createCustomAnimation(e,t,r,n,l,o,d):2===i&&this.createCustomInterpolatorAnimation(e,t,n,l,o,d)}else"to"===d?e.to(n,l,o):"from"===d&&e.from(n,l,o)}executeTimelineItem(e,t,i,r){var n,l,o,a;let{timeSlices:s,startTime:h=0,loop:d,bounce:u,oneByOneDelay:c,priority:p,controlOptions:g}=e,f=null==(l=null==(n=t.context)?void 0:n.data)?void 0:l[0],m=null==(o=t.context)?void 0:o.indexKey;f&&m&&(i=null!=(a=f[m])?a:i);let b=t.animate();return b.priority=p,b.startAt(h),b.wait(i*c),d&&d>0&&b.loop(d),u&&b.bounce(!0),(Array.isArray(s)?s:[s]).forEach(e=>{this.applyTimeSliceToAnimate(e,b,t,g)}),c&&b.wait(c*(r-i-1)),b}applyTimeSliceToAnimate(e,t,i,r){var n,l,o,a;let{effects:s,duration:h=300,delay:d=0,delayAfter:u=0}=e,c=(0,nr.Z)(d)?d(null==(l=null==(n=i.context)?void 0:n.data)?void 0:l[0],i,{}):d,p=(0,nr.Z)(u)?u(null==(a=null==(o=i.context)?void 0:o.data)?void 0:a[0],i,{}):u;c>0&&t.wait(c),(Array.isArray(s)?s:[s]).forEach(e=>{var n;let{type:l="fromTo",channel:o,customParameters:a,easing:s="linear",options:d}=e,u=null,c=e.to,p=e.from;c||(u||(u=this.createPropsFromChannel(o,i)),c=u.props),p||(u||(u=this.createPropsFromChannel(o,i)),p=u.from);let g=null!=(n=e.custom)?n:gz.builtInAnimateMap[l],f=e.custom?e.customType:gD(g);this._handleRunAnimate(t,g,f,p,c,h,s,a,r,d,l,i)}),p>0&&t.wait(p)}createCustomInterpolatorAnimation(e,t,i,r,n,l){let o={};Object.keys(i).forEach(t=>{o[t]=e.target.getComputedAttribute(t)}),e.interpolateUpdateFunction=(i,r,n,o,a)=>{t(n,i,r,o,a,e.target,l)},e.to(i,r,n)}createCustomAnimation(e,t,i,r,n,l,o){let a=new t(i,r,n,l,o);e.play(a)}createPropsFromChannel(e,t){let i={},r=null;return e&&(Array.isArray(e)?e.forEach(e=>{var r,n;let l=null==(n=null==(r=t.context)?void 0:r.diffAttrs)?void 0:n[e];void 0!==l&&(i[e]=l)}):Object.keys(e).forEach(n=>{var l,o,a,s;let h=e[n];void 0!==h.to&&("function"==typeof h.to?i[n]=h.to(null==(o=null==(l=t.context)?void 0:l.data)?void 0:o[0],t,{}):i[n]=h.to),void 0!==h.from&&(r||(r={}),"function"==typeof h.from?r[n]=h.from(null==(s=null==(a=t.context)?void 0:a.data)?void 0:s[0],t,{}):r[n]=h.from)})),{from:r,props:i}}resolveValue(e,t,i){var r,n;return void 0===e?i:"function"==typeof e&&t?e(null==(n=null==(r=t.context)?void 0:r.data)?void 0:n[0],t,{}):e}executeItem(e,t,i=0,r=1){return Array.isArray(e)?e.map(e=>this._executeItem(e,t,i,r)).filter(Boolean):[this._executeItem(e,t,i,r)].filter(Boolean)}_executeItem(e,t,i=0,r=1){if(!t)return null;let n="timeSlices"in e,l=null,o=this.parseParams(e,n);return(l=n?this.executeTimelineItem(o,t,i,r):this.executeTypeConfigItem(o,t,i,r))&&this._trackAnimation(l),l}stop(e,t=!0){for(;this._animates.length>0;){let i=this._animates.pop();!1===t&&(i.status=er.END),null==i||i.stop(e)}this._animates=[],this._activeCount=0,this._started&&(this._started=!1,t&&this.onEnd())}}gz.builtInAnimateMap={};let gW="appear",gZ="disappear",gN="update",g$="highlight",gj="unhighlight";class gG{constructor(e){this.graphic=e}registerState(e){this.states||(this.states=new Map),this.states.set(e.name,e)}clearStates(){var e;null==(e=this.states)||e.clear()}}class gV{constructor(e){this.stateList=null,this.graphic=e}applyState(e,t,i){let r=gO.getInstance(),n=[],l=[];if(this.stateList&&this.stateList.length?e.forEach((e,i)=>{let o={allowTransition:!0};this.stateList.forEach(t=>{let i=r.isTransitionAllowed(t.state,e,this.graphic);o.allowTransition=o.allowTransition&&i.allowTransition}),o.allowTransition&&(l.push({state:e,animationConfig:(0,ri.Z)(t[i])?t[i].map(e=>e.animation):t[i].animation,executor:new gz(this.graphic)}),this.stateList.forEach(t=>{r.isTransitionAllowed(t.state,e,this.graphic).stopOriginalTransition&&n.push(t)}))}):e.forEach((e,i)=>{l.push({state:e,animationConfig:(0,ri.Z)(t[i])?t[i].map(e=>e.animation):t[i].animation,executor:new gz(this.graphic)})}),n.forEach(e=>{e.executor.stop(null,!1)}),l.length){l[0].executor.execute(l[0].animationConfig);for(let e=0;e<l.length;e++){let t=l[e+1],r=l[e];r.executor.onEnd(()=>{t&&t.executor.execute(t.animationConfig),this.stateList=this.stateList.filter(e=>e!==r),e===l.length-1&&i&&i(!1)})}}else i&&i(!0);this.stateList?this.stateList=this.stateList.filter(e=>!n.includes(e)):this.stateList=[],this.stateList.push(...l)}applyAppearState(e,t){this.applyState([gW],[{name:gW,animation:e}],t)}applyDisappearState(e,t){this.applyState([gZ],[{name:gZ,animation:e}],t)}applyUpdateState(e,t){this.applyState([gN],[{name:gN,animation:e}],t)}applyHighlightState(e,t){this.applyState([g$],[{name:g$,animation:e}],t)}applyUnhighlightState(e,t){this.applyState([gj],[{name:gj,animation:e}],t)}stopState(e,t){var i;let r=null==(i=this.stateList)?void 0:i.find(t=>t.state===e);r&&r.executor.stop(t)}clearState(){var e;null==(e=this.stateList)||e.forEach(e=>{e.executor.stop(null,!1)}),this.stateList=null}reApplyState(e){var t;let i=null==(t=this.stateList)?void 0:t.find(t=>t.state===e);if(i&&i.executor.started){let e=this.stateList.slice();i.executor.stop(),this.stateList=e,i.executor.execute(i.animationConfig)}}}class gU{_getAnimationStateManager(e){return e._animationStateManager||(e._animationStateManager=new gV(e)),e._animationStateManager}_getAnimationStateStore(e){return e._animationStateStore||(e._animationStateStore=new gG(e)),e._animationStateStore}registerAnimationState(e){return this._getAnimationStateStore(this).registerState(e),this}applyAnimationState(e,t,i){return this._getAnimationStateManager(this).applyState(e,t,i),this}applyAppearState(e,t){return this._getAnimationStateManager(this).applyAppearState(e,t),this}applyDisappearState(e,t){return this._getAnimationStateManager(this).applyDisappearState(e,t),this}applyUpdateState(e,t){return this._getAnimationStateManager(this).applyUpdateState(e,t),this}applyHighlightState(e,t){return this._getAnimationStateManager(this).applyHighlightState(e,t),this}applyUnhighlightState(e,t){return this._getAnimationStateManager(this).applyUnhighlightState(e,t),this}stopAnimationState(e,t,i=!1){return this._getAnimationStateManager(this).stopState(e,t),i&&this.isContainer&&this.forEachChildren(r=>{r.stopAnimationState(e,t,i)}),this}clearAnimationStates(){let e=this._animationStateManager;return e&&e.clearState(),this}reApplyAnimationState(e,t=!1){let i=this._animationStateManager;return i&&i.reApplyState(e),t&&this.isContainer&&this.forEachChildren(i=>{i.reApplyAnimationState(e,t)}),this}static extend(e){return(new gU)._getAnimationStateManager(e),e}}class gK extends nt(){get animateCount(){return this._animateCount}constructor(){super(),this.head=null,this.tail=null,this.animateMap=new Map,this._animateCount=0,this._playSpeed=1,this._totalDuration=0,this._startTime=0,this._currentTime=0,this._animationEndFlag=!0,this.id=tm.GenAutoIncrementId(),this.paused=!1}isRunning(){return!this.paused&&this._animateCount>0}forEachAccessAnimate(e){let t=this.head,i=0;for(;t;){let r=t.next;e(t.animate,i),i++,t=r}}addAnimate(e){let t={animate:e,next:null,prev:null};this.head?this.tail&&(this.tail.next=t,t.prev=this.tail,this.tail=t):(this.head=t,this.tail=t),this.animateMap.set(e,t),this._animateCount++,this._totalDuration=Math.max(this._totalDuration,e.getStartTime()+e.getDuration())}pause(){this.paused=!0}resume(){this.paused=!1}tick(e){if(this.paused)return;this._animationEndFlag&&(this._animationEndFlag=!1,this.emit("animationStart"));let t=e*this._playSpeed;this._currentTime+=t,this.forEachAccessAnimate((e,i)=>{e.status===er.END?this.removeAnimate(e,!0):e.status!==er.RUNNING&&e.status!==er.INITIAL||e.advance(t)}),0===this._animateCount&&(this._animationEndFlag=!0,this.emit("animationEnd"))}clear(){this.forEachAccessAnimate(e=>{e.release()}),this.head=null,this.tail=null,this.animateMap.clear(),this._animateCount=0,this._totalDuration=0}removeAnimate(e,t=!0){let i=this.animateMap.get(e);i&&(t&&(e._onRemove&&e._onRemove.forEach(e=>e()),e.release()),i.prev?i.prev.next=i.next:this.head=i.next,i.next?i.next.prev=i.prev:this.tail=i.prev,this.animateMap.delete(e),this._animateCount--,e.getStartTime()+e.getDuration()>=this._totalDuration&&this.recalculateTotalDuration())}recalculateTotalDuration(){this._totalDuration=0,this.forEachAccessAnimate(e=>{this._totalDuration=Math.max(this._totalDuration,e.getStartTime()+e.getDuration())})}getTotalDuration(){return this._totalDuration}getPlaySpeed(){return this._playSpeed}setPlaySpeed(e){this._playSpeed=e}getPlayState(){return this.paused?"paused":0===this.animateCount?"stopped":"playing"}setStartTime(e){this._startTime=e}getStartTime(){return this._startTime}getCurrentTime(){return this._currentTime}setCurrentTime(e){this._currentTime=e}}let gX=new gK;gX.isGlobal=!0;class gY{constructor(e=tm.GenAutoIncrementId(),t=gX,i){this.id=e,this.status=er.INITIAL,this._timeline=t,t.addAnimate(this),this.slience=i,this._startTime=0,this._duration=0,this._totalDuration=0,this._loopCount=0,this._currentLoop=0,this._bounce=!1,this._firstStep=null,this._lastStep=null,this._startProps={},this._endProps={},this._preventAttrs=new Set,this.currentTime=0,this.interpolateUpdateFunction=null,this.priority=0}getStartProps(){return this._startProps}getEndProps(){return this._endProps}setTimeline(e){this._timeline=e}getTimeline(){return this._timeline}get timeline(){return this._timeline}bind(e){return this.target=e,this.target.animates||(this.target.animates=new Map),this.target.animates.set(this.id,this),this.onRemove(()=>{this.stop(),this.target.animates.delete(this.id)}),this.target.onAnimateBind&&!this.slience&&this.target.onAnimateBind(this),this.target.animationAttribute||(this.target.animationAttribute={}),this}to(e,t=300,i="linear"){let r=new pu(ei.to,e,t,i);return r.bind(this.target,this),this.updateStepAfterAppend(r),this}wait(e){let t=new pc(ei.wait,{},e,"linear");return t.bind(this.target,this),this.updateStepAfterAppend(t),this}updateStepAfterAppend(e){this._firstStep?this._lastStep.append(e):this._firstStep=e,this._lastStep=e,this.parseStepProps(e),this.updateDuration()}parseStepProps(e){this._lastStep&&(e.propKeys=e.propKeys||Object.keys(e.props),Object.keys(this._endProps).forEach(t=>{var i;e.props[t]=null!=(i=e.props[t])?i:this._endProps[t]}),e.propKeys.forEach(t=>{this._endProps[t]=e.props[t]}))}reSyncProps(){if(!this._lastStep)return;this._endProps={};let e=this._firstStep;for(;e;)Object.keys(this._endProps).forEach(t=>{var i;e.props[t]=null!=(i=e.props[t])?i:this._endProps[t]}),e.propKeys.forEach(t=>{this._endProps[t]=e.props[t]}),e=e.next}from(e,t=300,i="linear"){let r=new pu(ei.from,e,t,i);return this._firstStep?this._lastStep.append(r):this._firstStep=r,this._lastStep=r,this.updateDuration(),this}play(e){return e.bind(this.target,this),this.updateStepAfterAppend(e),this}pause(){this.status===er.RUNNING&&(this.status=er.PAUSED)}resume(){this.status===er.PAUSED&&(this.status=er.RUNNING)}onStart(e){var t;e?(this._onStart||(this._onStart=[]),this._onStart.push(e)):(null==(t=this._onStart)||t.forEach(e=>e()),Object.keys(this._endProps).forEach(e=>{this._startProps[e]=this.target.getComputedAttribute(e)}))}onEnd(e){var t;e?(this._onEnd||(this._onEnd=[]),this._onEnd.push(e)):null==(t=this._onEnd)||t.forEach(e=>e())}onFrame(e){e&&(this._onFrame||(this._onFrame=[]),this._onFrame.push(e))}onRemove(e){var t;e?(this._onRemove||(this._onRemove=[]),this._onRemove.push(e)):null==(t=this._onRemove)||t.forEach(e=>e())}preventAttr(e){this._preventAttrs.add(e),delete this._startProps[e],delete this._endProps[e];let t=this._firstStep;for(;t;)t.deleteSelfAttr(e),t=t.next}preventAttrs(e){e.forEach(e=>this._preventAttrs.add(e))}validAttr(e){return!this._preventAttrs.has(e)}runCb(e){var t;return null==(t=this._lastStep)||t.onEnd(e),this}startAt(e){return this._startTime=e,this}customInterpolate(e,t,i,r,n,l){return!1}getFromValue(){return this._startProps}getToValue(){return this._endProps}stop(e){let t=this._firstStep;for(;t;)t.stop(),t=t.next;this.status!==er.END&&this.onEnd(),this.status=er.END,this.target&&("start"===e?this.target.setAttributes(this._startProps):"end"===e?this.target.setAttributes(this._endProps):e&&this.target.setAttributes(e))}release(){this.status=er.END,this._onRemove&&this._onRemove.forEach(e=>e()),this._onStart=[],this._onFrame=[],this._onEnd=[],this._onRemove=[],this.forEachStep(e=>{e.release()})}getDuration(){return this._duration}getStartTime(){return this._startTime}afterAll(e){if(!e||0===e.length)return this;let t=0;return e.forEach(e=>{let i=e.getStartTime()+e.getTotalDuration();t=Math.max(t,i)}),this.startAt(t)}after(e){if(!e)return this;let t=e.getStartTime()+e.getTotalDuration();return this.startAt(t)}parallel(e){return e&&this.startAt(e.getStartTime()),this}loop(e){return!0===e?e=1/0:!1===e&&(e=0),this._loopCount=e,this.updateDuration(),this}bounce(e){return this._bounce=e,this}advance(e){var t,i,r;if(this.status===er.END)return void console.warn("aaa ");let n=this.currentTime+e;if(n<this._startTime)return void(this.currentTime=n);if(n>=this._startTime+this._totalDuration)return null==(t=this._lastStep)||t.onUpdate(!0,1,{}),null==(i=this._lastStep)||i.onEnd(),this.onEnd(),void(this.status=er.END);this.status=er.RUNNING,this.currentTime<=this._startTime&&this.onStart(),this.currentTime=n;let l=n-this._startTime,o=!1,a=!1;if(this._loopCount>0){l=(n-this._startTime)%this._duration;let e=Math.floor((n-this._startTime)/this._duration);o=e>this._currentLoop,this._currentLoop=e,(a=this._bounce&&e%2==1)&&(l=this._duration-l)}o&&!a&&this.target.setAttributes(this._startProps);let s=null;if(this._lastStep===this._firstStep)s=this._firstStep;else{let e=this._firstStep;for(;e;){let t=e.getStartTime(),i=e.getDuration();if(l>=t&&l<=t+i){s=e;break}e=e.next}}if(!s)return;s!==this.lastRunStep&&(null==(r=this.lastRunStep)||r.onEnd()),this.lastRunStep=s;let h=(l-s.getStartTime())/s.getDuration(),d=h>=1;s.update(d,h,{}),d&&(s.onEnd(),this.lastRunStep=null)}updateDuration(){this._lastStep?(this._duration=this._lastStep.getStartTime()+this._lastStep.getDuration(),this._totalDuration=this._duration*(this._loopCount+1)):this._duration=0}getTotalDuration(){return this._totalDuration}getLoop(){return this._loopCount}forEachStep(e){let t=this._firstStep;for(;t;)e(t),t=t.next}}(ea=eP||(eP={}))[ea.INITIAL=0]="INITIAL",ea[ea.RUNNING=1]="RUNNING",ea[ea.PAUSE=2]="PAUSE";let gq=new tX;class gJ{constructor(){this.released=!1}tick(e,t){gq.addAnimationFrameCb(()=>{if(!this.released)return t(this)})}release(){this.released=!0}getTime(){return Date.now()}}class gQ extends nt(){constructor(e){super(),this.timelines=[],this.frameTimeHistory=[],this.handleTick=(e,t)=>{let{once:i=!1}=null!=t?t:{};if(this.ifCanStop())return this.stop(),!1;let r=e.getTime();this._lastTickTime=r,this.lastFrameTime<0&&(this.lastFrameTime=r-this.interval+this.timeOffset,this.frameTimeHistory.push(this.lastFrameTime));let n=r-this.lastFrameTime,l=this.checkSkip(n);return l||(this._handlerTick(n),this.lastFrameTime=r,this.frameTimeHistory.push(this.lastFrameTime)),i||e.tick(this.interval,this.handleTick),!l},this._handlerTick=e=>{this.status===eP.RUNNING&&(this.tickCounts++,this.timelines.forEach(t=>{t.tick(e)}),this.emit("tick",e))},this.init(),this.lastFrameTime=-1,this.tickCounts=0,this.stage=e,this.autoStop=!0,this.interval=16,this.computeTimeOffsetAndJitter()}bindStage(e){this.stage=e}computeTimeOffsetAndJitter(){this.timeOffset=Math.floor(Math.random()*this.interval),this._jitter=Math.min(Math.max(.2*this.interval,6),.7*this.interval)}init(){this.interval=16,this.status=eP.INITIAL,tU.global.hooks.onSetEnv.tap("graph-ticker",()=>{this.initHandler(!1)}),tU.global.env&&this.initHandler(!1)}addTimeline(e){this.timelines.push(e)}remTimeline(e){this.timelines=this.timelines.filter(t=>t!==e)}getTimelines(){return this.timelines}initHandler(e=!1){this.setupTickHandler(e)}setupTickHandler(e=!1){if(!e&&this.tickerHandler)return!0;let t=new gJ;return this.tickerHandler&&this.tickerHandler.release(),this.tickerHandler=t,!0}setInterval(e){this.interval=e,this.computeTimeOffsetAndJitter()}getInterval(){return this.interval}setFPS(e){this.setInterval(Math.floor(1e3/e))}getFPS(){return 1e3/this.interval}tick(e){this.tickerHandler.tick(e,e=>this.handleTick(e,{once:!0}))}tickTo(e){this.tickerHandler.tickTo&&this.tickerHandler.tickTo(e,e=>{this.handleTick(e,{once:!0})})}pause(){return this.status!==eP.INITIAL&&(this.status=eP.PAUSE,!0)}resume(){return this.status!==eP.INITIAL&&(this.status=eP.RUNNING,!0)}ifCanStop(){return!!(this.autoStop&&(!this.timelines.length||this.timelines.every(e=>!e.isRunning())))||!1}start(e=!1){return!(this.status===eP.RUNNING||!this.tickerHandler||!e&&(this.status===eP.PAUSE||this.ifCanStop()))&&(this.status=eP.RUNNING,this.tickerHandler.tick(0,this.handleTick),!0)}stop(){this.status=eP.INITIAL,this.setupTickHandler(!0),this.lastFrameTime=-1}trySyncTickStatus(){this.status===eP.INITIAL&&this.timelines.some(e=>e.isRunning())?this.start():this.status===eP.RUNNING&&this.timelines.every(e=>!e.isRunning())&&this.stop()}release(){var e;this.stop(),this.timelines=[],null==(e=this.tickerHandler)||e.release(),this.tickerHandler=null,this.lastFrameTime=-1}checkSkip(e){var t,i,r;return"performance"!==(null==(r=null==(i=null==(t=this.stage)?void 0:t.params)?void 0:i.optimize)?void 0:r.tickRenderMode)&&e<this.interval+2*(Math.random()-.5)*this._jitter}}class g0{getAttributes(e=!1){return e&&this.finalAttribute?this.finalAttribute:this.attribute}animate(e){var t,i,r;let n=new gY(null==e?void 0:e.id,null!=(i=null!=(t=null==e?void 0:e.timeline)?t:this.stage&&this.stage.getTimeline())?i:gX,null==e?void 0:e.slience);if(n.bind(this),e){let{onStart:t,onEnd:i,onRemove:r}=e;null!=t&&n.onStart(t),null!=i&&n.onEnd(i),null!=r&&n.onRemove(r)}return null==(r=this.stage)||r.ticker.start(),n}createTimeline(){return new gK}createTicker(e){return new gQ(e)}setFinalAttributes(e){this.finalAttribute||(this.finalAttribute={}),Object.assign(this.finalAttribute,e)}initFinalAttributes(e){this.finalAttribute=e}initAnimateExecutor(){this._animateExecutor||(this._animateExecutor=new gz(this))}executeAnimation(e){return this.initAnimateExecutor(),this._animateExecutor.execute(e),this}executeAnimations(e){return this.initAnimateExecutor(),e.forEach(e=>{this._animateExecutor.execute(e)}),this}getFinalAttribute(){return this.finalAttribute}getGraphicAttribute(e,t=!1){return!t&&this.finalAttribute?this.finalAttribute[e]:this.attribute[e]}pauseAnimation(e=!1){this.animates&&this.animates.forEach(e=>e.pause()),e&&this.isContainer&&this.forEachChildren(t=>{t.pauseAnimation(e)})}resumeAnimation(e=!1){this.animates&&this.animates.forEach(e=>e.resume()),e&&this.isContainer&&this.forEachChildren(t=>{t.resumeAnimation(e)})}stopAnimation(e=!1){this.animates&&this.animates.forEach(e=>e.stop()),e&&this.isContainer&&this.forEachChildren(t=>{t.stopAnimation(e)})}}function g1(){(0,gH.jB)(on,gU),(0,gH.jB)(on,g0)}let g2=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return Math.abs(i)>Math.abs(r)?i>0?"right":"left":r>0?"down":"up"},g3=(e,t)=>{let i=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return Math.sqrt(i*i+r*r)},g4=e=>{let t=e.length;if(1===t)return{x:Math.round(e[0].x),y:Math.round(e[0].y)};let i=0,r=0,n=0;for(;n<t;)i+=e[n].x,r+=e[n].y,n++;return{x:Math.round(i/t),y:Math.round(r/t)}};class g5 extends nt(){constructor(e,t={}){var i,r,n,l,o,a,s,h,d,u;super(),this.cachedEvents=[],this.startPoints=[],this.processEvent={},this.throttleTimer=0,this.emitThrottles=[],this.lastTapTarget=null,this.onStart=e=>{this.startTime=de.now();let{cachedEvents:t,startPoints:i}=this;e&&t.push(e.clone()),i.length=t.length;for(let e=0;e<t.length;e++){let{x:r,y:n}=t[e],l={x:r,y:n};i[e]=l}if(1!==i.length)this.startDistance=g3(i[0],i[1]),this.center=g4([i[0],i[1]]);else{let e=t[0];this.pressTimeout=setTimeout(()=>{e.direction="none",e.deltaX=0,e.deltaY=0,e.points=i,this.triggerStartEvent("press",e),this.triggerEvent("press",e),this.eventType="press",this.direction="none",this.pressTimeout=null},this.config.press.time)}},this.onMove=e=>{this.clearPressTimeout();let{startPoints:t,cachedEvents:i}=this;if(!t.length)return;let r=e.clone(),{x:n,y:l,pointerId:o}=r;for(let e=0,t=i.length;e<t;e++)if(o===i[e].pointerId){i[e]=r;break}let a={x:n,y:l},s=i.map(e=>({x:e.x,y:e.y})),h=de.now();if(this.prevMoveTime=this.lastMoveTime,this.prevMovePoint=this.lastMovePoint,this.lastMoveTime=h,this.lastMovePoint=a,1===t.length){let e=t[0],i=n-e.x,o=l-e.y,h=this.direction||g2(e,a);this.direction=h;let d=this.getEventType(a);return r.direction=h,r.deltaX=i,r.deltaY=o,r.points=s,this.triggerStartEvent(d,r),void this.triggerEvent(d,r)}let{startDistance:d}=this;r.scale=g3(s[0],s[1])/d,r.center=this.center,r.points=s,this.triggerStartEvent("pinch",r),this.triggerEvent("pinch",r)},this.onEnd=e=>{let t=e.clone(),{cachedEvents:i,startPoints:r}=this;if(t.points=i.map(e=>({x:e.x,y:e.y})),this.triggerEndEvent(t),1===i.length){let i=de.now(),n=this.lastMoveTime;if(i-n<100){let e=n-(this.prevMoveTime||this.startTime);if(e>0){let i=this.prevMovePoint||r[0],n=this.lastMovePoint||r[0],l=g3(i,n),o=l/e;if(o>this.config.swipe.velocity&&l>this.config.swipe.threshold)return t.velocity=o,t.direction=g2(i,n),this.triggerEvent("swipe",t),this.cachedEvents=[],this.startPoints=[],void this.reset()}}i-this.startTime<this.config.press.time&&(i-this.lastTapTime<this.config.tap.interval&&e.target===this.lastTapTarget?this.tapCount++:this.tapCount=1,this.lastTapTime=i,this.lastTapTarget=e.target,1===this.tapCount?this.triggerEvent("tap",t):2===this.tapCount&&(this.triggerEvent("doubletap",t),this.tapCount=0))}for(let e=0,n=i.length;e<n;e++)if(i[e].pointerId===t.pointerId){i.splice(e,1),r.splice(e,1);break}this.reset(),i.length>0&&this.onStart()},this.element=e,this.tapCount=0,this.lastTapTime=0,this.config={press:{time:null!=(r=null==(i=null==t?void 0:t.press)?void 0:i.time)?r:251,threshold:null!=(l=null==(n=null==t?void 0:t.press)?void 0:n.threshold)?l:9},swipe:{threshold:null!=(a=null==(o=null==t?void 0:t.swipe)?void 0:o.threshold)?a:10,velocity:null!=(h=null==(s=null==t?void 0:t.swipe)?void 0:s.velocity)?h:.3},tap:{interval:null!=(u=null==(d=null==t?void 0:t.tap)?void 0:d.interval)?u:300}},this.initEvents()}initEvents(){let{element:e}=this;e&&(e.addEventListener("pointerdown",this.onStart),e.addEventListener("pointermove",this.onMove),e.addEventListener("pointerup",this.onEnd),e.addEventListener("pointerleave",this.onEnd),e.addEventListener("pointerupoutside",this.onEnd))}removeEvents(){let{element:e}=this;e&&(e.removeEventListener("pointerdown",this.onStart),e.removeEventListener("pointermove",this.onMove),e.removeEventListener("pointerup",this.onEnd),e.removeEventListener("pointerleave",this.onEnd),e.removeEventListener("pointerupoutside",this.onEnd))}release(){this.removeEvents(),this.element=null}getEventType(e){let t,{eventType:i,startTime:r,startPoints:n}=this;return"press"===i?i:(t=de.now()-r>this.config.press.time&&g3(n[0],e)<this.config.press.threshold?"press":"pan",this.eventType=t,t)}enable(e){this.processEvent[e]=!0}isProcess(e){return this.processEvent[e]}pushEvent(e,t){let{emitThrottles:i}=this,r={type:e,ev:t};for(let t=0,n=i.length;t<n;t++)if(i[t].type===e)return void i.splice(t,1,r);i.push(r)}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=null)}reset(){this.clearPressTimeout(),this.startTime=0,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoint=null,this.lastMoveTime=0,this.lastMovePoint=null}triggerEvent(e,t){this.pushEvent(e,t);let{throttleTimer:i,emitThrottles:r}=this;i||(this.throttleTimer=tU.global.getRequestAnimationFrame()(()=>{tU.global.getCancelAnimationFrame()(this.throttleTimer),this.throttleTimer=null;for(let e=0,t=r.length;e<t;e++){let{type:t,ev:i}=r[e];this.emitEvent(t,i)}this.emitThrottles.length=0}))}triggerStartEvent(e,t){this.isProcess(e)||(this.enable(e),this.triggerEvent(`${e}start`,t))}triggerEndEvent(e){let t=this.processEvent;Object.keys(t).forEach(i=>{this.triggerEvent(`${i}end`,e),"press"===i&&this.triggerEvent(`${i}up`,e),delete t[i]})}emitEvent(e,t){if(!this.element)return;let i=this.element._events;this._callListeners(e,t,i["*"]),this._callListeners(e,t,i[e]),this.emit(e,t)}_callListeners(e,t,i){if(i)if("fn"in i)i.fn.call(i.context,t,e);else for(let r=0,n=i.length;r<n&&!t.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,t,e)}}class g6 extends pp{constructor(e,t,i,r,n){super(null,{},i,r,n),this.clipFromAttribute=e,this.clipToAttribute=t,this._group=null==n?void 0:n.group,this._clipGraphic=null==n?void 0:n.clipGraphic}onBind(){super.onBind(),this._group&&this._clipGraphic&&(this._lastClip=this._group.attribute.clip,this._lastPath=this._group.attribute.path,this._group.setAttributes({clip:!0,path:[this._clipGraphic]},!1,{type:sm.ANIMATE_BIND}))}onEnd(){this._group&&this._group.setAttributes({clip:this._lastClip,path:this._lastPath},!1,{type:sm.ANIMATE_END})}onUpdate(e,t,i){if(!this._clipGraphic)return;let r={};Object.keys(this.clipFromAttribute).forEach(e=>{r[e]=this.clipFromAttribute[e]+(this.clipToAttribute[e]-this.clipFromAttribute[e])*t}),this._clipGraphic.setAttributes(r,!1,{type:sm.ANIMATE_UPDATE,animationState:{ratio:t,end:e}})}}class g8 extends g6{constructor(e,t,i,r,n){var l,o,a,s,h,d,u,c,p,g,f,m;let b,y,v=null!=(o=null==(l=null==n?void 0:n.group)?void 0:l.attribute)?o:{},_=null!=(a=v.width)?a:0,C=null!=(s=v.height)?s:0,x=null!=(h=null==n?void 0:n.animationType)?h:"in",w=null!=(d=null==n?void 0:n.startAngle)?d:0,S=null!=(u=null==n?void 0:n.orient)?u:"clockwise",A=0,k=0;"anticlockwise"===S?(k="in"===x?w+2*Math.PI:w,k=w+2*Math.PI):(A=w,k="out"===x?w+2*Math.PI:w);let M=tU.graphicService.creator.arc({x:null!=(p=null==(c=null==n?void 0:n.center)?void 0:c.x)?p:_/2,y:null!=(f=null==(g=null==n?void 0:n.center)?void 0:g.y)?f:C/2,outerRadius:null!=(m=null==n?void 0:n.radius)?m:(_+C)/2,innerRadius:0,startAngle:A,endAngle:k,fill:!0});"anticlockwise"===S?(b={startAngle:w+2*Math.PI},y={startAngle:w}):(b={endAngle:w},y={endAngle:w+2*Math.PI}),super("in"===x?b:y,"in"===x?y:b,i,r,{group:null==n?void 0:n.group,clipGraphic:M})}}class g7 extends g6{constructor(e,t,i,r,n){var l,o,a,s,h,d,u,c,p;let g=null!=(o=null==(l=null==n?void 0:n.group)?void 0:l.attribute)?o:{},f=null!=(s=null!=(a=null==n?void 0:n.width)?a:g.width)?s:0,m=null!=(d=null!=(h=null==n?void 0:n.height)?h:g.height)?d:0,b=null!=(u=null==n?void 0:n.animationType)?u:"in",y=null!=(c=null==n?void 0:n.direction)?c:"x",v=null!=(p=null==n?void 0:n.orient)?p:"positive",_=tU.graphicService.creator.rect({x:0,y:0,width:"in"===b&&"x"===y?0:f,height:"in"===b&&"y"===y?0:m,fill:!0}),C={},x={};"y"===y?"negative"===v?(C={y:m,height:0},x={y:0,height:m}):(C={height:0},x={height:m}):"negative"===v?(C={x:f,width:0},x={x:0,width:f}):(C={width:0},x={width:f}),super("in"===b?C:x,"in"===b?x:C,i,r,{group:null==n?void 0:n.group,clipGraphic:_})}}var g9=i(94030);class fe extends pp{constructor(e,t,i,r,n){var l,o;super(e,t,i,r,n),this.newPointAnimateType=null!=(l=null==n?void 0:n.newPointAnimateType)?l:"grow",this.clipRangeByDimension=null!=(o=null==n?void 0:n.clipRangeByDimension)?o:"x"}getPoints(e,t=!1){if(e.points)return e.points;if(e.segments){let i=[];return this.segmentsCache||(this.segmentsCache=[]),e.segments.map(e=>{var r,n;e.points&&i.push(...e.points),t&&this.segmentsCache.push(null!=(n=null==(r=e.points)?void 0:r.length)?n:0)}),i}return[]}onBind(){super.onBind();let{points:e,segments:t}=this.target.attribute,{points:i,segments:r}=this.target.getFinalAttribute();this.from={points:e,segments:t},this.to={points:i,segments:r},this.props=this.to;let n=this.getPoints(this.from),l=this.getPoints(this.to,!0);this.fromPoints=n?Array.isArray(n)?n:[n]:[],this.toPoints=l?Array.isArray(l)?l:[l]:[];let o=new Map;this.fromPoints.forEach(e=>{e.context&&o.set(e.context,e)});let a,s,h=1/0,d=-1/0;for(let e=0;e<this.toPoints.length;e+=1)if(o.has(this.toPoints[e].context)){h=e,a=o.get(this.toPoints[e].context);break}for(let e=this.toPoints.length-1;e>=0;e-=1)if(o.has(this.toPoints[e].context)){d=e,s=o.get(this.toPoints[e].context);break}"clip"===this.newPointAnimateType&&0!==this.toPoints.length&&(Number.isFinite(d)?(this.clipRange=this.toPoints[d][this.clipRangeByDimension]/this.toPoints[this.toPoints.length-1][this.clipRangeByDimension],1===this.clipRange&&(this.shrinkClipRange=this.toPoints[d][this.clipRangeByDimension]/this.fromPoints[this.fromPoints.length-1][this.clipRangeByDimension]),(0,sD.Z)(this.clipRange)?this.clipRange=(0,g9.Z)(this.clipRange,0,1):this.clipRange=0):this.clipRange=0);let u=this.toPoints[0];this.interpolatePoints=this.toPoints.map((e,t)=>{let i=o.get(e.context);return i?(u=i,[i,e]):"appear"===this.newPointAnimateType||"clip"===this.newPointAnimateType?[e,e]:t<h&&a?[a,e]:t>d&&s?[s,e]:[u,e]}),this.points=this.interpolatePoints.map(e=>{let t=e[0],i=e[1],r=new il.E9(t.x,t.y,t.x1,t.y1);return r.defined=i.defined,r.context=i.context,r})}onFirstRun(){let e=this.target.attribute.clipRange;(0,sD.Z)(e*this.clipRange)&&(this.clipRange*=e)}onUpdate(e,t,i){if(e)return Object.keys(this.to).forEach(e=>{this.target.attribute[e]=this.to[e]}),this.target.addUpdatePositionTag(),void this.target.addUpdateShapeAndBoundsTag();if(this.points=this.points.map((e,i)=>{let r=nm(this.interpolatePoints[i][0],this.interpolatePoints[i][1],t);return r.context=e.context,r}),this.clipRange){if(this.shrinkClipRange)return void(e?(i.points=this.toPoints,i.clipRange=1):(i.points=this.fromPoints,i.clipRange=this.clipRange-(this.clipRange-this.shrinkClipRange)*t));this.target.setAttributes({clipRange:this.clipRange+(1-this.clipRange)*t})}if(this.segmentsCache&&this.to.segments){let e=0,t=this.to.segments.map((t,i)=>{let r=e+this.segmentsCache[i],n=this.points.slice(e,r);return e=r,Object.assign(Object.assign({},t),{points:n})});this.target.attribute.segments=t}else this.target.attribute.points=this.points;this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class ft extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e,t,i,r,n,l,o,a,s,h,d;let u,c;super.onBind();let p=this.target.getFinalAttribute(),g=null!=(e=this.target.attribute)?e:{};switch(null==(t=this.params)?void 0:t.direction){case"x":u={scaleX:null!=(i=g.scaleX)?i:0},c={scaleX:null!=(r=null==p?void 0:p.scaleX)?r:1},this._updateFunction=this.updateX;break;case"y":u={scaleY:null!=(n=g.scaleY)?n:0},c={scaleY:null!=(l=null==p?void 0:p.scaleY)?l:1},this._updateFunction=this.updateY;break;default:u={scaleX:null!=(o=g.scaleX)?o:0,scaleY:null!=(a=g.scaleY)?a:0},c={scaleX:null!=(s=null==p?void 0:p.scaleX)?s:1,scaleY:null!=(h=null==p?void 0:p.scaleY)?h:1},this._updateFunction=this.updateXY}let f=this.target.getFinalAttribute();f&&this.target.setAttributes(f),this.props=c,this.from=u,this.to=c,!1!==(null==(d=this.params.controlOptions)?void 0:d.immediatelyApply)&&this.target.setAttributes(u)}onEnd(e){super.onEnd(e)}updateX(e){this.target.attribute.scaleX=this.from.scaleX+(this.to.scaleX-this.from.scaleX)*e}updateY(e){this.target.attribute.scaleY=this.from.scaleY+(this.to.scaleY-this.from.scaleY)*e}updateXY(e){this.updateX(e),this.updateY(e)}deleteSelfAttr(e){delete this.props[e],this.fromProps&&delete this.fromProps[e];let t=this.propKeys.indexOf(e);-1!==t&&this.propKeys.splice(t,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateXY:"scaleX"===this.propKeys[0]?this._updateFunction=this.updateX:"scaleY"===this.propKeys[0]?this._updateFunction=this.updateY:this._updateFunction=null}onUpdate(e,t,i){this._updateFunction&&(this._updateFunction(t),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag())}}class fi extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e,t,i,r,n;let l,o;super.onBind();let a=this.target.attribute;switch(null==(e=this.params)?void 0:e.direction){case"x":l={scaleX:null!=(t=null==a?void 0:a.scaleX)?t:1},o={scaleX:0};break;case"y":l={scaleY:null!=(i=null==a?void 0:a.scaleY)?i:1},o={scaleY:0};break;default:l={scaleX:null!=(r=null==a?void 0:a.scaleX)?r:1,scaleY:null!=(n=null==a?void 0:a.scaleY)?n:1},o={scaleX:0,scaleY:0}}this.props=o,this.from=l,this.to=o}onEnd(e){super.onEnd(e)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}}class fr extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e,t,i;super.onBind();let r=this.target.getFinalAttribute(),n=null!=(e=this.target.attribute)?e:{},l={},o=null!=(t=this.from)?t:{};this.keys.forEach(e=>{var t,i,a;l[e]=null!=(t=null==r?void 0:r[e])?t:1,o[e]=null!=(a=null!=(i=o[e])?i:n[e])?a:0});let a=this.target.getFinalAttribute();a&&this.target.setAttributes(a),this.props=l,this.propKeys=this.keys,this.from=o,this.to=l,!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(o)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class fn extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){super.onBind();let e=this.target.attribute,t={},i={};this.keys.forEach(r=>{var n;t[r]=0,i[r]=null!=(n=e[r])?n:1}),this.props=t,this.propKeys=this.keys,this.from=i,this.to=t,Object.assign(this.target.attribute,i),this.target.addUpdatePositionTag(),this.target.addUpdateBoundTag()}onEnd(e){super.onEnd(e)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class fl extends fr{constructor(e,t,i,r,n){super(e,t,i,r,n),this.keys=["opacity","fillOpacity","strokeOpacity"],this.from={opacity:0,fillOpacity:0,strokeOpacity:0}}}class fo extends fn{constructor(e,t,i,r,n){super(e,t,i,r,n),this.keys=["opacity","fillOpacity","strokeOpacity"]}}let fa=(e,t,i)=>{var r,n,l,o;let{offset:a=0,orient:s,direction:h,point:d,excludeChannels:u=[],layoutRect:c={}}=null!=t?t:{},p=0,g=0;"negative"===s&&(p=null!=(r=c.width)?r:e.stage.viewWidth,g=null!=(n=c.height)?n:e.stage.viewHeight),p+=a,g+=a;let f=(0,nr.Z)(d)?d.call(null,null==(o=null==(l=e.context)?void 0:l.data)?void 0:o[0],e,i):d,m=e.getGraphicAttribute("x"),b=e.getGraphicAttribute("y"),y=u.includes("x")?m:f&&(0,sD.Z)(f.x)?f.x:p,v=u.includes("y")?b:f&&(0,sD.Z)(f.y)?f.y:g;switch(h){case"x":return{from:{x:u.includes("x")?m:y},to:{x:m}};case"y":return{from:{y:v},to:{y:b}};default:return{from:{x:y,y:v},to:{x:m,y:b}}}},fs=(e,t,i)=>{var r,n,l,o;let{offset:a=0,orient:s,direction:h,point:d}=null!=t?t:{},u=i.group?i.group.AABBBounds:null,c=null!=(r=u.width())?r:i.width,p=null!=(n=u.height())?n:i.height,g=(0,nr.Z)(d)?d.call(null,null==(o=null==(l=e.context)?void 0:l.data)?void 0:o[0],e,i):d,f=g&&(0,sD.Z)(g.x)?g.x:("negative"===s?c:0)+a,m=g&&(0,sD.Z)(g.y)?g.y:("negative"===s?p:0)+a;switch(h){case"x":return{from:{x:e.getGraphicAttribute("x")},to:{x:f}};case"y":return{from:{y:e.getGraphicAttribute("y")},to:{y:m}};default:return{from:{x:e.getGraphicAttribute("x"),y:e.getGraphicAttribute("y")},to:{x:f,y:m}}}};class fh extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class fd extends fh{onBind(){var e;super.onBind();let{from:t,to:i}=fa(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(e=>null!=i[e]),this.from=t,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(e=this.params.controlOptions)?void 0:e.immediatelyApply)&&this.target.setAttributes(t)}}class fu extends fh{onBind(){super.onBind();let{from:e,to:t}=fs(this.target,this.params.options,this.params);this.props=t,this.propKeys=Object.keys(t).filter(e=>null!=t[e]),this.from=e,this.to=t}}let fc=(e,t)=>{var i;let r=null!=(i=e.getFinalAttribute().angle)?i:0,n=0;return{from:{angle:(0,rN.Yt)(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:(0,sD.Z)(null==t?void 0:t.angle)?t.angle:"anticlockwise"===(null==t?void 0:t.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2},to:{angle:r}}},fp=(e,t)=>{var i;let r=null!=(i=e.getFinalAttribute().angle)?i:0,n=0;return n=(0,rN.Yt)(r/(2*Math.PI),0)?Math.round(r/(2*Math.PI))*Math.PI*2:(0,sD.Z)(null==t?void 0:t.angle)?t.angle:"anticlockwise"===(null==t?void 0:t.orient)?Math.ceil(r/(2*Math.PI))*Math.PI*2:Math.floor(r/(2*Math.PI))*Math.PI*2,{from:{angle:r},to:{angle:n}}};class fg extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class ff extends fg{onBind(){var e;super.onBind();let{from:t,to:i}=fc(this.target,this.params.options);this.props=i,this.propKeys=["angle"],this.from=t,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(e=this.params.controlOptions)?void 0:e.immediatelyApply)&&this.target.setAttributes(t)}}class fm extends fg{onBind(){super.onBind();let{from:e,to:t}=fp(this.target,this.params.options);this.props=t,this.propKeys=["angle"],this.from=e,this.to=t}}class fb extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e,t;super.onBind();let{diffAttrs:i={}}=null!=(e=this.target.context)?e:{},{options:r}=this.params;i=Object.assign({},i),(null==(t=null==r?void 0:r.excludeChannels)?void 0:t.length)&&r.excludeChannels.forEach(e=>{delete i[e]}),this.props=i}update(e,t,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(t);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((e,t)=>{if(!this.animate.validAttr(this.propKeys[t]))return;let i=this.propKeys[t];e(i,this.fromProps[i],this.props[i],r,this,this.target)}),this.onUpdate(e,r,i)}}class fy extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}update(e,t,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(t);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.fromProps,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((e,t)=>{if(!this.animate.validAttr(this.propKeys[t]))return;let i=this.propKeys[t];e(i,this.fromProps[i],this.props[i],r,this,this.target)}),this.onUpdate(e,r,i),this.syncAttributeUpdate()}}class fv extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n),this.from=null!=e?e:{}}onBind(){var e,t;super.onBind(),Object.keys(this.from).forEach(e=>{null==this.props[e]&&(this.props[e]=this.target.getGraphicAttribute(e))});let i=this.target.getFinalAttribute();"appear"===(null==(e=this.target.context)?void 0:e.animationState)&&i&&this.target.setAttributes(i),!1!==(null==(t=this.params.controlOptions)?void 0:t.immediatelyApply)&&this.target.setAttributes(this.from)}onFirstRun(){this.from=Object.assign(Object.assign({},this.getLastProps()),this.from);let e=this.animate.getStartProps();this.propKeys&&this.propKeys.forEach(t=>{var i;this.from[t]=null!=(i=this.from[t])?i:e[t]}),this.target.setAttributes(this.from)}deleteSelfAttr(e){super.deleteSelfAttr(e),delete this.from[e]}update(e,t,i){if(this.onStart(),!this.props||!this.propKeys)return;let r=this.easing(t);this.animate.interpolateUpdateFunction?this.animate.interpolateUpdateFunction(this.from,this.props,r,this,this.target):this.interpolateUpdateFunctions.forEach((e,t)=>{if(!this.animate.validAttr(this.propKeys[t]))return;let i=this.propKeys[t];e(i,this.from[i],this.props[i],r,this,this.target)}),this.onUpdate(e,r,i),this.syncAttributeUpdate()}}let f_=(e,t,i)=>{var r;return!1!==(null!=(r=null==t?void 0:t.overall)&&r)?function(e,t,i){var r,n,l;let o,a=e.getFinalAttribute(),s=a.y,h=a.y1,d=a.height;return t&&"negative"===t.orient?(0,nw.Z)(t.overall)?o=t.overall:i.group?(o=null!=(l=null!=(r=i.groupHeight)?r:null==(n=t.layoutRect)?void 0:n.height)?l:i.group.getBounds().height(),i.groupHeight=o):o=i.height:o=(0,nw.Z)(null==t?void 0:t.overall)?t.overall:0,{from:{y:o,y1:(0,r5.Z)(h)?void 0:o,height:(0,r5.Z)(d)?void 0:0},to:{y:s,y1:h,height:d}}}(e,t,i):function(e,t,i){let r=e.getFinalAttribute(),n=r.y,l=r.y1,o=r.height;if(t&&"negative"===t.orient){let e=(0,oV.Z)(o)?Math.max(n,n+o):Math.max(n,l);return{from:{y:e,y1:(0,r5.Z)(l)?void 0:e,height:(0,r5.Z)(o)?void 0:0},to:{y:n,y1:l,height:o}}}let a=(0,oV.Z)(o)?Math.min(n,n+o):Math.min(n,l);return{from:{y:a,y1:(0,r5.Z)(l)?void 0:a,height:(0,r5.Z)(o)?void 0:0},to:{y:n,y1:l,height:o}}}(e,t,0)};class fC extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e,t,i;super.onBind();let{from:r,to:n}=f_(this.target,this.params.options,this.params),l=null!=(t=null==(e=this.target.context)?void 0:e.lastAttrs)?t:r;this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.from=l,this.to=n;let o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(l)}onEnd(e){super.onEnd(e)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class fx extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e,t,i,r;super.onBind();let{from:n,to:l}=(e=this.target,t=this.params.options,i=this.params,!1!==(null!=(r=null==t?void 0:t.overall)&&r)?function(e,t,i){var r,n,l;let o,a=e.getFinalAttribute(),s=a.y1,h=a.height;return t&&"negative"===t.orient?(0,nw.Z)(t.overall)?o=t.overall:i.group?(o=null!=(l=null!=(r=i.groupHeight)?r:null==(n=t.layoutRect)?void 0:n.height)?l:i.group.getBounds().height(),i.groupHeight=o):o=i.height:o=(0,nw.Z)(null==t?void 0:t.overall)?t.overall:0,{to:{y:o,y1:(0,r5.Z)(s)?void 0:o,height:(0,r5.Z)(h)?void 0:0}}}(e,t,i):function(e,t,i){let r=e.getFinalAttribute(),n=r.y,l=r.y1,o=r.height;if(t&&"negative"===t.orient){let e=(0,oV.Z)(o)?Math.max(n,n+o):Math.max(n,l);return{to:{y:e,y1:(0,r5.Z)(l)?void 0:e,height:(0,r5.Z)(o)?void 0:0}}}let a=(0,oV.Z)(o)?Math.min(n,n+o):Math.min(n,l);return{to:{y:a,y1:(0,r5.Z)(l)?void 0:a,height:(0,r5.Z)(o)?void 0:0}}}(e,t,0));this.props=l,this.propKeys=Object.keys(l).filter(e=>null!=l[e]),this.from=null!=n?n:this.target.attribute,this.to=l}onEnd(e){super.onEnd(e)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}let fw=(e,t,i)=>{var r;return!1!==(null!=(r=null==t?void 0:t.overall)&&r)?function(e,t,i){var r;let n,l=e.getFinalAttribute(),o=l.x,a=l.x1,s=l.width;return t&&"negative"===t.orient?(0,nw.Z)(t.overall)?n=t.overall:i.group?(n=null!=(r=i.groupWidth)?r:i.group.getBounds().width(),i.groupWidth=n):n=i.width:n=(0,nw.Z)(null==t?void 0:t.overall)?null==t?void 0:t.overall:0,{from:{x:n,x1:(0,r5.Z)(a)?void 0:n,width:(0,r5.Z)(s)?void 0:0},to:{x:o,x1:a,width:s}}}(e,t,i):function(e,t,i){let r=e.getFinalAttribute(),n=r.x,l=r.x1,o=r.width;if(t&&"negative"===t.orient){let e=(0,oV.Z)(o)?Math.max(n,n+o):Math.max(n,l);return{from:{x:e,x1:(0,r5.Z)(l)?void 0:e,width:(0,r5.Z)(o)?void 0:0},to:{x:n,x1:l,width:o}}}let a=(0,oV.Z)(o)?Math.min(n,n+o):Math.min(n,l);return{from:{x:a,x1:(0,r5.Z)(l)?void 0:a,width:(0,r5.Z)(o)?void 0:0},to:{x:n,x1:l,width:o}}}(e,t,0)};class fS extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e,t,i;super.onBind();let{from:r,to:n}=fw(this.target,this.params.options,this.params),l=null!=(t=null==(e=this.target.context)?void 0:e.lastAttrs)?t:r;this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.from=l,this.to=n;let o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(l)}onEnd(e){super.onEnd(e)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class fA extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e,t,i,r;super.onBind();let{from:n,to:l}=(e=this.target,t=this.params.options,i=this.params,!1!==(null!=(r=null==t?void 0:t.overall)&&r)?function(e,t,i){var r;let n,l=e.getFinalAttribute(),o=l.x1,a=l.width;return t&&"negative"===t.orient?(0,nw.Z)(t.overall)?n=t.overall:i.group?(n=null!=(r=i.groupWidth)?r:i.group.getBounds().width(),i.groupWidth=n):n=i.width:n=(0,nw.Z)(null==t?void 0:t.overall)?t.overall:0,{to:{x:n,x1:(0,r5.Z)(o)?void 0:n,width:(0,r5.Z)(a)?void 0:0}}}(e,t,i):function(e,t,i){let r=e.getFinalAttribute(),n=r.x,l=r.x1,o=r.width;if(t&&"negative"===t.orient){let e=(0,oV.Z)(o)?Math.max(n,n+o):Math.max(n,l);return{to:{x:e,x1:(0,r5.Z)(l)?void 0:e,width:(0,r5.Z)(o)?void 0:0}}}let a=(0,oV.Z)(o)?Math.min(n,n+o):Math.min(n,l);return{to:{x:a,x1:(0,r5.Z)(l)?void 0:a,width:(0,r5.Z)(o)?void 0:0}}}(e,t,0));this.props=l,this.propKeys=Object.keys(l).filter(e=>null!=l[e]),this.from=null!=n?n:this.target.attribute,this.to=l}onEnd(e){super.onEnd(e)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}let fk=(e,t,i)=>{let r=e.getFinalAttribute();switch(null==t?void 0:t.direction){case"x":{let e=r.x,t=r.x1,i=r.width;return{from:(0,oV.Z)(i)?{x:e+i/2,x1:void 0,width:0}:{x:(e+t)/2,x1:(e+t)/2,width:void 0},to:{x:e,x1:t,width:i}}}case"y":{let e=r.y,t=r.y1,i=r.height;return{from:(0,oV.Z)(i)?{y:e+i/2,y1:void 0,height:0}:{y:(e+t)/2,y1:(e+t)/2,height:void 0},to:{y:e,y1:t,height:i}}}default:{let e=r.x,t=r.x1,i=r.width,n=r.y,l=r.y1,o=r.height,a={};return(0,oV.Z)(i)?(a.x=e+i/2,a.width=0,a.x1=void 0):(a.x=(e+t)/2,a.x1=(e+t)/2,a.width=void 0),(0,oV.Z)(o)?(a.y=n+o/2,a.height=0,a.y1=void 0):(a.y=(n+l)/2,a.y1=(n+l)/2,a.height=void 0),{from:a,to:{x:e,y:n,x1:t,y1:l,width:i,height:o}}}}},fM=(e,t,i)=>{let r=e.attribute;switch(null==t?void 0:t.direction){case"x":{let e=r.x,t=r.x1,i=r.width;return{to:(0,oV.Z)(i)?{x:e+i/2,x1:void 0,width:0}:{x:(e+t)/2,x1:(e+t)/2,width:void 0}}}case"y":{let e=r.y,t=r.y1,i=r.height;return{to:(0,oV.Z)(i)?{y:e+i/2,y1:void 0,height:0}:{y:(e+t)/2,y1:(e+t)/2,height:void 0}}}default:{let e=r.x,t=r.y,i=r.x1,n=r.y1,l=r.width,o=r.height,a={};return(0,oV.Z)(l)?(a.x=e+l/2,a.width=0,a.x1=void 0):(a.x=(e+i)/2,a.x1=(e+i)/2,a.width=void 0),(0,oV.Z)(o)?(a.y=t+o/2,a.height=0,a.y1=void 0):(a.y=(t+n)/2,a.y1=(t+n)/2,a.height=void 0),{to:a}}}};class fT extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e,t,i;super.onBind();let{from:r,to:n}=fk(this.target,this.params.options,this.params),l=null!=(t=null==(e=this.target.context)?void 0:e.lastAttrs)?t:r;this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.from=l,this.to=n;let o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(l)}onEnd(e){super.onEnd(e)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class fR extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){super.onBind();let{from:e,to:t}=fM(this.target,this.params.options,this.params);this.props=t,this.propKeys=Object.keys(t).filter(e=>null!=t[e]),this.from=null!=e?e:this.target.attribute,this.to=t}onEnd(e){super.onEnd(e)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}let fE=(e,t,i)=>{let r=e.getFinalAttribute();return t&&"inside"===t.orient?{from:{innerRadius:null==r?void 0:r.outerRadius},to:{innerRadius:null==r?void 0:r.innerRadius}}:{from:{outerRadius:null==r?void 0:r.innerRadius},to:{outerRadius:null==r?void 0:r.outerRadius}}},fP=(e,t,i)=>{let r=e.getFinalAttribute(),n=(0,nw.Z)(null==t?void 0:t.overall)?t.overall:0;return{from:{innerRadius:n,outerRadius:n},to:{innerRadius:null==r?void 0:r.innerRadius,outerRadius:null==r?void 0:r.outerRadius}}},fB=(e,t,i)=>{var r;return!1!==(null!=(r=null==t?void 0:t.overall)&&r)?fP(e,t):fE(e,t)},fI=(e,t,i)=>{let r=e.getFinalAttribute();return t&&"inside"===t.orient?{from:{innerRadius:null==r?void 0:r.innerRadius},to:{innerRadius:null==r?void 0:r.outerRadius}}:{from:{outerRadius:null==r?void 0:r.outerRadius},to:{outerRadius:null==r?void 0:r.innerRadius}}},fL=(e,t,i)=>{let r=e.getFinalAttribute(),n=(0,nw.Z)(null==t?void 0:t.overall)?t.overall:0;return{from:{innerRadius:null==r?void 0:r.innerRadius,outerRadius:null==r?void 0:r.outerRadius},to:{innerRadius:n,outerRadius:n}}};class fF extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class fH extends fF{onBind(){var e,t,i;super.onBind();let{from:r,to:n}=fB(this.target,this.params.options,this.params),l=null!=(t=null==(e=this.target.context)?void 0:e.lastAttrs)?t:r;this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.from=l,this.to=n;let o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(l)}}class fO extends fF{onBind(){var e,t,i;super.onBind();let{to:r}=(e=this.target,t=this.params.options,this.params,!1!==(null!=(i=null==t?void 0:t.overall)&&i)?fL(e,t):fI(e,t));this.props=r,this.propKeys=Object.keys(r).filter(e=>null!=r[e]),this.from=this.target.attribute,this.to=r}}let fD=(e,t,i)=>{let r=e.getFinalAttribute();return t&&"anticlockwise"===t.orient?{from:{startAngle:null==r?void 0:r.endAngle},to:{startAngle:null==r?void 0:r.startAngle}}:{from:{endAngle:null==r?void 0:r.startAngle},to:{endAngle:null==r?void 0:r.endAngle}}},fz=(e,t,i)=>{let r=e.getFinalAttribute();if(t&&"anticlockwise"===t.orient){let e=(0,nw.Z)(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:e,endAngle:e},to:{startAngle:null==r?void 0:r.startAngle,endAngle:null==r?void 0:r.endAngle}}}let n=(0,nw.Z)(null==t?void 0:t.overall)?t.overall:0;return{from:{startAngle:n,endAngle:n},to:{startAngle:null==r?void 0:r.startAngle,endAngle:null==r?void 0:r.endAngle}}},fW=(e,t,i)=>{var r;return!1!==(null!=(r=null==t?void 0:t.overall)&&r)?fz(e,t):fD(e,t)},fZ=(e,t,i)=>{let r=e.attribute;return t&&"anticlockwise"===t.orient?{from:{startAngle:r.startAngle},to:{startAngle:null==r?void 0:r.endAngle}}:{from:{endAngle:r.endAngle},to:{endAngle:null==r?void 0:r.startAngle}}},fN=(e,t,i)=>{let r=e.attribute;if(t&&"anticlockwise"===t.orient){let e=(0,nw.Z)(t.overall)?t.overall:2*Math.PI;return{from:{startAngle:r.startAngle,endAngle:r.endAngle},to:{startAngle:e,endAngle:e}}}let n=(0,nw.Z)(null==t?void 0:t.overall)?t.overall:0;return{from:{startAngle:r.startAngle,endAngle:r.endAngle},to:{startAngle:n,endAngle:n}}};class f$ extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}determineUpdateFunction(){this.propKeys?this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:"startAngle"===this.propKeys[0]?this._updateFunction=this.updateStartAngle:"endAngle"===this.propKeys[0]?this._updateFunction=this.updateEndAngle:this.valid=!1:this.valid=!1}deleteSelfAttr(e){delete this.props[e],this.fromProps&&delete this.fromProps[e];let t=this.propKeys.indexOf(e);-1!==t&&this.propKeys.splice(t,1),this.propKeys&&this.propKeys.length>1?this._updateFunction=this.updateAngle:"startAngle"===this.propKeys[0]?this._updateFunction=this.updateStartAngle:"endAngle"===this.propKeys[0]?this._updateFunction=this.updateEndAngle:this._updateFunction=null}updateStartAngle(e){this.target.attribute.startAngle=this.from.startAngle+(this.to.startAngle-this.from.startAngle)*e}updateEndAngle(e){this.target.attribute.endAngle=this.from.endAngle+(this.to.endAngle-this.from.endAngle)*e}updateAngle(e){this.updateStartAngle(e),this.updateEndAngle(e)}onUpdate(e,t,i){this._updateFunction&&(this._updateFunction(t),this.target.addUpdateShapeAndBoundsTag())}}class fj extends f${onBind(){var e,t,i;super.onBind();let{from:r,to:n}=fW(this.target,this.params.options,this.params),l=null!=(t=null==(e=this.target.context)?void 0:e.lastAttrs)?t:r;this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.from=l,this.to=n;let o=this.target.getFinalAttribute();o&&this.target.setAttributes(o),!1!==(null==(i=this.params.controlOptions)?void 0:i.immediatelyApply)&&this.target.setAttributes(l),this.determineUpdateFunction()}}class fG extends f${onBind(){var e,t,i;super.onBind();let{from:r,to:n}=(e=this.target,t=this.params.options,this.params,!1!==(null!=(i=null==t?void 0:t.overall)&&i)?fN(e,t):fZ(e,t));this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.from=null!=r?r:this.target.attribute,this.to=n,this.determineUpdateFunction()}}let fV=(e,t,i)=>{let r=e.getFinalAttribute().points,n={x:0,y:0};return r.forEach(e=>{n.x+=e.x,n.y+=e.y}),n.x/=r.length,n.y/=r.length,t&&t.center&&((0,sD.Z)(t.center.x)&&(n.x=t.center.x),(0,sD.Z)(t.center.y)&&(n.y=t.center.y)),"area"===e.type&&(n.x1=n.x,n.y1=n.y),r.map(e=>Object.assign({},e,n))},fU=(e,t,i)=>{let r=e.getFinalAttribute();return{from:{points:fV(e,t)},to:{points:r.points}}};class fK extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onUpdate(e,t,i){var r,n;let l=null==(r=this.from)?void 0:r.points,o=null==(n=this.to)?void 0:n.points;l&&o&&(this.target.attribute.points=l.map((e,i)=>nm(l[i],o[i],t)),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag())}}class fX extends fK{onBind(){var e;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:t,to:i}=fU(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(e=>null!=i[e]),this.from=t,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(e=this.params.controlOptions)?void 0:e.immediatelyApply)&&this.target.setAttributes(t)}else this.valid=!1}}class fY extends fK{onBind(){var e,t;if(super.onBind(),["area","line"].includes(this.target.type)){let i=this.target.getFinalAttribute(),{from:r,to:n}=(e=this.target,t=this.params.options,this.params,{from:{points:e.getFinalAttribute().points},to:{points:fV(e,t)}});this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.from=r||i,this.to=n}else this.valid=!1}}let fq=(e,t,i)=>e.getFinalAttribute().points.map(i=>{if(t&&"negative"===t.orient){let t=e.stage.viewWidth;return e.parent.parent.parent&&(t=e.parent.parent.parent.AABBBounds.width()),Object.assign(Object.assign({},i),{x:t,y:i.y,x1:t,y1:i.y1,defined:!1!==i.defined})}return Object.assign(Object.assign({},i),{x:0,y:i.y,x1:0,y1:i.y1,defined:!1!==i.defined})}),fJ=(e,t,i)=>{let r=e.getFinalAttribute();return{from:{points:fq(e,t)},to:{points:r.points}}};class fQ extends fK{onBind(){var e;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:t,to:i}=fJ(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(e=>null!=i[e]),this.from=t,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(e=this.params.controlOptions)?void 0:e.immediatelyApply)&&this.target.setAttributes(t)}else this.valid=!1}}class f0 extends fK{onBind(){var e,t;if(super.onBind(),["area","line"].includes(this.target.type)){let i=this.target.getFinalAttribute(),{from:r,to:n}=(e=this.target,t=this.params.options,this.params,{from:{points:e.getFinalAttribute().points},to:{points:fq(e,t)}});this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.from=r||i,this.to=n}else this.valid=!1}}let f1=(e,t,i)=>e.getFinalAttribute().points.map(i=>{if(t&&"negative"===t.orient){let t=e.stage.viewHeight;return e.parent.parent.parent&&(t=e.parent.parent.parent.AABBBounds.height()),Object.assign(Object.assign({},i),{x:i.x,y:t,x1:i.x1,y1:t,defined:!1!==i.defined})}return Object.assign(Object.assign({},i),{x:i.x,y:0,x1:i.x1,y1:0,defined:!1!==i.defined})}),f2=(e,t,i)=>{let r=e.getFinalAttribute();return{from:{points:f1(e,t)},to:{points:r.points}}};class f3 extends fK{onBind(){var e;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:t,to:i}=f2(this.target,this.params.options,this.params);this.props=i,this.propKeys=Object.keys(i).filter(e=>null!=i[e]),this.from=t,this.to=i;let r=this.target.getFinalAttribute();r&&this.target.setAttributes(r),!1!==(null==(e=this.params.controlOptions)?void 0:e.immediatelyApply)&&this.target.setAttributes(t)}else this.valid=!1}}class f4 extends fK{onBind(){var e,t;if(super.onBind(),["area","line","polygon"].includes(this.target.type)){let{from:i,to:r}=(e=this.target,t=this.params.options,this.params,{from:{points:e.getFinalAttribute().points},to:{points:f1(e,t)}});this.props=r,this.propKeys=Object.keys(r).filter(e=>null!=r[e]),this.from=null!=i?i:this.target.attribute,this.to=r}else this.valid=!1}}class f5 extends fr{constructor(e,t,i,r,n){super(e,t,i,r,n),this.keys=["clipRange"],this.from={clipRange:0}}onFirstRun(){var e;super.onFirstRun();let{clipDimension:t}=(null==(e=this.params)?void 0:e.options)||{};t&&(this.target.attribute.clipRangeByDimension=t)}}class f6 extends fn{constructor(e,t,i,r,n){super(e,t,i,r,n),this.keys=["clipRange"]}}let f8=e=>({type:"clipIn",options:{clipDimension:"horizontal"===e.direction?"y":"x"}}),f7={type:"fadeIn"},f9=e=>({type:"horizontal"===e.direction?"growPointsXIn":"growPointsYIn",options:{orient:"horizontal"===e.direction?"positive":"negative"}});class me extends pf{constructor(e,t,i,r,n){super(e,t,i,r,n),this.currentAnimationRatio=0,this.animationTime=0}onUpdate(e,t,i){super.onUpdate(e,t,i),this.currentAnimationRatio=t,this.animationTime=t*Math.PI*2}getAnimationTime(){return this.currentAnimationRatio>0?this.animationTime:Date.now()/1e3}afterStageRender(e,t){var i,r;return null==(r=null==(i=this.params)?void 0:i.callBack)?void 0:r.call(i,e,t,this.currentAnimationRatio,this.animationTime)}}let mt={appear:{duration:1e3,easing:"cubicOut"},update:{type:"update",duration:300,easing:"linear"},enter:{duration:300,easing:"linear"},exit:{duration:300,easing:"linear"},disappear:{duration:500,easing:"cubicIn"},state:{duration:300,easing:"linear"}},mi={appear:{type:"scaleIn"},enter:{type:"scaleIn"},exit:{type:"scaleOut"}},mr={appear:{type:"fadeIn"},enter:{type:"fadeIn"},exit:{type:"fadeOut"}},mn=()=>{hp.registerAnimation("scaleInOut",()=>mi)},ml=()=>{hp.registerAnimation("fadeInOut",()=>mr)},mo=()=>{hp.registerAnimation("cartesianGroupClip",e=>({appear:{custom:g7,customParameters:(t,i)=>({animationType:"in",group:i,direction:e.direction(),width:e.width(),height:e.height(),orient:e.orient()})}}))},ma=(e,t)=>({appear:function(e,t){switch(t){case"grow":return f9(e);case"fadeIn":return f7;default:return f8(e)}}(e,t),enter:{type:"fadeIn"},exit:{type:"fadeOut"},update:[{type:"update",options:{excludeChannels:["points","defined","segments"]}},{channel:["points","segments"],custom:fe,duration:mt.update.duration,easing:mt.update.easing,customParameters:{clipRangeByDimension:"horizontal"===e.direction?"y":"x"}}]}),ms=()=>{hp.registerAnimation("line",ma)},mh=()=>{hp.registerAnimation("area",ma)},md=()=>{gz.registerBuiltInAnimate("scaleIn",ft),gz.registerBuiltInAnimate("scaleOut",fi),gz.registerBuiltInAnimate("fadeIn",fl),gz.registerBuiltInAnimate("fadeOut",fo),gz.registerBuiltInAnimate("moveIn",fd),gz.registerBuiltInAnimate("moveOut",fu),gz.registerBuiltInAnimate("rotateIn",ff),gz.registerBuiltInAnimate("rotateOut",fm),gz.registerBuiltInAnimate("update",fb),gz.registerBuiltInAnimate("state",fy),gz.registerBuiltInAnimate("fromTo",fv)},mu=()=>{gz.registerBuiltInAnimate("growHeightIn",fC),gz.registerBuiltInAnimate("growHeightOut",fx),gz.registerBuiltInAnimate("growWidthIn",fS),gz.registerBuiltInAnimate("growWidthOut",fA),gz.registerBuiltInAnimate("growCenterIn",fT),gz.registerBuiltInAnimate("growCenterOut",fR)},mc=()=>{gz.registerBuiltInAnimate("growRadiusIn",fH),gz.registerBuiltInAnimate("growRadiusOut",fO),gz.registerBuiltInAnimate("growAngleIn",fj),gz.registerBuiltInAnimate("growAngleOut",fG)},mp=()=>{gz.registerBuiltInAnimate("growPointsIn",fX),gz.registerBuiltInAnimate("growPointsOut",fY),gz.registerBuiltInAnimate("growPointsXIn",fQ),gz.registerBuiltInAnimate("growPointsXOut",f0),gz.registerBuiltInAnimate("growPointsYIn",f3),gz.registerBuiltInAnimate("growPointsYOut",f4),gz.registerBuiltInAnimate("clipIn",f5),gz.registerBuiltInAnimate("clipOut",f6)},mg=()=>{gz.registerBuiltInAnimate("growPointsOut",fY)},mf=()=>{gz.registerBuiltInAnimate(dW,me)},mm=e=>{let t=(0,ag.IX)(e),i=[],r=[];return t.forEach(e=>{"empty"===e?i.push("view"):(0,r6.Z)(e)&&"none"!==e?e.includes("view:")?(r.push(e.replace("view:","")),i.push("view")):(r.push(e),i.push("self")):(0,nw.Z)(e)&&i.push("timeout")}),{eventNames:r,resetType:i}},mb=(e,t)=>{if(!t||!e)return null;let i={};return e.forEach(e=>{let r=e.stateStyle;r&&t.forEach(t=>{t&&r[t]&&(i[t]||(i[t]=[]),i[t].push(e.id))})}),i},my=(e,t)=>{if(!t||!t.length)return[];let i=[];return e.markIds?t.filter(t=>{e.markIds.includes(t.getProductId())&&i.push(t)}):e.markNames?t.forEach(t=>{e.markNames.includes(t.name)&&i.push(t)}):t.forEach(e=>{i.push(e)}),i},mv=e=>e.filterField?t=>{var i;return null==(i=hW(t))?void 0:i[e.filterField]}:t=>t.context[e.filterType],m_={highlightState:Q.STATE_HIGHLIGHT,blurState:Q.STATE_BLUR,trigger:"pointerover",triggerOff:"pointerout"};class mC{constructor(e){this._markSet=new co,this.options=e,e.marks&&e.marks.length&&e.marks.forEach(e=>{this.registerMark(e)})}getMarks(){return this._markSet.getMarks()}getMarksByState(e){if(this._markIdByState&&this._markSet){let t=this._markIdByState[e];return t?this.getMarks().filter(e=>e&&t.includes(e.id)):[]}return[]}registerMark(e){(0,ri.Z)(e)?e.forEach(e=>{this._markSet.addMark(e)}):this._markSet.addMark(e)}updateMarkIdByState(e){this._markIdByState=mb(this.getMarks(),e)}getMarkIdByState(){var e;return null!=(e=this._markIdByState)?e:{}}isGraphicInStateMark(e,t){var i;let r=this.getMarkIdByState();return r&&r[t]&&r[t].includes(null==(i=e.context)?void 0:i.markId)}isGraphicInMark(e){var t;return!!this._markSet.getMarkInId(null==(t=e.context)?void 0:t.markId)}getStartState(){return null}getResetState(){return null}init(){let e=this.getEvents();e&&this.options.event&&e.forEach(e=>{e.type&&e.handler&&((0,ri.Z)(e.type)?e.type.forEach(t=>{t&&"none"!==t&&this.options.event.on(t,e.handler)}):"none"!==e.type&&this.options.event.on(e.type,e.handler))})}release(){let e=this.getEvents();e&&this.options.event&&(null!=e?e:[]).forEach(e=>{e.type&&e.handler&&((0,ri.Z)(e.type)?e.type.forEach(t=>{t&&"none"!==t&&this.options.event.on(t,e.handler)}):"none"!==e.type&&this.options.event.off(e.type,e.handler))})}start(e){}reset(e){}dispatchEvent(e,t){this.options.event&&(this.options.event.emit(`${this.type}:${e}`,t),"start"===e&&this.options.onStart?this.options.onStart(t):"reset"===e&&this.options.onReset?this.options.onReset(t):"update"===e&&this.options.onUpdate?this.options.onUpdate(t):"end"===e&&this.options.onEnd&&this.options.onEnd(t))}}let mx={highlightState:Q.STATE_HIGHLIGHT,blurState:Q.STATE_BLUR,trigger:"pointerover",triggerOff:"pointerout"};class mw extends mC{constructor(e){super(e),this.type="element-highlight",this.resetAll=()=>{let{highlightState:e,blurState:t,interaction:i}=this.options;this._lastGraphic&&(i.clearAllStatesOfTrigger(this,e,t),this.dispatchEvent("reset",{graphics:[this._lastGraphic],options:this.options}),this._lastGraphic=null,i.setStatedGraphics(this,[]))},this.handleStart=e=>{this.start(e.item)},this.handleReset=e=>{let{interaction:t}=this.options,i=t.getStatedGraphics(this);if(!i||!i.length)return;let r=e.item,n=r&&this._markSet.getMarkInId(r.context.markId);(this._resetType.includes("view")&&!n||this._resetType.includes("self")&&n)&&this.resetAll()},this.options=Object.assign({},mx,e),this.updateMarkIdByState([this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getResetState(){return this.options.blurState}getEvents(){let e=this.options.triggerOff,t=[{type:this.options.trigger,handler:this.handleStart}],i=e;return(0,r6.Z)(e)&&e.includes("view:")?(i=e.replace("view:",""),this._resetType="view"):this._resetType="self",t.push({type:i,handler:this.handleReset}),t}start(e){if(e&&this._markSet.getMarkInId(e.context.markId)){let{highlightState:t,blurState:i,interaction:r}=this.options;if(this._lastGraphic===e)return;let n=r.updateStates(this,[e],r.getStatedGraphics(this),t,i);r.setStatedGraphics(this,n),this._lastGraphic=e,this.dispatchEvent("start",{graphics:n,options:this.options})}else this._lastGraphic&&"view"===this._resetType&&this.resetAll()}reset(e){e?this._markSet.getMarkInId(e.context.markId)&&e.removeState([this.options.highlightState,this.options.blurState]):this.resetAll()}}mw.type="element-highlight",mw.defaultOptions=mx;let mS={state:Q.STATE_SELECTED,trigger:"click"};class mA extends mC{constructor(e){super(e),this.type="element-select",this._resetType=[],this.resetAll=()=>{let{state:e,reverseState:t,interaction:i}=this.options,r=i.getStatedGraphics(this);r&&r.length&&(i.clearAllStatesOfTrigger(this,e,t),this.dispatchEvent("reset",{graphics:r,options:this.options}),i.setStatedGraphics(this,[]))},this.handleStart=e=>{this.start(e.item)},this.handleReset=e=>{let{interaction:t}=this.options,i=t.getStatedGraphics(this);if(!i||!i.length)return;let r=e.item,n=r&&this._markSet.getMarkInId(r.context.markId);(this._resetType.includes("view")&&!n||this._resetType.includes("self")&&n)&&this.resetAll()},this.options=Object.assign({},mS,e),this.updateMarkIdByState([this.options.state,this.options.reverseState])}getStartState(){return this.options.state}getResetState(){return this.options.reverseState}getEvents(){let e=this.options.triggerOff,t=this.options.trigger,i=[{type:t,handler:this.handleStart}],{eventNames:r,resetType:n}=mm(e);return r.forEach(e=>{e&&((0,ri.Z)(t)?!t.includes(e):e!==t)&&i.push({type:e,handler:this.handleReset})}),this._resetType=n,i}start(e){let{state:t,reverseState:i,isMultiple:r,interaction:n}=this.options,l=n.getStatedGraphics(this);if(e&&this._markSet.getMarkInId(e.context.markId))if(e.hasState(t)){if(this._resetType.includes("self")){let r=l&&l.filter(t=>t!==e);r&&r.length?n.setStatedGraphics(this,n.updateStates(this,r,l,t,i)):this.resetAll()}}else{this._timer&&clearTimeout(this._timer),e.addState(t,!0);let o=this.options.interaction.updateStates(this,r&&l?[...l,e]:[e],l,t,i);n.setStatedGraphics(this,o),this.dispatchEvent("start",{graphics:o,options:this.options}),this._resetType.includes("timeout")&&(this._timer=setTimeout(()=>{this.resetAll()},this.options.triggerOff))}else this._resetType.includes("view")&&l&&l.length&&this.resetAll()}reset(e){e?this._markSet.getMarkInId(e.context.markId)&&e.removeState([this.options.state,this.options.reverseState]):this.resetAll()}}mA.type="element-select",mA.defaultOptions=mS;class mk extends gL{constructor(e){super(),this.globalInstance=e}onInit(){this._plugins.forEach(e=>{e.onInit&&e.onInit(this)})}releaseAll(){super.releaseAll(),this.globalInstance=null}}var mM=function(e,t,i,r){return new(i||(i=Promise))(function(n,l){function o(e){try{s(r.next(e))}catch(e){l(e)}}function a(e){try{s(r.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}s((r=r.apply(e,t||[])).next())})},mT=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class mR{static useRegisters(e){e.forEach(e=>{"function"==typeof e?e():console.error("Invalid function:",e)})}static useChart(e){e.forEach(e=>hp.registerChart(e.type,e))}static useSeries(e){e.forEach(e=>hp.registerSeries(e.type,e))}static useComponent(e){e.forEach(e=>hp.registerComponent(e.type,e))}static useMark(e){e.forEach(e=>{var t;return hp.registerMark(null!=(t=e.constructorType)?t:e.type,e)})}static useLayout(e){e.forEach(e=>hp.registerLayout(e.type,e))}static registerDataSetTransform(e,t){hp.registerTransform(e,t)}static registerFunction(e,t){e&&t&&p4.instance().registerFunction(e,t)}static unregisterFunction(e){e&&p4.instance().unregisterFunction(e)}static getFunction(e){return e?p4.instance().getFunction(e):null}static getFunctionList(){return p4.instance().getFunctionNameList()}static registerMap(e,t,i){let r=hp.getImplementInKey("registerMap");r&&r(e,t,i)}static unregisterMap(e){let t=hp.getImplementInKey("unregisterMap");t&&t(e)}static getMap(e){return hY.get(e)}static registerSVG(e,t,i){let r=hp.getImplementInKey("registerSVG");r&&r(e,t,i)}static unregisterSVG(e){let t=hp.getImplementInKey("unregisterSVG");t&&t(e)}static hideTooltip(e=[]){hR.forEach(e=>{var t;return null==(t=null==e?void 0:e.hideTooltip)?void 0:t.call(e)},e)}static getLogger(){return t1.Y.getInstance()}getSpec(){return this._spec}getSpecInfo(){return this._specInfo}get event(){return this._event}getDataSet(){return this._dataSet}constructor(e,t){var i,r,n,l,o,a,s,h,d;this.id=sO(),this._userEvents=[],this._autoSize=!0,this._option={mode:su["desktop-browser"],onError:e=>{throw Error(e)},optimize:{disableCheckGraphicWidthOutRange:!0}},this._observer=null,this._context={},this._renderState=K.render,this._doResize=()=>{let{width:e,height:t}=this.getCurrentSize();this._currentSize.width===e&&this._currentSize.height===t||(this._currentSize={width:e,height:t},this.resizeSync(e,t))},this._renderSync=(e={})=>{var t;return this._beforeRender(e)&&(null==(t=this._compiler)||t.render(e.morphConfig),this._updateAnimateState(!1),this._afterRender()),this},this._updateSpec=(e,t=!1,i)=>{var r;this._reSetRenderState();let n=this._spec,l={changeBackground:!1,reTransformSpec:!1,change:!1,reMake:!1,reCompile:!1,reSize:!1,changeTheme:!1};if(!this._setNewSpec(e,t))return;if((0,dN.X)(n.theme,this._spec.theme)?(0,dN.X)(this._spec.background,n.background)||(l.reMake=!0,l.changeBackground=!0):l.changeTheme=!0,l.reSize=this._shouldChartResize(n),this._spec.type!==n.type)return null==(r=this._compiler)||r.updateLayoutTag(),l.reMake=!0,l.reTransformSpec=!0,l.change=!0,l.changeTheme=!0,l;this._initChartSpec(this._spec,"updateSpec");let o=cn(this._chart.updateSpec(this._spec),l);return i?Object.assign(Object.assign({},o),i):o},this.getTheme=(...e)=>{if(!this._currentTheme||!e||!e.length)return;this._cachedProcessedTheme||(this._cachedProcessedTheme={});let t=e.join(".");if(this._cachedProcessedTheme[t])return this._cachedProcessedTheme[t];let i=this._currentTheme;return e.forEach((t,r)=>{if(1!==r||"series"!==e[0]&&"component"!==e[0])i=null==i?void 0:i[t];else{let r="series"===e[0]?hp.getSeriesBuiltInTheme(t):hp.getComponentBuiltInTheme(t);i=i?hs({},r,i[t]):r}r===e.length-1&&(0,oV.Z)(i)&&(i=function e(t,i,r){if(!t)return t;i||(i=t.colorScheme),r||(r=t.token);let n={};return Object.keys(t).forEach(l=>{var o;let a=t[l];gB.includes(l)?n[l]=a:(0,sF.Z)(a)?hn(a)?n[l]=hr(a,i):a&&"token"===a.type&&a.key?n[l]=(o=r)&&a.key in o?o[a.key]:a.default:n[l]=e(a,i,r):n[l]=a}),n}({[t]:i},this._currentTheme.colorScheme,this._currentTheme.token)[t])}),this._cachedProcessedTheme[t]=i,i},function e(t,i=!1){if(null===t||"object"!=typeof t)return t;for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(void 0===t[r]){delete t[r];continue}i&&e(t[r],i)}}(t),this._option=Object.assign(Object.assign({},this._option),t),(null==t?void 0:t.optimize)&&(this._option.optimize=Object.assign(Object.assign({},this._option.optimize),t.optimize)),this._onError=null==(i=this._option)?void 0:i.onError;let u=this._option,{dom:c,renderCanvas:p,mode:g,stage:f,poptip:m}=u,b=mT(u,["dom","renderCanvas","mode","stage","poptip"]),y=sq(g);if(y?gE():"node"===g&&gP(),y&&c&&(this._container=(0,r6.Z)(c)?sI.getElementById(c):c),p&&(this._canvas=p),f&&(this._stage=f),"node"!==g&&!this._container&&!this._canvas&&!this._stage)return void(null==(r=this._option)||r.onError("please specify container or renderCanvas!"));this._viewBox=this._option.viewBox,this._currentThemeName=hE.getCurrentThemeName(),this._setNewSpec(e),this._updateCurrentTheme(),this._currentSize=this.getCurrentSize();let v=[];!1!==m&&v.push("poptipForText"),"sankey"===e.type&&v.push("scrollbar");let _=new t1.Y(null!=(n=this._option.logLevel)?n:t1.h.Error);t1.Y.setInstance(_),(null==(l=this._option)?void 0:l.onError)&&_.addErrorHandler((...e)=>{var t,i;null==(i=null==(t=this._option)?void 0:t.onError)||i.call(t,...e)}),this._compiler=new dZ({dom:null!=(o=this._container)?o:"none",canvas:p},Object.assign(Object.assign({mode:this._option.mode,stage:f,pluginList:v},b),{background:this._getBackground(),onError:this._onError})),this._compiler.setSize(this._currentSize.width,this._currentSize.height),this._eventDispatcher=new hj(this,this._compiler),this._event=new hB(this._eventDispatcher,g),this._compiler.initView(),this._compiler.updateLayoutTag(),this._setFontFamilyTheme(this.getTheme("fontFamily")),this._initDataSet(this._option.dataSet),this._autoSize=!!y&&(null==(s=null!=(a=e.autoFit)?a:this._option.autoFit)||s),this._bindResizeEvent(),this._bindViewEvent(),this._initChartPlugin(),hR.registerInstance(this),null==(d=null==(h=this._option.performanceHook)?void 0:h.afterCreateVChart)||d.call(h,this)}_setNewSpec(e,t){return!!e&&((0,r6.Z)(e)&&(e=JSON.parse(e)),t&&this._originalSpec&&(e=hs({},this._originalSpec,e)),this._originalSpec=e,this._spec=this._getSpecFromOriginalSpec(),!0)}_getSpecFromOriginalSpec(){var e;let t=function e(t,i={data:e=>e}){if(!t)return t;if(t.constructor===Object){let r={};for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(i[n]){r[n]=i[n](t[n]);continue}r[n]=e(t[n],i)}return r}return(0,ri.Z)(t)?t.map(t=>e(t,i)):t}(this._originalSpec);return t.data=null!=(e=t.data)?e:[],t}_initChartSpec(e,t){var i,r;mR.getFunctionList()&&mR.getFunctionList().length&&(e=function e(t,i){if(!t)return t;if((0,sF.Z)(t)){let r={};for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if((0,r6.Z)(t[n])&&i.getFunction(t[n])){r[n]=i.getFunction(t[n]);continue}r[n]=e(t[n],i)}return r}return(0,ri.Z)(t)?t.map(t=>e(t,i)):t}(e,mR)),this._spec=e,this._chartSpecTransformer||(this._chartSpecTransformer=hp.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),null==(i=this._chartSpecTransformer)||i.transformSpec(this._spec),this._chartPluginApply("onAfterChartSpecTransform",this._spec,t),this._specInfo=null==(r=this._chartSpecTransformer)?void 0:r.transformModelSpec(this._spec),this._chartPluginApply("onAfterModelSpecTransform",this._spec,this._specInfo,t)}_updateSpecInfo(){var e;this._chartSpecTransformer||(this._chartSpecTransformer=hp.createChartSpecTransformer(this._spec.type,this._getChartOption(this._spec.type))),this._specInfo=null==(e=this._chartSpecTransformer)?void 0:e.createSpecInfo(this._spec)}_initChart(e){var t,i,r;if(!this._compiler)return void(null==(t=this._option)||t.onError("compiler is not initialized"));if(this._chart)return void(null==(i=this._option)||i.onError("chart is already initialized"));let n=hp.createChart(e.type,e,this._getChartOption(e.type));n?(this._chart=n,this._chart.setCanvasRect(this._currentSize.width,this._currentSize.height),this._chart.created(this._chartSpecTransformer),this._chart.init(),this._event.emit(N.initialized,{chart:n,vchart:this})):null==(r=this._option)||r.onError("init chart fail")}_releaseData(){this._dataSet&&(this._dataSet.dataViewMap={},this._dataSet=null)}_bindViewEvent(){var e,t;this._compiler&&(null==(t=null==(e=this._compiler.getStage())?void 0:e.getTimeline())||t.on("animationEnd",()=>{this._event.emit(N.animationFinished,{chart:this._chart,vchart:this})}))}_bindResizeEvent(){var e,t;if(this._autoSize){if(this._onResize=(0,hO.Z)(this._doResize,null!=(e=this._option.resizeDelay)?e:100),this._container){let e=window.ResizeObserver;e&&(this._observer=new e(this._onResize),null==(t=this._observer)||t.observe(this._container))}window.addEventListener("resize",this._onResize)}}_unBindResizeEvent(){this._autoSize&&(window.removeEventListener("resize",this._onResize),this._observer&&(this._observer.disconnect(),this._observer=null))}getCurrentSize(){var e,t,i,r;return cr(this._spec,{container:this._container,canvas:this._canvas,mode:this._getMode(),modeParams:this._option.modeParams},{width:null!=(t=null==(e=this._currentSize)?void 0:e.width)?t:500,height:null!=(r=null==(i=this._currentSize)?void 0:i.height)?r:500})}_initDataSet(e){for(let t in this._dataSet=e instanceof tp.q?e:new tp.q,hX(this._dataSet,"dataview",tg.i),hX(this._dataSet,"array",c),hK(this._dataSet,"copyDataView",h1),hp.transforms)hK(this._dataSet,t,hp.transforms[t]);for(let e in hp.dataParser)hX(this._dataSet,e,hp.dataParser[e])}updateCustomConfigAndRerender(e,t,i={}){if(!this._isReleased&&e)return(0,nr.Z)(e)&&(e=e()),e.reAnimate&&(this.stopAnimation(),this._updateAnimateState(!0)),this._reCompile(e),t?this._renderSync(i):this._renderAsync(i)}_updateCustomConfigAndRecompile(e,t={}){return!!e&&(this._reCompile(e),this._beforeRender(t))}_reCompile(e,t){var i,r,n,l,o,a,s;if(e.reMake&&(this._releaseData(),this._initDataSet(),null==(i=this._chart)||i.release(),this._chart=null),e.reTransformSpec&&(this._chartSpecTransformer=null),e.changeTheme?(this._setCurrentTheme(),this._setFontFamilyTheme(this.getTheme("fontFamily"))):e.changeBackground&&(null==(r=this._compiler)||r.setBackground(this._getBackground())),e.reMake?(null==(n=this._compiler)||n.releaseGrammar(),this._userEvents.forEach(e=>{var t;return null==(t=this._event)?void 0:t.on(e.eType,e.query,e.handler)})):e.reCompile&&(null==(l=this._compiler)||l.clear({chart:this._chart,vChart:this}),null==(o=this._compiler)||o.compile({chart:this._chart,vChart:this})),e.reSize){let{width:e,height:t}=this.getCurrentSize();this._currentSize={width:e,height:t},null==(a=this._chart)||a.onResize(e,t,!1),null==(s=this._compiler)||s.resize(e,t,!1)}}_beforeRender(e={}){var t,i,r,n,l,o,a,s;if(this._isReleased)return!1;if(this._chart)return!0;let{transformSpec:h,actionSource:d}=e;return h&&this._initChartSpec(this._spec,"render"),this._chartPluginApply("onBeforeInitChart",this._spec,d),null==(i=null==(t=this._option.performanceHook)?void 0:t.beforeInitializeChart)||i.call(t,this),this._initChart(this._spec),null==(n=null==(r=this._option.performanceHook)?void 0:r.afterInitializeChart)||n.call(r,this),!(!this._chart||!this._compiler)&&(this._chartPluginApply("onAfterInitChart",this._spec,d),null==(o=null==(l=this._option.performanceHook)?void 0:l.beforeCompileToVGrammar)||o.call(l,this),this._compiler.compile({chart:this._chart,vChart:this},e),null==(s=null==(a=this._option.performanceHook)?void 0:a.afterCompileToVGrammar)||s.call(a,this),!0)}_afterRender(){return!this._isReleased&&(this._event.emit(N.rendered,{chart:this._chart,vchart:this}),!0)}renderSync(e){return this._renderSync({morphConfig:e,transformSpec:!0,actionSource:"render"})}renderAsync(e){return mM(this,void 0,void 0,function*(){return this._renderAsync({morphConfig:e,transformSpec:!0,actionSource:"render"})})}_renderAsync(e={}){return mM(this,void 0,void 0,function*(){return this._renderSync(e)})}_updateAnimateState(e){var t,i;if(this.isAnimationEnable()){let r=t=>{var i;let r=null==(i=t.context)?void 0:i.diffState;return e?"exit"===r?V.none:V.appear:r};null==(t=this._chart)||t.getAllRegions().forEach(e=>{e.updateAnimateStateCallback(r)}),null==(i=this._chart)||i.getAllComponents().forEach(e=>{e.updateAnimateStateCallback(r)})}}release(){var e,t,i,r;(null==(e=this._onResize)?void 0:e.cancel)&&this._onResize.cancel(),this._chartPluginApply("releaseAll"),this._chartPlugin=null,this._chartSpecTransformer=null,null==(t=this._chart)||t.release(),null==(i=this._eventDispatcher)||i.release(),null==(r=this._compiler)||r.release(),this._unBindResizeEvent(),this._releaseData(),this._onError=null,this._onResize=null,this._container=null,this._currentTheme=null,this._cachedProcessedTheme=null,this._option=null,this._chart=null,this._compiler=null,this._spec=null,this._specInfo=null,this._originalSpec=null,this._userEvents=null,this._event=null,this._eventDispatcher=null,this._isReleased=!0,hR.unregisterInstance(this)}updateData(e,t,i,r){return mM(this,void 0,void 0,function*(){return this.updateDataSync(e,t,i,r)})}_updateDataById(e,t,i){let r=this._spec.data.find(t=>t.name===e||t.id===e);r?r.id===e?r.values=t:r.name===e&&r.parse(t,i):(0,ri.Z)(t)?this._spec.data.push({id:e,values:t}):this._spec.data.push(t)}updateDataInBatches(e){return mM(this,void 0,void 0,function*(){return this._chart?(this._chart.updateFullData(e.map(({id:e,data:t,options:i})=>({id:e,values:t,parser:i}))),this._chart.updateGlobalScaleDomain(),this._compiler.render()):(this._spec.data=(0,ag.IX)(this._spec.data),e.forEach(({id:e,data:t,options:i})=>{this._updateDataById(e,t,i)})),this})}updateDataSync(e,t,i,r){return this._reSetRenderState(),(0,r5.Z)(this._dataSet)||(this._chart?(this._chart.updateData(e,t,!0,i),(null==r?void 0:r.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._compiler.render()):(this._spec.data=(0,ag.IX)(this._spec.data),this._updateDataById(e,t,i))),this}updateFullDataSync(e,t=!0,i){if(this._reSetRenderState(),this._chart)return this._chart.updateFullData(e),t&&((null==i?void 0:i.reAnimate)&&(this.stopAnimation(),this._updateAnimateState(!0)),this._compiler.render()),this;let r=(0,ag.IX)(this._spec.data);return(0,ag.IX)(e).forEach(e=>{let{id:t,values:i,parser:n,fields:l}=e,o=r.find(e=>e.name===t);if(o)o instanceof tf.V?(o.setFields((0,hQ.Z)(l)),o.parse(i,(0,hQ.Z)(n))):(o.values=i,(0,oV.Z)(n)&&(o.parser=n),(0,oV.Z)(l)&&(o.fields=l));else{let t=h3(e,this._dataSet,r);(0,ri.Z)(this._spec.data)&&this._spec.data.push(t)}}),this}updateFullData(e,t=!0){return mM(this,void 0,void 0,function*(){return this.updateFullDataSync(e,t)})}updateSpec(e,t=!1,i,r){return mM(this,void 0,void 0,function*(){let n=this._updateSpec(e,t,r);return n&&(yield this.updateCustomConfigAndRerender(n,!1,{morphConfig:i,transformSpec:n.reTransformSpec,actionSource:"updateSpec"})),this})}updateSpecSync(e,t=!1,i,r){let n=this._updateSpec(e,t,r);return n&&this.updateCustomConfigAndRerender(n,!0,{morphConfig:i,transformSpec:n.reTransformSpec,actionSource:"updateSpec"}),this}updateSpecAndRecompile(e,t=!1,i={}){let r=this._updateSpec(e,t);return this._updateCustomConfigAndRecompile(r,Object.assign({actionSource:"updateSpecAndRecompile"},i))}updateModelSpec(e,t,i=!1,r){return mM(this,void 0,void 0,function*(){return this.updateModelSpecSync(e,t,i,r)})}updateModelSpecSync(e,t,i=!1,r){var n,l;if(!t||!this._spec)return this;if((0,r6.Z)(t)&&(t=JSON.parse(t)),(0,nr.Z)(e)||(n=this._spec,l=t,Object.keys(n).forEach(t=>{if((0,r9.Z)(e))e.type===t&&((0,ri.Z)(n[t])?n[t].length>=e.index&&(n[t][e.index]=i?hs({},n[t][e.index],l):l):n[t]=i?hs({},n[t],l):l);else if((0,ri.Z)(n[t])){let r=n[t].findIndex(t=>t.id===e);r>=0&&(n[t][r]=i?hs({},n[t][r],l):l)}else n.id===e&&(n[t]=i?hs({},n[t],l):l)})),this._chart){let n=this._chart.getModelInFilter(e);if(n)return this._updateModelSpec(n,t,!0,i,r)}return this}_updateModelSpec(e,t,i=!1,r=!1,n){r&&(t=hs({},e.getSpec(),t));let l=e.updateSpec(t);return e.reInit(t),(l.change||l.reCompile||l.reMake||l.reSize||l.reRender)&&this._chart.reDataFlow(),this.updateCustomConfigAndRerender(l,i,{morphConfig:n,transformSpec:!1,actionSource:"updateModelSpec"})}resize(e,t){return mM(this,void 0,void 0,function*(){return this.resizeSync(e,t)})}resizeSync(e,t){var i,r;return this._beforeResize(e,t)?(null==(r=(i=this._compiler).resize)||r.call(i,e,t),this._afterResize()):this}_beforeResize(e,t){var i,r,n,l;if(!this._chart||!this._compiler)return!1;let o=this._chart.getCanvasRect();return(!o||o.width!==e||o.height!==t)&&(this._chartPluginApply("onBeforeResize",e,t),null==(r=null==(i=this._option.performanceHook)?void 0:i.beforeResizeWithUpdate)||r.call(i,this),this._chart.onResize(e,t,!1),null==(l=null==(n=this._option.performanceHook)?void 0:n.afterResizeWithUpdate)||l.call(n,this),!0)}_afterResize(){return this._isReleased||this._event.emit(N.afterResize,{chart:this._chart}),this}updateViewBox(e,t=!0,i=!0){return this._chart&&this._compiler&&(this._viewBox=e,this._chart.updateViewBox(e,i),i&&(this._compiler.render(),this._chart.onEvaluateEnd()),this._compiler.updateViewBox(e,t)),this}on(e,t,i){var r;this._userEvents&&(this._userEvents.push({eType:e,query:"function"==typeof t?null:t,handler:"function"==typeof t?t:i}),null==(r=this._event)||r.on(e,t,i))}off(e,t){var i;if(this._userEvents&&0!==this._userEvents.length)if(t){let r=this._userEvents.findIndex(i=>i.eType===e&&i.handler===t);r>=0&&(this._userEvents.splice(r,1),null==(i=this._event)||i.off(e,t))}else this._userEvents.forEach(t=>{var i;t.eType===e&&(null==(i=this._event)||i.off(e,t.handler))}),this._userEvents=this._userEvents.filter(t=>t.eType!==e)}updateState(e,t){this._chart&&this._chart.updateState(e,t)}setSelected(e,t,i){this._chart&&this._chart.setSelected(e,t,i)}setHovered(e,t,i){this._chart&&this._chart.setHovered(e,t,i)}clearState(e){this._chart&&this._chart.clearState(e)}clearAllStates(){this._chart&&this._chart.clearAllStates()}clearSelected(){this._chart&&this._chart.clearSelected()}clearHovered(){this._chart&&this._chart.clearHovered()}_updateCurrentTheme(e){var t,i,r,n;let l,o=this._option.theme,a=null==(t=this._spec)?void 0:t.theme,s=null==(i=this._spec)?void 0:i.type;e&&(this._currentThemeName=e);let h=(e,t)=>{var i;return(null==(i=t.chart)?void 0:i[e])&&(t=hg({},t,t.chart[e])),t};if((0,d$.Z)(o)&&(0,d$.Z)(a))l=hP(this._currentThemeName),this._currentTheme=h(s,l);else if((0,r6.Z)(o)&&(!a||(0,r6.Z)(a))||(0,r6.Z)(a)&&(!o||(0,r6.Z)(o))){let e=hg({},hP(this._currentThemeName),hP(o),hP(a));this._currentTheme=h(s,e)}else{let e=hg({},hP(this._currentThemeName),hP(o),hP(a));this._currentTheme=h(s,e)}this._cachedProcessedTheme=null,n=this.getTheme("component","poptip"),(0,ha.Z)(dG.poptip,dj,n),null==(r=this._compiler)||r.setBackground(this._getBackground())}_shouldChartResize(e){var t,i;let r=!1;(0,r5.Z)(this._spec.width)?(0,r5.Z)(e.width)||(this._spec.width=e.width):this._spec.width!==e.width&&(r=!0),(0,r5.Z)(this._spec.height)?(0,r5.Z)(e.height)||(this._spec.height=e.height):this._spec.height!==e.height&&(r=!0);let n=this._autoSize;return this._autoSize=!!sq(this._option.mode)&&(null==(i=null!=(t=this._spec.autoFit)?t:this._option.autoFit)||i),this._autoSize!==n&&(r=!0),r}_getBackground(){return("string"==typeof this._spec.background||(0,r9.Z)(this._spec.background)&&this._spec.background.gradient?this._spec.background:null)||this.getTheme("background")||this._option.background}getCurrentTheme(){return hP(this._currentThemeName)}getCurrentThemeName(){return this._currentThemeName}setCurrentTheme(e){return mM(this,void 0,void 0,function*(){return this.setCurrentThemeSync(e)})}setCurrentThemeSync(e){if(!hE.themeExist(e))return this;let t=this._setCurrentTheme(e);return this._setFontFamilyTheme(this.getTheme("fontFamily")),this.updateCustomConfigAndRerender(t,!0,{transformSpec:!1,actionSource:"setCurrentTheme"}),this}_setCurrentTheme(e){var t;return this._updateCurrentTheme(e),this._initChartSpec(this._getSpecFromOriginalSpec(),"setCurrentTheme"),null==(t=this._chart)||t.setCurrentTheme(),{change:!0,reMake:!1}}_setFontFamilyTheme(e){var t;e&&(null==(t=this.getStage())||t.setTheme({text:{fontFamily:e},richtext:{fontFamily:e}}))}_getTooltipComponent(){var e;return null==(e=this._chart)?void 0:e.getComponentsByType(sc.tooltip)[0]}setTooltipHandler(e){var t,i;this._context.tooltipHandler=e;let r=this._getTooltipComponent();r&&(null==(i=null==(t=r.tooltipHandler)?void 0:t.release)||i.call(t),r.tooltipHandler=e)}getTooltipHandlerByUser(){var e;return null==(e=this._context)?void 0:e.tooltipHandler}getTooltipHandler(){let e=this._getTooltipComponent();return e?e.tooltipHandler:this._context.tooltipHandler}showTooltip(e,t){var i;let r=this._getTooltipComponent();return null!=(i=(0,oV.Z)(e)&&"none"!==(null==r?void 0:r.showTooltip(e,t)))&&i}hideTooltip(){var e;let t=this._getTooltipComponent();return null!=(e=null==t?void 0:t.hideTooltip())&&e}getLegendDataById(e){var t;let i=null==(t=this._chart)?void 0:t.getComponentByUserId(e);return i?i.getLegendData():[]}getLegendDataByIndex(e=0){var t;let i=null==(t=this._chart)?void 0:t.getComponentsByType(sc.discreteLegend);return i&&i[e]?i[e].getLegendData():[]}getLegendSelectedDataById(e){var t;let i=null==(t=this._chart)?void 0:t.getComponentByUserId(e);return i?i.getSelectedData():[]}getLegendSelectedDataByIndex(e=0){var t;let i=null==(t=this._chart)?void 0:t.getComponentsByType(sc.discreteLegend);return i&&i[e]?i[e].getSelectedData():[]}setLegendSelectedDataById(e,t){var i;let r=null==(i=this._chart)?void 0:i.getComponentByUserId(e);r&&r.setSelectedData(t)}setLegendSelectedDataByIndex(e=0,t){var i;let r=null==(i=this._chart)?void 0:i.getComponentsByType(sc.discreteLegend);r&&r[e]&&r[e].setSelectedData(t)}getDataURL(){var e;return mM(this,void 0,void 0,function*(){let t=this.getStage();if(this._chart&&t){t.render();let e=this._chart.getCanvas();return yield function(e,t){var i,r,n,l,o;return r=this,n=void 0,l=void 0,o=function*(){if(!e)return"";try{if(void 0!==OffscreenCanvas&&e instanceof OffscreenCanvas)return new Promise(t=>{e.convertToBlob().then(e=>{let i=new FileReader;i.readAsDataURL(e),i.onload=()=>{t(i.result)}})})}catch(e){(null!=(i=null==t?void 0:t.onError)?i:s2)(`getCanvasDataURL error : ${e.toString()}`)}return e.toDataURL()},new(l||(l=Promise))(function(e,t){function i(e){try{s(o.next(e))}catch(e){t(e)}}function a(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):((r=t.value)instanceof l?r:new l(function(e){e(r)})).then(i,a)}s((o=o.apply(r,n||[])).next())})}(e,{onError:this._onError})}return null==(e=this._option)||e.onError(ReferenceError("render is not defined")),null})}exportImg(e){var t,i;return mM(this,void 0,void 0,function*(){if(!sq(this._option.mode))return void(null==(t=this._option)||t.onError(TypeError("non-browser environment can not export img")));let r=yield this.getDataURL();r?function(e="vchart",t){let i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("target","_blank"),i.setAttribute("download",`${e}.png`),i.dispatchEvent(new MouseEvent("click"))}(e,r):null==(i=this._option)||i.onError(ReferenceError("render is not defined"))})}exportCanvas(){var e;let t=this.getStage();if(this._chart&&t)return t.toCanvas();null==(e=this._option)||e.onError(ReferenceError("render is not defined"))}getImageBuffer(){var e,t;if("node"!==this._option.mode)return void(null==(e=this._option)||e.onError(TypeError("getImageBuffer() now only support node environment.")));let i=this.getStage();return i?(i.render(),i.window.getImageBuffer()):(null==(t=this._option)||t.onError(ReferenceError("render is not defined")),null)}setLayout(e){var t;this._option.layout=e,null==(t=this._chart)||t.setLayout(e)}reLayout(){var e;this._chart.resetLayoutItemTag(),null==(e=this._chart)||e.setLayoutTag(!0)}getCompiler(){return this._compiler}getChart(){return this._chart}getStage(){return this._compiler.getStage()}getCanvas(){var e;return null==(e=this._compiler)?void 0:e.getCanvas()}getContainer(){var e;let t;return(0,oV.Z)(this._container)?this._container:(t=(0,r6.Z)(this._canvas)?sI.getElementById(this._canvas):this._canvas,(0,oV.Z)(t)?t.parentElement:null==(e=this.getCanvas())?void 0:e.parentElement)}getComponents(){return this._chart.getAllComponents()}getScale(e){var t;let i=null==(t=this._chart)?void 0:t.getGlobalScale();return null==i?void 0:i.getScale(e)}setDimensionIndex(e,t={}){var i;return null==(i=this._chart)?void 0:i.setDimensionIndex(e,t)}showCrosshair(e){var t;null==(t=this._chart)||t.showCrosshair(e)}stopAnimation(){var e;null==(e=this.getStage())||e.stopAnimation(!0)}reRunNormalAnimation(){var e;null==(e=this.getStage())||e.reApplyAnimationState("normal",!0)}pauseAnimation(){var e;null==(e=this.getStage())||e.pauseAnimation(!0)}resumeAnimation(){var e;null==(e=this.getStage())||e.resumeAnimation(!0)}convertDatumToPosition(e,t={},i=!1,r){var n;let l;if(!this._chart||(0,d$.Z)(e))return null;let{seriesId:o,seriesIndex:a=0}=t;if((0,oV.Z)(o)?l=this._chart.getSeriesInUserId(o):(0,oV.Z)(a)&&(l=null==(n=this._chart.getSeriesInIndex([a]))?void 0:n[0]),l){let t,n=Object.keys(e),o=l.getViewData().latestData.find(t=>n.every(i=>t[i]==e[i])),a=l.getRegion().getLayoutStartPoint();return(t=o?l.dataToPosition(o,r):l.dataToPosition(e,r))?sV(t,a,i):null}return null}convertValueToPosition(e,t,i=!1){var r,n;let l;if(!this._chart||(0,r5.Z)(e)||(0,d$.Z)(t))return null;if(!(0,ri.Z)(e)){let n,{axisId:l,axisIndex:o}=t;if((0,oV.Z)(l)?n=this._chart.getComponentsByKey("axes").find(e=>e.userId===l):(0,oV.Z)(o)&&(n=null==(r=this._chart.getComponentsByKey("axes"))?void 0:r[o]),!n)return s1("Please check whether the `axisId` or `axisIndex` is set!"),null;let a=null==n?void 0:n.valueToPosition(e);if(i){let e=n.getLayoutStartPoint(),t=n.getOrient();return a+("bottom"===t||"top"===t?e.x:e.y)}return a}let{seriesId:o,seriesIndex:a}=t;return(0,oV.Z)(o)?l=this._chart.getSeriesInUserId(o):(0,oV.Z)(a)&&(l=null==(n=this._chart.getSeriesInIndex([a]))?void 0:n[0]),l?sV(l.valueToPosition(e[0],e[1]),l.getRegion().getLayoutStartPoint(),i):(s1("Please check whether the `seriesId` or `seriesIndex` is set!"),null)}getFunction(e){return p4.instance().getFunction(e)}registerFunction(e,t){e&&t&&p4.instance().registerFunction(e,t)}unregisterFunction(e){e&&p4.instance().unregisterFunction(e)}getFunctionList(){return p4.instance().getFunctionNameList()}setRuntimeSpec(e){this._spec=e,this._updateSpecInfo()}updateIndicatorDataById(e,t){var i;let r=null==(i=this._chart)?void 0:i.getComponentByUserId(e);r&&r.updateDatum(t)}updateIndicatorDataByIndex(e=0,t){var i;let r=null==(i=this._chart)?void 0:i.getComponentsByType(sc.indicator);r&&r[e]&&r[e].updateDatum(t)}geoZoomByIndex(e=0,t,i){this._geoZoomByQuery({regionIndex:e},t,i)}geoZoomById(e,t,i){this._geoZoomByQuery({regionId:e},t,i)}_geoZoomByQuery(e,t,i){var r,n;let l=null==(r=this._chart)?void 0:r.getRegionsInQuerier(e)[0],o=null==(n=this._chart)?void 0:n.getComponentsByType(sc.geoCoordinate),a=null==o?void 0:o.find(e=>{var t;return null==(t=e.getRegions())?void 0:t.includes(l)});a&&a.dispatchZoom(t,i)}_initChartPlugin(){let e=hp.getChartPlugins();e.length>0&&(this._chartPlugin=new gF(this),this._chartPlugin.load(e.map(e=>new e)),this._chartPluginApply("onInit",this._spec));let t=hp.getVChartPlugins();t.length>0&&(this._vChartPlugin=new mk(this),this._vChartPlugin.load(t.map(e=>new e)),this._vChartPlugin.onInit())}_chartPluginApply(e,...t){this._chartPlugin&&this._chartPlugin[e]&&this._chartPlugin[e].apply(this._chartPlugin,t)}_getMode(){return this._option.mode||su["desktop-browser"]}isAnimationEnable(){return"animation"in this._option?!!this._option.animation:!1!==this._spec.animation}_getChartOption(e){return{type:e,globalInstance:this,eventDispatcher:this._eventDispatcher,dataSet:this._dataSet,container:this._container,canvas:this._canvas,map:new Map,mode:this._getMode(),modeParams:this._option.modeParams,getCompiler:()=>this._compiler,viewBox:this._viewBox,getTheme:this.getTheme,getSpecInfo:()=>{var e;return null!=(e=this._specInfo)?e:{}},layout:this._option.layout,onError:this._onError,disableTriggerEvent:!0===this._option.disableTriggerEvent,componentShowContent:this._option.componentShowContent}}runDisappearAnimation(){this._renderState=K.disappear,this.getStage().eventSystem.pauseTriggerEvent(),this.getStage().applyAnimationState(["disappear"],[{name:"disappear",animation:this._compiler.stateAnimationConfig.disappear}])}_reSetRenderState(){this._renderState=K.render,this.getStage().eventSystem.resumeTriggerEvent()}}mR.InstanceManager=hR,mR.ThemeManager=hE,mR.globalConfig={uniqueTooltip:!0},mR.Utils={measureText:(e,t,i,r)=>p3(t,i,r).measure(e)},mR.vglobal=sI,hp.registerRegion("region",cm),hp.registerLayout("base",cA),pj(),hp.registerStageEventPlugin("gesture",g5),hp.registerInteractionTrigger(mw.type,mw),hp.registerInteractionTrigger(mA.type,mA),hS(gI.name,gI);var mE=i(93651),mP=i(34276);let mB=rN.Yt;function mI(e,t){let i=[];return e.forEach(e=>{let r=+e[t];(0,sD.Z)(r)&&i.push(r)}),0===i.length?null:(0,ag.iH)(i)}function mL(e,t){let i=[];return e.forEach(e=>{let r=+e[t];(0,sD.Z)(r)&&i.push(r)}),0===i.length?null:(0,ag.CE)(i)}function mF(e,t){return e.reduce((e,i)=>{let r=t?+i[t]:+i;return(0,sD.Z)(r)&&(e+=r),e},0)}function mH(e,t){let i=0,r=0;return e.forEach(e=>{let n=t?+e[t]:+e;(0,sD.Z)(n)&&(i+=n,r++)}),i/r}function mO(e,t){let i=mH(e,t);return e.length<=1?0:e.reduce((e,r)=>e+(t?+r[t]:r-i)**2,0)/(e.length-1)}function mD(e,t){let i=mz(e),r=mz(t),n=Math.asin((e.x*t.y-t.x*e.y)/i/r),l=Math.acos((e.x*t.x+e.y*t.y)/i/r);return n<0?-l:l}function mz(e,t={x:0,y:0}){return il.HL.distancePP(e,t)}function mW(e){return(0,sD.Z)(e.x)&&(0,sD.Z)(e.y)}function mZ(e,t){for(let i=0;i<t.length;i++){let r=t[i],n=function(e,t){return e.find(e=>e.key===t)}(e,r.key);n?n.operations=[...new Set(n.operations.concat(r.operations))]:e.push(r)}return e}function mN(e,t){var i;if(!e)return null!=t?t:null;let r=e.getFields();return r&&r[t]?null!=(i=r[t].alias)?i:t:null!=t?t:null}function m$(e,t,i){let r=e.getStackSort(),n={},l=null;return r&&(l={},e.getSeries().forEach(e=>{let t=e.getSeriesField();if(t){let i=e.getRawDataStatisticsByField(t);i.values&&(l[t]||(l[t]={lastIndex:0,sort:{}}),i.values.forEach((e,i)=>{e in l[t].sort||(l[t].sort[e]=l[t].lastIndex,l[t].lastIndex++)}))}})),e.getSeries().forEach(e=>{var r;let o=e.getStackData(),a=e.getStackValue(),s=e.getStackValueField(),h=!i||i(e);o&&s&&h&&(n[a]=null!=(r=n[a])?r:{groupField:o.groupField,nodes:{}},function e(t,i,r,n,l,o,a){var s;if("values"in i)if(l&&i.values.forEach(e=>e[dC]=function(e){if((0,sD.Z)(e))return e;let t=+e;return(0,sD.Z)(t)?t:0}(e[n])),r.series.push({s:t,values:i.values}),o){let e=t.getSeriesField();i.values.forEach(i=>{r.sortDatums.push({series:t,datum:i,index:e?o[e].sort[i[e]]:0})})}else r.values.push(...i.values);else for(let h in i.nodes){let d=a?`${a}_${h}`:h;r.nodes[h]||(r.nodes[h]={values:[],series:[],nodes:{},sortDatums:[],key:d},(0,oV.Z)(null==(s=i.nodes[h])?void 0:s.groupField)&&(r.nodes[h].groupField=i.nodes[h].groupField)),e(t,i.nodes[h],r.nodes[h],n,l,o,d)}}(e,o,n[a],s,t,l))}),r?function e(t,i){var r;for(let n in t)(null==(r=t[n].sortDatums)?void 0:r.length)?(t[n].sortDatums.sort((e,t)=>e.index-t.index),t[n].values=t[n].sortDatums.map(e=>e.datum)):e(t[n].nodes,i);return t}(n,l):n}function mj(e,t){if("values"in e&&e.values.length){let i=mF(e.values,t),r=mL(e.values,dw);e.values.forEach(e=>{e[dk]=i,e[dM]=r})}else for(let i in e.nodes)mj(e.nodes[i],t)}let mG=(e,t)=>{let i=t.beforeCall();return e&&e.forEach((e,r)=>t.call(e,r,i)),i.keyMap&&(i.keyMap.clear(),i.keyMap=null),e};var mV=i(13339);function mU(e,t){return t("component",e)}function mK(e,t,i,r){if(e)return{formatFunc:e,args:[i,r]};let n=hp.getFormatter();return t&&n?{formatFunc:n,args:[i,r,t]}:{}}let mX=(e,t,i,r)=>{if((0,r5.Z)(e[t]))return;let n=(0,ri.Z)(e[t]),l=n?e[t]:[e[t]],o=[];return l.forEach((e,l)=>{e&&(!r||r(e))&&o.push({spec:e,specPath:n?[t,l]:[t],specInfoPath:["component",t,l],type:i})}),o},mY=(e,t,i,r)=>{let n;if(n=(0,nr.Z)(e)?e(t,i):(0,sF.Z)(e)&&(0,oV.Z)(e.field)?(0,hH.Z)(t,e.field):e,r){let{formatFunc:i,args:l}=mK(void 0,r,e,t);i&&l&&(n=i(...l))}return n},mq=(e,t,i)=>(0,r5.Z)(e)?e:(0,nr.Z)(e)?e(t,i):e;var mJ=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};let mQ=e=>{var t,i,r;if(!1===(null==e?void 0:e.visible))return[];let n={mark:!1!==(null==(t=null==e?void 0:e.mark)?void 0:t.visible),dimension:!1!==(null==(i=null==e?void 0:e.dimension)?void 0:i.visible),group:!1!==(null==(r=null==e?void 0:e.group)?void 0:r.visible)};return(0,oV.Z)(null==e?void 0:e.activeType)&&Object.keys(n).forEach(t=>{var i;n[t]=null==(i=null==e?void 0:e.activeType)?void 0:i.includes(t)}),Object.keys(n).filter(e=>n[e])},m0=(e,t)=>!t||!1!==t.visible&&(!t[e]||!1!==t[e].visible)&&!(t.activeType&&!((0,ri.Z)(t.activeType)?t.activeType.includes(e):t.activeType===e));function m1(e,t,i,r,n,l){let o=t=>{if(t){let o={datum:n},a=(0,r5.Z)(t.key)&&(0,r5.Z)(t.value)&&!(0,d$.Z)(t)?Object.assign(Object.assign(Object.assign({},r),i),t):Object.assign(Object.assign({},r),t),{key:s,keyFormatter:h,keyTimeFormat:d,keyTimeFormatMode:u,value:c,valueFormatter:p,valueTimeFormat:g,valueTimeFormatMode:f}=a,m=mJ(a,["key","keyFormatter","keyTimeFormat","keyTimeFormatMode","value","valueFormatter","valueTimeFormat","valueTimeFormatMode"]);o.key=m3(mY(s,n,l,h),d,u),o.value=m3(mY(c,n,l,p),g,f),Object.keys(m).forEach(e=>{o[e]=mY(a[e],n,l)}),!1!==o.visible&&((0,oV.Z)(o.key)||(0,oV.Z)(o.value))&&e.push(o)}};(0,ri.Z)(t)?t.forEach(e=>{o(e)}):o(t)}function m2(e,t,i,r,n,l,o){(0,nr.Z)(t)?m1(e,t(n,o),i,r,l,o):t&&m1(e,t,i,r,l,o)}let m3=(e,t,i)=>{if(!t&&!i)return"object"!=typeof e?null==e?void 0:e.toString():e;let r=mV.k.getInstance();return t=t||"%Y%m%d",("local"===(i=i||"local")?r.timeFormat:r.timeUTCFormat)(t,e)};class m4{constructor(e){this.activeTriggerSet={mark:new Set,group:new Set},this.ignoreTriggerSet={mark:new Set},this._getSeriesCacheInfo=()=>{var e,t,i;let{series:r}=this,n=r.getSeriesField();return{seriesFields:(0,oV.Z)(n)?(0,ag.IX)(n):null!=(e=r.getSeriesKeys())?e:[],dimensionFields:null!=(t=r.getDimensionField())?t:[],measureFields:null!=(i=r.getMeasureField())?i:[],type:r.type}},this._getDimensionData=e=>{let{dimensionFields:t}=this._seriesCacheInfo;return t[0]&&(null==e?void 0:e[t[0]])},this._getMeasureData=e=>{let{measureFields:t}=this._seriesCacheInfo;return t[0]&&(null==e?void 0:e[t[0]])},this._getSeriesFieldData=e=>{let{dimensionFields:t,seriesFields:i}=this._seriesCacheInfo;if((0,oV.Z)(i[0])&&(null==e?void 0:e[i[0]]))return null==e?void 0:e[i[0]];let r=t[t.length-1];return t.length>1&&(0===i.length||this.series.getSeriesKeys().length),null==e?void 0:e[r]},this._getSeriesStyle=(e,t,i)=>{var r;for(let i of(0,ag.IX)(t)){let t=null==(r=this.series.getSeriesStyle(e))?void 0:r(i);if((0,oV.Z)(t))return t}return i},this.markTooltipKeyCallback=(e,t)=>this._getSeriesFieldData(e),this.markTooltipValueCallback=(e,t)=>this._getMeasureData(e),this.shapeTypeCallback=(e,t)=>{var i;return null!=(i=this._getSeriesStyle(e,"shape",null))?i:this._getSeriesStyle(e,"symbolType",this.series.getDefaultShapeType())},this.shapeColorCallback=(e,t)=>this._getSeriesStyle(e,["fill","stroke"]),this.shapeStrokeCallback=(e,t)=>this._getSeriesStyle(e,["stroke","fill"]),this.dimensionTooltipTitleCallback=(e,t)=>this._getDimensionData(e),this.groupTooltipTitleCallback=(e,t)=>this._getSeriesFieldData(e),this.groupTooltipKeyCallback=(e,t)=>{let{seriesFields:i}=this._seriesCacheInfo,r=this._seriesCacheInfo.dimensionFields;return i[0]&&(r=r.filter(e=>e!==i[0])),r.map(t=>null==e?void 0:e[t]).join("-")},this.getHasShape=e=>!!e,this.series=e,this.updateTooltipSpec()}updateTooltipSpec(){var e;let t=null==(e=this.series.getSpec())?void 0:e.tooltip;this.spec=t,this._seriesCacheInfo=this._getSeriesCacheInfo()}getShapeAttrs(e,t,i){var r,n,l,o,a,s,h,d,u,c,p,g;let f=t?"content":"title",m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},null==(r=null==i?void 0:i.style)?void 0:r.shape),null==i?void 0:i[e]),null==(n=null==i?void 0:i[e])?void 0:n[f]),null==(l=this.spec)?void 0:l[e]),null==(a=null==(o=this.spec)?void 0:o[e])?void 0:a[f]);return{shapeType:null!=(s=m.shapeType)?s:this.shapeTypeCallback,shapeFill:null!=(d=null!=(h=m.shapeFill)?h:m.shapeColor)?d:this.shapeColorCallback,shapeStroke:null!=(u=m.shapeStroke)?u:this.shapeStrokeCallback,shapeHollow:null!=(c=m.shapeHollow)&&c,shapeLineWidth:m.shapeLineWidth,shapeSize:null!=(p=m.shapeSize)?p:m.size,hasShape:null!=(g=m.hasShape)?g:this.getHasShape(t)}}enableByType(e){return!0}getDefaultContentList(e){return[this.getDefaultContentPattern(e)]}getContentList(e,t,i,r,n,l){var o;return function(e,t,i,r,n,l){if(n&&n.length){let o=[];return n.forEach(n=>{(0,ri.Z)(e)?e.forEach(e=>{m2(o,e,t,i,r,n,l)}):(0,nr.Z)(e)?m2(o,e,t,i,r,n,l):e&&m1(o,e,t,i,n,l)}),o}return null}(null!=(o=null==t?void 0:t.content)?o:this.getDefaultContentList(e),this.getDefaultContentPattern(e),i,r,n,l)}getTitleResult(e,t,i,r,n){let l=(0,nr.Z)(t)?t(r,n):t;if(l?(0,r5.Z)(l.value)&&(l=Object.assign(Object.assign({},this.getDefaultTitlePattern(e)),l)):l=this.getDefaultTitlePattern(e),l&&!1!==l.visible){let e=function(e){var t;for(let{data:i}of(null==(t=e[0])?void 0:t.series)?[{data:e,value:""}]:e)for(let{datum:e}of i)for(let t of null!=e?e:[])if(t)return t}(r),t={visible:mY(l.visible,e,n),value:m3(mY(l.value,e,n,l.valueFormatter),l.valueTimeFormat,l.valueTimeFormatMode),valueStyle:mY(l.valueStyle,e,n),hasShape:l.hasShape};return Object.keys(i).forEach(r=>{t[r]=mY(i[r],e,n)}),t}return{hasShape:!1,visible:!1}}getTooltipData(e,t,i,r,n){var l,o;let a;if(!(this.enableByType(e)&&m0(e,this.spec)&&("dimension"!==e||r&&r.length)))return null;let s=null!=(o=null==(l=this.spec)?void 0:l[e])?o:null==t?void 0:t[e],h=this.getShapeAttrs(e,!0,t),d=this.getShapeAttrs(e,!1,t);return"dimension"===e?(a=[],this.getContentList(e,s,h,i,r,n).forEach(e=>{a.push(e)})):a=this.getContentList(e,s,h,i,r,n),{visible:!0,activeType:e,data:i,title:this.getTitleResult(e,null==s?void 0:s.title,d,i,n),content:a}}getDefaultTitlePattern(e){return{key:void 0,value:"group"===e?this.groupTooltipTitleCallback:this.dimensionTooltipTitleCallback}}getDefaultContentPattern(e){return{seriesId:this.series.id,key:"group"===e?this.groupTooltipKeyCallback:this.markTooltipKeyCallback,value:this.markTooltipValueCallback}}}let m5={min:e=>e.length?(0,ag.iH)(e.map(e=>+e)):0,max:e=>e.length?(0,ag.CE)(e.map(e=>+e)):0,"array-min":e=>e.length?(0,ag.iH)(e.map(e=>+e)):0,"array-max":e=>e.length?(0,ag.CE)(e.map(e=>+e)):0,values:e=>{let t={},i=[];for(let r of e)t[r]||(i.push(r),t[r]=1);return i}},m6=(e,t)=>{var i,r;let n=t.fields;if((0,nr.Z)(n)&&(n=n()),!(null==n?void 0:n.length)||!(null==e?void 0:e.length))return{};n=mZ([],n);let l="parser"===t.target?"parserData":"latestData";return m8(e[0][l]?e[0][l]:e||[],n,null==(r=(i=e[0]).getFields)?void 0:r.call(i))},m8=(e,t,i)=>{let r={},n=[],l=[];return t.forEach(t=>{let o=t.key;r[o]={};let a=null==i?void 0:i[o],s=t.operations,h=s.some(e=>"min"===e||"max"===e||"allValid"===e),d=!0;n.length=0,e&&e.forEach(e=>{e&&n.push(e[o])});let u=n.length;if(h){l.length=0,n.forEach((e,t)=>{sz(e)&&l.push(e)});let e=n;n=l,l=e,d=n.length===u}else n=s.some(e=>"array-min"===e||"array-max"===e)?n.reduce((e,t)=>(t&&t.forEach(t=>{sz(t)&&e.push(t)}),e),[]):n.filter(e=>void 0!==e);t.filter&&(n=n.filter(t.filter)),s.forEach(e=>{if(t.customize)r[o][e]=t.customize;else{if(a&&!0===a.lockStatisticsByDomain&&!(0,r5.Z)(a.domain)){if("values"===e)return void(r[o][e]=a.domain.slice())}else if("allValid"===e)return;r[o][e]=m5[e](n),"array-max"===e&&(r[o].max=r[o][e]),"array-min"===e&&(r[o].min=r[o][e])}}),h&&(r[o].allValid=d)}),r},m7=(e,t)=>{let{config:i}=t;if(!i)return e;let{invalidType:r,checkField:n}=i();return"zero"!==r||n&&n.length&&e.forEach(e=>{n.forEach(t=>{sz(e[t])||(e[t]=0)})}),e},m9=`${dg}_HIERARCHY_DEPTH`,be=`${dg}_HIERARCHY_ROOT`,bt=`${dg}_HIERARCHY_ROOT_INDEX`;function bi(){return{keyMap:new Map,needDefaultSeriesField:!this._seriesField,defaultSeriesField:this._seriesField?null:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey)}}function br(e,t,i){e&&(i.needDefaultSeriesField&&(e[db]=i.defaultSeriesField),e[df]=t,e[dm]=i.getKey(e,t,i))}function bn(){return{keyMap:new Map,needDefaultSeriesField:!0,defaultSeriesField:this.getSeriesKeys()[0],getKey:this.generateDefaultDataKey(this._spec.dataKey),categoryField:this.getCategoryField()}}function bl(e,t,i,r=0,n,l){void 0===l&&(l=t),br(e,t,i),e[m9]=r,e[be]=n||e[i.categoryField],e[bt]=l,e.children&&e.children.length&&e.children.forEach((t,r)=>bl(t,r,i,e[m9]+1,e[be],l))}let bo={label:{name:"label",type:"text"}},ba=`${dg}_rect_x`,bs=`${dg}_rect_x1`,bh=`${dg}_rect_y`,bd=`${dg}_rect_y1`,bu={data:!0},bc={invalidType:!0,animation:!0,animationAppear:!0,animationEnter:!0,animationUpdate:!0,animationExit:!0,animationNormal:!0},bp=[...Object.keys(mt),"normal"];function bg(e={},t,i){let r={};for(let n=0;n<bp.length;n++){let l,o,a=bp[n],s=t?t[a]:void 0;if(!1!==s){if("normal"===a){s&&(r.normal=s);continue}if("state"===a){!1!==s&&(r.state=null!=s?s:mt.state);continue}("update"===a||s||e[a])&&((l=(0,ri.Z)(e[a])?e[a]:[Object.assign(Object.assign({},mt[a]),e[a])],"exit"===a&&l.forEach(e=>{e.controlOptions={stopWhenStateChange:!0}}),s)?(o=(0,ri.Z)(s)?s.map((e,t)=>{var r;let n=e;return bv(n)&&delete n.type,n.oneByOne&&(n=bm(n,null!=(r=null==i?void 0:i.dataIndex)?r:bb,null==i?void 0:i.dataCount)),n}):l.map((e,t)=>{var r;let n=hs({},l[t],s);return bv(n)&&delete n.type,n.oneByOne&&(n=bm(n,null!=(r=null==i?void 0:i.dataIndex)?r:bb,null==i?void 0:i.dataCount)),n}),r[a]=o):r[a]=l)}}return r}function bf(e,t,i){var r,n,l,o,a,s;let h={};return(0,oV.Z)(t.animationAppear)&&(h.appear=null!=(r=t.animationAppear[e])?r:t.animationAppear),(0,oV.Z)(t.animationDisappear)&&(h.disappear=null!=(n=t.animationDisappear[e])?n:t.animationDisappear),(0,oV.Z)(t.animationEnter)&&(h.enter=null!=(l=t.animationEnter[e])?l:t.animationEnter),(0,oV.Z)(t.animationExit)&&(h.exit=null!=(o=t.animationExit[e])?o:t.animationExit),(0,oV.Z)(t.animationUpdate)&&(h.update=null!=(a=t.animationUpdate[e])?a:t.animationUpdate),(0,oV.Z)(t.animationState)&&(h.state=null!=(s=t.animationState[e])?s:t.animationState),t.animationNormal&&t.animationNormal[e]&&(h.normal=t.animationNormal[e]),function(e,t){if(!e)return e;let i=["custom","customParameters"];return function e(t,i,r=[]){if((0,ri.Z)(t))t.forEach((n,l)=>{t[l]=i(t[l],l),e(t[l],i,r)});else if((0,r9.Z)(t)&&"function"!=typeof t)for(let n in t)r.includes(n)||(t[n]=i(t[n],n),e(t[n],i,r))}(e=(0,hQ.Z)(e,null,i),e=>{var i;return(0,nr.Z)(e)&&(null==(i=e.prototype)?void 0:i.constructor)!==e?(...i)=>e(...i,t):e},i),e}(h,i)}function bm(e,t,i){let{oneByOne:r,duration:n,delay:l,delayAfter:o}=e;return e.delay=(e,i,o)=>{let a=t(e,o),s=(0,nr.Z)(n)?n(e,i,o):(0,sD.Z)(n)?n:0,h=(0,nr.Z)(l)?l(e,i,o):(0,sD.Z)(l)?l:0,d=(0,nr.Z)(r)?r(e,i,o):r;return!1===d?h:h+a*(s+(d=!0===d?0:d))},e.delayAfter=(e,l,a)=>{let s=t(e,a),h=(0,nr.Z)(n)?n(e,l,a):(0,sD.Z)(n)?n:0,d=(0,nr.Z)(o)?o(e,l,a):(0,sD.Z)(o)?o:0,u=(0,nr.Z)(r)?r(e,l,a):r;return!1===u?d:(u=!0===u?0:u,d+((i?i():l.parent.count-1)-s)*(h+u))},delete e.oneByOne,e}function bb(e,t){var i;return null!=(i=null==e?void 0:e[df])?i:t.context.graphicIndex}function by(e,t){var i,r,n,l,o;if(!1===e.animation||!1===(null==(i=e.morph)?void 0:i.enable))return!1;let a=!1!==(null!=(n=null==(r=e.animationAppear)?void 0:r[t])?n:e.animationAppear),s=!1!==(null!=(o=null==(l=e.animationUpdate)?void 0:l[t])?o:e.animationUpdate);return!(!a||!s)}function bv(e){return!(0,oV.Z)(e.timeSlices)&&(0,oV.Z)(e.channel)}function b_(e){var t,i,r,n,l,o;let a=e.getSpec();if(!1===a.animation||!1===(null==(i=null==(t=e.getOption())?void 0:t.globalInstance)?void 0:i.isAnimationEnable()))return!1;let s=null!=(r=a.animationThreshold)?r:Number.MAX_SAFE_INTEGER;return null==(n=e.getMarks())||n.forEach(e=>{let t=e.getMarkConfig();t&&(t.large&&t.largeThreshold&&(s=Math.min(s,t.largeThreshold)),t.progressiveThreshold&&(s=Math.min(s,t.progressiveThreshold)))}),!((null==(o=null==(l=e.getRawData())?void 0:l.latestData)?void 0:o.length)>=s)}class bC extends cs{constructor(){super(...arguments),this.markLabelSpec={}}getLabelSpec(e){return this.markLabelSpec[e]}setLabelSpec(e,t){this.markLabelSpec[e]=(0,ag.IX)(t)}addLabelSpec(e,t,i=!1){this.markLabelSpec[e]||(this.markLabelSpec[e]=[]),i?this.markLabelSpec[e].unshift(t):this.markLabelSpec[e].push(t)}getTheme(e,t){var i,r,n;let l=s8(e),o=null==(i=this._option)?void 0:i.getTheme,a=this._option.type,s=hp.getSeriesMarkMap(a)?function(e,t,i){let r=hp.getSeriesMarkMap(t);if(!r)return e;let n={};return Object.values(r).forEach(({type:t,name:r})=>{n[r]=hs({},i("mark",(0,ag.IX)(t)[0]),i("markByName",r),null==e?void 0:e[r])}),Object.assign(Object.assign({},e),n)}(o("series",a),a,o):{},h=o("series",`${a}_${l}`),d=(null!=(n=null!=(r=this.stack)?r:null==h?void 0:h.stack)?n:null==s?void 0:s.stack)?o("series",`${a}_stack`):void 0;return hs({},s,h,d)}transformSpec(e,t,i){this._transformStack(e);let r=super.transformSpec(e,t,i);return this._transformLabelSpec(r.spec),Object.assign(Object.assign({},r),{markLabelSpec:this.markLabelSpec,stack:this.stack})}_transformLabelSpec(e){}_transformStack(e){(0,ni.Z)(e.stack)&&(this.stack=e.stack),(0,ni.Z)(e.percent)&&(this.stack=e.percent||this.stack),(0,r5.Z)(this.stack)&&this._supportStack&&e.seriesField&&(this.stack=!0)}_addMarkLabelSpec(e,t,i="label",r="initLabelMarkStyle",n=!0,l){e&&(0,ag.IX)(e[i]).forEach(i=>{var o,a,s;if(i&&i.visible){let{animation:h=!0,animationUpdate:d=!0,animationEnter:u=!0,animationExit:c=!0}=i,{animationUpdate:p=!0,animationEnter:g=!0,animationExit:f=!0}=e,m=!!(null!=(s=null!=(a=null==(o=this._option.globalInstance)?void 0:o.isAnimationEnable())?a:e.animation)?s:i.animation)&&!!n;this.addLabelSpec((0,nr.Z)(t)?t(i):t,Object.assign(Object.assign({},i),{animation:!!m&&h,animationUpdate:!!(m&&p&&d)&&p,animationEnter:!!(m&&g&&u)&&g,animationExit:!!(m&&g&&c)&&f,getStyleHandler:e=>{var t;return null==(t=e[r])?void 0:t.bind(e)}}),l)}})}_getDefaultSpecFromChart(e){var t;let i=null!=(t=super._getDefaultSpecFromChart(e))?t:{},{outerRadius:r,innerRadius:n,direction:l}=e;return(0,oV.Z)(r)&&(i.outerRadius=r),(0,oV.Z)(n)&&(i.innerRadius=n),(0,oV.Z)(l)&&(i.direction=l),Object.keys(i).length>0?i:void 0}_mergeThemeToSpec(e,t){let i=this._theme;if(this._shouldMergeThemeToSpec()){let r=this._getDefaultSpecFromChart(t),n=e=>{let t=hs({},i,r,e),n=i.label;return n&&(0,r9.Z)(n)&&(0,ri.Z)(t.label)&&(t.label=t.label.map(e=>hs({},n,e))),t};return(0,ri.Z)(e)?{spec:e.map(e=>n(e)),theme:i}:{spec:n(e),theme:i}}return{spec:e,theme:i}}}class bx extends cc{getRegion(){return this._region}getLayoutStartPoint(){return this._region.getLayoutStartPoint()}getRootMark(){return this._rootMark}getSeriesMark(){return this._seriesMark}getRawData(){return this._rawData}getViewDataFilter(){return this._viewDataFilter}getViewData(){var e;return null==(e=this._data)?void 0:e.getDataView()}getViewDataProductId(){var e;return null==(e=this._data)?void 0:e.getProductId()}getViewDataStatistics(){return this._viewDataStatistics}getViewStackData(){return this._viewStackData}getSeriesField(){return this._seriesField}setSeriesField(e){(0,oV.Z)(e)&&(this._seriesField=e)}getGroups(){return this._groups}getStack(){var e;return null==(e=this.getSpecInfo())?void 0:e.stack}getStackValue(){var e;return null!=(e=this._spec.stackValue)?e:`${dg}_series_${this.type}`}getPercent(){return this._spec.percent}getStackOffsetSilhouette(){return this._spec.stackOffsetSilhouette}get tooltipHelper(){return this._tooltipHelper||this.initTooltip(),this._tooltipHelper}getInvalidType(){return this._invalidType}setInvalidType(e){var t;this._invalidType=e,null==(t=this.getViewData())||t.reRunAllTransform()}getMarkAttributeContext(){return this._markAttributeContext}constructor(e,t){var i;super(e,t),this.specKey="series",this.type="series",this.layoutType="absolute",this.modelType="series",this.name=void 0,this.transformerConstructor=bC,this.coordinate="none",this._region=null,this._layoutStartPoint={x:0,y:0},this._layoutRect={width:null,height:null},this.getLayoutRect=()=>{var e,t;return{width:null!=(e=this._layoutRect.width)?e:this._region.getLayoutRect().width,height:null!=(t=this._layoutRect.height)?t:this._region.getLayoutRect().height}},this._rootMark=null,this._seriesMark=null,this._viewDataMap=new Map,this._viewDataFilter=null,this._data=null,this.layoutZIndex=X.SeriesGroup,this._invalidType="break",this._region=t.region,this._dataSet=t.dataSet,(null==(i=this._spec)?void 0:i.name)&&(this.name=this._spec.name)}created(){super.created(),this._buildMarkAttributeContext(),this.initData(),this.initGroups(),this.initStatisticalData(),this.event.emit(N.afterInitData,{model:this}),this.initRootMark(),this.initMark();let e=b_(this);this._initExtensionMark({hasAnimation:e}),this.initMarkStyle(),this.initMarkState(),e&&this.initAnimation(),this.afterInitMark(),this.initEvent(),this.event.emit(N.afterInitEvent,{model:this})}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(e,t)=>{var i;return null==(i=this._option.globalScale.getScale(e))?void 0:i.scale(t)},seriesColor:e=>{var t;return(0,r5.Z)(e)&&(e=this.getSeriesKeys()[0]),null==(t=this._option.globalScale.getScale("color"))?void 0:t.scale(e)},getRegion:()=>this._region}}setAttrFromSpec(){super.setAttrFromSpec(),this.setSeriesField(this._spec.seriesField),(0,oV.Z)(this._spec.invalidType)&&(this._invalidType=this._spec.invalidType)}getInvalidCheckFields(){return[this.getStackValueField()]}initInvalidDataTransform(){var e,t;"zero"===this._invalidType&&(null==(e=this._rawData)?void 0:e.dataSet)&&(hK(this._rawData.dataSet,"invalidTravel",m7),null==(t=this._rawData)||t.transform({type:"invalidTravel",options:{config:()=>({invalidType:this._invalidType,checkField:this.getInvalidCheckFields()})}},!1))}initData(){var e,t,i;let r=null!=(e=this._spec.data)?e:this._option.getSeriesData(this._spec.dataId,this._spec.dataIndex);if(r&&(this._rawData=h3(r,this._dataSet,this._option.sourceDataList)),null==(i=null==(t=this._rawData)?void 0:t.target)||i.addListener("change",this.rawDataUpdate.bind(this)),this._addDataIndexAndKey(),this._rawData){this.getStack()&&(this._viewDataFilter=h2(this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewDataFilter`}));let e=h2(this.getStack()?this._viewDataFilter:this._rawData,this._dataSet,{name:`${this.type}_${this.id}_viewData`});this._data=new cj(this._option,e),this.getStack()&&this._viewDataFilter.target.removeListener("change",e.reRunAllTransform)}this.initInvalidDataTransform()}initGroups(){let e=this.getGroupFields();e&&e.length&&(this._groups={fields:e})}initStatisticalData(){this._data&&this._statisticViewData()}getRawDataStatisticsByField(e,t){var i,r,n;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[e]||t&&((0,r5.Z)(this._rawStatisticsCache[e].min)||(0,r5.Z)(this._rawStatisticsCache[e].max))||!t&&(0,r5.Z)(this._rawStatisticsCache[e].values)){if(this._viewDataStatistics&&(!this._viewDataFilter||this._viewDataFilter.transformsArr.length<=1)&&this.getViewData().transformsArr.length<=1&&(null==(i=this._viewDataStatistics.latestData)?void 0:i[e]))this._rawStatisticsCache[e]=this._viewDataStatistics.latestData[e];else if(this._rawData){let i=null==(r=this._rawData.getFields())?void 0:r[e];if(i&&i.lockStatisticsByDomain&&i.domain)this._rawStatisticsCache[e]={},t?(this._rawStatisticsCache[e].min=(0,ag.iH)(i.domain),this._rawStatisticsCache[e].max=(0,ag.CE)(i.domain)):this._rawStatisticsCache[e].values=i.domain;else{let i=m8(this._rawData.latestData,[{key:e,operations:t?["min","max"]:["values"]}])[e];this._rawStatisticsCache[e]=(0,ha.Z)(null!=(n=this._rawStatisticsCache[e])?n:{},i)}}}return this._rawStatisticsCache[e]}_statisticViewData(){hK(this._dataSet,"dimensionStatistics",m6);let e=`${this.type}_${this.id}_viewDataStatic`;this._viewDataStatistics=new tf.V(this._dataSet,{name:e}),this._viewDataStatistics.parse([this._data.getDataView()],{type:"dataview"}),this._viewDataStatistics.transform({type:"dimensionStatistics",options:{fields:()=>{let e=this.getStatisticFields();return this._seriesField&&mZ(e,[{key:this._seriesField,operations:["values"]}]),e},target:"latest"}},!1),this._data.getDataView().target.removeListener("change",this._viewDataStatistics.reRunAllTransform),this.getStack()&&this.createdStackData()}createStatisticalData(e,t,i){hK(this._dataSet,"dimensionStatistics",m6);let r=new tf.V(this._dataSet,{name:e});return r.parse([t],{type:"dataview"}),r.transform({type:"dimensionStatistics",options:{operations:["max","min","values"],fields:()=>{var e;let r=mZ(this.getStatisticFields(),null!=(e=null==i?void 0:i(t.name))?e:[]);return this._seriesField&&mZ(r,[{key:this._seriesField,operations:["values"]}]),r},target:"latest"}},!1),r}createdStackData(){let e=`${this.type}_${this.id}_viewStackData`;this._viewStackData=new tf.V(this._dataSet,{name:e}),this._viewStackData.parse([this._viewDataFilter],{type:"dataview"}),this._viewStackData.transform({type:"stackSplit",options:{fields:this.getStackGroupFields()}},!1)}_noAnimationDataKey(e,t){return t}generateDefaultDataKey(e){var t;return(0,r5.Z)(e)?(e,t,i)=>{if(!1===this._spec.animation){let i=this._noAnimationDataKey(e,t);if(void 0!==i)return i}let{keyMap:r}=i,n=this._getSeriesDataKey(e);return void 0===r.get(n)?(r.set(n,0),n):(r.set(n,r.get(n)+1),`${n}_${r.get(n)}`)}:(0,r6.Z)(e)?t=>t[e]:(0,ri.Z)(e)&&e.every(e=>(0,r6.Z)(e))?t=>e.map(e=>t[e]).join("-"):(0,nr.Z)(e)?(t,i)=>e(t,i):(null==(t=this._option)||t.onError(`invalid dataKey: ${e}`),(e,t)=>{})}_addDataIndexAndKey(){var e;(null==(e=this._rawData)?void 0:e.dataSet)&&(hK(this._rawData.dataSet,"addVChartProperty",mG),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:bi.bind(this),call:br}},!1))}updateRawData(e){this._rawData&&this._rawData.updateRawData(e)}rawDataUpdate(e){var t;null==(t=this._rawDataStatistics)||t.reRunAllTransform(),this._rawStatisticsCache=null,this.event.emit(N.rawDataUpdate,{model:this})}viewDataFilterOver(e){this.event.emit(N.viewDataFilterOver,{model:this})}viewDataUpdate(e){var t;this.event.emit(N.viewDataUpdate,{model:this}),null==(t=this._data)||t.updateData(),this._viewDataStatistics&&this._viewDataStatistics.reRunAllTransform()}viewDataStatisticsUpdate(e){this.event.emit(N.viewDataStatisticsUpdate,{model:this})}getDatumPositionValue(e,t){return!e||(0,r5.Z)(t)?null:e[t]}getDatumPositionValues(e,t){return!e||(0,r5.Z)(t)?[]:(0,r6.Z)(t)?[e[t]]:t.map(t=>e[t])}setValueFieldToStack(){}setValueFieldToPercent(){}setValueFieldToStackOffsetSilhouette(){}initRootMark(){var e,t,i;this._rootMark=this._createMark({type:"group",name:`seriesGroup_${this.type}_${this.id}`},{parent:null==(t=(e=this._region).getGroupMark)?void 0:t.call(e),dataView:!1}),this._rootMark.setMarkConfig({zIndex:null!=(i=this._spec.zIndex)?i:this.layoutZIndex})}_getExtensionMarkNamePrefix(){return`${this.type}_${this.id}_extensionMark`}_initExtensionMark(e){var t;this._spec.extensionMark&&(null==(t=this._spec.extensionMark)||t.forEach((t,i)=>{this._createExtensionMark(t,null,this._getExtensionMarkNamePrefix(),i,e)}))}_createExtensionMark(e,t,i,r,n){var l;let o=this._createMark({type:e.type,name:(0,oV.Z)(e.name)?`${e.name}`:`${i}_${r}`},{skipBeforeLayouted:!0,markSpec:e,parent:t,dataView:!1,componentType:e.componentType,key:e.dataKey});if(o){if((0,oV.Z)(e.id)&&o.setUserId(e.id),n.hasAnimation&&!1!==e.animation){let t=bg({},bf(e.type,e,this._markAttributeContext));o.setAnimationConfig(t)}if("group"===e.type&&(i=`${i}_${r}`,null==(l=e.children)||l.forEach((e,t)=>{this._createExtensionMark(e,o,i,t,n)})),!(0,r5.Z)(e.dataId)||!(0,r5.Z)(e.dataIndex)){let t=this._option.getSeriesData(e.dataId,e.dataIndex);t===this._rawData?o.setData(this._data):(o.setDataView(t),t.target.addListener("change",()=>{o.getData().updateData()}))}}}_updateExtensionMarkSpec(){var e;null==(e=this._spec.extensionMark)||e.forEach((e,t)=>{let i=this._marks.getMarkWithInfo({name:(0,oV.Z)(e.name)?`${e.name}`:`${this._getExtensionMarkNamePrefix()}_${t}`});i&&(this.initMarkStyleWithSpec(i,e),i.commit(!1,!0))})}getStackData(){var e;return null==(e=this._viewStackData)?void 0:e.latestData}_parseDefaultInteractionConfig(e){var t;if(!(null==e?void 0:e.length))return[];let i=(t=this._option.mode)===su["desktop-browser"]||t===su["desktop-miniApp"]?{hover:{enable:!0,trigger:"pointermove",triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"pointertap"}}:sJ(t)||sQ(t)?{hover:{enable:!0,trigger:["pointerdown","pointermove"],triggerOff:"view:pointerleave"},select:{enable:!0,trigger:"tap"}}:null,r=Object.assign({},null==i?void 0:i.hover),n=Object.assign({},null==i?void 0:i.select),l=this._spec.hover;(0,ni.Z)(l)?r.enable=l:(0,r9.Z)(l)&&(r.enable=!0,r=hs(r,l));let o=this._spec.select;(0,ni.Z)(o)?n.enable=o:(0,r9.Z)(o)&&(n.enable=!0,n=hs(n,o));let a=[{trigger:{type:"dimension-hover"},marks:e}];if(r.enable){let t=my(r,e);t.length&&a.push({trigger:this._defaultHoverConfig(r),marks:t})}if(n.enable){let t=my(n,e);t.length&&a.push({trigger:this._defaultSelectConfig(n),marks:t})}return a}_defaultHoverConfig(e){return{type:"element-highlight",trigger:e.trigger,triggerOff:e.triggerOff,blurState:Q.STATE_HOVER_REVERSE,highlightState:Q.STATE_HOVER}}_defaultSelectConfig(e){let t="multiple"===e.mode,i=(0,oV.Z)(e.triggerOff)?e.triggerOff:t?["empty"]:["empty",e.trigger];return{type:"element-select",trigger:e.trigger,triggerOff:i,reverseState:Q.STATE_SELECTED_REVERSE,state:Q.STATE_SELECTED,isMultiple:t}}_parseInteractionConfig(e){let{interactions:t}=this._spec,i=this._parseDefaultInteractionConfig(e);return t&&t.length&&t.forEach(e=>{let t=my(e,this.getMarks());t.length&&i.push({trigger:e,marks:t})}),i}getInteractionTriggers(){if(!0!==this._option.disableTriggerEvent){let e=this.getMarksWithoutRoot();return this._parseInteractionConfig(e)}return[]}initAnimation(){}initMarkState(){this.initSeriesStyleState()}initSeriesStyleState(){var e;let t=this._spec.seriesStyle;if(!t||!t.length)return;let i=null!=(e=this._seriesField)?e:db;this.getMarksWithoutRoot().forEach(e=>{let r={},n={},l={};t.forEach(t=>{var i;let o=null==(i=t[e.name])?void 0:i.style;o&&(r[t.name]=!0,l[t.name]=l[t.name]||{},Object.keys(o).forEach(e=>{n[e]=!0,l[t.name][e]=o[e]}))}),e.state.addStateInfo({stateValue:dy,level:-1,filter:e=>Array.isArray(e)?0!==e.length&&!0===r[e[0][i]]:!0===r[e[i]]});let o={};Object.keys(n).forEach(t=>{o[t]=r=>{var n,o;let a;if(Array.isArray(r)){if(0===r.length)return;a=null==(n=l[r[0][i]])?void 0:n[t]}return a=null==(o=l[r[i]])?void 0:o[t],(0,oV.Z)(a)?a:e.getAttribute(t,r)}}),this.setMarkStyle(e,o,dy,q.User_SeriesStyle)})}afterInitMark(){this.event.emit(N.afterInitMark,{model:this}),this.setSeriesField(this._spec.seriesField),this.getMarks().forEach(e=>{var t,i;(null==(i=null==(t=e.stateStyle)?void 0:t.normal)?void 0:i.lineWidth)&&e.setAttribute("stroke",this.getColorAttribute(),"normal",q.Base_Series)})}getMarksWithoutRoot(){return this.getMarks().filter(e=>{var t;return!(null==(t=e.name)?void 0:t.includes("seriesGroup"))})}getMarksInType(e){return this._marks.getMarksInType(e)}getMarkInName(e){return this._marks.get(e)}getMarkInId(e){return this.getMarks().find(t=>t.id===e)}initEvent(){var e,t,i;null==(t=null==(e=this._data)?void 0:e.getDataView())||t.target.addListener("change",this.viewDataUpdate.bind(this)),null==(i=this._viewDataStatistics)||i.target.addListener("change",this.viewDataStatisticsUpdate.bind(this))}_releaseEvent(){super._releaseEvent()}initTooltip(){this._tooltipHelper=new m4(this)}_compareExtensionMarksSpec(e,t,i){e.length!==t.length||t.some((t,i)=>t.type!==e[i].type||t.id!==e[i].id||t.name!==e[i].name)?i.reMake=!0:t.some((t,i)=>t.visible!==e[i].visible)&&(i.reCompile=!0)}_compareLabelSpec(e,t,i){e.length!==t.length||t.some((t,i)=>t.labelLayout!==e[i].labelLayout||t.visible!==e[i].visible)?i.reMake=!0:!i.reCompile&&t.some((t,i)=>!(0,dN.X)(t,e[i]))&&(i.reCompile=!0)}_compareSpec(e,t,i){let r=super._compareSpec(e,t),n=Object.keys(t||{}).sort(),l=Object.keys(e||{}).sort();if(!(0,dN.X)(n,l))return r.reMake=!0,r;let o=Object.assign(Object.assign(Object.assign(Object.assign({},bu),bc),i),{extensionMark:!0,label:!0,totalLabel:!0});return this._compareExtensionMarksSpec((0,ag.IX)(e.extensionMark),(0,ag.IX)(t.extensionMark),r),r.reMake||this._compareLabelSpec((0,ag.IX)(e.label),(0,ag.IX)(t.label),r),r.reMake||this._compareLabelSpec((0,ag.IX)(e.totalLabel),(0,ag.IX)(t.totalLabel),r),r.reMake||(!r.reCompile&&this._marks.getMarks().some(i=>{var r,n;return o[i.name]=!0,(null==(r=t[i.name])?void 0:r.visible)!==(null==(n=e[i.name])?void 0:n.visible)})&&(r.reCompile=!0),!r.reCompile&&n.some(i=>bc[i]&&!(0,dN.X)(e[i],t[i]))&&(r.reCompile=!0),n.some(i=>!o[i]&&!(0,dN.X)(e[i],t[i]))&&(r.reMake=!0)),r}_updateSpecData(){!this._rawData||!this._spec.data||this._spec.data instanceof tf.V||h4(this._rawData,this._spec.data,!0)}reInit(e){super.reInit(e);let t=this.getMarksWithoutRoot();t.forEach(e=>{this._spec[e.name]&&this.initMarkStyleWithSpec(e,this._spec[e.name])}),this.initMarkStyle(),t.forEach(e=>{e.commit(!1)}),this._updateExtensionMarkSpec(),this._updateSpecData(),this._tooltipHelper&&this._tooltipHelper.updateTooltipSpec(),b_(this)&&this.initAnimation()}onEvaluateEnd(e){this._data.updateData()}release(){var e,t;super.release(),this._viewDataMap.clear();let i=null==(t=null==(e=this._rawData)?void 0:e.transformsArr)?void 0:t.findIndex(e=>"addVChartProperty"===e.type);i>=0&&this._rawData.transformsArr.splice(i,1),this._dataSet=this._data=this._rawData=this._rawDataStatistics=this._spec=this._region=this._viewDataStatistics=this._viewStackData=null}setLayoutStartPosition(e){(0,sD.Z)(e.x)&&(this._layoutStartPoint.x=e.x),(0,sD.Z)(e.y)&&(this._layoutStartPoint.y=e.y)}setLayoutRect({width:e,height:t},i){(0,sD.Z)(e)&&(this._layoutRect.width=e),(0,sD.Z)(t)&&(this._layoutRect.height=t)}getSeriesKeys(){var e,t;return this._seriesField?null!=(t=null==(e=this.getRawDataStatisticsByField(this._seriesField))?void 0:e.values)?t:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}getSeriesStyle(e){return t=>{var i,r;return null!=(r=null==(i=this._seriesMark)?void 0:i.getAttribute(t,e))?r:void 0}}_getSeriesInfo(e,t){let i=this.getDefaultShapeType();return t.map(t=>({key:t,originalKey:t,style:this.getSeriesStyle({[e]:t}),shapeType:i}))}getSeriesInfoInField(e){var t,i;return this._getSeriesInfo(e,null!=(i=null==(t=this.getRawDataStatisticsByField(e))?void 0:t.values)?i:[])}getSeriesInfoList(){var e;return this._getSeriesInfo(null!=(e=this._seriesField)?e:db,this.getSeriesKeys())}_getDefaultColorScale(){var e,t;let i=this.getDefaultColorDomain(),r=this._getDataScheme();return null==(t=(e=(new cP).domain(i)).range)?void 0:t.call(e,r)}_getDataScheme(){return he(this.getColorScheme(),this.type)}getDefaultColorDomain(){var e,t;return this._seriesField?null==(t=null==(e=this.getViewDataStatistics())?void 0:e.latestData[this._seriesField])?void 0:t.values:[]}getColorAttribute(){var e,t;return{scale:null!=(e=this._option.globalScale.getScale("color"))?e:this._getDefaultColorScale(),field:null!=(t=this._seriesField)?t:db}}getDimensionField(){return[]}getMeasureField(){return[]}onMarkPositionUpdate(){this.onMarkTreePositionUpdate(this.getMarksWithoutRoot())}onMarkTreePositionUpdate(e){}_createMark(e,t={},i={}){var r,n,l,o,a;let{key:s,groupKey:h,skipBeforeLayouted:d,themeSpec:u={},markSpec:c,dataView:p,parent:g,isSeriesMark:f,noSeparateStyle:m=!1}=t,b=super._createMark(e,{key:null!=s?s:this._getDataIdKey(),seriesId:this.id,attributeContext:this._markAttributeContext,componentType:t.componentType,noSeparateStyle:m,parent:!1!==g?null!=g?g:this._rootMark:null});if((0,oV.Z)(b)){let t=this.getSpec()||{};this._marks.addMark(b,{name:e.name}),f&&(this._seriesMark=b),(0,r5.Z)(p)?b.setData(this._data):!1!==p&&b.setDataView(p),b.setSkipBeforeLayouted(!1!==d),(0,r5.Z)(h)||b.setGroupKey(h);let s=Object.assign(Object.assign({},i),{progressiveStep:t.progressiveStep,progressiveThreshold:t.progressiveThreshold,large:t.large,largeThreshold:t.largeThreshold,morph:null!=(r=i.morph)&&r,useSequentialAnimation:t.useSequentialAnimation,support3d:null!=(n=i.support3d)?n:t.support3d||!!t.zField,morphKey:(null==(l=t.morph)?void 0:l.morphKey)||`${this.getSpecIndex()}_${this.getMarks().length}`,morphElementKey:null!=(a=null==(o=t.morph)?void 0:o.morphElementKey)?a:i.morphElementKey});b.setMarkConfig(s),this.initMarkStyleWithSpec(b,hs({},u,c||t[b.name]))}return b}_getDataIdKey(){var e;return null!=(e=super._getDataIdKey())?e:dm}_getSeriesDataKey(e){let t="";if(!e)return t;let i=this.getDimensionField();t=i.map(t=>e[t]).join("_");let r=this.getSeriesField();return r&&!i.includes(r)&&(t+=`_${e[r]}`),t}addViewDataFilter(e){var t,i;null==(i=null!=(t=this._viewDataFilter)?t:this.getViewData())||i.transform(e,!1)}reFilterViewData(){var e,t;null==(t=null!=(e=this._viewDataFilter)?e:this.getViewData())||t.reRunAllTransform()}reTransformViewData(){var e,t;null==(t=null==(e=this._data)?void 0:e.getDataView())||t.reRunAllTransform()}fillData(){var e;null==(e=this.getRawData())||e.reRunAllTransform()}compile(){this.compileData()}getDefaultShapeType(){return"circle"}getFieldAlias(e){var t;return e!==dC&&e!==dw&&e!==d_&&e!==dx||(e=this.getStackValueField()),null!=(t=mN(this.getRawData(),e))?t:e}_getInvalidConnectType(){return"zero"===this._invalidType?"zero":"link"===this._invalidType?"connect":"none"}_getInvalidDefined(e){let t=this.getInvalidCheckFields();return!t.length||t.every(t=>sz(e[t]))}_getRelatedComponentSpecInfo(e){var t;let i=this.getSpecIndex(),r=null==(t=this._option.getSpecInfo().component[e])?void 0:t.filter(e=>e.seriesIndexes.includes(i));return null!=r?r:[]}_forEachStackGroup(e,t){var i,r;(t=null!=t?t:null==(i=this._viewStackData)?void 0:i.latestData)&&((null==(r=t.values)?void 0:r.length)?e(t):t.nodes&&Object.values(t.nodes).forEach(t=>{this._forEachStackGroup(e,t)}))}isDatumInViewData(e){if(!e)return!1;let t=this.getViewData().latestData;return!!t&&(!!t.includes(e)||t.some(t=>Object.keys(e).every(i=>e[i]===t[i])))}getSeriesFieldValue(e,t){var i;return e[null!=(i=null!=t?t:this.getSeriesField())?i:db]}}function bw(e,t,i){let r=e.getScale(0),n="isInverse"in e&&e.isInverse();(0,cz.z2)(r.type)?i.sort((e,i)=>(e[t]-i[t])*(n?-1:1)):i.sort((e,i)=>(r.index(e[t])-r.index(i[t]))*(n?-1:1))}function bS(e){return{dataIndex:t=>{var i,r;let n="horizontal"===e.direction?e.fieldY[0]:e.fieldX[0],l=null==t?void 0:t[n],o="horizontal"===e.direction?e.scaleY:e.scaleX;return(null!=(r=null==(i=null==o?void 0:o.domain)?void 0:i.call(o))?r:[]).indexOf(l)||0},dataCount:()=>{var t,i,r;let n="horizontal"===e.direction?e.scaleY:e.scaleX;return null!=(r=(null!=(i=null==(t=null==n?void 0:n.domain)?void 0:t.call(n))?i:[]).length)?r:0}}}bx.mark=bo,bx.transformerConstructor=bC;class bA extends bx{constructor(){super(...arguments),this.coordinate="cartesian",this._bandPosition=.5,this._scaleConfig={bandPosition:this._bandPosition},this._direction="vertical",this._sortDataByAxis=!1,this._getPositionXEncoder=()=>{var e;return null==(e=this._positionXEncoder)?void 0:e.bind(this)},this._setPositionXEncoder=e=>{this._positionXEncoder=e.bind(this)},this._getPositionYEncoder=()=>{var e;return null==(e=this._positionYEncoder)?void 0:e.bind(this)},this._setPositionYEncoder=e=>{this._positionYEncoder=e.bind(this)}}_buildScaleConfig(){this._scaleConfig={bandPosition:this._bandPosition}}get fieldX(){return this._fieldX}setFieldX(e){this._fieldX=(0,ag.IX)(e)}get fieldY(){return this._fieldY}setFieldY(e){this._fieldY=(0,ag.IX)(e)}get fieldZ(){return this._fieldZ}setFieldZ(e){this._fieldZ=e&&(0,ag.IX)(e)}get fieldX2(){return this._fieldX2}setFieldX2(e){this._fieldX2=e}get fieldY2(){return this._fieldY2}setFieldY2(e){this._fieldY2=e}get direction(){return this._direction}get scaleX(){return this._scaleX}setScaleX(e){this._scaleX=e}get scaleY(){return this._scaleY}setScaleY(e){this._scaleY=e}get scaleZ(){return this._scaleZ}setScaleZ(e){this._scaleZ=e}getXAxisHelper(){return this._xAxisHelper}setXAxisHelper(e){this._xAxisHelper=e,this.onXAxisHelperUpdate()}getYAxisHelper(){return this._yAxisHelper}setYAxisHelper(e){this._yAxisHelper=e,this.onYAxisHelperUpdate()}getZAxisHelper(){return this._zAxisHelper}setZAxisHelper(e){this._zAxisHelper=e,this.onYAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}getStatisticFields(){let e=[];return[{axisHelper:this.getXAxisHelper(),fields:this._fieldX2?[...this._fieldX,this._fieldX2]:this._fieldX},{axisHelper:this.getYAxisHelper(),fields:this._fieldY2?[...this._fieldY,this._fieldY2]:this._fieldY},{axisHelper:this.getZAxisHelper(),fields:this._fieldZ}].forEach(t=>{t.axisHelper&&t.axisHelper.getScale&&t.fields&&t.fields.forEach(i=>{let r={key:i,operations:[]},n=t.axisHelper.getScale(0);(0,cz.z2)(n.type)?(r.operations=["max","min"],"log"===n.type&&(r.filter=e=>e>0)):r.operations=["values"],e.push(r)})}),this.getStack()&&e.push({key:this.getStackValueField(),operations:["allValid"]}),e}getGroupFields(){return"vertical"===this.direction?this._fieldX:this._fieldY}getStackGroupFields(){return this.getGroupFields()}getStackValue(){var e,t;let i=null==(e="horizontal"===this.direction?this.getXAxisHelper():this.getYAxisHelper())?void 0:e.getAxisId();return null!=(t=this._spec.stackValue)?t:`${dg}_series_${this.type}_${i}`}getStackValueField(){return"horizontal"===this.direction?(0,ag.IX)(this._spec.xField)[0]:(0,ag.IX)(this._spec.yField)[0]}setValueFieldToStack(){"horizontal"===this.direction?(this.setFieldX(dC),this.setFieldX2(d_)):(this.setFieldY(dC),this.setFieldY2(d_))}setValueFieldToPercent(){"horizontal"===this.direction?(this.setFieldX(dw),this.setFieldX2(dx)):(this.setFieldY(dw),this.setFieldY2(dx))}setValueFieldToStackOffsetSilhouette(){"horizontal"===this.direction?(this.setFieldX(dA),this.setFieldX2(dS)):(this.setFieldY(dA),this.setFieldY2(dS))}onXAxisHelperUpdate(){this.onMarkPositionUpdate()}onYAxisHelperUpdate(){this.onMarkPositionUpdate()}onZAxisHelperUpdate(){this.onMarkPositionUpdate()}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.setFieldX(this._spec.xField),this.setFieldY(this._spec.yField),this.setFieldZ(this._spec.zField),this._specXField=(0,ag.IX)(this._spec.xField),this._specYField=(0,ag.IX)(this._spec.yField),(0,oV.Z)(this._spec.direction)&&(this._direction=this._spec.direction),this.setFieldX2(null==(e=this._spec)?void 0:e.x2Field),this.setFieldY2(null==(t=this._spec)?void 0:t.y2Field),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent(),this.getStackOffsetSilhouette()&&this.setValueFieldToStackOffsetSilhouette(),(0,oV.Z)(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}dataToPosition(e,t){return e?t&&!this.isDatumInViewData(e)?null:{x:this.dataToPositionX(e),y:this.dataToPositionY(e)}:null}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToX=this.valueToPositionX.bind(this),this._markAttributeContext.valueToY=this.valueToPositionY.bind(this),this._markAttributeContext.xBandwidth=(e=0)=>{var t,i,r;return null!=(r=null==(i=(t=this.getXAxisHelper()).getBandwidth)?void 0:i.call(t,e))?r:0},this._markAttributeContext.yBandwidth=(e=0)=>{var t,i,r;return null!=(r=null==(i=(t=this.getYAxisHelper()).getBandwidth)?void 0:i.call(t,e))?r:0},this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this)}valueToPosition(e,t){return{x:this.valueToPositionX(e),y:this.valueToPositionY(t)}}_axisPosition(e,t,i){return this._scaleConfig.datum=i,e.isContinuous?e.valueToPosition(t,this._scaleConfig):e.dataToPosition((0,ag.IX)(t),this._scaleConfig)}valueToPositionX(e,t){return this._axisPosition(this._xAxisHelper,e,t)}valueToPositionY(e,t){return this._axisPosition(this._yAxisHelper,e,t)}_dataToPosition(e,t,i,r,n,l){let o=n();if(o)return o(e);if(!t)return l(e=>Number.NaN),Number.NaN;let a=(t.getFields?t.getFields():i).slice(0,r);return a&&0!==a.length?(t.isContinuous?l(e=>(this._scaleConfig.datum=e,t.valueToPosition(this.getDatumPositionValue(e,a[0]),this._scaleConfig))):l(e=>(this._scaleConfig.datum=e,t.dataToPosition((0,ag.IX)(this.getDatumPositionValues(e,a)),this._scaleConfig))),n()(e)):(l(e=>null),null)}dataToPositionX(e){return this._dataToPosition(e,this._xAxisHelper,this.fieldX,void 0,this._getPositionXEncoder,this._setPositionXEncoder)}dataToPositionY(e){return this._dataToPosition(e,this._yAxisHelper,this.fieldY,void 0,this._getPositionYEncoder,this._setPositionYEncoder)}dataToPositionZ(e){if(!this._zAxisHelper)return Number.NaN;let{dataToPosition:t}=this._zAxisHelper;return t(this.getDatumPositionValues(e,this._fieldZ),{bandPosition:this._bandPosition})}dataToPositionX1(e){return this._xAxisHelper?this._fieldX2&&this._fieldX2 in e?this.valueToPositionX(this.getDatumPositionValues(e,this._fieldX2)):this.valueToPositionX(0):Number.NaN}dataToPositionY1(e){return this._yAxisHelper?this._fieldY2&&this._fieldY2 in e?this.valueToPositionY(this.getDatumPositionValues(e,this._fieldY2)):this.valueToPositionY(0):Number.NaN}positionToData(e){return e?{x:this.positionToDataX(e.x),y:this.positionToDataY(e.y)}:null}positionToDataX(e){return this._scaleX?this._scaleX.invert(e):null}positionToDataY(e){return this._scaleY?this._scaleY.invert(e):null}getRegionRectLeft(){if(!this._xAxisHelper)return Number.NaN;let{getScale:e}=this._xAxisHelper;return e(0).range()[0]}getRegionRectRight(){if(!this._xAxisHelper)return Number.NaN;let{getScale:e}=this._xAxisHelper;return e(0).range()[1]}afterInitMark(){super.afterInitMark(),this.setFieldX(this._fieldX),this.setFieldY(this._fieldY),this._buildScaleConfig()}getDimensionField(){return"horizontal"===this._direction?this._specYField:this._specXField}getDimensionContinuousField(){return"horizontal"===this._direction?[this.fieldY[0],this.fieldY2]:[this.fieldX[0],this.fieldX2]}getMeasureField(){return"horizontal"===this._direction?this._specXField:this._specYField}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(N.scaleDomainUpdate,{filter:e=>{var t;return e.model.id===(null==(t="horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper)?void 0:t.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var e,t,i;(null==(t=null==(e=this.getViewData())?void 0:e.latestData)?void 0:t.length)&&(bw("horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper,"horizontal"===this._direction?this._fieldY[0]:this._fieldX[0],this.getViewData().latestData),null==(i=this._data)||i.updateData(!0))}getInvalidCheckFields(){let e=[];return this._xAxisHelper&&this._xAxisHelper.isContinuous&&this._xAxisHelper.getAxisType()!==sc.geoCoordinate&&(this._xAxisHelper.getFields?this._xAxisHelper.getFields():this._specXField).forEach(t=>{e.push(t)}),this._yAxisHelper&&this._yAxisHelper.isContinuous&&this._yAxisHelper.getAxisType()!==sc.geoCoordinate&&(this._yAxisHelper.getFields?this._yAxisHelper.getFields():this._specYField).forEach(t=>{e.push(t)}),e}reInit(e){this._positionXEncoder&&(this._positionXEncoder=null),this._positionYEncoder&&(this._positionYEncoder=null),super.reInit(e)}}let bk="monotone",bM="linear";(es=eB||(eB={})).dimensionHover="dimensionHover",es.dimensionClick="dimensionClick";let bT={point:{name:"point",type:"symbol"},line:{name:"line",type:"line"}};class bR{addSamplingCompile(){if(this._spec.sampling){let{width:e,height:t}=this._region.getLayoutRect(),i=this._fieldY,r=this._fieldX;this._data&&this._data.setTransform([{type:"dataSampling",size:"horizontal"===this._direction?t:e,factor:this._spec.samplingFactor,yfield:"horizontal"===this._direction?r[0]:i[0],groupBy:this._seriesField,mode:this._spec.sampling}])}}addOverlapCompile(){var e;if(this._spec.markOverlap){let t=[];t.push({type:"symbolOverlap",direction:"horizontal"===this._direction&&"cartesian"===this.coordinate?2:1,delta:this._spec.pointDis,deltaMul:this._spec.pointDisMul,groupBy:this._seriesField}),null==(e=this._symbolMark)||e.setTransform(t)}}reCompileSampling(){this._spec.sampling&&this.compile()}initLineMark(e){return this._lineMark=this._createMark(bT.line,{groupKey:this._seriesField,isSeriesMark:null==e||e},{morphElementKey:this.getDimensionField()[0]}),this._lineMark}initLineMarkStyle(e,t){var i,r;let n=this._lineMark;if(n){if(this.setMarkStyle(n,{stroke:this.getColorAttribute()},"normal",q.Series),"zero"!==this._invalidType&&this.setMarkStyle(n,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",q.Series),this.event.on(N.viewDataStatisticsUpdate,{filter:e=>e.model===this},()=>{this.encodeDefined(n,"defined")}),"polar"===this.coordinate)this.setMarkStyle(n,{lineJoin:"bevel",curveType:bM,closePath:!0},"normal",q.Series);else{let l=null!=t?t:null==(r=null==(i=this.getSpec().line)?void 0:i.style)?void 0:r.curveType;this.setMarkStyle(n,{curveType:l===bk?"horizontal"===e?"monotoneY":"monotoneX":l},"normal",q.Built_In)}this.setMarkStyle(n,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",q.Series)}return n}_getEventElement(e,t=!1){let i=[];return e.dimensionInfo.some(e=>(e.data.some(e=>e.series===this&&(i=e.datum,!0)),!i.length)),i}_dimensionTrigger(e){let t=this._getEventElement(e);switch(e.action){case"enter":this._symbolActiveMark.getDataView().parse(t),this._symbolActiveMark.getData().updateData(!1);break;case"leave":this._symbolActiveMark.getDataView().parse([]),this._symbolActiveMark.getData().updateData(!1)}}initSymbolMark(e){if(!1!==(this._spec.point||{}).visible&&(this._symbolMark=this._createMark(bT.point,{groupKey:this._seriesField,isSeriesMark:!!e},{morph:by(this._spec,bT.point.name),morphElementKey:this.getDimensionField()[0]})),!0===this._spec.activePoint){let e=new tf.V(this._option.dataSet,{name:`${dg}_series_${this.id}_active_point`});e.parse([]),this._symbolActiveMark=this._createMark({name:`active_point_${this.id}`,type:"symbol"},{groupKey:this._seriesField,isSeriesMark:!1,dataView:e,parent:this._region.getInteractionMark()},{morph:!1}),this._symbolActiveMark.setVisible(!1)}return this._symbolMark}initSymbolMarkStyle(){let e=this._symbolMark;if(!e)return this._initSymbolActiveMarkAlone(),e;if(this._initSymbolMark(e),this._symbolActiveMark&&this._symbolMark.stateStyle.dimension_hover){for(let t in this._symbolActiveMark.setVisible(!0),this.event.on(eB.dimensionHover,this._dimensionTrigger.bind(this)),this._symbolMark.stateStyle)for(let i in this._symbolActiveMark.stateStyle[t]={},this._symbolMark.stateStyle[t])"visible"!==i&&(this._symbolActiveMark.stateStyle[t][i]={style:null,level:q.Series,referer:e});this._symbolActiveMark.state.changeStateInfo({stateValue:Q.STATE_DIMENSION_HOVER,filter:()=>!0})}return e}_initSymbolMark(e){e&&(this.setMarkStyle(e,{fill:this.getColorAttribute()},"normal",q.Series),this.setMarkStyle(e,{x:e=>"zero"===this._invalidType||this._getInvalidDefined(e)?this.dataToPositionX(e):Number.NaN,y:e=>"zero"===this._invalidType||this._getInvalidDefined(e)?this.dataToPositionY(e):Number.NaN,z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",q.Series))}_initSymbolActiveMarkAlone(){var e,t;let i=this._symbolActiveMark;i&&(this._initSymbolMark(i),i&&(null==(t=null==(e=this._spec[bT.point.name])?void 0:e.state)?void 0:t.dimension_hover)&&(i.setVisible(!0),this.event.on(eB.dimensionHover,this._dimensionTrigger.bind(this)),this.initMarkStyleWithSpec(i,hs({},this._spec[bT.point.name],{visible:!0})),this._symbolActiveMark.state.changeStateInfo({stateValue:Q.STATE_DIMENSION_HOVER,filter:()=>!0})))}initLabelMarkStyle(e){var t;e&&("symbol"!==(null==(t=e.getTarget())?void 0:t.type)&&e.setRule("line-data"),this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null}),"zero"!==this._invalidType&&this.setMarkStyle(e,{visible:this._getInvalidDefined.bind(this)},"normal",q.Series),this.event.on(N.viewDataStatisticsUpdate,{filter:e=>e.model===this},()=>{this.encodeDefined(e,"visible")}))}initLineLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>{var t;return null!=(t=e[this.getSeriesField()])?t:this.getSeriesKeys()[0]},z:this._fieldZ?this.dataToPositionZ.bind(this):null})}encodeDefined(e,t){var i,r,n,l;if(!e)return;let o=this._isFieldAllValid();if("zero"===this._invalidType||o){if(!0===(null==(r=null==(i=e.stateStyle.normal)?void 0:i[t])?void 0:r.style))return;this.setMarkStyle(e,{[t]:!0},"normal",q.Series)}else{if(!0!==(null==(l=null==(n=e.stateStyle.normal)?void 0:n[t])?void 0:l.style))return;this.setMarkStyle(e,{[t]:this._getInvalidDefined.bind(this)},"normal",q.Series)}e.compileEncode()}_isFieldAllValid(){let e=this.getViewDataStatistics(),t=this.getStackValueField();return!!(e&&e.latestData&&t)&&e.latestData[t]&&e.latestData[t].allValid}}let bE=Object.assign(Object.assign({},bo),bT),bP=(e,t)=>{var i,r;if(e===t)return!0;let n=null!=(i=e&&e.length)?i:0;return n===(null!=(r=t&&t.length)?r:0)&&0!==n&&e.every((e,i)=>!e&&!t[i]||e&&t[i]&&e.color===t[i].color&&e.offset===t[i].offset)},bB=(e,t)=>{if(e===t)return!0;if(typeof e!=typeof t||(0,r6.Z)(e))return!1;if((0,ri.Z)(e))return e.length===t.length&&e.every((e,i)=>bB(e,t[i]));if(e.gradient!==t.gradient)return!1;let i=Object.keys(e),r=Object.keys(t);return i.length===r.length&&i.every(i=>"stops"===i?bP(e[i],t[i]):e[i]===t[i])},bI=(e,t)=>e.length===t.length&&e.join("-")===t.join("-"),bL=(e,t,i)=>!(!(0,r5.Z)(e)||!(0,r5.Z)(t))||!(0,r5.Z)(e)&&!(0,r5.Z)(t)&&("lineDash"===i?bI(e,t):"stroke"===i||"fill"===i?bB(e,t):e===t),bF=["stroke","strokeOpacity","lineDash","lineDashOffset","lineCap","lineJoin","lineWidth","miterLimit"];class bH extends pz{constructor(){super(...arguments),this._segmentStyleKeys=[],this._isValidPointChannel=e=>["x","y","defined"].includes(e)}_getSegmentAttributes(){return bF}initStyleWithSpec(e){this._segmentStyleKeys=[],super.initStyleWithSpec(e)}setStyle(e,t="normal",i=0){if((0,r5.Z)(e))return;void 0===this.stateStyle[t]&&(this.stateStyle[t]={});let r=this._getIgnoreAttributes(),n=this._getSegmentAttributes(),l=this.isUserLevel(i);Object.keys(e).forEach(o=>{let a=e[o];if((0,r5.Z)(a)||r.includes(o))return;l&&n.includes(o)&&((0,cz.dx)(null==a?void 0:a.type)||(null==a?void 0:a.scale)||(0,nr.Z)(a))&&(this._segmentStyleKeys.includes(o)||this._segmentStyleKeys.push(o));let s=this._filterAttribute(o,a,t,i,l);this.setAttribute(o,s,t,i)})}_getLineSegments(e,t){if(!this._segmentStyleKeys||!this._segmentStyleKeys.length)return null;let i=[],r=null;return e.forEach((e,t)=>{r&&this._segmentStyleKeys.every(t=>bL(r[t],e[t],t))||(i.length&&(i[i.length-1].endIndex=t),r=e,i.push({attrs:r,startIndex:t}))}),i.length>=2?i.map(e=>Object.assign(Object.assign({},e.attrs),{points:t.slice(e.startIndex,(0,r5.Z)(e.endIndex)?t.length:e.endIndex)})):null}_getPrevPoints(e){let{points:t,segments:i}=e.attribute;return null!=t?t:i?i.reduce((e,t)=>(t.points&&t.points.forEach(t=>{e.push(t)}),e),[]):null}_runPointsEncoder(e,t,i={}){var r,n,l;let o=t.context.data,a=[],s=[],h={},d=null==(r=this.renderContext)?void 0:r.progressive,u=d&&0===d.currentIndex;if(o.forEach((t,i)=>{var r;s[i]={},a[i]={},Object.keys(e).forEach(r=>{this._isValidPointChannel(r)?s[i][r]=e[r](t):this._segmentStyleKeys.includes(r)&&!d?a[i][r]=e[r](t):0!==i||d&&!u||(h[r]=e[r](t))}),s[i].context=null!=(r=this._keyGetter(t))?r:i}),d){let e=null!=(l=null==(n=t.attribute)?void 0:n.segments)?l:[];return e.push({points:s}),u?Object.assign(Object.assign({},h),{segments:e}):{segments:e}}if(this._segmentStyleKeys&&this._segmentStyleKeys.length){let e=this._getLineSegments(a,s);if(e)return Object.assign(Object.assign(Object.assign({},h),a[0]),{segments:e,points:null})}return Object.assign(Object.assign(Object.assign({},h),a[0]),{points:s,segments:null})}_runEncoderOfGraphic(e,t,i={}){let r=t.context.data;return e&&Object.keys(e).some(this._isValidPointChannel)&&r&&r.length?this._runPointsEncoder(e,t,i):super._runEncoderOfGraphic(e,t,i)}_getDataByKey(e){return this._dataByGroup}_runProgressiveJoin(){let e=this.renderContext.progressive.currentIndex,t=[];this._dataByGroup.keys.forEach((i,r)=>{let n=this.renderContext.progressive.groupedData.get(i),l=this.renderContext.progressive.step,o=n.slice(e*l,(e+1)*l);if(0===e){let e={context:Object.assign(Object.assign({},this._getCommonContext()),{diffState:J.enter,data:o,uniqueKey:i,key:i,groupKey:i})};t.push(e)}else this._graphics[r].context.data=o});let i=0===e?t:this._graphics;return{graphicsByGroup:{[dm]:i},graphics:i,needUpdate:!1}}_setCommonAttributesToTheme(e){}_addProgressiveGraphic(e,t){t.incremental=1,e.appendChild(t)}}let bO=["segments","points","curveType","curveTension",...l7];class bD extends on{constructor(e={}){super(e),this.type="line",this.numberType=lH}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;let{points:e,segments:t}=this.attribute;return t?0!==t.length:!!e&&!(e.length<=1)}_interpolate(e,t,i,r,n){"points"===e&&(n.points=nb(i,r,t))}getGraphicTheme(){return r4(this).line}updateAABBBounds(e,t,i){this.updatePathProxyAABBBounds(i)||(e.segments?this.updateLineAABBBoundsBySegments(e,t,i):this.updateLineAABBBoundsByPoints(e,t,i)),tU.graphicService.updateTempAABBBounds(i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;let{lineJoin:r=t.lineJoin}=e;return tU.graphicService.transformAABBBounds(e,i,t,"miter"===r,this),i}updateLineAABBBoundsByPoints(e,t,i,r){let{points:n=t.points,connectedType:l}=e;return n.forEach(e=>{!1===e.defined&&"connect"!==l||i.add(e.x,e.y)}),i}updateLineAABBBoundsBySegments(e,t,i,r){let{segments:n=t.segments,connectedType:l}=e;return n.forEach(e=>{e.points.forEach(e=>{!1===e.defined&&"connect"!==l||i.add(e.x,e.y)})}),i}needUpdateTags(e){return super.needUpdateTags(e,bO)}needUpdateTag(e){return super.needUpdateTag(e,bO)}toCustomPath(){let e=super.toCustomPath();if(e)return e;let t=this.attribute;e=new iZ;let i=t.segments,r=t=>{if(t&&t.length){let i=!0;t.forEach(t=>{!1!==t.defined&&(i?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y),i=!1)})}};return i&&i.length?i.forEach(e=>{r(e.points)}):t.points&&r(t.points),e}clone(){return new bD(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return bD.NOWORK_ANIMATE_ATTR}}function bz(e){return new bD(e)}bD.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},or);let bW=!1,bZ=new tb(e=>{bW||(bW=!0,e(aX).toSelf().inSingletonScope(),e(aY).toSelf().inSingletonScope(),e(ox).to(aX).inSingletonScope(),e(o_).toService(ox))});class bN extends aG{contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;r.highPerformanceSave();let n=e.getGraphicTheme(),{x:l,y:o,z:a,lastModelMatrix:s}=this.transform(e,n,r),h=t;if(r.camera){h=t.clone();let i=e.parent.globalTransMatrix;h.x=i.a*t.x+i.c*t.y+i.e,h.y=i.b*t.x+i.d*t.y+i.f}this.canvasRenderer.z=a;let d=!1;return this.canvasRenderer.drawShape(e,r,l,o,{},null,e=>!!d||(d=e.isPointInPath(h.x,h.y)),(e,t,i)=>{if(d)return!0;let n=t.lineWidth||i.lineWidth,l=t.pickStrokeBuffer||i.pickStrokeBuffer;return r.lineWidth=t.keepStrokeScale||i.keepStrokeScale?n+l:rl(r,n+l,r.dpr),d=e.isPointInStroke(h.x,h.y)}),this.canvasRenderer.z=0,r.modelMatrix!==s&&l2.free(r.modelMatrix),r.modelMatrix=s,r.highPerformanceRestore(),d}}let b$=class extends bN{constructor(e){super(),this.canvasRenderer=e,this.type="line",this.numberType=lH}};b$=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(eh=tT(ox),function(e,t){eh(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],b$);let bj=!1,bG=new tb((e,t,i,r)=>{bj||(bj=!0,e(uu).to(b$).inSingletonScope(),e(u_).toService(uu))}),bV=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="line",this.numberType=lH}};bV=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(ed=tT(ox),function(e,t){ed(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],bV);let bU=!1,bK=new tb((e,t,i,r)=>{bU||(bU=!0,e(ue).to(bV).inSingletonScope(),e(d5).toService(ue))});function bX(){bX.__loaded||(bX.__loaded=!0,oq.RegisterGraphicCreator("line",bz),tG.load(bZ),tG.load(d4?bG:bK))}bX.__loaded=!1;var bY=i(56874);let bq=["#ffffff","#000000"];function bJ(e,t,i,r,n,l){if("string"!=typeof e||"string"!=typeof t)return e;let o=new s4.Il(e).toHex(),a=new s4.Il(t).toHex();return bQ(o,a,i,r,l)?o:function(e,t,i,r,n,l){let o=[];for(let a of(n&&(n instanceof Array?o.push(...n):o.push(n)),o.push(...bq),o))if(e!==a&&bQ(a,t,i,r,l))return a}(o,a,i,r,n,l)}function bQ(e,t,i,r,n){if("lightness"===n){let i=s4.Il.getColorBrightness(new s4.Il(t));return .5>s4.Il.getColorBrightness(new s4.Il(e))?i>=.5:i<.5}return r?b0(e,t)>r:"largeText"===i?b0(e,t)>3:b0(e,t)>4.5}function b0(e,t){let i=b1(e),r=b1(t);return((i>r?i:r)+.05)/((i>r?r:i)+.05)}function b1(e){let t=(0,bY.Z)(e),i=t[0]/255,r=t[1]/255,n=t[2]/255;return .2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}function b2(e,t,i,r){let n;switch(e){case"base":n=t;break;case"invertBase":n=i;break;case"similarBase":n=r}return n}function b3(e,t){e.forEachChildren(e=>{let i=t(e);e.isContainer&&!i&&b3(e,t)})}let b4=e=>!(0,r5.Z)(e)&&!1!==e.visible;function b5(e){return e>=0&&e<Math.PI/2||e>3*Math.PI/2&&e<=2*Math.PI}function b6(e,t,i){return Math.abs(e-t)<i}function b8(e,t,i){return e?{textAlign:"right",textBaseline:"middle"}:{textAlign:t<Math.PI&&i.toLocaleLowerCase().includes("top")||t>Math.PI&&i.toLocaleLowerCase().includes("bottom")?"left":t<Math.PI&&i.toLocaleLowerCase().includes("bottom")||t>Math.PI&&i.toLocaleLowerCase().includes("top")?"right":"center",textBaseline:t<Math.PI&&i.includes("inside")||t>Math.PI&&!i.includes("inside")?"bottom":"top"}}let b7=new Uint32Array(33),b9=new Uint32Array(33);b9[0]=0,b7[0]=~b9[0];for(let e=1;e<=32;++e)b9[e]=b9[e-1]<<1|1,b7[e]=~b9[e];function ye(e,t,i={top:0,left:0,right:0,bottom:0}){let{top:r=0,left:n=0,right:l=0,bottom:o=0}=i,a=Math.max(1,Math.sqrt(e*t/1e6)),s=~~((e+n+l+a)/a),h=~~((t+r+o+a)/a),d=e=>~~(e/a);return d.bitmap=()=>(function(e,t){let i=new Uint32Array(~~((e*t+32)/32));return{array:i,get:(t,r)=>{let n=r*e+t;return i[n>>>5]&1<<(31&n)},set:(t,r)=>{let n=r*e+t;i[n>>>5]|=1<<(31&n)},clear:(t,r)=>{let n=r*e+t;i[n>>>5]&=~(1<<(31&n))},getRange:({x1:r,y1:n,x2:l,y2:o})=>{if(l<0||o<0||r>e||n>t)return!0;let a,s,h,d,u=o;for(;u>=n;--u)if(a=u*e+r,s=u*e+l,(h=a>>>5)==(d=s>>>5)){if(i[h]&b7[31&a]&b9[1+(31&s)])return!0}else{if(i[h]&b7[31&a]||i[d]&b9[1+(31&s)])return!0;for(let e=h+1;e<d;++e)if(i[e])return!0}return!1},setRange:({x1:r,y1:n,x2:l,y2:o})=>{var a,s,h,d;let u,c,p,g,f;if(!(l<0)&&!(o<0)&&!(r>e)&&!(n>t))for(;n<=o;++n)if(u=n*e+r,c=n*e+l,(p=u>>>5)==(g=c>>>5))a=b7[31&u]&b9[1+(31&c)],i[p]|=a;else for(s=b7[31&u],i[p]|=s,h=b9[1+(31&c)],i[g]|=h,f=p+1;f<g;++f)d=f,i[d]|=0xffffffff},clearRange:({x1:t,y1:r,x2:n,y2:l})=>{var o,a,s,h;let d,u,c,p,g;for(;r<=l;++r)if(d=r*e+t,u=r*e+n,(c=d>>>5)==(p=u>>>5))o=b9[31&d]|b7[1+(31&u)],i[c]&=o;else for(a=b9[31&d],i[c]&=a,s=b7[1+(31&u)],i[p]&=s,g=c+1;g<p;++g)h=g,i[h]&=0},outOfBounds:({x1:i,y1:r,x2:n,y2:l})=>i<0||r<0||l>=t||n>=e,toImageData:r=>{let n=r.createImageData(e,t),l=n.data;for(let r=0;r<t;++r)for(let t=0;t<e;++t){let n=r*e+t,o=4*n,a=i[n>>>5]&1<<(31&n);l[o+0]=255*a,l[o+1]=255*a,l[o+2]=255*a,l[o+3]=31}return n}}})(s,h),d.x=e=>~~((e+n)/a),d.y=e=>~~((e+r)/a),d.ratio=a,d.padding=i,d.width=e,d.height=t,d}function yt(e,t){let{x1:i,x2:r,y1:n,y2:l}=t,{top:o=0,left:a=0,right:s=0,bottom:h=0}=e.padding,d=(0,g9.Z)(i,-a,e.width+s),u=(0,g9.Z)(r,-a,e.width+s),c=(0,g9.Z)(n,-o,e.height+h),p=(0,g9.Z)(l,-o,e.height+h);return{x1:e.x(d),x2:e.x(u),y1:e.y(c),y2:e.y(p)}}function yi(e,t,i=!1){return i?yt(e,t):{x1:e.x(t.x1),x2:e.x(t.x2),y1:e.y(t.y1),y2:e.y(t.y2)}}function yr(e,t,i,r=!0,n=0){let l=i;n>0&&(l={x1:i.x1-n,x2:i.x2+n,y1:i.y1-n,y2:i.y2+n}),l=yi(e,l);let o=t.outOfBounds(l);return(!r||!o)&&(o&&(l=yt(e,l)),!t.getRange(l))}function yn(e,t,i,r=[],n=!0,l=0,o=!1){var a,s,h,d;let u,c=r.filter(e=>(0,oV.Z)(e)),p=null!=(a=i.attribute.x)?a:0,g=null!=(s=i.attribute.y)?s:0,f=i.AABBBounds,m={x1:f.x1,x2:f.x2,y1:f.y1,y2:f.y2};for(let i=0;i<c.length;i++){let r=c[i];u=r;let o=(null!=(h=r.x)?h:p)-p,a=(null!=(d=r.y)?d:g)-g;if(m.x1=f.x1+o,m.x2=f.x2+o,m.y1=f.y1+a,m.y2=f.y2+a,yr(e,t,m,n,l))return t.setRange(yi(e,m,!0)),r}return o&&u&&i.setAttributes(u),!1}let yl=["top","bottom","right","left","top-right","bottom-right","top-left","bottom-left"],yo=["top","inside-top","inside"];function ya(e,t,i,r={}){let{x1:n,x2:l,y1:o,y2:a}=e.AABBBounds,{top:s=0,left:h=0,right:d=0,bottom:u=0}=r,c=Math.min(n,l),p=Math.max(n,l),g=Math.min(o,a),f=Math.max(o,a),m=t+d,b=i+u,y=0,v=0;return c<0-h?y=-c:p>m&&(y=m-p),g<0-s?v=-g:f>b&&(v=b-f),{dx:y,dy:v}}let ys={mode:"same-time",duration:300,easing:"linear"};function yh(e){return 3===e||4===e}let yd=(e,t,i="top",r=0)=>{if(!e)return;let{x1:n,y1:l,x2:o,y2:a}=e,s=Math.abs(o-n),h=Math.abs(a-l),d=(t.x1+t.x2)/2,u=(t.y1+t.y2)/2,c=0,p=0,g=0,f=0;t&&(g=Math.abs(t.x1-t.x2)/2,f=Math.abs(t.y1-t.y2)/2);let m={"top-right":-235,"top-left":235,"bottom-right":45,"bottom-left":-45};switch(i){case"top":p=-1;break;case"bottom":p=1;break;case"left":c=-1;break;case"right":c=1;break;case"bottom-left":case"bottom-right":case"top-left":case"top-right":c=Math.sin(m[i]*(Math.PI/180)),p=Math.cos(m[i]*(Math.PI/180));break;case"center":c=0,p=0}return{x:d+c*(r+g)+s/2*Math.sign(c),y:u+p*(r+f)+h/2*Math.sign(p)}},yu=e=>{if(!e||!e.attribute)return[];let{points:t,segments:i}=e.attribute;if(i&&i.length){let e=[];return i.forEach(t=>{t.points.forEach(t=>{e.push(t)})}),e}return t};function yc(e,t,i,r,n,l){return Math.abs(t/e)<l/n?{x:i+(e>0?n:-n),y:r+t*n/Math.abs(e)}:{x:i+e*l/Math.abs(t),y:r+(t>0?l:-l)}}class yp{constructor(e,t,i,r,n,l,o,a,s,h,d,u,c,p){this.left=e,this.top=t,this.width=i,this.height=r,this.actualHeight=0,this.bottom=t+r,this.right=e+i,this.ellipsis=n,this.wordBreak=l,this.verticalDirection=o,this.lines=[],this.globalAlign=a,this.globalBaseline=s,this.layoutDirection=h,this.directionKey=ra[this.layoutDirection],this.isWidthMax=d,this.isHeightMax=u,this.singleLine=c,p?(p.clear(),this.icons=p):this.icons=new Map}draw(e,t){let{width:i,height:r}=this.getActualSize(),n=this.isWidthMax?Math.min(this.width,i):this.width||i||0,l=this.isHeightMax?Math.min(this.height,r):this.height||r||0;l=Math.min(l,r);let o=0;switch(this.globalBaseline){case"top":o=0;break;case"middle":o=-l/2;break;case"bottom":o=-l}let a=0;"right"===this.globalAlign||"end"===this.globalAlign?a=-n:"center"===this.globalAlign&&(a=-n/2);let s=this[this.directionKey.height];this.singleLine&&(s=this.lines[0].height+1);let h=!1;if("middle"===this.verticalDirection)if(this.actualHeight>=s&&0!==s)for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i];if(r+n<this[this.directionKey.top]||r+n>this[this.directionKey.top]+s)break;let l=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+s&&(l=!0,h=!0),this.lines[i].draw(e,l,this.lines[i][this.directionKey.left]+a,this.lines[i][this.directionKey.top]+o,this.ellipsis,t)}else{let i=Math.floor((s-this.actualHeight)/2);"vertical"===this.layoutDirection?a+=i:o+=i;for(let i=0;i<this.lines.length;i++)this.lines[i].draw(e,!1,this.lines[i][this.directionKey.left]+a,this.lines[i][this.directionKey.top]+o,this.ellipsis,t)}else if("bottom"===this.verticalDirection&&"vertical"!==this.layoutDirection)for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i],l=s-this.lines[i].top-this.lines[i].height;if(0===s)this.lines[i].draw(e,!1,a,l+o,this.ellipsis,t);else{if(l+n>this[this.directionKey.top]+s||l<this[this.directionKey.top])return h;{let r=!1;this.ellipsis&&this.lines[i+1]&&l-this.lines[i+1].height<this[this.directionKey.top]&&(r=!0,h=!0),this.lines[i].draw(e,r,a,l+o,this.ellipsis,t)}}}else{"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&this.singleLine&&this.isWidthMax&&(a+=this.lines[0].height+1);for(let i=0;i<this.lines.length;i++){"bottom"===this.verticalDirection&&"vertical"===this.layoutDirection&&(a-=this.lines[i].height+this.lines[i].top);let{top:r,height:n}=this.lines[i];if(0===s)this.lines[i].draw(e,!1,this.lines[i][this.directionKey.left]+a,this.lines[i][this.directionKey.top]+o,this.ellipsis,t);else{if(r+n<this[this.directionKey.top]||r+n>this[this.directionKey.top]+s)return h;{let r=!1;this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+s&&(r=!0,h=!0),this.lines[i].draw(e,r,this.lines[i][this.directionKey.left]+a,this.lines[i][this.directionKey.top]+o,this.ellipsis,t)}}}}return h}getActualSize(){return this.ellipsis?this.getActualSizeWidthEllipsis():this.getRawActualSize()}getRawActualSize(){let e=0,t=0;for(let i=0;i<this.lines.length;i++){let r=this.lines[i];r.actualWidth>e&&(e=r.actualWidth),t+=r.height}return{width:"vertical"===this.layoutDirection?t:e,height:"vertical"===this.layoutDirection?e:t}}getActualSizeWidthEllipsis(){let e=0,t=0,{width:i,height:r}=this.getRawActualSize();this.width;let n=this.height||r||0;n=Math.min(n,r);let l=this[this.directionKey.height];if(this.singleLine&&(l=this.lines[0].height+1),"middle"===this.verticalDirection)if(this.actualHeight>=l&&0!==l)for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i];if(r+n<this[this.directionKey.top]||r+n>this[this.directionKey.top]+l);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+l){let r=!0===this.ellipsis?"...":this.ellipsis||"",n=this.lines[i].getWidthWithEllips(r);n>e&&(e=n),t+=this.lines[i].height}else this.lines[i].actualWidth>e&&(e=this.lines[i].actualWidth),t+=this.lines[i].height}else{this.actualHeight;for(let i=0;i<this.lines.length;i++)this.lines[i].actualWidth>e&&(e=this.lines[i].actualWidth),t+=this.lines[i].height}else if("bottom"===this.verticalDirection)for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i],o=l-this.lines[i].top-this.lines[i].height;if(0===l)this.lines[i].actualWidth>e&&(e=this.lines[i].actualWidth),t+=this.lines[i].height;else if(o+n>this[this.directionKey.top]+l||o<this[this.directionKey.top]);else if(this.ellipsis&&this.lines[i+1]&&o-this.lines[i+1].height<this[this.directionKey.top]){let r=!0===this.ellipsis?"...":this.ellipsis||"",n=this.lines[i].getWidthWithEllips(r);n>e&&(e=n),t+=this.lines[i].height}else this.lines[i].actualWidth>e&&(e=this.lines[i].actualWidth),t+=this.lines[i].height}else for(let i=0;i<this.lines.length;i++){let{top:r,height:n}=this.lines[i];if(0===l)this.lines[i].actualWidth>e&&(e=this.lines[i].actualWidth),t+=this.lines[i].height;else if(r+n<this[this.directionKey.top]||r+n>this[this.directionKey.top]+l);else if(this.ellipsis&&this.lines[i+1]&&this.lines[i+1].top+this.lines[i+1].height>this[this.directionKey.top]+l){let r=!0===this.ellipsis?"...":this.ellipsis||"",n=this.lines[i].getWidthWithEllips(r);n>e&&(e=n),t+=this.lines[i].height}else this.lines[i].actualWidth>e&&(e=this.lines[i].actualWidth),t+=this.lines[i].height}return{width:"vertical"===this.layoutDirection?t:e,height:"vertical"===this.layoutDirection?e:t}}}function yg(e,t,i,r){let n=Math.round(e),l=Math.round(i),o=Math.round(t),a=Math.round(r);return{left:e>n?n:n-.5,top:i>l?l:l-.5,right:o>t?o:o+.5,bottom:a>r?a:a+.5}}class yf{constructor(e,t,i,r){var n,l;this.fontSize=i.fontSize||16,this.textBaseline=i.textBaseline||"alphabetic",this.ascentDescentMode=r;let o=nx(i.lineHeight,this.fontSize);this.lineHeight="number"==typeof o?o>this.fontSize?o:this.fontSize:Math.floor(1.2*this.fontSize),this.height=this.lineHeight;let{ascent:a,height:s,descent:h,width:d}=rf(e,i,this.ascentDescentMode),u=0,c=0,p=0;this.height>s&&(c=Math.ceil(u=(this.height-s)/2),p=Math.floor(u)),"top"===this.textBaseline?(this.ascent=u,this.descent=s-u):"bottom"===this.textBaseline?(this.ascent=s-u,this.descent=u):"middle"===this.textBaseline?(this.ascent=this.height/2,this.descent=this.height/2):(this.ascent=a+c,this.descent=h+p),this.length=e.length,this.width=d||0,this.text=e||"",this.newLine=t||!1,this.character=i,this.left=0,this.top=0,this.ellipsis="normal",this.ellipsisWidth=0,this.ellipsisOtherParagraphWidth=0,this.space=i.space,this.dx=null!=(n=i.dx)?n:0,this.dy=null!=(l=i.dy)?l:0,"vertical"===i.direction&&(this.direction=i.direction,this.widthOrigin=this.width,this.heightOrigin=this.height,this.width=this.heightOrigin,this.height=this.widthOrigin,this.lineHeight=this.height),this.ellipsisStr="..."}updateWidth(){let{width:e}=rf(this.text,this.character,this.ascentDescentMode);this.width=e,"vertical"===this.direction&&(this.widthOrigin=this.width,this.width=this.heightOrigin,this.height=this.widthOrigin)}drawBackground(e,t,i,r,n,l,o){if(""===this.text||"\n"===this.text||!this.character.background||this.character.backgroundOpacity&&!(this.character.backgroundOpacity>0))return;let a=t+i,s=this.text,h=this.left+r;a+=this.top;let d=this.direction;if(this.verticalEllipsis)s=this.ellipsisStr,d="vertical",a-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)s+=this.ellipsisStr,"right"!==l&&"end"!==l||(h-=this.ellipsisWidth);else if("replace"===this.ellipsis){let e=rp(s,("vertical"===d?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,s.length-1);if(s=s.slice(0,e)+this.ellipsisStr,"right"===l||"end"===l)if("vertical"===d);else{let{width:t}=rf(this.text.slice(e),this.character,this.ascentDescentMode);h-=this.ellipsisWidth-t}}}return Object.assign(Object.assign({},yg(h,h+(this.widthOrigin||this.width),t,t+o)),{fillStyle:this.character.background,globalAlpha:this.character.backgroundOpacity})}draw(e,t,i,r,n,l,o){var a;let s=t+i,h=this.text,d=this.left+r+(null!=(a=this.space)?a:0)/2;s+=this.top;let u=this.direction;if(this.verticalEllipsis)h=this.ellipsisStr,u="vertical",s-=this.ellipsisWidth/2;else{if("hide"===this.ellipsis)return;if("add"===this.ellipsis)h+=this.ellipsisStr,"right"!==l&&"end"!==l||(d-=this.ellipsisWidth);else if("replace"===this.ellipsis){let e=rp(h,("vertical"===u?this.height:this.width)-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,h.length-1);if(h=h.slice(0,e)+this.ellipsisStr,"right"===l||"end"===l)if("vertical"===u);else{let{width:t}=rf(this.text.slice(e),this.character,this.ascentDescentMode);d-=this.ellipsisWidth-t}}}switch(this.character.script){case"super":s-=this.ascent*(1/3);break;case"sub":s+=this.descent/2}"vertical"===u&&(e.save(),e.rotateAbout(Math.PI/2,d,s),e.translate(-this.heightOrigin||-this.lineHeight/2,-this.descent/2),e.translate(d,s),d=0,s=0);let{lineWidth:c=1}=this.character;if(this.character.stroke&&c&&e.strokeText(h,d+this.dx,s+this.dy),this.character.fill&&e.fillText(h,d+this.dx,s+this.dy),this.character.fill){if(this.character.lineThrough||this.character.underline){if(this.character.underline){let t=1+s,i=yg(d,d+(this.widthOrigin||this.width),t,t+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));e.fillRect(i.left,1+s,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}if(this.character.lineThrough){let t=1+s-this.ascent/2,i=yg(d,d+(this.widthOrigin||this.width),t,t+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));e.fillRect(i.left,1+s-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}else if("underline"===this.character.textDecoration){let t=1+s,i=yg(d,d+(this.widthOrigin||this.width),t,t+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));e.fillRect(i.left,1+s,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}else if("line-through"===this.character.textDecoration){let t=1+s-this.ascent/2,i=yg(d,d+(this.widthOrigin||this.width),t,t+(this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1));e.fillRect(i.left,1+s-this.ascent/2,i.right-i.left,this.character.fontSize?Math.max(1,Math.floor(this.character.fontSize/10)):1)}}"vertical"===u&&e.restore()}getWidthWithEllips(e){let t=this.text,i="vertical"===e?this.height:this.width;if("hide"===this.ellipsis)return i;if("add"===this.ellipsis)return i+this.ellipsisWidth;if("replace"===this.ellipsis){let e=rp(t,i-this.ellipsisWidth+this.ellipsisOtherParagraphWidth,this.character,t.length-1);t=t.slice(0,e)+this.ellipsisStr;let{width:r}=rf(this.text.slice(e),this.character,this.ascentDescentMode);return i+this.ellipsisWidth-r}return i}}let ym=["width","height","image",...l7];class yb extends on{constructor(e){super(e),this.type="image",this.numberType=lF,this.loadImage(this.attribute.image)}getImageElement(){let{image:e}=this.attribute;if(!e||!this.resources)return null;let t=this.resources.get(e);return"success"!==t.state?null:t.data}get width(){return this.tryUpdateAABBBounds(),this._actualWidth}get height(){return this.tryUpdateAABBBounds(),this._actualHeight}get repeatX(){var e;return null!=(e=this.attribute.repeatX)?e:"no-repeat"}set repeatX(e){this.attribute.repeatX===e&&(this.attribute.repeatX=e)}get repeatY(){var e;return null!=(e=this.attribute.repeatY)?e:"no-repeat"}set repeatY(e){this.attribute.repeatY===e&&(this.attribute.repeatY=e)}get image(){return this.attribute.image}set image(e){e!==this.attribute.image&&(this.attribute.image=e,this.loadImage(this.attribute.image))}imageLoadSuccess(e,t,i){super.imageLoadSuccess(e,t,()=>{this.successCallback&&this.successCallback()}),this.addUpdateBoundTag()}imageLoadFail(e,t){super.imageLoadFail(e,()=>{this.failCallback&&this.failCallback()})}setAttributes(e,t,i){return e.image&&this.loadImage(e.image),super.setAttributes(e,t,i)}setAttribute(e,t,i,r){return"image"===e&&this.loadImage(t),super.setAttribute(e,t,i,r)}getGraphicTheme(){return r4(this).image}updateAABBBounds(e,t,i){if(!this.updatePathProxyAABBBounds(i)){let{maxWidth:r=t.maxWidth,maxHeight:n=t.maxHeight}=e,{width:l,height:o}=e;if(null==l||null==o){let e=this.getImageElement();if(e){let t=e.width,i=e.height;if(null!=l)o=i/t*l;else if(null!=o)l=t/i*o;else{let e=t/i;e>r/n?(l=r,o=r/e):(o=n,l=n*e)}}else l=r,o=n}this._actualWidth=l,this._actualHeight=o,i.set(0,0,l,o)}let{tb1:r,tb2:n}=tU.graphicService.updateTempAABBBounds(i);return uj(e,t,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,tU.graphicService.transformAABBBounds(e,i,t,!1,this),i}getDefaultAttribute(e){return re[e]}needUpdateTags(e){return super.needUpdateTags(e,ym)}needUpdateTag(e){return super.needUpdateTag(e,ym)}clone(){return new yb(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return yb.NOWORK_ANIMATE_ATTR}}function yy(e){return new yb(e)}yb.NOWORK_ANIMATE_ATTR=Object.assign({image:1,repeatX:1,repeatY:1},or);class yv extends yb{constructor(e){if(super(e),this._x=0,this._y=0,this._hovered=!1,this._marginArray=[0,0,0,0],"always"===e.backgroundShowMode&&(this._hovered=!0),e.margin){let t=nc(e.margin);this._marginArray="number"==typeof t?[t,t,t,t]:t}this.onBeforeAttributeUpdate=(e,t,i)=>{if((0,ri.Z)(i)&&-1!==i.indexOf("margin")||"margin"===i)if(t.margin){let e=nc(t.margin);this._marginArray="number"==typeof e?[e,e,e,e]:e}else this._marginArray=[0,0,0,0]}}get width(){var e;return(null!=(e=this.attribute.width)?e:0)+this._marginArray[1]+this._marginArray[3]}get height(){var e;return(null!=(e=this.attribute.height)?e:0)+this._marginArray[0]+this._marginArray[2]}tryUpdateAABBBounds(){if(!this.shouldUpdateAABBBounds())return this._AABBBounds;this.doUpdateAABBBounds();let{width:e=re.width,height:t=re.height}=this.attribute,{backgroundWidth:i=e,backgroundHeight:r=t}=this.attribute;return this._AABBBounds.expand([0,(i-e)/2*2,(r-t)/2*2,0]),this._AABBBounds}setHoverState(e){"hover"===this.attribute.backgroundShowMode&&this._hovered!==e&&(this._hovered=e)}}class y_{constructor(e,t,i,r,n,l,o,a){this.left=e,this.width=t,this.baseline=i,this.ascent=r,this.descent=n,this.top=i-r,this.paragraphs=l.map(e=>e),this.textAlign=(this.paragraphs[0]instanceof yv?this.paragraphs[0].attribute.textAlign:this.paragraphs[0].character.textAlign)||"left",this.direction=o,this.directionKey=ra[this.direction],this.actualWidth=0;let s=0;this.paragraphs.forEach((e,t)=>{if(0===t&&e instanceof yf){let t=ru.exec(e.text);0!==(null==t?void 0:t.index)&&(e.text=e.text.slice(null==t?void 0:t.index),e.updateWidth())}this.actualWidth+=e[this.directionKey.width],s=Math.max(e[this.directionKey.height],s)}),this.height=s,this.blankWidth=a?0:this.width-this.actualWidth,this.calcOffset(t,a)}calcOffset(e,t){let i=this.directionKey,r=this.height,n=this.left,l=0;this.actualWidth<e&&!t&&("right"===this.textAlign||"end"===this.textAlign?n=e-this.actualWidth:"center"===this.textAlign?n=(e-this.actualWidth)/2:"justify"===this.textAlign&&(this.paragraphs.length<2?n=(e-this.actualWidth)/2:l=(e-this.actualWidth)/(this.paragraphs.length-1))),this.paragraphs.map(function(e){e instanceof yv?(e["_"+i.x]=n,n+=e[i.width]+l,e["_"+i.y]="top"===e.attribute.textBaseline?0:"bottom"===e.attribute.textBaseline?r-e.height:(r-e.height)/2):(e[i.left]=n,n+=e[i.width]+l)})}draw(e,t,i,r,n,l){if(n&&(t||this.paragraphs.some(e=>e.overflow))){let e=!0,i=!1;for(let t=this.paragraphs.length-1;t>=0;t--){let r=this.paragraphs[t];if(r.overflow)e=e&&""===r.text;else if(e){i=!0;break}}let r=0;if(!i)for(let e=this.paragraphs.length-1;e>=0;e--){let i=this.paragraphs[e];if(i.overflow){if(""===i.text)break;continue}if(i instanceof yv)break;if("vertical"===this.direction&&"vertical"!==i.direction){i.verticalEllipsis=!0;break}let l=!0===n?"...":n||"";i.ellipsisStr=l;let{width:o}=rf(l,i.character,i.ascentDescentMode),a=o||0;if(a<=this.blankWidth+r){t&&(i.ellipsis="add");break}if(a<=this.blankWidth+r+i.width){i.ellipsis="replace",i.ellipsisWidth=a,i.ellipsisOtherParagraphWidth=this.blankWidth+r;break}i.ellipsis="hide",r+=i.width}}let o="",a=-1,s=[],h=[s];this.paragraphs.forEach((t,n)=>{if(t instanceof yv)return;let l=t.drawBackground(e,r,this.ascent,i,0===n,this.textAlign,this.height);l&&(o===l.fillStyle&&a===l.globalAlpha||(s=[],h.push(s),o=l.fillStyle,a=l.globalAlpha),s.push(l))}),h.forEach(t=>{if(0===t.length)return;let i=t[0],r=t[t.length-1];e.fillStyle=i.fillStyle,e.globalAlpha=i.globalAlpha,e.fillRect(i.left,i.top,r.right-i.left,r.bottom-i.top)}),this.paragraphs.forEach((t,n)=>{if(t instanceof yv)return t.setAttributes({x:i+t._x,y:r+t._y}),void l(t,e,i+t._x,r+t._y,this.ascent);let o={x1:this.left,y1:this.top,x2:this.left+this.actualWidth,y2:this.top+this.height};(function(e,t){let i=t&&t.stroke||rs.stroke;if(!i)return e.globalAlpha=0;let{strokeOpacity:r=1,opacity:n=1}=t;e.globalAlpha=r*n,e.lineWidth=t&&"number"==typeof t.lineWidth?t.lineWidth:1,e.strokeStyle=i,rc(e,t)})(e,t.character),function(e,t,i){let r=t&&t.fill||rs.fill;if(!r)return e.globalAlpha=0;let{fillOpacity:n=1,opacity:l=1}=t;e.globalAlpha=n*l,e.fillStyle=i?ro(e,r,{AABBBounds:i}):r,rc(e,t)}(e,t.character,o),t.draw(e,r,this.ascent,i,0===n,this.textAlign,this.height)})}getWidthWithEllips(e){let t=0;for(let i=this.paragraphs.length-1;i>=0;i--){let r=this.paragraphs[i];if(r instanceof yv)break;let{width:n}=rf(e,r.character,r.ascentDescentMode),l=n||0;if(l<=this.blankWidth+t){r.ellipsis="add",r.ellipsisWidth=l;break}if(l<=this.blankWidth+t+r.width){r.ellipsis="replace",r.ellipsisWidth=l,r.ellipsisOtherParagraphWidth=this.blankWidth+t;break}r.ellipsis="hide",t+=r.width}let i=0;return this.paragraphs.forEach((e,t)=>{i+=e instanceof yv?e.width:e.getWidthWithEllips(this.direction)}),i}}class yC{constructor(e){this.frame=e,this.width=this.frame.width,this.height=this.frame.height,this.lineWidth=0,this.y=this.frame.top,this.maxAscent=0,this.maxDescent=0,this.maxAscentForBlank=0,this.maxDescentForBlank=0,this.lineBuffer=[],this.direction=e.layoutDirection,this.directionKey=ra[this.direction]}store(e){if(e instanceof yv){this.frame.icons.set(e.richtextId,e),this.lineBuffer.push(e),this.lineWidth+=e[this.directionKey.width];let t=0,i=0;"top"===e.attribute.textBaseline?(t=0,i=e.height):"bottom"===e.attribute.textBaseline?(t=e.height,i=0):(t=e.height/2,i=e.height/2),this.maxAscent=Math.max(this.maxAscent,t),this.maxDescent=Math.max(this.maxDescent,i)}else this.lineBuffer.push(e),0!==e.text.length?(this.lineWidth+=e[this.directionKey.width],this.maxAscent=Math.max(this.maxAscent,e.ascent),this.maxDescent=Math.max(this.maxDescent,e.descent)):(this.maxAscentForBlank=Math.max(this.maxAscentForBlank,e.ascent),this.maxDescentForBlank=Math.max(this.maxDescentForBlank,e.descent))}send(){if(0===this.lineBuffer.length)return;let e=0===this.maxAscent?this.maxAscentForBlank:this.maxAscent,t=0===this.maxDescent?this.maxDescentForBlank:this.maxDescent,i=new y_(this.frame.left,this[this.directionKey.width],this.y+e,e,t,this.lineBuffer,this.direction,"horizontal"===this.direction?this.frame.isWidthMax:this.frame.isHeightMax);this.frame.lines.push(i),this.frame.actualHeight+=i.height,this.y+=i.height,this.lineBuffer.length=0,this.lineWidth=this.maxAscent=this.maxDescent=this.maxAscentForBlank=this.maxDescentForBlank=0}deal(e,t=!1){e instanceof yv?"horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+e[this.directionKey.width]<=this[this.directionKey.width]?this.store(e):0===this.lineBuffer.length?(this.store(e),this.send()):(this.send(),this.deal(e)):"number"!=typeof this.width||this.width<0||(e.newLine&&this.send(),(0!==e.text.length||this.newLine)&&("horizontal"===this.direction&&0===this.width||"vertical"===this.direction&&0===this.height||this.lineWidth+e[this.directionKey.width]<=this[this.directionKey.width]?this.store(e):this.lineWidth===this[this.directionKey.width]?(this.send(),this.deal(e)):this.cut(e,t)))}cut(e,t){let i=this[this.directionKey.width]-this.lineWidth||0,r=Math.ceil(i/e[this.directionKey.width]*e.length)||0,n=rp(e.text,i,e.character,r,"break-word"===this.frame.wordBreak);if(0!==n){let[i,r]=function(e,t){let i=e.text.slice(0,t),r=e.text.slice(t);return[new yf(i,e.newLine,e.character,e.ascentDescentMode),new yf(r,!0,e.character,e.ascentDescentMode)]}(e,n);this.store(i),t?this.send():this.deal(r)}else 0!==this.lineBuffer.length&&(this.send(),this.deal(e))}}let yx=!1;try{yx=Intl&&"function"==typeof Intl.Segmenter}catch(e){yx=!1}let yw=["width","height","ellipsis","wordBreak","verticalDirection","maxHeight","maxWidth","textAlign","textBaseline","textConfig","layoutDirection","fill","stroke","fontSize","fontFamily","fontStyle","fontWeight","lineWidth","opacity","fillOpacity","strokeOpacity",...l7];class yS extends on{constructor(e){super(e),this.type="richtext",this._currentHoverIcon=null,this.numberType=lW,this.onBeforeAttributeUpdate=(e,t,i)=>{for(let i in e)if("hoverIconId"===i){if(e[i]===t[i])continue;let r=this._frameCache.icons.get(e[i]);this.updateHoverIconState(r)}}}get width(){var e;return null!=(e=this.attribute.width)?e:i9.width}set width(e){this.attribute.width!==e&&(this.attribute.width=e,this.addUpdateShapeAndBoundsTag())}get height(){var e;return null!=(e=this.attribute.height)?e:i9.height}set height(e){this.attribute.height!==e&&(this.attribute.height=e,this.addUpdateShapeAndBoundsTag())}get maxWidth(){return this.attribute.maxWidth}set maxWidth(e){this.attribute.maxWidth!==e&&(this.attribute.maxWidth=e,this.addUpdateShapeAndBoundsTag())}get maxHeight(){return this.attribute.maxHeight}set maxHeight(e){this.attribute.maxHeight!==e&&(this.attribute.maxHeight=e,this.addUpdateShapeAndBoundsTag())}get ellipsis(){var e;return null!=(e=this.attribute.ellipsis)?e:i9.ellipsis}set ellipsis(e){this.attribute.ellipsis!==e&&(this.attribute.ellipsis=e,this.addUpdateShapeAndBoundsTag())}get wordBreak(){var e;return null!=(e=this.attribute.wordBreak)?e:i9.wordBreak}set wordBreak(e){this.attribute.wordBreak!==e&&(this.attribute.wordBreak=e,this.addUpdateShapeAndBoundsTag())}get verticalDirection(){var e;return null!=(e=this.attribute.verticalDirection)?e:i9.verticalDirection}set verticalDirection(e){this.attribute.verticalDirection!==e&&(this.attribute.verticalDirection=e,this.addUpdateShapeAndBoundsTag())}get textAlign(){var e;return null!=(e=this.attribute.textAlign)?e:i9.textAlign}set textAlign(e){this.attribute.textAlign!==e&&(this.attribute.textAlign=e,this.addUpdateShapeAndBoundsTag())}get textBaseline(){var e;return null!=(e=this.attribute.textBaseline)?e:i9.textBaseline}set textBaseline(e){this.attribute.textBaseline!==e&&(this.attribute.textBaseline=e,this.addUpdateShapeAndBoundsTag())}get textConfig(){var e;return null!=(e=this.attribute.textConfig)?e:i9.textConfig}set textConfig(e){this.attribute.textConfig=e,this.addUpdateShapeAndBoundsTag()}getGraphicTheme(){return r4(this).richtext}static AllSingleCharacter(e){return e.lines?e.lines.every(e=>e.paragraphs.every(e=>!(e.text&&(0,r6.Z)(e.text)&&yS.splitText(e.text).length>1))):e.every(e=>e.isComposing||!(e.text&&(0,r6.Z)(e.text)&&yS.splitText(e.text).length>1))}static splitText(e){if(yx){let t=new Intl.Segmenter(void 0,{granularity:"grapheme"}),i=[];for(let{segment:r}of t.segment(e))i.push(r);return i}return Array.from(e)}static TransformTextConfig2SingleCharacter(e){let t=[];return e.forEach(e=>{let i=yS.splitText(e.text.toString());if((0,r6.Z)(e.text)&&i.length>1)for(let r=0;r<i.length;r++){let n=i[r];t.push(Object.assign(Object.assign({},e),{text:n}))}else t.push(e)}),t}updateAABBBounds(e,t,i){var r,n,l,o;let{width:a=t.width,height:s=t.height,maxWidth:h=t.maxWidth,maxHeight:d=t.maxHeight,textAlign:u=t.textAlign,textBaseline:c=null!=(n=null!=(r=e.textBaseline)?r:t.textBaseline)?n:"top",editOptions:p}=e;if(a>0&&s>0)i.set(0,0,a,s);else{let{width:e,height:t}=this.getFrameCache().getActualSize(),r=a||e||0,n=s||t||0;n="number"==typeof d&&n>d?d:n||0,r="number"==typeof h&&r>h?h:r||0,i.set(0,0,r,n)}!p||!p.keepHeightWhileEmpty||i.height()||(null==(l=e.textConfig)?void 0:l.length)||(i.y2=i.y1+(null!=(o=e.fontSize)?o:12),i.x2=i.x1+2);let g=0;switch(c){case"top":g=0;break;case"middle":g=-i.height()/2;break;case"bottom":g=-i.height()}let f=0;switch(u){case"left":f=0;break;case"center":f=-i.width()/2;break;case"right":f=-i.width()}return s||("middle"===this.verticalDirection?g-=i.height()/2:"bottom"===this.verticalDirection&&(g-=i.height())),i.translate(f,g),tU.graphicService.updateTempAABBBounds(i),null==e.forceBoundsHeight&&null==e.forceBoundsWidth||tU.graphicService.updateHTMLTextAABBBounds(e,t,i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,tU.graphicService.transformAABBBounds(e,i,t,!1,this),0===i.width()&&0===i.height()&&i.clear(),i}needUpdateTags(e){return super.needUpdateTags(e,yw)}needUpdateTag(e){return super.needUpdateTag(e,yw)}getFrameCache(){return this.shouldUpdateShape()&&(this.doUpdateFrameCache(),this.clearUpdateShapeTag()),this._frameCache}get cliped(){let e=this.getFrameCache();if(e.actualHeight>e.height)return!0;let{disableAutoWrapLine:t}=this.attribute;if(t)for(let t=0;t<e.lines.length;t++){let i=e.lines[t];for(let e=0;e<i.paragraphs.length;e++){let t=i.paragraphs[e];if(t.overflow&&""!==t.text)return!0}}return!1}combinedStyleToCharacter(e){let{fill:t,stroke:i,fontSize:r,fontFamily:n,fontStyle:l,fontWeight:o,lineWidth:a,opacity:s,fillOpacity:h,lineHeight:d,strokeOpacity:u,upgradeAttrs:c}=this.attribute,p=Object.assign({fill:t,stroke:i,fontSize:r,fontFamily:n,fontStyle:l,fontWeight:o,lineWidth:a,opacity:s,fillOpacity:h,strokeOpacity:u},e);return(null==c?void 0:c.lineHeight)&&(p.lineHeight=d),p}doUpdateFrameCache(e){var t;let{maxWidth:i,maxHeight:r,width:n,height:l,ellipsis:o,wordBreak:a,verticalDirection:s,textAlign:h,textBaseline:d,layoutDirection:u,singleLine:c,disableAutoWrapLine:p,editable:g,ascentDescentMode:f,upgradeAttrs:m}=this.attribute,b=m&&m.multiBreakLine,{textConfig:y=[]}=this.attribute;g&&y.length>0&&!yS.AllSingleCharacter(y)&&(y=yS.TransformTextConfig2SingleCharacter(y),this.attribute.textConfig=y);let v=[],_=null!=e?e:y;for(let e=0;e<_.length;e++)if("image"in _[e]){let t=this.combinedStyleToCharacter(_[e]);t.lineWidth=void 0;let i=t.id&&this._frameCache&&this._frameCache.icons&&this._frameCache.icons.get(t.id);if(i)v.push(i);else{let e=new yv(t);e.successCallback=()=>{var e;this.addUpdateBoundTag(),null==(e=this.stage)||e.renderNextFrame()},e.richtextId=t.id,v.push(e)}}else{let t=this.combinedStyleToCharacter(_[e]);if((0,nw.Z)(t.text)&&(t.text=`${t.text}`),t.text&&t.text.includes("\n")){let i=t.text.split("\n");for(let r=0;r<i.length;r++)if(0===r)v.push(new yf(i[r],!1,t,f));else if(i[r]||e===_.length-1)v.push(new yf(i[r],!0,t,f));else{let t=this.combinedStyleToCharacter(_[e+1]);v.push(new yf(i[r],!0,t,f))}}else t.text&&v.push(new yf(t.text,!1,t,f))}let C="number"==typeof i&&Number.isFinite(i)&&i>0,x="number"==typeof r&&Number.isFinite(r)&&r>0,w="number"==typeof n&&Number.isFinite(n)&&n>0&&(!C||n<=i),S="number"==typeof l&&Number.isFinite(l)&&l>0&&(!x||l<=r),A=new yp(0,0,(w?n:C?i:0)||0,(S?l:x?r:0)||0,o,a,s,h,d,u||"horizontal",!w&&C,!S&&x,c||!1,null==(t=this._frameCache)?void 0:t.icons),k=new yC(A);if(k.newLine=b,p){let e=0,t=!1;for(let i=0;i<v.length;i++){let r=v[i];t?(r.overflow=!0,r.left=1/0,r.top=1/0,r.newLine||A.lines[A.lines.length-1].paragraphs.push(r)):k.deal(r,!0),A.lines.length!==e&&(e=A.lines.length,k.lineBuffer.length=0,r.overflow=!0,r.left=1e3,r.top=1e3,A.lines[A.lines.length-1].paragraphs.push(r),t=!0),r.newLine&&(t=!1,k.lineWidth=0),k.send()}}else for(let e=0;e<v.length;e++)k.deal(v[e]);if(k.send(),!("horizontal"===A.layoutDirection?w:S)){let e=A.getActualSizeWidthEllipsis(),t="horizontal"===A.layoutDirection?e.width:e.height;("horizontal"===A.layoutDirection?C:x)&&(t=Math.min(t,"horizontal"===A.layoutDirection?i:r)),A.lines.forEach(function(e){e.calcOffset(t,!1)})}b&&A.lines.forEach(e=>{let t=e.paragraphs;e.paragraphs=e.paragraphs.filter(e=>""!==e.text),0===e.paragraphs.length&&t.length&&(t[0].text="\n",e.paragraphs.push(t[0]))}),this._frameCache=A}clone(){return new yS(Object.assign({},this.attribute))}setStage(e,t){super.setStage(e,t),this.getFrameCache().icons.forEach(i=>{i.setStage(e,t)})}bindIconEvent(){this.addEventListener("pointermove",e=>{let t=this.pickIcon(e.global);t&&t===this._currentHoverIcon||(t?this.setAttribute("hoverIconId",t.richtextId):!t&&this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0))}),this.addEventListener("pointerleave",e=>{this._currentHoverIcon&&this.setAttribute("hoverIconId",void 0)})}updateHoverIconState(e){var t,i,r,n,l;e?(null==(t=this._currentHoverIcon)||t.setHoverState(!1),this._currentHoverIcon=e,this._currentHoverIcon.setHoverState(!0),null==(i=this.stage)||i.setCursor(e.attribute.cursor),null==(r=this.stage)||r.renderNextFrame()):(this._currentHoverIcon.setHoverState(!1),this._currentHoverIcon=null,null==(n=this.stage)||n.setCursor(),null==(l=this.stage)||l.renderNextFrame())}pickIcon(e){let t,i=this.getFrameCache(),{e:r,f:n}=this.globalTransMatrix;return i.icons.forEach((i,l)=>{var o,a;let s=i.AABBBounds.clone();s.translate(i._marginArray[3],i._marginArray[0]),s.containsPoint({x:e.x-r,y:e.y-n})&&((t=i).globalX=(null!=(o=t.attribute.x)?o:0)+r+i._marginArray[3],t.globalY=(null!=(a=t.attribute.y)?a:0)+n+i._marginArray[0])}),t}getNoWorkAnimateAttr(){return yS.NOWORK_ANIMATE_ATTR}}function yA(e){return new yS(e)}yS.NOWORK_ANIMATE_ATTR=Object.assign({ellipsis:1,wordBreak:1,verticalDirection:1,textAlign:1,textBaseline:1,textConfig:1,layoutDirection:1},or);let yk=class extends aG{constructor(){super(),this.numberType=lW,this.builtinContributions=[dQ],this.init()}drawShape(e,t,i,r,n){let l=r4(e).richtext,{strokeOpacity:o=l.strokeOpacity,opacity:a=l.opacity,fillOpacity:s=l.fillOpacity,visible:h=l.visible}=e.attribute;if(!e.valid||!h)return;let d=a*s>0,u=a*o>0;d&&(t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,l),t.translate(i,r),this.beforeRenderStep(e,t,i,r,d,u,d,u,l,n),e.getFrameCache().draw(t,this.drawIcon),this.afterRenderStep(e,t,i,r,d,u,d,u,l,n))}drawIcon(e,t,i,r,n){var l;let o=r4(e).richtextIcon,{width:a=o.width,height:s=o.height,opacity:h=o.opacity,image:d,backgroundFill:u=o.backgroundFill,backgroundFillOpacity:c=o.backgroundFillOpacity,backgroundStroke:p=o.backgroundStroke,backgroundStrokeOpacity:g=o.backgroundStrokeOpacity,backgroundRadius:f=o.backgroundRadius,margin:m}=e.attribute,{backgroundWidth:b=a,backgroundHeight:y=s}=e.attribute;if(m&&(i+=e._marginArray[3],r+=e._marginArray[0]),e._hovered){let e=(b-a)/2,n=(y-s)/2;0===f?(t.beginPath(),t.rect(i-e,r-n,b,y)):(t.beginPath(),am(t,i-e,r-n,b,y,f,!0)),u&&(t.globalAlpha=c,t.fillStyle=u,t.fill()),p&&(t.globalAlpha=g,t.strokeStyle=p,t.stroke())}let v=d&&(null==(l=null==e?void 0:e.resources)?void 0:l.get(d));v&&"success"===v.state&&(t.globalAlpha=h,t.drawImage(v.data,i,r,a,s))}draw(e,t,i){let r=r4(e).richtext;this._draw(e,r,!1,i)}};yk=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[])],yk);let yM=!1,yT=new tb(e=>{yM||(yM=!0,e(oT).to(yk).inSingletonScope(),e(o_).toService(oT))}),yR=class{constructor(e){this.canvasRenderer=e,this.type="richtext",this.numberType=lW}contains(e,t,i){return!!e.AABBBounds.containsPoint(t)}};yR=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(eu=tT(oT),function(e,t){eu(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],yR);let yE=!1,yP=new tb((e,t,i,r)=>{yE||(yE=!0,e(ub).to(yR).inSingletonScope(),e(u_).toService(ub))}),yB=class{constructor(){this.type="image",this.numberType=lF}contains(e,t,i){let{pickContext:r}=null!=i?i:{};return!!r&&!!e.AABBBounds.containsPoint(t)}};yB=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],yB);let yI=!1,yL=new tb((e,t,i,r)=>{yI||(yI=!0,e(d9).to(yB).inSingletonScope(),e(yB).toService(d9))});function yF(){yF.__loaded||(yF.__loaded=!0,oq.RegisterGraphicCreator("richtext",yA),tG.load(yT),tG.load(d4?yP:yL))}yF.__loaded=!1;class yH{constructor(e){this.tasks=[],this.started=!1,this.completed=0,this.totalDuration=0,this.onStartCallbacks=[],this.onEndCallbacks=[],this.onUpdateCallbacks=[],this.component=e}animate(e,t){return this.started?console.warn("Cannot add animations after animation has started"):this.tasks.push({graphic:e,config:t}),this}onStart(e){return this.onStartCallbacks.push(e),this}onEnd(e){return this.onEndCallbacks.push(e),this}onUpdate(e){return this.onUpdateCallbacks.push(e),this}start(){return this.started?console.warn("Animation has already started"):(this.started=!0,this.completed=0,this.onStartCallbacks.forEach(e=>e()),0===this.tasks.length?setTimeout(()=>{this.onEndCallbacks.forEach(e=>e())},0):this.tasks.forEach(e=>{let t=new gz(e.graphic);t.onEnd(()=>{this.completed++,this.completed===this.tasks.length&&this.onEndCallbacks.forEach(e=>e())});let i=t.executeItem(e.config,e.graphic);e.animate=i,i.forEach(e=>{this.totalDuration=Math.max(this.totalDuration,e.getStartTime()+e.getDuration())})})),this}deleteSelfAttr(e){this.tasks.forEach(t=>{t.animate&&t.animate.forEach(t=>t.preventAttr(e))})}stop(e){return this.tasks.forEach(t=>{t.animate&&t.animate.forEach(t=>t.stop(e))}),this.started&&this.completed!==this.tasks.length&&(this.onEndCallbacks.forEach(e=>e()),this.completed=this.tasks.length),this}getDuration(){return this.totalDuration}}function yO(e){return new yH(e)}var yD=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};let yz=(e,t)=>Math.ceil(e)>Math.floor(t),yW=([e,t],[i,r])=>r>e&&t>i,yZ=["x","y","dx","dy","scaleX","scaleY","angle","anchor","postMatrix","visible","clip","pickable","childrenPickable","zIndex","cursor"];class yN extends ol{constructor(e,t){super(e),this._skipRenderAttributes=yZ,(null==t?void 0:t.mode)&&(this.mode=t.mode,this.setMode(t.mode)),(null==t?void 0:t.skipDefault)&&(this.skipDefault=!0),this.setTheme({common:{strokeBoundsBuffer:0}}),this.attribute=e,this.onSetStage(()=>{this.render(),this.bindEvents()})}setAttribute(e,t,i,r){let n=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate({[e]:t},this.attribute,e,r);if(n)return this._setAttributes(n,i);(0,sF.Z)(this.attribute[e])&&(0,sF.Z)(t)&&!(0,nr.Z)(this.attribute[e])&&!(0,nr.Z)(t)?(0,ha.Z)(this.attribute[e],t):this.attribute[e]=t,this._skipRenderAttributes.includes(e)||this.render(),this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(i||this.needUpdateTag(e))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}setAttributes(e,t,i){return e=this.onBeforeAttributeUpdate&&this.onBeforeAttributeUpdate(e,this.attribute,null,i)||e,this._setAttributes(e,t)}_setAttributes(e,t){let i=Object.keys(e);this._mergeAttributes(e,i),i.every(e=>this._skipRenderAttributes.includes(e))||this.render(),this.valid=this.isValid(),!this.updateShapeAndBoundsTagSetted()&&(t||this.needUpdateTags(i))?this.addUpdateShapeAndBoundsTag():this.addUpdateBoundTag(),this.addUpdatePositionTag(),this.onAttributeUpdate()}_mergeAttributes(e,t){(0,r5.Z)(t)&&(t=Object.keys(e));for(let i=0;i<t.length;i++){let r=t[i];!(0,sF.Z)(this.attribute[r])||(0,nr.Z)(this.attribute[r])||(0,nr.Z)(e[r])?this.attribute[r]=e[r]:(0,ha.Z)(this.attribute[r],e[r])}}bindEvents(){}_getNodeId(e){var t;return`${null!=(t=this.id)?t:this._uid}-${this.name}-${e}`}_dispatchEvent(e,t){var i;let r=new no(e,t);r.manager=null==(i=this.stage)?void 0:i.eventSystem.manager,this.dispatchEvent(r)}eventPosToStagePos(e){var t,i;let r={x:0,y:0},n=null!=(i=null==(t=this.stage)?void 0:t.eventPointTransform(e))?i:{x:0,y:0};return this.globalTransMatrix.transformPoint(n,r),r}}class y$ extends yN{_prepareAnimate(e){if(!1!==this.attribute.animation){let{animation:t,animationEnter:i,animationExit:r,animationUpdate:n}=this.attribute,l=(0,r9.Z)(t)?t:{};this._animationConfig={enter:!1!==i&&(0,ha.Z)({},e,l,null!=i?i:{}),exit:!1!==r&&(0,ha.Z)({},e,l,null!=r?r:{}),update:!1!==n&&((0,ri.Z)(n)?n:(0,ha.Z)({},e,l,null!=n?n:{}))}}else this._animationConfig={enter:!1,exit:!1,update:!1}}}var yj=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};dV(),uT(),yF(),bX(),gz.registerBuiltInAnimate("increaseCount",class e extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n),this.formatTemplate=null,this.decimalLength=null==n?void 0:n.decimalLength,(null==n?void 0:n.formatTemplate)&&n.formatTemplate.includes("{{var}}")&&(this.formatTemplate=n.formatTemplate)}onFirstRun(){var e,t,i;let r=this.getLastProps(),n=this.getEndProps(),l=null!=(e=r.text)?e:0,o=null!=(t=n.text)?t:0;this.valid=!0;let a=0,s=0,h="",d="",u=0;if("number"==typeof l)a=l,u=Math.max(u,(l.toString().split(".")[1]||"").length);else{if("string"!=typeof l)return void(this.valid=!1);if(l.endsWith("%")){h="%";let e=l.substring(0,l.length-1).replace(/,/g,"");if(isNaN(a=parseFloat(e)/100))return void(this.valid=!1);u=Math.max(u,(e.split(".")[1]||"").length+2)}else{let e=l.replace(/,/g,"");if(isNaN(a=parseFloat(e)))return void(this.valid=!1);l.includes(",")&&(h=","),u=Math.max(u,(e.split(".")[1]||"").length)}}if("number"==typeof o)s=o,u=Math.max(u,(o.toString().split(".")[1]||"").length);else{if("string"!=typeof o)return void(this.valid=!1);if(o.endsWith("%")){d="%";let e=o.substring(0,o.length-1).replace(/,/g,"");if(isNaN(s=parseFloat(e)/100))return void(this.valid=!1);u=Math.max(u,(e.split(".")[1]||"").length+2)}else{let e=o.replace(/,/g,"");if(isNaN(s=parseFloat(e)))return void(this.valid=!1);o.includes(",")&&(d=","),u=Math.max(u,(e.split(".")[1]||"").length)}}if(null==(i=this.params)?void 0:i.format){switch(this.params.format){case"percent":this.format="%";break;case"thousandth":this.format=",";break;case"none":this.format="";break;default:this.format=d||h}"%"===this.format&&"%"!==d&&"%"!==h&&void 0===this.decimalLength&&(this.decimalLength=2),"%"===this.format||"%"!==d&&"%"!==h||(a*=100,s*=100)}else this.format=d||h;this.fromNumber=a,this.toNumber=s,void 0===this.decimalLength&&(this.decimalLength=u)}onEnd(e){super.onEnd(e),e||this.props&&this.target.setAttributes(this.props)}onUpdate(e,t,i){if(!this.valid)return;let r=this.fromNumber+(this.toNumber-this.fromNumber)*t,n="",l=this.format,o=("%"===l?100*r:r).toFixed(this.decimalLength),a,s=o;if(parseFloat(o)===Math.floor(parseFloat(o))&&(s=Math.floor(parseFloat(o))),"%"===l)a=`${s}%`;else if(","===l){let e=s.toString().split(".");e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),a=e.join(".")}else a=s;n=this.formatTemplate?this.formatTemplate.replace("{{var}}",a.toString()):a,this.target.setAttribute("text",n)}}),gz.registerBuiltInAnimate("labelUpdate",class e extends pg{onBind(){let e=yO(this.target);this._animator=e;let t=this.duration,i=this.easing,{prevText:r,curText:n,prevLabelLine:l,curLabelLine:o,increaseEffect:a=!0}=this.params,s={};for(let e in n.attribute)r.attribute[e]!==n.attribute[e]&&(s[e]=n.attribute[e]);let{text:h}=s,d=yD(s,["text"]);e.animate(r,{type:"to",to:d,duration:t,easing:i}),!1!==a&&e.animate(r,{type:"increaseCount",to:{text:n.attribute.text},duration:t,easing:i}),l&&e.animate(l,{type:"to",to:o.attribute,duration:t,easing:i}),this.completeBind(e)}tryPreventConflict(){}}),gz.registerBuiltInAnimate("labelEnter",class e extends pg{onBind(){let e=yO(this.target);this._animator=e;let t=this.duration,i=this.easing,{relatedGraphic:r,relatedGraphics:n,config:l}=this.params,{mode:o,type:a="fadeIn"}=l,s=this.target,h=0;"after"===o?r.animates&&r.animates.forEach(e=>{h=Math.max(h,e.getStartTime()+e.getTotalDuration())}):"after-all"===o?n&&n.forEach(e=>{e.animates&&e.animates.forEach(e=>{h=Math.max(h,e.getStartTime()+e.getTotalDuration())})}):r.animates&&r.animates.forEach(e=>{h=Math.max(h,e.getStartTime())}),e.animate(s,Object.assign(Object.assign({},l),{duration:t,easing:i,startTime:h,type:a})),this.completeBind(e)}tryPreventConflict(){}});class yG extends y${setBitmap(e){this._bitmap=e}setBitmapTool(e){this._bmpTool=e}constructor(e,t){let{data:i}=e;super((null==t?void 0:t.skipDefault)?e:Object.assign({data:i},(0,ha.Z)({},yG.defaultAttributes,yj(e,["data"])))),this.name="label",this._onHover=e=>{let t=e.target;t===this._lastHover||(0,d$.Z)(t.states)||(t.addState(en.hover,!0),b3(this,e=>{e===t||(0,d$.Z)(e.states)||e.addState(en.hoverReverse,!0)}),this._lastHover=t)},this._onUnHover=e=>{this._lastHover&&(b3(this,e=>{(0,d$.Z)(e.states)||(e.removeState(en.hoverReverse),e.removeState(en.hover))}),this._lastHover=null)},this._onClick=e=>{let t=e.target;if(this._lastSelect===t&&t.hasState("selected"))return this._lastSelect=null,void b3(this,e=>{(0,d$.Z)(e.states)||(e.removeState(en.selectedReverse),e.removeState(en.selected))});(0,d$.Z)(t.states)||(t.addState(en.selected,!0),b3(this,e=>{e===t||(0,d$.Z)(e.states)||e.addState(en.selectedReverse,!0)}),this._lastSelect=t)},this._handleRelatedGraphicSetState=e=>{var t,i,r,n,l;if((null==(t=e.detail)?void 0:t.type)===sm.STATE||(null==(i=e.detail)?void 0:i.type)===sm.ANIMATE_UPDATE&&(null==(r=e.detail.animationState)?void 0:r.isFirstFrameOfStep)){let t=null!=(l=null==(n=e.target)?void 0:n.currentStates)?l:[],i=this._isCollectionBase?[...this._graphicToText.values()]:[this._graphicToText.get(e.target)];this.updateStatesOfLabels(i,t)}}}labeling(e,t,i,r){}_getLabelLinePoints(e,t){return function(e,t){if(!e||!t||(0,ai.SX)(e,t,!0))return;let i=Math.min(e.x1,e.x2),r=Math.min(e.y1,e.y2),n=Math.min(t.x1,t.x2),l=Math.min(t.y1,t.y2),o=Math.abs(e.x2-i)/2,a=Math.abs(e.y2-r)/2,s=Math.abs(t.x2-n)/2,h=Math.abs(t.y2-l)/2,d=i+o,u=r+a,c=n+s,p=l+h,g=c-d,f=p-u;return[yc(g,f,d,u,o,a),yc(-g,-f,c,p,s,h)]}(e.AABBBounds,null==t?void 0:t.AABBBounds)}_createLabelLine(e,t){let i=this._getLabelLinePoints(e,t);if(i){let r=oq.line({points:i}),{line:n={}}=e.attribute;if(n.customShape){let i=n.customShape;r.pathProxy=r=>i({text:e,baseMark:t},r,new iZ)}return t&&t.getAttributes(!0).fill&&r.setAttribute("stroke",t.getAttributes(!0).fill),this.attribute.line&&!(0,d$.Z)(this.attribute.line.style)&&r.setAttributes(this.attribute.line.style),this._setStatesOfLabelLine(r),r}}render(){if(this._prepare(),(0,r5.Z)(this._idToGraphic)||this._isCollectionBase&&(0,r5.Z)(this._idToPoint))return;let e=[];!1!==this._enableAnimation&&this._baseMarks.forEach(t=>{e.push(t.attribute),t.initAttributes(t.getAttributes(!0))});let{overlap:t,smartInvert:i,dataFilter:r,customLayoutFunc:n,customOverlapFunc:l}=this.attribute,o=this.attribute.data;if((0,nr.Z)(r)&&(o=r(o)),o&&o.length){let e=new Set;o=o.filter(t=>!e.has(t.id)&&e.add(t.id))}let a=this._initText(o);a=(0,nr.Z)(n)?n(o,a,this.getRelatedGraphic.bind(this),this._isCollectionBase?e=>this._idToPoint.get(e.id):null,this):this._layout(a);let s=[],h=a;if(!(0,ni.Z)(t)&&(0,nr.Z)(null==t?void 0:t.filterBeforeOverlap)){let e=this.getRelatedGraphic.bind(this);a.forEach(i=>{t.filterBeforeOverlap(i,e,this)?h.push(i):s.push(i)})}(0,nr.Z)(l)?a=l(h,this.getRelatedGraphic.bind(this),this._isCollectionBase?e=>this._idToPoint.get(e.id):null,this).concat(s):!1!==t&&(a=this._overlapping(h).concat(s)),(0,nr.Z)(this.attribute.onAfterOverlapping)&&this.attribute.onAfterOverlapping(a,this.getRelatedGraphic.bind(this),this._isCollectionBase?e=>this._idToPoint.get(e.id):null,this),a&&a.length&&a.forEach(e=>{this._bindEvent(e),this._setStatesOfText(e)}),!1!==i&&this._smartInvert(a),this._renderLabels(a),!1!==this._enableAnimation&&this._baseMarks.forEach((t,i)=>{t.initAttributes(e[i])})}_bindEvent(e){if(this.attribute.disableTriggerEvent||!e)return;let{hover:t,select:i}=this.attribute;t&&(e.addEventListener("pointermove",this._onHover),e.addEventListener("pointerout",this._onUnHover)),i&&e.addEventListener("pointerdown",this._onClick)}_setStatesOfText(e){if(!e)return;let t=this.attribute.state;t&&!(0,d$.Z)(t)&&(e.states=t)}_setStatesOfLabelLine(e){if(!e)return;let t=this.attribute.labelLineState;t&&!(0,d$.Z)(t)&&(e.states=t)}_createLabelText(e){var t,i;return p1(Object.assign(Object.assign({},null==(i=null==(t=this.stage)?void 0:t.getTheme())?void 0:i.text),e),"textType")}_prepare(){var e,t;let i=[];if(((0,nr.Z)(this.attribute.getBaseMarks)?this.attribute.getBaseMarks():function(e,t){if(!t)return[];let i=e.find(e=>e.name===t,!0);return i?i.getChildren():[]}(this.getRootNode(),this.attribute.baseMarkGroupName)).forEach(e=>{"willRelease"!==e.releaseStatus&&i.push(e)}),null==(e=this._idToGraphic)||e.clear(),null==(t=this._idToPoint)||t.clear(),this._baseMarks=i,this._isCollectionBase="line-data"===this.attribute.type,!i||0===i.length)return;let{data:r}=this.attribute;if(r&&0!==r.length){if(this._idToGraphic||(this._idToGraphic=new Map),this._isCollectionBase){this._idToPoint||(this._idToPoint=new Map);let e=0;for(let t=0;t<i.length;t++){let n=i[t],l=yu(n);if(l&&l.length)for(let t=0;t<l.length;t++){let i=r[e];i&&l[t]&&((0,oV.Z)(i.id)||(i.id=`vrender-component-${this.name}-${e}`),this._idToPoint.set(i.id,l[t]),this._idToGraphic.set(i.id,n)),e++}}}else for(let e=0;e<i.length;e++){let t=r[e],n=i[e];t&&n&&((0,oV.Z)(t.id)||(t.id=`vrender-component-${this.name}-${e}`),this._idToGraphic.set(t.id,n))}this._prepareAnimate(ys)}}getRelatedGraphic(e){return this._idToGraphic.get(e.id)}_initText(e=[]){let{textStyle:t={}}=this.attribute,i=[];for(let r=0;r<e.length;r++){let n=e[r],l=this.getRelatedGraphic(n);if(!l)continue;let o=l.getAttributes(!0),a=Object.assign(Object.assign({fill:this._isCollectionBase?(0,ri.Z)(o.stroke)?o.stroke.find(e=>!!e&&!0!==e):o.stroke:o.fill},t),n),s=this._createLabelText(a);i.push(s)}return i}_layout(e){let{position:t,offset:i}=this.attribute;for(let r=0;r<e.length;r++){let n=e[r];if(!n)return[];let l=n.attribute,o=this.getRelatedGraphic(l);if(!o)continue;n.attachedThemeGraphic=this;let a=this.getGraphicBounds(n);n.attachedThemeGraphic=null;let s=(0,nr.Z)(t)?t(l):t,h=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(l.id),s):this.getGraphicBounds(o,{x:l.x,y:l.y},s),d=this.labeling(a,h,s,i);d&&n.setAttributes(d)}return e}_overlapping(e){var t,i,r;if(0===e.length)return[];let n=(0,r9.Z)(this.attribute.overlap)?this.attribute.overlap:{},l=this.getBaseMarkGroup(),o=null!=(t=n.size)?t:{width:null!=(i=null==l?void 0:l.AABBBounds.width())?i:0,height:null!=(r=null==l?void 0:l.AABBBounds.height())?r:0};if(0===o.width||0===o.height)return e;let{strategy:a,priority:s}=n,h=this._bmpTool||ye(o.width,o.height),d=this._bitmap||h.bitmap();return s&&(e=e.sort((e,t)=>s(t.attribute.data)-s(e.attribute.data))),"shiftY"===(null==a?void 0:a.type)?this._overlapGlobal(e,n,h,d):this._overlapByStrategy(e,n,h,d)}_overlapGlobal(e,t,i,r){let n=e.filter(e=>e.attribute.visible&&0!==e.attribute.opacity&&this.isMarkInsideRect(this.getRelatedGraphic(e.attribute),i)),{clampForce:l=!0,hideOnHit:o=!0,hideOnOverflow:a=!1,overlapPadding:s,strategy:h}=t;if(l||a)for(let t=0;t<n.length;t++){let r=e[t],{dx:n=0,dy:l=0}=ya(r,i.width,i.height,i.padding);0===n&&0===l||(a?r.setAttributes({visible:!1}):(r.setAttributes({x:r.attribute.x+n,y:r.attribute.y+l}),r._isClamped=!0))}n=function(e,t){let{maxY:i=Number.MAX_VALUE,labelling:r,globalShiftY:n={enable:!0,maxIterations:10,maxError:.1,padding:1}}=t,l=e.length;if(l<=1)return e;let o=new Map,a=new Map,s=e=>a.get(e).y1Initial,h=e=>a.get(e).height,d=e=>a.get(e).y1,u=e=>a.get(e).x,c=e=>a.get(e).x1,p=e=>a.get(e).x2,g=e=>a.get(e).attempts,f=(e,t)=>{a.get(e).y1=t},m=(e,t)=>{a.get(e).attempts=t};for(let t of(e.sort((e,t)=>e.attribute.x-t.attribute.x),e)){let{y1:e,y2:i,x1:r,x2:n}=t.AABBBounds,{x:l,y:s}=t.attribute;a.set(t,{y1Initial:e,y1:e,y2:i,y:s,height:i-e,x1:r,x2:n,x:l,attempts:0});let h=!1;for(let[e,i]of o){let{start:a,end:s}=e;if(r>=a&&n<=s)i.push(t),h=!0;else if((0,rN.Yt)(l,u(i[0]),void 0,5)){let l={start:Math.min(a,r),end:Math.max(s,n)};i.push(t),o.set(l,i),o.delete(e),h=!0}else if(function(e,t){let[i,r]=e,[n,l]=t;return Math.max(0,Math.min(r,l)-Math.max(i,n))}([a,s],[r,n])/(s-a)>.5){let l={start:Math.min(a,r),end:Math.max(s,n)};i.push(t),o.set(l,i),o.delete(e),h=!0}if(h)break}h||o.set({start:r,end:n},[t])}for(let e of o.values())e.sort((e,t)=>s(e)-s(t)),function(e){for(let t=e.length-1;t>=0;t--){let n=e[t],l=e[t-1],o=e[t+1];if(l&&yz(d(l)+h(l),d(n))||0===d(n)&&n._isClamped){let{y:e}=r(n);o&&yz(e+h(n)/2,d(o))||e+h(n)/2<=i&&f(n,d(n)+e-a.get(n).y)}}}(e);if(!1!==n.enable){let{maxIterations:t=10,maxError:r=.1,padding:o=1,maxAttempts:a=1e3,deltaYTolerance:u=Number.MAX_VALUE}=n;for(let n=0;n<t;n++){e.sort((e,t)=>s(e)-s(t));let t=0;for(let r=0;r<l-1;r++){let n=e[r];if(g(n)>=a)continue;let l,b=r+1;for(;(l=e[b])&&!yW([c(n),p(n)],[c(l),p(l)]);)b+=1;if(l){let e=d(n),r=h(n),a=d(l),c=a-(e+r);if(c<o){let r=(o-c)/2;if(t=Math.max(t,r),e+r+h(l)>i){let t=e-(o-c);Math.abs(s(n)-t)<=u&&(f(n,t),m(n,g(n)+1))}else if(e-r<0){let e=a+(o-c);Math.abs(s(l)-e)<=u&&(f(l,e),m(l,g(l)+1))}else{let t=e-r,i=s(n)-t,o=a+r,h=s(l)-o;Math.abs(i)<=u&&Math.abs(h)<=u&&(f(n,t),f(l,o),m(n,g(n)+1),m(l,g(l)+1))}}}}if(t<r)break}}for(let t of e){let e=t.attribute.y+d(t)-s(t);t.setAttribute("y",e)}let b=[];e.sort((e,t)=>e.attribute.x-t.attribute.x);let y=0,v=e.length-1;for(;y<=v;)y===v?b.push(e[y]):(b.push(e[y]),b.push(e[v])),y++,v--;return b}(n,Object.assign(Object.assign({maxY:i.height},h),{labelling:e=>{let t=this.getRelatedGraphic(e.attribute),i=this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(e.attribute.id)):this.getGraphicBounds(t,e);return this.labeling(e.AABBBounds,i,"bottom",this.attribute.offset)}}));for(let e=0;e<n.length;e++){let t=n[e],h=t.AABBBounds,d=yi(i,h,!0);if(yr(i,r,h,l||a,s))r.setRange(d);else{if(a){if(this._processHideOnOverflow(t,i))continue}else if(l&&this._processClampForce(t,i,r,s))continue;o?t.setAttributes({visible:!1}):r.setRange(d)}}return n}_processHideOnOverflow(e,t){let{dy:i=0,dx:r=0}=ya(e,t.width,t.height,t.padding);return 0===r&&0===i||(e.setAttributes({visible:!1}),!1)}_processClampForce(e,t,i,r=0){let{dy:n=0,dx:l=0}=ya(e,t.width,t.height,t.padding);if(0===l&&0===n){if(yr(t,i,e.AABBBounds,!1,r))return i.setRange(yi(t,e.AABBBounds,!0)),!0}else if(yr(t,i,{x1:e.AABBBounds.x1+l,x2:e.AABBBounds.x2+l,y1:e.AABBBounds.y1+n,y2:e.AABBBounds.y2+n}))return e.setAttributes({x:e.attribute.x+l,y:e.attribute.y+n}),i.setRange(yi(t,e.AABBBounds,!0)),!0;return!1}_overlapByStrategy(e,t,i,r){var n;let{avoidBaseMark:l,strategy:o=[],hideOnHit:a=!0,clampForce:s=!0,avoidMarks:h=[],overlapPadding:d,hideOnOverflow:u=!1}=t,c=[],p=o.some(e=>"bound"===e.type);l&&(null==(n=this._baseMarks)||n.forEach(e=>{e.AABBBounds&&r.setRange(yi(i,e.AABBBounds,!0))})),h.length>0&&h.forEach(e=>{(0,r6.Z)(e)?(function(e,t){if(!t)return[];let i=e.find(e=>e.name===t,!0);return i?i.findAll(e=>"group"!==e.type,!0):[]})(this.getRootNode(),e).forEach(e=>{e.AABBBounds&&r.setRange(yi(i,e.AABBBounds,!0))}):e.AABBBounds&&r.setRange(yi(i,e.AABBBounds,!0))});for(let t=0;t<e.length;t++){if(!1===e[t].attribute.visible)continue;let n=e[t],l=this.getRelatedGraphic(n.attribute);if(n.update(),!this.isMarkInsideRect(l,i))continue;if(yr(i,r,n.AABBBounds,s||u,d)&&(!p||p&&l&&l.AABBBounds&&this._canPlaceInside(n.AABBBounds,l.AABBBounds))){r.setRange(yi(i,n.AABBBounds,!0)),c.push(n);continue}let h=!1;for(let a=0;a<o.length;a++)if(!1!==(h=function(e,t,i,r,n,l,o){var a,s;let h=null==(a=r.overlap)?void 0:a.clampForce,d=null==(s=r.overlap)?void 0:s.overlapPadding;if("bound"===i.type||"position"===i.type){if((0,nr.Z)(o)){let a=(((0,nr.Z)(i.position)?i.position(n.attribute):i.position)||("rect"===r.type?yo:yl)).map(e=>o(n.AABBBounds,l,e,r.offset));return yn(e,t,n,a,h,d,!1===i.restorePosition)}return!1}if("moveY"===i.type){let r=(i.offset?(0,nr.Z)(i.offset)?i.offset(n.attribute):i.offset:[]).map(e=>({x:n.attribute.x,y:n.attribute.y+e}));return yn(e,t,n,r,h,d)}if("moveX"===i.type){let r=(i.offset?(0,nr.Z)(i.offset)?i.offset(n.attribute):i.offset:[]).map(e=>({x:n.attribute.x+e,y:n.attribute.y}));return yn(e,t,n,r,h,d)}return!1}(i,r,o[a],this.attribute,n,this._isCollectionBase?this.getGraphicBounds(null,this._idToPoint.get(e[t].attribute.id)):this.getGraphicBounds(l,e[t].attribute),this.labeling))&&(n.setAttributes({x:h.x,y:h.y}),!u||this._processHideOnOverflow(n,i))){c.push(n);break}if(!h){if(u&&!this._processHideOnOverflow(n,i))continue;if(s&&this._processClampForce(n,i,r,d)){c.push(n);continue}}h||a||c.push(n)}return c}isMarkInsideRect(e,t){let{left:i,right:r,top:n,bottom:l}=t.padding,o={x1:-i,x2:t.width+r,y1:-n,y2:t.height+l},a=e.AABBBounds;if(0!==a.width()&&0!==a.height())return(0,ai.SX)(e.AABBBounds,o,!0);let{attribute:s}=e;if("rect"===e.type){let{x:e,x1:t,y:i,y1:r}=s;return(0,ai.qr)({x:null!=e?e:t,y:null!=i?i:r},o,!0)}return"x"in s&&"y"in s&&(0,ai.qr)({x:s.x,y:s.y},o,!0)}getBaseMarkGroup(){let{baseMarkGroupName:e}=this.attribute;if(e)return this.getRootNode().find(t=>t.name===e,!0)}getGraphicBounds(e,t={},i){var r;if(e){if(!1!==e.attribute.visible){if(null==(r=e.context)?void 0:r.animationState){let t=e.clone();return Object.assign(t.attribute,e.getAttributes(!0)),t.AABBBounds}return e.AABBBounds}let{x:t,y:i}=e.attribute;return{x1:t,x2:t,y1:i,y2:i}}if(t&&i&&"inside-middle"===i){let{x:e,y:i,x1:r=e,y1:n=i}=t;return{x1:(e+r)/2,x2:(e+r)/2,y1:(i+n)/2,y2:(i+n)/2}}let{x:n,y:l}=t;return{x1:n,x2:n,y1:l,y2:l}}_renderLabels(e){var t;let{syncState:i}=this.attribute,r=new Map,n=this._graphicToText||new Map,l=[],o=[],{visible:a}=null!=(t=this.attribute.line)?t:{};e&&e.forEach((e,t)=>{var s;let h,d=this.getRelatedGraphic(e.attribute),u=this._isCollectionBase?e.attribute.id:d,c=(null==n?void 0:n.get(u))?"update":"enter";a&&(h=this._createLabelLine(e,d));let p=h?{text:e,labelLine:h}:{text:e};if(i&&this.updateStatesOfLabels([p],null!=(s=d.currentStates)?s:[]),"enter"===c)l.push(e),r.set(u,p),this._addLabel(p,l,o,t);else if("update"===c){let e=n.get(u);n.delete(u),r.set(u,e),this._updateLabel(e,p)}}),this._removeLabel(n),this._graphicToText=r}runEnterAnimation(e,t){if(!1===this._enableAnimation||!this._animationConfig.enter)return;let i=this.getRelatedGraphic(e.attribute),{enter:r}=this._animationConfig;[e,t].filter(Boolean).forEach(t=>{var n;null==(n=t.setFinalAttributes)||n.call(t,t.attribute),t.applyAnimationState(["enter"],[{name:"enter",animation:Object.assign(Object.assign({},r),{type:"labelEnter",selfOnly:!0,customParameters:{relatedGraphic:i,relatedGraphics:this._idToGraphic,config:Object.assign(Object.assign({},r),{type:t===e?r.type:"fadeIn"})}})}])})}_runUpdateAnimation(e,t){let{text:i,labelLine:r}=e,{text:n,labelLine:l}=t;i.applyAnimationState(["update"],[{name:"update",animation:{type:"labelUpdate",customParameters:Object.assign(Object.assign({},this._animationConfig.update),{prevText:i,curText:n,prevLabelLine:r,curLabelLine:l})}}])}_syncStateWithRelatedGraphic(e){this.attribute.syncState&&e&&e.on("afterStateUpdate",this._handleRelatedGraphicSetState)}_addLabel(e,t,i,r){let{text:n,labelLine:l}=e,o=this.getRelatedGraphic(n.attribute);this._syncStateWithRelatedGraphic(o),n&&this.add(n),l&&this.add(l),this.runEnterAnimation(n,l)}_updateLabel(e,t){let{text:i,labelLine:r}=e,{text:n,labelLine:l}=t;!1===this._enableAnimation||!1===this._animationConfig.update?(e.text.setAttributes(n.attribute),r&&l&&e.labelLine.setAttributes(l.attribute)):this._runUpdateAnimation(e,t)}_removeLabel(e){let t=e=>{this.removeChild(e.text),e.labelLine&&this.removeChild(e.labelLine)};!1!==this._enableAnimation&&!1!==this._animationConfig.exit?e.forEach(e=>{var i;e.text.applyAnimationState(["exit"],[{name:"exit",animation:Object.assign(Object.assign({},this._animationConfig.exit),{type:"fadeOut"})}],()=>{t(e)}),null==(i=e.labelLine)||i.applyAnimationState(["exit"],[{name:"exit",animation:Object.assign(Object.assign({},this._animationConfig.exit),{type:"fadeOut"})}],()=>{})}):e.forEach(e=>{t(e)})}updateStatesOfLabels(e,t){e.forEach(e=>{e&&(e.text&&e.text.useStates(t),e.labelLine&&e.labelLine.useStates(t))})}_smartInvert(e){var t,i,r,n,l,o,a;let s=(0,r9.Z)(this.attribute.smartInvert)?this.attribute.smartInvert:{},{textType:h,contrastRatiosThreshold:d,alternativeColors:u,mode:c,interactInvertType:p}=s,g=null!=(t=s.fillStrategy)?t:"invertBase",f=null!=(i=s.strokeStrategy)?i:"base",m=null!=(r=s.brightColor)?r:"#ffffff",b=null!=(n=s.darkColor)?n:"#000000",y=null!=(l=s.outsideEnable)&&l;if("null"!==g||"null"!==f)for(let t=0;t<e.length;t++){let i=e[t];if(!i)continue;let r=this.getRelatedGraphic(i.attribute),n=r.getAttributes(!0).fill,l=i.attribute.fill;if((0,r9.Z)(n)&&n.gradient){let e=null==(a=null==(o=n.stops)?void 0:o[0])?void 0:a.color;e&&(n=e,l=e)}let s=bJ(l,n,h,d,u,c),v=bQ(s,m)?m:b,_=this._canPlaceInside(i.AABBBounds,r.AABBBounds),C=!_&&i.AABBBounds&&r.AABBBounds&&r.AABBBounds.intersects(i.AABBBounds);if(_||y||C&&"inside"===p){let e=b2(g,n,s,v);if(e&&i.setAttributes({fill:e}),0===i.attribute.lineWidth||0===i.attribute.strokeOpacity)continue;let t=b2(f,n,s,v);t&&i.setAttributes({stroke:t})}else if(C&&"none"!==p){if(0===i.attribute.lineWidth||0===i.attribute.strokeOpacity)continue;if(i.attribute.stroke){i.setAttributes({fill:bJ(i.attribute.fill,i.attribute.stroke,h,d,u,c)});continue}let e=b2(g,n,s,v);e&&i.setAttributes({fill:e});let t=b2(f,n,s,v);t&&i.setAttributes({stroke:t})}}}_canPlaceInside(e,t){return!(!e||!t)&&t.encloses(e)}setLocation(e){this.translateTo(e.x,e.y)}disableAnimation(){this._enableAnimation=!1}enableAnimation(){this._enableAnimation=!0}}yG.defaultAttributes={textStyle:{fontSize:12,textAlign:"center",textBaseline:"middle",boundsPadding:[-2,-1,-2,-1]},offset:0,pickable:!1};let yV={},yU=(e,t)=>{yV[e]=t},yK=e=>yV[e];var yX=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class yY extends yG{constructor(e,t){let{data:i}=e;super((null==t?void 0:t.skipDefault)?e:Object.assign({data:i},(0,ha.Z)({},yY.defaultAttributes,yX(e,["data"])))),this.name="line-label"}getGraphicBounds(e,t={},i="end"){if(!e||"line"!==e.type&&"area"!==e.type)return super.getGraphicBounds(e,t);let r=e.attribute.points,n=e.attribute.segments;!r&&n&&n.length&&(r=n.reduce((e,t)=>{var i;return e.concat(null!=(i=t.points)?i:[])},[])),r&&0!==r.length||(r=[t]);let l="start"===i?0:r.length-1;return r[l]?{x1:r[l].x,x2:r[l].x,y1:r[l].y,y2:r[l].y}:void 0}labeling(e,t,i="end",r=0){return function(e,t,i="end",r=0){if(!e||!t)return{x:1/0,y:1/0};let{x1:n,x2:l}=e,o=Math.abs(l-n),a=t.x1,s=a;return"end"===i?s=a+o/2+r:"start"===i&&(s=a-o/2-r),{x:s,y:t.y1}}(e,t,i,r)}}yY.defaultAttributes={textStyle:{fill:"#000"},position:"end",offset:6};let yq=()=>{yU("line",yY),yU("area",yY)};var yJ=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class yQ extends yG{constructor(e,t){let{data:i}=e;super((null==t?void 0:t.skipDefault)?e:Object.assign({data:i},(0,ha.Z)({},yQ.defaultAttributes,yJ(e,["data"])))),this.name="symbol-label"}labeling(e,t,i="top",r=0){return yd(e,t,i,r)}}yQ.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};let y0=()=>{yU("symbol",yQ),yU("line-data",yQ)};class y1 extends bH{constructor(){super(...arguments),this.type=y1.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:1})}_getIgnoreAttributes(){var e,t;return(null==(e=this.model)?void 0:e.type)===z.radar&&"polar"===(null==(t=this.model)?void 0:t.coordinate)?[]:["fill","fillOpacity"]}}y1.type="line";let y2=()=>{hp.registerMark(y1.type,y1),pN(),bX(),yq(),y0(),mp(),hp.registerGraphicComponent("line",bz)};class y3 extends pz{constructor(){super(...arguments),this.type=y3.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{size:1,symbolType:"circle",fill:void 0,lineWidth:0})}_transformGraphicAttributes(e,t,i){var r,n,l;let o=super._transformGraphicAttributes(e,t,i),a=null!=(n=null!=(r=o.shape)?r:o.symbolType)?n:null==(l=e.attribute)?void 0:l.symbolType;return(0,r5.Z)(a)?o.symbolType="circle":o.symbolType=a,o}}y3.type="symbol";let y4=()=>{hp.registerMark(y3.type,y3),pN(),uN(),y0(),hp.registerGraphicComponent("symbol",a1)};class y5 extends bC{_transformLabelSpec(e){var t,i,r;!1!==(null==(t=e.point)?void 0:t.visible)&&!1!==(null==(r=null==(i=e.point)?void 0:i.style)?void 0:r.visible)?this._addMarkLabelSpec(e,"point"):this._addMarkLabelSpec(e,"line"),this._addMarkLabelSpec(e,"line","lineLabel","initLineLabelMarkStyle",void 0,!0)}}var y6=i(18181);function y8(e,t,i){let r=!1;if(t&&(0,nr.Z)(t)){for(let n of e)for(let e of n.getSeries(i))if(r=!!t.call(null,e))return r}return r}function y7(e,t){let i=[];for(let r of e)for(let e of r.getSeries(t))i.push(e);return i}let y9=(e,t)=>{for(let i=0;i<e.length;i++){let r=e[i].getSeries();for(let e=0;e<r.length;e++){let i=r[e];if(t&&i&&i.coordinate===t||!t&&i)return i}}return null};function ve(e){return"bottom"===e||"top"===e}function vt(e){return"left"===e||"right"===e}function vi(e){return"z"===e}function vr(e,t){return sZ(e.orient)||t&&t.includes(e.orient)?e.orient:"left"}function vn(e){return"top"===e||"bottom"===e?"horizontal":"vertical"}function vl(e,t){var i,r;let n=null!=(i=e.type)?i:(r=e.orient,t?ve(r)?"linear":"band":ve(r)?"band":"linear");return{axisType:n,componentName:`${sc.cartesianAxis}-${n}`}}let vo=(e,t,i)=>{var r;let n=null!=(r="band"===t?mU("axisBand",i):["linear","log","symlog"].includes(t)?mU("axisLinear",i):{})?r:{},l=ve(e)?mU("axisX",i):vt(e)?mU("axisY",i):mU("axisZ",i);return hs({},mU("axis",i),n,l)};function va(e){return e.length>=2&&(0,sD.Z)(e[0])&&(0,sD.Z)((0,ag.Z$)(e))&&(0,ag.Z$)(e)>=e[0]}function vs(e,t){var i;let r=(0,ag.Z$)(t)-t[0],n=(0,ag.Z$)(t)*t[0]<0,l=t[0]<=0?0-t[0]:0,o=(0,ag.Z$)(t)>0?(0,ag.Z$)(t)-0:0;0===r?t[0]<0?(l=1,o=0):t[0]>0&&(l=0,o=1):(l/=r,o/=r);let a=e.getDomainSpec(),s={total:r,negative:l,positive:o,includeZero:n,domain:t,extendable_min:!(0,sD.Z)(a.min),extendable_max:!(0,sD.Z)(a.max)};if(null==(i=e._break)?void 0:i.scope){let i,r,n=t.findIndex(e=>e>=0);0===n?(i=e._break.scope[n],r=[t[0],t[1]],s.positive=1,s.negative=0):0>=(0,ag.Z$)(t)?(s.positive=0,s.negative=1,r=[t[t.length-2],t[t.length-1]]):(i=e._break.scope[n-1],r=[t[n-1],t[n]],s.negative=i[0]+(0-r[0])/(r[1]-r[0])*(i[1]-i[0]),s.positive=1-s.negative),s.break=!0,s.extendable_max=!1,s.extendable_min=!1,s.domain=r}return s}function vh(e,t){let{positive:i,negative:r,extendable_min:n,extendable_max:l,domain:o}=e,{positive:a,negative:s,extendable_min:h,extendable_max:d,domain:u}=t;if(a>0){if(!h)return!1;let e=r/i;l&&(e=r/Math.max(i,a),o[1]=-o[0]/e),u[0]=-u[1]*e}else if(s>0){if(!d)return!1;let e=i/r;n&&(e=i/Math.max(r,r),o[0]=-o[1]/e),u[1]=-u[0]*e}return!0}function vd(e,t){let{extendable_min:i,extendable_max:r,domain:n}=e,{positive:l,negative:o,domain:a}=t;return(0!==l||0!==o)&&!(l>0&&!r)&&!(o>0&&!i)&&(n[0]=a[0],n[1]=a[1],!0)}function vu(e,t){let{positive:i,negative:r,extendable_max:n,domain:l}=e,{positive:o,negative:a,extendable_min:s,domain:h}=t;if(n&&s){let e=Math.max(r,a)/Math.max(i,o);l[1]=-l[0]/e,h[0]=-h[1]*e}else if(s)h[0]=-h[1]*(r/i);else{if(!n)return!1;l[1]=-l[0]/(a/o)}return!0}function vc(e,t){let{extendable_min:i,domain:r}=e,{extendable_max:n,domain:l}=t;return!(!i||!n)&&(r[0]=-r[1],l[1]=-l[0],!0)}let vp=(e,t)=>{var i,r,n,l;let o=e.getScale(),a=t.getScale();if(!o||!a)return;let s=null!=(r=null==(i=e.getDomainAfterSpec)?void 0:i.call(e))?r:[0,1],h=null!=(l=null==(n=t.getDomainAfterSpec)?void 0:n.call(t))?l:[0,1];if(!(s&&h&&va(s)&&va(h)))return;let d=vs(e,s),u=vs(t,h);if(!0===d.break&&!0===u.break)return;let{positive:c,negative:p,extendable_min:g,extendable_max:f,includeZero:m}=d,{positive:b,negative:y,extendable_min:v,extendable_max:_,includeZero:C}=u;if(0===c&&0===p){if(!vd(d,u))return}else if(0===b&&0===y){if(!vd(u,d))return}else if(m||C)if(m&&!C){if(!vh(d,u))return}else if(C&&!m){if(!vh(u,d))return}else{if(p===y)return;if(p>y){if(!vu(d,u))return}else if(!vu(u,d))return}else{if(0===p&&0===b){if(!vc(d,u))return}else if(0===y&&0===c&&!vc(u,d))return;if(0===p&&0===y)if(0===s[0]&&h[0]>0){if(!v)return;h[0]=0}else{if(!(0===h[0]&&s[0]>0)||!g)return;s[0]=0}if(0===c&&0===b)if(0===s[1]&&h[1]>0){if(!_)return;h[1]=0}else{if(!(0===h[1]&&s[1]>0)||!f)return;s[1]=0}}o.domain(s),a.domain(h)},vg=e=>e.map((e,t)=>({index:t,value:e})),vf=(e,t,i=0)=>{let r=new t4.FB(e).expand(i/2),n=new t4.FB(t).expand(i/2);return r.intersects(n)},vm=(e,t,i,r)=>i<e?Math.max(e-t/2,i):i>e?Math.min(e-t/2,i-t):i<r?i:i-t,vb=(e,t,i)=>{var r,n,l;let{labelStyle:o,axisOrientType:a,labelFlush:s,labelFormatter:h,startAngle:d=0}=i,u=null!=(r=o.angle)?r:0;"vertical"===o.direction&&(u+=(0,t9.M4)(90));let c=["bottom","top"].includes(a),p=["left","right"].includes(a),g=1,f=0;c||(p?(g=0,f=1):d&&(g=Math.cos(d),f=-Math.sin(d)));let m=pq(o),b=e.range(),y=[];for(let i=0;i<t.length;i++){let r=t[i],a=h?h(r):`${r}`;if((0,sF.Z)(a)){y=void 0;break}let{width:d,height:v}=m.quickMeasure(a),_=Math.max(d,12),C=Math.max(v,12),x=e.scale(r),w=g*x,S=f*x,A,k,M=w,T=S;s&&c&&0===i?M=vm(w,_,b[0],b[b.length-1]):s&&c&&i===t.length-1?M=vm(w,_,b[b.length-1],b[0]):A=null!=(n=o.textAlign)?n:"center","right"===A?M-=_:"center"===A&&(M-=_/2),s&&p&&0===i?T=vm(S,C,b[0],b[b.length-1]):s&&p&&i===t.length-1?T=vm(S,C,b[b.length-1],b[0]):k=null!=(l=o.textBaseline)?l:"middle","bottom"===k?T-=C:"middle"===k&&(T-=C/2);let R=(new t4.FB).set(M,T,M+_,T+C);u&&R.rotate(u,w,S),y.push(R)}return y},vy=e=>["bottom","top","z"].includes(e),vv=(e,t)=>{var i,r,n,l,o;if(!e)return e;let a=null==(i=null==t?void 0:t.targetAxis)?void 0:i.call(t);if(!a)return e;let s=null==(r=null==t?void 0:t.currentAxis)?void 0:r.call(t);if(!s)return e;let h=null==(n=s.getTickData())?void 0:n.getDataView();if(!h||!h.transformsArr.find(e=>e.type.includes("ticks")))return e;let d=s.getScale();if(!d)return e;let u=null==(o=null==(l=a.getTickData())?void 0:l.getDataView())?void 0:o.latestData;if(!(null==u?void 0:u.length))return e;let c=a.getScale();if(!c)return e;let p=c.domain(),g=(0,ag.Z$)(p)-p[0];if(0===g)return e;let f=d.domain(),m=(0,ag.Z$)(f)-f[0];return 0===g?e:vg(u.map(e=>(function(e,t,i,r,n){let l=(0,t0.f2)(e,t),o=Math.max((0,t0.i4)(i),(0,t0.i4)(l));return Math.round(l*10**o)/Math.round(i*10**o)*n+r})(e.value,p[0],g,f[0],m)))};class v_{constructor(e){this.id=sO(),this.name=`${e}_${this.id}`}onAdd(e){this.service=e}release(){this.service=null}}class vC extends v_{constructor(){super(vC.type),this.type="AxisSyncPlugin"}_checkEnableSync(e){if(!(0,cz.z2)(e.getScale().type))return!1;let t=e.getSpec().sync;return!!(null==t?void 0:t.axisId)&&t}_getTargetAxis(e,t){let i=e.getOption().getChart().getComponentByUserId(t.axisId);return(null==i?void 0:i.type.startsWith("cartesianAxis"))?i:null}onInit(e,t){let i=this._checkEnableSync(t);if(!i||!i.zeroAlign)return;let r=this._getTargetAxis(t,i);r&&t.event.on(N.scaleDomainUpdate,{filter:({model:e})=>e.id===t.id||e.id===r.id},()=>{vp(r,t)})}onDidCompile(e,t){var i;let r=this._checkEnableSync(t);if(!r)return;let n=this._getTargetAxis(t,r);if(n&&r.tickAlign){hK(t.getOption().dataSet,"tickAlign",vv);let e=null==(i=n.getTickData())?void 0:i.getDataView();e&&e.target.addListener("change",()=>{var e,i;null==(i=null==(e=t.getTickData())?void 0:e.getDataView())||i.reRunAllTransform({skipEqual:!0})}),t.addTransformToTickData({type:"tickAlign",options:{targetAxis:()=>n,currentAxis:()=>t},level:Number.MAX_SAFE_INTEGER},!1)}}}function vx(e={}){let t=Object.assign({},e);if((0,nr.Z)(e.style)?t.style=(t,i,r,n)=>vA(e.style(t,i,r,n)):(0,d$.Z)(e.style)||(t.style=vA(e.style)),!(0,d$.Z)(e.state)){let i={};Object.keys(e.state).forEach(t=>{(0,nr.Z)(e.state[t])?i[t]=(i,r,n,l)=>vA(e.state[t](i,r,n,l)):(0,d$.Z)(e.state[t])||(i[t]=vA(e.state[t]))}),t.state=i}return t}function vw(e){if((0,d$.Z)(e))return null;let t={};return Object.keys(e).forEach(i=>{(0,nr.Z)(e[i])?t[i]=(t,r,n,l)=>vA(e[i](t,r,n,l)):(0,d$.Z)(e[i])||(t[i]=vA(e[i]))}),t}function vS(e,t){if((0,d$.Z)(e))return null;let i={};return Object.keys(e).forEach(r=>{(0,nr.Z)(e[r])?i[r]=e[r](t):i[r]=e[r]}),vA(i)}function vA(e){return(null==e?void 0:e.angle)?Object.assign(Object.assign({},e),{angle:(0,t9.M4)(e.angle)}):e}vC.pluginType="component",vC.type="AxisSyncPlugin";let vk={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}};function vM(e){let t=0;return(0,hH.Z)(e,"tick.visible")&&(t+=(0,hH.Z)(e,"tick.tickSize")),(0,hH.Z)(e,"label.visible")&&(t+=(0,hH.Z)(e,"label.space")),t}function vT(e,t){var i,r,n,l,o,a;return{min:null!=(n=null!=(i=e.min)?i:null==(r=e.range)?void 0:r.min)?n:null==t?void 0:t.min,max:null!=(a=null!=(l=e.max)?l:null==(o=e.range)?void 0:o.max)?a:null==t?void 0:t.max}}function vR(e){let t=null==e?void 0:e.orient;return"top"===t||"bottom"===t||"left"===t||"right"===t||"z"===t}let vE=e=>"band"===e||"ordinal"===e||"point"===e;function vP(e,t){return{id:e,label:e,value:t,rawValue:e}}function vB(e,t,i){return i||!e||e.getAxisId()===t.getAxisId()}class vI extends gL{constructor(e){super(),this.component=e}releaseAll(){super.releaseAll(),this.component=null}}let vL=`${dg}_ARC_TRANSFORM_VALUE`,vF=`${dg}_ARC_RATIO`,vH=`${dg}_ARC_START_ANGLE`,vO=`${dg}_ARC_END_ANGLE`,vD=`${dg}_ARC_K`,vz=`${dg}_ARC_MIDDLE_ANGLE`,vW=`${dg}_ARC_QUADRANT`,vZ=`${dg}_ARC_RADIAN`,vN=-Math.PI/2,v$=3*Math.PI/2,vj=(e,t)=>{var i,r,n,l,o,a;let s=null!=(i=e.type)?i:"angle"===e.orient?"band":"linear",h=`${sc.polarAxis}-${s}`,d=null!=(r=e.startAngle)?r:t.startAngle,u=null!=(n=e.endAngle)?n:t.endAngle;return{axisType:s,componentName:h,startAngle:null!=d?d:-90,endAngle:null!=u?u:(0,oV.Z)(d)?d+360:270,center:(0,oV.Z)(t.center)?t.center:(0,oV.Z)(null==t?void 0:t.centerX)||(0,oV.Z)(null==t?void 0:t.centerY)?{x:null==t?void 0:t.centerX,y:null==t?void 0:t.centerY}:void 0,outerRadius:null!=(a=null!=(o=null!=(l=e.outerRadius)?l:e.radius)?o:t.outerRadius)?a:t.radius,layoutRadius:t.layoutRadius}},vG=(e,t,i,r)=>{let n=e();if((0,nw.Z)(n))return n;if((0,nr.Z)(n))return n(t(),i());let l=t();if("auto"===n&&l.width>0&&l.height>0){let{startAngle:e=0,endAngle:t=2*Math.PI}=r();return(0,t9.Re)(l,i(),e,t)}return Math.min(l.width/2,l.height/2)},vV=(e,t,i)=>{var r;let n=null!=(r="band"===t?mU("axisBand",i):"linear"===t?mU("axisLinear",i):{})?r:{},l=mU("angle"===e?"axisAngle":"axisRadius",i);return hs({},mU("axis",i),n,l)},vU=(e,t)=>{var i,r;let n,l=(0,ag.IX)(null!=(i=t.axes)?i:[]),{bandField:o,linearField:a,xField:s,yField:h,trigger:d,triggerOff:u}=null!=(r=mU(sc.crosshair,e))?r:{},c=l.find(e=>ve(e.orient));n=(0,oV.Z)(c)?hs({},vE(c.type)?o:a,s):s;let p=l.find(e=>vt(e.orient));return{xField:n,yField:(0,oV.Z)(p)?hs({},(0,cz.lK)(p.type)?o:a,h):h,trigger:d,triggerOff:u}},vK=(e,t)=>{var i,r;let n,l=(0,ag.IX)(null!=(i=t.axes)?i:[]),{bandField:o,linearField:a,categoryField:s,valueField:h,trigger:d,triggerOff:u}=null!=(r=mU(sc.crosshair,e))?r:{},c=l.find(e=>"angle"===e.orient);n=(0,oV.Z)(c)?hs({},vE(c.type)?o:a,s):s;let p=l.find(e=>"radius"===e.orient);return{categoryField:n,valueField:(0,oV.Z)(p)?hs({},(0,cz.lK)(p.type)?o:a,h):h,trigger:d,triggerOff:u}},vX=(e,t)=>{var i;let r=null!=(i=e.orient)?i:t.orient,n=t[vn(r)],l=hs({},t,n);return delete l.horizontal,delete l.vertical,l};class vY extends cs{getTheme(e,t){var i=this.type,r=this._option.getTheme;switch(i){case sc.cartesianBandAxis:return vo(vr(e,["z"]),"band",r);case sc.cartesianLinearAxis:return vo(vr(e,["z"]),"linear",r);case sc.cartesianLogAxis:return vo(vr(e,["z"]),"log",r);case sc.cartesianSymlogAxis:return vo(vr(e,["z"]),"symlog",r);case sc.cartesianAxis:case sc.cartesianTimeAxis:return vo(vr(e),void 0,r);case sc.polarBandAxis:return vV(e.orient,"band",r);case sc.polarLinearAxis:return vV(e.orient,"linear",r);case sc.polarAxis:return vV(e.orient,void 0,r);case sc.cartesianCrosshair:return vU(r,t);case sc.polarCrosshair:return vK(r,t);case sc.colorLegend:case sc.sizeLegend:case sc.discreteLegend:case sc.dataZoom:case sc.scrollBar:return vX(e,mU(i,r));default:return mU(i,r)}}_mergeThemeToSpec(e,t){let{spec:i,theme:r}=super._mergeThemeToSpec(e,t);return this._adjustPadding(i),{spec:i,theme:r}}_adjustPadding(e){let{padding:t,noOuterPadding:i=!0,orient:r}=e;i&&t&&r&&(e.padding=Object.assign(Object.assign({},sG(t)),{[r]:0}))}}var vq=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class vJ extends cg{constructor(){super(...arguments),this.name="component",this.modelType="component",this.transformerConstructor=vY,this._delegateEvent=(e,t,i,r=null,n=null)=>{var l,o;t instanceof no||this.event.emit(i,{model:this,node:e,event:t,item:r,datum:n,source:$.chart,chart:null==(o=null==(l=this._option)?void 0:l.globalInstance)?void 0:o.getChart()},"model")}}static createComponent(e,t){let{spec:i}=e,r=vq(e,["spec"]);return new this(i,Object.assign(Object.assign({},t),r))}getRegions(){return this._regions}created(){super.created(),this.initLayout(),this.pluginService=new vI(this)}initLayout(){var e;super.initLayout(),this._regions=null!=(e=this._regions)?e:this._option.getRegionsInIndex(),this._layout&&(this._layout.layoutBindRegionID=this._regions.map(e=>null==e?void 0:e.id))}_getNeedClearVRenderComponents(){return[]}getVRenderComponents(){return this._getNeedClearVRenderComponents()}callPlugin(e){this.pluginService&&this.pluginService.getAll().forEach(t=>e(t))}getContainer(){var e;return this._container||(this._container=null==(e=this._option)?void 0:e.globalInstance.getStage().find(e=>"root"===e.name,!0)),this._container}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(i.reMake=["seriesId","seriesIndex","regionId","regionIndex"].some(i=>!(0,dN.X)(null==t?void 0:t[i],e[i]))),(null==t?void 0:t.visible)!==e.visible&&(i.reCompile=!0),i}release(){var e;super.release(),this.clear(),null==(e=this.pluginService)||e.releaseAll(),this.pluginService=null}clear(){var e;let t=this._getNeedClearVRenderComponents();t&&t.length&&t.forEach(e=>{var t;e&&(null==(t=this.getContainer())||t.removeChild(e),e=null)}),this._container=null,null==(e=this.pluginService)||e.clearAll()}compile(){this.compileMarks(),this.reAppendComponents()}compileMarks(e){this.getMarks().forEach(t=>{t.compile({group:e,context:{model:this}})})}reAppendComponents(){let e=this._getNeedClearVRenderComponents();e&&e.length&&e.forEach(e=>{var t;e&&!e.stage&&(null==(t=this.getContainer())||t.appendChild(e))})}getBoundsInRect(e,t){return{x1:0,x2:0,y1:0,y2:0}}getDatum(e){}}vJ.transformerConstructor=vY,(ec=eI||(eI={})).lineAxis="lineAxis",ec.circleAxis="circleAxis",(ep=eL||(eL={})).lineAxisGrid="lineAxisGrid",ep.circleAxisGrid="circleAxisGrid";var vQ=i(15215);class v0 extends pz{constructor(e,t){super(e,t),this.type="component",this._componentType=t.componentType,this._mode=t.mode}_getDefaultStyle(){return{}}getComponent(){return this._component}clearComponent(){this._component&&(this._component.parent&&this._component.parent.removeChild(this._component),this._component=null)}_getAttrsFromConfig(e={}){let t=super._getAttrsFromConfig(e);return(0,r5.Z)(this._markConfig.interactive)||(t.pickable=this._markConfig.interactive),e}setAttributeTransform(e){this._attributesTransform=e}renderInner(){var e;let t=null!=(e=this._simpleStyle)?e:this.getAttributesOfState({}),i=this._getAttrsFromConfig(t);this._attributesTransform&&(i=this._attributesTransform(i)),this._animationConfig&&(i=Object.assign(Object.assign({},i),{animation:!0,animationAppear:this._animationConfig.appear?Array.isArray(this._animationConfig.appear)?this._animationConfig.appear[0]:this._animationConfig.appear:void 0,animationEnter:this._animationConfig.enter?Array.isArray(this._animationConfig.enter)?this._animationConfig.enter[0]:this._animationConfig.enter:void 0,animationUpdate:this._animationConfig.update?Array.isArray(this._animationConfig.update)?this._animationConfig.update[0]:this._animationConfig.update:void 0,animationExit:this._animationConfig.exit?Array.isArray(this._animationConfig.exit)?this._animationConfig.exit[0]:this._animationConfig.exit:void 0})),this._component?this._component.setAttributes(i):(this._component=hp.createGraphicComponent(this._componentType,i,{mode:this._mode,skipDefault:this._markConfig.skipTheme}),this._component&&this._product.appendChild(this._component)),this._component&&(this._component.context=this._getCommonContext()),this._markConfig.support3d&&this._product&&this._product.setMode("3d"),this.model.event.emit(Z.AFTER_ELEMENT_ENCODE,{mark:this,model:this.model}),this.needClear=!0}release(){super.release(),this.removeProduct()}}v0.type="component";let v1=()=>{hp.registerMark(v0.type,v0)};(eg=eF||(eF={})).innerView="inner-view",eg.axisContainer="axis-container",eg.labelContainer="axis-label-container",eg.tickContainer="axis-tick-container",eg.tick="axis-tick",eg.subTick="axis-sub-tick",eg.label="axis-label",eg.title="axis-title",eg.labelHoverOnAxis="axis-label-hover-on-axis",eg.gridContainer="axis-grid-container",eg.grid="axis-grid",eg.gridRegion="axis-grid-region",eg.line="axis-line",eg.background="axis-background",eg.axisLabelBackground="axis-label-background",eg.axisBreak="axis-break",eg.axisBreakSymbol="axis-break-symbol",(ef=eH||(eH={})).selected="selected",ef.selectedReverse="selected_reverse",ef.hover="hover",ef.hoverReverse="hover_reverse";let v2={[eH.selectedReverse]:{},[eH.selected]:{},[eH.hover]:{},[eH.hoverReverse]:{}},v3=e=>e;var v4=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class v5 extends vJ{getOrient(){return this._orient}getScale(){return this._scale}getScales(){return this._scales}getTickData(e=0){return this._tickData[e]}get visible(){return this._visible}getInverse(){return this._inverse}getCoordinateType(){return this._coordinateType}constructor(e,t){var i;super(e,t),this.specKey="axes",this._scales=[],this._tickData=[],this._visible=!0,this._tick=void 0,this._onTickDataChange=e=>{this._forceLayout(),null==e||e.updateData()},this._visible=null==(i=e.visible)||i,this._coordinateType="none"}getVRenderComponents(){var e,t;return[null==(e=this._axisMark)?void 0:e.getProduct(),null==(t=this._gridMark)?void 0:t.getProduct()].filter(oV.Z)}created(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y;if(super.created(),this.setSeriesAndRegionsFromSpec(),this.initEvent(),this.initScales(),this.updateSeriesScale(),this._shouldComputeTickData()&&this._initData(),this._visible){let v=this._createMark({type:"component",name:`axis-${this.getOrient()}`},{componentType:"angle"===this.getOrient()?eI.circleAxis:eI.lineAxis,mode:this._spec.mode},{skipTheme:!0});if(this._updateTickDataMarks(v),this._axisMark=v,v.setMarkConfig({zIndex:this.layoutZIndex}),(0,oV.Z)(this._spec.id)&&v.setUserId(this._spec.id),v.setMarkConfig({interactive:null!=(e=this._spec.interactive)?e:this.getDefaultInteractive()}),this._marks.addMark(v),null==(t=this._spec.grid)?void 0:t.visible){let e=this._createMark({type:"component",name:`axis-${this.getOrient()}-grid`},{componentType:"angle"===this.getOrient()?eL.circleAxisGrid:eL.lineAxisGrid,mode:this._spec.mode},{skipTheme:!0});this._updateTickDataMarks(e),e.setMarkConfig({zIndex:null!=(o=null!=(n=null==(r=null==(i=this._spec.grid)?void 0:i.style)?void 0:r.zIndex)?n:null==(l=this._spec.grid)?void 0:l.zIndex)?o:X.Axis_Grid,interactive:!1}),this._marks.addMark(e),this._gridMark=e}if((null==(a=this._option.globalInstance)?void 0:a.isAnimationEnable())&&!1!==(0,hH.Z)(this._option.getChart().getSpec(),"animation")&&!0===this._spec.animation){let e=bg(null==(s=hp.getAnimationInKey("axis"))?void 0:s(),{appear:null!=(d=null!=(h=this._spec.animationAppear)?h:(0,hH.Z)(this._option.getChart().getSpec(),"animationAppear.axis"))?d:(0,hH.Z)(this._option.getChart().getSpec(),"animationAppear"),disappear:null!=(c=null!=(u=this._spec.animationDisappear)?u:(0,hH.Z)(this._option.getChart().getSpec(),"animationDisappear.axis"))?c:(0,hH.Z)(this._option.getChart().getSpec(),"animationDisappear"),enter:null!=(g=null!=(p=this._spec.animationEnter)?p:(0,hH.Z)(this._option.getChart().getSpec(),"animationEnter.axis"))?g:(0,hH.Z)(this._option.getChart().getSpec(),"animationEnter"),exit:null!=(m=null!=(f=this._spec.animationExit)?f:(0,hH.Z)(this._option.getChart().getSpec(),"animationExit.axis"))?m:(0,hH.Z)(this._option.getChart().getSpec(),"animationExit"),update:null!=(y=null!=(b=this._spec.animationUpdate)?b:(0,hH.Z)(this._option.getChart().getSpec(),"animationUpdate.axis"))?y:(0,hH.Z)(this._option.getChart().getSpec(),"animationUpdate")});e.enter&&(e.update[0].customParameters={enter:e.enter[0]}),this._marks.forEach(t=>t.setAnimationConfig(e))}}}_shouldComputeTickData(){return this.getVisible()||this._spec.forceInitTick}_initData(){let e=this._initTickDataSet(this._tickTransformOption()),t=new cj(this._option,e);this._tickData=[t],e.target.addListener("change",()=>{this._onTickDataChange(t)})}collectData(e,t){let i=[];return y8(this._regions,r=>{var n;let l=this.collectSeriesField(e,r);if(l=(0,ri.Z)(l)?(0,cz.z2)(this._scale.type)?l:[l[0]]:[l],e||(this._dataFieldText=r.getFieldAlias(l[0])),l){let e=r.getViewData();if(t)l.forEach(e=>{i.push(r.getRawDataStatisticsByField(e,!!(0,cz.z2)(this._scale.type)))});else if(e&&e.latestData&&e.latestData.length){let t=null==(n=r.getViewDataStatistics)?void 0:n.call(r),o=this.type===sc.cartesianLinearAxis&&this._spec.breaks&&this._spec.breaks.length;l.forEach(r=>{var n;(null==(n=null==t?void 0:t.latestData)?void 0:n[r])&&(o?i.push(Object.assign(Object.assign({},t.latestData[r]),{values:e.latestData.map(e=>e[r])})):i.push(t.latestData[r]))})}}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),i}isSeriesDataEnable(){let e=!0;return y8(this._regions,t=>{var i;(0,ri.Z)(null==(i=t.getViewDataStatistics())?void 0:i.latestData)&&(e=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),e}setSeriesAndRegionsFromSpec(){let{seriesId:e,seriesIndex:t,regionId:i,regionIndex:r}=this._spec;(0,oV.Z)(e)&&(this._seriesUserId=(0,ag.IX)(e)),(0,oV.Z)(i)&&(this._regionUserId=(0,ag.IX)(i)),(0,oV.Z)(t)&&(this._seriesIndex=(0,ag.IX)(t)),(0,oV.Z)(r)&&(this._regionIndex=(0,ag.IX)(r)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionIndex),this.layout.layoutBindRegionID=this._regions.map(e=>e.id)}getBindSeriesFilter(){return{userId:this._seriesUserId,specIndex:this._seriesIndex}}initEvent(){this.event.on(N.scaleUpdate,{filter:({model:e})=>(null==e?void 0:e.id)===this.id},this.effect.scaleUpdate.bind(this));let e=y7(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}).map(e=>e.getViewDataStatistics()).filter(e=>!!e);e.length>1?this._option.dataSet.multipleDataViewAddListener(e,"change",()=>{this.updateScaleDomain()}):1===e.length&&e[0].target.addListener("change",()=>{this.updateScaleDomain()}),y8(this._regions,e=>{e.event.on(N.rawDataUpdate,{filter:({model:t})=>(null==t?void 0:t.id)===e.id},()=>{this._clearRawDomain()})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}updateScaleDomain(){}_clearRawDomain(){}onLayoutEnd(){this.updateScaleRange(),this.event.emit(N.scaleUpdate,{model:this,value:"range"}),super.onLayoutEnd()}computeData(e){"force"!==e||this._tickData&&this._tickData.length?!this._tickData||!this._tickData.length||"force"!==e&&(0,dN.X)(this._scale.range(),[0,1])||this._tickData.forEach(e=>{e.getDataView().reRunAllTransform({skipEqual:!0})}):y8(this._regions,e=>{var t;null==(t=e.getViewData())||t.reRunAllTransform()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_updateTickDataMarks(e){this._tickData&&this._tickData.forEach(t=>{t.addRelatedMark(e)})}initScales(){this._scales=[this._scale];let e=[];if(y8(this._regions,t=>{let i=t.getGroups();i&&e.push(i)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),0!==e.length){let t=(0,ag.CE)(e.map(e=>e.fields.length));for(let e=1;e<t;e++){let e=this._scale.clone();this._scales.push(e)}}}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(i.reRender=!0,(null==t?void 0:t.type)!==(null==e?void 0:e.type)||(null==t?void 0:t.visible)!==(null==e?void 0:e.visible)?i.reMake=!0:i.reMake=["grid","subGrid","tick","subTick","label","domainLine","title"].some(i=>{var r,n;return(null==(r=null==t?void 0:t[i])?void 0:r.visible)!==(null==(n=null==e?void 0:e[i])?void 0:n.visible)})),i}_getAxisAttributes(){var e;let t=this._spec,i={orient:this.getOrient(),select:!0!==this._option.disableTriggerEvent&&t.select,hover:!0!==this._option.disableTriggerEvent&&t.hover};if((t.domainLine&&t.domainLine.visible?((e=vx(e=t.domainLine)).startSymbol=vx(e.startSymbol),e.endSymbol=vx(e.endSymbol),i.line=e):i.line={visible:!1},t.label&&t.label.visible)?(i.label=(0,vQ.Z)(t.label,["style","formatMethod","state"]),t.label.style&&(i.label.style=(0,nr.Z)(t.label.style)?(e,i,r,n)=>{var l;let o=t.label.style(e.rawValue,i,e,r,n);return vA(hs({},null==(l=this._theme.label)?void 0:l.style,o))}:vA(t.label.style)),(t.label.formatMethod||t.label.formatter)&&(i.label.formatMethod=this._getLabelFormatMethod()),t.label.state&&(i.label.state=function(e){if((0,d$.Z)(e))return null;let t={};return Object.keys(e).forEach(i=>{(0,nr.Z)(e[i])?t[i]=(t,r,n,l)=>vA(e[i](t.rawValue,r,t,n,l)):(0,d$.Z)(e[i])||(t[i]=vA(e[i]))}),t}(t.label.state)),(0,nr.Z)(t.label.dataFilter)&&(i.label.dataFilter=(e,i)=>t.label.dataFilter(e,i,{vchart:this._option.globalInstance}))):i.label={visible:!1},t.tick&&t.tick.visible?(i.tick={visible:t.tick.visible,length:t.tick.tickSize,inside:t.tick.inside,alignWithLabel:t.tick.alignWithLabel,dataFilter:(0,nr.Z)(t.tick.dataFilter)?e=>t.tick.dataFilter(e,{vchart:this._option.globalInstance}):void 0},t.tick.style&&(i.tick.style=(0,nr.Z)(t.tick.style)?(e,i,r,n)=>{var l;let o=t.tick.style(e,i,r,n);return vA(hs({},null==(l=this._theme.tick)?void 0:l.style,o))}:vA(t.tick.style)),t.tick.state&&(i.tick.state=vw(t.tick.state))):i.tick={visible:!1},t.subTick&&t.subTick.visible?(i.subTick={visible:t.subTick.visible,length:t.subTick.tickSize,inside:t.subTick.inside,count:t.subTick.tickCount},t.subTick.style&&(i.subTick.style=(0,nr.Z)(t.subTick.style)?(e,i,r,n)=>{var l;let o=t.subTick.style(e,i,r,n);return vA(hs({},null==(l=this._theme.subTick)?void 0:l.style,o))}:vA(t.subTick.style)),t.subTick.state&&(i.subTick.state=vw(t.subTick.state))):i.subTick={visible:!1},t.title&&t.title.visible){let e=t.title,{autoRotate:r,angle:n,style:l={},background:o,state:a,shape:s}=e,h=v4(e,["autoRotate","angle","style","background","state","shape"]),d,u=n;"left"!==t.orient&&"right"!==t.orient||r&&(0,r5.Z)(u)&&(u="left"===t.orient?-90:90,d=vk[t.orient]),i.title=Object.assign(Object.assign({},h),{autoRotate:!1,angle:u?(0,t9.M4)(u):null,textStyle:hs({},d,vA(l)),pickable:!1!==l.pickable,childrenPickable:!1!==l.pickable,state:{}}),s&&s.visible?(i.title.shape=Object.assign(Object.assign({},s),{style:vA(s.style)}),s.state&&(i.title.state.shape=vw(s.state))):i.title.shape={visible:!1},o&&o.visible?(i.title.background=Object.assign(Object.assign({},o),{style:vA(o.style)}),o.state&&(i.title.state.background=vw(o.state))):i.title.background={visible:!1},a&&(i.title.state.text=vw(a))}else i.title={visible:!1};return t.background&&t.background.visible?(i.panel={visible:!0},t.background.style&&(i.panel.style=vA(t.background.style)),t.background.state&&(i.panel.state=vw(t.background.state))):i.panel={visible:!1},i}_getGridAttributes(){let e=this._spec;return{alternateColor:e.grid.alternateColor,alignWithLabel:e.grid.alignWithLabel,style:(0,nr.Z)(e.grid.style)?(t,i)=>{var r,n;let l=e.grid.style(null==(r=t.datum)?void 0:r.rawValue,i,t.datum);return vA(hs({},null==(n=this._theme.grid)?void 0:n.style,l))}:vA(e.grid.style),subGrid:!1===e.subGrid.visible?{visible:!1}:{type:"line",visible:e.subGrid.visible,alternateColor:e.subGrid.alternateColor,style:vA(e.subGrid.style)}}}_getLabelFormatMethod(){let{formatMethod:e,formatter:t}=this._spec.label,{formatFunc:i}=mK(e,t);return i?(e,r,n)=>i(r.rawValue,r,t):null}_initTickDataSet(e,t=0){hX(this._option.dataSet,"scale",v3);let i=this.registerTicksTransform();return new tf.V(this._option.dataSet,{name:`${this.type}_${this.id}_ticks_${t}`}).parse(this._scales[t],{type:"scale"}).transform({type:i,options:e},!1)}_tickTransformOption(){let e=this._tick||{},t=this._spec.label||{},{tickCount:i,forceTickCount:r,tickStep:n,tickMode:l}=e,{style:o,formatMethod:a,minGap:s}=t;return{sampling:!1!==this._spec.sampling,tickCount:i,forceTickCount:r,tickStep:n,tickMode:l,axisOrientType:this._orient,coordinateType:this._coordinateType,labelStyle:o,labelFormatter:a,labelGap:s}}addTransformToTickData(e,t){this._tickData.forEach(i=>{var r;null==(r=null==i?void 0:i.getDataView())||r.transform(e,t)})}dataToPosition(e){return this._scale.scale(e)}getDatum(e){var t;return e&&e.name===eF.label?e.data:this._axisMark?null==(t=this._axisMark.getComponent())?void 0:t.attribute.items:void 0}scaleRangeFactor(e,t,i){return this._onTickDataChange(this.getTickData()),this.getScale().rangeFactor(e,t,i)}scaleRangeFactorEnd(e,t,i){return this._onTickDataChange(this.getTickData()),this.getScale().rangeFactorEnd(e,t)}scaleRangeFactorStart(e,t,i){return this._onTickDataChange(this.getTickData()),this.getScale().rangeFactorStart(e,t)}}v5.specKey="axes";let v6=()=>{v1(),hp.registerAnimation("axis",()=>({appear:{type:"fadeIn"},enter:{type:"fadeIn"},update:{type:"update"},exit:{type:"fadeOut"}}))},v8=e=>{let{x:t,y:i}=e[0].getLayoutStartPoint(),r=t+e[0].getLayoutRect().width,n=i+e[0].getLayoutRect().height;for(let l=1;l<e.length;l++){let o=e[l],{x:a,y:s}=o.getLayoutStartPoint(),{width:h,height:d}=o.getLayoutRect();t=Math.min(t,a),r=Math.max(r,h+a),i=Math.min(i,s),n=Math.max(n,d+s)}return{width:Math.abs(r-t),height:Math.abs(n-i)}};var v7=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};let v9=[vC];class _e extends v5{getOrient(){return this._orient}getDefaultInteractive(){return!0}set autoIndentOnce(e){this._autoIndentOnce=e}getScales(){return this._scales}getInnerOffset(){return this._innerOffset}constructor(e,t){super(e,t),this.type=sc.cartesianAxis,this.name=sc.cartesianAxis,this._defaultBandPosition=.5,this._defaultBandInnerPadding=.1,this._defaultBandOuterPadding=.3,this.layoutType="region-relative",this.layoutZIndex=X.Axis,this.layoutLevel=Y.Axis,this._orient="left",this._autoIndentOnce=!1,this._hasAutoIndent=!1,this._scales=[],this._tick=void 0,this._layoutCache={width:0,height:0,_lastComputeOutBounds:{x1:0,x2:0,y1:0,y2:0}},this._innerOffset={top:0,bottom:0,left:0,right:0},this.effect={scaleUpdate:e=>{this.computeData(null==e?void 0:e.value),y8(this._regions,e=>{let t=this.getOrient();ve(t)?vB(e.getXAxisHelper(),this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&e.setXAxisHelper(this.axisHelper()):vt(t)?vB(e.getYAxisHelper(),this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&e.setYAxisHelper(this.axisHelper()):vi(t)&&vB(e.getZAxisHelper(),this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&e.setZAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=e=>{let{x:t,y:i}=e;return(0,sD.Z)(t)&&(t+=Number("left"===this._orient)*this.getLayoutRect().width),(0,sD.Z)(i)&&(i+=Number("top"===this._orient)*this.getLayoutRect().height),{x:t,y:i}},this._transformLayoutRect=e=>{if(!this._visible)return e;let t=this._latestBounds.clone().translate(-this.getLayoutStartPoint().x,-this.getLayoutStartPoint().y);switch(this._layout.layoutOrient){case"left":0===this._layout.layoutRectLevelMap.width&&(e.width=t.x1<0?-t.x1:0);break;case"right":0===this._layout.layoutRectLevelMap.width&&(e.width=t.x2>0?t.x2:0);break;case"top":0===this._layout.layoutRectLevelMap.height&&(e.height=t.y1<0?-t.y1:0);break;case"bottom":0===this._layout.layoutRectLevelMap.height&&(e.height=t.y2>0?t.y2:0)}return e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),this._layout.setRectInSpec(this._layoutCacheProcessing(e))},this._transformLayoutPadding=e=>("left"===this.layoutOrient||"right"===this.layoutOrient?(e.top=0,e.bottom=0):"top"!==this.layoutOrient&&"bottom"!==this.layoutOrient||(e.left=0,e.right=0),e),this._updateAxisLayout=()=>{let e=this.getLayoutStartPoint(),t=this._getUpdateAttribute(!1),{grid:i}=t,r=v7(t,["grid"]),n=hs({x:e.x,y:e.y},this._axisStyle,r);this._axisMark.setSimpleStyle(n),this._gridMark&&this._gridMark.setSimpleStyle(hs({x:e.x,y:e.y},this._getGridAttributes(),i))},this._fixAxisOnZero=()=>{let{onZero:e,visible:t}=this._spec.domainLine;if(this.visible&&e&&!1!==t){let{onZeroAxisId:e,onZeroAxisIndex:t}=this._spec.domainLine,i=this._option.getComponentsByKey("axes"),r=ve(this.getOrient()),n=e=>{var t;return(r?!ve(e.getOrient()):ve(e.getOrient()))&&(0,cz.z2)(e.getScale().type)&&(e.getTickData()?null==(t=e.getTickData().getLatestData())?void 0:t.find(e=>0===e.value):e.getScale().domain()[0]<=0&&(0,ag.Z$)(e.getScale().domain())>=0)},l=i.filter(e=>n(e));if(l.length){let o;if((0,oV.Z)(e))o=l.find(t=>t.id===e);else if((0,oV.Z)(t)){let e=i[t];n(e)&&(o=e)}else o=l[0];if(o){let e=this._axisMark,t=o.valueToPosition(0);r?e.setSimpleStyle(Object.assign(Object.assign({},e.getSimpleStyle()),{line:Object.assign(Object.assign({},this._axisStyle.line),{dy:"bottom"===this._orient?-((o.getInverse()?o.getScale().range()[1]:o.getScale().range()[0])-t):t})})):e.setSimpleStyle(Object.assign(Object.assign({},e.getSimpleStyle()),{line:Object.assign(Object.assign({},this._axisStyle.line),{dx:"left"===this._orient?t:-((o.getInverse()?o.getScale().range()[0]:o.getScale().range()[1])-t)})}))}}}},this._orient=vr(e,["z"]),vi(this._orient)&&(this.layoutType="absolute"),this._dataSet=t.dataSet,this._coordinateType="cartesian"}static getSpecInfo(e){let t=e[this.specKey];if(!t)return null;let i="horizontal"===e.direction;if(!(0,ri.Z)(t)){if(!vR(t))return null;let{axisType:e,componentName:r}=vl(t,i);return t.type=e,[{spec:t,specPath:[this.specKey],specInfoPath:["component",this.specKey,0],type:r}]}let r=!0;if(t.filter(e=>"z"===e.orient)[0]){let e=t.filter(e=>"bottom"===e.orient)[0],i=t.filter(e=>vt(e.orient))[0];r=3===t.length&&e&&i}let n=t.map((e,t)=>({spec:e,index:t}));r||(n=n.filter(({spec:e})=>"z"!==e.orient));let l=[];return n.forEach(({spec:e,index:t})=>{if(!vR(e))return;let{axisType:r,componentName:n}=vl(e,i);e.type=r,l.push({spec:e,specPath:[this.specKey,t],specInfoPath:["component",this.specKey,t],type:n})}),l}static createComponent(e,t){let{spec:i}=e,r=v7(e,["spec"]),n=hp.getComponentInKey(r.type);return n?new n(i,Object.assign(Object.assign({},t),r)):(t.onError(`Component ${r.type} not found`),null)}initLayout(){super.initLayout(),this._layout.autoIndent=!1!==this._spec.autoIndent,this._layout.layoutOrient=this._orient}getNewScaleRange(){let{width:e,height:t}=this.getLayoutRect(),{left:i,right:r,top:n,bottom:l}=this._innerOffset,o=[];return ve(this.getOrient())?(0,sD.Z)(e)&&(o=this._inverse?[e-r,i]:[i,e-r]):vi(this.getOrient())?(0,sD.Z)(e)&&(o=this._inverse?[e-r,i]:[i,e-r],this._scale.range(o)):(0,sD.Z)(t)&&(o=this._inverse?[n,t-l]:[t-l,n]),o}updateScaleRange(){let e=!1,t=this.getNewScaleRange(),i=this._scale.range();return t.length===i.length&&t.every((e,t)=>e===i[t])?e=!1:(e=!0,this._scale.range(t)),e}init(e){var t;super.init(e),null==(t=this.pluginService)||t.load(v9.map(e=>new e)),this.callPlugin(e=>{this.pluginService&&e.onInit&&e.onInit(this.pluginService,this)})}setAttrFromSpec(){var e,t,i;let r;if(super.setAttrFromSpec(),this.visible){ve(this.getOrient())?(0,h6.Z)(this._spec.maxHeight)&&(this._spec.maxHeight="30%"):(0,h6.Z)(this._spec.maxWidth)&&(this._spec.maxWidth="30%");let e=this._getAxisAttributes();e.label.formatMethod=this._getLabelFormatMethod(),e.verticalFactor="top"===this.getOrient()||"right"===this.getOrient()?-1:1,this._axisStyle=e}this._tick=this._spec.tick;let n=null==(e=this._option.getChart())?void 0:e.getSpec();this._inverse=(t=this._spec,i="horizontal"===(null==n?void 0:n.direction),r=t.inverse,i&&!ve(t.orient)&&(r=!(0,oV.Z)(t.inverse)||!t.inverse),r)}onLayoutStart(e,t){if(super.onLayoutStart(e,t),!vi(this.getOrient())&&this._spec.innerOffset){let e=this._spec;vt(this.getOrient())?["top","bottom"].forEach(i=>{this._innerOffset[i]=s$(e.innerOffset[i],t.height,t)}):["left","right"].forEach(i=>{this._innerOffset[i]=s$(e.innerOffset[i],t.width,t)})}}getSeriesStatisticsField(e){let t;return t=ve(this.getOrient())?e.fieldX:vi(this.getOrient())?e.fieldZ:e.fieldY,(0,cz.z2)(this._scale.type)?t:[t[0]]}_tickTransformOption(){var e,t,i,r;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimals:null==(e=this._tick)?void 0:e.noDecimals,labelLastVisible:null==(t=this._spec.label)?void 0:t.lastVisible,labelFirstVisible:null==(i=this._spec.label)?void 0:i.firstVisible,labelFlush:null==(r=this._spec.label)?void 0:r.flush})}axisHelper(){return{isContinuous:(0,cz.z2)(this._scale.type),dataToPosition:this.dataToPosition.bind(this),getScale:(e=0)=>this._scales[e],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!0===this._inverse,getSpec:()=>this._spec}}afterCompile(){var e;(null==(e=this._axisMark)?void 0:e.getProduct())&&this.event.on(Z.AFTER_ELEMENT_ENCODE,({mark:e})=>{if(e===this._axisMark&&!1===this._isLayout&&(ve(this.getOrient())?this.callPlugin(e=>{this.pluginService&&e.onDidLayoutHorizontal&&e.onDidLayoutHorizontal(this.pluginService,this)}):this.callPlugin(e=>{this.pluginService&&e.onDidLayoutVertical&&e.onDidLayoutVertical(this.pluginService,this)}),this._unitText)){let{x:e,y:t}=this.getLayoutStartPoint(),i=ve(this._orient)?{x:(0,ag.CE)(this._scale.range())+e,y:t}:{x:e,y:(0,ag.iH)(this._scale.range())+t};this._unitText.setAttributes(i)}}),this.callPlugin(e=>{this.pluginService&&e.onDidCompile&&e.onDidCompile(this.pluginService,this)})}collectScale(){let e=[];return y8(this._regions,t=>{e.push("left"===this.getOrient()||"right"===this.getOrient()?t.scaleY:t.scaleX)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),e}collectSeriesField(e,t){var i,r;return e>0?null==(r=null==(i=t.getGroups())?void 0:i.fields)?void 0:r[e]:ve(this.getOrient())?t.getSpec().x2Field?[...t.fieldX,t.fieldX2]:t.fieldX:vi(this.getOrient())?t.fieldZ:t.getSpec().y2Field?[...t.fieldY,t.fieldY2]:t.fieldY}updateSeriesScale(){let e=this.getOrient();y8(this._regions,t=>{ve(e)?vB(t.getXAxisHelper(),this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&(t.setScaleX(this._scale),t.setXAxisHelper(this.axisHelper())):vt(e)?vB(t.getYAxisHelper(),this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&(t.setScaleY(this._scale),t.setYAxisHelper(this.axisHelper())):vi(e)&&vB(t.getZAxisHelper(),this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&(t.setScaleZ(this._scale),t.setZAxisHelper(this.axisHelper()))},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getBoundsInRect(e){var t;let i={x1:0,y1:0,x2:0,y2:0};if(!this._visible)return i;this._verticalLimitSize=ve(this.getOrient())?e.height:e.width,this.setLayoutRect(e),!this.updateScaleRange()&&(0,ri.Z)(null==(t=this.getTickData())?void 0:t.getLatestData())||this.computeData("range");let r={skipLayout:!1},n=ve(this.getOrient());this.pluginService&&(n?this.callPlugin(e=>{e.onWillLayoutHorizontal&&e.onWillLayoutHorizontal(this.pluginService,r,this)}):this.callPlugin(e=>{e.onWillLayoutVertical&&e.onWillLayoutVertical(this.pluginService,r,this)}));let l=this._axisMark.getProduct(),o=!1;if(!r.skipLayout){let e=this._getUpdateAttribute(!0),t=this._axisMark.getComponent(),r=hs(Object.assign({},this.getLayoutStartPoint()),this._axisStyle,e,{line:{visible:!1}}),l=null==t?void 0:t.getBoundsWithoutRender(r);l&&!l.empty()||(l=(new t4.YZ).set(r.x,r.y,r.x,r.y)),o=!0,this._latestBounds=l,i=this._appendAxisUnit(l,n)}return o||(this._latestBounds=l.AABBBounds),i}positionToData(e,t){let i=ve(this.getOrient());t&&(e-=i?this.getLayoutStartPoint().x:this.getLayoutStartPoint().y),this._innerOffset&&(e=i?(0,g9.Z)(e,this._innerOffset.left,this.getLayoutRect().width-this._innerOffset.right):(0,g9.Z)(e,this._innerOffset.top,this.getLayoutRect().height-this._innerOffset.bottom));let r=this._scale.range();return(e-r[0])*(e-(0,ag.Z$)(r))>0?null:this._scale.invert(e)}_getTitleLimit(e){var t,i,r,n,l;let o=this._spec.title;if(o.visible&&(0,r5.Z)(null==(t=o.style)?void 0:t.maxLineWidth)){let t=null!=(l=null!=(r=null==(i=this._axisStyle.title)?void 0:i.angle)?r:null==(n=o.style)?void 0:n.angle)?l:0;if(e){let e=this.getLayoutRect().width,i=Math.abs(Math.cos(t));return i<1e-6?1/0:e/i}let a=this.getLayoutRect().height,s=Math.abs(Math.sin(t));return s<1e-6?1/0:a/s}return null}_getUpdateAttribute(e){let t=0,i=0;if(!e){let e=v8(this.getRegions());i=e.width,t=e.height}let{width:r,height:n}=this.getLayoutRect(),l=ve(this._orient),o=vt(this._orient),a={x:0,y:0},s=t,h=r;l?a={x:r,y:0}:o&&(a={x:0,y:n},s=i,h=n);let d=this.getLabelItems(h),u={start:{x:0,y:0},end:a,title:{text:this._spec.title.text||this._dataFieldText,maxWidth:this._getTitleLimit(l)},items:d,scale:this._scale.clone(),maxWidth:this._layout.maxWidth,minWidth:this._layout.minWidth,width:this._spec.width?this.getLayoutRect().width:void 0};e||(u.grid={type:"line",start:{x:0,y:0},end:a,items:d[0],verticalFactor:this._axisStyle.verticalFactor,length:s});let c=l?this.layout.minHeight:this.layout.minWidth;return(l&&9===this._layout.layoutRectLevelMap.height||o&&9===this._layout.layoutRectLevelMap.width)&&(c=this._verticalLimitSize),u.verticalLimitSize=this._verticalLimitSize,u.verticalMinSize=c,u.label={overflowLimitLength:this._getLabelOverflowLimit(l)},this._afterUpdateAttribute?this._afterUpdateAttribute(u,e):u}getLabelItems(e){var t;let i=null==(t=this.getTickData())?void 0:t.getLatestData();return i&&i.length?[i.map(t=>{let i=this._getNormalizedValue([t.value],e);return vP(t.value,i)}).filter(e=>{let{value:t,rawValue:i}=e,r=this._scale.domain();return"log"===this.getSpec().type?t>=0&&t<=1:(0,cz.z2)(this._scale.type)?i>=r[0]&&i<=(0,ag.Z$)(r):r.includes(i)})]:[]}initEvent(){super.initEvent(),this.visible&&(this.event.on(N.layoutEnd,this._updateAxisLayout),this.event.on(N.layoutEnd,this._fixAxisOnZero),this.event.on(N.layoutRectUpdate,()=>{this._clearLayoutCache()}))}_getNormalizedValue(e,t){return 0===t?0:this.dataToPosition(e)/t}_layoutCacheProcessing(e){return["width","height"].forEach(t=>{e[t]<this._layoutCache[t]?e[t]=this._layoutCache[t]:this._layoutCache[t]=e[t]}),this._autoIndentOnce&&this._hasAutoIndent?["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]}):(this._hasAutoIndent=!0,["x1","x2","y1","y2"].forEach(e=>{this.layout.getLastComputeOutBounds()[e]<this._layoutCache._lastComputeOutBounds[e]?this.layout.getLastComputeOutBounds()[e]=this._layoutCache._lastComputeOutBounds[e]:this._layoutCache._lastComputeOutBounds[e]=this.layout.getLastComputeOutBounds()[e]})),e}reInit(e){super.reInit(e),this._clearLayoutCache()}_clearLayoutCache(){this._hasAutoIndent=!1,this._layoutCache.width=0,this._layoutCache.height=0,this._layoutCache._lastComputeOutBounds={x1:0,x2:0,y1:0,y2:0}}onDataUpdate(){this._clearLayoutCache()}_appendAxisUnit(e,t){var i;if(this._spec.unit&&this._spec.unit.visible){let r,n,{text:l,style:o}=this._spec.unit,{x:a,y:s}=this.getLayoutStartPoint();t?(r={x:(0,ag.CE)(this._scale.range())+a,y:s},n={textAlign:"left",textBaseline:"middle"}):(r={x:a,y:(0,ag.iH)(this._scale.range())+s},n={textAlign:"left"===this._orient?"left":"right",textBaseline:"bottom"}),n=Object.assign(Object.assign(Object.assign({},n),o),{x:r.x,y:r.y,text:l}),this._unitText?this._unitText.setAttributes(n):(this._unitText=dq(n),this._unitText.name="axis-unit",null==(i=this.getContainer())||i.add(this._unitText));let h=this._unitText.AABBBounds;t?(e.x2+=h.x2>e.x2?h.x2-e.x2:0,e.y2+=h.y2>e.y2?h.y2-e.y2:0):(e.x1+=h.x1<e.x1?h.x1-e.x1:0,e.y1+=h.y1<e.y1?h.y1-e.y1:0)}return e}_getNeedClearVRenderComponents(){return this._unitText?[this._unitText]:[]}_getLabelOverflowLimit(e){var t,i;if(e&&!1!==(null==(t=this._spec.label)?void 0:t.visible)&&!0===(null==(i=this._spec.label)?void 0:i.autoLimit)){let e=this._option.getComponentsByKey("axes"),t=this.getRegions(),i=e.filter(e=>{let i=e.getOrient();return("left"===i||"right"===i)&&e.getRegions().some(e=>t.includes(e))}),r=0,n=0,l=this.getLayoutStartPoint().x,o=l+this.getLayoutRect().width;return i.forEach(e=>{let t=e.getLayoutStartPoint().x;if("left"===e.getOrient()&&t===l){let t=e.getLayoutRect().width;r=Math.max(r,t)}else if(t===o){let t=e.getLayoutRect().width;n=Math.max(n,t)}}),{left:r,right:n}}}}_e.type=sc.cartesianAxis,_e.specKey="axes";class _t{constructor(){this._rawDomainIndex=[],this._rawDomain=[]}_initData(){var e;if(this._spec.showAllGroupLayers&&this._scales.length>1)for(let t=0;t<this._scales.length;t++){let i=(null!=(e=this._spec.layers)?e:[])[this._scales.length-1-t]||{};if(!1!==i.visible&&0!==i.tickCount&&0!==i.forceTickCount){let e=this._initTickDataSet(Object.assign(Object.assign({},this._tickTransformOption()),i),t),r=new cj(this._option,e);this._tickData.push(r),e.target.addListener("change",()=>{this._onTickDataChange(r)}),this._tickDataMap||(this._tickDataMap={}),this._tickDataMap[t]=r}}else{let e=this._initTickDataSet(this._tickTransformOption()),t=new cj(this._option,e);e.target.addListener("change",()=>{this._onTickDataChange(t)}),this._tickData=[t],this._tickDataMap={0:t}}}_updateData(){var e,t,i;let r=this.registerTicksTransform();if(this._spec.showAllGroupLayers&&this._scales.length>1){let t=null!=(e=this._spec.layers)?e:[];Object.keys(this._tickDataMap).forEach(e=>{let i=t[this._scales.length-1-e]||{},n=this._tickDataMap[e],l=null==n?void 0:n.getDataView().transformsArr.find(e=>e.type===r);l&&(l.options=Object.assign(Object.assign({},this._tickTransformOption()),i))})}else{let e=null==(i=null==(t=this._tickData)?void 0:t[0])?void 0:i.getDataView().transformsArr.find(e=>e.type===r);e&&(e.options=this._tickTransformOption())}}getRawDomain(){return this._rawDomain}dataToPosition(e,t={}){var i,r;if(0===e.length||0===this._scales.length)return 0;let{position:n,bandScale:l}=this.getPosition(e);return n+l.bandwidth()*(null!=(r=null!=(i=t.bandPosition)?i:this._spec.bandPosition)?r:this._defaultBandPosition)}valueToPosition(e){return this._scale.scale(e)}updateGroupScaleRange(){let e=this._scale;this._scales.forEach((t,i)=>{i>0&&(t.range([0,e.bandwidth()]),e=t)})}getPosition(e){let t=0,i=this._scale;if(1===this._scales.length||1===e.length)t=this.valueToPosition(e[0]);else{let r=Math.min(e.length,this._scales.length);for(let i=0;i<r;i++)t+=this._scales[i].scale(e[i]);i=this._scales[r-1]}return{position:t,bandScale:i}}calcScales(e,t){var i,r;let{bandPadding:n,paddingInner:l,paddingOuter:o}=this._spec,a=(0,ri.Z)(n),s=(0,ri.Z)(l),h=(0,ri.Z)(o);for(let d=0;d<this._scales.length;d++){let u=a?n[d]:n,c=s?l[d]:l,p=h?o[d]:o;this._scales[d].paddingInner(null!=(i=null!=c?c:u)?i:e,!0).paddingOuter(null!=(r=null!=p?p:u)?r:t,!0)}}computeBandDomain(e){if(!e.length)return[];if(1===e.length)return e[0].values;let t=new Set;for(let i=0;i<e.length;i++)for(let r=0;r<e[i].values.length;r++)t.add(e[i].values[r]);return Array.from(t)}updateScaleDomain(){var e;if(!this.isSeriesDataEnable())return;(null==(e=this._rawDomainIndex)?void 0:e.length)||!this._scales.length||this._updateRawDomain();let t=this._spec.domain;for(let e=0;e<this._scales.length;e++)if(t&&t.length&&0===e)this._scales[e].domain(t);else{let t=this.collectData(e),i=this.computeBandDomain(t);this._scales[e].domain(i.sort((t,i)=>this._rawDomainIndex[e][t]-this._rawDomainIndex[e][i]))}this.transformScaleDomain(),this.event.emit(N.scaleDomainUpdate,{model:this}),this.event.emit(N.scaleUpdate,{model:this,value:"domain"})}getLabelItems(e){let t=[],i=[];return(this._spec.showAllGroupLayers?this._scales:[this._scales[0]]).forEach((r,n)=>{var l;let o=this._tickDataMap[n],a=null==(l=null==o?void 0:o.getLatestData())?void 0:l.length,s=a?o.getLatestData().map(e=>e.value):r.domain();if(s&&s.length)if(i&&i.length){let r=[],n=[];i.forEach(t=>{s.forEach(i=>{let l=(0,ag.IX)(t).concat(i);if(n.push(l),a){let t=vP(i,this._getNormalizedValue(l,e));r.push(t)}})}),a&&t.push(r.filter(e=>e.value>=0&&e.value<=1)),i=n}else s.forEach(e=>{i.push(e)}),a&&t.push(o.getLatestData().map(t=>vP(t.value,this._getNormalizedValue([t.value],e))).filter(e=>e.value>=0&&e.value<=1))}),t.reverse()}_updateRawDomain(){this._rawDomainIndex=[],this._rawDomain=[];let e=this._spec.domain;for(let t=0;t<this._scales.length;t++)if(e&&e.length&&0===t)this._scales[t].domain(e);else{let e=this.collectData(t,!0),i=this.computeBandDomain(e);this._rawDomainIndex[t]={},this._rawDomain[t]=i,i.forEach((e,i)=>this._rawDomainIndex[t][e]=i)}this.event.emit(N.scaleRawDomainUpdate,{model:this})}_clearRawDomain(){this._rawDomainIndex=[],this._rawDomain=[]}}var _i=i(51400);let _r=(e,t,i,r)=>{let n=vb(e,t,i);return n&&n.map(e=>r?[e.x1,e.x2,e.width()]:[e.y1,e.y2,e.height()])},_n=(e,t,i=0)=>Math.max(e[0],t[0])-i/2<=Math.min(e[1],t[1])+i/2,_l=(e,t)=>e[1]<t[0]?t[0]-e[1]:t[1]<e[0]?e[0]-t[1]:0,_o=(e,t)=>{var i;let r,n=e.domain();if(!n.length)return[];let{tickCount:l,forceTickCount:o,tickStep:a,labelGap:s=4,axisOrientType:h,labelStyle:d}=t,u=vy(h),c=e.range(),p=e.calculateWholeRangeSize();if(p<2)return t.labelLastVisible?vg([n[n.length-1]]):vg([n[0]]);if((0,oV.Z)(a))r=e.stepTicks(a);else if((0,oV.Z)(o))r=e.forceTicks(o);else if((0,oV.Z)(l)){let t=(0,nr.Z)(l)?l({axisLength:p,labelStyle:d}):l;r=e.ticks(t)}else if(t.sampling){let l=(null!=(i=t.labelStyle.fontSize)?i:12)+2,o=(0,ag.iH)(c),a=(0,ag.CE)(c);if(n.length<=p/l){let i=_r(e,n,t,u);if(i){let l=Math.min(...i.map(e=>e[2])),h=(a-o)/n.length,d=_a(n,i,s,t.labelLastVisible,Math.floor(l/h),!1);r=e.stepTicks(d.step),t.labelLastVisible&&(d.delCount&&(r=r.slice(0,r.length-d.delCount)),r.push(n[n.length-1]))}}else{let i=_r(e,[n[0],n[Math.floor(n.length/2)],n[n.length-1]],t,u);if(i){let l=null;i.forEach(e=>{l?l[2]<e[2]&&(l=e):l=e});let h=a-o-s>0?Math.ceil(n.length*(s+l[2])/(a-o-s)):n.length-1;r=e.stepTicks(h),!t.labelLastVisible||r.length&&r[r.length-1]===n[n.length-1]||(r.length&&Math.abs(e.scale(r[r.length-1])-e.scale(n[n.length-1]))<l[2]&&(r=r.slice(0,-1)),r.push(n[n.length-1]))}}}return(0,r5.Z)(r)&&(r=e.domain()),vg(r)},_a=(e,t,i,r,n,l)=>{let o=0,a=0,s=-1,h=Number.MAX_VALUE,d=r=>{let n=!0,l=0;do l+r<e.length&&_n(t[l],t[l+r],i)&&(n=!1),l+=r;while(n&&l<e.length);return n},u=(0,_i.o0)(n,e.length,e=>d(e)?1:-1),c=u;do if(!(c>u)||l||d(c)){if(!r){a=c;break}{let r=e.length-1,n,l=0;n=e.length%c>0?e.length-e.length%c+c:e.length;do{if((n-=c)!==r&&!_n(t[n],t[r],i))break;l++}while(n>0);if(n===r){a=c,o=l;break}{let i=Math.floor(e.length/c)-l+1;if(i<s)break;{s=i;let e=_l(t[n],t[r]),d=n-c>=0?_l(t[n-c],t[n]):e,u=Math.abs(e-d);if(u<h&&(h=u,a=c,o=l),e<=d)break}}}c++}else c++;while(c<=e.length);return{step:a,delCount:o}};var _s=i(48393);function _h(e,t){return[e[0]*t,e[1]*t]}function _d(e){let[t,i]=e;return Math.sqrt(t*t+i*i)}function _u(e,t,i){let r=function(e,t){let[i,r]=e,[n,l]=t,o=Math.sqrt((i*i+r*r)*(n*n+l*l));return Math.acos(Math.min(Math.max(o&&(i*n+r*l)/o,-1),1))}(e,t),n=(0,t0.ir)(e,t)>=0;return i?n?2*Math.PI-r:r:n?r:2*Math.PI-r}let _c={title:{space:4,padding:0,textStyle:{fontSize:12,fill:"#333333",fontWeight:"normal",fillOpacity:1}},label:{visible:!0,inside:!1,space:4,padding:0,style:{fontSize:12,fill:"#333",fontWeight:"normal",fillOpacity:1}},labelHoverOnAxis:{visible:!1,space:7,padding:2,position:0,autoRotate:!1,textStyle:{fontSize:12,fill:"red",fontWeight:"normal",fillOpacity:1},background:{visible:!0,style:{cornerRadius:2,fill:"black"}}},tick:{visible:!0,inside:!1,alignWithLabel:!0,length:4,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}},subTick:{visible:!1,inside:!1,count:4,length:2,style:{lineWidth:1,stroke:"#999",strokeOpacity:1}},line:{visible:!0,style:{lineWidth:1,stroke:"#000",strokeOpacity:1}}},_p={size:8,stroke:"#000",lineWidth:1,zIndex:1},_g=Math.sin(Math.PI/10);function _f(e,t=_g){let i=!(0,r5.Z)(e)&&0!==e,r=i?Math.cos(e):1;return i&&Math.abs(r)<=t}function _m(e,t=_g){let i=!(0,r5.Z)(e)&&0!==e,r=i?Math.sin(e):0;return!i||Math.abs(r)<=t}function _b(e){let t={};return b3(e,e=>{"group"!==e.type&&e.id&&(t[e.id]=e)}),t}function _y(e,t){return{x:e.x+t[0],y:e.y+t[1]}}function _v(e,t,i,r=!1,n=!1){let l=[t.x-i.x,t.y-i.y];return _h(l,(r?-1:1)*(n?-1:1)*e/_d(l))}function __(e,t,i,r,n){let l=[],o=n-r;for(let n=0;n<t;n++){let a=r+n*o/t;l.push((0,t9.op)(e,i,a))}return l}function _C(e,t){let i="";return 0===e.length||(e.forEach((e,t)=>{0===t?i=`M${e.x},${e.y}`:i+=`L${e.x},${e.y}`}),t&&(i+="Z")),i}function _x(e,t,i){var r;if(_m(null==(r=e.attribute)?void 0:r.angle,Number.EPSILON))return i>(0,_s.YB)(e.AABBBounds,t.AABBBounds);let n=e.OBBBounds,l=t.OBBBounds;return!n||!l||n.empty()||l.empty()?i>(0,_s.YB)(e.AABBBounds,t.AABBBounds):n.intersects(l)||i>(0,_s.up)(n,l)}function _w(e,t){for(let i,r=1,n=e.length,l=e[0];r<n;l=i,++r)if(_x(l,i=e[r],t))return!0;return!1}function _S(e,t,i,r){let n="";if(!e||0===t.length)return n;let l=t[0],o=il.HL.distancePP(e,l),a=+!i;return r?n+=`M${e.x},${e.y-o}A${o},${o},0,0,${a},${e.x},${e.y+o}A${o},${o},0,0,${a},${e.x},${e.y-o}Z`:t.forEach((e,t)=>{0===t?n=`M${e.x},${e.y}`:n+=`A${o},${o},0,0,${a},${e.x},${e.y}`}),n}class _A extends yN{constructor(){super(...arguments),this.name="axis-grid",this.data=[]}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}render(){this._prevInnerView=this._innerView&&_b(this._innerView),this.removeAllChild(!0),this._innerView=oq.group({x:0,y:0,pickable:!1}),this.add(this._innerView);let{items:e,visible:t}=this.attribute;e&&e.length&&!1!==t&&(this.data=this._transformItems(e),this._renderGrid(this._innerView))}getVerticalCoord(e,t,i){return _y(e,this.getVerticalVector(t,i,e))}_transformItems(e){let t=[];return e.forEach(e=>{var i;t.push(Object.assign(Object.assign({},e),{point:this.getTickCoord(e.value),id:null!=(i=e.id)?i:e.label}))}),t}_renderGrid(e){let{visible:t}=this.attribute.subGrid||{};t&&this._renderGridByType(!0,e),this._renderGridByType(!1,e)}_renderGridByType(e,t){let i=(0,ha.Z)({},this.attribute,this.getGridAttribute(e)),{type:r,items:n,style:l,closed:o,alternateColor:a,depth:s=0}=i,h=e?`${eF.grid}-sub`:`${eF.grid}`;if(n.forEach((e,i)=>{let{id:n,points:a}=e,d="";if("line"===r||"polygon"===r)d=_C(a,!!o);else if("circle"===r){let{center:e}=this.attribute;d=_S(e,a,!1,!!o)}let u=oq.path(Object.assign({path:d,z:s},(0,nr.Z)(l)?(0,ha.Z)({},this.skipDefault?null:_A.defaultAttributes.style,l(e,i)):l));u.name=`${h}-line`,u.id=this._getNodeId(`${h}-path-${n}`),t.add(u)}),s&&"line"===r&&n.forEach((e,i)=>{let{id:r,points:n}=e,a=[];a.push(n[0]);let d=n[1].x-n[0].x,u=n[1].y-n[0].y,c=s/Math.sqrt(d*d+u*u);a.push({x:n[0].x+d*c,y:n[0].y+u*c});let p=_C(a,!!o),g=(0,t0.Wn)(a[0].x-a[1].x),f=(0,t0.Wn)(a[0].y-a[1].y),m=oq.path(Object.assign({path:p,z:0,alpha:g>f?(n[1].x-n[0].x>0?-1:1)*t0.pi/2:0,beta:g<f?-t0.pi/2:0,anchor3d:g>f?[a[0].x,0]:[0,a[0].y]},(0,nr.Z)(l)?(0,ha.Z)({},this.skipDefault?null:_A.defaultAttributes.style,l(e,i)):l));m.name=`${h}-line`,m.id=this._getNodeId(`${h}-path-${r}`),t.add(m)}),n.length>1&&a){let e=(0,ri.Z)(a)?a:[a,"transparent"],r=t=>e[t%e.length],l=this.attribute.items,o=l[0],s=l[l.length-1],d=!(0,rN.Yt)(o.value,0)&&!(0,rN.Yt)(s.value,0),u=!(0,rN.Yt)(o.value,1)&&!(0,rN.Yt)(s.value,1),c=[],p=o.value>s.value;(p&&u||!p&&d)&&c.push(this.getGridPointsByValue(+!!p)),n.forEach(e=>{c.push(e.points)}),(p&&d||!p&&u)&&c.push(this.getGridPointsByValue(+!p));for(let e=0;e<c.length-1;e++){let n=function(e,t,i){let{type:r,closed:n}=i,l=t.slice(0).reverse(),o="",a="";if("line"===r&&i.smoothLink&&i.center){let t=e[0],r=l[0],s=i.center;o=_C(e,!!n),a=_C(l,!!n);let h=il.HL.distancePP(r,s),d=il.HL.distancePP(t,s);o+=`A${h},${h},0,0,1,${r.x},${r.y}L${r.x},${r.y}`,a+=`A${d},${d},0,0,0,${t.x},${t.y}`}else if("circle"===r){let{center:t}=i;o=_S(t,e,!1,!!n),a=_S(t,l,!0,!!n)}else"line"!==r&&"polygon"!==r||(o=_C(e,!!n),a=_C(l,!!n));return n?o+=a:(o+=a="L"+a.substring(1),o+="Z"),o}(c[e],c[e+1],i),l=oq.path({path:n,fill:r(e)});l.name=`${h}-region`,l.id=this._getNodeId(`${h}-region-${e}`),t.add(l)}}}_getNodeId(e){return`${this.id}-${e}`}_parseTickSegment(){let e=1;return this.data.length>=2&&(e=this.data[1].value-this.data[0].value),e}_getPointsOfSubGrid(e,t){let i=this.data.length,r=[];return i>=2&&this.data.forEach(i=>{let n=i.value;if(!t){let t=i.value-e/2;if(this.isInValidValue(t))return;n=t}r.push({value:n})}),r}release(){super.release(),this._prevInnerView=null,this._innerView=null}}_A.defaultAttributes={style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#999",strokeOpacity:1,lineDash:[4,4]}}};class _k{isInValidValue(e){return e<0||e>1}getTickCoord(e){let{start:t}=this.attribute,i=this.getRelativeVector();return{x:t.x+i[0]*e,y:t.y+i[1]*e}}getRelativeVector(e){let{start:t,end:i}=this.attribute;return[i.x-t.x,i.y-t.y]}getVerticalVector(e,t=!1,i){var r;let n,{verticalFactor:l=1}=this.attribute,o=((n=_d(r=this.getRelativeVector()))>0&&(n=1/n),[r[0]*n,r[1]*n]);return _h([o[1],-1*o[0]],e*(t?1:-1)*l)}}let _M=["radius","startAngle","endAngle",...l7];class _T extends on{constructor(e={radius:1}){super(e),this.type="circle",this.numberType=lB}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{startAngle:e,endAngle:t,radius:i}=this.attribute;return this._validNumber(e)&&this._validNumber(t)&&this._validNumber(i)}getGraphicTheme(){return r4(this).circle}updateAABBBounds(e,t,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateCircleAABBBoundsImprecise(e,t,i):this.updateCircleAABBBoundsAccurate(e,t,i));let{tb1:n,tb2:l}=tU.graphicService.updateTempAABBBounds(i);return uj(e,t,n),i.union(n),n.setValue(l.x1,l.y1,l.x2,l.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1,tU.graphicService.transformAABBBounds(e,i,t,!1,this),i}updateCircleAABBBoundsImprecise(e,t,i){let{radius:r=t.radius}=e;return i.set(-r,-r,r,r),i}updateCircleAABBBoundsAccurate(e,t,i){let{startAngle:r=t.startAngle,endAngle:n=t.endAngle,radius:l=t.radius}=e;return n-r>t0.f7-t0.Ho?i.set(-l,-l,l,l):nf(r,n,l,i),i}needUpdateTags(e){return super.needUpdateTags(e,_M)}needUpdateTag(e){return super.needUpdateTag(e,_M)}toCustomPath(){var e,t,i;let r=super.toCustomPath();if(r)return r;let n=this.attribute,l=null!=(e=n.radius)?e:this.getDefaultAttribute("radius"),o=null!=(t=n.startAngle)?t:this.getDefaultAttribute("startAngle"),a=null!=(i=n.endAngle)?i:this.getDefaultAttribute("endAngle");return(r=new iZ).arc(0,0,l,o,a),r}clone(){return new _T(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return _T.NOWORK_ANIMATE_ATTR}}function _R(e){return new _T(e)}_T.NOWORK_ANIMATE_ATTR=or;let _E=new class{constructor(){this.time=sv.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){let{outerBorder:c,innerBorder:p}=e.attribute,g=c&&!1!==c.visible,f=p&&!1!==p.visible;if(!g&&!f)return;let{radius:m=s.radius,startAngle:b=s.startAngle,endAngle:y=s.endAngle,opacity:v=s.opacity,x:_=s.x,y:C=s.y,scaleX:x=s.scaleX,scaleY:w=s.scaleY,keepStrokeScale:S=s.keepStrokeScale}=e.attribute,A=(n,l)=>{let o=!(!n||!n.stroke),{distance:a=s[l].distance}=n,h=S?a:rl(t,a,t.dpr);if(t.beginPath(),t.arc(i,r,m+("outerBorder"===l?1:-1)*h,b,y),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u)u(t,n,s[l]);else if(o){let o=s[l].opacity;s[l].opacity=v,t.setStrokeStyle(e,n,(_-i)/x,(C-r)/w,s[l]),s[l].opacity=o,t.stroke()}};g&&A(c,"outerBorder"),f&&A(p,"innerBorder")}};var _P=function(e,t){return function(i,r){t(i,r,e)}};let _B=class extends aG{constructor(e){super(),this.graphicRenderContributions=e,this.numberType=lB,this.builtinContributions=[_E,aO,a3],this.init(e)}drawShape(e,t,i,r,n,l,o,a){let s=r4(e,null==l?void 0:l.theme).circle,{radius:h=s.radius,startAngle:d=s.startAngle,endAngle:u=s.endAngle,x:c=s.x,y:p=s.y,fillStrokeOrder:g=s.fillStrokeOrder}=e.attribute,f=this.valid(e,s,o,a);if(!f)return;let{fVisible:m,sVisible:b,doFill:y,doStroke:v}=f;t.beginPath(),t.arc(i,r,h,d,u),t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),this.beforeRenderStep(e,t,i,r,y,v,m,b,s,n,o,a);let _=()=>{y&&(o?o(t,e.attribute,s):m&&(t.setCommonStyle(e,e.attribute,c-i,p-r,s),t.fill()))},C=()=>{v&&(a?a(t,e.attribute,s):b&&(t.setStrokeStyle(e,e.attribute,c-i,p-r,s),t.stroke()))};g?(C(),_()):(_(),C()),this.afterRenderStep(e,t,i,r,y,v,m,b,s,n,o,a)}draw(e,t,i,r){let n=r4(e,null==r?void 0:r.theme).circle;this._draw(e,n,!1,i,r)}};_B=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),_P(0,tT(tE)),_P(0,tR(ak)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],_B);let _I=!1,_L=new tb(e=>{_I||(_I=!0,e(_B).toSelf().inSingletonScope(),e(ov).to(_B).inSingletonScope(),e(o_).toService(ov),e(ak).toService(aD),tB(e,ak))}),_F=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="circle",this.numberType=lB}};_F=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(em=tT(ov),function(e,t){em(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],_F);let _H=!1,_O=new tb((e,t,i,r)=>{_H||(_H=!0,e(uh).to(_F).inSingletonScope(),e(u_).toService(uh))}),_D=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="circle",this.numberType=lB}};_D=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(eb=tT(ov),function(e,t){eb(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],_D);let _z=!1,_W=new tb((e,t,i,r)=>{_z||(_z=!0,e(d7).to(_D).inSingletonScope(),e(d5).toService(d7))});function _Z(){_Z.__loaded||(_Z.__loaded=!0,oq.RegisterGraphicCreator("circle",_R),tG.load(_L),tG.load(d4?_O:_W))}_Z.__loaded=!1;let _N=["path","customPath",...l7];class _$ extends on{constructor(e){super(e),this.type="path",this.numberType=lO}get pathShape(){return this.tryUpdateAABBBounds(),this.getParsedPathShape()}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{path:e}=this.attribute;return null!=e&&""!==e}getParsedPathShape(){let e=this.getGraphicTheme();if(!this.valid)return e.path;let t=this.attribute;return t.path instanceof iZ?t.path:((0,r5.Z)(this.cache)&&this.doUpdatePathShape(),this.cache instanceof iZ?this.cache:e.path)}getGraphicTheme(){return r4(this).path}updateAABBBounds(e,t,i){if(!this.updatePathProxyAABBBounds(i)){let e=this.getParsedPathShape();i.union(e.getBounds())}let{tb1:r,tb2:n}=tU.graphicService.updateTempAABBBounds(i);uj(e,t,r),i.union(r),r.setValue(n.x1,n.y1,n.x2,n.y2),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;let{lineJoin:l=t.lineJoin}=e;return tU.graphicService.transformAABBBounds(e,i,t,"miter"===l,this),i}doUpdateAABBBounds(e){return this.doUpdatePathShape(),super.doUpdateAABBBounds(e)}doUpdatePathShape(){let e=this.attribute;(0,r6.Z)(e.path,!0)?this.cache=(new iZ).fromString(e.path):e.customPath&&(this.cache=new iZ,e.customPath(this.cache,this))}needUpdateTags(e){return super.needUpdateTags(e,_N)}needUpdateTag(e){return super.needUpdateTag(e,_N)}toCustomPath(){return(new iZ).fromCustomPath2D(this.getParsedPathShape(),0,0)}clone(){return new _$(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return _$.NOWORK_ANIMATE_ATTR}}function _j(e){return new _$(e)}_$.NOWORK_ANIMATE_ATTR=Object.assign({path:1,customPath:1},or);var _G=function(e,t){return function(i,r){t(i,r,e)}};let _V=class extends aG{constructor(e){super(),this.graphicRenderContributions=e,this.numberType=lO,this.builtinContributions=[aO,a3],this.init(e)}drawShape(e,t,i,r,n,l,o,a){var s,h,d;let u=null!=(s=this.tempTheme)?s:r4(e,null==l?void 0:l.theme).path,{x:c=u.x,y:p=u.y,fillStrokeOrder:g=u.fillStrokeOrder}=e.attribute,f=null!=(h=this.z)?h:0,m=this.valid(e,u,o,a);if(!m)return;let{fVisible:b,sVisible:y,doFill:v,doStroke:_}=m;(t.beginPath(),e.pathShape)?ir(e.pathShape.commandList,t,i,r,1,1,f):ir((null!=(d=e.attribute.path)?d:u.path).commandList,t,i,r,1,1,f),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,u),this.beforeRenderStep(e,t,i,r,v,_,b,y,u,n,o,a);let C=()=>{_&&(a?a(t,e.attribute,u):y&&(t.setStrokeStyle(e,e.attribute,c-i,p-r,u),t.stroke()))},x=()=>{v&&(o?o(t,e.attribute,u):b&&(t.setCommonStyle(e,e.attribute,c-i,p-r,u),t.fill()))};g?(C(),x()):(x(),C()),this.afterRenderStep(e,t,i,r,v,_,b,y,u,n,o,a)}draw(e,t,i,r){let n=r4(e,null==r?void 0:r.theme).path;this.tempTheme=n,this._draw(e,n,!1,i,r),this.tempTheme=null}};_V=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),_G(0,tT(tE)),_G(0,tR(aR)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],_V);let _U=!1,_K=new tb(e=>{_U||(_U=!0,e(_V).toSelf().inSingletonScope(),e(ow).to(_V).inSingletonScope(),e(o_).toService(ow),e(aR).toService(aD),tB(e,aR))}),_X=class extends bN{constructor(e){super(),this.canvasRenderer=e,this.type="path",this.numberType=lO}};_X=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(ey=tT(ow),function(e,t){ey(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],_X);let _Y=!1,_q=new tb((e,t,i,r)=>{_Y||(_Y=!0,e(uc).to(_X).inSingletonScope(),e(u_).toService(uc))}),_J=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="path",this.numberType=lO}};_J=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(ev=tT(ow),function(e,t){ev(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],_J);let _Q=!1,_0=new tb((e,t,i,r)=>{_Q||(_Q=!0,e(ut).to(_J).inSingletonScope(),e(d5).toService(ut))});function _1(){_1.__loaded||(_1.__loaded=!0,oq.RegisterGraphicCreator("path",_j),tG.load(_K),tG.load(d4?_q:_0))}_1.__loaded=!1;class _2 extends pg{onBind(){var e;let t=yO(this.target);this._animator=t;let i=this.duration,r=this.easing,{config:n,lastScale:l,getTickCoord:o}=this.params,a=1,s=this.target.data;if(l&&o&&s){a=.7;let e=o(l.scale(s.rawValue)),n=this.target.attribute.x,h=this.target.attribute.y;this.target.setAttributes({x:e.x,y:e.y}),t.animate(this.target,{type:"to",to:{x:n,y:h},duration:i,easing:r})}t.animate(this.target,{type:null!=(e=n.type)?e:"fadeIn",to:n.to,duration:i*a,easing:r}),this.completeBind(t)}}class _3 extends pg{onBind(){let e=yO(this.target);this._animator=e;let t=this.duration,i=this.easing,{config:r,diffAttrs:n}=this.params;e.animate(this.target,{type:"to",to:Object.assign({},n),duration:t,easing:i,customParameters:{diffAttrs:Object.assign({},n)}}),this.completeBind(e)}deleteSelfAttr(e){super.deleteSelfAttr(e),this._animator.deleteSelfAttr(e)}tryPreventConflict(){}}function _4(){dV(),bX(),yF(),uT(),gz.registerBuiltInAnimate("axisEnter",_2),gz.registerBuiltInAnimate("axisUpdate",_3)}dV(),_1();class _5 extends _A{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},_A.defaultAttributes,e),t)}_getGridPoint(e,t){let i;if("line"===e){let{length:e}=this.attribute;i=[t,this.getVerticalCoord(t,e,!0)]}else if("circle"===e||"polygon"===e){let{center:e,sides:r=6,startAngle:n=pG,endAngle:l=pV}=this.attribute,o=il.HL.distancePP(e,t);i=__(e,r,o,n,l)}return i}getGridPointsByValue(e){let t=this.getTickCoord(e);return this._getGridPoint(this.attribute.type,t)}getGridAttribute(e){let{type:t,alignWithLabel:i=!0}=this.attribute,r=this._parseTickSegment(),n,l=[];if(e){n=(0,ha.Z)({},this.attribute,this.attribute.subGrid);let e=[],{count:t=4}=n;if(this.data.length>=2){let n=this._getPointsOfSubGrid(r,i);for(let i=0;i<n.length-1;i++){let r=n[i],l=n[i+1];e.push({id:`sub-${i}-0`,points:this.getGridPointsByValue(r.value),datum:{}});for(let n=0;n<t;n++){let o=(n+1)/(t+1),a=(1-o)*r.value+o*l.value;e.push({id:`sub-${i}-${n+1}`,points:this.getGridPointsByValue(a),datum:{}})}i===n.length-2&&e.push({id:`sub-${i}-${t+1}`,points:this.getGridPointsByValue(l.value),datum:{}})}l=e}}else{n=this.attribute;let e=[];this.data.forEach(n=>{let{point:l}=n;if(!i){let e=n.value-r/2;if(this.isInValidValue(e))return;l=this.getTickCoord(e)}e.push({id:n.label,datum:n,points:this._getGridPoint(t,l)})}),l=e}return Object.assign(Object.assign({},n),{items:l})}}(0,gH.jB)(_5,_k);var _6=i(64639);let _8=["points","cornerRadius",...l7];class _7 extends on{constructor(e){super(e),this.type="polygon",this.numberType=lD}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{points:e}=this.attribute;return e&&e.length>=2}getGraphicTheme(){return r4(this).polygon}updateAABBBounds(e,t,i){this.updatePathProxyAABBBounds(i)||this.updatePolygonAABBBoundsImprecise(e,t,i),tU.graphicService.updateTempAABBBounds(i),this.widthWithoutTransform=i.x2-i.x1,this.heightWithoutTransform=i.y2-i.y1;let{lineJoin:r=t.lineJoin}=e;return tU.graphicService.transformAABBBounds(e,i,t,"miter"===r,this),i}updatePolygonAABBBoundsImprecise(e,t,i){let{points:r=t.points}=e;return r.forEach(e=>{i.add(e.x,e.y)}),i}_interpolate(e,t,i,r,n){"points"===e&&(n.points=nb(i,r,t))}needUpdateTags(e){return super.needUpdateTags(e,_8)}needUpdateTag(e){return super.needUpdateTag(e,_8)}toCustomPath(){let e=super.toCustomPath();if(e)return e;let t=this.attribute.points;return e=new iZ,t.forEach((t,i)=>{0===i?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y)}),e.closePath(),e}clone(){return new _7(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return _7.NOWORK_ANIMATE_ATTR}}function _9(e){return new _7(e)}function Ce(e,t,i,r){if(t&&t.length){e.moveTo(t[0].x+i,t[0].y+r);for(let n=1;n<t.length;n++)e.lineTo(t[n].x+i,t[n].y+r)}}function Ct(e,t){return Math.sqrt(e*e+t*t)}function Ci(e,t,i,r,n){let l=t/i;return{x:e.x-r*l,y:e.y-n*l}}_7.NOWORK_ANIMATE_ATTR=or;var Cr=function(e,t){return function(i,r){t(i,r,e)}};let Cn=class extends aG{constructor(e){super(),this.graphicRenderContributions=e,this.numberType=lD,this.builtinContributions=[aO,a3],this.init(e)}drawShape(e,t,i,r,n,l,o,a){let s=r4(e,null==l?void 0:l.theme).polygon,{points:h=s.points,cornerRadius:d=s.cornerRadius,x:u=s.x,y:c=s.y,closePath:p=s.closePath,fillStrokeOrder:g=s.fillStrokeOrder}=e.attribute,f=this.valid(e,s,o,a);if(!f)return;let{fVisible:m,sVisible:b,doFill:y,doStroke:v}=f;t.beginPath(),d<=0||(0,ri.Z)(d)&&d.every(e=>0===e)?Ce(t.camera?t:t.nativeContext,h,i,r):function(e,t,i,r,n,l=!0){var o;if(t.length<3)return Ce(e,t,i,r);let a=0,s=t.length-1;l||(a+=1,s-=1,e.moveTo(t[0].x+i,t[0].y+r));for(let l=a;l<=s;l++){let a=t[0===l?s:(l-1)%t.length],h=t[l%t.length],d=t[(l+1)%t.length],u=h.x-a.x,c=h.y-a.y,p=h.x-d.x,g=h.y-d.y,f=Math.abs(Math.tan((Math.atan2(c,u)-Math.atan2(g,p))/2)),m=Array.isArray(n)?null!=(o=n[l%t.length])?o:0:n,b=m/f,y=Ct(u,c),v=Ct(p,g),_=Math.min(y,v);b>_&&(b=_,m=_*f);let C=Ci(h,b,y,u,c),x=Ci(h,b,v,p,g),w=2*h.x-C.x-x.x,S=2*h.y-C.y-x.y,A=Ct(w,S),k=Ci(h,Ct(b,m),A,w,S),M=Math.atan2(C.y-k.y,C.x-k.x),T=Math.atan2(x.y-k.y,x.x-k.x),R=T-M;R<0&&(M=T,R=-R),R>Math.PI&&(R-=Math.PI),0===l?e.moveTo(C.x+i,C.y+r):e.lineTo(C.x+i,C.y+r),R&&e.arcTo(h.x+i,h.y+r,x.x+i,x.y+r,m),e.lineTo(x.x+i,x.y+r)}l||e.lineTo(t[s+1].x+i,t[s+1].y+r)}(t.camera?t:t.nativeContext,h,i,r,d,p),p&&t.closePath(),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),this.beforeRenderStep(e,t,i,r,y,v,m,b,s,n,o,a);let _=()=>{y&&(o?o(t,e.attribute,s):m&&(t.setCommonStyle(e,e.attribute,u-i,c-r,s),t.fill()))},C=()=>{v&&(a?a(t,e.attribute,s):b&&(t.setStrokeStyle(e,e.attribute,u-i,c-r,s),t.stroke()))};g?(C(),_()):(_(),C()),this.afterRenderStep(e,t,i,r,y,v,m,b,s,n,o,a)}draw(e,t,i,r){let n=r4(e,null==r?void 0:r.theme).polygon;this._draw(e,n,!1,i,r)}};Cn=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),Cr(0,tT(tE)),Cr(0,tR(aE)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],Cn);let Cl=!1,Co=new tb(e=>{Cl||(Cl=!0,e(oS).to(Cn).inSingletonScope(),e(o_).toService(oS),e(aE).toService(aD),tB(e,aE))}),Ca=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="polygon",this.numberType=lD}};Ca=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(e_=tT(oS),function(e,t){e_(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],Ca);let Cs=!1,Ch=new tb((e,t,i,r)=>{Cs||(Cs=!0,e(um).to(Ca).inSingletonScope(),e(u_).toService(um))}),Cd=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="polygon",this.numberType=lD}};Cd=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(eC=tT(oS),function(e,t){eC(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],Cd);let Cu=!1,Cc=new tb((e,t,i,r)=>{Cu||(Cu=!0,e(ul).to(Cd).inSingletonScope(),e(d5).toService(ul))});function Cp(){Cp.__loaded||(Cp.__loaded=!0,oq.RegisterGraphicCreator("polygon",_9),tG.load(Co),tG.load(d4?Ch:Cc))}Cp.__loaded=!1;let Cg=["innerRadius","outerRadius","startAngle","endAngle","cornerRadius","padAngle","padRadius","cap",...l7];class Cf extends on{constructor(e){super(e),this.type="arc",this.numberType=lR}isValid(){return super.isValid()&&this._isValid()}_isValid(){let{startAngle:e,endAngle:t,outerRadius:i,innerRadius:r}=this.attribute;return this._validNumber(e)&&this._validNumber(t)&&this._validNumber(i)&&this._validNumber(r)}getParsedCornerRadius(){let e=this.getGraphicTheme(),{cornerRadius:t=e.cornerRadius,innerPadding:i=e.innerPadding,outerPadding:r=e.outerPadding}=this.attribute,{outerRadius:n=e.outerRadius,innerRadius:l=e.innerRadius}=this.attribute;if(n+=r,l-=i,0===t||"0%"===t)return 0;let o=Math.abs(n-l),a=e=>Math.min((0,nw.Z)(e,!0)?e:o*parseFloat(e)/100,o/2);if((0,ri.Z)(t)){let e=t.map(e=>a(e)||0);return 0===e.length?[e[0],e[0],e[0],e[0]]:2===e.length?[e[0],e[1],e[0],e[1]]:(3===e.length&&e.push(0),e)}return a(t)}getParsedAngle(){let e=this.getGraphicTheme(),{startAngle:t=e.startAngle,endAngle:i=e.endAngle}=this.attribute,{cap:r=e.cap}=this.attribute,n=i-t>=0?1:-1,l=i-t;if(i=(t=(0,t9.gt)(t))+l,r&&(0,t0.Wn)(l)<t0.f7-t0.Ho){let l=1,o=1;r.length&&(l=Number(r[0]),o=Number(r[1]));let{outerRadius:a=e.outerRadius,innerRadius:s=e.innerRadius}=this.attribute,{outerPadding:h=e.outerPadding,innerPadding:d=e.innerPadding}=this.attribute,u=Math.abs((a+=h)-(s-=d))/2,c=u/a;if(u>t0.Ho&&a>t0.Ho)return{startAngle:t-n*c*l,endAngle:i+n*c*o,sc:n*c*l,ec:n*c*o}}return{startAngle:t,endAngle:i}}getParsePadAngle(e,t){let i=this.getGraphicTheme(),{innerPadding:r=i.innerPadding,outerPadding:n=i.outerPadding,padAngle:l=i.padAngle}=this.attribute,{outerRadius:o=i.outerRadius,innerRadius:a=i.innerRadius}=this.attribute;o+=n,a-=r;let{padRadius:s=(0,t0._b)(o*o+a*a)}=this.attribute,h=(0,t0.Wn)(t-e),d=e,u=t,c=e,p=t,g=l/2,f=h,m=h;if(g>t0.Ho&&s>t0.Ho){let i=t>e?1:-1,r=(0,t0.ZR)(Number(s)/a*(0,t0.O$)(g)),n=(0,t0.ZR)(Number(s)/o*(0,t0.O$)(g));return(f-=2*r)>t0.Ho?(r*=i,c+=r,p-=r):(f=0,c=p=(e+t)/2),(m-=2*n)>t0.Ho?(n*=i,d+=n,u-=n):(m=0,d=u=(e+t)/2),{outerStartAngle:d,outerEndAngle:u,innerStartAngle:c,innerEndAngle:p,innerDeltaAngle:f,outerDeltaAngle:m}}return{outerStartAngle:d,outerEndAngle:u,innerStartAngle:c,innerEndAngle:p,innerDeltaAngle:f,outerDeltaAngle:m}}getGraphicTheme(){return r4(this).arc}updateAABBBounds(e,t,i,r){this.updatePathProxyAABBBounds(i)||(r?this.updateArcAABBBoundsImprecise(e,t,i):this.updateArcAABBBoundsAccurate(e,t,i));let{tb1:n,tb2:l}=tU.graphicService.updateTempAABBBounds(i);uj(e,t,n),i.union(n),n.setValue(l.x1,l.y1,l.x2,l.y2),this.setWidthHeightWithoutTransform(i);let{lineJoin:o=t.lineJoin}=e;return tU.graphicService.transformAABBBounds(e,i,t,"miter"===o,this),i}updateArcAABBBoundsImprecise(e,t,i){let{outerRadius:r=t.outerRadius,innerRadius:n=t.innerRadius}=e,{outerPadding:l=t.outerPadding,innerPadding:o=t.innerPadding}=e;return(r+=l)<(n-=o)&&(r=n),i.set(-r,-r,r,r),i}updateArcAABBBoundsAccurate(e,t,i){let{outerRadius:r=t.outerRadius,innerRadius:n=t.innerRadius}=e,{outerPadding:l=t.outerPadding,innerPadding:o=t.innerPadding}=e;if((r+=l)<(n-=o)){let e=r;r=n,n=e}let{endAngle:a=t.endAngle,startAngle:s=t.startAngle}=e;if(s>a){let e=s;s=a,a=e}return r<=t0.Ho?i.set(0,0,0,0):Math.abs(a-s)>t0.f7-t0.Ho?i.set(-r,-r,r,r):(nf(s,a,r,i),nf(s,a,n,i)),i}needUpdateTags(e){return super.needUpdateTags(e,Cg)}needUpdateTag(e){return super.needUpdateTag(e,Cg)}toCustomPath(){var e,t,i,r;let n=super.toCustomPath();if(n)return n;let l=this.attribute,{startAngle:o,endAngle:a}=this.getParsedAngle(),s=(null!=(e=l.innerRadius)?e:0)-(null!=(t=l.innerPadding)?t:0),h=(null!=(i=l.outerRadius)?i:0)-(null!=(r=l.outerPadding)?r:0),d=(0,t0.Wn)(a-o),u=a>o;if(h<s){let e=h;h=s,s=e}if(n=new iZ,h<=t0.Ho)n.moveTo(0,0);else if(d>=t0.f7-t0.Ho)n.moveTo(0+h*(0,t0.mC)(o),0+h*(0,t0.O$)(o)),n.arc(0,0,h,o,a,!u),s>t0.Ho&&(n.moveTo(0+s*(0,t0.mC)(a),0+s*(0,t0.O$)(a)),n.arc(0,0,s,a,o,u));else{let e=h*(0,t0.mC)(o),t=h*(0,t0.O$)(o),i=s*(0,t0.mC)(a),r=s*(0,t0.O$)(a);n.moveTo(0+e,0+t),n.arc(0,0,h,o,a,!u),n.lineTo(0+i,0+r),n.arc(0,0,s,a,o,u),n.closePath()}return n}clone(){return new Cf(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return Cf.NOWORK_ANIMATE_ATTR}}function Cm(e){return new Cf(e)}Cf.NOWORK_ANIMATE_ATTR=Object.assign({cap:1},or);let Cb=new class{constructor(){this.time=sv.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){let{outerBorder:c,innerBorder:p}=e.attribute,g=c&&!1!==c.visible,f=p&&!1!==p.visible;if(!g&&!f)return;let{innerPadding:m=s.innerPadding,outerPadding:b=s.outerPadding,startAngle:y=s.startAngle,endAngle:v=s.endAngle,opacity:_=s.opacity,x:C=s.x,y:x=s.y,scaleX:w=s.scaleX,scaleY:S=s.scaleY,keepStrokeScale:A=s.keepStrokeScale}=e.attribute,{innerRadius:k=s.innerRadius,outerRadius:M=s.outerRadius}=e.attribute;M+=b,k-=m;let T=(n,l)=>{let o=!(!n||!n.stroke),{distance:a=s[l].distance}=n,h=A?a:rl(t,a,t.dpr),d=a/M,c="outerBorder"===l?1:-1;if(e.setAttributes({outerRadius:M+c*h,innerRadius:k-c*h,startAngle:y-c*d,endAngle:v+c*d}),t.beginPath(),aw(e,t,i,r,M+c*h,k-c*h),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),u)u(t,n,s[l]);else if(o){let o=s[l].opacity;s[l].opacity=_,t.setStrokeStyle(e,n,(C-i)/w,(x-r)/S,s[l]),s[l].opacity=o,t.stroke()}};g&&T(c,"outerBorder"),f&&T(p,"innerBorder"),e.setAttributes({outerRadius:M,innerRadius:k,startAngle:y,endAngle:v})}};var Cy=function(e,t){return function(i,r){t(i,r,e)}};let Cv=class extends aG{constructor(e){super(),this.graphicRenderContributions=e,this.numberType=lR,this.builtinContributions=[Cb,aO,a3],this.init(e)}drawArcTailCapPath(e,t,i,r,n,l,o,a){let s=a-o,h=e.getParsedAngle(),d=h.startAngle,u=h.endAngle;u=a,(0,t0.Wn)(u-d);let c=u>d,p=!1;if(n<l){let e=n;n=l,l=e}let{outerDeltaAngle:g,xors:f,yors:m,xirs:b,yirs:y,limitedOcr:v,outerCornerRadiusStart:_,outerCornerRadiusEnd:C,maxOuterCornerRadius:x,xore:w,yore:S,xire:A,yire:k,limitedIcr:M,innerDeltaAngle:T,innerStartAngle:R,innerCornerRadiusStart:E,innerCornerRadiusEnd:P,maxInnerCornerRadius:B}=ax(e,d,u,l,n);if(v>t0.Ho){let e=(0,t0.VV)(_,v),l=(0,t0.VV)(C,v),o=aC(b,y,f,m,n,e,Number(c)),a=aC(w,S,A,k,n,l,Number(c));if(v<x&&e===l)t.moveTo(i+o.cx+o.x01,r+o.cy+o.y01),t.arc(i+o.cx,r+o.cy,v,(0,t0.fv)(o.y01,o.x01),(0,t0.fv)(a.y01,a.x01),!c);else{let e=u-s-.03,o=(0,t0.fv)(a.y11,a.x11);t.arc(i,r,n,e,o,!c),l>0&&t.arc(i+a.cx,r+a.cy,l,(0,t0.fv)(a.y11,a.x11),(0,t0.fv)(a.y01,a.x01),!c)}}else t.moveTo(i+f,r+m);if(!(l>t0.Ho)||T<.001)t.lineTo(i+A,r+k),p=!0;else if(M>t0.Ho){let e=(0,t0.VV)(E,M),n=(0,t0.VV)(P,M),o=aC(A,k,w,S,l,-n,Number(c)),a=aC(f,m,b,y,l,-e,Number(c));if(t.lineTo(i+o.cx+o.x01,r+o.cy+o.y01),M<B&&e===n){let e=(0,t0.fv)(a.y01,a.x01);t.arc(i+o.cx,r+o.cy,M,(0,t0.fv)(o.y01,o.x01),e,!c)}else{n>0&&t.arc(i+o.cx,r+o.cy,n,(0,t0.fv)(o.y01,o.x01),(0,t0.fv)(o.y11,o.x11),!c);let e=(0,t0.fv)(o.cy+o.y11,o.cx+o.x11),a=u-s-.03;t.arc(i,r,l,e,a,c)}}else t.lineTo(i+l*(0,t0.mC)(R),r+l*(0,t0.O$)(R));return p}drawShape(e,t,i,r,n,l,o,a,s){s=null!=s?s:r4(e,null==l?void 0:l.theme).arc;let{fill:h=s.fill,stroke:d=s.stroke,x:u=s.x,y:c=s.y,fillStrokeOrder:p=s.fillStrokeOrder}=e.attribute,g=this.valid(e,s,o,a);if(!g)return;let{fVisible:f,sVisible:m,doFill:b,doStroke:y}=g,{outerPadding:v=s.outerPadding,innerPadding:_=s.innerPadding,cap:C=s.cap,forceShowCap:x=s.forceShowCap}=e.attribute,{outerRadius:w=s.outerRadius,innerRadius:S=s.innerRadius}=e.attribute;w+=v,S-=_;let A=0,k=((0,ni.Z)(C)&&C||C[0])&&"conical"===h.gradient;if(k){let{sc:t,startAngle:i,endAngle:r}=e.getParsedAngle();(0,t0.Wn)(r-i)<t0.f7-t0.Ho&&(A=t||0,h.startAngle-=A,h.endAngle-=A)}let M=!1,{isFullStroke:T,stroke:R}=nd(d);if((b||T)&&(t.beginPath(),aw(e,t,i,r,w,S),M=!0,t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s),this.beforeRenderStep(e,t,i,r,b,y,f,m,s,n,o,a),p?(this._runStroke(e,t,i,r,s,y,T,m,a),this._runFill(e,t,i,r,s,b,f,u,c,o)):(this._runFill(e,t,i,r,s,b,f,u,c,o),this._runStroke(e,t,i,r,s,y,T,m,a))),!T&&y&&(t.beginPath(),aw(e,t,i,r,w,S,R),M||this.beforeRenderStep(e,t,i,r,b,y,f,m,s,n,o,a),a?a(t,e.attribute,s):m&&(t.setStrokeStyle(e,e.attribute,i,r,s),t.stroke())),((0,ni.Z)(C)&&C||C[1])&&x){let{startAngle:l,endAngle:h}=e.getParsedAngle();if((0,t0.Wn)(h-l)>=t0.f7-t0.Ho){t.beginPath();let l=Math.abs(w-S)/2/w,{endAngle:h=s.endAngle,fill:d=s.fill}=e.attribute;this.drawArcTailCapPath(e,t,i,r,w,S,h,h+l),M||this.beforeRenderStep(e,t,i,r,b,y,f,m,s,n,o,a),(()=>{if(b&&"conical"===d.gradient){let n=function(e,t,i,r){let{stops:n,startAngle:l,endAngle:o}=r;for(;i<0;)i+=t0.f7;for(;i>t0.f7;)i-=t0.f7;if(i<l||i>o)return n[0].color;let a,s,h=(i-l)/(o-l);for(let e=0;e<n.length;e++)if(n[e].offset>=h){a=n[e-1],s=n[e];break}return h=(h-a.offset)/(s.offset-a.offset),cU(a.color,s.color,h,!1)}(0,0,h,d);o||ay&&(t.setCommonStyle(e,e.attribute,i,r,s),t.fillStyle=n,t.fill())}})(),y&&(a||m&&(t.setStrokeStyle(e,e.attribute,i,r,s),t.stroke()))}}this.afterRenderStep(e,t,i,r,b,y,f,m,s,n,o,a),k&&(h.startAngle+=A,h.endAngle+=A)}_runFill(e,t,i,r,n,l,o,a,s,h){l&&(h?h(t,e.attribute,n):o&&(t.setCommonStyle(e,e.attribute,a-i,s-r,n),t.fill()))}_runStroke(e,t,i,r,n,l,o,a,s){l&&o&&(s?s(t,e.attribute,n):a&&(t.setStrokeStyle(e,e.attribute,i,r,n),t.stroke()))}draw(e,t,i,r){let n=r4(e,null==r?void 0:r.theme).arc;this._draw(e,n,!1,i,r,n)}};Cv=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),Cy(0,tT(tE)),Cy(0,tR(aS)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],Cv);let C_=!1,CC=new tb(e=>{C_||(C_=!0,e(Cv).toSelf().inSingletonScope(),e(ob).to(Cv).inSingletonScope(),e(o_).toService(ob),e(aS).toService(aD),tB(e,aS))}),Cx=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="arc",this.numberType=lR}};Cx=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(ex=tT(ob),function(e,t){ex(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],Cx);let Cw=!1,CS=new tb((e,t,i,r)=>{Cw||(Cw=!0,e(ua).to(Cx).inSingletonScope(),e(u_).toService(ua))}),CA=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="arc",this.numberType=lR}};CA=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(ew=tT(ob),function(e,t){ew(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],CA);let Ck=!1,CM=new tb((e,t,i,r)=>{Ck||(Ck=!0,e(d6).to(CA).inSingletonScope(),e(d5).toService(d6))});function CT(){CT.__loaded||(CT.__loaded=!0,oq.RegisterGraphicCreator("arc",Cm),tG.load(CC),tG.load(d4?CS:CM))}function CR(){dV(),bX(),Cp(),uN()}function CE(){dV(),bX(),CT(),uN()}CT.__loaded=!1,CR();class CP extends yN{getStartAngle(){return(0,t9.LW)(this._startAngle)}getEndAngle(){return(0,t9.LW)(this._endAngle)}getMainSegmentPoints(){return this._mainSegmentPoints}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},CP.defaultAttributes,e)),this.name="segment",this.key="segment",this.lines=[]}render(){this.removeAllChild(!0),this._reset();let{startSymbol:e,endSymbol:t,lineStyle:i,state:r,visible:n=!0,multiSegment:l,mainSegmentIndex:o}=this.attribute;if(!n)return;this._computeLineAngle();let a=this._getMainSegmentPoints(),s=this._renderSymbol(e,a,"start"),h=this._renderSymbol(t,a,"end");if(this.startSymbol=s,this.endSymbol=h,l){let e=[...this.attribute.points];if((0,sD.Z)(o))e[o]=this._clipPoints(e[o]);else{let t=this._clipPoints((0,ag.VF)(e));e[0][0]=t[0],e[e.length-1][e[e.length-1].length-1]=t[t.length-1]}e.forEach((e,t)=>{var n,l;let o=oq.line(Object.assign(Object.assign({points:e},(0,ri.Z)(i)?null!=(n=i[t])?n:i[i.length-1]:i),{fill:!1}));o.name=`${this.name}-line`,o.id=this._getNodeId("line"+t),(0,d$.Z)(null==r?void 0:r.line)||(o.states=(0,ri.Z)(r.line)?null!=(l=r.line[t])?l:r.line[r.line.length-1]:r.line),this.add(o),this.lines.push(o)})}else{let e=oq.line;(0,ag.IX)(i)[0].cornerRadius&&(e=oq.polygon);let t=e(Object.assign(Object.assign({points:this._clipPoints(this.attribute.points)},(0,ag.IX)(i)[0]),{fill:!1,closePath:!1}));t.name=`${this.name}-line`,t.id=this._getNodeId("line"),(0,d$.Z)(null==r?void 0:r.line)||(t.states=[].concat(r.line)[0]),this.add(t),this.lines.push(t)}}_computeStartRotate(e){return e+Math.PI/2}_computeEndRotate(e){return e+Math.PI/2}_renderSymbol(e,t,i){let r;if(!t.length)return;let{autoRotate:n=!0}=e;if(e&&e.visible){let l,o,a=this.getStartAngle(),s=this.getEndAngle(),{state:h}=this.attribute,d=t[0],u=t[t.length-1],{refX:c=0,refY:p=0,refAngle:g=0,style:f,symbolType:m,size:b=12}=e;"start"===i?(l={x:d.x+((0,sD.Z)(a)?c*Math.cos(a)+p*Math.cos(a-Math.PI/2):0),y:d.y+((0,sD.Z)(a)?c*Math.sin(a)+p*Math.sin(a-Math.PI/2):0)},o=this._computeStartRotate(this._startAngle)):(l={x:u.x+((0,sD.Z)(s)?c*Math.cos(s)+p*Math.cos(s-Math.PI/2):0),y:u.y+((0,sD.Z)(s)?c*Math.sin(s)+p*Math.sin(s-Math.PI/2):0)},o=this._computeEndRotate(this._endAngle)),(r=oq.symbol(Object.assign(Object.assign(Object.assign({},l),{symbolType:m,size:b,angle:n?o+g:0,strokeBoundsBuffer:0}),f))).name=`${this.name}-${i}-symbol`,r.id=this._getNodeId(`${i}-symbol`),(0,d$.Z)(null==h?void 0:h.symbol)||(r.states=h.symbol),"start"===i?(0,d$.Z)(null==h?void 0:h.startSymbol)||(r.states=h.startSymbol):(0,d$.Z)(null==h?void 0:h.endSymbol)||(r.states=h.endSymbol),this.add(r)}return r}_getMainSegmentPoints(){let e;if(this._mainSegmentPoints)return this._mainSegmentPoints;let{points:t,multiSegment:i,mainSegmentIndex:r}=this.attribute;return e=i?(0,sD.Z)(r)?t[r]:(0,ag.VF)(t):t,this._mainSegmentPoints=e,e}_clipPoints(e){let{startSymbol:t={},endSymbol:i={}}=this.attribute,r=e;if(t.visible){let i=t.clip?t.size||10:0;r=[{x:e[0].x-i/2*(Math.cos(this._startAngle)||0),y:e[0].y-i/2*(Math.sin(this._startAngle)||0)},...r.slice(1)]}if(i.visible){let t=i.clip?i.size||10:0,n={x:e[e.length-1].x-t/2*(Math.cos(this._endAngle)||0),y:e[e.length-1].y-t/2*(Math.sin(this._endAngle)||0)};r=[...r.slice(0,r.length-1),n]}return r}_computeLineAngle(){let e=this._getMainSegmentPoints();if(e.length<=1)return;let t=e[0],i=e[1],r=e[e.length-2],n=e[e.length-1],l=[t.x-i.x,t.y-i.y],o=Math.atan2(l[1],l[0]),a=[n.x-r.x,n.y-r.y],s=Math.atan2(a[1],a[0]);this._startAngle=o,this._endAngle=s}_reset(){this.startSymbol=null,this.endSymbol=null,this._startAngle=null,this._endAngle=null,this._mainSegmentPoints=null}}function CB(){dV(),ct(),uN(),yF(),uT()}CP.defaultAttributes={visible:!0,lineStyle:{lineWidth:1,stroke:"#000"},startSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}},endSymbol:{visible:!1,autoRotate:!0,symbolType:"triangle",size:12,refX:0,refY:0,refAngle:0,style:{fill:"#000",zIndex:1}}};var CI=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};CB();class CL extends yN{getBgRect(){return this._bgRect}getTextShape(){return this._textShape}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},CL.defaultAttributes,e)),this.name="tag",this._tagStates=[],this._rectStates=[],this._symbolStates=[],this._textStates=[]}render(){var e,t,i;let r,n,l;this.cacheStates();let{text:o="",textStyle:a={},shape:s={},panel:h={},space:d=4,minWidth:u,maxWidth:c,padding:p=4,visible:g,state:f,type:m,textAlwaysCenter:b,containerTextAlign:y}=this.attribute,v=(0,_6.o)(p),_=this.createOrUpdateChild("tag-content",{x:0,y:0,zIndex:1},"group"),C,x=-v[3],w=-v[0],S=v[1]+v[3],A=v[0]+v[2],k=0,M=0,{visible:T}=s,R=CI(s,["visible"]);if((0,ni.Z)(T)){let e=(null==R?void 0:R.size)||10,t=(0,nw.Z)(e)?e:Math.max(e[0],e[1]);C=_.createOrUpdateChild("tag-shape",Object.assign(Object.assign({symbolType:"circle",size:e,strokeBoundsBuffer:0},R),{visible:T,x:t/2,y:t/2}),"symbol"),(0,d$.Z)(null==f?void 0:f.shape)||(C.states=f.shape),T&&(M=t+d)}if(S+=M,k+=M,function(e,t="type"){return"rich"===pQ(e,t)}({text:o})||"rich"===m){let e=Object.assign(Object.assign(Object.assign({},p0(Object.assign({type:m,text:o},a))),a),{visible:(0,oV.Z)(o)&&!1!==g,x:k,y:0});(0,r5.Z)(e.lineHeight)&&(e.lineHeight=a.fontSize),n=(r=_.createOrUpdateChild("tag-text",e,"richtext")).AABBBounds.width(),l=r.AABBBounds.height()}else{let i=Object.assign(Object.assign({text:(0,r9.Z)(o)&&"type"in o&&"text"===o.type?o.text:o,visible:(0,oV.Z)(o)&&!1!==g,lineHeight:null==a?void 0:a.fontSize},a),{x:k,y:0});(0,r5.Z)(i.lineHeight)&&(i.lineHeight=a.fontSize),r=_.createOrUpdateChild("tag-text",i,"text");let s=pJ(i.text,a,null==(t=null==(e=this.stage)?void 0:e.getTheme())?void 0:t.text);n=s.width,l=s.height}S+=n;let E=null!=(i=s.size)?i:10,P=(0,nw.Z)(E)?E:Math.max(E[0],E[1]);A+=Math.max(l,s.visible?P:0);let{textAlign:B,textBaseline:I}=a;((0,oV.Z)(u)||(0,oV.Z)(c))&&((0,oV.Z)(u)&&S<u&&(S=u),(0,oV.Z)(c)&&S>c&&(S=c,r.setAttribute("maxLineWidth",c-v[1]-v[2]))),x=0,w=0;let L=0;"left"===B||"start"===B?L=1:"right"===B||"end"===B?L=-1:"center"===B&&(L=0),L?L<0?(x-=S,C&&C.setAttribute("x",(C.attribute.x||0)-n),_.setAttribute("x",-v[1]-M)):L>0&&_.setAttribute("x",v[3]):(x-=S/2,C&&C.setAttribute("x",(C.attribute.x||0)-n/2),_.setAttribute("x",-M/2));let F=(e,t)=>{"richtext"===r.type?r.setAttributes({x:e,textAlign:t,textConfig:(0,ag.IX)(r.attribute.textConfig).map(e=>Object.assign(Object.assign({},e),{textAlign:t}))}):r.setAttributes({x:e,textAlign:t})};if((y?"center"===y:b)&&L){let e=S-v[1]-v[3],t=n+M,i=1===L?(e-t)/2+M+n/2:v[0]+M-(S/2+t/2-M)+n/2;if(F(i,"center"),C){let e=i-n/2-M+P/2;C.setAttributes({x:e})}}if(("left"===y||"start"===y)&&1!==L){let e=S-v[1]-v[3],t=0===L?-e/2+M/2:-S+v[3]+v[1]+M;F(t+M,"left"),C&&C.setAttributes({x:t+P/2})}if(("right"===y||"end"===y)&&-1!==L){let e=S-v[1]-v[3],t=0===L?e/2+M/2:e;if(F(t,"right"),C){let e=t-n-M+P/2;C.setAttributes({x:e})}}"middle"===I?(w-=A/2,C&&C.setAttribute("y",0)):"bottom"===I?(w-=A,C&&C.setAttribute("y",-l/2),_.setAttribute("y",-v[2])):"top"===I&&(_.setAttribute("y",v[0]),C&&C.setAttribute("y",l/2)),(0,d$.Z)(null==f?void 0:f.text)||(r.states=f.text);let{visible:H}=h,O=CI(h,["visible"]);if(g&&(0,ni.Z)(H)){let e=this.createOrUpdateChild("tag-panel",Object.assign(Object.assign({},O),{visible:H&&!!o,width:S,height:A,x:x,y:w}),"rect");if((0,d$.Z)(null==f?void 0:f.panel)||(e.states=f.panel),O.customShape){let t=O.customShape;e.pathProxy=e=>t(this,e,new iZ)}this._bgRect=e}this._textShape=r,this._symbol=C,this.resetStates()}initAttributes(e,t){e=(null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},CL.defaultAttributes,e),super.initAttributes(e),this.render()}addState(e,t,i){super.addState(e,t,i),this._textShape&&this._textShape.addState(e,t,i),this._bgRect&&this._bgRect.addState(e,t,i),this._symbol&&this._symbol.addState(e,t,i)}removeState(e,t){super.removeState(e,t),this._textShape&&this._textShape.removeState(e,t),this._bgRect&&this._bgRect.removeState(e,t),this._symbol&&this._symbol.removeState(e,t)}cacheStates(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p;this._tagStates=null!=(t=null==(e=this.currentStates)?void 0:e.slice())?t:[],this._rectStates=null!=(n=null==(r=null==(i=this._bgRect)?void 0:i.currentStates)?void 0:r.slice())?n:[],this._symbolStates=null!=(a=null==(o=null==(l=this._symbol)?void 0:l.currentStates)?void 0:o.slice())?a:[],this._textStates=null!=(d=null==(h=null==(s=this._textShape)?void 0:s.currentStates)?void 0:h.slice())?d:[],this.clearStates(),null==(u=this._bgRect)||u.clearStates(),null==(c=this._symbol)||c.clearStates(),null==(p=this._textShape)||p.clearStates()}resetStates(){var e,t,i;this._tagStates.length&&this.useStates(this._tagStates),this._rectStates.length&&(null==(e=this._bgRect)||e.useStates(this._rectStates)),this._symbolStates.length&&(null==(t=this._symbol)||t.useStates(this._symbolStates)),this._textStates.length&&(null==(i=this._textShape)||i.useStates(this._textStates))}}CL.defaultAttributes={visible:!0,textStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},space:4,padding:4,shape:{fill:"#000"}};let CF=(e,t,i)=>{let r=e.target;return r!==i&&r.name&&!(0,d$.Z)(r.states)?(r.addState(en.hover,!0),b3(t,e=>{e!==r&&e.name&&!(0,d$.Z)(e.states)&&e.addState(en.hoverReverse,!0)}),r):i},CH=(e,t,i)=>i?(b3(t,e=>{e.name&&!(0,d$.Z)(e.states)&&(e.removeState(en.hoverReverse),e.removeState(en.hover))}),null):i,CO=(e,t,i)=>{let r=e.target;return i===r&&r.hasState(en.selected)?(b3(t,e=>{e.name&&!(0,d$.Z)(e.states)&&(e.removeState(en.selectedReverse),e.removeState(en.selected))}),null):r.name&&!(0,d$.Z)(r.states)?(r.addState(en.selected,!0),b3(t,e=>{e!==r&&e.name&&!(0,d$.Z)(e.states)&&e.addState(en.selectedReverse,!0)}),r):i},CD={type:"default",duration:300,easing:"linear"};class Cz extends y${constructor(){super(...arguments),this.name="axis",this.data=[],this.tickLineItems=[],this.subTickLineItems=[],this.axisLabelLayerSize={},this.axisLabelsContainer=null,this._onHover=e=>{this._lastHover=CF(e,this.axisContainer,this._lastHover)},this._onUnHover=e=>{this._lastHover=CH(e,this.axisContainer,this._lastHover)},this._onClick=e=>{this._lastSelect=CO(e,this.axisContainer,this._lastSelect)}}getInnerView(){return this._innerView}getPrevInnerView(){return this._prevInnerView}getBoundsWithoutRender(e){let t=(0,hQ.Z)(this.attribute);t.scale=this.attribute.scale,this.attribute=e;let i=oq.group({x:this.attribute.x,y:this.attribute.y});return this.add(i),this._renderInner(i),this.removeChild(i),this.attribute=t,i.AABBBounds}render(){this._prepare(),this._prevInnerView=this._innerView&&_b(this._innerView),this.removeAllChild(!0),this._innerView=oq.group({x:0,y:0,pickable:!1}),this.add(this._innerView),this._renderInner(this._innerView),this._bindEvent(),this.runAnimation()}_prepare(){this._prepareAnimate(CD)}_bindEvent(){if(this.attribute.disableTriggerEvent)return;let{hover:e,select:t}=this.attribute;e&&(this._innerView.addEventListener("pointermove",this._onHover),this._innerView.addEventListener("pointerout",this._onUnHover)),t&&this._innerView.addEventListener("pointerdown",this._onClick)}_renderInner(e){let{title:t,label:i,tick:r,line:n,items:l}=this.attribute,o=oq.group({x:0,y:0,zIndex:1,pickable:!1});if(o.name=eF.axisContainer,o.id=this._getNodeId("container"),o.setMode(this.mode),this.axisContainer=o,e.add(o),n&&n.visible&&this.renderLine(o),l&&l.length&&(this.data=this._transformItems(l[0]),r&&r.visible&&this.renderTicks(o),i&&i.visible)){let e=oq.group({x:0,y:0,pickable:!1});e.name=eF.labelContainer,e.id=this._getNodeId("label-container"),this.axisLabelsContainer=e,o.add(e),l.forEach((t,i)=>{let r=this.renderLabels(e,t,i),n=r.getChildren();this.beforeLabelsOverlap(n,t,r,i,l.length),this.handleLabelsOverlap(n,t,r,i,l.length),this.afterLabelsOverlap(n,t,r,i,l.length);let o=0,a=0,s="center",h="middle",d=0;n.forEach((e,t)=>{var i;let r=e.attribute,n=null!=(i=r.angle)?i:0,l=e.AABBBounds,u=l.width(),c=l.height();n&&(u=Math.abs(u*Math.cos(n)),c=Math.abs(c*Math.sin(n))),o=Math.max(o,u),a=Math.max(a,c),s=r.textAlign,h=r.textBaseline,0===t&&(d=r.x)}),this.axisLabelLayerSize[i]={width:o,height:a,labelPos:d,textAlign:s,textBaseline:h}})}t&&t.visible&&this.renderTitle(o)}renderTicks(e){let t=this.getTickLineItems(),i=oq.group({x:0,y:0,pickable:!1});i.name=eF.tickContainer,i.id=this._getNodeId("tick-container"),e.add(i),t.forEach((e,r)=>{var n;let l=oq.line(Object.assign({},this._getTickLineAttribute("tick",e,r,t)));if(l.name=eF.tick,l.id=this._getNodeId(e.id),(0,d$.Z)(null==(n=this.attribute.tick)?void 0:n.state))l.states=pK;else{let e=this.data[r],t=(0,ha.Z)({},pK,this.attribute.tick.state);Object.keys(t).forEach(i=>{(0,nr.Z)(t[i])&&(t[i]=t[i](e.rawValue,r,e,this.data))}),l.states=t}i.add(l)}),this.tickLineItems=t;let{subTick:r}=this.attribute;if(r&&r.visible){let e=this.getSubTickLineItems();e.length&&e.forEach((e,n)=>{let l=oq.line(Object.assign({},this._getTickLineAttribute("subTick",e,n,t)));if(l.name=eF.subTick,l.id=this._getNodeId(`${n}`),(0,d$.Z)(r.state))l.states=pK;else{let i=(0,ha.Z)({},pK,r.state);Object.keys(i).forEach(r=>{(0,nr.Z)(i[r])&&(i[r]=i[r](e.value,n,e,t))}),l.states=i}i.add(l)}),this.subTickLineItems=e}}renderLabels(e,t,i){let{dataFilter:r}=this.attribute.label;r&&(0,nr.Z)(r)&&(t=r(t,i));let n=this._transformItems(t),l=oq.group({x:0,y:0,pickable:!1});return l.name=`${eF.labelContainer}-layer-${i}`,l.id=this._getNodeId(`label-container-layer-${i}`),e.add(l),n.forEach((e,t)=>{var r;let o=p1(this._getLabelAttribute(e,t,n,i));if(o.name=eF.label,o.id=this._getNodeId(`layer${i}-label-${e.id}`),(0,d$.Z)(null==(r=this.attribute.label)?void 0:r.state))o.states=pK;else{let r=(0,ha.Z)({},pK,this.attribute.label.state);Object.keys(r).forEach(l=>{(0,nr.Z)(r[l])&&(r[l]=r[l](e,t,n,i))}),o.states=r}o.data=Object.assign(Object.assign({},e),{index:t,layer:i}),l.add(o)}),l}renderTitle(e){let t=new CL(Object.assign({},this.getTitleAttribute()));t.name=eF.title,t.id=this._getNodeId("title"),e.add(t)}getVerticalCoord(e,t,i){return _y(e,this.getVerticalVector(t,i,e))}getTickLineItems(){let{tick:e}=this.attribute,t=this.data,i=[],{alignWithLabel:r,inside:n=!1,length:l,dataFilter:o}=e,a=1;return t.length>=2&&(a=t[1].value-t[0].value),(o&&(0,nr.Z)(o)?o(t):t).forEach(e=>{let t=e.point,o=e.value;if(!r){let i=e.value-a/2;if(this.isInValidValue(i))return;t=this.getTickCoord(i),o=i}let s=this.getVerticalCoord(t,l,n);if("3d"===this.mode){let r=this.getVerticalVector(l,n,t),a=0,h=0;(0,t0.Wn)(r[0])>(0,t0.Wn)(r[1])?a=t0.pi/2*(s.x>t.x?1:-1):h=t0.pi/2*(s.y>t.y?-1:1),i.push({start:t,end:s,value:o,id:`tick-${e.id}`,anchor:[t.x,t.y],alpha:a,beta:h})}else i.push({start:t,end:s,value:o,id:`tick-${e.id}`})}),i}getSubTickLineItems(){let{subTick:e}=this.attribute,t=[],{count:i=4,inside:r=!1,length:n=2}=e,l=this.tickLineItems,o=l.length;if(o>=2)for(let e=0;e<o-1;e++){let o=l[e],a=l[e+1];for(let e=0;e<i;e++){let l=(e+1)/(i+1),s=(1-l)*o.value+l*a.value,h=this.getTickCoord(s),d=this.getVerticalCoord(h,n,r);t.push({start:h,end:d,value:s,id:`sub-tick-${s}`})}}return t}_getTickLineAttribute(e,t,i,r){let n=(0,hH.Z)(this.attribute,`${e}.style`),l=this.data[i];n=(0,nr.Z)(n)?(0,ha.Z)({},(0,hH.Z)(_c,`${e}.style`),"tick"===e?n(l.rawValue,i,l,this.data):n(t.value,i,t,r)):n;let{start:o,end:a,anchor:s,alpha:h,beta:d}=t;return Object.assign({points:[o,a],anchor:s,alpha:h,beta:d},n)}_getLabelAttribute(e,t,i,r){var n,l;let{space:o=4,inside:a=!1,formatMethod:s,type:h="text",text:d}=this.attribute.label,u=o,c=0;(null==(n=this.attribute.tick)?void 0:n.visible)&&this.attribute.tick.inside===a&&(c=this.attribute.tick.length||4),(null==(l=this.attribute.subTick)?void 0:l.visible)&&this.attribute.subTick.inside===a&&(c=Math.max(c,this.attribute.subTick.length||2)),u+=c;let p=this.getRelativeVector(e.point);r>0&&(0===p[1]?u+=(this.axisLabelLayerSize[r-1].height+(0,hH.Z)(this.attribute,"label.space",4))*r:u+=(this.axisLabelLayerSize[r-1].width+(0,hH.Z)(this.attribute,"label.space",4))*r);let g=this.getVerticalCoord(e.point,u,a),f=this.getVerticalVector(u||1,a,g),m=s?s(`${e.label}`,e,t,i,r):e.label,{style:b}=this.attribute.label;b=(0,nr.Z)(b)?(0,ha.Z)({},_c.label.style,b(e,t,i,r)):b;let y=this.getLabelAlign(f,a,b.angle);return b=(0,ha.Z)(y,b),(0,nr.Z)(b.text)&&(b.text=b.text({label:e.label,value:e.rawValue,index:e.index,layer:r})),Object.assign(Object.assign(Object.assign({},this.getLabelPosition(g,f,m,b)),{text:null!=d?d:m,_originText:e.label,lineHeight:null==b?void 0:b.fontSize,type:h}),b)}getLabelPosition(e,t,i,r){return e}_transformItems(e){let t=[];return e.forEach(e=>{var i;t.push(Object.assign(Object.assign({},e),{point:this.getTickCoord(e.value),id:null!=(i=e.id)?i:e.label}))}),t}runAnimation(){let e=this.lastScale;if(this.attribute.scale){let e=this.attribute.scale;this.lastScale=e.clone(),this.lastScale.range([0,1])}if(this.attribute.animation&&this.applyAnimationState){let t=this.getInnerView(),i=this.getPrevInnerView();if(!i)return;let r=this._animationConfig;this._newElementAttrMap={},b3(t,t=>{var n;if("group"!==t.type&&t.id){let l=i[t.id];if(t.setFinalAttributes(t.attribute),l){l.release();let i=l.attribute,o=t.getFinalAttribute(),a=function(e,t,i){let r={};for(let i in t)i in e&&(0,dN.X)(e[i],t[i])||(r[i]=t[i]);return r}(i,o),s=Object.keys(a).length>0;if("opacity"in i&&o.opacity!==i.opacity&&(a.opacity=null!=(n=o.opacity)?n:1,s=!0),r.update&&s){this._newElementAttrMap[t.id]={state:"update",node:t,attrs:t.attribute};let i=l.attribute;t.setAttributes(i),t.applyAnimationState(["update"],[{name:"update",animation:Object.assign(Object.assign({selfOnly:!0},r.update),{type:"axisUpdate",customParameters:{config:r.update,diffAttrs:a,lastScale:e}})}])}}else r.enter&&(this._newElementAttrMap[t.id]={state:"enter",node:t,attrs:t.attribute},t.applyAnimationState(["enter"],[{name:"enter",animation:Object.assign(Object.assign({},r.enter),{type:"axisEnter",selfOnly:!0,customParameters:{config:r.enter,lastScale:e,getTickCoord:this.getTickCoord.bind(this)}})}]))}})}}release(){super.release(),this._prevInnerView=null,this._innerView=null}}let CW={parity:function(e){return e.filter((e,t)=>t%2?e.setAttribute("opacity",0):1)},greedy:function(e,t){let i;return e.filter((e,r)=>r&&_x(i,e,t)?e.setAttribute("opacity",0):(i=e,1))}};function CZ(e){let t;return(t=e.OBBBounds.empty()?e.AABBBounds:e.OBBBounds).width()>1&&t.height()>1}function CN(e,t,i,r,n=!1){if(i&&!e.attribute.opacity){let i=t.length;if(i>1){e.setAttribute("opacity",1);for(let e=0;e<i;e++){let l=n?t[i-1-e]:t[e];if(!r(l))break;l.setAttribute("opacity",0)}}}}function C$(e,t){let i;if((0,d$.Z)(e))return;let r=e.filter(CZ);if((0,d$.Z)(r))return;r.forEach(e=>e.setAttribute("opacity",1)),i=r;let{method:n="parity",separation:l=0}=t,o=(0,nr.Z)(n)?n:CW[n]||CW.parity;if(i.length>=3&&_w(i,l)){do i=o(i,l);while(i.length>=3&&_w(i,l));let e=(e,t,i=!0)=>i&&e<3||t,n=e(i.length,t.firstVisible,!1),a=e(i.length,t.lastVisible),s=r[0],h=(0,ag.Z$)(r);_x(s,h,l)&&n&&a&&(h.setAttribute("opacity",0),a=!1),CN(s,i,n,e=>_x(e,s,l)),CN(h,i,a,e=>_x(e,h,l)||!(!n||e===s)&&_x(e,s,l),!0)}r.forEach(e=>{e.setAttribute("visible",!!e.attribute.opacity)})}function Cj(e=0){if(e<0)for(;e<0;)e+=2*Math.PI;if(e>0)for(;e>=2*Math.PI;)e-=2*Math.PI;return e}function CG(e,t=0){let i,r=["center","left","left","left","center","right","right","right","left"],n=["top","top","middle","bottom","bottom","bottom","middle","top","top"];"top"===e&&(r=["center","right","right","right","center","left","left","left","right"],n=["bottom","bottom","middle","top","top","top","middle","bottom","bottom"]);let l=(t=Cj(t))/(.5*Math.PI);return{textAlign:r[i=l===Math.floor(l)?2*Math.floor(l):2*Math.floor(l)+1],textBaseline:n[i]}}function CV(e,t=0){let i,r=["right","right","center","left","left","left","center","right","right"],n=["middle","middle","top","top","middle","middle","bottom","bottom","middle"];"right"===e&&(r=["left","left","center","right","right","right","center","left","left"],n=["middle","middle","bottom","bottom","middle","middle","top","middle","middle"]);let l=(t=Cj(t))/(.5*Math.PI);return{textAlign:r[i=l===Math.floor(l)?2*Math.floor(l):2*Math.floor(l)+1],textBaseline:n[i]}}function CU(e,t,i){let r;return(0,sD.Z)(t)&&(r=Math.abs(t-e)),(0,sD.Z)(i)&&(r=(0,sD.Z)(r)?Math.min(Math.abs(e-i),r):Math.abs(e-i)),r}var CK=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};_4(),ct();class CX extends Cz{constructor(e,t){var i;if(e.labelHoverOnAxis&&(e.labelHoverOnAxis.textStyle=Object.assign({},e.label.style,e.labelHoverOnAxis.textStyle),void 0===e.labelHoverOnAxis.space)){let{padding:t=2}=e.labelHoverOnAxis,r=(0,_6.o)(t),n="bottom"===e.orient?r[0]:"left"===e.orient?r[1]:"top"===e.orient?r[2]:r[3],l=(null!=(i=e.label.space)?i:CX.defaultAttributes.label.space)-n;e.labelHoverOnAxis.space=l}super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},CX.defaultAttributes,e),t),this.labelHoverOnAxisGroup=null}_renderInner(e){var t;if(this._breaks=null,this.attribute.breaks&&this.attribute.breaks.length){let e=[];for(let t=0;t<this.attribute.breaks.length;t++){let{range:i,breakSymbol:r,rawRange:n}=this.attribute.breaks[t];e.push({startPoint:this.getTickCoord(i[0]),endPoint:this.getTickCoord(i[1]),range:i,breakSymbol:r,rawRange:n})}this._breaks=e}super._renderInner(e),this._breaks&&this._breaks.length&&this._breaks.forEach((t,i)=>{let{startPoint:r,endPoint:n,breakSymbol:l,rawRange:o}=t;if(!1!==(null==l?void 0:l.visible)){let t=oq.group({zIndex:999});t.name=eF.axisBreak,t.id=this._getNodeId(`${eF.axisBreak}-${i}`),t.data=o;let a=function(e={}){var t,i;let{style:r={},angle:n=.5*Math.PI}=e,l=(0,ha.Z)({},_p,r),o=null!=(t=l.size)?t:_p.size;return Object.assign(Object.assign({},l),{symbolType:null!=(i=l.symbolType)?i:`M ${-o/2} ${o*Math.sin(n)} L ${o/2} ${-o*Math.sin(n)}`,symbolSize:o})}(l),s=oq.symbol(Object.assign({x:r.x,y:r.y},a));s.name=eF.axisBreakSymbol;let h=oq.symbol(Object.assign({x:n.x,y:n.y},a));h.name=eF.axisBreakSymbol,t.add(s),t.add(h),e.add(t)}});let{panel:i}=this.attribute;if(i&&i.visible){let e=this.axisContainer,r=e.AABBBounds,n=oq.rect(Object.assign({x:r.x1,y:r.y1,width:r.width(),height:r.height()},i.style));n.name=eF.background,n.id=this._getNodeId("background"),n.states=(0,ha.Z)({},v2,null!=(t=i.state)?t:{}),e.insertBefore(n,e.firstChild)}let{labelHoverOnAxis:r}=this.attribute;r&&r.visible&&this.renderLabelHoverOnAxis()}renderLabelHoverOnAxis(){let e=new CL(Object.assign({},this.getLabelHoverOnAxisAttribute()));e.name=eF.title,e.id=this._getNodeId("hover-on-label"),this.labelHoverOnAxisGroup=e,this.axisContainer.add(e)}renderLine(e){let{start:t,end:i,line:r}=this.attribute,{startSymbol:n,endSymbol:l,style:o,state:a}=r,s=Object.assign({startSymbol:n,endSymbol:l,lineStyle:o},CK(r,["startSymbol","endSymbol","style","state"]));if(this._breaks&&this._breaks.length){let e=[],r=t;this._breaks.forEach(t=>{let{startPoint:i,endPoint:n}=t;e.push([r,i]),r=n}),e.push([r,i]),s.points=e,s.multiSegment=!0}else s.points=[t,i];(0,d$.Z)(a)||(s.state={line:(0,ha.Z)({},v2,a),symbol:(0,ha.Z)({},v2,a)});let h=new CP(s);h.name=eF.line,h.id=this._getNodeId("line"),e.add(h)}getTextAlign(e){let t="center";return(0,rN.Yt)(e[0],0)?(0,rN.Yt)(e[1],0)?Object.is(e[1],-0)?t="start":Object.is(e[0],-0)&&(t="end"):t="center":e[0]>0?t="start":e[0]<0&&(t="end"),t}getTitleAttribute(){var e,t,i;let r=this.attribute.title,{position:n="middle",space:l=4,textStyle:o={},autoRotate:a=!0,shape:s,background:h,state:d={},maxWidth:u}=r,c=CK(r,["position","space","textStyle","autoRotate","shape","background","state","maxWidth"]),p=.5;"start"===n?p=0:"end"===n&&(p=1);let{verticalFactor:g=1}=this.attribute,f=this.getTickCoord(p),m=this.getRelativeVector(),b=0;if((null==(e=this.attribute.label)?void 0:e.visible)&&!1===this.attribute.label.inside){let e=+(0,hH.Z)(this.attribute,"label.space",4);b+=e;let t=Object.keys(this.axisLabelLayerSize).length;if(0===m[1]){let i=this.axisLabelsContainer?this.axisLabelsContainer.AABBBounds.height():0;isFinite(i)?b+=i+(t-1)*e:b=0}else if(0===m[0])if(this.axisLabelsContainer&&this.axisLabelsContainer.AABBBounds&&!this.axisLabelsContainer.AABBBounds.empty()){let i=this.axisLabelLayerSize[0].labelPos,r=this.axisLabelsContainer.AABBBounds;b+=(1==-1*g?r.x2>i?Math.min(r.x2-i,r.width()):0:r.x1<i?Math.min(i-r.x1,r.width()):0)+(t-1)*e}else b=0;else Object.keys(this.axisLabelLayerSize).forEach((t,i)=>{b+=this.axisLabelLayerSize[t].width+(i>0?e:0)})}let y=0;(null==(t=this.attribute.tick)?void 0:t.visible)&&!1===this.attribute.tick.inside&&(y=this.attribute.tick.length||4),(null==(i=this.attribute.subTick)?void 0:i.visible)&&!1===this.attribute.subTick.inside&&(y=Math.max(y,this.attribute.subTick.length||2));let v=y+b+l,_=this.getActualOffset(v),C=this.getVerticalCoord(f,_,!1),x=this.getVerticalVector(_,!1,{x:0,y:0}),w,S,{angle:A}=c;if(w="start"===n?"start":"end"===n?"end":"center",(0,r5.Z)(A)&&a){A=_u(m,[1,0],!0);let{verticalFactor:e=1}=this.attribute;S=1==-1*e?"bottom":"top"}else w=this.getTextAlign(x),S=this.getTextBaseline(x,!1);let k=u;if((0,r5.Z)(k)){let{verticalLimitSize:e,verticalMinSize:t,orient:i}=this.attribute,r=Math.min(e||1/0,t||1/0);if((0,sD.Z)(r))if("bottom"===i||"top"===i)if(A!==Math.PI/2){let e=Math.abs(Math.cos(null!=A?A:0));k=e<1e-6?1/0:this.attribute.end.x/e}else k=r-_;else if(A&&0!==A){let e=Math.abs(Math.sin(A));k=e<1e-6?1/0:this.attribute.end.y/e}else k=r-_}let M=Object.assign(Object.assign(Object.assign({},C),c),{maxWidth:k,textStyle:Object.assign({textAlign:w,textBaseline:S},o),state:{text:(0,ha.Z)({},v2,d.text),shape:(0,ha.Z)({},v2,d.shape),panel:(0,ha.Z)({},v2,d.background)}});return M.angle=A,s&&s.visible&&(M.shape=Object.assign({visible:!0},s.style),s.space&&(M.space=s.space)),h&&h.visible&&(M.panel=Object.assign({visible:!0},h.style)),M}getLabelHoverOnAxisAttribute(){var e,t;let{orient:i}=this.attribute,r=this.attribute.labelHoverOnAxis,{position:n=0,space:l=4,autoRotate:o=!0,textStyle:a={},background:s={},formatMethod:h,text:d="",maxWidth:u}=r,c=CK(r,["position","space","autoRotate","textStyle","background","formatMethod","text","maxWidth"]),p=this.getTickCoord(0);"bottom"===i||"top"===i?p.x=n:p.y=n;let g=0;(null==(e=this.attribute.tick)?void 0:e.visible)&&!1===this.attribute.tick.inside&&(g=this.attribute.tick.length||4),(null==(t=this.attribute.subTick)?void 0:t.visible)&&!1===this.attribute.subTick.inside&&(g=Math.max(g,this.attribute.subTick.length||2));let f=g+0+l,m=this.getVerticalCoord(p,f,!1),b=this.getVerticalVector(f,!1,{x:0,y:0}),y,{angle:v}=c,_="center";if((0,r5.Z)(v)&&o){v=_u(this.getRelativeVector(),[1,0],!0);let{verticalFactor:e=1}=this.attribute;y=1==-1*e?"bottom":"top"}else{let{textAlign:e,textBaseline:t}=this.getLabelAlign(b,!1,a.angle);_=e,y=t}let C=h?h(d):d,x=Object.assign(Object.assign(Object.assign({},m),c),{maxWidth:u,textStyle:Object.assign({textAlign:_,textBaseline:y},a),text:C});return x.angle=v,s&&s.visible&&(x.panel=Object.assign(Object.assign({visible:!0},c.panel),s.style)),x}getTextBaseline(e,t){let i="middle",{verticalFactor:r=1}=this.attribute;return(0,rN.Yt)(e[1],0)?i=!(0,rN.Yt)(e[0],0)||Object.is(e[0],-0)||Object.is(e[1],-0)?"middle":1==(t?1:-1)*r?"bottom":"top":e[1]>0?i="top":e[1]<0&&(i="bottom"),i}getLabelAlign(e,t,i){let r=this.attribute.orient;if(["top","bottom","right","left"].includes(r)||0===e[0]&&0===e[1]){if("top"===r||"bottom"===r)return CG(t?"bottom"===r?"top":"bottom":r,i);if("left"===r||"right"===r)return CV(t?"left"===r?"right":"left":r,i)}return{textAlign:this.getTextAlign(e),textBaseline:this.getTextBaseline(e,t)}}beforeLabelsOverlap(e,t,i,r,n){var l,o,a,s;let{flush:h=!1}=this.attribute.label||{};if(h&&e.length){let{orient:t,start:i,end:r}=this.attribute,n="bottom"===t||"top"===t,h=e[0],d=(0,ag.Z$)(e),u=n?h.attribute.x>d.attribute.x:h.attribute.y<d.attribute.y;if(n){let e=u?d:h,t=u?h:d,n=i.x,a=r.x,s=e.AABBBounds.x1,c=t.AABBBounds.x2;s<n&&(e.attribute.angle?e.setAttributes({dx:(null!=(l=e.attribute.dx)?l:0)+n-s}):e.setAttributes({x:n,textAlign:"left"})),c>a&&(t.attribute.angle?t.setAttributes({dx:(null!=(o=t.attribute.dx)?o:0)+a-c}):t.setAttributes({x:a,textAlign:"right"}))}else{let e=u?d:h,t=u?h:d,n=e.AABBBounds.y2,l=t.AABBBounds.y1,o=i.y,c=r.y;l<o&&(t.attribute.angle?t.setAttributes({dy:(null!=(a=t.attribute.dy)?a:0)+o-l}):t.setAttributes({y:o,textBaseline:"top"})),n>c&&(e.attribute.angle?e.setAttributes({dy:(null!=(s=e.attribute.dy)?s:0)+c-n}):e.setAttributes({y:c,textBaseline:"bottom"}))}}}handleLabelsOverlap(e,t,i,r,n){if((0,d$.Z)(e))return;let{verticalLimitSize:l,label:o,orient:a}=this.attribute,s=this._getAxisLabelLimitLength(l,n),{layoutFunc:h,autoRotate:d,autoRotateAngle:u,autoLimit:c,limitEllipsis:p,autoHide:g,autoHideMethod:f,autoHideSeparation:m,lastVisible:b,firstVisible:y,autoWrap:v,overflowLimitLength:_}=o;if((0,nr.Z)(h))h(e,t,r,this);else{if(d)!function(e,t){if((0,d$.Z)(e))return;let{orient:i,labelRotateAngle:r=[0,45,90]}=t;if(0===r.length||e.some(e=>!!e.attribute.angle))return;let n=0,l=0,o=r;for(e.length>2&&("bottom"===i||"top"===i?Math.abs(e[1].attribute.x-e[0].attribute.x)<e[0].attribute.fontSize/2&&(o=[r[r.length-1]]):Math.abs(e[1].attribute.y-e[0].attribute.y)<e[0].attribute.fontSize/2&&(o=[r[r.length-1]])),o&&o.length>0&&(l=o.length);n<l;){var a,s;let t=o[n++];if(e.forEach(e=>{e.attribute.angle=(0,t9.M4)(t)}),a=i,s=e,"bottom"!==a&&"top"!==a||function(e,t){t.forEach(t=>{t.attribute.angle&&t.setAttributes(Object.assign(Object.assign({},CG(e,t.attribute.angle)),{angle:Cj(t.attribute.angle)}))})}(a,s),"left"!==a&&"right"!==a||function(e,t){t.forEach((t,i)=>{t.attribute.angle&&t.setAttributes(Object.assign(Object.assign({},CV(e,t.attribute.angle)),{angle:Cj(t.attribute.angle)}))})}(a,s),s.forEach(e=>{if(e.rotatedBounds||!e.attribute.angle)return;let t=function(e){let t=e.AABBBounds;return{x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,centerX:e.attribute.x,centerY:e.attribute.y,angle:e.attribute.angle}}(e),i=(0,ai.xj)({x:e.attribute.x,y:e.attribute.y},t.angle,{x:t.centerX,y:t.centerY}),r=i.x-t.centerX,n=i.y-t.centerY;t.x1+=r,t.x2+=r,t.y1+=n,t.y2+=n,t.centerX+=r,t.centerY+=n,e.rotatedBounds=t}),!function(e){for(let t=1;t<e.length;t++)if(function(e,t){var i,r;return(null==(i=e.OBBBounds)?void 0:i.empty())||(null==(r=t.OBBBounds)?void 0:r.empty())?(0,ai.SX)(e.AABBBounds,t.AABBBounds,!1)&&(!e.rotatedBounds||!t.rotatedBounds||(0,ai.nn)(e.rotatedBounds,t.rotatedBounds,!0)):e.OBBBounds.intersects(t.OBBBounds)}(e[t-1],e[t]))return!0;return!1}(e))break}}(e,{labelRotateAngle:u,orient:a});else if(v){let t="left"===a||"right"===a?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x);!function(e,t){let{limitLength:i,axisLength:r,ellipsis:n="...",orient:l}=t;if((0,d$.Z)(e)||!(0,sD.Z)(i))return;let o=e[0].attribute.angle,a=_m(o),s=_f(o),h="top"===l||"bottom"===l,d=r/e.length;e.forEach((t,r)=>{var l,o,u,c,p;if(h){if(s&&Math.floor(t.AABBBounds.height())<=i)return;if(a){let i=CU(t.attribute.x,null==(l=e[r+1])?void 0:l.attribute.x,null==(o=e[r-1])?void 0:o.attribute.x);(0,sD.Z)(i)&&(d=(0,t0.VV)(d,i))}}else{if(s){let i=CU(t.attribute.y,null==(u=e[r+1])?void 0:u.attribute.y,null==(c=e[r-1])?void 0:c.attribute.y);(0,sD.Z)(i)&&(d=(0,t0.VV)(d,i))}if(a&&Math.floor(t.AABBBounds.width())<=i)return}let g=null,f=null;h?s?(g=i,f=d):(g=d,f=i):s?(g=d,f=i):(g=i,f=d),t.setAttributes({maxLineWidth:g,ellipsis:null!=(p=t.attribute.ellipsis)?p:n,whiteSpace:"normal",heightLimit:f})})}(e,{orient:a,limitLength:s,axisLength:t,ellipsis:p})}if(!v&&c&&(0,sD.Z)(s)&&s>0){let t="left"===a||"right"===a,i=t?Math.abs(this.attribute.start.y-this.attribute.end.y):Math.abs(this.attribute.start.x-this.attribute.end.x),r=t?i/e.length:g||d?1/0:i/e.length;!function(e,t){var i;let{limitLength:r,verticalLimitLength:n,ellipsis:l="...",orient:o,axisLength:a}=t;if((0,d$.Z)(e)||!(0,sD.Z)(r))return;let s=(i=t.overflowLimitLength,(0,sD.Z)(i)?{left:i,right:i}:(0,r9.Z)(i)?{left:i.left||0,right:i.right||0}:{left:0,right:0}),h=e[0],d=h.attribute.angle,u=!(0,r5.Z)(d),c=u?Math.cos(d):1,p=u?Math.sin(d):0,g=_m(d),f=_f(d),m="top"===o||"bottom"===o,b=h.attribute.direction,y=!g&&!f&&m&&(e.length<2||e.some(e=>Math.abs(e.AABBBounds.width()-h.AABBBounds.width())>=2))&&h.AABBBounds.width()>Math.abs(r/p);e.forEach(e=>{var t;if(m&&(f&&Math.floor(e.AABBBounds.height())<=r||g&&Math.floor(e.AABBBounds.width())<=n))return;if(!m&&("vertical"===b&&Math.floor(e.AABBBounds.height())<=n||"vertical"!==b&&(g&&Math.floor(e.AABBBounds.width())<=r||f&&Math.floor(e.AABBBounds.height())<=n)))return;let i=null;if(g||f)i=m?g?n:r:"vertical"===b||f?n:r;else if(m){let{x1:t,x2:n}=e.AABBBounds,l=p/c,o=Math.abs(r/p);i=y&&l>0&&t<=a+s.right&&r/l+t>a+s.right?Math.min((a-t+s.right)/Math.abs(c),o):y&&l<0&&n>=-s.left&&r/l+n<-s.left?Math.min((n+s.left)/Math.abs(c),o):o}else i=Math.abs(r/c);(0,sD.Z)(e.attribute.maxLineWidth)&&(i=(0,sD.Z)(i)?Math.min(e.attribute.maxLineWidth,i):e.attribute.maxLineWidth),e.setAttributes({maxLineWidth:i,ellipsis:null!=(t=e.attribute.ellipsis)?t:l})})}(e,{limitLength:s,verticalLimitLength:r,ellipsis:p,orient:a,axisLength:i,overflowLimitLength:_})}g&&C$(e,{orient:a,method:f,separation:m,lastVisible:b,firstVisible:y})}}afterLabelsOverlap(e,t,i,r,n){let{verticalLimitSize:l,orient:o}=this.attribute,a="bottom"===o||"top"===o,s=i.AABBBounds,h=a?s.height():s.width(),{verticalMinSize:d}=this.attribute;if((0,sD.Z)(d)&&(!(0,sD.Z)(l)||d<=l)){let e,t;h=Math.max(h,this._getAxisLabelLimitLength(d,n)),"left"===o?(e=s.x2-h,t=s.y1):"right"===o?(e=s.x1,t=s.y1):"top"===o?(e=s.x1,t=s.y2-h):"bottom"===o&&(e=s.x1,t=s.y1);let r=oq.rect({x:e,y:t,width:a?s.width():h,height:a?h:s.height(),pickable:!1});r.name=eF.axisLabelBackground,r.id=this._getNodeId("axis-label-background"),i.insertBefore(r,i.firstChild)}if((0,oV.Z)(this.attribute.label.containerAlign)){var u,c,p;let t;"left"===o?t=s.x2-h:"right"===o?t=s.x1:"top"===o?t=s.y2-h:"bottom"===o&&(t=s.y1),u=t,c=h,p=this.attribute.label.containerAlign,"left"===o||"right"===o?"left"===p?e.forEach(e=>{var t;e.setAttributes({dx:(null!=(t=e.attribute.dx)?t:0)+u-e.AABBBounds.x1})}):"right"===p?e.forEach(e=>{var t;e.setAttributes({dx:(null!=(t=e.attribute.dx)?t:0)+u+c-e.AABBBounds.x2})}):"center"===p&&e.forEach(e=>{var t;e.setAttributes({dx:(null!=(t=e.attribute.dx)?t:0)+u+c/2-(e.AABBBounds.x1+e.AABBBounds.x2)/2})}):"bottom"!==o&&"top"!==o||("top"===p?e.forEach(e=>{var t;e.setAttributes({dy:(null!=(t=e.attribute.dy)?t:0)+u-e.AABBBounds.y1})}):"bottom"===p?e.forEach(e=>{var t;e.setAttributes({dy:(null!=(t=e.attribute.dy)?t:0)+u+c-e.AABBBounds.y2})}):"middle"===p&&e.forEach(e=>{var t;e.setAttributes({dy:(null!=(t=e.attribute.dy)?t:0)+u+c/2-(e.AABBBounds.y1+e.AABBBounds.y2)/2})}))}}_getAxisLabelLimitLength(e,t){var i,r,n,l,o;let{label:a,title:s,line:h,tick:d}=this.attribute,u=null!=(i=a.space)?i:4,c=e,p=0,g=0,f=h&&h.visible?null!=(r=h.style.lineWidth)?r:1:0,m=d&&d.visible?null!=(n=d.length)?n:4:0;if(s&&s.visible&&"string"==typeof s.text){p=pJ(s.text,s.textStyle,null==(o=null==(l=this.stage)?void 0:l.getTheme())?void 0:o.text).height;let e=(0,_6.o)(s.padding);g=s.space+e[0]+e[2]}return c&&(c=(c-u-g-p-f-m)/t),c}showLabelHoverOnAxis(e,t,i=!0){if(this.attribute.labelHoverOnAxis){let r=this.axisContainer.AABBBounds,n=r.width(),l=r.height(),o=r.x1,a=r.y1,s=r.x2,h=r.y2;if(this.labelHoverOnAxisGroup){let{formatMethod:i}=this.attribute.labelHoverOnAxis,r=i?i(t):t;this.labelHoverOnAxisGroup.setAttribute("text",r),this.labelHoverOnAxisGroup.setAttribute("visible",!0),this.labelHoverOnAxisGroup.setAttribute("visibleAll",!0),"left"===this.attribute.orient||"right"===this.attribute.orient?this.labelHoverOnAxisGroup.setAttributes({y:e}):this.labelHoverOnAxisGroup.setAttributes({x:e})}else this.attribute.labelHoverOnAxis.visible=!0,this.attribute.labelHoverOnAxis.position=e,this.attribute.labelHoverOnAxis.text=t,this.renderLabelHoverOnAxis();if(i){let i=this.axisContainer.AABBBounds,r=i.width()-n,d=i.height()-l;r>0&&("top"===this.attribute.orient||"bottom"===this.attribute.orient)&&(i.x1<o?this.showLabelHoverOnAxis(e+r,t,!1):i.x2>s&&this.showLabelHoverOnAxis(e-r,t,!1)),d>0&&("left"===this.attribute.orient||"right"===this.attribute.orient)&&(i.y1<a?this.showLabelHoverOnAxis(e+d,t,!1):i.y2>h&&this.showLabelHoverOnAxis(e-d,t,!1))}}}hideLabelHoverOnAxis(){this.attribute.labelHoverOnAxis&&this.labelHoverOnAxisGroup&&this.labelHoverOnAxisGroup.setAttributes({visible:!1,visibleAll:!1})}getActualOffset(e){let t=this.attribute.orient;return"left"===t||"right"===t?this.attribute.width?this.attribute.width:(this.attribute.maxWidth&&(e=Math.min(e,this.attribute.maxWidth)),this.attribute.minWidth&&(e=Math.max(e,this.attribute.minWidth)),e):e}release(){super.release(),this._breaks=null}}CX.defaultAttributes=_c,(0,gH.jB)(CX,_k);let CY={domainLine:{visible:!0},grid:{visible:!1},subGrid:{visible:!1},tick:{visible:!0},subTick:{visible:!1}},Cq={domainLine:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:{type:"palette",key:"axisGridColor"},strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,inside:!1,tickSize:4,alignWithLabel:!0,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},subTick:{visible:!1,tickSize:2,style:{lineWidth:1,stroke:{type:"palette",key:"axisDomainColor"},strokeOpacity:1}},label:{visible:!0,inside:!1,space:10,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}},title:{space:10,padding:0,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor"},fontWeight:"normal",fillOpacity:1}}},CJ={label:{space:8},title:{space:8},maxHeight:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}},CQ={label:{space:12,autoLimit:!0},title:{space:12,autoRotate:!0},maxWidth:"30%",unit:{visible:!1,style:{fontSize:{type:"token",key:"l5FontSize"},fill:{type:"palette",key:"axisLabelFontColor"},fontWeight:"normal",fillOpacity:1}}};class C0 extends _e{constructor(){super(...arguments),this.type=sc.cartesianBandAxis,this._scale=new cM.j}computeDomain(e){return this.computeBandDomain(e)}updateScaleRange(){let e=super.updateScaleRange();return this.updateGroupScaleRange(),e}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}axisHelper(){let e=(e=0)=>this._scales[e];return{isContinuous:!1,dataToPosition:this.dataToPosition.bind(this),getScale:e,getBandwidth:(t=0)=>e(t).bandwidth(),getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>this._inverse,getSpec:()=>this._spec}}registerTicksTransform(){let e=`${this.type}-ticks`;return hK(this._option.dataSet,e,_o),e}transformScaleDomain(){this.updateFixedWholeLength()}updateFixedWholeLength(){if(this._scale){let{bandSize:e,maxBandSize:t,minBandSize:i}=this._getOuterBandSizeFromSpec();if(e&&this._scale.bandwidth(e),t&&this._scale.maxBandwidth(t),i&&this._scale.minBandwidth(i),this._scale.isBandwidthFixed()&&this._spec.autoRegionSize&&(e||t)){let i=(0,y6.$l)(this._scale.domain().length,null!=e?e:t,this._scale.paddingInner(),this._scale.paddingOuter());["bottom","top"].includes(this._orient)?this._regions.forEach(e=>e.setMaxWidth(i)):["left","right"].includes(this._orient)&&this._regions.forEach(e=>e.setMaxHeight(i))}}}_getOuterBandSizeFromSpec(){var e;let{bandSize:t,maxBandSize:i,minBandSize:r,bandSizeLevel:n=0}=this._spec,{gap:l,extend:o=0}=null!=(e=this._spec.bandSizeExtend)?e:{};n=Math.min(n,this._scales.length-1);for(let e=n;e>0;e--){let a=this._scales[e],s=a.domain(),h=a.paddingInner(),d=a.paddingOuter(),u=t=>{let i=e===n?o:0;return(0,r5.Z)(l)||e<n?(0,y6.$l)(s.length,t,h,d)+i:(t+((0,r6.Z)(l)?t*(Number(l.substring(0,l.length-1))/100):l))*s.length/(this._scales[e-1].paddingInner()+1)+i};(0,oV.Z)(t)&&(t=u(t)),(0,oV.Z)(i)&&(i=u(i)),(0,oV.Z)(r)&&(r=u(r))}return{bandSize:t,maxBandSize:i,minBandSize:r}}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(null==t?void 0:t.showAllGroupLayers)===(null==e?void 0:e.showAllGroupLayers)&&(0,dN.X)(null==t?void 0:t.layers,null==e?void 0:e.layers)||(i.reMake=!0),i}reInit(e){super.reInit(),null==this||this._updateData()}}C0.type=sc.cartesianBandAxis,C0.specKey="axes",C0.builtInTheme={axis:Cq,axisBand:CY,axisX:CJ,axisY:CQ},(0,gH.jB)(C0,_t);let C1=()=>{hp.registerGraphicComponent(eI.lineAxis,(e,t)=>new CX(e,t)),hp.registerGraphicComponent(eL.lineAxisGrid,(e,t)=>new _5(e,t)),v6(),hp.registerComponent(C0.type,C0,!1)};function C2(e){let t=[];for(let i=0;i<e.length;i++){let r=e[i];0!==i&&r[0]===t[t.length-1]||t.push(r[0]),t.push(r[1])}return t}function C3(e,t,i){let r=e.indexOf(t),n=e.indexOf(i);r>=0&&n>=0&&r<n&&(e.splice(r,1),e.splice(n,0,t))}let C4=(e,t,i)=>i.reduce((e,r,n)=>(e.push([r,i.length===n+1?t:i[n+1]]),e),[[e,i[0]]]),C5=(e,t)=>e-t,C6=(e,t)=>{let i=[{count:0,sub:[],max:t[0],min:t[0]}],r=0,n=0;for(;r<t.length;)e[n]<=t[r]?(i[r].count+=1,i[r].sub.push(e[n]),n+=1):i[r+=1]={count:0,sub:[],max:t[r],min:t[r]};i.forEach(e=>{e.count&&(e.min=Math.min.apply(null,e.sub))});let l=e.slice(n);return i[r]={count:l.length,sub:l,min:t[t.length-1],max:Math.max.apply(null,l)},i},C8=Math.sqrt(50),C7=Math.sqrt(10),C9=Math.sqrt(2);class xe{constructor(){this._extend={},this._rawDomain=[],this.niceLabelFormatter=null}getRawDomain(){return this._rawDomain}setExtraAttrFromSpec(){(0,oV.Z)(this._spec.nice)&&(this._nice=this._spec.nice),(0,oV.Z)(this._spec.zero)&&(this._zero=this._spec.zero),this._expand=this._spec.expand,this._domain=vT(this._spec)}transformScaleDomain(){this.setScaleNice()}setLinearScaleNice(){var e;if(!this._nice)return!1;let t=5,i=this._spec.tick||{};if((0,sD.Z)(i.forceTickCount))t=i.forceTickCount;else if((0,nr.Z)(i.tickCount)){let e=this._scale.range(),r=Math.abs((0,ag.Z$)(e)-e[0]);1===r&&this._option&&(r=ve(this._orient)?this._option.getChartViewRect().width:this._option.getChartViewRect().height),t=i.tickCount({axisLength:r,labelStyle:this._spec.label&&this._spec.label.style})}else t=(0,sD.Z)(i.tickCount)?i.tickCount:5;"accurateFirst"===this._spec.niceType&&(t=Math.max(5,t));let{min:r,max:n}=null!=(e=this._domain)?e:{};return(0,r5.Z)(r)&&(0,r5.Z)(n)&&(0,r5.Z)(this._softMaxValue)&&(0,r5.Z)(this._softMinValue)?this._scale.nice(t):((0,oV.Z)(r)||(0,oV.Z)(this._softMinValue))&&(0,r5.Z)(n)&&(0,r5.Z)(this._softMaxValue)?this._scale.niceMax(t):!(!(0,r5.Z)(r)||!(0,r5.Z)(this._softMinValue)||!(0,oV.Z)(n)&&!(0,oV.Z)(this._softMaxValue))&&this._scale.niceMin(t)}setLogScaleNice(){var e;if(!this._nice)return!1;let{min:t,max:i}=null!=(e=this._domain)?e:{};return(0,r5.Z)(t)&&(0,r5.Z)(i)&&(0,r5.Z)(this._softMaxValue)&&(0,r5.Z)(this._softMinValue)?this._scale.nice():((0,oV.Z)(t)||(0,oV.Z)(this._softMinValue))&&(0,r5.Z)(i)&&(0,r5.Z)(this._softMaxValue)?this._scale.niceMax():!(!(0,r5.Z)(t)||!(0,r5.Z)(this._softMinValue)||!(0,oV.Z)(i)&&!(0,oV.Z)(this._softMaxValue))&&this._scale.niceMin()}setScaleNice(){return"log"===this._spec.type?this.setLogScaleNice():this.setLinearScaleNice()}dataToPosition(e,t){return this.valueToPosition(e[0])}valueToPosition(e){return this._scale.scale(e)}computeLinearDomain(e){let t=[];if(e.length){let l=this._spec.breaks&&this._spec.breaks.length,o,a,s=[];if(e.forEach(e=>{let{min:t,max:i}=e;o=void 0===o?t:Math.min(o,t),a=void 0===a?i:Math.max(a,i),l&&(s=s.concat(e.values))}),l){let e=[],l=[],h=(0,r5.Z)(this._domain.max)?a:this._domain.max;for(let t=0;t<this._spec.breaks.length;t++){let{range:i}=this._spec.breaks[t];i[0]<=i[1]&&i[1]<=h&&(e.push(i),l.push(this._spec.breaks[t]))}if(e.sort((e,t)=>e[0]-t[0]),e.length){var i,r,n;let{domain:o,scope:a}=(i=s,r=C2(e),n=this._spec.breaks[0].scopeType,i.sort(C5),r.sort(C5),{domain:function(e,t){let i=e[0],r=e[e.length-1],n=t.filter(e=>e>i&&e<r);return 0===n.length?[[i,r]]:C4(i,r,n)}(i,r),scope:function(e,t,i="count"){let r=C6(e,t),n="count"===i?e.length:r.reduce((e,t,i)=>t.count>0?e+t.max-t.min:e,0),l=[],o=0,a=0;return r.forEach((e,t)=>{if(0===n)l.push([0,t/r.length-1]);else{let s="count"===i?e.count:e.max-e.min,h=l[a-1]?l[a-1][1]:0,d=t===r.length-1?1:Math.min((o+s)/n,1);(h!==d||0!==h&&1!==h)&&(a+=1,l.push([h,d]),o+=s)}}),l}(i,r,n)});t=C2(o),this._break={domain:o,scope:a,breakDomains:e,breaks:l}}else t=[o,a]}else t=[o,a]}else t[0]=0,t[1]=0;return this.setSoftDomainMinMax(t),this.expandDomain(t),this.includeZero(t),this.setDomainMinMax(t),t}expandDomain(e){if(!this._expand)return;let t=e[0],i=(0,ag.Z$)(e);t===i&&(0===i?i=1:i>0?t=0:i<0&&(i=0)),(0,oV.Z)(this._expand.min)&&(e[0]=t-(i-t)*this._expand.min),(0,oV.Z)(this._expand.max)&&(e[e.length-1]=i+(i-t)*this._expand.max)}niceDomain(e){let{min:t,max:i}=vT(this._spec);if((0,oV.Z)(t)||(0,oV.Z)(i)||"linear"!==this._spec.type)return e;if(1e-12>=Math.abs((0,ag.iH)(e)-(0,ag.CE)(e))){let t=e[0],i=t>=0?1:-1;if((t=Math.abs(t))<1)e[0]=0,e[e.length-1]=1;else{let i=t/5,r=Math.floor(Math.log(i)/Math.LN10),n=i/Math.pow(10,r);i=(n>=C8?10:n>=C7?5:n>=C9?2:1)*Math.pow(10,r),e[0]=0,e[e.length-1]=10*i}i<0&&(e.reverse(),e[0]*=-1,e[e.length-1]*=-1)}return e}includeZero(e){this._zero&&(e[0]=Math.min(e[0],0),e[e.length-1]=Math.max((0,ag.Z$)(e),0))}setExtendDomain(e,t){if(void 0===t)return void delete this._extend[e];this._extend[e]=t;let i=this._scale.domain();this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this._nice),this._nice&&(this.setScaleNice()||this._scale.rescale()),this.event.emit(N.scaleUpdate,{model:this,value:"domain"})}extendDomain(e){let t,i=e.length-1,r=e[0]-e[i]>0,n=r?i:0,l=r?0:i;for(let i in this._extend)(t=this._extend[i])>e[l]&&(e[l]=t),t<e[n]&&(e[n]=t)}getDomainSpec(){return this._domain}setDomainMinMax(e){if(!this._domain)return;let{min:t,max:i}=this._domain;(0,oV.Z)(t)&&(e[0]=t),(0,oV.Z)(i)&&(e[e.length-1]=i)}setSoftDomainMinMax(e){let{softMin:t,softMax:i}=this._spec;if((0,oV.Z)(t)){let i=(0,nr.Z)(t)?t(e):t;(0,r5.Z)(i)&&(i=e[0]),i<=e[0]&&(e[0]=i,this._softMinValue=i)}if((0,oV.Z)(i)){let t=(0,nr.Z)(i)?i(e):i;(0,r5.Z)(t)&&(t=(0,ag.Z$)(e)),t>=(0,ag.Z$)(e)&&(e[e.length-1]=t),this._softMaxValue=t}}setZero(e){this._zero!==e&&(this._zero=e,this.updateScaleDomain())}updateScaleDomain(){var e;if(!this.isSeriesDataEnable())return;(null==(e=this._rawDomain)?void 0:e.length)||!this._scale||this._updateRawDomain();let t=this.collectData(),i=this.computeLinearDomain(t);this.updateScaleDomainByModel(i)}updateScaleDomainByModel(e){e=null!=e?e:this._scale.domain(),this.extendDomain(e),this.includeZero(e),this.setDomainMinMax(e),this.niceDomain(e),this._scale.domain(e,this._nice),this._nice&&(this.setScaleNice()||this._scale.rescale()),this._updateNiceLabelFormatter(e),this._domainAfterSpec=this._scale.domain(),this.event.emit(N.scaleDomainUpdate,{model:this}),this.event.emit(N.scaleUpdate,{model:this,value:"domain"})}getDomainAfterSpec(){return this._domainAfterSpec}_updateNiceLabelFormatter(e){let t=Math.pow(10,Math.max(-Math.floor(Math.log10(Math.abs((0,ag.Z$)(e)-e[0]))),0)+2);this.niceLabelFormatter=e=>(0,sD.Z)(+e)?Math.round(e*t)/t:e}_updateRawDomain(){let e=this.collectData(0,!0),t=this.computeLinearDomain(e);this._rawDomain=t,this.event.emit(N.scaleRawDomainUpdate,{model:this})}_clearRawDomain(){this._rawDomain=[]}}function xt(e,t,i,r){let n,{breakData:l}=e;if(l&&l()){let{breakDomains:e}=l(),o=t.domain();n=[];for(let t=0;t<o.length-1;t++)r(i,[o[t],o[t+1]]).forEach(t=>{e.some(e=>t>=e[0]&&t<=e[1])||n.push(t)});t.domain(o)}else n=r(i);return n}function xi(e,t,i,r,n=!1){if(i&&!t.includes(e)){let i=t.length;if(i>1){n?t.push(e):t.unshift(e);for(let e=0;e<i;e++){let l=n?i-1-e:e;if(!r(t[l]))break;t.splice(l,1),e--,i--}}}}let xr=(e,t)=>{var i,r,n,l,o,a;let s;if(!(0,cz.z2)(e.type))return vg(e.domain());let h=e.range(),d=Math.abs(h[h.length-1]-h[0]);if(d<2)return vg([e.domain()[0]]);let{tickCount:u,forceTickCount:c,tickStep:p,noDecimals:g=!1,labelStyle:f,breakData:m}=t;if((0,oV.Z)(p))o=e.stepTicks(p),s=(a=m&&m()?m().breakDomains:null)&&a.length?o.filter(e=>a.every(t=>e<t[0]||e>t[1])):o;else if((0,oV.Z)(c))s=xt(t,e,c,(t,i)=>i&&i.length?e.domain(i,!0).forceTicks(t):e.forceTicks(t));else if("d3"===t.tickMode)s=xt(t,e,null!=(i=(0,nr.Z)(u)?u({axisLength:d,labelStyle:f}):u)?i:5,(t,i)=>i&&i.length?e.domain(i,!0).d3Ticks(t,{noDecimals:g}):e.d3Ticks(t,{noDecimals:g}));else{let i=null!=(r=(0,nr.Z)(u)?u({axisLength:d,labelStyle:f}):u)?r:5,n=(0,nr.Z)(t.tickMode)?t.tickMode:void 0;s=xt(t,e,i,(t,i)=>i&&i.length?e.domain(i,!0).ticks(t,{noDecimals:g,customTicks:n}):e.ticks(t,{noDecimals:g,customTicks:n}))}let b=e.domain();if(t.labelFirstVisible&&b[0]!==s[0]&&!s.includes(b[0])&&s.unshift(b[0]),t.labelLastVisible&&b[b.length-1]!==s[s.length-1]&&!s.includes(b[b.length-1])&&s.push(b[b.length-1]),t.sampling&&s.length>1&&("cartesian"===t.coordinateType||"polar"===t.coordinateType&&"radius"===t.axisOrientType)){let i,{labelGap:r=4,labelFlush:o}=t;if(6*s.length>d){let r=[],l=Math.floor(6*s.length/d);s.forEach((e,t)=>{t%l!=0&&t!==s.length-1||r.push(e)}),i=null==(n=vb(e,r,t))?void 0:n.map((e,t)=>({AABBBounds:e,value:r[t]}))}else i=null==(l=vb(e,s,t))?void 0:l.map((e,t)=>({AABBBounds:e,value:s[t]}));if(i){let e=i[0],n=(0,ag.Z$)(i),l=m&&m()?xn.greedy:xn.parity;for(;i.length>=3&&_w(i,r);)i=l(i,r);let a=t.labelFirstVisible,h=t.labelLastVisible;_x(e,n,r)&&i.includes(n)&&i.length>1&&a&&h&&(i.splice(i.indexOf(n),1),h=!1),xi(e,i,a,t=>_x(t,e,r)),xi(n,i,h,t=>_x(t,n,r)||!(!a||t===e)&&_x(t,e,r),!0);let d=i.map(e=>e.value);d.length<3&&o&&(d.length>1&&d.pop(),(0,ag.Z$)(d)!==(0,ag.Z$)(s)&&d.push((0,ag.Z$)(s))),s=d}}return vg(s)},xn={parity:function(e){return e.filter((e,t)=>t%2==0)},greedy:function(e,t){let i;return e.filter((e,r)=>(!r||!_x(i,e,t))&&(i=e,!0))}},xl={domainLine:{visible:!1},grid:{visible:!0},subGrid:{visible:!1},tick:{visible:!1},subTick:{visible:!1}};class xo extends _e{constructor(){super(...arguments),this.type=sc.cartesianLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new ck.f}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.setExtraAttrFromSpec();let i=null==(t=null==(e=this._tickData)?void 0:e[0])?void 0:t.getDataView().transformsArr.find(e=>e.type===this.registerTicksTransform());i&&(i.options=this._tickTransformOption())}initScales(){var e,t;super.initScales();let i=[0,1];(0,oV.Z)(null==(e=this._domain)?void 0:e.min)&&(i[0]=this._domain.min),(0,oV.Z)(null==(t=this._domain)?void 0:t.max)&&(i[1]=this._domain.max),this._scale.domain(i)}_tickTransformOption(){var e;return Object.assign(Object.assign({},super._tickTransformOption()),{breakData:(null==(e=this._spec.breaks)?void 0:e.length)?()=>this._break:null})}_getUpdateAttribute(e){var t,i;let r=super._getUpdateAttribute(e);if(!vi(this._orient)&&(null==(i=null==(t=this._break)?void 0:t.breaks)?void 0:i.length)){let{width:e,height:t}=this.getLayoutRect(),i=ve(this._orient),n=i?e:t;r.breaks=this._break.breaks.map(e=>{let t,{range:r,breakSymbol:l,gap:o=6}=e,a=this.valueToPosition((r[0]+r[1])/2)/n;t=sN(o)?Number(o.substring(0,o.length-1))/100:o/n;let s=(0,sD.Z)(null==l?void 0:l.angle)?l.angle:i?60:15;return{range:[a-t/2,a+t/2],breakSymbol:Object.assign(Object.assign({visible:!0},l),{angle:s*Math.PI/180}),rawRange:r}})}return r}getNewScaleRange(){var e,t;let i=super.getNewScaleRange();return(null==(e=this._spec.breaks)?void 0:e.length)&&(null==(t=this._break)?void 0:t.scope)&&(i=C2(this._break.scope).map(e=>i[0]+((0,ag.Z$)(i)-i[0])*e)),i}computeDomain(e){return this.computeLinearDomain(e)}axisHelper(){let e=super.axisHelper();return e.setExtendDomain=this.setExtendDomain.bind(this),e.valueToPosition=this.valueToPosition.bind(this),e}registerTicksTransform(){let e=`${this.type}-ticks`;return hK(this._option.dataSet,e,xr),e}}xo.type=sc.cartesianLinearAxis,xo.specKey="axes",xo.builtInTheme={axis:Cq,axisLinear:xl,axisX:CJ,axisY:CQ},(0,gH.jB)(xo,xe);let xa=()=>{hp.registerGraphicComponent(eI.lineAxis,(e,t)=>new CX(e,t)),hp.registerGraphicComponent(eL.lineAxisGrid,(e,t)=>new _5(e,t)),v6(),hp.registerComponent(xo.type,xo)},xs=`${dg}_hide_`;function xh(e,t){e.context.finalAttrs&&(e.context.finalAttrs.visible=t)}let xd=(e,t)=>{if(!t||0===t.length)return t;let{direction:i,delta:r,deltaMul:n=1,groupBy:l}=e,o=t=>{t.forEach(e=>{e[xs]&&(xh(e,!0),e[xs]=!1)});let l=e.sort?t.slice().sort((e,t)=>e.context.finalAttrs.x-t.context.finalAttrs.x):t;0===i?function(e,t,i){let r=-1/0,n=0,l=0,o=(0,r5.Z)(t),a=t;e.forEach(e=>{if(!1===e.context.finalAttrs.visible)return;let t=e.context.finalAttrs.size/2,{x:l,y:s}=e.context.finalAttrs;o&&(a=(t+n)*i),(-1/0-l)**2+(r-s)**2<(a+n+t)**2?e.context.finalAttrs.forceShow||(e[xs]=!0,xh(e,!1)):r=s,n=t})}(l,r,n):1===i?function(e,t,i){let r=-1/0,n=0,l=(0,r5.Z)(t),o=t;e.forEach(e=>{if(!1===e.context.finalAttrs.visible)return;let t=e.context.finalAttrs.size/2,a=e.context.finalAttrs.x;l&&(o=(t+n)*i),Math.abs(a-r)<o+n+t?e.context.finalAttrs.forceShow||(e[xs]=!0,xh(e,!1)):r=a,n=t})}(l,r,n):function(e,t,i){let r=-1/0,n=0,l=(0,r5.Z)(t),o=t;e.forEach(e=>{if(!1===e.context.finalAttrs.visible)return;let t=e.context.finalAttrs.size/2,a=e.context.finalAttrs.y;l&&(o=(t+n)*i),Math.abs(a-r)<o+n+t?e.context.finalAttrs.forceShow||(e[xs]=!0,xh(e,!1)):r=a,n=t})}(l,r,n)};if(l){let e=t.reduce((e,t)=>{var i,r;let n=null==(r=null==(i=t.context.data)?void 0:i[0])?void 0:r[l];return e[n]?e[n].push(t):e[n]=[t],e},{});Object.keys(e).forEach(t=>{o(e[t])})}else o(t);return t},xu=()=>{hp.registerGrammarTransform("symbolOverlap",{transform:xd,runType:"afterEncode"})},xc={min:ag.iH,max:ag.CE,average:mH,sum:mF};function xp(e,t,i,r){let n=Math.floor(t.length/e),l=[],o=t.length,a,s,h,d=0,u=0;l[u++]=d;for(let e=1;e<o-1;e+=n){let i=Math.min(e+n,o-1),c=Math.min(e+2*n,o),p=(c+i)/2,g=0;for(let e=i;e<c;e++){let i=t[e][r];Number.isNaN(i)||(g+=i)}g/=c-i;let f=e,m=Math.min(e+n,o),b=e-1,y=t[d][r];a=-1,h=f;for(let e=f;e<m;e++){let i=t[e][r];Number.isNaN(r)||(s=Math.abs((b-p)*(i-y)-(b-e)*(g-y)))>a&&(a=s,h=e)}l[u++]=h,d=h}return l[u-1]!==o-1&&(l[u++]=o-1),l.map(e=>i?t[e].i:e)}function xg(e,t,i,r,n){let l=Math.floor(t.length/e),o=[],a=t.length,s=0,h=[];o.push(s),t[s][n]=t[s][n];for(let e=1;e<a-1;e+=l){l>a-e&&(l=a-e,h.length=l),h=[];for(let i=0;i<l;i++)h.push(t[e+i][n]);let i=xc[r](h);t[s=Math.min(Math.round(e+h.length/2)||0,a-1)][n]=i,o.push(s)}return o.map(e=>i?t[e].i:e)}function xf(e,t,i,r){return xg(e,t,i,"min",r)}function xm(e,t,i,r){return xg(e,t,i,"max",r)}function xb(e,t,i,r){return xg(e,t,i,"average",r)}function xy(e,t,i,r){return xg(e,t,i,"sum",r)}let xv=(e,t)=>{let i=(0,nr.Z)(e.size)?e.size():e.size,r=e.factor||1;if(Array.isArray(i)&&(i=Math.floor(i[1]-i[0])),(i*=r)<=0)return[];if(t.length<=i)return t;if(e.skipfirst)return t.slice(0,1);let{mode:n,yfield:l,groupBy:o}=e,a=null!=l?l:"y",s=xp;if("min"===n?s=xf:"max"===n?s=xm:"average"===n?s=xb:"sum"===n&&(s=xy),t.length){let e={};if(o){for(let i=0,r=t.length;i<r;i++){let r=t[i],n=r[o];e[n]||(e[n]=[]),e[n].push({[a]:r[a],i:i})}let r=[];return Object.keys(e).forEach(n=>{let l=e[n];if(l.length<=i){let e=l.map(e=>e.i);r=r.concat(e)}else{let e=s(i,l,!0,a);r=r.concat(e),l.forEach(e=>t[e.i][a]=e[a])}}),r.sort((e,t)=>e-t),r.map(e=>t[e])}return s(i,t,!1,a).map(e=>t[e])}return[]},x_=()=>{hp.registerGrammarTransform("dataSampling",{transform:xv})};class xC extends bA{constructor(){super(...arguments),this.type=z.line,this.transformerConstructor=y5,this._sortDataByAxis=!1}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}initMark(){var e;let t=null!=(e=this._spec.seriesMark)?e:"line";this.initLineMark("line"===t),this.initSymbolMark("point"===t)}initTooltip(){super.initTooltip();let{group:e,mark:t}=this._tooltipHelper.activeTriggerSet;this._lineMark&&e.add(this._lineMark),this._symbolMark&&(t.add(this._symbolMark),e.add(this._symbolMark))}initMarkStyle(){this.initLineMarkStyle(this._direction),this.initSymbolMarkStyle()}initAnimation(){var e,t,i,r;let n={direction:this.direction},l=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;if(this._lineMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("line"))?void 0:i(n,l),bf("line",this._spec,this._markAttributeContext))),this._symbolMark){let e=bS(this);this._symbolMark.setAnimationConfig(bg(null==(r=hp.getAnimationInKey("scaleInOut"))?void 0:r(),bf("point",this._spec,this._markAttributeContext),e))}}onLayoutEnd(){super.onLayoutEnd(),this.reCompileSampling()}getSeriesStyle(e){var t;let i="point"!==(null==(t=this._spec)?void 0:t.seriesMark);return t=>{var r,n;return i&&"fill"===t&&(t="stroke"),null!=(n=null==(r=this._seriesMark)?void 0:r.getAttribute(t,e))?n:void 0}}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._lineMark,this._symbolMark]}}xC.type=z.line,xC.mark=bE,xC.builtInTheme={line:{label:{visible:!1,position:"top",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}}},xC.transformerConstructor=y5,(0,gH.jB)(xC,bR);let xx=()=>{x_(),xu(),y2(),y4(),ms(),mn(),C1(),xa(),hp.registerSeries(xC.type,xC)},xw=(e,t)=>{var i;let{regionId:r,regionIndex:n}=e.spec;if((0,oV.Z)(r)){let e=(0,ag.IX)(r);return null==(i=t.region)?void 0:i.filter(({spec:t})=>e.includes(t.id))}if((0,oV.Z)(n))return(0,ag.IX)(n).map(e=>{var i;return null==(i=t.region)?void 0:i[e]}).filter(oV.Z)},xS=(e,t)=>{var i;let{seriesId:r,seriesIndex:n}=e.spec;if((0,oV.Z)(r)){let e=(0,ag.IX)(r);return null==(i=t.series)?void 0:i.filter(({spec:t})=>e.includes(t.id))}if((0,oV.Z)(n))return(0,ag.IX)(n).map(e=>{var i;return null==(i=t.series)?void 0:i[e]}).filter(oV.Z)};class xA{constructor(e){this._option=e,this.type=e.type,this.seriesType=e.seriesType}initChartSpec(e){return this.transformSpec(e),this.transformModelSpec(e)}transformSpec(e){e.region&&0!==e.region.length||(e.region=[{}]),void 0===e.tooltip&&(e.tooltip={}),(0,oV.Z)(e.stackInverse)&&e.region.forEach(t=>{(0,oV.Z)(t.stackInverse)||(t.stackInverse=e.stackInverse)}),(0,oV.Z)(e.stackSort)&&e.region.forEach(t=>{(0,oV.Z)(t.stackSort)||(t.stackSort=e.stackSort)})}generateTransform(e,t){return(i,r,n)=>{let{spec:l,specPath:o,specInfoPath:a,type:s}=r,h=new i.transformerConstructor(Object.assign(Object.assign({},this._option),{type:s})),d=h.transformSpec(l,e,n),u=Object.assign(Object.assign({},r),d);t?u.theme=h.getTheme(l,e):ch(e,o,d.spec),ch(n,null!=a?a:o,u)}}transformModelSpec(e){return this.createSpecInfo(e,this.generateTransform(e,!1))}createSpecInfo(e,t){var i,r;t||(t=this.generateTransform(e,!0));let n={};return this.forEachRegionInSpec(e,t,n),this.forEachSeriesInSpec(e,t,n),null==(i=n.series)||i.forEach((e,t)=>{var i,r;let l=(null!=(r=null!=(i=xw(e,n))?i:n.region)?r:[])[0];l&&(l.seriesIndexes||(l.seriesIndexes=[]),l.seriesIndexes.push(t),e.regionIndexes=l.regionIndexes.slice())}),this.forEachComponentInSpec(e,t,n),Object.values(null!=(r=n.component)?r:{}).forEach(e=>e.forEach((e,t)=>{var i,r,l;if(e){if(!e.regionIndexes){let t=null!=(r=null!=(i=xw(e,n))?i:n.region)?r:[];e.regionIndexes=t.map(e=>e.regionIndexes[0])}if(!e.seriesIndexes){let t=xS(e,n);if(t)e.seriesIndexes=t.map(({seriesIndexes:e})=>e[0]);else{let t=new Set;(null!=(l=e.regionIndexes)?l:[]).forEach(e=>{var i,r;let l=null==(i=n.region)?void 0:i[e];null==(r=null==l?void 0:l.seriesIndexes)||r.forEach(e=>t.add(e))}),e.seriesIndexes=Array.from(t)}}}})),n}_isValidSeries(e){return!0}_getDefaultSeriesSpec(e,t,i){var r,n,l,o,a;let s={dataKey:e.dataKey,hover:e.hover,select:e.select,label:e.label,seriesStyle:e.seriesStyle,animation:null!=(r=e.animation)?r:null==(n=this._option.globalInstance)?void 0:n.isAnimationEnable(),animationThreshold:null!=(l=e.animationThreshold)?l:null==(a=(o=this._option).getTheme)?void 0:a.call(o,"animationThreshold"),animationAppear:e.animationAppear,animationDisappear:e.animationDisappear,animationEnter:e.animationEnter,animationUpdate:e.animationUpdate,animationExit:e.animationExit,animationNormal:e.animationNormal,animationState:e.animationState,extensionMark:e.extensionMark,large:e.large,largeThreshold:e.largeThreshold,progressiveStep:e.progressiveStep,progressiveThreshold:e.progressiveThreshold,background:e.seriesBackground,invalidType:e.invalidType,seriesField:e.seriesField,morph:e.morph,interactions:e.interactions},h=this.seriesType;return h&&(s.type=h,s[h]=e[h]),t&&t.length&&t.forEach(t=>{s[t]=e[t]}),i&&i.length&&i.forEach(t=>{s[t]=e[t]}),s}forEachRegionInSpec(e,t,i){var r;return(null!=(r=e.region)?r:[]).map((e,r)=>t(hp.getRegionInType("region"),{spec:e,specPath:["region",r],type:"region",regionIndexes:[r]},i))}forEachSeriesInSpec(e,t,i){var r;return(null!=(r=e.series)?r:[]).map((e,r)=>t(hp.getSeriesInType(e.type),{spec:e,specPath:["series",r],type:e.type,seriesIndexes:[r]},i))}forEachComponentInSpec(e,t,i){var r,n,l;let o,a,s,h,d=[],u=hp.getComponents(),c=[];for(let t=0;t<u.length;t++){let{cmp:i,alwaysCheck:n}=u[t];i.type.startsWith(sc.cartesianAxis)?o=i:i.type.startsWith(sc.polarAxis)?a=i:i.type===sc.geoCoordinate?s=i:(n||e[null!=(r=i.specKey)?r:i.type])&&(i.type===sc.tooltip?h=i:c.push(u[t]))}let p=!1;if(o){let r=o.getSpecInfo(e,i);(null==r?void 0:r.length)>0&&(p=!0,r.forEach(e=>{let r=hp.getComponentInKey(e.type);d.push(t(r,e,i))}))}if(a&&!p){let r=a.getSpecInfo(e,i);(null==r?void 0:r.length)>0&&(p=!0,r.forEach(e=>{let r=hp.getComponentInKey(e.type);d.push(t(r,e,i))}))}return s&&!p&&(null==(n=s.getSpecInfo(e,i))||n.forEach(e=>{d.push(t(s,e,i))})),c.sort((e,t)=>e.createOrder-t.createOrder),c.forEach(({cmp:r})=>{var n;null==(n=r.getSpecInfo?r.getSpecInfo(e,i):mX(e,r.specKey,r.type))||n.forEach(e=>{d.push(t(r,e,i))})}),h&&(null==(l=mX(e,h.specKey,h.type))||l.forEach(e=>{d.push(t(h,e,i))})),d}transformSeriesSpec(e){let t=this._getDefaultSeriesSpec(e);e.series&&0!==e.series.length?e.series.forEach(e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach(i=>{i in e||(e[i]=t[i])})}):e.series=[t]}_findBandAxisBySeries(e,t,i){let r="horizontal"===(null==e?void 0:e.direction)?["left","right"]:["top","bottom"];return i.find(i=>!!r.includes(i.orient)&&((0,oV.Z)(i.seriesId)?(0,ag.IX)(i.seriesId).includes(null==e?void 0:e.id):(0,oV.Z)(i.seriesIndex)?(0,ag.IX)(i.seriesIndex).includes(t):i.type,!0))}_applyAxisBandSize(e,t,i){let{barMaxWidth:r,barMinWidth:n,barWidth:l,barGapInGroup:o}=i,a=!1;(0,nw.Z)(n)?(e.minBandSize=n,a=!0):(0,nw.Z)(l)?(e.minBandSize=l,a=!0):(0,nw.Z)(r)&&(e.minBandSize=r,a=!0),a&&(e.bandSizeLevel=Number.MAX_VALUE,e.bandSizeExtend={extend:t,gap:(0,ri.Z)(o)?o[o.length-1]:o})}}class xk extends xA{needAxes(){return!0}_isValidSeries(e){return!this.seriesType||e===this.seriesType}_getDefaultSeriesSpec(e,t){return super._getDefaultSeriesSpec(e,["xField","yField","zField","direction","stack","percent","stackOffsetSilhouette","totalLabel","sortDataByAxis"],t)}transformSpec(e){super.transformSpec(e),super.transformSeriesSpec(e),this._transformAxisSpec(e)}_setDefaultXAxisSpec(e){return{orient:"bottom"}}_setDefaultYAxisSpec(e){return{orient:"left"}}_setDefaultZAxisSpec(e){return{orient:"z"}}_transformAxisSpec(e){if(this.needAxes()){e.axes||(e.axes=[]);let t={x:!1,y:!1,z:!1};e.axes.forEach(i=>{let{orient:r}=i,n=null;"top"!==r&&"bottom"!==r||(t.x=!0,n=this._setDefaultXAxisSpec(e)),"left"!==r&&"right"!==r||(t.y=!0,n=this._setDefaultYAxisSpec(e)),"z"===r&&(t.z=!0,n=this._setDefaultZAxisSpec(e)),n&&Object.keys(n).forEach(e=>{(0,r5.Z)(i[e])&&(i[e]=n[e])}),(0,hH.Z)(i,"trimPadding")&&hs(i,cl(this.type,e))}),t.x||e.axes.push(this._setDefaultXAxisSpec(e)),t.y||e.axes.push(this._setDefaultYAxisSpec(e)),e.zField&&!t.z&&e.axes.push(this._setDefaultZAxisSpec(e))}}}class xM extends xk{_getDefaultSeriesSpec(e){var t;let i=super._getDefaultSeriesSpec(e,["point","line","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","lineLabel"]);return i.seriesMark=null!=(t=e.seriesMark)?t:"line",i}transformSpec(e){super.transformSpec(e),ci(e)}}class xT{get dataList(){return this._dataArr}constructor(e){this._dataArr=[],this._dataSet=e}parseData(e){this._dataArr=[];let t=(0,ag.IX)(e);for(let e=0;e<t.length;e++)this._dataArr.push(h3(t[e],this._dataSet,this._dataArr))}updateData(e,t=!1,i=!0){let r=(0,ag.IX)(e);return(!t||r.length===this._dataArr.length)&&(this._dataValueForEach(r,(e,t)=>{t.markRunning()}),this._dataValueForEach(r,(e,t)=>{h4(t,e,i)}),!0)}_dataValueForEach(e,t){e.forEach((e,i)=>{if(e instanceof tf.V)return;let r=this.getSeriesData(e.id,i);r&&t(e,r,i)})}getSeriesData(e,t){if(!this._dataArr.length)return null;if("string"==typeof e){let t=this._dataArr.filter(t=>t.name===e);if(t[0])return t[0];s1(`no data matches dataId ${e}!`)}if("number"==typeof t){if(this._dataArr[t])return this._dataArr[t];s1(`no data matches dataIndex ${t}!`)}return this._dataArr[0]}}class xR{constructor(e,t){this._scaleSpecMap=new Map,this._scaleMap=new Map,this._modelScaleSpecMap=new Map,this._markAttributeScaleMap=new Map,this._spec=null,this._chart=null,this.getStatisticalFields=e=>{let t=[];return this._scaleSpecMap.forEach((i,r)=>{sW(i.domain)&&i.domain.forEach(r=>{r.dataId===e&&r.fields.forEach(e=>{mZ(t,[{key:e,operations:(0,cz.z2)(i.type)?["max","min"]:["values"]}])})})}),this._markAttributeScaleMap.forEach((i,r)=>{let n=this.getScale(r);i.forEach(i=>{this._getSeriesBySeriesId(i.seriesId).getRawData().name===e&&i.field&&mZ(t,[{key:i.field,operations:(0,cz.z2)(n.type)?["max","min"]:["values"]}])})}),t},this._spec=e,this._chart=t,this._setAttrFromSpec()}_createFromSpec(e){if(!e.id)return null;let t=this._scaleMap.get(e.id);return t||(t="ordinal"===e.type&&"color"===e.id?cI("colorOrdinal"):cI(e.type)),t?((0,ri.Z)(e.range)&&t.range(e.range),(0,ri.Z)(e.domain)&&(sW(e.domain)||t.domain(e.domain)),e.specified&&t.specified&&t.specified(e.specified),e.clamp&&t.clamp&&t.clamp(e.clamp),t):null}_setAttrFromSpec(){var e;if(!(null==(e=this._spec)?void 0:e.length))return;let t=new Map,i=new Map;this._spec.forEach(e=>{let r=this._createFromSpec(e);r&&(t.set(e.id,r),i.set(e.id,e))}),this._modelScaleSpecMap.forEach(e=>{let r=this._createFromSpec(e);r&&(t.set(e.id,r),i.set(e.id,e))}),this._scaleSpecMap=i,this._scaleMap=t}updateSpec(e){let t={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if((0,dN.X)(e,this._spec))return t;t.change=!0;for(let i=0;i<e.length;i++){let r=e[i],n=this._scaleMap.get(r.id);if(!n)return t.reMake=!0,t;let l=this._spec.find(e=>e.id===r.id);if(!l.id||l.type!==r.type||!(0,dN.X)(l.specified,r.specified))return t.reMake=!0,t;r.range&&!(0,dN.X)(r.range,n.range())&&(n.range(r.range),t.reRender=!0),sW(r.domain)?t.reRender=!0:(0,dN.X)(r.domain,n.domain())||(n.domain(r.domain),t.reRender=!0),this._scaleSpecMap.set(r.id,r)}return this._spec=e,t}registerModelScale(e){let t=this._createFromSpec(e);t&&(this._modelScaleSpecMap.set(e.id,e),this._scaleSpecMap.set(e.id,e),this._scaleMap.set(e.id,t))}removeModelScale(e){this._modelScaleSpecMap.forEach(t=>{e(t)&&(this._modelScaleSpecMap.delete(t.id),this._scaleSpecMap.delete(t.id),this._scaleMap.delete(t.id))})}getScale(e){return this._scaleMap.get(e)}getScaleSpec(e){return this._scaleSpecMap.get(e)}_getSeriesByRawDataId(e){let t=this._chart.getAllSeries();for(let i=0;i<t.length;i++){let r=t[i];if(r.getRawData().name===e)return r}return null}_getSeriesBySeriesId(e){let t=this._chart.getAllSeries();for(let i=0;i<t.length;i++){let r=t[i];if(r.id===e)return r}return null}updateScaleDomain(e){this._scaleSpecMap.forEach((t,i)=>{let r,n=this._scaleMap.get(i);if(!n)return;if(!sW(t.domain))return t.domain&&0!==t.domain.length||n.domain(e),void this._updateMarkScale(i,n,n.domain().slice());r=(0,cz.z2)(t.type)?[null,null]:new Set,t.domain.forEach(e=>{let i=this._getSeriesByRawDataId(e.dataId);if(!i)return;let n=(0,cz.z2)(t.type);e.fields.forEach(e=>{let t=i.getRawDataStatisticsByField(e,n);t&&(n?((0,r5.Z)(r[0])?r[0]=t.min:r[0]=Math.min(t.min,r[0]),(0,r5.Z)(r[1])?r[1]=t.max:r[1]=Math.max(t.max,r[1])):t.values.forEach(e=>{r.add(e)}))})});let l=r;(0,cz.z2)(t.type)||(r=Array.from(r)),n.domain(r),this._updateMarkScale(i,n,l)})}_updateMarkScale(e,t,i){let r=this._markAttributeScaleMap.get(e);r&&0!==r.length&&r.forEach(e=>{if(!e.field||!e.markScale||e.markScale===t)return;if((0,r5.Z)(e.changeDomain)||"none"===e.changeDomain||(0,r5.Z)(e.seriesId))return void((0,cz.z2)(t.type)?e.markScale.domain(i):t.domain(Array.from(i)));let r=this._getSeriesBySeriesId(e.seriesId),n=(0,cz.z2)(t.type),l=r.getRawDataStatisticsByField(e.field,n);if(!(0,d$.Z)(l))return"expand"===e.changeDomain?(n?(i[0]=Math.min(i[0],l.min),i[1]=Math.max(i[1],l.max)):(l.values.forEach(e=>{i.add(e)}),i=Array.from(i)),void e.markScale.domain(i)):void("replace"!==e.changeDomain||(n?e.markScale.domain([l.min,l.max]):e.markScale.domain(l.values)));(0,cz.z2)(t.type)?e.markScale.domain(i):t.domain(Array.from(i))})}registerMarkAttributeScale(e,t){let i=this._scaleMap.get(e.scale),r=this._markAttributeScaleMap.get(e.scale);r||(r=[],this._markAttributeScaleMap.set(e.scale,r));let n=i;return!(0,r5.Z)(e.field)&&((0,r5.Z)(e.changeDomain)||"none"===e.changeDomain||(0,r5.Z)(t))||(n=i.clone()),r.push(Object.assign(Object.assign({},e),{seriesId:t,markScale:n})),n}}class xE{constructor(){this._stateGraphicsByTrigger=new Map,this._disableTriggerEvent=!1,this._triggerMapByState=new Map}setDisableActiveEffect(e){this._disableTriggerEvent=e}addTrigger(e){e&&[e.getStartState(),e.getResetState()].forEach(t=>{if(t){let i=this._triggerMapByState.get(t);i?i.includes(e)||i.push(e):this._triggerMapByState.set(t,[e])}})}setStatedGraphics(e,t){this._stateGraphicsByTrigger.set(e,t)}getStatedGraphics(e){return this._stateGraphicsByTrigger.get(e)}updateStates(e,t,i,r,n){return this._disableTriggerEvent?[]:t&&t.length?(r&&n?i&&i.length?(this.toggleReverseStateOfGraphics(e,t,i,n),this.toggleStateOfGraphics(e,t,i,r)):this.addBothStateOfGraphics(e,t,r,n):r&&(i&&i.length?this.toggleStateOfGraphics(e,t,i,r):this.addStateOfGraphics(e,t,r)),t):[]}toggleReverseStateOfGraphics(e,t,i,r){let n=e.getMarkIdByState();i.forEach(e=>{var t;if(r&&n[r]&&n[r].includes(e.context.markId)){let i=null==(t=e.parent)?void 0:t.mark,n=i.hasAnimationByState&&i.hasAnimationByState("state");e.addState(r,!0,n)}}),t.forEach(e=>{var t;if(r&&n[r]&&n[r].includes(e.context.markId)){let i=null==(t=e.parent)?void 0:t.mark,n=i.hasAnimationByState&&i.hasAnimationByState("state");e.removeState(r,n)}})}toggleStateOfGraphics(e,t,i,r){let n=e.getMarkIdByState();i.forEach(e=>{var t;if(r&&n[r]&&n[r].includes(e.context.markId)){let i=null==(t=e.parent)?void 0:t.mark,n=i.hasAnimationByState&&i.hasAnimationByState("state");e.removeState(r,n)}}),t.forEach(e=>{var t;if(r&&n[r]&&n[r].includes(e.context.markId)){let i=null==(t=e.parent)?void 0:t.mark,n=i.hasAnimationByState&&i.hasAnimationByState("state");e.addState(r,!0,n)}})}addBothStateOfGraphics(e,t,i,r){let n=e.getMarks(),l=e.getMarkIdByState();n.forEach(e=>{var n;let o=r&&l[r]&&l[r].includes(e.id),a=i&&l[i]&&l[i].includes(e.id);if(!o&&!a)return;let s=e.hasAnimationByState&&e.hasAnimationByState("state");null==(n=e.getGraphics())||n.forEach(e=>{t&&t.includes(e)?a&&e.addState(i,!0,s):o&&e.addState(r,!0,s)})})}addStateOfGraphics(e,t,i){let r=e.getMarks(),n=e.getMarkIdByState();r.forEach(e=>{var r;let l=i&&n[i]&&n[i].includes(e.id);if(!l)return;let o=e.hasAnimationByState&&e.hasAnimationByState("state");null==(r=e.getGraphics())||r.forEach(e=>{t&&t.includes(e)&&l&&e.addState(i,!0,o)})})}clearAllStatesOfTrigger(e,t,i){if(this._disableTriggerEvent)return;let r=this.getStatedGraphics(e);if(!r||!r.length)return;let n=e.getMarks(),l=e.getMarkIdByState();n.forEach(e=>{if(e){let n=e.getGraphics(),o=e.hasAnimationByState&&e.hasAnimationByState("state");n&&n.length&&(i&&l[i]&&l[i].includes(e.id)&&n.forEach(e=>{e.removeState(i,o)}),t&&l[t]&&l[t].includes(e.id)&&n.forEach(e=>{r.includes(e)&&e.removeState(t,o)}))}})}clearAllStates(){this._disableTriggerEvent||this._triggerMapByState.forEach((e,t)=>{e.forEach(e=>{this.clearAllStatesOfTrigger(e,t,e.getResetState())})})}clearByState(e){if(this._disableTriggerEvent)return;let t=this._triggerMapByState.get(e);t&&t.length&&t.forEach(t=>{this.clearAllStatesOfTrigger(t,e,t.getResetState()),this.setStatedGraphics(t,[])})}updateStateOfGraphics(e,t){if(this._disableTriggerEvent)return;let i=this._triggerMapByState.get(e);i&&i.length&&i.forEach(e=>{let i=t.filter(t=>e.getMarks().some(e=>{let i=e&&e.getGraphics();return i&&i.includes(t)}));this.updateStates(e,i,this.getStatedGraphics(e),e.getStartState(),e.getResetState()),this.setStatedGraphics(e,i)})}}var xP=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class xB extends ca{getSpec(){return this._spec}setSpec(e){this._spec=e}getOption(){return this._option}getLayoutRect(){return this._layoutRect}getViewRect(){return this._viewRect}getLayoutTag(){return this._layoutTag}setLayoutTag(e,t,i=!0){this._layoutTag=e;let r=this.getCompiler();return r&&(r.updateLayoutTag(),e&&i&&r.renderNextTick(t)),this._layoutTag}resetLayoutItemTag(){this.getLayoutElements().forEach(e=>e.setWillLayoutTag())}getModelOption(){return this._modelOption}getGlobalScale(){return this._globalScale}getEvent(){return this._event}get chartData(){return this._chartData}_setModelOption(){}constructor(e,t){var i,r,n,l;super(t),this.type="chart",this.id=sO(),this._regions=[],this._series=[],this._components=[],this._layoutRect={x:0,y:0,width:500,height:500},this._viewRect={width:500,height:500},this._viewBox={x1:0,y1:0,x2:500,y2:500},this._layoutTag=!0,this._idMap=new Map,this.state={layoutUpdateRank:1},this.padding={top:0,left:0,right:0,bottom:0},this.getAllSeries=()=>{var e;return null!=(e=this._series)?e:[]},this.getRegionsInIndex=e=>e&&0!==e.length?this._regions.filter((t,i)=>e.includes(i)):[this._regions[0]],this.getAllRegions=()=>this._regions,this.getRegionsInIds=e=>e?this._regions.filter(t=>e.includes(t.id)):[],this.getRegionsInQuerier=e=>e?this._regions.filter((t,i)=>(0,ag.IX)(e).some(e=>(0,oV.Z)(e.regionId)&&e.regionId===t.userId||e.regionIndex===i)):this._regions,this.getRegionsInUserId=e=>{if(e)return this._regions.find(t=>t.userId===e)},this.getRegionsInUserIdOrIndex=(e,t)=>this.getAllRegions().filter(i=>(null==e?void 0:e.length)?i.userId&&e.includes(i.userId):!(null==t?void 0:t.length)||t.includes(i.getSpecIndex())),this.getComponents=()=>this._components,this.getSeriesInIndex=e=>e&&0!==e.length?this._series.filter((t,i)=>e.includes(i)):[this._series[0]],this.getSeriesInIds=e=>e?this._series.filter(t=>e.includes(t.id)):[],this.getSeriesInUserId=e=>{if(e)return this._series.find(t=>t.userId===e)},this.getSeriesInUserIdOrIndex=(e,t)=>this.getAllSeries().filter(i=>(null==e?void 0:e.length)?i.userId&&e.includes(i.userId):!(null==t?void 0:t.length)||t.includes(i.getSpecIndex())),this.getComponentByIndex=(e,t)=>{let i=this._components.filter(t=>(t.specKey||t.type)===e);if(i&&0!==i.length)return i[t]},this.getComponentsByKey=e=>this._components.filter(t=>(t.specKey||t.type)===e),this.getComponentByUserId=e=>{let t=this._components.find(t=>t.userId===e);if(t)return t},this.getComponentsByType=e=>this._components.filter(t=>t.type===e),this._paddingSpec=sG(null!=(i=e.padding)?i:t.getTheme("padding")),this._event=new hB(t.eventDispatcher,t.mode),this._dataSet=t.dataSet,this._chartData=new xT(this._dataSet),this._modelOption=Object.assign(Object.assign({},t),{mode:this._option.mode,map:this._idMap,getChartLayoutRect:()=>this._layoutRect,getChartViewRect:()=>this._viewRect,getChart:()=>this,globalScale:this._globalScale,onError:null==(r=this._option)?void 0:r.onError,disableTriggerEvent:!0===(null==(n=this._option)?void 0:n.disableTriggerEvent),componentShowContent:null==(l=this._option)?void 0:l.componentShowContent,getSeriesData:this._chartData.getSeriesData.bind(this._chartData),dispatchEvent:(e,t)=>this._option.globalInstance.event.emit(e,t)}),this._setModelOption&&this._setModelOption(),this._spec=e}created(e){this._chartData.parseData(this._spec.data),this._createGlobalScale(),this._createBackground(),this._createLayout(),e.forEachRegionInSpec(this._spec,this._createRegion.bind(this)),e.forEachSeriesInSpec(this._spec,this._createSeries.bind(this)),e.forEachComponentInSpec(this._spec,this._createComponent.bind(this),this._option.getSpecInfo())}_initInteractions(){if(this._option.disableTriggerEvent)return;this._interaction=new xE;let e=this.getAllSeries(),t=[],i={};e.forEach(e=>{let r=e.getInteractionTriggers();if(r&&r.length){let n=e.getRegion().id;r.forEach(({trigger:e,marks:r})=>{let l=`${n}-${e.type}`;i[l]?r.forEach(e=>{i[l].marks.push(e)}):(i[l]=Object.assign(Object.assign({},e),{marks:r}),t.push(i[l]))})}}),t.forEach(e=>{let t=hp.createInteractionTrigger(e.type,Object.assign(Object.assign({},e),{event:this._event,interaction:this._interaction}));t&&(t.init(),this._interaction.addTrigger(t))})}init(){var e,t;null==(e=this._beforeInit)||e.call(this),this._regions.forEach(e=>e.init({})),this._series.forEach(e=>e.init({})),this._components.forEach(e=>e.init({dataSet:this._dataSet})),this._initEvent(),null==(t=this._initStack)||t.call(this),this.reDataFlow(),this._initInteractions(),this.initStageAnimation()}initStageAnimation(){let e=this._option.getCompiler();(null==e?void 0:e.setStageAnimationConfig)&&e.setStageAnimationConfig(bg({},bf("stage",this._spec,{}),null))}reDataFlow(){this._series.forEach(e=>{var t;return null==(t=e.getRawData())?void 0:t.markRunning()}),this._series.forEach(e=>e.fillData()),this.updateGlobalScaleDomain()}onResize(e,t,i=!0){this._canvasRect={width:e,height:t},this._updateLayoutRect(this._option.viewBox),this.resetLayoutItemTag(),this.setLayoutTag(!0,null,i)}updateViewBox(e,t){this._option.viewBox=e,this._updateLayoutRect(e),this.resetLayoutItemTag(),this.setLayoutTag(!0,null,t)}_createBackground(){let e=this._spec.background;if(!e||"object"!=typeof e||(0,oV.Z)(e.gradient))return;let t=(0,vQ.Z)(e,["x","y","width","height","x1","y1","image"]);t.background=e.image,this._backgroundMark=hp.createMark("group","chart-background",{model:this,map:this._option.map,getCompiler:this.getCompiler,globalScale:this._globalScale}),this._backgroundMark.created(),this._backgroundMark.setStyle(Object.assign(Object.assign({},t),{x:()=>this._viewBox.x1,y:()=>this._viewBox.y1,width:()=>this._viewBox.x2-this._viewBox.x1,height:()=>this._viewBox.y2-this._viewBox.y1})),this._backgroundMark.setMarkConfig({zIndex:X.SeriesGroup-2}),this.getCompiler().addRootMark(this._backgroundMark)}_createRegion(e,t){if(!e)return;let{spec:i}=t,r=xP(t,["spec"]),n=new e(i,Object.assign(Object.assign({},this._modelOption),r));n&&(n.created(),this._regions.push(n))}_createSeries(e,t){let i;if(!e)return;let{spec:r}=t,n=xP(t,["spec"]);if((0,oV.Z)(r.regionId)?i=this.getRegionsInUserId(r.regionId):(0,oV.Z)(r.regionIndex)&&(i=this.getRegionsInIndex([r.regionIndex])[0]),!i&&!(i=this._regions[0]))return;let l=new e(r,Object.assign(Object.assign(Object.assign({},this._modelOption),n),{type:r.type,region:i,globalScale:this._globalScale,sourceDataList:this._chartData.dataList}));l&&(l.created(),this._series.push(l),i.addSeries(l))}getSeriesById(e){return this._series.find(t=>t.id===e)}_createComponent(e,t){let i=e.createComponent(t,Object.assign(Object.assign({},this._modelOption),{type:e.type,getAllRegions:this.getAllRegions,getRegionsInIndex:this.getRegionsInIndex,getRegionsInIds:this.getRegionsInIds,getRegionsInUserIdOrIndex:this.getRegionsInUserIdOrIndex,getAllSeries:this.getAllSeries,getSeriesInIndex:this.getSeriesInIndex,getSeriesInIds:this.getSeriesInIds,getSeriesInUserIdOrIndex:this.getSeriesInUserIdOrIndex,getAllComponents:this.getComponents,getComponentByIndex:this.getComponentByIndex,getComponentByUserId:this.getComponentByUserId,getComponentsByKey:this.getComponentsByKey,getComponentsByType:this.getComponentsByType}));i&&(i.created(),this._components.push(i))}getAllComponents(){return this._components}getAllModels(){return[].concat(this.getAllSeries(),this.getAllComponents(),this.getAllRegions())}getModelInFilter(e){if((0,r6.Z)(e))return this.getAllModels().find(t=>t.userId===e);if((0,nr.Z)(e))return this.getAllModels().find(t=>e(t));let t=0;return this.getAllModels().find(i=>{var r;if((null!=(r=i.specKey)?r:i.type)===e.type){if(t===e.index)return!0;t++}return!1})}_createLayout(){this._updateLayoutRect(this._option.viewBox),this._initLayoutFunc()}setLayout(e){this._option.layout=e,this._initLayoutFunc()}_initLayoutFunc(){var e,t,i;if(this._layoutFunc=this._option.layout,!this._layoutFunc){let r=hp.getLayoutInKey(null!=(t=null==(e=this._spec.layout)?void 0:e.type)?t:"base");if(r){let e=new r(this._spec.layout,{onError:null==(i=this._option)?void 0:i.onError});this._layoutFunc=e.layoutItems.bind(e)}}}layout(){var e,t,i,r;if(null==(t=null==(e=this._option.performanceHook)?void 0:e.beforeLayoutWithSceneGraph)||t.call(e,this._option.globalInstance),this.getLayoutTag()){this._event.emit(N.layoutStart,{chart:this,vchart:this._option.globalInstance}),this.onLayoutStart();let e=this.getLayoutElements();this._layoutFunc(this,e,this._layoutRect,this._viewBox),this._event.emit(N.afterLayout,{elements:e,chart:this}),this.setLayoutTag(!1),this.onLayoutEnd(),this._event.emit(N.layoutEnd,{chart:this,vchart:this._option.globalInstance})}null==(r=null==(i=this._option.performanceHook)?void 0:i.afterLayoutWithSceneGraph)||r.call(i,this._option.globalInstance)}onLayoutStart(){this.getAllModels().forEach(e=>e.onLayoutStart(this._layoutRect,this._viewRect))}onLayoutEnd(){this.getAllModels().forEach(e=>{"series"!==e.modelType&&e.onLayoutEnd()})}onEvaluateEnd(e){[...this._components,...this._regions,...this._series].forEach(t=>t.onEvaluateEnd(e))}onBeforeRender(){[...this._components,...this._regions,...this._series].forEach(e=>e.onBeforeRender())}getLayoutElements(){return this.getAllModels().map(e=>e.layout).filter(e=>!!e)}getModelById(e){let t=this._idMap.get(e);if(t&&t instanceof cc)return t}getModelByUserId(e){let t=this.getSeriesInUserId(e);if(t)return t;let i=this.getRegionsInUserId(e);return i||this.getComponentByUserId(e)||void 0}getAllMarks(){return Array.from(this._idMap.values()).filter(e=>e&&e instanceof pz)}getMarkById(e){let t=this._idMap.get(e);if(t&&t instanceof pz)return t}getMarkByUserName(e){return this.getAllMarks().filter(t=>t.name&&t.name===e)}updateData(e,t,i=!0,r){let n=this._dataSet.getDataView(e);n&&(n.markRunning(),n.parseNewData(t,r)),i&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(e=>e.onDataUpdate())}updateFullData(e,t=!0){(0,ag.IX)(e).forEach(e=>{let t=this._dataSet.getDataView(e.id);t&&t.markRunning()}),(0,ag.IX)(e).forEach(e=>{let t=this._dataSet.getDataView(e.id);t&&h4(t,e,!0)}),t&&this.updateGlobalScaleDomain(),this.getAllModels().forEach(e=>e.onDataUpdate())}setCanvasRect(e,t){this._canvasRect={width:e,height:t}}getCanvasRect(){return this._canvasRect||(this._canvasRect=cr(this._spec,this._option,{width:500,height:500})),this._canvasRect}getSeriesData(e,t){return this._chartData.getSeriesData(e,t)}_transformSpecScale(){var e;let t=this._spec.scales?[...this._spec.scales]:[],i=t.find(e=>"color"===e.id),r=this.getColorScheme();if(!i&&(i={type:"ordinal",id:"color",domain:null,range:null},t.push(i),this._spec.color)){let e=this._spec.color;(0,ri.Z)(e)?i.range=e:(Object.prototype.hasOwnProperty.call(e,"type")&&(i.type=e.type),Object.prototype.hasOwnProperty.call(e,"domain")&&(i.domain=e.domain),Object.prototype.hasOwnProperty.call(e,"range")&&(i.range=e.range),Object.prototype.hasOwnProperty.call(e,"specified")&&(i.specified=e.specified),Object.prototype.hasOwnProperty.call(e,"clamp")&&(i.clamp=e.clamp))}return(null==(e=i.range)?void 0:e.length)||(i.range=he(r),i.rangeTheme=!0),t}_createGlobalScale(){this._globalScale=new xR(this._transformSpecScale(),this),this._modelOption.globalScale=this._globalScale}updateGlobalScaleDomain(){let e=new Set;this._series.forEach(t=>{let i=t.getSeriesKeys();i&&i.forEach(t=>e.add(t))});let t=Array.from(e);this._globalScale.updateScaleDomain(t)}updateGlobalScale(e){cn(e,this._globalScale.updateSpec(this._transformSpecScale()))}updateGlobalScaleTheme(){let e=this._globalScale.getScaleSpec("color"),t=this.getColorScheme();e.rangeTheme&&(e.range=he(t),this._globalScale.getScale("color").range(e.range))}_getSpecKeys(e){let t={width:!0,height:!0};return Object.keys(e).filter(e=>!t[e]).sort()}updateSpec(e){let t={change:!1,reMake:!1,reRender:!1,reSize:!1,reCompile:!1};if(this.setLayoutTag(!0,null,!1),e.type!==this.type)return t.reMake=!0,t;let i=this._getSpecKeys(this._spec),r=this._getSpecKeys(e);if(!(0,dN.X)(i,r))return t.reMake=!0,t;for(let r=0;r<i.length;r++){let n=i[r];if((0,ri.Z)(this._spec[n])&&this._spec[n].length!==(0,ag.IX)(e[n]).length)return t.reMake=!0,t}let n=this._spec;return this._spec=e,this.updateChartConfig(t,n),t.reMake||(this.updateGlobalScale(t),t.reMake||(this.updateRegionSpec(t),t.reMake||(this.updateComponentSpec(t),t.reMake||(this.updateSeriesSpec(t),t.reMake||(this.reInit(),this.updateDataSpec(),this.updateGlobalScaleDomain()))))),t}updateChartConfig(e,t){var i,r;this._paddingSpec=sG(null!=(i=this._spec.padding)?i:null==(r=this._option)?void 0:r.getTheme("padding")),this._updateLayoutRect(this._viewBox)}updateDataSpec(){this._spec.data&&this._chartData.updateData(this._spec.data,!1,!0)}updateRegionSpec(e){var t;(null==(t=this._spec)?void 0:t.region)&&(this._spec.region.length===this._regions.length?this._regions.forEach(t=>{cn(e,t.updateSpec(this._spec.region[t.getSpecIndex()]))}):e.reMake=!0)}updateComponentSpec(e){let t={},i={[sc.title]:!0,[sc.brush]:!0,[sc.indicator]:!0};for(let r in this._components.forEach(r=>{var n,l;if(r.type===sc.label||r.type===sc.totalLabel)return;i[r.type]&&(i[r.type]=!1);let o=r.specKey||r.type,a=null!=(n=this._spec[o])?n:{};(0,ri.Z)(a)?(t[o]=t[o]||{specCount:a.length,componentCount:0},t[o].componentCount++,cn(e,r.updateSpec(null!=(l=a[r.getSpecIndex()])?l:{},a))):cn(e,r.updateSpec(a))}),t)if(Object.prototype.hasOwnProperty.call(t,r)){let i=t[r];i.componentCount!==i.specCount&&(e.reMake=!0)}let r=e=>e&&!1!==e.visible;Object.keys(i).forEach(t=>{if(i[t]){let i=this._spec[t];((0,ri.Z)(i)?i.some(r):r(i))&&(e.reMake=!0)}})}updateSeriesSpec(e){this._spec.series.length===this._series.length?this._series.forEach(t=>{let i=this._spec.series[t.getSpecIndex()];cn(e,t.updateSpec(i))}):e.reMake=!0}getCanvas(){var e,t;return null!=(t=null==(e=this.getCompiler())?void 0:e.getCanvas())?t:null}_updateLayoutRect(e){let t=this.getCanvasRect();if(e){this._viewBox=e;let{x1:i=0,y1:r=0,x2:n,y2:l}=e;t={width:n-i,height:l-r}}else this._viewBox={x1:0,y1:0,x2:t.width,y2:t.height};this._viewRect=t,this.padding=sj(this._paddingSpec,t,t),this._layoutRect.width=t.width-this.padding.left-this.padding.right,this._layoutRect.height=t.height-this.padding.top-this.padding.bottom,this._layoutRect.x=this.padding.left,this._layoutRect.y=this.padding.top,this._event.emit(N.layoutRectUpdate,{chart:this})}setCurrentTheme(){this.updateChartConfig({change:!0,reMake:!1},this._spec),this.resetLayoutItemTag(),this.setLayoutTag(!0,null,!1),this.updateGlobalScaleTheme(),this.reInit()}reInit(){[...this._regions,...this._series,...this._components].forEach(e=>{let t=e.getSpecInfo();t&&t.spec&&e.reInit(t.spec)})}clear(){this.getAllModels().forEach(e=>{var t;return null==(t=e.clear)?void 0:t.call(e)})}compile(){this.compileBackground(),this.compileLayout(),this.compileRegions(),this.compileSeries(),this.compileComponents()}afterCompile(){this.getAllRegions().forEach(e=>{var t;null==(t=e.afterCompile)||t.call(e)}),this.getAllSeries().forEach(e=>{var t;null==(t=e.afterCompile)||t.call(e)}),this.getAllComponents().forEach(e=>{var t;null==(t=e.afterCompile)||t.call(e)})}compileLayout(){let{width:e,height:t}=this.getCanvasRect();this.getCompiler().setSize(e,t)}compileBackground(){this._backgroundMark&&this._backgroundMark.compile()}compileRegions(){var e,t,i,r;null==(t=null==(e=this._option.performanceHook)?void 0:e.beforeRegionCompile)||t.call(e,this._option.globalInstance),this.getAllRegions().forEach(e=>{e.compile()}),null==(r=null==(i=this._option.performanceHook)?void 0:i.afterRegionCompile)||r.call(i,this._option.globalInstance)}compileSeries(){var e,t,i,r;null==(t=null==(e=this._option.performanceHook)?void 0:e.beforeSeriesCompile)||t.call(e,this._option.globalInstance),this.getAllSeries().forEach(e=>{e.compile()}),null==(r=null==(i=this._option.performanceHook)?void 0:i.afterSeriesCompile)||r.call(i,this._option.globalInstance)}compileComponents(){var e,t,i,r;null==(t=null==(e=this._option.performanceHook)?void 0:e.beforeComponentCompile)||t.call(e,this._option.globalInstance),this.getAllComponents().forEach(e=>{e.compile()}),null==(r=null==(i=this._option.performanceHook)?void 0:i.afterComponentCompile)||r.call(i,this._option.globalInstance)}release(){[...this._components,...this._regions,...this._series].forEach(e=>{e.beforeRelease()}),super.release(),this.clear(),[...this._components,...this._regions,...this._series].forEach(e=>{e.release()}),this._components=this._regions=this._series=[],this._spec={},this._dataSet=this._globalScale=this._layoutFunc=null,this._layoutTag=!1,this._idMap.clear()}onLayout(){this.layout()}updateState(e,t){let i=this.getAllSeries();for(let r in e){if((0,d$.Z)(e[r]))continue;let n=e[r],l={stateValue:r};l=(0,nr.Z)(n.filter)?Object.assign({filter:n.filter},l):Object.assign(Object.assign({},n.filter),l),n.level&&(l.level=n.level),i.forEach(e=>{e.getMarks().forEach(i=>{i.stateStyle[r]&&(t&&!t(e,i,r)||(i.state.changeStateInfo(l),i.updateMarkState(r)))})})}}setSelected(e,t,i){this._setStateInDatum(Q.STATE_SELECTED,e,t,i)}setHovered(e,t,i){this._setStateInDatum(Q.STATE_HOVER,e,t,i)}clearState(e){this._interaction.clearByState(e)}clearAllStates(){this._interaction.clearAllStates()}clearSelected(){this.clearState(Q.STATE_SELECTED)}clearHovered(){this.clearState(Q.STATE_HOVER)}_initEvent(){[N.dataZoomChange,N.scrollBarChange].forEach(e=>{this._event.on(e,({value:e})=>{this._disableMarkAnimation(["exit","update"]);let t=()=>{this._enableMarkAnimation(["exit","update"]),this._event.off(Z.AFTER_MARK_RENDER_END,t)};this._event.on(Z.AFTER_MARK_RENDER_END,t)})})}_enableMarkAnimation(e){this.getAllMarks().forEach(t=>t.enableAnimationByState(e))}_disableMarkAnimation(e){this.getAllMarks().forEach(t=>t.disableAnimationByState(e))}filterGraphicsByDatum(e,t={}){var i;let r=(e=e?(0,ag.IX)(e):null)?Object.keys(e[0]):null,n=[],l=null!=(i=t.getDatum)?i:hW;return this.getRegionsInQuerier(t.region).forEach(i=>{let o=[];e&&i.getSeries().forEach(a=>{a.getMarks().forEach(s=>{let h=s.getGraphics();if(h&&h.length&&(!t.filter||(0,nr.Z)(t.filter)&&t.filter(a,s)))if(hz(s.type))h.filter(h=>{let d=l(h,s,a,i);d&&e.every((e,t)=>r.every(i=>e[i]==d[t][i]))&&(o.push(h),n.push(h),t.callback&&t.callback(h,s,a,i))});else if(e.length>1){let d=e.slice();h.forEach(e=>{let h=l(e,s,a,i),u=h&&d.findIndex(e=>r.every(t=>e[t]==h[t]));u>=0&&(d.splice(u,1),o.push(e),n.push(e),t.callback&&t.callback(e,s,a,i))})}else{let d=h.find(t=>{let n=l(t,s,a,i);return n&&r.every(t=>e[0][t]==n[t])});d&&(o.push(d),n.push(d),t.callback&&t.callback(d,s,a,i))}})}),t.regionCallback&&t.regionCallback(o,i)}),n}_setStateInDatum(e,t,i,r){if(!t)return void this._interaction.clearByState(e);let n=this.filterGraphicsByDatum(t,{filter:i,region:r});this._interaction.updateStateOfGraphics(e,n)}setDimensionIndex(e,t){var i;let r=null;Array.from(this._event.getComposedEventMap().values()).forEach(i=>{let{eventType:n,event:l}=i;if(n===eB.dimensionHover||n===eB.dimensionClick){let i=l.dispatch(e,t);(null==i?void 0:i.length)&&(r=i)}});let n=(0,r5.Z)(e)||!r||r.every(e=>(0,cz.lK)(e.axis.getScale().type)&&(0,r5.Z)(e.index)),l=n||r.every(e=>(0,cz.lK)(e.axis.getScale().type)&&e.data.every(e=>0===e.datum.length));if(!1!==t.tooltip){let e=this.getComponentsByType(sc.tooltip)[0];if(null==e?void 0:e.getVisible())if(n||l)null==(i=e.hideTooltip)||i.call(e);else{let i={};r.forEach(e=>{let{axis:t,value:r,data:n}=e,l="left"===t.getOrient()||"right"===t.getOrient();n.forEach(e=>{var t,n,o;let a=l?e.series.fieldY[0]:e.series.fieldX[0];i[a]=null!=(o=null==(n=null==(t=e.datum)?void 0:t[0])?void 0:n[a])?o:r})}),e.showTooltip(i,t.showTooltipOption)}}if(!1!==t.crosshair){let e=this.getComponentsByType(sc.cartesianCrosshair)[0];e&&e.clearAxisValue&&e.setAxisValue&&(n?e.hideCrosshair():e.showCrosshair(r))}}showCrosshair(e){var t;let i=null!=(t=this.getComponentsByType(sc.cartesianCrosshair)[0])?t:this.getComponentsByType(sc.polarCrosshair)[0];if(!i)return;let r=this.getComponentsByKey("axes"),n=[];r.forEach(t=>{let i=e(t);!1!==i&&n.push({axis:t,value:i})}),i.showCrosshair(n)}getColorScheme(){var e,t;return null==(t=(e=this._option).getTheme)?void 0:t.call(e,"colorScheme")}}let xI=(e,t)=>{let i={nodes:{}},{fields:r}=t;if(!(null==r?void 0:r.length))return i;let n=r.length-1,l,o=i;return e.forEach(e=>{e.latestData&&e.latestData.forEach(e=>{o=i;for(let t=0;t<r.length;t++){let i=r[t],a=e[i];if((0,r5.Z)(a))break;o.groupField=i,o.nodes[a]||(t===n?o.nodes[a]={values:[]}:(l={nodes:{}},o.nodes[a]=l)),t===n?o.nodes[a].values.push(e):o=o.nodes[a]}})}),i};class xL{constructor(e,t){this.stackRegion=({model:e})=>{var t;let i=e.getSeries();if(!i.some(e=>e.getStack()))return;let r=i.some(e=>{var t,i,r,n;return!!(null==(i=null==(t=e.getSpec())?void 0:t.totalLabel)?void 0:i.alwayCalculateTotal)||(null==(n=null==(r=e.getSpec())?void 0:r.totalLabel)?void 0:n.visible)}),n=r||i.some(e=>e.getPercent()),l=i.some(e=>e.getStackOffsetSilhouette()),o=m$(e,!0);for(let t in o)for(let i in o[t].nodes)!function e(t,i,r,n,l={key:dv,start:d_,end:dC,startPercent:dx,endPercent:dw,max:dT,min:dR}){let o=n&&(0,oV.Z)(l.min),a=n&&(0,oV.Z)(l.max);if(t.values.length>0){let e=0,n=0,s=1,h=0,d=null,u=null,c=t.values.length;for(let r=0;r<c;r++){let s=t.values[i?c-1-r:r];(h=s[l.end])>=0?(s[l.start]=e,e+=s[l.end],s[l.end]=e):(s[l.start]=n,n+=s[l.end],s[l.end]=n),s[l.key]=t.key,a&&(delete s[l.max],(!u||s[l.end]>u[l.end])&&(u=s)),o&&(delete s[l.min],(!d||s[l.start]<d[l.start])&&(d=s))}if(a&&u&&(u[l.max]=!0),o&&d&&(d[l.min]=!0),r)for(let r=0;r<c;r++){let o=t.values[i?c-1-r:r],a=(h=o[l.end])>=0?e:n;s=h>=0?1:-1,o[l.startPercent]=0===a?0:Math.min(1,o[l.start]/a)*s,o[l.endPercent]=0===a?0:Math.min(1,o[l.end]/a)*s}}for(let o in t.nodes)e(t.nodes[o],i,r,n,l)}(o[t].nodes[i],e.getStackInverse(),n,r);if(l)for(let e in o)for(let t in o[e].nodes)!function(e){if(!e.values.length)return;let t=e.values[e.values.length-1][dC]/2;for(let i=0;i<e.values.length;i++)e.values[i][dS]=e.values[i][d_]-t,e.values[i][dA]=e.values[i][dC]-t}(o[e].nodes[t]);r&&e.getSeries().forEach(e=>{let t=e.getStackData(),i=e.getStackValue(),r=e.getStackValueField();t&&r&&mj(o[i],r)}),(null==(t=this._options)?void 0:t.afterStackRegion)&&this._options.afterStackRegion(e,o)},this._chart=e,this._options=t}init(){this._chart.getAllRegions().forEach(e=>{e.event.on(N.regionSeriesDataFilterOver,{filter:({model:t})=>(null==t?void 0:t.id)===e.id},this.stackRegion)})}stackAll(){this._chart.getAllRegions().forEach(e=>{this.stackRegion({model:e})})}}class xF{_beforeInit(){this._dataSet&&hK(this._dataSet,"stackSplit",xI)}_initStack(){this._stack=new xL(this),this._stack.init()}}let xH={state:Q.STATE_DIMENSION_HOVER,reverseState:Q.STATE_DIMENSION_HOVER_REVERSE,trigger:eB.dimensionHover};class xO extends mC{constructor(e){super(e),this.type="dimension-hover",this._resetType=[],this.resetAll=()=>{let{state:e,reverseState:t,interaction:i}=this.options,r=i.getStatedGraphics(this);r&&r.length&&(i.clearAllStatesOfTrigger(this,e,t),this.dispatchEvent("reset",{graphics:r,options:this.options}),i.setStatedGraphics(this,[]))},this.handleStart=e=>{let t=this.options.interaction;switch(e.action){case"enter":let i=this.getStatedGraphics(e);t.updateStates(this,this.getStatedGraphics(e),t.getStatedGraphics(this),this.options.state,this.options.reverseState),t.setStatedGraphics(this,i);break;case"leave":t.clearAllStatesOfTrigger(this,this.options.state,this.options.reverseState),t.setStatedGraphics(this,[])}},this.options=Object.assign({},xH,e),this.updateMarkIdByState([this.options.state,this.options.reverseState])}getStartState(){return this.options.state}getResetState(){return this.options.reverseState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart}]}getStatedGraphics(e,t=!1){let i=this.getMarksByState(t?this.options.reverseState:this.options.state),r=[];return e.dimensionInfo.forEach(e=>{e.data.forEach(e=>{i.filter(t=>t.model===e.series&&t.getVisible()).forEach(i=>{let n=i.getGraphics();if(!n||!n.length)return;let l=n.filter(i=>{let r,n=hW(i);return r=(0,ri.Z)(n)?n.every((t,i)=>t===e.datum[i]):e.datum.some(e=>e===n),t?!r:r});r.push(...l)})})}),r}}xO.type="dimension-hover",xO.defaultOptions=xH;let xD=()=>{hp.registerInteractionTrigger(xO.type,xO)};class xz{constructor(e,t){this._eventDispatcher=e,this._mode=t}get chart(){var e,t;return this._chart||(this._chart=null==(t=(e=this._eventDispatcher.globalInstance).getChart)?void 0:t.call(e)),this._chart}register(e,t){var i,r;(null!=(r=null==(i=this.chart)?void 0:i.getOption().onError)?r:s2)("Method not implemented.")}unregister(){var e,t;(null!=(t=null==(e=this.chart)?void 0:e.getOption().onError)?t:s2)("Method not implemented.")}getTargetDimensionInfo(e,t){var i,r,n;let l=null!=(n=null==(r=(i=this.chart.getModelOption()).getDimensionInfo)?void 0:r.call(i,this.chart,{x:e,y:t}))?n:[];return 0===l.length?null:l}dispatch(e,t){var i,r;let n=null==(i=this.chart)?void 0:i.getAllComponents().filter(e=>"axes"===e.specKey&&(!(null==t?void 0:t.filter)||t.filter(e))),l=n.filter(e=>{let t=e.getScale();return(0,cz.lK)(t.type)}),o=l.length?l:n.filter(e=>{let t=e.getOrient();return ve(t)||"angle"===t}),a=[],s=null==(r=this.chart)?void 0:r.getModelOption().getDimensionInfoByValue;return s&&o.forEach(t=>{let i=s(t,e);i&&a.push(i)}),this._callback.call(null,{action:"enter",dimensionInfo:a}),a}}let xW=(e,t,i)=>e.x>=t.x&&e.x<=i.x&&e.y>=t.y&&e.y<=i.y,xZ=(e,t,i)=>{let r=e.getRegionsInIds((0,ag.IX)(t.layout.layoutBindRegionID));return null==r?void 0:r.some(e=>{let t=e.getLayoutRect(),r=e.getLayoutStartPoint();return xW(i,{x:r.x,y:r.y},{x:t.width+r.x,y:t.height+r.y})})},xN=(e,t)=>{var i,r;return e===t||!(0,r5.Z)(e)&&!(0,r5.Z)(t)&&e.value===t.value&&(null==(i=e.axis)?void 0:i.id)===(null==(r=t.axis)?void 0:r.id)},x$=(e,t)=>{let i=e.tooltipFilterRange,r="function"==typeof i?i({scale:t}):i;return(0,sD.Z)(r)?[-r,r]:r},xj=(e,t,i,r)=>{var n;let l=t.getScale(),o=(0,cz.lK)(l.type),a=[];for(let s of t.getOption().getChart().getSeriesInIndex(t.getSpecInfo().seriesIndexes))if(s.coordinate===i){let i=(0,ag.IX)(r(s)),h=null==(n=s.getViewData())?void 0:n.latestData;if(i&&h)if(o){let t=[],r=[];h.forEach((n,l)=>{var o;(null==(o=n[i[0]])?void 0:o.toString())===(null==e?void 0:e.toString())&&(t.push(n),r.push(l))}),a.push({series:s,datum:t,key:xG(s,r)})}else if((0,oV.Z)(i[1])){let t=[],r=[];h.forEach((n,l)=>{var o;((null==(o=n[i[0]])?void 0:o.toString())===(null==e?void 0:e.toString())||(0,oV.Z)(n[i[0]])&&(0,oV.Z)(n[i[1]])&&e>=n[i[0]]&&e<n[i[1]])&&(t.push(n),r.push(l))}),a.push({series:s,datum:t,key:xG(s,r)})}else{let r=x$(t.getSpec(),l),n=[],o=[];if(r)h.forEach((t,l)=>{if((0,oV.Z)(t[i[0]])){let a=t[i[0]]-e;a>=r[0]&&a<=r[1]&&(n.push(t),o.push(l))}});else{let t=1/0,r=0;h.forEach((l,a)=>{if((0,oV.Z)(l[i[0]])){let s=Math.abs(l[i[0]]-e),h=Math.sign(l[i[0]]-e);s<t?(t=s,n=[l],o=[a],r=h):s===t&&h===r&&(n.push(l),o.push(a))}})}a.push({series:s,datum:n,key:xG(s,o)})}}return a},xG=(e,t)=>`${e.id}_${t.join("_")}`,xV=(e,t,i)=>{let r=e.getAllComponents().filter(r=>"axes"===r.specKey&&t(r)&&xZ(e,r,i));return r.length?r:null};class xU extends xz{constructor(){super(...arguments),this._cacheDimensionInfo=null,this.onMouseMove=e=>{if(!e)return;let t=e.event.viewX,i=e.event.viewY,r=this.getTargetDimensionInfo(t,i);null===r&&null!==this._cacheDimensionInfo?(this._callback.call(null,Object.assign(Object.assign({},e),{action:"leave",dimensionInfo:this._cacheDimensionInfo.slice()})),this._cacheDimensionInfo=r):null!==r&&(null===this._cacheDimensionInfo||r.length!==this._cacheDimensionInfo.length||r.some((e,t)=>!xN(e,this._cacheDimensionInfo[t])))?(this._callback.call(null,Object.assign(Object.assign({},e),{action:"enter",dimensionInfo:r.slice()})),this._cacheDimensionInfo=r):null!==r&&this._callback.call(null,Object.assign(Object.assign({},e),{action:"move",dimensionInfo:r.slice()}))},this.onMouseOut=e=>{e&&(this._callback.call(null,Object.assign(Object.assign({},e),{action:"leave",dimensionInfo:this._cacheDimensionInfo?this._cacheDimensionInfo.slice():[]})),this._cacheDimensionInfo=null)}}register(e,t){this._callback=t.callback,this._eventDispatcher.register("pointermove",{query:Object.assign(Object.assign({},t.query),{source:$.chart}),callback:this.onMouseMove}),this._eventDispatcher.register("pointerout",{query:Object.assign(Object.assign({},t.query),{source:$.canvas}),callback:this.onMouseOut}),sJ(this._mode)&&this._eventDispatcher.register("pointerdown",{query:Object.assign(Object.assign({},t.query),{source:$.chart}),callback:this.onMouseMove})}unregister(){this._eventDispatcher.unregister("pointermove",{query:null,callback:this.onMouseMove}),sJ(this._mode)&&this._eventDispatcher.unregister("pointerdown",{query:null,callback:this.onMouseMove})}}class xK extends xz{constructor(){super(...arguments),this.onClick=e=>{if(!e)return;let t=e.event.viewX,i=e.event.viewY,r=this.getTargetDimensionInfo(t,i);r&&this._callback.call(null,Object.assign(Object.assign({},e),{action:"click",dimensionInfo:r.slice()}))}}register(e,t){this._callback=t.callback,this._eventDispatcher.register("pointertap",{query:Object.assign(Object.assign({},t.query),{source:$.chart}),callback:this.onClick})}unregister(){this._eventDispatcher.unregister("pointertap",{query:null,callback:this.onClick})}}let xX=()=>{hp.registerComposedEvent(eB.dimensionHover,xU),hp.registerComposedEvent(eB.dimensionClick,xK)},xY=e=>e.fieldX[0],xq=e=>e.fieldY[0],xJ=e=>{var t;return[e.fieldX[0],null!=(t=e.fieldX2)?t:e.fieldX[1]]},xQ=e=>{var t;return[e.fieldY[0],null!=(t=e.fieldY2)?t:e.fieldY[1]]},x0=(e,t)=>e?t?xY:xJ:t?xq:xQ,x1=(e,t,i)=>{var r,n;if(!e)return null;let{x:l,y:o}=t,a=null!=(r=xV(e,e=>ve(e.getOrient()),t))?r:[],s=null!=(n=xV(e,e=>vt(e.getOrient()),t))?n:[];if(!a.length&&!s.length)return null;let h=new Set,d=new Set,u=new Set;[a,s].forEach(e=>e.forEach(e=>{(0,cz.lK)(e.getScale().type)?h.add(e):d.add(e),i&&e.getSpec().hasDimensionTooltip&&u.add(e)}));let c=[],p=e=>{let t="x"===e,i=t?l:o;(t?a:s).forEach(e=>{if(u.size>0){if(u.has(e)){let r=x2(e,i,x0(t,(0,cz.lK)(e.getScale().type)));r&&c.push(r)}}else{let r=h.size>0;if((r?h:d).has(e)){let n=x2(e,i,x0(t,r));n&&c.push(n)}}})};return"horizontal"===e.getSpec().direction?(p("y"),0===c.length&&p("x")):(p("x"),0===c.length&&p("y")),c.length?c:null},x2=(e,t,i)=>{let r=e.positionToData(t,!0);return(0,r5.Z)(r)?null:x3(e,r,i)},x3=(e,t,i)=>{let r=e.getScale();if((0,r5.Z)(t))return null;let n=r.domain().findIndex(e=>(null==e?void 0:e.toString())===t.toString());n<0&&(n=void 0);let l=xj(t,e,"cartesian",null!=i?i:ve(e.getOrient())?xY:xq);return{index:n,value:t,position:r.scale(t),axis:e,data:l}},x4=(e,t,i,r=!1)=>(i||(i={x:0,y:0}),Object.keys(e).forEach(n=>{var l,o,a,s,h,d;let u,{currentValue:c,cacheInfo:p,labelsComp:g,attributes:f,coordKey:m}=e[n],b=null,y=0,v=null;if(c.size){let e=Array.from(c.values())[0];y=e.axis.getScale().scale(e.datum)+e.axis.getLayoutStartPoint()[m]-i[m],v=null==(d=null==(h=null==(s=null==(a=null==(o=null==(l=(b=e.axis).getVRenderComponents()[0])?void 0:l.children[0])?void 0:o.children[0])?void 0:a.children[0])?void 0:s.getChildByName("axis-label-container"))?void 0:h.getChildByName("axis-label-container-layer-0"))?void 0:d.children[0]}let _=!!c.size&&Number.isFinite(y)&&!Number.isNaN(y),C=r&&!_&&(0,oV.Z)(p),x=C?p:{coordRange:[0,0],sizeRange:[0,0],coord:y,labelsTextStyle:{},labels:g?Object.keys(g).reduce((e,t)=>(e[t]={visible:!1,text:"",dx:0,dy:0},e),{}):null,visible:_,axis:b,axisLabel:v};x&&(x._isCache=C);let w=0;if(f&&c.forEach(({axis:e,datum:i=""})=>{var r,l,o,a,s,h,d,c,p,g;let m=null,b=e.getScale();if((0,cz.lK)(b.type))0===(u=b.bandwidth())&&b.step&&(w=b.step());else if((0,cz.z2)(b.type)){let r="xField"===n?t.fieldX[0]:t.fieldY[0],l="xField"===n?t.fieldX2:t.fieldY2,o=function(e,t,i,r){for(let n=0,l=e.length;n<l;n++){let l=e[n];if(l){let e=l[i],n=l[r||i];if(e<=t&&n>=t)return l}}return null}(t.getViewData().latestData,+i,r,l);if(o){let e="xField"===n?t.dataToPositionX(o):t.dataToPositionY(o);l?(u=Math.abs(e-("xField"===n?t.dataToPositionX1(o):t.dataToPositionY1(o))),i=`${o[r]} ~ ${o[l]}`):u=1,y=e}m=e.niceLabelFormatter}if(x&&(null==(r=f.label)?void 0:r.visible)&&!C){let t=vM(e.getSpec()),r=e.getOrient(),n=null==(l=f.label)?void 0:l.syncAxisLabelAngle;x.labels[r]&&(x.labels[r].visible=!0,x.labels[r].text=i,"left"===r?(x.labels[r].dx=-t,x.labelsTextStyle[r]={textAlign:n&&v&&null!=(o=v.attribute.textAlign)?o:"right",textBaseline:n&&v&&null!=(a=v.attribute.textBaseline)?a:"middle"}):"right"===r?(x.labels[r].dx=t,x.labelsTextStyle[r]={textAlign:n&&v&&null!=(s=v.attribute.textAlign)?s:"left",textBaseline:n&&v&&null!=(h=v.attribute.textBaseline)?h:"middle"}):"top"===r?(x.labels[r].y=0,x.labels[r].dy=-t,x.labelsTextStyle[r]={textAlign:n&&v&&null!=(d=v.attribute.textAlign)?d:"center",textBaseline:n&&v&&null!=(c=v.attribute.textBaseline)?c:"bottom"}):"bottom"===r&&(x.labels[r].dy=t,x.labelsTextStyle[r]={textAlign:n&&v&&null!=(p=v.attribute.textAlign)?p:"center",textBaseline:n&&v&&null!=(g=v.attribute.textBaseline)?g:"top"}),x.labels[r].defaultFormatter=m)}}),x&&!C){let e={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0};x6(e,c),"xField"===n?(x.coordRange=[e.x1,e.x2],x.sizeRange=[e.y1,e.y2],x.coord=y+i.x,x.labels&&(x.labels.top.y=e.y1,x.labels.bottom.y=e.y2)):(x.coordRange=[e.y1,e.y2],x.sizeRange=[e.x1,e.x2],x.coord=y+i.y,x.labels&&(x.labels.left.x=e.x1,x.labels.right.x=e.x2)),(x.coord<x.coordRange[0]||x.coord>x.coordRange[1])&&(x.visible=!1),f&&f.label&&Object.keys(x.labels).forEach(e=>{x.labels[e].visible&&x5(x.labels[e],e,f.label)})}e[n].bandSize=null!=u?u:0,e[n].offsetSize=w,e[n].cacheInfo=x}),e),x5=(e,t,i)=>{let{formatMethod:r,formatter:n}=i,{formatFunc:l,args:o}=mK(r,n,e.text,{label:e.text,position:t});l?e.text=l(...o):e.defaultFormatter&&(e.text=e.defaultFormatter(e.text))},x6=(e,t)=>{t.forEach(({axis:t})=>{t.getRegions().forEach(t=>{let{x:i,y:r}=t.getLayoutStartPoint(),{width:n,height:l}=t.getLayoutRect();e.x1=Math.min(e.x1,i),e.y1=Math.min(e.y1,r),e.x2=Math.max(e.x2,i+n),e.y2=Math.max(e.y2,r+l)})})},x8=e=>{let t,{cacheInfo:i,attributes:r,bandSize:n,offsetSize:l,coordKey:o,anotherAxisKey:a}=e,{coord:s,sizeRange:h}=i,d=r.type;if("line"===d){let e=s+n/2;t={visible:!0,start:{[o]:e,[a]:h[0]},end:{[o]:e,[a]:h[1]}}}else if("rect"===d){let[e,d]=x7(r,n,l,i.axis),{coordRange:u}=i;t={visible:!0,start:{[o]:Math.max(s+e,u[0]),[a]:h[0]},end:{[o]:Math.min(s+d,u[1]),[a]:h[1]}}}return t},x7=(e,t,i,r)=>{var n,l,o;let a=0===t?i:t,s=a;if(null==(n=e.style)?void 0:n.sizePercent)s=a*e.style.sizePercent;else if("number"==typeof(null==(l=e.style)?void 0:l.size))s=e.style.size;else if("function"==typeof(null==(o=e.style)?void 0:o.size)){let t=r.getLayoutRect();s=e.style.size(t,r)}return 0===t?[-s/2,s/2]:[t/2-s/2,s/2+t/2]},x9=(e,t)=>{var i;let r=new Map,n=new Map,{series:l,datum:o}=e,a="horizontal"===l.direction,s=(a?l.getYAxisHelper():l.getXAxisHelper()).getAxisId(),h=l.getChart().getComponentsByKey("axes").find(e=>e.id===s);if(!h)return;(a?n:r).set(h.getSpecIndex(),{datum:null==(i=l.getDatumPositionValues(o[0],l.getDimensionField()))?void 0:i[0],axis:h});let d={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:r,attributes:{visible:!!r.size,type:"rect"}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:n,attributes:{visible:!!n.size,type:"rect"}}};return x4(d,l,t),d.xField.cacheInfo?x8(d.xField):d.yField.cacheInfo?x8(d.yField):void 0},we=["updateTitle","updateContent","updatePosition","maxLineCount","othersLine"],wt=(e,t,i,r,n)=>{var l,o,a;let s={activeType:e};switch(e){case"mark":case"group":if(i){let a=null==(l=i.getSpec())?void 0:l.tooltip;return s.visible=!0,(null==a?void 0:a.handler)&&(s.handler=a.handler),(null==(o=s.handler)?void 0:o.showTooltip)?s:((null==a?void 0:a[e])&&we.forEach(t=>{(0,oV.Z)(a[e][t])&&(s[t]=a[e][t])}),Object.assign(Object.assign({},s),i.tooltipHelper.getTooltipData(e,t,r,r[0].datum,n)))}break;case"dimension":if(null==r?void 0:r.length){if(wi(r).every(e=>{var t;return!m0("dimension",null==(t=e.tooltipHelper)?void 0:t.spec)})?s.visible=!1:s.visible=!0,s.handler=t.handler,null==(a=s.handler)?void 0:a.showTooltip)return s;let i=[];return r.forEach(l=>l.data.forEach(l=>{let{series:o}=l,a=o.tooltipHelper.getTooltipData(e,t,r,l.datum,n);a&&i.push(a)})),function(e){if(!e||!e.length)return null;let t=[];return e.forEach(({content:e})=>{e&&e.forEach(e=>{t.push(e)})}),t.length?Object.assign(Object.assign({},e[0]),{content:t}):e[0]}(i)}}return null},wi=e=>{let t=[];return e.forEach(e=>{e.data.forEach(e=>{(0,oV.Z)(e.series)&&t.push(e.series)})}),t},wr={dom:`${dg}_TOOLTIP_HANDLER_DOM`,canvas:`${dg}_TOOLTIP_HANDLER_CANVAS`},wn={key:"",value:"..."};(eS=eO||(eO={})).group="group",eS.mark="mark",eS.dimension="dimension";class wl{constructor(e){this._showTooltipByHandler=(e,t)=>{var i,r,n;let l;if((0,r5.Z)(e))return 1;t.changePositionOnly||this.clearCache(),this._updateViewSpec(e,t);let o=this._cacheActiveSpec;if((0,r5.Z)(o)||!1===o.visible)return 1;t.tooltipSpec=this.component.getSpec(),t.activeTooltipSpec=o;let{title:a,content:s}=o,h=(0,r5.Z)(null==a?void 0:a.key)&&(0,r5.Z)(null==a?void 0:a.value)&&!(null==s?void 0:s.length);return(this.component.event.emit(N.tooltipShow,Object.assign(Object.assign({},t),{isEmptyTooltip:h,tooltipData:e,activeType:this.activeType,tooltip:this.component})),h)?1:((null==(i=o.handler)?void 0:i.showTooltip)?l=o.handler.showTooltip.bind(o.handler):(null==(r=this.component.tooltipHandler)?void 0:r.showTooltip)&&(l=this.component.tooltipHandler.showTooltip.bind(this.component.tooltipHandler)),l?null!=(n=l(this.activeType,e,t))?n:0:1)},this.component=e}_preprocessDimensionInfo(e){let t=[];if(null==e||e.forEach(e=>{let i=Object.assign(Object.assign({},e),{data:e.data.filter(({series:e})=>{var t,i;return!1!==(null==(i=null==(t=e.getSpec())?void 0:t.tooltip)?void 0:i.visible)})});i.data.length>0&&t.push(i)}),t.length>0)return t}_updateViewSpec(e,t){var i,r,n,l,o,a,s,h,d;let{changePositionOnly:u,model:c}=t;if(!u||!this._cacheActiveSpec){let u=this.component.getSpec();if(this._cacheActiveSpec=wt(this.activeType,this.component.getSpec(),c,e,t),this._cacheActiveSpec){(0,r5.Z)(this._cacheActiveSpec.handler)&&(0,oV.Z)(u.handler)&&(this._cacheActiveSpec.handler=u.handler);let c=null!=(i=u[this.activeType])?i:{},p=null!=(r=this._cacheActiveSpec.updateTitle)?r:c.updateTitle,g=null!=(n=this._cacheActiveSpec.updateContent)?n:c.updateContent,f=null!=(o=null!=(l=this._cacheActiveSpec.maxLineCount)?l:c.maxLineCount)?o:20;if(p&&(this._cacheActiveSpec.title=null!=(a=p(this._cacheActiveSpec.title,e,t))?a:this._cacheActiveSpec.title),g)this._cacheActiveSpec.content=null!=(s=g(this._cacheActiveSpec.content,e,t))?s:this._cacheActiveSpec.content;else if(f>=1&&(null==(h=this._cacheActiveSpec.content)?void 0:h.length)>f){let e=null!=(d=this._cacheActiveSpec.othersLine)?d:c.othersLine,t=e?Object.assign(Object.assign({},wn),e):wn;this._cacheActiveSpec.content=[...this._cacheActiveSpec.content.slice(0,f-1),Object.assign(Object.assign({},this._cacheActiveSpec.content[f-1]),t)]}}}}shouldHandleTooltip(e,t){var i,r;return!(0,r5.Z)(t)&&m0(this.activeType,null==(r=null==(i=e.model)?void 0:i.tooltipHelper)?void 0:r.spec)}clearCache(){this._cacheActiveSpec=void 0}}class wo extends wl{constructor(){super(...arguments),this.activeType="dimension"}showTooltip(e,t,i){let r=Object.assign(Object.assign({},t),{dimensionInfo:this._preprocessDimensionInfo(e),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(e,r)}_getDimensionInfo(e){var t,i,r;let n,l=this.component.getChart(),o=l.getCompiler().getStage().getLayer(void 0),a={x:e.event.viewX,y:e.event.viewY};if(o.globalTransMatrix.transformPoint({x:e.event.viewX,y:e.event.viewY},a),0===(n=null!=(r=null==(i=(t=this.component.getOption()).getDimensionInfo)?void 0:i.call(t,l,a,!0))?r:[]).length)n=void 0;else if(n.length>1){let e=n.filter(e=>{var t;let i,r=e.axis;if(r.getSpec().hasDimensionTooltip)return!0;if(!(0,cz.lK)(r.getScale().type))return!1;for(let e of null!=(t=null==r?void 0:r.getRegions())?t:[]){for(let t of e.getSeries())if("cartesian"===t.coordinate){i=t;break}if((0,oV.Z)(i))break}return(0,oV.Z)(i)&&i.getDimensionField()[0]===i.fieldY[0]?"left"===r.getOrient()||"right"===r.getOrient():"bottom"===r.getOrient()||"top"===r.getOrient()});if((n=e.length?e:n.slice(0,1)).length>1){let e=new Set;n.forEach(t=>{t.data=t.data.filter(({key:t})=>!e.has(t)&&(e.add(t),!0))})}}return n}getMouseEventData(e){return{tooltipInfo:this._getDimensionInfo(e),ignore:!1}}}let wa=()=>{hp.registerTooltipProcessor("dimension",wo)};class ws extends wl{constructor(){super(...arguments),this.activeType="mark"}showTooltip(e,t,i){var r,n,l;let{datum:o,series:a}=e,s=this.component.getSpec(),h=[{datum:[o],series:a}],d=a.tooltipHelper,u=null==(r=a.getSpec())?void 0:r.tooltip,c=null==(n=null==u?void 0:u.mark)?void 0:n.checkOverlap,p=!1;if(!0===c||!0===(null==(l=s.mark)?void 0:l.checkOverlap)&&!1!==c){let e=null==d?void 0:d.activeTriggerSet.mark;if(e){p=!0;let i=this.component.getChart().getCompiler().getStage().getLayer(void 0),r={x:t.event.viewX,y:t.event.viewY};i.globalTransMatrix.transformPoint({x:t.event.viewX,y:t.event.viewY},r),e.forEach(e=>{e.getGraphics().forEach(e=>{e!==t.node&&e&&e.containsPoint(r.x,r.y,sf.GLOBAL,e.stage.getPickerService())&&h[0].datum.push(hW(e))})})}}let g=Object.assign(Object.assign({},t),{model:a,changePositionOnly:i,tooltip:this.component});if(i&&p){let e=this._cacheActiveSpec&&this._cacheActiveSpec.data;e&&e[0].series===h[0].series&&e[0].datum.length===h[0].datum.length&&!e[0].datum.some((e,t)=>e!==h[0].datum[t])||(g.changePositionOnly=!1)}return this._showTooltipByHandler(h,g)}getMouseEventData(e){var t;let i,r,n=null==(t=e.model)?void 0:t.modelType;if("series"===n){let t=e.model,n=t.tooltipHelper,l=null==n?void 0:n.activeTriggerSet.mark,o=null==n?void 0:n.ignoreTriggerSet.mark;(null==l?void 0:l.has(e.mark))?i={mark:e.mark,datum:e.datum,series:t}:(null==o?void 0:o.has(e.mark))&&(r=!0)}else if("component"===n){let t=e.model,n=e.node;if("label"===t.name&&n){let e=t.getLabelInfoByTextGraphic(n),{baseMark:l,series:o,labelMark:a}=null!=e?e:{},s=o.tooltipHelper,h=null==s?void 0:s.activeTriggerSet.mark,d=null==s?void 0:s.ignoreTriggerSet.mark;(null==h?void 0:h.has(a))?i={mark:l,datum:n.attribute.data,series:o}:(null==d?void 0:d.has(a))&&(r=!0)}}return{tooltipInfo:i,ignore:r}}}let wh=()=>{hp.registerTooltipProcessor("mark",ws)};class wd extends wl{constructor(){super(...arguments),this.activeType="group"}showTooltip(e,t,i){let{datum:r,series:n}=e,l=[{datum:(0,ag.IX)(r),series:n}],o=Object.assign(Object.assign({},t),{groupDatum:this._getGroupDatum(t),changePositionOnly:i,tooltip:this.component});return this._showTooltipByHandler(l,o)}getMouseEventData(e){var t,i;let r;if("series"===(null==(t=e.model)?void 0:t.modelType)){let t=e.model,n=t.tooltipHelper,l=null==n?void 0:n.activeTriggerSet.group;if(null==l?void 0:l.has(e.mark)){let n=this.component.getSpec()[this.activeType];((null==n?void 0:n.triggerMark)?(0,ag.IX)(n.triggerMark):[]).includes(null==(i=e.mark)?void 0:i.name)&&(r={mark:e.mark,datum:e.datum,series:t})}}return{tooltipInfo:r,ignore:!1}}_getGroupDatum(e){let{model:t,mark:i,datum:r}=e;if(["line","area"].includes(i.type))return(0,ag.IX)(r);let n=t.getViewData().latestData,l=t.getSeriesField();if(!l)return n;let o=(0,ag.IX)(r)[0][l];return n.filter(e=>e[l]===o)}}let wu=()=>{hp.registerTooltipProcessor("group",wd)};class wc extends xB{constructor(){super(...arguments),this.transformerConstructor=xM,this.type="line",this.seriesType=z.line}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}wc.type="line",wc.seriesType=z.line,wc.transformerConstructor=xM,(0,gH.jB)(wc,xF);let wp=["segments","points","curveType","curveTension",...l7];class wg extends on{constructor(e){super(e),this.type="area",this.numberType=lP}isValid(){return super.isValid()&&this._isValid()}_isValid(){if(this.pathProxy)return!0;let{points:e,segments:t}=this.attribute;return t?0!==t.length:!!e&&0!==e.length}getGraphicTheme(){return r4(this).area}updateAABBBounds(e,t,i){this.updatePathProxyAABBBounds(i)||(e.segments?this.updateAreaAABBBoundsBySegments(e,t,i):this.updateAreaAABBBoundsByPoints(e,t,i)),tU.graphicService.updateTempAABBBounds(i),this.setWidthHeightWithoutTransform(i);let{lineJoin:r=t.lineJoin}=e;return tU.graphicService.transformAABBBounds(e,i,t,"miter"===r,this),i}updateAreaAABBBoundsByPoints(e,t,i,r){let{points:n=t.points}=e;return n.forEach(e=>{var t,r;i.add(e.x,e.y),i.add(null!=(t=e.x1)?t:e.x,null!=(r=e.y1)?r:e.y)}),i}updateAreaAABBBoundsBySegments(e,t,i,r){let{segments:n=t.segments}=e;return n.forEach(e=>{e.points.forEach(e=>{var t,r;i.add(e.x,e.y),i.add(null!=(t=e.x1)?t:e.x,null!=(r=e.y1)?r:e.y)})}),i}_interpolate(e,t,i,r,n){"points"===e&&(n.points=nb(i,r,t))}needUpdateTags(e){return super.needUpdateTags(e,wp)}needUpdateTag(e){return super.needUpdateTag(e,wp)}toCustomPath(){let e=super.toCustomPath();if(e)return e;e=new iZ;let t=this.attribute,i=t.segments,r=t=>{if(t&&t.length){let i=!0,r=[];if(t.forEach(t=>{var n,l;!1!==t.defined&&(i?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y),r.push({x:null!=(n=t.x1)?n:t.x,y:null!=(l=t.y1)?l:t.y}),i=!1)}),r.length){for(let t=r.length-1;t>=0;t--)e.lineTo(r[t].x,r[t].y);e.closePath()}}};return t.points?r(t.points):i&&i.length&&i.forEach(e=>{r(e.points)}),e}clone(){return new wg(Object.assign({},this.attribute))}getNoWorkAnimateAttr(){return wg.NOWORK_ANIMATE_ATTR}}function wf(e){return new wg(e)}wg.NOWORK_ANIMATE_ATTR=Object.assign({segments:1,curveType:1},or);let wm=!1,wb=new tb(e=>{wm||(wm=!0,e(a6).toSelf().inSingletonScope(),e(oy).to(a6).inSingletonScope(),e(o_).toService(oy),e(aA).toService(aD),tB(e,aA),e(a8).toSelf().inSingletonScope())}),wy=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="area",this.numberType=lP}};wy=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(eA=tT(oy),function(e,t){eA(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],wy);let wv=!1,w_=new tb((e,t,i,r)=>{wv||(wv=!0,e(us).to(wy).inSingletonScope(),e(u_).toService(us))}),wC=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="area",this.numberType=lP}};wC=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(ek=tT(oy),function(e,t){ek(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],wC);let wx=!1,ww=new tb((e,t,i,r)=>{wx||(wx=!0,e(d8).to(wC).inSingletonScope(),e(d5).toService(d8))});function wS(){wS.__loaded||(wS.__loaded=!0,oq.RegisterGraphicCreator("area",wf),tG.load(wb),tG.load(d4?w_:ww))}wS.__loaded=!1;let wA=[...bF,"fill","fillOpacity","background","texture","texturePadding","textureSize","textureColor"];class wk extends bH{constructor(){super(...arguments),this.type=wk.type,this._isValidPointChannel=e=>["x","y","x1","y1","defined"].includes(e)}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}_getSegmentAttributes(){return wA}_getIgnoreAttributes(){return[]}}wk.type="area";let wM=()=>{hp.registerMark(wk.type,wk),pN(),wS(),yq(),y0(),mp(),hp.registerGraphicComponent("area",wf)};class wT extends m4{constructor(){super(...arguments),this._getSeriesStyle=(e,t,i)=>{var r,n,l,o;for(let i of(0,ag.IX)(t)){let t=null==(r=this.series.getSeriesStyle(e))?void 0:r(i);if(!1!==t||"fill"!==i&&"stroke"!==i||(t="fill"===i?null==(l=null==(n=this.series.getSeriesStyle(e))?void 0:n("stroke"))?void 0:l[0]:null==(o=this.series.getSeriesStyle(e))?void 0:o("fill")),(0,oV.Z)(t))return t}return i}}}let wR=Object.assign(Object.assign(Object.assign({},bo),bT),{area:{name:"area",type:"area"}}),wE=()=>{mh(),ms(),mn()};class wP extends y5{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(e){var t,i,r;let n=!1!==(null==(t=e.point)?void 0:t.visible)&&!1!==(null==(r=null==(i=e.point)?void 0:i.style)?void 0:r.visible);this._addMarkLabelSpec(e,e=>{let t="inside-middle"===e.position;return!n||t?"area":"point"}),this._addMarkLabelSpec(e,"area","areaLabel","initLineLabelMarkStyle",void 0,!0)}_transformSpecAfterMergingTheme(e,t,i){var r,n,l,o,a;super._transformSpecAfterMergingTheme(e,t,i);let{area:s={},line:h={},seriesMark:d}=e,u=!1!==s.visible&&!1!==(null==(r=s.style)?void 0:r.visible),c=!1!==h.visible&&!1!==(null==(n=h.style)?void 0:n.visible);s.support3d=!(!s.support3d&&!h.support3d),s.zIndex=(0,oV.Z)(s.zIndex)||(0,oV.Z)(h.zIndex)?Math.max(null!=(l=s.zIndex)?l:0,null!=(o=h.zIndex)?o:0):void 0,s.style&&delete s.style.stroke,s.state&&Object.keys(s.state).forEach(e=>{"style"in s.state[e]?delete s.state[e].style.stroke:delete s.state[e].stroke});let p=s,g=h;("line"===d||c&&!u)&&(p=h,g=s),s.style=hs({},g.style,p.style),s.state=hs({},g.state,p.state),!1===s.interactive&&(s.style.fillPickable=!1),!1===h.interactive&&(h.style.strokePickable=!1),s.interactive=!(!s.interactive&&null!=(a=h.interactive)&&!a),e.area=s,e.line=h}}class wB extends bA{constructor(){super(...arguments),this.type=z.area,this.transformerConstructor=wP,this._sortDataByAxis=!1}initMark(){var e;let t=null!=(e=this._spec.seriesMark)?e:"area",i=this._isAreaVisible()||this._isLineVisible();this._areaMark=this._createMark(wB.mark.area,{groupKey:this._seriesField,isSeriesMark:i&&"point"!==t},{morphElementKey:this.getDimensionField()[0]}),this.initSymbolMark("point"===t)}initMarkStyle(){this.initAreaMarkStyle(),this.initSymbolMarkStyle()}initAreaMarkStyle(){var e,t,i,r,n;let l=null!=(i=null==(t=null==(e=this.getSpec().area)?void 0:e.style)?void 0:t.curveType)?i:null==(n=null==(r=this.getSpec().line)?void 0:r.style)?void 0:n.curveType,o=l===bk?"horizontal"===this._direction?"monotoneY":"monotoneX":l,a=this._areaMark;if(a){let e=this._isAreaVisible(),t=this._isLineVisible();e||t?a.setVisible(!0):a.setVisible(!1),"horizontal"===this._direction?this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:e=>{var t,i;return cL(this.dataToPositionX1(e),null==(i=null==(t=this._xAxisHelper)?void 0:t.getScale)?void 0:i.call(t,0))},y:this.dataToPositionY.bind(this),y1:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,orient:this._direction},"normal",q.Series):this.setMarkStyle(this._areaMark,{x:this.dataToPositionX.bind(this),x1:this.dataToPositionX.bind(this),y1:e=>{var t,i;return cL(this.dataToPositionY1(e),null==(i=null==(t=this._yAxisHelper)?void 0:t.getScale)?void 0:i.call(t,0))},y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null},"normal",q.Series),this.setMarkStyle(a,{fill:!!e&&this.getColorAttribute(),stroke:!!t&&this.getColorAttribute()},"normal",q.Series),"zero"!==this._invalidType&&this.setMarkStyle(a,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",q.Series),this.getStack()&&this.setMarkStyle(a,{zIndex:e=>-e[dC]},"normal",q.Series),this.setMarkStyle(a,{curveType:o},"normal",q.Built_In),Object.keys(a.stateStyle).forEach(e=>{a.stateStyle[e].stroke&&a.setPostProcess("stroke",e=>[e,!1,!1,!1],e)})}}initAnimation(){var e,t,i,r;let n={direction:this.direction},l=null==(e=this._spec.animationAppear)?void 0:e.preset;if(this._lineMark&&this._lineMark.setAnimationConfig(bg(null==(t=hp.getAnimationInKey("line"))?void 0:t(n,l),bf("line",this._spec,this._markAttributeContext))),this._areaMark&&this._areaMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("area"))?void 0:i(n,l),bf("area",this._spec,this._markAttributeContext))),this._symbolMark){let e=bS(this);this._symbolMark.setAnimationConfig(bg(null==(r=hp.getAnimationInKey("scaleInOut"))?void 0:r(),bf("point",this._spec,this._markAttributeContext),e))}}_isAreaVisible(){var e;let t=this._spec.area||{};return!1!==t.visible&&!1!==(null==(e=t.style)?void 0:e.visible)}_isLineVisible(){var e;let t=this._spec.line||{};return!1!==t.visible&&!1!==(null==(e=t.style)?void 0:e.visible)}initTooltip(){this._tooltipHelper=new wT(this);let{group:e,mark:t}=this._tooltipHelper.activeTriggerSet;this._areaMark&&e.add(this._areaMark),this._lineMark&&e.add(this._lineMark),this._symbolMark&&(t.add(this._symbolMark),e.add(this._symbolMark))}viewDataStatisticsUpdate(e){super.viewDataStatisticsUpdate(e),this.encodeDefined(this._areaMark,"defined")}compile(){super.compile(),this.addSamplingCompile(),this.addOverlapCompile()}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}onLayoutEnd(){super.onLayoutEnd(),this.reCompileSampling()}getSeriesStyle(e){return t=>{var i,r,n,l,o;let a=null!=(i=this._spec.seriesMark)?i:"area",s=null!=(n=null==(r=this._seriesMark)?void 0:r.getAttribute(t,e))?n:void 0;return"fill"!==t||s&&"line"!==a||(t="stroke",s=null!=(o=null==(l=this._seriesMark)?void 0:l.getAttribute(t,e))?o:void 0),"stroke"===t&&(0,ri.Z)(s)?s[0]:s}}}wB.type=z.area,wB.builtInTheme={area:{label:{visible:!1,offset:5,position:"top",style:{stroke:{type:"palette",key:"backgroundColor"},lineWidth:2}},point:{style:{symbolType:"circle"}},seriesMark:"area"}},wB.mark=wR,wB.transformerConstructor=wP,(0,gH.jB)(wB,bR);let wI=()=>{x_(),xu(),y2(),wM(),y4(),wE(),C1(),xa(),hp.registerSeries(wB.type,wB)};class wL extends xk{_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["point","line","area","seriesMark","activePoint","sampling","samplingFactor","pointDis","pointDisMul","markOverlap","areaLabel","useSequentialAnimation"])}transformSpec(e){super.transformSpec(e),ci(e)}}class wF extends xB{constructor(){super(...arguments),this.transformerConstructor=wL,this.type="area",this.seriesType=z.area}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}function wH(e,t=!0){return(i,r,n)=>{let l="vertical"===e.direction?e.yField:e.xField,o=null==i?void 0:i[l];return"vertical"===e.direction?{overall:t?e.growFrom():t,orient:o>0?"negative":"positive"}:{overall:!!t&&e.growFrom(),orient:o>0?"positive":"negative"}}}wF.type="area",wF.seriesType=z.area,wF.transformerConstructor=wL,(0,gH.jB)(wF,xF);let wO=(e,t=!0)=>({type:"horizontal"===e.direction?"growWidthIn":"growHeightIn",options:wH(e,t)}),wD=(e,t=!0)=>({type:"horizontal"===e.direction?"growWidthOut":"growHeightOut",options:wH(e,t)}),wz={type:"fadeIn"},wW={type:"growCenterIn"},wZ=()=>{hp.registerAnimation("bar",(e,t)=>({appear:function(e,t){if(!1===t)return{};switch(t){case"fadeIn":return wz;case"scaleIn":return wW;default:return wO(e)}}(e,t),enter:wO(e,!1),exit:wD(e,!1),disappear:{duration:mt.disappear.duration}}))};var wN=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class w$ extends yG{constructor(e,t){let{data:i}=e;super((null==t?void 0:t.skipDefault)?e:Object.assign({data:i},(0,ha.Z)({},w$.defaultAttributes,wN(e,["data"]))))}labeling(e,t,i="top",r=0){if(!e||!t)return;let{x1:n,y1:l,x2:o,y2:a}=e,s=Math.abs(o-n),h=Math.abs(a-l),{x:d,y:u}=(0,_s.v1)(t,i),c=0,p=0,g=i.includes("inside");switch(i.includes("top")?p=g?1:-1:i.includes("bottom")?p=g?-1:1:i.includes("left")?c=g?1:-1:i.includes("right")&&(c=g?-1:1),i){case"top-right":case"bottom-right":c=-1;break;case"top-left":case"bottom-left":c=1}return{x:d+c*r+c*s/2,y:u+p*r+p*h/2}}}w$.tag="rect-label",w$.defaultAttributes={textStyle:{fill:"#000"},position:"top",offset:5};let wj=()=>{yU("rect",w$)};class wG extends pz{constructor(){super(...arguments),this.type=wG.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}wG.type="rect";let wV=()=>{pN(),ct(),wj(),hp.registerMark(wG.type,wG),mu(),hp.registerGraphicComponent("rect",uU)},wU=Object.assign(Object.assign({},bo),{bar:{name:"bar",type:"rect"},barBackground:{name:"barBackground",type:"rect"}});function wK(e,t,i,r,n,l){let o=i.getSpec().barMinHeight,a=i[r.axisHelper].isInverse(),s=cL(i[r.startMethod](e),n),h=cL(i[r.endMethod](e),n);l&&(t=s);let d=Math.abs(s-h);d<=0&&!cF(e[i.getStackValueField()],n)?d=0:d<o&&(d=o);let u=1;return h<s?u=-1:h===s&&(u=r.isVertical?a?1:-1:a?-1:1),h=t+u*d,e[r.start]=t,e[r.end]=h,h}class wX extends bC{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(e){this._addMarkLabelSpec(e,"bar")}}class wY extends bA{constructor(){super(...arguments),this.type=z.bar,this._barMarkName="bar",this._barMarkType="rect",this.transformerConstructor=wX,this._bandPosition=0,this._getLinearBarRange=(e,t)=>{let[i,r]=[e,t].sort((e,t)=>e-t),n=r-i;if(this._spec.barGap){let e=.5*this._spec.barGap;i+=e,r-=e}let l=r-i,o=sU(this._spec.barMinWidth||2,n);if(l<o){let e=(o-l)/2;i-=e,r+=e}return[i,r]},this._getBarXStart=(e,t,i)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),e[ba]):this._spec.barMinHeight?this._calculateRectPosition(e,!1,i):cL(this._dataToPosX(e),t,i),this._getBarXEnd=(e,t,i)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!1),e[bs]):cL(this._dataToPosX1(e),t,i),this._getLinearBarXRange=(e,t,i)=>{let r=cL(this._dataToPosX(e),t,i),n=cL(this._dataToPosX1(e),t,i);return this._getLinearBarRange(r,n)},this._getBarYStart=(e,t)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),e[bh]):this._spec.barMinHeight?this._calculateRectPosition(e,!0):cL(this._dataToPosY(e),t),this._getBarYEnd=(e,t)=>this._shouldDoPreCalculate()?(this._calculateStackRectPosition(!0),e[bd]):cL(this._dataToPosY1(e),t),this._getLinearBarYRange=(e,t,i)=>{let r=cL(this._dataToPosY(e),t,i),n=cL(this._dataToPosY1(e),t,i);return this._getLinearBarRange(r,n)},this._getBarBackgroundXStart=e=>{let t=e.range();return Math.min(t[0],t[t.length-1])},this._getBarBackgroundXEnd=e=>{let t=e.range();return Math.max(t[0],t[t.length-1])},this._getBarBackgroundYStart=e=>{let t=e.range();return Math.min(t[0],t[t.length-1])},this._getBarBackgroundYEnd=e=>{let t=e.range();return Math.max(t[0],t[t.length-1])},this._getBarBackgroundPositionXEncoder=()=>{var e;return null==(e=this._barBackgroundPositionXEncoder)?void 0:e.bind(this)},this._setBarBackgroundPositionXEncoder=e=>{this._barBackgroundPositionXEncoder=e.bind(this)},this._getBarBackgroundPositionYEncoder=()=>{var e;return null==(e=this._barBackgroundPositionYEncoder)?void 0:e.bind(this)},this._setBarBackgroundPositionYEncoder=e=>{this._barBackgroundPositionYEncoder=e.bind(this)}}initMark(){this._initBarBackgroundMark(),this._barMark=this._createMark(Object.assign(Object.assign({},wY.mark.bar),{name:this._barMarkName,type:this._barMarkType}),{groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this.getDimensionField()[0],morph:by(this._spec,this._barMarkName)})}_initBarBackgroundMark(){this._spec.barBackground&&this._spec.barBackground.visible&&(this._barBackgroundMark=this._createMark(wY.mark.barBackground,{dataView:this._barBackgroundViewData.getDataView(),dataProductId:this._barBackgroundViewData.getProductId()}))}initMarkStyle(){this._barMark&&this.setMarkStyle(this._barMark,{fill:this.getColorAttribute()},"normal",q.Series)}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initTooltip(){super.initTooltip();let{mark:e,group:t}=this._tooltipHelper.activeTriggerSet;this._barMark&&(e.add(this._barMark),t.add(this._barMark))}_statisticViewData(){var e,t;let i;super._statisticViewData();let r=null!=(e=this._spec.barBackground)?e:{};if(!r.visible)return;let n=this._getRelatedComponentSpecInfo("axes").some(e=>e.type===sc.cartesianBandAxis);if(hK(this._option.dataSet,"addVChartProperty",mG),n)hK(this._option.dataSet,"dimensionItems",([e],{scaleDepth:t})=>{var i,r;let n=[{}],l=this.getDimensionField(),o=(0,r5.Z)(t)?l.length:Math.min(l.length,t);for(let t=0;t<o;t++){let o=l[t],a=null==(i=e.latestData[o])?void 0:i.values;if(!(null==a?void 0:a.length))continue;let s=[],h=null!=(r=this._spec.dataKey)?r:dm;for(let e=0;e<a.length;e++)for(let t=0;t<n.length;t++)s.push(Object.assign(Object.assign({},n[t]),{[o]:a[e],[h]:a[e]}));n=s}return n}),i=new tf.V(this._option.dataSet).parse([this._viewDataStatistics],{type:"dataview"}).transform({type:"dimensionItems",options:{scaleDepth:(0,r5.Z)(r.fieldLevel)?void 0:r.fieldLevel+1}},!1).transform({type:"addVChartProperty",options:{beforeCall:bi.bind(this),call:br}},!1),null==(t=this._viewDataStatistics)||t.target.addListener("change",i.reRunAllTransform);else{hK(this._option.dataSet,"dimensionItems",([t])=>{let i=[],[r,n]=this.getDimensionContinuousField(),l={};return e.latestData.forEach(e=>{let t=`${e[r]}-${e[n]}`;l[t]||(l[t]={[r]:e[r],[n]:e[n]},i.push(l[t]))}),i});let e=this.getViewData();i=new tf.V(this._option.dataSet).parse([e],{type:"dataview"}).transform({type:"dimensionItems"},!1).transform({type:"addVChartProperty",options:{beforeCall:bi.bind(this),call:br}},!1),null==e||e.target.addListener("change",i.reRunAllTransform)}this._barBackgroundViewData=new cj(this._option,i)}init(e){var t,i;super.init(e),"vertical"===this.direction?"band"===(null==(t=this._xAxisHelper)?void 0:t.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle():"band"===(null==(i=this._yAxisHelper)?void 0:i.getScale(0).type)?this.initBandRectMarkStyle():this.initLinearRectMarkStyle()}_shouldDoPreCalculate(){let e=this.getRegion();return this.getStack()&&e.getSeries().filter(e=>e.type===this.type&&e.getSpec().barMinHeight).length}_calculateStackRectPosition(e){let t,i,r,n,l,o=this.getRegion();if(o._bar_series_position_calculated)return;o._bar_series_position_calculated=!0,e?(t=bd,i=bh,r="_dataToPosY1",n="_dataToPosY",l="_yAxisHelper"):(t=bs,i=ba,r="_dataToPosX1",n="_dataToPosX",l="_xAxisHelper");let a=m$(o,!1,e=>e.type===this.type);for(let s in a)for(let h in a[s].nodes)!function e(t,i,r){var n,l;if(t.values.length>0){let e;if(t.sortDatums.length){let o=t.sortDatums;i&&(o=t.sortDatums.slice().reverse());for(let t=0;t<o.length;t++)e=wK(o[t].datum,e,o[t].series,r,null==(l=(n=o[t].series[r.axisHelper]).getScale)?void 0:l.call(n,0),0===t)}else{let n=t.series;i&&(n=n.slice().reverse()),n.forEach(({s:t,values:n},l)=>{var o,a;let s=null==(a=(o=t[r.axisHelper]).getScale)?void 0:a.call(o,0);for(let o=0;o<n.length;o++)e=wK(n[i?n.length-1-o:o],e,t,r,s,0===o&&0===l)})}}for(let n in t.nodes)e(t.nodes[n],i,r)}(a[s].nodes[h],o.getStackInverse(),{isVertical:e,start:t,end:i,startMethod:r,endMethod:n,axisHelper:l})}_calculateRectPosition(e,t,i){var r,n;let l,o,a;t?(l="_dataToPosY1",o="_dataToPosY",a="_yAxisHelper"):(l="_dataToPosX1",o="_dataToPosX",a="_xAxisHelper");let s=null==(n=(r=this[a]).getScale)?void 0:n.call(r,0),h=this[a].isInverse(),d=this._spec.barMinHeight,u=cL(this[l](e),s,i),c=cL(this[o](e),s,i),p=Math.abs(u-c);p<=0&&!cF(e[this.getStackValueField()],s)?p=0:p<d&&(p=d);let g=1;return c<u?g=-1:c===u&&(g=t?h?1:-1:h?-1:1),u+g*p}_dataToPosX(e){return this.dataToPositionX(e)}_dataToPosX1(e){return this.dataToPositionX1(e)}_dataToPosY(e){return this.dataToPositionY(e)}_dataToPosY1(e){return this.dataToPositionY1(e)}initBandRectMarkStyle(){var e,t,i,r;let n=null==(t=null==(e=this._xAxisHelper)?void 0:e.getScale)?void 0:t.call(e,0),l=null==(r=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:r.call(i,0);"horizontal"===this.direction?this.setMarkStyle(this._barMark,{x:e=>this._getBarXStart(e,n),x1:e=>this._getBarXEnd(e,n),y:e=>this._getPosition(this.direction,e),height:()=>this._getBarWidth(this._yAxisHelper),width:()=>{},y1:()=>{}},"normal",q.Series):this.setMarkStyle(this._barMark,{y:e=>this._getBarYStart(e,l),y1:e=>this._getBarYEnd(e,l),x:e=>this._getPosition(this.direction,e),width:()=>this._getBarWidth(this._xAxisHelper),x1:()=>{},height:()=>{}},"normal",q.Series),this._initStackBarMarkStyle(),this._initBandBarBackgroundMarkStyle()}_initStackBarMarkStyle(){var e,t,i,r;if(!this._spec.stackCornerRadius)return;let n=null==(t=null==(e=this._xAxisHelper)?void 0:e.getScale)?void 0:t.call(e,0),l=null==(r=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:r.call(i,0);this._barMark.setMarkConfig({clip:!0,clipPath:()=>{let e=[];return this._forEachStackGroup(t=>{let i=1/0,r=-1/0,o=!1,a=1/0,s=-1/0;t.values.forEach(e=>{let t=e[d_],n=e[dC],l=e[dx],h=e[dw];i=Math.min(i,t,n),r=Math.max(r,t,n),(0,oV.Z)(l)&&(0,oV.Z)(h)&&(o=!0,a=Math.min(a,l,h),s=Math.max(s,l,h))});let h=Object.assign(Object.assign(Object.assign({},t.values[0]),{[d_]:i,[dC]:r}),o?{[dx]:a,[dw]:s}:void 0),d="horizontal"===this.direction?{x:this._getBarXStart(h,n),x1:this._getBarXEnd(h,n),y:this._getPosition(this.direction,h),height:this._getBarWidth(this._yAxisHelper)}:{y:this._getBarYStart(h,l),y1:this._getBarYEnd(h,l),x:this._getPosition(this.direction,h),width:this._getBarWidth(this._xAxisHelper)};e.push(uU(Object.assign(Object.assign({},d),{cornerRadius:(0,nr.Z)(this._spec.stackCornerRadius)?this._spec.stackCornerRadius(d,h,this._markAttributeContext):this._spec.stackCornerRadius,fill:!0})))}),e}})}initLinearRectMarkStyle(){var e,t,i,r;let n=null==(t=null==(e=this._xAxisHelper)?void 0:e.getScale)?void 0:t.call(e,0),l=null==(r=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:r.call(i,0);if("horizontal"===this.direction){let e=(0,oV.Z)(this._fieldY2)?{y:e=>this._getLinearBarYRange(e,l,!0)[0],y1:e=>this._getLinearBarYRange(e,l,!0)[1]}:{y:e=>cL(this._dataToPosY(e)-this._getBarWidth(this._yAxisHelper)/2,l,!0),height:e=>this._getBarWidth(this._yAxisHelper)};this.setMarkStyle(this._barMark,Object.assign({x:e=>this._getBarXStart(e,n,!0),x1:e=>this._getBarXEnd(e,n,!0)},e),"normal",q.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign({x:()=>this._getBarBackgroundXStart(n),x1:()=>this._getBarBackgroundXEnd(n)},e),"normal",q.Series)}else{let e=(0,oV.Z)(this._fieldX2)?{x:e=>this._getLinearBarXRange(e,n,!0)[0],x1:e=>this._getLinearBarXRange(e,n,!0)[1]}:{x:e=>cL(this._dataToPosX(e)-this._getBarWidth(this._xAxisHelper)/2,n,!0),width:e=>this._getBarWidth(this._xAxisHelper)};this.setMarkStyle(this._barMark,Object.assign(Object.assign({},e),{y:e=>this._getBarYStart(e,l),y1:e=>this._getBarYEnd(e,l)}),"normal",q.Series),this.setMarkStyle(this._barBackgroundMark,Object.assign(Object.assign({},e),{y:()=>this._getBarBackgroundYStart(l),y1:()=>this._getBarBackgroundYEnd(l)}),"normal",q.Series)}}_initBandBarBackgroundMarkStyle(){var e,t,i,r,n;if(!this._barBackgroundMark)return;let l=null==(t=null==(e=this._xAxisHelper)?void 0:e.getScale)?void 0:t.call(e,0),o=null==(r=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:r.call(i,0),a=null!=(n=this._spec.barBackground)?n:{},s=(0,r5.Z)(a.fieldLevel)?void 0:a.fieldLevel+1;"horizontal"===this.direction?this.setMarkStyle(this._barBackgroundMark,{x:()=>this._getBarBackgroundXStart(l),x1:()=>this._getBarBackgroundXEnd(l),y:e=>this._getPosition(this.direction,e,s,"barBackground"),height:()=>this._getBarWidth(this._yAxisHelper,s),width:()=>{},y1:()=>{}},"normal",q.Series):this.setMarkStyle(this._barBackgroundMark,{x:e=>this._getPosition(this.direction,e,s,"barBackground"),y:()=>this._getBarBackgroundYStart(o),y1:()=>this._getBarBackgroundYEnd(o),width:()=>this._getBarWidth(this._xAxisHelper,s),x1:()=>{},height:()=>{}},"normal",q.Series)}initAnimation(){var e,t;let i={yField:this._fieldY[0],xField:this._fieldX[0],direction:this.direction,growFrom:()=>{var e;let t="horizontal"===this.direction?null==(e=this._xAxisHelper)?void 0:e.getScale(0):this._yAxisHelper.getScale(0);if(t){let e=t.domain(),i=(0,ag.iH)(e),r=(0,ag.CE)(e);return r<0?t.scale(r):i>0?t.scale(i):t.scale(0)}}},r=null==(e=this._spec.animationAppear)?void 0:e.preset,n=bS(this);this._barMark.setAnimationConfig(bg(null==(t=hp.getAnimationInKey("bar"))?void 0:t(i,r),bf(this._barMarkName,this._spec,this._markAttributeContext),n))}_getBarWidth(e,t){var i,r;let n=this._groups?this._groups.fields.length:1,l=(0,r5.Z)(t)?n:Math.min(n,t),o=null!=(r=null==(i=e.getBandwidth)?void 0:i.call(e,l-1))?r:6,a=(0,oV.Z)(this._spec.barWidth)&&l===n,s=(0,oV.Z)(this._spec.barMinWidth),h=(0,oV.Z)(this._spec.barMaxWidth),d=o;return a&&(d=sU(this._spec.barWidth,o)),s&&(d=Math.max(d,sU(this._spec.barMinWidth,o))),h&&(d=Math.min(d,sU(this._spec.barMaxWidth,o))),d}_getPosition(e,t,i,r){var n,l,o,a,s;let h,d,u;"horizontal"===e?(h=this.getYAxisHelper(),d="height",u="barBackground"===r?this.dataToBarBackgroundPositionY.bind(this):this.dataToPositionY.bind(this)):(h=this.getXAxisHelper(),d="width",u="barBackground"===r?this.dataToBarBackgroundPositionX.bind(this):this.dataToPositionX.bind(this));let c=h.getScale(0),p=this._groups?this._groups.fields.length:1,g=(0,r5.Z)(i)?p:Math.min(p,i),f=null!=(l=null==(n=h.getBandwidth)?void 0:n.call(h,g-1))?l:6,m=g===p?this._barMark.getAttribute(d,t):f;if(g>1&&(0,oV.Z)(this._spec.barGapInGroup)){let e=this._groups.fields,i=(0,ag.IX)(this._spec.barGapInGroup),r=0,n=0;for(let l=e.length-1;l>=1;l--){let d=e[l],u=null!=(a=null==(o=h.getScale(l))?void 0:o.domain())?a:[],c=u.length,p=sU(null!=(s=i[l-1])?s:(0,ag.Z$)(i),f),g=u.indexOf(t[d]);l===e.length-1?(r+=c*m+(c-1)*p,n+=g*(m+p)):(n+=g*(r+p),r+=r+(c-1)*p)}return c.scale(t[e[0]])+h.getBandwidth(0)/2-r/2+n}let b=(0,cz.z2)(c.type||"band");return u(t,g)+.5*(f-m)+(b?-f/2:0)}dataToBarBackgroundPositionX(e,t){return this._dataToPosition(e,this._xAxisHelper,this.fieldX,t,this._getBarBackgroundPositionXEncoder,this._setBarBackgroundPositionXEncoder)}dataToBarBackgroundPositionY(e,t){return this._dataToPosition(e,this._yAxisHelper,this.fieldY,t,this._getBarBackgroundPositionYEncoder,this._setBarBackgroundPositionYEncoder)}onLayoutEnd(){super.onLayoutEnd(),this.getRegion()._bar_series_position_calculated=!1,this._spec.sampling&&this.compile()}onDataUpdate(){super.onDataUpdate(),this.getRegion()._bar_series_position_calculated=!1}compile(){if(super.compile(),this._spec.sampling){let{width:e,height:t}=this._region.getLayoutRect(),i=this._fieldY,r=this._fieldX;this._data.setTransform([{type:"sampling",size:"horizontal"===this._direction?t:e,factor:this._spec.samplingFactor,yfield:"horizontal"===this._direction?r[0]:i[0],groupBy:this._seriesField,mode:this._spec.sampling}])}}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._barMark]}compileData(){var e;super.compileData(),null==(e=this._barBackgroundViewData)||e.compile()}fillData(){var e,t;super.fillData(),null==(t=null==(e=this._barBackgroundViewData)?void 0:e.getDataView())||t.reRunAllTransform()}viewDataUpdate(e){var t,i,r;super.viewDataUpdate(e),null==(i=null==(t=this._barBackgroundViewData)?void 0:t.getDataView())||i.reRunAllTransform(),null==(r=this._barBackgroundViewData)||r.updateData()}release(){var e;super.release(),null==(e=this._barBackgroundViewData)||e.release(),this._barBackgroundViewData=null}}wY.type=z.bar,wY.builtInTheme={bar:{label:{visible:!1,position:"outside",offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}}},wY.mark=wU,wY.transformerConstructor=wX;let wq=()=>{x_(),wV(),wZ(),C1(),xa(),hp.registerSeries(wY.type,wY)};class wJ extends xk{_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barMinHeight","sampling","samplingFactor","barBackground","stackCornerRadius","useSequentialAnimation"])}transformSpec(e){super.transformSpec(e),ci(e)}_transformAxisSpec(e){var t,i;if(super._transformAxisSpec(e),!e.axes)return;let r=e.series.some(e=>"horizontal"===e.direction),n=null!=(t=e.axes.find(e=>"band"===e.type))?t:e.axes.find(e=>(r?["left","right"]:["top","bottom"]).includes(e.orient));if(n&&!n.bandSize&&!n.maxBandSize&&!n.minBandSize&&e.autoBandSize){let t=(0,r9.Z)(e.autoBandSize)&&null!=(i=e.autoBandSize.extend)?i:0,{barMaxWidth:r,barMinWidth:l,barWidth:o,barGapInGroup:a}=e.series.find(e=>"bar"===e.type);this._applyAxisBandSize(n,t,{barMaxWidth:r,barMinWidth:l,barWidth:o,barGapInGroup:a})}}}class wQ extends xB{constructor(){super(...arguments),this.transformerConstructor=wJ,this.type="bar",this.seriesType=z.bar}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}wQ.type="bar",wQ.seriesType=z.bar,wQ.transformerConstructor=wJ,(0,gH.jB)(wQ,xF);var w0=i(80741);let w1=[10,20],w2=cz._f.Linear,w3="circle",w4=cz._f.Ordinal,w5=["circle","square","triangle","diamond","star"],w6=(e,t)=>"fadeIn"===t?{type:"fadeIn"}:{type:"scaleIn"},w8=()=>{hp.registerAnimation("scatter",(e,t)=>Object.assign({appear:w6(0,t)},mi))},w7=Object.assign(Object.assign({},bo),{point:{name:"point",type:"symbol"}});class w9 extends bC{_transformLabelSpec(e){this._addMarkLabelSpec(e,"point")}}class Se extends bA{constructor(){super(...arguments),this.type=z.scatter,this.transformerConstructor=w9,this._invalidType="zero"}setAttrFromSpec(){super.setAttrFromSpec(),this._size=this._spec.size,this._sizeField=this._spec.sizeField,this._shape=this._spec.shape,this._shapeField=this._spec.shapeField}_getSeriesAttribute(e,t,{defaultScaleType:i,defaultRange:r},n){var l,o,a,s;if((0,nr.Z)(t))return t;if((0,ri.Z)(t)){if((0,r5.Z)(e))return null==(l=this._option)||l.onError(`${n}Field is required.`),t;if("ordinal"!==i&&t.length>2)return null==(o=this._option)||o.onError(`${n} length is invalid, specify up to 2 ${n}s.`),t;let r=`${dg}_series_scatter_${this.id}_scale_${n}`;return this._option.globalScale.registerModelScale({id:r,type:i,domain:[{dataId:this._rawData.name,fields:[e]}],range:t}),{scale:r,field:e}}if((0,r9.Z)(t)){if((0,r5.Z)(e))return null==(a=this._option)||a.onError(`${n}Field is required.`),t;let l=Object.assign({id:`${dg}_series_scatter_${this.id}_scale_${n}`,type:i,domain:[{dataId:this._rawData.name,fields:[e]}],range:r},t);return this._option.globalScale.registerModelScale(l),{scale:l.id,field:e}}return null==(s=this._option)||s.onError(`${n} attribute is invalid.`),t}getSizeAttribute(e,t){return(0,r5.Z)(t)?10:(0,nw.Z)(t)?t:(0,r6.Z)(t)&&(0,w0.Z)(t)?parseFloat(t):this._getSeriesAttribute(e,t,{defaultScaleType:w2,defaultRange:w1},"size")}getShapeAttribute(e,t){return(0,r5.Z)(t)?w3:(0,r6.Z)(t)?t:this._getSeriesAttribute(e,t,{defaultScaleType:w4,defaultRange:w5},"shape")}initMark(){this._symbolMark=this._createMark(Se.mark.point,{groupKey:this._seriesField,isSeriesMark:!0},{morph:by(this._spec,Se.mark.point.name),morphElementKey:this.getDimensionField()[0]})}initMarkStyle(){this.initSymbolMarkStyle()}initAnimation(){var e,t,i;let r=bS(this),n=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;this._symbolMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("scatter"))?void 0:i({},n),bf("point",this._spec,this._markAttributeContext),r))}initSymbolMarkStyle(){let e=this._symbolMark;e&&("zero"!==this._invalidType&&this.setMarkStyle(e,{visible:this._getInvalidDefined.bind(this)}),this.setMarkStyle(e,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),z:this._fieldZ?this.dataToPositionZ.bind(this):null,fill:this.getColorAttribute(),size:(0,nw.Z)(this._size)||(0,nr.Z)(this._size)?this._size:10,symbolType:(0,r6.Z)(this._shape)||(0,nr.Z)(this._shape)?this._shape:w3},Q.STATE_NORMAL,q.Series),((0,oV.Z)(this._sizeField)||(0,oV.Z)(this._size))&&this.setMarkStyle(e,{size:this.getSizeAttribute(this._sizeField,this._size)},Q.STATE_NORMAL,q.User_Mark),((0,oV.Z)(this._shapeField)||(0,oV.Z)(this._shape))&&this.setMarkStyle(e,{symbolType:this.getShapeAttribute(this._shapeField,this._shape)},Q.STATE_NORMAL,q.User_Mark))}initTooltip(){super.initTooltip(),this._symbolMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._symbolMark)}viewDataStatisticsUpdate(e){super.viewDataStatisticsUpdate(e);let t=[this.getDimensionField()[0],this.getStackValueField()].every(e=>{var t,i,r;return e&&(null==(r=null==(i=null==(t=this.getViewDataStatistics())?void 0:t.latestData)?void 0:i[e])?void 0:r.allValid)});"zero"===this._invalidType||t?this.setMarkStyle(this._symbolMark,{visible:!0},"normal",q.Series):this.setMarkStyle(this._symbolMark,{visible:this._getInvalidDefined.bind(this)},"normal",q.Series),this._symbolMark.getProduct()&&this._symbolMark.compileEncode()}initLabelMarkStyle(e){e&&(this._labelMark=e,this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getStackValueField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null},Q.STATE_NORMAL,q.Series),"zero"!==this._invalidType&&this.setMarkStyle(e,{visible:this._getInvalidDefined.bind(this)},Q.STATE_NORMAL,q.Series))}handleZoom(e){var t,i;this.getMarksWithoutRoot().forEach(e=>{if(!e)return;let t=e.getGraphics();t&&t.length&&t.forEach((e,t)=>{var i,r;let n=null==(r=null==(i=null==e?void 0:e.context)?void 0:i.data)?void 0:r[0],l=this.dataToPosition(n);l&&e&&e.translateTo(l.x,l.y)})});let r=null==(i=null==(t=this._labelMark)?void 0:t.getComponent())?void 0:i.getProduct();r&&r.evaluate(null,null)}handlePan(e){this.handleZoom(e)}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._symbolMark]}}Se.type=z.scatter,Se.mark=w7,Se.builtInTheme={scatter:{point:{style:{size:8,symbolType:"circle",lineWidth:0,fillOpacity:.8}},label:{visible:!1,offset:5,position:"top",style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}}}},Se.transformerConstructor=w9;let St=()=>{y4(),w8(),C1(),xa(),hp.registerSeries(Se.type,Se)};class Si extends xk{_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["point","size","shape","shapeField","sizeField"])}}class Sr extends xB{constructor(){super(...arguments),this.transformerConstructor=Si,this.type="scatter",this.seriesType=z.scatter}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}Sr.type="scatter",Sr.seriesType=z.scatter,Sr.transformerConstructor=Si,(0,gH.jB)(Sr,xF);let Sn=(e,t)=>{let i;if(!t.from||!t.from())return e;let r=t.fields,n=t.key,l=t.values,o=t.default,a=t.as||[r],s=t.from().reduce(function(e,t){return t[r]&&e.set(t[r],t),e},new Map);if((0,nr.Z)(t.set))i=function(e){let i=s.get(e[n]);t.set(e,i)};else if(l){let e=l.length;i=function(t){let i=s.get(t[n]);if((0,r5.Z)(i))for(let i=0;i<e;++i)t[a[i]]=o;else for(let r=0;r<e;++r)t[a[r]]=i[l[r]]}}else i=function(e){let t=s.get(e[n]);e[a[0]]=(0,oV.Z)(t)?t:o};return 0===e.length?[]:e.map(e=>(i(e),e))};class Sl extends bx{constructor(){super(...arguments),this.type=z.geo,this.coordinate="geo",this._nameProperty="name"}getMapViewData(){var e;return null==(e=this._mapViewData)?void 0:e.getDataView()}get nameField(){return this._nameField}set nameField(e){this._nameField=e}get valueField(){return this._valueField}set valueField(e){this._valueField=e}getNameProperty(){return this._nameProperty}getCentroidProperty(){return this._centroidProperty}getCoordinateHelper(){return this._coordinateHelper}setCoordinateHelper(e){this._coordinateHelper=e}getStatisticFields(){let e=[];return e.push({key:this._nameField,operations:["values"]}),e.push({key:this._valueField,operations:["max","min"]}),e}getGroupFields(){return null}dataToPosition(e,t){var i;let r=null;if(!e||t&&!this.isDatumInViewData(e))return r;let{dataToPosition:n,latitudeField:l,longitudeField:o}=this._coordinateHelper;if(null===(r=this.nameToPosition(e))){let t=o?null==e?void 0:e[o]:Number.NaN,a=l?null==e?void 0:e[l]:Number.NaN;r=null!=(i=null==n?void 0:n([t,a]))?i:null}return r}nameToPosition(e){let t=this.getDatumName(e);return(0,r5.Z)(t)?null:this.nameValueToPosition(t)}nameValueToPosition(e){var t,i;let r=null==(i=null==(t=this.getMapViewData())?void 0:t.latestData)?void 0:i.filter(t=>this.getDatumName(t)===e)[0];if((0,r5.Z)(r))return null;let{dataToPosition:n}=this._coordinateHelper,l=this.getDatumCenter(r),o=null==n?void 0:n(l);return(0,r5.Z)(o)||isNaN(o.x)||isNaN(o.y)?null:o}dataToLatitude(e){if(!this._coordinateHelper)return Number.NaN;let{dataToLatitude:t}=this._coordinateHelper;return t(e)}dataToLongitude(e){if(!this._coordinateHelper)return Number.NaN;let{dataToLatitude:t}=this._coordinateHelper;return t(e)}valueToPosition(e,t){return{x:this.dataToLongitude(e),y:this.dataToLatitude(t)}}positionToData(e){}latitudeToData(e){}longitudeToData(e){}dataToPositionX(e){var t;return null==(t=this._option)||t.onError("Method not implemented."),0}dataToPositionY(e){var t;return null==(t=this._option)||t.onError("Method not implemented."),0}dataToPositionZ(e){var t;return null==(t=this._option)||t.onError("Method not implemented."),0}release(){super.release(),this._mapViewData.release(),this._mapViewData=this._mapViewDataStatistics=null}getStackGroupFields(){return[this._nameField]}getStackValueField(){return this._spec.valueField}compileData(){var e;null==(e=this._mapViewData)||e.compile()}initStatisticalData(){if(super.initStatisticalData(),this._mapViewData){let e=`${dg}_series_${this.id}_mapViewDataStatic`;this._mapViewDataStatistics=this.createStatisticalData(e,this._mapViewData.getDataView()),this._mapViewData.getDataView().target.removeListener("change",this._mapViewDataStatistics.reRunAllTransform)}}getSeriesKeys(){var e,t,i,r,n;return this._seriesField?null!=(n=null!=(t=null==(e=this.getRawDataStatisticsByField(this._seriesField))?void 0:e.values)?t:null==(r=null==(i=this._mapViewDataStatistics)?void 0:i.latestData[this._seriesField])?void 0:r.values)?n:[]:this.name?[this.name]:this.userId?[`${this.userId}`]:[`${this.type}_${this.id}`]}fillData(){var e,t;super.fillData(),null==(e=this._mapViewData.getDataView())||e.reRunAllTransform(),null==(t=this._mapViewDataStatistics)||t.reRunAllTransform()}getActiveMarks(){return[]}}let So=(e,t)=>(e.features&&e.features.forEach((e,i)=>{var r;e[df]=i;let n=null==(r=e.properties)?void 0:r[t.nameProperty];t.nameMap&&t.nameMap[n]?e[dI]=t.nameMap[n]:e[dI]=n}),e.features);class Sa extends m4{constructor(){super(...arguments),this.dimensionTooltipTitleCallback=e=>{var t;let i=this.series;return null!=(t=this._getDimensionData(e))?t:i.getDatumName(e)}}}class Ss extends pz{constructor(){super(...arguments),this.type=Ss.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0,path:""})}}Ss.type="path";let Sh=()=>{hp.registerMark(Ss.type,Ss),pN(),_1(),hp.registerGraphicComponent("path",_j)},Sd=Object.assign(Object.assign({},bo),{area:{name:"area",type:"path"}});var Su=i(36248);class Sc{constructor(e){this.projection=(0,Su.UQ)(e.type)()}fit(e,t,i){this.projection.fitExtent([e,t],{type:"FeatureCollection",features:i})}center(e){var t,i;null==(i=null==(t=this.projection)?void 0:t.center)||i.call(t,e)}project(e){var t;return null==(t=this.projection)?void 0:t.call(this,e)}shape(e){var t,i;return null==(i=null==(t=this.projection)?void 0:t.path)?void 0:i.call(t,e)}invert(e){var t,i;return null==(i=null==(t=this.projection)?void 0:t.invert)?void 0:i.call(t,e)}scale(e){var t;if(null==(t=this.projection)?void 0:t.scale){if(void 0===e)return this.projection.scale();this.projection.scale(e)}}translate(e){var t;if(null==(t=this.projection)?void 0:t.scale){if(void 0===e)return this.projection.translate();this.projection.translate(e)}}evaluate(e,t,i){let r=this.projection.copy();return null==r?void 0:r.fitExtent([e,t],{type:"FeatureCollection",features:i})}}class Sp{parserScrollEvent(e){return e?!(e.ctrlKey||0===e.deltaY&&0===e.deltaX)&&(e.scrollX=e.deltaX,e.scrollY=e.deltaY,e):e}parserZoomEvent(e){if(!e)return e;let t=Math.pow(1.0005,-e.deltaY*Math.pow(16,e.deltaMode));return e.zoomDelta=t,e.zoomX=e.canvasX,e.zoomY=e.canvasY,e}clearZoom(){}clearScroll(){}clearDrag(){}}class Sg{constructor(){this._lastScale=0}clearZoom(){this._lastScale=0}parserZoomEvent(e){let t=e.scale;if(0===this._lastScale)return this._lastScale=t,e;e.zoomDelta=t/this._lastScale;let i=e.center;return e.zoomX=i.x,e.zoomY=i.y,this._lastScale=t,e}parserScrollEvent(e){return e}clearScroll(){}clearDrag(){}}function Sf(e){return e===su["desktop-browser"]||e===su["desktop-miniApp"]?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside"],zoom:"wheel",zoomEnd:"pointerup",scroll:"wheel",trigger:Sp}:sJ(e)||sQ(e)?{start:"pointerdown",move:"pointermove",end:["pointerup","pointerupoutside","pointerleave"],zoom:"pinch",zoomEnd:"pinchend",scroll:"pan",scrollEnd:"panend",trigger:Sg}:null}let Sm={debounce:hD.Z,throttle:hO.Z};class Sb{constructor(){this._isGestureListener=!1}initZoomable(e,t=su["desktop-browser"]){this._eventObj=e,this._renderMode=t,this._gestureController=this._option.getCompiler()._gestureController,this._isGestureListener=sJ(this._renderMode)||sQ(this._renderMode),Sf(this._renderMode)&&(this._clickEnable=!0,this._zoomableTrigger=new(this._getZoomTriggerEvent("trigger")))}_getZoomTriggerEvent(e){return Sf(this._renderMode)[e]}_zoomEventDispatch(e,t,i,r){if(!this._isGestureListener&&!e.event)return;let n=this._isGestureListener?e:e.event.clone();this._zoomableTrigger.parserZoomEvent(n);let{zoomDelta:l,zoomX:o,zoomY:a,path:s}=n;if(!r&&!s.some(e=>e.name&&e.name.includes("region"))||(0,r5.Z)(l)||!(0,ai.qr)({x:o,y:a},this._getRegionOrSeriesLayout(t),!1))return;this._clearDragEvent(),this._zoomableTrigger.clearScroll();let h={};i&&(h=i({zoomDelta:l,zoomX:o,zoomY:a},n)),this._eventObj.emit("zoom",Object.assign(Object.assign({scale:n.zoomDelta,scaleCenter:{x:n.zoomX,y:n.zoomY}},h),{model:this}))}_getRegionOrSeriesLayout(e){"region"!==e.type&&(e=e.getRegion());let{x:t,y:i,width:r,height:n}=e.layout.getLayout();return{x1:t,y1:i,x2:t+r,y2:i+n}}_bindZoomEventAsRegion(e,t,i,r){var n,l;let o=null!=(n=null==r?void 0:r.delayType)?n:"throttle",a=null!=(l=null==r?void 0:r.delayTime)?l:0,s=this._isGestureListener?this._gestureController:e,h=this._isGestureListener?[this._getZoomTriggerEvent("zoom")]:[this._getZoomTriggerEvent("zoom"),{level:j.chart,consume:!0}],d=this._isGestureListener?[this._getZoomTriggerEvent("zoomEnd")]:[this._getZoomTriggerEvent("zoomEnd"),{level:j.chart,consume:!1}];s.on(...d,Sm[o](e=>{this._zoomableTrigger.clearZoom()},a)),s.on(...h,Sm[o](e=>{var n;this._zoomEventDispatch(e,t,i,null!=(n=null==r?void 0:r.allowComponentZoom)&&n)},a))}initZoomEventOfSeries(e,t,i){this._option.disableTriggerEvent||Sf(this._renderMode)&&this._bindZoomEventAsRegion(e.event,e,t,i)}initZoomEventOfRegions(e,t,i,r){this._option.disableTriggerEvent||Sf(this._renderMode)&&e.forEach(e=>{t?e.getSeries().forEach(e=>{t(e)&&this._bindZoomEventAsRegion(e.event,e,i,r)}):this._bindZoomEventAsRegion(this._eventObj,e,i,r)})}_scrollEventDispatch(e,t,i){let r=!1;if(!this._isGestureListener&&(!e.event||this._option.disableTriggerEvent))return r;let n=this._isGestureListener?e:e.event;this._zoomableTrigger.parserScrollEvent(n);let{scrollX:l,scrollY:o,canvasX:a,canvasY:s}=n;return(0,r5.Z)(l)&&(0,r5.Z)(o)||(0,ai.qr)({x:a,y:s},this._getRegionOrSeriesLayout(t),!1)&&(this._clearDragEvent(),this._zoomableTrigger.clearZoom(),i&&(r=i({scrollX:l,scrollY:o},n)),this._eventObj.emit("scroll",{scrollX:l,scrollY:o,model:this})),r}_bindScrollEventAsRegion(e,t,i,r){var n,l;let o=null!=(n=null==r?void 0:r.delayType)?n:"throttle",a=null!=(l=null==r?void 0:r.delayTime)?l:0,s=this._isGestureListener?this._gestureController:e,h=this._isGestureListener?[this._getZoomTriggerEvent("scroll")]:[this._getZoomTriggerEvent("scroll"),{level:j.chart,consume:!0}],d=this._isGestureListener?[this._getZoomTriggerEvent("scrollEnd")]:[this._getZoomTriggerEvent("scrollEnd"),{level:j.chart,consume:!1}];s.on(...d,Sm[o](e=>{this._zoomableTrigger.clearScroll()},a)),s.on(...h,Sm[o](e=>this._scrollEventDispatch(e,t,i),a))}initScrollEventOfSeries(e,t,i){Sf(this._renderMode)&&this._bindScrollEventAsRegion(e.event,e,t,i)}initScrollEventOfRegions(e,t,i,r){this._option.disableTriggerEvent||Sf(this._renderMode)&&e.forEach(e=>{t?e.getSeries().forEach(e=>{t(e)&&this._bindScrollEventAsRegion(e.event,e,i,r)}):this._bindScrollEventAsRegion(this._eventObj,e,i,r)})}_bindDragEventAsRegion(e,t,i,r){e.on(this._getZoomTriggerEvent("start"),{level:j.chart},e=>{if(!e.event)return;let{event:n}=e;(0,ai.qr)({x:n.canvasX,y:n.canvasY},this._getRegionOrSeriesLayout(t),!1)&&this._handleDrag(e,i,r)}),e.on("click",{level:j.chart},()=>!this._clickEnable)}initDragEventOfSeries(e,t,i){this._option.disableTriggerEvent||Sf(this._renderMode)&&e.event.on(this._getZoomTriggerEvent("start"),{level:j.model,filter:({model:t})=>(null==t?void 0:t.id)===e.id},e=>{this._handleDrag(e,t,i)})}initDragEventOfRegions(e,t,i,r){this._option.disableTriggerEvent||Sf(this._renderMode)&&e.forEach(e=>{t?e.getSeries().forEach(e=>{t(e)&&(e.event.on(this._getZoomTriggerEvent("start"),{level:j.model,filter:({model:t})=>(null==t?void 0:t.id)===e.id},e=>{this._handleDrag(e,i)}),e.event.on("click",{level:j.model,filter:({model:t})=>(null==t?void 0:t.id)===e.id},()=>!this._clickEnable))}):this._bindDragEventAsRegion(this._eventObj,e,i,r)})}_clearDragEvent(){let e=this._getZoomTriggerEvent("move"),t=this._getZoomTriggerEvent("end");this._handleDragMouseMove&&(this._eventObj.off(e,{level:j.chart,source:$.chart},this._handleDragMouseMove),this._handleDragMouseMove=void 0),this._handleDragMouseUp&&(t.forEach(e=>{this._eventObj.off(e,{level:j.chart,source:$.chart},this._handleDragMouseUp),this._eventObj.allow(e)}),this._handleDragMouseUp=void 0)}isDragEnable(e){if(this._isGestureListener&&this._gestureController){let e=this._gestureController.cachedEvents;return!e||e.length<2}return!0}_handleDrag(e,t,i){var r,n,l;if(this._clearDragEvent(),this._option.disableTriggerEvent||(this._clickEnable=!1,!this.isDragEnable(e.event)))return;this._zoomableTrigger.clearZoom(),this._zoomableTrigger.clearScroll();let o=null!=(r=null==i?void 0:i.delayType)?r:"throttle",a=null!=(n=null==i?void 0:i.delayTime)?n:0,s=null==(l=null==i?void 0:i.realTime)||l,h=this._getZoomTriggerEvent("move"),d=this._getZoomTriggerEvent("end"),u=e.event,c=u.canvasX,p=u.canvasY,g=u.canvasX,f=u.canvasY;this._handleDragMouseUp=Sm[o](e=>{this._clickEnable=!0;let i=e.event,r=[i.canvasX-g,i.canvasY-f];g=i.canvasX,f=i.canvasY,!s&&t&&t(r,e.event),this._eventObj.emit("panend",{delta:r,model:this}),this._clearDragEvent()},a),this._handleDragMouseMove=Sm[o](e=>{if(!this.isDragEnable(e.event))return;this._clickEnable=!1,d.forEach(e=>{this._eventObj.prevent(e,{handler:this._handleDragMouseUp,level:j.chart})});let i=e.event,r=[i.canvasX-c,i.canvasY-p];c=i.canvasX,p=i.canvasY,s&&t&&t(r,e.event),this._eventObj.emit("panmove",{delta:r,model:this})},a),this._eventObj.on(h,{level:j.chart,source:$.chart},this._handleDragMouseMove),d.forEach(e=>{this._eventObj.on(e,{level:j.chart,source:$.chart},this._handleDragMouseUp)})}}class Sy extends vJ{constructor(){var e,t;super(...arguments),this.type=sc.geoCoordinate,this.name=sc.geoCoordinate,this.layoutType="none",this.layoutZIndex=X.Mark,this._projectionSpec={name:(e=this.type,t=this.id,`${dg}_${t}_${e}`),type:"mercator"},this._actualScale=1,this._initialScale=1,this.effect={scaleUpdate:()=>{this.coordinateHelper()}},this._handleChartZoom=(e,t)=>{var i,r,n,l,o,a;let s=(0,oV.Z)(this._spec.zoomRate)?Math.max(0,this._spec.zoomRate):1,h=Math.pow(Math.max(e.zoomDelta,1e-6),s),d=this._actualScale;return this._actualScale*=h,this._actualScale<(null==(i=this._spec.zoomLimit)?void 0:i.min)?(this._actualScale=null==(r=this._spec.zoomLimit)?void 0:r.min,h=(null==(n=this._spec.zoomLimit)?void 0:n.min)/d):this._actualScale>(null==(l=this._spec.zoomLimit)?void 0:l.max)&&(this._actualScale=null==(o=this._spec.zoomLimit)?void 0:o.max,h=(null==(a=this._spec.zoomLimit)?void 0:a.max)/d),this.zoom(h,[e.zoomX,e.zoomY]),{scale:h,totalScale:this._actualScale}},this.pan=(e=[0,0])=>{var t,i,r;let n=null!=(i=null==(t=this._projection)?void 0:t.translate())?i:[0,0],l=n[0],o=n[1];l+=e[0],o+=e[1],null==(r=this._projection)||r.translate([l,o])}}get longitudeField(){return this._longitudeField}get latitudeField(){return this._latitudeField}get projectionSpec(){return this._projectionSpec}setProjection(e){this._projectionSpec=Object.assign(Object.assign({},e),{name:this._projectionSpec.name})}getZoom(){return this._actualScale}static getSpecInfo(e){if((0,r5.Z)(e))return null;let t=[];return e.region.forEach((e,i)=>{if("geo"===e.coordinate){let r=Object.assign(Object.assign({},e),{padding:0});t.push({spec:r,regionIndex:i,type:sc.geoCoordinate,specInfoPath:["component","geoCoordinate",i]})}}),t}setAttrFromSpec(){var e,t,i;super.setAttrFromSpec(),this._spec.roam&&this.initZoomable(this.event,this._option.mode),this._projectionSpec=hs(this._projectionSpec,this._spec.projection),this._projectionSpec.zoom>(null==(e=this._spec.zoomLimit)?void 0:e.max)&&(this._projectionSpec.zoom=this._spec.zoomLimit.max),this._projectionSpec.zoom<(null==(t=this._spec.zoomLimit)?void 0:t.min)&&(this._projectionSpec.zoom=this._spec.zoomLimit.min),this._actualScale=null!=(i=this._projectionSpec.zoom)?i:1,this._initialScale=this._actualScale,this._longitudeField=this._spec.longitudeField,this._latitudeField=this._spec.latitudeField}created(){super.created(),this._regions=this._option.getRegionsInIndex([this._option.regionIndex]),this.initProjection(),this.coordinateHelper(),this.initEvent(),this._initCenterCache()}dispatchZoom(e,t){let i=t||{x:this.getLayoutStartPoint().x+this.getLayoutRect().width/2,y:this.getLayoutStartPoint().y+this.getLayoutRect().height/2},{scale:r,totalScale:n}=this._handleChartZoom({zoomDelta:e,zoomX:i.x,zoomY:i.y});1!==r&&this.event.emit("zoom",{scale:r,scaleCenter:i,totalScale:n,model:this})}initEvent(){var e,t,i;this.event.on(N.scaleUpdate,{filter:({model:e})=>(null==e?void 0:e.id)===this.id},this.effect.scaleUpdate.bind(this));let{roam:r}=this._spec;if(r){let n=!0,l=!0,o=!1;!0!==r&&(n=null==(e=r.zoom)||e,l=null==(t=r.drag)||t,o=null!=(i=r.blank)&&i),n&&this.initZoomEventOfRegions(this._regions,null,this._handleChartZoom),l&&this.initDragEventOfRegions(this._regions,o?null:()=>!0,this.pan),this._regions.forEach(e=>{e.getSeries().forEach(e=>{e.event.on("zoom",t=>(e.handleZoom(t),!0)),e.event.on("panmove",t=>(e.handlePan(t),!0))})})}}initProjection(){var e;this._projection=new Sc(this._projectionSpec),null!==this._projection.projection||null==(e=this._option)||e.onError("unsupported projection type!")}coordinateHelper(){let e={longitudeField:this._longitudeField,latitudeField:this._latitudeField,dataToPosition:this.dataToPosition.bind(this),dataToLongitude:this.dataToLongitude.bind(this),dataToLatitude:this.dataToLatitude.bind(this),shape:this.shape.bind(this),getCoordinateId:()=>this.id};this._regions.forEach(t=>{t.getSeries().forEach(t=>{t.type===z.map||t.type===z.pictogram?t.setCoordinateHelper(e):(t.setXAxisHelper(Object.assign(Object.assign({},e),{isContinuous:!0,dataToPosition:(e,i)=>{var r;let n=e[0];if((0,r5.Z)(n)&&(null==i?void 0:i.datum)){let e=i.datum[t.getDimensionField()[0]];n=null==(r=this._centerCache.get(e))?void 0:r.x}return this.dataToLongitude(n)},valueToPosition:(e,i)=>{var r;if((0,r5.Z)(e)&&(null==i?void 0:i.datum)){let n=i.datum[t.getDimensionField()[0]];e=null==(r=this._centerCache.get(n))?void 0:r.x}return this.dataToLongitude(e)},getFields:()=>[this._longitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})),t.setYAxisHelper(Object.assign(Object.assign({},e),{isContinuous:!0,dataToPosition:(e,i)=>{var r;let n=e[0];if((0,r5.Z)(n)&&(null==i?void 0:i.datum)){let e=i.datum[t.getDimensionField()[0]];n=null==(r=this._centerCache.get(e))?void 0:r.y}return this.dataToLatitude(n)},valueToPosition:(e,i)=>{var r;if((0,r5.Z)(e)&&(null==i?void 0:i.datum)){let n=i.datum[t.getDimensionField()[0]];e=null==(r=this._centerCache.get(n))?void 0:r.y}return this.dataToLatitude(e)},getFields:()=>[this._latitudeField],getAxisType:()=>this.type,getAxisId:()=>this.id,isInverse:()=>!1})))})})}onLayoutEnd(){this.setLayoutRect(this._regions[0].getLayoutRect()),this.setLayoutStartPosition(this._regions[0].getLayoutStartPoint());let{width:e,height:t}=this.getLayoutRect(),{translate:i,scale:r,center:n}=this.evaluateProjection([0,0],[e,t]);i&&this._projection.translate(i),r&&this._projection.scale(r),n&&this._projection.center(n),y8(this._regions,e=>{var t;if(e.type===z.map||e.type===z.pictogram){null==(t=e.areaPath)||t.clear();let i=e.getRootMark().getProduct();i&&i.attribute.postMatrix&&i.setAttributes({postMatrix:new tQ.y})}}),this._actualScale=this._initialScale,super.onLayoutEnd()}collectFeatures(){let e=[];return this._regions.forEach(t=>{t.getSeries().forEach(t=>{var i,r;t.type!==z.map&&t.type!==z.pictogram||e.push(...null!=(r=null==(i=t.getMapViewData())?void 0:i.latestData)?r:[])})}),e}dataToPosition(e=[]){var t;let i=null==(t=this._projection)?void 0:t.project([e[0],e[1]]);return{x:null==i?void 0:i[0],y:null==i?void 0:i[1]}}dataToLatitude(e){var t;let i=null==(t=this._projection)?void 0:t.project([0,e]);return null==i?void 0:i[1]}dataToLongitude(e){var t;let i=null==(t=this._projection)?void 0:t.project([e,0]);return null==i?void 0:i[0]}zoom(e,t=[0,0]){var i,r,n,l,o,a;let s=null!=(r=null==(i=this._projection)?void 0:i.scale())?r:0,h=null!=(l=null==(n=this._projection)?void 0:n.translate())?l:[0,0],d=h[0],u=h[1];s*=e,d-=(t[0]-d)*(e-1),u-=(t[1]-u)*(e-1),null==(o=this._projection)||o.scale(s),null==(a=this._projection)||a.translate([d,u])}shape(e){return this._projection.shape(e)}invert(e){return this._projection.invert(e)}evaluateProjection(e,t){var i;let r=this._projection.evaluate(e,t,this.collectFeatures()),n=r.translate(),l=r.scale()*this._initialScale,o=null!=(i=this._projectionSpec.center)?i:r.invert([t[0]/2,t[1]/2]);return o&&(n=[t[0]/2,t[1]/2]),{translate:n,scale:l,center:o}}_initCenterCache(){this._centerCache||(this._centerCache=new Map),this._regions.forEach(e=>{e.getSeries().forEach(e=>{var t,i;"map"===e.type&&(null!=(i=null==(t=e.getMapViewData())?void 0:t.latestData)?i:[]).forEach((t={})=>{let i=t[e.getDimensionField()[0]]||t[dI],r=e.getDatumCenter(t);i&&(0,oV.Z)(r)&&this._centerCache.set(i,{x:r[0],y:r[1]})})})})}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(i.reMake=["roam","longitudeField","latitudeField","projection","zoomLimit","zoomRate"].some(i=>!(0,dN.X)(null==t?void 0:t[i],e[i]))),i}release(){super.release(),this._centerCache&&this._centerCache.clear(),this._centerCache=null}}Sy.type=sc.geoCoordinate,(0,gH.jB)(Sy,Sb);let Sv=()=>{hp.registerComponent(Sy.type,Sy)};class S_ extends bC{_transformLabelSpec(e){this._addMarkLabelSpec(e,"area",void 0,void 0,!1)}}class SC extends Sl{constructor(){super(...arguments),this.type=z.map,this.transformerConstructor=S_,this._areaCache=new Map}getNameMap(){return this._nameMap}get areaPath(){return this._areaCache}setAttrFromSpec(){var e,t;super.setAttrFromSpec(),this.map=this._spec.map,this._nameMap=this._spec.nameMap,this._nameField=this._spec.nameField,this._valueField=this._spec.valueField,this._spec.nameProperty&&(this._nameProperty=this._spec.nameProperty),this._spec.centroidProperty&&(this._centroidProperty=this._spec.centroidProperty),this.map||null==(e=this._option)||e.onError(`map type '${this.map}' is not specified !`),hY.get(this.map)||null==(t=this._option)||t.onError(`'${this.map}' data is not registered !`)}initData(){var e,t;super.initData(),hK(this._dataSet,"copyDataView",h1),hK(this._dataSet,"map",So),hK(this._dataSet,"lookup",Sn);let i=hY.get(this.map);i||null==(e=this._option)||e.onError("no valid map data found!");let r=new tf.V(this._dataSet,{name:`map_${this.id}_data`});r.parse([i],{type:"dataview"}).transform({type:"copyDataView",options:{deep:!0},level:G.copyDataView}).transform({type:"map",options:{nameMap:this._nameMap,nameProperty:this._nameProperty}}).transform({type:"lookup",options:{from:()=>{var e;return null==(e=this._data)?void 0:e.getLatestData()},key:dI,fields:this._nameField,set:(e,t)=>{t&&Object.keys(t).forEach(i=>{i in e||(e[i]=t[i])})}}}),null==(t=this._data)||t.getDataView().target.addListener("change",r.reRunAllTransform),this._mapViewData=new cj(this._option,r)}compileData(){var e;super.compileData(),null==(e=this._mapViewData)||e.compile()}initMark(){this._pathMark=this._createMark(SC.mark.area,{groupKey:this.getDimensionField()[0],isSeriesMark:!0},{morph:by(this._spec,SC.mark.area.name),morphElementKey:this.getDimensionField()[0]}),this._pathMark.setData(this._mapViewData)}initMarkStyle(){let e=this._pathMark;e&&(this.setMarkStyle(e,{fill:e=>{var t,i,r,n;return(0,oV.Z)(e[null!=(t=this._seriesField)?t:db])?(null!=(i=this._option.globalScale.getScale("color"))?i:this._getDefaultColorScale()).scale(e[null!=(r=this._seriesField)?r:db]):null==(n=this._spec)?void 0:n.defaultFillColor},path:this.getPath.bind(this)},"normal",q.Series),e.setPostProcess("fill",e=>(0,oV.Z)(e)?e:this._spec.defaultFillColor),this.setMarkStyle(e,{smoothScale:!0},"normal",q.Built_In))}initLabelMarkStyle(e){e&&(this._labelMark=e,this.setMarkStyle(e,{text:e=>this.getDatumName(e),x:e=>{var t;return null==(t=this.dataToPosition(e))?void 0:t.x},y:e=>{var t;return null==(t=this.dataToPosition(e))?void 0:t.y}}))}initAnimation(){var e;this._pathMark.setAnimationConfig(bg(null==(e=hp.getAnimationInKey("fadeInOut"))?void 0:e(),bf("area",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new Sa(this),this._pathMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pathMark)}getPath(e){var t;let i=this._areaCache.get(e[df]);if(i)return i.shape;let r=null==(t=this._coordinateHelper)?void 0:t.shape(e);return this._areaCache.set(e[df],{shape:r}),r}onEvaluateEnd(){this._mapViewData.updateData()}getDimensionField(){return[this.nameField]}getMeasureField(){return[this.valueField]}release(){super.release(),this._areaCache.clear(),this._nameMap={},this._mapViewData=null}handleZoom(e){var t;let{scale:i,scaleCenter:r}=e;if(1===i)return;let n=this.getRootMark().getProduct();n&&(n.attribute.postMatrix||n.setAttributes({postMatrix:new tQ.y}),n.scale(i,i,r));let l=null==(t=this._labelMark)?void 0:t.getComponent();l&&l.renderInner()}handlePan(e){var t;let{delta:i}=e;if(0===i[0]&&0===i[1])return;let r=this.getRootMark().getProduct();r&&(r.attribute.postMatrix||r.setAttributes({postMatrix:new tQ.y}),r.translate(i[0],i[1]));let n=null==(t=this._labelMark)?void 0:t.getComponent();n&&n.renderInner()}getDatumCenter(e){var t,i,r,n;return this._centroidProperty&&(null==(t=e.properties)?void 0:t[this._centroidProperty])?null==(i=e.properties)?void 0:i[this._centroidProperty]:(0,sD.Z)(e.centroidX*e.centroidY)?[e.centroidX,e.centroidY]:(null==(r=e.properties)?void 0:r.center)?e.properties.center:(null==(n=e.properties)?void 0:n.centroid)?e.properties.centroid:[Number.NaN,Number.NaN]}getDatumName(e){var t;if(e[this.nameField])return e[this.nameField];let i=null==(t=e.properties)?void 0:t[this._nameProperty];if(i){if(this._spec.nameMap&&this._spec.nameMap[i])return this._spec.nameMap[i];if(this._spec.showDefaultName||!this._spec.nameMap)return i}return""}dataToPositionX(e){var t;return null==(t=this._option)||t.onError("Method not implemented."),0}dataToPositionY(e){var t;return null==(t=this._option)||t.onError("Method not implemented."),0}viewDataUpdate(e){var t,i,r;super.viewDataUpdate(e),null==(i=null==(t=this._mapViewData)?void 0:t.getDataView())||i.reRunAllTransform(),null==(r=this._mapViewData)||r.updateData()}_getDataIdKey(){return df}getActiveMarks(){return[this._pathMark]}}SC.type=z.map,SC.mark=Sd,SC.builtInTheme={map:{defaultFillColor:"#f3f3f3",area:{style:{lineWidth:.5,strokeOpacity:1,stroke:"black",fillOpacity:1}},label:{interactive:!1,style:{fontSize:{type:"token",key:"l6FontSize"},lineHeight:{type:"token",key:"l6LineHeight"},textBaseline:"middle",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},stroke:{type:"palette",key:"backgroundColor"}}}}},SC.transformerConstructor=S_;let Sx=()=>{Sv(),Sh(),hp.registerSeries(SC.type,SC),hp.registerImplement("registerMap",hq),hp.registerImplement("unregisterMap",hJ),ml()};class Sw extends xA{_isValidSeries(e){return e===z.map}_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["type","nameField","valueField","map","nameProperty","centroidProperty","nameMap","area","defaultFillColor","showDefaultName"])}transformSpec(e){super.transformSpec(e),e.region.forEach(e=>{e.coordinate="geo"}),super.transformSeriesSpec(e)}}class SS extends xB{constructor(){super(...arguments),this.transformerConstructor=Sw,this.type="map",this.seriesType=z.map}}SS.type="map",SS.seriesType=z.map,SS.transformerConstructor=Sw;class SA extends bx{constructor(){super(...arguments),this.coordinate="polar",this._outerRadius=.6,this._innerRadius=0,this._angleField=[],this._radiusField=[],this._sortDataByAxis=!1}get outerRadius(){return this._outerRadius}get innerRadius(){return this._innerRadius}getAngleField(){return this._angleField}setAngleField(e){return this._angleField=(0,oV.Z)(e)?(0,ag.IX)(e):[],this._angleField}getRadiusField(){return this._radiusField}setRadiusField(e){return this._radiusField=(0,oV.Z)(e)?(0,ag.IX)(e):[],this._radiusField}get innerRadiusField(){return this._innerRadiusField}setInnerRadiusField(e){return this._innerRadiusField=(0,ag.IX)(e),this._innerRadiusField}get radiusScale(){return this._radiusScale}setRadiusScale(e){return this._radiusScale=e,e}get angleScale(){return this._angleScale}setAngleScale(e){return this._angleScale=e,e}get angleAxisHelper(){return this._angleAxisHelper}set angleAxisHelper(e){this._angleAxisHelper=e,this.onAngleAxisHelperUpdate()}get radiusAxisHelper(){return this._radiusAxisHelper}set radiusAxisHelper(e){this._radiusAxisHelper=e,this.onRadiusAxisHelperUpdate()}get sortDataByAxis(){return this._sortDataByAxis}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getCenter=()=>this.angleAxisHelper.center(),this._markAttributeContext.getLayoutRadius=()=>this._computeLayoutRadius()}valueToPosition(e,t){if((0,r5.Z)(e)||(0,r5.Z)(t)||!this.angleAxisHelper||!this.radiusAxisHelper)return{x:Number.NaN,y:Number.NaN};let i=this.radiusAxisHelper.dataToPosition((0,ag.IX)(t));if(i<0){if("break"===this._invalidType||"link"===this._invalidType)return{x:Number.NaN,y:Number.NaN};if("zero"===this._invalidType)return this.angleAxisHelper.center()}let r=this.angleAxisHelper.dataToPosition((0,ag.IX)(e));return this.angleAxisHelper.coordToPoint({angle:r,radius:i})}dataToPosition(e,t){return e&&this.angleAxisHelper&&this.radiusAxisHelper?t&&!this.isDatumInViewData(e)?null:this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this.getDatumPositionValues(e,this._radiusField)):null}dataToPositionX(e){var t;return null==(t=this.dataToPosition(e))?void 0:t.x}dataToPositionY(e){var t;return null==(t=this.dataToPosition(e))?void 0:t.y}dataToPositionZ(e){return 0}positionToData(e){}radiusToData(e){}angleToData(e){}getStatisticFields(){var e,t;let i=[];return(null==(e=this.radiusAxisHelper)?void 0:e.getScale)&&this._radiusField.forEach(e=>{let t={key:e,operations:[]};(0,cz.z2)(this.radiusAxisHelper.getScale(0).type)?t.operations=["max","min"]:t.operations=["values"],i.push(t)}),(null==(t=this.angleAxisHelper)?void 0:t.getScale)&&this._angleField.forEach(e=>{let t={key:e,operations:[]};(0,cz.z2)(this.angleAxisHelper.getScale(0).type)?t.operations=["max","min"]:t.operations=["values"],i.push(t)}),i}setAttrFromSpec(){super.setAttrFromSpec(),(0,oV.Z)(this._spec.outerRadius)&&(this._outerRadius=this._spec.outerRadius),(0,oV.Z)(this._spec.radius)&&(this._outerRadius=this._spec.radius),(0,oV.Z)(this._spec.innerRadius)&&(this._innerRadius=this._spec.innerRadius),(0,oV.Z)(this._spec.sortDataByAxis)&&(this._sortDataByAxis=!0===this._spec.sortDataByAxis)}onRadiusAxisHelperUpdate(){this.onMarkPositionUpdate()}onAngleAxisHelperUpdate(){this.onMarkPositionUpdate()}afterInitMark(){super.afterInitMark()}_computeLayoutRadius(){let e=this._angleAxisHelper||this._radiusAxisHelper;if(e)return e.layoutRadius();let{width:t,height:i}=this._region.getLayoutRect();return Math.min(t/2,i/2)}initEvent(){super.initEvent(),this.sortDataByAxis&&this.event.on(N.scaleDomainUpdate,{filter:e=>{var t;return e.model.id===(null==(t=this._angleAxisHelper)?void 0:t.getAxisId())}},()=>{this._sortDataInAxisDomain()})}_sortDataInAxisDomain(){var e,t;(null==(t=null==(e=this.getViewData())?void 0:e.latestData)?void 0:t.length)&&bw(this.angleAxisHelper,this._angleField[0],this.getViewData().latestData)}getInvalidCheckFields(){let e=[];return this.angleAxisHelper.isContinuous&&this._angleField.forEach(t=>{e.push(t)}),this.radiusAxisHelper.isContinuous&&this._radiusField.forEach(t=>{e.push(t)}),e}}function Sk(e){return sz(e)?Number.parseFloat(e):0}let SM=(e,t)=>{let{asStartAngle:i,asEndAngle:r,asMiddleAngle:n,asRadian:l,asRatio:o,asQuadrant:a,asK:s,showAllZero:h,supportNegative:d,showEmptyCircle:u}=t,c=t.angleField(),p=t.startAngle(),g=t.endAngle(),f=t.minAngle(),m=e.map(e=>Object.assign({},e));if(!m||0===m.length)return m;if(!h&&u&&ST(m,c,d))return[];let b=(e,t,o)=>{e[i]=t,e[r]=t+o,e[n]=t+o/2,e[l]=o,e[a]=(0,t9.tc)(t+o/2)},y=0,v=-1/0,_=!0;for(let e=0;e<m.length;e++){let t=d?Math.abs(Sk(m[e][c])):Sk(m[e][c]);y+=t,v=Math.max(t,v),_&&0!==t&&(_=!1),m[e][vL]=t}let C=m.map(e=>Number(e[c])),x=g-p,w=p,S=x,A=0,k=function(e,t=2){let i=e.reduce((e,t)=>e+(isNaN(t)?0:t),0);if(0===i)return 0;let r=Math.pow(10,t),n=e.map(e=>(isNaN(e)?0:e)/i*r*100),l=100*r,o=n.map(e=>Math.floor(e)),a=o.reduce((e,t)=>e+t,0),s=n.map((e,t)=>e-o[t]);for(;a<l;){let e=Number.NEGATIVE_INFINITY,t=null;for(let i=0;i<s.length;i++)s[i]>e&&(e=s[i],t=i);++o[t],s[t]=0,++a}return o.map(e=>e/r)}(C);if(m.forEach((e,t)=>{let i=e[vL],r=y?i/y:0,n=r*x;n<f?(n=f,S-=f):A+=i;let l=w,a=w+n;e[o]=r,e[s]=v?i/v:0,e._percent_=k[t],b(e,l,n),w=a}),S<x)if(S<=.001){let e=x/m.length;m.forEach((t,i)=>{b(t,p+i*e,e)})}else{let e=S/A;w=p,m.forEach(t=>{let i=t[l]===f?f:t[vL]*e;b(t,w,i),w+=i})}if(0!==y&&(m[m.length-1][r]=g),_&&h){let e=x/m.length;m.forEach((t,i)=>{b(t,p+i*e,e)})}return m},ST=(e,t,i)=>!!(0,r5.Z)(e)||0===e.length||!!e.every(e=>0===Sk(e[t]))||!i&&0===e.reduce((e,i)=>e+Sk(i[t]),0);function SR(e,t,i){return(r,n,l)=>t?"radius"===e.growField?{overall:0}:{overall:e.growFrom(r,n,i)}:{overall:!1}}let SE=e=>({type:"radius"===e.growField?"growRadiusIn":"growAngleIn",options:SR(e,!0,V.appear)}),SP={type:"fadeIn"},SB=e=>({type:"radius"===e.growField?"growRadiusIn":"growAngleIn",easing:"linear",options:SR(e,!0,V.enter)}),SI=e=>({type:"radius"===e.growField?"growRadiusOut":"growAngleOut",easing:"linear",options:SR(e,!0,V.exit)});function SL(e,t){if(!1===t)return{};switch(t){case"fadeIn":return SP;case"growRadius":return SE(Object.assign(Object.assign({},e),{growField:"radius"}));default:return SE(Object.assign(Object.assign({},e),{growField:"angle"}))}}let SF=()=>{hp.registerAnimation("pie",(e,t)=>({appear:SL(e,t),enter:SB(e),exit:SI(e),disappear:{duration:mt.disappear.duration}}))},SH=()=>{hp.registerAnimation("emptyCircle",(e,t)=>({appear:SL(e,t)}))};var SO=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class SD{constructor(e,t,i,r,n,l,o,a,s){this.refDatum=e,this.center=t,this.outerCenter=i,this.quadrant=r,this.radian=n,this.middleAngle=l,this.innerRadius=o,this.outerRadius=a,this.circleCenter=s,this.labelVisible=!0}getLabelBounds(){return this.labelPosition&&this.labelSize?{x1:this.labelPosition.x-this.labelSize.width/2,y1:this.labelPosition.y-this.labelSize.height/2,x2:this.labelPosition.x+this.labelSize.width/2,y2:this.labelPosition.y+this.labelSize.height/2}:{x1:0,x2:0,y1:0,y2:0}}}class Sz extends yG{constructor(e,t){let{data:i}=e;super((null==t?void 0:t.skipDefault)?e:Object.assign({data:i},(0,ha.Z)({},Sz.defaultAttributes,SO(e,["data"])))),this.name="arc-label",this._ellipsisWidth=0,this._arcLeft=new Map,this._arcRight=new Map,this._line2MinLength=0,this._alignOffset=0}_overlapping(e){return["inside","inside-center"].includes(this.attribute.position)?super._overlapping(e):e}labeling(e,t,i="outside",r=0){if(e&&t)return{x:0,y:0}}_layout(e){var t,i,r;if(!e||!e.length)return[];let n=super._layout(e),l=n.map(e=>this.getGraphicBounds(e)),o=Object.assign(Object.assign({},this.attribute.textStyle),{text:""}),a=1/0;if(!1!==o.ellipsis){let e=this._createLabelText(o),t=this.getGraphicBounds(e);a=t.x2-t.x1}let s=n.map(e=>e.attribute),h=Array.from(this._idToGraphic.values());this._line2MinLength=(0,nr.Z)(this.attribute.line.line2MinLength)?this.attribute.line.line2MinLength(e,h,this.attribute):this.attribute.line.line2MinLength,this._alignOffset=null!=(t=(0,nr.Z)(this.attribute.layout.alignOffset)?this.attribute.layout.alignOffset(e,h,this.attribute):this.attribute.layout.alignOffset)?t:0;let d=this.layoutArcLabels(this.attribute.position,this.attribute,h,s,l,a);for(let e=0;e<s.length;e++){let t=s[e],l=d.find(e=>{var i;return(null==(i=e.refDatum)?void 0:i.id)===t.id});if(l){let t={visible:l.labelVisible,x:l.labelPosition.x,y:l.labelPosition.y,angle:l.angle,points:l.pointA&&l.pointB&&l.pointC?[l.pointA,l.pointB,l.pointC]:void 0,line:l.labelLine};"richtext"===n[e].type?t.width=null!=(i=l.labelLimit)?i:n[e].attribute.width:t.maxLineWidth=null!=(r=l.labelLimit)?r:n[e].attribute.maxLineWidth,l.refArc&&"arc3d"===l.refArc.type&&(t.anchor3d=[l.circleCenter.x-t.x,l.circleCenter.y-t.y],t.beta=l.refArc.attribute.beta),n[e].setAttributes(t)}}return n}layoutArcLabels(e,t,i,r,n,l){this._arcLeft.clear(),this._arcRight.clear(),this._ellipsisWidth=l;let o=0;i.forEach(e=>{e.attribute.outerRadius>o&&(o=e.attribute.outerRadius)}),r.forEach((e,i)=>{var l,a,s;let h=this._idToGraphic.get(e.id),d=h.getAttributes(!0),u={x:null!=(l=null==d?void 0:d.x)?l:0,y:null!=(a=null==d?void 0:d.y)?a:0};if(!(0,r5.Z)(r[i])&&!(0,r5.Z)(n[i])){let e=r[i]?r[i]:null,l=n[i]?n[i]:{x1:0,x2:0,y1:0,y2:0},a=(d.startAngle+d.endAngle)/2,c=d.endAngle-d.startAngle,p=(0,t9.tc)(d.endAngle-c/2),g=new SD(e,(0,t9.op)(u,d.outerRadius,a),(0,t9.op)(u,o+t.line.line1MinLength,a),p,c,a,d.innerRadius,d.outerRadius,u);g.refArc=h,g.pointA=(0,t9.op)(u,this.computeDatumRadius(2*u.x,2*u.y,d.outerRadius),g.middleAngle),g.labelSize={width:l.x2-l.x1,height:l.y2-l.y1},1===(s=g.quadrant)||2===s?this._arcRight.set(g.refDatum,g):yh(g.quadrant)&&this._arcLeft.set(g.refDatum,g)}});let a=Array.from(this._arcLeft.values()),s=Array.from(this._arcRight.values()),h=[];switch(e){case"inside":case"inside-inner":case"inside-outer":case"inside-center":h.push(...this._layoutInsideLabels(s,t,i)),h.push(...this._layoutInsideLabels(a,t,i));break;default:h.push(...this._layoutOutsideLabels(s,t,i)),h.push(...this._layoutOutsideLabels(a,t,i))}return h}_layoutInsideLabels(e,t,i){var r,n;let l=t.spaceWidth,o=null!=(r=t.position)?r:"inside",a=null!=(n=t.offsetRadius)?n:-l;return e.forEach(e=>{var i,r,n,s;let h,{labelSize:d,radian:u}=e,c=e.innerRadius,p=e.outerRadius;h=u<((s=d.height)>2*p?NaN:2*Math.asin(s/2/p))?0:p-(u>=Math.PI?c:Math.max(c,d.height/2/Math.tan(u/2)))-l,!0!==t.rotate&&(h=p-l);let g=this._getFormatLabelText(e.refDatum,h);e.labelText=g;let f=Math.min(h,e.labelSize.width),m=this._computeAlign(e,t),b,y=0;if("inside"===o&&(y="left"===m?f:"right"===m?0:f/2),b="inside-inner"===o?c-a+y:"inside-center"===o?c+(p-c)/2:p+a-y,e.labelPosition=(0,t9.op)(e.circleCenter,b,e.middleAngle),e.labelLimit=f,(0,rN.Vy)(f,0)||(e.labelVisible=!1),!1!==t.rotate){e.angle=null!=(r=null==(i=t.textStyle)?void 0:i.angle)?r:e.middleAngle;let l=null!=(n=t.offsetAngle)?n:0;["inside-inner","inside-outer"].includes(o)&&(l+=Math.PI/2),e.angle+=l}}),e}_layoutOutsideLabels(e,t,i){var r,n,l;let o=null!=(r=i[0].attribute.x)?r:0,a=2*(null!=(n=i[0].attribute.y)?n:0),s=t.layout,h=t.spaceWidth;if(e.forEach(e=>{let t=yh(e.quadrant)?-1:1;e.labelPosition={x:e.outerCenter.x+t*(e.labelSize.width/2+this._line2MinLength+h),y:e.outerCenter.y}}),e.sort((e,t)=>e.labelPosition.y-t.labelPosition.y),!1!==t.coverEnable||"none"===s.strategy){for(let r of e){let{labelPosition:e,labelSize:n}=r;r.labelLimit=n.width,r.pointB=yh(r.quadrant)?{x:e.x+n.width/2+this._line2MinLength+h,y:e.y}:{x:e.x-n.width/2-this._line2MinLength-h,y:e.y},this._computeX(r,t,i)}!1===t.coverEnable&&"none"===s.strategy&&this._coverLabels(e)}else{let r=a/((null==(l=t.textStyle)?void 0:l.fontSize)||16);this._adjustY(e,r,t,i);let{minY:n,maxY:o}=e.reduce((e,t)=>{let{y1:i,y2:r}=t.getLabelBounds();return e.minY=Math.max(0,Math.min(i,e.minY)),e.maxY=Math.min(a,Math.max(r,e.maxY)),e},{minY:1/0,maxY:-1/0}),s=Math.max(Math.abs(a/2-n),Math.abs(o-a/2)),h=this._computeLayoutRadius(s,t,i);for(let r of e)this._computePointB(r,h,t,i),this._computeX(r,t,i)}let d=2*o;return e.forEach(e=>{var i,r;e.labelVisible&&((0,rN.SQ)(e.pointB.x,this._line2MinLength+h)||(0,rN.Vy)(e.pointB.x,d-this._line2MinLength-h))&&(e.labelVisible=!1),e.angle=null!=(r=null==(i=t.textStyle)?void 0:i.angle)?r:0,t.offsetAngle&&(e.angle+=t.offsetAngle),e.labelLine=Object.assign(Object.assign({},t.line),{visible:e.labelVisible})}),e}_computeX(e,t,i){var r,n;let l=e.circleCenter,o=this.attribute.width;this.attribute.height;let a=0;i.forEach(e=>{e.getAttributes(!0).outerRadius>a&&(a=e.getAttributes(!0).outerRadius)});let s=this.computeLayoutOuterRadius(a,t.width,t.height),h=t.line.line1MinLength,d=null==(r=t.layout)?void 0:r.align,u=t.spaceWidth,{labelPosition:c,quadrant:p,pointB:g}=e;(0,sD.Z)(g.x*g.y)||(e.pointC={x:NaN,y:NaN},c.x=NaN,e.labelLimit=0);let f=this.computeRadius(s,t.width,t.height),m=yh(p)?-1:1,b=0,y=(m>0?o-g.x:g.x-0)+this._alignOffset-this._line2MinLength-u;"labelLine"===d&&(b=(f+h+this._line2MinLength)*m+l.x,y=(m>0?o-b:b-0)-u);let v=this._getFormatLabelText(e.refDatum,y);e.labelText=v;let _=Math.min(y,e.labelSize.width);switch(d){case"labelLine":break;case"edge":b=m>0?o-_-u:0+_+u;break;default:b=g.x+m*this._line2MinLength}let C=(_=Math.max(this._ellipsisWidth,_))<e.labelSize.width-1;e.labelLimit=C?_:null,e.pointC={x:b,y:c.y};let x=("left"===(n=this._computeAlign(e,t))?0:"right"===n?1:.5)*(C?_:e.labelSize.width);"edge"===d?(c.x=(m>0?o:0)-m*x+m*this._alignOffset,e.pointC.x+=m*this._alignOffset):c.x=b+m*(this._alignOffset+u+x)}_computeAlign(e,t){var i,r,n,l,o,a;let s=null!=(r=null==(i=t.textStyle)?void 0:i.textAlign)?r:null==(n=t.textStyle)?void 0:n.align,h=null!=(o=null==(l=t.layout)?void 0:l.textAlign)?o:null==(a=t.layout)?void 0:a.align;return"inside"!==t.position?(0,r5.Z)(s)||"auto"===s?"edge"===h?yh(e.quadrant)?"left":"right":yh(e.quadrant)?"right":"left":s:(0,r5.Z)(s)||"auto"===s?"center":s}_getFormatLabelText(e,t){var i;return null!=(i=null==e?void 0:e.text)?i:""}_adjustY(e,t,i,r){var n;r[0].attribute.x;let l=2*(null!=(n=r[0].attribute.y)?n:0),o=i.layout;if("vertical"===o.strategy){let t,i=0,r=e.length;if(r<=0)return;for(let n=0;n<r;n++){let{y1:l}=e[n].getLabelBounds();if(t=l-i,(0,rN.SQ)(t,0)){let i=this._shiftY(e,n,r-1,-t);this._shiftY(e,i,0,t/2)}let{y2:o}=e[n].getLabelBounds();i=o}let{y1:n}=e[0].getLabelBounds();t=n-0,(0,rN.SQ)(t,0)&&this._shiftY(e,0,r-1,-t);for(let t=e.length-1;t>=0&&e[t].getLabelBounds().y2>l;t--)e[t].labelVisible=!1}else if("none"!==o.strategy){let n=e.map((e,t)=>({arc:e,originIndex:t,priorityIndex:0}));n.sort((e,t)=>t.arc.radian-e.arc.radian),n.forEach((e,t)=>{e.priorityIndex=t,e.arc.labelVisible=!1});let a=1/0,s=-1/0;for(let h=0;h<t&&h<e.length;h++){let t;this._storeY(e);let d=n[h].arc;this._computeYRange(d,i,r),d.labelVisible=!0;let u=d.labelPosition.y,{lastIndex:c,nextIndex:p}=this._findNeighborIndex(e,n[h]),g=e[c],f=e[p];if(-1===c&&-1!==p){let t=f.labelPosition.y;u>t?d.labelPosition.y=t-f.labelSize.height/2-d.labelSize.height/2:this._twoWayShift(e,d,f,p)}else if(-1!==c&&-1===p){let t=g.labelPosition.y;u<t?d.labelPosition.y=t+g.labelSize.height/2+d.labelSize.height/2:this._twoWayShift(e,g,d,n[h].originIndex)}else if(-1!==c&&-1!==p){let t=g.labelPosition.y,i=f.labelPosition.y;u>i?(d.labelPosition.y=i-f.labelSize.height/2-d.labelSize.height/2,this._twoWayShift(e,g,d,n[h].originIndex)):(u<t?d.labelPosition.y=t+g.labelSize.height/2+d.labelSize.height/2:this._twoWayShift(e,g,d,n[h].originIndex),this._twoWayShift(e,d,f,p))}let m=Math.min(a,n[h].originIndex),b=Math.max(s,n[h].originIndex);if(t=e[b].getLabelBounds().y2-l,(0,rN.Vy)(t,0)&&this._shiftY(e,b,0,-t),t=e[m].getLabelBounds().y1-0,(0,rN.SQ)(t,0)&&this._shiftY(e,m,e.length-1,-t),t=e[b].getLabelBounds().y2-l,(0,rN.Vy)(t,0)){d.labelVisible=!1,this._restoreY(e);break}o.tangentConstraint&&!this._checkYRange(e)?(d.labelVisible=!1,this._restoreY(e)):(a=m,s=b)}}}_shiftY(e,t,i,r){let n=t<i?1:-1,l=t;for(;-1!==l;){e[l].labelPosition.y+=r;let t=this._findNextVisibleIndex(e,l,i,n);if(t>=0&&t<e.length){let{y1:i,y2:r}=e[l].getLabelBounds(),{y1:o,y2:a}=e[t].getLabelBounds();if(n>0&&r<o||n<0&&i>a)return l}l=t}return i}_findNextVisibleIndex(e,t,i,r){let n=(i-t)*r;for(let i=1;i<=n;i++){let n=t+i*r;if(e[n].labelVisible)return n}return -1}_computePointB(e,t,i,r){let n=0;r.forEach(e=>{e.getAttributes(!0).outerRadius>n&&(n=e.getAttributes(!0).outerRadius)});let l=this.computeLayoutOuterRadius(n,i.width,i.height),o=i.line.line1MinLength;if("none"===i.layout.strategy)e.pointB={x:e.outerCenter.x,y:e.outerCenter.y};else{let r=e.circleCenter,n=this.computeRadius(l,i.width,i.height),{labelPosition:a,quadrant:s}=e,h=t-Math.max(n+o,e.outerRadius),d=Math.sqrt(t**2-Math.abs(r.y-a.y)**2)-h;(0,sD.Z)(d)?e.pointB={x:r.x+d*(yh(s)?-1:1),y:a.y}:e.pointB={x:NaN,y:NaN}}}_storeY(e){for(let t of e)t.labelVisible&&(t.lastLabelY=t.labelPosition.y)}_computeYRange(e,t,i){let r,n,l,o,a,s=e.circleCenter,h={width:2*s.x,height:2*s.y},d=0;i.forEach(e=>{e.getAttributes(!0).outerRadius>d&&(d=e.getAttributes(!0).outerRadius)});let u=this.computeLayoutOuterRadius(d,t.width,t.height),c=t.line.line1MinLength,{width:p,height:g}=h,f=this.computeRadius(u,t.width,t.height),m=this._computeLayoutRadius(g/2,t,i),b=Math.abs(e.center.x-p/2),y=e.center.y-g/2;if((0,rN.Yt)(p/2,b))r=0,n=1,l=-y;else if((0,rN.Yt)(g/2,y))r=1,n=0,l=-b;else{let e=-1/(y/b);r=e,n=-1,l=y-e*b}let v=function(e,t,i,r,n,l){if(0===e&&0===t||l<=0)return[];if(0===e){let e=-i/t,n=l**2-(e-0)**2;return n<0?[]:0===n?[{x:r,y:e}]:[{x:Math.sqrt(n)+r,y:e},{x:-Math.sqrt(n)+r,y:e}]}if(0===t){let t=-i/e,o=l**2-(t-r)**2;return o<0?[]:0===o?[{x:t,y:0}]:[{x:t,y:Math.sqrt(o)+n},{x:t,y:-Math.sqrt(o)+n}]}let o=(t/e)**2+1,a=2*(t/e*(i/e+r)-n),s=a**2-4*o*((i/e+r)**2+n**2-l**2);if(s<0)return[];let h=(-a+Math.sqrt(s))/(2*o),d=(-a-Math.sqrt(s))/(2*o),u=-(t*h+i)/e;return 0===s?[{x:u,y:h}]:[{x:u,y:h},{x:-(t*d+i)/e,y:d}]}(r,n,l,c+f-m,0,m);v.length<2||(v[0].x>v[1].x&&v.reverse(),v[0].x<0?(0,rN.Yt)(v[0].y,v[1].y)?(0,rN.Vy)(e.middleAngle,-Math.PI)&&(0,rN.SQ)(e.middleAngle,0)||(0,rN.Vy)(e.middleAngle,Math.PI)&&(0,rN.SQ)(e.middleAngle,2*Math.PI)?(o=0,a=v[1].y+g/2):(o=v[1].y+g/2,a=g):v[0].y<v[1].y?(o=0,a=v[1].y+g/2):(o=v[1].y+g/2,a=h.height):(o=Math.min(v[0].y,v[1].y)+g/2,a=Math.max(v[0].y,v[1].y)+g/2),e.labelYRange=[o,a])}_computeLayoutRadius(e,t,i){let r=t.layoutArcGap,n=t.line.line1MinLength,l=0;i.forEach(e=>{e.getAttributes(!0).outerRadius>l&&(l=e.getAttributes(!0).outerRadius)});let o=this.computeLayoutOuterRadius(l,t.width,t.height),a=this.computeRadius(o,t.width,t.height)+n,s=a-r;return Math.max((s**2+e**2)/(2*s),a)}_findNeighborIndex(e,t){let i=t.originIndex,r=-1,n=-1;for(let t=i-1;t>=0;t--)if(e[t].labelVisible){r=t;break}for(let t=i+1;t<e.length;t++)if(e[t].labelVisible){n=t;break}return{lastIndex:r,nextIndex:n}}_twoWayShift(e,t,i,r){let n=i.getLabelBounds().y1-t.getLabelBounds().y2;if((0,rN.SQ)(n,0)){let t=this._shiftY(e,r,e.length-1,-n);this._shiftY(e,t,0,n/2)}}_restoreY(e){for(let t of e)t.labelVisible&&(t.labelPosition.y=t.lastLabelY)}_checkYRange(e){for(let t of e){let{labelYRange:e,labelPosition:i}=t;if(t.labelVisible&&e&&((0,rN.SQ)(i.y,e[0])||(0,rN.Vy)(i.y,e[1])))return!1}return!0}_coverLabels(e){if(e.length<=1)return;let t=e[0].getLabelBounds();for(let i=1;i<e.length;i++){let r=e[i].getLabelBounds();!function(e,t){let{x1:i,y1:r,x2:n,y2:l}=e,{x1:o,y1:a,x2:s,y2:h}=t;return!(i<=o&&n<=o||i>=s&&n>=s||r<=a&&l<=a||r>=h&&l>=h)}(t,r)?t=r:e[i].labelVisible=!1}}_getLabelLinePoints(e,t){return e.attribute.points}_createLabelLine(e,t){var i,r,n,l,o;let{line:a={},visible:s}=e.attribute,h=super._createLabelLine(e,t);if(h&&(h.setAttributes({visible:null==(n=null!=(i=a.visible&&s)?i:null==(r=e.attribute)?void 0:r.visible)||n,lineWidth:null!=(o=null==(l=a.style)?void 0:l.lineWidth)?o:1}),a.smooth&&h.setAttributes({curveType:"basis"}),"arc3d"===t.type&&t)){let{beta:e,x:i,y:r}=t.getAttributes(!0);h.setAttributes({beta:e,anchor3d:[i,r]})}return h}computeRadius(e,t,i,r){return this.computeLayoutRadius(t||0,i||0)*e*((0,r5.Z)(r)?1:r)}computeLayoutRadius(e,t){return Math.min(e/2,t/2)}_canPlaceInside(e,t){return"inside"===this.attribute.position||"inside-center"===this.attribute.position}computeLayoutOuterRadius(e,t,i){return e/(Math.min(t,i)/2)}computeDatumRadius(e,t,i){let r=this.computeLayoutOuterRadius(i,e,t);return this.computeLayoutRadius(e||0,t||0)*r}}Sz.defaultAttributes={coverEnable:!1,spaceWidth:5,layoutArcGap:6,textStyle:{visible:!0,fontSize:14,fontWeight:"normal",fillOpacity:1,boundsPadding:[-1,0,-1,0],ellipsis:!0},position:"outside",line:{visible:!0,line1MinLength:20,line2MinLength:10},layout:{align:"arc",strategy:"priority",tangentConstraint:!0}};let SW=()=>{yU("arc",Sz)};class SZ extends pz{constructor(e,t){super(e,t),this.type=SN.type,this._unCompileChannel={centerOffset:!0,radiusOffset:!0},this.computeOuterRadius=(e,t,i="normal",r)=>{var n;return r+(null!=(n=this.getAttribute("radiusOffset",t,i))?n:0)},this.computeCenter=(e,t,i="normal",r)=>(0,t9.op)({x:0,y:0},this.getAttribute("centerOffset",t,i),t[vz])[e]+r,this._computeExChannel.x=this.computeCenter,this._computeExChannel.y=this.computeCenter,this._computeExChannel.outerRadius=this.computeOuterRadius,this._extensionChannel.centerOffset=["x","y"],this._extensionChannel.radiusOffset=["outerRadius"]}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{startAngle:0,endAngle:0,outerRadius:0,innerRadius:0,cornerRadius:0,lineWidth:0,innerPadding:0,outerPadding:0})}}class SN extends SZ{constructor(){super(...arguments),this.type=SN.type}}SN.type="arc";let S$=()=>{pN(),CT(),SW(),mc(),hp.registerGraphicComponent("arc",Cm),hp.registerMark(SN.type,SN)},Sj=Object.assign(Object.assign({},bo),{pie:{name:"pie",type:"arc"},labelLine:{name:"labelLine",type:"path"}});class SG extends bC{_transformLabelSpec(e){this._addMarkLabelSpec(e,"pie")}_mergeThemeToSpec(e,t){let i=this._theme,r=e;if(this._shouldMergeThemeToSpec()){let i=this._getDefaultSpecFromChart(t);r=hs({},this._theme,i,e);let n=(e,t)=>hs({},"inside"===e||"inside-center"===e?this._theme.innerLabel:this._theme.outerLabel,t);(0,ri.Z)(r.label)?r.label=r.label.map(e=>n(e.position,e)):r.label=n(r.label.position,r.label)}return{spec:r,theme:i}}_getDefaultSpecFromChart(e){var t;let i=null!=(t=super._getDefaultSpecFromChart(e))?t:{},{centerX:r,centerY:n}=e;return(0,oV.Z)(r)&&(i.centerX=r),(0,oV.Z)(n)&&(i.centerY=n),Object.keys(i).length>0?i:void 0}}let SV=`${dg}_LABEL_VISIBLE`;class SU extends SA{constructor(){super(...arguments),this.transformerConstructor=SG,this._pieMarkName="pie",this._pieMarkType="arc",this.getCenter=()=>{var e,t;let i=this._region.getLayoutRect();return{x:s$(null==(e=this._spec)?void 0:e.centerX,i.width,i,i.width/2),y:s$(null==(t=this._spec)?void 0:t.centerY,i.height,i,i.height/2)}},this._startAngle=vN,this._endAngle=v$,this._pieMark=null,this._labelMark=null,this._labelLineMark=null,this._emptyArcMark=null,this.dataToCentralPosition=e=>{let t=e[vz];if((0,r5.Z)(t))return null;let i=this.computeDatumRadius(e),r=this.computeDatumInnerRadius(e),n=this.computeCenter(e);return(0,t9.op)(n,(i+r)/2,t)}}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.getCenter().x,y:()=>this.getCenter().y}),this._markAttributeContext.startAngleScale=e=>this.startAngleScale(e),this._markAttributeContext.endAngleScale=e=>this.endAngleScale(e)}setAttrFromSpec(){var e,t,i,r,n,l;super.setAttrFromSpec(),this._centerOffset=null!=(e=this._spec.centerOffset)?e:0,this._cornerRadius=null!=(t=this._spec.cornerRadius)?t:0;let o=function(e,t){let i=0,r=2*Math.PI,n=(0,oV.Z)(e),l=(0,oV.Z)(t);for(n||l?l?(i=n?e:t-2*Math.PI,r=t):(i=e,r=e+2*Math.PI):(i=0,r=2*Math.PI);r<=i;)r+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI,r-=2*Math.PI;for(;r<0;)i+=2*Math.PI,r+=2*Math.PI;return{startAngle:i,endAngle:r}}((0,oV.Z)(this._spec.startAngle)?(0,t9.M4)(this._spec.startAngle):this._startAngle,(0,oV.Z)(this._spec.endAngle)?(0,t9.M4)(this._spec.endAngle):this._endAngle);this._startAngle=o.startAngle,this._endAngle=o.endAngle,this._padAngle=(0,oV.Z)(this._spec.padAngle)?(0,t9.M4)(this._spec.padAngle):0,this.setAngleField(this._spec.valueField||this._spec.angleField),this._spec.categoryField&&this.setSeriesField(this._spec.categoryField),this._radiusField=[],this._specAngleField=this._angleField.slice(),this._specRadiusField=[],this._showEmptyCircle=null!=(r=null==(i=this._spec.emptyPlaceholder)?void 0:i.showEmptyCircle)&&r,this._showAllZero=null!=(n=this._spec.showAllZero)&&n,this._supportNegative=null!=(l=this._spec.supportNegative)&&l}initData(){super.initData();let e=this.getViewData();if(!e)return;hK(this._dataSet,"pie",SM),e.transform({type:"pie",options:{angleField:()=>this._angleField[0],startAngle:()=>this._startAngle,endAngle:()=>this._endAngle,minAngle:()=>(0,oV.Z)(this._spec.minAngle)?(0,t9.M4)(this._spec.minAngle):0,asStartAngle:vH,asEndAngle:vO,asRatio:vF,asMiddleAngle:vz,asRadian:vZ,asQuadrant:vW,asK:vD,showAllZero:this._showAllZero,supportNegative:this._supportNegative,showEmptyCircle:this._showEmptyCircle}},!1);let t=new tf.V(this._dataSet,{name:`${dg}_series_${this.id}_viewDataLabel`});t.parse([this.getViewData()],{type:"dataview"}),this._viewDataLabel=new cj(this._option,t)}compileData(){var e;super.compileData(),null==(e=this._viewDataLabel)||e.compile()}initMark(){this._pieMark=this._createMark(Object.assign(Object.assign({},SU.mark.pie),{name:this._pieMarkName,type:this._pieMarkType}),{key:dm,groupKey:this._seriesField,isSeriesMark:!0},{morph:by(this._spec,this._pieMarkName),morphElementKey:this._seriesField}),this._showEmptyCircle&&(this._emptyArcMark=this._createMark({name:"emptyCircle",type:"arc"},{dataView:!1}),this._data.addRelatedMark(this._emptyArcMark))}startAngleScale(e){return sL(vH)(e)}endAngleScale(e){return sL(vO)(e)}_computeLayoutRadius(){return vG(()=>this._spec.layoutRadius,this.getLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}initMarkStyle(){let e={x:()=>this.getCenter().x,y:()=>this.getCenter().y,fill:this.getColorAttribute(),outerRadius:cH(this._outerRadius)?this._outerRadius:()=>this._computeLayoutRadius()*this._outerRadius,innerRadius:cH(this._innerRadius)?this._innerRadius:()=>this._computeLayoutRadius()*this._innerRadius,cornerRadius:()=>this._computeLayoutRadius()*this._cornerRadius,startAngle:e=>this.startAngleScale(e),endAngle:e=>this.endAngleScale(e),padAngle:this._padAngle,centerOffset:this._centerOffset},t=this._pieMark;t&&this.setMarkStyle(t,e,"normal",q.Series);let i=this._emptyArcMark;i&&this.setMarkStyle(i,Object.assign(Object.assign({},e),{visible:()=>{let e=this.getViewData().latestData;return!e||!e.length}}),"normal",q.Series)}getInteractionTriggers(){return this._parseInteractionConfig(this._pieMark?[this._pieMark]:[])}initTooltip(){super.initTooltip(),this._pieMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pieMark)}initMarkStyleWithSpec(e,t){if(super.initMarkStyleWithSpec(e,t),e.name===this._pieMarkName){let t=this.getSpec()[e.name];if(t)for(let i in t.state||{})this.setMarkStyle(e,this.generateRadiusStyle(t.state[i]),i,q.User_Mark)}"emptyCircle"===e.name&&this.setMarkStyle(e,this.generateRadiusStyle(t.style),"normal",q.User_Mark)}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{visible:sL(SV).bind(this),text:e=>e[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:this.dataToPositionZ.bind(this)})}afterInitMark(){super.afterInitMark()}initEvent(){var e;super.initEvent(),null==(e=this._viewDataLabel.getDataView())||e.target.addListener("change",this.viewDataLabelUpdate.bind(this))}initGroups(){}onLayoutEnd(){this._viewDataLabel.getDataView().reRunAllTransform(),this.onMarkPositionUpdate(),super.onLayoutEnd()}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return this._specAngleField}viewDataLabelUpdate(){this.event.emit(N.viewDataLabelUpdate,{model:this}),this._viewDataLabel.updateData()}generateRadiusStyle(e){if(!e)return;let t={};return e.outerRadius&&(t.outerRadius=()=>this._computeLayoutRadius()*e.outerRadius),e.innerRadius&&(t.innerRadius=()=>this._computeLayoutRadius()*e.innerRadius),e.cornerRadius&&(t.cornerRadius=()=>this._computeLayoutRadius()*e.cornerRadius),t}computeCenter(e){return{x:this._pieMark.getAttribute("x",e,"normal"),y:this._pieMark.getAttribute("y",e,"normal")}}getRadius(e="normal"){var t,i,r,n,l,o,a;let s="normal"===e?null==(r=null==(i=this.getSpec()[(null==(t=this._pieMark)?void 0:t.name)||"pie"])?void 0:i.style)?void 0:r.outerRadius:null==(a=null==(o=null==(l=this.getSpec()[(null==(n=this._pieMark)?void 0:n.name)||"pie"])?void 0:l.state)?void 0:o[e])?void 0:a.outerRadius;return null!=s?s:this._outerRadius}getInnerRadius(e="normal"){var t,i,r,n,l,o,a;let s="normal"===e?null==(r=null==(i=this.getSpec()[(null==(t=this._pieMark)?void 0:t.name)||"pie"])?void 0:i.style)?void 0:r.innerRadius:null==(a=null==(o=null==(l=this.getSpec()[(null==(n=this._pieMark)?void 0:n.name)||"pie"])?void 0:l.state)?void 0:o[e])?void 0:a.innerRadius;return null!=s?s:this._innerRadius}computeRadius(e,t){return this._computeLayoutRadius()*e*((0,r5.Z)(t)?1:t)+this._centerOffset}computeDatumRadius(e,t){return this._computeLayoutRadius()*this.getRadius(t)+this._centerOffset}_compareSpec(e,t,i){i=null!=i?i:{data:!0};let r=["centerX","centerY","centerOffset","radius","innerRadius","cornerRadius","startAngle","endAngle","padAngle"];r.forEach(e=>{i[e]=!0});let n=super._compareSpec(e,t,i);return e=null!=e?e:{},r.some(i=>e[i]!==t[i])&&(n.reRender=!0,n.change=!0),n}computeDatumInnerRadius(e,t){return this._computeLayoutRadius()*this.getInnerRadius(t)+this._centerOffset}dataToPosition(e,t){let i=e[vz];if((0,r5.Z)(i)||t&&!this.isDatumInViewData(e))return null;let r=this.computeDatumRadius(e),n=this.computeCenter(e);return(0,t9.op)(n,r,i)}initAnimation(){var e,t,i;let r={growFrom:(e,t,i)=>{var r,n;if(i===V.appear)return this._startAngle;if(i===V.disappear)return this._endAngle;let l=[V.disappear,V.exit],o=this._pieMark.getGraphics(),a=null==e?void 0:e[df];if(void 0===o.find(e=>{var t;return(null==(t=e.context.data[0])?void 0:t[df])<a}))return this._startAngle;if(void 0===o.find(e=>{var t;return(null==(t=e.context.data[0])?void 0:t[df])>a}))return this._endAngle;let s=[...o].reverse().find(e=>{var t;return(null==(t=e.context.data[0])?void 0:t[df])<a});return l.includes(i)?null==(r=null==s?void 0:s.getFinalAttribute())?void 0:r.endAngle:null==(n=null==s?void 0:s.attribute)?void 0:n.endAngle}},n=null==(e=this._spec.animationAppear)?void 0:e.preset;if(this._pieMark){let e=bg(null==(t=hp.getAnimationInKey("pie"))?void 0:t(r,n),bf("pie",this._spec,this._markAttributeContext));e.normal&&e.normal.type&&(e.normal=function(e,t){var i,r,n,l;let o=null!=(r=null==(i=t.options)?void 0:i.distance)?r:10,a=(0,sD.Z)(t.duration)?t.duration/2:1e3,s=null!=(n=t.options.easing)?n:"cubicOut";return{oneByOne:t.oneByOne,loop:null!=(l=t.loop)&&l,timeSlices:[{duration:a,effects:{easing:s,channel:{x:{from:t=>e.getAttribute("x",t),to:t=>e.getAttribute("x",t)+(0,t9.op)({x:0,y:0},o,t[vz]).x},y:{from:t=>e.getAttribute("y",t),to:t=>e.getAttribute("y",t)+(0,t9.op)({x:0,y:0},o,t[vz]).y}}}},{duration:a,effects:{easing:s,channel:{x:{to:t=>e.getAttribute("x",t),from:t=>e.getAttribute("x",t)+(0,t9.op)({x:0,y:0},o,t[vz]).x},y:{to:t=>e.getAttribute("y",t),from:t=>e.getAttribute("y",t)+(0,t9.op)({x:0,y:0},o,t[vz]).y}}}}]}}(this._pieMark,e.normal)),this._pieMark.setAnimationConfig(e)}if(this._emptyArcMark){let e=bg(null==(i=hp.getAnimationInKey("emptyCircle"))?void 0:i(r,null!=n?n:"fadeIn"));this._emptyArcMark.setAnimationConfig(e)}}getDefaultShapeType(){return"circle"}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(e,t){return t}getActiveMarks(){return[this._pieMark]}}SU.transformerConstructor=SG,SU.mark=Sj,SU.builtInTheme={pie:{outerRadius:.6,pie:{style:{fillOpacity:1}},label:{visible:!1,interactive:!0,position:"outside",style:{fontWeight:"normal",stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1}},innerLabel:{style:{lineWidth:2}},emptyCircle:{style:{fill:{type:"palette",key:"emptyCircleColor"},fillOpacity:1}}}};class SK extends SU{constructor(){super(...arguments),this.type=z.pie}}SK.type=z.pie;let SX=()=>{S$(),SF(),SH(),hp.registerSeries(SK.type,SK)};class SY extends xA{_isValidSeries(e){return!this.seriesType||e===this.seriesType}getIndicatorSpec(e){var t,i,r;let n=(0,ag.IX)(e.indicator),l=null!=(t=e.innerRadius)?t:null==(r=null==(i=e.series)?void 0:i[0])?void 0:r.innerRadius;return(0,oV.Z)(l)&&n.forEach(e=>{(0,r5.Z)(e.limitRatio)&&(e.limitRatio=l)}),n}_getDefaultSeriesSpec(e,t){return super._getDefaultSeriesSpec(e,["radius","outerRadius","innerRadius","startAngle","endAngle","sortDataByAxis"],t)}transformSpec(e){super.transformSpec(e),(0,ri.Z)(e.dataZoom)&&e.dataZoom.length>0&&e.dataZoom.forEach(e=>{"axis"===e.filterMode&&(e.filterMode="filter")}),this.transformSeriesSpec(e),(0,oV.Z)(e.indicator)&&(e.indicator=this.getIndicatorSpec(e))}}class Sq extends SY{needAxes(){return!1}_getDefaultSeriesSpec(e){var t;let i=super._getDefaultSeriesSpec(e,["center","centerOffset","cornerRadius","padAngle","minAngle","emptyPlaceholder","showAllZero","supportNegative","useSequentialAnimation","layoutRadius"]);return i.categoryField=e.categoryField||e.seriesField,i.valueField=e.valueField||e.angleField,i.emptyCircle=null==(t=e.emptyPlaceholder)?void 0:t.emptyCircle,i}}class SJ extends xB{constructor(){super(...arguments),this.transformerConstructor=Sq}}SJ.transformerConstructor=Sq;class SQ extends SJ{constructor(){super(...arguments),this.transformerConstructor=Sq,this.type="pie",this.seriesType=z.pie}}function S0(e){return"angle"===e?"growAngleIn":"growRadiusIn"}SQ.type="pie",SQ.seriesType=z.pie,SQ.transformerConstructor=Sq;let S1=e=>({type:S0(e.growField),options:{overall:!0}}),S2={type:"fadeIn"},S3=e=>({type:S0(e.growField)}),S4=e=>({type:"angle"===e.growField?"growAngleOut":"growRadiusOut"}),S5=()=>{hp.registerAnimation("rose",(e,t)=>({appear:function(e,t){if(!1===t)return{};switch(t){case"fadeIn":return S2;case"growAngle":return S1(Object.assign(Object.assign({},e),{growField:"angle"}));default:return S1(Object.assign(Object.assign({},e),{growField:"radius"}))}}(e,t),enter:S3(e),exit:S4(e),disappear:{duration:mt.disappear.duration}}))};class S6 extends SA{getStackGroupFields(){return this._angleField}getStackValueField(){return(0,ag.IX)(this._spec.valueField)[0]||(0,ag.IX)(this._spec.radiusField)[0]}getGroupFields(){return this._angleField}setAttrFromSpec(){super.setAttrFromSpec(),this.setAngleField(this._spec.categoryField||this._spec.angleField),this.setRadiusField(this._spec.valueField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice(),this.setInnerRadiusField(this._spec.valueField||this._spec.radiusField),this.getStack()&&this.setValueFieldToStack(),this.getPercent()&&this.setValueFieldToPercent()}setValueFieldToStack(){this.setRadiusField(dC),this.setInnerRadiusField(d_)}setValueFieldToPercent(){this.setRadiusField(dw),this.setInnerRadiusField(dx)}getDimensionField(){return this._specAngleField}getMeasureField(){return this._specRadiusField}getDefaultShapeType(){return"square"}}let S8=Object.assign(Object.assign({},bo),{rose:{name:"rose",type:"arc"}});class S7 extends bC{constructor(){super(...arguments),this._supportStack=!0}_transformLabelSpec(e){this._addMarkLabelSpec(e,"rose")}}var S9=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class Ae extends v5{get center(){return this._center}get startAngle(){return this._startAngle}get endAngle(){return this._endAngle}getOrient(){return this._orient}getDefaultInteractive(){return"angle"!==this._orient}getGroupScales(){return this._groupScales}static getSpecInfo(e){let t,i;if(!e[this.specKey])return null;let r=(0,ri.Z)(e[this.specKey]),n=r?e[this.specKey]:[e[this.specKey]],l=[],o=[],a=[];return n.forEach((n,s)=>{if(!function(e){let t=null==e?void 0:e.orient;return"angle"===t||"radius"===t}(n))return;let{axisType:h,componentName:d,startAngle:u,endAngle:c,center:p,outerRadius:g,layoutRadius:f}=vj(n,e);n.center=p,n.startAngle=u,n.endAngle=c,n.outerRadius=g,n.type=h,n.layoutRadius=f;let m={spec:n,specPath:r?[this.specKey,s]:[this.specKey],specInfoPath:["component",this.specKey,s],type:d};l.push(m),"radius"===n.orient?(o.push(m),i=s):(a.push(m),t=s)}),o.forEach(e=>{e.angleAxisIndex=t}),a.forEach(e=>{e.radiusAxisIndex=i}),l}static createComponent(e,t){let{spec:i}=e,r=S9(e,["spec"]),n=hp.getComponentInKey(r.type);return n?new n(i,Object.assign(Object.assign({},t),r)):(t.onError(`Component ${r.type} not found`),null)}constructor(e,t){super(e,t),this.type=sc.polarAxis,this.name=sc.polarAxis,this._defaultBandPosition=0,this._defaultBandInnerPadding=0,this._defaultBandOuterPadding=0,this.layoutType="absolute",this.layoutZIndex=X.Axis,this._tick=void 0,this._center=null,this._startAngle=vN,this._endAngle=v$,this._orient="radius",this._groupScales=[],this.effect={scaleUpdate:e=>{this.computeData(null==e?void 0:e.value),y8(this._regions,e=>{"radius"===this.getOrient()?vB(e.radiusAxisHelper,this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&(e.radiusAxisHelper=this.axisHelper()):vB(e.angleAxisHelper,this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&(e.angleAxisHelper=this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._transformLayoutPosition=e=>{var t;let i=null==(t=this.getRegions())?void 0:t[0];return i?i.getLayoutStartPoint():e},this.getCenter=()=>{var e,t;let i=this.getRefLayoutRect(),{width:r,height:n}=i;return{x:s$(null==(e=this._center)?void 0:e.x,r,i,r/2),y:s$(null==(t=this._center)?void 0:t.y,n,i,n/2)}},this.getRefLayoutRect=()=>this.getRegions()[0].getLayoutRect(),this._coordinateType="polar"}setAttrFromSpec(){super.setAttrFromSpec(),this.visible&&(this._axisStyle=this._getAxisAttributes(),this._gridStyle=this._getGridAttributes()),this._tick=this._spec.tick,this._orient="angle"===this._spec.orient?"angle":"radius",this._center=this._spec.center,this._startAngle=(0,t9.M4)(this._spec.startAngle),this._endAngle=(0,t9.M4)(this._spec.endAngle),this._inverse=this._spec.inverse}_tickTransformOption(){var e;return Object.assign(Object.assign({},super._tickTransformOption()),{noDecimal:null==(e=this._tick)?void 0:e.noDecimals,startAngle:this.startAngle,labelOffset:vM(this._spec),getRadius:()=>this.getOuterRadius(),inside:this._spec.inside})}updateScaleRange(){let e,t=this._scale.range();return e="radius"===this.getOrient()?this._inverse?[this.computeLayoutOuterRadius(),this.computeLayoutInnerRadius()]:[this.computeLayoutInnerRadius(),this.computeLayoutOuterRadius()]:this._inverse?[this._endAngle,this._startAngle]:[this._startAngle,this._endAngle],(!t||!e||t[0]!==e[0]||t[1]!==e[1])&&(this._scale.range(e),!0)}collectSeriesField(e,t){var i,r;return e>0?null==(r=null==(i=t.getGroups())?void 0:i.fields)?void 0:r[e]:"radius"===this.getOrient()?t.getRadiusField():t.getAngleField()}updateSeriesScale(){y8(this._regions,e=>{"radius"===this.getOrient()?vB(e.radiusAxisHelper,this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&(e.setRadiusScale(this._scale),e.radiusAxisHelper=this.axisHelper()):vB(e.angleAxisHelper,this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&(e.setAngleScale(this._scale),e.angleAxisHelper=this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}getSeriesStatisticsField(e){let t="radius"===this.getOrient()?e.getRadiusField():e.getAngleField();return(0,cz.z2)(this._scale.type)?t:[t[0]]}initGroupScales(){}axisHelper(){return{isContinuous:(0,cz.z2)(this._scale.type),dataToPosition:this.dataToPosition.bind(this),coordToPoint:this.coordToPoint.bind(this),pointToCoord:this.pointToCoord.bind(this),center:this.getCenter.bind(this),layoutRadius:this._computeLayoutRadius.bind(this),getScale:(e=0)=>this._scales[e],getAxisId:()=>this.id,getSpec:()=>this._spec}}positionToData(e){let t=this.pointToCoord(e);return"radius"===this.getOrient()?this.invert(t.radius):this.invert(t.angle)}coordToPoint(e){let t=this.getCenter();return(0,t9.op)(t,e.radius,e.angle)}pointToCoord(e){let t=this.getCenter(),i=this._startAngle,r=this._endAngle;return(0,t9.Jl)(e,t,i,r)}getOuterRadius(){return this.computeLayoutOuterRadius()}getInnerRadius(){return this.computeLayoutInnerRadius()}updateLayoutAttribute(){this._visible&&("radius"===this.getOrient()?this._layoutRadiusAxis():this._layoutAngleAxis()),super.updateLayoutAttribute()}_getNormalizedValue(e,t){return 0===t?0:(this.dataToPosition(e)-this._getStartValue())/t}getLabelItems(e){var t;let i=null==(t=this.getTickData())?void 0:t.getLatestData();return i&&i.length?[i.map(t=>vP(t.value,this._getNormalizedValue([t.value],e)))]:[]}_getStartValue(){return"radius"===this.getOrient()?this.computeLayoutInnerRadius():this._startAngle}_layoutAngleAxis(){var e,t,i,r,n;let l=this.getCenter(),o=this.computeLayoutOuterRadius(),a=this.computeLayoutInnerRadius(),s=this._endAngle-this._startAngle,h=this.getLabelItems(s),d=Object.assign(Object.assign({},this.getLayoutStartPoint()),{inside:this._spec.inside,center:l,radius:o,innerRadius:a,startAngle:this._startAngle,endAngle:this._endAngle,layoutRect:this.getRefLayoutRect(),autoLabelMaxWidth:null!=(t=null==(e=this._spec.label)?void 0:e.autoLabelMaxWidth)&&t,sides:(null==(n=null==(r=null==(i=this._getRelatedAxis(this._option.radiusAxisIndex))?void 0:i.getSpec())?void 0:r.grid)?void 0:n.smooth)?void 0:this.getScale().domain().length}),u=Object.assign(Object.assign({},d),{size:this.getRefLayoutRect(),title:{text:this._spec.title.text||this._dataFieldText},items:h,orient:"angle",scale:this._scale});this._spec.grid.visible&&(u.grid=Object.assign({type:"line",smoothLink:!0,items:h[0]},d)),this._update(u)}_layoutRadiusAxis(){var e,t,i;let r=this.getCenter(),n=this.computeLayoutOuterRadius(),l=this.computeLayoutInnerRadius(),o=this.coordToPoint({angle:this._startAngle,radius:n}),a=this.coordToPoint({angle:this._startAngle,radius:l}),s=il.HL.distancePP(a,o),h=this.getLabelItems(s),d=Object.assign(Object.assign({},this.getLayoutStartPoint()),{start:a,end:o,verticalFactor:-1}),u=Object.assign(Object.assign({},d),{title:{text:this._spec.title.text||this._dataFieldText},items:h,orient:"radius",scale:this._scale.clone()});(null==(e=this._spec.grid)?void 0:e.visible)&&(u.grid=Object.assign({items:h[0],type:(null==(t=this._spec.grid)?void 0:t.smooth)?"circle":"polygon",center:r,closed:!0,sides:null==(i=this._getRelatedAxis(this._option.angleAxisIndex))?void 0:i.getScale().domain().length,startAngle:this._startAngle,endAngle:this._endAngle},d)),this._update(u)}_getRelatedAxis(e){if((0,oV.Z)(e))return this._option.getComponentByIndex(this.specKey,e)}_computeLayoutRadius(){return vG(()=>this._spec.layoutRadius,this.getRefLayoutRect,this.getCenter,()=>({startAngle:this._startAngle,endAngle:this._endAngle}))}computeLayoutOuterRadius(){var e;let t=null!=(e=this._spec.outerRadius)?e:this._spec.radius,i=null!=t?t:this.getRefSeriesRadius().outerRadius;return this._computeLayoutRadius()*i}computeLayoutInnerRadius(){var e;let t=null!=(e=this._spec.innerRadius)?e:this.getRefSeriesRadius().innerRadius;return this._computeLayoutRadius()*t}getRefSeriesRadius(){let e=.6,t=0,i=this.getChart().getSpec();return y8(this.getRegions(),r=>{var n;if(n=r.type,[z.rose,z.radar,z.circularProgress].includes(n)){let{outerRadius:n=i.outerRadius,innerRadius:l=i.innerRadius}=r;(0,sD.Z)(n)&&(e=n),(0,sD.Z)(l)&&(t=l)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),{outerRadius:e,innerRadius:t}}_update(e){let{grid:t}=e,i=S9(e,["grid"]);this._axisMark.getComponent().setAttributes(hs({},this._axisStyle,i)),this._gridMark&&this._gridMark.getComponent().setAttributes(hs({},this._gridStyle,t))}invert(e){var t;if("angle"===this.getOrient()&&"band"===this._scale.type){let i=this._scale.range(),r=i[i.length-1]-i[0],n=.5===(null!=(t=this.getSpec().bandPosition)?t:this._defaultBandPosition)?0:this._scale.bandwidth()/2;if(i[0]<0){let t=(e+n+Math.abs(i[0]))%r-Math.abs(i[0]);return this._scale.invert(t)}return this._scale.invert((e+n)%r)}return this._scale.invert(e)}}Ae.type=sc.polarAxis,Ae.specKey="axes";let At=(e,t,i)=>{var r;let{labelStyle:n,getRadius:l,labelOffset:o,labelFormatter:a,inside:s}=i,h=null==l?void 0:l(),d=null!=(r=n.angle)?r:0,u=pq(n);return t.map(t=>{let i=a?a(t):`${t}`,{width:r,height:l}=u.quickMeasure(i),c=Math.max(r,12),p=Math.max(l,12),g=e.scale(t),f={x:0,y:0},m=0,b=0,y={align:n.textAlign,baseline:n.textBaseline},{x:v,y:_}=function(e,t,i,r,n){var l;let o=(0,t9.op)({x:0,y:0},i,e),a=_y(o,_v(r,o,t,n));return l=_v(r||1,a,t,n),{x:a.x+l[0],y:a.y+l[1]}}(g,f,h,o,s);return y.align||((0,rN.Yt)(v,f.x)?y.baseline||(y.baseline=_>f.y?"top":"bottom"):v>f.x?y.align="left":v<f.x&&(y.align="right")),m=v+("right"===y.align?-c:"left"===y.align?0:-c/2),b=_+("bottom"===y.baseline?-p:"top"===y.baseline?0:-p/2),(new t4.FB).set(m,b,m+c,b+p).rotate(d,m+c/2,b+p/2)})},Ai=(e,t)=>{let i,{tickCount:r,forceTickCount:n,tickStep:l,getRadius:o,labelOffset:a,labelGap:s=0,labelStyle:h}=t,d=null==o?void 0:o();if(!d||d<=0)return vg(e.domain());if((0,oV.Z)(l))i=e.stepTicks(l);else if((0,oV.Z)(n))i=e.forceTicks(n);else if((0,oV.Z)(r)){let t=e.range(),n=Math.abs(t[t.length-1]-t[0]),l=(0,nr.Z)(r)?r({axisLength:n,labelStyle:h}):r;i=e.ticks(l)}else if(t.sampling){let r=e.domain(),n=e.range(),l=At(e,r,t),o=(0,ag.iH)(n),h=Math.abs((0,ag.CE)(n)-o)*(d+a)/r.length,{step:u,delCount:c}=Ar(r,l,s,Math.floor(l.reduce((e,t)=>Math.min(e,t.width(),t.height()),Number.MAX_VALUE)/h));i=(i=e.stepTicks(u)).slice(0,i.length-c)}else i=e.domain();return vg(i)},Ar=(e,t,i,r)=>{let n=r;do{let r=!0;n++;let l=0;do l+n<e.length&&vf(t[l],t[l+n],i)&&(r=!1),l+=n;while(r&&l<e.length);if(r)break}while(n<=e.length);let l=0;if(e.length>2){let i=e.length-e.length%n;for(i>=e.length&&(i-=n);i>0&&vf(t[0],t[i]);)l++,i-=n}return{step:n,delCount:l}};class An{isInValidValue(e){let{startAngle:t=pG,endAngle:i=pV}=this.attribute;return Math.abs(i-t)%(2*Math.PI)==0?e>1:e<0||e>1}getTickCoord(e){let{startAngle:t=pG,endAngle:i=pV,center:r,radius:n,inside:l=!1,innerRadius:o=0}=this.attribute;return(0,t9.op)(r,l&&o>0?o:n,t+(i-t)*e)}getVerticalVector(e,t=!1,i){return _v(e,i,this.attribute.center,t,this.attribute.inside)}getRelativeVector(e){let{center:t}=this.attribute;return[e.y-t.y,-1*(e.x-t.x)]}}function Al(e,t){let i=e.length;return{prevLabel:t>=1?e[t-1]:e[i-1],nextLabel:t<i-1?e[t+1]:e[0]}}function Ao(e,t,i){var r;e.setAttributes({maxLineWidth:t,ellipsis:null!=(r=e.attribute.ellipsis)?r:i})}function Aa(e,t,i){let r=[];if(e.length>=3){let{prevLabel:i,nextLabel:n}=Al(e,t);r.push(i,n)}else 2===e.length&&r.push(e[+(0===t)]);let n=e[t],l=Math.min(Math.abs(n.attribute.y-i.y1),Math.abs(n.attribute.y-i.y2));r.forEach(e=>{l=Math.min(l,Math.abs(e.attribute.y-n.attribute.y))}),l>0&&n.setAttributes({whiteSpace:"normal",heightLimit:l})}var As=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};_4(),_Z();class Ah extends Cz{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Ah.defaultAttributes,e))}renderLine(e){let{startAngle:t=pG,endAngle:i=pV,radius:r,center:n,innerRadius:l=0,line:o={},inside:a=!1,sides:s}=this.attribute,h,d=r,u=l;if(a&&l>0&&(d=l,u=0),(0,sD.Z)(s)&&s>=3){let e=__(n,s,d,t,i);h=oq.path(Object.assign(Object.assign({},o.style),{path:_C(e,!0)}))}else{let e=Object.assign(Object.assign(Object.assign({},n),{startAngle:t,endAngle:i,radius:d,innerRadius:u}),o.style);h=oq.circle(e)}h.name=eF.line,h.id=this._getNodeId("line"),(0,d$.Z)(o.state)||(h.states=(0,ha.Z)({},v2,o.state)),e.add(h)}getTitleAttribute(){var e,t,i;let{center:r,radius:n,innerRadius:l=0}=this.attribute,o=this.attribute.title,{space:a=4,textStyle:s={},shape:h,background:d,state:u={}}=o,c=As(o,["space","textStyle","shape","background","state"]),p=r,g=0;(null==(e=this.attribute.label)?void 0:e.visible)&&!1===this.attribute.label.inside&&(g=(0,hH.Z)(this.attribute.label,"style.fontSize",12)+(0,hH.Z)(this.attribute.label,"space",4));let f=0;(null==(t=this.attribute.tick)?void 0:t.visible)&&!1===this.attribute.tick.inside&&(f=this.attribute.tick.length||4),(null==(i=this.attribute.subTick)?void 0:i.visible)&&!1===this.attribute.subTick.inside&&(f=Math.max(f,this.attribute.subTick.length||2));let m=n+f+g+a,b="middle",{position:y}=this.attribute.title;(0,r5.Z)(y)&&(y=0===l?"end":"middle"),"start"===y?(b="bottom",p={x:r.x,y:r.y-m}):"end"===y&&(b="top",p={x:r.x,y:r.y+m});let v=Object.assign(Object.assign(Object.assign({},p),c),{textStyle:Object.assign({textBaseline:b,textAlign:"center"},s),state:{text:(0,ha.Z)({},v2,u.text),shape:(0,ha.Z)({},v2,u.shape),panel:(0,ha.Z)({},v2,u.background)}}),{angle:_}=c;return v.angle=_,h&&h.visible&&(v.shape=Object.assign({visible:!0},h.style),h.space&&(v.space=h.space)),d&&d.visible&&(v.panel=Object.assign({visible:!0},d.style)),v}getSubTickLineItems(){var e,t;let{subTick:i}=this.attribute,r=[],{count:n=4,inside:l=!1,length:o=2}=i,a=this.tickLineItems,s=a.length;if(s>=2){let i=this.data[1].value-this.data[0].value,h=null==(t=null==(e=this.attribute)?void 0:e.tick)?void 0:t.alignWithLabel;for(let e=0;e<s;e++){let t=a[e],s=a[e+1];for(let e=0;e<n;e++){let a=(e+1)/(n+1),d=(1-a)*t.value+a*(s?s.value:h?1:t.value+i),u=this.getTickCoord(d),c=this.getVerticalCoord(u,o,l);r.push({start:u,end:c,value:d})}}}return r}beforeLabelsOverlap(e,t,i,r,n){}handleLabelsOverlap(e,t,i,r,n){if((0,d$.Z)(e))return;let{inside:l,radius:o,center:a,size:s,label:h,orient:d}=this.attribute,u=s?{x1:0,y1:0,x2:s.width,y2:s.height}:{x1:a.x-o,y1:a.y-o,x2:a.x+o,y2:a.y+o},{layoutFunc:c,autoLimit:p,limitEllipsis:g,autoHide:f,autoHideMethod:m,autoHideSeparation:b,autoWrap:y}=h;(0,nr.Z)(c)?c(e,t,r,this):((p||y)&&function(e,t){let{ellipsis:i,inside:r,bounds:n,autoWrap:l,center:o}=t;r||e.forEach((t,r)=>{let{x:a,y:s}=t.attribute,h=t.AABBBounds;if((0,rN.Yt)(a,o.x)){if(s>n.y2||s<n.y1)return void Ao(t,0,i);let l=n.x2-n.x1;if(e.length>=3){let{prevLabel:n,nextLabel:o}=Al(e,r),s=n.attribute.x,h=o.attribute.x;s>h&&(s=o.attribute.x,h=n.attribute.x);let d=s===h?l:a>=s&&a<=h?h-s:Math.min(Math.abs(s-a),Math.abs(h-a));t.AABBBounds.width()>d&&Ao(t,d,i)}else t.AABBBounds.width()>l&&Ao(t,l,i)}else a>o.x&&h.x2>n.x2?(Ao(t,n.x2-a,i),l&&Aa(e,r,n)):a<o.x&&h.x1<n.x1&&(Ao(t,a-n.x1,i),l&&Aa(e,r,n))})}(e,{inside:l,autoWrap:y,bounds:u,ellipsis:g,center:a}),f&&C$(e,{orient:d,method:m,separation:b}))}afterLabelsOverlap(e,t,i,r,n){var l;let{layoutRect:o,autoLabelMaxWidth:a}=this.attribute;if(!a||!o||!e||0===e.length)return;let s=0+o.width;for(let t=0;t<e.length;t++){let i=e[t],r=i.attribute.x,n=null!=(l=i.attribute.textAlign)?l:"center",o=0;(o="left"===n?s-r:"right"===n?r-0:2*Math.max(0,Math.min(r-0,s-r)))>0?i.setAttributes({maxLineWidth:o}):i.setAttributes({maxLineWidth:0})}}getTextBaseline(e){return .3>Math.abs(e[1]/e[0])?"middle":e[1]<0?"bottom":e[1]>0?"top":"middle"}getLabelAlign(e,t,i){return(0,rN.Yt)(e[0],0)?{textAlign:"center",textBaseline:e[1]>0?"top":"bottom"}:e[0]<0?{textAlign:"right",textBaseline:this.getTextBaseline(e)}:e[0]>0?{textAlign:"left",textBaseline:this.getTextBaseline(e)}:{textAlign:"center",textBaseline:"middle"}}getLabelPosition(e,t,i,r){return e}}Ah.defaultAttributes=_c,(0,gH.jB)(Ah,An);var Ad=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};dV(),_1();class Au extends _A{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},_A.defaultAttributes,e),t)}getGridPointsByValue(e){let t=this.getTickCoord(e),{radius:i,innerRadius:r=0}=this.attribute;return[t,this.getVerticalCoord(t,i-r,!0)]}getGridAttribute(e){let t,i=[],r=this.attribute,{radius:n,innerRadius:l=0,startAngle:o=pG,endAngle:a=pV,center:s,subGrid:h}=r,d=Ad(r,["radius","innerRadius","startAngle","endAngle","center","subGrid"]),{alignWithLabel:u=!0}=d||{},c=n-l,p=this._parseTickSegment();if(e){t=(0,ha.Z)({},d,h);let e=[],{count:r=4}=h||{},n=this.data.length;if(n>=2){let t=this._getPointsOfSubGrid(p,u);for(let i=0;i<n;i++){let n=t[i],l=t[i+1];e.push({id:`sub-${i}-0`,points:[this.getTickCoord(n.value),this.getVerticalCoord(this.getTickCoord(n.value),c,!0)],datum:{}});for(let t=0;t<r;t++){let o=(t+1)/(r+1),a=(1-o)*n.value+o*(l?l.value:u?1:n.value+p),s=this.getTickCoord(a),h=this.getVerticalCoord(s,c,!0);e.push({id:`sub-${i}-${t+1}`,points:[s,h],datum:{}})}}Math.abs(a-o)%(2*Math.PI)==0&&e.push(e[0]),i=e}}else{t=d;let e=[];(Math.abs(a-o)%(2*Math.PI)==0?[...this.data].concat(this.data[0]):this.data).forEach(t=>{let{point:i}=t;if(!u){let e=t.value-p/2;if(this.isInValidValue(e))return;i=this.getTickCoord(e)}let r=this.getVerticalCoord(i,c,!0);e.push({id:t.id,points:[i,r],datum:t})}),i=e}return Object.assign(Object.assign({},t),{items:i,center:s,type:"line"})}}(0,gH.jB)(Au,An);let Ac={grid:{smooth:!0,visible:!0},subGrid:{smooth:!0,visible:!1}},Ap={grid:{visible:!0,style:{lineDash:[6,6]}},label:{space:5}};class Ag extends Ae{constructor(){super(...arguments),this.type=sc.polarBandAxis,this._scale=new cM.j}computeDomain(e){return this.computeBandDomain(e)}updateScaleRange(){let e=super.updateScaleRange();return this.updateGroupScaleRange(),e}axisHelper(){let e=super.axisHelper();return Object.assign(Object.assign({},e),{getBandwidth:t=>e.getScale(t).bandwidth()})}initScales(){super.initScales(),this.calcScales(this._defaultBandInnerPadding,this._defaultBandOuterPadding)}registerTicksTransform(){let e=`${this.type}-ticks`;return hK(this._option.dataSet,e,Ai),e}transformScaleDomain(){}}Ag.type=sc.polarBandAxis,Ag.specKey="axes",Ag.builtInTheme={axis:Cq,axisBand:CY,axisAngle:Ap,axisRadius:Ac},(0,gH.jB)(Ag,_t);let Af=()=>{hp.registerGraphicComponent(eI.lineAxis,(e,t)=>new CX(e,t)),hp.registerGraphicComponent(eL.lineAxisGrid,(e,t)=>new _5(e,t)),hp.registerGraphicComponent(eI.circleAxis,(e,t)=>new Ah(e,t)),hp.registerGraphicComponent(eL.circleAxisGrid,(e,t)=>new Au(e,t)),v6(),hp.registerComponent(Ag.type,Ag)};class Am extends Ae{constructor(){super(...arguments),this.type=sc.polarLinearAxis,this._zero=!0,this._nice=!0,this._extend={},this._scale=new ck.f}setAttrFromSpec(){super.setAttrFromSpec(),this.setExtraAttrFromSpec()}initScales(){super.initScales(),this.setScaleNice()}computeDomain(e){return this.computeLinearDomain(e)}axisHelper(){let e=super.axisHelper();return e.setExtendDomain=this.setExtendDomain.bind(this),e}registerTicksTransform(){let e=`${this.type}-ticks`;return hK(this._option.dataSet,e,xr),e}}Am.type=sc.polarLinearAxis,Am.specKey="axes",Am.builtInTheme={axis:Cq,axisLinear:xl,axisAngle:Ap,axisRadius:Ac},(0,gH.jB)(Am,xe);let Ab=()=>{hp.registerGraphicComponent(eI.lineAxis,(e,t)=>new CX(e,t)),hp.registerGraphicComponent(eL.lineAxisGrid,(e,t)=>new _5(e,t)),hp.registerGraphicComponent(eI.circleAxis,(e,t)=>new Ah(e,t)),hp.registerGraphicComponent(eL.circleAxisGrid,(e,t)=>new Au(e,t)),v6(),hp.registerComponent(Am.type,Am)};class Ay extends S6{constructor(){super(...arguments),this.type=z.rose,this.transformerConstructor=S7,this._roseMark=null,this._labelMark=null}initMark(){this.initRoseMark()}initMarkStyle(){this.initRoseMarkStyle()}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.getCenter=()=>({x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y}),this._markAttributeContext.startAngleScale=e=>this.startAngleScale(e),this._markAttributeContext.endAngleScale=e=>this.endAngleScale(e)}initRoseMark(){this._roseMark=this._createMark(Ay.mark.rose,{groupKey:this._seriesField,isSeriesMark:!0},{morph:by(this._spec,Ay.mark.rose.name),morphElementKey:this.getDimensionField()[0]})}getRoseAngle(){var e,t,i;return null!=(i=null==(t=(e=this.angleAxisHelper).getBandwidth)?void 0:t.call(e,this._groups?this._groups.fields.length-1:0))?i:.5}startAngleScale(e){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()))-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}endAngleScale(e){return this.angleAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()))+this.getRoseAngle()-.5*this.angleAxisHelper.getBandwidth(this.getGroupFields().length-1)}initRoseMarkStyle(){let e=this._roseMark;e&&this.setMarkStyle(e,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:e=>this.startAngleScale(e),endAngle:e=>this.endAngleScale(e),fill:this.getColorAttribute(),outerRadius:e=>cL(this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]]),this.radiusAxisHelper.getScale(0)),innerRadius:e=>{var t;if(!this.getStack())return 0;let i=cL(this.radiusAxisHelper.dataToPosition([e[this._innerRadiusField[0]]]),this.radiusAxisHelper.getScale(0));return i<=Number.MIN_VALUE?this._computeLayoutRadius()*(null!=(t=this._spec.innerRadius)?t:0):i}})}initTooltip(){super.initTooltip(),this._roseMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._roseMark)}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{text:e=>e[this.getDimensionField()[0]],fill:this.getColorAttribute(),z:0})}initAnimation(){var e,t,i;let r=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;this._roseMark&&this._roseMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("rose"))?void 0:i({innerRadius:()=>{var e;return this._computeLayoutRadius()*(null!=(e=this._spec.innerRadius)?e:0)}},r),bf("rose",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[this._roseMark]}}Ay.type=z.rose,Ay.mark=S8,Ay.builtInTheme={rose:{rose:{style:{fillOpacity:1}},label:{style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"},textAlign:"center",textBaseline:"middle"}}}},Ay.transformerConstructor=S7;let Av=()=>{hp.registerSeries(Ay.type,Ay),S$(),S5(),Af(),Ab()};class A_ extends SY{needAxes(){return!0}_getDefaultSeriesSpec(e){let t=super._getDefaultSeriesSpec(e);return t.categoryField=e.categoryField||e.angleField,t.valueField=e.valueField||e.radiusField,t}transformSpec(e){var t;if(super.transformSpec(e),this.needAxes()){e.axes||(e.axes=[]);let i={radius:!1,angle:!1};(null!=(t=e.axes)?t:[]).forEach(e=>{let{orient:t}=e;"radius"===t&&(i.radius=!0),"angle"===t&&(i.angle=!0)}),i.angle||e.axes.push({orient:"angle"}),i.radius||e.axes.push({orient:"radius"})}}}class AC extends A_{_getDefaultSeriesSpec(e){var t,i,r;let n=super._getDefaultSeriesSpec(e);return n.radius=null!=(t=e.radius)?t:.6,n.outerRadius=null!=(i=e.outerRadius)?i:.6,n.innerRadius=null!=(r=e.innerRadius)?r:0,n.stack=e.stack,n.percent=e.percent,n}transformSpec(e){var t;super.transformSpec(e),(null!=(t=e.axes)?t:[]).forEach(e=>{["domainLine","grid","label","tick"].forEach(t=>{e[t]||(e[t]={visible:!1})}),"angle"===e.orient&&(0,r5.Z)(e.bandPosition)&&(e.bandPosition=.5)}),e.crosshair=(0,ag.IX)(e.crosshair||{}).map(e=>hs({categoryField:{visible:!0,line:{visible:!0,type:"rect"}}},e))}}let Ax=(e,t)=>{let i=2*Math.PI,r=(0,ag.iH)(t),n=(0,ag.CE)(t);return e<r?e+=Math.ceil((r-e)/i)*i:e>n&&(e-=Math.ceil((e-n)/i)*i),e},Aw=(e,t)=>{if(!e)return null;let i=xV(e,e=>"angle"===e.getOrient(),t),r=xV(e,e=>"radius"===e.getOrient(),t);if(!(i&&i.length||r&&r.length))return null;let n=[],l=e=>e.getDimensionField()[0],{x:o,y:a}=t;return i&&i.forEach(e=>{var t;let i=e.getScale();if(i&&(0,cz.lK)(i.type)){let s=i.domain(),h=i.range(),d=e.getCenter(),u={x:o-e.getLayoutStartPoint().x-d.x,y:a-e.getLayoutStartPoint().y-d.y},c=mD({x:1,y:0},u);c=Ax(c,h);let p=mz(u),g=null==(t=r[0])?void 0:t.getScale(),f=null==g?void 0:g.range();if((c-(null==h?void 0:h[0]))*(c-(null==h?void 0:h[1]))>0||(p-(null==f?void 0:f[0]))*(p-(null==f?void 0:f[1]))>0)return;let m=e.invert(c);if((0,r5.Z)(m))return;let b=s.findIndex(e=>(null==e?void 0:e.toString())===m.toString());b<0&&(b=void 0);let y=xj(m,e,"polar",l);n.push({index:b,value:m,position:i.scale(m),axis:e,data:y})}}),r&&r.forEach(e=>{var t;let r=e.getScale(),s=null==r?void 0:r.range();if(r&&(0,cz.lK)(r.type)){let h=e.getCenter(),d={x:o-e.getLayoutStartPoint().x-h.x,y:a-e.getLayoutStartPoint().y-h.y},u=mD({x:1,y:0},d);u<-Math.PI/2&&(u=2*Math.PI+u);let c=mz(d),p=null==(t=i[0])?void 0:t.getScale(),g=null==p?void 0:p.range();if((u-(null==g?void 0:g[0]))*(u-(null==g?void 0:g[1]))>0||(c-(null==s?void 0:s[0]))*(c-(null==s?void 0:s[1]))>0)return;let f=r.invert(c);if((0,r5.Z)(f))return;let m=r.domain().findIndex(e=>(null==e?void 0:e.toString())===f.toString());m<0&&(m=void 0);let b=xj(f,e,"polar",l);n.push({index:m,value:f,position:r.scale(f),axis:e,data:b})}}),n.length?n:null};class AS extends xB{constructor(){super(...arguments),this.transformerConstructor=AC,this.type="rose",this.seriesType=z.rose}_setModelOption(){this._modelOption.getDimensionInfo=Aw}}AS.type="rose",AS.seriesType=z.rose,AS.transformerConstructor=AC,(0,gH.jB)(AS,xF);class AA extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n),this._center=t.center}getEndProps(){return!1===this.valid?{}:(0,t9.op)(this._center,this._toRadius,this._toAngle)}onBind(){this.from=this.target.attribute,this.to=this.target.getFinalAttribute(),this._prevCenter=this.target.attribute.center,this._center&&this._prevCenter||(this.valid=!1);let{angle:e,radius:t}=(0,t9.Jl)(this.from,this._prevCenter),{angle:i,radius:r}=(0,t9.Jl)(this.to,this._center);(0,sD.Z)(i*r)||(this.valid=!1),this._fromAngle=(0,sD.Z)(e)?e:i,this._fromRadius=(0,sD.Z)(t)?t:r,this._toAngle=i,this._toRadius=r,mB(this._fromAngle,this._toAngle)&&mB(this._fromRadius,this._toRadius)&&(this.valid=!1),this.props=this.getEndProps()}onUpdate(e,t,i){if(!1===this.valid)return i.x=this.to.x,void(i.y=this.to.y);let{x:r,y:n}=(0,t9.op)({x:this._prevCenter.x+(this._center.x-this._prevCenter.x)*t,y:this._prevCenter.y+(this._center.y-this._prevCenter.y)*t},this._fromRadius+(this._toRadius-this._fromRadius)*t,this._fromAngle+(this._toAngle-this._fromAngle)*t);this.target.setAttributes({x:r,y:n}),this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}}class Ak extends fe{onBind(){super.onBind();let{center:e}=this.target.attribute,{center:t}=this.target.getFinalAttribute();this._center=t,this._prevCenter=e}onUpdate(e,t,i){this.points=this.points.map((r,n)=>{let l=this.polarPointInterpolation(this.interpolatePoints[n][0],this.interpolatePoints[n][1],t);return e&&(i.center=this._center),l.context=r.context,l}),this.target.attribute.points=this.points,this.target.addUpdatePositionTag(),this.target.addUpdateShapeAndBoundsTag()}_interpolationSinglePoint(e,t,i){if(!mW(e)&&!mW(t))return t;let r=(0,t9.Jl)(e,this._prevCenter),n=(0,t9.Jl)(t,this._center),l=(0,t9.LW)(r.angle),o=(0,t9.LW)(n.angle);!(0,sD.Z)(l)&&(0,sD.Z)(o)&&(l=o),(0,sD.Z)(l)&&!(0,sD.Z)(o)&&(o=l);let a=l+(o-l)*i,s=r.radius+(n.radius-r.radius)*i;return(0,t9.op)({x:this._prevCenter.x+(this._center.x-this._prevCenter.x)*i,y:this._prevCenter.y+(this._center.y-this._prevCenter.y)*i},s,a)}polarPointInterpolation(e,t,i){let{x:r,y:n}=this._interpolationSinglePoint(e,t,i),{x:l,y:o}=this._interpolationSinglePoint({x:e.x1,y:e.y1},{x:t.x1,y:t.y1},i),a=new il.E9(r,n,l,o);return a.defined=t.defined,a}}let AM=e=>({type:"in"===e?"fadeIn":"fadeOut"}),AT=(e,t)=>({type:"in"===t?"growPointsIn":"growPointsOut",options:()=>({center:e.center()})});function AR(e,t,i){return"fadeIn"===t?AM(i):AT(e,i)}let AE=(e,t)=>{let i=()=>{var t;return null==(t=e.center())?void 0:t.x},r=(e,t)=>t.getGraphicAttribute("x"),n=()=>{var t;return null==(t=e.center())?void 0:t.y},l=(e,t)=>t.getGraphicAttribute("y");return"in"===t?{channel:{x:{from:i,to:r},y:{from:n,to:l}}}:{channel:{x:{from:r,to:i},y:{from:l,to:n}}}},AP=(e,t)=>({custom:g8,customParameters:(i,r)=>{var n;return{group:r,startAngle:null!=(n=e.startAngle)?n:Math.PI/2,orient:"clockwise",center:e.center(),radius:e.radius(),animationType:t}}}),AB=()=>{hp.registerAnimation("radar",(e,t)=>({appear:"clipIn"===t?void 0:AR(e,t,"in"),enter:AR(e,t,"in"),exit:AR(e,t,"out"),disappear:"clipIn"===t?void 0:{duration:mt.disappear.duration},update:[{channel:["points","center"],custom:Ak,customParameters:e,duration:mt.update.duration,easing:mt.update.easing},{type:"update",options:{excludeChannels:["points","defined","center"]}}]})),hp.registerAnimation("radarSymbol",(e,t)=>({appear:"clipIn"===t?void 0:"fadeIn"===t?AM("in"):AE(e,"in"),enter:{type:"scaleIn"},exit:{type:"scaleOut"},disappear:"clipIn"===t?void 0:{duration:mt.disappear.duration},update:[{options:{excludeChannels:["x","y","center"]}},{channel:["x","y","center"],custom:AA,customParameters:e,duration:mt.update.duration,easing:mt.update.easing}]})),hp.registerAnimation("radarGroup",(e,t)=>({appear:AP(e,"in"),disappear:{duration:mt.disappear.duration}})),CT()},AI=Object.assign(Object.assign(Object.assign({},bo),bT),{area:{name:"area",type:"area"}});class AL extends S6{constructor(){super(...arguments),this.type=z.radar,this.transformerConstructor=y5,this._sortDataByAxis=!1}initGroups(){}compile(){super.compile(),this.addOverlapCompile()}initMark(){var e,t,i,r;let n=!1!==(null==(e=this._spec.area)?void 0:e.visible)&&!1!==(null==(i=null==(t=this._spec.area)?void 0:t.style)?void 0:i.visible),l=null!=(r=this._spec.seriesMark)?r:"area";this.initAreaMark(n&&"area"===l),this.initLineMark("line"===l||"area"===l&&!n),this.initSymbolMark("point"===l)}initMarkStyle(){this.initAreaMarkStyle(),this.initLineMarkStyle(),this.initSymbolMarkStyle(),[this._lineMark,this._symbolMark,this._areaMark].forEach(e=>{e&&this.setMarkStyle(e,{center:()=>{var e;return null==(e=this.angleAxisHelper)?void 0:e.center()}})})}initAreaMark(e){this._areaMark=this._createMark(AL.mark.area,{groupKey:this._seriesField,isSeriesMark:e})}initAreaMarkStyle(){let e=this._areaMark;e&&(this.setMarkStyle(e,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),x1:e=>e&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this.getStack()?this.getDatumPositionValues(e,this._innerRadiusField):this.radiusScale.domain()[0]).x:Number.NaN,y1:e=>e&&this.angleAxisHelper&&this.radiusAxisHelper?this.valueToPosition(this.getDatumPositionValues(e,this._angleField),this.getStack()?this.getDatumPositionValues(e,this._innerRadiusField):this.radiusScale.domain()[0]).y:Number.NaN,fill:this.getColorAttribute(),curveType:bM,closePath:!0},"normal",q.Series),"zero"!==this._invalidType&&this.setMarkStyle(e,{defined:this._getInvalidDefined.bind(this),connectedType:this._getInvalidConnectType()},"normal",q.Series),this.event.on(N.viewDataStatisticsUpdate,{filter:e=>e.model===this},()=>{this.encodeDefined(e,"defined")}))}initTooltip(){super.initTooltip();let{group:e,mark:t}=this._tooltipHelper.activeTriggerSet;this._lineMark&&e.add(this._lineMark),this._areaMark&&e.add(this._areaMark),this._symbolMark&&(t.add(this._symbolMark),e.add(this._symbolMark))}initAnimation(){var e,t,i,r;let n={center:()=>{var e;return null==(e=this.angleAxisHelper)?void 0:e.center()},radius:()=>{let e=this.getLayoutRect();return Math.min(e.width,e.height)},startAngle:(0,oV.Z)(this._spec.startAngle)?(0,t9.M4)(this._spec.startAngle):vN},l=null!=(i=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset)?i:"clipIn";"clipIn"===l&&this._rootMark&&this._rootMark.setAnimationConfig(bg(null==(r=hp.getAnimationInKey("radarGroup"))?void 0:r(n,l),bf("group",this._spec,this._markAttributeContext))),[[this._areaMark,"radar"],[this._lineMark,"radar"],[this._symbolMark,"radarSymbol"]].forEach(([e,t])=>{if((0,oV.Z)(e)){let i=hp.getAnimationInKey(t);e.setAnimationConfig(bg(null==i?void 0:i(n,l),bf(e.name,this._spec,this._markAttributeContext)))}})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._areaMark,this._symbolMark,this._lineMark]}getSeriesStyle(e){return t=>{var i,r,n,l;let o=null!=(r=null==(i=this._seriesMark)?void 0:i.getAttribute(t,e))?r:void 0;return"fill"!==t||o||(t="stroke",o=null!=(l=null==(n=this._seriesMark)?void 0:n.getAttribute(t,e))?l:void 0),"stroke"===t&&(0,ri.Z)(o)?o[0]:o}}}AL.type=z.radar,AL.mark=AI,AL.builtInTheme={radar:{label:{visible:!1,offset:5,style:{lineWidth:2,stroke:{type:"palette",key:"backgroundColor"}}},point:{style:{symbolType:"circle"}}}},AL.transformerConstructor=y5,(0,gH.jB)(AL,bR);let AF=()=>{hp.registerSeries(AL.type,AL),wM(),y2(),y4(),AB(),Af(),Ab()};class AH extends A_{_getDefaultSeriesSpec(e){var t;let i=super._getDefaultSeriesSpec(e);return i.line=e.line,i.point=e.point,i.stack=e.stack,i.percent=e.percent,i.area=hs({visible:!1},e.area),i.seriesMark=null!=(t=e.seriesMark)?t:"area",i.activePoint=e.activePoint,i.pointDis=e.pointDis,i.pointDisMul=e.pointDisMul,i.markOverlap=e.markOverlap,i}transformSpec(e){var t;super.transformSpec(e),(null!=(t=e.axes)?t:[]).forEach(e=>{"radius"===e.orient&&(["domainLine","label","tick"].forEach(t=>{e[t]||(e[t]={visible:!1})}),e.grid||(e.grid={visible:!0}))}),e.crosshair=(0,ag.IX)(e.crosshair||{}).map(e=>hs({categoryField:{visible:!0,line:{visible:!0,type:"line"}}},e))}}class AO extends xB{constructor(){super(...arguments),this.transformerConstructor=AH,this.type="radar",this.seriesType=z.radar}_setModelOption(){this._modelOption.getDimensionInfo=Aw}}AO.type="radar",AO.seriesType=z.radar,AO.transformerConstructor=AH,(0,gH.jB)(AO,xF);class AD extends xA{_getDefaultSeriesSpec(e){let t=super._getDefaultSeriesSpec(e);return delete t.data,t}_transformAxisSpec(e){e.axes&&e.autoBandSize&&e.series.forEach((t,i)=>{var r;if("bar"===t.type){let n=this._findBandAxisBySeries(t,i,e.axes);if(n&&!n.bandSize&&!n.maxBandSize&&!n.minBandSize){let e=(0,r9.Z)(t.autoBandSize)&&null!=(r=t.autoBandSize.extend)?r:0,{barMaxWidth:i,barMinWidth:l,barWidth:o,barGapInGroup:a}=t;this._applyAxisBandSize(n,e,{barMaxWidth:i,barMinWidth:l,barWidth:o,barGapInGroup:a})}}})}transformSpec(e){if(super.transformSpec(e),e.series&&e.series.length){let t=this._getDefaultSeriesSpec(e);e.series.forEach(e=>{this._isValidSeries(e.type)&&Object.keys(t).forEach(i=>{i in e||(e[i]=t[i])})})}e.axes&&e.axes.length&&e.axes.forEach(t=>{(0,hH.Z)(t,"trimPadding")&&hs(t,cl(this.type,e))}),this._transformAxisSpec(e)}}class Az extends xB{constructor(){super(...arguments),this.transformerConstructor=AD,this.type="common"}_setModelOption(){this._modelOption.getDimensionInfo=(e,t,i)=>{var r,n;return[...null!=(r=x1(e,t,i))?r:[],...null!=(n=Aw(e,t))?n:[]]},this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}Az.type="common",Az.transformerConstructor=AD,(0,gH.jB)(Az,xF);class AW extends m4{constructor(){super(...arguments),this.shapeTypeCallback=()=>"square"}enableByType(e){return"mark"===e}getDefaultTitlePattern(e){return{key:"link info",value:"link info"}}getDefaultContentList(){return[{key:"time",value:e=>mV.k.getInstance().timeFormat("%Y%m%d %H:%M",e.from.split("_")[1])},{key:"type",value:e=>e.action_type},{key:"from",value:e=>e.from},{key:"to",value:e=>e.to}]}}var AZ=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class AN extends pz{constructor(){super(...arguments),this.type=AN.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x1:0,y1:0})}_transformGraphicAttributes(e,t,i){let r=super._transformGraphicAttributes(e,t,i),{x:n,x1:l,y:o,y1:a}=r;return Object.assign(Object.assign({},AZ(r,["x","x1","y","y1"])),{points:[{x:n,y:o},{x:l,y:a}]})}_createGraphic(e={}){return bz(e)}}AN.type="rule";let A$=()=>{hp.registerMark(AN.type,AN),pN(),bX(),hp.registerGraphicComponent("line",bz)},Aj=Object.assign(Object.assign({},bo),{group:{name:"group",type:"group"},link:{name:"link",type:"rule"},arrow:{name:"arrow",type:"symbol"}}),AG=(e,t)=>{let{infoKey:i,fields:r,linkData:n,dotData:l}=t,{fromField:o,toField:a,xField:s,yField:h}=r(),d=n(),u=l(),c={};return u.forEach(e=>{let t={};for(let r in e)r!==i&&(t[r]=e[r]);let r=e[i];null==r||r.forEach(e=>{c[e.node_name]=Object.assign({},t,e)})}),d.forEach(e=>{var t,i,r,n;e[o+"_xField"]=null==(t=null==c?void 0:c[e[o]])?void 0:t[s],e[o+"_yField"]=null==(i=null==c?void 0:c[e[o]])?void 0:i[h],e[a+"_xField"]=null==(r=null==c?void 0:c[e[a]])?void 0:r[s],e[a+"_yField"]=null==(n=null==c?void 0:c[e[a]])?void 0:n[h]}),d};class AV extends bA{constructor(){super(...arguments),this.type=z.link}getFromField(){return this._fromField}setFromField(e){(0,oV.Z)(e)&&(this._fromField=e)}getToField(){return this._toField}setToField(e){(0,oV.Z)(e)&&(this._toField=e)}getDotTypeField(){return this._dotTypeField}setDotTypeField(e){(0,oV.Z)(e)&&(this._dotTypeField=e)}getDotSeriesSpec(){return this._dotSeriesSpec}setDotSeriesSpec(e){(0,oV.Z)(e)&&(this._dotSeriesSpec=e)}_getDotData(){let e=this._option.getChart().getSeriesInIndex([this._spec.dotSeriesIndex])[0];return e?e.getRawData().latestData:[]}initData(){var e;super.initData(),hK(this._option.dataSet,"linkDotInfo",AG),null==(e=this.getViewData())||e.transform({type:"linkDotInfo",options:{infoKey:"dots",fields:()=>({fromField:this._fromField,toField:this._toField,xField:this._dotSeriesSpec.xField,yField:this._dotSeriesSpec.yField}),linkData:()=>this._rawData.latestData,dotData:()=>this._getDotData()},level:G.linkDotInfo},!1)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFromField(this._spec.fromField),this.setToField(this._spec.toField),this.setDotTypeField(this._spec.dotTypeField),this.setDotSeriesSpec(this._spec.dotSeriesSpec)}initMark(){this._clipMark=this._createMark(AV.mark.group),this._containerMark=this._createMark(AV.mark.group,{parent:this._clipMark}),this._linkMark=this._createMark(AV.mark.link,{skipBeforeLayouted:!1,parent:this._containerMark}),this._arrowMark=this._createMark(AV.mark.arrow,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark})}initMarkStyle(){var e,t,i,r;let n=this._clipMark;n&&(this.setMarkStyle(n,{x:-this._spec.leftAppendPadding,y:0,width:1e4,height:this._spec.clipHeight},"normal",q.Series),n.setMarkConfig({interactive:!1,clip:!0}));let l=this._containerMark;l&&(this.setMarkStyle(l,{x:this._spec.leftAppendPadding,width:this.getLayoutRect().width},"normal",q.Series),l.setMarkConfig({interactive:!1}));let o=this._linkMark;o&&this.setMarkStyle(o,{stroke:this.getColorAttribute(),strokeOpacity:this.dataToOpacity.bind(this),x:this.dataToPositionXFrom.bind(this),y:this.dataToPositionYFrom.bind(this),x1:this.dataToPositionXTo.bind(this),y1:this.dataToPositionYTo.bind(this)},"normal",q.Series);let a=this._arrowMark;if(a){let n=null!=(r=null==(i=null==(t=null==(e=this._theme)?void 0:e.arrow)?void 0:t.style)?void 0:i.size)?r:10;this.setMarkStyle(a,{x:this.dataToPositionXTo.bind(this),y:e=>this.dataToPositionArrowYTo(e,n),fill:this.getColorAttribute(),fillOpacity:this.dataToOpacity.bind(this),size:n,symbolType:e=>this.isPositionYFromHigher(e)?"triangleDown":"triangleUp"},"normal",q.Series)}}afterInitMark(){super.afterInitMark()}dataToPositionXFrom(e){if(!this._xAxisHelper)return Number.NaN;let{dataToPosition:t}=this._xAxisHelper;return t(this.getDatumPositionValues(e,this._fromField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYFrom(e){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:t}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._fromField+"_yField"))}dataToPositionXTo(e){if(!this._xAxisHelper)return Number.NaN;let{dataToPosition:t}=this._xAxisHelper;return t(this.getDatumPositionValues(e,this._toField+"_xField"),{bandPosition:this._bandPosition})}dataToPositionYTo(e){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:t}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._toField+"_yField"),{bandPosition:this._bandPosition})}dataToPositionArrowYTo(e,t){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:i}=this._yAxisHelper,r=this.isPositionYFromHigher(e)?-t/2:t/2;return i(this.getDatumPositionValues(e,this._toField+"_yField"),{bandPosition:this._bandPosition})+r}dataToOpacity(e){return this.isPositionXOuterRange(e,this._fromField+"_xField")||this.isPositionXOuterRange(e,this._toField+"_xField")||e[this._fromField]===e[this._toField]?0:1}isPositionYFromHigher(e){return this.dataToPositionYFrom(e)<this.dataToPositionYTo(e)}isPositionXOuterRange(e,t){if(!this._xAxisHelper)return!1;let{dataToPosition:i,getScale:r}=this._xAxisHelper;return i(this.getDatumPositionValues(e,t),{bandPosition:this._bandPosition})<r(0).range()[0]||i(this.getDatumPositionValues(e,t),{bandPosition:this._bandPosition})>r(0).range()[1]}getDefaultColorDomain(){var e,t;return this._dotTypeField?null==(e=this.getViewDataStatistics())?void 0:e.latestData[this._dotTypeField].values:this._seriesField?null==(t=this.getViewDataStatistics())?void 0:t.latestData[this._seriesField].values:[]}getColorAttribute(){var e,t,i;return{scale:null!=(e=this._option.globalScale.getScale("color"))?e:this._getDefaultColorScale(),field:null!=(i=null!=(t=this._dotTypeField)?t:this._seriesField)?i:db}}getInteractionTriggers(){let e=[];return this._linkMark&&e.push(this._linkMark),this._arrowMark&&e.push(this._arrowMark),this._parseInteractionConfig(e)}initTooltip(){this._tooltipHelper=new AW(this),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark),this._arrowMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._arrowMark)}onMarkTreePositionUpdate(e){e.forEach(e=>{e.commit(!1,!0)})}getDotInfoData(){var e,t;return null==(t=null!=(e=this._linkMark)?e:this._arrowMark)?void 0:t.getData()}getActiveMarks(){return[this._linkMark,this._arrowMark]}}AV.type=z.link,AV.mark=Aj,AV.builtInTheme={link:{arrow:{style:{size:10}}}};let AU=()=>{A$(),y4(),C1(),xa(),hp.registerSeries(AV.type,AV)};class AK extends m4{constructor(){super(...arguments),this.shapeTypeCallback=()=>"square"}enableByType(e){return"mark"===e}getDefaultTitlePattern(e){return{key:"event info",value:"event info"}}getDefaultContentList(){return[{key:e=>e.type,value:e=>e.id},{key:"event_time",value:e=>mV.k.getInstance().timeFormat("%Y%m%d",e.event_time)},{key:"action_type",value:e=>e.action_type},{key:"children",value:e=>e.children}]}getTooltipData(e,t,i,r,n){var l,o,a,s;let h=super.getTooltipData(e,t,i,r,n),d=null!=(a=null==(o=null==(l=this.spec)?void 0:l[e])?void 0:o.updateContent)?a:null==(s=null==t?void 0:t[e])?void 0:s.updateContent;return h&&!d&&(h.updateContent=(e,t,i)=>{let r=[],n=e.filter(e=>"children"===e.key);return n.length>0&&n[0].value.forEach(e=>{let t=!0;for(let i in e)r.push(Object.assign(Object.assign({},n[0]),{shapeType:"circle",hasShape:t,key:i,value:e[i]+""})),t=!1}),e.concat(r)}),h}}let AX=(e,t)=>{var i;let r=(null==(i=e[0])?void 0:i.latestData)?e[0].latestData:e||[],n=[],l=0;return r.forEach(e=>{let i,r={};for(let n in e)n===t||n.startsWith(dg)||(r[n]=e[n],i=(0,oV.Z)(i)?`${i}_${e[n]}`:`${e[n]}`);let o=e[t];null==o||o.forEach((e,t)=>{n.push(Object.assign({},r,e,{[df]:l,[dm]:`${i}_${t}`})),l++})}),n},AY={fill:"#bbb",fillOpacity:.2};class Aq extends pz{getTextType(){return this._textType}constructor(e,t){super(e,t),this.type=Aq.type,this._textType="text"}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{angle:0,textAlign:"center",lineWidth:0,textConfig:[]})}initStyleWithSpec(e){super.initStyleWithSpec(e),e.textType&&(this._textType=e.textType)}_transformGraphicAttributes(e,t,i){let r=super._transformGraphicAttributes(e,t,i),{text:n}=r;return(0,r9.Z)(n)&&(0,oV.Z)(n.text)&&("rich"===this._textType||"rich"===n.type)&&(r.textConfig=n.text),r}_createGraphic(e={}){let{text:t}=e;return"rich"===this._textType||"rich"===(null==t?void 0:t.type)?yA(e):dq(e)}}Aq.type="text";let AJ=()=>{hp.registerMark(Aq.type,Aq),pN(),uT(),yF(),hp.registerGraphicComponent("text",dq),hp.registerGraphicComponent("richtext",yA)},AQ=Object.assign(Object.assign({},bo),{group:{name:"group",type:"group"},grid:{name:"grid",type:"rule"},gridBackground:{name:"gridBackground",type:"rect"},dot:{name:"dot",type:"symbol"},title:{name:"title",type:"text"},subTitle:{name:"subTitle",type:"text"},symbol:{name:"symbol",type:"symbol"}});class A0 extends bA{constructor(){super(...arguments),this.type=z.dot}getSeriesGroupField(){return this._seriesField}setSeriesGroupField(e){(0,oV.Z)(e)&&(this._seriesGroupField=e)}getTitleField(){return this._titleField}setTitleField(e){(0,oV.Z)(e)&&(this._titleField=e)}getSubTitleField(){return this._subTitleField}setSubTitleField(e){(0,oV.Z)(e)&&(this._subTitleField=e)}getDotTypeField(){return this._dotTypeField}setDotTypeField(e){(0,oV.Z)(e)&&(this._dotTypeField=e)}getHighLightSeriesGroup(){return this._highLightSeriesGroup}setHighLightSeriesGroup(e){(0,oV.Z)(e)&&(this._highLightSeriesGroup=e)}setGridBackground(e){(0,oV.Z)(e)&&(this._gridBackground=e)}initData(){var e;super.initData(),this._xDimensionStatisticsDomain=this.getRawData().latestData.map(e=>e[this._fieldY[0]]),hK(this._option.dataSet,"objFlat",AX),hK(this._option.dataSet,"copyDataView",h1),hX(this._option.dataSet,"dataview",tg.i),null==(e=this.getViewData())||e.transform({type:"objFlat",options:"dots",level:G.dotObjFlat},!1)}getStatisticFields(){return[{key:this._fieldY[0],operations:["values"],customize:this._xDimensionStatisticsDomain}]}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setSeriesGroupField(this._spec.seriesGroupField),this.setTitleField(this._spec.titleField),this.setSubTitleField(this._spec.subTitleField),this.setDotTypeField(this._spec.dotTypeField),this.setHighLightSeriesGroup(this._spec.highLightSeriesGroup),this.setGridBackground(hs(AY,(null==(e=this._spec.grid)?void 0:e.background)||{}))}initMark(){this._clipMark=this._createMark(A0.mark.group),this._containerMark=this._createMark(A0.mark.group,{parent:this._clipMark,dataView:this.getRawData()}),this._gridBackgroundMark=this._createMark(A0.mark.gridBackground,{parent:this._containerMark,dataView:this.getRawData()}),this._gridMark=this._createMark(A0.mark.grid,{parent:this._containerMark,dataView:this.getRawData()}),this._dotMark=this._createMark(A0.mark.dot,{skipBeforeLayouted:!1,isSeriesMark:!0,parent:this._containerMark}),this._titleMark=this._createMark(A0.mark.title,{parent:this._containerMark,dataView:this.getRawData()}),this._subTitleMark=this._createMark(A0.mark.subTitle,{parent:this._containerMark,dataView:this.getRawData()}),this._symbolMark=this._createMark(A0.mark.symbol,{parent:this._containerMark,dataView:this.getRawData()})}initMarkStyle(){var e;let t=this._clipMark;t&&(this.setMarkStyle(t,{x:-(null!=(e=this._spec.leftAppendPadding)?e:0),y:0,width:1e4,height:()=>{var e;return null!=(e=this._spec.clipHeight)?e:this._region.getLayoutRect().height}},"normal",q.Series),t.setMarkConfig({interactive:!1,clip:!0}));let i=this._containerMark;i&&(this.setMarkStyle(i,{x:this._spec.leftAppendPadding},"normal",q.Series),i.setMarkConfig({interactive:!1}));let r=this._gridBackgroundMark;r&&this.setMarkStyle(r,{x:this.getRegionRectLeft.bind(this),x1:this.getRegionRectRight.bind(this),y:this.dataToGridBackgroundPositionY.bind(this),y1:this.dataToGridBackgroundPositionY1.bind(this),fill:this._gridBackground.fill,fillOpacity:this.dataToGridBackgroundOpacity.bind(this)},"normal",q.Series);let n=this._gridMark;n&&this.setMarkStyle(n,{stroke:this.getColorAttribute(),x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),x1:this.getRegionRectRight.bind(this),y1:this.dataToPositionY.bind(this)},"normal",q.Series);let l=this._dotMark;l&&this.setMarkStyle(l,{x:this.dataToPositionX.bind(this),y:this.dataToPositionY.bind(this),fill:this.getDotColorAttribute(),stroke:this.getDotColorAttribute(),fillOpacity:this.dataToOpacity.bind(this)},"normal",q.Series);let o=this._titleMark;o&&this.setMarkStyle(o,{fill:this.getColorAttribute(),text:e=>e[this.getTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",q.Series);let a=this._subTitleMark;a&&this.setMarkStyle(a,{fill:this.getColorAttribute(),text:e=>e[this.getSubTitleField()],x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this)},"normal",q.Series);let s=this._symbolMark;s&&this.setMarkStyle(s,{x:this.getRegionRectLeft.bind(this),y:this.dataToPositionY.bind(this),fill:this.getColorAttribute()},"normal",q.Series)}dataToGridBackgroundPositionY(e){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:t,getBandwidth:i}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._fieldY),{bandPosition:this._bandPosition})-i(0)/2}dataToGridBackgroundPositionY1(e){if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:t,getBandwidth:i}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._fieldY),{bandPosition:this._bandPosition})+i(0)/2}dataToOpacity(e){var t,i,r,n;if(!this._xAxisHelper)return Number.NaN;let{dataToPosition:l,getScale:o}=this._xAxisHelper;return l(this.getDatumPositionValues(e,this._fieldX),{bandPosition:this._bandPosition})<o(0).range()[0]||l(this.getDatumPositionValues(e,this._fieldX),{bandPosition:this._bandPosition})>o(0).range()[1]?0:null!=(n=null==(r=null==(i=null==(t=this._theme)?void 0:t.dot)?void 0:i.style)?void 0:r.fillOpacity)?n:1}dataToGridBackgroundOpacity(e){return e[this._seriesGroupField]===this._highLightSeriesGroup?this._gridBackground.fillOpacity:0}onLayoutEnd(){var e,t;super.onLayoutEnd();let i=null!=(t=null==(e=this._spec)?void 0:e.leftAppendPadding)?t:0;this.setMarkStyle(this._clipMark,{width:this.getLayoutRect().width+i},"normal",q.Series)}getDefaultColorDomain(){var e,t;return this._seriesGroupField?null==(e=this.getViewDataStatistics())?void 0:e.latestData[this._seriesGroupField].values:this._seriesField?null==(t=this.getViewDataStatistics())?void 0:t.latestData[this._seriesField].values:[]}getColorAttribute(){var e,t,i;return{scale:null!=(e=this._option.globalScale.getScale("color"))?e:this._getDefaultColorScale(),field:null!=(i=null!=(t=this._seriesGroupField)?t:this._seriesField)?i:db}}getDotColorScale(){var e,t,i;let r=this._dotTypeField?null==(e=this.getViewDataStatistics())?void 0:e.latestData[this._dotTypeField].values:this._seriesGroupField?null==(t=this.getViewDataStatistics())?void 0:t.latestData[this._seriesGroupField].values:this._seriesField?null==(i=this.getViewDataStatistics())?void 0:i.latestData[this._seriesField].values:[],n=this._getDataScheme();return(new cP).domain(r).range(n)}getDotColorAttribute(){var e,t,i,r;return{scale:null!=(e=this._option.globalScale.getScale("color"))?e:this.getDotColorScale(),field:null!=(r=null!=(i=null!=(t=this._dotTypeField)?t:this._seriesGroupField)?i:this._seriesField)?r:db}}initTooltip(){this._tooltipHelper=new AK(this),this._dotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._dotMark)}onEvaluateEnd(e){super.onEvaluateEnd(e)}onMarkTreePositionUpdate(e){e.forEach(e=>{e.commit(!1,!0)})}getDotData(){var e;return null==(e=this._dotMark)?void 0:e.getData()}_getDataIdKey(){}getStackValueField(){return null}getActiveMarks(){return[this._dotMark]}}A0.type=z.dot,A0.mark=AQ,A0.builtInTheme={dot:{dot:{style:{size:10,fillOpacity:1}},symbol:{style:{size:10}},title:{style:{textAlign:"left",textBaseline:"middle",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},subTitle:{style:{textAlign:"left",textBaseline:"top",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}}};let A1=()=>{y4(),A$(),wV(),AJ(),hp.registerSeries(A0.type,A0)};class A2 extends xA{_getSeriesDataLength(e,t){var i,r;if(t.data){let e=(0,ag.IX)(t.data)[0];return e instanceof tf.V?null==(i=e.latestData)?void 0:i.length:null==(r=e.values)?void 0:r.length}let n=(0,ag.IX)(e.data).find((e,i)=>t.dataId?e instanceof tf.V?e.name===t.dataId:e.id===t.dataId:t.dataIndex===i);return n?n instanceof tf.V?n.latestData.length:n.values.length:0}addAttrToComponentSpec(e,t,i){return Array.isArray(e)?e[0][t]=i:e[t]=i,e}addPaddingRow(e,t,i){e.push({index:t,size:i})}addOrientAxes(e,t,i,r){e.push({id:`regionAxesRow${i}`}),t.push({modelId:`axesRow${i}`,col:1,row:i}),r.axes[0].id=`axesRow${i}`,r.axes[0].regionIndex=Array.from(Array(r.series.length),(e,t)=>"top"===r.axes[0].orient?t+1:t)}transformSpec(e){var t,i,r,n,l,o,a,s,h,d,u,c,p,g,f;super.transformSpec(e);let m=0,b=[],y=[],v=[],_=[],C=[],x=this._option.getCompiler().getStage(),w=(x.viewWidth,x.viewHeight),S=0;if(null==e?void 0:e.legends){b.push({modelId:`legendRow${m}`,col:1,row:m}),this.addAttrToComponentSpec(e.legends,"id",`legendRow${m}`);let a=(0,ag.IX)(e.legends),s=null!=(t=a[0].height)?t:40;if(a[0].padding){let e=sG(a[0].padding);s+=Number(null!=(i=null==e?void 0:e.bottom)?i:0),s+=Number(null!=(r=null==e?void 0:e.top)?r:0),a[0].offsetY=Number(null!=(l=null==(n=a[0])?void 0:n.offsetY)?l:0)+Number(null!=(o=null==e?void 0:e.top)?o:0)}C.push({index:m,size:s}),S+=s,m++}(null==e?void 0:e.dataZoom)&&(b.push({modelId:`dataZoomRow${m}`,col:1,row:m}),this.addAttrToComponentSpec(e.dataZoom,"id",`dataZoomRow${m}`),S+=60,m++,this.addPaddingRow(C,m,10),S+=10,m++),S+=60,null!==e.axes&&"top"!==(null==(s=null==(a=null==e?void 0:e.axes)?void 0:a[0])?void 0:s.orient)||(this.addOrientAxes(y,b,m,e),m++);let A=e.series.filter(e=>e.type!==z.link).length,k=(w-S-20*A)/A,M=(null==(h=null==e?void 0:e.appendPadding)?void 0:h.left)||0,T=(null==(d=null==e?void 0:e.appendPadding)?void 0:d.right)||0;null==(u=null==e?void 0:e.series)||u.forEach(t=>{var i,r;if([z.bar,z.line,z.area,z.dot].includes(t.type)){if(b.push({modelId:`${t.type}Row${m}`,col:1,row:m}),b.push({modelId:`axesLeftRow${m}`,col:0,row:m}),y.push({id:`${t.type}Row${m}`,clip:!1}),C.push({index:m,size:(null==t?void 0:t.height)||k}),v.push({orient:"left",id:`axesLeftRow${m}`,type:t.type===z.dot?"band":"linear",visible:t.type!==z.dot,title:{visible:!0,autoRotate:!1,style:{text:null==t?void 0:t.barTitle,dx:-20,textBaseline:"middle",textAlign:"end"}},grid:{visible:"boolean"!=typeof(null==(i=null==t?void 0:t.grid)?void 0:i.visible)||(null==(r=null==t?void 0:t.grid)?void 0:r.visible),style:(e,i)=>{var r,n,l,o,a;let s=0;if(0===i){let e=null==(r=null==t?void 0:t.grid)?void 0:r.style;s=null!=(l=null!=(n=null==e?void 0:e.lineWidth)?n:null==e?void 0:e.strokeWidth)?l:1}return{lineWidth:s,stroke:(null==(a=null==(o=null==t?void 0:t.grid)?void 0:o.style)?void 0:a.stroke)||"#dfdfdf",lineDash:[0,0]}}},domainLine:{visible:!1},tick:{visible:!1},label:{visible:!1},regionIndex:y.length-1}),t.type===z.dot){b.push({modelId:`scrollBarRightRow${m}`,col:2,row:m});let i=this._getSeriesDataLength(e,t),r=0;i&&(r=((null==t?void 0:t.height)||k)/(30*i)),_.push(Object.assign({orient:"right",visible:t.type===z.dot&&r<1,id:`scrollBarRightRow${m}`,start:0,end:Math.min(r,1),filterMode:"axis",regionIndex:y.length-1,axisId:`axesLeftRow${m}`},(0,ag.IX)(null==e?void 0:e.scrollBar)[0]))}t.regionIndex=y.length-1,m++,this.addPaddingRow(C,m,(null==t?void 0:t.padding)||20),m++,t.leftAppendPadding=M,t.type===z.dot&&(t.title.style.dx=-M,t.subTitle.style.dx=-M)}}),this.addPaddingRow(C,m,20),m++,null==(c=null==e?void 0:e.series)||c.forEach(t=>{if(t.type===z.link){let i=t.dotSeriesIndex+1;b.push({modelId:`${t.type}Row${i}`,col:1,row:i-1}),t.regionIndex=e.series[t.dotSeriesIndex].regionIndex,t.leftAppendPadding=M,t.height=e.series[t.dotSeriesIndex].height,t.clipHeight=e.series[t.dotSeriesIndex].clipHeight}}),(null==e?void 0:e.legends)&&this.addAttrToComponentSpec(e.legends,"regionIndex",[y.length-1]),"bottom"===(null==(g=null==(p=null==e?void 0:e.axes)?void 0:p[0])?void 0:g.orient)&&(this.addOrientAxes(y,b,m,e),m++),e.layout={type:"grid",col:4,row:m,colWidth:[{index:0,size:M},{index:2,size:12},{index:3,size:T}],rowHeight:C,elements:b},e.region=y,null==(f=e.axes)||f.push(...v),e.scrollBar=_}}var A3=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class A4 extends xB{constructor(){super(...arguments),this.transformerConstructor=A2,this.type="sequence"}_createSeries(e,t){let i;if(!e)return;let{spec:r}=t,n=A3(t,["spec"]);if(r.type===z.link&&(r.dotSeriesSpec=this._spec.series[r.dotSeriesIndex]),r.regionId&&(i=this.getRegionsInUserId(r.regionId)),i||(i=this.getRegionsInIndex(r.regionIndex?[r.regionIndex]:void 0)[0]),!i)return;let l=new e(r,Object.assign(Object.assign(Object.assign({},this._modelOption),n),{region:i,specKey:"series",globalScale:this._globalScale}));l&&(l.created(),this._series.push(l),i.addSeries(l))}}A4.type="sequence",A4.transformerConstructor=A2;class A5 extends xk{transformSpec(e){super.transformSpec(e),e.axes.forEach(e=>e.type="linear")}_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["x2Field","y2Field","barMinHeight","barBackground","barGap"])}}class A6 extends xB{constructor(){super(...arguments),this.transformerConstructor=A5}}A6.transformerConstructor=A5,(0,gH.jB)(A6,xF);class A8 extends A5{transformSpec(e){super.transformSpec(e),ci(e)}}var A7=i(22345);class A9 extends A6{constructor(){super(...arguments),this.transformerConstructor=A8,this.type="histogram",this.seriesType=z.bar}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}A9.type="histogram",A9.seriesType=z.bar,A9.transformerConstructor=A8;let ke=Object.assign(Object.assign({},bo),{group:{name:"group",type:"group"}});class kt extends SA{constructor(){super(...arguments),this._arcGroupMark=null,this._getAngleValueStart=e=>{let t=this._getAngleAxis(),{tickMask:i}=this._spec;if((null==i?void 0:i.forceAlign)&&this._isTickMaskVisible(t)){let r,n=e[this.getStack()?d_:dE],l=this._getAngleAxisSubTickData(t),o=l[1].value-l[0].value,a=(0,t9.M4)(i.offsetAngle);if((0,oV.Z)(n)){let e=(0,_i.lo)(l,e=>e.value-n),t=e>=l.length||n>l[e].value-o/2?Math.min(e,l.length-1):e>0?e-1:void 0;void 0!==t&&(r=this.angleAxisHelper.dataToPosition([l[t].value-o/2]))}return(0,r5.Z)(r)&&(r=this.angleAxisHelper.dataToPosition([l[0].value-o/2])),r+a}return this._getAngleValueStartWithoutMask(e)},this._getAngleValueEnd=e=>{let t=this._getAngleAxis(),{tickMask:i}=this._spec;if((null==i?void 0:i.forceAlign)&&this._isTickMaskVisible(t)){let r=e[this.getStack()?dC:this._angleField[0]],n=this._getAngleAxisSubTickData(t),l=n[1].value-n[0].value,o=(0,t9.M4)(i.offsetAngle),a=(0,_i.lo)(n,e=>e.value-r),s=a>=n.length||r>n[a].value-l/2?Math.min(a,n.length-1):a>0?a-1:void 0;return(void 0!==s?this.angleAxisHelper.dataToPosition([n[s].value+l/2]):this.angleAxisHelper.dataToPosition([n[0].value-l/2]))+o}return this._getAngleValueEndWithoutMask(e)}}setAttrFromSpec(){var e,t,i;super.setAttrFromSpec();let r=null==(e=this._option.globalInstance.getChart())?void 0:e.getSpec(),n=null!=(t=this._spec.startAngle)?t:null==r?void 0:r.startAngle;this._startAngle=(0,oV.Z)(n)?(0,t9.M4)(n):vN;let l=null!=(i=this._spec.endAngle)?i:null==r?void 0:r.endAngle;this._endAngle=(0,oV.Z)(l)?(0,t9.M4)(l):v$,this.setAngleField(this._spec.valueField||this._spec.angleField),this.setRadiusField(this._spec.categoryField||this._spec.radiusField),this._specAngleField=this._angleField.slice(),this._specRadiusField=this._radiusField.slice()}getStackGroupFields(){return this._radiusField}getStackValueField(){var e;return null==(e=this._angleField)?void 0:e[0]}getGroupFields(){return this._angleField}_convertMarkStyle(e){let t=super._convertMarkStyle(e);if(t.fill){let i=e.fill;"conical"!==(null==i?void 0:i.gradient)||(0,oV.Z)(null==i?void 0:i.startAngle)||(0,oV.Z)(null==i?void 0:i.endAngle)||(t.fill=Object.assign(Object.assign({},i),{startAngle:this._startAngle,endAngle:this._endAngle}))}return t}_getAngleValueStartWithoutMask(e){if(this.getStack()){let t=cL(this.angleAxisHelper.dataToPosition([e[d_]]),this.angleAxisHelper.getScale(0));if((0,sD.Z)(t))return t}return this._startAngle}_getAngleValueEndWithoutMask(e){if(this.getStack()){let t=cL(this.angleAxisHelper.dataToPosition([e[dC]]),this.angleAxisHelper.getScale(0));if((0,sD.Z)(t))return t}let t=this.angleAxisHelper.dataToPosition([e[this._angleField[0]]]);return this._spec.clamp?cL(t,this.angleAxisHelper.getScale(0)):t}getDimensionField(){return this._specRadiusField}getMeasureField(){return this._specAngleField}initMark(){this._initArcGroupMark()}initMarkStyle(){this._initArcGroupMarkStyle()}_initArcGroupMark(){return this._arcGroupMark=this._createMark(kt.mark.group,{skipBeforeLayouted:!1}),this._arcGroupMark}_initArcGroupMarkStyle(){let e=this._arcGroupMark;e.created(),this.setMarkStyle(e,{x:0,y:0},"normal",q.Series),this._arcGroupMark.setMarkConfig({interactive:!1,zIndex:this.layoutZIndex,clip:!0,clipPath:()=>{let e=this._getAngleAxis(),{x:t,y:i}=this.angleAxisHelper.center(),r=this._computeLayoutRadius();if(this._isTickMaskVisible(e)){let{tickMask:n}=this._spec,{angle:l,offsetAngle:o,style:a={}}=n;return this._getAngleAxisSubTickData(e).map(({value:e})=>{let n=this.angleAxisHelper.dataToPosition([e])+(0,t9.M4)(o),s=(0,t9.M4)(l)/2;return Cm(Object.assign(Object.assign({},a),{x:t,y:i,startAngle:n-s,endAngle:n+s,innerRadius:r*this._innerRadius,outerRadius:r*this._outerRadius,fill:!0}))})}let{width:n,height:l}=this.getLayoutRect();return[uU({width:n,height:l,fill:!0})]}})}_getAngleAxis(){if(!this.angleAxisHelper)return;let e=this.angleAxisHelper.getAxisId();return this._option.getChart().getAllComponents().find(t=>t.id===e)}_getAngleAxisTickData(e){var t;return null==(t=null==e?void 0:e.getTickData())?void 0:t.getLatestData()}_isTickMaskVisible(e){let t=this._getAngleAxisTickData(e),{tickMask:i}=this._spec;return i&&!1!==i.visible&&(null==t?void 0:t.length)>1}_getAngleAxisSubTickData(e){var t;let i=this._getAngleAxisTickData(e),r=[],{subTick:n={},tick:l={}}=null!=(t=null==e?void 0:e.getSpec())?t:{},{tickCount:o=4}=n,{alignWithLabel:a}=l;if((null==i?void 0:i.length)>=2){let e=i[1].value-i[0].value;for(let t=0;t<i.length-1;t++){let n=i[t],l=i[t+1];r.push(n);for(let t=0;t<o;t++){let i=(t+1)/(o+1),s=(1-i)*n.value+i*(l?l.value:a?1:n.value+e);r.push({value:s})}}return r.push(i[i.length-1]),r}return i}}kt.mark=ke;let ki=Object.assign(Object.assign({},ke),{track:{name:"track",type:"arc"},progress:{name:"progress",type:"arc"}}),kr=e=>({type:"growAngleIn",options:{overall:e.startAngle}}),kn={type:"fadeIn"},kl=()=>{hp.registerAnimation("circularProgress",(e,t)=>({appear:"fadeIn"===t?kn:kr(e),enter:{type:"growAngleIn"},disappear:{duration:mt.disappear.duration}}))};class ko extends bC{constructor(){super(...arguments),this._supportStack=!0}}class ka extends kt{constructor(){super(...arguments),this.type=z.circularProgress,this.transformerConstructor=ko,this._progressMark=null,this._trackMark=null,this._getRadiusValueStart=e=>{if(this.getGroupFields().length>1){let t=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()));if((0,sD.Z)(t))return t}return this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]])},this._getRadiusValueEnd=e=>{var t,i;if(this.getGroupFields().length>1){let r=this.radiusAxisHelper.dataToPosition(this.getDatumPositionValues(e,this.getGroupFields()))+(null==(i=(t=this.radiusAxisHelper).getBandwidth)?void 0:i.call(t,this._groups?this._groups.fields.length-1:0));if((0,sD.Z)(r))return r}return this.radiusAxisHelper.dataToPosition([e[this._radiusField[0]]])+this.radiusAxisHelper.getScale(0).step()}}getStackGroupFields(){return this.getGroupFields()}getGroupFields(){return this._radiusField}initMark(){super.initMark(),this._initTrackMark(),this._initProgressMark()}initMarkStyle(){super.initMarkStyle(),this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){return this._progressMark=this._createMark(ka.mark.progress,{parent:this._arcGroupMark,isSeriesMark:!0},{morph:by(this._spec,"progress")}),this._progressMark}_initProgressMarkStyle(){var e;let t=this._progressMark;t&&this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart,endAngle:this._getAngleValueEnd,innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cap:null!=(e=this._spec.roundCap)&&e,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0},"normal",q.Series)}getInteractionTriggers(){let e=[];return this._trackMark&&e.push(this._trackMark),this._progressMark&&e.push(this._progressMark),this._parseInteractionConfig(e)}initTooltip(){super.initTooltip(),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark)}_initTrackMark(){return this._trackMark=this._createMark(ka.mark.track,{parent:this._arcGroupMark}),this._trackMark.setMarkConfig({morph:!1,morphKey:null,morphElementKey:null}),this._trackMark}_initTrackMarkStyle(){let e=this._trackMark;e&&this.setMarkStyle(e,{visible:e=>{let t=this.angleAxisHelper.getScale(0).range(),i=Math.min(t[0],t[t.length-1]);return 1e-14>=Math.abs(this._getAngleValueStartWithoutMask(e)-i)},x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:()=>{let e=this.getStack()?d_:this._angleField[0],t=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueStart({[e]:t[0]})},endAngle:()=>{let e=this.getStack()?dC:this._angleField[0],t=this.angleAxisHelper.getScale(0).domain();return this._getAngleValueEnd({[e]:t[t.length-1]})},innerRadius:this._getRadiusValueStart,outerRadius:this._getRadiusValueEnd,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:100},"normal",q.Series)}initAnimation(){var e,t,i,r;let n=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;this._progressMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("circularProgress"))?void 0:i({startAngle:this._startAngle},n),bf("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(bg(null==(r=hp.getAnimationInKey("fadeInOut"))?void 0:r(),bf("track",this._spec,this._markAttributeContext)))}getActiveMarks(){return[this._progressMark]}}ka.type=z.circularProgress,ka.mark=ki,ka.builtInTheme={circularProgress:{outerRadius:.8,innerRadius:.6,progress:{style:{fillOpacity:1}},track:{style:{fillOpacity:.2}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}}},ka.transformerConstructor=ko;let ks=()=>{hp.registerSeries(ka.type,ka),S$(),kl(),ml(),Af(),Ab()};class kh extends SY{needAxes(){return!1}_getDefaultSeriesSpec(e){let t=super._getDefaultSeriesSpec(e,["startAngle","endAngle","centerX","centerY"]);return t.categoryField=e.categoryField||e.radiusField,t.valueField=e.valueField||e.angleField,t}_transformProgressAxisSpec(e,t,i,r,n){var l,o;e.axes||(e.axes=[]);let a=(null!=(l=e.axes)?l:[]).find(e=>"radius"===e.orient),s=(null!=(o=e.axes)?o:[]).find(e=>"angle"===e.orient);s||(s=t,e.axes.push(s)),a||(a=i,e.axes.push(a)),(0,r5.Z)(s.type)&&(s.type="linear"),(0,r5.Z)(a.type)&&(a.type="band");let h=vT(s,{min:0,max:1});(0,r5.Z)(s.min)&&(s.min=h.min),(0,r5.Z)(s.max)&&(s.max=h.max),r&&Object.assign(s,hs({},r,s)),n&&Object.assign(a,hs({},n,a))}}class kd extends kh{_getDefaultSeriesSpec(e){var t,i;let r=super._getDefaultSeriesSpec(e);return r.progress=e.progress,r.track=e.track,r.tickMask=e.tickMask,r.cornerRadius=null!=(t=e.cornerRadius)?t:0,r.roundCap=null!=(i=e.roundCap)&&i,r}transformSpec(e){super.transformSpec(e),this._transformProgressAxisSpec(e,{orient:"angle",visible:!1},{orient:"radius",visible:!1},{forceInitTick:e.tickMask&&!1!==e.tickMask.visible})}}class ku extends xB{constructor(){super(...arguments),this.transformerConstructor=kd,this.type="circularProgress",this.seriesType=z.circularProgress}_setModelOption(){this._modelOption.getDimensionInfo=Aw}}ku.type="circularProgress",ku.seriesType=z.circularProgress,ku.transformerConstructor=kd,(0,gH.jB)(ku,xF);let kc=Object.assign(Object.assign({},ke),{segment:{name:"segment",type:"arc"},track:{name:"track",type:"arc"}}),kp=Object.assign(Object.assign({},bo),{pin:{name:"pin",type:"path"},pinBackground:{name:"pinBackground",type:"path"},pointer:{name:"pointer",type:["path","rect"]}}),kg=e=>({channel:{angle:{from:e.startAngle+Math.PI/2}}}),kf={type:"fadeIn"},km=()=>{hp.registerAnimation("gaugePointer",(e,t)=>{let i="fadeIn"===t?kf:kg(e);return{appear:i,enter:i,disappear:{duration:mt.disappear.duration}}})};class kb extends bC{constructor(){super(...arguments),this._supportStack=!1}}class ky extends m4{enableByType(e){return"dimension"!==e}}let kv="M1 0 C1 0.55228 0.55228 1 0 1 C-0.552285 1 -1 0.55228 -1 0 C-1 -0.552285 -0.552285 -1 0 -1 C0.55228 -1 1 -0.552285 1 0Z";class k_ extends kt{constructor(){super(...arguments),this.type=z.gaugePointer,this.transformerConstructor=kb,this._pinMark=null,this._pointerMark=null,this._pinBackgroundMark=null}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setRadiusField(this._spec.radiusField),this._pointerType="rect"===(null==(e=this._spec.pointer)?void 0:e.type)?"rect":"path"}initMark(){this._pinBackgroundMark=this._createMark(k_.mark.pinBackground),this._pointerMark=this._createMark(Object.assign(Object.assign({},k_.mark.pointer),{type:this._pointerType}),{isSeriesMark:!0}),this._pinMark=this._createMark(k_.mark.pin)}initMarkStyle(){this.initPinBackgroundMarkStyle(),this.initPointerMarkStyle(),this.initPinMarkStyle()}initGroups(){}initPointerMarkStyle(){let e=this._pointerMark,t=this._spec.pointer;e&&(this.setMarkStyle(e,{x:e=>{var i,r;let{x:n}=this._getPointerAnchor(e,t);return n-this._getPointerWidth()*(null!=(r=null==(i=null==t?void 0:t.center)?void 0:i[0])?r:0)},y:e=>{var i,r;let{y:n}=this._getPointerAnchor(e,t);return n-this._getPointerHeight(e)*(null!=(r=null==(i=null==t?void 0:t.center)?void 0:i[1])?r:0)},anchor:e=>{let{x:i,y:r}=this._getPointerAnchor(e,t);return[i,r]},fill:this.getColorAttribute(),zIndex:200}),"path"===this._pointerType?this.setMarkStyle(e,{scaleX:this._getPointerWidth.bind(this),scaleY:this._getPointerHeight.bind(this),angle:e=>this._getPointerAngle(e)+Math.PI/2}):this.setMarkStyle(e,{width:this._getPointerWidth.bind(this),height:this._getPointerHeight.bind(this),angle:e=>this._getPointerAngle(e)-Math.PI/2}))}initTooltip(){this._tooltipHelper=new ky(this),this._pointerMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._pointerMark)}_getPointerAnchor(e,t){var i;return null==(i=t.isOnCenter)||i?this.angleAxisHelper.center():this.radiusAxisHelper.coordToPoint({radius:this._innerRadius*this._computeLayoutRadius(),angle:this.angleAxisHelper.dataToPosition([e[this._angleField[0]]])})}_getPointerWidth(){return this._spec.pointer.width*this._computeLayoutRadius()}_getPointerHeight(e){var t,i;let r=this._spec.pointer,n=this._radiusField[0];return(0,oV.Z)(this.radiusAxisHelper)&&(0,oV.Z)(n)?this.radiusAxisHelper.dataToPosition([e[n]])-(null!=(t=null==r?void 0:r.innerPadding)?t:0)-(null!=(i=null==r?void 0:r.outerPadding)?i:10):r.height*this._computeLayoutRadius()}_getPointerAngle(e){let t=this.angleAxisHelper.getScale().domain(),i=(0,ag.CE)(t),r=(0,ag.iH)(t),n=(0,g9.Z)(e[this._angleField[0]],r,i);return this.angleAxisHelper.dataToPosition([n])}_getRotatedPointerCenterOffset(e){var t,i,r,n;let l=this._spec.pointer,o=this._getPointerWidth()*(null!=(i=null==(t=null==l?void 0:l.center)?void 0:t[0])?i:0),a=-this._getPointerHeight(e)*(null!=(n=null==(r=null==l?void 0:l.center)?void 0:r[1])?n:0),s=this._getPointerAngle(e)-Math.PI/2,h=Math.cos(s),d=Math.sin(s);return{x:o*h+a*d,y:-(a*h-o*d)}}initPinBackgroundMarkStyle(){let e=this._pinBackgroundMark,t=this._spec.pinBackground;e&&this.setMarkStyle(e,{x:e=>this._getPointerAnchor(e,t).x,y:e=>this._getPointerAnchor(e,t).y,scaleX:()=>t.width*this._computeLayoutRadius(),scaleY:()=>t.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:100})}initPinMarkStyle(){let e=this._pinMark,t=this._spec.pin;e&&this.setMarkStyle(e,{x:e=>this._getPointerAnchor(e,t).x,y:e=>this._getPointerAnchor(e,t).y,scaleX:()=>t.width*this._computeLayoutRadius(),scaleY:()=>t.height*this._computeLayoutRadius(),fill:this.getColorAttribute(),zIndex:300})}getInteractionTriggers(){return this._parseInteractionConfig(this._pointerMark?[this._pointerMark]:[])}initAnimation(){var e,t,i;let r=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;this._pointerMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("gaugePointer"))?void 0:i({startAngle:this._startAngle},r),bf("pointer",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}k_.type=z.gaugePointer,k_.mark=kp,k_.builtInTheme={gaugePointer:{pointer:{type:"path",width:.4,height:.4,style:{path:"M-0.020059 -0.978425 C-0.018029 -0.9888053 -0.013378 -1 0 -1 C0.01342 -1 0.01812 -0.989146 0.0201 -0.978425 C0.02161 -0.9702819 0.0692 -0.459505 0.09486 -0.184807 C0.10298 -0.097849 0.1089 -0.034548 0.11047 -0.018339 C0.11698 0.04908 0.07373 0.11111 0.00002 0.11111 C-0.07369 0.11111 -0.117184 0.04991 -0.110423 -0.018339 C-0.103662 -0.086591 -0.022089 -0.9680447 -0.020059 -0.978425Z"}},pin:{width:.025,height:.025,style:{path:kv,fill:"#888"}},pinBackground:{width:.06,height:.06,style:{path:kv,fill:"#ddd"}}}},k_.transformerConstructor=kb;let kC=()=>{hp.registerSeries(k_.type,k_),Sh(),wV(),km(),Af(),Ab()};var kx=i(53739);class kw extends bC{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(e){this._addMarkLabelSpec(e,"segment")}}class kS extends kt{constructor(){super(...arguments),this.type=z.gauge,this.transformerConstructor=kw,this._segmentMark=null,this._trackMark=null,this._padAngle=0}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._padAngle=(0,t9.M4)(null!=(e=this._spec.padAngle)?e:0)}initData(){var e;super.initData(),hK(this._option.dataSet,"spiltSegment",(e,t)=>{let i=e.slice();return i.sort((e,t)=>e[this._angleField[0]]-t[this._angleField[0]]),i.forEach((e,t)=>{e[dP]=e[this._angleField[0]],e[dE]=t>0?i[t-1][dP]:void 0}),i}),null==(e=this.getViewData())||e.transform({type:"spiltSegment"},!1)}initMark(){super.initMark(),this._trackMark=this._createMark(kS.mark.track,{parent:this._arcGroupMark,dataView:!1}),this._segmentMark=this._createMark(kS.mark.segment,{parent:this._arcGroupMark,isSeriesMark:!0})}initMarkStyle(){super.initMarkStyle(),this.initTrackMarkStyle(),this.initSegmentMarkStyle()}initSegmentMarkStyle(){var e;let t=this._segmentMark;t&&this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._getAngleValueStart.bind(this),endAngle:this._getAngleValueEnd.bind(this),innerRadius:()=>{var e;return this._computeLayoutRadius()*(null!=(e=this._spec.innerRadius)?e:0)},outerRadius:()=>{var e,t;return this._computeLayoutRadius()*(null!=(t=null!=(e=this._spec.radius)?e:this._spec.outerRadius)?t:1)},cap:null!=(e=this._spec.roundCap)&&e,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute(),zIndex:200,forceShowCap:!0})}generateRadiusStyle(e){if(!e)return;let t={};return e.outerRadius&&(t.outerRadius=()=>this._computeLayoutRadius()*e.outerRadius),e.innerRadius&&(t.innerRadius=()=>this._computeLayoutRadius()*e.innerRadius),t}initMarkStyleWithSpec(e,t){if(super.initMarkStyleWithSpec(e,t),e&&"segment"===e.name){let t=this.getSpec().segment;if(t)for(let i in t.state||{})this.setMarkStyle(e,this.generateRadiusStyle(t.state[i]),i,q.User_Mark)}}initTooltip(){super.initTooltip(),this._segmentMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._segmentMark)}initTrackMarkStyle(){var e;let t=this._trackMark;t&&this.setMarkStyle(t,{x:()=>this.angleAxisHelper.center().x,y:()=>this.angleAxisHelper.center().y,startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:()=>{var e;return this._computeLayoutRadius()*(null!=(e=this._spec.innerRadius)?e:0)},outerRadius:()=>{var e,t;return this._computeLayoutRadius()*(null!=(t=null!=(e=this._spec.radius)?e:this._spec.outerRadius)?t:1)},cap:null!=(e=this._spec.roundCap)&&e,boundsMode:"imprecise",cornerRadius:this._spec.cornerRadius,zIndex:100})}_getAngleValueStartWithoutMask(e){let t=this._getAngleValueStartWithoutPadAngle(e),i=this._getAngleValueEndWithoutPadAngle(e),r=(0,kx.i)(t,(t+i)/2)(t+(i>t?1:-1)*Math.abs(this._padAngle/2));return this._spec.clamp?cL(r,this.angleAxisHelper.getScale(0)):r}_getAngleValueEndWithoutMask(e){let t=this._getAngleValueStartWithoutPadAngle(e),i=this._getAngleValueEndWithoutPadAngle(e),r=(0,kx.i)(i,(t+i)/2)(i-(i>t?1:-1)*Math.abs(this._padAngle/2));return this._spec.clamp?cL(r,this.angleAxisHelper.getScale(0)):r}_getAngleValueStartWithoutPadAngle(e){return(0,oV.Z)(e[dE])?this.angleAxisHelper.dataToPosition([e[dE]]):this._startAngle}_getAngleValueEndWithoutPadAngle(e){return this.angleAxisHelper.dataToPosition([e[dP]])}initAnimation(){var e,t,i;let r=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;this._segmentMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("circularProgress"))?void 0:i({startAngle:this._startAngle},r),bf("segment",this._spec,this._markAttributeContext)))}getDefaultShapeType(){return"circle"}getActiveMarks(){return[]}}kS.type=z.gauge,kS.mark=kc,kS.builtInTheme={gauge:{outerRadius:.8,innerRadius:.6,padAngle:1.146,segment:{style:{fillOpacity:1}},tickMask:{visible:!1,angle:3,offsetAngle:0,forceAlign:!0}}},kS.transformerConstructor=kw;let kA=()=>{hp.registerSeries(kS.type,kS),S$(),kl(),Ab()};class kk extends kh{_getDefaultSeriesSpec(e){let t=super._getDefaultSeriesSpec(e);return t.radiusField=e.radiusField,t.pin=e.pin,t.pinBackground=e.pinBackground,t.pointer=e.pointer,t}_getDefaultCircularProgressSeriesSpec(e){let t=super._getDefaultSeriesSpec(e);return t.type=z.circularProgress,t}transformSpec(e){var t,i,r,n,l;super.transformSpec(e);let o=null==(t=e.series)?void 0:t.find(e=>e.type===z.gauge||e.type===z.circularProgress);(0,r5.Z)(o)&&("circularProgress"===(o=null!=(i=e.gauge)?i:this._getDefaultCircularProgressSeriesSpec(e)).type&&((0,r5.Z)(o.radiusField)&&(0,r5.Z)(o.categoryField)&&(o.radiusField=null!=(n=null!=(r=e.radiusField)?r:e.categoryField)?n:e.seriesField),(0,r5.Z)(o.valueField)&&(0,r5.Z)(o.angleField)&&(o.valueField=null!=(l=e.valueField)?l:e.angleField)),1===e.series.length?e.series.push(o):e.series.forEach(e=>{e.type===o.type&&Object.keys(o).forEach(t=>{t in e||(e[t]=o[t])})})),o.type===z.circularProgress?this._transformProgressAxisSpec(e,{orient:"angle",visible:!0,domainLine:{visible:!1},grid:{visible:!1}},{orient:"radius",visible:!1},{zIndex:X.Region+50}):this._transformGaugeAxisSpec(e)}_transformGaugeAxisSpec(e){var t;e.axes||(e.axes=[]);let i={radius:null,angle:null};(null!=(t=e.axes)?t:[]).forEach(e=>{let{orient:t}=e;"radius"===t&&(i.radius=e),"angle"===t&&(i.angle=e)}),i.angle||(i.angle={orient:"angle",visible:!0},e.axes.push(i.angle)),i.radius||(i.radius={orient:"radius",visible:!1},e.axes.push(i.radius)),(0,r5.Z)(i.angle.type)&&(i.angle.type="linear"),(0,r5.Z)(i.radius.type)&&(i.radius.type="linear"),(0,r5.Z)(i.angle.zIndex)&&(i.angle.zIndex=X.Region+50)}}class kM extends xB{constructor(){super(...arguments),this.transformerConstructor=kk,this.type="gauge",this.seriesType=z.gaugePointer}}kM.type="gauge",kM.seriesType=z.gaugePointer,kM.transformerConstructor=kk;class kT extends xA{transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["nameField","valueField","fontFamilyField","fontWeightField","fontStyleField","colorHexField","colorMode","colorList","rotateAngles","fontWeightRange","fontSizeRange","maskShape","keepAspect","random","wordCloudConfig","wordCloudShapeConfig","word","fillingWord","wordMask"])}}class kR extends xB{constructor(){super(...arguments),this.transformerConstructor=kT,this.type="wordCloud",this.seriesType=z.wordCloud}}kR.transformerConstructor=kT;let kE=[0],kP=[20,40],kB=[200,500],kI={shrink:!1,enlarge:!1,fontSizeLimitMin:0},kL=["triangleForward","triangle","diamond","square","star","cardioid","circle","pentagon","rect"],kF=`${dg}_WORD_CLOUD_TEXT`,kH=Object.assign(Object.assign({},bo),{word:{name:"word",type:"text"},fillingWord:{name:"fillingWord",type:"text"},wordMask:{name:"wordMask",type:"rect"}});class kO extends bx{constructor(){super(...arguments),this._fontSizeRange=[20,20],this._isWordCloudShape=!1,this._dataChange=!0,this.handleMaskCanvasUpdate=(e,t)=>{this._maskCanvas=e},this.getWordColor=e=>e.isFillingWord?(this._fillingColorCallback&&!this._dataChange||(this._fillingColorCallback=this._wordCloudShapeConfig.fillingColorHexField?e=>e[this._wordCloudShapeConfig.fillingColorHexField]:this.initColorCallback(this._wordCloudShapeConfig.fillingSeriesField,!0)),this._fillingColorCallback(e)):(this._keyWordColorCallback&&!this._dataChange||(this._keyWordColorCallback=this._spec.colorHexField?e=>e[this._spec.colorHexField]:this.initColorCallback(this._seriesField,!1)),this._keyWordColorCallback(e)),this._calculateFontWeight=e=>{let t=this.getRawDataStatisticsByField(this._valueField,!0);return t.min===t.max?this._fontWeightRange[0]:this._fontWeightRange[0]+(this._fontWeightRange[this._fontWeightRange.length-1]-this._fontWeightRange[0])*(e[this._valueField]-t.min)/(t.max-t.min)}}setValueField(e){(0,oV.Z)(e)&&(this._valueField=e)}setFontSizeRange(e){(0,oV.Z)(e)?this._fontSizeRange=e:this._fontSizeRange=kP}setAttrFromSpec(){var e,t,i,r,n;super.setAttrFromSpec(),this._padding=this._option.getChart().padding,this._nameField=this._spec.nameField,this._colorMode=null!=(e=this._spec.colorMode)?e:"ordinal",this._colorList=this._spec.colorList,this.setValueField(this._spec.valueField),this._fontWeightRange=null!=(t=this._spec.fontWeightRange)?t:kB,this._rotateAngles=null!=(i=this._spec.rotateAngles)?i:kE,this.setFontSizeRange(this._spec.fontSizeRange),this._maskShape=null!=(r=this._spec.maskShape)?r:"circle",this._textField=(null==(n=this._spec.word)?void 0:n.formatMethod)?kF:this._nameField;let l=this._spec.wordCloudConfig;this._wordCloudConfig=Object.assign({drawOutOfBound:"hidden",layoutMode:"default",zoomToFit:kI},this._spec.wordCloudConfig),l&&!(0,r5.Z)(l.layoutMode)||sq(this._option.mode)||(this._wordCloudConfig.layoutMode="fast"),this._wordCloudShapeConfig=Object.assign({fillingSeriesField:this.getSeriesField(),fillingRotateAngles:kE,layoutMode:"default"},this._spec.wordCloudShapeConfig),this._isWordCloudShape=!kL.includes(this._maskShape)&&!["fast","grid","cloud"].includes(this._wordCloudConfig.layoutMode),this._defaultFontFamily=this._option.getTheme("fontFamily")}initData(){var e,t;super.initData(),null==(t=null==(e=this.getViewData())?void 0:e.target)||t.addListener("change",()=>{this._dataChange=!0,this.compile()})}initMark(){var e;this._wordMark=this._createMark(kO.mark.word,{key:dm,groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this._seriesField}),(null==(e=this._spec.wordMask)?void 0:e.visible)&&(this._maskMark=this._createMark(kO.mark.wordMask,{dataView:!1}),this._maskMark.setMarkConfig({zIndex:X.Mark-1}))}initMarkStyle(){this.initMarkStyleOfWord(this._wordMark,this._spec.word,this._spec.colorHexField,this._seriesField),this._maskMark&&this.setMarkStyle(this._maskMark,{width:()=>this._region.getLayoutRect().width,height:()=>this._region.getLayoutRect().height,background:()=>this._maskCanvas},"normal",q.Series)}initMarkStyleOfWord(e,t,i,r,n){var l,o;e&&(this.setMarkStyle(e,{text:(null==t?void 0:t.formatMethod)?e=>t.formatMethod(e):e=>e[this._textField],x:e=>e.x,y:e=>e.y,fontSize:e=>e.fontSize,fontStyle:e=>e.fontStyle,angle:e=>e.angle,visible:e=>e.visible},"normal",q.Series),this.setMarkStyle(e,{fill:null!=(o=null==(l=null==t?void 0:t.style)?void 0:l.fill)?o:this.getWordColor,fontWeight:e=>e.fontWeight,fontFamily:e=>e.fontFamily},"normal",q.User_Mark))}initTooltip(){super.initTooltip(),this._wordMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._wordMark)}initAnimation(){[this._wordMark].forEach(e=>{var t,i;if(e){let r=null==(i=null==(t=this._spec)?void 0:t.animationAppear)?void 0:i.preset;e.setAnimationConfig(bg(hp.getAnimationInKey("wordCloud")({animationConfig:()=>{var t,i;return null==(i=null==(t=e.getAnimationConfig())?void 0:t.appear)?void 0:i[0]}},r),bf("word",this._spec,this._markAttributeContext)))}})}getWordOrdinalColorScale(e,t){var i,r,n,l,o;let a=t?this._wordCloudShapeConfig.fillingColorList:this._colorList,s=e?null==(i=this.getViewData())?void 0:i.latestData.map(t=>t[e]):[],h=null!=(n=null!=a?a:null==(r=this._option.globalScale.getScale("color"))?void 0:r.range())?n:this._getDataScheme();return null==(o=(l=(new cP).domain(s)).range)?void 0:o.call(l,h)}initColorCallback(e,t){var i,r,n,l;if("ordinal"===this._colorMode){let i=this.getWordOrdinalColorScale(e,t);return t=>i.scale(t[null!=e?e:db])}let o=null!=(i=t?this._colorList:this._wordCloudShapeConfig.fillingColorList)?i:this._option.globalScale.getScale("color").range();if(1===o.length)return e=>o[0];if(this._valueField){let e=this.getRawDataStatisticsByField(this._valueField,!0);if(e.min===e.max)return o[0];let t=(new ck.f).domain([e.min,e.max]).range(o);return e=>t.scale(e[this._valueField])}let a=(new ck.f).domain([0,null!=(l=null==(n=null==(r=this.getViewData())?void 0:r.latestData)?void 0:n.length)?l:1]).range(o);return e=>a.scale(e[df])}compile(){super.compile();let{width:e,height:t}=this._region.getLayoutRect();if(!(0,sD.Z)(e)||!(0,sD.Z)(t)||!(t>0&&e>0))return;let i=[];this._isWordCloudShape?i.push(Object.assign({type:"wordcloudShape"},this._wordCloudShapeTransformOption())):i.push(Object.assign({type:"wordcloud"},this._wordCloudTransformOption())),this._wordMark.setTransform(i)}_getCommonTransformOptions(){var e,t,i,r,n;let{width:l,height:o}=this._region.getLayoutRect(),a=null!=(e=this._spec.word)?e:{},s=null!=(t=a.style)?t:{};return{size:[l,o],shape:(0,r9.Z)(this._maskShape)&&"text"===this._maskShape.type&&(0,r5.Z)(this._maskShape.fontFamily)?Object.assign({fontFamily:this._option.getTheme("fontFamily")},this._maskShape):this._maskShape,onUpdateMaskCanvas:this.handleMaskCanvasUpdate,onLayoutFinished:()=>{let e=()=>{var t,i,r,n;this._option.globalInstance.getStage().hooks.afterRender.taps=this._option.globalInstance.getStage().hooks.afterRender.taps.filter(t=>t.fn!==e),null==(i=(t=this._option).dispatchEvent)||i.call(t,N.afterWordcloudShapeDraw,{instance:this._option.globalInstance}),null==(n=null==(r=this._option.globalInstance.getChart().getOption().performanceHook)?void 0:r.afterWordcloudShapeDraw)||n.call(r,this._option.globalInstance)};this._option.globalInstance.getStage().hooks.afterRender.taps.push({type:"sync",name:"afterWordcloudShapeDraw",fn:e})},dataIndexKey:dm,text:a.formatMethod?e=>a.formatMethod(e):{field:this._textField},fontSize:this._valueField?{field:this._valueField}:this._fontSizeRange[0],fontSizeRange:"auto"===this._fontSizeRange?null:this._fontSizeRange,padding:null!=(r=null==(i=this._spec.word)?void 0:i.padding)?r:1,fontFamily:(0,oV.Z)(this._spec.fontFamilyField)?{field:this._spec.fontFamilyField}:null!=(n=s.fontFamily)?n:this._defaultFontFamily,fontWeight:(0,oV.Z)(this._spec.fontWeightField)?{field:this._spec.fontWeightField}:(0,oV.Z)(s.fontWeight)?s.fontWeight:(0,oV.Z)(this._valueField)?this._calculateFontWeight:"normal",fontStyle:(0,oV.Z)(this._spec.fontStyleField)?{field:this._spec.fontStyleField}:s.fontStyle,createCanvas:sI.createCanvas.bind(sI),getTextBounds:dJ}}_wordCloudTransformOption(){var e,t;return Object.assign(Object.assign(Object.assign({},null!=(e=this._wordCloudConfig)?e:{}),this._getCommonTransformOptions()),{layoutType:this._wordCloudConfig.layoutMode,rotate:this._rotateAngles,randomVisible:null==(t=this._spec.random)||t,clip:"clip"===this._wordCloudConfig.drawOutOfBound,shrink:this._wordCloudConfig.zoomToFit.shrink,enlarge:this._wordCloudConfig.zoomToFit.enlarge,minFontSize:this._wordCloudConfig.zoomToFit.fontSizeLimitMin,progressiveTime:this._wordCloudConfig.progressiveTime,progressiveStep:this._wordCloudConfig.progressiveStep,repeatFill:this._wordCloudConfig.zoomToFit.repeat})}_wordCloudShapeTransformOption(){var e,t,i,r,n,l;let o=null!=(t=null==(e=this._spec.fillingWord)?void 0:e.style)?t:{},a=null!=(i=this._wordCloudShapeConfig)?i:{};return Object.assign(Object.assign(Object.assign({},a),this._getCommonTransformOptions()),{createImage:yy,rotateList:this._rotateAngles,fillingRotateList:a.fillingRotateAngles,fillingFontFamily:(0,oV.Z)(a.fillingFontFamilyField)?{field:a.fillingFontFamilyField}:null!=(r=o.fontFamily)?r:this._defaultFontFamily,fillingPadding:null!=(l=null==(n=this._spec.fillingWord)?void 0:n.padding)?l:1,fillingFontStyle:(0,oV.Z)(a.fillingFontStyleField)?{field:a.fillingFontStyleField}:o.fontStyle,fillingFontWeight:(0,oV.Z)(a.fillingFontWeightField)?{field:a.fillingFontWeightField}:o.fontWeight})}getStatisticFields(){let e=[];return e.push({key:this._nameField,operations:["values"]}),e.push({key:this._valueField,operations:["max","min"]}),e}dataToPosition(e){return null}dataToPositionX(e){return null}dataToPositionY(e){return null}dataToPositionZ(e){return null}valueToPosition(e,t){return null}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}onLayoutEnd(){super.onLayoutEnd(),this.compile(),this._dataChange=!1}getActiveMarks(){return[this._wordMark]}reInit(){super.reInit(),this._keyWordColorCallback&&(this._keyWordColorCallback=null),this._fillingColorCallback&&(this._fillingColorCallback=null)}}kO.mark=kH,kO.builtInTheme={wordCloud:{word:{padding:1,style:{textAlign:"center",textBaseline:"alphabetic"}}}};let kD=e=>({type:"scaleIn",duration:200,delay:(t,i)=>{let r=e.animationConfig(),n=(null==r?void 0:r.duration)||200,l=(null==r?void 0:r.totalTime)||mt.appear.duration,o=i.context.graphicCount;return i.context.graphicIndex*(n*o<l?n+(l-o*n)/(o-1):(l-n)/(o-1))}}),kz=()=>{hp.registerAnimation("wordCloud",(e,t)=>({appear:!1===t?{}:"fadeIn"===t?{type:"fadeIn"}:kD(e),enter:{type:"fadeIn"},exit:{type:"fadeOut"},disappear:{duration:mt.disappear.duration}}))};var kW=i(98705),kZ=i(66974);class kN extends kO{constructor(){super(...arguments),this.type=z.wordCloud}}kN.type=z.wordCloud;let k$=()=>{hp.registerGrammarTransform("wordcloud",{transform:kW.v}),AJ(),kz(),hp.registerSeries(kN.type,kN)},kj=()=>{hp.registerGrammarTransform("wordcloudShape",{transform:kZ.v}),hp.registerGrammarTransform("wordcloud",{transform:kW.v}),AJ(),kz(),hp.registerSeries(kN.type,kN)};class kG extends kR{constructor(){super(...arguments),this.transformerConstructor=kT,this.type="wordCloud",this.seriesType=z.wordCloud}}kG.type="wordCloud",kG.seriesType=z.wordCloud,kG.transformerConstructor=kT;let kV=(e,t)=>{var i,r;let n=e.map(e=>Object.assign({},e));if(!n||0===n.length)return n;let{valueField:l,asTransformRatio:o,asReachRatio:a,asHeightRatio:s,asValueRatio:h,asNextValueRatio:d,asLastValueRatio:u,asLastValue:c,asCurrentValue:p,asNextValue:g,heightVisual:f=!1,isCone:m=!0,range:b}=t,y=n.reduce((e,t)=>Math.max(e,Number.parseFloat(t[l])||-1/0),-1/0),v=n.reduce((e,t)=>Math.min(e,Number.parseFloat(t[l])||1/0),1/0),_=[null!=(i=null==b?void 0:b.min)?i:v,null!=(r=null==b?void 0:b.max)?r:y];return n.forEach((e,t)=>{var i,r;let b=Number.parseFloat(e[l]),y=Number.parseFloat(null==(i=n[t-1])?void 0:i[l]),v=Number.parseFloat(null==(r=n[t+1])?void 0:r[l]),C=(0,sD.Z)(v*b)&&0!==b?v/b:0,x=(0,sD.Z)(b*y)&&0!==y?b/y:0;c&&(e[c]=y),g&&(e[g]=v),o&&(e[o]=C),a&&(e[a]=0===t?1:x),s&&(e[s]=!0===f?C:1/n.length),h&&(e[h]=b/_[1]),d&&(e[d]=t===n.length-1?m?0:e[h]:v/_[1]),u&&(e[u]=0===t?1:y/_[1]),p&&(e[p]=b)}),n},kU=(e,t)=>{var i,r;let n=null==(r=null==(i=e[0])?void 0:i.latestData)?void 0:r.map(e=>Object.assign({},e));return n&&0!==n.length&&(n.shift(),n.forEach(e=>{e[t.asIsTransformLevel]=!0})),n},kK=`${dg}_FUNNEL_TRANSFORM_RATIO`,kX=`${dg}_FUNNEL_REACH_RATIO`,kY=`${dg}_FUNNEL_HEIGHT_RATIO`,kq=`${dg}_FUNNEL_VALUE_RATIO`,kJ=`${dg}_FUNNEL_LAST_VALUE_RATIO`,kQ=`${dg}_FUNNEL_NEXT_VALUE_RATIO`,k0=`${dg}_FUNNEL_LAST_VALUE`,k1=`${dg}_FUNNEL_CURRENT_VALUE`,k2=`${dg}_FUNNEL_NEXT_VALUE`,k3=`${dg}_FUNNEL_TRANSFORM_LEVEL`;class k4 extends m4{constructor(e){var t,i;super(e),this.dimensionTooltipTitleCallback=(e,t)=>{var i,r,n;let l=this.series;return"transform"===(null==(i=null==t?void 0:t.mark)?void 0:i.name)?this._transformRatioText:null!=(r=this._getDimensionData(e))?r:null==(n=e.properties)?void 0:n[`${l.getCategoryField()}`]},this.markTooltipValueCallback=(e,t)=>{var i;return"transform"===(null==(i=null==t?void 0:t.mark)?void 0:i.name)?`${(100*(null==e?void 0:e[kX])).toFixed(1)}%`:this._getMeasureData(e)},this.markTooltipKeyCallback=(e,t)=>{var i;if("transform"===(null==(i=null==t?void 0:t.mark)?void 0:i.name))return this._transformRatioText;let{dimensionFields:r,seriesFields:n}=this._seriesCacheInfo,l=r[r.length-1];return(0,oV.Z)(n[0])?null==e?void 0:e[n[0]]:null==e?void 0:e[l]},this._transformRatioText=null!=(i=null==(t=e.getSpec())?void 0:t.transformRatioText)?i:""}}class k5 extends pz{_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{points:[]})}}class k6 extends k5{constructor(){super(...arguments),this.type=k6.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:0})}}k6.type="polygon";let k8=()=>{hp.registerMark(k6.type,k6),pN(),Cp(),mg(),hp.registerGraphicComponent("polygon",_9)},k7=Object.assign(Object.assign({},bo),{funnel:{name:"funnel",type:"polygon"},transform:{name:"transform",type:"polygon"},transformLabel:{name:"transformLabel",type:"text"},outerLabel:{name:"outerLabel",type:"text"},outerLabelLine:{name:"outerLabelLine",type:"rule"}});class k9 extends bC{_transformLabelSpec(e){this._addMarkLabelSpec(e,"funnel"),e.isTransform&&this._addMarkLabelSpec(e,"transform","transformLabel")}}let Me=(e=>{let t={label:{style:{fill:"white",textBaseline:"middle",lineWidth:2}},outerLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"}},line:{style:{stroke:{type:"palette",key:"axisDomainColor"}}}},transformLabel:{style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle"}}};return t[e?"transform3d":"transform"]={style:{fill:{type:"palette",key:"axisGridColor"}}},t})();class Mt extends bx{constructor(){super(...arguments),this.type=z.funnel,this._funnelMarkName="funnel",this._funnelMarkType="polygon",this._transformMarkName="transform",this._transformMarkType="polygon",this.transformerConstructor=k9,this._funnelMark=null,this._funnelTransformMark=null,this._labelMark=null,this._transformLabelMark=null,this._funnelOuterLabelMark={}}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}setAttrFromSpec(){var e,t,i,r,n;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this._funnelOrient=null!=(e=this._spec.funnelOrient)?e:"top",this._shape=null!=(t=this._spec.shape)?t:"trapezoid",this._minLabelLineWidth=null!=(n=null==(r=null==(i=this._spec.outerLabel)?void 0:i.line)?void 0:r.minLength)?n:20,this._isHorizontal()?this._funnelAlign=["top","bottom"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center":this._funnelAlign=["left","right"].includes(this._spec.funnelAlign)?this._spec.funnelAlign:"center",!this._seriesField&&this._spec.categoryField&&this.setSeriesField(this._spec.categoryField)}initData(){if(super.initData(),!this._data)return;hK(this._dataSet,"funnel",kV),hK(this._dataSet,"funnelTransform",kU);let e=new tf.V(this._dataSet,{name:`${dg}_series_${this.id}_viewDataTransform`});e.parse([this.getViewData()],{type:"dataview"}),this._viewDataTransform=new cj(this._option,e)}compile(){var e,t;super.compile(),this._funnelOuterLabelMark&&(null==(e=this._funnelOuterLabelMark.label)||e.compile({group:this._rootMark.getProduct()}),null==(t=this._funnelOuterLabelMark.line)||t.compile({group:this._rootMark.getProduct()}))}compileData(){var e;super.compileData(),null==(e=this._viewDataTransform)||e.compile()}getStatisticFields(){let e=[];return e.push({key:this._categoryField,operations:["values"]}),e.push({key:this._valueField,operations:["max","min"]}),e}_statisticViewData(){var e,t,i,r,n,l,o,a,s;super._statisticViewData(),this._data.getDataView().transform({type:"funnel",options:{valueField:this.getValueField(),isCone:this._spec.isCone,asCurrentValue:k1,asTransformRatio:kK,asReachRatio:kX,asHeightRatio:kY,asValueRatio:kq,asNextValueRatio:kQ,asLastValueRatio:kJ,asLastValue:k0,asNextValue:k2,range:{min:null!=(t=null==(e=this._spec.range)?void 0:e.min)?t:null==(r=null==(i=this.getViewDataStatistics().latestData)?void 0:i[this.getValueField()])?void 0:r.min,max:null!=(l=null==(n=this._spec.range)?void 0:n.max)?l:null==(a=null==(o=this.getViewDataStatistics().latestData)?void 0:o[this.getValueField()])?void 0:a.max}}}),null==(s=this._viewDataTransform.getDataView())||s.transform({type:"funnelTransform",options:{asIsTransformLevel:k3}})}initMark(){var e,t,i,r,n,l,o,a;if(this._funnelMark=this._createMark(Object.assign(Object.assign({},Mt.mark.funnel),{name:this._funnelMarkName,type:this._funnelMarkType}),{themeSpec:null==(e=this._theme)?void 0:e.funnel,groupKey:this._seriesField,isSeriesMark:!0,noSeparateStyle:!0},{morph:by(this._spec,this._funnelMarkName),morphElementKey:this._seriesField}),this._spec.isTransform&&(this._funnelTransformMark=this._createMark(Object.assign(Object.assign({},Mt.mark.transform),{name:this._transformMarkName,type:this._transformMarkType}),{themeSpec:null==(t=this._theme)?void 0:t.transform,noSeparateStyle:!0}),this._funnelTransformMark&&this._funnelTransformMark.setData(this._viewDataTransform)),null==(r=null==(i=this._spec)?void 0:i.outerLabel)?void 0:r.visible){let{line:e}=null!=(n=this._spec.outerLabel)?n:{},{line:t}=null!=(o=null==(l=this._theme)?void 0:l.outerLabel)?o:{};this._funnelOuterLabelMark.label=this._createMark(Mt.mark.outerLabel,{themeSpec:null==(a=this._theme)?void 0:a.outerLabel,markSpec:this._spec.outerLabel,noSeparateStyle:!0,parent:!1}),this._funnelOuterLabelMark.line=this._createMark(Mt.mark.outerLabelLine,{themeSpec:t,markSpec:e,noSeparateStyle:!0,parent:!1})}}initTooltip(){this._tooltipHelper=new k4(this),this._funnelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelMark),this._funnelTransformMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._funnelTransformMark)}getDimensionField(){return this._seriesField?[this._seriesField]:[]}getMeasureField(){return[this._valueField]}getGroupFields(){return null}initMarkStyle(){var e,t,i,r;let n=this._funnelMark;n&&this.setMarkStyle(n,{points:e=>this.getPoints(e),visible:e=>(0,oV.Z)(e[this._valueField]),fill:this.getColorAttribute()},"normal",q.Series);let l=this._funnelTransformMark;l&&this.setMarkStyle(l,{points:e=>this.getPoints(e)},"normal",q.Series);let o=this._funnelOuterLabelMark.label;o&&(this.setMarkStyle(o,{text:e=>`${e[this.getCategoryField()]}`,x:e=>this._computeOuterLabelPosition(e).x,y:e=>this._computeOuterLabelPosition(e).y,textAlign:e=>this._computeOuterLabelPosition(e).align,textBaseline:e=>this._computeOuterLabelPosition(e).textBaseline,maxLineWidth:e=>this._computeOuterLabelLimit(e),width:0,height:0},"normal",q.Series),(0,nr.Z)(this._spec.outerLabel.formatMethod)&&this.setMarkStyle(o,{text:e=>this._spec.outerLabel.formatMethod(`${e[this.getCategoryField()]}`,e)},"normal",q.User_Mark));let a=this._funnelOuterLabelMark.line;if(a&&o){this.setMarkStyle(a,{x:e=>this._computeOuterLabelLinePosition(e).x1,y:e=>this._computeOuterLabelLinePosition(e).y1,x1:e=>this._computeOuterLabelLinePosition(e).x2,y1:e=>this._computeOuterLabelLinePosition(e).y2},"normal",q.Series);let n=null!=(i=null==(t=null==(e=this._spec.outerLabel)?void 0:e.line)?void 0:t.visible)?i:null==(r=this._spec.outerLabel)?void 0:r.visible;(0,oV.Z)(n)&&a.setVisible(n)}}initLabelMarkStyle(e){var t;if(!e)return;let i=e.getTarget(),r=e.getComponent();if(i===this._funnelMark){this._labelMark=e,this.setMarkStyle(e,{text:e=>`${e[this.getCategoryField()]} ${e[this.getValueField()]}`,x:e=>this._computeLabelPosition(e).x,y:e=>this._computeLabelPosition(e).y,maxLineWidth:e=>this._computeLabelLimit(e,this._spec.label),stroke:this.getColorAttribute()},"normal",q.Series);let i=this.getCompiler().getRootMarks();this._funnelOuterLabelMark.label&&C3(i,this._funnelOuterLabelMark.label,r),this._funnelOuterLabelMark.line&&C3(i,this._funnelOuterLabelMark.line,null!=(t=this._funnelOuterLabelMark.label)?t:r)}else this._funnelTransformMark&&i===this._funnelTransformMark&&(this._transformLabelMark=e,this.setMarkStyle(e,{text:e=>`${(100*sL(kX).bind(this)(e)).toFixed(1)}%`,x:e=>this._computeLabelPosition(e).x,y:e=>this._computeLabelPosition(e).y,maxLineWidth:e=>this._computeLabelLimit(e,this._spec.transformLabel)},"normal",q.Series))}initAnimation(){var e,t,i,r,n,l,o;let a=null!=(i=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset)?i:"clipIn";"clipIn"===a&&this._rootMark&&this._rootMark.setAnimationConfig(bg(null==(r=hp.getAnimationInKey("cartesianGroupClip"))?void 0:r({direction:()=>this._isHorizontal()?"x":"y",width:()=>{let e=this.getRootMark().getProduct();if(e){let{x1:t,x2:i}=e.AABBBounds;return Math.max(t,i)}return this.getLayoutRect().width},height:()=>{let e=this.getRootMark().getProduct();if(e){let{y1:t,y2:i}=e.AABBBounds;return Math.max(t,i)}return this.getLayoutRect().height},orient:()=>this._isReverse()?"negative":"positive"},a),bf("group",this._spec,this._markAttributeContext))),[null==(n=this._funnelOuterLabelMark)?void 0:n.label].forEach(e=>{e&&e.setAnimationConfig(bg(hp.getAnimationInKey("fadeInOut")(),bf(e.name,this._spec,this._markAttributeContext)))}),[this._funnelMark,this._funnelTransformMark].forEach(e=>{e&&e.setAnimationConfig(bg(hp.getAnimationInKey("funnel")({},a),bf(e.name,this._spec,this._markAttributeContext)))}),(null==(l=this._funnelOuterLabelMark)?void 0:l.line)&&this._funnelOuterLabelMark.line.setAnimationConfig(bg(null==(o=hp.getAnimationInKey("fadeInOut"))?void 0:o(),bf("outerLabelLine",this._spec,this._markAttributeContext)))}initGroups(){}getStackGroupFields(){return[]}getStackValueField(){return null}initEvent(){var e;super.initEvent(),null==(e=this._viewDataTransform.getDataView())||e.target.addListener("change",e=>{this._viewDataTransform.updateData()})}getPoints(e){let t,i,r=this.isTransformLevel(e),n=this._getMainAxisLength(r)/2;r?(t="rect"===this._shape?this._getSecondaryAxisLength(e[kJ])/2:this._getSecondaryAxisLength(e[kq])/2,i=this._getSecondaryAxisLength(e[kq])/2):(t=this._getSecondaryAxisLength(e[kq])/2,i="rect"===this._shape?t:this._getSecondaryAxisLength(e[kQ])/2);let{x:l,y:o}=this._getPositionByData(e),a=this._getPolygonPoints([l,o],t,i,t,i,n);return"center"!==this._funnelAlign&&this._adjustPoints(a),a}isTransformLevel(e){return!!(null==e?void 0:e[k3])}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToPosition=this.valueToPosition.bind(this),this._markAttributeContext.getPoints=this.getPoints.bind(this),this._markAttributeContext.isTransformLevel=this.isTransformLevel.bind(this)}valueToPosition(e){var t,i,r;let n=null==(r=null==(i=null==(t=this.getViewData())?void 0:t.latestData)?void 0:i.find)?void 0:r.call(i,t=>t[this._categoryField]===e);return(0,oV.Z)(n)?this._getPolygonCenter(this.getPoints(n)):null}dataToPosition(e,t){return t&&!this.isDatumInViewData(e)?null:this.valueToPosition(e[this._categoryField])}dataToPositionX(e){var t;return null==(t=this.dataToPosition(e))?void 0:t.x}dataToPositionY(e){var t;return null==(t=this.dataToPosition(e))?void 0:t.y}dataToPositionZ(e){return 0}_getMainAxisLength(e=!1){var t;let i=this.getViewData().latestData.length,r=this._isHorizontal()?this.getLayoutRect().width:this.getLayoutRect().height,n=!!this._spec.isTransform,l=n?0:null!=(t=this._spec.gap)?t:0,o=n?Math.max(0,i-1):0,a=this._spec.heightRatio||.5,s=(r-l*Math.max(0,i-1))/(i+a*o);return e?n?s*a:0:s}_getSecondaryAxisLength(e){let t=Number.isNaN(e)||!Number.isFinite(e)?0:e,i=this._computeMaxSize(),r=this._computeMinSize();return r+(i-r)*t}_getPositionByData(e){var t;let i=null==(t=this.getViewData().latestData)?void 0:t.findIndex(t=>t[this._categoryField]===e[this._categoryField]&&t[dm]===e[dm]);if(!(0,oV.Z)(i)||i<0)return{};let r=this.isTransformLevel(e),n=this._isHorizontal(),l=n?this.getLayoutRect().height:this.getLayoutRect().width,o=n?this.getLayoutRect().width:this.getLayoutRect().height,a=l/2,s=0,h=this._getMainAxisLength(),d=this._getMainAxisLength(!0);return s+=i*(h+d)+(r?-d/2:h/2),!this._spec.isTransform&&this._spec.gap&&(s+=this._spec.gap*i),this._isReverse()&&(s=o-s),this._isHorizontal()?{x:s,y:a}:{x:a,y:s}}_getPolygonPoints(e,t,i,r,n,l){let o=e[0],a=e[1];switch(this._funnelOrient){case"left":return[{x:o-l,y:a+t},{x:o-l,y:a-r},{x:o+l,y:a-n},{x:o+l,y:a+i}];case"right":return[{x:o+l,y:a-r},{x:o+l,y:a+r},{x:o-l,y:a+i},{x:o-l,y:a-i}];case"bottom":return[{x:o+t,y:a+l},{x:o-r,y:a+l},{x:o-n,y:a-l},{x:o+i,y:a-l}];default:return[{x:o-t,y:a-l},{x:o+r,y:a-l},{x:o+n,y:a+l},{x:o-i,y:a+l}]}}_getPolygonCenter(e){if(this._isHorizontal()){let t=(e[0].x+e[3].x)/2,i=(e[0].y+e[3].y)/2;return{x:(t+(e[1].x+e[2].x)/2)/2,y:(i+(e[1].y+e[2].y)/2)/2}}let t=(e[0].x+e[3].x)/2,i=(e[0].y+e[3].y)/2;return{x:(t+(e[1].x+e[2].x)/2)/2,y:(i+(e[1].y+e[2].y)/2)/2}}_adjustPoints(e){let t,i,r;return this._isHorizontal()?(r="y","left"===this._funnelOrient?(t="bottom"===this._funnelAlign?-e[1].y:e[1].y,i="bottom"===this._funnelAlign?-e[2].y:e[2].y):(t="bottom"===this._funnelAlign?-e[0].y:e[0].y,i="bottom"===this._funnelAlign?-e[3].y:e[3].y)):(r="x","top"===this._funnelOrient?(t="left"===this._funnelAlign?e[0].x:-e[0].x,i="left"===this._funnelAlign?e[3].x:-e[3].x):(t="left"===this._funnelAlign?e[1].x:-e[1].x,i="left"===this._funnelAlign?e[2].x:-e[2].x)),e[0][r]-=t,e[1][r]-=t,e[2][r]-=i,e[3][r]-=i,e}_computeLabelPosition(e){let t=this.getPoints(e);return this._getPolygonCenter(t)}_computeLabelLimit(e,t){let i=null==t?void 0:t.limit;if((0,nw.Z)(i))return i;let r=this.getPoints(e);return"shapeSize"===i?this._isHorizontal()?Math.abs(r[3].x-r[0].x):(Math.abs(r[0].x-r[1].x)+Math.abs(r[2].x-r[3].x))/2:this._isHorizontal()?Math.abs(r[3].x-r[0].x):void 0}_computeOuterLabelPosition(e){var t,i;let r,n,l=null==(t=this._spec.outerLabel)?void 0:t.position,o="center",a="middle";if(l=this._isHorizontal()?["top","bottom"].includes(l)?l:"bottom"===this._funnelAlign?"top":"bottom":["left","right"].includes(l)?l:"left"===this._funnelAlign?"right":"left",!1!==(null==(i=this._spec.outerLabel)?void 0:i.alignLabel))({x:r,y:n}=this._getPositionByData(e)),"left"===l?(r=0,o="left"):"right"===l?(r=this.getLayoutRect().width,o="right"):"top"===l?(n=0,a="top"):"bottom"===l&&(n=this.getLayoutRect().height,a="bottom");else{let{x2:t,y2:i}=this._computeOuterLabelLinePosition(e);r=t,n=i,"left"===l?(r-=5,o="right"):"right"===l?(r+=5,o="left"):"top"===l?(n-=5,a="bottom"):"bottom"===l&&(n+=5,a="top")}return{x:r,y:n,align:o,textBaseline:a}}_computeOuterLabelLimit(e){var t,i,r,n,l,o;if(this._isHorizontal())return this._getMainAxisLength(this.isTransformLevel(e));let a=this.getPoints(e),s=(Math.abs(a[0].x-a[1].x)+Math.abs(a[2].x-a[3].x))/2,h=this.getCategoryField(),d=null==(n=null==(r=null==(i=null==(t=this._labelMark)?void 0:t.getComponent())?void 0:i.getComponent())?void 0:r.find(({attribute:t,type:i})=>{var r;return"text"===i&&(null==(r=t.data)?void 0:r[h])===e[h]},!0))?void 0:n.AABBBounds,u=d?d.x2-d.x1:0,c=this._funnelOuterLabelMark.line?this._minLabelLineWidth:0,p=this.getLayoutRect().width-Math.max(s,u);return"center"===this._funnelAlign&&(p/=2),p-c-(null!=(o=null==(l=this._spec.outerLabel)?void 0:l.spaceWidth)?o:5)}_computeOuterLabelLinePosition(e){var t,i,r,n,l,o,a,s,h,d;let u,c,p,g,f=this.getCategoryField(),m=null==(n=null==(r=null==(i=null==(t=this._funnelOuterLabelMark)?void 0:t.label)?void 0:i.getGraphics())?void 0:r.find(t=>{var i;return(null==(i=t.context.data[0])?void 0:i[f])===e[f]}))?void 0:n.AABBBounds,b=null==(o=null==(l=this._labelMark)?void 0:l.getComponent())?void 0:o.getComponent(),y=null==(a=null==b?void 0:b.find(({attribute:t,type:i})=>{var r;return"text"===i&&(null==(r=t.data)?void 0:r[f])===e[f]},!0))?void 0:a.AABBBounds,v=null!=(s=this._spec.outerLabel)?s:{};if(this._isHorizontal()){let t=null!=(h=v.spaceWidth)?h:5,i=this.getPoints(e),r=(Math.abs(i[0].y-i[1].y)+Math.abs(i[2].y-i[3].y))/2;return"top"===this._spec.outerLabel.position||"bottom"===this._funnelAlign?(p=this._getPolygonCenter(i).y-r/2-t,g=!1!==v.alignLabel?(null==m?void 0:m.y2)+t:p-t,u=this._getPolygonCenter(i).x,p-g<this._minLabelLineWidth&&(g=p-this._minLabelLineWidth)):(p=this._getPolygonCenter(i).y+r/2+t,g=!1!==v.alignLabel?(null==m?void 0:m.y1)-t:p+t,u=this._getPolygonCenter(i).x,g-p<this._minLabelLineWidth&&(g=p+this._minLabelLineWidth)),c=u,{x1:u,x2:c,y1:p,y2:g}}let _=this.getPoints(e),C=(Math.abs(_[0].x-_[1].x)+Math.abs(_[2].x-_[3].x))/2,x=(null==y?void 0:y.x2)-(null==y?void 0:y.x1)||0,w=null!=(d=v.spaceWidth)?d:5;return"right"===this._spec.outerLabel.position||"left"===this._funnelAlign?(u=this._getPolygonCenter(_).x+Math.max(x/2,C/2)+w,c=!1!==v.alignLabel?(null==m?void 0:m.x1)-w:u+w,p=this._getPolygonCenter(_).y,c-u<this._minLabelLineWidth&&(c=u+this._minLabelLineWidth)):(u=this._getPolygonCenter(_).x-Math.max(x/2,C/2)-w,c=!1!==v.alignLabel?(null==m?void 0:m.x2)+w:u-w,p=this._getPolygonCenter(_).y,u-c<this._minLabelLineWidth&&(c=u-this._minLabelLineWidth)),g=p,{x1:u,x2:c,y1:p,y2:g}}_computeMaxSize(){var e;let t=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width;return s$(null!=(e=this._spec.maxSize)?e:"80%",t)}_computeMinSize(){var e;let t=this._isHorizontal()?this.getLayoutRect().height:this.getLayoutRect().width;return s$(null!=(e=this._spec.minSize)?e:0,t)}_isHorizontal(){return"left"===this._funnelOrient||"right"===this._funnelOrient}_isReverse(){return"bottom"===this._funnelOrient||"right"===this._funnelOrient}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._funnelMark]}}Mt.type=z.funnel,Mt.mark=k7,Mt.builtInTheme={funnel:Me},Mt.transformerConstructor=k9;let Mi=()=>{k8(),AJ(),A$(),hp.registerSeries(Mt.type,Mt),hp.registerAnimation("funnel",(e,t)=>Object.assign({appear:"clipIn"===t?void 0:{type:"fadeIn"}},mr)),mo(),ml()};class Mr extends xA{needAxes(){return!1}_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["categoryField","valueField","funnelAlign","funnelOrient","heightRatio","shape","funnel","transform","outerLabel","transformLabel","isTransform","maxSize","minSize","gap","isCone","range","transformRatioText"])}transformSpec(e){super.transformSpec(e),super.transformSeriesSpec(e)}}class Mn extends xB{constructor(){super(...arguments),this.transformerConstructor=Mr,this.type="funnel",this.seriesType=z.funnel}}Mn.type="funnel",Mn.seriesType=z.funnel,Mn.transformerConstructor=Mr;let Ml=e=>({type:"horizontal"===e.direction?"growWidthIn":"growHeightIn",options:()=>"vertical"===e.direction?{orient:"negative"}:{orient:"positive"}}),Mo={type:"fadeIn"};function Ma(e,t="grow"){return!1===t?{}:"fadeIn"===t?Mo:Ml(e)}let Ms=()=>{hp.registerAnimation("linearProgress",(e,t)=>({appear:Ma(e,t),enter:Ma(e),disappear:{duration:mt.disappear.duration}}))};class Mh extends m4{enableByType(e){return"dimension"!==e}}let Md=Object.assign(Object.assign({},bo),{track:{name:"track",type:"rect"},progress:{name:"progress",type:"rect"},group:{name:"group",type:"group"}});class Mu extends bA{constructor(){super(...arguments),this.type=z.linearProgress,this._progressMark=null,this._trackMark=null,this._defaultProgressCustomShape=(e,t,i)=>{var r,n;let l=null==(r=this._spec)?void 0:r.cornerRadius,o=(0,oV.Z)(t.width)?t.width:t.x1-t.x,a=(0,oV.Z)(t.height)?t.height:t.y1-t.y,s=Math.min(0,o),h=Math.max(0,o),d=Math.min(0,a),u=Math.max(0,a);if(l>0){let e=l;if("vertical"===(null==(n=this._spec)?void 0:n.direction)){if(2*(e=Math.min(Math.abs(o/2),l))>Math.abs(a)){let t=Math.acos((e-Math.abs(a)/2)/e);return i.moveTo(s+e,d),i.arc(s+e,d+e,e,1.5*Math.PI,1.5*Math.PI-t,!0),i.arc(s+e,u-e,e,t+Math.PI/2,Math.PI/2,!0),i.lineTo(h-l,u),i.arc(h-e,u-e,e,Math.PI/2,Math.PI/2-t,!0),i.arc(h-e,d+e,e,-Math.PI/2+t,-Math.PI/2,!0),i.lineTo(s+e,d),i.closePath(),i}}else if(2*(e=Math.min(Math.abs(a/2),l))>Math.abs(o)){let t=Math.acos((e-Math.abs(o)/2)/e);return i.moveTo(s,d+e),i.arc(s+e,d+e,e,Math.PI,Math.PI+t),i.arc(h-e,d+e,e,-t,0),i.lineTo(h,u-e),i.arc(h-e,u-e,e,0,t),i.arc(s+e,u-e,e,Math.PI-t,Math.PI),i.closePath(),i}i.moveTo(s,d+e),i.arc(s+e,d+e,e,Math.PI,1.5*Math.PI),i.lineTo(h-e,d),i.arc(h-e,d+e,e,-Math.PI/2,0),i.lineTo(h,u-e),i.arc(h-e,u-e,e,0,Math.PI/2),i.lineTo(s+e,u),i.arc(s+e,u-e,e,Math.PI/2,Math.PI),i.closePath()}else i.moveTo(s,d),i.lineTo(h,d),i.lineTo(h,u),i.lineTo(s,u),i.closePath();return i}}initMark(){this._initTrackMark(),this._initProgressMark()}initMarkStyle(){this._initTrackMarkStyle(),this._initProgressMarkStyle()}_initProgressMark(){var e;return this._progressMark=this._createMark(Mu.mark.progress,{isSeriesMark:!0}),(0,r5.Z)(null==(e=this._spec.progress)?void 0:e.customShape)&&this._progressMark.setMarkConfig({setCustomizedShape:this._defaultProgressCustomShape}),this._progressMark}_initProgressMarkStyle(){var e,t,i,r;let n=this._progressMark;if(n)if("vertical"===this._spec.direction){let i=this._spec.progress||{},r=null!=(e=i.leftPadding)?e:0,l=null!=(t=i.rightPadding)?t:0;this.setMarkStyle(n,{x:e=>{var t,i;return cL(this.dataToPositionX(e),null==(i=null==(t=this._xAxisHelper)?void 0:t.getScale)?void 0:i.call(t,0),!0)-this._spec.bandWidth/2+r},y1:e=>{var t,i;return cL(this.dataToPositionY(e),null==(i=null==(t=this._yAxisHelper)?void 0:t.getScale)?void 0:i.call(t,0))},y:()=>{var e,t,i;let r=null==(e=this._yAxisHelper)?void 0:e.dataToPosition([0],{bandPosition:this._bandPosition});return this._spec.clamp?cL(r,null==(i=null==(t=this._yAxisHelper)?void 0:t.getScale)?void 0:i.call(t,0)):r},width:this._spec.bandWidth-r-l,cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",q.Series)}else{let e=this._spec.progress||{},t=null!=(i=e.topPadding)?i:0,l=null!=(r=e.bottomPadding)?r:0;this.setMarkStyle(n,{x1:e=>{var t,i;return cL(this.dataToPositionX(e),null==(i=null==(t=this._xAxisHelper)?void 0:t.getScale)?void 0:i.call(t,0))},y:e=>{var i,r;return cL(this.dataToPositionY(e),null==(r=null==(i=this._yAxisHelper)?void 0:i.getScale)?void 0:r.call(i,0),!0)-this._spec.bandWidth/2+t},height:this._spec.bandWidth-t-l,x:()=>{var e,t,i;let r=null==(e=this._xAxisHelper)?void 0:e.dataToPosition([0],{bandPosition:this._bandPosition});return this._spec.clamp?cL(r,null==(i=null==(t=this._xAxisHelper)?void 0:t.getScale)?void 0:i.call(t,0)):r},cornerRadius:this._spec.cornerRadius,fill:this.getColorAttribute()},"normal",q.Series)}}_initTrackMark(){return this._trackMark=this._createMark(Mu.mark.track),this._trackMark}_initTrackMarkStyle(){let e=this._trackMark;e&&("vertical"===this._spec.direction?this.setMarkStyle(e,{x:e=>{var t,i;return cL(this.dataToPositionX(e),null==(i=null==(t=this._xAxisHelper)?void 0:t.getScale)?void 0:i.call(t,0),!0)-this._spec.bandWidth/2},y:0,width:this._spec.bandWidth,height:()=>this._scaleY.range()[0],cornerRadius:this._spec.cornerRadius},"normal",q.Series):this.setMarkStyle(e,{x:0,y:e=>{var t,i;return cL(this.dataToPositionY(e),null==(i=null==(t=this._yAxisHelper)?void 0:t.getScale)?void 0:i.call(t,0),!0)-this._spec.bandWidth/2},height:this._spec.bandWidth,width:()=>this._scaleX.range()[1],cornerRadius:this._spec.cornerRadius},"normal",q.Series))}getInteractionTriggers(){let e=[];return this._trackMark&&e.push(this._trackMark),this._progressMark&&e.push(this._progressMark),this._parseInteractionConfig(e)}initAnimation(){var e,t,i,r;let n={direction:this.direction},l=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;this._progressMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("linearProgress"))?void 0:i(n,l),bf("progress",this._spec,this._markAttributeContext))),this._trackMark.setAnimationConfig(bg(null==(r=hp.getAnimationInKey("fadeInOut"))?void 0:r(),bf("track",this._spec,this._markAttributeContext)))}initTooltip(){this._tooltipHelper=new Mh(this),this._progressMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._progressMark),this._trackMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._trackMark)}getActiveMarks(){return[this._progressMark]}}Mu.type=z.linearProgress,Mu.mark=Md,Mu.builtInTheme={linearProgress:{bandWidth:30,progress:{style:{fillOpacity:1}},track:{style:{fill:{type:"palette",key:"linearProgressTrackColor"},fillOpacity:1}}}};let Mc=()=>{wV(),Ms(),ml(),hp.registerSeries(Mu.type,Mu)};class Mp extends xk{needAxes(){return!1}_getDefaultSeriesSpec(e){var t,i;let r=super._getDefaultSeriesSpec(e,["bandWidth","progress","track","clamp"]);return r.direction=null!=(t=e.direction)?t:"horizontal",r.cornerRadius=null!=(i=e.cornerRadius)?i:0,r}transformSpec(e){var t,i;if(super.transformSpec(e),e.axes||(e.axes=[]),"vertical"===e.direction){let i=null,r=null;(null!=(t=e.axes)?t:[]).forEach(e=>{let{orient:t}=e;"left"===t&&(i=e),"bottom"===t&&(r=e)}),i||(i={orient:"left",visible:!1},e.axes.push(i)),r||(r={orient:"bottom",visible:!1},e.axes.push(r)),(0,r5.Z)(r.type)&&(r.type="band"),(0,r5.Z)(i.type)&&(i.type="linear");let n=vT(i,{min:0,max:1});(0,r5.Z)(i.min)&&(i.min=n.min),(0,r5.Z)(i.max)&&(i.max=n.max)}else{let t=null,r=null;(null!=(i=e.axes)?i:[]).forEach(e=>{let{orient:i}=e;"left"===i&&(t=e),"bottom"===i&&(r=e)}),t||(t={type:"band",orient:"left",visible:!1},e.axes.push(t)),r||(r={orient:"bottom",visible:!1},e.axes.push(r)),(0,r5.Z)(r.type)&&(r.type="linear"),(0,r5.Z)(t.type)&&(t.type="band");let n=vT(r,{min:0,max:1});(0,r5.Z)(r.min)&&(r.min=n.min),(0,r5.Z)(r.max)&&(r.max=n.max)}}}class Mg extends xB{constructor(){super(...arguments),this.transformerConstructor=Mp,this.type="linearProgress",this.seriesType=z.linearProgress}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}Mg.type="linearProgress",Mg.seriesType=z.linearProgress,Mg.transformerConstructor=Mp,(0,gH.jB)(Mg,xF);class Mf extends m4{constructor(){super(...arguments),this._getMeasureData=e=>"horizontal"===this.series.getSpec().direction?e[this.series.getSpec().xField[0]]+"-"+e[this.series.getSpec().xField[1]]:e[this.series.getSpec().yField[0]]+"-"+e[this.series.getSpec().yField[1]]}}let Mm=e=>({type:"growCenterIn",options:{direction:"horizontal"===e.direction?"x":"y"}}),Mb={type:"fadeIn"},My=e=>({type:"growCenterOut",options:{direction:"horizontal"===e.direction?"x":"y"}}),Mv=()=>{hp.registerAnimation("rangeColumn",(e,t)=>({appear:"fadeIn"===t?Mb:Mm(e),enter:Mm(e),exit:My(e),disappear:{duration:mt.disappear.duration}}))},M_=Object.assign(Object.assign({},wU),{minLabel:{name:"minLabel",type:"text"},maxLabel:{name:"maxLabel",type:"text"}});class MC extends wX{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(e){var t;"bothEnd"!==(null==(t=e.label)?void 0:t.position)&&this._addMarkLabelSpec(e,"bar")}}class Mx extends wY{constructor(){super(...arguments),this.type=z.rangeColumn,this._barMarkType="rect",this._barName=z.bar,this.transformerConstructor=MC}initMark(){var e,t,i,r,n,l,o,a;this._initBarBackgroundMark();let s=null==(e=this._spec.label)?void 0:e.position;this._barMark=this._createMark(Mx.mark.bar,{groupKey:this._seriesField,isSeriesMark:!0},{morph:by(this._spec,Mx.mark.bar.name),morphElementKey:this.getDimensionField()[0]}),!1!==(null==(t=this._spec.label)?void 0:t.visible)&&"bothEnd"===s&&(!1!==(null==(r=null==(i=this._spec.label)?void 0:i.minLabel)?void 0:r.visible)&&(this._minLabelMark=this._createMark(Mx.mark.minLabel,{markSpec:null==(n=this._spec.label)?void 0:n.minLabel})),!1!==(null==(o=null==(l=this._spec.label)?void 0:l.maxLabel)?void 0:o.visible)&&(this._maxLabelMark=this._createMark(Mx.mark.maxLabel,{markSpec:null==(a=this._spec.label)?void 0:a.maxLabel})))}initMarkStyle(){var e,t;super.initMarkStyle(),this._initLabelMarkPos(this._minLabelMark,null==(e=this._spec.label)?void 0:e.minLabel,0,"end"),this._initLabelMarkPos(this._maxLabelMark,null==(t=this._spec.label)?void 0:t.maxLabel,1,"start")}_initLabelMarkPos(e,t,i,r){var n,l,o,a,s,h,d,u,c;if(e){this.setMarkStyle(e,{fill:null!=(l=null==(n=null==t?void 0:t.style)?void 0:n.fill)?l:this.getColorAttribute(),text:e=>{let r="horizontal"===this._spec.direction?e[this._spec.xField[i]]:e[this._spec.yField[i]];return(null==t?void 0:t.formatMethod)?t.formatMethod(r,e):r}});let p=null!=(o=null==t?void 0:t.position)?o:r,g=null!=(a=null==t?void 0:t.offset)?a:"vertical"===this._direction?-20:-25;s=e=>this._barMark.getAttribute("x",e),h=e=>"vertical"===this._direction?this._barMark.getAttribute("x",e)+this._barMark.getAttribute("width",e):this._barMark.getAttribute("x1",e),d=e=>this._barMark.getAttribute("y",e),u=e=>"vertical"===this._direction?this._barMark.getAttribute("y1",e):this._barMark.getAttribute("y",e)+this._barMark.getAttribute("height",e),c=()=>this._direction,this.setMarkStyle(e,{textAlign:e=>{if("vertical"===c())return"center";let t=s(e),i=h(e);if("middle"===p)return"center";if(t>=i){if("start"===p)return"left";if("end"===p)return"right";if("outside"===p)return"left"}else{if("start"===p)return"right";if("end"===p)return"left";if("outside"===p)return"right"}return"center"},textBaseline:e=>{if("horizontal"===c())return"middle";let t=d(e),i=u(e);if("middle"===p)return"middle";if(i>=t){if("start"===p)return"bottom";if("end"===p)return"top";if("outside"===p)return"bottom"}else{if("start"===p)return"top";if("end"===p)return"bottom";if("outside"===p)return"top"}return"middle"}}),this.setMarkStyle(e,{x:e=>{let t=c(),i=s(e),r=h(e);if("vertical"===t||"middle"===p)return(i+r)/2;if(i>=r){if("start"===p)return r+g;if("end"===p)return i-g;if("outside"===p)return i+g}else{if("start"===p)return r-g;if("end"===p)return i+g;if("outside"===p)return i-g}return(i+r)/2},y:e=>{let t=c(),i=d(e),r=u(e);if("horizontal"===t||"middle"===p)return(i+r)/2;if(i>=r){if("start"===p)return r+g;if("end"===p)return i-g;if("outside"===p)return i+g}else{if("start"===p)return r-g;if("end"===p)return i+g;if("outside"===p)return i-g}return(i+r)/2}},"normal",q.Series)}}initLabelMarkStyle(e){e&&(this.setMarkStyle(e,{text:e=>{let t,i;return"horizontal"===this._spec.direction?(t=e[this._spec.xField[0]],i=e[this._spec.xField[1]]):(t=e[this._spec.yField[0]],i=e[this._spec.yField[1]]),t+"-"+i},z:this._fieldZ?this.dataToPositionZ.bind(this):null}),this._labelMark=e)}_dataToPosX(e){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.xField[0]),{bandPosition:this._bandPosition})}_dataToPosX1(e){return this._xAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.xField[1]),{bandPosition:this._bandPosition})}_dataToPosY(e){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.yField[0]),{bandPosition:this._bandPosition})}_dataToPosY1(e){return this._yAxisHelper.dataToPosition(this.getDatumPositionValues(e,this._spec.yField[1]),{bandPosition:this._bandPosition})}initAnimation(){var e,t,i,r,n;let l=bS(this),o=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;this._barMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("rangeColumn"))?void 0:i({direction:this.direction},o),bf("bar",this._spec,this._markAttributeContext),l)),this._minLabelMark&&this._minLabelMark.setAnimationConfig(bg(null==(r=hp.getAnimationInKey("fadeInOut"))?void 0:r(),bf("label",this._spec,this._markAttributeContext),l)),this._maxLabelMark&&this._maxLabelMark.setAnimationConfig(bg(null==(n=hp.getAnimationInKey("fadeInOut"))?void 0:n(),bf("label",this._spec,this._markAttributeContext),l))}initTooltip(){this._tooltipHelper=new Mf(this),this._barMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._barMark),this._minLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._minLabelMark),this._maxLabelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._maxLabelMark),this._labelMark&&this._tooltipHelper.ignoreTriggerSet.mark.add(this._labelMark)}}Mx.type=z.rangeColumn,Mx.mark=M_,Mx.builtInTheme={rangeColumn:{label:{visible:!1,offset:5,position:"inside",style:{lineWidth:2,fill:{type:"palette",key:"axisMarkerFontColor"}},minLabel:{position:"end"},maxLabel:{position:"start"}}}},Mx.transformerConstructor=MC;let Mw=()=>{wV(),AJ(),Mv(),ml(),C1(),xa(),hp.registerSeries(Mx.type,Mx)};class MS extends xk{_getDefaultSeriesSpec(e){var t,i;let r=super._getDefaultSeriesSpec(e,["barWidth","barMaxWidth","barMinWidth","barGapInGroup","barBackground","barMinHeight","stackCornerRadius","bar"]);return"horizontal"===e.direction?r.xField=null!=(t=e.xField)?t:[e.minField,e.maxField]:r.yField=null!=(i=e.yField)?i:[e.minField,e.maxField],r}transformSpec(e){super.transformSpec(e),ci(e)}}class MA extends xB{constructor(){super(...arguments),this.transformerConstructor=MS,this.type="rangeColumn",this.seriesType=z.rangeColumn}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}MA.type="rangeColumn",MA.seriesType=z.rangeColumn,MA.transformerConstructor=MS;let Mk=(e,t)=>Math.max(0,Math.min(1,(e-t[0])/(t[1]-t[0]||1))),MM=e=>{let t=e.filter(e=>e.context.diffState===J.update),i=(0,ag.iH)(t.map(e=>{var t,i;return null==(i=null==(t=null==e?void 0:e.context)?void 0:t.data)?void 0:i[0].depth}));return t.filter(e=>{var t,r;return(null==(r=null==(t=null==e?void 0:e.context)?void 0:t.data)?void 0:r[0].depth)===i})},MT=(e,t,i)=>(0,d$.Z)(e)?[t,i]:[(0,ag.iH)(e.map(e=>+e.getFinalAttribute().startAngle)),(0,ag.CE)(e.map(e=>+e.getFinalAttribute().endAngle))],MR=e=>({channel:{startAngle:{from:(t,i)=>{let{startAngle:r,endAngle:n}=e.animationInfo(),l=MT(MM(i.parent.children),r,n);return Mk(i.getFinalAttribute().startAngle,l)*(n-r)+r},to:(e,t)=>t.getFinalAttribute().startAngle},endAngle:{from:(t,i)=>{let{startAngle:r,endAngle:n}=e.animationInfo(),l=MT(MM(i.parent.children),r,n);return Mk(i.getFinalAttribute().endAngle,l)*(n-r)+r},to:(e,t)=>t.getFinalAttribute().endAngle},outerRadius:{from:(e,t)=>t.getFinalAttribute().innerRadius,to:(e,t)=>t.getFinalAttribute().outerRadius},innerRadius:{from:(e,t)=>t.getFinalAttribute().innerRadius,to:(e,t)=>t.getFinalAttribute().innerRadius}}}),ME=e=>[(0,ag.iH)(e.map(e=>+e.getFinalAttribute().startAngle)),(0,ag.CE)(e.map(e=>+e.getFinalAttribute().endAngle))],MP=e=>({channel:{startAngle:{from:(e,t)=>t.getFinalAttribute().startAngle,to:(t,i)=>{let{startAngle:r,endAngle:n}=e.animationInfo(),l=ME(MM(i.parent.children));return Mk(i.getFinalAttribute().startAngle,l)*(n-r)+r}},endAngle:{from:(e,t)=>t.getFinalAttribute().endAngle,to:(t,i)=>{let{startAngle:r,endAngle:n}=e.animationInfo(),l=ME(MM(i.parent.children));return Mk(i.getFinalAttribute().endAngle,l)*(n-r)+r}},outerRadius:{from:(e,t)=>t.getFinalAttribute().outerRadius,to:()=>e.animationInfo().innerRadius},innerRadius:{from:(e,t)=>t.getFinalAttribute().innerRadius,to:()=>e.animationInfo().innerRadius}}}),MB=(e,t)=>{switch(t){case"fadeIn":return{type:"fadeIn"};case"growAngle":return{type:"growAngleIn"};default:return{type:"growRadiusIn"}}},MI=()=>{hp.registerAnimation("sunburst",(e,t)=>({appear:MB(e,t),enter:MR(e),exit:MP(e),disappear:{duration:mt.disappear.duration}}))};var ML=i(93364);let MF=(e,t={})=>{if(!e)return[];let i=[];return(0,ML.bp)(e,i,t),i};var MH=i(31563);let MO=(e,t)=>{if(!e)return e;let i=t(),{width:r,height:n}=i;return new MH.p(i).layout(e,{width:r,height:n})};class MD extends m4{constructor(){super(...arguments),this.markTooltipKeyCallback=e=>null==e?void 0:e[this.series.getDimensionField()[0]]}}let Mz=(e,t,i="key",r="children")=>{for(let n=0;n<e.length;n++){let l=e[n];if(l[i]===t)return l;if(l[r]){let e=Mz(l[r],t,i,r);if(e)return e}}return null},MW=(e,t,i="key",r="children")=>{for(let n=0;n<e.length;n++){let l=e[n];if(l[r])for(let e=0;e<l[r].length;e++){let n=l[r][e];if(n[i]===t)return l;let o=MW([n],t,i,r);if(o)return o}}return null},MZ=(e,t,i="key",r="children")=>{let n=[],l=(e,o)=>{for(let a of e){if(a[i]===t)return n.push(...o,a[i].toString()),!0;if(a[r]){let e=l(a[r],[...o,a[i]]);if(!0===e)return e}}return!1};return l(e,[]),n};(eM=eD||(eD={})).DrillDown="drillDown",eM.DrillUp="drillUp";let MN=(e,t)=>{let i=t.info(),r=t.keyField(),n=null==i?void 0:i.key;if((0,r5.Z)(n))return e;if(i.type===eD.DrillDown){let t=Mz(e,n,r,"children");return(0,ag.IX)(t)}if(i.type===eD.DrillUp){let t=MW(e,n,r,"children");if(t)return(0,ag.IX)(t)}return e};class M${_getDrillTriggerEvent(e){var t;let{mode:i}=this._drillParams;return null==(t=Sf(i))?void 0:t[e]}_hideTooltip(){let e=this.getChart().getComponentsByType(sc.tooltip)[0];e&&e.hideTooltip()}initDrillable(e){this._drillParams=e}initDrillableData(e){let{getRawData:t}=this._drillParams;hK(e,"drillFilter",MN),t().transform({type:"drillFilter",options:{info:()=>this._drillInfo,keyField:()=>this._drillParams.drillField()}})}bindDrillEvent(){let{event:e,getRawData:t,drillField:i}=this._drillParams,r=i();this._getDrillTriggerEvent("start")&&e.on(this._getDrillTriggerEvent("start"),e=>{var i,n,l;if((0,r5.Z)(e.datum)||(0,r5.Z)(null==(i=e.datum)?void 0:i[r]))return void this.drillUp();this._hideTooltip();let o=e.datum[r],a=null!=(l=null==(n=this._drillInfo)?void 0:n.path)?l:[],s=MZ(t().rawData,o,r,"children");a[a.length-1]===s[s.length-1]?this.drillUp():this.drillDown(s)})}drillDown(e=[]){let{getRawData:t,event:i}=this._drillParams;if(!(0,ri.Z)(e)||(0,d$.Z)(e))return e;let r=e[e.length-1];return this._drillInfo={key:r,path:e,type:eD.DrillDown},t().reRunAllTransform(),i.emit(N.drill,{value:{path:e,type:eD.DrillDown},model:this}),e}drillUp(){var e,t;let{getRawData:i,event:r}=this._drillParams,n=null!=(t=null==(e=this._drillInfo)?void 0:e.path)?t:[];if(!(0,ri.Z)(n)||(0,d$.Z)(n))return n;let l=n.pop();return this._drillInfo={key:l,path:n,type:eD.DrillUp},i().reRunAllTransform(),r.emit(N.drill,{value:{path:n,type:eD.DrillUp},model:this}),n}}let Mj=Object.assign(Object.assign({},bo),{sunburst:{name:"sunburst",type:"arc"}}),MG=(e,t,i)=>(e.push({key:t,operations:["values"]}),e.push({key:i,operations:["max","min"]}),e.push({key:m9,operations:["max","min","values"]}),e.push({key:be,operations:["values"]}),e);class MV extends SA{constructor(){super(...arguments),this.type=z.sunburst}setCategoryField(e){return this._categoryField=e,this._categoryField}getCategoryField(){return this._categoryField}setValueField(e){return this._valueField=e,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!=(e=this._spec.seriesField)?e:be),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e;return null!=(e=this._spec.drillField)?e:dm},getRawData:()=>this.getRawData()}),this._startAngle=(0,t9.M4)(this._spec.startAngle),this._endAngle=(0,t9.M4)(this._spec.endAngle),this._centerX=this._spec.centerX,this._centerY=this._spec.centerY,this._offsetX=this._spec.offsetX,this._offsetY=this._spec.offsetY,this.__innerRadius=this._spec.innerRadius,this.__outerRadius=this._spec.outerRadius,this._gap=this._spec.gap,this._labelLayout=this._spec.labelLayout,this._sunburst=this._spec.sunburst,this._label=this._spec.label,this._labelAutoVisible=this._spec.labelAutoVisible}initData(){super.initData();let e=this.getRawData();e&&(this._spec.drill&&this.initDrillableData(this._dataSet),hK(this._dataSet,"sunburstLayout",MO),hK(this._dataSet,"flatten",MF),e.transform({type:"sunburstLayout",options:()=>{let{innerRadius:e,outerRadius:t,gap:i,label:r}=this._computeLevel();return{nodeKey:this._categoryField,width:this.getLayoutRect().width,height:this.getLayoutRect().height,center:[(0,oV.Z)(this._centerX)?this._centerX:this.getLayoutRect().width/2,(0,oV.Z)(this._centerY)?this._centerY:this.getLayoutRect().height/2],startAngle:this._startAngle,endAngle:this._endAngle,innerRadius:e,outerRadius:t,gapRadius:i,label:r}}}),e.transform({type:"flatten",options:{callback:e=>{if(e.datum){let t=e.datum[e.depth];return Object.assign(Object.assign({},e),t)}return e}}}))}getStatisticFields(){return MG(super.getStatisticFields(),this._categoryField,this._valueField)}_addDataIndexAndKey(){let e=this.getRawData();(0,r5.Z)(null==e?void 0:e.dataSet)||(hK(e.dataSet,"addVChartProperty",mG),e.transform({type:"addVChartProperty",options:{beforeCall:bn.bind(this),call:bl}}))}initMark(){this._initArcMark(),this._initLabelMark()}initMarkStyle(){this._initArcMarkStyle(),this._initLabelMarkStyle()}_initArcMark(){if(!1===this._sunburst.visible)return;let e=this._createMark(MV.mark.sunburst,{isSeriesMark:!0});this._sunburstMark=e}_initArcMarkStyle(){(0,r5.Z)(this._sunburstMark)||this.setMarkStyle(this._sunburstMark,{x:e=>e.x+((0,oV.Z)(this._offsetX)?this._offsetX:0),y:e=>e.y+((0,oV.Z)(this._offsetY)?this._offsetY:0),outerRadius:e=>e.outerRadius,innerRadius:e=>e.innerRadius,startAngle:e=>e.startAngle,endAngle:e=>e.endAngle,fill:this.getColorAttribute()},Q.STATE_NORMAL,q.Series)}_initLabelMark(){if(!0!==this._label.visible)return;let e=this._createMark(MV.mark.label,{isSeriesMark:!1});this._labelMark=e}_initLabelMarkStyle(){(0,r5.Z)(this._labelMark)||this.setMarkStyle(this._labelMark,{visible:e=>{var t;let i=this._labelAutoVisible;return(0,r9.Z)(i)&&!0===i.enable?(e.endAngle-e.startAngle)*(e.outerRadius-e.innerRadius)>(null!=(t=null==i?void 0:i.circumference)?t:10):this._spec.label.visible},x:e=>{var t;return(null==(t=e.label)?void 0:t.x)+((0,oV.Z)(this._offsetX)?this._offsetX:0)},y:e=>{var t;return(null==(t=e.label)?void 0:t.y)+((0,oV.Z)(this._offsetY)?this._offsetY:0)},textBaseline:e=>{var t;return null==(t=e.label)?void 0:t.textBaseline},textAlign:e=>{var t;return null==(t=e.label)?void 0:t.textAlign},angle:e=>{var t,i;return null!=(i=null==(t=e.label)?void 0:t.angle)?i:0},fontSize:10,text:e=>e.name},Q.STATE_NORMAL,q.Series)}initTooltip(){this._tooltipHelper=new MD(this),this._sunburstMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._sunburstMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var e,t;let i={animationInfo:()=>({innerRadius:this._computeRadius((0,ag.IX)(this.__innerRadius))[0],outerRadius:this._computeRadius((0,ag.IX)(this.__outerRadius))[0],startAngle:(0,ag.IX)(this._startAngle)[0],endAngle:(0,ag.IX)(this._endAngle)[0]})},r=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;this.getMarksInType("arc").forEach(e=>{var t;e.setAnimationConfig(bg(null==(t=hp.getAnimationInKey("sunburst"))?void 0:t(i,r),bf(e.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(e=>{var t;e.setAnimationConfig(bg(null==(t=hp.getAnimationInKey("fadeInOut"))?void 0:t(),bf(e.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(){super.onLayoutEnd(),this._rawData.reRunAllTransform()}_computeRadius(e){return(0,ri.Z)(e)?e.map(e=>this._computeLayoutRadius()*e):this._computeLayoutRadius()*e}_computeLevel(){return{innerRadius:this._computeRadius(this.__innerRadius),outerRadius:this._computeRadius(this.__outerRadius),gap:this._gap,label:this._labelLayout}}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}_noAnimationDataKey(e,t){}getActiveMarks(){return[this._sunburstMark]}getMarkData(e){return(null==e?void 0:e.datum)?e.datum[e.datum.length-1]:e}}MV.type=z.sunburst,MV.mark=Mj,MV.builtInTheme={sunburst:{innerRadius:0,outerRadius:1,startAngle:-90,endAngle:270,gap:0,labelLayout:{align:"center",offset:0,rotate:"radial"},sunburst:{style:{lineWidth:1,stroke:{type:"palette",key:"backgroundColor"},fillOpacity:1,cursor:"pointer"}},label:{visible:!0,style:{cursor:"pointer",fill:{type:"palette",key:"primaryFontColor"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}}},(0,gH.jB)(MV,M$);let MU=()=>{hp.registerSeries(MV.type,MV),S$(),AJ(),ml(),MI()};class MK extends xA{_getDefaultSeriesSpec(e){let t=(0,oV.Z)(e.startAngle)?e.startAngle:-90,i=(0,oV.Z)(e.endAngle)?e.endAngle:t+(0,t9.Dt)(2*Math.PI),r=super._getDefaultSeriesSpec(e,["categoryField","valueField","centerX","centerY","offsetX","offsetY","innerRadius","outerRadius","gap","labelLayout","label","labelAutoVisible","drill","drillField"]);return r.startAngle=t,r.endAngle=i,r}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class MX extends xB{constructor(){super(...arguments),this.transformerConstructor=MK,this.type="sunburst",this.seriesType=z.sunburst}}MX.type="sunburst",MX.seriesType=z.sunburst,MX.transformerConstructor=MK;var MY=i(88131);let Mq=(e,t)=>{if(!e)return e;let i=t(),{width:r,height:n}=i;return 0===r||0===n?e:new MY.l(i).layout(e,{width:r,height:n})};class MJ extends m4{constructor(){super(...arguments),this.markTooltipKeyCallback=e=>null==e?void 0:e[this.series.getDimensionField()[0]]}}let MQ=e=>"fadeIn"===e?{type:"fadeIn"}:{type:"growRadiusIn"},M0=()=>{hp.registerAnimation("circlePacking",(e,t)=>({appear:MQ(t),enter:{type:"growRadiusIn"},exit:{type:"growRadiusOut"},disappear:{duration:mt.disappear.duration}}))},M1=Object.assign(Object.assign({},bo),{circlePacking:{name:"circlePacking",type:"arc"}});class M2 extends bA{constructor(){super(...arguments),this.type=z.circlePacking}setCategoryField(e){return this._categoryField=e,this._categoryField}getCategoryField(){return this._categoryField}setValueField(e){return this._valueField=e,this._valueField}getValueField(){return this._valueField}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!=(e=this._spec.seriesField)?e:be),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e;return null!=(e=this._spec.drillField)?e:dm},getRawData:()=>this.getRawData()}),this._circlePacking=this._spec.circlePacking,this._label=this._spec.label,this._layoutPadding=this._spec.layoutPadding}initData(){super.initData();let e=this.getRawData();(0,r5.Z)(e)||(this._spec.drill&&this.initDrillableData(this._dataSet),hK(this._dataSet,"circlePackingLayout",Mq),hK(this._dataSet,"flatten",MF),e.transform({type:"circlePackingLayout",options:()=>({nodeKey:this._categoryField,padding:this._layoutPadding,includeRoot:!1,width:this.getLayoutRect().width||1,height:this.getLayoutRect().height||1})}),e.transform({type:"flatten",options:{callback:e=>{if(e.datum){let t=e.datum[e.depth];return Object.assign(Object.assign({},e),t)}return e}}}))}_addDataIndexAndKey(){let e=this.getRawData();(0,r5.Z)(null==e?void 0:e.dataSet)||(hK(e.dataSet,"addVChartProperty",mG),e.transform({type:"addVChartProperty",options:{beforeCall:bn.bind(this),call:bl}}))}initMark(){this._initCirclePackingMark(),this._initLabelMark()}initMarkStyle(){this._initCirclePackingMarkStyle(),this._initLabelMarkStyle()}_initCirclePackingMark(){var e;if(!1===(null==(e=this._circlePacking)?void 0:e.visible))return;let t=this._createMark(M2.mark.circlePacking,{isSeriesMark:!0});this._circlePackingMark=t}_initCirclePackingMarkStyle(){(0,r5.Z)(this._circlePackingMark)||this.setMarkStyle(this._circlePackingMark,{x:e=>e.x,y:e=>e.y,outerRadius:e=>e.radius,innerRadius:0,startAngle:0,endAngle:2*Math.PI,fill:this.getColorAttribute(),zIndex:e=>e.depth},Q.STATE_NORMAL,q.Series)}_initLabelMark(){var e;if(!1===(null==(e=this._label)?void 0:e.visible))return;let t=this._createMark(M2.mark.label,{isSeriesMark:!1});this._labelMark=t}_initLabelMarkStyle(){(0,r5.Z)(this._labelMark)||this.setMarkStyle(this._labelMark,{x:e=>e.x,y:e=>e.y,text:e=>e.key,cursor:"pointer"},Q.STATE_NORMAL,q.Series)}getStatisticFields(){return MG(super.getStatisticFields(),this._categoryField,this._valueField)}initTooltip(){this._tooltipHelper=new MJ(this),this._circlePackingMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._circlePackingMark),this._labelMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._labelMark)}initAnimation(){var e;let t=null==(e=this._spec.animationAppear)?void 0:e.preset;this.getMarksInType("arc").forEach(e=>{var i;e.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("circlePacking"))?void 0:i(void 0,t),bf(e.name,this._spec,this._markAttributeContext)))}),this.getMarksInType("text").forEach(e=>{var t;e.setAnimationConfig(bg(null==(t=hp.getAnimationInKey("scaleInOut"))?void 0:t(),bf(e.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.drill&&this.bindDrillEvent()}onLayoutEnd(){super.onLayoutEnd(),this._rawData.reRunAllTransform()}_noAnimationDataKey(e,t){}getActiveMarks(){return[this._circlePackingMark]}getMarkData(e){return(null==e?void 0:e.datum)?e.datum[e.datum.length-1]:e}}M2.type=z.circlePacking,M2.mark=M1,M2.builtInTheme={circlePacking:{layoutPadding:5,circlePacking:{visible:!0,style:{cursor:"pointer",lineWidth:1,stroke:{type:"palette",key:"backgroundColor"}}},label:{visible:!0,style:{cursor:"pointer",fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}}}},(0,gH.jB)(M2,M$);let M3=()=>{hp.registerSeries(M2.type,M2),S$(),AJ(),mn(),M0()};class M4 extends xA{_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["categoryField","valueField","layoutPadding","circlePacking","drill","drillField"])}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class M5 extends xB{constructor(){super(...arguments),this.transformerConstructor=M4,this.type="circlePacking",this.seriesType=z.circlePacking}}M5.type="circlePacking",M5.seriesType=z.circlePacking,M5.transformerConstructor=M4;let M6=(e,t)=>{let i=t.fields;return((0,nr.Z)(i)&&(i=i()),(null==i?void 0:i.length)&&(null==e?void 0:e.length)&&e[0].latestData)?m6([{latestData:MF(e[0].latestData)}],t):{}};class M8 extends m4{constructor(){super(...arguments),this.markTooltipKeyCallback=e=>{var t,i;return null==(i=null==(t=this.series)?void 0:t.getMarkData(e))?void 0:i[this.series.getDimensionField()[0]]},this.markTooltipValueCallback=e=>{var t,i;let{measureFields:r}=this._seriesCacheInfo,n=null==(t=this.series)?void 0:t.getMarkData(e);if(r[0]&&n)return null!=(i=n[r[0]])?i:e.value},this.dimensionTooltipTitleCallback=e=>{var t;let{dimensionFields:i}=this._seriesCacheInfo,r=null==(t=this.series)?void 0:t.getMarkData(e);if(i[0]&&r)return r[i[0]]}}get defaultShapeType(){return"square"}}let M7=Object.assign(Object.assign({},bo),{nonLeaf:{name:"nonLeaf",type:"rect"},leaf:{name:"leaf",type:"rect"},nonLeafLabel:{name:"nonLeafLabel",type:"text"}}),M9=e=>"fadeIn"===e?{type:"fadeIn"}:{type:"growCenterIn"},Te=()=>{hp.registerAnimation("treemap",(e,t)=>({appear:M9(t),enter:{type:"growCenterIn"},exit:{type:"growCenterOut"},disappear:{duration:mt.disappear.duration}}))};class Tt extends bC{_transformLabelSpec(e){this._addMarkLabelSpec(e,"nonLeaf","nonLeafLabel","initNonLeafLabelMarkStyle"),this._addMarkLabelSpec(e,"leaf")}}let Ti=()=>{hp.registerGrammarTransform("filter",{transform:(e,t)=>null==t?void 0:t.filter(e.callback)})},Tr=()=>{hp.registerGrammarTransform("map",{transform:(e,t)=>(null==t||t.forEach((t,i)=>{e.callback(t)}),t)})};var Tn=i(79478);let Tl=(e,t)=>{if(t.getViewBox()){let i=new Tn.j(t).layout(e,t.getViewBox()),r=[];return(0,ML.bp)(i,r,{maxDepth:null==t?void 0:t.maxDepth}),r.forEach((e,i)=>{e&&[be,"name"].forEach(i=>{e[i]=e.datum[e.depth][t.nameField]})}),r}return[]};class To extends bA{constructor(){super(...arguments),this.type=z.treemap,this.transformerConstructor=Tt,this._categoryField="name",this._valueField="value",this._viewBox=new t4.YZ,this._enableAnimationHook=this.enableMarkAnimation.bind(this),this.isHierarchyData=()=>!0}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!=(e=this._spec.seriesField)?e:be),this._spec.roam&&(this.initZoomable(this.event,this._option.mode),this._matrix=new tQ.y),this._spec.drill&&this.initDrillable({event:this.event,mode:this._option.mode,drillField:()=>{var e,t;return null!=(t=null!=(e=this._spec.drillField)?e:this._categoryField)?t:dm},getRawData:()=>this.getRawData()}),(0,sD.Z)(this._spec.maxDepth)&&(this._maxDepth=this._spec.maxDepth-1)}initData(){var e,t,i,r,n;super.initData(),hK(this._dataSet,"treemap",Tl),null==(e=this._data.getDataView())||e.transform({type:"treemap",options:{nameField:this._categoryField,valueField:this._valueField,getViewBox:()=>this._viewBox.empty()?null:{x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2},maxDepth:this._maxDepth,gapWidth:this._spec.gapWidth,padding:this._spec.nodePadding,splitType:this._spec.splitType,aspectRatio:this._spec.aspectRatio,labelPadding:(null==(t=this._spec.nonLeafLabel)?void 0:t.visible)?null==(i=this._spec.nonLeafLabel)?void 0:i.padding:0,labelPosition:null==(r=this._spec.nonLeafLabel)?void 0:r.position,minVisibleArea:null!=(n=this._spec.minVisibleArea)?n:10,minChildrenVisibleArea:this._spec.minChildrenVisibleArea,minChildrenVisibleSize:this._spec.minChildrenVisibleSize}}),this.getViewData()&&this._spec.drill&&this.initDrillableData(this._dataSet)}_runTreemapTransform(e=!1){this._data.getDataView().reRunAllTransform(),e&&this.getCompiler().renderNextTick()}_addDataIndexAndKey(){var e;(null==(e=this._rawData)?void 0:e.dataSet)&&(hK(this._rawData.dataSet,"addVChartProperty",mG),this._rawData.transform({type:"addVChartProperty",options:{beforeCall:bn.bind(this),call:bl}}))}getRawDataStatisticsByField(e,t){var i;if(this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[e]&&this._rawData){let r=M6([this._rawData],{fields:[{key:e,operations:t?["min","max"]:["values"]}]})[e];this._rawStatisticsCache[e]=(0,ha.Z)(null!=(i=this._rawStatisticsCache[e])?i:{},r)}return this._rawStatisticsCache[e]}_createHierarchyDataStatistics(e,t){hK(this._dataSet,"hierarchyDimensionStatistics",M6),hK(this._dataSet,"flatten",MF);let i=new tf.V(this._dataSet,{name:e});return i.parse(t,{type:"dataview"}),i.transform({type:"hierarchyDimensionStatistics",options:{fields:()=>{let e=this.getStatisticFields();return this._seriesField&&this._seriesField!==this._categoryField&&e.push({key:this._seriesField,operations:["values"]}),e}}},!1),i}getStatisticFields(){return MG(super.getStatisticFields(),this._categoryField,this._valueField)}initMark(){let e=this._createMark(To.mark.nonLeaf,{isSeriesMark:!0});e&&(e.setTransform([{type:"filter",callback:e=>!this._shouldFilterElement(e,"nonLeaf")}]),this._nonLeafMark=e);let t=this._createMark(To.mark.leaf,{isSeriesMark:!0});t&&(t.setTransform([{type:"filter",callback:e=>!this._shouldFilterElement(e,"leaf")}]),this._leafMark=t)}initMarkStyle(){this._initLeafMarkStyle(),this._initNonLeafMarkStyle()}_initLeafMarkStyle(){this._leafMark&&this.setMarkStyle(this._leafMark,{x:e=>e.x0,y:e=>e.y0,x1:e=>e.x1,y1:e=>e.y1,fill:this.getColorAttribute()},Q.STATE_NORMAL,q.Series)}_initNonLeafMarkStyle(){this._nonLeafMark&&this.setMarkStyle(this._nonLeafMark,{x:e=>e.x0,y:e=>e.y0,x1:e=>e.x1,y1:e=>e.y1,fill:this.getColorAttribute()},Q.STATE_NORMAL,q.Series)}_initRichStyleOfLabelMark(e){"rich"===e.getTextType()&&this.setMarkStyle(e,{maxWidth:e=>Math.abs(e.x0-e.x1),maxHeight:e=>Math.abs(e.y0-e.y1),ellipsis:!0},Q.STATE_NORMAL,q.Series)}initLabelMarkStyle(e){e&&(this._labelMark=e,e.setRule("treemap"),this.setMarkStyle(e,{x:e=>(e.x0+e.x1)/2,y:e=>(e.y0+e.y1)/2,text:e=>{var t;return null==(t=e.datum[e.depth])?void 0:t[this.getDimensionField()[0]]},maxLineWidth:e=>e.x1===e.x0?Number.MIN_VALUE:e.x1-e.x0},Q.STATE_NORMAL,q.Series),this._initRichStyleOfLabelMark(e))}initNonLeafLabelMarkStyle(e){e&&(this._nonLeafLabelMark=e,e.setRule("treemap"),this.setMarkStyle(e,{x:e=>e.labelRect?(e.labelRect.x0+e.labelRect.x1)/2:(e.x0+e.x1)/2,y:e=>e.labelRect?(e.labelRect.y0+e.labelRect.y1)/2:(e.y0+e.y1)/2,text:e=>{var t;return null==(t=e.datum[e.depth])?void 0:t[this.getDimensionField()[0]]},maxLineWidth:e=>e.x1===e.x0?Number.MIN_VALUE:e.x1-e.x0},Q.STATE_NORMAL,q.Series),this._initRichStyleOfLabelMark(e))}initAnimation(){this.getMarksInType("rect").forEach(e=>{var t;e.setAnimationConfig(bg(null==(t=hp.getAnimationInKey("treemap"))?void 0:t(),bf(e.name,this._spec,this._markAttributeContext)))})}initEvent(){super.initEvent(),this._spec.roam&&(this.initDragEventOfSeries(this),this.event.on("panmove",e=>{this.handlePan(e)}),this.initZoomEventOfSeries(this),this.event.on("zoom",e=>{this.handleZoom(e)})),this._spec.drill&&this.bindDrillEvent()}_getDataIdKey(){return"key"}initTooltip(){this._tooltipHelper=new M8(this),this._leafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._leafMark),this._nonLeafMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nonLeafMark)}_shouldFilterElement(e,t){let i=e.isLeaf;return"leaf"===t?!i:i}handlePan(e){let{delta:t}=e;if(0===t[0]&&0===t[1])return;this._matrix.reset(),this._matrix.translate(t[0],t[1]);let{a:i,b:r,c:n,d:l,e:o,f:a}=this._matrix;this._matrix.multiply(i,r,n,l,o,a),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}handleZoom(e){let{scale:t,scaleCenter:i}=e;if(1===t)return;this._matrix.reset();let{x:r,y:n}=i;this._matrix.translate(r,n),this._matrix.scale(t,t),this._matrix.translate(-r,-n);let{a:l,b:o,c:a,d:s,e:h,f:d}=this._matrix;this._matrix.multiply(l,o,a,s,h,d),this.disableMarkAnimation(),this.event.on(Z.AFTER_DO_RENDER,this._enableAnimationHook),this._viewBox.transformWithMatrix(this._matrix),this._runTreemapTransform(!0)}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this.getLayoutRect().width,this.getLayoutRect().height),this._runTreemapTransform()}enableMarkAnimation(){this.getMarks().forEach(e=>{}),[this._labelMark,this._nonLeafLabelMark].forEach(e=>{e&&e.getComponent()&&e.getComponent().getProduct().enableAnimation()}),this.event.off(Z.AFTER_DO_RENDER,this._enableAnimationHook)}disableMarkAnimation(){this.getMarks().forEach(e=>{}),[this._labelMark,this._nonLeafLabelMark].forEach(e=>{e&&e.getComponent()&&e.getComponent().getProduct().disableAnimation()})}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._nonLeafMark,this._leafMark]}getMarkData(e){return(null==e?void 0:e.datum)?e.datum[e.datum.length-1]:e}}To.type=z.treemap,To.mark=M7,To.builtInTheme={treemap:{gapWidth:1,nodePadding:[5],nonLeaf:{visible:!1,style:{fillOpacity:.5}},label:{style:{fill:"white",textBaseline:"middle",textAlign:"center",fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"}}},nonLeafLabel:{padding:24,style:{fill:"black",stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},textBaseline:"middle",textAlign:"center"}}}},To.transformerConstructor=Tt,(0,gH.jB)(To,M$),(0,gH.jB)(To,Sb);let Ta=()=>{Ti(),Tr(),wV(),AJ(),Te(),ml(),hp.registerSeries(To.type,To)};class Ts extends xA{_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["categoryField","valueField","aspectRatio","splitType","maxDepth","gapWidth","nodePadding","minVisibleArea","minChildrenVisibleArea","minChildrenVisibleSize","roam","drill","drillField","leaf","nonLeaf","nonLeafLabel"])}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class Th extends xB{constructor(){super(...arguments),this.transformerConstructor=Ts,this.type="treemap",this.seriesType=z.treemap}}Th.type="treemap",Th.seriesType=z.treemap,Th.transformerConstructor=Ts;let Td=`${dg}_waterfall_default_seriesField`,Tu=(e,t)=>{if(!e||0===e.length)return e;let{indexField:i,total:r,groupData:n,calculationMode:l}=t,o=[],{dimensionValues:a,dimensionData:s}=n().latestData,h=Array.from(a[i]);"decrease"===l&&(h=h.reverse());let d={start:0,end:0,positive:0,negative:0,lastIndex:null};return h.forEach((e,i)=>{let n={start:d.end,end:d.end,lastIndex:d.lastIndex,lastEnd:d.end,index:e,isTotal:!1,positive:d.end,negative:d.end},l=!0===t.stackInverse?s[e].reverse():s[e];if(null==l||l.forEach((e,t)=>{t===l.length-1?e[dT]=!0:delete e[dT]}),l.length>1){let a=e=>{if(r&&"end"!==r.type){if("field"===r.type||"custom"===r.type)return!!e[r.tagField]}else if(i===h.length-1)return!0;return!1};if(l.some(e=>a(e)))return d=function(e,t,i,r,n,l,o,a,s){i.isTotal=!0;let{valueField:h,startAs:d,endAs:u,total:c}=a,p=[],g=[];if(e.forEach((e,t)=>{s(e)?g.push(Object.assign(Object.assign({},e),{_vchart_waterfall_waterfall_temp:t})):p.push(e)}),g.length===e.length){let s=Tc([e[0]],t,i,r,n,l,o,a);return g.forEach(t=>{t[d]=e[0][d],t[u]=e[0][u],t[h]=e[0][h]}),s}let{start:f,end:m}=Tp(g[0],i,r,n,c);i.start=f,i.end=m;let b=f,y=f,v=m-f,_=p.reduce((e,t)=>(0,t0.f2)(e,+t[h]),v);return g.forEach(e=>{let t={[d]:f,[u]:m,[h]:_};p.splice(e._vchart_waterfall_waterfall_temp,0,t)}),p.forEach(e=>{let t=+e[h];t>=0?(e[d]=+b,b=(0,t0.hY)(b,t)):(e[d]=+y,y=(0,t0.hY)(y,t)),e[u]=(0,t0.hY)(e[d],t),f=(0,t0.hY)(f,t),v=(0,t0.f2)(v,t)}),g.forEach(t=>{let i=t._vchart_waterfall_waterfall_temp;t=p[i];let r=e[i];r[d]=t[d],r[u]=t[u],r[h]=t[h]}),Object.assign(Object.assign({},i),{lastIndex:t})}(l,e,n,o,d,h,i,t,a),void o.push(n)}d=Tc(l,e,n,o,d,h,i,t),o.push(n)}),o};function Tc(e,t,i,r,n,l,o,a){let{valueField:s,startAs:h,endAs:d,total:u,seriesField:c,seriesFieldName:p}=a;return e.forEach(e=>{let t=!1;if(u&&"end"!==u.type){if(("field"===u.type||"custom"===u.type)&&e[u.tagField]){t=!0;let{start:l,end:o}=Tp(e,i,r,n,u);e[h]=l,e[d]=o,e[s]=o-l,i.start=l,i.end=o}}else o===l.length-1&&(i.start=0,e[h]=i.start,e[d]=i.end,t=!0);if(!t){let t=+e[s];t>=0?(e[h]=+i.positive,i.positive=(0,t0.hY)(i.positive,t)):(e[h]=+i.negative,i.negative=(0,t0.hY)(i.negative,t)),e[d]=(0,t0.hY)(e[h],t),i.end=(0,t0.hY)(i.end,t)}i.isTotal=t,((0,r5.Z)(c)||c===Td)&&(e[Td]=t?p.total:+e[s]>=0?p.increase:p.decrease)}),Object.assign(Object.assign({},i),{lastIndex:t})}function Tp(e,t,i,r,n){var l,o,a,s,h;let d,u;return n&&"end"!==n.type?"field"===n.type||"custom"===n.type?"custom"===n.type?(l=e,o=r,n.product(l,o)):n.collectCountField&&!(0,r5.Z)(e[n.collectCountField])?function(e,t,i,r){let n=0,l=i.end,o=t.length-e[r.collectCountField],a=t.length-1;return o<0?s1("total.collectCountField error"):n=t[o].start,a<0?s1("total.collectCountField error"):l=t[a].end,{start:n,end:l}}(e,i,t,n):(a=e,s=t,h=n,d=0,u=s.end,h.startField&&!(0,r5.Z)(a[h.startField])&&(d=+a[h.startField]),h.valueField&&!(0,r5.Z)(a[h.valueField])&&(u=(0,t0.hY)(d,+a[h.valueField])),{start:d,end:u}):{start:0,end:0}:{start:0,end:t.end}}let Tg=(e,t)=>{if(!e)return e;let{indexField:i,valueField:r,total:n,seriesField:l,calculationMode:o}=t,a={[i]:(null==n?void 0:n.text)||"total",[r]:e.reduce((e,t)=>(0,t0.hY)(e,+t[r]),0)};return l&&(a[l]="total"),"decrease"===o?e.unshift(a):e.push(a),e},Tf={type:"fadeIn"},Tm={type:"growCenterIn"},Tb=()=>{hp.registerAnimation("waterfall",(e,t)=>({appear:function(e,t){switch(t){case"fadeIn":return Tf;case"scaleIn":return Tm;default:return wO(e,!1)}}(e,t),enter:wO(e,!1),exit:wD(e,!1),disappear:{duration:mt.disappear.duration}}))},Ty=Object.assign(Object.assign({},wU),{leaderLine:{name:"leaderLine",type:"rule"},stackLabel:{name:"stackLabel",type:"text"}}),Tv=(e,t)=>{if(!t.fields)return e;let i={};return{dimensionValues:i,dimensionData:function e(t,i,r){var n,l;if(0===i.length)return t;let o=i[0],a=i.slice(1);r[o]=new Set;let s=function(e,t,i){let r={};return e.forEach(e=>{let n=e[t];r[n]||(r[n]=[],i.add(n)),r[n].push(e)}),r}(t,o,r[o]);return a.length?(n=s,l=(t,i)=>e(t,a,r),Object.keys(n).reduce((e,t)=>(e[t]=l(n[t],t),e),{})):s}(e.map(e=>e.latestData).flat(),t.fields,i)}};class T_{get fields(){return this._fields}get groupData(){return this._groupData}constructor(e){this._fields=[],this._fields=e}initData(e,t){let i=e.name,r=new tf.V(t instanceof tp.q?t:e.dataSet);r.name=i,r.parse([e],{type:"dataview"}),hK(t,"dimensionTree",Tv),r.transform({type:"dimensionTree",options:{fields:this._fields}},!1),r.target.addListener("change",this.groupDataUpdate.bind(this)),this._groupData=r}groupDataUpdate(){}getGroupValueInField(e){var t,i,r;let n=null==(r=null==(i=null==(t=this.groupData)?void 0:t.latestData)?void 0:i.dimensionValues)?void 0:r[e];return n?Array.from(n):[]}}class TC extends wX{constructor(){super(...arguments),this._supportStack=!1}_transformLabelSpec(e){this._addMarkLabelSpec(e,"bar"),this._addMarkLabelSpec(e,"bar","stackLabel","initStackLabelMarkStyle")}}let Tx={rect:Tk,symbol:TA,arc:TM,point:function(e){let{labelSpec:t}=e;return{position:"center",overlap:!1!==t.overlap&&{clampForce:!1,avoidBaseMark:!1}}},"line-data":function(e){let t=TA(e);return(0,ni.Z)(t.overlap)||(t.overlap.avoidBaseMark=!1,t.overlap.clampForce=!1),t},stackLabel:TT,line:TR,area:TR,rect3d:Tk,arc3d:TM,treemap:function(e){return{customLayoutFunc:(e,t)=>t,overlap:!1}},venn:function(e){return{customLayoutFunc:(e,t)=>t,smartInvert:!0}},boxPlot:function(e){return{customLayoutFunc:(t,i,r)=>{for(let n=0;n<i.length;n++){let l=i[n],o=t[n];if(!l||!o)continue;let a=r(o),s=a.getSubGraphic().findIndex(e=>"median"===e.name);if(-1!==s){let t=a.getSubGraphic()[s].AABBBounds;"horizontal"===e.series.direction?l.setAttributes({x:t.x2+l.AABBBounds.width()/2,y:(t.y1+t.y2)/2}):l.setAttributes({x:(t.x1+t.x2)/2,y:t.y2+l.AABBBounds.height()/2})}else{let e=a.AABBBounds;l.setAttributes({x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2})}}return i}}}};function Tw(e,t,i,r){var n,l;let{labelMark:o,series:a}=e,s=a.getMeasureField()[0],h=o.getAttributesOfState(t);if("text"in h||(h.text=null!=(n=h.text)?n:t[s]),"textType"in h||(h.textType=null!=(l=e.labelSpec.textType)?l:"text"),h.data=t,a.type!==z.sankey){let{formatFunc:e,args:n}=mK(i,r,h.text,t);e&&(h._originText=h.text,h.text=e(...n,{series:a}))}return h}function TS(e){return(0,nr.Z)(e)?t=>e(t.data):e}function TA(e){var t,i,r;let n,{series:l,labelSpec:o}=e,a="horizontal"===l.direction?"right":"top",s=null!=(t=TS(o.position))?t:a;return n=!1!==o.overlap&&{strategy:null!=(r=null==(i=o.overlap)?void 0:i.strategy)?r:[{type:"position",position:["top","bottom","right","left","top-right","top-left","bottom-left","bottom-right"]}],avoidBaseMark:"center"!==s},{position:s,overlap:n}}function Tk(e){var t,i,r,n,l,o,a;let{series:s,labelSpec:h={}}=e,d=null!=(t=TS(h.position))?t:"outside",u=null!=(i=s.direction)?i:"vertical",c="horizontal"===s.direction?null==(r=s.getXAxisHelper())?void 0:r.isInverse():null==(n=s.getYAxisHelper())?void 0:n.isInverse(),p,g=d;g=e=>{var t;let{data:i}=e,r=null!=(t="function"==typeof h.position?h.position(i):h.position)?t:"outside";if("outside"===r){let e=s.getMeasureField()[0];return({vertical:["top","bottom"],horizontal:["right","left"]})[u][(null==i?void 0:i[e])>=0&&c||(null==i?void 0:i[e])<0&&!c?1:0]}return r},p=!1!==h.overlap&&{strategy:null!=(o=null==(l=h.overlap)?void 0:l.strategy)?o:(a=s,[{type:"position",position:e=>{var t,i;let{data:r}=e,n=a.getMeasureField()[0];return("horizontal"===a.direction?null==(t=a.getXAxisHelper())?void 0:t.isInverse():null==(i=a.getYAxisHelper())?void 0:i.isInverse())?(null==r?void 0:r[n])>=0?"horizontal"===a.direction?["left","inside-left"]:["bottom","inside-bottom"]:"horizontal"===a.direction?["right","inside-right"]:["top","inside-top"]:(null==r?void 0:r[n])>=0?"horizontal"===a.direction?["right","inside-right"]:["top","inside-top"]:"horizontal"===a.direction?["left","inside-left"]:["bottom","inside-bottom"]}}])};let f=!1;return(0,r6.Z)(d)&&d.includes("inside")&&(f=!0),{position:g,overlap:p,smartInvert:f}}function TM(e){var t;let i,{labelSpec:r}=e,n=null!=(t=TS(r.position))?t:"outside";return i=r.smartInvert?r.smartInvert:(0,r6.Z)(n)&&n.includes("inside"),{position:n,smartInvert:i}}function TT(e,t,i){let r=e.series,n=e.labelSpec||{},l=r.getTotalData();return{customLayoutFunc:l=>l.map(l=>{let o=n.position||"withChange",a=n.offset||0,s=t?t(l.data):l.data,h=Tw(e,s,n.formatMethod);return h.x="horizontal"===r.direction?"middle"===o?.5*(r.totalPositionX(s,"end")+r.totalPositionY(s,"start")):"max"===o?r.totalPositionX(s,s.end>=s.start?"end":"start")+a:"min"===o?r.totalPositionX(s,s.end>=s.start?"start":"end")-a:r.totalPositionX(s,"end")+(s.end>=s.start?a:-a):r.totalPositionX(s,"index",.5),h.y="horizontal"===r.direction?r.totalPositionY(s,"index",.5):"middle"===o?.5*(r.totalPositionY(s,"end")+r.totalPositionY(s,"start")):"max"===o?r.totalPositionY(s,s.end>=s.start?"end":"start")-a:"min"===o?r.totalPositionY(s,s.end>=s.start?"start":"end")+a:r.totalPositionY(s,"end")+(s.end>=s.start?-a:a),"horizontal"===r.direction?h.textAlign="middle"===o?"center":"withChange"===o&&s.end-s.start>=0||"max"===o?"left":"right":h.textBaseline="middle"===o?o:"withChange"===o&&s.end-s.start>=0||"max"===o?"bottom":"top",null==i||i(l,s,h),dq(Object.assign(Object.assign({},h),{id:l.id}))}),dataFilter:e=>{let t=[];return l.forEach(i=>{let n=e.find(e=>{var t;return i.index===(null==(t=e.data)?void 0:t[r.getDimensionField()[0]])});n&&(n.data=i,t.push(n))}),t},overlap:{strategy:[]}}}function TR(e){var t,i,r,n;let{labelSpec:l,series:o}=e,a=null==(r=null==(i=null==(t=o.getViewDataStatistics)?void 0:t.call(o).latestData)?void 0:i[o.getSeriesField()])?void 0:r.values,s=a?a.map((e,t)=>({[o.getSeriesField()]:e,index:t})):[{index:0,[db]:o.getSeriesKeys()[0]}];return{position:null!=(n=l.position)?n:"end",data:s,overlap:{avoidBaseMark:!1,clampForce:!1}}}class TE extends wY{constructor(){super(...arguments),this.type=z.waterfall,this.transformerConstructor=TC,this._leaderLineMark=null,this._stackLabelMark=null,this._labelMark=null,this._reStackTotal=()=>{let e=this.getStackData(),t=this.getStackValueField();e&&mj(e,t)}}getTotalData(){var e;return null==(e=this._totalData)?void 0:e.getLatestData()}initGroups(){let e=this.getGroupFields();e&&e.length&&(this._groups=new T_(e),this._data&&this._groups.initData(this._data.getDataView(),this._dataSet))}setAttrFromSpec(){super.setAttrFromSpec(),this.setValueFieldToStack(),this._fieldX=[this._fieldX[0]],this._fieldY=[this._fieldY[0]],(0,r5.Z)(this._seriesField)&&(this._seriesField=Td)}getSeriesKeys(){return this._seriesField===Td?[this._theme.seriesFieldName.increase,this._theme.seriesFieldName.decrease,this._theme.seriesFieldName.total]:super.getSeriesKeys()}initData(){var e,t,i;super.initData(),hK(this._dataSet,"waterfallFillTotal",Tg),hK(this._dataSet,"waterfall",Tu),((0,r5.Z)(this._spec.total)||"end"===this._spec.total.type)&&(null==(e=this._rawData)||e.transform({type:"waterfallFillTotal",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,total:this._spec.total,calculationMode:null!=(t=this._spec.calculationMode)?t:"increase",stackInverse:this.getRegion().getStackInverse()}},!1));let r=h2(this.getViewData(),this._dataSet,{name:`${dg}_series_${this.id}_totalData`});this.getViewData().target.removeListener("change",r.reRunAllTransform),this._totalData=new cj(this._option,r),r.transform({type:"waterfall",options:{indexField:this.getGroupFields()[0],valueField:this.getStackValueField(),seriesField:this.getSeriesField(),seriesFieldName:this._theme.seriesFieldName,startAs:d_,endAs:dC,total:this._spec.total,calculationMode:null!=(i=this._spec.calculationMode)?i:"increase",groupData:()=>this.getGroups().groupData,stackInverse:this.getRegion().getStackInverse()}},!1),r.target.addListener("change",this._reStackTotal)}compileData(){var e;super.compileData(),null==(e=this._totalData)||e.compile()}initAnimation(){var e,t,i,r;let n={yField:"horizontal"===this.direction?this._fieldY[0]:this.getStackValueField(),xField:"horizontal"===this.direction?this.getStackValueField():this._fieldX[0],direction:this.direction,growFrom:()=>{var e,t;return"horizontal"===this.direction?null==(e=this._xAxisHelper)?void 0:e.getScale(0).scale(0):null==(t=this._yAxisHelper)?void 0:t.getScale(0).scale(0)}},l=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset,o=bS(this);this._barMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("waterfall"))?void 0:i(n,l),bf("bar",this._spec,this._markAttributeContext),o)),this._leaderLineMark&&this._leaderLineMark.setAnimationConfig(bg(null==(r=hp.getAnimationInKey("fadeInOut"))?void 0:r(),bf("leaderLine",this._spec,this._markAttributeContext)))}viewDataUpdate(e){this._totalData.getDataView().reRunAllTransform(),this._totalData.updateData(),super.viewDataUpdate(e)}addViewDataFilter(e){}reFilterViewData(){}onEvaluateEnd(e){super.onEvaluateEnd(e),this._totalData.updateData()}initMark(){super.initMark();let e=this._createMark(TE.mark.leaderLine,{key:"index"});e&&(this._leaderLineMark=e,e.setData(this._totalData))}initLabelMarkStyle(e){var t;if(e)return!this._labelMark&&(null==(t=this._spec.label)?void 0:t.visible)?(super.initLabelMarkStyle(e),void(this._labelMark=e)):void 0}initStackLabelMarkStyle(e){e&&(this._stackLabelMark=e,e.skipEncode=!0,e.setRule("stackLabel"),e.setData(this._totalData),this.setMarkStyle(e,{text:e=>{var t;return"absolute"===(null==(t=this._spec.stackLabel)?void 0:t.valueType)?e.end:(0,t0.f2)(e.end,e.start)}}))}initTotalLabelMarkStyle(e){this.setMarkStyle(e,{text:e=>{var t;return"end"in e?"absolute"===(null==(t=this._spec.totalLabel)?void 0:t.valueType)?e.end:(0,t0.f2)(e.end,e.start):"horizontal"===this.direction?e[this._fieldX[0]]:e[this._fieldY[0]]}})}getTotalLabelComponentStyle(e){return TT(Object.assign(Object.assign({},e),{series:this,labelSpec:this._spec.totalLabel}),e=>{let t="vertical"===this.direction?e[this._fieldX[0]]:e[this._fieldY[0]];return this._totalData.getLatestData().find(e=>e.index===t)})}totalPositionX(e,t,i=.5){let{dataToPosition:r,getBandwidth:n}=this._xAxisHelper;return"horizontal"===this._direction?cL(r([e[t]],{bandPosition:this._bandPosition})):r([e[t]],{bandPosition:this._bandPosition})+.5*n(0)-this._barMark.getAttribute("width",e)*(.5-i)}totalPositionY(e,t,i=.5){let{dataToPosition:r,getBandwidth:n}=this._yAxisHelper;return"horizontal"===this._direction?r([e[t]],{bandPosition:this._bandPosition})+.5*n(0)-this._barMark.getAttribute("height",e)*(.5-i):cL(r([e[t]],{bandPosition:this._bandPosition}))}initMarkStyle(){super.initMarkStyle();let e="decrease"===this._spec.calculationMode;this._leaderLineMark&&("horizontal"===this._direction?this.setMarkStyle(this._leaderLineMark,{visible:e=>this.isVisibleLeaderLine(e),x:e=>this.totalPositionX(e,"lastEnd",0),x1:e=>this.totalPositionX(e,e.isTotal?"end":"start",0),y:t=>t.lastIndex?this.totalPositionY(t,"lastIndex",+!e):0,y1:t=>this.totalPositionY(t,"index",+!!e)},"normal",q.Series):this.setMarkStyle(this._leaderLineMark,{visible:e=>this.isVisibleLeaderLine(e),x:t=>t.lastIndex?this.totalPositionX(t,"lastIndex",+!e):0,x1:t=>this.totalPositionX(t,"index",+!!e),y:e=>this.totalPositionY(e,"lastEnd",0),y1:e=>this.totalPositionY(e,e.isTotal?"end":"start",0)},"normal",q.Series))}isVisibleLeaderLine(e){return!(0,r5.Z)(e.lastIndex)&&cF([e.lastEnd,e[e.isTotal?"end":"start"]],"horizontal"===this.direction?this._xAxisHelper.getScale(0):this._yAxisHelper.getScale(0))}}TE.type=z.waterfall,TE.mark=Ty,TE.builtInTheme={waterfall:{seriesFieldName:{total:"total",increase:"increase",decrease:"decrease"},leaderLine:{style:{stroke:"black",lineWidth:1,lineDash:[4,4]}},stackLabel:{visible:!0,offset:12,position:"withChange",style:{fill:"black",fontSize:{type:"token",key:"l4FontSize"}}},label:{visible:!1,offset:12,position:"inside",style:{lineWidth:2}}}},TE.transformerConstructor=TC;let TP=()=>{A$(),wV(),Tb(),ml(),C1(),xa(),hp.registerSeries(TE.type,TE)};class TB extends wJ{transformSpec(e){super.transformSpec(e),e.legends&&(0,ag.IX)(e.legends).forEach(e=>{e.select=!1,e.hover=!1,e.filter=!1}),ci(e)}_getDefaultSeriesSpec(e){let t=super._getDefaultSeriesSpec(e);return t.bar=e.bar,t.stackLabel=e.stackLabel,t.leaderLine=e.leaderLine,t.total=e.total,t.calculationMode=e.calculationMode,t}}class TI extends wQ{constructor(){super(...arguments),this.transformerConstructor=TB,this.type="waterfall",this.seriesType=z.waterfall}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}TI.type="waterfall",TI.seriesType=z.waterfall,TI.transformerConstructor=TB;let TL=`${dg}_BOX_PLOT_OUTLIER_VALUE`;(eT=ez||(ez={})).OUTLIER="outlier",eT.MAX="max",eT.MIN="min",eT.MEDIAN="median",eT.Q1="q1",eT.Q3="q3",eT.SERIES_FIELD="seriesField";let TF=(e,t)=>{let i=[],{outliersField:r,dimensionField:n,seriesField:l}=t;return(e[0].latestData||[]).forEach(e=>{let t=e[r];(0,ri.Z)(t)||(t=[t]),i.push(...t.map(t=>{let i={[TL]:t};return n.forEach(t=>{i[t]=e[t]}),(0,oV.Z)(l)&&(i[l]=e[l]),i}))}),i};class TH extends m4{constructor(){super(...arguments),this.getContentKey=e=>t=>{if(this.isOutlierMark(t))return e===ez.OUTLIER?this.series.getOutliersField():e===ez.SERIES_FIELD?this.series.getSeriesField():null;switch(e){case ez.MIN:return this.series.getMinField();case ez.MAX:return this.series.getMaxField();case ez.MEDIAN:return this.series.getMedianField();case ez.Q1:return this.series.getQ1Field();case ez.Q3:return this.series.getQ3Field();case ez.SERIES_FIELD:return this.series.getSeriesField()}return null},this.getContentValue=e=>t=>{if(this.isOutlierMark(t))return e===ez.OUTLIER?t[TL]:e===ez.SERIES_FIELD?t[this.series.getSeriesField()]:null;switch(e){case ez.MIN:return t[this.series.getMinField()];case ez.MAX:return t[this.series.getMaxField()];case ez.MEDIAN:return t[this.series.getMedianField()];case ez.Q1:return t[this.series.getQ1Field()];case ez.Q3:return t[this.series.getQ3Field()];case ez.SERIES_FIELD:return t[this.series.getSeriesField()]}return null},this.shapeColorCallback=e=>"line"===this.series.getShaftShape()?this.series.getMarkInName("boxPlot").getAttribute("stroke",e):this.series.getMarkInName("boxPlot").getAttribute("fill",e),this.getOutlierFillColor=e=>{var t,i;let r=this.series.getOutliersStyle();return null!=(t=null==r?void 0:r.fill)?t:null==(i=this.series.getMarkInName("outlier"))?void 0:i.getAttribute("fill",e)},this.isOutlierMark=e=>(0,oV.Z)(e[TL])}getDefaultContentList(e){return[{key:this.getContentKey(ez.OUTLIER),value:this.getContentValue(ez.OUTLIER),shapeType:this.shapeTypeCallback,shapeColor:this.getOutlierFillColor,shapeStroke:this.getOutlierFillColor},{key:this.getContentKey(ez.MAX),value:this.getContentValue(ez.MAX)},{key:this.getContentKey(ez.Q3),value:this.getContentValue(ez.Q3)},{key:this.getContentKey(ez.MEDIAN),value:this.getContentValue(ez.MEDIAN)},{key:this.getContentKey(ez.Q1),value:this.getContentValue(ez.Q1)},{key:this.getContentKey(ez.MIN),value:this.getContentValue(ez.MIN)},{key:this.getContentKey(ez.SERIES_FIELD),value:this.getContentValue(ez.SERIES_FIELD)}]}}class TO extends on{constructor(e){super(e),this.type="glyph",this.numberType=lI,this.subGraphic=[],this._onInit&&this._onInit(this),this.valid=this.isValid()}setSubGraphic(e){this.detachSubGraphic(),this.subGraphic=e,e.forEach(e=>{e.glyphHost=this,Object.setPrototypeOf(e.attribute,this.attribute)}),this.valid=this.isValid(),this.addUpdateBoundTag()}detachSubGraphic(){this.subGraphic.forEach(e=>{e.glyphHost=null,Object.setPrototypeOf(e.attribute,{})})}getSubGraphic(){return this.subGraphic}onInit(e){this._onInit=e}onUpdate(e){this._onUpdate=e}isValid(){return!0}setAttribute(e,t,i,r){super.setAttribute(e,t,i,r),this.subGraphic.forEach(e=>{e.addUpdateShapeAndBoundsTag(),e.addUpdatePositionTag()})}setAttributes(e,t=!1,i){super.setAttributes(e,t,i),this.subGraphic.forEach(e=>{e.addUpdateShapeAndBoundsTag(),e.addUpdatePositionTag()})}translate(e,t){return super.translate(e,t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}translateTo(e,t){return super.translateTo(e,t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}scale(e,t,i){return super.scale(e,t,i),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}scaleTo(e,t){return super.scaleTo(e,t),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}rotate(e){return super.rotate(e),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}rotateTo(e){return super.rotate(e),this.subGraphic.forEach(e=>{e.addUpdatePositionTag(),e.addUpdateBoundTag()}),this}getGraphicTheme(){return r4(this).glyph}updateAABBBounds(e,t,i){return this.getSubGraphic().forEach(e=>{i.union(e.AABBBounds)}),i}doUpdateAABBBounds(){this.updateAABBBoundsStamp++,this._AABBBounds.clear();let e=this.updateAABBBounds(this.attribute,this.getGraphicTheme(),this._AABBBounds);return this.clearUpdateBoundTag(),e}needUpdateTags(e){return!1}needUpdateTag(e){return!1}useStates(e,t){var i;if(!e.length)return void this.clearStates(t);if(!((null==(i=this.currentStates)?void 0:i.length)!==e.length||e.some((e,t)=>this.currentStates[t]!==e)))return;this.stopStateAnimates(),this.stateSort&&(e=e.sort(this.stateSort));let r={},n=this.subGraphic.map(()=>({}));e.forEach(t=>{var i;let l=this.glyphStateProxy?this.glyphStateProxy(t,e):this.glyphStates[t];l&&(Object.assign(r,l.attributes),(null==(i=l.subAttributes)?void 0:i.length)&&n.forEach((e,t)=>{Object.assign(e,l.subAttributes[t])}))}),this.updateNormalAttrs(r),this.currentStates=e,this.applyStateAttrs(r,e,t)}clearStates(e){this.stopStateAnimates(),this.hasState()&&this.normalAttrs?(this.currentStates=[],this.applyStateAttrs(this.normalAttrs,this.currentStates,e,!0)):this.currentStates=[],this.normalAttrs=null}clone(){let e=new TO(Object.assign({},this.attribute));return e.setSubGraphic(this.subGraphic.map(e=>e.clone())),e}getNoWorkAnimateAttr(){return TO.NOWORK_ANIMATE_ATTR}}function TD(e){return new TO(e)}TO.NOWORK_ANIMATE_ATTR=or;let Tz=class{constructor(){this.numberType=lI}reInit(){}drawShape(e,t,i,r,n,l,o,a){n.drawContribution&&e.getSubGraphic().forEach(e=>{let s=n.drawContribution.getRenderContribution(e);s&&s.drawShape&&s.drawShape(e,t,i,r,n,l,o,a)})}draw(e,t,i,r){let{context:n}=i;if(!n||(n.highPerformanceSave(),!i.drawContribution))return;let l=r4(e),o=e.getSubGraphic();o.length&&o.forEach(e=>{i.drawContribution.renderItem(e,i,{theme:l})}),n.highPerformanceRestore()}};Tz=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],Tz);let TW=!1,TZ=new tb(e=>{TW||(TW=!0,e(oR).to(Tz).inSingletonScope(),e(o_).toService(oR))});class TN{constructor(){this.type="glyph",this.numberType=lI}contains(e,t,i){if(!e.AABBBounds.containsPoint(t))return!1;if("imprecise"===e.attribute.pickMode)return!0;let{pickContext:r}=null!=i?i:{};if(!r)return!1;let n=null==i?void 0:i.pickerService;if(n){let r=!1;return e.getSubGraphic().forEach(e=>{if(r)return;let l=n.pickItem(e,t,null,i);r=!(!l||!l.graphic)}),r}return!1}}let T$=class extends TN{constructor(e){super(),this.canvasRenderer=e}};T$=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(eR=tT(oR),function(e,t){eR(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],T$);let Tj=!1,TG=new tb((e,t,i,r)=>{Tj||(Tj=!0,e(uy).to(T$).inSingletonScope(),e(u_).toService(uy))}),TV=class extends TN{constructor(e){super(),this.canvasRenderer=e}};TV=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(eE=tT(oR),function(e,t){eE(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],TV);let TU=!1,TK=new tb((e,t,i,r)=>{TU||(TU=!0,e(uo).to(TV).inSingletonScope(),e(TV).toService(uo))});function TX(){TX.__loaded||(TX.__loaded=!0,oq.RegisterGraphicCreator("glyph",TD),tG.load(TZ),tG.load(d4?TG:TK))}TX.__loaded=!1;class TY extends pz{constructor(){super(...arguments),this._setStateOfGraphic=e=>{e.clearStates(),e.stateProxy=null,e.context.diffState!==J.enter&&e.context.diffState!==J.update||(e.glyphStateProxy=(t,i)=>{var r;let n={attributes:Object.assign(Object.assign({},this._runEncoderOfGraphic(null==(r=this._encoderOfState)?void 0:r[t],e)),e.runtimeStateCache?e.runtimeStateCache[t]:null)};return e.glyphStates?e.glyphStates[t]||(e.glyphStates[t]=n):e.glyphStates={[t]:n},n},e.useStates(e.context.states))}}getSubMarks(){return this._subMarks}setGlyphConfig(e){this._glyphConfig=e}getGlyphConfig(){return this._glyphConfig}getPositionChannels(){return this._positionChannels}_onGlyphAttributeUpdate(e){return t=>{var i,r;let n=this.getPositionChannels(),l=n&&this._positionEncoder&&Object.keys(t).some(e=>n.includes(e))?this._positionEncoder(t,null==(r=null==(i=null==e?void 0:e.context)?void 0:i.data)?void 0:r[0],e):null;return this._channelEncoder&&Object.keys(this._channelEncoder).forEach(e=>{if(e in t){let i=this._channelEncoder[e](t[e]);l=l?(0,ha.Z)(l,i):i}}),l&&e.getSubGraphic().forEach(e=>{e&&l[e.name]&&e.setAttributes(l[e.name])}),t}}_createGraphic(e={}){let t=TD(e);t.onBeforeAttributeUpdate=this._onGlyphAttributeUpdate(t);let i=this._subMarks;if(i){let e=[];Object.keys(i).forEach(t=>{let r=hp.createGraphicComponent(i[t].type,Object.assign({},i[t].defaultAttributes));r&&(e.push(r),r.name=t,r.onBeforeAttributeUpdate=e=>e)}),t.setSubGraphic(e)}return t.onBeforeAttributeUpdate(e),t}_runProgressiveEncoder(e){this._runEncoder(e)}}let Tq=()=>{hp.registerGraphicComponent("glyph",TD),pN(),TX()},TJ=["x","y","minMaxWidth","minMaxHeight","q1q3Width","q1q3Height","q1","q3","min","max","median","angle"],TQ=["x","y","boxWidth","boxHeight","ruleWidth","ruleHeight","q1","q3","min","max","median","angle"];class T0 extends TY{constructor(){super(...arguments),this.type=T0.type}_isHorizontal(){return this._glyphConfig&&"horizontal"===this._glyphConfig.direction}setGlyphConfig(e){super.setGlyphConfig(e),"bar"===e.shaftShape?(this._subMarks={minMaxBox:{type:"rect",defaultAttributes:{lineWidth:0}},q1q3Box:{type:"rect",defaultAttributes:{lineWidth:0}},median:{type:"line",defaultAttributes:{x:0,y:0}}},this._positionChannels=TJ,this._channelEncoder={minMaxFillOpacity:e=>({minMaxBox:{fillOpacity:e}}),lineWidth:e=>({minMaxBox:{lineWidth:0},q1q3Box:{lineWidth:0}}),stroke:e=>({minMaxBox:{stroke:!1},q1q3Box:{stroke:!1}})},this._positionEncoder=(e,t,i)=>{var r;let{x:n=i.attribute.x,y:l=i.attribute.y,minMaxWidth:o=i.attribute.minMaxWidth,minMaxHeight:a=i.attribute.minMaxHeight,q1q3Width:s=i.attribute.q1q3Width,q1q3Height:h=i.attribute.q1q3Height,q1:d=i.attribute.q1,q3:u=i.attribute.q3,min:c=i.attribute.min,max:p=i.attribute.max,median:g=i.attribute.median,angle:f}=e,m=this._isHorizontal(),b={};if(m?(b.minMaxBox={x:c,x1:p,y:l-a/2,y1:l+a/2},b.q1q3Box={x:d,x1:u,y:l-h/2,y1:l+h/2},b.median={points:[{x:g,y:l-h/2},{x:g,y:l+h/2}]}):(b.minMaxBox={y:c,y1:p,x:n-o/2,x1:n+o/2},b.q1q3Box={y:d,y1:u,x:n-s/2,x1:n+s/2},b.median={points:[{y:g,x:n-s/2},{y:g,x:n+s/2}]}),(0,sD.Z)(f)){let t=null!=(r=e.anchor)?r:m?[(c+p)/2,l]:[n,(c+p)/2];Object.keys(b).forEach(e=>{b[e].angle=f,b[e].anchor=t})}return b}):(this._subMarks={shaft:{type:"line",defaultAttributes:{x:0,y:0}},box:{type:"rect"},max:{type:"line",defaultAttributes:{x:0,y:0}},min:{type:"line",defaultAttributes:{x:0,y:0}},median:{type:"line",defaultAttributes:{x:0,y:0}}},this._positionChannels=TQ,this._channelEncoder={boxStroke:e=>({box:{stroke:e}}),medianStroke:e=>({median:{stroke:e}}),boxCornerRadius:e=>({box:{cornerRadius:e}})},this._positionEncoder=(e,t,i)=>{var r;let{x:n=i.attribute.x,y:l=i.attribute.y,boxWidth:o=i.attribute.boxWidth,boxHeight:a=i.attribute.boxHeight,ruleWidth:s=i.attribute.ruleWidth,ruleHeight:h=i.attribute.ruleHeight,q1:d=i.attribute.q1,q3:u=i.attribute.q3,min:c=i.attribute.min,max:p=i.attribute.max,median:g=i.attribute.median,angle:f}=e,m=this._isHorizontal(),b={};if(m?(b.box={x:d,x1:u,y:l-a/2,y1:l+a/2},b.median={points:[{x:g,y:l-a/2},{x:g,y:l+a/2}]},b.shaft={points:[{x:c,y:l},{x:p,y:l}]},b.max={points:[{x:p,y:l-h/2},{x:p,y:l+h/2}]},b.min={points:[{x:c,y:l-h/2},{x:c,y:l+h/2}]}):(b.box={x:n-o/2,x1:n+o/2,y:d,y1:u},b.median={points:[{x:n-o/2,y:g},{x:n+o/2,y:g}]},b.max={points:[{x:n-s/2,y:p},{x:n+s/2,y:p}]},b.min={points:[{x:n-s/2,y:c},{x:n+s/2,y:c}]},b.shaft={points:[{x:n,y:c},{x:n,y:p}]}),(0,sD.Z)(f)){let t=null!=(r=e.anchor)?r:m?[(c+p)/2,l]:[n,(c+p)/2];Object.keys(b).forEach(e=>{b[e].angle=f,b[e].anchor=t})}return b})}setDataLabelType(){return"symbol"}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{lineWidth:2,boxWidth:30,shaftWidth:20,shaftShape:"line"})}}T0.type="boxPlot";let T1=()=>{Tq(),bX(),ct(),hp.registerGraphicComponent("line",e=>bz(e)),hp.registerGraphicComponent("rect",e=>uU(e)),hp.registerMark(T0.type,T0)},T2=Object.assign(Object.assign({},bo),{boxPlot:{name:"boxPlot",type:"boxPlot"},outlier:{name:"outlier",type:"symbol"}}),T3=e=>(t,i,r)=>{var n;let l=t.getFinalAttribute(),o=e(t,null!=(n=l.direction)?n:"vertical",i);if(!(0,sD.Z)(o))return{};let{x:a,y:s,min:h,max:d,q1:u,q3:c,median:p}=l,g={from:{x:a,y:s},to:{x:a,y:s}};return(0,sD.Z)(h)&&(g.from.min=o,g.to.min=h),(0,sD.Z)(d)&&(g.from.max=o,g.to.max=d),(0,sD.Z)(u)&&(g.from.q1=o,g.to.q1=u),(0,sD.Z)(c)&&(g.from.q3=o,g.to.q3=c),(0,sD.Z)(p)&&(g.from.median=o,g.to.median=p),g},T4=e=>(t,i,r)=>{var n;let l=t.getFinalAttribute(),o=e(t,null!=(n=l.direction)?n:"vertical",i);if(!(0,sD.Z)(o))return{};let{x:a,y:s,min:h,max:d,q1:u,q3:c,median:p}=l,g={from:{x:a,y:s},to:{x:a,y:s}};return(0,sD.Z)(h)&&(g.to.min=o,g.from.min=h),(0,sD.Z)(d)&&(g.to.max=o,g.from.max=d),(0,sD.Z)(u)&&(g.to.q1=o,g.from.q1=u),(0,sD.Z)(c)&&(g.to.q3=o,g.from.q3=c),(0,sD.Z)(p)&&(g.to.median=o,g.from.median=p),g},T5=(e,t)=>e.getSubGraphic().find(e=>e.name===t),T6=(e,t,i)=>{var r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S;let A,k,M,T,R;if(i&&(0,sD.Z)(i.center))return i.center;if("horizontal"===t){A=null==(l=null==(n=(null==(r=T5(e,"median"))?void 0:r.attribute).points)?void 0:n[0])?void 0:l.x,k=null==(h=null==(s=null==(a=null==(o=T5(e,"max"))?void 0:o.attribute)?void 0:a.points)?void 0:s[0])?void 0:h.x,M=null==(p=null==(c=null==(u=null==(d=T5(e,"min"))?void 0:d.attribute)?void 0:u.points)?void 0:c[0])?void 0:p.x;let t=T5(e,"box").attribute.width,i=T5(e,"box").attribute.x;T=i,R=i+t}else{A=null==(m=null==(f=(null==(g=T5(e,"median"))?void 0:g.attribute).points)?void 0:f[0])?void 0:m.y,k=null==(_=null==(v=null==(y=null==(b=T5(e,"max"))?void 0:b.attribute)?void 0:y.points)?void 0:v[0])?void 0:_.y,M=null==(S=null==(w=null==(x=null==(C=T5(e,"min"))?void 0:C.attribute)?void 0:x.points)?void 0:w[0])?void 0:S.y;let t=T5(e,"box").attribute.height,i=T5(e,"box").attribute.y;T=i,R=i+t}return(0,sD.Z)(A)?A:(0,sD.Z)(T)&&(0,sD.Z)(R)?(T+R)/2:(0,sD.Z)(k)&&(0,sD.Z)(M)?(k+M)/2:(0,sD.Z)(M)?M:(0,sD.Z)(k)?k:NaN},T8=(e,t,i)=>{var r,n,l,o,a,s,h,d,u,c,p,g,f,m;let b,y,v,_,C;if((0,sD.Z)(null==i?void 0:i.center))return i.center;if("horizontal"===t){b=null==(l=null==(n=(null==(r=T5(e,"median"))?void 0:r.attribute).points)?void 0:n[0])?void 0:l.x;let t=(null==(o=T5(e,"minMaxBox"))?void 0:o.attribute).width,i=null==(a=T5(e,"minMaxBox"))?void 0:a.attribute.x;v=i,y=i+t;let d=(null==(s=T5(e,"q1q3Box"))?void 0:s.attribute).width,u=null==(h=T5(e,"q1q3Box"))?void 0:h.attribute.x;_=u,C=u+d}else{b=null==(c=null==(u=(null==(d=T5(e,"median"))?void 0:d.attribute).points)?void 0:u[0])?void 0:c.y;let t=(null==(p=T5(e,"minMaxBox"))?void 0:p.attribute).height,i=null==(g=T5(e,"minMaxBox"))?void 0:g.attribute.y;v=i,y=i+t;let r=(null==(f=T5(e,"q1q3Box"))?void 0:f.attribute).height,n=null==(m=T5(e,"q1q3Box"))?void 0:m.attribute.y;_=n,C=n+r}return(0,sD.Z)(b)?b:(0,sD.Z)(_)&&(0,sD.Z)(C)?(_+C)/2:(0,sD.Z)(y)&&(0,sD.Z)(v)?(y+v)/2:(0,sD.Z)(v)?v:(0,sD.Z)(y)?y:NaN};class T7 extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){super.onBind();let e=this.target.getFinalAttribute();e&&this.target.setAttributes(e);let{from:t,to:i}=this.computeAttribute();this.propKeys=Object.keys(i).filter(e=>null!=i[e]),this.animate.reSyncProps(),this.from=t,this.to=i,this.target.setAttributes(this.from)}computeAttribute(){return T3(T6)(this.target,this.params,this.params.options)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.setAttributes(r)}}class T9 extends pp{constructor(e,t,i,r,n){super(e,t,i,r,n)}onBind(){var e;(null==(e=this.params)?void 0:e.diffAttrs)&&this.target.setAttributes(this.params.diffAttrs);let{from:t,to:i}=this.computeAttribute();this.propKeys=Object.keys(i).filter(e=>null!=i[e]),this.animate.reSyncProps(),this.from=t,this.to=i,this.target.setAttributes(this.from)}computeAttribute(){return T4(T6)(this.target,this.params,this.params.options)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.setAttributes(r)}}class Re extends T7{computeAttribute(){return T3(T8)(this.target,this.params,this.params.options)}}class Rt extends T9{computeAttribute(){return T4(T8)(this.target,this.params,this.params.options)}}let Ri=()=>{gz.registerBuiltInAnimate("boxplotScaleIn",T7),gz.registerBuiltInAnimate("boxplotScaleOut",T9),gz.registerBuiltInAnimate("barBoxplotScaleIn",Re),gz.registerBuiltInAnimate("barBoxplotScaleOut",Rt)};class Rr extends bC{_transformLabelSpec(e){this._addMarkLabelSpec(e,"boxPlot")}}class Rn extends bA{constructor(){super(...arguments),this.type=z.boxPlot,this.transformerConstructor=Rr,this._bandPosition=0}getMinField(){return this._minField}getMaxField(){return this._maxField}getQ1Field(){return this._q1Field}getMedianField(){return this._medianField}getQ3Field(){return this._q3Field}getOutliersField(){return this._outliersField}getShaftShape(){return this._shaftShape}getBoxFillColor(){return this._boxFillColor}getStrokeColor(){return this._strokeColor}getOutliersStyle(){return this._outliersStyle}setAttrFromSpec(){var e,t,i,r,n,l,o;super.setAttrFromSpec();let a=null!=(t=null==(e=this._spec.boxPlot)?void 0:e.style)?t:{};this._minField=this._spec.minField,this._maxField=this._spec.maxField,this._q1Field=this._spec.q1Field,this._medianField=this._spec.medianField,this._q3Field=this._spec.q3Field,this._outliersField=this._spec.outliersField,this._lineWidth=null!=(i=a.lineWidth)?i:2,this._boxWidth=a.boxWidth,this._shaftShape=null!=(r=a.shaftShape)?r:"line",this._shaftWidth=a.shaftWidth,this._boxFillColor=a.boxFill,this._strokeColor=a.stroke,this._shaftFillOpacity="bar"===this._shaftShape?null!=(n=a.shaftFillOpacity)?n:.5:void 0,this._outliersStyle=null!=(l=this._spec.outliersStyle)?l:null==(o=this._spec.outlier)?void 0:o.style}initMark(){this._boxPlotMark=this._createMark(Rn.mark.boxPlot,{groupKey:this._seriesField,isSeriesMark:!0}),this._outliersField&&(this._outlierMark=this._createMark(Rn.mark.outlier,{key:df,groupKey:this._seriesField}),this._outlierMark.setData(this._outlierData))}initMarkStyle(){var e,t,i,r,n,l;let o=this._boxPlotMark;if(o){let i={lineWidth:this._lineWidth,fill:null!=(e=this._boxFillColor)?e:"line"!==this._shaftShape?this.getColorAttribute():"#FFF",minMaxFillOpacity:this._shaftFillOpacity,stroke:null!=(t=this._strokeColor)?t:"line"!==this._shaftShape?"#000":this.getColorAttribute()};o.setGlyphConfig({direction:this._direction,shaftShape:this._shaftShape});let r="horizontal"===this._direction?{y:e=>this._getPosition(this.direction,e),boxHeight:()=>{var e;return sU(null!=(e=this._boxWidth)?e:"100%",this._getMarkWidth())},ruleHeight:()=>{var e;return sU(null!=(e=this._shaftWidth)?e:"100%",this._getMarkWidth())},q1q3Height:()=>{var e;return sU(null!=(e=this._boxWidth)?e:"100%",this._getMarkWidth())},minMaxHeight:()=>{var e;return sU(null!=(e=this._shaftWidth)?e:"100%",this._getMarkWidth())}}:{x:e=>this._getPosition(this.direction,e),boxWidth:()=>{var e;return sU(null!=(e=this._boxWidth)?e:"100%",this._getMarkWidth())},ruleWidth:()=>{var e;return sU(null!=(e=this._shaftWidth)?e:"100%",this._getMarkWidth())},q1q3Width:()=>{var e;return sU(null!=(e=this._boxWidth)?e:"100%",this._getMarkWidth())},minMaxWidth:()=>{var e;return sU(null!=(e=this._shaftWidth)?e:"100%",this._getMarkWidth())}};this.setMarkStyle(o,i,Q.STATE_NORMAL,q.Series),this.setMarkStyle(o,r,Q.STATE_NORMAL,q.Built_In)}let a=this._outlierMark;a&&this.setMarkStyle(a,{fill:null!=(n=null!=(r=null==(i=this._outliersStyle)?void 0:i.fill)?r:this._boxFillColor)?n:this.getColorAttribute(),stroke:this.getColorAttribute(),size:(0,nw.Z)(null==(l=this._outliersStyle)?void 0:l.size)?this._outliersStyle.size:10},Q.STATE_NORMAL,q.Series)}initBoxPlotMarkStyle(){var e,t;let i=this._boxPlotMark,r="horizontal"===this._direction?this._xAxisHelper:this._yAxisHelper;if(i&&r){let{dataToPosition:t}=r,n=null==(e=null==r?void 0:r.getScale)?void 0:e.call(r,0);this.setMarkStyle(i,{min:e=>cL(t(this.getDatumPositionValues(e,this._minField),{bandPosition:this._bandPosition}),n),q1:e=>cL(t(this.getDatumPositionValues(e,this._q1Field),{bandPosition:this._bandPosition}),n),median:e=>cL(t(this.getDatumPositionValues(e,this._medianField),{bandPosition:this._bandPosition}),n),q3:e=>cL(t(this.getDatumPositionValues(e,this._q3Field),{bandPosition:this._bandPosition}),n),max:e=>cL(t(this.getDatumPositionValues(e,this._maxField),{bandPosition:this._bandPosition}),n)},Q.STATE_NORMAL,q.Series)}let n=this._outlierMark;if(n&&r){let{dataToPosition:e}=r,i=null==(t=null==r?void 0:r.getScale)?void 0:t.call(r,0),l="horizontal"===this._direction?{y:e=>this._getPosition(this.direction,e),x:t=>cL(e(this.getDatumPositionValues(t,TL),{bandPosition:this._bandPosition}),i)}:{x:e=>this._getPosition(this.direction,e),y:t=>cL(e(this.getDatumPositionValues(t,TL),{bandPosition:this._bandPosition}),i)};this.setMarkStyle(n,l,Q.STATE_NORMAL,q.Series)}}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getMedianField()],z:this._fieldZ?this.dataToPositionZ.bind(this):null})}initData(){if(super.initData(),!this._data)return;hK(this._dataSet,"foldOutlierData",TF),hK(this._dataSet,"addVChartProperty",mG);let e=new tf.V(this._dataSet,{name:`${this.type}_outlier_${this.id}_data`});e.parse([this.getViewData()],{type:"dataview"}),e.name=`${dg}_series_${this.id}_outlierData`,e.transform({type:"foldOutlierData",options:{dimensionField:"horizontal"===this._direction?this._fieldY:this._fieldX,outliersField:this._outliersField,seriesField:this._seriesField}}),e.transform({type:"addVChartProperty",options:{beforeCall:bi.bind(this),call:br}},!1),this._outlierData=new cj(this._option,e)}compileData(){var e;super.compileData(),null==(e=this._outlierData)||e.compile()}viewDataUpdate(e){var t;super.viewDataUpdate(e),null==(t=this._outlierData)||t.updateData()}init(e){super.init(e),this.initBoxPlotMarkStyle()}_getMarkWidth(){var e;if(this._autoBoxWidth)return this._autoBoxWidth;let t="horizontal"===this._direction?this._yAxisHelper:this._xAxisHelper,i=this._groups?this._groups.fields.length:1,r=null==(e=t.getBandwidth)?void 0:e.call(t,i-1),n=r;return(0,oV.Z)(this._spec.boxWidth)&&(n=sU(this._spec.boxWidth,r)),(0,oV.Z)(this._spec.boxMinWidth)&&(n=Math.max(n,sU(this._spec.boxMinWidth,r))),(0,oV.Z)(this._spec.boxMaxWidth)&&(n=Math.min(n,sU(this._spec.boxMaxWidth,r))),this._autoBoxWidth=n,this._autoBoxWidth}_getPosition(e,t){var i,r,n,l;let o,a,s;"horizontal"===e?(o=this.getYAxisHelper(),a="boxHeight",s=this.dataToPositionY.bind(this)):(o=this.getXAxisHelper(),a="boxWidth",s=this.dataToPositionX.bind(this));let h=o.getScale(0),d=this._groups?this._groups.fields.length:1,u=null==(i=o.getBandwidth)?void 0:i.call(o,d-1),c=this._boxPlotMark.getAttribute(a,t);if(d>1&&(0,oV.Z)(this._spec.boxGapInGroup)){let e=this._groups.fields,i=(0,ag.IX)(this._spec.boxGapInGroup),a=0,s=0;for(let h=e.length-1;h>=1;h--){let d=e[h],p=null!=(n=null==(r=o.getScale(h))?void 0:r.domain())?n:[],g=p.length,f=sU(null!=(l=i[h-1])?l:(0,ag.Z$)(i),u),m=p.indexOf(t[d]);h===e.length-1?(a+=g*c+(g-1)*f,s+=m*(c+f)):(s+=m*(a+f),a+=a+(g-1)*f)}return h.scale(t[e[0]])+o.getBandwidth(0)/2-a/2+s+c/2}let p=(0,cz.z2)(h.type||"band");return s(t)+.5*u+(p?-u/2:0)}onLayoutEnd(){super.onLayoutEnd(),this._autoBoxWidth=null}_initAnimationSpec(e={}){let t=(0,ha.Z)({},e);return["appear","enter","update","exit","disappear"].forEach(e=>{t[e]&&"scaleIn"===t[e].type?t[e].type="bar"===this._shaftShape?"barBoxplotScaleIn":"boxplotScaleIn":t[e]&&"scaleOut"===t[e].type&&(t[e].type="bar"===this._shaftShape?"barBoxplotScaleOut":"boxplotScaleOut")}),t}initAnimation(){var e,t,i,r,n,l,o;let a=bS(this);if(this._boxPlotMark){let t=this._initAnimationSpec(null==(e=hp.getAnimationInKey("scaleInOut"))?void 0:e()),i=this._initAnimationSpec(bf("boxPlot",this._spec,this._markAttributeContext));this._boxPlotMark.setAnimationConfig(bg(t,i,a))}if(this._outlierMark){let e={appear:null==(t=this._spec.animationAppear)?void 0:t.symbol,disappear:null==(i=this._spec.animationDisappear)?void 0:i.symbol,enter:null==(r=this._spec.animationEnter)?void 0:r.symbol,exit:null==(n=this._spec.animationExit)?void 0:n.symbol,update:null==(l=this._spec.animationUpdate)?void 0:l.symbol};this._outlierMark.setAnimationConfig(bg(null==(o=hp.getAnimationInKey("scaleInOut"))?void 0:o(),e,a))}}initTooltip(){this._tooltipHelper=new TH(this),this._boxPlotMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._boxPlotMark),this._outlierMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._outlierMark)}getStatisticFields(){let e=super.getStatisticFields(),t=e.find(e=>e.key===this._outliersField);return t&&(t.operations=["array-min","array-max"]),e}getDefaultShapeType(){return"square"}getActiveMarks(){return[this._boxPlotMark]}}Rn.type=z.boxPlot,Rn.builtInTheme={boxPlot:{boxPlot:{style:{lineWidth:1}},label:{style:{lineWidth:2}}}},Rn.mark=T2,Rn.transformerConstructor=Rr;let Rl=()=>{T1(),y4(),mn(),C1(),xa(),Ri(),hp.registerSeries(Rn.type,Rn)};class Ro extends xk{_getDefaultSeriesSpec(e){var t;let i=[e.maxField,e.medianField,e.q1Field,e.q3Field,e.minField,e.outliersField],r=super._getDefaultSeriesSpec(e,["boxPlot","outlier","minField","maxField","q1Field","medianField","q3Field","outliersField","outliersStyle","boxWidth","boxMaxWidth","boxMinWidth","boxGapInGroup"]);return r.direction=null!=(t=e.direction)?t:"vertical",r["horizontal"===r.direction?"xField":"yField"]=i,r}transformSpec(e){super.transformSpec(e),e.axes||(e.axes=[{orient:"bottom"},{orient:"left"}]),ci(e)}}var Ra=i(67844);class Rs extends xB{constructor(){super(...arguments),this.transformerConstructor=Ro,this.type="boxPlot",this.seriesType=z.boxPlot}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}Rs.type="boxPlot",Rs.seriesType=z.boxPlot,Rs.transformerConstructor=Ro;var Rh=i(4057);let Rd=(e,t,i)=>{t.forEach(t=>{(0,r5.Z)(t[i])||e.add(t[i]),t.children&&t.children.length>0&&Rd(e,t.children,i)})},Ru=e=>{var t;if(!e||!(0,ri.Z)(e))return[];if(e.length>1){let t={links:[],nodes:[]};return e.forEach(e=>{"links"!==e.id&&"nodes"!==e.id||(t[e.id]=e.values)}),[t]}return(null==(t=e[0])?void 0:t.latestData)?e[0].latestData:e},Rc=(e,t)=>{if(!e||!(null==t?void 0:t.view)||!e.length)return[];let i=t.view();if(i.x1-i.x0==0||i.y1-i.y0==0||i.x1-i.x0==-1/0||i.x1-i.x0==1/0||i.y1-i.y0==-1/0||i.y1-i.y0==1/0)return[];let r=e[0];if(("source"!==t.sourceField||"target"!==t.targetField||"value"!==t.valueField)&&r.links){let e=[];r.links.forEach(i=>{let r={};for(let e in i)e===t.sourceField?r.source=i[t.sourceField]:e===t.targetField?r.target=i[t.targetField]:e===t.valueField?r.value=i[t.valueField]:r[e]=i[e];e.push(r)}),r.links=e}let n=new Rh.V(t),l=[];return l.push(n.layout(r,i)),l},Rp=e=>{var t,i;return e&&(0,ri.Z)(e)&&(null==(t=e[0])?void 0:t.latestData)&&e[0].latestData.length&&e[0].latestData[0]&&null!=(i=e[0].latestData[0].nodes)?i:[]},Rg=e=>{var t,i;return e&&(0,ri.Z)(e)&&(null==(t=e[0])?void 0:t.latestData)&&e[0].latestData.length&&e[0].latestData[0]&&null!=(i=e[0].latestData[0].links)?i:[]};class Rf extends m4{constructor(){super(...arguments),this._getDimensionData=e=>{if(e.source){if((0,nw.Z)(e.source)){let t=this.series.getSeriesKeys();return t[e.source]+" => "+t[e.target]}return e.source+" => "+e.target}return e.datum?e.datum[this.series.getSpec().categoryField]:e.key},this.markTooltipValueCallback=e=>e.value}}let Rm=(e,t=!0)=>({type:"horizontal"===e.direction?"growWidthIn":"growHeightIn",options:{overall:t?e.growFrom():t,orient:"positive"}}),Rb=(e,t)=>"fadeIn"===t?{type:"fadeIn"}:Rm(e),Ry=e=>"fadeIn"===e?{type:"fadeIn"}:{type:"linkPathGrowIn"},Rv=(e,t,i)=>{let r={x0:e.getFinalAttribute().x0,x1:e.getFinalAttribute().x1,y0:e.getFinalAttribute().y0,y1:e.getFinalAttribute().y1,thickness:e.getFinalAttribute().thickness};return{from:Object.assign({},r,{x1:r.x0,y1:r.y0}),to:r}},R_=(e,t,i)=>{let r={x0:e.getFinalAttribute().x0,x1:e.getFinalAttribute().x1,y0:e.getFinalAttribute().y0,y1:e.getFinalAttribute().y1,thickness:e.getFinalAttribute().thickness};return{from:r,to:Object.assign({},r,{x1:r.x0,y1:r.y0})}};class RC extends pp{onBind(){var e,t,i;super.onBind(),(null==(e=this.params)?void 0:e.diffAttrs)&&this.target.setAttributes(this.params.diffAttrs);let{from:r,to:n}=Rv(this.target,this.params.options,this.params),l=null!=(i=null==(t=this.target.context)?void 0:t.lastAttrs)?i:r,o=this.target.getFinalAttribute();o&&Object.assign(this.target.attribute,o),this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.animate.reSyncProps(),this.from=l,this.to=n,this.target.setAttributes(l)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.setAttributes(r)}}class Rx extends pp{onBind(){var e,t,i;super.onBind(),(null==(e=this.params)?void 0:e.diffAttrs)&&this.target.setAttributes(this.params.diffAttrs);let{from:r,to:n}=R_(this.target,this.params.options,this.params),l=null!=(i=null==(t=this.target.context)?void 0:t.lastAttrs)?i:r;this.props=n,this.propKeys=Object.keys(n).filter(e=>null!=n[e]),this.animate.reSyncProps(),this.from=l,this.to=n,this.target.setAttributes(l)}onUpdate(e,t,i){let r=this.target.attribute;this.propKeys.forEach(e=>{r[e]=this.from[e]+(this.to[e]-this.from[e])*t}),this.target.setAttributes(r)}}let Rw=()=>{hp.registerAnimation("sankeyNode",(e,t)=>Object.assign({appear:Rb(e,t)},mr)),hp.registerAnimation("sankeyLinkPath",(e,t)=>({appear:Ry(t),enter:{type:"linkPathGrowIn"},exit:{type:"linkPathGrowOut"},disappear:{duration:mt.disappear.duration}})),gz.registerBuiltInAnimate("linkPathGrowOut",Rx),gz.registerBuiltInAnimate("linkPathGrowIn",RC)},RS=(e,t)=>{var i;let r=null!=(i=e.curvature)?i:.5,n="number"==typeof t?e.thickness*t:e.thickness,l=e.x0,o=e.x1,a=e.y0,s=e.y1,h=l+r*(o-l),d=o+r*(l-o),u=e=>e;!1!==e.round&&(l=Math.round(l),o=Math.round(o),a=Math.round(a),s=Math.round(s),h=Math.round(h),d=Math.round(d),u=Math.round),"line"===e.pathType||e.pathType,"center"===e.align?(a=u(e.y0-n/2),s=u(e.y1-n/2)):"end"===e.align?(a=u(e.y0+e.thickness/2-n),s=u(e.y1+e.thickness/2-n)):(a=u(e.y0-e.thickness/2),s=u(e.y1-e.thickness/2));let c=u(a+n),p=u(s+n),g=Math.abs(o-l)>1e-6,f=e.endArrow&&g?`L${o},${u(s-n/2)}L${u(o+n)},${u((s+p)/2)}L${o},${u(p+n/2)}`:"",m=e.startArrow&&g?`L${l},${u(c+n/2)}L${u(l-n)},${u((a+c)/2)}L${l},${u(a-n/2)}`:"";return"line"===e.pathType?`M${l},${a}L${o},${s}${f}L${o},${p}L${l},${c}${m}Z`:"polyline"===e.pathType?`M${l},${a}L${h},${a}L${h},${s}L${o},${s}
    ${f}L${o},${p}L${h},${p}L${h},${c}L${l},${c}${m}Z`:`M${l},${a}C${h},${a},${d},${s},${o},${s}
  ${f}L${o},${p}C${d},${p},${h},${c},${l},${c}${m}Z`},RA=(e,t)=>{var i;let r=null!=(i=e.curvature)?i:.5,n="number"==typeof t?e.thickness*t:e.thickness,l=e.y0,o=e.y1,a=e.x0,s=e.x1,h=l+r*(o-l),d=o+r*(l-o),u=e=>e;!1!==e.round&&(u=Math.round,l=Math.round(l),o=Math.round(o),a=Math.round(a),s=Math.round(s),h=Math.round(h),d=Math.round(d)),"line"===e.pathType||e.pathType,"center"===e.align?(a=u(e.x0-n/2),s=u(e.x1-n/2)):"end"===e.align?(a=u(e.x0+e.thickness/2-n),s=u(e.x1+e.thickness/2-n)):(a=u(e.x0-e.thickness/2),s=u(e.x1-e.thickness/2));let c=u(a+n),p=u(s+n),g=Math.abs(o-l)>1e-6,f=e.endArrow&&g?`L${u(s-n/2)},${o}L${u((s+p)/2)},${u(o+n)}L${u(p+n/2)},${o}`:"",m=e.startArrow&&g?`L${u(c+n/2)},${l}L${u((c+a)/2)},${u(l-n)}L${u(a-n/2)},${l}`:"";return"line"===e.pathType?`M${a},${l}L${s},${o}${f}L${p},${o}L${c},${l}${m}Z`:"polyline"===e.pathType?`M${a},${l}L${a},${h}L${s},${h}L${s},${o}
    ${f}L${p},${o}L${p},${h}L${c},${h}L${c},${l}${m}Z`:`M${a},${l}C${a},${h},${s},${d},${s},${o}
  ${f}L${p},${o}C${p},${d},${c},${h},${c},${l}${m}Z`};class Rk extends TY{constructor(){super(...arguments),this.type=Rk.type,this._subMarks={back:{type:"path",defaultAttributes:{zIndex:0}},front:{type:"path",defaultAttributes:{zIndex:1}}},this._positionChannels=["x0","y0","x1","y1","thickness","round","curvature","ratio","pathType","align","endArrow","startArrow","ratio"],this._channelEncoder={backgroundStyle:e=>({back:e})},this._positionEncoder=(e,t,i)=>{var r,n;let l=Object.assign(Object.assign({},i.attribute),e),o=["vertical","TB","BT"].includes(null!=(r=l.direction)?r:null==(n=this._glyphConfig)?void 0:n.direction)?RA:RS,a="number"==typeof l.ratio&&l.ratio>=0&&l.ratio<=1;return{back:{path:a?o(l,1):""},front:{path:o(l,a?l.ratio:1)}}}}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,x0:0,y0:0,x1:100,y1:100,thickness:1,round:!0})}}Rk.type="linkPath";let RM=()=>{Tq(),_1(),hp.registerGraphicComponent("path",e=>_j(e)),hp.registerMark(Rk.type,Rk)},RT=Object.assign(Object.assign({},bo),{node:{name:"node",type:"rect"},link:{name:"link",type:"linkPath"}});class RR extends bC{_transformLabelSpec(e){this._addMarkLabelSpec(e,"node")}}let RE=(e,t,i,r=!0,n)=>{e.runtimeStateCache||(e.runtimeStateCache={}),e.runtimeStateCache[t]=i,e.hasState(t)&&e.removeState(t),e.addState(t,r,n)};class RP extends bA{constructor(){super(...arguments),this.type=z.sankey,this.transformerConstructor=RR,this._nodeLayoutZIndex=X.Node,this._labelLayoutZIndex=X.Label,this._viewBox=new t4.YZ,this._fillByNode=e=>{var t,i,r,n,l;if(e&&e.sourceRect&&e.targetRect)return this._fillByLink(e);let o=null==(i=null==(t=this._spec.node)?void 0:t.style)?void 0:i.fill;if((0,oV.Z)(o))return o;if((0,oV.Z)(this._spec.seriesField)){let t=null==(n=null==(r=this._option)?void 0:r.globalScale)?void 0:n.getScale("color"),i=(null==e?void 0:e.datum)?e.datum:e;return null==t?void 0:t.scale(null==i?void 0:i[this._spec.seriesField])}return null==(l=this._colorScale)?void 0:l.scale(this._getNodeNameFromData(e))},this._fillByLink=e=>{var t,i,r,n,l,o;let a=null==(i=null==(t=this._spec.link)?void 0:t.style)?void 0:i.fill;if(a)return a;if((0,oV.Z)(this._spec.seriesField)){let t=null==(r=this._nodesSeriesData.latestData)?void 0:r.find(t=>e.source===t.key),i=null==t?void 0:t.datum,o=null==(l=null==(n=this._option)?void 0:n.globalScale)?void 0:l.getScale("color");return null==o?void 0:o.scale(null==i?void 0:i[this._spec.seriesField])}let s=(0,nw.Z)(e.source)?this.getNodeList()[e.source]:e.source;return null==(o=this._colorScale)?void 0:o.scale(s)},this._handleEmphasisElement=e=>{var t;let i=null!=(t=this._spec.emphasis)?t:{},r=e.item;"adjacency"===i.effect?r&&e.mark===this._nodeMark?this._handleNodeAdjacencyClick(r):r&&e.mark===this._linkMark?this._handleLinkAdjacencyClick(r):this._handleClearEmpty():"related"===i.effect&&(r&&e.mark===this._nodeMark?this._handleNodeRelatedClick(r):r&&e.mark===this._linkMark?this._handleLinkRelatedClick(r):this._handleClearEmpty())},this._handleClearEmpty=()=>{var e,t;if(!this._needClear)return;let i=null==(e=this._nodeMark)?void 0:e.getGraphics();if(!i||!i.length)return;let r=null==(t=this._linkMark)?void 0:t.getGraphics();r&&r.length&&(i.forEach(e=>{e.removeState(Q.STATE_SANKEY_EMPHASIS),e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE)}),r.forEach(e=>{e.removeState(Q.STATE_SANKEY_EMPHASIS),e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE)}),this._needClear=!1)},this._handleNodeAdjacencyClick=e=>{let t=hW(e),i=[t.key];if(this._linkMark){let e=this._linkMark.getGraphics();if(!e||!e.length)return;e.forEach((e,r)=>{let n=hW(e);n.source===t.key?(i.includes(n.target)||i.push(n.target),e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE),e.addState(Q.STATE_SANKEY_EMPHASIS,!0)):n.target===t.key?(i.includes(n.source)||i.push(n.source),e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE),e.addState(Q.STATE_SANKEY_EMPHASIS,!0)):(e.removeState(Q.STATE_SANKEY_EMPHASIS),e.addState(Q.STATE_SANKEY_EMPHASIS_REVERSE,!0))})}this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),i),this._needClear=!0},this._handleLinkAdjacencyClick=e=>{let t=hW(e),i=[t.source,t.target];if(this._linkMark){let t=this._linkMark.getGraphics();if(!t||!t.length)return;t.forEach(t=>{t===e?(t.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE),RE(t,Q.STATE_SANKEY_EMPHASIS,{ratio:1})):(t.removeState(Q.STATE_SANKEY_EMPHASIS),t.addState(Q.STATE_SANKEY_EMPHASIS_REVERSE,!0))})}this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),i),this._needClear=!0},this._handleNodeRelatedClick=e=>{var t;let i=hW(e),r=this._nodeMark.getGraphics();if(!r||!r.length)return;let n=this._linkMark.getGraphics();if(!n||!n.length)return;let l=(null==(t=hW(n[0]))?void 0:t.parents)?"parents":"source";if("source"===l){let e=[i.key],t=[];if(n.forEach((n,l)=>{var o,a,s,h;let d=hW(n),u=(null==d?void 0:d.parents)?"parents":"source";if((0,ag.IX)(d[u]).includes(i.key)){if(t.includes(null!=(o=d.key)?o:d.index)||t.push(null!=(a=d.key)?a:d.index),e.includes(d.source)||e.push(d.source),!e.includes(d.target)){e.push(d.target);let i=r.find(e=>e.data[0].key===d.target).data[0].sourceLinks;for(;(null==i?void 0:i.length)>0;){let n=[];return i.forEach(i=>{var l,o;if(!t.includes(null!=(l=i.key)?l:i.index)&&(t.push(null!=(o=i.key)?o:i.index),!e.includes(i.target))){e.push(i.target);let t=r.find(e=>e.data[0].key===i.target);n.push(t.data[0].targetLinks)}}),void(i=n)}}}else if(d.target===i.key&&(t.includes(null!=(s=d.key)?s:d.index)||t.push(null!=(h=d.key)?h:d.index),!e.includes(d.source))){e.push(d.source);let i=r.find(e=>e.data[0].key===d.source).data[0].targetLinks;for(;(null==i?void 0:i.length)>0;){let n=[];return i.forEach(i=>{var l,o;if(!t.includes(null!=(l=i.key)?l:i.index)&&(t.push(null!=(o=i.key)?o:i.index),!e.includes(i.source))){e.push(i.source);let t=r.find(e=>e.data[0].key===i.source);n.push(t.data[0].targetLinks)}}),void(i=n)}}}),this._linkMark){let e=this._linkMark.getGraphics();if(!e||!e.length)return;e.forEach((e,i)=>{var r;let n=hW(e);t.includes(null!=(r=n.key)?r:n.index)?(e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE),e.addState(Q.STATE_SANKEY_EMPHASIS,!0)):(e.removeState(Q.STATE_SANKEY_EMPHASIS),e.addState(Q.STATE_SANKEY_EMPHASIS_REVERSE,!0))})}this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),e)}else{let e=[i.key],t=i.targetLinks.reduce((e,t)=>((0,ag.IX)(t.datum).forEach(t=>{let r=t.parents,n=r.length;for(let l=0;l<n;l++){let n=r[l].key,o=r[l+1]?r[l+1].key:i.key,a=t.value,s=e.find(e=>e.source===n&&e.target===o);s?s.value+=a:e.push({source:n,target:o,value:a})}}),e),[]);n.forEach((r,n)=>{let o=hW(r),a=o.datum,s=a?a.filter(e=>e[l].some(e=>e.key===i.key)):null,h=t.find(e=>e.source===o.source&&e.target===o.target);if(s&&s.length){e.includes(o.source)||e.push(o.source),e.includes(o.target)||e.push(o.target);let t=s.reduce((e,t)=>e+t.value,0)/o.value;return r.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE),void RE(r,Q.STATE_SANKEY_EMPHASIS,{ratio:t})}if(h)return e.includes(o.source)||e.push(o.source),e.includes(o.target)||e.push(o.target),r.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE),void RE(r,Q.STATE_SANKEY_EMPHASIS,{ratio:h.value/o.value});r.removeState(Q.STATE_SANKEY_EMPHASIS),r.addState(Q.STATE_SANKEY_EMPHASIS_REVERSE,!0)}),this._nodeMark&&this._highLightElements(this._nodeMark.getGraphics(),e)}this._needClear=!0},this._handleLinkRelatedClick=e=>{let t=this._nodeMark.getGraphics();if(!t||!t.length)return;let i=this._linkMark.getGraphics();if(i&&i.length){if("source"==(hW(e)?"parents":"source"))this._linkMark&&i.forEach(e=>{e.removeState(Q.STATE_SANKEY_EMPHASIS),e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE)}),this._nodeMark&&t.forEach(e=>{e.removeState(Q.STATE_SANKEY_EMPHASIS),e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE)});else{let r=hW(e),n=[r.source,r.target],l=[];(0,ag.IX)(r.datum).forEach(e=>{let t=e.parents,i=t.length;for(let r=0;r<i-1;r++){let i=t[r].key,n=t[r+1].key,o=e.value,a=l.find(e=>e.source===i&&e.target===n);l.push({source:t[r].key,target:t[r+1].key,value:e.value}),a?a.value+=o:l.push({source:i,target:n,value:o})}}),i.forEach(e=>{let t=hW(e),i=t.datum;if(t.source===r.source&&t.target===r.target)return e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE),void RE(e,Q.STATE_SANKEY_EMPHASIS,{ratio:1});let o=i?i.filter(e=>{let t=e.parents.map(e=>e.key);return t.includes(r.source)&&t.includes(r.target)}):null;if(o&&o.length){n.includes(t.source)||n.push(t.source),n.includes(t.target)||n.push(t.target);let i=o.filter(e=>e.parents.some((t,i)=>{var n;return t.key===r.source&&(null==(n=e.parents[i+1])?void 0:n.key)===r.target})).reduce((e,t)=>e+t.value,0)/t.value;return e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE),void RE(e,Q.STATE_SANKEY_EMPHASIS,{ratio:i})}let a=l.find(e=>e.source===t.source&&e.target===t.target);if(a)return n.includes(t.source)||n.push(t.source),n.includes(t.target)||n.push(t.target),e.removeState(Q.STATE_SANKEY_EMPHASIS_REVERSE),void RE(e,Q.STATE_SANKEY_EMPHASIS,{ratio:a.value/t.value});e.removeState(Q.STATE_SANKEY_EMPHASIS),e.addState(Q.STATE_SANKEY_EMPHASIS_REVERSE,!0)}),this._highLightElements(t,n)}this._needClear=!0}}}get direction(){var e;return null!=(e=this._spec.direction)?e:"horizontal"}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}setAttrFromSpec(){var e;super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(null!=(e=this._spec.seriesField)?e:this._spec.categoryField)}initData(){var e,t,i,r;super.initData();let n=this.getViewData(),l=this.getRawData();if(l&&n){hK(this._dataSet,"sankeyLayout",Rc),hK(this._dataSet,"sankeyFormat",Ru),l.transform({type:"sankeyFormat"},!1),n.transform({type:"sankeyLayout",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),sourceField:this._spec.sourceField,targetField:this._spec.targetField,valueField:this._spec.valueField,direction:this.direction,crossNodeAlign:this._spec.crossNodeAlign,nodeAlign:null!=(e=this._spec.nodeAlign)?e:"justify",nodeGap:null!=(t=this._spec.nodeGap)?t:8,nodeWidth:null!=(i=this._spec.nodeWidth)?i:10,linkWidth:this._spec.linkWidth,minStepWidth:this._spec.minStepWidth,minNodeHeight:null!=(r=this._spec.minNodeHeight)?r:4,maxNodeHeight:this._spec.maxNodeHeight,minLinkHeight:this._spec.minLinkHeight,maxLinkHeight:this._spec.maxLinkHeight,iterations:this._spec.iterations,nodeKey:this._spec.nodeKey,linkSortBy:this._spec.linkSortBy,nodeSortBy:this._spec.nodeSortBy,setNodeLayer:this._spec.setNodeLayer,dropIsolatedNode:this._spec.dropIsolatedNode,nodeHeight:this._spec.nodeHeight,linkHeight:this._spec.linkHeight,equalNodeHeight:this._spec.equalNodeHeight,linkOverlap:this._spec.linkOverlap,inverse:this._spec.inverse},level:G.sankeyLayout});let{dataSet:o}=this._option;hK(o,"sankeyNodes",Rp),hK(o,"flatten",MF);let a=new tf.V(o,{name:`sankey-node-${this.id}-data`});a.parse([this.getViewData()],{type:"dataview"}),a.transform({type:"sankeyNodes"}),a.transform({type:"flatten",options:{callback:e=>{if(e.datum){let t=e.datum[e.depth];return Object.assign(Object.assign({},e),t)}return e}}},!1),a.transform({type:"addVChartProperty",options:{beforeCall:bi.bind(this),call:br}},!1),this._nodesSeriesData=a,hK(o,"sankeyLinks",Rg);let s=new tf.V(o,{name:`sankey-link-${this.id}-data`});s.parse([this.getViewData()],{type:"dataview"}),s.transform({type:"sankeyLinks"}),s.transform({type:"addVChartProperty",options:{beforeCall:bi.bind(this),call:br}},!1),this._linksSeriesData=s}}compileData(){var e,t;super.compileData(),null==(e=this._linkMark)||e.compileData(),null==(t=this._nodeMark)||t.compileData()}initMark(){this._rootMark.setMarkConfig({overflow:this._spec.overflow,interactive:!!this._spec.overflow});let e=this._createMark(RP.mark.node,{isSeriesMark:!0,dataView:this._nodesSeriesData});e&&(e.setMarkConfig({zIndex:this._nodeLayoutZIndex}),this._nodeMark=e);let t=this._createMark(RP.mark.link,{dataView:this._linksSeriesData});t&&(this._linkMark=t)}_buildMarkAttributeContext(){super._buildMarkAttributeContext(),this._markAttributeContext.valueToNode=this.valueToNode.bind(this),this._markAttributeContext.valueToLink=this.valueToLink.bind(this)}valueToNode(e){let t=this._nodesSeriesData.latestData,i=(0,ag.IX)(e)[0];return t&&t.find(e=>e.key===i)}valueToLink(e){let t=this._linksSeriesData.latestData,i=(0,ag.IX)(e);return t&&t.find(e=>e&&e.source===i[0]&&e.target===i[1])}valueToPositionX(e){let t=this.valueToNode(e);return null==t?void 0:t.x0}valueToPositionY(e){let t=this.valueToNode(e);return null==t?void 0:t.y0}initMarkStyle(){this._initNodeMarkStyle(),this._initLinkMarkStyle()}_initNodeMarkStyle(){var e,t;let i=this._nodeMark;i&&(this.setMarkStyle(i,{x:e=>e.x0,x1:e=>e.x1,y:e=>e.y0,y1:e=>e.y1},Q.STATE_NORMAL,q.Mark),this.setMarkStyle(i,{fill:null!=(t=null==(e=this._spec.node.style)?void 0:e.fill)?t:this._fillByNode},"normal",q.User_Mark))}_initLinkMarkStyle(){var e,t;let i=this._linkMark;i&&(i.setGlyphConfig({direction:this.direction}),this.setMarkStyle(i,{x0:e=>e.x0,x1:e=>e.x1,y0:e=>e.y0,y1:e=>e.y1,thickness:e=>e.thickness},Q.STATE_NORMAL,q.Series),this.setMarkStyle(i,{fill:null!=(t=null==(e=this._spec.link.style)?void 0:e.fill)?t:this._fillByLink},"normal",q.User_Mark))}initLabelMarkStyle(e,t){if(!e)return;let i=t.position;i&&i.includes("inside")?this.setMarkStyle(e,{fill:"#ffffff",text:e=>this._createText(e,t),maxLineWidth:e=>{var i;return null!=(i=t.limit)?i:e.x1-e.x0}}):this.setMarkStyle(e,{fill:this._fillByNode,text:e=>this._createText(e,t),maxLineWidth:t.limit}),e.setMarkConfig({zIndex:this._labelLayoutZIndex})}_createText(e,t){if((0,r5.Z)(e)||(0,r5.Z)(e.datum))return"";let i=e.datum[this._spec.categoryField]||"",{formatMethod:r,formatter:n}=t||{},{formatFunc:l,args:o}=mK(r,n,i,e.datum);return l&&(i=l(...o,{series:this})),i}initAnimation(){var e,t,i,r;let n={direction:this.direction,growFrom:()=>{var e,t;return"horizontal"===this.direction?null==(e=this._xAxisHelper)?void 0:e.getScale(0).scale(0):null==(t=this._yAxisHelper)?void 0:t.getScale(0).scale(0)}},l=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset;this._nodeMark&&this._nodeMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("sankeyNode"))?void 0:i(n,l),bf("node",this._spec,this._markAttributeContext))),this._linkMark&&this._linkMark.setAnimationConfig(bg(null==(r=hp.getAnimationInKey("sankeyLinkPath"))?void 0:r(n,l),bf("link",this._spec,this._markAttributeContext)))}initEvent(){var e,t,i;super.initEvent(),null==(e=this._nodesSeriesData)||e.target.addListener("change",this.nodesSeriesDataUpdate.bind(this)),null==(t=this._linksSeriesData)||t.target.addListener("change",this.linksSeriesDataUpdate.bind(this));let r=null!=(i=this._spec.emphasis)?i:{};if(!0!==this._option.disableTriggerEvent&&r.enable&&("adjacency"===r.effect||"related"===r.effect)){let e="hover"===r.trigger?"pointerover":"pointerdown";this.event.on(e,{level:j.chart},this._handleEmphasisElement)}}nodesSeriesDataUpdate(){this._nodeMark.getData().updateData(),this._nodeList=null,this._setNodeOrdinalColorScale()}linksSeriesDataUpdate(){this._linkMark.getData().updateData()}_highLightElements(e,t){e&&e.length&&e.forEach(e=>{e.removeState([Q.STATE_SANKEY_EMPHASIS_REVERSE,Q.STATE_SANKEY_EMPHASIS]),t.includes(hW(e).key)?e.addState(Q.STATE_SANKEY_EMPHASIS,!0):e.addState(Q.STATE_SANKEY_EMPHASIS_REVERSE,!0)})}initTooltip(){this._tooltipHelper=new Rf(this),this._nodeMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodeMark),this._linkMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._linkMark)}_setNodeOrdinalColorScale(){var e,t,i,r,n;let l,o,a=null==(t=null==(e=this._option)?void 0:e.globalScale)?void 0:t.getScale("color");if(null==a?void 0:a._specified)return void(this._colorScale=a);a&&(l=a.domain(),o=a.range()),o||(o=this._getDataScheme()),l&&!(0,r5.Z)(l[0])||(l=this.getNodeList())&&l.length>10&&(o=null==(i=this._getDataScheme()[1])?void 0:i.scheme);let s=new cP;null==(n=(r=s.domain(l)).range)||n.call(r,o),this._colorScale=s}getNodeList(){var e,t;if(this._nodeList)return this._nodeList;let i=this._rawData.latestData[0],r=(null==i?void 0:i.nodes)?(null==(e=i.nodes[0])?void 0:e.children)?Array.from(this.extractNamesFromTree(i.nodes,this._spec.categoryField)):i.nodes.map((e,t)=>e[this._spec.categoryField]):(null==i?void 0:i.links)?Array.from(this.extractNamesFromLink(i.links)):null==(t=null==i?void 0:i.values)?void 0:t.map((e,t)=>e[this._spec.categoryField]);return this._nodeList=r,r}_getNodeNameFromData(e){var t;return(null==e?void 0:e.datum)?e.datum[this._spec.categoryField]:null!=(t=e.key)?t:e[this._spec.categoryField]}extractNamesFromTree(e,t){let i=new Set;return e.forEach(e=>{i.add(e[t]),e.children&&this.extractNamesFromTree(e.children,t).forEach(e=>i.add(e))}),i}extractNamesFromLink(e){let t=new Set,{sourceField:i,targetField:r}=this._spec;return e.forEach(e=>{(0,oV.Z)(e[i])&&t.add(e[i]),(0,oV.Z)(e[r])&&t.add(e[r])}),t}getDimensionField(){return[this._spec.categoryField]}getMeasureField(){return[this._valueField]}getRawDataStatisticsByField(e,t){var i;return this._rawStatisticsCache||(this._rawStatisticsCache={}),!this._rawStatisticsCache[e]&&(this._viewDataStatistics&&this.getViewData().transformsArr.length<=1&&(null==(i=this._viewDataStatistics.latestData)?void 0:i[e])?this._rawStatisticsCache[e]=this._viewDataStatistics.latestData[e]:this._rawData&&(this._rawStatisticsCache[e]={values:this._collectByField(e)})),this._rawStatisticsCache[e]}_collectByField(e){var t,i,r;let n=[],l=null==(i=null==(t=this.getRawData())?void 0:t.latestData)?void 0:i[0];if(!l)return[];if(l.links)(null==(r=l.nodes)?void 0:r.length)&&l.nodes.forEach(e=>{e[this._seriesField]&&n.push(e[this._seriesField])});else if(l.nodes){let e=new Set;return Rd(e,l.nodes,this._seriesField),Array.from(e)}return n}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this.getViewData().reRunAllTransform()}getDefaultShapeType(){return"square"}_noAnimationDataKey(e,t){}getActiveMarks(){return[this._nodeMark,this._linkMark]}getMarkData(e){return e.datum?(0,ri.Z)(e.datum)?e.datum[e.datum.length-1]:e.datum:e}}RP.type=z.sankey,RP.transformerConstructor=RR,RP.mark=RT,RP.builtInTheme={sankey:{link:{style:{fillOpacity:.15,round:!0}}}};let RB=()=>{wV(),RM(),AJ(),Rw(),ml(),hp.registerSeries(RP.type,RP)};class RI extends xA{_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["categoryField","valueField","sourceField","targetField","direction","nodeAlign","crossNodeAlign","nodeGap","nodeWidth","linkWidth","minStepWidth","minNodeHeight","maxNodeHeight","minLinkHeight","maxLinkHeight","dropIsolatedNode","nodeHeight","linkHeight","equalNodeHeight","linkOverlap","iterations","nodeKey","linkSortBy","nodeSortBy","setNodeLayer","node","link","emphasis","inverse","overflow"])}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}var RL=i(51996);function RF(){return"browser"===sI.env?["pointerup","pointerleave","pointercancel"]:["pointerup","pointerleave","pointerupoutside"]}let RH={debounce:hD.Z,throttle:hO.Z};dV(),ct();class RO extends yN{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},RO.defaultAttributes,e)),this.name="scrollbar",this._handleTouchMove=e=>{(0,oV.Z)(this._prePos)&&e.preventDefault()},this._onRailPointerDown=e=>{let t,{viewX:i,viewY:r}=e,{direction:n,width:l,height:o,range:a}=this.attribute,s=this._sliderSize,[h,d]=this._getScrollRange();if("vertical"===n){let e=r-this._viewPosition.y,i=(0,g9.Z)(e-s/2,h,d);t=e/o,this._slider.setAttribute("y",i,!0)}else{let e=i-this._viewPosition.x,r=(0,g9.Z)(e-s/2,h,d);t=e/l,this._slider.setAttribute("x",r,!0)}this.setScrollRange([t-(a[1]-a[0])/2,t+(a[1]-a[0])/2],!1),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()},this._onSliderPointerDown=e=>{this._clearDragEvents();let{stopSliderDownPropagation:t=!0}=this.attribute;t&&e.stopPropagation();let{direction:i}=this.attribute,{x:r,y:n}=this.stage.eventPointTransform(e);this._prePos="horizontal"===i?r:n,this._dispatchEvent("scrollDown",{pos:this._prePos,event:e});let l=RF(),o="browser"===sI.env?sI:this.stage;o.addEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),l.forEach(e=>{o.addEventListener(e,this._onSliderPointerUp)})},this._computeScrollValue=e=>{let{direction:t}=this.attribute,{x:i,y:r}=this.stage.eventPointTransform(e),n,l,o=0,{width:a,height:s}=this.getSliderRenderBounds();return n="vertical"===t?((l=r)-this._prePos)/s:((l=i)-this._prePos)/a,[l,n]},this._onSliderPointerMove=e=>{let{stopSliderMovePropagation:t=!0}=this.attribute;t&&e.stopPropagation();let i=this.getScrollRange(),[r,n]=this._computeScrollValue(e);this.setScrollRange([i[0]+n,i[1]+n],!0),this._prePos=r},this._onSliderPointerMoveWithDelay=0===this.attribute.delayTime?this._onSliderPointerMove:RH[this.attribute.delayType](this._onSliderPointerMove,this.attribute.delayTime),this._onSliderPointerUp=e=>{let{range:t,limitRange:i=[0,1]}=this.attribute,r=this.getScrollRange(),[n,l]=this._computeScrollValue(e),o=[r[0]+l,r[1]+l];this._prePos=null,this._dispatchEvent("scrollUp",{pre:t,value:(0,RL.Z)(o,i[0],i[1])}),this._clearDragEvents()}}setScrollRange(e,t=!0){let{direction:i="horizontal",limitRange:r=[0,1],range:n,realTime:l=!0}=this.attribute,o=(0,RL.Z)(e,r[0],r[1]);if(t){let e=this._getSliderPos(o);if(this._slider){let t=e[1]-e[0];this._sliderSize=t,"horizontal"===i?this._slider.setAttributes({x:e[0],width:t},!0):this._slider.setAttributes({y:e[0],height:t},!0),this.stage&&!this.stage.autoRender&&this.stage.renderNextFrame()}}this.attribute.range=o,l&&this._dispatchEvent(pY,{pre:n,value:o})}getScrollRange(){return this.attribute.range}bindEvents(){if(this.attribute.disableTriggerEvent)return;let{delayType:e="throttle",delayTime:t=0}=this.attribute;this._rail&&this._rail.addEventListener("pointerdown",RH[e](this._onRailPointerDown,t)),this._slider&&this._slider.addEventListener("pointerdown",this._onSliderPointerDown),("browser"===sI.env?sI:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1})}render(){let e;this._reset();let{direction:t="horizontal",width:i,height:r,range:n,limitRange:l=[0,1],railStyle:o,sliderStyle:a,padding:s=2}=this.attribute,h=this.createOrUpdateChild("scrollbar-container",{},"group"),d=h.createOrUpdateChild("scrollbar-rail",Object.assign({x:0,y:0,width:i,height:r},o),"rect");this._rail=d;let u=this.getSliderRenderBounds(),c=this._getSliderPos((0,RL.Z)(n,l[0],l[1])),p=c[1]-c[0];this._sliderSize=p,e="horizontal"===t?{x:c[0],y:u.y1,width:p,height:u.height}:{x:u.x1,y:c[0],width:u.width,height:p};let g=h.createOrUpdateChild("slider",Object.assign(Object.assign(Object.assign(Object.assign({},e),{cornerRadius:this._getDefaultSliderCornerRadius()}),a),{boundsPadding:(0,_6.o)(s),pickMode:"imprecise"}),"rect");this._slider=g,this._container=h;let f=this._container.AABBBounds;this._viewPosition={x:f.x1,y:f.y1}}getSliderRenderBounds(){if(this._sliderRenderBounds)return this._sliderRenderBounds;let{width:e,height:t,padding:i=2}=this.attribute,[r,n,l,o]=(0,_6.o)(i),a={x1:o,y1:r,x2:e-n,y2:t-l,width:Math.max(0,e-(o+n)),height:Math.max(0,t-(r+l))};return this._sliderRenderBounds=a,a}_getDefaultSliderCornerRadius(){let{direction:e,round:t}=this.attribute;if(t){let{width:t,height:i}=this.getSliderRenderBounds();return"horizontal"===e?i:t}return 0}_getSliderPos(e){let{direction:t}=this.attribute,{width:i,height:r,x1:n,y1:l}=this.getSliderRenderBounds();return"horizontal"===t?[i*e[0]+n,i*e[1]+n]:[r*e[0]+l,r*e[1]+l]}_getScrollRange(){if(this._sliderLimitRange)return this._sliderLimitRange;let{limitRange:e=[0,1],direction:t}=this.attribute,[i,r]=(0,RL.Z)(e,0,1),{width:n,height:l,x1:o,y1:a}=this.getSliderRenderBounds(),s=this._sliderSize;return"horizontal"===t?(0,RL.Z)([o+i*n,o+r*n],o,n-s):(0,RL.Z)([a+i*l,a+r*l],a,l-s)}_clearDragEvents(){let e=RF(),t="browser"===sI.env?sI:this.stage;t.removeEventListener("pointermove",this._onSliderPointerMoveWithDelay,{capture:!0}),e.forEach(e=>{t.removeEventListener(e,this._onSliderPointerUp)})}_reset(){this._sliderRenderBounds=null,this._sliderLimitRange=null}release(e){super.release(e),("browser"===sI.env?sI:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}),this._clearDragEvents()}}RO.defaultAttributes={direction:"horizontal",round:!0,sliderSize:20,sliderStyle:{fill:"rgba(0, 0, 0, .5)"},railStyle:{fill:"rgba(0, 0, 0, .0)"},padding:2,scrollRange:[0,1],delayType:"throttle",delayTime:0,realTime:!0};let RD=eW=class{constructor(){this.name="scrollbar",this.activeEvent="onRegister",this._uid=tm.GenAutoIncrementId(),this.key=this.name+this._uid,this.scroll=e=>{var t,i;let r=e.target,n=this.getScrollContainer(r);if(!n&&!this.scrollContainer)return;if(!n&&this.scrollContainer){if(!this.scrollContainer.g.stage||this.scrollContainer.g.stage!==r.stage)return;let e=this.formatScrollContainer(this.scrollContainer.g);if(!e)return void this.clearScrollbar(this.scrollContainer.g,"all");this.scrollContainer.showH&&!e.showH&&this.clearScrollbar(this.scrollContainer.g,"horizontal"),this.scrollContainer.showV&&!e.showV&&this.clearScrollbar(this.scrollContainer.g,"vertical"),this.scrollContainer=e}else n&&this.scrollContainer&&n.g!==this.scrollContainer.g&&this.clearScrollbar(this.scrollContainer.g,"all");if(this.scrollContainer=null!=n?n:this.scrollContainer,!n)return;let l=n.g;if(!l)return;let{width:o,height:a,scrollX:s=0,scrollY:h=0}=l.attribute,d=s,u=h,{showH:c,showV:p}=n;this.scrollContainerBounds=(new t4.YZ).set(0,0,l.attribute.width,l.attribute.height),c&&c&&((0,t0.Wn)(e.deltaX)>(0,t0.Wn)(e.deltaY)?(c=c&&!0,p=p&&!1):(c=c&&!1,p=p&&!0));let g=this.childrenBounds.width(),f=this.childrenBounds.height();c&&((d=s-(null!=(t=e.deltaX)?t:0))>0?d=0:d<o-g&&(d=o-g)),p&&((u=h-(null!=(i=e.deltaY)?i:0))>0?u=0:u<a-f&&(u=a-f)),l.setAttributes({scrollX:d,scrollY:u}),this.addOrUpdateScroll(c,p,l.parent,l)},this.handleScrollBarChange=e=>{if(!(this.scrollContainer&&this.scrollContainerBounds&&this.childrenBounds&&e&&e.target&&e.detail&&e.detail.value))return;let t=e.target,i=e.detail.value;if("horizontal"===t.attribute.direction){let e=this.childrenBounds.width();this.scrollContainer.g.setAttributes({scrollX:-i[0]*e})}else{let e=this.childrenBounds.height();this.scrollContainer.g.setAttributes({scrollY:-i[0]*e})}}}activate(e){this.pluginService=e;let{stage:t}=this.pluginService;this.childrenBounds=new t4.FB,t.addEventListener("wheel",this.scroll),this.params=eW.defaultParams}initEventOfScrollbar(e,t,i){e.addEventListener("pointerover",()=>{t.setAttribute("visibleAll",!0)}),e.addEventListener("pointermove",()=>{t.setAttribute("visibleAll",!0)}),e.addEventListener("pointerout",()=>{t.setAttribute("visibleAll",!1)}),t.addEventListener("pointerover",()=>{t.setAttribute("visibleAll",!0)}),t.addEventListener("pointerout",()=>{t.setAttribute("visibleAll",!0)}),t.addEventListener("scrollUp",this.handleScrollBarChange),t.addEventListener(pY,this.handleScrollBarChange)}addOrUpdateScroll(e,t,i,r){if(e){let{scrollBar:e,isUpdate:t}=this.addOrUpdateHScroll(r,i,!0);t||this.initEventOfScrollbar(r,e,!0)}else this.clearScrollbar(r,"horizontal");if(t){let{scrollBar:e,isUpdate:t}=this.addOrUpdateHScroll(r,i,!1);t||this.initEventOfScrollbar(r,e,!1)}else this.clearScrollbar(r,"vertical")}getDirection(e){return e?"horizontal":"vertical"}addOrUpdateHScroll(e,t,i){var r,n;let l=this.getDirection(i),o=`${null!=(r=e.name)?r:e._uid}_${this.getDirection(i)}_${this.name}`,a=t.children.filter(e=>e.name===o),s=!0,h=a[0],{y:d=0,dy:u=0,x:c=0,dx:p=0,height:g,width:f,zIndex:m=0}=this.scrollContainer.g.attribute,b={x:0,y:0,direction:l,zIndex:m+1,visibleAll:!0,padding:[2,0],railStyle:{fill:"rgba(0, 0, 0, .1)"},range:[0,.05]};i?(b.width=this.scrollContainerBounds.width(),b.height=12):(b.height=this.scrollContainerBounds.height(),b.width=12),h?a.length>1&&a.forEach((e,t)=>{var i;t&&(null==(i=e.parent)||i.removeChild(e))}):(s=!1,(h=new RO(b)).name=o,t.add(h),h.isScrollBar=!0);let y=this.childrenBounds,{scrollX:v,scrollY:_}=e.attribute;if(i){let e=Math.min(this.scrollContainerBounds.width()/y.width(),1),t=Math.max(Math.min(v/this.childrenBounds.width(),0),e-1);b.x=c+p,b.y=d+u+g-(null!=(n=b.height)?n:0),b.range=[-t,-t+e]}else{let e=Math.min(this.scrollContainerBounds.height()/y.height(),1),t=Math.max(Math.min(_/this.childrenBounds.height(),0),e-1);b.x=c+p+f-this.scrollContainerBounds.width(),b.y=d+u,b.range=[-t,-t+e]}return h.setAttributes(b),{scrollBar:h,isUpdate:s}}clearScrollbar(e,t){e.parent&&e.parent.children.filter(e=>e.isScrollBar&&("all"===t||e.attribute.direction===t)).forEach(e=>{e.parent.removeChild(e)})}formatScrollContainer(e){if(!e||"group"!==e.type||!e.attribute)return null;let{overflow:t,width:i,height:r}=e.attribute;if(!t||"hidden"===t)return null;let n=!1,l=!1;"scroll"===t?(n=!0,l=!0):l=!(n="scroll-x"===t);let o=this.childrenBounds;return o.clear(),e.forEachChildren(e=>{o.union(e.AABBBounds)}),e.AABBBounds.empty()||(n&&(n=i<o.width()),l&&(l=r<o.height())),n||l?{g:e,showH:n,showV:l}:null}getScrollContainer(e){let t=e;for(;t;){let e=this.formatScrollContainer(t);if(e)return e;t=t.parent}return null}deactivate(e){let{stage:t}=this.pluginService;t.removeEventListener("wheel",this.scroll)}};RD.defaultParams={timeout:500},RD=eW=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],RD);let Rz=new tb((e,t,i,r)=>{i(RD)||(e(RD).toSelf(),e(oQ).toService(RD))});class RW extends xB{constructor(){super(...arguments),this.transformerConstructor=RI,this.type="sankey",this.seriesType=z.sankey}_setStateInDatum(e,t,i,r){let n=(0,ri.Z)(t)?t[0]:t;if(!n)return void this._interaction.clearByState(e);let l=null;this.filterGraphicsByDatum(n,{filter:(e,t)=>"text"!==t.type&&t.getProduct()&&(!i||i(e,t)),region:r,getDatum:e=>{var t;let i=null==(t=hW(e))?void 0:t.datum;return(0,ri.Z)(i)&&(i=i[0]),i},callback:(e,t,i,r)=>{var n;let l=t.getProductId();l&&(l.includes("node")||l.includes("link"))&&(null==(n=i._handleEmphasisElement)||n.call(i,{item:e,mark:t}))},regionCallback:(e,t)=>{n&&e.length&&(l=e[0])}}),l&&this._interaction.updateStateOfGraphics(e,[l])}}RW.type="sankey",RW.seriesType=z.sankey,RW.transformerConstructor=RI;class RZ extends m4{constructor(){super(...arguments),this._getMeasureData=e=>"horizontal"===this.series.getSpec().direction?e[this.series.getSpec().xField[0]]+"-"+e[this.series.getSpec().xField[1]]:e[this.series.getSpec().yField[0]]+"-"+e[this.series.getSpec().yField[1]]}}let RN=Object.assign({},wR);class R$ extends wB{constructor(){super(...arguments),this.type=z.rangeArea}initMark(){this._areaMark=this._createMark(R$.mark.area,{groupKey:this._seriesField,isSeriesMark:!0},{morphElementKey:this.getDimensionField()[0]})}initMarkStyle(){this.initAreaMarkStyle()}initAreaMarkStyle(){let e=this._areaMark;e&&(super.initAreaMarkStyle(),"horizontal"===this._direction?this.setMarkStyle(this._areaMark,{x1:e=>{if(!this._xAxisHelper)return Number.NaN;let{dataToPosition:t}=this._xAxisHelper;return t(this.getDatumPositionValues(e,this._spec.xField[1]),{bandPosition:this._bandPosition})}},"normal",q.Series):this.setMarkStyle(this._areaMark,{y1:e=>{if(!this._yAxisHelper)return Number.NaN;let{dataToPosition:t}=this._yAxisHelper;return t(this.getDatumPositionValues(e,this._spec.yField[1]),{bandPosition:this._bandPosition})}},"normal",q.Series),this.setMarkStyle(e,{stroke:!1},"normal",q.Series))}initTooltip(){this._tooltipHelper=new RZ(this)}_isFieldAllValid(){let e=this.getViewDataStatistics(),t=this.fieldY;return!!(e&&e.latestData&&t.length)&&t.every(t=>e.latestData[t]&&e.latestData[t].allValid)}}R$.type=z.rangeArea,R$.mark=RN;let Rj=()=>{wM(),C1(),xa(),hp.registerSeries(R$.type,R$)};class RG extends xk{_getDefaultSeriesSpec(e){var t,i;let r=super._getDefaultSeriesSpec(e);return r.area=e.area,r.point=e.point,r.line=e.line,"horizontal"===e.direction?r.xField=null!=(t=e.xField)?t:[e.minField,e.maxField]:r.yField=null!=(i=e.yField)?i:[e.minField,e.maxField],r.stack=!1,r}transformSpec(e){super.transformSpec(e),ci(e)}}class RV extends xB{constructor(){super(...arguments),this.transformerConstructor=RG,this.type="rangeArea",this.seriesType=z.rangeArea}_setModelOption(){this._modelOption.getDimensionInfo=x1,this._modelOption.getDimensionInfoByValue=x3,this._modelOption.getRectByDimensionData=x9}}RV.type="rangeArea",RV.seriesType=z.rangeArea,RV.transformerConstructor=RG;class RU extends pz{constructor(){super(...arguments),this.type=RU.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{fill:void 0,lineWidth:0,padding:0})}_createGraphic(e={}){return a1(e)}_transformGraphicAttributes(e,t,i){var r,n,l;let o=super._transformGraphicAttributes(e,t,i),a=null!=(n=null!=(r=o.shape)?r:o.symbolType)?n:null==(l=e.attribute)?void 0:l.symbolType;return(0,r5.Z)(a)?o.symbolType="rect":o.symbolType=a,o}}RU.type="cell";let RK=()=>{hp.registerMark(RU.type,RU),hp.registerGraphicComponent("symbol",a1),pN(),uN(),y0()},RX=()=>{hp.registerAnimation("heatmap",(e,t)=>Object.assign(Object.assign({},mr),{appear:!1===t?{}:{type:"fadeIn"}}))};class RY extends m4{enableByType(e){return"dimension"!==e}}let Rq=Object.assign(Object.assign({},bo),{cell:{name:"cell",type:"cell"},cellBackground:{name:"cellBackground",type:"cell"}});class RJ extends bC{_transformLabelSpec(e){this._addMarkLabelSpec(e,"cell")}}class RQ extends bA{constructor(){super(...arguments),this.type=z.heatmap,this.transformerConstructor=RJ}getFieldValue(){return this._fieldValue}setFieldValue(e){this._fieldValue=(0,ag.IX)(e)}setAttrFromSpec(){super.setAttrFromSpec(),this.setFieldValue(this._spec.valueField)}initMark(){this._cellMark=this._createMark(RQ.mark.cell,{isSeriesMark:!0},{morph:by(this._spec,RQ.mark.cell.name),morphElementKey:this.getDimensionField()[0]}),this._backgroundMark=this._createMark(RQ.mark.cellBackground)}initMarkStyle(){this.initCellMarkStyle(),this.initCellBackgroundMarkStyle()}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this.getMeasureField()[0]]})}initCellMarkStyle(){this.setMarkStyle(this._cellMark,{x:e=>this.dataToPositionX(e),y:e=>this.dataToPositionY(e),size:()=>[this.getCellSize(this._xAxisHelper),this.getCellSize(this._yAxisHelper)],fill:this.getColorAttribute()},"normal",q.Series)}initCellBackgroundMarkStyle(){var e,t,i;let r=(0,_6.o)(null!=(i=null==(t=null==(e=this._spec.cellBackground)?void 0:e.style)?void 0:t.padding)?i:0);this.setMarkStyle(this._backgroundMark,{x:e=>{let t=this.getCellSize(this._xAxisHelper);return this.dataToPositionX(e)-t/2+r[3]},y:e=>{let t=this.getCellSize(this._yAxisHelper);return this.dataToPositionY(e)-t/2+r[0]},width:()=>this.getCellSize(this._xAxisHelper)-r[1]-r[3],height:()=>this.getCellSize(this._yAxisHelper)-r[0]-r[2]},"normal",q.Series)}getColorAttribute(){var e;return{scale:null!=(e=this._option.globalScale.getScale("color"))?e:this._getDefaultColorScale(),field:this.getFieldValue()[0]}}getInteractionTriggers(){return this._parseInteractionConfig(this._cellMark?[this._cellMark]:[])}initAnimation(){var e,t,i;let r=null==(t=null==(e=this._spec)?void 0:e.animationAppear)?void 0:t.preset,n=bS(this);this._cellMark.setAnimationConfig(bg(null==(i=hp.getAnimationInKey("heatmap"))?void 0:i(r),bf("cell",this._spec,this._markAttributeContext),n))}getCellSize(e){var t,i;return null!=(i=null==(t=e.getBandwidth)?void 0:t.call(e,0))?i:6}initTooltip(){this._tooltipHelper=new RY(this),this._cellMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._cellMark)}getDefaultShapeType(){return"rect"}getDimensionField(){return[].concat(this.fieldX,this.fieldY)}getMeasureField(){return this.getFieldValue()}getActiveMarks(){return[this._cellMark]}}RQ.type=z.heatmap,RQ.mark=Rq,RQ.builtInTheme={heatmap:{cell:{style:{shape:"rect",fillOpacity:1}},cellBackground:{visible:!1}}},RQ.transformerConstructor=RJ;let R0=()=>{AJ(),RK(),RX(),C1(),xa(),hp.registerSeries(RQ.type,RQ)};class R1 extends xk{_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["valueField","cell"])}}class R2 extends xB{constructor(){super(...arguments),this.transformerConstructor=R1,this.type="heatmap",this.seriesType=z.heatmap}}R2.type="heatmap",R2.seriesType=z.heatmap,R2.transformerConstructor=R1;let R3=Object.assign(Object.assign({},bo),{nodePoint:{name:"nodePoint",type:"symbol"},ripplePoint:{name:"ripplePoint",type:"ripple"},centerPoint:{name:"centerPoint",type:"symbol"},centerLabel:{name:"centerLabel",type:"text"}});var R4=i(22197),R5=i(4988),R6=i(93690);let R8=`${dg}_CORRELATION_X`,R7=`${dg}_CORRELATION_Y`,R9=`${dg}_CORRELATION_SIZE`,Ee=(e,t)=>{var i,r,n,l,o,a,s,h,d,u,c,p,g,f,m;if(!e||!(null==t?void 0:t.view)||!(0,ri.Z)(e))return e;let b=t.view();if(b.x1-b.x0==0||b.y1-b.y0==0||b.x1-b.x0==-1/0||b.x1-b.x0==1/0||b.y1-b.y0==-1/0||b.y1-b.y0==1/0)return e;let y=(0,t9.M4)(null!=(i=t.startAngle)?i:-90),v=(0,t9.M4)(null!=(r=t.endAngle)?r:270),_=Math.max((b.x1-b.x0)/2,(b.y1-b.y0)/2),C=(0,R4.y)(null!=(n=t.innerRadius)?n:0,_),x=(0,R4.y)(t.outerRadius,_),w=[(0,nw.Z)(null==(l=t.center)?void 0:l[0])?t.center[0]:b.x0+(0,R4.y)(null!=(a=null==(o=t.center)?void 0:o[0])?a:"50%",b.x1-b.x0),(0,nw.Z)(null==(s=t.center)?void 0:s[1])?t.center[1]:b.y0+(0,R4.y)(null!=(d=null==(h=t.center)?void 0:h[1])?d:"50%",b.y1-b.y0)],S=(0,R5.EP)(t.field),A=e.map(S),[k,M]=(0,R6.W)(A),T=k===M?e=>(C+x)/2:e=>C+(x-C)*(e-k)/(M-k),R=(0,r5.Z)(t.radiusField)?S:(0,R5.EP)(t.radiusField),E=null!=(c=null==(u=null==t?void 0:t.radiusRange)?void 0:u[1])?c:5,P=e=>E;if(R){let[i,r]=R!==S?(0,R6.W)(e.map(R)):[k,M],n=null!=(g=null==(p=t.radiusRange)?void 0:p[0])?g:5,l=null!=(m=null==(f=t.radiusRange)?void 0:f[1])?m:5;i!==r&&(P=e=>n+(l-n)*(R(e)-i)/(r-i))}let B=Math.min(y,v),I=Math.max(y,v),L=Et(B,I,e.length),F=[],H=(I-B)/60;return e.forEach((e,t)=>{let i=T(A[t]),r=P(e),n,l,o=L[t];for(let e=0;e<60&&(Ei({x:n=w[0]+i*Math.cos(o),y:l=w[1]+i*Math.sin(o),size:r},F)||n-r<b.x0||n+r>b.x1||l-r<b.y0||l+r>b.y1);e++)e<59&&((o+=H)>I?o=B:o<B&&(o=I));F.push(Object.assign({[R8]:n,[R7]:l,[R9]:r},e))}),F},Et=(e,t,i)=>{let r=0,n=Math.max(Math.ceil(2*(t-e)/Math.PI),2),l=(t-e)/n,o=0,a=1,s=0,h=0,d=[],u=e;for(;s<i;)h<n&&(d.push(u+(h%2?Math.floor(h/2)+Math.floor(n/2):h/2)*l*a),h++),s++,h===n&&(h=0,o+=1,a*=-1,0===r?r=l/2:r/=2,u=-1===a?t-r:e+r,o>=2&&(l/=2,n*=2));return d},Ei=(e,t)=>!(!t||!t.length)&&t.some(t=>Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(e.size+t.size,2)),Er=(e,t)=>{if(!e||!(0,ri.Z)(e))return[];let{keyword:i,categoryField:r}=t,n=e[0].latestData[0];return{[r]:i,[df]:null==n?void 0:n[df],[db]:null==n?void 0:n[db]}};class En extends TY{constructor(){super(...arguments),this.type=En.type,this._subMarks={ripple0:{type:"symbol",defaultAttributes:{fillOpacity:.75}},ripple1:{type:"symbol",defaultAttributes:{fillOpacity:.5}},ripple2:{type:"symbol",defaultAttributes:{fillOpacity:.25}}},this._positionChannels=["ripple","size"],this._positionEncoder=(e,t,i)=>{let{ripple:r=i.attribute.ripple,size:n=i.attribute.size}=e,l=(0,g9.Z)(r,0,1),o=.5*n;return{ripple0:{size:n+o*l,fillOpacity:.75-.25*l},ripple1:{size:n+o*(1+l),fillOpacity:.5-.25*l},ripple2:{size:n+o*(2+l),fillOpacity:.25-.25*l}}}}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{x:0,y:0,ripple:0})}}En.type="ripple";let El=()=>{Tq(),uN(),hp.registerMark(En.type,En),hp.registerGraphicComponent("symbol",e=>a1(e))},Eo=(e,t)=>"fadeIn"===t?{type:"fadeIn"}:{type:"scaleIn"},Ea=()=>{hp.registerAnimation("correlation",(e,t)=>Object.assign({appear:Eo(0,t)},mi))};class Es extends bC{_transformLabelSpec(e){this._addMarkLabelSpec(e,"nodePoint"),this._addMarkLabelSpec(e,"centerPoint","centerLabel")}}class Eh extends SA{constructor(){super(...arguments),this.type=z.correlation,this.transformerConstructor=Es,this._viewBox=new t4.YZ}getCategoryField(){return this._categoryField}setCategoryField(e){return this._categoryField=e,this._categoryField}getValueField(){return this._valueField}setValueField(e){return this._valueField=e,this._valueField}getSeriesField(){return this._seriesField}setSeriesField(e){(0,oV.Z)(e)&&(this._seriesField=e)}getSizeField(){return this._sizeField}setSizeField(e){(0,oV.Z)(e)&&(this._sizeField=e)}getSizeRange(){return this._sizeRange}setSizeRange(e){(0,oV.Z)(e)&&(this._sizeRange=e)}setAttrFromSpec(){super.setAttrFromSpec(),this.setCategoryField(this._spec.categoryField),this.setValueField(this._spec.valueField),this.setSeriesField(this._spec.seriesField),this.setSizeField(this._spec.sizeField),this.setSizeRange(this._spec.sizeRange)}initData(){var e,t,i;if(super.initData(),!this._data)return;hK(this._dataSet,"correlation",Ee);let r=new tp.q;hX(r,"dataview",tg.i),hK(r,"correlationCenter",Er);let n=new tf.V(r,{name:`${this.type}_${this.id}_center`});n.parse([this.getViewData()],{type:"dataview"}),n.transform({type:"correlationCenter",options:{keyword:null!=(i=null==(t=null==(e=this._spec.centerLabel)?void 0:e.style)?void 0:t.text)?i:"",categoryField:this._spec.categoryField}}),this._centerSeriesData=new cj(this._option,n)}compileData(){var e;super.compileData(),null==(e=this._centerSeriesData)||e.compile()}_statisticViewData(){super._statisticViewData(),this._data.getDataView().transform({type:"correlation",options:{view:()=>({x0:this._viewBox.x1,x1:this._viewBox.x2,y0:this._viewBox.y1,y1:this._viewBox.y2}),field:this._spec.valueField,radiusRange:this._spec.sizeRange,radiusField:this._spec.sizeField,center:[this._spec.centerX,this._spec.centerY],innerRadius:this._spec.innerRadius,outerRadius:this._spec.outerRadius,startAngle:this._spec.startAngle,endAngle:this._spec.endAngle}})}initMark(){let e=this._createMark(Eh.mark.nodePoint,{groupKey:this._seriesField,isSeriesMark:!0,key:df});e&&(e.setMarkConfig({zIndex:X.Node}),this._nodePointMark=e);let t=this._createMark(Eh.mark.ripplePoint,{key:df,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId()});t&&(this._ripplePointMark=t);let i=this._createMark(Eh.mark.centerPoint,{key:df,dataView:this._centerSeriesData.getDataView(),dataProductId:this._centerSeriesData.getProductId()});i&&(i.setMarkConfig({zIndex:X.Node}),this._centerPointMark=i)}initMarkStyle(){this._initNodePointMarkStyle(),this._initRipplePointMarkStyle(),this._initCenterPointMarkStyle()}_initNodePointMarkStyle(){var e,t,i,r;let n=this._nodePointMark;if(!n)return;let l=null!=(t=null==(e=this._spec.nodePoint)?void 0:e.style)?t:{};this.setMarkStyle(n,{x:e=>e[R8],y:e=>e[R7],size:e=>e[R9],fill:null!=(i=l.fill)?i:this.getColorAttribute(),fillOpacity:null!=(r=l.fillOpacity)?r:1,lineWidth:0},Q.STATE_NORMAL,q.Series)}_initRipplePointMarkStyle(){var e,t,i,r,n;let l=this._ripplePointMark;if(!l)return;let o=null!=(t=null==(e=this._spec.ripplePoint)?void 0:e.style)?t:{};this.setMarkStyle(l,{x:()=>{var e;return null!=(e=this._spec.centerX)?e:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var e;return null!=(e=this._spec.centerY)?e:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:null!=(i=o.fill)?i:this.getColorAttribute(),opacity:null!=(r=o.fillOpacity)?r:.2,ripple:null!=(n=o.ripple)?n:0},Q.STATE_NORMAL,q.Series)}_initCenterPointMarkStyle(){var e,t,i,r,n,l;let o=this._centerPointMark;o&&this.setMarkStyle(o,{x:()=>{var e;return null!=(e=this._spec.centerX)?e:(this._viewBox.x1+this._viewBox.x2)/2},y:()=>{var e;return null!=(e=this._spec.centerY)?e:(this._viewBox.y1+this._viewBox.y2)/2},size:()=>.2*Math.max(this._viewBox.x2-this._viewBox.x1,this._viewBox.y2-this._viewBox.y1)/2,fill:null!=(i=null==(t=null==(e=this._spec.centerPoint)?void 0:e.style)?void 0:t.fill)?i:this.getColorAttribute(),fillOpacity:null!=(l=null==(n=null==(r=this._spec.centerPoint)?void 0:r.style)?void 0:n.fillOpacity)?l:1},Q.STATE_NORMAL,q.Series)}initTooltip(){super.initTooltip(),this._nodePointMark&&this._tooltipHelper.activeTriggerSet.mark.add(this._nodePointMark)}initLabelMarkStyle(e){e&&this.setMarkStyle(e,{fill:this.getColorAttribute(),text:e=>e[this._categoryField],z:this.dataToPositionZ.bind(this)},Q.STATE_NORMAL,q.Series)}initAnimation(){var e,t;let i=null==(e=this._spec.animationAppear)?void 0:e.preset;this._nodePointMark.setAnimationConfig(bg(null==(t=hp.getAnimationInKey("correlation"))?void 0:t({},i),bf("nodePoint",this._spec,this._markAttributeContext)))}getGroupFields(){return[]}getStackGroupFields(){return[]}getStackValueField(){return""}getActiveMarks(){return[this._nodePointMark,this._centerPointMark]}getDimensionField(){return[this._categoryField]}getMeasureField(){return[this._valueField]}onLayoutEnd(){super.onLayoutEnd(),this._viewBox.set(0,0,this._region.getLayoutRect().width,this._region.getLayoutRect().height),this._rawData.reRunAllTransform(),this.getViewData().reRunAllTransform()}}Eh.type=z.correlation,Eh.mark=R3,Eh.builtInTheme={correlation:{centerLabel:{visible:!0,position:"center",style:{fill:"#fff",text:""}},label:{visible:!0,position:"bottom",style:{fill:"#000"}}}},Eh.transformerConstructor=Es;let Ed=()=>{y4(),El(),hp.registerSeries(Eh.type,Eh),Ea()};class Eu extends xA{_getDefaultSeriesSpec(e){return super._getDefaultSeriesSpec(e,["categoryField","valueField","sizeField","sizeRange","centerX","centerY","innerRadius","outerRadius","startAngle","endAngle","ripplePoint","centerPoint","centerLabel","nodePoint"])}transformSpec(e){super.transformSpec(e),this.transformSeriesSpec(e)}}class Ec extends xB{constructor(){super(...arguments),this.transformerConstructor=Eu,this.type="correlation",this.seriesType=z.correlation}}Ec.type="correlation",Ec.seriesType=z.correlation,Ec.transformerConstructor=Eu;class Ep extends xo{constructor(){super(...arguments),this.type=sc.cartesianTimeAxis,this._zero=!1,this.effect={scaleUpdate:e=>{this.computeData(null==e?void 0:e.value),y8(this._regions,e=>{ve(this.getOrient())?vB(e.getXAxisHelper(),this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&e.setXAxisHelper(this.axisHelper()):vB(e.getYAxisHelper(),this.axisHelper(),(0,oV.Z)(this._seriesUserId)||(0,oV.Z)(this._seriesIndex))&&e.setYAxisHelper(this.axisHelper())},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._tick=hs({},this._spec.tick,null==(e=this._spec.layers)?void 0:e[0])}_initData(){var e;if(super._initData(),null==(e=this._spec.layers)?void 0:e[1]){let e=new tf.V(this._option.dataSet,{name:`${this.type}_${this.id}_layer_1_ticks`}).parse(this._scale,{type:"scale"}).transform({type:`${this.type}-ticks`,options:Object.assign(Object.assign({},this._tickTransformOption()),{tickCount:this._spec.layers[1].tickCount,forceTickCount:this._spec.layers[1].forceTickCount,tickStep:this._spec.layers[1].tickStep})},!1);this._layerTickData=new cj(this._option,e)}}computeData(e){super.computeData(e),this._layerTickData&&(this._layerTickData.getDataView().reRunAllTransform(),this._layerTickData.updateData())}created(){super.created(),this._layerTickData&&(this._axisMark&&this._layerTickData.addRelatedMark(this._axisMark),this._gridMark&&this._layerTickData.addRelatedMark(this._gridMark))}_getLabelFormatMethod(){var e,t,i,r,n,l,o,a;let s=mV.k.getInstance(),h=(null==(t=null==(e=this._spec.layers)?void 0:e[1])?void 0:t.timeFormat)||"%Y%m%d",d="local"===((null==(r=null==(i=this._spec.layers)?void 0:i[1])?void 0:r.timeFormatMode)||"local")?s.timeFormat:s.timeUTCFormat,u=(null==(l=null==(n=this._spec.layers)?void 0:n[0])?void 0:l.timeFormat)||"%Y%m%d",c="local"===((null==(a=null==(o=this._spec.layers)?void 0:o[0])?void 0:a.timeFormatMode)||"local")?s.timeFormat:s.timeUTCFormat;return(e,t,i,r,n)=>{var l;let o;return o=0===n?c(u,e):d(h,e),(null==(l=this._spec.label)?void 0:l.formatMethod)?this._spec.label.formatMethod(o,t):o}}getLabelItems(e){var t,i;let r=[],n=null==(t=this.getTickData())?void 0:t.getLatestData();n&&n.length&&r.push(n.map(t=>vP(t.value,this._getNormalizedValue([t.value],e))));let l=null==(i=this._layerTickData)?void 0:i.getLatestData();return l&&l.length&&r.push(l.map(t=>vP(t.value,this._getNormalizedValue([t.value],e)))),r}registerTicksTransform(){let e=`${this.type}-ticks`;return hK(this._option.dataSet,e,xr),e}transformScaleDomain(){}}Ep.type=sc.cartesianTimeAxis,Ep.specKey="axes",Ep.builtInTheme={axis:Cq,axisX:CJ,axisY:CQ};var Eg=i(65880);class Ef extends xo{constructor(){super(...arguments),this.type=sc.cartesianLogAxis,this._zero=!1,this._scale=new Eg.Y}initScales(){var e;super.initScales(),this._scale.base(null!=(e=this._spec.base)?e:10),this._scale.clamp(!0,null,!1)}registerTicksTransform(){let e=`${this.type}-ticks`;return hK(this._option.dataSet,e,xr),e}transformScaleDomain(){}}Ef.type=sc.cartesianLogAxis,Ef.specKey="axes",Ef.builtInTheme={axis:Cq,axisLinear:xl,axisX:CJ,axisY:CQ},(0,gH.jB)(Ef,xe);var Em=i(1466);class Eb extends xo{constructor(){super(...arguments),this.type=sc.cartesianSymlogAxis,this._zero=!1,this._scale=new Em.g}initScales(){var e;super.initScales(),this._scale.constant(null!=(e=this._spec.constant)?e:10)}registerTicksTransform(){let e=`${this.type}-ticks`;return hK(this._option.dataSet,e,xr),e}transformScaleDomain(){}}function Ey(e){var t,i;let r=Object.assign({},e);return(0,d$.Z)(e.style)||(r.textStyle=vA(e.style)),(0,d$.Z)(e.textStyle)||hs(r.textStyle,vA(e.textStyle)),(null==(t=e.shape)?void 0:t.style)&&vA(r.shape.style),(null==(i=e.background)?void 0:i.style)&&vA(r.background.style),r}Eb.type=sc.cartesianSymlogAxis,Eb.specKey="axes",Eb.builtInTheme={axis:Cq,axisLinear:xl,axisX:CJ,axisY:CQ},(0,gH.jB)(Eb,xe);var Ev=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};(eZ=e6||(e6={})).selected="selected",eZ.unSelected="unSelected",eZ.selectedHover="selectedHover",eZ.unSelectedHover="unSelectedHover",eZ.focus="focus",(eN=e8||(e8={})).legendItemHover="legendItemHover",eN.legendItemUnHover="legendItemUnHover",eN.legendItemClick="legendItemClick",eN.legendItemAttributeUpdate="legendItemAttributeUpdate",(e$=e7||(e7={})).innerView="innerView",e$.title="legendTitle",e$.item="legendItem",e$.itemShape="legendItemShape",e$.itemLabel="legendItemLabel",e$.itemValue="legendItemValue",e$.focus="legendItemFocus";class E_ extends yN{constructor(){super(...arguments),this.name="legend",this._title=null}render(){this.removeAllChild(!0);let{interactive:e=!0,title:t,padding:i=0}=this.attribute;this._parsedPadding=(0,_6.o)(i);let r=oq.group({x:this._parsedPadding[3],y:this._parsedPadding[0],pickable:e,childrenPickable:e});r.name=e7.innerView,this.add(r),this._innerView=r,(null==t?void 0:t.visible)&&this._renderTitle(t),this._renderContent(),this._adjustLayout(),e&&this._bindEvents();let n=this._innerView.AABBBounds;this.attribute.width=n.width()+this._parsedPadding[1]+this._parsedPadding[3],this.attribute.height=n.height()+this._parsedPadding[0]+this._parsedPadding[2]}_renderTitle(e){let{text:t="",textStyle:i,padding:r=0,background:n,minWidth:l,maxWidth:o,shape:a}=e,s={x:0,y:0,text:t,textStyle:i,padding:(0,_6.o)(r),minWidth:l,maxWidth:o};a&&a.visible&&(s.shape=Object.assign({visible:!0},a.style),(0,oV.Z)(a.space)&&(s.space=a.space)),n&&n.visible&&(s.panel=Object.assign({visible:!0},n.style));let h=new CL(s);h.name=e7.title,this._title=h,this._innerView.add(h)}_adjustLayout(){var e;if(this._title){let t=this._innerView.AABBBounds.width(),i=this._title.AABBBounds.width(),r=null==(e=this.attribute.title)?void 0:e.align;"center"===r?this._title.setAttribute("x",(t-i)/2):"end"===r&&this._title.setAttribute("x",t-i)}}}function EC(){dV(),uN(),uT()}let Ex={space:8,style:{fill:"rgb(47, 69, 84)",cursor:"pointer",size:15},state:{disable:{fill:"rgb(170, 170, 170)",cursor:"not-allowed"},hover:{}}};EC();class Ew extends yN{getCurrent(){return this._current}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Ew.defaultAttributes,e)),this.name="pager",this._current=1,this._onHover=e=>{let t=e.target;t.hasState("disable")||t.addState("hover")},this._onUnHover=e=>{e.target.removeState("hover")},this._onClick=e=>{let t=e.target;if("preHandler"===t.name){if(1===this._current)return;this._current-=1,1===this._current?t.addState("disable"):t.removeState("disable"),this._dispatchEvent("toPrev",{current:this._current,total:this._total,direction:"pre",event:e})}if("nextHandler"===t.name){if(this._current===this._total)return;this._current+=1,this._current===this._total?t.addState("disable"):t.removeState("disable"),this._dispatchEvent("toNext",{current:this._current,total:this._total,direction:"next",event:e})}this._current>1&&this.preHandler.removeState("disable"),this._current<this._total&&this.nextHandler.removeState("disable"),this.text.setAttribute("text",this._getPageText(this._current))}}render(){var e,t,i;this._reset();let{layout:r="horizontal",handler:n=Ex,total:l,defaultCurrent:o=1,textStyle:a,padding:s=0}=this.attribute;this._current=o;let h=(0,_6.o)(s),d="horizontal"===r,u=oq.group({x:0,y:0}),c=n.style||{},p=c.size||15,g=null!=(e=n.space)?e:8,f=n.state||{},{preShape:m,nextShape:b}=n;m||(m=d?"triangleLeft":"triangleUp"),b||(b=d?"triangleRight":"triangleDown");let y=oq.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},c),{x:0,y:0,symbolType:m,size:p}));y.states=f,y.name="preHandler",this.preHandler=y,u.add(y);let{width:v,height:_}=pJ(this._getPageText(l),Object.assign({textAlign:"center",textBaseline:"middle"},a),null==(i=null==(t=this.stage)?void 0:t.getTheme())?void 0:i.text),C=(0,nw.Z)(p)?p:p[0],x=(0,nw.Z)(p)?p:p[1],w=oq.text(Object.assign({x:d?C/2+g+v/2:0,y:d?0:x/2+g+_/2,text:this._getPageText(o),textAlign:"center",textBaseline:"middle",lineHeight:null==a?void 0:a.fontSize},a));this.text=w,u.add(w);let S=oq.symbol(Object.assign(Object.assign({strokeBoundsBuffer:0,pickMode:"imprecise"},c),{x:d?C+2*g+v:0,y:d?0:x+2*g+_,symbolType:b,size:p}));S.name="nextHandler",S.states=f,this.nextHandler=S,u.add(S),1===this._total?(y.addState("disable"),S.addState("disable")):1===this._current?y.addState("disable"):this._current===l&&S.addState("disable");let A=u.AABBBounds,k=A.width(),M=A.height();u.translateTo(0-A.x1+h[3],0-A.y1+h[0]),this.add(u),this.attribute.width=k+h[1]+h[3],this.attribute.height=M+h[0]+h[2],this._bindEvents()}_bindEvents(){this.attribute.disableTriggerEvent||(this.preHandler&&(this.preHandler.addEventListener("pointerenter",this._onHover),this.preHandler.addEventListener("pointerleave",this._onUnHover),this.preHandler.addEventListener("pointerdown",this._onClick)),this.nextHandler&&(this.nextHandler.addEventListener("pointerenter",this._onHover),this.nextHandler.addEventListener("pointerleave",this._onUnHover),this.nextHandler.addEventListener("pointerdown",this._onClick)))}_reset(){this.removeAllChild(!0),this._current=1,this._total=this.attribute.total,this.preHandler=this.nextHandler=this.text=null}_getPageText(e){let{pageFormatter:t}=this.attribute;return t?(0,nr.Z)(t)?t(e,this._total):`${t}`.replace("{current}",`${e}`).replace("{total}",`${this._total}`):`${e}/${this._total}`}setTotal(e){e!==this.attribute.total&&(this._total=e,1!==this._current&&this._current<=e?this.setAttributes({total:e,defaultCurrent:this._current}):this.setAttribute("total",e))}}function ES(){dV(),uT(),ct(),uN()}function EA(){dV(),CB()}Ew.defaultAttributes={handler:Ex,textStyle:{fill:"rgb(51, 51, 51)",fontSize:12}};var Ek=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};let EM={[e6.focus]:{},[e6.selected]:{},[e6.selectedHover]:{},[e6.unSelected]:{},[e6.unSelectedHover]:{}};EA(),EC(),dV(),ct();class ET extends E_{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},ET.defaultAttributes,e)),this.name="discreteLegend",this._itemsContainer=null,this._itemHeightByUser=void 0,this._itemHeight=0,this._itemMaxWidth=0,this._contentMaxHeight=0,this._onHover=e=>{let t=e.target;if(t&&t.name&&t.name.startsWith(e7.item)){let i=t.delegate;if(this._lastActiveItem){if(this._lastActiveItem.id===i.id)return;this._unHover(this._lastActiveItem,e)}this._hover(i,e)}else this._lastActiveItem&&(this._unHover(this._lastActiveItem,e),this._lastActiveItem=null)},this._onUnHover=e=>{this._lastActiveItem&&(this._unHover(this._lastActiveItem,e),this._lastActiveItem=null)},this._onClick=e=>{var t,i,r,n;let l=e.target;if(l&&l.name&&l.name.startsWith(e7.item)){let o=l.delegate,{selectMode:a="multiple"}=this.attribute;if(l.name===e7.focus||"focus"===a){let r=o.hasState(e6.focus);o.toggleState(e6.focus),r?null==(t=this._itemsContainer)||t.getChildren().forEach(t=>{this._removeLegendItemState(t,[e6.unSelected,e6.unSelectedHover,e6.focus],e),this._setLegendItemState(t,e6.selected,e)}):(this._setLegendItemState(o,e6.selected,e),this._removeLegendItemState(o,[e6.unSelected,e6.unSelectedHover],e),null==(i=this._itemsContainer)||i.getChildren().forEach(t=>{o!==t&&(this._removeLegendItemState(t,[e6.selected,e6.selectedHover,e6.focus],e),this._setLegendItemState(t,e6.unSelected,e))}))}else{null==(r=this._itemsContainer)||r.getChildren().forEach(e=>{e.removeState(e6.focus)});let{allowAllCanceled:t=!0}=this.attribute,i=o.hasState(e6.selected),l=this._getSelectedLegends();if("multiple"===a){if(!1===t&&i&&1===l.length)return void this._dispatchLegendEvent(e8.legendItemClick,o,e);i?(this._removeLegendItemState(o,[e6.selected,e6.selectedHover],e),this._setLegendItemState(o,e6.unSelected,e)):(this._setLegendItemState(o,e6.selected,e),this._removeLegendItemState(o,[e6.unSelected,e6.unSelectedHover],e))}else this._setLegendItemState(o,e6.selected,e),this._removeLegendItemState(o,[e6.unSelected,e6.unSelectedHover],e),null==(n=this._itemsContainer)||n.getChildren().forEach(t=>{o!==t&&(this._removeLegendItemState(t,[e6.selected,e6.selectedHover],e),this._setLegendItemState(t,e6.unSelected,e))})}this._dispatchLegendEvent(e8.legendItemClick,o,e)}}}render(){super.render(),this._lastActiveItem=null}setSelected(e){var t;(null==(t=this._itemsContainer)?void 0:t.getChildren()).forEach(t=>{let i=t.data;e.includes(i.label)?(this._setLegendItemState(t,e6.selected),this._removeLegendItemState(t,[e6.unSelected,e6.unSelectedHover])):(this._removeLegendItemState(t,[e6.selected,e6.selectedHover]),this._setLegendItemState(t,e6.unSelected))})}_renderItems(){let{item:e={},maxCol:t=1,maxRow:i=2,maxWidth:r,defaultSelected:n,lazyload:l,autoPage:o}=this.attribute,{spaceCol:a=16,spaceRow:s=8,verticalAlign:h="middle"}=e,d=this._itemsContainer,{items:u,isHorizontal:c,startIndex:p,isScrollbar:g}=this._itemContext,f=g?1:c?i:t,m=this._contentMaxHeight,b,{doWrap:y,maxWidthInCol:v,startX:_,startY:C,pages:x}=this._itemContext,w=0,S=0,A=[];for(let e=p,t=u.length;e<t&&!(l&&x>this._itemContext.currentPage*f);e++){l&&(this._itemContext.startIndex=e+1),(b=u[e]).id||(b.id=b.label),b.index=e;let t=!0;(0,ri.Z)(n)&&(t=n.includes(b.label));let i=this._renderEachItem(b,t,e,u),p=i.attribute.width,f=i.attribute.height;this._itemHeight=Math.max(this._itemHeight,f),v=Math.max(p,v),this._itemMaxWidth=Math.max(p,this._itemMaxWidth),c?((0,oV.Z)(r)&&(g&&o?y=(x=Math.ceil((_+p)/r))>1:_+p>r&&(y=!0,_>0&&("middle"!==h&&"bottom"!==h||A.forEach(e=>{e.setAttributes({y:e.attribute.y+(S-e.attribute.height)/("middle"===h?2:1)})}),x+=1,_=0,C+=S+s,S=0,A.length=0))),0===_&&0===C||i.setAttributes({x:_,y:C}),_+=a+p,S=Math.max(S,f),A.push(i)):((0,oV.Z)(m)&&(g&&o?y=(x=Math.ceil((C+f)/m))>1:m<=f?(x+=1,y=!0,C=0,e>0&&(_+=w+a)):m<C+f&&(x+=1,y=!0,C=0,_+=v+a,v=0)),0===_&&0===C||i.setAttributes({x:_,y:C}),C+=s+f),d.add(i),w=p}return c&&("middle"===h||"bottom"===h)&&A.forEach(e=>{e.setAttributes({y:e.attribute.y+(S-e.attribute.height)/("middle"===h?2:1)})}),this._itemContext.doWrap=y,this._itemContext.startX=_,this._itemContext.startY=C,this._itemContext.maxWidthInCol=v,this._itemContext.pages=x,this._itemContext.maxPages=f,g&&(this._itemContext.totalPage=x),l||(this._itemContext.startIndex=u.length),this._itemContext}_renderContent(){let{item:e={},items:t,reversed:i,maxWidth:r,maxHeight:n}=this.attribute;if(!1===e.visible||(0,d$.Z)(t))return;let l=t;i&&(l=null==t?void 0:t.reverse()),this._contentMaxHeight=Math.max(0,n-this._parsedPadding[0]-this._parsedPadding[2]);let o=oq.group({x:0,y:0});this._itemsContainer=o;let{layout:a,autoPage:s}=this.attribute,{maxWidth:h,width:d,height:u}=e,c=[];(0,oV.Z)(h)&&c.push(h),(0,oV.Z)(d)&&c.push(d),c.length&&((0,oV.Z)(r)&&c.push(r),this._itemWidthByUser=(0,ag.iH)(c)),(0,oV.Z)(u)&&(this._itemHeightByUser=u);let p=this.attribute.pager;this._itemContext={currentPage:p&&p.defaultCurrent||1,doWrap:!1,maxWidthInCol:0,maxPages:1,pages:1,startX:0,startY:0,startIndex:0,items:l,isHorizontal:"horizontal"===a,totalPage:1/0,isScrollbar:p&&"scrollbar"===p.type,clipContainer:void 0},this._itemContext=this._renderItems();let g=!1;this._itemContext.doWrap&&s&&this._itemContext.pages>this._itemContext.maxPages&&(g=this._renderPagerComponent()),g||(o.setAttribute("y",this._title?this._title.AABBBounds.height()+(0,hH.Z)(this.attribute,"title.space",8):0),this._innerView.add(o))}_bindEvents(){if(this.attribute.disableTriggerEvent||!this._itemsContainer)return;let{hover:e=!0,select:t=!0}=this.attribute;if(e){let t="pointermove",i="pointerleave";(0,r9.Z)(e)&&(e.trigger&&(t=e.trigger),e.triggerOff&&(i=e.triggerOff)),this._itemsContainer.addEventListener(t,this._onHover),this._itemsContainer.addEventListener(i,this._onUnHover)}if(t){let e="pointerdown";(0,r9.Z)(t)&&t.trigger&&(e=t.trigger),this._itemsContainer.addEventListener(e,this._onClick)}}_autoEllipsis(e,t,i,r){var n,l;let{label:o,value:a}=this.attribute.item,s=r.AABBBounds,h=i.AABBBounds,d=s.width(),u=h.width(),c=!1;"labelFirst"===e?u>t?c=!0:r.setAttribute("maxLineWidth",t-u):"valueFirst"===e?d>t?c=!0:i.setAttribute("maxLineWidth",t-d):d+u>t&&(c=!0),c&&(r.setAttribute("maxLineWidth",Math.max(t*(null!=(n=o.widthRatio)?n:.5),t-u)),i.setAttribute("maxLineWidth",Math.max(t*(null!=(l=a.widthRatio)?l:.5),t-d)))}_renderEachItem(e,t,i,r){var n,l;let o,{id:a,label:s,value:h,shape:d}=e,{padding:u=0,focus:c,focusIconStyle:p,align:g,autoEllipsisStrategy:f}=this.attribute.item,{shape:m,label:b,value:y,background:v}=this.attribute.item,_=this._handleStyle(m,e,t,i,r),C=this._handleStyle(b,e,t,i,r),x=this._handleStyle(y,e,t,i,r),w=this._handleStyle(v,e,t,i,r),S=(0,_6.o)(u);!1===v.visible?(o=oq.group({x:0,y:0,cursor:null==(n=w.style)?void 0:n.cursor}),this._appendDataToShape(o,e7.item,e,o)):(o=oq.group(Object.assign({x:0,y:0},w.style)),this._appendDataToShape(o,e7.item,e,o,w.state)),o.id=`${null!=a?a:s}-${i}`,o.addState(t?e6.selected:e6.unSelected);let A=oq.group({x:0,y:0,pickable:!1});o.add(A);let k,M=0,T=0,R=0;if(m&&!1!==m.visible){let i=(0,hH.Z)(_,"style.size",10);T=(0,ri.Z)(i)?i[0]||0:i,R=(0,hH.Z)(m,"space",8);let r=oq.symbol(Object.assign(Object.assign({x:0,y:0,symbolType:"circle",strokeBoundsBuffer:0},d),_.style));Object.keys(_.state||{}).forEach(e=>{let t=_.state[e].fill||_.state[e].stroke;d.fill&&(0,r5.Z)(_.state[e].fill)&&t&&(_.state[e].fill=t),d.stroke&&(0,r5.Z)(_.state[e].stroke)&&t&&(_.state[e].stroke=t)}),this._appendDataToShape(r,e7.itemShape,e,o,_.state),r.addState(t?e6.selected:e6.unSelected),A.add(r)}let E=0;if(c){let t=(0,hH.Z)(p,"size",10);k=oq.symbol(Object.assign(Object.assign({x:0,y:-t/2-1,strokeBoundsBuffer:0,boundsPadding:S},p),{visible:!0,pickMode:"imprecise"})),this._appendDataToShape(k,e7.focus,e,o),E=t}let P=b.formatMethod?b.formatMethod(s,e,i):s,B=p1(Object.assign(Object.assign({x:T/2+R,y:0,textAlign:"start",textBaseline:"middle",lineHeight:null==(l=C.style)?void 0:l.fontSize},C.style),{text:P,_originText:b.formatMethod?s:void 0}));this._appendDataToShape(B,e7.itemLabel,e,o,C.state),B.addState(t?e6.selected:e6.unSelected),A.add(B);let I=(0,hH.Z)(b,"space",8);if((0,oV.Z)(h)){let r=(0,hH.Z)(y,"space",8*!!c),n=y.formatMethod?y.formatMethod(h,e,i):h,l=p1(Object.assign(Object.assign({x:0,y:0,textAlign:"start",textBaseline:"middle",lineHeight:x.style.fontSize},x.style),{text:n,_originText:y.formatMethod?h:void 0}));if(this._appendDataToShape(l,e7.itemValue,e,o,x.state),l.addState(t?e6.selected:e6.unSelected),this._itemWidthByUser){let e=this._itemWidthByUser-S[1]-S[3]-T-R-I-E-r;this._autoEllipsis(f,e,B,l),y.alignRight?l.setAttributes({textAlign:"right",x:this._itemWidthByUser-T/2-S[1]-S[3]-E-r}):l.setAttribute("x",I+(B.AABBBounds.empty()?0:B.AABBBounds.x2))}else l.setAttribute("x",I+(B.AABBBounds.empty()?0:B.AABBBounds.x2));M=r+(l.AABBBounds.empty()?0:l.AABBBounds.x2),A.add(l)}else this._itemWidthByUser&&B.setAttribute("maxLineWidth",this._itemWidthByUser-S[1]-S[3]-T-R-E),M=I+(B.AABBBounds.empty()?0:B.AABBBounds.x2);k&&(k.setAttribute("x",M),A.add(k));let L=A.AABBBounds,F=L.width();if("right"===g){let e=L.x2,t=L.x1;A.forEachChildren((i,r)=>{"symbol"!==i.type&&"right"!==i.attribute.textAlign||i===k?i.setAttribute("x",t+e-i.attribute.x-i.AABBBounds.width()):"symbol"!==i.type?i.setAttributes({x:t+e-i.attribute.x,textAlign:"left"}):i.setAttribute("x",t+e-i.attribute.x)})}let H=L.height(),O=(0,oV.Z)(this.attribute.item.width)?this.attribute.item.width:F+S[1]+S[3],D=this._itemHeightByUser||H+S[0]+S[2];return o.attribute.width=O,o.attribute.height=D,k&&k.setAttribute("visible",!1),A.translateTo(-L.x1+S[3],-L.y1+S[0]),o}_createPager(e){var t,i;let{disableTriggerEvent:r,maxRow:n}=this.attribute,l=e=>e<=99?99:e<=999?999:9999;return new Ew(this._itemContext.isHorizontal?Object.assign(Object.assign({layout:1===n?"horizontal":"vertical",total:l(this._itemContext.pages)},(0,ha.Z)({handler:{preShape:"triangleUp",nextShape:"triangleDown"}},e)),{defaultCurrent:null==(t=this.attribute.pager)?void 0:t.defaultCurrent,disableTriggerEvent:r}):Object.assign({layout:"horizontal",total:l(this._itemContext.pages),disableTriggerEvent:r,defaultCurrent:null==(i=this.attribute.pager)?void 0:i.defaultCurrent},e))}_createScrollbar(e,t){let{disableTriggerEvent:i}=this.attribute;return new RO(this._itemContext.isHorizontal?Object.assign(Object.assign({direction:"horizontal",disableTriggerEvent:i,range:[0,.5],height:12*(!1!==e.visible)},e),{width:t}):Object.assign(Object.assign({direction:"vertical",width:12*(!1!==e.visible),range:[0,.5]},e),{height:t,disableTriggerEvent:i}))}_updatePositionOfPager(e,t,i){let{pager:r}=this.attribute,{totalPage:n,isHorizontal:l}=this._itemContext,o=r&&r.position||"middle";if(this._pagerComponent.setTotal(n),l){let r;r="start"===o?e:"end"===o?e+i-this._pagerComponent.AABBBounds.height()/2:e+i/2-this._pagerComponent.AABBBounds.height()/2,this._pagerComponent.setAttributes({x:t-this._pagerComponent.AABBBounds.width(),y:r})}else{let e;e="start"===o?0:"end"===o?t-this._pagerComponent.AABBBounds.width():(t-this._pagerComponent.AABBBounds.width())/2,this._pagerComponent.setAttributes({x:e,y:i-this._pagerComponent.AABBBounds.height()})}}_computeScrollbarDelta(){let e,{isHorizontal:t,clipContainer:i}=this._itemContext,r=this._itemsContainer.AABBBounds,n=i.AABBBounds;return t?n.width()/r.width():n.height()/r.height()}_updatePositionOfScrollbar(e,t,i){let{isHorizontal:r,currentPage:n,totalPage:l}=this._itemContext,o=(n-1)/l;this._pagerComponent.setScrollRange([o,o+this._computeScrollbarDelta()]),r?this._pagerComponent.setAttributes({x:0,y:i+t}):this._pagerComponent.setAttributes({x:e,y:i})}_bindEventsOfPager(e,t){let{animation:i=!0,animationDuration:r=450,animationEasing:n="quadIn"}=this.attribute.pager||{},l=this._itemContext.isScrollbar?e=>{let{value:t}=e.detail;return 0===t[0]?1:1===t[1]?this._itemContext.totalPage:t[0]*this._itemContext.totalPage+1}:e=>e.detail.current,o=o=>{let a=l(o);if(a!==this._itemContext.currentPage){if(this._itemContext.currentPage=a,this._itemContext&&this._itemContext.startIndex<this._itemContext.items.length){this._renderItems();let e=Math.ceil(this._itemContext.pages/this._itemContext.maxPages);if(this._itemContext.totalPage=e,this._itemContext.isScrollbar&&this._pagerComponent){let e=this._computeScrollbarDelta(),[t]=this._pagerComponent.getScrollRange();this._pagerComponent.setScrollRange([t,t+e])}}if(this._itemContext.isScrollbar){let[e]=this._pagerComponent.getScrollRange(),l=(this._itemContext.isHorizontal?this._itemsContainer.AABBBounds.width():this._itemsContainer.AABBBounds.height())*e;this.updateScrollMask(),i?this._itemsContainer.animate().to({[t]:-l},r,n):this._itemsContainer.setAttribute(t,-l)}else i?this._itemsContainer.animate().to({[t]:-(a-1)*e},r,n):this._itemsContainer.setAttribute(t,-(a-1)*e)}};this._itemContext.isScrollbar?(this._pagerComponent.addEventListener("scrollDrag",o),this._pagerComponent.addEventListener("scrollUp",o),this.attribute.pager.roamScroll&&(this.addEventListener("wheel",e=>e.nativeEvent.preventDefault()),this.addEventListener("wheel",(0,hO.Z)(e=>{let t=this._pagerComponent,i=t.getScrollRange(),{direction:r}=t.attribute,{width:n,height:l}=t.getSliderRenderBounds(),o="vertical"===r?e.deltaY/l:e.deltaX/n;t.setScrollRange([i[0]+o,i[1]+o],!0),this.updateScrollMask()},50)))):(this._pagerComponent.addEventListener("toPrev",o),this._pagerComponent.addEventListener("toNext",o))}_renderPager(){let e=this._title?this._title.AABBBounds.height()+(0,hH.Z)(this.attribute,"title.space",8):0,{maxWidth:t,maxCol:i=1,maxRow:r=2,item:n={},pager:l={}}=this.attribute,{spaceCol:o=16,spaceRow:a=8}=n,s=this._itemsContainer,{space:h=12,defaultCurrent:d=1}=l,u=Ek(l,["space","defaultCurrent"]),{isHorizontal:c}=this._itemContext,p=this._contentMaxHeight,g,f=0,m=0,b=0,y=0,v=0,_=0,C=1;if(c){if(m=(r-1)*a+this._itemHeight*r,f=t,g=this._createPager(u),this._pagerComponent=g,this._innerView.add(g),(b=t-g.AABBBounds.width()-h)<=0)return this._innerView.removeChild(g),!1;s.getChildren().forEach((e,t)=>{let{width:i,height:r}=e.attribute;b<v+i&&t>0&&(v=0,_+=r+a,C+=1),t>0&&e.setAttributes({x:v,y:_}),v+=o+i}),this._itemContext.startX=v,this._itemContext.startY=_,this._itemContext.pages=C;let i=Math.ceil(C/r);this._itemContext.totalPage=i,this._updatePositionOfPager(e,f,m)}else{if(f=this._itemMaxWidth*i+(i-1)*o,m=p,b=f,g=this._createPager(u),this._pagerComponent=g,this._innerView.add(g),(y=p-g.AABBBounds.height()-h-e)<=0)return this._innerView.removeChild(g),!1;s.getChildren().forEach((e,t)=>{let{width:i,height:r}=e.attribute;y<_+r&&t>0&&(_=0,v+=this._itemMaxWidth+o,C+=1),t>0&&e.setAttributes({x:v,y:_}),_+=a+r});let t=Math.ceil(C/i);this._itemContext.totalPage=t,this._updatePositionOfPager(e,f,m)}d>1&&(c?s.setAttribute("y",-(d-1)*(m+a)):s.setAttribute("x",-(d-1)*(f+o)));let x=oq.group({x:0,y:e,width:c?b:f,height:c?m:y,clip:!0,pickable:!1});return x.add(s),this._innerView.add(x),this._itemContext.clipContainer=x,this._bindEventsOfPager(c?m+a:f+o,c?"y":"x"),!0}_renderScrollbar(){var e;let t=this._title?this._title.AABBBounds.height()+(0,hH.Z)(this.attribute,"title.space",8):0,{maxWidth:i,item:r={},pager:n={}}=this.attribute,{spaceCol:l=16,spaceRow:o=8}=r,a=this._itemsContainer,{space:s=12,defaultCurrent:h=1}=n,d=Ek(n,["space","defaultCurrent"]),{isHorizontal:u}=this._itemContext,c=this._contentMaxHeight,p,g=0,f=0,m=0,b=1;if(u)g=i,f=this._itemHeight,p=this._createScrollbar(d,g),this._pagerComponent=p,this._innerView.add(p);else{if(f=c-t,g=this._itemMaxWidth,p=this._createScrollbar(d,f),this._pagerComponent=p,this._innerView.add(p),f<=0)return this._innerView.removeChild(p),!1;let e=a.getChildren(),i=e.map(e=>e.attribute.height);if(1===i.length||i.every(e=>e===i[0])){let t=i[0],r=Math.floor(f/(o+t));f=r*(o+t),b=Math.ceil(e.length/r)}else e.forEach((e,t)=>{let{height:i}=e.attribute,r=b,n=m;b=Math.floor((m+i)/f)+1,m+=o+i,r!==b&&t===a.getChildren().length-1&&m-f>=1/3*i&&(f=n+i,b-=1)});this._itemContext.totalPage=b,this._itemContext.pages=b}if(h>1)if(u){let e=this._itemsContainer.AABBBounds.width()-g;a.setAttribute("x",-Math.min((h-1)*(g+l),e))}else{let e=this._itemsContainer.AABBBounds.height()-f;a.setAttribute("y",-Math.min((h-1)*(f+o),e))}let y=oq.group({x:0,y:t,width:g,height:f,clip:!0,pickable:!1});return y.add(a),this._innerView.add(y),this._itemContext.clipContainer=y,this._updatePositionOfScrollbar(g,f,t),(null==(e=n.scrollMask)?void 0:e.visible)&&this.renderScrollMask(y),this._bindEventsOfPager(u?g:f,u?"x":"y"),!0}renderScrollMask(e){let{scrollMask:t={}}=this.attribute.pager,{visible:i=!0,gradientLength:r=16,gradientStops:n}=t;if(!i||!n)return;let l=e.AABBBounds.width(),o=e.AABBBounds.height(),a=this._itemContext.isHorizontal?l:o,s=n.map(e=>({offset:r*e.offset/a,color:e.color})),h=n.map(e=>({offset:(a-r*e.offset)/a,color:e.color})),d=oq.rect({x:0,y:0,width:l,height:o});this._scrollMask=d,this._scrollMaskContext={startStops:s,endStops:h},this.updateScrollMask(),e.add(d)}updateScrollMask(){if(!this._scrollMask||!this._pagerComponent||!this._itemContext.isScrollbar)return;let[e,t]=this._pagerComponent.getScrollRange(),i=[];(0,rN.Yt)((0,g9.Z)(t,0,1),1)||i.push(...this._scrollMaskContext.endStops),(0,rN.Yt)((0,g9.Z)(e,0,1),0)||i.push(...this._scrollMaskContext.startStops),i.length&&(this._itemContext.isHorizontal?this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:i}}):this._scrollMask.setAttributes({fill:{gradient:"linear",x0:0,y0:0,x1:0,y1:1,stops:i}}))}_renderPagerComponent(){return this._itemContext.isScrollbar?this._renderScrollbar():this._renderPager(),!0}_hover(e,t){this._lastActiveItem=e,e.hasState(e6.selected)?this._setLegendItemState(e,e6.selectedHover,t):this._setLegendItemState(e,e6.unSelectedHover,t);let i=e.getChildren()[0].find(e=>e.name===e7.focus,!1);i&&i.setAttribute("visible",!0),this._dispatchLegendEvent(e8.legendItemHover,e,t)}_unHover(e,t){let i=!1;(e.hasState(e6.unSelectedHover)||e.hasState(e6.selectedHover))&&(i=!0),e.removeState(e6.unSelectedHover),e.removeState(e6.selectedHover),e.getChildren()[0].getChildren().forEach(e=>{!i&&(e.hasState(e6.unSelectedHover)||e.hasState(e6.selectedHover))&&(i=!0),e.removeState(e6.unSelectedHover),e.removeState(e6.selectedHover)});let r=e.getChildren()[0].find(e=>e.name===e7.focus,!1);r&&r.setAttribute("visible",!1),i&&this._dispatchLegendEvent(e8.legendItemAttributeUpdate,e,t),this._dispatchLegendEvent(e8.legendItemUnHover,e,t)}_setLegendItemState(e,t,i){let r=!1;e.hasState(t)||(r=!0),e.addState(t,!0),e.getChildren()[0].getChildren().forEach(e=>{e.name!==e7.focus&&(r||e.hasState(t)||(r=!0),e.addState(t,!0))}),r&&this._dispatchLegendEvent(e8.legendItemAttributeUpdate,e,i)}_removeLegendItemState(e,t,i){let r=!1;t.forEach(t=>{!r&&e.hasState(t)&&(r=!0),e.removeState(t)}),e.getChildren()[0].getChildren().forEach(e=>{e.name!==e7.focus&&t.forEach(t=>{!r&&e.hasState(t)&&(r=!0),e.removeState(t)})}),r&&this._dispatchLegendEvent(e8.legendItemAttributeUpdate,e,i)}_getSelectedLegends(){var e;let t=[];return null==(e=this._itemsContainer)||e.getChildren().forEach(e=>{e.hasState(e6.selected)&&t.push(e.data)}),t}_appendDataToShape(e,t,i,r,n={}){e.name=t,e.data=i,e.delegate=r,e.states=(0,ha.Z)({},EM,n)}_dispatchLegendEvent(e,t,i){let r=this._getSelectedLegends();r.sort((e,t)=>e.index-t.index);let n=r.map(e=>e.label);this._dispatchEvent(e,{item:t,data:t.data,selected:t.hasState(e6.selected),currentSelectedItems:r,currentSelected:n,event:i})}_handleStyle(e,t,i,r,n){let l={};return e.style&&((0,nr.Z)(e.style)?l.style=e.style(t,i,r,n):l.style=e.style),e.state&&(l.state={},Object.keys(e.state).forEach(o=>{e.state[o]&&((0,nr.Z)(e.state[o])?l.state[o]=e.state[o](t,i,r,n):l.state[o]=e.state[o])})),l}release(){super.release(),this.removeAllEventListeners()}}ET.defaultAttributes={layout:"horizontal",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"#2C3542"}},item:{spaceCol:16,spaceRow:8,shape:{space:8,style:{size:10,cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{opacity:.5}}},label:{space:8,style:{fontSize:12,fill:"#2C3542",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},value:{alignRight:!1,style:{fontSize:12,fill:"#ccc",cursor:"pointer"},state:{selectedHover:{opacity:.85},unSelected:{fill:"#D8D8D8"}}},background:{style:{cursor:"pointer"}},focus:!1,focusIconStyle:{size:10,symbolType:"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8.75044 2.55077L8.75 3.75H7.25L7.25006 2.5507C4.81247 2.88304 2.88304 4.81247 2.5507 7.25006L3.75 7.25V8.75L2.55077 8.75044C2.8833 11.1878 4.81264 13.117 7.25006 13.4493L7.25 12.25H8.75L8.75044 13.4492C11.1876 13.1167 13.1167 11.1876 13.4492 8.75044L12.25 8.75V7.25L13.4493 7.25006C13.117 4.81264 11.1878 2.8833 8.75044 2.55077ZM8 5.5C9.38071 5.5 10.5 6.61929 10.5 8C10.5 9.38071 9.38071 10.5 8 10.5C6.61929 10.5 5.5 9.38071 5.5 8C5.5 6.61929 6.61929 5.5 8 5.5ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z",fill:"#333",cursor:"pointer"}},autoPage:!0,pager:{space:12,handler:{style:{size:10},space:4}},hover:!0,select:!0,selectMode:"multiple",allowAllCanceled:!0};let ER=(e,t)=>{let i=[],r={},{series:n,seriesField:l}=t;return n().forEach(e=>{let t=l(e);(t===e.getSeriesField()?e.getSeriesInfoList():e.getSeriesInfoInField(t)).forEach(e=>{r[e.key]||(r[e.key]=!0,i.push(e))})}),i},EE=(e,t)=>{var i,r,n;let{series:l,selected:o,field:a,data:s,customFilter:h}=t,d=o(),u=s();if(0===d.length&&u.length)return[];if(d.length===u.length)return e;let c={};d.forEach(e=>{c[e]=!0});let p=null!=(i=a())?i:db;return h?h(e,d,p):((0,ri.Z)(e)&&(null==(r=e[0])?void 0:r.nodes)?(e[0].nodes=e[0].nodes.filter(e=>!0===c[e.key]),(null==(n=e[0])?void 0:n.links)&&(e[0].links=e[0].links.filter(e=>!0===c[e.source]&&!0===c[e.target]))):(0,oV.Z)(p)&&(e=e.filter(e=>!0===c[l.getSeriesFieldValue(e,p)])),e)};class EP extends vJ{constructor(){super(...arguments),this.layoutType="normal",this.layoutZIndex=X.Legend,this.layoutLevel=Y.Legend,this.specKey="legends",this._orient="left",this._visible=!0,this._position="middle",this._preSelectedData=[],this._selectedData=[],this.effect={onSelectedDataChange:()=>{y8(this._regions,e=>{var t;null==(t=e.getViewData())||t.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),y8(this._regions,e=>{e.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}}}get orient(){return this._orient}get visible(){return this._visible}get position(){return this._position}getLegendData(){return this._legendData.getLatestData()}getSelectedData(){return this._selectedData}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._orient=sZ(this._spec.orient)?this._spec.orient:"left",this._position=null!=(e=this._spec.position)?e:"middle",this._visible=!1!==this._spec.visible;let{regionId:t,regionIndex:i,seriesId:r,seriesIndex:n}=this._spec;(0,oV.Z)(r)&&(this._seriesUserId=(0,ag.IX)(r)),(0,oV.Z)(t)&&(this._regionUserId=(0,ag.IX)(t)),(0,oV.Z)(n)&&(this._seriesIndex=(0,ag.IX)(n)),(0,oV.Z)(i)&&(this._regionUserIndex=(0,ag.IX)(i)),this._regions=this._option.getRegionsInUserIdOrIndex(this._regionUserId,this._regionUserIndex)}created(){super.created(),this.initData()}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reRender=!0,(null==e?void 0:e.orient)!==(null==t?void 0:t.orient)?i.reMake=!0:(0,dN.X)(t,e)||(i.reCompile=!0),i}_bindLegendDataChange(){this._preSelectedData=this._selectedData.slice(),this._initSelectedData(),this._forceLayout()}initData(){let e=this._initLegendData();e.target.addListener("change",this._bindLegendDataChange.bind(this)),this._legendData=new cj(this._option,e),this._initSelectedData(),y8(this._regions,e=>{e.event.on(N.rawDataUpdate,{filter:({model:t})=>(null==t?void 0:t.id)===e.id},()=>{this._legendData.getDataView().reRunAllTransform({skipEqual:!0})})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}setSelectedData(e){var t,i,r;let n=this._selectedData;(0,r5.Z)(e)||JSON.stringify(n)===JSON.stringify(e)||(y8(this._regions,t=>{t.legendSelectedFilter&&(e=t.legendSelectedFilter(this,e))},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._selectedData=[...e],null==(i=(t=this.effect).onSelectedDataChange)||i.call(t),this.event.emit(N.legendSelectedDataChange,{model:this}),null==(r=this._legendComponent)||r.setSelected(this._selectedData))}afterSetLayoutStartPoint(e){if(super.afterSetLayoutStartPoint(e),this._legendComponent){let{x:t,y:i}=e;(0,sD.Z)(t*i)&&this._legendComponent.setAttributes({x:t,y:i})}}getBoundsInRect(e,t){if(!this._visible)return this._legendComponent&&this._legendComponent.parent&&(this._legendComponent.parent.removeChild(this._legendComponent),this._legendComponent=null),{x1:0,y1:0,x2:0,y2:0};let i={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},r=this._getLegendAttributes(e);if(r.disableTriggerEvent=this._option.disableTriggerEvent,this._legendComponent)(0,dN.X)(r,this._cacheAttrs)||this._legendComponent.setAttributes(hs({},r,{defaultSelected:this._selectedData}));else{let e=new(this._getLegendConstructor())(hs({},r,{defaultSelected:this._selectedData}));e.name="legend",this._legendComponent=e,this.getContainer().add(e),this._option.disableTriggerEvent||this._initEvent(),e.on("*",(e,t)=>this._delegateEvent(this._legendComponent,e,t))}this._cacheAttrs=r;let n=isFinite(this._legendComponent.AABBBounds.width())?this._legendComponent.AABBBounds.width():0,l=isFinite(this._legendComponent.AABBBounds.height())?this._legendComponent.AABBBounds.height():0;if("normal-inline"!==this.layoutType){let e="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",i=this._position,{width:r,height:o}=t,a=0,s=0;"horizontal"===e?"middle"===i?a=(r-n)/2:"end"===i&&(a=r-n):"middle"===i?s=(o-l)/2:"end"===i&&(s=o-l),this._legendComponent.setAttributes({dx:a,dy:s})}return i.x2=i.x1+n,i.y2=i.y1+l,i}onDataUpdate(){var e,t;if(JSON.stringify(this._preSelectedData)!==JSON.stringify(this._selectedData)){if(this._legendComponent){let e=this._getLegendAttributes(this.getLayoutRect());(0,dN.X)(e,this._cacheAttrs)||this._legendComponent.setAttributes(hs({},e,{defaultSelected:this._selectedData}))}null==(t=(e=this.effect).onSelectedDataChange)||t.call(e),this.event.emit(N.legendSelectedDataChange,{model:this})}}_getNeedClearVRenderComponents(){return[this._legendComponent]}clear(){super.clear(),this._cacheAttrs=null,this._preSelectedData=null}}EP.specKey="legends";let EB={orient:"bottom",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"primaryFontColor"},fontWeight:"normal"},space:12},pager:{textStyle:{fill:{type:"palette",key:"discreteLegendPagerTextColor"}},handler:{style:{fill:{type:"palette",key:"discreteLegendPagerHandlerColor"}},state:{disable:{fill:{type:"palette",key:"discreteLegendPagerHandlerDisableColor"}}}}},item:{visible:!0,spaceCol:10,spaceRow:6,padding:2,background:{state:{selectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}},unSelectedHover:{fill:{type:"palette",key:"hoverBackgroundColor"}}}},shape:{space:6,style:{lineWidth:0,fillOpacity:1,opacity:1},state:{unSelected:{fillOpacity:.2,opacity:1}}},label:{space:6,style:{fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"},fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},opacity:1},state:{unSelected:{fill:{type:"palette",key:"disableFontColor"},opacity:1}}}},allowAllCanceled:!1};class EI extends EP{constructor(){super(...arguments),this.type=sc.discreteLegend,this.name=sc.discreteLegend}static getSpecInfo(e){return mX(e,this.specKey,this.type,e=>!e.type||"discrete"===e.type)}init(e){super.init(e),y8(this._regions,e=>{e.addViewDataFilter({type:"discreteLegendFilter",options:{series:e,selected:()=>this._selectedData,field:()=>this._getSeriesLegendField(e),data:()=>this.getLegendDefaultData(),customFilter:this._spec.customFilter},level:G.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_initLegendData(){hK(this._option.dataSet,"discreteLegendFilter",EE),hK(this._option.dataSet,"discreteLegendDataMake",ER);let e=new tf.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return e.transform({type:"discreteLegendDataMake",options:{series:()=>{let e=[];return y8(this._regions,t=>{e.push(t)},{specIndex:this._spec.seriesIndex,userId:this._spec.seriesId}),e},seriesField:e=>this._getSeriesLegendField(e)}}),e}_getSeriesLegendField(e){var t,i,r;let n=e.getSeriesField(),l=null!=(t=this._spec.scaleName)?t:this._spec.scale;if((0,r5.Z)(l)||!e.getRawData())return n;let o=this._option.globalScale.getScaleSpec(l);if(!o)return n;if(this._spec.field)return this._spec.field;if(!sW(o.domain))return n;let a=o.domain.find(t=>t.dataId===e.getRawData().name);return a&&null!=(r=null==(i=a.fields)?void 0:i[0])?r:n}_initSelectedData(){let e=this.getLegendDefaultData();if(this._unselectedData){let t=[],i=[];e.forEach(e=>{this._unselectedData.includes(e)?i.push(e):t.push(e)}),this._selectedData=t,this._unselectedData=i}else this._spec.defaultSelected?this._selectedData=[...this._spec.defaultSelected]:this._selectedData=e}getLegendDefaultData(e){return(0,nr.Z)(this._spec.data)?this._getLegendItems().map(e=>e.label):this._legendData.getLatestData().map(e?e=>e.originalKey:e=>e.key)}_addDefaultTitleText(e){var t,i,r,n;if((null==(t=e.title)?void 0:t.visible)&&(0,r5.Z)(e.title.text)&&(0,r5.Z)(null==(i=e.title.style)?void 0:i.text)){let t=null==(n=null==(r=this._regions)?void 0:r[0])?void 0:n.getSeries()[0];if(!t)return;e.title.text=mN(t.getRawData(),t.getSeriesField())}}_getLegendAttributes(e){let t=Object.assign(Object.assign({layout:"bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",items:this._getLegendItems(),zIndex:this.layoutZIndex},function(e,t){let{title:i={},item:r={},pager:n={},background:l={},type:o,id:a,visible:s,orient:h,position:d,data:u,filter:c,regionId:p,regionIndex:g,seriesIndex:f,seriesId:m,padding:b}=e,y=Ev(e,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]),{title:v={},item:_={},pager:C={},background:x={}}=e;return v=(0,hQ.Z)(v),_=(0,hQ.Z)(_),C=(0,hQ.Z)(C),x=(0,hQ.Z)(x),v.visible?y.title=Ey(v):y.title={visible:!1},(0,d$.Z)(_.focusIconStyle)||vA(_.focusIconStyle),_.shape&&(_.shape=vx(_.shape)),_.label&&(_.label=vx(_.label)),_.value&&(_.value=vx(_.value)),_.background&&(_.background=vx(_.background)),sN(_.maxWidth)&&(_.maxWidth=Number(_.maxWidth.substring(0,_.maxWidth.length-1))*t.width/100),sN(_.width)&&(_.width=Number(_.width.substring(0,_.width.length-1))*t.width/100),sN(_.height)&&(_.height=Number(_.height.substring(0,_.height.length-1))*t.width/100),y.item=_,"scrollbar"===C.type?((0,d$.Z)(C.railStyle)||vA(C.railStyle),(0,d$.Z)(C.sliderStyle)||vA(C.sliderStyle)):((0,d$.Z)(C.textStyle)||vA(C.textStyle),C.handler&&vx(C.handler)),y.pager=C,x.visible&&!(0,d$.Z)(x.style)&&(hs(y,x.style),(0,oV.Z)(x.padding)&&(y.padding=x.padding)),y}(this._spec,e)),{maxWidth:e.width,maxHeight:e.height});return this._addDefaultTitleText(t),this._addLegendItemFormatMethods(t),t}_getLegendConstructor(){return ET}setSelectedData(e){e&&(this._unselectedData=this.getLegendDefaultData().filter(t=>!e.includes(t))),super.setSelectedData(e)}_initEvent(){if(this._legendComponent){let e=!1!==this._spec.filter;this._legendComponent.addEventListener(e8.legendItemClick,t=>{let i=(0,hH.Z)(t,"detail.currentSelected");e&&this.setSelectedData(i),this.event.emit(N.legendItemClick,{model:this,value:i,event:t})}),this._legendComponent.addEventListener(e8.legendItemHover,e=>{let t=(0,hH.Z)(e,"detail");this.event.emit(N.legendItemHover,{model:this,value:t,event:e})}),this._legendComponent.addEventListener(e8.legendItemUnHover,e=>{let t=(0,hH.Z)(e,"detail");this.event.emit(N.legendItemUnHover,{model:this,value:t,event:e})})}}_getLegendItems(){let e=(this._legendData.getLatestData()||[]).map(e=>{var t,i;let r=e.style("fillOpacity"),n=e.style("strokeOpacity"),l=e.style("opacity"),o=e.style("texture");return{label:e.key,shape:{symbolType:null!=(i=null!=(t=e.style("symbolType"))?t:e.shapeType)?i:"circle",fillOpacity:(0,sD.Z)(r)?r:1,strokeOpacity:(0,sD.Z)(n)?n:1,opacity:(0,sD.Z)(l)?l:1,texturePadding:o?1:null,textureSize:o?4:null,texture:o,fill:e.style("fill"),stroke:e.style("stroke"),textureColor:e.style("textureColor"),innerBorder:e.style("innerBorder"),outerBorder:e.style("outerBorder"),lineDash:e.style("lineDash"),lineDashOffset:e.style("lineDashOffset"),lineWidth:e.style("lineWidth")}}});return(0,nr.Z)(this._spec.data)?this._spec.data(e,this._option.globalScale.getScale("color"),this._option.globalScale):e}_addLegendItemFormatMethods(e){var t,i,r,n;let{formatMethod:l,formatter:o}=null!=(i=null==(t=this._spec.item)?void 0:t.label)?i:{},{formatMethod:a,formatter:s}=null!=(n=null==(r=this._spec.item)?void 0:r.value)?n:{},{formatFunc:h}=mK(l,o);o&&!l&&h&&(e.item.label.formatMethod=(e,t)=>h(e,t,o));let{formatFunc:d}=mK(a,s);s&&!a&&d&&(e.item.value.formatMethod=(e,t)=>d(s,e,t,o))}}EI.specKey="legends",EI.builtInTheme={discreteLegend:EB},EI.type=sc.discreteLegend;let EL=(e,t)=>{let{series:i,field:r,scale:n}=t,l=r();if(r&&l){let e=1/0,t=-1/0;return i().forEach(i=>{let r=i.getRawDataStatisticsByField(l,!0),n=null==r?void 0:r.min,o=null==r?void 0:r.max;(0,sD.Z)(n)&&(e=Math.min(n,e)),(0,sD.Z)(o)&&(t=Math.max(o,t))}),[e,t]}if(n){let e=n();return e?e.domain():[]}return[]},EF=(e,t)=>{let{selected:i,field:r,data:n,isHierarchyData:l,customFilter:o}=t,a=i(),s=r(),h=l||(e=>e&&e.some(e=>e&&function(e,t="value",i="children"){return!!(0,r9.Z)(e)&&!!e.hasOwnProperty(i)&&Array.isArray(e[i])}(e)));if(a===n())return e;if(s&&!(0,d$.Z)(a)){let[t,i]=a;return o?o(e,a,s):h(e)?function e(t,i,r,n="value",l="children"){return Array.isArray(t)?t.map(t=>{let o=Object.assign({},t);return Array.isArray(o[l])&&(o[l]=e(o[l],i,r,n,l)),o}).filter(e=>+e[n]>=i&&+e[n]<=r||e[l]&&e[l].length>0):t}(e,+t,+i,s):e.filter(e=>e[s]>=t&&e[s]<=i)}return e};function EH(e){return(0,ri.Z)(e)?e:[e,e]}function EO(e){return e?"ew-resize":"ns-resize"}(ej=e9||(e9={})).innerView="innerView",ej.railContainer="sliderRailContainer",ej.rail="sliderRail",ej.startText="sliderStartText",ej.endText="sliderEndText",ej.startHandler="sliderStartHandler",ej.startHandlerText="startHandlerText",ej.endHandler="sliderEndHandler",ej.endHandlerText="sliderEndHandlerText",ej.track="sliderTrack",ej.trackContainer="sliderTrackContainer",ES();class ED extends yN{get track(){return this._track}get currentValue(){return this._currentValue}get startHandler(){return this._startHandler}get endHandler(){return this._endHandler}get tooltipShape(){return this._tooltipShape}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},ED.defaultAttributes,e)),this.name="slider",this._isHorizontal=!0,this._startHandler=null,this._endHandler=null,this._startHandlerText=null,this._endHandlerText=null,this._currentHandler=null,this._currentValue={},this._onTooltipShow=e=>{this._isChanging||this._tooltipState&&this._tooltipState.isActive||(this._tooltipState?this._tooltipState.isActive=!0:this._tooltipState={isActive:!0},this._onTooltipUpdate(e),this._dispatchTooltipEvent("sliderTooltipShow"))},this._onTooltipUpdate=e=>{if(this._isChanging||!this._tooltipState||!this._tooltipState.isActive)return;let t=this._isHorizontal?this._rail.globalAABBBounds.width():this._rail.globalAABBBounds.height(),i=(0,g9.Z)(this._isHorizontal?(e.viewX-this._rail.globalAABBBounds.x1)/t:(e.viewY-this._rail.globalAABBBounds.y1)/t,0,1);i!==this._tooltipState.pos&&(this._tooltipState.pos=i,this._tooltipState.value=this.calculateValueByPos(i*t),this._updateTooltip(),this._dispatchTooltipEvent("sliderTooltipUpdate"))},this._onTooltipHide=()=>{let{tooltip:e}=this.attribute;e&&e.alwaysShow||(this._tooltipState=null,this._tooltipShape&&this._tooltipShape.setAttribute("visible",!1),this._tooltipText&&this._tooltipText.setAttribute("visible",!1),this._dispatchTooltipEvent("sliderTooltipHide"))},this._onHandlerPointerdown=e=>{this._clearAllDragEvents(),this._isChanging=!0;let{x:t,y:i}=this.stage.eventPointTransform(e);this._currentHandler=e.target,this._prePos=this._isHorizontal?t:i;let r=RF(),n="browser"===sI.env?sI:this.stage;n.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),r.forEach(e=>{n.addEventListener(e,this._onHandlerPointerUp)})},this._onHandlerPointerMove=e=>{var t,i;this._isChanging=!0;let{railWidth:r,railHeight:n,min:l,max:o}=this.attribute;if(o===l)return;let{x:a,y:s}=this.stage.eventPointTransform(e),h,d,u,c=0;this._isHorizontal?(c=(h=a)-this._prePos,d=null==(i=this._currentHandler)?void 0:i.attribute.x,u=r):(c=(h=s)-this._prePos,d=null==(t=this._currentHandler)?void 0:t.attribute.y,u=n);let p=(0,g9.Z)(d+c,0,u),g=this.calculateValueByPos(p);"text"===this._currentHandler.type?this._updateHandlerText(this._currentHandler,p,g):this._updateHandler(this._currentHandler,p,g),this._updateTrack(),this._prePos=h,this._dispatchChangeEvent()},this._onHandlerPointerUp=e=>{this._isChanging=!1,this._currentHandler=null,this._clearAllDragEvents()},this._handleTouchMove=e=>{this._isChanging&&e.preventDefault()},this._onTrackPointerdown=e=>{this._clearAllDragEvents(),this._isChanging=!0;let{x:t,y:i}=this.stage.eventPointTransform(e);this._prePos=this._isHorizontal?t:i;let r=RF(),n="browser"===sI.env?sI:this.stage;n.addEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),r.forEach(e=>{n.addEventListener(e,this._onTrackPointerUp)})},this._onTrackPointerMove=e=>{let t,i,r;this._isChanging=!0;let{railWidth:n,railHeight:l,min:o,max:a,inverse:s}=this.attribute;if(a===o)return;let{startHandler:h,endHandler:d}=this._getHandlers(),{x:u,y:c}=this.stage.eventPointTransform(e);this._isHorizontal?(t=u,i=this._track.attribute.width,r=n):(t=c,i=this._track.attribute.height,r=l);let p=t-this._prePos;if(h){let e=this._isHorizontal?h.attribute.x:h.attribute.y,t=s?(0,g9.Z)(e+p,i,r):(0,g9.Z)(e+p,0,r-i),n=this.calculateValueByPos(t);this._updateHandler(h,t,n)}if(d){let e=this._isHorizontal?d.attribute.x:d.attribute.y,t=s?(0,g9.Z)(e+p,0,r-i):(0,g9.Z)(e+p,i,r),n=this.calculateValueByPos(t),l=null==h?void 0:h.attribute;this._updateHandler(d,t,n),this._track.setAttributes(this._isHorizontal?{x:Math.min(l.x,d.attribute.x),width:Math.abs(l.x-d.attribute.x)}:{y:Math.min(l.y,d.attribute.y),height:Math.abs(l.y-d.attribute.y)})}this._prePos=t,this._dispatchChangeEvent()},this._onTrackPointerUp=e=>{this._isChanging=!1,this._clearAllDragEvents()},this._onRailPointerDown=e=>{let t,i,r;this._clearAllDragEvents(),this._isChanging=!0;let{railWidth:n,railHeight:l,min:o,max:a}=this.attribute;if(a===o)return;let s=this._startHandler,h=this._endHandler;this._isHorizontal?(t=e.viewX-this._rail.globalAABBBounds.x1,i=null==s?void 0:s.attribute.x,r=null==h?void 0:h.attribute.x):(t=e.viewY-this._rail.globalAABBBounds.y1,i=null==s?void 0:s.attribute.y,r=null==h?void 0:h.attribute.y);let d=this.calculateValueByPos(t);if((0,oV.Z)(r)){let e=Math.abs(t-i)>Math.abs(t-r)?h:s;this._updateHandler(e,t,d)}else this._updateHandler(s,t,d);this._updateTrack(),this._dispatchChangeEvent()}}calculatePosByValue(e,t){let{layout:i,railWidth:r,railHeight:n,min:l,max:o,inverse:a}=this.attribute,s=0;return s=l===o?"start"===t?0:+("end"===t):(e-l)/(o-l),(a?1-s:s)*("vertical"===i?n:r)}calculateValueByPos(e){let{layout:t,railWidth:i,railHeight:r,min:n,max:l,inverse:o}=this.attribute,a="vertical"===t?r:i;return n+(l-n)*(o?1-e/a:e/a)}setValue(e){let{min:t,max:i}=this.attribute;if(i===t)return;let[r,n]=(0,ag.IX)(e),{startHandler:l,endHandler:o}=this._getHandlers();l&&this._updateHandler(l,this.calculatePosByValue(r),r),o&&this._updateHandler(o,this.calculatePosByValue(n),n),this._updateTrack()}render(){var e,t;let i;this.removeAllChild(!0);let{layout:r="horizontal",railWidth:n,railHeight:l,startText:o,endText:a,min:s,max:h,showHandler:d=!0,showTooltip:u}=this.attribute,{value:c}=this.attribute;(0,r5.Z)(c)&&(c=[s,h]),this._currentValue={startValue:EH(c)[0],endValue:EH(c)[1]};let p="horizontal"===r;this._isHorizontal=p;let g=oq.group({x:0,y:0});g.name=e9.innerView,this.add(g),this._innerView=g;let f,m=0;if(o&&o.visible){(f=oq.text(Object.assign({x:p?0:n/2,y:p?l/2:0,textAlign:p?"start":"center",textBaseline:p?"middle":"top",text:o.text,lineHeight:null==(e=o.style)?void 0:e.fontSize},o.style))).name=e9.startText,g.add(f);let t=(0,oV.Z)(o.space)?o.space:0;m+=(p?f.AABBBounds.width():f.AABBBounds.height())+t}let b=oq.group({x:p?m:0,y:p?0:m});g.add(b);let y=oq.group({x:0,y:0});if(y.name=e9.railContainer,this._railContainer=y,b.add(y),this._mainContainer=b,this._renderRail(y),m+=p?n:l,a&&a.visible){let e=(0,oV.Z)(a.space)?a.space:0;(i=oq.text(Object.assign({x:p?m+e:n/2,y:p?l/2:m+e,textAlign:p?"start":"center",textBaseline:p?"middle":"top",text:a.text,lineHeight:null==(t=a.style)?void 0:t.fontSize},a.style))).name=e9.endText,g.add(i)}this._renderTrack(y),d&&(this._renderHandlers(b),this._bindEvents()),u&&(this._renderTooltip(),this._bindTooltipEvents())}_renderRail(e){let{railWidth:t,railHeight:i,railStyle:r,slidable:n}=this.attribute,l="default";!1!==n&&(l="pointer");let o=oq.rect(Object.assign({x:0,y:0,width:t,height:i,cursor:l},r));return o.name=e9.rail,e.add(o),this._rail=o,o}_renderHandlers(e){let{range:t,min:i,max:r,handlerSize:n=14,handlerStyle:l,handlerText:o,railHeight:a,railWidth:s,slidable:h}=this.attribute,{value:d}=this.attribute;(0,r5.Z)(d)&&(d=[i,r]);let u=o&&o.visible,c=this._isHorizontal,[p,g]=EH(d),f=this.calculatePosByValue(p,t?"start":"end"),m=this._renderHandler(Object.assign({x:c?f:s/2,y:c?a/2:f,size:n,strokeBoundsBuffer:0,cursor:!1===h?"default":EO(c)},l));if(m.name=e9.startHandler,this._startHandler=m,e.add(m),this._currentValue.startPos=f,u){let i=this._renderHandlerText(p,t?"start":"end");i.name=e9.startHandlerText,e.add(i),this._startHandlerText=i}if(t){let t=this.calculatePosByValue(g,"end"),i=this._renderHandler(Object.assign({x:c?t:s/2,y:c?a/2:t,size:n,strokeBoundsBuffer:0,cursor:!1===h?"default":EO(c)},l));if(i.name=e9.endHandler,this._endHandler=i,e.add(i),this._currentValue.endPos=t,u){let t=this._renderHandlerText(g,"end");t.name=e9.endHandlerText,e.add(t),this._endHandlerText=t}}}_renderTrack(e){let t,i,r,{range:n,min:l,max:o,railHeight:a,railWidth:s,trackStyle:h,railStyle:d,slidable:u,value:c}=this.attribute;if((0,r5.Z)(c))n?(t=l,i=o):t=i=l;else if(n){let e=(0,RL.Z)(c,l,o);t=e[0],i=e[1]}else t=l,i=(0,g9.Z)(c,l,o);let p=this._isHorizontal;n||(t=l);let g=oq.group({x:0,y:0,width:s,height:a,cornerRadius:null==d?void 0:d.cornerRadius,clip:!0,pickable:!1});g.name=e9.trackContainer;let f=(0,r9.Z)(n)&&!0===n.draggableTrack;r=!1===u?"default":!1===n||!1===f?"pointer":EO(p);let m=this.calculatePosByValue(t,"start"),b=this.calculatePosByValue(i,n?"end":"start"),y=oq.rect(Object.assign({x:p?Math.min(m,b):0,y:p?0:Math.min(m,b),width:p?Math.abs(b-m):s,height:p?a:Math.abs(b-m),cursor:r},h));y.name=e9.track,this._track=y,g.add(y),e.add(g)}_renderHandler(e){return oq.symbol(e)}_renderHandlerText(e,t){var i,r,n;let{align:l,handlerSize:o=14,handlerText:a={},railHeight:s,railWidth:h,slidable:d}=this.attribute,u=this._isHorizontal,c=this.calculatePosByValue(e,t),p=null!=(i=a.space)?i:4,g={text:a.formatter?a.formatter(e):e.toFixed(null!=(r=a.precision)?r:0),lineHeight:null==(n=a.style)?void 0:n.lineHeight,cursor:!1===d?"default":EO(u)};return u?"top"===l?(g.textBaseline="bottom",g.textAlign="center",g.x=c,g.y=(s-o)/2-p):(g.textBaseline="top",g.textAlign="center",g.x=c,g.y=(s+o)/2+p):("left"===l?(g.textBaseline="middle",g.textAlign="end",g.x=(h-o)/2-p):(g.textBaseline="middle",g.textAlign="start",g.x=(h+o)/2+p),g.y=c),oq.text(Object.assign(Object.assign({},g),a.style))}_renderTooltip(){var e;let{tooltip:t,railHeight:i,railWidth:r,align:n}=this.attribute;t&&t.alwaysShow?this._tooltipState={value:this._currentValue.startValue,pos:this._currentValue.startPos}:this._tooltipState=null;let l=this._isHorizontal?0:r/2,o=this._isHorizontal?i/2:0;if(t&&t.shape){let e=oq.symbol(Object.assign({pickable:!1,visible:!!this._tooltipState,x:l,y:o,symbolType:"circle"},t.shapeStyle));this._tooltipShape=e,this._mainContainer.add(e)}let a=t&&t.text||{},s=null!=(e=a.space)?e:6,h={pickable:!1,visible:!!this._tooltipState,text:""};this._isHorizontal?(h.x=l,h.y="top"===n?o-i/2-s:o+i/2+s,h.textAlign="center",h.textBaseline="top"===n?"bottom":"top"):(h.y=o,h.x="left"===n?l-r/2-s:o+r/2+s,h.textAlign="left"===n?"end":"start",h.textBaseline="middle");let d=oq.text(Object.assign(Object.assign({},h),a.style));this._mainContainer.add(d),this._tooltipText=d,this._tooltipState&&this._updateTooltip()}_updateTooltip(){var e,t;if(!this._tooltipShape&&!this._tooltipText||!this._tooltipState)return;let{railWidth:i,railHeight:r}=this.attribute,n=this._isHorizontal?i:r,l=this._tooltipState.pos*n,o=this._isHorizontal?"x":"y";this._tooltipShape&&this._tooltipShape.setAttributes({visible:!0,[o]:l});let{align:a}=this.attribute;if(this._tooltipText){let i=this.attribute.tooltip&&this.attribute.tooltip.text||{};this._tooltipText.setAttributes({visible:!0,[o]:l,text:i.formatter?i.formatter(this._tooltipState.value):this._isHorizontal||"left"!==a?` ${this._tooltipState.value.toFixed(null!=(t=i.precision)?t:0)}`:`${this._tooltipState.value.toFixed(null!=(e=i.precision)?e:0)} `})}}_bindEvents(){if(this.attribute.disableTriggerEvent)return;let{slidable:e,range:t}=this.attribute;e&&(this._startHandler&&this._startHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._startHandlerText&&this._startHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandler&&this._endHandler.addEventListener("pointerdown",this._onHandlerPointerdown),this._endHandlerText&&this._endHandlerText.addEventListener("pointerdown",this._onHandlerPointerdown),(0,r9.Z)(t)&&t.draggableTrack&&this._track.addEventListener("pointerdown",this._onTrackPointerdown),this._railContainer.addEventListener("pointerdown",this._onRailPointerDown),("browser"===sI.env?sI:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}))}_bindTooltipEvents(){this.attribute.disableTriggerEvent||(this._mainContainer.addEventListener("pointerenter",this._onTooltipShow),this._mainContainer.addEventListener("pointermove",this._onTooltipUpdate),this._mainContainer.addEventListener("pointerleave",this._onTooltipHide))}_clearAllDragEvents(){let e=RF(),t="browser"===sI.env?sI:this.stage;t.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),e.forEach(e=>{t.removeEventListener(e,this._onHandlerPointerUp)}),t.removeEventListener("pointermove",this._onTrackPointerMove,{capture:!0}),e.forEach(e=>{t.removeEventListener(e,this._onTrackPointerUp)})}_updateTrack(){let{inverse:e,railWidth:t,railHeight:i}=this.attribute,r=this._startHandler,n=this._endHandler;if(this._isHorizontal){let i=null==r?void 0:r.attribute.x;if(n){let e=null==n?void 0:n.attribute.x;this._track.setAttributes({x:Math.min(i,e),width:Math.abs(i-e)})}else e?this._track.setAttributes({x:i,width:t-i}):this._track.setAttributes({width:i})}else{let t=null==r?void 0:r.attribute.y;if(n){let e=null==n?void 0:n.attribute.y;this._track.setAttributes({y:Math.min(t,e),height:Math.abs(t-e)})}else e?this._track.setAttributes({y:t,height:i-t}):this._track.setAttributes({height:t})}}_updateHandler(e,t,i){var r;let n=this._isHorizontal;e.setAttribute(n?"x":"y",t);let l=e.name===e9.startHandler?this._startHandlerText:this._endHandlerText;if(l){let{handlerText:e={}}=this.attribute;l.setAttributes({text:e.formatter?e.formatter(i):i.toFixed(null!=(r=e.precision)?r:0),[n?"x":"y"]:t})}e.name===e9.startHandler?(this._currentValue.startValue=i,this._currentValue.startPos=t):(this._currentValue.endValue=i,this._currentValue.endPos=t)}_updateHandlerText(e,t,i){var r;let n=this._isHorizontal,{handlerText:l={}}=this.attribute;e.setAttributes({[n?"x":"y"]:t,text:l.formatter?l.formatter(i):i.toFixed(null!=(r=l.precision)?r:0)});let o=e.name===e9.startHandlerText?this._startHandler:this._endHandler;o&&o.setAttributes({[n?"x":"y"]:t}),e.name===e9.startHandlerText?(this._currentValue.startValue=i,this._currentValue.startPos=t):(this._currentValue.endValue=i,this._currentValue.endPos=t)}_dispatchChangeEvent(){let e=!!this.attribute.range,t=this._currentValue;this._dispatchEvent("change",{value:e?[Math.min(t.endValue,t.startValue),Math.max(t.endValue,t.startValue)]:t.startValue,position:e?[Math.min(t.endPos,t.startPos),Math.max(t.endPos,t.startPos)]:t.startPos})}_dispatchTooltipEvent(e){this._dispatchEvent("sliderTooltip",{type:e,position:this._tooltipState&&this._tooltipState.pos,value:this._tooltipState&&this._tooltipState.value})}_getHandlers(){let{inverse:e}=this.attribute,t=this._startHandler,i=this._endHandler;return i&&(this._isHorizontal?(!e&&i.attribute.x<(null==t?void 0:t.attribute.x)||e&&i.attribute.x>(null==t?void 0:t.attribute.x))&&([t,i]=[i,t]):(!e&&i.attribute.y<(null==t?void 0:t.attribute.y)||e&&i.attribute.y>(null==t?void 0:t.attribute.y))&&([t,i]=[i,t])),{startHandler:t,endHandler:i}}release(e){super.release(e),("browser"===sI.env?sI:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1}),this._clearAllDragEvents()}}ED.defaultAttributes={slidable:!0,layout:"horizontal",align:"bottom",height:8,showHandler:!0,handlerSize:14,handlerStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},tooltip:{shapeStyle:{symbolType:"circle",fill:"#fff",stroke:"#91caff",lineWidth:2},text:{style:{fill:"#2C3542",fontSize:12}}},railStyle:{fill:"rgba(0,0,0,.04)"},trackStyle:{fill:"#91caff"},showValue:!0,valueStyle:{fill:"#2C3542",fontSize:12},startText:{style:{fill:"#2C3542",fontSize:12}},endText:{style:{fill:"#2C3542",fontSize:12}},handlerText:{visible:!0,space:4,precision:0,style:{fill:"#2C3542",fontSize:12}}},EA(),ES();class Ez extends E_{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Ez.defaultAttributes,e)),this.name="colorLegend",this._onSliderToolipChange=e=>{let t=this._slider.tooltipShape;if(t&&e.detail&&!(0,r5.Z)(e.detail.value)){let i=this._colorScale.scale(e.detail.value);t.setAttribute("fill",i)}this.dispatchEvent(e)},this._onSliderChange=e=>{this._updateColor(),this.dispatchEvent(e)}}setSelected(e){this._slider&&(this._slider.setValue(e),this._updateColor())}_renderContent(){let{colors:e,slidable:t,layout:i,align:r,min:n,max:l,value:o,railWidth:a,railHeight:s,showHandler:h=!0,handlerSize:d,handlerStyle:u,railStyle:c,trackStyle:p,startText:g,endText:f,handlerText:m,showTooltip:b,tooltip:y,inverse:v,disableTriggerEvent:_}=this.attribute,C=[],x=(l-n)/(e.length-1);for(let t=0;t<e.length;t++)C.push(n+x*t);this._colorScale=(new ck.f).domain(C,!0).range(e),this._color=this._getTrackColor();let w=new ED({x:0,y:0,range:{draggableTrack:!0},slidable:t,layout:i,align:r,min:n,max:l,value:o,railWidth:a,railHeight:s,showHandler:h,handlerSize:d,handlerStyle:u,railStyle:c,trackStyle:Object.assign({fill:this._color},p),startText:g,endText:f,handlerText:m,showTooltip:b,tooltip:y,disableTriggerEvent:_,inverse:v});this._innerView.add(w),this._slider=w,w.translateTo(0-w.AABBBounds.x1,(this._title?this._title.AABBBounds.height()+(0,hH.Z)(this.attribute,"title.space",12):0)-w.AABBBounds.y1),this._updateColor()}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}_getTrackColor(){let{colors:e,layout:t,inverse:i}=this.attribute;if((0,d$.Z)(e))return;let r=e.length;if(1===r)return e[0];let n=[];for(let t=0;t<r;t++){let i=t/(r-1);n.push({offset:i,color:e[t]})}let l="horizontal"===t,o={gradient:"linear",stops:n,x0:0,y0:0,x1:+!!l,y1:+!l};return i&&(l?(o.x0=1,o.x1=0):(o.y0=1,o.y1=0)),o}_updateColor(){var e;let{layout:t="horizontal",colors:i,railWidth:r,railHeight:n}=this.attribute,{startHandler:l,endHandler:o,track:a,attribute:s}=this._slider,{startValue:h,endValue:d,startPos:u,endPos:c}=this._slider.currentValue,p=null==(e=s.handlerStyle)?void 0:e.fill;if(l&&!p){let e=this._colorScale.scale(h);l.setAttribute("fill",e)}if(o&&!p){let e=this._colorScale.scale(d);o.setAttribute("fill",e)}let g="horizontal"===t?r:n;if(Math.abs(u-c)!==g&&i&&i.length>1){let e=this._color.stops,t=Math.min(u,c)/g,i=Math.max(u,c)/g,r=i-t,n=e.filter(e=>e.offset>t&&e.offset<i),l=Math.min(h,d),o=Math.max(h,d),s=this._colorScale.scale(l),p=this._colorScale.scale(o),f=[{offset:0,color:s}];n.forEach(e=>{f.push({offset:(e.offset-t)/r,color:e.color})}),f.push({offset:1,color:p}),a.setAttribute("fill",Object.assign(Object.assign({},this._color),{stops:f}))}}}Ez.defaultAttributes={layout:"horizontal",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{fill:null,lineWidth:4,stroke:"#fff",outerBorder:{distance:2,lineWidth:1,stroke:"#ccc"}},tooltip:{shapeStyle:{lineWidth:4,stroke:"#fff"}}},EA(),ES(),_1();class EW extends E_{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},EW.defaultAttributes,e)),this.name="sizeLegend",this._onSliderChange=e=>{this.dispatchEvent(e)},this._onSliderToolipChange=e=>{this.dispatchEvent(e)}}setSelected(e){this._slider&&this._slider.setValue(e)}_renderContent(){let{slidable:e,layout:t,align:i,min:r,max:n,value:l,railWidth:o,railHeight:a,showHandler:s=!0,handlerSize:h,handlerStyle:d,railStyle:u,trackStyle:c,startText:p,endText:g,handlerText:f,showTooltip:m,tooltip:b,sizeBackground:y,disableTriggerEvent:v,inverse:_}=this.attribute,C=oq.group({x:0,y:0});this._innerView.add(C);let x=new ED({x:0,y:0,zIndex:1,range:{draggableTrack:!0},slidable:e,layout:t,align:i,min:r,max:n,value:l,railWidth:o,railHeight:a,showHandler:s,handlerSize:h,handlerStyle:Object.assign({symbolType:function(e="bottom"){let t=0;return"top"===e?`
    M${t},-6L${t-3.5},-2.5
    v5
    h7
    v-5
    Z
`:"left"===e?(t=1,`
    M${t-6},0L${t-6+2.5},-3.5
    h5
    v7
    h-5
    Z
`):"right"===e?(t=-1,`
    M${t+6},0L${t+6-2.5},-3.5
    h-5
    v7
    h5
    Z
  `):`
    M${t},6L${t-3.5},2.5
    v-5
    h7
    v5
    Z
`}(i)},d),railStyle:u,trackStyle:c,startText:p,endText:g,handlerText:f,showTooltip:m,tooltip:b,disableTriggerEvent:v,inverse:_});C.add(x);let w,S=0;"horizontal"===t?"top"===i?(w=`M0,0L${o},0L${_?0:o},12Z`,S=a):(w=`M0,12L${o},12L${_?0:o},0Z`,x.setAttribute("y",12)):"left"===i?w=`M${o},0L${o+12},${_?0:a}L${o},${a}Z`:(w=`M0,${_?0:a}L12,${a}L12,0Z`,x.setAttribute("x",12));let A=oq.path(Object.assign(Object.assign({x:0,y:S,path:w},y),{zIndex:0}));C.add(A);let k=this._title?this._title.AABBBounds.height()+(0,hH.Z)(this.attribute,"title.space",12):0;C.translate(0-C.AABBBounds.x1,k-C.AABBBounds.y1),this._slider=x}_bindEvents(){this.attribute.disableTriggerEvent||this._slider&&(this._slider.addEventListener("change",this._onSliderChange),this._slider.addEventListener("sliderTooltip",this._onSliderToolipChange))}}EW.defaultAttributes={layout:"horizontal",title:{align:"start",space:12,textStyle:{fontSize:12,fontWeight:"bold",fill:"rgba(46, 47, 50, 1)"}},handlerSize:10,handlerStyle:{lineWidth:1,stroke:"#ccc",fill:"#fff"},sizeBackground:{fill:"rgba(20,20,20,0.1)"}};var EZ=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};let EN={color:Ez,size:EW},E$={orient:"right",position:"middle",padding:[16,24],title:{visible:!1,padding:0,textStyle:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"primaryFontColor"}},space:12},handler:{visible:!0},startText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},endText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6},handlerText:{style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fontWeight:"normal",fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}},space:6}},Ej=e=>{let t={width:200,height:8,style:{fill:{type:"palette",key:"sliderRailColor"}}};return e?(t.width=200,t.height=8):(t.width=8,t.height=200),Object.assign(Object.assign({},E$),{rail:t,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:"#ffffff"},shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:{type:"palette",key:"shadowColor"}}}})},EG={horizontal:Ej(!0),vertical:Ej(!1)},EV=e=>{let t={style:{fill:{type:"palette",key:"sliderRailColor"}}};return e?(t.width=200,t.height=4):(t.height=200,t.width=4),Object.assign(Object.assign({},E$),{sizeBackground:{fill:{type:"palette",key:"dataZoomChartColor"}},track:{style:{fill:{type:"palette",key:"sliderTrackColor",a:.8}}},rail:t,handler:{style:{symbolType:"circle",lineWidth:0,outerBorder:{lineWidth:2,distance:.8,stroke:{type:"palette",key:"sliderTrackColor"}},fill:{type:"palette",key:"sliderHandleColor"}}}})},EU={horizontal:EV(!0),vertical:EV(!1)},EK=["#C4E7FF","#98CAFF","#75ACFF","#518FF9","#2775DC","#005CBE","#00429F","#00287E"],EX=[2,10];class EY extends EP{static getSpecInfo(e){let t=mX(e,this.specKey,this.type,e=>{var t;return"color"===(t=e.type)||"size"===t});return t&&t.forEach(e=>{e.type="color"===e.spec.type?sc.colorLegend:sc.sizeLegend}),t}constructor(e,t){super(e,t),this.type=sc.colorLegend,this.name=sc.colorLegend;let i="color"===this._spec.type?sc.colorLegend:sc.sizeLegend;this.type=i,this.name=i}setAttrFromSpec(){super.setAttrFromSpec(),this._field=this._spec.field,this._legendType=this._spec.type}init(e){super.init(e),y8(this._regions,e=>{e.addViewDataFilter({type:"continuousLegendFilter",options:{selected:()=>this._selectedData,field:()=>this._field,data:()=>this._legendData.getLatestData(),isHierarchyData:e.isHierarchyData,customFilter:this._spec.customFilter},level:G.legendFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex})}_getScaleInGlobal(){let e=this._option.globalScale,t=this._spec.scale;return t||(t=this._legendType),e.getScale(t)}_initLegendData(){hK(this._option.dataSet,"continuousLegendFilter",EF),hK(this._option.dataSet,"continuousLegendDataMake",EL);let e=new tf.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`});return e.transform({type:"continuousLegendDataMake",options:{series:()=>y7(this._regions,{userId:this._seriesUserId,specIndex:this._seriesIndex}),field:()=>this._field,scale:this._getScaleInGlobal.bind(this)}}),e}_initSelectedData(){this._spec.defaultSelected?this._selectedData=this._spec.defaultSelected.slice():this._selectedData=this._legendData.getLatestData()}_addDefaultTitleText(e){var t,i,r,n;if((null==(t=e.title)?void 0:t.visible)&&(0,r5.Z)(e.title.text)&&(0,r5.Z)(null==(i=e.title.style)?void 0:i.text)){let t=this._field;if(t){let i=null==(n=null==(r=this._regions)?void 0:r[0])?void 0:n.getSeries()[0];if(!i)return;return void(e.title.text=mN(i.getRawData(),t))}let i=this._spec.scale;i||(i=this._legendType);let l=this._option.globalScale.getScaleSpec(i);if(!sW(null==l?void 0:l.domain))return;let o=l.domain[0];if(0===o.fields.length)return;e.title.text=mN(this._option.dataSet.getDataView(o.dataId),o.fields[0])}}_getLegendAttributes(e){var t,i;let r="bottom"===this.layoutOrient||"top"===this.layoutOrient?"horizontal":"vertical",n="horizontal"===r?"bottom":this.layoutOrient,l=[],o=this._getScaleInGlobal();o&&"linear"===o.type&&(l=o.range()),(0,d$.Z)(l)&&(l="color"===this._legendType?EK:EX);let a=null!=(t=this._legendData.getLatestData()[0])?t:0,s=null!=(i=this._legendData.getLatestData()[1])?i:1;this._legendData.getLatestData()[0]===this._legendData.getLatestData()[1]&&(a=Math.min(0,this._legendData.getLatestData()[0]),s=0===this._legendData.getLatestData()[0]?1:Math.max(0,this._legendData.getLatestData()[0]));let h=Object.assign({layout:r,align:n,zIndex:this.layoutZIndex,min:a,max:s,value:this._spec.defaultSelected,["color"===this._legendType?"colors":"sizeRange"]:l},function(e){let t=hs({},e),{title:i={},handler:r={},rail:n={},track:l={},startText:o,endText:a,handlerText:s,sizeBackground:h,background:d={},type:u,id:c,visible:p,orient:g,position:f,data:m,defaultSelected:b,field:y,filter:v,regionId:_,regionIndex:C,seriesIndex:x,seriesId:w,padding:S}=t,A=EZ(t,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return i.visible?A.title=Ey(i):A.title={visible:!1},A.showHandler=!1!==r.visible,(0,d$.Z)(r.style)||(A.handlerStyle=vA(r.style)),(0,oV.Z)(n.width)&&(A.railWidth=n.width),(0,oV.Z)(n.height)&&(A.railHeight=n.height),(0,d$.Z)(n.style)||(A.railStyle=vA(n.style)),(0,d$.Z)(l.style)||(A.trackStyle=vA(l.style)),A.startText=vx(o),A.endText=vx(a),A.handlerText=vx(s),(0,d$.Z)(h)||(A.sizeBackground=vA(h)),d.visible&&!(0,d$.Z)(d.style)&&(hs(A,d.style),(0,oV.Z)(d.padding)&&(A.padding=d.padding)),A}(this._spec));return this._addDefaultTitleText(h),h}_getLegendConstructor(){return EN[this._legendType]}_initEvent(){if(this._legendComponent){let e=!1!==this._spec.filter;this._legendComponent.addEventListener("change",(0,hD.Z)(t=>{let i=(0,hH.Z)(t,"detail.value");e&&this.setSelectedData(i),this.event.emit(N.legendFilter,{model:this,value:i,event:t})},30))}}}EY.specKey="legends",EY.builtInTheme={colorLegend:EG,sizeLegend:EU},EY.type=sc.continuousLegend;let Eq=(e,t)=>(0,oV.Z)(t)?e.map(e=>t[e]):void 0,EJ=(e,t)=>i=>e.every((e,r)=>i[e]===(null==t?void 0:t[r])),EQ=e=>!(0,r5.Z)(e)&&((0,ri.Z)(e)?e.length>0&&e.every(oV.Z):Object.keys(e).length>0),E0=(e,t)=>{let i=t.getSeries(),r=[];return i.forEach(t=>{var i,n,l,o,a,s,h;let d=t.getDimensionField(),u=t.getMeasureField(),c=t.getSeriesField(),p=(0,oV.Z)(c)?e[c]:void 0,g=(0,oV.Z)(c)&&null!=(o=null==(l=null==(n=null==(i=t.getViewDataStatistics)?void 0:i.call(t))?void 0:n.latestData[c])?void 0:l.values)?o:[],f=Eq(d,e),m=Eq(u,e),b=EQ(m),y=!b&&(0,oV.Z)(c)&&(0,r5.Z)(p)&&g.length>0,v=()=>{var e;let i=null==(e=t.getViewData())?void 0:e.latestData.find(EJ(d,f));if(!b&&!EQ(m=Eq(u,i)))return;let n=t.type===z.pie?t.dataToCentralPosition(i):t.dataToPosition(i);(0,r5.Z)(n)||isNaN(n.x)||isNaN(n.y)||r.push({pos:n,data:{dimensionFields:d,dimensionData:f,measureFields:u,measureData:m,hasMeasureData:b,groupField:c,groupData:p},series:t})};if("cartesian"===t.coordinate){let e=(0,cz.lK)(null==(s=null==(a=t.getYAxisHelper())?void 0:a.getScale(0))?void 0:s.type)?"y":"x",i=d.map((e,t)=>[e,t]).filter(([,e])=>(0,r5.Z)(null==f?void 0:f[e])),n=[null!=f?f:[]];i.length>0&&i.forEach(([e,i])=>{var r,l,o,a;let s=null!=(a=null==(o=null==(l=null==(r=t.getViewDataStatistics)?void 0:r.call(t))?void 0:l.latestData[e])?void 0:o.values)?a:[],h=[];n.forEach(e=>{s.forEach(t=>{var r;let n=null!=(r=null==e?void 0:e.slice())?r:[];n[i]=t,h.push(n)})}),n=h}),n.forEach(i=>{var n,l;if(y){let l=null==(n=t.getViewData())?void 0:n.latestData.filter(EJ(d,i));g.forEach(n=>{let o=l.find(e=>e[c]===n);if(!EQ(m=Eq(u,o)))return;let a=t.dataToPosition(o);(0,r5.Z)(a)||isNaN(a.x)||isNaN(a.y)||r.push({pos:a,data:{dimensionFields:d,dimensionData:i,measureFields:u,measureData:m,hasMeasureData:b,groupField:c,groupData:n},series:t,dimType:e})})}else{let n=null==(l=t.getViewData())?void 0:l.latestData.find(EJ(d,i));if(!b&&!EQ(m=Eq(u,n)))return;let o=t.dataToPosition(n);if((0,r5.Z)(o)||isNaN(o.x)||isNaN(o.y))return;r.push({pos:o,data:{dimensionFields:d,dimensionData:i,measureFields:u,measureData:m,hasMeasureData:b,groupField:c,groupData:p},dimType:e,series:t})}})}else if("polar"===t.coordinate)if(t.type===z.pie)v();else if(y){let e=(null==(h=t.getViewData())?void 0:h.latestData.filter(EJ(d,f))).find(e=>e[c]===p);g.forEach(i=>{if(!EQ(m=Eq(u,e)))return;let n=t.dataToPosition(e);(0,r5.Z)(n)||isNaN(n.x)||isNaN(n.y)||r.push({pos:n,data:{dimensionFields:d,dimensionData:f,measureFields:u,measureData:m,hasMeasureData:b,groupField:c,groupData:i},series:t})})}else v();else"geo"===t.coordinate&&(()=>{var e,i;let n=null==(i=null==(e=t.getMapViewData)?void 0:e.call(t))?void 0:i.latestData.find(e=>d.every((t,i)=>e.properties[t]===(null==f?void 0:f[i]))),l=m;if(!b){if(l=m=Eq(u,n),!EQ(m)&&!n)return;m=Object.assign({},n.properties)}let o=t.type===z.pie?t.dataToCentralPosition(n.properties):t.dataToPosition(n.properties);(0,r5.Z)(o)||isNaN(o.x)||isNaN(o.y)||r.push({pos:o,data:{dimensionFields:d,dimensionData:f,measureFields:u,measureData:l,hasMeasureData:b,groupField:c,groupData:p,originDatum:n},series:t})})()}),r},E1=e=>(0,oV.Z)(e)&&!(0,ri.Z)(e),E2=e=>(0,oV.Z)(e)&&(0,ri.Z)(e);class E3 extends vY{_shouldMergeThemeToSpec(){return!1}_initTheme(e,t){var i,r,n;let{spec:l,theme:o}=super._initTheme(e,t);return l.style=hs({},this._theme,l.style),l.offset=hs({},o.offset,e.offset),l.transitionDuration=null!=(i=e.transitionDuration)?i:o.transitionDuration,l.trigger=null!=(r=e.trigger)?r:o.trigger,l.triggerOff=null!=(n=e.triggerOff)?n:o.triggerOff,{spec:l,theme:o}}_transformSpecAfterMergingTheme(e,t,i){var r,n,l,o,a,s,h;super._transformSpecAfterMergingTheme(e,t,i),e.visible=null==(r=e.visible)||r,e.activeType=mQ(e),e.renderMode=null!=(n=e.renderMode)?n:sQ(this._option.mode)||!sq(this._option.mode)?"canvas":"html",e.trigger=null!=(l=e.trigger)?l:"hover",e.className=null!=(o=e.className)?o:"vchart-tooltip-element",e.enterable=null!=(a=e.enterable)&&a,e.transitionDuration=null!=(s=e.transitionDuration)?s:150,e.confine=null!=(h=e.confine)?h:"canvas"===e.renderMode,(0,oV.Z)(e.parentElement)?(0,r6.Z)(e.parentElement)&&(e.parentElement=sI.getElementById(e.parentElement)):sq(this._option.mode)&&(e.parentElement=null==sY?void 0:sY.body)}}class E4 extends vJ{constructor(){super(...arguments),this.layoutZIndex=1,this.type=sc.tooltip,this.name=sc.tooltip,this.transformerConstructor=E3,this.specKey="tooltip",this.layoutType="none",this._isReleased=!1,this._alwaysShow=!1,this._eventList=[],this._isTooltipShown=!1,this._clickLock=!1,this._mountEvent=(e,t,i)=>{this.event.on(e,t,i),this._eventList.push({eventType:e,handler:i})},this._handleClickToLock=e=>{var t,i;if(this._clickLock)this._handleChartMouseOut(e),this._clickLock=!1;else{if(!this._isTooltipShown&&!(null==(i=null==(t=this.tooltipHandler)?void 0:t.isTooltipShown)?void 0:i.call(t)))return;this._clickLock=!0}},this._getMouseOutHandler=e=>t=>{var i,r,n,l,o;if(this._isReleased||this._alwaysShow||this._clickLock||!this._isTooltipShown&&!(null==(r=null==(i=this.tooltipHandler)?void 0:i.isTooltipShown)?void 0:r.call(i)))return;let a=sq(null==(n=this._option)?void 0:n.mode),{clientX:s,clientY:h}=t.event;a&&e&&this._isPointerInChart({x:s,y:h})||(this._enterable?this._outTimer=setTimeout(()=>{this._handleChartMouseOut(t)},null!=(o=null==(l=this._spec)?void 0:l.showDelay)?o:50):this._handleChartMouseOut(t))},this._handleChartMouseOut=e=>{var t;this._cacheActiveType&&(null==(t=this._option)?void 0:t.componentShowContent)&&(!1===this._option.componentShowContent.tooltip||(0,r9.Z)(this._option.componentShowContent.tooltip)&&!1===this._option.componentShowContent.tooltip[this._cacheActiveType])||this._alwaysShow||this._isReleased||this._isEnterTooltip||"none"!==this._spec.triggerOff&&(this._hideTooltipByHandler(Object.assign(Object.assign({},e),{tooltip:this})),this._handleMouseMove&&this._handleMouseMove.cancel&&this._handleMouseMove.cancel(),this._cacheEnterableRect=null,this._cacheInfo=void 0,this._cacheParams=void 0,this._cacheActiveType=void 0)},this._getMouseMoveHandler=e=>t=>{var i,r,n,l;this._isReleased||this._isEnterTooltip||(this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),this._alwaysShow||(this._clickLock?e&&(this._handleChartMouseOut(t),this._clickLock=!1):!e&&this._enterable&&(null==(r=null==(i=this.tooltipHandler)?void 0:i.isTooltipShown)?void 0:r.call(i))?(this._showTimer&&clearTimeout(this._showTimer),this._showTimer=setTimeout(()=>{this._handleChartMouseMove(t,e)},null!=(l=null==(n=this._spec)?void 0:n.showDelay)?l:50)):this._handleChartMouseMove(t,e)))},this._handleChartMouseMove=(e,t)=>{if(this._isReleased)return;let i=this._getMouseEventData(e),{tooltipInfo:{dimension:r},ignore:{mark:n}}=i,l={mark:!1,dimension:!1,group:!1},o=["group","mark","dimension"];for(let r=0,n=o.length;r<n;r++){let n=o[r],a=!!this.processor[n]&&this._showTooltipByMouseEvent(n,i,e,t);if("unShowByOption"===a)l[n]="unShowByOption";else if(a){l[n]=!0;break}}Object.values(l).every(e=>!e)&&!((0,r5.Z)(e.mark)&&(0,r5.Z)(e.model)&&(0,r5.Z)(e.datum))&&(n&&E1(this._cacheInfo)?l.mark=this._showTooltipByMouseEvent("mark",i,e,t,!0):(0,oV.Z)(r)&&(l.dimension=this._showTooltipByMouseEvent("dimension",i,e,t))),!0!==l.mark&&!0!==l.group&&(!0!==l.dimension||(0,r5.Z)(r))?this._cacheActiveType&&"unShowByOption"===l[this._cacheActiveType]||this._handleChartMouseOut(e):this._initEventOfTooltipContent()},this._showTooltipByMouseEvent=(e,t,i,r,n)=>{var l;let o;if(!this._showContentByEvent(e))return"unShowByOption";let a=this.processor[e];if(!a.shouldHandleTooltip(i,t.tooltipInfo[e]))return!1;if(this._hideTimer&&clearTimeout(this._hideTimer),n)o=!a.showTooltip(this._cacheInfo,i,!0);else{let r=t.tooltipInfo[e],n=this._isSameAsCache(r,i,e);(o=!a.showTooltip(r,i,n))&&(this._cacheInfo=r,this._cacheParams=i,this._cacheActiveType=e)}o&&(this._isTooltipShown=!0,r&&this._spec.lockAfterClick&&!this._clickLock?this._clickLock=!0:Number.isFinite(this._spec.hideTimer)&&(this._hideTimer=setTimeout(()=>{this._handleChartMouseOut()},this._spec.hideTimer)));let s=null==(l=this._option)?void 0:l.globalInstance;return o&&mR.globalConfig.uniqueTooltip&&s&&mR.hideTooltip(s.id),o},this._getMouseEventData=e=>{let t={tooltipInfo:{},ignore:{}};return Object.keys(this.processor).forEach(i=>{let{tooltipInfo:r,ignore:n}=this.processor[i].getMouseEventData(e);t.tooltipInfo[i]=r,t.ignore[i]=n}),t},this._hideTooltipByHandler=e=>{var t,i,r;if(!this._isTooltipShown&&!(null==(i=null==(t=this.tooltipHandler)?void 0:t.isTooltipShown)?void 0:i.call(t)))return 0;this.event.emit(N.tooltipHide,Object.assign(Object.assign({},e),{source:$.chart,tooltip:this})),Object.values(this.processor).forEach(e=>{e.clearCache()});let n=null!=(r=this._spec.handler)?r:this.tooltipHandler;if(n.hideTooltip){let t=n.hideTooltip.call(n,e);return t||(this._isTooltipShown=!1),t}return 1},this.hideTooltip=()=>{if(this._isReleased)return!1;let e={changePositionOnly:!1,tooltip:this,item:void 0,datum:void 0,source:$.chart};return this._alwaysShow=!1,!this._hideTooltipByHandler(e)}}isTooltipShown(){return this._isTooltipShown}_registerEvent(){}_releaseEvent(){}onLayoutEnd(){}created(){super.created(),this._regions=this._option.getAllRegions(),this._initEvent()}release(){var e,t;super.release(),this._isReleased=!0,this._hideTimer&&clearTimeout(this._hideTimer),this._eventList.forEach(({eventType:e,handler:t})=>{this.event.off(e,t)}),this._eventList=[],null==(t=null==(e=this.tooltipHandler)?void 0:e.release)||t.call(e),this._isTooltipShown=!1}beforeRelease(){this.event.emit(N.tooltipHide,{tooltip:this,chart:this.getChart()}),this.event.emit(N.tooltipRelease,{tooltip:this,chart:this.getChart()})}_initHandler(){var e,t,i;let r=null!=(e=this._spec.renderMode)?e:"html",n=this._option.globalInstance.getTooltipHandlerByUser();if(n)this.tooltipHandler=n,this._enterable=!1;else{let e="canvas"===r?wr.canvas:wr.dom,n=hp.getComponentPluginInType(e);n||s2("Can not find tooltip handler: "+e);let l=new n;l.name=`${this._spec.className}-${null!=(t=this._option.globalInstance.id)?t:0}-${this.getSpecIndex()}`,null==(i=this.pluginService)||i.load([l]),this.tooltipHandler=l,this._spec.enterable&&"html"===r&&this.tooltipHandler?(this._enterable=!0,this._needInitEventOfTooltip=!0):this._enterable=!1}}_initEventOfTooltipContent(){var e,t;if(!this._needInitEventOfTooltip)return;let i=null==(t=(e=this.tooltipHandler).getRootDom)?void 0:t.call(e);i&&(i.addEventListener("pointerenter",()=>{var e;if(!this._enterable)return;this._isEnterTooltip=!0;let t=null==(e=i.getBoundingClientRect)?void 0:e.call(i);t&&(this._cacheEnterableRect={width:t.width,height:t.height}),this._outTimer&&(clearTimeout(this._outTimer),this._outTimer=null),this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null)}),i.addEventListener("pointerleave",()=>{var e,t,r;if(this._enterable&&(this._isEnterTooltip=!1,"none"!==this._spec.triggerOff&&this._cacheEnterableRect)){let n=null==(e=i.getBoundingClientRect)?void 0:e.call(i);n&&Object.keys(this._cacheEnterableRect).every(e=>this._cacheEnterableRect[e]===n[e])&&(this._cacheEnterableRect=null,this._outTimer=setTimeout(this.hideTooltip,null!=(r=null==(t=this._spec)?void 0:t.showDelay)?r:50))}}),this._needInitEventOfTooltip=!1)}_initProcessor(){let e=this._spec.activeType;this.processor={},e.forEach(e=>{let t=hp.createTooltipProcessor(e,this);t&&(this.processor[e]=t)})}_initEvent(){var e;if(this._option.disableTriggerEvent)return;let t=(0,ag.IX)(null!=(e=this._spec.trigger)?e:"hover"),i=(0,ag.IX)(this._spec.triggerOff),r=this._option.mode;t.forEach(e=>{var t;"hover"===e?(this._handleMouseMove=this._throttle(this._getMouseMoveHandler(!1)),this._mountEvent("pointermove",{source:"chart"},this._handleMouseMove),(sJ(r)||sQ(r))&&(this._mountEvent("pointerdown",{source:"chart"},this._getMouseMoveHandler(!1)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))),this._mountEvent("pointerleave",{source:"chart"},this._getMouseOutHandler(!1))):"click"===e?(this._mountEvent("pointertap",{source:"chart"},this._getMouseMoveHandler(!0)),this._mountEvent("pointerup",{source:"window"},this._getMouseOutHandler(!0))):(0,r9.Z)(e)&&this._mountEvent(e.eventType,{source:null!=(t=e.source)?t:"chart",consume:e.consume},this._getMouseMoveHandler(!0))}),i.filter(e=>(0,r9.Z)(e)).forEach(e=>{var t,i;this._mountEvent(e.eventType,{source:null!=(t=e.source)?t:"chart",consume:e.consume},this._getMouseOutHandler(null!=(i=e.checkOutside)&&i))}),!t.includes("click")&&this._spec.lockAfterClick&&this._mountEvent("pointertap",{source:"chart"},this._handleClickToLock)}_throttle(e){let t;return t=(0,nw.Z)(this._spec.throttleInterval)?this._spec.throttleInterval:"html"===this._spec.renderMode&&this._spec.transitionDuration?50:10,(0,hO.Z)(e,t)}_showContentByEvent(e){var t;return!((null==(t=this._option)?void 0:t.componentShowContent)&&(!1===this._option.componentShowContent.tooltip||(0,r9.Z)(this._option.componentShowContent.tooltip)&&!1===this._option.componentShowContent.tooltip[e]))&&!0}reInit(e){var t,i,r;if(super.reInit(e),this.tooltipHandler){let e=null!=(t=this._spec.renderMode)?t:"html",n=this._spec.enterable&&"html"===e;n&&!this._enterable&&(this._needInitEventOfTooltip=!0),this._enterable=n,null==(r=(i=this.tooltipHandler).reInit)||r.call(i)}else this._initHandler()}showTooltip(e,t){var i;if(this.tooltipHandler||this._initHandler(),this.processor||this._initProcessor(),!(null==(i=this.tooltipHandler)?void 0:i.showTooltip))return!1;let r=function(e,t,i){var r,n,l,o,a,s,h;let d=Object.assign({regionIndex:0},t),u=i.getOption(),c=u.getRegionsInUserIdOrIndex((0,oV.Z)(d.regionId)?[d.regionId]:void 0,(0,oV.Z)(d.regionIndex)?[d.regionIndex]:void 0)[0];if(!c)return"none";let p=E0(e,c),g=null!=(r=d.activeType)?r:p.length>1?"dimension":"mark",f=c.getLayoutStartPoint(),m=c.getLayoutRect(),b=u.globalInstance.getContainer(),y=Object.assign({x:0,y:0},b?(0,oG.to)(b):{}),v=e=>{var t;let{dimensionFields:i,dimensionData:r,measureFields:n,measureData:l,groupField:o,groupData:a}=e.data;return null==(t=e.series.getViewData())?void 0:t.latestData.find(e=>EJ(i,r)(e)&&EJ(n,l)(e)&&((0,r5.Z)(o)||EJ([o],[a])(e)))},_=c.getOption().globalInstance.getStage().window.getViewBoxTransform().getInverse(),C=e=>{var t,i;let r={x:Math.min(Math.max(e.x,0),m.width),y:Math.min(Math.max(e.y,0),m.height)},n=null!=(t=d.x)?t:f.x+r.x,l=null!=(i=d.y)?i:f.y+r.y,o={x:0,y:0};_.transformPoint({x:n,y:l},o);let{x:a,y:s}=o;return{canvasX:a,canvasY:s,clientX:y.x+a,clientY:y.y+s}};if("dimension"===g){let t=p[0];if(!t)return"none";let r=new Map;p.forEach(e=>{var t;r.has(e.series)||r.set(e.series,[]),null==(t=r.get(e.series))||t.push(e)});let s=[{value:e[t.data.dimensionFields[0]],data:[...r.keys()].map(e=>{var t,i;return{series:e,datum:null!=(i=null==(t=r.get(e))?void 0:t.map(e=>v(e)))?i:[]}})}];(0,oV.Z)(t.dimType)&&(s[0].position=t.pos[t.dimType],s[0].dimType=t.dimType);let h={changePositionOnly:!1,action:"enter",tooltip:null,dimensionInfo:s,chart:null!=(n=u.globalInstance.getChart())?n:void 0,datum:void 0,model:void 0,source:$.chart,event:C({x:p.reduce((e,t)=>e+t.pos.x,0)/p.length,y:p.reduce((e,t)=>e+t.pos.y,0)/p.length}),item:void 0};null==(a=null==(o=null==(l=i.processor)?void 0:l.dimension)?void 0:o.showTooltip)||a.call(o,s,h,!1);let d=u.globalInstance;return mR.globalConfig.uniqueTooltip&&mR.hideTooltip(d.id),g}if("mark"===g){let t=p[0];if(!t)return"none";let r=null!=(s=t.data.originDatum)?s:Object.assign(Object.assign({},v(t)),e),n=[{datum:[r],series:t.series}],l={changePositionOnly:!1,tooltip:null,dimensionInfo:[{value:r[t.data.dimensionFields[0]],data:n}],chart:null!=(h=u.globalInstance.getChart())?h:void 0,datum:r,model:t.series,source:$.chart,event:C(t.pos),item:void 0};i.processor.mark.showTooltip({datum:r,mark:null,series:t.series},l,!1);let o=u.globalInstance;return mR.globalConfig.uniqueTooltip&&mR.hideTooltip(o.id),g}return"none"}(e,t,this);return"none"!==r&&(this._alwaysShow=!!(null==t?void 0:t.alwaysShow),this._cacheActiveType=r),r}_isSameAsCache(e,t,i){if(i!==this._cacheActiveType)return!1;if(e===this._cacheInfo)return!0;if((0,r5.Z)(this._cacheInfo)||(0,r5.Z)(e))return!1;if(E2(e)){if(E1(this._cacheInfo))return!1;let t=this._cacheInfo;return t.length===e.length&&e.every((e,i)=>xN(e,t[i]))}if(E2(this._cacheInfo))return!1;let r=this._cacheInfo;if((null==e?void 0:e.datum)!==r.datum||(null==e?void 0:e.mark)!==r.mark||(null==e?void 0:e.series)!==r.series)return!1;let n=this._cacheParams;return!(0,r5.Z)(n)&&!(0,r5.Z)(t)&&n.mark===t.mark&&n.model===t.model&&n.datum===t.datum}_isPointerInChart(e){var t;let i=null==(t=this._option)?void 0:t.globalInstance;if(!i||!i.getChart())return!1;let{x:r,y:n}=e,{x:l,y:o,width:a,height:s}=i.getCanvas().getBoundingClientRect();return r>=l&&r<=l+a&&n>=o&&n<=o+s}getVisible(){return!1!==this._spec.visible}}E4.type=sc.tooltip,E4.transformerConstructor=E3,E4.builtInTheme={tooltip:{offset:{x:10,y:10},panel:{padding:{top:10,left:10,right:10,bottom:10},backgroundColor:{type:"palette",key:"popupBackgroundColor"},border:{color:{type:"palette",key:"popupBackgroundColor"},width:0,radius:3},shadow:{x:0,y:4,blur:12,spread:0,color:{type:"palette",key:"shadowColor"}}},spaceRow:6,titleLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0},shape:{size:8,spacing:6},keyLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"secondaryFontColor"},textBaseline:"middle",spacing:26},valueLabel:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fontColor:{type:"palette",key:"primaryFontColor"},fontWeight:"bold",textBaseline:"middle",spacing:0}}},E4.specKey="tooltip";class E5 extends yN{constructor(){super(...arguments),this.name="crosshair"}render(){this.renderCrosshair(this)}}dV(),bX();class E6 extends E5{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},E6.defaultAttributes,e))}renderCrosshair(e){let{start:t,end:i,lineStyle:r}=this.attribute;return e.createOrUpdateChild("crosshair-line",Object.assign({points:[t,i]},r),"line")}setLocation(e){let{start:t,end:i}=e;this.setAttributes({start:t,end:i})}}E6.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},dV(),ct();class E8 extends E5{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},E8.defaultAttributes,e))}renderCrosshair(e){let{start:t,end:i,rectStyle:r}=this.attribute;return e.createOrUpdateChild("crosshair-rect",Object.assign({x:t.x,y:t.y,width:i.x-t.x,height:i.y-t.y},r),"rect")}setLocation(e){let{start:t,end:i}=e;this.setAttributes({start:t,end:i})}}E8.defaultAttributes={rectStyle:{fill:"#b2bacf",opacity:.2}},(eG=te||(te={}))[eG.ALL=3]="ALL",eG[eG.HORIZONTAL=2]="HORIZONTAL",eG[eG.VERTICAL=1]="VERTICAL";var E7=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};let E9={x:["top","bottom"],y:["left","right"],category:["angle"],value:["radius"]};class Pe extends vJ{get enableRemain(){return"none"===this.triggerOff}constructor(e,t){super(e,t),this.specKey="crosshair",this.layoutType="none",this.gridZIndex=X.CrossHair_Grid,this.labelZIndex=X.CrossHair,this.trigger="hover",this._handleIn=e=>{if(!this._option)return;let{x:t,y:i}=this.calculateTriggerPoint(e);this.showDefault=!1,this._layoutCrosshair(t,i);let r=this._getNeedClearVRenderComponents();this._hasActive=r.some(e=>e&&!1!==e.attribute.visible)},this._handleClickInEvent=e=>{if(!this._hasActive||!this._spec.lockAfterClick||this._clickLock)return this._clickLock?(this._clickLock=!1,void this._handleOutEvent()):void(this._onlyLockClick||(this._handleIn(e),(0,nw.Z)(this.triggerOff)&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout(()=>{this._handleOutEvent()},this.triggerOff))));this._clickLock=!0},this._handleHoverInEvent=(0,hO.Z)(e=>{this._clickLock||this._handleIn(e)},10),this._handleOutEvent=()=>{this.enableRemain||this._clickLock||!this._hasActive||(this.clearOutEvent(),this.hideCrosshair())},this._handleTooltipShow=e=>{let t=e.tooltipData;if(e.isEmptyTooltip||!t||!t.length||(0,r9.Z)(this._spec.followTooltip)&&!1===this._spec.followTooltip[e.activeType])return void this._handleTooltipHideOrRelease();let{x:i,y:r}=this.calculateTriggerPoint(e);this.showDefault=!1,this._layoutCrosshair(i,r,t,e.activeType);let n=this._getNeedClearVRenderComponents();this._hasActive=n.some(e=>e&&!1!==e.attribute.visible)},this._handleTooltipHideOrRelease=()=>{this.clearOutEvent(),this.hideCrosshair()},this.enable=!0,this.showDefault=!0}_setAllAxisValues(e,t,i){let r=!1;if(e.forEach(e=>{(0,cz.lK)(e.axis.getScale().type)&&(r?this.enable=!1:r=!0)}),!this.enable)return!1;let{currentValue:n}=this._stateByField[i];return e.forEach((e,i)=>{let r=e.axis;n.set(i,{datum:this._getDatumAtPoint(r,t),axis:r})}),!0}clearAxisValue(){Object.keys(this._stateByField).forEach(e=>{this._stateByField[e].currentValue.clear()})}hideCrosshair(){this.clearAxisValue(),this.hide()}showCrosshair(e){e&&e.length&&(this.showDefault=!1,this.clearAxisValue(),e.forEach(e=>{let{axis:t,value:i}=e;this.setAxisValue(i,t)}),this.layoutByValue(!1))}_getLimitBounds(){var e,t;if(!this._limitBounds){let{width:i,height:r}=null!=(t=null==(e=this._option.globalInstance.getChart())?void 0:e.getViewRect())?t:{width:0,height:0};this._limitBounds={x1:0,y1:0,x2:i,y2:r}}return this._limitBounds}_showDefaultCrosshairBySpec(){let e=!1;return Object.keys(this._stateByField).forEach(t=>{let i=this._spec[t];if(i&&i.visible&&i.defaultSelect){let{axisIndex:r=0,datum:n}=i.defaultSelect,l=this._option.getComponentsByKey("axes").find(e=>e.getSpecIndex()===r);l&&(e=!0,this._stateByField[t].currentValue.clear(),this._stateByField[t].currentValue.set(r,{axis:l,datum:n}))}}),e}_updateVisibleCrosshair(){let e=!1;Object.keys(this._stateByField).forEach(t=>{let i=this._spec[t];i&&i.visible&&this._stateByField[t].currentValue.size?e=!0:this._hideByField(t)}),e&&this.layoutByValue(!1)}_showDefaultCrosshair(){this.showDefault?this._showDefaultCrosshairBySpec()&&this.layoutByValue(!1):this._updateVisibleCrosshair()}setAttrFromSpec(){super.setAttrFromSpec(),this._parseCrosshairSpec()}created(){super.created(),this._initEvent()}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(0,dN.X)(t,e)||(i.reRender=!0,i.reMake=!0),i}_initEvent(){if(!this._option.disableTriggerEvent)if(this._spec.followTooltip)this._registerTooltipEvent();else{let e=this._getTriggerEvent();e&&e.forEach(e=>{this._registerEvent(e.in,!1,e.click),e.out&&this._registerEvent(e.out,!0)})}}_registerEvent(e,t,i){var r;if(!1===(null==(r=this._option.componentShowContent)?void 0:r.crosshair))return;let n=t?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent,l=t?{level:j.chart}:{source:$.chart};(0,ri.Z)(e)?e.forEach(e=>{this.event.on(e,l,n)}):this.event.on(e,l,n)}_eventOff(e,t,i){let r=t?this._handleOutEvent:i?this._handleClickInEvent:this._handleHoverInEvent;(0,ri.Z)(e)?e.forEach(e=>{this.event.off(e,r)}):this.event.off(e,r)}onBeforeRender(){this._limitBounds=null,this._showDefaultCrosshair()}calculateTriggerPoint(e){let{event:t}=e,i=this._option.getCompiler().getStage().getLayer(void 0),r={x:t.viewX,y:t.viewY};return i.globalTransMatrix.transformPoint({x:t.viewX,y:t.viewY},r),{x:r.x-this.getLayoutStartPoint().x,y:r.y-this.getLayoutStartPoint().y}}_getTriggerEvent(){let{mode:e=su["desktop-browser"]}=this._option,t=e===su["desktop-browser"]||e===su["desktop-miniApp"]?{click:"pointertap",hover:"pointermove",hoverOut:"pointerleave",clickOut:"pointerleave"}:sJ(e)||sQ(e)?{click:"tap",hover:["pointerdown","pointermove"],hoverOut:"pointerleave",clickOut:"pointerleave"}:null;if(t){let e=(0,ag.IX)(this.trigger||"hover"),i=e=>"click"===e?"none"===this.triggerOff?null:t.clickOut:t.hoverOut;this._spec.lockAfterClick&&!e.includes("click")?(e.push("click"),this._onlyLockClick=!0):this._onlyLockClick=!1;let r=[];return e.forEach(e=>{r.push({click:"click"===e,in:t[e],out:i(e)})}),r}return null}_registerTooltipEvent(){this.event.on(N.tooltipHide,{source:$.chart},this._handleTooltipHideOrRelease),this.event.on(N.tooltipShow,{source:$.chart},this._handleTooltipShow),this.event.on(N.tooltipRelease,{source:$.chart},this._handleTooltipHideOrRelease)}_getAxisInfoByField(e){var t,i;let r=null==(i=(t=this._option).getComponentsByKey)?void 0:i.call(t,"axes");if(!(null==r?void 0:r.length))return null;let n=(0,hH.Z)(this._spec,`${e}Field.bindingAxesIndex`);if(n||(n=[],r.forEach((t,i)=>{E9[e].includes(t.getOrient())&&n.push(i)})),!n.length)return null;let l=new Map,o=1/0,a=1/0,s=-1/0,h=-1/0,{x:d,y:u}=this.getLayoutStartPoint();return n.forEach(e=>{var t;o=1/0,a=1/0,s=-1/0,h=-1/0;let i=r.find(t=>t.getSpecIndex()===e);if(!i)return;let n=(null==(t=i.getInnerOffset)?void 0:t.call(i))||{left:0,right:0,top:0,bottom:0};i.getRegions().forEach(e=>{let{x:t,y:i}=e.getLayoutStartPoint();o=Math.min(o,t-d+n.left),a=Math.min(a,i-u+n.top),s=Math.max(s,t+e.getLayoutRect().width-d-n.right),h=Math.max(h,i+e.getLayoutRect().height-u-n.bottom)}),l.set(e,{x1:o,y1:a,x2:s,y2:h,axis:i})}),l}onLayoutEnd(){let e=this._regions[0];this.setLayoutRect(e.getLayoutRect()),this.setLayoutStartPosition(e.getLayoutStartPoint()),super.onLayoutEnd()}_releaseEvent(){this.clearOutEvent();let e=this._getTriggerEvent();e&&e.forEach(e=>{this._eventOff(e.in,!1,e.click),e.out&&this._eventOff(e.out,!0)})}_parseFieldInfo(){Object.keys(this._stateByField).forEach(e=>{let t=this._spec[e],{crosshairComp:i}=this._stateByField[e];if(t&&t.visible){if(this._stateByField[e].attributes=this._parseField(t,e),i){let{style:t,type:r}=this._stateByField[e].attributes;i.setAttributes({["rect"===r?"rectStyle":"lineStyle"]:t})}}else i&&i.parent&&i.parent.removeChild(i)})}_parseCrosshairSpec(){this._parseFieldInfo();let{trigger:e,triggerOff:t,labelZIndex:i,gridZIndex:r}=this._spec;e&&(this.trigger=e),("none"===t||(0,nw.Z)(t)&&t>0)&&(this.triggerOff=t),void 0!==i&&(this.labelZIndex=i),void 0!==r&&(this.gridZIndex=r)}_parseField(e,t){var i,r,n;let l={},{line:o={},label:a={},visible:s}=e;if(l.visible=s,l.type=o.type||"line",!1===o.visible)l.style={visible:!1};else{let t=o.style||{},{stroke:n,fill:a,lineWidth:s}=t,{strokeOpacity:h,fillOpacity:d,opacity:u}=t,c=E7(t,["strokeOpacity","fillOpacity","opacity"]),p="line"===l.type,g=p?h:d;if((0,nw.Z)(u)&&(g=(null!=g?g:1)*u),l.style=Object.assign({opacity:g,pickable:!1,visible:!0},c),p)l.style.stroke=n||a,l.style.lineWidth=(0,hH.Z)(o,"width",s||2);else{l.style.fill=a||n,(null==(r=null==(i=null==e?void 0:e.line)?void 0:i.style)?void 0:r.stroke)&&(l.style.stroke=e.line.style.stroke);let t=(0,hH.Z)(o,"width");if("string"==typeof t){let e=parseInt(t.substring(0,t.length-1),10)/100;l.style.sizePercent=e}else"number"!=typeof t&&"function"!=typeof t||(l.style.size=t)}}if(a.visible){let e=a.labelBackground||{},t=null!=(n=a.syncAxisLabelAngle)&&n,i=a.style||{},r=e.style||{},{fill:o="rgba(47, 59, 82, 0.9)",stroke:s,outerBorder:h}=r,d=E7(r,["fill","stroke","outerBorder"]);l.label={visible:!0,formatMethod:a.formatMethod,formatter:a.formatter,minWidth:e.minWidth,maxWidth:e.maxWidth,padding:e.padding,syncAxisLabelAngle:t,textStyle:Object.assign(Object.assign({fontSize:14,pickable:!1},i),{fill:i.fill||"#fff",stroke:(0,hH.Z)(i,"stroke")}),panel:((0,ni.Z)(e.visible)?e.visible:e)?Object.assign({visible:!0,pickable:!1,fill:o,stroke:s,outerBorder:Object.assign({stroke:o,distance:0,lineWidth:3},h)},d):{visible:!1},zIndex:this.labelZIndex,childrenPickable:!1,pickable:!1}}else l.label={visible:!1};return l}_filterAxisByPoint(e,t,i){return e&&e.forEach(r=>{let n=r.axis;if((r.x1>t||r.x2<t||r.y1>i||r.y2<i)&&e.delete(n.getSpecIndex()),n.type.startsWith("polarAxis")){let r=n.getCenter(),l=n.getInnerRadius(),o=n.getOuterRadius(),a=il.HL.distancePP({x:t,y:i},r);(a>o||a<l)&&e.delete(n.getSpecIndex())}}),e}_updateCrosshairLabel(e,t,i){let r=this.getContainer();e?e.setAttributes(t):(e=new CL(t),null==r||r.add(e),i(e)),function(e,t){let{x1:i,y1:r,x2:n,y2:l}=t,{x1:o,y1:a,x2:s,y2:h}=e.AABBBounds,{dx:d=0,dy:u=0}=e.attribute,c=0,p=0;o<i&&(c=i-o),a<r&&(p=r-a),s>n&&(c=n-s),h>l&&(p=l-h),c&&e.setAttribute("dx",c+d),p&&e.setAttribute("dy",p+u)}(e,this._getLimitBounds())}clearOutEvent(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._clickLock&&(this._clickLock=null),this._hasActive&&(this._hasActive=null)}_hideByField(e){let{crosshairComp:t,labelsComp:i}=this._stateByField[e];t&&t.hideAll(),i&&Object.keys(i).forEach(e=>{i[e]&&i[e].hideAll()})}hide(){Object.keys(this._stateByField).forEach(e=>{this._hideByField(e)})}_getNeedClearVRenderComponents(){return Object.keys(this._stateByField).reduce((e,t)=>{let{crosshairComp:i,labelsComp:r}=this._stateByField[t];return i&&e.push(i),r&&Object.keys(r).forEach(t=>{r[t]&&e.push(r[t])}),e},[])}}Pe.specKey="crosshair";let Pt={trigger:"hover",bandField:{visible:!1,line:{type:"rect",visible:!0,style:{fill:{type:"palette",key:"axisGridColor"},opacity:.7,lineWidth:0,stroke:{type:"palette",key:"markLineStrokeColor"},lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}},linearField:{visible:!1,line:{type:"line",visible:!0,style:{stroke:{type:"palette",key:"markLineStrokeColor"},fill:"transparent",opacity:.7,lineDash:[2,3]}},label:{visible:!1,style:{fontWeight:"normal",fill:{type:"palette",key:"axisMarkerFontColor"},fontSize:{type:"token",key:"l5FontSize"}},labelBackground:{padding:{bottom:0,top:0,left:2,right:2},style:{fill:{type:"palette",key:"axisMarkerBackgroundColor"},cornerRadius:1}}}}};class Pi extends Pe{static getSpecInfo(e){return mX(e,this.specKey,this.type,e=>e.xField&&!1!==e.xField.visible||e.yField&&!1!==e.yField.visible)}constructor(e,t){super(e,t),this.type=sc.cartesianCrosshair,this.name=sc.cartesianCrosshair,this._stateByField={xField:{coordKey:"x",anotherAxisKey:"y",currentValue:new Map,labelsComp:{top:null,bottom:null}},yField:{coordKey:"y",anotherAxisKey:"x",currentValue:new Map,labelsComp:{left:null,right:null}}}}_findAllAxisContains(e,t){let i=this._getAxisInfoByField("x"),r=this._getAxisInfoByField("y");return{xAxisMap:this._filterAxisByPoint(i,e,t),yAxisMap:this._filterAxisByPoint(r,e,t)}}_getDatumAtPoint(e,t){let i=ve(e.getOrient())?"x":"y",r=t[i]-(e.getLayoutStartPoint()[i]-this.getLayoutStartPoint()[i]);return e.getScale().invert(r)}setAxisValue(e,t){ve(t.getOrient())?this._stateByField.xField.currentValue.set(t.getSpecIndex(),{datum:e,axis:t}):this._stateByField.yField.currentValue.set(t.getSpecIndex(),{datum:e,axis:t})}_layoutCrosshair(e,t,i,r){var n;let l=e,o=t;if(i&&i.length){if("dimension"===r){let e,t=i[0],r=t.data.findIndex(e=>e.datum.length>0);if(r>-1){let i=t.data[r];e=i.series.dataToPosition(i.datum[0])}((0,oV.Z)(t.dimType)?"y"===t.dimType:vt(null==(n=null==t?void 0:t.axis)?void 0:n.getOrient()))?o=null==e?void 0:e.y:l=null==e?void 0:e.x}else if("mark"===r){let e=i[0],t=e.series.dataToPosition(e.datum[0]);l=null==t?void 0:t.x,o=null==t?void 0:t.y}}this.clearAxisValue();let{xAxisMap:a,yAxisMap:s}=this._findAllAxisContains(l,o);if(a&&0===a.size||s&&0===s.size){if(this.enableRemain)return;this.hide()}else a&&a.size&&this._setAllAxisValues(a,{x:l,y:o},"xField"),s&&s.size&&this._setAllAxisValues(s,{x:l,y:o},"yField"),this.layoutByValue()}layoutByValue(e){if(!this.enable)return;let t=y9(this._regions,"cartesian");t&&(x4(this._stateByField,t,this.getLayoutStartPoint(),null!=e?e:this.enableRemain),Object.keys(this._stateByField).forEach(e=>{this._layoutByField(e)}))}_layoutByField(e){let{cacheInfo:t,attributes:i,labelsComp:r,bandSize:n,coordKey:l}=this._stateByField[e];if(!i||!t||t._isCache&&this.enableRemain)return;let{coord:o,labels:a,visible:s,labelsTextStyle:h}=t;if(s){let s=x8(this._stateByField[e]);this._updateCrosshairByField(e,s),Object.keys(a).forEach(s=>{var d,u,c;if(a[s].visible){let p=Object.assign(Object.assign(Object.assign({[l]:o+n/2},a[s]),i.label),{angle:i.label.syncAxisLabelAngle&&null!=(u=null==(d=t.axisLabel)?void 0:d.attribute.angle)?u:0,textStyle:Object.assign(Object.assign({},null==(c=i.label)?void 0:c.textStyle),h[s]),zIndex:this.labelZIndex,visible:!0});this._updateCrosshairLabel(r[s],p,t=>{t.name=`crosshair-${e.replace("Field","")}-${s}-label`,r[s]=t})}else r[s]&&r[s].hideAll()})}else this._hideByField(e)}_updateCrosshairByField(e,t){let i=this.getContainer(),{attributes:r}=this._stateByField[e],{crosshairComp:n}=this._stateByField[e];if(n)n.setAttributes(t);else{let l=r.style;"line"===r.type?n=new E6(Object.assign(Object.assign({},t),{lineStyle:l,zIndex:this.gridZIndex+1,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1})):"rect"===r.type&&(n=new E8(Object.assign(Object.assign({},t),{rectStyle:l,zIndex:this.gridZIndex,disableTriggerEvent:this._option.disableTriggerEvent,pickable:!1}))),null==i||i.add(n),this._stateByField[e].crosshairComp=n}}}Pi.specKey="crosshair",Pi.builtInTheme={crosshair:Pt},Pi.type=sc.cartesianCrosshair,dV(),CT();class Pr extends E5{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Pr.defaultAttributes,e))}renderCrosshair(e){let{center:t,radius:i,innerRadius:r=0,sectorStyle:n}=this.attribute,{startAngle:l,endAngle:o}=this.attribute;return e.createOrUpdateChild("crosshair-sector",Object.assign(Object.assign(Object.assign({},t),{outerRadius:i,innerRadius:r,startAngle:l,endAngle:o}),n),"arc")}setLocation(e){let{center:t,startAngle:i=pG,endAngle:r=pV}=this.attribute,n=r-i,l=(0,t9.Dt)((0,t9.Oy)(t,e));this.setAttributes({startAngle:l-n/2,endAngle:l+n/2})}}Pr.defaultAttributes={sectorStyle:{fill:"#b2bacf",opacity:.2}},dV(),_1();class Pn extends E5{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Pn.defaultAttributes,e))}renderCrosshair(e){let t,{center:i,radius:r,sides:n=6,lineStyle:l}=this.attribute,{startAngle:o,endAngle:a}=this.attribute,s=(a-o)%(2*Math.PI)==0,h=(a-o)/n;for(let e=0;e<=n;e++){let l=(0,t9.op)(i,r,o+h*e);0===e?t=`M${l.x},${l.y}`:t+=`L${l.x},${l.y}`,e===n&&s&&(t+="Z")}return e.createOrUpdateChild("crosshair-polygon",Object.assign({path:t},l),"path")}setLocation(e){let{center:t}=this.attribute,i=il.HL.distancePP(e,t);this.setAttribute("radius",i)}}Pn.defaultAttributes={lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},dV(),CT();class Pl extends E5{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Pl.defaultAttributes,e))}renderCrosshair(e){let{center:t,radius:i,lineStyle:r}=this.attribute;return e.createOrUpdateChild("crosshair-circle",Object.assign(Object.assign(Object.assign(Object.assign({},t),{outerRadius:i}),this.attribute),r),"arc")}setLocation(e){let{center:t}=this.attribute,i=il.HL.distancePP(e,t);this.setAttribute("radius",i)}}Pl.defaultAttributes={lineStyle:{stroke:["#b2bacf",!1,!1,!1],lineWidth:1,lineDash:[2]}};let Po=(e,t,i=!1)=>{Object.keys(e).forEach(r=>{let{attributes:n,currentValue:l,cacheInfo:o,coordKey:a}=e[r];if(n){let s=!!l.size,h=i&&!s&&(0,oV.Z)(o),d=h?o:{coord:0,axis:null,visible:s,coordRange:[0,0],sizeRange:[0,0],labels:{all:{visible:!1,text:"",offset:0}}};if(o&&(o._isCache=h),"valueField"===r&&(d.sides=t.angleAxisHelper.getScale(0).domain().length),l.forEach(({axis:e,datum:i=""})=>{var l;let o=e.niceLabelFormatter;if((null==(l=n.label)?void 0:l.visible)&&(d.labels.all.visible=!0,d.labels.all.defaultFormatter=o,d.labels.all.text=i,d.labels.all.offset=vM(e.getSpec())),"categoryField"===r){let r=t.angleAxisHelper.dataToPosition([i]),n=t.angleAxisHelper.getBandwidth(0),l=e.getOuterRadius();d.coord=r,d.coordRange=[r-n/2,r+n/2],d.sizeRange=[l,l]}else{let r=e.startAngle,n=t.radiusAxisHelper.dataToPosition([i]);d.coord=n,d.coordRange=[n,n],d.sizeRange=[r,r]}d.axis=e}),d&&!h&&d.labels.all.visible&&n&&n.label){let e=d.labels.all,{formatMethod:t,formatter:i}=n.label,{formatFunc:r,args:l}=mK(t,i,e.text,{label:e.text,orient:a});r?e.text=r(...l):e.defaultFormatter&&(e.text=e.defaultFormatter(e.text))}e[r].cacheInfo=d}})},Pa=(e,t,i)=>{let{cacheInfo:r,coordKey:n,attributes:l}=e,{axis:o,coord:a,sizeRange:s,coordRange:h}=r,d=o.getCenter(),u={x:d.x+t.x,y:d.y+t.y};if("angle"===n)return"sector"==("rect"===l.type?"sector":"line")?{center:u,innerRadius:o.getInnerRadius(),radius:o.getOuterRadius(),startAngle:h[0],endAngle:h[1]}:{start:(0,t9.op)(u,o.getInnerRadius(),a),end:(0,t9.op)(u,o.getOuterRadius(),a)};let c=o.startAngle,p=o.endAngle,g=r.sides,f=a;if(!i){let e=o.getCenter(),t=o.coordToPoint({angle:s[0],radius:a}),i=(0,t9.Oy)(e,t),r=(p-c)/g,n=Math.floor((i-c)/r),l=Math.min((n+1)*r+c,p),h=(0,t9.op)(e,a,n*r+c),d=(0,t9.op)(e,a,l),u=(0,ai.Jz)([d.x,d.y],[h.x,h.y],[e.x,e.y],[t.x,t.y]);u&&(f=(0,g9.Z)(il.HL.distancePN(t,u[0],u[1])+a,o.getInnerRadius(),o.getOuterRadius()))}return{center:u,startAngle:c,endAngle:p,radius:f,sides:g}};class Ps extends Pe{static getSpecInfo(e){return mX(e,this.specKey,this.type,e=>e.categoryField&&!1!==e.categoryField.visible||e.valueField&&!1!==e.valueField.visible)}constructor(e,t){super(e,t),this.type=sc.polarCrosshair,this.name=sc.polarCrosshair,this._stateByField={categoryField:{coordKey:"angle",anotherAxisKey:"radius",currentValue:new Map,labelsComp:{all:null}},valueField:{coordKey:"radius",anotherAxisKey:"angle",currentValue:new Map,labelsComp:{all:null}}}}setAxisValue(e,t){"radius"===t.getOrient()?this._stateByField.valueField.currentValue.set(t.getSpecIndex(),{datum:e,axis:t}):this._stateByField.categoryField.currentValue.set(t.getSpecIndex(),{datum:e,axis:t})}_findAllAxisContains(e,t){let i=this._getAxisInfoByField("category"),r=this._getAxisInfoByField("value");return{angleAxisMap:this._filterAxisByPoint(i,e,t),radiusAxisMap:this._filterAxisByPoint(r,e,t)}}_getDatumAtPoint(e,t){let{x:i,y:r}=e.getLayoutStartPoint(),{x:n,y:l}=this.getLayoutStartPoint();return e.positionToData({x:t.x-(i-n),y:t.y-(r-l)})}_layoutCrosshair(e,t,i,r){let n=e,l=t;if(i&&i.length){if("dimension"===r){let e=i[0];if(e.axis){let t=e.axis.pointToCoord({x:n,y:l}),i="radius"===e.axis.getOrient()?{radius:e.position,angle:t.angle}:{radius:t.radius,angle:e.position},r=e.axis.coordToPoint(i);n=r.x,l=r.y}}else if("mark"===r){let e=i[0],t=e.series.dataToPosition(e.datum[0]);n=t.x,l=t.y}}this.clearAxisValue();let{angleAxisMap:o,radiusAxisMap:a}=this._findAllAxisContains(n,l);if(0!==o.size||0!==a.size)o&&this._setAllAxisValues(o,{x:n,y:l},"categoryField"),a&&this._setAllAxisValues(a,{x:n,y:l},"valueField"),this.layoutByValue();else{if(this.enableRemain)return;this.hide()}}layoutByValue(e){if(!this.enable)return;let t=y9(this._regions,"polar");t&&(Po(this._stateByField,t,null!=e?e:this.enableRemain),Object.keys(this._stateByField).forEach(e=>{this._layoutByField(e)}))}_layoutByField(e){var t,i,r,n,l;let{cacheInfo:o,attributes:a,crosshairComp:s,labelsComp:h,coordKey:d}=this._stateByField[e];if(!o||o._isCache&&this.enableRemain)return;let u=this.getContainer(),{visible:c,labels:p,coord:g,sizeRange:f,axis:m}=o;if(c){let o=this.getLayoutStartPoint(),c=null==(i=null==(t=this._spec.valueField)?void 0:t.line)?void 0:i.smooth,b=Pa(this._stateByField[e],o,c);if(s)s.setAttributes(b);else{let t;if("angle"===d){let e="rect"===a.type?"sector":"line";"line"===e?t=new E6(Object.assign(Object.assign({},b),{lineStyle:a.style,zIndex:this.gridZIndex,pickable:!1})):"sector"===e&&(t=new Pr(Object.assign(Object.assign({},b),{sectorStyle:a.style,zIndex:this.gridZIndex,pickable:!1})))}else t="polygon"==(c?"circle":"polygon")?new Pn(Object.assign(Object.assign({},b),{lineStyle:a.style,zIndex:this.gridZIndex+1})):new Pl(Object.assign(Object.assign({},b),{lineStyle:a.style,zIndex:this.gridZIndex}));this._stateByField[e].crosshairComp=t,u.add(t)}let y=p.all;if(y.visible){let e,t,i,s,u=m.getCenter(),c={x:u.x+o.x,y:u.y+o.y},p="angle"===d?(n=g,{align:(n=(0,t9.LW)(n))>=5/3*Math.PI||n<=1/3*Math.PI?"left":n>=2/3*Math.PI&&n<=4/3*Math.PI?"right":"center",baseline:n>=7/6*Math.PI&&n<=11/6*Math.PI?"bottom":n>=1/6*Math.PI&&n<=5/6*Math.PI?"top":"middle"}):(l=m.startAngle,{align:(l=(0,t9.LW)(l))>=7/6*Math.PI&&l<=11/6*Math.PI?"right":l>=1/6*Math.PI&&l<=5/6*Math.PI?"left":"center",baseline:l>=5/3*Math.PI||l<=1/3*Math.PI?"bottom":l>=2/3*Math.PI&&l<=4/3*Math.PI?"top":"middle"}),v=Object.assign(Object.assign(Object.assign(Object.assign({},"angle"===d?(0,t9.op)(c,f[1]+y.offset,g):(0,t9.op)(c,b.radius,m.startAngle)),a.label),y),{textStyle:Object.assign(Object.assign({},null==(r=a.label)?void 0:r.textStyle),{textAlign:p.align,textBaseline:p.baseline}),zIndex:this.labelZIndex});this._updateCrosshairLabel(h.all,v,e=>{e.name=`crosshair-${d}-label`,h.all=e})}else h.all&&h.all.hideAll()}}}Ps.specKey="crosshair",Ps.builtInTheme={crosshair:Pt},Ps.type=sc.polarCrosshair;let Ph=(e,t)=>{let{getNewDomain:i,isContinuous:r,field:n,originalFields:l}=t,o=n(),a=i();if((0,r5.Z)(a)||(0,r5.Z)(o))return e;let s=l(),h=(0,ri.Z)(o)?o[0]:o;return e[h]&&s&&s[h]&&s[h].lockStatisticsByDomain&&!r()&&(e[h].values=a),e},Pd=(e,t)=>{let{getNewDomain:i,isContinuous:r,field:n}=t,l=n(),o=i();if((0,r5.Z)(o)||(0,r5.Z)(l))return e;if(0===o.length)return[];let a={};o.forEach(e=>{a[e]||(a[e]=1)});let s=null;return s=r()?e=>{let t=!1;return(0,ag.IX)(l).every(i=>{e[i]>=o[0]&&e[i]<=(0,ag.Z$)(o)&&(t=!0)}),t}:e=>{let t=!1;return(0,ag.IX)(l).every(i=>{(a[e[i]+""]||a[e[i]])&&(t=!0)}),t},e.filter(s)},Pu=(e,t)=>{let{stateFields:i,valueFields:r,dataCollection:n,isCategoryState:l,seriesCollection:o}=t.input,{stateField:a,valueField:s}=t.output,h={},d=[],u=[],c=[],p=!1,g=!1;return n.forEach((e,t)=>{var n;if((0,r5.Z)(i[t]))return;let l=o[t];if(l){let e=l.getRawDataStatisticsByField(i[t]);(0,oV.Z)(null==e?void 0:e.max)&&(0,oV.Z)(null==e?void 0:e.min)&&(g=!0)}let a=null==(n=e.getFields())?void 0:n[i[t]];a&&a.lockStatisticsByDomain&&(p=!0,a.domain.forEach(e=>{(0,r5.Z)(h[e])&&(c.push(e),h[e]=0,d.push(e))})),e.latestData.forEach(e=>{(0,ag.IX)(i[t]).forEach(i=>{(0,r5.Z)(e[i])||((0,r5.Z)(h[e[i]])&&(c.push(e[i]),h[e[i]]=0,d.push(e[i])),(0,r5.Z)(r[t])||(h[e[i]]+=isNaN(parseFloat(e[r[t]]))?1:parseFloat(e[r[t]])))})})}),(p?c:!1===l||g?c.sort((e,t)=>e-t):d).forEach(e=>{let t={[a]:e};s&&(t[s]=h[e]),u.push(t)}),u},Pc=(e,t,i)=>{let r=t.domain();if((0,cz.z2)(t.type))return i?r[0]+((0,ag.Z$)(r)-r[0])*(1-e):r[0]+((0,ag.Z$)(r)-r[0])*e;let n=t.range();i&&(n=n.slice().reverse());let l=n[0]+((0,ag.Z$)(n)-n[0])*e;return t.invert(l)},Pp=(e,t,i)=>{let r=t.scale(e),n=t.range();return!i&&(0,cz.z2)(t.type)&&(n=n.slice().reverse()),Math.max(0,Math.min(1,(r-n[0])/((0,ag.Z$)(n)-n[0])))},Pg=(e,t)=>{if(!e)return!1;let i=e.getScale();return i.range()[0]>i.range()[1]&&(!e.getInverse()||t)},Pf=e=>{let t=null==e?void 0:e.bandSize,i=null==e?void 0:e.maxBandSize,r=null==e?void 0:e.minBandSize;if(t||r||i)return{bandSize:t,maxBandSize:i,minBandSize:r}},Pm=(e,t,i)=>"start"===e?"percent"===t&&(0,oV.Z)(i.start)||"value"===t&&(0,oV.Z)(i.startValue):"percent"===t&&(0,oV.Z)(i.end)||"value"===t&&(0,oV.Z)(i.endValue),Pb=(e,t,i)=>{if((0,cz.z2)(i.type))return[Math.min(t,e),Math.max(t,e)];let r=i.domain(),n=r.indexOf(e),l=r.indexOf(t);return r.slice(Math.min(n,l),Math.max(n,l)+1)},Py=(e,t,i,r,n)=>{if((0,cz.z2)(n.type)){let l=n.domain(),o=l[0],a=(0,ag.Z$)(l)-o,s=(0,oV.Z)(e)?o+a*e:+t,h=(0,oV.Z)(i)?o+a*i:+r;return[Math.min(h,s),Math.max(h,s)]}let l=n.domain(),o=n.range(),a=o[o.length-1]-o[0],s=(0,oV.Z)(e)?l.indexOf(n.invert(a*e+o[0])):l.indexOf(t),h=(0,oV.Z)(i)?l.indexOf(n.invert(a*i+o[0])):l.indexOf(r);return l.slice(Math.min(s,h),Math.max(s,h)+1)};class Pv{enableInteraction(){this._activeRoam=!0}disableInteraction(){this._activeRoam=!1}zoomIn(e){this.handleChartZoom({zoomDelta:1.2,zoomX:null==e?void 0:e.x,zoomY:null==e?void 0:e.y})}zoomOut(e){this.handleChartZoom({zoomDelta:.8,zoomX:null==e?void 0:e.x,zoomY:null==e?void 0:e.y})}constructor(e,t,i,r,n,l,o,a){this._activeRoam=!0,this._zoomAttr={enable:!0,rate:1,focus:!0},this._dragAttr={enable:!0,rate:1,reverse:!0},this._scrollAttr={enable:!0,rate:1,reverse:!0},this.initZoomEvent=()=>{var e,t,i,r,n,l,o;let a={delayType:null!=(t=null==(e=this._spec)?void 0:e.delayType)?t:"throttle",delayTime:(0,oV.Z)(null==(i=this._spec)?void 0:i.delayType)?null!=(n=null==(r=this._spec)?void 0:r.delayTime)?n:30:0,realTime:null==(o=null==(l=this._spec)?void 0:l.realTime)||o,allowComponentZoom:!0};this._zoomAttr.enable&&this.initZoomEventOfRegions(this.getRegions(),null,this.handleChartZoom,a),this._scrollAttr.enable&&this.initScrollEventOfRegions(this.getRegions(),null,this.handleChartScroll,a),this._dragAttr.enable&&this.initDragEventOfRegions(this.getRegions(),null,this.handleChartDrag,a)},this.handleChartZoom=(e,t)=>{var i,r;if(!this._activeRoam||this._zoomAttr.filter&&!this._zoomAttr.filter(e,t))return;let{zoomDelta:n,zoomX:l,zoomY:o}=e,{x:a,y:s}=this.getRegions()[0].getLayoutStartPoint(),{width:h,height:d}=this.getRegions()[0].getLayoutRect(),u=Math.abs(this.getState().start-this.getState().end),c=null!=(r=null==(i=this._spec.roamZoom)?void 0:i.rate)?r:1;if(u>=1&&n<1||u<=.01&&n>1)return;let p=this._isHorizontal?l:o,g=u*(n-1)*c,f=g/2,m=g/2;if(p){let e=this._isHorizontal?a:s,t=this._isHorizontal?h:d;f=Math.abs(e-p)/Math.abs(t-e)*g,m=Math.abs(t-p)/Math.abs(t-e)*g}let b=(0,g9.Z)(this.getState().start+f,0,1),y=(0,g9.Z)(this.getState().end-m,0,1);this._handleChange(Math.min(b,y),Math.max(b,y),!0)},this.handleChartScroll=(e,t)=>{var i;if(!this._activeRoam||this._scrollAttr.filter&&!this._scrollAttr.filter(e,t))return!1;let{scrollX:r,scrollY:n}=e,l=this._isHorizontal?r:n,o=this._isHorizontal?(0,t0.Wn)(r/n)>=.5:(0,t0.Wn)(n/r)>=.5;this._scrollAttr.reverse||(l=-l),o&&this.handleChartMove(l,null!=(i=this._scrollAttr.rate)?i:1);let a=0!==this.getState().start&&1!==this.getState().end;return o&&a},this.handleChartDrag=(e,t)=>{var i;if(!this._activeRoam||this._dragAttr.filter&&!this._dragAttr.filter(e,t))return;let[r,n]=e,l=this._isHorizontal?r:n;this._dragAttr.reverse&&(l=-l),this.handleChartMove(l,null!=(i=this._dragAttr.rate)?i:1)},this.handleChartMove=(e,t)=>{let i=this._isHorizontal?this.getLayoutRect().width:this.getLayoutRect().height;if(Math.abs(e)>=1e-6){if(e>0&&this.getState().end<1){let r=Math.min(1-this.getState().end,e/i)*t;this._handleChange(this.getState().start+r,this.getState().end+r,!0)}else if(e<0&&this.getState().start>0){let r=Math.max(-this.getState().start,e/i)*t;this._handleChange(this.getState().start+r,this.getState().end+r,!0)}}return!1},this._type=e,this._spec=t,this._handleChange=i,this.getLayoutRect=r,this.getState=n,this.getRegions=l,this._regions=l(),this.getOption=o,this._option=o(),this.getEvent=a,this._isHorizontal="horizontal"===vn(vr(t))}setEventAttrFromSpec(){!0===this._spec.roamZoom||this._spec.roamZoom?this._zoomAttr=(0,ha.Z)({},this._zoomAttr,this._spec.roamZoom):this._zoomAttr.enable=!1,!0===this._spec.roamDrag||this._spec.roamDrag?this._dragAttr=(0,ha.Z)({},this._dragAttr,this._spec.roamDrag):this._dragAttr.enable=!1,!0===this._spec.roamScroll||this._spec.roamScroll?this._scrollAttr=(0,ha.Z)({},this._scrollAttr,this._spec.roamScroll):this._scrollAttr.enable=!1,(0,ni.Z)(this._spec.roam)&&(this._zoomAttr.enable="scrollBar"!==this._type&&this._spec.roam,this._dragAttr.enable=this._spec.roam,this._scrollAttr.enable=this._spec.roam),(this._zoomAttr.enable||this._dragAttr.enable||this._scrollAttr.enable)&&this.initZoomable(this.getEvent(),this._option.mode)}}(0,gH.jB)(Pv,Sb);class P_ extends vJ{get isHorizontal(){return this._isHorizontal}get stateScale(){return this._stateScale}get relatedAxisComponent(){return this._relatedAxisComponent}setStartAndEnd(e,t,i=["percent","percent"]){let[r="percent",n="percent"]=i,l="percent"===r?e:Pp(e,this._stateScale,this._isHorizontal),o="percent"===n?t:Pp(t,this._stateScale,this._isHorizontal);this._handleChange(l,o,!0)}enableInteraction(){this._dataFilterEvent.enableInteraction()}disableInteraction(){this._dataFilterEvent.disableInteraction()}zoomIn(e){this._dataFilterEvent.zoomIn(e)}zoomOut(e){this._dataFilterEvent.zoomOut(e)}_initEvent(){var e;this._dataFilterEvent.initZoomEvent(),null==(e=this._relatedAxisComponent)||e.event.on(N.scaleRawDomainUpdate,({model:e})=>{console.log("scaleRawDomainUpdate",e.getRawDomain())})}_handleChange(e,t,i){var r,n;null!=(n=null==(r=this._spec)?void 0:r.zoomLock)&&n||t-e!==this._spanCache&&(t-e<this._minSpan||t-e>this._maxSpan)?this._shouldChange=!1:(this._shouldChange=!0,this._spanCache=t-e)}_updateRangeFactor(e){let t=this._relatedAxisComponent,i=t.getScale(),r=Pg(t,this._isHorizontal),n=r?[1-this._end,1-this._start]:[this._start,this._end];if(r)switch(e){case"startHandler":t.scaleRangeFactorEnd(n[1]);break;case"endHandler":t.scaleRangeFactorStart(n[0]);break;default:t.scaleRangeFactorStart(n[0],!0),t.scaleRangeFactorEnd(n[1])}else switch(e){case"startHandler":t.scaleRangeFactorStart(n[0]);break;case"endHandler":t.scaleRangeFactorEnd(n[1]);break;default:t.scaleRangeFactorEnd(n[1],!0),t.scaleRangeFactorStart(n[0])}let l=i.rangeFactor();l?(this._start=r?1-l[1]:l[0],this._end=r?1-l[0]:l[1]):(this._start=0,this._end=1)}get visible(){return this._visible}constructor(e,t){super(e,t),this.layoutType="none",this._orient="left",this._cacheVisibility=void 0,this._dataUpdating=!1,this._hasInitStateScale=!1,this._shouldChange=!0,this._stateField="x",this._handleStateChange=(e,t,i)=>{var r,n;return this._startValue=e,this._endValue=t,this._newDomain=Pb(this._startValue,this._endValue,this._stateScale),null==(n=(r=this.effect).onZoomChange)||n.call(r,i),!0},this.effect={onZoomChange:e=>{var t,i;let r=this._relatedAxisComponent;if(r&&"axis"===this._filterMode){let n=r.getScale(),l=r.getSpec();this._auto&&Pf(l)&&this._spec.ignoreBandSize&&(n.bandwidth("auto"),n.maxBandwidth("auto"),n.minBandwidth("auto")),this._updateRangeFactor(e),this._auto&&(null==(i=null==(t=this._component)?void 0:t.setStartAndEnd)||i.call(t,this._start,this._end)),r.effect.scaleUpdate({value:"force"})}else y8(this._regions,e=>{var t;null==(t=e.getViewData())||t.markRunning()},{userId:this._seriesUserId,specIndex:this._seriesIndex}),y8(this._regions,e=>{e.reFilterViewData()},{userId:this._seriesUserId,specIndex:this._seriesIndex})}},this._visible=!0,this._orient=vr(e),this._isHorizontal="horizontal"===vn(this._orient),this._dataFilterEvent=new Pv(this.type,this._spec,this._handleChange.bind(this),this.getLayoutRect.bind(this),()=>({start:this._start,end:this._end}),()=>this._regions,(()=>this._option).bind(this),()=>this.event)}created(){super.created(),this._setAxisFromSpec(),this._setRegionsFromSpec(),this._initEvent(),this._initData(),this._initStateScale(),this._setStateFromSpec()}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}init(e){super.init(e),this._addTransformToSeries(),0===this._start&&1===this._end||this.effect.onZoomChange()}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reMake||(0,dN.X)(t,e)||(i.reRender=!0,i.reMake=!0),i}reInit(e){super.reInit(e),this._marks.forEach(e=>{e.getMarks().forEach(e=>{this.initMarkStyleWithSpec(e,this._spec[e.name])})})}onLayoutStart(e,t){super.onLayoutStart(e,t);let i=this._autoUpdate(e);this._autoVisible(i),this._dataUpdating=!1}updateLayoutAttribute(){this._visible&&this._createOrUpdateComponent(),this._hasInitStateScale||(0===this._start&&1===this._end||(this._newDomain=Py(this._spec.start,this._startValue,this._spec.end,this._endValue,this._stateScale),this.effect.onZoomChange()),this._hasInitStateScale=!0)}_initAfterLayout(){this._stateScale=null,this._initStateScale(),this._updateScaleRange(),this._setStateFromAxis()}_beforeLayoutEnd(){this._hasInitStateScale?this._updateScaleRange():this._initAfterLayout()}onLayoutEnd(){var e;this._beforeLayoutEnd();let t=0!==this._start||1!==this._end;this._autoVisible(t),super.onLayoutEnd(),null==(e=this._relatedAxisComponent)||e.updateScaleRange()}getBoundsInRect(e){let t={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0};return this._isHorizontal?(t.y2=t.y1+this._height,t.x2=t.x1+e.width):(t.x2=t.x1+this._width,t.y2=t.y1+e.height),t}setAttrFromSpec(){var e;super.setAttrFromSpec(),this._dataFilterEvent.setEventAttrFromSpec(),this._field=this._spec.field,this._width=this._computeWidth(),this._height=this._computeHeight(),this._visible=null==(e=this._spec.visible)||e}_setAxisFromSpec(){if((0,oV.Z)(this._spec.axisId)?this._relatedAxisComponent=this._option.getComponentByUserId(this._spec.axisId):(0,oV.Z)(this._spec.axisIndex)&&(this._relatedAxisComponent=this._option.getComponentByIndex("axes",this._spec.axisIndex)),(0,r5.Z)(this._spec.field)&&!this._relatedAxisComponent){let e=this._option.getComponentsByKey("axes"),t=e.find(e=>vn(e._orient)===vn(this._orient));if(t)this._relatedAxisComponent=t;else{let t=e.find(e=>!(0,cz.z2)(e.getScale().type));this._relatedAxisComponent=t}}this._relatedAxisComponent&&"axis"===this._filterMode&&(this._relatedAxisComponent.autoIndentOnce=!0)}_setRegionsFromSpec(){var e,t;this._regions=this._relatedAxisComponent?this._relatedAxisComponent.getRegions():this._option.getAllRegions();let i=this._relatedAxisComponent?null==(t=(e=this._relatedAxisComponent).getBindSeriesFilter)?void 0:t.call(e):null;if((0,oV.Z)(i)&&((0,oV.Z)(i.userId)&&(this._seriesUserId=(0,ag.IX)(i.userId)),(0,oV.Z)(i.specIndex)&&(this._seriesIndex=(0,ag.IX)(i.specIndex))),(0,oV.Z)(this._spec.seriesId)){let e=(0,ag.IX)(this._spec.seriesId);this._seriesUserId?this._seriesUserId=this._seriesUserId.filter(t=>e.includes(t)):this._seriesUserId=e}if((0,oV.Z)(this._spec.seriesIndex)){let e=(0,ag.IX)(this._spec.seriesIndex);this._seriesIndex?this._seriesIndex=this._seriesIndex.filter(t=>e.includes(t)):this._seriesIndex=e}if((0,oV.Z)(this._spec.regionIndex)){let e=this._option.getRegionsInIndex((0,ag.IX)(this._spec.regionIndex));this._regions=this._regions.filter(t=>e.includes(t))}else if((0,oV.Z)(this._spec.regionId)){let e=(0,ag.IX)(this._spec.regionId);this._regions=e.length?this._regions.filter(t=>e.includes(t.id)):[]}}_initData(){let e,t=[],i=[],r=[],n=[];if(this._relatedAxisComponent){let i={};y8(this._regions,l=>{var o,a;let s="cartesian"===l.coordinate?l.getXAxisHelper():"polar"===l.coordinate?l.angleAxisHelper:null,h="cartesian"===l.coordinate?l.getYAxisHelper():"polar"===l.coordinate?l.radiusAxisHelper:null;if(!s||!h)return;let d=s.getAxisId()===this._relatedAxisComponent.id?s:h.getAxisId()===this._relatedAxisComponent.id?h:this._isHorizontal?s:h,u=d===s?h:s,c=(0,cz.z2)(u.getScale(0).type),p=(0,cz.z2)(d.getScale(0).type);t.push(l.getRawData());let g=l.getSpec(),f="cartesian"===l.coordinate?(0,ag.IX)(g.xField):(0,ag.IX)(null!=(o=g.angleField)?o:g.categoryField),m="cartesian"===l.coordinate?(0,ag.IX)(g.yField):(0,ag.IX)(null!=(a=g.radiusField)?a:g.valueField);if(i[l.id]="link"===l.type?["from_xField"]:d===s?f:m,p?(e=!1,r.push(i[l.id])):(e=!0,r.push(i[l.id][0])),this._valueField){let e="link"===l.type?["from_yField"]:u===s?f:m;c&&n.push(...e)}},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._originalStateFields=i}else y8(this._regions,e=>{t.push(e.getRawData()),i.push(e),r.push(this._field),this._valueField&&n.push(this._spec.valueField)},{userId:this._seriesUserId,specIndex:this._seriesIndex});let{dataSet:l}=this._option;hX(l,"dataview",tg.i),hK(l,"dataFilterComputeDomain",Pu);let o=new tf.V(l,{name:`${this.type}_${this.id}_data`});o.transform({type:"dataFilterComputeDomain",options:{input:{dataCollection:t,seriesCollection:i,stateFields:r,valueFields:n,isCategoryState:e},output:{stateField:this._stateField,valueField:this._valueField}}},!1),this._data=new cj(this._option,o),o.reRunAllTransform(),l.multipleDataViewAddListener(t,"change",this._handleDataCollectionChange.bind(this))}_addTransformToSeries(){this._relatedAxisComponent&&"axis"===this._filterMode||(hK(this._option.dataSet,"dataFilterWithNewDomain",Pd),hK(this._option.dataSet,"lockStatisticsFilter",Ph),y8(this._regions,e=>{e.getViewDataStatistics().transform({type:"lockStatisticsFilter",options:{originalFields:()=>e.getViewDataStatistics().getFields(),getNewDomain:()=>this._newDomain,field:()=>{var t;return null!=(t=this._field)?t:this._parseFieldOfSeries(e)},isContinuous:()=>(0,cz.z2)(this._stateScale.type)},level:1},!1),e.addViewDataFilter({type:"dataFilterWithNewDomain",options:{getNewDomain:()=>this._newDomain,field:()=>{var t;return null!=(t=this._field)?t:this._parseFieldOfSeries(e)},isContinuous:()=>(0,cz.z2)(this._stateScale.type)},level:G.dataZoomFilter})},{userId:this._seriesUserId,specIndex:this._seriesIndex}))}onDataUpdate(){var e;let t=this._computeDomainOfStateScale((0,cz.z2)(this._stateScale.type));this._stateScale.domain(t,!1),this._handleChange(this._start,this._end,!0),this._spec.auto&&!(0,dN.X)(this._domainCache,t)&&(this._domainCache=t,this._dataUpdating=!0,null==(e=this.getChart())||e.setLayoutTag(!0,null,!1))}_parseFieldOfSeries(e){var t;return null==(t=this._originalStateFields)?void 0:t[e.id]}_setStateFromSpec(){let e,t;if(this._auto=!!this._spec.auto,this._spec.rangeMode){let[i,r]=this._spec.rangeMode;Pm("start",i,this._spec)&&Pm("end",r,this._spec)&&(e="percent"===i?this._spec.start:Pp(this._spec.startValue,this._stateScale,this._isHorizontal),t="percent"===r?this._spec.end:Pp(this._spec.endValue,this._stateScale,this._isHorizontal))}else e=this._spec.start?this._spec.start:this._spec.startValue?Pp(this._spec.startValue,this._stateScale,this._isHorizontal):0,t=this._spec.end?this._spec.end:this._spec.endValue?Pp(this._spec.endValue,this._stateScale,this._isHorizontal):1;this._start=Math.max(0,Math.min(1,e)),this._end=Math.max(0,Math.min(1,t))}_setStateFromAxis(){var e,t;this._setStateFromSpec();let i=this._relatedAxisComponent;this._startValue=Pc(this._start,this._stateScale,Pg(i,this._isHorizontal)),this._endValue=Pc(this._end,this._stateScale,Pg(i,this._isHorizontal)),this._minSpan=null!=(e=this._spec.minSpan)?e:0,this._maxSpan=null!=(t=this._spec.maxSpan)?t:1,(0,cz.z2)(this._stateScale.type)&&this._stateScale.domain()[0]!==(0,ag.Z$)(this._stateScale.domain())&&(this._spec.minValueSpan&&(this._minSpan=this._spec.minValueSpan/((0,ag.Z$)(this._stateScale.domain())-this._stateScale.domain()[0])),this._spec.maxValueSpan&&(this._maxSpan=this._spec.maxValueSpan/((0,ag.Z$)(this._stateScale.domain())-this._stateScale.domain()[0]))),this._minSpan=Math.max(0,this._minSpan),this._maxSpan=Math.min(this._maxSpan,1),i&&(i&&"axis"===this._filterMode||0===this._start&&1===this._end||(this._newDomain=Pb(this._startValue,this._endValue,this._stateScale)))}_initStateScale(){var e,t,i;let r=[0,1];if(this._relatedAxisComponent){let n=this._relatedAxisComponent.getScale().clone();this._stateScale=n,null==(e=n.maxBandwidth)||e.call(n,"auto",!0),null==(t=n.minBandwidth)||t.call(n,"auto",!0),null==(i=n.bandwidth)||i.call(n,"auto",!0),n.rangeFactor(r,!0).range(r)}else{let e=!0;this._field&&y8(this._regions,t=>{let i=t.getRawDataStatisticsByField(this._field);(0,sD.Z)(null==i?void 0:i.min)&&(0,sD.Z)(null==i?void 0:i.max)||(e=!1)},{userId:this._seriesUserId,specIndex:this._seriesIndex}),this._stateScale=e?new ck.f:new cM.j,this._stateScale.domain(this._computeDomainOfStateScale(e),!0).range(r)}}_computeDomainOfStateScale(e){if(this._spec.customDomain)return this._spec.customDomain;let t=this._data.getLatestData().map(e=>e[this._stateField]);if(e){let e=t.map(e=>+e);return t.length?[(0,ag.iH)(e),(0,ag.CE)(e)]:[-1/0,1/0]}return t}_autoVisible(e){if(!this._auto)return;e?this.show():this.hide();let t=this._isHorizontal?"height":"width";this.layout.setLayoutRect({[t]:e?this[`_${t}`]:0},{[t]:q.Built_In})}hide(){var e;null==(e=this._component)||e.hideAll()}show(){var e;null==(e=this._component)||e.showAll()}_autoUpdate(e){var t,i,r,n,l,o;if(!this._auto)return this._cacheVisibility=void 0,!0;let a=this._relatedAxisComponent,s=null==a?void 0:a.getSpec(),h=null==a?void 0:a.getScale(),d=Pf(s);if(!this._dataUpdating&&(0,cz.lK)(h.type)&&(null==e?void 0:e.height)===(null==(t=this._cacheRect)?void 0:t.height)&&(null==e?void 0:e.width)===(null==(i=this._cacheRect)?void 0:i.width)&&this._fixedBandSize===(null==d?void 0:d.bandSize))return this._cacheVisibility;let u=!0;if(this._isHorizontal&&(null==e?void 0:e.width)!==(null==(r=this._cacheRect)?void 0:r.width)?h.range(a.getInverse()?[e.width,0]:[0,e.width]):(null==e?void 0:e.height)!==(null==(n=this._cacheRect)?void 0:n.height)&&h.range(a.getInverse()?[0,e.height]:[e.height,0]),this._cacheRect={width:null==e?void 0:e.width,height:null==e?void 0:e.height},this._fixedBandSize=null==d?void 0:d.bandSize,(0,cz.lK)(h.type)){d&&(this._start||this._end)&&(this.type===sc.scrollBar&&(this._start=0,this._end=1),this._updateRangeFactor());let[e,t]=null!=(l=h.rangeFactor())?l:[];u=(!(0,r5.Z)(e)||!(0,r5.Z)(t))&&(0!==e||1!==t)}else{let[e,t]=null!=(o=h.rangeFactor())?o:[this._start,this._end];u=0!==e||1!==t}return this.setStartAndEnd(this._start,this._end),this._cacheVisibility=u,u}_getNeedClearVRenderComponents(){return[this._component]}}(0,gH.jB)(P_,Sb),(eV=tt||(tt={})).startHandler="startHandler",eV.endHandler="endHandler",eV.middleHandler="middleHandler",eV.background="background",(eU=ti||(ti={})).stateUpdate="stateUpdate",eU.maskUpdate="maskUpdate",eU.dataZoomUpdate="dataZoomUpdate",(tr||(tr={})).dataZoomChange="dataZoomChange";let PC="M -0.0544 0.25 C -0.0742 0.25 -0.0901 0.234 -0.0901 0.2143 L -0.0901 -0.1786 C -0.0901 -0.1983 -0.0742 -0.2143 -0.0544 -0.2143 L -0.0187 -0.2143 L -0.0187 -0.5 L 0.017 -0.5 L 0.017 -0.2143 L 0.0527 -0.2143 C 0.0724 -0.2143 0.0884 -0.1983 0.0884 -0.1786 L 0.0884 0.2143 C 0.0884 0.234 0.0724 0.25 0.0527 0.25 L 0.017 0.25 L 0.017 0.5 L -0.0187 0.5 L -0.0187 0.25 L -0.0544 0.25 Z M -0.0187 -0.1429 L -0.0544 -0.1429 L -0.0544 0.1786 L -0.0187 0.1786 L -0.0187 -0.1429 Z M 0.0527 -0.1429 L 0.017 -0.1429 L 0.017 0.1786 L 0.0527 0.1786 L 0.0527 -0.1429 Z",Px={horizontal:{angle:0,strokeBoundsBuffer:0,boundsPadding:2,pickMode:"imprecise",cursor:"ew-resize"},vertical:{angle:Math.PI/180*90,cursor:"ns-resize",boundsPadding:2,pickMode:"imprecise",strokeBoundsBuffer:0}},Pw=(e,t,i,r)=>{if(!t)return!1;if(r){if("start"===i){if(t.x1<e.x1)return!0}else if(t.x2>e.x2)return!0}else if("start"===i){if(t.y1<e.y1)return!0}else if(t.y2>e.y2)return!0;return!1};var PS=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class PA{get startHandlerMask(){return this._startHandlerMask}get middleHandlerSymbol(){return this._middleHandlerSymbol}get middleHandlerRect(){return this._middleHandlerRect}get endHandlerMask(){return this._endHandlerMask}get selectedBackground(){return this._selectedBackground}get dragMask(){return this._dragMask}get startText(){return this._startText}get endText(){return this._endText}get startValue(){return this._startValue}get endValue(){return this._endValue}set showText(e){this._showText=e}get background(){return this._background}set previewData(e){this._previewData=e}get previewGroup(){return this._previewGroup}get selectedPreviewGroup(){return this._selectedPreviewGroup}set previewPointsX(e){this._previewPointsX=e}set previewPointsY(e){this._previewPointsY=e}set previewPointsX1(e){this._previewPointsX1=e}set previewPointsY1(e){this._previewPointsY1=e}set statePointToData(e){this._statePointToData=e}_initAttrs(e){this.attribute=e.attribute,this._isHorizontal="top"===this.attribute.orient||"bottom"===this.attribute.orient;let{previewData:t,previewPointsX:i,previewPointsY:r,previewPointsX1:n,previewPointsY1:l}=this.attribute;t&&(this._previewData=t),(0,nr.Z)(i)&&(this._previewPointsX=i),(0,nr.Z)(r)&&(this._previewPointsY=r),(0,nr.Z)(n)&&(this._previewPointsX1=n),(0,nr.Z)(l)&&(this._previewPointsY1=l),this._getState=e.getState,this._getLayoutAttrFromConfig=e.getLayoutAttrFromConfig,this._getContainer=e.getContainer}constructor(e){this._previewData=[],this._statePointToData=e=>e;let{showDetail:t}=e.attribute;this._showText="auto"!==t&&t,this._initAttrs(e)}setAttributes(e){this._initAttrs(e)}renderDataZoom(e=!1){var t,i,r,n,l,o;let{backgroundChartStyle:a={},selectedBackgroundChartStyle:s={},brushSelect:h}=this.attribute;this._renderBackground(),(null==(t=a.line)?void 0:t.visible)&&!e&&this._setPreviewAttributes("line",this._getContainer()),(null==(i=a.area)?void 0:i.visible)&&!e&&this._setPreviewAttributes("area",this._getContainer()),h&&this.renderDragMask(),this._renderSelectedBackground(),(null==(r=s.line)?void 0:r.visible)&&this._setSelectedPreviewClipAttributes("line",this._getContainer()),(null==(n=s.line)?void 0:n.visible)&&!e&&this._setSelectedPreviewAttributes("line"),(null==(l=s.line)?void 0:l.visible)&&this._setSelectedPreviewClipAttributes("area",this._getContainer()),(null==(o=s.area)?void 0:o.visible)&&!e&&this._setSelectedPreviewAttributes("area"),this._renderHandler(),this._showText&&this.renderText()}renderDragMask(){let{dragMaskStyle:e}=this.attribute,{position:t,width:i,height:r}=this._getLayoutAttrFromConfig(),{start:n,end:l}=this._getState();return this._isHorizontal?this._dragMask=this._getContainer().createOrUpdateChild("dragMask",Object.assign({x:t.x+n*i,y:t.y,width:(l-n)*i,height:r},e),"rect"):this._dragMask=this._getContainer().createOrUpdateChild("dragMask",Object.assign({x:t.x,y:t.y+n*r,width:i,height:(l-n)*r},e),"rect"),{start:n,end:l}}_renderBackground(){var e;let{backgroundStyle:t,brushSelect:i,zoomLock:r}=this.attribute,{position:n,width:l,height:o}=this._getLayoutAttrFromConfig(),a=this._getContainer();this._background=a.createOrUpdateChild("background",Object.assign(Object.assign({x:n.x,y:n.y,width:l,height:o,cursor:i?"crosshair":"auto"},t),{pickable:!r&&(null==(e=t.pickable)||e)}),"rect")}_renderHandler(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k;let{orient:M,middleHandlerStyle:T={},startHandlerStyle:R={},endHandlerStyle:E={},zoomLock:P}=this.attribute,{start:B,end:I}=this._getState(),{position:L,width:F,height:H}=this._getLayoutAttrFromConfig(),O=null!=(e=R.triggerMinSize)?e:40,D=null!=(t=E.triggerMinSize)?t:40,z=this._getContainer();if(this._isHorizontal){if(T.visible){let e=(null==(i=T.background)?void 0:i.size)||10;this._middleHandlerRect=z.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:L.x+B*F,y:L.y-e,width:(I-B)*F,height:e},null==(r=T.background)?void 0:r.style),{pickable:!P&&(null==(o=null==(l=null==(n=T.background)?void 0:n.style)?void 0:l.pickable)||o)}),"rect"),this._middleHandlerSymbol=z.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:L.x+(B+I)/2*F,y:L.y-e/2,strokeBoundsBuffer:0,angle:0,symbolType:null!=(s=null==(a=T.icon)?void 0:a.symbolType)?s:"square"},T.icon),{pickable:!P&&(null==(h=T.icon.pickable)||h)}),"symbol")}this._startHandler=z.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:L.x+B*F,y:L.y+H/2,size:H,symbolType:null!=(d=R.symbolType)?d:"square"},Px.horizontal),R),{pickable:!P&&(null==(u=R.pickable)||u)}),"symbol"),this._endHandler=z.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:L.x+I*F,y:L.y+H/2,size:H,symbolType:null!=(c=E.symbolType)?c:"square"},Px.horizontal),E),{pickable:!P&&(null==(p=E.pickable)||p)}),"symbol");let e=Math.max(this._startHandler.AABBBounds.width(),O),t=Math.max(this._startHandler.AABBBounds.height(),O),g=Math.max(this._endHandler.AABBBounds.width(),D),f=Math.max(this._endHandler.AABBBounds.height(),D);this._startHandlerMask=z.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:L.x+B*F-e/2,y:L.y+H/2-t/2,width:e,height:t,fill:"white",fillOpacity:0,zIndex:999},Px.horizontal),{pickable:!P}),"rect"),this._endHandlerMask=z.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:L.x+I*F-g/2,y:L.y+H/2-f/2,width:g,height:f,fill:"white",fillOpacity:0,zIndex:999},Px.horizontal),{pickable:!P}),"rect")}else{if(T.visible){let e=(null==(g=T.background)?void 0:g.size)||10;this._middleHandlerRect=z.createOrUpdateChild("middleHandlerRect",Object.assign(Object.assign({x:"left"===M?L.x-e:L.x+F,y:L.y+B*H,width:e,height:(I-B)*H},null==(f=T.background)?void 0:f.style),{pickable:!P&&(null==(y=null==(b=null==(m=T.background)?void 0:m.style)?void 0:b.pickable)||y)}),"rect"),this._middleHandlerSymbol=z.createOrUpdateChild("middleHandlerSymbol",Object.assign(Object.assign({x:"left"===M?L.x-e/2:L.x+F+e/2,y:L.y+(B+I)/2*H,angle:Math.PI/180*90,symbolType:null!=(_=null==(v=T.icon)?void 0:v.symbolType)?_:"square",strokeBoundsBuffer:0},T.icon),{pickable:!P&&(null==(x=null==(C=T.icon)?void 0:C.pickable)||x)}),"symbol")}this._startHandler=z.createOrUpdateChild("startHandler",Object.assign(Object.assign(Object.assign({x:L.x+F/2,y:L.y+B*H,size:F,symbolType:null!=(w=R.symbolType)?w:"square"},Px.vertical),R),{pickable:!P&&(null==(S=R.pickable)||S)}),"symbol"),this._endHandler=z.createOrUpdateChild("endHandler",Object.assign(Object.assign(Object.assign({x:L.x+F/2,y:L.y+I*H,size:F,symbolType:null!=(A=E.symbolType)?A:"square"},Px.vertical),E),{pickable:!P&&(null==(k=E.pickable)||k)}),"symbol");let e=Math.max(this._startHandler.AABBBounds.width(),O),t=Math.max(this._startHandler.AABBBounds.height(),O),i=Math.max(this._endHandler.AABBBounds.width(),D),r=Math.max(this._endHandler.AABBBounds.height(),D);this._startHandlerMask=z.createOrUpdateChild("startHandlerMask",Object.assign(Object.assign({x:L.x+F/2+e/2,y:L.y+B*H-t/2,width:r,height:i,fill:"white",fillOpacity:0,zIndex:999},Px.vertical),{pickable:!P}),"rect"),this._endHandlerMask=z.createOrUpdateChild("endHandlerMask",Object.assign(Object.assign({x:L.x+F/2+i/2,y:L.y+I*H-r/2,width:r,height:i,fill:"white",fillOpacity:0,zIndex:999},Px.vertical),{pickable:!P}),"rect")}}_renderSelectedBackground(){var e,t;let{selectedBackgroundStyle:i={},selectedBackgroundChartStyle:r={},brushSelect:n,zoomLock:l}=this.attribute,{start:o,end:a}=this._getState(),{position:s,width:h,height:d}=this._getLayoutAttrFromConfig(),u=this._getContainer();this._isHorizontal?this._selectedBackground=u.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:s.x+o*h,y:s.y,width:(a-o)*h,height:d,cursor:n?"crosshair":"move"},i),{pickable:!l&&(null==(e=r.pickable)||e)}),"rect"):this._selectedBackground=u.createOrUpdateChild("selectedBackground",Object.assign(Object.assign({x:s.x,y:s.y+o*d,width:h,height:(a-o)*d,cursor:n?"crosshair":"move"},i),{pickable:!l&&(null==(t=i.pickable)||t)}),"rect")}_setPreviewAttributes(e,t){this._previewGroup||(this._previewGroup=t.createOrUpdateChild("previewGroup",{pickable:!1},"group")),"line"===e?this._previewLine=this._previewGroup.createOrUpdateChild("previewLine",{},"line"):this._previewArea=this._previewGroup.createOrUpdateChild("previewArea",{curveType:"basis"},"area");let{backgroundChartStyle:i={}}=this.attribute;"line"===e&&this._previewLine.setAttributes(Object.assign({points:this._getPreviewLinePoints(),curveType:"basis",pickable:!1},i.line)),"area"===e&&this._previewArea.setAttributes(Object.assign({points:this._getPreviewAreaPoints(),curveType:"basis",pickable:!1},i.area))}_setSelectedPreviewClipAttributes(e,t){this._selectedPreviewGroupClip||(this._selectedPreviewGroupClip=t.createOrUpdateChild("selectedPreviewGroupClip",{pickable:!1},"group"),this._selectedPreviewGroup=this._selectedPreviewGroupClip.createOrUpdateChild("selectedPreviewGroup",{},"group"));let{start:i,end:r}=this._getState(),{position:n,width:l,height:o}=this._getLayoutAttrFromConfig();this._selectedPreviewGroupClip.setAttributes({x:this._isHorizontal?n.x+i*l:n.x,y:this._isHorizontal?n.y:n.y+i*o,width:this._isHorizontal?(r-i)*l:l,height:this._isHorizontal?o:(r-i)*o,clip:!0,pickable:!1}),this._selectedPreviewGroup.setAttributes({x:-(this._isHorizontal?n.x+i*l:n.x),y:-(this._isHorizontal?n.y:n.y+i*o),width:this._isHorizontal?(r-i)*l:l,height:this._isHorizontal?o:(r-i)*o,pickable:!1})}_setSelectedPreviewAttributes(e){let{selectedBackgroundChartStyle:t={}}=this.attribute;"line"===e?this._selectedPreviewLine=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewLine",{},"line"):this._selectedPreviewArea=this._selectedPreviewGroup.createOrUpdateChild("selectedPreviewArea",{curveType:"basis"},"area"),"line"===e&&this._selectedPreviewLine.setAttributes(Object.assign({points:this._getPreviewLinePoints(),curveType:"basis",pickable:!1},t.line)),"area"===e&&this._selectedPreviewArea.setAttributes(Object.assign({points:this._getPreviewAreaPoints(),curveType:"basis",pickable:!1},t.area))}_computeBasePoints(e){let t,i,{orient:r}=this.attribute,n="bottom"===r||"top"===r?"x":"y",l=Math.sign(e[e.length-1][n]-e[0][n]);0===l&&(l=1);let{position:o,width:a,height:s}=this._getLayoutAttrFromConfig();return this._isHorizontal?(t=[{x:o.x,y:o.y+s}],i=[{x:o.x+a,y:o.y+s}]):"left"===r?(t=[{x:o.x+a,y:o.y}],i=[{x:o.x+a,y:o.y+s}]):(t=[{x:o.x,y:o.y+s}],i=[{x:o.x,y:o.y}]),Math.sign(i[0][n]-t[0][n])!==l?{basePointStart:i,basePointEnd:t}:{basePointStart:t,basePointEnd:i}}_simplifyPoints(e){var t,i;if(e.length>1e4){let r=null!=(t=this.attribute.tolerance)?t:this._previewData.length/1e4;return(i=e).length<=10?i:i=function(e,t){let i,r,n=e[0].x,l=e[0].y,o=[e[0]];for(let a=1,s=e.length;a<s;a++)(i=e[a].x-n)*i+(r=e[a].y-l)*r>t&&(n=e[a].x,l=e[a].y,o.push(e[a]));return e[e.length-1].x===n&&e[e.length-1].y===l||o.push(e[e.length-1]),o}(i,void 0!==r?r*r:1)}return e}_getPreviewLinePoints(){let e=this._previewData.map(e=>({x:this._previewPointsX&&this._previewPointsX(e),y:this._previewPointsY&&this._previewPointsY(e)}));if(0===e.length)return e;e=this._simplifyPoints(e);let{basePointStart:t,basePointEnd:i}=this._computeBasePoints(e);return t.concat(e).concat(i)}_getPreviewAreaPoints(){let e=this._previewData.map(e=>({x:this._previewPointsX&&this._previewPointsX(e),y:this._previewPointsY&&this._previewPointsY(e),x1:this._previewPointsX1&&this._previewPointsX1(e),y1:this._previewPointsY1&&this._previewPointsY1(e)}));if(0===e.length)return e;e=this._simplifyPoints(e);let{basePointStart:t,basePointEnd:i}=this._computeBasePoints(e);return t.concat(e).concat(i)}renderText(){let e=null,t=null;if(this._setTextAttr(e,t),this._showText){e=this._startText.AABBBounds,t=this._endText.AABBBounds,this._setTextAttr(e,t),e=this._startText.AABBBounds,t=this._endText.AABBBounds;let{x1:i,x2:r,y1:n,y2:l}=e,{dx:o=0,dy:a=0}=this.attribute.startTextStyle;if((new t4.YZ).set(i,n,r,l).intersects(t)){let e="bottom"===this.attribute.orient||"right"===this.attribute.orient?-1:1;this._isHorizontal?this._startText.setAttribute("dy",a+e*Math.abs(t.y1-t.y2)):this._startText.setAttribute("dx",o+e*Math.abs(t.x1-t.x2))}else this._isHorizontal?this._startText.setAttribute("dy",a):this._startText.setAttribute("dx",o)}}_setTextAttr(e,t){var i,r,n,l,o,a,s,h;let d,u,c,p,{startTextStyle:g,endTextStyle:f}=this.attribute,{formatMethod:m}=g,b=PS(g,["formatMethod"]),{formatMethod:y}=f,v=PS(f,["formatMethod"]),{start:_,end:C}=this._getState();this._startValue=this._statePointToData(_),this._endValue=this._statePointToData(C);let{position:x,width:w,height:S}=this._getLayoutAttrFromConfig(),A=m?m(this._startValue):this._startValue,k=y?y(this._endValue):this._endValue,M={x1:x.x,y1:x.y,x2:x.x+w,y2:x.y+S};this._isHorizontal?(d={x:x.x+_*w,y:x.y+S/2},u={x:x.x+C*w,y:x.y+S/2},c={textAlign:Pw(M,e,"start",this._isHorizontal)?"left":"right",textBaseline:null!=(r=null==(i=null==b?void 0:b.textStyle)?void 0:i.textBaseline)?r:"middle"},p={textAlign:Pw(M,t,"end",this._isHorizontal)?"right":"left",textBaseline:null!=(l=null==(n=null==v?void 0:v.textStyle)?void 0:n.textBaseline)?l:"middle"}):(d={x:x.x+w/2,y:x.y+_*S},u={x:x.x+w/2,y:x.y+C*S},c={textAlign:null!=(a=null==(o=null==b?void 0:b.textStyle)?void 0:o.textAlign)?a:"center",textBaseline:Pw(M,e,"start",this._isHorizontal)?"top":"bottom"},p={textAlign:null!=(h=null==(s=null==v?void 0:v.textStyle)?void 0:s.textAlign)?h:"center",textBaseline:Pw(M,t,"end",this._isHorizontal)?"bottom":"top"}),this._startText=this._maybeAddLabel(this._getContainer(),(0,ha.Z)({},b,{text:A,x:d.x,y:d.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:c}),"data-zoom-start-text"),this._endText=this._maybeAddLabel(this._getContainer(),(0,ha.Z)({},v,{text:k,x:u.x,y:u.y,visible:this._showText,pickable:!1,childrenPickable:!1,textStyle:p}),"data-zoom-end-text")}_maybeAddLabel(e,t,i){let r=e.find(e=>e.name===i,!0);return r?r.setAttributes(t):((r=new CL(t)).name=i,e.add(r)),r}}let Pk={debounce:hD.Z,throttle:hO.Z};class PM extends nt(){constructor(e){super(),this._activeState=!1,this._activeCache={startPos:{x:0,y:0},lastPos:{x:0,y:0}},this._layoutCache={attPos:"x",attSize:"width",size:0},this._handleTouchMove=e=>{this._activeState&&e.preventDefault()},this._onHandlerPointerDown=(e,t)=>{this.clearDragEvents(),"start"===t?(this._activeTag=tt.startHandler,this._activeItem=this._startHandlerMask):"end"===t?(this._activeTag=tt.endHandler,this._activeItem=this._endHandlerMask):"middleRect"===t?(this._activeTag=tt.middleHandler,this._activeItem=this._middleHandlerRect):"middleSymbol"===t?(this._activeTag=tt.middleHandler,this._activeItem=this._middleHandlerSymbol):"background"===t&&(this._activeTag=tt.background,this._activeItem=this._background),this._activeState=!0,this._activeCache.startPos=this._eventPosToStagePos(e),this._activeCache.lastPos=this._eventPosToStagePos(e);let i="browser"===sI.env?sI:this.stage,r=RF();i.addEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),this.on("pointermove",this._onHandlerPointerMove,{capture:!0}),r.forEach(e=>{i.addEventListener(e,this._onHandlerPointerUp)})},this._pointerMove=e=>{let{brushSelect:t}=this.attribute,{position:i}=this._getLayoutAttrFromConfig(),r=this._eventPosToStagePos(e),{attPos:n,size:l,attSize:o}=this._layoutCache,a=(r[n]-this._activeCache.lastPos[n])/l,s=(r[n]-i[n])/this._getLayoutAttrFromConfig()[o],{start:h,end:d}=this._getState(),u=!0;this._activeState&&(this._activeTag===tt.middleHandler?{start:h,end:d}=this._moveZoomWithMiddle(a):this._activeTag===tt.startHandler?{start:h,end:d}=this._moveZoomWithHandler(s,"start"):this._activeTag===tt.endHandler?{start:h,end:d}=this._moveZoomWithHandler(s,"end"):this._activeTag===tt.background&&t&&({start:h,end:d}=this._moveZoomWithBackground(s),u=!1,this._dispatchEvent(ti.maskUpdate)),this._activeCache.lastPos=r),this._getState().start===h&&this._getState().end===d||(this._setStateAttr(h,d),this._dispatchEvent(ti.stateUpdate,{start:this._getState().start,end:this._getState().end,shouldRender:u,tag:this._activeTag}),this.attribute.realTime&&this._dispatchEvent(ti.dataZoomUpdate,{start:this._getState().start,end:this._getState().end,shouldRender:!0,tag:this._activeTag}))},this._onHandlerPointerUp=e=>{this._activeState&&this._activeTag===tt.background&&(this._setStateAttr(this._getState().start,this._getState().end),this._dispatchEvent(ti.stateUpdate,{start:this._getState().start,end:this._getState().end,shouldRender:!0,tag:this._activeTag})),this._activeState=!1,this._dispatchEvent(ti.dataZoomUpdate,{start:this._getState().start,end:this._getState().end,shouldRender:!0,tag:this._activeTag}),this.clearDragEvents()},this._initAttrs(e)}setAttributes(e){var t,i,r,n,l,o;this._initAttrs(e),this._onHandlerPointerMove=0===(null!=(i=null==(t=this.attribute)?void 0:t.delayTime)?i:0)?this._pointerMove:Pk[null!=(n=null==(r=this.attribute)?void 0:r.delayType)?n:"debounce"](this._pointerMove,null!=(o=null==(l=this.attribute)?void 0:l.delayTime)?o:0)}_initAttrs(e){this.stage=e.stage,this.attribute=e.attribute,this._startHandlerMask=e.startHandlerMask,this._endHandlerMask=e.endHandlerMask,this._middleHandlerSymbol=e.middleHandlerSymbol,this._middleHandlerRect=e.middleHandlerRect,this._selectedBackground=e.selectedBackground,this._background=e.background,this._previewGroup=e.previewGroup,this._selectedPreviewGroup=e.selectedPreviewGroup,this._getLayoutAttrFromConfig=e.getLayoutAttrFromConfig,this._getState=e.getState,this._setState=e.setState;let{width:t,height:i}=this._getLayoutAttrFromConfig();this._spanCache=this._getState().end-this._getState().start;let r="top"===this.attribute.orient||"bottom"===this.attribute.orient;this._layoutCache.size=r?t:i,this._layoutCache.attPos=r?"x":"y",this._layoutCache.attSize=r?"width":"height",this._getGlobalTransMatrix=e.getGlobalTransMatrix}clearDragEvents(){let e="browser"===sI.env?sI:this.stage,t=RF();e.removeEventListener("pointermove",this._onHandlerPointerMove,{capture:!0}),t.forEach(t=>{e.removeEventListener(t,this._onHandlerPointerUp)}),this.off("pointermove",this._onHandlerPointerMove,{capture:!0})}clearVGlobalEvents(){("browser"===sI.env?sI:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1})}bindEvents(){var e,t,i,r,n,l,o,a;let{brushSelect:s}=this.attribute;null==(e=this._startHandlerMask)||e.addEventListener("pointerdown",e=>this._onHandlerPointerDown(e,"start")),null==(t=this._endHandlerMask)||t.addEventListener("pointerdown",e=>this._onHandlerPointerDown(e,"end")),null==(i=this._middleHandlerSymbol)||i.addEventListener("pointerdown",e=>this._onHandlerPointerDown(e,"middleSymbol")),null==(r=this._middleHandlerRect)||r.addEventListener("pointerdown",e=>this._onHandlerPointerDown(e,"middleRect"));let h=s?"background":"middleRect";null==(n=this._selectedBackground)||n.addEventListener("pointerdown",e=>this._onHandlerPointerDown(e,h)),s&&(null==(l=this._background)||l.addEventListener("pointerdown",e=>this._onHandlerPointerDown(e,"background"))),s&&(null==(o=this._previewGroup)||o.addEventListener("pointerdown",e=>this._onHandlerPointerDown(e,"background"))),null==(a=this._selectedPreviewGroup)||a.addEventListener("pointerdown",e=>this._onHandlerPointerDown(e,h)),("browser"===sI.env?sI:this.stage).addEventListener("touchmove",this._handleTouchMove,{passive:!1})}_setStateAttr(e,t){let{zoomLock:i=!1,minSpan:r=0,maxSpan:n=1}=this.attribute,l=t-e;l!==this._spanCache&&(i||l<r||l>n)||(this._spanCache=l,this._setState({start:e,end:t}))}_moveZoomWithMiddle(e){let{start:t,end:i}=this._getState();return e>0&&i+e>1?e=1-i:e<0&&t+e<0&&(e=-t),{start:(0,g9.Z)(t+e,0,1),end:(0,g9.Z)(i+e,0,1)}}_moveZoomWithHandler(e,t){let{start:i,end:r}=this._getState(),n=i,l=r;return"start"===t?e>r?(n=r,l=e,this._activeTag=tt.endHandler):n=e:"end"===t&&(e<i?(l=i,n=e,this._activeTag=tt.startHandler):l=e),{start:(0,g9.Z)(n,0,1),end:(0,g9.Z)(l,0,1)}}_moveZoomWithBackground(e){let{position:t}=this._getLayoutAttrFromConfig(),{attSize:i}=this._layoutCache,r=(this._activeCache.startPos[this._layoutCache.attPos]-t[this._layoutCache.attPos])/this._getLayoutAttrFromConfig()[i],n=(0,g9.Z)(r,0,1),l=(0,g9.Z)(e,0,1);return n>l&&([n,l]=[l,n]),{start:n,end:l}}_eventPosToStagePos(e){var t,i;let r={x:0,y:0},n=null!=(i=null==(t=this.stage)?void 0:t.eventPointTransform(e))?i:{x:0,y:0};return this._getGlobalTransMatrix().transformPoint(n,r),r}_dispatchEvent(e,t){this.emit(e,t)}}CB(),ct(),uN(),wS(),bX();class PT extends yN{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},PT.defaultAttributes,e)),this.name="dataZoom",this._state={start:0,end:1},this.getLayoutAttrFromConfig=()=>{var e,t,i,r,n,l;let o,a,s;if(this._layoutCacheFromConfig)return this._layoutCacheFromConfig;let{position:h,size:d,orient:u,middleHandlerStyle:c={},startHandlerStyle:p={},endHandlerStyle:g={},backgroundStyle:f={}}=this.attribute,{width:m,height:b}=d,y=null!=(t=null==(e=c.background)?void 0:e.size)?t:10;c.visible?this._isHorizontal?(o=m,a=b-y,s={x:h.x,y:h.y+y}):(o=m-y,a=b,s={x:h.x+("left"===u?y:0),y:h.y}):(o=m,a=b,s=h);let v=null!=(i=p.size)?i:this._isHorizontal?a:o,_=null!=(r=g.size)?r:this._isHorizontal?a:o;return p.visible&&(this._isHorizontal?(o-=(v+_)/2,s={x:s.x+v/2,y:s.y}):(a-=(v+_)/2,s={x:s.x,y:s.y+v/2})),a+=(null!=(n=f.lineWidth)?n:2)/2,o+=(null!=(l=f.lineWidth)?l:2)/2,this._layoutCacheFromConfig={position:s,width:o,height:a},this._layoutCacheFromConfig};let{start:i,end:r,orient:n}=this.attribute;this._isHorizontal="top"===n||"bottom"===n,i&&(this._state.start=i),r&&(this._state.end=r),this._renderer=new PA(this._getRendererAttrs()),this._interaction=new PM(this._getInteractionAttrs())}_getRendererAttrs(){return{attribute:this.attribute,getLayoutAttrFromConfig:this.getLayoutAttrFromConfig,setState:e=>{this._state=e},getState:()=>this._state,getContainer:()=>this._container}}_getInteractionAttrs(){return{stage:this.stage,attribute:this.attribute,startHandlerMask:this._renderer.startHandlerMask,endHandlerMask:this._renderer.endHandlerMask,middleHandlerSymbol:this._renderer.middleHandlerSymbol,middleHandlerRect:this._renderer.middleHandlerRect,selectedBackground:this._renderer.selectedBackground,background:this._renderer.background,previewGroup:this._renderer.previewGroup,selectedPreviewGroup:this._renderer.selectedPreviewGroup,getLayoutAttrFromConfig:this.getLayoutAttrFromConfig,setState:e=>{this._state=e},getState:()=>this._state,getGlobalTransMatrix:()=>this.globalTransMatrix}}bindEvents(){this.attribute.disableTriggerEvent?this.setAttribute("childrenPickable",!1):(this._interaction.bindEvents(),this._interaction.on(ti.stateUpdate,({shouldRender:e})=>{e&&this._renderer.renderDataZoom(!0)}),this._interaction.on(ti.dataZoomUpdate,({start:e,end:t,tag:i})=>{this._dispatchEvent(tr.dataZoomChange,{start:e,end:t,tag:i})}),this._interaction.on(ti.maskUpdate,()=>{this._renderer.renderDragMask()}),"auto"===this.attribute.showDetail&&(this._container.addEventListener("pointerenter",()=>{this._renderer.showText=!0,this._renderer.renderText()}),this._container.addEventListener("pointerleave",()=>{this._renderer.showText=!1,this._renderer.renderText()})))}setAttributes(e,t){var i,r;let{start:n,end:l}=this.attribute;n&&(this._state.start=null!=(i=e.start)?i:n),l&&(this._state.end=null!=(r=e.end)?r:l),this._renderer.setAttributes(this._getRendererAttrs()),this._interaction.setAttributes(this._getInteractionAttrs()),super.setAttributes(e,t)}render(){this._layoutCacheFromConfig=null,this._container=this.createOrUpdateChild("datazoom-container",{},"group"),this._renderer.renderDataZoom(),this._interaction.setAttributes(this._getInteractionAttrs())}release(e){super.release(e),this._interaction.clearDragEvents()}setStartAndEnd(e,t){let{start:i,end:r}=this._state;(0,oV.Z)(e)&&(0,oV.Z)(t)&&(e!==i||t!==r)&&(this._state={start:e,end:t},this._renderer.renderDataZoom(!0),this._dispatchEvent(tr.dataZoomChange,{start:e,end:t}))}setPreviewData(e){this._renderer.previewData=e}setText(e,t){"start"===t?this._renderer.startText.setAttribute("text",e):this._renderer.endText.setAttribute("text",e)}getStartValue(){return this._renderer.startValue}getEndTextValue(){return this._renderer.endValue}getMiddleHandlerSize(){var e,t,i,r;let{middleHandlerStyle:n={}}=this.attribute,l=null!=(t=null==(e=n.background)?void 0:e.size)?t:10,o=null!=(r=null==(i=n.icon)?void 0:i.size)?r:10;return Math.max(l,...(0,ag.IX)(o))}setPreviewPointsX(e){(0,nr.Z)(e)&&(this._renderer.previewPointsX=e)}setPreviewPointsY(e){(0,nr.Z)(e)&&(this._renderer.previewPointsY=e)}setPreviewPointsX1(e){(0,nr.Z)(e)&&(this._renderer.previewPointsX1=e)}setPreviewPointsY1(e){(0,nr.Z)(e)&&(this._renderer.previewPointsY1=e)}setStatePointToData(e){(0,nr.Z)(e)&&(this._renderer.statePointToData=e)}}PT.defaultAttributes={orient:"bottom",showDetail:"auto",brushSelect:!0,zoomLock:!1,minSpan:0,maxSpan:1,delayType:"throttle",delayTime:0,realTime:!0,backgroundStyle:{fill:"white",stroke:"#D1DBEE",lineWidth:1,cornerRadius:2},dragMaskStyle:{fill:"#B0C8F9",fillOpacity:.2},backgroundChartStyle:{area:{visible:!0,stroke:"#D1DBEE",lineWidth:1,fill:"#F6F8FC"},line:{visible:!0,stroke:"#D1DBEE",lineWidth:1}},selectedBackgroundStyle:{fill:"#B0C8F9",fillOpacity:.5},selectedBackgroundChartStyle:{area:{visible:!0,stroke:"#B0C8F9",lineWidth:1,fill:"#fbb934"},line:{visible:!0,stroke:"#fbb934",lineWidth:1}},middleHandlerStyle:{visible:!0,background:{size:8,style:{fill:"white",stroke:"#B0C8F9",cornerRadius:2}},icon:{size:6,fill:"white",stroke:"#B0C8F9",symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}},startHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:PC,fill:"white",stroke:"#B0C8F9",lineWidth:.5},endHandlerStyle:{visible:!0,triggerMinSize:0,symbolType:PC,fill:"white",stroke:"#B0C8F9",lineWidth:.5},startTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}},endTextStyle:{padding:4,textStyle:{fontSize:10,fill:"#6F6F6F"}}};class PR extends vY{_mergeThemeToSpec(e,t){let i=this._theme,r=e;if(this._shouldMergeThemeToSpec()){let t=e=>{let t=hs({selectedBackgroundChart:{line:{},area:{}}},this._theme,e),{selectedBackgroundChart:i={}}=e,{line:r,area:n}=i;return r&&!1!==r.visible&&(t.selectedBackgroundChart.line.style=Object.assign(Object.assign({},t.selectedBackgroundChart.line.style),{visible:!0})),n&&!1!==n.visible&&(t.selectedBackgroundChart.area.style=Object.assign(Object.assign({},t.selectedBackgroundChart.area.style),{visible:!0})),t};r=(0,ri.Z)(e)?e.map(e=>t(e)):t(e)}return this._adjustPadding(r),{spec:r,theme:i}}}let PE=()=>({style:{symbolType:"M-0.5-2.4h0.9c0.4,0,0.7,0.3,0.7,0.7v3.3c0,0.4-0.3,0.7-0.7,0.7h-0.9c-0.4,0-0.7-0.3-0.7-0.7v-3.3\nC-1.2-2-0.9-2.4-0.5-2.4z M-0.4-1.4L-0.4-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC-0.4-1.4-0.4-1.4-0.4-1.4z M0.3-1.4L0.3-1.4c0,0,0,0.1,0,0.1v2.6c0,0.1,0,0.1,0,0.1l0,0c0,0,0-0.1,0-0.1v-2.6\nC0.3-1.4,0.3-1.4,0.3-1.4z;",fill:{type:"palette",key:"sliderHandleColor"},scaleX:1.2,scaleY:1.2,stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},lineWidth:1}}),PP=e=>({area:{style:{visible:e,stroke:!1,fill:{type:"palette",key:"dataZoomChartColor"}}},line:{style:{visible:e,stroke:{type:"palette",key:"dataZoomChartColor"},lineWidth:1}}}),PB={padding:[12,0],showDetail:"auto",brushSelect:!1,middleHandler:{visible:!1,background:{size:6,style:{stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},cornerRadius:2}},icon:{style:{size:4,fill:{type:"palette",key:"sliderHandleColor"},stroke:{type:"palette",key:"dataZoomHandleStrokeColor"},symbolType:"M 0.3 -0.5 C 0.41 -0.5 0.5 -0.41 0.5 -0.3 C 0.5 -0.3 0.5 0.3 0.5 0.3 C 0.5 0.41 0.41 0.5 0.3 0.5 C 0.3 0.5 -0.3 0.5 -0.3 0.5 C -0.41 0.5 -0.5 0.41 -0.5 0.3 C -0.5 0.3 -0.5 -0.3 -0.5 -0.3 C -0.5 -0.41 -0.41 -0.5 -0.3 -0.5 C -0.3 -0.5 0.3 -0.5 0.3 -0.5 Z",lineWidth:.5}}},background:{size:20,style:{fill:{type:"palette",key:"sliderRailColor"},lineWidth:0}},selectedBackground:{style:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.1,outerBorder:{stroke:{type:"palette",key:"sliderTrackColor"},strokeOpacity:.2,distance:-.5,lineWidth:1}}},selectedBackgroundChart:PP(!1),startHandler:PE(),endHandler:PE(),startText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},endText:{padding:8,style:{fontSize:{type:"token",key:"l5FontSize"},lineHeight:{type:"token",key:"l5LineHeight"},fill:{type:"palette",key:"secondaryFontColor",default:"#89909d"}}},backgroundChart:PP(!0)};class PI extends P_{constructor(e,t){var i;super(e,t),this.type=sc.dataZoom,this.name=sc.dataZoom,this.transformerConstructor=PR,this.specKey="dataZoom",this.layoutZIndex=X.DataZoom,this.layoutLevel=Y.DataZoom,this.layoutType="region-relative",this._isReverseCache=!1,this._dataToPositionX=e=>{let t=this._isHorizontal?0:this._middleHandlerSize,i=this._isHorizontal?this._startHandlerSize/2:0,r=this._isHorizontal?this._stateScale:this._valueScale,n=this._isHorizontal?this._stateField:this._valueField;return r.scale(e[n])+this.getLayoutStartPoint().x+t+i},this._dataToPositionX2=e=>{let t=this._isHorizontal?0:this._middleHandlerSize,i=this._isHorizontal?this._startHandlerSize/2:0,r=this._isHorizontal?this._stateScale:this._valueScale,n=r.domain()[0];return r.scale(n)+this.getLayoutStartPoint().x+t+i},this._dataToPositionY=e=>{let t=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,r=this._isHorizontal?this._valueScale:this._getPreviewStateScale(),n=this._isHorizontal?this._valueField:this._stateField;return r.scale(e[n])+this.getLayoutStartPoint().y+t+i},this._dataToPositionY2=e=>{let t=this._isHorizontal?this._middleHandlerSize:0,i=this._isHorizontal?0:this._startHandlerSize/2,r=this._isHorizontal?this._valueScale:this._getPreviewStateScale(),n=r.domain()[0];return r.scale(n)+this.getLayoutStartPoint().y+t+i},this._valueField="y",this._filterMode=null!=(i=e.filterMode)?i:"filter"}_handleChange(e,t,i,r){if(super._handleChange(e,t,i),this._shouldChange)if(i&&this._component)this._component.setStartAndEnd(e,t);else{let i=this._relatedAxisComponent,n=Pc(e,this._stateScale,Pg(i,this._isHorizontal)),l=Pc(t,this._stateScale,Pg(i,this._isHorizontal));if(!(0,oV.Z)(n)||!(0,oV.Z)(l))return;this._start=e,this._end=t,((0,nr.Z)(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(e,t,n,l):this._handleStateChange(n,l,r))&&this.event.emit(N.dataZoomChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:e,end:t,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){this._data.getDataView().reRunAllTransform();let e=this._computeDomainOfValueScale();e&&(this._valueScale||(this._valueScale=new ck.f),this._valueScale.domain(e),this._updateValueScaleRange(),this._component&&this._createOrUpdateComponent(!0))}created(){super.created(),this._initValueScale()}updateLayoutAttribute(){!1!==this._cacheVisibility&&super.updateLayoutAttribute()}_beforeLayoutEnd(){super._beforeLayoutEnd();let e=this._relatedAxisComponent;(Pg(e,this._isHorizontal)&&!this._isReverseCache||this._auto)&&(this._isReverseCache=Pg(e,this._isHorizontal),this.effect.onZoomChange())}clear(){if(this._component){let e=this.getContainer();this._component.removeAllChild(),e&&e.removeChild(this._component),this._component=null}super.clear()}getBoundsInRect(e){var t,i,r,n;let l={x1:this.getLayoutStartPoint().x,y1:this.getLayoutStartPoint().y,x2:0,y2:0},o=this._startHandlerSize*(null!=(t=this._spec.startHandler.style.scaleX)?t:1),a=this._startHandlerSize*(null!=(i=this._spec.startHandler.style.scaleY)?i:1),s=this._endHandlerSize*(null!=(r=this._spec.endHandler.style.scaleX)?r:1),h=this._endHandlerSize*(null!=(n=this._spec.endHandler.style.scaleY)?n:1),d=this._visible?this._isHorizontal?(o-this._startHandlerSize)/2+(s-this._endHandlerSize)/2:(Math.max(o,s)-this._width)/2:0,u=this._visible?this._isHorizontal?(Math.max(a,h)-this._height)/2:(a-this._startHandlerSize)/2+(h-this._endHandlerSize)/2:0;return this._isHorizontal?(l.y2=l.y1+this._height+u,l.x2=l.x1+e.width+d):(l.x2=l.x1+this._width+d,l.y2=l.y1+e.height+u),l}setAttrFromSpec(){var e,t,i,r,n,l,o,a,s,h;super.setAttrFromSpec();let d=this._isHorizontal?Number(this._spec.height):Number(this._spec.width);this._backgroundSize=null!=(t=null==(e=this._spec.background)?void 0:e.size)?t:30,this._middleHandlerSize=this._computeMiddleHandlerSize(),(0,r5.Z)(null==(n=null==(r=null==(i=this._spec)?void 0:i.startHandler)?void 0:r.style)?void 0:n.size)&&(this._spec.startHandler.style.size=isNaN(d)?this._backgroundSize:d-this._middleHandlerSize),(0,r5.Z)(null==(a=null==(o=null==(l=this._spec)?void 0:l.endHandler)?void 0:o.style)?void 0:a.size)&&(this._spec.endHandler.style.size=isNaN(d)?this._backgroundSize:d-this._middleHandlerSize);let u=null==(s=this._spec.startHandler.style.visible)||s,c=null==(h=this._spec.endHandler.style.visible)||h;this._startHandlerSize=u?this._spec.startHandler.style.size:0,this._endHandlerSize=c?this._spec.endHandler.style.size:0,this._width=this._computeWidth(),this._height=this._computeHeight()}_initValueScale(){let e=this._computeDomainOfValueScale();if(e){let t=new ck.f;t.domain(e),this._valueScale=t}}_updateScaleRange(){this._updateStateScaleRange(),this._updateValueScaleRange()}_updateStateScaleRange(){var e,t,i;let r,n=this._startHandlerSize+this._endHandlerSize;if(!this._stateScale)return;let l=this._isHorizontal?this.getLayoutRect().width-n:this.getLayoutRect().height-n,o=null!=(t=null==(e=this._relatedAxisComponent)?void 0:e.getScale().range())?t:[this._startHandlerSize/2,l+this._startHandlerSize/2],a=this._computeWidth(),s=this._computeHeight();r=this._isHorizontal?this._visible?[this._startHandlerSize/2,a-n+this._startHandlerSize/2]:o:this._visible?[this._startHandlerSize/2,s-n+this._startHandlerSize/2]:o,this._stateScale.range(r),null==(i=this._previewStateScale)||i.range(Pg(this._relatedAxisComponent,this._isHorizontal)?r.reverse():r)}_updateValueScaleRange(){if(!this._valueScale)return;let e=this._computeWidth(),t=this._computeHeight();this._isHorizontal?this._valueScale.range([t-this._middleHandlerSize,0]):"left"===this.layoutOrient?this._valueScale.range([e-this._middleHandlerSize,0]):this._valueScale.range([0,e-this._middleHandlerSize])}_computeDomainOfValueScale(){let e=this._data.getLatestData().map(e=>e[this._valueField]),t=e.map(e=>+e);return e.length?[(0,ag.iH)(t),(0,ag.CE)(t)]:null}_isScaleValid(e){if(!e||!e.domain())return!1;let t=e.domain();return(!(0,cz.z2)(e.type)||t[0]!==(0,ag.Z$)(t))&&(!(0,cz.lK)(e.type)||1!==(0,ag.V4)(t).length)}_getXScale(){return this._relatedAxisComponent.getScale().type===this.stateScale.type&&this._isHorizontal?this.stateScale:this._isHorizontal?this._stateScale:this._valueScale}_getYScale(){return this._isHorizontal?this._valueScale:this._stateScale}_computeMiddleHandlerSize(){var e,t,i,r;let n=0;return(null==(t=null==(e=this._spec)?void 0:e.middleHandler)?void 0:t.visible)&&(n+=Math.max(null!=(i=this._spec.middleHandler.icon.style.size)?i:8,null!=(r=this._spec.middleHandler.background.size)?r:40)),n}_computeWidth(){return!1===this._visible?0:(0,nw.Z)(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:Math.max(this._startHandlerSize||0,this._endHandlerSize||0,this._backgroundSize||0)+this._middleHandlerSize}_computeHeight(){return!1===this._visible?0:(0,nw.Z)(this._spec.height)?this._spec.height:this._isHorizontal?Math.max(this._startHandlerSize||0,this._endHandlerSize||0,this._backgroundSize||0)+this._middleHandlerSize:this.getLayoutRect().height}_getAttrs(e){var t,i,r,n,l;let o=null!=(t=this._spec)?t:{};return Object.assign({zIndex:this.layoutZIndex,start:this._start,end:this._end,position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},orient:this._orient,size:{width:this._computeWidth(),height:this._computeHeight()},showDetail:o.showDetail,brushSelect:null!=(i=o.brushSelect)&&i,zoomLock:null!=(r=o.zoomLock)&&r,minSpan:this._minSpan,maxSpan:this._maxSpan,delayType:o.delayType,delayTime:(0,oV.Z)(o.delayType)?null!=(n=o.delayTime)?n:30:0,realTime:null==(l=o.realTime)||l,previewData:e&&this._data.getLatestData(),previewPointsX:e&&this._dataToPositionX,previewPointsY:e&&this._dataToPositionY,tolerance:this._spec.tolerance,isReverse:Pg(this._relatedAxisComponent,this._isHorizontal)},this._getComponentAttrs(e))}_getLayoutAttrs(){return{position:{x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y},size:{width:this._computeWidth(),height:this._computeHeight()}}}_createOrUpdateComponent(e){if(this._visible){let t=this._isHorizontal?this._stateScale:this._valueScale,i=this._isHorizontal?this._valueScale:this._stateScale,r=this._isScaleValid(t)&&this._isScaleValid(i)&&!1!==this._spec.showBackgroundChart,n=this._getAttrs(r),l=this._relatedAxisComponent;if(this._component)this._component.setAttributes(n),e&&(this._component.setPreviewData(this._data.getDataView().latestData),r&&(this._isHorizontal?this._component.setPreviewPointsY1(this._dataToPositionY2):this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(e=>Pc(e,this._stateScale,Pg(l,this._isHorizontal)))));else{let e=this.getContainer();this._component=new PT(n),this._component.setPreviewData(this._data.getDataView().latestData),this._isHorizontal?r&&this._component.setPreviewPointsY1(this._dataToPositionY2):r&&this._component.setPreviewPointsX1(this._dataToPositionX2),this._component.setStatePointToData(e=>Pc(e,this._stateScale,Pg(l,this._isHorizontal))),this._component.addEventListener("dataZoomChange",e=>{let{start:t,end:i,tag:r}=e.detail;this._handleChange(t,i,void 0,r)}),e.add(this._component)}}}_getComponentAttrs(e){var t,i,r,n,l,o,a,s,h,d,u;let{middleHandler:c={},startText:p={},endText:g={},backgroundChart:f={},selectedBackgroundChart:m={}}=this._spec;return{backgroundStyle:vA(null==(t=this._spec.background)?void 0:t.style),startHandlerStyle:vA(null==(i=this._spec.startHandler)?void 0:i.style),middleHandlerStyle:c.visible?{visible:!0,icon:vA(null==(r=c.icon)?void 0:r.style),background:{size:null==(n=c.background)?void 0:n.size,style:vA(null==(l=c.background)?void 0:l.style)}}:{visible:!1},endHandlerStyle:vA(null==(o=this._spec.endHandler)?void 0:o.style),startTextStyle:{padding:p.padding,formatMethod:this._getHandlerTextFormatMethod(p),textStyle:vA(p.style)},endTextStyle:{padding:g.padding,formatMethod:this._getHandlerTextFormatMethod(g),textStyle:vA(g.style)},selectedBackgroundStyle:vA(this._spec.selectedBackground.style),dragMaskStyle:vA(null==(a=this._spec.dragMask)?void 0:a.style),backgroundChartStyle:e?{line:hs(vA(null==(s=f.line)?void 0:s.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},vA(null==(h=f.area)?void 0:h.style))}:{line:{visible:!1},area:{visible:!1}},selectedBackgroundChartStyle:e?{line:hs(vA(null==(d=m.line)?void 0:d.style),{fill:!1}),area:Object.assign({curveType:"basis",visible:!0},vA(null==(u=m.area)?void 0:u.style))}:{line:{visible:!1},area:{visible:!1}},disableTriggerEvent:this._option.disableTriggerEvent}}_getHandlerTextFormatMethod(e){let{formatMethod:t,formatter:i}=e,{formatFunc:r}=mK(t,i);return r?e=>r(e,{label:e},i):void 0}_getNeedClearVRenderComponents(){return[this._component]}onDataUpdate(){super.onDataUpdate(),this._previewStateScale!==this._stateScale&&(this._previewStateScale=null)}_getPreviewStateScale(){return this._previewStateScale||(Pg(this._relatedAxisComponent,this._isHorizontal)?(this._previewStateScale=this._stateScale.clone(),this._previewStateScale.range(this._stateScale.range().reverse())):this._previewStateScale=this._stateScale),this._previewStateScale}}PI.type=sc.dataZoom,PI.transformerConstructor=PR,PI.builtInTheme={dataZoom:PB},PI.specKey="dataZoom";class PL extends P_{constructor(e,t){var i;super(e,t),this.type=sc.scrollBar,this.name=sc.scrollBar,this.specKey="scrollBar",this.layoutZIndex=X.DataZoom,this.layoutLevel=Y.DataZoom,this.layoutType="region-relative",this._filterMode=null!=(i=e.filterMode)?i:"axis"}_handleChange(e,t,i){super._handleChange(e,t,i);let r=mB(this._start,e)&&mB(this._end,t);if(this._shouldChange&&(!r||!1===this._spec.realTime)){i&&this._component&&this._component.setAttribute("range",[e,t]),this._start=e,this._end=t;let r=Pc(e,this._stateScale,!1),n=Pc(t,this._stateScale,!1);((0,nr.Z)(this._spec.updateDataAfterChange)?this._spec.updateDataAfterChange(e,t,r,n):this._handleStateChange(r,n))&&this.event.emit(N.scrollBarChange,{model:this,value:{filterData:"axis"!==this._filterMode,start:this._start,end:this._end,startValue:this._startValue,endValue:this._endValue,newDomain:this._newDomain}})}}_handleDataCollectionChange(){this._spec.auto&&this._data.getDataView().reRunAllTransform()}_beforeLayoutEnd(){var e,t;super._beforeLayoutEnd(),null==(t=(e=this.effect).onZoomChange)||t.call(e)}onLayoutEnd(){this._updateComponentBounds(),super.onLayoutEnd()}_updateScaleRange(){}_updateComponentBounds(){this._component&&this._component.setAttributes({x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height})}_computeWidth(){return!1===this._visible?0:(0,nw.Z)(this._spec.width)?this._spec.width:this._isHorizontal?this.getLayoutRect().width:12}_computeHeight(){return!1===this._visible?0:(0,nw.Z)(this._spec.height)?this._spec.height:this._isHorizontal?12:this.getLayoutRect().height}_getAttrs(){var e,t,i,r,n,l;return Object.assign({zIndex:this.layoutZIndex,x:this.getLayoutStartPoint().x,y:this.getLayoutStartPoint().y,width:this.getLayoutRect().width,height:this.getLayoutRect().height,range:[this._start,this._end],direction:this._isHorizontal?"horizontal":"vertical",delayType:null==(e=this._spec)?void 0:e.delayType,delayTime:(0,oV.Z)(null==(t=this._spec)?void 0:t.delayType)?null!=(r=null==(i=this._spec)?void 0:i.delayTime)?r:30:0,realTime:null==(l=null==(n=this._spec)?void 0:n.realTime)||l},this._getComponentAttrs())}_createOrUpdateComponent(){let e=this._getAttrs();if(this._component)this._component.setAttributes(e);else{let t=this.getContainer();this._component=new RO(e),this._component.addEventListener("scrollDrag",e=>{let t=e.detail.value;this._handleChange(t[0],t[1])}),this._component.addEventListener("scrollUp",e=>{let t=e.detail.value;this._handleChange(t[0],t[1])}),t.add(this._component)}}_getComponentAttrs(){let{rail:e,slider:t,innerPadding:i}=this._spec,r={};return(0,r5.Z)(i)||(r.padding=i),(0,d$.Z)(null==e?void 0:e.style)||(r.railStyle=vA(e.style)),(0,d$.Z)(null==t?void 0:t.style)||(r.sliderStyle=vA(t.style)),r.disableTriggerEvent=this._option.disableTriggerEvent,r}_getNeedClearVRenderComponents(){return[this._component]}}PL.type=sc.scrollBar,PL.builtInTheme={scrollBar:{horizontal:{height:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}},vertical:{width:10,slider:{style:{fill:{type:"palette",key:"scrollBarSliderColor"}}}}}},PL.specKey="scrollBar";let PF=(e,t)=>{let{datum:i,title:r,content:n}=t,l=[],o=i.call(null);return r.visible&&l.push({type:"title",index:0,datum:o,spec:r}),(0,ag.IX)(n).forEach((e,t)=>{e.visible&&l.push({type:"content",index:t,datum:o,spec:e})}),l},PH={title:{style:{text:"",fontSize:20,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}},content:{style:{text:"",fontSize:16,fill:"black",fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}}};dV(),uT(),yF();class PO extends yN{constructor(){super(...arguments),this.name="indicator"}_renderText(e,t,i,r,n,l){if(!1!==t.visible){let o=(0,ha.Z)({},(0,hH.Z)(PH,n),t.style,{visible:t.visible});o.lineHeight=(0,oV.Z)(o.lineHeight)?o.lineHeight:o.fontSize,t.formatMethod&&(o._originText=o.text,o.text=t.formatMethod(o.text,o));let a=p1(o);return a.name=l,e.appendChild(a),t.autoFit&&(0,sD.Z)(i)&&this._setLocalAutoFit(i,a,t),t.autoLimit&&(0,sD.Z)(r)&&a.setAttribute("maxLineWidth",i),a}}render(){var e,t;if(this.removeAllChild(!0),!0!==this.attribute.visible)return;let{title:i={},content:r,size:n,limitRatio:l=1/0}=this.attribute,o=Math.min(n.width,n.height)*l,a=this.createOrUpdateChild("indicator-container",{x:0,y:0,zIndex:1,pickable:null==(e=this.attribute.pickable)||e},"group");if((0,oV.Z)(i)&&(this._title=this._renderText(a,i,o,l,"title.style","indicator-title")),(0,oV.Z)(r)){let e=(0,ag.IX)(r),t=[];e.forEach((e,i)=>{!1!==e.visible&&t.push(this._renderText(a,e,o,l,"content.style","indicator-content-"+i))}),this._content=t}this._setGlobalAutoFit(o),this._setYPosition();let s=null!=(t=null==a?void 0:a.AABBBounds.height())?t:0;a.setAttribute("y",n.height/2-s/2),a.setAttribute("x",n.width/2)}_setLocalAutoFit(e,t,i){var r,n,l,o,a,s,h,d,u;if("default"!==(null!=(r=i.fitStrategy)?r:"default"))return;let c=pJ(null!=(l=null==(n=i.style)?void 0:n.text)?l:"",null!=(o=i.style)?o:{},null==(s=null==(a=this.stage)?void 0:a.getTheme())?void 0:s.text).width;if(c>0){let r=e*(null!=(h=i.fitPercent)?h:.5)/c,n=Math.floor((null!=(u=null==(d=i.style)?void 0:d.fontSize)?u:20)*r);t.setAttribute("fontSize",n),t.setAttribute("lineHeight",(0,oV.Z)(i.style.lineHeight)?i.style.lineHeight:n)}}_setGlobalAutoFit(e){var t,i,r,n,l,o,a;let s=[],h=0,d=null!=(t=this.attribute.title)?t:{};d.autoFit&&"inscribed"===d.fitStrategy?(this._title.setAttribute("fontSize",12),s.push({text:this._title,spec:null!=(i=this.attribute.title)?i:{}})):h+=null!=(o=null==(l=null==(n=null==(r=this._title)?void 0:r.AABBBounds)?void 0:n.height)?void 0:l.call(n))?o:0;let u=null!=(a=d.space)?a:0;if(h+=u,(0,ag.IX)(this.attribute.content).filter(e=>!1!==e.visible).forEach((e,t)=>{var i,r,n,l;let o=this._content[t];e.autoFit&&"inscribed"===e.fitStrategy?(o.setAttribute("fontSize",12),s.push({text:o,spec:e})):h+=null!=(n=null==(r=null==(i=null==o?void 0:o.AABBBounds)?void 0:i.height)?void 0:r.call(i))?n:0;let a=null!=(l=e.space)?l:0;h+=a}),s.length<=0)return;let c=12/s.reduce((e,t)=>Math.max(e,t.text.AABBBounds.width()),0)*s.length,p=h/2,g=c**2+1,f=2*p*c,m=2*(c*((-f+Math.sqrt(f**2-4*g*(p**2-(e/2)**2)))/(2*g))+p),b=(m-h)/s.length;(0,sD.Z)(m)&&s.forEach(e=>{var t;let i=null==(t=e.spec.style)?void 0:t.lineHeight;e.text.setAttribute("fontSize",b),e.text.setAttribute("lineHeight",(0,oV.Z)(i)?i:b)})}_setYPosition(){var e,t,i,r,n,l;let o=0,a=null!=(r=null==(i=null==(t=null==(e=this._title)?void 0:e.AABBBounds)?void 0:t.height)?void 0:i.call(t))?r:0,s=null!=(l=null==(n=this.attribute.title)?void 0:n.space)?l:0;(0,ag.IX)(this.attribute.content).filter(e=>!1!==e.visible).forEach((e,t)=>{var i;let r=this._content[t];r.setAttribute("y",a+s+o);let n=null!=(i=e.space)?i:0;o+=r.AABBBounds.height()+n})}}let PD=(e,t)=>({fontSize:{type:"token",key:e},fill:{type:"palette",key:t},fontWeight:"normal",fillOpacity:1,textBaseline:"top",textAlign:"center"}),Pz={title:{visible:!0,autoLimit:!1,autoFit:!1,style:PD("l1FontSize","primaryFontColor")},content:{visible:!0,style:PD("l2FontSize","tertiaryFontColor")}};var PW=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class PZ extends vJ{constructor(){super(...arguments),this.type=sc.indicator,this.name=sc.indicator,this.specKey="indicator",this.layoutType="none",this.layoutZIndex=X.Indicator,this.layoutLevel=Y.Indicator,this._gap=0,this._activeDatum=null}static getSpecInfo(e){return mX(e,this.specKey,this.type,e=>e&&!1!==e.visible)}created(){super.created(),this.initData(),this.initEvent()}setAttrFromSpec(){super.setAttrFromSpec(),this._gap=this._spec.gap||0,this._title=this._spec.title,this._content=(0,ag.IX)(this._spec.content),this._regions=this._option.getRegionsInUserIdOrIndex((0,ag.IX)(this._spec.regionId),(0,ag.IX)(this._spec.regionIndex))}initEvent(){this._option.disableTriggerEvent||"none"!==this._spec.trigger&&("hover"===this._spec.trigger?(this.event.on("element-highlight:start",e=>{let t=e.graphics[0];this.isRelativeModel(t)&&this.updateDatum(hW(t))}),this.event.on("element-highlight:reset",e=>{this._activeDatum&&this.updateDatum(null)})):(this.event.on("element-select:start",e=>{let t=e.graphics[0];this.isRelativeModel(t)&&this.updateDatum(hW(t))}),this.event.on("element-select:reset",e=>{this._activeDatum&&this.updateDatum(null)})))}updateDatum(e){this._activeDatum=e,this._displayData.updateData();let t=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(t)}initData(){hK(this._option.dataSet,"indicatorFilter",PF);let e=new tf.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`});e.transform({type:"indicatorFilter",options:{title:this._title,content:this._content,datum:()=>this._activeDatum}}),e.target.addListener("change",this.updateDatum.bind(this)),this._displayData=new cj(this._option,e)}updateLayoutAttribute(){let e=this._getIndicatorAttrs();this._createOrUpdateIndicatorComponent(e),super.updateLayoutAttribute()}_getIndicatorAttrs(){if(!1===this._spec.visible||!1===this._spec.fixed&&null===this._activeDatum)return{visible:!1};let e=this._regions[0],{width:t,height:i}=e.getLayoutRect(),{x:r,y:n}=e.getLayoutStartPoint(),l=this._spec,{content:o,offsetX:a,offsetY:s,limitRatio:h,title:d}=l,u=PW(l,["content","offsetX","offsetY","limitRatio","title"]),c=[];return(0,ag.IX)(o).forEach(e=>{let t=hs({},this._theme.content,e);c.push({visible:!1!==t.visible&&(!t.field||null!==this._activeDatum),space:t.space||this._gap,autoLimit:t.autoLimit,autoFit:t.autoFit,fitPercent:t.fitPercent,fitStrategy:t.fitStrategy,style:Object.assign(Object.assign({},vS((0,vQ.Z)(t.style,["text"]),this._activeDatum)),{text:this._createText(t.field,t.style.text)})})}),Object.assign({visible:!0,size:{width:t,height:i},zIndex:this.layoutZIndex,x:r,y:n,dx:a?sU(a,this._computeLayoutRadius()):0,dy:s?sU(s,this._computeLayoutRadius()):0,limitRatio:h||1/0,title:{visible:!1!==d.visible&&(!(0,oV.Z)(d.field)||null!==this._activeDatum),space:d.space||this._gap,autoLimit:d.autoLimit,autoFit:d.autoFit,fitPercent:d.fitPercent,fitStrategy:d.fitStrategy,style:Object.assign(Object.assign({},vS((0,vQ.Z)(d.style,["text"]),this._activeDatum)),{text:this._createText(d.field,d.style.text)})},content:c},u)}_createOrUpdateIndicatorComponent(e){if(!1===e.visible)return this._indicatorComponent&&this._indicatorComponent.parent&&this._indicatorComponent.parent.removeChild(this._indicatorComponent),void(this._indicatorComponent=null);if(this._indicatorComponent)(0,dN.X)(e,this._cacheAttrs)||this._indicatorComponent.setAttributes(e);else{let t=this.getContainer(),i=new PO(e);i.name="indicator",t.add(i),this._indicatorComponent=i,this._indicatorComponent.on("*",(e,t)=>this._delegateEvent(this._indicatorComponent,e,t))}this._cacheAttrs=e}_createText(e,t){var i;return e?this._activeDatum?this._activeDatum[e]:"":(0,nr.Z)(t)?null!=(i=t(this._activeDatum,void 0))?i:"":null!=t?t:""}_computeLayoutRadius(){let{width:e,height:t}=this._regions[0].getLayoutRect();return Math.min(e/2,t/2)}isRelativeModel(e){return this._regions.some(t=>!!t.getSeriesInId(e.context.modelId))}_getNeedClearVRenderComponents(){return[this._indicatorComponent]}clear(){this._cacheAttrs=null,super.clear()}getIndicatorComponent(){return this._indicatorComponent}}PZ.type=sc.indicator,PZ.builtInTheme={indicator:Pz},PZ.specKey="indicator";let PN=["sum","average","min","max","variance","standardDeviation","median"];var P$=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};function Pj(e,t,i){if(!i)return!1;let r=e.map(e=>+e),n=(0,ag.iH)(r),l=(0,ag.CE)(r);return t<n||t>l}function PG(e,t,i,r,n,l){var o,a;let{relativeSeries:s}=r;return(0,nw.Z)(e.x)&&Pj(t,e.x,i)&&(null==(a=null==s?void 0:(o=s.getXAxisHelper()).setExtendDomain)||a.call(o,"marker_xAxis_extend",e.x)),sN(e.x)?PX(e.x,n)+l.x:PY(s.getXAxisHelper(),[e.x])+l.x}function PV(e,t,i,r,n,l){var o,a;let{relativeSeries:s}=r;return(0,nw.Z)(e.y)&&Pj(t,e.y,i)&&(null==(a=null==(o=s.getYAxisHelper())?void 0:o.setExtendDomain)||a.call(o,"marker_yAxis_extend",e.y)),sN(e.y)?PX(e.y,n)+l.y:PY(s.getYAxisHelper(),[e.y])+l.y}function PU(e,t,i,r){var n,l;let{relativeSeries:o}=r;return(0,nw.Z)(e.angle)&&Pj(t,e.angle,i)&&(null==(l=null==(n=o.angleAxisHelper)?void 0:n.setExtendDomain)||l.call(n,"marker_angleAxis_extend",e.angle)),PY(o.angleAxisHelper,[e.angle])}function PK(e,t,i,r){var n,l;let{relativeSeries:o}=r;return(0,nw.Z)(e.radius)&&Pj(t,e.radius,i)&&(null==(l=null==(n=o.radiusAxisHelper)?void 0:n.setExtendDomain)||l.call(n,"marker_radiusAxis_extend",e.radius)),PY(o.radiusAxisHelper,[e.radius])}function PX(e,t){return Number(e.substring(0,e.length-1))*t/100}function PY(e,t){let i=e.getScale(0);return(0,cz.z2)(i.type)&&i.domain()[0]===i.domain()[1]&&t[0]!==i.domain()[0]?NaN:e.dataToPosition(t)}function Pq(e){return PN.includes(e)}function PJ(e,t,i,r,n,l=!1){let o=t.getRegion(),a=o.getLayoutStartPoint(),s=i.getRegion(),h=s.getLayoutStartPoint(),d=Math.abs(Math.min(a.x,h.x)-Math.max(a.x+o.getLayoutRect().width,h.x+s.getLayoutRect().width)),u=Math.abs(Math.min(a.y,h.y)-Math.max(a.y+o.getLayoutRect().height,h.y+s.getLayoutRect().height)),c={relativeSeries:r,startRelativeSeries:t,endRelativeSeries:i},p=[],g=e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData,f=r.getXAxisHelper(),m=r.getYAxisHelper(),b=f.getScale(0).domain(),y=m.getScale(0).domain(),v=l&&!f.isContinuous&&!!f.getBandwidth,_=l&&!m.isContinuous&&!!m.getBandwidth,C={min:null,max:null},x={min:null,max:null};return g.forEach(e=>{let t,i,r=(0,oV.Z)(e.x),l=(0,oV.Z)(e.y);if(r&&l)t=PG(e,b,n,c,d,a),i=PV(e,y,n,c,u,a),PQ(t,v,C,p.length),PQ(i,_,x,p.length),p.push([{x:t,y:i}]);else if(r){t=PG(e,b,n,c,d,a),i=Math.max(a.y+o.getLayoutRect().height,h.y+s.getLayoutRect().height);let r=Math.min(a.y,h.y);PQ(t,v,C,p.length),p.push([{x:t,y:i},{x:t,y:r}])}else if(l){t=Math.min(a.x,h.x),i=PV(e,y,n,c,u,a);let r=Math.max(a.x+o.getLayoutRect().width,h.x+s.getLayoutRect().width);PQ(i,_,x,p.length),p.push([{x:t,y:i},{x:r,y:i}])}}),function(e,t,i,r,n){if(r.min||r.max){let i=t.getBandwidth(0)*(1+t.getScale(0).paddingInner());r.min&&e[r.min.index].forEach(e=>e.x-=i/2),r.max&&e[r.max.index].forEach(e=>e.x+=i/2)}if(n.min||n.max){let t=i.getBandwidth(0)*(1+i.getScale(0).paddingInner());n.min&&e[n.min.index].forEach(e=>e.y-=t/2),n.max&&e[n.max.index].forEach(e=>e.y+=t/2)}}(p,f,m,C,x),p}function PQ(e,t,i,r){return t&&((null===i.min||i.min.value>e)&&(i.min={value:e,index:r}),(null===i.max||i.max.value<e)&&(i.max={value:e,index:r})),e}function P0(e,t,i,r,n){let l={relativeSeries:r,startRelativeSeries:t,endRelativeSeries:i},o=[],a=e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData,s=r.angleAxisHelper.getScale(0).domain(),h=r.radiusAxisHelper.getScale(0).domain(),d=Math.min(r.getRegion().getLayoutRect().width/2,r.getRegion().getLayoutRect().height/2);return a.forEach(e=>{let t=(0,oV.Z)(e.angle),i=(0,oV.Z)(e.radius);if(t&&i){let t=PU(e,s,n,l),i=PK(e,h,n,l);o.push([{angle:t,radius:i}])}else if(t){let t=PU(e,s,n,l);o.push([{angle:t,radius:-d},{angle:t,radius:d}])}else if(i){let t=PK(e,h,n,l);o.push([{radius:t,angle:0},{radius:t,angle:2*Math.PI}])}}),o}function P1(e,t,i,r){let n=[],l=e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData,o=(0,ri.Z)(r);return l.forEach((e,l)=>{var a,s,h,d;let u=(null==e?void 0:e.getRefRelativeSeries)?e.getRefRelativeSeries():t,c=u.getRegion(),p=c.getLayoutStartPoint(),{width:g,height:f}=c.getLayoutRect(),m=0,b=0;if(r){let e=o?r[l]:r,t=e.x,i=e.y;t&&(m=sN(t)?Number(t.substring(0,t.length-1))*g/100:t),i&&(b=sN(i)?Number(i.substring(0,i.length-1))*f/100:i)}let y=u.getXAxisHelper().getScale(0).domain(),v=u.getYAxisHelper().getScale(0).domain(),_=(0,ag.IX)(e.x),C=(0,ag.IX)(e.y);1===_.length&&(0,nw.Z)(_[0])&&Pj(y,_[0],i)&&(null==(s=null==(a=u.getXAxisHelper())?void 0:a.setExtendDomain)||s.call(a,"marker_xAxis_extend",_[0])),1===C.length&&(0,nw.Z)(C[0])&&Pj(v,C[0],i)&&(null==(d=null==(h=u.getYAxisHelper())?void 0:h.setExtendDomain)||d.call(h,"marker_yAxis_extend",C[0])),n.push({x:PY(u.getXAxisHelper(),_)+p.x+m,y:PY(u.getYAxisHelper(),C)+p.y+b})}),n}function P2(e,t,i){let r=[];return(e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData).forEach(e=>{var n,l,o,a;let s=(null==e?void 0:e.getRefRelativeSeries)?e.getRefRelativeSeries():t,h=s.angleAxisHelper.getScale(0).domain(),d=s.radiusAxisHelper.getScale(0).domain(),u=(0,ag.IX)(e.angle),c=(0,ag.IX)(e.radius);1===u.length&&(0,nw.Z)(u[0])&&Pj(h,u[0],i)&&(null==(l=null==(n=s.angleAxisHelper)?void 0:n.setExtendDomain)||l.call(n,"marker_xAxis_extend",u[0])),1===c.length&&(0,nw.Z)(c[0])&&Pj(d,c[0],i)&&(null==(a=null==(o=s.radiusAxisHelper)?void 0:o.setExtendDomain)||a.call(o,"marker_yAxis_extend",c[0])),r.push({angle:PY(s.angleAxisHelper,u),radius:PY(s.radiusAxisHelper,c)})}),r}function P3(e,t,i){let{x:r,y:n}=e;return sN(r)&&(r=PX(r,t)),sN(n)&&(n=PX(n,i)),{x:r,y:n}}function P4(e,t,i){let r;if(r=(0,nr.Z)(e)?(0,ag.IX)(e(t.getData().getLatestData(),t)):(0,ag.IX)(e),i){let e=t.getRegion(),{x:i,y:n}=e.getLayoutStartPoint(),{width:l,height:o}=e.getLayoutRect();return r.map(e=>{let{x:t,y:r}=P3(e,l,o);return{x:t+=i,y:r+=n}})}let{width:n,height:l}=t.getOption().getChart().getViewRect();return r.map(e=>P3(e,n,l))}function P5(e){let t=1/0,i=-1/0,r=1/0,n=-1/0;return e.forEach(e=>{let l=e.getLayoutStartPoint(),o=e.getLayoutRect();l.x<t&&(t=l.x),l.x+o.width>i&&(i=l.x+o.width),l.y<r&&(r=l.y),l.y+o.height>n&&(n=l.y+o.height)}),{minX:t,maxX:i,minY:r,maxY:n}}function P6(e,t,i){let{labelBackground:r={},style:n,shape:l}=e,o=P$(e,["labelBackground","style","shape"]);return!1!==e.visible?((null==l?void 0:l.visible)?o.shape=Object.assign({visible:!0},vA(l.style)):o.shape={visible:!1},!1!==r.visible?(o.panel=Object.assign({visible:!0,customShape:r.customShape},P7(vA(r.style),t,i)),(0,oV.Z)(r.padding)&&(o.padding=(0,_6.o)(r.padding))):(o.panel={visible:!1},o.padding=0),n&&(o.textStyle=P7(vA(n),t,i)),o):{visible:!1}}function P8(e,t,i){for(let r in e)(0,nr.Z)(e[r])&&(e[r]=e[r](t,i));return e}function P7(e,t,i){return(0,nr.Z)(e)?e(t,i):e}function P9(e,t){return(0,nr.Z)(e)?e(t):e}function Be(e,t,i){return(0,oV.Z)(e)?"regionLeft"===t?i.getLayoutStartPoint().x-e.x:"regionRight"===t?i.getLayoutStartPoint().x+i.getLayoutRect().width-e.x:"regionTop"===t?i.getLayoutStartPoint().y-e.y:"regionBottom"===t?i.getLayoutStartPoint().y+i.getLayoutRect().height-e.y:t:t}function Bt(e){return{isXProcess:(0,oV.Z)(e.x),isYProcess:(0,oV.Z)(e.y),isX1Process:(0,oV.Z)(e.x1),isY1Process:(0,oV.Z)(e.y1),isAngleProcess:(0,oV.Z)(e.angle),isRadiusProcess:(0,oV.Z)(e.radius),isAngle1Process:(0,oV.Z)(e.angle1),isRadius1Process:(0,oV.Z)(e.radius1),isCoordinatesProcess:(0,oV.Z)(e.coordinates),isValidProcess:(0,oV.Z)(e.process)}}function Bi(e){let{isXProcess:t,isYProcess:i,isX1Process:r,isY1Process:n,isAngleProcess:l,isRadiusProcess:o,isAngle1Process:a,isRadius1Process:s,isCoordinatesProcess:h,isValidProcess:d}=Bt(e);return{doXProcess:t&&!i&&!n,doXYY1Process:t&&i&&n,doYProcess:i&&!t&&!r,doYXX1Process:i&&t&&r,doXYProcess:t&&i&&r&&n,doAngleProcess:l&&!a&&!o&&!s,doRadiusProcess:o&&!s&&!l&&!a,doAngRadRad1Process:l&&!a&&o&&s,doRadAngAng1Process:o&&l&&a&&!s,doRadAngProcess:l&&o&&a&&s,doCoordinatesProcess:h&&(!d||"process"in e&&"xy"in e.process)}}function Br(e){let{isXProcess:t,isYProcess:i,isX1Process:r,isY1Process:n,isAngleProcess:l,isRadiusProcess:o,isAngle1Process:a,isRadius1Process:s,isCoordinatesProcess:h}=Bt(e);return{doXProcess:t&&r&&!i&&!n,doYProcess:i&&n&&!t&&!r,doXYProcess:t&&r&&i&&n,doAngleProcess:l&&a&&!o&&!s,doRadiusProcess:o&&s&&!l&&!a,doRadAngProcess:l&&o&&a&&s,doCoordinatesProcess:h}}function Bn(e){return{doXYProcess:(0,oV.Z)(e.x)&&(0,oV.Z)(e.y),doPolarProcess:(0,oV.Z)(e.angle)&&(0,oV.Z)(e.radius),doGeoProcess:(0,oV.Z)(e.areaName)}}let Bl=new class extends uX{constructor(){super(...arguments),this.time=sv.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){return super.drawShape(e,t,i,r,n,l,o,a,s,h,d,u)}};var Bo=function(e,t){return function(i,r){t(i,r,e)}};let Ba=["","repeat-x","repeat-y","repeat"],Bs=class extends aG{constructor(e){super(),this.graphicRenderContributions=e,this.numberType=lF,this.builtinContributions=[Bl,aO],this.init(e)}drawShape(e,t,i,r,n,l,o,a){let s=r4(e).image,{repeatX:h=s.repeatX,repeatY:d=s.repeatY,x:u=s.x,y:c=s.y,cornerRadius:p=s.cornerRadius,fillStrokeOrder:g=s.fillStrokeOrder,cornerType:f=s.cornerType,image:m}=e.attribute,b=this.valid(e,s,o);if(!b)return;let{fVisible:y,sVisible:v,doFill:_,doStroke:C}=b;if(!m||!e.resources)return;let x=e.resources.get(m);if("success"!==x.state)return;let w=e.width,S=e.height;t.beginPath();let A=!1;0===p||(0,ri.Z)(p)&&p.every(e=>0===e)?t.rect(i,r,w,S):(am(t,i,r,w,S,p,"bevel"!==f),A=!0),t.setShadowBlendStyle&&t.setShadowBlendStyle(e,e.attribute,s);let k=()=>{if(_){if(o)o(t,e.attribute,s);else if(y){t.setCommonStyle(e,e.attribute,i,r,s);let n=0;if("repeat"===h&&(n|=1),"repeat"===d&&(n|=2),n){let e=t.createPattern(x.data,Ba[n]);t.fillStyle=e,t.translate(i,r,!0),t.fillRect(0,0,w,S),t.translate(-i,-r,!0)}else t.drawImage(x.data,i,r,w,S)}}},M=()=>{C&&(a?a(t,e.attribute,s):v&&(t.setStrokeStyle(e,e.attribute,u-i,c-r,s),t.stroke()))};g?(M(),A&&(t.save(),t.clip()),this.beforeRenderStep(e,t,i,r,_,!1,y,!1,s,n,o),k(),A&&t.restore()):(A&&(t.save(),t.clip()),this.beforeRenderStep(e,t,i,r,_,!1,y,!1,s,n,o),k(),A&&t.restore(),M()),this.afterRenderStep(e,t,i,r,_,!1,y,!1,s,n,o)}draw(e,t,i){let{image:r}=e.attribute;if(!r||!e.resources)return;let n=e.resources.get(r);if("loading"===n.state&&(0,r6.Z)(r))return void na.improveImageLoading(r);if("success"!==n.state)return;let{context:l}=t.drawParams;if(!l)return;let o=r4(e).image;this._draw(e,o,!1,i)}};Bs=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),Bo(0,tT(tE)),Bo(0,tR(aT)),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],Bs);let Bh=!1,Bd=new tb(e=>{Bh||(Bh=!0,e(oE).to(Bs).inSingletonScope(),e(o_).toService(oE),e(aT).toService(aD),tB(e,aT))}),Bu=class extends uD{constructor(e){super(),this.canvasRenderer=e,this.type="image",this.numberType=lF}};Bu=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS(),(eK=tT(oE),function(e,t){eK(e,t,0)}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[Object])],Bu);let Bc=!1,Bp=new tb((e,t,i,r)=>{Bc||(Bc=!0,e(ud).to(Bu).inSingletonScope(),e(u_).toService(ud))}),Bg=!1,Bf=new tb((e,t,i,r)=>{Bg||(Bg=!0,e(d9).to(yB).inSingletonScope(),e(yB).toService(d9))});function Bm(){Bm.__loaded||(Bm.__loaded=!0,oq.RegisterGraphicCreator("image",yy),tG.load(Bd),tG.load(d4?Bp:Bf))}function Bb(){dV(),CB(),g1()}function By(e,t){let{x1:i,y1:r,x2:n,y2:l}=t,{x1:o,y1:a,x2:s,y2:h}=e.AABBBounds,d=0,u=0;return o<i&&(d=i-o),a<r&&(u=r-a),s>n&&(d=n-s),h>l&&(u=l-h),{dx:d,dy:u}}function Bv(e,t){let{dx:i,dy:r}=By(e,t),{dx:n=0,dy:l=0}=e.attribute;i&&e.setAttribute("dx",i+n),r&&e.setAttribute("dy",r+l)}Bm.__loaded=!1;class B_ extends yN{constructor(){super(...arguments),this.name="marker",this._onHover=e=>{this._lastHover=CF(e,this._container,this._lastHover)},this._onUnHover=e=>{this._lastHover=CH(e,this._container,this._lastHover)},this._onClick=e=>{this._lastSelect=CO(e,this._container,this._lastSelect)}}transAnimationConfig(){var e,t,i;if(!1!==this.attribute.animation){let r=(0,r9.Z)(this.attribute.animation)?this.attribute.animation:{};this._animationConfig={enter:(0,ha.Z)({},this.defaultUpdateAnimation,r,null!=(e=this.attribute.animationEnter)?e:{}),exit:(0,ha.Z)({},this.defaultExitAnimation,r,null!=(t=this.attribute.animationExit)?t:{}),update:(0,ha.Z)({},this.defaultUpdateAnimation,r,null!=(i=this.attribute.animationUpdate)?i:{})}}}setAttribute(e,t,i){super.setAttribute(e,t,i),"visible"===e&&this.render()}_bindEvent(){var e,t,i;if(!this.attribute.interactive)return;let{hover:r,select:n}=this.attribute;r&&(null==(e=this._container)||e.addEventListener("pointermove",this._onHover),null==(t=this._container)||t.addEventListener("pointerout",this._onUnHover)),n&&(null==(i=this._container)||i.addEventListener("pointerdown",this._onClick))}_releaseEvent(){var e,t,i;null==(e=this._container)||e.removeEventListener("pointermove",this._onHover),null==(t=this._container)||t.removeEventListener("pointerout",this._onUnHover),null==(i=this._container)||i.removeEventListener("pointerdown",this._onClick)}_initContainer(){var e,t;let i,{limitRect:r={},clipInRange:n}=this.attribute;if(n){let n=oq.group(Object.assign(Object.assign({},r),{clip:!0,pickable:!1}));i=oq.group({x:-(null!=(e=r.x)?e:0),y:-(null!=(t=r.y)?t:0),pickable:!1}),n.add(i),this._containerClip=n,this.add(n)}else i=oq.group({x:0,y:0,pickable:!1}),this.add(i);i.name="marker-container",this._container=i}_updateContainer(){var e,t;let{limitRect:i={},clipInRange:r}=this.attribute;this._containerClip&&this._containerClip.setAttributes(Object.assign({},i)),this._container.setAttributes({x:r?-(null!=(e=i.x)?e:0):0,y:r?-(null!=(t=i.y)?t:0):0})}render(){var e;this.transAnimationConfig(),this.setAttribute("pickable",!1);let t=null==(e=this.attribute.visible)||e;!1===this.attribute.interactive&&this.setAttribute("childrenPickable",!1),t&&this.isValidPoints()?this._container?(this._updateContainer(),this.updateMarker(),this.markerAnimate("update")):(this._initContainer(),this.initMarker(this._container),this.markerAnimate("enter")):(this.markerAnimate("exit"),this._container=null,this.removeAllChild(!0)),this._releaseEvent(),this._bindEvent()}release(){this.markerAnimate("exit"),super.release(),this._releaseEvent(),this._container=null}}function BC(e,t,i,r){var n,l,o,a,s;if(!e)return;null==(n=null==e?void 0:e.animates)||n.forEach(e=>e.stop("end"));let h=null!=(o=null==(l=e.attribute)?void 0:l.fillOpacity)?o:1,d=null!=(s=null==(a=e.attribute)?void 0:a.strokeOpacity)?s:1;e.setAttributes({fillOpacity:0,strokeOpacity:0}),e.animate().wait(t).to({fillOpacity:h,strokeOpacity:d},i,r)}function Bx(e,t,i,r){e&&(BC(e.startSymbol,t,i,r),e.lines.forEach(e=>BC(e,t,i,r)),BC(e.line,t,i,r),BC(e.endSymbol,t,i,r))}function Bw(e,t,i,r){e&&(BC(e.getTextShape(),t,i,r),BC(e.getBgRect(),t,i,r))}function BS(e,t,i,r){var n,l,o,a;e&&(e.setAttributes({fillOpacity:null!=(l=null==(n=e.attribute)?void 0:n.fillOpacity)?l:1,strokeOpacity:null!=(a=null==(o=e.attribute)?void 0:o.strokeOpacity)?a:1}),e.animate().wait(t).to({fillOpacity:0,strokeOpacity:0},i,r))}function BA(e,t,i,r){e&&(BS(e.startSymbol,t,i,r),e.lines.forEach(e=>BS(e,t,i,r)),BS(e.line,t,i,r),BS(e.endSymbol,t,i,r))}function Bk(e,t,i,r){e&&(BS(e.getTextShape(),t,i,r),BS(e.getBgRect(),t,i,r))}function BM(e,t,i,r,n){let l=.1*i,o=.7*i,a=.1*i,s=.1*i;BC(e.startSymbol,r,l,n),e.lines.forEach(e=>e.setAttribute("clipRange",0)),e.lines.forEach((t,i)=>{let a=o/e.lines.length;t.animate().wait(r+l+i*a).to({clipRange:1},a,n)}),BC(e.endSymbol,r+l+o,a,n),(0,ag.IX)(t).forEach(e=>{let t=r+l+o+a;BC(e.getTextShape(),t,s,n),BC(e.getBgRect(),t,s,n)})}function BT(e,t,i,r,n){Bx(e,r,i,n),(0,ag.IX)(t).forEach(e=>{Bw(e,r,i,n)})}function BR(e,t,i,r,n){BC(e,r,i,n),(0,ag.IX)(t).forEach(e=>{Bw(e,r,i,n)})}function BE(e,t,i,r,n){BC(e,r,i,n),(0,ag.IX)(t).forEach(e=>{Bw(e,r,i,n)})}function BP(e,t,i,r,n,l){var o;Bx(e,n,r,l),BC(t,n,r,l),(null==(o=i.getTextShape)?void 0:o.call(i))?Bw(i,n,r,l):BC(i,n,r,l)}function BB(e,t,i,r,n,l){var o;let a=.1*r,s=.65*r,h=.05*r,d=.1*r,u=.1*r;BC(e.startSymbol,n,a,l),e.lines.forEach(e=>e.setAttribute("clipRange",0)),e.lines.forEach((t,i)=>{let r=s/e.lines.length;t.animate().wait(n+a+i*r).to({clipRange:1},r,l)}),BC(t,n+a+s,h,l),BC(e.endSymbol,n+a+s+h,d,l),(null==(o=i.getTextShape)?void 0:o.call(i))?(BC(i.getTextShape(),n+a+s+h+d,u,l),BC(i.getBgRect(),n+a+s+d,u,l)):BC(i,n+a+s+d,u,l)}function BI(e,t,i,r){let{enter:n,update:l,exit:o}=i;if("enter"===r){let{type:i,duration:r,delay:l,easing:o}=n;"clipIn"===i?BM(e,t,r,l,o):"fadeIn"===i&&BT(e,t,r,l,o)}else if("update"===r){let{type:i,duration:r,delay:n,easing:o}=l;"clipIn"===i?BM(e,t,r,n,o):"fadeIn"===i&&BT(e,t,r,n,o)}else if("exit"===r){let{duration:i,delay:r,easing:n}=o;BA(e,r,i,n),(0,ag.IX)(t).forEach(e=>{Bk(e,r,i,n)})}}function BL(e,t,i,r){let{enter:n,update:l,exit:o}=i;if("enter"===r){let{type:i,duration:r,delay:l,easing:o}=n;"fadeIn"===i&&BR(e,t,r,l,o)}else if("update"===r){let{type:i,duration:r,delay:n,easing:o}=l;"fadeIn"===i&&BR(e,t,r,n,o)}else if("exit"===r){let{duration:i,delay:r,easing:n}=o;BS(e,r,i,n),(0,ag.IX)(t).forEach(e=>{Bk(e,r,i,n)})}}function BF(e,t,i,r){let{enter:n,update:l,exit:o}=i;if("enter"===r){let{type:i,duration:r,delay:l,easing:o}=n;"fadeIn"===i&&BE(e,t,r,l,o)}else if("update"===r){let{type:i,duration:r,delay:n,easing:o}=l;"fadeIn"===i&&BE(e,t,r,n,o)}else if("exit"===r){let{duration:i,delay:r,easing:n}=o;BS(e,r,i,n),(0,ag.IX)(t).forEach(e=>{Bk(e,r,i,n)})}}function BH(e,t,i,r){let[n,l]=e,{enter:o,update:a,exit:s}=i;if("enter"===r){let{type:e,duration:i,delay:r,easing:a}=o;"fadeIn"===e?BP(n,l,t,i,r,a):"callIn"===e&&BB(n,l,t,i,r,a)}else if("update"===r){let{type:e,duration:i,delay:r,easing:o}=a;"fadeIn"===e?BP(n,l,t,i,r,o):"callIn"===e&&BB(n,l,t,i,r,o)}else if("exit"===r){var h;let{duration:e,delay:i,easing:r}=s;BA(n,i,e,r),BS(l,i,e,r),(null==(h=t.getTextShape)?void 0:h.call(t))?Bk(t,i,e,r):BS(t,i,e,r)}}let BO={type:"clipIn",duration:500,easing:"linear",delay:0},BD={type:"fadeIn",duration:500,easing:"linear",delay:0},Bz={type:"callIn",duration:500,easing:"linear",delay:0},BW={type:"fadeOut",duration:500,easing:"linear",delay:0};class BZ{getLabel(){return this._label}_addMarkLabels(e,t,i){let{label:r,state:n}=this.attribute,l=(0,ag.IX)(null==n?void 0:n.label),o=(0,ag.IX)(null==n?void 0:n.labelBackground),a=(0,ag.IX)(r).map((r,n)=>{var a,s;let h=(0,ha.Z)({},i,r),d=new CL(Object.assign(Object.assign({},h),{state:{panel:(0,ha.Z)({},pK,null!=(a=o[n])?a:(0,ag.Z$)(o)),text:(0,ha.Z)({},pK,null!=(s=l[n])?s:(0,ag.Z$)(l))}}));return d.name=t,e.add(d),this.setLabelPos(d,h),d});this._label=1===(0,ag.IX)(a).length?a[0]:a}_updateMarkLabels(e){let{label:t,state:i}=this.attribute,r=(0,ag.IX)(this._label),n=(0,ag.IX)(null==i?void 0:i.label),l=(0,ag.IX)(null==i?void 0:i.labelBackground);if(r.length){let i=(0,ag.IX)(t);r.forEach((t,r)=>{var o,a;let s=(0,ha.Z)({},e,i[r]);t.setAttributes(Object.assign(Object.assign({dx:0,dy:0},s),{state:{panel:(0,ha.Z)({},pK,null!=(o=l[r])?o:(0,ag.Z$)(l)),text:(0,ha.Z)({},pK,null!=(a=n[r])?a:(0,ag.Z$)(n))}})),this.setLabelPos(t,s)})}}}class BN extends B_{constructor(){super(...arguments),this.name="markCommonLine",this.defaultUpdateAnimation=BO,this.defaultExitAnimation=BW}getLine(){return this._line}setLabelPos(e,t){let{limitRect:i}=this.attribute,{position:r,confine:n,autoRotate:l}=t,o=this.getPointAttrByPosition(r,t),a=r.toString().toLocaleLowerCase().includes("start")?this._line.getStartAngle()||0:this._line.getEndAngle()||0;if(e.setAttributes(Object.assign(Object.assign({},o.position),{angle:l?this.getRotateByAngle(o.angle,t):0,textStyle:Object.assign(Object.assign({},this.getTextStyle(r,a,l)),t.textStyle)})),i&&n){let{x:t,y:r,width:n,height:l}=i;Bv(e,{x1:t,y1:r,x2:t+n,y2:r+l})}}initMarker(e){let t=this.createSegment();t.name="mark-common-line-line",this._line=t,e.add(t),this.addMarkLineLabels(e)}updateMarker(){this.setLineAttributes(),this.updateMarkLineLabels()}}(0,gH.jB)(BN,BZ),(eX=tn||(tn={})).start="start",eX.startTop="startTop",eX.startBottom="startBottom",eX.insideStart="insideStart",eX.insideStartTop="insideStartTop",eX.insideStartBottom="insideStartBottom",eX.middle="middle",eX.insideMiddleTop="insideMiddleTop",eX.insideMiddleBottom="insideMiddleBottom",eX.end="end",eX.endTop="endTop",eX.endBottom="endBottom",eX.insideEnd="insideEnd",eX.insideEndTop="insideEndTop",eX.insideEndBottom="insideEndBottom",(eY=tl||(tl={})).left="left",eY.right="right",eY.top="top",eY.bottom="bottom",eY.topLeft="topLeft",eY.topRight="topRight",eY.bottomLeft="bottomLeft",eY.bottomRight="bottomRight",eY.middle="middle",eY.insideLeft="insideLeft",eY.insideRight="insideRight",eY.insideTop="insideTop",eY.insideBottom="insideBottom",eY.insideTopLeft="insideTopLeft",eY.insideTopRight="insideTopRight",eY.insideBottomLeft="insideBottomLeft",eY.insideBottomRight="insideBottomRight",(eq=to||(to={})).arcInnerStart="arcInnerStart",eq.arcInnerEnd="arcInnerEnd",eq.arcInnerMiddle="arcInnerMiddle",eq.arcOuterStart="arcOuterStart",eq.arcOuterEnd="arcOuterEnd",eq.arcOuterMiddle="arcOuterMiddle",eq.center="center",(eJ=ta||(ta={})).top="top",eJ.bottom="bottom",eJ.middle="middle",eJ.insideTop="insideTop",eJ.insideBottom="insideBottom",eJ.insideMiddle="insideMiddle";let B$={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{position:tn.end,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},Bj={postiveXAxis:{start:{textAlign:"left",textBaseline:"middle"},startTop:{textAlign:"left",textBaseline:"bottom"},startBottom:{textAlign:"left",textBaseline:"top"},insideStart:{textAlign:"right",textBaseline:"middle"},insideStartTop:{textAlign:"right",textBaseline:"bottom"},insideStartBottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"left",textBaseline:"middle"},endTop:{textAlign:"left",textBaseline:"bottom"},endBottom:{textAlign:"left",textBaseline:"top"},insideEnd:{textAlign:"right",textBaseline:"middle"},insideEndTop:{textAlign:"right",textBaseline:"bottom"},insideEndBottom:{textAlign:"right",textBaseline:"top"}},negativeXAxis:{start:{textAlign:"right",textBaseline:"middle"},startTop:{textAlign:"right",textBaseline:"bottom"},startBottom:{textAlign:"right",textBaseline:"top"},insideStart:{textAlign:"left",textBaseline:"middle"},insideStartTop:{textAlign:"left",textBaseline:"bottom"},insideStartBottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"center",textBaseline:"middle"},insideMiddleTop:{textAlign:"center",textBaseline:"bottom"},insideMiddleBottom:{textAlign:"center",textBaseline:"top"},end:{textAlign:"right",textBaseline:"middle"},endTop:{textAlign:"right",textBaseline:"bottom"},endBottom:{textAlign:"right",textBaseline:"top"},insideEnd:{textAlign:"left",textBaseline:"middle"},insideEndTop:{textAlign:"left",textBaseline:"bottom"},insideEndBottom:{textAlign:"left",textBaseline:"top"}}},BG={interactive:!0,startSymbol:{visible:!1,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},endSymbol:{visible:!0,symbolType:"triangle",size:12,fill:"rgba(46, 47, 50)",lineWidth:0},label:{autoRotate:!0,position:to.arcOuterMiddle,refX:0,refY:0,refAngle:0,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},lineStyle:{stroke:"#b2bacf",lineWidth:1,lineDash:[2]}},BV={interactive:!0,label:{position:tl.right,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}},BU={interactive:!0,label:{autoRotate:!0,position:to.arcOuterMiddle,textStyle:{fill:"#fff",stroke:"#fff",lineWidth:0,fontSize:10,fontWeight:"normal",fontStyle:"normal"},padding:[2,2,4,4],panel:{visible:!0,cornerRadius:0,fill:"rgb(48, 115, 242)",fillOpacity:.8}},areaStyle:{fill:"#b2bacf",visible:!0}},BK={arcInnerStart:{textAlign:"center",textBaseline:"bottom"},arcInnerEnd:{textAlign:"center",textBaseline:"bottom"},arcInnerMiddle:{textAlign:"center",textBaseline:"bottom"},arcOuterStart:{textAlign:"center",textBaseline:"top"},arcOuterEnd:{textAlign:"center",textBaseline:"top"},arcOuterMiddle:{textAlign:"center",textBaseline:"top"},center:{textAlign:"center",textBaseline:"middle"}},BX={left:{textAlign:"right",textBaseline:"middle"},insideLeft:{textAlign:"left",textBaseline:"middle"},right:{textAlign:"left",textBaseline:"middle"},insideRight:{textAlign:"right",textBaseline:"middle"},top:{textAlign:"center",textBaseline:"bottom"},insideTop:{textAlign:"center",textBaseline:"top"},bottom:{textAlign:"center",textBaseline:"top"},insideBottom:{textAlign:"center",textBaseline:"bottom"},middle:{textAlign:"center",textBaseline:"middle"},topLeft:{textAlign:"right",textBaseline:"top"},insideTopLeft:{textAlign:"left",textBaseline:"top"},topRight:{textAlign:"left",textBaseline:"top"},insideTopRight:{textAlign:"right",textBaseline:"top"},bottomLeft:{textAlign:"right",textBaseline:"bottom"},insideBottomLeft:{textAlign:"left",textBaseline:"bottom"},bottomRight:{textAlign:"left",textBaseline:"bottom"},insideBottomRight:{textAlign:"right",textBaseline:"bottom"}},BY={postiveXAxis:{top:{textAlign:"left",textBaseline:"bottom"},bottom:{textAlign:"left",textBaseline:"top"},middle:{textAlign:"left",textBaseline:"middle"},insideTop:{textAlign:"right",textBaseline:"bottom"},insideBottom:{textAlign:"right",textBaseline:"top"},insideMiddle:{textAlign:"right",textBaseline:"middle"}},negativeXAxis:{top:{textAlign:"right",textBaseline:"bottom"},bottom:{textAlign:"right",textBaseline:"top"},middle:{textAlign:"right",textBaseline:"middle"},insideTop:{textAlign:"left",textBaseline:"bottom"},insideBottom:{textAlign:"left",textBaseline:"top"},insideMiddle:{textAlign:"left",textBaseline:"middle"}}};function Bq(){BJ._animate=BI}Bb(),CR(),g1();class BJ extends BN{markerAnimate(e){BJ._animate&&this._animationConfig&&BJ._animate(this._line,this._label,this._animationConfig,e)}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},BJ.defaultAttributes,e)),this.name="markLine"}getPointAttrByPosition(e,t){var i;let{refX:r=0,refY:n=0}=t,l=this._line.getMainSegmentPoints(),o=null!=(i=this._line.getEndAngle())?i:0,a=(b5(o),o),s=r*Math.cos(a)+n*Math.cos(a-Math.PI/2),h=r*Math.sin(a)+n*Math.sin(a-Math.PI/2);return e.includes("start")||e.includes("Start")?{position:{x:l[0].x+s,y:l[0].y+h},angle:a}:e.includes("middle")||e.includes("Middle")?{position:{x:(l[0].x+l[l.length-1].x)/2+s,y:(l[0].y+l[l.length-1].y)/2+h},angle:a}:{position:{x:l[l.length-1].x+s,y:l[l.length-1].y+h},angle:a}}getRotateByAngle(e,t){var i;return(b5(e)?e:e-Math.PI)+(null!=(i=t.refAngle)?i:0)}getTextStyle(e,t,i){return b6(Math.abs(t),Math.PI/2,.001)||b6(Math.abs(t),3*Math.PI/2,.001)?b8(i,t,e):b5(t)?Bj.postiveXAxis[e]:Bj.negativeXAxis[e]}createSegment(){let{points:e,startSymbol:t,endSymbol:i,lineStyle:r,mainSegmentIndex:n,multiSegment:l,state:o}=this.attribute;return new CP({points:e,startSymbol:t,endSymbol:i,lineStyle:r,mainSegmentIndex:n,multiSegment:l,pickable:!1,state:{line:(0,ha.Z)({},pK,null==o?void 0:o.line),startSymbol:(0,ha.Z)({},pK,null==o?void 0:o.lineStartSymbol),endSymbol:(0,ha.Z)({},pK,null==o?void 0:o.lineEndSymbol)}})}setLineAttributes(){let{points:e,startSymbol:t,endSymbol:i,lineStyle:r,mainSegmentIndex:n,multiSegment:l,state:o}=this.attribute;this._line&&this._line.setAttributes({points:e,startSymbol:t,endSymbol:i,lineStyle:r,mainSegmentIndex:n,multiSegment:l,state:{line:(0,ha.Z)({},pK,null==o?void 0:o.line),startSymbol:(0,ha.Z)({},pK,null==o?void 0:o.lineStartSymbol),endSymbol:(0,ha.Z)({},pK,null==o?void 0:o.lineEndSymbol)}})}isValidPoints(){let{points:e}=this.attribute;if(!e||e.length<2)return!1;let t=!0;return e.forEach(e=>{if(e.length)e.forEach(e=>{(0,sD.Z)(e.x)&&(0,sD.Z)(e.y)||(t=!1)});else if(!(0,sD.Z)(e.x)||!(0,sD.Z)(e.y))return void(t=!1)}),t}addMarkLineLabels(e){this._addMarkLabels(e,"mark-common-line-label",BJ.defaultAttributes.label)}updateMarkLineLabels(){this._updateMarkLabels(BJ.defaultAttributes.label)}}BJ.defaultAttributes=B$;var BQ=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};function B0(e,t){let i;if(t.coordinates){let e,r,{coordinates:n,coordinateType:l,getSeriesByIdOrIndex:o}=t,a=BQ(t,["coordinates","coordinateType","getSeriesByIdOrIndex"]);if((0,nr.Z)(n)){let i=t.getRelativeSeries();e=n(i.getData().getLatestData(),i)}else e=n;i=(e=(0,ag.IX)(e)).map(e=>{let t=o(e.refRelativeSeriesId,e.refRelativeSeriesIndex);if("cartesian"===l){let{xField:i,yField:n}=t.getSpec(),{xFieldDim:l,xFieldIndex:o,yFieldDim:s,yFieldIndex:h}=e,d=i;(0,oV.Z)(o)&&(d=(0,ag.IX)(i)[o]),l&&(0,ag.IX)(i).includes(l)&&(d=l);let u=n;(0,oV.Z)(h)&&(u=(0,ag.IX)(n)[h]),s&&(0,ag.IX)(n).includes(s)&&(u=s),r=Object.assign({x:void 0,y:void 0},a),(0,r6.Z)(e[d])&&Pq(e[d])?r.x={field:d,aggrType:e[d]}:r.x=(0,ag.IX)(d).map(t=>e[t]),(0,r6.Z)(e[u])&&Pq(e[u])?r.y={field:u,aggrType:e[u]}:r.y=(0,ag.IX)(u).map(t=>e[t])}else if("polar"===l){let{valueField:i,categoryField:n}=t.getSpec(),{angleFieldDim:l,angleFieldIndex:o}=e,s=n;(0,oV.Z)(o)&&(s=(0,ag.IX)(n)[o]),l&&(0,ag.IX)(n).includes(l)&&(s=l),r=Object.assign({angle:void 0,radius:void 0},a),(0,r6.Z)(e[s])&&Pq(e[s])?r.angle={field:s,aggrType:e[s]}:r.angle=(0,ag.IX)(s).map(t=>e[t]),(0,r6.Z)(e[i])&&Pq(e[i])?r.radius={field:i,aggrType:e[i]}:r.radius=(0,ag.IX)(i).map(t=>e[t])}return r.getRefRelativeSeries=()=>t,r})}else i=t;let r=[];return i.forEach(t=>{let i={x:null,y:null,angle:null,radius:null,areaName:null};if((0,oV.Z)(t.x)){let r=t.x;(0,ri.Z)(r)?i.x=r.map(i=>B2(i,e,t)):i.x=B2(r,e,t)}if((0,oV.Z)(t.y)){let r=t.y;(0,ri.Z)(r)?i.y=r.map(i=>B2(i,e,t)):i.y=B2(r,e,t)}if((0,oV.Z)(t.angle)){let r=t.angle;(0,ri.Z)(r)?i.angle=r.map(i=>B2(i,e,t)):i.angle=B2(r,e,t)}if((0,oV.Z)(t.radius)){let r=t.radius;(0,ri.Z)(r)?i.radius=r.map(i=>B2(i,e,t)):i.radius=B2(r,e,t)}(0,oV.Z)(t.areaName)&&(i.areaName=B2(t.areaName,e,t)),t.getRefRelativeSeries&&(i.getRefRelativeSeries=t.getRefRelativeSeries),r.push(i)}),r}let B1={min:(e,t)=>mI(e[0].latestData,t.field),max:(e,t)=>mL(e[0].latestData,t.field),sum:function(e,t){return mF(e[0].latestData,t.field)},average:function(e,t){return mH(e[0].latestData,t.field)},variance:function(e,t){return mO(e[0].latestData,t.field)},standardDeviation:function(e,t){return Math.sqrt(mO(e[0].latestData,t.field))},median:function(e,t){var i,r;return i=e[0].latestData,r=t.field,(0,mE.C)(i.map(e=>e[r]))}};function B2(e,t,i){let r=i.getRelativeSeries(),n=i.getStartRelativeSeries(),l=i.getEndRelativeSeries(),o=r.getData().getLatestData(),a=n.getData().getLatestData(),s=l.getData().getLatestData();if((0,nr.Z)(e))return e(o,a,s,r,n,l);if((0,sF.Z)(e)){let{aggrType:i,field:r}=e;return B1[i](t,{field:r})}return e}function B3(e,t){if(t&&t.getRelativeSeries){let i=t.getRelativeSeries();if(i){let t=i.getViewData();return t&&t.latestData&&t.latestData.length?e:[]}}return e}class B4 extends vJ{constructor(){super(...arguments),this.layoutType="none",this._layoutOffsetX=0,this._layoutOffsetY=0}getRelativeSeries(){return this._relativeSeries}getMarkerData(){return this._markerData}static _getMarkerCoordinateType(e){return"cartesian"}static getSpecInfo(e){return mX(e,this.specKey,this.type,e=>!1!==e.visible&&this._getMarkerCoordinateType(e)===this.coordinateType)}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkerAttributeContext(){this._markAttributeContext={relativeSeries:this._relativeSeries,startRelativeSeries:this._startRelativeSeries,endRelativeSeries:this._endRelativeSeries,vchart:this._option.globalInstance}}created(){super.created(),this._bindSeries(),this._initDataView(),this.initEvent(),this._buildMarkerAttributeContext()}_getAllRelativeSeries(){return{getRelativeSeries:()=>this._relativeSeries,getStartRelativeSeries:()=>this._startRelativeSeries,getEndRelativeSeries:()=>this._endRelativeSeries}}_getFieldInfoFromSpec(e,t,i){return(0,r6.Z)(t)&&Pq(t)?{field:i.getSpec()[({x:"xField",y:"yField",radius:"valueField",angle:"categoryField",areaName:"nameField"})[e]],aggrType:t}:t}_processSpecByDims(e){let t=this._relativeSeries,i={};return e.forEach(e=>i[e.dim]=this._getFieldInfoFromSpec(e.dim,e.specValue,t)),Object.assign(Object.assign({},i),this._getAllRelativeSeries())}_processSpecCoo(e){return Object.assign(Object.assign({coordinates:e.coordinates||e.coordinate},this._getAllRelativeSeries()),{getSeriesByIdOrIndex:(e,t)=>this._getSeriesByIdOrIndex(e,t),coordinateType:this.coordinateType})}_getRelativeDataView(){if(this._specifiedDataSeries){let e=[];(0,ag.IX)(this._specifiedDataSeries).forEach(t=>{e=e.concat(t.getViewData().latestData)});let t=new tp.q;return t.registerParser("array",c),new tf.V(t).parse(e,{type:"array"})}return this._relativeSeries.getViewData()}updateLayoutAttribute(){var e,t,i;if(null==(e=this._spec.visible)||e){if(!this._markerComponent){let e=this._createMarkerComponent();e.name=null!=(t=this._spec.name)?t:this.type,e.id=null!=(i=this._spec.id)?i:`${this.type}-${this.id}`,this._markerComponent=e,this.getContainer().add(this._markerComponent),this._markerComponent.on("*",(e,t)=>{this._delegateEvent(this._markerComponent,e,t,null,this.getMarkerData.bind(this))})}this._markerLayout()}super.updateLayoutAttribute()}_getSeriesByIdOrIndex(e,t){var i,r;let n;return(n=null==(i=this._option.getSeriesInUserIdOrIndex((0,oV.Z)(e)?[e]:[],[t]))?void 0:i[0])||(n=null!=(r=this._relativeSeries)?r:this._getFirstSeries()),n}_bindSeries(){let e=this._spec;this._relativeSeries=this._getSeriesByIdOrIndex(e.relativeSeriesId,e.relativeSeriesIndex),this._startRelativeSeries=this._getSeriesByIdOrIndex(e.startRelativeSeriesId,e.startRelativeSeriesIndex),this._endRelativeSeries=this._getSeriesByIdOrIndex(e.endRelativeSeriesId,e.endRelativeSeriesIndex),e.specifiedDataSeriesIndex&&"all"===e.specifiedDataSeriesIndex||e.specifiedDataSeriesId&&"all"===e.specifiedDataSeriesId?this._specifiedDataSeries=this._option.getAllSeries():(e.specifiedDataSeriesIndex||e.specifiedDataSeriesId)&&(this._specifiedDataSeries=this._getSeriesByIdOrIndex(e.specifiedDataSeriesId,e.specifiedDataSeriesIndex))}initEvent(){"cartesian"!==this._relativeSeries.coordinate&&(this._relativeSeries.event.on("zoom",this._markerLayout.bind(this)),this._relativeSeries.event.on("panmove",this._markerLayout.bind(this)),this._relativeSeries.event.on("scroll",this._markerLayout.bind(this)))}clear(){super.clear(),this._firstSeries=null}_getFirstSeries(){var e;if(this._firstSeries)return this._firstSeries;let t=y9(this._regions);return t?(this._firstSeries=t,t):(null==(e=this._option)||e.onError("need at least one series"),null)}_getNeedClearVRenderComponents(){return[this._markerComponent]}onLayoutStart(e,t){(0,r5.Z)(this._spec.offsetX)||(this._layoutOffsetX=s$(this._spec.offsetX,t.width,t)),(0,r5.Z)(this._spec.offsetY)||(this._layoutOffsetY=s$(this._spec.offsetY,t.height,t)),super.onLayoutStart(e,t)}_compareSpec(e,t){let i=super._compareSpec(e,t);return(0,dN.X)(t,e)||(i.reRender=!0,i.reMake=!0,i.change=!0),i}_initCommonDataView(){let{options:e}=this._computeOptions(),t=this._getRelativeDataView();hK(this._option.dataSet,"markerAggregation",B0),hK(this._option.dataSet,"markerFilter",B3);let i=new tf.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`});i.parse([t],{type:"dataview"}),i.transform({type:"markerAggregation",options:e}),i.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),i.target.on("change",()=>{this._markerLayout()}),this._markerData=i}}function B5(e,t){return function(e,t,i){let{predict:r}=(0,mP.fw)(e,e=>e[t],e=>e[i]),n=mI(e,t),l=mL(e,t),o=r(n),a=r(l);return[{[t]:n,[i]:o},{[t]:l,[i]:a}]}(e[0].latestData,t.fieldX,t.fieldY)}class B6 extends B4{constructor(){super(...arguments),this.specKey="markLine",this.layoutZIndex=X.MarkLine}static _getMarkerCoordinateType(e){let{doAngleProcess:t,doRadiusProcess:i,doAngRadRad1Process:r,doRadAngAng1Process:n,doRadAngProcess:l}=Bi(e);return"polar"===e.coordinateType||t||i||r||n||l?"polar":"cartesian"}_createMarkerComponent(){var e,t,i,r,n,l,o,a,s,h,d,u,c;let{startSymbol:p={},endSymbol:g={}}=this._spec,f=(0,ag.IX)(null!=(e=this._spec.label)?e:{}),m={zIndex:this.layoutZIndex,interactive:null==(t=this._spec.interactive)||t,hover:null==(i=this._spec.interactive)||i,select:null==(r=this._spec.interactive)||r,points:[{x:0,y:0},{x:0,y:0}],center:{x:0,y:0},radius:0,startAngle:0,endAngle:0,lineStyle:P7(vA(null==(n=this._spec.line)?void 0:n.style),this._markerData,this._markAttributeContext),clipInRange:null!=(l=this._spec.clip)&&l,label:f.map(e=>P6(e,this._markerData,this._markAttributeContext)),state:{line:P8(null!=(a=null==(o=this._spec.line)?void 0:o.state)?a:{},this._markerData,this._markAttributeContext),lineStartSymbol:P8(null!=(h=null==(s=this._spec.startSymbol)?void 0:s.state)?h:{},this._markerData,this._markAttributeContext),lineEndSymbol:P8(null!=(u=null==(d=this._spec.endSymbol)?void 0:d.state)?u:{},this._markerData,this._markAttributeContext),label:f.map(e=>{var t;return P8(null!=(t=e.state)?t:{},this._markerData,this._markAttributeContext)}),labelBackground:f.map(e=>{var t,i;return P8(null!=(i=null==(t=e.labelBackground)?void 0:t.state)?i:{},this._markerData,this._markAttributeContext)})},animation:null!=(c=this._spec.animation)&&c,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return p.visible?m.startSymbol=Object.assign(Object.assign({},p),{visible:!0,style:P7(vA(p.style),this._markerData,this._markAttributeContext)}):m.startSymbol={visible:!1},g.visible?m.endSymbol=Object.assign(Object.assign({},g),{visible:!0,style:P7(vA(g.style),this._markerData,this._markAttributeContext)}):m.endSymbol={visible:!1},this._newMarkLineComponent(m)}_getUpdateMarkerAttrs(){var e,t;let i,r=this._spec,n=this._markerData,l=this._startRelativeSeries,o=this._endRelativeSeries,a=this._relativeSeries,s=this._computePointsAttr(),h=a.getViewData().latestData,d=n.latestData[0]&&n.latestData[0].latestData?n.latestData[0].latestData:n.latestData;if(r.clip||(0,ag.IX)(r.label).some(e=>null==e?void 0:e.confine)){let{minX:e,maxX:t,minY:r,maxY:n}=P5([l.getRegion(),o.getRegion(),a.getRegion()]);i={x:e,y:r,width:t-e,height:n-r}}let u=null!=(t=null==(e=this._markerComponent)?void 0:e.attribute)?t:{},c=(0,ag.IX)(u.label),p=(0,ag.IX)(this._spec.label),g=c.map((e,t)=>{let i=p[t]||{};return Object.assign(Object.assign({},e),{text:i.formatMethod?i.formatMethod(d,h):null==e?void 0:e.text})});return Object.assign(Object.assign({},s),{label:g,limitRect:i,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}_markerLayout(){var e;let t=this._getUpdateMarkerAttrs();null==(e=this._markerComponent)||e.setAttributes(t)}_initDataView(){let e=this._spec,t="coordinates"in e,{doXProcess:i,doYProcess:r,doXYY1Process:n,doYXX1Process:l,doXYProcess:o,doAngleProcess:a,doRadiusProcess:s,doAngRadRad1Process:h,doRadAngAng1Process:d,doRadAngProcess:u}=Bi(e);if(this._markerData=this._getRelativeDataView(),!(i||r||n||l||o||a||s||h||d||u||t))return;hK(this._option.dataSet,"markerAggregation",B0),hK(this._option.dataSet,"markerRegression",B5),hK(this._option.dataSet,"markerFilter",B3);let{options:c,needAggr:p,needRegr:g,processData:f}=this._computeOptions(),m=new tf.V(this._option.dataSet);m.parse([f],{type:"dataview"}),p&&m.transform({type:"markerAggregation",options:c}),g&&m.transform({type:"markerRegression",options:c}),m.transform({type:"markerFilter",options:this._getAllRelativeSeries()}),m.target.on("change",()=>{this._markerLayout()}),this._markerData=m}}B6.specKey="markLine";let B8=()=>({style:{fontSize:{type:"token",key:"l4FontSize"},fontWeight:"normal",fontStyle:"normal",fill:{type:"palette",key:"primaryFontColor"}},labelBackground:{padding:{top:2,bottom:2,right:4,left:4},style:{cornerRadius:3,fill:{type:"palette",key:"markLabelBackgroundColor"}}}}),B7=e=>({visible:e,symbolType:"triangle",size:10,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}}),B9=B8();B9.refY=5;let Ie={line:{style:{lineDash:[3,3],stroke:{type:"palette",key:"markLineStrokeColor"}}},startSymbol:B7(!1),endSymbol:B7(!0),label:B9};class It extends B6{constructor(){super(...arguments),this.type=sc.markLine,this.name=sc.markLine,this.coordinateType="cartesian"}_newMarkLineComponent(e){return new BJ(e)}_computePointsAttr(){var e;let t=this._spec,i=this._markerData,r=this._startRelativeSeries,n=this._endRelativeSeries,l=this._relativeSeries,o=(0,oV.Z)(t.coordinates),a=(0,oV.Z)(t.process),s=a&&(0,oV.Z)(t.process.x),h=a&&(0,oV.Z)(t.process.y),d=(0,oV.Z)(t.positions),u=null!=(e=t.autoRange)&&e,{doXProcess:c,doYProcess:p,doXYY1Process:g,doYXX1Process:f,doXYProcess:m,doCoordinatesProcess:b}=Bi(t),y=[];if(c||g||p||f||m||o&&s||o&&h){let e=PJ(i,r,n,l,u);y=1===e.length?e[0]:e.map(e=>e[0])}else b?y=P1(i,l,u,t.coordinatesOffset):d&&(y=P4(t.positions,l,t.regionRelative));return{points:y}}_markerLayout(){var e,t,i,r,n;let l=this._getUpdateMarkerAttrs();if("type-step"===this._spec.type){let n,o,a=this._startRelativeSeries,s=this._endRelativeSeries,{multiSegment:h,mainSegmentIndex:d}=this._spec.line||{},{connectDirection:u,expandDistance:c=0}=this._spec;if(sN(c)){let e=a.getRegion(),t=e.getLayoutStartPoint(),i=s.getRegion(),r=i.getLayoutStartPoint();if("bottom"===u||"top"===u){let l=Math.abs(Math.min(t.y,r.y)-Math.max(t.y+e.getLayoutRect().height,r.y+i.getLayoutRect().height));n=Number(c.substring(0,c.length-1))*l/100}else{let l=Math.abs(Math.min(t.x,r.x)-Math.max(t.x+e.getLayoutRect().width,r.x+i.getLayoutRect().width));n=Number(c.substring(0,c.length-1))*l/100}}else n=c;let{points:p,limitRect:g}=l;if(!p||p.length<2)return void(null==(e=this._markerComponent)||e.setAttributes(l));let f=function(e,t,i,r=0){let n=[],l=e.y-t.y,o=e.x-t.x;switch(i){case"top":n.push(e),n.push({x:e.x,y:l>0?e.y-r-Math.abs(l):e.y-r}),n.push({x:t.x,y:l>0?t.y-r:t.y-r-Math.abs(l)}),n.push(t);break;case"bottom":n.push(e),n.push({x:e.x,y:l<0?e.y+r+Math.abs(l):e.y+r}),n.push({x:t.x,y:l<0?t.y+r:t.y+r+Math.abs(l)}),n.push(t);break;case"left":n.push(e),n.push({x:o>0?e.x-r-Math.abs(o):e.x-r,y:e.y}),n.push({x:o>0?t.x-r:t.x-r-Math.abs(o),y:t.y}),n.push(t);break;case"right":n.push(e),n.push({x:o>0?e.x+r:e.x+r+Math.abs(o),y:e.y}),n.push({x:o>0?t.x+r+Math.abs(o):t.x+r,y:t.y}),n.push(t)}return n}(p[0],p[1],u,n);o=h&&(0,oV.Z)(d)?{position:"middle",autoRotate:!1}:Object.assign({position:"start",autoRotate:!1},function(e,t,i,r=0){let n=e.y-t.y,l=e.x-t.x;return"bottom"===i?{dx:l>0?-l/2:Math.abs(l/2),dy:n>0?r:Math.abs(n)+r}:"top"===i?{dx:l>0?-Math.abs(l/2):+Math.abs(l/2),dy:n>0?-(Math.abs(n)+r):-r}:"left"===i?{dx:l>0?-l-r:-r,dy:n>0?-n/2:Math.abs(n/2)}:"right"===i?{dx:l>0?r:Math.abs(l)+r,dy:n>0?-n/2:Math.abs(n/2)}:{}}(p[0],p[1],u,n));let m=null!=(i=null==(t=this._markerComponent)?void 0:t.attribute)?i:{},b=(0,ag.IX)(m.label),y=(0,ag.IX)(l.label),v=(0,ag.IX)(this._spec.label);null==(r=this._markerComponent)||r.setAttributes({points:h?[[f[0],f[1]],[f[1],f[2]],[f[2],f[3]]]:f,label:y.map((e,t)=>{var i,r,n,l;let a=0,s=0,h=null!=(i=o.dx)?i:0,d=null!=(r=o.dy)?r:0,u=null!=(n=v[t])?n:v[0];return(0,sD.Z)(null==u?void 0:u.refX)&&(a+=u.refX),(0,sD.Z)(null==u?void 0:u.refY)&&(s+=u.refY),(0,sD.Z)(null==u?void 0:u.dx)&&(h+=u.dx),(0,sD.Z)(null==u?void 0:u.dy)&&(d+=u.dy),Object.assign(Object.assign(Object.assign({},e),o),{refX:a,refY:s,dx:h,dy:d,textStyle:Object.assign(Object.assign({},null==(l=b[t])?void 0:l.textStyle),{textAlign:"center",textBaseline:"middle"})})}),limitRect:g,multiSegment:h,mainSegmentIndex:d,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}else null==(n=this._markerComponent)||n.setAttributes(l)}_computeOptions(){let e,t=this._getRelativeDataView(),i=!0,r=!1,n=this._spec,l=this._relativeSeries,{doXProcess:o,doYProcess:a,doXYY1Process:s,doYXX1Process:h,doXYProcess:d,doCoordinatesProcess:u}=Bi(n);if(d)e=[this._processSpecByDims([{dim:"x",specValue:n.x},{dim:"y",specValue:n.y}]),this._processSpecByDims([{dim:"x",specValue:n.x1},{dim:"y",specValue:n.y1}])];else if(o)e=[this._processSpecByDims([{dim:"x",specValue:n.x}])];else if(a)e=[this._processSpecByDims([{dim:"y",specValue:n.y}])];else if(s)e=[this._processSpecByDims([{dim:"x",specValue:n.x},{dim:"y",specValue:n.y}]),this._processSpecByDims([{dim:"x",specValue:n.x},{dim:"y",specValue:n.y1}])];else if(h)e=[this._processSpecByDims([{dim:"x",specValue:n.x},{dim:"y",specValue:n.y}]),this._processSpecByDims([{dim:"x",specValue:n.x1},{dim:"y",specValue:n.y}])];else if(u){if(e=this._processSpecCoo(n),i=!1,t=new tf.V(this._option.dataSet,{name:`${this.type}_${this.id}_data`}).parse([l.getViewData()],{type:"dataview"}).transform({type:"markerAggregation",options:e}),n.process&&(0,oV.Z)(n.process.x)&&(e=[this._processSpecByDims([{dim:"x",specValue:n.process.x}])],i=!0),n.process&&(0,oV.Z)(n.process.y)&&(e=e=[this._processSpecByDims([{dim:"y",specValue:n.process.y}])],i=!0),n.process&&(0,oV.Z)(n.process.xy)){let{xField:t,yField:i}=l.getSpec();e={fieldX:t,fieldY:i},r=!0}}else i=!1;return{options:e,needAggr:i,needRegr:r,processData:t}}}It.type=sc.markLine,It.coordinateType="cartesian",It.builtInTheme={markLine:Ie},CE();class Ii extends CP{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},CP.defaultAttributes,e)),this.name="arc-segment",this.key="arc-segment",this.isReverseArc=!1}getStartAngle(){let e=this.isReverseArc?this._startAngle+Math.PI/2:this._startAngle-Math.PI/2;return e<0?e+2*Math.PI:e>2*Math.PI?e-2*Math.PI:e}getEndAngle(){let e=this.isReverseArc?this._endAngle-Math.PI/2:this._endAngle+Math.PI/2;return e<0?e+2*Math.PI:e>2*Math.PI?e-2*Math.PI:e}getMainSegmentPoints(){return this._mainSegmentPoints}_computeStartRotate(e){return this.isReverseArc?e+Math.PI:e}_computeEndRotate(e){return this.isReverseArc?e:e+Math.PI}render(){this.removeAllChild(!0),this._reset();let{startSymbol:e,endSymbol:t,lineStyle:i,state:r,visible:n=!0,radius:l,startAngle:o,endAngle:a,center:s}=this.attribute;if(!n)return;this._startAngle=o,this._endAngle=a,this.isReverseArc=o>a;let h={x:s.x+l*Math.cos(this._startAngle),y:s.y+l*Math.sin(this._startAngle)},d={x:s.x+l*Math.cos(this._endAngle),y:s.y+l*Math.sin(this._endAngle)};this._mainSegmentPoints=[h,d];let u=this._renderSymbol(e,this._mainSegmentPoints,"start"),c=this._renderSymbol(t,this._mainSegmentPoints,"end");this.startSymbol=u,this.endSymbol=c;let p=oq.arc(Object.assign({x:s.x,y:s.y,startAngle:o,endAngle:a,innerRadius:l,outerRadius:l},i));p.name=`${this.name}-line`,p.id=this._getNodeId("arc"),(0,d$.Z)(null==r?void 0:r.line)||(p.states=[].concat(r.line)[0]),this.add(p),this.line=p}}Bb(),CE(),g1();class Ir extends BN{markerAnimate(e){Ir._animate&&this._animationConfig&&Ir._animate(this._line,this._label,this._animationConfig,e)}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Ir.defaultAttributes,e)),this.name="markArcLine"}getPointAttrByPosition(e,t){let i,{center:r,radius:n,startAngle:l,endAngle:o}=this.attribute,{refX:a=0,refY:s=0}=t;switch(e){case to.arcInnerStart:i=l;case to.arcOuterStart:i=l;break;case to.arcInnerEnd:i=o;case to.arcOuterEnd:i=o;break;case to.center:case to.arcInnerMiddle:case to.arcOuterMiddle:default:i=(l+o)/2}return{position:{x:r.x+(n+s)*Math.cos(i)+a*Math.cos(i-Math.PI/2),y:r.y+(n+s)*Math.sin(i)+a*Math.sin(i-Math.PI/2)},angle:i}}getTextStyle(e){return BK[e]}getRotateByAngle(e,t){var i;return e-Math.PI/2+(null!=(i=t.refAngle)?i:0)}createSegment(){let{center:e,radius:t,startAngle:i,endAngle:r,startSymbol:n,endSymbol:l,lineStyle:o,state:a}=this.attribute;return new Ii({center:e,radius:t,startAngle:i,endAngle:r,startSymbol:n,endSymbol:l,lineStyle:o,state:{line:(0,ha.Z)({},pK,null==a?void 0:a.line),startSymbol:(0,ha.Z)({},pK,null==a?void 0:a.lineStartSymbol),endSymbol:(0,ha.Z)({},pK,null==a?void 0:a.lineEndSymbol)}})}setLineAttributes(){let{center:e,radius:t,startAngle:i,endAngle:r,startSymbol:n,endSymbol:l,lineStyle:o,state:a}=this.attribute;this._line&&this._line.setAttributes({center:e,radius:t,startAngle:i,endAngle:r,startSymbol:n,endSymbol:l,lineStyle:o,state:{line:(0,ha.Z)({},pK,null==a?void 0:a.line),startSymbol:(0,ha.Z)({},pK,null==a?void 0:a.lineStartSymbol),endSymbol:(0,ha.Z)({},pK,null==a?void 0:a.lineEndSymbol)}})}isValidPoints(){return!0}addMarkLineLabels(e){this._addMarkLabels(e,"mark-common-line-label",Ir.defaultAttributes.label)}updateMarkLineLabels(){this._updateMarkLabels(Ir.defaultAttributes.label)}}Ir.defaultAttributes=BG;class In extends B6{constructor(){super(...arguments),this.type=sc.polarMarkLine,this.name=sc.polarMarkLine,this.coordinateType="polar"}_newMarkLineComponent(e){let{doRadiusProcess:t,doRadAngAng1Process:i}=Bi(this._spec);return t||i?new Ir(e):new BJ(e)}_computePointsAttr(){var e;let t=this._spec,i=this._markerData,r=this._startRelativeSeries,n=this._endRelativeSeries,l=this._relativeSeries,o=null!=(e=t.autoRange)&&e,{doAngleProcess:a,doRadiusProcess:s,doAngRadRad1Process:h,doRadAngAng1Process:d,doRadAngProcess:u,doCoordinatesProcess:c}=Bi(t),p=[],g={},f={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(a||s||h||d||u){let e=P0(i,r,n,l,o);g=(p=1===e.length?e[0]:e.map(e=>e[0]))[0].radius===p[1].radius?{radius:p[0].radius,startAngle:p[0].angle,endAngle:p[1].angle,center:f}:{points:p.map(e=>(0,t9.op)(f,e.radius,e.angle))}}else c&&(g={points:(p=P2(i,l,o)).map(e=>(0,t9.op)(f,e.radius,e.angle))});return g}_computeOptions(){let e,t=this._spec,{doAngleProcess:i,doRadiusProcess:r,doAngRadRad1Process:n,doRadAngAng1Process:l,doRadAngProcess:o,doCoordinatesProcess:a}=Bi(t),s=this._getRelativeDataView();return o?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius1}])]:i?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle}])]:r?e=[this._processSpecByDims([{dim:"radius",specValue:t.radius}])]:n?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius1}])]:l?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius}])]:a&&(e=this._processSpecCoo(t)),{options:e,needAggr:!0,needRegr:!1,processData:s}}}In.type=sc.polarMarkLine,In.coordinateType="polar",In.builtInTheme={polarMarkLine:Ie},dV(),uT(),yF();class Il extends yN{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Il.defaultAttributes,e)),this.name="title"}render(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v;let{textType:_,text:C,subtextType:x,textStyle:w={},subtext:S,subtextStyle:A={},width:k,height:M,minWidth:T,maxWidth:R,minHeight:E,maxHeight:P,align:B,verticalAlign:I,padding:L=0}=this.attribute,F=(0,_6.o)(L),H=this.createOrUpdateChild("title-container",{x:F[3],y:F[0],zIndex:1},"group"),O=null!=(e=w.height)?e:M;if(!1!==this.attribute.visible&&!1!==w.visible){let{width:e,maxHeight:a,maxWidth:s,x:h=0,y:d=0,ellipsis:u=!0,wordBreak:c="break-word",maxWidth:p,lineClamp:g}=w;if("rich"===_||(0,oV.Z)(w.character)){let r=Object.assign({x:h,y:d,width:null!=(t=null!=e?e:k)?t:0,height:null!=O?O:0,ellipsis:null==u||u,wordBreak:null!=c?c:"break-word",maxHeight:null!=a?a:P,maxWidth:null!=s?s:p,textConfig:null!=(i=w.character)?i:C},w);this._mainTitle=H.createOrUpdateChild("mainTitle",r,"richtext")}else if("html"===_){let t=Object.assign({html:Object.assign(Object.assign({dom:C},pX),w),x:h,y:d,width:null!=(r=null!=e?e:k)?r:0,height:null!=O?O:0,ellipsis:u,wordBreak:c,maxHeight:null!=a?a:P,maxWidth:null!=s?s:p,textConfig:[]},w);this._mainTitle=H.createOrUpdateChild("mainTitle",t,"richtext")}else(0,oV.Z)(C)&&(this._mainTitle=H.createOrUpdateChild("mainTitle",Object.assign(Object.assign({text:(0,ri.Z)(C)?C:[C],whiteSpace:"normal"},w),{maxLineWidth:null!=(l=null!=(n=w.maxLineWidth)?n:e)?l:k,heightLimit:null!=(o=w.height)?o:P,lineClamp:g,ellipsis:u,x:h,y:d}),"text"))}let D=this._mainTitle?this._mainTitle.AABBBounds.height():0,z=this._mainTitle?this._mainTitle.AABBBounds.width():0;if(!1!==this.attribute.visible&&!1!==A.visible){let{width:e,height:t,maxWidth:i,maxHeight:r,x:n=0,y:l=0,ellipsis:o=!0,wordBreak:g="break-word",lineClamp:f}=A,m=Math.max(Number.MIN_VALUE,P-D);if("rich"===x||(0,oV.Z)(A.character)){let d=Object.assign({x:n,y:l,width:null!=(a=null!=e?e:k)?a:0,height:null!=(s=null!=t?t:M)?s:0,ellipsis:o,wordBreak:g,maxHeight:null!=r?r:m,maxWidth:null!=i?i:R,textConfig:null!=(h=A.character)?h:S},A);this._subTitle=H.createOrUpdateChild("subTitle",d,"richtext")}else if("html"===x){let a=Object.assign({html:Object.assign(Object.assign({dom:S},pX),A),x:n,y:l,width:null!=(d=null!=e?e:k)?d:0,height:null!=(u=null!=t?t:M)?u:0,ellipsis:o,wordBreak:g,maxHeight:null!=r?r:m,maxWidth:null!=i?i:R,textConfig:[]},A);this._subTitle=H.createOrUpdateChild("subTitle",a,"richtext")}else(0,oV.Z)(S)&&(this._subTitle=H.createOrUpdateChild("subTitle",Object.assign(Object.assign({text:(0,ri.Z)(S)?S:[S],whiteSpace:"normal"},A),{maxLineWidth:null!=(c=A.maxLineWidth)?c:k,heightLimit:null!=(p=A.heightLimit)?p:m,lineClamp:f,ellipsis:o,x:0,y:D}),"text"))}let W=this._subTitle?this._subTitle.AABBBounds.height():0,Z=Math.max(z,this._subTitle?this._subTitle.AABBBounds.width():0),N=D+(null!=(g=A.height)?g:W);if((0,oV.Z)(k)&&(Z=k),(0,oV.Z)(M)&&(N=M),(0,oV.Z)(T)&&Z<T&&(Z=T),(0,oV.Z)(R)&&Z>R&&(Z=R),(0,oV.Z)(E)&&N<E&&(N=E),(0,oV.Z)(P)&&N>P&&(N=P),H.attribute.width=Z,H.attribute.height=N,H.attribute.boundsPadding=F,this._mainTitle){if((0,oV.Z)(B)||(0,oV.Z)(w.align)){let e=w.align?w.align:B,t=null!=(f=w.width)?f:Z;"center"===e?(this._mainTitle.setAttribute("x",t/2),this._mainTitle.setAttribute("textAlign","center")):"right"===e?(this._mainTitle.setAttribute("x",t),this._mainTitle.setAttribute("textAlign","right")):(this._mainTitle.setAttribute("x",0),this._mainTitle.setAttribute("textAlign","left"))}let e=w.verticalAlign?w.verticalAlign:I,t=null!=O?O:this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height();"middle"===e?(this._mainTitle.setAttribute("y",t/2),this._mainTitle.setAttribute("textBaseline","middle")):"bottom"===e?(this._mainTitle.setAttribute("y",t),this._mainTitle.setAttribute("textBaseline","bottom")):(this._mainTitle.setAttribute("y",0),this._mainTitle.setAttribute("textBaseline","top"))}if(this._subTitle){if((0,oV.Z)(B)||(0,oV.Z)(A.align)){let e=A.align?A.align:B,t=null!=(b=null!=(m=A.width)?m:w.width)?b:Z;"center"===e?(this._subTitle.setAttribute("x",t/2),this._subTitle.setAttribute("textAlign","center")):"right"===e?(this._subTitle.setAttribute("x",t),this._subTitle.setAttribute("textAlign","right")):(this._subTitle.setAttribute("x",0),this._subTitle.setAttribute("textAlign","left"))}let e=A.verticalAlign?A.verticalAlign:I,t=this._mainTitle?(0,oV.Z)(O)?this._mainTitle.AABBBounds.y1+Math.max(this._mainTitle.AABBBounds.empty()?0:this._mainTitle.AABBBounds.height(),O):this._mainTitle.AABBBounds.y2:0,i=null!=(v=null!=(y=A.height)?y:M)?v:this._subTitle.AABBBounds.empty()?0:this._subTitle.AABBBounds.height();"middle"===e?(this._subTitle.setAttribute("y",t+i/2),this._subTitle.setAttribute("textBaseline","middle")):"bottom"===e?(this._subTitle.setAttribute("y",t+i),this._subTitle.setAttribute("textBaseline","bottom")):(this._subTitle.setAttribute("y",t),this._subTitle.setAttribute("textBaseline","top"))}}}Il.defaultAttributes={textStyle:{ellipsis:"...",fill:"#333",fontSize:20,fontWeight:"bold",textAlign:"left",textBaseline:"top"},subtextStyle:{ellipsis:"...",fill:"#6F6F6F",fontSize:16,fontWeight:"normal",textAlign:"left",textBaseline:"top"}};class Io extends vJ{get orient(){return this._orient}constructor(e,t){super(e,t),this.type=sc.title,this.specKey=sc.title,this.layoutType="normal",this.layoutZIndex=X.Title,this.layoutLevel=Y.Title,this._orient="top",this._orient=sZ(e.orient)?e.orient:"top"}initLayout(){super.initLayout(),this._layout&&(this._layout.layoutOrient=this._orient)}static getSpecInfo(e){return mX(e,this.specKey,sc.title,e=>!1!==e.visible)}_compareSpec(e,t){let i=super._compareSpec(e,t);return(null==t?void 0:t.orient)===(null==e?void 0:e.orient)&&(null==t?void 0:t.visible)===e.visible||(i.reMake=!0),i.change=!0,i.reRender=!0,i}afterSetLayoutStartPoint(e){(0,sD.Z)(e.x)&&this._titleComponent&&this._titleComponent.setAttribute("x",e.x),(0,sD.Z)(e.y)&&this._titleComponent&&this._titleComponent.setAttribute("y",e.y),super.afterSetLayoutStartPoint(e)}getBoundsInRect(e){let t={};this.setLayoutRect(e);let i=this._getTitleAttrs();this._createOrUpdateTitleComponent(i),t=this._getTitleLayoutRect();let{x:r,y:n}=this.getLayoutStartPoint();return{x1:r,y1:n,x2:r+t.width,y2:n+t.height}}_getTitleLayoutRect(){let e=this._titleComponent.AABBBounds;return{width:this._spec.width?this._spec.width:(0,sD.Z)(e.width())?e.width():0,height:this._spec.height?this._spec.height:(0,sD.Z)(e.height())?e.height():0}}_getTitleAttrs(){var e,t,i,r,n,l,o,a;if(!1===this._spec.visible)return{visible:!1};let s=this.getLayoutRect(),h=s$(this._spec.width,s.width,null,s.width),d=Math.max(Math.min(h,s$(this._spec.maxWidth,s.width,null,s.width),s.width),0),u=Object.assign(Object.assign({},(0,vQ.Z)(this._spec,["padding"])),{textType:null!=(e=this._spec.textType)?e:"text",text:null!=(t=this._spec.text)?t:"",subtextType:null!=(i=this._spec.subtextType)?i:"text",subtext:null!=(r=this._spec.subtext)?r:"",x:null!=(n=this._spec.x)?n:0,y:null!=(l=this._spec.y)?l:0,height:this._spec.height,minWidth:this._spec.minWidth,maxWidth:d,minHeight:this._spec.minHeight,maxHeight:this._spec.maxHeight,padding:this._spec.innerPadding,align:null!=(o=this._spec.align)?o:"left",verticalAlign:null!=(a=this._spec.verticalAlign)?a:"top",textStyle:Object.assign({width:d,maxLineWidth:d},this._spec.textStyle),subtextStyle:Object.assign({maxLineWidth:d},this._spec.subtextStyle)});return(0,oV.Z)(this._spec.width)&&(u.textStyle.width=Math.max(h,s.width),u.subtextStyle.width=u.textStyle.width),u}_createOrUpdateTitleComponent(e){if(this._titleComponent)(0,dN.X)(e,this._cacheAttrs)||this._titleComponent.setAttributes(e);else{let t=this.getContainer(),i=new Il(e);i.name="title",t.add(i),this._titleComponent=i,i.on("*",(e,t)=>this._delegateEvent(i,e,t))}return this._cacheAttrs=e,this._titleComponent}_getNeedClearVRenderComponents(){return[this._titleComponent]}clear(){super.clear(),this._cacheAttrs=null}}function Ia(){Is._animate=BL}Io.type=sc.title,Io.specKey=sc.title,Io.builtInTheme={title:{padding:{top:4,bottom:20},textStyle:{fontSize:{type:"token",key:"l3FontSize"},lineHeight:{type:"token",key:"l3LineHeight"},fill:{type:"palette",key:"primaryFontColor"}},subtextStyle:{fontSize:{type:"token",key:"l4FontSize"},lineHeight:{type:"token",key:"l4LineHeight"},fill:{type:"palette",key:"tertiaryFontColor"}}}},Bb(),Cp(),g1();class Is extends B_{markerAnimate(e){Is._animate&&this._animationConfig&&Is._animate(this._area,this._label,this._animationConfig,e)}getArea(){return this._area}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Is.defaultAttributes,e)),this.name="markArea",this.defaultUpdateAnimation=BD,this.defaultExitAnimation=BW}getPointAttrByPosition(e){let{x1:t,x2:i,y1:r,y2:n}=this._area.AABBBounds,l={x:(t+i)/2,y:(r+n)/2};return(e.includes("left")||e.includes("Left"))&&(l.x=t),(e.includes("right")||e.includes("Right"))&&(l.x=i),(e.includes("top")||e.includes("Top"))&&(l.y=r),(e.includes("bottom")||e.includes("Bottom"))&&(l.y=n),l}setLabelPos(e,t){var i;if(this._area){let r=null!=(i=t.position)?i:"middle",n=this.getPointAttrByPosition(r);if(e.setAttributes(Object.assign(Object.assign({},n),{textStyle:Object.assign(Object.assign({},BX[r]),t.textStyle)})),this.attribute.limitRect&&t.confine){let{x:t,y:i,width:r,height:n}=this.attribute.limitRect;Bv(e,{x1:t,y1:i,x2:t+r,y2:i+n})}}}initMarker(e){let{points:t,areaStyle:i,state:r}=this.attribute,n=oq.polygon(Object.assign({points:t},i));n.states=(0,ha.Z)({},pK,null==r?void 0:r.area),n.name="mark-area-polygon",this._area=n,e.add(n),this._addMarkLabels(e,"mark-area-label",Is.defaultAttributes.label)}updateMarker(){let{points:e,areaStyle:t,state:i}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({points:e},t)),this._area.states=(0,ha.Z)({},pK,null==i?void 0:i.area)),this._updateMarkLabels(Is.defaultAttributes.label)}isValidPoints(){let{points:e}=this.attribute;if(!e||e.length<3)return!1;let t=!0;return e.forEach(e=>{(0,sD.Z)(e.x)&&(0,sD.Z)(e.y)||(t=!1)}),t}}Is.defaultAttributes=BV,(0,gH.jB)(Is,BZ);class Ih extends B4{constructor(){super(...arguments),this.specKey="markArea",this.layoutZIndex=X.MarkArea}static _getMarkerCoordinateType(e){let{doAngleProcess:t,doRadiusProcess:i,doRadAngProcess:r}=Br(e);return"polar"===e.coordinateType||t||i||r?"polar":"cartesian"}_createMarkerComponent(){var e,t,i,r,n,l,o,a;let s=(0,ag.IX)(null!=(e=this._spec.label)?e:{}),h={zIndex:this.layoutZIndex,interactive:null==(t=this._spec.interactive)||t,hover:null==(i=this._spec.interactive)||i,select:null==(r=this._spec.interactive)||r,points:[{x:0,y:0}],center:{x:0,y:0},innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,areaStyle:P7(vA(null==(n=this._spec.area)?void 0:n.style),this._markerData,this._markAttributeContext),clipInRange:null!=(l=this._spec.clip)&&l,label:s.map(e=>P6(e,this._markerData,this._markAttributeContext)),state:{area:P8(null==(o=this._spec.area)?void 0:o.state,this._markerData,this._markAttributeContext),label:s.map(e=>P8(e.state,this._markerData,this._markAttributeContext)),labelBackground:s.map(e=>{var t;return P8(null==(t=e.labelBackground)?void 0:t.state,this._markerData,this._markAttributeContext)})},animation:null!=(a=this._spec.animation)&&a,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate};return this._newMarkAreaComponent(h)}_markerLayout(){var e;let t,i=this._spec,r=this._markerData,n=this._startRelativeSeries,l=this._endRelativeSeries,o=this._relativeSeries,a=this._computePointsAttr(),s=this._getRelativeDataView().latestData,h=r?r.latestData[0]&&r.latestData[0].latestData?r.latestData[0].latestData:r.latestData:s;if(i.clip||(0,ag.IX)(i.label).some(e=>null==e?void 0:e.confine)){let{minX:e,maxX:i,minY:r,maxY:a}=P5([n.getRegion(),l.getRegion(),o.getRegion()]);t={x:e,y:r,width:i-e,height:a-r}}if(this._markerComponent){let i=(0,ag.IX)(null==(e=this._markerComponent.attribute)?void 0:e.label),r=(0,ag.IX)(this._spec.label);this._markerComponent.setAttributes(Object.assign(Object.assign({},a),{label:i.map((e,t)=>{let i=r[t]||{};return Object.assign(Object.assign({},e),{text:i.formatMethod?i.formatMethod(h,s):null==e?void 0:e.text})}),limitRect:t,dx:this._layoutOffsetX,dy:this._layoutOffsetY}))}}_initDataView(){let{doXProcess:e,doYProcess:t,doXYProcess:i,doAngleProcess:r,doRadiusProcess:n,doRadAngProcess:l,doCoordinatesProcess:o}=Br(this._spec);if(!(e||t||i||r||n||l||o))return null;this._initCommonDataView()}}Ih.specKey="markArea";let Id={area:{style:{fill:{type:"palette",key:"axisDomainColor",a:.25}}},label:B8()};class Iu extends Ih{constructor(){super(...arguments),this.type=sc.markArea,this.name=sc.markArea,this.coordinateType="cartesian"}_newMarkAreaComponent(e){return new Is(e)}_computePointsAttr(){var e,t;let i=this._spec,r=this._markerData,n=this._startRelativeSeries,l=this._endRelativeSeries,o=this._relativeSeries,{doXProcess:a,doYProcess:s,doXYProcess:h,doCoordinatesProcess:d}=Br(i),u=(0,oV.Z)(i.positions),c=null!=(e=i.autoRange)&&e,p=null!=(t=i.includeFullBand)&&t,g=[],f=[];if(h){let[e,t]=PJ(r,n,l,o,c,p);e&&e.length&&t&&t.length&&(g=[{x:e[0].x,y:t[0].y},e[0],{x:t[0].x,y:e[0].y},t[0]])}else if(a||s){let[e,t]=PJ(r,n,l,o,c,p);e&&e.length&&t&&t.length&&(g=[...e,t[1],t[0]])}else d?g=P1(r,o,c,i.coordinatesOffset):u&&(g=P4(i.positions,o,i.regionRelative));return{points:g}}_computeOptions(){let e,t=this._spec,{doXProcess:i,doYProcess:r,doXYProcess:n,doCoordinatesProcess:l}=Br(t);return n?e=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"x",specValue:t.x1},{dim:"y",specValue:t.y1}])]:i?e=[this._processSpecByDims([{dim:"x",specValue:t.x}]),this._processSpecByDims([{dim:"x",specValue:t.x1}])]:r?e=[this._processSpecByDims([{dim:"y",specValue:t.y}]),this._processSpecByDims([{dim:"y",specValue:t.y1}])]:l&&(e=this._processSpecCoo(t)),{options:e}}}Iu.type=sc.markArea,Iu.coordinateType="cartesian",Iu.builtInTheme={markArea:Id},Bb(),CT(),g1();class Ic extends B_{markerAnimate(e){Ic._animate&&this._animationConfig&&Ic._animate(this._area,this._label,this._animationConfig,e)}getArea(){return this._area}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Ic.defaultAttributes,e)),this.name="markArcArea",this.defaultUpdateAnimation=BD,this.defaultExitAnimation=BW}getPointAttrByPosition(e,t){let i,r,{center:n,innerRadius:l,outerRadius:o,startAngle:a,endAngle:s}=this.attribute,{refX:h=0,refY:d=0}=t;switch(e){case to.center:i=(l+o)/2,r=(a+s)/2;break;case to.arcInnerStart:i=l,r=a;break;case to.arcOuterStart:i=o,r=a;break;case to.arcInnerEnd:i=l,r=s;break;case to.arcOuterEnd:i=o,r=s;break;case to.arcInnerMiddle:i=l,r=(a+s)/2;break;case to.arcOuterMiddle:i=o,r=(a+s)/2;break;default:i=l,r=(a+s)/2}return{position:{x:n.x+(i+d)*Math.cos(r)+h*Math.cos(r-Math.PI/2),y:n.y+(i+d)*Math.sin(r)+h*Math.sin(r-Math.PI/2)},angle:r}}setLabelPos(e,t){var i;if(this._area){let{position:r="arcInnerMiddle",autoRotate:n}=t,l=this.getPointAttrByPosition(r,t);if(e.setAttributes(Object.assign(Object.assign({},l.position),{angle:n?l.angle-Math.PI/2+(null!=(i=t.refAngle)?i:0):0,textStyle:Object.assign(Object.assign({},BK[r]),t.textStyle)})),this.attribute.limitRect&&t.confine){let{x:t,y:i,width:r,height:n}=this.attribute.limitRect;Bv(e,{x1:t,y1:i,x2:t+r,y2:i+n})}}}initMarker(e){let{center:t,innerRadius:i,outerRadius:r,startAngle:n,endAngle:l,areaStyle:o,state:a}=this.attribute,s=oq.arc(Object.assign({x:t.x,y:t.y,innerRadius:i,outerRadius:r,startAngle:n,endAngle:l},o));s.states=(0,ha.Z)({},pK,null==a?void 0:a.area),s.name="polar-mark-area-area",this._area=s,e.add(s),this._addMarkLabels(e,"mark-area-label",Ic.defaultAttributes.label)}updateMarker(){let{center:e,innerRadius:t,outerRadius:i,startAngle:r,endAngle:n,areaStyle:l,label:o,state:a}=this.attribute;this._area&&(this._area.setAttributes(Object.assign({x:e.x,y:e.y,innerRadius:t,outerRadius:i,startAngle:r,endAngle:n},l)),this._area.states=(0,ha.Z)({},pK,null==a?void 0:a.area)),this._updateMarkLabels(Ic.defaultAttributes.label)}isValidPoints(){return!0}}Ic.defaultAttributes=BU,(0,gH.jB)(Ic,BZ);class Ip extends Ih{constructor(){super(...arguments),this.type=sc.polarMarkArea,this.name=sc.polarMarkArea,this.coordinateType="polar"}_newMarkAreaComponent(e){let{doRadiusProcess:t,doAngleProcess:i,doRadAngProcess:r}=Br(this._spec);return i||t||r?new Ic(e):new Is(e)}_computePointsAttr(){var e;let t=this._spec,i=this._markerData,r=this._startRelativeSeries,n=this._endRelativeSeries,l=this._relativeSeries,{doAngleProcess:o,doRadiusProcess:a,doRadAngProcess:s,doCoordinatesProcess:h}=Br(t),d=null!=(e=t.autoRange)&&e,u={},c={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};if(o||a||s){let e=P0(i,r,n,l,d);s?u={innerRadius:e[0][0].radius,outerRadius:e[1][0].radius,startAngle:e[0][0].angle,endAngle:e[1][0].angle,center:c}:o?u={innerRadius:0,outerRadius:Math.abs(e[0][0].radius),startAngle:e[0][1].angle,endAngle:e[1][1].angle,center:c}:a&&(u={innerRadius:e[0][0].radius,outerRadius:e[1][0].radius,startAngle:e[0][0].angle,endAngle:e[1][1].angle,center:c})}else h&&(u={points:P2(i,l,d).map(e=>(0,t9.op)(c,e.radius,e.angle))});return u}_computeOptions(){let e,t=this._spec,{doAngleProcess:i,doRadiusProcess:r,doRadAngProcess:n,doCoordinatesProcess:l}=Br(t);return n?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius1}])]:i?e=[this._processSpecByDims([{dim:"angle",specValue:t.angle},{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"angle",specValue:t.angle1},{dim:"radius",specValue:t.radius}])]:r?e=[this._processSpecByDims([{dim:"radius",specValue:t.radius}]),this._processSpecByDims([{dim:"radius",specValue:t.radius1}])]:l&&(e=this._processSpecCoo(t)),{options:e}}}Ip.type=sc.polarMarkArea,Ip.coordinateType="polar",Ip.builtInTheme={polarMarkArea:Id};class Ig extends a0{constructor(e){super(e)}}(eQ=ts||(ts={})).OnPlay="onPlay",eQ.OnPause="onPause",eQ.OnForward="onForward",eQ.OnBackward="onBackward",(e0=th||(th={})).Start="start",e0.Pause="pause",e0.Forward="forward",e0.Backward="backward";class If extends yN{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},If.defaultAttributes,e)),this._isPaused=!0,this.updateAttributes=()=>{this._startAttr={style:Object.assign(Object.assign(Object.assign({symbolType:"M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -73.1429 161.4994 a 48.7619 48.7619 0 0 1 25.9901 7.5093 l 201.7524 127.1223 a 48.7619 48.7619 0 0 1 0.3657 82.2613 l -201.7524 129.6335 A 48.7619 48.7619 0 0 1 292.5952 540.1838 v -256.7314 a 48.7619 48.7619 0 0 1 48.7619 -48.7619 z m 24.381 92.9402 v 167.9116 l 131.9497 -84.7726 L 365.7381 327.6063 z"},If.defaultControllerAttr),{visible:this.attribute.start.visible}),this.attribute.start.style)},this._pauseAttr={style:Object.assign(Object.assign(Object.assign({symbolType:"M 414.5 0.0238 c 228.9128 0 414.4762 185.5634 414.4762 414.4762 s -185.5634 414.4762 -414.4762 414.4762 S 0.0238 643.4128 0.0238 414.5 S 185.5872 0.0238 414.5 0.0238 z m 0 73.1429 C 225.9865 73.1667 73.1667 225.9865 73.1667 414.5 s 152.8198 341.3333 341.3333 341.3333 s 341.3333 -152.8198 341.3333 -341.3333 S 603.0135 73.1667 414.5 73.1667 z m -48.7619 195.0476 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z m 158.4762 0 v 316.9524 h -73.1429 V 268.2143 h 73.1429 z"},If.defaultControllerAttr),{visible:this.attribute.pause.visible}),this.attribute.pause.style)},this._forwardAttr={style:Object.assign(Object.assign(Object.assign({},If.defaultControllerAttr),{visible:this.attribute.forward.visible}),this.attribute.forward.style)},this._backwardAttr={style:Object.assign(Object.assign(Object.assign({},If.defaultControllerAttr),{visible:this.attribute.backward.visible}),this.attribute.backward.style)},this.updateLayout()},this.updateLayout=()=>{var e,t,i,r;this._layout=this.attribute.layout,"horizontal"===this._layout?(this._backwardAttr.style.symbolType=null!=(e=this._backwardAttr.style.symbolType)?e:"M 521.29 734.276 L 230.929 448.019 L 521.29 161.762 c 37.685 -37.153 38.003 -97.625 0.707 -134.384 c -37.297 -36.758 -98.646 -36.435 -136.331 0.718 l -357.43 352.378 c -0.155 0.153 -0.297 0.314 -0.451 0.468 c -0.084 0.082 -0.172 0.157 -0.256 0.239 c -18.357 18.092 -27.581 41.929 -27.743 65.902 c -0.004 0.311 -0.017 0.623 -0.018 0.934 c 0.001 0.316 0.014 0.632 0.018 0.948 c 0.165 23.97 9.389 47.803 27.743 65.892 c 0.083 0.082 0.171 0.157 0.255 0.239 c 0.154 0.154 0.296 0.315 0.452 0.468 l 357.43 352.378 c 37.685 37.153 99.034 37.476 136.331 0.718 c 37.297 -36.758 36.979 -97.231 -0.707 -134.384 z",this._forwardAttr.style.symbolType=null!=(t=this._forwardAttr.style.symbolType)?t:"M 30 163 L 320.361 449.257 L 30 735.514 c -37.685 37.153 -38.003 97.625 -0.707 134.384 c 37.297 36.758 98.646 36.435 136.331 -0.718 l 357.43 -352.378 c 0.155 -0.153 0.297 -0.314 0.451 -0.468 c 0.084 -0.082 0.172 -0.157 0.256 -0.239 c 18.357 -18.092 27.581 -41.929 27.743 -65.902 c 0.004 -0.311 0.017 -0.623 0.018 -0.934 c -0.001 -0.316 -0.014 -0.632 -0.018 -0.948 c -0.165 -23.97 -9.389 -47.803 -27.743 -65.892 c -0.083 -0.082 -0.171 -0.157 -0.255 -0.239 c -0.154 -0.154 -0.296 -0.315 -0.452 -0.468 l -357.43 -352.378 c -37.685 -37.153 -99.034 -37.476 -136.331 -0.718 c -37.297 36.758 -36.979 97.231 0.707 134.384 z"):"vertical"===this._layout&&(this._backwardAttr.style.symbolType=null!=(i=this._backwardAttr.style.symbolType)?i:"m 161.724 521.29 l 286.257 -290.361 l 286.257 290.361 c 37.153 37.685 97.625 38.003 134.384 0.707 c 36.758 -37.297 36.435 -98.646 -0.718 -136.331 l -352.378 -357.43 c -0.153 -0.155 -0.314 -0.297 -0.468 -0.451 c -0.082 -0.084 -0.157 -0.172 -0.239 -0.256 c -18.092 -18.357 -41.929 -27.581 -65.902 -27.743 c -0.311 -0.004 -0.623 -0.017 -0.934 -0.018 c -0.316 0.001 -0.632 0.014 -0.948 0.018 c -23.97 0.165 -47.803 9.389 -65.892 27.743 c -0.082 0.083 -0.157 0.171 -0.239 0.255 c -0.154 0.154 -0.315 0.296 -0.468 0.452 l -352.378 357.43 c -37.153 37.685 -37.476 99.034 -0.718 136.331 c 36.758 37.297 97.231 36.979 134.384 -0.707 z",this._forwardAttr.style.symbolType=null!=(r=this._forwardAttr.style.symbolType)?r:"M 734.276 28.71 L 448.019 319.071 L 161.762 28.71 c -37.153 -37.685 -97.625 -38.003 -134.384 -0.707 c -36.758 37.297 -36.435 98.646 0.718 136.331 l 352.378 357.43 c 0.153 0.155 0.314 0.297 0.468 0.451 c 0.082 0.084 0.157 0.172 0.239 0.256 c 18.092 18.357 41.929 27.581 65.902 27.743 c 0.311 0.004 0.623 0.017 0.934 0.018 c 0.316 -0.001 0.632 -0.014 0.948 -0.018 c 23.97 -0.165 47.803 -9.389 65.892 -27.743 c 0.082 -0.083 0.157 -0.171 0.239 -0.255 c 0.154 -0.154 0.315 -0.296 0.468 -0.452 l 352.378 -357.43 c 37.153 -37.685 37.476 -99.034 0.718 -136.331 c -36.758 -37.297 -97.231 -36.979 -134.384 0.707 z")},this._initPlay=()=>{(0,r5.Z)(this._playController)&&(this._playController=new Ig(Object.assign({},this._startAttr.style)),this.add(this._playController))},this._initBackward=()=>{(0,r5.Z)(this._backwardController)&&(this._backwardController=new Ig(Object.assign({},this._backwardAttr.style)),this.add(this._backwardController))},this._initForward=()=>{(0,r5.Z)(this._forwardController)&&(this._forwardController=new Ig(Object.assign({},this._forwardAttr.style)),this.add(this._forwardController))},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._playController.addEventListener("pointerdown",e=>{e.stopPropagation(),!0===this._isPaused?this.play():this.pause()}),this._backwardController.addEventListener("pointerdown",e=>{e.stopPropagation(),this.backward()}),this._forwardController.addEventListener("pointerdown",e=>{e.stopPropagation(),this.forward()}))},this.renderPlay=()=>{this._isPaused?this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._startAttr.style)):this._playController.setAttributes(Object.assign({symbolType:this._playController.getComputedAttribute("symbolType")},this._pauseAttr.style))},this.renderBackward=()=>{this._backwardController.setAttributes(this._backwardAttr.style)},this.renderForward=()=>{this._forwardController.setAttributes(this._forwardAttr.style)},this.play=()=>{this._dispatchEvent(ts.OnPlay)},this.pause=()=>{this._dispatchEvent(ts.OnPause)},this.forward=()=>{this._dispatchEvent(ts.OnForward)},this.backward=()=>{this._dispatchEvent(ts.OnBackward)},this.togglePlay=()=>{this._playController.setAttributes(this._startAttr.style),this._isPaused=!0},this.togglePause=()=>{this._playController.setAttributes(this._pauseAttr.style),this._isPaused=!1},this.updateAttributes(),this._initPlay(),this._initBackward(),this._initForward(),this._initEvents()}render(){this.updateAttributes(),this.renderPlay(),this.renderBackward(),this.renderForward()}}If.defaultControllerAttr={visible:!0,x:0,y:0,size:20,fill:"#91caff",pickMode:"imprecise",cursor:"pointer"},If.defaultAttributes={[th.Start]:{},[th.Pause]:{},[th.Backward]:{},[th.Forward]:{}};let Im={visible:!0,style:{x:0,y:0,dx:0,dy:0,size:20},order:0,space:10},Ib=[200,10];(e1=td||(td={})).Default="default",e1.Reverse="reverse";let Iy=({direction:e,maxIndex:t,dataIndex:i})=>e===td.Default&&i===t,Iv=({direction:e,minIndex:t,dataIndex:i})=>e===td.Reverse&&i===t,I_=({direction:e,maxIndex:t,minIndex:i,dataIndex:r})=>Iy({direction:e,maxIndex:t,dataIndex:r})||Iv({direction:e,minIndex:i,dataIndex:r}),IC=({direction:e,minIndex:t,dataIndex:i})=>e===td.Default&&i===t,Ix=({direction:e,maxIndex:t,dataIndex:i})=>e===td.Reverse&&i===t,Iw=({direction:e,maxIndex:t,minIndex:i,dataIndex:r})=>IC({direction:e,minIndex:i,dataIndex:r})||Ix({direction:e,maxIndex:t,dataIndex:r}),IS=e=>"top"===e||"bottom"===e,IA=(e,t,i,r)=>"default"===e?Math.min(t+1,r):Math.max(t-1,i);class Ik extends yN{getMinIndex(){return this._minIndex}getMaxIndex(){return this._maxIndex}getDataIndex(){return this._dataIndex}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Ik.defaultAttributes,e)),this._data=[],this._dataIndex=0,this._layoutInfo={},this._updateSliderAttrs=()=>{var e,t;let i;(0,sD.Z)(this._handlerStyle.size)?i=this._handlerStyle.size:this._handlerStyle.size&&this._handlerStyle.size.length&&(i=(0,t0.Fp)(this._handlerStyle.size[0],this._handlerStyle.size[1]));let r={visible:this._sliderVisible,min:this._minIndex,max:this._maxIndex,value:this._dataIndex,railWidth:this._railStyle.width,railHeight:this._railStyle.height,railStyle:this._railStyle,trackStyle:this._trackStyle,handlerSize:(0,sD.Z)(i)?i:void 0,handlerStyle:this._handlerStyle,dy:this.attribute.slider.dy,dx:this.attribute.slider.dx,slidable:!0,range:!1,handlerText:{visible:!1},startText:{visible:!1},endText:{visible:!1},disableTriggerEvent:this.attribute.disableTriggerEvent};if(IS(this._orient)){let t=Math.max(0,this._layoutInfo.slider.size),i=null!=(e=this._railStyle.height)?e:Ib["1"];r.layout="horizontal",r.railHeight=i,r.railWidth=t,r.x=this._layoutInfo.slider.x,r.y=this._layoutInfo.slider.y}else{let e=Math.max(0,this._layoutInfo.slider.size),i=null!=(t=this._railStyle.width)?t:Ib["1"];r.layout="vertical",r.railWidth=i,r.railHeight=e,r.x=this._layoutInfo.slider.x,r.y=this._layoutInfo.slider.y}return r},this._initSlider=()=>{let e=this._updateSliderAttrs();this._slider=new ED(e),this._sliderVisible&&this.add(this._slider)},this._updateControllerAttrs=()=>{let e={start:this._start,pause:this._pause,forward:this._forward,backward:this._backward,disableTriggerEvent:this.attribute.disableTriggerEvent};return e.layout=IS(this._orient)?"horizontal":"vertical",e.start=Object.assign(Object.assign({},e.start),{style:Object.assign(Object.assign({},e.start.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),e.pause=Object.assign(Object.assign({},e.pause),{style:Object.assign(Object.assign({},e.pause.style),{x:this._layoutInfo.start.x,y:this._layoutInfo.start.y})}),e.backward=Object.assign(Object.assign({},e.backward),{style:Object.assign(Object.assign({},e.backward.style),{x:this._layoutInfo.backward.x,y:this._layoutInfo.backward.y})}),e.forward=Object.assign(Object.assign({},e.forward),{style:Object.assign(Object.assign({},e.forward.style),{x:this._layoutInfo.forward.x,y:this._layoutInfo.forward.y})}),e},this._initController=()=>{let e=this._updateControllerAttrs();this._controller=new If(e),this._controllerVisible&&this.add(this._controller)},this._initAttributes(),this._initDataIndex(),this._initLayoutInfo(),this._initController(),this._initSlider()}_initAttributes(){this._size=this.attribute.size,this._orient=this.attribute.orient,this._data=this.attribute.data,this._minIndex=0,this._maxIndex=this._data.length-1;let{slider:e={},controller:t={}}=this.attribute;this._sliderVisible=e.visible,this._railStyle=Object.assign({},e.railStyle),this._trackStyle=Object.assign({},e.trackStyle),this._handlerStyle=Object.assign({},e.handlerStyle),this._controllerVisible=t.visible,this._start=Object.assign({},t.start),this._pause=Object.assign({},t.pause),this._forward=Object.assign({},t.forward),this._backward=Object.assign({},t.backward)}_initDataIndex(){var e;this._dataIndex=null!=(e=this.attribute.dataIndex)?e:0}_initLayoutInfo(){var e,t,i;let r=[this._start,this._backward,this._forward].sort((e,t)=>e.order-t.order),n=r.filter(e=>"end"!==e.position),l=r.filter(e=>"end"===e.position),o=null!=(e=IS(this._orient)?this._railStyle.height:this._railStyle.width)?e:Ib["1"],a=r.reduce((e,t)=>{let i=t.style.size,r=(0,nw.Z)(i)?i:(0,t0.Fp)(i[0],i[1]);return e+t.space+r},0),s=this._sliderVisible?(IS(this._orient)?null==(t=this._size)?void 0:t.width:null==(i=this._size)?void 0:i.height)-a:0,h=s-this.attribute.slider.space,d=n.reduce((e,t)=>{let{key:i,space:r,style:{size:n}}=t,l=(0,nw.Z)(n)?n:(0,t0.Fp)(n[0],n[1]);return this._layoutInfo[i]=Object.assign(Object.assign({},this._layoutInfo[i]),{size:l,x:IS(this._orient)?e+r:(this._size.width-l)/2,y:IS(this._orient)?(this._size.height-l)/2:e+r}),e+r+l},0);this._layoutInfo.slider=Object.assign(Object.assign({},this._layoutInfo.slider),{size:h,x:IS(this._orient)?d+this.attribute.slider.space:(this._size.width-o)/2,y:IS(this._orient)?(this._size.height-o)/2:d+this.attribute.slider.space}),l.reduce((e,t)=>{let{key:i,space:r,style:{size:n}}=t,l=(0,nw.Z)(n)?n:(0,t0.Fp)(n[0],n[1]);return this._layoutInfo[i]=Object.assign(Object.assign({},this._layoutInfo[i]),{size:l,x:IS(this._orient)?e+r:(this._size.width-l)/2,y:IS(this._orient)?(this._size.height-l)/2:e+r}),e+r+l},d+s)}render(){this._initLayoutInfo(),this.renderSlider(),this.renderController()}renderSlider(){let e=this._updateSliderAttrs();this._slider.setAttributes(e)}renderController(){let e=this._updateControllerAttrs();this._controller.setAttributes(e)}dispatchCustomEvent(e,t){this._dispatchEvent(e,{eventType:e,index:t,value:this._data[t]})}}function IM(){ES(),dV(),uN()}Ik.defaultAttributes={visible:!0,data:[],interval:1e3,orient:"bottom",align:"center",size:{height:20,width:300},slider:{visible:!0,space:10,dx:0,dy:0,railStyle:{cornerRadius:5},trackStyle:{},handlerStyle:{}},controller:{visible:!0,start:Object.assign(Object.assign({},Im),{key:"start",position:"start",space:0}),pause:Object.assign(Object.assign({},Im),{key:"pause",position:"start"}),forward:Object.assign(Object.assign({},Im),{key:"forward",position:"end"}),backward:Object.assign(Object.assign({},Im),{key:"backward",position:"start"})}},(e2=tu||(tu={})).change="change",e2.play="play",e2.pause="pause",e2.backward="backward",e2.forward="forward",e2.end="end",e2.OnChange="change",e2.OnPlay="play",e2.OnPause="pause",e2.OnBackward="backward",e2.OnForward="forward",e2.OnEnd="end",IM();class IT extends Ik{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},e)),this._activeIndex=-1,this._isReachEnd=!1,this._initAttributes=()=>{var e,t,i;super._initAttributes(),this._alternate=null!=(e=this.attribute.alternate)&&e,this._interval=null!=(t=this.attribute.interval)?t:1e3,this._direction=null!=(i=this.attribute.direction)?i:td.Default},this._initDataIndex=()=>{var e;this._dataIndex=(0,r5.Z)(this.attribute.dataIndex)?"default"===this._direction?this._minIndex:this._maxIndex:null!=(e=this.attribute.dataIndex)?e:0,this._slider.setAttribute("value",this._dataIndex)},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(ts.OnPlay,e=>{e.stopPropagation(),this.play()}),this._controller.addEventListener(ts.OnPause,e=>{e.stopPropagation(),this.pause()}),this._controller.addEventListener(ts.OnForward,e=>{e.stopPropagation(),this.forward()}),this._controller.addEventListener(ts.OnBackward,e=>{e.stopPropagation(),this.backward()}),this._slider.addEventListener("change",e=>{let t=Math.floor(e.detail.value)+.5;this._dataIndex=e.detail.value>=t?Math.ceil(e.detail.value):Math.floor(e.detail.value),this._slider.setValue(this._dataIndex),this.dispatchCustomEvent(tu.change)}))},this.play=()=>{this._isPlaying||1!==this._data.length&&(this._controller.togglePause(),this._isPlaying=!0,(I_({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction})||Iw({dataIndex:this._dataIndex,maxIndex:this._maxIndex,minIndex:this._minIndex,direction:this._direction}))&&(this._direction===td.Default?this._updateDataIndex(this._minIndex):this._updateDataIndex(this._maxIndex)),this.dispatchCustomEvent(tu.play),this._isReachEnd=!1,this._tickTime=Date.now(),this._rafId=sI.getRequestAnimationFrame()(this._play.bind(this,!0)))},this._play=e=>{let t=Date.now();if(this._isReachEnd&&t-this._tickTime>=this._interval)return this._isReachEnd=!1,void this._playEnd();e&&this._activeIndex!==this._dataIndex?(this.dispatchCustomEvent(tu.change),this._activeIndex=this._dataIndex):t-this._tickTime>=this._interval&&(this._tickTime=t,this._updateDataIndex(IA(this._direction,this._dataIndex,this._minIndex,this._maxIndex)),this._activeIndex=this._dataIndex,this.dispatchCustomEvent(tu.change)),("default"===this._direction&&this._dataIndex>=this._maxIndex||"reverse"===this._direction&&this._dataIndex<=this._minIndex)&&(this._isReachEnd=!0),this._rafId=sI.getRequestAnimationFrame()(this._play.bind(this,!1))},this._updateDataIndex=e=>{this._dataIndex=e,this._slider.setValue(this._dataIndex)},this._playEnd=()=>{this._isPlaying=!1,this._controller.togglePlay(),sI.getCancelAnimationFrame()(this._rafId),this._activeIndex=-1,this.dispatchCustomEvent(tu.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,sI.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(tu.pause))},this.backward=()=>{let e,{loop:t=!1}=this.attribute;e=t?this._dataIndex-1<this._minIndex?this._maxIndex:this._dataIndex-1:Math.max(this._dataIndex-1,this._minIndex),this._updateDataIndex(e),this.dispatchCustomEvent(tu.change),this.dispatchCustomEvent(tu.backward)},this.forward=()=>{let e,{loop:t=!1}=this.attribute;e=t?this._dataIndex+1>this._maxIndex?this._minIndex:this._dataIndex+1:Math.min(this._dataIndex+1,this._maxIndex),this._updateDataIndex(e),this.dispatchCustomEvent(tu.change),this.dispatchCustomEvent(tu.forward)},this._initAttributes(),this._initDataIndex(),this._initEvents()}setAttributes(e,t){super.setAttributes(e,t),this._initAttributes()}dispatchCustomEvent(e){super.dispatchCustomEvent(e,this._dataIndex)}}IM();class IR extends Ik{constructor(e){super(e),this._isPlaying=!1,this._startTime=Date.now(),this._initAttributes=()=>{var e;super._initAttributes(),this._maxIndex=this._data.length,this._slider.setAttribute("max",this._maxIndex),this._isPlaying=!1,this._elapsed=0,this._interval=null!=(e=this.attribute.interval)?e:1e3;let t=this._data.length;this.attribute.totalDuration&&this._data.length?(this._totalDuration=this.attribute.totalDuration,this._interval=this._totalDuration/(null!=t?t:1)):(this._totalDuration=this._interval*t,this._interval=this.attribute.interval)},this._initDataIndex=()=>{var e;this._dataIndex=null!=(e=this.attribute.dataIndex)?e:this._minIndex},this._initEvents=()=>{this.attribute.disableTriggerEvent||(this._controller.addEventListener(ts.OnPlay,e=>{e.stopPropagation(),this.play()}),this._controller.addEventListener(ts.OnPause,e=>{e.stopPropagation(),this.pause()}),this._controller.addEventListener(ts.OnForward,e=>{e.stopPropagation(),this.forward()}),this._controller.addEventListener(ts.OnBackward,e=>{e.stopPropagation(),this.backward()}),this._slider.addEventListener("change",e=>{var t;e.stopPropagation();let i=null==(t=e.detail)?void 0:t.value,r=i/this._maxIndex;this._elapsed=r*this._totalDuration,this._startTime=Date.now()-this._elapsed,this._dispatchChange(i)}))},this._getSliderValue=()=>Math.min(this._elapsed/this._totalDuration*this._maxIndex,this._maxIndex),this._updateSlider=()=>{let e=this._getSliderValue();this._dataIndex=Math.floor(e),this._slider.setValue(Math.min(e,this._maxIndex)),this._dispatchChange(Math.floor(e))},this._dispatchChange=e=>{let t=Math.floor(e);t!==this._activeIndex&&(this._dataIndex=t,this._activeIndex=t,t!==this._maxIndex&&this.dispatchCustomEvent(tu.change))},this.play=()=>{var e,t,i,r;return e=this,t=void 0,i=void 0,r=function*(){this._isPlaying||(this._controller.togglePause(),this._isPlaying=!0,this._elapsed>=this._totalDuration&&(this._elapsed=0),this._startTime=Date.now()-this._elapsed,this.dispatchCustomEvent(tu.play),this._rafId=sI.getRequestAnimationFrame()(this._play.bind(this)))},new(i||(i=Promise))(function(n,l){function o(e){try{s(r.next(e))}catch(e){l(e)}}function a(e){try{s(r.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}s((r=r.apply(e,t||[])).next())})},this._play=()=>{this._elapsed=Date.now()-this._startTime;let e=this._getSliderValue();this._updateSlider(),e>=this._maxIndex?this._playEnd():this._rafId=sI.getRequestAnimationFrame()(this._play.bind(this))},this._playEnd=()=>{this._isPlaying=!1,sI.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(tu.end)},this.pause=()=>{this._isPlaying&&(this._isPlaying=!1,this._elapsed=Date.now()-this._startTime,sI.getCancelAnimationFrame()(this._rafId),this._controller.togglePlay(),this.dispatchCustomEvent(tu.pause))},this.backward=()=>{let e=Date.now(),t=+this._interval,i=this._elapsed-t;i<=0?(this._elapsed=0,this._startTime=e):(this._elapsed=i,this._startTime=this._startTime+this._interval),this._updateSlider(),this.dispatchCustomEvent(tu.backward)},this.forward=()=>{let e=Date.now(),t=+this._interval,i=this._elapsed+t;i>=this._totalDuration?(this._startTime=e-this._totalDuration,this._elapsed=this._totalDuration):(this._startTime=this._startTime-t,this._elapsed=i),this._updateSlider(),this.dispatchCustomEvent(tu.forward)},this._initAttributes(),this._initDataIndex(),this._initEvents()}dispatchCustomEvent(e){super.dispatchCustomEvent(e,this._dataIndex)}render(){super.render()}}let IE=e=>vA(Object.assign({},e)),IP=e=>vA(Object.assign({},e)),IB=e=>Object.assign(Object.assign({},e),{style:Object.assign({},vA(e.style))}),II=e=>{var t,i,r,n,l,o,a,s,h,d,u,c,p,g,f;let m=IE(null!=(i=null==(t=null==e?void 0:e.slider)?void 0:t.trackStyle)?i:{}),b=IE(null!=(n=null==(r=null==e?void 0:e.slider)?void 0:r.railStyle)?n:{}),y=IP(null!=(o=null==(l=null==e?void 0:e.slider)?void 0:l.handlerStyle)?o:{}),v=IB(null!=(s=null==(a=null==e?void 0:e.controller)?void 0:a.start)?s:{}),_=IB(null!=(d=null==(h=null==e?void 0:e.controller)?void 0:h.pause)?d:{}),C=IB(null!=(c=null==(u=null==e?void 0:e.controller)?void 0:u.backward)?c:{}),x=IB(null!=(g=null==(p=null==e?void 0:e.controller)?void 0:p.forward)?g:{}),w=Object.assign(Object.assign({},e),{direction:e.direction,interval:e.interval,visible:e.visible,orient:null!=(f=e.orient)?f:"bottom",slider:Object.assign(Object.assign({},e.slider),{trackStyle:m,railStyle:b,handlerStyle:y}),controller:Object.assign(Object.assign({},e.controller),{start:v,pause:_,backward:C,forward:x})});return e.visible||(w.controller.visible=!1,w.slider.visible=!1),w},IL=(e,t)=>Object.assign(Object.assign({},II(e)),{data:t,type:"continuous"}),IF=(e,t)=>Object.assign(Object.assign({},II(e)),{data:t,type:"discrete"}),IH=e=>"left"===e||"right"===e,IO=e=>"top"===e||"bottom"===e;class ID extends vJ{constructor(){super(...arguments),this.layoutZIndex=X.Player,this.layoutLevel=Y.Player,this.specKey="player",this.type=sc.player,this._orient="bottom",this._getPlayerAttrs=()=>{var e,t,i,r,n,l;let o=this._spec.type,a={size:{width:this._width,height:this._height},dx:null!=(e=this._spec.dx)?e:0+this._dx,dy:null!=(t=this._spec.dy)?t:0+this._dy};return"discrete"===o?Object.assign(Object.assign(Object.assign({},IF(this._spec,this._specs)),a),{disableTriggerEvent:this._option.disableTriggerEvent,loop:null==(r=null==(i=this._spec)?void 0:i.loop)||r}):Object.assign(Object.assign(Object.assign({},IL(this._spec,this._specs)),a),{disableTriggerEvent:this._option.disableTriggerEvent,loop:null==(l=null==(n=this._spec)?void 0:n.loop)||l})},this._createOrUpdatePlayerComponent=()=>{let e=Object.assign({},this._getPlayerAttrs()),t=this.getContainer();this._playerComponent?(0,dN.X)(e,this._cacheAttrs)||(this._cacheAttrs=e,this._playerComponent.setAttributes(e),this._playerComponent._initAttributes(),this._playerComponent.render()):("discrete"===e.type?this._playerComponent=new IT(e):this._playerComponent=new IR(e),this._cacheAttrs=e,this._playerComponent.name="player",t.add(this._playerComponent),this._initEvent())},this._maxSize=()=>{var e,t,i,r,n,l,o,a,s;return Math.max(...(0,ag.IX)(null==(t=null==(e=this._spec.controller.start)?void 0:e.style)?void 0:t.size),...(0,ag.IX)(null==(r=null==(i=this._spec.controller.pause)?void 0:i.style)?void 0:r.size),...(0,ag.IX)(null==(l=null==(n=this._spec.controller.backward)?void 0:n.style)?void 0:l.size),...(0,ag.IX)(null==(a=null==(o=this._spec.controller.forward)?void 0:o.style)?void 0:a.size),null!=(s=IH(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)?s:10)},this._sliderExceededSize=()=>{var e,t,i,r,n,l,o,a,s;let h=null!=(e=IH(this._orient)?this._spec.slider.railStyle.width:this._spec.slider.railStyle.height)?e:10,d=Math.max(...(0,ag.IX)(null==(i=null==(t=this._spec.controller.start)?void 0:t.style)?void 0:i.size),...(0,ag.IX)(null==(n=null==(r=this._spec.controller.pause)?void 0:r.style)?void 0:n.size),...(0,ag.IX)(null==(o=null==(l=this._spec.controller.backward)?void 0:l.style)?void 0:o.size),...(0,ag.IX)(null==(s=null==(a=this._spec.controller.forward)?void 0:a.style)?void 0:s.size));return h>=d?h-d:0},this._initEvent=()=>{this._option.disableTriggerEvent||(this._option.globalInstance.on(N.rendered,()=>{var e;(null==(e=this._spec)?void 0:e.auto)&&(this._playerComponent.pause(),this._playerComponent.play())}),this._playerComponent.addEventListener(tu.end,()=>{var e;this.event.emit(N.playerEnd,{model:this}),this._alternate&&"discrete"===this._spec.type&&(this._direction="default"===this._direction?"reverse":"default",this._playerComponent.setAttributes({direction:this._direction,dataIndex:"reverse"===this._direction?this._specs.length-2:1})),(null==(e=this._spec)?void 0:e.loop)&&this._playerComponent.play()}),this._playerComponent.addEventListener(tu.change,e=>{let{index:t}=e.detail;this.changePlayerIndex(t)}),this._playerComponent.addEventListener(tu.backward,e=>{let{index:t}=e.detail,i=this._specs[t];this.event.emit(N.playerBackward,{model:this,value:{spec:i,index:t,specs:this._specs}})}),this._playerComponent.addEventListener(tu.forward,e=>{let{index:t}=e.detail,i=this._specs[t];this.event.emit(N.playerForward,{model:this,value:{spec:i,index:t,specs:this._specs}})}),this._playerComponent.addEventListener(tu.play,e=>{let{index:t}=e.detail,i=this._specs[t];this.event.emit(N.playerPlay,{model:this,value:{spec:i,index:t,specs:this._specs}})}),this._playerComponent.addEventListener(tu.pause,e=>{let{index:t}=e.detail,i=this._specs[t];this.event.emit(N.playerPause,{model:this,value:{spec:i,index:t,specs:this._specs}})}))}}get orient(){return this._orient}set layoutOrient(e){this._orient=e}setAttrFromSpec(){var e,t,i,r,n,l,o,a;super.setAttrFromSpec(),this._orient=null!=(e=this._spec.orient)?e:"bottom",this._specs=null!=(t=this._spec.specs)?t:[],this._direction=null!=(i=this._spec.direction)?i:"default",this._alternate=null!=(r=this._spec.alternate)&&r,this._dx=null!=(n=this._spec.dx)?n:0,this._dy=null!=(l=this._spec.dy)?l:0,this._position=null!=(o=this._spec.position)?o:"middle",this._visible=null==(a=this._spec.visible)||a}afterSetLayoutStartPoint(e){if(super.afterSetLayoutStartPoint(e),(0,sD.Z)(e.x)){let t=IH(this._orient)?e.x+this._sliderExceededSize()/2:e.x;this._playerComponent&&this._playerComponent.setAttribute("x",t)}if((0,sD.Z)(e.y)){let t=IO(this._orient)?e.y+this._sliderExceededSize()/2:e.y;this._playerComponent&&this._playerComponent.setAttribute("y",t)}}getBoundsInRect(e,t){this._width=this._computeWidth(e),this._height=this._computeHeight(e),this._dx=this._computeDx(t),this._dy=this._computeDy(t);let i=this._computeLayoutRect(e,this._width,this._height);return this._createOrUpdatePlayerComponent(),i}_getNeedClearVRenderComponents(){return[this._playerComponent]}_computeLayoutRect(e,t,i){if(!1===this._visible)return{x1:0,x2:0,y1:0,y2:0};switch(this._orient){case"top":case"left":return{x1:0,y1:0,x2:t,y2:i};case"right":return{x1:e.width-t,y1:0,x2:e.width,y2:e.height};default:return{x1:0,y1:e.height-i,x2:e.width,y2:e.height}}}_computeWidth(e){return(0,nw.Z)(this._spec.width)?Math.min(e.width,Number(this._spec.width)):IH(this._orient)?this._maxSize():e.width}_computeHeight(e){return(0,nw.Z)(this._spec.height)?(this._height=this._spec.height,Math.min(e.height,Number(this._spec.height))):IO(this._orient)?this._maxSize():e.height}_computeDx(e){return IH(this._orient)||"start"===this._position?0:"middle"===this._position?(e.width-this._width)/2:e.width-this._width}_computeDy(e){return IO(this._orient)||"start"===this._position?0:"middle"===this._position?(e.height-this._height)/2:e.height-this._height}changePlayerIndex(e){let t=this._specs[e];this._option.globalInstance.updateFullData(t.data),this.event.emit(N.playerChange,{model:this,value:{spec:t,index:e,specs:this._specs}})}}ID.builtInTheme={player:{visible:!0,position:"start",padding:{top:20,bottom:20},slider:{space:10,trackStyle:{fill:{type:"palette",key:"sliderTrackColor"},fillOpacity:.8},railStyle:{fill:{type:"palette",key:"sliderRailColor"}},handlerStyle:{size:15,stroke:{type:"palette",key:"backgroundColor"},lineWidth:2,fill:{type:"palette",key:"playerControllerColor"}}},controller:{start:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},pause:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},backward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}},forward:{order:0,space:10,position:"start",style:{size:12,fill:{type:"palette",key:"playerControllerColor"},fillOpacity:.8}}}}},ID.specKey="player",ID.type=sc.player;class Iz extends vJ{constructor(e,t){super(e,t),this.type=sc.label,this.name=sc.label,this.layoutType="none",this.layoutZIndex=X.Label,this._regions=t.getRegionsInIndex(t.regionIndexes)}_interactiveConfig(e){let{interactive:t}=e,i={hover:!1,select:!1,state:e.state};if(!0!==t)return i;let{hover:r,select:n}=this._option.getChart().getSpec();return!1===r&&!1===r.enable||(i.hover=!0),!1===n&&!1===n.enable||(i.select=!0),i}_compareSpec(e,t){let i=super._compareSpec(e,t);return i.reRender=!0,(0,dN.X)(t,e)||(i.reMake=!0),i}_getDataLabelType(e,t){let i=e.type;return"line"===i||"area"===i?null!=t?t:"line-data":"rect"===i?"rect":"arc"===i?"arc":"symbol"===i||"cell"===i?"symbol":e.setDataLabelType?e.setDataLabelType():""}_setTransformOfComponent(e,t){e.setAttributeTransform(({labelStyle:e,size:i,itemEncoder:r})=>{let n=i(),l=hr({type:"palette",key:"secondaryFontColor"},this.getColorScheme());return{dataLabels:(0,ag.IX)(t).map((t,i)=>{let o=e(i),a=[],s=t.getGraphics();if(s)return o.data&&o.data.length?o.data.forEach((e,t)=>{if(s[t]){let t=r(e,{labelIndex:i});(0,r5.Z)(t.fill)&&(t.fill=l),(0,r5.Z)(t.data)&&(t.data=e),a.push(t)}}):s.forEach(e=>{let{data:t,diffState:n}=e.context;n!==J.exit&&t.forEach((e,{})=>{let t=r(e,{labelIndex:i});(0,r5.Z)(t.fill)&&(t.fill=l),(0,r5.Z)(t.data)&&(t.data=e),a.push(t)})}),(0,sF.Z)(o.overlap)&&(0,r5.Z)(o.overlap.size)&&(o.overlap.size=Object.assign({},n)),Object.assign(Object.assign({smartInvert:!1,baseMarkGroupName:t.getProductId(),getBaseMarks:()=>s},o),{type:this._getDataLabelType(t,o.type),data:a})}),size:n}})}getVRenderComponents(){let e=[];return this.getMarks().forEach(t=>{let i=t.getComponent();i&&e.push(i)}),e}clear(){super.clear(),this.getMarks().forEach(e=>{e&&e.clearComponent()})}}Iz.type=sc.label;class IW extends Aq{constructor(){super(...arguments),this.skipEncode=!1}getRule(){return this._rule}setRule(e){this._rule=e}getTarget(){return this._target}setTarget(e){this._target=e,this._rule||this.setRule(e.type)}getComponent(){return this._component}setComponent(e){this._component=e}render(){}}IW.type="text",IW.constructorType="label";let IZ=()=>{AJ(),hp.registerMark(IW.constructorType,IW)};class IN extends vY{_initTheme(e,t){return{spec:e,theme:this._theme}}}var I$=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class Ij extends yN{constructor(e,t){let{dataLabels:i}=e;super((null==t?void 0:t.skipDefault)?e:Object.assign({dataLabels:i},(0,ha.Z)({},Ij.defaultAttributes,I$(e,["dataLabels"])))),this.name="data-label"}render(){var e;let{dataLabels:t,size:i}=this.attribute;if(!t||0===t.length)return;let{width:r=0,height:n=0,padding:l}=i||{};if(!r||!n||!(0,sD.Z)(n*r))return;this._componentMap||(this._componentMap=new Map);let o=ye(r,n,l),a=o.bitmap(),s=new Map,h=this._componentMap;for(let r=0;r<t.length;r++){let n=t[r],l=yK(n.type)||yG;if(l){let{baseMarkGroupName:t,type:h}=n,d=null!=(e=n.id)?e:`${t}-${h}-${r}`;"arc"===n.type&&(n.width=i.width,n.height=i.height);let u=this._componentMap.get(d);u?(u.setBitmapTool(o),u.setBitmap(a),u.setAttributes(n)):((u=new l(n)).setBitmap(a),u.setBitmapTool(o),this.add(u)),s.set(d,u)}}h.forEach((e,t)=>{s.get(t)||this.removeChild(e)}),this._componentMap=s}setLocation(e){this.translateTo(e.x,e.y)}disableAnimation(){this._componentMap.forEach(e=>{e.disableAnimation()})}enableAnimation(){this._componentMap.forEach(e=>{e.enableAnimation()})}}Ij.defaultAttributes={pickable:!1};class IG extends Iz{constructor(e,t){super(e,t),this.type=sc.label,this.name=sc.label,this.specKey="label",this.transformerConstructor=IN,this.layoutZIndex=X.Label,this._layoutRule=e.labelLayout||"series"}static getSpecInfo(e,t){let i=[];return((null==t?void 0:t.region)||[]).forEach((r,n)=>{(r.seriesIndexes||[]).some(e=>{let{markLabelSpec:i={}}=t.series[e];return Object.values(i).some(e=>Array.isArray(e)&&e.some(e=>e.visible))})&&i.push({spec:e,type:sc.label,specInfoPath:["component",this.specKey,n],regionIndexes:[n]})}),i}init(e){super.init(e),this.initEvent(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}reInit(e){super.reInit(e),this._labelInfoMap&&(this._labelInfoMap.forEach(e=>{e.forEach(({labelMark:e})=>{e.release()})}),this._labelInfoMap.clear()),this._labelInfoMap&&this._labelInfoMap.clear(),this._initTextMark(),this._initLabelComponent(),this._initTextMarkStyle()}initEvent(){this.event.on(N.dataZoomChange,()=>{this._labelComponentMap.forEach((e,t)=>{let i=t.getComponent();i&&i.disableAnimation()}),this.event.on(Z.AFTER_MARK_RENDER_END,e)});let e=()=>{this._labelComponentMap.forEach((e,t)=>{let i=t.getComponent();i&&i.enableAnimation()}),this.event.off(Z.AFTER_MARK_RENDER_END,e)}}_initTextMark(){this._labelInfoMap||(this._labelInfoMap=new Map),this._labelComponentMap||(this._labelComponentMap=new Map),y8(this._regions,e=>{let{markLabelSpec:t={}}=e.getSpecInfo(),i=Object.keys(t),r=e.getRegion();this._labelInfoMap.get(r)||this._labelInfoMap.set(r,[]);for(let n=0;n<i.length;n++){let l=i[n],o=e.getMarkInName(l);o&&t[l].forEach((t,i)=>{var n,a,s;if(t.visible){let h=this._labelInfoMap.get(r),d=this._createMark({type:"label",name:`${null!=(n=e.userId)?n:e.id}-${l}-label-${i}`},{attributeContext:e.getMarkAttributeContext()});t.showRelatedMarkTooltip&&(null==(s=null==(a=e.tooltipHelper)?void 0:a.activeTriggerSet.mark)||s.add(d)),d.setTarget(o),h.push({labelMark:d,baseMark:o,series:e,labelSpec:t})}})}})}_initLabelComponent(){let e={};this._labelComponentMap.forEach((t,i)=>{e[i.name]=i}),this._labelInfoMap.forEach((t,i)=>{if("region"===this._layoutRule){let r=!1,n=`${i.getGroupMark().name}-label-component`,l=e[n];l||(r=!0,l=this._createMark({type:"component",name:n},{componentType:"label"},{support3d:this._spec.support3d})),l&&(r&&(l.setSkipBeforeLayouted(!0),this._marks.addMark(l),t.forEach(e=>{var t;null==(t=e.baseMark.getData())||t.addRelatedMark(l)})),t[0]&&(0,oV.Z)(t[0].labelSpec.zIndex)&&l.setMarkConfig({zIndex:t[0].labelSpec.zIndex}),this._labelComponentMap.set(l,()=>this._labelInfoMap.get(i)),e[n]=null)}else t.forEach((t,r)=>{var n;let l=!1,o=`${t.labelMark.name}-component`,a=e[o];a||(l=!0,a=this._createMark({type:"component",name:o},{componentType:"label",noSeparateStyle:!0},{support3d:t.baseMark.getMarkConfig().support3d})),a&&((0,oV.Z)(t.labelSpec.zIndex)&&a.setMarkConfig({zIndex:t.labelSpec.zIndex}),l&&(a.setSkipBeforeLayouted(!0),this._marks.addMark(a),null==(n=t.baseMark.getData())||n.addRelatedMark(a)),this._labelComponentMap.set(a,()=>this._labelInfoMap.get(i)[r]),e[o]=null)})}),Object.keys(e).forEach(t=>{let i=e[t];i&&(i.release(),this._labelComponentMap.delete(i))})}_initTextMarkStyle(){this._labelComponentMap.forEach((e,t)=>{(0,ag.IX)(e()).forEach(({labelMark:e})=>{e.setComponent(t)})}),this._labelInfoMap.forEach(e=>{e.forEach(e=>{var t,i;let{labelMark:r,labelSpec:n,series:l}=e;if(this.initMarkStyleWithSpec(r,n),(0,nr.Z)(null==n?void 0:n.getStyleHandler)){let e=n.getStyleHandler(l);null==e||e.call(l,r,n)}(null==(i=null==(t=r.stateStyle)?void 0:t.normal)?void 0:i.lineWidth)&&r.setAttribute("stroke",l.getColorAttribute(),"normal",q.Base_Series)})})}updateLayoutAttribute(){super.updateLayoutAttribute(),this._labelComponentMap.forEach((e,t)=>{let i=e();(0,ri.Z)(i)?this._updateMultiLabelAttribute(i,t):this._updateSingleLabelAttribute(i,t)})}_updateMultiLabelAttribute(e,t){this._updateLabelComponentAttribute(t,e.map(({baseMark:e})=>e),e)}_updateSingleLabelAttribute(e,t){let{baseMark:i}=e;this._updateLabelComponentAttribute(t,i,[e])}_updateLabelComponentAttribute(e,t,i){let r=this._option.getComponentsByType("totalLabel");e.setMarkConfig({interactive:!1}),e.setSimpleStyle({labelStyle:e=>{var t,n;let l=i[e],{labelSpec:o,labelMark:a,series:s}=l,h=a.getRule(),d=this._interactiveConfig(o),u=null!=(n=null==(t=this._spec)?void 0:t.centerOffset)?n:0,c=hs({textStyle:Object.assign({pickable:!0===o.interactive},o.style),overlap:{avoidMarks:r.map(e=>e.getMarks()[0].getProductId())}},function(e,t){var i;let{labelSpec:r}=t;r.overlap&&!(0,r9.Z)(r.overlap)&&(r.overlap={});let n=null!=(i=Tx[e])?i:Tx.point;return t.series.type===z.sankey?function(e){var t,i,r,n;let{series:l,labelSpec:o={}}=e,a=null!=(t=TS(o.position))?t:"outside",s=l.direction,h=a;return(0,r6.Z)(a)&&("vertical"===s?h="inside-start"===a?e=>"inside-left":"inside-middle"===a?e=>"center":"inside-end"===a?e=>"inside-right":e=>"bottom":"inside-start"===a?h=e=>"inside-left":"inside-middle"===a?h=e=>"center":"inside-end"===a?h=e=>"inside-right":"outside"===a&&(h=e=>"right")),{position:h,overlap:!1!==o.overlap&&(!(0,r6.Z)(a)||!a.includes("inside"))&&{strategy:null!=(r=null==(i=o.overlap)?void 0:i.strategy)?r:(n=l,[{type:"position",position:e=>"horizontal"===n.direction?["right","left"]:["bottom","top"]}])},smartInvert:!1,offset:0,syncState:!0}}(t):n(t)}(h,l),Object.assign(Object.assign(Object.assign({},(0,vQ.Z)(o,["position","style","state","type","stackDataFilterType","getStyleHandler"])),d),{centerOffset:u}),o.stackDataFilterType?{dataFilter:"min"===o.stackDataFilterType?e=>e.filter(e=>e.data[dR]):e=>e.filter(e=>e.data[dT])}:{});return s&&s.parseLabelStyle&&(c=s.parseLabelStyle(c,o,a)),"line"!==h&&"area"!==h||(c.type=h),c},size:()=>{var e;return Object.assign({padding:null==(e=i[0].labelSpec.overlap)?void 0:e.padding},i[0].series.getRegion().getLayoutRect())},itemEncoder:(e,{labelIndex:t})=>i[t]&&!i[t].labelMark.skipEncode?Tw(i[t],e,i[t].labelSpec.formatMethod,i[t].labelSpec.formatter):{data:e}}),this._setTransformOfComponent(e,t)}compileMarks(){this.getMarks().forEach(e=>{let t,i=this._labelComponentMap.get(e)();t=(0,ri.Z)(i)?i[0].series.getRegion().getGroupMark().getProduct():i.series.getRegion().getGroupMark().getProduct(),e.compile({group:t})})}getLabelInfoByTextGraphic(e){let t,i=null==e?void 0:e.parent,r=null==i?void 0:i.parent;if(r){let e=r.getChildren().indexOf(i);this._labelComponentMap.forEach((i,n)=>{n.getComponent()===r&&(t=(0,ag.IX)(i())[e])})}return t}}IG.type=sc.label,IG.specKey="label",IG.transformerConstructor=IN;class IV extends Iz{constructor(){super(...arguments),this.type=sc.totalLabel,this.name=sc.totalLabel,this.specKey="totalLabel",this.layoutZIndex=X.Label}static getSpecInfo(e,t){var i;let r=[];return null==(i=null==t?void 0:t.region)||i.forEach((e,i)=>{var n;null==(n=e.seriesIndexes)||n.forEach(e=>{let{spec:n}=t.series[e],l=n[this.specKey];(null==l?void 0:l.visible)&&r.push({spec:l,type:sc.totalLabel,specPath:["series",e,this.specKey],specInfoPath:["component",this.specKey,e],regionIndexes:[i],seriesIndexes:[e]})})}),r}init(e){super.init(e),this._initTextMark(),this._initLabelComponent()}reInit(e){super.reInit(e),this._initTextMark()}_initTextMark(){var e;let t=this._getSeries();if(null==(e=t.getSpec().totalLabel)?void 0:e.visible){let e=t.getSeriesMark();if(e){let t=this._createMark({type:"label",name:`${e.name}-total-label`});this._baseMark=e,this._textMark=t,this._initTextMarkStyle()}}}_initTextMarkStyle(){var e;super.initMarkStyleWithSpec(this._textMark,this._spec),this.setMarkStyle(this._textMark,{text:e=>e[dk]},"normal",q.Default);let t=this._getSeries();null==(e=t.initTotalLabelMarkStyle)||e.call(t,this._textMark)}_initLabelComponent(){var e;let t=this._getSeries(),i=this._createMark({type:"component",name:`${null!=(e=t.name)?e:t.type}-total-label-component`},{componentType:"label"},{support3d:this._spec.support3d});i&&(this._marks.addMark(i),t.getData().addRelatedMark(i))}updateLayoutAttribute(){super.updateLayoutAttribute();let e=this._getSeries();this._marks.forEach((t,i)=>{t.setMarkConfig({interactive:!1}),t.setSimpleStyle({labelStyle:()=>{var t,i;if(this._baseMark){let{offset:r,animation:n,overlap:l,position:o="top"}=this._spec,a=this._interactiveConfig(this._spec);return hs({textStyle:{pickable:!0===this._spec.interactive},position:function(e,t,i="top"){var r,n;let l,{direction:o}=e,a=+("horizontal"===o?null!=(r=e.getXAxisHelper())&&!!r.isInverse():null!=(n=e.getYAxisHelper())&&!!n.isInverse());switch(t){case"rect":case"symbol":l=("bottom"===i?{vertical:["bottom","top"],horizontal:["left","right"]}:{vertical:["top","bottom"],horizontal:["right","left"]})[o][a];break;default:l="top"}return l}(e,this._baseMark.type,o),x:0,y:0},null!=(i=null==(t=e.getTotalLabelComponentStyle)?void 0:t.call(e,{baseMark:this._baseMark,labelMark:this._textMark}))?i:{},Object.assign({offset:r,animation:n,overlap:l,dataFilter:e=>e.filter(e=>"bottom"===o?e.data[dR]:e.data[dT])},a))}},size:()=>{var e;return Object.assign({padding:null==(e=this._spec.overlap)?void 0:e.padding},this._regions[0].getLayoutRect())},itemEncoder:t=>Tw({baseMark:this._baseMark,labelMark:this._textMark,series:e,labelSpec:e.getSpec().totalLabel},t,this._spec.formatMethod)}),this._setTransformOfComponent(t,this._baseMark)})}compileMarks(){this.getMarks().forEach(e=>{let t=this._regions[0].getGroupMark().getProduct();e.compile({group:t,context:{model:this}})})}_getSeries(){return this._option.getSeriesInIndex([this.getSpecPath()[1]])[0]}}IV.type=sc.totalLabel,IV.builtInTheme={totalLabel:{visible:!1,offset:5,overlap:{clampForce:!0,strategy:[]},smartInvert:!1,animation:!1,style:{fontSize:{type:"token",key:"l4FontSize"},fill:{type:"palette",key:"primaryFontColor"}}}},IV.specKey="totalLabel";let IU=(e,t)=>{let i=Math.atan2(e,t);return i<0?i+2*Math.PI:i};function IK(){IX._animate=BH}Bb(),CR(),CE(),uN(),Bm(),bX(),g1();class IX extends B_{markerAnimate(e){IX._animate&&this._animationConfig&&IX._animate([this._line,this._decorativeLine],this._item,this._animationConfig,e)}constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},IX.defaultAttributes,e)),this.name="markPoint",this.defaultUpdateAnimation=Bz,this.defaultExitAnimation=BW,this._isArcLine=!1,this._isStraightLine=!1}setLabelPos(){}getTextAlignAttr(e,t,i,r,n){return b6(Math.abs(r),Math.PI/2,.001)||b6(Math.abs(r),3*Math.PI/2,.001)?b8(e,r,n):b5(r)?BY.postiveXAxis[n]:BY.negativeXAxis[n]}setItemAttributes(e,t,i,r,n){var l,o;if(!e)return;let{autoRotate:a=!0,refX:s=0,refY:h=0,refAngle:d=0,style:u,position:c=ta.middle}=t,{state:p}=this.attribute,g=(null==(l=this._line)?void 0:l.getEndAngle())||0,f=s*Math.cos(g)+h*Math.cos(g-Math.PI/2),m=s*Math.sin(g)+h*Math.sin(g-Math.PI/2);if("text"===n){let n=r.x-i.x,l=r.y-i.y;e.setAttributes(Object.assign(Object.assign({},u),{textStyle:Object.assign(Object.assign({},this.getTextAlignAttr(a,n,l,g,null!=(o=t.position)?o:"end")),u.textStyle),state:{panel:(0,ha.Z)({},pK,null==p?void 0:p.textBackground),text:(0,ha.Z)({},pK,null==p?void 0:p.itemContent)}}))}else("richText"===n||"image"===n)&&(e.setAttributes({dx:this.getItemDx(e,c,u)+(u.dx||0),dy:this.getItemDy(e,c,u)+(u.dy||0)}),e.states=(0,ha.Z)({},pK,null==p?void 0:p.itemContent));let b=b5(g)?g:g-Math.PI;e.setAttributes({x:r.x+(f||0),y:r.y+(m||0),angle:a&&b+d})}getItemDx(e,t,i){var r,n;let l=null!=(n=null==(r=null==e?void 0:e.AABBBounds)?void 0:r.width())?n:(null==i?void 0:i.width)||0;return t.includes("inside")?-l:0}getItemDy(e,t,i){var r,n;let l=null!=(n=null==(r=null==e?void 0:e.AABBBounds)?void 0:r.height())?n:(null==i?void 0:i.height)||0;return t.includes("top")||t.includes("Top")?-l:t.includes("middle")||t.includes("Middle")?-l/2:0}initItem(e,t,i){let r,{state:n}=this.attribute,{type:l="text",style:o,renderCustomCallback:a}=e;return"symbol"===l?(r=oq.symbol(Object.assign(Object.assign({},i),o))).states=(0,ha.Z)({},pK,null==n?void 0:n.itemContent):"text"===l?r=new CL(Object.assign(Object.assign({},i),{state:{panel:(0,ha.Z)({},pK,null==n?void 0:n.textBackground),text:(0,ha.Z)({},pK,null==n?void 0:n.itemContent)}})):"richText"===l?(r=oq.richtext(Object.assign(Object.assign({},i),o))).states=(0,ha.Z)({},pK,null==n?void 0:n.itemContent):"image"===l?(r=oq.image(Object.assign(Object.assign({},i),o))).states=(0,ha.Z)({},pK,null==n?void 0:n.itemContent):"custom"===l&&a&&((r=a()).states=(0,ha.Z)({},pK,null==n?void 0:n.itemContent)),r.name=`mark-point-${l}`,this.setItemAttributes(r,e,t,i,l),r}getItemLineAttr(e,t,i){let r=[],n={x:0,y:0},l=0,o=0,a=0,{type:s="type-s",arcRatio:h=.8}=e,d=i.x-t.x,u=i.y-t.y;if(this._isStraightLine=b6(d,0,.001)||b6(u,0,.001),this._isArcLine){let{x:e,y:t}=this.attribute.position,{x:r,y:s}=i,d=(e+r)/2,u=d+h*(s>t?-1:1)*d,c=(t===s?0:-(e-r)/(t-s))*(u-d)+(t+s)/2;o=IU(t-c,e-u),a=IU(s-c,r-u),n={x:u,y:c};let p=Math.sqrt((u-e)*(u-e)+(c-t)*(c-t)),g=this.attribute.targetSymbol.style.size/2;o+=2*Math.acos(Math.sqrt(1-g*g/(4*p*p))),h>0?a<o&&(a+=2*Math.PI):o<a&&(o+=2*Math.PI),l=Math.sqrt((u-e)*(u-e)+(c-t)*(c-t))}else r="type-do"!==s||this._isStraightLine?"type-po"!==s||this._isStraightLine?"type-op"!==s||this._isStraightLine?[t,i]:[t,{x:t.x,y:i.y},i]:[t,{x:i.x,y:t.y},i]:[t,{x:(t.x+i.x)/2,y:i.y},i];return{points:r=function(e){let t=[e[0]];for(let i=1;i<e.length;i++)e[i].x===e[i-1].x&&e[i].y===e[i-1].y||t.push(e[i]);return t}(r),center:n,radius:l,startAngle:o,endAngle:a}}reDrawLine(e,t){this._line.release();let{startSymbol:i,endSymbol:r,lineStyle:n,type:l="type-s"}=e,{state:o}=this.attribute,a=this._isArcLine?Ii:CP;this._container.removeChild(this._line),this._line=new a(Object.assign(Object.assign({},t),{pickable:!1,startSymbol:i,endSymbol:r,lineStyle:n,visible:e.visible,state:{line:(0,ha.Z)({},pK,null==o?void 0:o.line),startSymbol:(0,ha.Z)({},pK,null==o?void 0:o.lineStartSymbol),endSymbol:(0,ha.Z)({},pK,null==o?void 0:o.lineEndSymbol)}})),this._container.add(this._line)}setItemLineAttr(e,t,i){if(this._line){let{startSymbol:r,endSymbol:n,lineStyle:l,type:o="type-s"}=e,{state:a}=this.attribute,s=this.getItemLineAttr(e,t,i);this._isArcLine&&"arc-segment"===this._line.key||!this._isArcLine&&"segment"===this._line.key?this._line.setAttributes(Object.assign(Object.assign({},s),{startSymbol:r,endSymbol:n,lineStyle:l,visible:e.visible,state:{line:(0,ha.Z)({},pK,null==a?void 0:a.line),startSymbol:(0,ha.Z)({},pK,null==a?void 0:a.lineStartSymbol),endSymbol:(0,ha.Z)({},pK,null==a?void 0:a.lineEndSymbol)}})):this.reDrawLine(e,s)}}getDecorativeLineAttr(e){var t;let i=(null==(t=null==e?void 0:e.decorativeLine)?void 0:t.length)||10,r=this._line.getEndAngle()||0;return{startPointOffsetX:i/2*Math.cos(r-Math.PI/2),startPointOffsetY:i/2*Math.sin(r-Math.PI/2),endPointOffsetX:-i/2*Math.cos(r-Math.PI/2),endPointOffsetY:-i/2*Math.sin(r-Math.PI/2)}}setDecorativeLineAttr(e,t,i){var r;if(this._decorativeLine){let{lineStyle:n}=e,{startPointOffsetX:l,startPointOffsetY:o,endPointOffsetX:a,endPointOffsetY:s}=this.getDecorativeLineAttr(e);this._decorativeLine.setAttributes(Object.assign(Object.assign({points:[{x:t.x+l,y:t.y+o},{x:t.x+a,y:t.y+s}]},n),{visible:i})),this._decorativeLine.states=(0,ha.Z)({},pK,null==(r=this.attribute.state)?void 0:r.line)}}setTargetItemAttributes(e,t){var i,r;this._targetItem&&(this._targetItem.setAttributes(Object.assign({x:t.x,y:t.y,visible:null!=(i=e.visible)&&i,size:e.size},e.style)),this._targetItem.states=(0,ha.Z)({},pK,null==(r=this.attribute.state)?void 0:r.targetItem))}setAllOfItemsAttr(e,t){var i;let{position:r,itemLine:n={},itemContent:l={},limitRect:o,targetSymbol:a}=this.attribute,{type:s="text",confine:h}=l;if(o&&h){let{x:e,y:i,width:r,height:n}=o,{dx:l,dy:a}=By(this._item,{x1:e,y1:i,x2:e+r,y2:i+n});t.x=t.x+l,t.y=t.y+a}this.setTargetItemAttributes(a,r),this.setItemLineAttr(n,e,t),this.setItemAttributes(this._item,l,e,t,s),this.setDecorativeLineAttr(n,t,null==(i=n.decorativeLine)?void 0:i.visible)}computeNewPositionAfterTargetItem(e){var t,i;let r,{itemContent:n={},targetSymbol:l,itemLine:o}=this.attribute,{offsetX:a=0,offsetY:s=0}=n,{offset:h=0,style:d,visible:u=!1,size:c}=l,p=u?null!=(i=null!=(t=d.size)?t:c)?i:20:0;return r="type-do"===o.type?IU(s,a/2):"type-po"===o.type?IU(0,a):"type-op"===o.type?IU(s,0):IU(s,a),{newPosition:{x:e.x+(p/2+h)*Math.cos(r),y:e.y+(p/2+h)*Math.sin(r)},newItemPosition:{x:e.x+(p/2+h)*Math.cos(r)+a,y:e.y+(p/2+h)*Math.sin(r)+s}}}initMarker(e){let{position:t,itemContent:i={},itemLine:r}=this.attribute,{type:n="type-s",arcRatio:l=.8}=r,{offsetX:o=0,offsetY:a=0}=i;this._isStraightLine=b6(o,0,.001)||b6(a,0,.001),this._isArcLine="type-arc"===n&&0!==l&&!this._isStraightLine;let{newPosition:s,newItemPosition:h}=this.computeNewPositionAfterTargetItem(t),d=new(this._isArcLine?Ii:CP)({points:[],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0});d.name="mark-point-line",this._line=d,e.add(d);let u=oq.line({points:[]});u.name="mark-point-decorativeLine",this._decorativeLine=u,e.add(u);let c=oq.symbol({});c.name="mark-point-targetItem",this._targetItem=c,e.add(this._targetItem);let p=this.initItem(i,s,h);this._item=p,e.add(p),this.setAllOfItemsAttr(s,h)}updateMarker(){let{position:e,itemContent:t={},itemLine:i}=this.attribute,{type:r="text"}=t,{type:n="type-s",arcRatio:l=.8}=i,{offsetX:o=0,offsetY:a=0}=t;this._isStraightLine=b6(o,0,.001)||b6(a,0,.001);let s="type-arc"===n&&0!==l&&!this._isStraightLine,{newPosition:h,newItemPosition:d}=this.computeNewPositionAfterTargetItem(e);s!==this._isArcLine?(this._isArcLine=s,this.reDrawLine(i,{points:[{x:0,y:0}],pickable:!1,center:{x:0,y:0},radius:0,startAngle:0,endAngle:0})):this._isArcLine=s,this.setItemAttributes(this._item,t,h,d,r),this.setAllOfItemsAttr(h,d)}isValidPoints(){let{position:e}=this.attribute;return!(!(0,sD.Z)(e.x)||!(0,sD.Z)(e.y))}}IX.defaultAttributes={interactive:!0,targetSymbol:{visible:!1,offset:0,style:{symbolType:"circle",size:20,fill:!1,stroke:"rgba(46, 47, 50)"}},itemLine:{visible:!0,decorativeLine:{visible:!1,length:30},startSymbol:{visible:!0,clip:!0,symbolType:"circle",size:20,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},endSymbol:{visible:!1,clip:!0,symbolType:"triangle",size:12,style:{fill:!1,stroke:"rgba(46, 47, 50)"}},lineStyle:{stroke:"#000",lineWidth:1}},itemContent:{type:"text",position:"middle",refX:10}};var IY=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};class Iq extends B4{constructor(){super(...arguments),this.specKey="markPoint",this.layoutZIndex=X.MarkPoint}static _getMarkerCoordinateType(e){let{doPolarProcess:t,doGeoProcess:i}=Bn(e);return"polar"===e.coordinateType||t?"polar":"geo"===e.coordinateType||i?"geo":"cartesian"}_createMarkerComponent(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B;let{itemContent:I={},itemLine:L={},targetSymbol:F={}}=this._spec,{type:H="text",text:O,symbol:D,image:z,richText:W,customMark:Z,textStyle:N,symbolStyle:$,imageStyle:j,richTextStyle:G,customMarkStyle:V,style:U={},state:K={}}=I,X=IY(I,["type","text","symbol","image","richText","customMark","textStyle","symbolStyle","imageStyle","richTextStyle","customMarkStyle","style","state"]),Y=null,q=null,J={};"text"===H?(Y=null!=(e=null==O?void 0:O.state)?e:K,J={dx:0,dy:0},q=P6(Object.assign(Object.assign({},O),{style:(0,ha.Z)(J,null!=(i=null!=(t=null==O?void 0:O.textStyle)?t:N)?i:U)}),this._markerData,this._markAttributeContext)):"richText"===H?(Y=null!=(r=null==W?void 0:W.state)?r:K,J={width:100,height:100},q=P7((0,ha.Z)(J,null!=(l=null!=(n=null==W?void 0:W.style)?n:G)?l:U),this._markerData,this._markAttributeContext)):"symbol"===H?(Y=null!=(o=null==D?void 0:D.state)?o:K,J={symbolType:"star",fill:"rgb(48, 115, 242)",fillOpacity:.8,size:20},q=vA(P7((0,ha.Z)(J,null!=(s=null!=(a=null==D?void 0:D.style)?a:$)?s:U),this._markerData,this._markAttributeContext))):"image"===H?(Y=null!=(h=null==z?void 0:z.state)?h:K,J={width:80,height:80},q=P7((0,ha.Z)(J,null!=(u=null!=(d=null==z?void 0:z.style)?d:j)?u:U),this._markerData,this._markAttributeContext)):"custom"===H&&(Y=null!=(c=null==Z?void 0:Z.state)?c:K,q=P7(null!=(g=null!=(p=null==Z?void 0:Z.style)?p:V)?g:U,this._markerData,this._markAttributeContext));let Q={zIndex:this.layoutZIndex,interactive:null==(f=this._spec.interactive)||f,hover:null==(m=this._spec.interactive)||m,select:null==(b=this._spec.interactive)||b,position:{x:0,y:0},clipInRange:null!=(y=this._spec.clip)&&y,itemContent:Object.assign(Object.assign({type:H,offsetX:P9(I.offsetX,this._relativeSeries.getRegion()),offsetY:P9(I.offsetX,this._relativeSeries.getRegion())},X),{style:P7(q,this._markerData,this._markAttributeContext)}),targetSymbol:{offset:null!=(v=F.offset)?v:0,visible:null!=(_=F.visible)&&_,size:null!=(C=F.size)?C:20,style:P7(F.style,this._markerData,this._markAttributeContext)},state:{line:P8(null!=(w=null==(x=this._spec.itemLine.line)?void 0:x.state)?w:{},this._markerData,this._markAttributeContext),lineStartSymbol:P8(null!=(A=null==(S=this._spec.itemLine.startSymbol)?void 0:S.state)?A:{},this._markerData,this._markAttributeContext),lineEndSymbol:P8(null!=(M=null==(k=this._spec.itemLine.endSymbol)?void 0:k.state)?M:{},this._markerData,this._markAttributeContext),itemContent:P8(Y,this._markerData,this._markAttributeContext),textBackground:P8(null==(R=null==(T=this._spec.itemContent.text)?void 0:T.labelBackground)?void 0:R.state,this._markerData,this._markAttributeContext),targetItem:P8(null!=(P=null==(E=this._spec.targetSymbol)?void 0:E.state)?P:{},this._markerData,this._markAttributeContext)},animation:null!=(B=this._spec.animation)&&B,animationEnter:this._spec.animationEnter,animationExit:this._spec.animationExit,animationUpdate:this._spec.animationUpdate},{visible:ee,line:et={}}=L,ei=IY(L,["visible","line"]);return Q.itemLine=!1!==ee?Object.assign(Object.assign({},ei),{visible:!0,lineStyle:vA(et.style)}):{visible:!1},new IX(Q)}_markerLayout(){var e,t,i,r,n;let l,o=this._spec,a=this._markerData,s=this._relativeSeries,{point:h}=this._computePointsAttr(),d=this._getRelativeDataView().latestData,u=a?a.latestData[0]&&a.latestData[0].latestData?a.latestData[0].latestData:a.latestData:d;if(o.clip||(null==(e=o.itemContent)?void 0:e.confine)){let{minX:e,maxX:t,minY:i,maxY:r}=P5([s.getRegion()]);l={x:e,y:i,width:t-e,height:r-i}}if(this._markerComponent){let e=null!=(t=this._markerComponent.attribute)?t:{},o=null!=(r=null==(i=e.itemContent)?void 0:i.textStyle)?r:{};this._markerComponent.setAttributes({position:void 0===h?{x:null,y:null}:h,itemContent:Object.assign(Object.assign({},e.itemContent),{textStyle:Object.assign(Object.assign({},o),{text:(null==(n=this._spec.itemContent.text)?void 0:n.formatMethod)?this._spec.itemContent.text.formatMethod(u,d):o.text}),offsetX:Be(h,e.itemContent.offsetX,this._relativeSeries.getRegion()),offsetY:Be(h,e.itemContent.offsetY,this._relativeSeries.getRegion())}),limitRect:l,dx:this._layoutOffsetX,dy:this._layoutOffsetY})}}_initDataView(){let e=this._spec,{doXYProcess:t,doPolarProcess:i,doGeoProcess:r}=Bn(e);((0,oV.Z)(e.coordinate)||t||i||r)&&this._initCommonDataView()}}Iq.specKey="markPoint";let IJ={itemLine:{decorativeLine:{visible:!1},startSymbol:{size:5,visible:!0,style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},endSymbol:{style:{fill:{type:"palette",key:"markLineStrokeColor"},stroke:null,lineWidth:0}},line:{style:{stroke:{type:"palette",key:"markLineStrokeColor"}}}},itemContent:{offsetY:-50}};class IQ extends Iq{constructor(){super(...arguments),this.type=sc.markPoint,this.name=sc.markPoint,this.coordinateType="cartesian"}_computePointsAttr(){var e,t,i;let r,n=this._spec,l=this._markerData,o=this._relativeSeries,a=(0,oV.Z)(n.x)&&(0,oV.Z)(n.y),s=(0,oV.Z)(n.coordinate),h=(0,oV.Z)(n.position),d=null!=(e=null==n?void 0:n.autoRange)&&e;return a?r=null==(i=null==(t=PJ(l,o,o,o,d))?void 0:t[0])?void 0:i[0]:s?r=P1(l,o,d,n.coordinatesOffset)[0]:h&&(r=P4(n.position,o,n.regionRelative)[0]),{point:r}}_computeOptions(){let e,t=this._spec,{doXYProcess:i}=Bn(t),r=(0,oV.Z)(t.coordinate);return i?e=[this._processSpecByDims([{dim:"x",specValue:t.x},{dim:"y",specValue:t.y}])]:r&&(e=this._processSpecCoo(t)),{options:e}}}IQ.type=sc.markPoint,IQ.coordinateType="cartesian",IQ.builtInTheme={markPoint:IJ};class I0 extends Iq{constructor(){super(...arguments),this.type=sc.polarMarkPoint,this.name=sc.polarMarkPoint,this.coordinateType="polar"}_computePointsAttr(){var e,t;let i=this._markerData,r=this._relativeSeries,n=P0(i,r,r,r,null!=(t=null==(e=this._spec)?void 0:e.autoRange)&&t)[0][0],l={x:this._relativeSeries.getRegion().getLayoutStartPoint().x+this._relativeSeries.angleAxisHelper.center().x,y:this._relativeSeries.getRegion().getLayoutStartPoint().y+this._relativeSeries.angleAxisHelper.center().y};return{point:(0,t9.op)(l,n.radius,n.angle)}}_computeOptions(){let e=this._spec;return{options:[this._processSpecByDims([{dim:"radius",specValue:e.radius},{dim:"angle",specValue:e.angle}])]}}}I0.type=sc.polarMarkPoint,I0.coordinateType="polar",I0.builtInTheme={polarMarkPoint:IJ};class I1 extends Iq{constructor(){super(...arguments),this.type=sc.geoMarkPoint,this.name=sc.geoMarkPoint,this.coordinateType="geo"}_computePointsAttr(){return{point:function(e,t){let i=[];return(e.latestData[0]&&e.latestData[0].latestData?e.latestData[0].latestData:e.latestData).forEach(e=>{(0,oV.Z)(e.areaName)&&i.push([{x:t.nameValueToPosition(e.areaName).x+t.getRegion().getLayoutStartPoint().x,y:t.nameValueToPosition(e.areaName).y+t.getRegion().getLayoutStartPoint().y}])}),i}(this._markerData,this._relativeSeries)[0][0]}}_computeOptions(){let e=this._spec;return{options:[this._processSpecByDims([{dim:"areaName",specValue:e.areaName}])]}}}I1.type=sc.geoMarkPoint,I1.coordinateType="geo",I1.builtInTheme={geoMarkPoint:IJ},(e3=tc||(tc={})).drawStart="drawStart",e3.drawEnd="drawEnd",e3.drawing="drawing",e3.moving="moving",e3.moveStart="moveStart",e3.moveEnd="moveEnd",e3.brushActive="brushActive",e3.brushClear="brushClear";let I2={trigger:"pointerdown",updateTrigger:"pointermove",endTrigger:["pointerup","pointerleave"],resetTrigger:"pointerupoutside",hasMask:!0,brushMode:"single",brushType:"rect",brushStyle:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",strokeWidth:2},brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:10,interactiveRange:{minY:-1/0,maxY:1/0,minX:-1/0,maxX:1/0}},I3={debounce:hD.Z,throttle:hO.Z};dV(),Cp();class I4 extends yN{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},I4.defaultAttributes,e)),this.name="brush",this._activeBrushState=!1,this._activeDrawState=!1,this._cacheDrawPoints=[],this._activeMoveState=!1,this._operatingMaskMoveDx=0,this._operatingMaskMoveDy=0,this._operatingMaskMoveRangeX=[-1/0,1/0],this._operatingMaskMoveRangeY=[-1/0,1/0],this._brushMaskAABBBoundsDict={},this._firstUpdate=!0,this._onBrushStart=e=>{if(!1===this.attribute.interactive||!1===this._beforeBrushEvent(e))return;let{updateTrigger:t=I2.updateTrigger,endTrigger:i=I2.endTrigger,brushMoved:r=!0}=this.attribute;(0,ag.IX)(t).forEach(e=>this.stage.addEventListener(e,this._onBrushingWithDelay)),(0,ag.IX)(i).forEach(e=>this.stage.addEventListener(e,this._onBrushEnd)),e.stopPropagation(),this._firstUpdate=!0,this._activeMoveState=r&&this._isPosInBrushMask(e),this._activeDrawState=!this._activeMoveState,this._startPos=this.eventPosToStagePos(e),this._cacheDrawPoints=[this._startPos]},this._onBrushing=e=>{!1!==this.attribute.interactive&&!1!==this._beforeBrushEvent(e)&&(this._outOfInteractiveRange(e)||(e.stopPropagation(),this._firstUpdate?(this._activeDrawState&&this._initDraw(e),this._activeMoveState&&this._initMove(e),this._firstUpdate=!1):(this._activeDrawState&&this._drawing(e),this._activeMoveState&&this._moving(e))))},this._onBrushingWithDelay=0===this.attribute.delayTime?this._onBrushing:I3[this.attribute.delayType](this._onBrushing,this.attribute.delayTime),this._onBrushEnd=e=>{!1!==this.attribute.interactive&&(this._releaseBrushUpdateEvents(),e.preventDefault(),this._activeDrawState&&this._drawEnd(e),this._activeMoveState&&this._moveEnd(e),this._activeDrawState=!1,this._activeMoveState=!1)},this._onBrushClear=e=>{!1!==this.attribute.interactive&&!1!==this._beforeBrushEvent(e)&&(e.preventDefault(),this._isEmptyMask()||(this._clearMask(),this._dispatchBrushEvent(tc.brushClear,e)),this._activeDrawState=!1,this._activeMoveState=!1)}}_bindBrushEvents(){if(this.releaseBrushEvents(),this.attribute.disableTriggerEvent)return;let{trigger:e=I2.trigger,resetTrigger:t=I2.resetTrigger}=this.attribute;(0,ag.IX)(e).forEach(e=>this.stage.addEventListener(e,this._onBrushStart)),(0,ag.IX)(t).forEach(e=>this.stage.addEventListener(e,this._onBrushClear))}_initDraw(e){if(!1===this.attribute.interactive)return;let{brushMode:t}=this.attribute,i=this.eventPosToStagePos(e);this._cacheDrawPoints.push(i),"single"===t&&this._clearMask(),this._addBrushMask(),this._dispatchBrushEvent(tc.drawStart,e),this._activeBrushState=!1}_initMove(e){var t,i;if(!1===this.attribute.interactive)return;this._cacheMovePoint=this.eventPosToStagePos(e),this._operatingMaskMoveDx=null!=(t=this._operatingMask.attribute.dx)?t:0,this._operatingMaskMoveDy=null!=(i=this._operatingMask.attribute.dy)?i:0;let{interactiveRange:r}=this.attribute,{minY:n=-1/0,maxY:l=1/0,minX:o=-1/0,maxX:a=1/0}=r,{x1:s,x2:h,y1:d,y2:u}=this._operatingMask.globalAABBBounds;this._operatingMaskMoveRangeX=[o-s,a-h],this._operatingMaskMoveRangeY=[n-d,l-u],this._operatingMask.setAttribute("pickable",!0),this._dispatchBrushEvent(tc.moveStart,e)}_drawing(e){var t;if(!1===this.attribute.interactive)return;let i=this.eventPosToStagePos(e),{brushType:r,sizeThreshold:n=5}=this.attribute,l=this._cacheDrawPoints.length;if(l>0){let e=null!=(t=this._cacheDrawPoints[this._cacheDrawPoints.length-1])?t:{};if(i.x===e.x&&i.y===e.y)return}"polygon"===r||l<=1?this._cacheDrawPoints.push(i):this._cacheDrawPoints[l-1]=i;let o=this._computeMaskPoints();this._operatingMask.setAttribute("points",o);let{x:a,y:s}=this._startPos,{x:h,y:d}=this.eventPosToStagePos(e);(Math.abs(h-a)>n||Math.abs(s-d)>n)&&(1!==Object.keys(this._brushMaskAABBBoundsDict).length||this._activeBrushState?this._dispatchBrushEvent(tc.drawing,e):(this._activeBrushState=!0,this._dispatchBrushEvent(tc.brushActive,e)))}_moving(e){if(!1===this.attribute.interactive)return;let t=this._cacheMovePoint,i=this.eventPosToStagePos(e);if(i.x===(null==t?void 0:t.x)&&i.y===(null==t?void 0:t.y))return;let r=i.x-t.x,n=i.y-t.y,l=Math.min(this._operatingMaskMoveRangeX[1],Math.max(this._operatingMaskMoveRangeX[0],r))+this._operatingMaskMoveDx,o=Math.min(this._operatingMaskMoveRangeY[1],Math.max(this._operatingMaskMoveRangeY[0],n))+this._operatingMaskMoveDy;this._operatingMask.setAttributes({dx:l,dy:o}),this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchBrushEvent(tc.moving,e)}_drawEnd(e){if(!1===this.attribute.interactive)return;let{removeOnClick:t=!0,sizeThreshold:i=5}=this.attribute;if(this._outOfInteractiveRange(e))this._isEmptyMask()||(this._clearMask(),this._dispatchBrushEvent(tc.brushClear,e));else{let{x:r,y:n}=this._startPos,{x:l,y:o}=this.eventPosToStagePos(e);1>=Math.abs(l-r)&&1>=Math.abs(o-n)&&t?this._isEmptyMask()||(this._clearMask(),this._dispatchBrushEvent(tc.brushClear,e)):Math.abs(l-r)<i&&Math.abs(n-o)<i?(delete this._brushMaskAABBBoundsDict[this._operatingMask.name],this._container.setAttributes({}),this._container.removeChild(this._operatingMask),this._isEmptyMask()&&this._dispatchBrushEvent(tc.brushClear,e)):(this._brushMaskAABBBoundsDict[this._operatingMask.name]=this._operatingMask.AABBBounds,this._dispatchBrushEvent(tc.drawEnd,e))}}_moveEnd(e){!1!==this.attribute.interactive&&(this._operatingMask&&this._operatingMask.setAttribute("pickable",!1),this._dispatchBrushEvent(tc.moveEnd,e))}render(){this._bindBrushEvents();let e=this.createOrUpdateChild("brush-container",{},"group");this._container=e}releaseBrushEvents(){let{trigger:e=I2.trigger,resetTrigger:t=I2.resetTrigger}=this.attribute;(0,ag.IX)(e).forEach(e=>this.stage.removeEventListener(e,this._onBrushStart)),(0,ag.IX)(t).forEach(e=>this.stage.removeEventListener(e,this._onBrushClear)),this._releaseBrushUpdateEvents()}_releaseBrushUpdateEvents(){let{updateTrigger:e=I2.updateTrigger,endTrigger:t=I2.endTrigger}=this.attribute;(0,ag.IX)(e).forEach(e=>this.stage.removeEventListener(e,this._onBrushingWithDelay)),(0,ag.IX)(t).forEach(e=>this.stage.removeEventListener(e,this._onBrushEnd))}_computeMaskPoints(){let{brushType:e,xRange:t=[0,0],yRange:i=[0,0]}=this.attribute,r=this._cacheDrawPoints[0],n=this._cacheDrawPoints[this._cacheDrawPoints.length-1];return"rect"===e?[r,{x:n.x,y:r.y},n,{x:r.x,y:n.y}]:"x"===e?[{x:r.x,y:i[0]},{x:n.x,y:i[0]},{x:n.x,y:i[1]},{x:r.x,y:i[1]}]:"y"===e?[{x:t[0],y:r.y},{x:t[0],y:n.y},{x:t[1],y:n.y},{x:t[1],y:r.y}]:(0,hQ.Z)(this._cacheDrawPoints)}_addBrushMask(){var e;let{brushStyle:t,hasMask:i}=this.attribute,r=oq.polygon(Object.assign(Object.assign({points:(0,hQ.Z)(this._cacheDrawPoints),cursor:"move",pickable:!1},t),{opacity:i?null!=(e=t.opacity)?e:1:0}));r.name=`brush-${Date.now()}`,this._operatingMask=r,this._container.add(r),this._brushMaskAABBBoundsDict[r.name]=r.AABBBounds}_isPosInBrushMask(e){let t=this.eventPosToStagePos(e),i=this._container.getChildren();for(let e=0;e<i.length;e++){let{points:r=[],dx:n=0,dy:l=0}=i[e].attribute,o=r.map(e=>({x:e.x+n,y:e.y+l}));if((0,r_.O0)(o,t.x,t.y))return this._operatingMask=i[e],!0}return!1}_outOfInteractiveRange(e){let{interactiveRange:t}=this.attribute,{minY:i=-1/0,maxY:r=1/0,minX:n=-1/0,maxX:l=1/0}=t,o=this.eventPosToStagePos(e);return o.x>l||o.x<n||o.y>r||o.y<i}_beforeBrushEvent(e){var t,i;return null==(i=(t=this.attribute).beforeBrushChange)?void 0:i.call(t,e)}_dispatchBrushEvent(e,t){this._dispatchEvent(e,{operateMask:this._operatingMask,operatedMaskAABBBounds:this._brushMaskAABBBoundsDict,event:t})}_clearMask(){this._brushMaskAABBBoundsDict={},this._container.removeAllChild(),this._operatingMask=null}_isEmptyMask(){return(0,d$.Z)(this._brushMaskAABBBoundsDict)||Object.keys(this._brushMaskAABBBoundsDict).every(e=>this._brushMaskAABBBoundsDict[e].empty())}}I4.defaultAttributes=I2;class I5 extends vJ{constructor(){super(...arguments),this.layoutType="none",this.type=sc.brush,this.name=sc.brush,this.specKey="brush",this.layoutZIndex=X.Brush,this._linkedSeries=[],this._itemMap={},this._linkedItemMap={},this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._cacheInteractiveRangeAttrs=[],this._releatedAxes=[],this._regionAxisMap={},this._axisDataZoomMap={},this._zoomRecord=[]}static getSpecInfo(e){return mX(e,this.specKey,this.type,e=>!1!==e.visible)}init(){let e=this._transformBrushedMarkAttr(this._spec.inBrush),t=this._transformBrushedMarkAttr(this._spec.outOfBrush);this._option.getAllSeries().forEach(i=>{i.getActiveMarks().forEach(r=>{r&&(i.setMarkStyle(r,Object.assign({},e),"inBrush",q.Series),i.setMarkStyle(r,Object.assign({},t),"outOfBrush",q.Series))})})}_initNeedOperatedItem(){let e=this._spec.seriesId,t=this._spec.seriesIndex;this._relativeRegions.forEach(i=>{let r=[];i.getSeries().forEach(n=>{(e&&(0,ag.IX)(e).includes(n.userId.toString())||t&&(0,ag.IX)(t).includes(n.getSpecIndex())||!t&&!e)&&r.push(...n.getMarksWithoutRoot()),this._itemMap[i.id]=r})}),this._linkedSeries.forEach(e=>{this._linkedItemMap[e.id]=e.getMarksWithoutRoot()})}created(){super.created(),this.initEvent(),this._bindRegions(),this._bindLinkedSeries(),this._initRegionAxisMap(),this._initAxisDataZoomMap(),this._initNeedOperatedItem()}_bindRegions(){(0,oV.Z)(this._spec.regionId)||(0,oV.Z)(this._spec.regionIndex)?this._relativeRegions=this._option.getRegionsInUserIdOrIndex((0,ag.IX)(this._spec.regionId),(0,ag.IX)(this._spec.regionIndex)):this._relativeRegions=this._option.getAllRegions()}_bindLinkedSeries(){((0,oV.Z)(this._spec.brushLinkSeriesId)||(0,oV.Z)(this._spec.brushLinkSeriesIndex))&&(this._linkedSeries=this._option.getSeriesInUserIdOrIndex((0,ag.IX)(this._spec.brushLinkSeriesId),(0,ag.IX)(this._spec.brushLinkSeriesIndex)))}_initRegionAxisMap(){(0,oV.Z)(this._spec.axisId)?(0,ag.IX)(this._spec.axisId).forEach(e=>{this._releatedAxes.push(this._option.getComponentByUserId(e))}):(0,oV.Z)(this._spec.axisIndex)?(0,ag.IX)(this._spec.axisIndex).forEach(e=>{this._releatedAxes.push(this._option.getComponentByIndex("axes",e))}):this._releatedAxes=this._option.getComponentsByKey("axes"),this._releatedAxes.forEach(e=>{null==e||e.getRegions().forEach(t=>{this._regionAxisMap["region_"+t.id]?this._regionAxisMap["region_"+t.id].push(e):this._regionAxisMap["region_"+t.id]=[e]})})}_initAxisDataZoomMap(){this._option.getComponentsByKey("dataZoom").forEach(e=>{e.relatedAxisComponent&&(this._axisDataZoomMap[e.relatedAxisComponent.id]=e)})}initEvent(){}_compareSpec(e,t){this._brushComponents&&this._relativeRegions.forEach((e,t)=>{this._updateBrushComponent(e,t)});let i=super._compareSpec(e,t);return(0,dN.X)(t,e)||(i.reRender=!0,i.reMake=!0),i}onLayoutEnd(){var e;super.onLayoutEnd(),!this._option.disableTriggerEvent&&(null==(e=this._spec.visible)||e)&&(this._brushComponents?this._relativeRegions.forEach((e,t)=>{this._updateBrushComponent(e,t)}):(this._brushComponents=[],this._relativeRegions.forEach((e,t)=>{this._createBrushComponent(e,t)})))}_updateBrushComponent(e,t){let i=this._getBrushInteractiveAttr(e),r=this._brushComponents[t];r.setAttributes(i),this._initMarkBrushState(t,""),r.children[0].removeAllChild()}_createBrushComponent(e,t){var i,r;let n=this._getBrushInteractiveAttr(e),l=new I4(Object.assign(Object.assign(Object.assign({zIndex:this.layoutZIndex,brushStyle:vA(null==(i=this._spec)?void 0:i.style)},n),this._spec),{disableTriggerEvent:this._option.disableTriggerEvent}));l.id=null!=(r=this._spec.id)?r:`brush-${this.id}`,this.getContainer().add(l),this._brushComponents.push(l),this._cacheInteractiveRangeAttrs.push(n),l.addEventListener(tc.brushActive,i=>{this._initMarkBrushState(t,"outOfBrush"),this._emitEvent(N.brushActive,e)}),l.addEventListener(tc.drawStart,t=>{this._setRegionMarkPickable(e,!0),this._emitEvent(N.brushStart,e)}),l.addEventListener(tc.moveStart,t=>{this._setRegionMarkPickable(e,!0),this._emitEvent(N.brushStart,e)}),l.addEventListener(tc.drawing,t=>{this._setRegionMarkPickable(e,!1),this._handleBrushChange(e,t),this._emitEvent(N.brushChange,e)}),l.addEventListener(tc.moving,t=>{this._setRegionMarkPickable(e,!1),this._handleBrushChange(e,t),this._emitEvent(N.brushChange,e)}),l.addEventListener(tc.brushClear,i=>{this._setRegionMarkPickable(e,!0),this._initMarkBrushState(t,""),this._emitEvent(N.brushClear,e)}),l.addEventListener(tc.drawEnd,i=>{var r;this._setRegionMarkPickable(e,!0);let{operateMask:n}=i.detail,{updateElementsState:l=!0}=this._spec;if(null==(r=this._spec)?void 0:r.onBrushEnd)!0===this._spec.onBrushEnd(i)?(this.clearGraphic(),this._initMarkBrushState(t,""),this._emitEvent(N.brushClear,e)):(this._spec.onBrushEnd(i),this._emitEvent(N.brushEnd,e));else{let t=this._extendDataInBrush(this._inBrushElementsMap);(this._spec.zoomWhenEmpty||!(t.length>0))&&l||this._setAxisAndDataZoom(n,e),this._emitEvent(N.brushEnd,e)}}),l.addEventListener(tc.moveEnd,t=>{this._setRegionMarkPickable(e,!0);let{operateMask:i}=t.detail,{updateElementsState:r=!0}=this._spec,n=this._extendDataInBrush(this._inBrushElementsMap);(!this._spec.zoomWhenEmpty&&n.length>0||r)&&this._setAxisAndDataZoom(i,e),this._emitEvent(N.brushEnd,e)})}_getBrushInteractiveAttr(e){let t=e.getLayoutStartPoint(),i=e.getLayoutRect(),r=t.x,n=r+i.width,l=t.y,o=l+i.height;return{interactiveRange:{minY:l,maxY:o,minX:r,maxX:n},xRange:[r,n],yRange:[l,o]}}_transformBrushedMarkAttr(e){let t={};return(null==e?void 0:e.symbol)&&(t.symbolType=e.symbol),(null==e?void 0:e.symbolSize)&&(t.size=e.symbolSize),(null==e?void 0:e.color)&&(t.fill=e.color),(null==e?void 0:e.colorAlpha)&&(t.fillOpacity=e.colorAlpha),Object.assign(Object.assign({},vA(e)),t)}_handleBrushChange(e,t){let{operateMask:i}=t.detail,{updateElementsState:r=!0}=this._spec;r&&(this._reconfigItem(i,e),this._reconfigLinkedItem(i,e))}_extendDataInBrush(e){var t,i;let r=[];for(let n in e)for(let l in e[n])r.push(Object.assign({},null==(i=null==(t=e[n][l].context)?void 0:t.data)?void 0:i[0]));return r}_extendDatumOutOfBrush(e){var t,i;let r=[];for(let n in e)r.push(null==(i=null==(t=e[n].context)?void 0:t.data)?void 0:i[0]);return r}_emitEvent(e,t){var i;this.event.emit(e,{model:this,value:{operateType:e,operateRegion:t,inBrushData:this._extendDataInBrush(this._inBrushElementsMap),outOfBrushData:this._extendDatumOutOfBrush(this._outOfBrushElementsMap),linkInBrushData:this._extendDataInBrush(this._linkedInBrushElementsMap),linkOutOfBrushData:this._extendDatumOutOfBrush(this._linkedOutOfBrushElementsMap),inBrushElementsMap:this._inBrushElementsMap,outOfBrushElementsMap:this._outOfBrushElementsMap,linkedInBrushElementsMap:this._linkedInBrushElementsMap,linkedOutOfBrushElementsMap:this._linkedOutOfBrushElementsMap,zoomRecord:this._zoomRecord},vchart:null==(i=this._option)?void 0:i.globalInstance})}_reconfigItem(e,t){var i,r,n;if(!(null==e?void 0:e.globalTransMatrix)||!(null==(i=null==e?void 0:e.attribute)?void 0:i.points))return;let l=null!=(n=null==(r=null==e?void 0:e.attribute)?void 0:r.points)?n:[],{a:o,b:a,c:s,d:h,e:d,f:u}=e.globalTransMatrix,c=l.map(e=>({x:o*e.x+s*e.y+d,y:a*e.x+h*e.y+u})),{markTypeFilter:p=[]}=this._spec;this._itemMap[t.id].forEach(t=>{if(p.includes(t.type))return;let i=t.getGraphics();i&&i.length&&i.forEach(i=>{var r,n,l;let o=t.id+"_"+i.context.key,a=this._isBrushContainItem(e.globalAABBBounds,c,i);(null==(r=this._outOfBrushElementsMap)?void 0:r[o])&&a?(i.addState("inBrush",!0),this._inBrushElementsMap[null==e?void 0:e.name]||(this._inBrushElementsMap[null==e?void 0:e.name]={}),this._inBrushElementsMap[null==e?void 0:e.name][o]=i,delete this._outOfBrushElementsMap[o]):(null==(l=null==(n=this._inBrushElementsMap)?void 0:n[null==e?void 0:e.name])?void 0:l[o])&&!a&&(i.removeState("inBrush"),i.addState("outOfBrush",!0),this._outOfBrushElementsMap[o]=i,delete this._inBrushElementsMap[e.name][o])})})}_reconfigLinkedItem(e,t){var i;if(!(null==e?void 0:e.globalTransMatrix)||!(null==(i=null==e?void 0:e.attribute)?void 0:i.points))return;let r=t.getLayoutStartPoint(),n=t.getSeries().map(e=>e.id);this._linkedSeries.forEach(t=>{var i,l;if(!n.includes(t.id)){let n=t.getRegion().getLayoutStartPoint(),o=n.x-r.x,a=n.y-r.y,s=null!=(l=null==(i=null==e?void 0:e.attribute)?void 0:i.points)?l:[],{a:h,b:d,c:u,d:c,e:p,f:g}=e.globalTransMatrix,f=o||0,m=a||0,b=s.map(e=>({x:h*e.x+u*e.y+p+f,y:d*e.x+c*e.y+g+m}));e.globalAABBBounds.clone().set(e.globalAABBBounds.x1+f,e.globalAABBBounds.y1+m,e.globalAABBBounds.x2+f,e.globalAABBBounds.y2+m);let{markTypeFilter:y=[]}=this._spec;this._linkedItemMap[t.id].forEach(t=>{if(y.includes(t.type))return;let i=t.getGraphics();i&&i.length&&i.forEach(i=>{var r,n,l;let{key:o}=i.context,a=t.id+"_"+i.context.key;(null==(r=this._linkedOutOfBrushElementsMap)?void 0:r[a])&&this._isBrushContainItem(e.globalAABBBounds,b,i)?(i.addState("inBrush",!0),this._linkedInBrushElementsMap[null==e?void 0:e.name]||(this._linkedInBrushElementsMap[null==e?void 0:e.name]={}),this._linkedInBrushElementsMap[null==e?void 0:e.name][a]=i,delete this._linkedOutOfBrushElementsMap[a]):(null==(l=null==(n=this._linkedInBrushElementsMap)?void 0:n[null==e?void 0:e.name])?void 0:l[a])&&!this._isBrushContainItem(e.globalAABBBounds,b,i)&&(i.removeState("inBrush"),i.addState("outOfBrush",!0),this._linkedOutOfBrushElementsMap[a]=i)})})}})}_isBrushContainItem(e,t,i){let r=[];if(["symbol","rect"].includes(i.type)){let{x1:e,x2:n,y1:l,y2:o}=null==i?void 0:i.globalAABBBounds;return r=[{x:e,y:l},{x:n,y:l},{x:n,y:o},{x:e,y:o}],(0,r_.iO)(t,r)}return e.intersects(i.globalAABBBounds)}_initItemMap(e,t,i){let{markTypeFilter:r=[]}=this._spec;Object.entries(e).forEach(([e,n])=>{n.forEach(e=>{if(r.includes(e.type))return;let n=e.getGraphics();n&&n.length&&n.forEach(r=>{let n=e.id+"_"+r.context.key;r.removeState("inBrush"),r.removeState("outOfBrush"),i&&r.addState(i,!0),t[n]=r})})})}_initMarkBrushState(e,t){this._brushComponents.forEach((t,i)=>{i!==e&&t.children[0].removeAllChild()}),this._inBrushElementsMap={},this._outOfBrushElementsMap={},this._linkedInBrushElementsMap={},this._linkedOutOfBrushElementsMap={},this._initItemMap(this._itemMap,this._outOfBrushElementsMap,t),this._initItemMap(this._linkedItemMap,this._linkedOutOfBrushElementsMap,t)}_setRegionMarkPickable(e,t){e.getGroupMark().getGraphics().forEach(e=>e.setAttribute("childrenPickable",t))}_stateClamp(e){return Math.min(Math.max(0,e),1)}_setAxisAndDataZoom(e,t){var i;if(this._zoomRecord=[],this._spec.zoomAfterBrush){let r=e.AABBBounds;null==(i=this._regionAxisMap["region_"+t.id])||i.forEach(e=>{var i,n;let l="bottom"===e.layoutOrient||"top"===e.layoutOrient,o=null!=(i=this._spec.axisRangeExpand)?i:0,{x1:a,x2:s,y1:h,y2:d}=r,u=l?"x":"y",c=l?"width":"height",p=l?a:h,g=l?s:d;if(this._axisDataZoomMap[e.id]){let i=this._axisDataZoomMap[e.id],r=(p-t.getLayoutStartPoint()[u])/t.getLayoutRect()[c],n=(g-t.getLayoutStartPoint()[u])/t.getLayoutRect()[c],l=this._stateClamp(r-o),a=this._stateClamp(n+o);i.setStartAndEnd(Math.min(l,a),Math.max(l,a),["percent","percent"]),this._zoomRecord.push({operateComponent:i,start:l,end:a,startValue:Pc(l,i.stateScale,Pg(i.relatedAxisComponent,i.isHorizontal)),endValue:Pc(a,i.stateScale,Pg(i.relatedAxisComponent,i.isHorizontal))})}else{let i=e.getScale().range(),r=null!=(n=e.scaleRangeFactor())?n:[0,1],l=(0,ag.Z$)(i)<i[0],a=p-t.getLayoutStartPoint()[u],s=g-t.getLayoutStartPoint()[u],h=l?Math.min(a,s):Math.max(a,s),d=l?Math.max(a,s):Math.min(a,s),c=(d-i[0])/((0,ag.Z$)(i)-i[0])*(r[1]-r[0])+r[0],f=(h-i[0])/((0,ag.Z$)(i)-i[0])*(r[1]-r[0])+r[0],m=this._stateClamp(c-o),b=this._stateClamp(f+o);e.scaleRangeFactor([m,b]),e.effect.scaleUpdate(),this._zoomRecord.push({operateComponent:e,start:m,end:b,startValue:e.getScale().invert(d),endValue:e.getScale().invert(h)})}})}}_getNeedClearVRenderComponents(){return this._brushComponents}clearGraphic(){this._brushComponents&&this._brushComponents.forEach(e=>{e._container.incrementalClearChild()})}clear(){if(this._brushComponents){let e=this.getContainer();this._brushComponents.forEach((t,i)=>{this._initMarkBrushState(i,""),t.removeAllChild(),t.releaseBrushEvents(),e&&e.removeChild(t)}),this._brushComponents=null}}}I5.type=sc.brush,I5.builtInTheme={brush:{style:{fill:"#B0C8F9",fillOpacity:.2,stroke:"#B0C8F9",lineWidth:2},brushMode:"single",brushType:"rect",brushMoved:!0,removeOnClick:!0,delayType:"throttle",delayTime:0}},I5.specKey="brush";class I6 extends vJ{constructor(){super(...arguments),this.type=sc.customMark,this.specKey="customMark",this.layoutType="none",this.layoutZIndex=X.CustomMark,this.layoutLevel=Y.CustomMark}created(){super.created(),this.initMarks(),this.initEvent()}getMarkAttributeContext(){return this._markAttributeContext}_buildMarkAttributeContext(){this._markAttributeContext={vchart:this._option.globalInstance,globalScale:(e,t)=>{var i;return null==(i=this._option.globalScale.getScale(e))?void 0:i.scale(t)}}}initMarks(){if(!this._spec)return;let e=null;if(this._spec.parent){let t=this.getChart().getAllMarks().find(e=>e.getUserId()===this._spec.parent);"group"===t.type&&(e=t)}this._createExtensionMark(this._spec,e,`${dg}_series_${this.id}_extensionMark`,0)}_createExtensionMark(e,t,i,r=0){var n,l;let o=this._createMark({type:e.type,name:(0,oV.Z)(e.name)?`${e.name}`:`${i}_${r}`},{skipBeforeLayouted:!0,attributeContext:this._getMarkAttributeContext(),componentType:e.componentType,key:e.dataKey});if(o){if((0,oV.Z)(e.id)&&o.setUserId(e.id),(null==(n=this._option.globalInstance)?void 0:n.isAnimationEnable())&&e.animation){let t=bg({},bf(e.type,e,this._markAttributeContext));o.setAnimationConfig(t)}if((0,r5.Z)(t)?this._marks.addMark(o):t&&t.addMark(o),this.initMarkStyleWithSpec(o,e),"group"===e.type&&(i=`${i}_${r}`,null==(l=e.children)||l.forEach((e,t)=>{this._createExtensionMark(e,o,i,t)})),(0,oV.Z)(e.dataId)||(0,sD.Z)(e.dataIndex)){let t=this.getChart().getSeriesData(e.dataId,e.dataIndex);t&&(o.setDataView(t),t.target.addListener("change",()=>{o.getData().updateData()}))}}}initEvent(){}_compareSpec(e,t){let i=super._compareSpec(e,t);return(0,dN.X)(t,e)||(i.reMake=!0),i.change=!0,i.reRender=!0,i}_getMarkAttributeContext(){return{vchart:this._option.globalInstance,chart:this.getChart(),globalScale:(e,t)=>{var i;return null==(i=this._option.globalScale.getScale(e))?void 0:i.scale(t)},getLayoutBounds:()=>{let{x:e,y:t}=this.getLayoutStartPoint(),{width:i,height:r}=this.getLayoutRect();return(new t4.YZ).set(e,t,e+i,t+r)}}}_getLayoutRect(){let e=new t4.YZ;return this.getMarks().forEach(t=>{let i=t.getProduct();i&&e.union(i.AABBBounds)}),e.empty()?{width:0,height:0}:{width:e.width(),height:e.height()}}getBoundsInRect(e){this.setLayoutRect(e);let t=this._getLayoutRect(),{x:i,y:r}=this.getLayoutStartPoint();return{x1:i,y1:r,x2:i+t.width,y2:r+t.height}}getVRenderComponents(){let e=[],t=i=>{if(i&&"group"===i.type)i.getMarks().forEach(e=>{t(e)});else if("component"===i.type){let t=null==i?void 0:i.getComponent();t&&e.push(t)}};return this.getMarks().forEach(e=>{t(e)}),e}}I6.type=sc.customMark,I6.specKey="customMark";class I8{constructor(e,t){this._chartLayoutRect={x:0,y:0,width:1,height:1},this._col=1,this._row=1,this._elementMap=new Map,this.standardizationSpec(e),this._gridInfo=e,this._col=e.col,this._row=e.row,this._colSize=Array(this._col).fill(null),this._rowSize=Array(this._row).fill(null),this._colElements=Array(this._col).fill([]),this._rowElements=Array(this._row).fill([]),this._onError=null==t?void 0:t.onError,this.initUserSetting()}standardizationSpec(e){var t,i,r;e.col=null!=(t=e.col)?t:1,e.row=null!=(i=e.row)?i:1,e.elements=null!=(r=e.elements)?r:[]}initUserSetting(){this._gridInfo.colWidth&&this.setSizeFromUserSetting(this._gridInfo.colWidth,this._colSize,this._col,this._chartLayoutRect.width),this._gridInfo.rowHeight&&this.setSizeFromUserSetting(this._gridInfo.rowHeight,this._rowSize,this._row,this._chartLayoutRect.height),this._colSize.forEach((e,t)=>{e||(this._colSize[t]={value:0,isUserSetting:!1,isLayoutSetting:!1})}),this._rowSize.forEach((e,t)=>{e||(this._rowSize[t]={value:0,isUserSetting:!1,isLayoutSetting:!1})})}setSizeFromUserSetting(e,t,i,r){e.forEach(e=>{e.index<0&&e.index>=i||((0,sD.Z)(e.size)?t[e.index]={value:+e.size,isUserSetting:!0,isLayoutSetting:!1}:(0,nr.Z)(e.size)&&(t[e.index]={value:e.size(r),isUserSetting:!0,isLayoutSetting:!1}))})}clearLayoutSize(){this._gridInfo.colWidth&&this.setSizeFromUserSetting(this._gridInfo.colWidth,this._colSize,this._col,this._chartLayoutRect.width),this._gridInfo.rowHeight&&this.setSizeFromUserSetting(this._gridInfo.rowHeight,this._rowSize,this._row,this._chartLayoutRect.height),this._colSize.forEach(e=>{e.isLayoutSetting=!1,e.isUserSetting||(e.value=0)}),this._rowSize.forEach(e=>{e.isLayoutSetting=!1,e.isUserSetting||(e.value=0)})}getItemGridInfo(e){var t;let i,r=this._elementMap.get(e);return r||((i=null==(t=this._gridInfo.elements)?void 0:t.find(t=>{var i;if("modelId"in t&&(0,oV.Z)(t.modelId)){if((0,oV.Z)(e.model.userId)&&e.model.userId===t.modelId)return!0}else if("modelKey"in t&&(0,oV.Z)(t.modelKey)&&"modelIndex"in t&&(0,oV.Z)(t.modelIndex)&&(null!=(i=e.model.specKey)?i:e.model.type)===t.modelKey&&e.model.getSpecIndex()===t.modelIndex)return!0;return!1}))||(i={col:0,colSpan:1,row:0,rowSpan:1}),this._elementMap.set(e,i),i)}getSizeFromGrid(e,t){var i;let r="col"===t?this._colSize:this._rowSize,n=0;for(let l=e[t];l<e[t]+(null!=(i=e[`${t}Span`])?i:1);l++)n+=r[l].value;return n}getSizeFromUser(e,t){var i,r;let n="col"===t?this._colSize:this._rowSize;if(!(null==(i=n[e[t]])?void 0:i.isUserSetting))return;let l=0;for(let i=e[t];i<e[t]+(null!=(r=e[`${t}Span`])?r:1);i++){if(!n[i].isUserSetting)return;l+=n[i].value}return l}setItemLayoutSizeToGrid(e,t){if(I7(e))t.colSpan&&t.colSpan>1||this._colSize[t.col].isUserSetting||(this._colSize[t.col].value=Math.max(this._colSize[t.col].value,e.getLayoutRect().width+e.layoutPaddingLeft+e.layoutPaddingRight),this._colSize[t.col].isLayoutSetting=!0);else{if(t.rowSpan&&t.rowSpan>1||this._rowSize[t.row].isUserSetting)return;this._rowSize[t.row].value=Math.max(this._rowSize[t.row].value,e.getLayoutRect().height+e.layoutPaddingTop+e.layoutPaddingBottom),this._rowSize[t.row].isLayoutSetting=!0}}layoutGrid(e){let t="col"===e?this._colSize:this._rowSize,i="col"===e?this._chartLayoutRect.width:this._chartLayoutRect.height,r=[];t.forEach(e=>{e.isUserSetting||e.isLayoutSetting?i-=e.value:r.push(e)}),i<0&&console.warn(`layout content ${e} size bigger than chart`),r.forEach(e=>e.value=i/r.length)}getItemPosition(e){let t=this.getItemGridInfo(e),i={x:this._chartLayoutRect.x,y:this._chartLayoutRect.y};for(let e=0;e<t.col;e++)i.x+=this._colSize[e].value;for(let e=0;e<t.row;e++)i.y+=this._rowSize[e].value;return i.x+=e.layoutPaddingLeft+e.layoutOffsetX,i.y+=e.layoutPaddingTop+e.layoutOffsetY,i}getItemLayoutRect(e){var t,i;let r=this.getItemGridInfo(e);return{width:(null!=(t=this.getSizeFromGrid(r,"col"))?t:this._chartLayoutRect.width)-e.layoutPaddingLeft-e.layoutPaddingRight,height:(null!=(i=this.getSizeFromGrid(r,"row"))?i:this._chartLayoutRect.height)-e.layoutPaddingTop-e.layoutPaddingBottom}}layoutItems(e,t,i,r){this._chartLayoutRect=i,this._chartViewBox=r,this.clearLayoutSize(),t.sort((e,t)=>t.layoutLevel-e.layoutLevel);let n=t.filter(e=>"normal"===e.layoutType&&!1!==e.getModelVisible()),l=n.filter(e=>I7(e)),o=n.filter(e=>!I7(e));n.forEach(e=>{this.layoutOneItem(e,"user",!1)});let a=t.filter(e=>"region-relative"===e.layoutType),s=a.filter(e=>I7(e)),h=a.filter(e=>!I7(e));s.forEach(e=>this.layoutOneItem(e,"user",!1)),this.layoutGrid("col"),o.forEach(e=>this.layoutOneItem(e,"colGrid",!1)),h.forEach(e=>{this.layoutOneItem(e,"colGrid",!1)}),this.layoutGrid("row"),h.forEach(e=>{this.layoutOneItem(e,"grid",!1)}),l.forEach(e=>this.layoutOneItem(e,"grid",!1)),s.forEach(e=>{this.layoutOneItem(e,"grid",!0)}),this.layoutGrid("col"),t.filter(e=>"region"===e.layoutType).forEach(e=>this.layoutOneItem(e,"grid",!1)),this.layoutAbsoluteItems(t.filter(e=>"absolute"===e.layoutType)),t.filter(e=>"absolute"!==e.layoutType).forEach(e=>{e.setLayoutStartPosition(this.getItemPosition(e))})}layoutAbsoluteItems(e){e.forEach(e=>{e.absoluteLayoutInRect(this._chartLayoutRect)})}layoutOneItem(e,t,i){var r,n;let l="rowGrid"===t||"grid"===t?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),o="colGrid"===t||"grid"===t?this.getSizeFromGrid.bind(this):this.getSizeFromUser.bind(this),a=this.getItemGridInfo(e),s={width:(null!=(r=o(a,"col"))?r:this._chartLayoutRect.width)-e.layoutPaddingLeft-e.layoutPaddingRight,height:(null!=(n=l(a,"row"))?n:this._chartLayoutRect.height)-e.layoutPaddingTop-e.layoutPaddingBottom},h=e.computeBoundsInRect(s);(0,sD.Z)(h.width)||(h.width=s.width),(0,sD.Z)(h.height)||(h.height=s.height),e.setLayoutRect("grid"!==t?h:s),this.setItemLayoutSizeToGrid(e,a)}}function I7(e){return"left"===e.layoutOrient||"right"===e.layoutOrient}I8.type="grid";var I9=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};let Le=new t4.FB;dV(),uT(),uN(),ct();let Lt="M -0.5 -0.5, L -0.5 0.5, L 0.5 -0.5, Z",Li="M -0.5 -0.5, L -0.5 0.5, L 0.5 0.5, Z",Lr="M -0.5 -0.5, L 0.5 -0.5, L 0.5 0.5, Z",Ln="M 0.5 -0.5, L 0.5 0.5, L -0.5 0.5, Z",Ll={tl:Lt,tr:Lr,bl:Li,br:Ln,lt:Lt,lb:Li,rt:Lr,rb:Ln};class Lo extends yN{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},Lo.defaultAttributes,e)),this.name="poptip",this.positionList=["top","tl","tr","bottom","bl","br","left","lt","lb","right","rt","rb"]}render(){var e,t,i,r,n,l,o,a,s;let{titleStyle:h={},position:d,contentStyle:u={},panel:c,logoSymbol:p,poptipAnchor:g="position",logoText:f,logoTextStyle:m={},triangleMode:b="default",space:y=4,minWidth:v=0,maxWidth:_=1/0,padding:C=4,maxWidthPercent:x,visible:w,state:S,dx:A=0,dy:k=0,positionBounds:M}=this.attribute,{title:T="",content:R=""}=this.attribute;T=this.attribute.titleFormatMethod?this.attribute.titleFormatMethod(T):T,R=this.attribute.contentFormatMethod?this.attribute.contentFormatMethod(R):R;let E=(0,_6.o)(C),P=this.createOrUpdateChild("poptip-content",{x:0,y:0,zIndex:1},"group");this.group=P;let B=_-E[1]-E[3],I=(0,oV.Z)(T)&&!1!==w,L=Object.assign(Object.assign({text:(0,ri.Z)(T)?T:[T],visible:I,wrap:!0},h),{x:E[3],y:E[0],maxLineWidth:B,textAlign:"left",textBaseline:"top"}),F=P.createOrUpdateChild("poptip-title",L,"text");(0,d$.Z)(null==S?void 0:S.title)||(F.states=S.title);let H=F.AABBBounds,O=H.height(),D=H.width(),z=O+y;I||(z=0);let W=(0,oV.Z)(R)&&!1!==w,Z=Object.assign(Object.assign({text:(0,ri.Z)(R)?R:[R],visible:W,wrap:!0},u),{x:E[3],y:E[0]+z,maxLineWidth:B,textAlign:"left",textBaseline:"top"}),N=P.createOrUpdateChild("poptip-content",Z,"text");(0,d$.Z)(null==S?void 0:S.content)||(N.states=S.content);let $=N.AABBBounds,j=$.height(),G=$.width();W&&(z+=j),this.titleShape=F,this.contentShape=N;let V=(0,t0.Fp)(D+E[1]+E[3],G+E[1]+E[3]);V>_?V=_:V<v&&(V=v);let U=E[0]+E[2]+z,{visible:K,square:X}=c,Y=I9(c,["visible","square"]);if(X){let e=(0,t0.Fp)(V,U);V=e;let t=e-U;U=e,F.setAttributes({dy:t/2}),N.setAttributes({dy:t/2})}let q=null!=(e=Y.size)?e:12,J=(0,ri.Z)(q)?[q[0]+(null!=(t=Y.space)?t:0),q[1]+(null!=(i=Y.space)?i:0)]:q+(null!=(r=Y.space)?r:0),Q=null!=(n=Y.lineWidth)?n:1,ee=this.stage?[null!=(l=this.stage.viewWidth)?l:this.stage.width,null!=(o=this.stage.viewHeight)?o:this.stage.height]:void 0;if(ee){let e=this.AABBBounds,t=Math.max(null!=(a=this.attribute.x)?a:e.x1,ee[0]-e.x1);if((t=Math.min(t-(((0,ri.Z)(q)?q[0]:12)+3),t*x))<V){V=t;let e=E[1]+E[3];F.setAttribute("maxLineWidth",t-e),N.setAttribute("maxLineWidth",t-e),U=E[0]+E[2],I&&(U+=F.AABBBounds.height()+y),U+=N.AABBBounds.height()}}let et="auto"===d||(0,ri.Z)(d),ei=(0,ri.Z)(d)?d:this.positionList,er,en=-1/0;for(let e=0;e<ei.length+1;e++){let t=et?ei[e===ei.length?er:e]:d,i="arrow2Left",r=((0,ri.Z)(q)?q[0]:q)/4,n=0;"top"===t||"bottom"===t||"left"===t||"right"===t?i="arrow2Left":"concise"===b&&(i=Ll[t],r=["tl","bl","rt","rb"].includes(t)?((0,ri.Z)(q)?q[0]:q)/2:-((0,ri.Z)(q)?q[0]:q)/2,n=["tl","tr","lb","rb"].includes(t)?-((0,ri.Z)(q)?q[1]:q)/2:((0,ri.Z)(q)?q[1]:q)/2);let{angle:l,offset:o}=this.getAngleAndOffset(t,V,U,(0,ri.Z)(J)?J:[J,J-Q],i),a,h={x:0,y:0};if("bounds"===g&&M&&(h=this.calculateAnchorPoint(t,M)),(0,ni.Z)(K)){let e;a=P.createOrUpdateChild("poptip-symbol-panel",Object.assign(Object.assign({},Y),{visible:K&&(W||I),x:r,y:n,strokeBoundsBuffer:-1,boundsPadding:-2,anchor:[0,0],symbolType:i,angle:l,dx:o[0],dy:o[1]-(null!=(s=Y.space)?s:0),size:q,zIndex:9}),"symbol"),(0,d$.Z)(null==S?void 0:S.panel)||(a.states=S.panel),e=c.panelSymbolType?P.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},Y),{visible:K&&(W||I),x:0,y:0,symbolType:"rect",size:[V,U],zIndex:-8}),"symbol"):P.createOrUpdateChild("poptip-rect-panel",Object.assign(Object.assign({},Y),{visible:K&&(W||I),x:0,y:0,width:V,height:U,zIndex:-8}),"rect"),(0,d$.Z)(null==S?void 0:S.panel)||(e.states=S.panel)}if(P.setAttributes({x:-o[0]+A+h.x,y:-o[1]+k+h.y,anchor:[r,n]}),p){let{size:e=12}=p,t=(0,ri.Z)(e)?e:[e,e];"auto"===t[1]&&(t[1]=U),"auto"===t[0]&&(t[0]=U);let i=t[0];P.createOrUpdateChild("poptip-logo",Object.assign(Object.assign({},p),{x:0,y:U/2,visible:K&&(W||I),zIndex:10,size:t}),"symbol"),P.setAttributes({x:-o[0]+A+i/2,y:-o[1]+k}),f&&P.createOrUpdateChild("poptip-logo-text",Object.assign(Object.assign({},m),{x:0,y:U/2,visible:K&&(W||I),text:f,textAlign:"center",textBaseline:"middle",zIndex:10}),"text")}if(!ee)break;{Le.setValue(0,0,V,U).transformWithMatrix(P.globalTransMatrix);let i=(new t4.YZ).setValue(0,0,ee[0],ee[1]);if(et){if((0,ai.RA)(Le,i,!1))break;{let t=(0,ai.di)(Le,i,!1),r=(t.x2-t.x1)*(t.y2-t.y1);r>en&&(en=r,er=e)}}if(["top","bottom","left","right"].includes(t)){let e="top"===t||"bottom"===t,r="left"===t||"right"===t,n=!1;if(e?n="top"===t&&Le.y1<0||"bottom"===t&&Le.y2>i.y2:r&&(n="left"===t&&Le.x1<0||"right"===t&&Le.x2>i.x2),!n){let t=0,n=((0,ri.Z)(q)?q[1]:q)/2;e?(Le.x1<0?t=-Le.x1:Le.x2>i.x2&&(t=i.x2-Le.x2),P.setAttribute("x",P.attribute.x+t),a.setAttribute("dx",(0,t0.VV)((0,t0.Fp)(a.attribute.dx-t,n),Le.width()-n))):r&&(Le.y1<0?t=-Le.y1:Le.y2>i.y2&&(t=i.y2-Le.y2),P.setAttribute("y",P.attribute.y+t),a.setAttribute("dy",(0,t0.VV)((0,t0.Fp)(a.attribute.dy-t,n),Le.height()-n)));break}}if(!et)break}}}calculateAnchorPoint(e,t){if(!t)return{x:0,y:0};let{x:i,y:r}=this.attribute,{x1:n,y1:l,x2:o,y2:a}=t,s=o-n,h=a-l;switch(e){case"top":case"tl":case"tr":return{x:n+s/2-i,y:l-r};case"bottom":case"bl":case"br":return{x:n+s/2-i,y:a-r};case"left":case"lt":case"lb":return{x:n-i,y:l+h/2-r};case"right":case"rt":case"rb":return{x:o-i,y:l+h/2-r};default:return{x:0,y:0}}}getAngleAndOffset(e,t,i,r,n){let l="arrow2Left"===n?r[1]/2:r[1];switch(e){case"tl":return{angle:"arrow2Left"===n?t0.pi/2*3:0,offset:"arrow2Left"===n?[t/4,i+l]:[0,i+l]};case"top":return{angle:t0.pi/2*3,offset:[t/2,i+l]};case"tr":return{angle:"arrow2Left"===n?t0.pi/2*3:0,offset:"arrow2Left"===n?[t/4*3,i+l]:[t,i+l]};case"rt":return{angle:0,offset:"arrow2Left"===n?[-l,i/5]:[-l,0]};case"right":return{angle:0,offset:[-l,i/2]};case"rb":return{angle:0,offset:"arrow2Left"===n?[-l,i/5*4]:[-l,i]};case"bl":return{angle:"arrow2Left"===n?t0.pi/2:0,offset:"arrow2Left"===n?[t/4,-l]:[0,-l]};case"bottom":return{angle:t0.pi/2,offset:[t/2,-l]};case"br":return{angle:"arrow2Left"===n?t0.pi/2:0,offset:"arrow2Left"===n?[t/4*3,-l]:[t,-l]};case"lt":return{angle:"arrow2Left"===n?t0.pi:0,offset:"arrow2Left"===n?[t+l,i/5]:[t+l,0]};case"left":return{angle:t0.pi,offset:[t+l,i/2]};case"lb":return{angle:"arrow2Left"===n?t0.pi:0,offset:"arrow2Left"===n?[t+l,i/5*4]:[t+l,i]}}}}Lo.defaultAttributes={position:"rt",visible:!0,title:null,content:null,titleStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},contentStyle:{fontSize:12,fill:"#000",textAlign:"left",textBaseline:"top"},panel:{},maxWidthPercent:.8,space:8,padding:10};let La=class{render(e,t,i,r,n,l,o,a,s,h,d,u,c){var p,g,f;if(1===e._showPoptip){let{visible:t,visibleCb:i}=e.attribute.poptip||{};if(!1===t||i&&!1===i(e))return;let r={};(0,ha.Z)(r,Lo.defaultAttributes,e.attribute.poptip?e.attribute.poptip:{}),this.poptipComponent?this.poptipComponent.initAttributes(r):this.poptipComponent=new Lo(r);let n=e.attribute.poptip||{};if("text"===e.type&&null==n.title&&null==n.content){let t={};f=n,(0,ha.Z)(t,dG.poptip,f),(n=t).content=null!=(p=n.content)?p:e.attribute.text}let l=e.globalTransMatrix;this.poptipComponent.setAttributes(Object.assign(Object.assign({visibleAll:!0,pickable:!1,childrenPickable:!1,poptipAnchor:"bounds"},n),{x:l.e,y:l.f,positionBounds:e.globalAABBBounds})),h.stage.tryInitInteractiveLayer();let o=h.stage.getLayer("_builtin_interactive");o&&o.add(this.poptipComponent)}else 2===e._showPoptip&&(e._showPoptip=0,this.poptipComponent&&(this.poptipComponent.setAttributes({visibleAll:!1}),null==(g=this.poptipComponent.parent)||g.removeChild(this.poptipComponent),this.poptipComponent=null))}};La=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([tS()],La);var Ls=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o};class Lh{constructor(){this.activeEvent="onRegister",this._uid=tm.GenAutoIncrementId(),this.poptip=e=>{let t=e.target;this.needHide(t)?this.unpoptip(e):t!==this.activeGraphic&&(this.needShow(t)&&(t.setAttributes({}),t._showPoptip=1),this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2),this.setActiveGraphic(t,!0))},this.unpoptip=e=>{this.activeGraphic&&(this.activeGraphic.setAttributes({}),this.activeGraphic._showPoptip=2,this.setActiveGraphic(null,!0))}}activate(e){this.pluginService=e;let{stage:t}=this.pluginService;t.addEventListener("pointerover",this.poptip)}needHide(e){return e.isContainer||!e.attribute}needShow(e){return!!e.attribute.poptip}setActiveGraphic(e,t){this.activeGraphic=e,this.pluginService.stage.renderNextFrame()}deactivate(e){let{stage:t}=this.pluginService;t.removeEventListener("pointerover",this.poptip)}}let Ld=class extends Lh{constructor(){super(...arguments),this.name="poptip",this.key=this.name+this._uid}};Ld=Ls([tS()],Ld);let Lu=class extends Lh{constructor(){super(...arguments),this.name="poptipForText",this.key=this.name+this._uid,this.pointerlave=e=>{let{stage:t}=this.pluginService;e.target===t&&this.unpoptip(e)}}activate(e){super.activate(e);let{stage:t}=this.pluginService;t.addEventListener("pointerleave",this.pointerlave)}needHide(e){return"text"!==e.type||!e.cliped||e.isContainer||!e.attribute||e.attribute.disableAutoClipedPoptip}needShow(e){return!0}deactivate(e){let{stage:t}=this.pluginService;super.deactivate(e),t.removeEventListener("pointerleave",this.pointerlave)}};Lu=Ls([tS()],Lu);let Lc=new tb((e,t,i,r)=>{i(La)||(e(La).toSelf().inSingletonScope(),e(aL).toService(La)),i(Ld)||(e(Ld).toSelf(),e(oQ).toService(Ld)),i(Lu)||(e(Lu).toSelf(),e(oQ).toService(Lu))}),Lp="vchart-tooltip",Lg=`${Lp}-container`,Lf=`${Lp}-title`,Lm=`${Lp}-content-box`,Lb={offsetX:10,offsetY:10},Ly="99999999999999";function Lv(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/  /g," &nbsp;")}let L_=(e,t)=>e?(t||(t=e.getBoundingClientRect()),e.offsetWidth>0?t.width/e.offsetWidth:e.offsetHeight>0?t.height/e.offsetHeight:1):1,LC=e=>(0,r6.Z)(e)&&""!==(null==e?void 0:e.trim())||(0,nw.Z)(e)?Lv(e):"",Lx=(e,t)=>{let i;if((0,oV.Z)(e)){if((0,nw.Z)(e))i=e;else if((0,nr.Z)(e)){let r=e(t);(0,nw.Z)(r)&&(i=r)}}return i},Lw={left:[-2,0],right:[2,0],top:[0,-2],bottom:[0,2],insideTop:[0,-1.5],insideBottom:[0,1.5],insideLeft:[-1.5,0],insideRight:[1.5,0],insideTopLeft:[-1.5,-1.5],insideTopRight:[1.5,-1.5],insideBottomLeft:[-1.5,1.5],insideBottomRight:[1.5,1.5],lt:[-2,-2],tl:[-2,-2],rt:[2,-2],tr:[2,-2],bl:[-2,2],lb:[-2,2],br:[2,2],rb:[2,2],inside:[0,0],center:[0,0],centerBottom:[0,1],centerTop:[0,-1],centerLeft:[-1,0],centerRight:[1,0]},LS=(e,t,i=2)=>{var r,n;return null!=(n=null==(r=Lw[e])?void 0:r[+("x"!==t)])?n:i},LA=e=>(0,r9.Z)(e)&&((0,oV.Z)(e.left)||(0,oV.Z)(e.right)||(0,oV.Z)(e.top)||(0,oV.Z)(e.bottom)),Lk=e=>(0,r9.Z)(e)&&((0,oV.Z)(e.x)||(0,oV.Z)(e.y));class LM extends v_{constructor(){super(...arguments),this._visible=!0,this._isReleased=!1,this.showTooltip=(e,t,i)=>{let{changePositionOnly:r}=i;return r?this.changeTooltipPosition(i,t):this.changeTooltip(!0,i,t)},this.changeTooltip=(e,t,i)=>this._isReleased?1:e?this.changeTooltipPosition(t,i):(this._updateTooltip(!1,t),0),this.changeTooltipPosition=(e,t)=>{var i,r,n,l,o;if(this._isReleased)return 1;let a=e.event,{tooltipSpec:s,activeTooltipSpec:h,changePositionOnly:d}=e;if(!h)return 1;let u=h.activeType;if(h.handler)return null!=(n=null==(r=(i=h.handler).showTooltip)?void 0:r.call(i,u,t,e))?n:0;let c=this._getActualTooltipPosition(h,e,this._getTooltipBoxSize(h,d));h.position=c;let p=null!=(l=h.updatePosition)?l:null==(o=s[u])?void 0:o.updatePosition;p&&(h.position=p(h.position,t,e));let g=!1!==(null==h?void 0:h.visible);return t&&"pointerout"!==a.type&&h.visible&&(h.title||h.content)||(g=!1),this._updateTooltip(g,Object.assign(Object.assign({},e),{changePositionOnly:d})),0},this._getActualTooltipPosition=(e,t,i)=>{var r,n,l,o,a,s,h,d,u;let c=this._chartOption.getRectByDimensionData,{tooltipSpec:p}=t,g={x:1/0,y:1/0};if(!p)return g;let f=t.event,{activeType:m,data:b}=e,y="dimension"===m?null==(n=null==(r=b[0])?void 0:r.data)?void 0:n[0]:null==b?void 0:b[0],{offsetX:v,offsetY:_}=this._option,C=p[m],x=mq(null==C?void 0:C.position,b,t),w=null!=(l=mq(null==C?void 0:C.positionMode,b,t))?l:"mark"===m?"mark":"pointer",{width:S=0,height:A=0}=null!=i?i:{},k="canvas"===p.renderMode,M=null==(o=null==t?void 0:t.chart)?void 0:o.getCanvasRect(),T=null!=(a=null==M?void 0:M.width)?a:500,R=null!=(s=null==M?void 0:M.height)?s:500,E=!1,P={width:0,height:0},B,I={x:0,y:0},L={x:0,y:0},F=1,H=1,O=sq(this._env);if(O&&!p.confine?(P.width=window.innerWidth,P.height=window.innerHeight):(P.width=T,P.height=R),O&&!k){let e=this._getParentElement(p);L=null!=(d=null==(h=null==e?void 0:e.getBoundingClientRect)?void 0:h.call(e))?d:g;let t=null!=(u=this._compiler.getCanvas())?u:this._chartContainer;I={x:(B=null==t?void 0:t.getBoundingClientRect()).x-L.x,y:B.y-L.y},F=L_(t,B),H=L_(e,L)}let D=H/F,z={},W={x:x,y:x},Z={x:["left","right"],y:["top","bottom"]},N=({orient:e,mode:i,offset:r},n)=>{var l;let o,a,s=t.model,h=null==s?void 0:s.getLayoutStartPoint(),d=null!=r?r:"x"===n?v:_;if("mark"===i){E=!0;let e=t.item,i=null==e?void 0:e.AABBBounds;i&&h&&(o=("x"===n?i.x1:i.y1)+h[n],a=("x"===n?i.x2:i.y2)+h[n])}else if(c&&"crosshair"===i&&"cartesian"===(null==(l=null==y?void 0:y.series)?void 0:l.coordinate)&&y.datum&&y.datum.length){E=!0;let e=c(y,h);e&&(o=e.start[n],a=e.end[n])}else W[n]=e;if(E){let t=Z[n][0],i="x"===n?S:A;switch(LS(e,n)){case -2:z[t]=o-i*D-d;break;case -1.5:z[t]=o+d;break;case 0:z[t]=(o+a)/2-i*D/2;break;case -1:z[t]=(o+a)/2-i*D-d;break;case 1:z[t]=(o+a)/2+d;break;case 1.5:z[t]=a-i*D-d;break;case 2:z[t]=a+d}}},$=["x","y"];if((0,r9.Z)(x))if(LA(x)){let{left:e,right:t,top:i,bottom:r}=x;z.left=Lx(e,f),z.top=Lx(i,f),z.right=Lx(t,f),z.bottom=Lx(r,f)}else Lk(x)&&$.forEach(e=>{let t=x[e];(0,nw.Z)(t)||(0,nr.Z)(t)?z[Z[e][0]]=Lx(t,f):N(t,e)});else(0,oV.Z)(x)&&(N({orient:x,mode:w},"x"),N({orient:x,mode:w},"y"));let j={x:null,y:null};return $.forEach(e=>{var t;let i="x"===e?S:A,r="x"===e?T:R,n="x"===e?v:_,l=LS(W[e],e);if((0,sD.Z)(z[Z[e][0]]))j[e]=z[Z[e][0]];else if((0,sD.Z)(z[Z[e][1]]))j[e]=r-i*D-z[Z[e][1]];else{let t="x"===e?f.canvasX:f.canvasY;j[e]=l>0?t+n:0===l?t-i*D/2:t-i*D-n}j[e]*=F,O&&(j[e]+=I[e]),j[e]/=H;let o="x"===e?P.width:P.height,a=p.confine?-(L[e]-(null!=(t=null==B?void 0:B[e])?t:0)/F)/H:-L[e]/H,s=o/H+a-i;2!==l&&j[e]<a?E?j[e]=a:(j[e]+=0===l?n+i/2:2*n+i,j[e]>s&&(j[e]=s)):-2!==l&&j[e]>s&&(E?j[e]=s:(j[e]-=0===l?n+i/2:2*n+i,j[e]<a&&(j[e]=a)))}),j}}get env(){return this._env}onAdd(e){super.onAdd(e);let t=e.component;this._component=t,this._chartOption=t.getOption(),this._env=this._chartOption.mode,this._chartContainer=this._chartOption.globalInstance.getContainer(),this._compiler=t.getCompiler(),this._initFromSpec()}hideTooltip(e){return this.changeTooltip(!1,e)}release(){var e,t,i,r;let n=null!=(t=null==(e=this._component)?void 0:e.getSpec())?t:{};n.handler?null==(r=(i=n.handler).release)||r.call(i):(this._removeTooltip(),this._isReleased=!0,this._chartOption=null,this._component=null)}_getDefaultOption(){var e,t;let{offset:i}=this._component.getSpec();return i?{offsetX:null!=(e=i.x)?e:Lb.offsetX,offsetY:null!=(t=i.y)?t:Lb.offsetY}:Lb}_getParentElement(e){return e.parentElement}getTooltipContainer(){return this._container}_initFromSpec(){this._option=this._getDefaultOption()}reInit(){this._initFromSpec()}}LM.specKey="tooltip";let LT=(e,t)=>(0,oV.Z)(e)?(0,ri.Z)(e)?e.map(e=>`${e}px`).join(" "):`${e}px`:null!=t?t:"initial",LR=(e={},t={})=>{var i,r;(0,oV.Z)(e.fontFamily)&&(t.fontFamily=e.fontFamily);let n=null!=(i=e.fill)?i:e.fontColor;return(0,oV.Z)(n)&&(t.color=n),(0,oV.Z)(e.fontWeight)&&(t.fontWeight=e.fontWeight),(0,oV.Z)(e.textAlign)&&(t.textAlign=e.textAlign),(0,oV.Z)(e.fontSize)&&(t.fontSize=LT(e.fontSize)),(0,oV.Z)(e.maxWidth)&&(t.maxWidth=LT(e.maxWidth)),e.multiLine||(0,oV.Z)(e.maxWidth)&&!1!==e.multiLine?(t.whiteSpace="initial",t.wordBreak=null!=(r=e.wordBreak)?r:"break-word"):(t.wordBreak="normal",t.whiteSpace="nowrap"),t},LE=(e={})=>{let{lineHeight:t}=e;return e.fontSize?s$(t,e.fontSize):0},LP=(e={})=>{var t,i,r,n;let{style:l={},enterable:o,transitionDuration:a}=e,{panel:s={},titleLabel:h,shape:d,keyLabel:u,valueLabel:c,spaceRow:p,align:g}=l,{panelStyle:f,panelPadding:m}=LB(s),b={marginTop:"0px",marginBottom:"0px"};f.pointerEvents=o?"auto":"none",a&&(f.transitionDuration=a?`${a}ms`:"initial",f.transitionProperty=a?"transform":"initial",f.transitionTimingFunction=a?"ease-out":"initial"),(0,sD.Z)(p)&&(b.marginBottom=`${p}px`);let y={width:LT(null!=(t=null==d?void 0:d.size)?t:8)},v=LR(h),_=LR(u),C=LR(c),x="right"===g?"marginLeft":"marginRight";"right"===g&&(f.direction="rtl"),(0,r5.Z)(v.textAlign)&&(v.textAlign="right"===g?"right":"left"),(0,r5.Z)(_.textAlign)&&(_.textAlign="right"===g?"right":"left"),(0,r5.Z)(C.textAlign)&&(C.textAlign="right"===g?"left":"right"),y[x]=LT(null!=(i=d.spacing)?i:8),_[x]=LT(null!=(r=u.spacing)?r:26),C[x]=LT(null!=(n=c.spacing)?n:0);let w=Math.max(LE(c),LE(u));return b.lineHeight=w>0?`${w}px`:"20px",{panelPadding:m,row:b,panel:f,title:v,shape:y,key:_,value:C}},LB=e=>{var t;let{backgroundColor:i,border:r,shadow:n,padding:l}=e,o={borderWidth:`${null!=(t=null==r?void 0:r.width)?t:0}px`},a=null;(null==r?void 0:r.color)&&(o.borderColor=r.color),i&&(o.backgroundColor=i),o.boxShadow=n?`${n.x}px ${n.y}px ${n.blur}px ${n.spread}px ${n.color}`:"initial";let{radius:s}=null!=r?r:{};return(0,oV.Z)(s)&&(o.borderRadius=(0,sD.Z)(s)?`${s}px`:`${s}`),l&&(o.padding=LT(a=(0,_6.o)(l))),{panelStyle:o,panelPadding:a}};function LI(e,t){e&&e.style&&t&&Object.keys(t).forEach(i=>{e.style[i]=t[i]})}let LL=e=>{hp.registerComponentPlugin(e.type,e)};class LF extends LM{getVisibility(){return!!this._rootDom&&"visible"===this._rootDom.style.visibility}setVisibility(e){e!==this.getVisibility()&&this._rootDom&&(this._rootDom.style.visibility=e?"visible":"hidden")}getRootDom(){return this._rootDom}constructor(){super(LF.type),this.type=wr.dom,this._tooltipContainer=null==sY?void 0:sY.body}onAdd(e){super.onAdd(e),this._initStyle(),this.initEl()}initEl(){let e=this._component.getSpec().parentElement;if(sY&&e&&e.children&&e.children.length){for(let t=0;t<e.children.length;t++)if(e.children[t].classList.contains(Lg)){this._container=e.children[t];break}this._container||(this._container=sY.createElement("div"),this._container.style.position="relative",this._container.style.zIndex=Ly,this._container.classList.add(Lg),e.appendChild(this._container))}}initRootDom(){var e;let t=this._component.getSpec(),i=document.createElement("div"),r=null==(e=this._chartOption)?void 0:e.getTheme("fontFamily");LI(i,Object.assign({left:"0",top:"0",pointerEvents:"none",padding:"12px",position:"absolute",zIndex:Ly,fontFamily:null!=r?r:hb.fontFamily,fontSize:"11px",borderRadius:"3px",borderStyle:"solid",lineHeight:"initial",background:"#fff",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.1)",maxWidth:"100wh",maxHeight:"100vh",visibility:"hidden"},this._domStyle.panel)),i.classList.add(t.className),i.setAttribute("vchart-tooltip-id",`${this.id}`),this._container.appendChild(i),this._rootDom=i}_getTooltipBoxSize(e,t){var i;this._rootDom||this.initRootDom(),t||this._updateDomStringByCol(e),this._updateDomStyle("height",t);let r=null==(i=this._rootDom)?void 0:i.getBoundingClientRect();return{width:null==r?void 0:r.width,height:null==r?void 0:r.height}}_removeTooltip(){this._rootDom&&this._rootDom.parentNode&&(this._rootDom.parentNode.removeChild(this._rootDom),this._rootDom=null),this._container=null}_updateTooltip(e,t){var i,r;if(e&&this._rootDom){let{tooltipSpec:n,activeTooltipSpec:l}=t;t.changePositionOnly||(this._tooltipActual=l);let o=this._rootDom;if(o){let{x:a=0,y:s=0}=null!=(i=l.position)?i:{},h={x:a,y:s},d=this.getVisibility();n.updateElement&&(this._updatePosition(null!=(r=this._cacheCustomTooltipPosition)?r:{x:a,y:s}),n.updateElement(o,l,t),h=this._getActualTooltipPosition(l,t,{width:o.offsetWidth,height:o.offsetHeight}),this._cacheCustomTooltipPosition=h),!d&&e&&(this._rootDom.style.transition="none",this._updatePosition(h,!1),this._rootDom.getBoundingClientRect()),this._updatePosition(h)}this.setVisibility(e)}else this.setVisibility(e),this._cacheCustomTooltipPosition=void 0}_initStyle(){let e=this._component.getSpec();this._domStyle=LP(e)}_updateDomStringByCol(e){var t;let{title:i={},content:r}=e,n=r&&r.length,l=this._domStyle.row,o=[...this._rootDom.children],a=o.find(e=>e.className.includes(Lf)),s=o.find(e=>e.className.includes(Lm));if(!a&&!1!==i.visible){a=document.createElement("h2");let e=document.createElement("span");a.appendChild(e),a.classList.add(Lf),this._rootDom.firstChild?this._rootDom.insertBefore(a,this._rootDom.firstChild):this._rootDom.appendChild(a)}a&&!1!==i.visible?(LI(a,Object.assign(Object.assign(Object.assign({},this._domStyle.title),n?l:{marginBottom:"0px"}),{marginTop:"0px"})),a.firstChild.innerHTML=`${null!=(t=i.value)?t:""}`):a&&!1===i.visible&&a.parentNode.removeChild(a);let h=["shape","key","value"];if(!s&&n&&(s=document.createElement("div"),h.forEach(e=>{let t=document.createElement("div");t.classList.add(`${Lp}-column`),t.classList.add(`${Lp}-${e}-column`),t.setAttribute("data-col",e),s.appendChild(t)}),s.classList.add(Lm),this._rootDom.appendChild(s)),s&&n){let e=[...s.children];LI(s,{whiteSpace:"nowrap"}),e.forEach((e,t)=>{let i=e.getAttribute("data-col");if(i&&h.includes(i)){let t="shape"===i&&r.every(e=>!e.hasShape||!e.shapeType);LI(e,Object.assign(Object.assign({},this._domStyle[i]),{display:t?"none":"inline-block",verticalAlign:"top"}));let n=[...e.children];n.slice(r.length).forEach(e=>{e.parentNode.removeChild(e)}),r.forEach((t,o)=>{let a=n[o];a||((a=document.createElement("div")).classList.add(`${Lp}-${i}`),e.appendChild(a));let s=Object.assign({},l);o===r.length-1&&(s.marginBottom="0px"),s.display=!1===t.visible?"none":"block",s.height="initial","key"===i?(a.innerHTML=LC(t.key),t.keyStyle&&LR(t.keyStyle,s)):"value"===i?(a.innerHTML=LC(t.value),t.valueStyle&&LR(t.valueStyle,s)):"shape"===i&&(a.innerHTML=function(e,t){var i,r,n,l,o,a;let s,h;if(!e||!e.hasShape||!e.shapeType)return"";let d='style="display:inline-block;vertical-align:middle;"',{shapeType:u,shapeStroke:c,shapeHollow:p=!1,shapeFill:g}=e,f=null!=(i=e.shapeSize)?i:8,m=e.shapeLineWidth?Lv(e.shapeLineWidth)+"px":"0px",b="currentColor",y=()=>c?Lv(c):b,v=e=>new a0({symbolType:e,size:f,fill:!0}),_=v(u),C=_.getParsedPath();if(!C.path&&C.pathStr&&(_=v(C.pathStr)),_.getParsedPath().path){let e=_.getParsedPath().path;h=e.toString(),s=e.bounds}else C.isSvg&&C.svgCache&&(h=C.svgCache.map(e=>e.path.toString()).join(),s=C.svgCache.reduce((e,t)=>e.union(t.path.bounds),new t4.YZ));let x=`${s.x1} ${s.y1} ${s.width()} ${s.height()}`;if("0px"!==m){let[e,t,i,r]=x.split(" ").map(e=>Number(e)),n=Number(m.slice(0,-2));x=`${e-n/2} ${t-n/2} ${i+n} ${r+n}`}let w=rn.IsGradientStr(g);if(!g||(0,r6.Z)(g)&&!w||p)return b=p?"none":g?Lv(g):"currentColor",`
    <svg ${d} width="${f}" height="${f}" viewBox="${x}">
      <path
        d="${h}"
        style="fill: ${b}; stroke: ${y()}; stroke-width: ${m}"
      >
      </path>
    </svg>`;let S=w?rn.Parse(g):(0,r9.Z)(g)?g:null;if(S){b="gradientColor"+(null!=t?t:"");let e="",i=(null!=(r=S.stops)?r:[]).map(e=>`<stop offset="${Lv(e.offset.toString())}" stop-color="${Lv(e.color)}"/>`).join("");return"radial"===S.gradient?e=`<radialGradient id="${b}" cx="50%" cy="50%" r="50%" fx="0%" fy="0%">
      ${i}
      </radialGradient>`:"linear"===S.gradient&&(e=`<linearGradient id="${b}" x1="${100*(null!=(n=S.x0)?n:0)}%" y1="${100*(null!=(l=S.y0)?l:0)}%" x2="${100*(null!=(o=S.x1)?o:0)}%" y2="${100*(null!=(a=S.y1)?a:0)}%">
      ${i}
      </linearGradient>`),`
    <svg ${d} width="${f}" height="${f}" viewBox="-0.5 -0.5 1 1">
      ${e}
      <path
        d="${h}"
        style="fill: url(#${b}); stroke: ${y()}; stroke-width: ${m}"
      >
      </path>
    </svg>`}return""}(t,`${this.id}_${o}`)),LI(a,s)})}})}else s&&!n&&s.parentNode.removeChild(s)}_updateDomStyle(e="width",t){var i,r,n,l,o;let a=this._rootDom,s=[...a.children].find(e=>e.className.includes(Lm)),h=[...a.children].find(e=>e.className.includes(Lf));if(s){let a=this._component.getSpec(),d={},u=null==(i=a.style)?void 0:i.titleLabel;if(u&&u.autoWidth&&!1!==u.multiLine&&h){let t=[...s.children].reduce((t,i)=>"height"===e?t+i.getBoundingClientRect().width:Math.max(t,i.getBoundingClientRect().width),0);t>0&&(h.style.maxWidth=`${t}px`,h.style.maxWidth=`${Math.ceil(s.getBoundingClientRect().width)}px`)}if((0,oV.Z)(null==(r=null==a?void 0:a.style)?void 0:r.maxContentHeight)){let e=h&&h.className.includes(Lf)?h.getBoundingClientRect().height+(null!=(n=a.style.spaceRow)?n:0):0,t=this._chartOption.getChartViewRect(),i=s$(a.style.maxContentHeight,Math.min(t.height,document.body.clientHeight)-e-(this._domStyle.panelPadding?this._domStyle.panelPadding[0]+this._domStyle.panelPadding[1]:0));i>0&&(d.maxHeight=`${i}px`,d.overflowY="auto",d.width=`calc(100% + ${this._domStyle.panelPadding?this._domStyle.panelPadding[1]+"px":"10px"})`,LI(s,d))}let c=s.children,p=[];if(c){for(let i=0;i<c.length;i++){let r=null!=(l=c[i].children)?l:[];for(let i=0;i<r.length;i++){t&&(r[i].style[e]="initial");let n=r[i].getBoundingClientRect()[e];(void 0===p[i]||p[i]<n)&&(p[i]=n)}}for(let t=0;t<c.length;t++){let i=null!=(o=c[t].children)?o:[];for(let t=0;t<i.length;t++)i[t].style[e]=`${p[t]}px`}}}}_getParentElement(e){var t;return null!=(t=this._container)?t:super._getParentElement(e)}isTooltipShown(){return this.getVisibility()}reInit(){super.reInit(),this._initStyle(),this._rootDom&&LI(this._rootDom,this._domStyle.panel),this.getVisibility()&&(this._updateDomStringByCol(this._tooltipActual),this._updateDomStyle("height",!1))}_updatePosition({x:e,y:t},i=!0){this._rootDom&&(this._rootDom.style.transform=`translate3d(${e}px, ${t}px, 0)`,i&&""!==this._rootDom.style.transition&&(this._rootDom.style.transition="",Object.assign(this._rootDom.style,this._domStyle.panel)))}}LF.type=wr.dom;let LH=(e,...t)=>{let i=[e.shape,...t.map(e=>null==e?void 0:e.shape)],r=[e.key,...t.map(e=>null==e?void 0:e.key)],n=[e.value,...t.map(e=>null==e?void 0:e.value)];return(0,ha.Z)(e,...t,{shape:i.every(r5.Z)?void 0:(0,ha.Z)({},...i),key:r.every(r5.Z)?void 0:(0,ha.Z)({},...r),value:n.every(r5.Z)?void 0:(0,ha.Z)({},...n)})},LO=e=>{let{width:t,height:i,wordBreak:r="break-word",textAlign:n,textBaseline:l,text:o}=e;return Array.isArray(o)?{width:t,height:i,wordBreak:r,textAlign:n,textBaseline:l,singleLine:!1,textConfig:(0,ag.IX)(o).map(t=>Object.assign(Object.assign({},e),{text:t}))}:{width:t,height:i,wordBreak:r,textAlign:n,textBaseline:l,singleLine:!1,textConfig:null==o?void 0:o.text}},LD={panel:{visible:!0,cornerRadius:[3,3,3,3],fill:"white",shadow:!0,shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.1)",shadowOffsetX:0,shadowOffsetY:4,shadowSpread:0,stroke:"white"},titleStyle:{value:{fill:"#4E5969",fontFamily:pU,fontSize:14,lineHeight:18,textAlign:"left",textBaseline:"middle"},spaceRow:6},contentStyle:{shape:{fill:"black",size:8,symbolType:"circle",spacing:6},key:{fill:"#4E5969",fontFamily:pU,fontSize:12,lineHeight:18,textAlign:"left",textBaseline:"middle",spacing:26},value:{fill:"#4E5969",fontFamily:pU,fontSize:12,lineHeight:18,textAlign:"right",textBaseline:"middle",spacing:0},spaceRow:6},padding:10,positionX:"right",positionY:"bottom",offsetX:10,offsetY:10,parentBounds:(new t4.FB).setValue(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),autoCalculatePosition:!0,autoMeasure:!0,pickable:!1,childrenPickable:!1,zIndex:500},Lz=["pointerX","pointerY","offsetX","offsetY","positionX","positionY","parentBounds"];dV(),ct(),uN(),uT(),yF();class LW extends yN{constructor(e,t){super((null==t?void 0:t.skipDefault)?e:(0,ha.Z)({},LW.defaultAttributes,e),t),this.name="tooltip"}render(){var e;let{visible:t,content:i,panel:r,keyWidth:n,valueWidth:l,hasContentShape:o,autoCalculatePosition:a,autoMeasure:s,align:h}=this.attribute;if(!t)return void this.hideAll();s&&LW.measureTooltip(this.attribute),a&&LW.calculateTooltipPosition(this.attribute);let d=(0,_6.o)(this.attribute.padding);this._tooltipPanel=this.createOrUpdateChild("tooltip-background",Object.assign({visible:!0},r),"rect"),this._tooltipTitleContainer=this.createOrUpdateChild("tooltip-title",{visible:!0,x:d[3],y:d[0]},"group");let u=LW.getTitleAttr(this.attribute);this._tooltipTitleSymbol=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-shape",(0,ha.Z)({symbolType:"circle"},u.shape,{visible:b4(u)&&b4(u.shape)}),"symbol"),"object"!=typeof u.value.text||null===u.value.text||"rich"!==u.value.text.type&&"html"!==u.value.text.type?u.value.multiLine?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:b4(u)&&b4(u.value)},LO(u.value)),"richtext"):this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({text:null!=(e=u.value.text)?e:"",visible:b4(u)&&b4(u.value)},u.value),"text"):"rich"===u.value.text.type?this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({visible:b4(u)&&b4(u.value)},LO(u.value)),"richtext"):"html"===u.value.text.type&&(this._tooltipTitle=this._tooltipTitleContainer.createOrUpdateChild("tooltip-title-value",Object.assign({html:Object.assign(Object.assign({dom:u.value.text.text},pX),u.value),visible:b4(u)&&b4(u.value),width:u.value.width,height:u.value.height,wordBreak:u.value.wordBreak,textAlign:u.value.textAlign,textBaseline:u.value.textBaseline,singleLine:!1,textConfig:[]},u.value),"richtext"));let c=b4(u.shape)?u.shape.size+u.shape.spacing:0,{textAlign:p,textBaseline:g}=u.value,f=r.width-d[3]-d[0]-c;"center"===p?this._tooltipTitle.setAttribute("x",c+f/2):"right"===p||"end"===p?this._tooltipTitle.setAttribute("x",c+f):this._tooltipTitle.setAttribute("x",c),"bottom"===g?this._tooltipTitle.setAttribute("y",u.height):"middle"===g?this._tooltipTitle.setAttribute("y",u.height/2):this._tooltipTitle.setAttribute("y",0);let m=b4(u)?u.height+u.spaceRow:0;if(this._tooltipContent=this.createOrUpdateChild("tooltip-content",{visible:!0},"group"),this._tooltipContent.removeAllChild(!0),i&&i.length){this._tooltipContent.setAttribute("x",d[3]),this._tooltipContent.setAttribute("y",d[0]+m);let e=0;i.forEach((t,i)=>{let r=LW.getContentAttr(this.attribute,i);if(!b4(r))return;let a=`tooltip-content-${i}`,s=this._tooltipContent.createOrUpdateChild(a,{visible:!0,x:0,y:e},"group"),d=r.shape.size+r.shape.spacing,u="right"===h?(o?d:0)+(b4(r.key)?n+r.key.spacing:0)+(b4(r.value)?l:0):0;this._createShape("right"===h?u-r.shape.size/2:u+r.shape.size/2,r,s,a),o&&("right"===h?u-=d:u+=d);let c=this._createKey(r,s,a);c&&(p2(h,c,r.key.textAlign,u,n),c.setAttribute("y",0),"right"===h?u-=n+r.key.spacing:u+=n+r.key.spacing);let p=this._createValue(r,s,a);if(p){let e="right";(0,oV.Z)(r.value.textAlign)?e=r.value.textAlign:b4(r.key)||"right"===h||(e="left"),p.setAttribute("textAlign",e),p2(h,p,e,u,l),p.setAttribute("y",0)}e+=r.height+r.spaceRow})}}_createShape(e,t,i,r){var n;if(b4(t.shape))return i.createOrUpdateChild(`${r}-shape`,Object.assign({visible:!0,x:e,y:t.shape.size/2+((null!=(n=nx(t.key.lineHeight,t.key.fontSize))?n:t.key.fontSize)-t.shape.size)/2},t.shape),"symbol")}_createKey(e,t,i){var r;if(b4(e.key))return e.key.multiLine?t.createOrUpdateChild(`${i}-key`,Object.assign(Object.assign({visible:!0},LO(e.key)),{textBaseline:"top"}),"richtext"):"object"!=typeof e.key.text||null===e.key.text||"rich"!==e.key.text.type&&"html"!==e.key.text.type?t.createOrUpdateChild(`${i}-key`,Object.assign(Object.assign({visible:!0,text:null!=(r=e.key.text)?r:""},e.key),{textBaseline:"top"}),"text"):"rich"===e.key.text.type?t.createOrUpdateChild(`${i}-value`,Object.assign(Object.assign({visible:!0},LO(e.key)),{textBaseline:"top"}),"richtext"):t.createOrUpdateChild(`${i}-value`,{html:Object.assign(Object.assign({dom:e.key.text.text},pX),e.key)},"richtext")}_createValue(e,t,i){var r;if(b4(e.value))return e.value.multiLine?t.createOrUpdateChild(`${i}-value`,Object.assign(Object.assign({visible:!0},LO(e.value)),{textBaseline:"top"}),"richtext"):"object"!=typeof e.value.text||null===e.value.text||"rich"!==e.value.text.type&&"html"!==e.value.text.type?t.createOrUpdateChild(`${i}-value`,Object.assign(Object.assign({visible:!0,text:null!=(r=e.value.text)?r:""},e.value),{textBaseline:"top"}),"text"):"rich"===e.value.text.type?t.createOrUpdateChild(`${i}-value`,Object.assign(Object.assign({visible:!0},LO(e.value)),{textBaseline:"top"}),"richtext"):t.createOrUpdateChild(`${i}-value`,{html:Object.assign({dom:e.value.text.text,container:"",width:30,height:30,style:{}},e.value)},"richtext")}setAttributes(e,t){let i=Object.keys(e);this.attribute.autoCalculatePosition&&i.every(e=>Lz.includes(e))?(this._mergeAttributes(e,i),(0,r5.Z)(this.attribute.panel.width)&&this.attribute.autoMeasure&&LW.measureTooltip(this.attribute),LW.calculateTooltipPosition(this.attribute),super.setAttributes({x:this.attribute.x,y:this.attribute.y},t)):super.setAttributes(e,t)}static calculateTooltipPosition(e){let{width:t=0,height:i=0}=e.panel,{offsetX:r,offsetY:n,pointerX:l,pointerY:o,positionX:a,positionY:s,parentBounds:h}=e,d=l,u=o;return"left"===a?d-=t+r:"center"===a?d-=t/2:d+=r,"top"===s?u-=i+n:"middle"===s?u-=i/2:u+=n,d+t>h.x2&&(d-=t+r),u+i>h.y2&&(u-=i+n),d<h.x1&&(d=h.x1),u<h.y1&&(u=h.y1),e.x=d,e.y=u,e}static measureTooltip(e){let{content:t,contentStyle:i}=e,r=(0,_6.o)(e.padding),n=LW.getTitleAttr(e),l=0,o=r[0]+r[2],a=0,{value:s,shape:h}=n,{visible:d=!1,symbolType:u=""}=null!=h?h:{};if((0,oV.Z)(s)&&"object"!=typeof n.value.text){let{width:e,height:t}=pq(s).quickMeasure(s.text);l=e,a=t}if(d&&lg[u]&&(l+=h.size+h.spacing,a=Math.max(h.size,a)),e.title&&(e.title.width=l,e.title.height=a),b4(n)&&(o+=a+n.spaceRow),t&&t.length){let r=[];if(t.forEach((t,i)=>{let n=LW.getContentAttr(e,i);(t.key||t.value)&&b4(n)&&r.push([t,n])}),r.length){let n=!1,a=[],s=[],h=[];r.forEach(([e,t],l)=>{var d;let{key:u,value:c,shape:p,spaceRow:g}=t,f=b4(p),m=null!=(d=null==p?void 0:p.symbolType)?d:"",b=pq(u),y=pq(c),v=0;if(b4(u)){let{width:e,height:t}=b.quickMeasure(u.text);s.push(e),v=Math.max(v,t)}if(b4(c)){let{width:e,height:t}=y.quickMeasure(c.text);h.push(e),v=Math.max(v,t)}f&&lg[m]&&(n=!0,a.push(p.size),v=Math.max(p.size,v)),e.height=v,o+=v,l<r.length-1&&(o+=null!=g?g:i.spaceRow)});let d=a.length?Math.max(...a):0,u=s.length?Math.max(...s):0,c=h.length?Math.max(...h):0;l=Math.max(u+c+i.key.spacing+i.value.spacing+(n?d+i.shape.spacing:0),l),t.forEach(e=>{e.width=l}),e.hasContentShape=n,e.keyWidth=u,e.valueWidth=c}}return e.panel.width=l+r[1]+r[3],e.panel.height=o,e}static getTitleAttr(e){return LH({},LW.defaultAttributes.titleStyle,LW.defaultAttributes.title,e.titleStyle,e.title)}static getContentAttr(e,t){return LH({},LW.defaultAttributes.contentStyle,e.contentStyle,e.content[t])}}LW.defaultAttributes=LD;let LZ={fontFamily:hb.fontFamily,spacing:10,wordBreak:"break-word"},LN=(e,t)=>{var i,r;let n,l;"rich"!==(null==e?void 0:e.type)&&"html"!==(null==e?void 0:e.type)?(e=(null!=e?e:"").toString(),l=(n=t.multiLine?(n=e.split("\n")).map((e,t)=>t<n.length-1?e+"\n":e):[e]).map(e=>Object.assign(Object.assign({},t),{text:e}))):(l=e.text,n=e);let o=(r={wordBreak:null!=(i=t.wordBreak)?i:"break-word",maxWidth:t.maxWidth?t.maxWidth:void 0,width:0,height:0,textConfig:l},u||(u=oq.CreateGraphic("richtext",{})),u.setAttributes(r),u.AABBBounds);return{width:o.width(),height:o.height(),text:n}};function L$(e={},t,i){var r,n;return Object.assign(Object.assign({},null!=i?i:LZ),{fill:null!=(r=e.fill)?r:e.fontColor,textAlign:e.textAlign,textBaseline:e.textBaseline,fontFamily:null!=(n=e.fontFamily)?n:t,fontSize:e.fontSize,fontWeight:e.fontWeight,lineHeight:e.lineHeight,spacing:e.spacing,multiLine:(0,oV.Z)(e.maxWidth)?!1!==e.multiLine:e.multiLine,maxWidth:e.maxWidth,wordBreak:e.wordBreak,autoWidth:e.autoWidth})}let Lj=e=>{var t;let{backgroundColor:i,border:r,shadow:n}=e,l={lineWidth:null!=(t=null==r?void 0:r.width)?t:0,shadow:!!n};(null==r?void 0:r.color)&&(l.stroke=r.color),i&&(l.fill=i),n&&(l.shadowColor=n.color,l.shadowBlur=n.blur,l.shadowOffsetX=n.x,l.shadowOffsetY=n.y,l.shadowSpread=n.spread);let{radius:o}=null!=r?r:{};return(0,oV.Z)(o)&&(l.cornerRadius=[o,o,o,o]),l},LG=(e,t,i)=>{var r,n,l,o,a;let{style:s={},enterable:h,transitionDuration:d}=t,{panel:u={},titleLabel:c,shape:p,keyLabel:g,valueLabel:f,spaceRow:m,align:b}=s,y=(0,_6.o)(u.padding),v=sG(u.padding),_=L$(Object.assign({textAlign:"right"===b?"right":"left"},c),i),C=L$(Object.assign({textAlign:"right"===b?"right":"left"},g),i),x=L$(f,i),w={fill:!0,size:null!=(r=null==p?void 0:p.size)?r:8,spacing:null!=(n=null==p?void 0:p.spacing)?n:6},S={panel:Lj(u),padding:y,title:{},content:[],titleStyle:{value:_,spaceRow:m},contentStyle:{shape:w,key:C,value:x,spaceRow:m},hasContentShape:!1,keyWidth:0,valueWidth:0,enterable:h,transitionDuration:d,align:b},{title:A={},content:k=[]}=e,M=v.left+v.right,T=v.top+v.bottom,R=0,E=!!k.length,P=0,B=0,I=0,L=0;if(E){let e=[],t=[],i=[],r=[],n=0;S.content=k.map((l,o)=>{let a=0,{hasShape:s,key:h,shapeType:d="",shapeFill:u,shapeStroke:c,shapeLineWidth:p,shapeSize:g,value:f,isKeyAdaptive:b,spaceRow:y,keyStyle:v,valueStyle:_,shapeHollow:S}=l,A={height:0,spaceRow:null!=y?y:m};if((0,oV.Z)(h)){let i=hs({},C,L$(v,void 0,{})),{width:r,height:n,text:l}=LN(h,i);A.key=Object.assign(Object.assign({width:r,height:n},i),{text:l}),b?t.push(r):e.push(r),a=Math.max(a,n)}if((0,oV.Z)(f)){let e=hs({},x,L$(_,void 0,{})),{width:t,height:r,text:n}=LN(f,e);A.value=Object.assign(Object.assign({width:t,height:r},e),{text:n}),i.push(t),a=Math.max(a,r)}if(s){let e={visible:!0,symbolType:d};S?e.stroke=u:e.fill=u,e.stroke=null!=c?c:u,e.lineWidth=p,A.shape=e;let t=null!=g?g:w.size;a=Math.max(t,a),r.push(t)}else A.shape={visible:!1};return A.height=a,n+=a,o<k.length-1&&(n+=A.spaceRow),A}),T+=n,P=e.length?(0,ag.CE)(e):0,B=t.length?(0,ag.CE)(t):0,I=i.length?(0,ag.CE)(i):0,R=Math.max((L=r.length?(0,ag.CE)(r)+w.spacing:0)+P+C.spacing+I+x.spacing,L+B,R),S.hasContentShape=!!r.length,S.keyWidth=P,S.valueWidth=I}let F=0,H=0,O=0,{visible:D=!0,value:z="",valueStyle:W,spaceRow:Z}=A;S.title.visible=D,S.title.spaceRow=null!=Z?Z:m;let N={},$=()=>N.autoWidth&&!1!==N.multiLine;if(D){N=hs({},_,L$(W,void 0,{})),$()&&(N.multiLine=null==(l=N.multiLine)||l,N.maxWidth=null!=(o=N.maxWidth)?o:E?Math.ceil(R):void 0);let{text:e,width:t,height:i}=LN(z,N);S.title.value=Object.assign(Object.assign({width:$()?Math.min(t,null!=(a=N.maxWidth)?a:Number.MAX_VALUE):t,height:i},N),{text:e}),F=S.title.value.width,O=(H=S.title.value.height)+(E?S.title.spaceRow:0)}return T+=O,S.title.width=F,S.title.height=H,$()?M+=R||F:M+=Math.max(F,R),E&&S.content.forEach(e=>{var t;let i=e.value;i&&(null==(t=i.autoWidth)||t)&&(i.width=M-v.left-v.right-L-P-C.spacing-x.spacing,i.maxWidth||(i.maxWidth=Math.ceil(i.width)),S.valueWidth=Math.max(S.valueWidth,i.width))}),S.panel.width=M,S.panel.height=T,S};class LV extends LM{constructor(){super(LV.type),this.type=wr.canvas,this._attributes=null}onAdd(e){var t;super.onAdd(e),this._tooltipCanvasId=null==(t=this._chartOption.modeParams)?void 0:t.tooltipCanvasId}_initTooltipComponent(e){let t=this._getLayer(e);this._tooltipComponent=new LW({autoCalculatePosition:!1,autoMeasure:!1}),t.add(this._tooltipComponent)}_getLayer(e){if(this._layer)return this._layer;this._layer=e.createLayer(this._tooltipCanvasId);let t=this._layer.layerHandler.canvas.nativeCanvas;return t&&t.style&&(t.style.touchAction="none",t.style.pointerEvents="none"),this._layer}_getTooltipBoxSize(e,t){var i,r;if(!t||(0,r5.Z)(this._attributes)){let t=null==(i=this._chartOption)?void 0:i.getTheme("fontFamily");this._attributes=LG(e,this._component.getSpec(),t)}let{panel:n}=null!=(r=this._attributes)?r:{};return{width:n.width+n.lineWidth,height:n.height+n.lineWidth}}_removeTooltip(){this._layer&&this._layer.removeAllChild(),this._attributes=null}_updateTooltip(e,t){this._visible=e;let i=this._compiler.getStage();if(!i)return;if(!e)return void(this._tooltipComponent&&this._tooltipComponent.attribute.visible&&(this._tooltipComponent.hideAll(),this._tooltipComponent.setAttributes({visibleAll:!1})));this._tooltipComponent||this._initTooltipComponent(i);let{activeTooltipSpec:r}=t,n=r.position;t.changePositionOnly?(0,oV.Z)(n)&&this._tooltipComponent.setAttributes(n):this._tooltipComponent.setAttributes(Object.assign(Object.assign({},this._attributes),n)),this._tooltipComponent.attribute.visible||(this._tooltipComponent.showAll(),this._tooltipComponent.setAttributes({visibleAll:!0}))}isTooltipShown(){var e;return null==(e=this._tooltipComponent)?void 0:e.attribute.visibleAll}release(){var e;super.release(),null==(e=this._layer)||e.release()}}LV.type=wr.canvas;var LU=i(63144),LK=i(43127);let LX=e=>{hp.registerChartPlugin(e.type,e)},LY=/\{([^}]+)\}/,Lq=/\{([^}]+)\}/g,LJ=/:/;class LQ extends v_{constructor(){super(LQ.type),this.type="formatterPlugin",this._timeModeFormat={utc:mV.k.getInstance().timeUTCFormat,local:mV.k.getInstance().timeFormat},this._formatter=this._format,this._timeFormatter=this._timeModeFormat.local,this._numericFormatter=LU.C6.getInstance().format,this._numericSpecifier=LU.C6.getInstance().formatter,this._numericFormatterCache=new Map,this._isNumericFormatterCache=new Map}onInit(e,t){var i;let{globalInstance:r}=e;if(!r)return;this._spec=null!=(i=null==t?void 0:t[LQ.specKey])?i:{};let{timeMode:n,customFormatter:l,numericFormatter:o,timeFormatter:a}=this._spec;(0,nr.Z)(l)?this._formatter=l:(this._formatter=this._format.bind(this),(0,nr.Z)(a)?this._timeFormatter=a:n&&this._timeModeFormat[n]&&(this._timeFormatter=this._timeModeFormat[n]),o&&(this._numericFormatter=o,this._numericSpecifier=null,this._numericFormatterCache=null)),hp.registerFormatter(this._formatter)}_format(e,t,i){return(0,ri.Z)(e)?e.map((e,r)=>{let n=(0,ri.Z)(i)?i[r]:i;return n?this._formatSingleLine(e,t,n):e}):(0,ri.Z)(i)?i.map(i=>this._formatSingleLine(e,t,i)):this._formatSingleLine(e,t,i)}_formatSingleLine(e,t,i){let r;return(this._isNumericFormatterCache&&(this._isNumericFormatterCache.get(i)?r=this._isNumericFormatterCache.get(i):(r=LY.test(i),this._isNumericFormatterCache.set(i,r))),r)?i.replace(Lq,(e,i)=>{if(!LJ.test(i)){let r=t[i.trim()];return void 0!==r?r:e}let r=i.split(":"),n=t[r.shift()],l=r.join(":");return this._formatSingleText(n,l)}):this._formatSingleText(e,i)}_formatSingleText(e,t){if(LK.DC.test(t)&&this._numericFormatter){let i;return this._numericFormatterCache&&this._numericSpecifier?(this._numericFormatterCache.get(t)?i=this._numericFormatterCache.get(t):(i=this._numericSpecifier(t),this._numericFormatterCache.set(t,i)),i(Number(e))):this._numericFormatter(t,Number(e))}return t.includes("%")&&this._timeFormatter?this._timeFormatter(t,e):t.startsWith("calc(")?this._calcFormatter(t,e):e}_calcFormatter(e,t){try{let i=e.slice(5,-1).replace(/v/g,String(t));return this._calculateMathExpression(i,t)}catch(e){return t}}_calculateMathExpression(e,t){let i=e.replace(/\s+/g,"");if(!this._isValidMathExpression(i))return t;try{let e=Function("return ("+i+")")();if("number"!=typeof e||isNaN(e)||!isFinite(e))throw Error("Invalid calculation result");return e}catch(e){return t}}_isValidMathExpression(e){return/^[0-9+\-*/().]+$/.test(e)}release(){super.release(),this._format=null,this._timeFormatter=null,this._numericFormatter=null,this._numericSpecifier=null,this._numericFormatterCache=null,this._isNumericFormatterCache=null}}LQ.pluginType="chart",LQ.specKey="formatter",LQ.type="formatterPlugin";let L0={state:Q.STATE_ACTIVE,trigger:"pointerover",triggerOff:"pointerout"};class L1 extends mC{constructor(e){super(e),this.type="element-active",this.handleStart=e=>{this.start(e.item)},this.handleReset=e=>{this.reset(e.item)},this.options=Object.assign({},L0,e),this.updateMarkIdByState([this.options.state])}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}getStartState(){return this.options.state}start(e){if(e){let{state:t,interaction:i}=this.options;this.isGraphicInStateMark(e,t)&&(e.addState(t,!0),i.setStatedGraphics(this,[e]))}}reset(e){let{interaction:t,state:i}=this.options,r=t.getStatedGraphics(this),n=null!=e?e:null==r?void 0:r[0];n&&r.includes(n)&&(n.removeState(i),t.setStatedGraphics(this,r.filter(e=>e!==n)))}}L1.type="element-active",L1.defaultOptions=L0;let L2="element-active-by-legend",L3={state:Q.STATE_ACTIVE,filterType:"groupKey"};class L4 extends mC{constructor(e){super(e),this.type=L2,this.handleStart=e=>{var t,i;let r=e.event;r&&this.start(null==(i=null==(t=r.detail)?void 0:t.data)?void 0:i.id)},this.handleReset=e=>{this.resetAll()},this.options=Object.assign({},L3,e),this.updateMarkIdByState([this.options.state])}getEvents(){return[{type:N.legendItemHover,handler:this.handleStart},{type:N.legendItemUnHover,handler:this.handleReset}]}getStartState(){return this.options.state}start(e){if((0,r5.Z)(e))return;let{interaction:t,state:i}=this.options,r=mv(this.options),n=t.getStatedGraphics(this),l=[];this.getMarks().forEach(t=>{var i;null==(i=t.getGraphics())||i.forEach(t=>{r(t)===e&&l.push(t)})}),t.updateStates(this,l,n,i),t.setStatedGraphics(this,l)}resetAll(){let{interaction:e,state:t}=this.options;e.clearAllStatesOfTrigger(this,t),e.setStatedGraphics(this,[])}reset(e){let{state:t,interaction:i}=this.options;if(e){let r=i.getStatedGraphics(this);r&&r.includes(e)&&(e.removeState(t),i.setStatedGraphics(this,r.filter(t=>t!==e)))}else this.resetAll()}}L4.type=L2,L4.defaultOptions=L3;let L5="element-highlight-by-legend",L6={highlightState:Q.STATE_HIGHLIGHT,blurState:Q.STATE_BLUR,filterType:"groupKey"};class L8 extends mC{constructor(e){super(e),this.type=L5,this.handleStart=e=>{var t,i;let r=e.event;r&&this.start(null==(i=null==(t=r.detail)?void 0:t.data)?void 0:i.id)},this.handleReset=e=>{this.resetAll()},this.options=Object.assign({},L6,e),this.updateMarkIdByState([this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getResetState(){return this.options.blurState}getEvents(){return[{type:N.legendItemHover,handler:this.handleStart},{type:N.legendItemUnHover,handler:this.handleReset}]}start(e){if(e){let t=mv(this.options),{interaction:i,highlightState:r,blurState:n}=this.options,l=i.getStatedGraphics(this),o=[];this.getMarks().forEach(i=>{var r;null==(r=i.getGraphics())||r.forEach(i=>{t(i)===e&&o.push(i)})}),i.updateStates(this,o,l,r,n),i.setStatedGraphics(this,o)}}resetAll(){let{interaction:e,highlightState:t,blurState:i}=this.options;e.clearAllStatesOfTrigger(this,t,i),e.setStatedGraphics(this,[])}reset(e){let{highlightState:t,blurState:i,interaction:r}=this.options;if(e){let n=r.getStatedGraphics(this);n&&n.includes(e)&&(e.removeState([t,i]),r.setStatedGraphics(this,n.filter(t=>t!==e)))}else this.resetAll()}}L8.type=L5,L8.defaultOptions=L6;let L7="element-highlight-by-name",L9={highlightState:Q.STATE_HIGHLIGHT,blurState:Q.STATE_BLUR,filterType:"groupKey"};class Fe extends mC{constructor(e){super(e),this.type=L7,this.handleStart=e=>{if(this.options.shouldStart?this.options.shouldStart(e):this._filterByName(e)){let t=this._parseTargetKey(e);this.start(t)}},this.handleReset=e=>{(this.options.shouldReset?this.options.shouldReset(e):this._filterByName(e))&&this.resetAll()},this.options=Object.assign({},L9,e),this.updateMarkIdByState([this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getResetState(){return this.options.blurState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}_filterByName(e){var t;let i=(0,ag.IX)(this.options.graphicName);return(null==(t=null==e?void 0:e.node)?void 0:t.name)&&i.includes(e.node.name)}_parseTargetKey(e){return this.options.parseData?this.options.parseData(e):"text"===e.node.type?e.node.attribute.text:null}start(e){if(e){let t=mv(this.options),{interaction:i,highlightState:r,blurState:n}=this.options,l=i.getStatedGraphics(this),o=[];this.getMarks().forEach(i=>{var r;null==(r=i.getGraphics())||r.forEach(i=>{t(i)===e&&o.push(i)})}),i.updateStates(this,o,l,r,n),i.setStatedGraphics(this,o)}}resetAll(){let{interaction:e,highlightState:t,blurState:i}=this.options;e.clearAllStatesOfTrigger(this,t,i),e.setStatedGraphics(this,[])}reset(e){let{highlightState:t,blurState:i,interaction:r}=this.options;if(e){let n=r.getStatedGraphics(this);n&&n.includes(e)&&(e.removeState([t,i]),r.setStatedGraphics(this,n.filter(t=>t!==e)))}else this.resetAll()}}Fe.type=L7,Fe.defaultOptions=L9;let Ft="element-highlight-by-group";class Fi extends mC{constructor(e){super(e),this.type=Ft,this.handleStart=e=>{this.start(e.item)},this.handleReset=e=>{let t=e.item;t&&this.isGraphicInMark(t)&&this.resetAll()},this.options=Object.assign({},m_,e),this.updateMarkIdByState([this.options.highlightState,this.options.blurState])}getStartState(){return this.options.highlightState}getResetState(){return this.options.blurState}getEvents(){return[{type:this.options.trigger,handler:this.handleStart},{type:this.options.triggerOff,handler:this.handleReset}]}resetAll(){let{interaction:e,highlightState:t,blurState:i}=this.options;e.clearAllStatesOfTrigger(this,t,i),e.setStatedGraphics(this,[])}_getHightlightKey(e){var t;return null==(t=e.context)?void 0:t.groupKey}start(e){if(e&&this.isGraphicInMark(e)){let t=this._getHightlightKey(e);if((0,r5.Z)(t))return;let{interaction:i,highlightState:r,blurState:n}=this.options,l=i.getStatedGraphics(this),o=[];this.getMarks().forEach(e=>{var i;null==(i=e.getGraphics())||i.forEach(e=>{this._getHightlightKey(e)===t&&o.push(e)})}),i.updateStates(this,o,l,r,n),i.setStatedGraphics(this,o)}}reset(e){if(e){if(this.isGraphicInMark(e)){let{interaction:t}=this.options,i=t.getStatedGraphics(this);e.removeState([this.options.highlightState,this.options.blurState]),t.setStatedGraphics(this,i.filter(t=>t!==e))}}else this.resetAll()}}Fi.type=Ft,Fi.defaultOptions=m_;let Fr="element-highlight-by-key";class Fn extends Fi{constructor(){super(...arguments),this.type=Fr}_getHightlightKey(e){var t;return null==(t=e.context)?void 0:t.key}}Fn.type=Fr;class Fl extends pz{constructor(){super(...arguments),this.type=Fl.type}_getDefaultStyle(){return Object.assign(Object.assign({},super._getDefaultStyle()),{width:void 0,height:void 0,lineWidth:0})}}Fl.type="image";let Fo=()=>{hp.registerMark(Fl.type,Fl),pN(),Bm(),hp.registerGraphicComponent("image",yy)};class Fa{constructor(){this.name="HtmlAttributePlugin",this.activeEvent="onRegister",this._uid=tm.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={},this.renderId=0,this.onWheel=e=>{try{let t=new e.constructor(e.type,e);this.pluginService.stage.window.getContext().getCanvas().nativeCanvas.dispatchEvent(t)}catch(e){return}}}activate(e){this.pluginService=e,e.stage.hooks.afterRender.tap(this.key,t=>{t&&t===this.pluginService.stage&&this.drawHTML([...e.stage.getChildren()])})}deactivate(e){e.stage.hooks.afterRender.taps=e.stage.hooks.afterRender.taps.filter(e=>e.name!==this.key),this.release()}getWrapContainer(e,t,i){let r;return r=t?"string"==typeof t?tU.global.getElementById(t):t:e.window.getContainer(),{wrapContainer:tU.global.createDom(Object.assign({tagName:"div",parent:r},i)),nativeContainer:r}}parseDefaultStyleFromGraphic(e){var t="text"===e.type&&e.attribute?e.attribute:r4(e).text;let i={},r=e=>/^\d+(\.\d+)?$/.test(`${e}`)?`${e}px`:`${e}`;return["textAlign","fontFamily","fontVariant","fontStyle","fontWeight"].forEach(e=>{t[e]&&(i[(0,oG.Z2)(e)]=t[e])}),["fontSize","lineHeight"].forEach(e=>{let n=(0,oG.Z2)(e);(0,r5.Z)(t[e])||(i[n]=r(t[e]))}),(0,oV.Z)(t.maxLineWidth)&&(i["max-width"]=r(t.maxLineWidth)),t.underline?i["text-decoration"]="underline":t.lineThrough&&(i["text-decoration"]="line-through"),t.fill&&(0,r6.Z)(t.fill)&&(i.color=t.fill),i}getTransformOfText(e){let t=r4(e).text,{textAlign:i=t.textAlign,textBaseline:r=t.textBaseline}=e.attribute,{rotateDeg:n,scaleX:l,scaleY:o}=e.globalTransMatrix.toTransformAttrs(),a={left:"0",start:"0",end:"-100%",center:"-50%",right:"-100%",top:"0",middle:"-50%",bottom:"-100%",alphabetic:"-79%"},s={left:"0",start:"0",end:"100%",center:"50%",right:"100%",top:"0",middle:"50%",bottom:"100%",alphabetic:"79%"};return{textAlign:i,transform:`translate(${a[i]},${a[r]}) rotate(${n}deg) scaleX(${l}) scaleY(${o})`,transformOrigin:`${s[i]} ${s[r]}`}}updateStyleOfWrapContainer(e,t,i,r,n){let{pointerEvents:l,penetrateEventList:o=[]}=n,a=this.parseDefaultStyleFromGraphic(e);a.display=!1!==e.attribute.visible?"block":"none",a.pointerEvents=!0===l?"all":l||"none","none"!==a.pointerEvents&&(this.removeWrapContainerEventListener(i),o.forEach(e=>{"wheel"===e&&i.addEventListener("wheel",this.onWheel)})),i.style.position||(i.style.position="absolute",r.style.position="relative");let s=0,h=0,d=e.globalAABBBounds,u=n.anchorType;if((0,r5.Z)(u)&&(u="text"===e.type?"position":"boundsLeftTop"),"boundsLeftTop"===u&&(u="top-left"),"position"===u||d.empty()){let t=e.globalTransMatrix;s=t.e,h=t.f}else{let e=(0,_s.v1)(d,u);s=e.x,h=e.y}let c=tU.global.getElementTopLeft(r,!1),p=t.window.getTopLeft(!1),g=t.viewBox,f=s+p.left-c.left+g.x1,m=h+p.top-c.top+g.y1;if(a.left=`${f}px`,a.top=`${m}px`,"text"===e.type&&"position"===u&&(a=Object.assign(Object.assign({},a),this.getTransformOfText(e))),(0,nr.Z)(n.style)){let t=n.style({top:m,left:f,width:d.width(),height:d.height()},e,i);t&&(a=Object.assign(Object.assign({},a),t))}else(0,r9.Z)(n.style)?a=Object.assign(Object.assign({},a),n.style):(0,r6.Z)(n.style)&&n.style&&(a=Object.assign(Object.assign({},a),(0,oG.wv)(n.style)));tU.global.updateDom(i,{width:n.width,height:n.height,style:a})}clearCacheContainer(){this.htmlMap&&Object.keys(this.htmlMap).forEach(e=>{this.htmlMap[e]&&this.htmlMap[e].renderId!==this.renderId&&this.removeElement(e)}),this.renderId+=1}drawHTML(e){"browser"===tU.global.env&&(e.sort((e,t)=>{var i,r;return(null!=(i=e.attribute.zIndex)?i:iY.zIndex)-(null!=(r=t.attribute.zIndex)?r:iY.zIndex)}).forEach(e=>{this.renderGroupHTML(e)}),this.clearCacheContainer())}renderGroupHTML(e){this.renderGraphicHTML(e),e.forEachChildren(e=>{e.isContainer?this.renderGroupHTML(e):this.renderGraphicHTML(e)})}removeElement(e){if(!this.htmlMap||!this.htmlMap[e])return;let{wrapContainer:t}=this.htmlMap[e];t&&tU.global.removeDom(t),this.htmlMap[e]=null}removeWrapContainerEventListener(e){e.removeEventListener("wheel",this.onWheel)}renderGraphicHTML(e){var t;let{html:i}=e.attribute;if(!i)return;let r=e.stage;if(!r)return;let{dom:n,container:l}=i;if(!n)return;let o=(0,r5.Z)(i.id)?`${null!=(t=e.id)?t:e._uid}_react`:i.id;if(this.htmlMap&&this.htmlMap[o]&&l&&l!==this.htmlMap[o].container&&this.removeElement(o),this.htmlMap&&this.htmlMap[o])"string"==typeof n?this.htmlMap[o].wrapContainer.innerHTML=n:n!==this.htmlMap[o].wrapContainer.firstChild&&(this.htmlMap[o].wrapContainer.removeChild(this.htmlMap[o].wrapContainer.firstChild),this.htmlMap[o].wrapContainer.appendChild(n));else{let{wrapContainer:e,nativeContainer:t}=this.getWrapContainer(r,l);e&&("string"==typeof n?e.innerHTML=n:e.appendChild(n),this.htmlMap||(this.htmlMap={}),this.htmlMap[o]={wrapContainer:e,nativeContainer:t,container:l,renderId:this.renderId})}if(!this.htmlMap||!this.htmlMap[o])return;let{wrapContainer:a,nativeContainer:s}=this.htmlMap[o];this.updateStyleOfWrapContainer(e,r,a,s,i),this.htmlMap[o].renderId=this.renderId}release(){"browser"===tU.global.env&&this.removeAllDom(this.pluginService.stage.defaultLayer)}removeAllDom(e){this.htmlMap&&(Object.keys(this.htmlMap).forEach(e=>{this.removeElement(e)}),this.htmlMap=null)}}class Fs extends Fa{constructor(){super(...arguments),this.name="ReactAttributePlugin",this.activeEvent="onRegister",this._uid=tm.GenAutoIncrementId(),this.key=this.name+this._uid,this.htmlMap={}}removeElement(e){if(!this.htmlMap||!this.htmlMap[e])return;let{root:t,wrapContainer:i,unmount:r}=this.htmlMap[e];t?tU.global.getRequestAnimationFrame()(()=>{t.unmount()}):r&&r(),i&&tU.global.removeDom(i),this.htmlMap[e]=null}renderGraphicHTML(e){var t;let{react:i}=e.attribute;if(!i)return;let r=e.stage;if(!r)return;let n=r.params.ReactDOM,{element:l,container:o}=i;if(!l||!n||!n.createRoot&&!n.render)return;let a=(0,r5.Z)(i.id)?`${null!=(t=e.id)?t:e._uid}_react`:i.id;if(this.htmlMap&&this.htmlMap[a]&&o&&o!==this.htmlMap[a].container&&this.removeElement(a),this.htmlMap&&this.htmlMap[a])n.createRoot?this.htmlMap[a].root.render(l):n.render(l,this.htmlMap[a].wrapContainer);else{let{wrapContainer:e,nativeContainer:t}=this.getWrapContainer(r,o);if(e)if(this.htmlMap||(this.htmlMap={}),n.createRoot){let i=n.createRoot(e);i.render(l),this.htmlMap[a]={root:i,wrapContainer:e,nativeContainer:t,container:o,renderId:this.renderId}}else n.render(l,e),this.htmlMap[a]={wrapContainer:e,nativeContainer:t,container:o,renderId:this.renderId,unmount:()=>{n.unmountComponentAtNode(e)}}}if(!this.htmlMap||!this.htmlMap[a])return;let{wrapContainer:s,nativeContainer:h}=this.htmlMap[a];this.updateStyleOfWrapContainer(e,r,s,h,i),this.htmlMap[a].renderId=this.renderId}}mR.useRegisters([()=>{wa(),wh(),wu(),xX(),xD(),xx(),hp.registerChart(wc.type,wc)},()=>{wa(),wh(),wu(),xD(),wI(),xX(),hp.registerChart(wF.type,wF)},()=>{wa(),wh(),wu(),xD(),wq(),xX(),hp.registerChart(wQ.type,wQ)},()=>{wa(),wh(),xX(),xD(),St(),hp.registerChart(Sr.type,Sr)},()=>{wh(),SX(),hp.registerChart(SQ.type,SQ)},()=>{wa(),wh(),xX(),xD(),Av(),hp.registerChart(AS.type,AS)},()=>{wa(),wh(),wu(),xX(),xD(),AF(),hp.registerChart(AO.type,AO)},()=>{wa(),wh(),wu(),xX(),xD(),wq(),hp.registerTransform("bin",A7.L),hp.registerChart(A9.type,A9)},()=>{wh(),Sx(),hp.registerChart(SS.type,SS)},()=>{wh(),kC(),kA(),ks(),hp.registerChart(kM.type,kM)},()=>{wh(),k$(),hp.registerChart(kG.type,kG)},()=>{kj(),wh(),k$(),hp.registerChart(kG.type,kG)},()=>{wh(),Mi(),hp.registerChart(Mn.type,Mn)},()=>{wa(),wh(),wu(),xX(),xD(),TP(),hp.registerChart(TI.type,TI)},()=>{wa(),wh(),xX(),xD(),Rl(),hp.registerTransform("boxplot",Ra.r),hp.registerChart(Rs.type,Rs)},()=>{wa(),wh(),xX(),xD(),ks(),hp.registerChart(ku.type,ku)},()=>{wa(),wh(),xX(),xD(),Mc(),hp.registerChart(Mg.type,Mg)},()=>{wa(),wh(),xX(),xD(),Mw(),hp.registerChart(MA.type,MA)},()=>{wa(),wh(),wu(),xX(),xD(),Rj(),hp.registerChart(RV.type,RV)},()=>{wh(),MU(),hp.registerChart(MX.type,MX)},()=>{wh(),M3(),hp.registerChart(M5.type,M5)},()=>{wh(),Ta(),hp.registerChart(Th.type,Th)},()=>{wh(),tG.load(Rz),RB(),hp.registerChart(RW.type,RW)},()=>{wh(),R0(),hp.registerChart(R2.type,R2)},()=>{wa(),wh(),A1(),AU(),C1(),xa(),hp.registerChart(A4.type,A4)},()=>{wh(),Ed(),hp.registerChart(Ec.type,Ec)},()=>{wa(),wh(),wu(),xX(),hp.registerChart(Az.type,Az),xD()},xa,C1,()=>{hp.registerGraphicComponent(eI.lineAxis,(e,t)=>new CX(e,t)),hp.registerGraphicComponent(eL.lineAxisGrid,(e,t)=>new _5(e,t)),v6(),hp.registerComponent(Ep.type,Ep)},()=>{hp.registerGraphicComponent(eI.lineAxis,(e,t)=>new CX(e,t)),hp.registerGraphicComponent(eL.lineAxisGrid,(e,t)=>new _5(e,t)),v6(),hp.registerComponent(Ef.type,Ef)},()=>{hp.registerGraphicComponent(eI.lineAxis,(e,t)=>new CX(e,t)),hp.registerGraphicComponent(eL.lineAxisGrid,(e,t)=>new _5(e,t)),v6(),hp.registerComponent(Eb.type,Eb)},Af,Ab,()=>{hp.registerComponent(EI.type,EI)},()=>{hp.registerComponent(EY.type,EY)},()=>{hp.registerComponent(E4.type,E4)},()=>{hp.registerComponent(Pi.type,Pi)},()=>{hp.registerComponent(Ps.type,Ps)},()=>{hp.registerComponent(PI.type,PI)},()=>{hp.registerComponent(PL.type,PL)},()=>{hp.registerComponent(PZ.type,PZ)},Sv,()=>{hp.registerComponent(It.type,It),Bq()},()=>{hp.registerComponent(Iu.type,Iu),Ia()},()=>{hp.registerComponent(IQ.type,IQ),IK()},()=>{hp.registerComponent(In.type,In),Ir._animate=BI,Bq()},()=>{hp.registerComponent(Ip.type,Ip),Ic._animate=BF,Ia()},()=>{hp.registerComponent(I0.type,I0),IK()},()=>{hp.registerComponent(I1.type,I1),IK()},()=>{hp.registerComponent(Io.type,Io)},()=>{hp.registerComponent(ID.type,ID)},()=>{hp.registerGraphicComponent(IG.type,e=>new Ij(e)),IZ(),v1(),hp.registerComponent(IG.type,IG,!0,1/0)},()=>{hp.registerGraphicComponent(IV.type,e=>new Ij(e)),IZ(),v1(),hp.registerComponent(IV.type,IV,!0)},()=>{hp.registerComponent(I5.type,I5)},()=>{hp.registerComponent(I6.type,I6)},()=>{tG.load(Lc)},()=>{hp.registerLayout(I8.type,I8)},()=>{pj(),y2(),y4(),A$(),AJ(),wM(),wV(),Sh(),S$(),k8(),Fo(),El(),v1()},()=>{LL(LF)},()=>{LL(LV)},()=>{LX(LQ)},()=>{hp.registerInteractionTrigger(L1.type,L1)},()=>{hp.registerInteractionTrigger(L2,L4)},()=>{hp.registerInteractionTrigger(L5,L8)},()=>{hp.registerInteractionTrigger(L7,Fe)},()=>{hp.registerInteractionTrigger(Ft,Fi)},()=>{hp.registerInteractionTrigger(Fr,Fn)},()=>{g1(),md(),mf()},()=>{du.registerPlugin("ReactAttributePlugin",Fs)},()=>{du.registerPlugin("HtmlAttributePlugin",Fa)}]);let Fh=mR},61635:function(e,t,i){i.d(t,{T:()=>G});var r=i(36781),n=i(20408),l=i(64776),o=i(51130),a=i(85162),s=i(20829),h=i(24687);class d{constructor(e,t,i,r){var n,l;this.seqId=0,this._columnMaxDepth=0,this.leftRowSeriesNumberColumnCount=0,this.rightRowSeriesNumberColumnCount=0,this.bodyRowSpanCount=1,this._transpose=!1,this._showHeader=!0,this._recordsCount=0,this._hasAggregation=!1,this._hasAggregationOnTopCount=0,this._hasAggregationOnBottomCount=0,this._cellRangeMap=new Map,this._showHeader=i,this._table=e,this._columns=[],this._columnsIncludeHided=[],this._headerCellIds=[],this._columnMaxDepth=this._calculateMaxDepth(t),this.hierarchyIndent=null!=r?r:20,this.hierarchyTextStartAlignment=e.options.hierarchyTextStartAlignment,this.columnHierarchyType=e.options.headerHierarchyType,this.columnExpandLevel=null!=(n=e.options.headerExpandLevel)?n:1,this.columnTree=new h.KO(t,{seqId:0},null!=(l=this.columnHierarchyType)?l:null,"grid-tree"===this.columnHierarchyType?this.columnExpandLevel:void 0),this._headerObjectsIncludeHided=this._addHeaders(0,t,[]),this._headerObjects=this._headerObjectsIncludeHided.filter(e=>!0!==e.define.hide),this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this.rowHierarchyType=(0,s.C1)(this)?"tree":"grid",this._hasAggregation=(0,s.MP)(this),this._hasAggregationOnBottomCount=(0,s.WM)(this),this._hasAggregationOnTopCount=(0,s.OT)(this),this.handleRowSeriesNumber(e.internalProps.rowSeriesNumber)}handleRowSeriesNumber(e){var t,i,r;e&&(Array.isArray(e)?this.rowSeriesNumberColumn=e.map((e,t)=>{var i,r;return{id:this.seqId++,title:e.title,define:(0,n.Z)({field:"_vtable_rowSeries_number_"+t},e),cellType:null!=(i=e.cellType)?i:"text",headerType:"checkbox"===e.cellType?"checkbox":"text",style:e.style,width:e.width,format:e.format,field:null!=(r=e.field)?r:"_vtable_rowSeries_number_"+t,icon:e.icon,headerIcon:e.headerIcon,isChildNode:!1}}):this.rowSeriesNumberColumn=[{id:this.seqId++,title:e.title,define:(0,n.Z)({field:"_vtable_rowSeries_number"},e),cellType:null!=(t=e.cellType)?t:"text",headerType:null!=(i=e.headerType)?i:"checkbox"===e.cellType?"checkbox":"text",style:e.style,width:e.width,format:e.format,field:null!=(r=e.field)?r:"_vtable_rowSeries_number",icon:e.icon,headerIcon:e.headerIcon,isChildNode:!1}],this.leftRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter(e=>!0),this.rightRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter(e=>!1),this.leftRowSeriesNumberColumnCount=this.leftRowSeriesNumberColumn.length,this.rightRowSeriesNumberColumnCount=this.rightRowSeriesNumberColumn.length)}get transpose(){return this._transpose}set transpose(e){this._transpose=e}get showHeader(){return this._showHeader}set showHeader(e){this._showHeader=e}isSeriesNumberInHeader(e,t){if(this.leftRowSeriesNumberColumnCount>0&&e>=0&&t>=0&&e<this.leftRowSeriesNumberColumnCount){if(this.transpose)return!1;if(t<this.headerLevelCount)return!0}if(this.rightRowSeriesNumberColumnCount>0&&t>=0&&e>=this.colCount-this.rightRowSeriesNumberColumnCount){if(this.transpose)return!1;if(t<this.headerLevelCount)return!0}return!1}isSeriesNumberInBody(e,t){return!!(this.leftRowSeriesNumberColumnCount>0)&&!!(e>=0)&&!!(e<this.leftRowSeriesNumberColumnCount)&&(!!this.transpose||!!(t>=this.headerLevelCount))||!!(this.rightRowSeriesNumberColumnCount>0)&&!!(e>=this.colCount-this.rightRowSeriesNumberColumnCount)&&(!!this.transpose||!!(t>=this.headerLevelCount))||!1}isSeriesNumber(e,t){return!!((0,l.Z)(e)&&(0,l.Z)(t))&&(!!(this.leftRowSeriesNumberColumnCount>0)&&!!(e>=0)&&!!(t>=0)&&!!(e<this.leftRowSeriesNumberColumnCount)||!!(this.rightRowSeriesNumberColumnCount>0)&&!!(t>=0)&&!!(e>=this.colCount-this.rightRowSeriesNumberColumnCount))||!1}getSeriesNumberHeader(e,t){if(this.leftRowSeriesNumberColumnCount>0&&e>=0&&e<this.leftRowSeriesNumberColumnCount){if(this.transpose)return;if(t<this.headerLevelCount)return Object.assign({},this.leftRowSeriesNumberColumn[e],{style:Object.assign({},this._table.transpose?this._table.internalProps.theme.rowHeaderStyle:this._table.internalProps.theme.headerStyle,this._table.internalProps.rowSeriesNumber.headerStyle)})}if(this.rightRowSeriesNumberColumnCount>0&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t<this.headerLevelCount){if(this.transpose)return;if(t<this.headerLevelCount)return this.rightRowSeriesNumberColumn[e-(this.colCount-this.rightRowSeriesNumberColumnCount)]}}getSeriesNumberBody(e,t){return this.leftRowSeriesNumberColumnCount>0&&e>=0&&e<this.leftRowSeriesNumberColumnCount&&(this.transpose||t>=this.headerLevelCount)?this.leftRowSeriesNumberColumn[e]:this.rightRowSeriesNumberColumnCount>0&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&(this.transpose||t>=this.headerLevelCount)?this.rightRowSeriesNumberColumn[e-(this.colCount-this.rightRowSeriesNumberColumnCount)]:void 0}isHeader(e,t){return!!(this.transpose&&e>=this.leftRowSeriesNumberColumnCount&&e<this.headerLevelCount+this.leftRowSeriesNumberColumnCount)||!this.transpose&&t>=0&&t<this.headerLevelCount}isAggregation(e,t){if(this.hasAggregation){if(this.hasAggregationOnBottomCount){if(this.transpose){if(e>=this.colCount-this.hasAggregationOnBottomCount)return!0}else if(t>=this.rowCount-this.hasAggregationOnBottomCount)return!0}if(this.hasAggregationOnTopCount){if(this.transpose){if(e>=this.rowHeaderLevelCount&&e<this.rowHeaderLevelCount+this.hasAggregationOnTopCount)return!0}else if(t>=this.columnHeaderLevelCount&&t<this.columnHeaderLevelCount+this.hasAggregationOnTopCount)return!0}}return!1}isTopAggregation(e,t){if(this.hasAggregationOnTopCount){if(this.transpose){if(e>=this.rowHeaderLevelCount&&e<this.rowHeaderLevelCount+this.hasAggregationOnTopCount)return!0}else if(t>=this.columnHeaderLevelCount&&t<this.columnHeaderLevelCount+this.hasAggregationOnTopCount)return!0}return!1}isBottomAggregation(e,t){if(this.hasAggregationOnBottomCount){if(this.transpose){if(e>=this.colCount-this.hasAggregationOnBottomCount)return!0}else if(t>=this.rowCount-this.hasAggregationOnBottomCount)return!0}return!1}get hasAggregation(){return this._hasAggregation}get hasAggregationOnTopCount(){return this._hasAggregationOnTopCount}get hasAggregationOnBottomCount(){return this._hasAggregationOnBottomCount}getAggregatorsByCell(e,t){return this.getColumnDefine(e,t).vtable_aggregator}getAggregatorsByCellRange(e,t,i,r){let n=[];if(!this.transpose){for(let r=e;r<=i;r++){let e=this.getColumnDefine(r,t);e.vtable_aggregator&&(n=n.concat(Array.isArray(e.vtable_aggregator)?e.vtable_aggregator:[e.vtable_aggregator]))}return n}for(let i=t;i<=r;i++){let t=this.getColumnDefine(e,i);t.vtable_aggregator&&(n=n.concat(Array.isArray(t.vtable_aggregator)?t.vtable_aggregator:[t.vtable_aggregator]))}return[]}getAggregatorOnTop(e,t){let i=this.getColumnDefine(e,t),r=i.vtable_aggregator,n=i.aggregation;if(Array.isArray(n)){let i=n.reduce((e,t,i)=>(t.showOnTop&&e.push(i),e),[]).map(e=>r[e]);return this.transpose?i[e-this.rowHeaderLevelCount]:i[t-this.columnHeaderLevelCount]}return this.transpose&&e-this.rowHeaderLevelCount==0?(null==n?void 0:n.showOnTop)?r:null:this.transpose||t-this.columnHeaderLevelCount!=0?null:(null==n?void 0:n.showOnTop)?r:null}getAggregatorOnBottom(e,t){let i=this.getColumnDefine(e,t),r=i.vtable_aggregator,n=i.aggregation;if(Array.isArray(n)){let i=n.reduce((e,t,i)=>(t.showOnTop||e.push(i),e),[]).map(e=>r[e]);return this.transpose?i[e-(this.colCount-this.hasAggregationOnBottomCount)]:i[t-(this.rowCount-this.hasAggregationOnBottomCount)]}return this.transpose&&e-(this.colCount-this.hasAggregationOnBottomCount)==0?(null==n?void 0:n.showOnTop)?null:r:this.transpose||t-(this.rowCount-this.hasAggregationOnBottomCount)!=0||(null==n?void 0:n.showOnTop)?null:r}getAggregatorCellAddress(e,t,i,r){let n=[],l=this.hasAggregationOnTopCount,o=this.hasAggregationOnBottomCount;if(this.transpose){for(let i=t;i<=r;i++)if(this.getColumnDefine(e,i).vtable_aggregator){for(let e=0;e<l;e++)n.push({col:this.headerLevelCount+e,row:i});for(let e=0;e<o;e++)n.push({col:this.rowCount-o+e,row:i})}}else for(let r=e;r<=i;r++)if(this.getColumnDefine(r,t).vtable_aggregator){for(let e=0;e<l;e++)n.push({col:r,row:this.headerLevelCount+e});for(let e=0;e<o;e++)n.push({col:r,row:this.rowCount-o+e})}return n}getCellLocation(e,t){return this.isHeader(e,t)?this.transpose?"rowHeader":"columnHeader":"body"}isRowHeader(e,t){return!!(this.transpose&&e>=this.leftRowSeriesNumberColumnCount&&e<this.headerLevelCount+this.leftRowSeriesNumberColumnCount)}isColumnHeader(e,t){return!this.transpose&&t>=0&&t<=this.headerLevelCount-1&&e>=this.leftRowSeriesNumberColumnCount&&e<this.colCount-this.rightRowSeriesNumberColumnCount}isFrozenColumn(e,t){if((0,l.Z)(t)){if(e>=0&&e<this.frozenColCount&&t>=this.frozenRowCount&&t<this.rowCount-this.bottomFrozenRowCount)return!0}else if(this.frozenColCount>0&&e>=0&&e<this.frozenColCount)return!0;return!1}isRightFrozenColumn(e,t){if((0,l.Z)(t)){if(e>=this.colCount-this.rightFrozenColCount&&t>=this.frozenRowCount&&t<this.rowCount-this.bottomFrozenRowCount)return!0}else if(this.rightFrozenColCount>0&&e>=this.colCount-this.rightFrozenColCount)return!0;return!1}isFrozenRow(e,t){if((0,l.Z)(t)){if(t>=0&&t<this.frozenRowCount&&e>=this.frozenColCount&&e<this.colCount-this.rightFrozenColCount)return!0}else if(t=e,this.frozenRowCount>0&&t>=0&&t<this.frozenRowCount)return!0;return!1}isBottomFrozenRow(e,t){if((0,l.Z)(t)){if(t>=this.rowCount-this.bottomFrozenRowCount&&e>=this.frozenColCount&&e<this.colCount-this.rightFrozenColCount)return!0}else if(t=e,this.bottomFrozenRowCount>0&&t>=this.rowCount-this.bottomFrozenRowCount)return!0;return!1}isLeftTopCorner(e,t){return e>=0&&e<this.frozenColCount&&t>=0&&t<this.frozenRowCount}isLeftBottomCorner(e,t){return e>=0&&e<this.frozenColCount&&t>=this.rowCount-this.bottomFrozenRowCount}isRightTopCorner(e,t){return e>=this.colCount-this.rightFrozenColCount&&t>=0&&t<this.frozenRowCount}isRightBottomCorner(e,t){return e>=this.colCount-this.rightFrozenColCount&&t>=this.rowCount-this.bottomFrozenRowCount}isCornerHeader(e,t){return!1}getColumnHeaderRange(){var e,t;return this.transpose?{start:{col:0,row:0},end:{col:this._headerCellIds.length-1,row:(null!=(e=this.rowCount)?e:0)-1}}:{start:{col:0,row:0},end:{col:(null!=(t=this.colCount)?t:0)-1,row:this._headerCellIds.length-1}}}getRowHeaderRange(){var e,t;return this.transpose?{start:{col:0,row:0},end:{col:this._headerCellIds.length-1,row:(null!=(e=this.rowCount)?e:0)-1}}:{start:{col:0,row:0},end:{col:(null!=(t=this.colCount)?t:0)-1,row:this._headerCellIds.length-1}}}getCornerHeaderRange(){}getBodyRange(){var e,t,i,r;return this.transpose?{start:{col:this.headerLevelCount,row:0},end:{col:(null!=(e=this.colCount)?e:0)-1,row:(null!=(t=this.rowCount)?t:0)-1}}:{start:{col:0,row:this.headerLevelCount},end:{col:(null!=(i=this.colCount)?i:0)-1,row:(null!=(r=this.rowCount)?r:0)-1}}}get headerLevelCount(){return this.showHeader?this._headerCellIds.length:0}get columnHeaderLevelCount(){return this.transpose?0:this.headerLevelCount}get rowHeaderLevelCount(){return this.transpose?this.headerLevelCount:0}get frozenColCount(){return this._table.internalProps.frozenColCount?this.colCount>this._table.internalProps.frozenColCount?this._table.internalProps.frozenColCount:this.colCount:0}get frozenRowCount(){return this._table.internalProps.frozenRowCount?this.rowCount>=this._table.internalProps.frozenRowCount?this._table.internalProps.frozenRowCount:this.rowCount:0}get bottomFrozenRowCount(){return this._table.internalProps.bottomFrozenRowCount?this.rowCount-this.headerLevelCount>=this._table.internalProps.bottomFrozenRowCount?this._table.internalProps.bottomFrozenRowCount:this.rowCount-this.headerLevelCount:0}get rightFrozenColCount(){return this._table.internalProps.rightFrozenColCount?this.colCount-this.frozenColCount>=this._table.internalProps.rightFrozenColCount?this._table.internalProps.rightFrozenColCount:Math.max(0,this.colCount-this.frozenColCount):0}get colCount(){return this.transpose?this.headerLevelCount+this.recordsCount+this.leftRowSeriesNumberColumnCount+this.rightRowSeriesNumberColumnCount:this._columns.length+this.leftRowSeriesNumberColumnCount+this.rightRowSeriesNumberColumnCount}get rowCount(){return this.transpose?this._columns.length:this.headerLevelCount+this.recordsCount}get bodyRowCount(){return this.transpose?this._columns.length:this.rowCount-this.bottomFrozenRowCount-this.headerLevelCount}get bodyColCount(){return this.transpose?this.colCount-this.rightFrozenColCount-this.rowHeaderLevelCount:this._columns.length}get recordsCount(){return this._recordsCount}set recordsCount(e){this._recordsCount=e}get headerObjects(){return this._headerObjects}get columnObjects(){return this._columns}get headerObjectsIncludeHided(){return this._headerObjectsIncludeHided}get columnWidths(){if(this.leftRowSeriesNumberColumnCount){let e=this.leftRowSeriesNumberColumn.map(e=>({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}));return e.push(...this._columns.map(e=>({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}))),e}return this._columns.map(e=>({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}))}getColumnWidthDefined(e){var t;if(e>=0){if(e<this.leftRowSeriesNumberColumnCount)return this.leftRowSeriesNumberColumn[e];if(this.transpose){let i,r,n=0;if(e>=this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount){let e;return this.columnObjects.forEach((t,l)=>{"number"==typeof t.width?n=Math.max(t.width,n):"auto"===t.width&&(e=!0),"number"==typeof t.minWidth&&(r=Math.max(t.minWidth,r)),"number"==typeof t.maxWidth&&(i=Math.max(t.maxWidth,i))}),{width:n=n>0?n:e?"auto":void 0,minWidth:r,maxWidth:i}}if(this.isRowHeader(e,0)){let i=Array.isArray(this._table.defaultHeaderColWidth)?null!=(t=this._table.defaultHeaderColWidth[e])?t:this._table.defaultColWidth:this._table.defaultHeaderColWidth;return"auto"===i?{width:"auto"}:{width:i}}}return this._columns[e-this.leftRowSeriesNumberColumnCount]}}getCellId(e,t){var i,r,n,l;return this.transpose?e>=this.headerLevelCount+this.leftRowSeriesNumberColumnCount?null==(i=this._columns[t])?void 0:i.id:this.isSeriesNumber(e,t)?t+"_series_number":null==(r=this._headerCellIds[e-this.leftRowSeriesNumberColumnCount])?void 0:r[t]:this.isSeriesNumber(e,t)?this.rowSeriesNumberColumn[e].id:this.headerLevelCount<=t?null==(n=this._columns[e-this.leftRowSeriesNumberColumnCount])?void 0:n.id:null==(l=this._headerCellIds[t])?void 0:l[e-this.leftRowSeriesNumberColumnCount]}getHeader(e,t){if(this.isSeriesNumberInHeader(e,t))return this.getSeriesNumberHeader(e,t);let i=this.getCellId(e,t);return this._headerObjectMap[i]}getHeaderField(e,t){var i,r,n;if(this.isSeriesNumberInHeader(e,t))return null==(i=this.getSeriesNumberHeader(e,t))?void 0:i.field;if(this.isSeriesNumberInBody(e,t))return null==(r=this.getSeriesNumberBody(e,t))?void 0:r.field;let l=this.getCellId(e,t);return(null==(n=this._headerObjectMap[l])?void 0:n.field)||(this.transpose?this._columns[t]&&this._columns[t].field:this._columns[e-this.leftRowSeriesNumberColumnCount]&&this._columns[e-this.leftRowSeriesNumberColumnCount].field)}getHeaderCellAdressById(e){for(let t=0;t<this._headerCellIds.length;t++){let i=this._headerCellIds[t];for(let r=0;r<i.length;r++)if(i[r]===e)return this.transpose?{col:t,row:r}:{col:r+this.leftRowSeriesNumberColumnCount,row:t}}}getHeaderCellAddressByField(e){let t=this.headerObjects.find(t=>t&&t.field===e);return t&&this.getHeaderCellAdressById(t.id)}getBody(e,t){return this.isSeriesNumber(e,t)?this.getSeriesNumberBody(e,t):this.transpose?this._columns[t]:this._columns[e-this.leftRowSeriesNumberColumnCount]}getBodyLayoutRangeById(e){var t,i;if(this.transpose){for(let i=0;i<(null!=(t=this.rowCount)?t:0);i++)if(e===this._columns[i].id)return{start:{col:0,row:i},end:{col:0,row:i}}}else for(let t=this.leftRowSeriesNumberColumnCount;t<(null!=(i=this.colCount)?i:0);t++)if(e===this._columns[t-this.leftRowSeriesNumberColumnCount].id)return{start:{col:t,row:0},end:{col:t,row:0}};return{start:{col:-1,row:-1},end:{col:-1,row:-1}}}getCellRange(e,t){return function(e,t,i){var r,n,l;if(-1===e||-1===t)return{start:{col:e,row:t},end:{col:e,row:t}};if(i._cellRangeMap.has(`$${e}$${t}`))return i._cellRangeMap.get(`$${e}$${t}`);let o={start:{col:e,row:t},end:{col:e,row:t}};if(i.transpose)o=function(e,t,i){var r,n,l,o;let a={start:{col:e,row:t},end:{col:e,row:t}};if(i.headerLevelCount+i.leftRowSeriesNumberColumnCount<=e||-1===e&&-1===t){if(i.headerLevelCount+i.leftRowSeriesNumberColumnCount<=e&&(null==(n=null==(r=i.columnObjects[t])?void 0:r.define)?void 0:n.mergeCell)){let r=i._table.getCellValue(e,t);for(let n=e-1;n>=i.headerLevelCount+i.leftRowSeriesNumberColumnCount;n--){let l=i._table.getCellValue(n,t);if("boolean"==typeof i.columnObjects[t].define.mergeCell){if(r!==l)break}else if(!i.columnObjects[t].define.mergeCell(r,l,{source:{col:e,row:t},target:{col:n,row:t},table:i._table}))break;a.start.col=n}for(let n=e+1;n<(null!=(l=i.colCount)?l:0);n++){let l=i._table.getCellValue(n,t);if("boolean"==typeof i.columnObjects[t].define.mergeCell){if(r!==l)break}else if(!i.columnObjects[t].define.mergeCell(r,l,{source:{col:e,row:t},target:{col:n,row:t},table:i._table}))break;a.end.col=n}}return a}let s=i.getCellId(e,t);for(let r=t-1;r>=0&&s===i.getCellId(e,r);r--)a.start.row=r;for(let r=t+1;r<(null!=(o=i.rowCount)?o:0)&&s===i.getCellId(e,r);r++)a.end.row=r;for(let r=e-1;r>=0&&s===i.getCellId(r,t);r--)a.start.col=r;for(let r=e+1;r<i.headerLevelCount+i.leftRowSeriesNumberColumnCount&&s===i.getCellId(r,t);r++)a.end.col=r;return a}(e,t,i);else if(i.headerLevelCount<=t){if(i.headerLevelCount<=t&&(null==(n=null==(r=i.columnObjects[e-i.leftRowSeriesNumberColumnCount])?void 0:r.define)?void 0:n.mergeCell)){let r=i._table.getCellValue(e,t);for(let n=t-1;n>=i.headerLevelCount;n--){let l=i._table.getCellValue(e,n);if("boolean"==typeof i.columnObjects[e-i.leftRowSeriesNumberColumnCount].define.mergeCell){if(r!==l)break}else if(!i.columnObjects[e-i.leftRowSeriesNumberColumnCount].define.mergeCell(r,l,{source:{col:e,row:t},target:{col:e,row:n},table:i._table}))break;o.start.row=n}for(let n=t+1;n<i.rowCount;n++){let l=i._table.getCellValue(e,n);if("boolean"==typeof i.columnObjects[e-i.leftRowSeriesNumberColumnCount].define.mergeCell){if(r!==l)break}else if(!i.columnObjects[e-i.leftRowSeriesNumberColumnCount].define.mergeCell(r,l,{source:{col:e,row:t},target:{col:e,row:n},table:i._table}))break;o.end.row=n}}!function(e,t,i,r){if("tree"!==r.rowHierarchyType)return;let n=r._table.getCellRawRecord(e,t);r._table.internalProps.groupTitleCheckbox&&r._table.internalProps.rowSeriesNumber?(null==n?void 0:n.vtableMerge)&&e>=r.leftRowSeriesNumberColumnCount&&(i.start.col=r.rowHeaderLevelCount+r.leftRowSeriesNumberColumnCount,i.end.col=r.colCount-1,i.start.row=i.end.row=t):(null==n?void 0:n.vtableMerge)&&(i.start.col=r.rowHeaderLevelCount,i.end.col=r.colCount-1,i.start.row=i.end.row=t)}(e,t,o,i)}else{let r=i.getCellId(e,t);for(let n=e-1;n>=0&&r===i.getCellId(n,t);n--)o.start.col=n;for(let n=e+1;n<(null!=(l=i.colCount)?l:0)&&r===i.getCellId(n,t);n++)o.end.col=n;for(let n=t-1;n>=0&&r===i.getCellId(e,n);n--)o.start.row=n;for(let n=t+1;n<i.headerLevelCount&&r===i.getCellId(e,n);n++)o.end.row=n}return i._cellRangeMap.set(`$${e}$${t}`,o),o}(e,t,this)}isCellRangeEqual(e,t,i,r){let n=this.getCellRange(e,t),l=this.getCellRange(i,r);return n.start.col===l.start.col&&n.end.col===l.end.col&&n.start.row===l.start.row&&n.end.row===l.end.row}getRecordShowIndexByCell(e,t){let i=this.hasAggregationOnTopCount?this.headerLevelCount+1:this.headerLevelCount;return this.transpose?e<i?-1:e-i:t<i?-1:t-i}getRecordStartRowByRecordIndex(e){return(this.hasAggregationOnTopCount?this.headerLevelCount+1:this.headerLevelCount)+e}_calculateMaxDepth(e,t=0){let i=t;return e.forEach(e=>{if(e.columns&&e.columns.length>0){let r=this._calculateMaxDepth(e.columns,t+1);r>i&&(i=r)}}),i}_addHeaders(e,t,i,n,l){let a=[],s=this._newRow(e,n);return t.forEach(t=>{var h,d,u,c;let p=this._columns.length,g=this.seqId++,f={id:g,title:null!=(h=t.title)?h:t.caption,headerIcon:t.headerIcon,field:t.field,style:t.headerStyle,headerType:null!=(d=t.headerType)?d:"text",dropDownMenu:t.dropDownMenu,define:t,hierarchyState:t.hierarchyState,columnWidthComputeMode:t.columnWidthComputeMode};a[g]=f;let m=e;if(t.levelSpan){m=Math.min(e+t.levelSpan-1,this._columnMaxDepth-1);for(let t=e;t<=m;t++)this._headerCellIds[t]||(this._headerCellIds[t]=[]),void 0===this._headerCellIds[t][p]&&(this._headerCellIds[t][p]=g)}if(l)for(let e=m-1;e>=0;e--)this._headerCellIds[e]&&void 0===this._headerCellIds[e][p]&&void 0!==i[m-l]&&(this._headerCellIds[e][p]=i[m-l]);else for(let e=m-1;e>=0;e--)this._headerCellIds[e]&&void 0===this._headerCellIds[e][p]&&void 0!==i[e]&&(this._headerCellIds[e][p]=i[e]);n?this._headerCellIds[e-1]&&void 0!==this._headerCellIds[e-1][p]&&(s[p]=this._headerCellIds[e-1][p]):s[p]=g;let b=!t.hierarchyState||t.hierarchyState===r.g.expand;if(t.columns&&b)t.columns.every(e=>e.hide)||t.hide||this._addHeaders(m+1,t.columns,[...i,g],t.hideColumnsSubHeader||n,t.levelSpan).forEach(e=>a.push(e));else{let i={id:this.seqId++,field:t.field,fieldFormat:t.fieldFormat,width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth,icon:t.icon,cellType:null!=(c=null!=(u=t.cellType)?u:t.columnType)?c:"text",chartModule:"chartModule"in t?t.chartModule:null,chartSpec:"chartSpec"in t?t.chartSpec:null,sparklineSpec:"sparklineSpec"in t?t.sparklineSpec:o.hW,style:t.style,define:t,columnWidthComputeMode:t.columnWidthComputeMode,disableColumnResize:null==t?void 0:t.disableColumnResize,aggregation:t.aggregation,isChildNode:e>=1};if(this._columnsIncludeHided.push(i),!0!==t.hide){this._columns.push(i);for(let t=e+1;t<this._headerCellIds.length;t++)this._headerCellIds[t][p]=g}}}),a}_newRow(e,t=!1){if(this._headerCellIds[e]){let t=this._headerCellIds[e-1];if(t.length>this._headerCellIds[e].length)for(let i=this._headerCellIds[e].length;i<t.length;i++)this._headerCellIds[e][i]=t[i];return this._headerCellIds[e]}if(t)return[];let i=this._headerCellIds[e]=[];if(!this._columns.length)return i;let r=this._headerCellIds[e-1];for(let e=0;e<r.length;e++)i[e]=r[e];return i}getCellHeaderPaths(e,t){if(this.isSeriesNumber(e,t))return;let i=[],r=[];return this.transpose?r=[{field:this._columns[t].field}]:i=[{field:this._columns[e-this.leftRowSeriesNumberColumnCount].field}],{colHeaderPaths:i,rowHeaderPaths:r,cellLocation:this.getCellLocation(e,t)}}getParentCellId(e,t){if(0!==t){if(this.isColumnHeader(e,t))return this.getCellId(e,t-1);if(this.isRowHeader(e,t)){if(this.isSeriesNumberInBody(e-1,t))return;return this.getCellId(e-1,t)}}}canMoveHeaderPosition(e,t){let i=this._table.stateManager.columnMove.movingColumnOrRow;if(this.isSeriesNumberInHeader(t.col,t.row)||this.isSeriesNumberInHeader(e.col,e.row))return!1;if(!this.transpose&&(this.isSeriesNumberInBody(t.col,t.row)&&this.isSeriesNumberInBody(e.col,e.row)||"row"===i)){let i=this.getRecordShowIndexByCell(0,e.row),r=this.getRecordShowIndexByCell(0,t.row);return this._table.dataSource.canChangeOrder(i,r)}if(this.transpose&&(this.isSeriesNumberInBody(t.col,t.row)&&this.isSeriesNumberInBody(e.col,e.row)||"row"===i)&&(this.getBody(e.col+this.leftRowSeriesNumberColumnCount,e.row).isChildNode&&this.getBody(t.col+this.leftRowSeriesNumberColumnCount,t.row).isChildNode?(e.col=e.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1,t.col=t.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1):(e.col=e.col+this.leftRowSeriesNumberColumnCount,t.col=t.col+this.leftRowSeriesNumberColumnCount)),e.col<0||e.row<0||t.col<0||t.row<0||"disabled"===this._table.internalProps.frozenColDragHeaderMode&&this._table.isFrozenColumn(t.col))return!1;let r=this.getCellRange(e.col,e.row);return this.isColumnHeader(e.col,e.row)||"column"===this._table.stateManager.columnMove.movingColumnOrRow&&0===e.row?this.getParentCellId(e.col,r.start.row)===this.getParentCellId(t.col,r.start.row):!!this.isRowHeader(e.col,e.row)&&this.getParentCellId(r.start.col,e.row)===this.getParentCellId(r.start.col,t.row)}moveHeaderPosition(e,t){var i,r,n,l,o,a,s;if((!(null==(i=this._table.options.dragOrder)?void 0:i.validateDragOrderOnEnd)||(null==(r=this._table.options.dragOrder)?void 0:r.validateDragOrderOnEnd(e,t)))&&this.canMoveHeaderPosition(e,t)){let i=this.getCellRange(e.col,e.row);if(this.isColumnHeader(e.col,e.row)||"column"===this._table.stateManager.columnMove.movingColumnOrRow&&0===e.row){let r,h=i.end.col-i.start.col+1,d=this.getCellRange(t.col,i.start.row);if((r=t.col>=e.col?d.end.col-h+1:d.start.col)===i.start.col)return null;for(let e=0;e<this._headerCellIds.length;e++){let t=this._headerCellIds[e].splice(i.start.col-this.leftRowSeriesNumberColumnCount,h);t.unshift(r-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._headerCellIds[e],t)}if(null==(n=this._table.options.dragOrder)?void 0:n.maintainArrayDataOrder)for(let t=0;t<(null==(l=this._table.dataSource.dataSourceObj)?void 0:l.records.length);t++){let n=null==(o=this._table.dataSource.dataSourceObj)?void 0:o.records[t];if(Array.isArray(n)){n.length-1<Math.max(r,e.col)&&n.push(...Array(Math.max(r,e.col)-n.length+1).fill(void 0));let t=n.splice(i.start.col-this.leftRowSeriesNumberColumnCount,h);t.unshift(r-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(n,t)}}let u=this._columns.splice(i.start.col-this.leftRowSeriesNumberColumnCount,h);if(u.unshift(r-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._columns,u),null==(a=this._table.options.dragOrder)?void 0:a.maintainArrayDataOrder)for(let e=0;e<this._columns.length;e++)this._columns[e].field=e;if(this.columnTree.movePosition(i.start.row,i.start.col-this.leftRowSeriesNumberColumnCount,r-this.leftRowSeriesNumberColumnCount),null==(s=this._table.options.dragOrder)?void 0:s.maintainArrayDataOrder)for(let e=0;e<this.columnTree.tree.children.length;e++)this.columnTree.tree.children[e].field=e;return this.columnTree.reset(this.columnTree.tree.children),this._cellRangeMap=new Map,{sourceIndex:i.start.col,targetIndex:r,sourceSize:h,targetSize:d.end.col-d.start.col+1,moveType:"column"}}if(this.isRowHeader(e.col,e.row)||this.isSeriesNumberInBody(e.col,e.row)&&this.transpose){let r;this.isSeriesNumberInBody(e.col,e.row)&&(i=this.getCellRange(e.col+this.leftRowSeriesNumberColumnCount,e.row));let n=i.end.row-i.start.row+1,l=this.getCellRange(i.start.col,t.row);if((r=t.row>=e.row?l.end.row-n+1:l.start.row)===i.start.row)return null;for(let e=0;e<this._headerCellIds.length;e++){let t=this._headerCellIds[e].splice(i.start.row,n);t.unshift(r,0),Array.prototype.splice.apply(this._headerCellIds[e],t)}let o=this._columns.splice(i.start.row,n);return o.unshift(r,0),Array.prototype.splice.apply(this._columns,o),this.columnTree.movePosition(i.start.col-this.leftRowSeriesNumberColumnCount,i.start.row,r+(t.row>e.row?i.end.row-i.start.row:0)),this.columnTree.reset(this.columnTree.tree.children),this._cellRangeMap=new Map,{sourceIndex:i.start.row,targetIndex:r,sourceSize:n,targetSize:l.end.row-l.start.row+1,moveType:"row"}}if(this.isSeriesNumberInBody(e.col,e.row)||"row"===this._table.stateManager.columnMove.movingColumnOrRow)return{sourceIndex:e.row,targetIndex:t.row,sourceSize:1,targetSize:1,moveType:"row"}}return null}toggleHierarchyState(e){return{addCellPositions:e.add.map(e=>({col:0,row:this._table.columnHeaderLevelCount+e})),removeCellPositions:e.remove.map(e=>({col:0,row:this._table.columnHeaderLevelCount+e}))}}setChartInstance(e,t,i){let r=this.transpose?this._columns[t]:this._columns[e-this.leftRowSeriesNumberColumnCount];"function"!=typeof r.chartSpec&&(r.chartInstance=i)}getChartInstance(e,t){return(this.transpose?this._columns[t]:this._columns[e-this.leftRowSeriesNumberColumnCount]).chartInstance}checkHasChart(){return(0,a.YL)(this)}getAxisConfigInPivotChart(e,t){}isEmpty(e,t){return!1}isAxisCell(e,t){return!1}getChartAxes(e,t){return[]}isShareChartSpec(e,t){let i=this.getBody(e,t);return"function"!=typeof(null==i?void 0:i.chartSpec)}isNoChartDataRenderNothing(e,t){let i=this.getBody(e,t);return(null==i?void 0:i.define).noDataRenderNothing}getChartSpec(e,t){return this.getRawChartSpec(e,t)}getRawChartSpec(e,t){let i=this.getBody(e,t),r=null==i?void 0:i.chartSpec;return"function"==typeof r?r({col:e,row:t,dataValue:this._table.getCellOriginValue(e,t)||"",value:this._table.getCellValue(e,t)||"",rect:this._table.getCellRangeRelativeRect(this._table.getCellRange(e,t)),table:this._table}):r}getChartDataId(e,t){return(0,a.py)(e,t,this)}release(){let e=this._table._getActiveChartInstance();null==e||e.release(),this.columnObjects.forEach(e=>{var t;null==(t=e.chartInstance)||t.release()})}clearCellRangeMap(){this._cellRangeMap.clear()}updateColumnTitle(e,t,i){let r=this._table.internalProps.layoutMap.getHeader(e,t);r.title=i,r.define.title=i}getColumnByField(e){var t;return null==(t=this.columnObjects)?void 0:t.reduce((t,i,r)=>(i.field===e&&t.push({col:r,columnDefine:i}),t),[])}getColumnByKey(e){var t;let i;return{columnDefine:null==(t=this.columnObjects)?void 0:t.find((t,r)=>{var n;return(null==(n=t.define)?void 0:n.key)===e&&(i=r+this.leftRowSeriesNumberColumnCount,!0)}),col:i}}getColumnDefine(e,t){if(e>=0)return e<this.leftRowSeriesNumberColumnCount?this.leftRowSeriesNumberColumn[e].define:this.transpose?this._columns[t].define:this._columns[e-this.leftRowSeriesNumberColumnCount].define}}var u=i(95723),c=i(46320),p=i(7466),g=i(57198),f=i(74882),m=i(49499),b=i(61014),y=i(43624),v=i(75665),_=i(1999),C=i(39873),x=i(76659),w=i(54833),S=i(83624);function A(e,t){return(0,S.Z)(e)?{groupByRules:[e],addRecordRule:t}:(0,u.Z)(e)?{groupByRules:e.map(e=>(0,S.Z)(e)?e:e.key),addRecordRule:t}:{addRecordRule:t}}var k=i(14993),M=i(1028),T=i(35759),R=i(4654);function E(e){let t=e.sortState;(t=!t||Array.isArray(t)?t:[t])&&(t=t.map(t=>{var i;return t.orderFn=null!=(i=e._getSortFuncFromHeaderOption(void 0,t.field))?i:v.K$,t}),e.dataSource.sort(t))}function P(e,t,i){let{checkedState:r}=e.stateManager;if(r)if("tree"===e.dataSource.rowHierarchyType){let e,n=(e=(0,R.Z)(t)?[t]:t).length,l=[];r.forEach((t,r)=>{var o;let a=r.split(",");if(a.length>=e.length)for(let s=0;s<a.length;s++){let h=null!=(o=e[s])?o:-1,d=Number(a[s]);if(!(h===d&&s<a.length-1)){if(h===d&&s===a.length-1||-1===h){l.push({originKey:r,value:t});break}h<d&&s===n-1&&(a[s]=(d-i).toString(),l.push({originKey:r,targetKey:a.toString(),value:t}));break}}}),l.sort((e,t)=>{let i=e.originKey.split(","),r=t.originKey.split(","),n=i.length,l=r.length,o=Math.min(n,l);for(let e=0;e<o;e++){let t=Number(i[e]),n=Number(r[e]);if(t!==n)return t-n}return n-l}),l.forEach(({originKey:e,targetKey:t,value:i})=>{r.delete(e),t&&r.set(t,i)})}else{let e=[],n=[];r.forEach((r,l)=>{let o=Number(l);!isNaN(o)&&o>=t&&(o===t?e.push(l):o>t&&n.push({originKey:l,targetKey:(o-i).toString(),value:r}))}),e.forEach(e=>r.delete(e)),n.forEach(({originKey:e,targetKey:t,value:i})=>{r.delete(e),r.set(t,i)})}}function B(e,t,i){let{checkedState:r}=e.stateManager;if(r)if("tree"===e.dataSource.rowHierarchyType){let e,n=(e=(0,R.Z)(t)?[t]:t).length,l=[];r.forEach((t,r)=>{var o;let a=r.split(",");if(a.length>=e.length)for(let s=0;s<a.length;s++){let h=null!=(o=e[s])?o:-1,d=Number(a[s]);if(h===d&&(s===a.length-1||s===n-1)){a[s]=(d+i).toString(),l.push({originKey:r,targetKey:a.toString(),value:t});break}if(!(h===d&&s<a.length-1)){h<d&&s===n-1&&(a[s]=(d+i).toString(),l.push({originKey:r,targetKey:a.toString(),value:t}));break}}}),l.sort((e,t)=>{let i=e.originKey.split(","),r=t.originKey.split(","),n=i.length,l=r.length,o=Math.min(n,l);for(let e=0;e<o;e++){let t=Number(i[e]),n=Number(r[e]);if(t!==n)return-t+n}return-n+l}),l.forEach(({originKey:e,targetKey:t,value:i})=>{r.delete(e),t&&r.set(t,i)})}else for(let e=r.size-1;e>=t;e--){let t=r.get(e.toString());r.delete(e.toString()),r.set((e+i).toString(),t)}}var I=i(34399),L=i(28625),F=i(33154);class H extends p.D{constructor(e,t){var i,r,n,o,a,s,h,d;super(e,t),this.showHeader=!0,t=this.options;let u=this.internalProps;if(u.frozenColDragHeaderMode=null!=(r=null==(i=t.dragOrder)?void 0:i.frozenColDragHeaderMode)?r:t.frozenColDragHeaderMode,this.pagination=t.pagination,u.sortState=t.sortState,u.multipleSort=!!t.multipleSort,u.dataConfig=this.internalProps.groupBy?A(this.internalProps.groupBy,t.addRecordRule):{addRecordRule:t.addRecordRule},u.columns=t.columns?(0,C.u)(t.columns,["children"]):t.header?(0,C.u)(t.header,["children"]):[],(0,c.rQ)(this),u.enableTreeNodeMerge=null!=(o=null!=(n=t.enableTreeNodeMerge)?n:(0,l.Z)(this.internalProps.groupBy))&&o,this.internalProps.headerHelper.setTableColumnsEditor(),this.showHeader=null==(a=t.showHeader)||a,this.internalProps.columnWidthConfig=t.columnWidthConfig,this.internalProps.rowHeightConfig=t.rowHeightConfig,this.transpose=null!=(s=t.transpose)&&s,"node"!==f.X.mode&&(this.editorManager=new b.$(this)),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,t.dataSource?this.dataSource=t.dataSource:t.records?this.setRecords(t.records,{sortState:u.sortState}):this.setRecords([]),t.title&&(u.title=new(w.F.getComponent("title"))(t.title,this)),this.options.emptyTip)if(this.internalProps.emptyTip)null==(h=this.internalProps.emptyTip)||h.resetVisible();else{let e=w.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(d=this.internalProps.emptyTip)||d.resetVisible()}if(this.internalProps.enableTreeStickCell){let e=w.F.getComponent("listTreeStickCellPlugin");this.listTreeStickCellPlugin=new e(this)}setTimeout(()=>{this.isReleased||(this.resize(),this.fireListeners(g.B.INITIALIZED,null))},0)}isListTable(){return!0}isPivotTable(){return!1}isPivotChart(){return!1}get sortState(){return this.internalProps.sortState}get records(){var e;return null==(e=this.dataSource)?void 0:e.records}get recordsCount(){return this.dataSource.records.length}updateColumns(e,t={clearColWidthCache:!1,clearRowHeightCache:!0}){var i,r,n,l;this.scenegraph.clearCells();let o={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.internalProps.columns=(0,C.u)(e,["children"]),(0,c.rQ)(this),(null==t?void 0:t.clearColWidthCache)&&this.internalProps._widthResizedColMap.clear(),this.options.columns=e,this.internalProps.headerHelper.setTableColumnsEditor(),this._hasAutoImageColumn=void 0,this.refreshHeader(),null==(r=(i=this.dataSource).updateColumns)||r.call(i,this.internalProps.columns),this.records&&(0,c.bW)(this.internalProps.columns)&&this.dataSource.processRecords(null!=(l=null==(n=this.dataSource.dataSourceObj)?void 0:n.records)?l:this.dataSource.dataSourceObj),this.internalProps.useOneRowHeightFillAll=!1,this.headerStyleCache=new Map,this.bodyStyleCache=new Map,this.bodyBottomStyleCache=new Map,this.scenegraph.createSceneGraph(!(null==t?void 0:t.clearRowHeightCache)),this.stateManager.updateHoverPos(o.col,o.row),this.renderAsync(),this.eventManager.updateEventBinder()}_recreateSceneForStateChange(){var e,t;this.scenegraph.clearCells();let i={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this._hasAutoImageColumn=void 0,this.refreshHeader(),this.records&&(0,c.bW)(this.internalProps.columns)&&this.dataSource.processRecords(null!=(t=null==(e=this.dataSource.dataSourceObj)?void 0:e.records)?t:this.dataSource.dataSourceObj),this.internalProps.useOneRowHeightFillAll=!1,this.headerStyleCache=new Map,this.bodyStyleCache=new Map,this.bodyBottomStyleCache=new Map,this._updateSize(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(i.col,i.row),this.renderAsync(),this.eventManager.updateEventBinder()}addColumns(e,t,i=!0){var r;let n=this.options.columns;void 0===t?(t=n.length,n.push(...e)):n.splice(t,0,...e);for(let i=0;i<e.length;i++)this.colWidthsMap.addAndReorder(t+i,null!=(r=e[i].width)?r:this.internalProps.defaultColWidth);this.internalProps._colRangeWidthsMap.clear();let l=Array.from(this.internalProps._widthResizedColMap.keys());for(let i=0;i<l.length;i++)l[i]>=t&&(this.internalProps._widthResizedColMap.delete(l[i]),this.internalProps._widthResizedColMap.add(l[i]+e.length));if(i){for(let e=0;e<n.length;e++)n[e].field=e;for(let i=0;i<this.records.length;i++){let r=this.records[i];Array.isArray(r)&&r.splice(t,0,...Array(e.length).fill(void 0))}}this.updateColumns(n,{clearRowHeightCache:!1}),this.fireListeners(g.B.ADD_COLUMN,{columnIndex:t,columnCount:e.length,columns:n})}deleteColumns(e,t=!0){let i=this.options.columns;e.sort((e,t)=>t-e);for(let r=0;r<e.length;r++)if(i.splice(e[r],1),this.colWidthsMap.delAndReorder(e[r]),this.internalProps._widthResizedColMap.delete(e[r]),t)for(let t=0;t<this.records.length;t++){let i=this.records[t];Array.isArray(i)&&i.splice(e[r],1)}this.internalProps._colRangeWidthsMap.clear();let r=Array.from(this.internalProps._widthResizedColMap.keys());for(let t=0;t<r.length;t++)for(let i=0;i<e.length;i++)if(r[t]>e[i]){this.internalProps._widthResizedColMap.delete(r[t]),this.internalProps._widthResizedColMap.add(r[t]-(e.length-i));break}if(t)for(let e=0;e<i.length;e++)i[e].field=e;this.updateColumns(i,{clearRowHeightCache:!1}),this.fireListeners(g.B.DELETE_COLUMN,{deleteColIndexs:e,columns:i})}get columns(){return this.internalProps.layoutMap.columnTree.getCopiedTree()}get header(){return this.internalProps.columns}set header(e){this.internalProps.columns=e,(0,c.rQ)(this),this.options.header=e,this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.renderAsync()}get transpose(){var e;return null!=(e=this.internalProps.transpose)&&e}set transpose(e){this.internalProps.transpose!==e&&(this.internalProps.transpose=e,this.internalProps.layoutMap&&(this.internalProps.layoutMap.transpose=e,this.refreshRowColCount(),this._resetFrozenColCount(),this.renderAsync()))}getCellValue(e,t,i){var r;if(-1===e||-1===t)return null;if(!i){let i=this.getCustomMergeValue(e,t);if(i)return i}if(this.internalProps.layoutMap.isSeriesNumber(e,t)){let i;if(this.internalProps.layoutMap.isSeriesNumberInHeader(e,t)){let{title:i}=this.internalProps.layoutMap.getSeriesNumberHeader(e,t);return i}if(this.internalProps.groupBy){let r=this.getCellRawRecord(e,t);if(null==r?void 0:r.vtableMerge)return"";this.internalProps.layoutMap.isAggregation(e,t)||(i=this.dataSource.getGroupSeriesNumber(t-this.columnHeaderLevelCount))}else{let n=this.getBodyColumnDefine(e,t),l=this.getFieldData(n.field,e,t);i=["number","string"].includes(typeof l)?l:(null==l?void 0:l.text)?null!=(r=l.text)?r:"":t-this.columnHeaderLevelCount+1}let{format:n}=this.internalProps.layoutMap.getSeriesNumberBody(e,t);return"function"==typeof n?n(e,t,this,i):i}if(this.internalProps.layoutMap.isHeader(e,t)){let{title:i}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof i?i():i}if(this.internalProps.layoutMap.isAggregation(e,t)){if(this.internalProps.layoutMap.isTopAggregation(e,t)){let i=this.internalProps.layoutMap.getAggregatorOnTop(e,t);return(null==i?void 0:i.formatValue)?i.formatValue(e,t,this):""}if(this.internalProps.layoutMap.isBottomAggregation(e,t)){let i=this.internalProps.layoutMap.getAggregatorOnBottom(e,t);return(null==i?void 0:i.formatValue)?i.formatValue(e,t,this):""}}let{field:n,fieldFormat:l}=this.internalProps.layoutMap.getBody(e,t);return this.getFieldData(l||n,e,t)}getCellOriginValue(e,t){if(-1===e||-1===t)return null;if(this.internalProps.layoutMap.isSeriesNumber(e,t)){if(this.internalProps.layoutMap.isSeriesNumberInHeader(e,t)){let{title:i}=this.internalProps.layoutMap.getSeriesNumberHeader(e,t);return i}let{format:i}=this.internalProps.layoutMap.getSeriesNumberBody(e,t);return"function"==typeof i?i(e,t,this):t-this.columnHeaderLevelCount}if(this.internalProps.layoutMap.isHeader(e,t)){let{title:i}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof i?i():i}if(this.internalProps.layoutMap.isAggregation(e,t)){if(this.internalProps.layoutMap.isTopAggregation(e,t)){let i=this.internalProps.layoutMap.getAggregatorOnTop(e,t);return null==i?void 0:i.value()}if(this.internalProps.layoutMap.isBottomAggregation(e,t)){let i=this.internalProps.layoutMap.getAggregatorOnBottom(e,t);return null==i?void 0:i.value()}}let{field:i}=this.internalProps.layoutMap.getBody(e,t);return this.getFieldData(i,e,t)}getCellRawValue(e,t){if(-1===e||-1===t)return null;if(this.internalProps.layoutMap.isHeader(e,t)){let{title:i}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof i?i():i}let{field:i}=this.internalProps.layoutMap.getBody(e,t);return this.getRawFieldData(i,e,t)}getRecordShowIndexByCell(e,t){let{layoutMap:i}=this.internalProps;return i.getRecordShowIndexByCell(e,t)}getRecordIndexByCell(e,t){let{layoutMap:i}=this.internalProps,r=i.getRecordShowIndexByCell(e,t);return this.dataSource.getRecordIndexPaths(r)}getTableIndexByRecordIndex(e){return this.transpose?this.dataSource.getTableIndex(e)+this.rowHeaderLevelCount:this.dataSource.getTableIndex(e)+this.columnHeaderLevelCount}getTableIndexByField(e){let t=this.internalProps.layoutMap.columnObjects.find(t=>t.field===e);if(!t)return -1;let i=this.internalProps.layoutMap.getBodyLayoutRangeById(t.id);return this.transpose?i.start.row:i.start.col}getCellAddrByFieldRecord(e,t){return this.transpose?{col:this.getTableIndexByRecordIndex(t),row:this.getTableIndexByField(e)}:{col:this.getTableIndexByField(e),row:this.getTableIndexByRecordIndex(t)}}getCellOriginRecord(e,t){let i=this.getRecordShowIndexByCell(e,t);if(i>-1)return this.dataSource.get(i)}getCellRawRecord(e,t){let i=this.getRecordShowIndexByCell(e,t);if(i>-1)return this.dataSource.getRaw(i)}_canResizeColumn(e,t){let i=super._canResizeColumn(e,t);if(i&&!this.transpose){let i=this.internalProps.layoutMap.getBody(e,this.columnHeaderLevelCount),r=this.internalProps.layoutMap.isSeriesNumber(e,t);if((null==i?void 0:i.disableColumnResize)||r&&!0===this.internalProps.rowSeriesNumber.disableColumnResize)return!1}return i}updateOption(e,t={clearColWidthCache:!0,clearRowHeightCache:!0}){var i,r,n,o,a,s,h,d,u;let p=this.internalProps;if(this.pluginManager.removeOrAddPlugins(e.plugins),super.updateOption(e,t),p.frozenColDragHeaderMode=null!=(r=null==(i=e.dragOrder)?void 0:i.frozenColDragHeaderMode)?r:e.frozenColDragHeaderMode,this.pagination=e.pagination,p.sortState=e.sortState,p.dataConfig=this.internalProps.groupBy?A(this.internalProps.groupBy,e.addRecordRule):{addRecordRule:e.addRecordRule},this.showHeader=null==(n=e.showHeader)||n,p.columns=e.columns?(0,C.u)(e.columns,["children"]):e.header?(0,C.u)(e.header,["children"]):[],(0,c.rQ)(this),p.enableTreeNodeMerge=null!=(a=null!=(o=e.enableTreeNodeMerge)?o:(0,l.Z)(this.internalProps.groupBy))&&a,this.internalProps.headerHelper.setTableColumnsEditor(),this.transpose=null!=(s=e.transpose)&&s,this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.internalProps.columnWidthConfig=e.columnWidthConfig,this.internalProps.rowHeightConfig=e.rowHeightConfig,p.releaseList)for(let e=p.releaseList.length-1;e>=0;e--){let t=p.releaseList[e];t instanceof k.o2?t.updateColumns(this.internalProps.columns):(null==(h=null==t?void 0:t.release)||h.call(t),p.releaseList.splice(e,1))}if(e.dataSource&&this.dataSource!==e.dataSource?this.dataSource=e.dataSource:e.records?this.setRecords(e.records,{sortState:e.sortState}):(this.refreshRowColCount(),this._resetFrozenColCount(),this.scenegraph.createSceneGraph(),this.render()),e.title&&(p.title=new(w.F.getComponent("title"))(e.title,this),this.scenegraph.resize()),this.options.emptyTip)if(this.internalProps.emptyTip)null==(d=this.internalProps.emptyTip)||d.resetVisible();else{let e=w.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(u=this.internalProps.emptyTip)||u.resetVisible()}return this.pluginManager.updatePlugins(e.plugins),setTimeout(()=>{this.fireListeners(g.B.UPDATED,null)},0),new Promise(e=>{setTimeout(e,0)})}updatePagination(e){this.pagination&&("number"==typeof e.currentPage&&e.currentPage>=0&&(this.pagination.currentPage=e.currentPage),e.perPageCount&&(this.pagination.perPageCount=e.perPageCount||this.pagination.perPageCount),this.internalProps.layoutMap.clearCellRangeMap(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.clearCells(),this.dataSource.updatePagination(this.pagination),this.refreshRowColCount(),this.stateManager.initCheckedState(this.records),this.scenegraph.createSceneGraph(),this.renderAsync())}refreshHeader(){var e;let t=this.internalProps,i=this.transpose,r=this.showHeader;(t.layoutMap=new d(this,null!=(e=t.columns)?e:[],r,this.options.hierarchyIndent)).transpose=i,i||this.setMinMaxLimitWidth(!0),this.refreshRowColCount()}refreshRowColCount(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b;let{layoutMap:y}=this.internalProps;if(!y)return;let v=null!=(t=null==(e=this.internalProps.dataSource)?void 0:e.length)?t:0;y.recordsCount=v+(v>0||this.options.showAggregationWhenEmpty?y.hasAggregationOnTopCount+y.hasAggregationOnBottomCount:0),this.transpose?(this.rowCount=null!=(i=y.rowCount)?i:0,this.colCount=null!=(r=y.colCount)?r:0,this.internalProps.frozenColCount=Math.max((null!=(n=y.headerLevelCount)?n:0)+y.leftRowSeriesNumberColumnCount,null!=(l=this.options.frozenColCount)?l:0),this.internalProps.frozenRowCount=null!=(o=this.options.frozenRowCount)?o:0,this.bottomFrozenRowCount!==(null!=(a=this.options.bottomFrozenRowCount)?a:0)&&(this.bottomFrozenRowCount=null!=(s=this.options.bottomFrozenRowCount)?s:0),this.rightFrozenColCount!==(null!=(h=this.options.rightFrozenColCount)?h:0)&&(this.rightFrozenColCount=null!=(d=this.options.rightFrozenColCount)?d:0)):(this.colCount=null!=(u=y.colCount)?u:0,this.rowCount=y.recordsCount*y.bodyRowSpanCount+y.headerLevelCount,this.internalProps.frozenColCount=null!=(c=this.options.frozenColCount)?c:0,this.options.frozenColCount>=this.colCount&&(this.internalProps.frozenColCount=0),this._setFrozenRowCount(Math.max(y.headerLevelCount,null!=(p=this.options.frozenRowCount)?p:0)),this.bottomFrozenRowCount!==(null!=(g=this.options.bottomFrozenRowCount)?g:0)&&(this.bottomFrozenRowCount=null!=(f=this.options.bottomFrozenRowCount)?f:0),this.rightFrozenColCount!==(null!=(m=this.options.rightFrozenColCount)?m:0)&&(this.rightFrozenColCount=null!=(b=this.options.rightFrozenColCount)?b:0)),this.stateManager.setFrozenCol(this.internalProps.frozenColCount)}getFieldData(e,t,i){if(null===e||this.internalProps.layoutMap.isHeader(t,i))return null;let r=this.getRecordShowIndexByCell(this.transpose?t-this.internalProps.layoutMap.leftRowSeriesNumberColumnCount:t,i);return this.internalProps.dataSource.getField(r,e,t,i,this)}getRawFieldData(e,t,i){if(null===e||this.internalProps.layoutMap.isHeader(t,i))return null;let r=this.getRecordShowIndexByCell(t,i);return this.internalProps.dataSource.getRawField(r,e,t,i,this)}_moveHeaderPosition(e,t){let i=this.getCellRange(e.col,e.row),r=this.getCellRange(t.col,t.row),n=this.internalProps.layoutMap.moveHeaderPosition(e,t);return n?("column"===n.moveType?(this.colWidthsMap.exchangeOrder(i.start.col,i.end.col-i.start.col+1,r.start.col,r.end.col-r.start.col+1,n.targetIndex),(0,F.ct)(n,this),this.transpose||(this.colWidthsLimit={},this.setMinMaxLimitWidth())):(n.targetIndex>n.sourceIndex?this.rowHeightsMap.exchangeOrder(n.sourceIndex,n.sourceSize,n.targetIndex+n.sourceSize-n.targetSize,n.targetSize,n.targetIndex):this.rowHeightsMap.exchangeOrder(n.sourceIndex,n.sourceSize,n.targetIndex,n.targetSize,n.targetIndex),(0,F.J7)(n,this)),n):null}changeRecordOrder(e,t){this.transpose?(e=this.getRecordShowIndexByCell(e,0),t=this.getRecordShowIndexByCell(t,0)):(e=this.getRecordShowIndexByCell(0,e),t=this.getRecordShowIndexByCell(0,t)),this.dataSource.changeOrder(e,t)}getCellAddress(e,t){let i;for(let t=0;t<this.internalProps.records.length;t++){let r=this.internalProps.records[t];if("function"==typeof e)e(r)&&(i=t);else{let n=!0;for(let t in e)if(r[t]!==e[t]){n=!1;break}n&&(i=t)}if((0,l.Z)(i))break}let r=this.getCellRangeByField(t,i);if(r)return{row:r.start.row,col:r.start.col}}getCellRangeByField(e,t){let{layoutMap:i}=this.internalProps,r=i.columnObjects.find(t=>t.field===e);if(r){let e,n=i.getBodyLayoutRangeById(r.id);return(0,l.Z)(t)&&(e=i.getRecordStartRowByRecordIndex(t)),this.transpose?{start:{row:n.start.row,col:(0,l.Z)(e)?e+n.start.col:void 0},end:{row:n.end.row,col:(0,l.Z)(e)?e+n.end.col:void 0}}:{start:{col:n.start.col,row:(0,l.Z)(e)?e+n.start.row:void 0},end:{col:n.end.col,row:(0,l.Z)(e)?e+n.end.row:void 0}}}return null}getHierarchyState(e,t){var i;if(this.isHeader(e,t))return null==(i=this._getHeaderLayoutMap(e,t))?void 0:i.hierarchyState;if((!this.internalProps.groupBy||(0,u.Z)(this.internalProps.groupBy)&&0===this.internalProps.groupBy.length)&&!this.getBodyColumnDefine(e,t).tree)return r.g.none;let n=this.getRecordShowIndexByCell(e,t);return this.dataSource.getHierarchyState(n)}getRecordHierarchyState(e,t){let i;return this.transpose?this.getRecordShowIndexByCell(e,0):i=this.getRecordShowIndexByCell(0,t),this.dataSource.getHierarchyState(i)}toggleHierarchyState(e,t,i=!0){this.stateManager.updateHoverIcon(e,t,void 0,void 0);let n=this.getHierarchyState(e,t);if(this.isHeader(e,t)){let i=this.internalProps.layoutMap.getHeader(e,t),{hierarchyState:l,define:o}=i;if(![r.g.collapse,r.g.expand].includes(l)||!o)return;let a=o.columns;if(Array.isArray(a)&&a.length>0){let e=l===r.g.expand?r.g.collapse:r.g.expand;i.hierarchyState=e,i.define.hierarchyState=e,this.updateColumns(this.internalProps.columns)}this.fireListeners(g.B.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:n,originData:i,cellLocation:this.getCellLocation(e,t)})}else if(n===r.g.expand)this._refreshHierarchyState(e,t,i),this.fireListeners(g.B.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:r.g.collapse});else if(n===r.g.collapse){let n=this.getCellOriginRecord(e,t);Array.isArray(n.children)&&this._refreshHierarchyState(e,t,i),this.fireListeners(g.B.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:r.g.expand,originData:n})}}setLoadingHierarchyState(e,t){this.scenegraph.setLoadingHierarchyState(e,t)}_refreshHierarchyState(e,t,i=!0){var r,n;let l=!1,o=!1,a=this.internalProps.layoutMap.checkHasChart();a&&(this.autoFillWidth&&(l=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&(o=this.getAllRowsHeight()<=this.tableNoFrameHeight));let s=this.getRecordShowIndexByCell(e,t),h=this.dataSource.toggleHierarchyState(s,this.scenegraph.proxy.rowStart-this.columnHeaderLevelCount,Math.max(this.scenegraph.proxy.rowEnd-this.columnHeaderLevelCount,this.scenegraph.proxy.rowStart-this.columnHeaderLevelCount+this.scenegraph.proxy.rowLimit-1)),d=this.internalProps.layoutMap.toggleHierarchyState(h);this.refreshRowColCount();for(let e=this.rowCount-this.bottomFrozenRowCount;e<this.rowCount;e++){let t=(0,y.P)(e,0,this.colCount-1,this);this._setRowHeight(e,t)}this.clearCellStyleCache(),this.internalProps.layoutMap.clearCellRangeMap(),this.internalProps.useOneRowHeightFillAll=!1;let{updateCells:u,addCells:c,removeCells:p}=function(e,t,i,r){let n=[{col:t,row:i}],l=[],o=[],{addCellPositions:a,removeCellPositions:s}=e,h=r.scenegraph.proxy,{rowStart:d,rowLimit:u}=h,{rowEnd:c}=h,p=1/0;for(let e=0;e<a.length;e++){let{row:i}=a[e];c-d+1===u?i>=d&&i<=c&&(p=Math.min(p,i)):(l.push({col:t,row:i}),c++)}let g=Math.min(d+u,r.rowCount-1-r.bottomFrozenRowCount),f=g<d+u;for(let e=0;e<s.length;e++){let{row:i}=s[s.length-e-1];i<d||i>c||(i>g||f?(o.push({col:t,row:i}),p--):p=Math.min(p,i))}if(p!==1/0)for(let e=p;e<=c;e++)n.push({col:t,row:e});return r.scenegraph.proxy.refreshRowCount(),{updateCells:n,addCells:l,removeCells:o}}(d,e,t,this);null==(r=this.reactCustomLayout)||r.clearCache(),this.scenegraph.updateRow(p,c,u,i,!0),null==(n=this.reactCustomLayout)||n.updateAllCustomCell(),a&&(this.autoFillWidth&&!l&&(l=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&!o&&(o=this.getAllRowsHeight()<=this.tableNoFrameHeight),("adaptive"===this.widthMode||l||"adaptive"===this.heightMode||o)&&this.scenegraph.updateChartSizeForResizeColWidth(-1))}_hasHierarchyTreeHeader(){var e,t;return null==(t=null!=(e=this.options.columns)?e:this.options.header)?void 0:t.some((e,t)=>e.tree)}getMenuInfo(e,t,i){return{field:this.getHeaderField(e,t),value:this.getCellValue(e,t),cellLocation:this.getCellLocation(e,t),event:void 0}}_getSortFuncFromHeaderOption(e,t,i){if(e||(e=this.internalProps.columns),t&&e&&e.length>0)for(let r=0;r<e.length;r++){let n=e[r];if((i&&i===n.fieldKey||!i&&n.field===t)&&n.sort&&"function"==typeof n.sort)return n.sort;if(n.columns){let e=this._getSortFuncFromHeaderOption(n.columns,t,i);if(e)return e}}}updateSortState(e,t=!0){var i;if(e)this.internalProps.sortState=e;else if(this.internalProps.sortState)if(Array.isArray(this.internalProps.sortState))for(let t=0;t<this.internalProps.sortState.length;t++)(e=null==(i=this.internalProps.sortState)?void 0:i[t])&&(e.order="normal");else this.internalProps.sortState.order="normal",e=this.internalProps.sortState;(e=Array.isArray(e)?e:[e]).some(e=>e.field)&&t&&this.internalProps.layoutMap.headerObjects.some(e=>!1!==e.define.sort)&&(this.dataSource.sort(e.map(e=>{let t=this._getSortFuncFromHeaderOption(this.internalProps.columns,e.field);return this.internalProps.layoutMap.headerObjects.find(t=>t&&t.field===e.field),{field:e.field,order:e.order,orderFn:null!=t?t:v.K$}})),this.internalProps.layoutMap.clearCellRangeMap(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.sortCell()),e.length&&this.stateManager.updateSortState(e)}updateFilterRules(e,t={clearRowHeightCache:!0}){var i;this.scenegraph.clearCells(),this.sortState?(this.dataSource.updateFilterRulesForSorted(e),E(this)):this.dataSource.updateFilterRules(e,null==t?void 0:t.onFilterRecordsEnd),this.refreshRowColCount(),this.stateManager.initCheckedState(this.records),this.scenegraph.createSceneGraph(!(null==t?void 0:t.clearRowHeightCache)),null==(i=this.internalProps.emptyTip)||i.resetVisible(),this.resize()}getFilteredRecords(){return this.dataSource.records}getCheckboxState(e){if(this.stateManager.checkedState.size<this.rowCount-this.columnHeaderLevelCount&&this.stateManager.initLeftRecordsCheckState(this.records),(0,l.Z)(e)){let t=Array.from(this.stateManager.checkedState.keys()).sort((e,t)=>{var i,r;let n=e.split(","),l=t.split(","),o=Math.max(n.length,l.length);for(let e=0;e<o;e++){let t=null!=(i=Number(n[e]))?i:0,o=null!=(r=Number(l[e]))?r:0;if(t!==o)return t-o}return 0}).map(e=>this.stateManager.checkedState.get(e));return this.options.groupBy&&(t=(0,x.aC)(this)),Array.from(t,t=>t&&t[e])}return[...this.stateManager.checkedState.values()]}getCellCheckboxState(e,t){var i;let r=this.getBodyColumnDefine(e,t),n=null==r?void 0:r.field,o=this.getCellType(e,t);if((0,l.Z)(n)&&("checkbox"===o||"switch"===o)){let r=this.dataSource.getIndexKey(this.getRecordShowIndexByCell(e,t)).toString();return null==(i=this.stateManager.checkedState.get(r))?void 0:i[n]}}getRadioState(e){return(0,l.Z)(e)?this.stateManager.radioState[e]:this.stateManager.radioState}getCellRadioState(e,t){return(0,_.Wg)(e,t,this)}setCellCheckboxState(e,t,i){(0,x.Jd)(e,t,i,this)}setCellRadioState(e,t,i){(0,_.vj)(e,t,i,this)}getSwitchState(e){return this.getCheckboxState(e)}getCellSwitchState(e,t){return this.getCellCheckboxState(e,t)}setCellSwitchState(e,t,i){this.setCellCheckboxState(e,t,i)}setRecords(e,t){var i,r,n,o;let a;(0,I.H6)(),null==(i=this.internalProps.dataSource)||i.release(),this.internalProps.releaseList=null==(r=this.internalProps.releaseList)?void 0:r.filter(e=>!e.dataSourceObj),this.internalProps.dataSource=null,Array.isArray(t)||(null==t?void 0:t.order)?a=t:t?a=t.sortState:null===t&&(a=null),"undefined"!=typeof window&&window.performance.now();let s={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};if(this.scenegraph.clearCells(),void 0!==a&&(null===a||!Array.isArray(a)&&(0,l.Z)(a.field)||Array.isArray(a))&&(this.internalProps.sortState=this.internalProps.multipleSort?Array.isArray(a)?a:[a]:a,this.stateManager.setSortState(this.sortState)),e){if((0,c.mP)(this,e),this.sortState){let e=Array.isArray(this.sortState)?this.sortState:[this.sortState];e.some(e=>e.order&&e.field&&"normal"!==e.order)&&this.internalProps.layoutMap.headerObjectsIncludeHided.some(e=>!1!==e.define.sort)&&this.dataSource.sort(e.map(e=>{let t=this._getSortFuncFromHeaderOption(void 0,e.field);return this.internalProps.layoutMap.headerObjectsIncludeHided.find(t=>t&&t.field===e.field),{field:e.field,order:e.order||"asc",orderFn:null!=t?t:v.K$}}))}this.refreshRowColCount()}else(0,c.mP)(this,e);if(this.stateManager.initCheckedState(e),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(s.col,s.row),this._updateSize(),this.internalProps.title&&!this.internalProps.title.isReleased&&this.internalProps.title.resize(),this.scenegraph.resize(),this.options.emptyTip)if(this.internalProps.emptyTip)null==(n=this.internalProps.emptyTip)||n.resetVisible();else{let e=w.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(o=this.internalProps.emptyTip)||o.resetVisible()}this.render(),(0,l.Z)(s.col)&&(0,l.Z)(s.row)&&s.col>=0&&s.row>=0&&setTimeout(()=>{var e;null==(e=this.internalProps)||e.tooltipHandler.showTooltip(s.col,s.row)},0)}setRecordChildren(e,t,i,r=!0){let n=this.getCellOriginRecord(t,i);n.children=e;let l=this.getRecordShowIndexByCell(t,i);this.dataSource.setRecord(n,l),this._refreshHierarchyState(t,i,r)}startEditCell(e,t,i){var r;if((0,l.Z)(e)&&(0,l.Z)(t))this.eventManager.isDraging=!1,this.selectCell(e,t),this.editorManager.startEditCell(e,t,i);else if(null==(r=this.stateManager.select)?void 0:r.cellPos){let{col:e,row:t}=this.stateManager.select.cellPos;(0,l.Z)(e)&&(0,l.Z)(t)&&this.editorManager.startEditCell(e,t,i)}}completeEditCell(){this.editorManager.completeEdit()}getEditor(e,t){var i,r;let n=this.editorManager.cacheLastSelectedCellEditor[`${e}-${t}`];if(n)return n;Object.values(this.editorManager.cacheLastSelectedCellEditor).forEach(e=>{var t;return null==(t=null==e?void 0:e.onEnd)?void 0:t.call(e)}),this.editorManager.cacheLastSelectedCellEditor={};let l=this.getBodyColumnDefine(e,t),o=this.isHeader(e,t)?null!=(i=null==l?void 0:l.headerEditor)?i:this.options.headerEditor:null!=(r=null==l?void 0:l.editor)?r:this.options.editor;return"function"==typeof o&&(o=o({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||"",table:this})),"string"==typeof o&&(o=m.U(o)),o&&(this.editorManager.cacheLastSelectedCellEditor[`${e}-${t}`]=o),o}isHasEditorDefine(e,t){var i,r;let n=this.getBodyColumnDefine(e,t),o=this.isHeader(e,t)?null!=(i=null==n?void 0:n.headerEditor)?i:this.options.headerEditor:null!=(r=null==n?void 0:n.editor)?r:this.options.editor;return"function"==typeof o&&(o=o({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||"",table:this})),(0,l.Z)(o)}changeCellValue(e,t,i,r=!1,n=!0){return function(e,t,i,r,n,l){if(r&&l.isHasEditorDefine(e,t)||!1===r){let r=l.getRecordShowIndexByCell(e,t),{field:o}=l.internalProps.layoutMap.getBody(e,t),a=l.getCellRawValue(e,t),s=l.getCellOriginValue(e,t);l.isHeader(e,t)?l.internalProps.layoutMap.updateColumnTitle(e,t,i):l.dataSource.changeFieldValue(i,r,o,e,t,l);let h=l.getCellRange(e,t),d=l.internalProps.layoutMap.getAggregatorsByCell(e,t);if(d){if(Array.isArray(d))for(let e=0;e<(null==d?void 0:d.length);e++)d[e].recalculate();else d.recalculate();let e=l.internalProps.layoutMap.getAggregatorCellAddress(h.start.col,h.start.row,h.end.col,h.end.row);for(let t=0;t<e.length;t++){let i=l.getCellRange(e[t].col,e[t].row);for(let e=i.start.col;e<=i.end.col;e++)for(let t=i.start.row;t<=i.end.row;t++)l.scenegraph.updateCellContent(e,t)}}for(let e=h.start.col;e<=h.end.col;e++)for(let t=h.start.row;t<=h.end.row;t++)l.scenegraph.updateCellContent(e,t);if("adaptive"===l.widthMode||l.autoFillWidth&&l.getAllColsWidth()<=l.tableNoFrameWidth)0===l.internalProps._widthResizedColMap.size&&l.scenegraph.recalculateColWidths();else if(!l.internalProps._widthResizedColMap.has(e)){let t=l.getColWidth(e),i=(0,M.al)(e,0,l.rowCount-1,l,!1);i!==t&&l.scenegraph.updateColWidth(e,i-t)}if("adaptive"===l.heightMode||l.autoFillHeight&&l.getAllRowsHeight()<=l.tableNoFrameHeight)0===l.internalProps._heightResizedRowMap.size&&l.scenegraph.recalculateRowHeights();else if(l.isAutoRowHeight(t)&&!l.internalProps._heightResizedRowMap.has(t)){let e=l.getRowHeight(t),i=(0,y.P)(t,0,l.colCount-1,l);l.scenegraph.updateRowHeight(t,i-e)}let u=l.getCellOriginValue(e,t);s!==u&&n&&l.fireListeners(g.B.CHANGE_CELL_VALUE,{col:e,row:t,rawValue:a,currentValue:s,changedValue:u}),l.scenegraph.updateNextFrame()}}(e,t,i,r,n,this)}changeCellValues(e,t,i,r=!1,n=!0){return function(e,t,i,r,n,l){var o,a,s,h,d,u;return s=this,h=void 0,d=void 0,u=function*(){let s,h=[],d=e,u=t,c=[],p=[];for(let r=0;r<i.length&&!(t+r>l.rowCount-1);r++){let n=i[r],o=[],a=[];c.push(o),p.push(a);for(let i=0;i<n.length&&!(e+i>l.colCount-1);i++){s=function(e,t,i,r){if("group"===r||"sort"===r&&!i.internalProps.groupBy)return r;let n="normal";return i.internalProps.groupBy?n="group":!i.isHeader(e,t)&&i.dataSource.lastOrderField&&i.getBodyField(e,t)===i.dataSource.lastOrderField&&(n="sort"),n}(e+i,t+r,l,s);let n=l.getCellRawValue(e+i,t+r);o.push(n);let h=l.getCellOriginValue(e+i,t+r);a.push(h)}}for(let s=0;s<i.length&&!(t+s>l.rowCount-1);s++){h[s]=[],u=t+s;let f=i[s],m=e;for(let i=0;i<f.length&&!(e+i>l.colCount-1);i++){m=e+i;let d=!1;if(!1===r)d=!0;else if(l.isHasEditorDefine(e+i,t+s)){let r=l.getEditor(e+i,t+s),n=p[s][i],h=f[i],u=null==(a=null==(o=null==r?void 0:r.validateValue)?void 0:o.call(r,h,n,{col:e+i,row:t+s},l))||a;if((0,T.tI)(u)){let e=yield u;d=!0===e||"validate-exit"===e||"validate-not-exit"===e}else d=!0===u||"validate-exit"===u||"validate-not-exit"===u}if(d){h[s][i]=!0;let r=f[i],o=l.getRecordShowIndexByCell(e+i,t+s),{field:a}=l.internalProps.layoutMap.getBody(e+i,t+s),d=c[s][i],u=p[s][i];l.isHeader(e+i,t+s)?l.internalProps.layoutMap.updateColumnTitle(e+i,t+s,r):l.dataSource.changeFieldValue(r,o,a,e+i,t+s,l);let m=l.getCellOriginValue(e+i,t+s);u!==m&&n&&l.fireListeners(g.B.CHANGE_CELL_VALUE,{col:e+i,row:t+s,rawValue:d,currentValue:u,changedValue:m})}else h[s][i]=!1}d=Math.max(d,m)}let f=l.getCellRange(e,t),m=l.getCellRange(d,u),b=l.internalProps.layoutMap.getAggregatorsByCellRange(f.start.col,f.start.row,m.end.col,m.end.row);if(b){for(let e=0;e<(null==b?void 0:b.length);e++)b[e].recalculate();if("normal"===s){let e=l.internalProps.layoutMap.getAggregatorCellAddress(f.start.col,f.start.row,m.end.col,m.end.row);for(let t=0;t<e.length;t++){let i=l.getCellRange(e[t].col,e[t].row);for(let e=i.start.col;e<=i.end.col;e++)for(let t=i.start.row;t<=i.end.row;t++)l.scenegraph.updateCellContent(e,t)}}}if("group"===s&&l.dataSource.updateRecordsForGroup([],[]),"sort"===s||"group"===s)return l.dataSource.sortedIndexMap.clear(),E(l),l.refreshRowColCount(),l.internalProps.layoutMap.clearCellRangeMap(),l.scenegraph.clearCells(),l.scenegraph.createSceneGraph(),h;for(let e=f.start.col;e<=m.end.col;e++)for(let t=f.start.row;t<=m.end.row;t++)l.scenegraph.updateCellContent(e,t);if("adaptive"===l.widthMode||l.autoFillWidth&&l.getAllColsWidth()<=l.tableNoFrameWidth)0===l.internalProps._widthResizedColMap.size&&l.scenegraph.recalculateColWidths();else for(let t=e;t<=m.end.col;t++)if(!l.internalProps._widthResizedColMap.has(t)){let e=l.getColWidth(t),i=(0,M.al)(t,0,l.rowCount-1,l,!1);i!==e&&l.scenegraph.updateColWidth(t,i-e)}if("adaptive"===l.heightMode||l.autoFillHeight&&l.getAllRowsHeight()<=l.tableNoFrameHeight)l.scenegraph.recalculateRowHeights();else if(l.isAutoRowHeight(t)){let e=[],i=[];for(let r=t;r<=m.end.row;r++)if(l.rowHeightsMap.get(r)){let t=l.getRowHeight(r),n=(0,y.P)(r,0,l.colCount-1,l);e.push(r),i.push(n-t)}l.scenegraph.updateRowsHeight(e,i)}return l.scenegraph.updateNextFrame(),h},new(d||(d=Promise))(function(e,t){function i(e){try{n(u.next(e))}catch(e){t(e)}}function r(e){try{n(u.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):((n=t.value)instanceof d?n:new d(function(e){e(n)})).then(i,r)}n((u=u.apply(s,h||[])).next())})}(e,t,i,r,n,this)}addRecord(e,t){var i;let r=function(e,t,i){var r,n,l,o;try{if(!e)return!1;if(i.internalProps.groupBy)null==(n=(r=i.dataSource).addRecordsForGroup)||n.call(r,[e],t),i.refreshRowColCount(),i.internalProps.layoutMap.clearCellRangeMap(),i.sortState&&E(i),i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else if("tree"===i.dataSource.rowHierarchyType)null==(o=(l=i.dataSource).addRecordsForTree)||o.call(l,[e],t),B(i,t,1),i.refreshRowColCount(),i.internalProps.layoutMap.clearCellRangeMap(),i.sortState&&E(i),i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else if(i.sortState)i.dataSource.addRecordForSorted(e),i.stateManager.checkedState.clear(),E(i),i.refreshRowColCount(),i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else{(void 0===t||t>i.dataSource.sourceLength)&&(t=i.dataSource.sourceLength);let r=i.transpose?i.rowHeaderLevelCount:i.columnHeaderLevelCount;i.dataSource.addRecord(e,t),B(i,t,1);let n=i.rowCount;if(i.refreshRowColCount(),0===i.scenegraph.proxy.totalActualBodyRowCount)return i.scenegraph.clearCells(),i.scenegraph.createSceneGraph(),!0;let l=i.transpose?i.colCount:i.rowCount;if(i.pagination){let{perPageCount:e,currentPage:o}=i.pagination,a=e*(o||0)+e;if(t<a)if(t<a-e)i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else{let o=t-(a-e)+r;if(n-r===i.pagination.perPageCount){let e=[];for(let t=o;t<l;t++)i.transpose?e.push({col:t,row:0}):e.push({col:0,row:t});i.transpose?i.scenegraph.updateCol([],[],e):i.scenegraph.updateRow([],[],e)}else{let e=[];for(let t=o;t<Math.min(l,o+1);t++)i.transpose?e.push({col:t,row:0}):e.push({col:0,row:t});i.transpose?i.scenegraph.updateCol([],e,[]):i.scenegraph.updateRow([],e,[])}}}else{let e=[];for(let n=t+r;n<t+r+1;n++)i.transpose?e.push({col:n,row:0}):e.push({col:0,row:n});let n=[],l=i.internalProps.layoutMap.hasAggregationOnTopCount,o=i.internalProps.layoutMap.hasAggregationOnBottomCount;for(let e=r;e<r+l;e++)i.transpose?n.push({col:e,row:0}):n.push({col:0,row:e});for(let e=(i.transpose?i.colCount:i.rowCount)-o;e<(i.transpose?i.colCount:i.rowCount);e++)i.transpose?n.push({col:e,row:0}):n.push({col:0,row:e});i.transpose?i.scenegraph.updateCol([],e,[]):i.scenegraph.updateRow([],e,[])}}return!0}catch(e){return!1}}(e,t,this);(0,F.UF)(this,t,[e]),null==(i=this.internalProps.emptyTip)||i.resetVisible(),r&&this.fireListeners(g.B.ADD_RECORD,{records:[e],recordIndex:t,recordCount:1})}addRecords(e,t){var i;let r=function(e,t,i){var r,n,l,o;try{if(!e||0===e.length)return!1;if(i.internalProps.groupBy)null==(n=(r=i.dataSource).addRecordsForGroup)||n.call(r,e,t),i.refreshRowColCount(),i.internalProps.layoutMap.clearCellRangeMap(),i.sortState&&E(i),i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else if("tree"===i.dataSource.rowHierarchyType)null==(o=(l=i.dataSource).addRecordsForTree)||o.call(l,e,t),B(i,t,e.length),i.refreshRowColCount(),i.internalProps.layoutMap.clearCellRangeMap(),i.sortState&&E(i),i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else if(i.sortState)i.dataSource.addRecordsForSorted(e),E(i),i.refreshRowColCount(),i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else{void 0===t||t>i.dataSource.sourceLength?t=i.dataSource.sourceLength:t<0&&(t=0);let r=i.transpose?i.rowHeaderLevelCount:i.columnHeaderLevelCount;i.dataSource.addRecords(e,t),B(i,t,e.length);let n=i.transpose?i.colCount:i.rowCount;if(i.refreshRowColCount(),0===i.scenegraph.proxy.totalActualBodyRowCount)return i.scenegraph.clearCells(),i.scenegraph.createSceneGraph(),!0;let l=i.transpose?i.colCount:i.rowCount;if(i.pagination){let{perPageCount:o,currentPage:a}=i.pagination,s=o*(a||0)+o;if(t<s)if(t<s-o)i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else{let a=t-(s-o)+r;if(n-r===i.pagination.perPageCount){let e=[];for(let t=a;t<l;t++)i.transpose?e.push({col:t,row:0}):e.push({col:0,row:t});i.transpose?i.scenegraph.updateCol([],[],e):i.scenegraph.updateRow([],[],e)}else{let t=[];for(let r=a;r<Math.min(l,a+(Array.isArray(e)?e.length:1));r++)i.transpose?t.push({col:r,row:0}):t.push({col:0,row:r});i.transpose?i.scenegraph.updateCol([],t,[]):i.scenegraph.updateRow([],t,[])}}}else{let n=[];for(let l=t+r;l<t+r+(Array.isArray(e)?e.length:1);l++)i.transpose?n.push({col:l,row:0}):n.push({col:0,row:l});let l=i.internalProps.layoutMap.hasAggregationOnTopCount,o=i.internalProps.layoutMap.hasAggregationOnBottomCount,a=[];for(let e=r;e<r+l;e++)i.transpose?a.push({col:e,row:0}):a.push({col:0,row:e});for(let e=(i.transpose?i.colCount:i.rowCount)-o;e<(i.transpose?i.colCount:i.rowCount);e++)i.transpose?a.push({col:e,row:0}):a.push({col:0,row:e});i.transpose?i.scenegraph.updateCol([],n,a):i.scenegraph.updateRow([],n,a)}}return!0}catch(e){return!1}}(e,t,this);"number"==typeof t&&(0,F.UF)(this,t,e),null==(i=this.internalProps.emptyTip)||i.resetVisible(),r&&this.fireListeners(g.B.ADD_RECORD,{records:e,recordIndex:t,recordCount:e.length})}deleteRecords(e){var t;(function(e,t){var i,r,n,l,o,a,s,h;if((null==e?void 0:e.length)>0)if(t.internalProps.groupBy)null==(r=(i=t.dataSource).deleteRecordsForGroup)||r.call(i,e),t.refreshRowColCount(),t.internalProps.layoutMap.clearCellRangeMap(),t.sortState&&E(t),t.scenegraph.clearCells(),t.scenegraph.createSceneGraph();else if("tree"===t.dataSource.rowHierarchyType){let i=null==(l=(n=t.dataSource).deleteRecordsForTree)?void 0:l.call(n,e);if(0===i.length)return;for(let e=0;e<i.length;e++)P(t,i[e],1);t.refreshRowColCount(),t.internalProps.layoutMap.clearCellRangeMap(),t.sortState&&E(t),t.scenegraph.clearCells(),t.scenegraph.createSceneGraph()}else if(t.sortState)t.dataSource.deleteRecordsForSorted(e),E(t),t.refreshRowColCount(),t.scenegraph.clearCells(),t.scenegraph.createSceneGraph();else{let i=t.dataSource.deleteRecords(e);if(0===i.length)return;for(let e=0;e<i.length;e++)P(t,i[e],1);let r=t.transpose?t.colCount:t.rowCount;t.refreshRowColCount();let n=t.transpose?t.colCount:t.rowCount,l=i.sort((e,t)=>e-t),d=l[0];if(t.pagination){let{perPageCount:e,currentPage:i}=t.pagination,l=e*(i||0)+e;if(d<l)if(d<l-e)t.scenegraph.clearCells(),t.scenegraph.createSceneGraph();else{let i=t.transpose?t.rowHeaderLevelCount:t.columnHeaderLevelCount,s=t.internalProps.layoutMap.hasAggregationOnTopCount,h=[],u=[];for(let i=d-(l-e)+(t.transpose?t.rowHeaderLevelCount:t.columnHeaderLevelCount)+s;i<n;i++)t.transpose?h.push({col:i,row:0}):h.push({col:0,row:i});for(let e=i;e<i+s;e++)t.transpose?h.push({col:e,row:0}):h.push({col:0,row:e});if(n<r)for(let e=n;e<r;e++)t.transpose?u.push({col:e,row:0}):u.push({col:0,row:e});null==(o=t.reactCustomLayout)||o.clearCache(),t.transpose?t.scenegraph.updateCol(u,[],h):t.scenegraph.updateRow(u,[],h),null==(a=t.reactCustomLayout)||a.updateAllCustomCell()}}else{let e=[],i=t.transpose?t.rowHeaderLevelCount:t.columnHeaderLevelCount,r=t.internalProps.layoutMap.hasAggregationOnTopCount,n=t.internalProps.layoutMap.hasAggregationOnBottomCount;for(let n=0;n<l.length;n++){let o=l[n]+i+r;t.transpose?e.push({col:o,row:0}):e.push({col:0,row:o})}let o=[];for(let e=i;e<i+r;e++)t.transpose?o.push({col:e,row:0}):o.push({col:0,row:e});for(let e=(t.transpose?t.colCount:t.rowCount)-n;e<(t.transpose?t.colCount:t.rowCount);e++)t.transpose?o.push({col:e,row:0}):o.push({col:0,row:e});null==(s=t.reactCustomLayout)||s.clearCache(),t.transpose?t.scenegraph.updateCol(e,[],o):t.scenegraph.updateRow(e,[],o),null==(h=t.reactCustomLayout)||h.updateAllCustomCell()}}})(e,this),(0,F.b)(this,e),null==(t=this.internalProps.emptyTip)||t.resetVisible();let i=[];for(let t=0;t<e.length;t++)i.push(this.getBodyRowIndexByRecordIndex(e[t])+this.columnHeaderLevelCount);this.fireListeners(g.B.DELETE_RECORD,{recordIndexs:e,rowIndexs:i,deletedCount:(Array.isArray(e[0]),e.length)})}updateRecords(e,t){(function(e,t,i){var r,n,l,o;if((null==t?void 0:t.length)>0)if(i.internalProps.groupBy)null==(n=(r=i.dataSource).updateRecordsForGroup)||n.call(r,e,t),i.refreshRowColCount(),i.internalProps.layoutMap.clearCellRangeMap(),i.sortState&&E(i),i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else if("tree"===i.dataSource.rowHierarchyType)null==(o=(l=i.dataSource).updateRecordsForTree)||o.call(l,e,t),i.refreshRowColCount(),i.internalProps.layoutMap.clearCellRangeMap(),i.sortState&&E(i),i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else if(i.sortState)i.dataSource.updateRecordsForSorted(e,t),E(i),i.refreshRowColCount(),i.scenegraph.clearCells(),i.scenegraph.createSceneGraph();else{let r=i.dataSource.updateRecords(e,t);if(0===r.length)return;let n=r.map(e=>i.getBodyRowIndexByRecordIndex(e)).sort((e,t)=>e-t);if(i.pagination){let{perPageCount:e,currentPage:t}=i.pagination,r=i.transpose?i.rowHeaderLevelCount:i.columnHeaderLevelCount,l=i.internalProps.layoutMap.hasAggregationOnTopCount,o=e*(t||0)+e,a=[];for(let t=0;t<n.length;t++){let r=n[t];if(r<o&&r>=o-e){let t=r-(o-e)+(i.transpose?i.rowHeaderLevelCount:i.columnHeaderLevelCount)+l;a.push(t)}}if(a.length>=1){let e=[];for(let t=0;t<a.length;t++){let r=a[t];i.transpose?e.push({col:r,row:0}):e.push({col:0,row:r})}for(let t=r;t<r+l;t++)i.transpose?e.push({col:t,row:0}):e.push({col:0,row:t});i.transpose?i.scenegraph.updateCol([],[],e):i.scenegraph.updateRow([],[],e)}}else{let e=[],t=i.transpose?i.rowHeaderLevelCount:i.columnHeaderLevelCount,r=i.internalProps.layoutMap.hasAggregationOnTopCount,l=i.internalProps.layoutMap.hasAggregationOnBottomCount;for(let l=0;l<n.length;l++){let o=n[l]+t+r;i.transpose?e.push({col:o,row:0}):e.push({col:0,row:o})}for(let n=t;n<t+r;n++)i.transpose?e.push({col:n,row:0}):e.push({col:0,row:n});for(let t=(i.transpose?i.colCount:i.rowCount)-l;t<(i.transpose?i.colCount:i.rowCount);t++)i.transpose?e.push({col:t,row:0}):e.push({col:0,row:t});i.transpose?i.scenegraph.updateCol([],[],e):i.scenegraph.updateRow([],[],e)}}})(e,t,this),this.fireListeners(g.B.UPDATE_RECORD,{records:e,recordIndexs:t,updateCount:e.length})}_hasCustomRenderOrLayout(){var e,t,i,r;let{headerObjects:n}=this.internalProps.layoutMap;if(this.options.customRender)return!0;for(let l=0;l<n.length;l++){let o=n[l];if((null==(e=null==o?void 0:o.define)?void 0:e.customLayout)||(null==(t=null==o?void 0:o.define)?void 0:t.headerCustomLayout)||(null==(i=null==o?void 0:o.define)?void 0:i.customRender)||(null==(r=null==o?void 0:o.define)?void 0:r.headerCustomRender))return!0}return!1}getAggregateValuesByField(e){let t=this.internalProps.layoutMap.getColumnByField(e),i=[];for(let e=0;e<t.length;e++){let r=t[e].columnDefine.aggregator;if(delete t[e].columnDefine,r){let n={col:t[e].col,aggregateValue:null};if(n.aggregateValue=[],Array.isArray(r))for(let e=0;e<r.length;e++)n.aggregateValue.push({aggregationType:r[e].type,value:r[e].value()});else n.aggregateValue.push({aggregationType:r.type,value:r.value()});i.push(n)}}return i}isAggregation(e,t){return this.internalProps.layoutMap.isAggregation(e,t)}getGroupTitleLevel(e,t){var i;if(!this.internalProps.groupBy)return;let r=this.dataSource.getIndexKey(this.getRecordShowIndexByCell(e,t)),n=null!=(i=this.dataSource.getGroupLength())?i:0,l=(0,u.Z)(r)?r.length-1:0;return n>0&&l===n&&(l=void 0),l}getBodyRowIndexByRecordIndex(e){return Array.isArray(e)&&1===e.length&&(e=e[0]),this.dataSource.getTableIndex(e)}release(){var e;null==(e=this.editorManager)||e.release(),super.release()}expandAllTreeNode(){if(!this._hasHierarchyTreeHeader())return;let e=!1;this.dataSource&&"function"==typeof this.dataSource.expandAllNodes&&(this.dataSource.expandAllNodes(),e=!0),e&&(this._recreateSceneForStateChange(),this.fireListeners(g.B.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:r.g.expand,originData:{children:this.records}}))}collapseAllTreeNode(){if(!this._hasHierarchyTreeHeader())return;let e=!1;this.dataSource&&"function"==typeof this.dataSource.collapseAllNodes&&(this.dataSource.collapseAllNodes(),e=!0),e&&(this._recreateSceneForStateChange(),this.fireListeners(g.B.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:r.g.collapse,originData:{children:this.records}}))}mergeCells(e,t,i,r){for(let n=e;n<=i;n++)for(let e=t;e<=r;e++){let t=this.getCellRange(n,e);if(t.start.col!==t.end.col||t.start.row!==t.end.row)return}this.options.customMergeCell?"function"==typeof this.options.customMergeCell&&(this.options.customMergeCell=[]):this.options.customMergeCell=[],this.options.customMergeCell.push({text:this.getCellValue(e,t),range:{start:{col:e,row:t},end:{col:i,row:r}}}),this.internalProps.customMergeCell=(0,L.k)(this.options.customMergeCell);for(let n=e;n<=i;n++)for(let e=t;e<=r;e++)this.scenegraph.updateCellContent(n,e);this.scenegraph.updateNextFrame()}unmergeCells(e,t,i,r){this.options.customMergeCell?"function"==typeof this.options.customMergeCell&&(this.options.customMergeCell=[]):this.options.customMergeCell=[],this.options.customMergeCell=this.options.customMergeCell.filter(n=>{let{start:l,end:o}=n.range;return l.col!==e||l.row!==t||o.col!==i||o.row!==r}),this.internalProps.customMergeCell=(0,L.k)(this.options.customMergeCell);for(let n=e;n<=i;n++)for(let e=t;e<=r;e++)this.scenegraph.updateCellContent(n,e);this.scenegraph.updateNextFrame()}}var O=i(65774),D=i(47962),z=i(88536),W=i(7388),Z=i(22288),N=i(70559);function $(e,t){let i=t.getDrawRange();if((0,l.Z)(e)&&e>=t.frozenRowCount){let r=t.getFrozenRowsHeight(),n=t.getRowsHeight(0,e-1);t.scrollTop=Math.min(n-r,t.getAllRowsHeight()-i.height)-1}t.scenegraph.updateNextFrame()}var j=i(76804);(0,O.R2)(),(0,O.Eg)(),(0,O.I)(),(0,O.FD)(),(0,O._t)(),(0,O.Mh)(),w.F.registerComponent("listTreeStickCellPlugin",class e{constructor(e){this.titleRows=[],this.showedTitleRows=[],this.rowNow=-1,this.skipStartRow=-1,this.skipEndRow=-1,this.table=e,this.table.on("scroll",e=>{"vertical"===e.scrollDirection&&this.updateGroupTitle()}),this.table.on("tree_hierarchy_state_change",e=>{this.updateGroupTitle()}),this.table.on("resize_column",e=>{this.updateGroupTitle()})}updateGroupTitle(){0===this.table.scrollTop?(this.titleRows=[],this.showedTitleRows=[]):-1!==this.skipStartRow&&-1!==this.skipEndRow&&this.skipStartRow!==this.table.scenegraph.proxy.bodyTopRow-1?(this.table.scenegraph.proxy.screenTopRow<=this.skipStartRow||this.table.scenegraph.proxy.screenTopRow>=this.skipEndRow)&&(this.skipStartRow=-1,this.skipEndRow=-1,this.updateGroupTitleInfo()):(this.skipStartRow=-1,this.skipEndRow=-1,this.updateGroupTitleInfo()),this.updateScenegraph()}updateGroupTitleInfo(){this.rowNow=this.table.scenegraph.proxy.screenTopRow+this.titleRows.length;let e=this.table.getRecordIndexByCell(0,this.rowNow),t=this.table.getRecordIndexByCell(0,this.rowNow+1);this.getTitleRowsByRecordIndex(e,t)}getTitleRowsByRecordIndex(e,t){let i=[];(0,u.Z)(e)||(e=[e]),(0,u.Z)(t)||(t=[t]);for(let t=0;t<e.length;t++){let r=e.slice(0,t+1),n=this.table.dataSource.getRaw(r);i.push(n)}let r=[],n=t.length===e.length+1,l=e.slice(0,n?e.length:e.length-1),o=this.table.dataSource.currentIndexedData;for(let t=this.rowNow-this.table.columnHeaderLevelCount;t>=0;t--){let i=o[t];if((0,u.Z)(i)&&l.length===i.length){let e=!0;for(let t=0;t<i.length;t++)if(i[t]!==l[t]){e=!1;break}e&&(r.push(t+this.table.columnHeaderLevelCount),l=l.slice(0,l.length-1))}else if(i===e[0]){r.push(t+this.table.columnHeaderLevelCount);break}}this.titleRows=r.reverse()}updateScenegraph(){let{table:e}=this,{shadowGroup:t,shadowGroupFrozen:i}=function(e){let t=e.scenegraph.colHeaderGroup,i=e.scenegraph.cornerHeaderGroup;if(!t.border){let i=(0,Z.f)({x:0,y:0,width:0,height:0,cursor:"pointer"});t.add(i),t.border=i,i.attachShadow(i.shadowRoot),i.name="border-rect",i.addEventListener("click",t=>{let i=e.listTreeStickCellPlugin.titleRows,{shadowTarget:r}=t.pickParams,{col:n,row:l}=(0,N.J$)(r);$(l-i.indexOf(l),e)})}if(!i.border){let t=(0,Z.f)({x:0,y:0,width:0,height:0,cursor:"pointer"});i.add(t),i.border=t,t.attachShadow(t.shadowRoot),t.name="border-rect",t.addEventListener("click",t=>{let i=e.listTreeStickCellPlugin.titleRows,{shadowTarget:r}=t.pickParams,{col:n,row:l}=(0,N.J$)(r);$(l-i.indexOf(l),e)})}let r=t.border.shadowRoot,n=i.border.shadowRoot;return r.removeAllChild(),n.removeAllChild(),{shadowGroup:r,shadowGroupFrozen:n}}(e);this.showedTitleRows.length=0;let r=0;for(let s=0;s<e.colCount;s++){let h;s<e.frozenColCount?(h=new z.Z({x:e.getColsWidth(0,s-1),y:e.getFrozenRowsHeight()}),i.add(h)):(h=new z.Z({x:e.getColsWidth(e.frozenColCount,s-1),y:e.getFrozenRowsHeight()}),t.add(h)),h.col=s;for(let t=0;t<this.titleRows.length;t++){var n,l,o,a;let i=this.titleRows[t];if(n=i,l=this.rowNow,o=e.scenegraph.proxy.screenTopRow,a=this.titleRows,n===l&&n!==o+a.length-1||n===o+a.indexOf(n)+1&&n<l){0===s&&r++;continue}0===s&&this.showedTitleRows.push(i);let d=e.scenegraph.getCell(s,i);if("cell"===d.role){let e=function e(t){let i=t.clone();if(i.role=t.role,i.col=t.col,i.row=t.row,i.mergeStartCol=t.mergeStartCol,i.mergeStartRow=t.mergeStartRow,i.mergeEndCol=t.mergeEndCol,i.mergeEndRow=t.mergeEndRow,i.contentWidth=t.contentWidth,i.contentHeight=t.contentHeight,"cell"===i.role){let e=(0,Z.f)({x:0,y:0,width:i.attribute.width,height:i.attribute.height});i.add(e)}return"group"===t.type&&t.forEachChildren(t=>{let r=e(t);i.add(r)}),i}(d);e.setAttributes({y:40*t}),h.add(e)}else{let r=(0,W.wW)(s,i,e,!0,!0);r.setAttributes({y:40*t}),h.add(r)}}}r>0&&-1===this.skipStartRow&&-1===this.skipEndRow&&(this.skipStartRow=e.scenegraph.proxy.screenTopRow-1,this.skipEndRow=e.scenegraph.proxy.screenTopRow+1)}}),(0,D.zf)(),(0,O.ph)(),(0,j.LQ)(),(0,j.yR)(),(0,j.pk)(),(0,j.m4)(),(0,j.Jy)(),(0,j.VT)(),(0,j.ah)(),(0,j.dB)(),(0,j.ge)(),(0,j.au)();class G extends H{}},85646:function(e,t,i){i.d(t,{z:()=>A});var r=i(37098),n=i(25175),l=i(15240),o=i(35759),a=i(23010),s=i(46320),h=i(7466),d=i(57426),u=i(65755),c=i(95723),p=i(4654),g=i(57198),f=i(39873),m=i(24687),b=i(51130),y=i(85162),v=i(20829),_=i(54833),C=i(65774),x=i(76804),w=i(26874),S=i(34399);(0,C.R2)(),(0,C.Eg)(),(0,C.I)(),(0,C.FD)(),(0,C._t)(),(0,C.Mh)(),(0,C.ph)(),(0,x.LQ)(),(0,x.yR)(),(0,x.pk)(),(0,x.m4)(),(0,x.Jy)(),(0,x.dB)(),(0,x.ge)(),(0,x.au)();class A extends h.D{constructor(e,t){var i,r,l,o,s,h,d,p,b,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F;let H,O;super(e,t),this.layoutNodeId={seqId:0},this._selectedDataItemsInChart=[],this._selectedDimensionInChart=[],this._chartEventMap={},this._throttleTimer=null,this._latestFilterRules=null,(t=this.options).layout&&Object.assign(t,t.layout),this.internalProps.columns=(0,u.Z)(t.columns),this.internalProps.rows=(0,u.Z)(t.rows),this.internalProps.indicators=(0,f.u)(t.indicators),this.internalProps.columnTree=!t.indicatorsAsCol||(null==(i=t.columns)?void 0:i.length)||t.columnTree?(0,u.Z)(t.columnTree):[],this.internalProps.rowTree=t.indicatorsAsCol||(null==(r=t.rows)?void 0:r.length)||t.rowTree?(0,u.Z)(t.rowTree):[],this.internalProps.records=t.records,this.setCustomStateNameToSpec(),this.internalProps.columnResizeType=null!=(s=null!=(o=null==(l=t.resize)?void 0:l.columnResizeType)?o:t.columnResizeType)?s:"column",this.internalProps.rowResizeType=null!=(p=null!=(d=null==(h=t.resize)?void 0:h.rowResizeType)?d:t.rowResizeType)?p:"row",this.internalProps.dataConfig={isPivotChart:!0},this.internalProps.columnWidthConfig=t.columnWidthConfig,this.internalProps.columnWidthConfigForRowHeader=t.columnWidthConfigForRowHeader,this._axes=(0,c.Z)(t.axes)?t.axes:[],t.columnTree&&(!1!==t.indicatorsAsCol&&(this.internalProps.columnTree=(0,v.VN)(this.internalProps.columnTree,t.indicators)),H=new m.KO(null!=(b=this.internalProps.columnTree)?b:[],this.layoutNodeId)),t.rowTree&&(!1===t.indicatorsAsCol&&(this.internalProps.rowTree=(0,v.VN)(this.internalProps.rowTree,t.indicators)),O=new m.KO(null!=(C=this.internalProps.rowTree)?C:[],this.layoutNodeId));let D=(null==(x=null==O?void 0:O.dimensionKeys)?void 0:x.count)?O.dimensionKeys.valueArr():null!=(S=null==(w=t.rows)?void 0:w.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?S:[],z=(null==(A=null==H?void 0:H.dimensionKeys)?void 0:A.count)?H.dimensionKeys.valueArr():null!=(M=null==(k=t.columns)?void 0:k.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?M:[],W=null!=(R=null==(T=t.indicators)?void 0:T.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.indicatorKey),e),[]))?R:[];if(this.internalProps.dataConfig.collectValuesBy=this._generateCollectValuesConfig(z,D),this.internalProps.dataConfig.aggregationRules=this._generateAggregationRules(),this.internalProps.dataConfig.dimensionSortArray=this._getDimensionSortArray(),this.dataset=new a.q(this.internalProps.dataConfig,D,z,W,this.internalProps.indicators,null==(E=t.indicatorsAsCol)||E,t.records,void 0,void 0,this.internalProps.columnTree,this.internalProps.rowTree,!0),this.options.indicatorsAsCol&&(0,y.eW)(this.internalProps.indicators)){let e=t=>{t.forEach(t=>{var i;(null==(i=t.children)?void 0:i.length)?e(t.children):t.children=[{dimensionKey:"axis",value:""}]})};(null==(P=this.dataset.rowHeaderTree)?void 0:P.length)?e(this.dataset.rowHeaderTree):this.dataset.rowHeaderTree=[{dimensionKey:"axis",value:""}]}if(t.columnTree||!1!==t.indicatorsAsCol&&(this.dataset.colHeaderTree=(0,v.VN)(this.dataset.colHeaderTree,t.indicators)),t.rowTree||!1===t.indicatorsAsCol&&(this.dataset.rowHeaderTree=(0,v.VN)(this.dataset.rowHeaderTree,t.indicators)),H=new m.KO(null!=(B=this.dataset.colHeaderTree)?B:[],this.layoutNodeId),O=new m.KO(null!=(I=this.dataset.rowHeaderTree)?I:[],this.layoutNodeId),this.internalProps.layoutMap=new n.z(this,this.dataset,H,O),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.createSceneGraph(),t.title){let e=_.F.getComponent("title");this.internalProps.title=new e(t.title,this)}if(this.options.emptyTip)if(this.internalProps.emptyTip)null==(L=this.internalProps.emptyTip)||L.resetVisible();else{let e=_.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(F=this.internalProps.emptyTip)||F.resetVisible()}setTimeout(()=>{this.isReleased||(this.resize(),this.fireListeners(g.B.INITIALIZED,null))},0)}static get EVENT_TYPE(){return l.Z}get pivotChartAxes(){return this._axes}get recordsCount(){var e;return null==(e=this.records)?void 0:e.length}isListTable(){return!1}isPivotTable(){return!0}isPivotChart(){return!0}_canResizeColumn(e,t){let i=super._canResizeColumn(e,t);if(i&&!this.internalProps.layoutMap.indicatorsAsCol){let t=this.internalProps.layoutMap.getBody(e,this.columnHeaderLevelCount);if(null==t?void 0:t.disableColumnResize)return!1}return i}updateOption(e,t={clearColWidthCache:!0,clearRowHeightCache:!0}){var i,r,l,o,s,h,d,p,b,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F,H,O;let D,z,W=this.internalProps;super.updateOption(e,t),this.layoutNodeId={seqId:0},this.internalProps.columns=(0,u.Z)(e.columns),this.internalProps.rows=(0,u.Z)(e.rows),this.internalProps.indicators=(null==(i=e.indicators)?void 0:i.length)?(0,f.u)(e.indicators):[],this.internalProps.columnTree=!e.indicatorsAsCol||(null==(r=e.columns)?void 0:r.length)||e.columnTree?(0,u.Z)(e.columnTree):[],this.internalProps.rowTree=e.indicatorsAsCol||(null==(l=e.rows)?void 0:l.length)||e.rowTree?(0,u.Z)(e.rowTree):[],e.records&&(this.internalProps.records=e.records),this.setCustomStateNameToSpec(),this._selectedDataItemsInChart=[],W.columnResizeType=null!=(h=null!=(s=null==(o=e.resize)?void 0:o.columnResizeType)?s:e.columnResizeType)?h:"column",W.rowResizeType=null!=(b=null!=(p=null==(d=e.resize)?void 0:d.rowResizeType)?p:e.rowResizeType)?b:"row",W.dataConfig={isPivotChart:!0},this.internalProps.columnWidthConfig=e.columnWidthConfig,this.internalProps.columnWidthConfigForRowHeader=e.columnWidthConfigForRowHeader,this._axes=(0,c.Z)(e.axes)?e.axes:[],e.columnTree&&(!1!==e.indicatorsAsCol&&(this.internalProps.columnTree=(0,v.VN)(this.internalProps.columnTree,e.indicators)),D=new m.KO(null!=(C=this.internalProps.columnTree)?C:[],this.layoutNodeId)),e.rowTree&&(!1===e.indicatorsAsCol&&(this.internalProps.rowTree=(0,v.VN)(this.internalProps.rowTree,e.indicators)),z=new m.KO(null!=(x=this.internalProps.rowTree)?x:[],this.layoutNodeId));let Z=(null==(w=null==z?void 0:z.dimensionKeys)?void 0:w.count)?z.dimensionKeys.valueArr():null!=(A=null==(S=e.rows)?void 0:S.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?A:[],N=(null==(k=null==D?void 0:D.dimensionKeys)?void 0:k.count)?D.dimensionKeys.valueArr():null!=(T=null==(M=e.columns)?void 0:M.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?T:[],$=null!=(E=null==(R=e.indicators)?void 0:R.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.indicatorKey),e),[]))?E:[];if(this.internalProps.dataConfig.collectValuesBy=this._generateCollectValuesConfig(N,Z),this.internalProps.dataConfig.aggregationRules=this._generateAggregationRules(),this.internalProps.dataConfig.dimensionSortArray=this._getDimensionSortArray(),this.dataset=new a.q(this.internalProps.dataConfig,Z,N,$,this.internalProps.indicators,null==(P=e.indicatorsAsCol)||P,null!=(B=e.records)?B:this.internalProps.records,void 0,void 0,this.internalProps.columnTree,this.internalProps.rowTree,!0),this.options.indicatorsAsCol&&(0,y.eW)(this.internalProps.indicators)){let e=t=>{t.forEach(t=>{var i;(null==(i=t.children)?void 0:i.length)?e(t.children):t.children=[{dimensionKey:"axis",value:""}]})};(null==(I=this.dataset.rowHeaderTree)?void 0:I.length)?e(this.dataset.rowHeaderTree):this.dataset.rowHeaderTree=[{dimensionKey:"axis",value:""}]}if(e.columnTree||!1!==e.indicatorsAsCol&&(this.dataset.colHeaderTree=(0,v.VN)(this.dataset.colHeaderTree,e.indicators)),e.rowTree||!1===e.indicatorsAsCol&&(this.dataset.rowHeaderTree=(0,v.VN)(this.dataset.rowHeaderTree,e.indicators)),D=new m.KO(null!=(L=this.dataset.colHeaderTree)?L:[],this.layoutNodeId),z=new m.KO(null!=(F=this.dataset.rowHeaderTree)?F:[],this.layoutNodeId),W.layoutMap=new n.z(this,this.dataset,D,z),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,W.releaseList&&(W.releaseList.forEach(e=>{var t;return null==(t=null==e?void 0:e.release)?void 0:t.call(e)}),W.releaseList=null),this.scenegraph.clearCells(),this.scenegraph.createSceneGraph(),e.title){let t=_.F.getComponent("title");this.internalProps.title=new t(e.title,this),this.scenegraph.resize()}if(this.options.emptyTip)if(this.internalProps.emptyTip)null==(H=this.internalProps.emptyTip)||H.resetVisible();else{let e=_.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(O=this.internalProps.emptyTip)||O.resetVisible()}return setTimeout(()=>{this.fireListeners(g.B.UPDATED,null)},0),new Promise(e=>{setTimeout(e,0)})}updatePagination(){}refreshHeader(){this.setMinMaxLimitWidth(!0),this.refreshRowColCount()}refreshRowColCount(){var e,t,i,r,n,l,o,a;let{layoutMap:s}=this.internalProps;s&&(this.colCount=null!=(e=s.colCount)?e:0,this.rowCount=null!=(t=s.rowCount)?t:0,this.internalProps.frozenColCount=null!=(i=s.rowHeaderLevelCount)?i:0,this._setFrozenRowCount(Math.max(s.headerLevelCount,null!=(r=this.options.frozenRowCount)?r:0)),this.bottomFrozenRowCount!==(null!=(n=null==s?void 0:s.bottomFrozenRowCount)?n:0)&&(this.bottomFrozenRowCount=null!=(l=null==s?void 0:s.bottomFrozenRowCount)?l:0),this.rightFrozenColCount!==(null!=(o=null==s?void 0:s.rightFrozenColCount)?o:0)&&(this.rightFrozenColCount=null!=(a=null==s?void 0:s.rightFrozenColCount)?a:0),this.stateManager.setFrozenCol(this.internalProps.frozenColCount))}_getSortFuncFromHeaderOption(e,t,i){}syncHierarchyState(e,t){var i,r;e.value===t.value&&e.dimensionKey===t.dimensionKey&&(t.hierarchyState=null!=(i=t.hierarchyState)?i:(null==t?void 0:t.children)?e.hierarchyState:void 0,null==(r=null==t?void 0:t.children)||r.forEach((t,i)=>{var r;(null==(r=null==e?void 0:e.children)?void 0:r[i])&&t&&this.syncHierarchyState(e.children[i],t)}))}getRecordShowIndexByCell(e,t){}getTableIndexByRecordIndex(e){}getTableIndexByField(e){}getCellAddrByFieldRecord(e,t){}getBodyIndexByRow(e){let{layoutMap:t}=this.internalProps;return t.getBodyIndexByRow(e)}getBodyIndexByCol(e){let{layoutMap:t}=this.internalProps;return t.getBodyIndexByCol(e)}getCellValue(e,t,i){var r,n,l;if(!i){let i=this.getCustomMergeValue(e,t);if(i)return i}if(this.internalProps.layoutMap.isHeader(e,t)){if(this.internalProps.layoutMap.isBottomFrozenRow(e,t)||this.internalProps.layoutMap.isRightFrozenColumn(e,t)){let i,l=this.internalProps.layoutMap.getIndicatorKeyInChartSpec(e,t);return null==l||l.forEach(e=>{let t=this.internalProps.layoutMap.getIndicatorInfo(e);t&&(i=t)}),null!=(n=null!=(r=null==i?void 0:i.title)?r:null==i?void 0:i.indicatorKey)?n:""}let{title:i,fieldFormat:l}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof l?l(i,e,t,this):i}if(this.dataset){let i,r=this.internalProps.layoutMap.getCellHeaderPaths(e,t),n=r.colHeaderPaths.map((e,t)=>{var r;return e.indicatorKey&&(i={position:"col",index:t}),null!=(r=e.indicatorKey)?r:e.value}),l=r.rowHeaderPaths.map((e,t)=>{var r;return e.indicatorKey&&(i={position:"row",index:t}),null!=(r=e.indicatorKey)?r:e.value}),o=this.dataset.getAggregator(l,n,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,i);return o.value?o.value():void 0}let{fieldFormat:o}=this.internalProps.layoutMap.getBody(e,t),a=this.getBodyIndexByRow(t),s=this.getBodyIndexByCol(e),h=null==(l=this.records[a])?void 0:l[s];return"function"==typeof o?o(h,e,t,this):h}getCellOriginValue(e,t){var i,r,n;if(this.internalProps.layoutMap.isHeader(e,t)){if(this.internalProps.layoutMap.isBottomFrozenRow(e,t)||this.internalProps.layoutMap.isRightFrozenColumn(e,t)){let n,l=this.internalProps.layoutMap.getIndicatorKeyInChartSpec(e,t);return null==l||l.forEach(e=>{let t=this.internalProps.layoutMap.getIndicatorInfo(e);t&&(n=t)}),null!=(r=null!=(i=null==n?void 0:n.title)?i:null==n?void 0:n.indicatorKey)?r:""}let{title:n}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof n?n():n}if(this.dataset){let i,r=this.internalProps.layoutMap.getCellHeaderPaths(e,t),n=r.colHeaderPaths.map((e,t)=>{var r;return e.indicatorKey&&(i={position:"col",index:t}),null!=(r=e.indicatorKey)?r:e.value}),l=r.rowHeaderPaths.map((e,t)=>{var r;return e.indicatorKey&&(i={position:"row",index:t}),null!=(r=e.indicatorKey)?r:e.value}),o=this.dataset.getAggregator(l,n,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,i);return o.value?o.value():void 0}let l=this.getBodyIndexByRow(t),o=this.getBodyIndexByCol(e);return null==(n=this.records[l])?void 0:n[o]}getCellRawValue(e,t){return this.getCellOriginValue(e,t)}getCellOriginRecord(e,t){if(!this.internalProps.layoutMap.isHeader(e,t)&&this.dataset){let i,r=this.internalProps.layoutMap.getCellHeaderPaths(e,t),n=r.colHeaderPaths.map((e,t)=>{var r;return e.indicatorKey&&(i={position:"col",index:t}),null!=(r=e.indicatorKey)?r:e.value}),l=r.rowHeaderPaths.map((e,t)=>{var r;return e.indicatorKey&&(i={position:"row",index:t}),null!=(r=e.indicatorKey)?r:e.value});return this.dataset.getAggregator(l,n,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,i).records}}getCellRawRecord(e,t){return this.getCellOriginRecord(e,t)}getPivotSortState(e,t){if(!this.pivotSortState)return;let i=this.getCellRange(e,t);for(let e=0;e<this.pivotSortState.length;e++){let{col:t,row:r,order:n}=this.pivotSortState[e];if((0,o._Z)(i,t,r))return n}}_moveHeaderPosition(e,t){var i,r,n,l;let o=this.internalProps.layoutMap.moveHeaderPosition(e,t);if(o){if("column"===o.moveType){if((null==(r=null==(i=this.options.records)?void 0:i[0])?void 0:r.constructor)===Array)for(let e=0;e<this.internalProps.records.length;e++){let t=this.internalProps.records[e].splice(o.sourceIndex-this.rowHeaderLevelCount,o.sourceSize);t.unshift(o.targetIndex-this.rowHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records[e],t)}this.colWidthsMap.adjustOrder(o.sourceIndex,o.targetIndex,o.sourceSize),this.setMinMaxLimitWidth()}else if("row"===o.moveType){if((null==(l=null==(n=this.options.records)?void 0:n[0])?void 0:l.constructor)===Array){let e=this.internalProps.records.splice(o.sourceIndex-this.columnHeaderLevelCount,o.sourceSize);e.unshift(o.targetIndex-this.columnHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records,e)}this.rowHeightsMap.adjustOrder(o.sourceIndex,o.targetIndex,o.sourceSize)}return o}return null}toggleHierarchyState(e,t,i=!0){}getHeaderCellAddressByPath(e){return this.internalProps.layoutMap.getPivotCellAdress(e)}getCellAddressByHeaderPaths(e){return this.internalProps.layoutMap.getCellAdressByHeaderPath(e)}getHeaderPathByXY(e){let t;return t=e?this.getCellAt(e.x+this.getFrozenColsWidth()+this.scrollLeft+1,e.y+this.getFrozenRowsHeight()+this.scrollTop+1):this.getCellAt(this.getFrozenColsWidth()+this.scrollLeft+1,this.getFrozenRowsHeight()+this.scrollTop+1),this.internalProps.layoutMap.getCellHeaderPaths(t.col,t.row)}getHierarchyState(e,t){var i;return null==(i=this._getHeaderLayoutMap(e,t))?void 0:i.hierarchyState}getMenuInfo(e,t,i){let r=this.internalProps.layoutMap.getPivotDimensionInfo(e,t);return{dimensionKey:r[r.length-1].dimensionKey,value:this.getCellValue(e,t),cellLocation:this.getCellLocation(e,t),isPivotCorner:this.isCornerHeader(e,t),event:void 0}}_generateCollectValuesConfig(e,t){var i,r,n,l,o,a,h,d,u,c,p,g,f,m,y,v,_,C,x,S,A,k,M,T;e=e.filter(e=>e!==b.ek),t=t.filter(e=>e!==b.ek);let R=this.internalProps.indicators,E={};for(let b=0,P=null==R?void 0:R.length;b<P;b++)if("string"!=typeof R[b]&&R[b].chartSpec){if("pie"===(null==(i=R[b].chartSpec)?void 0:i.type)||"rose"===(null==(r=R[b].chartSpec)?void 0:r.type)||"funnel"===(null==(n=R[b].chartSpec)?void 0:n.type)||"radar"===(null==(l=R[b].chartSpec)?void 0:l.type)||"gauge"===(null==(o=R[b].chartSpec)?void 0:o.type)||"wordCloud"===(null==(a=R[b].chartSpec)?void 0:a.type)||"sunburst"===(null==(h=R[b].chartSpec)?void 0:h.type)||"treemap"===(null==(d=R[b].chartSpec)?void 0:d.type)||"sankey"===(null==(u=R[b].chartSpec)?void 0:u.type)||"circlePacking"===(null==(c=R[b].chartSpec)?void 0:c.type))continue;let P=R[b],B=P.chartSpec;if(!1===this.options.indicatorsAsCol)if(!1!==(null==B?void 0:B.stack)&&("bar"===(null==B?void 0:B.type)||"area"===(null==B?void 0:B.type))&&(B.stack=!0),"heatmap"!==(null==B?void 0:B.type)&&(E[P.indicatorKey]={by:t,range:!0,sumBy:"histogram"===B.type?e.concat(null==B?void 0:B.xField,null==B?void 0:B.x2Field):(null==B?void 0:B.stack)&&e.concat(null==B?void 0:B.xField)}),B.series)B.series.forEach(i=>{var r,n,l,o,a,h,d,u,c,p,g,f,m,b;let y="string"==typeof i.xField?i.xField:i.xField[0];E[y]={by:e,type:"horizontal"!==i.direction?"xField":void 0,range:(0,w.Wm)(i,this._axes,"horizontal"===i.direction,!0),sortBy:"horizontal"!==i.direction?null!=(o=null==(l=null==(n=null==(r=null==i?void 0:i.data)?void 0:r.fields)?void 0:n[y])?void 0:l.domain)?o:null==(d=null==(h=null==(a=null==B?void 0:B.data)?void 0:a.fields)?void 0:h[y])?void 0:d.domain:void 0};let v=i.yField;!1!==i.stack&&("bar"===i.type||"area"===i.type)&&(i.stack=!0),E[v]={by:t,range:(0,w.Wm)(i,this._axes,"horizontal"===i.direction,!1),sumBy:i.stack&&e.concat(null==i?void 0:i.xField),sortBy:"horizontal"===i.direction?null!=(g=null==(p=null==(c=null==(u=null==i?void 0:i.data)?void 0:u.fields)?void 0:c[v])?void 0:p.domain)?g:null==(b=null==(m=null==(f=null==B?void 0:B.data)?void 0:f.fields)?void 0:m[v])?void 0:b.domain:void 0,extendRange:(0,s.FJ)(B.markLine)}});else{let i="histogram"===B.type?B.x2Field:"string"==typeof B.xField?B.xField:B.xField[0];E[i]={by:e,type:"horizontal"!==B.direction?"xField":void 0,range:(0,w.Wm)(B,this._axes,"horizontal"===B.direction,!0),sortBy:"horizontal"!==B.direction?null==(f=null==(g=null==(p=null==B?void 0:B.data)?void 0:p.fields)?void 0:g[i])?void 0:f.domain:void 0},!1!==(null==B?void 0:B.stack)&&("bar"===(null==B?void 0:B.type)||"area"===(null==B?void 0:B.type))&&(B.stack=!0);let r=null!=(m=B.yField)?m:B.maxField;E[r]={by:t,type:"horizontal"!==B.direction?"yField":void 0,range:(0,w.Wm)(B,this._axes,"horizontal"===B.direction,!1),sumBy:"histogram"===B.type?e.concat(null==B?void 0:B.xField,null==B?void 0:B.x2Field):B.stack&&e.concat(null==B?void 0:B.xField),sortBy:"horizontal"===B.direction?null==(_=null==(v=null==(y=null==B?void 0:B.data)?void 0:y.fields)?void 0:v[r])?void 0:_.domain:void 0,extendRange:(0,s.FJ)(B.markLine),considerFields:"boxPlot"===(null==B?void 0:B.type)?[B.maxField,B.minField,B.outliersField]:void 0}}else{let i=R[b];if(!1!==(null==B?void 0:B.stack)&&("bar"===(null==B?void 0:B.type)||"area"===(null==B?void 0:B.type))&&(B.stack=!0),"heatmap"!==(null==B?void 0:B.type)&&(E[i.indicatorKey]={by:e,range:!0,sumBy:"histogram"===B.type?t.concat(null==B?void 0:B.yField,null==B?void 0:B.y2Field):(null==B?void 0:B.stack)&&t.concat(null==B?void 0:B.yField)}),B.series)B.series.forEach(i=>{var r,n,l,o,a,h,d,u,c,p,g,f,m,b;let y="string"==typeof i.yField?i.yField:i.yField[0];E[y]={by:t,type:"horizontal"===i.direction?"yField":void 0,range:(0,w.Wm)(i,this._axes,"horizontal"===i.direction,!1),sortBy:"horizontal"===i.direction?null!=(o=null==(l=null==(n=null==(r=null==i?void 0:i.data)?void 0:r.fields)?void 0:n[y])?void 0:l.domain)?o:null==(d=null==(h=null==(a=null==B?void 0:B.data)?void 0:a.fields)?void 0:h[y])?void 0:d.domain:void 0};let v=i.xField;!1!==i.stack&&("bar"===i.type||"area"===i.type)&&(i.stack=!0),E[v]={by:e,range:(0,w.Wm)(i,this._axes,"horizontal"===i.direction,!0),sumBy:i.stack&&t.concat(null==i?void 0:i.yField),sortBy:"horizontal"!==i.direction?null!=(g=null==(p=null==(c=null==(u=null==i?void 0:i.data)?void 0:u.fields)?void 0:c[v])?void 0:p.domain)?g:null==(b=null==(m=null==(f=null==B?void 0:B.data)?void 0:f.fields)?void 0:m[v])?void 0:b.domain:void 0,extendRange:(0,s.FJ)(B.markLine)}});else{let i="histogram"===B.type?B.y2Field:"string"==typeof B.yField?B.yField:B.yField[0];E[i]={by:t,type:"horizontal"===B.direction?"yField":void 0,range:(0,w.Wm)(B,this._axes,"horizontal"===B.direction,!1),sortBy:"horizontal"===B.direction?null==(S=null==(x=null==(C=null==B?void 0:B.data)?void 0:C.fields)?void 0:x[i])?void 0:S.domain:void 0},!1!==(null==B?void 0:B.stack)&&("bar"===(null==B?void 0:B.type)||"area"===(null==B?void 0:B.type))&&(B.stack=!0);let r=null!=(A=B.xField)?A:B.maxField;E[r]={by:e,type:"horizontal"===B.direction?"xField":void 0,range:(0,w.Wm)(B,this._axes,"horizontal"===B.direction,!0),sumBy:"histogram"===B.type?t.concat(null==B?void 0:B.yField,null==B?void 0:B.y2Field):B.stack&&t.concat(null==B?void 0:B.yField),sortBy:"horizontal"!==B.direction?null==(T=null==(M=null==(k=null==B?void 0:B.data)?void 0:k.fields)?void 0:M[r])?void 0:T.domain:void 0,extendRange:(0,s.FJ)(B.markLine),considerFields:"boxPlot"===(null==B?void 0:B.type)?[B.maxField,B.minField,B.outliersField]:void 0}}}}return E}_generateAggregationRules(){var e;let t=[];return null==(e=this.internalProps.indicators)||e.forEach(e=>{var i,n;if("string"==typeof e)t.push({indicatorKey:e,field:e,aggregationType:r.E.RECORD});else if(null==(i=e.chartSpec)?void 0:i.series){let i=[];null==(n=e.chartSpec)||n.series.forEach(e=>{let t=!1===this.options.indicatorsAsCol?e.yField:e.xField;-1===i.indexOf(t)&&i.push(t)}),t.push({indicatorKey:e.indicatorKey,field:i,aggregationType:r.E.RECORD})}else{let i=!1===this.options.indicatorsAsCol?e.chartSpec.yField:e.chartSpec.xField;t.push({indicatorKey:e.indicatorKey,field:null!=i?i:e.indicatorKey,aggregationType:r.E.RECORD})}}),t}setCustomStateNameToSpec(){var e;let t=e=>{var t,i,r,n,l,o,a,s,h,d;(null==(i=null==(t=e.bar)?void 0:t.state)?void 0:i.selected)&&(e.bar.state.vtable_selected=e.bar.state.selected,e.bar.state.vtable_selected_reverse=e.bar.state.selected_reverse,delete e.bar.state.selected,delete e.bar.state.selected_reverse),(null==(n=null==(r=e.point)?void 0:r.state)?void 0:n.selected)&&(e.point.state.vtable_selected=e.point.state.selected,e.point.state.vtable_selected_reverse=e.point.state.selected_reverse,delete e.point.state.selected,delete e.point.state.selected_reverse),(null==(o=null==(l=e.line)?void 0:l.state)?void 0:o.selected)&&(e.line.state.vtable_selected=e.line.state.selected,e.line.state.vtable_selected_reverse=e.line.state.selected_reverse,delete e.line.state.selected,delete e.line.state.selected_reverse),(null==(s=null==(a=e.area)?void 0:a.state)?void 0:s.selected)&&(e.area.state.vtable_selected=e.area.state.selected,e.area.state.vtable_selected_reverse=e.area.state.selected_reverse,delete e.area.state.selected,delete e.area.state.selected_reverse),(null==(d=null==(h=e.pie)?void 0:h.state)?void 0:d.selected)&&(e.pie.state.vtable_selected=e.pie.state.selected,e.pie.state.vtable_selected_reverse=e.pie.state.selected_reverse,delete e.pie.state.selected,delete e.pie.state.selected_reverse)};null==(e=this.internalProps.indicators)||e.forEach(e=>{if(e.chartSpec){let i=e.chartSpec;i.series?i.series.forEach(e=>{t(e)}):t(i)}})}updateFilterRules(e){this._throttledUpdateFilterRules(e)}_throttledUpdateFilterRules(e){this._latestFilterRules=e,null===this._throttleTimer&&(this._executeFilterUpdate(e),this._throttleTimer=window.setTimeout(()=>{this._latestFilterRules!==e&&this._executeFilterUpdate(this._latestFilterRules),this._throttleTimer=null},200))}_executeFilterUpdate(e){this.internalProps.dataConfig.filterRules=e,this.dataset.updateFilterRules(e),(0,d.RW)(this.scenegraph),(0,d.zO)(this.scenegraph),this.render()}clearChartCacheImage(e,t){(0,p.Z)(e)&&(0,p.Z)(t)?(0,d.KP)(e,t,this.scenegraph):(0,d.RW)(this.scenegraph)}getLegendSelected(){var e;let t=[];return null==(e=this.internalProps.legends)||e.forEach(e=>{let i=e.legendComponent._getSelectedLegends().map(e=>e.label);t.push(...i)}),t}setLegendSelected(e){var t;null==(t=this.internalProps.legends)||t.forEach(t=>{t.legendComponent.setSelected(e)})}getChartDatumPosition(e,t){let{chartInstance:i,bounds:r}=this.getChartInstance(t);if(i){let t=i.convertDatumToPosition(e);return t?{x:Math.round(t.x+r.x1),y:Math.round(t.y+r.y1)}:null}return null}getCellAddressByRecord(e){let t=[],i=[],r={},n=[];for(let l in this.dataset.dataConfig.aggregationRules.forEach(e=>{if("string"==typeof e.field)r[e.field]=e.indicatorKey,n.push(e.field);else for(let t=0;t<e.field.length;t++)r[e.field[t]]=e.indicatorKey,n.push(e.field[t])}),e)this.dataset.rows.indexOf(l)>=0&&t.push({dimensionKey:l,value:e[l]}),this.dataset.columns.indexOf(l)>=0&&i.push({dimensionKey:l,value:e[l]}),n.indexOf(l)>=0&&(this.dataset.indicatorsAsCol?i.push({indicatorKey:r[l]}):t.push({indicatorKey:r[l]}));return this.getCellAddressByHeaderPaths({rowHeaderPaths:t,colHeaderPaths:i,cellLocation:"body"})}getChartInstance(e){var t,i,r,n,l;let o=this.getCellAddressByHeaderPaths(e);if(o){let e,a=this.getCellRelativeRect(o.col,o.row),s=this.scenegraph.getCell(o.col,o.row),h=null==(t=null==s?void 0:s.getChildren())?void 0:t[0];if(h.attribute.chartInstance){e=h.attribute.chartInstance;let{dataId:t,data:o,axes:a,spec:s}=h.attribute,d=h.getViewBox();null==a||a.forEach((t,i)=>{var r,n,l,o,a;"linear"===t.type?e.updateModelSpecSync({type:"axes",index:i},{min:null!=(n=null==(r=t.range)?void 0:r.min)?n:0,max:null!=(o=null==(l=t.range)?void 0:l.max)?o:0,tick:{tickMode:null==(a=t.tick)?void 0:a.tickMode}},!0):"band"===t.type&&e.updateModelSpec({type:"axes",index:i},{domain:t.domain.slice(0)},!0)}),e.updateViewBox({x1:0,x2:d.x2-d.x1,y1:0,y2:d.y2-d.y1},!1,!1);let u=e.getStage(),c=h.globalTransMatrix.clone(),p=h.stage.window.getViewBoxTransform();if(c.multiply(p.a,p.b,p.c,p.d,p.e,p.f),u.window.setViewBoxTransform&&u.window.setViewBoxTransform(c.a,c.b,c.c,c.d,c.e,c.f),"string"==typeof t||"number"==typeof t)e.updateDataSync(t,null!=o?o:[]);else{let a=[];for(let l in t){let h=t[l],d=s.series.find(e=>{var t;return(null==(t=null==e?void 0:e.data)?void 0:t.id)===l});a.push({id:l,values:h?null!=(i=null==o?void 0:o.filter(e=>e.hasOwnProperty(h)))?i:[]:null!=o?o:[],fields:null==(r=null==d?void 0:d.data)?void 0:r.fields}),e.updateFullDataSync||e.updateDataSync(l,h?null!=(n=null==o?void 0:o.filter(e=>e.hasOwnProperty(h)))?n:[]:null!=o?o:[])}null==(l=e.updateFullDataSync)||l.call(e,a)}this.render()}return{chartInstance:e,bounds:a.bounds}}return{}}activateChartInstance(e){var t,i,r,n,l;let o=this.getCellAddressByHeaderPaths(e);if(o){let e=o.col,a=o.row,s=this.scenegraph.getCell(e,a),h=null==(t=null==s?void 0:s.getChildren())?void 0:t[0],d=this.scenegraph.activateChart(e,a),{dataId:u,data:c,axes:p,spec:g}=h.attribute,f=h.getViewBox();null==p||p.forEach((e,t)=>{var i,r,n,l,o;"linear"===e.type?d.updateModelSpecSync({type:"axes",index:t},{min:null!=(r=null==(i=e.range)?void 0:i.min)?r:0,max:null!=(l=null==(n=e.range)?void 0:n.max)?l:0,tick:{tickMode:null==(o=e.tick)?void 0:o.tickMode}},!0):"band"===e.type&&d.updateModelSpec({type:"axes",index:t},{domain:e.domain.slice(0)},!0)}),d.updateViewBox({x1:0,x2:f.x2-f.x1,y1:0,y2:f.y2-f.y1},!1,!1);let m=d.getStage();m.needRender=!0;let b=h.globalTransMatrix.clone(),y=h.stage.window.getViewBoxTransform().clone();if(y.multiply(b.a,b.b,b.c,b.d,b.e,b.f),m.window.setViewBoxTransform(y.a,y.b,y.c,y.d,y.e,y.f),"string"==typeof u||"number"==typeof u)d.updateDataSync(u,null!=c?c:[]);else{let e=[];for(let t in u){let l=u[t],o=g.series.find(e=>{var i;return(null==(i=null==e?void 0:e.data)?void 0:i.id)===t});e.push({id:t,values:l?null!=(i=null==c?void 0:c.filter(e=>e.hasOwnProperty(l)))?i:[]:null!=c?c:[],fields:null==(r=null==o?void 0:o.data)?void 0:r.fields}),d.updateFullDataSync||d.updateDataSync(t,l?null!=(n=null==c?void 0:c.filter(e=>e.hasOwnProperty(l)))?n:[]:null!=c?c:[])}null==(l=d.updateFullDataSync)||l.call(d,e)}return d}}replaceChartCacheImage(e,t){var i;let r=this.getCellAddressByHeaderPaths(e);if(r){let e=this.scenegraph.getCell(r.col,r.row),n=null==(i=null==e?void 0:e.getChildren())?void 0:i[0];(0,S.Up)(t.getStage(),n)}}_getDimensionSortArray(){var e,t;if(null==(t=null==(e=this.options)?void 0:e.axes)?void 0:t.length){let e=this.options.indicatorsAsCol?"left":"bottom",t=this.options.axes.find(t=>t.orient===e);if(t&&(0,c.Z)(t.domain))return t.domain}}setRecords(e){var t,i;let r,l;this.internalProps.layoutMap.release(),(0,S.H6)();let o={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.options.records=this.internalProps.records=e;let a=this.options,s=this.internalProps;this.dataset.setRecords(e),r=a.columnTree?s.layoutMap.columnDimensionTree:new m.KO(null!=(t=this.dataset.colHeaderTree)?t:[],this.layoutNodeId),l=a.rowTree?s.layoutMap.rowDimensionTree:new m.KO(null!=(i=this.dataset.rowHeaderTree)?i:[],this.layoutNodeId),s.layoutMap=new n.z(this,this.dataset,r,l),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(o.col,o.row),this.internalProps.title&&!this.internalProps.title.isReleased&&(this._updateSize(),this.internalProps.title.resize(),this.scenegraph.resize()),this.eventManager.updateEventBinder()}_hasCustomRenderOrLayout(){if(this.options.customRender)return!0;let{columnsDefine:e,rowsDefine:t,indicatorsDefine:i}=this.internalProps.layoutMap;for(let t=0;t<e.length;t++){let i=e[t];if("string"!=typeof i&&(i.headerCustomLayout||i.headerCustomRender))return!0}for(let e=0;e<t.length;e++){let i=t[e];if("string"!=typeof i&&(i.headerCustomLayout||i.headerCustomRender))return!0}for(let e=0;e<i.length;e++){let t=i[e];if("string"!=typeof t&&(t.customLayout||t.headerCustomLayout||t.customRender||t.headerCustomRender))return!0}return!1}changeRecordOrder(e,t){}getLayoutColumnTree(){return this.internalProps.layoutMap.getLayoutColumnTree()}getLayoutColumnTreeCount(){return this.internalProps.layoutMap.getLayoutColumnTreeCount()}getLayoutRowTree(){return this.internalProps.layoutMap.getLayoutRowTree()}getLayoutRowTreeCount(){return this.internalProps.layoutMap.getLayoutRowTreeCount()}getCellHeaderTreeNodes(e,t){return this.internalProps.layoutMap.getCellHeaderPathsWithTreeNode(e,t)}}},17426:function(e,t,i){i.d(t,{I:()=>E});var r=i(37098),n=i(36781),l=i(25175),o=i(64776);class a{constructor(e,t){this.tree={},this.beforeChangedTree={},this.colFlatKeys={},this.rowFlatKeys={},this.stringJoinChar="\0",this.rowsIsTotal=[],this.colsIsTotal=[],this.dataConfig=e,t&&(this.records=t,"undefined"!=typeof window&&window.performance.now(),this.setRecords(t),"undefined"!=typeof window&&window.performance.now())}changeDataConfig(e){this.dataConfig=e}setRecords(e){this.processRecords()}processRecords(){for(let e=0,t=this.records.length;e<t;e++){let t=this.records[e];this.processRecord(t)}}processRecord(e){var t;let i=[],r=[];for(let t=0,i=this.dataConfig.rows.length;t<i;t++){let i=this.dataConfig.rows[t];void 0!==e[i]&&i!==this.dataConfig.indicatorDimensionKey&&r.push(e[i])}for(let t=0,r=this.dataConfig.columns.length;t<r;t++){let r=this.dataConfig.columns[t];void 0!==e[r]&&r!==this.dataConfig.indicatorDimensionKey&&i.push(e[r])}null==(t=this.dataConfig.indicators)||t.forEach(t=>{let n=e[t];void 0!==n&&(this.dataConfig.indicatorsAsCol?i.push(t):r.push(t));let l=r.join(this.stringJoinChar),o=i.join(this.stringJoinChar);0!==r.length&&(this.rowFlatKeys[l]||(this.rowFlatKeys[l]=1)),0!==i.length&&(this.colFlatKeys[o]||(this.colFlatKeys[o]=1)),0===i.length&&0===r.length||(this.tree[l]||(this.tree[l]={}),void 0!==n&&(this.tree[l][o]={value:n,record:e},this.dataConfig.indicatorsAsCol?i.pop():r.pop()))})}getTreeNode(e=[],t=[],i,r=!0){var n,l,a,s;let h,d;if("string"==typeof e)h=e;else{let t=!1;e.map((r,n)=>{r===i&&(e.splice(n,1),t=!0)}),t&&e.push(i),h=e.join(this.stringJoinChar)}if("string"==typeof t)d=t;else{let e=!1;t.map((r,n)=>{r===i&&(t.splice(n,1),e=!0)}),e&&t.push(i),d=t.join(this.stringJoinChar)}return r?null!=(a=null==(l=null==(n=this.tree)?void 0:n[h])?void 0:l[d])?a:void 0:(0,o.Z)(null==(s=this.beforeChangedTree[h])?void 0:s[d])?{value:this.beforeChangedTree[h][d].value,record:this.beforeChangedTree[h][d].record}:void 0}changeTreeNodeValue(e=[],t=[],i,r){var n,l,o,a,s,h,d;let u,c;if("string"==typeof e)u=e;else{let t=!1;e.map((r,n)=>{r===i&&(e.splice(n,1),t=!0)}),t&&e.push(i),u=e.join(this.stringJoinChar)}if("string"==typeof t)c=t;else{let e=!1;t.map((r,n)=>{r===i&&(t.splice(n,1),e=!0)}),e&&t.push(i),c=t.join(this.stringJoinChar)}let p=null==(l=null==(n=this.tree[u])?void 0:n[c])?void 0:l.value,g=Object.assign({},null==(a=null==(o=this.tree[u])?void 0:o[c])?void 0:a.record);(null==(h=null==(s=this.tree[u])?void 0:s[c])?void 0:h.record)?(this.tree[u][c].record[i]=r,this.tree[u][c].value=r):(this.tree[u]||(this.tree[u]={}),this.tree[u][c]={record:this._buildRecord(e,t,i,r),value:r}),(null==(d=this.beforeChangedTree[u])?void 0:d[c])||(this.beforeChangedTree[u]={},this.beforeChangedTree[u][c]={record:void 0,value:void 0},this.beforeChangedTree[u][c].record=g,this.beforeChangedTree[u][c].value=p)}_buildRecord(e=[],t=[],i,r){let n={},l=this.dataConfig.rows,o=this.dataConfig.columns;return l.forEach((t,i)=>{t!==this.dataConfig.indicatorDimensionKey&&(n[t]=e[i])}),o.forEach((e,i)=>{e!==this.dataConfig.indicatorDimensionKey&&(n[e]=t[i])}),n[i]=r,this.records.push(n),n}addRecords(e){for(let t=0,i=e.length;t<i;t++){let i=e[t];this.processRecord(i)}this.records.push(e)}changeRecordFieldValue(e,t,i){let r=!1;for(let t=0;t<this.dataConfig.indicators.length;t++)this.dataConfig.indicators[t]===e&&(r=!0);if(!r){for(let r=0,n=this.records.length;r<n;r++){let n=this.records[r];n[e]===t&&(n[e]=i)}this.rowFlatKeys={},this.colFlatKeys={},this.tree={},this.processRecords()}}}var s=i(15240),h=i(35759),d=i(23010),u=i(7466),c=i(65755),p=i(4654),g=i(74882),f=i(24687),m=i(57198),b=i(61014),y=i(49499),v=i(1028),_=i(43624),C=i(75665),x=i(39873),w=i(20829),S=i(54833),A=i(34399);class k extends u.D{constructor(e,t){var i,r,n,o,s,h,u,p,y,v,_,C,A,k,M,T,R,E,P,B,I,L,F,H;if(super(e,t),this.layoutNodeId={seqId:0},t=this.options){t.rowHierarchyType||(t.rowHierarchyType="grid"),t.columnHierarchyType||(t.columnHierarchyType="grid"),t.layout&&Object.assign(t,t.layout),this.internalProps.columns=(0,c.Z)(t.columns),this.internalProps.rows=(0,c.Z)(t.rows),this.internalProps.indicators=(0,x.u)(t.indicators),null==(i=t.indicators)||i.forEach((e,t)=>{"object"==typeof e&&(null==e?void 0:e.editor)&&(this.internalProps.indicators[t].editor=e.editor)}),this.internalProps.columnTree=!t.indicatorsAsCol||(null==(r=t.columns)?void 0:r.length)||t.columnTree?(0,c.Z)(t.columnTree):[],this.internalProps.rowTree=t.indicatorsAsCol||(null==(n=t.rows)?void 0:n.length)||t.rowTree?(0,c.Z)(t.rowTree):[],this.internalProps.records=t.records,this.pagination=t.pagination,this.internalProps.columnResizeType=null!=(h=null!=(s=null==(o=t.resize)?void 0:o.columnResizeType)?s:t.columnResizeType)?h:"column",this.internalProps.rowResizeType=null!=(y=null!=(p=null==(u=t.resize)?void 0:u.rowResizeType)?p:t.rowResizeType)?y:"row",this.internalProps.dataConfig=(0,c.Z)(t.dataConfig),this.internalProps.columnWidthConfig=t.columnWidthConfig,this.internalProps.columnWidthConfigForRowHeader=t.columnWidthConfigForRowHeader;let e=this.internalProps.records;if(this.internalProps.recordsIsTwoDimensionalArray=!1,(null==(v=null==e?void 0:e[0])?void 0:v.constructor)===Array&&(this.internalProps.recordsIsTwoDimensionalArray=!0),!1===(null==(_=t.customConfig)?void 0:_.enableDataAnalysis)){let t=new f.KO(null!=(C=this.internalProps.columnTree)?C:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(A=this.options.columnExpandLevel)?A:1:void 0),i=new f.KO(null!=(k=this.internalProps.rowTree)?k:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(M=this.options.rowExpandLevel)?M:1:void 0);this.internalProps.layoutMap=new l.z(this,null,t,i),!1===this.internalProps.recordsIsTwoDimensionalArray&&(this.flatDataToObjects=new a({rows:this.internalProps.layoutMap.fullRowDimensionKeys,columns:this.internalProps.layoutMap.colDimensionKeys,indicators:this.internalProps.layoutMap.indicatorKeys,indicatorsAsCol:this.internalProps.layoutMap.indicatorsAsCol,indicatorDimensionKey:this.internalProps.layoutMap.indicatorDimensionKey},e))}else{let e=(0,w.Ul)(this,t),{rowKeys:i,columnKeys:r,indicatorKeys:n}=e,{columnDimensionTree:o,rowDimensionTree:a}=e;this.dataset=new d.q(this.internalProps.dataConfig,i,r,n,this.internalProps.indicators,null==(T=t.indicatorsAsCol)||T,t.records,t.rowHierarchyType,t.columnHierarchyType,this.internalProps.columnTree,this.internalProps.rowTree,!1,!!t.extensionRows,!!t.parseCustomTreeToMatchRecords),t.columnTree?o.hasHideNode&&((0,w.uu)(o.tree.children,t.indicators,!0,this),o.reset(o.tree.children)):(!1!==t.indicatorsAsCol&&(this.dataset.colHeaderTree=(0,w.VN)(this.dataset.colHeaderTree,t.indicators)),!1!==t.indicatorsAsCol&&t.indicators&&this.dataset.colHeaderTree&&(0,w.uu)(this.dataset.colHeaderTree,t.indicators,!1,this),o=new f.KO(null!=(R=this.dataset.colHeaderTree)?R:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(E=this.options.columnExpandLevel)?E:1:void 0)),t.rowTree?a.hasHideNode&&((0,w.uu)(a.tree.children,t.indicators,!0,this),a.reset(a.tree.children)):(!1===t.indicatorsAsCol&&(this.dataset.rowHeaderTree=(0,w.VN)(this.dataset.rowHeaderTree,t.indicators)),!1===t.indicatorsAsCol&&this.dataset.rowHeaderTree&&t.indicators&&(0,w.uu)(this.dataset.rowHeaderTree,t.indicators,!1,this),a=new f.KO(null!=(P=this.dataset.rowHeaderTree)?P:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(B=this.options.rowExpandLevel)?B:1:void 0)),this.internalProps.layoutMap=new l.z(this,this.dataset,o,a)}if(this._changePivotSortStateBySortRules(),(null!=(L=null==(I=t.pivotSortState)?void 0:I.length)?L:0)>0&&(this.pivotSortState=[],this.pivotSortState=t.pivotSortState),"node"!==g.X.mode&&(this.editorManager=new b.$(this)),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.stateManager.initCheckedState(e),this.scenegraph.createSceneGraph(),t.title){let e=S.F.getComponent("title");this.internalProps.title=new e(t.title,this)}if(this.options.emptyTip)if(this.internalProps.emptyTip)null==(F=this.internalProps.emptyTip)||F.resetVisible();else{let e=S.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(H=this.internalProps.emptyTip)||H.resetVisible()}setTimeout(()=>{this.isReleased||(this.resize(),this.fireListeners(m.B.INITIALIZED,null))},0)}}static get EVENT_TYPE(){return s.z}isListTable(){return!1}isPivotTable(){return!0}isPivotChart(){return!1}get recordsCount(){var e;return null==(e=this.records)?void 0:e.length}_canResizeColumn(e,t){let i=super._canResizeColumn(e,t);if(i){if(this.internalProps.layoutMap.isSeriesNumber(e,t)&&!0===this.internalProps.rowSeriesNumber.disableColumnResize)return!1;if(!this.internalProps.layoutMap.indicatorsAsCol){let t=this.internalProps.layoutMap.getBody(e,this.columnHeaderLevelCount);if(null==t?void 0:t.disableColumnResize)return!1}}return i}updateOption(e,t={clearColWidthCache:!0,clearRowHeightCache:!0}){var i,r,n,o,s,h,u,p,g,b,y,v,_,C,A,k,M,T,R,E,P,B,I,L,F,H;let O=this.internalProps;if(super.updateOption(e,t),e.rowHierarchyType||(e.rowHierarchyType="grid"),e.columnHierarchyType||(e.columnHierarchyType="grid"),this.layoutNodeId={seqId:0},this.internalProps.columns=(0,c.Z)(e.columns),this.internalProps.rows=(0,c.Z)(e.rows),this.internalProps.indicators=(null==(i=e.indicators)?void 0:i.length)?(0,x.u)(e.indicators):[],null==(r=e.indicators)||r.forEach((e,t)=>{"object"==typeof e&&(null==e?void 0:e.editor)&&(this.internalProps.indicators[t].editor=e.editor)}),this.internalProps.columnTree=!e.indicatorsAsCol||(null==(n=e.columns)?void 0:n.length)||e.columnTree?(0,c.Z)(e.columnTree):[],this.internalProps.rowTree=e.indicatorsAsCol||(null==(o=e.rows)?void 0:o.length)||e.rowTree?(0,c.Z)(e.rowTree):[],e.records&&(this.internalProps.records=e.records),this.stateManager.initCheckedState(this.internalProps.records),this.stateManager.updateDrillState(void 0,void 0,!1,!1,-1,-1),this.pagination=e.pagination,O.columnResizeType=null!=(u=null!=(h=null==(s=e.resize)?void 0:s.columnResizeType)?h:e.columnResizeType)?u:"column",O.rowResizeType=null!=(b=null!=(g=null==(p=e.resize)?void 0:p.rowResizeType)?g:e.rowResizeType)?b:"row",O.dataConfig=(0,c.Z)(e.dataConfig),this.internalProps.columnWidthConfig=e.columnWidthConfig,this.internalProps.columnWidthConfigForRowHeader=e.columnWidthConfigForRowHeader,"grid"!==(null==e?void 0:e.rowHierarchyType)&&"grid"!==this.internalProps.layoutMap.rowHierarchyType&&this.internalProps.layoutMap.rowExpandLevel===(null==e?void 0:e.rowExpandLevel)){let e=this.internalProps.layoutMap.rowDimensionTree.tree.children;null==(y=this.internalProps.rowTree)||y.forEach((t,i)=>{let r=e.find(e=>e.dimensionKey===t.dimensionKey&&e.value===t.value);r&&this._syncHierarchyState(r,t)})}let D=this.internalProps.records;if(this.internalProps.recordsIsTwoDimensionalArray=!1,(null==(v=null==D?void 0:D[0])?void 0:v.constructor)===Array&&(this.internalProps.recordsIsTwoDimensionalArray=!0),!1===(null==(_=e.customConfig)?void 0:_.enableDataAnalysis)){let t,i;e.columnTree&&(t=new f.KO(null!=(C=this.internalProps.columnTree)?C:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(A=this.options.columnExpandLevel)?A:1:void 0)),e.rowTree&&(i=new f.KO(null!=(k=this.internalProps.rowTree)?k:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(M=this.options.rowExpandLevel)?M:1:void 0)),O.layoutMap.clearHeaderPathCache(),O.layoutMap=new l.z(this,null,t,i),!1===this.internalProps.recordsIsTwoDimensionalArray&&(this.flatDataToObjects=new a({rows:O.layoutMap.fullRowDimensionKeys,columns:O.layoutMap.colDimensionKeys,indicators:O.layoutMap.indicatorKeys,indicatorsAsCol:O.layoutMap.indicatorsAsCol,indicatorDimensionKey:O.layoutMap.indicatorDimensionKey},D))}else{let t=(0,w.Ul)(this,e),{rowKeys:i,columnKeys:r,indicatorKeys:n}=t,{columnDimensionTree:o,rowDimensionTree:a}=t;this.dataset=new d.q(O.dataConfig,i,r,n,this.internalProps.indicators,null==(T=e.indicatorsAsCol)||T,D,e.rowHierarchyType,e.columnHierarchyType,this.internalProps.columnTree,this.internalProps.rowTree,!1,!!e.extensionRows,!!e.parseCustomTreeToMatchRecords),e.columnTree?o.hasHideNode&&((0,w.uu)(o.tree.children,e.indicators,!0,this),o.reset(o.tree.children)):(!1!==e.indicatorsAsCol&&(this.dataset.colHeaderTree=(0,w.VN)(this.dataset.colHeaderTree,e.indicators)),!1!==e.indicatorsAsCol&&e.indicators&&this.dataset.colHeaderTree&&(0,w.uu)(this.dataset.colHeaderTree,e.indicators,!1,this),o=new f.KO(null!=(R=this.dataset.colHeaderTree)?R:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(E=this.options.columnExpandLevel)?E:1:void 0)),e.rowTree?a.hasHideNode&&((0,w.uu)(a.tree.children,e.indicators,!0,this),a.reset(a.tree.children)):(!1===e.indicatorsAsCol&&(this.dataset.rowHeaderTree=(0,w.VN)(this.dataset.rowHeaderTree,e.indicators)),!1===e.indicatorsAsCol&&this.dataset.rowHeaderTree&&e.indicators&&(0,w.uu)(this.dataset.rowHeaderTree,e.indicators,!1,this),a=new f.KO(null!=(P=this.dataset.rowHeaderTree)?P:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(B=this.options.rowExpandLevel)?B:1:void 0)),O.layoutMap=new l.z(this,this.dataset,o,a)}if(this._changePivotSortStateBySortRules(),(null!=(L=null==(I=e.pivotSortState)?void 0:I.length)?L:0)>0&&(this.pivotSortState=[],this.pivotSortState=e.pivotSortState),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,O.releaseList&&(O.releaseList.forEach(e=>{var t;return null==(t=null==e?void 0:e.release)?void 0:t.call(e)}),O.releaseList=null),this.scenegraph.clearCells(),this.scenegraph.createSceneGraph(),e.title){let t=S.F.getComponent("title");this.internalProps.title=new t(e.title,this),this.scenegraph.resize()}if(this.options.emptyTip)if(this.internalProps.emptyTip)null==(F=this.internalProps.emptyTip)||F.resetVisible();else{let e=S.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(H=this.internalProps.emptyTip)||H.resetVisible()}return setTimeout(()=>{this.fireListeners(m.B.UPDATED,null)},0),new Promise(e=>{setTimeout(e,0)})}updatePagination(e){this.internalProps.layoutMap.clearHeaderPathCache(),e?(this.pagination||(this.pagination={currentPage:0,perPageCount:0}),"number"==typeof e.currentPage&&e.currentPage>=0&&(this.pagination.currentPage=e.currentPage),e.perPageCount&&(this.pagination.perPageCount=e.perPageCount||this.pagination.perPageCount),this.scenegraph.clearCells(),this.internalProps.layoutMap.setPagination(this.pagination),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.render()):this.pagination&&(this.pagination=void 0,this.scenegraph.clearCells(),this.internalProps.layoutMap.setPagination(void 0),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.render())}refreshHeader(){this.setMinMaxLimitWidth(!0),this.refreshRowColCount()}refreshRowColCount(){var e,t,i,r,n,l,o,a,s;let{layoutMap:h}=this.internalProps;h&&(this.colCount=null!=(e=h.colCount)?e:0,this.rowCount=null!=(t=h.rowCount)?t:0,this.internalProps.frozenColCount=null!=(i=this.options.frozenColCount)?i:(null!=(r=h.rowHeaderLevelCount)?r:0)+h.leftRowSeriesNumberColumnCount,this._setFrozenRowCount(Math.max(h.headerLevelCount,null!=(n=this.options.frozenRowCount)?n:0)),this.bottomFrozenRowCount!==(null!=(l=this.options.bottomFrozenRowCount)?l:0)&&(this.bottomFrozenRowCount=null!=(o=this.options.bottomFrozenRowCount)?o:0),this.rightFrozenColCount!==(null!=(a=this.options.rightFrozenColCount)?a:0)&&(this.rightFrozenColCount=null!=(s=this.options.rightFrozenColCount)?s:0),this.stateManager.setFrozenCol(this.internalProps.frozenColCount),this.stateManager.setFrozenRow(this.frozenRowCount))}_getSortFuncFromHeaderOption(e,t,i){}get rowHierarchyType(){return this.internalProps.layoutMap.rowHierarchyType}get columnHierarchyType(){return this.internalProps.layoutMap.columnHierarchyType}_syncHierarchyState(e,t){var i,r,n;e.value===t.value&&e.dimensionKey===t.dimensionKey&&(t.hierarchyState=null!=(i=t.hierarchyState)?i:(null==t?void 0:t.children)?e.hierarchyState:void 0,null==(n=null==(r=null==t?void 0:t.children)?void 0:r.forEach)||n.call(r,(t,i)=>{var r;if((null==(r=null==e?void 0:e.children)?void 0:r[i])&&t){let i=e.children.find(e=>e.dimensionKey===t.dimensionKey&&e.value===t.value);i&&this._syncHierarchyState(i,t)}}))}getRecordShowIndexByCell(e,t){}getTableIndexByRecordIndex(e){}getTableIndexByField(e){}getCellAddrByFieldRecord(e,t){}getBodyIndexByRow(e){let{layoutMap:t}=this.internalProps;return t.getBodyIndexByRow(e)}getBodyIndexByCol(e){let{layoutMap:t}=this.internalProps;return t.getBodyIndexByCol(e)}getFieldData(e,t,i){var r,n,l;if(!this.internalProps.layoutMap.isHeader(t,i)){if(this.internalProps.recordsIsTwoDimensionalArray){let e=this.getBodyIndexByRow(i),n=this.getBodyIndexByCol(t);return null==(r=this.records[e])?void 0:r[n]}if(this.dataset){let r=this.internalProps.layoutMap.getCellHeaderPaths(t,i);if(r){let o,a=null==(n=r.colHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(o={position:"col",index:t}),null!=(i=e.indicatorKey)?i:e.value}),s=null==(l=r.rowHeaderPaths)?void 0:l.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(o={position:"row",index:t}),null!=(i=e.indicatorKey)?i:e.value}),h=this.dataset.getAggregator(s,a,this.internalProps.layoutMap.getIndicatorKey(t,i),!0,o);if(h.records&&h.records.length>=1)return h.records[0][e]}}else if(this.flatDataToObjects){let r=this.internalProps.layoutMap.getCellHeaderPaths(t,i),n=r.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),l=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=this.flatDataToObjects.getTreeNode(l,n,this.internalProps.layoutMap.getBody(t,i).indicatorKey,!1);if(null==o?void 0:o.record)return null==o?void 0:o.record[e]}}}getCellValue(e,t,i){var r,n,l,o,a,s,h;if(!i){let i=this.getCustomMergeValue(e,t);if(i)return i}if(this.internalProps.layoutMap.isSeriesNumber(e,t)){if(this.internalProps.layoutMap.isSeriesNumberInHeader(e,t)){let{title:i}=this.internalProps.layoutMap.getSeriesNumberHeader(e,t);return i}let{format:i}=this.internalProps.layoutMap.getSeriesNumberBody(e,t);return"function"==typeof i?i(e,t,this):t-this.columnHeaderLevelCount+1}if(this.internalProps.layoutMap.isHeader(e,t)){let{title:i,fieldFormat:r}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof r?r(i,e,t,this):i}if(this.internalProps.recordsIsTwoDimensionalArray){let{fieldFormat:i}=this.internalProps.layoutMap.getBody(e,t),n=this.getBodyIndexByRow(t),l=this.getBodyIndexByCol(e),o=null==(r=this.records[n])?void 0:r[l];return"function"==typeof i?i(o,e,t,this):o}if(this.dataset){let i,r=this.internalProps.layoutMap.getCellHeaderPaths(e,t),h=null==(l=null==(n=r.colHeaderPaths)?void 0:n.filter(e=>!e.virtual))?void 0:l.map((e,t)=>{var r;return e.indicatorKey&&(i={position:"col",index:t}),null!=(r=e.indicatorKey)?r:e.value}),d=null==(a=null==(o=r.rowHeaderPaths)?void 0:o.filter(e=>!e.virtual))?void 0:a.map((e,t)=>{var r;return e.indicatorKey&&(i={position:"row",index:t}),null!=(r=e.indicatorKey)?r:e.value}),u=this.dataset.getAggregator(d,h,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,i),{fieldFormat:c}=this.internalProps.layoutMap.getBody(e,t);return u.formatValue?u.formatValue(e,t,this):"function"==typeof c?c(null==u?void 0:u.value(),e,t,this):null!=(s=null==u?void 0:u.value())?s:""}if(this.flatDataToObjects){let i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),r=i.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=i.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),l=this.flatDataToObjects.getTreeNode(n,r,this.internalProps.layoutMap.getBody(e,t).indicatorKey),{fieldFormat:o}=this.internalProps.layoutMap.getBody(e,t);return"function"==typeof o?o(null==l?void 0:l.value,e,t,this):null!=(h=null==l?void 0:l.value)?h:""}}getCellOriginValue(e,t){var i,r,n;if(this.internalProps.layoutMap.isHeader(e,t)){let{title:i}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof i?i():i}if(this.internalProps.recordsIsTwoDimensionalArray){let r=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);return null==(i=this.records[r])?void 0:i[n]}if(this.dataset){let i,l=this.internalProps.layoutMap.getCellHeaderPaths(e,t),o=null==(r=l.colHeaderPaths)?void 0:r.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(i={position:"col",index:t}),null!=(r=e.indicatorKey)?r:e.value}),a=null==(n=l.rowHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(i={position:"row",index:t}),null!=(r=e.indicatorKey)?r:e.value}),s=this.dataset.getAggregator(a,o,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,i);return s.value?s.value():void 0}if(this.flatDataToObjects){let i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),r=i.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=i.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),l=this.flatDataToObjects.getTreeNode(n,r,this.internalProps.layoutMap.getBody(e,t).indicatorKey);return null==l?void 0:l.value}}getCellRawValue(e,t){var i,r,n;if(this.internalProps.layoutMap.isHeader(e,t)){let{title:i}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof i?i():i}if(this.internalProps.recordsIsTwoDimensionalArray){let r=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);return null==(i=this.records[r])?void 0:i[n]}if(this.dataset){let i,l=this.internalProps.layoutMap.getCellHeaderPaths(e,t),o=null==(r=l.colHeaderPaths)?void 0:r.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(i={position:"col",index:t}),null!=(r=e.indicatorKey)?r:e.value}),a=null==(n=l.rowHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(i={position:"row",index:t}),null!=(r=e.indicatorKey)?r:e.value}),s=this.dataset.getAggregator(a,o,this.internalProps.layoutMap.getIndicatorKey(e,t),!1,i);return s.value?s.value():void 0}if(this.flatDataToObjects){let i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),r=i.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=i.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),l=this.flatDataToObjects.getTreeNode(n,r,this.internalProps.layoutMap.getBody(e,t).indicatorKey,!1);return null==l?void 0:l.value}}getCellOriginRecord(e,t){var i,r,n;if(!this.internalProps.layoutMap.isHeader(e,t)){if(this.internalProps.recordsIsTwoDimensionalArray){let r=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);return null==(i=this.records[r])?void 0:i[n]}if(this.dataset){let i,l=this.internalProps.layoutMap.getCellHeaderPaths(e,t),o=null==(r=l.colHeaderPaths)?void 0:r.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(i={position:"col",index:t}),null!=(r=e.indicatorKey)?r:e.value}),a=null==(n=l.rowHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(i={position:"row",index:t}),null!=(r=e.indicatorKey)?r:e.value});return this.dataset.getAggregator(a,o,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,i).records}if(this.flatDataToObjects){let i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),r=i.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=i.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),l=this.flatDataToObjects.getTreeNode(n,r,this.internalProps.layoutMap.getBody(e,t).indicatorKey);return null==l?void 0:l.record}}}getCellRawRecord(e,t){var i,r,n;if(!this.internalProps.layoutMap.isHeader(e,t)){if(this.internalProps.recordsIsTwoDimensionalArray){let r=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);return null==(i=this.records[r])?void 0:i[n]}if(this.dataset){let i,l=this.internalProps.layoutMap.getCellHeaderPaths(e,t),o=null==(r=l.colHeaderPaths)?void 0:r.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(i={position:"col",index:t}),null!=(r=e.indicatorKey)?r:e.value}),a=null==(n=l.rowHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(i={position:"row",index:t}),null!=(r=e.indicatorKey)?r:e.value});return this.dataset.getAggregator(a,o,this.internalProps.layoutMap.getIndicatorKey(e,t),!1,i).records}if(this.flatDataToObjects){let i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),r=i.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=i.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),l=this.flatDataToObjects.getTreeNode(n,r,this.internalProps.layoutMap.getBody(e,t).indicatorKey,!1);return null==l?void 0:l.record}}}updateSortRules(e,t,i){this.internalProps.dataConfig?this.internalProps.dataConfig.sortRules=e:this.internalProps.dataConfig={sortRules:e},this.dataset.updateSortRules(e),this._changePivotSortStateBySortRules();let{layoutMap:r}=this.internalProps;r.resetHeaderTree(),this.scenegraph.clearCells(),(0,p.Z)(t)&&(0,p.Z)(i)?(this.isRowHeader(t,i)?(this.setMinMaxLimitWidth(!0),this.internalProps._widthResizedColMap.clear()):this.isCornerHeader(t,i)?"column"===r.cornerSetting.titleOnDimension?(this.setMinMaxLimitWidth(!0),this.internalProps._widthResizedColMap.clear()):"row"===r.cornerSetting.titleOnDimension&&this.internalProps._heightResizedRowMap.clear():this.isColumnHeader(t,i)&&this.internalProps._heightResizedRowMap.clear(),this.refreshRowColCount()):this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.createSceneGraph(!0),this.render()}_changePivotSortStateBySortRules(){var e,t,i,n;this.pivotSortState=[];let l=null!=(t=null==(e=this.internalProps.dataConfig)?void 0:e.sortRules)?t:[];for(let e=0;e<l.length;e++){let t=l[e],o=[];if(t.sortByIndicator&&t.sortField===(this.dataset.indicatorsAsCol?this.dataset.rows[this.dataset.rows.length-1]:this.dataset.columns[this.dataset.columns.length-1])){for(let e=0;e<t.query.length;e++)o.push({dimensionKey:this.dataset.indicatorsAsCol?this.dataset.columns[e]:this.dataset.rows[e],value:t.query[e]});o.push({indicatorKey:t.sortByIndicator,value:null!=(n=null==(i=this.internalProps.layoutMap.getIndicatorInfo(t.sortByIndicator))?void 0:i.title)?n:t.sortByIndicator})}else o.push({dimensionKey:t.sortField,isPivotCorner:!0,value:t.sortField});let a=t.sortType?t.sortType.toUpperCase():"ASC";this.pivotSortState.push({dimensions:o,order:r.F[a]})}}updatePivotSortState(e){this.pivotSortState=e}sort(e,t,i){var n,l;let o;if(this.isCornerHeader(e,t)){let i=this.getHeaderDefine(e,t);o=[];let r={isPivotCorner:!0,dimensionKey:i.value,value:i.value};o.push(r)}else o=this.isColumnHeader(e,t)?this.getCellHeaderPaths(e,t).colHeaderPaths:this.getCellHeaderPaths(e,t).rowHeaderPaths;let a=o[o.length-1].indicatorKey,s=this.getHeaderDefine(e,t);if(s.sort){if(this.dataset.sortRules){let e={};for(let t=this.dataset.sortRules.length-1;t>=0;t--){let i=this.dataset.sortRules[t];(s.dimensionKey&&i.sortField===s.dimensionKey||a&&i.sortField===(this.dataset.indicatorsAsCol?this.dataset.rows[this.dataset.rows.length-1]:this.dataset.columns[this.dataset.columns.length-1]))&&(e[i.sortField]=i,this.dataset.sortRules.splice(t,1))}if(a){let t=this.dataset.indicatorsAsCol?this.dataset.rows[this.dataset.rows.length-1]:this.dataset.columns[this.dataset.columns.length-1];this.dataset.sortRules.push({sortField:t,sortType:r.F[i],sortByIndicator:a,query:o.reduce((e,t)=>(t.dimensionKey&&e.push(t.value),e),[]),sortFunc:null==(n=e[t])?void 0:n.sortFunc})}else this.dataset.sortRules.push(Object.assign(null!=(l=e[s.dimensionKey])?l:{},{sortField:s.dimensionKey,sortType:r.F[i]}))}else this.dataset.sortRules=a?[{sortField:this.dataset.indicatorsAsCol?this.dataset.rows[this.dataset.rows.length-1]:this.dataset.columns[this.dataset.columns.length-1],sortType:r.F[i],sortByIndicator:a,query:o.reduce((e,t)=>(t.dimensionKey&&e.push(t.value),e),[])}]:[{sortField:s.dimensionKey,sortType:r.F[i]}];this.updateSortRules(this.dataset.sortRules,e,t)}}getPivotSortState(e,t){if(!this.pivotSortState)return;let i=this.getCellRange(e,t);for(let e=0;e<this.pivotSortState.length;e++){let t=this.pivotSortState[e],r=t.dimensions,n=this.getCellAddressByHeaderPaths(r),l=t.order;if(n&&(0,h._Z)(i,n.col,n.row))return l}}_moveHeaderPosition(e,t){let i=this.getCellRange(e.col,e.row),r=this.getCellRange(t.col,t.row),n=this.internalProps.layoutMap.moveHeaderPosition(e,t);if(n){if("column"===n.moveType){if(this.internalProps.recordsIsTwoDimensionalArray)for(let e=0;e<this.internalProps.records.length;e++){let t=this.internalProps.records[e].splice(n.sourceIndex-this.rowHeaderLevelCount,n.sourceSize);t.unshift(n.targetIndex-this.rowHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records[e],t)}this.colWidthsMap.exchangeOrder(i.start.col,i.end.col-i.start.col+1,r.start.col,r.end.col-r.start.col+1,n.targetIndex),this.setMinMaxLimitWidth()}else if("row"===n.moveType){if(this.internalProps.recordsIsTwoDimensionalArray){let e=this.internalProps.records.splice(n.sourceIndex-this.columnHeaderLevelCount,n.sourceSize);e.unshift(n.targetIndex-this.columnHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records,e)}n.targetIndex>n.sourceIndex?this.rowHeightsMap.exchangeOrder(n.sourceIndex,n.sourceSize,n.targetIndex+n.sourceSize-n.targetSize,n.targetSize,n.targetIndex):this.rowHeightsMap.exchangeOrder(n.sourceIndex,n.sourceSize,n.targetIndex,n.targetSize,n.targetIndex)}return n}return null}toggleHierarchyState(e,t,i=!0){this.internalProps.layoutMap.clearHeaderPathCache();let r=this.getHierarchyState(e,t);if(r===n.g.expand)this._refreshHierarchyState(e,t,i),this.fireListeners(s.z.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:n.g.collapse});else if(r===n.g.collapse){let r=this.internalProps.layoutMap.getHeadNode(e,t);Array.isArray(r.children)&&this._refreshHierarchyState(e,t,i),this.fireListeners(s.z.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:n.g.expand,originData:r})}}_refreshHierarchyState(e,t,i=!0,r){var n,l;this.frozenColCount,this.frozenRowCount;let o=this.getBodyVisibleRowRange().rowStart;this.internalProps._oldRowCount=this.rowCount,this.internalProps._oldColCount=this.colCount;let a=!1,s=!1;this.stateManager.updateHoverIcon(e,t,void 0,void 0);let h=this.internalProps.layoutMap.checkHasChart();h&&(this.autoFillWidth&&(a=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&(s=this.getAllRowsHeight()<=this.tableNoFrameHeight));let d=this.internalProps.layoutMap.isRowHeader(e,t)?this.internalProps.layoutMap.toggleHierarchyState(e,t):this.internalProps.layoutMap.toggleHierarchyStateForColumnTree(e,t);r&&r(),this.refreshRowColCount(),this.frozenColCount,this.frozenRowCount,this.clearCellStyleCache(),"tree"===this.rowHierarchyType&&this.scenegraph.updateHierarchyIcon(e,t),null==(n=this.reactCustomLayout)||n.clearCache(),"grid-tree"!==this.rowHierarchyType&&"grid-tree"!==this.columnHierarchyType?this.scenegraph.updateRow(d.removeCellPositionsRowDirection,d.addCellPositionsRowDirection,d.updateCellPositionsRowDirection,i):(this.internalProps.stick.changedCells.clear(),this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.scrollToRow(o)),null==(l=this.reactCustomLayout)||l.updateAllCustomCell(),h&&(this.autoFillWidth&&!a&&(a=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&!s&&(s=this.getAllRowsHeight()<=this.tableNoFrameHeight),("adaptive"===this.widthMode||a||"adaptive"===this.heightMode||s)&&this.scenegraph.updateChartSizeForResizeColWidth(-1)),this.internalProps._oldRowCount=void 0,this.internalProps._oldColCount=void 0}getHeaderCellAddressByPath(e){return this.internalProps.layoutMap.getPivotCellAdress(e)}getCellAddressByHeaderPaths(e){return this.internalProps.layoutMap.getCellAdressByHeaderPath(e)}getHeaderPathByXY(e){let t;return t=e?this.getCellAt(e.x+this.getFrozenColsWidth()+this.scrollLeft+1,e.y+this.getFrozenRowsHeight()+this.scrollTop+1):this.getCellAt(this.getFrozenColsWidth()+this.scrollLeft+1,this.getFrozenRowsHeight()+this.scrollTop+1),this.internalProps.layoutMap.getCellHeaderPaths(t.col,t.row)}getHierarchyState(e,t){var i;return null==(i=this._getHeaderLayoutMap(e,t))?void 0:i.hierarchyState}getLayoutColumnTree(){return this.internalProps.layoutMap.getLayoutColumnTree()}getLayoutColumnTreeCount(){return this.internalProps.layoutMap.getLayoutColumnTreeCount()}getLayoutRowTree(){return this.internalProps.layoutMap.getLayoutRowTree()}getLayoutRowTreeCount(){return this.internalProps.layoutMap.getLayoutRowTreeCount()}getCellHeaderTreeNodes(e,t){return this.internalProps.layoutMap.getCellHeaderPathsWithTreeNode(e,t)}getMenuInfo(e,t,i){let r=this.internalProps.layoutMap.getPivotDimensionInfo(e,t);return{dimensionKey:r[r.length-1].dimensionKey,value:this.getCellValue(e,t),cellLocation:this.getCellLocation(e,t),isPivotCorner:this.isCornerHeader(e,t),event:void 0}}setRecords(e){var t,i,r,n,o,s,h,d;(0,A.H6)();let u={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.options.records=this.internalProps.records=e,this.internalProps.recordsIsTwoDimensionalArray=!1,(null==(t=null==e?void 0:e[0])?void 0:t.constructor)===Array&&(this.internalProps.recordsIsTwoDimensionalArray=!0);let c=this.options,p=this.internalProps;if(!1===(null==(i=this.options.customConfig)?void 0:i.enableDataAnalysis))!1===this.internalProps.recordsIsTwoDimensionalArray&&(this.flatDataToObjects=new a({rows:p.layoutMap.fullRowDimensionKeys,columns:p.layoutMap.colDimensionKeys,indicators:p.layoutMap.indicatorKeys,indicatorsAsCol:p.layoutMap.indicatorsAsCol,indicatorDimensionKey:p.layoutMap.indicatorDimensionKey},e));else{let t,i;this.dataset.setRecords(e),c.columnTree?t=p.layoutMap.columnDimensionTree:(!1!==c.indicatorsAsCol&&c.indicators&&this.dataset.colHeaderTree&&(0,w.uu)(this.dataset.colHeaderTree,c.indicators,!1,this),t=new f.KO(null!=(r=this.dataset.colHeaderTree)?r:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(n=this.options.columnExpandLevel)?n:1:void 0)),c.rowTree?i=p.layoutMap.rowDimensionTree:(!1===c.indicatorsAsCol&&this.dataset.rowHeaderTree&&c.indicators&&(0,w.uu)(this.dataset.rowHeaderTree,c.indicators,!1,this),i=new f.KO(null!=(o=this.dataset.rowHeaderTree)?o:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(s=this.options.rowExpandLevel)?s:1:void 0)),p.layoutMap=new l.z(this,this.dataset,t,i),this.pivotSortState=[],c.pivotSortState&&(this.pivotSortState=c.pivotSortState)}if(this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(u.col,u.row),this.internalProps.title&&!this.internalProps.title.isReleased&&(this._updateSize(),this.internalProps.title.resize(),this.scenegraph.resize()),this.eventManager.updateEventBinder(),this.options.emptyTip)if(this.internalProps.emptyTip)null==(h=this.internalProps.emptyTip)||h.resetVisible();else{let e=S.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(d=this.internalProps.emptyTip)||d.resetVisible()}}startEditCell(e,t,i){var r;if((0,o.Z)(e)&&(0,o.Z)(t))this.eventManager.isDraging=!1,this.selectCell(e,t),this.editorManager.startEditCell(e,t,i);else if(null==(r=this.stateManager.select)?void 0:r.cellPos){let{col:e,row:t}=this.stateManager.select.cellPos;(0,o.Z)(e)&&(0,o.Z)(t)&&this.editorManager.startEditCell(e,t,i)}}completeEditCell(){this.editorManager.completeEdit()}getEditor(e,t){var i,r,n;let l,o=this.editorManager.cacheLastSelectedCellEditor[`${e}-${t}`];if(o)return o;if(Object.values(this.editorManager.cacheLastSelectedCellEditor).forEach(e=>{var t;return null==(t=null==e?void 0:e.onEnd)?void 0:t.call(e)}),this.editorManager.cacheLastSelectedCellEditor={},this.isCornerHeader(e,t)){let r=this.getHeaderDefine(e,t);l=null!=(i=null==r?void 0:r.headerEditor)?i:this.options.headerEditor}else if(this.isHeader(e,t)){let i=this.getHeaderDefine(e,t);l=null!=(r=null==i?void 0:i.headerEditor)?r:this.options.headerEditor}else{let i=this.getBodyColumnDefine(e,t);l=null!=(n=null==i?void 0:i.editor)?n:this.options.editor}return"function"==typeof l&&(l=l({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||"",table:this})),"string"==typeof l&&(l=y.U(l)),l&&(this.editorManager.cacheLastSelectedCellEditor[`${e}-${t}`]=l),l}isHasEditorDefine(e,t){var i;let r=this.getBodyColumnDefine(e,t),n=null!=(i=null==r?void 0:r.editor)?i:this.options.editor;return"function"==typeof n&&(n=n({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||"",table:this})),(0,o.Z)(n)}changeCellValue(e,t,i,r=!1){var n,l;if(r&&this.isHasEditorDefine(e,t)||!1===r){let r=i,o=this.getCellOriginValue(e,t),a=this.getCellRawValue(e,t);"number"==typeof a&&(0,C.Zf)(i)&&(r=parseFloat(i)),this._changeCellValueToDataSet(e,t,o,r);let s=this.getCellRange(e,t);for(let e=s.start.col;e<=s.end.col;e++)for(let t=s.start.row;t<=s.end.row;t++)this.scenegraph.updateCellContent(e,t);if(null!=(l=null==(n=this.options.dataConfig)?void 0:n.updateAggregationOnEditCell)&&l)for(let e=0;e<this.colCount;e++)for(let t=0;t<this.rowCount;t++)this.internalProps.layoutMap.isAggregation(e,t)&&this.scenegraph.updateCellContent(e,t);if("adaptive"===this.widthMode||this.autoFillWidth&&this.getAllColsWidth()<=this.tableNoFrameWidth)0===this.internalProps._widthResizedColMap.size&&this.scenegraph.recalculateColWidths();else if(!this.internalProps._widthResizedColMap.has(e)){let t=this.getColWidth(e),i=(0,v.al)(e,0,this.rowCount-1,this,!1);i!==t&&this.scenegraph.updateColWidth(e,i-t)}if("adaptive"===this.heightMode||this.autoFillHeight&&this.getAllRowsHeight()<=this.tableNoFrameHeight)0===this.internalProps._heightResizedRowMap.size&&this.scenegraph.recalculateRowHeights();else if(this.isAutoRowHeight(t)&&!this.internalProps._heightResizedRowMap.has(t)){let e=this.getRowHeight(t),i=(0,_.P)(t,0,this.colCount-1,this);this.scenegraph.updateRowHeight(t,i-e)}o!==r&&this.fireListeners(m.B.CHANGE_CELL_VALUE,{col:e,row:t,rawValue:a,currentValue:o,changedValue:r}),this.scenegraph.updateNextFrame()}}changeCellValues(e,t,i,r=!1){var n,l;let o=e,a=t,s=[],h=[];for(let r=0;r<i.length&&!(t+r>this.rowCount-1);r++){let n=i[r],l=[],o=[];s.push(l),h.push(o);for(let i=0;i<n.length&&!(e+i>this.colCount-1);i++){let n=this.getCellRawValue(e+i,t+r);l.push(n);let a=this.getCellOriginValue(e+i,t+r);o.push(a)}}for(let n=0;n<i.length&&!(t+n>this.rowCount-1);n++){a=t+n;let l=i[n],d=e;for(let i=0;i<l.length&&!(e+i>this.colCount-1);i++)if(d=e+i,r&&this.isHasEditorDefine(e+i,t+n)||!1===r){let r=l[i],o=r,a=h[n][i],d=s[n][i];"number"==typeof d&&(0,C.Zf)(r)&&(o=parseFloat(r)),this._changeCellValueToDataSet(e+i,t+n,a,o);let u=this.getCellOriginValue(e+i,t+n);u!==a&&this.fireListeners(m.B.CHANGE_CELL_VALUE,{col:e+i,row:t+n,rawValue:d,currentValue:a,changedValue:u})}o=Math.max(o,d)}let d=this.getCellRange(e,t),u=this.getCellRange(o,a);for(let e=d.start.col;e<=u.end.col;e++)for(let t=d.start.row;t<=u.end.row;t++)this.scenegraph.updateCellContent(e,t);if(null!=(l=null==(n=this.options.dataConfig)?void 0:n.updateAggregationOnEditCell)&&l)for(let e=0;e<this.colCount;e++)for(let t=0;t<this.rowCount;t++)this.internalProps.layoutMap.isAggregation(e,t)&&this.scenegraph.updateCellContent(e,t);if("adaptive"===this.widthMode||this.autoFillWidth&&this.getAllColsWidth()<=this.tableNoFrameWidth)0===this.internalProps._widthResizedColMap.size&&this.scenegraph.recalculateColWidths();else for(let t=e;t<=u.end.col;t++)if(!this.internalProps._widthResizedColMap.has(t)){let e=this.getColWidth(t),i=(0,v.al)(t,0,this.rowCount-1,this,!1);i!==e&&this.scenegraph.updateColWidth(t,i-e)}if("adaptive"===this.heightMode||this.autoFillHeight&&this.getAllRowsHeight()<=this.tableNoFrameHeight)this.scenegraph.recalculateRowHeights();else if(this.isAutoRowHeight(t)){let e=[],i=[];for(let r=t;r<=u.end.row;r++)if(this.rowHeightsMap.get(r)){let t=this.getRowHeight(r),n=(0,_.P)(r,0,this.colCount-1,this);e.push(r),i.push(n-t)}this.scenegraph.updateRowsHeight(e,i)}this.scenegraph.updateNextFrame()}_changeCellValueToDataSet(e,t,i,r){var n,l,o,a,s,h,d,u;if(this.internalProps.recordsIsTwoDimensionalArray){let i=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);this.records[i][n]=r}else if(this.dataset){let h=this.internalProps.layoutMap.getCellHeaderPaths(e,t);if(this.isCornerHeader(e,t))this.internalProps.layoutMap.changeCornerTitle(e,t,r);else if(this.isHeader(e,t))this.internalProps.layoutMap.changeTreeNodeTitle(e,t,r),this.isCornerHeader(e,t)||this.dataset.changeRecordFieldValue((null==(n=h.colHeaderPaths)?void 0:n.length)?null!=(l=h.colHeaderPaths[h.colHeaderPaths.length-1].indicatorKey)?l:h.colHeaderPaths[h.colHeaderPaths.length-1].dimensionKey:null!=(o=h.rowHeaderPaths[h.rowHeaderPaths.length-1].indicatorKey)?o:h.rowHeaderPaths[h.rowHeaderPaths.length-1].dimensionKey,i,r);else{let i=null==(a=h.colHeaderPaths)?void 0:a.filter(e=>!e.virtual).map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=null==(s=h.rowHeaderPaths)?void 0:s.filter(e=>!e.virtual).map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value});this.dataset.changeTreeNodeValue(this.internalProps.layoutMap.indicatorsAsCol?n:n.slice(0,-1),this.internalProps.layoutMap.indicatorsAsCol?i.slice(0,-1):i,this.internalProps.layoutMap.getIndicatorKey(e,t),r)}}else if(this.flatDataToObjects){let n=this.internalProps.layoutMap.getCellHeaderPaths(e,t);if(this.isHeader(e,t))this.internalProps.layoutMap.changeTreeNodeTitle(e,t,r),this.isCornerHeader(e,t)||this.flatDataToObjects.changeRecordFieldValue((null==(h=n.colHeaderPaths)?void 0:h.length)?null!=(d=n.colHeaderPaths[n.colHeaderPaths.length-1].indicatorKey)?d:n.colHeaderPaths[n.colHeaderPaths.length-1].dimensionKey:null!=(u=n.rowHeaderPaths[n.rowHeaderPaths.length-1].indicatorKey)?u:n.rowHeaderPaths[n.rowHeaderPaths.length-1].dimensionKey,i,r);else{let i=n.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),l=n.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value});this.flatDataToObjects.changeTreeNodeValue(l,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey,r)}}}_hasCustomRenderOrLayout(){if(this.options.customRender)return!0;let{columnsDefine:e,rowsDefine:t,indicatorsDefine:i}=this.internalProps.layoutMap;for(let t=0;t<e.length;t++){let i=e[t];if("string"!=typeof i&&(i.headerCustomLayout||i.headerCustomRender))return!0}for(let e=0;e<t.length;e++){let i=t[e];if("string"!=typeof i&&(i.headerCustomLayout||i.headerCustomRender))return!0}for(let e=0;e<i.length;e++){let t=i[e];if("string"!=typeof t&&(t.customLayout||t.headerCustomLayout||t.customRender||t.headerCustomRender))return!0}return!1}changeRecordOrder(e,t){}setTreeNodeChildren(e,t,i,r){this.flatDataToObjects?(this.internalProps.layoutMap.getHeadNode(i,r).children=e,this._refreshHierarchyState(i,r,!0,()=>{this.flatDataToObjects.changeDataConfig({rows:this.internalProps.layoutMap.fullRowDimensionKeys,columns:this.internalProps.layoutMap.colDimensionKeys,indicators:this.internalProps.layoutMap.indicatorKeys,indicatorsAsCol:this.internalProps.layoutMap.indicatorsAsCol,indicatorDimensionKey:this.internalProps.layoutMap.indicatorDimensionKey}),this.flatDataToObjects.addRecords(t)})):(this.internalProps.layoutMap.getHeadNode(i,r).children=e,this._refreshHierarchyState(i,r,!0,()=>{this.dataset._rowTreeHasChanged(),this.dataset.changeDataConfig({rows:this.internalProps.layoutMap.fullRowDimensionKeys,columns:this.internalProps.layoutMap.colDimensionKeys}),this.dataset.addRecords(t)}))}updateFilterRules(e,t=!1){this.internalProps.dataConfig.filterRules=e,t?(this.dataset.updateFilterRules(e,!0),this.internalProps.layoutMap.resetHeaderTree()):this.dataset.updateFilterRules(e),this.renderWithRecreateCells()}getFilteredRecords(){var e;return null==(e=this.dataset)?void 0:e.filteredRecords}getCellPivotRole(e,t){let{cellLocation:i,colHeaderPaths:r,rowHeaderPaths:n}=this.getCellHeaderPaths(e,t),l=r.length?"normal":void 0,o=n.length?"normal":void 0;return r.forEach(e=>{"sub-total"===e.role?l="sub-total":"grand-total"===e.role&&(l="grand-total")}),n.forEach(e=>{"sub-total"===e.role?o="sub-total":"grand-total"===e.role&&(o="grand-total")}),{colRole:l,rowRole:o,cellLocation:i}}getCellRowHeaderFullPaths(e){return this.internalProps.layoutMap.getCellRowHeaderFullPaths(e)}setLoadingHierarchyState(e,t){this.scenegraph.setLoadingHierarchyState(e,t)}expandAllForRowTree(){"tree"!==this.rowHierarchyType&&"grid-tree"!==this.rowHierarchyType||this.internalProps.layoutMap.rowDimensionTree&&(this.internalProps.layoutMap.clearHeaderPathCache(),this.internalProps.layoutMap.expandAllForRowDimensionTree(),this.renderWithRecreateCells(),this.fireListeners(s.z.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:n.g.expand,changeAll:!0}))}collapseAllForRowTree(){"tree"!==this.rowHierarchyType&&"grid-tree"!==this.rowHierarchyType||this.internalProps.layoutMap.rowDimensionTree&&(this.internalProps.layoutMap.clearHeaderPathCache(),this.internalProps.layoutMap.collapseAllForRowDimensionTree(),this.renderWithRecreateCells(),this.fireListeners(s.z.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:n.g.collapse,changeAll:!0}))}expandAllForColumnTree(){"grid-tree"===this.columnHierarchyType&&this.internalProps.layoutMap.columnDimensionTree&&(this.internalProps.layoutMap.clearHeaderPathCache(),this.internalProps.layoutMap.expandAllForColumnDimensionTree(),this.renderWithRecreateCells(),this.fireListeners(s.z.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:n.g.expand,changeAll:!0}))}collapseAllForColumnTree(){"grid-tree"===this.columnHierarchyType&&this.internalProps.layoutMap.columnDimensionTree&&(this.internalProps.layoutMap.clearHeaderPathCache(),this.internalProps.layoutMap.collapseAllForColumnDimensionTree(),this.renderWithRecreateCells(),this.fireListeners(s.z.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:n.g.collapse,changeAll:!0}))}release(){var e;this.internalProps.layoutMap.clearHeaderPathCache(),null==(e=this.editorManager)||e.release(),super.release()}}var M=i(65774),T=i(47962),R=i(76804);(0,M.R2)(),(0,M.Eg)(),(0,M.I)(),(0,M.FD)(),(0,M._t)(),(0,M.Mh)(),(0,T.zf)(),(0,M.ph)(),(0,R.yR)(),(0,R.pk)(),(0,R.m4)(),(0,R.Jy)(),(0,R.dB)(),(0,R.ge)(),(0,R.au)();class E extends k{}},75008:function(e,t,i){i.d(t,{U:()=>o,f:()=>n});var r=i(35759);let n={},l={};function o(){return(0,r.l7)(l,n)}},99346:function(e,t,i){i.d(t,{$M:()=>d,UP:()=>p,Zu:()=>u,b8:()=>c,iR:()=>h,sG:()=>g});var r=i(20408),n=i(54326),l=i(15215),o=i(9762),a=i(44561);let s={left:{textAlign:"center",textBaseline:"bottom"},right:{textAlign:"center",textBaseline:"bottom"},radius:{},angle:{}},h="PingFang SC,Microsoft Yahei,system-ui,-apple-system,segoe ui,Roboto,Helvetica,Arial,sans-serif, apple color emoji,segoe ui emoji,segoe ui symbol",d=14,u={FONT_FAMILY:h,LABEL_FONT_SIZE:14,MAP_LABEL_FONT_SIZE:10,TITLE_FONT_SIZE:18,AXIS_TICK_SIZE:4},c={domainLine:{visible:!0,style:{lineWidth:0,stroke:"#D9DDE4",strokeOpacity:1}},grid:{visible:!0,style:{lineWidth:1,stroke:"#EBEDF2",strokeOpacity:1,lineDash:[]}},subGrid:{visible:!1,style:{lineWidth:1,stroke:"#EBEDF2",strokeOpacity:1,lineDash:[4,4]}},tick:{visible:!0,tickSize:u.AXIS_TICK_SIZE,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},subTick:{visible:!1,tickSize:u.AXIS_TICK_SIZE/2,style:{lineWidth:1,stroke:"#D9DDE4",strokeOpacity:1}},label:{visible:!0,space:1,style:{fontSize:u.LABEL_FONT_SIZE,fill:"#89909D",fontWeight:"normal",fillOpacity:1},autoLimit:!0},title:{space:10,style:{fontSize:u.LABEL_FONT_SIZE,fill:"#333333",fontWeight:"normal",fillOpacity:1}}};function p(e){var t,i;return(null==(i=null==(t=null==e?void 0:e.colorScheme)?void 0:t.default)?void 0:i.palette)?(0,r.Z)({},c,{tick:{style:{stroke:e.colorScheme.default.palette.axisDomainColor||"#D9DDE4"}},subTick:{style:{stroke:e.colorScheme.default.palette.axisDomainColor||"#D9DDE4"}},label:{style:{fill:e.colorScheme.default.palette.axisLabelFontColor||"#89909D"}},title:{style:{fill:e.colorScheme.default.palette.secondaryFontColor||"#333333"}}}):c}function g(e){var t,i,h,d,u,c,p,g,f,m,b,y,v;let _=(0,r.Z)({},e);e.labelHoverOnAxis&&!1===_.domainLine.visible&&(_.domainLine.style.lineWidth=0,_.domainLine.visible=!0);let C,x=null!=(i=null==(t=_.title)?void 0:t.angle)?i:0;"left"!==_.orient&&"right"!==_.orient||(null==(h=_.title)?void 0:h.autoRotate)&&(0,n.Z)(_.title.angle)&&(x="left"===_.orient?-90:90,C=s[_.orient]);let w=(0,l.Z)(_.label,["style","formatMethod","state"]);return{orient:_.orient,select:_.select,hover:_.hover,line:(0,a.lc)(_.domainLine),label:Object.assign({style:(0,a.h_)(_.label.style),formatMethod:_.label.formatMethod?(e,t,i)=>_.label.formatMethod(t.rawValue,t):null,state:(0,a.Zv)(_.label.state)},w),tick:{visible:_.tick.visible,length:_.tick.tickSize,inside:_.tick.inside,alignWithLabel:_.tick.alignWithLabel,style:(0,a.h_)(_.tick.style),state:(0,a.Zv)(_.tick.state),dataFilter:_.tick.dataFilter},subTick:{visible:_.subTick.visible,length:_.subTick.tickSize,inside:_.subTick.inside,count:_.subTick.tickCount,style:(0,a.h_)(_.subTick.style),state:(0,a.Zv)(_.subTick.state)},grid:{type:"line",visible:_.grid.visible,alternateColor:_.grid.alternateColor,alignWithLabel:_.grid.alignWithLabel,style:(0,a.h_)(_.grid.style)},subGrid:{type:"line",visible:_.subGrid.visible,alternateColor:_.subGrid.alternateColor,style:(0,a.h_)(_.subGrid.style)},title:{visible:_.title.visible,position:_.title.position,space:_.title.space,autoRotate:!1,angle:x?(0,o.M4)(x):null,textStyle:(0,r.Z)({},C,(0,a.h_)(_.title.style)),padding:_.title.padding,shape:{visible:null==(d=_.title.shape)?void 0:d.visible,space:null==(u=_.title.shape)?void 0:u.space,style:(0,a.h_)(null==(c=_.title.shape)?void 0:c.style)},background:{visible:null==(p=_.title.background)?void 0:p.visible,style:(0,a.h_)(null==(g=_.title.background)?void 0:g.style)},state:{text:(0,a.Zv)(_.title.state),shape:(0,a.Zv)(null==(f=_.title.shape)?void 0:f.state),background:(0,a.Zv)(null==(m=_.title.background)?void 0:m.state)}},panel:{visible:null==(b=_.background)?void 0:b.visible,style:(0,a.h_)(null==(y=_.background)?void 0:y.style),state:(0,a.Zv)(null==(v=_.background)?void 0:v.state)},labelHoverOnAxis:_.labelHoverOnAxis}}},65774:function(e,t,i){i.d(t,{Mh:()=>eN,Eg:()=>eD,ph:()=>e$,FD:()=>eW,_t:()=>eZ,R2:()=>eO,I:()=>ez});var r=i(54833),n=i(26874),l=i(20408),o=i(89530),a=i(54326),s=i(9762),h=i(1769),d=i(99346);function u(e){return"bottom"===e||"top"===e}var c=i(68390),p=i(95723);class g{constructor(){this._scale=new c.j,this._scales=[this._scale]}valueToPosition(e){return this._scale.scale(e)}getPosition(e){let t=0,i=this._scale;if(1===this._scales.length||1===e.length)t=this.valueToPosition(e[0]);else{let r=Math.min(e.length,this._scales.length);for(let i=0;i<r;i++)t+=this._scales[i].scale(e[i]);i=this._scales[r-1]}return{position:t,bandScale:i}}calcScales(e,t){var i,r;let{bandPadding:n,paddingInner:l,paddingOuter:o}=this,a=(0,p.Z)(n),s=(0,p.Z)(l),h=(0,p.Z)(o);for(let d=0;d<this._scales.length;d++){let u=a?n[d]:n,c=s?l[d]:l,p=h?o[d]:o;this._scales[d].paddingInner(null!=(i=null!=c?c:u)?i:e,!0).paddingOuter(null!=(r=null!=p?p:u)?r:t)}}dataToPosition(e,t={}){var i;if(0===e.length||0===this._scales.length)return 0;let{position:r,bandScale:n}=this.getPosition(e);return r+n.bandwidth()*(null!=(i=t.bandPosition)?i:.5)}updateScaleDomain(e){for(let t=0;t<this._scales.length;t++)this._scales[t].domain(e)}updateRange(e){let[t,i]=this._scale.range();e[0]===t&&e[1]===i||this._scale.range(e)}}var f=i(99127),m=i(28919),b=i(31820),y=i(65880),v=i(1466),_=i(10145),C=i(64776),x=i(99051);let w=Math.sqrt(50),S=Math.sqrt(10),A=Math.sqrt(2);class k{constructor(e){this._extend={},this.type=null!=e?e:"linear",this._scale="log"===e?new y.Y:"symlog"===e?new v.g:new _.f,this._scales=[this._scale]}setExtraAttrFromSpec(e,t,i,r,n,l){this.nice=!1,this.zero=t,this.zero&&(i.min=Math.min(i.min,0),i.max=Math.max(i.max,0)),this.domain=i,this.expand=r,"log"===this.type?this._scale.base(null!=n?n:10):"symlog"===this.type&&this._scale.constant(null!=l?l:10)}transformScaleDomain(){"symlog"===this.type||"log"===this.type||this.setScaleNice()}setScaleNice(){"log"===this.type?this.setLogScaleNice():this.setLinearScaleNice()}setLogScaleNice(){var e,t,i,r,n,l;(0,a.Z)(null==(e=this.domain)?void 0:e.min)&&(0,a.Z)(null==(t=this.domain)?void 0:t.max)?this.nice&&this._scale.nice():(0,C.Z)(null==(i=this.domain)?void 0:i.min)&&(0,a.Z)(null==(r=this.domain)?void 0:r.max)?this.nice&&this._scale.niceMax():(0,a.Z)(null==(n=this.domain)?void 0:n.min)&&(0,C.Z)(null==(l=this.domain)?void 0:l.max)&&this.nice&&this._scale.niceMin()}setLinearScaleNice(){var e,t,i,r,n,l,o,s;let h=null!=(t=null!=(e=this.forceTickCount)?e:this.tickCount)?t:10;"accurateFirst"===this.niceType&&(h=Math.max(10,h)),(0,a.Z)(null==(i=this.domain)?void 0:i.min)&&(0,a.Z)(null==(r=this.domain)?void 0:r.max)?this.nice&&this._scale.nice(h):(0,C.Z)(null==(n=this.domain)?void 0:n.min)&&(0,a.Z)(null==(l=this.domain)?void 0:l.max)?this.nice&&this._scale.niceMax(h):(0,a.Z)(null==(o=this.domain)?void 0:o.min)&&(0,C.Z)(null==(s=this.domain)?void 0:s.max)?this.nice&&this._scale.niceMin(h):this.nice&&this._scale.nice(h)}dataToPosition(e){return this.valueToPosition(e[0])}valueToPosition(e){return this._scale.scale(e)}computeLinearDomain(e){let t=[];return e.forEach(e=>{let{min:i,max:r}=e;t[0]=void 0===t[0]?i:Math.min(t[0],i),t[1]=void 0===t[1]?r:Math.max(t[1],r)}),this.expandDomain(t),this.includeZero(t),this.setDomainMinMax(t),t}expandDomain(e){if(!this.expand)return;let t=e[0],i=e[e.length-1];(0,C.Z)(this.expand.min)&&(e[0]=t-(i-t)*this.expand.min),(0,C.Z)(this.expand.max)&&(e[e.length-1]=i+(i-t)*this.expand.max)}niceDomain(e){if((0,C.Z)(e[0])||(0,C.Z)(e[1])||"linear"!==this.type)return e;if(1e-12>=Math.abs((0,x.iH)(e)-(0,x.CE)(e))){let t=e[0],i=t>=0?1:-1;if((t=Math.abs(t))<1)e[0]=0,e[1]=1;else{let i=t/5,r=Math.floor(Math.log(i)/Math.LN10),n=i/Math.pow(10,r);i=(n>=w?10:n>=S?5:n>=A?2:1)*Math.pow(10,r),e[0]=0,e[1]=10*i}i<0&&(e.reverse(),e[0]*=-1,e[1]*=-1)}return e}niceMinMax(){var e,t,i,r,n,l,o,s;if(this.nice){let h=null!=(t=null!=(e=this.forceTickCount)?e:this.tickCount)?t:10;"accurateFirst"===this.niceType&&(h=Math.max(10,h)),(0,a.Z)(null==(i=this.domain)?void 0:i.min)&&(0,a.Z)(null==(r=this.domain)?void 0:r.max)?this._scale.nice(h):(0,C.Z)(null==(n=this.domain)?void 0:n.min)&&(0,a.Z)(null==(l=this.domain)?void 0:l.max)?this._scale.niceMax(h):(0,a.Z)(null==(o=this.domain)?void 0:o.min)&&(0,C.Z)(null==(s=this.domain)?void 0:s.max)?this._scale.niceMin(h):this._scale.nice(h)}}includeZero(e){this.zero&&(e[0]=Math.min(e[0],0),e[e.length-1]=Math.max(e[e.length-1],0))}setExtendDomain(e,t){if(void 0===t)return void delete this._extend[e];this._extend[e]=t;let i=this._scale.domain();this.extendDomain(i),this.includeZero(i),this.setDomainMinMax(i),this.niceDomain(i),this._scale.domain(i,this.nice),this.niceMinMax()}extendDomain(e){let t,i=e.length-1,r=e[0]-e[i]>0,n=r?i:0,l=r?0:i;for(let i in this._extend)(t=this._extend[i])>e[l]&&(e[l]=t),t<e[n]&&(e[n]=t)}setDomainMinMax(e){if(!this.domain)return;let{min:t,max:i}=this.domain;(0,C.Z)(t)&&(e[0]=t),(0,C.Z)(i)&&(e[1]=i)}setZero(e){this.zero!==e&&(this.zero=e,this.updateScaleDomain())}updateScaleDomain(){let e=this.computeDomain([this.domain]);this.updateScaleDomainByModel(e)}computeDomain(e){return this.computeLinearDomain(e)}updateScaleDomainByModel(e){e=null!=e?e:this._scale.domain(),this.extendDomain(e),this.includeZero(e),this.setDomainMinMax(e),this.niceDomain(e),this._scale.domain(e,this.nice),this.niceMinMax()}updateRange(e){let[t,i]=this._scale.range();e[0]===t&&e[1]===i||this._scale.range(e)}}var M=i(44843);function T(e,t){var i;let r=t.option;(0,M.Z)(e)||(null==(i=null==r?void 0:r.label)?void 0:i.flush)&&function(e,t){let{width:i,height:r}=t.getLayoutRect(),n=u(t.orient),l=!0===t.option.inverse,o=e[0],a=(0,x.Z$)(e);if(n)if(l){let e=o.AABBBounds.x2,t=a.AABBBounds.x1;e>i&&o.setAttributes({x:i,textAlign:"right"}),t<0&&a.setAttributes({x:0,textAlign:"left"})}else{let e=o.AABBBounds.x1,t=a.AABBBounds.x2;e<0&&o.setAttributes({x:0,textAlign:"left"}),t>i&&a.setAttributes({x:i,textAlign:"right"})}else if(l){let e=o.AABBBounds.y1,t=a.AABBBounds.y2;e<0&&o.setAttributes({y:0,textBaseline:"top"}),t>r&&a.setAttributes({y:r,textBaseline:"bottom"})}else{let e=o.AABBBounds.y2,t=a.AABBBounds.y1;e>r&&o.setAttributes({y:r,textBaseline:"bottom"}),t<0&&a.setAttributes({y:0,textBaseline:"top"})}}(e,t)}let R=e=>e;class E{constructor(e,t,i,r,n){var o,a,s,h,u,c,p,g,f;(this.x=0,this.y=0,this.bodyChartCellPadding=r,this.table=n,this.orient=null!=(o=e.orient)?o:"left",this.type=null!=(a=e.type)?a:"band",this.option=(0,l.Z)({},(0,d.UP)(e.__vtableChartTheme),P(this.orient,n.theme),function(e,t,i){let r,n;if(!i)return{};let o=i.axis;return"linear"===t||"log"===t||"symlog"===t?r=i.axisLinear:"band"===t&&(r=i.axisBand),"top"===e||"bottom"===e?n=i.axisX:"left"!==e&&"right"!==e||(n=i.axisY),(0,l.Z)({},o,r,n)}(this.orient,this.type,e.__vtableChartTheme),e),"left"===this.orient||"right"===this.orient)?("left"===this.orient&&(this.x=null!=(s=this.option.cellPaddingLeft)?s:0,this.width=t-(null!=(h=this.option.cellPaddingLeft)?h:0)),"right"===this.orient&&(this.x=0,this.width=t-(null!=(u=this.option.cellPaddingRight)?u:0)),this.height=i-r[0]-r[2]-0,this.y=r[0]+0):("top"===this.orient||"bottom"===this.orient)&&(this.width=t-r[1]-r[3]-0,this.x=r[3]+0,"top"===this.orient&&(this.y=null!=(c=this.option.cellPaddingTop)?c:0,this.height=i-(null!=(p=this.option.cellPaddingTop)?p:0)),"bottom"===this.orient&&(this.y=0,this.height=i-(null!=(g=this.option.cellPaddingBottom)?g:0))),this.visible=null==(f=e.visible)||f,this.inverse="inverse"in e&&!!e.inverse,"band"===e.type&&(this.data=e.domain),this.initScale(),this.initData(),this.createComponent(),this.initEvent()}initScale(){let e=this.option;"band"===this.type||"point"===this.type?(this.scale=new g,this.scale.bandPadding=e.bandPadding,this.scale.paddingInner=e.paddingInner,this.scale.paddingOuter=e.paddingOuter,this.scale.calcScales(.1,.3),this.scale.updateScaleDomain(this.data),this.updateScaleRange()):"linear"!==this.type&&"time"!==this.type&&"log"!==this.type&&"symlog"!==this.type||(this.scale=new k(this.type),this.scale.setExtraAttrFromSpec(e.nice,e.zero,e.range,e.expand,e.base,e.constant),this.scale.transformScaleDomain(),this.scale.updateScaleDomain(),this.updateScaleRange())}initData(){var e,t,i,r,n;this.table._vDataSet||(this.table._vDataSet=new f.q),e=this.table._vDataSet,t="scale",e.getParser(t)||e.registerParser(t,R),i=this.table._vDataSet,r="ticks",n=b.s,i.getTransform(r)||i.registerTransform(r,n);let l=this.option.label||{},o=this.option.tick||{},a=new m.V(this.table._vDataSet).parse(this.scale._scale,{type:"scale"}).transform({type:"ticks",options:{sampling:!1!==this.option.sampling,tickCount:o.tickCount,forceTickCount:o.forceTickCount,tickStep:o.tickStep,tickMode:o.tickMode,noDecimals:o.noDecimals,axisOrientType:this.orient,coordinateType:"cartesian",labelStyle:l.style,labelFormatter:l.formatMethod,labelGap:l.minGap,labelLastVisible:l.lastVisible,labelFlush:l.flush}},!1);this.tickData=a,this.computeData()}computeData(){this.tickData.reRunAllTransform()}initEvent(){}createComponent(){let e=(0,d.sG)(this.option),t=this.getUpdateAttribute();t.verticalFactor="top"===this.orient||"right"===this.orient?-1:1,this.component=new h.$((0,l.Z)({disableTriggerEvent:this.table.options.disableInteraction},e,t)),this.component.setAttributes(this.setLayoutStartPosition({x:this.x,y:this.y})),this.component.originAxis=this}resize(e,t){var i,r,n,o;"left"===this.orient?this.width=e-(null!=(i=this.option.cellPaddingLeft)?i:0):"right"===this.orient?this.width=e-(null!=(r=this.option.cellPaddingRight)?r:0):"top"!==this.orient&&"bottom"!==this.orient||(this.width=e-(this.bodyChartCellPadding[1]+this.bodyChartCellPadding[3])),"top"===this.orient?this.height=t-(null!=(n=this.option.cellPaddingTop)?n:0):"bottom"===this.orient?this.height=t-(null!=(o=this.option.cellPaddingBottom)?o:0):"left"!==this.orient&&"right"!==this.orient||(this.height=t-(this.bodyChartCellPadding[2]+this.bodyChartCellPadding[0])),this.updateScaleRange(),this.computeData();let a=(0,d.sG)(this.option),s=this.getUpdateAttribute();s.verticalFactor="top"===this.orient||"right"===this.orient?-1:1,this.component.setAttributes((0,l.Z)({},a,s)),this.component.setAttributes(this.setLayoutStartPosition({x:this.x,y:this.y})),this.overlap()}overlap(){!function(e,t){let i=e.find(e=>"axis-label-container-layer-0"===e.name,!0),r=e.find(e=>"axis-label-container-layer-1"===e.name,!0);T(i?i.getChildren():[],t),T(r?r.getChildren():[],t)}(this.component,this)}getLayoutRect(){return{width:this.width,height:this.height}}getUpdateAttribute(){var e;this.table.tableNoFrameHeight,this.table.tableNoFrameWidth;let{width:t,height:i}=this.getLayoutRect(),r=u(this.orient),n="left"===(e=this.orient)||"right"===e,l={x:0,y:0},o=0;r?(l={x:t,y:0},o=t):n&&(l={x:0,y:i},o=i);let a="top"===this.orient||"bottom"===this.orient?i:t;return{start:{x:0,y:0},end:l,title:{text:this.option.title.text,maxWidth:this._getTitleLimit(r)},items:this.getLabelItems(o),verticalLimitSize:a,verticalMinSize:a}}getLabelItems(e){return[this.tickData.latestData.map(t=>({id:t.value,label:t.value,value:0===e?0:this.scale.dataToPosition([t.value])/e,rawValue:t.value})).filter(e=>e.value>=0&&e.value<=1)]}updateScaleRange(){var e,t,i,r,n,l,a,s;let h=null!=(t=null==(e=this.option.innerOffset)?void 0:e.right)?t:0,d=null!=(r=null==(i=this.option.innerOffset)?void 0:i.left)?r:0,c=null!=(l=null==(n=this.option.innerOffset)?void 0:n.top)?l:0,p=null!=(s=null==(a=this.option.innerOffset)?void 0:a.bottom)?s:0,{width:g,height:f}=this.getLayoutRect(),m=this.option.inverse||!1,b=[0,0];u(this.orient)?(0,o.Z)(g)&&(b=m?[g-h,d]:[d,g-h]):(0,o.Z)(f)&&(b=m?[c,f-p]:[f-p,c]),this.scale.updateRange(b)}setLayoutStartPosition(e){let{x:t,y:i}=e;return(0,o.Z)(t)&&(t+=Number("left"===this.orient)*this.getLayoutRect().width),(0,o.Z)(i)&&(i+=Number("top"===this.orient)*this.getLayoutRect().height),{x:t,y:i}}_getTitleLimit(e){var t,i,r;if(this.option.title.visible&&(0,a.Z)(null==(t=this.option.title.style)?void 0:t.maxLineWidth)){let t=(null==(i=this.option.title.style)?void 0:i.angle)||0;if((null==(r=this.option.title)?void 0:r.autoRotate)&&(0,a.Z)(this.option.title.angle)&&(t="left"===this.option.orient?-90:90),e){let e=this.getLayoutRect().width,i=Math.abs(Math.cos((0,s.M4)(t)));return i<1e-6?1/0:e/i}let n=this.getLayoutRect().height,l=Math.abs(Math.sin((0,s.M4)(t)));return l<1e-6?1/0:n/l}return null}getScale(){return this.scale._scale}getDomainSpec(){return this.scale.domain}}function P(e,t){let i;return"left"===e?i=t.axisStyle.leftAxisStyle:"right"===e?i=t.axisStyle.rightAxisStyle:"top"===e?i=t.axisStyle.topAxisStyle:"bottom"===e&&(i=t.axisStyle.bottomAxisStyle),(0,l.Z)({},t.axisStyle.defaultAxisStyle,i)}var B=i(96241),I=i(83624);function L(e,t){var i,r,n,o,a,s,h,u,c,g,f,m,b,y,v,_,C,x,w,S;let A=(0,l.Z)({},d.b8,e),k=0;!1!==A.tick.visible&&(k=null!=(i=A.tick.width)?i:4);let M=0;if(A.label.visible){if("band"===A.type)A.domain.forEach(e=>{var i,r,n,l,o,a,s,h,u,c,p,g,f,m,b,y;A.label.formatMethod&&(e=A.label.formatMethod(e));let{width:v,height:_}=t.measureText(e,{fontSize:null!=(n=null==(r=null==(i=A.label)?void 0:i.style)?void 0:r.fontSize)?n:d.$M,fontWeight:null!=(a=null==(o=null==(l=A.label)?void 0:l.style)?void 0:o.fontWeight)?a:"normal",fontFamily:null!=(u=null==(h=null==(s=A.label)?void 0:s.style)?void 0:h.fontFamily)?u:d.iR}),C=(null==(p=null==(c=A.label)?void 0:c.style)?void 0:p.maxLineWidth)||1/0,x=(null!=(m=null==(f=null==(g=A.label)?void 0:g.style)?void 0:f.angle)?m:0)+90*("vertical"===(null==(y=null==(b=A.label)?void 0:b.style)?void 0:y.direction));M=Math.max(M,O(Math.min(v,C),_,x).width)});else{let i;if((null==(r=e.sync)?void 0:r.tickAlign)&&(0,B.Z)(null==(n=e.tick)?void 0:n.tickMode))i=e.tick.tickMode();else if((0,p.Z)(e.__ticksForVTable))i=e.__ticksForVTable;else{let e=A.range,t=Math.abs(e.min)>1?Math.round(e.min):e.min,r=Math.abs(e.max)>1?Math.round(e.max):e.max;i=[H(t),H(r)]}i.forEach(e=>{var i,r,n,l,o,a,s,h,u,c,p,g,f,m,b,y;A.label.formatMethod&&(e=A.label.formatMethod(e));let{width:v,height:_}=t.measureText(e,{fontSize:null!=(n=null==(r=null==(i=A.label)?void 0:i.style)?void 0:r.fontSize)?n:d.$M,fontWeight:null!=(a=null==(o=null==(l=A.label)?void 0:l.style)?void 0:o.fontWeight)?a:"normal",fontFamily:null!=(u=null==(h=null==(s=A.label)?void 0:s.style)?void 0:h.fontFamily)?u:d.iR}),C=(null==(p=null==(c=A.label)?void 0:c.style)?void 0:p.maxLineWidth)||1/0,x=(null!=(m=null==(f=null==(g=A.label)?void 0:g.style)?void 0:f.angle)?m:0)+90*("vertical"===(null==(y=null==(b=A.label)?void 0:b.style)?void 0:y.direction));M=Math.max(M,O(Math.min(v,C),_,x).width)})}M+=null!=(o=A.label.space)?o:4}let T=0;if(A.title.visible&&(0,I.Z)(A.title.text)){let{width:i,height:r}=t.measureText(A.title.text,{fontSize:null!=(h=null==(s=null==(a=A.title)?void 0:a.style)?void 0:s.fontSize)?h:d.$M,fontWeight:null!=(g=null==(c=null==(u=A.title)?void 0:u.style)?void 0:c.fontWeight)?g:"normal",fontFamily:null!=(b=null==(m=null==(f=A.title)?void 0:f.style)?void 0:m.fontFamily)?b:d.iR}),n=O(Math.min(i,(null==(v=null==(y=A.label)?void 0:y.style)?void 0:v.maxLineWidth)||1/0),r,null==(C=null==(_=A.title)?void 0:_.style)?void 0:C.angle);T=(("left"===e.orient||"right"===e.orient)&&A.title.autoRotate?n.height:n.width)+(null!=(x=A.title.space)?x:4)}let R=0,E=P(e.orient,t.theme);return"left"===e.orient?R=null!=(w=null==E?void 0:E.cellPaddingLeft)?w:0:"right"===e.orient&&(R=null!=(S=null==E?void 0:E.cellPaddingRight)?S:0),Math.ceil(k+M+T+R+1)}function F(e,t){var i,r,n,o,a,s,h,u,c,g,f,m,b,y,v,_,C,x,w,S;let A=(0,l.Z)({},d.b8,e),k=0;!1!==A.tick.visible&&(k=null!=(i=A.tick.width)?i:4);let M=0;if(A.label.visible){if("band"===A.type)A.domain.forEach(e=>{var i,r,n,l,o,a,s,h,u,c,p,g,f,m,b,y;A.label.formatMethod&&(e=A.label.formatMethod(e));let{width:v,height:_}=t.measureText(e,{fontSize:null!=(n=null==(r=null==(i=A.label)?void 0:i.style)?void 0:r.fontSize)?n:d.$M,fontWeight:null!=(a=null==(o=null==(l=A.label)?void 0:l.style)?void 0:o.fontWeight)?a:"normal",fontFamily:null!=(u=null==(h=null==(s=A.label)?void 0:s.style)?void 0:h.fontFamily)?u:d.iR}),C=(null==(p=null==(c=A.label)?void 0:c.style)?void 0:p.maxLineWidth)||1/0,x=(null!=(m=null==(f=null==(g=A.label)?void 0:g.style)?void 0:f.angle)?m:0)+90*("vertical"===(null==(y=null==(b=A.label)?void 0:b.style)?void 0:y.direction));M=Math.max(M,O(Math.min(v,C),_,x).height)});else{let i;if((null==(r=e.sync)?void 0:r.tickAlign)&&(0,B.Z)(null==(n=e.tick)?void 0:n.tickMode))i=e.tick.tickMode();else if((0,p.Z)(e.__ticksForVTable))i=e.__ticksForVTable;else{let e=A.range,t=Math.abs(e.min)>1?Math.round(e.min):e.min,r=Math.abs(e.max)>1?Math.round(e.max):e.max;i=[H(t),H(r)]}i.forEach(e=>{var i,r,n,l,o,a,s,h,u,c,p,g,f,m,b,y;A.label.formatMethod&&(e=A.label.formatMethod(e));let{width:v,height:_}=t.measureText(e,{fontSize:null!=(n=null==(r=null==(i=A.label)?void 0:i.style)?void 0:r.fontSize)?n:d.$M,fontWeight:null!=(a=null==(o=null==(l=A.label)?void 0:l.style)?void 0:o.fontWeight)?a:"normal",fontFamily:null!=(u=null==(h=null==(s=A.label)?void 0:s.style)?void 0:h.fontFamily)?u:d.iR}),C=(null==(p=null==(c=A.label)?void 0:c.style)?void 0:p.maxLineWidth)||1/0,x=(null!=(m=null==(f=null==(g=A.label)?void 0:g.style)?void 0:f.angle)?m:0)+90*("vertical"===(null==(y=null==(b=A.label)?void 0:b.style)?void 0:y.direction));M=Math.max(M,O(Math.min(v,C),_,x).height)})}M+=null!=(o=A.label.space)?o:4}let T=0;if(A.title.visible&&A.title.text){let{width:i,height:r}=t.measureText(A.title.text,{fontSize:null!=(h=null==(s=null==(a=A.title)?void 0:a.style)?void 0:s.fontSize)?h:d.$M,fontWeight:null!=(g=null==(c=null==(u=A.title)?void 0:u.style)?void 0:c.fontWeight)?g:"normal",fontFamily:null!=(b=null==(m=null==(f=A.title)?void 0:f.style)?void 0:m.fontFamily)?b:d.iR}),n=O(Math.min(i,(null==(v=null==(y=A.label)?void 0:y.style)?void 0:v.maxLineWidth)||1/0),r,null==(C=null==(_=A.title)?void 0:_.style)?void 0:C.angle);T=(("bottom"===e.orient||"top"===e.orient)&&A.title.autoRotate?n.width:n.height)+(null!=(x=A.title.space)?x:4)}let R=0,E=P(e.orient,t.theme);return"top"===e.orient?R=null!=(w=null==E?void 0:E.cellPaddingTop)?w:0:"bottom"===e.orient&&(R=null!=(S=null==E?void 0:E.cellPaddingBottom)?S:0),k+M+T+R+1}function H(e){return"number"!=typeof e&&(e=Number(e)),Number(e.toPrecision(1)).toString()}function O(e,t,i=0){let r=i*Math.PI/180,n=-e/2,l=-t/2,o=e/2,a=-t/2,s=e/2,h=t/2,d=-e/2,u=t/2,c={x:n*Math.cos(r)-l*Math.sin(r),y:n*Math.sin(r)+l*Math.cos(r)},p={x:o*Math.cos(r)-a*Math.sin(r),y:o*Math.sin(r)+a*Math.cos(r)},g={x:s*Math.cos(r)-h*Math.sin(r),y:s*Math.sin(r)+h*Math.cos(r)},f={x:d*Math.cos(r)-u*Math.sin(r),y:d*Math.sin(r)+u*Math.cos(r)},m=Math.min(c.x,p.x,g.x,f.x),b=Math.max(c.x,p.x,g.x,f.x),y=Math.min(c.y,p.y,g.y,f.y);return{width:b-m,height:Math.max(c.y,p.y,g.y,f.y)-y}}var D=i(48530),z=i(75133),W=i(63401);class Z{constructor(e,t){this._emptyTipOption={spaceBetweenTextAndIcon:20,text:"no data",textStyle:{fontSize:14,color:"#000"},icon:{image:'<svg t="1716726614852" class="icon" viewBox="0 0 1194 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2621" width="200" height="200"><path d="M1038.694079 367.237067c13.265507 23.342857-16.633865-40.004445-63.05621-40.004446H219.018794c-26.558738 0-46.46393 13.334815-63.05621 40.004446S0.006238 607.277601 0.006238 650.608819V940.647979a82.351494 82.351494 0 0 0 82.961402 83.349526H1111.702885a82.337632 82.337632 0 0 0 82.975264-83.349526V650.608819c0-43.331218-155.970208-283.371753-155.970208-283.371752zM730.066575 667.284269a136.328386 136.328386 0 0 1-132.738243 133.33429 133.417459 133.417459 0 0 1-132.738243-133.33429v-6.681269a40.6698 40.6698 0 0 0-36.497473-26.66963H73.015044l119.458874-220.02445s23.231965-40.004445 53.103614-40.004446h713.481918c26.544876 0 29.871649 10.008042 46.436207 40.004446L1128.33675 633.947231H769.904682c-26.184476 0-39.838107 7.623855-39.838107 33.337038zM338.505391 210.559919l-89.601086-86.69016a22.178487 22.178487 0 0 1 0-33.26773 21.984425 21.984425 0 0 1 33.170699 0l89.601087 86.676299a22.317102 22.317102 0 0 1 0 33.26773 24.950798 24.950798 0 0 1-33.1707 0z m252.197118-40.059891a25.532983 25.532983 0 0 1-6.639685-16.633865l-3.326773-126.694606A28.263709 28.263709 0 0 1 603.995739 0.515788c13.251646-3.326773 23.204242 10.021904 26.544877 23.342858V153.866163a28.249847 28.249847 0 0 1-23.259688 26.66963c-6.611961-3.312911-13.279369-3.312911-16.578419-10.035765z m235.646421 33.337038a22.372548 22.372548 0 0 1 0-33.337038l86.288175-90.030795a22.039871 22.039871 0 0 1 33.170699 0 22.289379 22.289379 0 0 1 0 33.364761l-82.961401 90.003072a25.962691 25.962691 0 0 1-36.483611 0z" fill="#8a8a8a" p-id="2622"></path></svg>',width:100,height:100}},this.isReleased=!1,this.table=t,this._emptyTipOption=Object.assign(this._emptyTipOption,!0===e?{}:e),(0,C.Z)(this._emptyTipOption.displayMode)||(this.table.isListTable()?this._emptyTipOption.displayMode="basedOnTable":this._emptyTipOption.displayMode="basedOnContainer"),this._emptyTipComponent=this._createOrUpdateEmptyTipComponent(this._getEmptyTipAttrs())}_createOrUpdateEmptyTipComponent(e){if(this._emptyTipComponent)(0,z.X)(e,this._cacheAttrs)||this._emptyTipComponent.setAttributes(e);else{let t=new D.S(e);t.name="emptyTip",this.table.scenegraph.stage.defaultLayer.appendChild(t),this._emptyTipComponent=t,this.bindEvents()}return this._emptyTipComponent}bindEvents(){this._emptyTipComponent.on("click",e=>{let t=new W.FB;this._emptyTipComponent.forEachChildren(e=>{t.union(e.globalAABBBounds)}),t.contains(e.x,e.y)&&this.table.fireListeners("empty_tip_click",e)}),this._emptyTipComponent.on("dblclick",e=>{let t=new W.FB;this._emptyTipComponent.forEachChildren(e=>{t.union(e.globalAABBBounds)}),t.contains(e.x,e.y)&&this.table.fireListeners("empty_tip_dblclick",e)})}resize(){var e;if(!this._emptyTipComponent)return;let{leftHeaderWidth:t,topHeaderHeight:i,width:r,height:n}=this.getWidthAndHeight();this._emptyTipComponent.setAttributes({spaceBetweenTextAndIcon:this._emptyTipOption.spaceBetweenTextAndIcon,x:this.table.tableX+t,y:this.table.tableY+i,width:r,height:n,text:Object.assign(Object.assign({text:this._emptyTipOption.text},this._emptyTipOption.textStyle),{fill:null==(e=this._emptyTipOption.textStyle)?void 0:e.color}),icon:Object.assign({},this._emptyTipOption.icon)})}release(){this._emptyTipComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this._emptyTipComponent),this._emptyTipComponent=null,this.isReleased=!0}resetVisible(){(this.table.recordsCount&&0!==this.table.recordsCount||this.table.internalProps.layoutMap.rowCount!==this.table.internalProps.layoutMap.columnHeaderLevelCount)&&this.table.internalProps.layoutMap.colCount!==this.table.internalProps.layoutMap.rowHeaderLevelCount?this.table.scenegraph.stage.defaultLayer.children.includes(this._emptyTipComponent)&&this.table.scenegraph.stage.defaultLayer.removeChild(this._emptyTipComponent):this.table.scenegraph.stage.defaultLayer.children.includes(this._emptyTipComponent)||this.table.scenegraph.stage.defaultLayer.appendChild(this._emptyTipComponent)}getWidthAndHeight(){let e=this.table.transpose||!1===this.table.options.indicatorsAsCol?this.table.getFrozenColsWidth():0,t=!this.table.transpose||this.table.options.indicatorsAsCol?this.table.getFrozenRowsHeight():0;return{leftHeaderWidth:e,topHeaderHeight:t,width:("basedOnContainer"!==this._emptyTipOption.displayMode&&this.table.columnHeaderLevelCount>0&&this.table.colCount>this.table.rowHeaderLevelCount?this.table.getDrawRange().width:this.table.tableNoFrameWidth)-e-this.table.getTheme().scrollStyle.width,height:("basedOnContainer"!==this._emptyTipOption.displayMode&&this.table.rowHeaderLevelCount>0&&this.table.rowCount>this.table.columnHeaderLevelCount?this.table.getDrawRange().height:this.table.tableNoFrameHeight)-t-this.table.getTheme().scrollStyle.width}}_getEmptyTipAttrs(){var e;let{leftHeaderWidth:t,topHeaderHeight:i,width:r,height:n}=this.getWidthAndHeight();return{spaceBetweenTextAndIcon:this._emptyTipOption.spaceBetweenTextAndIcon,x:this.table.tableX+t,y:this.table.tableY+i,width:r,height:n,text:Object.assign(Object.assign({text:this._emptyTipOption.text},this._emptyTipOption.textStyle),{fill:null==(e=this._emptyTipOption.textStyle)?void 0:e.color}),icon:Object.assign({},this._emptyTipOption.icon)}}}var N=i(65755),$=i(25397),j=i(3290),G=i(14604),V=i(78921),U=i(44561),K=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};let X={orient:"bottom",position:"middle",padding:30,title:{visible:!1,padding:0,textStyle:{fontSize:14,fill:"#000000",fontWeight:"normal"},space:12},item:{visible:!0,spaceCol:10,spaceRow:10,padding:2,background:{state:{selectedHover:{fill:"gray",fillOpacity:.7},unSelectedHover:{fill:"gray",fillOpacity:.2}}},shape:{space:4,state:{unSelected:{fillOpacity:.5}}},label:{space:4,style:{fill:"#89909D",fontSize:14},state:{unSelected:{fillOpacity:.5}}}},allowAllCanceled:!0,visible:!0};var Y=i(57198),q=i(76352);class J{constructor(e,t){var i,r,n,l;this.table=t,this.option=(0,N.Z)(e),this.orient=null!=(i=e.orient)?i:"left",this.visible=null==(r=e.visible)||r,this.position=null!=(n=e.position)?n:"middle",this.selectedData=null!=(l=e.defaultSelected)?l:null,this.createComponent(),this.initEvent()}createComponent(){let e=this.getLegendAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight}),t=new j.W((0,l.Z)({},e,{defaultSelected:this.selectedData,disableTriggerEvent:this.table.options.disableInteraction}));t.name="legend",this.legendComponent=t,!1===this.visible&&(t.setAttributes({visible:!1,visibleAll:!1}),t.hideAll()),this.table.scenegraph.stage.defaultLayer.appendChild(t),this.adjustTableSize(e)}resize(){if(!this.legendComponent||!1===this.visible)return;let e=this.getLegendAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight});this.legendComponent.setAttributes(e),this.adjustTableSize(this.legendComponent.attribute)}adjustTableSize(e){var t,i;if(!this.legendComponent||!1===this.visible)return;let r=isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,n=isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0;if(r<=0||n<=0)return;let l=this.table.tableNoFrameWidth,o=this.table.tableNoFrameHeight,a=(0,q.u)(null!=(i=null!=(t=e.padding)?t:this.option.padding)?i:10),s=0,h=0;"left"===this.orient?(s=a[3],h=0,r+=a[1]+a[3]):"top"===this.orient?(s=0,h=a[0],n+=a[0]+a[2]):"right"===this.orient?(s=l-r-a[1],h=0,r+=a[1]+a[3]):"bottom"===this.orient&&(s=0,h=o-n-a[2],n+=a[0]+a[2]);let d="bottom"===this.orient||"top"===this.orient?"horizontal":"vertical",u=this.position,c=0,p=0;"horizontal"===d?c="middle"===u?(l-r)/2:"end"===u?l-r-a[1]:a[3]:p="middle"===u?(o-n)/2:"end"===u?o-n-a[2]:a[0],this.legendComponent.setAttributes({dx:c,dy:p,x:s,y:h}),"left"===this.orient?(this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(r),this.table.tableX+=Math.ceil(r)):"top"===this.orient?(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(n),this.table.tableY+=Math.ceil(n)):"right"===this.orient?this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(r):"bottom"===this.orient&&(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(n))}getLegendAttributes(e){var t,i;let r="bottom"===this.orient||"top"===this.orient?"horizontal":"vertical",n=function(e,t){let i=(0,l.Z)({},X,e),{title:r={},item:n={},pager:o={},background:a={},type:s,id:h,visible:d,orient:u,position:c,data:p,filter:g,regionId:f,regionIndex:m,seriesIndex:b,seriesId:y,padding:v}=i,_=K(i,["title","item","pager","background","type","id","visible","orient","position","data","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return r.visible&&(_.title=(0,U.qi)(r)),(0,M.Z)(n.focusIconStyle)||(0,U.h_)(n.focusIconStyle),(0,U.ro)(n.shape),(0,U.ro)(n.label),(0,U.ro)(n.value),(0,U.ro)(n.background),(0,V.hU)(n.maxWidth)&&(n.maxWidth=Number(n.maxWidth.substring(0,n.maxWidth.length-1))*t.width/100),(0,V.hU)(n.width)&&(n.width=Number(n.width.substring(0,n.width.length-1))*t.width/100),(0,V.hU)(n.height)&&(n.height=Number(n.height.substring(0,n.height.length-1))*t.width/100),_.item=n,(0,M.Z)(o.textStyle)||(0,U.h_)(o.textStyle),(0,U.ro)(o.handler),_.pager=o,a.visible&&!(0,M.Z)(a.style)&&((0,l.Z)(_,a.style),(0,C.Z)(a.padding)&&(_.padding=a.padding)),_}(this.option,e),o=(0,q.u)(null!=(i=null!=(t=n.padding)?t:this.option.padding)?i:10);return Object.assign({layout:r,items:this.getLegendItems(),maxWidth:e.width-o[1]-o[3],maxHeight:e.height-o[0]-o[2]},n)}getLegendItems(){return this.option.data}initEvent(){this.legendComponent&&(this.legendComponent.addEventListener(G.dk.legendItemClick,e=>{let t=(0,$.Z)(e,"detail.currentSelected");this.table.fireListeners(Y.B.LEGEND_ITEM_CLICK,{model:this,value:t,event:e})}),this.legendComponent.addEventListener(G.dk.legendItemHover,e=>{let t=(0,$.Z)(e,"detail");this.table.fireListeners(Y.B.LEGEND_ITEM_HOVER,{model:this,value:t,event:e})}),this.legendComponent.addEventListener(G.dk.legendItemUnHover,e=>{let t=(0,$.Z)(e,"detail");this.table.fireListeners(Y.B.LEGEND_ITEM_UNHOVER,{model:this,value:t,event:e})}),this.legendComponent.addEventListener("legendItemAttributeUpdate",e=>{this.table.scenegraph.updateNextFrame()}))}getLegendBounds(){return{width:isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,height:isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0}}release(){this.legendComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this.legendComponent),this.legendComponent=null}}var Q=i(14217),ee=i(39489),et=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};let ei={orient:"right",position:"middle",padding:30,title:{visible:!1,padding:0,textStyle:{fontSize:14,fontWeight:"normal",fill:{type:"palette",key:"titleFontColor"}},space:12},handler:{visible:!0},startText:{style:{fontSize:14,fontWeight:"normal",fill:{type:"palette",key:"labelFontColor"}}},endText:{style:{fontSize:14,fontWeight:"normal",fill:{type:"palette",key:"labelFontColor"}}},handlerText:{style:{fontSize:14,fontWeight:"normal",fill:{type:"palette",key:"labelFontColor"}}}},er={horizontal:Object.assign(Object.assign({},ei),{rail:{width:200,height:8,style:{fill:"rgba(0,0,0,0.04)"}}}),vertical:Object.assign(Object.assign({},ei),{rail:{width:8,height:200,style:{fill:"rgba(0,0,0,0.04)"}}})},en={horizontal:Object.assign({sizeBackground:{fill:"#cdcdcd"},track:{style:{fill:"rgba(20,20,20,0.1)"}},rail:{width:200,height:4,style:{fill:"rgba(0,0,0,0.04)"}}},ei),vertical:Object.assign({sizeBackground:{fill:"#cdcdcd"},track:{style:{fill:"rgba(20,20,20,0.1)"}},rail:{width:4,height:200,style:{fill:"rgba(0,0,0,0.04)"}}},ei)};class el{constructor(e,t){var i,r,n,l;this.table=t,this.option=(0,N.Z)(e),this.orient=null!=(i=e.orient)?i:"left",this.visible=null==(r=e.visible)||r,this.position=null!=(n=e.position)?n:"middle",this.selectedData=null!=(l=e.defaultSelected)?l:null,this.createComponent(),this.initEvent()}createComponent(){let e,t=this.getLegendAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight});(e="color"===this.option.type?new Q.e((0,l.Z)({},t,{slidable:!0})):new ee.D((0,l.Z)({},t,{slidable:!0}))).name="legend",this.legendComponent=e,!1===this.visible&&(e.setAttributes({visible:!1,visibleAll:!1}),e.hideAll()),this.table.scenegraph.stage.defaultLayer.appendChild(e),this.adjustTableSize(t)}resize(){this.legendComponent&&!1!==this.visible&&(this.legendComponent.setAttributes({width:this.table.tableNoFrameWidth,height:this.table.tableNoFrameHeight}),this.adjustTableSize(this.legendComponent.attribute))}adjustTableSize(e){var t,i;if(!this.legendComponent||!1===this.visible)return;let r=isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,n=isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0;if(r<=0||n<=0)return;let l=this.table.tableNoFrameWidth,o=this.table.tableNoFrameHeight,a=(0,q.u)(null!=(i=null!=(t=e.padding)?t:this.option.padding)?i:10),s=0,h=0;"left"===this.orient?(s=a[3],h=0,r+=a[1]+a[3]):"top"===this.orient?(s=0,h=a[0],n+=a[0]+a[2]):"right"===this.orient?(s=l-r-a[1],h=0,r+=a[1]+a[3]):"bottom"===this.orient&&(s=0,h=o-n-a[2],n+=a[0]+a[2]);let d="bottom"===this.orient||"top"===this.orient?"horizontal":"vertical",u=this.position,c=0,p=0;"horizontal"===d?c="middle"===u?(l-r)/2:"end"===u?l-r-a[1]:a[3]:p="middle"===u?(o-n)/2:"end"===u?o-n-a[2]:a[0],this.legendComponent.setAttributes({dx:c,dy:p,x:s,y:h}),"left"===this.orient?(this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(r),this.table.tableX+=Math.ceil(r)):"top"===this.orient?(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(n),this.table.tableY+=Math.ceil(n)):"right"===this.orient?this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(r):"bottom"===this.orient&&(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(n))}getLegendAttributes(e){let t="bottom"===this.orient||"top"===this.orient?"horizontal":"vertical",i="horizontal"===t?"bottom":this.orient;return Object.assign(Object.assign({},function(e,t){let i=(0,l.Z)({},("color"===e.type?er:en)["bottom"===e.orient||"top"===e.orient?"horizontal":"vertical"],e),{title:r={},handler:n={},rail:o={},track:a={},startText:s,endText:h,handlerText:d,sizeBackground:u,background:c={},type:p,id:g,visible:f,orient:m,position:b,data:y,defaultSelected:v,field:_,filter:x,regionId:w,regionIndex:S,seriesIndex:A,seriesId:k,padding:T}=i,R=et(i,["title","handler","rail","track","startText","endText","handlerText","sizeBackground","background","type","id","visible","orient","position","data","defaultSelected","field","filter","regionId","regionIndex","seriesIndex","seriesId","padding"]);return r.visible&&(R.title=(0,U.qi)(r)),R.showHandler=!1!==n.visible,(0,M.Z)(n.style)||(R.handlerStyle=(0,U.h_)(n.style)),(0,C.Z)(o.width)&&(R.railWidth=o.width),(0,C.Z)(o.height)&&(R.railHeight=o.height),(0,M.Z)(o.style)||(R.railStyle=(0,U.h_)(o.style)),(0,M.Z)(a.style)||(R.trackStyle=(0,U.h_)(a.style)),R.startText=(0,U.ro)(s),R.endText=(0,U.ro)(h),R.handlerText=(0,U.ro)(d),(0,M.Z)(u)||(R.sizeBackground=(0,U.h_)(u)),c.visible&&!(0,M.Z)(c.style)&&((0,l.Z)(R,c.style),(0,C.Z)(c.padding)&&(R.padding=c.padding)),R}(this.option,0)),{layout:t,align:i,min:this.option.min,max:this.option.max,value:this.option.value,["color"===this.option.type?"colors":"sizeRange"]:"color"===this.option.type?this.option.colors:this.option.sizeRange})}initEvent(){this.legendComponent&&this.legendComponent.addEventListener("change",e=>{let t=(0,$.Z)(e,"detail.value");this.table.fireListeners(Y.B.LEGEND_CHANGE,{model:this,value:t,event:e}),this.table.scenegraph.updateNextFrame()})}getLegendBounds(){return{width:isFinite(this.legendComponent.AABBBounds.width())?this.legendComponent.AABBBounds.width():0,height:isFinite(this.legendComponent.AABBBounds.height())?this.legendComponent.AABBBounds.height():0}}release(){this.legendComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this.legendComponent),this.legendComponent=null}}function eo(e,t){return"color"===e.type||"size"===e.type?new el(e,t):new J(e,t)}class ea{constructor(e){this._table=e}release(){this.unbindMenuElement(),this._menuElement&&this._menuElement.release(),this._menuElement=void 0}_getMenuElement(){return this._menuElement||(this._menuElement=this.createMenuElementInternal()),this._menuElement}bindMenuElement(e,t,i){return this._getMenuElement().bindToCell(this._table,e,t,i)}unbindMenuElement(){this._getMenuElement().unbindFromCell()}pointInMenuElement(e,t){return this._getMenuElement().pointInMenuElement(e,t)}getRootElement(){return this._getMenuElement().rootElement}}var es=i(50848),eh=i(37106);let ed="vtable__menu-element",eu=`${ed}--hidden`,ec=`${ed}--shown`;class ep{constructor(e){var t,i,r;this._handler=new es.b,this._rootElement=(0,eh.a)("div",[ed,eu]),this._rootElement.addEventListener("wheel",e=>{e.stopPropagation()}),null==(t=this._rootElement)||t.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault()}),null==(i=this._rootElement)||i.addEventListener("click",t=>{if(t.stopPropagation(),t.preventDefault(),this._rootElement.classList.contains(eu))return;let{col:i,row:r,dropDownIndex:n,menuKey:l,text:o,hasChildren:a}=t.target;if("number"!=typeof n||a)return void t.stopPropagation();let s=e.isPivotTable()?e.internalProps.layoutMap.getPivotDimensionInfo(i,r):e.getHeaderField(i,r),h=e._dropDownMenuIsHighlight(i,r,n);e.fireListeners(Y.B.DROPDOWN_MENU_CLICK,{col:i,row:r,field:s,menuKey:l,text:o,highlight:h,cellLocation:e.getCellLocation(i,r),event:t}),e.fireListeners(Y.B.DROPDOWN_MENU_CLEAR,null),e.fireListeners(Y.B.HIDE_MENU,null),t.stopPropagation()}),null==(r=this._rootElement)||r.addEventListener("mousemove",e=>{this._rootElement.classList.contains(eu)||e.stopPropagation()})}get rootElement(){return this._rootElement}release(){this.unbindFromCell();let e=this._rootElement;(null==e?void 0:e.parentElement)&&e.parentElement.removeChild(e),this._handler.release(),delete this._rootElement}bindToCell(e,t,i,r){let n=this._rootElement;if(this._menuInstanceInfo=r,null==n||n.classList.remove(ec),null==n||n.classList.add(eu),this._canBindToCell(e,t,i)){if(n.innerHTML="",n.appendChild(r.content),this._bindCell(e,t,i,r.position,r.referencePosition))return null==n||n.classList.add(ec),null==n||n.classList.remove(eu),!0}else this.unbindFromCell();return!1}unbindFromCell(){let e=this._rootElement;this._menuInstanceInfo=void 0,(null==e?void 0:e.parentElement)&&(e.classList.remove(ec),e.classList.add(eu))}_canBindToCell(e,t,i){var r;let n=e.getCellRangeRelativeRect({col:t,row:i}),l=null!=(r=e.internalProps.menu.parentElement)?r:e.getElement(),{top:o,bottom:a,left:s,right:h}=n;if(e.isFrozenCell(t,i))return!0;if(a<e.getFrozenRowsHeight()||h<e.getFrozenColsWidth()||s>e.tableNoFrameWidth-e.getRightFrozenColsWidth()||o>e.tableNoFrameHeight-e.getBottomFrozenRowsHeight())return!1;let{offsetHeight:d,offsetWidth:u}=l;return!(d<o)&&!(u<s)}_bindCell(e,t,i,r,n){var l;let o=this._rootElement,a=null!=(l=e.internalProps.menu.parentElement)?l:e.getElement(),{width:s,height:h,left:d,top:u}=a.getBoundingClientRect();if(o){let t,i;o.parentElement!==a&&a.appendChild(o),o.style.left="0px",o.style.maxWidth=`${.8*s}px`;let l=o.clientWidth,c=o.clientHeight;r&&(t=r.x,i=r.y),n&&(t=n.rect.right-l,i=n.rect.bottom),i+c>h&&(i=h-c,t+=l-2),i<0&&(i/=2);let p=0,g=0;if(e.getElement()!==a){let{left:t,top:i}=e.getElement().getBoundingClientRect();p=i-u,g=t-d}return o.style.top=`${i+p}px`,t<0?t=0:t+l>s&&(t=s-l),o.style.left=`${t+g}px`,!0}return!1}pointInMenuElement(e,t){let{x:i,y:r,width:n,height:l}=this._rootElement.getBoundingClientRect();return e>i-5&&e<i+n+5&&t>r-5&&t<r+l+5}}var eg=i(29020);class ef extends ea{createMenuElementInternal(){return new eg.F(this._table)}}class em extends ea{createMenuElementInternal(){return new ep(this._table)}}var eb=i(35759);let ey={"dropdown-menu":function(e){return new ef(e)},"context-menu":function(e){return new ef(e)},container:e=>new em(e)};class ev{constructor(e){this._table=e,this._menuInstances={},this._bindTableEvent(e)}release(){let e=this._menuInstances;for(let t in e)e[t].release();delete this._menuInstances,this._attachInfo=null}_bindToCell(e,t,i,r){var n;let l=this._attachInfo,o=this._getMenuInstanceInfo(e,t,i,r);if(!l||o&&l.instance===o.instance||(null==(n=l.instance)||n.unbindMenuElement(),this._attachInfo=null),!o)return;let{instance:a,info:s}=o;if(a&&a.bindMenuElement(e,t,s)){let i=-1===e&&-1===t?{start:{col:-1,row:-1},end:{col:-1,row:-1}}:this._table.getCellRange(e,t);this._attachInfo={range:i,instance:a}}}_unbindFromCell(){let e=this._attachInfo;if(!e)return;let{instance:t}=e;null==t||t.unbindMenuElement(),this._attachInfo=null}_isBindToCell(e,t){let i=this._attachInfo;return!!i&&(0,eb._Z)(i.range,e,t)}pointInMenuElement(e,t){if(!this._attachInfo)return!1;let{instance:i}=this._attachInfo;return i.pointInMenuElement(e,t)}_bindTableEvent(e){e.on(Y.B.DROPDOWN_ICON_CLICK,e=>{this._attachInfo&&this._isBindToCell(e.col,e.row)?this._unbindFromCell():this._bindToCell(e.col,e.row,"dropdown-menu")}),e.on(Y.B.DROPDOWN_MENU_CLEAR,e=>{this._unbindFromCell()}),e.on(Y.B.CONTEXTMENU_CELL,t=>{var i,r,n,l;if("html"===(null==(i=e.internalProps.menu)?void 0:i.renderMode)){let i=e._getMouseAbstractPoint(t.event),o=null;i.inTable&&"function"==typeof(null==(r=e.internalProps.menu)?void 0:r.contextMenuItems)?o=e.internalProps.menu.contextMenuItems(e.getHeaderField(t.col,t.row),t.row,t.col,e):i.inTable&&Array.isArray(null==(n=e.internalProps.menu)?void 0:n.contextMenuItems)&&(o=null==(l=e.internalProps.menu)?void 0:l.contextMenuItems),this._bindToCell(t.col,t.row,"context-menu",{content:o,position:{x:i.x,y:i.y}})}}),e.on(Y.B.CONTEXTMENU_CANVAS,t=>{var i,r,n,l;if("html"===(null==(i=e.internalProps.menu)?void 0:i.renderMode)){let i=e._getMouseAbstractPoint(t.event),o=null;i.inTable&&"function"==typeof(null==(r=e.internalProps.menu)?void 0:r.contextMenuItems)?o=e.internalProps.menu.contextMenuItems(e.getHeaderField(t.col,t.row),t.row,t.col,e):i.inTable&&Array.isArray(null==(n=e.internalProps.menu)?void 0:n.contextMenuItems)&&(o=null==(l=e.internalProps.menu)?void 0:l.contextMenuItems),this._bindToCell(-1,-1,"context-menu",{content:o,position:{x:i.x,y:i.y}})}})}_getMenuInstanceInfo(e,t,i,r){let n=this._table,l=this._menuInstances,o=function(e,t,i,r,n){var l,o,a;if(-1===t&&-1===i&&"context-menu"===r)return(null==n?void 0:n.content)?{type:r,position:n.position,referencePosition:null!=(l=n.referencePosition)?l:{rect:{left:0,right:0,top:0,bottom:0,width:0,height:0}},content:n.content}:null;let{lineHeight:s,textBaseline:h,textStick:d}=e._getCellStyle(t,i),u=e.getCellRangeRelativeRect(e.getCellRange(t,i));d&&(u=e.getVisibleCellRangeRelativeRect({col:t,row:i}));let{left:c,right:p,bottom:g,top:f,width:m,height:b}=u;if(e.isHeader(t,i)&&({left:c,right:p,bottom:g,top:f,width:m,height:b}=e.internalProps.headerHelper.getDropDownIconRect(u,s,h||"middle")),null==n?void 0:n.content)return{type:r,position:n.position,referencePosition:null!=(o=n.referencePosition)?o:{rect:{left:c,right:p,top:f,bottom:g,width:m,height:b}},content:n.content};if("dropdown-menu"===r){let n=e.globalDropDownMenu,l=e._getHeaderLayoutMap(t,i);n=null!=(a=l.dropDownMenu)?a:n;let o=l.pivotInfo;return"function"==typeof n&&(n=n({row:i,col:t,table:e})),{type:r,referencePosition:{rect:{left:c,right:p,top:f,bottom:g,width:m,height:b}},content:n,pivotInfo:o}}return null}(n,e,t,i,r);return o?{instance:l&&l[i]||l&&(l[i]=ey[i](n)),type:i,info:o}:null}containElement(e){var t;for(let i in this._menuInstances)if(null==(t=this._menuInstances[i].getRootElement())?void 0:t.contains(e))return!0;return!1}}var e_=i(88919);class eC{constructor(e,t){this.isReleased=!1,this.table=t,this._titleOption=(0,l.Z)({orient:"top"},e),!1!==e.visible&&(this._titleComponent=this._createOrUpdateTitleComponent(this._getTitleAttrs()))}_createOrUpdateTitleComponent(e){if(this._titleComponent)(0,z.X)(e,this._cacheAttrs)||this._titleComponent.setAttributes(e);else{let t=new e_.D(e);t.name="title",this.table.scenegraph.stage.defaultLayer.appendChild(t),this._titleComponent=t}return this._adjustTableSize(this._titleComponent.attribute),this._titleComponent}resize(){var e,t,i,r,n;if(!this._titleComponent)return;let l=(0,q.u)(null!=(e=this._titleOption.padding)?e:10),o=null!=(t=this._titleOption.width)?t:("adaptive"===this.table.widthMode?this.table.tableNoFrameWidth:Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width))-l[1]-l[3],a=null!=(i=this._titleOption.height)?i:("adaptive"===this.table.heightMode?this.table.tableNoFrameHeight:Math.min(this.table.tableNoFrameHeight,this.table.getDrawRange().height))-l[0]-l[2];this._titleComponent.setAttributes({x:(null!=(r=this._titleOption.x)?r:"right"===this._titleOption.orient)?this.table.tableX+Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width):this.table.tableX,y:(null!=(n=this._titleOption.y)?n:"bottom"===this._titleOption.orient)?this.table.tableY+this.table.tableNoFrameHeight:this.table.tableY,width:"top"===this._titleOption.orient||"bottom"===this._titleOption.orient?o:this._titleOption.width,height:"left"===this._titleOption.orient||"right"===this._titleOption.orient?a:this._titleOption.height,textStyle:Object.assign({width:o},this._titleOption.textStyle),subtextStyle:Object.assign({width:o},this._titleOption.subtextStyle)}),this._adjustTableSize(this._titleComponent.attribute)}_adjustTableSize(e){var t,i,r,n;let l=isFinite(null==(t=this._titleComponent)?void 0:t.AABBBounds.width())?this._titleComponent.AABBBounds.width():0,o=isFinite(null==(i=this._titleComponent)?void 0:i.AABBBounds.height())?this._titleComponent.AABBBounds.height():0;"left"===this._titleOption.orient?(this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(l),this.table.tableX+=Math.ceil(l)):"top"===this._titleOption.orient?(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(o),this.table.tableY+=Math.ceil(o)):"right"===this._titleOption.orient?this.table.tableNoFrameWidth=this.table.tableNoFrameWidth-Math.ceil(l):"bottom"===this._titleOption.orient&&(this.table.tableNoFrameHeight=this.table.tableNoFrameHeight-Math.ceil(o)),this._cacheAttrs=e,"right"!==this._titleOption.orient&&"bottom"!==this._titleOption.orient||this._titleComponent.setAttributes({x:(null!=(r=this._titleOption.x)?r:"right"===this._titleOption.orient)?this.table.tableX+this.table.tableNoFrameWidth:this.table.tableX,y:(null!=(n=this._titleOption.y)?n:"bottom"===this._titleOption.orient)?this.table.tableY+this.table.tableNoFrameHeight:this.table.tableY})}release(){this._titleComponent&&this.table.scenegraph.stage.defaultLayer.removeChild(this._titleComponent),this._titleComponent=null,this.isReleased=!0}_getTitleAttrs(){var e,t,i,r,n,l,o,a,s,h,d;let u=this._titleOption.text||this._titleOption.subtext?10:0,c=(0,q.u)(null!=(e=this._titleOption.padding)?e:u),p=null!=(t=this._titleOption.width)?t:Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width)-c[1]-c[3],g=null!=(i=this._titleOption.height)?i:Math.min(this.table.tableNoFrameHeight,this.table.getDrawRange().height)-c[0]-c[2];return{text:null!=(r=this._titleOption.text)?r:"",subtext:null!=(n=this._titleOption.subtext)?n:"",x:(null!=(l=this._titleOption.x)?l:"right"===this._titleOption.orient)?this.table.tableX+Math.min(this.table.tableNoFrameWidth,this.table.getDrawRange().width):this.table.tableX,y:(null!=(o=this._titleOption.y)?o:"bottom"===this._titleOption.orient)?this.table.tableY+this.table.tableNoFrameHeight:this.table.tableY,width:"top"===this._titleOption.orient||"bottom"===this._titleOption.orient?p:this._titleOption.width,height:"left"===this._titleOption.orient||"right"===this._titleOption.orient?g:this._titleOption.height,minWidth:this._titleOption.minWidth,maxWidth:this._titleOption.maxWidth,minHeight:this._titleOption.minHeight,maxHeight:this._titleOption.maxHeight,padding:this._titleOption.padding,align:null!=(a=this._titleOption.align)?a:"left",verticalAlign:null!=(s=this._titleOption.verticalAlign)?s:"top",textStyle:Object.assign({width:p},this._titleOption.textStyle),subtextStyle:Object.assign({width:p},this._titleOption.subtextStyle),dx:null!=(h=this._titleOption.dx)?h:0,dy:null!=(d=this._titleOption.dy)?d:0}}getComponentGraphic(){return this._titleComponent}}class ex{constructor(e){this._table=e}release(){var e,t;this.unbindTooltipElement(),this._tooltipElement&&(null==(t=(e=this._tooltipElement).release)||t.call(e)),this._tooltipElement=void 0}_getTooltipElement(){return this._tooltipElement||(this._tooltipElement=this.createTooltipElementInternal()),this._tooltipElement}bindTooltipElement(e,t,i,r){return this._getTooltipElement().bindToCell(this._table,e,t,i,r)}moveTooltipElement(e,t,i,r){this._getTooltipElement().move(this._table,e,t,i,r)}unbindTooltipElement(){this._getTooltipElement().unbindFromCell()}locateTooltipElement(e,t,i,r,n){this._getTooltipElement()._locate(this._table,e,t,i,r,n)}}var ew=i(36781),eS=i(74882),eA=i(75665);!function(){if("node"===eS.X.mode)return;let e=document.createElement("style");e.id="vtable-tooltip-styleSheet",e.textContent="\n@keyframes vtable__bubble-tooltip-element--shown-animation {\n	0% {\n		opacity: 0;\n	}\n	100% {\n		opacity: 1;\n	}\n}\n.vtable__bubble-tooltip-element {\n	position: absolute;\n	\n	// pointer-events: none;\n	//user-select: none;\n	max-width: 300px;\n	z-index: 99999;\n\n	background: #FFFFFF;\n    border: 1px solid #E6E8ED;\n    box-sizing: border-box;\n    border-radius: 4px;\n    box-shadow: 0px 2px 4px rgb(27 31 35 / 8%);\n    color: #141414;\n    font-size: 13px;\n}\n.vtable__bubble-tooltip-element--hidden {\n	opacity: 0;\n  pointer-events: none;\n	user-select: none;\n	/* transform: translate(-50%, -50%); */\n	transition: opacity 75ms linear;\n}\n.vtable__bubble-tooltip-element--shown {\n	opacity: 1;\n	/* transform: translate(-50%, -50%); */\n	animation: vtable__bubble-tooltip-element--shown-animation 150ms ease-out;\n}\n.vtable__bubble-tooltip-element__content {\n	/* font-size: .75rem; */\n	padding: 6px 8px;\n	min-height: 1em;\n	line-height: 1.5;\n	width: 100%;\n	display: block;\n	white-space: pre-wrap;\n	margin: 0;\n	box-sizing: border-box;\n	overflow: auto;\n	word-wrap: break-word;\n	position: relative;\n	background-color: #FFF;\n	z-index: 2;\n	border-radius: 4px;\n}\n/*  WebKit Microsoft Edge */\n.vtable__bubble-tooltip-element__content::-webkit-scrollbar {\n  width: 0;\n  height: 0;\n  background-color: transparent;\n}\n/*  Opera Firefox  */\n.vtable__bubble-tooltip-element__content > scrollbar-track {\n  width: 0;\n  height: 0;\n  background-color: transparent;\n}\n/* Internet Explorer 11  Microsoft Edge */\n.vtable__bubble-tooltip-element__content > scrollbar {\n  width: 0;\n  height: 0;\n  background-color: transparent;\n}\n.vtable__bubble-tooltip-element__triangle {\n	/* font-size: .75rem; */\n	position: absolute;\n	width: 10px;\n	height: 10px;\n	display: block;\n	transform: rotate(45deg);\n    transform-origin: 50% 50% 0;\n	z-index: 1;\n	background-color: #FFF;\n	border: 1px solid #E6E8ED;\n}\n",document.head.appendChild(e)}();let ek="vtable__bubble-tooltip-element",eM=`${ek}__content`,eT=`${ek}__triangle`,eR=`${ek}--hidden`,eE=`${ek}--shown`;class eP{constructor(){this._handler=new es.b;let e=this._rootElement=(0,eh.a)("div",[ek,eR]),t=(0,eh.a)("div",[eM]),i=(0,eh.a)("span",[eT]);e.appendChild(i),e.appendChild(t),this._messageElement=e.querySelector(`.${eM}`)||void 0,this._triangleElement=e.querySelector(`.${eT}`)||void 0,e.addEventListener("mousemove",()=>{this._disappearDelayId&&clearTimeout(this._disappearDelayId)}),e.addEventListener("mouseleave",()=>{this._disappearDelay=void 0,this.unbindFromCell()}),t.addEventListener("wheel",e=>{e.stopPropagation()}),t.addEventListener("copy",e=>{(0,eA.Ed)(t)&&e.stopPropagation()})}bindToCell(e,t,i,r,n){var l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w;this._disappearDelay=null==r?void 0:r.disappearDelay,this._disappearDelayId&&clearTimeout(this._disappearDelayId);let S=this._rootElement,A=this._messageElement,k=this._triangleElement;if(null==S||S.classList.remove(eE),null==S||S.classList.add(eR),this._canBindToCell(e,t,i)){if(A.setAttribute("style",""),k.setAttribute("style",""),(null==r?void 0:r.className)&&S.classList.add(r.className),(null==(l=null==r?void 0:r.style)?void 0:l.bgColor)&&(A.style.backgroundColor=null==(o=null==r?void 0:r.style)?void 0:o.bgColor),(null==(a=null==r?void 0:r.style)?void 0:a.bgColor)&&(k.style.backgroundColor=null==(s=null==r?void 0:r.style)?void 0:s.bgColor),k.style.display=!0===(null==(h=null==r?void 0:r.style)?void 0:h.arrowMark)?"block":"none",(null==(d=null==r?void 0:r.style)?void 0:d.fontSize)&&(A.style.fontSize=(null!=(c=null==(u=null==r?void 0:r.style)?void 0:u.fontSize)?c:12)+"px"),(null==(p=null==r?void 0:r.style)?void 0:p.fontFamily)&&(A.style.fontFamily=null==(g=null==r?void 0:r.style)?void 0:g.fontFamily),(null==(f=null==r?void 0:r.style)?void 0:f.color)&&(A.style.color=null==(m=null==r?void 0:r.style)?void 0:m.color),(null==(b=null==r?void 0:r.style)?void 0:b.padding)&&(A.style.padding=`${null==(y=null==r?void 0:r.style)?void 0:y.padding.join("px ")}px`),(null==(v=null==r?void 0:r.style)?void 0:v.maxHeight)&&(A.style.maxHeight=`${null==(_=null==r?void 0:r.style)?void 0:_.maxHeight}px`),(null==(C=null==r?void 0:r.style)?void 0:C.maxWidth)&&(A.style.maxWidth=`${null==(x=null==r?void 0:r.style)?void 0:x.maxWidth}px`),A&&(A.textContent=null==r?void 0:r.content),this._bindToCell(e,t,i,null==r?void 0:r.position,null==r?void 0:r.referencePosition,n,null==(w=null==r?void 0:r.style)?void 0:w.arrowMark))return null==S||S.classList.add(eE),null==S||S.classList.remove(eR),!0}else this.unbindFromCell();return!1}release(){var e,t;this.unbindFromCell();let i=this._rootElement;(null==i?void 0:i.parentElement)&&i.parentElement.removeChild(i),null==(t=null==(e=this._handler)?void 0:e.release)||t.call(e),delete this._rootElement,delete this._messageElement}move(e,t,i,r,n){let l=this._rootElement;this._canBindToCell(e,t,i)?(this._bindToCell(e,t,i,null==r?void 0:r.position,null==r?void 0:r.referencePosition,n),null==l||l.classList.add(eE),null==l||l.classList.remove(eR)):this.unbindFromCell()}unbindFromCell(){var e;if(this._disappearDelay)this._disappearDelayId=setTimeout(()=>{let e=this._rootElement;(null==e?void 0:e.parentElement)&&(e.classList.remove(eE),e.classList.add(eR))},null!=(e=this._disappearDelay)?e:0);else{let e=this._rootElement;(null==e?void 0:e.parentElement)&&(e.classList.remove(eE),e.classList.add(eR))}}_canBindToCell(e,t,i){let r=e.getCellRangeRelativeRect({col:t,row:i}),n=e.getElement(),{bottom:l,left:o,right:a,top:s}=r;if(e.isFrozenCell(t,i))return!0;if(l<e.getFrozenRowsHeight()||a<e.getFrozenColsWidth()||o>e.tableNoFrameWidth-e.getRightFrozenColsWidth()||s>e.tableNoFrameHeight-e.getBottomFrozenRowsHeight())return!1;let{offsetHeight:h,offsetWidth:d}=n;return!(s>h)&&!(o>d)}_bindToCell(e,t,i,r,n,l,o){let a=this._rootElement,s=e.getCellRangeRelativeRect({col:t,row:i}),h=e.internalProps.tooltip.parentElement,d=e.internalProps.element.offsetWidth,{width:u}=s;if(a){let s,c;a.parentElement!==h&&h.appendChild(a),a.style.left="0px";let p=Math.min(.8*d,4*u);a.style.maxWidth=`${p}px`;let g=a.clientWidth,f=a.clientHeight;if(!r&&!n)return!1;{let a=this.getComputedPosition(e,t,i,r,n,l,o);c=a.x,s=a.y}a.style.left=`${c}px`,a.style.top=`${s}px`,(0,eA.tq)()&&(a.style.fontSize="11px");let{x1:m,x2:b,y1:y,y2:v}=e.stateManager.menu.bounds,_=c,C=s;return!(e.stateManager.menu.isShow&&m<_+g&&b>_&&v>C&&y<_+f)}return!1}getComputedPosition(e,t,i,r,n,l,o){var a;let s,h,d=this._rootElement,u=e.getCellRangeRelativeRect({col:t,row:i}),{x:c,y:p}=e.internalProps.tooltip.parentElement.getBoundingClientRect(),{width:g,height:f,x:m,y:b}=e.internalProps.element.getBoundingClientRect(),{width:y}=u,v=Math.min(.8*g,4*y);d.style.maxWidth=`${v}px`;let _=d.clientWidth,C=d.clientHeight,x=6*!!o;if(r)h=r.x,s=r.y+x,this._triangleElement.style.left="50%",this._triangleElement.style.marginLeft="-5px",this._triangleElement.style.top="-5px";else if(n){let e=null!=(a=n.placement)?a:ew.u.bottom,t=n.rect.left+n.rect.width/2,i=n.rect.top+n.rect.height/2,r=n.rect.top,o=n.rect.bottom,d=n.rect.left,u=n.rect.right,c=0,p=()=>{++c>=4||(this.removeStyleFromTriangle(),e===ew.u.top?(h=t-_/2,s=r-C-x,this._triangleElement.style.left="50%",this._triangleElement.style.marginLeft="-5px",this._triangleElement.style.bottom="-5px",l&&s<0&&(e=ew.u.right,p())):e===ew.u.bottom?(h=t-_/2,s=o+x,this._triangleElement.style.left="50%",this._triangleElement.style.marginLeft="-5px",this._triangleElement.style.top="-5px",l&&s+C>f&&(e=ew.u.left,p())):e===ew.u.left?(s=i-C/2,h=d-_-x,this._triangleElement.style.top="50%",this._triangleElement.style.marginTop="-5px",this._triangleElement.style.right="-5px",l&&h<0&&(e=ew.u.top,p())):e===ew.u.right&&(s=i-C/2,h=u+x,this._triangleElement.style.top="50%",this._triangleElement.style.marginTop="-5px",this._triangleElement.style.left="-5px",l&&h+_>g&&(e=ew.u.bottom,p())))};p()}return l&&(h<0?h=0:h+d.offsetWidth>g&&(h=g-d.offsetWidth)),{x:h+m-c,y:s+b-p}}removeStyleFromTriangle(){this._triangleElement.style.left="",this._triangleElement.style.right="",this._triangleElement.style.top="",this._triangleElement.style.bottom="",this._triangleElement.style.marginLeft="",this._triangleElement.style.marginTop=""}_locate(e,t,i,r,n,l){let o=this.getComputedPosition(e,t,i,r,n,l),a=o.x,s=o.y;this._rootElement.style.left=`${a}px`,this._rootElement.style.top=`${s}px`}}class eB extends ex{createTooltipElementInternal(){return new eP}}let eI={"bubble-tooltip":function(e){return new eB(e)}};class eL{constructor(e,t){this._table=e,this._tooltipInstances={},this._bindTableEvent(e),this.confine=t}release(){var e,t;let i=this._tooltipInstances;for(let r in i)null==(t=null==(e=i[r])?void 0:e.release)||t.call(e);delete this._tooltipInstances,this._attachInfo=null}_bindToCell(e,t,i){var r;let n=this._attachInfo,l=this._getTooltipInstanceInfo(e,t);if(!n||l&&n.instance===l||(null==(r=n.instance)||r.unbindTooltipElement(),this._attachInfo=null),l&&l&&l.bindTooltipElement(e,t,i,this.confine)){let r=this._table.getCellRange(e,t);this._attachInfo={range:r,instance:l,tooltipOptions:i}}}_move(e,t,i){let r=this._attachInfo;if(!r||!(0,eb._Z)(r.range,e,t))return;let{instance:n}=r;null==n||n.moveTooltipElement(e,t,i,this.confine)}moveToPosition(e,t,i,r){let n=this._attachInfo;if(!n||!(0,eb._Z)(n.range,e,t))return;let{instance:l}=n;this._attachInfo.tooltipOptions.position=i,this._attachInfo.tooltipOptions.referencePosition=r,null==l||l.locateTooltipElement(e,t,i,r,this.confine)}_unbindFromCell(){let e=this._attachInfo;if(!e)return;let{instance:t}=e;null==t||t.unbindTooltipElement(),this._attachInfo=null}_isBindCell(e,t){let i=this._attachInfo;return!!i&&(0,eb._Z)(i.range,e,t)}_bindTableEvent(e){e.on(Y.B.MOUSEENTER_CELL,t=>{if((0,eA.tq)())return;let{x1:i,x2:r,y1:n,y2:l}=e.stateManager.menu.bounds;if(e.stateManager.menu.isShow&&"number"==typeof t.x&&"number"==typeof t.y&&t.x>i&&t.x<r&&t.y>n&&t.y<l)return;let{col:o,row:a}=t;this.showTooltip(o,a)}),e.on(Y.B.MOUSEMOVE_CELL,t=>{var i,r;if(!(0,eA.tq)()){if(null==(r=null==(i=this._attachInfo)?void 0:i.tooltipOptions)?void 0:r.referencePosition){let i=this._attachInfo.tooltipOptions.referencePosition,{event:r}=t,{left:n,right:l,top:o,bottom:a}=i.rect,s=e._getMouseAbstractPoint(r);s.inTable&&s.x>=n-5&&s.x<=l+5&&s.y>=o-5&&s.y<=a+5||this._unbindFromCell()}this._attachInfo&&e.stateManager.menu.isShow&&this._bindToCell(t.col,t.row)}}),e.on(Y.B.MOUSELEAVE_CELL,e=>{this._unbindFromCell()}),e.on(Y.B.SELECTED_CELL,e=>{this._isBindCell(e.col,e.row)&&this._unbindFromCell()}),e.on(Y.B.MOUSELEAVE_TABLE,e=>{this._unbindFromCell()}),e.on(Y.B.SCROLL,e=>{this._unbindFromCell()})}showTooltip(e,t){var i,r,n;let l,o=this._table,a=o.getHeaderDescription(e,t);if(a){let r=o.getCellRangeRelativeRect({col:e,row:t});l={content:a,referencePosition:{placement:o.internalProps.tooltip.position,rect:r},disappearDelay:null!=(i=o.internalProps.tooltip.overflowTextTooltipDisappearDelay)?i:0,style:o.theme.tooltipStyle}}else if((0,B.Z)(null==(r=o.internalProps.tooltip)?void 0:r.isShowOverflowTextTooltip)?o.internalProps.tooltip.isShowOverflowTextTooltip(e,t,o):o.internalProps.tooltip.isShowOverflowTextTooltip){let i=o.getCellOverflowText(e,t),r=o.getCellRangeRelativeRect({col:e,row:t});i&&(l={content:a?`${a}
  ${i}`:i,referencePosition:{placement:o.internalProps.tooltip.position,rect:r},disappearDelay:null!=(n=o.internalProps.tooltip.overflowTextTooltipDisappearDelay)?n:0,style:o.theme.tooltipStyle})}l?this._bindToCell(e,t,l):this._unbindFromCell()}_getTooltipInstanceInfo(e,t){let i=this._table,r=this._tooltipInstances;return r&&r["bubble-tooltip"]||r&&(r["bubble-tooltip"]=eI["bubble-tooltip"](i))}isBinded(e){var t;return JSON.stringify(e)===JSON.stringify(null==(t=this._attachInfo)?void 0:t.tooltipOptions)}}var eF=i(43453),eH=i(88237);let eO=()=>{r.F.registerComponent("axis",E),r.F.registerFunction("computeAxisComponentWidth",L),r.F.registerFunction("computeAxisComponentHeight",F),r.F.registerFunction("getAxisConfigInPivotChart",n.hZ)},eD=()=>{r.F.registerComponent("emptyTip",Z)},ez=()=>{r.F.registerFunction("createLegend",eo)},eW=()=>{r.F.registerComponent("menuHandler",ev)},eZ=()=>{r.F.registerComponent("title",eC)},eN=()=>{r.F.registerComponent("tooltipHandler",eL)},e$=()=>{(0,eF.Hp)(),(0,eH.d)()}},29020:function(e,t,i){i.d(t,{o:()=>A,F:()=>k});var r=i(50848),n=i(37106),l=i(74882),o=i(57198),a=i(35759),s=i(64776),h=i(51130);!function(){if("node"===l.X.mode)return;let e=document.createElement("style");e.id="vtable-menu-styleSheet",e.textContent="\n@keyframes vtable__menu-element--shown-animation {\n	0% {\n		opacity: 0;\n	}\n	100% {\n		opacity: 1;\n	}\n}\n.vtable__menu-element {\n	position: absolute;\n	box-sizing: border-box;\n	border-radius: 4px;\n	background-color: #fff;\n	padding: 6px 0;\n	/* pointer-events: none; */\n	user-select: none;\n	color: #000;\n	max-width: 300px;\n	z-index: 99999;\n	border: #CCC 0.5px solid;\n	cursor: default;\n	width: max-content;\n	box-shadow: 0px 8px 16px rgba(27, 31, 35, 0.12);\n  max-height: 100%;\n  overflow-y: auto;\n}\n.vtable__menu-element--hidden {\n	opacity: 0;\n	/* transform: translate(-50%, -50%); */\n	transition: opacity 75ms linear;\n	z-index: -9999;\n}\n.vtable__menu-element--shown {\n	opacity: 1;\n	/* transform: translate(-50%, -50%); */\n	animation: vtable__menu-element--shown-animation 150ms ease-out;\n}\n.vtable__menu-element__content {\n	font-family: Roboto;\n	font-size: 12px;\n	overflow: hidden;\n	display: inline-block;\n	/* height: 100%; */\n	line-height: 30px;\n}\n.vtable__menu-element__item {\n	height: 32px;\n	padding: 0px 12px;\n	cursor: pointer;\n	position: relative;\n	display: flex;\n	align-items: center;\n	justify-content: flex-start;\n}\n.vtable__menu-element__item:hover {\n	background-color: rgba(27, 31, 35, 0.06);\n}\n.vtable__menu-element__icon{\n	/* vertical-align: top; */\n	display: flex;\n	/* line-height: 30px; */\n	margin-right: 6px;\n}\n.vtable__menu-element__no-event {\n	pointer-events: none;\n}\n.vtable__menu-element--select {\n	color: #2E68CF;\n}\n.vtable__menu-element--normal {\n	color: rgba(20, 20, 20, 0.9);;\n}\n.vtable__menu-element__item-disabled {\n    color: rgba(0, 0, 0, 0.25);\n    cursor: not-allowed;\n	  background-color: #fff;\n}\n.vtable__menu-element__item-disabled:hover {\n	  background-color: #fff;\n}\n.vtable__menu-element__split {\n	height: 0px;\n	border: 1px solid rgb(209, 213, 218);\n	margin: 5px 0;\n}\n.vtable__menu-element__title {\n	color: rgb(149, 149, 149);\n}\n.vtable__menu-element__arrow {\n	position: absolute;\n	right: 3px;\n	font-weight: bold;\n	margin-top: 1px;\n}\n.vtable__menu-element__item-text {\n	margin-right: 15px;\n}\n",document.head.appendChild(e)}();let d="vtable__menu-element",u=`${d}__item`,c=`${d}__content`,p=`${d}--hidden`,g=`${d}--shown`,f=`${d}--normal`,m=`${d}--select`,b=`${d}__icon`,y=`${d}__split`,v=`${d}__title`,_=`${d}__arrow`,C=`${d}__no-event`,x=`${d}__item-text`,w=`${d}__item-disabled`;function S(){return(0,n.a)("div",[d,p])}function A(e,t,i,r,n,l){let o=e.getCellRange(r,n);for(let r=0;r<t.length;r++){let n=t[r],{col:l,row:h}=n,{field:d,menuKey:u}=n;if("number"!=typeof l||"number"!=typeof h)if(e.isPivotTable()&&(Array.isArray(d),1)){let t=e.internalProps.layoutMap.getPivotCellAdress(d);if(!t)continue;l=t.col,h=t.row}else{let t=e.internalProps.layoutMap.getHeaderCellAddressByField(d);if(!t)continue;l=t.col,h=t.row}if((0,s.Z)(l)&&(0,s.Z)(h)&&(0,a._Z)(o,l,h)&&i===u)return!0}return!1}class k{constructor(e){var t,i,n,l,a,s,h,d,u,c,f;this._handler=new r.b,this._rootElement=S(),this._secondElement=S(),this._secondElement.sub=!0,this._showChildrenIndex=-1,this._rootElement.addEventListener("wheel",e=>{e.stopPropagation()}),null==(t=this._rootElement)||t.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault()}),null==(i=this._rootElement)||i.addEventListener("contextmenu",e=>{e.stopPropagation(),e.preventDefault()}),null==(n=this._rootElement)||n.addEventListener("touchend",t=>{if(t.stopPropagation(),t.preventDefault(),t.target.classList.contains(w)||this._rootElement.classList.contains(p))return;let{col:i,row:r,dropDownIndex:n,menuKey:l,text:a,hasChildren:s}=t.target;if("number"!=typeof n||s)return void t.stopPropagation();let h=e.isPivotTable()?e.internalProps.layoutMap.getPivotDimensionInfo(i,r):e.getHeaderField(i,r),d=e._dropDownMenuIsHighlight(i,r,n);e.fireListeners(o.B.DROPDOWN_MENU_CLICK,{col:i,row:r,field:h,menuKey:l,text:a,highlight:d,cellLocation:e.getCellLocation(i,r),event:t}),e.fireListeners(o.B.DROPDOWN_MENU_CLEAR,null),e.fireListeners(o.B.HIDE_MENU,null),t.stopPropagation()}),null==(l=this._rootElement)||l.addEventListener("click",t=>{if(t.stopPropagation(),t.preventDefault(),t.target.classList.contains(w)||this._rootElement.classList.contains(p))return;let{col:i,row:r,dropDownIndex:n,menuKey:l,text:a,hasChildren:s}=t.target;if("number"!=typeof n||s)return void t.stopPropagation();let h=e.isPivotTable()?e.internalProps.layoutMap.getPivotDimensionInfo(i,r):e.getHeaderField(i,r),d=e._dropDownMenuIsHighlight(i,r,n);e.fireListeners(o.B.DROPDOWN_MENU_CLICK,{col:i,row:r,field:h,menuKey:l,text:a,highlight:d,cellLocation:e.getCellLocation(i,r),event:t}),e.fireListeners(o.B.DROPDOWN_MENU_CLEAR,null),e.fireListeners(o.B.HIDE_MENU,null),t.stopPropagation()}),null==(a=this._rootElement)||a.addEventListener("mousemove",t=>{var i,r;if(this._rootElement.classList.contains(p))return;t.stopPropagation();let{hasChildren:n,dropDownIndex:l,col:o,row:a,sub:s}=t.target;if(n){this._showChildrenIndex=l;let r=this._secondElement;null==r||r.classList.remove(p),null==r||r.classList.add(g),r.innerHTML="";let n=null==(i=this._menuInstanceInfo.content[l])?void 0:i.children;for(let t=0;t<n.length;t++){let i=n[t],l=M(i,!!e.stateManager.menu.dropDownMenuHighlight&&A(e,e.stateManager.menu.dropDownMenuHighlight,"object"==typeof i?(null==i?void 0:i.menuKey)||(null==i?void 0:i.text):i,o,a,t));l.col=o,l.row=a,l.dropDownIndex=t,"string"==typeof i?(l.text=i,l.menuKey=i):"object"==typeof i&&(l.text=i.text,l.menuKey=i.menuKey||i.text),l.sub=!0,l.sub=!0,r.appendChild(l)}let s=t.target.getBoundingClientRect();this._bindSecondElement(e,o,a,s.right,s.top)}else if(n&&this._showChildrenIndex===l){let e=this._secondElement;null==e||e.classList.remove(p),null==e||e.classList.add(g)}else!s&&(null==(r=this._secondElement)?void 0:r.classList.contains(g))&&setTimeout(()=>{if(!0!==this._mouseEnterSecondElement){this._showChildrenIndex=-1;let e=this._secondElement;null==e||e.classList.remove(g),null==e||e.classList.add(p)}},300)}),null==(s=this._secondElement)||s.addEventListener("wheel",e=>{e.stopPropagation()}),null==(h=this._secondElement)||h.addEventListener("mousemove",e=>{this._rootElement.classList.contains(p)||e.stopPropagation()}),null==(d=this._secondElement)||d.addEventListener("mouseenter",e=>{this._mouseEnterSecondElement=!0}),null==(u=this._secondElement)||u.addEventListener("mouseleave",e=>{this._mouseEnterSecondElement=!1}),null==(c=this._secondElement)||c.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault()}),null==(f=this._secondElement)||f.addEventListener("click",t=>{if(t.stopPropagation(),t.preventDefault(),t.target.classList.contains(w)||this._secondElement.classList.contains(p))return;let{col:i,row:r,dropDownIndex:n,menuKey:l,text:a,hasChildren:s}=t.target;if("number"!=typeof n||s)return void t.stopPropagation();let h=e.isPivotTable()?e.internalProps.layoutMap.getPivotDimensionInfo(i,r):e.getHeaderField(i,r),d=!1;this._menuInstanceInfo.content.forEach((t,n)=>{if("object"==typeof t&&t.children&&t.children.length)for(let n=0;n<t.children.length;n++){let o=t.children[n];if(A(e,e.stateManager.menu.dropDownMenuHighlight,"object"==typeof o?null==o?void 0:o.menuKey:o,i,r,-1)&&l===("object"==typeof o?null==o?void 0:o.menuKey:o))return void(d=!0)}}),e.fireListeners(o.B.DROPDOWN_MENU_CLICK,{col:i,row:r,field:h,cellHeaderPaths:e.isPivotTable()?e.getCellHeaderPaths(i,r):void 0,menuKey:l,text:a,highlight:d,cellLocation:e.getCellLocation(i,r),event:t}),e.fireListeners(o.B.DROPDOWN_MENU_CLEAR,null),e.fireListeners(o.B.HIDE_MENU,null),t.stopPropagation()})}get rootElement(){return this._rootElement}release(){this.unbindFromCell();let e=this._rootElement;(null==e?void 0:e.parentElement)&&e.parentElement.removeChild(e),this._handler.release(),delete this._rootElement}bindToCell(e,t,i,r){var n,l;let o=this._rootElement,a=this._secondElement;if(this._menuInstanceInfo=r,null==o||o.classList.remove(g),null==o||o.classList.add(p),null==a||a.classList.remove(g),null==a||a.classList.add(p),this._canBindToCell(e,t,i)){if(o.innerHTML="",Array.isArray(r.content)){let a=r.content;for(let r=0;n=r<(null==a?void 0:a.length),n;r++){let n=a[r],s=!!e.stateManager.menu.dropDownMenuHighlight&&A(e,e.stateManager.menu.dropDownMenuHighlight,"object"==typeof n?(null==n?void 0:n.menuKey)||(null==n?void 0:n.text):n,t,i,r);if(e.stateManager.menu.dropDownMenuHighlight&&"object"==typeof n&&Array.isArray(n.children)&&n.children.length)for(let r=0;r<n.children.length;r++){let l=n.children[r];if(A(e,e.stateManager.menu.dropDownMenuHighlight,"object"==typeof l?(null==l?void 0:l.menuKey)||(null==l?void 0:l.text):l,t,i,r)){s=!0;break}}let h=M(n,s);h.col=t,h.row=i,h.dropDownIndex=r,"string"==typeof n?(h.text=n,h.menuKey=n):"object"==typeof n&&(h.text=n.text,h.menuKey=n.menuKey||n.text,(null==(l=n.children)?void 0:l.length)&&(h.hasChildren=!0)),o.appendChild(h)}}if(this._bindToCell(e,t,i,r.position,r.referencePosition))return null==o||o.classList.add(g),null==o||o.classList.remove(p),!0}else this.unbindFromCell();return!1}unbindFromCell(){let e=this._rootElement,t=this._secondElement;this._menuInstanceInfo=void 0,(null==e?void 0:e.parentElement)&&(e.classList.remove(g),e.classList.add(p)),(null==t?void 0:t.parentElement)&&(t.classList.remove(g),t.classList.add(p))}_canBindToCell(e,t,i){var r;let n=e.getCellRangeRelativeRect({col:t,row:i}),l=null!=(r=e.internalProps.menu.parentElement)?r:e.getElement(),{top:o,bottom:a,left:s,right:h}=n;if(-1===t&&-1===i||e.isFrozenCell(t,i))return!0;if(a<e.getFrozenRowsHeight()||h<e.getFrozenColsWidth()||s>e.tableNoFrameWidth-e.getRightFrozenColsWidth()||o>e.tableNoFrameHeight-e.getBottomFrozenRowsHeight())return!1;let{offsetHeight:d,offsetWidth:u}=l;return!(d<o)&&!(u<s)}_bindToCell(e,t,i,r,n){var l;let o=this._rootElement,a=null!=(l=e.internalProps.menu.parentElement)?l:e.getElement(),{width:s,height:h,left:d,top:u}=a.getBoundingClientRect();if(o){let t,i;o.parentElement!==a&&a.appendChild(o),o.style.left="0px",o.style.maxWidth=`${.8*s}px`;let l=o.offsetWidth,c=o.offsetHeight;r?(t=r.x,i=r.y):n&&(t=n.rect.right-l,i=n.rect.bottom);let p=a.getBoundingClientRect(),g=p.width/a.offsetWidth,f=p.height/a.offsetHeight;i*f+c>h&&(i=(h-c)/f),i<0&&(i/=2);let m=0,b=0;if(e.getElement()!==a){let{left:t,top:i}=e.getElement().getBoundingClientRect();m=i-u,b=t-d}return o.style.top=`${i+m}px`,t<0?t=0:t*g+l>s&&(t=(s-l)/g),o.style.left=`${t+b}px`,!0}return!1}_bindSecondElement(e,t,i,r,n){var l;let o=this._secondElement,a=this._rootElement,s=null!=(l=e.internalProps.menu.parentElement)?l:e.getElement(),{width:h,height:d,left:u,top:c}=s.getBoundingClientRect(),{x:p,y:g,width:f,height:m}=a.getBoundingClientRect();if(o){o.parentElement!==s&&s.appendChild(o),o.style.left="0px",o.style.maxWidth=`${.8*h}px`;let e=o.clientWidth,t=o.clientHeight,i=n-4-c;i+t>d&&(i=i-t+o.firstElementChild.clientHeight+4),o.style.top=`${i}px`;let l=r-u;return l+e>h?l=l-e-f:l+=4,o.style.left=`${l}px`,!0}return!1}pointInMenuElement(e,t){let{x:i,y:r,width:n,height:l}=this._rootElement.getBoundingClientRect();if(e>i-5&&e<i+n+5&&t>r-5&&t<r+l+5)return!0;let o=this._secondElement;if(o){let{x:i,y:r,width:n,height:l}=o.getBoundingClientRect();if(e>i-5&&e<i+n+5&&t>r-5&&t<r+l+5)return!0}return!1}}function M(e,t){var i,r,l;let o=(0,n.a)("div",[u,t?m:f]);if("object"==typeof e&&e.disabled&&o.classList.add(w),"string"==typeof e){let t=(0,n.a)("span",[c,C,x]);t.innerHTML=e,o.appendChild(t)}else if("object"==typeof e){let a=null!=(i=e.type)?i:"item";if("split"===a)return null==o||o.classList.add(y),o;if(null==(r=null==e?void 0:e.icon)?void 0:r.svg)if(h.tP.test(e.icon.svg)){let t=new Image;e.icon.width?t.style.width=e.icon.width.toString()+"px":t.style.width="16px",e.icon.height?t.style.height=e.icon.height.toString()+"px":t.style.height="16px",t.src=e.icon.svg,o.appendChild(t)}else{let i=(0,n.a)("span",[b,C]);i.innerHTML=t&&e.selectedIcon&&e.selectedIcon.svg?e.selectedIcon.svg:e.icon.svg,e.icon.width&&i.children[0].setAttribute("width",e.icon.width.toString()),e.icon.height&&i.children[0].setAttribute("height",e.icon.height.toString()),o.appendChild(i)}let s=(0,n.a)("span",[c,C,x]);if(s.innerHTML=e.text,o.appendChild(s),"title"===a)null==o||o.classList.add(C,v);else if(null==(l=null==e?void 0:e.children)?void 0:l.length){let e=(0,n.a)("span",[c,C,_]);e.innerHTML=t?'<svg width="8" height="12" viewBox="0 0 10 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align: baseline"><path d="M1.78186 16.7729L0.300378 15.2915L6.8189 8.77295L0.300377 2.25443L1.78186 0.77295L9.78186 8.77295L1.78186 16.7729Z" fill="#2E68CF" fill-opacity="0.65"></path></svg>':'<svg width="8" height="12" viewBox="0 0 10 17" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align: baseline"><path d="M1.78186 16.7729L0.300378 15.2915L6.8189 8.77295L0.300377 2.25443L1.78186 0.77295L9.78186 8.77295L1.78186 16.7729Z" fill="#141414" fill-opacity="0.65"></path></svg>',o.appendChild(e)}}return o}},26249:function(e,t,i){i.d(t,{D:()=>n,Z:()=>l});var r=i(8849);function n(e){return{rootContainer:new r.ZA({}),renderDefault:!0}}class l{constructor(e){this.table=e,this.customLayoutFuncCache=new Map,this.reactRemoveGraphicCache=new Map,this.reactRemoveAllGraphicCache=new Map,this.headerCustomLayoutFuncCache=new Map,this.headerReactRemoveGraphicCache=new Map,this.headerReactRemoveAllGraphicCache=new Map}hasReactCreateGraphic(e,t){return t?this.headerCustomLayoutFuncCache.has(e):this.customLayoutFuncCache.has(e)}setReactCreateGraphic(e,t,i){i?this.headerCustomLayoutFuncCache.set(e,t):this.customLayoutFuncCache.set(e,t)}setReactRemoveGraphic(e,t,i){i?this.headerReactRemoveGraphicCache.set(e,t):this.reactRemoveGraphicCache.set(e,t)}setReactRemoveAllGraphic(e,t,i){i?this.headerReactRemoveAllGraphicCache.set(e,t):this.reactRemoveAllGraphicCache.set(e,t)}updateCustomCell(e,t){let i=this.table;if("autoWidth"===i.widthMode&&i.scenegraph.recalculateColWidths(),(i.isAutoRowHeight()||"auto"===i.internalProps.defaultRowHeight&&!t||"auto"===i.internalProps.defaultHeaderRowHeight&&t)&&i.scenegraph.recalculateRowHeights(),i.isPivotTable()){let r=function(e,t,i){let r=+!!t.internalProps.rowSeriesNumber,n=[],l=t.internalProps.layoutMap;if(i){let{headerObjects:t}=l,i=[];for(let r=0;r<t.length;r++){let n=t[r];n&&n.define.componentId===e&&i.push(n.id)}for(let e=0;e<i.length;e++){let t=i[e],r=l.getHeaderCellAdressById(t),o=l.getCellRange(r.col,r.row);n.push(o)}}else{let t,{columnObjects:i,indicatorsAsCol:o}=l;for(let r=0;r<i.length;r++)if(i[r].define.componentId===e){t=r;break}if(o)for(let e=l.rowHeaderLevelCount+t;e<l.colCount;e+=i.length){let t={start:{col:e+r,row:l.columnHeaderLevelCount},end:{col:e+r,row:l.rowCount-1}};n.push(t)}else for(let e=l.columnHeaderLevelCount+t;e<l.rowCount;e+=i.length){let t={start:{col:l.rowHeaderLevelCount+r,row:e},end:{col:l.colCount-1,row:e}};n.push(t)}}return n}(e,i,t);for(let e=0;e<r.length;e++){let t=r[e];for(let e=t.start.col;e<=t.end.col;e++)for(let r=t.start.row;r<=t.end.row;r++)i.scenegraph.updateCellContent(e,r)}}else{let r=function(e,t,i){let r=+!!t.internalProps.rowSeriesNumber;if(i){let i,r=t.internalProps.layoutMap,{headerObjects:n}=t.internalProps.layoutMap;for(let t=0;t<n.length;t++){let r=n[t];if(r.define.componentId===e){i=r.id;break}}let l=r.getHeaderCellAdressById(i);return r.getCellRange(l.col,l.row)}let{columnObjects:n}=t.internalProps.layoutMap;for(let i=0;i<n.length;i++)if(n[i].define.componentId===e)return{start:{col:r+i,row:t.columnHeaderLevelCount},end:{col:r+i,row:t.rowCount-1}};return{start:{col:0,row:0},end:{col:t.colCount-1,row:t.rowCount-1}}}(e,i,t);for(let e=r.start.col;e<=r.end.col;e++)for(let t=r.start.row;t<=r.end.row;t++)i.scenegraph.updateCellContent(e,t)}i.scenegraph.renderSceneGraph()}getCustomLayoutFunc(e,t){var i;if(this.table.isHeader(e,t)){let{componentId:r}=this.table.getHeaderDefine(e,t);return null!=(i=this.headerCustomLayoutFuncCache.get(r))?i:n}let{componentId:r}=this.table.getBodyColumnDefine(e,t);return this.customLayoutFuncCache.get(r)||n}removeCustomCell(e,t){let i;if(this.table.isHeader(e,t)){let{componentId:r}=this.table.getHeaderDefine(e,t);i=this.headerReactRemoveGraphicCache.get(r)}else{let{componentId:r}=this.table.getBodyColumnDefine(e,t);i=this.reactRemoveGraphicCache.get(r)}i&&i(e,t)}clearCache(){this.reactRemoveAllGraphicCache.forEach(e=>{e()}),this.headerReactRemoveAllGraphicCache.forEach(e=>{e()})}updateAllCustomCell(){this.customLayoutFuncCache.forEach((e,t)=>{this.updateCustomCell(t)}),this.headerCustomLayoutFuncCache.forEach((e,t)=>{this.updateCustomCell(t,!0)})}}},44561:function(e,t,i){i.d(t,{Zv:()=>h,h_:()=>a,lc:()=>d,qi:()=>o,ro:()=>s});var r=i(44843),n=i(20408),l=i(9762);function o(e){var t,i;let l=Object.assign({},e);return(0,r.Z)(e.style)||(l.textStyle=a(e.style)),(0,r.Z)(e.textStyle)||(0,n.Z)(l.textStyle,a(e.textStyle)),(null==(t=e.shape)?void 0:t.style)&&a(l.shape.style),(null==(i=e.background)?void 0:i.style)&&a(l.background.style),l}function a(e){return(0,r.Z)(e)||e.angle&&(e.angle=(0,l.M4)(e.angle)),e}function s(e={}){return(0,r.Z)(e.style)||(e.style=a(e.style)),(0,r.Z)(e.state)||Object.keys(e.state).forEach(t=>{(0,r.Z)(e.state[t])||(e.state[t]=a(e.state[t]))}),e}function h(e){return(0,r.Z)(e)?null:(Object.keys(e).forEach(t=>{(0,r.Z)(e[t])||(e[t]=a(e[t]))}),e)}function d(e){return s(e),s(e.startSymbol),s(e.endSymbol),e}},7466:function(e,t,i){let r,n,l,o,a,s,h,d,u,c,p,g;i.d(t,{D:()=>nC});var f,m,b=i(64776),y=i(9032);let v={CHANGE_STYLE:"change_style"};class _ extends y.R{static get EVENT_TYPE(){return v}static get DEFAULT(){return r||(r=new _)}constructor(e={},t={}){var i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B;super(),this._defaultPadding=[10,16,10,16],this._textAlign=null!=(i=null==e?void 0:e.textAlign)?i:null==t?void 0:t.textAlign,this._textBaseline=null!=(r=null==e?void 0:e.textBaseline)?r:null==t?void 0:t.textBaseline,this._color=null!=(n=null==e?void 0:e.color)?n:null==t?void 0:t.color,this._strokeColor=null!=(l=null==e?void 0:e.strokeColor)?l:null==t?void 0:t.strokeColor,this._fontSize=null!=(o=e.fontSize)?o:null==t?void 0:t.fontSize,this._fontFamily=null!=(a=e.fontFamily)?a:null==t?void 0:t.fontFamily,this._fontWeight=null!=(s=e.fontWeight)?s:null==t?void 0:t.fontWeight,this._fontVariant=null!=(h=e.fontVariant)?h:null==t?void 0:t.fontVariant,this._fontStyle=null!=(d=e.fontStyle)?d:null==t?void 0:t.fontStyle,this._padding=null!=(c=null!=(u=null==e?void 0:e.padding)?u:null==t?void 0:t.padding)?c:this._defaultPadding,this._borderColor=null!=(p=null==e?void 0:e.borderColor)?p:null==t?void 0:t.borderColor,this._textOverflow=null!=(g=null==e?void 0:e.textOverflow)?g:null==t?void 0:t.textOverflow,this._textStick=null!=(m=null!=(f=e.textStick)?f:null==t?void 0:t.textStick)&&m,this._textStickBaseOnAlign=null!=(y=null!=(b=e.textStickBaseOnAlign)?b:null==t?void 0:t.textStickBaseOnAlign)&&y,this._bgColor=null!=(v=null==e?void 0:e.bgColor)?v:null==t?void 0:t.bgColor,this._lineHeight=null!=(_=null==e?void 0:e.lineHeight)?_:null==t?void 0:t.lineHeight,this._underline=null!=(C=null==e?void 0:e.underline)?C:null==t?void 0:t.underline,this._underlineColor=null!=(x=null==e?void 0:e.underlineColor)?x:null==t?void 0:t.underlineColor,this._underlineDash=null!=(w=null==e?void 0:e.underlineDash)?w:null==t?void 0:t.underlineDash,this._underlineOffset=null!=(S=null==e?void 0:e.underlineOffset)?S:null==t?void 0:t.underlineOffset,this._lineThrough=null!=(A=null==e?void 0:e.lineThrough)?A:null==t?void 0:t.lineThrough,this._lineThroughColor=null!=(k=null==e?void 0:e.lineThroughColor)?k:null==t?void 0:t.lineThroughColor,this._lineThroughDash=null!=(M=null==e?void 0:e.lineThroughDash)?M:null==t?void 0:t.lineThroughDash,this._linkColor=null!=(T=null==e?void 0:e.linkColor)?T:null==t?void 0:t.linkColor,this._cursor=null!=(R=e.cursor)?R:null==t?void 0:t.cursor,this._borderLineWidth=null!=(E=e.borderLineWidth)?E:null==t?void 0:t.borderLineWidth,this._borderLineDash=null!=(P=e.borderLineDash)?P:null==t?void 0:t.borderLineDash,this._marked=null!=(B=e.marked)?B:null==t?void 0:t.marked}get color(){return this._color}set color(e){this._color=e}get strokeColor(){return this._strokeColor}set strokeColor(e){this._strokeColor=e}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e}get padding(){return this._padding}set padding(e){this._padding=e}get textOverflow(){return this._textOverflow}set textOverflow(e){this._textOverflow=e}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e}get textStick(){return this._textStick}set textStick(e){this._textStick=e}get textStickBaseOnAlign(){return this._textStickBaseOnAlign}set textStickBaseOnAlign(e){this._textStickBaseOnAlign=e}get textAlign(){return this._textAlign}set textAlign(e){this._textAlign=e}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e}get underline(){return this._underline}set underline(e){this._underline=e}get underlineColor(){return this._underlineColor}set underlineColor(e){this._underlineColor=e}get underlineDash(){return this._underlineDash}set underlineDash(e){this._underlineDash=e}get underlineOffset(){return this._underlineOffset}set underlineOffset(e){this._underlineOffset=e}get lineThrough(){return this._lineThrough}set lineThrough(e){this._lineThrough=e}get lineThroughColor(){return this._lineThroughColor}set lineThroughColor(e){this._lineThroughColor=e}get lineThroughDash(){return this._lineThroughDash}set lineThroughDash(e){this._lineThroughDash=e}get linkColor(){return this._linkColor}set linkColor(e){this._linkColor=e}get cursor(){return this._cursor}set cursor(e){this._cursor=e}get borderLineWidth(){return this._borderLineWidth}set borderLineWidth(e){this._borderLineWidth=e}get borderLineDash(){return this._borderLineDash}set borderLineDash(e){this._borderLineDash=e}get marked(){return this._marked}set marked(e){this._marked=e}clone(){return new _(this,null)}}class C extends _{static get DEFAULT(){return n||(n=new C)}constructor(e={},t={},i={}){var r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S;super(e,t),this._size=(null!=(n=null!=(r=null==e?void 0:e.size)?r:null==t?void 0:t.size)?n:null==i?void 0:i.size)||14,this._spaceBetweenTextAndIcon=(null!=(o=null!=(l=null==e?void 0:e.spaceBetweenTextAndIcon)?l:null==t?void 0:t.spaceBetweenTextAndIcon)?o:null==i?void 0:i.spaceBetweenTextAndIcon)||8,this._defaultFill=null!=(s=null==(a=null==e?void 0:e.checkboxStyle)?void 0:a.defaultFill)?s:null==i?void 0:i.defaultFill,this._defaultStroke=null!=(d=null==(h=null==e?void 0:e.checkboxStyle)?void 0:h.defaultStroke)?d:null==i?void 0:i.defaultStroke,this._disableFill=null!=(c=null==(u=null==e?void 0:e.checkboxStyle)?void 0:u.disableFill)?c:null==i?void 0:i.disableFill,this._checkedFill=null!=(g=null==(p=null==e?void 0:e.checkboxStyle)?void 0:p.checkedFill)?g:null==i?void 0:i.checkedFill,this._checkedStroke=null!=(m=null==(f=null==e?void 0:e.checkboxStyle)?void 0:f.checkedStroke)?m:null==i?void 0:i.checkedStroke,this._disableCheckedFill=null!=(y=null==(b=null==e?void 0:e.checkboxStyle)?void 0:b.disableCheckedFill)?y:null==i?void 0:i.disableCheckedFill,this._disableCheckedStroke=null!=(_=null==(v=null==e?void 0:e.checkboxStyle)?void 0:v.disableCheckedStroke)?_:null==i?void 0:i.disableCheckedStroke,this._checkIconImage=null!=(x=null==(C=null==e?void 0:e.checkboxStyle)?void 0:C.checkIconImage)?x:null==i?void 0:i.checkIconImage,this._indeterminateIconImage=null!=(S=null==(w=null==e?void 0:e.checkboxStyle)?void 0:w.indeterminateIconImage)?S:null==i?void 0:i.indeterminateIconImage}get size(){return this._size}set size(e){this._size=e}get spaceBetweenTextAndIcon(){return this._spaceBetweenTextAndIcon}set spaceBetweenTextAndIcon(e){this._spaceBetweenTextAndIcon=e}get defaultFill(){return this._defaultFill}set defaultFill(e){this._defaultFill=e}get defaultStroke(){return this._defaultStroke}set defaultStroke(e){this._defaultStroke=e}get disableFill(){return this._disableFill}set disableFill(e){this._disableFill=e}get checkedFill(){return this._checkedFill}set checkedFill(e){this._checkedFill=e}get checkedStroke(){return this._checkedStroke}set checkedStroke(e){this._checkedStroke=e}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(e){this._disableCheckedFill=e}get disableCheckedStroke(){return this._disableCheckedStroke}set disableCheckedStroke(e){this._disableCheckedStroke=e}get checkIconImage(){return this._checkIconImage}set checkIconImage(e){this._checkIconImage=e}get indeterminateIconImage(){return this._indeterminateIconImage}set indeterminateIconImage(e){this._indeterminateIconImage=e}getStyle(e){return new C(e,this)}clone(){return new C(this)}}class x extends _{static get DEFAULT(){return l||(l=new x)}constructor(e={},t={},i={}){var r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k;super(e,t),this._size=(null!=(n=null!=(r=null==e?void 0:e.size)?r:null==t?void 0:t.size)?n:null==i?void 0:i.size)||14,this._spaceBetweenTextAndIcon=(null!=(o=null!=(l=null==e?void 0:e.spaceBetweenTextAndIcon)?l:null==t?void 0:t.spaceBetweenTextAndIcon)?o:null==i?void 0:i.spaceBetweenTextAndIcon)||8,this._spaceBetweenRadio=(null!=(s=null!=(a=null==e?void 0:e.spaceBetweenRadio)?a:null==t?void 0:t.spaceBetweenRadio)?s:null==i?void 0:i.spaceBetweenRadio)||2,this._innerRadius=null!=(d=null==(h=null==e?void 0:e.radioStyle)?void 0:h.innerRadius)?d:null==i?void 0:i.innerRadius,this._outerRadius=null!=(c=null==(u=null==e?void 0:e.radioStyle)?void 0:u.outerRadius)?c:null==i?void 0:i.outerRadius,this._defaultFill=null!=(g=null==(p=null==e?void 0:e.radioStyle)?void 0:p.defaultFill)?g:null==i?void 0:i.defaultFill,this._defaultStroke=null!=(m=null==(f=null==e?void 0:e.radioStyle)?void 0:f.defaultStroke)?m:null==i?void 0:i.defaultStroke,this._disableFill=null!=(y=null==(b=null==e?void 0:e.radioStyle)?void 0:b.disableFill)?y:null==i?void 0:i.disableFill,this._checkedFill=null!=(_=null==(v=null==e?void 0:e.radioStyle)?void 0:v.checkedFill)?_:null==i?void 0:i.checkedFill,this._checkedStroke=null!=(x=null==(C=null==e?void 0:e.radioStyle)?void 0:C.checkedStroke)?x:null==i?void 0:i.checkedStroke,this._disableCheckedFill=null!=(S=null==(w=null==e?void 0:e.radioStyle)?void 0:w.disableCheckedFill)?S:null==i?void 0:i.disableCheckedFill,this._disableCheckedStroke=null!=(k=null==(A=null==e?void 0:e.radioStyle)?void 0:A.disableCheckedStroke)?k:null==i?void 0:i.disableCheckedStroke}get size(){return this._size}set size(e){this._size=e}get spaceBetweenTextAndIcon(){return this._spaceBetweenTextAndIcon}set spaceBetweenTextAndIcon(e){this._spaceBetweenTextAndIcon=e}get spaceBetweenRadio(){return this._spaceBetweenRadio}set spaceBetweenRadio(e){this._spaceBetweenRadio=e}get innerRadius(){return this._innerRadius}set innerRadius(e){this._innerRadius=e}get outerRadius(){return this._outerRadius}set outerRadius(e){this._outerRadius=e}get defaultFill(){return this._defaultFill}set defaultFill(e){this._defaultFill=e}get defaultStroke(){return this._defaultStroke}set defaultStroke(e){this._defaultStroke=e}get disableFill(){return this._disableFill}set disableFill(e){this._disableFill=e}get checkedFill(){return this._checkedFill}set checkedFill(e){this._checkedFill=e}get checkedStroke(){return this._checkedStroke}set checkedStroke(e){this._checkedStroke=e}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(e){this._disableCheckedFill=e}get disableCheckedStroke(){return this._disableCheckedStroke}set disableCheckedStroke(e){this._disableCheckedStroke=e}getStyle(e){return new x(e,this)}clone(){return new x(this)}}class w extends _{static get DEFAULT(){return o||(o=new w)}constructor(e={},t={},i={}){var r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_;super(e,t),this._spaceBetweenTextAndCircle=(null!=(n=null!=(r=null==e?void 0:e.spaceBetweenTextAndCircle)?r:null==t?void 0:t.spaceBetweenTextAndCircle)?n:null==i?void 0:i.spaceBetweenTextAndCircle)||6,this._circleRadius=(null!=(o=null==(l=null==e?void 0:e.switchStyle)?void 0:l.circleRadius)?o:null==i?void 0:i.circleRadius)||8,this._boxWidth=(null!=(s=null==(a=null==e?void 0:e.switchStyle)?void 0:a.boxWidth)?s:null==i?void 0:i.boxWidth)||40,this._boxHeight=(null!=(d=null==(h=null==e?void 0:e.switchStyle)?void 0:h.boxHeight)?d:null==i?void 0:i.boxHeight)||24,this._checkedFill=(null!=(c=null==(u=null==e?void 0:e.switchStyle)?void 0:u.checkedFill)?c:null==i?void 0:i.checkedFill)||"#165DFF",this._uncheckedFill=(null!=(g=null==(p=null==e?void 0:e.switchStyle)?void 0:p.uncheckedFill)?g:null==i?void 0:i.uncheckedFill)||"#c9cdd4",this._disableCheckedFill=(null!=(m=null==(f=null==e?void 0:e.switchStyle)?void 0:f.disableCheckedFill)?m:null==i?void 0:i.disableCheckedFill)||"#94bfff",this._disableUncheckedFill=(null!=(y=null==(b=null==e?void 0:e.switchStyle)?void 0:b.disableUncheckedFill)?y:null==i?void 0:i.disableUncheckedFill)||"#f2f3f5",this._circleFill=(null!=(_=null==(v=null==e?void 0:e.switchStyle)?void 0:v.circleFill)?_:null==i?void 0:i.circleFill)||"#FFF"}get spaceBetweenTextAndCircle(){return this._spaceBetweenTextAndCircle}set spaceBetweenTextAndCircle(e){this._spaceBetweenTextAndCircle=e}get circleRadius(){return this._circleRadius}set circleRadius(e){this._circleRadius=e}get boxWidth(){return this._boxWidth}set boxWidth(e){this._boxWidth=e}get boxHeight(){return this._boxHeight}set boxHeight(e){this._boxHeight=e}get checkedFill(){return this._checkedFill}set checkedFill(e){this._checkedFill=e}get uncheckedFill(){return this._uncheckedFill}set uncheckedFill(e){this._uncheckedFill=e}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(e){this._disableCheckedFill=e}get disableUncheckedFill(){return this._disableUncheckedFill}set disableUncheckedFill(e){this._disableUncheckedFill=e}get circleFill(){return this._circleFill}set circleFill(e){this._circleFill=e}getStyle(e){return new w(e,this)}clone(){return new w(this)}}class S extends _{static get DEFAULT(){return a||(a=new S)}constructor(e={},t={},i={}){var r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S;super(e,t),this._buttonColor=(null!=(n=null==(r=null==e?void 0:e.buttonStyle)?void 0:r.buttonColor)?n:null==i?void 0:i.buttonColor)||"#165DFF",this._buttonBorderColor=(null!=(o=null==(l=null==e?void 0:e.buttonStyle)?void 0:l.buttonBorderColor)?o:null==i?void 0:i.buttonBorderColor)||"#165DFF",this._buttonLineWidth=(null!=(s=null==(a=null==e?void 0:e.buttonStyle)?void 0:a.buttonLineWidth)?s:null==i?void 0:i.buttonLineWidth)||1,this._buttonBorderRadius=(null!=(d=null==(h=null==e?void 0:e.buttonStyle)?void 0:h.buttonBorderRadius)?d:null==i?void 0:i.buttonBorderRadius)||2,this._buttonHoverColor=(null!=(c=null==(u=null==e?void 0:e.buttonStyle)?void 0:u.buttonHoverColor)?c:null==i?void 0:i.buttonHoverColor)||"#4080FF",this._buttonHoverBorderColor=(null!=(g=null==(p=null==e?void 0:e.buttonStyle)?void 0:p.buttonHoverBorderColor)?g:null==i?void 0:i.buttonHoverBorderColor)||"#4080FF",this._buttonTextHoverColor=null!=(m=null==(f=null==e?void 0:e.buttonStyle)?void 0:f.buttonTextHoverColor)?m:null==i?void 0:i.buttonTextHoverColor,this._buttonDisableColor=(null!=(y=null==(b=null==e?void 0:e.buttonStyle)?void 0:b.buttonDisableColor)?y:null==i?void 0:i.buttonDisableColor)||"#94bfff",this._buttonDisableBorderColor=(null!=(_=null==(v=null==e?void 0:e.buttonStyle)?void 0:v.buttonDisableBorderColor)?_:null==i?void 0:i.buttonDisableBorderColor)||"#94bfff",this._buttonTextDisableColor=null!=(x=null==(C=null==e?void 0:e.buttonStyle)?void 0:C.buttonTextDisableColor)?x:null==i?void 0:i.buttonTextDisableColor,this._buttonPadding=(null!=(S=null==(w=null==e?void 0:e.buttonStyle)?void 0:w.buttonPadding)?S:null==i?void 0:i.buttonPadding)||10}get buttonColor(){return this._buttonColor}set buttonColor(e){this._buttonColor=e}get buttonBorderColor(){return this._buttonBorderColor}set buttonBorderColor(e){this._buttonBorderColor=e}get buttonLineWidth(){return this._buttonLineWidth}set buttonLineWidth(e){this._buttonLineWidth=e}get buttonBorderRadius(){return this._buttonBorderRadius}set buttonBorderRadius(e){this._buttonBorderRadius=e}get buttonHoverColor(){return this._buttonHoverColor}set buttonHoverColor(e){this._buttonHoverColor=e}get buttonHoverBorderColor(){return this._buttonHoverBorderColor}set buttonHoverBorderColor(e){this._buttonHoverBorderColor=e}get buttonTextHoverColor(){return this._buttonTextHoverColor}set buttonTextHoverColor(e){this._buttonTextHoverColor=e}get buttonDisableColor(){return this._buttonDisableColor}set buttonDisableColor(e){this._buttonDisableColor=e}get buttonDisableBorderColor(){return this._buttonDisableBorderColor}set buttonDisableBorderColor(e){this._buttonDisableBorderColor=e}get buttonTextDisableColor(){return this._buttonTextDisableColor}set buttonTextDisableColor(e){this._buttonTextDisableColor=e}get buttonTextHoverBorderColor(){return this._buttonTextHoverBorderColor}set buttonTextHoverBorderColor(e){this._buttonTextHoverBorderColor=e}get buttonPadding(){return this._buttonPadding}set buttonPadding(e){this._buttonPadding=e}getStyle(e){return new S(e,this)}clone(){return new S(this)}}let{EVENT_TYPE:A}=_;function k(e,t,i,r=_,n,l){var o,a,s,h;return e||t?e instanceof _?e:"function"==typeof e?k(e(i),t,i,r,n,l):(e||(e={}),n&&!(0,b.Z)(e.autoWrapText)&&(e.autoWrapText=!0),r===C?new C(null!=e?e:{},null!=t?t:{},null!=(o=l.checkboxStyle)?o:{}):r===x?new x(null!=e?e:{},null!=t?t:{},null!=(a=l.radioStyle)?a:{}):r===w?new w(null!=e?e:{},null!=t?t:{},null!=(s=l.switchStyle)?s:{}):r===S?new S(null!=e?e:{},null!=t?t:{},null!=(h=l.buttonStyle)?h:{}):new r(null!=e?e:{},null!=t?t:{})):r.DEFAULT}var M=i(74882),T=i(31864),R=i(36781),E=i(26902),P=i(35759),B=i(57198),I=i(50848),L=i(53803),F=i(77629),H=i(75665);let O={name:"DARK",underlayBackgroundColor:"transparent",defaultStyle:{color:"#D3D5DA",bgColor:"#373b45",fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#444A54",padding:[8,12,8,12],hover:{cellBgColor:"#2F4774"}},headerStyle:{color:"#D3D5DA",bgColor:"#373b45",fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#444A54",padding:[8,12,8,12],hover:{cellBgColor:"#2F4774"}},rowHeaderStyle:{},cornerHeaderStyle:{},bodyStyle:{color:"#e5e7ea",bgColor:function(e){let{row:t,table:i}=e;return 1&t-i.frozenRowCount?"#282a2e":"#2d3137"},fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#444A54",padding:[8,12,8,12],hover:{cellBgColor:"#29364D"}},frameStyle:{borderColor:"#d1d5da",borderLineWidth:1,borderLineDash:[],cornerRadius:10,shadowBlur:6,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(00, 24, 47, 0.06)"},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF",width:3},frozenColumnLine:{shadow:{width:4,startColor:"rgba(00, 24, 47, 0.05)",endColor:"rgba(00, 24, 47, 0)",visible:"always"}},selectionStyle:{cellBgColor:"rgba(255, 255, 255, 0.1)",cellBorderColor:"#4284FF",cellBorderLineWidth:2},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"},functionalIconsStyle:{sort_color:"#FFFFFF",sort_color_opacity:"0.75",sort_color_2:"#416EFF",sort_color_opacity_2:"1",frozen_color:"#FFFFFF",frozen_color_opacity:"0.75",collapse_color:"#FFF",collapse_color_opacity:"0.75",expand_color:"#FFF",expand_color_opacity:"0.75",dragReorder_color:"#FFF",dragReorder_color_opacity:"0.75"}},D={name:"BRIGHT",underlayBackgroundColor:"#FFF",defaultStyle:{color:"#FFF",bgColor:"#5389FF",borderColor:"#5286FA",hover:{cellBgColor:"#2E67E3"}},headerStyle:{color:"#FFF",bgColor:"#5389FF",borderColor:"#A1C1FF",hover:{cellBgColor:"#2E67E3"}},bodyStyle:{color:"#000",bgColor:function(e){let{row:t,table:i}=e;return 1&t-i.frozenRowCount?"#FFF":"#F4F8FF"},borderColor:"#E0EAFE",hover:{cellBgColor:"#E9EFFD"}},frameStyle:{borderColor:"#E1E4E8",borderLineWidth:1,borderLineDash:[],cornerRadius:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"black"},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF",width:3},frozenColumnLine:{shadow:{width:3,startColor:"#CBDCFE",endColor:"#CBDCFE",visible:"always"}},selectionStyle:{cellBgColor:"rgba(0, 0, 255,0.1)"},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"}},z={name:"ARCO",underlayBackgroundColor:"#FFF",defaultStyle:{color:"#1B1F23",bgColor:"#EEF1F5",fontSize:14,fontFamily:"Arial,sans-serif",fontWeight:600,lineHeight:14,borderColor:"#e1e4e8",padding:[8,12,8,12]},headerStyle:{color:"#1B1F23",bgColor:"#EEF1F5",fontSize:14,fontFamily:"Arial,sans-serif",fontWeight:600,lineHeight:14,borderColor:"#e1e4e8",padding:[8,12,8,12],hover:{cellBgColor:"#c8daf6"}},rowHeaderStyle:{color:"#1B1F23",bgColor:"#EEF1F5",fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#e1e4e8",padding:[8,12,8,12],hover:{cellBgColor:"#c8daf6"}},cornerHeaderStyle:{color:"#1B1F23",bgColor:"#EEF1F5",fontSize:12,fontFamily:"PingFang SC",fontWeight:500,lineHeight:12,borderColor:"#e1e4e8",padding:[8,12,8,12],hover:{cellBgColor:"#c8daf6"}},bodyStyle:{padding:[8,12,8,12],color:"#141414",fontSize:14,fontFamily:"Arial,sans-serif",fontWeight:400,textAlign:"left",bgColor:function(e){let{row:t,table:i}=e;return 1&t-i.frozenRowCount?"#fbfbfc":"#FFF"},borderColor:"#e1e4e8",lineHeight:14,hover:{cellBgColor:"#F7F8FA",inlineRowBgColor:"#F3F8FF",inlineColumnBgColor:"#F3F8FF"}},frameStyle:{borderColor:"#d1d5da",borderLineWidth:1,borderLineDash:[],cornerRadius:4,shadowBlur:6,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(00, 24, 47, 0.06)"},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF",width:3},frozenColumnLine:{shadow:{width:4,startColor:"rgba(00, 24, 47, 0.05)",endColor:"rgba(00, 24, 47, 0)",visible:"always"}},selectionStyle:{cellBgColor:"rgba(0, 0, 255,0.1)",cellBorderLineWidth:2,cellBorderColor:"#3073f2"},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"}},W={name:"DEFAULT",underlayBackgroundColor:"#FFF",defaultStyle:{borderColor:"#E1E4E8",color:"#000",bgColor:"#ECF1F5"},headerStyle:{fontSize:16,fontWeight:"bold",bgColor:"#ECF1F5",hover:{cellBgColor:"#CCE0FF",inlineRowBgColor:"#F3F8FF",inlineColumnBgColor:"#F3F8FF"}},rowHeaderStyle:{fontSize:16,fontWeight:"bold",bgColor:"#ECF1F5",hover:{cellBgColor:"#CCE0FF",inlineRowBgColor:"#F3F8FF",inlineColumnBgColor:"#F3F8FF"}},cornerHeaderStyle:{fontSize:16,fontWeight:"bold"},bodyStyle:{fontSize:14,bgColor:function(e){let{row:t,table:i}=e;return 1&t-i.frozenRowCount?"#FDFDFD":"#FAF9FB"},hover:{cellBgColor:"#CCE0FF",inlineRowBgColor:"#F3F8FF",inlineColumnBgColor:"#F3F8FF"}},frameStyle:{borderColor:"#E1E4E8",borderLineWidth:1,borderLineDash:[],cornerRadius:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"black"},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF",width:3},frozenColumnLine:{shadow:{width:3,startColor:"rgba(225, 228, 232, 0.6)",endColor:"rgba(225, 228, 232, 0.6)",visible:"always"}},selectionStyle:{cellBgColor:"rgba(0, 0, 255,0.1)",cellBorderLineWidth:2,cellBorderColor:"#0000ff"},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"}},Z={name:"SIMPLIFY",underlayBackgroundColor:"#FFF",defaultStyle:{borderColor:function(e){let{col:t,table:i}=e,{colCount:r,frozenColCount:n}=i,l="#ccc7c7";return n-1===t||r-1===t?[l,"#f2f2f2","#ccc7c7",null]:[l,null,"#ccc7c7",null]},hover:{cellBorderColor:"#0000FF",cellBgColor:"#D0E0E3"},bgColor:"#FFF"},headerStyle:{color:"rgba(0, 0, 0, 0.87)",borderColor:function(e){let{row:t,table:{frozenRowCount:i}}=e;return i-1===t?["#f2f2f2","#f2f2f2","#ccc7c7","#f2f2f2"]:["#f2f2f2"]}},bodyStyle:{color:"rgba(0, 0, 0, 0.87)"},frameStyle:{borderColor:"#f2f2f2",borderLineWidth:1},columnResize:{lineWidth:1,lineColor:"#416EFF",bgColor:"#D9E2FF"},selectionStyle:{cellBorderColor:"#FD5",cellBgColor:"rgba(111, 168, 220, 0.1)"},tooltipStyle:{bgColor:"#FFF",color:"#000",fontSize:12,fontFamily:"Arial,sans-serif"}},N={};var $=i(51130);let j={visible:!0,position:"auto",padding:8,titleStyle:{fontSize:12,fontWeight:"bold",fill:"#4E5969"},contentStyle:{fontSize:12,fill:"#4E5969"},panel:{visible:!0,fill:"#fff",stroke:"#ffffff",lineWidth:0,cornerRadius:3,shadowBlur:12,shadowOffsetX:0,shadowOffsetY:4,shadowColor:"rgba(0, 0, 0, 0.1)",size:0,space:12}};function G(e,t,i,r){var n,l,o;return null!=(o=null!=(l=null!=(n=(0,P.TS)(e,...i))?n:(0,P.TS)(t,...i))?l:r&&(0,P.TS)(e,...r))?o:r&&(0,P.TS)(t,...r)}class V{constructor(e,t){this._defaultStyle=null,this._header=null,this._cornerHeader=null,this._cornerRightTopCell=null,this._cornerLeftBottomCell=null,this._cornerRightBottomCell=null,this._rightFrozen=null,this._bottomFrozen=null,this._rowHeader=null,this._body=null,this._groupTitle=null,this._scroll=null,this._tooltip=null,this._frameStyle=null,this._columnResize=null,this._dragHeaderSplitLine=null,this._frozenColumnLine=null,this._selectionStyle=null,this._axisStyle=null,this._checkboxStyle=null,this._radioStyle=null,this._switchStyle=null,this._buttonStyle=null,this._textPopTipStyle=null,this._internalIconsStyle=null,this.isPivot=!1,this.name="",this.internalTheme={obj:e,superTheme:t},this.name=G(e,t,["name"])}getExtendTheme(){return this.internalTheme.obj}clearBodyStyleCache(){this._body=null}get font(){let{obj:e,superTheme:t}=this.internalTheme;return G(e,t,["font"],["bodyStyle","font"])}get underlayBackgroundColor(){let{obj:e,superTheme:t}=this.internalTheme;return G(e,t,["underlayBackgroundColor"])}get cellInnerBorder(){var e;let{obj:t,superTheme:i}=this.internalTheme;return null==(e=G(t,i,["cellInnerBorder"]))||e}get cellBorderClipDirection(){var e;let{obj:t,superTheme:i}=this.internalTheme;return null!=(e=G(t,i,["cellBorderClipDirection"]))?e:"top-left"}get _contentOffset(){var e;let{obj:t,superTheme:i}=this.internalTheme;return null!=(e=G(t,i,["_contentOffset"]))?e:0}get defaultStyle(){let e=this;if(!this._defaultStyle){let{obj:K,superTheme:X}=this.internalTheme,Y=(0,H.je)({},X.defaultStyle,K.defaultStyle);this._defaultStyle={get fontSize(){var t;return null!=(t=Y.fontSize)?t:$.ho},get fontFamily(){var i;return null!=(i=Y.fontFamily)?i:$.Rk},get fontWeight(){return Y.fontWeight},get fontVariant(){return Y.fontVariant},get fontStyle(){return Y.fontStyle},get bgColor(){var r;return null!=(r=Y.bgColor)?r:$.aE},get color(){var n;return null!=(n=Y.color)?n:$.yZ},get borderColor(){var l;return null!=(l=Y.borderColor)?l:$.cT},get borderLineWidth(){var o;return null!=(o=Y.borderLineWidth)?o:$.zY},get borderLineDash(){var a;return null!=(a=Y.borderLineDash)?a:$.z8},get hover(){if(Y.hover)return{get cellBgColor(){var s,h;return null!=(h=null==(s=Y.hover)?void 0:s.cellBgColor)?h:void 0},get inlineColumnBgColor(){var d,u,c,p,g,f,m;return null!=(m=null!=(u=null==(d=Y.hover)?void 0:d.inlineColumnBgColor)?u:(null==(c=Y.hover)?void 0:c.cellBgColor)&&"string"==typeof(null==(p=Y.hover)?void 0:p.cellBgColor)&&"transparent"!==(null==(g=Y.hover)?void 0:g.cellBgColor)?(0,H.zX)(null==(f=Y.hover)?void 0:f.cellBgColor,.1,!1):void 0)?m:void 0},get inlineRowBgColor(){var b,y,v,_,C,x,w;return null!=(w=null!=(y=null==(b=Y.hover)?void 0:b.inlineRowBgColor)?y:(null==(v=Y.hover)?void 0:v.cellBgColor)&&"string"==typeof(null==(_=Y.hover)?void 0:_.cellBgColor)&&"transparent"!==(null==(C=Y.hover)?void 0:C.cellBgColor)?(0,H.zX)(null==(x=Y.hover)?void 0:x.cellBgColor,.1,!1):void 0)?w:void 0}}},get select(){if(Y.select)return{get inlineColumnBgColor(){var S,A,k,M,T,R;return null!=(R=null!=(M=null!=(A=null==(S=Y.select)?void 0:S.inlineColumnBgColor)?A:null==(k=e.selectionStyle)?void 0:k.inlineColumnBgColor)?M:(null==(T=e.selectionStyle)?void 0:T.cellBgColor)&&"string"==typeof e.selectionStyle.cellBgColor&&"transparent"!==e.selectionStyle.cellBgColor?(0,H.zX)(e.selectionStyle.cellBgColor,.1,!1):void 0)?R:void 0},get inlineRowBgColor(){var E,P,B,I,L;return null!=(L=null!=(B=null!=(P=null==(E=Y.select)?void 0:E.inlineRowBgColor)?P:e.selectionStyle.inlineRowBgColor)?B:(null==(I=e.selectionStyle)?void 0:I.cellBgColor)&&"string"==typeof e.selectionStyle.cellBgColor&&"transparent"!==e.selectionStyle.cellBgColor?(0,H.zX)(e.selectionStyle.cellBgColor,.1,!1):void 0)?L:void 0}}},get padding(){var F;return null!=(F=Y.padding)?F:[10,16,10,16]},get textAlign(){var O;return null!=(O=Y.textAlign)?O:"left"},get textStickBaseOnAlign(){return Y.textStickBaseOnAlign},get textBaseline(){var D;return null!=(D=Y.textBaseline)?D:"middle"},get textOverflow(){var z;return null!=(z=Y.textOverflow)?z:"ellipsis"},get lineHeight(){return Y.lineHeight},get autoWrapText(){var W;return null!=(W=Y.autoWrapText)&&W},get lineClamp(){var Z;return null!=(Z=Y.lineClamp)?Z:"auto"},get linkColor(){var N;return null!=(N=Y.linkColor)?N:"#3772ff"},get cursor(){var j;return null!=(j=Y.cursor)?j:"auto"},get marked(){var G;return null!=(G=Y.marked)&&G},get underline(){var V;return null!=(V=Y.underline)&&V},get underlineColor(){return Y.underlineColor},get underlineDash(){return Y.underlineDash},get underlineOffset(){return Y.underlineOffset},get lineThrough(){var U;return null!=(U=Y.lineThrough)&&U},get lineThroughColor(){return Y.lineThroughColor},get lineThroughDash(){return Y.lineThroughDash}}}return this._defaultStyle}get cornerHeaderStyle(){if(!this._cornerHeader){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},this.defaultStyle,t.cornerHeaderStyle,e.cornerHeaderStyle);this._cornerHeader=this.getStyle(i)}return this._cornerHeader}get cornerRightTopCellStyle(){if(!this._cornerRightTopCell){let{obj:e,superTheme:t}=this.internalTheme;if(!t.cornerRightTopCellStyle&&!e.cornerRightTopCellStyle)return this._cornerRightTopCell;let i=(0,H.je)({},this.defaultStyle,t.cornerRightTopCellStyle,e.cornerRightTopCellStyle);this._cornerRightTopCell=this.getStyle(i)}return this._cornerRightTopCell}get cornerLeftBottomCellStyle(){if(!this._cornerLeftBottomCell){let{obj:e,superTheme:t}=this.internalTheme;if(!t.cornerLeftBottomCellStyle&&!e.cornerLeftBottomCellStyle)return this._cornerLeftBottomCell;let i=(0,H.je)({},this.defaultStyle,t.cornerLeftBottomCellStyle,e.cornerLeftBottomCellStyle);this._cornerLeftBottomCell=this.getStyle(i)}return this._cornerLeftBottomCell}get cornerRightBottomCellStyle(){if(!this._cornerRightBottomCell){let{obj:e,superTheme:t}=this.internalTheme;if(!t.cornerRightBottomCellStyle&&!e.cornerRightBottomCellStyle)return this._cornerRightBottomCell;let i=(0,H.je)({},this.defaultStyle,t.cornerRightBottomCellStyle,e.cornerRightBottomCellStyle);this._cornerRightBottomCell=this.getStyle(i)}return this._cornerRightBottomCell}get rightFrozenStyle(){if(!this._rightFrozen){let{obj:e,superTheme:t}=this.internalTheme;if(!t.rightFrozenStyle&&!e.rightFrozenStyle)return this._rightFrozen;let i=(0,H.je)({},this.defaultStyle,this.rowHeaderStyle,t.rightFrozenStyle,e.rightFrozenStyle);this._rightFrozen=this.getStyle(i)}return this._rightFrozen}get bottomFrozenStyle(){if(!this._bottomFrozen){let{obj:e,superTheme:t}=this.internalTheme;if(!t.bottomFrozenStyle&&!e.bottomFrozenStyle)return this._bottomFrozen;let i=(0,H.je)({},this.defaultStyle,this.headerStyle,t.bottomFrozenStyle,e.bottomFrozenStyle);this._bottomFrozen=this.getStyle(i)}return this._bottomFrozen}get rowHeaderStyle(){var e;if(!this._rowHeader){let{obj:t,superTheme:i}=this.internalTheme,r=(0,H.je)({},this.defaultStyle,i.rowHeaderStyle,null!=(e=t.rowHeaderStyle)?e:this.isPivot?null:t.headerStyle);this._rowHeader=this.getStyle(r)}return this._rowHeader}get headerStyle(){if(!this._header){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},this.defaultStyle,t.headerStyle,e.headerStyle);this._header=this.getStyle(i)}return this._header}get bodyStyle(){if(!this._body){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},this.defaultStyle,t.bodyStyle,e.bodyStyle);this._body=this.getStyle(i)}return this._body}get groupTitleStyle(){if(!this._groupTitle){let{obj:e,superTheme:t}=this.internalTheme;if(!t.groupTitleStyle&&!e.groupTitleStyle)return this._groupTitle;let i=(0,H.je)({},this.defaultStyle,t.groupTitleStyle,e.groupTitleStyle);this._groupTitle=this.getStyle(i)}return this._groupTitle}get frameStyle(){if(!this._frameStyle){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},t.frameStyle,e.frameStyle);this._frameStyle={get borderColor(){return i.borderColor},get borderLineWidth(){return i.borderLineWidth},get borderLineDash(){return i.borderLineDash},get innerBorder(){return i.innerBorder},get shadowBlur(){return i.shadowBlur},get shadowColor(){return i.shadowColor},get shadowOffsetX(){return i.shadowOffsetX},get shadowOffsetY(){return i.shadowOffsetY},get cornerRadius(){return i.cornerRadius}}}return this._frameStyle}get scrollStyle(){if(!this._scroll){let{obj:s,superTheme:h}=this.internalTheme,d=(0,H.je)({},h.scrollStyle,s.scrollStyle);this._scroll={get scrollSliderColor(){var e;return null!=(e=d.scrollSliderColor)?e:"#C0C0C0"},get scrollSliderCornerRadius(){return d.scrollSliderCornerRadius},get scrollRailColor(){return d.scrollRailColor},get visible(){var t;return null!=(t=d.visible)?t:"scrolling"},get verticalVisible(){return d.verticalVisible},get horizontalVisible(){return d.horizontalVisible},get width(){var i;return null!=(i=d.width)?i:7},get hoverOn(){var r;return null==(r=d.hoverOn)||r},get barToSide(){var n;return null!=(n=d.barToSide)&&n},get horizontalPadding(){var l;return null!=(l=d.horizontalPadding)?l:0},get verticalPadding(){var o;return null!=(o=d.verticalPadding)?o:0},get ignoreFrozenCols(){var a;return null!=(a=d.ignoreFrozenCols)&&a}}}return this._scroll}get tooltipStyle(){if(!this._tooltip){let{obj:l,superTheme:o}=this.internalTheme,a=(0,H.je)({},o.tooltipStyle,l.tooltipStyle);this._tooltip={get fontFamily(){var e;return null!=(e=a.fontFamily)?e:$.Rk},get fontSize(){var t;return null!=(t=a.fontSize)?t:$.ho},get bgColor(){var i;return null!=(i=a.bgColor)?i:"#000"},get padding(){var r;return null!=(r=a.padding)?r:[6,8]},get color(){var n;return null!=(n=a.color)?n:"#FFF"},get maxWidth(){return a.maxWidth},get maxHeight(){return a.maxHeight}}}return this._tooltip}get columnResize(){if(!this._columnResize){let{obj:c,superTheme:p}=this.internalTheme,g=(0,H.je)({},p.columnResize,c.columnResize);this._columnResize={get lineColor(){var e;return null!=(e=g.lineColor)?e:"#416EFF"},get bgColor(){var t;return null!=(t=g.bgColor)?t:"#D9E2FF"},get lineWidth(){var i;return null!=(i=g.lineWidth)?i:1},get width(){var r;return null!=(r=g.width)?r:g.lineWidth+2},get resizeHotSpotSize(){var n;return null!=(n=g.resizeHotSpotSize)?n:16},get labelColor(){var l;return null!=(l=g.labelColor)?l:"#FFF"},get labelFontSize(){var o;return null!=(o=g.labelFontSize)?o:10},get labelFontFamily(){var a;return null!=(a=g.labelFontFamily)?a:"sans-serif"},get labelBackgroundFill(){var s;return null!=(s=g.labelBackgroundFill)?s:"#3073F2"},get labelBackgroundCornerRadius(){var h;return null!=(h=g.labelBackgroundCornerRadius)?h:5},get labelVisible(){var d;return null==(d=g.labelVisible)||d},get visibleOnHover(){var u;return null!=(u=g.visibleOnHover)&&u}}}return this._columnResize}get dragHeaderSplitLine(){if(!this._dragHeaderSplitLine){let{obj:r,superTheme:n}=this.internalTheme,l=(0,H.je)({},n.dragHeaderSplitLine,r.dragHeaderSplitLine);this._dragHeaderSplitLine={get lineColor(){var e;return null!=(e=l.lineColor)?e:"blue"},get lineWidth(){var t;return null!=(t=l.lineWidth)?t:2},get shadowBlockColor(){var i;return null!=(i=l.shadowBlockColor)?i:"rgba(204,204,204,0.3)"}}}return this._dragHeaderSplitLine}get frozenColumnLine(){if(!this._frozenColumnLine){let{obj:_,superTheme:C}=this.internalTheme,x=(0,H.je)({},C.frozenColumnLine,_.frozenColumnLine);this._frozenColumnLine={get shadow(){if(x.shadow)return{get width(){var e,t;return null!=(t=null==(e=x.shadow)?void 0:e.width)?t:24},get startColor(){var i,r;return null!=(r=null==(i=x.shadow)?void 0:i.startColor)?r:"rgba(00, 24, 47, 0.06)"},get endColor(){var n,l;return null!=(l=null==(n=x.shadow)?void 0:n.endColor)?l:"rgba(00, 24, 47, 0)"},get visible(){var o,a;return null!=(a=null==(o=x.shadow)?void 0:o.visible)?a:"always"}}},get border(){if(x.border)return{get lineColor(){var s,h;return null!=(h=null==(s=x.border)?void 0:s.lineColor)?h:"rgba(00, 24, 47, 0.06)"},get bgColor(){var d,u,c,p;return null!=(p=null!=(u=null==(d=x.border)?void 0:d.bgColor)?u:null==(c=x.border)?void 0:c.lineColor)?p:"rgba(00, 24, 47, 0.06)"},get lineWidth(){var g,f;return null!=(f=null==(g=x.border)?void 0:g.lineWidth)?f:4},get width(){var m,b,y,v;return null!=(v=null!=(b=null==(m=x.border)?void 0:m.width)?b:null==(y=x.border)?void 0:y.lineWidth)?v:4}}}}}return this._frozenColumnLine}get selectionStyle(){if(!this._selectionStyle){let{obj:l,superTheme:o}=this.internalTheme,a=(0,H.je)({},o.selectionStyle,l.selectionStyle);this._selectionStyle={get cellBgColor(){var e;return null!=(e=null==a?void 0:a.cellBgColor)?e:"rgba(0, 0, 255,0.1)"},get cellBorderColor(){var t;return null!=(t=null==a?void 0:a.cellBorderColor)?t:"#3073f2"},get cellBorderLineWidth(){var i;return null!=(i=null==a?void 0:a.cellBorderLineWidth)?i:2},get inlineColumnBgColor(){return null==a?void 0:a.inlineColumnBgColor},get inlineRowBgColor(){return null==a?void 0:a.inlineRowBgColor},get selectionFillMode(){var r;return null!=(r=null==a?void 0:a.selectionFillMode)?r:"overlay"},get dynamicUpdateSelectionSize(){var n;return null!=(n=null==a?void 0:a.dynamicUpdateSelectionSize)&&n}}}return this._selectionStyle}get axisStyle(){if(!this._axisStyle){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},t.axisStyle,e.axisStyle);this._axisStyle={defaultAxisStyle:i.defaultAxisStyle||{},leftAxisStyle:i.leftAxisStyle||{},rightAxisStyle:i.rightAxisStyle||{},topAxisStyle:i.topAxisStyle||{},bottomAxisStyle:i.bottomAxisStyle||{}}}return this._axisStyle}get checkboxStyle(){if(!this._checkboxStyle){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},t.checkboxStyle,e.checkboxStyle);this._checkboxStyle=i}return this._checkboxStyle}get radioStyle(){if(!this._radioStyle){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},t.radioStyle,e.radioStyle);this._radioStyle=i}return this._radioStyle}get switchStyle(){if(!this._switchStyle){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},t.switchStyle,e.switchStyle);this._switchStyle=i}return this._switchStyle}get buttonStyle(){if(!this._buttonStyle){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},t.buttonStyle,e.buttonStyle);this._buttonStyle=i}return this._buttonStyle}get textPopTipStyle(){if(!this._textPopTipStyle){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},j,t.textPopTipStyle,e.textPopTipStyle);this._textPopTipStyle=i}return this._textPopTipStyle}get functionalIconsStyle(){if(!this._internalIconsStyle){let{obj:e,superTheme:t}=this.internalTheme,i=(0,H.je)({},t.functionalIconsStyle,e.functionalIconsStyle);this._internalIconsStyle=i}return this._internalIconsStyle}hasProperty(e){let{obj:t,superTheme:i}=this.internalTheme;return U(t,e)||U(i,e)}extends(e){return new V((0,H.je)({},e),(0,H.je)({},this.internalTheme.superTheme,this.internalTheme.obj))}getStyle(e){let t=this;return{get fontSize(){return e.fontSize},get fontFamily(){return e.fontFamily},get fontWeight(){return e.fontWeight},get fontVariant(){return e.fontVariant},get fontStyle(){return e.fontStyle},get bgColor(){return e.bgColor},get color(){return e.color},get strokeColor(){return e.strokeColor},get borderColor(){return e.borderColor},get borderLineWidth(){return e.borderLineWidth},get borderLineDash(){return e.borderLineDash},get hover(){if(e.hover)return{get cellBgColor(){var i,r;return null!=(r=null==(i=e.hover)?void 0:i.cellBgColor)?r:void 0},get inlineColumnBgColor(){var n,l,o,a,s,h,d;return null!=(d=null!=(l=null==(n=e.hover)?void 0:n.inlineColumnBgColor)?l:(null==(o=e.hover)?void 0:o.cellBgColor)&&"string"==typeof(null==(a=e.hover)?void 0:a.cellBgColor)&&"transparent"!==(null==(s=e.hover)?void 0:s.cellBgColor)?(0,H.zX)(null==(h=e.hover)?void 0:h.cellBgColor,.1,!1):void 0)?d:void 0},get inlineRowBgColor(){var u,c,p,g,f,m,b;return null!=(b=null!=(c=null==(u=e.hover)?void 0:u.inlineRowBgColor)?c:(null==(p=e.hover)?void 0:p.cellBgColor)&&"string"==typeof(null==(g=e.hover)?void 0:g.cellBgColor)&&"transparent"!==(null==(f=e.hover)?void 0:f.cellBgColor)?(0,H.zX)(null==(m=e.hover)?void 0:m.cellBgColor,.1,!1):void 0)?b:void 0}}},get select(){return{get inlineColumnBgColor(){var y,v,_,C,x,w;return null!=(w=null!=(C=null!=(v=null==(y=e.select)?void 0:y.inlineColumnBgColor)?v:null==(_=t.selectionStyle)?void 0:_.inlineColumnBgColor)?C:(null==(x=t.selectionStyle)?void 0:x.cellBgColor)&&"string"==typeof t.selectionStyle.cellBgColor&&"transparent"!==t.selectionStyle.cellBgColor?(0,H.zX)(t.selectionStyle.cellBgColor,.1,!1):void 0)?w:void 0},get inlineRowBgColor(){var S,A,k,M,T;return null!=(T=null!=(k=null!=(A=null==(S=e.select)?void 0:S.inlineRowBgColor)?A:t.selectionStyle.inlineRowBgColor)?k:(null==(M=t.selectionStyle)?void 0:M.cellBgColor)&&"string"==typeof t.selectionStyle.cellBgColor&&"transparent"!==t.selectionStyle.cellBgColor?(0,H.zX)(t.selectionStyle.cellBgColor,.1,!1):void 0)?T:void 0},get cellBgColor(){var R,E,P;if("replace"===t.selectionStyle.selectionFillMode)return null!=(P=null!=(E=null==(R=e.select)?void 0:R.cellBgColor)?E:t.selectionStyle.cellBgColor)?P:void 0}}},get frameStyle(){if(e.frameStyle)return{get borderColor(){var B,I;return null!=(I=null==(B=e.frameStyle)?void 0:B.borderColor)?I:void 0},get borderLineWidth(){var L,F;return null!=(F=null==(L=e.frameStyle)?void 0:L.borderLineWidth)?F:void 0},get borderLineDash(){var O,D;return null!=(D=null==(O=e.frameStyle)?void 0:O.borderLineDash)?D:void 0}}},get padding(){return e.padding},get textAlign(){return e.textAlign},get textBaseline(){return e.textBaseline},get textOverflow(){return e.textOverflow},get lineHeight(){return e.lineHeight},get autoWrapText(){return e.autoWrapText},get lineClamp(){return e.lineClamp},get linkColor(){return e.linkColor},get cursor(){return e.cursor},get textStick(){return e.textStick},get textStickBaseOnAlign(){return e.textStickBaseOnAlign},get marked(){return e.marked},get underline(){var z;return null!=(z=e.underline)&&z},get underlineColor(){return e.underlineColor},get underlineDash(){return e.underlineDash},get underlineOffset(){return e.underlineOffset},get lineThrough(){var W;return null!=(W=e.lineThrough)&&W},get lineThroughColor(){return e.lineThroughColor},get lineThroughDash(){return e.lineThroughDash}}}}function U(e,t){if(e instanceof V)return e.hasProperty(t);let i=e;if(!i)return!1;for(let e=0;e<t.length;e++)if(!(i=i[t[e]]))return!1;return!!i}let K=new V(O,O),X=new V(D,D),Y=new V(z,z),q=new V(W,W),J={DEFAULT:q,SIMPLIFY:new V(Z,Z),ARCO:Y,DARK:K,BRIGHT:X},Q={DEFAULT:q,of:function(e){if(!e)return null;if("string"==typeof e){let t=(0,P.I0)((0,P.l7)(J,N),e);return t?t instanceof V?t:new V(t,t):null}return e instanceof V?e:new V(e,e)}};var ee=i(60779),et=i(73036),ei=i(89495),er=i(34505),en=i(41857),el=i(80808),eo=i(15776),ea=i(68825),es=i(76401),eh=i(11511),ed=i(29922),eu=i(67286),ec=i(99754),ep=i(74512),eg=i(66994),ef=i(16636),em=i(24599);let eb=!1;var ey=i(24197),ev=i(39818),e_=i(27594),eC=i(54833),ex=i(46320),ew=i(23946),eS=i(94308),eA=i(7388),ek=i(297),eM=i(4654);function eT(e){return!!("cell"===e.role&&(0,eM.Z)(e.mergeStartCol)&&(0,eM.Z)(e.mergeStartRow)&&(0,eM.Z)(e.mergeEndCol)&&(0,eM.Z)(e.mergeEndRow))}var eR=i(76352),eE=i(89883),eP=i(43624),eB=i(15829);function eI(e,t,i,r){!r&&i&&e.table._setRowHeight(t,e.table.getRowHeight(t)+i,!0);for(let r=0;r<e.table.colCount;r++){var n,l,o,a,s,h,d;let u=e.getCell(r,t);if("empty"===u.role)continue;let c=(0,e_.Z)(e.table,r,t);c&&c.start.col!==r||(n=e,l=u,o=r,a=t,s=u.attribute.height+i,h=i,d=e.table.isHeader(r,t),l&&eL(n,l,o,a,s,h,d),e.updateCellContentWhileResize(r,t))}let u=0,c=0;t<e.table.frozenRowCount?(u=t+1,c=e.table.frozenRowCount-1):t>=e.table.rowCount-e.table.bottomFrozenRowCount?(u=t+1,c=e.table.rowCount-1):(u=t+1,c=Math.min(e.proxy.rowEnd,e.table.rowCount-e.table.bottomFrozenRowCount-1));for(let t=0;t<e.table.colCount;t++)for(let r=u;r<=c;r++){let n=e.highPerformanceGetCell(t,r);"cell"===n.role&&n.setAttribute("y",n.attribute.y+i)}}function eL(e,t,i,r,n,l,o){var a,s,h,d,u;if(t.attribute.height===n&&!t.needUpdateHeight)return;t.needUpdateHeight=!1,t.setAttribute("height",n);let c=null==(a=e.table.getCellRawRecord(i,r))?void 0:a.vtableMerge,p=!!e.table.getCustomMerge(i,r),g=c||p?"text":e.table.isHeader(i,r)?null!=(s=e.table._getHeaderLayoutMap(i,r).headerType)?s:"text":null!=(h=e.table.getBodyColumnType(i,r))?h:"text";if("progressbar"===g){let o,a=e.table.getBodyColumnDefine(i,r),s=e.table._getCellStyle(i,r),h=e.table.getCellValue(i,r),d=e.table.getCellOriginValue(i,r),u=(0,eR.u)((0,ek.WJ)("padding",s,i,r,e.table));(null==a?void 0:a.mergeCell)&&(o=e.table.getCellRange(i,r));let c=eC.F.getFunction("createProgressBarCell")(a,s,t.attribute.width,h,d,i,r,u,e.table,o),p=t.getChildByName("progress-bar");t.insertBefore(c,p),t.removeChild(p),p.removeAllChild(),p.release(),eF(t,n,l,e.table.isAutoRowHeight(r),!0,e.table)}else if("sparkline"===g){t.removeAllChild();let n=e.table._getCellStyle(i,r),l=(0,eR.u)((0,ek.WJ)("padding",n,i,r,e.table));eC.F.getFunction("createSparkLineCellGroup")(t,t.parent,t.attribute.x,t.attribute.y,i,r,t.attribute.width,t.attribute.height,l,e.table,(0,ex.RT)(n,e.table,i,r,ek.WJ).theme,!1)}else if("image"===g||"video"===g)(0,eS.km)(t,i,r,0,l,e.table);else if("axis"===(null==(d=t.firstChild)?void 0:d.name))null==(u=t.firstChild)||u.originAxis.resize(t.attribute.width,t.attribute.height);else{let o=!0,a=t.getChildByName(ew.FH)||t.getChildByName(ew.cd);if(a){let n;t.removeChild(a);let l=(0,eA.l7)(i,r,t,e.table);if(l)for(let t=l.start.row;t<=l.end.row;t++){if(t===r)continue;let n=e.getCell(i,t),l=n.getChildByName(ew.FH)||n.getChildByName(ew.cd);l.removeAllChild(),n.removeChild(l),(0,eA.l7)(i,t,n,e.table)}else{let l,a,s=e.table.getCellLocation(i,r),{vtableMerge:h}=e.table.getCellRawRecord(i,r)||{};if(h&&e.table.internalProps.groupTitleCustomLayout)a=e.table.internalProps.groupTitleCustomLayout;else if("body"!==s){let t=e.table.getHeaderDefine(i,r);l=null==t?void 0:t.headerCustomRender,a=null==t?void 0:t.headerCustomLayout}else{let t=e.table.getBodyColumnDefine(i,r);l=(null==t?void 0:t.customRender)||e.table.customRender,a=null==t?void 0:t.customLayout}if((l||a)&&eT(t))for(let i=t.mergeStartCol;i<=t.mergeEndCol;i++)for(let n=t.mergeStartRow;n<=t.mergeEndRow;n++)n!==r&&e.updateCellContent(i,n);if(a||l){let s=e.table._getCellStyle(i,r),h=(0,eR.u)((0,ek.WJ)("padding",s,i,r,e.table)),d=t.attribute.width,u=t.attribute.height;eT(t)&&(d=e.table.getColsWidth(t.mergeStartCol,t.mergeEndCol),u=e.table.getRowsHeight(t.mergeStartRow,t.mergeEndRow));let c=(0,ew.ws)(a,l,i,r,d,u,!1,e.table.isAutoRowHeight(r),h,eT(t)?{start:{col:t.mergeStartCol,row:t.mergeStartRow},end:{col:t.mergeEndCol,row:t.mergeEndRow}}:void 0,e.table);n=c.elementsGroup,o=c.renderDefault}t.childrenCount>0&&n?t.insertBefore(n,t.firstChild):n&&t.appendChild(n)}}eF(t,n,l,e.table.isAutoRowHeight(r),o,e.table)}}function eF(e,t,i,r,n,l){if(eT(e)){t=0;for(let i=e.mergeStartRow;i<=e.mergeEndRow;i++)t+=l.getRowHeight(i);let{colStart:o,colEnd:a,rowStart:s,rowEnd:h}=(0,eB.e)(e,l.scenegraph);for(let d=o;d<=a;d++)for(let a=s;a<=h;a++){let h=l.scenegraph.getCell(d,a);if("cell"!==h.role)continue;if(h.forEachChildren(e=>{e.setAttributes({dx:0,dy:0})}),n){let e=l._getCellStyle(o,s),n=(0,eR.u)((0,ek.WJ)("padding",e,d,a,l));(0,eE.Zl)(h,t,i,r,n,e.textAlign,e.textBaseline,l)}let u=l.getRowHeight(a),c=l.getColWidth(d);h.contentHeight=t;let{widthChange:p}=(0,eA.NQ)(h,c,u,{start:{col:e.mergeStartCol,row:e.mergeStartRow},end:{col:e.mergeEndCol,row:e.mergeEndRow}},l);p&&(h.needUpdateWidth=!0)}}else{let n=l._getCellStyle(e.col,e.row),o=(0,eR.u)((0,ek.WJ)("padding",n,e.col,e.row,l));(0,eE.Zl)(e,t,i,r,o,n.textAlign,n.textBaseline,l)}}var eH=i(48523);function eO(e,t,i,r){var n,l,o,a,s,h,d;let u=!1,c=null!=(n=null==e?void 0:e.attribute.width)?n:0;if(null==e||e.setAttribute("width",c+t),null==e||e.forEachChildren((e,n)=>{if(function(e,t,i,r,n,l,o,a,s){var h,d,u,c,p,g,f;if(t.attribute.width===l&&!t.needUpdateWidth)return!1;if(t.needUpdateWidth=!1,t.setAttribute("width",l),!t)return!1;let m=e.table.isAutoRowHeight(r),b=null==(h=e.table.getCellRawRecord(i,r))?void 0:h.vtableMerge,y=!!e.table.getCustomMerge(i,r),v=b||y?"text":e.table.isHeader(i,r)?null!=(d=e.table._getHeaderLayoutMap(i,r).headerType)?d:"text":null!=(u=e.table.getBodyColumnType(i,r))?u:"text",_=!1;if("progressbar"===v){let n,a=e.table.getBodyColumnDefine(i,r),s=e.table._getCellStyle(i,r),h=e.table.getCellValue(i,r),d=e.table.getCellOriginValue(i,r),u=(0,eR.u)((0,ek.WJ)("padding",s,i,r,e.table));(null==a?void 0:a.mergeCell)&&(n=e.table.getCellRange(i,r));let c=eC.F.getFunction("createProgressBarCell")(a,s,t.attribute.width,h,d,i,r,u,e.table,n),p=t.getChildByName("progress-bar");t.insertBefore(c,p),t.removeChild(p),p.removeAllChild(),p.release();let g=eD(t,l,o,m,!0,e.table);_=_||g}else if("sparkline"===v){t.removeAllChild();let n=e.table._getCellStyle(i,r),l=(0,eR.u)((0,ek.WJ)("padding",n,i,r,e.table));eC.F.getFunction("createSparkLineCellGroup")(t,t.parent,t.attribute.x,t.attribute.y,i,r,t.attribute.width,t.attribute.height,l,e.table,(0,ex.RT)(n,e.table,i,r,ek.WJ).theme,!1)}else if("image"===v||"video"===v)(0,eS.km)(t,i,r,o,0,e.table);else if("axis"===(null==(c=t.firstChild)?void 0:c.name)){let n=e.table.internalProps.layoutMap.getAxisConfigInPivotChart(i,r),l=e.table._getCellStyle(i,r),o=(0,eR.u)((0,ek.WJ)("padding",l,i,r,e.table));if(n){let i=new(eC.F.getComponent("axis"))(n,t.attribute.width,t.attribute.height,null!=(p=n.__vtableBodyChartCellPadding)?p:o,e.table);t.clear(),t.appendChild(i.component),i.overlap()}}else if("axis"===(null==(g=t.firstChild)?void 0:g.name))null==(f=t.firstChild)||f.originAxis.resize(t.attribute.width,t.attribute.height);else{let n=!0,a=t.getChildByName(ew.FH)||t.getChildByName(ew.cd);if(a){let l;t.removeChild(a);let o=(0,eA.l7)(i,r,t,e.table);if(o)for(let t=o.start.col;t<=o.end.col;t++){if(t===i)continue;let n=e.getCell(t,r),l=n.getChildByName(ew.FH)||n.getChildByName(ew.cd);l.removeAllChild(),n.removeChild(l),(0,eA.l7)(t,r,n,e.table)}else{let o,a,s=e.table.getCellLocation(i,r),{vtableMerge:h}=e.table.getCellRawRecord(i,r)||{};if(h&&e.table.internalProps.groupTitleCustomLayout)a=e.table.internalProps.groupTitleCustomLayout;else if("body"!==s){let t=e.table.getHeaderDefine(i,r);o=null==t?void 0:t.headerCustomRender,a=null==t?void 0:t.headerCustomLayout}else{let t=e.table.getBodyColumnDefine(i,r);o=(null==t?void 0:t.customRender)||e.table.customRender,a=null==t?void 0:t.customLayout}if((o||a)&&eT(t)){for(let r=t.mergeStartCol;r<=t.mergeEndCol;r++)if(r!==i)for(let i=t.mergeStartRow;i<=t.mergeEndRow;i++)e.updateCellContent(r,i)}if(a||o){let s=e.table._getCellStyle(i,r),h=(0,eR.u)((0,ek.WJ)("padding",s,i,r,e.table)),d=t.attribute.width,u=t.attribute.height;eT(t)&&(d=e.table.getColsWidth(t.mergeStartCol,t.mergeEndCol),u=e.table.getRowsHeight(t.mergeStartRow,t.mergeEndRow));let c=(0,ew.ws)(a,o,i,r,d,u,!1,e.table.isAutoRowHeight(r),h,eT(t)?{start:{col:t.mergeStartCol,row:t.mergeStartRow},end:{col:t.mergeEndCol,row:t.mergeEndRow}}:void 0,e.table);l=c.elementsGroup,n=c.renderDefault,_=!0}t.childrenCount>0&&l?t.insertBefore(l,t.firstChild):l&&t.appendChild(l)}}let s=eD(t,l,o,m,n,e.table);_=_||s}return s||(s=e.table._getCellStyle(i,r).autoWrapText),!(!m||!s)&&_}(r,e,e.col,e.row,0,c+t,t,"row-body"!==i||(e.col,r.table.rowHeaderLevelCount),r.table.internalProps.autoWrapText)){let t=(0,e_.Z)(r.table,e.col,e.row);if(t&&t.end.row-t.start.row)for(let e=t.start.row;e<=t.end.row;e++)ez(r,e);else ez(r,e.row);u=!0}}),u){let e,t,n,u=0;for(let c=0;c<r.table.colCount;c++){if("col-corner"===i?(n=0,e=r.getColGroup(c,!0),t=null!=(l=r.colHeaderGroup.attribute.height)?l:0):"row-body"===i?(n=r.table.frozenRowCount,e=r.getColGroup(c,!1),t=null!=(o=r.bodyGroup.attribute.height)?o:0):"bottom"===i?(n=r.table.rowCount-r.table.bottomFrozenRowCount,e=r.getColGroupInBottom(c),t=null!=(a=r.bottomFrozenGroup.attribute.height)?a:0):"left-bottom"===i?(n=r.table.rowCount-r.table.bottomFrozenRowCount,e=r.getColGroupInLeftBottomCorner(c),t=null!=(s=r.leftBottomCornerGroup.attribute.height)?s:0):"right-top"===i?(n=0,e=r.getColGroupInRightTopCorner(c),t=null!=(h=r.rightTopCornerGroup.attribute.height)?h:0):"right-bottom"===i&&(n=r.table.rowCount-r.table.bottomFrozenRowCount,e=r.getColGroupInRightBottomCorner(c),t=null!=(d=r.rightBottomCornerGroup.attribute.height)?d:0),!e)continue;let p=0;e.forEachChildren(e=>{var t;e.setAttribute("y",p),p+=null!=(t=r.table.getRowHeight(e.row))?t:0}),u=p}r.updateContainerHeight(n,u-t);for(let e=0;e<r.table.frozenColCount;e++){let t=r.getColGroupInLeftBottomCorner(e),i=0;null==t||t.forEachChildren(e=>{e.setAttribute("y",i),i+=r.table.getRowHeight(e.row)})}for(let e=r.table.colCount-r.table.rightFrozenColCount;e<r.table.colCount;e++){let t=r.getColGroupInRightBottomCorner(e),i=0;null==t||t.forEachChildren(e=>{e.setAttribute("y",i),i+=r.table.getRowHeight(e.row)})}for(let e=r.table.frozenColCount;e<r.table.colCount-r.table.rightFrozenColCount;e++){let t=r.getColGroupInBottom(e),i=0;null==t||t.forEachChildren(e=>{e.setAttribute("y",i),i+=r.table.getRowHeight(e.row)})}}}function eD(e,t,i,r,n,l){if(eT(e)){t=0;let o=!1;for(let i=e.mergeStartCol;i<=e.mergeEndCol;i++)t+=l.getColWidth(i);let a=0;for(let t=e.mergeStartRow;t<=e.mergeEndRow;t++)a+=l.getRowHeight(t);let{colStart:s,colEnd:h,rowStart:d,rowEnd:u}=(0,eB.e)(e,l.scenegraph);for(let c=s;c<=h;c++)for(let h=d;h<=u;h++){if(c===e.col&&h!==e.row)continue;let u=l.scenegraph.getCell(c,h);if("cell"!==u.role)continue;u.forEachChildren(e=>{e.setAttributes({dx:0,dy:0})});let p=!1;if(n){let e=l._getCellStyle(s,d),n=(0,eR.u)((0,ek.WJ)("padding",e,c,h,l)),o=e.textAlign,g=e.textBaseline;p=(0,eE.qs)(u,t,a,i,r,n,o,g,l.scenegraph);let f=(0,eH.L)(u.col,u.row,l);if(f){let e=u.getChildByName("text"),t=u.getChildByName("expand")||u.getChildByName("collapse");"icon-left"!==(null==t?void 0:t.role)&&e&&e.setAttribute("dx",f)}}let g=l.getRowHeight(h),f=l.getColWidth(c);u.contentWidth=t;let{heightChange:m}=(0,eA.NQ)(u,f,g,{start:{col:e.mergeStartCol,row:e.mergeStartRow},end:{col:e.mergeEndCol,row:e.mergeEndRow}},l);m&&(u.needUpdateHeight=!0),o=o||p}return o}let o=l._getCellStyle(e.col,e.row),a=(0,eR.u)((0,ek.WJ)("padding",o,e.col,e.row,l)),s=o.textAlign,h=o.textBaseline;return(0,eE.qs)(e,t,l.getRowHeight(e.row),i,r,a,s,h,l.scenegraph)}function ez(e,t){let i=Math.round((0,eP.P)(t,0,e.table.colCount-1,e.table));e.table._setRowHeight(t,i,!0);for(let o=0;o<e.table.colCount;o++){var r,n,l;let a=e.highPerformanceGetCell(o,t);"empty"!==a.role&&(r=o,n=i-a.attribute.height,l=e.table.isHeader(o,t),a&&eL(e,a,r,t,i,n,l))}}var eW=i(9252),eZ=i(63654),eN=i(22288),e$=i(8849),ej=i(88266),eG=i(88536),eV=i(81584);(f=m||(m={})).dropDown="dropDown",f.contextmenu="contextmenu",f.custom="custom";let eU={fontSize:12,fontFamily:"Arial,sans-serif",color:"#000",highlightColor:"#2E68CF",hoverBgColor:"#EEE",lineHeight:30,bgColor:"#FFF",cornerRadius:4,borderWidth:.5,borderColor:"#CCC",menuPadding:6,menuItemPadding:9,maxLineWidth:200};class eK{constructor(e){this._table=e,this._menuInstance=new eG.Z({x:0,y:0,fill:eU.bgColor,stroke:eU.borderColor,cornerRadius:eU.cornerRadius,lineWidth:eU.borderWidth}),this._menuInfo={x:-1,y:-1,col:-1,row:-1,type:m.dropDown,menuInfo:[],highlightIndex:-1}}bindTableComponent(e){e.appendChild(this._menuInstance),this.bindEvent()}release(){}attach(e,t,i,r,n,l){if(n===m.dropDown&&this.checkDropDownMenuChange(i,r)){let e=this.getMenuInfo(i,r,n);if(!e)return;let{menuInfo:t,highlightIndex:l}=e;this.updateMenuInfo(i,r,n,t,l),this.updateMenuInstance(t,l)}else if(n===m.contextmenu&&this.checkContextMenuChange(e,t)){let e=this.getMenuInfo(i,r,n);if(!e)return;let{menuInfo:t,highlightIndex:l}=e;this.updateMenuInfo(i,r,n,t,l),this.updateMenuInstance(t,l)}this.updatePosition(e-this._table.scenegraph.x,t-this._table.scenegraph.y),this.addToScene()}updateMenuInfo(e,t,i,r,n){this._menuInfo.col=e,this._menuInfo.row=t,this._menuInfo.type=i,this._menuInfo.menuInfo=r,this._menuInfo.highlightIndex=n}checkDropDownMenuChange(e,t){let{type:i,col:r,row:n}=this._menuInfo;return i!==m.dropDown||e!==r||t!==n}checkContextMenuChange(e,t){var i;let{type:r,menuInfo:n}=this._menuInfo;return r!==m.contextmenu||n!==(null==(i=this._table.internalProps.menu)?void 0:i.contextMenuItems)}updateMenuInstance(e,t){this._menuInstance.removeAllChild();let i=eU.menuPadding,r=eU.menuPadding,n=0;e.forEach((e,l)=>{var o,a;let s,h,d=t===l;"string"==typeof e?h=e:"object"==typeof e&&(h=e.text,s=d?e.selectedIcon:e.icon);let u=new eG.Z({y:i,x:r,height:eU.lineHeight,fill:eU.bgColor});u.role="menu-item",this._menuInstance.appendChild(u),u.stateProxy=e=>"hover"===e?{fill:eU.hoverBgColor}:{fill:eU.bgColor},u.addEventListener("pointerenter",e=>{u.addState("hover",!0,!1),this._table.scenegraph.updateNextFrame()}),u.addEventListener("pointerleave",e=>{u.removeState("hover",!1),this._table.scenegraph.updateNextFrame()});let c=new eZ.x({x:eU.menuItemPadding,y:eU.menuItemPadding,fill:d?eU.highlightColor:eU.color,text:h,textBaseline:"top",fontSize:eU.fontSize,fontFamily:eU.fontFamily,pickable:!1,maxLineWidth:eU.maxLineWidth,ellipsis:""});if(u.addChild(c),s){c.AABBBounds.height();let e=null!=(o=s.width)?o:16,t=null!=(a=s.height)?a:16,i=new eV.J({x:eU.menuItemPadding,y:(eU.lineHeight-t)/2,width:e,height:t,image:s.svg,pickable:!1});i.role="menu-icon",u.insertBefore(i,c),c.setAttribute("x",e+eU.menuItemPadding)}n=Math.max(u.AABBBounds.width(),n),i+=eU.lineHeight}),this._menuInstance.setAttributes({width:n+2*eU.menuItemPadding+2*eU.menuPadding,height:i+eU.menuPadding}),this._menuInstance.forEachChildren(e=>{e.setAttribute("width",n+2*eU.menuItemPadding)})}updatePosition(e,t){this._menuInstance.setAttributes({x:this._menuInfo.type===m.dropDown?e-this._menuInstance.attribute.width:e,y:t}),this._menuInfo.x=m.dropDown?e-this._menuInstance.attribute.width:e,this._menuInfo.y=t}addToScene(){this._table.scenegraph.updateNextFrame()}detach(){this._menuInstance.setAttributes({x:-1e3,y:-1e3}),this._table.scenegraph.updateNextFrame()}getMenuInfo(e,t,i){var r;if(i===m.dropDown){let i=this._table.globalDropDownMenu;"function"==typeof(i=this._table._getHeaderLayoutMap(e,t).dropDownMenu)&&(i=i({row:t,col:e,table:this._table}));let r=-1;if(Array.isArray(i)){for(let n=0;n<i.length;n++)if(this._table._dropDownMenuIsHighlight(e,t,n)){r=n;break}}return{menuInfo:i,highlightIndex:r}}if(i===m.contextmenu){let i,n=null==(r=this._table.internalProps.menu)?void 0:r.contextMenuItems;if(Array.isArray(n))i=n;else if("function"==typeof n){let{field:r}=this._table.isHeader(e,t)?this._table.getHeaderDefine(e,t):this._table.getBodyColumnDefine(e,t);i=n(r,t,e)}return{menuInfo:i,highlightIndex:-1}}}bindEvent(){this._menuInstance.addEventListener("click",e=>{let{target:t}=e;if(t&&"menu-item"===t.role){let i=Object.assign(this.getEventInfo(t),this._table.getMenuInfo(this._menuInfo.col,this._menuInfo.row,this._menuInfo.type));i.event=e.nativeEvent,this._table.fireListeners(B.B.DROPDOWN_MENU_CLICK,i)}})}getEventInfo(e){let t=e.parent,i=0;t.forEachChildren((t,r)=>t===e&&(i=r-1,!0));let r="string"==typeof this._menuInfo.menuInfo[i]?this._menuInfo.menuInfo[i]:this._menuInfo.menuInfo[i].text,n="string"==typeof this._menuInfo.menuInfo[i]?r:this._menuInfo.menuInfo[i].menuKey||r;return{col:this._menuInfo.col,row:this._menuInfo.row,dropDownIndex:i,highlight:i===this._menuInfo.highlightIndex,text:r,menuKey:n}}get bounds(){return this._menuInstance.globalAABBBounds}}var eX=i(1800);let eY=eX.U2();class eq{constructor(){let e=eY.drillDown;this.icon=new eV.J({x:-1e3,y:-1e3,image:e.svg,width:e.width,height:e.height,dx:-e.width/2,dy:-e.height/2,visible:!1,funcType:e.funcType,cursor:e.cursor}),this.icon.role="icon-drill"}appand(e){e.appendChild(this.icon)}update(e,t,i,r,n,l){if(!e||r&&n)return this.icon.setAttributes({x:-1e3,y:-1e3,visible:!1}),void l.updateNextFrame();let o=eY.drillDown,a=eY.drillUp;this.icon.setAttributes({x:t,y:i,image:r?o.svg:a.svg,visible:!0}),this.icon.loadImage(this.icon.attribute.image),l.updateNextFrame()}}var eJ=i(78503);class eQ{constructor(e){let t=e.theme.dragHeaderSplitLine.lineWidth,i=e.theme.dragHeaderSplitLine.lineColor,r=e.theme.dragHeaderSplitLine.shadowBlockColor;this.columnMoverLabel=(0,eJ.t)({visible:!1,pickable:!1,x:0,y:0,symbolType:"triangle",fill:i}),this.columnMoverLine=(0,eW.W)({visible:!1,pickable:!1,stroke:i,lineWidth:t,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),this.columnMoverBack=(0,eN.f)({visible:!1,pickable:!1,fill:r,x:0,y:0,width:0,height:0}),this.table=e}appand(e){e.appendChild(this.columnMoverLabel),e.appendChild(this.columnMoverLine),e.appendChild(this.columnMoverBack)}show(e,t,i){let r=this.table.getCellLocation(e,t),n=(0,e_.Z)(this.table,e,t);n&&(e=n.start.col,t=n.start.row);let l=0,o=0,a=0,s=0,h=0,d=0,u=0,c=0,p=Math.PI,g=[],f=this.table.stateManager.columnMove.movingColumnOrRow;return"columnHeader"===r&&void 0===f||"column"===f?(l=this.table.getColsWidth(0,e-1)-this.table.stateManager.scroll.horizontalBarPos,o=this.table.getRowsHeight(0,this.table.frozenRowCount-1),s=this.table.tableNoFrameHeight,a=n?this.table.getColsWidth(n.start.col,n.end.col):this.table.getColWidth(e),h=l-i,u=l+a,c=2,g.push({x:0,y:0}),g.push({x:0,y:this.table.tableNoFrameHeight})):("rowHeader"===r||this.table.internalProps.layoutMap.isSeriesNumberInBody(e,t)||"row"===f)&&(o=this.table.getRowsHeight(0,t-1)-this.table.stateManager.scroll.verticalBarPos,l=this.table.getColsWidth(0,this.table.frozenColCount-1),a=this.table.tableNoFrameWidth,s=n?this.table.getRowsHeight(n.start.row,n.end.row):this.table.getRowHeight(t),d=o-i,u=2,c=o+s,p=Math.PI/2,g.push({x:0,y:0}),g.push({x:this.table.tableNoFrameWidth,y:0})),this.columnMoverBack.setAttributes({visible:!0,x:l-h,y:o-d,width:a,height:s,dx:h,dy:d}),this.columnMoverLine.setAttributes({x:u,y:c,visible:!0,points:g}),this.columnMoverLabel.setAttributes({visible:!0,x:u,y:c,angle:p}),{backX:l-h,lineX:u,backY:o-d,lineY:c}}hide(){this.columnMoverLabel.setAttribute("visible",!1),this.columnMoverLine.setAttribute("visible",!1),this.columnMoverBack.setAttribute("visible",!1)}update(e,t,i,r){"number"==typeof e&&"number"==typeof t?(this.columnMoverLabel.setAttribute("x",t),this.columnMoverLine.setAttribute("x",t),this.columnMoverBack.setAttribute("x",e)):"number"==typeof i&&"number"==typeof r&&(this.columnMoverLabel.setAttribute("y",r),this.columnMoverLine.setAttribute("y",r),this.columnMoverBack.setAttribute("y",i))}updateStyle(){let e=this.table.theme.dragHeaderSplitLine.lineWidth,t=this.table.theme.dragHeaderSplitLine.lineColor,i=this.table.theme.dragHeaderSplitLine.shadowBlockColor;this.columnMoverLabel.setAttributes({fill:t}),this.columnMoverLine.setAttributes({stroke:t,lineWidth:e}),this.columnMoverBack.setAttributes({fill:i})}}function e0(e,t,i){if(i)return Math.min(t.tableNoFrameWidth,t.getAllColsWidth())-t.getColsWidth(e,t.colCount-1);let r=t.getColsWidth(0,e);return e>=t.frozenColCount&&(r-=t.scrollLeft),r}function e1(e,t,i){if(i)return Math.min(t.tableNoFrameWidth,t.getAllRowsHeight())-t.getRowsHeight(e,t.rowCount-1);let r=t.getRowsHeight(0,e);return e>=t.frozenRowCount&&(r-=t.scrollTop),r}class e2{constructor(e){var t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v;this.table=e;let _=this.table.theme;this.createScrollBar();let C=null==(t=_.columnResize)?void 0:t.lineColor,x=null==(i=_.columnResize)?void 0:i.lineWidth,w=null==(r=_.columnResize)?void 0:r.bgColor,S=null==(n=_.columnResize)?void 0:n.width,A=null==(o=null==(l=_.columnResize)?void 0:l.labelVisible)||o,k=null==(a=_.columnResize)?void 0:a.labelColor,M=null==(s=_.columnResize)?void 0:s.labelFontSize,T=null==(h=_.columnResize)?void 0:h.labelFontFamily,R=null==(d=_.columnResize)?void 0:d.labelBackgroundFill,E=null==(u=_.columnResize)?void 0:u.labelBackgroundCornerRadius;this.labelVisible=A,this.columnResizeLine=(0,eW.W)({visible:!1,pickable:!1,stroke:C,lineWidth:x,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),this.columnResizeBgLine=(0,eW.W)({visible:!1,pickable:!1,stroke:w,lineWidth:S,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]});let P=(0,eZ.r)({visible:!1,pickable:!1,x:0,y:0,fontSize:M,fill:k,fontFamily:T,text:"",textBaseline:"top",dx:16,dy:-M/2}),B=(0,eN.f)({visible:!1,pickable:!1,fill:R,x:0,y:0,width:5*M*.8,height:M+8,cornerRadius:E,dx:12,dy:-M/2-4});this.columnResizeLabel=(0,e$.sS)({visible:!1,pickable:!1,x:0,y:0}),this.columnResizeLabel.appendChild(B),this.columnResizeLabel.appendChild(P),this.rowResizeLine=(0,eW.W)({visible:!1,pickable:!1,stroke:C,lineWidth:x,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]}),this.rowResizeBgLine=(0,eW.W)({visible:!1,pickable:!1,stroke:w,lineWidth:S,x:0,y:0,points:[{x:0,y:0},{x:0,y:0}]});let I=(0,eZ.r)({visible:!1,pickable:!1,x:0,y:0,fontSize:M,fill:k,fontFamily:T,text:"",textBaseline:"top",dx:16,dy:-M/2}),L=(0,eN.f)({visible:!1,pickable:!1,fill:R,x:0,y:0,width:5*M*.8,height:M+8,cornerRadius:E,dx:12,dy:-M/2-4});this.rowResizeLabel=(0,e$.sS)({visible:!1,pickable:!1,x:0,y:0}),this.rowResizeLabel.appendChild(L),this.rowResizeLabel.appendChild(I),this.cellMover=new eQ(this.table);let F=null==(p=null==(c=_.frozenColumnLine)?void 0:c.shadow)?void 0:p.width,H=null==(f=null==(g=_.frozenColumnLine)?void 0:g.shadow)?void 0:f.startColor,O=null==(b=null==(m=_.frozenColumnLine)?void 0:m.shadow)?void 0:b.endColor,D=null==(v=null==(y=_.frozenColumnLine)?void 0:y.shadow)?void 0:v.visible;this.frozenShadowLine=(0,eN.f)({visible:"always"===D,pickable:!1,x:0,y:0,width:F,height:0,fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:[{color:H,offset:0},{color:O,offset:1}]}}),this.rightFrozenShadowLine=(0,eN.f)({visible:"always"===D,pickable:!1,x:0,y:0,width:F,height:0,fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:[{color:O,offset:0},{color:H,offset:1}]}}),this.menu=new eK(this.table),this.drillIcon=new eq}addToGroup(e){e.addChild(this.frozenShadowLine),e.addChild(this.rightFrozenShadowLine),e.addChild(this.columnResizeBgLine),e.addChild(this.columnResizeLine),e.addChild(this.columnResizeLabel),e.addChild(this.rowResizeBgLine),e.addChild(this.rowResizeLine),e.addChild(this.rowResizeLabel),this.table.theme.scrollStyle.hoverOn&&!this.table.theme.scrollStyle.barToSide?(e.addChild(this.hScrollBar),e.addChild(this.vScrollBar)):(e.stage.defaultLayer.addChild(this.hScrollBar),e.stage.defaultLayer.addChild(this.vScrollBar)),this.menu.bindTableComponent(e),this.drillIcon.appand(e),this.cellMover.appand(e)}createScrollBar(){var e,t,i,r,n,l;let o,a=this.table.theme,s=null==(e=a.scrollStyle)?void 0:e.scrollRailColor,h=null==(t=a.scrollStyle)?void 0:t.scrollSliderColor,d=null==(i=a.scrollStyle)?void 0:i.scrollSliderCornerRadius,u=null==(r=a.scrollStyle)?void 0:r.width,c=null==(n=a.scrollStyle)?void 0:n.horizontalPadding,p=null==(l=a.scrollStyle)?void 0:l.verticalPadding;o=(0,b.Z)(d)?{cornerRadius:d,fill:h}:{fill:h},this.hScrollBar=new ej.B({direction:"horizontal",x:-(2*this.table.tableNoFrameWidth),y:-(2*this.table.tableNoFrameHeight),width:this.table.tableNoFrameWidth,height:u,padding:c,railStyle:{fill:s},sliderStyle:o,range:[0,.1],visible:!1}),this.hScrollBar.render(),this.hScrollBar.hideAll(),this.vScrollBar=new ej.B({direction:"vertical",x:-(2*this.table.tableNoFrameWidth),y:-(2*this.table.tableNoFrameHeight),width:u,height:this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight(),padding:p,railStyle:{fill:s},sliderStyle:o,range:[0,.1],visible:!1}),this.vScrollBar.render(),this.vScrollBar.hideAll()}updateScrollBar(){var e,t,i,r,n,l,o,a,s;let h=this.table.stateManager.scroll.horizontalBarPos,d=this.table.stateManager.scroll.verticalBarPos,u=this.table.theme,c=null==(e=u.scrollStyle)?void 0:e.width,p=null==(t=u.scrollStyle)?void 0:t.visible,g=null!=(r=null==(i=u.scrollStyle)?void 0:i.horizontalVisible)?r:p,f=null!=(l=null==(n=u.scrollStyle)?void 0:n.verticalVisible)?l:p,m=Math.ceil(this.table.tableNoFrameWidth),b=Math.ceil(this.table.tableNoFrameHeight),y=this.table.getAllRowsHeight(),v=this.table.getAllColsWidth(),_=this.table.getFrozenRowsHeight(),C=this.table.getFrozenColsWidth(),x=this.table.getBottomFrozenRowsHeight(),w=this.table.getRightFrozenColsWidth(),S=this.table.theme.scrollStyle.hoverOn,A=+(null!=(o=this.table.options.customConfig)&&!!o._disableColumnAndRowSizeRound);if(v>m+A){let e=Math.min(b,y),t=Math.max(.05,(m-C)/(v-C)),i=0;i=this.table.theme.scrollStyle.barToSide?this.table.tableNoFrameHeight-(S?c:-this.table.scenegraph.tableGroup.attribute.y)+this.table.tableY:e-(S?c:-this.table.scenegraph.tableGroup.attribute.y);let r=C+(S?0:this.table.scenegraph.tableGroup.attribute.x),n=m-C-w;null!=(s=null==(a=this.table.theme.scrollStyle)?void 0:a.ignoreFrozenCols)&&s?(r=S?0:this.table.scenegraph.tableGroup.attribute.x,n=m):(r=C+(S?0:this.table.scenegraph.tableGroup.attribute.x),n=m-C-w),this.hScrollBar.setAttributes({x:r,y:i,width:n,range:[0,t],visible:"always"===g});let l=this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds;this.hScrollBar._viewPosition={x:l.x1,y:l.y1},"always"===g&&this.hScrollBar.showAll()}else this.hScrollBar.setAttributes({x:-(2*this.table.tableNoFrameWidth),y:-(2*this.table.tableNoFrameHeight),width:0,visible:!1});if(y>b+A){let e=Math.min(m,v),t=Math.max(.05,(b-_)/(y-_)),i=0;i=this.table.theme.scrollStyle.barToSide?this.table.tableNoFrameWidth-(S?c:-this.table.scenegraph.tableGroup.attribute.x)+this.table.tableX:e-(S?c:-this.table.scenegraph.tableGroup.attribute.x),this.vScrollBar.setAttributes({x:i,y:_+(S?0:this.table.scenegraph.tableGroup.attribute.y),height:b-_-x,range:[0,t],visible:"always"===f});let r=this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds;this.vScrollBar._viewPosition={x:r.x1,y:r.y1},"always"===f&&this.vScrollBar.showAll()}else this.vScrollBar.setAttributes({x:-(2*this.table.tableNoFrameWidth),y:-(2*this.table.tableNoFrameHeight),height:0,visible:!1});this.table.stateManager.setScrollLeft(h),this.table.stateManager.setScrollTop(d)}hideResizeCol(){this.columnResizeLine.setAttribute("visible",!1),this.columnResizeBgLine.setAttribute("visible",!1),this.columnResizeLabel.setAttribute("visible",!1),this.columnResizeLabel.hideAll()}showResizeCol(e,t,i){let r=e0(e,this.table,i);this.columnResizeLine.setAttributes({visible:!0,x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.columnResizeBgLine.setAttributes({visible:!0,x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.labelVisible&&(this.columnResizeLabel.showAll(),this.columnResizeLabel.setAttributes({visible:!0,x:r,y:t}),this.columnResizeLabel.lastChild.setAttribute("text",`${this.table.getColWidth(e)}px`))}updateResizeCol(e,t,i){let r=e0(e,this.table,i);this.columnResizeLine.setAttributes({x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.columnResizeBgLine.setAttributes({x:r,points:[{x:0,y:0},{x:0,y:this.table.getRowsHeight(0,this.table.rowCount-1)}]}),this.labelVisible&&(this.columnResizeLabel.setAttributes({x:r,y:t}),this.columnResizeLabel.lastChild.setAttribute("text",`${Math.floor(this.table.getColWidth(e))}px`))}hideResizeRow(){this.rowResizeLine.setAttribute("visible",!1),this.rowResizeBgLine.setAttribute("visible",!1),this.rowResizeLabel.setAttribute("visible",!1),this.rowResizeLabel.hideAll()}showResizeRow(e,t,i){let r=e1(e,this.table,i);this.rowResizeLine.setAttributes({visible:!0,y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.rowResizeBgLine.setAttributes({visible:!0,y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.labelVisible&&(this.rowResizeLabel.showAll(),this.rowResizeLabel.setAttributes({visible:!0,y:r,x:t}),this.rowResizeLabel.lastChild.setAttribute("text",`${this.table.getRowHeight(e)}px`))}updateResizeRow(e,t,i){let r=e1(e,this.table,i);this.rowResizeLine.setAttributes({y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.rowResizeBgLine.setAttributes({y:r,points:[{y:0,x:0},{y:0,x:this.table.getColsWidth(0,this.table.colCount-1)}]}),this.labelVisible&&(this.rowResizeLabel.setAttributes({y:r,x:t}),this.rowResizeLabel.lastChild.setAttribute("text",`${Math.floor(this.table.getRowHeight(e))}px`))}hideMoveCol(){this.cellMover.hide()}showMoveCol(e,t,i){return this.cellMover.show(e,t,i)}updateMoveCol(e,t,i,r){this.cellMover.update(e,t,i,r)}setFrozenColumnShadow(e,t){var i,r;let n=e0(e,this.table,t);e<0||"always"!==(null==(r=null==(i=this.table.theme.frozenColumnLine)?void 0:i.shadow)?void 0:r.visible)?this.frozenShadowLine.setAttributes({visible:!1,x:n,height:this.table.getDrawRange().height}):this.frozenShadowLine.setAttributes({visible:!0,x:n,height:this.table.getDrawRange().height})}setRightFrozenColumnShadow(e){var t,i;let r=e0(e,this.table,!0);e>=this.table.colCount||"always"!==(null==(i=null==(t=this.table.theme.frozenColumnLine)?void 0:t.shadow)?void 0:i.visible)?this.rightFrozenShadowLine.setAttributes({visible:!1,x:r-this.rightFrozenShadowLine.attribute.width,height:this.table.getDrawRange().height}):this.rightFrozenShadowLine.setAttributes({visible:!0,x:r-this.rightFrozenShadowLine.attribute.width,height:this.table.getDrawRange().height})}hideFrozenColumnShadow(){var e,t,i,r,n;let l=null==(t=null==(e=this.table.theme.frozenColumnLine)?void 0:e.shadow)?void 0:t.visible;"scrolling"===(null!=(n=null==(r=null==(i=this.table.theme.frozenColumnLine)?void 0:i.shadow)?void 0:r.visible)?n:l)&&(this.frozenShadowLine.setAttribute("visible",!1),this.rightFrozenShadowLine.setAttribute("visible",!1),this.table.scenegraph.updateNextFrame())}showFrozenColumnShadow(){var e,t,i,r,n;let l=null==(t=null==(e=this.table.theme.frozenColumnLine)?void 0:e.shadow)?void 0:t.visible;"scrolling"===(null!=(n=null==(r=null==(i=this.table.theme.frozenColumnLine)?void 0:i.shadow)?void 0:r.visible)?n:l)&&(this.frozenShadowLine.setAttribute("visible",!0),this.rightFrozenShadowLine.setAttribute("visible",!0),this.table.scenegraph.updateNextFrame())}hideVerticalScrollBar(){var e;let t=this.table.theme.scrollStyle.visible,i=null!=(e=this.table.theme.scrollStyle.verticalVisible)?e:t;"focus"!==i&&"scrolling"!==i||(this.vScrollBar.setAttribute("visible",!1),this.vScrollBar.hideAll(),this.table.scenegraph.updateNextFrame())}showVerticalScrollBar(){var e;let t=this.table.theme.scrollStyle.visible,i=null!=(e=this.table.theme.scrollStyle.verticalVisible)?e:t;"focus"!==i&&"scrolling"!==i||(this.vScrollBar.setAttribute("visible",!0),this.vScrollBar.showAll(),this.table.scenegraph.updateNextFrame())}hideHorizontalScrollBar(){var e;let t=this.table.theme.scrollStyle.visible,i=null!=(e=this.table.theme.scrollStyle.horizontalVisible)?e:t;"focus"!==i&&"scrolling"!==i||(this.hScrollBar.setAttribute("visible",!1),this.hScrollBar.hideAll(),this.table.scenegraph.updateNextFrame())}showHorizontalScrollBar(){var e;let t=this.table.theme.scrollStyle.visible,i=null!=(e=this.table.theme.scrollStyle.horizontalVisible)?e:t;"focus"!==i&&"scrolling"!==i||(this.hScrollBar.setAttribute("visible",!0),this.hScrollBar.showAll(),this.table.scenegraph.updateNextFrame())}updateVerticalScrollBarPos(e){let t=this.vScrollBar.attribute.range,i=t[1]-t[0],r=e*(1-i);this.vScrollBar.setAttribute("range",[r,r+i]);let n=this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds;this.vScrollBar._viewPosition={x:n.x1,y:n.y1}}updateHorizontalScrollBarPos(e){let t=this.hScrollBar.attribute.range,i=t[1]-t[0],r=e*(1-i);this.hScrollBar.setAttribute("range",[r,r+i]);let n=this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds;this.hScrollBar._viewPosition={x:n.x1,y:n.y1}}updateStyle(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,y,v,_,C,x,w;let S,A=this.table.theme,k=null==(e=A.scrollStyle)?void 0:e.scrollRailColor,M=null==(t=A.scrollStyle)?void 0:t.scrollSliderColor,T=null==(i=A.scrollStyle)?void 0:i.scrollSliderCornerRadius,R=null==(r=A.scrollStyle)?void 0:r.width,E=null==(n=A.scrollStyle)?void 0:n.horizontalPadding,P=null==(l=A.scrollStyle)?void 0:l.verticalPadding;S=(0,b.Z)(T)?{cornerRadius:T,fill:M}:{fill:M},this.hScrollBar.setAttributes({height:R,padding:E,railStyle:{fill:k},sliderStyle:S}),this.vScrollBar.setAttributes({width:R,padding:P,railStyle:{fill:k},sliderStyle:S});let B=null==(o=A.columnResize)?void 0:o.lineColor,I=null==(a=A.columnResize)?void 0:a.lineWidth,L=null==(s=A.columnResize)?void 0:s.bgColor,F=null==(h=A.columnResize)?void 0:h.width;this.columnResizeLine.setAttributes({stroke:B,lineWidth:I}),this.columnResizeBgLine=(0,eW.W)({stroke:L,lineWidth:F});let H=null==(d=A.columnResize)?void 0:d.labelColor,O=null==(u=A.columnResize)?void 0:u.labelFontSize,D=null==(c=A.columnResize)?void 0:c.labelFontFamily,z=null==(p=A.columnResize)?void 0:p.labelBackgroundFill,W=null==(g=A.columnResize)?void 0:g.labelBackgroundCornerRadius,Z=null==(m=null==(f=A.columnResize)?void 0:f.labelVisible)||m;this.labelVisible=Z,this.columnResizeLabel.lastChild.setAttributes({fontSize:O,fill:H,fontFamily:D,dy:-O/2}),this.columnResizeLabel.firstChild.setAttributes({fill:z,width:5*O*.8,height:O+8,cornerRadius:W,dy:-O/2-4}),this.rowResizeLabel.lastChild.setAttributes({fontSize:O,fill:H,fontFamily:D,dy:-O/2}),this.rowResizeLabel.firstChild.setAttributes({fill:z,width:5*O*.8,height:O+8,cornerRadius:W,dy:-O/2-4});let N=null==(v=null==(y=A.frozenColumnLine)?void 0:y.shadow)?void 0:v.width,$=null==(C=null==(_=A.frozenColumnLine)?void 0:_.shadow)?void 0:C.startColor,j=null==(w=null==(x=A.frozenColumnLine)?void 0:x.shadow)?void 0:w.endColor;this.frozenShadowLine.setAttributes({width:N,fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:[{color:$,offset:0},{color:j,offset:1}]}}),this.rightFrozenShadowLine.setAttributes({width:N,fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:[{color:j,offset:0},{color:$,offset:1}]}}),this.cellMover.updateStyle()}}var e3=i(95723);function e4(e,t,i,r,n){var l,o,a,s,h,d;if(!t)return;let u="table"===i,{shadowBlur:c,shadowOffsetX:p,shadowOffsetY:g,shadowColor:f,cornerRadius:m,borderColor:b,borderLineWidth:y,borderLineDash:v}=t,_=!1,C={},x={pickable:!1};c&&u&&(x.shadowBlur=c,x.shadowOffsetX=p,x.shadowOffsetY=g,x.shadowColor=f,x.stroke=!0,x.stroke=f,x.lineWidth=1,_=!0),y&&(x.stroke=!0,x.fill=!1,x.stroke=e6(null!=b?b:"#E1E4E8",r,y),x.lineWidth=y,v&&(x.lineDash=v),x.lineCap="butt"),Array.isArray(b)&&(x.strokeArrayColor=(0,eR.u)(b)),Array.isArray(y)&&(x.strokeArrayWidth=(0,eR.u)(y),x.lineWidth=1),m&&(x.cornerRadius=m,C.cornerRadius=m);let w=x.strokeArrayWidth?x.strokeArrayWidth[0]:null!=(l=x.lineWidth)?l:0,S=x.strokeArrayWidth?x.strokeArrayWidth[1]:null!=(o=x.lineWidth)?o:0,A=x.strokeArrayWidth?x.strokeArrayWidth[2]:null!=(a=x.lineWidth)?a:0,k=x.strokeArrayWidth?x.strokeArrayWidth[3]:null!=(s=x.lineWidth)?s:0;if(e.setAttributes(C),!n)if(x.stroke)if(x.x=k/2,x.y=w/2,x.pickable=!1,u){let i,r;if(m)if(Array.isArray(m)){let e=(0,eR.u)(m);x.cornerRadius=e,C.cornerRadius=e,e[0]&&(e[0]=e[0]+Math.min(k,w)/2),e[1]&&(e[1]=e[1]+Math.min(w,S)/2),e[2]&&(e[2]=e[2]+Math.min(S,A)/2),e[3]&&(e[3]=e[3]+Math.min(A,k)/2)}else if((0,e3.Z)(y)){let e=[];x.cornerRadius=e,C.cornerRadius=e,e[0]=m+Math.min(k,w)/2,e[1]=m+Math.min(w,S)/2,e[2]=m+Math.min(S,A)/2,e[3]=m+Math.min(A,k)/2}else x.cornerRadius=m+(null!=(h=x.lineWidth)?h:0)/2,C.cornerRadius=m+(null!=(d=x.lineWidth)?d:0)/2;if(t.innerBorder?(x.x=e.attribute.x+k/2,x.y=e.attribute.y+w/2,x.width=e.attribute.width-k/2-S/2,x.height=e.attribute.height-w/2-A/2):(x.x=e.attribute.x-k/2,x.y=e.attribute.y-w/2,x.width=e.attribute.width+k/2+S/2,x.height=e.attribute.height+w/2+A/2),_){x.fill="white",x.notAdjustPos=!0,(r=(0,e$.sS)(x)).name="table-border-rect",i=(0,eN.f)({x:k/2,y:w/2,width:e.attribute.width,height:e.attribute.height,fill:"red",cornerRadius:e.attribute.cornerRadius,globalCompositeOperation:"destination-out"}),r.addChild(i);let t=(0,eN.f)({x:k/2,y:w/2,width:e.attribute.width,height:e.attribute.height,fill:"transparent",pickable:!1,globalCompositeOperation:"source-over"});r.addChild(t)}else(r=(0,eN.f)(x)).name="table-border-rect";t.innerBorder&&!_?e.parent.insertAfter(r,e):e.parent.insertBefore(r,e),e.border=r}else{x.width=e.attribute.width-k/2-S/2,x.height=e.attribute.height-w/2-A/2;let t=(0,eN.f)(x);t.name="border-rect",e.addChild(t),e.border=t}else{let t=(0,eN.f)({fill:!1,stroke:!1,pickable:!1,lineWidth:0});t.name="border-rect",e.addChild(t),e.border=t}}function e5(e,t,i){var r;if(!t)return;let{borderColor:n}=t;null==(r=e.border)||r.setAttribute("stroke",e6(n,i))}function e6(e,t,i){let r=!0;return!t&&!(0,e3.Z)(i)||(0,e3.Z)(e)?t?r=t:t||(0,e3.Z)(e)?(0,e3.Z)(e)&&(r=!0):r=e:r=(null!=t?t:i).map(t=>!!t&&e),r}function e8(e){var t,i,r,n;if(!e.border)return;let l=e.border.attribute.strokeArrayWidth?e.border.attribute.strokeArrayWidth[0]:null!=(t=e.border.attribute.lineWidth)?t:0,o=e.border.attribute.strokeArrayWidth?e.border.attribute.strokeArrayWidth[1]:null!=(i=e.border.attribute.lineWidth)?i:0,a=e.border.attribute.strokeArrayWidth?e.border.attribute.strokeArrayWidth[2]:null!=(r=e.border.attribute.lineWidth)?r:0,s=e.border.attribute.strokeArrayWidth?e.border.attribute.strokeArrayWidth[3]:null!=(n=e.border.attribute.lineWidth)?n:0;e.border.setAttributes({borderLeft:s,borderTop:l,borderRight:o,borderBottom:a,width:e.attribute.width-s/2-o/2,height:e.attribute.height-l/2-a/2}),"group"===e.border.type&&e.border.firstChild.setAttributes({width:e.attribute.width,height:e.attribute.height})}function e7(e,t){e.setAttribute("cornerRadius",t),e.border&&e.border.setAttribute("cornerRadius",t)}var e9=i(22415),te=i(3570),tt=i(13922),ti=i(32227),tr=i(57355),tn=i(85668),tl=i(75946),to=i(17852),ta=i(34865),ts=i(87399),th=i(34399);let td=Symbol.for("ChartRender");Symbol.for("ChartRenderContribution");let tu=class extends tl.Y{constructor(){super(...arguments),this.numberType=ts.e}drawShape(e,t,i,r,n,l,o,a){var s,h,d,u;let c=(0,to.gh)(e,null==l?void 0:l.theme).group,{dataId:p,data:g,spec:f}=e.attribute,{width:m=c.width,height:b=c.height}=(e.getViewBox(),e.attribute),{table:y}=e.getRootNode(),{cacheCanvas:v,activeChartInstance:_}=e;if(!_&&v)(0,e3.Z)(v)?v.forEach(e=>{let{x:i,y:r,width:n,height:l,canvas:o}=e;t.drawImage(o,i,r,n,l)}):t.drawImage(v,i,r,m,b);else if(_){if(y.options.specFormat){let t=y.options.specFormat(e.attribute.spec,_,e);if(t.needFormatSpec&&t.spec){let e=t.spec;_.updateSpecSync(e,!1,{reuse:!1,morph:!1})}}let t=e.getViewBox();_.updateViewBox({x1:0,x2:t.x2-t.x1,y1:0,y2:t.y2-t.y1},!1,!1);let i=_.getStage();i.needRender=!0;let r=e.globalTransMatrix.clone(),n=e.stage.window.getViewBoxTransform().clone();if(n.multiply(r.a,r.b,r.c,r.d,r.e,r.f),i.window.setViewBoxTransform(n.a,n.b,n.c,n.d,n.e,n.f),"string"==typeof p||"number"==typeof p)_.updateDataSync(p,null!=g?g:[]);else{let e=[];for(let t in p){let i=p[t],r=f.series.find(e=>{var i;return(null==(i=null==e?void 0:e.data)?void 0:i.id)===t});e.push({id:t,values:i?null!=(s=null==g?void 0:g.filter(e=>e.hasOwnProperty(i)))?s:[]:null!=g?g:[],fields:null==(h=null==r?void 0:r.data)?void 0:h.fields}),_.updateFullDataSync||_.updateDataSync(t,i?null!=(d=null==g?void 0:g.filter(e=>e.hasOwnProperty(i)))?d:[]:null!=g?g:[])}null==(u=_.updateFullDataSync)||u.call(_,e)}}else y.internalProps.renderChartAsync?(-1===th.A8.indexOf(`${e.parent.col}+${e.parent.row}`)&&(th.A8.push(`${e.parent.col}+${e.parent.row}`),th.LO.push(e)),(0,th.a5)()||(0,th.eO)(y)):(0,th.pF)(e)}draw(e,t,i,r){this._draw(e,{},!1,i,r)}};tu=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([(0,ta.b)()],tu);var tc=i(97708),tp=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o};let tg=class{constructor(){this.time=tc.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{shape:p}=e.attribute;if("circle"===p){let{width:n=s.width,height:l=s.height}=e.attribute;t.beginPath(),t.arc(i+n/2,r+l/2,Math.min(n,l)/2,0,2*Math.PI),t.closePath(),t.save(),t.clip()}}};tg=tp([(0,ta.b)()],tg);let tf=class{constructor(){this.time=tc.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{shape:p}=e.attribute;"circle"===p&&t.restore()}};tf=tp([(0,ta.b)()],tf);let tm=class{constructor(){this.time=tc.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{isGif:p}=e.attribute;p&&e.playing&&(e.attribute.opacity=0)}};tm=tp([(0,ta.b)()],tm);let tb=class{constructor(){this.time=tc.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{isGif:p}=e.attribute;p&&e.playing&&(e.attribute.opacity=1,t.globalAlpha=e.attribute.opacity,e.renderFrame(t,i,r))}};tb=tp([(0,ta.b)()],tb);var ty=i(90383),tv=i(2837);function t_(e,t,i,r){var n;let l,{highlightInRange:o,disableHeader:a,ranges:s}=e.select,h=1===s.length&&((n=null==s?void 0:s[0]).start.col!==n.end.col||n.start.row!==n.end.row)&&o;if(h?1===(null==s?void 0:s.length)&&s[0].start&&s[0].end:1===(null==s?void 0:s.length)&&s[0].end.col===s[0].start.col&&s[0].end.row===s[0].start.row){if(e.table.isHeader(t,i)&&a)return;(l=h?function(e,t,i){let r,{highlightScope:n,cellPos:l,ranges:o}=e.select,a=o[0],s=Math.min(a.start.col,a.end.col),h=Math.max(a.start.col,a.end.col),d=Math.min(a.start.row,a.end.row),u=Math.max(a.start.row,a.end.row);return n===E.p.single&&l.col===t&&l.row===i?r="cellBgColor":n===E.p.column&&t>=s&&t<=h?r=(0,P._Z)(o[0],t,i)?"cellBgColor":"inlineColumnBgColor":n===E.p.row&&i>=d&&i<=u?r=(0,P._Z)(o[0],t,i)?"cellBgColor":"inlineRowBgColor":n===E.p.cross&&((0,P._Z)(o[0],t,i)?r="cellBgColor":t>=s&&t<=h?r="inlineColumnBgColor":i>=d&&i<=u&&(r="inlineRowBgColor")),r}(e,t,i):function(e,t,i){let r,{highlightScope:n,cellPos:l}=e.select;return n===E.p.single&&l.col===t&&l.row===i?r="cellBgColor":n===E.p.column&&l.col===t?r=l.col===t&&l.row===i?"cellBgColor":"inlineColumnBgColor":n===E.p.row&&l.row===i?r=l.col===t&&l.row===i?"cellBgColor":"inlineRowBgColor":n===E.p.cross&&(l.col===t&&l.row===i?r="cellBgColor":l.col===t?r="inlineColumnBgColor":l.row===i&&(r="inlineRowBgColor")),r}(e,t,i))&&tC(e.table,t,i)&&(l=void 0)}else if("replace"===e.table.theme.selectionStyle.selectionFillMode)for(let e=0;e<s.length;e++){let r=s[e],n=Math.min(r.start.col,r.end.col),o=Math.max(r.start.col,r.end.col),a=Math.min(r.start.row,r.end.row),h=Math.max(r.start.row,r.end.row);if(n<=t&&a<=i&&o>=t&&h>=i){l="cellBgColor";break}}return l}function tC(e,t,i){var r,n;let l=null==(r=e.options.select)?void 0:r.disableSelect;if("function"==typeof l?l(t,i,e):l)return!0;if(e.isHeader(t,i)){let r=null==(n=e.options.select)?void 0:n.disableHeaderSelect;if(r)return!0;let l=e.getHeaderDefine(t,i);if(r=null==l?void 0:l.disableHeaderSelect)return!0}else{let r=e.getBodyColumnDefine(t,i),n=null==r?void 0:r.disableSelect;if("function"==typeof n?n(t,i,e):n)return!0}return!1}var tx=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o};let tw=class{constructor(){this.time=tc.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{stroke:p=s.stroke,strokeArrayWidth:g=s.strokeArrayWidth,strokeArrayColor:f=s.strokeArrayColor}=e.attribute;p&&(Array.isArray(g)||Array.isArray(f))&&(c.doStroke=!1)}};tw=tx([(0,ta.b)()],tw);let tS=class{constructor(){this.time=tc.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){var c,p;let{stroke:g=s.stroke,strokeArrayColor:f=s.strokeArrayColor,strokeArrayWidth:m=s.strokeArrayWidth,lineWidth:b=s.lineWidth,strokeColor:y=s.stroke,cornerRadius:v=s.cornerRadius}=e.attribute,_,C,{width:x=s.width,height:w=s.height}=e.attribute;if(g&&(Array.isArray(m)||0!==b)&&(Array.isArray(f)||Array.isArray(m))){if("number"==typeof b&&1&b||Array.isArray(m)&&m.some(e=>1&e)){let t=e.stage.table;if(!t)return;let n="bottom-right"===(null==(c=null==t?void 0:t.theme)?void 0:c.cellBorderClipDirection);if(n){if(i=Math.floor(i)-.5,r=Math.floor(r)-.5,"cell"===e.role){let t=e.col,n=e.row;0===t&&(i+=1),0===n&&(r+=1)}}else i=Math.floor(i)+.5,r=Math.floor(r)+.5;(null==(p=t.options.customConfig)?void 0:p._disableColumnAndRowSizeRound)&&(x=Math.round(x),w=Math.round(w));let{width:l,height:o}=tF(e,Math.ceil(x),Math.ceil(w),n);_=l,C=o}else _=Math.ceil(x),C=Math.ceil(w);0===v||(0,e3.Z)(v)&&v.every(e=>0===e)?tk(e,t,i,r,s,g,m||b,f||y,_,C):(t.beginPath(),(0,ty.U)(t,i,r,_,C,v,!0,[,,,,].fill(0).map((n,l)=>(n,o,a,h)=>{tz(l,n,o,a,h,e,t,i,r,s,g,m||b,f||y,_,C)})),t.stroke())}}};function tA(e){let t;if(!Array.isArray(e))return{isSplitDraw:!1,width:e};for(let i=0;i<e.length;i++){let r=e[i];if(r)if(t){if(r!==t)return{isSplitDraw:!0}}else t=r}return{isSplitDraw:!1,width:t}}function tk(e,t,i,r,n,l,o,a,s,h,d,u){var c,p,g,f;let m=tA(o),b=!Array.isArray(o),y=!Array.isArray(l),v=Array.isArray(u),_=Array.isArray(a)||m.isSplitDraw;t.setStrokeStyle(e,e.attribute,i,r,n);let{lineDash:C=n.lineDash}=e.attribute,x=!1;C.length&&C.some(e=>Array.isArray(e))&&(x=!0),t.beginPath(),t.moveTo(i,r);let w=(y||l[0])&&(b||o[0]),S=(y||l[1])&&(b||o[1]),A=(y||l[2])&&(b||o[2]),k=(y||l[3])&&(b||o[3]);if(w){let e=(b?m.width:o[0])/2,n=(b?m.width:o[0])/2;v&&Array.isArray(u[0])?(t.moveTo(i-e+(s+e+n)*u[0][0],r),t.lineTo(i-e+(s+e+n)*(u[0][1]-u[0][0]),r),t.moveTo(i+s+n,r)):(t.moveTo(i-e,r),t.lineTo(i+s+n,r)),(_||x)&&(a&&a[0]?t.strokeStyle=a[0]:a&&!a[0]&&(t.strokeStyle="transparent"),b||(t.lineWidth=o[0]),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,x&&t.setLineDash(null!=(c=C[0])?c:[]),t.stroke(),t.beginPath(),t.moveTo(i+s,r))}else t.moveTo(i+s,r);if(S){let e=(b?m.width:o[1])/2,n=(b?m.width:o[1])/2;v&&Array.isArray(u[1])?(t.moveTo(i+s,r-e+h*u[1][0]),t.lineTo(i+s,r-e+(h+e+n)*(u[1][1]-u[1][0])),t.moveTo(i+s,r+h+n)):(t.moveTo(i+s,r-e),t.lineTo(i+s,r+h+n)),(_||x)&&(a&&a[1]?t.strokeStyle=a[1]:a&&!a[1]&&(t.strokeStyle="transparent"),b||(t.lineWidth=o[1]),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,x&&t.setLineDash(null!=(p=C[1])?p:[]),t.stroke(),t.beginPath(),t.moveTo(i+s,r+h))}else t.moveTo(i+s,r+h);if(A){let e=(b?m.width:o[2])/2,n=(b?m.width:o[2])/2;v&&Array.isArray(u[2])?(t.moveTo(i-e+(s+e+n)*u[2][0],r+h),t.lineTo(i-e+(s+e+n)*(u[2][1]-u[2][0]),r+h),t.moveTo(i-e,r+h)):(t.moveTo(i-e,r+h),t.lineTo(i+s+n,r+h)),(_||x)&&(a&&a[2]?t.strokeStyle=a[2]:a&&!a[2]&&(t.strokeStyle="transparent"),b||(t.lineWidth=o[2]),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,x&&t.setLineDash(null!=(g=C[2])?g:[]),t.stroke(),t.beginPath(),t.moveTo(i,r+h))}else t.moveTo(i,r+h);if(k){let e=(b?m.width:o[3])/2,n=(b?m.width:o[3])/2;v&&Array.isArray(u[3])?(t.moveTo(i,r-e+(h+e+n)*u[3][0]),t.lineTo(i,r-e+(h+e+n)*(u[3][1]-u[3][0])),t.moveTo(i,r-e)):(t.moveTo(i,r-e),t.lineTo(i,r+h+n)),(_||x)&&(a&&a[3]?t.strokeStyle=a[3]:a&&!a[3]&&(t.strokeStyle="transparent"),b||(t.lineWidth=o[3]),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,x&&t.setLineDash(null!=(f=C[3])?f:[]),t.stroke(),t.beginPath(),t.moveTo(i,r))}else t.moveTo(i,r);_||x||(!b&&m.width&&(t.lineWidth=m.width),t.stroke()),t.lineDashOffset=0,t.setLineDash([])}tS=tx([(0,ta.b)()],tS);let tM=class{constructor(){this.time=tc.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){var p;let{lineDash:g=s.lineDash,stroke:f=s.stroke,strokeArrayColor:m=s.strokeArrayColor,strokeArrayWidth:b=s.strokeArrayWidth}=e.attribute;f&&Array.isArray(g)&&g.length&&(null==(p=g[0])?void 0:p.length)&&!Array.isArray(m)&&!Array.isArray(b)&&(c.doStroke=!1)}};tM=tx([(0,ta.b)()],tM);let tT=class{constructor(){this.time=tc.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){var c,p,g,f,m,b,y;let{lineDash:v=s.lineDash,stroke:_=s.stroke,strokeArrayColor:C=s.strokeArrayColor,strokeArrayWidth:x=s.strokeArrayWidth,lineWidth:w=s.lineWidth}=e.attribute;if(!_||!(Array.isArray(v)&&v.length&&(null==(c=v[0])?void 0:c.length))||Array.isArray(C)||Array.isArray(x))return;let S=e.stage.table;if(!S)return;let A=(0,e3.Z)(v[0])?1===(y=v).length?[y[0],y[0],y[0],y[0]]:2===y.length?[y[0],y[1],y[0],y[1]]:y:[v,v,v,v],k,M,{width:T=s.width,height:R=s.height}=e.attribute;if((null==(p=S.options.customConfig)?void 0:p._disableColumnAndRowSizeRound)?(T=Math.round(T),R=Math.round(R)):(T=Math.ceil(T),R=Math.ceil(R)),1&w){let t="bottom-right"===S.theme.cellBorderClipDirection;t?(i=Math.floor(i)-.5,r=Math.floor(r)-.5,"cell"===e.role&&(0===e.col&&(i+=1),0===e.row&&(r+=1))):(i=Math.floor(i)+.5,r=Math.floor(r)+.5);let{width:n,height:l}=tF(e,Math.ceil(T+0),Math.ceil(R+0),t);k=n,M=l}else k=Math.ceil(T),M=Math.ceil(R);t.setStrokeStyle(e,e.attribute,i,r,s),t.beginPath(),t.moveTo(i,r),t.lineTo(i+k,r),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,t.setLineDash(null!=(g=A[0])?g:[]),t.stroke(),t.beginPath(),t.moveTo(i+k,r),t.lineTo(i+k,r+M),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,t.setLineDash(null!=(f=A[1])?f:[]),t.stroke(),t.beginPath(),t.moveTo(i,r+M),t.lineTo(i+k,r+M),t.lineDashOffset=t.currentMatrix.e/t.currentMatrix.a,t.setLineDash(null!=(m=A[2])?m:[]),t.stroke(),t.beginPath(),t.moveTo(i,r),t.lineTo(i,r+M),t.lineDashOffset=t.currentMatrix.f/t.currentMatrix.d,t.setLineDash(null!=(b=A[3])?b:[]),t.stroke(),t.lineDashOffset=0,t.setLineDash([])}};tT=tx([(0,ta.b)()],tT);let tR=class{constructor(){this.time=tc.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{lineWidth:p=s.lineWidth,stroke:g=s.stroke,lineDash:f=s.lineDash,strokeArrayWidth:m=s.strokeArrayWidth,strokeArrayColor:b=s.strokeArrayColor,notAdjustPos:y}=e.attribute;!0!==y&&g&&Array.isArray(f)&&!f.length&&!Array.isArray(b)&&!Array.isArray(m)&&1&p&&(c.doStroke=!1)}};tR=tx([(0,ta.b)()],tR);let tE=class{constructor(){this.time=tc.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){var c,p;let{lineWidth:g=s.lineWidth,stroke:f=s.stroke,lineDash:m=s.lineDash,strokeArrayWidth:b=s.strokeArrayWidth,strokeArrayColor:y=s.strokeArrayColor,notAdjustPos:v,cornerRadius:_=s.cornerRadius}=e.attribute,{width:C=s.width,height:x=s.height}=e.attribute;if(!0!==v&&f&&Array.isArray(m)&&!m.length&&!Array.isArray(y)&&!Array.isArray(b)&&1&g){let n=e.stage.table;if(!n)return;(null==(c=n.options.customConfig)?void 0:c._disableColumnAndRowSizeRound)&&(C=Math.round(C),x=Math.round(x)),t.beginPath();let l="bottom-right"===(null==(p=null==n?void 0:n.theme)?void 0:p.cellBorderClipDirection);l?(i=Math.floor(i)-.5,r=Math.floor(r)-.5,"cell"===e.role&&(0===e.col&&(i+=1),0===e.row&&(r+=1))):(i=Math.floor(i)+.5,r=Math.floor(r)+.5);let{width:o,height:a}=tF(e,Math.ceil(C),Math.ceil(x),l);_?(0,ty.U)(t,i,r,o+0,a+0,_):t.rect(i,r,o,a),t.setStrokeStyle(e,e.attribute,i,r,s),t.stroke()}}};tE=tx([(0,ta.b)()],tE);let tP=class{constructor(){this.time=tc.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){if("cell"===e.role){let t=e.stage.table;if(t){let i=function(e,t){var i,r,n,l,o,a,s,h,d,u,c;let p,g;if("cell"===e.role&&(0,b.Z)(e.mergeStartCol)&&(0,b.Z)(e.mergeStartRow)&&(0,b.Z)(e.mergeEndCol)&&(0,b.Z)(e.mergeEndRow)){let{colStart:i,colEnd:r,rowStart:n,rowEnd:l}=(0,eB.e)(e,t.scenegraph);for(let o=i;o<=r;o++)for(let i=n;i<=l;i++){let r=t_(t.stateManager,o,i,e);!r||p&&"cellBgColor"!==r||(p=r)}}else"cell"===e.role&&(p=t_(t.stateManager,e.col,e.row,e));if(!p)return;let f=t.internalProps.layoutMap;return f.isCornerHeader(e.col,e.row)?g=(null==(i=t.theme.cornerHeaderStyle)?void 0:i.select)||(null==(r=t.theme.headerStyle)?void 0:r.select):f.isColumnHeader(e.col,e.row)?g=null==(n=t.theme.headerStyle)?void 0:n.select:f.isRowHeader(e.col,e.row)?g=null==(l=t.theme.rowHeaderStyle)?void 0:l.select:f.isBottomFrozenRow(e.col,e.row)?g=(null==(o=t.theme.bottomFrozenStyle)?void 0:o.select)||(t.isListTable()?null==(a=t.theme.bodyStyle)?void 0:a.select:null==(s=t.theme.headerStyle)?void 0:s.select):f.isRightFrozenColumn(e.col,e.row)?g=(null==(h=t.theme.rightFrozenStyle)?void 0:h.select)||(t.isListTable()?null==(d=t.theme.bodyStyle)?void 0:d.select:null==(u=t.theme.rowHeaderStyle)?void 0:u.select):t.isHeader(e.col,e.row)||(g=null==(c=t.theme.bodyStyle)?void 0:c.select),(0,ek.WJ)(p,g,e.col,e.row,t)}(e,t);if(i)e.attribute._vtableHightLightFill=i;else if(t.stateManager.interactionState!==E.F.scrolling){let i=(0,tv.J)(e,t);i&&(e.attribute._vtableHightLightFill=i)}}}}};tP=tx([(0,ta.b)()],tP);let tB=class{constructor(){this.time=tc.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){if(e.attribute._vtableHightLightFill){if(d);else if(o){let n=e.attribute.fill;e.attribute.fill=e.attribute._vtableHightLightFill,t.setCommonStyle(e,e.attribute,i,r,s),t.fill(),e.attribute.fill=n,e.attribute._vtableHightLightFill=void 0}}}};tB=tx([(0,ta.b)()],tB);let tI=class{constructor(){this.time=tc.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){var p,g,f,m,b,y;let v=e.stage.table;v&&("body"===e.role?tL(t,-(null!=(p=e.attribute.x)?p:0)+v.getFrozenColsWidth(),-(null!=(g=e.attribute.y)?g:0)+v.getFrozenRowsHeight(),e.parent.attribute.width-v.getFrozenColsWidth()-v.getRightFrozenColsWidth(),e.parent.attribute.height-v.getFrozenRowsHeight()-v.getBottomFrozenRowsHeight()):"row-header"===e.role?tL(t,0,-(null!=(f=e.attribute.y)?f:0)+v.getFrozenRowsHeight(),v.getFrozenColsWidth(),e.parent.attribute.height-v.getFrozenRowsHeight()-v.getBottomFrozenRowsHeight()):"col-header"===e.role?tL(t,-(null!=(m=e.attribute.x)?m:0)+v.getFrozenColsWidth(),0,e.parent.attribute.width-v.getFrozenColsWidth()-v.getRightFrozenColsWidth(),v.getFrozenRowsHeight()):"right-frozen"===e.role?tL(t,0,-(null!=(b=e.attribute.y)?b:0)+v.getFrozenRowsHeight(),v.getRightFrozenColsWidth(),e.parent.attribute.height-v.getFrozenRowsHeight()-v.getBottomFrozenRowsHeight()):"bottom-frozen"===e.role?tL(t,-(null!=(y=e.attribute.x)?y:0)+v.getFrozenColsWidth(),0,e.parent.attribute.width-v.getFrozenColsWidth()-v.getRightFrozenColsWidth(),v.getBottomFrozenRowsHeight()):"corner-header"===e.role?tL(t,0,0,v.getFrozenColsWidth(),v.getFrozenRowsHeight()):"corner-right-top-header"===e.role?tL(t,0,0,v.getRightFrozenColsWidth(),v.getFrozenRowsHeight()):"corner-right-bottom-header"===e.role?tL(t,0,0,v.getRightFrozenColsWidth(),v.getBottomFrozenRowsHeight()):"corner-left-bottom-header"===e.role&&tL(t,0,0,v.getFrozenColsWidth(),v.getBottomFrozenRowsHeight()))}};function tL(e,t,i,r,n){e.beginPath();let l=e.applyedMatrix;Math.abs(l.f)>0x1000000||Math.abs(l.g)>0x1000000?e.rect(t-0x1000000,i-0x1000000,r+0x2000000,n+0x2000000):e.rect(t,i,r,n)}function tF(e,t,i,r){var n,l;let o=e.stage.table;if(!o)return{width:t,height:i};if("cell"===e.role){let a=e.col,s=e.row,h=(0,e_.Z)(o,a,s);h&&(a=h.end.col,s=h.end.row),r?(0===a&&(t-=1),0===s&&(i-=1)):((a===o.colCount-1||a===o.frozenColCount-1&&o.scrollLeft||(null==(n=o.containerFit)?void 0:n.width)&&o.rightFrozenColCount&&a===o.colCount-o.rightFrozenColCount-1)&&(t-=1),(s===o.rowCount-1||s===o.frozenRowCount-1&&o.scrollTop||(null==(l=o.containerFit)?void 0:l.height)&&o.bottomFrozenRowCount&&s===o.rowCount-o.bottomFrozenRowCount-1)&&(i-=1))}else"corner-frozen"===e.role&&(o.scrollLeft&&!r&&(t-=1),o.scrollTop&&!r&&(i-=1));return{width:t,height:i}}tI=tx([(0,ta.b)()],tI);var tH=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o};let tO=class{constructor(){this.time=tc.Oh.beforeFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){let{stroke:p=s.stroke,strokeArrayWidth:g=s.strokeArrayWidth,strokeArrayColor:f=s.strokeArrayColor}=e.attribute;p&&(Array.isArray(p)||Array.isArray(g)||Array.isArray(f))&&(c.doStroke=!1)}};tO=tH([(0,ta.b)()],tO);let tD=class{constructor(){this.time=tc.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u){let{width:c=s.width,height:p=s.height,stroke:g=s.stroke,strokeArrayColor:f=s.strokeArrayColor,strokeArrayWidth:m=s.strokeArrayWidth,lineWidth:b=s.lineWidth,strokeColor:y=s.stroke,cornerRadius:v=s.cornerRadius}=e.attribute;!(!g||!Array.isArray(m)&&0===b||c<=0||p<=0)&&(Array.isArray(g)||Array.isArray(f)||Array.isArray(m))&&("border-rect"!==e.name&&"table-border-rect"!==e.name&&("number"==typeof b&&1&b||Array.isArray(m)&&m.some(e=>1&e))&&(i=Math.floor(i)+.5,r=Math.floor(r)+.5),0===v||(0,e3.Z)(v)&&v.every(e=>0===e)?tk(e,t,i,r,s,g,m||b,f||y,"table-border-rect"!==e.name?Math.ceil(c+0):c+0,"table-border-rect"!==e.name?Math.ceil(p+0):p+0):(t.beginPath(),(0,ty.U)(t,i,r,c,p,v,!0,[,,,,].fill(0).map((n,l)=>(n,o,a,h)=>{tz(l,n,o,a,h,e,t,i,r,s,g,m||b,f||y,Math.ceil(c+0),Math.ceil(p+0))})),t.stroke()))}};function tz(e,t,i,r,n,l,o,a,s,h,d,u,c,p,g){var f,m,b,y;let v=tA(u),_=!Array.isArray(u),C=!Array.isArray(d),x=Array.isArray(c)||v.isSplitDraw;o.stroke(),o.setStrokeStyle(l,l.attribute,a,s,h);let{lineDash:w=h.lineDash}=l.attribute,S=!1;w.length&&w.some(e=>Array.isArray(e))&&(S=!0),o.beginPath(),o.moveTo(a,s);let A=(C||d[0])&&(_||u[0]),k=(C||d[1])&&(_||u[1]),M=(C||d[2])&&(_||u[2]),T=(C||d[3])&&(_||u[3]);A&&0===e?(_?v.width:u[0],_?v.width:u[0],o.moveTo(t,i),o.lineTo(r,n),(x||S)&&(c&&c[0]?o.strokeStyle=c[0]:c&&!c[0]&&(o.strokeStyle="transparent"),_||(o.lineWidth=u[0]),o.lineDashOffset=o.currentMatrix.e/o.currentMatrix.a,S&&o.setLineDash(null!=(f=w[0])?f:[]),o.stroke(),o.beginPath())):0===e&&o.moveTo(a+p,s),k&&1===e?(_?v.width:u[1],_?v.width:u[1],o.moveTo(t,i),o.lineTo(r,n),(x||S)&&(c&&c[1]?o.strokeStyle=c[1]:c&&!c[1]&&(o.strokeStyle="transparent"),_||(o.lineWidth=u[1]),o.lineDashOffset=o.currentMatrix.f/o.currentMatrix.d,S&&o.setLineDash(null!=(m=w[1])?m:[]),o.stroke(),o.beginPath(),o.moveTo(a+p,s+g))):1===e&&o.moveTo(a+p,s+g),M&&2===e?(_?v.width:u[2],_?v.width:u[2],o.moveTo(t,i),o.lineTo(r,n),(x||S)&&(c&&c[2]?o.strokeStyle=c[2]:c&&!c[2]&&(o.strokeStyle="transparent"),_||(o.lineWidth=u[2]),o.lineDashOffset=o.currentMatrix.e/o.currentMatrix.a,S&&o.setLineDash(null!=(b=w[2])?b:[]),o.stroke(),o.beginPath(),o.moveTo(a,s+g))):2===e&&o.moveTo(a,s+g),T&&3===e?(_?v.width:u[3],_?v.width:u[3],o.moveTo(t,i),o.lineTo(r,n),(x||S)&&(c&&c[3]?o.strokeStyle=c[3]:c&&!c[3]&&(o.strokeStyle="transparent"),_||(o.lineWidth=u[3]),o.lineDashOffset=o.currentMatrix.f/o.currentMatrix.d,S&&o.setLineDash(null!=(y=w[3])?y:[]),o.stroke(),o.beginPath(),o.moveTo(a,s))):3===e&&o.moveTo(a,s),o.closePath(),x||S||(!_&&v.width&&(o.lineWidth=v.width),o.stroke()),o.lineDashOffset=0,o.setLineDash([]),o.beginPath()}tD=tH([(0,ta.b)()],tD);var tW=i(50074),tZ=i(21044);let tN,t$=class{constructor(){this.order=1,this.interceptors=[new tj]}afterDrawItem(e,t,i,r,n){for(let l=0;l<this.interceptors.length;l++)if(this.interceptors[l].afterDrawItem&&this.interceptors[l].afterDrawItem(e,t,i,r,n))return!0;return!1}beforeDrawItem(e,t,i,r,n){if((!e.in3dMode||i.in3dInterceptor)&&!e.shadowRoot&&!(e.baseGraphic||e.attribute.globalZIndex||e.interactiveGraphic))return!1;for(let l=0;l<this.interceptors.length;l++)if(this.interceptors[l].beforeDrawItem&&this.interceptors[l].beforeDrawItem(e,t,i,r,n))return!0;return!1}};t$=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([(0,ta.b)()],t$);class tj{constructor(){this.order=1}afterDrawItem(e,t,i,r,n){return"image"===e.type&&this.drawItem(e,t,i,r,n),!1}drawItem(e,t,i,r,n){let{image:l,gif:o}=e.attribute;if(o&&e.playing||!l||!e.resources)return!1;let a=e.resources.get(l);if(!a||"loading"!==a.state)return!1;if(!tN){let e=eX.U2(),t=e.loading_pic.svg,i=e.loading_pic.width,r=e.loading_pic.height;tN=(0,tW.B)({width:i,height:r,image:t})}let{image:s}=tN.attribute;if(!l||!tN.resources)return!1;let h=tN.resources.get(s);if("success"!==h.state)return!1;let{context:d}=i;d.highPerformanceSave(),e.parent&&d.setTransformFromMatrix(e.parent.globalTransMatrix,!0),e.glyphHost&&e.glyphHost.parent&&d.setTransformFromMatrix(e.glyphHost.parent.globalTransMatrix,!0);let u=e.AABBBounds,{width:c,height:p}=(0,tZ.f)(h.data.width,h.data.height,u.width(),u.height());return d.drawImage(h.data,u.x1+(u.width()-c)/2,u.y1+(u.height()-p)/2,c,p),d.highPerformanceRestore(),!0}}var tG=i(19626),tV=i(52807),tU=i(83624),tK=i(8429);let tX=class{constructor(){this.time=tc.Oh.afterFillStroke,this.useStyle=!0,this.order=0}drawShape(e,t,i,r,n,l,o,a,s,h,d,u,c){var p,g;let{text:f,underline:m=s.underline,lineThrough:b=s.lineThrough,direction:y=s.direction,whiteSpace:v=s.whiteSpace,fontSize:_=s.fontSize,verticalMode:C=s.verticalMode,ellipsis:x=s.ellipsis,textAlign:w=s.textAlign,textBaseline:S=s.textBaseline,x:A=s.x,y:k=s.y}=e.attribute,M=!1;if(Array.isArray(e)){let t=null==(p=e.cache)?void 0:p.layoutData;x&&t&&t.lines.every(e=>""===e.str)&&(M=!0)}else{let{cache:t}=e;x&&t&&""===t.clipedText&&0===t.clipedWidth&&(M=!0)}if(!M)return;let T=(0,tU.Z)(x)?x:"...",R=null!=(g=(0,tG.VA)(e.attribute.lineHeight,_))?g:_,E=0;R!==_&&("top"===S?E=(R-_)/2:"middle"===S||"bottom"===S&&(E=-(R-_)/2)),l&&(u?u(t,e.attribute,s):a&&(t.setStrokeStyle(e,e.attribute,A-i,k-r,s),t.strokeText(T,A,k+E))),n&&(d?d(t,e.attribute,s):o&&(t.setCommonStyle(e,e.attribute,A-i,k-r,s),t.fillText(T,A,k+E),this.drawUnderLine(m,b,e,A,k+E,0,s,t,T)))}drawUnderLine(e,t,i,r,n,l,o,a,s){if(t+e<=0)return;let{textAlign:h=o.textAlign,textBaseline:d=o.textBaseline,fontSize:u=o.fontSize,fontFamily:c=o.fontFamily,fontWeight:p=o.fontWeight,fontStyle:g=o.fontStyle,fill:f=o.fill,opacity:m=o.opacity,underlineOffset:b=o.underlineOffset,underlineDash:y=o.underlineDash,fillOpacity:v=o.fillOpacity}=i.attribute;if(!e&&!t)return;let _=tK.QC.measureTextWidth(s,{fontSize:u,fontFamily:c,fontWeight:p,fontStyle:g}),C=(0,tV.js)(h,_),x=(0,tV.nV)(d,u,u),w={lineWidth:0,stroke:f,opacity:m,strokeOpacity:v};if(e){w.lineWidth=e,a.setStrokeStyle(i,w,r,n,o),a.setLineDash(y),a.beginPath();let t=n+x+u+b;a.moveTo(r+C,t,l),a.lineTo(r+C+_,t,l),a.stroke()}if(t){w.lineWidth=t,a.setStrokeStyle(i,w,r,n,o),a.beginPath();let e=n+x+u/2;a.moveTo(r+C,e,l),a.lineTo(r+C+_,e,l),a.stroke()}}};tX=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([(0,ta.b)()],tX);let tY=class{constructor(){this.type="chart",this.numberType=ts.e}contains(e,t,i){var r;if(e.attribute.detectPickChartItem){let i=e.activeChartInstance;if(!i)return!1;let n=i.getStage();null==(r=n.dirtyBounds)||r.clear();let l=n.pick(t.x,t.y);return(null!==l.graphic||"root"!==l.group.name)&&l}return!!e.AABBBounds.containsPoint(t)}};tY=function(e,t,i,r){var n,l=arguments.length,o=l<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(l<3?n(o):l>3?n(t,i,o):n(t,i))||o);return l>3&&o&&Object.defineProperty(t,i,o),o}([(0,ta.b)()],tY);let tq=new e9.n((e,t,i,r)=>{i(te.d4)?r(te.d4).to(tO).inSingletonScope():(e(tO).toSelf().inSingletonScope(),e(tt.d5).toService(tO)),i(te.Er)?r(te.Er).to(tD).inSingletonScope():(e(tD).toSelf().inSingletonScope(),e(tt.d5).toService(tD)),e(tu).toSelf().inSingletonScope(),e(td).to(tu),e(ti.uz).to(tu),e(tY).toSelf().inSingletonScope(),e(tr.EL).toService(tY),e(tg).toSelf().inSingletonScope(),e(tt.JO).toService(tg),e(tf).toSelf().inSingletonScope(),e(tt.JO).toService(tf),e(tm).toSelf().inSingletonScope(),e(tt.JO).toService(tm),e(tb).toSelf().inSingletonScope(),e(tt.JO).toService(tb),e(tP).toSelf().inSingletonScope(),e(tt.jd).toService(tP),e(tB).toSelf().inSingletonScope(),e(tt.jd).toService(tB),e(tS).toSelf().inSingletonScope(),e(tt.jd).toService(tS),e(tw).toSelf().inSingletonScope(),e(tt.jd).toService(tw),e(tM).toSelf().inSingletonScope(),e(tt.jd).toService(tM),e(tT).toSelf().inSingletonScope(),e(tt.jd).toService(tT),e(tR).toSelf().inSingletonScope(),e(tt.jd).toService(tR),e(tE).toSelf().inSingletonScope(),e(tt.jd).toService(tE),e(tI).toSelf().inSingletonScope(),e(tt.jd).toService(tI),e(t$).toSelf().inSingletonScope(),e(tn.xL).toService(t$),e(tX).toSelf().inSingletonScope(),e(tt.$K).toService(tX)});var tJ=i(1028);let tQ=new eG.Z({});tQ.role="empty";var t0=i(4410);function t1(e,t,i,r,n,l,o,a,s){var h,d;let u,c,p,g=0;e.lastChild&&e.lastChild.row===r-1?g=e.lastChild.attribute.y+e.lastChild.attribute.height:e.colHeight?g=e.colHeight:r>=a.columnHeaderLevelCount&&r<a.rowCount-a.bottomFrozenRowCount&&(g=a.getRowsHeight(a.columnHeaderLevelCount,r-1));for(let f=r;f<=n;f++){let n=f,m,b,y,v,_=a.getCellLocation(t,n),C=a.getCellValue(t,n),x=i,w=a.getRowHeight(n),S=!1;if(a.internalProps.customMergeCell){let e=a.getCustomMerge(t,n);if(e){let{range:t,text:i,style:o,customLayout:s,customRender:h}=e;if(b=(m=t).start.col!==m.end.col||m.start.row!==m.end.row){let e=t3(m,l,a,r>m.start.row);x=e.cellWidth,w=e.cellHeight}C=i,y=o,(s||h)&&(v=(0,ew.ws)(s,h,t.start.col,t.start.row,a.getColsWidth(t.start.col,t.end.col),a.getRowsHeight(t.start.row,t.end.row),!1,a.isAutoRowHeight(n),[0,0,0,0],m,a)),S=!0}}let A,k=t,M=n;m&&(k=m.start.col,M=m.start.row),!a.isPivotTable()&&("columnHeader"===_||"cornerHeader"===_)&&n>=a.columnHeaderLevelCount&&(_="body"),A=!a.isPivotTable()&&a.isSeriesNumberInBody(t,n)?a.getBodyColumnDefine(k,M):"body"!==_?a.getHeaderDefine(k,M):a.getBodyColumnDefine(k,M);let T="isAggregation"in a.internalProps.layoutMap&&a.internalProps.layoutMap.isAggregation(t,n),R=a.internalProps.layoutMap.isSeriesNumber(t,n),E="body"!==_||((null==A?void 0:A.dragOrder)||!!(null==A?void 0:A.icon)||!!(null==A?void 0:A.tree))&&!(T&&R);if(!m&&(a.internalProps.enableTreeNodeMerge||"body"!==_||(null==A?void 0:A.mergeCell))&&(b=(m=a.getCellRange(t,n)).start.col!==m.end.col||m.start.row!==m.end.row)){let e=t3(m,l,a,r>m.start.row);x=e.cellWidth,w=e.cellHeight}let B=!1;if(a.internalProps.enableTreeNodeMerge&&b){let e=a.getCellRawRecord(m.start.col,m.start.row),{vtableMergeName:i,vtableMerge:r}=null!=e?e:{};B=r,r&&(E=!0,a.internalProps.groupTitleCustomLayout&&(v=(0,ew.ws)(a.internalProps.groupTitleCustomLayout,void 0,m.start.col,m.start.row,a.getColsWidth(m.start.col,m.end.col),a.getRowsHeight(m.start.row,m.end.row),!1,a.isAutoRowHeight(n),[0,0,0,0],m,a)),a.internalProps.groupTitleFieldFormat?C=a.internalProps.groupTitleFieldFormat(e,t,n,a):void 0!==i&&(C=i))}let I=B||S?"text":null!=(d=a.isHeader(t,n)?null!=(h=a._getHeaderLayoutMap(t,n).headerType)?h:"text":a.getBodyColumnType(t,n))?d:"text";if((0,P.tI)(C)){(function(e,t,i,r,n,l,o){let a=new eG.Z({x:0,y:r,width:n,height:l});a.role="cell",a.col=e,a.row=t,o.addChild(a)})(t,n,0,g,x,w,e),(0,t0.K)(C,a,t2.bind(null,{type:I,value:C,define:A,table:a,col:t,row:n,colWidth:i,cellWidth:x,cellHeight:w,columnGroup:e,y:g,customStyle:y,mayHaveIcon:E,cellLocation:_,range:m,customResult:v,defaultRowHeight:o})),e.updateColumnRowNumber(n);let r=a.getRowHeight(n);e.updateColumnHeight(r),g+=r}else{let r=y||a._getCellStyle(m?m.start.col:t,m?m.start.row:n),l=(0,ex.RT)(r,a,m?m.start.col:t,m?m.start.row:n,ek.WJ).theme;l.group.cornerRadius=(0,ex.xv)(t,n,a),l.group.width=i,l.group.height=Array.isArray(o)?o[n]:o,l._vtable.padding&&(u=l._vtable.padding),l.text.textAlign&&(c=l.text.textAlign),l.text.textBaseline&&(p=l.text.textBaseline),"body"===_||l.group.fill||(l.group.fill="#fff");let s=(0,eA.kE)(I,C,A,a,t,n,i,x,w,e,g,u,c,p,E,l,m,v);if(e.updateColumnRowNumber(n),b){let i=a.getRowHeight(n),{width:r}=(a.getColWidth(t),s.attribute),{height:l}=s.attribute;s.contentWidth=r,s.contentHeight=l,(0,eA.pZ)(m,r,l,u,c,p,a),e.updateColumnHeight(i),g+=i}else e.updateColumnHeight(w),g+=w}if(s&&n>s)break}return e.setAttribute("width",i),{width:i,height:g}}function t2(e){let t,i,r,{type:n,value:l,define:o,table:a,col:s,row:h,colWidth:d,cellWidth:u,cellHeight:c,columnGroup:p,y:g,cellLocation:f,mayHaveIcon:m,customStyle:b,range:y,customResult:v,defaultRowHeight:_}=e,C=b||a._getCellStyle(y?y.start.col:s,y?y.start.row:h),x=(0,ex.RT)(C,a,y?y.start.col:s,y?y.start.row:h,ek.WJ).theme;x.group.cornerRadius=(0,ex.xv)(s,h,a),x.group.width=d,x.group.height=Array.isArray(_)?_[h]:_,x._vtable.padding&&(t=x._vtable.padding),x.text.textAlign&&(i=x.text.textAlign),x.text.textBaseline&&(r=x.text.textBaseline),"body"===f||x.group.fill||(x.group.fill="#fff"),(0,eA.kE)(n,l,o,a,s,h,d,u,c,p,g,t,i,r,m,x,y,v)}function t3(e,t,i,r){let n=0,l=0,o=t.get(`${e.start.col},${e.start.row};${e.end.col},${e.end.row}`);if(!o||r){for(let t=e.start.col;t<=e.end.col;t++)n+=i.getColWidth(t);for(let t=e.start.row;t<=e.end.row;t++)l+=i.getRowHeight(t);t.set(`${e.start.col},${e.start.row};${e.end.col},${e.end.row}`,{cellWidth:n,cellHeight:l})}else n=o.cellWidth,l=o.cellHeight;return{cellWidth:n,cellHeight:l}}function t4(e,t,i,r,n,l,o,a,s,h){if(r>n||l>o)return;let{layoutMap:d,defaultHeaderRowHeight:u,defaultColWidth:c}=s.internalProps,p=s.defaultRowHeight,g=0,f=0;for(let d=r;d<=n;d++){let r=d,n=s.getColWidth(r),c=new eG.Z({x:t+g,y:i,width:n,height:0,clip:!1,pickable:!1});c.role="column",c.col=d,e.addChild(c);let{width:m,height:b}=t1(c,r,n,l,o,s.scenegraph.mergeMap,"columnHeader"===a&&(0,eM.Z)(u)?u:p,s,h);g+=m,f=Math.max(f,b)}e.setAttribute("width",g),e.setAttribute("height",f)}function t5(e){let t=e.firstChild;for(;t&&"group"!==t.type;)t=t._next;return t}function t6(e){let t=e.lastChild;for(;t&&"group"!==t.type;)t=t._prev;return t}function t8(e,t,i,r="left"){for(let n=e;n<=t;n++){let e=i.scenegraph.getColGroup(n);e&&t7(e,i,r);let t=i.scenegraph.getColGroup(n,!0);t&&t7(t,i,r);let l=i.scenegraph.getColGroupInBottom(n);l&&t7(l,i,r)}let n=Math.min(i.scenegraph.proxy.colLimit,i.scenegraph.proxy.bodyRightCol-i.scenegraph.proxy.bodyLeftCol+1),l=i.getColsWidth(i.frozenColCount,i.frozenColCount+n),o=i.getColsWidth(i.frozenColCount,i.colCount-1);i.scenegraph.proxy.xLimitLeft=l/2,i.scenegraph.proxy.xLimitRight=o-l/2}function t7(e,t,i="left"){if("left"===i){let i,r=function(e){let t=e._prev;for(;t&&"group"!==t.type;)t=t._prev;return t}(e);i=r?r.attribute.x+t.getColWidth(e._prev.col):t.getColsWidth(t.frozenColCount,e.col-1),e.setAttribute("x",i)}else{let i,r=function(e){let t=e._next;for(;t&&"group"!==t.type;)t=t._next;return t}(e);i=r?r.attribute.x-t.getColWidth(e.col):t.getColsWidth(t.frozenColCount,e.col-1),e.setAttribute("x",i)}}var t9=function(e,t,i,r){return new(i||(i=Promise))(function(n,l){function o(e){try{s(r.next(e))}catch(e){l(e)}}function a(e){try{s(r.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}s((r=r.apply(e,t||[])).next())})};function ie(e,t,i,r,n,l){return t9(this,void 0,void 0,function*(){if("left"===t&&l.colEnd+e>l.bodyRightCol?e=l.bodyRightCol-l.colEnd:"right"===t&&l.colStart-e<l.bodyLeftCol&&(e=l.colStart-l.bodyLeftCol),0!==e)if(e<0&&(t="left"===t?"right":"left",e=-e),e<l.colEnd-l.colStart){let n="left"===t?l.colStart:l.colEnd-e+1,o="left"===t?l.colStart+e-1:l.colEnd,a="left"===t?l.colEnd+1:l.colStart-e,s="left"===t?l.colEnd+e:l.colStart-1;(0,tJ.rj)(l.table,a,s),function(e,t,i,r){for(let n=e;n<=t;n++)r.table.scenegraph.bodyGroup.childrenCount>0&&"group"===r.table.scenegraph.bodyGroup.firstChild.type&&ir(r.table.scenegraph.bodyGroup,i,r),r.table.scenegraph.colHeaderGroup.childrenCount>0&&"group"===r.table.scenegraph.colHeaderGroup.firstChild.type&&ir(r.table.scenegraph.colHeaderGroup,i,r),r.table.scenegraph.bottomFrozenGroup.childrenCount>0&&"group"===r.table.scenegraph.bottomFrozenGroup.firstChild.type&&ir(r.table.scenegraph.bottomFrozenGroup,i,r)}(n,o,t,l),l.colStart="left"===t?l.colStart+e:l.colStart-e,l.colEnd="left"===t?l.colEnd+e:l.colEnd-e,il(a,s,l),t8(a,s,l.table,t);let h=r-((l.table.scenegraph.getColGroup(i)||l.table.scenegraph.getColGroup(i,!0)).attribute.x+l.table.getFrozenColsWidth()+l.table.scenegraph.proxy.deltaX);l.table.scenegraph.proxy.deltaX+=h,l.currentCol="left"===t?l.currentCol+e:l.currentCol-e,l.totalCol=Math.max(0,Math.min(l.table.colCount-1,"left"===t?l.totalCol+e:l.totalCol-e)),l.referenceCol=l.colStart+Math.floor((l.colEnd-l.colStart)/2),l.colUpdatePos=a,l.colUpdateDirection=t,l.table.scenegraph.updateNextFrame()}else{var n,o,a,s;let i="left"===t?l.colStart+e:l.colStart-e,r="left"===t?l.colEnd+e:l.colEnd-e;(0,tJ.rj)(l.table,i,r),n=l.table.getColsWidth(l.bodyLeftCol,i-1),o=e,a=t,(s=l).table.scenegraph.colHeaderGroup.forEachChildren((e,t)=>{"group"===e.type&&it(e,"left"===a?e.col+o:e.col-o,0===t?n:e._prev.attribute.x+s.table.getColWidth(e._prev.col))}),s.table.scenegraph.bottomFrozenGroup.forEachChildren((e,t)=>{"group"===e.type&&it(e,"left"===a?e.col+o:e.col-o,0===t?n:e._prev.attribute.x+s.table.getColWidth(e._prev.col))}),s.table.scenegraph.bodyGroup.forEachChildren((e,t)=>{"group"===e.type&&it(e,"left"===a?e.col+o:e.col-o,0===t?n:e._prev.attribute.x+s.table.getColWidth(e._prev.col))}),l.colStart=i,l.colEnd=r,il(i,r,l),t8(i,r,l.table,r>l.bodyRightCol-(l.colEnd-l.colStart+1)?"right":"left"),l.currentCol="left"===t?l.currentCol+e:l.currentCol-e,l.totalCol=Math.max(0,Math.min(l.table.colCount-1,"left"===t?l.totalCol+e:l.totalCol-e)),l.referenceCol=l.colStart+Math.floor((l.colEnd-l.colStart)/2),l.colUpdatePos=l.colStart,l.colUpdateDirection=r>l.bodyRightCol-(l.colEnd-l.colStart+1)?"right":"left",l.table.scenegraph.updateNextFrame()}})}function it(e,t,i){e.col=t,e.forEachChildren(e=>{e.col=t,e.needUpdate=!0}),e.setAttribute("x",i),e.needUpdate=!0}function ii(e,t){if(!e)return;let i=e.firstChild;for(;i;)i=t.updateCellGroupContent(i)._next;e.needUpdate=!1,e.setAttribute("width",t.table.getColWidth(e.col))}function ir(e,t,i){if("left"===t){let t=t5(e),r=t6(e);it(t,r.col+1,r.attribute.x+i.table.getColWidth(r.col)),e.appendChild(t),e.border&&e.appendChild(e.border)}else{let t=t6(e),r=t5(e);it(t,r.col-1,r.attribute.x-i.table.getColWidth(r.col-1)),e.insertBefore(t,e.firstChild)}}function il(e,t,i){for(let r=e;r<=t;r++){let e=i.table.scenegraph.getColGroup(r,!0);e&&ii(e,i);let t=i.table.scenegraph.getColGroupInBottom(r);t&&ii(t,i);let n=i.table.scenegraph.getColGroupInRightTopCorner(r);n&&ii(n,i);let l=i.table.scenegraph.getColGroupInRightBottomCorner(r);l&&ii(l,i);let o=i.table.scenegraph.getColGroup(r);o&&function(e,t){if(!e)return;let i=t.screenTopRow,r=Math.max(t.bodyTopRow,i-t.screenRowCount),n=Math.min(t.bodyBottomRow,i+2*t.screenRowCount,t.table.rowCount-1);for(let i=r;i<=n;i++){let r=t.highPerformanceGetCell(e.col,i,!0);t.updateCellGroupContent(r)}t.rowUpdatePos=t.rowStart,e.needUpdate=!1,e.setAttribute("width",t.table.getColWidth(e.col))}(o,i)}io(i.table.scenegraph.colHeaderGroup),io(i.table.scenegraph.bottomFrozenGroup),io(i.table.scenegraph.bodyGroup),i.progress()}function io(e){var t,i;let r=t6(e);if(r&&(e.setAttribute("width",r.attribute.x+r.attribute.width),e.border)){let n=e.border;n.setAttribute("width",r.attribute.x+r.attribute.width-(null!=(t=n.attribute.borderLeft)?t:0)/2-(null!=(i=n.attribute.borderRight)?i:0)/2)}}function ia(e,t,i,r,n,l="up",o){var a,s;if("up"===l)for(let l=e;l<=t;l++)for(let e=i;e<=r;e++){let t,i=n.scenegraph.highPerformanceGetCell(l,e,!0);if("cell"===i.role&&i.row){if(i._prev)t=(null==(a=i._prev)?void 0:a.attribute.y)+n.getRowHeight(i._prev.row);else if(o){let i=r===n.rowCount-n.bottomFrozenRowCount-1?r:r+1;if(t=n.scenegraph.highPerformanceGetCell(l,i,!0).attribute.y,(0,b.Z)(t))for(let r=e;r<i;r++)t-=n.getRowHeight(r)}else t=is(i.row,n);(0,b.Z)(t)&&i.setAttribute("y",t)}}else for(let l=e;l<=t;l++)for(let e=r;e>=i;e--){let t,r=n.scenegraph.highPerformanceGetCell(l,e,!0);if("cell"===r.role&&r.row){if(r._next)t=(null==(s=r._next)?void 0:s.attribute.y)-n.getRowHeight(r.row);else if(o){let r=i<=n.frozenRowCount?n.frozenRowCount:i-1;t=i<=n.frozenRowCount?0:n.scenegraph.highPerformanceGetCell(l,r,!0).attribute.y;for(let i=r;i<e;i++)t+=n.getRowHeight(i)}else t=is(r.row,n);(0,b.Z)(t)&&r.setAttribute("y",t)}}let h=Math.min(n.scenegraph.proxy.rowLimit,n.scenegraph.proxy.bodyBottomRow-n.scenegraph.proxy.bodyTopRow+1),d=n.getRowsHeight(n.frozenRowCount,n.frozenRowCount+h),u=n.getRowsHeight(n.frozenRowCount,n.rowCount-1);n.scenegraph.proxy.yLimitTop=d/2,n.scenegraph.proxy.yLimitBottom=u-d/2}function is(e,t){return e<t.frozenRowCount?t.getRowsHeight(0,e-1):e>=t.rowCount-t.bottomFrozenRowCount?t.getRowsHeight(t.rowCount-t.bottomFrozenRowCount,e-1):t.getRowsHeight(t.frozenRowCount,e-1)}var ih=function(e,t,i,r){return new(i||(i=Promise))(function(n,l){function o(e){try{s(r.next(e))}catch(e){l(e)}}function a(e){try{s(r.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}s((r=r.apply(e,t||[])).next())})};function id(e,t,i,r,n,l){return ih(this,void 0,void 0,function*(){if("up"===t&&l.rowEnd+e>l.bodyBottomRow?e=l.bodyBottomRow-l.rowEnd:"down"===t&&l.rowStart-e<l.bodyTopRow&&(e=l.rowStart-l.bodyTopRow),0!==e)if(e<0&&(t="up"===t?"down":"up",e=-e),e<l.rowEnd-l.rowStart){let r,n,o="up"===t?l.rowStart:l.rowEnd-e+1,a="up"===t?l.rowStart+e-1:l.rowEnd,s="up"===t?l.rowEnd+1:l.rowStart-e,h="up"===t?l.rowEnd+e:l.rowStart-1;l.table.isAutoRowHeight(o)?(r=s,n=h):(r=Math.max(l.bodyTopRow,i-l.screenRowCount),n=Math.min(l.bodyBottomRow,i+2*l.screenRowCount,l.table.rowCount-1)),(0,eP.Y)(l.table,r,n,!1),function(e,t,i,r){for(let n=0;n<r.table.frozenColCount;n++){let l=r.table.scenegraph.getColGroup(n);if(l)for(let n=e;n<=t;n++)iu(l,i,r)}for(let n=r.table.colCount-r.table.rightFrozenColCount;n<r.table.colCount;n++){let l=r.table.scenegraph.getColGroup(n);if(l)for(let n=e;n<=t;n++)iu(l,i,r)}for(let n=r.bodyLeftCol;n<=r.bodyRightCol;n++){let l=r.table.scenegraph.getColGroup(n);if(l)for(let n=e;n<=t;n++)iu(l,i,r)}}(o,a,t,l),l.rowStart="up"===t?l.rowStart+e:l.rowStart-e,l.rowEnd="up"===t?l.rowEnd+e:l.rowEnd-e;let d=ic(r,n,l,!0);l.table.isAutoRowHeight(o)&&(ia(l.bodyLeftCol,l.bodyRightCol,r,n,l.table,h>l.bodyBottomRow-(l.rowEnd-l.rowStart+1)?"down":"up",!0),ia(0,l.table.frozenColCount-1,r,n,l.table,h>l.bodyBottomRow-(l.rowEnd-l.rowStart+1)?"down":"up",!0),ia(l.table.colCount-l.table.rightFrozenColCount,l.table.colCount-1,r,n,l.table,h>l.bodyBottomRow-(l.rowEnd-l.rowStart+1)?"down":"up",!0)),l.currentRow="up"===t?l.currentRow+e:l.currentRow-e,l.totalRow=Math.max(0,Math.min(l.bodyBottomRow,"up"===t?l.totalRow+e:l.totalRow-e,l.table.rowCount-1)),l.referenceRow=l.rowStart+Math.floor((l.rowEnd-l.rowStart)/2),l.table.isAutoRowHeight(o)&&d?l.rowUpdatePos=Math.min(l.rowUpdatePos,l.rowEnd+1):l.rowUpdatePos=Math.min(l.rowUpdatePos,s),l.rowUpdateDirection=t,l.table.scenegraph.updateNextFrame(),yield l.progress()}else{let r,n,o="up"===t?l.rowStart+e:l.rowStart-e,a=Math.min(l.table.rowCount-1,"up"===t?l.rowEnd+e:l.rowEnd-e),s=l.table.getRowsHeight(l.bodyTopRow,o-1);l.table.isAutoRowHeight(o)?(r=o,n=a):(r=Math.max(l.bodyTopRow,i-l.screenRowCount),n=Math.min(l.bodyBottomRow,i+2*l.screenRowCount,l.table.rowCount-1)),(0,eP.Y)(l.table,r,n,!1),function(e,t,i,r){for(let n=0;n<r.table.frozenColCount;n++){let l=r.table.scenegraph.getColGroup(n);null==l||l.forEachChildren((n,l)=>{r.updateCellGroupPosition(n,"up"===i?n.row+t:n.row-t,0===l?e:n._prev.attribute.y+r.table.getRowHeight(n._prev.row))})}for(let n=r.table.colCount-r.table.rightFrozenColCount;n<r.table.colCount;n++){let l=r.table.scenegraph.getColGroup(n);null==l||l.forEachChildren((n,l)=>{r.updateCellGroupPosition(n,"up"===i?n.row+t:n.row-t,0===l?e:n._prev.attribute.y+r.table.getRowHeight(n._prev.row))})}for(let n=r.bodyLeftCol;n<=r.bodyRightCol;n++){let l=r.table.scenegraph.getColGroup(n);null==l||l.forEachChildren((n,l)=>{r.updateCellGroupPosition(n,"up"===i?n.row+t:n.row-t,0===l?e:n._prev.attribute.y+r.table.getRowHeight(n._prev.row))})}}(s,e,t,l),l.rowStart=o,l.rowEnd=a;let h=ic(r,n,l,!0);l.table.isAutoRowHeight(o)&&(ia(l.bodyLeftCol,l.bodyRightCol,r,n,l.table,a>l.bodyBottomRow-(l.rowEnd-l.rowStart+1)?"down":"up"),ia(0,l.table.frozenColCount-1,r,n,l.table,a>l.bodyBottomRow-(l.rowEnd-l.rowStart+1)?"down":"up"),ia(l.table.colCount-l.table.rightFrozenColCount,l.table.colCount-1,r,n,l.table,a>l.bodyBottomRow-(l.rowEnd-l.rowStart+1)?"down":"up")),l.currentRow="up"===t?l.currentRow+e:l.currentRow-e,l.totalRow=Math.max(0,Math.min(l.bodyBottomRow,"up"===t?l.totalRow+e:l.totalRow-e,l.table.rowCount-1)),l.referenceRow=l.rowStart+Math.floor((l.rowEnd-l.rowStart)/2),l.table.isAutoRowHeight(o)&&h?l.rowUpdatePos=l.rowEnd+1:l.rowUpdatePos=l.rowStart,l.rowUpdateDirection=a>l.bodyBottomRow-(l.rowEnd-l.rowStart+1)?"down":"up",l.table.scenegraph.updateNextFrame(),yield l.progress()}})}function iu(e,t,i){if(e.childrenCount>=1)if("up"===t){let t=e.firstChild;i.updateCellGroupPosition(t,e.lastChild.row+1,e.lastChild.attribute.y+i.table.getRowHeight(e.lastChild.row)),e.appendChild(t)}else{let t=e.lastChild;i.updateCellGroupPosition(t,e.firstChild.row-1,e.firstChild.attribute.y-i.table.getRowHeight(t.row)),e.insertBefore(t,e.firstChild)}}function ic(e,t,i,r=!1){for(let r=0;r<i.table.frozenColCount;r++)for(let n=e;n<=t;n++){let e=i.highPerformanceGetCell(r,n,!0);i.updateCellGroupContent(e)}for(let r=i.table.colCount-i.table.rightFrozenColCount;r<i.table.colCount;r++)for(let n=e;n<=t;n++){let e=i.highPerformanceGetCell(r,n);i.updateCellGroupContent(e)}let n=i.bodyLeftCol,l=i.bodyRightCol,o=!0;if(r){let e=i.screenLeftCol;n=Math.max(i.bodyLeftCol,e-i.screenColCount),l=Math.min(i.bodyRightCol,e+2*i.screenColCount),n===i.bodyLeftCol&&l===i.bodyRightCol||(o=!1)}for(let r=n;r<=l;r++)for(let n=e;n<=t;n++){let e=i.highPerformanceGetCell(r,n);i.updateCellGroupContent(e)}return ip(i.table.scenegraph.rowHeaderGroup),ip(i.table.scenegraph.rightFrozenGroup),ip(i.table.scenegraph.bodyGroup),i.table.scenegraph.updateNextFrame(),o}function ip(e){var t,i;let r=t6(e);if(!r)return;let n=t6(r);if(n&&(e.setAttribute("height",n.attribute.y+n.attribute.height),e.border)){let r=e.border;r.setAttribute("height",n.attribute.y+n.attribute.height-(null!=(t=r.attribute.borderTop)?t:0)/2-(null!=(i=r.attribute.borderBottom)?i:0)/2)}}function ig(e){let{changedCells:t}=e.internalProps.stick;return t.forEach(t=>{e.scenegraph.getCell(t.col,t.row).forEachChildren(e=>{e.setAttributes({dx:t.dx,dy:t.dy})})}),t.clear(),t}function im(e){let t=ig(e),{scrollTop:i,scrollLeft:r,frozenRowCount:n,frozenColCount:l}=e,o=e.getFrozenRowsHeight(),a=e.getFrozenColsWidth(),{row:s}=e.getRowAt(i+o+1),{col:h}=e.getColAt(r+a+1),d=Math.max(s,e.frozenRowCount),u=Math.max(h,e.frozenColCount),c=e.getAllRowsHeight()>e.tableNoFrameHeight?e.getRowAt(i+e.tableNoFrameHeight-e.getBottomFrozenRowsHeight()-1).row:e.rowCount-e.bottomFrozenRowCount-1,p=e.getAllColsWidth()>e.tableNoFrameWidth?e.getColAt(r+e.tableNoFrameWidth-e.getRightFrozenColsWidth()-1).col:e.colCount-e.rightFrozenColCount-1;if(!(p<0||c<0)){for(let i=0;i<n&&!(p<u);i++)[u,p].forEach(r=>{let n=e._getCellStyle(r,i);(null==n?void 0:n.textStick)&&"vertical"!==(null==n?void 0:n.textStick)&&iv(e.scenegraph.getCell(r,i),a+e.tableX,e.tableNoFrameWidth-e.getRightFrozenColsWidth()+e.tableX,t,null==n?void 0:n.textStickBaseOnAlign,e)});for(let i=0;i<l&&!(c<d);i++)[d,c].forEach(r=>{let n=e._getCellStyle(i,r);(null==n?void 0:n.textStick)&&"horizontal"!==(null==n?void 0:n.textStick)&&ib(e.scenegraph.getCell(i,r),o+e.tableY,e.tableNoFrameHeight-e.getBottomFrozenRowsHeight()+e.tableY,t,null==n?void 0:n.textStickBaseOnAlign,e)});for(let i=u;i<=p&&!(c<d);i++)[d,c].forEach(r=>{let n=e._getCellStyle(i,r);(null==n?void 0:n.textStick)&&"horizontal"!==(null==n?void 0:n.textStick)&&ib(e.scenegraph.getCell(i,r),o+e.tableY,e.tableNoFrameHeight-e.getBottomFrozenRowsHeight()+e.tableY,t,null==n?void 0:n.textStickBaseOnAlign,e)});for(let i=d;i<=c&&!(p<u);i++)[u,p].forEach(r=>{let n=e._getCellStyle(r,i);(null==n?void 0:n.textStick)&&"vertical"!==(null==n?void 0:n.textStick)&&iv(e.scenegraph.getCell(r,i),a+e.tableX,e.tableNoFrameWidth-e.getRightFrozenColsWidth()+e.tableX,t,null==n?void 0:n.textStickBaseOnAlign,e)})}}function ib(e,t,i,r,n,l){if((0,eM.Z)(e.mergeStartCol)&&(0,eM.Z)(e.mergeStartRow)&&(0,eM.Z)(e.mergeEndCol)&&(0,eM.Z)(e.mergeEndRow)){let{colStart:o,colEnd:a,rowStart:s,rowEnd:h}=(0,eB.e)(e,l.scenegraph);for(let e=o;e<=a;e++)for(let o=s;o<=h;o++){let a=l.scenegraph.getCell(e,o);"cell"===a.role&&iy(a,t,i,r,n)}}else iy(e,t,i,r,n)}function iy(e,t,i,r,n){var l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C;let x=e.getChildByName("text",!0)||e.getChildByName("image",!0);if(!x)return;if("image"===x.type){let{image:e}=x.attribute;if(!e||!x.resources||"success"!==x.resources.get(e).state)return}let w=null!=(l=x.textBaseline)?l:"top";x.AABBBounds.width();let S=x.globalAABBBounds.y1,A=x.globalAABBBounds.y2;if("middle"===w&&n){let n=e.globalAABBBounds.y1+(null!=(a=null==(o=e.firstChild)?void 0:o.attribute.dy)?a:0),l=n+(null!=(h=null!=(s=e.contentHeight)?s:e.attribute.height)?h:0);if(n<t||l>i){let o=Math.max(n,t),a=Math.min(l,i),s=x.globalTransMatrix.f-(a+o)/2+x.AABBBounds.height()/2;r.has(`${e.col}-${e.row}`)||r.set(`${e.col}-${e.row}`,{col:e.col,row:e.row,dx:null!=(u=null==(d=e.firstChild)?void 0:d.attribute.dx)?u:0,dy:null!=(p=null==(c=e.firstChild)?void 0:c.attribute.dy)?p:0}),e.forEachChildren(e=>{var t;e.setAttribute("dy",(null!=(t=e.attribute.dy)?t:0)-s+2)})}}else if(S<t){let i=S-t;r.has(`${e.col}-${e.row}`)||r.set(`${e.col}-${e.row}`,{col:e.col,row:e.row,dx:null!=(f=null==(g=e.firstChild)?void 0:g.attribute.dx)?f:0,dy:null!=(b=null==(m=e.firstChild)?void 0:m.attribute.dy)?b:0}),e.forEachChildren(e=>{var t;e.setAttribute("dy",(null!=(t=e.attribute.dy)?t:0)-i+2)})}else if(A>i){let t=A-i;r.has(`${e.col}-${e.row}`)||r.set(`${e.col}-${e.row}`,{col:e.col,row:e.row,dx:null!=(v=null==(y=e.firstChild)?void 0:y.attribute.dx)?v:0,dy:null!=(C=null==(_=e.firstChild)?void 0:_.attribute.dy)?C:0}),e.forEachChildren(e=>{var i;e.setAttribute("dy",(null!=(i=e.attribute.dy)?i:0)-t)})}}function iv(e,t,i,r,n,l){if((0,eM.Z)(e.mergeStartCol)&&(0,eM.Z)(e.mergeStartRow)&&(0,eM.Z)(e.mergeEndCol)&&(0,eM.Z)(e.mergeEndRow)){let{colStart:o,colEnd:a,rowStart:s,rowEnd:h}=(0,eB.e)(e,l.scenegraph);for(let e=o;e<=a;e++)for(let o=s;o<=h;o++){let a=l.scenegraph.getCell(e,o);"cell"===a.role&&i_(a,t,i,r,n)}}else i_(e,t,i,r,n)}function i_(e,t,i,r,n){var l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x;let w=e.getChildByName("text",!0)||e.getChildByName("image",!0);if(!w)return;if("image"===w.type){let{image:e}=w.attribute;if(!e||!w.resources||"success"!==w.resources.get(e).state)return}let S=null!=(o=null!=(l=w.attribute.textAlign)?l:w.textAlign)?o:"left";w.AABBBounds.width();let A=w.globalAABBBounds.x1,k=w.globalAABBBounds.x2;if("center"===S&&n){let n=e.globalAABBBounds.x1+(null!=(s=null==(a=e.firstChild)?void 0:a.attribute.dx)?s:0),l=n+(null!=(d=null!=(h=e.contentWidth)?h:e.attribute.width)?d:0);if(n<t||l>i){let o=Math.max(n,t),a=Math.min(l,i),s=w.globalTransMatrix.e-(a+o)/2;r.has(`${e.col}-${e.row}`)||r.set(`${e.col}-${e.row}`,{col:e.col,row:e.row,dx:null!=(c=null==(u=e.firstChild)?void 0:u.attribute.dx)?c:0,dy:null!=(g=null==(p=e.firstChild)?void 0:p.attribute.dy)?g:0}),e.forEachChildren(e=>{var t;e.setAttribute("dx",(null!=(t=e.attribute.dx)?t:0)-s+2)})}}else if(A<t){let i=A-t;r.has(`${e.col}-${e.row}`)||r.set(`${e.col}-${e.row}`,{col:e.col,row:e.row,dx:null!=(m=null==(f=e.firstChild)?void 0:f.attribute.dx)?m:0,dy:null!=(y=null==(b=e.firstChild)?void 0:b.attribute.dy)?y:0}),e.forEachChildren(e=>{var t;e.setAttribute("dx",(null!=(t=e.attribute.dx)?t:0)-i+2)})}else if(k>i){let t=k-i;r.has(`${e.col}-${e.row}`)||r.set(`${e.col}-${e.row}`,{col:e.col,row:e.row,dx:null!=(_=null==(v=e.firstChild)?void 0:v.attribute.dx)?_:0,dy:null!=(x=null==(C=e.firstChild)?void 0:C.attribute.dy)?x:0}),e.forEachChildren(e=>{var i;e.setAttribute("dx",(null!=(i=e.attribute.dx)?i:0)-t)})}}function iC(e){var t,i;let r=e.internalProps.layoutMap.headerObjects,n=e.internalProps.layoutMap.columnObjects;for(let e=0;e<r.length;e++){let i=r[e];if(i&&(null==(t=i.style)?void 0:t.textStick))return!0}for(let e=0;e<n.length;e++){let t=n[e];if(t&&(null==(i=t.style)?void 0:i.textStick))return!0}return!!(e.theme.headerStyle.textStick||e.theme.rowHeaderStyle.textStick||e.theme.bodyStyle.textStick)}var ix=function(e,t,i,r){return new(i||(i=Promise))(function(n,l){function o(e){try{s(r.next(e))}catch(e){l(e)}}function a(e){try{s(r.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}s((r=r.apply(e,t||[])).next())})};class iw{constructor(e){this.isRelease=!1,this.mode="column",this.rowLimit=200,this.currentRow=0,this.rowStart=0,this.rowEnd=0,this.referenceRow=0,this.screenTopRow=0,this.deltaY=0,this.deltaHeight=0,this.colLimit=100,this.screenLeftCol=0,this.deltaX=0,this.deltaWidth=0,this.cellCache=new Map,this.table=e,this.table.isPivotChart()?(this.rowLimit=Math.max(100,Math.ceil(2*e.tableNoFrameHeight/e.defaultRowHeight)),this.colLimit=Math.max(100,Math.ceil(2*e.tableNoFrameWidth/e.defaultColWidth))):this.table.isAutoRowHeight(e.columnHeaderLevelCount)?this.rowLimit=Math.max(100,Math.ceil(2*e.tableNoFrameHeight/e.defaultRowHeight)):("autoWidth"===this.table.widthMode||(this.rowLimit=Math.max(200,Math.ceil(2*e.tableNoFrameHeight/e.defaultRowHeight))),this.colLimit=Math.max(100,Math.ceil(2*e.tableNoFrameWidth/e.defaultColWidth))),this.table.internalProps.transpose?this.mode="row":this.table.isPivotTable()&&(this.mode="pivot"),this.table.options.maintainedDataCount&&(this.rowLimit=this.table.options.maintainedDataCount),this.table.options.maintainedColumnCount&&(this.colLimit=this.table.options.maintainedColumnCount),"adaptive"===this.table.heightMode&&(this.rowLimit=this.table.rowCount),"adaptive"===this.table.widthMode&&(this.colLimit=this.table.colCount)}get bodyLeftCol(){return this.table.frozenColCount}get bodyTopRow(){return this.table.frozenRowCount}setParamsForColumn(){this.bodyRightCol=this.table.colCount-1-this.table.rightFrozenColCount;let e=Math.min(this.colLimit,this.bodyRightCol-this.bodyLeftCol+1);this.totalActualBodyColCount=e,this.totalCol=this.bodyLeftCol+e-1,this.colStart=this.bodyLeftCol,this.colEnd=this.totalCol;let t=this.table.defaultColWidth;this.taskColCount=+Math.ceil(this.table.tableNoFrameWidth/t);let i=t*e,r=t*(this.bodyRightCol-this.bodyLeftCol+1);this.xLimitLeft=i/2,this.xLimitRight=r-i/2;let n=5*this.table.tableNoFrameWidth;this.screenColCount=Math.ceil(this.table.tableNoFrameWidth/t),this.firstScreenColLimit=Math.max(15,this.bodyLeftCol+Math.min(this.colLimit,Math.ceil(n/t))),this.colUpdatePos=this.bodyRightCol}setParamsForRow(){this.bodyBottomRow=this.table.rowCount-1-this.table.bottomFrozenRowCount;let e=Math.min(this.rowLimit,this.bodyBottomRow-this.bodyTopRow+1);this.totalActualBodyRowCount=e,this.totalRow=this.bodyTopRow+e-1,this.rowStart=this.bodyTopRow,this.rowEnd=this.totalRow;let t=this.table.defaultRowHeight;this.taskRowCount=+Math.ceil(this.table.tableNoFrameHeight/t);let i=t*e,r=t*(this.bodyBottomRow-this.bodyTopRow+1);this.yLimitTop=i/2,this.yLimitBottom=r-i/2;let n=5*this.table.tableNoFrameHeight;this.screenRowCount=Math.ceil(this.table.tableNoFrameHeight/t),this.firstScreenRowLimit=Math.max(30,this.bodyTopRow+Math.min(this.rowLimit,Math.ceil(n/t))),this.rowUpdatePos=this.bodyBottomRow}refreshRowCount(){this.bodyBottomRow=this.table.rowCount-1-this.table.bottomFrozenRowCount;let e=Math.min(this.rowLimit,this.bodyBottomRow-this.bodyTopRow+1);this.totalActualBodyRowCount=e,this.totalRow=this.rowStart+e-1}refreshColCount(){this.bodyRightCol=this.table.colCount-1-this.table.rightFrozenColCount;let e=Math.min(this.colLimit,this.bodyRightCol-this.bodyLeftCol+1);this.totalActualBodyColCount=e,this.totalCol=this.bodyLeftCol+e-1,this.colStart=this.bodyLeftCol,this.colEnd=this.totalCol}resize(){let e=this.table.defaultColWidth;this.taskColCount=+Math.ceil(this.table.tableNoFrameWidth/e);let t=5*this.table.tableNoFrameWidth;this.screenColCount=Math.ceil(this.table.tableNoFrameWidth/e),this.firstScreenColLimit=this.bodyLeftCol+Math.min(this.colLimit,Math.ceil(t/e));let i=this.table.defaultRowHeight;this.taskRowCount=+Math.ceil(this.table.tableNoFrameHeight/i);let r=5*this.table.tableNoFrameHeight;this.screenRowCount=Math.ceil(this.table.tableNoFrameHeight/i),this.firstScreenRowLimit=this.bodyTopRow+Math.min(this.rowLimit,Math.ceil(r/i))}createGroupForFirstScreen(e,t,i,r,n,l,o,a){!function(e,t,i,r,n,l,o,a,s){var h,d,u,c,p,g,f,m,b,y,v,_,C;let x,w,S,A,{table:k}=s,{leftBottomCornerGroup:M,rightTopCornerGroup:T,rightBottomCornerGroup:R}=k.scenegraph;s.setParamsForRow(),s.setParamsForColumn(),("adaptive"===k.widthMode||k.options.autoWrapText&&("adaptive"===k.heightMode||k.isAutoRowHeight(k.columnHeaderLevelCount)))&&(S=k.colCount-1),x=Math.min(s.firstScreenColLimit-1,k.colCount-1),"adaptive"===k.heightMode&&(A=k.rowCount-1),w=Math.min(s.firstScreenRowLimit-1,k.rowCount-1),0===k.internalProps._widthResizedColMap.size&&(0,tJ.rj)(k,0,null!=S?S:x),0===k.internalProps._heightResizedRowMap.size&&(0,eP.Y)(k,0,"auto"===k.options.canvasHeight||(null==(h=k.options.customConfig)?void 0:h.forceComputeAllRowHeight)?k.rowCount-1:null!=A?A:w),x<k.colCount-k.rightFrozenColCount&&k.colCount-k.rightFrozenColCount<=k.colCount-1&&(0,tJ.rj)(k,k.colCount-k.rightFrozenColCount,k.colCount-1),w<k.rowCount-k.bottomFrozenRowCount&&k.rowCount-k.bottomFrozenRowCount<=k.rowCount-1&&(0,eP.Y)(k,k.rowCount-k.bottomFrozenRowCount,k.rowCount-1),k.scenegraph.colHeaderGroup.setAttribute("x",k.getFrozenColsWidth()),k.scenegraph.rowHeaderGroup.setAttribute("y",k.getFrozenRowsHeight()),k.scenegraph.bottomFrozenGroup.setAttribute("x",k.getFrozenColsWidth()),k.scenegraph.rightFrozenGroup.setAttribute("y",k.getFrozenRowsHeight()),k.scenegraph.bodyGroup.setAttributes({x:k.getFrozenColsWidth(),y:k.getFrozenRowsHeight()}),t4(e,o,a,0,k.frozenColCount-1,0,k.frozenRowCount-1,k.isListTable()?"columnHeader":"cornerHeader",k),x-k.rightFrozenColCount>=k.frozenColCount&&t4(t,o,a,k.frozenColCount,x-k.rightFrozenColCount,0,k.frozenRowCount-1,"columnHeader",k),k.frozenColCount>0&&(k.leftRowSeriesNumberCount>0&&t4(i,o,a,0,k.leftRowSeriesNumberCount-1,k.frozenRowCount,w-k.bottomFrozenRowCount,"rowHeader",k),k.frozenColCount>k.leftRowSeriesNumberCount&&t4(i,o,a,k.leftRowSeriesNumberCount,Math.min(k.frozenColCount-1,k.rowHeaderLevelCount+k.leftRowSeriesNumberCount-1),k.frozenRowCount,w-k.bottomFrozenRowCount,"rowHeader",k),k.frozenColCount>k.rowHeaderLevelCount+k.leftRowSeriesNumberCount&&t4(i,o,a,k.rowHeaderLevelCount+k.leftRowSeriesNumberCount,k.frozenColCount-1,k.frozenRowCount,w-k.bottomFrozenRowCount,"body",k)),k.bottomFrozenRowCount>0&&(k.frozenColCount>0&&(k.leftRowSeriesNumberCount>0&&t4(M,o,a,0,k.leftRowSeriesNumberCount-1,k.rowCount-1-k.bottomFrozenRowCount+1,k.rowCount-1,"rowHeader",k),k.rowHeaderLevelCount>0&&t4(M,o,a,k.leftRowSeriesNumberCount,k.leftRowSeriesNumberCount+k.rowHeaderLevelCount-1,k.rowCount-1-k.bottomFrozenRowCount+1,k.rowCount-1,"rowHeader",k),k.frozenColCount>k.rowHeaderLevelCount+k.leftRowSeriesNumberCount&&t4(M,o,a,k.rowHeaderLevelCount+k.leftRowSeriesNumberCount,k.frozenColCount-1,k.rowCount-1-k.bottomFrozenRowCount+1,k.rowCount-1,"body",k)),x-k.rightFrozenColCount>=k.frozenColCount&&t4(n,o,a,k.frozenColCount,x-k.rightFrozenColCount,k.rowCount-1-k.bottomFrozenRowCount+1,k.rowCount-1,k.isPivotChart()?"rowHeader":"body",k)),k.rightFrozenColCount>0&&(t4(T,o,a,k.colCount-1-k.rightFrozenColCount+1,k.colCount-1,0,k.frozenRowCount-1,"columnHeader",k),t4(r,o,a,k.colCount-1-k.rightFrozenColCount+1,k.colCount-1,k.frozenRowCount,w-k.bottomFrozenRowCount,k.isPivotChart()?"rowHeader":"body",k)),k.bottomFrozenRowCount>0&&k.rightFrozenColCount>0&&t4(R,o,a,k.colCount-1-k.rightFrozenColCount+1,k.colCount-1,k.rowCount-1-k.bottomFrozenRowCount+1,k.rowCount-1,"body",k),x-k.rightFrozenColCount>=k.frozenColCount&&t4(l,o,a,k.frozenColCount,x-k.rightFrozenColCount,k.frozenRowCount,w-k.bottomFrozenRowCount,"body",k),l.firstChild||t.firstChild||e.firstChild||i.firstChild?(s.currentRow=null!=(p=null!=(u=null==(d=l.firstChild)?void 0:d.rowNumber)?u:null==(c=i.firstChild)?void 0:c.rowNumber)?p:s.totalRow,s.rowEnd=s.currentRow,s.rowUpdatePos=s.rowEnd+1,s.referenceRow=s.rowStart+Math.floor((s.rowEnd-s.rowStart)/2),s.currentCol=null!=(C=null!=(v=null!=(b=null!=(f=null==(g=l.lastChild)?void 0:g.col)?f:null==(m=t.lastChild)?void 0:m.col)?b:null==(y=i.lastChild)?void 0:y.col)?v:null==(_=e.lastChild)?void 0:_.col)?C:s.totalCol,s.colEnd=s.currentCol,s.colUpdatePos=s.colEnd+1,s.referenceCol=s.colStart+Math.floor((s.colEnd-s.colStart)/2),s.progress()):(s.currentRow=s.totalRow,s.rowEnd=s.currentRow,s.rowUpdatePos=s.rowEnd+1,s.referenceRow=s.rowStart+Math.floor((s.rowEnd-s.rowStart)/2),s.currentCol=s.totalCol,s.colEnd=s.currentCol,s.colUpdatePos=s.colEnd+1,s.referenceCol=s.colStart+Math.floor((s.colEnd-s.colStart)/2))}(e,t,i,r,n,l,o,a,this)}progress(){return ix(this,void 0,void 0,function*(){if(!this.isProgressing)return this.isProgressing=!0,new Promise((e,t)=>{setTimeout(()=>ix(this,void 0,void 0,function*(){this.isProgressing=!1,this.isRelease||(this.colUpdatePos<=this.colEnd?(yield this.updateColCellGroupsAsync(),yield this.progress()):this.rowUpdatePos<=this.rowEnd?(yield this.updateRowCellGroupsAsync(),yield this.progress()):this.currentCol<this.totalCol?(yield this.createCol(),yield this.progress()):this.currentRow<this.totalRow&&(yield this.createRow(),yield this.progress()),im(this.table),this.table.scenegraph.updateNextFrame(),e())}),16)})})}createRow(){return ix(this,void 0,void 0,function*(){this.taskRowCount&&this.createRowCellGroup(this.taskRowCount)})}createCol(){return ix(this,void 0,void 0,function*(){this.taskColCount&&this.createColGroup(this.taskRowCount)})}createRowCellGroup(e){let t=Math.min(this.totalRow,this.currentRow+e);if("adaptive"!==this.table.heightMode&&(0,eP.Y)(this.table,this.currentRow+1,t,!1),this.rowEnd=t,this.table.frozenColCount){let e=0;for(let i=0;i<this.table.frozenColCount;i++){let r=this.table.scenegraph.getColGroup(i),{height:n}=(this.table.isListTable(),t1(r,i,r.attribute.width,this.currentRow+1,t,this.table.scenegraph.mergeMap,this.table.defaultRowHeight,this.table));e=Math.max(e,n),this.table.scenegraph.rowHeaderGroup.setAttribute("height",e)}}if(this.table.rightFrozenColCount){let e=0;for(let i=this.table.colCount-this.table.rightFrozenColCount;i<this.table.colCount;i++){let r=this.table.scenegraph.getColGroup(i),{height:n}=(this.table.isPivotChart(),t1(r,i,r.attribute.width,this.currentRow+1,t,this.table.scenegraph.mergeMap,this.table.defaultRowHeight,this.table));e=Math.max(e,n),this.table.scenegraph.rightFrozenGroup.setAttribute("height",e)}}let i=0;for(let e=this.bodyLeftCol;e<=this.bodyRightCol;e++){let r=this.table.scenegraph.getColGroup(e);if(!r)continue;this.table.rowHeaderLevelCount;let{height:n}=t1(r,e,r.attribute.width,this.currentRow+1,t,this.table.scenegraph.mergeMap,this.table.defaultRowHeight,this.table);i=Math.max(i,n)}this.table.scenegraph.bodyGroup.setAttribute("height",i),this.currentRow=t,this.rowUpdatePos=this.rowEnd,this.table.scenegraph.updateContainer(),this.table.scenegraph.updateBorderSizeAndPosition()}createColGroup(e){let t=Math.min(this.totalCol,this.currentCol+e);"adaptive"!==this.table.widthMode&&(0,tJ.rj)(this.table,this.currentCol+1,t),this.colEnd=t;for(let e=0;e<this.table.rowCount;e++){let t=this.highPerformanceGetCell(this.currentCol,e);"cell"===t.role&&(0,eM.Z)(t.mergeStartCol)&&t.mergeStartCol>this.currentCol&&this.table.scenegraph.updateCellContent(t.col,t.row)}if(this.table.frozenRowCount){let e=this.table.scenegraph.colHeaderGroup.lastChild instanceof eG.Z?this.table.scenegraph.colHeaderGroup.lastChild:this.table.scenegraph.colHeaderGroup.lastChild._prev,i=e.attribute.x+e.attribute.width,r=e.attribute.y;t4(this.table.scenegraph.colHeaderGroup,i,r,this.currentCol+1,t,0,this.table.frozenRowCount-1,"columnHeader",this.table)}if(this.table.bottomFrozenRowCount){let e=this.table.scenegraph.bottomFrozenGroup.lastChild instanceof eG.Z?this.table.scenegraph.bottomFrozenGroup.lastChild:this.table.scenegraph.bottomFrozenGroup.lastChild._prev,i=e.attribute.x+e.attribute.width,r=e.attribute.y;t4(this.table.scenegraph.bottomFrozenGroup,i,r,this.currentCol+1,t,this.table.rowCount-this.table.bottomFrozenRowCount,this.table.rowCount-1,"columnHeader",this.table)}let i=this.table.scenegraph.bodyGroup.lastChild&&(this.table.scenegraph.bodyGroup.lastChild instanceof eG.Z?this.table.scenegraph.bodyGroup.lastChild:this.table.scenegraph.bodyGroup.lastChild._prev);i||(i=this.table.scenegraph.colHeaderGroup.lastChild&&(this.table.scenegraph.colHeaderGroup.lastChild instanceof eG.Z?this.table.scenegraph.colHeaderGroup.lastChild:this.table.scenegraph.colHeaderGroup.lastChild._prev));let r=i.attribute.x+i.attribute.width,n=i.attribute.y;t4(this.table.scenegraph.bodyGroup,r,n,this.currentCol+1,t,this.rowStart,this.rowEnd,"body",this.table),this.currentCol=t,this.colUpdatePos=this.colEnd,this.table.scenegraph.updateContainer(),this.table.scenegraph.updateBorderSizeAndPosition()}setY(e,t=!1){return ix(this,void 0,void 0,function*(){let i=this.table.getRowsHeight(this.bodyTopRow,this.bodyTopRow+(this.rowEnd-this.rowStart+1))/2,r=this.table.getAllRowsHeight()-i,n=this.table.getTargetRowAt(e+this.table.scenegraph.colHeaderGroup.attribute.height);n&&(this.screenTopRow=n.row),e<i&&this.rowStart===this.bodyTopRow||e>r&&this.rowEnd===this.bodyBottomRow?(this.updateDeltaY(e),this.updateBody(e-this.deltaY)):this.table.scenegraph.bodyGroup.firstChild&&"group"===this.table.scenegraph.bodyGroup.firstChild.type&&0!==this.table.scenegraph.bodyGroup.firstChild.childrenCount||this.table.scenegraph.rowHeaderGroup.firstChild&&"group"===this.table.scenegraph.rowHeaderGroup.firstChild.type&&0!==this.table.scenegraph.rowHeaderGroup.firstChild.childrenCount?this.dynamicSetY(e,n,t):(this.updateDeltaY(e),this.updateBody(e-this.deltaY))})}setX(e,t=!1){return ix(this,void 0,void 0,function*(){let i=this.table.getColsWidth(this.bodyLeftCol,this.bodyLeftCol+(this.colEnd-this.colStart+1))/2,r=this.table.getAllColsWidth()-i,n=this.table.getTargetColAt(e+this.table.scenegraph.rowHeaderGroup.attribute.width);n&&(this.screenLeftCol=n.col),e<i&&this.colStart===this.bodyLeftCol||e>r&&this.colEnd===this.bodyRightCol||this.table.scenegraph.bodyGroup.firstChild&&"group"===this.table.scenegraph.bodyGroup.firstChild.type&&0===this.table.scenegraph.bodyGroup.firstChild.childrenCount?(this.updateDeltaX(e),this.table.scenegraph.setBodyAndColHeaderX(-e+this.deltaX)):this.dynamicSetX(e,n,t)})}dynamicSetY(e,t,i=!1){return ix(this,void 0,void 0,function*(){!function(e,t,i,r){ih(this,void 0,void 0,function*(){var n,l,o,a,s;if(!t)return;let h=t.row,d=t.top;if(n=i?r.bodyBottomRow-r.rowEnd:h-r.referenceRow,l=h,o=d,a=e,s=r,n>0?id(n,"up",l,o,a,s):n<0&&id(-n,"down",l,o,a,s),s.updateDeltaY(a,o,l),s.updateBody(a-s.deltaY),i){let t=r.table.scenegraph.highPerformanceGetCell(r.colStart,r.rowEnd,!0);if("cell"===t.role){let i=t.attribute.y+t.attribute.height-(r.table.tableNoFrameHeight-r.table.getFrozenRowsHeight()-r.table.getBottomFrozenRowsHeight())-e;r.deltaY=-i,r.updateBody(e-r.deltaY)}}})}(e,t,i,this)})}dynamicSetX(e,t,i=!1){return ix(this,void 0,void 0,function*(){!function(e,t,i,r){t9(this,void 0,void 0,function*(){var n,l,o,a,s;if(!t)return;let h=t.col,d=t.left;if(n=i?r.bodyRightCol-r.colEnd:r.screenLeftCol-r.referenceCol,l=h,o=d,a=e,s=r,n>0?ie(n,"left",s.screenLeftCol,o,a,s):n<0&&ie(-n,"right",s.screenLeftCol,o,a,s),s.updateDeltaX(a,o,l),s.table.scenegraph.setBodyAndColHeaderX(-a+s.deltaX),i){let t=r.table.scenegraph.getColGroup(r.colEnd);if(t){let i=t.attribute.x+t.attribute.width-(r.table.tableNoFrameWidth-r.table.getFrozenColsWidth()-r.table.getRightFrozenColsWidth())-e;r.deltaX=-i,r.table.scenegraph.setBodyAndColHeaderX(-e+r.deltaX)}}r.table.scenegraph.updateNextFrame()})}(e,t,i,this)})}updateBody(e){this.table.scenegraph.setBodyAndRowHeaderY(-e)}updateRowCellGroupsAsync(){return ix(this,void 0,void 0,function*(){this.updateCellGroups(this.taskRowCount)})}updateCellGroups(e){let t=Math.min(this.bodyBottomRow,this.rowUpdatePos+e);this.table.isAutoRowHeight(this.rowUpdatePos)&&(0,eP.Y)(this.table,this.rowUpdatePos,t,!1),ic(this.rowUpdatePos,t,this),this.table.isAutoRowHeight(this.rowUpdatePos)&&(ia(this.bodyLeftCol,this.bodyRightCol,this.rowUpdatePos,t,this.table,this.rowUpdateDirection,!0),ia(0,this.table.frozenColCount-1,this.rowUpdatePos,t,this.table,this.rowUpdateDirection,!0),ia(this.table.colCount-this.table.rightFrozenColCount,this.table.colCount-1,this.rowUpdatePos,t,this.table,this.rowUpdateDirection,!0)),this.rowUpdatePos=t+1}updateBottomFrozenCellGroups(){let e=this.table.rowCount-this.table.bottomFrozenRowCount,t=this.table.rowCount-1;this.table.isAutoRowHeight(e)&&(0,eP.Y)(this.table,e,t,!1),ic(e,t,this),this.table.isAutoRowHeight(e)&&(ia(this.bodyLeftCol,this.bodyRightCol,e,t,this.table,this.rowUpdateDirection),ia(0,this.table.frozenColCount-1,e,t,this.table,this.rowUpdateDirection),ia(this.table.colCount-this.table.rightFrozenColCount,this.table.colCount-1,e,t,this.table,this.rowUpdateDirection))}updateRightFrozenCellGroups(){let e=this.table.colCount-this.table.rightFrozenColCount,t=this.table.colCount-1;"autoWidth"===this.table.widthMode&&(0,tJ.rj)(this.table,e,t,!1),il(e,t,this),this.table.isAutoRowHeight(this.rowStart)&&t8(e,t,this.table,this.colUpdateDirection)}updateColCellGroupsAsync(){return ix(this,void 0,void 0,function*(){this.updateColGroups(this.taskRowCount)})}updateColGroups(e){let t=Math.min(this.bodyRightCol,this.colUpdatePos+e);"autoWidth"===this.table.widthMode&&(0,tJ.rj)(this.table,this.colUpdatePos,t),il(this.colUpdatePos,t,this),this.colUpdatePos=t+1}updateCellGroupPosition(e,t,i){e.row=t,e.mergeStartCol=void 0,e.mergeStartRow=void 0,e.mergeEndCol=void 0,e.mergeEndRow=void 0,e.setAttribute("y",i),e.needUpdate=!0,e.needUpdateForAutoRowHeight=!0}updateCellGroupContent(e){if(!e.needUpdate||"cell"!==e.role)return e;let t=this.table.scenegraph.updateCellContent(e.col,e.row);return e.needUpdate=!1,t||e}sortCellVertical(){return ix(this,void 0,void 0,function*(){yield function(e){var t,i,r,n,l;return i=this,r=void 0,n=void 0,l=function*(){let i,r;e.table.scenegraph.bodyGroup.forEachChildren((e,t)=>{"group"===e.type&&(e.needUpdate=!0,null==e||e.forEachChildren(e=>{e.needUpdate=!0}))}),e.table.isAutoRowHeight(e.rowStart)?(i=e.rowStart,r=e.rowEnd):(i=Math.max(e.bodyTopRow,e.screenTopRow-e.screenRowCount),r=Math.min(e.bodyBottomRow,e.screenTopRow+2*e.screenRowCount,e.table.rowCount-1));let n=e.table.getAllRowsHeight();(0,eP.Y)(e.table,i,r);let l=e.table.getAllRowsHeight();n!==l&&e.table.scenegraph.updateContainerHeight(e.table.frozenRowCount,l-n);for(let i=0;i<(null!=(t=e.table.frozenColCount)?t:0);i++){let t=e.table.scenegraph.getColGroup(i);null==t||t.setAttribute("chartInstance",void 0);for(let t=e.rowStart;t<=e.rowEnd;t++)e.table.scenegraph.updateCellContent(i,t);for(let t=e.table.rowCount-e.table.bottomFrozenRowCount;t<e.table.rowCount;t++)e.table.scenegraph.updateCellContent(i,t)}for(let t=e.colStart;t<=e.colEnd;t++){let i=e.table.scenegraph.getColGroup(t);null==i||i.setAttribute("chartInstance",void 0);for(let i=e.table.rowCount-e.table.bottomFrozenRowCount;i<e.table.rowCount;i++)e.table.scenegraph.updateCellContent(t,i)}for(let t=e.table.colCount-e.table.rightFrozenColCount;t<e.table.colCount;t++){let i=e.table.scenegraph.getColGroup(t);null==i||i.setAttribute("chartInstance",void 0);for(let i=e.rowStart;i<=e.rowEnd;i++)e.table.scenegraph.updateCellContent(t,i);for(let i=e.table.rowCount-e.table.bottomFrozenRowCount;i<e.table.rowCount;i++)e.table.scenegraph.updateCellContent(t,i)}ic(i,r,e),e.table.isAutoRowHeight(i)&&ia(e.bodyLeftCol,e.bodyRightCol,i,r,e.table,e.rowEnd>e.bodyBottomRow-(e.rowEnd-e.rowStart+1)?"down":"up"),e.rowUpdatePos=e.rowStart,e.rowUpdateDirection=e.rowEnd>e.bodyBottomRow-(e.rowEnd-e.rowStart+1)?"down":"up",e.table.scenegraph.updateNextFrame(),e.table.isAutoRowHeight(e.rowStart)||(yield e.progress())},new(n||(n=Promise))(function(e,t){function o(e){try{s(l.next(e))}catch(e){t(e)}}function a(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var i;t.done?e(t.value):((i=t.value)instanceof n?i:new n(function(e){e(i)})).then(o,a)}s((l=l.apply(i,r||[])).next())})}(this)})}sortCellHorizontal(){return ix(this,void 0,void 0,function*(){yield function(e){var t,i,r,n;return t=this,i=void 0,r=void 0,n=function*(){e.table.scenegraph.bodyGroup.forEachChildren((e,t)=>{"group"===e.type&&(e.needUpdate=!0,null==e||e.forEachChildren(e=>{e.needUpdate=!0}))});let t=Math.max(e.bodyLeftCol,e.screenLeftCol-e.screenColCount),i=Math.min(e.bodyRightCol,e.screenLeftCol+2*e.screenColCount);(0,tJ.rj)(e.table,t,i);for(let t=e.colStart;t<=e.colEnd;t++){let i=e.table.scenegraph.getColGroup(t);null==i||i.setAttribute("chartInstance",void 0);for(let i=e.table.rowCount-e.table.bottomFrozenRowCount;i<e.table.rowCount;i++)e.table.scenegraph.updateCellContent(t,i)}for(let t=e.table.colCount-e.table.rightFrozenColCount;t<e.table.colCount;t++){let i=e.table.scenegraph.getColGroup(t);null==i||i.setAttribute("chartInstance",void 0);for(let i=e.rowStart;i<=e.rowEnd;i++)e.table.scenegraph.updateCellContent(t,i);for(let i=e.table.rowCount-e.table.bottomFrozenRowCount;i<e.table.rowCount;i++)e.table.scenegraph.updateCellContent(t,i)}il(t,i,e),e.colUpdatePos=e.colStart,e.colUpdateDirection=e.colEnd>e.bodyRightCol-(e.colEnd-e.colStart+1)?"right":"left",e.table.scenegraph.updateNextFrame(),yield e.progress()},new(r||(r=Promise))(function(e,l){function o(e){try{s(n.next(e))}catch(e){l(e)}}function a(e){try{s(n.throw(e))}catch(e){l(e)}}function s(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(o,a)}s((n=n.apply(t,i||[])).next())})}(this)})}highPerformanceGetCell(e,t,i){if(t>=this.table.frozenRowCount&&t<this.table.rowCount-this.table.bottomFrozenRowCount&&(t<this.rowStart||t>this.rowEnd)||e>=this.table.frozenColCount&&e<this.table.colCount-this.table.rightFrozenColCount&&(e<this.colStart||e>this.colEnd))return tQ;if(this.cellCache.get(e)){let r=this.cellCache.get(e);if((r._next||r._prev)&&Math.abs(r.row-t)<t){let n=function e(t,i){if(!t)return null;if(t.row===i)return t;let r=t._prev,n=t._next;return t.row>i&&r&&r.row===t.row-1?e(r,i):t.row<i&&n&&n.row===t.row+1?e(n,i):null}(r,t);return n&&(i||"shadow-cell"!==n.role)||(n=this.table.scenegraph.getCell(e,t,i)),n.row&&this.cellCache.set(e,n),n}let n=this.table.scenegraph.getCell(e,t,i);return n.col===e&&n.row&&this.cellCache.set(e,n),n}let r=this.table.scenegraph.getCell(e,t,i);return r.col===e&&r.row&&this.cellCache.set(e,r),r}updateDeltaY(e,t,i){if(this.rowStart===this.bodyTopRow){let e=this.table.scenegraph.highPerformanceGetCell(this.colStart,this.rowStart,!0);if("cell"===e.role){let t=e.attribute.y;this.deltaY=-t}}else if(this.rowEnd===this.bodyBottomRow){let e=this.table.scenegraph.highPerformanceGetCell(this.colStart,this.rowEnd,!0);if("cell"===e.role){let t=this.table.getRowHeight(this.rowEnd),i=e.attribute.y+t-(this.table.getAllRowsHeight()-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight());this.deltaY=-i}}else if((0,b.Z)(t)&&(0,b.Z)(i)){let r=this.table.scenegraph.highPerformanceGetCell(this.colStart,i,!0);"cell"!==r.role&&(r=this.table.scenegraph.highPerformanceGetCell(0,i,!0));let n=e-this.deltaY,l=t-n,o=r.attribute.y-n+this.table.getFrozenRowsHeight();this.deltaY=l-o}}updateDeltaX(e,t,i){if(this.colStart===this.bodyLeftCol){let e=this.table.scenegraph.getColGroup(this.colStart);if(e){let t=e.attribute.x;this.deltaX=-t}}else if(this.colEnd===this.bodyRightCol){let e=this.table.scenegraph.getColGroup(this.colEnd);if(e){let t=e.attribute.x+e.attribute.width-(this.table.getAllColsWidth()-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth());this.deltaX=-t}}else if((0,b.Z)(t)&&(0,b.Z)(i)){let r=this.table.scenegraph.getColGroup(i)||this.table.scenegraph.getColGroup(i,!0),n=e-this.deltaX,l=t-n,o=r.attribute.x-n+this.table.getFrozenColsWidth();this.deltaX=l-o}}release(){this.isRelease=!0}}var iS=i(49360);function iA(e){e.customSelectedRangeComponents.forEach((t,i)=>{ik(t,i,e)}),e.selectingRangeComponents.forEach((t,i)=>{ik(t,i,e)}),e.selectedRangeComponents.forEach((t,i)=>{ik(t,i,e)})}function ik(e,t,i){var r,n,l,o,a,s,h,d,u,c;let p=i.table,[g,f,m,b]=t.split("-"),y=parseInt(g,10),v=parseInt(f,10),_=parseInt(m,10),C=parseInt(b,10),x,w=y,S=v,A=_,k=C;switch(e.role){case"rowHeader":(x=p.getBodyVisibleRowRange())&&(S=Math.max(v,x.rowStart-1),k=Math.min(C,x.rowEnd+1));break;case"columnHeader":case"bottomFrozen":(x=p.getBodyVisibleCellRange())&&(w=Math.max(y,x.colStart-1),A=Math.min(_,x.colEnd+1));break;case"cornerHeader":case"rightTopCorner":case"leftBottomCorner":case"rightBottomCorner":break;case"rightFrozen":(x=p.getBodyVisibleCellRange())&&(S=Math.max(v,x.rowStart-1),k=Math.min(C,x.rowEnd+1));break;default:(x=p.getBodyVisibleCellRange())&&(S=Math.max(v,x.rowStart-1),k=Math.min(C,x.rowEnd+1),w=Math.max(y,x.colStart-1),A=Math.min(_,x.colEnd+1))}let M=p.getColsWidth(w,A),T=p.getRowsHeight(S,k),R=i.highPerformanceGetCell(w,S).globalAABBBounds;if(e.rect.setAttributes({x:R.x1-i.tableGroup.attribute.x,y:R.y1-i.tableGroup.attribute.y,width:M,height:T,visible:!0}),p.hasListeners(B.B.AFTER_UPDATE_SELECT_BORDER_HEIGHT)&&p.fireListeners(B.B.AFTER_UPDATE_SELECT_BORDER_HEIGHT,{startRow:S,endRow:k,currentHeight:T,selectComp:e}),e.fillhandle){let t=null==(r=i.table.options.excelOptions)?void 0:r.fillHandle,l,o,a=!0;"function"==typeof t&&(a=t({selectRanges:i.table.stateManager.select.ranges,table:i.table})),o=_<p.colCount-1?i.highPerformanceGetCell(_,C).globalAABBBounds.x2-i.tableGroup.attribute.x-3:0===y?i.highPerformanceGetCell(0,C).globalAABBBounds.x1-i.tableGroup.attribute.x:i.highPerformanceGetCell(y-1,C).globalAABBBounds.x2-i.tableGroup.attribute.x-3;let s=(C<p.rowCount-1?i.highPerformanceGetCell(_,C).globalAABBBounds:i.highPerformanceGetCell(_,v-1).globalAABBBounds).y2-i.tableGroup.attribute.y-3;null==(n=e.fillhandle)||n.setAttributes({x:o,y:s,width:6,height:6,visible:a})}let E=!!p.frozenColCount&&y===p.frozenColCount;!E&&p.frozenColCount&&p.scrollLeft>0&&y>=p.frozenColCount&&p.getColsWidth(0,y-1)-p.scrollLeft<p.getFrozenColsWidth()&&(E=!0);let P=!!p.rightFrozenColCount&&p.rightFrozenColCount>0&&_===p.colCount-p.rightFrozenColCount-1;!P&&p.rightFrozenColCount&&_<p.colCount-p.rightFrozenColCount&&p.getColsWidth(0,_)-p.scrollLeft>p.tableNoFrameWidth-p.getRightFrozenColsWidth()&&(P=!0);let I=!p.frozenRowCount||v===p.frozenRowCount;!I&&p.frozenRowCount&&p.scrollTop>0&&v>=p.frozenRowCount&&p.getRowsHeight(0,v-1)-p.scrollTop<p.getFrozenRowsHeight()&&(I=!0);let L=!!p.bottomFrozenRowCount&&C===p.rowCount-p.bottomFrozenRowCount-1;!L&&p.bottomFrozenRowCount&&C<p.rowCount-p.bottomFrozenRowCount&&p.getRowsHeight(0,C)-p.scrollTop>p.tableNoFrameHeight-p.getBottomFrozenRowsHeight()&&(L=!0);let{dynamicUpdateSelectionSize:F}=p.theme.selectionStyle;if(E&&(e.rect.attribute.stroke[3]||F)||P&&(e.rect.attribute.stroke[1]||F)||I&&(e.rect.attribute.stroke[0]||F)||L&&(e.rect.attribute.stroke[2]||F)){if(E&&e.rect.attribute.stroke[3]&&i.tableGroup.insertAfter(e.rect,"columnHeader"===e.role?i.cornerHeaderGroup:"bottomFrozen"===e.role?i.leftBottomCornerGroup:i.rowHeaderGroup),L&&e.rect.attribute.stroke[2]&&i.tableGroup.insertAfter(e.rect,"rowHeader"===e.role?i.leftBottomCornerGroup:"rightFrozen"===e.role?i.rightBottomCornerGroup:i.bottomFrozenGroup),I&&e.rect.attribute.stroke[0]&&i.tableGroup.insertAfter(e.rect,"rowHeader"===e.role?i.cornerHeaderGroup:"rightFrozen"===e.role?i.rightTopCornerGroup:i.colHeaderGroup),P&&e.rect.attribute.stroke[1]&&i.tableGroup.insertAfter(e.rect,"columnHeader"===e.role?i.rightTopCornerGroup:"bottomFrozen"===e.role?i.rightBottomCornerGroup:i.rightFrozenGroup),e.rect.attribute.x<p.getFrozenColsWidth()&&p.scrollLeft>0&&("body"===e.role||"columnHeader"===e.role||"bottomFrozen"===e.role)){let t=e.rect.attribute.width-(p.getFrozenColsWidth()-e.rect.attribute.x);e.rect.setAttributes({x:e.rect.attribute.x+(p.getFrozenColsWidth()-e.rect.attribute.x),width:t>0?t:0}),null==(l=e.fillhandle)||l.setAttributes({visible:t>0})}if(p.getRightFrozenColsWidth()>0&&i.rightFrozenGroup.attribute.height>0&&e.rect.attribute.x+e.rect.attribute.width>i.rightFrozenGroup.attribute.x&&("body"===e.role||"columnHeader"===e.role||"bottomFrozen"===e.role)){let t=i.rightFrozenGroup.attribute.x-e.rect.attribute.x;e.rect.setAttributes({x:e.rect.attribute.x,width:t>0?t:0}),null==(o=e.fillhandle)||o.setAttributes({visible:t-M>0})}if(e.rect.attribute.y<i.colHeaderGroup.attribute.height&&p.scrollTop>0&&("body"===e.role||"rowHeader"===e.role||"rightFrozen"===e.role)){let t=e.rect.attribute.height-(i.colHeaderGroup.attribute.height-e.rect.attribute.y);e.rect.setAttributes({y:e.rect.attribute.y+(i.colHeaderGroup.attribute.height-e.rect.attribute.y),height:t>0?t:0}),null==(a=e.fillhandle)||a.setAttributes({visible:t>0})}if(i.bottomFrozenGroup.attribute.width>0&&i.bottomFrozenGroup.attribute.height>0&&e.rect.attribute.y+e.rect.attribute.height>i.bottomFrozenGroup.attribute.y&&("body"===e.role||"rowHeader"===e.role||"rightFrozen"===e.role)){let t=i.bottomFrozenGroup.attribute.y-e.rect.attribute.y;e.rect.setAttributes({y:e.rect.attribute.y,height:t>0?t:0}),null==(s=e.fillhandle)||s.setAttributes({visible:t-T>0})}}else i.tableGroup.insertAfter(e.rect,"body"===e.role?i.bodyGroup:"columnHeader"===e.role?i.colHeaderGroup:"rowHeader"===e.role?i.rowHeaderGroup:"cornerHeader"===e.role?i.cornerHeaderGroup:"rightTopCorner"===e.role?i.rightTopCornerGroup:"rightFrozen"===e.role?i.rightFrozenGroup:"leftBottomCorner"===e.role?i.leftBottomCornerGroup:"bottomFrozen"===e.role?i.bottomFrozenGroup:i.rightBottomCornerGroup);let H=0;"number"==typeof e.rect.attribute.lineWidth&&(H=Math.ceil(e.rect.attribute.lineWidth/2)),_===p.colCount-1&&(Array.isArray(e.rect.attribute.lineWidth)&&(H=Math.ceil((null!=(h=e.rect.attribute.lineWidth[1])?h:0)/2)),e.rect.setAttributes({width:e.rect.attribute.width-H})),0===y&&(Array.isArray(e.rect.attribute.lineWidth)&&(H=Math.ceil((null!=(d=e.rect.attribute.lineWidth[3])?d:0)/2)),e.rect.setAttributes({x:e.rect.attribute.x+H,width:e.rect.attribute.width-H})),C===p.rowCount-1&&(Array.isArray(e.rect.attribute.lineWidth)&&(H=Math.ceil((null!=(u=e.rect.attribute.lineWidth[2])?u:0)/2)),e.rect.setAttributes({height:e.rect.attribute.height-H})),0===v&&(Array.isArray(e.rect.attribute.lineWidth)&&(H=Math.ceil((null!=(c=e.rect.attribute.lineWidth[0])?c:0)/2)),e.rect.setAttributes({y:e.rect.attribute.y+H,height:e.rect.attribute.height-H}))}function iM(e,t,i=!0){let r=e.table,n=t.start.col,l=t.start.row,o=t.end.col,a=t.end.row,s=t.skipBodyMerge,h=Math.max(Math.min(o,n),0),d=Math.max(Math.min(a,l),0),u=Math.min(Math.max(o,n),r.colCount-1),c=Math.min(Math.max(a,l),r.rowCount-1),p=()=>{let e=!1;for(let t=h;t<=u;t++){if(t===h)for(let i=d;i<=c;i++){if(!r.isHeader(t,i)&&s)continue;let n=(0,e_.Z)(r,t,i);if(n&&n.start.col<h){h=n.start.col,e=!0;break}}if(!e&&t===u)for(let i=d;i<=c;i++){if(!r.isHeader(t,i)&&s)continue;let n=(0,e_.Z)(r,t,i);if(n&&Math.min(n.end.col,r.colCount-1)>u){u=n.end.col,e=!0;break}}if(e)break}if(!e)for(let t=d;t<=c;t++){if(t===d)for(let i=h;i<=u;i++){if(!r.isHeader(i,t)&&s)continue;let n=(0,e_.Z)(r,i,t);if(n&&n.start.row<d){d=n.start.row,e=!0;break}}if(!e&&t===c)for(let i=h;i<=u;i++){if(!r.isHeader(i,t)&&s)continue;let n=(0,e_.Z)(r,i,t);if(n&&Math.min(n.end.row,r.rowCount-1)>c){c=n.end.row,e=!0;break}}if(e)break}e&&p()};i&&(p(),t.start.col>t.end.col?(t.start.col=Math.max(h,u),t.end.col=Math.min(h,u)):(t.start.col=Math.min(h,u),t.end.col=Math.max(h,u)),t.start.row>t.end.row?(t.start.row=Math.max(d,c),t.end.row=Math.min(d,c)):(t.start.row=Math.min(d,c),t.end.row=Math.max(d,c))),e.selectingRangeComponents.forEach((e,t)=>{var i;e.rect.delete(),null==(i=e.fillhandle)||i.delete()}),e.selectingRangeComponents=new Map;let{needRowHeader:g,needRightRowHeader:f,needColumnHeader:m,needBottomColumnHeader:b,needBody:y,needCornerHeader:v,needRightTopCornerHeader:_,needLeftBottomCornerHeader:C,needRightBottomCornerHeader:x}=(0,iS.L)(h,d,u,c,r);if(v){let t=Math.min(u,r.frozenColCount-1),i=Math.min(c,r.frozenRowCount-1);e.createCellSelectBorder(h,d,t,i,"cornerHeader",`${h}${d}${u}${c}`,[!0,!m,!g,!0])}if(_){let t=Math.max(h,r.colCount-r.rightFrozenColCount),i=Math.min(c,r.frozenRowCount-1);e.createCellSelectBorder(t,d,u,i,"rightTopCorner",`${h}${d}${u}${c}`,[!0,!0,!f,!m])}if(C){let t=Math.min(u,r.frozenColCount-1),i=Math.max(d,r.rowCount-r.bottomFrozenRowCount);e.createCellSelectBorder(h,i,t,c,"leftBottomCorner",`${h}${d}${u}${c}`,[!g,!b,!0,!0])}if(x){let t=Math.max(h,r.colCount-r.rightFrozenColCount),i=Math.max(d,r.rowCount-r.bottomFrozenRowCount);e.createCellSelectBorder(t,i,u,c,"rightBottomCorner",`${h}${d}${u}${c}`,[!f,!0,!0,!b])}if(m){let t=Math.max(h,r.frozenColCount),i=Math.min(u,r.colCount-r.rightFrozenColCount-1),n=Math.min(c,r.frozenRowCount-1);e.createCellSelectBorder(t,d,i,n,"columnHeader",`${h}${d}${u}${c}`,[!0,!_,!y,!v])}if(b){let t=Math.max(h,r.frozenColCount),i=Math.min(u,r.colCount-r.rightFrozenColCount-1),n=Math.max(d,r.rowCount-r.bottomFrozenRowCount);e.createCellSelectBorder(t,n,i,c,"bottomFrozen",`${h}${d}${u}${c}`,[!y,!x,!0,!C])}if(g){let t=Math.max(d,r.frozenRowCount),i=Math.min(c,r.rowCount-r.bottomFrozenRowCount-1),n=Math.min(u,r.frozenColCount-1);e.createCellSelectBorder(h,t,n,i,"rowHeader",`${h}${d}${u}${c}`,[!v,!y,!C,!0])}if(f){let t=Math.max(d,r.frozenRowCount),i=Math.min(c,r.rowCount-r.bottomFrozenRowCount-1),n=Math.max(h,r.colCount-r.rightFrozenColCount);e.createCellSelectBorder(n,t,u,i,"rightFrozen",`${h}${d}${u}${c}`,[!_,!0,!x,!y])}if(y){let t=Math.max(h,r.frozenColCount),i=Math.max(d,r.frozenRowCount),n=Math.min(u,r.colCount-r.rightFrozenColCount-1),l=Math.min(c,r.rowCount-r.bottomFrozenRowCount-1);e.createCellSelectBorder(t,i,n,l,"body",`${h}${d}${u}${c}`,[!m,!f,!b,!g])}}function iT(e){e.selectingRangeComponents.forEach((e,t)=>{e.rect.setAttribute("opacity",0)}),e.selectedRangeComponents.forEach((e,t)=>{e.rect.setAttribute("opacity",0)})}function iR(e){e.selectingRangeComponents.forEach((e,t)=>{e.rect.setAttribute("opacity",1)}),e.selectedRangeComponents.forEach((e,t)=>{e.rect.setAttribute("opacity",1)})}function iE(e,t,i,r,n,l,o){if(!t)return;let a=Array.isArray(t)?t:[t,t,t,t],s=o.colCount-1,h=o.rowCount-1,d=[0,0,0,0],u=!1;return 0===i&&0===r?(d[0]=a[0],u=!0):n===s&&l===h?(d[2]=a[2],u=!0):0===i&&l===h?(d[3]=a[3],u=!0):n===s&&0===r&&(d[1]=a[1],u=!0),u?d:void 0}function iP(e){e.selectingRangeComponents.forEach((t,i)=>{var r;e.selectedRangeComponents.get(i)&&(e.selectingRangeComponents.get(i).rect.delete(),null==(r=e.selectingRangeComponents.get(i).fillhandle)||r.delete()),e.selectedRangeComponents.set(i,t)}),e.selectingRangeComponents=new Map,e.updateNextFrame()}function iB(e){e.selectedRangeComponents.forEach((e,t)=>{var i;e.rect.delete(),null==(i=e.fillhandle)||i.delete()}),e.selectedRangeComponents=new Map}function iI(e){e.selectingRangeComponents.forEach((e,t)=>{var i;e.rect.delete(),null==(i=e.fillhandle)||i.delete()}),e.selectingRangeComponents=new Map}function iL(e,t){for(let i=0;i<t.table.colCount;i++){let r=new eG.Z({x:0,y:0,width:t.table.getColWidth(i),height:t.table.getRowHeight(e)});if(r.role="cell",r.col=i,r.row=e,r.needUpdate=!0,!r)continue;let n=t.getColGroup(i);if(n)if(n.firstChild&&e<n.firstChild.row)n.insertBefore(r,n.firstChild),n.firstChild.row=n.firstChild.row+1;else if(n.lastChild&&e>n.lastChild.row)n.appendChild(r);else{let l=t.highPerformanceGetCell(i,e,!0);l!==r&&(n.insertBefore(r,l),l&&(l.row=l.row+1),l!==n.lastChild&&n.lastChild&&(n.lastChild.row=n.lastChild.row+1))}}}function iF(e,t){for(let i=0;i<t.table.colCount;i++){let r,n=t.getColGroup(i,!1);n&&(n.forEachChildren(t=>t.row===e&&(r=t,!0)),r&&(n.updateColumnHeight(-r.attribute.height),n.removeChild(r)))}}function iH(e,t,i){let r;for(let n=0;n<i.table.colCount;n++){let l,o=i.table.getCellRange(n,e);o.start.row<=e+1&&o.end.row>=e+1&&(iD(o,i),l=o.start.row);let a=i.table.getCellRange(n,t);a.start.row<=t+1&&a.end.row>=t+1&&(iD(a,i),l=a.start.row),(0,b.Z)(l)&&(r=(0,b.Z)(r)?Math.min(r,l):l)}return r}function iO(e,t,i){let r;for(let n=0;n<i.table.colCount;n++){let l,o=i.highPerformanceGetCell(n,e);o.mergeStartRow&&o.mergeEndRow&&o.mergeEndRow>e&&(iD({start:{row:o.mergeStartRow,col:i.table.isAutoRowHeight(t)?0:o.mergeStartCol},end:{row:o.mergeEndRow,col:i.table.isAutoRowHeight(t)?i.table.colCount-1:o.mergeEndCol}},i),l=o.mergeStartRow);let a=i.highPerformanceGetCell(n,t);a.mergeStartRow&&a.mergeEndRow&&a.mergeStartRow<t&&(iD({start:{row:a.mergeStartRow,col:i.table.isAutoRowHeight(t)?0:a.mergeStartCol},end:{row:a.mergeEndRow,col:i.table.isAutoRowHeight(t)?i.table.colCount-1:a.mergeEndCol}},i),l=a.mergeStartRow),(0,b.Z)(l)&&(r=(0,b.Z)(r)?Math.min(r,l):l)}return r}function iD(e,t){let{start:i,end:r}=e;for(let e=i.col;e<=r.col;e++)for(let n=i.row;n<=r.row;n++){let i=t.highPerformanceGetCell(e,n,!0);i&&(i.needUpdate=!0)}}var iz=i(70559);function iW(e){if(!e.table.reactCustomLayout)return;let{table:t,stage:i}=e,r=i.pluginService.findPluginsByName("ReactAttributePlugin")[0],{htmlMap:n,renderId:l}=r;for(let o in n){let a,s=n[o],{graphic:h,wrapContainer:d,renderId:u}=s;if(u===l){if(e.frozenColCount>t.frozenColCount){let i=(0,iz.J$)(h);if(!i)continue;let{col:r,row:n}=i;n>=t.rowCount-t.bottomFrozenRowCount&&r<e.frozenColCount&&r>=t.frozenColCount&&h.attribute.react.container===t.frozenBottomDomContainer?a=t.bottomDomContainer:n>=t.frozenRowCount&&r<e.frozenColCount&&r>=t.frozenColCount&&h.attribute.react.container===t.frozenBodyDomContainer?a=t.bodyDomContainer:n<t.frozenRowCount&&r<e.frozenColCount&&r>=t.frozenColCount&&h.attribute.react.container===t.frozenHeaderDomContainer&&(a=t.headerDomContainer)}else if(e.frozenColCount<t.frozenColCount){let i=(0,iz.J$)(h);if(!i)continue;let{col:r,row:n}=i;n>=t.rowCount-t.bottomFrozenRowCount&&r<t.frozenColCount&&r>=e.frozenColCount&&h.attribute.react.container===t.bottomDomContainer?a=t.frozenBottomDomContainer:n>=t.frozenRowCount&&r<t.frozenColCount&&r>=e.frozenColCount&&h.attribute.react.container===t.bodyDomContainer?a=t.frozenBodyDomContainer:n<t.frozenRowCount&&r<t.frozenColCount&&r>=e.frozenColCount&&h.attribute.react.container===t.headerDomContainer&&(a=t.frozenHeaderDomContainer)}a&&(a.appendChild(d),s.nativeContainer=a,s.container=a,h.attribute.react.container=a,r.updateStyleOfWrapContainer(h,i,d,a,h.attribute.react))}}}function iZ(e){let t=e.bodyGroup.firstChild instanceof eG.Z?e.bodyGroup.firstChild:null;t&&(e.rowHeaderGroup.appendChild(t),e.rowHeaderGroup.setAttribute("width",e.rowHeaderGroup.attribute.width+t.attribute.width),e.bodyGroup.setAttribute("width",e.bodyGroup.attribute.width-t.attribute.width))}function iN(e){let t=e.colHeaderGroup.firstChild instanceof eG.Z?e.colHeaderGroup.firstChild:null;t&&(e.cornerHeaderGroup.appendChild(t),e.cornerHeaderGroup.setAttribute("width",e.cornerHeaderGroup.attribute.width+t.attribute.width),e.colHeaderGroup.setAttribute("width",e.colHeaderGroup.attribute.width-t.attribute.width))}function i$(e){var t;let i=e.rowHeaderGroup.lastChild instanceof eG.Z?e.rowHeaderGroup.lastChild:null==(t=e.rowHeaderGroup.lastChild)?void 0:t._prev;i&&(iU(e.bodyGroup,i,e.bodyGroup.firstChild),e.bodyGroup.setAttribute("width",e.bodyGroup.attribute.width+i.attribute.width),e.rowHeaderGroup.setAttribute("width",e.rowHeaderGroup.attribute.width-i.attribute.width))}function ij(e){var t;let i=e.cornerHeaderGroup.lastChild instanceof eG.Z?e.cornerHeaderGroup.lastChild:null==(t=e.cornerHeaderGroup.lastChild)?void 0:t._prev;i&&(iU(e.colHeaderGroup,i,e.colHeaderGroup.firstChild),e.colHeaderGroup.setAttribute("width",e.colHeaderGroup.attribute.width+i.attribute.width),e.cornerHeaderGroup.setAttribute("width",e.cornerHeaderGroup.attribute.width-i.attribute.width))}function iG(e){let t=e.bottomFrozenGroup.firstChild instanceof eG.Z?e.bottomFrozenGroup.firstChild:null;t&&(e.leftBottomCornerGroup.appendChild(t),e.leftBottomCornerGroup.setAttribute("width",e.leftBottomCornerGroup.attribute.width+t.attribute.width),e.bottomFrozenGroup.setAttribute("width",e.bottomFrozenGroup.attribute.width-t.attribute.width),e.table.isPivotChart()&&t.forEachChildren(e=>{e.setAttributes({stroke:!1,fill:!1})}))}function iV(e){var t;let i=e.leftBottomCornerGroup.lastChild instanceof eG.Z?e.leftBottomCornerGroup.lastChild:null==(t=e.leftBottomCornerGroup.lastChild)?void 0:t._prev;i&&(iU(e.bottomFrozenGroup,i,e.bottomFrozenGroup.firstChild),e.bottomFrozenGroup.setAttribute("width",e.bottomFrozenGroup.attribute.width+i.attribute.width),e.leftBottomCornerGroup.setAttribute("width",e.leftBottomCornerGroup.attribute.width-i.attribute.width),e.table.isPivotChart()&&i.forEachChildren(t=>{var i,r,n,l;let o=e.table._getCellStyle(t.col,t.row),a=e.table.getCellRange(t.col,t.row),s=(0,ex.RT)(o,e.table,a?a.start.col:t.col,a?a.start.row:t.row,ek.WJ).theme;t.setAttributes({fill:null!=(r=null==(i=null==s?void 0:s.group)?void 0:i.fill)?r:void 0,stroke:null!=(l=null==(n=null==s?void 0:s.group)?void 0:n.stroke)?l:void 0})}))}function iU(e,t,i){t&&e&&(i?e.insertBefore(t,i):e.appendChild(t))}function iK(e){return e instanceof eG.Z&&"table-border-rect"!==(null==e?void 0:e.name)}var iX=i(57426);function iY(e,t,i){return new eG.Z({x:0,y:0,width:e,height:t,clip:null!=i&&i,pickable:!1})}function iq(e,t){return e.forEachChildrenSkipChild((e,i)=>{e.setAttribute("x",t),t+=e.attribute.width}),t}function iJ(e,t){return e.forEachChildrenSkipChild((e,i)=>{e.setAttribute("y",t),t+=e.attribute.height}),t}var iQ=i(84306);function i0(e,t,i,r,n){let l=e.name;i2(i,r,e=>e.name===l,e=>{(0,eE.Bg)(t,e),e.name=t.name},n),n.updateNextFrame()}function i1(e,t,i){e&&"empty"!==e.role&&e.forEachChildren(e=>{"group"===e.type?i1(e,t,i):t(e)&&i(e)})}function i2(e,t,i,r,n){let l=n.getCell(e,t);if("cell"===l.role&&(0,b.Z)(l.mergeStartCol)&&(0,b.Z)(l.mergeStartRow)&&(0,b.Z)(l.mergeEndCol)&&(0,b.Z)(l.mergeEndRow)){let{colStart:e,colEnd:t,rowStart:o,rowEnd:a}=(0,eB.e)(l,n);for(let l=e;l<=t;l++)for(let e=o;e<=a;e++)i1(n.highPerformanceGetCell(l,e),i,r)}else i1(l,i,r)}function i3(e,t){let{bgColor:i,borderColor:r,borderLineWidth:n,borderLineDash:l}=t,o={x:0,y:0,width:0,height:0,visible:!1,pickable:!0,fill:i};return o.stroke=e6(r,void 0),o.lineWidth=n,l&&(o.lineDash=l),o.lineCap="butt",Array.isArray(r)&&(o.strokeArrayColor=(0,eR.u)(r)),Array.isArray(n)&&(o.strokeArrayWidth=(0,eR.u)(n),o.lineWidth=1),e.setAttributes(o),e.role="corner-frozen",e}function i4(e){let t=[];for(let i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}function i5(e){let t=e.bodyColStart;function i(i){i.col=t;let r=(0,e_.Z)(e.table,i.col,i.row);r&&(i.mergeStartCol=r.start.col,i.mergeStartCol=r.start.col,i.mergeEndCol=r.end.col,i.mergeEndCol=r.end.col),i.role}e.bodyGroup.forEachChildren(e=>{e.col=t,null==e||e.forEachChildren(e=>{i(e)}),t++}),t=e.bodyColStart,e.colHeaderGroup.forEachChildren(e=>{e.col=t,null==e||e.forEachChildren(e=>{i(e)}),t++}),t=e.bodyColStart,e.bottomFrozenGroup.forEachChildren(e=>{e.col=t,null==e||e.forEachChildren(e=>{i(e)}),t++})}function i6(e,t){if(t.colHeaderGroup&&t.table.columnHeaderLevelCount>0){let r=new eG.Z({x:0,y:0,width:t.table.getColWidth(e),height:0,clip:!1,pickable:!1});r.role="column",r.col=e;let n=t.getColGroup(e,!0);n?t.colHeaderGroup.insertBefore(r,n):t.colHeaderGroup.appendChild(r),i(r,e,0,t.table.columnHeaderLevelCount-1)}if(t.bodyGroup){let r=new eG.Z({x:0,y:0,width:t.table.getColWidth(e),height:0,clip:!1,pickable:!1});r.role="column",r.col=e;let n=t.getColGroup(e,!1);n?t.bodyGroup.insertBefore(r,n):t.bodyGroup.appendChild(r),i(r,e,t.bodyRowStart,t.bodyRowEnd)}if(t.bottomFrozenGroup&&t.table.bottomFrozenRowCount>0){let r=new eG.Z({x:0,y:0,width:t.table.getColWidth(e),height:0,clip:!1,pickable:!1});r.role="column",r.col=e;let n=t.getColGroupInBottom(e);n?t.bottomFrozenGroup.insertBefore(r,n):t.bottomFrozenGroup.appendChild(r),i(r,e,t.table.rowCount-t.table.bottomFrozenRowCount,t.table.rowCount-1)}function i(e,i,r,n){for(let l=r;l<=n;l++){let r=new eG.Z({x:0,y:0,width:t.table.getColWidth(i),height:t.table.getRowHeight(l)});r.role="cell",r.col=i,r.row=l,r.needUpdate=!0,e.appendChild(r)}}}eb||(eb=!0,(0,et.VJ)(),(0,ei.kP)()?(0,el.Ns)(er.n):(0,ei.KV)()&&(0,eo.sn)(er.n),(0,ea.x)(),(0,es.f)(),(0,eh.M)(),(0,ed.i)(),(0,eu.N)(),(0,ec.k)(),(0,ep.v)(),(0,eg.W)(),(0,ef.k)(),(0,em.g)(),(0,en.E)(),(0,ee.C)(),(0,en.E)()),er.n.load(tq),er.n.load(tK.ZP);class i8{constructor(e){let t,i;this._needUpdateContainer=!1,this.table=e,this.hasFrozen=!1,this.clear=!0,this.mergeMap=new Map,(0,iQ.C)(this.table.theme.textPopTipStyle),"node"===M.X.mode?(et.rF.setEnv("node",e.options.modeParams),t=e.canvasWidth,i=e.canvasHeight):e.options.canvas&&e.options.viewBox?(et.rF.setEnv("browser"),t=e.options.viewBox.x2-e.options.viewBox.x1,i=e.options.viewBox.y2-e.options.viewBox.y1):(et.rF.setEnv("browser"),t=e.canvas.width,i=e.canvas.height),this.stage=(0,ey.H)(Object.assign({canvas:e.canvas,width:t,height:i,disableDirtyBounds:!1,background:e.theme.underlayBackgroundColor,dpr:e.internalProps.pixelRatio,enableLayout:!0,beforeRender:e=>{this.table.options.beforeRender&&this.table.options.beforeRender(e),this.table.animationManager.ticker.start()},afterRender:e=>{this.table.options.afterRender&&this.table.options.afterRender(e),this.table.fireListeners("after_render",null)},canvasControled:!e.options.canvas,viewBox:e.options.viewBox},e.options.renderOption)),this.stage.defaultLayer.setTheme({group:{boundsPadding:0,strokeBoundsBuffer:0,lineJoin:"round"},text:{ignoreBuf:!0}}),this.initSceneGraph(),this.stage.defaultLayer.add(this.tableGroup),this.stage.table=this.table,this.createComponent()}get width(){var e,t;return null!=(t=null==(e=this.tableGroup.attribute)?void 0:e.width)?t:0}get height(){var e,t;return null!=(t=null==(e=this.tableGroup.attribute)?void 0:e.height)?t:0}get x(){var e,t;return null!=(t=null==(e=this.tableGroup.attribute)?void 0:e.x)?t:0}get y(){var e,t;return null!=(t=null==(e=this.tableGroup.attribute)?void 0:e.y)?t:0}get bodyRowStart(){var e;return null!=(e=this.proxy.rowStart)?e:0}get bodyRowEnd(){var e;return null!=(e=this.proxy.rowEnd)?e:this.table.rowCount-1}get bodyColStart(){var e;return null!=(e=this.proxy.colStart)?e:0}get bodyColEnd(){var e;return null!=(e=this.proxy.colEnd)?e:this.table.colCount-1}initSceneGraph(){this.isPivot=this.table.isPivotTable(),function(e){let t=e.table.tableNoFrameWidth,i=e.table.tableNoFrameHeight;e.tableGroup=new eG.Z({x:0,y:0,width:t,height:i,clip:!0,pickable:!1}),e.tableGroup.role="table";let r=iY(0,0,!e.table.internalProps.enableTreeStickCell);r.role="col-header",e.colHeaderGroup=r;let n=iY(0,0,!e.table.options.enableTreeStickCell);n.role="corner-header",e.cornerHeaderGroup=n;let l=iY(0,0,!0);l.role="row-header",e.rowHeaderGroup=l;let o=iY(t,0,!0);o.role="body",e.bodyGroup=o;let a=iY(0,0,!0);a.role="right-frozen",e.rightFrozenGroup=a;let s=iY(0,0,!0);s.role="bottom-frozen",e.bottomFrozenGroup=s;let h=iY(0,0);h.role="component",e.componentGroup=h;let d=iY(0,0,!0);d.role="corner-right-top-header",e.rightTopCornerGroup=d;let u=iY(0,0,!0);u.role="corner-right-bottom-header",e.rightBottomCornerGroup=u;let c=iY(0,0,!0);c.role="corner-left-bottom-header",e.leftBottomCornerGroup=c,e.tableGroup.addChild(o),e.tableGroup.addChild(l),e.tableGroup.addChild(s),e.tableGroup.addChild(r),e.tableGroup.addChild(a),e.tableGroup.addChild(u),e.tableGroup.addChild(d),e.tableGroup.addChild(c),e.tableGroup.addChild(n),e.tableGroup.addChild(h)}(this)}canvasShowMenu(){this.stage.addEventListener("rightdown",e=>{let t=(0,iz.RJ)(e);t.eventArgs||(this.table.stateManager.triggerContextMenu(-1,-1,t.abstractPos.x,t.abstractPos.y),this.table.fireListeners(B.B.CONTEXTMENU_CANVAS,{event:e,x:t.abstractPos.x,y:t.abstractPos.y,col:-1,row:-1,target:void 0}))})}clearCells(){var e,t;this.table.animationManager.clear(),(this.table.isPivotChart()||this.table._hasCustomRenderOrLayout())&&this.stage.pluginService.findPluginsByName("poptipForText").forEach(e=>{e.deactivate(this.stage.pluginService)}),this.clear=!0,this.hasFrozen=!1,this.mergeMap.clear(),this.colHeaderGroup.clear(),delete this.colHeaderGroup.border,this.rowHeaderGroup.clear(),delete this.rowHeaderGroup.border,this.cornerHeaderGroup.clear(),delete this.cornerHeaderGroup.border,this.bodyGroup.clear(),delete this.bodyGroup.border,this.bottomFrozenGroup.clear(),delete this.bottomFrozenGroup.border,this.rightFrozenGroup.clear(),delete this.rightFrozenGroup.border,this.rightTopCornerGroup.clear(),delete this.rightTopCornerGroup.border,this.rightBottomCornerGroup.clear(),delete this.rightBottomCornerGroup.border,this.leftBottomCornerGroup.clear(),delete this.leftBottomCornerGroup.border,this.colHeaderGroup.setAttributes({x:0,y:0,width:0,height:0}),this.rowHeaderGroup.setAttributes({x:0,y:0,width:0,height:0}),this.cornerHeaderGroup.setAttributes({x:0,y:0,width:0,height:0}),this.bodyGroup.setAttributes({x:0,y:0,width:0,height:0}),this.rightFrozenGroup.setAttributes({x:0,y:0,width:0,height:0}),this.bottomFrozenGroup.setAttributes({x:0,y:0,width:0,height:0}),this.rightTopCornerGroup.setAttributes({x:0,y:0,width:0,height:0,visible:!1}),this.leftBottomCornerGroup.setAttributes({x:0,y:0,width:0,height:0,visible:!1}),this.rightBottomCornerGroup.setAttributes({x:0,y:0,width:0,height:0,visible:!1}),this.tableGroup.setAttributes({x:this.table.tableX,y:this.table.tableY,width:0,height:0}),this.tableGroup.border&&(this.tableGroup.parent.removeChild(this.tableGroup.border),delete this.tableGroup.border),null==(e=this.proxy)||e.release(),null==(t=this.table.reactCustomLayout)||t.clearCache()}updateStageBackground(){this.stage.background=this.table.theme.underlayBackgroundColor,this.stage.renderNextFrame()}createComponent(){this.component=new e2(this.table),this.component.addToGroup(this.componentGroup),this.selectedRangeComponents=new Map,this.selectingRangeComponents=new Map,this.customSelectedRangeComponents=new Map}updateComponent(){this.component.updateStyle()}createSceneGraph(e=!1){e||(this.table.rowHeightsMap.clear(),this.table.internalProps.layoutMap.clearCellRangeMap()),(this.table.isPivotChart()||this.table._hasCustomRenderOrLayout())&&this.stage.pluginService.autoEnablePlugins.getContributions().forEach(e=>{"poptipForText"===e.name&&this.stage.pluginService.register(e)}),this.clear=!1,this.frozenColCount=this.table.frozenColCount,this.frozenRowCount=this.table.frozenRowCount,this.proxy=new iw(this.table),e4(this.tableGroup,this.table.theme.frameStyle,this.tableGroup.role,void 0,!0),this.table.isPivotChart()&&(i3(this.rightTopCornerGroup,this.table.theme.cornerRightTopCellStyle||this.table.theme.cornerHeaderStyle||{}),i3(this.leftBottomCornerGroup,this.table.theme.cornerLeftBottomCellStyle||this.table.theme.cornerHeaderStyle||{}),i3(this.rightBottomCornerGroup,this.table.theme.cornerRightBottomCellStyle||this.table.theme.cornerHeaderStyle||{})),this.proxy.createGroupForFirstScreen(this.cornerHeaderGroup,this.colHeaderGroup,this.rowHeaderGroup,this.rightFrozenGroup,this.bottomFrozenGroup,this.bodyGroup,0,0),this.afterScenegraphCreated()}renderSceneGraph(){this.stage.render()}getCell(e,t,i){var r,n,l,o,a,s;let h;if((h=this.table.rightFrozenColCount>0&&e>=this.table.colCount-this.table.rightFrozenColCount&&t<this.table.frozenRowCount?null==(r=this.rightTopCornerGroup.getColGroup(e))?void 0:r.getRowGroup(t):this.table.bottomFrozenRowCount>0&&t>=this.table.rowCount-this.table.bottomFrozenRowCount&&e<this.table.frozenColCount?null==(n=this.leftBottomCornerGroup.getColGroup(e))?void 0:n.getRowGroup(t):this.table.rightFrozenColCount>0&&this.table.bottomFrozenRowCount>0&&e>=this.table.colCount-this.table.rightFrozenColCount&&t>=this.table.rowCount-this.table.bottomFrozenRowCount?null==(l=this.rightBottomCornerGroup.getColGroup(e))?void 0:l.getRowGroup(t):this.table.rightFrozenColCount>0&&e>this.table.colCount-1-this.table.rightFrozenColCount?null==(o=this.rightFrozenGroup.getColGroup(e))?void 0:o.getRowGroup(t):this.table.bottomFrozenRowCount>0&&t>this.table.rowCount-1-this.table.bottomFrozenRowCount?null==(a=this.bottomFrozenGroup.getColGroup(e))?void 0:a.getRowGroup(t):null==(s=this.getColGroup(e,t<this.frozenRowCount))?void 0:s.getRowGroup(t))&&"shadow-cell"===h.role&&!i){let i=this.table.getCellRange(e,t);i.start.col===e&&i.start.row===t||(h=this.getCell(i.start.col,i.start.row))}return h||tQ}highPerformanceGetCell(e,t,i){return this.proxy.highPerformanceGetCell(e,t,i)}getColGroup(e,t=!1){return(e<this.frozenColCount&&t?this.cornerHeaderGroup.getColGroup(e):e<this.frozenColCount?this.rowHeaderGroup.getColGroup(e):t&&this.table.rightFrozenColCount>0&&e>this.table.colCount-1-this.table.rightFrozenColCount?this.rightTopCornerGroup.getColGroup(e):!t&&this.table.rightFrozenColCount>0&&e>this.table.colCount-1-this.table.rightFrozenColCount?this.rightFrozenGroup.getColGroup(e):t?this.colHeaderGroup.getColGroup(e):this.bodyGroup.getColGroup(e))||void 0}getColGroupInBottom(e,t=!1){var i;if(t){let t=null!=(i=this.getColGroupInLeftBottomCorner(e))?i:this.getColGroupInRightBottomCorner(e);if(t)return t}if(this.table.bottomFrozenRowCount>0)return this.bottomFrozenGroup.getColGroup(e)}getColGroupInLeftBottomCorner(e){if(this.table.bottomFrozenRowCount>0)return this.leftBottomCornerGroup.getColGroup(e)}getColGroupInRightTopCorner(e){if(this.table.rightFrozenColCount>0)return this.rightTopCornerGroup.getColGroup(e)}getColGroupInRightBottomCorner(e){if(this.table.rightFrozenColCount>0&&this.table.bottomFrozenRowCount>0)return this.rightBottomCornerGroup.getColGroup(e)}getCellSize(e,t){let i=this.getCell(e,t),r=(0,e_.Z)(this.table,e,t),n=i.attribute.width,l=i.attribute.height;return r&&(n/=r.end.col-r.start.col+1,l/=r.end.row-r.start.row+1),{width:n,height:l}}updateNextFrame(){this.updateContainerSync(),this.resetAllSelectComponent(),this.stage.renderNextFrame()}resetAllSelectComponent(){var e,t,i,r;((null==(t=null==(e=this.table.stateManager.select)?void 0:e.ranges)?void 0:t.length)>0||(null==(r=null==(i=this.table.stateManager.select)?void 0:i.customSelectRanges)?void 0:r.length)>0)&&iA(this)}hideHoverIcon(e,t){-1!==e&&-1!==t&&(i2(e,t,e=>"mouseenter_cell"===e.attribute.visibleTime,e=>{e.setAttribute("opacity",0);let t=e.parent.getChildByName("icon-back");t&&t.setAttribute("visible",!1)},this),this.updateNextFrame())}showHoverIcon(e,t){-1!==e&&-1!==t&&(i2(e,t,e=>"mouseenter_cell"===e.attribute.visibleTime,e=>{e.setAttribute("opacity",1)},this),this.updateNextFrame())}hideClickIcon(e,t){-1!==e&&-1!==t&&(i2(e,t,e=>"click_cell"===e.attribute.visibleTime,e=>{e.setAttribute("opacity",0)},this),this.updateNextFrame())}showClickIcon(e,t){-1!==e&&-1!==t&&(i2(e,t,e=>"click_cell"===e.attribute.visibleTime,e=>{e.setAttribute("opacity",1)},this),this.updateNextFrame())}getIcon(e,t,i,r){let n;return this.getCell(e,t).forEachChildren(e=>{e.role&&e.role.startsWith("icon")&&e.containsPoint(i,r,tc.LZ.GLOBAL)&&(n=e)}),n}setIconHoverStyle(e,t,i,r){!function(e,t,i,r,n){var l,o;if((e.attribute.backgroundColor||e.attribute.hoverImage)&&i2(t,i,t=>t.name===e.name,e=>{var t,i,r,n,l,o,a,s;if(e.attribute.backgroundColor){let h=e.parent.getChildByName("icon-back");h?h.setAttributes({x:(null!=(t=e.attribute.x)?t:0)+(e.AABBBounds.width()-e.backgroundWidth)/2,y:(null!=(i=e.attribute.y)?i:0)+(e.AABBBounds.height()-e.backgroundHeight)/2,dx:null!=(r=e.attribute.dx)?r:0,dy:null!=(n=e.attribute.dy)?n:0,width:e.backgroundWidth,height:e.backgroundHeight,fill:e.attribute.backgroundColor,cornerRadius:5,visible:!0}):(h=(0,eN.f)({x:(null!=(l=e.attribute.x)?l:0)+(e.AABBBounds.width()-e.backgroundWidth)/2,y:(null!=(o=e.attribute.y)?o:0)+(e.AABBBounds.height()-e.backgroundHeight)/2,dx:null!=(a=e.attribute.dx)?a:0,dy:null!=(s=e.attribute.dy)?s:0,width:e.backgroundWidth,height:e.backgroundHeight,fill:e.attribute.backgroundColor,cornerRadius:5,pickable:!1,visible:!0})).name="icon-back",e.parent.insertBefore(h,e)}e.attribute.hoverImage&&e.attribute.image!==e.attribute.hoverImage&&(e.image=e.attribute.hoverImage)},n),e.tooltip){let{x1:r,x2:a,y1:s,y2:h}=e.globalAABBBounds,d={content:e.tooltip.title,referencePosition:{rect:{left:r,right:a,top:s,bottom:h,width:e.globalAABBBounds.width(),height:e.globalAABBBounds.height()},placement:e.tooltip.placement},disappearDelay:e.tooltip.disappearDelay,style:Object.assign({},null==(l=n.table.internalProps.theme)?void 0:l.tooltipStyle,null==(o=e.tooltip)?void 0:o.style)};n.table.internalProps.tooltipHandler.isBinded(d)||n.table.showTooltip(t,i,d)}}(e,t,i,0,this)}updateSortIcon(e){let{col:t,row:i,iconMark:r,order:n,oldSortCol:l,oldSortRow:o,oldIconMark:a}=e;!function(e){let{col:t,row:i,iconMark:r,order:n,oldSortCol:l,oldSortRow:o,oldIconMark:a,scene:s}=e,h=s.table.internalProps.headerHelper.getSortIcon(n,s.table,t,i);if(r&&i0(r,h,t,i,s),!function(e,t,i,r,n){let l=n.getCellRange(e,t),o=n.getCellRange(i,r);return l.start.col===o.start.col&&l.start.row===o.start.row&&l.end.col===o.end.col&&l.end.row===o.end.row}(t,i,l,o,s.table)){let e=s.table.internalProps.headerHelper.getSortIcon("normal",s.table,l,o);a?i0(a,e,l,o,s):function(e,t,i,r){let n=r.getCell(e,t);if((0,b.Z)(n.mergeStartCol)&&(0,b.Z)(n.mergeStartRow)&&(0,b.Z)(n.mergeEndCol)&&(0,b.Z)(n.mergeEndRow))for(let e=n.mergeStartCol;e<=n.mergeEndCol;e++)for(let t=n.mergeStartRow;t<=n.mergeEndRow;t++){let n;r.getCell(e,t).forEachChildren(e=>"sort"===e.attribute.funcType&&(n=e,!0)),n&&((0,eE.Bg)(i,n),n.name=i.name)}else{let e;(0,H.yW)(n,"children",t=>"sort"===t.attribute.funcType&&(e=t,!0)),e&&((0,eE.Bg)(i,e),e.name=i.name)}}(l,o,e,s)}}({col:t,row:i,iconMark:r,order:n,oldSortCol:l,oldSortRow:o,oldIconMark:a,scene:this})}updateFrozenIcon(e,t){var i=this;for(let e=0;e<i.table.colCount;e++)for(let t=0;t<i.table.columnHeaderLevelCount;t++)i2(e,t,e=>"frozen"===e.attribute.funcType,r=>{let n=i.table.internalProps.headerHelper.getFrozenIcon(e,t);(0,eE.Bg)(n,r),r.name=n.name},i)}updateHierarchyIcon(e,t){let i;i=this.table.isHeader(e,t)?this.table.internalProps.headerHelper.getHierarchyIcon(e,t):this.table.internalProps.bodyHelper.getHierarchyIcon(e,t),i2(e,t,e=>e.attribute.funcType===ev.cI.collapse||e.attribute.funcType===ev.cI.expand,e=>{(0,eE.Bg)(i,e),e.name=null==i?void 0:i.name},this)}setIconNormalStyle(e,t,i){(e.attribute.backgroundColor||e.attribute.hoverImage)&&i2(t,i,t=>t.name===e.name,e=>{let t=e.parent.getChildByName("icon-back");t&&t.setAttribute("visible",!1),e.attribute.hoverImage&&e.attribute.image!==e.attribute.originImage&&(e.image=e.attribute.originImage)},this)}residentHoverIcon(e,t){i2(e,t,e=>e.attribute.funcType===ev.cI.dropDown,e=>{e.oldVisibleTime=e.attribute.visibleTime,e.setAttribute("visibleTime","always"),e.setAttribute("opacity",1)},this)}resetResidentHoverIcon(e,t){i2(e,t,e=>e.attribute.funcType===ev.cI.dropDown,e=>{e.oldVisibleTime&&e.setAttribute("visibleTime",e.oldVisibleTime),e.setAttribute("opacity",+("always"===e.attribute.visibleTime))},this)}deactivateChart(e,t){var i,r,n;if(-1===e||-1===t)return;let l=this.getCell(e,t);if(null==(i=null==l?void 0:l.firstChild)?void 0:i.deactivate){let i=(null==l?void 0:l.firstChild).attribute.spec.type;null==(n=null==(r=null==l?void 0:l.firstChild)?void 0:r.deactivate)||n.call(r,this.table,this.table.options.chartDimensionLinkage?{releaseChartInstance:"scatter"===i?e!==this.table.stateManager.hover.cellPos.col&&t!==this.table.stateManager.hover.cellPos.row||this.table.stateManager.hover.cellPos.row<this.table.frozenRowCount||this.table.stateManager.hover.cellPos.row>this.table.rowCount-1-this.table.bottomFrozenRowCount||this.table.stateManager.hover.cellPos.col<this.table.frozenColCount||this.table.stateManager.hover.cellPos.col>this.table.colCount-1-this.table.rightFrozenColCount:this.table.options.indicatorsAsCol?t!==this.table.stateManager.hover.cellPos.row||this.table.stateManager.hover.cellPos.col<this.table.frozenColCount||this.table.stateManager.hover.cellPos.col>this.table.colCount-1-this.table.rightFrozenColCount:e!==this.table.stateManager.hover.cellPos.col||this.table.stateManager.hover.cellPos.row<this.table.frozenRowCount||this.table.stateManager.hover.cellPos.row>this.table.rowCount-1-this.table.bottomFrozenRowCount,releaseColumnChartInstance:e!==this.table.stateManager.hover.cellPos.col||this.table.stateManager.hover.cellPos.row<this.table.frozenRowCount||this.table.stateManager.hover.cellPos.row>this.table.rowCount-1-this.table.bottomFrozenRowCount,releaseRowChartInstance:t!==this.table.stateManager.hover.cellPos.row||this.table.stateManager.hover.cellPos.col<this.table.frozenColCount||this.table.stateManager.hover.cellPos.col>this.table.colCount-1-this.table.rightFrozenColCount}:void 0)}}activateChart(e,t){var i,r,n;if(-1===e||-1===t)return;let l=this.getCell(e,t);return null==(r=null==(i=null==l?void 0:l.firstChild)?void 0:i.activate)||r.call(i,this.table),null==(n=null==l?void 0:l.firstChild)?void 0:n.activeChartInstance}removeInteractionBorder(e,t){let i=this.getCell(e,t);i.setAttribute("highlightStroke",void 0),i.setAttribute("highlightStrokeArrayWidth",void 0),i.setAttribute("highlightStrokeArrayColor",void 0)}createCellSelectBorder(e,t,i,r,n,l,o){!function(e,t,i,r,n,l,o,a){var s,h,d,u,c,p,g,f,m;let b,y=!!(null==(s=e.table.options.excelOptions)?void 0:s.fillHandle);if((null==(h=e.table.stateManager.select.ranges)?void 0:h.length)>1)y=!1,e.removeFillHandleFromSelectComponents();else if(1===(null==(d=e.table.stateManager.select.ranges)?void 0:d.length)){let t=Math.max(e.table.stateManager.select.ranges[0].start.row,e.table.stateManager.select.ranges[0].end.row),i=Math.max(e.table.stateManager.select.ranges[0].start.col,e.table.stateManager.select.ranges[0].end.col);e.table.isHeader(i,t)&&(y=!1)}Array.isArray(a)&&(!1===a[1]||!1===a[2])&&(y=!1);let v=Math.min(t,r),_=Math.min(i,n),C=Math.max(t,r),x=Math.max(i,n),w=e.highPerformanceGetCell(v,_).globalAABBBounds,S=e.highPerformanceGetCell(C,x).globalAABBBounds,A=e.table.theme,k=null==(u=A.selectionStyle)?void 0:u.cellBorderColor,M=null==(c=A.selectionStyle)?void 0:c.cellBorderLineWidth,T=(0,eN.f)({pickable:!1,fill:"replace"!==(null==(p=A.selectionStyle)?void 0:p.selectionFillMode)&&(null!=(f=null==(g=A.selectionStyle)?void 0:g.cellBgColor)?f:"rgba(0, 0, 255,0.1)"),lineWidth:M,stroke:a.map(e=>!!e&&k),x:w.x1-e.tableGroup.attribute.x,y:w.y1-e.tableGroup.attribute.y,width:0,height:0,visible:!0,cornerRadius:iE(l,null==(m=e.table.theme.frameStyle)?void 0:m.cornerRadius,t,i,r,n,e.table)});y&&(b=(0,eN.f)({pickable:!1,fill:k,stroke:k,x:S.x2-3,y:S.y2-3,width:6,height:6,visible:!0})),e.lastSelectId=o,e.selectingRangeComponents.set(`${v}-${_}-${C}-${x}-${o}`,{rect:T,fillhandle:b,role:l}),e.tableGroup.insertAfter(T,"body"===l?e.bodyGroup:"columnHeader"===l?e.colHeaderGroup:"rowHeader"===l?e.rowHeaderGroup:"cornerHeader"===l?e.cornerHeaderGroup:"rightTopCorner"===l?e.rightTopCornerGroup:"rightFrozen"===l?e.rightFrozenGroup:"leftBottomCorner"===l?e.leftBottomCornerGroup:"bottomFrozen"===l?e.bottomFrozenGroup:e.rightBottomCornerGroup),y&&e.tableGroup.insertAfter(b,"body"===l?e.bodyGroup:"columnHeader"===l?e.colHeaderGroup:"rowHeader"===l?e.rowHeaderGroup:"cornerHeader"===l?e.cornerHeaderGroup:"rightTopCorner"===l?e.rightTopCornerGroup:"rightFrozen"===l?e.rightFrozenGroup:"leftBottomCorner"===l?e.leftBottomCornerGroup:"bottomFrozen"===l?e.bottomFrozenGroup:e.rightBottomCornerGroup)}(this,e,t,i,r,n,l,o)}moveSelectingRangeComponentsToSelectedRangeComponents(){iP(this)}deleteLastSelectedRangeComponents(){var e;e=this,e.selectedRangeComponents.forEach((t,i)=>{var r;i.split("-")[4]===e.lastSelectId&&(t.rect.delete(),null==(r=t.fillhandle)||r.delete(),e.selectedRangeComponents.delete(i))})}deleteAllSelectBorder(){iB(this),iI(this)}updateCellSelectBorder(e,t=!0){iM(this,e,t)}removeFillHandleFromSelectComponents(){this.selectedRangeComponents.forEach((e,t)=>{var i;null==(i=e.fillhandle)||i.delete(),e.fillhandle=void 0})}recreateAllSelectRangeComponents(){iB(this),this.table.stateManager.select.ranges.forEach(e=>{iM(this,e),iP(this)})}updateColWidth(e,t,i,r){(function(e,t,i,r){r||e.table._setColWidth(t,e.table.getColWidth(t)+i,!0);let n=e.getColGroup(t,!0),l=e.getColGroupInRightTopCorner(t);n&&!l&&eO(n,i,"col-corner",e),l&&eO(l,i,"right-top",e);let o=e.getColGroup(t);o&&eO(o,i,"row-body",e);let a=e.getColGroupInLeftBottomCorner(t);a&&eO(a,i,"left-bottom",e);let s=e.getColGroupInBottom(t);s&&eO(s,i,"bottom",e);let h=e.getColGroupInRightBottomCorner(t);h&&eO(h,i,"right-bottom",e),t<e.frozenColCount?(e.cornerHeaderGroup.forEachChildrenSkipChild((e,r)=>{e.col>t&&e.setAttribute("x",e.attribute.x+i)}),e.rowHeaderGroup.forEachChildrenSkipChild((e,r)=>{e.col>t&&e.setAttribute("x",e.attribute.x+i)})):(e.colHeaderGroup.forEachChildrenSkipChild((e,r)=>{e.col>t&&e.setAttribute("x",e.attribute.x+i)}),e.bodyGroup.forEachChildrenSkipChild((e,r)=>{e.col>t&&e.setAttribute("x",e.attribute.x+i)})),a&&e.leftBottomCornerGroup.forEachChildrenSkipChild((e,r)=>{e.col>t&&e.setAttribute("x",e.attribute.x+i)}),s&&e.bottomFrozenGroup.forEachChildrenSkipChild((e,r)=>{e.col>t&&e.setAttribute("x",e.attribute.x+i)}),h&&e.rightBottomCornerGroup.forEachChildrenSkipChild((e,r)=>{e.col>t&&e.setAttribute("x",e.attribute.x+i)})})(this,e,Math.round(t),r),i||this.updateContainer({async:!0})}updateChartSizeForResizeColWidth(e){(0,iX.s9)(this,e)}updateChartSizeForResizeRowHeight(e){(0,iX.kl)(this,e)}updateChartState(e){this.table.isPivotChart()&&(0,iX.s8)(this,e)}updateCheckboxCellState(e,t,i){var r,n;if(this.table.transpose)null==(r=this.bodyGroup.children)||r.forEach(e=>{var r;null==(r=e.getChildAt(t))||r.getChildren().forEach(e=>{"checkbox"===e.name&&("indeterminate"===i?(e.setAttribute("indeterminate",!0),e.setAttribute("checked",void 0)):(e.setAttribute("indeterminate",void 0),e.setAttribute("checked",i))),"checkbox-content"===e.name&&("indeterminate"===i?(e._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",!0),e._checkboxGroup.getChildByName("checkbox").setAttribute("checked",void 0)):(e._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",void 0),e._checkboxGroup.getChildByName("checkbox").setAttribute("checked",i)))})});else{let t=this.getColGroup(e);null==(n=null==t?void 0:t.children)||n.forEach(e=>{e.getChildren().find(e=>{"checkbox"===e.name&&("indeterminate"===i?(e.setAttribute("indeterminate",!0),e.setAttribute("checked",void 0)):(e.setAttribute("indeterminate",void 0),e.setAttribute("checked",i))),"checkbox-content"===e.name&&("indeterminate"===i?(e._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",!0),e._checkboxGroup.getChildByName("checkbox").setAttribute("checked",void 0)):(e._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",void 0),e._checkboxGroup.getChildByName("checkbox").setAttribute("checked",i)))})})}}updateHeaderCheckboxCellState(e,t,i){var r,n;this.table.transpose?null==(r=this.rowHeaderGroup.children)||r.forEach(e=>{e.getChildAt(t).getChildren().forEach(e=>{"checkbox"===e.name&&("indeterminate"===i?(e.setAttribute("indeterminate",!0),e.setAttribute("checked",void 0)):(e.setAttribute("indeterminate",void 0),e.setAttribute("checked",i))),"checkbox-content"===e.name&&("indeterminate"===i?(e._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",!0),e._checkboxGroup.getChildByName("checkbox").setAttribute("checked",void 0)):(e._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",void 0),e._checkboxGroup.getChildByName("checkbox").setAttribute("checked",i)))})}):null==(n=this.getColGroup(e,!0).children)||n.forEach(e=>{e.getChildren().find(e=>{"checkbox"===e.name&&("indeterminate"===i?(e.setAttribute("indeterminate",!0),e.setAttribute("checked",void 0)):(e.setAttribute("indeterminate",void 0),e.setAttribute("checked",i))),"checkbox-content"===e.name&&("indeterminate"===i?(e._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",!0),e._checkboxGroup.getChildByName("checkbox").setAttribute("checked",void 0)):(e._checkboxGroup.getChildByName("checkbox").setAttribute("indeterminate",void 0),e._checkboxGroup.getChildByName("checkbox").setAttribute("checked",i)))})})}updateAutoColWidth(e){this.table.internalProps._widthResizedColMap.delete(e);let t=this.table.getColWidth(e),i=(0,tJ.al)(e,0,this.table.rowCount-1,this.table,!0);i!==t&&this.updateColWidth(e,i-t)}recalculateColWidths(){let e=this.table;"adaptive"===e.widthMode||e.autoFillWidth||e.internalProps.transpose?(0,tJ.rj)(this.table,0,this.table.colCount-1,!0):(e._clearColRangeWidthsMap(),e.frozenColCount>0&&(0,tJ.rj)(this.table,0,e.frozenColCount-1,!0),e.rightFrozenColCount>0&&(0,tJ.rj)(this.table,e.rightFrozenColCount,e.colCount-1,!0),(0,tJ.rj)(e,this.proxy.colStart,this.proxy.colEnd,!0))}recalculateRowHeights(){let e=this.table;e.internalProps.useOneRowHeightFillAll=!1,"adaptive"===e.heightMode||e.autoFillHeight?(0,eP.Y)(this.table,0,this.table.rowCount-1,!0,!0):(e.frozenRowCount>0&&(0,eP.Y)(this.table,0,e.frozenRowCount-1,!0,!0),e.bottomFrozenRowCount>0&&(0,eP.Y)(this.table,e.bottomFrozenRowCount,e.rowCount-1,!0,!0),(0,eP.Y)(e,this.proxy.rowStart,this.proxy.rowEnd,!0,!0))}resize(){var e,t;this.proxy.resize(),("adaptive"===this.table.widthMode||this.table.autoFillWidth)&&(0===this.table.internalProps._widthResizedColMap.size?this.recalculateColWidths():this.dealWidthMode()),"adaptive"===this.table.heightMode?0===this.table.internalProps._heightResizedRowMap.size?this.recalculateRowHeights():this.dealHeightMode():this.table.autoFillHeight&&this.dealHeightMode(),this.resetFrozen(),this.updateTableSize(),this.updateBorderSizeAndPosition(),this.component.updateScrollBar(),("adaptive"===this.table.widthMode||"adaptive"===this.table.heightMode||this.table.autoFillWidth||this.table.autoFillHeight||(null==(e=this.table.containerFit)?void 0:e.width)||(null==(t=this.table.containerFit)?void 0:t.height))&&this.updateChartSizeForResizeColWidth(-1),this.proxy.progress(),this.updateNextFrame()}updateTableSize(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g;let f=Math.max(this.colHeaderGroup.attribute.width,this.bodyGroup.attribute.width,this.bottomFrozenGroup.attribute.width,0)+Math.max(this.cornerHeaderGroup.attribute.width,this.rowHeaderGroup.attribute.width,this.leftBottomCornerGroup.attribute.width,0)+Math.max(this.rightTopCornerGroup.attribute.width,this.rightFrozenGroup.attribute.width,this.rightBottomCornerGroup.attribute.width,0),m=Math.max(this.colHeaderGroup.attribute.height,this.cornerHeaderGroup.attribute.height,this.rightTopCornerGroup.attribute.height,0)+Math.max(this.rowHeaderGroup.attribute.height,this.bodyGroup.attribute.height,this.rightFrozenGroup.attribute.height,0)+Math.max(this.leftBottomCornerGroup.attribute.height,this.bottomFrozenGroup.attribute.height,this.rightBottomCornerGroup.attribute.height,0),b=f,y=m;if(b=(null==(e=this.table.containerFit)?void 0:e.width)?this.table.tableNoFrameWidth:Math.min(this.table.tableNoFrameWidth,f),y=(null==(t=this.table.containerFit)?void 0:t.height)?this.table.tableNoFrameHeight:Math.min(this.table.tableNoFrameHeight,m),this.tableGroup.setAttributes({x:this.table.tableX,y:this.table.tableY,width:b,height:y}),this.tableGroup.border){let e,t,f,m,b=null==(i=this.tableGroup.border)?void 0:i.attribute;(null==b?void 0:b.strokeArrayWidth)?(e=b.strokeArrayWidth?b.strokeArrayWidth[0]:null!=(r=b.lineWidth)?r:0,t=b.strokeArrayWidth?b.strokeArrayWidth[1]:null!=(n=b.lineWidth)?n:0,f=b.strokeArrayWidth?b.strokeArrayWidth[2]:null!=(l=b.lineWidth)?l:0,m=b.strokeArrayWidth?b.strokeArrayWidth[3]:null!=(o=b.lineWidth)?o:0):(e=null!=(a=null==b?void 0:b.lineWidth)?a:0,t=null!=(s=null==b?void 0:b.lineWidth)?s:0,f=null!=(h=null==b?void 0:b.lineWidth)?h:0,m=null!=(d=null==b?void 0:b.lineWidth)?d:0),"rect"===this.tableGroup.border.type?(null==(u=this.table.theme.frameStyle)?void 0:u.innerBorder)?this.tableGroup.border.setAttributes({x:this.table.tableX+m/2,y:this.table.tableY+e/2,width:this.tableGroup.attribute.width-m/2-t/2,height:this.tableGroup.attribute.height-e/2-f/2}):this.tableGroup.border.setAttributes({x:this.table.tableX-m/2,y:this.table.tableY-e/2,width:this.tableGroup.attribute.width+m/2+t/2,height:this.tableGroup.attribute.height+e/2+f/2}):"group"===this.tableGroup.border.type&&((null==(c=this.table.theme.frameStyle)?void 0:c.innerBorder)?(this.tableGroup.border.setAttributes({x:this.table.tableX+m/2,y:this.table.tableY+e/2,width:this.tableGroup.attribute.width-m/2-t/2,height:this.tableGroup.attribute.height-e/2-f/2}),null==(p=this.tableGroup.border.firstChild)||p.setAttributes({x:0,y:0,width:this.tableGroup.attribute.width-m/2-t/2,height:this.tableGroup.attribute.height-e/2-f/2})):(this.tableGroup.border.setAttributes({x:this.table.tableX-m/2,y:this.table.tableY-e/2,width:this.tableGroup.attribute.width+m/2+t/2,height:this.tableGroup.attribute.height+e/2+f/2}),null==(g=this.tableGroup.border.firstChild)||g.setAttributes({x:m/2,y:e/2,width:this.tableGroup.attribute.width,height:this.tableGroup.attribute.height})))}this.table.bottomFrozenRowCount>0&&(this.bottomFrozenGroup.setAttribute("y",this.tableGroup.attribute.height-this.table.getBottomFrozenRowsHeight()),this.leftBottomCornerGroup.setAttributes({visible:!0,y:this.tableGroup.attribute.height-this.table.getBottomFrozenRowsHeight(),height:this.table.getBottomFrozenRowsHeight(),width:this.table.getFrozenColsWidth()}),this.rightBottomCornerGroup.setAttributes({visible:!0,y:this.tableGroup.attribute.height-this.table.getBottomFrozenRowsHeight(),height:this.table.getBottomFrozenRowsHeight()})),this.table.rightFrozenColCount>0&&(this.rightFrozenGroup.setAttribute("x",this.tableGroup.attribute.width-this.table.getRightFrozenColsWidth()),this.rightTopCornerGroup.setAttributes({visible:!0,x:this.tableGroup.attribute.width-this.table.getRightFrozenColsWidth(),width:this.table.getRightFrozenColsWidth(),height:this.table.getFrozenRowsHeight()}),this.rightBottomCornerGroup.setAttributes({visible:!0,x:this.tableGroup.attribute.width-this.table.getRightFrozenColsWidth(),width:this.table.getRightFrozenColsWidth()})),this.updateDomContainer()}updateRowHeight(e,t,i){eI(this,e,t=Math.round(t),i),this.updateContainerHeight(e,t)}updateRowsHeight(e,t,i){for(let r=0;r<e.length;r++){let n=e[r];if(n>=this.proxy.rowStart&&n<=this.proxy.rowEnd){let e=t[r];eI(this,n,Math.round(e),i),this._updateContainerHeight(n,e)}}this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame()}updateContainerWidth(e,t){e<this.frozenColCount?(this.rowHeaderGroup.setDeltaWidth(t),this.cornerHeaderGroup.setDeltaWidth(t),this.colHeaderGroup.setDeltaX(t),this.bodyGroup.setDeltaX(t)):(this.colHeaderGroup.setDeltaWidth(t),this.bodyGroup.setDeltaWidth(t)),this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame()}_updateContainerHeight(e,t){e<this.table.frozenRowCount?(this.colHeaderGroup.setDeltaHeight(t),this.cornerHeaderGroup.setDeltaHeight(t),this.rowHeaderGroup.setDeltaY(t),this.bodyGroup.setDeltaY(t),this.table.rightFrozenColCount&&this.rightFrozenGroup.setDeltaY(t)):e>=this.table.rowCount-this.table.bottomFrozenRowCount?(this.leftBottomCornerGroup.setDeltaHeight(t),this.bottomFrozenGroup.setDeltaHeight(t),this.table.rightFrozenColCount&&this.rightBottomCornerGroup.setDeltaHeight(t)):(this.rowHeaderGroup.setDeltaHeight(t),this.bodyGroup.setDeltaHeight(t),this.table.rightFrozenColCount&&this.rightFrozenGroup.setDeltaHeight(t))}updateContainerHeight(e,t){this._updateContainerHeight(e,t),this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame()}setColWidth(e,t){let i=this.table.getColWidth(e);i!==t&&(this.updateColWidth(e,t-i),this.table._clearColRangeWidthsMap(e))}setRowHeight(e,t){let i=this.table.getRowHeight(e);i!==t&&((e>=this.proxy.rowStart&&e<=this.proxy.rowEnd||e>=this.table.rowCount-this.table.bottomFrozenRowCount&&e<=this.table.rowCount-1||e<this.table.frozenRowCount)&&this.updateRowHeight(e,t-i),this.table._clearRowRangeHeightsMap(e))}setX(e,t=!1){this.table.scenegraph.proxy.setX(-e,t)}setY(e,t=!1){this.table.scenegraph.proxy.setY(-e,t)}setBodyAndRowHeaderY(e){var t,i,r,n,l,o;let a=null!=(i=null==(t=this.bodyGroup.firstChild)?void 0:t.firstChild)?i:null==(r=this.rowHeaderGroup.firstChild)?void 0:r.firstChild,s=null!=(l=null==(n=this.bodyGroup.firstChild)?void 0:n.lastChild)?l:null==(o=this.rowHeaderGroup.firstChild)?void 0:o.lastChild;0===e&&a&&a.row===this.table.frozenRowCount&&a.attribute.y+e<0?e=-a.attribute.y:s&&this.table.tableNoFrameHeight<this.table.getAllRowsHeight()&&s.row===this.table.rowCount-this.table.bottomFrozenRowCount-1&&s.attribute.y+this.table.getRowHeight(s.row)+e<this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()&&(e=this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()-s.attribute.y-this.table.getRowHeight(s.row)),this.colHeaderGroup.attribute.height+e!==this.bodyGroup.attribute.y&&(this.bodyGroup.setAttribute("y",this.colHeaderGroup.attribute.height+e),this.rowHeaderGroup.setAttribute("y",this.cornerHeaderGroup.attribute.height+e),this.table.rightFrozenColCount>0&&this.rightFrozenGroup.setAttribute("y",this.rightTopCornerGroup.attribute.height+e),this.updateNextFrame())}setBodyAndColHeaderX(e){let t=this.bodyGroup.firstChild,i=this.bodyGroup.lastChild;0===e&&t&&t.col===this.table.frozenColCount&&t.attribute.x+e<0?e=-t.attribute.x:i&&this.table.tableNoFrameWidth<this.table.getAllColsWidth()&&i.col===this.table.colCount-this.table.rightFrozenColCount-1&&i.attribute.x+i.attribute.width+e<this.table.tableNoFrameWidth-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()&&(e=this.table.tableNoFrameWidth-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()-i.attribute.x-i.attribute.width),this.table.getFrozenColsWidth()+e!==this.bodyGroup.attribute.x&&(this.bodyGroup.setAttribute("x",this.table.getFrozenColsWidth()+e),this.colHeaderGroup.setAttribute("x",this.table.getFrozenColsWidth()+e),this.table.bottomFrozenRowCount>0&&this.bottomFrozenGroup.setAttribute("x",this.table.getFrozenColsWidth()+e),this.updateNextFrame())}afterScenegraphCreated(){var e;this.isPivot||this.table.transpose?this.table.options.frozenColCount?this.component.setFrozenColumnShadow(this.table.frozenColCount-1):this.table.options.rightFrozenColCount?this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount):this.component.setFrozenColumnShadow(-1):(this.component.setFrozenColumnShadow(this.table.frozenColCount-1),this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount)),this.table.stateManager.checkFrozen(),this.updateContainer(),this.createFrameBorder(),this.updateBorderSizeAndPosition(),this.component.updateScrollBar(),im(this.table),this.table.options.animationAppear&&function(e){var t,i,r,n;let l,o,a,s;if(!e.options.animationAppear)return;!0===e.options.animationAppear?(l=500,o=0,a="one-by-one",s="column"):(l=null!=(t=e.options.animationAppear.duration)?t:500,o=null!=(i=e.options.animationAppear.delay)?i:0,a=null!=(r=e.options.animationAppear.type)?r:"one-by-one",s=null!=(n=e.options.animationAppear.direction)?n:"row");let{scenegraph:h,frozenColCount:d,frozenRowCount:u}=e,{colStart:c,colEnd:p,rowStart:g,rowEnd:f}=h.proxy;for(let e=0;e<=p;e++)for(let t=0;t<=f;t++){let i=h.highPerformanceGetCell(e,t);i&&"cell"===i.role&&i.forEachChildren(i=>{i.setAttribute("opacity",0),i.animate().wait("one-by-one"===a?("row"===s?t:e)*(l-o):o).to({opacity:1},l,"linear")})}}(this.table),!1===(null==(e=this.table.options.menu)?void 0:e.contextMenuWorkOnlyCell)&&this.canvasShowMenu(),this.updateNextFrame()}dealWidthMode(){let e=this.table;if("adaptive"===e.widthMode){e._clearColRangeWidthsMap();let t=e.tableNoFrameWidth,i=0,r=0,n=e.colCount;if("only-body"===e.widthAdaptiveMode){for(let t=0;t<e.colCount;t++)(t<e.rowHeaderLevelCount||e.isPivotChart()&&t>=e.colCount-e.rightFrozenColCount)&&(i+=e.getColWidth(t));r=e.rowHeaderLevelCount,n=e.isPivotChart()?e.colCount-e.rightFrozenColCount:e.colCount}(0,tJ.j8)(t-i,r,n,!1,[],e,!0)}else if(e.autoFillWidth){e._clearColRangeWidthsMap();let t=e.tableNoFrameWidth,i=0,r=0;for(let t=0;t<e.colCount;t++){let n=e.getColWidth(t);"only-body"===e.widthAdaptiveMode&&(t<e.rowHeaderLevelCount||e.isPivotChart()&&t>=e.colCount-e.rightFrozenColCount)&&(i+=n),r+=n}if(r<t&&r>i){let r=0,n=e.colCount;"only-body"===e.widthAdaptiveMode&&(r=e.rowHeaderLevelCount,n=e.isPivotChart()?e.colCount-e.rightFrozenColCount:e.colCount),(0,tJ.j8)(t-i,r,n,!1,[],e,!0)}}let t=0;this.bodyGroup.forEachChildrenSkipChild(e=>{t+=e.attribute.width}),this.bodyGroup.setAttribute("width",t);let i=0;this.colHeaderGroup.forEachChildrenSkipChild(e=>{i+=e.attribute.width}),this.colHeaderGroup.setAttribute("width",i);let r=0;this.rowHeaderGroup.forEachChildrenSkipChild(e=>{r+=e.attribute.width}),this.rowHeaderGroup.setAttribute("width",r);let n=0;this.cornerHeaderGroup.forEachChildrenSkipChild(e=>{n+=e.attribute.width}),this.cornerHeaderGroup.setAttribute("width",n),this.colHeaderGroup.setAttribute("x",this.cornerHeaderGroup.attribute.width),this.rowHeaderGroup.setAttribute("y",this.cornerHeaderGroup.attribute.height),this.bodyGroup.setAttributes({x:this.rowHeaderGroup.attribute.width,y:this.colHeaderGroup.attribute.height})}dealHeightMode(){var e;let t=this.table;if("adaptive"===t.heightMode){t._clearRowRangeHeightsMap();let e=t.getRowsHeight(0,t.columnHeaderLevelCount-1),i=t.isPivotChart()?t.getBottomFrozenRowsHeight():0,r=t.tableNoFrameHeight-e-i,n=t.columnHeaderLevelCount,l=t.isPivotChart()?t.rowCount-t.bottomFrozenRowCount:t.rowCount,o=0;for(let e=n;e<l;e++)o+=t.getRowHeight(e);let a=r/o;for(let e=n;e<l;e++){let i;i=e===l-1?r-t.getRowsHeight(n,l-2):Math.round(t.getRowHeight(e)*a),this.setRowHeight(e,i)}}else if(t.autoFillHeight){t._clearRowRangeHeightsMap();let i=t.tableNoFrameHeight,r=0,n=0;for(let e=0;e<t.rowCount;e++){let i=t.getRowHeight(e);(e<t.columnHeaderLevelCount||t.isPivotChart()&&e>=t.rowCount-t.bottomFrozenRowCount)&&(n+=i),r+=i}if((null!=(e=this._dealAutoFillHeightOriginRowsHeight)?e:r)<i&&r-n>0){let e=t.columnHeaderLevelCount,l=t.isPivotChart()?t.rowCount-t.bottomFrozenRowCount:t.rowCount,o=(i-n)/(r-n);for(let r=e;r<l;r++){let a;a=r===l-1?i-n-t.getRowsHeight(e,l-2):Math.round(t.getRowHeight(r)*o),this.setRowHeight(r,a)}}}}dealFrozen(){!function(e){var t,i,r,n;if(e.table.frozenColCount>e.table.rowHeaderLevelCount){e.rowHeaderGroup.setAttribute("height",e.bodyGroup.attribute.height),e.rowHeaderGroup.setAttribute("y",e.bodyGroup.attribute.y),e.cornerHeaderGroup.setAttribute("height",e.colHeaderGroup.attribute.height);for(let t=0;t<e.table.frozenColCount-e.table.rowHeaderLevelCount;t++)iZ(e),iN(e),iG(e)}else if(e.table.frozenColCount<e.table.rowHeaderLevelCount){e.bodyGroup.setAttribute("height",e.rowHeaderGroup.attribute.height),e.bodyGroup.setAttribute("y",e.rowHeaderGroup.attribute.y),e.colHeaderGroup.setAttribute("height",e.cornerHeaderGroup.attribute.height);for(let t=0;t<e.table.rowHeaderLevelCount-e.table.frozenColCount;t++)i$(e),ij(e),iV(e)}e.bodyGroup.setAttribute("x",e.rowHeaderGroup.attribute.width),e.colHeaderGroup.setAttribute("x",e.cornerHeaderGroup.attribute.width),e.updateContainer(),e.updateBorderSizeAndPosition(),e.isPivot||e.table.transpose?e.table.options.frozenColCount?e.component.setFrozenColumnShadow(e.table.frozenColCount-1):e.table.options.frozenColCount&&e.component.setRightFrozenColumnShadow(e.table.colCount-e.table.rightFrozenColCount):(e.component.setFrozenColumnShadow(e.table.frozenColCount-1),e.component.setRightFrozenColumnShadow(e.table.colCount-e.table.rightFrozenColCount)),e.hasFrozen=!0,e.frozenColCount=e.table.frozenColCount,e.frozenRowCount=null!=(n=null!=(i=null==(t=e.colHeaderGroup.firstChild)?void 0:t.childrenCount)?i:null==(r=e.cornerHeaderGroup.firstChild)?void 0:r.childrenCount)?n:e.table.frozenRowCount}(this)}resetFrozen(){!function(e){var t,i,r,n,l,o;if(e.frozenColCount>e.table.frozenColCount){e.bodyGroup.setAttribute("height",e.rowHeaderGroup.attribute.height),e.bodyGroup.setAttribute("y",e.rowHeaderGroup.attribute.y),e.colHeaderGroup.setAttribute("height",e.cornerHeaderGroup.attribute.height);for(let t=0;t<e.frozenColCount-e.table.frozenColCount;t++)i$(e),ij(e),iV(e)}else if(e.frozenColCount<e.table.frozenColCount){e.rowHeaderGroup.setAttribute("height",e.bodyGroup.attribute.height),e.rowHeaderGroup.setAttribute("y",e.bodyGroup.attribute.y),e.cornerHeaderGroup.setAttribute("height",e.colHeaderGroup.attribute.height);for(let t=0;t<e.table.frozenColCount-e.frozenColCount;t++)iZ(e),iN(e),iG(e)}iW(e),e.recreateAllSelectRangeComponents(),e.frozenColCount=e.table.frozenColCount,e.frozenRowCount=null!=(n=null!=(i=null==(t=e.colHeaderGroup.firstChild)?void 0:t.childrenCount)?i:null==(r=e.cornerHeaderGroup.firstChild)?void 0:r.childrenCount)?n:e.table.frozenRowCount,e.proxy.colStart=null!=(o=null==(l=e.bodyGroup.firstChild)?void 0:l.col)?o:e.table.frozenColCount,e.bodyGroup.setAttribute("x",e.rowHeaderGroup.attribute.width),e.colHeaderGroup.setAttribute("x",e.cornerHeaderGroup.attribute.width),e.updateContainer(),e.updateBorderSizeAndPosition(),e.isPivot||e.table.transpose?e.table.options.frozenColCount?e.component.setFrozenColumnShadow(e.table.frozenColCount-1):e.table.options.rightFrozenColCount&&e.component.setRightFrozenColumnShadow(e.table.colCount-e.table.rightFrozenColCount):(e.component.setFrozenColumnShadow(e.table.frozenColCount-1),e.component.setRightFrozenColumnShadow(e.table.colCount-e.table.rightFrozenColCount)),e.hasFrozen=!0}(this)}resetRowFrozen(){!function(e){var t,i,r,n,l;if(e.frozenRowCount>e.table.frozenRowCount){e.bodyGroup.setAttribute("width",e.colHeaderGroup.attribute.width),e.bodyGroup.setAttribute("x",e.colHeaderGroup.attribute.x),e.rowHeaderGroup.setAttribute("width",e.cornerHeaderGroup.attribute.width);for(let t=0;t<e.frozenRowCount-e.table.frozenRowCount;t++)(function(e){let t=!1;for(let i=0;i<e.colHeaderGroup.childrenCount;i++){let r=e.colHeaderGroup.children[i];if(!iK(r))continue;let n=e.bodyGroup.children[i];if(!n)continue;let l=r.lastChild;iU(n,l,n.firstChild),t||(e.colHeaderGroup.setAttribute("height",e.colHeaderGroup.attribute.height-l.attribute.height),e.bodyGroup.setAttribute("height",e.bodyGroup.attribute.height+l.attribute.height),t=!0)}})(e),function(e){let t=!1;for(let i=0;i<e.cornerHeaderGroup.childrenCount;i++){let r=e.cornerHeaderGroup.children[i];if(!iK(r))continue;let n=e.rowHeaderGroup.children[i];if(!n)continue;let l=r.lastChild;iU(n,l,n.firstChild),t||(e.cornerHeaderGroup.setAttribute("height",e.cornerHeaderGroup.attribute.height-l.attribute.height),e.rowHeaderGroup.setAttribute("height",e.rowHeaderGroup.attribute.height+l.attribute.height),t=!0)}}(e),function(e){let t=!1;for(let i=0;i<e.rightTopCornerGroup.childrenCount;i++){let r=e.rightTopCornerGroup.children[i];if(!iK(r))continue;let n=e.rightFrozenGroup.children[i];if(!n)continue;let l=r.lastChild;iU(n,l,n.firstChild),t||(e.rightTopCornerGroup.setAttribute("height",e.rightTopCornerGroup.attribute.height-l.attribute.height),e.rightFrozenGroup.setAttribute("height",e.rightFrozenGroup.attribute.height+l.attribute.height),t=!0)}}(e)}else if(e.frozenRowCount<e.table.frozenRowCount){e.colHeaderGroup.setAttribute("width",e.bodyGroup.attribute.width),e.colHeaderGroup.setAttribute("x",e.bodyGroup.attribute.x),e.cornerHeaderGroup.setAttribute("width",e.rowHeaderGroup.attribute.width);for(let t=0;t<e.table.frozenRowCount-e.frozenRowCount;t++)(function(e){var t;let i=!1;for(let r=0;r<e.bodyGroup.childrenCount;r++){let n=e.bodyGroup.children[r];if(!iK(n))continue;let l=n.firstChild;e.colHeaderGroup.children[r]||t4(e.colHeaderGroup,0,0,l.col,l.col,0,0,"columnHeader",e.table),null==(t=e.colHeaderGroup.children[r])||t.appendChild(l),i||(e.colHeaderGroup.setAttribute("height",e.colHeaderGroup.attribute.height+l.attribute.height),e.bodyGroup.setAttribute("height",e.bodyGroup.attribute.height-l.attribute.height),i=!0)}})(e),function(e){var t;let i=!1;for(let r=0;r<e.rowHeaderGroup.childrenCount;r++){let n=e.rowHeaderGroup.children[r];if(!iK(n))continue;let l=n.firstChild;e.cornerHeaderGroup.children[r]||t4(e.cornerHeaderGroup,0,0,l.col,l.col,0,0,e.table.isListTable()?"columnHeader":"cornerHeader",e.table),null==(t=e.cornerHeaderGroup.children[r])||t.appendChild(l),i||(e.cornerHeaderGroup.setAttribute("height",e.cornerHeaderGroup.attribute.height+l.attribute.height),e.rowHeaderGroup.setAttribute("height",e.rowHeaderGroup.attribute.height-l.attribute.height),i=!0)}}(e),function(e){let t=!1;for(let i=0;i<e.rightFrozenGroup.childrenCount;i++){let r=e.rightFrozenGroup.children[i];if(!iK(r))continue;let n=r.firstChild;e.rightTopCornerGroup.children[i]||t4(e.rightTopCornerGroup,0,0,n.col,n.col,0,0,"columnHeader",e.table),e.rightTopCornerGroup.children[i].appendChild(n),t||(e.rightTopCornerGroup.setAttribute("height",e.rightTopCornerGroup.attribute.height+n.attribute.height),e.rightFrozenGroup.setAttribute("height",e.rightFrozenGroup.attribute.height-n.attribute.height),t=!0)}}(e)}iW(e),e.recreateAllSelectRangeComponents(),e.frozenRowCount=e.table.frozenRowCount,e.frozenColCount=null!=(i=null==(t=e.rowHeaderGroup)?void 0:t.childrenCount)?i:0,e.proxy.rowStart=null!=(l=null==(n=null==(r=e.bodyGroup.firstChild)?void 0:r.firstChild)?void 0:n.row)?l:e.table.frozenRowCount,e.bodyGroup.setAttribute("y",e.colHeaderGroup.attribute.height),e.rowHeaderGroup.setAttribute("y",e.cornerHeaderGroup.attribute.height),e.updateContainer({needUpdateCellY:!0}),e.updateBorderSizeAndPosition(),e.hasFrozen=!0}(this)}updateCellLayoutWidthCertainWidth(e,t,i){let r=e.attribute.width,n=!1;return e.forEachChildren((e,l)=>{l+=t;let o=(0,e_.Z)(this.table,i,l);o?e=this.getCell(o.start.col,o.start.row):e.setAttribute("width",r);let a=this.table._getCellStyle(i,l),s=(0,eR.u)((0,ek.WJ)("padding",a,i,l,this.table)),h=e.getChildByName("text"),d=0,u=0;if(h)d=h.AABBBounds.height()+(s[0]+s[2]),h.setAttribute("maxLineWidth",r-(s[1]+s[3])),u=h.AABBBounds.height()+(s[0]+s[2]);else{let t=e.getChildAt(1);d=t.AABBBounds.height()+(s[0]+s[2]),t._cellWidth=r-(s[1]+s[3]),t.layout(),u=t.AABBBounds.height()+(s[0]+s[2])}let c=this.table.getRowHeight(l);e.attribute.height!==u&&(e.setAttribute("height",u),(c===d||u>c)&&(n=!0))}),n}updateHeaderPosition(e,t,i,r,n){!function(e,t,i,r,n,l){let o=l.scenegraph;for(let i=e;i<=t;i++){let e=l.getColWidth(i),t=l.scenegraph.getColGroup(i,!0),r=l.scenegraph.getColGroup(i),n=l.scenegraph.getColGroupInBottom(i),o=l.scenegraph.getColGroupInLeftBottomCorner(i),a=l.scenegraph.getColGroupInRightBottomCorner(i);t&&(t.setAttribute("width",e),t.forEachChildren(t=>{t.setAttribute("width",e)})),r&&(r.setAttribute("width",e),r.forEachChildren(t=>{t.setAttribute("width",e)})),n&&(n.setAttribute("width",e),n.forEachChildren(t=>{t.setAttribute("width",e)})),a&&(a.setAttribute("width",e),a.forEachChildren(t=>{t.setAttribute("width",e)})),o&&(o.setAttribute("width",e),o.forEachChildren(t=>{t.setAttribute("width",e)}))}if(o.updateContainer(),"column"===n)for(let i=e;i<=t;i++){let e=l.scenegraph.getColGroup(i);null==e||e.setAttribute("chartInstance",void 0);for(let e=0;e<=l.frozenRowCount-1;e++)o.updateCellContent(i,e);for(let e=o.bodyRowStart;e<=o.bodyRowEnd;e++)o.updateCellContent(i,e);for(let e=l.rowCount-l.bottomFrozenRowCount;e<=l.rowCount-1;e++)o.updateCellContent(i,e)}else{for(let e=0;e<=l.frozenColCount-1;e++){let t=l.scenegraph.getColGroup(e);null==t||t.setAttribute("chartInstance",void 0);for(let t=i;t<=r;t++)o.updateCellContent(e,t)}for(let e=o.bodyColStart;e<=o.bodyColEnd;e++){let t=l.scenegraph.getColGroup(e);null==t||t.setAttribute("chartInstance",void 0);for(let t=i;t<=r;t++)o.updateCellContent(e,t)}for(let e=l.colCount-l.rightFrozenColCount;e<=l.colCount-1;e++){let t=l.scenegraph.getColGroup(e);null==t||t.setAttribute("chartInstance",void 0);for(let t=i;t<=r;t++)o.updateCellContent(e,t)}}}(e,t,i,r,n,this.table)}updateContainerAttrWidthAndX(){var e,t,i;let r=iq(this.cornerHeaderGroup,0),n=iq(this.rowHeaderGroup,0),l=this.colHeaderGroup.hasChildNodes()&&this.colHeaderGroup.firstChild?iq(this.colHeaderGroup,this.colHeaderGroup.firstChild.col>0?this.table.getColsWidth(null!=(e=this.table.frozenColCount)?e:0,this.colHeaderGroup.firstChild.col-1):0):0,o=this.bodyGroup.hasChildNodes()&&this.bodyGroup.firstChild?iq(this.bodyGroup,this.bodyGroup.firstChild.col>0?this.table.getColsWidth(null!=(t=this.table.frozenColCount)?t:0,this.bodyGroup.firstChild.col-1):0):0,a=iq(this.rightFrozenGroup.childrenCount>0?this.rightFrozenGroup:this.rightTopCornerGroup,0);this.bottomFrozenGroup.hasChildNodes()&&this.bottomFrozenGroup.firstChild&&iq(this.bottomFrozenGroup,this.bottomFrozenGroup.firstChild.col>0?this.table.getColsWidth(null!=(i=this.table.frozenColCount)?i:0,this.bottomFrozenGroup.firstChild.col-1):0),iq(this.leftBottomCornerGroup,0),iq(this.rightTopCornerGroup,0),iq(this.rightBottomCornerGroup,0),this.cornerHeaderGroup.setDeltaWidth(r-this.cornerHeaderGroup.attribute.width),this.leftBottomCornerGroup.setDeltaWidth(r-this.leftBottomCornerGroup.attribute.width),this.colHeaderGroup.setDeltaWidth(l-this.colHeaderGroup.attribute.width),this.rowHeaderGroup.setDeltaWidth(n-this.rowHeaderGroup.attribute.width),this.bottomFrozenGroup.setDeltaWidth(l-this.bottomFrozenGroup.attribute.width),this.rightFrozenGroup.setDeltaWidth(a-this.rightFrozenGroup.attribute.width),this.rightTopCornerGroup.setDeltaWidth(a-this.rightTopCornerGroup.attribute.width),this.rightBottomCornerGroup.setDeltaWidth(a-this.rightBottomCornerGroup.attribute.width),this.bodyGroup.setDeltaWidth(o-this.bodyGroup.attribute.width),this.colHeaderGroup.setAttribute("x",this.cornerHeaderGroup.attribute.width),this.bottomFrozenGroup.setAttribute("x",this.table.getFrozenColsWidth()),this.bodyGroup.setAttribute("x",this.rowHeaderGroup.attribute.width)}updateContainerAttrHeightAndY(){var e,t,i;for(let e=0;e<this.cornerHeaderGroup.children.length;e++)iJ(this.cornerHeaderGroup.children[e],0);for(let e=0;e<this.colHeaderGroup.children.length;e++)iJ(this.colHeaderGroup.children[e],0);for(let e=0;e<this.rightTopCornerGroup.children.length;e++)iJ(this.rightTopCornerGroup.children[e],0);for(let t=0;t<this.rowHeaderGroup.children.length;t++)this.rowHeaderGroup.children[t].firstChild&&iJ(this.rowHeaderGroup.children[t],this.rowHeaderGroup.children[t].firstChild.row>0?this.table.getRowsHeight(null!=(e=this.table.frozenRowCount)?e:0,this.rowHeaderGroup.children[t].firstChild.row-1):0);for(let e=0;e<this.bodyGroup.children.length;e++)this.bodyGroup.children[e].firstChild&&iJ(this.bodyGroup.children[e],this.bodyGroup.children[e].firstChild.row>0?this.table.getRowsHeight(null!=(t=this.table.frozenRowCount)?t:0,this.bodyGroup.children[e].firstChild.row-1):0);for(let e=0;e<this.rightFrozenGroup.children.length;e++)this.rightFrozenGroup.children[e].firstChild&&iJ(this.rightFrozenGroup.children[e],this.rightFrozenGroup.children[e].firstChild.row>0?this.table.getRowsHeight(null!=(i=this.table.frozenRowCount)?i:0,this.rightFrozenGroup.children[e].firstChild.row-1):0);for(let e=0;e<this.leftBottomCornerGroup.children.length;e++)iJ(this.leftBottomCornerGroup.children[e],0);for(let e=0;e<this.bottomFrozenGroup.children.length;e++)iJ(this.bottomFrozenGroup.children[e],0);for(let e=0;e<this.rightBottomCornerGroup.children.length;e++)iJ(this.rightBottomCornerGroup.children[e],0)}updateContainer(e={async:!1,needUpdateCellY:!1}){var t;e.async?this._needUpdateContainer||(this._needUpdateContainer=!0,setTimeout(()=>{var t;this.updateContainerSync(null!=(t=e.needUpdateCellY)&&t)},0)):(this._needUpdateContainer=!0,this.updateContainerSync(null!=(t=e.needUpdateCellY)&&t))}updateContainerSync(e=!1){this._needUpdateContainer&&(this._needUpdateContainer=!1,this.updateContainerAttrWidthAndX(),e&&this.updateContainerAttrHeightAndY(),this.updateTableSize(),this.component.updateScrollBar(),this.updateNextFrame())}updateCellContentWhileResize(e,t){var i;let r=(null==(i=this.table.getCellRawRecord(e,t))?void 0:i.vtableMerge)?"text":this.table.isHeader(e,t)?this.table._getHeaderLayoutMap(e,t).headerType:this.table.getBodyColumnType(e,t),n=this.getCell(e,t);"image"!==r&&"video"!==r||(0,eS.km)(n,e,t,0,0,this.table)}createFrameBorder(){var e,t,i,r,n;this.updateTableSize();let l=!this.isPivot&&!this.table.internalProps.transpose;e4(this.bodyGroup,this.table.theme.bodyStyle.frameStyle,this.bodyGroup.role,l?[!0,!0,!0,!1]:void 0),e4(this.rowHeaderGroup,this.isPivot||this.table.internalProps.transpose?this.table.theme.rowHeaderStyle.frameStyle:this.table.theme.bodyStyle.frameStyle,this.rowHeaderGroup.role,l?[!0,!1,!0,!0]:void 0),e4(this.colHeaderGroup,this.table.theme.headerStyle.frameStyle,this.colHeaderGroup.role,l?[!0,!0,!0,!1]:void 0),e4(this.cornerHeaderGroup,this.isPivot?this.table.theme.cornerHeaderStyle.frameStyle:this.table.theme.headerStyle.frameStyle,this.cornerHeaderGroup.role,l?[!0,!1,!0,!0]:void 0),(null==(e=this.table.theme.cornerLeftBottomCellStyle)?void 0:e.frameStyle)&&e4(this.leftBottomCornerGroup,this.table.theme.cornerLeftBottomCellStyle.frameStyle,this.leftBottomCornerGroup.role,l?[!0,!1,!0,!0]:void 0),(null==(t=this.table.theme.bottomFrozenStyle)?void 0:t.frameStyle)&&e4(this.bottomFrozenGroup,this.table.theme.bottomFrozenStyle.frameStyle,this.bottomFrozenGroup.role,l?[!0,!0,!0,!1]:void 0),(null==(i=this.table.theme.rightFrozenStyle)?void 0:i.frameStyle)&&e4(this.rightFrozenGroup,this.table.theme.rightFrozenStyle.frameStyle,this.rightFrozenGroup.role,void 0),(null==(r=this.table.theme.cornerRightTopCellStyle)?void 0:r.frameStyle)&&e4(this.rightTopCornerGroup,this.table.theme.cornerRightTopCellStyle.frameStyle,this.rightTopCornerGroup.role,void 0),(null==(n=this.table.theme.cornerRightBottomCellStyle)?void 0:n.frameStyle)&&e4(this.rightBottomCornerGroup,this.table.theme.cornerRightBottomCellStyle.frameStyle,this.rightBottomCornerGroup.role,void 0),e4(this.tableGroup,this.table.theme.frameStyle,this.tableGroup.role,void 0)}getResizeColAt(e,t,i){let r,n=this.table.theme.columnResize.resizeHotSpotSize/2;if(!i){let i=this.table.getDrawRange();return t>=i.top&&t<=i.bottom&&(r=this.table.getCellAtRelativePosition(e-n,t)).col===this.table.colCount-1?r:{col:-1,row:-1}}return i.stage?(e<i.globalAABBBounds.x1+n?r={col:i.col-1,row:i.row,x:i.globalAABBBounds.x1}:i.globalAABBBounds.x2-n<e&&(r={col:i.col,row:i.row,x:i.globalAABBBounds.x2}),r&&this.table.rightFrozenColCount>0&&r.col>=this.table.colCount-this.table.rightFrozenColCount-1&&this.table.tableNoFrameWidth-this.table.getFrozenColsWidth()-this.table.getRightFrozenColsWidth()+this.table.scrollLeft<this.bodyGroup.attribute.width&&(r.col=r.col+1,r.rightFrozen=!0),r||{col:-1,row:-1}):{col:-1,row:-1}}getResizeRowAt(e,t,i){let r=this.table.theme.columnResize.resizeHotSpotSize/2;if(i){let e;if(t<i.globalAABBBounds.y1+r?e={col:i.col,row:i.row-1,y:i.globalAABBBounds.y1}:i.globalAABBBounds.y2-r<t&&(e={col:i.col,row:i.row,y:i.globalAABBBounds.y2}),e&&this.table.bottomFrozenRowCount>0&&e.row>=this.table.rowCount-this.table.bottomFrozenRowCount-1&&this.table.tableNoFrameHeight-this.table.getFrozenRowsHeight()-this.table.getBottomFrozenRowsHeight()+this.table.scrollTop<this.bodyGroup.attribute.height&&(e.row=e.row+1,e.bottomFrozen=!0),e)return e}return{col:-1,row:-1}}updateFrozen(){this.clear||(this.resetFrozen(),this.component.updateScrollBar())}updateRowFrozen(){this.clear||(this.resetRowFrozen(),this.component.updateScrollBar())}dealWidthRightFrozen(e){this.clear?this.table.internalProps.rightFrozenColCount=e:function(e,t){let{table:i,proxy:r,rightTopCornerGroup:n,rightFrozenGroup:l,rightBottomCornerGroup:o,bottomFrozenGroup:a,bodyGroup:s,colHeaderGroup:h}=t,d=t.table.rightFrozenColCount;if(e>d){for(let r=i.colCount-d-1;r>=i.colCount-e;r--)iU(l,t.getColGroup(r),l.firstChild),iU(n,t.getColGroup(r,!0),n.firstChild),iU(o,t.getColGroupInBottom(r),o.firstChild);let r=0;l.forEachChildren(e=>{e.setAttribute("x",r),r+=e.attribute.width}),r=0,n.forEachChildren(e=>{e.setAttribute("x",r),r+=e.attribute.width}),r=0,o.forEachChildren(e=>{e.setAttribute("x",r),r+=e.attribute.width})}else if(e<d){for(let r=i.colCount-d;r<i.colCount-e;r++){let e=t.getColGroup(r);e.setAttribute("x",s.lastChild.attribute.x+i.getColWidth(s.lastChild.col)),s.appendChild(e);let n=t.getColGroupInRightTopCorner(r);n.setAttribute("x",h.lastChild.attribute.x+i.getColWidth(h.lastChild.col)),h.appendChild(n);let l=t.getColGroupInRightBottomCorner(r);l.setAttribute("x",a.lastChild.attribute.x+i.getColWidth(a.lastChild.col)),a.appendChild(l)}let r=0;l.forEachChildren(e=>{e.setAttribute("x",r),r+=e.attribute.width}),r=0,n.forEachChildren(e=>{e.setAttribute("x",r),r+=e.attribute.width}),r=0,o.forEachChildren(e=>{e.setAttribute("x",r),r+=e.attribute.width})}l.setAttribute("width",i.getColsWidth(i.colCount-e,i.colCount-1)),n.setAttribute("width",i.getColsWidth(i.colCount-e,i.colCount-1)),o.setAttribute("width",i.getColsWidth(i.colCount-e,i.colCount-1)),i.internalProps.rightFrozenColCount=e,t.updateContainer(),t.component.updateScrollBar(),t.updateNextFrame()}(e,this)}dealWidthBottomFrozen(e){this.clear?this.table.internalProps.bottomFrozenRowCount=e:function(e,t){let{table:i,proxy:r,bottomFrozenGroup:n,leftBottomCornerGroup:l,rightBottomCornerGroup:o}=t;n.childrenCount||(r.table.isPivotChart()||(t4(l,0,0,0,i.frozenColCount-1,0,-1,"rowHeader",i),t4(o,0,0,i.colCount-i.rightFrozenColCount,i.colCount-1,0,-1,"body",i)),t4(n,0,0,r.colStart,r.colEnd,0,-1,"body",i));let a=t.table.bottomFrozenRowCount;if(e>a){for(let r=0;r<i.frozenColCount;r++){let n=t.getColGroupInLeftBottomCorner(r);for(let l=i.rowCount-a-1;l>=i.rowCount-e;l--)iU(n,t.getCell(r,l,!0),n.firstChild);let l=0;n.forEachChildren(e=>{e.setAttribute("y",l),l+=i.getRowHeight(e.row)})}for(let n=r.colStart;n<=r.colEnd;n++){let r=t.getColGroupInBottom(n);for(let l=i.rowCount-a-1;l>=i.rowCount-e;l--)iU(r,t.getCell(n,l,!0),r.firstChild);let l=0;r.forEachChildren(e=>{e.setAttribute("y",l),l+=i.getRowHeight(e.row)})}if(i.rightFrozenColCount>0)for(let r=i.colCount-i.rightFrozenColCount;r<i.colCount;r++){let n=t.getColGroupInRightBottomCorner(r);for(let l=i.rowCount-a-1;l>=i.rowCount-e;l--)iU(n,t.getCell(r,l,!0),n.firstChild);let l=0;n.forEachChildren(e=>{e.setAttribute("y",l),l+=i.getRowHeight(e.row)})}}else if(e<a){for(let r=0;r<i.rowHeaderLevelCount;r++){let n=t.getColGroup(r);for(let l=i.rowCount-a;l<i.rowCount-e;l++){let e=t.getCell(r,l,!0);e.setAttribute("y",n.lastChild.attribute.y+i.getRowHeight(n.lastChild.row)),n.appendChild(e)}let l=t.getColGroupInLeftBottomCorner(r),o=0;l.forEachChildren(e=>{e.setAttribute("y",o),o+=i.getRowHeight(e.row)})}for(let n=r.colStart;n<=r.colEnd;n++){let r=t.getColGroup(n);for(let l=i.rowCount-a;l<i.rowCount-e;l++){let e=t.getCell(n,l,!0);e.setAttribute("y",r.lastChild.attribute.y+i.getRowHeight(r.lastChild.row)),r.appendChild(e)}let l=t.getColGroupInBottom(n),o=0;l.forEachChildren(e=>{e.setAttribute("y",o),o+=i.getRowHeight(e.row)})}if(i.rightFrozenColCount>0)for(let r=i.colCount-i.rightFrozenColCount;r<i.colCount;r++){let n=t.getColGroup(r);for(let l=i.rowCount-a;l<i.rowCount-e;l++){let e=t.getCell(r,l,!0);e.setAttribute("y",n.lastChild.attribute.y+i.getRowHeight(n.lastChild.row)),n.appendChild(e)}let l=t.getColGroupInRightBottomCorner(r),o=0;l.forEachChildren(e=>{e.setAttribute("y",o),o+=i.getRowHeight(e.row)})}}n.setAttribute("height",i.getRowsHeight(i.rowCount-e,i.rowCount-1)),l.setAttribute("height",i.getRowsHeight(i.rowCount-e,i.rowCount-1)),o.setAttribute("height",i.getRowsHeight(i.rowCount-e,i.rowCount-1)),i.internalProps.bottomFrozenRowCount=e,t.updateContainer(),t.component.updateScrollBar(),t.updateNextFrame()}(e,this)}updateBorderSizeAndPosition(){this.bodyGroup.border&&(this.bodyGroup.appendChild(this.bodyGroup.border),e8(this.bodyGroup),this.rowHeaderGroup.attribute.width,e5(this.bodyGroup,this.table.theme.bodyStyle.frameStyle)),this.colHeaderGroup.border&&(this.colHeaderGroup.appendChild(this.colHeaderGroup.border),e8(this.colHeaderGroup),this.cornerHeaderGroup.attribute.width,e5(this.colHeaderGroup,this.table.theme.headerStyle.frameStyle)),this.rowHeaderGroup.border&&(this.rowHeaderGroup.appendChild(this.rowHeaderGroup.border),e8(this.rowHeaderGroup)),this.cornerHeaderGroup.border&&(this.cornerHeaderGroup.appendChild(this.cornerHeaderGroup.border),e8(this.cornerHeaderGroup)),this.leftBottomCornerGroup.border&&(this.leftBottomCornerGroup.appendChild(this.leftBottomCornerGroup.border),e8(this.leftBottomCornerGroup)),this.bottomFrozenGroup.border&&(this.bottomFrozenGroup.appendChild(this.bottomFrozenGroup.border),e8(this.bottomFrozenGroup)),this.rightFrozenGroup.border&&(this.rightFrozenGroup.appendChild(this.rightFrozenGroup.border),e8(this.rightFrozenGroup)),this.rightTopCornerGroup.border&&(this.rightTopCornerGroup.appendChild(this.rightTopCornerGroup.border),e8(this.rightTopCornerGroup)),this.rightBottomCornerGroup.border&&(this.rightBottomCornerGroup.appendChild(this.rightBottomCornerGroup.border),e8(this.rightBottomCornerGroup)),function(e){if(!e.theme.frameStyle.cornerRadius)return;let t=e.theme.frameStyle.cornerRadius,{cornerHeaderGroup:i,colHeaderGroup:r,rowHeaderGroup:n,bodyGroup:l,rightTopCornerGroup:o,leftBottomCornerGroup:a,rightBottomCornerGroup:s,rightFrozenGroup:h,bottomFrozenGroup:d}=e.scenegraph;i.setAttribute("cornerRadius",0),r.setAttribute("cornerRadius",0),n.setAttribute("cornerRadius",0),l.setAttribute("cornerRadius",0),o.setAttribute("cornerRadius",0),a.setAttribute("cornerRadius",0),s.setAttribute("cornerRadius",0),h.setAttribute("cornerRadius",0),d.setAttribute("cornerRadius",0);let u=(0,P.JO)(t);i.attribute.width>0&&i.attribute.height>0?e7(i,[u[0],0,0,0]):r.attribute.height>0?e7(r,[u[0],0,0,0]):n.attribute.width>0?e7(n,[u[0],0,0,0]):e7(l,[u[0],0,0,0]),a.attribute.width>0&&a.attribute.height>0?e7(a,[0,0,0,u[3]]):d.attribute.height>0?e7(d,[0,0,0,u[3]]):n.attribute.width>0?e7(n,[0,0,0,u[3]]):e7(l,[0,0,0,u[3]]),o.attribute.width>0&&o.attribute.height>0?e7(o,[0,u[1],0,0]):r.attribute.height>0?e7(r,[0,u[1],0,0]):h.attribute.width>0?e7(h,[0,u[1],0,0]):e7(l,[0,u[1],0,0]),s.attribute.width>0&&s.attribute.height>0?e7(s,[0,0,u[2],0]):h.attribute.width>0?e7(h,[0,0,u[2],0]):d.attribute.height>0?e7(d,[0,0,u[2],0]):e7(l,[0,0,u[2],0])}(this.table)}sortCell(){this.isPivot||(this.table.transpose?this.proxy.sortCellHorizontal():this.proxy.sortCellVertical())}getCellOverflowText(e,t){let i=this.getCell(e,t).getChildByName("text",!0);if(i&&"text"===i.type){if(i.attribute.moreThanMaxCharacters||i.cliped)return this.table.getCellValue(e,t)}else if(i&&"richtext"===i.type&&i.attribute.ellipsis&&i._frameCache&&i.attribute.height<i._frameCache.actualHeight)return i.attribute.textConfig.find(e=>e.text),this.table.getCellValue(e,t);return null}updateDrill(e,t,i,r,n){this.component.drillIcon.update(e,t,i,r,n,this)}updateCellContent(e,t,i=!1){if(!this.clear)return(0,eA.wW)(e,t,this.table,void 0,void 0,i)}setPixelRatio(e){this.stage.disableDirtyBounds(),this.stage.window.setDpr(e),this.stage.render(),this.stage.enableDirtyBounds()}updateRow(e,t,i=[],r=!0,n){this.table.internalProps.layoutMap.clearCellRangeMap(),this.table.internalProps.useOneRowHeightFillAll=!1;let l=(0,H.oM)(t.map(e=>e.row)).sort((e,t)=>e-t),o=(0,H.oM)(i.map(e=>e.row)).sort((e,t)=>e-t),a=this.table.getAllRowsHeight()-[...l,...o].reduce((e,t)=>e+this.table.getRowHeight(t),0)<=this.table.tableNoFrameHeight;if(function(e,t,i,r,n){let l,o;iC(r)&&ig(r);let a=r.scenegraph,s=(0,H.oM)(e.map(e=>e.row)).sort((e,t)=>t-e),h=(0,H.oM)(t.map(e=>e.row)).sort((e,t)=>e-t),d=(0,H.oM)(i.map(e=>e.row)).sort((e,t)=>e-t);if(d.length&&(l=iO(d[0]-1,d[d.length-1]+1,a)),h.length){let e=iO(h[0]-1,h[h.length-1]+1,a);l=(0,b.Z)(l)?(0,b.Z)(e)?Math.min(l,e):l:e}if(s.length){let e=iO(s[0]-1,s[s.length-1]+1,a);l=(0,b.Z)(l)?(0,b.Z)(e)?Math.min(l,e):l:e}s.forEach(e=>{var t=e,i=a,r=n;let l=i.proxy;if(t>=l.rowStart&&t<=l.rowEnd&&(iF(t,i),l.rowEnd--,l.currentRow--),!r){l.bodyBottomRow--;let e=Math.min(l.rowLimit,l.bodyBottomRow-l.bodyTopRow+1);l.totalActualBodyRowCount=e,l.totalRow=Math.min(l.table.rowCount-1,l.rowStart+e-1)}});let u=r.rowHeightsMap;if(s.forEach(e=>{u.delete(e)}),s.length){var c,p,g=a;function f(e,t){e.row=t;let i=(0,e_.Z)(g.table,e.col,e.row);i?(e.mergeStartCol=i.start.col,e.mergeEndCol=i.end.col,e.mergeStartRow=i.start.row,e.mergeEndRow=i.end.row):(e.mergeStartCol=void 0,e.mergeEndCol=void 0,e.mergeStartRow=void 0,e.mergeEndRow=void 0)}g.bodyGroup.forEachChildren(e=>{let t=g.bodyRowStart;null==e||e.forEachChildren(e=>{f(e,t),t++})}),g.rowHeaderGroup.forEachChildren(e=>{let t=g.bodyRowStart;null==e||e.forEachChildren(e=>{f(e,t),t++})}),g.rightFrozenGroup.forEachChildren(e=>{let t=g.bodyRowStart;null==e||e.forEachChildren(e=>{f(e,t),t++})}),g.bottomFrozenGroup.forEachChildren(e=>{let t=g.table.rowCount-g.table.bottomFrozenRowCount;null==e||e.forEachChildren(e=>{f(e,t),t++})}),g.leftBottomCornerGroup.forEachChildren(e=>{let t=g.table.rowCount-g.table.bottomFrozenRowCount;null==e||e.forEachChildren(e=>{f(e,t),t++})}),g.rightBottomCornerGroup.forEachChildren(e=>{let t=g.table.rowCount-g.table.bottomFrozenRowCount;null==e||e.forEachChildren(e=>{f(e,t),t++})});let e=iH(s[s.length-1]-1,s[0]-s.length+1,a);l=(0,b.Z)(l)?(0,b.Z)(e)?Math.min(l,e):l:e}if(a.table._clearRowRangeHeightsMap(),function(e){let t=e.proxy,{rowStart:i,rowEnd:r,rowLimit:n,totalRow:l}=t;if(i>r)return t.rowStart=e.table.columnHeaderLevelCount,t.rowEnd=Math.min(l,t.rowStart+n-1),t.currentRow=0;if(i+n-1>l){let i=t.rowStart,r=Math.max(e.table.columnHeaderLevelCount,l-n+1);if(r===i)return;t.rowStart=r,t.rowEnd=Math.min(l,r+n-1),t.currentRow=t.rowEnd+1;let o=i-t.rowStart;for(let i=0;i<o;i++)iL(t.rowStart+i,e);t.rowUpdatePos=t.rowStart}}(a),h.forEach(e=>{let t=function(e,t,i){let r=t.proxy;if(!i){r.bodyBottomRow++;let e=Math.min(r.rowLimit,r.bodyBottomRow-r.bodyTopRow+1);r.totalActualBodyRowCount=e,r.totalRow=r.rowStart+e-1}if(!(e<r.rowStart))return e>r.rowEnd?r.rowEnd-r.rowStart+1<r.rowLimit?(r.rowEnd++,r.currentRow++,iL(e,t),e):void 0:(r.rowEnd-r.rowStart+1<r.rowLimit&&(r.rowEnd++,r.currentRow++,iL(e,t)),e)}(e,a,n);o=null!=o?o:t,u.insert(e)}),function(e){function t(t,i,r){t.row=i,t.setAttribute("y",r);let n=(0,e_.Z)(e.table,t.col,t.row);n?(t.mergeStartCol=n.start.col,t.mergeEndCol=n.end.col,t.mergeStartRow=n.start.row,t.mergeEndRow=n.end.row):(t.mergeStartCol=void 0,t.mergeEndCol=void 0,t.mergeStartRow=void 0,t.mergeEndRow=void 0)}e.bodyGroup.forEachChildren(i=>{let r=e.bodyRowStart,n=e.getCellGroupY(r);null==i||i.forEachChildren(e=>{t(e,r,n),r++,n+=e.attribute.height})}),e.rowHeaderGroup.forEachChildren(i=>{let r=e.bodyRowStart,n=e.getCellGroupY(r);null==i||i.forEachChildren(e=>{t(e,r,n),r++,n+=e.attribute.height})}),e.rightFrozenGroup.forEachChildren(i=>{let r=e.bodyRowStart,n=e.getCellGroupY(r);null==i||i.forEachChildren(e=>{t(e,r,n),r++,n+=e.attribute.height})}),e.bottomFrozenGroup.forEachChildren(i=>{let r=e.table.rowCount-e.table.bottomFrozenRowCount,n=0;null==i||i.forEachChildren(e=>{t(e,r,n),r++,n+=e.attribute.height})}),e.leftBottomCornerGroup.forEachChildren(i=>{let r=e.table.rowCount-e.table.bottomFrozenRowCount,n=0;null==i||i.forEachChildren(e=>{t(e,r,n),r++,n+=e.attribute.height})}),e.rightBottomCornerGroup.forEachChildren(i=>{let r=e.table.rowCount-e.table.bottomFrozenRowCount,n=0;null==i||i.forEachChildren(e=>{t(e,r,n),r++,n+=e.attribute.height})})}(a),h.length){let e=iH(h[0]-1,h[h.length-1]+1,a);l=(0,b.Z)(l)?(0,b.Z)(e)?Math.min(l,e):l:e}let m=new Set;for(let e=0;e<r.colCount;e++)d.forEach(t=>{if(t<r.frozenRowCount){let i=(0,e_.Z)(a.table,e,t);if(i)for(let e=i.start.col;e<=i.end.col;e++)for(let t=i.start.row;t<=i.end.row;t++){let i=`${e}-${t}`;m.has(i)||((0,eA.wW)(e,t,a.table,!1),m.add(i))}else(0,eA.wW)(e,t,a.table,!1)}else if(t>r.rowCount-1||t<a.table.rowCount-a.table.bottomFrozenRowCount&&(t<a.proxy.rowStart||t>a.proxy.rowEnd))iF(t,a);else{let i=(0,e_.Z)(a.table,e,t);if(i)for(let e=i.start.col;e<=i.end.col;e++)for(let t=i.start.row;t<=i.end.row;t++){let i=`${e}-${t}`;m.has(i)||((0,eA.wW)(e,t,a.table,!1),m.add(i))}else(0,eA.wW)(e,t,a.table,!1)}});if(d.length){let e=iH(d[0]-1,d[d.length-1]+1,a);l=(0,b.Z)(l)?(0,b.Z)(e)?Math.min(l,e):l:e}if((0,eM.Z)(o)){for(let e=0;e<Math.max(r.colCount,null!=(c=r.internalProps._oldColCount)?c:r.colCount);e++)for(let t=o;t<Math.max(r.rowCount,null!=(p=r.internalProps._oldRowCount)?p:r.rowCount);t++){let i=a.highPerformanceGetCell(e,t,!0);i&&(i.needUpdate=!0)}l=(0,b.Z)(l)?(0,b.Z)(o)?Math.min(l,o):l:o}if((0,eM.Z)(l)&&(a.proxy.rowUpdatePos=Math.min(a.proxy.rowUpdatePos,l)),h.length){if(!(0,eM.Z)(o)){let e=Math.min(...h);a.proxy.rowUpdatePos=Math.min(e,a.proxy.rowUpdatePos)}a.proxy.rowUpdateDirection="up",a.proxy.updateCellGroups(2*a.proxy.screenRowCount),v()}else s.length&&(function(e,t){if(t.table.isHasSeriesNumber())for(let i=e;i<=t.table.rowCount-1;i++)(0,eA.wW)(0,i,t.table,!1)}(s[s.length-1],a),a.proxy.updateCellGroups(2*a.proxy.screenRowCount),v());a.proxy.progress();let y=r.getRowsHeight(r.frozenRowCount,r.rowCount-1-r.bottomFrozenRowCount);function v(){if((null==h?void 0:h[(null==h?void 0:h.length)-1])>=r.rowCount-r.bottomFrozenRowCount||(null==d?void 0:d[(null==d?void 0:d.length)-1])>=r.rowCount-r.bottomFrozenRowCount||(null==s?void 0:s[0])>=r.rowCount-r.bottomFrozenRowCount){for(let e=0;e<r.colCount;e++)for(let t=r.rowCount-r.bottomFrozenRowCount;t<r.rowCount;t++){let i=a.highPerformanceGetCell(e,t,!0);i&&(i.needUpdate=!0)}a.proxy.updateBottomFrozenCellGroups()}}a.updateContainerHeight(a.table.frozenRowCount,y-a.bodyGroup.attribute.height)}(e,t,i,this.table,n),r&&this.recalculateColWidths(),"adaptive"===this.table.heightMode||this.table.autoFillHeight&&(this.table.getAllRowsHeight()<=this.table.tableNoFrameHeight||a))this.table.scenegraph.recalculateRowHeights();else if(this.table.isAutoRowHeight(this.table.columnHeaderLevelCount))for(let e=0;e<o.length;e++){let t=o[e],i=this.table.rowHeightsMap.get(t),r=(0,eP.P)(t,0,this.table.colCount-1,this.table);(t>=this.proxy.rowStart&&t<=this.proxy.rowEnd||t>=this.table.rowCount-this.table.bottomFrozenRowCount&&t<=this.table.rowCount-1)&&this.table.scenegraph.updateRowHeight(t,r-i)}this.table.stateManager.checkFrozen(),this.isPivot||this.table.transpose?this.table.options.frozenColCount?this.component.setFrozenColumnShadow(this.table.frozenColCount-1):this.table.options.rightFrozenColCount&&this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount):(this.component.setFrozenColumnShadow(this.table.frozenColCount-1),this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount)),this.component.updateScrollBar(),this.updateNextFrame()}updateCol(e,t,i=[]){(function(e,t,i,r){var n,l;let o;iC(r)&&ig(r);let a=r.scenegraph,s=i4(e.map(e=>e.col)).sort((e,t)=>t-e),h=i4(t.map(e=>e.col)).sort((e,t)=>e-t),d=i4(i.map(e=>e.col)).sort((e,t)=>e-t);s.forEach(e=>{!function(e,t){let i=t.proxy;if(e>=t.table.rowHeaderLevelCount)if(e>=t.table.colCount-t.table.rightFrozenColCount);else{let i=t.getColGroup(e,!1);i&&i.parent===t.bodyGroup&&t.bodyGroup.removeChild(i);let r=t.getColGroupInBottom(e);r&&r.parent===t.bottomFrozenGroup&&t.bottomFrozenGroup.removeChild(r);let n=t.getColGroup(e,!0);n&&n.parent===t.colHeaderGroup&&t.colHeaderGroup.removeChild(n)}e>=i.colStart&&e<=i.colEnd&&(i.colEnd--,i.currentCol--),i.bodyRightCol--;let r=Math.min(i.colLimit,i.bodyRightCol-i.bodyLeftCol+1);i.totalActualBodyColCount=r,i.totalCol=i.colStart+r-1}(e,a)});let u=r.colWidthsMap;s.forEach(e=>{u.delAndReorder(e)}),s.length&&i5(a),a.table._clearColRangeWidthsMap(),h.forEach(e=>{let t=function(e,t){let i=t.proxy;i.bodyRightCol++;let r=Math.min(i.colLimit,i.bodyRightCol-i.bodyLeftCol+1);if(i.totalActualBodyColCount=r,i.totalCol=i.colStart+r-1,!(e<i.colStart))return e>i.colEnd?i.colEnd-i.colStart+1<i.colLimit?(i.colEnd++,i.currentCol++,i6(e,t),e):void 0:(i.colEnd-i.colStart+1<i.colLimit&&(i.colEnd++,i.currentCol++,i6(e,t)),e)}(e,a);i5(a),o=null!=o?o:t,u.addAndReorder(e)}),function(e){let t=e.bodyColStart,i=e.getCellGroupX(t);function r(i){i.col=t;let r=(0,e_.Z)(e.table,i.col,i.row);r&&(i.mergeStartCol=r.start.col,i.mergeStartCol=r.start.col,i.mergeEndCol=r.end.col,i.mergeEndCol=r.end.col),i.role}e.bodyGroup.forEachChildren(e=>{e.col=t,null==e||e.forEachChildren(e=>{r(e)}),e.setAttribute("x",i),i+=e.attribute.width,t++}),t=e.bodyColStart,i=e.getCellGroupX(t),e.colHeaderGroup.forEachChildren(e=>{e.col=t,null==e||e.forEachChildren(e=>{r(e)}),e.setAttribute("x",i),i+=e.attribute.width,t++}),t=e.bodyColStart,i=e.getCellGroupX(t),e.bottomFrozenGroup.forEachChildren(e=>{e.col=t,null==e||e.forEachChildren(e=>{r(e)}),e.setAttribute("x",i),i+=e.attribute.width,t++}),t=e.table.colCount-e.table.rightFrozenColCount,i=0,e.rightFrozenGroup.forEachChildren(e=>{e.col=t,null==e||e.forEachChildren(e=>{r(e)}),e.setAttribute("x",i),i+=e.attribute.width,t++}),t=e.table.colCount-e.table.rightFrozenColCount,i=0,e.rightTopCornerGroup.forEachChildren(e=>{e.col=t,null==e||e.forEachChildren(e=>{r(e)}),e.setAttribute("x",i),i+=e.attribute.width,t++}),t=e.table.colCount-e.table.rightFrozenColCount,i=0,e.rightBottomCornerGroup.forEachChildren(e=>{e.col=t,null==e||e.forEachChildren(e=>{r(e)}),e.setAttribute("x",i),i+=e.attribute.width,t++})}(a);let c=new Set;if(d.forEach(e=>{for(let t=0;t<r.rowCount;t++){let i=(0,e_.Z)(a.table,e,t);if(i)for(let e=i.start.col;e<=i.end.col;e++)for(let e=i.start.col;e<=i.end.col;e++){let i=`${e}-${t}`;c.has(i)||((0,eA.wW)(e,t,a.table,!1),c.add(i))}else(0,eA.wW)(e,t,a.table,!1)}}),(0,eM.Z)(o)){for(let e=o;e<Math.max(r.colCount,null!=(n=r.internalProps._oldColCount)?n:r.colCount);e++)for(let t=0;t<Math.max(r.rowCount,null!=(l=r.internalProps._oldRowCount)?l:r.rowCount);t++){let i=a.highPerformanceGetCell(e,t,!0);i&&(i.needUpdate=!0)}a.proxy.colUpdatePos=o}if(h.length){if(!(0,eM.Z)(o)){let e=Math.min(...h);a.proxy.colUpdatePos=e}a.proxy.colUpdateDirection="left",a.proxy.updateColGroups(2*a.proxy.screenColCount),g(),a.proxy.progress()}else s.length&&(a.proxy.updateColGroups(2*a.proxy.screenColCount),g(),a.proxy.progress());let p=r.getColsWidth(r.frozenColCount,r.colCount-1);function g(){if((null==h?void 0:h[(null==h?void 0:h.length)-1])>=r.colCount-r.rightFrozenColCount||(null==d?void 0:d[(null==d?void 0:d.length)-1])>=r.colCount-r.rightFrozenColCount||(null==s?void 0:s[0])>=r.colCount-r.rightFrozenColCount){for(let e=r.colCount-r.rightFrozenColCount;e<r.colCount;e++)for(let t=0;t<r.rowCount;t++){let i=a.highPerformanceGetCell(e,t,!0);i&&(i.needUpdate=!0)}a.proxy.updateRightFrozenCellGroups()}}a.updateContainerWidth(a.table.frozenColCount,p-a.bodyGroup.attribute.width)})(e,t,i,this.table),this.recalculateColWidths(),this.recalculateRowHeights(),this.table.stateManager.checkFrozen(),this.isPivot||this.table.transpose?this.table.options.frozenColCount?this.component.setFrozenColumnShadow(this.table.frozenColCount-1):this.table.options.rightFrozenColCount&&this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount):(this.component.setFrozenColumnShadow(this.table.frozenColCount-1),this.component.setRightFrozenColumnShadow(this.table.colCount-this.table.rightFrozenColCount)),this.component.updateScrollBar(),this.updateNextFrame()}updateCornerHeaderCells(){for(let e=0;e<this.table.frozenColCount;e++)for(let t=0;t<this.table.frozenRowCount;t++)(0,eA.wW)(e,t,this.table,!1)}updateRowHeaderCells(){for(let e=0;e<this.table.frozenColCount;e++)for(let t=this.table.frozenRowCount;t<this.table.rowCount;t++)(0,eA.wW)(e,t,this.table,!1)}updateColumnHeaderCells(){for(let e=0;e<this.table.frozenRowCount;e++)for(let t=this.table.frozenColCount;t<this.table.colCount;t++)(0,eA.wW)(t,e,this.table,!1)}getColumnGroupX(e){return e<this.table.rowHeaderLevelCount?this.table.getColsWidth(0,e-1):e<this.table.colCount-this.table.rightFrozenColCount?this.table.getColsWidth(this.table.rowHeaderLevelCount,e-1):e<this.table.colCount?this.table.getColsWidth(this.table.colCount-this.table.bottomFrozenRowCount,e-1):0}getCellGroupY(e){return e<this.table.frozenRowCount?this.table.getRowsHeight(0,e-1):e<this.table.rowCount-this.table.bottomFrozenRowCount?this.table.getRowsHeight(this.table.columnHeaderLevelCount,e-1):e<this.table.rowCount?this.table.getRowsHeight(this.table.rowCount-this.table.bottomFrozenRowCount,e-1):0}getCellGroupX(e){return e<this.table.rowHeaderLevelCount?this.table.getColsWidth(0,e-1):e<this.table.colCount-this.table.rightFrozenColCount?this.table.getColsWidth(this.table.rowHeaderLevelCount,e-1):e<this.table.colCount?this.table.getColsWidth(this.table.colCount-this.table.rightFrozenColCount,e-1):0}updateDomContainer(){!function(e){let{headerDomContainer:t,bodyDomContainer:i,frozenBodyDomContainer:r,frozenHeaderDomContainer:n,rightFrozenBodyDomContainer:l,rightFrozenHeaderDomContainer:o,bottomDomContainer:a,frozenBottomDomContainer:s,rightFrozenBottomDomContainer:h}=e.internalProps;if(!(t||i||r||n||l||o||a||s||h))return;let d=e.getAllColsWidth(),u=Math.min(d,e.tableNoFrameWidth),c=e.getFrozenColsWidth(),p=e.getRightFrozenColsWidth(),g=c+p,f=Math.min(d-g,u-g),m=e.getAllRowsHeight(),b=Math.min(m,e.tableNoFrameHeight),y=e.getFrozenRowsHeight(),v=e.getBottomFrozenRowsHeight(),_=y+v,C=Math.min(m-_,b-_);e.frozenColCount>0?(t.style.left=`${e.tableX+c}px`,i.style.left=`${e.tableX+c}px`,a.style.left=`${e.tableX+c}px`):0===e.frozenColCount&&(t.style.left=`${e.tableX}px`,i.style.left=`${e.tableX}px`,a.style.left=`${e.tableX}px`),r.style.left=`${e.tableX}px`,n.style.left=`${e.tableX}px`,t.style.width=`${f}px`,t.style.height=`${y}px`,i.style.top=`${e.tableY}px`,i.style.width=`${f}px`,i.style.height=`${C}px`,i.style.top=`${e.tableY+y}px`,r.style.width=`${c}px`,r.style.height=`${C}px`,r.style.top=`${e.tableY+y}px`,n.style.width=`${c}px`,n.style.height=`${y}px`,n.style.top=`${e.tableY}px`,l.style.width=`${p}px`,l.style.height=`${C}px`,l.style.top=`${e.tableY+y}px`,l.style.left=e.tableX+u-p+"px",o.style.width=`${p}px`,o.style.height=`${y}px`,o.style.top=`${e.tableY}px`,o.style.left=e.tableX+u-p+"px",a.style.width=`${f}px`,a.style.height=`${v}px`,a.style.top=e.tableY+b-v+"px",s.style.width=`${c}px`,s.style.height=`${v}px`,s.style.top=e.tableY+b-v+"px",h.style.width=`${p}px`,h.style.height=`${v}px`,h.style.top=e.tableY+b-v+"px",h.style.left=e.tableX+u-p+"px"}(this.table)}setLoadingHierarchyState(e,t){let i=this.getCell(e,t),r=i.getChildByName("collapse",!0)||i.getChildByName("expand",!0);if(r){let i=eX.U2()[ev.up.loadingIconName];i&&(0,eE.Bg)(i,r,e,t)}}temporarilyUpdateSelectRectStyle(e){let{selectedRangeComponents:t}=this;t.forEach((t,i)=>{t.rect.setAttributes(e)}),this.updateNextFrame()}resetSelectRectStyle(){this.recreateAllSelectRangeComponents()}}function i7(e,t,i){let r=e.highPerformanceGetCell(t,i);if("cell"===r.role&&(0,b.Z)(r.mergeStartCol)&&(0,b.Z)(r.mergeStartRow)&&(0,b.Z)(r.mergeEndCol)&&(0,b.Z)(r.mergeEndRow)){let{colStart:t,colEnd:i,rowStart:n,rowEnd:l}=(0,eB.e)(r,e);for(let r=t;r<=i;r++)for(let t=n;t<=l;t++){let i=e.highPerformanceGetCell(r,t);"cell"===i.role&&i.addUpdateBoundTag()}}else r.addUpdateBoundTag()}function i9(e,t,i,r,n){let l=e.table;for(let i=0;i<l.columnHeaderLevelCount;i++)i7(e,t,i);let o=e.getColGroup(t);return null==o||o.addUpdateBoundTag(),!0}function re(e,t,i,r,n,l){let o=e.table;for(let i=0;i<o.columnHeaderLevelCount;i++)i7(e,t,i);let a=e.getColGroup(t);return null==a||a.addUpdateBoundTag(),!0}function rt(e,t,i,r,n){let l=e.table;for(let t=0;t<l.colCount;t++)i7(e,t,i);return!0}function ri(e,t,i,r,n,l){let o=e.table;for(let t=0;t<o.colCount;t++)i7(e,t,i);return!0}function rr(e,t,i,r,n){return n._getLayoutCellId(e,t)===n._getLayoutCellId(i,r)}var rn=i(15240),rl=i(63401),ro=i(80971),ra=i(33154);function rs(e,t,i,r,n){for(let i=e;i<=t;i++)n._clearColRangeWidthsMap(i);for(let e=i;e<=r;e++)n._clearRowRangeHeightsMap(e)}function rh(e){var t;if(!e)return;let i=(null==(t=e.role)?void 0:t.startsWith("icon"))?e:"richtext"===e.type?e._currentHoverIcon:void 0;return i?"richtext"===e.type?{icon:i,position:{left:e.globalAABBBounds.x1+i.globalAABBBounds.x1,right:e.globalAABBBounds.x1+i.globalAABBBounds.x2,top:e.globalAABBBounds.y1+i.globalAABBBounds.y1,bottom:e.globalAABBBounds.y1+i.globalAABBBounds.y2,width:i.globalAABBBounds.x2-i.globalAABBBounds.x1,height:i.globalAABBBounds.y2-i.globalAABBBounds.y1},type:"richtext-icon"}:{icon:i,position:{left:i.globalAABBBounds.x1,right:i.globalAABBBounds.x2,top:i.globalAABBBounds.y1,bottom:i.globalAABBBounds.y2,width:i.globalAABBBounds.x2-i.globalAABBBounds.x1,height:i.globalAABBBounds.y2-i.globalAABBBounds.y1},type:"icon"}:void 0}var rd=i(57886);function ru(e,t){"adaptive"===t.table.widthMode&&t.columnResize.col<t.table.colCount-1?(t.table.scenegraph.updateColWidth(t.columnResize.col,e),t.table.scenegraph.updateColWidth(t.columnResize.col+1,-e),t.table.internalProps._widthResizedColMap.add(t.columnResize.col),t.table.internalProps._widthResizedColMap.add(t.columnResize.col+1)):(t.table.scenegraph.updateColWidth(t.columnResize.col,e),t.table.internalProps._widthResizedColMap.add(t.columnResize.col))}var rc=i(1999),rp=i(76659);function rg(e,t){"adaptive"===t.table.heightMode&&t.rowResize.row<t.table.rowCount-1?(t.table.scenegraph.updateRowHeight(t.rowResize.row,e),t.table.scenegraph.updateRowHeight(t.rowResize.row+1,-e),t.table.internalProps._heightResizedRowMap.add(t.rowResize.row),t.table.internalProps._heightResizedRowMap.add(t.rowResize.row+1)):(t.table.scenegraph.updateRowHeight(t.rowResize.row,e),t.table.internalProps._heightResizedRowMap.add(t.rowResize.row))}function rf(e,t,i,r,n,l,o,a,s){var h,d,u,c;let p=Math.min(t,r),g=Math.min(i,n),f=Math.max(t,r),m=Math.max(i,n),b=e.highPerformanceGetCell(p,g).globalAABBBounds,y=(0,eN.f)({pickable:!1,fill:null!=(h=s.cellBgColor)&&h,lineWidth:null!=(d=s.cellBorderLineWidth)?d:0,lineDash:null!=(u=s.cellBorderLineDash)?u:[],stroke:a.map(e=>!!e&&s.cellBorderColor),x:b.x1-e.tableGroup.attribute.x,y:b.y1-e.tableGroup.attribute.y,width:0,height:0,visible:!0,cornerRadius:iE(l,null==(c=e.table.theme.frameStyle)?void 0:c.cornerRadius,t,i,r,n,e.table)});e.customSelectedRangeComponents.set(`${p}-${g}-${f}-${m}-${o}`,{rect:y,role:l}),e.tableGroup.insertAfter(y,"body"===l?e.bodyGroup:"columnHeader"===l?e.colHeaderGroup:"rowHeader"===l?e.rowHeaderGroup:"cornerHeader"===l?e.cornerHeaderGroup:"rightTopCorner"===l?e.rightTopCornerGroup:"rightFrozen"===l?e.rightFrozenGroup:"leftBottomCorner"===l?e.leftBottomCornerGroup:"bottomFrozen"===l?e.bottomFrozenGroup:e.rightBottomCornerGroup)}class rm{constructor(e){this.fastScrolling=!1,this.checkedState=new Map,this.headerCheckedState={},this._checkboxCellTypeFields=[],this._headerCheckFuncs={},this.radioState={},this.resetInteractionState=(0,rd.D)(e=>{this.updateInteractionState(null!=e?e:E.F.default)},100),this.table=e,this.initState(),this.updateVerticalScrollBar=this.updateVerticalScrollBar.bind(this),this.updateHorizontalScrollBar=this.updateHorizontalScrollBar.bind(this)}initState(){this._initState(),this.setHoverState(),this.setSelectState(),this.setFrozenState()}updateOptionSetState(){this._updateOptionSetState(),this.setHoverState(),this.setSelectState(),this.setFrozenState()}_updateOptionSetState(){this.interactionState=E.F.default,this.hoverIcon={col:-1,row:-1,icon:null},this.columnResize={col:-1,x:0,resizing:!1},this.rowResize={row:-1,y:0,resizing:!1},this.columnMove={colSource:-1,colTarget:-1,rowSource:-1,rowTarget:-1,rowSourceSize:0,rowTargetSize:0,x:0,y:0,moving:!1,movingColumnOrRow:void 0},this.menu={x:-1,y:-1,isShow:!1,itemList:[],bounds:new rl.YZ,highlightIndex:-1,dropDownMenuHighlight:[]},this.sort=[{col:-1,row:-1,order:"normal"}],this.frozen={col:-1,row:-1},this.tablePosition={absoluteX:0,absoluteY:0},this.drill={col:-1,row:-1},this.sparkLine={col:-1,row:-1}}_initState(){this.interactionState=E.F.default,this.select={highlightScope:E.p.single,ranges:[],cellPos:{col:-1,row:-1},selecting:!1},this.fillHandle={isFilling:!1,startX:void 0,startY:void 0},this.hover={highlightScope:E.p.single,cellPos:{col:-1,row:-1}},this.hoverIcon={col:-1,row:-1,icon:null},this.columnResize={col:-1,x:0,resizing:!1},this.rowResize={row:-1,y:0,resizing:!1},this.columnMove={colSource:-1,colTarget:-1,rowSource:-1,rowTarget:-1,rowSourceSize:0,rowTargetSize:0,x:0,y:0,moving:!1,movingColumnOrRow:void 0},this.menu={x:-1,y:-1,isShow:!1,itemList:[],bounds:new rl.YZ,highlightIndex:-1,dropDownMenuHighlight:[]},this.sort=[{col:-1,row:-1,order:"normal"}],this.frozen={col:-1,row:-1},this.scroll={horizontalBarPos:0,verticalBarPos:0},this.tablePosition={absoluteX:0,absoluteY:0},this.drill={col:-1,row:-1},this.sparkLine={col:-1,row:-1}}setHoverState(){var e;let{highlightMode:t,disableHover:i,disableHeaderHover:r}=null!=(e=this.table.options.hover)?e:{highlightMode:"cell"};i?this.hover.highlightScope=E.p.none:"cross"===t?this.hover.highlightScope=E.p.cross:"row"===t?this.hover.highlightScope=E.p.row:"column"===t?this.hover.highlightScope=E.p.column:"cell"===t&&(this.hover.highlightScope=E.p.single),this.hover.singleStyle=!i,this.hover.disableHeader=r,(this.hover.highlightScope===E.p.none||r)&&(this.hover.cellPosContainHeader={col:-1,row:-1})}setSelectState(){var e,t,i,r,n,l;let{headerSelectMode:o,disableSelect:a,disableHeaderSelect:s,highlightMode:h,highlightInRange:d}=Object.assign({},{headerSelectMode:"inline",disableSelect:!1,disableHeaderSelect:!1,highlightMode:"cell",highlightInRange:!1},this.table.options.select),u=(null==(e=this.table.options.select)?void 0:e.cornerHeaderSelectMode)?null==(t=this.table.options.select)?void 0:t.cornerHeaderSelectMode:"body"===(null==(i=this.table.options.select)?void 0:i.headerSelectMode)?null==(r=this.table.options.select)?void 0:r.headerSelectMode:"all";this.select.highlightScope=!0===a?E.p.none:"cross"===h?E.p.cross:"row"===h?E.p.row:"column"===h?E.p.column:E.p.single,this.select.singleStyle=!a,this.select.disableHeader=s,this.select.headerSelectMode=o,this.select.cornerHeaderSelectMode=u,this.select.highlightInRange=d,this.select.disableCtrlMultiSelect=!1===(null==(n=this.table.options.keyboardOptions)?void 0:n.ctrlMultiSelect),this.select.disableShiftMultiSelect=!1===(null==(l=this.table.options.keyboardOptions)?void 0:l.shiftMultiSelect)}isSelected(e,t){let i=!1;return this.select.ranges.forEach(r=>{(0,P._Z)(r,e,t)&&(i=!0)}),i}setSortState(e){let t=this,i=(e=!e||Array.isArray(e)?e:[e])&&e.reduce((e,i)=>{var r,n,l;let o=null==(r=function(e){let i=[];return function e(r,n=0){r.forEach(r=>{var l;let o=r.startInTotal?null!=(l=r.startInTotal+t.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount)?l:0:n;r.columns?e(r.columns,o):i.push(Object.assign(Object.assign({},r),{startIndex:o}))})}(e),i}(this.table.internalProps.columns))?void 0:r.find(e=>(null==e?void 0:e.field)===(null==i?void 0:i.field));return this.table.internalProps.transpose?e.push({field:i.field,order:i.order,row:null!=(n=(null==o?void 0:o.startInTotal)+this.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount)?n:0,col:null==o?void 0:o.level}):e.push({field:i.field,order:i.order,col:null!=(l=(null==o?void 0:o.startInTotal)+this.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount)?l:0,row:null==o?void 0:o.level}),e},[]);this.sort=i||[]}setFrozenState(){this.frozen.col=this.table.frozenColCount-1}updateInteractionState(e){if(this.interactionState===e)return;e===E.F.scrolling&&(this.interactionStateBeforeScroll=this.interactionState);let t=this.interactionState;this.interactionState=e,t===E.F.scrolling&&E.F.default}updateHoverhighlightScope(e){this.hover.highlightScope!==e&&(this.hover.highlightScope=e)}updateHoverPos(e,t){!function(e,t,i){var r;let{table:n}=e,{scenegraph:l}=n,{highlightScope:o,singleStyle:a,disableHeader:s,cellPos:h,cellPosContainHeader:d}=e.hover,u=h.col,c=h.row;if(o===E.p.none||s&&(d.col!==t||d.row!==i)){let e=d.col,r=d.row;l.hideHoverIcon(e,r),l.showHoverIcon(t,i),d.col=t,d.row=i}if((s&&n.isHeader(t,i)||o===E.p.none)&&(t=-1,i=-1),u===t&&c===i)return;h.col=t,h.row=i,(null==(r=e.table.options.customConfig)?void 0:r.disableBuildInChartActive)||(l.deactivateChart(u,c),l.activateChart(t,i));let p=!1,{ranges:g,highlightScope:f}=e.select;if(-1!==u&&-1!==c&&(p=function(e,t,i,r,n,l,o){let a=!1;return l===E.p.single?(i7(e,t,i),a=!0):l===E.p.row?a=!!rt(e,t,i,r,o)||a:l===E.p.column?a=!!i9(e,t,i,r,o)||a:l===E.p.cross&&(a=!!rt(e,t,i,r,o)||a,a=!!i9(e,t,i,r,o)||a),a}(l,u,c,g,0,o,f),s||l.hideHoverIcon(u,c)),-1===t||-1===i)return h.col=-1,h.row=-1,!p||u===t&&c===i||e.table.scenegraph.updateNextFrame();o===E.p.single?(i7(l,t,i),p=!0):o===E.p.row?p=!!ri(l,t,i,g,f,a)||p:o===E.p.column?p=!!re(l,t,i,g,f,a)||p:o===E.p.cross&&(p=!!ri(l,t,i,g,f,a)||p,p=!!re(l,t,i,g,f,a)||p),o===E.p.none||s||l.showHoverIcon(t,i),p&&e.table.scenegraph.updateNextFrame()}(this,e,t)}updateSelectPos(e,t,i=!1,r=!1,n=!1,l=!0,o=!1){-1!==t&&-1!==t&&(this.select.selecting=!0),e<0&&(e=-1),t<0&&(t=-1),e>this.table.colCount-1&&(e=this.table.colCount-1),t>this.table.rowCount-1&&(t=this.table.rowCount-1);let a=this.select.cellPos.col,s=this.select.cellPos.row;(function(e,t,i,r,n,l,o=!0,a=!1){var s,h;let{table:d,interactionState:u}=e,{scenegraph:c}=d,{cellPos:p}=e.select;if(e.select.isSelectAll=l,-1!==t&&-1!==i&&o&&d._makeVisibleCell(t,i),-1!==t&&-1!==i&&o)if(u===E.F.grabing&&e.select.ranges.length>0){let r=e.select.ranges[e.select.ranges.length-1];t>r.start.col&&t>r.end.col&&d._makeVisibleCell(t+1,i),i>r.start.row&&i>r.end.row&&d._makeVisibleCell(t,i+1),t<r.start.col&&t<r.end.col&&d._makeVisibleCell(t-1,i),i<r.start.row&&i<r.end.row&&d._makeVisibleCell(t,i-1)}else d._makeVisibleCell(t,i);if(l){e.select.ranges=[],c.deleteAllSelectBorder();let t=0,i=0,{disableHeaderSelect:r,disableRowSeriesNumberSelect:n}=(null==(s=d.options.keyboardOptions)?void 0:s.selectAllOnCtrlA)||{};r&&(t=d.rowHeaderLevelCount,i=d.columnHeaderLevelCount),(n||r&&d.transpose)&&d.options.rowSeriesNumber&&(t+=1),e.select.ranges.push({start:{col:t,row:i},end:{col:d.colCount-1,row:d.rowCount-1}});let l=e.select.ranges[e.select.ranges.length-1];c.updateCellSelectBorder(l,!1)}else if(-1===p.col||-1===p.row||-1!==t&&-1!==i)if(u!==E.F.default||d.eventManager.isDraging||d.stateManager.isResizeCol()){if((u===E.F.grabing||d.eventManager.isDraging)&&!d.stateManager.isResizeCol()){let r=!(0,b.Z)(a)||!a;-1===p.col&&(p.col=t),-1===p.row&&(p.row=i),p.col=t,p.row=i;let n=e.select.ranges[e.select.ranges.length-1];if(n){if(d.internalProps.layoutMap.isSeriesNumberInBody(n.start.col,n.start.row))r=!1,n.end={col:d.colCount-1,row:i};else if(e.fillHandle.isFilling){if("top"===e.fillHandle.direction)if(i===e.fillHandle.beforeFillMinRow&&i===e.fillHandle.beforeFillMaxRow)n.start.row=n.end.row=i;else if(i<=e.fillHandle.beforeFillMinRow){if(n.start.row<n.end.row){let e=n.start.row;n.start.row=n.end.row,n.end.row=e}n.end.row=i}else i===e.fillHandle.beforeFillMaxRow&&(n.start.row>n.end.row?n.start.row=i:n.end.row=i);else if("bottom"===e.fillHandle.direction){if(i>=e.fillHandle.beforeFillMaxRow){if(n.start.row>n.end.row){let e=n.start.row;n.start.row=n.end.row,n.end.row=e}n.end.row=i}}else if("left"===e.fillHandle.direction)if(t===e.fillHandle.beforeFillMinCol&&t===e.fillHandle.beforeFillMaxCol)n.start.col=n.end.col=t;else if(t<=e.fillHandle.beforeFillMinCol){if(n.start.col<n.end.col){let e=n.start.col;n.start.col=n.end.col,n.end.col=e}n.end.col=t}else t===e.fillHandle.beforeFillMaxCol&&(n.start.col>n.end.col?n.start.col=t:n.end.col=t);else if("right"===e.fillHandle.direction&&t>=e.fillHandle.beforeFillMaxCol){if(n.start.col>n.end.col){let e=n.start.col;n.start.col=n.end.col,n.end.col=e}n.end.col=t}}else{n.end={col:t,row:i};let r=a?{start:{col:t,row:i},end:{col:t,row:i}}:d.getCellRange(t,i);n.start.col<r.end.col?n.end.col=r.end.col:n.start.col>r.start.col&&(n.end.col=r.start.col),n.start.row<r.end.row?n.end.row=r.end.row:n.start.row>r.start.row&&(n.end.row=r.start.row),"body"===e.select.headerSelectMode&&(d.isRowHeader(t,i)?(n.start.col=d.rowHeaderLevelCount+d.leftRowSeriesNumberCount,n.end.col=d.colCount-1):d.isColumnHeader(t,i)?(n.start.row=d.columnHeaderLevelCount,n.end.row=d.rowCount-1):d.internalProps.layoutMap.isSeriesNumberInBody(t,i)?(n.start.col=d.leftRowSeriesNumberCount,n.end.col=d.colCount-1):d.isCornerHeader(t,i)?(n.start.col=d.rowHeaderLevelCount+d.leftRowSeriesNumberCount,n.start.row=d.columnHeaderLevelCount,n.end.col=d.colCount-1,n.end.row=d.rowCount-1):d.isSeriesNumber(t,i)&&(n.start.col=d.leftRowSeriesNumberCount,n.start.row=d.columnHeaderLevelCount,n.end.col=d.colCount-1,n.end.row=d.rowCount-1)),a&&(n.skipBodyMerge=!0)}n&&n.start.row<=d.rowCount-1&&n.end.row<=d.rowCount-1&&n.start.col<=d.colCount-1&&n.end.col<=d.colCount-1&&c.updateCellSelectBorder(n,r)}}}else{let l=e.select.ranges[e.select.ranges.length-1];if(r&&l){if("cell"!==e.select.headerSelectMode&&d.isColumnHeader(t,i)){let r=Math.min(l.start.col,l.end.col,t),n=Math.max(l.start.col,l.end.col,t),o=Math.min(l.start.row,l.end.row,i),a=d.rowCount-1;"body"===e.select.headerSelectMode?(l.start={col:r,row:d.columnHeaderLevelCount},l.end={col:n,row:d.rowCount-1}):(l.start={col:r,row:o},l.end={col:n,row:a})}else if("cell"!==e.select.headerSelectMode&&d.isRowHeader(t,i)){let r=Math.min(l.start.col,l.end.col,t),n=d.colCount-1,o=Math.min(l.start.row,l.end.row,i),a=Math.max(l.start.row,l.end.row,i);"body"===e.select.headerSelectMode?(l.start={col:d.leftRowSeriesNumberCount+d.rowHeaderLevelCount,row:o},l.end={col:d.colCount-1,row:a}):(l.start={col:r,row:o},l.end={col:n,row:a})}else if("cell"!==e.select.headerSelectMode&&d.isSeriesNumberInBody(t,i)){let r=Math.min(l.start.col,l.end.col,t),n=d.colCount-1,o=Math.min(l.start.row,l.end.row,i),a=Math.max(l.start.row,l.end.row,i);"body"===e.select.headerSelectMode?(l.start={col:d.leftRowSeriesNumberCount,row:o},l.end={col:d.colCount-1,row:a}):(l.start={col:r,row:o},l.end={col:n,row:a})}else l.end={col:t,row:i};r||(l.end=l.start),c.deleteLastSelectedRangeComponents(),c.updateCellSelectBorder(l)}else{let r=!(0,b.Z)(a)||!a;if(-1===p.col||-1===p.row||n||(e.select.ranges=[],c.deleteAllSelectBorder()),"cell"!==e.select.headerSelectMode&&d.isColumnHeader(t,i)){let r=d.getCellRange(t,i);"body"===e.select.headerSelectMode?e.select.ranges.push({start:{col:r.start.col,row:d.columnHeaderLevelCount},end:{col:r.end.col,row:d.rowCount-1},skipBodyMerge:!0}):e.select.ranges.push({start:{col:r.start.col,row:r.start.row},end:{col:r.end.col,row:d.rowCount-1},skipBodyMerge:!0})}else if("cell"!==e.select.headerSelectMode&&d.isRowHeader(t,i)){let r=d.getCellRange(t,i);"body"===e.select.headerSelectMode?e.select.ranges.push({start:{col:d.rowHeaderLevelCount+d.leftRowSeriesNumberCount,row:r.start.row},end:{col:d.colCount-1,row:r.end.row},skipBodyMerge:!0}):e.select.ranges.push({start:{col:r.start.col,row:r.start.row},end:{col:d.colCount-1,row:r.end.row},skipBodyMerge:!0})}else if(d.internalProps.layoutMap.isSeriesNumberInHeader(t,i)){r=!1;let{cornerHeaderSelectMode:n}=e.select;if("body"===n)e.select.ranges.push({start:{col:d.leftRowSeriesNumberCount,row:d.columnHeaderLevelCount},end:{col:d.colCount-1,row:d.rowCount-1},skipBodyMerge:!0});else if("inline"===n){let r=a?{start:{col:t,row:i},end:{col:t,row:i}}:d.getCellRange(t,i);e.select.ranges.push({start:{col:r.start.col,row:r.start.row},end:{col:r.end.col,row:d.rowCount-1},skipBodyMerge:!0})}else if("cell"===n){let r=a?{start:{col:t,row:i},end:{col:t,row:i}}:d.getCellRange(t,i);e.select.ranges.push({start:{col:r.start.col,row:r.start.row},end:{col:r.end.col,row:r.end.row},skipBodyMerge:a||void 0})}else e.select.ranges.push({start:{col:0,row:0},end:{col:d.colCount-1,row:d.rowCount-1},skipBodyMerge:!0})}else if(d.internalProps.layoutMap.isSeriesNumberInBody(t,i))r=!1,"body"===e.select.headerSelectMode?e.select.ranges.push({start:{col:d.leftRowSeriesNumberCount,row:i},end:{col:d.colCount-1,row:i},skipBodyMerge:!0}):e.select.ranges.push({start:{col:t,row:i},end:{col:d.colCount-1,row:i},skipBodyMerge:!0});else if(d.internalProps.layoutMap.isCornerHeader(t,i)){r=!1;let{cornerHeaderSelectMode:n}=e.select;if("body"===n)e.select.ranges.push({start:{col:d.rowHeaderLevelCount+d.leftRowSeriesNumberCount,row:d.columnHeaderLevelCount},end:{col:d.colCount-1,row:d.rowCount-1},skipBodyMerge:!0});else if("cell"===n){let r=a?{start:{col:t,row:i},end:{col:t,row:i}}:d.getCellRange(t,i);e.select.ranges.push({start:{col:r.start.col,row:r.start.row},end:{col:r.end.col,row:r.end.row},skipBodyMerge:a||void 0})}else if("inline"===n){let r=a?{start:{col:t,row:i},end:{col:t,row:i}}:d.getCellRange(t,i);e.select.ranges.push({start:{col:r.start.col,row:r.start.row},end:{col:r.end.col,row:d.rowCount-1},skipBodyMerge:!0})}else e.select.ranges.push({start:{col:d.leftRowSeriesNumberCount,row:0},end:{col:d.colCount-1,row:d.rowCount-1},skipBodyMerge:!0})}else if(t>=0&&i>=0){let r=a?{start:{col:t,row:i},end:{col:t,row:i}}:d.getCellRange(t,i);e.select.ranges.push({start:{col:r.start.col,row:r.start.row},end:{col:r.end.col,row:r.end.row},skipBodyMerge:a||void 0})}p.col=t,p.row=i;let l=null==(h=e.select.ranges)?void 0:h[e.select.ranges.length-1];l&&l.start.row<=d.rowCount-1&&l.end.row<=d.rowCount-1&&l.start.col<=d.colCount-1&&l.end.col<=d.colCount-1&&c.updateCellSelectBorder(l,r)}}else p.col=-1,p.row=-1,e.select.ranges=[],c.deleteAllSelectBorder();c.updateNextFrame()})(this,e,t,i,r,n,l,o),this.table.hasListeners(B.B.SELECTED_CHANGED)&&(a!==e||s!==t)&&this.table.fireListeners(B.B.SELECTED_CHANGED,{ranges:this.select.ranges,col:e,row:t})}checkCellRangeInSelect(e,t){return function(e,t,i,r){for(let r=0;r<i.length;r++){let n=i[r];if((0,P.ib)(n,{start:e,end:t}))return!0}return!1}(e,t,this.select.ranges,this.select.highlightScope)}updateHoverIcon(e,t,i,r){var n,l,o,a,s,h,d,u,c;if((null==(n=this.residentHoverIcon)?void 0:n.icon)&&i===(null==(l=this.residentHoverIcon)?void 0:l.icon))return;let p=rh(i);if(p)if("richtext-icon"===p.type){let i=p.icon;if(this.hoverIcon.icon&&this.hoverIcon.icon!==(null==(a=this.residentHoverIcon)?void 0:a.icon)&&(this.table.scenegraph.setIconNormalStyle(this.hoverIcon.icon,this.hoverIcon.col,this.hoverIcon.row),this.hoverIcon.col=-1,this.hoverIcon.col=-1,this.hoverIcon.icon=null,this.table.scenegraph.updateNextFrame()),i.attribute.tooltip){let r={content:i.attribute.tooltip.title,referencePosition:{rect:p.position,placement:i.attribute.tooltip.placement},style:Object.assign({},null==(s=this.table.internalProps.theme)?void 0:s.tooltipStyle,null==(h=i.tooltip)?void 0:h.style,null==(u=null==(d=i.attribute)?void 0:d.tooltip)?void 0:u.style),disappearDelay:i.attribute.tooltip.disappearDelay};this.table.internalProps.tooltipHandler.isBinded(r)||this.table.showTooltip(e,t,r)}}else{let i=p.icon;i!==this.hoverIcon.icon&&(this.hoverIcon.icon&&this.hoverIcon.icon!==(null==(c=this.residentHoverIcon)?void 0:c.icon)&&this.table.scenegraph.setIconNormalStyle(this.hoverIcon.icon,this.hoverIcon.col,this.hoverIcon.row),this.hoverIcon.col=e,this.hoverIcon.row=t,this.hoverIcon.icon=i,this.table.scenegraph.setIconHoverStyle(i,e,t,r),this.table.scenegraph.updateNextFrame())}else this.hoverIcon.icon&&this.hoverIcon.icon!==(null==(o=this.residentHoverIcon)?void 0:o.icon)&&(this.table.scenegraph.setIconNormalStyle(this.hoverIcon.icon,this.hoverIcon.col,this.hoverIcon.row),this.hoverIcon.col=-1,this.hoverIcon.col=-1,this.hoverIcon.icon=null,this.table.scenegraph.updateNextFrame())}isResizeCol(){return this.columnResize.resizing}isResizeRow(){return this.rowResize.resizing}isFillHandle(){return this.fillHandle.isFilling}isSelecting(){return this.select.selecting}endSelectCells(e=!0,t=!0){if(this.select.selecting){if(this.select.selecting=!1,0===this.select.ranges.length)return;let t=this.select.ranges[this.select.ranges.length-1];this.table.isSeriesNumber(this.select.cellPos.col,this.select.cellPos.row)||this.table.isHeader(this.select.cellPos.col,this.select.cellPos.row)||this.table.isSeriesNumberInBody(t.start.col,t.start.row)||(0,eB.T)(t,this.table);let i=!1;for(let e=0;e<this.select.ranges.length-1;e++){let r=this.select.ranges[e];if(r&&r.start.col===t.start.col&&r.start.row===t.start.row&&r.end.col===t.end.col&&r.end.row===t.end.row){i=!0;break}}i?(this.select.ranges.pop(),iI(this.table.scenegraph),this.table.scenegraph.selectingRangeComponents.clear()):this.table.scenegraph.moveSelectingRangeComponentsToSelectedRangeComponents();let r=this.select.ranges[this.select.ranges.length-1].end.col,n=this.select.ranges[this.select.ranges.length-1].end.row;e&&this.table.fireListeners(B.B.SELECTED_CELL,{ranges:this.select.ranges,col:r,row:n})}else t&&0===this.select.ranges.length&&this.table.fireListeners(B.B.SELECTED_CLEAR,{})}endResizeCol(){setTimeout(()=>{this.columnResize.resizing=!1},0),this.table.scenegraph.updateChartSizeForResizeColWidth(this.columnResize.col),this.checkFrozen(),this.table.scenegraph.component.hideResizeCol(),this.table.scenegraph.updateNextFrame()}startResizeCol(e,t,i,r){this.columnResize.resizing=!0,this.columnResize.col=e,this.columnResize.x=t,this.columnResize.isRightFrozen=r,this.table.scenegraph.component.showResizeCol(e,i,r),this.table.scenegraph.updateNextFrame()}updateResizeCol(e,t){!function(e,t,i){var r;e=Math.ceil(e),t=Math.ceil(t);let n=i.columnResize.isRightFrozen?i.columnResize.x-e:e-i.columnResize.x;if(1>Math.abs(n))return;let l=i.table.getColWidth(i.columnResize.col),o=l;o+=n;let a=i.table.getMinColWidth(i.columnResize.col),s=i.table.getMaxColWidth(i.columnResize.col);if(o<a||o>s){if(l===a||l===s)return;n=l-a>s-l?s-l:a-l}let h=i.table.getColWidth(i.columnResize.col)+n;if(h<i.table.internalProps.limitMinWidth&&(n=(h=i.table.internalProps.limitMinWidth)-i.table.getColWidth(i.columnResize.col)),"adaptive"===i.table.widthMode&&i.columnResize.col<i.table.colCount-1){let e=i.table.getColWidth(i.columnResize.col+1),t=i.table.getMinColWidth(i.columnResize.col+1),r=i.table.getMaxColWidth(i.columnResize.col+1),l=e;if((l-=n)<t||l>r){if(e===t||e===r)return;n=e-t>r-e?r-e:t-e}l-n<i.table.internalProps.limitMinWidth&&(n=l-i.table.internalProps.limitMinWidth)}n=Math.ceil(n),i.columnResize.col<i.table.rowHeaderLevelCount||i.columnResize.col>=i.table.colCount-i.table.rightFrozenColCount?ru(n,i):"indicator"===i.table.internalProps.columnResizeType?function(e,t){let i,r,n,l=t.table.internalProps.layoutMap;if(l.indicatorsAsCol)i=l.getIndicatorKey(t.columnResize.col,t.table.columnHeaderLevelCount);else{let e=l.getCellHeaderPaths(t.columnResize.col,t.table.columnHeaderLevelCount-1),i=e.colHeaderPaths[e.colHeaderPaths.length-1];r=i.dimensionKey,n=i.value}for(let o=t.table.rowHeaderLevelCount;o<t.table.colCount-t.table.rightFrozenColCount;o++){let a=l.getIndicatorKey(o,t.table.columnHeaderLevelCount);if(l.indicatorsAsCol&&a===i)t.table.scenegraph.updateColWidth(o,e),t.table.internalProps._widthResizedColMap.add(o);else if(!l.indicatorsAsCol){let i=l.getCellHeaderPaths(o,t.table.columnHeaderLevelCount-1),a=null==i?void 0:i.colHeaderPaths[i.colHeaderPaths.length-1];a&&r===a.dimensionKey&&n===a.value&&(t.table.scenegraph.updateColWidth(o,e),t.table.internalProps._widthResizedColMap.add(o))}}}(n,i):"indicatorGroup"===i.table.internalProps.columnResizeType?function(e,t){let i=t.table.internalProps.layoutMap,r=i.getCellHeaderPaths(t.columnResize.col,t.table.columnHeaderLevelCount),n=i.getHeadNodeByRowOrColDimensions(r.colHeaderPaths.slice(0,r.colHeaderPaths.length-1)),l=n.startInTotal+t.table.frozenColCount,o=n.startInTotal+t.table.frozenColCount+n.size-1,a=t.table.getColsWidth(l,o);for(let r=l;r<=o;r++){if(!(t.table.internalProps.transpose||t.table.isPivotTable()&&!i.indicatorsAsCol)){let e=i.getBody(r,t.table.columnHeaderLevelCount);if(null==e?void 0:e.disableColumnResize)continue}let n=t.table.getColWidth(r)/a*e;n>0&&n<.5?n=.5:n<0&&n>=-.5&&(n=-.5),t.table.scenegraph.updateColWidth(r,n),t.table.internalProps._widthResizedColMap.add(r)}}(n,i):"all"===i.table.internalProps.columnResizeType?function(e,t){let i=t.table.internalProps.layoutMap;for(let r=t.table.frozenColCount;r<t.table.colCount-t.table.rightFrozenColCount;r++){if(!(t.table.internalProps.transpose||t.table.isPivotTable()&&!i.indicatorsAsCol)){let e=i.getBody(r,t.table.columnHeaderLevelCount);if(null==e?void 0:e.disableColumnResize)continue}t.table.scenegraph.updateColWidth(r,e),t.table.internalProps._widthResizedColMap.add(r)}}(n,i):ru(n,i),i.columnResize.x=e,i.table.scenegraph.component.updateResizeCol(i.columnResize.col,t,i.columnResize.isRightFrozen),i.table._updateSize(),null==(r=i.table.internalProps.legends)||r.forEach(e=>{null==e||e.resize()}),i.table.internalProps.title&&i.table.internalProps.title.resize(),i.table.internalProps.emptyTip&&i.table.internalProps.emptyTip.resize(),!(i.columnResize.col<i.table.frozenColCount)||i.table.isPivotTable()||i.table.transpose?i.table.options.frozenColCount&&i.table.scenegraph.component.setFrozenColumnShadow(i.table.frozenColCount-1):i.table.scenegraph.component.setFrozenColumnShadow(i.table.frozenColCount-1,i.columnResize.isRightFrozen),(i.columnResize.col>=i.table.colCount-i.table.rightFrozenColCount&&!i.table.isPivotTable()&&!i.table.transpose||i.table.options.rightFrozenColCount)&&i.table.scenegraph.component.setRightFrozenColumnShadow(i.table.colCount-i.table.rightFrozenColCount),i.table.scenegraph.updateNextFrame()}(e,t,this)}endResizeRow(){setTimeout(()=>{this.rowResize.resizing=!1},0),this.table.scenegraph.updateChartSizeForResizeRowHeight(this.rowResize.row),this.table.scenegraph.component.hideResizeRow(),this.table.scenegraph.updateNextFrame()}startResizeRow(e,t,i,r){this.rowResize.resizing=!0,this.rowResize.row=e,this.rowResize.y=i,this.rowResize.isBottomFrozen=r,this.table.scenegraph.component.showResizeRow(e,t,r),this.table.scenegraph.updateNextFrame()}updateResizeRow(e,t){!function(e,t,i){var r;e=Math.ceil(e),t=Math.ceil(t);let n=i.rowResize.isBottomFrozen?i.rowResize.y-t:t-i.rowResize.y;if(1>Math.abs(n))return;i.table.getRowHeight(i.rowResize.row);let l=i.table.getRowHeight(i.rowResize.row)+n;if(l<i.table.internalProps.limitMinHeight&&(n=(l=i.table.internalProps.limitMinHeight)-i.table.getRowHeight(i.rowResize.row)),"adaptive"===i.table.heightMode&&i.rowResize.row<i.table.rowCount-1){let e=i.table.getRowHeight(i.rowResize.row+1);(e-=n)-n<i.table.internalProps.limitMinHeight&&(n=e-i.table.internalProps.limitMinHeight)}n=Math.ceil(n),i.rowResize.row<i.table.columnHeaderLevelCount||i.rowResize.row>=i.table.rowCount-i.table.bottomFrozenRowCount?rg(n,i):"indicator"===i.table.internalProps.rowResizeType?function(e,t){var i,r;let n,l,o,a=t.table.internalProps.layoutMap;if(a.indicatorsAsCol){let e=a.getCellHeaderPaths(t.table.rowHeaderLevelCount-1,t.rowResize.row),r=null==(i=e.rowHeaderPaths)?void 0:i[e.rowHeaderPaths.length-1];l=null==r?void 0:r.dimensionKey,o=null==r?void 0:r.value}else n=a.getIndicatorKey(t.table.rowHeaderLevelCount,t.rowResize.row);for(let i=t.table.columnHeaderLevelCount;i<t.table.rowCount-t.table.bottomFrozenRowCount;i++){let s=a.getIndicatorKey(t.table.rowHeaderLevelCount,i);if(a.indicatorsAsCol||s!==n){if(a.indicatorsAsCol){let n=a.getCellHeaderPaths(t.table.rowHeaderLevelCount-1,i),s=null==(r=null==n?void 0:n.rowHeaderPaths)?void 0:r[n.rowHeaderPaths.length-1];s&&l===s.dimensionKey&&o===s.value&&(t.table.scenegraph.updateRowHeight(i,e),t.table.internalProps._heightResizedRowMap.add(i))}}else t.table.scenegraph.updateRowHeight(i,e),t.table.internalProps._heightResizedRowMap.add(i)}}(n,i):"indicatorGroup"===i.table.internalProps.rowResizeType?function(e,t){let i=t.table.internalProps.layoutMap,r=i.getCellHeaderPaths(t.table.rowHeaderLevelCount,t.rowResize.row),n=i.getHeadNodeByRowOrColDimensions(r.rowHeaderPaths.slice(0,r.rowHeaderPaths.length-1)),l=n.startInTotal+t.table.frozenRowCount,o=n.startInTotal+t.table.frozenRowCount+n.size-1,a=t.table.getRowsHeight(l,o);for(let i=l;i<=o;i++){let r=t.table.getRowHeight(i)/a*e;r>0&&r<.5?r=.5:r<0&&r>=-.5&&(r=-.51),t.table.scenegraph.updateRowHeight(i,r),t.table.internalProps._heightResizedRowMap.add(i)}}(n,i):"all"===i.table.internalProps.rowResizeType?function(e,t){for(let i=t.table.frozenRowCount;i<t.table.rowCount-t.table.bottomFrozenRowCount;i++)t.table.scenegraph.updateRowHeight(i,e),t.table.internalProps._heightResizedRowMap.add(i)}(n,i):rg(n,i),i.rowResize.y=t,i.table.scenegraph.component.updateResizeRow(i.rowResize.row,e,i.rowResize.isBottomFrozen),i.table._updateSize(),null==(r=i.table.internalProps.legends)||r.forEach(e=>{null==e||e.resize()}),i.table.internalProps.title&&i.table.internalProps.title.resize(),i.table.internalProps.emptyTip&&i.table.internalProps.emptyTip.resize(),i.table.scenegraph.updateNextFrame()}(e,t,this)}startFillSelect(e,t){this.fillHandle.isFilling=!0,this.fillHandle.startX=e,this.fillHandle.startY=t;let i=this.select.ranges[this.select.ranges.length-1];this.fillHandle.beforeFillMinCol=Math.min(i.start.col,i.end.col),this.fillHandle.beforeFillMinRow=Math.min(i.start.row,i.end.row),this.fillHandle.beforeFillMaxCol=Math.max(i.start.col,i.end.col),this.fillHandle.beforeFillMaxRow=Math.max(i.start.row,i.end.row),this.table.fireListeners(B.B.MOUSEDOWN_FILL_HANDLE,{})}endFillSelect(){this.fillHandle.isFilling=!1,this.fillHandle.startX=void 0,this.fillHandle.startY=void 0,this.fillHandle.directionRow=void 0;let e=Math.min(this.select.ranges[0].start.col,this.select.ranges[0].end.col),t=Math.min(this.select.ranges[0].start.row,this.select.ranges[0].end.row),i=Math.max(this.select.ranges[0].start.col,this.select.ranges[0].end.col),r=Math.max(this.select.ranges[0].start.row,this.select.ranges[0].end.row);this.fillHandle.beforeFillMinCol===e&&this.fillHandle.beforeFillMinRow===t&&this.fillHandle.beforeFillMaxCol===i&&this.fillHandle.beforeFillMaxRow===r||this.table.eventManager.isDraging&&this.table.fireListeners(B.B.DRAG_FILL_HANDLE_END,{direction:this.fillHandle.direction}),this.fillHandle.beforeFillMaxCol=void 0,this.fillHandle.beforeFillMaxRow=void 0,this.fillHandle.beforeFillMinCol=void 0,this.fillHandle.beforeFillMinRow=void 0}startMoveCol(e,t,i,r,n,l){!function(e,t,i,r,n,l,o){var a;let s;if(!("canMoveHeaderPosition"in n.table.internalProps.layoutMap))return;if(n.columnMove.movingColumnOrRow=o,n.columnMove.moving=!0,n.columnMove.colSource=e,n.columnMove.rowSource=t,n.table.isListTable()){let i=n.table.getRecordIndexByCell(e,t),r=n.table.getRecordByCell(e,t),l=n.table.getRecordHierarchyState(e,t);n.columnMove.rowSourceSize=(0,H.pr)(i,l,r)+1}if(n.columnMove.x=i-n.table.tableX,n.columnMove.y=r-n.table.tableY,"column"===o)s=n.columnMove.x;else if("row"===o)s=n.columnMove.y;else{let i=n.table.getCellLocation(e,t);s="columnHeader"===i?n.columnMove.x:"rowHeader"===i||n.table.internalProps.layoutMap.isSeriesNumberInBody(e,t)?n.columnMove.y:0}let{backX:h,lineX:d,backY:u,lineY:c}=n.table.scenegraph.component.showMoveCol(e,t,s);n.table.fireListeners(B.B.CHANGE_HEADER_POSITION_START,{col:e,row:t,x:i,y:r,backX:h,lineX:d,backY:u,lineY:c,event:l,movingColumnOrRow:o});let p=!!(null==(a=n.select.ranges)?void 0:a.length);n.table.stateManager.updateSelectPos(-1,-1),n.table.stateManager.endSelectCells(!0,p),n.table.scenegraph.updateNextFrame()}(e,t,i,r,this,n,l)}updateMoveCol(e,t,i,r,n){!function(e,t,i,r,n,l){if(!("canMoveHeaderPosition"in n.table.internalProps.layoutMap))return;let o=(0,ra.$Q)({col:n.columnMove.colSource,row:n.columnMove.rowSource},{col:e,row:t},n.table);if(n.table.internalProps.layoutMap.canMoveHeaderPosition({col:n.columnMove.colSource,row:n.columnMove.rowSource},{col:o.col,row:o.row})){let a,s,h,d;if(n.columnMove.x=i-n.table.tableX,n.columnMove.y=r-n.table.tableY,n.columnMove.colTarget=o.col,n.columnMove.rowTarget=o.row,n.table.isListTable()){let e=n.table.getRecordIndexByCell(o.col,o.row),t=n.table.getRecordByCell(o.col,o.row),i=n.table.getRecordHierarchyState(o.col,o.row);n.columnMove.rowTargetSize=(0,H.pr)(e,i,t)+1}n.updateCursor("grabbing");let u=n.table.getCellLocation(n.columnMove.colSource,n.columnMove.rowSource);"columnHeader"===u||"column"===n.columnMove.movingColumnOrRow&&0===n.columnMove.rowSource?(s=n.columnMove.x,a=n.table.isLeftFrozenColumn(e)?n.columnMove.colTarget>=n.columnMove.colSource?n.table.getColsWidth(0,n.columnMove.colTarget):n.table.getColsWidth(0,n.columnMove.colTarget-1):n.table.isRightFrozenColumn(e)?n.table.tableNoFrameWidth-n.table.getColsWidth(o.col+1,n.table.colCount-1):(n.columnMove.colTarget>=n.columnMove.colSource?n.table.getColsWidth(0,n.columnMove.colTarget):n.table.getColsWidth(0,n.columnMove.colTarget-1))-n.table.stateManager.scroll.horizontalBarPos):("rowHeader"===u||n.table.internalProps.layoutMap.isSeriesNumberInBody(e,t)||"row"===n.columnMove.movingColumnOrRow)&&(d=n.columnMove.y,h=n.table.isFrozenRow(t)?n.columnMove.rowTarget>=n.columnMove.rowSource?n.table.getRowsHeight(0,n.columnMove.rowTarget):n.table.getRowsHeight(0,n.columnMove.rowTarget-1):n.table.isBottomFrozenRow(t)?n.table.tableNoFrameHeight-n.table.getRowsHeight(o.row+1,n.table.rowCount-1):(n.columnMove.rowTarget>=n.columnMove.rowSource?n.table.getRowsHeight(0,n.columnMove.rowTarget):n.table.getRowsHeight(0,n.columnMove.rowTarget-1))-n.table.stateManager.scroll.verticalBarPos),n.table.scenegraph.component.updateMoveCol(s,a,d,h),n.table.fireListeners(B.B.CHANGING_HEADER_POSITION,{col:e,row:t,x:i,y:r,backX:s,lineX:a,backY:d,lineY:h,event:l,movingColumnOrRow:n.columnMove.movingColumnOrRow}),n.table.scenegraph.updateNextFrame()}else n.updateCursor("not-allowed"),n.columnMove.colTarget=n.columnMove.colSource,n.columnMove.rowTarget=n.columnMove.rowSource}(e,t,i,r,this,n)}isMoveCol(){return this.columnMove.moving}endMoveCol(){return function(e){var t,i;let r=!1;if("canMoveHeaderPosition"in e.table.internalProps.layoutMap&&e.columnMove.moving&&(e.columnMove.colSource>=0||"row"===e.columnMove.movingColumnOrRow)&&(e.columnMove.rowSource>=0||"column"===e.columnMove.movingColumnOrRow)&&(e.columnMove.colTarget>=0||"row"===e.columnMove.movingColumnOrRow)&&(e.columnMove.rowTarget>=0||"column"===e.columnMove.movingColumnOrRow)&&!0!==(null==(t=e.table.options.customConfig)?void 0:t.notUpdateInColumnRowMove)){let t=e.table.getCellRange(e.columnMove.colSource,e.columnMove.rowSource),i=e.table.getCellRange(e.columnMove.colTarget,e.columnMove.rowTarget),n=e.table._moveHeaderPosition({col:e.columnMove.colSource,row:e.columnMove.rowSource},{col:e.columnMove.colTarget,row:e.columnMove.rowTarget});if(!n||n.targetIndex===n.sourceIndex)return e.updateCursor(),e.columnMove.moving=!1,setTimeout(()=>{delete e.columnMove.colSource,delete e.columnMove.rowSource,delete e.columnMove.colTarget,delete e.columnMove.rowTarget,e.columnMove.movingColumnOrRow=void 0},0),e.table.scenegraph.component.hideMoveCol(),e.table.scenegraph.updateNextFrame(),!1;{e.table.internalProps.useOneRowHeightFillAll=!1,e.table.internalProps.layoutMap.clearCellRangeMap();let l=e.table.getCellRange(e.columnMove.colSource,e.columnMove.rowSource),o=e.table.getCellRange(e.columnMove.colTarget,e.columnMove.rowTarget),a=Math.min(l.start.col,o.start.col,t.start.col,i.start.col),s=Math.max(l.end.col,o.end.col,t.end.col,i.end.col),h=Math.min(l.start.row,o.start.row,t.start.row,i.start.row),d=Math.max(l.end.row,o.end.row,t.end.row,i.end.row);"row"===n.moveType&&"tree"===e.table.internalProps.layoutMap.rowHierarchyType&&(d=n.targetIndex>n.sourceIndex?d+n.targetSize-1:d+n.sourceSize-1),e.table.transpose||!e.table.internalProps.layoutMap.isSeriesNumberInBody(e.columnMove.colSource,e.columnMove.rowSource)&&"row"!==e.columnMove.movingColumnOrRow||(e.table.changeRecordOrder(n.sourceIndex,n.targetIndex),e.changeCheckboxAndRadioOrder(n.sourceIndex,n.targetIndex)),"column"===n.moveType?rs(a,s,0,-1,e.table):rs(0,-1,h,d,e.table),e.table.clearCellStyleCache(),e.table.internalProps.layoutMap.isSeriesNumberInBody(e.columnMove.colSource,e.columnMove.rowSource)||"row"===e.columnMove.movingColumnOrRow?e.table.scenegraph.updateHeaderPosition(e.table.scenegraph.proxy.colStart,e.table.scenegraph.proxy.colEnd,e.table.scenegraph.proxy.rowStart,e.table.scenegraph.proxy.rowEnd,n.moveType):"column"===n.moveType?e.table.scenegraph.updateHeaderPosition(a,s,0,-1,n.moveType):e.table.scenegraph.updateHeaderPosition(0,-1,h,d,n.moveType),"adjustFrozenCount"===e.table.internalProps.frozenColDragHeaderMode&&e.table.isListTable()&&(e.table.isLeftFrozenColumn(e.columnMove.colTarget)&&!e.table.isLeftFrozenColumn(e.columnMove.colSource)?e.table.frozenColCount+=l.end.col-l.start.col+1:e.table.isLeftFrozenColumn(e.columnMove.colSource)&&!e.table.isLeftFrozenColumn(e.columnMove.colTarget)&&(e.table.frozenColCount-=l.end.col-l.start.col+1),e.table.isRightFrozenColumn(e.columnMove.colTarget)&&!e.table.isRightFrozenColumn(e.columnMove.colSource)?e.table.rightFrozenColCount+=l.end.col-l.start.col+1:e.table.isRightFrozenColumn(e.columnMove.colSource)&&!e.table.isRightFrozenColumn(e.columnMove.colTarget)&&(e.table.rightFrozenColCount-=l.end.col-l.start.col+1)),r=!0}}return e.columnMove.moving=!1,setTimeout(()=>{delete e.columnMove.colSource,delete e.columnMove.rowSource,delete e.columnMove.colTarget,delete e.columnMove.rowTarget,e.columnMove.movingColumnOrRow=void 0},0),e.table.scenegraph.component.hideMoveCol(),!(e.columnResize.col<e.table.frozenColCount)||e.table.isPivotTable()||e.table.transpose?!(e.columnResize.col>=e.table.colCount-e.table.rightFrozenColCount)||e.table.isPivotTable()||e.table.transpose?e.table.options.frozenColCount?e.table.scenegraph.component.setFrozenColumnShadow(e.table.frozenColCount-1):e.table.options.rightFrozenColCount&&e.table.scenegraph.component.setRightFrozenColumnShadow(e.table.colCount-e.table.rightFrozenColCount):e.table.scenegraph.component.setRightFrozenColumnShadow(e.table.colCount-e.table.rightFrozenColCount):(e.table.scenegraph.component.setFrozenColumnShadow(e.table.frozenColCount-1,e.columnResize.isRightFrozen),e.table.scenegraph.component.setRightFrozenColumnShadow(e.table.colCount-e.table.rightFrozenColCount)),e.table.scenegraph.updateNextFrame(),!0===(null==(i=e.table.options.customConfig)?void 0:i.notUpdateInColumnRowMove)||r}(this)}checkFrozen(){var e,t;let i=null!=(e=this.table.options.frozenColCount)?e:this.table.isPivotTable()||this.table.isListTable()&&this.table.internalProps.transpose?(null!=(t=this.table.rowHeaderLevelCount)?t:0)+this.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount:0;if(i){i=Math.min(i,this.table.colCount);let e=this.table.getContainer();if(e&&0===e.clientWidth){if(this._frozenObserver)return;return this._frozenObserver=new ResizeObserver(e=>{for(let t of e)if(t.contentRect.width>0)return this.clearFrozenObserver(),this.table.resize(),void setTimeout(()=>{this.checkFrozen()},0)}),void this._frozenObserver.observe(e)}if(this.table.getColsWidth(0,i-1)>this.table._getMaxFrozenWidth())if(this.table.internalProps.unfreezeAllOnExceedsMaxWidth)this.table._setFrozenColCount(0),this.setFrozenCol(-1);else{let e=this.table._getComputedFrozenColCount(i);this.table._setFrozenColCount(e),this.setFrozenCol(e)}else this.table.frozenColCount!==i&&(this.table._setFrozenColCount(i),this.setFrozenCol(i))}else this.clearFrozenObserver()}clearFrozenObserver(){this._frozenObserver&&(this._frozenObserver.disconnect(),this._frozenObserver=null)}setFrozenCol(e){e!==this.frozen.col&&(this.frozen.col=e,this.table.scenegraph.updateFrozen()),this.table.scenegraph.updateFrozenIcon(0,this.table.colCount-1)}setFrozenRow(e){e!==this.frozen.row&&(this.frozen.row=e,this.table.scenegraph.updateRowFrozen())}checkVerticalScrollBarEnd(){var e,t;let i=this.table.getAllRowsHeight(),r=this.scroll.verticalBarPos,n=this.table.tableNoFrameHeight;r+n>=i&&this.table.fireListeners(B.B.SCROLL_VERTICAL_END,{scrollTop:r,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(e=this.table.theme.scrollStyle)?void 0:e.width,scrollWidth:null==(t=this.table.theme.scrollStyle)?void 0:t.width,viewHeight:n,viewWidth:this.table.tableNoFrameWidth})}checkHorizontalScrollBarEnd(){var e,t;let i=this.table.getAllColsWidth(),r=this.scroll.horizontalBarPos,n=this.table.tableNoFrameWidth;r+n>=i&&this.table.fireListeners(B.B.SCROLL_HORIZONTAL_END,{scrollTop:this.scroll.verticalBarPos,scrollLeft:r,scrollHeight:null==(e=this.table.theme.scrollStyle)?void 0:e.width,scrollWidth:null==(t=this.table.theme.scrollStyle)?void 0:t.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:n})}updateVerticalScrollBar(e){var t,i,r,n;let l=this.table.getAllRowsHeight(),o=this.scroll.verticalBarPos,a=Math.ceil(e*(l-this.table.scenegraph.height));(0,b.Z)(a)&&!isNaN(a)||(a=0);let s=a-this.table.scenegraph.proxy.deltaY-o;if(this.table.fireListeners(B.B.CAN_SCROLL,{event:void 0,scrollTop:a-this.table.scenegraph.proxy.deltaY,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(t=this.table.theme.scrollStyle)?void 0:t.width,scrollWidth:null==(i=this.table.theme.scrollStyle)?void 0:i.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"vertical",scrollRatioY:e,dy:s}).some(e=>!1===e)){let e=this.scroll.verticalBarPos/(l-this.table.scenegraph.height);this.table.scenegraph.component.updateVerticalScrollBarPos(e)}else this.scroll.verticalBarPos=a,this.table.scenegraph.setY(-this.scroll.verticalBarPos,1===e),this.scroll.verticalBarPos-=this.table.scenegraph.proxy.deltaY,this.table.scenegraph.proxy.deltaY=0,this.updateHoverPos(-1,-1),this.table.fireListeners(B.B.SCROLL,{event:void 0,scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(r=this.table.theme.scrollStyle)?void 0:r.width,scrollWidth:null==(n=this.table.theme.scrollStyle)?void 0:n.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"vertical",scrollRatioY:e,dy:s}),o!==this.scroll.verticalBarPos&&this.checkVerticalScrollBarEnd()}updateHorizontalScrollBar(e){var t,i,r,n;let l=this.table.getAllColsWidth(),o=this.scroll.horizontalBarPos,a=Math.ceil(e*(l-this.table.scenegraph.width));(0,b.Z)(a)&&!isNaN(a)||(a=0);let s=a-this.table.scenegraph.proxy.deltaX-o;if(this.table.fireListeners(B.B.CAN_SCROLL,{event:void 0,scrollTop:this.scroll.verticalBarPos,scrollLeft:a-this.table.scenegraph.proxy.deltaX,scrollHeight:null==(t=this.table.theme.scrollStyle)?void 0:t.width,scrollWidth:null==(i=this.table.theme.scrollStyle)?void 0:i.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"horizontal",scrollRatioX:e,dx:s}).some(e=>!1===e)){let e=this.scroll.horizontalBarPos/(l-this.table.scenegraph.width);this.table.scenegraph.component.updateHorizontalScrollBarPos(e)}else this.scroll.horizontalBarPos=a,this.table.scenegraph.setX(-this.scroll.horizontalBarPos,1===e),this.scroll.horizontalBarPos-=this.table.scenegraph.proxy.deltaX,this.table.scenegraph.proxy.deltaX=0,this.updateHoverPos(-1,-1),this.table.fireListeners(B.B.SCROLL,{event:void 0,scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(r=this.table.theme.scrollStyle)?void 0:r.width,scrollWidth:null==(n=this.table.theme.scrollStyle)?void 0:n.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"horizontal",scrollRatioX:e,dx:s}),o!==this.scroll.horizontalBarPos&&this.checkHorizontalScrollBarEnd()}setScrollTop(e,t,i=!0){var r,n,l,o,a,s,h,d,u,c,p,g,f;if(!this.table||!this.table.scenegraph)return;let m=this.table.getAllRowsHeight(),y=+(null!=(r=this.table.options.customConfig)&&!!r._disableColumnAndRowSizeRound);e=Math.ceil(e=Math.max(0,Math.min(e,m-(null!=(l=null==(n=this.table.scenegraph)?void 0:n.height)?l:0)-y)));let v=this.scroll.verticalBarPos,_=e/(m-(null!=(a=null==(o=this.table.scenegraph)?void 0:o.height)?a:0));if((v!==e||!0===(null==(h=null==(s=this.table.options)?void 0:s.customConfig)?void 0:h.scrollEventAlwaysTrigger))&&i){let i=e;(0,b.Z)(i)&&!isNaN(i)||(i=0);let r=i-v;if(this.table.fireListeners(B.B.CAN_SCROLL,{event:null==t?void 0:t.nativeEvent,scrollTop:i,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(d=this.table.theme.scrollStyle)?void 0:d.width,scrollWidth:null==(u=this.table.theme.scrollStyle)?void 0:u.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"vertical",scrollRatioY:_,dy:r}).some(e=>!1===e)){let e=this.scroll.verticalBarPos/(m-(null!=(p=null==(c=this.table.scenegraph)?void 0:c.height)?p:0));return void this.table.scenegraph.component.updateVerticalScrollBarPos(e)}}(e!==this.scroll.verticalBarPos||this.table.isPivotChart())&&this.updateHoverPos(-1,-1),this.scroll.verticalBarPos=e,(0,b.Z)(this.scroll.verticalBarPos)&&!isNaN(this.scroll.verticalBarPos)||(this.scroll.verticalBarPos=0),this.table.scenegraph.setY(-e),this.table.scenegraph.component.updateVerticalScrollBarPos(_);let C=this.scroll.verticalBarPos-v;this.table.fireListeners(B.B.SCROLL,{event:null==t?void 0:t.nativeEvent,scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(g=this.table.theme.scrollStyle)?void 0:g.width,scrollWidth:null==(f=this.table.theme.scrollStyle)?void 0:f.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"vertical",scrollRatioY:_,dy:C}),v!==e&&i&&this.checkVerticalScrollBarEnd()}setScrollLeft(e,t,i=!0){var r,n,l,o,a,s,h;if(!this.table||!this.table.scenegraph)return;this.table.scrollLeft;let d=this.table.getAllColsWidth(),u=(this.table.getFrozenColsWidth(),+(null!=(r=this.table.options.customConfig)&&!!r._disableColumnAndRowSizeRound));e=Math.ceil(e=Math.max(0,Math.min(e,d-this.table.scenegraph.width-u)));let c=this.scroll.horizontalBarPos,p=e/(d-this.table.scenegraph.width);if((c!==e||!0===(null==(l=null==(n=this.table.options)?void 0:n.customConfig)?void 0:l.scrollEventAlwaysTrigger))&&i){let i=e;(0,b.Z)(i)&&!isNaN(i)||(i=0);let r=i-c;if(this.table.fireListeners(B.B.CAN_SCROLL,{event:null==t?void 0:t.nativeEvent,scrollTop:this.scroll.verticalBarPos,scrollLeft:i,scrollHeight:null==(o=this.table.theme.scrollStyle)?void 0:o.width,scrollWidth:null==(a=this.table.theme.scrollStyle)?void 0:a.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"horizontal",scrollRatioX:p,dx:r}).some(e=>!1===e)){let e=this.scroll.horizontalBarPos/(d-this.table.scenegraph.width);return void this.table.scenegraph.component.updateHorizontalScrollBarPos(e)}}e!==this.scroll.horizontalBarPos&&this.updateHoverPos(-1,-1),this.scroll.horizontalBarPos=e,(0,b.Z)(this.scroll.horizontalBarPos)&&!isNaN(this.scroll.horizontalBarPos)||(this.scroll.horizontalBarPos=0),this.table.scenegraph.setX(-e),this.table.scenegraph.component.updateHorizontalScrollBarPos(p);let g=this.scroll.horizontalBarPos-c;this.table.fireListeners(B.B.SCROLL,{event:null==t?void 0:t.nativeEvent,scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollHeight:null==(s=this.table.theme.scrollStyle)?void 0:s.width,scrollWidth:null==(h=this.table.theme.scrollStyle)?void 0:h.width,viewHeight:this.table.tableNoFrameHeight,viewWidth:this.table.tableNoFrameWidth,scrollDirection:"horizontal",scrollRatioX:p,dx:g}),c!==e&&i&&this.checkHorizontalScrollBarEnd()}hideVerticalScrollBar(){this.table.scenegraph.component.hideVerticalScrollBar()}showVerticalScrollBar(e){this.table.scenegraph.component.showVerticalScrollBar(),e&&(clearTimeout(this._clearVerticalScrollBar),this._clearVerticalScrollBar=setTimeout(()=>{var e;null==(e=this.table.scenegraph)||e.component.hideVerticalScrollBar()},1e3))}hideHorizontalScrollBar(){this.table.scenegraph.component.hideHorizontalScrollBar()}showHorizontalScrollBar(e){var t;this.table.scenegraph.component.showHorizontalScrollBar(),null==(t=this.table.scenegraph)||t.component.showFrozenColumnShadow(),e&&(clearTimeout(this._clearHorizontalScrollBar),this._clearHorizontalScrollBar=setTimeout(()=>{var e,t;null==(e=this.table.scenegraph)||e.component.hideFrozenColumnShadow(),null==(t=this.table.scenegraph)||t.component.hideHorizontalScrollBar()},1e3))}triggerContextMenu(e,t,i,r){this.menu.isShow&&this.menu.x===i&&this.menu.y===r?this.hideMenu():this.showContextMenu(e,t,i,r)}showContextMenu(e,t,i,r){var n;(null==(n=this.table.internalProps.menu)?void 0:n.contextMenuItems)&&("html"===this.table.internalProps.menu.renderMode?this.menu.isShow=!0:(this.menu.isShow=!0,this.menu.x=i,this.menu.y=r,this.table.scenegraph.component.menu.attach(i,r,e,t,m.contextmenu)),this.table.fireListeners(B.B.SHOW_MENU,{x:i,y:r,col:e,row:t,type:"contextmenu"}))}triggerDropDownMenu(e,t,i,r,n){this.table.fireListeners(B.B.DROPDOWN_ICON_CLICK,{col:e,row:t,event:n}),this.menu.isShow?this.hideMenu():this.showDropDownMenu(e,t,i,r)}showDropDownMenu(e,t,i,r){let n;"html"===this.table.internalProps.menu.renderMode?this.menu.isShow=!0:(this.menu.isShow=!0,this.table.scenegraph.component.menu.attach(i,r,e,t,m.dropDown),this.menu.bounds=this.table.scenegraph.component.menu.bounds),this.table.fireListeners(B.B.SHOW_MENU,{x:i,y:r,col:e,row:t,type:"dropDown"}),this.residentHoverIcon&&this.table.scenegraph.setIconNormalStyle(this.residentHoverIcon.icon,this.residentHoverIcon.col,this.residentHoverIcon.row);let l=this.table.scenegraph.getCell(e,t);l.forEachChildren(e=>e.attribute.funcType===ev.cI.dropDown&&(n=e,!0)),n&&(this.residentHoverIcon={col:e,row:t,icon:n},this.table.scenegraph.setIconHoverStyle(this.residentHoverIcon.icon,this.residentHoverIcon.col,this.residentHoverIcon.row,l),this.table.scenegraph.residentHoverIcon(e,t))}hideMenu(){this.menu.isShow&&(this.table.fireListeners(B.B.DROPDOWN_MENU_CLEAR,null),this.table.fireListeners(B.B.HIDE_MENU,null),this.menu.isShow=!1,this.table.scenegraph.component.menu.detach(),this.residentHoverIcon&&(this.table.scenegraph.setIconNormalStyle(this.residentHoverIcon.icon,this.residentHoverIcon.col,this.residentHoverIcon.row),this.table.scenegraph.resetResidentHoverIcon(this.residentHoverIcon.col,this.residentHoverIcon.row),this.residentHoverIcon=null))}setDropDownMenuHighlight(e){this.menu.dropDownMenuHighlight=e;for(let t=0;t<e.length;t++){let{col:i,row:r}=e[t],n=this.table.getCellRange(i,r);if(n)for(let e=n.start.col;e<=n.end.col;e++)for(let t=n.start.row;t<=n.end.row;t++)this.table.scenegraph.updateCellContent(e,t)}}dropDownMenuIsHighlight(e,t,i){let r=this.menu.dropDownMenuHighlight;if(Array.isArray(r))for(let n=0;n<r.length;n++){let l=r[n],{col:o,row:a}=l,{field:s,menuKey:h}=l;if("number"!=typeof o||"number"!=typeof a)if(this.table.isPivotTable()&&(Array.isArray(s),1)){let e=this.table.internalProps.layoutMap.getPivotCellAdress(s);if(!e)continue;o=e.col,a=e.row}else{let e=this.table.internalProps.layoutMap.getHeaderCellAddressByField(s);if(!e)continue;o=e.col,a=e.row}if((0,b.Z)(o)&&(0,b.Z)(a)&&this.table.isCellRangeEqual(e,t,o,a)){let r=this.table._getHeaderLayoutMap(null!=o?o:e,null!=a?a:t).dropDownMenu||this.table.globalDropDownMenu;if("function"==typeof r&&(r=r({row:a,col:o,table:this.table})),r)for(let e=0;e<r.length;e++){let t=r[e];if((0,ro.Z)(t)&&(t.menuKey||t.text)===(h||"")&&e===i||(0,tU.Z)(t)&&t===h&&e===i)return!0}}}return!1}triggerSort(e,t,i,r){if(this.table.isPivotTable()){let i=this.table.getPivotSortState(e,t),n=i?i.toUpperCase():"NORMAL";return this.table.sort(e,t,"ASC"===n?"DESC":"DESC"===n?"NORMAL":"ASC"),void this.table.fireListeners(rn.z.PIVOT_SORT_CLICK,{col:e,row:t,order:n||"normal",dimensionInfo:this.table.internalProps.layoutMap.getPivotDimensionInfo(e,t),cellLocation:this.table.getCellLocation(e,t),event:r})}let n=[...this.sort],l=this.table.internalProps.multipleSort||!n.length?null:this.sort[this.sort.length-1];!function(e,t,i,r){var n,l,o,a;let s,h=null,d=!1;if(Array.isArray(i.sortState))for(let r=0;r<i.sortState.length&&((s=i.sortState[r])&&(h=i._getHeaderCellBySortState(s)),h&&(d=rr(e,t,h.col,h.row,i)),!d);r++);else(s=i.sortState)&&(h=i._getHeaderCellBySortState(s)),h&&(d=rr(e,t,h.col,h.row,i));let u=i.getHeaderDefine(e,t);if(s&&d&&(null==u?void 0:u.sort)?s.order="asc"===s.order?"desc":"desc"===s.order?"normal":"asc":(null==u?void 0:u.sort)?s={field:i.getHeaderField(e,t),order:"asc"}:d&&(null==u?void 0:u.showSort)||(s={field:i.getHeaderField(e,t),order:"normal"}),s.event=r,i.fireListeners(B.B.SORT_CLICK,s).includes(!1))return;let c=!1,p=i.internalProps.sortState?Array.isArray(i.internalProps.sortState)&&(c=!0)?i.internalProps.sortState:[i.internalProps.sortState]:[];if(Array.isArray(p)){let e=p.findIndex(e=>e.field===s.field);e>=0?p[e]=s:p.push(s)}p=p.filter(e=>"normal"!==e.order),p=i.internalProps.multipleSort&&(c=!0)?p:p.splice(-1),p=c&&p.length?p:p[0],i.internalProps.sortState=p,i.stateManager.setSortState(p),(null==u?void 0:u.sort)&&(l=p,o=i,a=0,l=Array.isArray(l)||!l?l:[l],o.dataSource.sort((l||[]).map(e=>{var t,i;let r=o.internalProps.layoutMap.headerObjects.find(t=>t&&t.field===e.field);return{field:e.field,order:e.order||"asc",orderFn:"function"==typeof(null==(t=null==r?void 0:r.define)?void 0:t.sort)?null==(i=null==r?void 0:r.define)?void 0:i.sort:H.K$}}))),i.internalProps.useOneRowHeightFillAll=!1,i.internalProps.layoutMap.clearCellRangeMap(),i.scenegraph.sortCell();let g=!!(null==(n=i.stateManager.select.ranges)?void 0:n.length);i.stateManager.updateSelectPos(-1,-1),i.stateManager.endSelectCells(!0,g)}(e,t,this.table,r);let o=this.table.getCellRange(e,t),a=this.sort.find(e=>e.col===o.start.col&&e.row===o.start.row),s=this.table.internalProps.multipleSort||!l?null:l.col,h=this.table.internalProps.multipleSort||!l?null:l.row,d=n.findIndex(i=>i.col===e&&i.row===t);d>=0&&n.splice(d,1),this.table.scenegraph.updateSortIcon({col:e,row:t,iconMark:i,order:null==a?void 0:a.order,oldSortCol:s,oldSortRow:h,oldIconMark:null==l?void 0:l.icon}),a&&(a.icon=i),this.table.internalProps.multipleSort||n.forEach(e=>{this.table.scenegraph.updateSortIcon({col:null,row:null,iconMark:null,order:"normal",oldSortCol:e.col,oldSortRow:e.row,oldIconMark:null})}),this.table.fireListeners(rn.z.AFTER_SORT,{order:null==a?void 0:a.order,field:this.table.getHeaderField(e,t),event:r})}setSelectInline(e){this.select.selectInline=e}updateSortState(e){var t,i,r,n,l,o,a,s;e=Array.isArray(e)?e:[e];for(let s=0;s<e.length;s++){let h;if(e[s].field===(null==(t=this.sort[s])?void 0:t.field)&&e[e.length-1].order===(null==(i=this.sort[s])?void 0:i.order))return;let d=this.table.internalProps.multipleSort?null:(null==(r=this.sort[s])?void 0:r.col)||null,u=this.table.internalProps.multipleSort?null:(null==(n=this.sort[s])?void 0:n.row)||null;"asc"===(null==(l=this.sort[s])?void 0:l.order)||null==(o=this.sort[s])||o.order,this.setSortState(e.slice(0,s+1));let c=this.table.internalProps.layoutMap.getHeaderCellAddressByField(e[s].field);this.sort[s].col=c.col,this.sort[s].row=c.row;let p=this.table.scenegraph.getCell(this.sort[s].col,this.sort[s].row);(0,H.yW)(p,"children",e=>"sort"===e.attribute.funcType&&(h=e,!0)),this.table.scenegraph.updateSortIcon({col:this.sort[s].col,row:this.sort[s].row,iconMark:h,order:this.sort[s].order,oldSortCol:d,oldSortRow:u,oldIconMark:null==(a=this.sort[s])?void 0:a.icon})}let h=[];this.table.internalProps.layoutMap.columnTree.tree.children.forEach(t=>{e.some(e=>e.field===t.field)||h.push(t)});for(let e=0;e<h.length;e++){let t=h[e];this.table.scenegraph.updateSortIcon({col:null,row:null,iconMark:null,order:null,oldSortCol:null!=(s=t.startInTotal+this.table.internalProps.layoutMap.leftRowSeriesNumberColumnCount)?s:0,oldSortRow:t.level,oldIconMark:null})}}triggerFreeze(e,t,i){if(!this.table.isPivotTable()&&!this.table.transpose){var r;if((r=this.table).frozenColCount>0?e!==r.frozenColCount-1?r.setFrozenColCount(e+1):r.setFrozenColCount(0):r.setFrozenColCount(e+1),this.table.hasListeners(rn.z.FREEZE_CLICK)){let i=this.table.internalProps.layoutMap.columnObjects.slice(0,e+1);this.table.fireListeners(rn.z.FREEZE_CLICK,{col:e,row:t,fields:i.reduce((e,t)=>e.concat(t.field),[]),colCount:this.table.frozenColCount})}this.frozen.icon=i}}updateCursor(e){var t;e||(e=null!=(t=this.table.options.defaultCursor)?t:"default"),this.table.getElement().style.cursor=e}updateDrillState(e,t,i,r,n,l){this.drill.dimensionKey=e,this.drill.title=t,this.drill.drillDown=i,this.drill.drillUp=r,this.drill.col=n,this.drill.row=l,function(e,t,i,r,n){let l=n.getCellLocation(e,t),o=0,a=0,s=!1;"columnHeader"===l?(o=n.getColsWidth(0,n.rowHeaderLevelCount-1)-(0===n.frozenColCount?n.scrollLeft:0),a=n.getRowsHeight(0,t-1)+n.getRowHeight(t)/2,s=!0):"rowHeader"===l&&(a=n.getRowsHeight(0,n.columnHeaderLevelCount-1),o=n.getColsWidth(0,e-1)+n.getColWidth(e)/2,s=!0),n.scenegraph.updateDrill(s,o,a,i,r)}(n,l,i,r,this.table)}updateSparklineHoverPose(e,t,i,r){-1!==this.sparkLine.col&&-1!==this.sparkLine.row&&function(e,t,i){let r=i.scenegraph.getCell(e,t).getChildByName("sparkline"),n=null==r?void 0:r.getChildByName("highlight-line"),l=null==r?void 0:r.getChildByName("highlight-symbol");n&&n.setAttributes({visible:!1,pickable:!1}),l&&l.setAttributes({visible:!1,pickable:!1}),i.scenegraph.updateNextFrame()}(this.sparkLine.col,this.sparkLine.row,this.table);let n=!1;-1!==e&&-1!==t&&(n=function(e,t,i,r,n){var l,o;let a,s=n.scenegraph.getCell(e,t).getChildByName("sparkline"),h=null==s?void 0:s.getChildByName("sparkline-line"),d=null==s?void 0:s.getChildByName("sparkline-symbol-group");if(!h)return!1;let u=h.bandwidth,c=h.min,p=h.max,g=h.attribute.points;i-=s.globalAABBBounds.x1,s.globalAABBBounds.y1;for(let e=0;e<g.length;e++){let{x:t,y:r,defined:n,rawData:f}=g[e];if(Math.abs(i-t)<u/2&&(a={point:g[e],points:g,pointsBandWidth:u,pointData:f},n)){let e=s.getChildByName("highlight-line");if(e)e.setAttributes({points:[{x:t,y:p},{x:t,y:c}],visible:!0,pickable:!0});else{let e=(0,eW.W)({points:[{x:t,y:p},{x:t,y:c}],lineWidth:null==(l=h.hover)?void 0:l.strokeWidth,stroke:null==(o=h.hover)?void 0:o.stroke});e.name="highlight-line",s.addChild(e)}let i=s.getChildByName("highlight-symbol");if(i)i.setAttributes({x:t,y:r,visible:!0,pickable:!0});else{let e=(0,eJ.t)({x:t,y:r,stroke:d.hover.stroke,lineWidth:d.hover.strokeWidth,fill:d.hover.fill,size:2*d.hover.size,symbolType:"circle"});e.name="highlight-symbol",s.addChild(e)}break}}if(n.scenegraph.updateNextFrame(),a){let i={col:e,row:t,field:n.getHeaderField(e,t),value:n.getCellValue(e,t),dataValue:n.getCellOriginValue(e,t),cellHeaderPaths:n.internalProps.layoutMap.getCellHeaderPaths(e,t),title:n.getBodyColumnDefine(e,t).title,cellRange:n.getCellRelativeRect(e,t),sparkline:{pointData:a.pointData},scaleRatio:n.canvas.getBoundingClientRect().width/n.canvas.offsetWidth};n.fireListeners(B.B.MOUSEOVER_CHART_SYMBOL,i)}return!0}(e,t,i,0,this.table)),n?(this.sparkLine.col=e,this.sparkLine.row=t):(this.sparkLine.col=-1,this.sparkLine.row=-1)}setCheckedState(e,t,i,r){return(0,rp.Y)(e,t,i,r,this)}setHeaderCheckedState(e,t){return(0,rp.Vz)(e,t,this)}syncCheckedState(e,t,i,r){return(0,rp.GW)(e,t,i,r,this)}initCheckedState(e){return(0,rp.gs)(e,this)}updateHeaderCheckedState(e,t,i){return(0,rp.Pi)(e,this,t,i)}initLeftRecordsCheckState(e){return(0,rp.Bd)(e,this)}setRadioState(e,t,i,r,n){(0,rc.Oq)(e,t,i,r,n,this)}syncRadioState(e,t,i,r,n,l){return(0,rc.fM)(e,t,i,r,n,l,this)}changeCheckboxAndRadioOrder(e,t){this.checkedState.size&&(0,rp.hR)(e,t,this),this.radioState.length&&(0,rc.tO)(e,t,this)}setCustomSelectRanges(e){var t;(function(e){let{customSelectedRangeComponents:t}=e.table.scenegraph;t.forEach((e,t)=>{e.rect.delete()}),t.clear(),e.select.customSelectRanges=[]})(this),t=this,e.forEach(e=>{!function(e,t,i){let r=e.table,n=t.start.col,l=t.start.row,o=t.end.col,a=t.end.row,s=(t.skipBodyMerge,Math.max(Math.min(o,n),0)),h=Math.max(Math.min(a,l),0),d=Math.min(Math.max(o,n),r.colCount-1),u=Math.min(Math.max(a,l),r.rowCount-1),{needRowHeader:c,needRightRowHeader:p,needColumnHeader:g,needBottomColumnHeader:f,needBody:m,needCornerHeader:b,needRightTopCornerHeader:y,needLeftBottomCornerHeader:v,needRightBottomCornerHeader:_}=(0,iS.L)(s,h,d,u,r);if(b&&rf(e,s,h,Math.min(d,r.frozenColCount-1),Math.min(u,r.frozenRowCount-1),"cornerHeader",`${s}${h}${d}${u}`,[!0,!g,!c,!0],i),y&&rf(e,Math.max(s,r.colCount-r.rightFrozenColCount),h,d,Math.min(u,r.frozenRowCount-1),"rightTopCorner",`${s}${h}${d}${u}`,[!0,!0,!p,!g],i),v){let t=Math.min(d,r.frozenColCount-1);rf(e,s,Math.max(h,r.rowCount-r.bottomFrozenRowCount),t,u,"leftBottomCorner",`${s}${h}${d}${u}`,[!c,!f,!0,!0],i)}if(_&&rf(e,Math.max(s,r.colCount-r.rightFrozenColCount),Math.max(h,r.rowCount-r.bottomFrozenRowCount),d,u,"rightBottomCorner",`${s}${h}${d}${u}`,[!p,!0,!0,!f],i),g&&rf(e,Math.max(s,r.frozenColCount),h,Math.min(d,r.colCount-r.rightFrozenColCount-1),Math.min(u,r.frozenRowCount-1),"columnHeader",`${s}${h}${d}${u}`,[!0,!y,!m,!b],i),f){let t=Math.max(s,r.frozenColCount),n=Math.min(d,r.colCount-r.rightFrozenColCount-1);rf(e,t,Math.max(h,r.rowCount-r.bottomFrozenRowCount),n,u,"bottomFrozen",`${s}${h}${d}${u}`,[!m,!_,!0,!v],i)}if(c){let t=Math.max(h,r.frozenRowCount),n=Math.min(u,r.rowCount-r.bottomFrozenRowCount-1);rf(e,s,t,Math.min(d,r.frozenColCount-1),n,"rowHeader",`${s}${h}${d}${u}`,[!b,!m,!v,!0],i)}if(p){let t=Math.max(h,r.frozenRowCount),n=Math.min(u,r.rowCount-r.bottomFrozenRowCount-1);rf(e,Math.max(s,r.colCount-r.rightFrozenColCount),t,d,n,"rightFrozen",`${s}${h}${d}${u}`,[!y,!0,!_,!m],i)}m&&rf(e,Math.max(s,r.frozenColCount),Math.max(h,r.frozenRowCount),Math.min(d,r.colCount-r.rightFrozenColCount-1),Math.min(u,r.rowCount-r.bottomFrozenRowCount-1),"body",`${s}${h}${d}${u}`,[!g,!p,!f,!c],i)}(t.table.scenegraph,e.range,e.style)}),t.select.customSelectRanges=e,iA(t.table.scenegraph),t.table.scenegraph.updateNextFrame()}}var rb=i(47634),ry=i(96241);function rv(e){if(e.eventManager.bindSparklineHoverEvent)return;let t=!1;(e.isPivotTable()?e.internalProps.layoutMap.indicatorsDefine.some(e=>"string"!=typeof e&&"sparkline"===e.cellType):e.internalProps.layoutMap.columnObjects.some(e=>"sparkline"===e.cellType||"function"==typeof e.cellType))&&(e.eventManager.bindSparklineHoverEvent=!0,e.on(B.B.MOUSEMOVE_CELL,t=>{let{col:i,row:r,x:n,y:l}=t;"sparkline"!==e.getBodyColumnType(i,r)&&e.stateManager.updateSparklineHoverPose(-1,-1,0,0),e.stateManager.updateSparklineHoverPose(i,r,n,l)}),e.on(B.B.MOUSELEAVE_TABLE,t=>{e.stateManager.updateSparklineHoverPose(-1,-1,0,0)}))}var r_=i(13942);function rC(e,t,i=!0){var r,n,l;let{deltaX:o,deltaY:a}=e;e.shiftKey&&e.deltaY&&(o=a,a=0);let[s,h]=function(e,t,i){var r,n;let l=Math.abs(e/t);return[Math.ceil((l<=.5?0:e)*(null!=(r=i.horizontal)?r:0)),Math.ceil((l>2?0:t)*(null!=(n=i.vertical)?n:0))]}(o,a,{horizontal:1,vertical:1});(s||h)&&t.interactionState!==E.F.scrolling&&t.updateInteractionState(E.F.scrolling);let d="scrolling"===(null==(n=null==(r=t.table.options.theme)?void 0:r.scrollStyle)?void 0:n.visible);s&&(t.setScrollLeft(t.scroll.horizontalBarPos+s,e),t.showHorizontalScrollBar(d)),h&&(t.setScrollTop(t.scroll.verticalBarPos+h,e),t.showVerticalScrollBar(d)),i&&t.resetInteractionState(t.interactionStateBeforeScroll),(null==(l=e.nativeEvent)?void 0:l.cancelable)&&("none"===t.table.internalProps.overscrollBehavior&&(a&&rS(t)||o&&rA(t))||Math.abs(a)>=Math.abs(o)&&0!==a&&rx(a,t)||Math.abs(a)<=Math.abs(o)&&0!==o&&rw(o,t))&&e.nativeEvent.preventDefault()}function rx(e,t){var i,r;return 0!=t.table.getAllRowsHeight()-t.table.scenegraph.height&&(i=e,0==(r=t).table.getAllRowsHeight()-r.table.scenegraph.height||!(i<=0)||!(r.scroll.verticalBarPos<1))&&!function(e,t){var i;let r=+(null!=(i=t.table.options.customConfig)&&!!i._disableColumnAndRowSizeRound),n=t.table.getAllRowsHeight()-t.table.scenegraph.height;return 0!==n&&e>=0&&Math.abs(t.scroll.verticalBarPos-n)<1+r}(e,t)}function rw(e,t){var i,r;return 0!=t.table.getAllColsWidth()-t.table.scenegraph.width&&(i=e,0==(r=t).table.getAllColsWidth()-r.table.scenegraph.width||!(i<=0)||!(r.scroll.horizontalBarPos<1))&&!function(e,t){var i;let r=+(null!=(i=t.table.options.customConfig)&&!!i._disableColumnAndRowSizeRound),n=t.table.getAllColsWidth()-t.table.scenegraph.width;return 0!==n&&e>=0&&Math.abs(t.scroll.horizontalBarPos-n)<1+r}(e,t)}function rS(e){return!(e.table.getAllRowsHeight()-e.table.scenegraph.height<=0)}function rA(e){return!(e.table.getAllColsWidth()-e.table.scenegraph.width<=0)}class rk{constructor(e){this.stateManager=e}setScrollHandle(e){this.scrollHandle=e}startInertia(e,t,i){this.lastTime=Date.now(),this.speedX=e,this.speedY=t,this.friction=i,this.runingId||(this.runingId=et.rF.getRequestAnimationFrame()(this.inertia.bind(this)))}inertia(){var e;let t=Date.now(),i=t-this.lastTime,r=!0,n=Math.pow(this.friction,i/16),l=n*this.speedX,o=n*this.speedY,a=0,s=0;Math.abs(l)>.05&&(r=!1,a=(this.speedX+l)/2*i),Math.abs(o)>.05&&(r=!1,s=(this.speedY+o)/2*i),null==(e=this.scrollHandle)||e.call(this,a,s),r?this.runingId=null:(this.lastTime=t,this.speedX=l,this.speedY=o,this.runingId=et.rF.getRequestAnimationFrame()(this.inertia.bind(this)))}endInertia(){et.rF.getCancelAnimationFrame()(this.runingId),this.runingId=null}isInertiaScrolling(){return!!this.runingId}}function rM(e,t,i){var r,n,l,o,a,s,h,d;if(t&&-1!==(null==(r=e.stateManager.columnMove)?void 0:r.colSource)&&-1!==(null==(n=e.stateManager.columnMove)?void 0:n.rowSource)&&-1!==(null==(l=e.stateManager.columnMove)?void 0:l.colTarget)&&-1!==(null==(o=e.stateManager.columnMove)?void 0:o.rowTarget)){if(e.hasListeners(B.B.CHANGE_HEADER_POSITION)){let{colSource:t,rowSource:r,colTarget:n,rowTarget:l,movingColumnOrRow:o}=e.stateManager.columnMove,h=null!=(a=e.stateManager.columnMove.rowSourceSize)?a:0,d=null!=(s=e.stateManager.columnMove.rowTargetSize)?s:0;e.fireListeners(B.B.CHANGE_HEADER_POSITION,{target:{col:n,row:l+d-h},source:{col:t,row:r},movingColumnOrRow:o,event:i})}}else if(!t&&e.hasListeners(B.B.CHANGE_HEADER_POSITION_FAIL)){let t=null!=(h=e.stateManager.columnMove.rowSourceSize)?h:0,r=null!=(d=e.stateManager.columnMove.rowTargetSize)?d:0;e.fireListeners(B.B.CHANGE_HEADER_POSITION_FAIL,{target:{col:e.stateManager.columnMove.colTarget,row:e.stateManager.columnMove.rowTarget+r-t},source:{col:e.stateManager.columnMove.colSource,row:e.stateManager.columnMove.rowSource},movingColumnOrRow:e.stateManager.columnMove.movingColumnOrRow,event:i})}}function rT(e){e.stateManager.endResizeCol();let t=[];for(let i=0;i<e.colCount;i++)t.push(e.getColWidth(i));e.fireListeners(B.B.RESIZE_COLUMN_END,{col:e.stateManager.columnResize.col,colWidths:t})}function rR(e){e.stateManager.endResizeRow(),e.fireListeners(B.B.RESIZE_ROW_END,{row:e.stateManager.rowResize.row,rowHeight:e.getRowHeight(e.stateManager.rowResize.row)})}let rE=1;function rP(){return P.UG?rE=1:(rE=Math.ceil(window.devicePixelRatio||1))>1&&rE%2!=0&&(rE+=1),rE}rP();var rB=function(e,t,i,r){return new(i||(i=Promise))(function(n,l){function o(e){try{s(r.next(e))}catch(e){l(e)}}function a(e){try{s(r.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}s((r=r.apply(e,t||[])).next())})};function rI(e){return!!e.changedTouches}function rL(e,t,i){if(i.indicatorsAsCol){if(i.hasTopIndicatorAxis&&t===i.columnHeaderLevelCount-1&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount)return"top";if(t===i.rowCount-i.bottomFrozenRowCount&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount)return"bottom";if(e===i.rowHeaderLevelCount-1&&t>=i.rowHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return"left"}else{if(e===i.rowHeaderLevelCount-1&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return"left";if(e===i.colCount-i.rightFrozenColCount&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return"right";t===i.rowCount-i.bottomFrozenRowCount&&e>=i.rowHeaderLevelCount&&(i.colCount,i.rightFrozenColCount)}return"bottom"}function rF(e,t,i,r,n,l,o){var a;let s=o||"_vtable_rowSeries_number",h=t+1;for(;(0,e3.Z)(r[h])&&(null==(a=r[h])?void 0:a.length)>i.length;){let t=n.columnHeaderLevelCount+h;n.stateManager.setCheckedState(l,t,s,e),(0,rp.r5)(l,t,e,n),h++}}function rH(e,t,i,r,n,l){var o;let a=t.length-1;if(a>0){let t=e-1;for(;a>0&&t>=0;)((0,e3.Z)(i[t])&&(null==(o=i[t])?void 0:o.length)===a||1===a&&(0,eM.Z)(i[t]))&&(function(e,t,i,r,n){let{checkedState:l}=r.stateManager,o=i.toString(),a=n||"_vtable_rowSeries_number";(0,e3.Z)(i)&&i.length;let s=!1,h=[],d=Array.from(l.keys()).sort((e,t)=>{var i,r;let n=e.split(","),l=t.split(","),o=Math.max(n.length,l.length);for(let e=0;e<o;e++){let t=null!=(i=Number(n[e]))?i:0,o=null!=(r=Number(l[e]))?r:0;if(t!==o)return t-o}return 0}),u=d.map(e=>l.get(e)),c=d.filter(e=>e.startsWith(o+",")&&e!==o);if(u.forEach((e,t)=>{let i=d[t],r=c.includes(i);s&&(r?h.push(e[a]):s=!1),i===o&&(s=!0)}),0===h.length)return;let p=h.every(e=>!!e),g=h.every(e=>!e);p?(r.stateManager.setCheckedState(e,t,a,!0),(0,rp.r5)(e,t,!0,r)):g?(r.stateManager.setCheckedState(e,t,a,!1),(0,rp.r5)(e,t,!1,r)):(r.stateManager.setCheckedState(e,t,a,"indeterminate"),(0,rp.r5)(e,t,"indeterminate",r))}(n,r.columnHeaderLevelCount+t,i[t],r,l),a--),t--}}function rO(e,t,i,r){let{checkedState:n}=i.stateManager,l=t.toString();(0,e3.Z)(t)&&t.length;let o=!1,a=Array.from(n.keys()).sort((e,t)=>{var i,r;let n=e.split(","),l=t.split(","),o=Math.max(n.length,l.length);for(let e=0;e<o;e++){let t=null!=(i=Number(n[e]))?i:0,o=null!=(r=Number(l[e]))?r:0;if(t!==o)return t-o}return 0}),s=a.filter(e=>e.startsWith(l+",")&&e!==l);a.map(e=>n.get(e)).forEach((t,i)=>{let n=a[i],h=0!==s.length&&s.includes(n);o&&(h?t[r]=e:o=!1),n===l&&(o=!0)})}function rD(e,t,i){let r=e.getRecordShowIndexByCell(t,i);return e.dataSource.getHierarchyState(r)}var rz=function(e,t,i,r){return new(i||(i=Promise))(function(n,l){function o(e){try{s(r.next(e))}catch(e){l(e)}}function a(e){try{s(r.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}s((r=r.apply(e,t||[])).next())})};class rW{constructor(e){this.isDown=!1,this.isDraging=!1,this.globalEventListeners=[],this._enableTableScroll=!0,this.cutWaitPaste=!1,this.clipboardCheckTimer=null,this.cutOperationTime=0,this.lastClipboardContent="",this.cutCellRange=null,this.copySourceRange=null,this.table=e,this.handleTextStickBindId=[],this.inertiaScroll=new rk(e.stateManager),"node"===M.X.mode||e.options.disableInteraction||(this.bindOuterEvent(),setTimeout(()=>{this.bindSelfEvent()},0))}bindOuterEvent(){(function(e){let t=e.table,i=t.stateManager;t.scenegraph.tableGroup.addEventListener("pointermove",r=>{var n,l,o,a,s,h,d,u,c,p,g,f,m,y,v,_,C,x;let w=null!=(l=null==(n=t.eventManager.LastPointerXY)?void 0:n.x)?l:r.x,S=null!=(a=null==(o=t.eventManager.LastPointerXY)?void 0:o.y)?a:r.y;t.eventManager.LastPointerXY={x:r.x,y:r.y},e.touchSetTimeout&&(clearTimeout(e.touchSetTimeout),e.touchSetTimeout=void 0);let A=(0,iz.RJ)(r);if(A.eventArgs&&t.hasListeners(B.B.MOUSEMOVE_TABLE)&&t.fireListeners(B.B.MOUSEMOVE_TABLE,{col:A.eventArgs.col,row:A.eventArgs.row,x:A.abstractPos.x,y:A.abstractPos.y,event:r.nativeEvent,target:null==(s=null==A?void 0:A.eventArgs)?void 0:s.target,mergeCellInfo:null==(h=A.eventArgs)?void 0:h.mergeInfo}),i.interactionState===E.F.grabing)return void(Math.abs(w-r.x)+Math.abs(S-r.y)>=1&&(i.isResizeCol()||i.isResizeRow()||i.isMoveCol()||(i.isFillHandle()?e.dealFillSelect(A,!0):(null==(d=t.options.select)?void 0:d.disableDragSelect)||e.dealTableSelect(A,!0))));!(null==(u=t.options.select)?void 0:u.disableDragSelect)&&t.eventManager.isDraging&&i.isSelecting()&&!(null==(c=t.editorManager)?void 0:c.editingEditor)&&e.dealTableSelect(A,!0);let k=r.path.find(e=>"cell"===e.role);if(t.hasListeners(B.B.MOUSELEAVE_CELL)&&(-1===t.stateManager.hover.cellPos.col||-1===t.stateManager.hover.cellPos.row||(null==k?void 0:k.col)===t.stateManager.hover.cellPos.col&&(null==k?void 0:k.row)===t.stateManager.hover.cellPos.row||t.fireListeners(B.B.MOUSELEAVE_CELL,{col:t.stateManager.hover.cellPos.col,row:t.stateManager.hover.cellPos.row,cellRange:t.getCellRangeRelativeRect({col:t.stateManager.hover.cellPos.col,row:t.stateManager.hover.cellPos.row}),scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,event:r.nativeEvent,target:null==(p=null==A?void 0:A.eventArgs)?void 0:p.target})),t.hasListeners(B.B.MOUSEENTER_CELL)&&"cell"===(null==k?void 0:k.role)&&(0,b.Z)(k.col)&&(0,b.Z)(k.row)&&(k.col!==t.stateManager.hover.cellPos.col||k.row!==t.stateManager.hover.cellPos.row)&&(k.col!==(null==(g=t.stateManager.hover.cellPosContainHeader)?void 0:g.col)||k.row!==(null==(f=t.stateManager.hover.cellPosContainHeader)?void 0:f.row))&&t.fireListeners(B.B.MOUSEENTER_CELL,{col:k.col,row:k.row,cellRange:t.getCellRangeRelativeRect({col:k.col,row:k.row}),scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,event:r.nativeEvent,target:null==(m=null==A?void 0:A.eventArgs)?void 0:m.target,mergeCellInfo:null==(y=A.eventArgs)?void 0:y.mergeInfo}),e.dealIconHover(A),e.dealTableHover(A),t.theme.columnResize.visibleOnHover&&e.checkColumnResize(A,!0),A.eventArgs&&t.hasListeners(B.B.MOUSEMOVE_CELL)){let e,i;if(null==(v=A.eventArgs)?void 0:v.target){let t=rh(null==(_=A.eventArgs)?void 0:_.target);t&&(e=t.icon,i=t.position)}t.fireListeners(B.B.MOUSEMOVE_CELL,{col:A.eventArgs.col,row:A.eventArgs.row,x:A.abstractPos.x,y:A.abstractPos.y,event:r.nativeEvent,targetIcon:e?{name:e.name,position:i,funcType:e.attribute.funcType}:void 0,target:null==(C=null==A?void 0:A.eventArgs)?void 0:C.target,mergeCellInfo:null==(x=A.eventArgs)?void 0:x.mergeInfo})}}),t.scenegraph.tableGroup.addEventListener("pointerout",t=>{var i;let r=(0,iz.RJ)(t),n=null==(i=null==r?void 0:r.eventArgs)?void 0:i.target;"table"===(null==n?void 0:n.role)&&e.dealTableHover()}),t.scenegraph.tableGroup.addEventListener("pointerover",e=>{var i,r;let n=(0,iz.RJ)(e),l=null==(i=null==n?void 0:n.eventArgs)?void 0:i.target;if(l&&t.hasListeners(B.B.MOUSEOVER_CHART_SYMBOL)&&"symbol"===l.type){let i=e.composedPath().find(e=>"cell"===e.roll);if(i){let{col:l,row:o}=i,a={col:l,row:o,field:t.getHeaderField(l,o),value:t.getCellValue(l,o),dataValue:t.getCellOriginValue(l,o),cellHeaderPaths:t.internalProps.layoutMap.getCellHeaderPaths(l,o),title:t.getBodyColumnDefine(l,o).title,cellRange:t.getCellRelativeRect(l,o),event:e.nativeEvent,sparkline:{pointData:void 0},scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,target:null==(r=null==n?void 0:n.eventArgs)?void 0:r.target};t.fireListeners(B.B.MOUSEOVER_CHART_SYMBOL,a)}}}),t.scenegraph.tableGroup.addEventListener("pointerenter",e=>{(t.theme.scrollStyle.horizontalVisible&&"focus"===t.theme.scrollStyle.horizontalVisible||!t.theme.scrollStyle.horizontalVisible&&"focus"===t.theme.scrollStyle.visible)&&i.showHorizontalScrollBar(),(t.theme.scrollStyle.verticalVisible&&"focus"===t.theme.scrollStyle.verticalVisible||!t.theme.scrollStyle.verticalVisible&&"focus"===t.theme.scrollStyle.visible)&&i.showVerticalScrollBar(),t.hasListeners(B.B.MOUSEENTER_TABLE)&&t.fireListeners(B.B.MOUSEENTER_TABLE,{event:e.nativeEvent})}),t.scenegraph.tableGroup.addEventListener("pointerleave",r=>{i.isResizeCol()||i.isResizeRow()||i.isMoveCol()||i.isSelecting()||(i.updateInteractionState(E.F.default),i.updateCursor()),(t.theme.scrollStyle.horizontalVisible&&"focus"===t.theme.scrollStyle.horizontalVisible||!t.theme.scrollStyle.horizontalVisible&&"focus"===t.theme.scrollStyle.visible)&&i.hideHorizontalScrollBar(),(t.theme.scrollStyle.verticalVisible&&"focus"===t.theme.scrollStyle.verticalVisible||!t.theme.scrollStyle.verticalVisible&&"focus"===t.theme.scrollStyle.visible)&&i.hideVerticalScrollBar(),t.hasListeners(B.B.MOUSELEAVE_CELL)&&-1!==t.stateManager.hover.cellPos.col&&-1!==t.stateManager.hover.cellPos.row&&t.fireListeners(B.B.MOUSELEAVE_CELL,{col:t.stateManager.hover.cellPos.col,row:t.stateManager.hover.cellPos.row,cellRange:t.getCellRangeRelativeRect({col:t.stateManager.hover.cellPos.col,row:t.stateManager.hover.cellPos.row}),scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,event:r.nativeEvent,target:void 0}),e.dealTableHover();let n=r.target;n&&!n.isDescendantsOf(t.scenegraph.tableGroup)&&t.fireListeners(B.B.MOUSELEAVE_TABLE,{event:r.nativeEvent})}),t.scenegraph.tableGroup.addEventListener("pointerdown",r=>{var n,l,o,a,s;if(t.hasListeners(B.B.MOUSEDOWN_TABLE)&&t.fireListeners(B.B.MOUSEDOWN_TABLE,{event:r.nativeEvent}),(0,M.u)(),t.eventManager.isDown=!0,t.eventManager.LastBodyPointerXY={x:r.x,y:r.y},t.eventManager.LastPointerXY={x:r.x,y:r.y},0!==r.button)return;let h=(0,iz.RJ)(r);if(e.downIcon=void 0,i.interactionState!==E.F.default||(t.isPivotChart()&&"chart"!==(null==(n=null==h?void 0:h.eventArgs)?void 0:n.target.type)&&t.scenegraph.updateChartState(null),(null==(l=h.eventArgs)?void 0:l.target)!==(null==(o=i.residentHoverIcon)?void 0:o.icon)&&i.hideMenu(),"chart"===(null==(a=null==h?void 0:h.eventArgs)?void 0:a.target.type)))return;let d=null==(s=t.editorManager)?void 0:s.completeEdit(r.nativeEvent);(0,P.NC)(d,n=>{var l,o,a,s,d,u,c,p,g,f,m,y;if(!(null==(l=t.options.customConfig)?void 0:l.selectCellWhenCellEditorNotExists)&&!1===n)return;let v=(null==(s=null==(a=null==(o=null==h?void 0:h.eventArgs)?void 0:o.target)?void 0:a.role)?void 0:s.startsWith("icon"))?h.eventArgs.target:(null==(d=r.target.role)?void 0:d.startsWith("icon"))?r.target:void 0;if(e.downIcon=v,v&&!1!==v.attribute.interactive)v.attribute.funcType===ev.cI.dragReorder&&(i.startMoveCol(h.eventArgs.col,h.eventArgs.row,h.abstractPos.x,h.abstractPos.y,null==(m=null==(f=h.eventArgs)?void 0:f.event)?void 0:m.nativeEvent),i.updateInteractionState(E.F.grabing));else{if(e.cellIsHeaderCheck(h))return;if("touch"===r.pointerType){if(e.touchEnd=!1,e.touchSetTimeout=setTimeout(()=>{e.isTouchdown=!1,e.isLongTouch=!0,!e.touchEnd&&(e.checkColumnResize(h,!0)||e.checkRowResize(h,!0))||!e.touchEnd&&e.checkColumnMover(h)?i.updateInteractionState(E.F.grabing):e.dealTableSelect(h)&&!e.touchEnd&&i.updateInteractionState(E.F.grabing)},500),t.hasListeners(B.B.MOUSEENTER_CELL)){let e=r.path.find(e=>"cell"===e.role);"cell"===(null==e?void 0:e.role)&&(0,b.Z)(e.col)&&(0,b.Z)(e.row)&&(e.col!==t.stateManager.hover.cellPos.col||e.row!==t.stateManager.hover.cellPos.row)&&(e.col!==(null==(u=t.stateManager.hover.cellPosContainHeader)?void 0:u.col)||e.row!==(null==(c=t.stateManager.hover.cellPosContainHeader)?void 0:c.row))&&t.fireListeners(B.B.MOUSEENTER_CELL,{col:e.col,row:e.row,cellRange:t.getCellRangeRelativeRect({col:e.col,row:e.row}),scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,event:r.nativeEvent,target:null==(p=null==h?void 0:h.eventArgs)?void 0:p.target,mergeCellInfo:null==(g=h.eventArgs)?void 0:g.mergeInfo})}e.dealTableHover(h)}else{if(!e.checkCellFillhandle(h)&&(e.checkColumnResize(h,!0)||e.checkRowResize(h,!0)))return t.scenegraph.updateChartState(null),void i.updateInteractionState(E.F.grabing);if(e.checkColumnMover(h)||e.checkCellFillhandle(h,!0)&&e.dealFillSelect(h))return void i.updateInteractionState(E.F.grabing);e.dealTableSelect(h)&&i.updateInteractionState(E.F.grabing)}}if(t.hasListeners(B.B.MOUSEDOWN_CELL)){let e=(0,iz.RJ)(r);e.eventArgs&&t.fireListeners(B.B.MOUSEDOWN_CELL,{col:e.eventArgs.col,row:e.eventArgs.row,event:r.nativeEvent,target:null==(y=null==e?void 0:e.eventArgs)?void 0:y.target,mergeCellInfo:e.eventArgs.mergeInfo})}})}),t.scenegraph.tableGroup.addEventListener("pointerup",r=>{var n,l,o,a,s,h,d,u;if(0===r.button){if("grabing"===i.interactionState){if(i.updateInteractionState(E.F.default),i.isResizeCol())rT(t);else if(i.isResizeRow())rR(t);else if(i.isMoveCol()){let e=t.stateManager.endMoveCol();rM(t,e,r.nativeEvent)}else if(i.isSelecting()){t.stateManager.endSelectCells(),t.stateManager.isFillHandle()&&t.stateManager.endFillSelect();let e=(0,iz.RJ)(r);if(t.eventManager.isDraging&&e.eventArgs&&t.hasListeners(B.B.DRAG_SELECT_END)){let i={event:r.nativeEvent,cells:[],col:e.eventArgs.target.col,row:e.eventArgs.target.row,scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,target:null==(n=null==e?void 0:e.eventArgs)?void 0:n.target,mergeCellInfo:null==(l=e.eventArgs)?void 0:l.mergeInfo};i.cells=t.getSelectedCellInfos(),t.fireListeners(B.B.DRAG_SELECT_END,i)}}}else i.interactionState===E.F.scrolling&&i.updateInteractionState(E.F.default);if(!t.eventManager.isDraging){let i=(0,iz.RJ)(r);if(!e.isTouchMove&&0===r.button&&i.eventArgs&&t.hasListeners(B.B.CLICK_CELL)){let e,n,{col:l,row:d}=i.eventArgs,u=t.getCellInfo(l,d);if(null==(o=i.eventArgs)?void 0:o.target){let t=rh(null==(a=i.eventArgs)?void 0:a.target);t&&(e=t.icon,n=t.position)}let c=Object.assign(Object.assign({},u),{event:r.nativeEvent,federatedEvent:r,cells:[],targetIcon:e?{name:e.name,position:n,funcType:e.attribute.funcType}:void 0,target:null==(s=null==i?void 0:i.eventArgs)?void 0:s.target,mergeCellInfo:null==(h=i.eventArgs)?void 0:h.mergeInfo});t.fireListeners(B.B.CLICK_CELL,c)}}if(t.hasListeners(B.B.MOUSEUP_CELL)){let e=(0,iz.RJ)(r);e.eventArgs&&t.fireListeners(B.B.MOUSEUP_CELL,{col:e.eventArgs.col,row:e.eventArgs.row,event:r.nativeEvent,target:null==(d=null==e?void 0:e.eventArgs)?void 0:d.target,mergeCellInfo:null==(u=e.eventArgs)?void 0:u.mergeInfo})}setTimeout(()=>{e.isDown=!1,e.isTouchdown=!1,e.isTouchMove=!1,e.isDraging=!1,e.touchMovePoints=[]},0)}}),t.scenegraph.tableGroup.addEventListener("rightdown",e=>{var r,n,l,o,a,s,h;let d=(0,iz.RJ)(e);if(d.eventArgs){i.triggerContextMenu(d.eventArgs.col,d.eventArgs.row,d.abstractPos.x,d.abstractPos.y);let{col:u,row:c}=d.eventArgs;if(u>=0&&c>=0){let i=t.getSelectedCellRanges(),p=!1;if(i.length>0)for(let e=0;e<i.length;e++){let t=i[e],r=t.start.col,n=t.end.col,l=t.start.row,o=t.end.row;if(u>=r&&u<=n&&c>=l&&c<=o||u>=n&&u<=r&&c>=o&&c<=l||u>=r&&u<=n&&c>=o&&c<=l||u>=n&&u<=r&&c>=l&&c<=o){p=!0;break}}let g=null==(r=t.options.select)?void 0:r.disableSelectOnContextMenu;if(p||g||t.selectCell(u,c),t.hasListeners(B.B.CONTEXTMENU_CELL)){let i,r,p=t.getCellInfo(u,c);if(null==(n=d.eventArgs)?void 0:n.target){let e=rh(null==(l=d.eventArgs)?void 0:l.target);e&&(i=e.icon,r=e.position)}let g=Object.assign(Object.assign({},p),{event:e.nativeEvent,cells:[],targetIcon:i?{name:i.name,position:r,funcType:i.attribute.funcType}:void 0,target:null==(o=null==d?void 0:d.eventArgs)?void 0:o.target,mergeCellInfo:null==(a=d.eventArgs)?void 0:a.mergeInfo});(null==(h=null==(s=t.options.eventOptions)?void 0:s.contextmenuReturnAllSelectedCells)||h)&&((0,P.yD)(t.stateManager.select.ranges,u,c)?g.cells=t.getSelectedCellInfos():g.cells=[[p]]),t.fireListeners(B.B.CONTEXTMENU_CELL,g)}}}}),t.scenegraph.tableGroup.addEventListener("pointertap",r=>{var n;if(t.stateManager.columnResize.resizing)return;let l=(0,iz.RJ)(r);if(!t.stateManager.columnResize.resizing&&!t.stateManager.columnMove.moving&&(e.dealIconClick(r,l),(null==l?void 0:l.eventArgs)&&e.touchSetTimeout&&"touch"===r.pointerType)){let t=(0,iz.RJ)(r);if(e.touchSetTimeout){clearTimeout(e.touchSetTimeout);let r=!!(null==(n=i.select.ranges)?void 0:n.length);e.dealTableSelect(t),i.endSelectCells(!0,r),e.touchSetTimeout=void 0}}}),t.scenegraph.stage.addEventListener("pointerdown",r=>{var n,l,o,a;let s=(0,iz.RJ)(r);(null==(n=s.eventArgs)?void 0:n.target)&&(null==(l=s.eventArgs)?void 0:l.target)===(null==(o=i.residentHoverIcon)?void 0:o.icon)||i.hideMenu();let h=!1,d=r.target;d===t.scenegraph.tableGroup||d.isDescendantsOf(t.scenegraph.tableGroup)||(h=null==(a=t.editorManager)?void 0:a.completeEdit(r.nativeEvent)),(0,P.NC)(h,n=>{var l,o;if(!(null==(l=t.options.customConfig)?void 0:l.selectCellWhenCellEditorNotExists)&&!1===n)return;let a=(null==(o=r.target.role)?void 0:o.startsWith("icon"))?r.target:void 0;if(e.downIcon=a,"touch"===r.pointerType||a||e.checkCellFillhandle(s)||i.columnResize.resizing||!e.checkColumnResize(s,!0));else{t.scenegraph.updateChartState(null),i.updateInteractionState(E.F.grabing);let{eventArgs:e}=s;!(null==e?void 0:e.targetCell)&&t.getCellAt(s.abstractPos.x-t.theme.columnResize.resizeHotSpotSize/2,s.abstractPos.y)&&t.hasListeners(B.B.MOUSEDOWN_TABLE)&&t.fireListeners(B.B.MOUSEDOWN_TABLE,{event:r.nativeEvent})}})}),t.scenegraph.stage.addEventListener("pointerup",e=>{"grabing"===i.interactionState&&(i.updateInteractionState(E.F.default),i.isResizeCol()?rT(t):i.isResizeRow()&&rR(t))}),t.scenegraph.stage.addEventListener("pointertap",r=>{var n,l,o,a,s;let h=r.target;if(t.eventManager.isDraging||!h||!h.isDescendantsOf(t.scenegraph.stage)&&h.stage!==h||h.isDescendantsOf(t.scenegraph.tableGroup))t.eventManager.isDraging&&i.isSelecting()&&i.endSelectCells();else{i.updateInteractionState(E.F.default),e.dealTableHover();let h=!!(null==(n=i.select.ranges)?void 0:n.length);(null==(l=t.options.customConfig)?void 0:l.cancelSelectCellHook)?(null==(o=t.options.customConfig)?void 0:o.cancelSelectCellHook(r))&&e.dealTableSelect():(null==(s=null==(a=t.options.select)?void 0:a.blankAreaClickDeselect)||s)&&e.dealTableSelect(),i.endSelectCells(!0,h),i.updateCursor(),t.scenegraph.updateChartState(null)}}),t.scenegraph.stage.addEventListener("pointermove",r=>{var n,l,o;let a=(0,iz.RJ)(r);null!=(o=null==(l=null==(n=r.target)?void 0:n.isDescendantsOf)?void 0:l.call(n,t.scenegraph.tableGroup))&&o&&(i.isResizeCol()||e.checkColumnResize(a)?t.stateManager.select&&e.checkCellFillhandle(a)?i.updateCursor("crosshair"):i.updateCursor("col-resize"):i.isResizeRow()||e.checkRowResize(a)?t.stateManager.select&&e.checkCellFillhandle(a)?i.updateCursor("crosshair"):i.updateCursor("row-resize"):i.isMoveCol()||i.updateCursor())}),t.scenegraph.tableGroup.addEventListener("checkbox_state_change",e=>{var i,r;let n=(0,iz.RJ)(e),{col:l,row:o}=n.eventArgs,a=t.getCellInfo(l,o),s=(0,e_.Z)(t,l,o);if(s)for(let i=s.start.col;i<=s.end.col;i++)for(let r=s.start.row;r<=s.end.row;r++)t.scenegraph.getCell(i,r).forEachChildren(t=>{"checkbox"===t.name&&t.setAttributes({checked:e.target.attribute.checked,indeterminate:e.target.attribute.indeterminate})});let h=Object.assign(Object.assign({},a),{event:e.nativeEvent,target:null==(i=null==n?void 0:n.eventArgs)?void 0:i.target,mergeCellInfo:null==(r=null==n?void 0:n.eventArgs)?void 0:r.mergeInfo,checked:e.detail.checked});if(t.isHeader(l,o))t.stateManager.setHeaderCheckedState(a.field,e.detail.checked),t.internalProps.enableHeaderCheckboxCascade&&"checkbox"===t.getCellType(l,o)&&t.scenegraph.updateCheckboxCellState(l,o,e.detail.checked);else if(t.stateManager.setCheckedState(l,o,a.field,e.detail.checked),t.internalProps.enableCheckboxCascade&&"checkbox"===t.getCellType(l,o)){let e=t.stateManager.headerCheckedState[a.field],i=t.stateManager.updateHeaderCheckedState(a.field,l,o);e!==i&&t.scenegraph.updateHeaderCheckboxCellState(l,o,i)}t.fireListeners(B.B.CHECKBOX_STATE_CHANGE,h),t.scenegraph.updateNextFrame()}),t.scenegraph.tableGroup.addEventListener("radio_checked",e=>{var i,r,n;let l=(0,iz.RJ)(e),{col:o,row:a,target:s}=l.eventArgs,h=t.getCellInfo(o,a),d=null==(i=iz.xD.exec(s.id))?void 0:i[1],u=(0,e_.Z)(t,o,a);if(u)for(let e=u.start.col;e<=u.end.col;e++)for(let i=u.start.row;i<=u.end.row;i++)t.scenegraph.getCell(e,i).forEachChildren(e=>{"radio"===e.name&&e.id===s.id&&e.setAttributes({checked:!0})});let c=t.getBodyColumnDefine(o,a).radioCheckType||"column";if("cell"===c)if(u)for(let e=u.start.col;e<=u.end.col;e++)for(let i=u.start.row;i<=u.end.row;i++)t.scenegraph.getCell(e,i).forEachChildren(e=>{"radio"===e.name&&e.id!==s.id&&e.setAttributes({checked:!1})});else t.scenegraph.getCell(o,a).forEachChildren(e=>{"radio"===e.name&&e.id!==s.id&&e.setAttributes({checked:!1})});else"column"===c&&t.scenegraph.getColGroup(o).forEachChildren(e=>{e.forEachChildren(e=>{"radio"===e.name&&e.id!==s.id&&e.setAttributes({checked:!1})})});let p=d?Number(d):void 0;t.stateManager.setRadioState(o,a,h.field,c,p);let g=Object.assign(Object.assign({},h),{event:e.nativeEvent,target:null==(r=null==l?void 0:l.eventArgs)?void 0:r.target,mergeCellInfo:null==(n=null==l?void 0:l.eventArgs)?void 0:n.mergeInfo,radioIndexInCell:p});t.fireListeners(B.B.RADIO_STATE_CHANGE,g),t.scenegraph.updateNextFrame()}),t.scenegraph.tableGroup.addEventListener("switch_state_change",e=>{var i,r;let n=(0,iz.RJ)(e),{col:l,row:o,target:a}=n.eventArgs,s=t.getCellInfo(l,o),h=(0,e_.Z)(t,l,o);if(h)for(let i=h.start.col;i<=h.end.col;i++)for(let r=h.start.row;r<=h.end.row;r++)t.scenegraph.getCell(i,r).forEachChildren(t=>{"switch"===t.name&&t.setAttributes({checked:e.target.attribute.checked})});let d=Object.assign(Object.assign({},s),{event:e.nativeEvent,target:null==(i=null==n?void 0:n.eventArgs)?void 0:i.target,mergeCellInfo:null==(r=null==n?void 0:n.eventArgs)?void 0:r.mergeInfo,checked:e.detail.checked});t.stateManager.setCheckedState(l,o,s.field,e.detail.checked),t.fireListeners(B.B.SWITCH_STATE_CHANGE,d),t.scenegraph.updateNextFrame()}),t.scenegraph.stage.addEventListener("wheel",e=>{var r;e.path.find(e=>"legend"===e.name)||(null==(r=t.editorManager)||r.completeEdit(),t.eventManager._enableTableScroll&&rC(e,i))})})(this),function(e){let t=e.table,i=t.stateManager,r=t.internalProps.handler;function n(e){var i;if(t.hasListeners(B.B.KEYDOWN)){let r={keyCode:null!=(i=e.keyCode)?i:e.which,code:e.code,event:e,scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth};t.fireListeners(B.B.KEYDOWN,r)}}r.on(t.getElement(),"blur",i=>{var r;let n=i.relatedTarget;if(n){let e=t.stateManager.select.ranges,i=1===e.length&&e[0].start.col===e[0].end.col&&e[0].start.row===e[0].end.row&&t.getEditor(t.stateManager.select.cellPos.col,t.stateManager.select.cellPos.row);if((null==(r=null==i?void 0:i.getInputElement)?void 0:r.call(i))===n)return}e.dealTableHover()}),r.on(t.getElement(),"keydown",r=>{var l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,I,L,F,H,O,D,z;let W={keyCode:null!=(l=r.keyCode)?l:r.which,code:r.code,event:r};if(t.fireListeners(B.B.BEFORE_KEYDOWN,W),"a"===r.key&&(r.ctrlKey||r.metaKey))(null==(o=t.keyboardOptions)?void 0:o.selectAllOnCtrlA)&&(r.preventDefault(),e.deelTableSelectAll());else if(i.select.cellPos.col>=0&&i.select.cellPos.row>=0&&("ArrowUp"===r.key||"ArrowDown"===r.key||"ArrowLeft"===r.key||"ArrowRight"===r.key)){let e,n;if((null==(s=null==(a=t.options.keyboardOptions)?void 0:a.moveEditCellOnArrowKeys)||!s)&&(null==(h=t.editorManager)?void 0:h.editingEditor)||!1===(null==(d=t.options.keyboardOptions)?void 0:d.moveSelectedCellOnArrowKeys)||(r.preventDefault(),r.stopPropagation(),"ArrowUp"===r.key?r.ctrlKey||r.metaKey?(e=i.select.cellPos.col,n=0):(r.shiftKey,e=i.select.cellPos.col,n=Math.min(t.rowCount-1,Math.max(0,i.select.cellPos.row-1))):"ArrowDown"===r.key?r.ctrlKey||r.metaKey?(e=i.select.cellPos.col,n=t.rowCount-1):(r.shiftKey,e=i.select.cellPos.col,n=Math.min(t.rowCount-1,Math.max(0,i.select.cellPos.row+1))):"ArrowLeft"===r.key?r.ctrlKey||r.metaKey?(e=0,n=i.select.cellPos.row):(r.shiftKey,n=i.select.cellPos.row,e=Math.min(t.colCount-1,Math.max(0,i.select.cellPos.col-1))):"ArrowRight"===r.key&&(r.ctrlKey||r.metaKey?(e=t.colCount-1,n=i.select.cellPos.row):(r.shiftKey,n=i.select.cellPos.row,e=Math.min(t.colCount-1,Math.max(0,i.select.cellPos.col+1)))),tC(t,e,n)))return;let l=!!(null==(u=t.editorManager)?void 0:u.editingEditor);null==(c=t.editorManager)||c.completeEdit(),t.getElement().focus();let o=null==(g=null==(p=t.options.keyboardOptions)?void 0:p.shiftMultiSelect)||g;t.selectCell(e,n,r.shiftKey&&o),null!=(m=null==(f=t.options.keyboardOptions)?void 0:f.moveEditCellOnArrowKeys)&&m&&l&&t.getEditor(e,n)&&(null==(b=t.editorManager)||b.startEditCell(e,n))}else if("Escape"===r.key)null==(y=t.editorManager)||y.cancelEdit(),t.getElement().focus();else if("Enter"===r.key){if(null==(v=t.editorManager)?void 0:v.editingEditor){if(n(r),null==(_=t.editorManager)||_.completeEdit(),t.getElement().focus(),!0===(null==(C=t.options.keyboardOptions)?void 0:C.moveFocusCellOnEnter)){let e=i.select.cellPos.col,n=Math.min(t.rowCount-1,Math.max(0,i.select.cellPos.row+1));if(tC(t,e,n))return;let l=null==(w=null==(x=t.options.keyboardOptions)?void 0:x.shiftMultiSelect)||w;t.selectCell(e,n,r.shiftKey&&l)}return}if(!0===(null==(S=t.options.keyboardOptions)?void 0:S.moveFocusCellOnEnter)){let e=i.select.cellPos.col,n=Math.min(t.rowCount-1,Math.max(0,i.select.cellPos.row+1));if(tC(t,e,n))return;let l=null==(k=null==(A=t.options.keyboardOptions)?void 0:A.shiftMultiSelect)||k;t.selectCell(e,n,r.shiftKey&&l)}else if((null==(T=null==(M=t.options.keyboardOptions)?void 0:M.editCellOnEnter)||T)&&1===(null!=(E=null==(R=t.stateManager.select.ranges)?void 0:R.length)?E:0)){let e=t.stateManager.select.ranges[0].start.col,i=t.stateManager.select.ranges[0].start.row,r=t.stateManager.select.ranges[0].end.col,n=t.stateManager.select.ranges[0].end.row;e===r&&i===n&&t.getEditor(e,i)&&(null==(P=t.editorManager)||P.startEditCell(e,i))}}else if("Tab"===r.key){if((null==(L=null==(I=t.options.keyboardOptions)?void 0:I.moveFocusCellOnTab)||L)&&i.select.cellPos.col>=0&&i.select.cellPos.row>=0){let e,n;if(i.select.cellPos.col===t.colCount-1&&i.select.cellPos.row===t.rowCount-1||(r.preventDefault(),i.select.cellPos.col===t.colCount-1?(n=Math.min(t.rowCount-1,i.select.cellPos.row+1),e=t.rowHeaderLevelCount):(n=i.select.cellPos.row,e=i.select.cellPos.col+1),tC(t,e,n)))return;let l=!!(null==(F=t.editorManager)?void 0:F.editingEditor);null==(H=t.editorManager)||H.completeEdit(),t.getElement().focus(),t.selectCell(e,n),l&&t.getEditor(e,n)&&(null==(O=t.editorManager)||O.startEditCell(e,n))}}else if(!r.ctrlKey&&!r.metaKey){let e=t.options.editCellTrigger,n=t.stateManager.select.ranges;1===n.length&&n[0].start.col===n[0].end.col&&n[0].start.row===n[0].end.row&&("keydown"===e||Array.isArray(e)&&e.includes("keydown"))&&!(null==(D=t.editorManager)?void 0:D.editingEditor)&&r.key.match(/^[a-zA-Z0-9+\-*\/%=.,\s]$/)&&(t.editorManager&&(t.editorManager.beginTriggerEditCellMode="keydown"),null==(z=t.editorManager)||z.startEditCell(i.select.cellPos.col,i.select.cellPos.row,""))}n(r)}),r.on(t.getElement(),"copy",i=>rB(this,void 0,void 0,function*(){var r;(null==(r=t.keyboardOptions)?void 0:r.copySelected)&&e.handleCopy(i)})),r.on(t.getElement(),"cut",i=>rB(this,void 0,void 0,function*(){var r;(null==(r=t.keyboardOptions)?void 0:r.cutSelected)&&e.handleCut(i)})),r.on(t.getElement(),"paste",i=>rB(this,void 0,void 0,function*(){var r;(null==(r=t.keyboardOptions)?void 0:r.pasteValueToCell)&&e.handlePaste(i)})),r.on(t.getElement(),"contextmenu",e=>{var i;!1!==(null==(i=t.eventOptions)?void 0:i.preventDefaultContextMenu)?e.preventDefault():o(e)}),t.options.canvas||r.on(t.getContainer(),"resize",e=>{var i;t.isReleased||0===e.width&&0===e.height||((t.autoFillWidth||t.autoFillHeight||"adaptive"===t.widthMode||"adaptive"===t.heightMode)&&(null==(i=t.editorManager)||i.completeEdit()),(0,b.Z)(t.options.pixelRatio)||t.setPixelRatio(rP()),e.windowSizeNotChange||t.resize())});let l=r=>{var n;if(t.isReleased)return;t.eventManager.LastBodyPointerXY={x:r.x,y:r.y},t.eventManager.isDown=!0;let l=r.target;if(!t.getElement().contains(l)&&!t.internalProps.menuHandler.containElement(l)){let l=null==(n=t.editorManager)?void 0:n.completeEdit(r);(0,P.NC)(l,r=>{var n,l;if(!1!==r&&(null==(n=t.options.select)?void 0:n.outsideClickDeselect)){let t=!!(null==(l=i.select.ranges)?void 0:l.length);e.dealTableSelect(),i.endSelectCells(!0,t)}})}};e.globalEventListeners.push({name:"pointerdown",env:"vglobal",callback:l}),et.rF.addEventListener("pointerdown",l);let o=r=>{var n,l;if(t.isReleased)return;let o=r.target;if(o!==t.canvas&&(e=>{var r,n;if(i.menu.isShow&&setTimeout(()=>{t.internalProps.menuHandler.pointInMenuElement(e.clientX,e.clientY)||i.menu.isShow&&i.hideMenu()},0),i.isResizeCol())rT(t);else if(i.isResizeRow())rR(t);else if(i.isMoveCol()){let i=t.stateManager.endMoveCol();rM(t,i,e)}else if(i.isSelecting()&&(null==(n=null==(r=t.stateManager.select)?void 0:r.ranges)?void 0:n.length)){let i=t.stateManager.select.ranges[t.stateManager.select.ranges.length-1].end.col,r=t.stateManager.select.ranges[t.stateManager.select.ranges.length-1].end.row;if(t.stateManager.endSelectCells(),t.hasListeners(B.B.DRAG_SELECT_END)){let n={event:e,cells:[],col:i,row:r,scaleRatio:t.canvas.getBoundingClientRect().width/t.canvas.offsetWidth,target:void 0};n.cells=t.getSelectedCellInfos(),t.fireListeners(B.B.DRAG_SELECT_END,n)}}})(r),t.eventManager.LastBodyPointerXY=null,t.eventManager.isDown=!1,t.eventManager.isDraging=!1,t.eventManager.inertiaScroll.endInertia(),"grabing"===i.interactionState&&i.isResizeCol())rT(t);else if("grabing"===i.interactionState&&i.isResizeRow())rR(t);else if(i.isMoveCol()){let e=t.stateManager.endMoveCol();rM(t,e,r)}else if((null==(n=t.editorManager)?void 0:n.editingEditor)&&!t.getElement().contains(o)){let n=null==(l=t.editorManager)?void 0:l.completeEdit(r);(0,P.NC)(n,t=>{!1!==t&&(i.updateInteractionState(E.F.default),e.dealTableHover())})}i.updateInteractionState(E.F.default)};e.globalEventListeners.push({name:"pointerup",env:"vglobal",callback:o}),et.rF.addEventListener("pointerup",o);let a=r=>{var n,l,o,a,s;if(t.eventManager.isDown&&t.eventManager.LastBodyPointerXY){let e=null!=(l=null==(n=t.eventManager.LastBodyPointerXY)?void 0:n.x)?l:r.x,i=null!=(a=null==(o=t.eventManager.LastBodyPointerXY)?void 0:o.y)?a:r.y;(Math.abs(e-r.x)>1||Math.abs(i-r.y)>1)&&(t.eventManager.isDraging=!0)}let{x:h,y:d}=t._getMouseAbstractPoint(r);i.interactionState===E.F.grabing&&(i.isResizeCol()?(e.dealColumnResize(h,d),t.hasListeners(B.B.RESIZE_COLUMN)&&t.fireListeners(B.B.RESIZE_COLUMN,{col:t.stateManager.columnResize.col,colWidth:t.getColWidth(t.stateManager.columnResize.col)})):i.isResizeRow()?(e.dealRowResize(h,d),t.hasListeners(B.B.RESIZE_ROW)&&t.fireListeners(B.B.RESIZE_ROW,{row:t.stateManager.rowResize.row,rowHeight:t.getRowHeight(t.stateManager.rowResize.row)})):i.isMoveCol()&&e.dealColumnMover(h,d,r));let u=t.stateManager.isSelecting();if(e._enableTableScroll&&e.isDraging&&u&&(null==(s=t.stateManager.select.ranges)?void 0:s.length)>0){let e=t.getDrawRange(),i=t.getFrozenRowsHeight(),r=t.getBottomFrozenRowsHeight(),n=t.getFrozenColsWidth(),l=t.getRightFrozenColsWidth(),o=t.stateManager.select.ranges[t.stateManager.select.ranges.length-1].start;if(t.isSeriesNumber(o.col,o.row))return;let a=t.stateManager.select.ranges[t.stateManager.select.ranges.length-1].end,s=(!1===t.isFrozenRow(o.row)||!1===t.isFrozenRow(a.row))&&t.getAllRowsHeight()>t.tableNoFrameHeight,u=(!1===t.isFrozenColumn(o.col)||!1===t.isFrozenColumn(a.col))&&t.getAllColsWidth()>t.tableNoFrameWidth;if((d>e.bottom-r||d<e.top+i)&&s||(h>e.right-l||h<e.left+n)&&u){t.eventManager.scrollXSpeed=0,t.eventManager.scrollYSpeed=0;let o=!1,a=!1,c=!1,p=!1;d>e.bottom-r&&s&&t.scrollTop+t.tableNoFrameHeight<t.getAllRowsHeight()?(o=!0,t.eventManager.scrollYSpeed=-(d-e.bottom+r)/50):d<e.top+i&&s&&t.scrollTop>0&&(a=!0,t.eventManager.scrollYSpeed=-(d-e.top-i)/50),h>e.right-l&&u&&t.scrollLeft+t.tableNoFrameWidth<t.getAllColsWidth()?(c=!0,t.eventManager.scrollXSpeed=-(h-e.right+l)/50):h<e.left+n&&u&&t.scrollLeft>0&&(p=!0,t.eventManager.scrollXSpeed=-(h-e.left-n)/50),t.eventManager.inertiaScroll.startInertia(t.eventManager.scrollXSpeed,t.eventManager.scrollYSpeed,1),t.eventManager.inertiaScroll.setScrollHandle((s,u)=>{var g;let f,m;rC({deltaX:-s,deltaY:-u},t.stateManager,!1),o?m=t.scrollTop+e.height-r-20:a&&(m=t.scrollTop+i+20),c?f=t.scrollLeft+e.width-l-20:p&&(f=t.scrollLeft+n+20);let y=!1,v=!1;c||p||(h>t.tableNoFrameWidth-t.getRightFrozenColsWidth()&&h<t.tableNoFrameWidth||h>0&&h<t.getFrozenColsWidth()?(f=h,v=!0):f=t.scrollLeft+h),o||a||(d>t.tableNoFrameHeight-t.getBottomFrozenRowsHeight()&&d<t.tableNoFrameHeight||d>0&&d<t.getFrozenRowsHeight()?(m=d,y=!0):m=t.scrollTop+d),t.stateManager.updateInteractionState(E.F.grabing);let _=t.getTargetColAtConsiderRightFrozen(f,v),C=t.getTargetRowAtConsiderBottomFrozen(m,y);!(null==(g=t.options.select)?void 0:g.disableDragSelect)&&(0,b.Z)(_)&&(0,b.Z)(C)&&t.stateManager.updateSelectPos("row"===t.stateManager.select.selectInline?t.colCount-1:_.col,"col"===t.stateManager.select.selectInline?t.rowCount-1:C.row,!1,!1,!1,!1)})}else t.eventManager.inertiaScroll.isInertiaScrolling()?t.eventManager.inertiaScroll.endInertia():t.eventManager.scrollYSpeed=0}};e.globalEventListeners.push({name:"pointermove",env:"vglobal",callback:a}),et.rF.addEventListener("pointermove",a)}(this),function(e){let t=e.table,i=t.stateManager,r=t.scenegraph;r.component.vScrollBar.addEventListener("pointerover",e=>{i.showVerticalScrollBar()}),r.component.hScrollBar.addEventListener("pointerover",e=>{i.showHorizontalScrollBar()}),r.component.vScrollBar.addEventListener("pointerout",e=>{i.interactionState!==E.F.scrolling&&i.hideVerticalScrollBar()}),r.component.hScrollBar.addEventListener("pointerout",e=>{i.interactionState!==E.F.scrolling&&i.hideHorizontalScrollBar()}),r.component.vScrollBar.addEventListener("pointermove",e=>{r.table.stateManager.updateCursor("default"),e.stopPropagation()}),r.component.vScrollBar.addEventListener("pointerdown",e=>{e.stopPropagation(),r.table.hasListeners(B.B.MOUSEDOWN_TABLE)&&r.table.fireListeners(B.B.MOUSEDOWN_TABLE,{event:e.nativeEvent})}),r.component.vScrollBar.addEventListener("scrollDown",e=>{var t;r.table.eventManager.LastBodyPointerXY={x:e.x,y:e.y},r.table.eventManager.isDown=!0,i.interactionState!==E.F.scrolling&&i.updateInteractionState(E.F.scrolling),r.table.stateManager.hideMenu(),null==(t=r.table.editorManager)||t.completeEdit(),r.table.hasListeners(B.B.MOUSEDOWN_TABLE)&&r.table.fireListeners(B.B.MOUSEDOWN_TABLE,{event:e.nativeEvent})}),r.component.vScrollBar.addEventListener("pointerup",()=>{i.fastScrolling=!1,r.table.eventManager.isDraging=!1,i.interactionState===E.F.scrolling&&i.updateInteractionState(E.F.default)}),r.component.vScrollBar.addEventListener("pointerupoutside",()=>{i.fastScrolling=!1,i.interactionState===E.F.scrolling&&i.updateInteractionState(E.F.default)}),r.component.vScrollBar.addEventListener("scrollUp",e=>{r.table.eventManager.isDraging=!1}),r.component.hScrollBar.addEventListener("pointermove",e=>{r.table.stateManager.updateCursor(),e.stopPropagation()}),r.component.hScrollBar.addEventListener("pointerdown",e=>{e.stopPropagation(),r.table.hasListeners(B.B.MOUSEDOWN_TABLE)&&r.table.fireListeners(B.B.MOUSEDOWN_TABLE,{event:e.nativeEvent})}),r.component.hScrollBar.addEventListener("scrollDown",e=>{var t;r.table.eventManager.LastBodyPointerXY={x:e.x,y:e.y},r.table.eventManager.isDown=!0,i.interactionState!==E.F.scrolling&&i.updateInteractionState(E.F.scrolling),r.table.stateManager.hideMenu(),null==(t=r.table.editorManager)||t.completeEdit(),r.table.hasListeners(B.B.MOUSEDOWN_TABLE)&&r.table.fireListeners(B.B.MOUSEDOWN_TABLE,{event:e.nativeEvent})}),r.component.hScrollBar.addEventListener("pointerup",()=>{i.fastScrolling=!1,r.table.eventManager.isDraging=!1,i.interactionState===E.F.scrolling&&i.updateInteractionState(E.F.default)}),r.component.hScrollBar.addEventListener("pointerupoutside",()=>{i.fastScrolling=!1,i.interactionState===E.F.scrolling&&i.updateInteractionState(E.F.default)}),r.component.hScrollBar.addEventListener("scrollUp",e=>{r.table.eventManager.isDraging=!1});let n=(0,H.P2)(i.updateVerticalScrollBar,20),l=(0,H.P2)(i.updateHorizontalScrollBar,20);r.component.vScrollBar.addEventListener("scrollDrag",e=>{r.table.eventManager.isDown&&(r.table.eventManager.isDraging=!0),i.fastScrolling=!0,i.interactionState!==E.F.scrolling&&i.updateInteractionState(E.F.scrolling),n(e.detail.value[0]/(1-e.detail.value[1]+e.detail.value[0]),e)}),r.component.hScrollBar.addEventListener("scrollDrag",e=>{r.table.eventManager.isDown&&(r.table.eventManager.isDraging=!0),i.fastScrolling=!0,i.interactionState!==E.F.scrolling&&i.updateInteractionState(E.F.scrolling),l(e.detail.value[0]/(1-e.detail.value[1]+e.detail.value[0]))})}(this),function(e){let t=e.table,i=t.stateManager,r=t.scenegraph;if(!1===et.rF.envContribution.supportsTouchEvents)return;et.rF.addEventListener("contextmenu",e=>{e.stopPropagation(),e.preventDefault()},{capture:!0}),e.touchMovePoints=[],t.scenegraph.tableGroup.addEventListener("touchstart",i=>{var n,l,o,a,s,h,d,u;if(i.target.isChildOf(r.component.vScrollBar)||i.target.isChildOf(r.component.vScrollBar))return;e.isTouchdown=!0;let c=i.nativeEvent;e.touchMovePoints.push({x:t.rotateDegree?null!=(o=null==(l=null==(n=c.changedTouches)?void 0:n[0])?void 0:l._canvasX)?o:null==(a=i.canvas)?void 0:a.x:i.page.x,y:t.rotateDegree?null!=(d=null==(h=null==(s=c.changedTouches)?void 0:s[0])?void 0:h._canvasY)?d:null==(u=i.canvas)?void 0:u.y:i.page.y,timestamp:Date.now()})});let n=r=>{var n,l;if(e.isLongTouch&&r.preventDefault(),e.isTouchdown&&rI(r)){if(e.isTouchMove=!0,(null==(l=null==(n=e.downIcon)?void 0:n.attribute)?void 0:l.funcType)===ev.cI.dragReorder)r.preventDefault();else if(e.touchMovePoints.length>4&&e.touchMovePoints.shift(),e.touchMovePoints.push({x:t.rotateDegree?r.changedTouches[0]._canvasX:r.changedTouches[0].pageX,y:t.rotateDegree?r.changedTouches[0]._canvasY:r.changedTouches[0].pageY,timestamp:Date.now()}),e._enableTableScroll){let n=-e.touchMovePoints[e.touchMovePoints.length-1].x+e.touchMovePoints[e.touchMovePoints.length-2].x,l=-e.touchMovePoints[e.touchMovePoints.length-1].y+e.touchMovePoints[e.touchMovePoints.length-2].y;rC({deltaX:n,deltaY:l},i),r.cancelable&&("none"===t.internalProps.overscrollBehavior&&(l&&rS(i)||n&&rA(i))||Math.abs(l)>=Math.abs(n)&&0!==l&&rx(l,i)||Math.abs(l)<=Math.abs(n)&&0!==n&&rw(n,i))&&r.preventDefault()}}};et.rF.addEventListener("touchmove",n,{passive:!1}),e.globalEventListeners.push({name:"touchmove",env:"vglobal",callback:n});let l=i=>{var r,n,l,o;if(e.touchEnd=!0,e.isLongTouch=!1,e.isTouchdown&&rI(i)){if((null==(n=null==(r=e.downIcon)?void 0:r.attribute)?void 0:n.funcType)===ev.cI.dragReorder)i.preventDefault();else if((null==(l=e.touchMovePoints)?void 0:l.length)&&(e.touchMovePoints.length>4&&e.touchMovePoints.shift(),e.touchMovePoints.push({x:t.rotateDegree?i.changedTouches[0]._canvasX:i.changedTouches[0].pageX,y:t.rotateDegree?i.changedTouches[0]._canvasY:i.changedTouches[0].pageY,timestamp:Date.now()}),e._enableTableScroll)){let i=e.touchMovePoints[0],r=e.touchMovePoints[(null==(o=e.touchMovePoints)?void 0:o.length)-1],n=(r.x-i.x)/(r.timestamp-i.timestamp),l=(r.y-i.y)/(r.timestamp-i.timestamp);e.inertiaScroll.startInertia(n,l,.95),t.eventManager.inertiaScroll.setScrollHandle((e,i)=>{rC({deltaX:-e,deltaY:-i},t.stateManager)})}e.isTouchdown=!1,e.isTouchMove=!1,e.isDraging=!1,e.touchMovePoints=[]}};et.rF.addEventListener("touchend",l),e.globalEventListeners.push({name:"touchend",env:"vglobal",callback:l});let o=t=>{e.touchEnd=!0,e.isLongTouch=!1,e.isTouchdown&&(e.isTouchdown=!1,e.isTouchMove=!1,e.touchMovePoints=[],e.isDraging=!1)};et.rF.addEventListener("touchcancel",o),e.globalEventListeners.push({name:"touchcancel",env:"vglobal",callback:o})}(this),function(e){let t=e.table;e.gesture=new r_.o(t.scenegraph.tableGroup,{tap:{interval:300}}),e.gesture.on("doubletap",e=>{!function(e,t){var i,r,n,l,o,a;let s=(0,iz.RJ)(e),h=-1,d=-1;s.eventArgs&&(h=s.eventArgs.col,d=s.eventArgs.row);let u=t.getCellValue(h,d),c=null==(r=null==(i=s.eventArgs)?void 0:i.targetCell)?void 0:r.globalAABBBounds;if(c&&t.internalProps.focusControl.setFocusRect(new F.U(c.x1+t.scrollLeft,c.y1+t.scrollTop,c.x2-c.x1,c.y2-c.y1),u),t.hasListeners(B.B.DBLCLICK_CELL)){let i,r,u=t.getCellInfo(h,d);if(null==(n=s.eventArgs)?void 0:n.target){let e=rh(null==(l=s.eventArgs)?void 0:l.target);e&&(i=e.icon,r=e.position)}let c=Object.assign(Object.assign({},u),{event:e.nativeEvent,federatedEvent:e,cells:[],targetIcon:i?{name:i.name,position:r,funcType:i.attribute.funcType}:void 0,target:null==(o=null==s?void 0:s.eventArgs)?void 0:o.target,mergeCellInfo:null==(a=null==s?void 0:s.eventArgs)?void 0:a.mergeInfo});t.fireListeners(B.B.DBLCLICK_CELL,c)}}(e,t)})}(this)}updateEventBinder(){setTimeout(()=>{var e;this.table.isReleased||(iC(this.table)&&0===(null==(e=this.handleTextStickBindId)?void 0:e.length)?(this.handleTextStickBindId.push(this.table.on(B.B.SCROLL,e=>{im(this.table)})),this.handleTextStickBindId.push(this.table.on(B.B.RESIZE_COLUMN_END,e=>{im(this.table)})),this.handleTextStickBindId.push(this.table.on(B.B.RESIZE_ROW_END,e=>{im(this.table)}))):!iC(this.table)&&this.handleTextStickBindId&&(this.handleTextStickBindId.forEach(e=>{this.table.off(e)}),this.handleTextStickBindId=[]),rv(this.table))},0)}bindSelfEvent(){var e,t,i,r,n,l,o,a,s,h,d;this.table.isReleased||((e=this.table).on(B.B.ICON_CLICK,t=>{var i;let{col:r,row:n,x:l,y:o,funcType:a,icon:s,event:h}=t,{stateManager:d}=e;if(a===ev.cI.dropDown)d.triggerDropDownMenu(r,n,l,o,h);else if(a===ev.cI.sort)d.triggerSort(r,n,s,h);else if(a===ev.cI.frozen)d.triggerFreeze(r,n,s);else if(a===ev.cI.drillDown)e.fireListeners(rn.z.DRILLMENU_CLICK,e.stateManager.drill);else if(a===ev.cI.collapse||a===ev.cI.expand){let t=!!(null==(i=d.select.ranges)?void 0:i.length);d.updateSelectPos(-1,-1),d.endSelectCells(!0,t),e.toggleHierarchyState(r,n)}}),(t=this.table).on(B.B.DROPDOWN_MENU_CLICK,()=>{t.stateManager.hideMenu()}),t.on(B.B.SCROLL,()=>{t.stateManager.hideMenu()}),this.updateEventBinder(),i=this.table,"browser"===M.X.mode&&i.on(B.B.CLICK_CELL,e=>{let t,{col:r,row:n}=e;if("image"===e.target.type&&e.target.role&&e.target.role.startsWith("icon"))return;t=i.internalProps.layoutMap.isHeader(r,n)?i.isPivotTable()?i._getHeaderLayoutMap(r,n).headerType:i.getHeaderDefine(r,n).headerType:i.getBodyColumnType(r,n);let l=i.isHeader(r,n)?i.getHeaderDefine(r,n):i.getBodyColumnDefine(r,n),o=i.getCellValue(r,n),a=i.getCellOriginValue(r,n);if("link"===t){let e=(0,P.vi)(l.linkJump,{col:r,row:n,table:i,value:o,dataValue:a,cellHeaderPaths:void 0});if(!(e=!1!==e))return;let t=l.templateLink,s,h=(0,P.vi)(l.linkDetect,{col:r,row:n,table:i,value:o,dataValue:a,cellHeaderPaths:void 0});if(h=!1!==h,t){let e=i.getCellOriginRecord(r,n);if(e&&e.vtableMerge)return;let l=Object.assign({__value:o,__dataValue:a},e);s=(0,ry.Z)(t)?t(l,r,n,i):t.replace(/\{\s*(\S+?)\s*\}/g,(e,t)=>l[t])}else if(h){if(!$.tP.test(o))return;s=o}else s=o;if(!s)return;let d=l.linkTarget,u=l.linkWindowFeatures;window.open(s,d,u)}else if("image"===t){let{clickToPreview:e}=l;if(!1===e)return;let t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.backgroundColor="rgba(30, 30, 30, 0.4)",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.overflow="hidden",t.style.zIndex="9999",t.addEventListener("click",e=>{e.target===t&&document.body.removeChild(t)});let i=new Image;i.src=o,i.style.maxWidth="80%",i.style.maxHeight="80%",t.appendChild(i),document.body.appendChild(t)}else if("video"===t){let{clickToPreview:e}=l;if(!1===e)return;let t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.backgroundColor="rgba(30, 30, 30, 0.4)",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.overflow="hidden",t.style.zIndex="9999",t.addEventListener("click",e=>{e.target===t&&document.body.removeChild(t)});let i=document.createElement("video");i.src=o,i.style.maxWidth="80%",i.style.maxHeight="80%",i.setAttribute("preload","auto"),i.setAttribute("controls","true"),t.appendChild(i),document.body.appendChild(t)}}),(r=this.table).on(B.B.DBLCLICK_CELL,e=>{var t,i,n;if(e.federatedEvent){let l=(0,iz.RJ)(e.federatedEvent),o=r.scenegraph.getResizeColAt(l.abstractPos.x,l.abstractPos.y,null==(t=l.eventArgs)?void 0:t.targetCell),a=null!=(i=r.options.disableDblclickAutoResizeColWidth)?i:null==(n=r.options.resize)?void 0:n.disableDblclickAutoResizeColWidth;if(r.eventManager.checkCellFillhandle(l))r.fireListeners(B.B.DBLCLICK_FILL_HANDLE,{});else if(r._canResizeColumn(o.col,o.row)&&o.col>=0&&!a){r.scenegraph.updateAutoColWidth(o.col),r.internalProps._widthResizedColMap.add(o.col),r.scenegraph.updateChartSizeForResizeColWidth(o.col);let e=r.stateManager;!(e.columnResize.col<e.table.frozenColCount)||e.table.isPivotTable()||e.table.transpose||e.table.scenegraph.component.setFrozenColumnShadow(e.table.frozenColCount-1,e.columnResize.isRightFrozen),(e.columnResize.col>=e.table.colCount-e.table.rightFrozenColCount&&!e.table.isPivotTable()&&!e.table.transpose||e.table.options.rightFrozenColCount)&&e.table.scenegraph.component.setRightFrozenColumnShadow(e.table.colCount-e.table.rightFrozenColCount);let t=[];for(let e=0;e<r.colCount;e++)t.push(r.getColWidth(e));r.fireListeners(B.B.RESIZE_COLUMN_END,{col:o.col,colWidths:t})}}}),this.table.isPivotTable()&&function(e){let t=e.internalProps.layoutMap.rowsDefine,i=e.internalProps.layoutMap.columnsDefine;for(let e=0;e<t.length;e++){let i=t[e];if("string"!=typeof i&&(i.drillDown||i.drillUp))return!0}for(let e=0;e<i.length;e++){let t=i[e];if("string"!=typeof t&&(t.drillDown||t.drillUp))return!0}return!1}(this.table)&&((n=this.table).on(B.B.MOUSEENTER_CELL,e=>{let{col:t,row:i}=e;if(-1===t||-1===i)return;let r=n.internalProps.layoutMap.getHeaderDimension(t,i);(null==r?void 0:r.drillDown)||(null==r?void 0:r.drillUp)?n.stateManager.updateDrillState(r.dimensionKey,r.title,r.drillDown,r.drillUp,t,i):n.stateManager.updateDrillState(void 0,void 0,!1,!1,-1,-1)}),n.on(B.B.MOUSELEAVE_TABLE,e=>{n.stateManager.updateDrillState(void 0,void 0,!1,!1,-1,-1)})),rv(this.table),(l=this.table).isPivotChart()&&l.scenegraph.tableGroup.addEventListener("click",e=>{var t;if(!l.stateManager.columnMove.moving&&!l.stateManager.columnResize.resizing)if("axis-label"===e.target.name){let t,i,{col:r,row:n}=(0,iz.RJ)(e).eventArgs,o=l.internalProps.layoutMap;o.indicatorsAsCol?(t=o.getDimensionKeyInChartSpec(o.rowHeaderLevelCount,n),i=o.getCellHeaderPaths(o.rowHeaderLevelCount-2,n).rowHeaderPaths):(t=o.getDimensionKeyInChartSpec(r,o.columnHeaderLevelCount),i=o.getCellHeaderPaths(r,o.columnHeaderLevelCount-1).colHeaderPaths);let a=i.map(e=>({key:e.dimensionKey,value:e.value})).filter(e=>e.key);if(a.push({key:t,value:e.target.attribute.text}),l._selectedDimensionInChart.length&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i].key!==t[i].key||e[i].value!==t[i].value)return!1;return!0}(l._selectedDimensionInChart,a))return;l._selectedDimensionInChart=a,o.updateDataStateToChartInstance(),(0,iX.RW)(l.scenegraph),l.scenegraph.updateNextFrame()}else(null==(t=l._selectedDimensionInChart)?void 0:t.length)&&(l._selectedDimensionInChart.length=0,l.internalProps.layoutMap.updateDataStateToChartInstance(),(0,iX.RW)(l.scenegraph),l.scenegraph.updateNextFrame())}),(o=this.table).isPivotChart()&&(o.on(B.B.MOUSEENTER_CELL,e=>{o.scenegraph.getCell(e.col,e.row).forEachChildren(t=>{if("axis"===t.name){let t=rL(e.col,e.row,o.internalProps.layoutMap);e.axisPosition=t,o.fireListeners(B.B.MOUSEENTER_AXIS,e)}})}),o.on(B.B.MOUSELEAVE_CELL,e=>{o.scenegraph.getCell(e.col,e.row).forEachChildren(t=>{if("axis"===t.name){let t=rL(e.col,e.row,o.internalProps.layoutMap);e.axisPosition=t,o.fireListeners(B.B.MOUSELEAVE_AXIS,e)}})})),(a=this.table).on("checkbox_state_change",e=>{var t;let{col:i,row:r,checked:n,field:l}=e;if(!a.internalProps.layoutMap.isSeriesNumber(i,r)||!0!==a.internalProps.enableCheckboxCascade||a.isHeader(i,r))return;let o=a.getCellOriginRecord(i,r),s=a.dataSource.currentPagerIndexedData,h=a.getRecordShowIndexByCell(i,r),d=s[h];if((0,eM.Z)(d)&&(d=[d]),o.vtableMerge||(null==(t=o.children)?void 0:t.length))if(n)rD(a,i,r)===R.g.collapse?rO(!0,d,a,l):rF(!0,h,d,s,a,i),rH(h,d,s,a,i);else{rD(a,i,r)===R.g.collapse?rO(!1,d,a,l):rF(!1,h,d,s,a,i),rH(h,d,s,a,i);let e=a.stateManager.headerCheckedState._vtable_rowSeries_number,t=a.stateManager.updateHeaderCheckedState("_vtable_rowSeries_number",i,r);e!==t&&a.scenegraph.updateHeaderCheckboxCellState(i,r,t)}else rH(h,d,s,a,i)}),(s=this.table).on("checkbox_state_change",e=>{var t;if(!0!==s.internalProps.enableCheckboxCascade)return;let{col:i,row:r,checked:n,field:l}=e,o=s.internalProps.columns.some(e=>e.tree);if(s.internalProps.enableCheckboxCascade,!o||s.isHeader(i,r))return;let a=s.getCellOriginRecord(i,r),h=s.dataSource.currentPagerIndexedData,d=s.getRecordShowIndexByCell(i,r),u=h[d];if((0,eM.Z)(u)&&(u=[u]),a.vtableMerge||(null==(t=a.children)?void 0:t.length))if(n)rD(s,i,r)===R.g.collapse?rO(!0,u,s,l):rF(!0,d,u,h,s,i,l),rH(d,u,h,s,i,l);else{rD(s,i,r)===R.g.collapse?rO(!1,u,s,l):rF(!1,d,u,h,s,i,l),rH(d,u,h,s,i,l);let e=s.stateManager.headerCheckedState._vtable_rowSeries_number,t=s.stateManager.updateHeaderCheckedState(l,i,r);e!==t&&s.scenegraph.updateHeaderCheckboxCellState(i,r,t)}else rH(d,u,h,s,i,l)}),(h=this.table).on("checkbox_state_change",e=>{if(!0!==h.internalProps.enableHeaderCheckboxCascade)return;let{col:t,row:i,checked:r,field:n}=e;if(h.isHeader(t,i))h.stateManager.setHeaderCheckedState(n,r),"checkbox"===h.getCellType(t,i)&&h.scenegraph.updateCheckboxCellState(t,i,r);else if(h.stateManager.setCheckedState(t,i,n,r),"checkbox"===h.getCellType(t,i)){let e=h.stateManager.headerCheckedState[n],r=h.stateManager.updateHeaderCheckedState(n,t,i);e!==r&&h.scenegraph.updateHeaderCheckboxCellState(t,i,r)}}),(d=this.table).on(B.B.CLICK_CELL,e=>{let{col:t,row:i,target:r}=e;"button"!==r.name||r.attribute.disable||d.hasListeners(B.B.BUTTON_CLICK)&&d.fireListeners(B.B.BUTTON_CLICK,{col:t,row:i,event:e.event})}))}dealTableHover(e){if(!e)return void this.table.stateManager.updateHoverPos(-1,-1);let{eventArgs:t}=e;t?this.table.stateManager.updateHoverPos(t.col,t.row):this.table.stateManager.updateHoverPos(-1,-1)}dealIconHover(e){let{eventArgs:t}=e;t?this.table.stateManager.updateHoverIcon(t.col,t.row,t.target,t.targetCell):this.table.stateManager.updateHoverIcon(-1,-1,void 0,void 0)}dealMenuHover(e){}dealTableSelect(e,t){var i,r,n,l,o,a,s,h,d;if(!e)return this.table.stateManager.updateSelectPos(-1,-1),!1;let{eventArgs:u}=e;if(u){if("checkbox"===u.target.name||"radio"===u.target.name||"switch"===u.target.name||"button"===u.target.name)return!1;if(this.table.isHeader(u.col,u.row)&&tC(this.table,u.col,u.row))return t||this.table.stateManager.updateSelectPos(-1,-1),!1;if(!this.table.isHeader(u.col,u.row)&&tC(this.table,u.col,u.row)){if(!t){let e=!!(null==(i=this.table.stateManager.select.ranges)?void 0:i.length);this.table.stateManager.updateSelectPos(-1,-1),e&&this.table.stateManager.endSelectCells(!0,e)}return!1}if(this.table.isPivotChart()&&("axis-label"===(null==(r=null==e?void 0:e.eventArgs)?void 0:r.target.name)||"chart"===(null==(n=null==e?void 0:e.eventArgs)?void 0:n.target.type)))return this.table.stateManager.updateSelectPos(-1,-1),!1;let c=null==(o=null==(l=this.table.keyboardOptions)?void 0:l.shiftMultiSelect)||o,p=null==(s=null==(a=this.table.keyboardOptions)?void 0:a.ctrlMultiSelect)||s;return this.table.stateManager.updateSelectPos("row"===this.table.stateManager.select.selectInline?this.table.colCount-1:u.col,"col"===this.table.stateManager.select.selectInline?this.table.rowCount-1:u.row,u.event.shiftKey&&c,(u.event.ctrlKey||u.event.metaKey)&&p,!1,!t&&(null==(d=null==(h=this.table.options.select)?void 0:h.makeSelectCellVisible)||d)),!0}return!1}dealFillSelect(e,t){var i,r,n,l,o,a,s,h;let{eventArgs:d}=e;if(d){if((null==(r=null==(i=this.table.stateManager.select)?void 0:i.ranges)?void 0:r.length)&&this.table.stateManager.isFillHandle()){let i,r,o=this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1];t&&((0,b.Z)(this.table.stateManager.fillHandle.directionRow)||(Math.abs(this.table.stateManager.fillHandle.startY-e.abstractPos.y)>=Math.abs(this.table.stateManager.fillHandle.startX-e.abstractPos.x)?this.table.stateManager.fillHandle.directionRow=!0:this.table.stateManager.fillHandle.directionRow=!1),Math.abs(this.table.stateManager.fillHandle.startY-e.abstractPos.y)>=Math.abs(this.table.stateManager.fillHandle.startX-e.abstractPos.x)?this.table.stateManager.fillHandle.startY-e.abstractPos.y>0?this.table.stateManager.fillHandle.direction="top":this.table.stateManager.fillHandle.direction="bottom":this.table.stateManager.fillHandle.startX-e.abstractPos.x>0?this.table.stateManager.fillHandle.direction="left":this.table.stateManager.fillHandle.direction="right",this.table.stateManager.fillHandle.directionRow?(i=d.row,r=o.end.col):(i=o.end.row,r=d.col));let a=null==(l=null==(n=this.table.keyboardOptions)?void 0:n.ctrlMultiSelect)||l;this.table.stateManager.updateSelectPos(t?r:o.end.col,t?i:o.end.row,!0,(d.event.ctrlKey||d.event.metaKey)&&a,!1,!t)}else{let e=null==(a=null==(o=this.table.keyboardOptions)?void 0:o.shiftMultiSelect)||a,i=null==(h=null==(s=this.table.keyboardOptions)?void 0:s.ctrlMultiSelect)||h;this.table.stateManager.updateSelectPos(d.col,d.row,d.event.shiftKey&&e,(d.event.ctrlKey||d.event.metaKey)&&i,!1,!t)}return!0}return!1}deelTableSelectAll(){this.table.stateManager.updateSelectPos(-1,-1,!1,!1,!0),this.table.fireListeners(B.B.SELECTED_CELL,{ranges:this.table.stateManager.select.ranges,col:0,row:0})}dealMenuSelect(e){}checkColumnResize(e,t){let{eventArgs:i}=e;if(this.table.internalProps.enableTreeStickCell&&!i)return!1;let r=this.table.scenegraph.getResizeColAt(e.abstractPos.x,e.abstractPos.y,null==i?void 0:i.targetCell),n=!0;return this.table.internalProps.canResizeColumn&&!this.table.internalProps.canResizeColumn(r.col,r.row,this.table)&&(n=!1),n&&this.table._canResizeColumn(r.col,r.row)&&r.col>=0?(t&&this.table.stateManager.startResizeCol(r.col,e.abstractPos.x,e.abstractPos.y,r.rightFrozen),!0):(this.table.stateManager.isResizeCol()&&this.table.stateManager.endResizeCol(),!1)}checkRowResize(e,t){let{eventArgs:i}=e;if(i){let r=this.table.scenegraph.getResizeRowAt(e.abstractPos.x,e.abstractPos.y,i.targetCell);if(this.table._canResizeRow(r.col,r.row)&&r.row>=0)return t&&this.table.stateManager.startResizeRow(r.row,e.abstractPos.x,e.abstractPos.y,r.bottomFrozen),!0}return!1}cellIsHeaderCheck(e,t){let{eventArgs:i}=e,{col:r,row:n,target:l}=i;return!!this.table.isHeader(r,n)&&"checkbox"===this.table.getCellType(i.col,i.row)&&"checkbox"===l.name}checkCellFillhandle(e,t){var i,r,n,l,o;if("function"==typeof(null==(i=this.table.options.excelOptions)?void 0:i.fillHandle)?this.table.options.excelOptions.fillHandle({selectRanges:this.table.stateManager.select.ranges,table:this.table}):null==(r=this.table.options.excelOptions)?void 0:r.fillHandle){let{eventArgs:i}=e;if(i&&(null==(l=null==(n=this.table.stateManager.select)?void 0:n.ranges)?void 0:l.length)){let i,r,n=Math.max(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.col,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.col),l=Math.max(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.row,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.row),a=Math.min(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.col,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.col),s=Math.min(this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].start.row,this.table.stateManager.select.ranges[this.table.stateManager.select.ranges.length-1].end.row);i=n<this.table.colCount-1?this.table.scenegraph.highPerformanceGetCell(n,l).globalAABBBounds.x2:0===a?this.table.scenegraph.highPerformanceGetCell(0,l).globalAABBBounds.x1:this.table.scenegraph.highPerformanceGetCell(a-1,l).globalAABBBounds.x2;let h=Math.abs(e.abstractPos.x-i);r=l<this.table.rowCount-1?this.table.scenegraph.highPerformanceGetCell(n,l).globalAABBBounds.y2:this.table.scenegraph.highPerformanceGetCell(n,s-1).globalAABBBounds.y2;let d=Math.abs(e.abstractPos.y-r);if((null==(o=this.table.stateManager.fillHandle)?void 0:o.isFilling)||h<=9&&d<=9)return t&&this.table.stateManager.startFillSelect(e.abstractPos.x,e.abstractPos.y),!0}}return!1}dealColumnResize(e,t){this.table.stateManager.updateResizeCol(e,t)}dealRowResize(e,t){this.table.stateManager.updateResizeRow(e,t)}checkColumnMover(e){var t;let{eventArgs:i}=e;return!(!i||!this.table._canDragHeaderPosition(i.col,i.row))&&(this.table.stateManager.startMoveCol(i.col,i.row,e.abstractPos.x,e.abstractPos.y,null==(t=null==i?void 0:i.event)?void 0:t.nativeEvent),!0)}dealColumnMover(e,t,i){let r=this.table.getColAtRelativePosition(e),n=this.table.getRowAtRelativePosition(t);-1===r&&"row"===this.table.stateManager.columnMove.movingColumnOrRow&&(r=0),-1===n&&"column"===this.table.stateManager.columnMove.movingColumnOrRow&&(n=0),(0,b.Z)(r)&&(0,b.Z)(n)&&this.table.stateManager.updateMoveCol(r,n,e,t,i)}startColumnResize(e){}dealIconClick(e,t){let{eventArgs:i}=t,{target:r,event:n,col:l,row:o}=i||{target:e.target,event:e,col:-1,row:-1};if(r.role&&r.role.startsWith("icon-"))return this.table.fireListeners(B.B.ICON_CLICK,{name:r.name,x:(r.globalAABBBounds.x1+r.globalAABBBounds.x2)/2,y:r.globalAABBBounds.y2,col:l,row:o,funcType:r.attribute.funcType,icon:r,event:n}),!0;if(r instanceof rb.H){let e=r.pickIcon(n.global);if(e)return this.table.fireListeners(B.B.ICON_CLICK,{name:e.attribute.id,x:e.globalX+e.globalAABBBounds.width()/2,y:e.globalY+e.AABBBounds.height(),col:l,row:o,funcType:e.attribute.funcType,icon:e,event:n}),!0}return!1}release(){var e;null==(e=this.gesture)||e.release(),this.globalEventListeners.forEach(e=>{"document"===e.env?document.removeEventListener(e.name,e.callback):"body"===e.env?document.body.removeEventListener(e.name,e.callback):"window"===e.env?window.removeEventListener(e.name,e.callback):"vglobal"===e.env&&et.rF.removeEventListener(e.name,e.callback)}),this.globalEventListeners=[]}enableScroll(){this._enableTableScroll=!0}disableScroll(){this._enableTableScroll=!1}handleCopy(e,t=!1){var i,r,n,l,o,a;return rz(this,void 0,void 0,function*(){let s=this.table;t||(this.cutWaitPaste=!1),this.copySourceRange=null;let h=s.stateManager.select.ranges;if(h&&1===h.length){let e=h[0];this.copySourceRange={startCol:Math.min(e.start.col,e.end.col),startRow:Math.min(e.start.row,e.end.row)}}else if(!(null==h?void 0:h.length))return void(this.copySourceRange=null);let d=this.table.getCopyValue(null==(r=null==(i=s.options.keyboardOptions)?void 0:i.getCopyCellValue)?void 0:r.value);if((0,b.Z)(d)){e.preventDefault();let i=s.getElement();i&&i!==document.activeElement&&(i.focus(),yield new Promise(e=>setTimeout(e,10)));try{if(navigator.clipboard&&navigator.clipboard.writeText){let t=!0;if(navigator.permissions&&navigator.permissions.query)try{t="granted"===(yield navigator.permissions.query({name:"clipboard-write"})).state}catch(e){t=!0}if(t)try{if(window.ClipboardItem){let e=d;1===s.stateManager.select.ranges.length&&(null==(l=null==(n=s.options.keyboardOptions)?void 0:n.getCopyCellValue)?void 0:l.html)&&(e=this.table.getCopyValue(null==(o=s.options.keyboardOptions)?void 0:o.getCopyCellValue.html));let t=(0,iz.r5)(e);yield navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([t],{type:"text/html"}),"text/plain":new Blob([d],{type:"text/plain"})})])}else yield navigator.clipboard.writeText(d)}catch(t){this.fallbackCopyToClipboard(d,e)}else this.fallbackCopyToClipboard(d,e)}else this.fallbackCopyToClipboard(d,e);s.fireListeners(B.B.COPY_DATA,{cellRange:s.stateManager.select.ranges,copyData:d,isCut:t})}catch(t){this.fallbackCopyToClipboard(d,e)}}(null==(a=s.keyboardOptions)?void 0:a.showCopyCellBorder)&&((0,T.NR)(s),s.clearSelected())})}fallbackCopyToClipboard(e,t){try{if(t.clipboardData)return void t.clipboardData.setData("text/plain",e);document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur();let i=document.createElement("textarea");i.value=e,i.style.position="fixed",i.style.left="-999999px",i.style.top="-999999px",i.style.opacity="0",i.setAttribute("readonly",""),i.setAttribute("aria-hidden","true"),document.body.appendChild(i),i.focus(),i.select(),i.setSelectionRange(0,e.length);try{document.execCommand("copy")}catch(e){}finally{document.body.removeChild(i)}}catch(e){}}handleCut(e){return rz(this,void 0,void 0,function*(){this.handleCopy(e,!0),this.cutWaitPaste=!0,this.cutCellRange=this.table.getSelectedCellInfos(),this.clipboardCheckTimer&&clearTimeout(this.clipboardCheckTimer),this.clipboardCheckTimer=window.setTimeout(()=>{this.cutWaitPaste&&(this.cutWaitPaste=!1,this.cutCellRange=null,this.clipboardCheckTimer=null)},3e4),this.saveClipboardContent()})}handlePaste(e){this.cutWaitPaste?this.checkClipboardChanged().then(t=>{this.executePaste(e),t||this.clearCutArea(this.table),this.cutWaitPaste&&(this.cutWaitPaste=!1,this.cutCellRange=null,this.clipboardCheckTimer&&(clearTimeout(this.clipboardCheckTimer),this.clipboardCheckTimer=null))}).catch(()=>{this.executePaste(e),this.cutWaitPaste&&(this.cutWaitPaste=!1,this.cutCellRange=null,this.clipboardCheckTimer&&(clearTimeout(this.clipboardCheckTimer),this.clipboardCheckTimer=null))}):this.executePaste(e)}executePaste(e){var t,i,r;return rz(this,void 0,void 0,function*(){let n=this.table;if(!(null==(t=n.editorManager)?void 0:t.editingEditor)){if(n.changeCellValues&&(null==(i=n.stateManager.select.ranges)?void 0:i.length)>0)try{if(navigator.clipboard&&navigator.clipboard.read)try{let t=yield navigator.clipboard.read(),i=!1;for(let e of t){if(e.types.includes("text/html")){yield this.pasteHtmlToTable(e),i=!0;break}if(e.types.includes("text/plain")){yield this.pasteTextToTable(e),i=!0;break}}i||(yield this.fallbackPasteFromClipboard(e))}catch(t){yield this.fallbackPasteFromClipboard(e)}else yield this.fallbackPasteFromClipboard(e)}catch(t){yield this.fallbackPasteFromClipboard(e)}(null==(r=n.keyboardOptions)?void 0:r.showCopyCellBorder)&&(0,T.Z7)(n)}})}fallbackPasteFromClipboard(e){return rz(this,void 0,void 0,function*(){let t=this.table,i=t.stateManager.select.ranges,r=Math.min(i[0].start.col,i[0].end.col),n=Math.min(i[0].start.row,i[0].end.row);try{let i=t.getElement();i&&i!==document.activeElement&&(i.focus(),yield new Promise(e=>setTimeout(e,10)));let l=e.clipboardData||window.clipboardData||window.Clipboard;if(l){let e=l.getData("text")||l.getData("Text");if(e)return void(yield this.processPastedText(e,r,n))}}catch(e){}})}processPastedText(e,t,i){var r;return rz(this,void 0,void 0,function*(){let n,l=this.table,o=e.split("\n"),a=[];o.forEach(function(e){let t=e.split("	"),i=[];a.push(i),t.forEach(function(e,r){r===t.length-1&&(e=e.trim()),i.push(e)})}),(null==(r=l.options.keyboardOptions)?void 0:r.processFormulaBeforePaste)&&this.copySourceRange&&(n=l.options.keyboardOptions.processFormulaBeforePaste(a,this.copySourceRange.startCol,this.copySourceRange.startRow,t,i));let s=yield l.changeCellValues(t,i,n||a,!0);l.hasListeners(B.B.PASTED_DATA)&&l.fireListeners(B.B.PASTED_DATA,{col:t,row:i,pasteData:n||a,changedCellResults:s})})}clearCutArea(e){try{let t=this.cutCellRange;if(!t||0===t.length)return;for(let i=0;i<t.length;i++)for(let r=0;r<t[i].length;r++)t[i][r]&&e.changeCellValue(t[i][r].col,t[i][r].row,void 0)}catch(e){}}checkClipboardChanged(){return rz(this,void 0,void 0,function*(){if(!navigator.clipboard||!navigator.clipboard.readText)return!1;try{return(yield navigator.clipboard.readText())!==this.lastClipboardContent}catch(e){return!1}})}saveClipboardContent(){navigator.clipboard&&navigator.clipboard.readText&&setTimeout(()=>{navigator.clipboard.readText().then(e=>{this.lastClipboardContent=e}).catch(e=>{})},50)}pasteHtmlToTable(e){let t=/<tr[^>]*>([\s\S]*?)<\/tr>/g,i=/<td[^>]*>([\s\S]*?)<\/td>/g,r=this.table,n=r.stateManager.select.ranges,l=n.length,o=Math.min(n[l-1].start.col,n[l-1].end.col),a=Math.min(n[l-1].start.row,n[l-1].end.row),s=Math.max(n[l-1].start.col,n[l-1].end.col),h=Math.max(n[l-1].start.row,n[l-1].end.row),d=0,u=0,c=[];e.getType("text/html").then(e=>{e.text().then(e=>rz(this,void 0,void 0,function*(){var n,l,p;if(e&&/(<table)|(<TABLE)/g.test(e)){let g;for(let r of Array.from(e.matchAll(t))){let e=Array.from(r[1].matchAll(i)).map(e=>e[1].replace(/(<(?!br)([^>]+)>)/gi,"").replace(/<br(\s*|\/)>[\r\n]?/gim,"\n").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#9;/gi,"	").replace(/&nbsp;/g," "));c.push(e),d=Math.max(d,null!=(n=null==e?void 0:e.length)?n:0)}u=null!=(l=c.length)?l:0,c=this.handlePasteValues(c,u,d,h-a+1,s-o+1),(null==(p=r.options.keyboardOptions)?void 0:p.processFormulaBeforePaste)&&this.copySourceRange&&(g=r.options.keyboardOptions.processFormulaBeforePaste(c,this.copySourceRange.startCol,this.copySourceRange.startRow,o,a));let f=yield r.changeCellValues(o,a,g||c,!0);r.hasListeners(B.B.PASTED_DATA)&&r.fireListeners(B.B.PASTED_DATA,{col:o,row:a,pasteData:g||c,changedCellResults:f})}else navigator.clipboard.read().then(e=>{for(let t of e)t.types.includes("text/plain")&&t.getType("text/plain").then(e=>{e.text().then(e=>this._pasteValue(e))})})}))})}_pasteValue(e){var t,i;return rz(this,void 0,void 0,function*(){let r,n=this.table,l=n.stateManager.select.ranges,o=l.length,a=Math.min(l[o-1].start.col,l[o-1].end.col),s=Math.min(l[o-1].start.row,l[o-1].end.row),h=Math.max(l[o-1].start.col,l[o-1].end.col),d=Math.max(l[o-1].start.row,l[o-1].end.row),u=0,c=0,p=[];e.split("\n").forEach(function(e,t){var i;let r=e.split("	"),n=[];p.push(n),r.forEach(function(e,t){t===r.length-1&&(e=e.trim()),n.push(e)}),u=Math.max(u,null!=(i=null==n?void 0:n.length)?i:0)}),c=null!=(t=p.length)?t:0,p=this.handlePasteValues(p,c,u,d-s+1,h-a+1),(null==(i=n.options.keyboardOptions)?void 0:i.processFormulaBeforePaste)&&this.copySourceRange&&(r=n.options.keyboardOptions.processFormulaBeforePaste(p,this.copySourceRange.startCol,this.copySourceRange.startRow,a,s));let g=yield n.changeCellValues(a,s,r||p,!0);n.hasListeners(B.B.PASTED_DATA)&&n.fireListeners(B.B.PASTED_DATA,{col:a,row:s,pasteData:r||p,changedCellResults:g})})}pasteTextToTable(e){return rz(this,void 0,void 0,function*(){let t=this.table,i=t.stateManager.select.ranges,r=i.length,n=Math.min(i[r-1].start.col,i[r-1].end.col),l=Math.min(i[r-1].start.row,i[r-1].end.row),o=Math.max(i[r-1].start.col,i[r-1].end.col),a=Math.max(i[r-1].start.row,i[r-1].end.row);try{let i=yield e.getType("text/plain"),r=yield i.text(),s=this.parsePastedData(r),h=s.length,d=Math.max(...s.map(e=>e.length),0),u=this.handlePasteValues(s,h,d,a-l+1,o-n+1),c=yield t.changeCellValues(n,l,u,!0);t.hasListeners(B.B.PASTED_DATA)&&t.fireListeners(B.B.PASTED_DATA,{col:n,row:l,pasteData:u,changedCellResults:c})}catch(e){}})}parsePastedData(e){let t=e.replace(/\r(?!\n)/g,"\r\n").split("\r\n"),i=[];return t.length>1&&""===t[t.length-1]&&t.pop(),t.forEach(e=>{let t=e.split("	").map(e=>this.processCellValue(e));i.push(t)}),i}processCellValue(e){e.includes("\n")&&(e=e.replace(/^"(.*)"$/,"$1").replace(/["]*/g,e=>Array(Math.floor(e.length/2)).fill('"').join("")));let t=Number(e);return isNaN(t)?e:t}handlePasteValues(e,t,i,r,n){if((n>i||r>t)&&n%i==0&&r%t==0){let l=[];for(let o=0;o<r;o++){let r=[];l.push(r);for(let l=0;l<n;l++){let n=o%t,a=l%i;r.push(e[n][a])}}return l}return e}}class rZ extends _{static get DEFAULT(){return s||(s=new rZ)}constructor(e={},t={}){var i,r;super(e,t),this._autoWrapText=null!=(i=null==e?void 0:e.autoWrapText)?i:null==t?void 0:t.autoWrapText,this._lineClamp=null!=(r=null==e?void 0:e.lineClamp)?r:null==t?void 0:t.lineClamp}clone(){return new rZ(this,null)}get lineClamp(){return this._lineClamp}set lineClamp(e){this._lineClamp=e}get autoWrapText(){return this._autoWrapText}set autoWrapText(e){this._autoWrapText=e}}let rN=e=>{let t=e.value;return Number(t)>80?"#20a8d8":Number(t)>50?"#4dbd74":Number(t)>20?"#ffc107":"#f86c6b"};class r$ extends _{static get DEFAULT(){return h||(h=new r$)}constructor(e={},t={}){var i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b;super(e,t),this._showBar=null==(i=e.showBar)||i,this._barColor=null!=(r=e.barColor)?r:rN,this._barPositiveColor=null!=(n=e.barPositiveColor)?n:"#4dbd74",this._barNegativeColor=null!=(l=e.barNegativeColor)?l:"#f86c6b",this._barAxisColor=null!=(o=e.barAxisColor)?o:"black",this._barBgColor=e.barBgColor,this._barHeight=null!=(a=e.barHeight)?a:3,this._barHeight=null!=(s=e.barHeight)?s:3,this._barBottom=null!=(h=e.barBottom)?h:0,this._barPadding=null!=(d=e.barPadding)?d:[0,0,0,0],this._showBarMark=null!=(u=e.showBarMark)&&u,this._barMarkPositiveColor=null!=(c=e.barMarkPositiveColor)?c:"#4dbd74",this._barMarkNegativeColor=null!=(p=e.barMarkNegativeColor)?p:"#f86c6b",this._barMarkWidth=null!=(g=e.barMarkWidth)?g:2,this._barMarkPosition=null!=(f=e.barMarkPosition)?f:"right",this._barRightToLeft=null!=(m=e.barRightToLeft)&&m,this._barMarkInBar=null==(b=e.barMarkInBar)||b}get showBar(){return this._showBar}set showBar(e){this._showBar=e}get barColor(){return this._barColor}set barColor(e){this._barColor=e}get barBgColor(){return this._barBgColor}set barBgColor(e){this._barBgColor=e}get barHeight(){return this._barHeight}set barHeight(e){this._barHeight=e}get barBottom(){return this._barBottom}set barBottom(e){this._barBottom=e}get barPositiveColor(){return this._barPositiveColor}set barPositiveColor(e){this._barPositiveColor=e}get barNegativeColor(){return this._barNegativeColor}set barNegativeColor(e){this._barNegativeColor=e}get barAxisColor(){return this._barAxisColor}set barAxisColor(e){this._barAxisColor=e}get barPadding(){return this._barPadding}set barPadding(e){this._barPadding=e}get showBarMark(){return this._showBarMark}set showBarMark(e){this._showBarMark=e}get barMarkPositiveColor(){return this._barMarkPositiveColor}set barMarkPositiveColor(e){this._barMarkPositiveColor=e}get barMarkNegativeColor(){return this._barMarkNegativeColor}set barMarkNegativeColor(e){this._barMarkNegativeColor=e}get barMarkWidth(){return this._barMarkWidth}set barMarkWidth(e){this._barMarkWidth=e}get barMarkPosition(){return this._barMarkPosition}set barMarkPosition(e){this._barMarkPosition=e}get barRightToLeft(){return this._barRightToLeft}set barRightToLeft(e){this._barRightToLeft=e}get barMarkInBar(){return this._barMarkInBar}set barMarkInBar(e){this._barMarkInBar=e}clone(){return new r$(this,null)}}class rj extends _{static get DEFAULT(){return d||(d=new rj)}constructor(e={},t={}){super(e,t)}clone(){return new rj(this,null)}}let rG=["type","content","style","color","width","height","marginRight","marginLeft","src","svg","name","path","positionType","tooltip","hover","cursor","shape","interactive","isGif"];class rV{constructor(e){this._table=e;let t=eX.U2();this.expandIcon=t[ev.up.expandIconName],this.collapseIcon=t[ev.up.collapseIconName]}getIcons(e,t,i,r,n){let l=[],o=this.getHierarchyIcon(e,t);o&&l.push(o);let{icon:a}=this._table.getBodyColumnDefine(e,t);if(a){let n;n="function"==typeof a?a({col:e,row:t,value:i,dataValue:r,table:this._table}):a;let o=eX.U2(),s=e=>{let t;(t="string"==typeof e?o[e]:e)&&l.push(t)};Array.isArray(n)?n.forEach((e,t)=>{s(e)}):s(n)}return n&&l.forEach((i,r)=>{(i.content||i.src)&&(l[r]=this.getCellIconFromRecordValue(i,e,t))}),l}getStyleClass(e){switch(e){case"text":case"link":break;case"image":case"video":return rj;case"chart":case"sparkline":return _;case"progressbar":return r$;case"checkbox":return C;case"radio":return x;case"switch":return w;case"button":return S}return rZ}getCellIconFromRecordValue(e,t,i){if(Array.isArray(e))return e.map(e=>this.getCellIconFromRecordValue(e,t,i));if(!P.j6.isObject(e)||"function"==typeof e)return this._table.getFieldData(e,t,i);let r={};return rG.forEach(n=>{var l,o;if(void 0!==e[n]){let a=this._table.getFieldData(e[n],t,i);(0,b.Z)(a)?r[n]=a:(null==(o=(l=this._table)._hasField)?void 0:o.call(l,e[n],t,i))||(r[n]=e[n])}}),r}getHierarchyIcon(e,t){let i=this._table.getHierarchyState(e,t);return i===R.g.expand?this.expandIcon:i===R.g.collapse?this.collapseIcon:void 0}getHierarchyIconWidth(){var e,t;return this.expandIcon.width+(null!=(e=this.expandIcon.marginLeft)?e:0)+(null!=(t=this.expandIcon.marginRight)?t:0)}}var rU=i(29020);let rK={CHANGE_STYLE:"change_style"};class rX extends y.R{static get EVENT_TYPE(){return rK}static get DEFAULT(){return u||(u=new rX)}constructor(e={},t={}){var i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B,I;super(),this._defaultPadding=[10,16,10,16],this._color=null!=(i=e.color)?i:null==t?void 0:t.color,this._strokeColor=null!=(r=null==e?void 0:e.strokeColor)?r:null==t?void 0:t.strokeColor,this._fontSize=null!=(n=e.fontSize)?n:null==t?void 0:t.fontSize,this._fontFamily=null!=(l=e.fontFamily)?l:null==t?void 0:t.fontFamily,this._fontWeight=null!=(o=e.fontWeight)?o:null==t?void 0:t.fontWeight,this._fontVariant=null!=(a=e.fontVariant)?a:null==t?void 0:t.fontVariant,this._fontStyle=null!=(s=e.fontStyle)?s:null==t?void 0:t.fontStyle,this._textOverflow=(null!=(h=e.textOverflow)?h:null==t?void 0:t.textOverflow)||"ellipsis",this._textStick=null!=(u=null!=(d=e.textStick)?d:null==t?void 0:t.textStick)&&u,this._textStickBaseOnAlign=null!=(p=null!=(c=e.textStickBaseOnAlign)?c:null==t?void 0:t.textStickBaseOnAlign)&&p,this._marked=null!=(f=null!=(g=e.marked)?g:null==t?void 0:t.marked)&&f,this._textAlign=(null!=(m=e.textAlign)?m:null==t?void 0:t.textAlign)||"left",this._textBaseline=(null!=(b=e.textBaseline)?b:null==t?void 0:t.textBaseline)||"middle",this._bgColor=null!=(y=e.bgColor)?y:null==t?void 0:t.bgColor,this._padding=null!=(_=null!=(v=e.padding)?v:null==t?void 0:t.padding)?_:this._defaultPadding,this._borderColor=null!=(C=e.borderColor)?C:null==t?void 0:t.borderColor,this._lineHeight=null!=(x=e.lineHeight)?x:null==t?void 0:t.lineHeight,this._underline=null!=(w=e.underline)?w:null==t?void 0:t.underline,this._underlineColor=null!=(S=e.underlineColor)?S:null==t?void 0:t.underlineColor,this._underlineDash=null!=(A=e.underlineDash)?A:null==t?void 0:t.underlineDash,this._underlineOffset=null!=(k=e.underlineOffset)?k:null==t?void 0:t.underlineOffset,this._lineThrough=null!=(M=e.lineThrough)?M:null==t?void 0:t.lineThrough,this._lineThroughColor=null!=(T=e.lineThroughColor)?T:null==t?void 0:t.lineThroughColor,this._lineThroughDash=null!=(R=e.lineThroughDash)?R:null==t?void 0:t.lineThroughDash,this._linkColor=null!=(E=e.linkColor)?E:null==t?void 0:t.linkColor,this._cursor=null!=(P=e.cursor)?P:null==t?void 0:t.cursor,this._borderLineWidth=null!=(B=e.borderLineWidth)?B:null==t?void 0:t.borderLineWidth,this._borderLineDash=null!=(I=e.borderLineDash)?I:null==t?void 0:t.borderLineDash}get bgColor(){return this._bgColor}set bgColor(e){this._bgColor=e}get color(){return this._color}set color(e){this._color=e}get strokeColor(){return this._strokeColor}set strokeColor(e){this._strokeColor=e}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize=e}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e}get textOverflow(){return this._textOverflow}set textOverflow(e){this._textOverflow=e}get padding(){var e;return null!=(e=this._padding)?e:this._defaultPadding}set padding(e){this._padding=e}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e}get textStick(){return this._textStick}set textStick(e){this._textStick=e}get textStickBaseOnAlign(){return this._textStickBaseOnAlign}set textStickBaseOnAlign(e){this._textStickBaseOnAlign=e}get marked(){return this._marked}set marked(e){this._marked=e}get textAlign(){return this._textAlign}set textAlign(e){this._textAlign=e}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e}get underline(){return this._underline}set underline(e){this._underline=e}get underlineColor(){return this._underlineColor}set underlineColor(e){this._underlineColor=e}get underlineDash(){return this._underlineDash}set underlineDash(e){this._underlineDash=e}get underlineOffset(){return this._underlineOffset}set underlineOffset(e){this._underlineOffset=e}get lineThrough(){return this._lineThrough}set lineThrough(e){this._lineThrough=e}get lineThroughColor(){return this._lineThroughColor}set lineThroughColor(e){this._lineThroughColor=e}get lineThroughDash(){return this._lineThroughDash}set lineThroughDash(e){this._lineThroughDash=e}get linkColor(){return this._linkColor}set linkColor(e){this._linkColor=e}get cursor(){return this._cursor}set cursor(e){this._cursor=e}get borderLineWidth(){return this._borderLineWidth}set borderLineWidth(e){this._borderLineWidth=e}get borderLineDash(){return this._borderLineDash}set borderLineDash(e){this._borderLineDash=e}clone(){return new rX(this)}}class rY extends rX{static get DEFAULT(){return c||(c=new rY)}constructor(e={},t={}){var i;super(e,t),this.textAlign=(null!=(i=e.textAlign)?i:null==t?void 0:t.textAlign)||"center"}clone(){return new rY(this)}}class rq extends rX{static get DEFAULT(){return p||(p=new rq)}constructor(e={},t=null){var i,r;super(e,t),this._autoWrapText=null!=(i=null==e?void 0:e.autoWrapText)?i:null==t?void 0:t.autoWrapText,this._lineClamp=null!=(r=null==e?void 0:e.lineClamp)?r:null==t?void 0:t.lineClamp}clone(){return new rq(this,null)}get lineClamp(){return this._lineClamp}set lineClamp(e){this._lineClamp=e}get autoWrapText(){return this._autoWrapText}set autoWrapText(e){this._autoWrapText=e}}class rJ extends rX{static get DEFAULT(){return g||(g=new rJ)}constructor(e={},t={},i={}){var r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S;super(e,t),this._size=(null!=(n=null!=(r=null==e?void 0:e.size)?r:null==t?void 0:t.size)?n:null==i?void 0:i.size)||14,this._spaceBetweenTextAndIcon=(null!=(o=null!=(l=null==e?void 0:e.spaceBetweenTextAndIcon)?l:null==t?void 0:t.spaceBetweenTextAndIcon)?o:null==i?void 0:i.spaceBetweenTextAndIcon)||8,this._defaultFill=null!=(s=null==(a=null==e?void 0:e.checkboxStyle)?void 0:a.defaultFill)?s:null==i?void 0:i.defaultFill,this._defaultStroke=null!=(d=null==(h=null==e?void 0:e.checkboxStyle)?void 0:h.defaultStroke)?d:null==i?void 0:i.defaultStroke,this._disableFill=null!=(c=null==(u=null==e?void 0:e.checkboxStyle)?void 0:u.disableFill)?c:null==i?void 0:i.disableFill,this._checkedFill=null!=(g=null==(p=null==e?void 0:e.checkboxStyle)?void 0:p.checkedFill)?g:null==i?void 0:i.checkedFill,this._checkedStroke=null!=(m=null==(f=null==e?void 0:e.checkboxStyle)?void 0:f.checkedStroke)?m:null==i?void 0:i.checkedStroke,this._disableCheckedFill=null!=(y=null==(b=null==e?void 0:e.checkboxStyle)?void 0:b.disableCheckedFill)?y:null==i?void 0:i.disableCheckedFill,this._disableCheckedStroke=null!=(_=null==(v=null==e?void 0:e.checkboxStyle)?void 0:v.disableCheckedStroke)?_:null==i?void 0:i.disableCheckedStroke,this._checkIconImage=null!=(x=null==(C=null==e?void 0:e.checkboxStyle)?void 0:C.checkIconImage)?x:null==i?void 0:i.checkIconImage,this._indeterminateIconImage=null!=(S=null==(w=null==e?void 0:e.checkboxStyle)?void 0:w.indeterminateIconImage)?S:null==i?void 0:i.indeterminateIconImage}get size(){return this._size}set size(e){this._size=e}get spaceBetweenTextAndIcon(){return this._spaceBetweenTextAndIcon}set spaceBetweenTextAndIcon(e){this._spaceBetweenTextAndIcon=e}get defaultFill(){return this._defaultFill}set defaultFill(e){this._defaultFill=e}get defaultStroke(){return this._defaultStroke}set defaultStroke(e){this._defaultStroke=e}get disableFill(){return this._disableFill}set disableFill(e){this._disableFill=e}get checkedFill(){return this._checkedFill}set checkedFill(e){this._checkedFill=e}get checkedStroke(){return this._checkedStroke}set checkedStroke(e){this._checkedStroke=e}get disableCheckedFill(){return this._disableCheckedFill}set disableCheckedFill(e){this._disableCheckedFill=e}get disableCheckedStroke(){return this._disableCheckedStroke}set disableCheckedStroke(e){this._disableCheckedStroke=e}get checkIconImage(){return this._checkIconImage}set checkIconImage(e){this._checkIconImage=e}get indeterminateIconImage(){return this._indeterminateIconImage}set indeterminateIconImage(e){this._indeterminateIconImage=e}getStyle(e){return new rJ(e,this)}clone(){return new rJ(this)}}class rQ{constructor(e){this._table=e;let t=eX.U2();this.freezeIcon=t[ev.up.freezeIconName],this.frozenIcon=t[ev.up.frozenIconName],this.frozenCurrentIcon=t[ev.up.frozenCurrentIconName],this.normalIcon=t[ev.up.normalIconName],this.upIcon=t[ev.up.upwardIconName],this.downIcon=t[ev.up.downwardIconName],this.dropDownAbsoluteIcon=t[ev.up.dropdownIconName],this.expandIcon=t[ev.up.expandIconName],this.collapseIcon=t[ev.up.collapseIconName]}getIcons(e,t){let i=[];if(this._table.isPivotTable()){let{showSort:r,sort:n}=this._table.internalProps.layoutMap.getHeader(e,t);if("function"==typeof r?r({col:e,row:t,table:this._table}):r){let r=this._table.getPivotSortState(e,t);r&&(r=r.toUpperCase());let n="ASC"===r?this.upIcon:"DESC"===r?this.downIcon:this.normalIcon;n&&i.push(n)}else if(n){let r=this.getSortIconForPivotTable(this._table.getPivotSortState(e,t),this._table,e,t);r&&i.push(r)}}else{let r,n=this._table.sortState;r=void 0;let l=this._table.getCellRange(e,t);if(n)if(Array.isArray(n))for(let e=0;e<n.length;e++){let t=n[e],i=this._table._getHeaderCellBySortState(t);if(i&&(0,P._Z)(l,i.col,i.row)){({order:r}=t);break}}else{let e=this._table._getHeaderCellBySortState(n);e&&(0,P._Z)(l,e.col,e.row)&&({order:r}=n)}let o=this.getSortIcon(r,this._table,e,t);o&&i.push(o)}if(this._table.showFrozenIcon&&e<this._table.allowFrozenColCount){let r=this.getFrozenIcon(e,t);r&&i.push(r)}if(this.checkDropDownIcon(this._table,e,t)){let e=this.dropDownAbsoluteIcon;i.push(e)}let r=this.getDropDownStateIcons(this._table,e,t);r.length&&i.push(...r);let{headerIcon:n}=this._table._getHeaderLayoutMap(e,t),l=this.getHierarchyIcon(e,t);if(l&&i.push(l),n){let r;r="function"==typeof n?n({col:e,row:t,value:this._table.getCellValue(e,t),dataValue:this._table.getCellOriginValue(e,t),table:this._table}):n;let l=eX.U2(),o=e=>{let t;(t="string"==typeof e?l[e]:e)&&i.push(t)};Array.isArray(r)?r.forEach((e,t)=>{o(e)}):o(r)}return i}getFrozenIcon(e,t){if(this._table.isPivotTable()||this._table.transpose||this._table.rightFrozenColCount&&e>=this._table.colCount-this._table.rightFrozenColCount)return null;let i=this._table.getHeaderDefine(e,t);if(i.columns&&i.columns.length>0)return null;let r=this.freezeIcon;return this._table.options.frozenColCount-1>e?r=this.frozenIcon:this._table.options.frozenColCount-1===e&&(r=this.frozenCurrentIcon),r}getSortIcon(e,t,i,r){let n,l="asc"===e?this.upIcon:"desc"===e?this.downIcon:this.normalIcon,o=t.getHeaderDefine(i,r);return o&&(n="function"==typeof o.showSort?o.showSort({col:i,row:r,table:this._table}):o.showSort),o&&!1!==n&&((0,b.Z)(n)||o.sort)&&(!o.columns||!(o.columns.length>0))?l:null}getSortIconForPivotTable(e,t,i,r){let n,l=t.getHeaderDefine(i,r);return(l&&(n="function"==typeof l.showSort?l.showSort({col:i,row:r,table:this._table}):l.showSort),l&&!1!==n&&((0,b.Z)(n)||l.sort)&&(!l.columns||!(l.columns.length>0)))?"ASC"===(null==e?void 0:e.toUpperCase())?this.upIcon:"DESC"===(null==e?void 0:e.toUpperCase())?this.downIcon:this.normalIcon:null}getDropDownStateIcons(e,t,i){var r,n,l;let o=e.getHeaderDefine(t,i),{dropDownMenu:a}=e._getHeaderLayoutMap(t,i);"function"==typeof a&&(a=a({row:i,col:t,table:e}));let s=e.globalDropDownMenu;"function"==typeof s&&(s=s({row:i,col:t,table:e}));let h=[];if(Array.isArray(a)&&a.length||Array.isArray(s)&&s.length&&!(null==(r=null==o?void 0:o.columns)?void 0:r.length)){let r=a||s,o=-1,d=-1;for(let a=0;a<r.length;a++){let s=r[a];if("object"==typeof s&&s.children&&s.children.length)for(let r=0;r<s.children.length;r++){let h=s.children[r];if((null==(n=e.stateManager.menu)?void 0:n.dropDownMenuHighlight)&&(0,rU.o)(e,null==(l=e.stateManager.menu)?void 0:l.dropDownMenuHighlight,"object"==typeof h?null==h?void 0:h.menuKey:h,t,i,a)){o=a,d=r;break}}if(e._dropDownMenuIsHighlight(t,i,a)){o=a;break}}if(-1!==o){let e;(e=-1!==d?r[o].children[d]:r[o]).stateIcon&&(e.stateIcon.svg?h.push({type:"svg",name:e.stateIcon.src||e.stateIcon.svg,width:e.stateIcon.width||22,height:e.stateIcon.height||22,svg:e.stateIcon.svg,positionType:ev.q0.right,marginRight:0,funcType:ev.cI.dropDownState,interactive:!1}):e.stateIcon.src&&h.push({type:"image",name:e.stateIcon.src||e.stateIcon.svg,width:e.stateIcon.width||22,height:e.stateIcon.height||22,src:e.stateIcon.src,positionType:ev.q0.right,marginRight:0,funcType:ev.cI.dropDownState,interactive:!1}))}}return h}getDropDownIconRect(e,t,i){var r,n,l,o,a,s,h,d;let u,c=null!=(o=null!=(n=null==(r=this.downIcon.hover)?void 0:r.width)?n:null==(l=this.downIcon)?void 0:l.width)?o:0,p=null!=(d=null!=(s=null==(a=this.downIcon.hover)?void 0:a.height)?s:null==(h=this.downIcon)?void 0:h.height)?d:0,g=e.right-2-c;return{left:g,right:e.right-2,top:u="middle"===i?e.top+e.height/2-c/2:"top"===i?e.top+t/2:"bottom"===i?e.bottom-2*t:e.top,bottom:p+u,width:c,height:p}}getHierarchyIcon(e,t){let{hierarchyState:i}=this._table._getHeaderLayoutMap(e,t);if(i){if(i===R.g.expand)return this.expandIcon;if(i===R.g.collapse)return this.collapseIcon}}getHierarchyIconWidth(){var e,t;return this.expandIcon.width+(null!=(e=this.expandIcon.marginLeft)?e:0)+(null!=(t=this.expandIcon.marginRight)?t:0)}checkDropDownIcon(e,t,i){var r;if(e.isPivotTable()){let r=e._getHeaderLayoutMap(t,i).dropDownMenu;if("function"==typeof r&&(r=r({row:i,col:t,table:e})),Array.isArray(r)&&r.length)return!0}else{let n=e.getHeaderDefine(t,i),l=n.dropDownMenu,o=e.globalDropDownMenu;if("function"==typeof o&&(o=o({row:i,col:t,table:e})),Array.isArray(l)&&l.length||(!Array.isArray(n.dropDownMenu)||0!==n.dropDownMenu.length)&&Array.isArray(o)&&o.length&&!(null==(r=null==n?void 0:n.columns)?void 0:r.length))return!0}return!1}getStyleClass(e){switch(e){case"text":case"link":return rq;case"image":case"video":return rY;case"checkbox":return rJ}}setTableColumnsEditor(){let e=(t,i)=>{null==t||t.forEach((t,r)=>{t.editor&&(i[r].editor=t.editor),t.columns&&e(t.columns,i[r].columns)})};e(this._table.options.columns,this._table.internalProps.columns)}}var r0=i(63778),r1=i(65755);class r2 extends EventTarget{constructor(e,t){if(super(),this._table=e,"node"===M.X.mode)return;let i=document.createElement("div");i.style.opacity="0",i.dataset.vtable="vtable",i.style.pointerEvents="none",i.classList.add("input-container");let r=this._input=document.createElement("input");i.appendChild(r),r.classList.add("table-focus-control"),r.dataset.vtable="vtable",r.readOnly=!0,t.appendChild(i),this._container=i}focus(){this._input.focus({preventScroll:!0})}setFocusRect(e,t){let i=this._input;i.value=t,i.select();let r=e.top-this._table.scrollTop,n=e.left-this._table.scrollLeft;i.style.top=`${r.toFixed()}px`,i.style.left=`${n.toFixed()}px`,i.style.width=`${e.width.toFixed()}px`,i.style.height=`${e.height.toFixed()}px`}get input(){return this._input}release(){var e;null==(e=this._container.parentElement)||e.removeChild(this._container)}}class r3{constructor(e){this.isUpdate=!1,this._keys=[],this._sorted=!1,this.data=new Map,this._keys.length=0,this.cumulativeSum=new Map,this.difference=new Map,this.totalSum=0,this.table=e}get length(){return this.data.size}clear(){this._keys=[],this.data.clear(),this.cumulativeSum.clear(),this.difference.clear(),this.totalSum=0}clearRange(){this.cumulativeSum.clear(),this.difference.clear()}_add(e,t){if(!(0,b.Z)(t))return;let i=this.table.getRowHeight(e);this.data.has(e)||(this._keys.push(e),this._sorted=!1),this.data.set(e,t),this.totalSum+=t,this.updateDifference(e,t-i)}_remove(e){if(this.data.has(e)){let t=this.data.get(e);this.data.delete(e);let i=this._keys.indexOf(e);-1!==i&&this._keys.splice(i,1),this.totalSum-=t;let r=this.table.getRowHeight(e);this.updateDifference(e,r-t)}}put(e,t){if((0,b.Z)(t))if(this.data.has(e)){let i=this.data.get(e);if(i===t)return;this.data.set(e,t);let r=t-i;this.totalSum+=r,this.updateDifference(e,r)}else this._add(e,t)}get(e){return this.data.get(e)}has(e){return this.data.has(e)}_sort(){let{_keys:e}=this;this._sorted||(e.sort((e,t)=>e<t?-1:+(e>t)),this._sorted=!0)}updateDifference(e,t){var i;let r=null!=(i=this.difference.get(e))?i:0;this.difference.set(e,r+t),this.update()}getSumInRange(e,t){return this.calculatePrefixSum(t)-this.calculatePrefixSum(e-1)}updateCumulativeSum(e,t){for(let[i,r]of this.cumulativeSum)i>=e&&this.cumulativeSum.set(i,r+t)}calculatePrefixSum(e){if(e<0)return 0;if(this.cumulativeSum.has(e)){let t=this.cumulativeSum.get(e);for(let[i,r]of this.difference)i<=e&&(t+=r);return t}return this.dealDiffenence(),this.getCumulativeSum(e)}getCumulativeSum(e){var t,i;let r=0,n=0,l=!1,o=this.table.rowCount>0&&this.table.bottomFrozenRowCount>0?this.table.rowCount-this.table.bottomFrozenRowCount:-1;for(let i=e;i>=0;i--){if(this.cumulativeSum.has(i)){r+=this.cumulativeSum.get(i);break}r+=null!=(t=this.data.get(i))?t:this.table.getRowHeight(i),i>=o&&-1!==o&&(n=r,l=i===o)}if(l&&(null==(i=this.table.containerFit)?void 0:i.height)&&this.table.bottomFrozenRowCount){let e=this.table.tableNoFrameHeight||0;r<e&&(r=e-this.table.getBottomFrozenRowsHeight()+n)}return this.cumulativeSum.set(e,r),r}update(){this.isUpdate||(this.isUpdate=!0,setTimeout(()=>{this.dealDiffenence(),this.isUpdate=!1},0))}dealDiffenence(){for(let[e]of this.cumulativeSum)for(let[t,i]of this.difference)if(e>=t){let t=this.cumulativeSum.get(e);this.cumulativeSum.set(e,t+i)}this.difference.clear()}insert(e,t){for(let t=e;t<=this.getLastIndex();t++)this.cumulativeSum.delete(t);let i=this.getLastIndex()+1,r=[];for(let t=e;t<=i;t++)this.has(t)&&(r.push({position:t,value:this.get(t)}),this._remove(t));for(let{position:i,value:n}of((0,b.Z)(t)&&this.put(e,t),r))this.put(i+1,n)}getLastIndex(){return this._sort(),this._keys[this._keys.length-1]}delLast(){let e=this.getLastIndex();this._remove(e)}delete(e){for(let t=e;t<=this.getLastIndex();t++)this.cumulativeSum.delete(t);let t=this.getLastIndex();this.has(e)&&this._remove(e);let i=[];for(let r=e+1;r<=t;r++)this.has(r)&&i.push({position:r,value:this.get(r)});for(let{position:e,value:t}of i)this._remove(e),this._add(e-1,t)}adjustOrder(e,t,i){this.clearRange(),this._sort();let{_keys:r}=this;if(e>t){let n=[];for(let l=r4(r,e+i-1);l>=0;l--){let o=r[l];if(o>=e)n.push(this.get(o));else if(t<=o&&o<e)this.put(o+i,this.get(o));else if(o<t)break}for(let e=0;e<i;e++)this.put(t+e,n[i-1-e])}let{length:n}=r;if(e<t){let l=[];for(let o=r4(r,e);o<n;o++){let n=r[o];if(n>=e&&n<e+i)l.push(this.get(n));else if(e+i<=n&&n<=t)this.put(n-i,this.get(n));else if(n>t)break}for(let e=0;e<i;e++)this.put(t+e,l[e])}}exchangeOrder(e,t,i,r,n){let l=[];for(let i=e+t-1;i>=e;i--)l.push({position:i,value:this.get(i)}),this.delete(i);for(let e=0;e<t;e++)this.insert(n,l[e].value)}}function r4(e,t){let i=0,r=e.length-1;for(;i<=r;){let n=Math.floor((i+r)/2);if(e[n]===t)return n;e[n]>t?r=n-1:i=n+1}let n=r<0?0:r;return e[n]===t?n:-1}class r5{constructor(e){this._table=e;let t=eX.U2();this.dragReorderIconName=t[ev.up.dragReorderIconName]}getIcons(e,t){return[this.dragReorderIconName]}}var r6=i(26249),r8=i(20829);function r7(e,t){var i;return(0,ex.ke)(t,e)||(null!=(i=nt(e,t))?i:{top:-1,row:-1,bottom:-1,height:-1})}function r9(e,t){var i;return(0,ex.sQ)(t,e)||(null!=(i=ne(e,t))?i:{left:-1,col:-1,right:-1,width:1})}function ne(e,t){if(0===e)return{left:0,col:0,right:0,width:0};let i=function(e,t){if(t._colRangeWidthsMap.get("$0$"+(t.colCount-1))){let i=0,r=t.colCount-1;for(;r-i>1;){let n=Math.floor((i+r)/2);if(e<t._colRangeWidthsMap.get(`$0$${n}`))r=n;else{if(!(e>t._colRangeWidthsMap.get(`$0$${n}`)))return n;i=n}}return r}return Math.min(Math.ceil(e/t.internalProps.defaultColWidth),t.colCount-1)}(e,t),r=t.getColsWidth(0,i);return e>=r?((i,r)=>{let n=r-t.getColWidth(i),{colCount:l}=t.internalProps;for(let r=i;r<l;r++){let i=t.getColWidth(r),l=n+i;if(Math.round(n)<=e&&e<Math.round(l))return{left:n,col:r,right:l,width:i};n=l}return null})(i,r):((i,r)=>{let n=r;for(let r=i;r>=0;r--){let i=t.getColWidth(r),l=n-i;if(Math.round(l)<=e&&e<Math.round(n))return{left:l,col:r,right:n,width:i};n=l}return null})(i,r)}function nt(e,t){var i,r,n;let l;if(0===e)return{top:0,row:0,bottom:0,height:0};let o=!0===(null==(i=t.options.customConfig)?void 0:i._disableColumnAndRowSizeRound)?Math.floor:Math.round,a=(r=e,l=(n=t).defaultRowHeight,n._rowRangeHeightsMap.get("$0$"+(n.rowCount-1))&&(l=n._rowRangeHeightsMap.get("$0$"+(n.rowCount-1))/n.rowCount),Math.min(Math.ceil(r/l),n.rowCount-1)),s=t.getRowsHeight(0,a);return e>=s?((i,r)=>{let n=r-t.getRowHeight(i),{rowCount:l}=t.internalProps;for(let r=i;r<l;r++){let i=t.getRowHeight(r),l=n+i;if(o(n)<=o(e)&&o(e)<o(l))return{top:n,row:r,bottom:l,height:i};n=l}return null})(a,s):((i,r)=>{let n=r;for(let r=i;r>=0;r--){let i=t.getRowHeight(r),l=n-i;if(o(l)<=o(e)&&o(e)<o(n))return{top:l,row:r,bottom:n,height:i};n=l}return null})(a,s)}function ni(e,t,i){if(0===e)return{left:0,col:0,right:0,width:0};if(e-=i.tableX,t&&e>i.tableNoFrameWidth-i.getRightFrozenColsWidth()&&e<i.tableNoFrameWidth&&e<=i.getAllColsWidth()){for(let t=0;t<i.rightFrozenColCount;t++)if(e>i.tableNoFrameWidth-i.getColsWidth(i.colCount-t-1,i.colCount-1))return{col:i.colCount-t-1,left:void 0,right:void 0,width:void 0}}return ne(e,i)}function nr(e,t,i){if(0===e)return{top:0,row:0,bottom:0,height:0};if(e-=i.tableY,t&&e>i.tableNoFrameHeight-i.getBottomFrozenRowsHeight()&&e<i.tableNoFrameHeight){for(let t=0;t<i.rightFrozenColCount;t++)if(e>i.tableNoFrameHeight-i.getRowsHeight(i.rowCount-t-1,i.rowCount-1))return{row:i.rowCount-t-1,top:void 0,bottom:void 0,height:void 0}}return nt(e,i)}var nn=i(26874);function nl(e,t,i,r,n,l){var o;return e||t?e instanceof rX?e:"function"==typeof e?nl(e(i),t,i,r,n,l):(e||(e={}),n&&!(0,b.Z)(e.autoWrapText)&&(e.autoWrapText=!0),r===rJ?new rJ(null!=e?e:{},null!=t?t:{},null!=(o=l.checkboxStyle)?o:{}):new r(null!=e?e:{},null!=t?t:{})):r.DEFAULT}var no=i(47962);let na={};var ns=i(15982),nh=i(41551),nd=i(71204),nu=i(96534),nc=i(27753);function np(e){return Math.floor(e)===e}class ng extends ns.rd{onUpdate(e,t,i){if(this.from.x!==this.to.x){let i=e?this.to.x:this.from.x+Math.floor((this.to.x-this.from.x)*t);this.params.table.scrollLeft=i}if(this.from.y!==this.to.y){let i=e?this.to.y:this.from.y+Math.floor((this.to.y-this.from.y)*t);this.params.table.scrollTop=i}}}class nf{constructor(e){this.table=e,this.timeline=new nh.L,this.ticker=new nd.H(this.table.scenegraph.stage),this.ticker.addTimeline(this.timeline),this.ticker.setFPS(60),this.tempGraphic=(0,eN.f)({})}scrollTo(e,t){var i,r;let n={x:this.table.scrollLeft,y:this.table.scrollTop},{col:l,row:o}=e,a,s,h=l,d=o;(0,eM.Z)(l)&&!np(l)&&(h=Math.floor(l),a=l-h),(0,eM.Z)(o)&&!np(o)&&(d=Math.floor(o),s=o-d);let u=this.table.getCellRect(null!=h?h:0,null!=d?d:0),{left:c,top:p}=u;a&&(c+=a*u.width),s&&(p+=s*u.height);let g={x:(0,eM.Z)(l)?c-this.table.getFrozenColsWidth():this.table.scrollLeft,y:(0,eM.Z)(o)?p-this.table.getFrozenRowsHeight():this.table.scrollTop},f=(0,r0.Z)(t)?3e3*!!t:null!=(i=null==t?void 0:t.duration)?i:3e3,m=(0,r0.Z)(t)?t?"linear":"":null!=(r=null==t?void 0:t.easing)?r:"linear";new nu.r(nc.R.GenAutoIncrementId(),this.timeline).bind(this.tempGraphic).play(new ng(n,g,f,m,{graphic:this.tempGraphic,table:this.table})),this.ticker.start()}clear(){this.timeline.clear(),this.ticker.stop()}}var nm=i(28625);class nb{constructor(e,t){var i;this.plugins=new Map,this.pluginEventMap=new Map,this.table=e,null==(i=t.plugins)||i.map(e=>{this.register(e),this._bindTableEventForPlugin(e)})}register(e){this.plugins.set(e.id,e)}registerAll(e){e.forEach(e=>this.register(e))}getPlugin(e){return this.plugins.get(e)}getPluginByName(e){return Array.from(this.plugins.values()).find(t=>t.name===e)}_bindTableEventForPlugin(e){var t;null==(t=e.runTime)||t.forEach(t=>{let i=this.table.on(t,(...i)=>{var r;null==(r=e.run)||r.call(e,...i,t,this.table)});this.pluginEventMap.set(e.id,[...this.pluginEventMap.get(e.id)||[],i])})}removeOrAddPlugins(e){Array.from(this.plugins.values()).filter(t=>!(null==e?void 0:e.some(e=>e.id===t.id))).forEach(e=>{var t;null==(t=this.pluginEventMap.get(e.id))||t.forEach(e=>{this.table.off(e)}),this.release(),this.plugins.delete(e.id)});let t=null==e?void 0:e.filter(e=>!this.plugins.has(e.id));null==t||t.forEach(e=>{this.register(e),this._bindTableEventForPlugin(e)})}updatePlugins(e){null==e||e.forEach(e=>{e.update&&e.update()})}release(){this.plugins.forEach(e=>{var t;null==(t=e.release)||t.call(e,this.table)})}}let{toBoxArray:ny}=P.oB,{isTouchEvent:nv}=P.B,n_=/^\$(\d+)\$(\d+)$/;!function(){if("node"===M.X.mode)return;let e=document.createElement("style");e.id="vtable-style-styleSheet",e.textContent="\n.vtable .input-container {\n	position: absolute;\n	top:0px;\n}\n.vtable .table-scrollable {\n	position: absolute;\n	overflow: scroll;\n}\n.vtable .table-scrollable::-webkit-scrollbar-button{\n	background-color: transparent;\n}\n.vtable .table-scrollable::-webkit-scrollbar-track-piece{\n	background-color: transparent;\n}\n.vtable .table-scrollable::-webkit-scrollbar-corner {\n	background-color: transparent;\n}\n.vtable .table-scrollable::-webkit-scrollbar-thumb {\n	border-radius      : 4px;\n	background-color   : rgba(100, 100, 100, .5);\n}\n\n.vtable .table-scroll-end-point {\n	opacity: 0;\n	position: relative;\n}\n.vtable {\n	/* overflow: auto  auto domvtable ;auto  */\n	/* overflow: auto; */\n	position: relative;\n	width: 100%;\n	height: 100%;\n	text-align: left;\n  -webkit-font-smoothing:auto;\n\n  overflow: hidden; // for react-vtable dom custom element\n}\n\n.vtable-gantt {\n	/* overflow: auto  auto domvtable ;auto  */\n	/* overflow: auto; */\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	text-align: left;\n  -webkit-font-smoothing:auto;\n\n  overflow: hidden; // for react-vtable dom custom element\n}\n.vtable .table-component-container {\n  pointer-events: none;\n  overflow: hidden;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n}\n.vtable > canvas {\n	position: absolute;\n	width: 0;\n	height: 0;\n}\n.vtable .table-focus-control {\n	position: relative !important;\n	width: 1px;\n	height: 1px;\n	opacity: 0;\n	padding: 0;\n	margin: 0;\n	box-sizing: border-box;\n	pointer-events: none;\n	max-width: 500px;\n	max-height: 500px;\n	float: none !important;\n}\n.vtable input.table-focus-control::-ms-clear {\n	visibility: hidden;\n}\n.vtable input.table-focus-control.composition {\n	opacity: 1;\n	max-width: none;\n	max-height: none;\n}\n",document.head.appendChild(e)}();class nC extends y.R{static get EVENT_TYPE(){return B.B}constructor(e,t={}){var i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,y,v,_,C,x,w,S,A,k;if(super(),this.showFrozenIcon=!0,this.version="1.22.11",this.id=`VTable${Date.now()}`,this.isReleased=!1,this._chartEventMap={},this.throttleInvalidate=(0,H.E5)(this.render.bind(this),200),"node"===M.X.mode?(t=e,e=null):e instanceof HTMLElement||(t=e,e=e.container?e.container:null),!e&&"node"!==t.mode&&!t.canvas)throw Error("vtable's container is undefined");this.pluginManager=new nb(this,t),this.fireListeners(B.B.BEFORE_INIT,{options:t,container:e}),e=t.container&&t.container instanceof HTMLElement?t.container:e,!1===(null==(i=t.customConfig)?void 0:i.imageAnonymous)&&(et.rF.isImageAnonymous=!1);let{frozenColCount:T=0,unfreezeAllOnExceedsMaxWidth:E,frozenRowCount:P,defaultRowHeight:F=40,defaultHeaderRowHeight:O,defaultColWidth:D=80,defaultHeaderColWidth:z,widthMode:W="standard",heightMode:Z="standard",autoFillWidth:N=!1,autoFillHeight:$=!1,containerFit:j={width:!1,height:!1},widthAdaptiveMode:G="only-body",heightAdaptiveMode:V="only-body",keyboardOptions:U,eventOptions:K,rowSeriesNumber:X,enableCheckboxCascade:Y,enableHeaderCheckboxCascade:q,columnResizeMode:J,rowResizeMode:ee="none",resize:ei,dragHeaderMode:er,dragOrder:en,showFrozenIcon:el,allowFrozenColCount:eo,padding:ea,hover:es,menu:eh,select:ed,customRender:eu,pixelRatio:ec=rE,renderChartAsync:ep,renderChartAsyncBatchCount:eg,mode:ef,modeParams:em,canvasWidth:eb,canvasHeight:ey,contentOffsetX:ev,contentOffsetY:e_,overscrollBehavior:ew,limitMinWidth:eS,limitMinHeight:eA,clearDOM:ek=!0}=t,{groupConfig:eT,groupBy:eR,groupTitleFieldFormat:eE,groupTitleCustomLayout:eP,enableTreeStickCell:eB}=t;this.container=e,this.options=t,this._widthMode=W,this._heightMode=Z,this._widthAdaptiveMode=G,this._heightAdaptiveMode=V,this._autoFillWidth=N,this._autoFillHeight=$,void 0!==j&&(this._containerFit="boolean"==typeof j?{width:j,height:j}:j&&"object"==typeof j?{width:null==(r=j.width)||r,height:null==(n=j.height)||n}:{width:!1,height:!1}),this.customRender=eu,this.padding={top:0,right:0,left:0,bottom:0},ea&&("number"==typeof ea?(this.padding.top=ea,this.padding.left=ea,this.padding.bottom=ea,this.padding.right=ea):(ea.top&&(this.padding.top=ea.top),ea.bottom&&(this.padding.bottom=ea.bottom),ea.left&&(this.padding.left=ea.left),ea.right&&(this.padding.right=ea.right))),((0,b.Z)(ey)||(0,b.Z)(eb))&&(this.canvasSizeSeted=!0),this.tableNoFrameWidth=0,this.tableNoFrameHeight=0,this.contentOffsetX=null!=ev?ev:0,this.contentOffsetY=null!=e_?e_:0,this.canvasWidth=(0,eM.Z)(eb)?eb:void 0,this.canvasHeight=(0,eM.Z)(ey)?ey:void 0,this.columnWidthComputeMode=null!=(l=t.columnWidthComputeMode)?l:"normal";let eI=this.internalProps={};void 0!==el&&(this.showFrozenIcon=el),"number"==typeof eo&&eo<=0&&(this.showFrozenIcon=!1),this.options.canvas?("node"!==M.X.mode&&(eI.element=this.options.canvas.parentElement,eI.element.style.position="relative"),eI.focusControl=new r2(this,eI.element),eI.canvas=this.options.canvas,eI.context=eI.canvas.getContext("2d")):"node"!==M.X.mode&&(eI.element=(0,ex._I)(this.padding),eI.focusControl=new r2(this,eI.element),eI.canvas=document.createElement("canvas"),eI.element.appendChild(eI.canvas),eI.context=eI.canvas.getContext("2d"),(null==(o=t.customConfig)?void 0:o.createReactContainer)&&function(e){let{internalProps:t}=e;t.bodyDomContainer=document.createElement("div"),t.bodyDomContainer.id="vtable-body-dom-container",t.bodyDomContainer.classList.add("table-component-container"),t.element.appendChild(t.bodyDomContainer),t.headerDomContainer=document.createElement("div"),t.headerDomContainer.id="vtable-header-dom-container",t.headerDomContainer.classList.add("table-component-container"),t.element.appendChild(t.headerDomContainer),t.frozenBodyDomContainer=document.createElement("div"),t.frozenBodyDomContainer.id="vtable-frozen-body-dom-container",t.frozenBodyDomContainer.classList.add("table-component-container"),t.element.appendChild(t.frozenBodyDomContainer),t.frozenHeaderDomContainer=document.createElement("div"),t.frozenHeaderDomContainer.id="vtable-frozen-header-dom-container",t.frozenHeaderDomContainer.classList.add("table-component-container"),t.element.appendChild(t.frozenHeaderDomContainer),t.rightFrozenBodyDomContainer=document.createElement("div"),t.rightFrozenBodyDomContainer.id="vtable-right-frozen-body-dom-container",t.rightFrozenBodyDomContainer.classList.add("table-component-container"),t.element.appendChild(t.rightFrozenBodyDomContainer),t.rightFrozenHeaderDomContainer=document.createElement("div"),t.rightFrozenHeaderDomContainer.id="vtable-right-frozen-header-dom-container",t.rightFrozenHeaderDomContainer.classList.add("table-component-container"),t.element.appendChild(t.rightFrozenHeaderDomContainer),t.frozenBottomDomContainer=document.createElement("div"),t.frozenBottomDomContainer.id="vtable-frozen-bottom-dom-container",t.frozenBottomDomContainer.classList.add("table-component-container"),t.element.appendChild(t.frozenBottomDomContainer),t.bottomDomContainer=document.createElement("div"),t.bottomDomContainer.id="vtable-bottom-dom-container",t.bottomDomContainer.classList.add("table-component-container"),t.element.appendChild(t.bottomDomContainer),t.rightFrozenBottomDomContainer=document.createElement("div"),t.rightFrozenBottomDomContainer.id="vtable-right-frozen-bottom-dom-container",t.rightFrozenBottomDomContainer.classList.add("table-component-container"),t.element.appendChild(t.rightFrozenBottomDomContainer)}(this)),eI.handler=new I.b,(0,eM.Z)(this.options.resizeTime)&&(eI.handler.resizeTime=this.options.resizeTime),eI.pixelRatio=ec,eI.frozenColCount=T,eI.frozenRowCount=P,eI.unfreezeAllOnExceedsMaxWidth=null==E||E,eI.defaultRowHeight=F,eI.defaultHeaderRowHeight=null!=O?O:F,eI.defaultColWidth=D,eI.defaultHeaderColWidth=null!=z?z:D,eI.keyboardOptions=U,eI.eventOptions=K,eI.rowSeriesNumber=X,eI.enableCheckboxCascade=null==(a=null!=Y?Y:null==X?void 0:X.enableTreeCheckbox)||a,eI.enableHeaderCheckboxCascade=Y||null==q||q,eI.columnResizeMode=null!=(s=null==ei?void 0:ei.columnResizeMode)?s:J,eI.canResizeColumn=null==ei?void 0:ei.canResizeColumn,eI.rowResizeMode=null!=(h=null==ei?void 0:ei.rowResizeMode)?h:ee,eI.dragHeaderMode=null!=(u=null!=(d=null==en?void 0:en.dragHeaderMode)?d:er)?u:"none",eI.renderChartAsync=ep,(0,th.Ry)(eg),eI.overscrollBehavior=null!=ew?ew:"auto",eI.groupBy=null!=(c=null==eT?void 0:eT.groupBy)?c:eR,eI.groupTitleCheckbox=null!=(p=null==eT?void 0:eT.titleCheckbox)?p:!!(null==X?void 0:X.enableTreeCheckbox),eI.groupTitleFieldFormat=null!=(g=null==eT?void 0:eT.titleFieldFormat)?g:eE,eI.groupTitleCustomLayout=null!=(f=null==eT?void 0:eT.titleCustomLayout)?f:eP,eI.enableTreeStickCell=null!=(m=null==eT?void 0:eT.enableTreeStickCell)?m:eB,eI._rowHeightsMap=new r3(this),eI._rowRangeHeightsMap=new Map,eI._colRangeWidthsMap=new Map,eI._widthResizedColMap=new Set,eI._heightResizedRowMap=new Set,this.colWidthsMap=new L.B,this.colContentWidthsMap=new L.B,this.colWidthsLimit={};let eL=this;if(eI.calcWidthContext={_:eI,get full(){var eF,eH;return"node"===M.X.mode?eL.canvasWidth/(null!=ec?ec:1):this._.canvas.width/(null!=(eH=null!=(eF=this._.context.pixelRatio)?eF:eL.internalProps.pixelRatio)?eH:window.devicePixelRatio)}},eI.cellTextOverflows={},eI.focusedTable=!1,eI.theme=Q.of(null!=(y=t.theme)?y:Q.DEFAULT),eI.theme.isPivot=this.isPivotTable(),(0,eX.E6)(eI.theme.functionalIconsStyle),e&&(ek&&(e.innerHTML=""),e.appendChild(eI.element)),this._updateSize(),eI.bodyHelper=new rV(this),eI.headerHelper=new rQ(this),eI.rowSeriesNumberHelper=new r5(this),eI.autoWrapText=t.autoWrapText,eI.enableLineBreak=t.enableLineBreak,eI.allowFrozenColCount=null!=(v=t.allowFrozenColCount)?v:0,eI.limitMaxAutoWidth=null!=(_=t.limitMaxAutoWidth)?_:450,eI.limitMinWidth=null!=eS?"number"==typeof eS?eS:10*!!eS:10,eI.limitMinHeight=null!=eA?"number"==typeof eA?eA:10*!!eA:10,this.scenegraph=new i8(this),this.stateManager=new rm(this),this.eventManager=new rW(this),this.animationManager=new nf(this),t.legends){eI.legends=[];let e=eC.F.getFunction("createLegend");if(Array.isArray(t.legends)){for(let i=0;i<t.legends.length;i++)eI.legends.push(e(t.legends[i],this));this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})}else eI.legends.push(e(t.legends,this)),this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})}if(eI.tooltip=Object.assign({parentElement:this.getElement(),renderMode:"html",isShowOverflowTextTooltip:!1,confine:!0,position:R.u.bottom},t.tooltip),"html"===eI.tooltip.renderMode){let e=eC.F.getComponent("tooltipHandler");e&&(eI.tooltipHandler=new e(this,eI.tooltip.confine))}eI.menu=Object.assign({renderMode:"html"},t.menu),Array.isArray(null==(C=t.menu)?void 0:C.dropDownMenuHighlight)&&this.setDropDownMenuHighlight(null==(x=t.menu)?void 0:x.dropDownMenuHighlight),(Array.isArray(null==(w=t.menu)?void 0:w.defaultHeaderMenuItems)||"function"==typeof(null==(S=t.menu)?void 0:S.defaultHeaderMenuItems))&&(this.globalDropDownMenu=t.menu.defaultHeaderMenuItems),"html"===eI.menu.renderMode&&(eI.menuHandler=new(eC.F.getComponent("menuHandler"))(this)),this.headerStyleCache=new Map,this.bodyStyleCache=new Map,this.bodyMergeTitleCache=new Map,this.bodyBottomStyleCache=new Map,eI.stick={changedCells:new Map},eI.customMergeCell=(0,nm.k)(t.customMergeCell);let eO=eC.F.getComponent("customCellStylePlugin");eO&&(this.customCellStylePlugin=new eO(this,null!=(A=t.customCellStyle)?A:[],null!=(k=t.customCellStyleArrangement)?k:[])),this._adjustCanvasSizeByOption()}_adjustCanvasSizeByOption(){"auto"!==this.options.canvasHeight&&"auto"!==this.options.canvasWidth||setTimeout(()=>{var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w;let S,A;if("auto"===this.options.canvasHeight){let c=0;if(null==(e=this.theme.frameStyle)?void 0:e.innerBorder)c+=null!=(r=ny(null!=(i=null==(t=this.internalProps.theme.frameStyle)?void 0:t.shadowBlur)?i:[0])[1])?r:0;else if(this.theme.frameStyle){let e=ny(null!=(l=null==(n=this.internalProps.theme.frameStyle)?void 0:n.borderLineWidth)?l:[null]),t=ny(null!=(a=null==(o=this.internalProps.theme.frameStyle)?void 0:o.shadowBlur)?a:[0]);c+=(null!=(s=e[0])?s:0)+(null!=(h=t[0])?h:0)+((null!=(d=e[2])?d:0)+(null!=(u=t[2])?u:0))}A=Math.min(this.options.maxCanvasHeight?this.options.maxCanvasHeight-c:2e4,this.getAllRowsHeight())+c}else A=this.canvasHeight;if("auto"===this.options.canvasWidth){let e=0;if(null==(c=this.theme.frameStyle)?void 0:c.innerBorder)e+=null!=(f=ny(null!=(g=null==(p=this.internalProps.theme.frameStyle)?void 0:p.shadowBlur)?g:[0])[2])?f:0;else if(this.theme.frameStyle){let t=ny(null!=(b=null==(m=this.internalProps.theme.frameStyle)?void 0:m.borderLineWidth)?b:[null]),i=ny(null!=(v=null==(y=this.internalProps.theme.frameStyle)?void 0:y.shadowBlur)?v:[0]);e+=(null!=(_=t[1])?_:0)+(null!=(C=i[1])?C:0)+((null!=(x=t[3])?x:0)+(null!=(w=i[3])?w:0))}S=Math.min(this.options.maxCanvasWidth?this.options.maxCanvasWidth-e:2e4,this.getAllColsWidth())+e}else S=this.canvasWidth;this.setCanvasSize(S,A)},0)}getContainer(){return this.container}getElement(){return this.internalProps.element}get canvas(){return this.internalProps.canvas}setCanvasSize(e,t){this.canvasWidth=e,this.canvasHeight=t,this.options.canvasHeight=t,this.options.canvasWidth=e,this.resize()}setContentInsetXY(e,t){this.contentOffsetX=e,this.contentOffsetY=t,this.options.contentOffsetX=e,this.options.contentOffsetY=t,this.resize()}resize(){var e;this._updateSize(),null==(e=this.internalProps.legends)||e.forEach(e=>{null==e||e.resize()}),this.internalProps.title&&this.internalProps.title.resize(),this.internalProps.emptyTip&&this.internalProps.emptyTip.resize(),this.scenegraph.resize()}get rowCount(){return this.internalProps.rowCount}set rowCount(e){this.internalProps.rowCount=e}get colCount(){var e;return null!=(e=this.internalProps.colCount)?e:0}set colCount(e){this.internalProps.colCount=e}get frozenColCount(){var e,t,i,r,n;return null!=(n=null!=(i=null==(t=null==(e=this.internalProps)?void 0:e.layoutMap)?void 0:t.frozenColCount)?i:null==(r=this.internalProps)?void 0:r.frozenColCount)?n:0}set frozenColCount(e){e>=this.colCount&&(e=0),this.internalProps.frozenColCount=e,this.options.frozenColCount=e;let t=this._getMaxFrozenWidth();if(this.getColsWidth(0,e-1)>t)if(this.internalProps.unfreezeAllOnExceedsMaxWidth)this.internalProps.frozenColCount=0;else{let t=this._getComputedFrozenColCount(e);this.internalProps.frozenColCount=t}this.stateManager.setFrozenCol(this.internalProps.frozenColCount)}setFrozenColCount(e){e>=this.colCount&&(e=0),this.internalProps.frozenColCount=e,this.options.frozenColCount=e;let t=this._getMaxFrozenWidth();if(this.getColsWidth(0,e-1)>t)if(this.internalProps.unfreezeAllOnExceedsMaxWidth)this.internalProps.frozenColCount=0;else{let t=this._getComputedFrozenColCount(e);this.internalProps.frozenColCount=t}this.stateManager.setFrozenCol(this.internalProps.frozenColCount)}_setFrozenColCount(e){e>=this.colCount&&(e=0),this.internalProps.frozenColCount=e}_resetFrozenColCount(){this.options.frozenColCount&&(this.tableNoFrameWidth-this.getColsWidth(0,this.options.frozenColCount-1)<=120?this._setFrozenColCount(0):this.frozenColCount!==this.options.frozenColCount&&this._setFrozenColCount(this.options.frozenColCount))}get frozenRowCount(){var e,t,i,r,n;return null!=(n=null!=(i=null==(t=null==(e=this.internalProps)?void 0:e.layoutMap)?void 0:t.frozenRowCount)?i:null==(r=this.internalProps)?void 0:r.frozenRowCount)?n:0}set frozenRowCount(e){this.internalProps.frozenRowCount=e,this.options.frozenRowCount=e,this.stateManager.setFrozenRow(this.internalProps.frozenRowCount)}_setFrozenRowCount(e){this.internalProps.frozenRowCount=e,this.stateManager.setFrozenRow(this.internalProps.frozenRowCount)}get rightFrozenColCount(){var e,t,i,r,n;return null!=(n=null!=(i=null==(t=null==(e=this.internalProps)?void 0:e.layoutMap)?void 0:t.rightFrozenColCount)?i:null==(r=this.internalProps)?void 0:r.rightFrozenColCount)?n:0}set rightFrozenColCount(e){this.scenegraph.dealWidthRightFrozen(e)}get bottomFrozenRowCount(){var e,t,i,r,n;return null!=(n=null!=(i=null==(t=null==(e=this.internalProps)?void 0:e.layoutMap)?void 0:t.bottomFrozenRowCount)?i:null==(r=this.internalProps)?void 0:r.bottomFrozenRowCount)?n:0}set bottomFrozenRowCount(e){this.scenegraph.dealWidthBottomFrozen(e)}get defaultRowHeight(){return(0,eM.Z)(this.internalProps.defaultRowHeight)?this.internalProps.defaultRowHeight:40}set defaultRowHeight(e){this.internalProps.defaultRowHeight=e,this.options.defaultRowHeight=e}get defaultHeaderRowHeight(){return this.internalProps.defaultHeaderRowHeight}set defaultHeaderRowHeight(e){this.internalProps.defaultHeaderRowHeight=e,this.options.defaultHeaderRowHeight=e}get defaultColWidth(){return this.internalProps.defaultColWidth}set defaultColWidth(e){this.internalProps.defaultColWidth=e,this.options.defaultColWidth=e}get defaultHeaderColWidth(){return this.internalProps.defaultHeaderColWidth}set defaultHeaderColWidth(e){this.internalProps.defaultHeaderColWidth=e,this.options.defaultHeaderColWidth=e}get colWidthsMap(){return this.internalProps._colWidthsMap}set colWidthsMap(e){this.internalProps._colWidthsMap=e}get colContentWidthsMap(){return this.internalProps._colContentWidthsMap}set colContentWidthsMap(e){this.internalProps._colContentWidthsMap=e}get _colRangeWidthsMap(){return this.internalProps._colRangeWidthsMap}set _colRangeWidthsMap(e){this.internalProps._colRangeWidthsMap=e}get _rowRangeHeightsMap(){return this.internalProps._rowRangeHeightsMap}set _rowRangeHeightsMap(e){this.internalProps._rowRangeHeightsMap=e}get rowHeightsMap(){return this.internalProps._rowHeightsMap}set rowHeightsMap(e){this.internalProps._rowHeightsMap=e}get colWidthsLimit(){return this.internalProps._colWidthsLimit}set colWidthsLimit(e){this.internalProps._colWidthsLimit=e}get keyboardOptions(){var e;return null!=(e=this.internalProps.keyboardOptions)?e:null}set keyboardOptions(e){this.internalProps.keyboardOptions=null!=e?e:void 0}get eventOptions(){var e;return null!=(e=this.internalProps.eventOptions)?e:null}set eventOptions(e){this.internalProps.eventOptions=null!=e?e:void 0}get widthMode(){return this._widthMode}set widthMode(e){e!==this._widthMode&&(this._widthMode=e,this.options.widthMode=e)}get heightMode(){return this._heightMode}set heightMode(e){e!==this._heightMode&&(this._heightMode=e,this.options.heightMode=e)}get autoFillWidth(){return this._autoFillWidth}set autoFillWidth(e){e!==this._autoFillWidth&&(this._autoFillWidth=e)}get autoFillHeight(){return this._autoFillHeight}set autoFillHeight(e){e!==this._autoFillHeight&&(this._autoFillHeight=e)}get widthAdaptiveMode(){return this._widthAdaptiveMode}set widthAdaptiveMode(e){e!==this._widthAdaptiveMode&&(this._widthAdaptiveMode=e)}get heightAdaptiveMode(){return this._heightAdaptiveMode}set heightAdaptiveMode(e){e!==this._heightAdaptiveMode&&(this._heightAdaptiveMode=e)}_colWidthDefineToPxWidth(e){return"auto"===e?0:(0,ex.qf)(this,e)}_getMaxFrozenWidth(){var e;let t=null!=(e=this.options.maxFrozenWidth)?e:"80%";return(0,ex.qf)(this,t)}_getComputedFrozenColCount(e){let t=this._getMaxFrozenWidth(),i=e;for(;this.getColsWidth(0,i-1)>t&&!(--i<=0););return i}_getColWidthLimits(e){let t=this.colWidthsLimit[e];if(!t)return null;let i={};return t.min&&(i.min=(0,ex.qf)(this,t.min),i.minDef=t.min),t.max&&(i.max=(0,ex.qf)(this,t.max),i.maxDef=t.max),i}_adjustColWidth(e,t){let i=this._getColWidthLimits(e);return Math.max((0,ex.AS)(i,t),0)}get pixelRatio(){return this.internalProps.pixelRatio}setPixelRatio(e){var t;if(e!==(null==(t=this.internalProps)?void 0:t.pixelRatio)){this.internalProps.pixelRatio=e;let t=this,n=this.canvasWidth;this.internalProps.calcWidthContext={_:this.internalProps,get full(){var i,r;return"node"===M.X.mode?n/(null!=e?e:1):this._.canvas.width/(null!=(r=null!=(i=this._.context.pixelRatio)?i:t.internalProps.pixelRatio)?r:window.devicePixelRatio)}},this.scenegraph.setPixelRatio(e)}}_updateSize(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,y,v,_,C,x,w,S,A,k,R,E,P,B;let{padding:I}=this,L=0,F=0;if(this.tableX=this.contentOffsetX,this.tableY=this.contentOffsetY,this.options.canvas&&this.options.viewBox)L=this.options.viewBox.x2-this.options.viewBox.x1,F=this.options.viewBox.y2-this.options.viewBox.y1,(null==(e=null==this?void 0:this.scenegraph)?void 0:e.stage)&&(this.options.viewBox?this.scenegraph.stage.setViewBox(this.options.viewBox,!1):this.scenegraph.stage.resize(L,F));else if("browser"===M.X.mode){let e=this.getElement(),d=0,u=0,c=(0,b.Z)(this.canvasWidth),p=(0,b.Z)(this.canvasHeight);if(this.canvasSizeSeted&&(c&&(d=this.canvasWidth),p&&(u=this.canvasHeight)),(!c||!p)&&e.parentElement){let t=e.parentElement.style||window.getComputedStyle(e.parentElement);c||(d=e.parentElement.offsetWidth-(parseInt(t.paddingLeft,10)||0)-(parseInt(t.paddingRight,10)||0)),p||(u=e.parentElement.offsetHeight-parseInt(t.paddingTop||"0px",10)-parseInt(t.paddingBottom||"0px",20)),d=(null!=d?d:1)-!!this.options.tableSizeAntiJitter,u=(null!=u?u:1)-!!this.options.tableSizeAntiJitter}e.style.width=d&&d-I.left-I.right+"px"||"0px",e.style.height=u&&u-I.top-I.bottom+"px"||"0px";let{canvas:g}=this.internalProps;L=(null!=(i=null==(t=g.parentElement)?void 0:t.offsetWidth)?i:1)-!!this.options.tableSizeAntiJitter,F=(null!=(n=null==(r=g.parentElement)?void 0:r.offsetHeight)?n:1)-!!this.options.tableSizeAntiJitter,(null==(l=null==this?void 0:this.scenegraph)?void 0:l.stage)?(null==(o=this.options)?void 0:o.viewBox)&&!(null==(a=this.options)?void 0:a.canvas)&&this.scenegraph.stage.resize(L,F):(g.style.width="",g.style.height="",g.width=L,g.height=F,g.style.width=`${L}px`,g.style.height=`${F}px`),(null==(s=this.options)?void 0:s.viewBox)&&(L=this.options.viewBox.x2-this.options.viewBox.x1,F=this.options.viewBox.y2-this.options.viewBox.y1),(null==(h=null==this?void 0:this.scenegraph)?void 0:h.stage)&&(this.options.viewBox?this.scenegraph.stage.setViewBox(this.options.viewBox,!1):this.scenegraph.stage.resize(L,F))}else"node"===M.X.mode&&(L=this.canvasWidth-1,F=this.canvasHeight-1);let H=this.getTheme().scrollStyle,O=0,D=0;O=this.shouldVScrollBarWidthShow(L,F,H)?T.Iv(H):0,D=this.shouldHScrollBarWidthShow(L,F,H)?T.vP(H):0;let z=Math.floor(L-O),W=Math.floor(F-D);if(null==(d=this.internalProps.theme)?void 0:d.frameStyle){let e=ny(null!=(c=null==(u=this.internalProps.theme.frameStyle)?void 0:u.borderLineWidth)?c:[null]),t=ny(null!=(g=null==(p=this.internalProps.theme.frameStyle)?void 0:p.shadowBlur)?g:[0]);if(null==(f=this.theme.frameStyle)?void 0:f.innerBorder)this.tableX+=this.contentOffsetX,this.tableY+=this.contentOffsetY,this.tableNoFrameWidth=z-(null!=(m=t[1])?m:0)-this.contentOffsetX,this.tableNoFrameHeight=W-(null!=(y=t[2])?y:0)-this.contentOffsetY;else{this.tableX+=(null!=(v=e[3])?v:0)+(null!=(_=t[3])?_:0),this.tableY+=(null!=(C=e[0])?C:0)+(null!=(x=t[0])?x:0);let i=(null!=(w=e[1])?w:0)+(null!=(S=t[1])?S:0);this.tableNoFrameWidth=z-(i>O?i-O:0)-((null!=(A=e[3])?A:0)+(null!=(k=t[3])?k:0))-this.contentOffsetX;let r=(null!=(R=e[2])?R:0)+(null!=(E=t[2])?E:0);this.tableNoFrameHeight=W-(r>D?r-D:0)-((null!=(P=e[0])?P:0)+(null!=(B=t[0])?B:0))-this.contentOffsetY}}this._clearColRangeWidthsMap(),this._clearRowRangeHeightsMap()}shouldVScrollBarWidthShow(e,t,i){if(i.hoverOn||"none"===i.visible)return!1;let r=this.getAllRowsHeight(),n=i.visible?T.vP(i):0;if(r>t-n&&r<=t){let t=this.getAllColsWidth(),r=i.visible?T.Iv(i):0;if(t>e-r&&t<=e)return!1;if(t>e)return!0;if(t<=e-r)return!1}return!(r<=t-n)}shouldHScrollBarWidthShow(e,t,i){if(i.hoverOn||"none"===i.visible)return!1;let r=this.getAllColsWidth(),n=i.visible?T.Iv(i):0;if(r>e-n&&r<=e){let e=this.getAllRowsHeight(),r=i.visible?T.vP(i):0;if(e>t-r&&e<=t)return!1;if(e>t)return!0;if(e<=t-r)return!1}return!(r<=e-n)}updateViewBox(e){var t,i,r,n,l,o,a,s,h,d,u,c;let p=(null!=(r=null==(i=null==(t=this.options)?void 0:t.viewBox)?void 0:i.x2)?r:0)-(null!=(o=null==(l=null==(n=this.options)?void 0:n.viewBox)?void 0:l.x1)?o:0),g=(null!=(h=null==(s=null==(a=this.options)?void 0:a.viewBox)?void 0:s.y2)?h:0)-(null!=(c=null==(u=null==(d=this.options)?void 0:d.viewBox)?void 0:u.y1)?c:0),f=e.x2-e.x1,m=e.y2-e.y1;this.options.viewBox=e,p!==f||g!==m?this.resize():this.scenegraph.stage.setViewBox(this.options.viewBox,!0)}setViewBoxTransform(e,t,i,r,n,l){this.internalProps.modifiedViewBoxTransform=!0,this.scenegraph.stage.window.setViewBoxTransform(e,t,i,r,n,l)}get rowHierarchyType(){return this.dataSource.rowHierarchyType}getColsWidth(e,t){var i;if(e>t)return 0;e=Math.max(e,0),t=Math.min(t,(null!=(i=this.colCount)?i:1/0)-1);let r=this._colRangeWidthsMap.get(`$${e}$${t}`);if(null!=r)return r;let n=this._colRangeWidthsMap.get(`$${e}$${t-1}`);if(null!=n){let i=n+this.getColWidth(t);return this.rightFrozenColCount>0&&t===this.colCount-this.rightFrozenColCount&&(i=this._getRangeSizeForContainerFit(e,t,i,"col")),e>=0&&t>=0&&!Number.isNaN(i)&&this._colRangeWidthsMap.set(`$${e}$${t}`,Math.round(i)),Math.round(i)}let l=0;for(let i=e;i<=t;i++)l+=this.getColWidth(i);return l=this._getRangeSizeForContainerFit(e,t,l,"col"),e>=0&&t>=0&&this._colRangeWidthsMap.set(`$${e}$${t}`,Math.round(l)),Math.round(l)}getRowHeight(e){var t;if((0,b.Z)(this.rowHeightsMap.get(e))){if(null==(t=this.options.customConfig)?void 0:t._disableColumnAndRowSizeRound){let t,i=this.rowHeightsMap.get(e);return Number.isInteger(Number((e<this.frozenRowCount?this.rowHeightsMap.getSumInRange(0,e):e>=this.rowCount-this.bottomFrozenRowCount?this.rowHeightsMap.getSumInRange(e,this.rowCount-1):this.rowHeightsMap.getSumInRange(this.frozenRowCount,e)).toFixed(2)))?Math.ceil(i):Math.floor(i)}return this.rowHeightsMap.get(e)}let i=this.getDefaultRowHeight(e);return(0,eM.Z)(i)?i:this.defaultRowHeight}getDefaultColumnWidth(e){var t,i;return this.isRowHeader(e,0)||this.isCornerHeader(e,0)?Array.isArray(this.defaultHeaderColWidth)?null!=(t=this.defaultHeaderColWidth[e])?t:this.defaultColWidth:this.defaultHeaderColWidth:this.isRightFrozenColumn(e,this.columnHeaderLevelCount)&&this.isPivotTable()?Array.isArray(this.defaultHeaderColWidth)?null!=(i=this.defaultHeaderColWidth[this.rowHeaderLevelCount-this.rightFrozenColCount])?i:this.defaultColWidth:this.defaultHeaderColWidth:this.defaultColWidth}getDefaultRowHeight(e){var t,i;return this.isColumnHeader(0,e)||this.isCornerHeader(0,e)||this.isSeriesNumberInHeader(0,e)?Array.isArray(this.defaultHeaderRowHeight)?null!=(t=this.defaultHeaderRowHeight[e])?t:this.internalProps.defaultRowHeight:this.defaultHeaderRowHeight:this.isBottomFrozenRow(e)?Array.isArray(this.defaultHeaderRowHeight)?null!=(i=this.defaultHeaderRowHeight[this.columnHeaderLevelCount>0?this.columnHeaderLevelCount-this.bottomFrozenRowCount:0])?i:this.internalProps.defaultRowHeight:this.defaultHeaderRowHeight:this.internalProps.defaultRowHeight}_setRowHeight(e,t,i){var r;this.rowHeightsMap.put(e,(null==(r=this.options.customConfig)?void 0:r._disableColumnAndRowSizeRound)?t:Math.round(t)),i&&this._clearRowRangeHeightsMap(e)}setRowHeight(e,t){this.scenegraph.setRowHeight(e,t),this.scenegraph.updateChartSizeForResizeRowHeight(e),this.internalProps._heightResizedRowMap.add(e)}getRowsHeight(e,t){var i,r,n;if(e>t||0===this.rowCount)return 0;e=Math.max(e,0),t=Math.min(t,(null!=(i=this.rowCount)?i:1/0)-1);let l=0,o="auto"===this.options.defaultRowHeight;if("standard"!==this.heightMode||this.options.customComputeRowHeight||this.autoFillHeight||!this.internalProps.layoutMap||this.hasAutoImageColumn()||o||0!==this.internalProps._heightResizedRowMap.size){if(null==(r=this.options.customConfig)?void 0:r._disableColumnAndRowSizeRound){let i,r=this.rowHeightsMap.getSumInRange(e,t);return Number.isInteger(Number((t<this.frozenRowCount?this.rowHeightsMap.getSumInRange(0,t):t>=this.rowCount-this.bottomFrozenRowCount?this.rowHeightsMap.getSumInRange(t,this.rowCount-1):this.rowHeightsMap.getSumInRange(this.frozenRowCount,t)).toFixed(2)))?Math.ceil(r):Math.floor(r)}l=this.rowHeightsMap.getSumInRange(e,t)}else{let i=this.rowCount-this.bottomFrozenRowCount;for(let i=e;i<Math.min(t+1,this.columnHeaderLevelCount);i++)l+=this.getRowHeight(i);t>=this.columnHeaderLevelCount&&(l+=this.defaultRowHeight*(Math.min(t,i-1)-Math.max(this.columnHeaderLevelCount,e)+1));let r=0;for(let e=i;e<t+1;e++)r+=this.getRowHeight(e);l=this._getRangeSizeForContainerFit(e,t,l+r,"row")}return(null==(n=this.options.customConfig)?void 0:n._disableColumnAndRowSizeRound)?l:Math.round(l)}_getRangeSizeForContainerFit(e,t,i,r="col"){var n;if(!isFinite(e)||!isFinite(t))return i;let l="col"===r?{totalCount:"colCount",frozenCount:"rightFrozenColCount",fitType:"width",tableSize:"tableNoFrameWidth",getSize:"getColWidth"}:{totalCount:"rowCount",frozenCount:"bottomFrozenRowCount",fitType:"height",tableSize:"tableNoFrameHeight",getSize:"getRowHeight"},o=this[l.tableSize];if(i>=o)return i;let a=this[l.totalCount]-this[l.frozenCount];if(!isFinite(this[l.totalCount])||this[l.frozenCount]<=0||a<0||e>a||t<a||e===t||!(null==(n=this.containerFit)?void 0:n[l.fitType]))return i;let s=this[l.totalCount]-1,h=o;if(e>0){for(let t=0;t<e;t++)if((h-=this[l.getSize](t))<=0)return i}if(t!==s){for(let e=t+1;e<=s;e++)if((h-=this[l.getSize](e))<=0)return i}return h}getColWidthDefined(e){var t;let{layoutMap:i}=this.internalProps;if("autoWidth"===this.widthMode)return"auto";let{width:r}=null!=(t=null==i?void 0:i.getColumnWidthDefined(e))?t:{};return"number"==typeof r&&r<=0?0:r||this.getDefaultColumnWidth(e)}getColWidthDefinedNumber(e){let t=this.getColWidthDefined(e);return this._adjustColWidth(e,this._colWidthDefineToPxWidth(t))}isAutoRowHeight(e){return"autoHeight"===this.heightMode||!!this.options.customComputeRowHeight||!!this.internalProps.rowHeightConfig||(e>=0&&e<this.columnHeaderLevelCount?"auto"===this.getDefaultRowHeight(e):"auto"===this.internalProps.defaultRowHeight)}getColWidth(e){var t;let i=null!=(t=this.colWidthsMap.get(e))?t:this.getDefaultColumnWidth(e);return"adaptive"===this.widthMode&&"number"==typeof i||this.transpose&&"number"==typeof i?this._colWidthDefineToPxWidth(i):this._adjustColWidth(e,this._colWidthDefineToPxWidth(i))}_setColWidth(e,t,i,r){this.colWidthsMap.put(e,"number"==typeof t?Math.round(t):t),i&&this._clearColRangeWidthsMap(e),r||this.stateManager.checkFrozen()}setColWidth(e,t){this.scenegraph.setColWidth(e,t),this.scenegraph.updateChartSizeForResizeColWidth(e),this.internalProps._widthResizedColMap.add(e)}_clearColRangeWidthsMap(e){if("number"!=typeof e)this._colRangeWidthsMap.clear();else for(let t of this._colRangeWidthsMap.keys()){let i=n_.exec(t);if(i){let r=Number(i[1]),n=Number(i[2]);e>=r&&e<=n&&this._colRangeWidthsMap.delete(t)}}}_clearRowRangeHeightsMap(e){this.rowHeightsMap.clearRange()}_getColContentWidth(e){return Number(this.colContentWidthsMap.get(e))}_setColContentWidth(e,t){this.colContentWidthsMap.put(e,t)}getAllRowsHeight(){var e;return(null==(e=this.internalProps)?void 0:e.rowCount)&&!(this.internalProps.rowCount<=0)?this.getRowsHeight(0,this.internalProps.rowCount-1):0}getAllColsWidth(){var e;return(null==(e=this.internalProps)?void 0:e.colCount)&&!(this.internalProps.colCount<=0)?this.getColsWidth(0,this.internalProps.colCount-1):0}getColsWidths(){let e=this.colCount,t=[];for(let i=0;i<e;i++)t.push(this.getColWidth(i));return t}getMaxColWidth(e){var t;let i=this.colWidthsLimit[e],r=null!=(t=i&&i.max)?t:1/0;return"string"==typeof r&&(r=(0,ex.qf)(this,r)),r}setMaxColWidth(e,t){(this.colWidthsLimit[e]||(this.colWidthsLimit[e]={})).max=t}getMinColWidth(e){var t;let i=this.colWidthsLimit[e],r=null!=(t=i&&i.min)?t:0;return"string"==typeof r&&(r=(0,ex.qf)(this,r)),r}setMinColWidth(e,t){(this.colWidthsLimit[e]||(this.colWidthsLimit[e]={})).min=t}getCellRect(e,t){var i,r;let n,l,o=this.isFrozenCell(e,t),a=this.getColWidth(e);n=o&&o.col&&this.isRightFrozenColumn(e,t)?this.getAllColsWidth()<=this.tableNoFrameWidth?this.getColsWidth(0,e-1)||0:this.tableNoFrameWidth-(null!=(i=this.getColsWidth(e,this.colCount-1))?i:0):this.getColsWidth(0,e-1)||0;let s=this.getRowHeight(t);return l=o&&o.row&&this.isBottomFrozenRow(e,t)?this.getAllRowsHeight()<=this.tableNoFrameHeight?this.getRowsHeight(0,t-1):this.tableNoFrameHeight-(null!=(r=this.getRowsHeight(t,this.rowCount-1))?r:0):this.getRowsHeight(0,t-1),new F.U(Math.round(n),Math.round(l),Math.round(a),Math.round(s))}getMergeCellRect(e,t){let i=this.getCellRange(e,t),r=this.getColsWidth(0,i.start.col-1)||0,n=this.getColsWidth(i.start.col,i.end.col),l=this.getRowsHeight(0,i.start.row-1)||0,o=this.getRowsHeight(i.start.row,i.end.row);return new F.U(Math.round(r),Math.round(l),Math.round(n),Math.round(o))}getCellRelativeRect(e,t){let i=this.isFrozenCell(e,t),r=!0,n=!0;(null==i?void 0:i.col)&&(null==i?void 0:i.row)?(r=!1,n=!1):(null==i?void 0:i.col)?r=!1:(null==i?void 0:i.row)&&(n=!1);let l=this.getCellRect(e,t);return this._toRelativeRect(l,r,n)}getCellRangeRelativeRect(e){if(e.start){let t=this.isFrozenCell(e.start.col,e.start.row),i=!0,r=!0;return(null==t?void 0:t.col)&&(null==t?void 0:t.row)?(i=!1,r=!1):(null==t?void 0:t.col)?i=!1:(null==t?void 0:t.row)&&(r=!1),this._toRelativeRect(this.getCellsRect(e.start.col,e.start.row,e.end.col,e.end.row),i,r)}let t=this.getCellRange(e.col,e.row),i=this.isFrozenCell(e.col,e.row),r=!0,n=!0;return(null==i?void 0:i.col)&&(null==i?void 0:i.row)?(r=!1,n=!1):(null==i?void 0:i.col)?r=!1:(null==i?void 0:i.row)&&(n=!1),this._toRelativeRect(this.getCellsRect(t.start.col,t.start.row,t.end.col,t.end.row),r,n)}getVisibleCellRangeRelativeRect(e){let t;return t=e.start?e:this.getCellRange(e.col,e.row),this._getVisiableRect(this.getCellRangeRelativeRect(e),t)}_getVisiableRect(e,t){let i=t.start.col>=this.frozenColCount?Math.max(e.left,this.frozenColCount>=1?this.getColsWidth(0,this.frozenColCount-1):0):e.left,r=Math.min(e.right,this.tableNoFrameWidth),n=e.copy();n.left=i,n.right=r;let l=t.start.row>=this.frozenRowCount?Math.max(e.top,this.frozenRowCount>=1?this.getRowsHeight(0,this.frozenRowCount-1):0):e.top,o=Math.min(e.bottom,this.tableNoFrameHeight);return n.top=l,n.bottom=o,n}getCellsRect(e,t,i,r){var n,l,o,a,s,h;let d=this.getColsWidth(0,e-1)||0,u=this.getColsWidth(e,i),c=this.scrollLeft,p=Math.min(this.tableNoFrameWidth,this.getAllColsWidth()),g=Math.min(this.tableNoFrameHeight,this.getAllRowsHeight());this.isLeftFrozenColumn(e)&&this.isRightFrozenColumn(i)?u=this.tableNoFrameWidth-(null!=(n=this.getColsWidth(e+1,this.colCount-1))?n:0)-d:this.isLeftFrozenColumn(e)&&!this.isLeftFrozenColumn(i)?u=Math.max(u-c,this.getColsWidth(e,this.frozenColCount-1)):!this.isRightFrozenColumn(e)&&this.isRightFrozenColumn(i)?(d=Math.min(d-c,p-this.getRightFrozenColsWidth()),u=p-(null!=(l=this.getColsWidth(e+1,this.colCount-1))?l:0)-d):this.isRightFrozenColumn(e)&&(d=p-(null!=(o=this.getColsWidth(e,this.colCount-1))?o:0));let f=this.getRowsHeight(0,t-1),m=this.getRowsHeight(t,r),b=this.scrollTop;return this.isTopFrozenRow(t)&&this.isBottomFrozenRow(r)?m=this.tableNoFrameHeight-(null!=(a=this.getRowsHeight(t+1,this.rowCount-1))?a:0)-f:this.isTopFrozenRow(t)&&!this.isTopFrozenRow(r)?m=Math.max(m-b,this.getRowsHeight(t,this.frozenRowCount-1)):!this.isBottomFrozenRow(t)&&this.isBottomFrozenRow(r)?(f=Math.min(f-b,g-this.getBottomFrozenRowsHeight()),m=g-(null!=(s=this.getRowsHeight(t+1,this.rowCount-1))?s:0)-f):this.isBottomFrozenRow(t)&&(f=g-(null!=(h=this.getRowsHeight(t,this.rowCount-1))?h:0)),new F.U(Math.round(d),Math.round(f),Math.round(u),Math.round(m))}getCellsRectWidth(e,t,i,r){let n=this.isFrozenCell(e,t),l=this.isFrozenCell(i,r),o=this.getColsWidth(e,i);if(n&&n.col){let t=this.scrollLeft;l&&l.col||(o-=t,o=Math.max(o,this.getColsWidth(e,this.frozenColCount-1)))}return o}getCellRangeRect(e){if(e.start)return this.getCellsRect(e.start.col,e.start.row,e.end.col,e.end.row);let t=this.getCellRange(e.col,e.row);return this.getCellsRect(t.start.col,t.start.row,t.end.col,t.end.row)}getCellRangeRectWidth(e){if(e.start)return this.getCellsRectWidth(e.start.col,e.start.row,e.end.col,e.end.row);let t=this.getCellRange(e.col,e.row);return this.getCellsRectWidth(t.start.col,t.start.row,t.end.col,t.end.row)}isFrozenCell(e,t){let i=this.isFrozenRow(t),r=this.isFrozenColumn(e);return i||r?{row:i,col:r}:null}getRowAt(e){return r7(e,this)}getColAt(e){return r9(e,this)}getCellAt(e,t){let{row:i,top:r,bottom:n,height:l}=r7(t,this),{col:o,left:a,right:s,width:h}=r9(e,this);return{row:i,col:o,rect:{left:a,right:s,top:r,bottom:n,width:h,height:l}}}getCellAtRelativePosition(e,t){return function(e,t,i){e-=i.tableX;let r=!1;(t-=i.tableY)>0&&t<i.getFrozenRowsHeight()&&(r=!0);let n=!1;e>0&&e<i.getFrozenColsWidth()&&(n=!0);let l=!1;t>i.tableNoFrameHeight-i.getBottomFrozenRowsHeight()&&t<i.tableNoFrameHeight&&t<=i.getAllRowsHeight()&&(l=!0);let o=!1;e>i.tableNoFrameWidth-i.getRightFrozenColsWidth()&&e<i.tableNoFrameWidth&&e<=i.getAllColsWidth()&&(o=!0);let a=ni((n||o?e:e+i.scrollLeft)+i.tableX,o,i),s=nr((r||l?t:t+i.scrollTop)+i.tableY,l,i);if(a&&s){let{row:e,top:t,bottom:i,height:r}=s,{col:n,left:l,right:o,width:h}=a;return{row:e,col:n,rect:{left:l,right:o,top:t,bottom:i,width:h,height:r}}}return{col:-1,row:-1}}(e,t,this)}getColAtRelativePosition(e){return function(e,t){let i=!1;(e-=t.tableX)>0&&e<t.getFrozenColsWidth()&&(i=!0);let r=!1;e>t.tableNoFrameWidth-t.getRightFrozenColsWidth()&&e<t.tableNoFrameWidth&&e<=t.getAllColsWidth()&&(r=!0);let n=ni((i||r?e:e+t.scrollLeft)+t.tableX,r,t);if(n){let{col:e}=n;return e}return -1}(e,this)}getRowAtRelativePosition(e){return function(e,t){let i=!1;(e-=t.tableY)>0&&e<t.getFrozenRowsHeight()&&(i=!0);let r=!1;e>t.tableNoFrameHeight-t.getBottomFrozenRowsHeight()&&e<t.tableNoFrameHeight&&e<=t.getAllRowsHeight()&&(r=!0);let n=nr((i||r?e:e+t.scrollTop)+t.tableY,r,t);if(n){let{row:e}=n;return e}return -1}(e,this)}_checkRowCol(e,t){return e>=0&&e<this.colCount&&t>=0&&t<this.rowCount}_makeVisibleCell(e,t){if(this._checkRowCol(e,t)){let i=this.isFrozenCell(e,t);if(i&&i.col&&i.row)return;let r=this.getCellRect(e,t),n=(0,ex.VN)(this);!n.contains(r)&&(i&&i.col||this.getColsWidth(0,this.frozenColCount-1)+r.width>this.canvas.width||(r.left<n.left?this.scrollLeft-=n.left-r.left:n.right<r.right&&(this.scrollLeft-=n.right-r.right)),i&&i.row||this.getRowsHeight(0,this.frozenRowCount-1)+r.height>this.canvas.height||(r.top<n.top?this.scrollTop-=n.top-r.top:n.bottom<r.bottom&&(this.scrollTop-=n.bottom-r.bottom)))}}render(){this.scenegraph.renderSceneGraph()}renderAsync(){return this.scenegraph.updateNextFrame(),new Promise((e,t)=>{setTimeout(()=>{e()},0)})}_toRelativeRect(e,t=!0,i=!0){var r,n,l,o;let a=e.copy(),s=this.getVisibleRect();return a.offsetLeft(this.tableX-(t?s.left:0)),a.offsetTop(this.tableY-(i?s.top:0)),a.offsetLeft(null!=(n=null==(r=this.options.viewBox)?void 0:r.x1)?n:0),a.offsetTop(null!=(o=null==(l=this.options.viewBox)?void 0:l.y1)?o:0),a}getVisibleRect(){let{scrollTop:e,scrollLeft:t}=this,i=this.tableNoFrameWidth,r=this.tableNoFrameHeight;return new F.U(t,e,i,r)}get visibleRowCount(){let{frozenRowCount:e}=this,t=this.getVisibleRect(),i=e>0?t.top+this.getRowsHeight(0,e-1):t.top,r=this.getTargetRowAt(i);if(!r)return 0;let n=Math.max(r.top>=i?r.row:r.row+1,e),l=this.getRowsHeight(0,n-1),o=0,{rowCount:a}=this;for(let e=n;e<a;e++){let i=l+this.getRowHeight(e);if(t.bottom<i)break;o++,l=i}return o}getBodyVisibleCellRange(){let{scrollTop:e,scrollLeft:t}=this,i=this.getFrozenRowsHeight(),r=this.getFrozenColsWidth(),n=this.getBottomFrozenRowsHeight(),l=this.getRightFrozenColsWidth(),{row:o}=this.getRowAt(e+i+1),{col:a}=this.getColAt(t+r+1),s=this.getAllRowsHeight()>this.tableNoFrameHeight?this.getRowAt(e+this.tableNoFrameHeight-1-n).row:this.rowCount-1,h=this.getAllColsWidth()>this.tableNoFrameWidth?this.getColAt(t+this.tableNoFrameWidth-1-l).col:this.colCount-1;return h<0||s<0?null:{rowStart:o,colStart:a,rowEnd:s,colEnd:h}}getBodyVisibleRowRange(e=0,t=0){let{scrollTop:i}=this,r=this.getFrozenRowsHeight(),n=this.getBottomFrozenRowsHeight(),{row:l}=this.getRowAt(i+r+1+e),o=this.getAllRowsHeight()>this.tableNoFrameHeight?this.getRowAt(i+this.tableNoFrameHeight-1-n+t).row:this.rowCount-1;return o<0?null:{rowStart:l,rowEnd:o}}getBodyVisibleColRange(e=0,t=0){let{scrollLeft:i}=this,r=this.getFrozenColsWidth(),n=this.getRightFrozenColsWidth(),{col:l}=this.getColAt(i+r+1+e),o=this.getAllColsWidth()>this.tableNoFrameWidth?this.getColAt(i+this.tableNoFrameWidth-1-n+t).col:this.colCount-1;return o<0?null:{colStart:l,colEnd:o}}get visibleColCount(){let{frozenColCount:e}=this,t=this.getVisibleRect(),i=e>0?t.left+this.getColsWidth(0,e-1):t.left,r=this.getTargetColAt(i);if(!r)return 0;let n=Math.max(r.left>=i?r.col:r.col+1,e),l=this.getColsWidth(0,n-1),o=0,{colCount:a}=this;for(let e=n;e<a;e++){let i=l+this.getColWidth(e);if(t.right<i)break;o++,l=i}return o}get scrollTop(){return this.stateManager.scroll.verticalBarPos}set scrollTop(e){this.stateManager.setScrollTop(e)}get scrollLeft(){return this.stateManager.scroll.horizontalBarPos}set scrollLeft(e){this.stateManager.setScrollLeft(e)}getScrollLeft(){return this.scrollLeft}getScrollTop(){return this.scrollTop}setScrollLeft(e){this.scrollLeft=Math.ceil(e)}setScrollTop(e){this.scrollTop=Math.ceil(e)}getCellOverflowText(e,t){return this.scenegraph.getCellOverflowText(e,t)}addReleaseObj(e){if(!e||!e.release||"function"!=typeof e.release)throw Error("not releaseObj!");(this.internalProps.releaseList=this.internalProps.releaseList||[]).push(e)}dispose(){this.release()}release(){var e,t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m;let b=this.internalProps;if(this.isReleased)return;null==(t=null==(e=b.tooltipHandler)?void 0:e.release)||t.call(e),null==(r=null==(i=b.menuHandler)?void 0:i.release)||r.call(i),null==(n=super.release)||n.call(this),this.pluginManager.release(),null==(o=null==(l=b.handler)?void 0:l.release)||o.call(l),this.eventManager.release(),null==(s=null==(a=b.focusControl)?void 0:a.release)||s.call(a),null==(h=b.legends)||h.forEach(e=>{null==e||e.release()}),null==(d=b.title)||d.release(),b.title=null,null==(u=b.emptyTip)||u.release(),b.emptyTip=null,b.layoutMap.release(),b.releaseList&&(b.releaseList.forEach(e=>{var t;return null==(t=null==e?void 0:e.release)?void 0:t.call(e)}),b.releaseList=null),this.scenegraph.stage.release(),this.scenegraph.proxy.release();let y=null==(c=b.element)?void 0:c.parentElement;y&&!this.options.canvas&&y.removeChild(b.element),null==(f=null==(g=null==(p=this.editorManager)?void 0:p.editingEditor)?void 0:g.onEnd)||f.call(g),this.isReleased=!0,this.scenegraph=null,this.internalProps=null,null==(m=this.reactCustomLayout)||m.clearCache(),(0,th.H6)()}fireListeners(e,t){return super.fireListeners(e,t)}updateOption(e,t={clearColWidthCache:!0,clearRowHeightCache:!0}){var i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,T;this.fireListeners(B.B.BEFORE_UPDATE_OPTION,{options:e,container:this.container}),null==(i=this.editorManager)||i.cancelEdit(),this.options=e,this._hasAutoImageColumn=void 0;let{frozenColCount:E=0,unfreezeAllOnExceedsMaxWidth:P,defaultRowHeight:I=40,defaultHeaderRowHeight:F,defaultColWidth:H=80,defaultHeaderColWidth:O=80,keyboardOptions:D,eventOptions:z,rowSeriesNumber:W,enableCheckboxCascade:Z,enableHeaderCheckboxCascade:N,columnResizeMode:$,rowResizeMode:j="none",resize:G,dragHeaderMode:V,dragOrder:U,showFrozenIcon:K,allowFrozenColCount:X,padding:Y,hover:q,menu:J,select:ee,pixelRatio:et,widthMode:ei,heightMode:er,autoFillWidth:en,autoFillHeight:el,containerFit:eo,widthAdaptiveMode:ea,heightAdaptiveMode:es,customRender:eh,renderChartAsync:ed,renderChartAsyncBatchCount:eu,canvasWidth:ec,canvasHeight:ep,contentOffsetX:eg=0,contentOffsetY:ef=0,overscrollBehavior:em,limitMinWidth:eb,limitMinHeight:ey}=e,{groupConfig:ev,groupBy:e_,groupTitleFieldFormat:ew,groupTitleCustomLayout:eS,enableTreeStickCell:eA}=e;et&&et!==this.internalProps.pixelRatio&&(this.internalProps.pixelRatio=et),Y&&("number"==typeof Y?(this.padding.top=Y,this.padding.left=Y,this.padding.bottom=Y,this.padding.right=Y):(Y.top&&(this.padding.top=Y.top),Y.bottom&&(this.padding.bottom=Y.bottom),Y.left&&(this.padding.left=Y.left),Y.right&&(this.padding.right=Y.right))),this.showFrozenIcon="boolean"!=typeof K||K,"number"==typeof X&&X<=0&&(this.showFrozenIcon=!1),this.widthMode=null!=ei?ei:"standard",this.heightMode=null!=er?er:"standard",this._widthAdaptiveMode=null!=ea?ea:"only-body",this._heightAdaptiveMode=null!=es?es:"only-body",this.autoFillWidth=null!=en&&en,this.autoFillHeight=null!=el&&el,void 0!==eo&&(this._containerFit="boolean"==typeof eo?{width:eo,height:eo}:eo&&"object"==typeof eo?{width:null==(r=eo.width)||r,height:null==(n=eo.height)||n}:{width:!1,height:!1}),this.customRender=eh,this.contentOffsetX=null!=eg?eg:0,this.contentOffsetY=null!=ef?ef:0,this.canvasWidth=(0,eM.Z)(ec)?ec:void 0,this.canvasHeight=(0,eM.Z)(ep)?ep:void 0;let ek=this.internalProps;if("node"===M.X.mode||e.canvas||(0,ex.gX)(ek.element,this.padding),this.columnWidthComputeMode=null!=(l=e.columnWidthComputeMode)?l:"normal",ek.frozenColCount=E,ek.unfreezeAllOnExceedsMaxWidth=null==P||P,ek.defaultRowHeight=I,ek.defaultHeaderRowHeight=null!=F?F:I,ek.defaultColWidth=H,ek.defaultHeaderColWidth=null!=O?O:H,ek.keyboardOptions=D,ek.eventOptions=z,ek.rowSeriesNumber=W,ek.enableCheckboxCascade=null==(o=null!=Z?Z:null==W?void 0:W.enableTreeCheckbox)||o,ek.enableHeaderCheckboxCascade=Z||null==N||N,ek.columnResizeMode=null!=(a=null==G?void 0:G.columnResizeMode)?a:$,ek.canResizeColumn=null==G?void 0:G.canResizeColumn,ek.rowResizeMode=null!=(s=null==G?void 0:G.rowResizeMode)?s:j,ek.dragHeaderMode=null!=(d=null!=(h=null==U?void 0:U.dragHeaderMode)?h:V)?d:"none",ek.renderChartAsync=ed,(0,th.Ry)(eu),ek.overscrollBehavior=null!=em?em:"auto",ek.cellTextOverflows={},ek.groupBy=null!=(u=null==ev?void 0:ev.groupBy)?u:e_,ek.groupTitleCheckbox=null==ev?void 0:ev.titleCheckbox,ek.groupTitleFieldFormat=null!=(c=null==ev?void 0:ev.titleFieldFormat)?c:ew,ek.groupTitleCustomLayout=null!=(p=null==ev?void 0:ev.titleCustomLayout)?p:eS,ek.enableTreeStickCell=null!=(g=null==ev?void 0:ev.enableTreeStickCell)?g:eA,(null==t?void 0:t.clearColWidthCache)&&(ek._widthResizedColMap.clear(),this.colWidthsMap=new L.B,this.colContentWidthsMap=new L.B,this.colWidthsLimit={}),(null==t?void 0:t.clearRowHeightCache)&&(ek._heightResizedRowMap.clear(),ek._rowHeightsMap=new r3(this),ek._rowRangeHeightsMap=new Map,ek._colRangeWidthsMap=new Map),ek.stick.changedCells.clear(),ek.theme=Q.of(null!=(f=e.theme)?f:Q.DEFAULT),ek.theme.isPivot=this.isPivotTable(),(0,eX.E6)(ek.theme.functionalIconsStyle),this.scenegraph.updateStageBackground(),ek.autoWrapText=e.autoWrapText,ek.enableLineBreak=e.enableLineBreak,ek.allowFrozenColCount=null!=(m=e.allowFrozenColCount)?m:0,ek.limitMaxAutoWidth=null!=(b=e.limitMaxAutoWidth)?b:450,ek.limitMinWidth=null!=eb?"number"==typeof eb?eb:10*!!eb:10,ek.limitMinHeight=null!=ey?"number"==typeof ey?ey:10*!!ey:10,null==(y=ek.legends)||y.forEach(e=>{null==e||e.release()}),null==(v=ek.title)||v.release(),ek.title=null,null==(_=ek.emptyTip)||_.release(),ek.emptyTip=null,ek.layoutMap.release(),(0,th.H6)(),this.scenegraph.clearCells(),this.scenegraph.updateComponent(),this.stateManager.updateOptionSetState(),this._updateSize(),this.eventManager.updateEventBinder(),e.legends){ek.legends=[];let t=eC.F.getFunction("createLegend");if(Array.isArray(e.legends)){for(let i=0;i<e.legends.length;i++)ek.legends.push(t(e.legends[i],this));this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})}else ek.legends.push(t(e.legends,this)),this.scenegraph.tableGroup.setAttributes({x:this.tableX,y:this.tableY})}ek.tooltip=Object.assign({parentElement:this.getElement(),renderMode:"html",isShowOverflowTextTooltip:!1,confine:!0,position:R.u.bottom},e.tooltip),"html"!==ek.tooltip.renderMode||ek.tooltipHandler||(ek.tooltipHandler=new(eC.F.getComponent("tooltipHandler"))(this,ek.tooltip.confine)),ek.menu=Object.assign({renderMode:"html"},e.menu),Array.isArray(null==(C=e.menu)?void 0:C.dropDownMenuHighlight)&&this.setDropDownMenuHighlight(null==(x=e.menu)?void 0:x.dropDownMenuHighlight),(Array.isArray(null==(w=e.menu)?void 0:w.defaultHeaderMenuItems)||"function"==typeof(null==(S=e.menu)?void 0:S.defaultHeaderMenuItems))&&(this.globalDropDownMenu=e.menu.defaultHeaderMenuItems),"html"!==ek.menu.renderMode||ek.menuHandler||(ek.menuHandler=new(eC.F.getComponent("menuHandler"))(this)),this.clearCellStyleCache(),(null==t?void 0:t.clearColWidthCache)&&this.clearColWidthCache(),(null==t?void 0:t.clearRowHeightCache)&&this.clearRowHeightCache(),ek.customMergeCell=(0,nm.k)(e.customMergeCell),null==(A=this.customCellStylePlugin)||A.updateCustomCell(null!=(k=e.customCellStyle)?k:[],null!=(T=e.customCellStyleArrangement)?T:[]),this._adjustCanvasSizeByOption()}renderWithRecreateCells(){this.internalProps.stick.changedCells.clear();let e={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(e.col,e.row),this.render()}getFrozenRowsHeight(){return this.getRowsHeight(0,this.frozenRowCount-1)}getFrozenColsWidth(){return this.getColsWidth(0,this.frozenColCount-1)}getBottomFrozenRowsHeight(){if(this.bottomFrozenRowCount>0){let e=0;for(let t=this.rowCount-this.bottomFrozenRowCount;t<=this.rowCount-1;t++)e+=this.getRowHeight(t);return e}return 0}getRightFrozenColsWidth(){if(this.rightFrozenColCount>0){let e=0;for(let t=this.colCount-this.rightFrozenColCount;t<=this.colCount-1;t++)e+=this.getColWidth(t);return e}return 0}getDrawRange(){var e,t;let i=(null==(e=this.containerFit)?void 0:e.width)?this.tableNoFrameWidth:Math.min(this.tableNoFrameWidth,this.getAllColsWidth()),r=(null==(t=this.containerFit)?void 0:t.height)?this.tableNoFrameHeight:Math.min(this.tableNoFrameHeight,this.getAllRowsHeight());return new F.U(this.tableX,this.tableY,i,r)}_getMouseAbstractPoint(e){var t,i,r,n,l,o,a,s;let h;if(!e)return{inTable:!1,x:void 0,y:void 0};let d=(h=nv(e)?e.changedTouches[0]:e).clientX||h.pageX+window.scrollX,u=h.clientY||h.pageY+window.scrollY,c=this.internalProps.canvas.getBoundingClientRect(),p=!0;c.right<=d&&(p=!1),c.bottom<=u&&(p=!1);let g=c.width,f=g/((90===this.rotateDegree?this.canvas.offsetHeight:this.canvas.offsetWidth)||g),m=c.height,b=m/((90===this.rotateDegree?this.canvas.offsetWidth:this.canvas.offsetHeight)||m),y=this.pluginManager.getPluginByName("Rotate Table");if(y&&90===this.rotateDegree){let e={x:d/f-(null!=(i=null==(t=this.options.viewBox)?void 0:t.x1)?i:0),y:u/b-(null!=(n=null==(r=this.options.viewBox)?void 0:r.y1)?n:0),inTable:p};return y.matrix.transformPoint(e,e),e}let v={x:(d-c.left)/f-(null!=(o=null==(l=this.options.viewBox)?void 0:l.x1)?o:0),y:(u-c.top)/b-(null!=(s=null==(a=this.options.viewBox)?void 0:a.y1)?s:0),inTable:p};return this.internalProps.modifiedViewBoxTransform&&this.scenegraph.stage.window.getViewBoxTransform()&&this.scenegraph.stage.window.getViewBoxTransform().transformPoint(v,v),v}getTheme(){return this.internalProps.theme}getTargetColAt(e){return ne(e,this)}getTargetRowAt(e){let t=nt(e,this);return t&&(t.row=Math.min(t.row,this.rowCount-1)),t}getTargetColAtConsiderRightFrozen(e,t){return ni(e,t,this)}getTargetRowAtConsiderBottomFrozen(e,t){return nr(e,t,this)}clearSelected(){this.stateManager.updateSelectPos(-1,-1)}selectCell(e,t,i,r,n,l=!1){var o,a,s;let h=!!(null==(o=this.stateManager.select.ranges)?void 0:o.length);this.stateManager.updateSelectPos(e,t,i,r,!1,null==(s=null!=n?n:null==(a=this.options.select)?void 0:a.makeSelectCellVisible)||s,l),this.stateManager.endSelectCells(!0,h)}selectCells(e){let{scrollLeft:t,scrollTop:i}=this;e.forEach((e,t)=>{var i,r,n,l,o,a;let s=e.start.row,h=e.start.col,d=e.end.row,u=e.end.col;h===u&&s===d?this.stateManager.updateSelectPos(h,s,!1,t>=1,!1,null==(r=null==(i=this.options.select)?void 0:i.makeSelectCellVisible)||r,!0):(this.stateManager.updateSelectPos(h,s,!1,t>=1,!1,null==(l=null==(n=this.options.select)?void 0:n.makeSelectCellVisible)||l,!0),this.stateManager.updateInteractionState(E.F.grabing),this.stateManager.updateSelectPos(u,d,!1,t>=1,!1,null==(a=null==(o=this.options.select)?void 0:o.makeSelectCellVisible)||a,!0)),this.stateManager.endSelectCells(!1,!1),this.stateManager.updateInteractionState(E.F.default)}),this.setScrollTop(i),this.setScrollLeft(t)}selectRow(e,t,i){let r=this.stateManager.select.ranges;if(t)r.push({start:{col:0,row:e},end:{col:this.colCount-1,row:e}}),this.selectCells(r);else if(i){let t=r[r.length-1];t&&(t.end.row=e),this.selectCells(r)}else this.selectCells([{start:{col:0,row:e},end:{col:this.colCount-1,row:e}}])}selectCol(e,t,i){let r=this.stateManager.select.ranges;if(t)r.push({start:{col:e,row:0},end:{col:e,row:this.rowCount-1}}),this.selectCells(r);else if(i){let t=r[r.length-1];t&&(t.end.col=e),this.selectCells(r)}else this.selectCells([{start:{col:e,row:0},end:{col:e,row:this.rowCount-1}}])}startDragSelectCol(e,t,i){var r,n,l,o,a,s;let h=this.stateManager.select.ranges[this.stateManager.select.ranges.length-1],d=i&&(null==(r=null==h?void 0:h.start)?void 0:r.col)?null==(n=null==h?void 0:h.start)?void 0:n.col:e,u=this.rowCount-1;this.stateManager.updateSelectPos(d,0,i,t,!1,null==(o=null==(l=this.options.select)?void 0:l.makeSelectCellVisible)||o,!0),this.stateManager.updateInteractionState(E.F.grabing),this.stateManager.updateSelectPos(e,u,i,t,!1,null==(s=null==(a=this.options.select)?void 0:a.makeSelectCellVisible)||s,!0),this.stateManager.select.selecting=!1}dragSelectCol(e,t){var i,r;let n=this.stateManager.select.ranges,l=n[n.length-1];l&&(l.end.col=e),this.stateManager.updateSelectPos(e,this.rowCount-1,!1,t,!1,null==(r=null==(i=this.options.select)?void 0:i.makeSelectCellVisible)||r,!0),this.stateManager.select.selecting=!1}endDragSelect(){this.stateManager.updateInteractionState(E.F.default)}startDragSelectRow(e,t,i){var r,n,l,o,a,s;let h=this.stateManager.select.ranges[this.stateManager.select.ranges.length-1],d=i&&(null==(r=null==h?void 0:h.start)?void 0:r.row)?null==(n=null==h?void 0:h.start)?void 0:n.row:e,u=this.colCount-1;this.stateManager.updateSelectPos(0,d,i,t,!1,null==(o=null==(l=this.options.select)?void 0:l.makeSelectCellVisible)||o,!0),this.stateManager.updateInteractionState(E.F.grabing),this.stateManager.updateSelectPos(u,e,i,t,!1,null==(s=null==(a=this.options.select)?void 0:a.makeSelectCellVisible)||s,!0),this.stateManager.select.selecting=!1}dragSelectRow(e,t){var i,r;let n=this.stateManager.select.ranges,l=n[n.length-1];l&&(l.end.row=e),this.stateManager.updateSelectPos(this.colCount-1,e,!1,t,!1,null==(r=null==(i=this.options.select)?void 0:i.makeSelectCellVisible)||r,!0),this.stateManager.select.selecting=!1}get recordsCount(){var e;return null==(e=this.records)?void 0:e.length}get allowFrozenColCount(){return this.internalProps.allowFrozenColCount}get rowHeaderLevelCount(){return this.internalProps.layoutMap.rowHeaderLevelCount}get columnHeaderLevelCount(){return this.internalProps.layoutMap.columnHeaderLevelCount}get records(){return this.internalProps.records}get dataSource(){return this.internalProps.dataSource}set dataSource(e){this.scenegraph.clearCells(),(0,ex.x6)(this,e),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.render()}get autoWrapText(){return this.internalProps.autoWrapText}set autoWrapText(e){this.internalProps.autoWrapText=e,this.options.autoWrapText=e}get enableLineBreak(){return this.internalProps.enableLineBreak}set enableLineBreak(e){this.internalProps.enableLineBreak=e,this.options.enableLineBreak=e}updateAutoWrapText(e){this.internalProps.autoWrapText!==e&&(this.internalProps.autoWrapText=e,this.options.autoWrapText=e,this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.render())}get theme(){return this.internalProps.theme}set theme(e){this.internalProps.theme=Q.of(null!=e?e:Q.DEFAULT),this.internalProps.theme.isPivot=this.isPivotTable(),this.options.theme=e,(0,eX.E6)(this.internalProps.theme.functionalIconsStyle)}updateTheme(e){let t={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.internalProps.theme=Q.of(null!=e?e:Q.DEFAULT),this.internalProps.theme.isPivot=this.isPivotTable(),(0,eX.E6)(this.internalProps.theme.functionalIconsStyle),this.options.theme=e,this.scenegraph.updateComponent(),this.scenegraph.updateStageBackground(),this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(t.col,t.row),this.render()}getBodyField(e,t){return this.internalProps.layoutMap.getBody(e,t).field}getBodyColumnDefine(e,t){let i=this.internalProps.layoutMap.getBody(e,t);return null==i?void 0:i.define}getBodyColumnType(e,t){var i,r;let n=null!=(r=null==(i=this.internalProps.layoutMap.getBody(e,t))?void 0:i.cellType)?r:"text";return(0,ek.WJ)("cellType",{cellType:n},e,t,this)}getCellType(e,t){let i;return this.isSeriesNumberInHeader(e,t)?this.internalProps.layoutMap.getSeriesNumberHeader(e,t).cellType:(i=this.isHeader(e,t)?this.internalProps.layoutMap.getHeader(e,t).headerType:this.internalProps.layoutMap.getBody(e,t).cellType,(0,ek.WJ)("cellType",{cellType:i},e,t,this))}getHeaderField(e,t){return this.internalProps.layoutMap.getHeaderField(e,t)}getHeaderDefine(e,t){let i=this.internalProps.layoutMap.getHeader(e,t);return null==i?void 0:i.define}getCellLocation(e,t){return this.internalProps.layoutMap.getCellLocation(e,t)}getCellHeaderPaths(e,t){return this.internalProps.layoutMap.getCellHeaderPaths(e,t)}getHeadersDefine(e,t){let i=[];for(;;){let r=this.getHeaderDefine(e,t);if(!r||!r.field&&!r.columns)break;i.push(r),t++}return i}_getHeaderLayoutMap(e,t){return this.internalProps.layoutMap.getHeader(e,t)}_getBodyLayoutMap(e,t){return this.internalProps.layoutMap.getBody(e,t)}getContext(){return this.internalProps.context}getRecordByCell(e,t){if(!this.internalProps.layoutMap.isHeader(e,t))return this.getCellOriginRecord(e,t)}getRecordByRowCol(e,t){return this.getRecordByCell(e,t)}getRecordStartRowByRecordIndex(e){return this.internalProps.layoutMap.getRecordStartRowByRecordIndex(e)}_getHeaderCellBySortState(e){let{layoutMap:t}=this.internalProps,i=t.headerObjects.find(t=>t&&t.field===e.field);if(i)return t.getHeaderCellAdressById(i.id)}getCellRange(e,t){var i;if(this.internalProps.customMergeCell){let i=this.internalProps.customMergeCell(e,t,this);if(i&&i.range&&((0,b.Z)(i.text)||i.customLayout||i.customRender))return{start:{col:Math.max(i.range.start.col,0),row:Math.max(i.range.start.row,0)},end:{col:Math.min(i.range.end.col,this.colCount-1),row:Math.min(i.range.end.row,this.rowCount-1)},isCustom:!0}}return null==(i=this.internalProps.layoutMap)?void 0:i.getCellRange(e,t)}hasCustomMerge(){return!!this.internalProps.customMergeCell}getCustomMerge(e,t){if(this.internalProps.customMergeCell){let i=this.internalProps.customMergeCell(e,t,this);if(i&&i.range&&((0,b.Z)(i.text)||i.customLayout||this.customRender)){if(i.style){let r=this.internalProps.bodyHelper.getStyleClass("text"),n=k(i.style,this.theme.bodyStyle,{col:e,row:t,table:this,value:i.text,dataValue:this.getCellOriginValue(e,t),cellHeaderPaths:this.getCellHeaderPaths(e,t)},r,this.options.autoWrapText,this.theme);i.style=n}return i.range={start:{col:Math.max(i.range.start.col,0),row:Math.max(i.range.start.row,0)},end:{col:Math.min(i.range.end.col,this.colCount-1),row:Math.min(i.range.end.row,this.rowCount-1)},isCustom:!0},i}}}isCellRangeEqual(e,t,i,r){return this.internalProps.layoutMap.isCellRangeEqual(e,t,i,r)}_getLayoutCellId(e,t){return this.internalProps.layoutMap.getCellId(e,t)}getHeaderDescription(e,t){var i;let r=this._getHeaderLayoutMap(e,t),n=null==r?void 0:r.define,l=null!=(i=null==n?void 0:n.description)?i:null==r?void 0:r.description;return"function"==typeof l?l({col:e,row:t,value:this.getCellValue(e,t),dataValue:this.getCellOriginValue(e,t)}):l}setDropDownMenuHighlight(e){this.stateManager.setDropDownMenuHighlight(e)}_dropDownMenuIsHighlight(e,t,i){return this.stateManager.dropDownMenuIsHighlight(e,t,i)}isSeriesNumberInBody(e,t){return this.internalProps.layoutMap&&this.internalProps.layoutMap.isSeriesNumberInBody(e,t)}isSeriesNumberInHeader(e,t){return this.internalProps.layoutMap&&this.internalProps.layoutMap.isSeriesNumberInHeader(e,t)}isHeader(e,t){return this.internalProps.layoutMap&&this.internalProps.layoutMap.isHeader(e,t)}isColumnHeader(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isColumnHeader(e,t)}isRowHeader(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isRowHeader(e,t)}isCornerHeader(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isCornerHeader(e,t)}isFrozenColumn(e,t){return this.isLeftFrozenColumn(e,t)||this.isRightFrozenColumn(e,t)}isLeftFrozenColumn(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isFrozenColumn(e,t)}isRightFrozenColumn(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isRightFrozenColumn(e,t)}isFrozenRow(e,t){return this.isTopFrozenRow(e,t)||this.isBottomFrozenRow(e,t)}isTopFrozenRow(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isFrozenRow(e,t)}isBottomFrozenRow(e,t){var i;return null==(i=this.internalProps.layoutMap)?void 0:i.isBottomFrozenRow(e,t)}getCellInfo(e,t){if(e>=0&&t>=0){let i=this.isHeader(e,t)?this.getHeaderDefine(e,t):this.getBodyColumnDefine(e,t);return{col:e,row:t,field:this.getHeaderField(e,t),cellHeaderPaths:this.internalProps.layoutMap.getCellHeaderPaths(e,t),title:null==i?void 0:i.title,cellType:this.getCellType(e,t),originData:this.getCellOriginRecord(e,t),cellRange:this.getCellRangeRelativeRect({col:e,row:t}),value:this.getCellValue(e,t),dataValue:this.getCellOriginValue(e,t),cellLocation:this.getCellLocation(e,t),scaleRatio:this.canvas.getBoundingClientRect().width/this.canvas.offsetWidth}}}_hasField(e,t,i){var r;if(null===e||this.internalProps.layoutMap.isHeader(t,i))return!1;let n=this.getRecordShowIndexByCell(t,i);return null==(r=this.internalProps.dataSource)?void 0:r.hasField(n,e)}_getCellStyle(e,t){return function(e,t,i){var r,n,l,o,a,s,h,d,u,c;let p,g,f,m=null==(r=i.customCellStylePlugin)?void 0:r.getCustomCellStyle(e,t),{layoutMap:b}=i.internalProps;if(b.isHeader(e,t)){let r,s;if(!i.isPivotTable()||i.isBottomFrozenRow(t)||i.isRightFrozenColumn(e))r=`${e}-${t}`;else{let n=i.getHeaderDefine(e,t),l=i.isCornerHeader(e,t);r=(null==n?void 0:n.dimensionKey)?l?`dim-cor-${n.dimensionKey}`:`dim-${n.dimensionKey}`:(null==n?void 0:n.indicatorKey)?`ind-${n.indicatorKey}`:`${e}-${t}`}let h=i.headerStyleCache.get(r);if(h)return m?(0,no.wh)(h,m):h;let d=b.getHeader(e,t);if(i.isPivotChart()&&(0,nn.Vp)(e,t,b)&&b.isAxisCell(e,t)?s=null!=(l=null==(n=b.getBody(e,i.rowHeaderLevelCount).style)?void 0:n.padding)?l:i.theme.bodyStyle.padding:i.isPivotChart()&&(0,nn.iN)(e,t,b)&&b.isAxisCell(e,t)&&(s=null!=(a=null==(o=b.getBody(i.columnHeaderLevelCount,t).style)?void 0:o.padding)?a:i.theme.bodyStyle.padding),(!d||d.isEmpty)&&(b.isLeftBottomCorner(e,t)||b.isRightBottomCorner(e,t)||b.isCornerHeader(e,t)||b.isRightTopCorner(e,t)))return na;let u=i.internalProps.headerHelper.getStyleClass((null==d?void 0:d.headerType)||"text");if(b.isBottomFrozenRow(e,t)&&i.theme.bottomFrozenStyle)h=nl(s?{padding:s}:{},i.theme.bottomFrozenStyle,{col:e,row:t,table:i,value:i.getCellValue(e,t),dataValue:i.getCellOriginValue(e,t),cellHeaderPaths:i.getCellHeaderPaths(e,t)},u,i.options.autoWrapText,i.theme);else if(b.isRightFrozenColumn(e,t)&&i.theme.rightFrozenStyle)h=nl(s?{padding:s}:{},i.theme.rightFrozenStyle,{col:e,row:t,table:i,value:i.getCellValue(e,t),dataValue:i.getCellOriginValue(e,t),cellHeaderPaths:i.getCellHeaderPaths(e,t)},u,i.options.autoWrapText,i.theme);else{let r=(null==d?void 0:d.style)||{};s&&(r.padding=s),h=nl(r,b.isColumnHeader(e,t)||b.isBottomFrozenRow(e,t)?i.theme.headerStyle:b.isRowHeader(e,t)||b.isRightFrozenColumn(e,t)?i.theme.rowHeaderStyle:i.theme.cornerHeaderStyle,{col:e,row:t,table:i,value:i.getCellValue(e,t),dataValue:i.getCellOriginValue(e,t),cellHeaderPaths:i.getCellHeaderPaths(e,t)},u,i.options.autoWrapText,i.theme)}return i.headerStyleCache.set(r,h),m?(0,no.wh)(h,m):h}(null==(h=null==(s=i.internalProps)?void 0:s.dataConfig)?void 0:h.mappingRules)&&!i.isHeader(e,t)&&(null==(c=null==(u=null==(d=i.internalProps)?void 0:d.dataConfig)?void 0:u.mappingRules)||c.forEach((r,n)=>{r.bgColor&&i.internalProps.layoutMap.getIndicatorKey(e,t)===r.bgColor.indicatorKey&&(p=r.bgColor.mapping)}));let y=i.getCellType(e,t),v=i.getCellOriginRecord(e,t);if(g=(null==v?void 0:v.vtableMerge)?"merge-title":i.isSeriesNumberInBody(e,t)?`${e}-series-`+y:i.isListTable()&&!i.transpose||i.isPivotTable()&&i.internalProps.layoutMap.indicatorsAsCol?e+y:t+y,f=(null==v?void 0:v.vtableMerge)?i.bodyMergeTitleCache.get(g):b.isBottomFrozenRow(t)?i.bodyBottomStyleCache.get(g):i.bodyStyleCache.get(g))return m?(0,no.wh)(f,m):f;let _=b.getBody(e,t),C=i.internalProps.bodyHelper.getStyleClass(i.getCellType(e,t)),x=null==_?void 0:_.style;return f=k(x,(null==v?void 0:v.vtableMerge)&&i.theme.groupTitleStyle?i.theme.groupTitleStyle:b.isBottomFrozenRow(t)&&i.theme.bottomFrozenStyle?i.theme.bottomFrozenStyle:b.isRightFrozenColumn(e)&&i.theme.rightFrozenStyle?i.theme.rightFrozenStyle:i.theme.bodyStyle,{col:e,row:t,table:i,value:i.getCellValue(e,t),dataValue:i.getCellOriginValue(e,t),cellHeaderPaths:i.getCellHeaderPaths(e,t)},C,i.options.autoWrapText,i.theme),p&&(f=(0,no.wh)(f,{bgColor:p})),(0,ry.Z)(x)||(b.isBottomFrozenRow(t)?i.bodyBottomStyleCache.set(g,f):i.bodyStyleCache.set(g,f)),m?(0,no.wh)(f,m):f}(e,t,this)}clearCellStyleCache(){this.headerStyleCache.clear(),this.bodyStyleCache.clear(),this.bodyMergeTitleCache.clear(),this.bodyBottomStyleCache.clear()}clearRowHeightCache(){this.internalProps._rowHeightsMap.clear(),this._clearRowRangeHeightsMap()}clearColWidthCache(){this.internalProps._colWidthsMap.clear(),this._clearColRangeWidthsMap()}_canResizeColumn(e,t){if(!(e>=0&&t>=0)||this.isCellRangeEqual(e,t,e+1,t)||"none"===this.internalProps.columnResizeMode)return!1;if("header"===this.internalProps.columnResizeMode){if(!this.isHeader(e,t))return!1}else if("body"===this.internalProps.columnResizeMode&&this.isHeader(e,t))return!1;let i=this.colWidthsLimit[e];return!(i&&i.min&&i.max)||i.max!==i.min}_canResizeRow(e,t){if(!(e>=0&&t>=0)||this.isCellRangeEqual(e,t,e,t+1)||"none"===this.internalProps.rowResizeMode)return!1;if("header"===this.internalProps.rowResizeMode){if(!this.isHeader(e,t))return!1}else if("body"===this.internalProps.rowResizeMode&&this.isHeader(e,t))return!1;return!0}_canDragHeaderPosition(e,t){var i;if(this.isHeader(e,t)&&(this.stateManager.isSelected(e,t)||"body"===(null==(i=this.options.select)?void 0:i.headerSelectMode)&&function(e,t,i){for(let r=0;r<i.length;r++){let n=i[r];if((0,P._Z)(n,e,t))return!0}return!1}(e,t,[this.getCellRange(this.stateManager.select.cellPos.col,this.stateManager.select.cellPos.row)])||tC(this,e,t))){if("disabled"===this.internalProps.frozenColDragHeaderMode&&this.isFrozenColumn(e))return!1;if(this.stateManager.isSelected(e,t)){let i=this.stateManager.select.ranges[0];if(this.isColumnHeader(e,t)){if(i.end.row!==this.rowCount-1)return!1}else if(!this.isRowHeader(e,t)||i.end.col!==this.colCount-1)return!1}let i=this.getHeaderDefine(e,t);if(!i)return!1;if(void 0===i.dragHeader){if("all"===this.internalProps.dragHeaderMode)return!0;if("column"===this.internalProps.dragHeaderMode){if(this.isColumnHeader(e,t))return!0}else if("row"===this.internalProps.dragHeaderMode&&this.isRowHeader(e,t))return!0;return!1}return i.dragHeader}return!1}getCellIcons(e,t){var i,r,n;let l;if(this.isHeader(e,t))l=this.internalProps.headerHelper.getIcons(e,t);else if(this.internalProps.layoutMap.isSeriesNumber(e,t)){this.internalProps.groupBy&&(null==(i=this.getCellRawRecord(e,t))?void 0:i.vtableMerge)||null==(n=null==(r=this.internalProps.layoutMap.getSeriesNumberBody(e,t))?void 0:r.define)||!n.dragOrder||(l=this.internalProps.rowSeriesNumberHelper.getIcons(e,t));let o=this.getCellValue(e,t),a=this.getCellOriginValue(e,t),s=this.internalProps.context,h=this.internalProps.bodyHelper.getIcons(e,t,o,a,s);(null==l?void 0:l.length)>0?l=l.concat(h):(null==h?void 0:h.length)>0&&(l=h)}else{let i=this.getCellValue(e,t),r=this.getCellOriginValue(e,t),n=this.internalProps.context;l=this.internalProps.bodyHelper.getIcons(e,t,i,r,n)}return l}showDropDownMenu(e,t,i){let r="dropdown-menu";i&&(r=Array.isArray(i.content)?"dropdown-menu":"container"),"html"===this.internalProps.menu.renderMode&&(this.stateManager.menu.isShow=!0,this.internalProps.menuHandler._bindToCell(e,t,r,i))}showTooltip(e,t,i){"html"===this.internalProps.tooltip.renderMode&&this.internalProps.tooltipHandler._bindToCell(e,t,i)}getCellStyle(e,t){let i=this._getCellStyle(e,t),r=(0,ex.RT)(i,this,e,t,ek.WJ).theme,{autoWrapText:n,lineClamp:l,textOverflow:o}=i;return{textAlign:r.text.textAlign,textBaseline:r.text.textBaseline,bgColor:(0,r0.Z)(r.group.fill)?(0,ek.WJ)("bgColor",i,e,t,this):r.group.fill,color:(0,r0.Z)(r.text.fill)?(0,ek.WJ)("color",i,e,t,this):r.text.fill,strokeColor:(0,r0.Z)(r.text.stroke)?(0,ek.WJ)("strokeColor",i,e,t,this):r.text.stroke,fontFamily:r.text.fontFamily,fontSize:r.text.fontSize,fontWeight:r.text.fontWeight,fontVariant:r.text.fontVariant,fontStyle:r.text.fontStyle,lineHeight:r.text.lineHeight,autoWrapText:null!=n&&n,lineClamp:null!=l?l:"auto",textOverflow:o,borderColor:(0,r0.Z)(r.group.stroke)?(0,ek.WJ)("borderColor",i,e,t,this):r.group.stroke,borderLineWidth:r.group.lineWidth,borderLineDash:r.group.lineDash,underline:!!r.text.underline,underlineDash:r.text.underlineDash,underlineOffset:r.text.underlineOffset,lineThrough:!!r.text.lineThrough,padding:r._vtable.padding,underlineWidth:r.text.underline,lineThroughLineWidth:r.text.lineThrough,_strokeArrayWidth:r.group.strokeArrayWidth,_strokeArrayColor:r.group.strokeArrayColor,_linkColor:(0,ek.WJ)("linkColor",i,e,t,this)}}getAllBodyCells(e,t){let i=this.rowHeaderLevelCount,r=this.columnHeaderLevelCount,n=this.colCount-1;return Array(Math.min(null!=t?t:2e3,this.rowCount-1-r+1,this.rowCount)).fill(0).map((t,l)=>Array(Math.min(null!=e?e:2e3,n-i+1,this.colCount)).fill(0).map((e,t)=>this.getCellInfo(t+i,l+r)))}getAllCells(e,t){let i=this.colCount-1;return Array(Math.min(null!=t?t:2e3,this.rowCount-1-0+1,this.rowCount)).fill(0).map((t,r)=>Array(Math.min(null!=e?e:2e3,i-0+1,this.colCount)).fill(0).map((e,t)=>this.getCellInfo(t+0,r+0)))}getAllColumnHeaderCells(){let e=this.rowHeaderLevelCount,t=this.colCount-1;return Array(this.columnHeaderLevelCount-1-0+1).fill(0).map((i,r)=>Array(t-e+1).fill(0).map((t,i)=>this.getCellInfo(i+e,r+0)))}getAllRowHeaderCells(){let e=this.columnHeaderLevelCount,t=this.rowHeaderLevelCount-1;return Array(this.rowCount-1-e+1).fill(0).map((i,r)=>Array(t-0+1).fill(0).map((t,i)=>this.getCellInfo(i+0,r+e)))}getCopyValue(e){var t,i,r;if((null==(i=null==(t=this.stateManager.select)?void 0:t.ranges)?void 0:i.length)>0){let t=this.stateManager.select.ranges,i=Math.min(t[0].start.col,t[0].end.col),n=Math.max(t[0].start.col,t[0].end.col),l=Math.min(t[0].start.row,t[0].end.row),o=Math.max(t[0].start.row,t[0].end.row);t.forEach(e=>{i=Math.min(i,e.start.col,e.end.col),n=Math.max(n,e.start.col,e.end.col),l=Math.min(l,e.start.row,e.end.row),o=Math.max(o,e.start.row,e.end.row)});let a=e=>{let i=!1;return t.forEach(t=>{let r=Math.min(t.start.row,t.end.row),n=Math.max(t.start.row,t.end.row);r<=e&&n>=e&&(i=!0)}),i},s=e=>{let i=!1;return t.forEach(t=>{let r=Math.min(t.start.col,t.end.col),n=Math.max(t.start.col,t.end.col);r<=e&&n>=e&&(i=!0)}),i},h=(e,i)=>{let r;return t.forEach(t=>{let n=Math.min(t.start.row,t.end.row),l=Math.max(t.start.row,t.end.row),o=Math.min(t.start.col,t.end.col),a=Math.max(t.start.col,t.end.col);o<=e&&a>=e&&n<=i&&l>=i&&(r=t)}),r},d=(t,i,r)=>{let n=this.getCellRange(t,i),l=n.start.col,o=n.start.row;if(r){let e=Math.min(r.start.col,r.end.col),t=Math.min(r.start.row,r.end.row);l=Math.max(e,n.start.col),o=Math.max(t,n.start.row)}return l!==t||o!==i?"":e?e(t,i):this.getCellValue(t,i)},u="";for(let e=l;e<=o;e++)if(a(e)){for(let t=i;t<=n;t++)if(s(t)){let i=h(t,e);if(i){let r=d(t,e,i);if("undefined"!=typeof Promise&&r instanceof Promise);else{let e=(0,b.Z)(r)?`${r}`:"";/^\[object .*\]$/.exec(e)||(u+=e)}(t<i.end.col||t<n)&&(u+="	")}else u+="	"}e<o&&(u+="\r\n")}return(null==(r=this.options)?void 0:r.formatCopyValue)&&(u=this.options.formatCopyValue(u)),u}return""}getSelectedCellInfos(){var e;if(!(null==(e=this.stateManager.select)?void 0:e.ranges))return null;let t=this.stateManager.select.ranges;if(!t.length)return[];let i=Math.min(t[0].start.col,t[0].end.col),r=Math.max(t[0].start.col,t[0].end.col),n=Math.min(t[0].start.row,t[0].end.row),l=Math.max(t[0].start.row,t[0].end.row);t.forEach(e=>{i=Math.min(i,e.start.col,e.end.col),r=Math.max(r,e.start.col,e.end.col),n=Math.min(n,e.start.row,e.end.row),l=Math.max(l,e.start.row,e.end.row)});let o=e=>{let i=!1;return t.forEach(t=>{let r=Math.min(t.start.row,t.end.row),n=Math.max(t.start.row,t.end.row);r<=e&&n>=e&&(i=!0)}),i},a=e=>{let i=!1;return t.forEach(t=>{let r=Math.min(t.start.col,t.end.col),n=Math.max(t.start.col,t.end.col);r<=e&&n>=e&&(i=!0)}),i},s=(e,i)=>{let r;return t.forEach(t=>{let n=Math.min(t.start.row,t.end.row),l=Math.max(t.start.row,t.end.row),o=Math.min(t.start.col,t.end.col),a=Math.max(t.start.col,t.end.col);o<=e&&a>=e&&n<=i&&l>=i&&(r=t)}),r},h=[];for(let e=n;e<=l;e++)if(o(e)){let t=[];for(let n=i;n<=r;n++)if(a(n)&&s(n,e)){let i=this.getCellInfo(n,e);t.push(i)}h.push(t)}return h}getSelectedCellRanges(){let e=this.stateManager.select.ranges;return e.length?(0,r1.Z)(e):[]}measureText(e,t){return tK.QC.measureText(e,t)}measureTextBounds(e){return(0,tK.Rc)(e)}getCustomRender(e,t){let i;if("body"!==this.getCellLocation(e,t)){let r=this.getHeaderDefine(e,t);i=null==r?void 0:r.headerCustomRender}else{let r=this.getBodyColumnDefine(e,t);i=(null==r?void 0:r.customRender)||this.customRender}return i}getCustomLayout(e,t){let i;if("body"!==this.getCellLocation(e,t)){let r=this.getHeaderDefine(e,t);i=null==r?void 0:r.headerCustomLayout}else{let r=this.getBodyColumnDefine(e,t);i=null==r?void 0:r.customLayout}return i}hasAutoImageColumn(){return void 0===this._hasAutoImageColumn&&(this._hasAutoImageColumn=(0,r8.N3)(this)),this._hasAutoImageColumn}_getActiveChartInstance(){var e,t,i,r,n,l;let o=this.scenegraph.getCell(null==(t=null==(e=this.stateManager.hover)?void 0:e.cellPos)?void 0:t.col,null==(r=null==(i=this.stateManager.hover)?void 0:i.cellPos)?void 0:r.row);return"chart"===(null==(l=null==(n=null==o?void 0:o.getChildren())?void 0:n[0])?void 0:l.type)?o.getChildren()[0].activeChartInstance:null}cellIsInVisualView(e,t){var i,r,n,l;let o,a,s,h,d=this.getDrawRange(),u=this.getCellRelativeRect(e,t);return!!(e<this.frozenColCount&&t<this.frozenRowCount||(this.frozenRowCount>=1&&(o=this.getCellRangeRelativeRect({start:{col:0,row:0},end:{col:this.colCount-1,row:this.frozenRowCount-1}})),this.frozenColCount>=1&&(a=this.getCellRangeRelativeRect({start:{col:0,row:0},end:{col:this.frozenColCount-1,row:this.rowCount-1}})),this.bottomFrozenRowCount>=1&&(s=this.getCellRangeRelativeRect({start:{col:0,row:this.rowCount-this.bottomFrozenRowCount},end:{col:this.colCount-1,row:this.rowCount-1}})),this.rightFrozenColCount>=1&&(h=this.getCellRangeRelativeRect({start:{col:this.colCount-this.rightFrozenColCount,row:0},end:{col:this.colCount-1,row:this.rowCount-1}})),u.top>=d.top&&u.bottom<=d.bottom&&u.left>=d.left&&u.right<=d.right&&(this.isFrozenCell(e,t)||u.top>=(null!=(i=null==o?void 0:o.bottom)?i:u.top)&&u.left>=(null!=(r=null==a?void 0:a.right)?r:u.left)&&u.bottom<=(null!=(n=null==s?void 0:s.top)?n:u.bottom)&&u.right<=(null!=(l=null==h?void 0:h.left)?l:u.right))))||!1}getCustomMergeValue(e,t){if(this.internalProps.customMergeCell){let i=this.getCustomMerge(e,t);if(i){let{text:e}=i;return e}}}exportImg(){return this.scenegraph.stage.toCanvas().toDataURL()}exportCellImg(e,t,i){var r,n,l,o;let a,s,h=this.cellIsInVisualView(e,t),{scrollTop:d,scrollLeft:u}=this;h||this.scrollToCell({col:e,row:t});let c=this.getCellRelativeRect(e,t);(null==(n=null==(r=this.stateManager.select)?void 0:r.ranges)?void 0:n.length)>0&&iT(this.scenegraph);let{col:p,row:g}=this.stateManager.hover.cellPos;if(this.stateManager.updateHoverPos(-1,-1),this.scenegraph.component.hideVerticalScrollBar(),this.scenegraph.component.hideHorizontalScrollBar(),this.scenegraph.tableGroup.border.setAttribute("visible",!1),null==i?void 0:i.disableBackground){let i=this.scenegraph.getCell(e,t);a=i.attribute.fill,i.setAttribute("fill","transparent")}if(null==i?void 0:i.disableBorder){let i=this.scenegraph.getCell(e,t);s=i.attribute.stroke,i.setAttribute("stroke",!1)}this.scenegraph.renderSceneGraph();let f=0;"bottom-right"===this.theme.cellBorderClipDirection&&(f=1);let m=this.scenegraph.stage.toCanvas(!1,(new rl.FB).set(c.left+this.tableX+1,c.top+this.tableY+1,c.right+this.tableX-f,c.bottom+this.tableY-f));return h||(this.setScrollTop(d),this.setScrollLeft(u)),this.scenegraph.tableGroup.border.setAttribute("visible",!0),a&&this.scenegraph.getCell(e,t).setAttribute("fill",a),s&&this.scenegraph.getCell(e,t).setAttribute("stroke",s),(null==(o=null==(l=this.stateManager.select)?void 0:l.ranges)?void 0:o.length)>0&&iR(this.scenegraph),this.stateManager.updateHoverPos(p,g),this.scenegraph.updateNextFrame(),m.toDataURL()}exportCellRangeImg(e){var t,i,r,n;let{scrollTop:l,scrollLeft:o}=this,a=Math.min(e.start.col,e.end.col),s=Math.min(e.start.row,e.end.row),h=Math.max(e.start.col,e.end.col),d=Math.max(e.start.row,e.end.row),u=this.cellIsInVisualView(a,s),c=this.cellIsInVisualView(h,d);u&&c||this.scrollToCell({col:a,row:s});let p=this.getCellRangeRelativeRect({start:{col:a,row:s},end:{col:h,row:d}});(null==(i=null==(t=this.stateManager.select)?void 0:t.ranges)?void 0:i.length)>0&&iT(this.scenegraph);let{col:g,row:f}=this.stateManager.hover.cellPos;this.stateManager.updateHoverPos(-1,-1),this.scenegraph.component.hideVerticalScrollBar(),this.scenegraph.component.hideHorizontalScrollBar(),this.scenegraph.renderSceneGraph();let m=this.scenegraph.stage.toCanvas(!1,(new rl.FB).set(p.left+this.tableX+1,p.top+this.tableY+1,p.right+this.tableX,p.bottom+this.tableY)).toDataURL();return u&&c||(this.setScrollTop(l),this.setScrollLeft(o)),(null==(n=null==(r=this.stateManager.select)?void 0:r.ranges)?void 0:n.length)>0&&iR(this.scenegraph),this.stateManager.updateHoverPos(g,f),m}exportCanvas(){return this.scenegraph.stage.toCanvas()}getImageBuffer(e="image/png"){if("node"!==this.options.mode)return;this.render();let t=this.scenegraph.stage;if(t){let i=this.tableX+this.getAllColsWidth(),r=this.tableY+this.getAllRowsHeight();return(this.internalProps.legends&&this.internalProps.legends.forEach(e=>{"right"===e.orient?i=Math.max(i,e.legendComponent.globalAABBBounds.x2):"bottom"===e.orient&&(r=Math.max(r,e.legendComponent.globalAABBBounds.y2))}),this.internalProps.title&&("right"===this.internalProps.title._titleOption.orient?i=Math.max(i,this.internalProps.title.getComponentGraphic().globalAABBBounds.x2):"bottom"===this.internalProps.title._titleOption.orient&&(r=Math.max(r,this.internalProps.title.getComponentGraphic().globalAABBBounds.y2))),i>=this.canvasWidth&&r>=this.canvasHeight)?(t.render(),t.window.getImageBuffer(e)):this.scenegraph.stage.toCanvas(!1,(new rl.FB).set(0,0,Math.min(this.canvasWidth,i),Math.min(this.canvasHeight,r))).toBuffer(e)}return null}getBodyIndexByTableIndex(e,t){return{col:e-this.rowHeaderLevelCount-this.leftRowSeriesNumberCount,row:t-this.columnHeaderLevelCount}}getTableIndexByBodyIndex(e,t){return{col:e+this.rowHeaderLevelCount+this.leftRowSeriesNumberCount,row:t+this.columnHeaderLevelCount}}onVChartEvent(e,t,i){this._chartEventMap[e]||(this._chartEventMap[e]=[]),"function"==typeof t?this._chartEventMap[e].push({callback:t}):this._chartEventMap[e].push({callback:i,query:t})}offVChartEvent(e,t){this._chartEventMap[e]&&(this._chartEventMap[e]=t?this._chartEventMap[e].filter(e=>e.callback!==t):[])}_bindChartEvent(e){if(e)for(let t in this._chartEventMap)(this._chartEventMap[t]||[]).forEach(i=>{i.query?e.on(t,i.query,i.callback):e.on(t,i.callback)})}changeRecordOrder(e,t){}hasCustomCellStyle(e){var t;return null==(t=this.customCellStylePlugin)?void 0:t.hasCustomCellStyle(e)}registerCustomCellStyle(e,t){var i;null==(i=this.customCellStylePlugin)||i.registerCustomCellStyle(e,t)}arrangeCustomCellStyle(e,t,i){var r;null==(r=this.customCellStylePlugin)||r.arrangeCustomCellStyle(e,t,i)}isSeriesNumber(e,t){return this.internalProps.layoutMap.isSeriesNumber(e,t)}isHasSeriesNumber(){var e;return(null==(e=this.internalProps.layoutMap)?void 0:e.leftRowSeriesNumberColumnCount)>0}get leftRowSeriesNumberCount(){var e,t;return null!=(t=null==(e=this.internalProps.layoutMap)?void 0:e.leftRowSeriesNumberColumnCount)?t:0}setMinMaxLimitWidth(e=!1){var t,i;let r=this.internalProps;for(let n=0;n<r.layoutMap.columnWidths.length;n++){if(this.internalProps._widthResizedColMap.has(n))continue;let{width:l,minWidth:o,maxWidth:a}=null!=(i=null==(t=r.layoutMap.columnWidths)?void 0:t[n])?i:{};e&&l&&("string"==typeof l&&"auto"!==l||"number"==typeof l&&l>0)&&this._setColWidth(n,l),o&&("number"==typeof o&&o>0||"string"==typeof o)&&this.setMinColWidth(n,o),a&&("number"==typeof a&&a>0||"string"==typeof a)&&this.setMaxColWidth(n,a)}}setSortedIndexMap(e,t){var i;null==(i=this.dataSource)||i.setSortedIndexMap(e,t)}checkReactCustomLayout(){this.reactCustomLayout||(this.reactCustomLayout=new r6.Z(this))}get bodyDomContainer(){return this.internalProps.bodyDomContainer}get headerDomContainer(){return this.internalProps.headerDomContainer}get frozenBodyDomContainer(){return this.internalProps.frozenBodyDomContainer}get frozenHeaderDomContainer(){return this.internalProps.frozenHeaderDomContainer}get rightFrozenBodyDomContainer(){return this.internalProps.rightFrozenBodyDomContainer}get rightFrozenHeaderDomContainer(){return this.internalProps.rightFrozenHeaderDomContainer}get frozenBottomDomContainer(){return this.internalProps.frozenBottomDomContainer}get bottomDomContainer(){return this.internalProps.bottomDomContainer}get rightFrozenBottomDomContainer(){return this.internalProps.rightFrozenBottomDomContainer}showMoverLine(e,t){this.scenegraph.component.showMoveCol(e,t,0),this.scenegraph.renderSceneGraph()}hideMoverLine(e,t){this.scenegraph.component.hideMoveCol(),this.scenegraph.renderSceneGraph()}disableScroll(){this.eventManager.disableScroll()}enableScroll(){this.eventManager.enableScroll()}getGroupTitleLevel(e,t){}scrollToRow(e,t){t?this.animationManager.scrollTo({row:e},t):this.scrollToCell({row:e})}scrollToCol(e,t){t?this.animationManager.scrollTo({col:e},t):this.scrollToCell({col:e})}scrollToCell(e,t){if(t)return void this.animationManager.scrollTo(e,t);let i=this.getDrawRange();if((0,b.Z)(e.col)&&e.col>=this.frozenColCount){let t=this.getFrozenColsWidth(),r=this.getColsWidth(0,e.col-1);this.scrollLeft=Math.min(r-t,this.getAllColsWidth()-i.width)}if((0,b.Z)(e.row)&&e.row>=this.frozenRowCount){let t=this.getFrozenRowsHeight(),r=this.getRowsHeight(0,e.row-1);this.scrollTop=Math.min(r-t,this.getAllRowsHeight()-i.height)}this.render()}checkHasColumnAutoWidth(){return(0,ex.MO)(this)}get containerFit(){return this._containerFit}set containerFit(e){var t,i;this._containerFit="boolean"==typeof e?{width:e,height:e}:e&&"object"==typeof e?{width:null==(t=e.width)||t,height:null==(i=e.height)||i}:{width:!1,height:!1}}isColumnSelected(e){let t=this.stateManager.select.ranges;for(let i=0;i<=t.length-1;i++){let r=t[i];if(r.start.col<=e&&r.end.col>=e&&0===r.start.row&&r.end.row===this.rowCount-1)return!0}return!1}isRowSelected(e){let t=this.stateManager.select.ranges;for(let i=0;i<=t.length-1;i++){let r=t[i];if(r.start.row<=e&&r.end.row>=e&&0===r.start.col&&r.end.col===this.colCount-1)return!0}return!1}updateCellContent(e,t){this.scenegraph.updateCellContent(e,t)}updateCellContentRange(e,t,i,r){for(let n=e;n<=i;n++)for(let e=t;e<=r;e++)this.scenegraph.updateCellContent(n,e)}updateCellContentRanges(e){for(let t=0;t<e.length;t++){let i=e[t];this.updateCellContentRange(i.start.col,i.start.row,i.end.col,i.end.row)}}}},57198:function(e,t,i){i.d(t,{B:()=>r});let r={CLICK_CELL:"click_cell",DBLCLICK_CELL:"dblclick_cell",MOUSEDOWN_CELL:"mousedown_cell",MOUSEUP_CELL:"mouseup_cell",SELECTED_CELL:"selected_cell",SELECTED_CLEAR:"selected_clear",BEFORE_KEYDOWN:"before_keydown",KEYDOWN:"keydown",MOUSEENTER_TABLE:"mouseenter_table",MOUSELEAVE_TABLE:"mouseleave_table",MOUSEDOWN_TABLE:"mousedown_table",MOUSEMOVE_TABLE:"mousemove_table",MOUSEMOVE_CELL:"mousemove_cell",MOUSEENTER_CELL:"mouseenter_cell",MOUSELEAVE_CELL:"mouseleave_cell",CONTEXTMENU_CELL:"contextmenu_cell",CONTEXTMENU_CANVAS:"contextmenu_canvas",RESIZE_COLUMN:"resize_column",RESIZE_COLUMN_END:"resize_column_end",RESIZE_ROW:"resize_row",RESIZE_ROW_END:"resize_row_end",CHANGE_HEADER_POSITION_START:"change_header_position_start",CHANGE_HEADER_POSITION:"change_header_position",CHANGING_HEADER_POSITION:"changing_header_position",CHANGE_HEADER_POSITION_FAIL:"change_header_position_fail",SORT_CLICK:"sort_click",AFTER_SORT:"after_sort",FREEZE_CLICK:"freeze_click",SCROLL:"scroll",CAN_SCROLL:"can_scroll",SCROLL_HORIZONTAL_END:"scroll_horizontal_end",SCROLL_VERTICAL_END:"scroll_vertical_end",DROPDOWN_MENU_CLICK:"dropdown_menu_click",MOUSEOVER_CHART_SYMBOL:"mouseover_chart_symbol",DRAG_SELECT_END:"drag_select_end",SELECTED_CHANGED:"selected_changed",COPY_DATA:"copy_data",DROPDOWN_ICON_CLICK:"dropdown_icon_click",DROPDOWN_MENU_CLEAR:"dropdown_menu_clear",TREE_HIERARCHY_STATE_CHANGE:"tree_hierarchy_state_change",SHOW_MENU:"show_menu",HIDE_MENU:"hide_menu",ICON_CLICK:"icon_click",LEGEND_ITEM_CLICK:"legend_item_click",LEGEND_ITEM_HOVER:"legend_item_hover",LEGEND_ITEM_UNHOVER:"legend_item_unHover",LEGEND_CHANGE:"legend_change",MOUSEENTER_AXIS:"mouseenter_axis",MOUSELEAVE_AXIS:"mouseleave_axis",CHECKBOX_STATE_CHANGE:"checkbox_state_change",RADIO_STATE_CHANGE:"radio_state_change",SWITCH_STATE_CHANGE:"switch_state_change",BEFORE_SET_SIZE:"before_set_size",BEFORE_INIT:"before_init",BEFORE_UPDATE_OPTION:"before_update_option",AFTER_RENDER:"after_render",INITIALIZED:"initialized",UPDATED:"updated",AFTER_UPDATE_CELL_CONTENT_WIDTH:"after_update_cell_content_width",AFTER_UPDATE_SELECT_BORDER_HEIGHT:"after_update_select_border_height",CHANGE_CELL_VALUE:"change_cell_value",DRAG_FILL_HANDLE_END:"drag_fill_handle_end",MOUSEDOWN_FILL_HANDLE:"mousedown_fill_handle",DBLCLICK_FILL_HANDLE:"dblclick_fill_handle",EMPTY_TIP_CLICK:"empty_tip_click",EMPTY_TIP_DBLCLICK:"empty_tip_dblclick",BUTTON_CLICK:"button_click",BEFORE_CACHE_CHART_IMAGE:"before_cache_chart_image",PASTED_DATA:"pasted_data",PLUGIN_EVENT:"plugin_event",ADD_RECORD:"add_record",DELETE_RECORD:"delete_record",UPDATE_RECORD:"update_record",ADD_COLUMN:"add_column",DELETE_COLUMN:"delete_column",FILTER_MENU_SHOW:"filter_menu_show",FILTER_MENU_HIDE:"filter_menu_hide"}},54833:function(e,t,i){i.d(t,{F:()=>r});class r{static registerComponent(e,t){r._components[e]=t}static getComponent(e){return r._components[e]}static registerFunction(e,t){r._functions[e]=t}static getFunction(e){return r._functions[e]}static registerCellType(e,t){r._cellTypes[e]=t}static getCellType(e){return r._cellTypes[e]}}r._components={},r._functions={},r._cellTypes={}},46320:function(e,t,i){i.d(t,{bW:()=>B,FJ:()=>E,x6:()=>x,sQ:()=>S,qf:()=>A,_I:()=>b,ke:()=>w,mP:()=>_,RT:()=>T,gX:()=>y,AS:()=>k,MO:()=>I,VN:()=>M,rQ:()=>P,xv:()=>R});var r=i(14993),n=i(95723),l=i(4654),o=i(64776),a=i(65755),s=i(37098),h=i(13546),d=i.n(h);class u extends r.o2{static get EVENT_TYPE(){return r.o2.EVENT_TYPE}static ofArray(e,t,i,r,n,l){return new u({get:t=>e[t],length:e.length,records:e},t,i,r,n,l)}constructor(e,t,i,r,l,o){let a;(0,n.Z)(null==t?void 0:t.groupByRules)&&(a=!0),super(e,t,i,r,l,o),this._isGrouped=a,this._recordCache=[],this._fieldCache={}}getOriginalRecord(e){return(0,l.Z)(e)&&this._recordCache&&this._recordCache[e]?this._recordCache[e]:super.getOriginalRecord(e)}getRawRecord(e){var t,i,n,a;let s,h;if(this._isGrouped){if(s=this.getOriginRecordIndexForGroup(e),(0,o.Z)(s)&&(null==(t=this.beforeChangedRecordsMap)?void 0:t.has(s.toString())))return null==(i=this.beforeChangedRecordsMap)?void 0:i.get(s.toString())}else if(null==(n=this.beforeChangedRecordsMap)?void 0:n.has(e.toString()))return null==(a=this.beforeChangedRecordsMap)?void 0:a.get(e.toString());return(0,l.Z)(e)&&this._recordCache&&this._recordCache[e]?this._recordCache[e]:(h=this.dataSourceObj.records?Array.isArray(e)?(0,r.UN)(this.records,e):this.records[e]:this._get(e),(0,r.NA)(h,t=>{this.recordPromiseCallBack(e,t)}))}getOriginalField(e,t,i,r,n){let l=this._fieldCache&&this._fieldCache[e];if(l){let e=l.get(t);if(e)return e}return super.getOriginalField(e,t,i,r,n)}clearCache(){this._recordCache&&(this._recordCache=[]),this._fieldCache&&(this._fieldCache={})}fieldPromiseCallBack(e,t,i){var r;r=this._fieldCache,(r[e]||(r[e]=new Map)).set(t,i)}recordPromiseCallBack(e,t){this._recordCache&&(this._recordCache[e]=t)}get records(){return Array.isArray(this._recordCache)&&this._recordCache.length>0?this._recordCache:super.records}release(){var e;null==(e=super.release)||e.call(this),this._recordCache=null,this._fieldCache=null}_generateFieldAggragations(){var e;if(super._generateFieldAggragations(),(0,n.Z)(null==(e=this.dataConfig)?void 0:e.groupByRules)){let e=this.dataConfig.groupByRules;this.groupAggregator=new this.registedAggregators[s.E.CUSTOM]({field:"",aggregationFun:(t,i,r)=>{let n=new Map,l=[];for(let t=0;t<i.length;t++)!function e(t,i,r,n,l){let a=n[l];if(!(0,o.Z)(a))return void i.push(t);let s=d()(t,a);if(void 0!==s){if(r.has(s)){let o=r.get(s);return e(t,i[o].children,i[o].map,n,l+1)}return r.set(s,i.length),i.push({vtableMerge:!0,vtableMergeName:s,children:[],map:new Map}),e(t,i[i.length-1].children,i[i.length-1].map,n,l+1)}}(i[t],l,n,e,0);return l}}),this.fieldAggregators.push(this.groupAggregator)}}processRecords(e){var t;let i=super.processRecords(e);return(null==(t=this.groupAggregator)?void 0:t.value())||i}getGroupLength(){var e,t,i;return null!=(i=null==(t=null==(e=this.dataConfig)?void 0:e.groupByRules)?void 0:t.length)?i:0}updateGroup(){var e,t,i;this.clearCache();let r=this.source;this._source=this.processRecords(null!=(t=null==(e=this.dataSourceObj)?void 0:e.records)?t:this.dataSourceObj),r&&function e(t,i,r,l){if(!r){r=new Map;for(let e=0;e<t.length;e++){let i=t[e];i.vtableMerge&&r.set(i.vtableMergeName,e)}}if(!l){l=new Map;for(let e=0;e<i.length;e++){let t=i[e];t.vtableMerge&&l.set(t.vtableMergeName,e)}}for(let r=0;r<t.length;r++){let a=t[r],s=i[l.get(a.vtableMergeName)];(0,o.Z)(s)&&(s.hierarchyState=t[r].hierarchyState),(0,n.Z)(null==a?void 0:a.children)&&(0,n.Z)(null==s?void 0:s.children)&&0!==a.map.size&&0!==s.map.size&&e(a.children,s.children,a.map,s.map)}}(r,this.source),this.sourceLength=(null==(i=this.source)?void 0:i.length)||0,this.sortedIndexMap.clear(),this.currentIndexedData=Array.from({length:this.sourceLength},(e,t)=>t),this.userPagination||(this.pagination.perPageCount=this.sourceLength,this.pagination.totalCount=this.sourceLength),this.initTreeHierarchyState(),this.updatePagerData()}getOriginRecordIndexForGroup(e){let t=this.getOriginalRecord(e);if((0,o.Z)(t)&&!(t.children&&t.children.length>0)){for(let e=0;e<this.dataSourceObj.records.length;e++)if(this.dataSourceObj.records[e]===t)return e}}addRecordsForGroup(e,t){if(!(0,n.Z)(e)||0===e.length)return;let i=this.getOriginRecordIndexForGroup(t);(void 0===i||i>this.dataSourceObj.records)&&(i=this.dataSourceObj.records.length),this.dataSourceObj.records.splice(i,0,...e),this.adjustBeforeChangedRecordsMap(i,e.length),this.updateGroup()}deleteRecordsForGroup(e){if(!(0,n.Z)(e)||0===e.length)return;let t=(0,r.pY)(e,-1);for(let e=0;e<t.length;e++){let i=t[e];if((0,l.Z)(i)&&(i>=this.sourceLength||i<0))continue;let r=this.getOriginRecordIndexForGroup(i);this.beforeChangedRecordsMap.delete(r.toString()),this.dataSourceObj.records.splice(r,1),this.sourceLength-=1,this.adjustBeforeChangedRecordsMap(r,1,"delete")}this.updateGroup()}updateRecordsForGroup(e,t){for(let i=0;i<t.length;i++){let r=t[i];if((0,l.Z)(r)&&(r>=this.sourceLength||r<0))continue;let n=this.getOriginRecordIndexForGroup(r);this.beforeChangedRecordsMap.delete(n.toString()),this.dataSourceObj.records[n]=e[i]}this.updateGroup()}addRecordsForTree(e,t){if((0,n.Z)(e)&&0!==e.length){if(this.adjustBeforeChangedRecordsMap(t,e.length),(0,l.Z)(t))this.dataSourceObj.records.splice(t,0,...e);else{let i=[...t],r=i.pop(),n=this.getOriginalRecord(i);n.children?n.children.splice(r,0,...e):n.children=e}this.initTreeHierarchyState(),this.updatePagination()}}deleteRecordsForTree(e){if(!(0,n.Z)(e)||0===e.length)return[];let t=(0,r.pY)(e,-1),i=[];for(let e=0;e<t.length;e++){let r=t[e];if(!(0,l.Z)(r)||!(r>=this.sourceLength||r<0)){if(this.beforeChangedRecordsMap.delete(r.toString()),(0,l.Z)(r))this.dataSourceObj.records.splice(r,1);else{let e=[...r],t=e.pop();this.getOriginalRecord(e).children.splice(t,1)}this.adjustBeforeChangedRecordsMap(r,1,"delete"),i.push(r)}}return this.initTreeHierarchyState(),this.updatePagination(),i}updateRecordsForTree(e,t){for(let i=0;i<t.length;i++){let r=t[i],n=e[i];if(!(0,l.Z)(r)||!(r>=this.sourceLength||r<0))if(this.beforeChangedRecordsMap.delete(r.toString()),(0,l.Z)(r))this.dataSourceObj.records.splice(r,1,n);else{let e=[...r],t=e.pop();this.getOriginalRecord(e).children.splice(t,1,n)}}this.initTreeHierarchyState(),this.updatePagerData()}adjustBeforeChangedRecordsMap(e,t,i="add"){if("tree"===this.rowHierarchyType){let r;r=(0,l.Z)(e)?[e]:e;let n=[];this.beforeChangedRecordsMap.forEach((e,l)=>{var o,a;let s=l.split(","),h=Math.max(s.length,r.length);for(let d=0;d<h;d++){let h=null!=(o=r[d])?o:-1,u=null!=(a=Number(s[d]))?a:-1;if(h<u||h===u&&d===s.length-1&&d===r.length-1)return s[d]=(u+("add"===i?t:-t)).toString(),void n.push({originKey:l,targetKey:s.toString(),value:e})}}),n.forEach(({originKey:e,targetKey:t,value:i})=>{this.beforeChangedRecordsMap.delete(e),this.beforeChangedRecordsMap.set(t,i)})}else super.adjustBeforeChangedRecordsMap(e,t,i)}cacheBeforeChangedRecord(e,t){var i;let r=this.getOriginalRecord(e);t.internalProps.groupBy&&(e=this.getOriginRecordIndexForGroup(e)),this.beforeChangedRecordsMap.has(e.toString())||this.beforeChangedRecordsMap.set(e.toString(),null!=(i=(0,a.Z)(r,void 0,["vtable_gantt_linkedFrom","vtable_gantt_linkedTo"]))?i:{})}getGroupSeriesNumber(e){let t=this.dataSource.currentIndexedData[e],i=t.length-1,r=t.length,n=1;for(;r>i;n++){let t=this.dataSource.currentIndexedData[e-n];r=(0,l.Z)(t)?1:t.length}return n-1}}var c=i(78596),p=i.n(c),g=i(76352),f=i(77629),m=i(78921);function b(e,t="vtable"){var i,r;let n=document.createElement("div");n.setAttribute("tabindex","0"),n.classList.add(t),n.style.outline="none",n.style.margin=`${e.top}px ${e.right}px ${e.bottom}px ${e.left}px`;let l=(n.offsetWidth||(null==(i=n.parentElement)?void 0:i.offsetWidth)||1)-1,o=(n.offsetHeight||(null==(r=n.parentElement)?void 0:r.offsetHeight)||1)-1;return n.style.width=l&&l-e.left-e.right+"px"||"0px",n.style.height=o&&o-e.top-e.bottom+"px"||"0px",n}function y(e,t){var i,r;e.style.margin=`${t.top}px ${t.right}px ${t.bottom}px ${t.left}px`;let n=(e.offsetWidth||(null==(i=e.parentElement)?void 0:i.offsetWidth)||1)-1,l=(e.offsetHeight||(null==(r=e.parentElement)?void 0:r.offsetHeight)||1)-1;e.style.width=n&&n-t.left-t.right+"px"||"0px",e.style.height=l&&l-t.top-t.bottom+"px"||"0px"}function v(e,t){let{dataSourceEventIds:i}=e.internalProps;i&&i.forEach(t=>e.internalProps.handler.off(t)),t(e),e.internalProps.dataSourceEventIds=[e.internalProps.handler.on(e.internalProps.dataSource,r.o2.EVENT_TYPE.CHANGE_ORDER,()=>{e.dataSource.hierarchyExpandLevel&&e.refreshRowColCount(),e.render()})]}function _(e,t=[]){v(e,()=>{var i;e.internalProps.records=t;let r=e.internalProps.layoutMap.rowHierarchyType;(0,n.Z)(null==(i=e.internalProps.dataConfig)?void 0:i.groupByRules)&&(r="tree"),e.pluginManager.getPluginByName("Master Detail Plugin")&&(r="grid");let l=e.internalProps.dataSource=u.ofArray(t,e.internalProps.dataConfig,e.pagination,e.internalProps.columns,r,C(e));e.addReleaseObj(l)})}function C(e){var t;return e.options.hierarchyExpandLevel?e.options.hierarchyExpandLevel:e.internalProps.groupBy?1/0:(null==(t=e._hasHierarchyTreeHeader)?void 0:t.call(e))?1:void 0}function x(e,t){v(e,()=>{e.internalProps.dataSource&&e.internalProps.releaseList.forEach(t=>{t instanceof r.o2&&(t.release(),e.internalProps.releaseList.splice(e.internalProps.releaseList.indexOf(t),1))}),t?t instanceof r.o2?(e.internalProps.dataSource=t,e.internalProps.dataSource.supplementConfig(e.pagination,e.options.columns,e.internalProps.layoutMap.rowHierarchyType,C(e))):e.internalProps.dataSource=new u(t):e.internalProps.dataSource=r.o2.EMPTY,e.addReleaseObj(e.internalProps.dataSource),e.internalProps.records=null})}function w(e,t){if(!e.internalProps.frozenRowCount)return null;let{scrollTop:i}=e,r=e.internalProps.frozenRowCount;for(let n=0;n<r;n++){let r=e.getRowHeight(n),l=i+r;if(l>t)return{top:i,row:n,bottom:l,height:r};i=l}return null}function S(e,t){if(!e.internalProps.frozenColCount)return null;let{scrollLeft:i}=e,r=e.internalProps.frozenColCount;for(let n=0;n<r;n++){let r=e.getColWidth(n),l=i+r;if(l>t)return{left:i,col:n,right:l,width:r};i=l}return null}function A(e,t){return Math.round(m.aR(t,e.internalProps.calcWidthContext))}function k(e,t){return e?e.min&&e.min>t?e.min:e.max&&e.max<t?e.max:t:t}function M(e){let t=0,i=0;e.frozenColCount>0&&(t=e.getFrozenColsWidth()),e.rightFrozenColCount>0&&(i=e.getRightFrozenColsWidth());let r=0,n=0;return e.frozenRowCount>0&&(r=e.getFrozenRowsHeight()),e.bottomFrozenRowCount>0&&(n=e.getBottomFrozenRowsHeight()),new f.U(e.scrollLeft+t,e.scrollTop+r,e.tableNoFrameWidth-t-i,e.tableNoFrameHeight-r-n)}function T(e,t,i,r,n,l=!0){let a,s,h,d,u,c=(0,g.u)(n("padding",e,i,r,t)),f=n("bgColor",e,i,r,t),m=n("font",e,i,r,t);if(m){let{family:e,size:t,weight:i,style:r,variant:n}=p()(m);a=e.join(" "),s=t,h=i,d=r,d=n}else a=n("fontFamily",e,i,r,t),s=n("fontSize",e,i,r,t),h=n("fontWeight",e,i,r,t),d=n("fontStyle",e,i,r,t),u=n("fontVariant",e,i,r,t);let b=n("textAlign",e,i,r,t),y=n("textBaseline",e,i,r,t),v=n("color",e,i,r,t),_=n("strokeColor",e,i,r,t),C=n("lineHeight",e,i,r,t),x=n("underline",e,i,r,t),w=n("underlineDash",e,i,r,t),S=n("underlineOffset",e,i,r,t),A=n("lineThrough",e,i,r,t),k=Math.max(1,Math.floor(s/10)),M=n("textOverflow",e,i,r,t),R=n("borderColor",e,i,r,t),E=n("borderLineWidth",e,i,r,t),P=n("borderLineDash",e,i,r,t),B=n("marked",e,i,r,t),I=n("cursor",e,i,r,t),L=!(c&&f&&m&&b&&y&&v&&M&&R&&E&&P&&"boolean"==typeof x&&"boolean"==typeof A&&"boolean"==typeof B);if(!l)return{hasFunctionPros:L};let F={text:{fontFamily:a,fontSize:s,fontWeight:h,fontStyle:d,fontVariant:u,fill:v,stroke:null!=_&&_,textAlign:b,textBaseline:y,lineHeight:null!=C?C:s,underline:x?k:void 0,underlineDash:w,underlineOffset:S,lineThrough:A?k:void 0,ellipsis:"clip"===M?"":"ellipsis"===M?"...":(0,o.Z)(M)?M:void 0},group:{fill:f,lineDash:P,lineWidth:E,stroke:R,cursor:"auto"===I||"default"===I?void 0:I},_vtable:{padding:c,marked:B}};if(Array.isArray(E)&&(F.group.strokeArrayWidth=(0,g.u)(E)),Array.isArray(R)){let e=(0,g.u)(R);F.group.stroke=!e.every(e=>!e)&&e,F.group.strokeArrayColor=(0,g.u)(R)}return{theme:F,hasFunctionPros:L}}function R(e,t,i){let r=i.theme.frameStyle.cornerRadius;if(i.theme.cellInnerBorder){if(Array.isArray(r)){let n=[0,0,0,0];return 0===e&&0===t&&(n[0]=r[0]),e===i.colCount-1&&0===t&&(n[1]=r[1]),0===e&&t===i.rowCount-1&&(n[3]=r[3]),e===i.colCount-1&&t===i.rowCount-1&&(n[2]=r[2]),n}if(r){let n=[0,0,0,0];return 0===e&&0===t&&(n[0]=r),e===i.colCount-1&&0===t&&(n[1]=r),0===e&&t===i.rowCount-1&&(n[3]=r),e===i.colCount-1&&t===i.rowCount-1&&(n[2]=r),n}}return 0}function E(e){var t,i,r,n;if(e){if(Array.isArray(e)){let l;for(let o=0;o<e.length;o++)if(e[o].autoRange){if("sum"===e[o].y||"sum"===e[o].x||"sum"===e[o].y1||"sum"===e[o].x1)return"sum";"max"!==e[o].y&&"max"!==e[o].x&&"max"!==e[o].y1&&"max"!==e[o].x1||(l="max"),"number"==typeof e[o].y&&"number"==typeof(null!=l?l:0)&&(l=Math.max(null!=(t=l)?t:0,e[o].y)),"number"==typeof e[o].x&&"number"==typeof(null!=l?l:0)&&(l=Math.max(null!=(i=l)?i:0,e[o].x)),"number"==typeof e[o].y1&&"number"==typeof(null!=l?l:0)&&(l=Math.max(null!=(r=l)?r:0,e[o].y1)),"number"==typeof e[o].x1&&"number"==typeof(null!=l?l:0)&&(l=Math.max(null!=(n=l)?n:0,e[o].x1))}return l}if(e.autoRange){if("sum"===e.y||"sum"===e.x||"sum"===e.y1||"sum"===e.x1)return"sum";if("max"===e.y||"max"===e.x||"max"===e.y1||"max"===e.x1)return"max";if("number"==typeof e.y)return e.y;if("number"==typeof e.x)return e.x;if("number"==typeof e.y1)return e.y1;if("number"==typeof e.x1)return e.x1}}}function P(e){for(let t=0;t<e.internalProps.columns.length;t++){let i=e.internalProps.columns[t];if(i.aggregation);else if(e.options.aggregation){let r;if(r="function"==typeof e.options.aggregation?e.options.aggregation({col:t,field:i.field}):e.options.aggregation)if(Array.isArray(r)){let e=[];r.forEach(t=>{e.push(Object.assign({showOnTop:!1},t))}),i.aggregation=e}else i.aggregation=Object.assign({showOnTop:!1},r)}}}function B(e){for(let t=0;t<e.length;t++)if(e[t].aggregation)return!0;return!1}function I(e){if("autoWidth"===e.options.widthMode||"auto"===e.options.defaultHeaderColWidth||Array.isArray(e.options.defaultHeaderColWidth)&&e.options.defaultHeaderColWidth.includes("auto"))return!0;let t=e.internalProps.layoutMap.columnObjects;for(let e=0;e<t.length;e++)if("auto"===t[e].width)return!0;return!1}},28625:function(e,t,i){i.d(t,{k:()=>l});var r=i(96241),n=i(95723);function l(e){return(0,r.Z)(e)?e:(0,n.Z)(e)?(t,i)=>e.find(e=>e.range.start.col<=t&&e.range.end.col>=t&&e.range.start.row<=i&&e.range.end.row>=i):void 0}},14993:function(e,t,i){i.d(t,{o2:()=>y,UN:()=>v,pY:()=>_,NA:()=>f});var r=i(36781),n=i(37098),l=i(35759),o=i(9032),a=i(75665),s=i(64776),h=i(80971),d=i(99051),u=i(65755),c=i(4654),p=i(61789);let g={SOURCE_LENGTH_UPDATE:"source_length_update",CHANGE_ORDER:"change_order"};function f(e,t){let i=(0,l.vi)(e);if((0,l.tI)(i)){let e=i.then(e=>(t(e),e));return t(e),e}return i}function m(e,t,i,r,n,o){var d;if(null==e)return;if((0,l.tI)(e))return e.then(e=>m(e,t,i,r,n,o));let u=(d=t,!(l.j6.isObject(d)&&(0,s.Z)(d.get)&&(0,s.Z)(d.set))&&1)?t:t.get;if((void 0===u||""===u)&&Array.isArray(e))return e[i-n.leftRowSeriesNumberCount];if((0,h.Z)(e)&&u in e)return f(e[u],o);if("function"==typeof u)return f(u(e,i,r,n),o);if(Array.isArray(u))return f((0,a.MU)(e,[...u]),o);let c=`${u}`.split(".");return c.length<=1?f(e[u],o):f((0,l.vl)(e,(e,t)=>m(e,t,i,r,n,l.nO),...c),o)}function b(e,t){if(!e)return t;let i=e[t];return(0,s.Z)(i)?i:t}class y extends o.R{static get EVENT_TYPE(){return g}constructor(e,t,i,r,n,l){var o;super(),this.addRecordRule="Object",this.currentIndexedData=[],this.hierarchyExpandLevel=0,this.hasHierarchyStateExpand=!1,this.beforeChangedRecordsMap=new Map,this.registedAggregators={},this.rowHierarchyType="grid",this.fieldAggregators=[],this.addRecordRule=(null==t?void 0:t.addRecordRule)||"Object",this.registerAggregators(),this.dataSourceObj=e,this.dataConfig=t,this._get=null==e?void 0:e.get,this.columns=r,this._source=(null==e?void 0:e.records)?this.processRecords(null==e?void 0:e.records):e,this._sourceLength=(null==(o=this._source)?void 0:o.length)||0,this.sortedIndexMap=new Map,this._currentPagerIndexedData=[],this.userPagination=i,this.pagination=i||{totalCount:this._sourceLength,perPageCount:this._sourceLength,currentPage:0},l>=1&&(this.hierarchyExpandLevel=l),this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t),"tree"===n&&this.initTreeHierarchyState(),this.rowHierarchyType=n,this.updatePagerData()}initTreeHierarchyState(){var e,t;this._sourceLength=(null==(e=this._source)?void 0:e.length)||0,this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t);let i=this._sourceLength;for(let e=0;e<i;e++){let n=this.currentIndexedData[e],l=this.getOriginalRecord(n);if(!l)continue;let o=null!=(t=l.filteredChildren)?t:l.children;if((null==o?void 0:o.length)>0){if(this.hierarchyExpandLevel>1?l.hierarchyState||(l.hierarchyState=r.g.expand):l.hierarchyState||(l.hierarchyState=r.g.collapse),this.hasHierarchyStateExpand=!0,l.hierarchyState===r.g.collapse)continue;let t=this.initChildrenNodeHierarchy(n,this.hierarchyExpandLevel,2,l);e+=t,i+=t}else!0!==l.children||l.hierarchyState||(l.hierarchyState=r.g.collapse)}}supplementConfig(e,t,i,r){var n;this.columns=t,this._sourceLength=(null==(n=this._source)?void 0:n.length)||0,this.sortedIndexMap=new Map,this._currentPagerIndexedData=[],this.userPagination=e,this.pagination=e||{totalCount:this._sourceLength,perPageCount:this._sourceLength,currentPage:0},r>=1&&(this.hierarchyExpandLevel=r),this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t),"tree"===i&&this.initTreeHierarchyState(),this.rowHierarchyType=i,this.updatePagerData()}registerAggregator(e,t){this.registedAggregators[e]=t}registerAggregators(){this.registerAggregator(n.E.RECORD,p.hT),this.registerAggregator(n.E.SUM,p.__),this.registerAggregator(n.E.COUNT,p.ZP),this.registerAggregator(n.E.MAX,p.Fn),this.registerAggregator(n.E.MIN,p.NF),this.registerAggregator(n.E.AVG,p.ky),this.registerAggregator(n.E.NONE,p.ld),this.registerAggregator(n.E.CUSTOM,p.Js)}updateColumns(e){this.columns=e}_generateFieldAggragations(){let e=this.columns;this.fieldAggregators=[];let t=e=>{delete e.vtable_aggregator;let t=e.field,i=e.aggregation;if(i)if(Array.isArray(i))for(let r of i){let i=new this.registedAggregators[r.aggregationType]({field:t,formatFun:r.formatFun,isRecord:!0,aggregationFun:r.aggregationFun});this.fieldAggregators.push(i),e.vtable_aggregator||(e.vtable_aggregator=[]),e.vtable_aggregator.push(i)}else{let r=new this.registedAggregators[i.aggregationType]({field:t,formatFun:i.formatFun,isRecord:!0,aggregationFun:i.aggregationFun});this.fieldAggregators.push(r),e.vtable_aggregator=r}},i=e=>{if(e&&0!==e.length)for(let r of e)t(r),r.columns&&i(r.columns)};i(e)}processRecords(e){var t,i,r,n,l,o,a,s;this._generateFieldAggragations();let h=[],d=this.fieldAggregators.length>=1;if((null==(i=null==(t=this.dataConfig)?void 0:t.filterRules)?void 0:i.length)>=1||(null==(r=this.lastFilterRules)?void 0:r.length)>=1||d){for(let t=0,i=e.length;t<i;t++){let i=e[t];null!=i&&((null==(l=null==(n=this.dataConfig)?void 0:n.filterRules)?void 0:l.length)>=1?this.filterRecord(i)&&(h.push(i),"tree"===this.rowHierarchyType&&i.children&&(i.filteredChildren=this.filteredChildren(i.children)),d&&this.processRecord(i)):((null==(o=this.lastFilterRules)?void 0:o.length)>=1&&this.clearFilteredChildren(i),d&&this.processRecord(i)))}if((null==(s=null==(a=this.dataConfig)?void 0:a.filterRules)?void 0:s.length)>=1)return h}return e}filteredChildren(e){let t=[];for(let i=0,r=e.length;i<r;i++){let r=e[i];this.filterRecord(r)&&(t.push(r),r.children&&(r.filteredChildren=this.filteredChildren(r.children)))}return t}processRecord(e){for(let t=0;t<this.fieldAggregators.length;t++)this.fieldAggregators[t].push(e)}initChildrenNodeHierarchy(e,t,i,n){var l,o,a;let s=0,h=n.filteredChildren?n.filteredChildren.length:null!=(o=null==(l=n.children)?void 0:l.length)?o:0;for(let l=0;l<h;l++){(i<=t||n.hierarchyState===r.g.expand)&&(s+=1);let o=n.filteredChildren?n.filteredChildren[l]:n.children[l],h=Array.isArray(e)?e.concat(l):[e,l];(i<=t||n.hierarchyState===r.g.expand)&&this.currentIndexedData.splice(this.currentIndexedData.indexOf(e)+s,0,h),(o.filteredChildren?o.filteredChildren.length>0:(null==(a=o.children)?void 0:a.length)>0)&&(i<t||o.hierarchyState===r.g.expand?(o.hierarchyState||(o.hierarchyState=r.g.expand),this.hasHierarchyStateExpand=!0):o.hierarchyState||(o.hierarchyState=r.g.collapse)),o.hierarchyState===r.g.expand&&(s+=this.initChildrenNodeHierarchy(h,t,i+1,o)),!0!==o.children||o.hierarchyState||(o.hierarchyState=r.g.collapse)}return s}updatePagination(e){this.pagination=e||{totalCount:this._sourceLength,perPageCount:this._sourceLength,currentPage:0},this.updatePagerData()}updatePagerData(){let{currentIndexedData:e}=this,{perPageCount:t,currentPage:i}=this.pagination,r=t*(i||0),n=r+t;if(this._currentPagerIndexedData.length=0,e&&e.length>0){let t=-1;for(let i=0;i<e.length;i++)if((Array.isArray(e[i])&&1===e[i].length||!Array.isArray(e[i]))&&t++,t>=r&&t<n)this._currentPagerIndexedData.push(e[i]);else if(t>=n)break}else if(this._sourceLength>0)throw Error("currentIndexedData should has values!")}getRecordIndexPaths(e){return this._currentPagerIndexedData[e]}get records(){return Array.isArray(this._source)?this._source:[]}get source(){return this._source}get(e){return this.getOriginalRecord(b(this.currentPagerIndexedData,e))}getRaw(e){return this.getRawRecord(b(this.currentPagerIndexedData,e))}getIndexKey(e){return b(this.currentPagerIndexedData,e)}getTableIndex(e){return Array.isArray(e)?"tree"===this.rowHierarchyType?this.currentPagerIndexedData.findIndex(t=>(0,d.h6)(t,e)):this.currentPagerIndexedData.findIndex(t=>t===e[0]):this.currentPagerIndexedData.findIndex(t=>t===e)}getField(e,t,i,r,n){return this.getOriginalField(b(this.currentPagerIndexedData,e),t,i,r,n)}getRawField(e,t,i,r,n){return this.getRawFieldData(b(this.currentPagerIndexedData,e),t,i,r,n)}hasField(e,t){return this.hasOriginalField(b(this.currentPagerIndexedData,e),t)}getHierarchyState(e){var t;let i=this.getOriginalRecord(this.currentPagerIndexedData[e]);if(null==i?void 0:i.hierarchyState){let e=i.hierarchyState;if((null==(t=i.children)?void 0:t.length)>0||!0===i.children)return e}return null}toggleHierarchyState(e,t,i){let n=this.currentIndexedData.slice(0),l=this.getIndexKey(e),o=this.getHierarchyState(e),s=this.getOriginalRecord(l);if(this.clearSortedIndexMap(),o===r.g.collapse)s.hierarchyState=r.g.expand,this.pushChildrenNode(l,r.g.expand,s),this.hasHierarchyStateExpand=!0;else if(o===r.g.expand){let e=(0,a.pr)(l,o,s);this.currentIndexedData.splice(this.currentIndexedData.indexOf(l)+1,e),s.hierarchyState=r.g.collapse}this.updatePagerData();let h=[],d=[];if(o===r.g.collapse){let t=this.currentIndexedData.length-n.length;for(let i=0;i<t;i++)h.push(e+i+1)}else if(o===r.g.expand){let t=n.length-this.currentIndexedData.length;for(let i=0;i<t;i++)d.push(e+i+1)}return{add:h,remove:d}}pushChildrenNode(e,t,i){var n,l;if(!t||t===r.g.collapse||t===r.g.none)return 0;let o=0,a=i.filteredChildren?i.filteredChildren:i.children;if(a){let t=Array.from({length:a.length},(e,t)=>t);null==(n=this.lastSortStates)||n.forEach(i=>{"normal"!==i.order&&function(e,t,i,r,n,l){let o=function(e,t){let i=Array(t);for(let r=0;r<t;r++)i[r]=e(r);return i}(e,i);o.sort((e,t)=>r(l(e),l(t),n));for(let e=0;e<i;e++)t(e,o[e])}(e=>(0,s.Z)(t[e])?t[e]:t[e]=e,(e,i)=>{t[e]=i},a.length,i.orderFn,i.order,t=>this.getOriginalField(Array.isArray(e)?e.concat([t]):[e,t],i.field))});for(let i=0;i<t.length;i++){o+=1;let n=Array.isArray(e)?e.concat([t[i]]):[e,t[i]];this.currentIndexedData.splice(this.currentIndexedData.indexOf(e)+o,0,n);let s=this.getOriginalRecord(n);!s.hierarchyState&&(null!=(l=s.filteredChildren)?l:s.children)&&(s.hierarchyState=r.g.collapse),o+=this.pushChildrenNode(n,s.hierarchyState,a[t[i]])}}return o}changeFieldValue(e,t,i,r,n,o){var s;if(null!==i&&t>=0){let n=this.getIndexKey(t);if(this.cacheBeforeChangedRecord(n,o),void 0!==i&&""!==i||(i=r-o.leftRowSeriesNumberCount),"string"==typeof i||"number"==typeof i){let t=null==(s=this.beforeChangedRecordsMap.get(n.toString()))?void 0:s[i],r=this.getOriginalRecord(n),o=e;"number"==typeof t&&(0,a.Zf)(e)&&(o=parseFloat(e)),(0,l.tI)(r)?r.then(e=>{e[i]=o}).catch(e=>{}):r?r[i]=o:(this.records[n]="Array"===this.addRecordRule?[]:{},this.records[n][i]=o)}}}cacheBeforeChangedRecord(e,t){var i;if(!this.beforeChangedRecordsMap.has(e.toString())){let t=this.getOriginalRecord(e);this.beforeChangedRecordsMap.set(e.toString(),null!=(i=(0,u.Z)(t,void 0,["vtable_gantt_linkedFrom","vtable_gantt_linkedTo"]))?i:{})}}setRecord(e,t){var i,r;let n=!0;if((null==(r=null==(i=this.dataConfig)?void 0:i.filterRules)?void 0:r.length)>=1&&(this.filterRecord(e)?"tree"===this.rowHierarchyType&&e.children&&(e.filteredChildren=this.filteredChildren(e.children)):n=!1),n&&Array.isArray(this.records)){let i=this.getIndexKey(t);Array.isArray(i)||this.records.splice(i,1,e)}}addRecord(e,t){var i;if(Array.isArray(this.records)){this.records.splice(t,0,e),this.adjustBeforeChangedRecordsMap(t,1),this.currentIndexedData.push(this.currentIndexedData.length),this._sourceLength+=1;for(let t=0;t<this.fieldAggregators.length;t++)this.fieldAggregators[t].push(e);if("tree"===this.rowHierarchyType&&this.initTreeHierarchyState(),this.userPagination){this.pagination.totalCount=this._sourceLength;let{perPageCount:e,currentPage:i}=this.pagination;t<e*(i||0)+e&&this.updatePagerData()}else this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength,this.updatePagerData();(null==(i=this.dataSourceObj)?void 0:i.added)&&this.dataSourceObj.added(t,1)}}addRecords(e,t){var i;if(Array.isArray(this.records)){if(Array.isArray(e)){this.records.splice(t,0,...e),this.adjustBeforeChangedRecordsMap(t,e.length);for(let t=0;t<e.length;t++)this.currentIndexedData.push(this.currentIndexedData.length);this._sourceLength+=e.length;for(let t=0;t<this.fieldAggregators.length;t++)for(let i=0;i<e.length;i++)this.fieldAggregators[t].push(e[i])}if(this.userPagination){this.pagination.totalCount=this._sourceLength;let{perPageCount:e,currentPage:i}=this.pagination;t<e*(i||0)+e&&this.updatePagerData()}else this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength,this.updatePagerData();(null==(i=this.dataSourceObj)?void 0:i.added)&&this.dataSourceObj.added(t,e.length)}}addRecordForSorted(e){Array.isArray(this.records)&&(this.beforeChangedRecordsMap.clear(),this.records.push(e),this.currentIndexedData.push(this.currentIndexedData.length),this._sourceLength+=1,this.sortedIndexMap.clear(),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength))}addRecordsForSorted(e){if(Array.isArray(this.records)){if(this.beforeChangedRecordsMap.clear(),Array.isArray(e)){this.records.push(...e);for(let t=0;t<e.length;t++)this.currentIndexedData.push(this.currentIndexedData.length);this._sourceLength+=e.length,this.sortedIndexMap.clear()}this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength)}}adjustBeforeChangedRecordsMap(e,t,i="add"){for(let r=this.beforeChangedRecordsMap.size-1;r>=e;r--){let e=this.beforeChangedRecordsMap.get(r.toString());this.beforeChangedRecordsMap.delete(r.toString()),this.beforeChangedRecordsMap.set((r+("add"===i?t:-t)).toString(),e)}}deleteRecords(e){var t;if(Array.isArray(this.records)){let i=[],r=e.sort((e,t)=>t-e);for(let e=0;e<r.length;e++){let t=r[e];if(t>=this._sourceLength||t<0)continue;this.adjustBeforeChangedRecordsMap(t,1,"delete"),i.push(t);let n=this.records[t];for(let e=0;e<this.fieldAggregators.length;e++)this.fieldAggregators[e].deleteRecord(n);this.records.splice(t,1),this.currentIndexedData.pop(),this._sourceLength-=1}return this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength),this.updatePagerData(),(null==(t=this.dataSourceObj)?void 0:t.deleted)&&this.dataSourceObj.deleted(i),i}return[]}deleteRecordsForSorted(e){if(Array.isArray(this.records)){let t=e.sort((e,t)=>t-e);for(let e=0;e<t.length;e++){let i=t[e];if(i>=this._sourceLength||i<0)continue;let r=this.currentIndexedData[i];this.records.splice(r,1),this._sourceLength-=1}this.sortedIndexMap.clear(),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength),this.beforeChangedRecordsMap.clear()}}updateRecords(e,t){let i=[];for(let r=0;r<t.length;r++){let n=t[r];if(Array.isArray(n))this.beforeChangedRecordsMap.delete(n.toString()),i.push(n),n.slice(0,-1).reduce((e,t)=>(void 0===e[t]&&(e[t]={}),e[t].children),this.records)[n[n.length-1]]=e[r];else{if(n>=this._sourceLength||n<0)continue;this.beforeChangedRecordsMap.delete(n.toString()),i.push(n);for(let t=0;t<this.fieldAggregators.length;t++)this.fieldAggregators[t].updateRecord(this.records[n],e[r]);this.records[n]=e[r]}}return this.userPagination&&this.updatePagerData(),i}updateRecordsForSorted(e,t){let i=[];for(let r=0;r<t.length;r++){let n=t[r];if(n>=this._sourceLength||n<0)continue;let l=this.currentIndexedData[n];if("number"!=typeof l)return;this.beforeChangedRecordsMap.delete(l.toString()),i.push(n),this.records[l]=e[r]}this.sortedIndexMap.clear()}sort(e){e=(Array.isArray(e)?e:[e]).filter(e=>{let t=this.columns.find(t=>t.field===e.field);return!1!==(null==t?void 0:t.sort)&&"normal"!==e.order}),this.lastSortStates=e;let t=e.map(e=>this.sortedIndexMap.get(null==e?void 0:e.field)||{asc:[],desc:[],normal:[]}),i=null;if(t.length>0&&(i=e.reduce((e,i,r)=>{var n;let l=null==(n=t[r])?void 0:n[i.order];return l&&l.length>0?l:e},null))&&i.length>0)return this.currentIndexedData=i,this.updatePagerData(),void this.fireListeners(g.CHANGE_ORDER,null);let r=Array.from({length:this._sourceLength},(e,t)=>t);if(r.sort((t,i)=>{let r=this.getOriginalRecord(t),n=this.getOriginalRecord(i),l=null==r||"object"==typeof r&&0===Object.keys(r).length,o=null==n||"object"==typeof n&&0===Object.keys(n).length;return e.reduce((e,r)=>{if(0!==e)return e;if("asc"===r.order||"desc"===r.order){if(l&&!o)return 1;if(!l&&o)return -1;if(l&&o)return t-i}else if(l||o)return t-i;return(r.orderFn||("desc"!==r.order?(e,t)=>e===t?0:e>t?1:-1:(e,t)=>e===t?0:e<t?1:-1))(this.getOriginalField(t,r.field),this.getOriginalField(i,r.field),r.order)},0)}),this.currentIndexedData=r,this.hierarchyExpandLevel&&"tree"===this.rowHierarchyType){let e=r.length;for(let t=0;t<e;t++){let i=this.getOriginalRecord(r[t]),n=this.pushChildrenNode(r[t],i.hierarchyState,this.getOriginalRecord(r[t]));e+=n,t+=n}}if(!t.length){t=e.map(()=>({asc:[],desc:[],normal:[]}));for(let i=0;i<e.length;i++)this.sortedIndexMap.set(e[i].field,t[i])}e.forEach((e,i)=>{t[i][e.order]=r.slice()}),this.updatePagerData(),this.fireListeners(g.CHANGE_ORDER,null)}setSortedIndexMap(e,t){this.sortedIndexMap.set(e,t)}clearFilteredChildren(e){var t,i;e.filteredChildren=void 0;for(let r=0;r<(null!=(i=null==(t=e.children)?void 0:t.length)?i:0);r++)this.clearFilteredChildren(e.children[r])}filterRecord(e){var t,i,r;let n=!0;for(let l=0;l<(null==(t=this.dataConfig.filterRules)?void 0:t.length);l++){let t=null==(i=this.dataConfig)?void 0:i.filterRules[l];if(t.filterKey){let i=e[t.filterKey];if(-1===t.filteredValues.indexOf(i)){n=!1;break}}else if(!(null==(r=t.filterFunc)?void 0:r.call(t,e))){n=!1;break}}return n}updateFilterRulesForSorted(e){var t,i,r;this.lastFilterRules=this.dataConfig.filterRules,this.dataConfig.filterRules=e,this._source=this.processRecords(null!=(i=null==(t=this.dataSourceObj)?void 0:t.records)?i:this.dataSourceObj),this._sourceLength=(null==(r=this._source)?void 0:r.length)||0,this.sortedIndexMap.clear(),this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t),"tree"===this.rowHierarchyType&&this.initTreeHierarchyState(),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength)}updateFilterRules(e,t){var i,r,n;this.lastFilterRules=this.dataConfig.filterRules,this.dataConfig.filterRules=e,this._source=this.processRecords(null!=(r=null==(i=this.dataSourceObj)?void 0:i.records)?r:this.dataSourceObj),t&&t(this._source),this._sourceLength=(null==(n=this._source)?void 0:n.length)||0,this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t),this.userPagination||(this.pagination.perPageCount=this._sourceLength,this.pagination.totalCount=this._sourceLength,"tree"===this.rowHierarchyType&&this.initTreeHierarchyState()),this.updatePagerData()}clearSortedIndexMap(){this.lastSortStates&&this.lastSortStates.length>0&&this.sortedIndexMap.forEach((e,t)=>{this.lastSortStates.some(e=>e.field===t)?this.lastSortStates.forEach(t=>{"asc"===t.order?(e.desc=[],e.normal=[]):"desc"===t.order?(e.asc=[],e.normal=[]):(e.asc=[],e.desc=[])}):this.sortedIndexMap.delete(t)})}get sourceLength(){return this._sourceLength}set sourceLength(e){this._sourceLength!==e&&(this._sourceLength=e,this.fireListeners(g.SOURCE_LENGTH_UPDATE,this._sourceLength))}get length(){return this.currentPagerIndexedData.length}get dataSource(){return this}get currentPagerIndexedData(){return this._currentPagerIndexedData.length>0?this._currentPagerIndexedData:[]}release(){var e;null==(e=super.release)||e.call(this),this.lastFilterRules=null,this.clearSortedMap(),this.clearCurrentIndexedData(),this.currentPagerIndexedData.length=0}clearSortedMap(){this.currentIndexedData&&(this.currentIndexedData.length=0),this.currentIndexedData=null,this.sortedIndexMap.forEach(e=>{e.asc&&(e.asc.length=0),e.desc&&(e.desc.length=0)}),this.sortedIndexMap.clear()}clearCurrentIndexedData(){this.currentIndexedData=null,this.currentPagerIndexedData.length=0}getOriginalRecord(e){return f(this.dataSourceObj.records?Array.isArray(e)?v(this.records,e):this.records[e]:this._get(e),t=>{this.recordPromiseCallBack(e,t)})}getRawRecord(e){var t,i;return(null==(t=this.beforeChangedRecordsMap)?void 0:t.has(e.toString()))?null==(i=this.beforeChangedRecordsMap)?void 0:i.get(e.toString()):f(this.dataSourceObj.records?Array.isArray(e)?v(this.records,e):this.records[e]:this._get(e),t=>{this.recordPromiseCallBack(e,t)})}getOriginalField(e,t,i,r,n){if(null!==t)return m(this.getOriginalRecord(e),t,i,r,n,i=>{this.fieldPromiseCallBack(e,t,i)})}getRawFieldData(e,t,i,r,n){if(null!==t)return m(this.getRawRecord(e),t,i,r,n,i=>{this.fieldPromiseCallBack(e,t,i)})}hasOriginalField(e,t){if(null===t)return!1;if("function"==typeof t)return!0;let i=this.getOriginalRecord(e);return!!(i&&t in i)}fieldPromiseCallBack(e,t,i){}recordPromiseCallBack(e,t){}canChangeOrder(e,t){var i;if(null==(i=this.dataSourceObj)?void 0:i.canChangeOrder)return this.dataSourceObj.canChangeOrder(e,t);if(this.hasHierarchyStateExpand){let i=this.currentPagerIndexedData[e],r=this.currentPagerIndexedData[t];if(i=Array.isArray(i)?[...i]:[i],r=Array.isArray(r)?[...r]:[r],t>e&&r.length>i.length){let e=this.currentPagerIndexedData[t+1];(e=Array.isArray(e)?[...e]:[e]).length<r.length&&r.splice(r.length-1,1)}if(i.length===r.length){for(let e=0;e<=i.length-2;e++)if(i[e]!==r[e])return!1;return!0}return!1}return!0}changeOrder(e,t){var i,r,n;if(null==(i=this.dataSourceObj)?void 0:i.changeOrder)this.dataSourceObj.changeOrder(e,t);else if(!(null==(r=this.lastSortStates)?void 0:r.some(e=>"asc"===e.order||"desc"===e.order))&&this.canChangeOrder(e,t))if(this.hasHierarchyStateExpand){let i,r,l=this.currentPagerIndexedData[e],o=this.currentPagerIndexedData[t];if(l=Array.isArray(l)?[...l]:[l],o=Array.isArray(o)?[...o]:[o],l.length>1||o.length>1){if(t>e&&o.length>l.length){let e=this.currentPagerIndexedData[t+1];(e=Array.isArray(e)?[...e]:[e]).length<o.length&&o.splice(o.length-1,1)}if(i=l.splice(l.length-1,1)[0],r=o.splice(o.length-1,1)[0],l.length>=1){let e=this.getOriginalRecord(l);if(e){let t=e.filteredChildren?e.filteredChildren.splice(i,1):e.children.splice(i,1);t.unshift(r,0),Array.prototype.splice.apply(null!=(n=e.filteredChildren)?n:e.children,t)}}else{let e=this.records.splice(i,1);e.unshift(r,0),Array.prototype.splice.apply(this.records,e)}}else this.exchangeRecordData(e,t);this.restoreTreeHierarchyState(),this.updatePagerData()}else this.exchangeRecordData(e,t)}exchangeRecordData(e,t){let i=this.getRecordIndexPaths(e),r=this.getRecordIndexPaths(t),n=this.records.splice(i,1);n.unshift(r,0),Array.prototype.splice.apply(this.records,n)}restoreTreeHierarchyState(){var e,t;if(this.hierarchyExpandLevel){for(let t=0;t<this._sourceLength;t++){let i=this.getOriginalRecord(t);i&&(null!=(e=i.filteredChildren)?e:i.children)&&!i.hierarchyState&&(i.hierarchyState=r.g.collapse)}this.currentIndexedData=Array.from({length:this._sourceLength},(e,t)=>t);let i=this._sourceLength;for(let e=0;e<i;e++){let n=this.currentIndexedData[e],l=this.getOriginalRecord(n);if(!l)continue;let o=null!=(t=l.filteredChildren)?t:l.children;if((null==o?void 0:o.length)>0&&l.hierarchyState===r.g.expand){this.hasHierarchyStateExpand=!0;let t=this.restoreChildrenNodeHierarchy(n,l);e+=t,i+=t}else!0!==l.children||l.hierarchyState||(l.hierarchyState=r.g.collapse)}}}restoreChildrenNodeHierarchy(e,t){var i,n;let l=0,o=null!=(i=t.filteredChildren)?i:t.children,a=null!=(n=null==o?void 0:o.length)?n:0;for(let i=0;i<a;i++){t.hierarchyState===r.g.expand&&(l+=1);let n=o[i],a=Array.isArray(e)?e.concat(i):[e,i];t.hierarchyState===r.g.expand&&this.currentIndexedData.splice(this.currentIndexedData.indexOf(e)+l,0,a),l+=this.restoreChildrenNodeHierarchy(a,n)}return l}_setNodeStateRecursive(e,t){var i;if(!e)return;let r=null!=(i=e.filteredChildren)?i:e.children;if(r&&(Array.isArray(r)?r.length>0:!0===r)&&(e.hierarchyState=t),r&&Array.isArray(r))for(let e of r)this._setNodeStateRecursive(e,t)}expandAllNodes(){if(Array.isArray(this._source)){for(let e of this._source)this._setNodeStateRecursive(e,r.g.expand);this.hasHierarchyStateExpand=!0,this.clearSortedIndexMap(),this.restoreTreeHierarchyState(),this.lastSortStates&&this.lastSortStates.length>0?this.sort(this.lastSortStates):this.updatePagerData()}}collapseAllNodes(){if(Array.isArray(this._source)){for(let e of this._source)this._setNodeStateRecursive(e,r.g.collapse);this.clearSortedIndexMap(),this.restoreTreeHierarchyState(),this.lastSortStates&&this.lastSortStates.length>0?this.sort(this.lastSortStates):this.updatePagerData()}}}function v(e,t){var i;let r=e;for(let e=0;e<t.length;e++){let n=t[e];if(!r[n])return;let l=null!=(i=(r=r[n]).filteredChildren)?i:null==r?void 0:r.children;l&&e+1<t.length&&(r=l)}return r}function _(e,t){return e.sort((e,i)=>{var r,n;(0,c.Z)(e)&&(e=[e]),(0,c.Z)(i)&&(i=[i]);let l=Math.max(e.length,i.length);for(let o=0;o<l;o++){let l=null!=(r=e[o])?r:-1,a=null!=(n=i[o])?n:-1;if(l!==a)return 1===t?l-a:a-l}return 0})}y.EMPTY=new y({get(){},length:0})},23010:function(e,t,i){i.d(t,{q:()=>s});var r=i(64776),n=i(37098),l=i(61789),o=i(51130);function a(e,t){let i="";for(let r=0;r<e.length;r++)i+=e[r],r!==e.length-1&&(i+=t);return i}class s{constructor(e,t,i,r,n,l,o,a,s,h,d,u,c,p){var g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K,X,Y,q;this.tree={},this.changedTree={},this.colFlatKeys={},this.rowFlatKeys={},this.colKeys=[],this.rowKeys=[],this.colKeys_normal=[],this.rowKeys_normal=[],this.rowOrder="key_a_to_z",this.colOrder="key_a_to_z",this.sorted=!1,this.indicatorStatistics=[],this.stringJoinChar="\0",this.rowsIsTotal=[],this.colsIsTotal=[],this.collectedValues={},this.cacheCollectedValues={},this.totalRecordsTree={},this.registerAggregators(),this.dataConfig=e,this.filterRules=null==(g=this.dataConfig)?void 0:g.filterRules,this.rowHierarchyType=null!=a?a:"grid",this.columnHierarchyType=null!=s?s:"grid",this.sortRules=null==(f=this.dataConfig)?void 0:f.sortRules,this.aggregationRules=null==(m=this.dataConfig)?void 0:m.aggregationRules,this.derivedFieldRules=null==(b=this.dataConfig)?void 0:b.derivedFieldRules,this.mappingRules=null==(y=this.dataConfig)?void 0:y.mappingRules,this.calculatedFieldRules=null==(v=this.dataConfig)?void 0:v.calculatedFieldRules,this.calculatedFiledKeys=null!=(C=null==(_=this.calculatedFieldRules)?void 0:_.map(e=>e.key))?C:[],this.calculatedFieldDependIndicatorKeys=null!=(w=null==(x=this.calculatedFieldRules)?void 0:x.reduce((e,t)=>{for(let i=0;i<t.dependIndicatorKeys.length;i++)-1===e.indexOf(t.dependIndicatorKeys[i])&&e.push(t.dependIndicatorKeys[i]);return e},[]))?w:[],this.totals=null==(S=this.dataConfig)?void 0:S.totals,this.rows=t,this.columns=i,this.indicatorKeys=r,this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys=[...r];for(let e=0;e<this.calculatedFieldDependIndicatorKeys.length;e++)-1===this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys.indexOf(this.calculatedFieldDependIndicatorKeys[e])&&this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys.push(this.calculatedFieldDependIndicatorKeys[e]);if(this.indicatorsAsCol=l,this.indicators=n,this.customColTree=h,this.customRowTree=d,this.hasExtensionRowTree=c,this.parseCustomTreeToMatchRecords=p,this.parseCustomTreeToMatchRecords&&(this.customColTreeDimensionPaths=this.customTreeToDimensionPathArr(this.customColTree,"col"),this.hasExtensionRowTree||(this.customRowTreeDimensionPaths=this.customTreeToDimensionPathArr(this.customRowTree,"row"))),this.colGrandTotalLabel=null!=(M=null==(k=null==(A=this.totals)?void 0:A.column)?void 0:k.grandTotalLabel)?M:"",this.colSubTotalLabel=null!=(E=null==(R=null==(T=this.totals)?void 0:T.column)?void 0:R.subTotalLabel)?E:"",this.rowGrandTotalLabel=null!=(I=null==(B=null==(P=this.totals)?void 0:P.row)?void 0:B.grandTotalLabel)?I:"",this.rowSubTotalLabel=null!=(H=null==(F=null==(L=this.totals)?void 0:L.row)?void 0:F.subTotalLabel)?H:"",this.collectValuesBy=null==(O=this.dataConfig)?void 0:O.collectValuesBy,this.needSplitPositiveAndNegative=null!=u&&u,this.rowsIsTotal=Array(null!=(z=null==(D=this.rows)?void 0:D.length)?z:0).fill(!1),this.colsIsTotal=Array(null!=(Z=null==(W=this.columns)?void 0:W.length)?Z:0).fill(!1),(null==(N=this.totals)?void 0:N.row)&&!1!==this.totals.row.showSubTotals&&this.totals.row.subTotalsDimensions)for(let e=0,t=null!=(V=null==(G=null==(j=null==($=this.totals)?void 0:$.row)?void 0:j.subTotalsDimensions)?void 0:G.length)?V:0;e<t;e++){let t=this.totals.row.subTotalsDimensions[e],i=this.rows.indexOf(t);this.rowsIsTotal[i]=!0}if((null==(U=this.totals)?void 0:U.column)&&!1!==this.totals.column.showSubTotals&&this.totals.column.subTotalsDimensions)for(let e=0,t=null!=(q=null==(Y=null==(X=null==(K=this.totals)?void 0:K.column)?void 0:X.subTotalsDimensions)?void 0:Y.length)?q:0;e<t;e++){let t=this.totals.column.subTotalsDimensions[e],i=this.columns.indexOf(t);this.colsIsTotal[i]=!0}this.setRecords(o)}setRecords(e){var t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x;this.records=e,this.collectedValues={},this.cacheCollectedValues={},this.totalRecordsTree={},this.tree={},this.colFlatKeys={},this.rowFlatKeys={},this.colKeys=[],this.rowKeys=[],this.rowsHasValue=[],this.columnsHasValue=[],this.sorted=!1,e&&(this.records=e,"undefined"!=typeof window&&window.performance.now(),this.processRecords(),this.processCollectedValuesWithSumBy(),this.generateCollectedValuesSortRule(),this.processCollectedValuesWithSortBy(),"undefined"!=typeof window&&window.performance.now(),"undefined"!=typeof window&&window.performance.now(),this.totalStatistics(),"undefined"!=typeof window&&window.performance.now(),this.rowKeys_normal=this.rowKeys.slice(),this.colKeys_normal=this.colKeys.slice(),"undefined"!=typeof window&&window.performance.now(),this.sortKeys(),"undefined"!=typeof window&&window.performance.now(),"undefined"!=typeof window&&window.performance.now(),this.customRowTree?this.rowHeaderTree=this.customRowTree:"tree"===this.rowHierarchyType?this.rowHeaderTree=this.ArrToTree1(this.rowKeys,this.rows.filter((e,t)=>this.rowsHasValue[t]),this.indicatorsAsCol?void 0:this.indicators,(null==(i=null==(t=this.totals)?void 0:t.row)?void 0:i.showGrandTotals)||!this.indicatorsAsCol&&0===this.columns.length||this.indicatorsAsCol&&0===this.rows.length,this.rowGrandTotalLabel,null!=(l=null==(n=null==(r=this.totals)?void 0:r.row)?void 0:n.showGrandTotalsOnTop)&&l):this.rowHeaderTree=this.ArrToTree(this.rowKeys,this.rows.filter((e,t)=>this.rowsHasValue[t]),this.indicatorsAsCol?void 0:this.indicators,this.rowsIsTotal,(null==(a=null==(o=this.totals)?void 0:o.row)?void 0:a.showGrandTotals)||this.indicatorsAsCol&&0===this.rows.length,this.rowGrandTotalLabel,this.rowSubTotalLabel,null!=(d=null==(h=null==(s=this.totals)?void 0:s.row)?void 0:h.showGrandTotalsOnTop)&&d,null!=(p=null==(c=null==(u=this.totals)?void 0:u.row)?void 0:c.showSubTotalsOnTop)&&p),this.customColTree?this.colHeaderTree=this.customColTree:this.colHeaderTree=this.ArrToTree(this.colKeys,this.columns.filter((e,t)=>this.columnsHasValue[t]),this.indicatorsAsCol?this.indicators:void 0,this.colsIsTotal,(null==(f=null==(g=this.totals)?void 0:g.column)?void 0:f.showGrandTotals)||!this.indicatorsAsCol&&0===this.columns.length,this.colGrandTotalLabel,this.colSubTotalLabel,null!=(y=null==(b=null==(m=this.totals)?void 0:m.column)?void 0:b.showGrandTotalsOnLeft)&&y,null!=(C=null==(_=null==(v=this.totals)?void 0:v.column)?void 0:_.showSubTotalsOnLeft)&&C),"undefined"!=typeof window&&window.performance.now(),(null==(x=this.dataConfig)?void 0:x.isPivotChart)&&this.cacheDeminsionCollectedValues())}registerAggregator(e,t){l.YJ[e]=t}registerAggregators(){this.registerAggregator(n.E.RECORD,l.hT),this.registerAggregator(n.E.SUM,l.__),this.registerAggregator(n.E.COUNT,l.ZP),this.registerAggregator(n.E.MAX,l.Fn),this.registerAggregator(n.E.MIN,l.NF),this.registerAggregator(n.E.AVG,l.ky),this.registerAggregator(n.E.NONE,l.ld),this.registerAggregator(n.E.RECALCULATE,l.U4),this.registerAggregator(n.E.CUSTOM,l.Js)}processCollectedValuesWithSumBy(){var e,t,i,r,n,l;for(let o in this.collectedValues)if(null==(t=null==(e=this.collectValuesBy)?void 0:e[o])?void 0:t.sumBy)for(let e in this.collectedValues[o]){let t,a,s;"sum"===(null==(i=this.collectValuesBy[o])?void 0:i.extendRange)?(t=Object.values(this.collectedValues[o][e]).reduce((e,t)=>e+t.value(),0),t+=Math.round(t/20)):(t=Object.values(this.collectedValues[o][e]).reduce((e,t)=>t.value()>e?t.value():e,Number.MIN_SAFE_INTEGER),"max"===(null==(r=this.collectValuesBy[o])?void 0:r.extendRange)?t+=Math.round(t/20):"number"==typeof(null==(n=this.collectValuesBy[o])?void 0:n.extendRange)&&(t=Math.max(t,null==(l=this.collectValuesBy[o])?void 0:l.extendRange)));let h=Object.values(this.collectedValues[o][e]).reduce((e,t)=>t.value()<e?t.value():e,Number.MAX_SAFE_INTEGER);this.needSplitPositiveAndNegative&&(a=Object.values(this.collectedValues[o][e]).reduce((e,t)=>t.positiveValue()>e?t.positiveValue():e,Number.MIN_SAFE_INTEGER),s=Object.values(this.collectedValues[o][e]).reduce((e,t)=>t.negativeValue()<e?t.negativeValue():e,Number.MAX_SAFE_INTEGER)),this.collectedValues[o][e]={},this.collectedValues[o][e].max=t,this.collectedValues[o][e].min=h,this.needSplitPositiveAndNegative&&(this.collectedValues[o][e].positiveMax=a,this.collectedValues[o][e].negativeMin=s)}}processCollectedValuesWithSortBy(){var e,t;let i=this;for(let r in this.collectedValues)if(null==(t=null==(e=this.collectValuesBy)?void 0:e[r])?void 0:t.sortBy)for(let e in this.collectedValues[r])this.collectedValues[r][e]=this.collectedValues[r][e].sort((e,t)=>{var n,l,o,a;return(null!=(l=null==(n=i.collectValuesBy[r].sortBy)?void 0:n.indexOf(e))?l:-1)-(null!=(a=null==(o=i.collectValuesBy[r].sortBy)?void 0:o.indexOf(t))?a:-1)})}generateCollectedValuesSortRule(){for(let e in this.collectedValues)if(this.collectValuesBy&&this.collectValuesBy[e]&&!this.collectValuesBy[e].sortBy){let t=[];for(let i in this.collectedValues[e])Array.isArray(this.collectedValues[e][i])&&(t.push(...this.collectedValues[e][i]),t=Array.from(new Set(t)));t.length>0&&(this.collectValuesBy[e].sortBy=t)}}processRecords(){var e,t;let i=!1;if((null!=(t=null==(e=this.filterRules)?void 0:e.length)?t:0)>=1&&(i=!0),Array.isArray(this.records)){this.filteredRecords||(this.filteredRecords=[]);for(let e=0,t=this.records.length;e<t;e++){let t=this.records[e];i&&!this.filterRecord(t)||(this.filteredRecords.push(t),t&&this.processRecord(t))}}else for(let e in this.filteredRecords||(this.filteredRecords={}),this.records)for(let t=0,r=this.records[e].length;t<r;t++){let r=this.records[e][t];i&&!this.filterRecord(r)||(this.filteredRecords[e]||(this.filteredRecords[e]=[]),this.filteredRecords[e].push(r),this.processRecord(r,e))}this.rowFlatKeys={},this.colFlatKeys={}}filterRecord(e){var t,i;let r=!0;if(this.filterRules)for(let n=0;n<this.filterRules.length;n++){let l=this.filterRules[n];if(l.filterKey){let i=e[l.filterKey];if(-1===(null==(t=l.filteredValues)?void 0:t.indexOf(i))){r=!1;break}}else if(!(null==(i=l.filterFunc)?void 0:i.call(l,e))){r=!1;break}}return r}processRecord(e,t){var i,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K,X,Y,q,J,Q,ee,et,ei,er,en,el,eo,ea,es,eh,ed,eu,ec,ep,eg,ef,em,eb,ey;for(let t in null==(i=this.derivedFieldRules)||i.forEach((t,i)=>{t.fieldName&&t.derivedFunc&&(e[t.fieldName]=t.derivedFunc(e))}),this.collectValuesBy)if((0,r.Z)(e[t])){this.collectedValues[t]||(this.collectedValues[t]={});let i=this.collectValuesBy[t].by.map(t=>e[t]).join(this.stringJoinChar);if(this.collectedValues[t][i]||(this.collectValuesBy[t].sumBy?this.collectedValues[t][i]={}:this.collectValuesBy[t].range?this.collectedValues[t][i]={min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER}:this.collectedValues[t][i]=[]),this.collectValuesBy[t].sumBy){let r=null==(s=this.collectValuesBy[t].sumBy)?void 0:s.map(t=>e[t]).join(this.stringJoinChar);this.collectedValues[t][i][r]||(this.collectedValues[t][i][r]=new l.YJ[n.E.SUM]({key:t,field:t,isRecord:void 0,needSplitPositiveAndNegative:this.needSplitPositiveAndNegative})),this.collectedValues[t][i][r].push(e)}else if(this.collectValuesBy[t].range){let r=this.collectedValues[t][i],n=Math.max(e[t],r.max),l=Math.min(e[t],r.min);if(this.collectValuesBy[t].considerFields)for(let i of this.collectValuesBy[t].considerFields)e[i]&&("number"==typeof e[i]?(n=Math.max(e[i],n),l=Math.min(e[i],l)):Array.isArray(e[i])&&(n=Math.max(...e[i],n),l=Math.min(...e[i],l)));isNaN(n)||(r.max=n,r.min=l)}else{let r=this.collectedValues[t][i];-1===r.indexOf(e[t])&&r.push(e[t])}}let ev=!1,e_=[],eC=[];if(!this.parseCustomTreeToMatchRecords||(null==(h=this.dataConfig)?void 0:h.isPivotChart)||!(null==(d=this.customRowTree)?void 0:d.length)||t||this.hasExtensionRowTree){let i=[];eC.push({rowKey:i,indicatorKey:t});for(let t=0,r=this.rows.length;t<r;t++){let r=this.rows[t];if(r in e)this.rowsHasValue[t]=!0,i.push(e[r]);else if(r!==o.ek){if((null==(p=null==(c=null==(u=this.dataConfig)?void 0:u.totals)?void 0:c.row)?void 0:p.showGrandTotals)&&0===t&&!this.rows.find(t=>t in e)){i.push(this.rowGrandTotalLabel),ev=!0;break}if((null==(m=null==(f=null==(g=this.dataConfig)?void 0:g.totals)?void 0:f.row)?void 0:m.subTotalsDimensions)&&(null==(v=null==(y=null==(b=this.dataConfig)?void 0:b.totals)?void 0:y.row)?void 0:v.subTotalsDimensions.indexOf(this.rows[t-1]))>=0){"tree"!==this.rowHierarchyType&&i.push(this.rowSubTotalLabel),ev=!0;break}}}}else{let t=this.getFieldMatchRowDimensionPaths(e);if(t.length>0)for(let e=0,i=t.length;e<i;e++){let i,n=t[e],l=[];for(let e=0,t=n.length;e<t;e++)(0,r.Z)(n[e].indicatorKey)?i=n[e].indicatorKey:l.push(n[e].value);eC.push({rowKey:l,indicatorKey:i})}}if(!this.parseCustomTreeToMatchRecords||(null==(_=this.dataConfig)?void 0:_.isPivotChart)||!(null==(C=this.customColTree)?void 0:C.length)||t||this.hasExtensionRowTree){let i=[];e_.push({colKey:i,indicatorKey:t});for(let t=0,r=this.columns.length;t<r;t++){let r=this.columns[t];if(r in e)this.columnsHasValue[t]=!0,i.push(e[r]);else if(r!==o.ek){if((null==(S=null==(w=null==(x=this.dataConfig)?void 0:x.totals)?void 0:w.column)?void 0:S.showGrandTotals)&&0===t&&!this.columns.find(t=>t in e)){i.push(this.colGrandTotalLabel),ev=!0;break}if((null==(M=null==(k=null==(A=this.dataConfig)?void 0:A.totals)?void 0:k.column)?void 0:M.subTotalsDimensions)&&(null==(E=null==(R=null==(T=this.dataConfig)?void 0:T.totals)?void 0:R.column)?void 0:E.subTotalsDimensions.indexOf(this.columns[t-1]))>=0){i.push(this.colSubTotalLabel),ev=!0;break}}}}else{let t=this.getFieldMatchColDimensionPaths(e);if(t.length>0)for(let e=0,i=t.length;e<i;e++){let i,n=t[e],l=[];for(let e=0,t=n.length;e<t;e++)(0,r.Z)(n[e].indicatorKey)?i=n[e].indicatorKey:l.push(n[e].value);e_.push({colKey:l,indicatorKey:i})}}for(let i=0;i<eC.length;i++){let r,o=eC[i].rowKey;this.indicatorsAsCol||(r=eC[i].indicatorKey);for(let i=0;i<e_.length;i++){let s=e_[i].colKey;this.indicatorsAsCol&&(r=e_[i].indicatorKey);let h=a(o,this.stringJoinChar),d=a(s,this.stringJoinChar);if(ev){this.totalRecordsTree[h]||(this.totalRecordsTree[h]={}),this.totalRecordsTree[h][d]||(this.totalRecordsTree[h][d]=[]);let t=this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys;for(let i=0;i<t.length;i++)if(this.calculatedFiledKeys.indexOf(t[i])>=0){let r=null==(P=this.calculatedFieldRules)?void 0:P.find(e=>e.key===t[i]);(null==(I=null==(B=this.totalRecordsTree[h])?void 0:B[d])?void 0:I[i])||(this.totalRecordsTree[h][d][i]=new l.YJ[n.E.RECALCULATE]({key:t[i],field:t[i],isRecord:!0,formatFun:null==(F=null==(L=this.indicators)?void 0:L.find(e=>"string"!=typeof e&&e.indicatorKey===t[i]))?void 0:F.format,calculateFun:null==r?void 0:r.calculateFun,dependAggregators:this.totalRecordsTree[h][d],dependIndicatorKeys:null==r?void 0:r.dependIndicatorKeys})),t[i]in e&&(null==(O=null==(H=this.totalRecordsTree[h])?void 0:H[d])||O[i].push(e))}else{let r=this.getAggregatorRule(t[i]);(null==(z=null==(D=this.totalRecordsTree[h])?void 0:D[d])?void 0:z[i])||(this.totalRecordsTree[h][d][i]=new l.YJ[null!=(W=null==r?void 0:r.aggregationType)?W:n.E.SUM]({key:t[i],field:null!=(Z=null==r?void 0:r.field)?Z:t[i],aggregationFun:null==r?void 0:r.aggregationFun,formatFun:null!=(N=null==r?void 0:r.formatFun)?N:null==(j=null==($=this.indicators)?void 0:$.find(e=>"string"!=typeof e&&e.indicatorKey===t[i]))?void 0:j.format})),t[i]in e&&(null==(V=null==(G=this.totalRecordsTree[h])?void 0:G[d])||V[i].push(e))}return}0!==o.length&&(this.rowFlatKeys[h]||(this.rowKeys.push(o),this.rowFlatKeys[h]=1)),0!==s.length&&(this.colFlatKeys[d]||(this.colKeys.push(s),this.colFlatKeys[d]=1)),this.tree[h]||(this.tree[h]={}),(null==(U=this.tree[h])?void 0:U[d])||(this.tree[h][d]=[]);let u=this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys;for(let i=0;i<u.length;i++)if(this.calculatedFiledKeys.indexOf(u[i])>=0){let t=null==(K=this.calculatedFieldRules)?void 0:K.find(e=>e.key===u[i]);(null==(Y=null==(X=this.tree[h])?void 0:X[d])?void 0:Y[i])||(this.tree[h][d][i]=new l.YJ[n.E.RECALCULATE]({key:u[i],field:u[i],isRecord:!0,formatFun:null==(J=null==(q=this.indicators)?void 0:q.find(e=>"string"!=typeof e&&e.indicatorKey===u[i]))?void 0:J.format,calculateFun:null==t?void 0:t.calculateFun,dependAggregators:this.tree[h][d],dependIndicatorKeys:null==t?void 0:t.dependIndicatorKeys})),null==(ee=null==(Q=this.tree[h])?void 0:Q[d])||ee[i].push(e)}else{let o=this.getAggregatorRule(u[i]),a=!1;r?t===r?u[i]===r&&(a=!0):u[i]===r&&u[i]in e&&(a=!0):(null==o?void 0:o.field)?"string"==typeof(null==o?void 0:o.field)?(null==o?void 0:o.field)in e&&(a=!0):(null==o?void 0:o.field.find(t=>t in e))&&(a=!0):u[i]in e&&(a=!0),(null==(ei=null==(et=this.tree[h])?void 0:et[d])?void 0:ei[i])||!a||(this.tree[h][d][i]=new l.YJ[null!=(er=null==o?void 0:o.aggregationType)?er:n.E.SUM]({key:u[i],field:null!=(en=null==o?void 0:o.field)?en:u[i],aggregationFun:null==o?void 0:o.aggregationFun,formatFun:null!=(el=null==o?void 0:o.formatFun)?el:null==(ea=null==(eo=this.indicators)?void 0:eo.find(e=>"string"!=typeof e&&e.indicatorKey===u[i]))?void 0:ea.format})),a&&(null==(eh=null==(es=this.tree[h])?void 0:es[d])||eh[i].push(e))}if(this.mappingRules)for(let t=0;t<this.indicatorKeys.length;t++){if(!this.indicatorStatistics[t]){let e=this.getAggregatorRule(this.indicatorKeys[t]);this.indicatorStatistics[t]={max:new l.YJ[n.E.MAX]({key:this.indicatorKeys[t],field:this.indicatorKeys[t]}),min:new l.YJ[n.E.MIN]({key:this.indicatorKeys[t],field:this.indicatorKeys[t]}),total:new l.YJ[null!=(ed=null==e?void 0:e.aggregationType)?ed:n.E.SUM]({key:this.indicatorKeys[t],field:null!=(eu=null==e?void 0:e.field)?eu:this.indicatorKeys[t],aggregationFun:null==e?void 0:e.aggregationFun,formatFun:null!=(ec=null==e?void 0:e.formatFun)?ec:null==(eg=null==(ep=this.indicators)?void 0:ep.find(e=>"string"!=typeof e&&e.indicatorKey===this.indicatorKeys[t]))?void 0:eg.format})}}this.indicatorStatistics[t].max.push(null==(em=null==(ef=this.tree[h])?void 0:ef[d])?void 0:em[t].value()),this.indicatorStatistics[t].min.push(null==(ey=null==(eb=this.tree[h])?void 0:eb[d])?void 0:ey[t].value()),this.indicatorStatistics[t].total.push(e)}}}}updateSortRules(e){var t,i,r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C;this.sorted=!1,this.sortRules=e,this.sortKeys(),this.customRowTree||("tree"===this.rowHierarchyType?this.rowHeaderTree=this.ArrToTree1(this.rowKeys,this.rows.filter((e,t)=>this.rowsHasValue[t]),this.indicatorsAsCol?void 0:this.indicators,(null==(i=null==(t=this.totals)?void 0:t.row)?void 0:i.showGrandTotals)||!this.indicatorsAsCol&&0===this.columns.length||this.indicatorsAsCol&&0===this.rows.length,this.rowGrandTotalLabel,null!=(l=null==(n=null==(r=this.totals)?void 0:r.row)?void 0:n.showGrandTotalsOnTop)&&l):this.rowHeaderTree=this.ArrToTree(this.rowKeys,this.rows.filter((e,t)=>this.rowsHasValue[t]),this.indicatorsAsCol?void 0:this.indicators,this.rowsIsTotal,(null==(a=null==(o=this.totals)?void 0:o.row)?void 0:a.showGrandTotals)||this.indicatorsAsCol&&0===this.rows.length,this.rowGrandTotalLabel,this.rowSubTotalLabel,null!=(d=null==(h=null==(s=this.totals)?void 0:s.row)?void 0:h.showGrandTotalsOnTop)&&d,null!=(p=null==(c=null==(u=this.totals)?void 0:u.row)?void 0:c.showSubTotalsOnTop)&&p)),this.customColTree||(this.colHeaderTree=this.ArrToTree(this.colKeys,this.columns.filter((e,t)=>this.columnsHasValue[t]),this.indicatorsAsCol?this.indicators:void 0,this.colsIsTotal,(null==(f=null==(g=this.totals)?void 0:g.column)?void 0:f.showGrandTotals)||!this.indicatorsAsCol&&0===this.columns.length,this.colGrandTotalLabel,this.colSubTotalLabel,null!=(y=null==(b=null==(m=this.totals)?void 0:m.column)?void 0:b.showGrandTotalsOnLeft)&&y,null!=(C=null==(_=null==(v=this.totals)?void 0:v.column)?void 0:_.showSubTotalsOnLeft)&&C))}updateFilterRules(e,t=!1){var i,r;if(this.filterRules=e,this.filteredRecords=void 0,t)return this.setRecords(this.records);for(let e in this.tree)for(let t in this.tree[e])for(let r=0;r<this.tree[e][t].length;r++)null==(i=this.tree[e][t][r])||i.reset();this.collectedValues={},this.processRecords(),this.processCollectedValuesWithSumBy(),this.processCollectedValuesWithSortBy(),this.totalStatistics(),(null==(r=this.dataConfig)?void 0:r.isPivotChart)&&this.cacheDeminsionCollectedValues()}getAggregatorRule(e){var t;return null==(t=this.aggregationRules)?void 0:t.find((t,i)=>e===t.indicatorKey)}getAggregator(e=[],t=[],i,n=!0,l){var o,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S;let A,k,M,T,R=this.indicatorKeys.indexOf(i);if("row"===(null==l?void 0:l.position))A=e.length>=2?this.rows[e.length-2]:void 0;else{let t=e.length-1;A=t>=0&&t<this.rows.length?this.rows[t]:void 0}if("col"===(null==l?void 0:l.position))k=t.length>=2?this.columns[t.length-2]:void 0;else{let e=t.length-1;k=e>=0&&e<this.columns.length?this.columns[e]:void 0}"string"==typeof e?M=e:(l&&"row"!==l.position||e.map((t,n)=>{t!==i||(0,r.Z)(null==l?void 0:l.index)&&n!==l.index||e.splice(n,1)}),e.length<this.rows.length&&"grid-tree"===this.rowHierarchyType&&(e[0]===this.rowGrandTotalLabel||((null==(s=null==(o=this.totals)?void 0:o.row)?void 0:s.subTotalsDimensions)&&(null==(u=null==(d=null==(h=this.totals)?void 0:h.row)?void 0:d.subTotalsDimensions)?void 0:u.length)>=1&&this.totals.row.subTotalsDimensions.find(e=>e===A)||(null==(p=null==(c=this.totals)?void 0:c.row)?void 0:p.showSubTotalsOnTreeNode))&&e[e.length-1]!==this.rowSubTotalLabel&&e.push(this.rowSubTotalLabel)),M=a(e,this.stringJoinChar)),"string"==typeof t?T=t:(l&&"col"!==l.position||t.map((e,n)=>{e!==i||(0,r.Z)(null==l?void 0:l.index)&&n!==l.index||t.splice(n,1)}),t.length<this.columns.length&&"grid-tree"===this.columnHierarchyType&&(t[0]===this.colGrandTotalLabel||((null==(f=null==(g=this.totals)?void 0:g.column)?void 0:f.subTotalsDimensions)&&(null==(y=null==(b=null==(m=this.totals)?void 0:m.column)?void 0:b.subTotalsDimensions)?void 0:y.length)>=1&&this.totals.column.subTotalsDimensions.find(e=>e===k)||(null==(_=null==(v=this.totals)?void 0:v.column)?void 0:_.showSubTotalsOnTreeNode))&&t[t.length-1]!==this.colSubTotalLabel&&t.push(this.colSubTotalLabel)),T=a(t,this.stringJoinChar));let E=null==(x=null==(C=this.tree[M])?void 0:C[T])?void 0:x[R];if(n&&(0,r.Z)(null==(S=null==(w=this.changedTree[M])?void 0:w[T])?void 0:S[R])){let e=this.changedTree[M][T][R];return E?{value:()=>e,formatValue:E.formatValue,formatFun:E.formatFun,records:E.records,recalculate(){},push(){},deleteRecord(){},updateRecord(){},clearCacheValue(){},reset(){}}:{records:[],value:()=>e,push(){},deleteRecord(){},updateRecord(){},recalculate(){},formatValue:()=>e,clearCacheValue(){},reset(){}}}return E||{records:[],push(){},deleteRecord(){},updateRecord(){},recalculate(){},value:()=>null,clearCacheValue(){},reset(){}}}sortKeys(){if(this.colKeys=this.colKeys_normal.slice(),this.rowKeys=this.rowKeys_normal.slice(),!this.sorted){this.sorted=!0,this.rowKeys.sort(this.arrSort(this.rows,!0));let e=this.arrSort(this.columns,!1);this.colKeys.sort(e)}}arrSort(e,t){let i,r=this,n=(function(n){let l=[];for(let n=0,o=e.length;n<o;n++)if(i=e[n],r.sortRules)for(let e=0,o=r.sortRules.length;e<o;e++)r.sortRules[e].sortField===i&&l.push({field:i,fieldIndex:n,sortRule:r.sortRules[e],func:r.getSort(r.sortRules[e],t)});return l}).call(this);return function(i,l){var o,a,s,h;let d,u;for(let c=0;c<n.length;c++){if(null==(o=(u=n[c]).sortRule)?void 0:o.sortByIndicator){let n=i,o=l;u.fieldIndex<e.length-1&&(n=i.slice(0,u.fieldIndex+1),"grid"===r.rowHierarchyType&&t?n.push(r.rowSubTotalLabel):t||n.push(r.colSubTotalLabel),o=l.slice(0,u.fieldIndex+1),"grid"===r.rowHierarchyType&&t?o.push(r.rowSubTotalLabel):t||o.push(r.colSubTotalLabel)),d=u.func(n,o,null==(a=u.sortRule)?void 0:a.sortType)}else d=null==(s=u.func)?void 0:s.call(u,i[u.fieldIndex],l[u.fieldIndex],null==(h=u.sortRule)?void 0:h.sortType);if(0!==d)return d}return 0}}getSort(e,t){let i=this;return e.sortByIndicator?(r,n,o)=>{let a=function(t,r){return"grid"===i.rowHierarchyType&&t.length<i.rows.length&&t[t.length-1]!==i.rowSubTotalLabel&&t[t.length-1]!==i.rowGrandTotalLabel&&t.push(i.rowSubTotalLabel),r.length<i.columns.length&&r[r.length-1]!==i.colSubTotalLabel&&r[r.length-1]!==i.colGrandTotalLabel&&r.push(i.colSubTotalLabel),i.getAggregator(t,r,e.sortByIndicator).value()};return t?e.sortFunc?e.sortFunc(a(r,e.query),a(n,e.query),r,n,o):(0,l.SL)(a(r,e.query),a(n,e.query),o):e.sortFunc?e.sortFunc(a(e.query,r),a(e.query,n),r,n,o):(0,l.SL)(a(e.query,r),a(e.query,n),o)}:e.sortBy?(0,l.MR)(e.sortBy):e.sortFunc?e.sortFunc:e.sortType?l.y4:l.SL}totalStatistics(){var e,t,i,r,o,a,s,h,d,u,c,p,g,f,m,b,y,v;let _=this,C=(e,t)=>{var i,r,o,a,s,h,d,u,c,p,g,f,m,b,y,v,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K,X,Y,q,J,Q,ee,et,ei,er,en,el,eo,ea;if(null==(r=null==(i=this.totalRecordsTree)?void 0:i[e])?void 0:r[t])return this.tree[e]||(this.tree[e]={}),void(this.tree[e][t]=null==(a=null==(o=this.totalRecordsTree)?void 0:o[e])?void 0:a[t]);let es=t.split(this.stringJoinChar);if((null==(h=null==(s=_.totals)?void 0:s.column)?void 0:h.subTotalsDimensions)&&(null==(c=null==(u=null==(d=_.totals)?void 0:d.column)?void 0:u.subTotalsDimensions)?void 0:c.length)>0&&(!1!==(null==(g=null==(p=_.totals)?void 0:p.column)?void 0:g.showSubTotals)||(null==(m=null==(f=_.totals)?void 0:f.column)?void 0:m.showSubTotalsOnTreeNode))||(null==(y=null==(b=_.totals)?void 0:b.column)?void 0:y.showSubTotalsOnTreeNode)&&_.columns.length>0){let i=(null==(C=null==(v=_.totals)?void 0:v.column)?void 0:C.subTotalsDimensions)||[];(null==(w=null==(x=_.totals)?void 0:x.column)?void 0:w.showSubTotalsOnTreeNode)&&0===i.length&&(i=_.columns.map(e=>e));for(let r=0,o=i.length;r<o;r++){let o=i[r],a=_.columns.indexOf(o);if(a>=0){let i=es.slice(0,a+1);i.push(_.colSubTotalLabel);let r=i.join(this.stringJoinChar);if(null==(A=null==(S=this.totalRecordsTree)?void 0:S[e])?void 0:A[r])return void(this.tree[e][r]=null==(M=null==(k=this.totalRecordsTree)?void 0:k[e])?void 0:M[r]);this.tree[e][r]||(this.tree[e][r]=[]);let o=this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys;for(let i=0;i<o.length;i++)if(this.calculatedFiledKeys.indexOf(o[i])>=0){let a=null==(T=this.calculatedFieldRules)?void 0:T.find(e=>e.key===o[i]);(null==(E=null==(R=this.tree[e])?void 0:R[r])?void 0:E[i])||(this.tree[e][r][i]=new l.YJ[n.E.RECALCULATE]({key:o[i],field:o[i],isRecord:!0,formatFun:null==(B=null==(P=this.indicators)?void 0:P.find(e=>"string"!=typeof e&&e.indicatorKey===o[i]))?void 0:B.format,calculateFun:null==a?void 0:a.calculateFun,dependAggregators:this.tree[e][r],dependIndicatorKeys:null==a?void 0:a.dependIndicatorKeys})),r!==t&&this.tree[e][r][i].push(null==(L=null==(I=_.tree[e])?void 0:I[t])?void 0:L[i])}else{if(!this.tree[e][r][i]){let t=this.getAggregatorRule(o[i]);this.tree[e][r][i]=new l.YJ[null!=(F=null==t?void 0:t.aggregationType)?F:n.E.SUM]({key:o[i],field:null!=(H=null==t?void 0:t.field)?H:o[i],aggregationFun:null==t?void 0:t.aggregationFun,formatFun:null!=(O=null==t?void 0:t.formatFun)?O:null==(z=null==(D=this.indicators)?void 0:D.find(e=>"string"!=typeof e&&e.indicatorKey===o[i]))?void 0:z.format})}r!==t&&this.tree[e][r][i].push(null==(Z=null==(W=_.tree[e])?void 0:W[t])?void 0:Z[i])}}}}if((null==($=null==(N=_.totals)?void 0:N.column)?void 0:$.showGrandTotals)||0===this.rows.length){let i=_.colGrandTotalLabel;if(null==(G=null==(j=this.totalRecordsTree)?void 0:j[e])?void 0:G[i])return void(this.tree[e][i]=null==(U=null==(V=this.totalRecordsTree)?void 0:V[e])?void 0:U[i]);this.tree[e][i]||(this.tree[e][i]=[]);let r=this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys;for(let o=0;o<r.length;o++)if(this.calculatedFiledKeys.indexOf(r[o])>=0){let a=null==(K=this.calculatedFieldRules)?void 0:K.find(e=>e.key===r[o]);(null==(Y=null==(X=this.tree[e])?void 0:X[i])?void 0:Y[o])||(this.tree[e][i][o]=new l.YJ[n.E.RECALCULATE]({key:r[o],field:r[o],isRecord:!0,formatFun:null==(J=null==(q=this.indicators)?void 0:q.find(e=>"string"!=typeof e&&e.indicatorKey===r[o]))?void 0:J.format,calculateFun:null==a?void 0:a.calculateFun,dependAggregators:this.tree[e][i],dependIndicatorKeys:null==a?void 0:a.dependIndicatorKeys})),i!==t&&this.tree[e][i][o].push(null==(ee=null==(Q=_.tree[e])?void 0:Q[t])?void 0:ee[o])}else{if(!this.tree[e][i][o]){let t=this.getAggregatorRule(r[o]);this.tree[e][i][o]=new l.YJ[null!=(et=null==t?void 0:t.aggregationType)?et:n.E.SUM]({key:r[o],field:null!=(ei=null==t?void 0:t.field)?ei:r[o],formatFun:null!=(er=null==t?void 0:t.formatFun)?er:null==(el=null==(en=this.indicators)?void 0:en.find(e=>"string"!=typeof e&&e.indicatorKey===r[o]))?void 0:el.format})}i!==t&&this.tree[e][i][o].push(null==(ea=null==(eo=_.tree[e])?void 0:eo[t])?void 0:ea[o])}}};if((null==(t=null==(e=null==_?void 0:_.totals)?void 0:e.column)?void 0:t.subTotalsDimensions)&&(null==(o=null==(r=null==(i=null==_?void 0:_.totals)?void 0:i.column)?void 0:r.subTotalsDimensions)?void 0:o.length)>=1||(null==(s=null==(a=null==_?void 0:_.totals)?void 0:a.row)?void 0:s.subTotalsDimensions)&&(null==(u=null==(d=null==(h=null==_?void 0:_.totals)?void 0:h.row)?void 0:d.subTotalsDimensions)?void 0:u.length)>=1||(null==(p=null==(c=null==_?void 0:_.totals)?void 0:c.column)?void 0:p.showGrandTotals)||(null==(f=null==(g=null==_?void 0:_.totals)?void 0:g.row)?void 0:f.showGrandTotals)||(null==(b=null==(m=null==_?void 0:_.totals)?void 0:m.row)?void 0:b.showSubTotalsOnTreeNode)||(null==(v=null==(y=null==_?void 0:_.totals)?void 0:y.column)?void 0:v.showSubTotalsOnTreeNode)){let e=[];Object.keys(_.tree).forEach(t=>{let i=t.split(this.stringJoinChar);Object.keys(_.tree[t]).forEach(r=>{var o,a,s,h,d,u,c,p,g,f,m,b,y,v,x,w,S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j;if((null==(a=null==(o=_.totals)?void 0:o.row)?void 0:a.subTotalsDimensions)&&(null==(d=null==(h=null==(s=_.totals)?void 0:s.row)?void 0:h.subTotalsDimensions)?void 0:d.length)>0&&(!1!==(null==(c=null==(u=_.totals)?void 0:u.row)?void 0:c.showSubTotals)||(null==(g=null==(p=_.totals)?void 0:p.row)?void 0:g.showSubTotalsOnTreeNode))||(null==(m=null==(f=_.totals)?void 0:f.row)?void 0:m.showSubTotalsOnTreeNode)&&_.rows.length>0){let o=(null==(y=null==(b=_.totals)?void 0:b.row)?void 0:y.subTotalsDimensions)||[];(null==(x=null==(v=_.totals)?void 0:v.row)?void 0:x.showSubTotalsOnTreeNode)&&0===o.length&&(o=_.rows.map(e=>e));for(let a=0,s=o.length;a<s;a++){let s=o[a],h=_.rows.indexOf(s);if(h>=0&&h<_.rows.length-1){let o=i.slice(0,h+1);"tree"!==this.rowHierarchyType&&o.push(_.rowSubTotalLabel);let a=o.join(this.stringJoinChar);this.tree[a]||(this.tree[a]={},e.push(a)),this.tree[a][r]||(this.tree[a][r]=[]);let s=this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys;for(let e=0;e<s.length;e++){if(!this.tree[a][r][e])if(this.calculatedFiledKeys.indexOf(s[e])>=0){let t=null==(w=this.calculatedFieldRules)?void 0:w.find(t=>t.key===s[e]);this.tree[a][r][e]=new l.YJ[n.E.RECALCULATE]({key:s[e],field:s[e],isRecord:!0,formatFun:null==(A=null==(S=this.indicators)?void 0:S.find(t=>"string"!=typeof t&&t.indicatorKey===s[e]))?void 0:A.format,calculateFun:null==t?void 0:t.calculateFun,dependAggregators:this.tree[a][r],dependIndicatorKeys:null==t?void 0:t.dependIndicatorKeys})}else{let t=this.getAggregatorRule(s[e]);this.tree[a][r][e]=new l.YJ[null!=(k=null==t?void 0:t.aggregationType)?k:n.E.SUM]({key:s[e],field:null!=(M=null==t?void 0:t.field)?M:s[e],formatFun:null!=(T=null==t?void 0:t.formatFun)?T:null==(E=null==(R=this.indicators)?void 0:R.find(t=>"string"!=typeof t&&t.indicatorKey===s[e]))?void 0:E.format})}a!==t&&this.tree[a][r][e].push(null==(B=null==(P=_.tree[t])?void 0:P[r])?void 0:B[e])}}}}if((null==(L=null==(I=_.totals)?void 0:I.row)?void 0:L.showGrandTotals)||0===this.columns.length){let i=_.rowGrandTotalLabel;this.tree[i]||(this.tree[i]={},e.push(i)),this.tree[i][r]||(this.tree[i][r]=[]);let o=this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys;for(let e=0;e<o.length;e++){if(!this.tree[i][r][e])if(this.calculatedFiledKeys.indexOf(o[e])>=0){let t=null==(F=this.calculatedFieldRules)?void 0:F.find(t=>t.key===o[e]);this.tree[i][r][e]=new l.YJ[n.E.RECALCULATE]({key:o[e],field:o[e],isRecord:!0,formatFun:null==(O=null==(H=this.indicators)?void 0:H.find(t=>"string"!=typeof t&&t.indicatorKey===o[e]))?void 0:O.format,calculateFun:null==t?void 0:t.calculateFun,dependAggregators:this.tree[i][r],dependIndicatorKeys:null==t?void 0:t.dependIndicatorKeys})}else{let t=this.getAggregatorRule(o[e]);this.tree[i][r][e]=new l.YJ[null!=(D=null==t?void 0:t.aggregationType)?D:n.E.SUM]({key:o[e],field:null!=(z=null==t?void 0:t.field)?z:o[e],formatFun:null!=(W=null==t?void 0:t.formatFun)?W:null==(N=null==(Z=this.indicators)?void 0:Z.find(t=>"string"!=typeof t&&t.indicatorKey===o[e]))?void 0:N.format})}i!==t&&this.tree[i][r][e].push(null==(j=null==($=_.tree[t])?void 0:$[r])?void 0:j[e])}}C(t,r)})}),e.forEach(e=>{Object.keys(_.tree[e]).forEach(t=>{C(e,t)})})}for(let e in _.totalRecordsTree)for(let t in _.totalRecordsTree[e])C(e,t)}ArrToTree1(e,t,i,r,n,l){let o=[],a=this.stringJoinChar,s=new Map;function h(e,r){let n,h=[];e.forEach((d,u)=>{var c;h.push(d);let p=h.join(a),g=s.get(p);g||(g={value:d,dimensionKey:t[u],children:u===e.length-1&&(null!=(c=null==i?void 0:i.length)?c:0)>=1?null==i?void 0:i.map(e=>"string"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:e.title}):[]},s.set(p,g),n?n.children.push(g):l&&r?o.unshift(g):o.push(g)),n=g})}return e.forEach(e=>h(e,!1)),r&&h([n],r),o}ArrToTree(e,t,i,r,n,l,o,a,s){var h;let d=[],u=this.stringJoinChar,c=new Map;if((null==e?void 0:e.length)?e.forEach(e=>(function(e){let n,l=[];e.forEach((a,h)=>{var p,g,f,m;l.push(a);let b=l.join(u),y=c.get(b);if(!y){if(y={value:a,dimensionKey:t[h],children:h===e.length-1&&(null!=(p=null==i?void 0:i.length)?p:0)>=1?null==i?void 0:i.map(e=>"string"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:e.title}):[]},r[h]){let e=null!=(g=y.children)?g:[],n={value:o,dimensionKey:t[h+1],levelSpan:r.length-h-1,children:(null!=(f=null==i?void 0:i.length)?f:0)>=1?null==i?void 0:i.map(e=>"string"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:e.title}):[],role:"sub-total"};e.push(n),e=null!=(m=n.children)?m:[]}c.set(b,y),n?r[h-1]&&!s?n.children.splice(n.children.length-1,0,y):n.children.push(y):d.push(y)}n=y})})(e)):i&&(d=null==i?void 0:i.map(e=>{var t;return"string"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:null!=(t=e.title)?t:e.indicatorKey}})),n&&(null==e?void 0:e.length)){let e={value:l,dimensionKey:t[0],levelSpan:r.length,children:null!=(h=null==i?void 0:i.map(e=>"string"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:e.title}))?h:[],role:"grand-total"};a?d.unshift(e):d.push(e)}return d}cacheDeminsionCollectedValues(){for(let e in this.collectValuesBy)"xField"!==this.collectValuesBy[e].type&&"yField"!==this.collectValuesBy[e].type||(this.dataConfig.dimensionSortArray?this.cacheCollectedValues[e]=function(e,t){return e.sort((e,i)=>{let r=t.indexOf(e),n=t.indexOf(i);return r<n?-1:+(r>n)})}(this.collectedValues[e],this.dataConfig.dimensionSortArray):this.cacheCollectedValues[e]=this.collectedValues[e])}changeTreeNodeValue(e=[],t=[],i,r){var n,o,a,s,h;let d,u,c=this.indicatorKeys.indexOf(i);d="string"==typeof e?e:e.join(this.stringJoinChar),u="string"==typeof t?t:t.join(this.stringJoinChar),"string"==typeof r&&(isNaN(parseFloat(r))||(r=parseFloat(r))),(null==(n=this.changedTree[d])?void 0:n[u])||(this.changedTree[d]||(this.changedTree[d]={}),this.changedTree[d][u]=[]),this.changedTree[d][u][c]=r;let p=null==(a=null==(o=this.tree[d])?void 0:o[u])?void 0:a[c];if(1===(null==p?void 0:p.records.length)&&(p.records[0][this.indicatorKeys[c]]=r),null!=(h=null==(s=this.dataConfig)?void 0:s.updateAggregationOnEditCell)&&h)if(p)p.changedValue=r,this.recalculateTotals(e,t,i);else{let n=new l.__({key:i,field:i,isRecord:!0});n.changedValue=r,this.recalculateTotals(e,t,i,n)}}recalculateTotals(e=[],t=[],i,r){var n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z;if(!this.totals||0===Object.keys(this.tree).length||!((null==(n=this.totals.row)?void 0:n.showGrandTotals)||(null==(l=this.totals.row)?void 0:l.subTotalsDimensions)&&this.totals.row.subTotalsDimensions.length>0&&!1!==this.totals.row.showSubTotals)&&!((null==(o=this.totals.column)?void 0:o.showGrandTotals)||(null==(a=this.totals.column)?void 0:a.subTotalsDimensions)&&this.totals.column.subTotalsDimensions.length>0&&!1!==this.totals.column.showSubTotals))return;let W=Array.isArray(e)?e.join(this.stringJoinChar):e,Z=Array.isArray(t)?t.join(this.stringJoinChar):t,N=this.indicatorKeysIncludeCalculatedFieldDependIndicatorKeys.indexOf(i),$=new Set,j=new Set,G=W.split(this.stringJoinChar),V=Z.split(this.stringJoinChar),U=(e,t,i)=>{e&&(t!==W||i!==Z)&&($.add(e),t!==W&&i!==Z||j.add(e))};if((null==(h=null==(s=this.totals)?void 0:s.row)?void 0:h.subTotalsDimensions)&&!1!==this.totals.row.showSubTotals)for(let e=0;e<this.totals.row.subTotalsDimensions.length;e++){let t=this.totals.row.subTotalsDimensions[e],i=this.rows.indexOf(t);if(i>=0&&i<G.length){let e=G.slice(0,i+1);"tree"!==this.rowHierarchyType&&e.push(this.rowSubTotalLabel);let t=e.join(this.stringJoinChar);if((null==(u=null==(d=this.tree[t])?void 0:d[Z])?void 0:u[N])&&U(this.tree[t][Z][N],t,Z),(null==(p=null==(c=this.totals)?void 0:c.column)?void 0:p.subTotalsDimensions)&&!1!==this.totals.column.showSubTotals)for(let e=0;e<this.totals.column.subTotalsDimensions.length;e++){let i=this.totals.column.subTotalsDimensions[e],r=this.columns.indexOf(i);if(r>=0&&r<V.length){let e=V.slice(0,r+1);e.push(this.colSubTotalLabel);let i=e.join(this.stringJoinChar);(null==(f=null==(g=this.tree[t])?void 0:g[i])?void 0:f[N])&&U(this.tree[t][i][N],t,i)}}(null==(b=null==(m=this.totals)?void 0:m.column)?void 0:b.showGrandTotals)&&(null==(v=null==(y=this.tree[t])?void 0:y[this.colGrandTotalLabel])?void 0:v[N])&&U(this.tree[t][this.colGrandTotalLabel][N],t,this.colGrandTotalLabel)}}if(null==(C=null==(_=this.totals)?void 0:_.row)?void 0:C.showGrandTotals){if(null==(w=null==(x=this.tree[this.rowGrandTotalLabel])?void 0:x[Z])?void 0:w[N]){if(U(this.tree[this.rowGrandTotalLabel][Z][N],this.rowGrandTotalLabel,Z),(null==(A=null==(S=this.totals)?void 0:S.column)?void 0:A.subTotalsDimensions)&&!1!==this.totals.column.showSubTotals)for(let e=0;e<this.totals.column.subTotalsDimensions.length;e++){let t=this.totals.column.subTotalsDimensions[e],i=this.columns.indexOf(t);if(i>=0&&i<V.length){let e=V.slice(0,i+1);e.push(this.colSubTotalLabel);let t=e.join(this.stringJoinChar);(null==(M=null==(k=this.tree[this.rowGrandTotalLabel])?void 0:k[t])?void 0:M[N])&&U(this.tree[this.rowGrandTotalLabel][t][N],this.rowGrandTotalLabel,t)}}(null==(R=null==(T=this.totals)?void 0:T.column)?void 0:R.showGrandTotals)&&(null==(P=null==(E=this.tree[this.rowGrandTotalLabel])?void 0:E[this.colGrandTotalLabel])?void 0:P[N])&&U(this.tree[this.rowGrandTotalLabel][this.colGrandTotalLabel][N],this.rowGrandTotalLabel,this.colGrandTotalLabel)}if((null==(I=null==(B=this.totals)?void 0:B.column)?void 0:I.subTotalsDimensions)&&!1!==this.totals.column.showSubTotals)for(let e=0;e<this.totals.column.subTotalsDimensions.length;e++){let t=this.totals.column.subTotalsDimensions[e],i=this.columns.indexOf(t);if(i>=0&&i<V.length){let e=V.slice(0,i+1);e.push(this.colSubTotalLabel);let t=e.join(this.stringJoinChar);(null==(F=null==(L=this.tree[W])?void 0:L[t])?void 0:F[N])&&U(this.tree[W][t][N],W,t)}}(null==(O=null==(H=this.totals)?void 0:H.column)?void 0:O.showGrandTotals)&&(null==(z=null==(D=this.tree[W])?void 0:D[this.colGrandTotalLabel])?void 0:z[N])&&U(this.tree[W][this.colGrandTotalLabel][N],W,this.colGrandTotalLabel),$.forEach(e=>{r&&j.has(e)&&e.push(r),e.recalculate()})}}changeRecordFieldValue(e,t,i){let r=!1;for(let t=0;t<this.indicatorKeys.length;t++)this.indicatorKeys[t]===e&&(r=!0);if(!r){if(Array.isArray(this.records))for(let r=0,n=this.records.length;r<n;r++){let n=this.records[r];n[e]===t&&(n[e]=i)}else for(let r in this.records)for(let n=0,l=this.records[r].length;n<l;n++){let l=this.records[r][n];l[e]===t&&(l[e]=i)}this.rowFlatKeys={},this.colFlatKeys={},this.tree={},this.processRecords()}}_rowTreeHasChanged(){this.hasExtensionRowTree||(this.customRowTreeDimensionPaths=this.customTreeToDimensionPathArr(this.customRowTree,"row"))}changeDataConfig(e){this.rows=e.rows,this.columns=e.columns}addRecords(e){for(let t=0,i=e.length;t<i;t++){let i=e[t];this.processRecord(i)}Array.isArray(this.records)&&this.records.push(e)}customTreeToDimensionPathArr(e,t){let i=[],n=this;return null==e||e.forEach(e=>(function e(l,o){var a,s,h;l.virtual||((null==(a=o[o.length-1])?void 0:a.childKeys)&&l.dimensionKey&&-1===o[o.length-1].childKeys.indexOf(l.dimensionKey)&&l.dimensionKey!==o[o.length-1].dimensionKey&&o[o.length-1].childKeys.push(l.dimensionKey),o.push({dimensionKey:(0,r.Z)(l.indicatorKey)?void 0:l.dimensionKey,value:l.value,indicatorKey:l.indicatorKey,virtual:l.virtual})),(null==(s=l.children)?void 0:s.length)>0?("tree"===n.rowHierarchyType&&"row"===t&&(o[o.length-1].childKeys=[],i.push([...o])),null==(h=l.children)||h.forEach(t=>e(t,[...o]))):i.push(o)})(e,[])),i}getFieldMatchColDimensionPaths(e){var t,i;let r=[];for(let n=0;n<(null!=(i=null==(t=this.customColTreeDimensionPaths)?void 0:t.length)?i:0);n++){let t=this.customColTreeDimensionPaths[n],i=!0;for(let r=0;r<t.length;r++){let n=t[r];if(n.dimensionKey&&e[n.dimensionKey]!==n.value||n.indicatorKey&&void 0===e[n.indicatorKey]){i=!1;break}}i&&r.push(t)}return r}getFieldMatchRowDimensionPaths(e){var t,i;let n=[];for(let l=0;l<(null!=(i=null==(t=this.customRowTreeDimensionPaths)?void 0:t.length)?i:0);l++){let t=this.customRowTreeDimensionPaths[l],i=!0;for(let n=0;n<t.length;n++){let l=t[n];if(l.dimensionKey&&e[l.dimensionKey]!==l.value||l.indicatorKey&&void 0===e[l.indicatorKey]||l.childKeys&&n===t.length-1&&l.childKeys.length>0&&l.childKeys.find(t=>(0,r.Z)(e[t]))){i=!1;break}}i&&(this.indicatorsAsCol||"tree"!==this.rowHierarchyType||t.find(e=>e.indicatorKey)||(i=!1)),i&&n.push(t)}return n}}},61014:function(e,t,i){i.d(t,{$:()=>a});var r=i(57198),n=i(70559),l=i(35759),o=i(64776);class a{constructor(e){this.isValidatingValue=!1,this.listenersId=[],this.cacheLastSelectedCellEditor={},this.table=e;let{editCellTrigger:t="doubleclick"}=e.options;this.bindEvent(t)}bindEvent(e){let t=this.table,i=t.on(r.B.DBLCLICK_CELL,i=>{var r,l,o;if(!e.includes("doubleclick"))return;let{col:a,row:s}=i,h=(0,n.RJ)(i.federatedEvent),d=t.scenegraph.getResizeColAt(h.abstractPos.x,h.abstractPos.y,null==(r=h.eventArgs)?void 0:r.targetCell);t._canResizeColumn(d.col,d.row)&&d.col>=0||(null==(o=null==(l=i.target)?void 0:l.attribute)?void 0:o.funcType)||(this.beginTriggerEditCellMode="doubleclick",this.startEditCell(a,s))}),l=t.on(r.B.CLICK_CELL,e=>{var i,r;let{editCellTrigger:n="doubleclick"}=t.options;if("click"===n||Array.isArray(n)&&n.includes("click")){if(null==(r=null==(i=e.target)?void 0:i.attribute)?void 0:r.funcType)return;this.beginTriggerEditCellMode="click";let{col:t,row:n}=e;this.startEditCell(t,n)}else"keydown"===n||Array.isArray(n)&&n.includes("keydown")}),o=t.on(r.B.SELECTED_CHANGED,i=>{let r=t.stateManager.select.ranges;if(1===r.length&&r[0].start.col===r[0].end.col&&r[0].start.row===r[0].end.row&&("keydown"===e||Array.isArray(e)&&e.includes("keydown"))){let{col:e,row:t}=i;this.beginTriggerEditCellMode="keydown";let r=this.table.getCellRangeRelativeRect(this.table.getCellRange(e,t)),n={rect:{left:r.left,top:r.top,width:r.width,height:r.height}};e===this.table.colCount-1?n.rect.width=r.width-1:n.rect.width=r.width+1,t===this.table.rowCount-1?n.rect.height=r.height-1:n.rect.height=r.height+1;let l=this.table.getEditor(e,t);l&&setTimeout(()=>{var i;l&&this.editingEditor!==l&&(null==(i=l.prepareEdit)||i.call(l,{referencePosition:n,container:this.table.getElement(),table:this.table,col:e,row:t}))},10)}});this.listenersId.push(i,l,o)}startEditCell(e,t,i,r){var n,l,a,s,h,d,u,c,p,g;if(this.editingEditor)return;let f=this.table.getEditor(e,t);if(f){if(r&&(null==(n=f.setElement)||n.call(f,r)),this.table.internalProps.layoutMap.isSeriesNumber(e,t))return;if(null==(a=null==(l=this.table.internalProps.layoutMap)?void 0:l.isAggregation)?void 0:a.call(l,e,t)){let e=null==(h=(s=this.table).isPivotTable)?void 0:h.call(s),t=!!e&&(null==(u=null==(d=this.table.internalProps)?void 0:d.dataConfig)?void 0:u.updateAggregationOnEditCell);if(!e||e&&t)return}let m=this.table.getCellRawRecord(e,t);if(null==m?void 0:m.vtableMerge)return;this.editingEditor||(this.editCell={col:e,row:t}),this.table._makeVisibleCell(e,t),this.editingEditor=f;let b=(0,o.Z)(i)?i:this.table.getCellOriginValue(e,t),y=this.table.getCellRangeRelativeRect(this.table.getCellRange(e,t)),v={rect:{left:y.left,top:y.top,width:y.width,height:y.height}};e===this.table.colCount-1?v.rect.width=y.width-1:v.rect.width=y.width+1,t===this.table.rowCount-1?v.rect.height=y.height-1:v.rect.height=y.height+1,f.beginEditing,null==(c=f.beginEditing)||c.call(f,this.table.getElement(),v,b),f.bindSuccessCallback,null==(p=f.bindSuccessCallback)||p.call(f,()=>{this.completeEdit()}),null==(g=f.onStart)||g.call(f,{value:b,endEdit:()=>{this.completeEdit()},referencePosition:v,container:this.table.getElement(),col:e,row:t,table:this.table})}}completeEdit(e){var t,i;if(!this.editingEditor)return!0;if(this.isValidatingValue)return!1;this.cacheLastSelectedCellEditor={};let r=null==e?void 0:e.target,{editingEditor:n}=this;if(r){if(n.targetIsOnEditor){if(n.targetIsOnEditor(r))return!1}else if(!n.isEditorElement||n.isEditorElement(r))return!1}if(this.editingEditor.getValue,this.editingEditor.validateValue){this.isValidatingValue=!0;let r=this.editingEditor.getValue(),n=this.table.getCellOriginValue(this.editCell.col,this.editCell.row),o=null==e?void 0:e.target,a=null==(i=(t=this.editingEditor).validateValue)?void 0:i.call(t,r,n,this.editCell,this.table,!!this.table.getElement().contains(o));return(0,l.tI)(a)?(this.isValidatingValue=!0,new Promise((e,t)=>{a.then(t=>{s(t,this,n,e)}).catch(e=>{this.isValidatingValue=!1,t(e)})})):s(a,this,n)}return this.doExit(),!0}doExit(){var e,t,i,r,n,l,o,a;let s=null==(t=(e=this.editingEditor).getValue)?void 0:t.call(e),h=this.table.getCellRange(this.editCell.col,this.editCell.row),d=[];for(let e=h.start.row;e<=h.end.row;e++){let e=[];for(let t=h.start.col;t<=h.end.col;t++)e.push(s);d.push(e)}null==(r=(i=this.editingEditor).beforeEnd)||r.call(i),this.table.changeCellValues(h.start.col,h.start.row,d),this.editingEditor.exit,null==(l=(n=this.editingEditor).exit)||l.call(n),null==(a=(o=this.editingEditor).onEnd)||a.call(o),this.editingEditor=null,this.isValidatingValue=!1,this.beginTriggerEditCellMode=null}cancelEdit(){var e,t,i,r;this.editingEditor&&(null==(t=(e=this.editingEditor).exit)||t.call(e),null==(r=(i=this.editingEditor).onEnd)||r.call(i),this.editingEditor=null)}release(){this.listenersId.forEach(e=>{this.table.off(e)})}}function s(e,t,i,r){return t.isValidatingValue=!1,"validate-exit"===e?(t.doExit(),null==r||r(!0),!0):"invalidate-exit"===e?(t.editingEditor.setValue(i),t.doExit(),null==r||r(!0),!0):"validate-not-exit"===e||"invalidate-not-exit"===e?(null==r||r(!1),!1):!0===e?(t.doExit(),null==r||r(!0),!0):(null==r||r(!1),!1)}},49499:function(e,t,i){i.d(t,{U:()=>n});let r={};function n(e){if(r[e])return r[e]}},50848:function(e,t,i){i.d(t,{b:()=>a});var r=i(57886),n=i(74882);let l=1;class o{constructor(e,t,i){var n;if(this.resizeTime=100,this.lastSize={width:0,height:0},this.mutationResize=()=>{this.onResize()},this.callBack=()=>{let e=this.getSize(),t=!1;e.width===this.lastSize.width&&e.height===this.lastSize.height&&(t=!0),this.lastSize=e,this.cb&&this.cb(Object.assign(Object.assign({},this.lastSize),{windowSizeNotChange:t}))},this.onResize=()=>{this.callBackDebounce()},this.element=e,this.cb=t,this.lastSize=this.getSize(),i&&(this.resizeTime=Math.max(i,16)),this.callBackDebounce=(0,r.D)(this.callBack,this.resizeTime),null==window||window.addEventListener("resize",this.onResize),"ResizeObserver"in window){let e=window.ResizeObserver;this.observer=new e(this.mutationResize),null==(n=this.observer)||n.observe(this.element)}else"MutationObserver"in window&&(this.observer=new MutationObserver(this.mutationResize),this.observer.observe(this.element,{attributes:!0,attributeFilter:["style"]}))}disConnect(){window.removeEventListener("resize",this.onResize),this.observer&&(this.observer.disconnect(),this.observer=void 0)}setSize(e){this.lastSize=e}checkSize(){let e=this.getSize();return e.width!==this.lastSize.width||e.height!==this.lastSize.height}getSize(){return this.element?{width:Math.floor(this.element.clientWidth),height:Math.floor(this.element.clientHeight)}:Object.assign({},this.lastSize)}}class a{constructor(){this.listeners={},this.reseizeListeners={}}on(e,t,i,...r){if("node"===n.X.mode)return -1;let a=l++;if(null==e?void 0:e.addEventListener)if("resize"!==t||e===window)null==e||e.addEventListener(t,i,...r);else{let t=new o(e,i,this.resizeTime);this.reseizeListeners[a]=t}return this.listeners[a]={target:e,type:t,listener:i,options:r},a}once(e,t,i,...r){if("node"===n.X.mode)return -1;let l=this.on(e,t,(...e)=>{this.off(l),i(...e)},...r);return l}off(e){var t;if("node"===n.X.mode||null===e)return;let i=null==(t=this.listeners)?void 0:t[e];i&&(delete this.listeners[e],i.target.removeEventListener&&i.target.removeEventListener(i.type,i.listener,...i.options))}fire(e,t,...i){if("node"!==n.X.mode)for(let r in this.listeners){let n=this.listeners[r];n.target===e&&n.type===t&&n.listener.call(n.target,...i)}}hasListener(e,t){if("node"===n.X.mode)return!1;let i=!1;for(let r in this.listeners){let n=this.listeners[r];n.target===e&&n.type===t&&(i=!0)}return i}clear(){if("node"!==n.X.mode){for(let e in this.listeners){let t=this.listeners[e];t.target.removeEventListener&&t.target.removeEventListener(t.type,t.listener,...t.options)}for(let e in this.reseizeListeners){let t=this.reseizeListeners[e];null==t||t.disConnect()}this.listeners={}}}release(){"node"!==n.X.mode&&(this.clear(),this.listeners={})}}},9032:function(e,t,i){i.d(t,{R:()=>l});var r=i(64776);let n=1;class l{constructor(){this.listenersData={listeners:{},listenerData:{}}}on(e,t){let i=this.listenersData.listeners[e]||(this.listenersData.listeners[e]=[]);i.push(t);let r=n++;return this.listenersData.listenerData[r]={type:e,listener:t,remove:()=>{delete this.listenersData.listenerData[r];let n=i.indexOf(t);i.splice(n,1),this.listenersData.listeners[e].length||delete this.listenersData.listeners[e]}},r}off(e,t){var i;if(t)this.removeEventListener(e,t);else{if(!this.listenersData)return;null==(i=this.listenersData.listenerData[e])||i.remove()}}addEventListener(e,t,i){this.on(e,t)}removeEventListener(e,t){if(this.listenersData)for(let i in this.listenersData.listenerData){let r=this.listenersData.listenerData[i];r.type===e&&r.listener===t&&this.off(i)}}hasListeners(e){return!!this.listenersData&&!!this.listenersData.listeners[e]}fireListeners(e,t){if(!this.listenersData)return[];let i=this.listenersData.listeners[e];return i?i.map(e=>e.call(this,t)).filter(e=>(0,r.Z)(e)):[]}release(){delete this.listenersData}}},70559:function(e,t,i){i.d(t,{J$:()=>l,RJ:()=>n,r5:()=>a,xD:()=>o});var r=i(64776);function n(e){let t={abstractPos:{x:e.viewport.x,y:e.viewport.y}},i=l(e.target);return i&&(t.eventArgs={col:i.col,row:i.row,event:e,targetCell:i,mergeInfo:function(e){if((0,r.Z)(e.mergeStartCol)&&(0,r.Z)(e.mergeStartRow)&&(0,r.Z)(e.mergeEndCol)&&(0,r.Z)(e.mergeEndRow))return{colStart:e.mergeStartCol,colEnd:e.mergeEndCol,rowStart:e.mergeStartRow,rowEnd:e.mergeEndRow}}(i),target:e.target}),t}function l(e){for(;e&&e.parent;){if("cell"===e.role)return e;e=e.parent}return null}let o=/radio-\d+-\d+-(\d+)/;function a(e){let t=["<table>"],i=e.split("\r\n");return i.forEach(function(e,r){let n=e.split("	"),l=[];0===r&&t.push("<tbody>"),n.forEach(function(e,t){let i=e?e.toString().replace(/&/g,"&amp;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,"<br>\r\n").replace(/\x20{2,}/gi,e=>`<span style="mso-spacerun: yes">${"&nbsp;".repeat(e.length-1)} </span>`).replace(/\t/gi,"&#9;"):" ";l.push(`<td>${i}</td>`)}),t.push("<tr>",...l,"</tr>"),r===i.length-1&&t.push("</tbody>")}),t.push("</table>"),['<meta name="author" content="Visactor"/><style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>',t.join("")].join("")}},1800:function(e,t,i){let r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k;i.d(t,{E6:()=>P,U2:()=>L,ci:()=>I});var M=i(39818),T=i(35759),R=i(1800),E=i(51130);function P(e){var t,i,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K;r=null!=(t=null==e?void 0:e.sort_color)?t:"#282F38",n=null!=(i=null==e?void 0:e.sort_color_opacity)?i:"0.35",l=null!=(M=null==e?void 0:e.sort_color_2)?M:"#416EFF",o=null!=(T=null==e?void 0:e.sort_color_opacity_2)?T:"1",a=null!=(R=null==e?void 0:e.sort_size)?R:16,s=null!=(E=null==e?void 0:e.sort_size_2)?E:22,h=null!=(P=null==e?void 0:e.frozen_color)?P:"#282F38",d=null!=(B=null==e?void 0:e.frozen_color_opacity)?B:"0.35",u=null!=(I=null==e?void 0:e.frozen_color_opacity)?I:"0.2",c=null!=(L=null==e?void 0:e.frozen_color_2)?L:"#416EFF",p=null!=(F=null==e?void 0:e.frozen_color_opacity_2)?F:"1",g=null!=(H=null==e?void 0:e.frozen_size)?H:22,f=null!=(O=null==e?void 0:e.frozen_size_2)?O:22,m=null!=(D=null==e?void 0:e.collapse_color)?D:"#141414",b=null!=(z=null==e?void 0:e.collapse_color_opacity)?z:"0.65",y=null!=(W=null==e?void 0:e.collapse_size)?W:16,v=null!=(Z=null==e?void 0:e.frozen_size_2)?Z:22,_=null!=(N=null==e?void 0:e.expand_color)?N:"#141414",C=null!=($=null==e?void 0:e.expand_color_opacity)?$:"0.65",x=null!=(j=null==e?void 0:e.expand_size)?j:16,w=null!=(G=null==e?void 0:e.expand_size_2)?G:22,S=null!=(V=null==e?void 0:e.dragReorder_color)?V:"#666666",A=null!=(U=null==e?void 0:e.dragReorder_color_opacity)?U:"1",k=null!=(K=null==e?void 0:e.dragReorder_size)?K:20}let B={get sort_downward(){return{type:"svg",svg:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M4.6665 9H11.3332L7.99984 13.1667L4.6665 9Z" fill="${l}"  fill-opacity="${o}"/><path d="M11.3335 7L4.66683 7L8.00016 2.83333L11.3335 7Z" fill="${r}" fill-opacity="${n}"/></svg> `,width:a,height:a,funcType:M.cI.sort,name:"sort_downward",positionType:M.q0.contentRight,marginLeft:3,hover:{width:s,height:s,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get sort_upward(){return{type:"svg",svg:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.6665 9H11.3332L7.99984 13.1667L4.6665 9Z" fill="${r}"  fill-opacity="${n}"/><path d="M11.3335 7L4.66683 7L8.00016 2.83333L11.3335 7Z" fill="${l}"  fill-opacity="${o}"/> </svg>`,width:a,height:a,funcType:M.cI.sort,positionType:M.q0.contentRight,name:"sort_upward",marginLeft:3,hover:{width:s,height:s,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get sort_normal(){return{type:"svg",svg:`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.6665 9H11.3332L7.99984 13.1667L4.6665 9Z" fill="${r}" fill-opacity="${n}"/><path d="M11.3335 7L4.66683 7L8.00016 2.83333L11.3335 7Z" fill="${r}" fill-opacity="${n}"/></svg> `,width:a,height:a,funcType:M.cI.sort,positionType:M.q0.contentRight,name:"sort_normal",marginLeft:3,hover:{width:s,height:s,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get freeze(){return{type:"svg",svg:`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path d="M17.1313 8.42047C17.1932 8.48238 17.2423 8.55587 17.2759 8.63676C17.3094 8.71764 17.3266 8.80434 17.3266 8.89189C17.3266 8.97944 17.3094 9.06613 17.2759 9.14702C17.2423 9.2279 17.1932 9.3014 17.1313 9.3633L13.3843 13.1103C13.7007 14.3048 13.5305 15.4443 12.8388 16.2395C12.8104 16.2781 12.7778 16.3136 12.7417 16.3451L12.712 16.3755C12.6501 16.4374 12.5766 16.4865 12.4957 16.52C12.4148 16.5535 12.3281 16.5707 12.2406 16.5707C12.153 16.5707 12.0663 16.5535 11.9854 16.52C11.9046 16.4865 11.8311 16.4374 11.7692 16.3755L9.17633 13.7826L6.05316 16.9058L5.11983 17.0925C5.09291 17.0979 5.06508 17.0965 5.03881 17.0886C5.01254 17.0806 4.98863 17.0663 4.96923 17.0469C4.94982 17.0275 4.9355 17.0036 4.92755 16.9773C4.9196 16.951 4.91827 16.9232 4.92366 16.8963L5.11033 15.963L8.23333 12.8396L5.64066 10.2471C5.57875 10.1852 5.52964 10.1117 5.49614 10.0309C5.46263 9.94997 5.44539 9.86327 5.44539 9.77572C5.44539 9.68817 5.46263 9.60148 5.49614 9.52059C5.52964 9.43971 5.57875 9.36621 5.64066 9.3043C5.65066 9.2943 5.66066 9.2843 5.67099 9.27464C5.70266 9.2383 5.73833 9.20547 5.77766 9.17664C6.57283 8.48564 7.71199 8.31564 8.90599 8.63197L12.6528 4.88497C12.7147 4.82306 12.7882 4.77395 12.8691 4.74045C12.95 4.70694 13.0367 4.6897 13.1242 4.6897C13.2118 4.6897 13.2985 4.70694 13.3794 4.74045C13.4603 4.77395 13.5338 4.82306 13.5957 4.88497L17.1312 8.42047H17.1313ZM15.7172 8.8918L13.1243 6.29914L9.56483 9.8588C9.47574 9.94788 9.36323 10.0099 9.24034 10.0376C9.11746 10.0654 8.98922 10.0578 8.87049 10.0156C8.22783 9.78764 7.63899 9.7553 7.17749 9.89814L12.1182 14.8388C12.261 14.3771 12.2287 13.7885 12.0007 13.146C11.9585 13.0272 11.9509 12.899 11.9787 12.7761C12.0064 12.6532 12.0684 12.5407 12.1575 12.4516L15.7172 8.89164V8.8918Z" fill="${h}" fill-opacity="${u}"/></g><defs><clipPath id="clip0"><rect width="22" height="22" fill="white"/></clipPath></defs></svg>`,width:g,height:g,name:"freeze",funcType:M.cI.frozen,positionType:M.q0.right,marginRight:0,hover:{width:f,height:f,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get frozen(){return{type:"svg",svg:`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.49975 3.66663C8.32294 3.66663 8.15337 3.73686 8.02835 3.86189C7.90332 3.98691 7.83309 4.15648 7.83309 4.33329V9.63246C6.76475 10.2533 6.07942 11.1795 6.00625 12.2308C5.99892 12.2786 5.99692 12.3268 6.00009 12.3741L5.99975 12.4166C5.99975 12.5934 6.06999 12.763 6.19501 12.888C6.32004 13.0131 6.48961 13.0833 6.66642 13.0833H10.3333L10.3331 17.5L10.8611 18.292C10.8763 18.3148 10.8969 18.3335 10.9211 18.3464C10.9453 18.3594 10.9723 18.3662 10.9998 18.3662C11.0272 18.3662 11.0542 18.3594 11.0784 18.3464C11.1026 18.3335 11.1232 18.3148 11.1384 18.292L11.6664 17.5L11.6666 13.0833H15.3331C15.5099 13.0833 15.6795 13.0131 15.8045 12.888C15.9295 12.763 15.9998 12.5934 15.9998 12.4166C15.9998 12.4025 15.9998 12.3883 15.9994 12.3741C16.0028 12.3263 16.0008 12.2776 15.9933 12.2295C15.9196 11.1786 15.2343 10.2528 14.1664 9.63229V4.33329C14.1664 4.15648 14.0962 3.98691 13.9712 3.86189C13.8461 3.73686 13.6766 3.66663 13.4998 3.66663H8.49975Z" fill="${h}" fill-opacity="${d}"/></svg>`,width:g,height:g,name:"frozen",funcType:M.cI.frozen,positionType:M.q0.right,marginRight:0,hover:{width:f,height:f,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get frozenCurrent(){return{type:"svg",svg:`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.49975 3.66663C8.32294 3.66663 8.15337 3.73686 8.02835 3.86189C7.90332 3.98691 7.83309 4.15648 7.83309 4.33329V9.63246C6.76475 10.2533 6.07942 11.1795 6.00625 12.2308C5.99892 12.2786 5.99692 12.3268 6.00009 12.3741L5.99975 12.4166C5.99975 12.5934 6.06999 12.763 6.19501 12.888C6.32004 13.0131 6.48961 13.0833 6.66642 13.0833H10.3333L10.3331 17.5L10.8611 18.292C10.8763 18.3148 10.8969 18.3335 10.9211 18.3464C10.9453 18.3594 10.9723 18.3662 10.9998 18.3662C11.0272 18.3662 11.0542 18.3594 11.0784 18.3464C11.1026 18.3335 11.1232 18.3148 11.1384 18.292L11.6664 17.5L11.6666 13.0833H15.3331C15.5099 13.0833 15.6795 13.0131 15.8045 12.888C15.9295 12.763 15.9998 12.5934 15.9998 12.4166C15.9998 12.4025 15.9998 12.3883 15.9994 12.3741C16.0028 12.3263 16.0008 12.2776 15.9933 12.2295C15.9196 11.1786 15.2343 10.2528 14.1664 9.63229V4.33329C14.1664 4.15648 14.0962 3.98691 13.9712 3.86189C13.8461 3.73686 13.6766 3.66663 13.4998 3.66663H8.49975Z"  fill="${c}" fill-opacity="${p}"/></svg>`,width:g,height:g,funcType:M.cI.frozen,positionType:M.q0.right,name:"frozenCurrent",marginRight:0,hover:{width:f,height:f,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get dropdownIcon(){return{type:"svg",svg:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g><rect x="2" y="1" width="20" height="20" rx="10" fill="white"/><rect x="2.5" y="1.5" width="19" height="19" rx="9.5" stroke="#959DA5"/></g><path d="M14.9492 9.39531C15.0086 9.31911 15.0165 9.21887 14.9698 9.1356C14.923 9.05234 14.8294 9 14.7273 9L9.27273 9C9.17057 9 9.07697 9.05234 9.03023 9.1356C8.98348 9.21887 8.99142 9.31911 9.0508 9.39531L11.7781 12.8953C11.8293 12.961 11.9119 13 12 13C12.0881 13 12.1707 12.961 12.2219 12.8953L14.9492 9.39531Z" fill="#4F5965"/></svg>',width:24,height:24,funcType:M.cI.dropDown,positionType:M.q0.absoluteRight,name:"dropdownIcon",marginRight:0,hover:{width:24,height:24,bgColor:"rgba(101, 117, 168, 0.1)",image:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g><rect x="2" y="1" width="20" height="20" rx="10" fill="#1E54C9"/><rect x="2.5" y="1.5" width="19" height="19" rx="9.5" stroke="#141414" stroke-opacity="0.2"/></g><path d="M14.9492 9.39531C15.0086 9.31911 15.0165 9.21887 14.9698 9.1356C14.923 9.05234 14.8294 9 14.7273 9L9.27273 9C9.17057 9 9.07697 9.05234 9.03023 9.1356C8.98348 9.21887 8.99142 9.31911 9.0508 9.39531L11.7781 12.8953C11.8293 12.961 11.9119 13 12 13C12.0881 13 12.1707 12.961 12.2219 12.8953L14.9492 9.39531Z" fill="white"/></svg>'},cursor:"pointer",visibleTime:"mouseenter_cell"}},get play(){return{type:"svg",svg:'<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01" /><path d="M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z" fill="none" stroke="#686a6e" stroke-width="4" stroke-linejoin="round" stroke-opacity="0.7" /><path d="M20 24V17.0718L26 20.5359L32 24L26 27.4641L20 30.9282V24Z" fill="none" stroke="#686a6e" stroke-width="4" stroke-linejoin="round" stroke-opacity="0.7" /></svg>',width:24,height:24,funcType:M.cI.play,positionType:M.q0.right,name:"play",marginRight:0,hover:{width:24,height:24,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get damage_pic(){return{type:"svg",svg:'<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 10V38C5 39.1046 5.89543 40 7 40H14H18L15 29L22 27L21 20L29 16L27 13L30 8H7C5.89543 8 5 8.89543 5 10Z" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M43 38V10C43 8.89543 42.1046 8 41 8H38L34 14L37 19L28 23L29 31L22 33L24 40H41C42.1046 40 43 39.1046 43 38Z" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 18C15.3284 18 16 17.3284 16 16.5C16 15.6716 15.3284 15 14.5 15C13.6716 15 13 15.6716 13 16.5C13 17.3284 13.6716 18 14.5 18Z" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',width:24,height:24,funcType:M.cI.damagePic,positionType:M.q0.left,name:"damage_pic",marginRight:0,hover:{width:24,height:24,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get loading_pic(){return{type:"svg",svg:'<svg viewBox="0 0 400 300" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="a" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="50" y="65" width="301" height="170"><path d="M350.3 65H50v169.8h300.3V65Z" fill="#fff"/></mask><g mask="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M58.3 233.2h32.8v-36.8H58.3v36.8Z" fill="#C7DEFF"/><path d="M91.1 224.5v8.8H58.3M82.4 196.2H58.3" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M305.4 182.5s-2.7 12.6 0 17.4c2.7 4.8 8.3 6.7 12.4 4.4 4.2-2.4 5.3-8.1 2.6-12.9-2.7-4.8-15-8.9-15-8.9ZM336 204.7c4.3 2 9.7-.4 12-5.4 2.3-5-1.5-17.3-1.5-17.3s-11.8 5.1-14.1 10.1c-2.3 5-.7 10.6 3.6 12.6Z" fill="#00E4E5"/><path fill-rule="evenodd" clip-rule="evenodd" d="M326.7 174s-10 11.8-10 18.6c0 6.7 4.5 12.2 10 12.2s10-5.5 10-12.3c0-6.8-10-18.5-10-18.5Z" fill="#00E4E5"/><path d="M332.3 181.5c2.3 3.6 4.4 7.8 4.4 10.9M316.7 192.5c0-3.1 2.1-7.2 4.3-10.8" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M343.1 227.3v-9.7h-34v9.7c0 3.7 3 6.6 6.6 6.6h20.9c3.6 0 6.5-2.9 6.5-6.6Z" fill="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M350.4 220.8V198H302v22.8c0 5.9 4.8 10.7 10.7 10.7h26.9c5.9 0 10.7-4.8 10.8-10.7Z" fill="#C7DEFF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M331.7 74.2H117.8L87.4 203h213.8l30.5-128.8Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M337 74.2h-6.2l-30.6 129.2h6.2L337 74.2Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M303.8 203.5h2.4l30.7-129.3h-1.8l-31.3 129.3Z" fill="#C7DEFF"/><path d="m337 74.2-30.6 129.2h-5.9" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M229.9 202.1h-47.6l2 9.6h47.3l-1.7-9.6Z" fill="#C7DEFF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M94.7 172.6 87.4 203h213.1l7.8-30.4H94.7Z" fill="#006EFF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M94.7 172.6 87.4 203h213.1l7.8-30.4H94.7Z" fill="#006EFF"/><path d="M138.5 74.2h193.2l-23.4 98.6M94.5 172.7l11-46.3M104.8 155.4l-2.3 11.5h6.7M316 112.1l1.1-4.5" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M148.3 138.1h97V119h-97v19.1Z" fill="#00E4E5"/><path d="M303.1 80.6h20.3l-4.6 19.6M228.3 234.3c3.6 0 6.3-3.2 5.7-6.8l-4.1-24.1" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M226.2 229.5h-68.9v1.2c0 2 1.6 3.7 3.7 3.7h60.1c2.8 0 5-2.2 5.1-4.9Z" fill="#C7DEFF"/><path d="M180.699 226.8h-19.9c-2.8 0-4.6 3-3.3 5.5m0 0c.6 1.2 1.9 2 3.3 2h57.8M175.9 203.4l3.6 17.6M241.2 234.3h65.1M104.6 234.3h41.3" stroke="#071F4D"/><path d="M206.2 234.3h14.9c3.1 0 5.5-2.8 5-5.9l-4.3-24.9M160.7 226.8h46M62.2 226.1h-9.5c-1.2 0-2.2-1-2.2-2.2v-18.3c0-1.2 1-2.2 2.2-2.2h9.5" stroke="#071F4D"/><path d="M53.4 171.7H68c2.1 0 3.7 1.7 3.7 3.7v16.1M79.1 192v-21.8c0-2.5 2-4.6 4.6-4.6h2.2c2.5 0 4.5-2 4.5-4.5m0 0c0-2.5-2-4.5-4.5-4.5H56.1c-2.4 0-4.3-1.9-4.3-4.3V148M71.2 165.2h-18M64 181.7v10.1" stroke="#C7DEFF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M85.7 120H124c4.3 0 7.7-3.5 7.7-7.7V65.5H94.2c-4.7 0-8.5 4.9-8.5 11V120Z" fill="#C7DEFF"/><path d="M85.7 110.7V73c0-4.1 3.4-7.5 7.5-7.5h38.5M146.2 73.8v-2.5c0-3.2-2-5.8-5.8-5.8-2.8 0-6 1.1-6 5.8v42.4c0 4.7-3.8 8.5-8.5 8.5h-15.6" stroke="#071F4D"/><path d="M119.7 122.3H87c-6.1 0-11.1-5-11.1-11.1m0 0h39M126.1 122.3c-6.1 0-11.1-5-11.1-11.1" stroke="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M85.4 122.1h37.2c-6.5-1.8-8-10.5-8-10.5H76.2c.6 8.8 9.2 10.5 9.2 10.5Z" fill="#071F4D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M95.8 102.9h4.8V83.6h-4.8v19.3ZM106.6 102.9h4.8V77.6h-4.8v25.3ZM117.3 102.9h4.8V89.1h-4.8v13.8Z" fill="#fff"/><path d="M273.2 195.9h16.9M261.2 195.9h5" stroke="#fff"/><path d="M62.4 201.9v2.9M62.4 224.5v2.9" stroke="#071F4D"/><path d="m153.6 138.1 9.7-19.1M168.8 138.1l9.7-19.1M184.1 138.1l9.7-19.1M199.4 138.1l9.7-19.1M214.6 138.1l9.8-19.1M229.9 138.1l9.7-19.1" stroke="#fff"/><path d="M148.3 138.1h121.6V119H148.3v19.1Z" stroke="#071F4D"/></g></svg>',width:400,height:300,name:"loading_pic",positionType:M.q0.left}},get expand(){return{type:"svg",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
      <path d="M4.64988 6.81235C4.38797 6.48497 4.62106 6 5.04031 6L10.9597 6C11.3789 6 11.612 6.48497 11.3501 6.81235L8.39043 10.512C8.19027 10.7622 7.80973 10.7622 7.60957 10.512L4.64988 6.81235Z" fill="${_}" fill-opacity="${C}"/>
      </svg>`,width:x,height:x,funcType:M.cI.expand,name:"expand",positionType:M.q0.contentLeft,marginLeft:0,marginRight:4,hover:{width:w,height:w,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get collapse(){return{type:"svg",svg:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
      <path d="M5.81235 11.3501C5.48497 11.612 5 11.3789 5 10.9597L5 5.04031C5 4.62106 5.48497 4.38797 5.81235 4.64988L9.51196 7.60957C9.76216 7.80973 9.76216 8.19027 9.51196 8.39044L5.81235 11.3501Z"  fill="${m}" fill-opacity="${b}"/>
      </svg>`,width:y,height:y,funcType:M.cI.collapse,name:"collapse",positionType:M.q0.contentLeft,marginLeft:0,marginRight:4,hover:{width:v,height:v,bgColor:"rgba(101, 117, 168, 0.1)"},cursor:"pointer"}},get drillDown(){return{name:"drillDown",type:"svg",positionType:M.q0.absolute,funcType:M.cI.drillDown,svg:E.gm,width:13,height:13,cursor:"pointer"}},get drillUp(){return{name:"drillUp",type:"svg",positionType:M.q0.absolute,funcType:M.cI.drillUp,svg:E.Zj,width:13,height:13,cursor:"pointer"}},get dragReorder(){return{type:"svg",svg:`<svg t="1710129136961" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5166" width="200" height="200"><path d="M362.666667 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${S}"  fill-opacity="${A}" p-id="5167"></path><path d="M661.333333 192m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${S}"  fill-opacity="${A}" p-id="5168"></path><path d="M362.666667 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${S}"  fill-opacity="${A}" p-id="5169"></path><path d="M661.333333 512m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${S}"  fill-opacity="${A}" p-id="5170"></path><path d="M362.666667 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${S}"  fill-opacity="${A}" p-id="5171"></path><path d="M661.333333 832m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z" fill="${S}"  fill-opacity="${A}" p-id="5172"></path></svg>`,width:k,height:k,funcType:M.cI.dragReorder,positionType:M.q0.left,name:"dragReorder",marginLeft:-10,marginRight:10,cursor:"grab"}}},I={};function L(){return(0,T.l7)(B,R.ci)}},26874:function(e,t,i){i.d(t,{iN:()=>S,Wm:()=>A,hZ:()=>_,Vp:()=>w,dK:()=>C,V4:()=>T});var r,n,l=i(4654),o=i(20408),a=i(95723),s=i(64776),h=i(89530);function d(e){return 2===e.length&&(0,h.Z)(e[0])&&(0,h.Z)(e[1])&&e[1]>=e[0]}function u(e){let t=e[1]-e[0],i=e[1]*e[0]<0,r=e[0]<=0?0-e[0]:0,n=e[1]>0?e[1]-0:0;return 0===t?e[0]<0?(r=1,n=0):e[0]>0&&(r=0,n=1):(r/=t,n/=t),{total:t,negative:r,positive:n,includeZero:i,domain:e,extendable_min:!0,extendable_max:!0}}function c(e,t){let{positive:i,negative:r,extendable_min:n,extendable_max:l,domain:o}=e,{positive:a,negative:s,extendable_min:h,extendable_max:d,domain:u}=t;if(a>0){if(!h)return!1;let e=r/i;l&&(e=r/Math.max(i,a),o[1]=-o[0]/e),u[0]=-u[1]*e}else if(s>0){if(!d)return!1;let e=i/r;n&&(e=i/Math.max(r,r),o[0]=-o[1]/e),u[1]=-u[0]*e}return!0}function p(e,t){let{extendable_min:i,extendable_max:r,domain:n}=e,{positive:l,negative:o,domain:a}=t;return(0!==l||0!==o)&&!(l>0&&!r)&&!(o>0&&!i)&&(n[0]=a[0],n[1]=a[1],!0)}function g(e,t){let{positive:i,negative:r,extendable_max:n,domain:l}=e,{positive:o,negative:a,extendable_min:s,domain:h}=t;if(n&&s){let e=Math.max(r,a)/Math.max(i,o);l[1]=-l[0]/e,h[0]=-h[1]*e}else if(s)h[0]=-h[1]*(r/i);else{if(!n)return!1;l[1]=-l[0]/(a/o)}return!0}function f(e,t){let{extendable_min:i,domain:r}=e,{extendable_max:n,domain:l}=t;return!(!i||!n)&&(r[0]=-r[1],l[1]=-l[0],!0)}var m=i(54833),b=i(76352),y=i(297),v=i(58473);function _(e,t,i){var r,n,h,d,u,c,p,g,f,m,_,x,w,S,A,M;if(i._table.isPivotChart())if(i.indicatorsAsCol){if(i.hasTopIndicatorAxis&&t===i.columnHeaderLevelCount-1&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount){let r=i.getIndicatorKey(e,t),n=i.getIndicatorInfo(r);if(!(null==n?void 0:n.hasTopIndicatorAxis))return;let a=k("top",e,t+1,e,i.columnHeaderLevelCount-1,e,t,1,i);if(!a)return;let s=i._table._getCellStyle(e,t+1),h=(0,b.u)((0,y.WJ)("padding",s,e,t+1,i._table)),{range:d,ticks:u,axisOption:c,targetTicks:p,targetRange:g,index:f,theme:m}=a;return(0,l.Z)(null==c?void 0:c.min)&&(d.min=c.min,d.min>0&&(c.zero=!1)),(0,l.Z)(null==c?void 0:c.max)&&(d.max=c.max,d.max<0&&(c.zero=!1)),(0,o.Z)({range:d},c,{orient:"top",type:(null==c?void 0:c.type)||"linear",label:{flush:!0},tick:{tickMode:(0,v.h)(p,g,d,f)},__ticksForVTable:u,__vtableChartTheme:m,__vtableBodyChartCellPadding:h})}if(t===i.rowCount-i.bottomFrozenRowCount&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount){let a=i.getIndicatorKeyInChartSpec(e,t),s=null;null==a||a.forEach(e=>{let t=i.getIndicatorInfo(e);t&&(s=t)});let h=k("bottom",e,t-1,e,t,e,t,0,i),{chartType:d}=C(e,t-1,"bottom",i);if(!h)return;let u=i._table._getCellStyle(e,t-1),c=(0,b.u)((0,y.WJ)("padding",u,e,t-1,i._table)),{range:p,ticks:g,axisOption:f,index:m,targetTicks:_,targetRange:x,theme:w}=h;(0,l.Z)(null==f?void 0:f.max)?(p.max=f.max,p.max<0&&(f.zero=!1)):"boxPlot"===d&&(p.max+=(p.max-p.min)/20),(0,l.Z)(null==f?void 0:f.min)?(p.min=f.min,p.min>0&&(f.zero=!1)):"boxPlot"===d&&(p.min-=(p.max-p.min)/20);let S=[];if("heatmap"===d){let l=i.getDimensionKeyInChartSpec(e,i.rowCount-i.bottomFrozenRowCount-1,"xField"),o=null!=(r=i.dataset.collectedValues[l])?r:[],a=i.getColKeysPath(e,t);S=null!=(n=null==o?void 0:o[null!=a?a:""])?n:[]}return(0,o.Z)({title:{visible:!0,text:null==s?void 0:s.title},range:p,domain:"linear"===(null==f?void 0:f.type)?void 0:Array.from(S)},f,{orient:"bottom",type:(null==f?void 0:f.type)||"linear",label:{flush:!0},tick:{tickMode:(0,v.h)(_,x,p,m)},__ticksForVTable:g,__vtableChartTheme:w,__vtableBodyChartCellPadding:c})}if(e===i.rowHeaderLevelCount-1&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount){let r,n=i.getDimensionKeyInChartSpec(i.rowHeaderLevelCount,t);(0,a.Z)(n)&&(n=n[0]);let l=null!=(h=i.dataset.collectedValues[n])?h:[],p=i.getRowKeysPath(e,t),g=null!=(d=l[null!=p?p:""])?d:[],{axisOption:f,theme:m,chartType:v}=C(e+1,t,"left",i);if(!1===(null==f?void 0:f.visible))return;let _=i._table._getCellStyle(e+1,t),x=(0,b.u)((0,y.WJ)("padding",_,e+1,t,i._table)),w=i.getRawChartSpec(e+1,t);return(0,o.Z)({domain:"linear"===(null==f?void 0:f.type)?void 0:Array.from(g),range:"linear"===(null==f?void 0:f.type)?g:void 0,title:{autoRotate:!0}},f,{orient:"left",type:null!=(u=null==f?void 0:f.type)?u:"band",label:{flush:!0},inverse:(S=f,A="horizontal"===(null!=(c=null==w?void 0:w.direction)?c:"scatter"===v?"vertical":"horizontal"),r=null==S?void 0:S.inverse,A&&"bottom"!==(M=null==S?void 0:S.orient)&&"top"!==M&&(r=!(0,s.Z)(null==S?void 0:S.inverse)||!(null==S?void 0:S.inverse)),r),__vtableChartTheme:m,__vtableBodyChartCellPadding:x})}}else{if(e===i.rowHeaderLevelCount-1&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount){let r=i.getIndicatorKeyInChartSpec(e,t),n=null;null==r||r.forEach(e=>{let t=i.getIndicatorInfo(e);t&&(n=t)});let a=k("left",e+1,t,e,t,e,t,0,i),{chartType:s}=C(e+1,t,"left",i);if(!a)return;let h=i._table._getCellStyle(e+1,t),d=(0,b.u)((0,y.WJ)("padding",h,e+1,t,i._table)),{range:u,ticks:c,axisOption:f,index:m,targetTicks:_,targetRange:x,theme:w}=a;(0,l.Z)(null==f?void 0:f.max)?(u.max=f.max,u.max<0&&(f.zero=!1)):"boxPlot"===s&&(u.max+=(u.max-u.min)/20),(0,l.Z)(null==f?void 0:f.min)?(u.min=f.min,u.min>0&&(f.zero=!1)):"boxPlot"===s&&(u.min-=(u.max-u.min)/20);let S=[];if("heatmap"===s){let r=i.getDimensionKeyInChartSpec(i.rowHeaderLevelCount,t,"yField"),n=null!=(p=i.dataset.collectedValues[r])?p:[],l=i.getRowKeysPath(e,t);S=null!=(g=null==n?void 0:n[null!=l?l:""])?g:[]}return(0,o.Z)({title:{visible:!0,text:null==n?void 0:n.title,autoRotate:!0},range:u,domain:"linear"===(null==f?void 0:f.type)?void 0:Array.from(S)},f,{orient:"left",type:(null==f?void 0:f.type)||"linear",label:{flush:!0},tick:{tickMode:(0,v.h)(_,x,u,m)},__ticksForVTable:c,__vtableChartTheme:w,__vtableBodyChartCellPadding:d})}if(e===i.colCount-i.rightFrozenColCount&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount){let r=i.getIndicatorKey(e,t),n=i.getIndicatorInfo(r);if(!(null==n?void 0:n.hasRightIndicatorAxis))return;let{axisOption:a,chartType:s}=C(e-1,t,"right",i),h=k("right",e-1,t,i.rowHeaderLevelCount-1,t,e,t,1,i);if(!h)return;let d=i._table._getCellStyle(e-1,t),u=(0,b.u)((0,y.WJ)("padding",d,e-1,t,i._table)),{range:c,ticks:p,index:g,targetTicks:_,targetRange:x,theme:w}=h;(0,l.Z)(null==a?void 0:a.min)&&(c.min=a.min,c.min>0&&(a.zero=!1)),(0,l.Z)(null==a?void 0:a.max)&&(c.max=a.max,c.max<0&&(a.zero=!1));let S=[];if("heatmap"===s){let r=i.getDimensionKeyInChartSpec(i.colCount-i.rightFrozenColCount-1,t,"yField"),n=null!=(f=i.dataset.collectedValues[r])?f:[],l=i.getRowKeysPath(e,t);S=null!=(m=null==n?void 0:n[null!=l?l:""])?m:[]}return(0,o.Z)({range:c,title:{autoRotate:!0},domain:"linear"===(null==a?void 0:a.type)?void 0:Array.from(S)},a,{orient:"right",type:(null==a?void 0:a.type)||"linear",label:{flush:!0},tick:{tickMode:(0,v.h)(_,x,c,g)},__ticksForVTable:p,__vtableChartTheme:w,__vtableBodyChartCellPadding:u})}if(t===i.rowCount-i.bottomFrozenRowCount&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount){let r=i.getDimensionKeyInChartSpec(e,i.columnHeaderLevelCount);(0,a.Z)(r)&&(r=r[0]);let n=null!=(_=i.dataset.collectedValues[r])?_:[],l=i.getColKeysPath(e,t),s=null!=(x=null==n?void 0:n[null!=l?l:""])?x:[],{axisOption:h,isPercent:d,theme:u,chartType:c}=C(e,t-1,"bottom",i);if(!1===(null==h?void 0:h.visible))return;let p=i._table._getCellStyle(e,t-1),g=(0,b.u)((0,y.WJ)("padding",p,e,t-1,i._table));return(0,o.Z)({domain:"linear"===(null==h?void 0:h.type)?void 0:Array.from(s),range:"linear"===(null==h?void 0:h.type)?s:void 0},h,{orient:"bottom",type:null!=(w=null==h?void 0:h.type)?w:"band",label:{flush:!0},__vtableChartTheme:u,__vtableBodyChartCellPadding:g})}}}function C(e,t,i,r){var n,o,h,d,u,c,p,g,f;let m=r.getRawChartSpec(e,t),b=null!=(n=m.axes)?n:[];if(r._table.pivotChartAxes.forEach(e=>{-1===b.findIndex(t=>e.orient===t.orient)&&b.push(e)}),m&&(0,a.Z)(b)){let e=b.find(e=>e.orient===i);if(e){let t,n;e.zero&&(0,l.Z)(null==(o=e.range)?void 0:o.min)&&(e.zero=!1);let{seriesIndex:c,seriesId:p}=e;(0,s.Z)(p)&&(0,a.Z)(m.series)?t=((0,a.Z)(p)?p:[p]).map(e=>{let t=m.series.findIndex(t=>t.id===e);return t>=0&&(n=m.series[t]),t}):(0,s.Z)(c)&&(0,a.Z)(m.series)&&(t=c);let{isZeroAlign:g,isTickAlign:f}=x(m,i,r);return e.labelHoverOnAxis||(e.labelHoverOnAxis=null==(d=null==(h=r._table.options.chartDimensionLinkage)?void 0:h.labelHoverOnAxis)?void 0:d[i]),{axisOption:e,isPercent:m.percent,isZeroAlign:g,isTickAlign:f,seriesIndice:t,theme:m.theme,chartType:null!=(u=null==n?void 0:n.type)?u:m.type}}}let y=null!=(c=r._table.pivotChartAxes.find(e=>e.orient===i))?c:{};y.zero&&(0,l.Z)(null==(p=y.range)?void 0:p.min)&&(y.zero=!1),y&&!y.labelHoverOnAxis&&(y.labelHoverOnAxis=null==(f=null==(g=r._table.options.chartDimensionLinkage)?void 0:g.labelHoverOnAxis)?void 0:f[i]);let{isZeroAlign:v,isTickAlign:_}=x(m,i,r);return{axisOption:y,isPercent:!1,isZeroAlign:v,isTickAlign:_,theme:m.theme,chartType:m.type}}function x(e,t,i){let r,n=[];"left"===t||"right"===t?n.push("left","right"):"top"!==t&&"bottom"!==t||n.push("top","bottom"),r=e&&(0,a.Z)(e.axes)?e.axes:i._table.pivotChartAxes;let l=!1,o=!1;if((0,a.Z)(r)){let e=[];r.forEach(t=>{n.includes(t.orient)&&e.push(t)});for(let t=0;t<e.length;t++){let i=e[t];i.sync&&i.sync.axisId&&e.find(e=>e.id===i.sync.axisId)&&(l=l||i.sync.zeroAlign,o=o||i.sync.tickAlign)}}return{isZeroAlign:l,isTickAlign:o}}function w(e,t,i){if(!i._table.isPivotChart())return!1;if(i.indicatorsAsCol){if(i.hasTopIndicatorAxis&&t===i.columnHeaderLevelCount-1&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount||t===i.rowCount-i.bottomFrozenRowCount&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount)return!0}else if(t===i.rowCount-i.bottomFrozenRowCount&&e>=i.rowHeaderLevelCount&&e<i.colCount-i.rightFrozenColCount)return!0;return!1}function S(e,t,i){if(!i._table.isPivotChart())return!1;if(i.indicatorsAsCol){if(e===i.rowHeaderLevelCount-1&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return!0}else if(e===i.rowHeaderLevelCount-1&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount||e===i.colCount-i.rightFrozenColCount&&t>=i.columnHeaderLevelCount&&t<i.rowCount-i.bottomFrozenRowCount)return!0;return!1}function A(e,t,i,r){if(!((0,a.Z)(e.axes)&&0!==e.axes.length||(0,a.Z)(t)&&0!==t.length))return i&&r||!i&&!r;if((0,a.Z)(e.axes)&&e.axes.length>0)for(let t=0;t<e.axes.length;t++){let n=e.axes[t];if(!i&&r&&"bottom"===n.orient){if("heatmap"===e.type)return"linear"===n.type;if("linear"===n.type)return!0}if(i&&r&&"bottom"===n.orient){if("heatmap"===e.type)return"linear"===n.type;if("linear"!==n.type)return!0}if(!i&&!r&&"left"===n.orient){if("heatmap"===e.type)return"linear"===n.type;if("linear"!==n.type)return!0}if(i&&!r&&"left"===n.orient){if("heatmap"===e.type)return"linear"===n.type;if("linear"===n.type)return!0}}if((0,a.Z)(t)&&t.length>0)for(let n=0;n<t.length;n++){let l=t[n];if(!i&&r&&"bottom"===l.orient){if("heatmap"===e.type)return"linear"===l.type;if("linear"===l.type)return!0}if(i&&r&&"bottom"===l.orient){if("heatmap"===e.type)return"linear"===l.type;if("linear"!==l.type)return!0}if(!i&&!r&&"left"===l.orient){if("heatmap"===e.type)return"linear"===l.type;if("linear"!==l.type)return!0}if(i&&!r&&"left"===l.orient){if("heatmap"===e.type)return"linear"===l.type;if("linear"===l.type)return!0}}return i&&r||!i&&!r}function k(e,t,i,r,n,l,o,a,s){let h,d=s.getIndicatorKeyInChartSpec(r>=0?r:l,n>=0?n:o);h="top"===e||"bottom"===e?s.getColKeysPath(l,o):s.getRowKeysPath(l,o);let u=M(t,i,a,e,d,h,s);if(!u)return;let c="bottom"===e?"top":"top"===e?"bottom":"left"===e?"right":"left",{targetRange:p,targetTicks:g}=R(t,i,u.index,u.isZeroAlign,u.isTickAlign,u.range,d,c,h,s);if(0!==u.index&&g){let{range:t,ticks:i}=m.F.getFunction("getAxisDomainRangeAndLabels")(u.range.min,u.range.max,u.axisOption,u.isZeroAlign,"bottom"===e||"top"===e?s._table.getColWidth(l)||s._table.tableNoFrameWidth:s._table.getRowHeight(o)||s._table.tableNoFrameHeight,{targetTicks:g,targetRange:p});u.range.min=t[0],u.range.max=t[1],u.ticks=i}return u.targetRange=p,u.targetTicks=g,u}function M(e,t,i,r,n,s,h){let{axisOption:d,isPercent:u,isZeroAlign:c,isTickAlign:p,seriesIndice:g,theme:f,chartType:b}=C(e,t,r,h),y=function e(t,i,r,n,l){var s,h;if((0,a.Z)(l)){let o={min:1/0,max:-1/0};for(let a=0;a<l.length;a++){let s=e(t,i,r,n,l[a]);s&&(o.min=Math.min(o.min,s.min),o.max=Math.max(o.max,s.max))}return isFinite(o.min)&&isFinite(o.max)?o:null}let d=null!=(s=null==i?void 0:i[l])?s:null==i?void 0:i[0];if((0,a.Z)(d)&&(d=d[0]),!d)return null;let u=t[d],c=(0,o.Z)({},null!=(h=null==u?void 0:u[null!=n?n:""])?h:{min:0,max:1});return c.positiveMax&&c.positiveMax>c.max&&(c.max=c.positiveMax),c.negativeMin&&c.negativeMin<c.min&&(c.min=c.negativeMin),c.min===c.max&&(c.min>0?c.min=0:c.max=0),c}(h.dataset.collectedValues,n,c,s,null!=g?g:i);if(!y)return;u&&(y.min=y.min<0?-1:0,y.max=+(y.max>0)),((null==d?void 0:d.zero)||y.min===y.max)&&(y.min=Math.min(y.min,0),y.max=Math.max(y.max,0));let{range:v,ticks:_}=m.F.getFunction("getAxisDomainRangeAndLabels")(y.min,y.max,d,c,"bottom"===r||"top"===r?h._table.getColWidth(e)||h._table.tableNoFrameWidth:h._table.getRowHeight(t)||h._table.tableNoFrameHeight);return(null==d?void 0:d.nice)&&(y.min=v[0],y.max=v[1]),(0,l.Z)(null==d?void 0:d.min)&&(y.min=d.min),(0,l.Z)(null==d?void 0:d.max)&&(y.max=d.max),{index:null!=g?g:i,range:y,ticks:_,isZeroAlign:c,isTickAlign:p,axisOption:d,theme:f,chartType:b}}function T(e,t,i,r,n,l,a,s){let{range:h,isZeroAlign:d,isTickAlign:u,axisOption:c,chartType:p}=M(e,t,i,r,l,a,s),{targetRange:g,targetTicks:f}=R(e,t,i,d,u,h,l,n,a,s);if(0!==i&&f){let{range:i,ticks:n}=m.F.getFunction("getAxisDomainRangeAndLabels")(h.min,h.max,(0,o.Z)({},c,{nice:!0,tick:{forceTickCount:f.length}}),d,"bottom"===r||"top"===r?s._table.getColWidth(e)||s._table.tableNoFrameWidth:s._table.getRowHeight(t)||s._table.tableNoFrameHeight,{targetTicks:f,targetRange:g});h.min=i[0],h.max=i[1]}return{axisOption:c,range:h,targetTicks:f,targetRange:g,chartType:p}}function R(e,t,i,r,n,l,o,a,s,h){let m,b;if(!r&&!n)return{targetTicks:m,targetRange:b};let y=M(e,t,o.length-1-i,a,o,s,h);if(y){let{range:o,ticks:s}=y;if(b=o,r){let e=function(e,t){let i=[e.min,e.max],r=[t.min,t.max];if(!d(i)||!d(r))return;let n=u(i),l=u(r),{positive:o,negative:a,extendable_min:s,extendable_max:h,includeZero:m}=n,{positive:b,negative:y,extendable_min:v,extendable_max:_,includeZero:C}=l;if(0===o&&0===a){if(!p(n,l))return}else if(0===b&&0===y){if(!p(l,n))return}else if(m||C)if(m&&!C){if(!c(n,l))return}else if(C&&!m){if(!c(l,n))return}else{if(a===y)return;if(a>y){if(!g(n,l))return}else if(!g(l,n))return}else{if(0===a&&0===b){if(!f(n,l))return}else if(0===y&&0===o&&!f(l,n))return;if(0===a&&0===y)if(0===i[0]&&r[0]>0){if(!v)return;r[0]=0}else{if(!(0===r[0]&&i[0]>0)||!s)return;i[0]=0}if(0===o&&0===b)if(0===i[1]&&r[1]>0){if(!_)return;r[1]=0}else{if(!(0===r[1]&&i[1]>0)||!h)return;i[1]=0}}return{range1:i,range2:r}}(l,o);e&&(l.min=e.range1[0],l.max=e.range1[1],b.min=e.range2[0],b.max=e.range2[1])}n&&(m=r?(0,v.r)(b,e,t,i,a,h):s)}return{targetTicks:m,targetRange:b}}(r=n||(n={})).vertical="vertical",r.horizontal="horizontal"},85162:function(e,t,i){i.d(t,{K0:()=>y,TF:()=>p,TQ:()=>v,VR:()=>m,YL:()=>C,aw:()=>b,eW:()=>f,ed:()=>c,f_:()=>g,py:()=>_});var r=i(95723),n=i(4654),l=i(20408),o=i(64776),a=i(26874),s=i(39873),h=i(99346),d=i(58473);let u="NO_AXISID_FRO_VTABLE";function c(e,t,i){var r,n;let l,o=i.getCellHeaderPaths(e,t);if(i.indicatorsAsCol){let e=null==(r=o.colHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;l=i.columnObjects.find(t=>t.indicatorKey===e)}else{let e=null==(n=o.rowHeaderPaths.find(e=>e.indicatorKey))?void 0:n.indicatorKey;l=i.columnObjects.find(t=>t.indicatorKey===e)}let a=null==l?void 0:l.chartSpec;return"function"==typeof a?a({col:e,row:t,dataValue:i._table.getCellOriginValue(e,t)||"",value:i._table.getCellValue(e,t)||"",rect:i._table.getCellRangeRelativeRect(i._table.getCellRange(e,t)),table:i._table}):a}function p(e,t,i){var r,n;let l,o=i.getCellHeaderPaths(e,t);if(i.indicatorsAsCol){let e=null==(r=o.colHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;l=i.columnObjects.find(t=>t.indicatorKey===e)}else{let e=null==(n=o.rowHeaderPaths.find(e=>e.indicatorKey))?void 0:n.indicatorKey;l=i.columnObjects.find(t=>t.indicatorKey===e)}return"function"!=typeof(null==l?void 0:l.chartSpec)}function g(e,t,i){var r,n;let l,o=i.getCellHeaderPaths(e,t);if(i.indicatorsAsCol){let e=null==(r=o.colHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;l=i.columnObjects.find(t=>t.indicatorKey===e)}else{let e=null==(n=o.rowHeaderPaths.find(e=>e.indicatorKey))?void 0:n.indicatorKey;l=i.columnObjects.find(t=>t.indicatorKey===e)}return null==l?void 0:l.noDataRenderNothing}function f(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];if(r.chartSpec&&"wordCloud"!==r.chartSpec.type&&"radar"!==r.chartSpec.type&&"gauge"!==r.chartSpec.type&&"pie"!==r.chartSpec.type&&"funnel"!==r.chartSpec.type&&"rose"!==r.chartSpec.type&&"sunburst"!==r.chartSpec.type&&"treemap"!==r.chartSpec.type&&"sankey"!==r.chartSpec.type&&"circlePacking"!==r.chartSpec.type){t=!0;break}}return t}function m(e,t,i){let r=!0,n=i.getRawChartSpec(e,t);return n&&"pie"!==n.type&&"radar"!==n.type&&"gauge"!==n.type&&"wordCloud"!==n.type&&"funnel"!==n.type&&"rose"!==n.type&&"sunburst"!==n.type&&"treemap"!==n.type&&"sankey"!==n.type&&"circlePacking"!==n.type||(r=!1),r}function b(e,t,i,r){let n=!1;if(r.indicatorsAsCol&&"row"===i||!r.indicatorsAsCol&&"col"===i)for(let e=0;e<r.indicatorsDefine.length;e++){let t=r.indicatorsDefine[e];if(t.chartSpec&&"pie"!==t.chartSpec.type&&"wordCloud"!==t.chartSpec.type&&"radar"!==t.chartSpec.type&&"gauge"!==t.chartSpec.type&&"funnel"!==t.chartSpec.type&&"rose"!==t.chartSpec.type&&"sunburst"!==t.chartSpec.type&&"treemap"!==t.chartSpec.type&&"sankey"!==t.chartSpec.type&&"circlePacking"!==t.chartSpec.type){n=!0;break}}else{let i=r.getRawChartSpec(e,t);i?"pie"!==i.type&&"radar"!==i.type&&"gauge"!==i.type&&"wordCloud"!==i.type&&"funnel"!==i.type&&"rose"!==i.type&&"sunburst"!==i.type&&"treemap"!==i.type&&"sankey"!==i.type&&"circlePacking"!==i.type&&(n=!0):n=!1}return n}function y(e,t,i){let n=i.getRawChartSpec(e,t);return n?(i._table.isPivotChart()&&((n=(0,s.u)(n)).sortDataByAxis=!0,(0,r.Z)(n.series)&&n.series.forEach(e=>{e.sortDataByAxis=!0}),"pie"!==n.type&&"radar"!==n.type&&"gauge"!==n.type&&"wordCloud"!==n.type&&"funnel"!==n.type&&"rose"!==n.type&&"sunburst"!==n.type&&"treemap"!==n.type&&"sankey"!==n.type&&"circlePacking"!==n.type&&(n.axes=i.getChartAxes(e,t)),n.padding=0,n.dataZoom=[]),n):null}function v(e,t,i){var s,c,p;let g=[];if(i.indicatorsAsCol){let c=i.getIndicatorKeyInChartSpec(e,t),p=i.getColKeysPath(e,t);c.forEach((r,o)=>{let{range:s,targetTicks:f,targetRange:m,axisOption:b,chartType:y}=(0,a.V4)(e,t,o,0===o?"bottom":"top",0===o?"top":"bottom",c,p,i);(0,n.Z)(null==b?void 0:b.max)?s.max=b.max:"boxPlot"===y&&(s.max+=(s.max-s.min)/20),(0,n.Z)(null==b?void 0:b.min)?s.min=b.min:"boxPlot"===y&&(s.min-=(s.max-s.min)/20),x(b,g)||g.push((0,l.Z)({range:s,label:{style:{fontSize:h.$M}}},b,{type:(null==b?void 0:b.type)||"linear",orient:0===o?"bottom":"top",label:{visible:!1,flush:!0},title:{visible:!1},domainLine:{visible:!1},seriesIndex:(null==b?void 0:b.seriesId)?void 0:o,tick:{tickMode:(0,d.h)(f,m,s,o)},sync:{axisId:u}}))});let f=i.getDimensionKeyInChartSpec(i.rowHeaderLevelCount,t);(0,r.Z)(f)&&(f=f[0]);let m=i.dataset.cacheCollectedValues[f]||i.dataset.collectedValues[f]||[],b=i.getRowKeysPath(e,t),y=m[null!=b?b:""],{axisOption:v,isPercent:_,chartType:C}=(0,a.dK)(e,t,"left",i);(null==v?void 0:v.zero)&&y&&!Array.isArray(y)&&(0,o.Z)(y.min)&&(0,o.Z)(y.max)&&((null==v?void 0:v.zero)||y.min===y.max)&&(y.min=Math.min(y.min,0),y.max=Math.max(y.max,0)),g.push((0,l.Z)({domain:"linear"!==(null==v?void 0:v.type)||Array.isArray(y)?Array.from(null!=y?y:[]):void 0,range:"linear"!==(null==v?void 0:v.type)||Array.isArray(y)?void 0:y,label:{style:{fontSize:h.$M}}},v,{type:null!=(s=null==v?void 0:v.type)?s:"band",orient:"left",label:{visible:!1},domainLine:{visible:!1},tick:{visible:!1},subTick:{visible:!1},title:{visible:!1}}))}else{let s=i.getIndicatorKeyInChartSpec(e,t),f=i.getRowKeysPath(e,t);s.forEach((r,o)=>{var c,p;let{range:m,targetTicks:b,targetRange:y,axisOption:v}=(0,a.V4)(e,t,o,0===o?"left":"right",0===o?"right":"left",s,f,i),{chartType:_}=(0,a.dK)(e,t,0===o?"left":"right",i);if((0,n.Z)(null==v?void 0:v.max)?m.max=v.max:"boxPlot"===_&&(m.max+=(m.max-m.min)/20),(0,n.Z)(null==v?void 0:v.min)?m.min=v.min:"boxPlot"===_&&(m.min-=(m.max-m.min)/20),x(v,g))return;let C=[];if("heatmap"===_){let r=i.getDimensionKeyInChartSpec(i.rowHeaderLevelCount,t,"yField"),n=null!=(c=i.dataset.collectedValues[r])?c:[],l=i.getRowKeysPath(e,t);C=null!=(p=null==n?void 0:n[null!=l?l:""])?p:[]}g.push((0,l.Z)({range:m,label:{style:{fontSize:h.$M}},domain:"linear"===(null==v?void 0:v.type)?void 0:Array.from(C)},v,{type:(null==v?void 0:v.type)||"linear",orient:0===o?"left":"right",label:{visible:!1,flush:!0},title:{visible:!1},domainLine:{visible:!1},seriesIndex:(null==v?void 0:v.seriesId)?void 0:o,tick:{tickMode:(0,d.h)(b,y,m,o),visible:!1},sync:{axisId:u}}))});let m=i.getDimensionKeyInChartSpec(e,i.columnHeaderLevelCount);(0,r.Z)(m)&&(m=m[0]);let b=i.dataset.cacheCollectedValues[m]||i.dataset.collectedValues[m]||[],y=i.getColKeysPath(e,t),v=null!=(c=null==b?void 0:b[null!=y?y:""])?c:[],{axisOption:_,isPercent:C,chartType:w}=(0,a.dK)(e,t,"bottom",i);(null==_?void 0:_.zero)&&v&&!Array.isArray(v)&&(0,o.Z)(v.min)&&(0,o.Z)(v.max)&&((null==_?void 0:_.zero)||v.min===v.max)&&(v.min=Math.min(v.min,0),v.max=Math.max(v.max,0)),g.push((0,l.Z)({domain:"linear"!==(null==_?void 0:_.type)||Array.isArray(v)?Array.from(null!=v?v:[]):void 0,range:"linear"!==(null==_?void 0:_.type)||Array.isArray(v)?void 0:v,label:{style:{fontSize:h.$M}}},_,{type:null!=(p=null==_?void 0:_.type)?p:"band",orient:"bottom",visible:!0,label:{visible:!1},domainLine:{visible:!1},tick:{visible:!1},subTick:{visible:!1},title:{visible:!1}}))}return g}function _(e,t,i){var r;let n=i.getRawChartSpec(e,t);if(null==n?void 0:n.series){let e={};return(null==(r=n.data)?void 0:r.id)&&(e[n.data.id]=void 0),null==n||n.series.forEach(t=>{var i,r,l,o,a,s,h,d,u,c,p;if(!(null==(i=t.data)?void 0:i.fromDataId))if(null==(r=t.data)?void 0:r.transforms)e[null!=(p=null!=(u=null==(d=t.data)?void 0:d.id)?u:null==(c=n.data)?void 0:c.id)?p:"data"]=void 0;else{let i="horizontal"===t.direction?t.xField:t.yField;e[null!=(s=null!=(o=null==(l=t.data)?void 0:l.id)?o:null==(a=n.data)?void 0:a.id)?s:"data"]=(null==(h=t.data)?void 0:h.id)?i:void 0}}),e}return n.data.id}function C(e){let t=!1;for(let i=0;i<e.columnObjects.length;i++)if(e.columnObjects[i].chartSpec){t=!0;break}return t}function x(e,t){return!!(e&&(0,r.Z)(e.seriesId))&&!!(e.seriesId.length>0)&&!!(t.filter(t=>!(t.orient!==e.orient||!t.seriesId||t.seriesId.length!==e.seriesId.length||!t.seriesId.every((t,i)=>t===e.seriesId[i]))).length>0)}},58473:function(e,t,i){i.d(t,{h:()=>o,r:()=>l});var r=i(54833),n=i(26874);function l(e,t,i,l,o,a){let s=r.F.getFunction("getAxisDomainRangeAndLabels"),{axisOption:h,isZeroAlign:d}=(0,n.dK)(t,i,0===l?"right":"left",a),{ticks:u}=s(e.min,e.max,h,d,"bottom"===o||"top"===o?a._table.getColWidth(t)||a._table.tableNoFrameWidth:a._table.getRowHeight(i)||a._table.tableNoFrameHeight);return u}function o(e,t,i,r){return 0!==r&&e?()=>e.map(e=>{let r=(e-t.min)/(t.max-t.min);return Math.round(100*((i.max-i.min)*r+i.min))/100}):void 0}},20829:function(e,t,i){i.d(t,{C1:()=>d,MP:()=>a,N3:()=>u,OT:()=>s,Ul:()=>c,VN:()=>p,WM:()=>h,uu:()=>g});var r=i(95723),n=i(83624),l=i(37098),o=i(24687);function a(e){let t=e.columnObjects;for(let e=0;e<t.length;e++){let i=t[e];if(null==i?void 0:i.aggregation)return!0}return!1}function s(e){let t=e.columnObjects,i=0;for(let e=0;e<t.length;e++){let r=t[e];(null==r?void 0:r.aggregation)&&(Array.isArray(null==r?void 0:r.aggregation)?i=Math.max(i,r.aggregation.filter(e=>e.showOnTop).length):r.aggregation.showOnTop&&(i=Math.max(i,1)))}return i}function h(e){let t=e.columnObjects,i=0;for(let e=0;e<t.length;e++){let r=t[e];(null==r?void 0:r.aggregation)&&(Array.isArray(null==r?void 0:r.aggregation)?i=Math.max(i,r.aggregation.filter(e=>!e.showOnTop).length):r.aggregation.showOnTop||(i=Math.max(i,1)))}return i}function d(e){if(e._table.internalProps.groupBy)return!0;let{columns:t}=e._table.options;if((0,r.Z)(t)&&t.length>0)for(let e=0;e<t.length;e++){let i=t[e];if(!(0,n.Z)(i)&&i.tree)return!0}return!1}function u(e){let{columns:t,rows:i,indicators:l}=e.options;if(e.isPivotTable()){if((0,r.Z)(t)&&t.length>0)for(let e=0;e<t.length;e++){let i=t[e];if(!(0,n.Z)(i)&&("image"===i.headerType||"video"===i.headerType||"function"==typeof i.headerType)&&i.imageAutoSizing)return!0}if((0,r.Z)(i)&&i.length>0)for(let e=0;e<i.length;e++){let t=i[e];if(!(0,n.Z)(t)&&("image"===t.headerType||"video"===t.headerType||"function"==typeof t.headerType)&&t.imageAutoSizing)return!0}if((0,r.Z)(l)&&l.length>0)for(let e=0;e<l.length;e++){let t=l[e];if(!(0,n.Z)(t)&&(("image"===t.cellType||"video"===t.cellType||"function"==typeof t.cellType)&&t.imageAutoSizing||("image"===t.headerType||"video"===t.headerType||"function"==typeof t.headerType)&&t.imageAutoSizing))return!0}}else if((0,r.Z)(t)&&t.length>0)for(let e=0;e<t.length;e++){let i=t[e];if(("image"===i.cellType||"video"===i.cellType||"function"==typeof i.cellType)&&i.imageAutoSizing||("image"===i.headerType||"video"===i.headerType||"function"==typeof i.headerType)&&i.imageAutoSizing)return!0}return!1}function c(e,t){var i,r,n,a,s,h,d,u,c,g,f,m,b,y,v;let _,C;t.columnTree&&(!1!==e.options.indicatorsAsCol&&!1!==e.options.supplementIndicatorNodes&&(e.internalProps.columnTree=p(e.internalProps.columnTree,t.indicators)),_=new o.KO(null!=(i=e.internalProps.columnTree)?i:[],e.layoutNodeId,e.options.columnHierarchyType,"grid"!==e.options.columnHierarchyType?null!=(r=e.options.columnExpandLevel)?r:1:void 0)),t.rowTree&&(!1===e.options.indicatorsAsCol&&!1!==e.options.supplementIndicatorNodes&&(e.internalProps.rowTree=p(e.internalProps.rowTree,t.indicators)),C=new o.KO(null!=(n=e.internalProps.rowTree)?n:[],e.layoutNodeId,e.options.rowHierarchyType,"grid"!==e.options.rowHierarchyType?null!=(a=e.options.rowExpandLevel)?a:1:void 0));let x=(null==(s=null==C?void 0:C.dimensionKeys)?void 0:s.count)?C.dimensionKeys.valueArr():null!=(d=null==(h=t.rows)?void 0:h.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?d:[],w=(null==(u=null==_?void 0:_.dimensionKeys)?void 0:u.count)?_.dimensionKeys.valueArr():null!=(g=null==(c=t.columns)?void 0:c.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?g:[],S=null!=(m=null==(f=t.indicators)?void 0:f.reduce((t,i)=>{var r;return"string"==typeof i?t.push(i):(t.push(i.indicatorKey),(i.chartSpec||i.sparklineSpec)&&((null==(r=e.internalProps.dataConfig)?void 0:r.aggregationRules)?e.internalProps.dataConfig.aggregationRules.find(e=>e.indicatorKey===i.indicatorKey)||e.internalProps.dataConfig.aggregationRules.push({field:i.indicatorKey,indicatorKey:i.indicatorKey,aggregationType:l.E.NONE}):e.internalProps.dataConfig?e.internalProps.dataConfig.aggregationRules=[{field:i.indicatorKey,indicatorKey:i.indicatorKey,aggregationType:l.E.NONE}]:e.internalProps.dataConfig={aggregationRules:[{field:i.indicatorKey,indicatorKey:i.indicatorKey,aggregationType:l.E.NONE}]})),t},[]))?m:[];return"grid"!==t.rowHierarchyType&&(null!=(y=null==(b=t.extensionRows)?void 0:b.length)?y:0)>=1&&(null==(v=t.extensionRows)||v.forEach(e=>{let t=[];e.rows.forEach(e=>{"string"==typeof e?t.push(e):t.push(e.dimensionKey)}),x.push(...t)})),{rowKeys:x,columnKeys:w,indicatorKeys:S,columnDimensionTree:_,rowDimensionTree:C}}function p(e,t){let i=(e,r)=>{e.forEach(e=>{var n;e.indicatorKey||r||(null==(n=e.children)?void 0:n.length)&&e.children?e.children&&Array.isArray(e.children)&&i(e.children,r||!!e.indicatorKey):e.children=null==t?void 0:t.map(e=>{var t;return"string"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:null!=(t=e.title)?t:e.indicatorKey}})})};return(null==e?void 0:e.length)?i(e,!1):e=null==t?void 0:t.map(e=>{var t;return"string"==typeof e?{indicatorKey:e,value:e}:{indicatorKey:e.indicatorKey,value:null!=(t=e.title)?t:e.indicatorKey}}),e}function g(e,t,i,r){let n=[];for(let e=0;e<(null==t?void 0:t.length);e++){let i=t[e];(null==i?void 0:i.hide)&&n.push(i)}(n.length||i)&&(0,o.gD)(e,[],n,i,r)}},25175:function(e,t,i){i.d(t,{z:()=>g});var r=i(75665),n=i(36781),l=i(51130),o=i(85162),a=i(24687),s=i(64776),h=i(95723),d=i(65755),u=i(76352),c=i(54833);let p={startInTotal:0,afterSpanLevel:0};class g{constructor(e,t,i,n){var o,a,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T;this.colIndex=0,this._showHeader=!0,this.columnHeaderObjs=[],this.rowHeaderObjs=[],this._cornerHeaderCellFullPathIds=[],this._columnHeaderCellFullPathIds=[],this._rowHeaderCellFullPathIds=[],this._rowHeaderCellFullPathIds_FULL=[],this._cornerHeaderCellIds=[],this._columnHeaderCellIds=[],this._rowHeaderCellIds=[],this._rowHeaderCellIds_FULL=[],this._columnWidths=[],this.columnPaths=[],this._headerObjects=[],this._headerObjectMap={},this._indicators=[],this.indicatorsAsCol=!0,this.hideIndicatorName=!1,this._showRowHeader=!0,this._showColumnHeader=!0,this._indicatorShowType="column",this.rowHierarchyTextStartAlignment=!1,this.rowDimensionKeys=[],this.colDimensionKeys=[],this.indicatorKeys=[],this.indicatorDimensionKey=l.ek,this._rowHeaderExtensionTree={},this._extensionRowDimensionKeys=[],this.fullRowDimensionKeys=[],this.hasLeftIndicatorAxis=!1,this.hasRightIndicatorAxis=!1,this.hasTopIndicatorAxis=!1,this.hasBottomIndicatorAxis=!1,this.leftRowSeriesNumberColumnCount=0,this.rightRowSeriesNumberColumnCount=0,this._useGetBodyCache=!1,this._getBodyCache=new Map,this._useHeaderPathCache=!1,this._colHeaderPathCache=new Map,this._rowHeaderPathCache=new Map,this.matchDimensionPath=(e,t,i,r=!1,n=0)=>{if(n>=e.length)return;let l=e[n];for(let o=0;o<t.length;o++){let a=t[o];if(!(0,s.Z)(l.indicatorKey)&&a.dimensionKey===l.dimensionKey&&a.value===l.value||(0,s.Z)(l.indicatorKey)&&a.indicatorKey===l.indicatorKey&&((0,s.Z)(a.value)&&(0,s.Z)(l.value)&&l.value===a.value||!(0,s.Z)(a.value)||!(0,s.Z)(l.value))){let t=a.children;if(n===e.length-1){if(!i)return a;{let e=r&&t&&t.some(e=>"axis"===e.dimensionKey);if(!(null==t?void 0:t.length)||e)return a;let i=e=>{for(let t of e){let e=t.children,n=r&&e&&e.some(e=>"axis"===e.dimensionKey);if(!(null==e?void 0:e.length)||n)return t;let l=i(e);if(l)return l}},n=i(t);if(n)return n}}if(null==t?void 0:t.length){let l=this.matchDimensionPath(e,t,i,r,n+1);if(l)return l}else if(n===e.length-1)return a}}},this.sharedVar=e.layoutNodeId,this._table=e,"tree"===e.options.rowHierarchyType&&(this.extensionRows=e.options.extensionRows),this.dataset=t,this._largeCellRangeCache=[],this._CellHeaderPathMap=new Map,this.rowTree=e.internalProps.rowTree,this.columnTree=e.internalProps.columnTree,this.rowsDefine=null!=(o=e.internalProps.rows)?o:[],this.columnsDefine=null!=(a=e.internalProps.columns)?a:[],this.indicatorsDefine=null!=(d=e.internalProps.indicators)?d:[],this.indicatorTitle=e.options.indicatorTitle,this.indicatorsAsCol=null==(u=e.options.indicatorsAsCol)||u,this.hideIndicatorName=null!=(c=e.options.hideIndicatorName)&&c,this.showRowHeader=null==(p=e.options.showRowHeader)||p,this.showColumnHeader=null==(g=e.options.showColumnHeader)||g,this.rowHeaderTitle=e.options.rowHeaderTitle,this.columnHeaderTitle=e.options.columnHeaderTitle,this.rowHierarchyType=null!=(f=e.options.rowHierarchyType)?f:"grid",this.columnHierarchyType=null!=(m=e.options.columnHierarchyType)?m:"grid",this.rowExpandLevel=null!=(b=e.options.rowExpandLevel)?b:1,this.columnExpandLevel=null!=(y=e.options.columnExpandLevel)?y:1,this.rowHierarchyIndent=null!=(v=e.options.rowHierarchyIndent)?v:20,this.rowHierarchyTextStartAlignment=e.options.rowHierarchyTextStartAlignment,this.cornerSetting=Object.assign({titleOnDimension:"column",forceShowHeader:!1},e.options.corner),(null==(C=null==(_=this._table.options)?void 0:_.customConfig)?void 0:C.enablePivotPathCache)&&(this._useHeaderPathCache=!0,this._colHeaderPathCache.clear(),this._rowHeaderPathCache.clear()),t&&(this.rowTree=t.rowHeaderTree,this.columnTree=t.colHeaderTree),null==(x=this.indicatorsDefine)||x.forEach(e=>{"string"==typeof e?this.indicatorKeys.push(e):this.indicatorKeys.push(e.indicatorKey)}),this.columnDimensionTree=i,this.rowDimensionTree=n,this.colDimensionKeys=this.columnDimensionTree.dimensionKeysIncludeVirtual.valueArr(),this.rowDimensionKeys=this.rowDimensionTree.dimensionKeysIncludeVirtual.valueArr(),this.fullRowDimensionKeys=this.fullRowDimensionKeys.concat(this.rowDimensionKeys),this._table.isPivotChart()&&(this.hasLeftIndicatorAxis=!1,this.hasRightIndicatorAxis=!1,this.hasTopIndicatorAxis=!1,this.hasBottomIndicatorAxis=!1,this.indicatorsDefine.forEach(e=>{var t,i,r,n;if(e.hasLeftIndicatorAxis=!1,e.hasRightIndicatorAxis=!1,e.hasTopIndicatorAxis=!1,e.hasBottomIndicatorAxis=!1,!(null==e?void 0:e.chartSpec))return;let l=null!=(i=null!=(t=e.chartSpec.axes)?t:this._table.pivotChartAxes)?i:[],o=new Set;(null!=l?l:[]).forEach(e=>{(null==e?void 0:e.orient)&&!1!==e.visible&&o.add(e.orient)});let a=(null==(n=null==(r=e.chartSpec)?void 0:r.series)?void 0:n.length)>1;if(this.indicatorsAsCol){let t=o.has("top"),i=o.has("bottom");if(l.length||(i=!0),a){let e=l.some(e=>"top"===(null==e?void 0:e.orient)&&!1===e.visible);l.length&&e||(t=!0,l.some(e=>"bottom"===(null==e?void 0:e.orient)&&!1===e.visible)||(i=!0))}e.hasTopIndicatorAxis=t,e.hasBottomIndicatorAxis=i,e.hasLeftIndicatorAxis=!1,e.hasRightIndicatorAxis=!1}else{let t=o.has("left"),i=o.has("right");if(l.length||(t=!0),a){let e=l.some(e=>"right"===(null==e?void 0:e.orient)&&!1===e.visible);l.length&&e||(i=!0,l.some(e=>"left"===(null==e?void 0:e.orient)&&!1===e.visible)||(t=!0))}e.hasLeftIndicatorAxis=t,e.hasRightIndicatorAxis=i,e.hasTopIndicatorAxis=!1,e.hasBottomIndicatorAxis=!1}this.hasLeftIndicatorAxis||(this.hasLeftIndicatorAxis=!!e.hasLeftIndicatorAxis),this.hasRightIndicatorAxis||(this.hasRightIndicatorAxis=!!e.hasRightIndicatorAxis),this.hasTopIndicatorAxis||(this.hasTopIndicatorAxis=!!e.hasTopIndicatorAxis),this.hasBottomIndicatorAxis||(this.hasBottomIndicatorAxis=!!e.hasBottomIndicatorAxis)})),this.resetRowHeaderLevelCount(),this.resetColumnHeaderLevelCount(),this._generateColHeaderIds(),this.colIndex=0,this._generateRowHeaderIds(),this._rowHeaderCellFullPathIds_FULL=(0,r.p4)(this._rowHeaderCellFullPathIds_FULL),"tree"===e.options.rowHierarchyType&&(null==(w=this.extensionRows)?void 0:w.length)>=1&&(this.generateExtensionRowTree(),this.extensionRows.forEach(e=>{let t=[];e.rows.forEach(e=>{"string"==typeof e?t.push(e):t.push(e.dimensionKey)}),this._extensionRowDimensionKeys.push(t),this.fullRowDimensionKeys=this.fullRowDimensionKeys.concat(t)})),this.sharedVar.seqId=Math.max(this.sharedVar.seqId,this._headerObjects.length);let R,E=this.columnDimensionTree.dimensionKeysIncludeVirtual.valueArr();!this.dataset||this._table.isPivotChart()||0!==(null!=(A=null==(S=this.dataset.records)?void 0:S.length)?A:0)||this.dataset.customColTree||(E=this.columnsDefine.map(e=>"string"==typeof e?e:e.dimensionKey),this.indicatorsAsCol&&E.push(this.indicatorDimensionKey)),E=this.columnHeaderTitle?[""].concat(E):E;let P=[];if("tree"===this.rowHierarchyType&&(null==(k=this.extensionRows)?void 0:k.length)>=1){let e=[];e.push(this.rowDimensionKeys[0]),this._extensionRowDimensionKeys.forEach(t=>{e.push(t[0])}),P=this.extensionRows.reduce((e,t)=>e.concat(t.rows),[]),R=this.rowHeaderTitle?[""].concat(e):e}else R=this.rowDimensionTree.dimensionKeysIncludeVirtual.valueArr(),!this.dataset||this._table.isPivotChart()||0!==(null!=(T=null==(M=this.dataset.records)?void 0:M.length)?T:0)||this.dataset.customRowTree||(R=this.rowsDefine.map(e=>"string"==typeof e?e:e.dimensionKey),this.indicatorsAsCol||R.push(this.indicatorDimensionKey)),R=this.rowHeaderTitle?[""].concat(R):R;this.cornerHeaderObjs=this._addCornerHeaders(E,R,this.columnsDefine.concat(...this.rowsDefine,...P)),this.colIndex=0,this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this.indicatorsAsCol&&!this.hideIndicatorName?this._indicatorShowType="column":this.indicatorsAsCol||this.hideIndicatorName?this._indicatorShowType="none":this._indicatorShowType="row",this.generateCellIdsConsiderHideHeader(),this.setPagination(e.options.pagination),this._table.isPivotChart()&&(this._chartItemSpanSize=0,this._chartItemBandSize=0,this._indicators.find(e=>{var t,i,r,n,l,o,a,s;(null==(t=null==e?void 0:e.style)?void 0:t.padding)&&(this._chartPadding=e.style.padding),(null==(i=e.chartSpec)?void 0:i.barWidth)&&"number"==typeof e.chartSpec.barWidth&&(this._chartItemSpanSize=null==(r=e.chartSpec)?void 0:r.barWidth);let d=null==(l=null==(n=e.chartSpec)?void 0:n.axes)?void 0:l.find(e=>"band"===e.type);return(null==d?void 0:d.bandSize)&&(this._chartItemBandSize=null==d?void 0:d.bandSize,this._chartPaddingInner=null!=(o=(0,h.Z)(d.paddingInner)?d.paddingInner[0]:d.paddingInner)?o:0,this._chartPaddingOuter=null!=(a=(0,h.Z)(d.paddingOuter)?d.paddingOuter[0]:d.paddingOuter)?a:0),this._chartItemSpanSize>0||(null==(s=e.chartSpec.series)||s.find(e=>(e.barWidth&&"number"==typeof e.barWidth&&(this._chartItemSpanSize=e.barWidth),this._chartItemSpanSize>0)),!1)})),this.handleRowSeriesNumber(e.internalProps.rowSeriesNumber),this.setColumnWidths()}handleRowSeriesNumber(e){var t;e&&(Array.isArray(e)?this.rowSeriesNumberColumn=e.map(e=>{var t;return{id:"",title:e.title,define:e,cellType:null!=(t=e.cellType)?t:"text",headerType:e.cellType&&"radio"!==e.cellType?e.cellType:"text",width:e.width,style:e.style,format:e.format,field:e.field,icon:e.icon,headerIcon:e.headerIcon,isChildNode:!1}}):this.rowSeriesNumberColumn=[{id:"",title:e.title,define:e,cellType:null!=(t=e.cellType)?t:"text",headerType:e.cellType&&"radio"!==e.cellType?e.cellType:"text",style:e.style,width:e.width,format:e.format,field:"",icon:e.icon,headerIcon:e.headerIcon,isChildNode:!1}],this.leftRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter(e=>!0),this.rightRowSeriesNumberColumn=this.rowSeriesNumberColumn.filter(e=>!1),this.leftRowSeriesNumberColumnCount=this.leftRowSeriesNumberColumn.length,this.rightRowSeriesNumberColumnCount=this.rightRowSeriesNumberColumn.length)}_generateColHeaderIds(){var e,t,i,r,n,l,o,a;if((null==(e=this.columnDimensionTree.tree.children)?void 0:e.length)>=1)if("grid-tree"===this.columnHierarchyType)this._addHeadersForGridTreeMode(this._columnHeaderCellFullPathIds,0,this.columnDimensionTree.tree.children,[],this.columnDimensionTree.totalLevel,this._getColumnHeaderTreeExpandedMaxLevelCount(),!0,this.columnsDefine,this.columnHeaderObjs,!1);else{let e=0;if(this.dataset&&!this._table.isPivotChart()&&0===(null!=(i=null==(t=this.dataset.records)?void 0:t.length)?i:0)&&!this.dataset.customColTree&&!this.dataset.customRowTree&&this.indicatorsAsCol&&this._getColumnHeaderTreeExpandedMaxLevelCount()<this.columnHeaderLevelCount){e=this.columnHeaderLevelCount-this._getColumnHeaderTreeExpandedMaxLevelCount();for(let t=0;t<e;t++)this._columnHeaderCellFullPathIds.unshift([])}this._addHeaders(this._columnHeaderCellFullPathIds,e,this.columnDimensionTree.tree.children,[],this.columnHeaderObjs)}if(this.columnHeaderTitle){this.sharedVar.seqId=Math.max(this.sharedVar.seqId,this._headerObjects.length);let e=++this.sharedVar.seqId,t=Array(this.colCount-this.rowHeaderLevelCount-this.rightFrozenColCount).fill(e);this._columnHeaderCellFullPathIds.unshift(t);let i={id:e,title:"string"==typeof this.columnHeaderTitle.title?this.columnHeaderTitle.title:this.columnsDefine.reduce((e,t)=>"string"==typeof t?e:e+(e?`/${t.title}`:`${t.title}`),""),field:void 0,headerType:null!=(n=null==(r=this.columnHeaderTitle)?void 0:r.headerType)?n:"text",style:null==(l=this.columnHeaderTitle)?void 0:l.headerStyle,define:{id:e,disableHeaderHover:!!(null==(o=this.columnHeaderTitle)?void 0:o.disableHeaderHover),disableHeaderSelect:!!(null==(a=this.columnHeaderTitle)?void 0:a.disableHeaderSelect)}};this.columnHeaderObjs.push(i),this._headerObjects[e]=i}}_generateRowHeaderIds(){var e,t,i,r,n,l,o,a,s,h;if((null==(e=this.rowDimensionTree.tree.children)?void 0:e.length)>=1)if("tree"===this.rowHierarchyType)this._addHeadersForTreeMode(this._rowHeaderCellFullPathIds_FULL,0,this.rowDimensionTree.tree.children,[],this.rowDimensionTree.totalLevel,!0,this.rowsDefine,this.rowHeaderObjs);else if("grid-tree"===this.rowHierarchyType)this._addHeadersForGridTreeMode(this._rowHeaderCellFullPathIds_FULL,0,this.rowDimensionTree.tree.children,[],this.rowDimensionTree.totalLevel,this._getRowHeaderTreeExpandedMaxLevelCount(),!0,this.rowsDefine,this.rowHeaderObjs,!0);else{let e=0;if(this.dataset&&!this._table.isPivotChart()&&0===(null!=(i=null==(t=this.dataset.records)?void 0:t.length)?i:0)&&!this.dataset.customColTree&&!this.dataset.customRowTree&&!this.indicatorsAsCol&&this._getRowHeaderTreeExpandedMaxLevelCount()<this.rowHeaderLevelCount){e=this.rowHeaderLevelCount-this._getRowHeaderTreeExpandedMaxLevelCount();for(let t=0;t<e;t++)this._rowHeaderCellFullPathIds_FULL.unshift([])}this._addHeaders(this._rowHeaderCellFullPathIds_FULL,e,this.rowDimensionTree.tree.children,[],this.rowHeaderObjs)}if(this.rowHeaderTitle){this.sharedVar.seqId=Math.max(this.sharedVar.seqId,this._headerObjects.length);let e=++this.sharedVar.seqId,t=Array(null!=(n=null==(r=this._rowHeaderCellFullPathIds_FULL[0])?void 0:r.length)?n:this.rowDimensionTree.tree.size).fill(e);this._rowHeaderCellFullPathIds_FULL.unshift(t);let i={id:e,title:"string"==typeof this.rowHeaderTitle.title?this.rowHeaderTitle.title:this.rowsDefine.reduce((e,t)=>"string"==typeof t?e:e+(e?`/${t.title}`:`${t.title}`),""),field:void 0,headerType:null!=(o=null==(l=this.rowHeaderTitle)?void 0:l.headerType)?o:"text",style:null==(a=this.rowHeaderTitle)?void 0:a.headerStyle,define:{id:e,disableHeaderHover:!!(null==(s=this.rowHeaderTitle)?void 0:s.disableHeaderHover),disableHeaderSelect:!!(null==(h=this.rowHeaderTitle)?void 0:h.disableHeaderSelect)}};this.rowHeaderObjs.push(i),this._headerObjects[e]=i}}_getRowHeaderTreeExpandedMaxLevelCount(){return"tree"===this.rowHierarchyType?1:"grid-tree"===this.rowHierarchyType?"row"===this.cornerSetting.titleOnDimension?this.rowDimensionTree.totalLevel:this.indicatorsAsCol?this.rowDimensionTree.expandedMaxLevel:this.rowDimensionTree.expandedMaxLevel+1:this.rowDimensionTree.totalLevel}_getColumnHeaderTreeExpandedMaxLevelCount(){return"grid-tree"===this.columnHierarchyType?"column"===this.cornerSetting.titleOnDimension?this.columnDimensionTree.totalLevel:!1===this.indicatorsAsCol?this.columnDimensionTree.expandedMaxLevel:this.columnDimensionTree.expandedMaxLevel+1:this.columnDimensionTree.totalLevel}_addHeaders(e,t,i,r,n){let l=this;e[t]||function(t){let i=e[t]=[];if(0===l.colIndex)return;let r=e[t-1];for(let e=0;e<(null==r?void 0:r.length);e++)i[e]=r[e]}(t);for(let l=0;l<i.length;l++){let o=i[l];(0,a.g3)(o,e,n,r,t,this)}}_addHeadersForTreeMode(e,t,i,r,n,l,o,s){let h=this;e[t]||function(t){let i=e[t]=[];if(0===h.colIndex)return;let r=e[t-1];for(let e=0;e<(null==r?void 0:r.length);e++)i[e]=r[e]}(t);for(let h=0;h<i.length;h++){let d=i[h];(0,a.py)(d,e,s,r,t,n,l,o,this)}}_addHeadersForGridTreeMode(e,t,i,r,n,l,o,s,h,d){let u=this;e[t]||function(t){let i=e[t]=[];if(0===u.colIndex)return;let r=e[t-1];for(let e=0;e<(null==r?void 0:r.length);e++)i[e]=r[e]}(t);for(let u=0;u<i.length;u++){let c=i[u];(0,a.jS)(c,e,h,r,t,n,l,o,s,d,this.indicatorsAsCol,this)}}_addCornerHeaders(e,t,i){var r,n,l,o,a,s,h,d,u,c;this._cornerHeaderCellFullPathIds=[];let p=[],g="grid-tree"===this.columnHierarchyType&&this._getColumnHeaderTreeExpandedMaxLevelCount()||this.columnHeaderLevelCount,f="grid-tree"===this.rowHierarchyType&&this._getRowHeaderTreeExpandedMaxLevelCount()||this.rowHeaderLevelCount;if(0===g||0===f)return p;if("all"===this.cornerSetting.titleOnDimension)if(this.indicatorsAsCol){if(e)for(let t=0;t<g;t++){let l=e[t],o=++this.sharedVar.seqId,a=i.find(e=>"string"!=typeof e&&e.dimensionKey===l),s={id:o,title:l===this.indicatorDimensionKey?this.indicatorTitle:a?a.title:"axis"===l?"":l,field:l,style:this.cornerSetting.headerStyle,headerType:null!=(r=this.cornerSetting.headerType)?r:"text",showSort:null==a?void 0:a.showSortInCorner,sort:null==a?void 0:a.sort,define:{showSort:null==a?void 0:a.showSortInCorner,sort:null==a?void 0:a.sort,dimensionKey:l,id:o,value:l,headerEditor:this.cornerSetting.headerEditor,disableHeaderHover:!!this.cornerSetting.disableHeaderHover,disableHeaderSelect:!!this.cornerSetting.disableHeaderSelect},dropDownMenu:null==a?void 0:a.cornerDropDownMenu,headerIcon:null==a?void 0:a.cornerHeaderIcon,pivotInfo:{value:null!=(n=null==a?void 0:a.title)?n:"",dimensionKey:l,isPivotCorner:!0},description:null==a?void 0:a.cornerDescription};p[o]=s,this._headerObjects[o]=s,this._cornerHeaderCellFullPathIds[t]||(this._cornerHeaderCellFullPathIds[t]=[]);for(let e=0;e<f;e++)this._cornerHeaderCellFullPathIds[t][e]=o}if(t)for(let e=0;e<f;e++){let r=t[e],n=++this.sharedVar.seqId,a=i.find(e=>"string"!=typeof e&&e.dimensionKey===r),s={id:n,title:r===this.indicatorDimensionKey?this.indicatorTitle:a?a.title:"axis"===r?"":r,field:r,style:this.cornerSetting.headerStyle,headerType:null!=(l=this.cornerSetting.headerType)?l:"text",showSort:null==a?void 0:a.showSortInCorner,sort:null==a?void 0:a.sort,define:{showSort:null==a?void 0:a.showSortInCorner,sort:null==a?void 0:a.sort,dimensionKey:r,id:n,value:r,headerEditor:this.cornerSetting.headerEditor,disableHeaderHover:!!this.cornerSetting.disableHeaderHover,disableHeaderSelect:!!this.cornerSetting.disableHeaderSelect},dropDownMenu:null==a?void 0:a.cornerDropDownMenu,headerIcon:null==a?void 0:a.cornerHeaderIcon,pivotInfo:{value:null!=(o=null==a?void 0:a.title)?o:"",dimensionKey:r,isPivotCorner:!0},description:null==a?void 0:a.cornerDescription};p[n]=s,this._headerObjects[n]=s,this._cornerHeaderCellFullPathIds[this._cornerHeaderCellFullPathIds.length-1]||(this._cornerHeaderCellFullPathIds[this._cornerHeaderCellFullPathIds.length-1]=[]),this._cornerHeaderCellFullPathIds[this._cornerHeaderCellFullPathIds.length-1][e]=n}}else{if(t)for(let e=0;e<f;e++){let r=t[e],n=++this.sharedVar.seqId,l=i.find(e=>"string"!=typeof e&&e.dimensionKey===r),o={id:n,title:r===this.indicatorDimensionKey?this.indicatorTitle:l?l.title:"axis"===r?"":r,field:r,style:this.cornerSetting.headerStyle,headerType:null!=(a=this.cornerSetting.headerType)?a:"text",showSort:null==l?void 0:l.showSortInCorner,sort:null==l?void 0:l.sort,define:{showSort:null==l?void 0:l.showSortInCorner,sort:null==l?void 0:l.sort,dimensionKey:r,id:n,value:r,headerEditor:this.cornerSetting.headerEditor,disableHeaderHover:!!this.cornerSetting.disableHeaderHover,disableHeaderSelect:!!this.cornerSetting.disableHeaderSelect},dropDownMenu:null==l?void 0:l.cornerDropDownMenu,headerIcon:null==l?void 0:l.cornerHeaderIcon,pivotInfo:{value:null!=(s=null==l?void 0:l.title)?s:"",dimensionKey:r,isPivotCorner:!0},description:null==l?void 0:l.cornerDescription};p[n]=o,this._headerObjects[n]=o;for(let t=0;t<g;t++)this._cornerHeaderCellFullPathIds[t]||(this._cornerHeaderCellFullPathIds[t]=[]),this._cornerHeaderCellFullPathIds[t][e]=n}if(e)for(let t=0;t<g;t++){let r=e[t],n=++this.sharedVar.seqId,l=i.find(e=>"string"!=typeof e&&e.dimensionKey===r),o={id:n,title:r===this.indicatorDimensionKey?this.indicatorTitle:l?l.title:"axis"===r?"":r,field:r,style:this.cornerSetting.headerStyle,headerType:null!=(h=this.cornerSetting.headerType)?h:"text",showSort:null==l?void 0:l.showSortInCorner,sort:null==l?void 0:l.sort,define:{showSort:null==l?void 0:l.showSortInCorner,sort:null==l?void 0:l.sort,dimensionKey:r,id:n,value:r,headerEditor:this.cornerSetting.headerEditor,disableHeaderHover:!!this.cornerSetting.disableHeaderHover,disableHeaderSelect:!!this.cornerSetting.disableHeaderSelect},dropDownMenu:null==l?void 0:l.cornerDropDownMenu,headerIcon:null==l?void 0:l.cornerHeaderIcon,pivotInfo:{value:null!=(d=null==l?void 0:l.title)?d:"",dimensionKey:r,isPivotCorner:!0},description:null==l?void 0:l.cornerDescription};p[n]=o,this._headerObjects[n]=o,this._cornerHeaderCellFullPathIds[t][this._cornerHeaderCellFullPathIds[t].length-1]=n}}else if("row"===this.cornerSetting.titleOnDimension||"column"===this.cornerSetting.titleOnDimension){let r="row"===(null==(u=this.cornerSetting)?void 0:u.titleOnDimension)?t:e;r&&r.forEach((e,t)=>{var r,n;let l=++this.sharedVar.seqId,o=i.find(t=>"string"!=typeof t&&t.dimensionKey===e),a={id:l,title:e===this.indicatorDimensionKey?this.indicatorTitle:o?o.title:"axis"===e?"":e,field:e,style:this.cornerSetting.headerStyle,headerType:null!=(r=this.cornerSetting.headerType)?r:"text",showSort:null==o?void 0:o.showSortInCorner,sort:null==o?void 0:o.sort,define:{showSort:null==o?void 0:o.showSortInCorner,sort:null==o?void 0:o.sort,dimensionKey:e,id:l,value:e,headerCustomRender:this.cornerSetting.customRender,headerCustomLayout:this.cornerSetting.customLayout,headerEditor:this.cornerSetting.headerEditor,disableHeaderHover:!!this.cornerSetting.disableHeaderHover,disableHeaderSelect:!!this.cornerSetting.disableHeaderSelect},dropDownMenu:null==o?void 0:o.cornerDropDownMenu,headerIcon:null==o?void 0:o.cornerHeaderIcon,pivotInfo:{value:null!=(n=null==o?void 0:o.title)?n:"",dimensionKey:e,isPivotCorner:!0},description:null==o?void 0:o.cornerDescription};if(p[l]=a,this._headerObjects[l]=a,"column"===this.cornerSetting.titleOnDimension){this._cornerHeaderCellFullPathIds[t]||(this._cornerHeaderCellFullPathIds[t]=[]);for(let e=0;e<this.rowHeaderLevelCount;e++)this._cornerHeaderCellFullPathIds[t][e]=l}else if("row"===this.cornerSetting.titleOnDimension)for(let e=0;e<this.columnHeaderLevelCount;e++)this._cornerHeaderCellFullPathIds[e]||(this._cornerHeaderCellFullPathIds[e]=[]),this._cornerHeaderCellFullPathIds[e][t]=l})}else{let e=++this.sharedVar.seqId,t={id:e,title:"",field:"",style:this.cornerSetting.headerStyle,headerType:null!=(c=this.cornerSetting.headerType)?c:"text",define:{dimensionKey:"",id:e,headerCustomRender:this.cornerSetting.customRender,headerCustomLayout:this.cornerSetting.customLayout,disableHeaderHover:!!this.cornerSetting.disableHeaderHover,disableHeaderSelect:!!this.cornerSetting.disableHeaderSelect}};p[e]=t,this._headerObjects[e]=t;for(let t=0;t<this.columnHeaderLevelCount;t++)for(let i=0;i<this.rowHeaderLevelCount;i++)this._cornerHeaderCellFullPathIds[t]||(this._cornerHeaderCellFullPathIds[t]=[]),this._cornerHeaderCellFullPathIds[t][i]=e}return p}generateExtensionRowTree(){this.extensionRows.forEach((e,t)=>{let i=this._rowHeaderCellFullPathIds_FULL;this._rowHeaderCellFullPathIds_FULL=[],i.forEach((t,i)=>{let r,n,l=t[t.length-1];if(this.colIndex=0,"function"==typeof e.rowTree){let i=this.findFullCellIds(t);r=e.rowTree(i.map(e=>({dimensionKey:this._headerObjects[e].field,value:this._headerObjects[e].title})))}else r=(0,d.Z)(e.rowTree);this._rowHeaderExtensionTree[l]?(this._rowHeaderExtensionTree[l].reset(this._rowHeaderExtensionTree[l].tree.children),n=this._rowHeaderExtensionTree[l]):(n=new a.KO(null!=r?r:[],this.sharedVar,this.rowHierarchyType,void 0),this._rowHeaderExtensionTree[l]=n);let o=[];this._addHeadersForTreeMode(o,0,n.tree.children,[],n.totalLevel,!0,e.rows,this.rowHeaderObjs);for(let e=0;e<o[0].length;e++)this._rowHeaderCellFullPathIds_FULL.push(t.concat(o[0][e]))})})}setColumnWidths(){var e,t,i;let r=Array(this.colCount).fill(void 0);if(this.leftRowSeriesNumberColumnCount&&(r[0]=this.leftRowSeriesNumberColumn[0]),this.showHeader&&this.showRowHeader)if(this.rowHeaderTitle&&(r[0+this.leftRowSeriesNumberColumnCount]={}),"tree"===this.rowHierarchyType){let i=this.rowDimensionKeys[0];if(i){let t=null==(e=this.rowsDefine)?void 0:e.find(e=>"string"!=typeof e&&e.dimensionKey===i);t&&(r[0+ +!!this.rowHeaderTitle+this.leftRowSeriesNumberColumnCount]={width:t.width,minWidth:t.minWidth,maxWidth:t.maxWidth})}null==(t=this._extensionRowDimensionKeys)||t.forEach((e,t)=>{var i;let n=e[0];if(n){let e=null==(i=this.extensionRows[t].rows)?void 0:i.find(e=>"string"!=typeof e&&e.dimensionKey===n);e&&(r[t+1+ +!!this.rowHeaderTitle+this.leftRowSeriesNumberColumnCount]={width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth})}})}else(this.rowDimensionTree.totalLevel>0?this.rowDimensionTree.dimensionKeysIncludeVirtual.valueArr():this.rowsDefine.map(e=>"string"==typeof e?e:e.dimensionKey)).forEach((e,t)=>{var i;let n=null==(i=this.rowsDefine)?void 0:i.find(t=>"string"!=typeof t&&t.dimensionKey===e);n&&(r[t+ +!!this.rowHeaderTitle+this.leftRowSeriesNumberColumnCount]={width:n.width,minWidth:n.minWidth,maxWidth:n.maxWidth})});if(this.indicatorsAsCol)for(let e=this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount;e<this.colCount;e++){let t=this.getBody(e,this.columnHeaderLevelCount);r[e]={width:null==t?void 0:t.width,minWidth:null==t?void 0:t.minWidth,maxWidth:null==t?void 0:t.maxWidth}}else{let e,t,n,l=0;null==(i=this._indicators)||i.forEach((i,r)=>{var o,a;"number"==typeof i.width?l=Math.max(i.width,l):"auto"===i.width&&(n=!0),"number"==typeof i.minWidth&&(t=Math.max(i.minWidth,null!=(o=t)?o:0)),"number"==typeof i.maxWidth&&(e=Math.min(i.maxWidth,null!=(a=e)?a:Number.MAX_VALUE))}),l=l>0?l:n?"auto":void 0,r.fill({width:l,minWidth:t,maxWidth:e},this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount,this.colCount-this.rightFrozenColCount)}this._columnWidths=r}get columnWidths(){return this._columnWidths}getColumnWidthDefined(e){return this._columnWidths[e]}get showHeader(){return this._showHeader}set showHeader(e){this._showHeader=e}get showColumnHeader(){return this._showColumnHeader}set showColumnHeader(e){this._showColumnHeader=e}get showRowHeader(){return this._showRowHeader}set showRowHeader(e){this._showRowHeader=e}get columnHeaderTitle(){return this._columnHeaderTitle}set columnHeaderTitle(e){this._columnHeaderTitle=e}get rowHeaderTitle(){return this._rowHeaderTitle}set rowHeaderTitle(e){this._rowHeaderTitle=e}getHeaderFieldKey(e,t){}getCellLocation(e,t){return this.isCornerHeader(e,t)?"cornerHeader":this.isColumnHeader(e,t)?"columnHeader":this.isRowHeader(e,t)?"rowHeader":"body"}isHeader(e,t){return e>=this.leftRowSeriesNumberColumnCount&&e<this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount||t>=0&&t<this.columnHeaderLevelCount||e>=this.colCount-this.rightHeaderColCount||t>=this.rowCount-this.bottomHeaderRowCount}isCornerHeader(e,t){return e>=0&&e<this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount&&t>=0&&t<this.columnHeaderLevelCount}isColumnHeader(e,t){return e>=this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount&&t>=0&&t<this.columnHeaderLevelCount}isRowHeader(e,t){return e>=this.leftRowSeriesNumberColumnCount&&e<this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount&&t>=this.columnHeaderLevelCount}isFrozen(e,t){return this.isFrozenColumn(e)||this.isRightFrozenColumn(e)||this.isBottomFrozenRow(t)||this.isFrozenRow(t)||this.isSeriesNumberInBody(e,t)||this.isSeriesNumberInHeader(e,t)}isFrozenColumn(e,t){if((0,s.Z)(t)){if(e>=0&&e<this.frozenColCount&&t>=this.frozenRowCount&&t<this.rowCount-this.bottomFrozenRowCount)return!0}else if(this.frozenColCount>0&&e>=0&&e<this.frozenColCount)return!0;return!1}isRightFrozenColumn(e,t){if((0,s.Z)(t)){if(e>=this.colCount-this.rightFrozenColCount&&t>=this.frozenRowCount&&t<this.rowCount-this.bottomFrozenRowCount)return!0}else if(this.rightFrozenColCount>0&&e>=this.colCount-this.rightFrozenColCount)return!0;return!1}isFrozenRow(e,t){if((0,s.Z)(t)){if(t>=0&&t<this.frozenRowCount&&e>=this.frozenColCount&&e<this.colCount-this.rightFrozenColCount)return!0}else if(t=e,this.frozenRowCount>0&&t>=0&&t<this.frozenRowCount)return!0;return!1}isBottomFrozenRow(e,t){if((0,s.Z)(t)){if(t>=this.rowCount-this.bottomFrozenRowCount&&e>=this.frozenColCount&&e<this.colCount-this.rightFrozenColCount)return!0}else if(t=e,this.bottomFrozenRowCount>0&&t>=this.rowCount-this.bottomFrozenRowCount)return!0;return!1}isLeftTopCorner(e,t){return e>=0&&e<this.frozenColCount&&t>=0&&t<this.frozenRowCount}isLeftBottomCorner(e,t){return e>=0&&e<this.frozenColCount&&t>=this.rowCount-this.bottomFrozenRowCount}isRightTopCorner(e,t){return e>=this.colCount-this.rightFrozenColCount&&t>=0&&t<this.frozenRowCount}isRightBottomCorner(e,t){return e>=this.colCount-this.rightFrozenColCount&&t>=this.rowCount-this.bottomFrozenRowCount}getColumnHeaderRange(){return{start:{col:this.rowHeaderLevelCount,row:0},end:{col:this.colCount-1,row:this.columnHeaderLevelCount-1}}}getRowHeaderRange(){return{start:{col:0,row:this.columnHeaderLevelCount},end:{col:this.rowHeaderLevelCount-1,row:this.rowCount-1}}}getCornerHeaderRange(){return{start:{col:0,row:0},end:{col:this.rowHeaderLevelCount-1,row:this.columnHeaderLevelCount-1}}}getBodyRange(){return{start:{col:this.rowHeaderLevelCount,row:this.columnHeaderLevelCount},end:{col:this.colCount-1,row:this.rowCount-1}}}resetCellIds(){}get frozenColCount(){return this._table.internalProps.frozenColCount?this.colCount>this._table.internalProps.frozenColCount?this._table.internalProps.frozenColCount:this.colCount:0}get frozenRowCount(){return this._table.internalProps.frozenRowCount?this.rowCount>=this._table.internalProps.frozenRowCount?this._table.internalProps.frozenRowCount:this.rowCount:0}get headerLevelCount(){return this.columnHeaderLevelCount}resetColumnHeaderLevelCount(){var e,t,i,r,n,l,a,s,h,d,u;if(this.showHeader&&this.showColumnHeader){if(this._table.isPivotChart()&&this.indicatorsAsCol&&!(null==(t=null==(e=this.dataset)?void 0:e.colKeys)?void 0:t.length)&&0===(null==(r=null==(i=this.columnDimensionTree)?void 0:i.tree)?void 0:r.level)&&!this.hasTopIndicatorAxis)return void(this.columnHeaderLevelCount=0);let c=this._getColumnHeaderTreeExpandedMaxLevelCount();return this.indicatorsAsCol&&this.hideIndicatorName&&this.colDimensionKeys[this.colDimensionKeys.length-1]===this.indicatorDimensionKey&&c--,0!==c||!this.dataset||(null==(n=this.dataset.customColTree)?void 0:n.length)?!this.dataset||this._table.isPivotChart()||0!==(null!=(d=null==(h=this.dataset.records)?void 0:h.length)?d:0)||this.dataset.customColTree||"column"!==this.cornerSetting.titleOnDimension&&"all"!==this.cornerSetting.titleOnDimension||(c=null!=(u=this.columnsDefine.length)?u:0,!this.hideIndicatorName&&this.indicatorsAsCol&&c++):("row"===this.cornerSetting.titleOnDimension||"all"===this.cornerSetting.titleOnDimension)&&this.cornerSetting.forceShowHeader?c=1:this._table.isPivotChart()||0!==(null!=(a=null==(l=this.dataset.records)?void 0:l.length)?a:0)||"column"!==this.cornerSetting.titleOnDimension&&"all"!==this.cornerSetting.titleOnDimension||(c=null!=(s=this.columnsDefine.length)?s:0),this.columnHeaderTitle&&(c+=1),this._table.isPivotChart()&&this.indicatorsAsCol&&!this.hasTopIndicatorAxis&&(0,o.eW)(this.indicatorsDefine)&&(c-=1),void(this.columnHeaderLevelCount=c)}this.columnHeaderLevelCount=this.indicatorsAsCol?+!this.hideIndicatorName:0}resetRowHeaderLevelCount(){var e,t,i,r,n,l,a,s;if(this.showHeader&&this.showRowHeader){if("tree"===this.rowHierarchyType){let i=null!=(t=null==(e=this.extensionRows)?void 0:e.length)?t:0;return this.rowHeaderTitle?void(this.rowHeaderLevelCount=1+ +!!this.rowDimensionTree.totalLevel+i):void(this.rowHeaderLevelCount=+!!this.rowDimensionTree.totalLevel+i)}let h=this._getRowHeaderTreeExpandedMaxLevelCount(),d=h;return 0!==d||!this.dataset||(null==(i=this.dataset.customRowTree)?void 0:i.length)?!this.dataset||this._table.isPivotChart()||0!==(null!=(s=null==(a=this.dataset.records)?void 0:a.length)?s:0)||this.dataset.customRowTree||"row"!==this.cornerSetting.titleOnDimension&&"all"!==this.cornerSetting.titleOnDimension||(d=this.rowsDefine.length,this.hideIndicatorName||this.indicatorsAsCol||d++):("column"===this.cornerSetting.titleOnDimension||"all"===this.cornerSetting.titleOnDimension)&&this.cornerSetting.forceShowHeader?d=1:this._table.isPivotChart()||0!==(null!=(n=null==(r=this.dataset.records)?void 0:r.length)?n:0)||"row"!==this.cornerSetting.titleOnDimension&&"all"!==this.cornerSetting.titleOnDimension||(d=null!=(l=this.rowsDefine.length)?l:0),!this.indicatorsAsCol&&(this.hideIndicatorName||!this.hasLeftIndicatorAxis&&this._table.isPivotChart()&&(0,o.eW)(this.indicatorsDefine))&&this.rowDimensionKeys[this.rowDimensionKeys.length-1]===this.indicatorDimensionKey&&(d=h-1),this.rowHeaderTitle&&(d+=1),void(this.rowHeaderLevelCount=d)}this.rowHeaderLevelCount=this.indicatorsAsCol||this.hideIndicatorName?0:1}get columnHeaderLevelCount(){return this._columnHeaderLevelCount}set columnHeaderLevelCount(e){this._columnHeaderLevelCount=e}get rowHeaderLevelCount(){return this._rowHeaderLevelCount}set rowHeaderLevelCount(e){this._rowHeaderLevelCount=e}get colCount(){var e,t,i,r;return(this._getColumnHeaderTreeExpandedMaxLevelCount()>0||this._table.isPivotChart()||(null==(e=this.dataset.records)?void 0:e.length)>0||this.dataset.records&&!Array.isArray(this.dataset.records)?(null!=(i=null==(t=this._columnHeaderCellIds[0])?void 0:t.length)?i:this.columnDimensionTree.tree.size)||+((null==(r=this._indicators)?void 0:r.length)>0):0)+this.rowHeaderLevelCount+this.rightHeaderColCount+this.leftRowSeriesNumberColumnCount}get rowCount(){var e,t,i,r;return((this._table.records||this.dataset.records)&&(!Array.isArray(this._table.records)||this._table.records.length>0)&&(null==(e=this._indicators)?void 0:e.length)>0&&!(null==(t=this._rowHeaderCellIds)?void 0:t.length)?1:null!=(r=null==(i=this._rowHeaderCellIds)?void 0:i.length)?r:0)+this.columnHeaderLevelCount+this.bottomHeaderRowCount}get bodyRowSpanCount(){return this.rowDimensionTree.tree.size}get bottomFrozenRowCount(){if(!this._table.isPivotChart())return this._table.internalProps.bottomFrozenRowCount?this.rowCount-this.headerLevelCount>=this._table.internalProps.bottomFrozenRowCount?this._table.internalProps.bottomFrozenRowCount:this.rowCount-this.headerLevelCount:0;if(this.indicatorKeys.length>=1&&(0,o.eW)(this.indicatorsDefine)){let e=this._table.pivotChartAxes.find(e=>"bottom"===e.orient);return!1===(null==e?void 0:e.visible)?0:(this.indicatorsAsCol,1)}return 0}get rightFrozenColCount(){if(!this._table.isPivotChart())return this._table.internalProps.rightFrozenColCount?this.colCount-this.rowHeaderLevelCount>=this._table.internalProps.rightFrozenColCount?this._table.internalProps.rightFrozenColCount:this.colCount-this.rowHeaderLevelCount:0;let e=this._table.pivotChartAxes.find(e=>"right"===e.orient);return!1===(null==e?void 0:e.visible)||this.indicatorsAsCol?0:+!!this.hasRightIndicatorAxis}get bodyRowCount(){return this.rowCount-this.bottomFrozenRowCount-this.headerLevelCount}get bodyColCount(){return this.colCount-this.rightFrozenColCount-this.rowHeaderLevelCount}get headerObjects(){return this._headerObjects}get columnObjects(){return this._indicators}getCellId(e,t){var i,r,n,l,o;if(t>=0&&e>=0){if(this.isSeriesNumber(e,t))return"";if(this.isCornerHeader(e,t))return null==(i=this._cornerHeaderCellIds[t])?void 0:i[e-this.leftRowSeriesNumberColumnCount];if(this.isColumnHeader(e,t))return null==(r=this._columnHeaderCellIds[t])?void 0:r[e-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount];if(this.isRowHeader(e,t))return null==(n=this._rowHeaderCellIds[t-this.columnHeaderLevelCount])?void 0:n[e-this.leftRowSeriesNumberColumnCount];if(this.isRightFrozenColumn(e,t))return null==(l=this._rowHeaderCellIds[t-this.columnHeaderLevelCount])?void 0:l[this.rowHeaderLevelCount-1];if(this.isBottomFrozenRow(e,t))return null==(o=this._columnHeaderCellIds[this.columnHeaderLevelCount-1])?void 0:o[e-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount]}}getHeader(e,t){var i;if(this.isSeriesNumberInHeader(e,t))return this.getSeriesNumberHeader(e,t);let r=this.getCellId(e,t);return null!=(i=this._headerObjectMap[r])?i:{id:void 0,field:"",headerType:"text",define:void 0}}getHeaderField(e,t){var i,r;let n=this.getCellId(e,t);return(null==(i=this._headerObjectMap[n])?void 0:i.field)||(null==(r=this.getBody(e,t))?void 0:r.field)}getHeaderCellAdressById(e){for(let t=0;t<this._columnHeaderCellIds.length;t++){let i=this._columnHeaderCellIds[t];for(let r=0;r<i.length;r++)if(i[r]===e)return{col:r+this._table.frozenColCount,row:t}}for(let t=0;t<this._rowHeaderCellIds.length;t++){let i=this._rowHeaderCellIds[t];for(let r=0;r<i.length;r++)if(i[r]===e)return{col:r,row:t+this._table.frozenRowCount}}for(let t=0;t<this._cornerHeaderCellIds.length;t++){let i=this._cornerHeaderCellIds[t];for(let r=0;r<i.length;r++)if(i[r]===e)return{col:r,row:t}}}getHeaderCellAddressByField(e){let t=this.headerObjects.find(t=>t&&t.field===e);return t&&this.getHeaderCellAdressById(t.id)}getBody(e,t){var i,r,n,l,o,a,h,d,u,c;let p=this.getBodyWidthCache(e,t);if(p)return p;if(this.isSeriesNumber(e,t)){let i=this.getSeriesNumberBody(e,t);return this.setBodyWidthCache(e,t,i),i}let g=this.getCellHeaderPaths(e,t);if(this.indicatorsAsCol){let a=null==(r=null==(i=g.colHeaderPaths)?void 0:i.find(e=>e.indicatorKey))?void 0:r.indicatorKey,h=(0,s.Z)(a)&&null!=(o=null!=(l=null==(n=this._indicators)?void 0:n.find(e=>e.indicatorKey===a))?l:this._indicators[0])?o:{id:"",field:void 0,indicatorKey:void 0,cellType:"text",define:void 0};return this.setBodyWidthCache(e,t,h),h}let f=null==(h=null==(a=g.rowHeaderPaths)?void 0:a.find(e=>e.indicatorKey))?void 0:h.indicatorKey,m=(0,s.Z)(f)&&null!=(c=null!=(u=null==(d=this._indicators)?void 0:d.find(e=>e.indicatorKey===f))?u:this._indicators[0])?c:{id:"",field:void 0,indicatorKey:void 0,cellType:"text",define:void 0};return this.setBodyWidthCache(e,t,m),m}getCellRange(e,t){var i,r;let n={start:{col:e,row:t},end:{col:e,row:t}};if(!this.isHeader(e,t)||-1===e||-1===t||this.isRightFrozenColumn(e,t)||this.isBottomFrozenRow(e,t))return n;if(this._table.isPivotChart()){if(this.isLeftBottomCorner(e,t))return{start:{col:0,row:this.rowCount-this.bottomFrozenRowCount},end:{col:this.frozenColCount-1,row:this.rowCount-1}};if(this.isRightTopCorner(e,t))return{start:{col:this.colCount-this.rightFrozenColCount,row:0},end:{col:this.colCount-1,row:this.frozenRowCount-1}};if(this.isRightBottomCorner(e,t))return{start:{col:this.colCount-this.rightFrozenColCount,row:this.rowCount-this.bottomFrozenRowCount},end:{col:this.colCount-1,row:this.rowCount-1}}}for(let i=0;i<this._largeCellRangeCache.length;i++){let r=this._largeCellRangeCache[i];if(e>=r.start.col&&e<=r.end.col&&t>=r.start.row&&t<=r.end.row)return r}if(this.isHeader(e,t)&&-1!==e&&-1!==t){let l=this.getCellId(e,t);for(let i=e-1;i>=0&&l===this.getCellId(i,t);i--)n.start.col=i;for(let r=e+1;r<(null!=(i=this.colCount)?i:0)&&l===this.getCellId(r,t);r++)n.end.col=r;for(let i=t-1;i>=0&&l===this.getCellId(e,i);i--)n.start.row=i;for(let i=t+1;i<(null!=(r=this.rowCount)?r:0)&&!(l!==this.getCellId(e,i)||this.isSeriesNumberInHeader(e,t)&&i>=this.columnHeaderLevelCount);i++)n.end.row=i}return(n.end.col-n.start.col>100||n.end.row-n.start.row>100)&&this._largeCellRangeCache.push(n),n}isCellRangeEqual(e,t,i,r){let n=this.getCellRange(e,t),l=this.getCellRange(i,r);return n.start.col===l.start.col&&n.end.col===l.end.col&&n.start.row===l.start.row&&n.end.row===l.end.row}getBodyIndexByRow(e){return e<this.columnHeaderLevelCount||e>=this.rowCount-this.bottomHeaderRowCount?-1:e-this.columnHeaderLevelCount}get bottomHeaderRowCount(){return this._table.isPivotChart()?this.bottomFrozenRowCount:0}get rightHeaderColCount(){return this._table.isPivotChart()?this.rightFrozenColCount:0}getBodyIndexByCol(e){return e<this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount||e>=this.colCount-this.rightHeaderColCount?-1:e-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount}getRecordStartRowByRecordIndex(e){return this.columnHeaderLevelCount+e}getRecordShowIndexByCell(e,t){}getCellHeaderPathsWithTreeNode(e,t){for(let i=0;i<this._largeCellRangeCache.length;i++){let r=this._largeCellRangeCache[i];if(e>=r.start.col&&e<=r.end.col&&t>=r.start.row&&t<=r.end.row)break}let i=this.getColHeaderPathCache(e,t),r=this.getRowHeaderPathCache(e,t),n=this.getBodyIndexByCol(e),l=this.getBodyIndexByRow(t)+this.currentPageStartIndex;if(!i&&t>=0&&n>=0){if(i=[],"grid-tree"===this.columnHierarchyType){let e=[];this._columnHeaderCellFullPathIds.map(t=>{e.push(t[n])});let t=this.getTreePathByCellIds(e);i.push(...t)}else i=this.columnDimensionTree.getTreePath(n,this.showHeader&&this.showColumnHeader?t-!!this.columnHeaderTitle:this.columnDimensionTree.totalLevel);this.setColHeaderPathCache(e,t,i)}if(!r&&e>=0&&l>=0){if(r=[],"tree"===this.rowHierarchyType){let e=this._rowHeaderCellFullPathIds[l],t=this.rowDimensionTree,i=0;for(;t&&e;){let n=[],l=e[i];for(n.push(l);;){let e=this._headerObjectMap[l];if(!(null==e?void 0:e.parentCellId))break;n.unshift(e.parentCellId),l=e.parentCellId}let o=this.getTreePathByCellIds(n);r.push(...o),t=this._rowHeaderExtensionTree[e[i]],i++}}else if("grid-tree"===this.rowHierarchyType){let e=this._rowHeaderCellFullPathIds[l],t=this.getTreePathByCellIds(e);r.push(...t)}else r=this.rowDimensionTree.getTreePath(l,this.showHeader&&this.showRowHeader?e-!!this.rowHeaderTitle-this.leftRowSeriesNumberColumnCount:this.rowDimensionTree.totalLevel);this.setRowHeaderPathCache(e,t,r)}return{colHeaderPaths:i,rowHeaderPaths:r,cellLocation:this.getCellLocation(e,t)}}getTreePathByCellIds(e){let t=[];for(let i=0;i<e.length;i++){let r=e[i];if(i>0&&r===e[i-1])continue;let n=this._headerObjects[r];(null==n?void 0:n.define)&&t.push(n.define)}return t}getCellHeaderPaths(e,t){var i,r;let n=this.getCellHeaderPathsWithTreeNode(e,t),l={colHeaderPaths:[],rowHeaderPaths:[],cellLocation:n.cellLocation};return null==(i=n.colHeaderPaths)||i.forEach(e=>{var t,i,r;let n={};n.dimensionKey=e.dimensionKey,n.indicatorKey=e.indicatorKey,n.value=null!=(t=e.value)?t:e.indicatorKey?null!=(r=null==(i=this.getIndicatorInfoByIndicatorKey(e.indicatorKey))?void 0:i.title)?r:"":e.value,n.virtual=e.virtual,n.role=e.role,l.colHeaderPaths.push(n)}),null==(r=n.rowHeaderPaths)||r.forEach(e=>{var t,i,r;if("axis"!==e.dimensionKey){let n={};n.dimensionKey=e.dimensionKey,n.indicatorKey=e.indicatorKey,n.value=null!=(t=e.value)?t:e.indicatorKey?null!=(r=null==(i=this.getIndicatorInfoByIndicatorKey(e.indicatorKey))?void 0:i.title)?r:"":e.value,n.virtual=e.virtual,n.role=e.role,l.rowHeaderPaths.push(n)}}),l}getCellRowHeaderFullPaths(e){let t=[];if("grid"===this.rowHierarchyType){for(let i=0;i<=Math.min(this.rowsDefine.length-1,e);i++){let e=this.rowsDefine[i];"string"==typeof e?t.push({dimensionKey:e}):t.push({dimensionKey:e.dimensionKey})}e>=this.rowsDefine.length&&!1===this.indicatorsAsCol&&this.indicatorsDefine.length>0&&("string"==typeof this.indicatorsDefine[0]?t.push({indicatorKey:this.indicatorsDefine[0]}):t.push({indicatorKey:this.indicatorsDefine[0].indicatorKey}))}return t}getIndicatorInfoByIndicatorKey(e){var t;return null==(t=this.indicatorsDefine)?void 0:t.find(t=>"string"!=typeof t&&!!e&&t.indicatorKey===e)}findFullCellIds(e){let t=[];for(let i=0;i<e.length;i++){let r=e[i];for(t.push(r);;){let e=this._headerObjectMap[r];if(!(null==e?void 0:e.parentCellId))break;t.unshift(e.parentCellId),r=e.parentCellId}}return t}getHeaderDimension(e,t){var i,r,n;if(this.isHeader(e,t)){let l=this.getHeader(e,t);return null!=(r=null==(i=this.rowsDefine)?void 0:i.find(e=>"string"!=typeof e&&e.dimensionKey===l.field))?r:null==(n=this.columnsDefine)?void 0:n.find(e=>"string"!=typeof e&&e.dimensionKey===l.field)}}isColumnIndicatorHeader(e,t){return"column"===this._indicatorShowType&&t===this.columnHeaderLevelCount-1&&e>=this.rowHeaderLevelCount}isRowIndicatorHeader(e,t){return"row"===this._indicatorShowType&&e===this.rowHeaderLevelCount-1&&t>=this.columnHeaderLevelCount}isIndicatorHeader(e,t){return this.isColumnIndicatorHeader(e,t)||this.isRowIndicatorHeader(e,t)}_rebuildRowLayout(){var e,t,i,n,l,o;if(this.rowDimensionTree.reset(this.rowDimensionTree.tree.children),this.resetRowHeaderLevelCount(),this._rowHeaderCellFullPathIds_FULL=[],this.rowDimensionKeys=this.rowDimensionTree.dimensionKeysIncludeVirtual.valueArr(),this.fullRowDimensionKeys=[...this.rowDimensionKeys],"tree"===this.rowHierarchyType?this._addHeadersForTreeMode(this._rowHeaderCellFullPathIds_FULL,0,this.rowDimensionTree.tree.children,[],this.rowDimensionTree.totalLevel,!0,this.rowsDefine,this.rowHeaderObjs):"grid-tree"===this.rowHierarchyType&&(this._addHeadersForGridTreeMode(this._rowHeaderCellFullPathIds_FULL,0,this.rowDimensionTree.tree.children,[],this.rowDimensionTree.totalLevel,this._getRowHeaderTreeExpandedMaxLevelCount(),!0,this.rowsDefine,this.rowHeaderObjs,!0),this.cornerHeaderObjs=this._addCornerHeaders(this.colDimensionKeys,this.rowDimensionKeys,this.columnsDefine.concat(...this.rowsDefine))),this.rowHeaderTitle){let r=++this.sharedVar.seqId,o=Array(this.rowCount-this.columnHeaderLevelCount).fill(r);this._rowHeaderCellFullPathIds_FULL.unshift(o);let a={id:r,title:"string"==typeof this.rowHeaderTitle.title?this.rowHeaderTitle.title:this.rowsDefine.reduce((e,t)=>"string"==typeof t?e:e+(e?`/${t.title}`:`${t.title}`),""),field:void 0,headerType:null!=(t=null==(e=this.rowHeaderTitle)?void 0:e.headerType)?t:"text",style:null==(i=this.rowHeaderTitle)?void 0:i.headerStyle,define:{field:"",headerType:"text",cellType:"text",disableHeaderHover:!!(null==(n=this.rowHeaderTitle)?void 0:n.disableHeaderHover),disableHeaderSelect:!!(null==(l=this.rowHeaderTitle)?void 0:l.disableHeaderSelect)}};this.rowHeaderObjs.push(a),this._headerObjects[r]=a}this._rowHeaderCellFullPathIds_FULL=(0,r.p4)(this._rowHeaderCellFullPathIds_FULL),"tree"===this.rowHierarchyType&&(null==(o=this.extensionRows)?void 0:o.length)>=1&&this.generateExtensionRowTree(),this.colIndex=0,this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0,this.generateCellIdsConsiderHideHeader(),this.setPagination(this.pagination),"grid-tree"===this.rowHierarchyType&&this.setColumnWidths()}_rebuildColumnLayout(){var e,t,i,r,n;if(this.columnDimensionTree.reset(this.columnDimensionTree.tree.children),this.resetColumnHeaderLevelCount(),this._columnHeaderCellFullPathIds=[],this.colDimensionKeys=this.columnDimensionTree.dimensionKeysIncludeVirtual.valueArr(),"grid-tree"===this.columnHierarchyType&&(this._addHeadersForGridTreeMode(this._columnHeaderCellFullPathIds,0,this.columnDimensionTree.tree.children,[],this.columnDimensionTree.totalLevel,this._getColumnHeaderTreeExpandedMaxLevelCount(),!0,this.columnsDefine,this.columnHeaderObjs,!1),this.cornerHeaderObjs=this._addCornerHeaders(this.colDimensionKeys,this.rowDimensionKeys,this.columnsDefine.concat(...this.rowsDefine))),this.columnHeaderTitle){let l=++this.sharedVar.seqId,o=Array(this.colCount-this.rowHeaderLevelCount-this.rightFrozenColCount).fill(l);this._columnHeaderCellFullPathIds.unshift(o);let a={id:l,title:"string"==typeof this.columnHeaderTitle.title?this.columnHeaderTitle.title:this.columnsDefine.reduce((e,t)=>"string"==typeof t?e:e+(e?`/${t.title}`:`${t.title}`),""),field:void 0,headerType:null!=(t=null==(e=this.columnHeaderTitle)?void 0:e.headerType)?t:"text",style:null==(i=this.columnHeaderTitle)?void 0:i.headerStyle,define:{id:l,disableHeaderHover:!!(null==(r=this.columnHeaderTitle)?void 0:r.disableHeaderHover),disableHeaderSelect:!!(null==(n=this.columnHeaderTitle)?void 0:n.disableHeaderSelect)}};this.columnHeaderObjs.push(a),this._headerObjects[l]=a}this.colIndex=0,this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0,this.generateCellIdsConsiderHideHeader(),"grid-tree"===this.columnHierarchyType&&this.setColumnWidths()}toggleHierarchyState(e,t){var i,l,o,a,s,h,d;let u;this.colIndex=0;let c=(this.indicatorsAsCol?this.rowHeaderLevelCount-1:this.rowHeaderLevelCount-2)-this.leftRowSeriesNumberColumnCount,p=this._rowHeaderCellFullPathIds_FULL.slice(0),g=p.map((t,i)=>({col:e,row:i+this.columnHeaderLevelCount})),f=this.getHeader(e,t);if((f.define.hierarchyState=f.define.hierarchyState===n.g.collapse?n.g.expand:n.g.collapse,this.rowDimensionTree.reset(this.rowDimensionTree.tree.children),this.resetRowHeaderLevelCount(),this._rowHeaderCellFullPathIds_FULL=[],this.rowDimensionKeys=this.rowDimensionTree.dimensionKeysIncludeVirtual.valueArr(),this.fullRowDimensionKeys=[],this.fullRowDimensionKeys=this.fullRowDimensionKeys.concat(this.rowDimensionKeys),"tree"===this.rowHierarchyType)?((null==(i=this.extensionRows)?void 0:i.length)>0&&this.extensionRows.forEach(e=>{var t;let i=(null==(t=e.rows)?void 0:t.map(e=>"string"==typeof e?e:e.dimensionKey))||[];this.fullRowDimensionKeys=this.fullRowDimensionKeys.concat(i)}),this._addHeadersForTreeMode(this._rowHeaderCellFullPathIds_FULL,0,this.rowDimensionTree.tree.children,[],this.rowDimensionTree.totalLevel,!0,this.rowsDefine,this.rowHeaderObjs)):"grid-tree"===this.rowHierarchyType&&(this._addHeadersForGridTreeMode(this._rowHeaderCellFullPathIds_FULL,0,this.rowDimensionTree.tree.children,[],this.rowDimensionTree.totalLevel,this._getRowHeaderTreeExpandedMaxLevelCount(),!0,this.rowsDefine,this.rowHeaderObjs,!0),this.cornerHeaderObjs=this._addCornerHeaders(this.colDimensionKeys,this.rowDimensionKeys,this.columnsDefine.concat(...this.rowsDefine))),this.rowHeaderTitle){let e=++this.sharedVar.seqId,t=Array(this.rowCount-this.columnHeaderLevelCount).fill(e);this._rowHeaderCellFullPathIds_FULL.unshift(t);let i={id:e,title:"string"==typeof this.rowHeaderTitle.title?this.rowHeaderTitle.title:this.rowsDefine.reduce((e,t)=>"string"==typeof t?e:e+(e?`/${t.title}`:`${t.title}`),""),field:void 0,headerType:null!=(o=null==(l=this.rowHeaderTitle)?void 0:l.headerType)?o:"text",style:null==(a=this.rowHeaderTitle)?void 0:a.headerStyle,define:{field:"",headerType:"text",cellType:"text",disableHeaderHover:!!(null==(s=this.rowHeaderTitle)?void 0:s.disableHeaderHover),disableHeaderSelect:!!(null==(h=this.rowHeaderTitle)?void 0:h.disableHeaderSelect)}};this.rowHeaderObjs.push(i),this._headerObjects[e]=i}if(this._rowHeaderCellFullPathIds_FULL=(0,r.p4)(this._rowHeaderCellFullPathIds_FULL),"tree"===this.rowHierarchyType&&(null==(d=this.extensionRows)?void 0:d.length)>=1&&this.generateExtensionRowTree(),this.colIndex=0,this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0,"tree"===this.rowHierarchyType)u=function(e,t,i,r,n,l){let o=l.columnHeaderLevelCount,a=[],s=[];for(let e=0;e<i.length;e++)r.includes(i[e])||s.push(n[e]);for(let t=0;t<r.length;t++)if(!i.includes(r[t])){let i={col:e,row:o+t};a.push(i)}let h=l.getParentCellId(e,t),d=l.getRowHeaderCellAddressByCellId(h),u=[];for(d&&u.push(d);h;)(h=l.getParentCellId(d.col,d.row))&&u.push(d=l.getRowHeaderCellAddressByCellId(h));return u.some(i=>i.col===e&&i.row===t)||u.push({col:e,row:t}),{addCellPositionsRowDirection:a,removeCellPositionsRowDirection:s,updateCellPositionsRowDirection:u}}(e,t,p.map(t=>t[e-this.leftRowSeriesNumberColumnCount]),this._rowHeaderCellFullPathIds_FULL.map(t=>t[e-this.leftRowSeriesNumberColumnCount]),g,this);else{let i=(this.indicatorsAsCol?this.rowHeaderLevelCount-1:this.rowHeaderLevelCount-2)-this.leftRowSeriesNumberColumnCount;u=function(e,t,i,r,n,l){let o=l.columnHeaderLevelCount,a=[],s=[];for(let e=0;e<i.length;e++)r.includes(i[e])||s.push(n[e]);for(let t=0;t<r.length;t++)if(!i.includes(r[t])){let i={col:e,row:o+t};a.push(i)}let h=l.getParentCellId(e,t),d=l.getRowHeaderCellAddressByCellId(h),u=[];for(d&&u.push(d);h;)(h=l.getParentCellId(d.col,d.row))&&u.push(d=l.getRowHeaderCellAddressByCellId(h));let c=[],p=[];if("grid-tree"===l.rowHierarchyType&&"column"===l.cornerSetting.titleOnDimension&&l.rowHeaderLevelCount!==l._cornerHeaderCellIds[0].length)if(l.rowHeaderLevelCount>l._cornerHeaderCellIds[0].length)for(let e=l._cornerHeaderCellIds[0].length;e<l.rowHeaderLevelCount;e++)c.push({col:e,row:t});else for(let e=l.rowHeaderLevelCount;e<l._cornerHeaderCellIds[0].length;e++)p.push({col:e,row:t});return{addCellPositionsRowDirection:a,removeCellPositionsRowDirection:s,updateCellPositionsRowDirection:u,addCellPositionsColumnDirection:c,removeCellPositionsColumnDirection:p}}(e,t,p.map(e=>e[c]),this._rowHeaderCellFullPathIds_FULL.map(e=>e[i]),g,this)}return this.generateCellIdsConsiderHideHeader(),this.setPagination(this.pagination),"grid-tree"===this.rowHierarchyType&&this.setColumnWidths(),u}toggleHierarchyStateForColumnTree(e,t){var i,r,l,o,a;this.colIndex=0;let s=this.indicatorsAsCol?this.columnHeaderLevelCount-2:this.columnHeaderLevelCount-1,h=this._columnHeaderCellFullPathIds.slice(0),d=h[this.columnHeaderLevelCount-1].map((e,i)=>({col:i+this.rowHeaderLevelCount,row:t})),u=this.getHeader(e,t);if(u.define.hierarchyState=u.define.hierarchyState===n.g.collapse?n.g.expand:n.g.collapse,this.columnDimensionTree.reset(this.columnDimensionTree.tree.children),this.resetColumnHeaderLevelCount(),this._columnHeaderCellFullPathIds=[],this.colDimensionKeys=this.columnDimensionTree.dimensionKeysIncludeVirtual.valueArr(),"grid-tree"===this.columnHierarchyType&&(this._addHeadersForGridTreeMode(this._columnHeaderCellFullPathIds,0,this.columnDimensionTree.tree.children,[],this.columnDimensionTree.totalLevel,this._getColumnHeaderTreeExpandedMaxLevelCount(),!0,this.columnsDefine,this.columnHeaderObjs,!1),this.cornerHeaderObjs=this._addCornerHeaders(this.colDimensionKeys,this.rowDimensionKeys,this.columnsDefine.concat(...this.rowsDefine))),this.columnHeaderTitle){let e=++this.sharedVar.seqId,t=Array(this.colCount-this.rowHeaderLevelCount-this.rightFrozenColCount).fill(e);this._columnHeaderCellFullPathIds.unshift(t);let n={id:e,title:"string"==typeof this.columnHeaderTitle.title?this.columnHeaderTitle.title:this.columnsDefine.reduce((e,t)=>"string"==typeof t?e:e+(e?`/${t.title}`:`${t.title}`),""),field:void 0,headerType:null!=(r=null==(i=this.columnHeaderTitle)?void 0:i.headerType)?r:"text",style:null==(l=this.columnHeaderTitle)?void 0:l.headerStyle,define:{id:e,disableHeaderHover:!!(null==(o=this.columnHeaderTitle)?void 0:o.disableHeaderHover),disableHeaderSelect:!!(null==(a=this.columnHeaderTitle)?void 0:a.disableHeaderSelect)}};this.columnHeaderObjs.push(n),this._headerObjects[e]=n}this.colIndex=0,this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0;let c=this.indicatorsAsCol?this.columnHeaderLevelCount-2:this.columnHeaderLevelCount-1,p=function(e,t,i,r,n,l){let o=l.rowHeaderLevelCount,a=[],s=[];for(let e=0;e<i.length;e++)r.includes(i[e])||s.push(n[e]);for(let e=0;e<r.length;e++)if(!i.includes(r[e])){let i={col:o+e,row:t};a.push(i)}let h=l.getParentCellId(e,t),d=l.getRowHeaderCellAddressByCellId(h),u=[];for(d&&u.push(d);d&&h;)(h=l.getParentCellId(d.col,d.row))&&u.push(d=l.getRowHeaderCellAddressByCellId(h));let c=[],p=[];if("grid-tree"===l.columnHierarchyType&&"row"===l.cornerSetting.titleOnDimension&&l.columnHeaderLevelCount!==l._cornerHeaderCellIds.length)if(l.columnHeaderLevelCount>l._cornerHeaderCellIds.length)for(let t=l._cornerHeaderCellIds.length;t<l.columnHeaderLevelCount;t++)c.push({col:e,row:t});else for(let t=l.columnHeaderLevelCount;t<l._cornerHeaderCellIds.length;t++)p.push({col:e,row:t});return{addCellPositionsColumnDirection:a,removeCellPositionsColumnDirection:s,updateCellPositionsColumnDirection:u,addCellPositionsRowDirection:c,removeCellPositionsRowDirection:p}}(e,t,h[s],this._columnHeaderCellFullPathIds[c],d,this);return this.generateCellIdsConsiderHideHeader(),"grid-tree"===this.columnHierarchyType&&this.setColumnWidths(),p}isHeaderForColWidth(e,t){return this.isHeader(e,t)}getHeaderForColWidth(e,t){return this.getHeader(e,t)}getPivotCellAdress(e){var t;if(!Array.isArray(e))return;let i,r,n=this.rowTree,l=this.columnTree;for(let o=0;o<e.length;o++){let a=e[o];if((a.isPivotCorner||!(0,s.Z)(a.value))&&o===e.length-1){if("row"===(null==(t=null==this?void 0:this.cornerSetting)?void 0:t.titleOnDimension)){let e=0;return"grid"===this.rowHierarchyType&&(e=this.rowDimensionKeys.indexOf(a.dimensionKey)),-1===e?void 0:{col:(this.rowHeaderTitle?e+1:e)+this.leftRowSeriesNumberColumnCount,row:0}}let e=this.colDimensionKeys.indexOf(a.dimensionKey);return -1===e?void 0:{col:0+this.leftRowSeriesNumberColumnCount,row:this.columnHeaderTitle?e+1:e}}let h=!1;for(let e=0;e<l.length;e++){let t=l[e];if(((0,s.Z)(a.dimensionKey)&&t.dimensionKey===a.dimensionKey||(0,s.Z)(a.indicatorKey)&&t.indicatorKey===a.indicatorKey)&&t.value===a.value){l=t.children,r=t,h=!0;break}}if(!h)for(let e=0;e<n.length;e++){let t=n[e];if(((0,s.Z)(a.dimensionKey)&&t.dimensionKey===a.dimensionKey||(0,s.Z)(a.indicatorKey)&&t.indicatorKey===a.indicatorKey)&&t.value===a.value){n=t.children,i=t;break}}}let o=0,a=0;if(i){a=this.columnHeaderLevelCount;let{startInTotal:e,afterSpanLevel:t}=i;return a+=e,{col:o="grid"===this.rowHierarchyType?(this.rowHeaderTitle?t+1:t)+this.leftRowSeriesNumberColumnCount:0+this.leftRowSeriesNumberColumnCount,row:a}}if(r){o=this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount;let{startInTotal:e,afterSpanLevel:t}=r;return{col:o+=e,row:a=this.columnHeaderTitle?t+1:t}}}getPivotDimensionInfo(e,t){var i;let{colHeaderPaths:r,rowHeaderPaths:n}=this.getCellHeaderPaths(e,t),l=[];return r.length?r.forEach((e,t)=>{l.push({dimensionKey:e.dimensionKey,value:e.value,isPivotCorner:!1,indicatorKey:e.indicatorKey})}):n.length?n.forEach((e,t)=>{l.push({dimensionKey:e.dimensionKey,value:e.value,isPivotCorner:!1,indicatorKey:e.indicatorKey})}):this.isCornerHeader(e,t)&&("row"===(null==(i=null==this?void 0:this.cornerSetting)?void 0:i.titleOnDimension)?l.push({dimensionKey:this.rowDimensionKeys[(this.rowHeaderTitle?e-1:e)-this.leftRowSeriesNumberColumnCount],isPivotCorner:!0}):l.push({dimensionKey:this.colDimensionKeys[this.columnHeaderTitle?t-1:t],isPivotCorner:!0})),l}getIndicatorKey(e,t){var i;return null==(i=this.getBody(e,t))?void 0:i.indicatorKey}getParentCellId(e,t){if(0!==t)return this.isColumnHeader(e,t)?this.getCellId(e,t-1):this.isRowHeader(e,t)?this.getCellId(e-1,t):void 0}getRowHeaderCellAddressByCellId(e){let t,i;if(this._rowHeaderCellIds.find((r,n)=>!!r.find((i,r)=>i===e&&(t=r,!0))&&(i=n,!0)),(0,s.Z)(t)&&(0,s.Z)(i))return{col:t,row:i+this.columnHeaderLevelCount}}canMoveHeaderPosition(e,t){if(this.isSeriesNumberInHeader(t.col,t.row)||this.isSeriesNumberInHeader(e.col,e.row)||this.isCornerHeader(t.col,t.row)||e.col<0||e.row<0||t.col<0||t.row<0)return!1;this.isSeriesNumberInBody(t.col,t.row)&&this.isSeriesNumberInBody(e.col,e.row)&&(e.col=e.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1,t.col=t.col+this.leftRowSeriesNumberColumnCount+this.rowHeaderLevelCount-1);let i=this.getCellRange(e.col,e.row);if(this.isColumnHeader(e.col,e.row))return this.getParentCellId(e.col,i.start.row)===this.getParentCellId(t.col,i.start.row);if(this.isRowHeader(e.col,e.row)){if("tree"!==this.rowHierarchyType)return this.getParentCellId(i.start.col,e.row)===this.getParentCellId(i.start.col,t.row);{let i=(0,d.Z)(this.getCellHeaderPathsWithTreeNode(e.col,e.row).rowHeaderPaths),r=(0,d.Z)(this.getCellHeaderPathsWithTreeNode(t.col,t.row).rowHeaderPaths);if(i.pop(),r.pop(),i.length<=r.length){if(i.length===r.length)return!i.find((e,t)=>e.dimensionKey!==r[t].dimensionKey||e.value!==r[t].value);if(i.length>0){for(let e=0;e<i.length;e++)if(i[e].startInTotal!==r[e].startInTotal)return!1}return!0}}}return!1}moveHeaderPosition(e,t){var i,r;if((!(null==(i=this._table.options.dragOrder)?void 0:i.validateDragOrderOnEnd)||(null==(r=this._table.options.dragOrder)?void 0:r.validateDragOrderOnEnd(e,t)))&&this.canMoveHeaderPosition(e,t)&&!this.isCellRangeEqual(e.col,e.row,t.col,t.row)){let i=this.getCellRange(e.col,e.row);if(this.isColumnHeader(e.col,e.row)){let r,n=i.end.col-i.start.col+1,l=this.getCellRange(t.col,i.start.row);if((r=t.col>=e.col?l.end.col-n+1:l.start.col)===i.start.col)return null;for(let e=0;e<this._columnHeaderCellFullPathIds.length;e++){let t=this._columnHeaderCellFullPathIds[e].splice(i.start.col-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount,n);t.unshift(r-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._columnHeaderCellFullPathIds[e],t)}let o=this._columnWidths.splice(i.start.col-this.leftRowSeriesNumberColumnCount,n);return o.unshift(r-this.leftRowSeriesNumberColumnCount,0),Array.prototype.splice.apply(this._columnWidths,o),this.columnDimensionTree.movePosition(this.getCellHeaderPathsWithTreeNode(e.col,e.row).colHeaderPaths.length-1,i.start.col-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount,l.start.col-this.rowHeaderLevelCount-this.leftRowSeriesNumberColumnCount),this.columnDimensionTree.reset(this.columnDimensionTree.tree.children),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0,{sourceIndex:i.start.col,targetIndex:r,sourceSize:n,targetSize:l.end.col-l.start.col+1,moveType:"column"}}if(this.isRowHeader(e.col,e.row)){let r,n=this.getCellHeaderPathsWithTreeNode(e.col,e.row).rowHeaderPaths,l=this.getCellHeaderPathsWithTreeNode(t.col,t.row).rowHeaderPaths,o=n[n.length-1],a=l[n.length-1],s=o.size;if((r=t.row>=e.row?a.startInTotal+a.size-s:a.startInTotal)===i.start.row-this.columnHeaderLevelCount)return null;let h=this._rowHeaderCellIds.splice(i.start.row-this.columnHeaderLevelCount,s);h.unshift(r-this.currentPageStartIndex,0),Array.prototype.splice.apply(this._rowHeaderCellIds,h);let d=this._rowHeaderCellFullPathIds.splice(i.start.row-this.columnHeaderLevelCount,s);d.unshift(r-this.currentPageStartIndex,0),Array.prototype.splice.apply(this._rowHeaderCellFullPathIds,d);let u=this._rowHeaderCellIds_FULL.splice(i.start.row-this.columnHeaderLevelCount+this.currentPageStartIndex,s);u.unshift(r,0),Array.prototype.splice.apply(this._rowHeaderCellIds_FULL,u);let c=this._rowHeaderCellFullPathIds_FULL.splice(i.start.row-this.columnHeaderLevelCount+this.currentPageStartIndex,s);return c.unshift(r,0),Array.prototype.splice.apply(this._rowHeaderCellFullPathIds_FULL,c),this.rowDimensionTree.movePosition(n.length-1,i.start.row-this.columnHeaderLevelCount,r+(t.row>e.row?o.size-1:0)),this.rowDimensionTree.reset(this.rowDimensionTree.tree.children),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0,{sourceIndex:i.start.row,targetIndex:r+this.columnHeaderLevelCount,sourceSize:s,targetSize:a.size,moveType:"row"}}}return null}getCellAdressByHeaderPath(e){var t,i,r,n,l,o,a,h;let d,u,c=!1,g=!1;if(Array.isArray(e)){if(e.length>this.rowDimensionKeys.length+this.colDimensionKeys.length)return;d=e.filter(e=>this.colDimensionKeys.indexOf(e.dimensionKey)>=0||this.colDimensionKeys.indexOf(this.indicatorDimensionKey)>=0&&e.indicatorKey),u=e.filter(e=>this.rowDimensionKeys.indexOf(e.dimensionKey)>=0||this.rowDimensionKeys.indexOf(this.indicatorDimensionKey)>=0&&e.indicatorKey)}else d=e.colHeaderPaths,u=e.rowHeaderPaths,"body"===(null==e?void 0:e.cellLocation)&&this._table.isPivotTable()&&(g=!0);if(!Array.isArray(d)&&!Array.isArray(u))return;if(null==d||d.sort((e,t)=>{var i,r;return this.colDimensionKeys.indexOf(null!=(i=e.dimensionKey)?i:this.indicatorDimensionKey)-this.colDimensionKeys.indexOf(null!=(r=t.dimensionKey)?r:this.indicatorDimensionKey)}),null==u||u.sort((e,t)=>{var i,r;return this.fullRowDimensionKeys.indexOf(null!=(i=e.dimensionKey)?i:this.indicatorDimensionKey)-this.fullRowDimensionKeys.indexOf(null!=(r=t.dimensionKey)?r:this.indicatorDimensionKey)}),null==d||d.forEach(e=>{e.isPivotCorner&&(c=!0)}),null==u||u.forEach(e=>{e.isPivotCorner&&(c=!0)}),c){if("all"===this.cornerSetting.titleOnDimension&&this.indicatorsAsCol&&0===d.length){for(let e=0;e<this.rowDimensionKeys.length;e++)if((null==(t=u[0])?void 0:t.dimensionKey)===this.rowDimensionKeys[e])return{col:e+this.leftRowSeriesNumberColumnCount,row:this.columnHeaderLevelCount-1}}else if("all"!==this.cornerSetting.titleOnDimension||this.indicatorsAsCol||0!==u.length){if("row"!==this.cornerSetting.titleOnDimension&&("all"!==this.cornerSetting.titleOnDimension||this.indicatorsAsCol)){for(let e=0;e<this.colDimensionKeys.length;e++)if((null==(n=d[0])?void 0:n.dimensionKey)===this.colDimensionKeys[e])return{col:0,row:e}}else for(let e=0;e<this.rowDimensionKeys.length;e++)if((null==(r=u[0])?void 0:r.dimensionKey)===this.rowDimensionKeys[e])return{col:e+this.leftRowSeriesNumberColumnCount,row:0}}else for(let e=0;e<this.colDimensionKeys.length;e++)if((null==(i=d[0])?void 0:i.dimensionKey)===this.colDimensionKeys[e])return{col:this.rowHeaderLevelCount-1,row:e}}let f,m,b,y,v,_,C=!1,x=!1;if((null==d?void 0:d.length)>=1&&(null==u?void 0:u.length)>=1&&(C=!0,x=!0),null!=(l=null==d?void 0:d.length)&&l&&d.length>=this._getColumnHeaderTreeExpandedMaxLevelCount()&&(C=!0),null!=(o=null==u?void 0:u.length)&&o&&u.length>=this._getRowHeaderTreeExpandedMaxLevelCount()&&(x=!0),d&&(_=this.matchDimensionPath(d,this.columnTree,C)),(null==u?void 0:u.length)>=1)if("tree"===this.rowHierarchyType){let e=u[u.length-1],t=this.headerObjects.filter(t=>((null==t?void 0:t.field)===e.dimensionKey||(null==t?void 0:t.field)===e.indicatorKey)&&(null==t?void 0:t.title)===e.value).map(e=>e.id),i=this._rowHeaderCellIds.filter(e=>t.indexOf(e[e.length-1])>=0).find(e=>{let t=this.findFullCellIds(e);return t.length===u.length&&t.every(e=>{let t=this._headerObjectMap[e];return u.find(e=>e.dimensionKey===t.field&&e.value===t.title)})});m=this._rowHeaderCellIds.indexOf(i)+this.columnHeaderLevelCount}else v=this.matchDimensionPath(u,this.rowTree,x,!0);if(g||!C||!x||(v||(0,s.Z)(m))&&_){if(v||g){m=this.columnHeaderLevelCount;let{startInTotal:e,afterSpanLevel:t}=null!=(a=v)?a:p;if(m+=null!=e?e:0,"grid"===this.rowHierarchyType)if(u.every((e,t)=>this.rowDimensionKeys[t]===e.dimensionKey)){let e=u.length-1;b=(this.rowHeaderTitle?e+1:e)+this.leftRowSeriesNumberColumnCount}else b=(this.rowHeaderTitle?t+1:t)+this.leftRowSeriesNumberColumnCount;else b=0}if(_||g){f=this.rowHeaderLevelCount+this.leftRowSeriesNumberColumnCount;let{startInTotal:e,afterSpanLevel:t}=null!=(h=_)?h:p;f+=null!=e?e:0,y=this.columnHeaderTitle?t+1:t}if((0,s.Z)(f)||(0,s.Z)(m))return{col:null!=f?f:b,row:null!=m?m:y};if(u.length>0&&u.every((e,t)=>this.rowDimensionKeys[t]===e.dimensionKey)){let e=u.length-1;return{col:(this.rowHeaderTitle?e+1:e)+this.leftRowSeriesNumberColumnCount,row:void 0}}}}setChartInstance(e,t,i){var r,n,l,o;let a,s=this.getCellHeaderPaths(e,t);if(this.indicatorsAsCol){let e=null==(r=s.colHeaderPaths.find(e=>e.indicatorKey))?void 0:r.indicatorKey;a=null==(n=this._indicators)?void 0:n.find(t=>t.indicatorKey===e)}else{let e=null==(l=s.rowHeaderPaths.find(e=>e.indicatorKey))?void 0:l.indicatorKey;a=null==(o=this._indicators)?void 0:o.find(t=>t.indicatorKey===e)}"function"!=typeof(null==a?void 0:a.chartSpec)&&a&&(a.chartInstance=i)}getChartInstance(e,t){var i,r,n,l;let o,a=this.getCellHeaderPaths(e,t);if(this.indicatorsAsCol){let e=null==(i=a.colHeaderPaths.find(e=>e.indicatorKey))?void 0:i.indicatorKey;o=null==(r=this._indicators)?void 0:r.find(t=>t.indicatorKey===e)}else{let e=null==(n=a.rowHeaderPaths.find(e=>e.indicatorKey))?void 0:n.indicatorKey;o=null==(l=this._indicators)?void 0:l.find(t=>t.indicatorKey===e)}return null==o?void 0:o.chartInstance}checkHasChart(){return(0,o.YL)(this)}getDimension(e,t){var i,r;return"column"===t?null==(i=this.columnsDefine)?void 0:i.find(t=>"string"!=typeof t&&t.dimensionKey===e):"row"===t?null==(r=this.rowsDefine)?void 0:r.find(t=>"string"!=typeof t&&t.dimensionKey===e):void 0}getAxisConfigInPivotChart(e,t){if((this.isFrozenColumn(e,t)||this.isRightFrozenColumn(e,t))&&(0,o.aw)(e,t,"row",this)||(this.isFrozenRow(e,t)||this.isBottomFrozenRow(e,t))&&(0,o.aw)(e,t,"col",this)){let i=c.F.getFunction("getAxisConfigInPivotChart")(e,t,this);if(!1!==(null==i?void 0:i.visible))return i}}isEmpty(e,t){return!!this._table.isPivotChart()&&(!!this.isLeftBottomCorner(e,t)||!!this.isRightBottomCorner(e,t)||!!this.isRightTopCorner(e,t))}isAxisCell(e,t){return!!this._table.isPivotChart()&&(!!(this.indicatorKeys.length>=1&&(0,o.eW)(this.indicatorsDefine)&&(this.isBottomFrozenRow(e,t)&&(0,o.aw)(e,t,"col",this)||this.isRightFrozenColumn(e,t)&&(0,o.aw)(e,t,"row",this)||this.isRowHeader(e,t)&&e===this.rowHeaderLevelCount-1&&(0,o.aw)(e,t,"row",this)||this.hasTopIndicatorAxis&&this.indicatorsAsCol&&t===this.columnHeaderLevelCount-1&&(0,o.aw)(e,t,"col",this)))||!1)}getChartAxes(e,t){if((0,o.VR)(e,t,this)||this.isAxisCell(e,t))return(0,o.TQ)(e,t,this)}getRawChartSpec(e,t){return(0,o.ed)(e,t,this)}getChartSpec(e,t){return(0,o.K0)(e,t,this)}isShareChartSpec(e,t){return(0,o.TF)(e,t,this)}getChartDataId(e,t){return(0,o.py)(e,t,this)}isNoChartDataRenderNothing(e,t){return(0,o.f_)(e,t,this)}setPagination(e){var t,i,r,n,l,o,a;if(this.clearCellRangeMap(),this._table.internalProps.useOneRowHeightFillAll=!1,this.pagination=e,"grid"===this.rowHierarchyType&&(0,s.Z)(null==(t=this.pagination)?void 0:t.perPageCount)&&(0,s.Z)(null==(i=this.pagination)?void 0:i.currentPage)){!1===this.indicatorsAsCol&&(this.pagination.perPageCount=Math.ceil(this.pagination.perPageCount/this.indicatorKeys.length)*this.indicatorKeys.length);let{perPageCount:e,currentPage:t}=this.pagination;this.currentPageStartIndex=e*(t||0),this.currentPageEndIndex=this.currentPageStartIndex+e,this._rowHeaderCellIds=null==(r=this._rowHeaderCellIds_FULL)?void 0:r.slice(this.currentPageStartIndex,this.currentPageEndIndex),this._rowHeaderCellFullPathIds=null==(n=this._rowHeaderCellFullPathIds_FULL)?void 0:n.slice(this.currentPageStartIndex,this.currentPageEndIndex)}else this.currentPageStartIndex=0,this.currentPageEndIndex=this._rowHeaderCellIds_FULL.length,this._rowHeaderCellIds=null==(l=this._rowHeaderCellIds_FULL)?void 0:l.slice(this.currentPageStartIndex,this.currentPageEndIndex),this._rowHeaderCellFullPathIds=null==(o=this._rowHeaderCellFullPathIds_FULL)?void 0:o.slice(this.currentPageStartIndex,this.currentPageEndIndex);this.pagination&&(this.pagination.totalCount=null==(a=this._rowHeaderCellIds_FULL)?void 0:a.length)}release(){var e;let t=this._table._getActiveChartInstance();null==t||t.release(),null==(e=this._indicators)||e.forEach(e=>{var t;null==(t=e.chartInstance)||t.release()})}getHeadNode(e,t){var i,r,n;let l,o=this.getCellHeaderPaths(e,t);return o.rowHeaderPaths&&(null!=(r=null==(i=o.rowHeaderPaths)?void 0:i.length)?r:0)>0?l=null==(n=o.rowHeaderPaths)?void 0:n.slice(0,o.rowHeaderPaths.length):o.colHeaderPaths&&o.colHeaderPaths.length>0&&(l=o.colHeaderPaths.slice(0,o.colHeaderPaths.length)),this.getHeadNodeByRowOrColDimensions(l,e,t)}getHeadNodeByRowOrColDimensions(e,t,i){var r;if(!Array.isArray(e))return;let n,l,o=this.rowTree,a=this.columnTree;if((0,s.Z)(i)&&(0,s.Z)(t)&&"tree"===this.rowHierarchyType&&this.extensionRows&&t>=1+this.leftRowSeriesNumberColumnCount){let e=this.getCellId(t-1,i);o=this._rowHeaderExtensionTree[e].tree.children}for(let t=0;t<e.length;t++){let i=e[t];if((i.isPivotCorner||!(0,s.Z)(i.value))&&t===e.length-1)return;let h=!1;for(let e=0;e<a.length;e++){let t=a[e];if((0,s.Z)(i.dimensionKey)&&t.dimensionKey===i.dimensionKey&&t.value===i.value||(0,s.Z)(i.indicatorKey)&&t.indicatorKey===i.indicatorKey&&(t.value===i.value||!(0,s.Z)(i.value)||!(0,s.Z)(t.value))){a=t.children,l=t,h=!0;break}}if(!h)for(let e=0;e<(null!=(r=null==o?void 0:o.length)?r:0);e++){let t=o[e];if((0,s.Z)(i.dimensionKey)&&t.dimensionKey===i.dimensionKey&&t.value===i.value||(0,s.Z)(i.indicatorKey)&&t.indicatorKey===i.indicatorKey&&(t.value===i.value||!(0,s.Z)(i.value)||!(0,s.Z)(t.value))){o=t.children,n=t;break}}}return n||l||void 0}clearCellRangeMap(){this._largeCellRangeCache.length=0,this._CellHeaderPathMap=new Map}getDimensionKeyInChartSpec(e,t,i){var r,n,l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k;let M;if(!1===this.indicatorsAsCol){let f=this.getRawChartSpec(e,t);if(f&&(M="yField"===i?null!=(r=f.yField)?r:null==(l=null==(n=null==f?void 0:f.series)?void 0:n[0])?void 0:l.yField:"histogram"===f.type?f.x2Field:null!=(o=f.xField)?o:null==(s=null==(a=null==f?void 0:f.series)?void 0:a[0])?void 0:s.xField))return M;for(let e=0;e<this.indicatorsDefine.length;e++){let t=this.indicatorsDefine[e].chartSpec;if(t&&(M="yField"===i?null!=(h=t.yField)?h:null==(u=null==(d=null==t?void 0:t.series)?void 0:d[0])?void 0:u.yField:"histogram"===t.type?t.x2Field:null!=(c=t.xField)?c:null==(g=null==(p=null==t?void 0:t.series)?void 0:p[0])?void 0:g.xField))return M}}else{let r=this.getRawChartSpec(e,t);if(r&&(M="xField"===i?"histogram"===r.type?r.x2Field:null!=(f=r.xField)?f:null==(b=null==(m=null==r?void 0:r.series)?void 0:m[0])?void 0:b.xField:"histogram"===r.type?r.y2Field:null!=(y=r.yField)?y:null==(_=null==(v=null==r?void 0:r.series)?void 0:v[0])?void 0:_.yField))return M;for(let e=0;e<this.indicatorsDefine.length;e++){let t=this.indicatorsDefine[e].chartSpec;if(t&&(M="xField"===i?"histogram"===t.type?t.x2Field:null!=(C=t.xField)?C:null==(w=null==(x=null==t?void 0:t.series)?void 0:x[0])?void 0:w.xField:null!=(S=t.yField)?S:null==(k=null==(A=null==t?void 0:t.series)?void 0:A[0])?void 0:k.yField))return M}}return null}_generateChartState(){return{vtable_selected:{filter:e=>{var t;return this._table._selectedDataItemsInChart.length>=1?!!this._table._selectedDataItemsInChart.find(t=>{for(let i in t)if("object"!=typeof t[i]&&t[i]!==e[i])return!1;return!0}):null!=(t=this._table._selectedDimensionInChart)&&!!t.length&&!!this._table._selectedDimensionInChart.every(t=>"object"==typeof t.value||e[t.key]===t.value)}},vtable_selected_reverse:{filter:e=>{var t;return this._table._selectedDataItemsInChart.length>=1?!this._table._selectedDataItemsInChart.find(t=>{for(let i in t)if("object"!=typeof t[i]&&t[i]!==e[i])return!1;return!0}):null!=(t=this._table._selectedDimensionInChart)&&!!t.length&&!this._table._selectedDimensionInChart.every(t=>"object"==typeof t.value||e[t.key]===t.value)}}}}updateDataStateToChartInstance(e){var t;if(!1!==(null==(t=null==e?void 0:e.getSpec().select)?void 0:t.enable)){e||(e=this._table._getActiveChartInstance());let t=this._generateChartState();this._indicators.forEach(e=>{var i;let r=e.chartInstance;!1!==(null==(i=e.chartSpec.select)?void 0:i.enable)&&r.updateState(t)}),null==e||e.updateState(t)}}updateDataStateToActiveChartInstance(e){var t;if(!1!==(null==(t=null==e?void 0:e.getSpec().select)?void 0:t.enable)){e||(e=this._table._getActiveChartInstance());let t=this._generateChartState();null==e||e.updateState(t)}}getIndicatorKeyInChartSpec(e,t){let i=this.getRawChartSpec(e,t),r=[];if(i){if("boxPlot"===i.type)return[i.maxField];if(i.series||i.xField||i.yField)return!1===this.indicatorsAsCol?i.series?i.series.forEach(e=>{let t=e.yField;r.push(t)}):r.push(i.yField):i.series?i.series.forEach(e=>{let t=e.xField;r.push(t)}):r.push(i.xField),r;if(i.valueField&&r.push(i.valueField),r.length>=1)return r}return null}getOptimunHeightForChart(e,t){var i,r,n,l,o;let a,s,h=this.getCellHeaderPaths(this.rowHeaderLevelCount,e).rowHeaderPaths;for(let e in t&&h[h.length-1].indicatorKey&&h.pop(),this.dataset.collectValuesBy)if("yField"===this.dataset.collectValuesBy[e].type&&!this.dataset.collectValuesBy[e].range){a=null==(i=this.dataset.collectedValues[e])?void 0:i[h.map(e=>e.value).join(this.dataset.stringJoinChar)];break}if(this._chartItemBandSize)s=f(null!=(r=null==a?void 0:a.length)?r:0,this._chartItemBandSize,this._chartPaddingInner,this._chartPaddingOuter);else{let e=this._chartItemSpanSize||25;s=(null!=(n=null==a?void 0:a.length)?n:0)*(e+(t?0:e/3))}let d=(0,u.u)(null!=(o=null!=(l=this._chartPadding)?l:this._table.theme.bodyStyle.padding)?o:0);return s+d[0]+d[2]}getOptimunWidthForChart(e,t){var i,r,n,l,o;let a,s,h=this.getCellHeaderPaths(e,this.columnHeaderLevelCount).colHeaderPaths;for(let e in this.dataset.collectValuesBy)if("xField"===this.dataset.collectValuesBy[e].type&&!this.dataset.collectValuesBy[e].range){a=null==(i=this.dataset.collectedValues[e])?void 0:i[h.map(e=>e.value).join(this.dataset.stringJoinChar)];break}if(this._chartItemBandSize)s=f(null!=(r=null==a?void 0:a.length)?r:0,this._chartItemBandSize,this._chartPaddingInner,this._chartPaddingOuter);else{let e=this._chartItemSpanSize||25;s=(null!=(n=null==a?void 0:a.length)?n:0)*(e+(t?0:e/3))}let d=(0,u.u)(null!=(o=null!=(l=this._chartPadding)?l:this._table.theme.bodyStyle.padding)?o:0);return s+d[1]+d[3]}get leftAxesCount(){if(!this._table.isPivotChart())return 0;let e=this._table.pivotChartAxes.find(e=>"left"===e.orient);return!1===(null==e?void 0:e.visible)?0:(this.indicatorsAsCol,1)}get topAxesCount(){if(!this._table.isPivotChart())return 0;let e=this._table.pivotChartAxes.find(e=>"top"===e.orient);return!1===(null==e?void 0:e.visible)?0:this.indicatorsAsCol&&this.hasTopIndicatorAxis?1:0}get rightAxesCount(){return this.rightFrozenColCount}get bottomAxesCount(){return this.bottomFrozenRowCount}getColKeysPath(e,t){let i=this.getCellHeaderPaths(e,t),r=[];return i.colHeaderPaths.length&&i.colHeaderPaths.forEach(e=>{e.dimensionKey&&r.push(e.value)}),null==r?void 0:r.join(this.dataset.stringJoinChar)}getRowKeysPath(e,t){let i=this.getCellHeaderPaths(e,t),r=[];return i.rowHeaderPaths.length&&i.rowHeaderPaths.forEach(e=>{e.dimensionKey&&r.push(e.value)}),null==r?void 0:r.join(this.dataset.stringJoinChar)}getIndicatorInfo(e,t=""){var i;return null==(i=this.indicatorsDefine)?void 0:i.find(i=>"string"!=typeof i&&(e?i.indicatorKey===e:!!t&&i.title===t))}getLayoutColumnTree(){let e=[],t=this.columnDimensionTree.tree.children;return(0,a.LC)(e,t),e}getLayoutRowTree(){let e=[],t=this.rowDimensionTree.tree.children;return(0,a.LC)(e,t),e}getLayoutColumnTreeCount(){let e=this.columnDimensionTree.tree.children;return(0,a.p$)(e,"tree"===this.rowHierarchyType)}getLayoutRowTreeCount(){var e;let t=this.rowDimensionTree.tree.children,i=(0,a.p$)(t,"tree"===this.rowHierarchyType);return null==(e=this.extensionRows)||e.forEach(e=>{if("function"!=typeof e.rowTree){let t=(0,a.p$)(e.rowTree,!0);i*=t}}),i}resetHeaderTree(){var e,t,i;this.colIndex=0,this._rowHeaderCellFullPathIds_FULL=[],this._columnHeaderCellFullPathIds=[],this._columnHeaderCellIds=[];let n=this.dataset;this.rowTree=n.rowHeaderTree,this.columnTree=n.colHeaderTree;let l=this.rowDimensionTree.tree.children;null==(e=this.rowTree)||e.forEach((e,t)=>{let i=l.find(t=>t.dimensionKey===e.dimensionKey&&t.value===e.value);i&&this._table._syncHierarchyState(i,e)}),this.columnDimensionTree=new a.KO(null!=(t=this.columnTree)?t:[],this.sharedVar,this.columnHierarchyType,"grid"!==this.columnHierarchyType?this.columnExpandLevel:void 0),this.rowDimensionTree=new a.KO(null!=(i=this.rowTree)?i:[],this.sharedVar,this.rowHierarchyType,"grid"!==this.rowHierarchyType?this.rowExpandLevel:void 0),this.resetColumnHeaderLevelCount(),this._generateColHeaderIds(),this.colIndex=0,this._generateRowHeaderIds(),this._rowHeaderCellFullPathIds_FULL=(0,r.p4)(this._rowHeaderCellFullPathIds_FULL),this._headerObjectMap=this._headerObjects.reduce((e,t)=>(e[t.id]=t,e),{}),this._CellHeaderPathMap=new Map,this._largeCellRangeCache.length=0,this.generateCellIdsConsiderHideHeader(),this.setPagination(this.pagination)}isSeriesNumberInHeader(e,t){return this.leftRowSeriesNumberColumnCount>0&&e>=0&&t>=0&&e<this.leftRowSeriesNumberColumnCount&&t<this.headerLevelCount||this.rightRowSeriesNumberColumnCount>0&&t>=0&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t<this.headerLevelCount}isSeriesNumberInBody(e,t){return this.leftRowSeriesNumberColumnCount>0&&e>=0&&e<this.leftRowSeriesNumberColumnCount&&t>=this.headerLevelCount||this.rightRowSeriesNumberColumnCount>0&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t>=this.headerLevelCount}isSeriesNumber(e,t){return!!((0,s.Z)(e)&&(0,s.Z)(t))&&(!!(this.leftRowSeriesNumberColumnCount>0)&&!!(e>=0)&&!!(t>=0)&&!!(e<this.leftRowSeriesNumberColumnCount)||!!(this.rightRowSeriesNumberColumnCount>0)&&!!(t>=0)&&!!(e>=this.colCount-this.rightRowSeriesNumberColumnCount))||!1}getSeriesNumberHeader(e,t){return this.leftRowSeriesNumberColumnCount>0&&e>=0&&e<this.leftRowSeriesNumberColumnCount&&t<this.headerLevelCount?Object.assign({},this.leftRowSeriesNumberColumn[e],{style:Object.assign({},this._table.internalProps.theme.cornerHeaderStyle,this._table.internalProps.rowSeriesNumber.headerStyle)}):this.rightRowSeriesNumberColumnCount>0&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t<this.headerLevelCount&&t<this.headerLevelCount?this.rightRowSeriesNumberColumn[e-(this.colCount-this.rightRowSeriesNumberColumnCount)]:void 0}getSeriesNumberBody(e,t){return this.leftRowSeriesNumberColumnCount>0&&e>=0&&e<this.leftRowSeriesNumberColumnCount&&t>=this.headerLevelCount?this.leftRowSeriesNumberColumn[e]:this.rightRowSeriesNumberColumnCount>0&&e>=this.colCount-this.rightRowSeriesNumberColumnCount&&t>=this.headerLevelCount?this.rightRowSeriesNumberColumn[e-(this.colCount-this.rightRowSeriesNumberColumnCount)]:void 0}changeTreeNodeTitle(e,t,i){this.getHeadNode(e,t).value=i;let r=this.getCellId(e,t);this._headerObjectMap[r].title=i}changeCornerTitle(e,t,i){if(this.isCornerHeader(e,t)){let r=this.getCellId(e,t);this._headerObjectMap[r].title=i}}generateCellIdsConsiderHideHeader(){var e,t,i,r;if(this._columnHeaderCellIds=this._columnHeaderCellFullPathIds.slice(),!this.showColumnHeader)if(this.indicatorsAsCol&&!this.hideIndicatorName){let e=this.colDimensionKeys.indexOf(l.ek),t=this._columnHeaderCellIds.splice(e,1);this._columnHeaderCellIds.splice(0,this._columnHeaderCellIds.length),this._columnHeaderCellIds.push(t[0])}else this._columnHeaderCellIds.splice(0,this._columnHeaderCellIds.length);if(this._rowHeaderCellIds_FULL=this._rowHeaderCellFullPathIds_FULL.slice(),!this.showRowHeader)if(this.indicatorsAsCol||this.hideIndicatorName)this._rowHeaderCellIds_FULL.forEach((e,t)=>{let i=e.slice();i.splice(0,i.length),this._rowHeaderCellIds_FULL[t]=i});else{let e=this.rowDimensionKeys.indexOf(l.ek);this._rowHeaderCellIds_FULL.forEach((t,i)=>{let r=t.slice(),n=r.splice(e,1);r.splice(0,r.length),r.push(n[0]),this._rowHeaderCellIds_FULL[i]=r})}if(this._rowHeaderCellIds=this._rowHeaderCellIds_FULL.slice(),this._cornerHeaderCellIds=this._cornerHeaderCellFullPathIds.slice(),0===this.rowHeaderLevelCount||0===this.columnHeaderLevelCount)this._cornerHeaderCellIds=[];else if("row"!==this.cornerSetting.titleOnDimension||this.showRowHeader){if("column"===this.cornerSetting.titleOnDimension&&!this.showColumnHeader)if(this.indicatorsAsCol&&!this.hideIndicatorName){let e=this.colDimensionKeys.indexOf(l.ek),t=this._cornerHeaderCellIds.splice(e,1);this._cornerHeaderCellIds.splice(0,this._cornerHeaderCellIds.length),this._cornerHeaderCellIds.push(t[0])}else this._cornerHeaderCellIds.splice(0,this._cornerHeaderCellIds.length)}else if(this.indicatorsAsCol||this.hideIndicatorName)this._cornerHeaderCellIds.forEach((e,t)=>{let i=e.slice();i.splice(0,i.length),this._cornerHeaderCellIds[t]=i});else{let e=this.rowDimensionKeys.indexOf(l.ek);this._cornerHeaderCellIds.forEach((t,i)=>{let r=t.slice(),n=r.splice(e,1);r.splice(0,r.length),r.push(n[0]),this._cornerHeaderCellIds[i]=r})}if("grid-tree"===this.rowHierarchyType&&"column"===this.cornerSetting.titleOnDimension)this._cornerHeaderCellIds[0].length<this._rowHeaderCellIds[0].length?this._cornerHeaderCellIds.forEach((e,t)=>{let i=e.length;e.length=this._rowHeaderCellIds[0].length,e.fill(e[0],i)}):this._cornerHeaderCellIds[0].length>this._rowHeaderCellIds[0].length&&this._cornerHeaderCellIds.forEach((e,t)=>{e.length=this._rowHeaderCellIds[0].length});else if("grid-tree"===this.columnHierarchyType&&"row"===this.cornerSetting.titleOnDimension)if((null==(e=this._cornerHeaderCellIds)?void 0:e.length)<(null==(t=this._columnHeaderCellIds)?void 0:t.length)){let e=this._cornerHeaderCellIds.length;this._cornerHeaderCellIds.length=this._columnHeaderCellIds.length,this._cornerHeaderCellIds.fill(this._cornerHeaderCellIds[0],e)}else(null==(i=this._cornerHeaderCellIds)?void 0:i.length)>(null==(r=this._columnHeaderCellIds)?void 0:r.length)&&(this._cornerHeaderCellIds.length=this._columnHeaderCellIds.length)}enableUseGetBodyCache(){this._useGetBodyCache=!0,this._getBodyCache.clear()}disableUseGetBodyCache(){this._useGetBodyCache=!1,this._getBodyCache.clear()}enableUseHeaderPathCache(){var e,t;(null==(t=null==(e=this._table.options)?void 0:e.customConfig)?void 0:t.enablePivotPathCache)?this._useHeaderPathCache=!0:(this._useHeaderPathCache=!0,this._colHeaderPathCache.clear(),this._rowHeaderPathCache.clear())}disableUseHeaderPathCache(){var e,t;(null==(t=null==(e=this._table.options)?void 0:e.customConfig)?void 0:t.enablePivotPathCache)?this._useHeaderPathCache=!0:(this._useHeaderPathCache=!1,this._colHeaderPathCache.clear(),this._rowHeaderPathCache.clear())}getBodyWidthCache(e,t){if(this._useGetBodyCache&&!this.isHeader(e,t)&&!this.isSeriesNumber(e,t))return this.indicatorsAsCol&&this._getBodyCache.has(e)?this._getBodyCache.get(e):!this.indicatorsAsCol&&this._getBodyCache.has(t)?this._getBodyCache.get(t):void 0}setBodyWidthCache(e,t,i){!this._useGetBodyCache||this.isHeader(e,t)||this.isSeriesNumber(e,t)||(this.indicatorsAsCol?this._getBodyCache.set(e,i):this._getBodyCache.set(t,i))}getColHeaderPathCache(e,t){if(this._useHeaderPathCache&&!this.isHeader(e,t)&&!this.isSeriesNumber(e,t)&&this._colHeaderPathCache.has(e))return this._colHeaderPathCache.get(e)}setColHeaderPathCache(e,t,i){!this._useHeaderPathCache||this.isHeader(e,t)||this.isSeriesNumber(e,t)||this._colHeaderPathCache.set(e,i)}getRowHeaderPathCache(e,t){if(this._useHeaderPathCache&&!this.isHeader(e,t)&&!this.isSeriesNumber(e,t)&&this._rowHeaderPathCache.has(t))return this._rowHeaderPathCache.get(t)}setRowHeaderPathCache(e,t,i){!this._useHeaderPathCache||this.isHeader(e,t)||this.isSeriesNumber(e,t)||this._rowHeaderPathCache.set(t,i)}clearHeaderPathCache(){this._colHeaderPathCache.clear(),this._rowHeaderPathCache.clear()}isAggregation(e,t){if(this.isHeader(e,t))return!1;let i=this.getCellHeaderPaths(e,t);for(let e of i.colHeaderPaths)if("sub-total"===e.role||"grand-total"===e.role)return!0;for(let e of i.rowHeaderPaths)if("sub-total"===e.role||"grand-total"===e.role)return!0;return!1}expandAllForRowDimensionTree(){this.rowDimensionTree&&(this.rowDimensionTree.setAllNodesState(n.g.expand),this._rebuildRowLayout())}collapseAllForRowDimensionTree(){this.rowDimensionTree&&(this.rowDimensionTree.setAllNodesState(n.g.collapse),this._rebuildRowLayout())}expandAllForColumnDimensionTree(){this.columnDimensionTree&&(this.columnDimensionTree.setAllNodesState(n.g.expand),this._rebuildColumnLayout())}collapseAllForColumnDimensionTree(){this.columnDimensionTree&&(this.columnDimensionTree.setAllNodesState(n.g.collapse),this._rebuildColumnLayout())}}function f(e,t,i,r){var n,l,o;let a;1===i&&(i=0);let s=(n=e,l=i,o=r,a=1===n?n+2*o:n-l+2*o,n?a>0?a:1:0);return Math.ceil(t/(1-i)*s)}},24687:function(e,t,i){i.d(t,{KO:()=>s,LC:()=>function e(t,i){Array.isArray(i)&&(null==i||i.forEach(i=>{var r,n;let l={dimensionKey:i.dimensionKey,indicatorKey:i.indicatorKey,value:i.value,hierarchyState:i.hierarchyState,children:void 0,virtual:null!=(r=i.virtual)&&r,levelSpan:null!=(n=i.levelSpan)?n:1};t.push(l),i.children&&(l.children=[],e(l.children,i.children))}))},g3:()=>h,gD:()=>function e(t,i,r,n,l){var o;for(let a=t.length-1;a>=0;a--){let s=t[a];if(i.push(s),n&&s.hide)t.splice(a,1);else if(s.indicatorKey){let e=null==(o=null==r?void 0:r.find(e=>e.indicatorKey===s.indicatorKey))?void 0:o.hide;"function"==typeof e?e({dimensionPaths:i,table:l})&&t.splice(a,1):e&&t.splice(a,1)}else s.children&&s.children.length>0&&e(s.children,i,r,n,l);i.pop()}},jS:()=>d,p$:()=>function e(t,i){let r=0;return null==t||t.forEach(t=>{i?r++:t.children&&0!==t.children.length||r++,t.children&&(r+=e(t.children,i))}),r},py:()=>u});var r=i(65755),n=i(64776),l=i(53803),o=i(51130),a=i(36781);class s{constructor(e,t,i="grid",r){this.hasHideNode=!1,this.sizeIncludeParent=!1,this.tree={id:0,dimensionKey:"",value:"",children:[],level:-1,afterSpanLevel:-1,levelSpan:1,startIndex:0,size:0,startInTotal:0,hierarchyState:void 0},this.totalLevel=0,this.expandedMaxLevel=0,this.dimensionKeys=new l.B,this.dimensionKeysIncludeVirtual=new l.B,this.cache=new Map,this.sizeIncludeParent=null!=r,this.setExpandLevel=r,this.hierarchyType=i,this.sharedVar=t,this.reset(e)}reset(e){this.totalLevel=0,this.expandedMaxLevel=0,this.hasHideNode=!1,this.cache.clear(),this.dimensionKeys=new l.B,this.dimensionKeysIncludeVirtual=new l.B,this.tree.children=e,this.setTreeNode(this.tree,0,this.tree)}setTreeNode(e,t,i){var r,n,l,s;e.startIndex=t,e.startInTotal=(null!=(r=i.startInTotal)?r:0)+e.startIndex,e.hide&&(this.hasHideNode=!0),(null!=(n=e.dimensionKey)?n:e.indicatorKey)&&(e.virtual||this.dimensionKeys.contain(e.indicatorKey?o.ek:e.dimensionKey)||this.dimensionKeys.put(e.level,e.indicatorKey?o.ek:e.dimensionKey),this.dimensionKeysIncludeVirtual.contain(e.indicatorKey?o.ek:e.dimensionKey)||this.dimensionKeysIncludeVirtual.put(e.level,e.indicatorKey?o.ek:e.dimensionKey),e.id||(e.id=++this.sharedVar.seqId));let h=e.dimensionKey&&this.sizeIncludeParent?1:0,d=e.children||e.columns;return"grid"===this.hierarchyType||null===this.hierarchyType?(null==d?void 0:d.length)>=1?d.forEach(t=>{var i,r,n;t.level=(null!=(i=e.level)?i:0)+1,"grid"===this.hierarchyType&&(t.afterSpanLevel=(null!=(r=e.afterSpanLevel)?r:0)+(null!=(n=e.levelSpan)?n:1)),this.totalLevel=Math.max(this.totalLevel,t.level+1),h+=this.setTreeNode(t,h,e)}):h=+(-1!==e.level):e.hierarchyState===a.g.expand&&(null==d?void 0:d.length)>=1?d.forEach(t=>{var i;t.level=(null!=(i=e.level)?i:0)+1,this.totalLevel=Math.max(this.totalLevel,t.level+1),this.expandedMaxLevel=Math.max(this.expandedMaxLevel,t.level+1),h+=this.setTreeNode(t,h,e)}):e.hierarchyState===a.g.collapse&&(null==d?void 0:d.length)>=1?d.forEach(t=>{var i;t.level=(null!=(i=e.level)?i:0)+1,this.totalLevel=Math.max(this.totalLevel,t.level+1),this.setTreeNode(t,h,e)}):!e.hierarchyState&&e.level+1<this.setExpandLevel&&((null==d?void 0:d.length)>=1||!0===d)?((null==(l=d[0])?void 0:l.indicatorKey)&&"grid-tree"===this.hierarchyType||(e.hierarchyState=a.g.expand),(null==d?void 0:d.length)>=1&&d.forEach(t=>{var i;t.level=(null!=(i=e.level)?i:0)+1,this.totalLevel=Math.max(this.totalLevel,t.level+1),this.expandedMaxLevel=Math.max(this.expandedMaxLevel,t.level+1),h+=this.setTreeNode(t,h,e)})):(null==d?void 0:d.length)>=1||!0===d?((null==(s=d[0])?void 0:s.indicatorKey)&&"grid-tree"===this.hierarchyType||(e.hierarchyState=a.g.collapse),(null==d?void 0:d.length)>=1&&d.forEach(t=>{var i;t.level=(null!=(i=e.level)?i:0)+1,this.totalLevel=Math.max(this.totalLevel,t.level+1),this.setTreeNode(t,h,e)})):(e.hierarchyState=a.g.none,h=+(-1!==e.level)),e.size=h,h}getTreePath(e,t=30){let i=[];return this.searchPath(e,this.tree,i,t),i.shift(),i}findNodeById(e,t){return e.find(e=>e.id===t)}searchPath(e,t,i,r){if(!t||e<t.startIndex||e>=t.startIndex+t.size||(i.push(t),!t.children||0===t.children.length||t.level>=r))return;let n=e-t.startIndex;if(this.cache.has(t.level+1)){let e=this.cache.get(t.level+1);if(n>=e.startIndex&&n<e.startIndex+e.size)return void this.searchPath(n,e,i,r)}let l=0,o=t.children.length-1;for(;l<=o;){let e=Math.floor((l+o)/2),a=t.children[e];if(n>=a.startIndex&&n<a.startIndex+a.size){this.cache.set(a.level,a);let e=[];this.cache.forEach((t,i)=>{i>a.level&&e.push(i)}),e.forEach(e=>{this.cache.delete(e)}),this.searchPath(n,a,i,r);break}n<a.startIndex?o=e-1:l=e+1}}movePosition(e,t,i){let r,n,l,o=(a,s)=>{if(void 0!==n&&void 0!==l)return;a.level===e&&(a.startInTotal===t&&(n=s),a.startInTotal<=i&&i<=a.startInTotal+a.size-1&&(l=s));let h=a.children||a.columns;if(h&&a.level<e){r=a;for(let e=0;e<h.length;e++)(t>=h[e].startInTotal&&t<=h[e].startInTotal+h[e].size||i>=h[e].startInTotal&&i<=h[e].startInTotal+h[e].size)&&o(h[e],e)}};o(this.tree,0);let a=r.children||r.columns,s=a.splice(n,1);s.unshift(l,0),Array.prototype.splice.apply(a,s)}getCopiedTree(){let e=(0,r.Z)(this.tree.children);return function e(t){for(let i=0;i<t.length;i++){let r=t[i];delete r.level,delete r.startIndex,delete r.id,delete r.levelSpan,delete r.size,delete r.startInTotal;let n=r.children||r.columns;n&&e(n)}}(e),e}setAllNodesState(e){this._updateNodeHierarchyState(this.tree,e)}_updateNodeHierarchyState(e,t){e.children&&e.children.length>0&&e.children[0].dimensionKey?(-1!==e.level&&(e.hierarchyState=t),e.children.forEach(e=>{this._updateNodeHierarchyState(e,t)})):e.hierarchyState=a.g.none}}function h(e,t,i,r,l,o){var a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E;let P=e.id,B=null!=(s=null==(a=o.rowsDefine)?void 0:a.find(t=>"string"!=typeof t&&t.dimensionKey===e.dimensionKey))?s:null==(h=o.columnsDefine)?void 0:h.find(t=>"string"!=typeof t&&t.dimensionKey===e.dimensionKey),I=null==(d=o.indicatorsDefine)?void 0:d.find(t=>"string"!=typeof t&&(e.indicatorKey?t.indicatorKey===e.indicatorKey:t.title===e.value&&!e.dimensionKey)),L={id:P,title:null!=(u=e.value)?u:null==I?void 0:I.title,field:e.dimensionKey,style:"function"==typeof(null==(c=null!=I?I:B)?void 0:c.headerStyle)?null==(p=null!=I?I:B)?void 0:p.headerStyle:Object.assign({},null==(g=null!=I?I:B)?void 0:g.headerStyle),headerType:null!=(m=null!=(f=null==I?void 0:I.headerType)?f:null==B?void 0:B.headerType)?m:"text",headerIcon:null!=(b=null==I?void 0:I.headerIcon)?b:null==B?void 0:B.headerIcon,define:Object.assign({},e,null!=I?I:Object.assign({},B,{sort:void 0})),fieldFormat:null!=(y=null==I?void 0:I.headerFormat)?y:null==B?void 0:B.headerFormat,dropDownMenu:null!=(v=null==I?void 0:I.dropDownMenu)?v:null==B?void 0:B.dropDownMenu,pivotInfo:{value:e.value,dimensionKey:e.dimensionKey,isPivotCorner:!1},width:null==B?void 0:B.width,minWidth:null==B?void 0:B.minWidth,maxWidth:null==B?void 0:B.maxWidth,showSort:null!=(_=null==I?void 0:I.showSort)?_:null==B?void 0:B.showSort,sort:null==I?void 0:I.sort,description:null==B?void 0:B.description};I?(I.customRender&&(e.customRender=I.customRender),(0,n.Z)(null==(C=o._indicators)?void 0:C.find(e=>e.indicatorKey===I.indicatorKey))||null==(x=o._indicators)||x.push({id:++o.sharedVar.seqId,indicatorKey:I.indicatorKey,field:I.indicatorKey,fieldFormat:null==I?void 0:I.format,cellType:null!=(S=null!=(w=null==I?void 0:I.cellType)?w:null==I?void 0:I.columnType)?S:"text",chartModule:"chartModule"in I?I.chartModule:null,chartSpec:"chartSpec"in I?I.chartSpec:null,noDataRenderNothing:"noDataRenderNothing"in I&&I.noDataRenderNothing,sparklineSpec:"sparklineSpec"in I?I.sparklineSpec:null,style:null==I?void 0:I.style,icon:null==I?void 0:I.icon,define:Object.assign({},e,I,{dragHeader:null==B?void 0:B.dragHeader}),width:null==I?void 0:I.width,minWidth:null==I?void 0:I.minWidth,maxWidth:null==I?void 0:I.maxWidth,disableColumnResize:null==I?void 0:I.disableColumnResize})):e.indicatorKey&&((0,n.Z)(null==(A=o._indicators)?void 0:A.find(t=>t.indicatorKey===e.indicatorKey))||null==(k=o._indicators)||k.push({id:++o.sharedVar.seqId,indicatorKey:e.indicatorKey,field:e.indicatorKey,cellType:"text",define:Object.assign({},e)})),i[P]=L,o._headerObjects[P]=L;for(let e=l-1;e>=0;e--)t[e][o.colIndex]=r[e];if(t[l][o.colIndex]=P,e.levelSpan>1)for(let i=1;i<e.levelSpan;i++){if(!t[l+i]){t[l+i]=[];for(let e=0;e<o.colIndex;e++)t[l+i][e]=t[l][e]}t[l+i][o.colIndex]=P}if((null==(M=e.children)?void 0:M.length)>=1)o._addHeaders(t,l+(null!=(T=e.levelSpan)?T:1),null!=(R=e.children)?R:[],[...r,...Array(null!=(E=e.levelSpan)?E:1).fill(P)],i);else{for(let e=l+1;e<t.length;e++)t[e][o.colIndex]=P;o.colIndex++}}function d(e,t,i,r,l,o,s,h,d,u,c,p){var g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K,X,Y,q,J;let Q=e.id,ee=null!=(f=null==(g=p.rowsDefine)?void 0:g.find(t=>"string"!=typeof t&&t.dimensionKey===e.dimensionKey))?f:null==(m=p.columnsDefine)?void 0:m.find(t=>"string"!=typeof t&&t.dimensionKey===e.dimensionKey),et=null==(b=p.indicatorsDefine)?void 0:b.find(t=>"string"!=typeof t&&(e.indicatorKey?t.indicatorKey===e.indicatorKey:t.title===e.value&&!e.dimensionKey)),ei={id:Q,title:null!=(y=e.value)?y:null==et?void 0:et.title,field:e.dimensionKey,style:"function"==typeof(null==(v=null!=et?et:ee)?void 0:v.headerStyle)?null==(_=null!=et?et:ee)?void 0:_.headerStyle:Object.assign({},null==(C=null!=et?et:ee)?void 0:C.headerStyle),headerType:null!=(w=null!=(x=null==et?void 0:et.headerType)?x:null==ee?void 0:ee.headerType)?w:"text",headerIcon:null!=(S=null==et?void 0:et.headerIcon)?S:null==ee?void 0:ee.headerIcon,define:Object.assign(e,{linkJump:null==(A=null!=et?et:ee)?void 0:A.linkJump,linkDetect:null==(k=null!=et?et:ee)?void 0:k.linkDetect,templateLink:null==(M=null!=et?et:ee)?void 0:M.templateLink,keepAspectRatio:null!=(R=null==(T=null!=et?et:ee)?void 0:T.keepAspectRatio)&&R,imageAutoSizing:null==(E=null!=et?et:ee)?void 0:E.imageAutoSizing,headerCustomRender:null==(P=null!=et?et:ee)?void 0:P.headerCustomRender,headerCustomLayout:null==(B=null!=et?et:ee)?void 0:B.headerCustomLayout,dragHeader:null==ee?void 0:ee.dragHeader,disableHeaderHover:!!(null==(I=null!=et?et:ee)?void 0:I.disableHeaderHover),disableHeaderSelect:!!(null==(L=null!=et?et:ee)?void 0:L.disableHeaderSelect),showSort:null!=(F=null==et?void 0:et.showSort)?F:null==ee?void 0:ee.showSort,hide:null==et?void 0:et.hide}),fieldFormat:null!=(H=null==et?void 0:et.headerFormat)?H:null==ee?void 0:ee.headerFormat,dropDownMenu:null!=(O=null==et?void 0:et.dropDownMenu)?O:null==ee?void 0:ee.dropDownMenu,pivotInfo:{value:e.value,dimensionKey:e.dimensionKey,isPivotCorner:!1},hierarchyLevel:e.level,dimensionTotalLevel:o,hierarchyState:e.hierarchyState,width:null==ee?void 0:ee.width,minWidth:null==ee?void 0:ee.minWidth,maxWidth:null==ee?void 0:ee.maxWidth,showSort:null!=(D=null==et?void 0:et.showSort)?D:null==ee?void 0:ee.showSort,sort:null==et?void 0:et.sort,description:null==ee?void 0:ee.description,parentCellId:r[r.length-1]};et?(et.customRender&&(e.customRender=et.customRender),(0,n.Z)(null==(z=p._indicators)?void 0:z.find(e=>e.indicatorKey===et.indicatorKey))||null==(W=p._indicators)||W.push({id:++p.sharedVar.seqId,indicatorKey:et.indicatorKey,field:et.indicatorKey,fieldFormat:null==et?void 0:et.format,cellType:null!=(N=null!=(Z=null==et?void 0:et.cellType)?Z:null==et?void 0:et.columnType)?N:"text",chartModule:"chartModule"in et?et.chartModule:null,chartSpec:"chartSpec"in et?et.chartSpec:null,noDataRenderNothing:"noDataRenderNothing"in et&&et.noDataRenderNothing,sparklineSpec:"sparklineSpec"in et?et.sparklineSpec:null,style:null==et?void 0:et.style,icon:null==et?void 0:et.icon,define:Object.assign({},e,et,{dragHeader:null==ee?void 0:ee.dragHeader}),width:null==et?void 0:et.width,minWidth:null==et?void 0:et.minWidth,maxWidth:null==et?void 0:et.maxWidth,disableColumnResize:null==et?void 0:et.disableColumnResize})):e.indicatorKey&&((0,n.Z)(null==($=p._indicators)?void 0:$.find(t=>t.indicatorKey===e.indicatorKey))||null==(j=p._indicators)||j.push({id:++p.sharedVar.seqId,indicatorKey:e.indicatorKey,field:e.indicatorKey,cellType:"text",define:Object.assign({},e)})),i[Q]=ei,p._headerObjects[Q]=ei;for(let e=l-1;e>=0;e--)t[e][p.colIndex]=r[e];t[l][p.colIndex]=Q;let er=Math.min((u?c:!c)?s:s-1,null!=(G=e.levelSpan)?G:1e3);if(er>0)for(let e=l+1;e<er;e++){if(!t[e]){t[e]=[];for(let i=0;i<p.colIndex;i++)t[e][i]=t[l][i]}t[e][p.colIndex]=Q}if((null==(V=(e.hierarchyState===a.g.expand&&e).children)?void 0:V.length)>=1)p._addHeadersForGridTreeMode(t,l+(null!=(U=e.levelSpan)?U:1),null!=(K=e.children)?K:[],[...r,...Array(null!=(X=e.levelSpan)?X:1).fill(Q)],o,s,h&&e.hierarchyState===a.g.expand,d,i,u);else{let n=(u?c:!c)?s:s-1;for(let e=l+1;e<n;e++)t[e]||(t[e]=[]),t[e][p.colIndex]=Q;if(l<=n-1&&(u&&!1===c||!u&&!0===c)){let a=e;for(;a&&!(null==(Y=a.children)?void 0:Y[0].indicatorKey);)a=a.children[0];p._addHeadersForGridTreeMode(t,s-1,null!=(q=a.children)?q:[],[...r,...Array(Math.max(n-l,null!=(J=e.levelSpan)?J:1)).fill(Q)],o,s,!0,d,i,u)}else p.colIndex++}}function u(e,t,i,r,l,o,s,h,d){var u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z;let W=e.id,Z=h.find(t=>"string"!=typeof t&&t.dimensionKey===e.dimensionKey),N=null==(u=d.indicatorsDefine)?void 0:u.find(t=>"string"!=typeof t&&(e.indicatorKey?t.indicatorKey===e.indicatorKey:t.title===e.value)),$={id:W,title:null!=(c=e.value)?c:N.title,field:e.dimensionKey,style:e.level+1===o||"function"==typeof(null==(p=null!=N?N:Z)?void 0:p.headerStyle)?null==(g=null!=N?N:Z)?void 0:g.headerStyle:Object.assign({},null==(f=null!=N?N:Z)?void 0:f.headerStyle,{textAlign:"left"}),headerType:null!=(b=null!=(m=null==N?void 0:N.headerType)?m:null==Z?void 0:Z.headerType)?b:"text",headerIcon:null!=(y=null==N?void 0:N.headerIcon)?y:null==Z?void 0:Z.headerIcon,define:Object.assign(e,{linkJump:null==(v=null!=N?N:Z)?void 0:v.linkJump,linkDetect:null==(_=null!=N?N:Z)?void 0:_.linkDetect,templateLink:null==(C=null!=N?N:Z)?void 0:C.templateLink,keepAspectRatio:null!=(w=null==(x=null!=N?N:Z)?void 0:x.keepAspectRatio)&&w,imageAutoSizing:null==(S=null!=N?N:Z)?void 0:S.imageAutoSizing,headerCustomRender:null==(A=null!=N?N:Z)?void 0:A.headerCustomRender,headerCustomLayout:null==(k=null!=N?N:Z)?void 0:k.headerCustomLayout,dragHeader:null==Z?void 0:Z.dragHeader,disableHeaderHover:!!(null==(M=null!=N?N:Z)?void 0:M.disableHeaderHover),disableHeaderSelect:!!(null==(T=null!=N?N:Z)?void 0:T.disableHeaderSelect),showSort:null!=(R=null==N?void 0:N.showSort)?R:null==Z?void 0:Z.showSort,hide:null==N?void 0:N.hide}),fieldFormat:null!=(E=null==N?void 0:N.headerFormat)?E:null==Z?void 0:Z.headerFormat,dropDownMenu:null!=(P=null==N?void 0:N.dropDownMenu)?P:null==Z?void 0:Z.dropDownMenu,pivotInfo:{value:e.value,dimensionKey:e.dimensionKey,isPivotCorner:!1},hierarchyLevel:e.level,dimensionTotalLevel:o,hierarchyState:e.hierarchyState,width:null==Z?void 0:Z.width,minWidth:null==Z?void 0:Z.minWidth,maxWidth:null==Z?void 0:Z.maxWidth,parentCellId:r[r.length-1]};N?(N.customRender&&(e.customRender=N.customRender),(0,n.Z)(null==(B=d._indicators)?void 0:B.find(e=>e.indicatorKey===N.indicatorKey))||null==(I=d._indicators)||I.push({id:++d.sharedVar.seqId,indicatorKey:N.indicatorKey,field:N.indicatorKey,fieldFormat:null==N?void 0:N.format,cellType:null!=(F=null!=(L=null==N?void 0:N.cellType)?L:null==N?void 0:N.columnType)?F:"text",chartModule:"chartModule"in N?N.chartModule:null,chartSpec:"chartSpec"in N?N.chartSpec:null,noDataRenderNothing:"noDataRenderNothing"in N&&N.noDataRenderNothing,sparklineSpec:"sparklineSpec"in N?N.sparklineSpec:null,style:null==N?void 0:N.style,icon:null==N?void 0:N.icon,define:Object.assign({},e,N,{dragHeader:null==Z?void 0:Z.dragHeader}),width:null==N?void 0:N.width,minWidth:null==N?void 0:N.minWidth,maxWidth:null==N?void 0:N.maxWidth,disableColumnResize:null==N?void 0:N.disableColumnResize})):e.indicatorKey&&((0,n.Z)(null==(H=d._indicators)?void 0:H.find(t=>t.indicatorKey===e.indicatorKey))||null==(O=d._indicators)||O.push({id:++d.sharedVar.seqId,indicatorKey:e.indicatorKey,field:e.indicatorKey,cellType:"text",define:Object.assign({},e)})),i[W]=$,d._headerObjects[W]=$,t[l][d.colIndex]=W;for(let e=l-1;e>=0;e--)t[e][d.colIndex]=r[e];if(e.hierarchyState===a.g.expand&&(null==(D=e.children)?void 0:D.length)>=1)s&&d.colIndex++,d._addHeadersForTreeMode(t,l,null!=(z=e.children)?z:[],[...r,W],o,s&&e.hierarchyState===a.g.expand,h,i);else{s&&d.colIndex++;for(let e=l+1;e<t.length;e++)t[e][d.colIndex]=W}}},47962:function(e,t,i){i.d(t,{wh:()=>h,zf:()=>d});var r=i(64776),n=i(96241),l=i(20408);let o=["bgColor","color","strokeColor","borderColor","linkColor"];var a=i(54833);class s{constructor(e,t,i){this.table=e,this.customCellStyle=t,this.customCellStyleArrangement=i,this._customCellStyleArrangementIndex=new Map,this._customCellStyleArrangementTombstoneCount=0,this._rebuildCustomCellStyleArrangementIndex()}_getCustomCellStyleArrangementKey(e){if(e.range){let{start:t,end:i}=e.range;return`range:${t.col},${t.row},${i.col},${i.row}`}if(void 0!==e.col&&void 0!==e.row)return`cell:${e.col},${e.row}`}_rebuildCustomCellStyleArrangementIndex(){this._customCellStyleArrangementIndex.clear(),this._customCellStyleArrangementTombstoneCount=0;for(let e=0;e<this.customCellStyleArrangement.length;e++){if(!(0,r.Z)(this.customCellStyleArrangement[e].customStyleId)){this._customCellStyleArrangementTombstoneCount++;continue}let t=this._getCustomCellStyleArrangementKey(this.customCellStyleArrangement[e].cellPosition);t&&this._customCellStyleArrangementIndex.set(t,e)}}_compactCustomCellStyleArrangementIfNeeded(){let e=this.customCellStyleArrangement.length;if(this._customCellStyleArrangementTombstoneCount<2048||4*this._customCellStyleArrangementTombstoneCount<e)return;let t=this.customCellStyleArrangement.filter(e=>(0,r.Z)(e.customStyleId));t.length!==this.customCellStyleArrangement.length?(this.customCellStyleArrangement.length=0,this.customCellStyleArrangement.push(...t),this._rebuildCustomCellStyleArrangementIndex()):this._customCellStyleArrangementTombstoneCount=0}getCustomCellStyle(e,t){let i=this.getCustomCellStyleIds(e,t);if(i.length){let r=[];if(i.forEach(i=>{let l=this.getCustomCellStyleOption(i);if((0,n.Z)(null==l?void 0:l.style)){let i=l.style({col:e,row:t,table:this.table,value:this.table.getCellValue(e,t),dataValue:this.table.getCellOriginValue(e,t),cellHeaderPaths:this.table.getCellHeaderPaths(e,t)});r.push(i)}else(null==l?void 0:l.style)&&r.push(l.style)}),!r.length)return;return(0,l.Z)({},...r)}}getCustomCellStyleIds(e,t){let i=[],n=this.table.getCellRange(e,t);for(let e=n.start.col;e<=n.end.col;e++)for(let t=n.start.row;t<=n.end.row;t++)this.customCellStyleArrangement.forEach(n=>{(0,r.Z)(n.customStyleId)&&(n.cellPosition.range?n.cellPosition.range.start.col<=e&&n.cellPosition.range.end.col>=e&&n.cellPosition.range.start.row<=t&&n.cellPosition.range.end.row>=t&&i.push(n.customStyleId):n.cellPosition.col===e&&n.cellPosition.row===t&&i.push(n.customStyleId))});return i}getCustomCellStyleOption(e){return this.customCellStyle.find(t=>t.id===e)}registerCustomCellStyle(e,t){let i=this.customCellStyle.findIndex(t=>t.id===e);-1===i?this.customCellStyle.push({id:e,style:t}):this.customCellStyle[i]={id:e,style:t},this.customCellStyleArrangement.forEach(t=>{let i=t.cellPosition;if(t.customStyleId===e)if(i.range)for(let e=Math.max(0,i.range.start.col);e<=Math.min(this.table.colCount-1,i.range.end.col);e++)for(let t=Math.max(0,i.range.start.row);t<=Math.min(this.table.rowCount-1,i.range.end.row);t++)this.table.scenegraph.updateCellContent(e,t);else this.table.scenegraph.updateCellContent(i.col,i.row)}),this.table.scenegraph.updateNextFrame()}arrangeCustomCellStyle(e,t,i){var n,l;let a=this._getCustomCellStyleArrangementKey(e),s=a&&null!=(n=this._customCellStyleArrangementIndex.get(a))?n:-1;if(a&&-1!==s){let e=this.customCellStyleArrangement[s],t=e?this._getCustomCellStyleArrangementKey(e.cellPosition):void 0;e&&(0,r.Z)(e.customStyleId)&&t===a||(-1!==(s=this.customCellStyleArrangement.findIndex(e=>!!(0,r.Z)(e.customStyleId)&&this._getCustomCellStyleArrangementKey(e.cellPosition)===a))?this._customCellStyleArrangementIndex.set(a,s):this._customCellStyleArrangementIndex.delete(a))}if(-1!==s||a||(s=this.customCellStyleArrangement.findIndex(t=>!!(0,r.Z)(t.customStyleId)&&(t.cellPosition.range&&e.range?t.cellPosition.range.start.col===e.range.start.col&&t.cellPosition.range.start.row===e.range.start.row&&t.cellPosition.range.end.col===e.range.end.col&&t.cellPosition.range.end.row===e.range.end.row:t.cellPosition.col===e.col&&t.cellPosition.row===e.row))),-1===s&&!t)return;if(-1===s&&t){this.customCellStyleArrangement.push({cellPosition:{col:e.col,row:e.row,range:e.range},customStyleId:t});let i=this.customCellStyleArrangement.length-1,r=this._getCustomCellStyleArrangementKey(this.customCellStyleArrangement[i].cellPosition);r&&this._customCellStyleArrangementIndex.set(r,i)}else{if(this.customCellStyleArrangement[s].customStyleId===t)return;if(t)this.customCellStyleArrangement[s].customStyleId=t;else{let e=this._getCustomCellStyleArrangementKey(this.customCellStyleArrangement[s].cellPosition);(0,r.Z)(this.customCellStyleArrangement[s].customStyleId)&&this._customCellStyleArrangementTombstoneCount++,this.customCellStyleArrangement[s].customStyleId=null,e&&this._customCellStyleArrangementIndex.delete(e),this._compactCustomCellStyleArrangementIfNeeded()}}let h=t?null==(l=this.getCustomCellStyleOption(t))?void 0:l.style:void 0;if(h){for(let e in i=!0,h)if(-1===o.indexOf(e)){i=!1;break}}if(e.range)for(let t=Math.max(0,e.range.start.col);t<=Math.min(this.table.colCount-1,e.range.end.col);t++)for(let r=Math.max(0,e.range.start.row);r<=Math.min(this.table.rowCount-1,e.range.end.row);r++){let e=this.table.getCellRange(t,r);for(let t=e.start.col;t<=e.end.col;t++)for(let r=e.start.row;r<=e.end.row;r++)this.table.scenegraph.updateCellContent(t,r,i)}else this.table.scenegraph.updateCellContent(e.col,e.row,i);this.table.scenegraph.updateNextFrame()}updateCustomCell(e,t){this.customCellStyle.length=0,this.customCellStyleArrangement.length=0,this._customCellStyleArrangementIndex.clear(),this._customCellStyleArrangementTombstoneCount=0,e.forEach(e=>{this.registerCustomCellStyle(e.id,e.style)}),t.forEach(e=>{this.arrangeCustomCellStyle(e.cellPosition,e.customStyleId)})}hasCustomCellStyle(e){return this.customCellStyle.some(t=>t.id===e)}}function h(e,t){for(let i in e=e.clone(),t){let n=t[i];(0,r.Z)(n)&&(e[`_${i}`]=n)}return e}let d=()=>{a.F.registerComponent("customCellStylePlugin",s)}},59610:function(e,t,i){i.d(t,{tg:()=>n});var r=i(75008);function n(e,t){return null!=t?function(e,t,i){let r=e[t];return e[t]=i,r}(r.f,e,t):r.f[e]}},23946:function(e,t,i){i.d(t,{FH:()=>v,Jp:()=>w,cd:()=>_,nH:()=>S,ws:()=>C});var r=i(8849),n=i(638),l=i(22288),o=i(63654),a=i(24217),s=i(9252),h=i(91689),d=i(96241),u=i(64776),c=i(83624),p=i(80971),g=i(95723),f=i(81584),m=i(26249),b=i(70559);let y="_custom_",v="custom-container",_=y+"_0";function C(e,t,i,h,p,g,b,_,C,k,M){var T,R,E;let P,B,I,L,F=!0,H=!1;if("react-custom-layout"===e&&(e=(null==(T=M.reactCustomLayout)?void 0:T.getCustomLayoutFunc(i,h))||m.D),"function"==typeof e){let t=e({col:null!=(R=null==k?void 0:k.start.col)?R:i,row:null!=(E=null==k?void 0:k.start.row)?E:h,dataValue:M.getCellOriginValue(i,h),value:M.getCellValue(i,h)||"",rect:{left:0,top:0,right:p,bottom:g,width:p,height:g},table:M,originCol:i,originRow:h});if(!t)return{renderDefault:!0};t.rootContainer&&(t.rootContainer=S(t.rootContainer,M.animationManager.timeline)),t.rootContainer instanceof r.ZA&&((L=t.rootContainer).name=v,L.col=i,L.row=h),F=t.renderDefault,H=t.enableCellPadding}else if("function"==typeof t){let e=t({col:i,row:h,dataValue:M.getCellOriginValue(i,h),value:M.getCellValue(i,h)||"",rect:{left:0,top:0,right:p,bottom:g,width:p,height:g},table:M});e&&(I=e.elements,F=e.renderDefault,P=e.expectedWidth,B=e.expectedHeight)}else t&&(P=t.expectedWidth,B=t.expectedHeight,I=t.elements,F=t.renderDefault);return I&&(L=function(e,t,i,h){let p=new r.ZA({x:0,y:0,width:t,height:i,fill:!1,stroke:!1,pickable:!1});return p.name=v,(function(e,t,i,r){let n=[];for(let l=0;l<e.length;l++){let o=Object.assign({},e[l]);for(let e in o)o.hasOwnProperty(e)&&(0,d.Z)(o[e])&&(o[e]=o[e](r));(0,u.Z)(o.x)&&(o.x=(0,c.Z)(o.x)?x(o.x,t-0):Number(o.x)),(0,u.Z)(o.y)&&(o.y=(0,c.Z)(o.y)?x(o.y,i-0):Number(o.y)),"width"in o&&(o.width=(0,c.Z)(o.width)?x(o.width,t-0):Number(o.width)),"height"in o&&(o.height=(0,c.Z)(o.height)?x(o.height,i-0):Number(o.height)),"radius"in o&&(o.radius=(0,c.Z)(o.radius)?x(o.radius,Math.min(t-0,i-0)):Number(o.radius)),"hover"in o&&(o.hover.x=(0,c.Z)(o.hover.x)?x(o.hover.x,t-0):Number(o.hover.x),o.hover.y=(0,c.Z)(o.hover.y)?x(o.hover.y,i-0):Number(o.hover.y),o.hover.width=(0,c.Z)(o.hover.width)?x(o.hover.width,t-0):Number(o.hover.width),o.hover.height=(0,c.Z)(o.hover.height)?x(o.hover.height,i-0):Number(o.hover.height),o.hover.x+=0,o.hover.y+=0),o.x=o.x+0,o.y=o.y+0,n.push(o)}return n})(e,t,i,h).forEach(e=>{var t,i,r,h,d,u,c,g,m,b,y,v,_,C,x,w,S,A,k,M,T,R,E,P,B,I,L,F;switch(e.clickable&&(e.pickable=e.clickable),e.type){case"arc":let H=(0,n.Q)({x:e.x,y:e.y,dx:null!=(t=e.dx)?t:0,dy:null!=(i=e.dy)?i:0,fill:e.fill,stroke:e.stroke,outerRadius:e.radius,startAngle:e.startAngle,endAngle:e.endAngle,pickable:!!e.pickable,cursor:e.cursor});H.name=e.name,p.appendChild(H);break;case"text":if(e.background){let t=null!=(h=null==(r=e.background)?void 0:r.expandX)?h:0,i=null!=(u=null==(d=e.background)?void 0:d.expandY)?u:0,n=(0,l.f)({x:e.x-t,y:e.y-i,dx:null!=(c=e.dx)?c:0,dy:null!=(g=e.dy)?g:0,width:e.width+2*t,height:e.height+2*i,cornerRadius:null!=(b=null==(m=e.background)?void 0:m.cornerRadius)?b:0,fill:null!=(v=null==(y=e.background)?void 0:y.fill)?v:"#888"});p.appendChild(n)}let O=new o.x(Object.assign({pickable:!!e.pickable,fill:null!=(_=e.color)?_:e.fill},e));O.name=e.name,p.appendChild(O);break;case"rect":let D=(0,l.f)({x:e.x,y:e.y,dx:null!=(C=e.dx)?C:0,dy:null!=(x=e.dy)?x:0,width:e.width,height:e.height,cornerRadius:e.radius,fill:e.fill,stroke:e.stroke,pickable:!!e.pickable,cursor:e.cursor});D.name=e.name,p.appendChild(D);break;case"circle":let z=(0,a.y)({x:e.x,y:e.y,dx:null!=(w=e.dx)?w:0,dy:null!=(S=e.dy)?S:0,radius:e.radius,fill:e.fill,stroke:e.stroke,pickable:!!e.pickable,cursor:e.cursor});z.name=e.name,p.appendChild(z);break;case"icon":let W=new f.J({x:e.x,y:e.y,dx:null!=(A=e.dx)?A:0,dy:null!=(k=e.dy)?k:0,width:e.width,height:e.height,image:e.svg,backgroundWidth:e.hover?null!=(M=e.hover.width)?M:e.width:void 0,backgroundHeight:e.hover?null!=(T=e.hover.width)?T:e.width:void 0,backgroundColor:e.hover?null!=(R=e.hover.bgColor)?R:"rgba(22,44,66,0.2)":void 0,pickable:!!e.pickable,cursor:e.cursor});W.name=e.name,W.role="icon-custom",p.appendChild(W);break;case"image":let Z=new f.J({x:e.x,y:e.y,dx:null!=(E=e.dx)?E:0,dy:null!=(P=e.dy)?P:0,width:e.width,height:e.height,image:e.src,backgroundWidth:e.hover?null!=(B=e.hover.width)?B:e.width:void 0,backgroundHeight:e.hover?null!=(I=e.hover.width)?I:e.width:void 0,backgroundColor:e.hover?null!=(L=e.hover.bgColor)?L:"rgba(22,44,66,0.2)":void 0,pickable:!!e.pickable,cursor:e.cursor,shape:e.shape});Z.name=e.name,Z.role="image-custom",p.appendChild(Z);break;case"line":let N=(0,s.W)({points:e.points,lineWidth:null!=(F=e.lineWidth)?F:1,stroke:e.stroke,pickable:!!e.pickable,cursor:e.cursor});N.name=e.name,p.appendChild(N)}}),p}(I,b?P:p,_?B:g,M.getCellValue(i,h))),H&&L.setAttributes({x:C[3],y:C[0],width:p-C[1]-C[3],height:g-C[0]-C[2]}),w(L,p,g),k&&(k.start.col!==k.end.col||k.start.row!==k.end.row)&&function e(t,i,r,n,l){t&&(t.name=`${y}${null!=l?l:""}_${n}`,t.onBeforeAttributeUpdate=A,"group"===t.type&&t.childrenCount&&t.forEachChildren((t,o)=>{e(t,i,r,o,(null!=l?l:"")+"_"+n)}))}(L,i,h,0),{elementsGroup:L,renderDefault:F}}function x(e,t){return e.endsWith("px")?parseInt(e,10):e.endsWith("%")&&t?parseInt(e,10)/100*t:parseInt(e,10)}function w(e,t,i){e&&e.forEachChildren(e=>{var r,n;e&&((0,p.Z)(e.attribute.width)&&e.attribute.width.percent&&e.setAttribute("width",Math.max(0,e.attribute.width.percent/100*t+(null!=(r=e.attribute.width.delta)?r:0))),e.attribute.width<0&&e.setAttribute("width",0),(0,p.Z)(e.attribute.height)&&e.attribute.height.percent&&e.setAttribute("height",Math.max(0,e.attribute.height.percent/100*i+(null!=(n=e.attribute.height.delta)?n:0))),e.attribute.height<0&&e.setAttribute("height",0),"group"===e.type&&w(e,e.attribute.width,e.attribute.height))})}function S(e,t){if(!e||!(0,u.Z)(e.$$typeof)&&!(0,u.Z)(e.vtype))return e;let i=e.type,{attribute:r,children:n,stateProxy:l,animation:o}=e.props,a=i({attribute:r});if(function(e,t){let i=!1;switch(e.type){case"richtext":case"rich/image":break;default:i=!0}i&&Object.keys(t).forEach(i=>{let r=h.Nv[i];r&&e.on(r,t[i])})}(a,e.props),l&&(a.stateProxy=l),a.id=r.id,a.name=r.name,(0,g.Z)(n)?n.forEach(e=>{let i=S(e,t);i&&i.type&&a.add(i)}):n&&a.add(S(n,t)),(0,g.Z)(o)&&t){let e=a.animate();e.setTimeline(t),o.forEach(t=>{e[t[0]](...t.slice(1))})}return a}function A(e,t){if(this.skipMergeUpdate)return;let i=(0,b.J$)(this);if(!i||!i.stage)return;let r=i.stage.table;this.skipAttributeUpdate=!0;let{mergeStartCol:n,mergeEndCol:l,mergeStartRow:o,mergeEndRow:a}=i;if((0,u.Z)(n)&&(0,u.Z)(l)&&(0,u.Z)(o)&&(0,u.Z)(a)&&(n!==l||o!==a)){for(let t=n;t<=l;t++)for(let n=o;n<=a;n++){if(t===i.col&&n===i.row)continue;let l=r.scenegraph.highPerformanceGetCell(t,n);if("cell"===l.role){let t=l.getChildByName(this.name,!0);if(!t||t.skipAttributeUpdate)continue;for(let i in e)e[i]!==t.attribute[i]&&"dx"!==i&&"dy"!==i&&t.setAttribute(i,e[i])}}this.skipAttributeUpdate=void 0}}},87399:function(e,t,i){i.d(t,{e:()=>g,k:()=>f});var r=i(55105),n=i(22288),l=i(20408),o=i(63401),a=i(2837),s=i(64776);let h={},d={};function u(e,t,i,r,n,l=!1,o=!1){var a;(0,s.Z)(h[e])||(h[e]={});let{rowStart:d}=n.getBodyVisibleRowRange(),c=n.getBodyVisibleRowRange().rowEnd;c=Math.min(n.rowCount-1-n.bottomFrozenRowCount,c);for(let u=d;u<=c;u++){let p=n.scenegraph.getCell(e,u),g=null==(a=null==p?void 0:p.getChildren())?void 0:a[0];g.addUpdateShapeAndBoundsTag(),h[e][u]||(0,s.Z)(g)&&(g.activeChartInstance||g.activate(n),h[e][u]=g.activeChartInstance),setTimeout(()=>{var a,s,p,g,f,m;if(null==(a=h[e])?void 0:a[u]){let a=n.options.chartDimensionLinkage,b=!o;if(!o&&"object"==typeof a){if(b=null==(s=a.showTooltip)||s,u===c&&b){let e=null!=(p=a.heightLimitToShowTooltipForEdgeRow)?p:0,{rowEnd:t}=n.getBodyVisibleRowRange(0,-e);if(t===c)b=!0;else{let{rowEnd:e}=n.getBodyVisibleRowRange(0,5);b=e!==c}}else if(u===d&&b){let e=null!=(g=a.heightLimitToShowTooltipForEdgeRow)?g:0,{rowStart:t}=n.getBodyVisibleRowRange(e,0);if(t===d)b=!0;else{let{rowStart:e}=n.getBodyVisibleRowRange(0,-5);b=e!==d}}}if(o)n.stateManager.hover.cellPos.col===e&&n.stateManager.hover.cellPos.row===u||null==(m=(f=h[e][u]).showCrosshair)||m.call(f,e=>"left"===e.layoutOrient?i:t);else{let i=Math.max(n.frozenRowCount?n.getCellRelativeRect(e,n.frozenRowCount-1).bottom:0,n.getCellRelativeRect(e,u).top);l?(n.stateManager.hover.cellPos.col===e&&n.stateManager.hover.cellPos.row===u||h[e][u].hideTooltip(),h[e][u].setDimensionIndex(t,{tooltip:!1,showTooltipOption:{x:r.x,y:i,activeType:"dimension"}})):h[e][u].setDimensionIndex(t,{tooltip:b,showTooltipOption:{x:r.x,y:i,activeType:"dimension"}})}}},0),n.scenegraph.updateNextFrame()}}function c(e,t,i,r,n,l=!1,o=!1){var a;(0,s.Z)(d[e])||(d[e]={});let{colStart:h}=n.getBodyVisibleColRange(),u=n.getBodyVisibleColRange().colEnd;u=Math.min(n.colCount-1-n.rightFrozenColCount,u);for(let c=h;c<=u;c++){let p=n.scenegraph.getCell(c,e),g=null==(a=null==p?void 0:p.getChildren())?void 0:a[0];g.addUpdateShapeAndBoundsTag(),d[e][c]||(0,s.Z)(g)&&(g.activeChartInstance||g.activate(n),d[e][c]=g.activeChartInstance),setTimeout(()=>{var a,s,p,g;if(null==(a=d[e])?void 0:a[c]){let a=n.options.chartDimensionLinkage,f=!o;if(!o&&"object"==typeof a){if(f=null==(s=a.showTooltip)||s,c===u&&f){let e=a.widthLimitToShowTooltipForEdgeColumn,{colEnd:t}=n.getBodyVisibleColRange(0,-e);if(t===u)f=!0;else{let{colEnd:e}=n.getBodyVisibleColRange(0,5);f=e!==u}}else if(c===h&&f){let e=a.widthLimitToShowTooltipForEdgeColumn,{colStart:t}=n.getBodyVisibleColRange(e,0);if(t===h)f=!0;else{let{colStart:e}=n.getBodyVisibleColRange(0,-5);f=e!==h}}}if(o)n.stateManager.hover.cellPos.col===c&&n.stateManager.hover.cellPos.row===e||null==(g=(p=d[e][c]).showCrosshair)||g.call(p,e=>"left"===e.layoutOrient?i:t);else{let i=Math.max(n.frozenColCount?n.getCellRelativeRect(n.frozenColCount-1,e).right:0,n.getCellRelativeRect(c,e).left);l?(n.stateManager.hover.cellPos.col===c&&n.stateManager.hover.cellPos.row===e||d[e][c].hideTooltip(),d[e][c].setDimensionIndex(t,{tooltip:!1,showTooltipOption:{x:i,y:r.y,activeType:"dimension"}})):d[e][c].setDimensionIndex(t,{tooltip:f,showTooltipOption:{x:i,y:r.y,activeType:"dimension"}})}}},0),n.scenegraph.updateNextFrame()}}var p=i(26874);let g=(0,r.Gg)();class f extends n.U{constructor(e,t){if(super(t),this.type="chart",this.activeChartInstanceHoverOnMark=null,this.justShowMarkTooltip=void 0,this.justShowMarkTooltipTimer=Date.now(),this.delayRunDimensionHoverTimer=void 0,this.numberType=g,this.isShareChartSpec=e,t.chartInstance)this.chartInstance=t.chartInstance;else{let e=this.chartInstance=new t.ClassType(t.spec,(0,l.Z)({},this.attribute.tableChartOption,{renderCanvas:t.canvas,mode:"node"===this.attribute.mode?"node":"desktop-browser",modeParams:this.attribute.modeParams,canvasControled:!1,viewBox:{x1:0,x2:0,y1:0,y2:0},dpr:t.dpr,interactive:!1,animation:!1,autoFit:!1}));e.renderSync(),e.getStage().enableDirtyBounds(),t.chartInstance=this.chartInstance=e}}activate(e){var t,i,r,n;if(this.activeChartInstance)return;let{col:s,row:h}=this.parent,d=(0,a.J)(this.parent,e),{x1:g,y1:m,x2:b,y2:y}=this.getViewBox(),v=(function(e,t,i){var r,n,l,a,s,h,d,u;let{layoutMap:c}=i.internalProps,p=new o.YZ,g=i.scenegraph.tableGroup.globalAABBBounds;return p.x1=g.x1,p.x2=g.x2,p.y1=g.y1,p.y2=g.y2,c.isLeftBottomCorner(e,t)||c.isRightTopCorner(e,t)||c.isLeftTopCorner(e,t)||c.isRightBottomCorner(e,t)||(c.isFrozenColumn(e,t)?(p.y1=g.y1+i.getFrozenRowsHeight(),p.y2=g.y2-i.getBottomFrozenRowsHeight()):c.isFrozenRow(e,t)?(p.x1=g.x1+i.getFrozenColsWidth(),p.x2=g.x2-i.getRightFrozenColsWidth()):c.isRightFrozenColumn(e,t)?(p.y1=g.y1+i.getFrozenRowsHeight(),p.y2=g.y2-i.getBottomFrozenRowsHeight()):c.isBottomFrozenRow(e,t)?(p.x1=g.x1+i.getFrozenColsWidth(),p.x2=g.x2-i.getRightFrozenColsWidth()):c.isFrozenColumn(e,t)||c.isRightFrozenColumn(e,t)||(p.x1=g.x1+i.getFrozenColsWidth(),p.x2=g.x2-i.getRightFrozenColsWidth(),p.y1=g.y1+i.getFrozenRowsHeight(),p.y2=g.y2-i.getBottomFrozenRowsHeight())),p.x1=p.x1+(null!=(n=null==(r=i.options.viewBox)?void 0:r.x1)?n:0),p.x2=p.x2+(null!=(a=null==(l=i.options.viewBox)?void 0:l.x1)?a:0),p.y1=p.y1+(null!=(h=null==(s=i.options.viewBox)?void 0:s.y1)?h:0),p.y2=p.y2+(null!=(u=null==(d=i.options.viewBox)?void 0:d.y1)?u:0),p})(s,h,e).intersect({x1:g-e.scrollLeft,x2:b-e.scrollLeft,y1:m-e.scrollTop,y2:y-e.scrollTop});null==(t=this.activeChartInstance)||t.release(),this.attribute.ClassType.globalConfig.uniqueTooltip=!1,this.activeChartInstance=new this.attribute.ClassType(this.attribute.spec,(0,l.Z)({},this.attribute.tableChartOption,{renderCanvas:this.attribute.canvas,mode:"desktop-browser",canvasControled:!1,viewBox:{x1:0,x2:b-g,y1:0,y2:y-m},dpr:e.internalProps.pixelRatio,animation:!1,interactive:!0,autoFit:!1,beforeRender:t=>{let i=this.stage,r=t.window.getContext(),n=i.window.getViewBoxTransform(),l=i.window.getViewBox();r.inuse=!0,r.clearMatrix(),r.setTransform(n.a,n.b,n.c,n.d,n.e,n.f,!0),r.translate(l.x1,l.y1),r.setTransformForCurrent(!0),r.beginPath(),r.rect(v.x1,v.y1,v.x2-v.x1,v.y2-v.y1),r.clip(),r.clearMatrix(),e.options.canvas&&!t.needRender&&(t.pauseRender(),e.scenegraph.stage.dirtyBounds.union(this.globalAABBBounds),e.scenegraph.updateNextFrame())},afterRender(e){e.window.getContext().inuse=!1,e.needRender=!1,_.resumeRender()},renderHooks:{afterClearRect(e){let{context:t,layer:i,viewBox:r}=e;i.main&&e.clear&&d&&(t.beginPath(),t.fillStyle=d,t.rect(r.x1,r.y1,r.x2-r.x1,r.y2-r.y1),t.fill())}},componentShowContent:e.options.chartDimensionLinkage&&"scatter"!==this.attribute.spec.type?{tooltip:{dimension:!1,mark:!0},crosshair:!1}:void 0}));let _=this.activeChartInstance.getStage(),C=this.globalTransMatrix.clone(),x=this.stage.window.getViewBoxTransform();C.multiply(x.a,x.b,x.c,x.d,x.e,x.f),_.window.setViewBoxTransform&&_.window.setViewBoxTransform(C.a,C.b,C.c,C.d,C.e,C.f),this.activeChartInstance.renderSync(),null==(r=null==(i=e.internalProps.layoutMap)?void 0:i.updateDataStateToActiveChartInstance)||r.call(i,this.activeChartInstance),this.activeChartInstance.on("click",t=>{var i;!1===(null==(i=this.attribute.spec.select)?void 0:i.enable)?e.scenegraph.updateChartState(null):f.temp&&e.scenegraph.updateChartState(null==t?void 0:t.datum)}),this.activeChartInstance.on("brushEnd",t=>{var i;e.scenegraph.updateChartState(null==(i=null==t?void 0:t.value)?void 0:i.inBrushData),f.temp=0,setTimeout(()=>{f.temp=1},0)}),e.options.chartDimensionLinkage&&this.activeChartInstance.on("dimensionHover",t=>{var i,r;let n=null==t?void 0:t.dimensionInfo[0],l=null==(i=null==t?void 0:t.event)?void 0:i.canvas,o=null==(r=null==t?void 0:t.event)?void 0:r.viewport;if(o){let i=n.data[0].series.positionToDataX(o.x),r=n.data[0].series.positionToDataY(o.y);if("scatter"===this.attribute.spec.type)u(s,i,void 0,l,e,!1,!0),c(h,void 0,r,l,e,!1,!0),(0,p.hZ)(e.rowHeaderLevelCount-1,h,e.internalProps.layoutMap).labelHoverOnAxis&&e.scenegraph.getCell(e.rowHeaderLevelCount-1,h).firstChild.showLabelHoverOnAxis(l.y-e.getCellRelativeRect(s,h).top,r),(0,p.hZ)(s,e.rowCount-e.bottomFrozenRowCount,e.internalProps.layoutMap).labelHoverOnAxis&&e.scenegraph.getCell(s,e.rowCount-e.bottomFrozenRowCount).firstChild.showLabelHoverOnAxis(l.x-e.getCellRelativeRect(s,h).left,i);else{let i=!0,o=this.activeChartInstanceHoverOnMark,a=this.justShowMarkTooltip;t.mark&&t.datum&&!Array.isArray(t.datum)?(this.activeChartInstanceHoverOnMark=t.mark,i=!0):(this.activeChartInstanceHoverOnMark=null,i=!1),this.justShowMarkTooltip=i;let d=!1;if(!1!==a&&!1===i?(this.justShowMarkTooltipTimer=Date.now(),d=!0):!1===a&&!1===i?d=Date.now()-this.justShowMarkTooltipTimer<100:(!1===a&&!0===i||!0===a&&!0===i)&&(d=!1,clearTimeout(this.delayRunDimensionHoverTimer),this.delayRunDimensionHoverTimer=void 0),"enter"===t.action||"move"===t.action||o!==this.activeChartInstanceHoverOnMark){let t=n.value,o=e.options.indicatorsAsCol;if(d?(clearTimeout(this.delayRunDimensionHoverTimer),this.delayRunDimensionHoverTimer=setTimeout(()=>{o?c(h,t,null,l,e,i,!1):u(s,t,null,l,e,i,!1)},100)):o?c(h,t,null,l,e,i,!1):u(s,t,null,l,e,i,!1),o){let i=n.data[0].series,l="histogram"===this.attribute.spec.type||"line"===i.type||"area"===i.type?0:i.getYAxisHelper().getBandwidth(0),o=i.valueToPositionY(t),a=(0,p.hZ)(e.rowHeaderLevelCount-1,h,e.internalProps.layoutMap),s=r;if("histogram"===this.attribute.spec.type){let{series:e,datum:t}=n.data[0];if(t.length>0){let i=t[0][e.fieldY[0]],r=t[0][e.fieldY2];s=i+" ~ "+r,o=(e.valueToPositionY(i)+e.valueToPositionY(r))/2}}a.labelHoverOnAxis&&e.scenegraph.getCell(e.rowHeaderLevelCount-1,h).firstChild.showLabelHoverOnAxis(o+("line"===i.type||"area"===i.type?0:l/2),s)}else{let i=n.data[0].series,r="histogram"===this.attribute.spec.type||"line"===i.type||"area"===i.type?0:i.getXAxisHelper().getBandwidth(0),l=i.valueToPositionX(t),o=(0,p.hZ)(s,e.rowCount-e.bottomFrozenRowCount,e.internalProps.layoutMap),a=t;if("histogram"===this.attribute.spec.type){let{series:e,datum:t}=n.data[0];if(t.length>0){let i=t[0][e.fieldX[0]],r=t[0][e.fieldX2];a=i+" ~ "+r,l=(e.valueToPositionX(i)+e.valueToPositionX(r))/2}}o.labelHoverOnAxis&&e.scenegraph.getCell(s,e.rowCount-e.bottomFrozenRowCount).firstChild.showLabelHoverOnAxis(l+r/2,a)}}}}}),null==(n=e._bindChartEvent)||n.call(e,this.activeChartInstance)}deactivate(e,{releaseChartInstance:t=!0,releaseColumnChartInstance:i=!0,releaseRowChartInstance:r=!0}={}){var n,l,o,a,u,c,p,g,f,m;if(this.activeChartInstanceHoverOnMark=null,this.justShowMarkTooltip=void 0,this.justShowMarkTooltipTimer=Date.now(),clearTimeout(this.delayRunDimensionHoverTimer),this.delayRunDimensionHoverTimer=void 0,t){null==(n=this.activeChartInstance)||n.updateViewBox({x1:-1e3,x2:-800,y1:-1e3,y2:-800},!1,!1),null==(l=this.activeChartInstance)||l.release(),this.activeChartInstance=null;let{col:t,row:i}=this.parent;e.internalProps.layoutMap.isAxisCell(e.rowHeaderLevelCount-1,i)&&(null==(a=null==(o=e.scenegraph.getCell(e.rowHeaderLevelCount-1,i).firstChild)?void 0:o.hideLabelHoverOnAxis)||a.call(o)),e.internalProps.layoutMap.isAxisCell(t,e.rowCount-e.bottomFrozenRowCount)&&(null==(c=null==(u=e.scenegraph.getCell(t,e.rowCount-e.bottomFrozenRowCount).firstChild)?void 0:u.hideLabelHoverOnAxis)||c.call(u))}else{let{col:t,row:n}=this.parent;i&&e.internalProps.layoutMap.isAxisCell(t,e.rowCount-e.bottomFrozenRowCount)&&(null==(g=null==(p=e.scenegraph.getCell(t,e.rowCount-e.bottomFrozenRowCount).firstChild)?void 0:p.hideLabelHoverOnAxis)||g.call(p)),r&&e.internalProps.layoutMap.isAxisCell(e.rowHeaderLevelCount-1,n)&&(null==(m=null==(f=e.scenegraph.getCell(e.rowHeaderLevelCount-1,n).firstChild)?void 0:f.hideLabelHoverOnAxis)||m.call(f))}i&&function(e,t,i){var r;if((0,s.Z)(h[e])){for(let n in h[e]){if((0,s.Z)(t)&&Number(n)===t)continue;let l=i.scenegraph.getCell(e,Number(n)),o=null==(r=null==l?void 0:l.getChildren())?void 0:r[0];o.addUpdateShapeAndBoundsTag(),(0,s.Z)(o)&&(o.deactivate(i,{releaseChartInstance:!0,releaseColumnChartInstance:!1,releaseRowChartInstance:!1}),h[e][n]=null)}delete h[e]}}(this.parent.col,"scatter"===this.attribute.spec.type?this.parent.row:void 0,e),r&&function(e,t,i){var r;if((0,s.Z)(d[e]))for(let n in d[e]){if((0,s.Z)(t)&&Number(n)===t)continue;let l=i.scenegraph.getCell(Number(n),e),o=null==(r=null==l?void 0:l.getChildren())?void 0:r[0];o.addUpdateShapeAndBoundsTag(),(0,s.Z)(o)&&(o.deactivate(i,{releaseChartInstance:!0,releaseColumnChartInstance:!1,releaseRowChartInstance:!1}),d[e][n]=null)}delete d[e]}(this.parent.row,"scatter"===this.attribute.spec.type?this.parent.col:void 0,e)}updateData(e){this.attribute.data=e}getViewBox(){var e,t,i,r,n,l,o,a;let s=this.parent,h=this.attribute.cellPadding,d=this.stage.table,{x1:u,y1:c,x2:p,y2:g}=s.globalAABBBounds;return{x1:Math.ceil(u+h[3]+d.scrollLeft+(null!=(t=null==(e=d.options.viewBox)?void 0:e.x1)?t:0)),x2:Math.ceil(u+s.attribute.width-h[1]+d.scrollLeft+(null!=(r=null==(i=d.options.viewBox)?void 0:i.x1)?r:0)),y1:Math.ceil(c+h[0]+d.scrollTop+(null!=(l=null==(n=d.options.viewBox)?void 0:n.y1)?l:0)),y2:Math.ceil(c+s.attribute.height-h[2]+d.scrollTop+(null!=(a=null==(o=d.options.viewBox)?void 0:o.y1)?a:0))}}}f.temp=1},34399:function(e,t,i){i.d(t,{A8:()=>s,H6:()=>g,LO:()=>h,Ry:()=>p,Up:()=>b,a5:()=>f,eO:()=>function e(t){c=!0,h.length>0?d=r.rF.getRequestAnimationFrame()(()=>{let i=h.splice(0,u);s.splice(0,u),i.forEach(e=>{m(e),e.addUpdateBoundTag()}),t.render(),e(t)}):c=!1},pF:()=>m});var r=i(73036),n=i(34505),l=i(28364),o=i(64776),a=i(63401);let s=[],h=[],d,u=5,c=!1;function p(e){(0,o.Z)(e)&&(u=e)}function g(){s=[],h=[],c=!1,r.rF.getCancelAnimationFrame()(d)}function f(){return c}function m(e){var t,i,r,n,l,o,a;let{axes:s,dataId:h,data:d,spec:u,ClassType:c,canvas:p,mode:g,modeParams:f,dpr:m}=e.attribute,{chartInstance:y}=e;y||((y=new c(u,{renderCanvas:p,mode:"node"===g?"node":"desktop-browser",modeParams:f,canvasControled:!1,viewBox:{x1:0,x2:0,y1:0,y2:0},dpr:m,interactive:!1,animation:!1,autoFit:!1})).renderSync(),e.chartInstance=y);let v=e.getViewBox();v.x2<=v.x1&&(v.x2=v.x1+1),v.y2<=v.y1&&(v.y2=v.y1+1),y.updateViewBox({x1:0,x2:v.x2-v.x1,y1:0,y2:v.y2-v.y1},!1,!1);let _=y.getStage(),C=e.globalTransMatrix,x=e.stage.window.getViewBoxTransform().clone();x.multiply(C.a,C.b,C.c,C.d,C.e,C.f),_.window.setViewBoxTransform&&_.window.setViewBoxTransform(x.a,x.b,x.c,x.d,x.e,x.f);let{table:w}=e.getRootNode(),S=!1;if(w.options.specFormat){let i=w.options.specFormat(e.attribute.spec,y,e);if(i.needFormatSpec&&i.spec){let e=i.spec;y.updateSpecSync(e,!1,{reuse:!1,morph:!1}),S=null==(t=i.updateSpec)||t}}if(!S)if(null==s||s.forEach((e,t)=>{var i,r,n,l,o;"band"===e.type?y.updateModelSpec({type:"axes",index:t},{domain:e.domain.slice(0)},!0):y.updateModelSpecSync({type:"axes",index:t},{min:null!=(r=null==(i=e.range)?void 0:i.min)?r:0,max:null!=(l=null==(n=e.range)?void 0:n.max)?l:0,tick:{tickMode:null==(o=e.tick)?void 0:o.tickMode}},!0)}),null==(r=null==(i=w.internalProps.layoutMap)?void 0:i.updateDataStateToActiveChartInstance)||r.call(i,y),"string"==typeof h||"number"==typeof h)y.getChart().setLayoutTag(!0),y.updateDataSync(h,null!=d?d:[]);else{let e=[];for(let t in h){let i=h[t],r=u.series.find(e=>{var i;return(null==(i=null==e?void 0:e.data)?void 0:i.id)===t});e.push({id:t,values:i?null!=(n=null==d?void 0:d.filter(e=>e.hasOwnProperty(i)))?n:[]:null!=d?d:[],fields:null==(l=null==r?void 0:r.data)?void 0:l.fields}),y.updateFullDataSync||y.updateDataSync(t,i?null!=(o=null==d?void 0:d.filter(e=>e.hasOwnProperty(i)))?o:[]:null!=d?d:[])}y.getChart().setLayoutTag(!0),null==(a=y.updateFullDataSync)||a.call(y,e)}w.fireListeners("before_cache_chart_image",{chartInstance:y}),b(y.getStage(),e)}function b(e,t){var i;let{viewWidth:r,viewHeight:n}=e;if(r<2e3&&n<2e3)return t.cacheCanvas=y(e),void(t.isShareChartSpec||(null==(i=t.chartInstance)||i.release(),t.chartInstance=null,t.setAttribute("chartInstance",null)));let l=Math.ceil(n/2e3),o=Math.ceil(r/2e3),s=[];for(let t=0;t<l;t++)for(let i=0;i<o;i++){let l=2e3*i,o=2e3*t,h=l+2e3>r?r:l+2e3,d=o+2e3>n?n:o+2e3,u=h-l,c=d-o,p=new a.YZ;p.setValue(l,o,h,d);let g=y(e,!1,p);s.push({canvas:g,x:l,y:o,width:u,height:c})}t.cacheCanvas=s}function y(e,t=!0,i){if("released"===e.releaseStatus)return null;let r=(function(e,t=!0,i){let r=e.window.getViewBoxTransform(),o=n.n.get(l.Oo),a=i?-i.x1:0,s=i?-i.y1:0,h=i?i.x2:e.viewWidth,d=i?i.y2:e.viewHeight,u=i?i.width():e.viewWidth,c=i?i.height():e.viewHeight;return o.create({viewBox:{x1:a,y1:s,x2:h,y2:d},width:u*r.a,height:c*r.d,dpr:e.window.dpr,canvasControled:!0,offscreen:!0,title:""}),o.setViewBoxTransform(r.a,r.b,r.c,r.d,0,0),e.renderTo(o),o})(e,t,i).getNativeHandler();return r.nativeCanvas?r.nativeCanvas:null}},88536:function(e,t,i){i.d(t,{Z:()=>n});var r=i(8849);class n extends r.ZA{clear(){this.removeAllChild()}getChildByName(e,t){let i=null;return this.forEachChildren(t=>t.name===e&&(i=t,!0)),t&&this.forEachChildren(t=>{if(t.getChildByName){let r=t.getChildByName(e,!0);if(r)return i=r,!0}return!1}),i}get width(){var e;let t=this.AABBBounds.width();return t!==1/0&&t!==-1/0||(t=0),Math.max(t,null!=(e=this.attribute.width)?e:0)}get height(){var e;let t=this.AABBBounds.height();return t!==1/0&&t!==-1/0||(t=0),Math.max(t,null!=(e=this.attribute.height)?e:0)}setDeltaWidth(e){var t;0!==e&&(this.setAttribute("width",(null!=(t=this.attribute.width)?t:0)+e),this.border&&(this.border.setAttribute("width",this.border.attribute.width+e),"group"===this.border.type&&this.border.firstChild.setAttribute("width",this.border.firstChild.attribute.width+e)))}setDeltaHeight(e){var t;0!==e&&(this.setAttribute("height",(null!=(t=this.attribute.height)?t:0)+e),this.border&&(this.border.setAttribute("height",this.border.attribute.height+e),"group"===this.border.type&&this.border.firstChild.setAttribute("width",this.border.firstChild.attribute.height+e)))}setDeltaX(e){0!==e&&this.setAttribute("x",this.attribute.x+e)}setDeltaY(e){0!==e&&this.setAttribute("y",this.attribute.y+e)}forEachChildrenSkipChild(e,t="border-rect",i=!1){if(i){let i=this._lastChild,r=0;for(;i;){if(i.name!==t&&e(i,r++))return;i=i._prev}}else{let i=this._firstChild,r=0;for(;i;){if(i.name!==t&&e(i,r++))return;i=i._next}}}getColGroup(e){let t=this._firstChild;if(!t)return null;for(let i=0;i<this.childrenCount;i++){if(t.col===e)return t;t=t._next}return null}getRowGroup(e){let t=this._firstChild;if(!t)return null;for(let i=0;i<this.childrenCount;i++){if(t.row===e)return t;t=t._next}return null}addCellGroup(e){if(0===this.childrenCount||this.lastChild.row===e.row-1)this.addChild(e);else{let t=this._firstChild;for(let i=0;i<this.childrenCount;i++){if(t.row===e.row-1)return void this.insertAfter(e,t);t=t._next}this.addChild(e)}}getChildAt(e){let t=super.getChildAt(e);return t&&"border-rect"===t.name?t._next:t}tryUpdateAABBBounds(){if("cell"===this.role){var e,t;if(!this.shouldUpdateAABBBounds())return this._AABBBounds;let i=this.shouldSelfChangeUpdateAABBBounds(),r=this.doUpdateAABBBounds();return this.addUpdateLayoutTag(),e=this,t=i,e.stage&&e.stage.dirtyBounds&&e.stage.renderCount&&(e.isContainer&&!t||e.stage.dirty(e.globalAABBBounds)),r}return super.tryUpdateAABBBounds()}doUpdateAABBBounds(){if("cell"===this.role){let{x:e,y:t,width:i,height:r}=this.attribute;return this._AABBBounds.setValue(e,t,e+i,t+r),this.parent&&this.parent.addChildUpdateBoundTag(),this.clearUpdateBoundTag(),this.shadowRoot&&this.shadowRoot.tryUpdateAABBBounds(),this._AABBBounds}return"body"===this.role||"row-header"===this.role||"col-header"===this.role||"right-frozen"===this.role||"bottom-frozen"===this.role||"corner-header"===this.role||"corner-right-top-header"===this.role||"corner-right-bottom-header"===this.role||"corner-left-bottom-header"===this.role?(this._AABBBounds.setValue(-1/0,-1/0,1/0,1/0),this.parent&&this.parent.addChildUpdateBoundTag(),this.clearUpdateBoundTag(),this.shadowRoot&&this.shadowRoot.tryUpdateAABBBounds(),this._AABBBounds):super.doUpdateAABBBounds()}updateColumnRowNumber(e){this.rowNumber?this.rowNumber=Math.max(this.rowNumber,e):this.rowNumber=e}updateColumnHeight(e){this.colHeight?this.colHeight+=e:this.colHeight=e}}},81584:function(e,t,i){i.d(t,{J:()=>s,V:()=>h});var r=i(50074),n=i(84453),l=i(63654),o=i(29216),a=i(1800);class s extends r.E{constructor(e){super(e),this.failCallback=()=>{let{svg:e,src:t}=a.U2().damage_pic||{},i=e||t;i&&(super.image=i)},"mouseenter_cell"!==this.attribute.visibleTime&&"click_cell"!==this.attribute.visibleTime||(this.attribute.opacity=0),this.attribute.hoverImage&&(this.attribute.originImage=this.attribute.image),this.attribute.isGif&&this.attribute.gif&&this.loadGif()}loadGif(){this.playing=!1,n.h.GetFile(this.attribute.gif+"?role=gif"+`&radom=${Math.random()}`,"arrayBuffer").then(e=>{let t=(0,o.parseGIF)(e),i=(0,o.decompressFrames)(t,!0);this.renderGIF(i),this.resources.set(this.attribute.image,{state:"success",data:this.gifCanvas})}).catch(e=>{})}get backgroundWidth(){var e,t;return null!=(t=null!=(e=this.attribute.backgroundWidth)?e:this.attribute.width)?t:0}get backgroundHeight(){var e,t;return null!=(t=null!=(e=this.attribute.backgroundHeight)?e:this.attribute.height)?t:0}renderGIF(e){this.loadedFrames=e,this.frameIndex=0,this.tempCanvas||(this.tempCanvas=document.createElement("canvas"),this.tempCtx=this.tempCanvas.getContext("2d")),this.gifCanvas||(this.gifCanvas=document.createElement("canvas"),this.gifCtx=this.gifCanvas.getContext("2d")),this.gifCanvas.width=e[0].dims.width,this.gifCanvas.height=e[0].dims.height,this.playing=!0,this.lastTime=(new Date).getTime(),this.animate().to({},1e3,"linear").loop(1/0)}renderFrame(e,t,i){let r=this.loadedFrames[this.frameIndex||0];2===r.disposalType&&this.gifCtx.clearRect(0,0,this.gifCanvas.width,this.gifCanvas.height),this.drawPatch(r),this.manipulate(e,t,i);let n=(new Date).getTime()-this.lastTime;r.delay<n&&(this.frameIndex++,this.lastTime=(new Date).getTime()),this.frameIndex>=this.loadedFrames.length&&(this.frameIndex=0)}drawPatch(e){let t=e.dims;this.frameImageData&&t.width===this.frameImageData.width&&t.height===this.frameImageData.height||(this.tempCanvas.width=t.width,this.tempCanvas.height=t.height,this.frameImageData=this.tempCtx.createImageData(t.width,t.height)),this.frameImageData.data.set(e.patch),this.tempCtx.putImageData(this.frameImageData,0,0),this.gifCtx.drawImage(this.tempCanvas,t.left,t.top)}manipulate(e,t,i){e.drawImage(this.gifCanvas,0,0,this.gifCanvas.width,this.gifCanvas.height,t,i,this.attribute.width,this.attribute.height)}setAttribute(e,t,i,r){super.setAttribute(e,t,i,r),"gif"===e&&this.loadGif()}setAttributes(e,t,i){super.setAttributes(e,t,i),e.gif&&this.loadGif()}}class h extends l.x{constructor(e){var t,i,r,n,l;e.fill=null!=(t=e.fill)?t:"#00F",e.fontSize=null!=(i=e.fontSize)?i:12,e.underline=null!=(r=e.underline)?r:1,e.textBaseline=null!=(n=e.textBaseline)?n:"top",e.cursor=null!=(l=e.cursor)?l:"pointer",super(e)}}},7388:function(e,t,i){i.d(t,{pZ:()=>S,l7:()=>k,kE:()=>v,NQ:()=>A,wW:()=>C});var r=i(51130),n=i(23946),l=i(297),o=i(46320),a=i(35759),s=i(4410),h=i(54833),d=i(48523),u=i(76352),c=i(89883),p=i(4654),g=i(95723),f=i(68595),m=i(64776);function b(e,t){var i,r;if(this.shadowRoot&&this.shadowRoot.childrenCount&&((0,m.Z)(e.width)||(0,m.Z)(e.height))){let t=this.shadowRoot.findChildrenByName("shadow-rect")[0];t&&t.setAttributes({width:null!=(i=e.width)?i:t.attribute.width,height:null!=(r=e.height)?r:t.attribute.height})}}var y=i(1249);function v(e,t,i,n,o,s,d,u,c,p,g,f,m,y,v,C,x,w){var S,A;let k,M=!1;if((0,a.tI)(t)){if("cell"!==n.scenegraph.highPerformanceGetCell(o,s).role)return k;t=n.getCellValue(o,s),M=!0}if("checkbox"===e&&i.tree)k=h.F.getFunction("createCheckboxCellGroup")(null,p,0,g,o,s,d,u,c,f,m,y,v,n,C,i,x,M,!0);else if("text"===e||"link"===e||w){if("link"===e){let h=t,d=n.getCellOriginValue(o,s),u=n._getCellStyle(o,s);"link"===e&&("templateLink"in i&&i.templateLink||!("linkDetect"in i)||!(0,a.vi)(i.linkDetect,{col:o,row:s,table:n,value:h,dataValue:d,cellHeaderPaths:void 0})||r.tP.test(h))&&(C?(C.text.fill=(0,l.WJ)("linkColor",u,o,s,n),C.group.cursor="pointer"):C={text:{fill:(0,l.WJ)("linkColor",u,o,s,n)},group:{cursor:"pointer"}})}let{customElementsGroup:b,renderDefault:A}=_(n,i,o,s,u,c,f,x,w);k=h.F.getFunction("createTextCellGroup")(n,t,p,0,g,o,s,d,u,c,f,m,y,v,b,A,C,x,M);let T=n.internalProps.layoutMap.getAxisConfigInPivotChart(o,s);if(T){let e=new(h.F.getComponent("axis"))(T,k.attribute.width,k.attribute.height,null!=(S=T.__vtableBodyChartCellPadding)?S:f,n);k.clear(),k.appendChild(e.component),e.overlap()}else n.internalProps.layoutMap.isEmpty(o,s)?(k.setAttributes({fill:!1,stroke:!1}),k.clear()):n.internalProps.layoutMap.isAxisCell(o,s)&&k.clear()}else if("image"===e)k=h.F.getFunction("createImageCellGroup")(p,0,g,o,s,u,c,i.keepAspectRatio,i.imageAutoSizing,f,m,y,v,n,C,x,M);else if("video"===e)k=h.F.getFunction("createVideoCellGroup")(p,0,g,o,s,u,c,i.keepAspectRatio,i.imageAutoSizing,f,m,y,v,n,C,x,M);else if("chart"===e){let e=n.internalProps.layoutMap.getChartInstance(o,s);k=h.F.getFunction("createChartCellGroup")(null,p,0,g,o,s,u,c,f,t,i.chartModule,n.internalProps.layoutMap.getChartSpec(o,s),e,null!=(A=n.internalProps.layoutMap.getChartDataId(o,s))?A:"data",n,C,n.internalProps.layoutMap.isShareChartSpec(o,s),M,n.internalProps.layoutMap.isNoChartDataRenderNothing(o,s))}else if("progressbar"===e){let{customElementsGroup:e,renderDefault:r}=_(n,i,o,s,u,c,f,x,w),l=n._getCellStyle(o,s),a=n.getCellOriginValue(o,s);k=h.F.getFunction("createTextCellGroup")(n,t,p,0,g,o,s,d,u,c,f,m,y,v,e,r,C,x,M);let b=h.F.getFunction("createProgressBarCell")(i,l,d,t,a,o,s,f,n,x);k.firstChild?k.insertBefore(b,k.firstChild):k.appendChild(b)}else if("sparkline"===e)k=h.F.getFunction("createSparkLineCellGroup")(null,p,0,g,o,s,u,c,f,n,C,M);else if("checkbox"===e){let e="isAggregation"in n.internalProps.layoutMap&&n.internalProps.layoutMap.isAggregation(o,s),r=n.internalProps.layoutMap.isSeriesNumber(o,s);k=e&&r?h.F.getFunction("createTextCellGroup")(n,t,p,0,g,o,s,d,u,c,f,m,y,!1,void 0,!0,C,x,M):h.F.getFunction("createCheckboxCellGroup")(null,p,0,g,o,s,d,u,c,f,m,y,v,n,C,i,x,M,!1)}else"radio"===e?k=h.F.getFunction("createRadioCellGroup")(null,p,0,g,o,s,d,u,c,f,m,y,n,C,i,x):"switch"===e?k=h.F.getFunction("createSwitchCellGroup")(null,p,0,g,o,s,d,u,c,f,m,y,v,n,C,i,x,M):"button"===e&&(k=h.F.getFunction("createButtonCellGroup")(null,p,0,g,o,s,d,u,c,f,m,y,v,n,C,i,x,M));return k.onBeforeAttributeUpdate=b,k}function _(e,t,i,r,l,o,a,s,h){let d,u=!0;if(h)d=h.elementsGroup,u=h.renderDefault;else if((null==s?void 0:s.isCustom)&&!e.isCornerHeader(i,r));else{let h,c;if("body"!==e.getCellLocation(i,r)?(h=null==t?void 0:t.headerCustomRender,c=null==t?void 0:t.headerCustomLayout):(h=(null==t?void 0:t.customRender)||e.customRender,c=null==t?void 0:t.customLayout),c||h){let t=(0,n.ws)(c,h,i,r,l,o,!1,e.isAutoRowHeight(r),a,s,e);d=t.elementsGroup,u=t.renderDefault}}return{customElementsGroup:d,renderDefault:u}}function C(e,t,i,r,h,p){var g,m,b,v,_,C,k,M,T,R,E,P,B,I,L,F,H,O;let D,z,W,Z=i.scenegraph.highPerformanceGetCell(e,t,!0);if("cell"!==Z.role&&!r)return;let N=i.getCellLocation(e,t),$,j,G,V,U=i.getCellValue(e,t),K=!1;if(i.internalProps.customMergeCell){let r=i.getCustomMerge(e,t);if(r){let{range:e,text:l,style:o,customLayout:a,customRender:s}=r;$=(j=e).start.col!==j.end.col||j.start.row!==j.end.row,U=l,G=o,(a||s)&&(V=(0,n.ws)(a,s,e.start.col,e.start.row,i.getColsWidth(e.start.col,e.end.col),i.getRowsHeight(e.start.row,e.end.row),!1,i.isAutoRowHeight(t),[0,0,0,0],j,i)),K=!0}}let X=e,Y=t;j&&(X=j.start.col,Y=j.start.row);let q="body"!==N?i.getHeaderDefine(X,Y):i.getBodyColumnDefine(X,Y),J="body"!==N||(null==q?void 0:q.dragOrder)||!!(null==q?void 0:q.icon)||!!(null==q?void 0:q.tree);!j&&(i.internalProps.enableTreeNodeMerge||"body"!==N||(null==q?void 0:q.mergeCell))&&($=(j=i.getCellRange(e,t)).start.col!==j.end.col||j.start.row!==j.end.row);let Q=!1;if(i.internalProps.enableTreeNodeMerge&&$){let r=i.getCellRawRecord(j.start.col,j.start.row),{vtableMergeName:l,vtableMerge:o}=null!=r?r:{};Q=o,o&&(J=!0,i.internalProps.groupTitleCustomLayout&&(V=(0,n.ws)(i.internalProps.groupTitleCustomLayout,void 0,j.start.col,j.start.row,i.getColsWidth(j.start.col,j.end.col),i.getRowsHeight(j.start.row,j.end.row),!1,i.isAutoRowHeight(t),[0,0,0,0],j,i)),i.internalProps.groupTitleFieldFormat?U=i.internalProps.groupTitleFieldFormat(r,e,t,i):void 0!==l&&(U=l))}let ee=G||i._getCellStyle(j?j.start.col:e,j?j.start.row:t),et=null!=(g=ee.autoWrapText)?g:i.internalProps.autoWrapText,ei=(0,o.RT)(ee,i,$?j.start.col:e,$?j.start.row:t,l.WJ).theme;if(ei.group.cornerRadius=(0,o.xv)(e,t,i),!r&&!$&&!((null==q?void 0:q.customLayout)||(null==q?void 0:q.customRender)||(null==q?void 0:q.headerCustomLayout)||(null==q?void 0:q.headerCustomRender))&&(p||function(e,t,i,r,n,l){var o;let s=l.getBodyColumnType(e,t),h=l.isAutoRowHeight(t),d=l.getCellValue(e,t);return!(l.isHeader(e,t)||"cell"!==i.role||"text"!==s||r||h||n||"text"!==(null==(o=i.firstChild)?void 0:o.type)||(0,a.tI)(d))}(e,t,Z,et,J,i))){let r=i.getColWidth(e),n=i.getRowHeight(t),o=(0,y.d)(e,t,ei,i);Z.setAttributes({width:r,height:n,lineWidth:null!=(b=null==(m=null==ei?void 0:ei.group)?void 0:m.lineWidth)?b:void 0,fill:null!=(_=null==(v=null==ei?void 0:ei.group)?void 0:v.fill)?_:void 0,stroke:null!=(k=null==(C=null==ei?void 0:ei.group)?void 0:C.stroke)?k:void 0,strokeArrayWidth:null!=o?o:void 0,strokeArrayColor:null!=(T=null==(M=null==ei?void 0:ei.group)?void 0:M.strokeArrayColor)?T:void 0,cursor:null!=(E=null==(R=null==ei?void 0:ei.group)?void 0:R.cursor)?E:void 0,cornerRadius:null!=(B=null==(P=null==ei?void 0:ei.group)?void 0:P.cornerRadius)?B:0,lineDash:null!=(L=null==(I=null==ei?void 0:ei.group)?void 0:I.lineDash)?L:void 0,y:i.scenegraph.getCellGroupY(t)}),Z.mergeStartCol=void 0,Z.mergeStartRow=void 0,Z.mergeEndCol=void 0,Z.mergeEndRow=void 0,Z.forEachChildren(e=>{e.setAttributes({dx:0,dy:0})});let a=Z.getChildByName("text");if(p&&a){let r=ei.text.textAlign,n=(0,d.L)(e,t,i),l={textBaseline:"top",dx:"left"===r?n:0};a.setAttributes(ei.text?Object.assign({},ei.text,l):l)}else if(a){let o=i.getCellValue(e,t),{text:s,moreThanMaxCharacters:h}=(0,f.$)(o,i),c=(0,d.L)(e,t,i),p=ee.lineClamp,g=null!=(F=(0,u.u)((0,l.WJ)("padding",ee,e,t,i)))?F:[0,0,0,0],m=ei.text.textAlign,b=0;b="center"===m?g[3]+(r-(g[1]+g[3]))/2:"right"===m?g[3]+r-(g[1]+g[3]):g[3];let y={text:1!==s.length||et?s:s[0],moreThanMaxCharacters:h,maxLineWidth:r-(g[1]+g[3]+c),textBaseline:"top",autoWrapText:et,lineClamp:p,wordBreak:"break-word",heightLimit:n-Math.floor(g[0]+g[2]),pickable:!1,dx:"left"===m?c:0,x:b};if(a.setAttributes(ei.text?Object.assign({},ei.text,y):y),a.attribute.text){let e=ei.text.textBaseline,t=n-(g[0]+g[2]),i=0;i="middle"===e?g[0]+(t-a.AABBBounds.height())/2:"bottom"===e?g[0]+t-a.AABBBounds.height():g[0],a.setAttributes({y:i})}}return Z}if(!r&&"empty"===Z.role)return;let er=Q||K?"text":i.isHeader(e,t)?null!=(H=i._getHeaderLayoutMap(e,t).headerType)?H:"text":null!=(O=i.getBodyColumnType(e,t))?O:"text",en=ei._vtable.padding,el=ei.text.textAlign,eo=ei.text.textBaseline;if(j?(z=i.getColsWidth(j.start.col,j.end.col),W=i.getRowsHeight(j.start.row,j.end.row)):(z=i.getColWidth(e),W=i.getRowHeight(t)),(0,a.tI)(U)?(Z.removeAllChild(),(0,s.K)(U,i,w.bind(null,{type:er,value:U,define:q,table:i,col:e,row:t,cellWidth:z,cellHeight:W,oldCellGroup:Z,padding:en,textAlign:el,textBaseline:eo,mayHaveIcon:J,addNew:r,range:j,customResult:V,customStyle:G}))):D=x(er,U,q,i,e,t,z,W,Z,en,el,eo,J,r,ei,j,V),$){let{width:e}=D.attribute,{height:t}=D.attribute;D.contentWidth=e,D.contentHeight=t,h?function(e,t,i,r,n,l,o,a){let{col:s,row:h}=a;e.start.row!==e.end.row&&a.contentHeight!==i&&(0,c.Zl)(a,i,i,o.isAutoRowHeight(h),r,n,l,o),e.start.col!==e.end.col&&a.contentWidth!==t&&(0,c.qs)(a,t,i,0,o.isAutoRowHeight(h),r,n,l,o.scenegraph),a.contentWidth=t,a.contentHeight=i;let d=o.getRowHeight(h);A(a,o.getColWidth(s),d,e,o)}(j,z,W,en,el,eo,i,D):S(j,z,W,en,el,eo,i)}return D}function x(e,t,i,r,l,o,s,h,d,u,c,g,f,m,b,y,_){var C,x;if((0,a.tI)(t)&&(t=r.getCellValue(l,o)),!m&&(d.row!==o||d.col!==l))return null;if(!m&&d.parent&&r.reactCustomLayout){let e=d.getChildByName(n.FH);if(e){let{col:t,row:i}=e;(0,p.Z)(t)&&(0,p.Z)(i)&&r.reactCustomLayout.removeCustomCell(t,i)}}let w=v(e,t,i,r,l,o,r.getColWidth(l),s,h,m?r.scenegraph.getColGroup(l):d.parent,m?0:r.scenegraph.getCellGroupY(o),u,c,g,f,b,y,_);return!m&&d.parent&&(d.parent.insertAfter(w,d),d.parent.removeChild(d),d.release(!0),(null==(C=r.scenegraph)?void 0:C.proxy.cellCache.get(l))&&(null==(x=r.scenegraph)||x.proxy.cellCache.set(l,w))),w}function w(e){let{type:t,value:i,define:r,table:n,col:a,row:s,cellWidth:h,cellHeight:d,oldCellGroup:u,padding:c,textAlign:p,textBaseline:g,mayHaveIcon:f,addNew:m,range:b,customResult:y,customStyle:v}=e,_=v||n._getCellStyle(b?b.start.col:a,b?b.start.row:s),C=(0,o.RT)(_,n,b?b.start.col:a,b?b.start.row:s,l.WJ).theme;C.group.cornerRadius=(0,o.xv)(a,s,n),x(t,i,r,n,a,s,h,d,u,c,p,g,f,m,C,b,y)}function S(e,t,i,r,n,l,o){for(let a=e.start.col;a<=e.end.col;a++)for(let s=e.start.row;s<=e.end.row;s++){let h=o.scenegraph.highPerformanceGetCell(a,s,!0);if("cell"!==h.role)continue;e.start.row!==e.end.row&&h.contentHeight!==i&&(0,c.Zl)(h,i,i,o.isAutoRowHeight(s),r,n,l,o),e.start.col!==e.end.col&&h.contentWidth!==t&&(0,c.qs)(h,t,i,0,o.isAutoRowHeight(s),r,n,l,o.scenegraph),h.contentWidth=t,h.contentHeight=i;let d=o.getRowHeight(s);A(h,o.getColWidth(a),d,e,o)}}function A(e,t,i,r,n){var l,o;let{col:a,row:s}=e,h=-n.getColsWidth(r.start.col,a-1),d=0;if(null==(l=n.options.customConfig)?void 0:l._disableColumnAndRowSizeRound)for(let e=r.start.row;e<=s-1;e++)d-=n.getRowHeight(e);else d=-n.getRowsHeight(r.start.row,s-1);e.forEachChildren(e=>{var t,i,r,n,l,o;"number"==typeof e._dx?(e.skipMergeUpdate=!0,e.setAttributes({dx:(null!=(t=e._dx)?t:0)+h})):(e._dx=null!=(i=e.attribute.dx)?i:0,e.skipMergeUpdate=!0,e.setAttributes({dx:(null!=(r=e.attribute.dx)?r:0)+h})),e.skipMergeUpdate=!1,"number"==typeof e._dy?(e.skipMergeUpdate=!0,e.setAttributes({dy:(null!=(n=e._dy)?n:0)+d})):(e._dy=null!=(l=e.attribute.dy)?l:0,e.skipMergeUpdate=!0,e.setAttributes({dy:(null!=(o=e.attribute.dy)?o:0)+d})),e.skipMergeUpdate=!1});let u=null!=(o=e.attribute.strokeArrayWidth)?o:e.attribute.lineWidth,c=(0,g.Z)(u),p=[0,0,0,0];a===r.start.col&&(p[3]=c?u[3]:u),s===r.start.row&&(p[0]=c?u[0]:u),a===r.end.col&&(p[1]=c?u[1]:u),s===r.end.row&&(p[2]=c?u[2]:u);let f=t!==e.attribute.width,m=i!==e.attribute.height;return e.skipMergeUpdate=!0,e.setAttributes({width:t,height:i,strokeArrayWidth:p}),e.skipMergeUpdate=!1,e.mergeStartCol=r.start.col,e.mergeStartRow=r.start.row,e.mergeEndCol=r.end.col,e.mergeEndRow=r.end.row,{widthChange:f,heightChange:m}}function k(e,t,i,r){if(r.internalProps.customMergeCell){let l=r.getCustomMerge(e,t);if(l){let{range:o,text:a,style:s,customLayout:h,customRender:d}=l;if(h||d){let l=(0,n.ws)(h,d,o.start.col,o.start.row,r.getColsWidth(o.start.col,o.end.col),r.getRowsHeight(o.start.row,o.end.row),!1,r.isAutoRowHeight(t),[0,0,0,0],o,r).elementsGroup;i.childrenCount>0&&l?i.insertBefore(l,i.firstChild):l&&i.appendChild(l);let a=r.getRowHeight(t),s=r.getColWidth(e),{width:u}=i.attribute,{height:c}=i.attribute;return i.contentWidth=u,i.contentHeight=c,A(i,s,a,o,r),o}}}}},94308:function(e,t,i){i.d(t,{Gb:()=>b,LP:()=>g,SI:()=>m,Ui:()=>p,km:()=>f});var r=i(50074),n=i(1800),l=i(88536),o=i(21044),a=i(49360),s=i(297),h=i(64776),d=i(76352),u=i(1249),c=i(89883);function p(e,t,i,o,a,p,g,m,b,v,_,C,x,w,S,A,k){var M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K,X,Y,q,J,Q,ee,et,ei;let er,en,el=w._getCellStyle(o,a),eo=(0,s.vp)("padding",el,o,a,w);(null==(M=w.options.customConfig)?void 0:M.imageMargin)?v=(0,d.u)(null==(T=w.options.customConfig)?void 0:T.imageMargin):(0,h.Z)(eo)&&(v=eo),(null==(R=null==S?void 0:S.text)?void 0:R.textAlign)&&(_=null==(E=null==S?void 0:S.text)?void 0:E.textAlign),(null==(P=null==S?void 0:S.text)?void 0:P.textBaseline)&&(C=null==(B=null==S?void 0:S.text)?void 0:B.textBaseline);let ea=(0,u.d)(o,a,S,w);if(k&&(er=w.scenegraph.highPerformanceGetCell(o,a,!0))&&"cell"===er.role&&er.setAttributes({x:t,y:i,width:p,height:g,lineWidth:null!=(L=null==(I=null==S?void 0:S.group)?void 0:I.lineWidth)?L:void 0,fill:null!=(H=null==(F=null==S?void 0:S.group)?void 0:F.fill)?H:void 0,stroke:null!=(D=null==(O=null==S?void 0:S.group)?void 0:O.stroke)?D:void 0,strokeArrayWidth:null!=ea?ea:void 0,strokeArrayColor:null!=(W=null==(z=null==S?void 0:S.group)?void 0:z.strokeArrayColor)?W:void 0,cursor:null!=(N=null==(Z=null==S?void 0:S.group)?void 0:Z.cursor)?N:void 0,lineDash:null!=(j=null==($=null==S?void 0:S.group)?void 0:$.lineDash)?j:void 0,lineCap:"butt",clip:!0,cornerRadius:S.group.cornerRadius}),er&&"cell"===er.role||((er=new l.Z({x:t,y:i,width:p,height:g,lineWidth:null!=(V=null==(G=null==S?void 0:S.group)?void 0:G.lineWidth)?V:void 0,fill:null!=(K=null==(U=null==S?void 0:S.group)?void 0:U.fill)?K:void 0,stroke:null!=(Y=null==(X=null==S?void 0:S.group)?void 0:X.stroke)?Y:void 0,strokeArrayWidth:null!=ea?ea:void 0,strokeArrayColor:null!=(J=null==(q=null==S?void 0:S.group)?void 0:q.strokeArrayColor)?J:void 0,cursor:null!=(ee=null==(Q=null==S?void 0:S.group)?void 0:Q.cursor)?ee:void 0,lineDash:null!=(ei=null==(et=null==S?void 0:S.group)?void 0:et.lineDash)?ei:void 0,lineCap:"butt",clip:!0,cornerRadius:S.group.cornerRadius})).role="cell",er.col=o,er.row=a,null==e||e.addCellGroup(er)),x){let e=o,t=a;A&&(e=A.start.col,t=A.start.row),en=w.getCellIcons(e,t)}let es=0,eh=0,ed=0;if(Array.isArray(en)&&0!==en.length){let{leftIconWidth:e,rightIconWidth:t,absoluteLeftIconWidth:i,absoluteRightIconWidth:r}=(0,c.M4)(en,er,A,w);es=e+t,eh=e,ed=t,er.forEachChildren(e=>{"icon-left"===e.role?e.setAttribute("x",e.attribute.x+v[3]):"icon-right"===e.role?e.setAttribute("x",e.attribute.x+p-t-v[1]):"icon-absolute-right"===e.role&&e.setAttribute("x",e.attribute.x+p-r-v[1])}),er.forEachChildren(e=>{"middle"===C?e.setAttribute("y",(g-e.AABBBounds.height())/2):"bottom"===C?e.setAttribute("y",g-e.AABBBounds.height()-v[2]):e.setAttribute("y",v[0])}),er._cellLeftIconWidth=eh,er._cellRightIconWidth=ed}let eu=w.getCellValue(o,a),ec=(0,r.B)({x:v[3],y:v[0],width:p-v[1]-v[3]-es,height:g-v[0]-v[2],image:eu,cursor:"pointer"});return ec.name="image",ec.keepAspectRatio=m,ec.textAlign=_,ec.textBaseline=C,m||b?ec.resources&&ec.resources.has(ec.attribute.image)&&"success"===ec.resources.get(ec.attribute.image).state?(ec.setAttribute("opacity",0),setTimeout(()=>{ec.setAttribute("opacity",1),y(b,m,v,_,C,ec,er,w),w.scenegraph.updateNextFrame()},0)):ec.successCallback=()=>{y(b,m,v,_,C,ec,er,w),w.scenegraph.updateNextFrame()}:ec.resources&&ec.resources.has(ec.attribute.image)&&"success"===ec.resources.get(ec.attribute.image).state?f(er,o,a,0,0,w):ec.successCallback=()=>{f(er,o,a,0,0,w)},ec.failCallback=()=>{ec.image=n.U2().damage_pic.svg},er.appendChild(ec),er}function g(e,t,i,r,n,l,o){let a=!1,s=null,h=null,{width:d,height:u,isMerge:c}=m(o,n.table);if(d<i+l[1]+l[3]&&(s=i+l[1]+l[3],a=!0),u<r+l[2]+l[0]&&(h=r+l[2]+l[0],a=!0),a){if("number"==typeof s)if(c)for(let e=o.mergeStartCol;e<=o.mergeEndCol;e++)n.setColWidth(e,s/(o.mergeEndCol-o.mergeStartCol+1));else n.setColWidth(e,s);if("number"==typeof h)if(c)for(let e=o.mergeStartRow;e<=o.mergeEndRow;e++)n.setRowHeight(e,h/(o.mergeEndRow-o.mergeStartRow+1));else n.setRowHeight(t,h);return n.component.updateScrollBar(),!0}return!1}function f(e,t,i,r,n,l){var h,u,c,p,g,f,y,v,_,C,x,w;let S,A=e.getChildByName("image");if(!A)return;let k="string"!=typeof A.attribute.image&&A.attribute.image||(null==(h=A.resources)?void 0:h.get(A.attribute.image).data);if(!k)return;let M=l._getCellStyle(t,i),T=null!=(u=(0,s.WJ)("textAlign",M,t,i,l))?u:"left",R=null!=(c=(0,s.WJ)("textBaseline",M,t,i,l))?c:"middle";S=(null==(p=l.options.customConfig)?void 0:p.imageMargin)?(0,d.u)(null==(g=l.options.customConfig)?void 0:g.imageMargin):null!=(f=(0,d.u)((0,s.WJ)("padding",M,t,i,l)))?f:[0,0,0,0];let{width:E,height:P,isMerge:B}=m(e,l),I=null!=(y=e.mergeStartCol)?y:e.col,L=null!=(v=e.mergeStartRow)?v:e.row,F=null!=(_=e.mergeEndCol)?_:e.col,H=null!=(C=e.mergeEndCol)?C:e.row,O=null!=(x=e._cellLeftIconWidth)?x:0,D=null!=(w=e._cellRightIconWidth)?w:0;if(A.keepAspectRatio){let{width:e,height:t}=(0,o.f)(k.width||k.videoWidth,k.height||k.videoHeight,E-(S[1]+S[3]),P-(S[0]+S[2])),i=(0,a.W)(0,0,E,P,e,t,T,R,S);for(let r=I;r<=F;r++)for(let n=L;n<=H;n++){let o=l.scenegraph.getCell(r,n).getChildByName("image");null==o||o.setAttributes({x:i.x,y:i.y,width:e,height:t})}}else for(let e=I;e<=F;e++)for(let t=L;t<=H;t++){let i=l.scenegraph.getCell(e,t).getChildByName("image");null==i||i.setAttributes({x:O+S[3],y:S[0],width:E-S[1]-S[3]-D-O,height:P-S[0]-S[2]})}if(e.getChildByName("play-icon")){let{width:t,height:i}=m(e,l),r=Math.floor(Math.min(t-S[1]-S[3],i-S[2]-S[0])/2),n=0+(t>A.attribute.width?A.attribute.x-0+A.attribute.width/2:t/2),o=0+(i>A.attribute.height?A.attribute.y-0+A.attribute.height/2:i/2);for(let e=I;e<=F;e++)for(let t=L;t<=H;t++)l.scenegraph.getCell(e,t).getChildByName("play-icon").setAttributes({x:n-r/2,y:o-r/2,width:r,height:r})}e.forEachChildren(e=>{"icon-left"===e.role||("icon-right"===e.role||"icon-absolute-right"===e.role)&&e.setAttribute("x",e.attribute.x+r)}),e.forEachChildren(e=>{("rect"===e.type||e.role&&e.role.startsWith("icon"))&&("middle"===R?e.setAttribute("y",S[0]+(P-S[0]-S[2]-e.AABBBounds.height())/2):"bottom"===R?e.setAttribute("y",S[0]+P-S[0]-S[2]-e.AABBBounds.height()):e.setAttribute("y",S[0]))}),B&&b(e.mergeStartCol,e.mergeEndCol,e.mergeStartRow,e.mergeEndRow,l)}function m(e,t){return"cell"===e.role&&(0,h.Z)(e.mergeStartCol)&&(0,h.Z)(e.mergeEndCol)&&(0,h.Z)(e.mergeStartRow)&&(0,h.Z)(e.mergeEndRow)?{width:t.getColsWidth(e.mergeStartCol,e.mergeEndCol),height:t.getRowsHeight(e.mergeStartRow,e.mergeEndRow),isMerge:!0}:{width:e.attribute.width,height:e.attribute.height,isMerge:!1}}function b(e,t,i,r,n){for(let l=e;l<=t;l++)for(let e=i;e<=r;e++){let t=n.scenegraph.getCell(l,e);if(t){let i=t.getChildByName("image");i&&i.setAttributes({dx:-n.getColsWidth(t.mergeStartCol,l-1),dy:-n.getRowsHeight(t.mergeStartRow,e-1)});let r=t.getChildByName("play-icon");r&&r.setAttributes({dx:-n.getColsWidth(t.mergeStartCol,l-1),dy:-n.getRowsHeight(t.mergeStartRow,e-1)})}}}function y(e,t,i,r,n,l,s,h){let d=l.resources.get(l.attribute.image).data,{col:u,row:c}=s;if(e&&!v(l)&&g(u,c,d.width,d.height,h.scenegraph,i,s),t||v(l)){let{width:e,height:t,isMerge:u}=m(s,h),{width:c,height:p}=(0,o.f)(d.width,d.height,e-i[1]-i[3],t-i[0]-i[2]),g=(0,a.W)(0,0,e,t,c,p,r,n,i);l.setAttributes({x:g.x,y:g.y,width:c,height:p}),u&&b(s.mergeStartCol,s.mergeEndCol,s.mergeStartRow,s.mergeEndRow,h)}}function v(e){let t=n.U2();return e.attribute.image===t.damage_pic.svg}},76804:function(e,t,i){i.d(t,{LQ:()=>eo,dB:()=>ep,ge:()=>eg,ah:()=>ec,Jy:()=>ed,yR:()=>ea,pk:()=>es,VT:()=>eu,au:()=>ef,m4:()=>eh});var r=i(54833),n=i(88536),l=i(87399),o=i(75008),a=i(297),s=i(64776),h=i(1249);function d(e,t,i,r,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S){var A,k,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K,X,Y;let q=o.U()[m],J=_._getCellStyle(d,u),Q=(0,a.vp)("padding",J,d,u,_);if((0,s.Z)(Q)&&(g=Q),!e){let l=(0,h.d)(d,u,C,_);w&&(e=_.scenegraph.highPerformanceGetCell(d,u,!0))&&"cell"===e.role&&e.setAttributes({x:i,y:r,width:c,height:p,lineWidth:null!=(k=null==(A=null==C?void 0:C.group)?void 0:A.lineWidth)?k:void 0,fill:null!=(T=null==(M=null==C?void 0:C.group)?void 0:M.fill)?T:void 0,stroke:null!=(E=null==(R=null==C?void 0:C.group)?void 0:R.stroke)?E:void 0,strokeArrayWidth:l,strokeArrayColor:null!=(B=null==(P=null==C?void 0:C.group)?void 0:P.strokeArrayColor)?B:void 0,cursor:null!=(L=null==(I=null==C?void 0:C.group)?void 0:I.cursor)?L:void 0,lineDash:null!=(H=null==(F=null==C?void 0:C.group)?void 0:F.lineDash)?H:void 0,lineCap:"butt",clip:!0,cornerRadius:C.group.cornerRadius}),e&&"cell"===e.role||((e=new n.Z({x:i,y:r,width:c,height:p,lineWidth:null!=(D=null==(O=null==C?void 0:C.group)?void 0:O.lineWidth)?D:void 0,fill:null!=(W=null==(z=null==C?void 0:C.group)?void 0:z.fill)?W:void 0,stroke:null!=(N=null==(Z=null==C?void 0:C.group)?void 0:Z.stroke)?N:void 0,strokeArrayWidth:l,strokeArrayColor:null!=(j=null==($=null==C?void 0:C.group)?void 0:$.strokeArrayColor)?j:void 0,cursor:null!=(V=null==(G=null==C?void 0:C.group)?void 0:G.cursor)?V:void 0,lineDash:null!=(K=null==(U=null==C?void 0:C.group)?void 0:U.lineDash)?K:void 0,lineCap:"butt",clip:!0,cornerRadius:C.group.cornerRadius})).role="cell",e.col=d,e.row=u,null==t||t.addCellGroup(e))}if(e.AABBBounds.width(),S&&Array.isArray(_.getCellValue(d,u))||!S){let t=new l.k(x,{stroke:!1,x:g[3],y:g[0],canvas:null!=(X=_.canvas)?X:_.scenegraph.stage.window.getContext().canvas,mode:_.options.mode,modeParams:_.options.modeParams,spec:_.options.specTransformInCell?_.options.specTransformInCell(b,d,u):b,ClassType:q,width:c-g[3]-g[1],height:p-g[2]-g[0],chartInstance:y,dataId:v,data:_.getCellValue(d,u)||[],cellPadding:g,dpr:_.internalProps.pixelRatio,detectPickChartItem:null==(Y=_.options.customConfig)?void 0:Y.detectPickChartItem,axes:_.isPivotChart()?_.internalProps.layoutMap.getChartAxes(d,u):[],tableChartOption:_.options.chartOption,col:d,row:u});e.appendChild(t),_.internalProps.layoutMap.setChartInstance(d,u,t.chartInstance)}return e}var u=i(39818),c=i(80971),p=i(43064),g=i(48523),f=i(35759),m=i(89883);class b extends n.Z{constructor(e){super(e),this._autoWidth=!1,this._autoHeight=!1,this._leftGroup=new n.Z({pickable:!1,fill:!1,stroke:!1}),this._leftGroup.role="content-left",this._rightGroup=new n.Z({pickable:!1,fill:!1,stroke:!1}),this._rightGroup.role="content-right",this._checkboxGroup=new n.Z({pickable:!1,fill:!1,stroke:!1}),this._checkboxGroup.role="content-center",this.appendChild(this._leftGroup),this.appendChild(this._rightGroup),this.appendChild(this._checkboxGroup)}addLeftOccupyingIcon(e){var t,i,r;e.setAttribute("x",this._leftGroup.width+(null!=(t=e.attribute.marginLeft)?t:0)),this._leftGroup.appendChild(e),this._leftGroup.setDeltaWidth((null!=(i=e.attribute.marginLeft)?i:0)+(null!=(r=e.attribute.marginRight)?r:0)+e.attribute.width)}addRightOccupyingIcon(e){var t,i,r;e.setAttribute("x",this._rightGroup.width+(null!=(t=e.attribute.marginLeft)?t:0)),this._rightGroup.appendChild(e),this._rightGroup.setDeltaWidth((null!=(i=e.attribute.marginLeft)?i:0)+(null!=(r=e.attribute.marginRight)?r:0)+e.attribute.width)}addCheckbox(e){this._checkboxGroup.appendChild(e)}setCheckboxContentOption(e){this._autoWidth=e.autoWidth,this._autoHeight=e.autoHeight,this._cellWidth=e.cellWidth,this._originCellWidth=e.cellWidth,this._cellHeight=e.cellHeight,this._align=e.align,this._baseline=e.baseline}layout(){let e=this._leftGroup.width;e===1/0&&(e=0);let t=this._rightGroup.width;if(t===-1/0&&(t=0),this._autoWidth){let i=this._checkboxGroup.width;this._cellWidth=e+t+i,this.setAttribute("width",this._cellWidth)}else{let i=this._cellWidth-e-t;this.updateCenterLayout(i);let r=this._checkboxGroup.width;this._cellWidth=e+t+r,this.setAttribute("width",this._cellWidth)}this.updateHorizontalPos();let i=this._leftGroup.height,r=this._rightGroup.height,n=this._checkboxGroup.height;this._cellHeight=Math.max(i,r,n),this.setAttribute("height",this._cellHeight),this.updateVerticalPos()}updateCenterLayout(e){let t=e;this._checkboxGroup.forEachChildren(e=>{e instanceof p.J&&(t-=e.AABBBounds.width())});let i=this._checkboxGroup.getChildByName("checkbox-content");i instanceof p.J&&i.setAttribute("width",t);let r=0;this._checkboxGroup.forEachChildren(e=>{e.setAttribute("x",r),r+=e.AABBBounds.width()})}updateHorizontalPos(){this._leftGroup.setAttribute("x",0),this._rightGroup.setAttribute("x",this._cellWidth-this._rightGroup.width),this._checkboxGroup.setAttribute("x",4),"left"===this._align||"start"===this._align?this.setAttribute("dx",0):"center"===this._align?this.setAttribute("dx",-this.attribute.width/2):"right"!==this._align&&"end"!==this._align||this.setAttribute("dx",-this.attribute.width)}updateVerticalPos(){"top"===this._baseline?(this._leftGroup.setAttribute("y",0),this._rightGroup.setAttribute("y",0),this._checkboxGroup.setAttribute("y",0)):"middle"===this._baseline?(this._leftGroup.forEachChildren(e=>{e.setAttribute("y",(this._leftGroup.height-e.AABBBounds.height())/2)}),this._rightGroup.forEachChildren(e=>{e.setAttribute("y",(this._rightGroup.height-e.AABBBounds.height())/2)}),this._leftGroup.setAttribute("y",this._cellHeight/2-this._leftGroup.height/2),this._rightGroup.setAttribute("y",this._cellHeight/2-this._rightGroup.height/2),this._checkboxGroup.setAttribute("y",this._cellHeight/2-this._checkboxGroup.height/2)):"bottom"===this._baseline&&(this._leftGroup.forEachChildren(e=>{e.setAttribute("y",this._leftGroup.height-e.AABBBounds.height())}),this._rightGroup.forEachChildren(e=>{e.setAttribute("y",this._rightGroup.height-e.AABBBounds.height())}),this._leftGroup.setAttribute("y",this._cellHeight-this._leftGroup.height),this._rightGroup.setAttribute("y",this._cellHeight-this._rightGroup.height),this._checkboxGroup.setAttribute("y",this._cellHeight-this._checkboxGroup.height))}}var y=i(23946);function v(e,t,i,r,l,o,s,d,v,_,C,x,w,S,A,k,M,T,R){var E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K,X,Y,q,J,Q;let ee;if(!e){let a=(0,h.d)(l,o,A,S);T&&(e=S.scenegraph.highPerformanceGetCell(l,o,!0))&&"cell"===e.role&&e.setAttributes({x:i,y:r,width:d,height:v,lineWidth:null!=(P=null==(E=null==A?void 0:A.group)?void 0:E.lineWidth)?P:void 0,fill:null!=(I=null==(B=null==A?void 0:A.group)?void 0:B.fill)?I:void 0,stroke:null!=(F=null==(L=null==A?void 0:A.group)?void 0:L.stroke)?F:void 0,strokeArrayWidth:a,strokeArrayColor:null!=(O=null==(H=null==A?void 0:A.group)?void 0:H.strokeArrayColor)?O:void 0,cursor:null!=(z=null==(D=null==A?void 0:A.group)?void 0:D.cursor)?z:void 0,lineDash:null!=(Z=null==(W=null==A?void 0:A.group)?void 0:W.lineDash)?Z:void 0,lineCap:"butt",clip:!0,cornerRadius:A.group.cornerRadius}),e&&"cell"===e.role||((e=new n.Z({x:i,y:r,width:d,height:v,lineWidth:null!=($=null==(N=null==A?void 0:A.group)?void 0:N.lineWidth)?$:void 0,fill:null!=(G=null==(j=null==A?void 0:A.group)?void 0:j.fill)?G:void 0,stroke:null!=(U=null==(V=null==A?void 0:A.group)?void 0:V.stroke)?U:void 0,strokeArrayWidth:a,strokeArrayColor:null!=(X=null==(K=null==A?void 0:A.group)?void 0:K.strokeArrayColor)?X:void 0,cursor:null!=(q=null==(Y=null==A?void 0:A.group)?void 0:Y.cursor)?q:void 0,lineDash:null!=(Q=null==(J=null==A?void 0:A.group)?void 0:J.lineDash)?Q:void 0,lineCap:"butt",clip:!0,cornerRadius:A.group.cornerRadius})).role="cell",e.col=l,e.row=o,null==t||t.addCellGroup(e))}if(w){let e=l,t=o;M&&(e=M.start.col,t=M.start.row),ee=S.getCellIcons(e,t)}let et=0,ei=0,er=0,en=0,el=[];if(Array.isArray(ee)&&0!==ee.length){let{leftIconWidth:t,rightIconWidth:i,contentLeftIcons:r,contentRightIcons:n,absoluteLeftIconWidth:l,absoluteRightIconWidth:o}=(0,m.M4)(ee,e,M,S);et=t+i,ei=t,er=i,el=r,en=o,e.forEachChildren(e=>{"icon-left"===e.role?e.setAttribute("x",e.attribute.x+_[3]):"icon-right"===e.role?e.setAttribute("x",e.attribute.x+d-i-_[1]):"icon-absolute-right"===e.role&&e.setAttribute("x",e.attribute.x+d-o-_[1])}),e.forEachChildren(e=>{"middle"===x?e.setAttribute("y",(v-e.AABBBounds.height())/2):"bottom"===x?e.setAttribute("y",v-e.AABBBounds.height()-_[2]):e.setAttribute("y",_[0])})}let eo=function(e,t,i,r,n,l,o,s,h,d){var u,m,b;let y=h._getCellStyle(e,t),v=(0,a.WJ)("size",y,e,t,h),_=(0,a.WJ)("spaceBetweenTextAndIcon",y,e,t,h),C=(0,a.WJ)("defaultFill",y,e,t,h),x=(0,a.WJ)("defaultStroke",y,e,t,h),w=(0,a.WJ)("disableFill",y,e,t,h),S=(0,a.WJ)("checkedFill",y,e,t,h),A=(0,a.WJ)("checkedStroke",y,e,t,h),k=(0,a.WJ)("disableCheckedFill",y,e,t,h),M=(0,a.WJ)("disableCheckedStroke",y,e,t,h),T=(0,a.WJ)("checkIconImage",y,e,t,h),R=(0,a.WJ)("indeterminateIconImage",y,e,t,h),E=h.getCellValue(e,t),P=h.getCellOriginValue(e,t),B,I,L=null!=E?E:"";if((0,c.Z)(E)?(B=E.checked,I=E.disable,L=null!=(u=E.text)?u:""):"boolean"==typeof E&&(B=E,L=""),h.internalProps.layoutMap.isSeriesNumber(e,t)){let i=h.getFieldData(s.field,e,t);i&&("string"==typeof i||("object"==typeof i?(B=i.checked,I=i.disable):"boolean"==typeof i&&(B=i)))}B=h.stateManager.syncCheckedState(e,t,s.field,B);let F=(0,g.L)(e,t,h),H=h._getCellStyle(e,t),O=null!=(m=H.autoWrapText)?m:h.internalProps.autoWrapText,{lineClamp:D}=H,{checked:z,disable:W}=s;if(null==B||"function"==typeof B){let i=(0,f.vi)(z,{col:e,row:t,table:h,context:null,value:E,dataValue:P});B=h.stateManager.syncCheckedState(e,t,s.field,i)}let Z=(0,f.vi)(W,{col:e,row:t,table:h,context:null,value:E,dataValue:P}),N=h.isAutoRowHeight(t),$={text:1===L.length?L[0]:L,maxLineWidth:"auto"===i?1/0:r-(l[1]+l[3]+F)-v-_,textAlign:"left",textBaseline:"top",autoWrapText:O,lineClamp:D,wordBreak:"break-word",heightLimit:N?-1:n-Math.floor(l[0]+l[2]),pickable:!1,dx:d?0:F,whiteSpace:1!==L.length||O?"normal":"no-wrap"},j={x:0,y:0,text:o.text?Object.assign({},o.text,$):$,icon:{width:Math.floor(v/1.4),height:Math.floor(v/1.4)},box:{width:v,height:v},dx:d?F:0,spaceBetweenTextAndIcon:_,disabled:null!=(b=null!=I?I:Z)&&b};"indeterminate"===B?(j.checked=void 0,j.indeterminate=!0):(j.checked=B,j.indeterminate=void 0),C&&(j.box.fill=C),x&&(j.box.stroke=x),w&&(j.box.disableFill=w),S&&(j.box.checkedFill=S),A&&(j.box.checkedStroke=A),k&&(j.box.disableCheckedFill=k),M&&(j.box.disableCheckedStroke=M),T&&(j.icon.checkIconImage=T),R&&(j.icon.indeterminateIconImage=R);let G=new p.J(j);return G.name="checkbox",G}(l,o,s-et,d,v,_,A,k,S,R);if(1!==el.length||el[0].name!==u.up.expandIconName&&el[0].name!==u.up.collapseIconName)eo&&e.appendChild(eo),eo.render();else{let t=new b({x:0,y:0,fill:!1,stroke:!1,pickable:!1});t.name="checkbox-content",t.setCheckboxContentOption({autoWidth:!1,autoHeight:!1,cellWidth:d-(_[1]+_[3]),cellHeight:v-_[0]-_[2],align:C,baseline:x});let i={addedHierarchyOffset:0};el.forEach(r=>{let n=(0,m.Bg)(r,void 0,e.col,e.row,M,S,i);n.role="icon-content-left",n.name=r.name,t.addLeftOccupyingIcon(n)}),eo&&t.addCheckbox(eo),e.appendChild(t),t.layout(),t.AABBBounds.width(),t.AABBBounds.height();let r=d-(_[1]+_[3]),n=v-(_[0]+_[2]);e.forEachChildren(e=>{"icon-left"===e.role?e.setAttribute("x",e.attribute.x+_[3]):"icon-right"===e.role?e.setAttribute("x",e.attribute.x+r-er+_[3]):"icon-absolute-right"===e.role?e.setAttribute("x",e.attribute.x+r-en+_[3]+_[1]):"content"!==e.name&&"checkbox-content"!==e.name||("center"===C&&"richtext"!==e.type?e.setAttribute("x",_[3]+ei+(r-ei-er)/2):"right"===C&&"richtext"!==e.type?e.setAttribute("x",_[3]+r-er):e.setAttribute("x",_[3]+ei))}),e.forEachChildren(e=>{e.name!==y.FH&&("middle"===x?(null==e?void 0:e._checkboxGroup)&&e._leftGroup.setAttribute("y",_[0]+(n-e._checkboxGroup.AABBBounds.height())/2):"bottom"===x?e.setAttribute("y",_[0]+n-e.AABBBounds.height()):e.setAttribute("y",_[0]))})}return d-=_[1]+_[3]+et,v-=_[0]+_[2],"center"===C?eo.setAttribute("x",_[3]+ei+(d-eo.AABBBounds.width())/2):"right"===C?eo.setAttribute("x",_[3]+ei+d-eo.AABBBounds.width()):eo.setAttribute("x",_[3]+ei),"middle"===x?eo.setAttribute("y",_[0]+(v-eo.AABBBounds.height())/2):"bottom"===x?eo.setAttribute("y",_[0]+v-eo.AABBBounds.height()):eo.setAttribute("y",_[0]),e}var _=i(94308),C=i(4654),x=i(95723),w=i(63778),S=i(20408),A=i(36637);function k(e,t,i,r,l,o,s,d,u,c,p,f,m,b,y,v){var _,w,S,A,k,T,R,E,P,B,I,L;if(!e){let a=(0,h.d)(l,o,b,m);(e=new n.Z({x:i,y:r,width:d,height:u,lineWidth:null!=(w=null==(_=null==b?void 0:b.group)?void 0:_.lineWidth)?w:void 0,fill:null!=(A=null==(S=null==b?void 0:b.group)?void 0:S.fill)?A:void 0,stroke:null!=(T=null==(k=null==b?void 0:b.group)?void 0:k.stroke)?T:void 0,strokeArrayWidth:a,strokeArrayColor:null!=(E=null==(R=null==b?void 0:b.group)?void 0:R.strokeArrayColor)?E:void 0,cursor:null!=(B=null==(P=null==b?void 0:b.group)?void 0:P.cursor)?B:void 0,lineDash:null!=(L=null==(I=null==b?void 0:b.group)?void 0:I.lineDash)?L:void 0,lineCap:"butt",clip:!0,cornerRadius:b.group.cornerRadius})).role="cell",e.col=l,e.row=o,null==t||t.addCellGroup(e)}let{width:F,height:H}=function(e,t,i,r,n,l,o,s,h,d,u){var c,p,f,m;let b=u._getCellStyle(e,t),y=(0,a.WJ)("size",b,e,t,u),v=(0,a.WJ)("innerRadius",b,e,t,u),_=(0,a.WJ)("outerRadius",b,e,t,u),w=(0,a.WJ)("spaceBetweenTextAndIcon",b,e,t,u),S=(0,a.WJ)("spaceBetweenRadio",b,e,t,u),A=(0,a.WJ)("defaultFill",b,e,t,u),k=(0,a.WJ)("defaultStroke",b,e,t,u),T=(0,a.WJ)("disableFill",b,e,t,u),R=(0,a.WJ)("checkedFill",b,e,t,u),E=(0,a.WJ)("checkedStroke",b,e,t,u),P=(0,a.WJ)("disableCheckedFill",b,e,t,u),B=(0,a.WJ)("disableCheckedStroke",b,e,t,u);(0,C.Z)(_)?y=2*_:_=Math.round(y/2),(!(0,C.Z)(v)||v<0)&&(v=Math.round(_/7*3));let I=u.getCellValue(e,t),L=u.getCellOriginValue(e,t),F=(0,g.L)(e,t,u),H=u._getCellStyle(e,t),O=null!=(c=H.autoWrapText)?c:u.internalProps.autoWrapText,{lineClamp:D}=H,z=u.isAutoRowHeight(t),W={maxLineWidth:"auto"===i?1/0:r-(l[1]+l[3]+F)-y-w,textAlign:"left",textBaseline:"top",autoWrapText:O,lineClamp:D,wordBreak:"break-word",heightLimit:z?-1:n-Math.floor(l[0]+l[2]),pickable:!1,dx:F},Z={x:0,y:0,text:o.text?Object.assign({},o.text,W):W,circle:{innerRadius:v,outerRadius:_},spaceBetweenTextAndIcon:w};A&&(Z.circle.fill=A),k&&(Z.circle.stroke=k),T&&(Z.circle.disableFill=T),R&&(Z.circle.checkedFill=R),E&&(Z.circle.checkedStroke=E),P&&(Z.circle.disableCheckedFill=P),B&&(Z.circle.disableCheckedStroke=B);let N=0,$=0,j=null!=(p=s.radioDirectionInCell)?p:"vertical";if((0,x.Z)(I))I.forEach((i,r)=>{var n,l;let o=M(i,L,r,e,t,s,O,Z,u);o&&h.appendChild(o),o.id=`radio-${null!=(n=null==d?void 0:d.start.col)?n:e}-${null!=(l=null==d?void 0:d.start.row)?l:t}-${r}`,o.render();let a=o.AABBBounds;"vertical"===j?(o.setAttribute("y",$),$+=a.height()+(r!==I.length-1?S:0),N=Math.max(N,a.width())):"horizontal"===j&&(o.setAttribute("x",N),N+=a.width()+(r!==I.length-1?S:0),$=Math.max($,a.height()))});else{let i=M(I,L,void 0,e,t,s,O,Z,u);i&&h.appendChild(i),i.id=`radio-${null!=(f=null==d?void 0:d.start.col)?f:e}-${null!=(m=null==d?void 0:d.start.row)?m:t}`,i.render();let r=i.AABBBounds;N=r.width(),$=r.height()}return{width:N,height:$}}(l,o,s,d,u,c,b,y,e,v,m);return d-=c[1]+c[3],u-=c[0]+c[2],e.forEachChildren(e=>{"center"===p?e.setAttribute("x",c[3]+e.attribute.x+(d-F)/2):"right"===p?e.setAttribute("x",c[3]+e.attribute.x+d-F):e.setAttribute("x",c[3]+e.attribute.x),"middle"===f?e.setAttribute("y",c[0]+e.attribute.y+(u-H)/2):"bottom"===f?e.setAttribute("y",c[0]+e.attribute.y+u-H):e.setAttribute("y",c[0]+e.attribute.y)}),e}function M(e,t,i,r,n,l,o,a,s){let h=function(e,t,i,r,n,l,o){var a,s;let h,d,u=null!=(a=l.radioCheckType)?a:"column";return(0,c.Z)(e)?h=e.checked:"boolean"==typeof e&&(h=e),null!=(h=o.stateManager.syncRadioState(r,n,l.field,u,i,h))&&"function"!=typeof h||(d=(0,f.vi)(l.checked,{col:r,row:n,table:o,context:null,value:e,dataValue:t}),h=o.stateManager.syncRadioState(r,n,l.field,u,i,d)),null!=(s=null!=h?h:d)&&s}(e,t,i,r,n,l,s),d=function(e,t,i,r,n,l){var o;let a;(0,c.Z)(e)&&(a=e.disable);let s=(0,f.vi)(n.disable,{col:i,row:r,table:l,context:null,value:e,dataValue:t});return null!=(o=null!=a?a:s)&&o}(e,t,r,n,l,s),u=(0,c.Z)(e)?e.text:(0,w.Z)(e)?"":null!=e?e:"",p=(0,S.Z)({},a,{checked:h,disabled:d,text:{text:1===u.length?u[0]:u,whiteSpace:1!==u.length||o?"normal":"no-wrap"},boundsPadding:0}),g=new A.Y(p);return g.name="radio",g}var T=i(23162);function R(e,t,i,r,l,o,s,d,u,p,b,y,v,_,C,x,w,S){var A,k,M,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U,K,X;let Y;if(!e){let a=(0,h.d)(l,o,C,_);S&&(e=_.scenegraph.highPerformanceGetCell(l,o,!0))&&"cell"===e.role&&e.setAttributes({x:i,y:r,width:d,height:u,lineWidth:null!=(k=null==(A=null==C?void 0:C.group)?void 0:A.lineWidth)?k:void 0,fill:null!=(R=null==(M=null==C?void 0:C.group)?void 0:M.fill)?R:void 0,stroke:null!=(P=null==(E=null==C?void 0:C.group)?void 0:E.stroke)?P:void 0,strokeArrayWidth:a,strokeArrayColor:null!=(I=null==(B=null==C?void 0:C.group)?void 0:B.strokeArrayColor)?I:void 0,cursor:null!=(F=null==(L=null==C?void 0:C.group)?void 0:L.cursor)?F:void 0,lineDash:null!=(O=null==(H=null==C?void 0:C.group)?void 0:H.lineDash)?O:void 0,lineCap:"butt",clip:!0,cornerRadius:C.group.cornerRadius}),e&&"cell"===e.role||((e=new n.Z({x:i,y:r,width:d,height:u,lineWidth:null!=(z=null==(D=null==C?void 0:C.group)?void 0:D.lineWidth)?z:void 0,fill:null!=(Z=null==(W=null==C?void 0:C.group)?void 0:W.fill)?Z:void 0,stroke:null!=($=null==(N=null==C?void 0:C.group)?void 0:N.stroke)?$:void 0,strokeArrayWidth:a,strokeArrayColor:null!=(G=null==(j=null==C?void 0:C.group)?void 0:j.strokeArrayColor)?G:void 0,cursor:null!=(U=null==(V=null==C?void 0:C.group)?void 0:V.cursor)?U:void 0,lineDash:null!=(X=null==(K=null==C?void 0:C.group)?void 0:K.lineDash)?X:void 0,lineCap:"butt",clip:!0,cornerRadius:C.group.cornerRadius})).role="cell",e.col=l,e.row=o,null==t||t.addCellGroup(e))}if(v){let e=l,t=o;w&&(e=w.start.col,t=w.start.row),Y=_.getCellIcons(e,t)}let q=0,J=0;if(Array.isArray(Y)&&0!==Y.length){let{leftIconWidth:t,rightIconWidth:i,absoluteLeftIconWidth:r,absoluteRightIconWidth:n}=(0,m.M4)(Y,e,w,_);q=t+i,J=t,e.forEachChildren(e=>{"icon-left"===e.role?e.setAttribute("x",e.attribute.x+p[3]):"icon-right"===e.role?e.setAttribute("x",e.attribute.x+d-i-p[1]):"icon-absolute-right"===e.role&&e.setAttribute("x",e.attribute.x+d-n-p[1])}),e.forEachChildren(e=>{"middle"===y?e.setAttribute("y",(u-e.AABBBounds.height())/2):"bottom"===y?e.setAttribute("y",u-e.AABBBounds.height()-p[2]):e.setAttribute("y",p[0])})}let Q=function(e,t,i,r,n,l,o,s,h){var d,u,p;let m=h._getCellStyle(e,t),b=(0,a.WJ)("spaceBetweenTextAndCircle",m,e,t,h),y=(0,a.WJ)("circleRadius",m,e,t,h),v=(0,a.WJ)("boxWidth",m,e,t,h),_=(0,a.WJ)("boxHeight",m,e,t,h),C=(0,a.WJ)("checkedFill",m,e,t,h),x=(0,a.WJ)("uncheckedFill",m,e,t,h),w=(0,a.WJ)("disableCheckedFill",m,e,t,h),S=(0,a.WJ)("disableUncheckedFill",m,e,t,h),A=(0,a.WJ)("circleFill",m,e,t,h),k=h.getCellValue(e,t),M=h.getCellOriginValue(e,t),R,E,P=null!=k?k:"";(0,c.Z)(k)?(R=k.checked,E=k.disable,P=null!=(d=k.text)?d:""):"boolean"==typeof k&&(R=k,P=""),R=h.stateManager.syncCheckedState(e,t,s.field,R);let B=(0,g.L)(e,t,h),I=h._getCellStyle(e,t),L=null!=(u=I.autoWrapText)?u:h.internalProps.autoWrapText,{lineClamp:F}=I,{checked:H,disable:O,uncheckedText:D,checkedText:z}=s;if(null==R||"function"==typeof R){let i=(0,f.vi)(H,{col:e,row:t,table:h,context:null,value:k,dataValue:M});R=h.stateManager.syncCheckedState(e,t,s.field,i)}let W=(0,f.vi)(O,{col:e,row:t,table:h,context:null,value:k,dataValue:M}),Z=(0,f.vi)(z,{col:e,row:t,table:h,context:null,value:k,dataValue:M}),N=(0,f.vi)(D,{col:e,row:t,table:h,context:null,value:k,dataValue:M}),$=h.isAutoRowHeight(t),j={text:1===P.length?P[0]:P,maxLineWidth:"auto"===i?1/0:r-(l[1]+l[3]+B)-2*y-b,textAlign:"left",textBaseline:"top",autoWrapText:L,lineClamp:F,wordBreak:"break-word",heightLimit:$?-1:n-Math.floor(l[0]+l[2]),pickable:!1,dx:B,whiteSpace:1!==P.length||L?"normal":"no-wrap",checkedText:Z,uncheckedText:N},G={x:0,y:0,text:o.text?Object.assign({},o.text,j):j,circle:{radius:y},box:{width:v,height:_},spaceBetweenTextAndCircle:b,disabled:null!=(p=null!=E?E:W)&&p};G.checked=R,x&&(G.box.uncheckedFill=x),S&&(G.box.disableUncheckedFill=S),C&&(G.box.checkedFill=C),w&&(G.box.disableCheckedFill=w),A&&(G.circle.fill=A);let V=new T.r(G);return V.name="switch",V}(l,o,s-q,d,u,p,C,x,_);return Q&&e.appendChild(Q),Q.render(),d-=p[1]+p[3]+q,u-=p[0]+p[2],"center"===b?Q.setAttribute("x",p[3]+J+(d-Q.AABBBounds.width())/2):"right"===b?Q.setAttribute("x",p[3]+J+d-Q.AABBBounds.width()):Q.setAttribute("x",p[3]+J),"middle"===y?Q.setAttribute("y",p[0]+(u-Q.AABBBounds.height())/2):"bottom"===y?Q.setAttribute("y",p[0]+u-Q.AABBBounds.height()):Q.setAttribute("y",p[0]),e}var E=i(78503),P=i(9252),B=i(6119),I=i(10145);let L=new B.Y,F=new I.f;function H(e,t,i,r,l,o,a,d,u,c,p,g){var f,m,b,y,v,_,C,x,w,S,A,k,M,T,R,P,B,I,H,z,W,Z,N,$;if(!e){let s=(0,h.d)(l,o,p,c);g&&(e=c.scenegraph.highPerformanceGetCell(l,o,!0))&&"cell"===e.role&&e.setAttributes({x:i,y:r,width:a,height:d,lineWidth:null!=(m=null==(f=null==p?void 0:p.group)?void 0:f.lineWidth)?m:void 0,fill:null!=(y=null==(b=null==p?void 0:p.group)?void 0:b.fill)?y:void 0,stroke:null!=(_=null==(v=null==p?void 0:p.group)?void 0:v.stroke)?_:void 0,strokeArrayWidth:s,strokeArrayColor:null!=(x=null==(C=null==p?void 0:p.group)?void 0:C.strokeArrayColor)?x:void 0,cursor:null!=(S=null==(w=null==p?void 0:p.group)?void 0:w.cursor)?S:void 0,lineDash:null!=(k=null==(A=null==p?void 0:p.group)?void 0:A.lineDash)?k:void 0,lineCap:"butt",clip:!0,cornerRadius:p.group.cornerRadius}),e&&"cell"===e.role||((e=new n.Z({x:i,y:r,width:a,height:d,lineWidth:null!=(T=null==(M=null==p?void 0:p.group)?void 0:M.lineWidth)?T:void 0,fill:null!=(P=null==(R=null==p?void 0:p.group)?void 0:R.fill)?P:void 0,stroke:null!=(I=null==(B=null==p?void 0:p.group)?void 0:B.stroke)?I:void 0,strokeArrayWidth:s,strokeArrayColor:null!=(z=null==(H=null==p?void 0:p.group)?void 0:H.strokeArrayColor)?z:void 0,cursor:null!=(Z=null==(W=null==p?void 0:p.group)?void 0:W.cursor)?Z:void 0,lineDash:null!=($=null==(N=null==p?void 0:p.group)?void 0:N.lineDash)?$:void 0,lineCap:"butt",clip:!0,cornerRadius:p.group.cornerRadius})).role="cell",e.col=l,e.row=o,null==t||t.addCellGroup(e))}let j=function(e,t,i,r,n,l){let o,a,h,d,u=l.internalProps.layoutMap.getBody(e,t).sparklineSpec,c=l.getCellValue(e,t);if(!Array.isArray(c))return;let p=n[3],g=n[0];i-=n[1]+n[3];let f=r-=n[0]+n[2];"function"==typeof u?a=O(o=u({col:e,row:t,dataValue:l.getCellOriginValue(e,t)||"",value:l.getCellValue(e,t)||"",rect:l.getCellRangeRelativeRect(l.getCellRange(e,t)),table:l}),p,g,i,r):(o=u,a=O(u,p,g,i,r));let m=[],b=[];if("object"==typeof o.xField)L.domain(o.xField.domain),h=o.xField.field;else if("string"==typeof o.xField){let e=c.map(e=>e[o.xField]);L.domain(e),h=o.xField}else Array.isArray(c)&&(L.domain(Array.from({length:c.length},(e,t)=>t)),h=o.xField);if(L.range([0,i]),"object"==typeof o.yField)F.domain(o.yField.domain),d=o.yField.field;else if("string"==typeof o.yField){let e=D(c,o.yField);F.domain([Math.min(...e),Math.max(...e)]),d=o.yField}else if(Array.isArray(c)){let e=D(c);F.domain([Math.min(...e),Math.max(...e)]),d=o.yField}if(F.range([0,r]),"object"==typeof o.xField&&Array.isArray(o.xField.domain)){let e=c.map(e=>e[o.xField.field]),t=o.xField.domain;for(let i=0;i<t.length;i++){let r=!1;for(let n=0;n<e.length;n++)if(t[i]===e[n]){let e=c[n];if(!(0,s.Z)(e[h])||!(0,s.Z)(e[d]))break;m.push({x:0+L.scale(e[h]),y:f-F.scale(e[d]),defined:(0,s.Z)(e[d])}),b.push(e),r=!0;break}r||(m.push({x:0+L.scale(t[i]),y:0,defined:!1}),b.push({[h]:t[i],[d]:null}))}}else for(let e=0;e<c.length;e++){let t=c[e];m.push({x:0+L.scale(h?t[h]:e),y:f-F.scale(d?t[d]:t),defined:(0,s.Z)(d?t[d]:t),rawData:t}),b.push(t)}let y=a.getChildByName("sparkline-line");y&&y.setAttribute("points",m),y.bandwidth=L.step(),y.min=F.range()[0],y.max=F.range()[1];let v=a.getChildByName("sparkline-symbol-group");if(v){let e="isolatedPoint"===o.pointShowRule;if("all"===o.pointShowRule)for(let e=0;e<m.length;e++){let{x:t,y:i,defined:r}=m[e];if(r){let e=(0,E.t)({x:t,y:i});v.appendChild(e)}}else if(e)for(let e=0;e<m.length;e++){let{x:t,y:i,defined:r}=m[e];if(r&&(!m[e-1]||!m[e-1].defined)&&(!m[e+1]||!m[e+1].defined)){let e=(0,E.t)({x:t,y:i});v.appendChild(e)}}}return a}(l,o,a,d,u,c);return j&&e.appendChild(j),e}function O(e,t,i,r,l){var o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x,w,S,A,k,M;let T;T="function"==typeof e?e(null):e;let R=new n.Z({x:t,y:i,width:r,height:l,stroke:!1,fill:!1});if(R.name="sparkline","line"===T.type){let e=(0,P.W)({x:0,y:0,curveType:T.smooth?"monotoneX":"linear",stroke:null!=(s=null==(a=null==(o=T.line)?void 0:o.style)?void 0:a.stroke)?s:"blue",lineWidth:null!=(u=null==(d=null==(h=T.line)?void 0:h.style)?void 0:d.strokeWidth)?u:2});e.name="sparkline-line",R.addChild(e),T.crosshair&&(e.hover=null!=(p=null==(c=T.crosshair)?void 0:c.style)?p:{stroke:"#000",interpolate:"linear"});let t=new n.Z({x:0,y:0,width:r,height:l,stroke:!1,fill:!1});t.name="sparkline-symbol-group",t.setTheme({symbol:{stroke:null!=(m=null==(f=null==(g=T.point)?void 0:g.style)?void 0:f.stroke)?m:"#000",lineWidth:null!=(v=null==(y=null==(b=T.point)?void 0:b.style)?void 0:y.strokeWidth)?v:1,fill:null!=(x=null==(C=null==(_=T.point)?void 0:_.style)?void 0:C.fill)?x:"#000",size:2*(null!=(A=null==(S=null==(w=T.point)?void 0:w.style)?void 0:S.size)?A:3),symbolType:"circle"}}),R.addChild(t),t.hover=null!=(M=null==(k=T.point)?void 0:k.hover)&&M}return R}function D(e,t){let i=[];for(let r=0;r<e.length;r++){let n=e[r];(0,s.Z)(t)&&(0,s.Z)(n[t])?i.push(n[t]):!(0,s.Z)(t)&&(0,s.Z)(n)&&i.push(n)}return i}var z=i(50074),W=i(1800),Z=i(21044),N=i(81584),$=i(49360),j=i(76352);let G=W.U2();function V(e,t,i,r,l,o,d,u,c,p,g,f,b,y,v,C,x){var w,S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,W,V,U,K,X,Y,q,J,Q,ee,et,ei,er,en;let el,eo,ea=y._getCellStyle(r,l),es=(0,a.vp)("padding",ea,r,l,y);(null==(w=y.options.customConfig)?void 0:w.imageMargin)?p=(0,j.u)(null==(S=y.options.customConfig)?void 0:S.imageMargin):(0,s.Z)(es)&&(p=es),(null==(A=null==v?void 0:v.text)?void 0:A.textAlign)&&(g=null==(k=null==v?void 0:v.text)?void 0:k.textAlign),(null==(M=null==v?void 0:v.text)?void 0:M.textBaseline)&&(f=null==(T=null==v?void 0:v.text)?void 0:T.textBaseline);let eh=(0,h.d)(r,l,v,y);if(x&&(el=y.scenegraph.highPerformanceGetCell(r,l,!0))&&"cell"===el.role&&el.setAttributes({x:t,y:i,width:o,height:d,lineWidth:null!=(E=null==(R=null==v?void 0:v.group)?void 0:R.lineWidth)?E:void 0,fill:null!=(B=null==(P=null==v?void 0:v.group)?void 0:P.fill)?B:void 0,stroke:null!=(L=null==(I=null==v?void 0:v.group)?void 0:I.stroke)?L:void 0,strokeArrayWidth:eh,strokeArrayColor:null!=(H=null==(F=null==v?void 0:v.group)?void 0:F.strokeArrayColor)?H:void 0,cursor:null!=(D=null==(O=null==v?void 0:v.group)?void 0:O.cursor)?D:void 0,lineDash:null!=(V=null==(W=null==v?void 0:v.group)?void 0:W.lineDash)?V:void 0,lineCap:"butt",clip:!0,cornerRadius:v.group.cornerRadius}),el&&"cell"===el.role||((el=new n.Z({x:t,y:i,width:o,height:d,lineWidth:null!=(K=null==(U=null==v?void 0:v.group)?void 0:U.lineWidth)?K:void 0,fill:null!=(Y=null==(X=null==v?void 0:v.group)?void 0:X.fill)?Y:void 0,stroke:null!=(J=null==(q=null==v?void 0:v.group)?void 0:q.stroke)?J:void 0,strokeArrayWidth:eh,strokeArrayColor:null!=(ee=null==(Q=null==v?void 0:v.group)?void 0:Q.strokeArrayColor)?ee:void 0,cursor:null!=(ei=null==(et=null==v?void 0:v.group)?void 0:et.cursor)?ei:void 0,lineDash:null!=(en=null==(er=null==v?void 0:v.group)?void 0:er.lineDash)?en:void 0,lineCap:"butt",clip:!0,cornerRadius:v.group.cornerRadius})).role="cell",el.col=r,el.row=l,null==e||e.addCellGroup(el)),b){let e=r,t=l;C&&(e=C.start.col,t=C.start.row),eo=y.getCellIcons(e,t)}let ed=0,eu=0;if(Array.isArray(eo)&&0!==eo.length){let{leftIconWidth:e,rightIconWidth:t,absoluteLeftIconWidth:i,absoluteRightIconWidth:r}=(0,m.M4)(eo,el,C,y);ed=e,eu=t,el.forEachChildren(e=>{"icon-left"===e.role?e.setAttribute("x",e.attribute.x+p[3]):"icon-right"===e.role?e.setAttribute("x",e.attribute.x+o-t-p[1]):"icon-absolute-right"===e.role&&e.setAttribute("x",e.attribute.x+o-r-p[1])}),el.forEachChildren(e=>{"middle"===f?e.setAttribute("y",(d-e.AABBBounds.height())/2):"bottom"===f?e.setAttribute("y",d-e.AABBBounds.height()-p[2]):e.setAttribute("y",p[0])}),el._cellLeftIconWidth=ed,el._cellRightIconWidth=eu}let ec=y.getCellValue(r,l),ep=document.createElement("video");ep.addEventListener("loadeddata",()=>{c&&(0,_.LP)(r,l,ep.videoWidth,ep.videoHeight,y.scenegraph,p,el);let{width:e,height:t,isMerge:i}=(0,_.SI)(el,y);if(u){let{width:i,height:r}=(0,Z.f)(ep.videoWidth,ep.videoHeight,e-p[1]-p[3],t-p[0]-p[2]),n=(0,$.W)(0,0,e,t,i,r,g,f,p);eg.setAttributes({width:i,height:r,x:n.x,y:n.y,dx:0})}else eg.setAttributes({x:p[3],y:p[0],width:e-p[1]-p[3],height:t-p[2]-p[0],dy:0});i&&(0,_.Gb)(el.mergeStartCol,el.mergeEndCol,el.mergeStartRow,el.mergeEndRow,y);let{width:n,height:o}=(0,_.SI)(el,y),a=Math.floor(Math.min(n-p[1]-p[3],o-p[2]-p[0])/2),s=0+(n>eg.attribute.width?eg.attribute.x-0+eg.attribute.width/2:n/2),h=0+(o>eg.attribute.height?eg.attribute.y-0+eg.attribute.height/2:o/2),{dx:d,dy:m}=el.getChildByName("image",!0).attribute,b=new N.J({x:s-a/2,y:h-a/2,width:a,height:a,image:G.play.svg,cursor:G.play.cursor,dx:d,dy:m});b.name="play-icon",el.appendChild(b),y.scenegraph.updateNextFrame()}),ep.onerror=()=>{eg.image=G.damage_pic.svg},ep.src=ec,ep.setAttribute("preload","auto");let eg=(0,z.B)({x:p[3],y:p[0],width:o-p[1]-p[3],height:d-p[2]-p[0],image:ep,cursor:"pointer"});return eg.name="image",eg.keepAspectRatio=u,eg.textAlign=g,eg.textBaseline=f,el.appendChild(eg),el}var U=i(638),K=i(64871),X=i(22288);function Y(e,t,i,r,l,o,d,u,c,p,g,f,b,y,v,_,C,x,w){var S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,Y,q,J,Q,ee,et,ei,er,en,el;let eo,ea=e._getCellStyle(o,d),es=(0,a.vp)("padding",ea,o,d,e);(0,s.Z)(es)&&(g=es),(null==(S=null==C?void 0:C.text)?void 0:S.textAlign)&&(f=null==(A=null==C?void 0:C.text)?void 0:A.textAlign),(null==(k=null==C?void 0:C.text)?void 0:k.textBaseline)&&(b=null==(M=null==C?void 0:C.text)?void 0:M.textBaseline);let eh=e.isAutoRowHeight(d),ed=null!=(T=ea.autoWrapText)?T:e.internalProps.autoWrapText,eu=ea.lineClamp,ec=(0,h.d)(o,d,C,e);if(w&&(eo=e.scenegraph.getCell(o,d,!0))&&"cell"===eo.role&&eo.setAttributes({x:r,y:l,width:c,height:p,lineWidth:null!=(E=null==(R=null==C?void 0:C.group)?void 0:R.lineWidth)?E:void 0,fill:null!=(B=null==(P=null==C?void 0:C.group)?void 0:P.fill)?B:void 0,stroke:null!=(L=null==(I=null==C?void 0:C.group)?void 0:I.stroke)?L:void 0,strokeArrayWidth:null!=ec?ec:void 0,strokeArrayColor:null!=(H=null==(F=null==C?void 0:C.group)?void 0:F.strokeArrayColor)?H:void 0,cursor:null!=(D=null==(O=null==C?void 0:C.group)?void 0:O.cursor)?D:void 0,lineDash:null!=(W=null==(z=null==C?void 0:C.group)?void 0:z.lineDash)?W:void 0,lineCap:"butt",clip:!0,cornerRadius:C.group.cornerRadius}),eo&&"cell"===eo.role||((eo=new n.Z({x:r,y:l,width:c,height:p,lineWidth:null!=(N=null==(Z=null==C?void 0:C.group)?void 0:Z.lineWidth)?N:void 0,fill:null!=(j=null==($=null==C?void 0:C.group)?void 0:$.fill)?j:void 0,stroke:null!=(V=null==(G=null==C?void 0:C.group)?void 0:G.stroke)?V:void 0,strokeArrayWidth:null!=ec?ec:void 0,strokeArrayColor:null!=(q=null==(Y=null==C?void 0:C.group)?void 0:Y.strokeArrayColor)?q:void 0,cursor:null!=(Q=null==(J=null==C?void 0:C.group)?void 0:J.cursor)?Q:void 0,lineDash:null!=(et=null==(ee=null==C?void 0:C.group)?void 0:ee.lineDash)?et:void 0,lineCap:"butt",clip:!0,cornerRadius:C.group.cornerRadius})).role="cell",eo.col=o,eo.row=d,null==i||i.addCellGroup(eo)),v&&eo.appendChild(v),_){let i;if(y){let t=o,r=d;x&&(t=x.start.col,r=x.start.row),i=e.getCellIcons(t,r)}(0,m.Rd)(eo,i,t,g,"auto"===u,eh,ed,"number"==typeof eu?eu:void 0,eo.attribute.width,eo.attribute.height,f,b,e,C,x),(null==(ei=null==C?void 0:C._vtable)?void 0:ei.marked)&&function(e,t,i){if("boolean"==typeof e){let e=(0,U.Q)({x:t.attribute.width,y:0,startAngle:Math.PI/2,endAngle:Math.PI,outerRadius:6,fill:"#3073F2",pickable:!1});e.name="mark",t.appendChild(e)}else{let i,r,n,l,o,a,{bgColor:s="#3073F2",shape:h="sector",position:d="right-top",size:u=10,offset:c=0}=e;if("sector"===h)"right-top"===d?(i=t.attribute.width-c,r=c,n=Math.PI/2,l=Math.PI):"left-top"===d?(i=c,r=c,n=0,l=Math.PI/2):"right-bottom"===d?(i=t.attribute.width-c,r=t.attribute.height-c,n=Math.PI,l=Math.PI/2*3):"left-bottom"===d&&(i=c,r=t.attribute.height-c,n=Math.PI/2*3,l=2*Math.PI),o=s,a=(0,U.Q)({x:i,y:r,startAngle:n,endAngle:l,outerRadius:u,fill:o,pickable:!1});else if("triangle"===h){let e,n,l,h;"right-top"===d?(i=t.attribute.width-c,r=c,e=i-u,n=r,l=i,h=r+u):"left-top"===d?(i=c,r=c,e=i+u,n=r,l=i,h=r+u):"right-bottom"===d?(i=t.attribute.width-c,r=t.attribute.height-c,e=i-u,n=r,l=i,h=r-u):"left-bottom"===d&&(i=c,r=t.attribute.height-c,e=i+u,n=r,l=i,h=r-u),o=s,a=(0,K.p)({points:[{x:i,y:r},{x:e,y:n},{x:l,y:h}],fill:o,pickable:!1})}else"rect"===h&&("right-top"===d?(i=t.attribute.width-u-c,r=c):"left-top"===d?(i=c,r=c):"right-bottom"===d?(i=t.attribute.width-u-c,r=t.attribute.height-u-c):"left-bottom"===d&&(i=c,r=t.attribute.height-u-c),o=s,a=(0,X.f)({x:i,y:r,width:u,height:u,fill:o,pickable:!1}));a.name="mark",t.appendChild(a)}}(null==(er=null==C?void 0:C._vtable)?void 0:er.marked,eo,0)}return v&&eo.setAttributes({width:Math.max(eo.attribute.width,null!=(en=v.attribute.width)?en:0),height:Math.max(eo.attribute.height,null!=(el=v.attribute.height)?el:0)}),eo}function q(e,t,i,r,l,o,s,h,d,u){var c,p,g,m,b,y;if(e.dependField){let t=(0,f.vi)(e.dependField,{col:o,row:s,table:d,value:r,dataValue:l,cellHeaderPaths:void 0});l=null!=(p=null==(c=d.getCellOriginRecord(o,s))?void 0:c[t])?p:l}let v=null!=(g=(0,f.vi)(e.barType,{col:o,row:s,table:d,value:r,dataValue:l,cellHeaderPaths:void 0}))?g:"default",_=null!=(m=(0,f.vi)(e.min,{col:o,row:s,table:d,value:r,dataValue:l,cellHeaderPaths:void 0}))?m:0,x=null!=(b=(0,f.vi)(e.max,{col:o,row:s,table:d,value:r,dataValue:l,cellHeaderPaths:void 0}))?b:_+100,w=0;if(w=u?d.getRowsHeight(u.start.row,u.end.row):d.getRowHeight(s),d.pluginManager&&d.pluginManager.getPluginByName("Master Detail Plugin")){let e=s-d.columnHeaderLevelCount,t=d.internalProps,i=null==(y=null==t?void 0:t.originalRowHeights)?void 0:y.get(e);void 0!==i&&i>0&&(w=i)}let S=i,A=w,k=0;(0,C.Z)(d.theme._contentOffset)&&(k=d.theme._contentOffset);let M=new n.Z({x:-k,y:-k,width:S,height:A});M.name="progress-bar";let{showBar:T,barColor:R,barBgColor:E,barPositiveColor:B,barNegativeColor:I,barAxisColor:L,barRightToLeft:F,showBarMark:H,barMarkPositiveColor:O,barMarkNegativeColor:D,barMarkWidth:z,barMarkPosition:W,barMarkInBar:Z}=t,{barHeight:N,barBottom:$,barPadding:G}=t;1===G.length?G=[G[0],G[0],G[0],G[0]]:2===G.length?G=[G[0],G[1],G[0],G[1]]:3===G.length&&(G=[G[0],G[1],G[2],G[1]]),G=G.map((e,t)=>{if("string"==typeof e&&f.Bd.endsWith(e,"%")){let r=Number(e.substr(0,e.length-1));return 0===t||2===t?w*r/100:i*r/100}return Number(e)});let V=(0,j.u)((0,a.WJ)("borderLineWidth",t,o,s,d)),U=Math.max(G[0],Math.ceil(V[0]/2)),K=Math.max(G[1],Math.floor(V[1]/2)),Y=Math.max(G[2],Math.floor(V[2]/2)),q=Math.max(G[3],Math.ceil(V[3]/2));H&&z>0&&"right"===W&&!1===Z&&(K+=z,q+=z),S-=K+q,A-=Y+U,s===d.rowCount-1&&[0,"0"].includes($)&&(A-=1);let J=q,Q=S;if(N="string"==typeof N&&f.Bd.endsWith(N,"%")?A*(N=Number(N.substr(0,N.length-1)))/100:Number(N),$="string"==typeof $&&f.Bd.endsWith($,"%")?A*($=Number($.substr(0,$.length-1)))/100:Number($),(0,f.vi)(T,{col:o,row:s,table:d,context:null,value:r,dataValue:l})){let e=`${l}`;f.Bd.endsWith(e,"%")&&(e=e.substr(0,e.length-1));let t=Number(e);if(isNaN(t))return M;if("default"===(null!=v?v:"default")){let e=t<_?0:t>x?1:(t-_)/(x-_),i=S,n=U+A-N-$,a=Math.min(i*e,i),h=F?J+Q-a:J;o!==d.colCount-1||1!==e||F||(a-=1);let u=(0,f.vi)(E,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:e});if(u){let e=(0,X.f)({x:h,y:n,width:i,height:N,fill:u});M.addChild(e)}let c=(0,f.vi)(R,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:e})||"#20a8d8",p=(0,X.f)({x:h,y:n,width:a,height:N,fill:c});M.addChild(p)}else if("negative"===v){let e=_<0?-_:0,i=x>0?x:0,n=e/(e+i),a=1-n,h=t>0?t/i:0,u=t<0?-t/e:0,c=S,p=U+A-N-$,g=(0,f.vi)(E,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:h});if(g){let e=(0,X.f)({x:J,y:p,width:c,height:N,fill:g});M.addChild(e)}let m=F?a*c:n*c,b=Math.min(c*n*u,c),y=F?{left:J+m,top:p,width:b,height:N}:{left:J+m-b,top:p,width:b,height:N},v=(0,f.vi)(I,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:u})||"#20a8d8",C=(0,X.f)({x:y.left,y:y.top,width:y.width,height:y.height,fill:v});M.addChild(C);let k=Math.min(c*a*h,c);o!==d.colCount-1||1!==h||F||(k-=1);let T=F?{left:J+m-k,top:p,width:k,height:N}:{left:J+m,top:p,width:k,height:N},R=(0,f.vi)(B,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:h})||"#20a8d8",j=(0,X.f)({x:T.left,y:T.top,width:T.width,height:T.height,fill:R});M.addChild(j);let G=F?y.left:T.left,V=(0,f.vi)(L,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:h}),K=(0,P.W)({x:0,y:0,stroke:V,lineWidth:1,lineDash:[2,2],points:[{x:G,y:0},{x:G,y:w}]});if(M.addChild(K),H&&(h||u)){let e,t=[];if(h>0)if(e=(0,f.vi)(O,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:h})||"#20a8d8","right"===W){let e=F?T.left+z/2:T.left+T.width+(Z?-z/2:z/2);t.push({x:e,y:T.top}),t.push({x:e,y:T.top+T.height})}else"bottom"===W&&(t.push({x:T.left,y:T.top+T.height-z/2}),t.push({x:T.left+T.width,y:T.top+T.height-z/2}));else if(u>0)if(e=(0,f.vi)(D,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:u})||"#20a8d8","right"===W){let e=F?y.left+y.width-z/2:y.left+z/2;t.push({x:e,y:y.top}),t.push({x:e,y:y.top+y.height})}else"bottom"===W&&(t.push({x:y.left,y:y.top+y.height-z/2}),t.push({x:y.left+y.width,y:y.top+y.height-z/2}));let i=(0,P.W)({x:0,y:0,stroke:e,lineWidth:z,points:t});M.addChild(i)}}else if("negative_no_axis"===v){let e,i=Math.max(_<0?-_:0,x>0?x:0),n=0===i?0:Math.abs(t)/i,a=S,h=Math.min(a*n,a);o!==d.colCount-1||1!==n||F||(h-=1);let u=U+A-N-$,c=F?J+Q-h:J,p=(0,f.vi)(E,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:n});if(p){let e=(0,X.f)({x:c,y:u,width:a,height:N,fill:p});M.addChild(e)}let g={left:c,top:u,width:h,height:N};e=t>=0?(0,f.vi)(B,{col:o,row:s,table:d,context:null,value:r,percentile:n,dataValue:l})||"#20a8d8":(0,f.vi)(I,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:n})||"#20a8d8";let m=(0,X.f)({x:g.left,y:g.top,width:g.width,height:g.height,fill:e});if(M.addChild(m),H&&t){let e,i=[];if(e=t>=0?(0,f.vi)(O,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:n})||"#20a8d8":(0,f.vi)(D,{col:o,row:s,table:d,context:null,value:r,dataValue:l,percentile:n})||"#20a8d8","right"===W){let e=F?g.left+z/2:g.left+g.width-z/2;i.push({x:e,y:g.top}),i.push({x:e,y:g.top+g.height})}else"bottom"===W&&(i.push({x:g.left,y:g.top+g.height-z/2}),i.push({x:g.left+g.width,y:g.top+g.height-z/2}));let a=(0,P.W)({x:0,y:0,stroke:e,lineWidth:z,points:i});M.addChild(a)}}}return M}var J=i(65880),Q=i(1466),ee=i(96241),et=i(54326),ei=i(99346);function er(e,t,i,r,n,l){var o,a,h,d,u,c,p,g,f,m,b,y,v,_,x,w,S,A;let k,M;if((null==i?void 0:i.zero)&&(e=Math.min(e,0),t=Math.max(t,0)),null==i?void 0:i.expand){let r=e,n=t;(0,s.Z)(i.expand.min)&&(e=r-(n-r)*i.expand.min),(0,s.Z)(i.expand.max)&&(t=n+(n-r)*i.expand.max)}if((0,C.Z)(null==i?void 0:i.min)&&(e=i.min),(0,C.Z)(null==i?void 0:i.max)&&(t=i.max),"log"===(null==i?void 0:i.type)?(k=new J.Y).base(null!=(o=null==i?void 0:i.base)?o:10):"symlog"===(null==i?void 0:i.type)?(k=new Q.g).constant(null!=(a=null==i?void 0:i.constant)?a:10):k=new I.f,k.domain([e,t],!!(null==i?void 0:i.nice)),l){S=k,A=l,S.niceMax(A.targetTicks.length)}else if(null==i?void 0:i.nice){let e=null!=(c=null!=(d=null==(h=i.tick)?void 0:h.forceTickCount)?d:null==(u=i.tick)?void 0:u.tickCount)?c:10;(0,ee.Z)(e)&&(e=e({axisLength:n,labelStyle:null!=(g=null==(p=null==i?void 0:i.label)?void 0:p.style)?g:{fontSize:ei.Zu.LABEL_FONT_SIZE}})),"accurateFirst"===i.niceType&&(e=Math.max(10,e)),(0,et.Z)(i.min)&&(0,et.Z)(i.max)?k.nice(e):(0,s.Z)(i.min)&&(0,et.Z)(i.max)?k.niceMax(e):(0,et.Z)(i.min)&&(0,s.Z)(i.max)&&k.niceMin(e)}return delete k._niceType,M=(null!=(m=null==(f=null==l?void 0:l.targetTicks)?void 0:f.length)?m:null==(b=null==i?void 0:i.tick)?void 0:b.forceTickCount)?k.forceTicks(null!=(v=null==(y=null==l?void 0:l.targetTicks)?void 0:y.length)?v:null==(_=null==i?void 0:i.tick)?void 0:_.forceTickCount):k.ticks((0,C.Z)(null==(x=null==i?void 0:i.tick)?void 0:x.tickCount)?i.tick.tickCount:5,{noDecimals:null==(w=null==i?void 0:i.tick)?void 0:w.noDecimals}),{range:k.domain(),ticks:M}}var en=i(59417);function el(e,t,i,r,l,o,s,d,u,c,p,b,y,v,_,C,x,w){var S,A,k,M,T,R,E,P,B,I,L,F,H,O,D,z,W,Z,N,$,j,G,V,U;let K;if(!e){let a=(0,h.d)(l,o,_,v);w&&(e=v.scenegraph.highPerformanceGetCell(l,o,!0))&&"cell"===e.role&&e.setAttributes({x:i,y:r,width:d,height:u,lineWidth:null!=(A=null==(S=null==_?void 0:_.group)?void 0:S.lineWidth)?A:void 0,fill:null!=(M=null==(k=null==_?void 0:_.group)?void 0:k.fill)?M:void 0,stroke:null!=(R=null==(T=null==_?void 0:_.group)?void 0:T.stroke)?R:void 0,strokeArrayWidth:a,strokeArrayColor:null!=(P=null==(E=null==_?void 0:_.group)?void 0:E.strokeArrayColor)?P:void 0,cursor:null!=(I=null==(B=null==_?void 0:_.group)?void 0:B.cursor)?I:void 0,lineDash:null!=(F=null==(L=null==_?void 0:_.group)?void 0:L.lineDash)?F:void 0,lineCap:"butt",clip:!0,cornerRadius:_.group.cornerRadius}),e&&"cell"===e.role||((e=new n.Z({x:i,y:r,width:d,height:u,lineWidth:null!=(O=null==(H=null==_?void 0:_.group)?void 0:H.lineWidth)?O:void 0,fill:null!=(z=null==(D=null==_?void 0:_.group)?void 0:D.fill)?z:void 0,stroke:null!=(Z=null==(W=null==_?void 0:_.group)?void 0:W.stroke)?Z:void 0,strokeArrayWidth:a,strokeArrayColor:null!=($=null==(N=null==_?void 0:_.group)?void 0:N.strokeArrayColor)?$:void 0,cursor:null!=(G=null==(j=null==_?void 0:_.group)?void 0:j.cursor)?G:void 0,lineDash:null!=(U=null==(V=null==_?void 0:_.group)?void 0:V.lineDash)?U:void 0,lineCap:"butt",clip:!0,cornerRadius:_.group.cornerRadius})).role="cell",e.col=l,e.row=o,null==t||t.addCellGroup(e))}if(y){let e=l,t=o;x&&(e=x.start.col,t=x.start.row),K=v.getCellIcons(e,t)}let X=0,Y=0;if(Array.isArray(K)&&0!==K.length){let{leftIconWidth:t,rightIconWidth:i,absoluteLeftIconWidth:r,absoluteRightIconWidth:n}=(0,m.M4)(K,e,x,v);X=t+i,Y=t,e.forEachChildren(e=>{"icon-left"===e.role?e.setAttribute("x",e.attribute.x+c[3]):"icon-right"===e.role?e.setAttribute("x",e.attribute.x+d-i-c[1]):"icon-absolute-right"===e.role&&e.setAttribute("x",e.attribute.x+d-n-c[1])}),e.forEachChildren(e=>{"middle"===b?e.setAttribute("y",(u-e.AABBBounds.height())/2):"bottom"===b?e.setAttribute("y",u-e.AABBBounds.height()-c[2]):e.setAttribute("y",c[0])})}let q=function(e,t,i,r,n,l,o,s,h){var d,u;let c=h._getCellStyle(e,t),p=(0,a.WJ)("buttonColor",c,e,t,h),m=(0,a.WJ)("buttonBorderColor",c,e,t,h),b=(0,a.WJ)("buttonLineWidth",c,e,t,h),y=(0,a.WJ)("buttonBorderRadius",c,e,t,h),v=(0,a.WJ)("buttonHoverColor",c,e,t,h),_=(0,a.WJ)("buttonHoverBorderColor",c,e,t,h),C=(0,a.WJ)("buttonPadding",c,e,t,h),x=(0,a.WJ)("buttonTextHoverColor",c,e,t,h),w=(0,a.WJ)("buttonDisableColor",c,e,t,h),S=(0,a.WJ)("buttonDisableBorderColor",c,e,t,h),A=(0,a.WJ)("buttonTextDisableColor",c,e,t,h),k=h.getCellValue(e,t),M=h.getCellOriginValue(e,t),T=(0,g.L)(e,t,h),R=h._getCellStyle(e,t),E=null!=(d=R.autoWrapText)?d:h.internalProps.autoWrapText,{lineClamp:P}=R,B=h.isAutoRowHeight(t),{disable:I,text:L}=s,F=(0,f.vi)(I,{col:e,row:t,table:h,context:null,value:k,dataValue:M}),H=(0,f.vi)(L,{col:e,row:t,table:h,context:null,value:k,dataValue:M}),O=null!=(u=null!=H?H:k)?u:"",D={maxLineWidth:"auto"===i?1/0:r-(l[1]+l[3]+T),textAlign:"left",textBaseline:"top",autoWrapText:E,lineClamp:P,wordBreak:"break-word",heightLimit:B?-1:n-Math.floor(l[0]+l[2]),pickable:!1,dx:T,whiteSpace:1!==O.length||E?"normal":"no-wrap"},z=o.text?Object.assign({},o.text,D):D,W={x:0,y:0,cursor:F?"not-allowed":"pointer",disable:F,childrenPickable:!1,text:1===O.length?O[0]:O,textStyle:z,padding:C,panel:{visible:!0,fill:F?w:p,stroke:F?S:m,lineWidth:b,cornerRadius:y},state:{text:{hover:{}},panel:{hover:{fill:v,stroke:_}}}};A&&(W.state.text.fill=A),x&&(W.state.text.hover.fill=x);let Z=new en.V(W);return Z.name="button",F||(Z.addEventListener("mouseenter",()=>{Z.addState("hover",!0,!1),Z.stage.renderNextFrame()}),Z.addEventListener("mouseleave",()=>{Z.removeState("hover",!1),Z.stage.renderNextFrame()})),Z}(l,o,s-X,d,u,c,_,C,v);return q&&e.appendChild(q),d-=c[1]+c[3]+X,u-=c[0]+c[2],"center"===p?q.setAttribute("x",c[3]+Y+(d-q.AABBBounds.width())/2):"right"===p?q.setAttribute("x",c[3]+Y+d-q.AABBBounds.width()):q.setAttribute("x",c[3]+Y),"middle"===b?q.setAttribute("y",c[0]+(u-q.AABBBounds.height())/2):"bottom"===b?q.setAttribute("y",c[0]+u-q.AABBBounds.height()):q.setAttribute("y",c[0]),e}let eo=()=>{r.F.registerFunction("createChartCellGroup",d),r.F.registerFunction("getAxisDomainRangeAndLabels",er)},ea=()=>{r.F.registerFunction("createCheckboxCellGroup",v)},es=()=>{r.F.registerFunction("createImageCellGroup",_.Ui)},eh=()=>{r.F.registerFunction("createProgressBarCell",q)},ed=()=>{r.F.registerFunction("createRadioCellGroup",k)},eu=()=>{r.F.registerFunction("createSwitchCellGroup",R)},ec=()=>{r.F.registerFunction("createButtonCellGroup",el)},ep=()=>{r.F.registerFunction("createSparkLineCellGroup",H)},eg=()=>{r.F.registerFunction("createTextCellGroup",Y)},ef=()=>{r.F.registerFunction("createVideoCellGroup",V)}},1028:function(e,t,i){i.d(t,{al:()=>y,j8:()=>_,rj:()=>b});var r=i(36781),n=i(39818),l=i(76352),o=i(297),a=i(54833),s=i(64776),h=i(96241),d=i(80971),u=i(95723),c=i(4654),p=i(23946),g=i(68595),f=i(26249),m=i(35759);function b(e,t,i,r){var n,l,o,a,s,h,d,u,c,p;e.internalProps.columnWidthConfig&&(c=e,p=e.internalProps.columnWidthConfig,c.isPivotTable()?function(e,t){for(let i=0;i<(null==t?void 0:t.length);i++){let r=t[i],n=r.dimensions,l=r.width,o=e.getCellAddressByHeaderPaths(n);if(o&&o.col>=e.rowHeaderLevelCount){let t=e.getCellHeaderPaths(o.col,e.columnHeaderLevelCount);if(t.colHeaderPaths.length===n.length){let i=!0;for(let e=0;e<n.length;e++){let r=n[e];if(0>t.colHeaderPaths.findIndex((e,t)=>e.indicatorKey===r.indicatorKey||e.dimensionKey===r.dimensionKey&&e.value===r.value)){i=!1;break}}i&&!e.internalProps._widthResizedColMap.has(o.col)&&(e._setColWidth(o.col,l),e.internalProps._widthResizedColMap.add(o.col))}}else o&&o.col<e.rowHeaderLevelCount&&(e.internalProps._widthResizedColMap.has(o.col)||(e._setColWidth(o.col,l),e.internalProps._widthResizedColMap.add(o.col)))}}(c,p):c.isListTable()&&function(e,t){for(let i=0;i<(null==t?void 0:t.length);i++){let r=t[i],n=r.key,l=r.width,o=e.internalProps.layoutMap.getColumnByKey(n);if(o.columnDefine){let{col:t}=o;e.internalProps._widthResizedColMap.has(t)||(e._setColWidth(t,l),e.internalProps._widthResizedColMap.add(t))}}}(c,p)),e.isPivotTable()&&e.internalProps.columnWidthConfigForRowHeader&&function(e,t){for(let i=0;i<(null==t?void 0:t.length);i++){let r=t[i],n=r.dimensions,l=r.width,o=e.getCellAddressByHeaderPaths(n);o&&o.col<e.rowHeaderLevelCount&&(e.internalProps._widthResizedColMap.has(o.col)||(e._setColWidth(o.col,l),e.internalProps._widthResizedColMap.add(o.col)))}}(e,e.internalProps.columnWidthConfigForRowHeader),t=null!=t?t:0,i=null!=i?i:e.colCount-1,0===t&&i===e.colCount-1&&e._clearColRangeWidthsMap();let g=e.internalProps.layoutMap;e.isPivotTable()&&(g.enableUseGetBodyCache(),g.enableUseHeaderPathCache());let f=[],m=[];if(r)for(let t=0;t<e.colCount;t++)f[t]=e.getColWidth(t);for(let s=t;s<=i;s++){let t;if(!e.internalProps.transpose&&("only-header"===(null==(l=null==(n=e.internalProps.layoutMap.columnObjects)?void 0:n[s])?void 0:l.columnWidthComputeMode)||"only-header"===e.columnWidthComputeMode)&&"showHeader"in e.internalProps.layoutMap){let i=e.internalProps.layoutMap.showHeader;e.internalProps.layoutMap.showHeader=!0,t=y(s,0,e.internalProps.layoutMap.headerLevelCount-1,e),e.internalProps.layoutMap.showHeader=i}else t=e.internalProps.transpose||"only-body"!==(null==(a=null==(o=e.internalProps.layoutMap.columnObjects)?void 0:o[s])?void 0:a.columnWidthComputeMode)&&"only-body"!==e.columnWidthComputeMode?y(s,0,e.rowCount-1,e):y(s,e.internalProps.layoutMap.getBodyRange().start.row,e.internalProps.layoutMap.getBodyRange().end.row,e);e._setColContentWidth(s,t),e.getColWidth(s)!==t&&e._clearColRangeWidthsMap(s),r?m[s]=Math.round(e._adjustColWidth(s,t)):e._setColWidth(s,e._adjustColWidth(s,t),!1,!0)}if("adaptive"===e.widthMode){e._clearColRangeWidthsMap();let t=e.tableNoFrameWidth,i=0,n=0,l=e.colCount;if("only-body"===e.widthAdaptiveMode){for(let t=0;t<e.colCount;t++){let n=r&&null!=(s=m[t])?s:e.getColWidth(t);(t<e.rowHeaderLevelCount||e.isPivotChart()&&t>=e.colCount-e.rightFrozenColCount)&&(i+=n)}n=e.rowHeaderLevelCount,l=e.isPivotChart()?e.colCount-e.rightFrozenColCount:e.colCount}_(t-i,n,l,r,m,e)}else if(e.autoFillWidth){e._clearColRangeWidthsMap();let t=e.tableNoFrameWidth,i=0,n=0;for(let t=0;t<e.colCount;t++){let l=r&&null!=(h=m[t])?h:e.getColWidth(t);"only-body"===e.widthAdaptiveMode&&(t<e.rowHeaderLevelCount+e.leftRowSeriesNumberCount||e.isPivotChart()&&t>=e.colCount-e.rightFrozenColCount)&&(i+=l),n+=l}if(n<t&&n>i){let n=0,l=e.colCount;"only-body"===e.widthAdaptiveMode&&(n=e.rowHeaderLevelCount+e.leftRowSeriesNumberCount,l=e.isPivotChart()?e.colCount-e.rightFrozenColCount:e.colCount),_(t-i,n,l,r,m,e)}}if(r){for(let t=0;t<e.colCount;t++){let i=null!=(u=null!=(d=m[t])?d:e.getColWidth(t))?u:e.getColWidth(t);i!==f[t]&&e._setColWidth(t,i,!1,!0)}e.stateManager.checkFrozen();for(let t=0;t<e.colCount;t++){let i=e.getColWidth(t);i!==f[t]&&e.scenegraph.updateColWidth(t,i-f[t],!0,!0)}e.scenegraph.updateContainer({async:!0})}e.isPivotTable()&&(g.disableUseGetBodyCache(),g.disableUseHeaderPathCache())}function y(e,t,i,r,n=!1){let l=function(e,t){let i=t.getColWidthDefined(e);return t.internalProps._widthResizedColMap.has(e)?t.getColWidth(e):i}(e,r);return r.internalProps.transpose&&"auto"===l&&("only-header"===r.columnWidthComputeMode&&e>=r.rowHeaderLevelCount||"only-body"===r.columnWidthComputeMode&&e<r.rowHeaderLevelCount)&&(l=r.getDefaultColumnWidth(e)),n&&!r.internalProps.transpose?v(l,e,t,i,n,r):"number"==typeof l?l:"auto"!==l&&"string"==typeof l?r._adjustColWidth(e,r._colWidthDefineToPxWidth(l)):v(l,e,t,i,n,r)}function v(e,t,i,b,y,v){var _,C,x,w,S;let A=0,k=1,M=1;if(b-i>5e3&&(M=Math.ceil((b-i)/5e3)),v.isPivotChart()&&t>=v.rowHeaderLevelCount&&t<v.colCount-v.rightFrozenColCount){if(v.internalProps.layoutMap.indicatorsAsCol)return v.defaultColWidth;{let e=!1;"heatmap"===v.internalProps.layoutMap.getChartSpec(t,v.columnHeaderLevelCount).type&&(e=!0);let i=v.internalProps.layoutMap.getOptimunWidthForChart(t,e);if(i>0)return i}}for(let T=i;T<=b;T+=k){if(v.isPivotChart()){let e=v.internalProps.layoutMap,i=e.getAxisConfigInPivotChart(t,T);if(i){let e=a.F.getFunction("computeAxisComponentWidth")(i,v);if("number"==typeof e){A=Math.max(e,A);continue}}else if(e.isLeftBottomCorner(t,T)||e.isRightTopCorner(t,T)||e.isRightBottomCorner(t,T)||e.isAxisCell(t,T))continue}let i=function(e,t,i){var r,n,a,s,d,u,c,g,m,b;let y=i.getCustomRender(e,t),v=i.getCustomLayout(e,t);if(y||v){let _,C=1,x=0,w=!1,S=!1;(i.isHeader(e,t)||(null==(r=i.getBodyColumnDefine(e,t))?void 0:r.mergeCell)||i.hasCustomMerge())&&(C=(_=i.getCellRange(e,t)).end.col-_.start.col+1);let A={col:null!=(n=null==_?void 0:_.start.col)?n:e,row:null!=(a=null==_?void 0:_.start.row)?a:t,dataValue:i.getCellOriginValue(e,t),value:i.getCellValue(e,t)||"",rect:(g=e,m=t,{left:0,top:0,right:(b=i).getColWidth(g),bottom:b.getRowHeight(m),width:null,height:null}),table:i,originCol:e,originRow:t,forComputation:!0};if("react-custom-layout"===v&&(v=(null==(s=i.reactCustomLayout)?void 0:s.getCustomLayoutFunc(e,t))||f.D),(0,h.Z)(v)){let e=v(A);if(e.rootContainer){e.rootContainer=(0,p.nH)(e.rootContainer),(0,p.Jp)(e.rootContainer,0,i.getRowHeight(t));let r=e.rootContainer.attribute.width;e.rootContainer.setStage(i.scenegraph.stage),x=r>0?r:null!=(d=e.rootContainer.AABBBounds.width())?d:0,w=e.renderDefault,S=e.enableCellPadding}else x=0,w=e.renderDefault,S=e.enableCellPadding}else if("function"==typeof y){let e=y(A);x=null!=(u=null==e?void 0:e.expectedWidth)?u:0,w=null==e?void 0:e.renderDefault}else x=null!=(c=null==y?void 0:y.expectedWidth)?c:0,w=null==y?void 0:y.renderDefault;if(x=Math.ceil(x),S){let r=i._getCellStyle(e,t),n=(0,l.u)((0,o.WJ)("padding",r,e,t,i));x+=n[1]+n[3]}return{width:x/C,renderDefault:w}}}(t,T,v);if(i&&(A=Math.max(i.width,A),!i.renderDefault))continue;if("number"==typeof e&&"standard"===v.widthMode&&!y){A=Math.max(e,A);continue}let b=v.isHeader(t,T)?null==(_=v._getHeaderLayoutMap(t,T))?void 0:_.headerType:v.getBodyColumnType(t,T);if((0,s.Z)(b)&&"text"!==b&&"link"!==b&&"progressbar"!==b&&"checkbox"!==b&&"radio"!==b&&"switch"!==b&&"button"!==b){A=Math.max(A,v.getColWidthDefinedNumber(t)||0);continue}let R=0,E=v.internalProps.layoutMap;if(E.isHeader(t,T)){let e=E.getHeader(t,T);if("only-body"===(null==(C=null==e?void 0:e.define)?void 0:C.columnWidthComputeMode))continue;(0,s.Z)(null==e?void 0:e.hierarchyLevel)&&(R=(null!=(x=e.hierarchyLevel)?x:0)*("tree"===E.rowHierarchyType&&null!=(w=E.rowHierarchyIndent)?w:0),E.rowHierarchyTextStartAlignment&&!v.internalProps.headerHelper.getHierarchyIcon(t,T)&&(R+=v.internalProps.headerHelper.getHierarchyIconWidth()))}else if(v.isListTable()){k=M;let e=v.getBodyColumnDefine(t,T);if(null==e?void 0:e.tree){let e=v.dataSource.getIndexKey(v.getRecordShowIndexByCell(t,T));R=Array.isArray(e)&&v.getHierarchyState(t,T)!==r.g.none?(e.length-1)*(null!=(S=E.hierarchyIndent)?S:0):0,E.hierarchyTextStartAlignment&&!v.internalProps.bodyHelper.getHierarchyIcon(t,T)&&(R+=v.internalProps.headerHelper.getHierarchyIconWidth())}}A=Math.max(function(e,t,i,r){var a,s,h,p;let f,b=0,y=r.getCellValue(e,t),v=r._getCellStyle(e,t),_=0,C=!1;if("body"!==r.getCellLocation(e,t))C=!0;else{let i=r.getBodyColumnDefine(e,t);C=!!(null==i?void 0:i.icon)||!!(null==i?void 0:i.tree)||(null==i?void 0:i.dragOrder)}if(C){let i=r.getCellIcons(e,t);null==i||i.forEach(e=>{var t,i,r;e.positionType!==n.q0.absoluteRight&&(_+=(null!=(t=e.width)?t:0)+(null!=(i=e.marginLeft)?i:0)+(null!=(r=e.marginRight)?r:0))})}let x=1;if(r.isHeader(e,t)||(null==(a=r.getBodyColumnDefine(e,t))?void 0:a.mergeCell)||r.hasCustomMerge()){let i=r.getCellRange(e,t);x=i.end.col-i.start.col+1}let w=(0,l.u)((0,o.WJ)("padding",v,e,t,r)),S=w[1]+w[3],A=(0,o.WJ)("fontSize",v,e,t,r),k=(0,o.WJ)("fontFamily",v,e,t,r),M=(0,o.WJ)("fontWeight",v,e,t,r);if("checkbox"===i)f=(0,d.Z)(y)?y.text:y;else if("radio"===i)if((0,u.Z)(y)){f="";let i=r.getBodyColumnDefine(e,t),n=null!=(s=null==i?void 0:i.radioDirectionInCell)?s:"vertical";"vertical"===n?y.forEach(e=>{f+=((0,d.Z)(e)?e.text:e).toString()+"\n"}):"horizontal"===n&&y.forEach(e=>{f+=((0,d.Z)(e)?e.text:e).toString()})}else f=(0,d.Z)(y)?y.text:y;else if("button"===i){let i=r.getBodyColumnDefine(e,t),n=(0,m.vi)(i.text,{col:e,row:t,table:r,context:null,value:y,dataValue:r.getCellOriginValue(e,t)});f=null!=(h=null!=n?n:y)?h:""}else f=y;let T=(0,g.$)(f,r).text;if(T.length>=1&&(1!==T.length||""!==T[0])?T.forEach(e=>{b=Math.max((r.measureText(e,{fontSize:A,fontFamily:k,fontWeight:M}).width+S+4+_)/x,b)}):b=Math.max((S+4+_)/x,b),!1!==r.internalProps.limitMaxAutoWidth&&(b=Math.min("number"==typeof r.internalProps.limitMaxAutoWidth?r.internalProps.limitMaxAutoWidth:450,b)),"checkbox"===i){let i=(0,o.WJ)("size",v,e,t,r);if(b+=i,f){let i=(0,o.WJ)("spaceBetweenTextAndIcon",v,e,t,r);b+=i}}else if("radio"===i){let i=(0,o.WJ)("size",v,e,t,r),n=(0,o.WJ)("outerRadius",v,e,t,r),l=(0,c.Z)(n)?2*n:i,a=(0,o.WJ)("spaceBetweenTextAndIcon",v,e,t,r);if((0,u.Z)(y)){let i=r.getBodyColumnDefine(e,t),n=(0,o.WJ)("spaceBetweenRadio",v,e,t,r),s=null!=(p=null==i?void 0:i.radioDirectionInCell)?p:"vertical";"vertical"===s?(b+=l,b+=a):"horizontal"===s&&(b+=(l+a)*y.length,b+=n*(y.length-1))}else b+=l,f&&(b+=a)}else if("switch"===i)b=(0,o.WJ)("boxWidth",v,e,t,r);else if("button"===i){let i=(0,o.WJ)("buttonPadding",v,e,t,r);b+=2*i}return b}(t,T,b,v)+R,A),k>1&&v.bottomFrozenRowCount>0&&T<v.rowCount-v.bottomFrozenRowCount&&T+k>=v.rowCount-v.bottomFrozenRowCount&&(T=v.rowCount-v.bottomFrozenRowCount-k,k=1,M=1)}let T=v.getMinColWidth(t),R=v.getMaxColWidth(t);return A<T?T:A>R?R:(A<=0&&(A=v.defaultColWidth),A)}function _(e,t,i,r,n,l,o){var a,s,h,d;let u=0,c=[],p=[],g=0,f=new Map,m=new Map;for(let e=t;e<i;e++){let t=r&&null!=(a=n[e])?a:l.getColWidth(e),i=l.getMaxColWidth(e),o=l.getMinColWidth(e);u+=t,c.push(e),i===t?f.set(e,t):o===t&&m.set(e,t),(null==(s=l.options.customConfig)?void 0:s.shrinkSparklineFirst)&&"sparkline"===l.getBodyColumnType(e,0)&&(p.push({col:e,width:t}),g+=t-l.defaultColWidth)}if(u>e)for(let[t,i]of m){e-=i,u-=i;let r=c.indexOf(t);-1!==r&&c.splice(r,1)}else if(u<e)for(let[t,i]of f){e-=i,u-=i;let r=c.indexOf(t);-1!==r&&c.splice(r,1)}let b=e/u;if((null==(h=l.options.customConfig)?void 0:h.shrinkSparklineFirst)&&b<1&&u-e<g)for(let t=0;t<p.length;t++){let{col:i,width:a}=p[t],s=Math.floor(a-(u-e)/p.length);r?n[i]=l._adjustColWidth(i,s):o?l.scenegraph.setColWidth(i,l._adjustColWidth(i,s)):l._setColWidth(i,l._adjustColWidth(i,s),!1,!0)}else for(let t=0;t<c.length;t++){let i,a=c[t];i=t===c.length-1?e-c.reduce((e,t,i)=>{var o;return t!==a?e+(r?null!=(o=n[t])?o:l.getColWidth(a):l.getColWidth(t)):e},0):Math.round((r&&null!=(d=n[a])?d:l.getColWidth(a))*b),r?n[a]=l._adjustColWidth(a,i):o?l.scenegraph.setColWidth(a,l._adjustColWidth(a,i)):l._setColWidth(a,l._adjustColWidth(a,i),!1,!0)}}},43624:function(e,t,i){i.d(t,{P:()=>E,Y:()=>R});var r=i(47634),n=i(39818),l=i(297),o=i(76352),a=i(89883),s=i(54833),h=i(95723),d=i(64776),u=i(4654),c=i(96241),p=i(23946),g=i(27594),f=i(48523),m=i(80971),b=i(75665),y=i(43064),v=i(36637),_=i(59417);let C=new y.J({}),x=new v.Y({}),w=new _.V({});function S(e,t,i,r,n,o,a,s,h,d,c,p,g,f,y){let v=(0,m.Z)(e)?e.text:e,_=(0,b.cw)(v).split("\n")||[],C=y.getColsWidth(t,r),w=(0,l.WJ)("size",n,t,i,y),S=(0,l.WJ)("outerRadius",n,t,i,y),A=(0,u.Z)(S)?2*S:w,k=0;if(o){let e=(0,l.WJ)("spaceBetweenTextAndIcon",n,t,i,y),r=C-(f[1]+f[3])-a-A-e;(0,u.Z)(S)||(S=Math.round(w/2)),x.setAttributes({text:{maxLineWidth:r,text:_,fontSize:s,fontStyle:h,fontWeight:d,fontFamily:c,lineHeight:p,wordBreak:"break-word",lineClamp:g},circle:{outerRadius:S},spaceBetweenTextAndIcon:e}),x.render(),k=x.AABBBounds.height()}else k=Math.max(w,_.length*p);return k}var A=i(8429),k=i(68595),M=i(26249);let T=new r.H({width:0,height:0,textConfig:[]});function R(e,t,i,r=!0,n){var l,o,a,s,u,c,p,f,m,b,y;let v=[],_=[];if(n)for(let r=t;r<=i;r++)v[r]=e.getRowHeight(r);let C=e.internalProps.layoutMap;e.isPivotTable()&&(C.enableUseGetBodyCache(),C.enableUseHeaderPathCache()),e.defaultHeaderRowHeight,e.defaultHeaderColWidth;let x="auto"===e.defaultHeaderRowHeight||(0,h.Z)(e.defaultHeaderRowHeight)&&e.defaultHeaderRowHeight.some(e=>"auto"===e),w=e.isAutoRowHeight(t)||"adaptive"===e.heightMode&&!1!==e.options.autoHeightInAdaptiveMode,S="auto"===e.options.defaultRowHeight;if(w||x||S){t=null!=t?t:0,i=null!=i?i:e.rowCount-1,(0===t&&i===e.rowCount-1||r)&&e._clearRowRangeHeightsMap();for(let i=t;i<e.columnHeaderLevelCount;i++){let t=0,r=e.colCount-1;if((e.isPivotTable()&&!e.isPivotChart()||e.isPivotChart()&&!e.internalProps.layoutMap.indicatorsAsCol)&&function(e,t){var i,r,n;let{layoutMap:l}=e.internalProps;if(e.internalProps.autoWrapText&&(e.isAutoRowHeight(t)||"adaptive"===e.options.heightMode))return!1;let o=l.getHeader(e.rowHeaderLevelCount,t);if("function"==typeof o.style||"function"==typeof o.icons||(null==(i=o.define)?void 0:i.headerCustomRender)||(null==(r=o.define)?void 0:r.headerCustomLayout)||"function"==typeof(null==(n=o.define)?void 0:n.icon))return!1;let a=e._getCellStyle(e.rowHeaderLevelCount,t);return"function"!=typeof a.padding&&"function"!=typeof a.fontSize&&"function"!=typeof a.lineHeight&&!0!==a.autoWrapText}(e,i)&&!(0,g.Z)(e,e.rowHeaderLevelCount,i)&&(t=0,r=e.rowHeaderLevelCount),w||"auto"===e.getDefaultRowHeight(i)){let l=E(i,t,r,e);_[i]=Math.round(l),"only-body"!==e.heightAdaptiveMode&&n||e._setRowHeight(i,l)}}for(let t=e.rowCount-e.bottomFrozenRowCount;t<=i;t++)if(w||"auto"===e.getDefaultRowHeight(t)){let i=E(t,0,e.colCount-1,e);n?_[t]=Math.round(i):e._setRowHeight(t,i)}if(!(i<e.columnHeaderLevelCount)&&(w||S))if(e.internalProps.transpose||e.isPivotTable()&&!e.internalProps.layoutMap.indicatorsAsCol||e.options.customComputeRowHeight||e.options.rowHeightConfig||!function(e,t){var i,r,n;let{layoutMap:l}=e.internalProps,o=e.columnHeaderLevelCount;if((e.internalProps.autoWrapText||e.internalProps.enableLineBreak||e.isPivotChart())&&(e.isAutoRowHeight(t)||"adaptive"===e.options.heightMode))return!1;for(let t=0;t<e.colCount;t++){let a=l.getBody(t,o);if("radio"===a.cellType||"function"==typeof a.style||"function"==typeof a.icon||(null==(i=a.define)?void 0:i.customRender)||(null==(r=a.define)?void 0:r.customLayout)||"function"==typeof(null==(n=a.define)?void 0:n.icon))return!1;let s=e._getCellStyle(t,o);if("function"==typeof s.padding||"function"==typeof s.fontSize||"function"==typeof s.lineHeight||!0===s.autoWrapText)return!1}return!0}(e,t))if(e.internalProps.transpose||e.isPivotTable()&&!e.internalProps.layoutMap.indicatorsAsCol)for(let r=Math.max(t,e.columnHeaderLevelCount);r<=i;r++){let t;t=!function(e,t){var i,r,n;let{layoutMap:l}=e.internalProps;if((e.internalProps.autoWrapText||e.internalProps.enableLineBreak)&&(e.isAutoRowHeight(t)||"adaptive"===e.options.heightMode))return!1;let o=l.getBody(e.rowHeaderLevelCount,t);if("function"==typeof o.style||"function"==typeof o.icon||(null==(i=o.define)?void 0:i.customRender)||(null==(r=o.define)?void 0:r.customLayout)||"function"==typeof(null==(n=o.define)?void 0:n.icon))return!1;let a=e._getCellStyle(e.rowHeaderLevelCount,t);return"function"!=typeof a.padding&&"function"!=typeof a.fontSize&&"function"!=typeof a.lineHeight&&!0!==a.autoWrapText}(e,r)?E(r,0,e.colCount-1,e):E(r,0,e.rowHeaderLevelCount,e),n?_[r]=Math.round(t):e._setRowHeight(r,t)}else for(let r=Math.max(t,e.columnHeaderLevelCount);r<=i;r++){let t=E(r,0,e.colCount-1,e);n?_[r]=Math.round(t):e._setRowHeight(r,t)}else{!function(e,t,i,r,n){if(!r.internalProps.useOneRowHeightFillAll){for(let l=t;l<=i;l++)n?n[l]=e:r._setRowHeight(l,e);r.internalProps.useOneRowHeightFillAll=!0}}(E(e.columnHeaderLevelCount,0,e.colCount-1,e),e.columnHeaderLevelCount,e.rowCount-1-e.bottomFrozenRowCount,e,n?_:void 0);for(let t=e.rowCount-e.bottomFrozenRowCount;t<=i;t++){let i=E(t,0,e.colCount-1,e);n?_[t]=Math.round(i):e._setRowHeight(t,i)}}}else if(("adaptive"===e.heightMode||e.autoFillHeight)&&e.clearRowHeightCache(),n)for(let r=t;r<=i;r++)_[r]=e.getRowHeight(r);if((0===t&&i===e.rowCount-1||r)&&e._clearRowRangeHeightsMap(),"adaptive"===e.heightMode){e._clearRowRangeHeightsMap();let t=e.tableNoFrameHeight,i=0,r=e.rowCount;if("only-body"===e.heightAdaptiveMode){let n=e.getRowsHeight(0,e.columnHeaderLevelCount-1),l=e.isPivotChart()?e.getBottomFrozenRowsHeight():0;t=e.tableNoFrameHeight-n-l,i=e.columnHeaderLevelCount,r=e.isPivotChart()?e.rowCount-e.bottomFrozenRowCount:e.rowCount}let a=0;for(let t=i;t<r;t++)a+=n&&null!=(l=_[t])?l:e.getRowHeight(t);let s=t/a;for(let l=i;l<r;l++){let a;a=l===r-1?t-(n?_.reduce((e,t,n)=>n>=i&&n<=r-2?e+t:e,0):e.getRowsHeight(i,r-2)):Math.round((n&&null!=(o=_[l])?o:e.getRowHeight(l))*s),n?_[l]=a:e._setRowHeight(l,a,!1)}}else if(e.autoFillHeight){e._clearRowRangeHeightsMap();let t=e.tableNoFrameHeight,i=0,r=0;for(let t=0;t<e.rowCount;t++){let l=n&&null!=(a=_[t])?a:e.getRowHeight(t);(t<e.columnHeaderLevelCount||e.isPivotChart()&&t>=e.rowCount-e.bottomFrozenRowCount)&&(r+=l),i+=l}if(e.scenegraph._dealAutoFillHeightOriginRowsHeight=i,i<t&&i-r>0){let l=e.columnHeaderLevelCount,o=e.isPivotChart()?e.rowCount-e.bottomFrozenRowCount:e.rowCount,a=(t-r)/(i-r);for(let i=l;i<o;i++){let h;h=i===o-1?t-r-(n?_.reduce((e,t,i)=>i>=l&&i<=o-2?e+t:e,0):e.getRowsHeight(l,o-2)):Math.round((n&&null!=(s=_[i])?s:e.getRowHeight(i))*a),n?_[i]=h:e._setRowHeight(i,h,!1)}}}if(n){for(let r=t;r<=i;r++){let t=null!=(u=_[r])?u:e.getRowHeight(r);(0,d.Z)(t)&&e._setRowHeight(r,t)}for(let t=0;t<=e.frozenRowCount-1;t++){let i=e.getRowHeight(t);i!==(null!=(c=v[t])?c:e.getRowHeight(t))&&e.scenegraph.updateRowHeight(t,i-(null!=(p=v[t])?p:e.getRowHeight(t)),!0)}for(let t=e.rowCount-e.bottomFrozenRowCount;t<=e.rowCount-1;t++){let i=e.getRowHeight(t);i!==(null!=(f=v[t])?f:e.getRowHeight(t))&&e.scenegraph.updateRowHeight(t,i-(null!=(m=v[t])?m:e.getRowHeight(t)),!0)}for(let t=e.scenegraph.proxy.rowStart;t<=e.scenegraph.proxy.rowEnd;t++){let i=e.getRowHeight(t);i!==(null!=(b=v[t])?b:e.getRowHeight(t))&&e.scenegraph.updateRowHeight(t,i-(null!=(y=v[t])?y:e.getRowHeight(t)),!0)}}e.isPivotTable()&&(C.disableUseGetBodyCache(),C.disableUseHeaderPathCache())}function E(e,t,i,r){var g;let y;if(!(r.isAutoRowHeight(e)||"adaptive"===r.heightMode&&!1!==r.options.autoHeightInAdaptiveMode)&&"auto"!==r.getDefaultRowHeight(e))return r.getDefaultRowHeight(e);if(r.options.customComputeRowHeight){let t=r.options.customComputeRowHeight({row:e,table:r});if("number"==typeof t)return t;if("auto"!==t)return r.getDefaultRowHeight(e)}if(r.internalProps.rowHeightConfig){let t=r.internalProps.rowHeightConfig.find(t=>t.key===e);if(t)return r.internalProps._heightResizedRowMap.has(e)||(r._setRowHeight(e,t.height),r.internalProps._heightResizedRowMap.add(e)),t.height}if(r.isPivotChart()&&e>=r.columnHeaderLevelCount&&e<r.rowCount-r.bottomFrozenRowCount){let t=r.internalProps.layoutMap.indicatorsAsCol,i=!1;if(r.internalProps.layoutMap.indicatorsAsCol||"heatmap"!==r.internalProps.layoutMap.getChartSpec(r.rowHeaderLevelCount,e).type||(i=!0,t=!0),t){let t=r.internalProps.layoutMap.getOptimunHeightForChart(e,i);if(t>0)return t}else{let t=r.getDefaultRowHeight(e);if((0,u.Z)(t))return t}}for(let u=t;u<=i;u++){let t=function(e,t,i){var r,n,a,s,h,d,u,g,f,m;let b=i.getCustomRender(e,t),y=i.getCustomLayout(e,t);if(b||y){let v,_=1,C=0,x=!1,w=!1;(i.isHeader(e,t)||(null==(r=i.getBodyColumnDefine(e,t))?void 0:r.mergeCell)||i.hasCustomMerge())&&(_=(v=i.getCellRange(e,t)).end.row-v.start.row+1);let S={col:null!=(n=null==v?void 0:v.start.col)?n:e,row:null!=(a=null==v?void 0:v.start.row)?a:t,dataValue:i.getCellOriginValue(e,t),value:i.getCellValue(e,t)||"",rect:(g=e,f=t,{left:0,top:0,right:(m=i).getColWidth(g),bottom:m.getRowHeight(f),width:m.getColWidth(g),height:0}),table:i,originCol:e,originRow:t,forComputation:!0};if("react-custom-layout"===y&&(y=(null==(s=i.reactCustomLayout)?void 0:s.getCustomLayoutFunc(e,t))||M.D),(0,c.Z)(y)){let t=y(S);t.rootContainer?(t.rootContainer=(0,p.nH)(t.rootContainer),(0,p.Jp)(t.rootContainer,i.getColWidth(e),0),t.rootContainer.setStage(i.scenegraph.stage),C=null!=(h=t.rootContainer.AABBBounds.height())?h:0):C=0,x=t.renderDefault,w=t.enableCellPadding}else if("function"==typeof b){let e=b(S);C=null!=(d=null==e?void 0:e.expectedHeight)?d:0,x=null==e?void 0:e.renderDefault}else C=null!=(u=null==b?void 0:b.expectedHeight)?u:0,x=null==b?void 0:b.renderDefault;if(w){let r=i._getCellStyle(e,t),n=(0,o.u)((0,l.WJ)("padding",r,e,t,i));C+=n[0]+n[2]}return{height:C/_,renderDefault:x}}}(u,e,r);if(t&&(y=(0,d.Z)(y)?Math.max(t.height,y):t.height,!t.renderDefault))continue;if(r.isPivotChart()){let t=r.internalProps.layoutMap.getAxisConfigInPivotChart(u,e);if(t){let e=s.F.getFunction("computeAxisComponentHeight")(t,r);if("number"==typeof e){y=(0,d.Z)(y)?Math.max(e,y):e;continue}}}if(r.isPivotChart()&&(r.isLeftFrozenColumn(u)&&r.isBottomFrozenRow(e)||r.isRightFrozenColumn(u)&&r.isBottomFrozenRow(e)))continue;let i=r.isHeader(u,e)?null==(g=r._getHeaderLayoutMap(u,e))?void 0:g.headerType:r.getBodyColumnType(u,e),v=function(e,t,i,r){var s,d,u,c,p;let g=0,y=r.getCellValue(e,t),v=r._getCellStyle(e,t),_=0,M=0,R=[],E=0,P=[],B=0,I=!1;if("body"!==r.getCellLocation(e,t))I=!0;else{let i=r.getBodyColumnDefine(e,t);I=!!(null==i?void 0:i.icon)||!!(null==i?void 0:i.tree)||(null==i?void 0:i.dragOrder)}if(I){let i=r.getCellIcons(e,t);null==i||i.forEach(e=>{var t,i,r,l,o,a,s,h,d,u;e.positionType!==n.q0.absoluteRight&&e.positionType!==n.q0.inlineFront&&e.positionType!==n.q0.inlineEnd?(M+=(null!=(t=e.width)?t:0)+(null!=(i=e.marginLeft)?i:0)+(null!=(r=e.marginRight)?r:0),_=Math.max(_,null!=(l=e.height)?l:0)):e.positionType===n.q0.inlineFront?(R.push(e),E=Math.max(E,(null!=(o=e.height)?o:0)+(null!=(a=e.marginLeft)?a:0)+(null!=(s=e.marginRight)?s:0))):e.positionType===n.q0.inlineEnd&&(P.push(e),B=Math.max(B,(null!=(h=e.height)?h:0)+(null!=(d=e.marginLeft)?d:0)+(null!=(u=e.marginRight)?u:0)))})}let L=1,F=e;if(r.isHeader(e,t)||(null==(s=r.getBodyColumnDefine(e,t))?void 0:s.mergeCell)||r.hasCustomMerge()){let i=r.getCellRange(e,t);L=i.end.row-i.start.row+1,e=i.start.col,F=i.end.col}let H=(0,o.u)((0,l.WJ)("padding",v,e,t,r)),O=(0,l.WJ)("fontSize",v,e,t,r),D=(0,l.WJ)("fontStyle",v,e,t,r),z=(0,l.WJ)("fontWeight",v,e,t,r),W=null!=(d=(0,l.WJ)("lineHeight",v,e,t,r))?d:O,Z=(0,l.WJ)("fontFamily",v,e,t,r),N=(0,l.WJ)("autoWrapText",v,e,t,r),$=(0,l.WJ)("lineClamp",v,e,t,r),j=(0,l.WJ)("underline",v,e,t,r),G=null!=(u=(0,l.WJ)("underlineOffset",v,e,t,r))?u:0;if("text"!==i&&"link"!==i&&"progressbar"!==i&&"checkbox"!==i&&"radio"!==i&&"switch"!==i&&"button"!==i)g=W;else if("checkbox"===i)g=function(e,t,i,r,n,o,a,s,h,d,u,c,p,g,f){let y=(0,m.Z)(e)?e.text:e,v=(0,b.cw)(y).split("\n")||[],_=f.getColsWidth(t,r),x=(0,l.WJ)("size",n,t,i,f),w=0;if(o){let e=(0,l.WJ)("spaceBetweenTextAndIcon",n,t,i,f),r=_-(g[1]+g[3])-a-x-e;C.setAttributes({text:{maxLineWidth:r,text:v,fontSize:s,fontStyle:h,fontWeight:d,fontFamily:u,lineHeight:c,wordBreak:"break-word",lineClamp:p},icon:{width:Math.floor(x/1.4),height:Math.floor(x/1.4)},box:{width:x,height:x},spaceBetweenTextAndIcon:e}),C.render(),w=C.AABBBounds.height()}else w=Math.max(x,v.length*c);return w}(y,e,t,F,v,N,M,O,D,z,Z,W,$,H,r);else if("radio"===i)g=function(e,t,i,r,n,o,a,s,d,u,c,p,g,f,m){var b;if((0,h.Z)(e)){let h=0,y=m.getBodyColumnDefine(t,i),v=(0,l.WJ)("spaceBetweenRadio",n,t,i,m),_=null!=(b=null==y?void 0:y.radioDirectionInCell)?b:"vertical";return"vertical"===_?e.forEach((l,b)=>{let y=S(l,t,i,r,n,o,a,s,d,u,c,p,g,f,m);h+=y,b!==e.length-1&&(h+=v)}):"horizontal"===_&&e.forEach(e=>{h=Math.max(S(e,t,i,r,n,o,a,s,d,u,c,p,g,f,m),h)}),h}return S(e,t,i,r,n,o,a,s,d,u,c,p,g,f,m)}(y,e,t,F,v,N,M,O,D,z,Z,W,$,H,r);else if("switch"===i)p=e,g=(0,l.WJ)("boxWidth",v,p,t,r);else if("button"===i)g=function(e,t,i,r,n,o,a,s,h,d,u,c,p,g,f){let y=(0,m.Z)(e)?e.text:e,v=(0,b.cw)(y).split("\n")||[],_=f.getColsWidth(t,r),C=(0,l.WJ)("buttonPadding",n,t,i,f),S=(0,l.WJ)("buttonLineWidth",n,t,i,f),A=0;if(o){let e=_-(g[1]+g[3]);w.setAttributes({text:v,textStyle:{maxLineWidth:e,fontSize:s,fontStyle:h,fontWeight:d,fontFamily:u,lineHeight:c,wordBreak:"break-word",lineClamp:p},padding:C,panel:{visible:!0,fill:"red",stroke:"red",lineWidth:S}}),x.render(),A=x.AABBBounds.height()}else A=v.length*c+2*C;return A}(y,e,t,F,v,N,0,O,D,z,Z,W,$,H,r);else{let i=(0,k.$)(y,r).text,n=r.getColsWidth(e,F);if(R.length||P.length)if(N){let e=Object.assign({text:null==y?void 0:y.toString(),fontFamily:Z,fontSize:O,fontStyle:D,fontWeight:z,lineHeight:W});e.textBaseline="middle";let t=[...R.map(e=>(0,a.vQ)(e)),e,...P.map(e=>(0,a.vQ)(e))];T.setAttributes({width:n-(H[1]+H[3])-M,height:0,textConfig:t}),g=T.AABBBounds.height()}else g=0,i.forEach((e,t)=>{var n;(null==(n=r.options.customConfig)?void 0:n.multilinesForXTable)&&0!==t||(0===t&&R.length?g+=Math.max(W,E):t===i.length-1&&P.length?g+=Math.max(W,B):g+=W)});else if(N){let l=(0,f.L)(e,t,r),o=n-(H[1]+H[3])-M-l;g=((0,A.Rc)({maxLineWidth:o,text:i,fontSize:O,fontStyle:D,fontWeight:z,fontFamily:Z,lineHeight:W,wordBreak:"break-word",whiteSpace:1!==i.length||N?"normal":"no-wrap",lineClamp:$}).height()||("number"==typeof W?W:O))+(j?G:0)}else g=(null==(c=r.options.customConfig)?void 0:c.multilinesForXTable)?W:i.length*W}return(Math.max(g,_)+H[0]+H[2])/L}(u,e,i,r);y=(0,d.Z)(y)?Math.max(v,y):v}if((0,d.Z)(y))return y;let v=r.getDefaultRowHeight(e);return(0,u.Z)(v)?v:r.defaultRowHeight}},57426:function(e,t,i){i.d(t,{KP:()=>d,RW:()=>h,kl:()=>s,s8:()=>c,s9:()=>a,zO:()=>u});var r=i(75133),n=i(54833),l=i(76352),o=i(297);function a(e,t){let{table:i}=e,r=i.internalProps.layoutMap,n=-1===t?"all":i.internalProps.columnResizeType;if("column"===n){let r=e.getColGroup(t),n=e.getColGroup(t,!0),l=e.getColGroupInBottom(t,!0);if(null==r||r.forEachChildren(e=>{g(e,i.getColWidth(e.col),i.getRowHeight(e.row))}),null==n||n.forEachChildren(e=>{g(e,i.getColWidth(e.col),i.getRowHeight(e.row))}),null==l||l.forEachChildren(e=>{g(e,i.getColWidth(e.col),i.getRowHeight(e.row))}),"adaptive"===i.widthMode&&t<i.colCount-1){let r=e.getColGroup(t+1),n=e.getColGroup(t+1,!0),l=e.getColGroupInBottom(t+1,!0);null==r||r.forEachChildren(e=>{g(e,i.getColWidth(e.col),i.getRowHeight(e.row))}),null==n||n.forEachChildren(e=>{g(e,i.getColWidth(e.col),i.getRowHeight(e.row))}),null==l||l.forEachChildren(e=>{g(e,i.getColWidth(e.col),i.getRowHeight(e.row))})}}else{let l,o,a,s=i.rowHeaderLevelCount,h=i.colCount-1;if("indicator"===n)if(r.indicatorsAsCol)l=r.getIndicatorKey(t,i.columnHeaderLevelCount);else{let e=r.getCellHeaderPaths(t,i.columnHeaderLevelCount-1),n=e.colHeaderPaths[e.colHeaderPaths.length-1];o=n.dimensionKey,a=n.value}else if("indicatorGroup"===n){let e=i.internalProps.layoutMap,t=e.getCellHeaderPaths(i.stateManager.columnResize.col,i.columnHeaderLevelCount),r=e.getHeadNodeByRowOrColDimensions(t.colHeaderPaths.slice(0,t.colHeaderPaths.length-1));s=r.startInTotal+i.frozenColCount,h=r.startInTotal+i.frozenColCount+r.size-1}for(let t=s;t<=h;t++){let s=e.getColGroup(t),h=e.getColGroup(t,!0),d=e.getColGroupInBottom(t,!0);if(s){if("indicator"===n){let e=r.getIndicatorKey(t,i.columnHeaderLevelCount);if(r.indicatorsAsCol&&e!==l)continue;if(!r.indicatorsAsCol){let e=r.getCellHeaderPaths(t,i.columnHeaderLevelCount-1),n=null==e?void 0:e.colHeaderPaths[e.colHeaderPaths.length-1];if(!n||o!==n.dimensionKey||a!==n.value)continue}}s.forEachChildren(e=>{g(e,i.getColWidth(e.col),i.getRowHeight(e.row))}),null==h||h.forEachChildren(e=>{g(e,i.getColWidth(e.col),i.getRowHeight(e.row))}),null==d||d.forEachChildren(e=>{g(e,i.getColWidth(e.col),i.getRowHeight(e.row))})}}}}function s(e,t){var i;let{table:r}=e,n=r.internalProps.layoutMap,l=r.stateManager,o=-1===t?"all":r.internalProps.rowResizeType,a,s,h,d=r.columnHeaderLevelCount,u=r.rowCount-1;if("indicator"===o)if(n.indicatorsAsCol){let e=n.getCellHeaderPaths(r.rowHeaderLevelCount-1,t),l=null==(i=e.rowHeaderPaths)?void 0:i[e.rowHeaderPaths.length-1];s=null==l?void 0:l.dimensionKey,h=null==l?void 0:l.value}else a=n.getIndicatorKey(r.rowHeaderLevelCount,t);else if("indicatorGroup"===o){let e=r.internalProps.layoutMap,i=e.getCellHeaderPaths(r.rowHeaderLevelCount,t),n=e.getHeadNodeByRowOrColDimensions(i.rowHeaderPaths.slice(0,i.rowHeaderPaths.length-1));d=n.startInTotal+r.frozenRowCount,u=n.startInTotal+r.frozenRowCount+n.size-1}let c=[{startCol:e.proxy.colStart,endCol:e.proxy.colEnd}];r.frozenColCount&&c.push({startCol:0,endCol:r.frozenColCount-1}),r.rightFrozenColCount&&c.push({startCol:r.colCount-r.rightFrozenColCount,endCol:r.colCount-1}),c.forEach(({startCol:i,endCol:c})=>{for(let p=i;p<=c;p++)if("row"===o){let i=e.highPerformanceGetCell(p,t);if("cell"!==i.role)continue;if(g(i,r.getColWidth(i.col),r.getRowHeight(i.row)),"adaptive"===r.heightMode&&t<r.rowCount-1){let i=e.highPerformanceGetCell(p,t+1);g(i,r.getColWidth(i.col),r.getRowHeight(i.row))}}else for(let t=d;t<=u;t++){if("indicator"===o){let e=n.getIndicatorKey(l.table.rowHeaderLevelCount,t);if(!n.indicatorsAsCol&&e!==a)continue;if(n.indicatorsAsCol){let e=n.getCellHeaderPaths(l.table.rowHeaderLevelCount-1,t),i=null==e?void 0:e.rowHeaderPaths[e.rowHeaderPaths.length-1];if(!i||s!==i.dimensionKey||h!==i.value)continue}}let i=e.highPerformanceGetCell(p,t);"cell"===i.role&&g(i,r.getColWidth(i.col),r.getRowHeight(i.row))}})}function h(e){var t;for(let i=e.proxy.colStart;i<=e.proxy.colEnd;i++){let r=e.getColGroup(i);null==(t=null==r?void 0:r.getChildren())||t.forEach(e=>{e.children.forEach(e=>{"chart"===e.type&&(e.cacheCanvas=null,e.addUpdateBoundTag())})})}}function d(e,t,i){i.getCell(e,t).children.forEach(e=>{"chart"===e.type&&(e.cacheCanvas=null,e.addUpdateBoundTag())})}function u(e){var t;let i=e.table;for(let r=e.proxy.colStart;r<=e.proxy.colEnd;r++){let n=e.getColGroup(r);null==(t=null==n?void 0:n.getChildren())||t.forEach(e=>{let t=e.col,r=e.row;e.children.forEach(e=>{if("chart"===e.type){e.updateData(i.getCellValue(t,r));let n=e.attribute.spec,l=n.type;if("gauge"!==l&&"rose"!==l&&"radar"!==l){let l=i.internalProps.layoutMap.getChartAxes(t,r);e.setAttribute("axes",l),n.axes=l}e.setAttribute("spec",n)}})})}p(e.rowHeaderGroup,e.table),p(e.colHeaderGroup,e.table),p(e.rightFrozenGroup,e.table),p(e.bottomFrozenGroup,e.table)}function c(e,t){let i=e.table;if(i.isPivotChart()){let n=i._selectedDataItemsInChart.length;if((null==t||0===(null==t?void 0:t.length)||0===Object.keys(t).length)&&0===n)return;let l=[];if(Array.isArray(t))t.forEach(e=>{if(e&&0!==e.key&&Object.keys(e).length>0){let t={};for(let i in e)i.startsWith("VGRAMMAR_")||i.startsWith("__VCHART")||(t[i]=e[i]);l.push(t)}});else if(t&&0!==t.key&&Object.keys(t).length>0){let e={};for(let i in t)i.startsWith("VGRAMMAR_")||i.startsWith("__VCHART")||(e[i]=t[i]);l.push(e)}(0,r.X)(i._selectedDataItemsInChart,l)||(i._selectedDataItemsInChart=l,i.internalProps.layoutMap.updateDataStateToChartInstance(),h(e),i.scenegraph.updateNextFrame())}}function p(e,t){e.forEachChildren(e=>{"column"===e.role&&e.forEachChildren(e=>{var i;if("cell"===e.role){let r=!1;if(e.forEachChildren(e=>"axis"===e.name&&(r=!0,!0)),r){let r=t.internalProps.layoutMap.getAxisConfigInPivotChart(e.col,e.row),a=t._getCellStyle(e.col,e.row),s=(0,l.u)((0,o.WJ)("padding",a,e.col,e.row,t)),h=new(n.F.getComponent("axis"))(r,e.attribute.width,e.attribute.height,null!=(i=r.__vtableBodyChartCellPadding)?i:s,t);e.clear(),e.appendChild(h.component),h.overlap()}}})})}function g(e,t,i){e.forEachChildren(e=>{"chart"===e.type&&(e.cacheCanvas=null,e.setAttributes({width:Math.ceil(t-e.attribute.cellPadding[3]-e.attribute.cellPadding[1]),height:Math.ceil(i-e.attribute.cellPadding[0]-e.attribute.cellPadding[2])}))})}},68595:function(e,t,i){i.d(t,{$:()=>l});var r=i(83624),n=i(75665);function l(e,t){var i,l;let o,a=!1;for((0,r.Z)(e)&&e.length>(t.options.maxCharactersNumber||200)&&(e=e.slice(0,t.options.maxCharactersNumber||200)+"",a=!0),o=t.internalProps.enableLineBreak||(null==(i=t.options.customConfig)?void 0:i.multilinesForXTable)?(0,n.m7)(e).replace(/\r?\n/g,"\n").replace(/\r/g,"\n").split("\n")||[]:[(0,n.m7)(e)];o.length&&o.length>1&&!o[o.length-1];)o.pop();if((null==(l=t.options.customConfig)?void 0:l.multilinesForXTable)&&!t.internalProps.autoWrapText)for(;o.length&&o.length>1&&!o[0];)o.shift();return{text:o,moreThanMaxCharacters:a}}},1249:function(e,t,i){i.d(t,{d:()=>n});var r=i(31864);function n(e,t,i,n){var l,o,a,s,h,d,u,c,p,g,f,m,b,y,v,_,C,x;let w=null!=(o=null==(l=null==i?void 0:i.group)?void 0:l.strokeArrayWidth)?o:void 0;return n.theme.cellInnerBorder||!(0,r.z5)(n.theme.frameStyle.borderLineWidth)||(0,r.KV)(n.theme.frameStyle.borderLineWidth)||(0===e&&((w=null!=w?w:[null==(a=null==i?void 0:i.group)?void 0:a.lineWidth,null==(s=null==i?void 0:i.group)?void 0:s.lineWidth,null==(h=null==i?void 0:i.group)?void 0:h.lineWidth,null==(d=null==i?void 0:i.group)?void 0:d.lineWidth])[3]=0),e===n.colCount-1&&((w=null!=w?w:[null==(u=null==i?void 0:i.group)?void 0:u.lineWidth,null==(c=null==i?void 0:i.group)?void 0:c.lineWidth,null==(p=null==i?void 0:i.group)?void 0:p.lineWidth,null==(g=null==i?void 0:i.group)?void 0:g.lineWidth])[1]=0),0===t&&((w=null!=w?w:[null==(f=null==i?void 0:i.group)?void 0:f.lineWidth,null==(m=null==i?void 0:i.group)?void 0:m.lineWidth,null==(b=null==i?void 0:i.group)?void 0:b.lineWidth,null==(y=null==i?void 0:i.group)?void 0:y.lineWidth])[0]=0),t===n.rowCount-1&&((w=null!=w?w:[null==(v=null==i?void 0:i.group)?void 0:v.lineWidth,null==(_=null==i?void 0:i.group)?void 0:_.lineWidth,null==(C=null==i?void 0:i.group)?void 0:C.lineWidth,null==(x=null==i?void 0:i.group)?void 0:x.lineWidth])[2]=0)),w}},49360:function(e,t,i){function r(e,t,i,n,l,o,a="left",s="middle",h=[0,0,0,0],d=0,u=0,c=0,p=0){let g=e+h[3]+d;"right"===a||"end"===a?g=e+i-l-h[1]-u:"center"===a&&(g=e+(i-l+d-u)/2);let f=t+h[0]+c;return"bottom"===s||"alphabetic"===s||"ideographic"===s?f=t+n-o-h[2]-p:"middle"===s&&(f=t+(n-o+c-p)/2),{x:g,y:f}}function n(e,t,i,r,n){let l=!1,o=!1,a=!1,s=!1,h=!1,d=!1,u=!1,c=!1,p=!1;return e<=n.frozenColCount-1&&t<=n.frozenRowCount-1&&(d=!0),i>=n.colCount-n.rightFrozenColCount&&t<=n.frozenRowCount-1&&(u=!0),e<=n.frozenColCount-1&&r>=n.rowCount-n.bottomFrozenRowCount&&(p=!0),i>=n.colCount-n.rightFrozenColCount&&r>=n.rowCount-n.bottomFrozenRowCount&&(c=!0),e<=n.frozenColCount-1&&r>=n.frozenRowCount&&t<=n.rowCount-n.bottomFrozenRowCount-1&&(l=!0),i>=n.colCount-n.rightFrozenColCount&&r>=n.frozenRowCount&&t<=n.rowCount-n.bottomFrozenRowCount-1&&(o=!0),t<=n.frozenRowCount-1&&i>=n.frozenColCount&&e<=n.colCount-n.rightFrozenColCount-1&&(a=!0),r>=n.rowCount-n.bottomFrozenRowCount&&i>=n.frozenColCount&&e<=n.colCount-n.rightFrozenColCount-1&&(s=!0),e<=n.colCount-n.rightFrozenColCount-1&&i>=n.frozenColCount&&t<=n.rowCount-n.bottomFrozenRowCount-1&&r>=n.frozenRowCount&&(h=!0),{needRowHeader:l,needRightRowHeader:o,needColumnHeader:a,needBottomColumnHeader:s,needBody:h,needCornerHeader:d,needRightTopCornerHeader:u,needLeftBottomCornerHeader:p,needRightBottomCornerHeader:c}}i.d(t,{L:()=>n,W:()=>r})},4410:function(e,t,i){i.d(t,{K:()=>r});function r(e,t,i){e.then(()=>{i(),t.scenegraph.updateNextFrame()}).catch(e=>{})}},27594:function(e,t,i){i.d(t,{Z:()=>r});function r(e,t,i){var r;if(e.internalProps.customMergeCell){let r=e.getCustomMerge(t,i);if(r)return r.range}if(!e.internalProps.enableTreeNodeMerge&&!e.isHeader(t,i)&&!(null==(r=e.getBodyColumnDefine(t,i))?void 0:r.mergeCell))return!1;let n=e.getCellRange(t,i);return(n.start.col!==n.end.col||n.start.row!==n.end.row)&&n}},48523:function(e,t,i){i.d(t,{L:()=>o});var r=i(64776),n=i(95723),l=i(36781);function o(e,t,i){var o,a,s,h,d;let u=0,c=i.internalProps.layoutMap;if(c.isHeader(e,t)){let n=c.getHeader(e,t);(0,r.Z)(null==n?void 0:n.hierarchyLevel)&&(u=(null!=(o=n.hierarchyLevel)?o:0)*("tree"===c.rowHierarchyType&&null!=(a=c.rowHierarchyIndent)?a:0),c.rowHierarchyTextStartAlignment&&!i.internalProps.headerHelper.getHierarchyIcon(e,t)&&(u+=i.internalProps.headerHelper.getHierarchyIconWidth()))}else if(i.internalProps.groupBy||(null==(s=i.getBodyColumnDefine(e,t))?void 0:s.tree)){let r=i.dataSource.getIndexKey(i.getRecordShowIndexByCell(e,t)),o=null!=(h=i.dataSource.getGroupLength())?h:0,a=(0,n.Z)(r)?r.length-1:0;o>0&&a===o&&(a=0),u=Array.isArray(r)&&i.getHierarchyState(e,t)!==l.g.none?a*(null!=(d=c.hierarchyIndent)?d:0):0,c.hierarchyTextStartAlignment&&!i.internalProps.bodyHelper.getHierarchyIcon(e,t)&&(u+=i.internalProps.bodyHelper.getHierarchyIconWidth())}return u}},297:function(e,t,i){i.d(t,{WJ:()=>n,vp:()=>l});var r=i(64776);function n(e,t,i,n,l){let o=t&&(0,r.Z)(t[e])?t[e]:void 0;return"function"==typeof o?o({col:i,row:n,table:l,value:l.getCellValue(i,n),dataValue:l.getCellOriginValue(i,n),cellHeaderPaths:l.getCellHeaderPaths(i,n)}):o}function l(e,t,i,n,l){let o=t&&(0,r.Z)(t[e])?t[e]:void 0;if("function"==typeof o)return o({col:i,row:n,table:l,value:l.getCellValue(i,n),dataValue:l.getCellOriginValue(i,n),cellHeaderPaths:l.getCellHeaderPaths(i,n)})}},21044:function(e,t,i){i.d(t,{f:()=>r});function r(e,t,i,r){let n,l,o=e/t;return o>i/r?(r-(l=(n=i)/o))/2:(i-(n=(l=r)*o))/2,{width:n,height:l}}},76352:function(e,t,i){i.d(t,{u:()=>a});var r=i(19626),n=i(4654),l=i(83624),o=i(95723);function a(e){var t,i,a,s;if((0,n.Z)(e)||(0,l.Z)(e)||(0,o.Z)(e)){let t=(0,r.dj)(e);return"number"==typeof t||"string"==typeof t?t=[t,t,t,t]:Array.isArray(t)&&(t=t.slice(0)),t}return e&&(isFinite(e.bottom)||isFinite(e.left)||isFinite(e.right)||isFinite(e.top))?[null!=(t=e.top)?t:0,null!=(i=e.right)?i:0,null!=(a=e.bottom)?a:0,null!=(s=e.left)?s:0]:[0,0,0,0]}},89883:function(e,t,i){i.d(t,{vQ:()=>C,qs:()=>x,M4:()=>S,Zl:()=>w,Bg:()=>_,Rd:()=>v});var r=i(63654),n=i(47634),l=i(39818),o=i(88536),a=i(81584);class s extends o.Z{constructor(e){super(e),this._autoWidth=!1,this._autoHeight=!1,this._leftGroup=new o.Z({pickable:!1,fill:!1,stroke:!1}),this._leftGroup.role="content-left",this._rightGroup=new o.Z({pickable:!1,fill:!1,stroke:!1}),this._rightGroup.role="content-right",this._centerGroup=new o.Z({pickable:!1,fill:!1,stroke:!1}),this._centerGroup.role="content-center",this.appendChild(this._leftGroup),this.appendChild(this._rightGroup),this.appendChild(this._centerGroup)}setCellContentOption(e){this._autoWidth=e.autoWidth,this._autoHeight=e.autoHeight,this._cellWidth=e.cellWidth,this._originCellWidth=e.cellWidth,this._cellHeight=e.cellHeight,this._align=e.align,this._baseline=e.baseline}addLeftOccupyingIcon(e){var t,i,r;e.setAttribute("x",this._leftGroup.width+(null!=(t=e.attribute.marginLeft)?t:0)),this._leftGroup.appendChild(e),this._leftGroup.setDeltaWidth((null!=(i=e.attribute.marginLeft)?i:0)+(null!=(r=e.attribute.marginRight)?r:0)+e.attribute.width)}addRightOccupyingIcon(e){var t,i,r;e.setAttribute("x",this._rightGroup.width+(null!=(t=e.attribute.marginLeft)?t:0)),this._rightGroup.appendChild(e),this._rightGroup.setDeltaWidth((null!=(i=e.attribute.marginLeft)?i:0)+(null!=(r=e.attribute.marginRight)?r:0)+e.attribute.width)}addContent(e){let t=this._centerGroup.lastChild;t&&e.setAttributes({x:t.attribute.x+t.AABBBounds.width()}),this._centerGroup.appendChild(e),e instanceof r.x&&(this._centerGroup.setAttribute("pickable",!1),e.setAttribute("textAlign","left"))}layout(){let e=this._leftGroup.width;e===1/0&&(e=0);let t=this._rightGroup.width;if(t===-1/0&&(t=0),this._autoWidth){let i=this._centerGroup.width;this._cellWidth=e+t+i,this.setAttribute("width",this._cellWidth)}else{let i=this._cellWidth-e-t;this.updateCenterLayout(i);let r=this._centerGroup.width;this._cellWidth=e+t+r,this.setAttribute("width",this._cellWidth)}this.updateHorizontalPos();let i=this._leftGroup.height,r=this._rightGroup.height,n=this._centerGroup.height;this._cellHeight=Math.max(i,r,n),this.setAttribute("height",this._cellHeight),this.updateVerticalPos()}updateCenterLayout(e){let t=e;this._centerGroup.forEachChildren(e=>{(e instanceof a.J||e instanceof a.V)&&(t-=e.AABBBounds.width())});let i=this._centerGroup.getChildByName("text");i instanceof n.H?i.setAttribute("width",t):i instanceof r.x&&i.setAttribute("maxLineWidth",t);let l=0;this._centerGroup.forEachChildren(e=>{e.setAttribute("x",l),l+=e.AABBBounds.width()})}updateHorizontalPos(){this._leftGroup.setAttribute("x",0),this._rightGroup.setAttribute("x",this._cellWidth-this._rightGroup.width),this._centerGroup.setAttribute("x",this._leftGroup.width),"left"===this._align||"start"===this._align?this.setAttribute("dx",0):"center"===this._align?this.setAttribute("dx",-this.attribute.width/2):"right"!==this._align&&"end"!==this._align||this.setAttribute("dx",-this.attribute.width)}updateVerticalPos(){"top"===this._baseline?(this._leftGroup.setAttribute("y",0),this._rightGroup.setAttribute("y",0),this._centerGroup.setAttribute("y",0)):"middle"===this._baseline?(this._leftGroup.forEachChildren(e=>{e.setAttribute("y",(this._leftGroup.height-e.AABBBounds.height())/2)}),this._rightGroup.forEachChildren(e=>{e.setAttribute("y",(this._rightGroup.height-e.AABBBounds.height())/2)}),this._leftGroup.setAttribute("y",this._cellHeight/2-this._leftGroup.height/2),this._rightGroup.setAttribute("y",this._cellHeight/2-this._rightGroup.height/2),this._centerGroup.setAttribute("y",this._cellHeight/2-this._centerGroup.height/2)):"bottom"===this._baseline&&(this._leftGroup.forEachChildren(e=>{e.setAttribute("y",this._leftGroup.height-e.AABBBounds.height())}),this._rightGroup.forEachChildren(e=>{e.setAttribute("y",this._rightGroup.height-e.AABBBounds.height())}),this._leftGroup.setAttribute("y",this._cellHeight-this._leftGroup.height),this._rightGroup.setAttribute("y",this._cellHeight-this._rightGroup.height),this._centerGroup.setAttribute("y",this._cellHeight-this._centerGroup.height))}updateWidth(e){this._cellWidth=e,this._originCellWidth=e,this.layout()}updateHeight(e){this._cellHeight=e,this._cellWidth=this._originCellWidth;let t=this.getChildByName("text",!0);t&&t.setAttribute("heightLimit",e),this.layout()}}var h=i(27594),d=i(48523),u=i(4654),c=i(64776),p=i(20408),g=i(89530),f=i(68595),m=i(23946),b=i(70559),y=i(57198);function v(e,t,i,l,o,a,h,p,g,b,y,v,x,w,k){var M,T,R,E,P,B,I,L,F;let H,O=0,D=0,z=0;if(Array.isArray(t)&&0!==t.length){let c,{inlineFrontIcons:m,inlineEndIcons:M,contentLeftIcons:T,contentRightIcons:R,leftIconWidth:W,rightIconWidth:Z,absoluteRightIconWidth:N}=S(t,e,k,x);if(O=W,D=Z,z=N,0===m.length&&0===M.length){let t=0;(0,u.Z)(x.theme._contentOffset)&&("left"===y?t=x.theme._contentOffset:"right"===y&&(t=-x.theme._contentOffset));let n=k?(0,d.L)(k.start.col,k.start.row,x):(0,d.L)(e.col,e.row,x),{text:s,moreThanMaxCharacters:m}=(0,f.$)(i,x),v={text:1===s.length?s[0]:s,moreThanMaxCharacters:m,maxLineWidth:o?1/0:g-(l[1]+l[3])-O-D-n,textBaseline:"top",heightLimit:!1!==(null==(E=x.options.customConfig)?void 0:E.limitContentHeight)&&(!a||(null==(P=x.options.customConfig)?void 0:P.multilinesForXTable))?b-Math.floor(l[0]+l[2]):-1,pickable:!1,autoWrapText:h,lineClamp:p,wordBreak:"break-word",whiteSpace:!1===(null==(B=x.options.customConfig)?void 0:B.limitContentHeight)||1!==s.length||h?"normal":"no-wrap",dx:("left"===y?T.length?0:n:0)+t,keepCenterInLine:!0},_=new r.x(w.text?Object.assign({},w.text,v):v);_.name="text",c=_}else{let t=Object.assign({text:null==i?void 0:i.toString()},(null==(F=null==(L=null==(I=e.parent)?void 0:I.theme)?void 0:L.userTheme)?void 0:F.text)||{});w.text&&Object.assign(t,w.text),t.textBaseline="middle";let r=[...m.map(e=>C(e)),t,...M.map(e=>C(e))];r[0].textAlign=y;let s=new n.H({width:o?0:g-(l[1]+l[3])-O-D,height:a&&h?0:Math.ceil(b-(l[0]+l[2])),textConfig:r,verticalDirection:a&&h?"top":v,ellipsis:t.ellipsis});s.name="text",c=s,s.bindIconEvent(),k&&(k.start.col!==k.end.col||k.start.row!==k.end.row)&&(s.onBeforeAttributeUpdate=A)}if(0!==T.length||0!==R.length){let t=new s({x:0,y:0,fill:!1,stroke:!1,pickable:!1});t.name="content",t.setCellContentOption({autoWidth:o,autoHeight:a,cellWidth:g-(l[1]+l[3])-O-D,cellHeight:b-(l[0]+l[2]),align:y,baseline:v});let i={addedHierarchyOffset:0};T.forEach(r=>{let n=_(r,void 0,e.col,e.row,k,x,i);n.role="icon-content-left",n.name=r.name,t.addLeftOccupyingIcon(n)}),R.forEach(r=>{let n=_(r,void 0,e.col,e.row,k,x,i);n.role="icon-content-right",n.name=r.name,t.addRightOccupyingIcon(n)}),t.addContent(c),e.appendChild(t),t.layout(),H=t.AABBBounds.width(),t.AABBBounds.height()}else e.firstChild?e.insertBefore(c,e.firstChild):e.appendChild(c),H=c.AABBBounds.width(),c.AABBBounds.height()}else if((0,c.Z)(i)){let{text:t,moreThanMaxCharacters:n}=(0,f.$)(i,x),s=k?(0,d.L)(k.start.col,k.start.row,x):(0,d.L)(e.col,e.row,x),c=0;(0,u.Z)(x.theme._contentOffset)&&("left"===y?c=x.theme._contentOffset:"right"===y&&(c=-x.theme._contentOffset));let m={text:1===t.length?t[0]:t,moreThanMaxCharacters:n,maxLineWidth:o?1/0:g-(l[1]+l[3]+s),textBaseline:"top",autoWrapText:h,lineClamp:p,wordBreak:"break-word",heightLimit:!1!==(null==(M=x.options.customConfig)?void 0:M.limitContentHeight)&&(!a||(null==(T=x.options.customConfig)?void 0:T.multilinesForXTable))?b-Math.floor(l[0]+l[2]):-1,pickable:!1,dx:("left"===y?s:0)+c,whiteSpace:!1===(null==(R=x.options.customConfig)?void 0:R.limitContentHeight)||1!==t.length||h?"normal":"no-wrap",keepCenterInLine:!0},_=new r.x(w.text?Object.assign({},w.text,m):m);_.name="text",_.textBaseline=v,e.appendChild(_),H=_.AABBBounds.width(),_.AABBBounds.height()}let W=o?O+H+D:g-(l[1]+l[3]),Z=b-(l[0]+l[2]);e.forEachChildren(e=>{"icon-left"===e.role?e.setAttribute("x",e.attribute.x+l[3]):"icon-right"===e.role?e.setAttribute("x",e.attribute.x+W-D+l[3]):"icon-absolute-right"===e.role?e.setAttribute("x",e.attribute.x+W-z+l[3]+l[1]):"content"!==e.name&&"text"!==e.name||("center"===y&&"richtext"!==e.type?e.setAttribute("x",l[3]+O+(W-O-D)/2):"right"===y&&"richtext"!==e.type?e.setAttribute("x",l[3]+W-D):e.setAttribute("x",l[3]+O))}),e.forEachChildren(e=>{e.name!==m.FH&&("middle"===v?e.setAttribute("y",l[0]+(Z-e.AABBBounds.height())/2):"bottom"===v?e.setAttribute("y",l[0]+Z-e.AABBBounds.height()):e.setAttribute("y",l[0]))}),e.setAttributes({width:W+l[1]+l[3],height:Z+l[0]+l[2]})}function _(e,t,i,r,n,o,s){var h,c,g,f,m,b;if(!e)return;let y={};"image"===e.type?(e.isGif&&(y.gif=e.src),y.image=e.src):("svg"===e.type||"svg"in e)&&(y.image=e.svg),y.width=e.width,y.height=e.height,y.visibleTime=null!=(h=e.visibleTime)?h:"always",y.funcType=e.funcType,y.interactive=e.interactive,y.isGif=e.isGif;let v,_=0;return(!s||0===(null==s?void 0:s.addedHierarchyOffset))&&(0,u.Z)(i)&&(0,u.Z)(r)&&o&&(e.funcType===l.cI.collapse||e.funcType===l.cI.expand||e.positionType===l.q0.contentLeft||e.positionType===l.q0.contentRight)&&(_=n?(0,d.L)(n.start.col,n.start.row,o):(0,d.L)(i,r,o),s&&(s.addedHierarchyOffset=1)),y.marginLeft=(null!=(c=e.marginLeft)?c:0)+_,y.marginRight=null!=(g=e.marginRight)?g:0,!1===e.interactive&&(y.pickable=!1),e.hover&&(y.backgroundWidth=null!=(f=e.hover.width)?f:e.width,y.backgroundHeight=null!=(m=e.hover.width)?m:e.width,y.backgroundColor=null!=(b=e.hover.bgColor)?b:"rgba(22,44,66,0.2)",y.hoverImage=e.hover.image),e.cursor&&(y.cursor=e.cursor),"shape"in e&&"circle"===e.shape&&(y.shape=e.shape),t?(t.setAttributes(y),t.loadImage(y.image),t.tooltip=e.tooltip,t.name=e.name,t):("text"===e.type?(y.text=e.content,(0,p.Z)(y,e.style),(v=new a.V(y)).tooltip=e.tooltip):(v=new a.J(y)).tooltip=e.tooltip,v.name=e.name,v)}function C(e){var t,i,r,n,l,o;let a={};return"image"===e.type?a.image=e.src:("svg"===e.type||"svg"in e)&&(a.image=e.svg),a.visibleTime=null!=(t=e.visibleTime)?t:"always",a.funcType=e.funcType,a.id=e.name,a.width=e.width,a.height=e.height,(e.marginRight||e.marginLeft)&&(a.margin=[0,null!=(i=e.marginRight)?i:0,0,null!=(r=e.marginLeft)?r:0]),e.hover&&(a.backgroundWidth=null!=(n=e.hover.width)?n:e.width,a.backgroundHeight=null!=(l=e.hover.height)?l:e.height,a.backgroundShowMode="hover",a.hoverImage=e.hover.image,a.backgroundStroke=!1,a.backgroundFill=null!=(o=e.hover.bgColor)?o:"rgba(22,44,66,0.2)"),e.cursor&&(a.cursor=e.cursor),a.tooltip=e.tooltip,a}function x(e,t,i,l,o,a,s,d,u){var c,p,f,b;let v;(0,g.Z)(e.contentWidth)&&(l=t-(null!=(c=e.contentWidth)?c:e.attribute.width));let _,C=0,x=0,w=0,S=0;e.forEachChildren(e=>{var t,i,r,n;"icon-left"===e.role?(C+=e.AABBBounds.width()+(null!=(t=e.attribute.marginLeft)?t:0)+(null!=(i=e.attribute.marginRight)?i:0),x=Math.max(x,e.AABBBounds.height())):"icon-right"===e.role&&(w+=e.AABBBounds.width()+(null!=(r=e.attribute.marginLeft)?r:0)+(null!=(n=e.attribute.marginRight)?n:0),S=Math.max(S,e.AABBBounds.height()))});let A=e.getChildByName("text"),k=e.getChildByName("content");A instanceof r.x?(_=A.AABBBounds.height(),A.setAttribute("maxLineWidth",t-C-w-(a[1]+a[3])-(null!=(p=A.attribute.dx)?p:0)-(null!=(f=u.table.theme._contentOffset)?f:0)),v=A.AABBBounds.height()):A instanceof n.H?(_=A.AABBBounds.height(),A.setAttribute("width",t-C-w-(a[1]+a[3])),v=A.AABBBounds.height()):k&&(_=k.AABBBounds.height(),k.updateWidth(t-C-w-(a[1]+a[3])),v=k.AABBBounds.height());let M=Math.round(Math.max(x,S,_)+a[0]+a[2]);if(e.forEachChildren(i=>{var r;if("icon-left"===i.role);else if("icon-right"===i.role)i.setAttribute("x",i.attribute.x+l);else if("icon-absolute-right"===i.role)i.setAttribute("x",i.attribute.x+l);else if("content"===i.name||"text"===i.name&&"richtext"!==i.type){let e=null!=(r=i.attribute.textAlign)?r:s;"center"===e?i.setAttribute("x",a[3]+C+(t-(a[1]+a[3])-C-w)/2):"right"===e&&i.setAttribute("x",a[3]+t-(a[1]+a[3])-w)}else"mark"===i.name&&i.setAttribute("x",e.attribute.width)}),o){let t=Math.max(x,v,S);if(function(e,t,i,r){let n=e.table,l=(0,h.Z)(n,t.col,t.row);if(l&&l.end.row-l.start.row){r/=l.end.row-l.start.row+1,i/=l.end.row-l.start.row+1;for(let e=l.start.row;e<=l.end.row;e++){let t=n.getRowHeight(e);if(t===r&&i!==t||i>t)return!0}}else{let e=n.getRowHeight(t.row);if(e===r&&i!==e||i>e)return!0}return!1}(u,e,Math.round(t+a[0]+a[2]),M))return u.table.hasListeners(y.B.AFTER_UPDATE_CELL_CONTENT_WIDTH)&&u.table.fireListeners(y.B.AFTER_UPDATE_CELL_CONTENT_WIDTH,{col:e.col,row:e.row,cellHeight:i,cellGroup:e,padding:a,textBaseline:d}),!0;t=(null!=(b=e.contentHeight)?b:i)-(a[0]+a[2]),e.forEachChildren(e=>{"rect"!==e.type&&"chart"!==e.type&&e.name!==m.FH&&("mark"===e.name?e.setAttribute("y",0):"middle"===d?e.setAttribute("y",a[0]+(t-e.AABBBounds.height())/2):"bottom"===d?e.setAttribute("y",a[0]+t-e.AABBBounds.height()):e.setAttribute("y",a[0]))})}else"middle"!==d&&"bottom"!==d||e.forEachChildren(e=>{"rect"!==e.type&&"chart"!==e.type&&e.name!==m.FH&&("mark"===e.name?e.setAttribute("y",0):"middle"===d?e.setAttribute("y",(i-a[2]+a[0]-e.AABBBounds.height())/2):"bottom"===d?e.setAttribute("y",i-e.AABBBounds.height()-a[2]):e.setAttribute("y",a[0]))});return u.table.hasListeners(y.B.AFTER_UPDATE_CELL_CONTENT_WIDTH)&&u.table.fireListeners(y.B.AFTER_UPDATE_CELL_CONTENT_WIDTH,{col:e.col,row:e.row,cellHeight:i,cellGroup:e,padding:a,textBaseline:d}),!1}function w(e,t,i,l,o,a,s,h){var d;let u=t-Math.floor(o[0]+o[2]),c=e.getChildByName("text");c instanceof r.x&&!l?c.setAttributes({heightLimit:!1===(null==(d=h.options.customConfig)?void 0:d.limitContentHeight)?-1:u}):c instanceof n.H&&!l?c.setAttributes({height:u}):e.getChildByName("content")&&e.getChildByName("content").updateHeight(u),e.forEachChildren(e=>{e.setAttribute("dy",0),"rect"===e.type||"chart"===e.type||e.name===m.FH||("mark"===e.name?e.setAttribute("y",0):"middle"===s?e.setAttribute("y",o[0]+(u-e.AABBBounds.height())/2):"bottom"===s?e.setAttribute("y",o[0]+u-e.AABBBounds.height()):e.setAttribute("y",o[0]))})}function S(e,t,i,r){let n=[],o=[],a=[],s=[],h=[],d=[],u=[],c=[],p=0,g=0,f=0,m=0,b=0,y=0;return e.forEach(e=>{switch(e.positionType){case l.q0.left:n.push(e);break;case l.q0.right:o.push(e);break;case l.q0.contentLeft:a.push(e);break;case l.q0.contentRight:s.push(e);break;case l.q0.absoluteRight:c.push(e);break;case l.q0.inlineFront:h.push(e);break;case l.q0.inlineEnd:d.push(e)}}),n.forEach(e=>{var n,l,o;let a=_(e,void 0,t.col,t.row,i,r);a.role="icon-left",a.name=e.name,a.setAttribute("x",p+(null!=(n=a.attribute.marginLeft)?n:0)),p+=a.AABBBounds.width()+(null!=(l=a.attribute.marginLeft)?l:0)+(null!=(o=a.attribute.marginRight)?o:0),g=Math.max(g,a.AABBBounds.height()),t.appendChild(a)}),o.forEach(e=>{var n,l,o;let a=_(e,void 0,t.col,t.row,i,r);a.role="icon-right",a.name=e.name,a.setAttribute("x",f+(null!=(n=a.attribute.marginLeft)?n:0)),f+=a.AABBBounds.width()+(null!=(l=a.attribute.marginLeft)?l:0)+(null!=(o=a.attribute.marginRight)?o:0),m=Math.max(m,a.AABBBounds.height()),t.appendChild(a)}),u.forEach(e=>{var n,l,o;let a=_(e,void 0,t.col,t.row,i,r);a.role="icon-absolute-left",a.name=e.name,a.setAttribute("x",b+(null!=(n=a.attribute.marginLeft)?n:0)),b+=a.AABBBounds.width()+(null!=(l=a.attribute.marginLeft)?l:0)+(null!=(o=a.attribute.marginRight)?o:0),t.appendChild(a)}),c.forEach(e=>{var n,l,o;let a=_(e,void 0,t.col,t.row,i,r);a.role="icon-absolute-right",a.name=e.name,a.setAttribute("x",y+(null!=(n=a.attribute.marginLeft)?n:0)),y+=a.AABBBounds.width()+(null!=(l=a.attribute.marginLeft)?l:0)+(null!=(o=a.attribute.marginRight)?o:0),t.appendChild(a)}),{leftIcons:n,rightIcons:o,contentLeftIcons:a,contentRightIcons:s,inlineFrontIcons:h,inlineEndIcons:d,absoluteLeftIcons:u,absoluteRightIcons:c,leftIconWidth:p,leftIconHeight:g,rightIconWidth:f,rightIconHeight:m,absoluteLeftIconWidth:b,absoluteRightIconWidth:y}}function A(e,t){if(e.hasOwnProperty("hoverIconId")){if(this.skipMergeUpdate)return;let t=(0,b.J$)(this);if(!t||!t.stage)return;let i=t.stage.table;this.skipAttributeUpdate=!0;let{mergeStartCol:r,mergeEndCol:n,mergeStartRow:l,mergeEndRow:o}=t;if((0,c.Z)(r)&&(0,c.Z)(n)&&(0,c.Z)(l)&&(0,c.Z)(o)&&(r!==n||l!==o)){for(let a=r;a<=n;a++)for(let r=l;r<=o;r++){if(a===t.col&&r===t.row){if(e.hoverIconId!==this.attribute.hoverIconId){let t=this._frameCache.icons.get(e.hoverIconId);this.updateHoverIconState(t)}continue}let n=i.scenegraph.highPerformanceGetCell(a,r);if("cell"===n.role){let t=n.getChildByName(this.name,!0);if(!t||t.skipAttributeUpdate)continue;e.hoverIconId!==t.attribute.hoverIconId&&(t.setAttribute("hoverIconId",e.hoverIconId),n.addUpdateBoundTag())}}this.skipAttributeUpdate=void 0}}}},8429:function(e,t,i){i.d(t,{QC:()=>m,Rc:()=>y,ZP:()=>c});var r=i(22415),n=i(31659),l=i(82265),o=i(68130),a=i(63654),s=i(64449),h=i(64776);let d="quick",u=new r.n((e,t,i,r)=>{i(n.j)?r(n.j).to(f).inSingletonScope():e(n.j).to(f).inSingletonScope()});new r.n((e,t,i,r)=>{i(n.j)?r(n.j).to(n.f).inSingletonScope():e(n.j).to(n.f).inSingletonScope()});let c=u,p=new Map;function g(e,t,i,r="normal"){var n,a,h;let d=`${e}-${t}-${i}-${r}`,u=p.get(d);if(u)return u;let c=(n={fontSize:e,fontFamily:i,fontWeight:t,fontStyle:r},new s.e(Object.assign({defaultFontParams:{fontFamily:l.q9.fontFamily,fontSize:l.q9.fontSize},getTextBounds:h?void 0:o.o,specialCharSet:`{}()//&-/: .,@%'"~=${s.e.ALPHABET_CHAR_SET}${s.e.ALPHABET_CHAR_SET.toUpperCase()}0123456789`},null!=a?a:{}),n));return p.set(d,c),c}class f extends n.f{_fastMeasure(e,t){let{fontSize:i,fontFamily:r="Arial,sans-serif",fontWeight:n="normal",fontStyle:l="normal"}=t,o=g(i,n,r,l).measure(e,d);if(!(0,h.Z)(o.fontBoundingBoxAscent)&&!(0,h.Z)(o.fontBoundingBoxDescent)){let{ascent:e,descent:i}=this.measureTextBoundADscentEstimate(t);o.fontBoundingBoxAscent=e,o.fontBoundingBoxDescent=i}return o}measureTextWidth(e,t){return this._fastMeasure(e,t).width}measureText(e,t){return this._fastMeasure(e,t)}_measureTextWithoutAlignBaseline(e,t,i){return this._fastMeasure(e,t)}_measureTextWithAlignBaseline(e,t,i){return this._fastMeasure(e,t)}}let m=new class{measureText(e,t){let{fontSize:i,fontFamily:r="Arial,sans-serif",fontWeight:n="normal",fontStyle:l="normal"}=t;return g(i,n,r,l).measure(e,d)}measureTextWidth(e,t){let{fontSize:i,fontFamily:r="Arial,sans-serif",fontWeight:n="normal",fontStyle:l="normal"}=t;return g(i,n,r,l).measure(e,d).width}clipText(e,t,i){if(0===e.length)return{str:"",width:0};let r=this.measureTextWidth(e,t);return r<=i?{str:e,width:r}:(r=this.measureTextWidth(e[0],t))>i?{str:"",width:0}:this._clipText(e,t,i,0,e.length-1)}_clipText(e,t,i,r,n){let l,o=Math.floor((r+n)/2),a=e.substring(0,o+1),s=this.measureTextWidth(a,t);if(s>i){if(a.length<=1)return{str:"",width:0};let n=e.substring(0,o);return(l=this.measureTextWidth(n,t))<=i?{str:n,width:l}:this._clipText(e,t,i,r,o)}if(s<i){if(o>=e.length-1)return{str:e,width:this.measureTextWidth(e,t)};let r=e.substring(0,o+2);return(l=this.measureTextWidth(r,t))>=i?{str:a,width:s}:this._clipText(e,t,i,o,n)}return{str:a,width:s}}clipTextWithSuffix(e,t,i,r){if(""===r)return this.clipText(e,t,i);if(0===e.length)return{str:"",width:0};let n=this.measureTextWidth(e,t);if(n<=i)return{str:e,width:n};let l=this.measureTextWidth(r,t);if(l>i)return{str:"",width:0};i-=l;let o=this._clipText(e,t,i,0,e.length-1);return o.str+=r,o.width+=l,o}},b=new a.x({ignoreBuf:!0});function y(e){return b.initAttributes(Object.assign(Object.assign({},e),{ignoreBuf:!0})),b.AABBBounds}},33154:function(e,t,i){function r(e,t,i){let r=i.getCellRange(e.col,e.row);if(i.isColumnHeader(e.col,e.row)||"column"===i.stateManager.columnMove.movingColumnOrRow&&0===e.row){let n=i.getCellRange(t.col,r.start.row);t.row>=i.columnHeaderLevelCount&&(t.row=Math.max(i.columnHeaderLevelCount-1,0)),t.col>=e.col?t.col=n.end.col:t.col=n.start.col}else if(i.isRowHeader(e.col,e.row)){let n=i.internalProps.layoutMap,l=i.getCellRange(r.start.col,t.row);if(t.col>=i.rowHeaderLevelCount+n.leftRowSeriesNumberColumnCount&&(t.col=i.rowHeaderLevelCount+n.leftRowSeriesNumberColumnCount-1),"tree"===n.rowHierarchyType){let r=n.getCellHeaderPathsWithTreeNode(e.col,e.row).rowHeaderPaths,l=n.getCellHeaderPathsWithTreeNode(t.col,t.row).rowHeaderPaths;if(r.length<=l.length){let n=l[r.length-1];n&&(t.row>=e.row?t.row=n.startInTotal+n.size-1+i.columnHeaderLevelCount:t.row=n.startInTotal+i.columnHeaderLevelCount)}}else t.row>=e.row?t.row=l.end.row:t.row=l.start.row}return t}function n(e,t){if(t.internalProps._widthResizedColMap.size>0){let i=Array.from(t.internalProps._widthResizedColMap.keys());t.internalProps._widthResizedColMap.clear();for(let r=0;r<i.length;r++){let n,l=i[r],{sourceIndex:o,targetIndex:a,sourceSize:s}=e;n=l>=o&&l<o+s?a+(l-o):o<a?l>=o+s&&l<a||l>=a?l-s:l:l>=a&&l<o?l+s:l,t.internalProps._widthResizedColMap.add(n)}}}function l(e,t){if(t.internalProps._heightResizedRowMap.size>0){let i=Array.from(t.internalProps._heightResizedRowMap.keys());t.internalProps._heightResizedRowMap.clear();for(let r=0;r<i.length;r++){let n,l=i[r],{sourceIndex:o,targetIndex:a,sourceSize:s}=e;n=l>=o&&l<o+s?a+(l-o):o<a?l>=o+s&&l<a||l>=a?l-s:l:l>=a&&l<o?l+s:l,t.internalProps._heightResizedRowMap.add(n)}}}function o(e,t,i){let r=Array.from(e.internalProps._heightResizedRowMap.keys()),n=t+(e.transpose?e.rowHeaderLevelCount:e.columnHeaderLevelCount);for(let t=0;t<r.length;t++)r[t]>=n&&(e.internalProps._heightResizedRowMap.delete(r[t]),e.internalProps._heightResizedRowMap.add(r[t]+i.length))}function a(e,t){let i=e.transpose?e.rowHeaderLevelCount:e.columnHeaderLevelCount;t.sort((e,t)=>t-e);for(let r=0;r<t.length;r++){let n=t[r]+i,l=Array.from(e.internalProps._heightResizedRowMap.keys());for(let t=0;t<l.length;t++)l[t]===n?e.internalProps._heightResizedRowMap.delete(l[t]):l[t]>n&&(e.internalProps._heightResizedRowMap.delete(l[t]),e.internalProps._heightResizedRowMap.add(l[t]-1))}}i.d(t,{$Q:()=>r,J7:()=>l,UF:()=>o,b:()=>a,ct:()=>n})},76659:function(e,t,i){i.d(t,{Bd:()=>f,GW:()=>c,Jd:()=>m,Pi:()=>g,Vz:()=>u,Y:()=>h,aC:()=>v,gs:()=>p,hR:()=>y,r5:()=>b});var r=i(64776),n=i(96241),l=i(80971),o=i(4654),a=i(95723),s=i(35759);function h(e,t,i,r,n){let l=n.table.getCellRange(e,t);if(l.start.col!==l.end.col||l.start.row!==l.end.row)for(let e=l.start.col;e<=l.end.col;e++)for(let t=l.start.row;t<=l.end.row;t++)d(e,t,i,r,n);else d(e,t,i,r,n)}function d(e,t,i,r,n){let l=n.table.getRecordShowIndexByCell(e,t);if(l>=0){let e=n.table.dataSource.getIndexKey(l).toString();n.checkedState.get(e)?n.checkedState.get(e)[i]=r:n.checkedState.set(e,{[i]:r})}}function u(e,t,i){var r;i.headerCheckedState[e]=t,i.table.internalProps.enableCheckboxCascade&&(null==(r=i.checkedState)||r.forEach(i=>{i[e]=t}))}function c(e,t,i,n,l){var o,a;if(l.table.isHeader(e,t)){if((0,r.Z)(l.headerCheckedState[i]))return l.headerCheckedState[i];if("function"==typeof n)return;if((0,r.Z)(n))l.headerCheckedState[i]=n;else if((null==(o=l.checkedState)?void 0:o.size)>0)return l.updateHeaderCheckedState(i,e,t);return l.headerCheckedState[i]}let s=l.table.getRecordShowIndexByCell(e,t);if(s>=0){let e=l.table.dataSource.getIndexKey(s).toString();if((0,r.Z)(null==(a=l.checkedState.get(e))?void 0:a[i]))return l.checkedState.get(e)[i];if(l.checkedState.get(e))l.checkedState.get(e)[i]=n;else if(l.table.internalProps.enableCheckboxCascade&&e.includes(",")){let t=e.split(",").slice(0,-1).join(",");l.checkedState.has(t)&&!0===l.checkedState.get(t)[i]?l.checkedState.set(e,{[i]:!0}):l.checkedState.set(e,{[i]:n})}else l.checkedState.set(e,{[i]:n})}return n}function p(e,t){t.checkedState.clear(),t.headerCheckedState={},t.radioState={};let i=!1;if(t._checkboxCellTypeFields=[],t._headerCheckFuncs={},t.table.internalProps.layoutMap.headerObjects.forEach((e,r)=>{if("checkbox"===e.headerType){let r=e.define.checked;null==r||"function"==typeof r?(i=!0,"function"==typeof r&&(t._headerCheckFuncs[e.field]=r)):t.headerCheckedState[e.field]=r,"checkbox"!==e.define.cellType&&!(0,n.Z)(e.define.cellType)||e.fieldFormat||t._checkboxCellTypeFields.push(e.field)}}),1===t.table.leftRowSeriesNumberCount)t.headerCheckedState._vtable_rowSeries_number=!1,t._checkboxCellTypeFields.push("_vtable_rowSeries_number"),i=!0;else if(t.table.leftRowSeriesNumberCount>1){for(let e=0;e<t.table.leftRowSeriesNumberCount;e++)t.headerCheckedState[`_vtable_rowSeries_number_${e}`]=!1,t._checkboxCellTypeFields.push(`_vtable_rowSeries_number_${e}`);i=!0}i&&function(e,t){let i=t.table,r=i.isPivotTable()?0:i.internalProps.transpose?i.rowHeaderLevelCount:i.columnHeaderLevelCount,n=i.isPivotTable()?(0,a.Z)(e)?e.length:0:i.internalProps.transpose?i.colCount:i.rowCount;for(let o=0;o+r<n;o++){let r=i.isPivotTable()?e[o]:i.dataSource.get(o);t._checkboxCellTypeFields.forEach(e=>{let n,a=r&&r[e];if((0,l.Z)(a)?n=a.checked:"boolean"==typeof a&&(n=a),null==n){let i=t._headerCheckFuncs[e];if(i){let r=t.table.getCellAddrByFieldRecord(e,o);n=(0,s.vi)(i,{col:r.col,row:r.row,table:t.table,context:null,value:a})}}let h=i.isPivotTable()?o.toString():t.table.dataSource.getIndexKey(o).toString();t.checkedState.get(h)||t.checkedState.set(h,{}),t.checkedState.get(h)[e]=n})}}(e,t)}function g(e,t,i,r){let n=!0,l=!0,o=!1;return t.checkedState.forEach((a,s)=>{var h;s=s.includes(",")?s.split(",").map(e=>Number(e)):Number(s);let d=t.table.getTableIndexByRecordIndex(s),u=t.table.transpose?t.table.getCustomMerge(d,r):t.table.getCustomMerge(i,d),c=null==(h=t.table.dataSource)?void 0:h.get(s);u||!t.table.internalProps.enableCheckboxCascade&&(null==c?void 0:c.vtableMerge)||(!0!==(null==a?void 0:a[e])?n=!1:(l=!1,o=!0))}),n?(t.headerCheckedState[e]=!0,n):l?(t.headerCheckedState[e]=!1,!1):!!o&&(t.headerCheckedState[e]="indeterminate","indeterminate")}function f(e,t){for(let i=t.checkedState.size;i<e.length;i++){let r=e[i];t._checkboxCellTypeFields.forEach(e=>{let n,o=r[e];(0,l.Z)(o)?n=o.checked:"boolean"==typeof o&&(n=o);let a=i.toString();t.checkedState.get(a)||t.checkedState.set(a,{}),t.checkedState.get(a)[e]=n})}}function m(e,t,i,r){var n,l;let o=r.scenegraph.getCell(e,t),a=(null==o?void 0:o.getChildByName("checkbox"))||(null==(l=null==(n=null==o?void 0:o.getChildByName("checkbox-content"))?void 0:n._checkboxGroup)?void 0:l.getChildByName("checkbox"));if(!a){let n=r.getHeaderField(e,t);if(r.isHeader(e,t))r.stateManager.setHeaderCheckedState(n,i),"checkbox"===r.getCellType(e,t)&&r.scenegraph.updateCheckboxCellState(e,t,i);else if(r.stateManager.setCheckedState(e,t,n,i),"checkbox"===r.getCellType(e,t)){let i=r.stateManager.headerCheckedState[n],l=r.stateManager.updateHeaderCheckedState(n,e,t);i!==l&&r.scenegraph.updateHeaderCheckboxCellState(e,t,l)}return}let{checked:s,indeterminate:h}=a.attribute;h?(i||a._handlePointerUp(),a._handlePointerUp()):s?i||a._handlePointerUp():i&&a._handlePointerUp()}function b(e,t,i,r){var n,l;let o=r.scenegraph.getCell(e,t),a=(null==o?void 0:o.getChildByName("checkbox"))||(null==(l=null==(n=null==o?void 0:o.getChildByName("checkbox-content"))?void 0:n._checkboxGroup)?void 0:l.getChildByName("checkbox"));a&&("indeterminate"===i?(a.setAttribute("indeterminate",!0),a.setAttribute("checked",void 0)):(a.setAttribute("indeterminate",void 0),a.setAttribute("checked",i)))}function y(e,t,i){let r,n,{checkedState:l,table:s}=i;if(s.internalProps.transpose?(e=s.getRecordShowIndexByCell(e,0),t=s.getRecordShowIndexByCell(t,0)):(r=s.isPivotTable()?void 0:s.getRecordIndexByCell(0,e),n=s.isPivotTable()?void 0:s.getRecordIndexByCell(0,t)),(0,o.Z)(r)&&(0,o.Z)(n)){if((e=r)>(t=n)){let i=l.get(e.toString());for(let i=e;i>t;i--)l.set(i.toString(),l.get((i-1).toString()));l.set(t.toString(),i)}else if(e<t){let i=l.get(e.toString());for(let i=e;i<t;i++)l.set(i.toString(),l.get((i+1).toString()));l.set(t.toString(),i)}}else if((0,a.Z)(r)&&(0,a.Z)(n)){if((e=r[r.length-1])>(t=n[n.length-1])){let i=l.get(r.toString());for(let i=e;i>t;i--){let e=[...r];e[e.length-1]=i;let t=[...r];t[t.length-1]=i-1,l.set(e.toString(),l.get(t.toString()))}l.set(n.toString(),i)}else if(e<t){let i=l.get(r.toString());for(let i=e;i<t;i++){let e=[...r];e[e.length-1]=i;let t=[...r];t[t.length-1]=i+1,l.set(e.toString(),l.get(t.toString()))}l.set(n.toString(),i)}}}function v(e){let t=[],i=e.dataSource,r=i.dataConfig.groupByRules.length+1;return i.currentIndexedData.forEach((n,l)=>{(0,a.Z)(n)&&n.length===r&&(t[i.getOriginRecordIndexForGroup(n)]=e.stateManager.checkedState.get(n.toString()))}),t}},2837:function(e,t,i){i.d(t,{J:()=>a});var r=i(297),n=i(26902),l=i(64776),o=i(15829);function a(e,t){var i,n,a,h,d,u,c,p,g,f,m;let b,y;if("cell"===e.role&&(0,l.Z)(e.mergeStartCol)&&(0,l.Z)(e.mergeStartRow)&&(0,l.Z)(e.mergeEndCol)&&(0,l.Z)(e.mergeEndRow)){let{colStart:i,colEnd:r,rowStart:n,rowEnd:l}=(0,o.e)(e,t.scenegraph);for(let o=i;o<=r;o++)for(let i=n;i<=l;i++){let r=s(t.stateManager,o,i,e);!r||b&&"cellBgColor"!==r||(b=r)}}else"cell"===e.role&&(b=s(t.stateManager,e.col,e.row,e));if(!b)return;let v=t.internalProps.layoutMap;return v.isCornerHeader(e.col,e.row)?y=(null==(i=t.theme.cornerHeaderStyle)?void 0:i.hover)||(null==(n=t.theme.headerStyle)?void 0:n.hover):v.isColumnHeader(e.col,e.row)?y=null==(a=t.theme.headerStyle)?void 0:a.hover:v.isRowHeader(e.col,e.row)?y=null==(h=t.theme.rowHeaderStyle)?void 0:h.hover:v.isBottomFrozenRow(e.col,e.row)?y=(null==(d=t.theme.bottomFrozenStyle)?void 0:d.hover)||(t.isListTable()?null==(u=t.theme.bodyStyle)?void 0:u.hover:null==(c=t.theme.headerStyle)?void 0:c.hover):v.isRightFrozenColumn(e.col,e.row)?y=(null==(p=t.theme.rightFrozenStyle)?void 0:p.hover)||(t.isListTable()?null==(g=t.theme.bodyStyle)?void 0:g.hover:null==(f=t.theme.rowHeaderStyle)?void 0:f.hover):t.isHeader(e.col,e.row)||(y=null==(m=t.theme.bodyStyle)?void 0:m.hover),(0,r.WJ)(b,y,e.col,e.row,t)}function s(e,t,i,r){var l;let o,{highlightScope:a,disableHeader:s,cellPos:h}=e.hover,d=e.table,u=d.isHeader(t,i);if(!u||!s){if(a===n.p.single&&h.col===t&&h.row===i?o="cellBgColor":a===n.p.column&&h.col===t?o=h.col===t&&h.row===i?"cellBgColor":"inlineColumnBgColor":a===n.p.row&&h.row===i?o=h.col===t&&h.row===i?"cellBgColor":"inlineRowBgColor":a===n.p.cross&&(h.col===t&&h.row===i?o="cellBgColor":h.col===t?o="inlineColumnBgColor":h.row===i&&(o="inlineRowBgColor")),o){let e;if(u){let n=d.getHeaderDefine(t,i);e=null==n?void 0:n.disableHeaderHover,r.firstChild&&"axis"===r.firstChild.name&&(null==(l=d.options.hover)?void 0:l.disableAxisHover)&&(e=!0)}else{let r=d.getBodyColumnDefine(t,i);e=null==r?void 0:r.disableHover}e&&(o=void 0)}return o}}},1999:function(e,t,i){i.d(t,{Oq:()=>a,Wg:()=>s,fM:()=>h,tO:()=>u,vj:()=>d});var r=i(4654),n=i(64776),l=i(80971),o=i(63778);function a(e,t,i,n,l,o){let a=o.table.getRecordShowIndexByCell(e,t);if(a>=0){let e=o.table.dataSource.getIndexKey(a);"column"===n?(0,r.Z)(l)?(o.radioState[i]={},o.radioState[i][e]=l):o.radioState[i]=e:(o.radioState[i]||(o.radioState[i]={}),(0,r.Z)(l)?o.radioState[i][e]=l:o.radioState[i][e]=!0)}}function s(e,t,i){var o;let a=i.getBodyColumnDefine(e,t),s=null==a?void 0:a.field,h=i.getCellType(e,t);if((0,n.Z)(s)&&"radio"===h){let n=i.dataSource.getIndexKey(i.getRecordShowIndexByCell(e,t)),a=null==(o=i.stateManager.radioState)?void 0:o[s];if((0,r.Z)(a)){if(a===n)return!0}else if((0,l.Z)(a)){let e=a[n];if((0,r.Z)(e))return e}}return!1}function h(e,t,i,a,s,h,d){var u,c,p,g,f;let m=d.table.getRecordShowIndexByCell(e,t);if(m>=0){let e=d.table.dataSource.getIndexKey(m);if("column"===a){if(!(0,n.Z)(d.radioState[i])&&h)return(0,r.Z)(s)?(d.radioState[i]={},d.radioState[i][e]=s):d.radioState[i]=e,!0;if((0,r.Z)(d.radioState[i])&&!(0,r.Z)(s))return d.radioState[i]===e;if((0,r.Z)(d.radioState[i])&&(0,r.Z)(s)||(0,l.Z)(d.radioState[i])&&!(0,r.Z)(s))return!1;if((0,l.Z)(d.radioState[i])&&(0,r.Z)(s))return d.radioState[i][e]===s}else if("cell"===a){if(!(0,n.Z)(d.radioState[i])&&h)return d.radioState[i]={},(0,r.Z)(s)?d.radioState[i][e]=s:d.radioState[i][e]=!0,!0;if(!(0,n.Z)(null==(u=d.radioState[i])?void 0:u[e])&&h)return(0,r.Z)(s)?d.radioState[i][e]=s:d.radioState[i][e]=!0,!0;if((0,o.Z)(null==(c=d.radioState[i])?void 0:c[e])&&!(0,r.Z)(s))return d.radioState[i][e];if((0,o.Z)(null==(p=d.radioState[i])?void 0:p[e])&&(0,r.Z)(s)||(0,r.Z)(null==(g=d.radioState[i])?void 0:g[e])&&!(0,r.Z)(s))return!1;if((0,r.Z)(null==(f=d.radioState[i])?void 0:f[e])&&(0,r.Z)(s))return d.radioState[i][e]===s}}return h}function d(e,t,i,n){let l=n.scenegraph.getCell(e,t);if(l)if((0,r.Z)(i)){let e=l.getChildAt(i);null==e||e._handlePointerUp()}else{let e=l.getChildByName("radio");null==e||e._handlePointerUp()}}function u(e,t,i){let{radioState:r,table:n}=i;if(n.internalProps.transpose?(e=n.getRecordShowIndexByCell(e,0),t=n.getRecordShowIndexByCell(t,0)):(e=n.getRecordShowIndexByCell(0,e),t=n.getRecordShowIndexByCell(0,t)),e>t){let i=r[e];for(let i=e;i>t;i--)r[i]=r[i-1];r[t]=i}else if(e<t){let i=r[e];for(let i=e;i<t;i++)r[i]=r[i+1];r[t]=i}}},53803:function(e,t,i){i.d(t,{B:()=>l});var r=i(64776);let n=(e,t)=>{let i=0,r=e.length-1;for(;i<=r;){let n=Math.floor((i+r)/2);if(e[n]===t)return n;e[n]>t?r=n-1:i=n+1}return r<0?0:r};class l{constructor(){this._keys=[],this._vals={},this._sorted=!1}count(){return this._keys.length}values(){return this._vals}valueArr(){return Object.values(this._vals)}adjustOrder(e,t,i){let{_keys:r}=this;if(this._sorted||(r.sort((e,t)=>e<t?-1:+(e>t)),this._sorted=!0),e>t){let l=[];for(let o=n(r,e+i-1);o>=0;o--){let n=r[o];if(n>=e)l.push(this.get(n));else if(t<=n&&n<e)this.put(n+i,this.get(n));else if(n<t)break}for(let e=0;e<i;e++)this.put(t+e,l[i-1-e])}let{length:l}=r;if(e<t){let o=[];for(let a=n(r,e);a<l;a++){let n=r[a];if(n>=e&&n<e+i)o.push(this.get(n));else if(e+i<=n&&n<=t)this.put(n-i,this.get(n));else if(n>t)break}for(let e=0;e<i;e++)this.put(t+e,o[e])}}exchangeOrder(e,t,i,r,l){let{_keys:o}=this;if(this._sorted||(o.sort((e,t)=>e<t?-1:+(e>t)),this._sorted=!0),e>i){let r=[],a=[];for(let l=n(o,i);l<n(o,e)+t;l++){let i=o[l];i>=e&&i<e+t?a.push(this.get(i)):r.push(this.get(i))}for(let e=0;e<t;e++)this.put(l+e,a[e]);for(let e=0;e<r.length;e++)this.put(l+t+e,r[e])}else{let a=[],s=[];for(let l=n(o,e);l<n(o,i)+r;l++){let i=o[l];i>=e&&i<e+t?s.push(this.get(i)):a.push(this.get(i))}for(let e=0;e<t;e++)this.put(l+e,s[e]);for(let t=0;t<a.length;t++)this.put(e+t,a[t])}}del(e){delete this._vals[e];let t=this._keys.indexOf(e);-1!==t&&this._keys.splice(t,1)}put(e,t){e in this._vals||(this._keys.push(e),this._sorted=!1),this._vals[e]=t}get(e){return this._vals[e]}has(e){return(0,r.Z)(this._vals[e])}contain(e){return Object.values(this._vals).indexOf(e)>=0}each(e,t,i){let{_keys:r}=this,{length:l}=r;this._sorted||(r.sort((e,t)=>e<t?-1:+(e>t)),this._sorted=!0);for(let o=n(r,e);o<l;o++){let n=r[o];if(e<=n&&n<=t){if(!1===i(this.get(n),n))break}else if(t<n)return}}clear(){this._keys.length=0,this._vals={},this._sorted=!1}getLastIndex(){return this._keys[this._keys.length-1]}delLast(){let e=this.getLastIndex();this.del(e)}delAndReorder(e){if(!this.has(e))return;let t=this.getLastIndex();this.adjustOrder(e+1,e,t-e),this.delLast()}addAndReorder(e,t){if((0,r.Z)(t)){let i=this.getLastIndex();this.adjustOrder(e,e+1,i-e),this.put(e,t)}}}},77629:function(e,t,i){i.d(t,{U:()=>n});var r=i(63401);class n{constructor(e,t,i,n){this.bounds=new r.YZ,this.bounds.set(e,t,e+i,t+n)}static bounds(e,t,i,r){return new n(e,t,Math.round(i-e),Math.round(r-t))}get left(){return this.bounds.x1}set left(e){this.bounds.x1=e}get top(){return this.bounds.y1}set top(e){this.bounds.y1=e}get right(){return this.bounds.x2}set right(e){this.bounds.x2=e}get bottom(){return this.bounds.y2}set bottom(e){this.bounds.y2=e}get width(){return this.bounds.width()}set width(e){this.bounds.x2=this.bounds.x1+e}get height(){return this.bounds.height()}set height(e){this.bounds.y2=this.bounds.y1+e}offsetLeft(e){this.bounds.translate(e,0)}offsetTop(e){this.bounds.translate(0,e)}copy(){return new n(this.left,this.top,this.width,this.height)}contains(e){return this.bounds.encloses(e.bounds)}inPoint(e,t){return this.bounds.contains(e,t)}}},78921:function(e,t,i){i.d(t,{aR:()=>u,hU:()=>c});var r=i(54326),n=i(4654),l=i(83624),o=i(35759);function a(e){return e>=48&&e<=57}function s(e){return e>=97&&e<=122||e>=65&&e<=90||37===e}function h(e){return Error(`calc parse error: ${e}`)}let d={"*":3,"/":3,"+":2,"-":2};function u(e,t){var i;return"string"==typeof e?(i=e.trim(),function e(t,i){if(11===t.nodeType){let r=e(t.left,i),n=e(t.right,i);switch(t.op.value){case"+":return r+n;case"-":return r-n;case"*":return r*n;case"/":return r/n;default:throw Error(`calc error. unknown operator: ${t.op.value}`)}}if(10===t.nodeType)switch(t.unit){case"%":return t.value*i.full/100;case"px":return t.value;default:throw Error(`calc error. unknown unit: ${t.unit}`)}if(12===t.nodeType)return t.value;throw Error("calc error.")}(function e(t,i){function r(e){let t=e.pop(),r=e.pop(),n=e.pop();if(!(n&&n.nodeType&&r&&2===r.type&&t&&t.nodeType))throw h(i);return{nodeType:11,left:n,op:r,right:t}}let n=[];for(;t.length;){let l=t.shift();if(0===l.type&&"("===l.value){let r=0,l=o.IX.findIndex(t,e=>{if(0===e.type&&"("===e.value)r++;else if(0===e.type&&")"===e.value){if(!r)return!0;r--}return!1});if(-1===l)throw h(i);n.push(e(t.splice(0,l),i)),t.shift()}else if(2===l.type){if(n.length>=3){let e=n[n.length-2].value;d[l.value]<=d[e]&&n.push(r(n))}n.push(l)}else if(1===l.type){let{value:e,unit:t}=l;n.push({nodeType:10,value:e,unit:t})}else 3===l.type&&n.push({nodeType:12,value:l.value})}for(;n.length>1;)n.push(r(n));return n[0]}(function(e){let t=e.replace(/calc\(/g,"(").trim(),i=[],r=t.length;for(let l=0;l<r;l++){let o=t[l],s=o.charCodeAt(0);if("("===o||")"===o)i.push({value:o,type:0});else if("*"===o||"/"===o)i.push({value:o,type:2});else if("+"===o||"-"===o)l=function(e,l){if(l<r){let i=t[l],r=i.charCodeAt(0);if(a(r)||46===r)return n(e+i,l+1)}return i.push({value:e,type:2}),l}(o,l+1)-1;else if(a(s)||46===s)l=n(o,l+1)-1;else if(9!==s&&10!==s&&12!==s&&13!==s&&32!==s)throw h(e)}function n(n,l){let o=l;for(;o<r;o++){let l=t[o],d=l.charCodeAt(0);if(a(d))n+=l;else{if("."!==l){if(s(d))return function(e,n,l){let o=l;for(;o<r;o++){let e=t[o];if(!s(e.charCodeAt(0)))break;n+=e}return i.push({value:parseFloat(e),unit:n,type:1}),o}(n,l,o+1);break}if(n.indexOf(".")>=0)throw h(e);n+=l}}if("."===n)throw h(e);return i.push({value:parseFloat(n),type:3}),o}return i}(i),i),t)):e-0}function c(e){var t;return!!(0,l.Z)(e)&&!!e.endsWith("%")&&(t=e.substring(0,e.length-1),!(0,r.Z)(t)&&(!!(0,n.Z)(t)||+t==+t))}},57886:function(e,t,i){i.d(t,{D:()=>a});var r=i(73036);let n=e=>{switch(Object.prototype.toString.call(e)){case"[object Object]":return"object";case"[object Function]":return"function";case"[object Array]":return"array";case"[object String]":return"string";case"[object Number]":return"number";case"[object RegExp]":return"regExp";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Date]":return"date";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Error]":return"error";case"[object HTMLDocument]":return"document";case"[object global]":return"global";default:return null}},l=(e,t)=>n(e)===t,o=e=>l(e,"object");function a(e,t,i){let n,l,a,s,h,d,u=0,c=!1,p=!1,g=!0,f=!t&&0!==t&&"function"==typeof r.rF.getRequestAnimationFrame();if("function"!=typeof e)throw TypeError("Expected a function");function m(t){let i=n,r=l;return l=void 0,n=void 0,u=t,s=e.apply(r,i)}function b(e,t){return f?r.rF.getRequestAnimationFrame()(e):setTimeout(e,t)}function y(e){let i=e-d;return void 0===d||i>=t||i<0||c&&e-u>=a}function v(){let e=Date.now();if(y(e))return h=void 0,g&&n?m(e):(l=void 0,n=void 0,s);h=b(v,function(e){let i=e-u,r=t&&-(e-d);return c?Math.min(r,a-i):r}(e))}return t=+t||0,o(i)&&(p=!!i.leading,(c="maxWait"in i)&&(a=Math.max(+i.maxWait||0,t)),g="trailing"in i?!!i.trailing:g),function(...e){let i=Date.now(),r=y(i);if(n=e,l=this,d=i,r){if(void 0===h){var o;return u=o=d,h=b(v,t),p?m(o):s}if(c)return h=b(v,t),m(d)}return void 0===h&&(h=b(v,t)),s}}},37106:function(e,t,i){i.d(t,{a:()=>r});function r(e,t){let i=document.createElement(e);return t&&i.classList.add(...t),i}},74882:function(e,t,i){i.d(t,{X:()=>r,u:()=>n});class r{static get mode(){return r._mode||(r._mode=function(){let e="browser";try{"node"===window.type?e="node":"undefined"==typeof window||window.performance?"undefined"==typeof window&&(e="node"):e="miniApp"}catch(t){e="node"}return e}()),r._mode}static set mode(e){r._mode=e}static RegisterCreateCanvas(e){r.CreateCanvas=e}static RegisterLoadImage(e){r.LoadImage=e}static GetCreateCanvasFunc(){return r.CreateCanvas?r.CreateCanvas:"worker"===r.mode?(e=200,t=200)=>new OffscreenCanvas(e,t):void 0}static RegisterRequestAnimationFrame(e){r.RequestAnimationFrame=e()}static GetRequestAnimationFrame(){if(r.RequestAnimationFrame)return r.RequestAnimationFrame}static RegisterCancelAnimationFrame(e){r.CancelAnimationFrame=e()}static GetCancelAnimationFrame(){if(r.CancelAnimationFrame)return r.CancelAnimationFrame}}function n(){try{let e=window.getSelection();if(e){if("function"==typeof e.removeAllRanges)return void e.removeAllRanges();if("function"==typeof e.empty)return void e.empty();if("function"==typeof e.collapse)return void e.collapse(document.body,0)}}catch(e){}}r.dpr=0},51130:function(e,t,i){i.d(t,{Rk:()=>n,Zj:()=>p,aE:()=>l,cT:()=>o,ek:()=>u,gm:()=>c,hW:()=>g,ho:()=>r,tP:()=>d,yZ:()=>h,z8:()=>s,zY:()=>a});let r=16,n="Arial,sans-serif",l="#FFF",o="#000",a=1,s=[],h="#000",d=/^(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/,u="$$indicator$$",c='<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><rect x="0" y="0" width="1024" height="1024" rx="20%" ry="20%" fill="#ffffff" /><path  d="M810.666667 85.333333c70.688 0 128 57.312 128 128v597.333334c0 70.688-57.312 128-128 128H213.333333c-70.688 0-128-57.312-128-128V213.333333c0-70.688 57.312-128 128-128h597.333334z m0 85.333334H213.333333a42.666667 42.666667 0 0 0-42.613333 40.533333L170.666667 213.333333v597.333334a42.666667 42.666667 0 0 0 40.533333 42.613333L213.333333 853.333333h597.333334a42.666667 42.666667 0 0 0 42.613333-40.533333L853.333333 810.666667V213.333333a42.666667 42.666667 0 0 0-40.533333-42.613333L810.666667 170.666667zM549.333333 288a5.333333 5.333333 0 0 1 5.333334 5.333333V469.333333h176a5.333333 5.333333 0 0 1 5.333333 5.333334v74.666666a5.333333 5.333333 0 0 1-5.333333 5.333334H554.666667v176a5.333333 5.333333 0 0 1-5.333334 5.333333h-74.666666a5.333333 5.333333 0 0 1-5.333334-5.333333V554.666667H293.333333a5.333333 5.333333 0 0 1-5.333333-5.333334v-74.666666a5.333333 5.333333 0 0 1 5.333333-5.333334H469.333333V293.333333a5.333333 5.333333 0 0 1 5.333334-5.333333h74.666666z"></path></svg>',p='<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><rect x="0" y="0" width="1024" height="1024" rx="20%" ry="20%" fill="#ffffff" /><path d="M810.666667 85.333333c70.688 0 128 57.312 128 128v597.333334c0 70.688-57.312 128-128 128H213.333333c-70.688 0-128-57.312-128-128V213.333333c0-70.688 57.312-128 128-128h597.333334z m0 85.333334H213.333333a42.666667 42.666667 0 0 0-42.613333 40.533333L170.666667 213.333333v597.333334a42.666667 42.666667 0 0 0 40.533333 42.613333L213.333333 853.333333h597.333334a42.666667 42.666667 0 0 0 42.613333-40.533333L853.333333 810.666667V213.333333a42.666667 42.666667 0 0 0-40.533333-42.613333L810.666667 170.666667zM693.333333 469.333333a42.666667 42.666667 0 1 1 0 85.333334H330.666667a42.666667 42.666667 0 1 1 0-85.333334h362.666666z"></path></svg>',g={type:"line"}},35759:function(e,t,i){let r,n;i.d(t,{B:()=>M,Bd:()=>k,I0:()=>v,IX:()=>a,JO:()=>_,NC:()=>y,TS:()=>f,UG:()=>o,_Z:()=>C,ib:()=>S,j6:()=>A,l7:()=>p,nO:()=>R,oB:()=>T,tI:()=>b,vi:()=>m,vl:()=>g,yD:()=>x});var l=i(75665);let o="undefined"==typeof window||void 0===window.window,a={get find(){return r||(r=Array.prototype.find?(e,t)=>Array.prototype.find.call(e,t):(e,t)=>{let i=a.findIndex(e,t);return i>=0?e[i]:void 0})},get findIndex(){return n||(n=Array.prototype.findIndex?(e,t)=>Array.prototype.findIndex.call(e,t):(e,t)=>{let{length:i}=e;for(let r=0;r<i;r++)if(t(e[r],r,e))return r;return -1})}},{IE:s,Chrome:h,Firefox:d,Edge:u,Safari:c}=function(){if(o)return{IE:!1,Edge:!1,Chrome:!1,Firefox:!1,Safari:!1};let e=window.navigator.userAgent.toLowerCase();return{IE:!!/(msie|trident)/.exec(e),Edge:e.indexOf("edge")>-1,Chrome:e.indexOf("chrome")>-1&&-1===e.indexOf("edge"),Firefox:e.indexOf("firefox")>-1,Safari:e.indexOf("safari")>-1&&-1===e.indexOf("edge")}}();function p(...e){let t={};return e.forEach(e=>{for(let i in e)Object.defineProperty(t,i,{get:()=>e[i],set(t){e[i]=t},configurable:!0,enumerable:!0})}),t}function g(e,t,...i){let r=e;for(let e=0;e<i.length&&null!=r;e++)r=t(r,i[e]);return r}function f(e,...t){return g(e,(e,t)=>e[t],...t)}function m(e,...t){return"function"==typeof e?e(...t):e}function b(e){return!!(e&&"function"==typeof e.then)}function y(e,t){b(e)?e.then(e=>{t(e)}).catch(e=>{}):t(e)}function v(e,t){if(e[t])return e[t];let i=t.toLowerCase();if(e[i])return e[i];let r=t.toLowerCase();if(e[r])return e[r];for(let t in e)if(t.toLowerCase()===i)return e[t]}function _(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],e[1]]:2===e.length?[e[0],e[1],e[0],e[1]]:1===e.length?[e[0],e[0],e[0],e[0]]:[e[0],e[1],e[2],e[3]]:[e,e,e,e]}function C(e,t,i){return e.start.col<=t&&t<=e.end.col&&e.start.row<=i&&i<=e.end.row||e.end.col<=t&&t<=e.start.col&&e.end.row<=i&&i<=e.start.row||e.end.col<=t&&t<=e.start.col&&e.start.row<=i&&i<=e.end.row||e.start.col<=t&&t<=e.end.col&&e.end.row<=i&&i<=e.start.row}function x(e,t,i){for(let r=0;r<e.length;r++){let n=e[r],l=Math.min(n.start.col,n.end.col),o=Math.max(n.start.col,n.end.col),a=Math.min(n.start.row,n.end.row),s=Math.max(n.start.row,n.end.row);if(l<=t&&t<=o&&a<=i&&i<=s||o<=t&&t<=l&&s<=i&&i<=a)return!0}return!1}function w(e){return{start:{col:Math.min(e.start.col,e.end.col),row:Math.min(e.start.row,e.end.row)},end:{col:Math.max(e.start.col,e.end.col),row:Math.max(e.start.row,e.end.row)}}}function S(e,t){let i=w(e),r=w(t);return!!(Math.max(i.start.col,r.start.col)<=Math.min(i.end.col,r.end.col)&&Math.max(i.start.row,r.start.row)<=Math.min(i.end.row,r.end.row))}let A={isObject:function(e){return e===Object(e)}},k={endsWith:function(e,t,i){let r=(0,l.cw)(e);("number"!=typeof i||!isFinite(i)||Math.floor(i)!==i||i>r.length)&&(i=r.length),i-=t.length;let n=r.lastIndexOf(t,i);return -1!==n&&n===i}},M={isTouchEvent:function(e){return!!e.changedTouches}},T={toBoxArray:_},R=Function.prototype},15829:function(e,t,i){function r(e,t){if(!t||!t.proxy)return{colStart:0,colEnd:0,rowStart:0,rowEnd:0};let{mergeStartCol:i,mergeEndCol:r,mergeStartRow:n,mergeEndRow:l,col:o,row:a}=e;return{colStart:i,colEnd:r,rowStart:n,rowEnd:l}}function n(e,t){let i=e.start.col,r=e.end.col,n=e.start.row,l=e.end.row,o=i,a=r,s=n,h=l;for(let e=i;e<=r;e++)for(let i=n;i<=l;i++){let r=t.getCellRange(e,i);r&&(o=Math.min(o,r.start.col),a=Math.max(a,r.end.col),s=Math.min(s,r.start.row),h=Math.max(h,r.end.row))}return e.start.col=o,e.end.col=a,e.start.row=s,e.end.row=h,e}i.d(t,{T:()=>n,e:()=>r})},31864:function(e,t,i){i.d(t,{Iv:()=>o,KV:()=>s,NR:()=>h,Z7:()=>d,vP:()=>l,z5:()=>a});var r=i(64776),n=i(95723);function l(e){var t;return(null==e?void 0:e.hoverOn)||(null==e?void 0:e.horizontalVisible)&&"none"===(null==e?void 0:e.horizontalVisible)||!(null==e?void 0:e.horizontalVisible)&&"none"===(null==e?void 0:e.visible)?0:null!=(t=null==e?void 0:e.width)?t:7}function o(e){var t;return(null==e?void 0:e.hoverOn)||(null==e?void 0:e.verticalVisible)&&"none"===(null==e?void 0:e.verticalVisible)||!(null==e?void 0:e.verticalVisible)&&"none"===(null==e?void 0:e.visible)?0:null!=(t=null==e?void 0:e.width)?t:7}function a(e){return!!(0,r.Z)(e)&&(!(0,n.Z)(e)||e.some(e=>(0,r.Z)(e)))}function s(e){return 0===e||(0,n.Z)(e)&&e.every(e=>0===e)}function h(e){let t=e.stateManager.select.ranges,i=[];for(let e=0;e<t.length;e++){let r=t[e];i.push({range:r,style:{cellBorderColor:"blue",cellBorderLineWidth:2,cellBorderLineDash:[5,5]}})}e.stateManager.setCustomSelectRanges(i)}function d(e){e.stateManager.setCustomSelectRanges([])}},75665:function(e,t,i){i.d(t,{E5:()=>g,Ed:()=>w,K$:()=>v,MU:()=>_,P2:()=>p,Zf:()=>C,cw:()=>b,je:()=>function e(t,...i){if(!i.length)return t||{};let r=i.shift();if(a(t)&&a(r))for(let i in r)a(r[i])?(t[i]||Object.assign(t,{[i]:{}}),a(t[i])||Object.assign(t,{[i]:r[i]}),e(t[i],r[i])):null!==r[i]&&void 0!==r[i]&&Object.assign(t,{[i]:r[i]});return e(t,...i)},m7:()=>u,oM:()=>x,p4:()=>c,pr:()=>function e(t,i,r){let l=0;if(!i||i===n.g.collapse||i===n.g.none)return l;let o=r.filteredChildren?r.filteredChildren:r.children;if(o)for(let i=0;i<o.length;i++)l+=1,l+=e(Array.isArray(t)?t.concat([i]):[t,i],o[i].hierarchyState,o[i]);return l},tq:()=>y,yW:()=>function e(t,i,r){r(t),(null==t?void 0:t[i])&&Array.isArray(null==t?void 0:t[i])&&t[i].forEach(t=>e(t,i,r))},zX:()=>m});var r=i(64776),n=i(36781);let l=e=>{switch(Object.prototype.toString.call(e)){case"[object Object]":return"object";case"[object Function]":return"function";case"[object Array]":return"array";case"[object String]":return"string";case"[object Number]":return"number";case"[object RegExp]":return"regExp";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Date]":return"date";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Error]":return"error";case"[object HTMLDocument]":return"document";case"[object global]":return"global";default:return null}},o=(e,t)=>l(e)===t,a=e=>o(e,"object"),s=e=>o(e,"string"),h=e=>o(e,"number"),d=e=>o(e,"boolean");function u(e){return"function"==typeof e&&(e=e()),(0,r.Z)(e)?`${e}`:""}function c(e){if((null==e?void 0:e.length)<=0)return e;let t=e.length,i=e[0].length,r=Array(i);for(let n=0;n<t;n++)for(let l=0;l<i;l++)r[l]||(r[l]=Array(t)),r[l][n]=e[n][l];return r}function p(e,t){let i=null;return function(...r){i||(e.apply(this,r),i=setTimeout(()=>{i=null},t))}}function g(e,t){let i=null;return function(...r){i||(i=setTimeout(()=>{e.apply(this,r),i=null},t))}}function f(e,t){for(e=`${e}`;e.length<t;)e="0"+e;return e}function m(e,t,i){e=(e=e.replace(/^\s*|\s*$/,"")).replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");let n=Math.round(256*t)*(i?-1:1),l=e.match(RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),o=l&&(0,r.Z)(l[4])?l[4]:null,a=l?[l[1],l[2],l[3]]:e.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return`${parseInt(arguments[1],16)},${parseInt(arguments[2],16)},${parseInt(arguments[3],16)}`}).split(/,/);return l?`rgb${null!==o?"a":""}(${Math[i?"max":"min"](parseInt(a[0],10)+n,255*!i)}, ${Math[i?"max":"min"](parseInt(a[1],10)+n,255*!i)}, ${Math[i?"max":"min"](parseInt(a[2],10)+n,255*!i)}${null!==o?`, ${o}`:""})`:["#",f(Math[i?"max":"min"](parseInt(a[0],10)+n,255*!i).toString(16),2),f(Math[i?"max":"min"](parseInt(a[1],10)+n,255*!i).toString(16),2),f(Math[i?"max":"min"](parseInt(a[2],10)+n,255*!i).toString(16),2)].join("")}function b(e){return s(e)||h(e)||d(e)?e.toString():""}function y(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}function v(e,t,i){return"desc"!==i?e===t?0:e>t?1:-1:e===t?0:e<t?1:-1}function _(e,t){let i,r=e;for(;(i=t.shift())&&(r=r[i]););return r}function C(e){return/^-?\d+(\.\d+)?$/.test(e)}function x(e){let t=[];for(let i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}function w(e){let t=window.getSelection();if(t.rangeCount){let i=t.getRangeAt(0);return i.endOffset>i.startOffset&&e.contains(i.commonAncestorContainer)}return!1}},26902:function(e,t,i){var r,n,l,o;i.d(t,{F:()=>r,p:()=>n}),(l=r||(r={})).default="default",l.grabing="grabing",l.scrolling="scrolling",(o=n||(n={})).single="single",o.column="column",o.row="row",o.cross="cross",o.none="none"},61789:function(e,t,i){i.d(t,{Fn:()=>g,Js:()=>h,MR:()=>y,NF:()=>f,SL:()=>b,U4:()=>d,YJ:()=>l,ZP:()=>c,__:()=>u,hT:()=>a,ky:()=>p,ld:()=>s,y4:()=>m});var r=i(64776),n=i(37098);let l={};class o{constructor(e){var t;this.isAggregator=!0,this.isRecord=!0,this.records=[],this.children=[],this.key=e.key,this.field=e.field,this.formatFun=e.formatFun,this.isRecord=null!=(t=e.isRecord)?t:this.isRecord}clearCacheValue(){this._formatedValue=void 0}formatValue(e,t,i){return this._formatedValue||(this.formatFun?this._formatedValue=this.formatFun(this.value(),e,t,i):this._formatedValue=this.value()),this._formatedValue}reset(){this.records=[],this.changedValue=void 0,this.children=[],this.clearCacheValue()}}class a extends o{constructor(){super(...arguments),this.type=n.E.RECORD,this.isRecord=!0}push(e){e&&this.isRecord&&this.records&&(e.isAggregator?this.records.push(...e.records):this.records.push(e)),e.isAggregator&&this.children&&this.children.push(e),this.clearCacheValue()}deleteRecord(e){e&&(this.isRecord&&this.records&&(this.records=this.records.filter(t=>t!==e)),e.isAggregator&&this.children&&(this.children=this.children.filter(t=>t!==e))),this.clearCacheValue()}updateRecord(e,t){e&&t&&(this.isRecord&&this.records&&(this.records=this.records.map(i=>i===e?t:i)),e.isAggregator&&t.isAggregator&&this.children&&(this.children=this.children.map(i=>i===e?t:i)),this.clearCacheValue())}value(){var e;return null!=(e=this.changedValue)?e:this.records}reset(){this.children=[],this.changedValue=void 0,this.records=[]}recalculate(){}}class s extends o{constructor(){super(...arguments),this.type=n.E.NONE,this.isRecord=!0}push(e){e&&(this.isRecord&&(this.records=[e]),e.isAggregator&&this.children&&(this.children=[e]),this.field&&(this.fieldValue=e[this.field])),this.clearCacheValue()}deleteRecord(e){e&&(this.isRecord&&this.records&&(this.records=this.records.filter(t=>t!==e)),e.isAggregator&&this.children&&(this.children=this.children.filter(t=>t!==e)),this.field&&this.records.length&&(this.fieldValue=this.records[this.records.length-1][this.field])),this.clearCacheValue()}updateRecord(e,t){e&&t&&(this.isRecord&&this.records&&(this.records=this.records.map(i=>i===e?t:i)),e.isAggregator&&t.isAggregator&&this.children&&(this.children=this.children.map(i=>i===e?t:i)),this.field&&this.records.length&&(this.fieldValue=this.records[this.records.length-1][this.field]),this.clearCacheValue())}value(){var e;return null!=(e=this.changedValue)?e:this.fieldValue}reset(){this.children=[],this.changedValue=void 0,this.records=[],this.fieldValue=void 0}recalculate(){}}class h extends o{constructor(e){super(e),this.type=n.E.CUSTOM,this.isRecord=!0,this.values=[],this.aggregationFun=e.aggregationFun}push(e){e&&(this.isRecord&&this.records&&(e.isAggregator?this.records.push(...e.records):this.records.push(e)),e.isAggregator&&this.children&&this.children.push(e),this.field&&this.values.push(e[this.field])),this.clearCacheValue()}updateRecord(e,t){e&&t&&(this.isRecord&&this.records&&(this.records=this.records.map(i=>i===e?t:i)),e.isAggregator&&t.isAggregator&&this.children&&(this.children=this.children.map(i=>i===e?t:i)),this.field&&this.records.length&&(this.values=this.records.map(e=>e[this.field])),this.clearCacheValue())}deleteRecord(e){e&&(this.isRecord&&this.records&&(this.records=this.records.filter(t=>t!==e)),e.isAggregator&&this.children&&(this.children=this.children.filter(t=>t!==e)),this.field&&this.records.length&&(this.values=this.records.map(e=>e[this.field]))),this.clearCacheValue()}value(){var e,t;return this.fieldValue||(this.fieldValue=null==(e=this.aggregationFun)?void 0:e.call(this,this.values,this.records,this.field)),null!=(t=this.changedValue)?t:this.fieldValue}reset(){this.records=[],this.children=[],this.changedValue=void 0,this.fieldValue=void 0}recalculate(){this.fieldValue=void 0,this._formatedValue=void 0}}class d extends o{constructor(e){super(e),this.type=n.E.RECALCULATE,this.isRecord=!0,this.calculateFun=e.calculateFun,this.dependAggregators=e.dependAggregators,this.dependIndicatorKeys=e.dependIndicatorKeys}push(e){e&&this.isRecord&&this.records&&(e.isAggregator?this.records.push(...e.records):this.records.push(e)),this.children&&e.isAggregator&&this.children.push(e),this.clearCacheValue()}deleteRecord(e){e&&(this.isRecord&&this.records&&(this.records=this.records.filter(t=>t!==e)),e.isAggregator&&this.children&&(this.children=this.children.filter(t=>t!==e))),this.clearCacheValue()}updateRecord(e,t){e&&t&&(this.isRecord&&this.records&&(this.records=this.records.map(i=>i===e?t:i)),e.isAggregator&&t.isAggregator&&this.children&&(this.children=this.children.map(i=>i===e?t:i)),this.clearCacheValue())}value(){var e,t;if(!this.fieldValue){let t=function(e,t){let i={};for(let r=0;r<(null==t?void 0:t.length);r++){let n=e.find(e=>(null==e?void 0:e.key)===t[r]);n&&(i[n.key]=null==n?void 0:n.value())}return i}(this.dependAggregators,this.dependIndicatorKeys);this.fieldValue=null==(e=this.calculateFun)?void 0:e.call(this,t,this.records,this.field)}return null!=(t=this.changedValue)?t:this.fieldValue}reset(){this.records=[],this.children=[],this.changedValue=void 0,this.fieldValue=void 0}recalculate(){}}class u extends o{constructor(e){var t;super(e),this.type=n.E.SUM,this.sum=0,this.positiveSum=0,this.nagetiveSum=0,this.needSplitPositiveAndNegativeForSum=!1,this.needSplitPositiveAndNegativeForSum=null!=(t=e.needSplitPositiveAndNegative)&&t}push(e){if(e){if(this.isRecord&&this.records&&(e.isAggregator?this.records.push(...e.records):this.records.push(e)),e.isAggregator&&this.children){this.children.push(e);let t=e.value();this.sum+=null!=t?t:0,this.needSplitPositiveAndNegativeForSum&&(t>0?this.positiveSum+=t:t<0&&(this.nagetiveSum+=t))}else if(this.field&&!isNaN(parseFloat(e[this.field]))){let t=parseFloat(e[this.field]);this.sum+=t,this.needSplitPositiveAndNegativeForSum&&(t>0?this.positiveSum+=t:t<0&&(this.nagetiveSum+=t))}}this.clearCacheValue()}deleteRecord(e){if(e){if(this.isRecord&&this.records&&(this.records=this.records.filter(t=>t!==e)),e.isAggregator&&this.children){this.children=this.children.filter(t=>t!==e);let t=e.value();this.sum-=null!=t?t:0,this.needSplitPositiveAndNegativeForSum&&(t>0?this.positiveSum-=t:t<0&&(this.nagetiveSum-=t))}else if(this.field&&!isNaN(parseFloat(e[this.field]))){let t=parseFloat(e[this.field]);this.sum-=t,this.needSplitPositiveAndNegativeForSum&&(t>0?this.positiveSum-=t:t<0&&(this.nagetiveSum-=t))}}this.clearCacheValue()}updateRecord(e,t){if(e&&t){if(this.isRecord&&this.records&&(this.records=this.records.map(i=>i===e?t:i)),e.isAggregator&&this.children){let i=e.value();this.children=this.children.filter(t=>t!==e);let r=t.value();this.children.push(t),this.sum+=r-i,this.needSplitPositiveAndNegativeForSum&&(i>0?this.positiveSum-=i:i<0&&(this.nagetiveSum-=i),r>0?this.positiveSum+=r:r<0&&(this.nagetiveSum+=r))}else if(this.field&&!isNaN(parseFloat(e[this.field]))){let i=parseFloat(e[this.field]),r=parseFloat(t[this.field]);this.sum+=r-i,this.needSplitPositiveAndNegativeForSum&&(i>0?this.positiveSum-=i:i<0&&(this.nagetiveSum-=i),r>0?this.positiveSum+=r:r<0&&(this.nagetiveSum+=r))}this.clearCacheValue()}}value(){var e,t;return null!=(e=this.changedValue)?e:(null==(t=this.records)?void 0:t.length)>=1?this.sum:void 0}positiveValue(){return this.positiveSum}negativeValue(){return this.nagetiveSum}reset(){super.reset(),this.records=[],this.sum=0}recalculate(){if(this.sum=0,this._formatedValue=void 0,this.children&&this.children.length>0)for(let e=0;e<this.children.length;e++){let t=this.children[e];if(t.isAggregator){let e=t.value();this.sum+=null!=e?e:0,this.needSplitPositiveAndNegativeForSum&&(e>0?this.positiveSum+=e:e<0&&(this.nagetiveSum+=e))}}else if(this.records)for(let e=0;e<this.records.length;e++){let t=this.records[e];if(t.isAggregator){let e=t.value();this.sum+=null!=e?e:0,this.needSplitPositiveAndNegativeForSum&&(e>0?this.positiveSum+=e:e<0&&(this.nagetiveSum+=e))}else if(this.field&&!isNaN(parseFloat(t[this.field]))){let e=parseFloat(t[this.field]);this.sum+=e,this.needSplitPositiveAndNegativeForSum&&(e>0?this.positiveSum+=e:e<0&&(this.nagetiveSum+=e))}}}}class c extends o{constructor(){super(...arguments),this.type=n.E.COUNT,this.count=0}push(e){e&&(this.isRecord&&this.records&&(e.isAggregator?this.records.push(...e.records):this.records.push(e)),e.isAggregator?(this.children&&this.children.push(e),this.count+=e.value()):this.count++),this.clearCacheValue()}deleteRecord(e){e&&(this.isRecord&&this.records&&(this.records=this.records.filter(t=>t!==e)),e.isAggregator?(this.children&&(this.children=this.children.filter(t=>t!==e)),this.count-=e.value()):this.count--),this.clearCacheValue()}updateRecord(e,t){e&&t&&(this.isRecord&&this.records&&(this.records=this.records.map(i=>i===e?t:i)),e.isAggregator&&(this.count+=t.value()-e.value()),e.isAggregator&&t.isAggregator&&this.children&&(this.children=this.children.map(i=>i===e?t:i)))}value(){var e;return null!=(e=this.changedValue)?e:this.count}reset(){this.changedValue=void 0,this.children=[],this.records=[],this.count=0}recalculate(){if(this.count=0,this._formatedValue=void 0,this.children&&this.children.length>0)for(let e=0;e<this.children.length;e++){let t=this.children[e];if(t.isAggregator){let e=t.value();this.count+=null!=e?e:0}else this.count++}else if(this.records)for(let e=0;e<this.records.length;e++){let t=this.records[e];t.isAggregator?this.count+=t.value():this.count++}}}class p extends o{constructor(){super(...arguments),this.type=n.E.AVG,this.sum=0,this.count=0}push(e){e&&(this.isRecord&&this.records&&(e.isAggregator?this.records.push(...e.records):this.records.push(e)),e.isAggregator&&e.type===n.E.AVG?(this.children&&this.children.push(e),this.sum+=e.sum,this.count+=e.count):this.field&&!isNaN(parseFloat(e[this.field]))&&(this.sum+=parseFloat(e[this.field]),this.count++)),this.clearCacheValue()}deleteRecord(e){e&&(this.isRecord&&this.records&&(this.records=this.records.filter(t=>t!==e)),e.isAggregator&&e.type===n.E.AVG?(this.children&&(this.children=this.children.filter(t=>t!==e)),this.sum-=e.sum,this.count-=e.count):this.field&&!isNaN(parseFloat(e[this.field]))&&(this.sum-=parseFloat(e[this.field]),this.count--)),this.clearCacheValue()}updateRecord(e,t){e&&t&&(this.isRecord&&this.records&&(this.records=this.records.map(i=>i===e?t:i)),e.isAggregator&&e.type===n.E.AVG?(this.children&&t.isAggregator&&(this.children=this.children.map(i=>i===e?t:i)),this.sum+=t.sum-e.sum,this.count+=t.count-e.count):this.field&&!isNaN(parseFloat(e[this.field]))&&(this.sum+=parseFloat(t[this.field])-parseFloat(e[this.field])),this.clearCacheValue())}value(){var e,t;return null!=(e=this.changedValue)?e:(null==(t=this.records)?void 0:t.length)>=1?this.sum/this.count:void 0}reset(){this.changedValue=void 0,this.children=[],this.records=[],this.sum=0,this.count=0}recalculate(){if(this.sum=0,this.count=0,this._formatedValue=void 0,this.children&&this.children.length>0)for(let e=0;e<this.children.length;e++){let t=this.children[e];if(t.isAggregator&&t.type===n.E.AVG){let e=t.value();this.sum+=e*t.count,this.count+=t.count}}else if(this.records)for(let e=0;e<this.records.length;e++){let t=this.records[e];t.isAggregator&&t.type===n.E.AVG?(this.sum+=t.sum,this.count+=t.count):this.field&&!isNaN(parseFloat(t[this.field]))&&(this.sum+=parseFloat(t[this.field]),this.count++)}}}class g extends o{constructor(){super(...arguments),this.type=n.E.MAX,this.max=Number.MIN_SAFE_INTEGER}push(e){e&&(this.isRecord&&this.records&&(e.isAggregator?this.records.push(...e.records):this.records.push(e)),e.isAggregator?(this.children&&this.children.push(e),this.max=e.max>this.max?e.max:this.max):"number"==typeof e?this.max=e>this.max?e:this.max:this.field&&"number"==typeof e[this.field]?this.max=e[this.field]>this.max?e[this.field]:this.max:this.field&&!isNaN(e[this.field])&&(this.max=parseFloat(e[this.field])>this.max?parseFloat(e[this.field]):this.max)),this.clearCacheValue()}deleteRecord(e){e&&(this.isRecord&&this.records&&(this.records=this.records.filter(t=>t!==e)),e.isAggregator&&this.children&&(this.children=this.children.filter(t=>t!==e)),this.recalculate())}updateRecord(e,t){e&&t&&(this.isRecord&&this.records&&(this.records=this.records.map(i=>i===e?t:i)),e.isAggregator&&t.isAggregator&&this.children&&(this.children=this.children.map(i=>i===e?t:i)),this.recalculate())}value(){var e,t;return null!=(e=this.changedValue)?e:(null==(t=this.records)?void 0:t.length)>=1?this.max:void 0}reset(){this.records=[],this.changedValue=void 0,this.children=[],this.max=Number.MIN_SAFE_INTEGER}recalculate(){if(this.max=Number.MIN_SAFE_INTEGER,this._formatedValue=void 0,this.children&&this.children.length>0)for(let e=0;e<this.children.length;e++){let t=this.children[e];if(t.isAggregator){let e=t.value();this.max=Math.max(this.max,e)}}else if(this.records)for(let e=0;e<this.records.length;e++){let t=this.records[e];t.isAggregator?this.max=t.max>this.max?t.max:this.max:"number"==typeof t?this.max=t>this.max?t:this.max:this.field&&"number"==typeof t[this.field]?this.max=t[this.field]>this.max?t[this.field]:this.max:this.field&&!isNaN(t[this.field])&&(this.max=parseFloat(t[this.field])>this.max?parseFloat(t[this.field]):this.max)}}}class f extends o{constructor(){super(...arguments),this.type=n.E.MIN,this.min=Number.MAX_SAFE_INTEGER}push(e){e&&(this.isRecord&&this.records&&(e.isAggregator?this.records.push(...e.records):this.records.push(e)),e.isAggregator?(this.children&&this.children.push(e),this.min=e.min<this.min?e.min:this.min):"number"==typeof e?this.min=e<this.min?e:this.min:this.field&&"number"==typeof e[this.field]?this.min=e[this.field]<this.min?e[this.field]:this.min:this.field&&!isNaN(e[this.field])&&(this.min=parseFloat(e[this.field])<this.min?parseFloat(e[this.field]):this.min)),this.clearCacheValue()}deleteRecord(e){e&&(this.isRecord&&this.records&&(this.records=this.records.filter(t=>t!==e)),e.isAggregator&&this.children&&(this.children=this.children.filter(t=>t!==e)),this.recalculate())}updateRecord(e,t){e&&t&&(this.isRecord&&this.records&&(this.records=this.records.map(i=>i===e?t:i)),e.isAggregator&&t.isAggregator&&this.children&&(this.children=this.children.map(i=>i===e?t:i)),this.recalculate())}value(){var e,t;return null!=(e=this.changedValue)?e:(null==(t=this.records)?void 0:t.length)>=1?this.min:void 0}reset(){this.records=[],this.changedValue=void 0,this.children=[],this.min=Number.MAX_SAFE_INTEGER}recalculate(){if(this.min=Number.MAX_SAFE_INTEGER,this._formatedValue=void 0,this.children&&this.children.length>0)for(let e=0;e<this.children.length;e++){let t=this.children[e];if(t.isAggregator){let e=t.value();this.min=Math.min(this.min,e)}}else if(this.records)for(let e=0;e<this.records.length;e++){let t=this.records[e];t.isAggregator?this.min=t.min<this.min?t.min:this.min:"number"==typeof t?this.min=t<this.min?t:this.min:this.field&&"number"==typeof t[this.field]?this.min=t[this.field]<this.min?t[this.field]:this.min:this.field&&!isNaN(t[this.field])&&(this.min=parseFloat(t[this.field])<this.min?parseFloat(t[this.field]):this.min)}}}function m(e,t,i){if(i===n.F.NORMAL||i===n.F.normal)return 0;let r=i===n.F.DESC||i===n.F.desc?-1:1;return e&&t?e.toString().localeCompare(t.toString(),"zh")*r:e?+r:-1*r}function b(e,t,i){if(i===n.F.NORMAL||i===n.F.normal)return 0;let r=/(\d+)|(\D+)/g,l=/\d/,o=/^0/,a,s,h,d,u=0,c=0,p=i===n.F.DESC||i===n.F.desc?-1:1;if(null!==t&&null===e)return -1*p;if(null!==e&&null===t)return+p;if("number"==typeof e&&isNaN(e))return -1*p;if("number"==typeof t&&isNaN(t))return+p;if((u=+e)<(c=+t))return -1*p;if(u>c)return+p;if("number"==typeof e&&"number"!=typeof t)return -1*p;if("number"==typeof t&&"number"!=typeof e)return+p;if("number"==typeof e&&"number"==typeof t)return 0;if(isNaN(c)&&!isNaN(u))return -1*p;if(isNaN(u)&&!isNaN(c))return+p;if((a=String(e))===(h=String(t)))return 0;if(!l.test(a)||!l.test(h))return(a>h?1:-1)*p;for(a=a.match(r),h=h.match(r);a.length&&h.length;)if((s=a.shift())!==(d=h.shift()))return l.test(s)&&l.test(d)?(s.replace(o,".0")-d.replace(o,".0"))*p:(s>d?1:-1)*p;return(a.length-h.length)*p}function y(e){let t,i={},l={};for(let r=0;r<e.length;r++)i[t=e[r]]=r,"string"==typeof t&&(l[t.toLowerCase()]=r);return function(e,t,o){let a;if(o===n.F.NORMAL||o===n.F.normal)return 0;let s=o===n.F.DESC||o===n.F.desc?-1:1;return null!==i[e]&&void 0!==i[e]&&null!==i[t]&&void 0!==i[t]?a=i[e]-i[t]:null!==i[e]&&void 0!==i[e]?a=-1:null!==i[t]&&void 0!==i[t]?a=1:null!==l[e]&&void 0!==i[e]&&null!==l[t]&&void 0!==i[t]?a=l[e]-l[t]:null===l[e]||void 0===i[e]||null===l[t]||void 0===i[t]?a=0:null!==l[e]&&void 0!==i[e]?a=-1:null!==l[t]&&void 0!==i[t]&&(a=1),(0,r.Z)(a)?a*s:b(e,t,o)}}},39818:function(e,t,i){var r,n,l,o,a,s;i.d(t,{cI:()=>n,q0:()=>r,up:()=>l}),(o=r||(r={})).inlineFront="inlineFront",o.inlineEnd="inlineEnd",o.left="left",o.right="right",o.absoluteRight="absoluteRight",o.contentLeft="contentLeft",o.contentRight="contentRight",o.absolute="absolute",(a=n||(n={})).frozen="frozen",a.sort="sort",a.dropDown="dropDown",a.dropDownState="dropDownState",a.play="play",a.damagePic="damagePic",a.expand="expand",a.collapse="collapse",a.drillDown="drillDown",a.drillUp="drillUp",a.dragReorder="dragReorder",(s=l||(l={})).upwardIconName="sort_upward",s.downwardIconName="sort_downward",s.normalIconName="sort_normal",s.freezeIconName="freeze",s.frozenIconName="frozen",s.frozenCurrentIconName="frozenCurrent",s.dropdownIconName="dropdownIcon",s.expandIconName="expand",s.collapseIconName="collapse",s.dragReorderIconName="dragReorder",s.loadingIconName="loading"},37098:function(e,t,i){var r,n,l,o;i.d(t,{E:()=>r,F:()=>n}),(l=r||(r={})).RECORD="RECORD",l.NONE="NONE",l.SUM="SUM",l.MIN="MIN",l.MAX="MAX",l.AVG="AVG",l.COUNT="COUNT",l.CUSTOM="CUSTOM",l.RECALCULATE="RECALCULATE",(o=n||(n={})).ASC="ASC",o.DESC="DESC",o.NORMAL="NORMAL",o.desc="desc",o.asc="asc",o.normal="normal"},15240:function(e,t,i){i.d(t,{Z:()=>o,z:()=>l});var r=i(57198),n=i(35759);let l=(0,n.l7)(r.B,{PIVOT_SORT_CLICK:"pivot_sort_click",DRILLMENU_CLICK:"drillmenu_click"}),o=(0,n.l7)(r.B,{VCHART_EVENT_TYPE:"vchart_event_type"})},36781:function(e,t,i){var r,n,l,o;i.d(t,{g:()=>n,u:()=>r}),(l=r||(r={})).top="top",l.bottom="bottom",l.left="left",l.right="right",(o=n||(n={})).expand="expand",o.collapse="collapse",o.none="none",o.loading="loading"},20325:function(e,t,i){function r(e){return["small","middle","large"].includes(e)}function n(e){return!!e&&"number"==typeof e&&!Number.isNaN(e)}i.d(t,{T:()=>n,n:()=>r})},27338:function(e,t,i){i.d(t,{MW:()=>c});var r=i(44603),n=i(44194),l=i(10976);let o=(e,...t)=>{let i=e||{};return t.filter(Boolean).reduce((e,t)=>(Object.keys(t||{}).forEach(r=>{let n=i[r],a=t[r];if(n&&"object"==typeof n)if(a&&"object"==typeof a)e[r]=o(n,e[r],a);else{let{_default:t}=n;t&&(e[r]=e[r]||{},e[r][t]=(0,l.W)(e[r][t],a))}else e[r]=(0,l.W)(e[r],a)}),e),{})},a=(e,...t)=>n.useMemo(()=>o.apply(void 0,[e].concat(t)),[e].concat(t)),s=(...e)=>e.filter(Boolean).reduce((e,t={})=>(Object.keys(t).forEach(i=>{e[i]={...e[i],...t[i]}}),e),{}),h=(...e)=>n.useMemo(()=>s.apply(void 0,e),[].concat(e)),d=(e,t)=>{let i={...e};return Object.keys(t).forEach(e=>{if("_default"!==e){let r=t[e],n=i[e]||{};i[e]=r?d(n,r):n}}),i},u=(e,t)=>"function"==typeof e?e(t):e,c=(e,t,i,l)=>{let o=e.map(e=>e?u(e,i):void 0),s=t.map(e=>e?u(e,i):void 0),c=a.apply(void 0,[l].concat((0,r.Z)(o))),p=h.apply(void 0,(0,r.Z)(s));return n.useMemo(()=>l?[d(c,l),d(p,l)]:[c,p],[c,p,l])}},24659:function(e,t,i){i.d(t,{R:()=>l});var r=i(44194);let n=e=>"horizontal"===e||"vertical"===e,l=(e,t,i)=>(0,r.useMemo)(()=>{let r;return[r=n(e)?e:"boolean"==typeof t?t?"vertical":"horizontal":n(i)?i:"horizontal","vertical"===r]},[i,e,t])},8484:function(e,t,i){i.d(t,{Z:()=>r});let r=e=>null!=e},99833:function(e,t,i){i.d(t,{m:()=>r});let r=(e,t,i)=>void 0!==i?i:`${e}-${t}`},74123:function(e,t,i){i.d(t,{M2:()=>n,Tm:()=>o});var r=i(44194);function n(e){return e&&r.isValidElement(e)&&e.type===r.Fragment}let l=(e,t,i)=>r.isValidElement(e)?r.cloneElement(e,"function"==typeof i?i(e.props||{}):i):t;function o(e,t){return l(e,e,t)}},57438:function(e,t,i){i.d(t,{F:()=>l,Z:()=>n});var r=i(10976);let n=(e,t,i)=>(0,r.W)({[`${e}-status-success`]:"success"===t,[`${e}-status-warning`]:"warning"===t,[`${e}-status-error`]:"error"===t,[`${e}-status-validating`]:"validating"===t,[`${e}-has-feedback`]:i}),l=(e,t)=>t||e},22770:function(e,t,i){i.d(t,{ZP:()=>eS});var r,n=i(44194),l=i(10894),o=i(68176),a=i(10976),s=i(27338),h=i(8484),d=i(56899),u=i(73260),c=i(391),p=i(74123),g=i(58476);let f=(0,g.A1)("Wave",e=>{let{componentCls:t,colorPrimary:i}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${i})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:`box-shadow 0.4s ${e.motionEaseOutCirc},opacity 2s ${e.motionEaseOutCirc}`,"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut},opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}}}});var m=i(18839),b=i(35865);let y=`${c.Rf}-wave-target`;var v=i(27502),_=i(8082);let C="__rc_react_root__";async function x(e){return Promise.resolve().then(()=>{e[C]?.unmount(),delete e[C]})}function w(e){return e&&"string"==typeof e&&"#fff"!==e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&"rgba(255, 255, 255, 1)"!==e&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&"transparent"!==e&&"canvastext"!==e}function S(e){return Number.isNaN(e)?0:e}let A=e=>{let{className:t,target:i,component:r,colorSource:l}=e,o=n.useRef(null),[s,h]=n.useState(null),[d,c]=n.useState([]),[p,g]=n.useState(0),[f,b]=n.useState(0),[_,C]=n.useState(0),[A,k]=n.useState(0),[M,T]=n.useState(!1),R={left:p,top:f,width:_,height:A,borderRadius:d.map(e=>`${e}px`).join(" ")};function E(){let e=getComputedStyle(i);h(function(e,t=null){let i=getComputedStyle(e),{borderTopColor:r,borderColor:n,backgroundColor:l}=i;return t&&w(i[t])?i[t]:[r,n,l].find(w)??null}(i,l));let t="static"===e.position,{borderLeftWidth:r,borderTopWidth:n}=e;g(t?i.offsetLeft:S(-Number.parseFloat(r))),b(t?i.offsetTop:S(-Number.parseFloat(n))),C(i.offsetWidth),k(i.offsetHeight);let{borderTopLeftRadius:o,borderTopRightRadius:a,borderBottomLeftRadius:s,borderBottomRightRadius:d}=e;c([o,a,d,s].map(e=>S(Number.parseFloat(e))))}if(s&&(R["--wave-color"]=s),n.useEffect(()=>{if(i){let e,t=(0,m.Z)(()=>{E(),T(!0)});return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(E)).observe(i),()=>{m.Z.cancel(t),e?.disconnect()}}},[i]),!M)return null;let P=("Checkbox"===r||"Radio"===r)&&i?.classList.contains(y);return n.createElement(v.ZP,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(e,t)=>{if(t.deadline||"opacity"===t.propertyName){let e=o.current?.parentElement;x(e).then(()=>{e?.remove()})}return!1}},({className:e},i)=>n.createElement("div",{ref:(0,u.sQ)(o,i),className:(0,a.W)(t,e,{"wave-quick":P}),style:R}))},k=(e,t)=>{let{component:i}=t;if("Checkbox"===i&&!e.querySelector("input")?.checked)return;let r=document.createElement("div");r.style.position="absolute",r.style.left="0px",r.style.top="0px",e?.insertBefore(r,e?.firstChild);var l=n.createElement(A,{...t,target:e});let o=r[C]||(0,_.createRoot)(r);o.render(l),r[C]=o},M=(e,t,i,r)=>{let{wave:o}=n.useContext(c.E_),[,a,s]=(0,b.ZP)(),h=(0,l.zX)(n=>{let l=e.current;if(o?.disabled||!l)return;let h=l.querySelector(`.${y}`)||l,{showEffect:d}=o||{};(d||k)(h,{className:t,token:a,component:i,event:n,hashId:s,colorSource:r})}),d=n.useRef(null);return n.useEffect(()=>()=>{m.Z.cancel(d.current)},[]),e=>{m.Z.cancel(d.current),d.current=(0,m.Z)(()=>{h(e)})}},T=e=>{let{children:t,disabled:i,component:r,colorSource:l}=e,{getPrefixCls:o}=(0,n.useContext)(c.E_),s=(0,n.useRef)(null),h=o("wave"),g=f(h),m=M(s,(0,a.W)(h,g),r,l);if(n.useEffect(()=>{let e=s.current;if(!e||e.nodeType!==window.Node.ELEMENT_NODE||i)return;let t=t=>{!(0,d.Z)(t.target)||!e.getAttribute||e.getAttribute("disabled")||e.disabled||e.className.includes("disabled")&&!e.className.includes("disabled:")||"true"===e.getAttribute("aria-disabled")||e.className.includes("-leave")||m(t)};return e.addEventListener("click",t,!0),()=>{e.removeEventListener("click",t,!0)}},[i]),!n.isValidElement(t))return t??null;let b=(0,u.Yr)(t)?(0,u.sQ)((0,u.C4)(t),s):s;return(0,p.Tm)(t,{ref:b})};var R=i(4147),E=i(54544),P=i(39231);let B=n.createContext(void 0);var I=i(44603);let L=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],F=/^[\u4E00-\u9FA5]{2}$/,H=F.test.bind(F);function O(e){return"string"==typeof e}function D(e){return"text"===e||"link"===e}["default","primary","danger"].concat((0,I.Z)(L));var z=i(24281);let W=(0,n.forwardRef)((e,t)=>{let{className:i,style:r,children:l,prefixCls:o}=e,s=(0,a.W)(`${o}-icon`,i);return n.createElement("span",{ref:t,className:s,style:r},l)}),Z=(0,n.forwardRef)((e,t)=>{let{prefixCls:i,className:r,style:l,iconClassName:o}=e,s=(0,a.W)(`${i}-loading-icon`,r);return n.createElement(W,{prefixCls:i,className:s,style:l,ref:t},n.createElement(z.Z,{className:o}))}),N=()=>({width:0,opacity:0,transform:"scale(0)"}),$=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),j=e=>{let{prefixCls:t,loading:i,existIcon:r,className:l,style:o,mount:s}=e;return r?n.createElement(Z,{prefixCls:t,className:l,style:o}):n.createElement(v.ZP,{visible:!!i,motionName:`${t}-loading-icon-motion`,motionAppear:!s,motionEnter:!s,motionLeave:!s,removeOnLeave:!0,onAppearStart:N,onAppearActive:$,onEnterStart:N,onEnterActive:$,onLeaveStart:$,onLeaveActive:N},({className:e,style:i},r)=>{let s={...o,...i};return n.createElement(Z,{prefixCls:t,className:(0,a.W)(l,e),style:s,ref:r})})};var G=i(55839),V=i(83447),U=i(64033);let K=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),X=e=>{let{componentCls:t,fontSize:i,lineWidth:r,groupBorderColor:n,colorErrorHover:l}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(r).mul(-1).equal(),[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:i}},K(`${t}-primary`,n),K(`${t}-danger`,l)]}};var Y=i(70062),q=i(86873),J=i(38187);let Q=e=>Math.round(Number(e||0)),ee=e=>{if(e instanceof J.t)return e;if(e&&"object"==typeof e&&"h"in e&&"b"in e){let{b:t,...i}=e;return{...i,v:t}}return"string"==typeof e&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e};class et extends J.t{constructor(e){super(ee(e))}toHsbString(){let e=this.toHsb(),t=Q(100*e.s),i=Q(100*e.b),r=Q(e.h),n=e.a,l=`hsb(${r}, ${t}%, ${i}%)`,o=`hsba(${r}, ${t}%, ${i}%, ${n.toFixed(2*(0!==n))})`;return 1===n?l:o}toHsb(){let{v:e,...t}=this.toHsv();return{...t,b:e,a:this.a}}}(r="#1677ff")instanceof et||new et(r);let ei=(e,t)=>e?.replace(/[^\w/]/g,"").slice(0,t?8:6)||"",er=(e,t)=>e?ei(e,t):"",en=(0,q.Z)(function e(t){if((0,Y.Z)(this,e),this.cleared=!1,t instanceof e){this.metaColor=t.metaColor.clone(),this.colors=t.colors?.map(t=>({color:new e(t.color),percent:t.percent})),this.cleared=t.cleared;return}let i=Array.isArray(t);i&&t.length?(this.colors=t.map(({color:t,percent:i})=>({color:new e(t),percent:i})),this.metaColor=new et(this.colors[0].color.metaColor)):this.metaColor=new et(i?"":t),t&&(!i||this.colors)||(this.metaColor=this.metaColor.setA(0),this.cleared=!0)},[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return er(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){let{colors:e}=this;if(e){let t=e.map(e=>`${e.color.toRgbString()} ${e.percent}%`).join(", ");return`linear-gradient(90deg, ${t})`}return this.metaColor.toRgbString()}},{key:"equals",value:function(e){return!!e&&this.isGradient()===e.isGradient()&&(this.isGradient()?this.colors.length===e.colors.length&&this.colors.every((t,i)=>{let r=e.colors[i];return t.percent===r.percent&&t.color.equals(r.color)}):this.toHexString()===e.toHexString())}}]),el=(e,t)=>{let{r:i,g:r,b:n,a:l}=e.toRgb(),o=new et(e.toRgbString()).onBackground(t).toHsv();return l<=.5?o.v>.5:.299*i+.587*r+.114*n>192};var eo=i(2307),ea=i(82274);let es=e=>{let{paddingInline:t,onlyIconSize:i,borderColorDisabled:r}=e;return(0,U.IX)(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:0,buttonIconOnlyFontSize:i,colorBorderDisabled:r})},eh=e=>{let t=e.contentFontSize??e.fontSize,i=e.contentFontSizeSM??e.fontSize,r=e.contentFontSizeLG??e.fontSizeLG,n=e.contentLineHeight??(0,eo.D)(t),l=e.contentLineHeightSM??(0,eo.D)(i),o=e.contentLineHeightLG??(0,eo.D)(r),a=el(new en(e.colorBgSolid),"#fff")?"#000":"#fff",s=L.reduce((t,i)=>({...t,[`${i}ShadowColor`]:`0 ${(0,G.bf)(e.controlOutlineWidth)} 0 ${(0,ea.Z)(e[`${i}1`],e.colorBgContainer)}`}),{}),h=e.colorBgContainerDisabled,d=e.colorBgContainerDisabled;return{...s,fontWeight:400,iconGap:e.marginXS,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorderDisabled,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:e.colorText,textTextHoverColor:e.colorText,textTextActiveColor:e.colorText,textHoverBg:e.colorFillTertiary,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,solidTextColor:a,contentFontSize:t,contentFontSizeSM:i,contentFontSizeLG:r,contentLineHeight:n,contentLineHeightSM:l,contentLineHeightLG:o,paddingBlock:Math.max((e.controlHeight-t*n)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-i*l)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-r*o)/2-e.lineWidth,0),defaultBgDisabled:h,dashedBgDisabled:d}},ed=e=>{let{componentCls:t,antCls:i}=e,r=(0,g.o_)(i,"btn");return{[t]:[{[r("border-width")]:"1px",[r("border-color")]:"#000",[r("border-color-hover")]:`var(${r("border-color")})`,[r("border-color-active")]:`var(${r("border-color")})`,[r("border-color-disabled")]:`var(${r("border-color")})`,[r("border-style")]:"solid",[r("text-color")]:"#000",[r("text-color-hover")]:`var(${r("text-color")})`,[r("text-color-active")]:`var(${r("text-color")})`,[r("text-color-disabled")]:`var(${r("text-color")})`,[r("bg-color")]:"#ddd",[r("bg-color-hover")]:`var(${r("bg-color")})`,[r("bg-color-active")]:`var(${r("bg-color")})`,[r("bg-color-disabled")]:e.colorBgContainerDisabled,[r("bg-color-container")]:e.colorBgContainer,[r("shadow")]:"none"},{border:`var(${r("border-width")}) var(${r("border-style")}) var(${r("border-color")})`,color:`var(${r("text-color")})`,backgroundColor:`var(${r("bg-color")})`,[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":{border:`var(${r("border-width")}) var(${r("border-style")}) var(${r("border-color-hover")})`,color:`var(${r("text-color-hover")})`,backgroundColor:`var(${r("bg-color-hover")})`},"&:active":{border:`var(${r("border-width")}) var(${r("border-style")}) var(${r("border-color-active")})`,color:`var(${r("text-color-active")})`,backgroundColor:`var(${r("bg-color-active")})`}}},{[`&${t}-variant-solid`]:{[r("solid-bg-color")]:`var(${r("color-base")})`,[r("solid-bg-color-hover")]:`var(${r("color-hover")})`,[r("solid-bg-color-active")]:`var(${r("color-active")})`,[r("border-color")]:"transparent",[r("text-color")]:e.colorTextLightSolid,[r("bg-color")]:`var(${r("solid-bg-color")})`,[r("bg-color-hover")]:`var(${r("solid-bg-color-hover")})`,[r("bg-color-active")]:`var(${r("solid-bg-color-active")})`,boxShadow:`var(${r("shadow")})`},[`&${t}-variant-outlined, &${t}-variant-dashed`]:{[r("border-color")]:`var(${r("color-base")})`,[r("border-color-hover")]:`var(${r("color-hover")})`,[r("border-color-active")]:`var(${r("color-active")})`,[r("bg-color")]:`var(${r("bg-color-container")})`,[r("text-color")]:`var(${r("color-base")})`,[r("text-color-hover")]:`var(${r("color-hover")})`,[r("text-color-active")]:`var(${r("color-active")})`,boxShadow:`var(${r("shadow")})`},[`&${t}-variant-dashed`]:{[r("border-style")]:"dashed",[r("bg-color-disabled")]:e.dashedBgDisabled},[`&${t}-variant-filled`]:{[r("border-color")]:"transparent",[r("text-color")]:`var(${r("color-base")})`,[r("bg-color")]:`var(${r("color-light")})`,[r("bg-color-hover")]:`var(${r("color-light-hover")})`,[r("bg-color-active")]:`var(${r("color-light-active")})`},[`&${t}-variant-text, &${t}-variant-link`]:{[r("border-color")]:"transparent",[r("text-color")]:`var(${r("color-base")})`,[r("text-color-hover")]:`var(${r("color-hover")})`,[r("text-color-active")]:`var(${r("color-active")})`,[r("bg-color")]:"transparent",[r("bg-color-hover")]:"transparent",[r("bg-color-active")]:"transparent",[`&:disabled, &${e.componentCls}-disabled`]:{background:"transparent",borderColor:"transparent"}},[`&${t}-variant-text`]:{[r("bg-color-hover")]:`var(${r("color-light")})`,[r("bg-color-active")]:`var(${r("color-light-active")})`}},{[`&${t}-variant-link`]:{[r("color-base")]:e.colorLink,[r("color-hover")]:e.colorLinkHover,[r("color-active")]:e.colorLinkActive},[`&${t}-color-primary`]:{[r("color-base")]:e.colorPrimary,[r("color-hover")]:e.colorPrimaryHover,[r("color-active")]:e.colorPrimaryActive,[r("color-light")]:e.colorPrimaryBg,[r("color-light-hover")]:e.colorPrimaryBgHover,[r("color-light-active")]:e.colorPrimaryBorder,[r("shadow")]:e.primaryShadow,[`&${t}-variant-solid`]:{[r("text-color")]:e.primaryColor,[r("text-color-hover")]:`var(${r("text-color")})`,[r("text-color-active")]:`var(${r("text-color")})`}},[`&${t}-color-dangerous`]:{[r("color-base")]:e.colorError,[r("color-hover")]:e.colorErrorHover,[r("color-active")]:e.colorErrorActive,[r("color-light")]:e.colorErrorBg,[r("color-light-hover")]:e.colorErrorBgFilledHover,[r("color-light-active")]:e.colorErrorBgActive,[r("shadow")]:e.dangerShadow,[`&${t}-variant-solid`]:{[r("text-color")]:e.dangerColor,[r("text-color-hover")]:`var(${r("text-color")})`,[r("text-color-active")]:`var(${r("text-color")})`}},[`&${t}-color-default`]:{[r("solid-bg-color")]:e.colorBgSolid,[r("solid-bg-color-hover")]:e.colorBgSolidHover,[r("solid-bg-color-active")]:e.colorBgSolidActive,[r("color-base")]:e.defaultBorderColor,[r("color-hover")]:e.defaultHoverBorderColor,[r("color-active")]:e.defaultActiveBorderColor,[r("color-light")]:e.colorFillTertiary,[r("color-light-hover")]:e.colorFillSecondary,[r("color-light-active")]:e.colorFill,[r("text-color")]:e.colorText,[r("text-color-hover")]:e.defaultHoverBorderColor,[r("text-color-active")]:e.defaultActiveBorderColor,[r("shadow")]:e.defaultShadow,[`&${t}-variant-solid`]:{[r("text-color")]:e.solidTextColor,[r("text-color-hover")]:`var(${r("text-color")})`,[r("text-color-active")]:`var(${r("text-color")})`},[`&${t}-variant-filled, &${t}-variant-text`]:{[r("text-color-hover")]:`var(${r("text-color")})`,[r("text-color-active")]:`var(${r("text-color")})`},[`&${t}-variant-outlined, &${t}-variant-dashed`]:{[r("bg-color-hover")]:e.defaultHoverBg,[r("bg-color-active")]:e.defaultActiveBg},[`&${t}-background-ghost`]:{[`&${t}-variant-outlined, &${t}-variant-dashed`]:{[r("text-color")]:e.defaultGhostColor,[r("border-color")]:e.defaultGhostBorderColor}}}},L.map(i=>{let n=e[`${i}6`],l=e[`${i}1`],o=e[`${i}5`],a=e[`${i}2`],s=e[`${i}3`],h=e[`${i}7`],d=e[`${i}ShadowColor`];return{[`&${t}-color-${i}`]:{[r("color-base")]:n,[r("color-hover")]:o,[r("color-active")]:h,[r("color-light")]:l,[r("color-light-hover")]:a,[r("color-light-active")]:s,[r("shadow")]:d}}}),{[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",borderColor:e.colorBorderDisabled,background:`var(${r("bg-color-disabled")})`,color:e.colorTextDisabled,boxShadow:"none"}},{[`&${t}-background-ghost`]:{[r("bg-color")]:"transparent",[r("shadow")]:"none"}}]}},eu=e=>{let{componentCls:t,iconCls:i,fontWeight:r,opacityLoading:n,motionDurationSlow:l,motionEaseInOut:o,iconGap:a,calc:s}=e;return{[t]:{outline:"none",position:"relative",display:"inline-flex",gap:a,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation","&:disabled > *":{pointerEvents:"none"},[`${t}-icon > svg`]:(0,V.Ro)(),"> a":{color:"currentColor"},"&:not(:disabled)":(0,V.Qy)(e),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${i})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${t}-icon-only`]:{paddingInline:0,[`&${t}-compact-item`]:{flex:"none"}},[`&${t}-loading`]:{opacity:n,cursor:"default"},[`${t}-loading-icon`]:{transition:["width","opacity","margin"].map(e=>`${e} ${l} ${o}`).join(",")},[`&:not(${t}-icon-end)`]:{[`${t}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:s(a).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:s(a).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${t}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:s(a).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:s(a).mul(-1).equal()}}}}}},ec=e=>({minWidth:e.controlHeight,paddingInline:0,borderRadius:"50%"}),ep=(e,t="")=>{let{componentCls:i,controlHeight:r,fontSize:n,borderRadius:l,buttonPaddingHorizontal:o,iconCls:a,buttonPaddingVertical:s,buttonIconOnlyFontSize:h}=e;return[{[t]:{fontSize:n,height:r,padding:`${(0,G.bf)(s)} ${(0,G.bf)(o)}`,borderRadius:l,[`&${i}-icon-only`]:{width:r,[a]:{fontSize:h}}}},{[`${i}${i}-circle${t}`]:ec(e)},{[`${i}${i}-round${t}`]:{borderRadius:e.controlHeight,[`&:not(${i}-icon-only)`]:{paddingInline:e.buttonPaddingHorizontal}}}]},eg=e=>ep((0,U.IX)(e,{fontSize:e.contentFontSize}),e.componentCls),ef=e=>ep((0,U.IX)(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:0,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM}),`${e.componentCls}-sm`),em=e=>ep((0,U.IX)(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:0,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG}),`${e.componentCls}-lg`),eb=e=>{let{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},ey=(0,g.I$)("Button",e=>{let t=es(e);return[eu(t),eg(t),ef(t),em(t),eb(t),ed(t),X(t)]},eh,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});var ev=i(10469);let e_=e=>{let{componentCls:t,colorPrimaryHover:i,lineWidth:r,calc:n}=e,l=n(r).mul(-1).equal(),o=e=>{let n=`${t}-compact${e?"-vertical":""}-item`,o=`${n}${t}-primary:not([disabled])`;return{[n]:{transition:"none"},[`${o} + ${o}::before`]:{position:"absolute",top:e?l:0,insetInlineStart:e?0:l,backgroundColor:i,content:'""',width:e?"100%":r,height:e?r:"100%"}}};return{...o(),...o(!0)}},eC=(0,g.bk)(["Button","compact"],e=>{let t=es(e);return[(0,ev.c)(t),function(e){var t,i;let r=`${e.componentCls}-compact-vertical`;return{[r]:{...(t=e.componentCls,{[`&-item:not(${r}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},[`&-item:not(${t}-status-success)`]:{zIndex:2},"&-item":{"&:hover,&:focus,&:active":{zIndex:3},"&[disabled]":{zIndex:0}}}),...(i=e.componentCls,{[`&-item:not(${r}-first-item):not(${r}-last-item)`]:{borderRadius:0},[`&-item${r}-first-item:not(${r}-last-item)`]:{[`&, &${i}-sm, &${i}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${r}-last-item:not(${r}-first-item)`]:{[`&, &${i}-sm, &${i}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}})}}}(t),e_(t)]},eh),ex={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},ew=n.forwardRef((e,t)=>{let i,{_skipSemantic:r,loading:d=!1,prefixCls:u,color:g,variant:f,type:m,danger:b=!1,shape:y,size:v,disabled:_,className:C,rootClassName:x,children:w,icon:S,iconPosition:A,iconPlacement:k,ghost:M=!1,block:I=!1,htmlType:L="button",classNames:F,styles:z,style:Z,autoInsertSpace:N,autoFocus:$,...G}=e,V=(0,l.qo)(w),U=m||"default",{button:K}=n.useContext(c.E_),X=y||K?.shape||"default",[Y,q]=(0,n.useMemo)(()=>{if(g&&f)return[g,f];if(m||b){let e=ex[U]||[];return b?["danger",e[1]]:e}return K?.color&&K?.variant?[K.color,K.variant]:["default","outlined"]},[g,f,m,b,K?.color,K?.variant,U]),[J,Q]=(0,n.useMemo)(()=>M&&"solid"===q?[Y,"outlined"]:[Y,q],[Y,q,M]),ee="danger"===J,et=ee?"dangerous":J,{getPrefixCls:ei,direction:er,autoInsertSpace:en,className:el,style:eo,classNames:ea,styles:es}=(0,c.dj)("button"),eh=N??en??!0,ed=ei("btn",u),[eu,ec]=ey(ed),ep=(0,n.useContext)(R.Z),eg=_??ep,ef=(0,n.useContext)(B),em=(0,n.useMemo)(()=>(function(e){if("object"==typeof e&&e){let t=e?.delay;return{loading:(t=Number.isNaN(t)||"number"!=typeof t?0:t)<=0,delay:t}}return{loading:!!e,delay:0}})(d),[d]),[eb,ev]=(0,n.useState)(em.loading),[e_,ew]=(0,n.useState)(!1),eS=(0,n.useRef)(null),eA=(0,l.x1)(t,eS),ek=1===V.length&&!S&&!D(Q),eM=(0,n.useRef)(!0);n.useEffect(()=>(eM.current=!1,()=>{eM.current=!0}),[]),(0,o.Z)(()=>{let e=null;return em.delay>0?e=setTimeout(()=>{e=null,ev(!0)},em.delay):ev(em.loading),function(){e&&(clearTimeout(e),e=null)}},[em.delay,em.loading]),(0,n.useEffect)(()=>{if(!eS.current||!eh)return;let e=eS.current.textContent||"";ek&&H(e)?e_||ew(!0):e_&&ew(!1)}),(0,n.useEffect)(()=>{$&&eS.current&&eS.current.focus()},[]);let eT=n.useCallback(t=>{if(eb||eg)return void t.preventDefault();e.onClick?.(("href"in e,t))},[e.onClick,eb,eg]),{compactSize:eR,compactItemClassnames:eE}=(0,P.ri)(ed,er),eP=(0,E.Z)(e=>v??eR??ef??e),eB=eP?({large:"lg",small:"sm",middle:void 0})[eP]??"":"",eI=eb?"loading":S,eL=k??A??"start",eF=(0,l.CE)(G,["navigate"]),eH={...e,type:U,color:J,variant:Q,danger:ee,shape:X,size:eP,disabled:eg,loading:eb,iconPlacement:eL},[eO,eD]=(0,s.MW)([r?void 0:ea,F],[r?void 0:es,z],{props:eH}),ez=(0,a.W)(ed,eu,ec,{[`${ed}-${X}`]:"default"!==X&&"square"!==X&&X,[`${ed}-${U}`]:U,[`${ed}-dangerous`]:b,[`${ed}-color-${et}`]:et,[`${ed}-variant-${Q}`]:Q,[`${ed}-${eB}`]:eB,[`${ed}-icon-only`]:!w&&0!==w&&!!eI,[`${ed}-background-ghost`]:M&&!D(Q),[`${ed}-loading`]:eb,[`${ed}-two-chinese-chars`]:e_&&eh&&!eb,[`${ed}-block`]:I,[`${ed}-rtl`]:"rtl"===er,[`${ed}-icon-end`]:"end"===eL},eE,C,x,el,eO.root),eW={...eD.root,...eo,...Z},eZ={className:eO.icon,style:eD.icon},eN=e=>n.createElement(W,{prefixCls:ed,...eZ},e),e$=n.createElement(j,{existIcon:!!S,prefixCls:ed,loading:eb,mount:eM.current,...eZ});i=S&&!eb?eN(S):d&&"object"==typeof d&&d.icon?eN(d.icon):e$;let ej=(0,h.Z)(w)?function(e,t,i,r){let l=!1,o=[];return n.Children.forEach(e,e=>{let t=typeof e,i="string"===t||"number"===t;if(l&&i){let t=o.length-1,i=o[t];o[t]=`${i}${e}`}else o.push(e);l=i}),n.Children.map(o,e=>(function(e,t,i,r){if(!(0,h.Z)(e)||""===e)return;let l=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&O(e.type)&&H(e.props.children)?(0,p.Tm)(e,e=>({...e,children:e.children.split("").join(l),className:r,style:i})):O(e)?n.createElement("span",{className:r,style:i},H(e)?e.split("").join(l):e):(0,p.M2)(e)?n.createElement("span",{className:r,style:i},e):(0,p.Tm)(e,e=>({...e,className:(0,a.W)(e.className,r)||void 0,style:{...e.style,...i}}))})(e,t,i,r))}(w,ek&&eh,eD.content,eO.content):null;if(void 0!==eF.href)return n.createElement("a",{...eF,className:(0,a.W)(ez,{[`${ed}-disabled`]:eg}),href:eg?void 0:eF.href,style:eW,onClick:eT,ref:eA,tabIndex:eg?-1:0,"aria-disabled":eg},i,ej);let eG=n.createElement("button",{...G,type:L,className:ez,style:eW,onClick:eT,disabled:eg,ref:eA},i,ej,eE&&n.createElement(eC,{prefixCls:ed}));return D(Q)||(eG=n.createElement(T,{component:"Button",disabled:eb},eG)),eG});ew.Group=e=>{let{getPrefixCls:t,direction:i}=n.useContext(c.E_),{prefixCls:r,size:l,className:o,...s}=e,h=t("btn-group",r),[,,d]=(0,b.ZP)(),u=n.useMemo(()=>{switch(l){case"large":return"lg";case"small":return"sm";default:return""}},[l]),p=(0,a.W)(h,{[`${h}-${u}`]:u,[`${h}-rtl`]:"rtl"===i},o,d);return n.createElement(B.Provider,{value:l},n.createElement("div",{...s,className:p}))},ew.__ANT_BUTTON=!0;let eS=ew},28677:function(e,t,i){let r;i.d(t,{Z:()=>il});var n=i(44194),l=i(10894),o=i(10976),a=i(27338),s=i(391),h=i(54544),d=i(95623);let u=e=>{let{prefixCls:t,className:i,style:r,size:l,shape:a}=e,s=(0,o.W)({[`${t}-lg`]:"large"===l,[`${t}-sm`]:"small"===l}),h=(0,o.W)({[`${t}-circle`]:"circle"===a,[`${t}-square`]:"square"===a,[`${t}-round`]:"round"===a}),d=n.useMemo(()=>"number"==typeof l?{width:l,height:l,lineHeight:`${l}px`}:{},[l]);return n.createElement("span",{className:(0,o.W)(t,s,h,i),style:{...d,...r}})};var c=i(55839),p=i(58476),g=i(64033);let f=new c.E4("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),m=e=>({height:e,lineHeight:(0,c.bf)(e)}),b=e=>({width:e,...m(e)}),y=e=>({background:e.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:f,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),v=(e,t)=>({width:t(e).mul(5).equal(),minWidth:t(e).mul(5).equal(),...m(e)}),_=e=>{let{skeletonAvatarCls:t,gradientFromColor:i,controlHeight:r,controlHeightLG:n,controlHeightSM:l}=e;return{[t]:{display:"inline-block",verticalAlign:"top",background:i,...b(r)},[`${t}${t}-circle`]:{borderRadius:"50%"},[`${t}${t}-lg`]:{...b(n)},[`${t}${t}-sm`]:{...b(l)}}},C=e=>{let{controlHeight:t,borderRadiusSM:i,skeletonInputCls:r,controlHeightLG:n,controlHeightSM:l,gradientFromColor:o,calc:a}=e;return{[r]:{display:"inline-block",verticalAlign:"top",background:o,borderRadius:i,...v(t,a)},[`${r}-lg`]:{...v(n,a)},[`${r}-sm`]:{...v(l,a)}}},x=e=>{let{gradientFromColor:t,borderRadiusSM:i,imageSizeBase:r,calc:n}=e;return{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:t,borderRadius:i,...b(n(r).mul(2).equal())}},w=e=>({[e.skeletonNodeCls]:{...x(e)}}),S=e=>{let{skeletonImageCls:t,imageSizeBase:i,calc:r}=e;return{[t]:{...x(e),[`${t}-path`]:{fill:"#bfbfbf"},[`${t}-svg`]:{...b(i),maxWidth:r(i).mul(4).equal(),maxHeight:r(i).mul(4).equal()},[`${t}-svg${t}-svg-circle`]:{borderRadius:"50%"}},[`${t}${t}-circle`]:{borderRadius:"50%"}}},A=(e,t,i)=>{let{skeletonButtonCls:r}=e;return{[`${i}${r}-circle`]:{width:t,minWidth:t,borderRadius:"50%"},[`${i}${r}-round`]:{borderRadius:t}}},k=(e,t)=>({width:t(e).mul(2).equal(),minWidth:t(e).mul(2).equal(),...m(e)}),M=e=>{let{borderRadiusSM:t,skeletonButtonCls:i,controlHeight:r,controlHeightLG:n,controlHeightSM:l,gradientFromColor:o,calc:a}=e;return{[i]:{display:"inline-block",verticalAlign:"top",background:o,borderRadius:t,width:a(r).mul(2).equal(),minWidth:a(r).mul(2).equal(),...k(r,a)},...A(e,r,i),[`${i}-lg`]:{...k(n,a)},...A(e,n,`${i}-lg`),[`${i}-sm`]:{...k(l,a)},...A(e,l,`${i}-sm`)}},T=e=>{let{componentCls:t,skeletonAvatarCls:i,skeletonTitleCls:r,skeletonParagraphCls:n,skeletonButtonCls:l,skeletonInputCls:o,skeletonNodeCls:a,skeletonImageCls:s,controlHeight:h,controlHeightLG:d,controlHeightSM:u,gradientFromColor:c,padding:p,marginSM:g,borderRadius:f,titleHeight:m,blockRadius:v,paragraphLiHeight:x,controlHeightXS:A,paragraphMarginTop:k}=e;return{[t]:{display:"table",width:"100%",[`${t}-header`]:{display:"table-cell",paddingInlineEnd:p,verticalAlign:"top",[i]:{display:"inline-block",verticalAlign:"top",background:c,...b(h)},[`${i}-circle`]:{borderRadius:"50%"},[`${i}-lg`]:{...b(d)},[`${i}-sm`]:{...b(u)}},[`${t}-section`]:{display:"table-cell",width:"100%",verticalAlign:"top",[r]:{width:"100%",height:m,background:c,borderRadius:v,[`+ ${n}`]:{marginBlockStart:u}},[n]:{padding:0,"> li":{width:"100%",height:x,listStyle:"none",background:c,borderRadius:v,"+ li":{marginBlockStart:A}}},[`${n}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${t}-section`]:{[`${r}, ${n} > li`]:{borderRadius:f}}},[`${t}-with-avatar ${t}-section`]:{[r]:{marginBlockStart:g,[`+ ${n}`]:{marginBlockStart:k}}},[`${t}${t}-element`]:{display:"inline-block",width:"auto",...M(e),..._(e),...C(e),...w(e),...S(e)},[`${t}${t}-block`]:{width:"100%",[l]:{width:"100%"},[o]:{width:"100%"}},[`${t}${t}-active`]:{[`
        ${r},
        ${n} > li,
        ${i},
        ${l},
        ${o},
        ${a},
        ${s}
      `]:{...y(e)}}}},R=(0,p.I$)("Skeleton",e=>{let{componentCls:t,calc:i}=e;return T((0,g.IX)(e,{skeletonAvatarCls:`${t}-avatar`,skeletonTitleCls:`${t}-title`,skeletonParagraphCls:`${t}-paragraph`,skeletonButtonCls:`${t}-button`,skeletonInputCls:`${t}-input`,skeletonNodeCls:`${t}-node`,skeletonImageCls:`${t}-image`,imageSizeBase:i(e.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.gradientFromColor} 25%, ${e.gradientToColor} 37%, ${e.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"}))},e=>{let{colorFillContent:t,colorFill:i}=e;return{color:t,colorGradientEnd:i,gradientFromColor:t,gradientToColor:i,titleHeight:e.controlHeight/2,blockRadius:e.borderRadiusSM,paragraphMarginTop:e.marginLG+e.marginXXS,paragraphLiHeight:e.controlHeight/2}},{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),E=e=>{let{prefixCls:t,className:i,classNames:r,rootClassName:l,internalClassName:a,style:h,styles:d,active:u,children:c}=e,{getPrefixCls:p}=n.useContext(s.E_),g=p("skeleton",t),[f,m]=R(g),b=(0,o.W)(g,`${g}-element`,{[`${g}-active`]:u},f,r?.root,i,l,m);return n.createElement("div",{className:b,style:d?.root},n.createElement("div",{className:(0,o.W)(r?.content,a||`${g}-node`),style:{...d?.content,...h}},c))},P=(e,t)=>{let{width:i,rows:r=2}=t;return Array.isArray(i)?i[e]:r-1===e?i:void 0},B=e=>{let{prefixCls:t,className:i,style:r,rows:l=0}=e,a=Array.from({length:l}).map((t,i)=>n.createElement("li",{key:i,style:{width:P(i,e)}}));return n.createElement("ul",{className:(0,o.W)(t,i),style:r},a)},I=({prefixCls:e,className:t,width:i,style:r})=>n.createElement("h3",{className:(0,o.W)(e,t),style:{width:i,...r}});function L(e){return e&&"object"==typeof e?e:{}}let F=e=>{let{prefixCls:t,loading:i,className:r,rootClassName:l,classNames:h,style:d,styles:c,children:p,avatar:g=!1,title:f=!0,paragraph:m=!0,active:b,round:y}=e,{getPrefixCls:v,direction:_,className:C,style:x,classNames:w,styles:S}=(0,s.dj)("skeleton"),A=v("skeleton",t),[k,M]=R(A),T={...e,avatar:g,title:f,paragraph:m},[E,P]=(0,a.MW)([w,h],[S,c],{props:T});if(i||!("loading"in e)){let e,t,i=!!g,a=!!f,s=!!m;if(i){let t={className:E.avatar,prefixCls:`${A}-avatar`,...a&&!s?{size:"large",shape:"square"}:{size:"large",shape:"circle"},...L(g),style:P.avatar};e=n.createElement("div",{className:(0,o.W)(E.header,`${A}-header`),style:P.header},n.createElement(u,{...t}))}if(a||s){let e,r;if(a){let t={className:E.title,prefixCls:`${A}-title`,...!i&&s?{width:"38%"}:i&&s?{width:"50%"}:{},...L(f),style:P.title};e=n.createElement(I,{...t})}if(s){let e={className:E.paragraph,prefixCls:`${A}-paragraph`,...function(e,t){let i={};return e&&t||(i.width="61%"),!e&&t?i.rows=3:i.rows=2,i}(i,a),...L(m),style:P.paragraph};r=n.createElement(B,{...e})}t=n.createElement("div",{className:(0,o.W)(E.section,`${A}-section`),style:P.section},e,r)}let h=(0,o.W)(A,{[`${A}-with-avatar`]:i,[`${A}-active`]:b,[`${A}-rtl`]:"rtl"===_,[`${A}-round`]:y},E.root,C,r,l,k,M);return n.createElement("div",{className:h,style:{...P.root,...x,...d}},e,t)}return p??null};F.Button=e=>{let{prefixCls:t,className:i,rootClassName:r,classNames:l,active:a,style:h,styles:d,block:c=!1,size:p="default",...g}=e,{getPrefixCls:f}=n.useContext(s.E_),m=f("skeleton",t),[b,y]=R(m),v=(0,o.W)(m,`${m}-element`,{[`${m}-active`]:a,[`${m}-block`]:c},l?.root,i,r,b,y);return n.createElement("div",{className:v,style:d?.root},n.createElement(u,{prefixCls:`${m}-button`,className:l?.content,style:{...d?.content,...h},size:p,...g}))},F.Avatar=e=>{let{prefixCls:t,className:i,classNames:r,rootClassName:l,active:a,style:h,styles:d,shape:c="circle",size:p="default",...g}=e,{getPrefixCls:f}=n.useContext(s.E_),m=f("skeleton",t),[b,y]=R(m),v=(0,o.W)(m,`${m}-element`,{[`${m}-active`]:a},r?.root,i,l,b,y);return n.createElement("div",{className:v,style:d?.root},n.createElement(u,{prefixCls:`${m}-avatar`,className:r?.content,style:{...d?.content,...h},shape:c,size:p,...g}))},F.Input=e=>{let{prefixCls:t,className:i,classNames:r,rootClassName:l,active:a,block:h,style:d,styles:c,size:p="default",...g}=e,{getPrefixCls:f}=n.useContext(s.E_),m=f("skeleton",t),[b,y]=R(m),v=(0,o.W)(m,`${m}-element`,{[`${m}-active`]:a,[`${m}-block`]:h},r?.root,i,l,b,y);return n.createElement("div",{className:v,style:c?.root},n.createElement(u,{prefixCls:`${m}-input`,className:r?.content,style:{...c?.content,...d},size:p,...g}))},F.Image=e=>{let{getPrefixCls:t}=n.useContext(s.E_),i=t("skeleton",e.prefixCls);return n.createElement(E,{...e,internalClassName:`${i}-image`},n.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${i}-image-svg`},n.createElement("title",null,"Image placeholder"),n.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:`${i}-image-path`})))},F.Node=E;var H=i(57258);let O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};var D=i(981);function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let W=n.forwardRef((e,t)=>n.createElement(D.Z,z({},e,{ref:t,icon:O}))),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};function N(){return(N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let $=n.forwardRef((e,t)=>n.createElement(D.Z,N({},e,{ref:t,icon:Z})));var j=i(9708),G=i(51429),V=i.n(G);let U=()=>(void 0===r&&(r=V()()),r),K=(0,n.createContext)(null);var X=i(86144),Y=i(26560),q=i(73260),J=i(18839);let Q=e=>{let{activeTabOffset:t,horizontal:i,rtl:r,indicator:l={}}=e,{size:o,align:a="center"}=l,[s,h]=(0,n.useState)(),d=(0,n.useRef)(),u=n.useCallback(e=>"function"==typeof o?o(e):"number"==typeof o?o:e,[o]);function c(){J.Z.cancel(d.current)}return(0,n.useEffect)(()=>{let e={};if(t)if(i){e.width=u(t.width);let i=r?"right":"left";"start"===a&&(e[i]=t[i]),"center"===a&&(e[i]=t[i]+t.width/2,e.transform=r?"translateX(50%)":"translateX(-50%)"),"end"===a&&(e[i]=t[i]+t.width,e.transform="translateX(-100%)")}else e.height=u(t.height),"start"===a&&(e.top=t.top),"center"===a&&(e.top=t.top+t.height/2,e.transform="translateY(-50%)"),"end"===a&&(e.top=t.top+t.height,e.transform="translateY(-100%)");return c(),d.current=(0,J.Z)(()=>{s&&e&&Object.keys(e).every(t=>{let i=e[t],r=s[t];return"number"==typeof i&&"number"==typeof r?Math.round(i)===Math.round(r):i===r})||h(e)}),c},[JSON.stringify(t),i,r,a,u]),{style:s}},ee={width:0,height:0,left:0,top:0};function et(e,t){let i=n.useRef(e),[,r]=n.useState({});return[i.current,function(e){let n="function"==typeof e?e(i.current):e;n!==i.current&&t(n,i.current),i.current=n,r({})}]}var ei=i(68176);function er(e){let[t,i]=(0,n.useState)(0),r=(0,n.useRef)(0),l=(0,n.useRef)();return l.current=e,(0,ei.o)(()=>{l.current?.()},[t]),()=>{r.current===t&&(r.current+=1,i(r.current))}}let en={width:0,height:0,left:0,top:0,right:0};function el(e){let t;return e instanceof Map?(t={},e.forEach((e,i)=>{t[i]=e})):t=e,JSON.stringify(t)}function eo(e){return String(e).replace(/"/g,"TABS_DQ")}function ea(e,t,i,r){return!!i&&!r&&!1!==e&&(void 0!==e||!1!==t&&null!==t)}let es=n.forwardRef((e,t)=>{let{prefixCls:i,editable:r,locale:l,style:o}=e;return r&&!1!==r.showAdd?n.createElement("button",{ref:t,type:"button",className:`${i}-nav-add`,style:o,"aria-label":l?.addAriaLabel||"Add tab",onClick:e=>{r.onEdit("add",{event:e})}},r.addIcon||"+"):null}),eh=n.forwardRef((e,t)=>{let i,{position:r,prefixCls:l,extra:o}=e;if(!o)return null;let a={};return"object"!=typeof o||n.isValidElement(o)?a.right=o:a=o,"right"===r&&(i=a.right),"left"===r&&(i=a.left),i?n.createElement("div",{className:`${l}-extra-content`,ref:t},i):null});var ed=i(81801),eu=i(93676);let{ESC:ec,TAB:ep}=eu.Z,eg=(0,n.forwardRef)((e,t)=>{let{overlay:i,arrow:r,prefixCls:l}=e,o=(0,n.useMemo)(()=>{let e;return"function"==typeof i?i():i},[i]),a=(0,q.sQ)(t,(0,q.C4)(o));return n.createElement(n.Fragment,null,r&&n.createElement("div",{className:`${l}-arrow`}),n.cloneElement(o,{ref:(0,q.Yr)(o)?a:void 0}))}),ef={adjustX:1,adjustY:1},em=[0,0],eb={topLeft:{points:["bl","tl"],overflow:ef,offset:[0,-4],targetOffset:em},top:{points:["bc","tc"],overflow:ef,offset:[0,-4],targetOffset:em},topRight:{points:["br","tr"],overflow:ef,offset:[0,-4],targetOffset:em},bottomLeft:{points:["tl","bl"],overflow:ef,offset:[0,4],targetOffset:em},bottom:{points:["tc","bc"],overflow:ef,offset:[0,4],targetOffset:em},bottomRight:{points:["tr","br"],overflow:ef,offset:[0,4],targetOffset:em}};function ey(){return(ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let ev=n.forwardRef((e,t)=>{let{arrow:i=!1,prefixCls:r="rc-dropdown",transitionName:l,animation:a,align:s,placement:h="bottomLeft",placements:d=eb,getPopupContainer:u,showAction:c,hideAction:p,overlayClassName:g,overlayStyle:f,visible:m,trigger:b=["hover"],autoFocus:y,overlay:v,children:_,onVisibleChange:C,...x}=e,[w,S]=n.useState(),A="visible"in e?m:w,k=a?`${r}-${a}`:l,M=n.useRef(null),T=n.useRef(null),R=n.useRef(null);n.useImperativeHandle(t,()=>M.current);let E=e=>{S(e),C?.(e)};!function({visible:e,triggerRef:t,onVisibleChange:i,autoFocus:r,overlayRef:l}){let o=n.useRef(!1),a=()=>{e&&(t.current?.focus?.(),i?.(!1))},s=()=>!!l.current?.focus&&(l.current.focus(),o.current=!0,!0),h=e=>{switch(e.keyCode){case ec:a();break;case ep:{let t=!1;o.current||(t=s()),t?e.preventDefault():a()}}};n.useEffect(()=>e?(window.addEventListener("keydown",h),r&&(0,J.Z)(s,3),()=>{window.removeEventListener("keydown",h),o.current=!1}):()=>{o.current=!1},[e])}({visible:A,triggerRef:R,onVisibleChange:E,autoFocus:y,overlayRef:T});let P=()=>n.createElement(eg,{ref:T,overlay:v,prefixCls:r,arrow:i}),B=n.cloneElement(_,{className:(0,o.W)(_.props?.className,A&&(()=>{let{openClassName:t}=e;return void 0!==t?t:`${r}-open`})()),ref:(0,q.Yr)(_)?(0,q.sQ)(R,(0,q.C4)(_)):void 0}),I=p;return I||-1===b.indexOf("contextMenu")||(I=["click"]),n.createElement(ed.ZP,ey({builtinPlacements:d},x,{prefixCls:r,ref:M,popupClassName:(0,o.W)(g,{[`${r}-show-arrow`]:i}),popupStyle:f,action:b,showAction:c,hideAction:I,popupPlacement:h,popupAlign:s,popupMotion:{motionName:k},popupVisible:A,stretch:(()=>{let{minOverlayWidthMatchTrigger:t,alignPoint:i}=e;return"minOverlayWidthMatchTrigger"in e?t:!i})()?"minWidth":"",popup:"function"==typeof v?P:P(),onOpenChange:E,onPopupClick:t=>{let{onOverlayClick:i}=e;S(!1),i&&i(t)},getPopupContainer:u}),B)});var e_=i(30936),eC=i(32162),ex=i(64246),ew=i(57705),eS=i(56321);let eA=n.createContext(null);function ek(e){var t;return t=n.useContext(eA),`${t}-${e}`}var eM=i(55668);let eT=n.createContext(null);function eR({children:e,locked:t,...i}){let r=n.useContext(eT),l=(0,eM.Z)(()=>(function(e,t){let i={...e};return Object.keys(t).forEach(e=>{let r=t[e];void 0!==r&&(i[e]=r)}),i})(r,i),[r,i],(e,i)=>!t&&(e[0]!==i[0]||!(0,ex.Z)(e[1],i[1],!0)));return n.createElement(eT.Provider,{value:l},e)}let eE=n.createContext(null);function eP(){return n.useContext(eE)}let eB=n.createContext([]);function eI(e){let t=n.useContext(eB);return n.useMemo(()=>void 0!==e?[...t,e]:t,[t,e])}let eL=n.createContext(null),eF=n.createContext({});var eH=i(56899);function eO(e,t=!1){if((0,eH.Z)(e)){let i=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(i)||e.isContentEditable||"a"===i&&!!e.getAttribute("href"),n=e.getAttribute("tabindex"),l=Number(n),o=null;return n&&!Number.isNaN(l)?o=l:r&&null===o&&(o=0),r&&e.disabled&&(o=null),null!==o&&(o>=0||t&&o<0)}return!1}let{LEFT:eD,RIGHT:ez,UP:eW,DOWN:eZ,ENTER:eN,ESC:e$,HOME:ej,END:eG}=eu.Z,eV=[eW,eZ,eD,ez];function eU(e,t){return(function(e,t=!1){let i=[...e.querySelectorAll("*")].filter(e=>eO(e,t));return eO(e,t)&&i.unshift(e),i})(e,!0).filter(e=>t.has(e))}function eK(e,t,i,r=1){if(!e)return null;let n=eU(e,t),l=n.length,o=n.findIndex(e=>i===e);return r<0?-1===o?o=l-1:o-=1:r>0&&(o+=1),n[o=(o+l)%l]}let eX=(e,t)=>{let i=new Set,r=new Map,n=new Map;return e.forEach(e=>{let l=document.querySelector(`[data-menu-id='${t}-${e}']`);l&&(i.add(l),n.set(l,e),r.set(e,l))}),{elements:i,key2element:r,element2key:n}},eY="__RC_UTIL_PATH_SPLIT__",eq=e=>e.join(eY),eJ=e=>e.split(eY),eQ="rc-menu-more";function e0(e){let t=n.useRef(e);t.current=e;let i=n.useCallback((...e)=>t.current?.(...e),[]);return e?i:void 0}var e1=i(52074);function e2(e,t,i,r){let{activeKey:l,onActive:o,onInactive:a}=n.useContext(eT),s={active:l===e};return t||(s.onMouseEnter=t=>{i?.({key:e,domEvent:t}),o(e)},s.onMouseLeave=t=>{r?.({key:e,domEvent:t}),a(e)}),s}function e3(e){let{mode:t,rtl:i,inlineIndent:r}=n.useContext(eT);return"inline"!==t?null:i?{paddingRight:e*r}:{paddingLeft:e*r}}function e4({icon:e,props:t,children:i}){let r;return null===e||!1===e?null:("function"==typeof e?r=n.createElement(e,{...t}):"boolean"!=typeof e&&(r=e),r||i||null)}function e5({item:e,...t}){return Object.defineProperty(t,"item",{get:()=>((0,ew.ZP)(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e)}),t}function e6(){return(e6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}class e8 extends n.Component{render(){let{title:e,attribute:t,elementRef:i,...r}=this.props,l=(0,e1.Z)(r,["eventKey","popupClassName","popupOffset","onTitleClick"]);return(0,ew.ZP)(!t,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),n.createElement(e_.Z.Item,e6({},t,{title:"string"==typeof e?e:void 0},l,{ref:i}))}}let e7=n.forwardRef((e,t)=>{let{style:i,className:r,eventKey:l,warnKey:a,disabled:s,itemIcon:h,children:d,role:u,onMouseEnter:c,onMouseLeave:p,onClick:g,onKeyDown:f,onFocus:m,...b}=e,y=ek(l),{prefixCls:v,onItemClick:_,disabled:C,overflowDisabled:x,itemIcon:w,selectedKeys:S,onActive:A}=n.useContext(eT),{_internalRenderMenuItem:k}=n.useContext(eF),M=`${v}-item`,T=n.useRef(),R=n.useRef(),E=C||s,P=(0,q.x1)(t,R),B=eI(l),I=e=>({key:l,keyPath:[...B].reverse(),item:T.current,domEvent:e}),{active:L,...F}=e2(l,E,c,p),H=S.includes(l),O=e3(B.length),D={};"option"===e.role&&(D["aria-selected"]=H);let z=n.createElement(e8,e6({ref:T,elementRef:P,role:null===u?"none":u||"menuitem",tabIndex:s?null:-1,"data-menu-id":x&&y?null:y},(0,e1.Z)(b,["extra"]),F,D,{component:"li","aria-disabled":s,style:{...O,...i},className:(0,o.W)(M,{[`${M}-active`]:L,[`${M}-selected`]:H,[`${M}-disabled`]:E},r),onClick:e=>{if(E)return;let t=I(e);g?.(e5(t)),_(t)},onKeyDown:e=>{if(f?.(e),e.which===eu.Z.ENTER){let t=I(e);g?.(e5(t)),_(t)}},onFocus:e=>{A(l),m?.(e)}}),d,n.createElement(e4,{props:{...e,isSelected:H},icon:h||w}));return k&&(z=k(z,e,{selected:H})),z}),e9=n.forwardRef(function(e,t){let{eventKey:i}=e,r=eP(),l=eI(i);return(n.useEffect(()=>{if(r)return r.registerPath(i,l),()=>{r.unregisterPath(i,l)}},[l]),r)?null:n.createElement(e7,e6({},e,{ref:t}))});function te(){return(te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let tt=n.forwardRef(({className:e,children:t,...i},r)=>{let{prefixCls:l,mode:a,rtl:s}=n.useContext(eT);return n.createElement("ul",te({className:(0,o.W)(l,s&&`${l}-rtl`,`${l}-sub`,`${l}-${"inline"===a?"inline":"vertical"}`,e),role:"menu"},i,{"data-menu-list":!0,ref:r}),t)});var ti=i(48071);function tr(e,t){return(0,ti.Z)(e).map((e,i)=>{if(n.isValidElement(e)){let{key:r}=e,l=e.props?.eventKey??r;null==l&&(l=`tmp_key-${[...t,i].join("-")}`);let o={key:l,eventKey:l};return n.cloneElement(e,o)}return e})}let tn={adjustX:1,adjustY:1},tl={topLeft:{points:["bl","tl"],overflow:tn},topRight:{points:["br","tr"],overflow:tn},bottomLeft:{points:["tl","bl"],overflow:tn},bottomRight:{points:["tr","br"],overflow:tn},leftTop:{points:["tr","tl"],overflow:tn},leftBottom:{points:["br","bl"],overflow:tn},rightTop:{points:["tl","tr"],overflow:tn},rightBottom:{points:["bl","br"],overflow:tn}},to={topLeft:{points:["bl","tl"],overflow:tn},topRight:{points:["br","tr"],overflow:tn},bottomLeft:{points:["tl","bl"],overflow:tn},bottomRight:{points:["tr","br"],overflow:tn},rightTop:{points:["tr","tl"],overflow:tn},rightBottom:{points:["br","bl"],overflow:tn},leftTop:{points:["tl","tr"],overflow:tn},leftBottom:{points:["bl","br"],overflow:tn}};function ta(e,t,i){return t||(i?i[e]||i.other:void 0)}let ts={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function th({prefixCls:e,visible:t,children:i,popup:r,popupStyle:l,popupClassName:a,popupOffset:s,disabled:h,mode:d,onVisibleChange:u}){let{getPopupContainer:c,rtl:p,subMenuOpenDelay:g,subMenuCloseDelay:f,builtinPlacements:m,triggerSubMenuAction:b,forceSubMenuRender:y,rootClassName:v,motion:_,defaultMotions:C}=n.useContext(eT),[x,w]=n.useState(!1),S=p?{...to,...m}:{...tl,...m},A=ts[d],k=ta(d,_,C),M=n.useRef(k);"inline"!==d&&(M.current=k);let T={...M.current,leavedClassName:`${e}-hidden`,removeOnLeave:!1,motionAppear:!0},R=n.useRef();return n.useEffect(()=>(R.current=(0,J.Z)(()=>{w(t)}),()=>{J.Z.cancel(R.current)}),[t]),n.createElement(ed.ZP,{prefixCls:e,popupClassName:(0,o.W)(`${e}-popup`,{[`${e}-rtl`]:p},a,v),stretch:"horizontal"===d?"minWidth":null,getPopupContainer:c,builtinPlacements:S,popupPlacement:A,popupVisible:x,popup:r,popupStyle:l,popupAlign:s&&{offset:s},action:h?[]:[b],mouseEnterDelay:g,mouseLeaveDelay:f,onPopupVisibleChange:u,forceRender:y,popupMotion:T,fresh:!0},i)}var td=i(27502);function tu(){return(tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function tc({id:e,open:t,keyPath:i,children:r}){let l="inline",{prefixCls:o,forceSubMenuRender:a,motion:s,defaultMotions:h,mode:d}=n.useContext(eT),u=n.useRef(!1);u.current=d===l;let[c,p]=n.useState(!u.current),g=!!u.current&&t;n.useEffect(()=>{u.current&&p(!1)},[d]);let f={...ta(l,s,h)};i.length>1&&(f.motionAppear=!1);let m=f.onVisibleChanged;return(f.onVisibleChanged=e=>(u.current||e||p(!0),m?.(e)),c)?null:n.createElement(eR,{mode:l,locked:!u.current},n.createElement(td.ZP,tu({visible:g},f,{forceRender:a,removeOnLeave:!1,leavedClassName:`${o}-hidden`}),({className:t,style:i})=>n.createElement(tt,{id:e,className:t,style:i},r)))}function tp(){return(tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let tg=n.forwardRef((e,t)=>{let{style:i,className:r,styles:l,classNames:a,title:s,eventKey:h,warnKey:d,disabled:u,internalPopupClose:c,children:p,itemIcon:g,expandIcon:f,popupClassName:m,popupOffset:b,popupStyle:y,onClick:v,onMouseEnter:_,onMouseLeave:C,onTitleClick:x,onTitleMouseEnter:w,onTitleMouseLeave:S,popupRender:A,...k}=e,M=ek(h),{prefixCls:T,mode:R,openKeys:E,disabled:P,overflowDisabled:B,activeKey:I,selectedKeys:L,itemIcon:F,expandIcon:H,onItemClick:O,onOpenChange:D,onActive:z,popupRender:W}=n.useContext(eT),{_internalRenderSubMenuItem:Z}=n.useContext(eF),{isSubPathKey:N}=n.useContext(eL),$=eI(),j=`${T}-submenu`,G=P||u,V=n.useRef(),U=n.useRef(),K=f??H,X=E.includes(h),Y=!B&&X,q=N(L,h),{active:J,...Q}=e2(h,G,w,S),[ee,et]=n.useState(!1),ei=e=>{G||et(e)},er=n.useMemo(()=>J||"inline"!==R&&(ee||N([I],h)),[R,J,I,ee,h,N]),en=e3($.length),el=e0(e=>{v?.(e5(e)),O(e)}),eo=M&&`${M}-popup`,ea=n.useMemo(()=>n.createElement(e4,{icon:"horizontal"!==R?K:void 0,props:{...e,isOpen:Y,isSubMenu:!0}},n.createElement("i",{className:`${j}-arrow`})),[R,K,e,Y,j]),es=n.createElement("div",tp({role:"menuitem",style:en,className:`${j}-title`,tabIndex:G?null:-1,ref:V,title:"string"==typeof s?s:null,"data-menu-id":B&&M?null:M,"aria-expanded":Y,"aria-haspopup":!0,"aria-controls":eo,"aria-disabled":G,onClick:e=>{G||(x?.({key:h,domEvent:e}),"inline"===R&&D(h,!X))},onFocus:()=>{z(h)}},Q),s,ea),eh=n.useRef(R);"inline"!==R&&$.length>1?eh.current="vertical":eh.current=R;let ed=eh.current,eu=n.useMemo(()=>{let t=n.createElement(eR,{classNames:a,styles:l,mode:"horizontal"===ed?"vertical":ed},n.createElement(tt,{id:eo,ref:U},p)),i=A||W;return i?i(t,{item:e,keys:$}):t},[A,W,$,eo,p,e,ed]);if(!B){let e=eh.current;es=n.createElement(th,{mode:e,prefixCls:j,visible:!c&&Y&&"inline"!==R,popupClassName:m,popupOffset:b,popupStyle:y,popup:eu,disabled:G,onVisibleChange:e=>{"inline"!==R&&D(h,e)}},es)}let ec=n.createElement(e_.Z.Item,tp({ref:t,role:"none"},k,{component:"li",style:i,className:(0,o.W)(j,`${j}-${R}`,r,{[`${j}-open`]:Y,[`${j}-active`]:er,[`${j}-selected`]:q,[`${j}-disabled`]:G}),onMouseEnter:e=>{ei(!0),_?.({key:h,domEvent:e})},onMouseLeave:e=>{ei(!1),C?.({key:h,domEvent:e})}}),es,!B&&n.createElement(tc,{id:eo,open:Y,keyPath:$},p));return Z&&(ec=Z(ec,e,{selected:q,active:er,open:Y,disabled:G})),n.createElement(eR,{classNames:a,styles:l,onItemClick:el,mode:"horizontal"===R?"vertical":R,itemIcon:g??F,expandIcon:K},ec)}),tf=n.forwardRef((e,t)=>{let i,{eventKey:r,children:l}=e,o=eI(r),a=tr(l,o),s=eP();return n.useEffect(()=>{if(s)return s.registerPath(r,o),()=>{s.unregisterPath(r,o)}},[o]),i=s?a:n.createElement(tg,tp({ref:t},e),a),n.createElement(eB.Provider,{value:o},i)});function tm({className:e,style:t}){let{prefixCls:i}=n.useContext(eT);return eP()?null:n.createElement("li",{role:"separator",className:(0,o.W)(`${i}-item-divider`,e),style:t})}function tb(){return(tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let ty=n.forwardRef((e,t)=>{let{className:i,title:r,eventKey:l,children:a,...s}=e,{prefixCls:h,classNames:d,styles:u}=n.useContext(eT),c=`${h}-item-group`;return n.createElement("li",tb({ref:t,role:"presentation"},s,{onClick:e=>e.stopPropagation(),className:(0,o.W)(c,i)}),n.createElement("div",{role:"presentation",className:(0,o.W)(`${c}-title`,d?.listTitle),style:u?.listTitle,title:"string"==typeof r?r:void 0},r),n.createElement("ul",{role:"group",className:(0,o.W)(`${c}-list`,d?.list),style:u?.list},a))}),tv=n.forwardRef((e,t)=>{let{eventKey:i,children:r}=e,l=tr(r,eI(i));return eP()?l:n.createElement(ty,tb({ref:t},(0,e1.Z)(e,["warnKey"])),l)});function t_(){return(t_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function tC(e,t,i,r,l){let o=e,a={divider:tm,item:e9,group:tv,submenu:tf,...r};return t&&(o=function e(t,i,r){let{item:l,group:o,submenu:a,divider:s}=i;return(t||[]).map((t,h)=>{if(t&&"object"==typeof t){let{label:d,children:u,key:c,type:p,extra:g,...f}=t,m=c??`tmp-${h}`;return u||"group"===p?"group"===p?n.createElement(o,t_({key:m},f,{title:d}),e(u,i,r)):n.createElement(a,t_({key:m},f,{title:d}),e(u,i,r)):"divider"===p?n.createElement(s,t_({key:m},f)):n.createElement(l,t_({key:m},f,{extra:g}),d,(!!g||0===g)&&n.createElement("span",{className:`${r}-item-extra`},g))}return null}).filter(e=>e)}(t,a,l)),tr(o,i)}function tx(){return(tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let tw=[],tS=n.forwardRef((e,t)=>{let{prefixCls:i="rc-menu",rootClassName:r,style:l,className:a,styles:s,classNames:h,tabIndex:d=0,items:u,children:c,direction:p,id:g,mode:f="vertical",inlineCollapsed:m,disabled:b,disabledOverflow:y,subMenuOpenDelay:v=.1,subMenuCloseDelay:_=.1,forceSubMenuRender:C,defaultOpenKeys:x,openKeys:w,activeKey:S,defaultActiveFirst:A,selectable:k=!0,multiple:M=!1,defaultSelectedKeys:T,selectedKeys:R,onSelect:E,onDeselect:P,inlineIndent:B=24,motion:I,defaultMotions:L,triggerSubMenuAction:F="hover",builtinPlacements:H,itemIcon:O,expandIcon:D,overflowedIndicator:z="...",overflowedIndicatorPopupClassName:W,getPopupContainer:Z,onClick:N,onOpenChange:$,onKeyDown:G,openAnimation:V,openTransitionName:U,_internalRenderMenuItem:K,_internalRenderSubMenuItem:X,_internalComponents:Y,popupRender:q,...Q}=e,[ee,et]=n.useMemo(()=>[tC(c,u,tw,Y,i),tC(c,u,tw,{},i)],[c,u,Y]),[ei,er]=n.useState(!1),en=n.useRef(),el=(0,eC.Z)(g?`rc-menu-uuid-${g}`:"rc-menu-uuid"),eo="rtl"===p,[ea,es]=(0,j.Z)(x,w),eh=ea||tw,ed=(e,t=!1)=>{function i(){es(e),$?.(e)}t?(0,eS.flushSync)(i):i()},[eu,ec]=n.useState(eh),ep=n.useRef(!1),[eg,ef]=n.useMemo(()=>("inline"===f||"vertical"===f)&&m?["vertical",m]:[f,!1],[f,m]),em="inline"===eg,[eb,ey]=n.useState(eg),[ev,ew]=n.useState(ef);n.useEffect(()=>{ey(eg),ew(ef),ep.current&&(em?es(eu):ed(tw))},[eg,ef]);let[ek,eM]=n.useState(0),eT=ek>=ee.length-1||"horizontal"!==eb||y;n.useEffect(()=>{em&&ec(eh)},[eh]),n.useEffect(()=>(ep.current=!0,()=>{ep.current=!1}),[]);let{registerPath:eP,unregisterPath:eB,refreshOverflowKeys:eI,isSubPathKey:eH,getKeyPath:eO,getKeys:e1,getSubPathKeys:e2}=function(){let[,e]=n.useState({}),t=(0,n.useRef)(new Map),i=(0,n.useRef)(new Map),[r,l]=n.useState([]),o=(0,n.useRef)(0),a=(0,n.useRef)(!1),s=()=>{a.current||e({})},h=(0,n.useCallback)((e,r)=>{let n=eq(r);i.current.set(n,e),t.current.set(e,n),o.current+=1;let l=o.current;Promise.resolve().then(()=>{l===o.current&&s()})},[]),d=(0,n.useCallback)((e,r)=>{let n=eq(r);i.current.delete(n),t.current.delete(e)},[]),u=(0,n.useCallback)(e=>{l(e)},[]),c=(0,n.useCallback)((e,i)=>{let n=eJ(t.current.get(e)||"");return i&&r.includes(n[0])&&n.unshift(eQ),n},[r]),p=(0,n.useCallback)((e,t)=>e.filter(e=>void 0!==e).some(e=>c(e,!0).includes(t)),[c]),g=(0,n.useCallback)(e=>{let r=`${t.current.get(e)}${eY}`,n=new Set;return[...i.current.keys()].forEach(e=>{e.startsWith(r)&&n.add(i.current.get(e))}),n},[]);return n.useEffect(()=>()=>{a.current=!0},[]),{registerPath:h,unregisterPath:d,refreshOverflowKeys:u,isSubPathKey:p,getKeyPath:c,getKeys:()=>{let e=[...t.current.keys()];return r.length&&e.push(eQ),e},getSubPathKeys:g}}(),e3=n.useMemo(()=>({registerPath:eP,unregisterPath:eB}),[eP,eB]),e4=n.useMemo(()=>({isSubPathKey:eH}),[eH]);n.useEffect(()=>{eI(eT?tw:ee.slice(ek+1).map(e=>e.key))},[ek,eT]);let[e6,e8]=(0,j.Z)(S||A&&ee[0]?.key,S),e7=e0(e=>{e8(e)}),te=e0(()=>{e8(void 0)});(0,n.useImperativeHandle)(t,()=>({list:en.current,focus:e=>{let t,i=e1(),{elements:r,key2element:n,element2key:l}=eX(i,el),o=eU(en.current,r);t=e6&&i.includes(e6)?e6:o[0]?l.get(o[0]):ee.find(e=>!e.props.disabled)?.key;let a=n.get(t);t&&a&&a?.focus?.(e)},findItem:({key:e})=>{let{key2element:t}=eX(e1(),el);return t.get(e)||null}}));let[tt,ti]=(0,j.Z)(T||[],R),tr=n.useMemo(()=>Array.isArray(tt)?tt:null==tt?tw:[tt],[tt]),tn=e=>{if(k){let t,{key:i}=e,r=tr.includes(i);ti(t=M?r?tr.filter(e=>e!==i):[...tr,i]:[i]);let n={...e,selectedKeys:t};r?P?.(n):E?.(n)}!M&&eh.length&&"inline"!==eb&&ed(tw)},tl=e0(e=>{N?.(e5(e)),tn(e)}),to=e0((e,t)=>{let i=eh.filter(t=>t!==e);if(t)i.push(e);else if("inline"!==eb){let t=e2(e);i=i.filter(e=>!t.has(e))}(0,ex.Z)(eh,i,!0)||ed(i,!0)}),ta=function(e,t,i,r,l,o,a,s,h,d){let u=n.useRef(),c=n.useRef();c.current=t;let p=()=>{J.Z.cancel(u.current)};return n.useEffect(()=>()=>{p()},[]),n=>{let{which:g}=n;if([...eV,eN,e$,ej,eG].includes(g)){let d=o(),f=eX(d,r),{elements:m,key2element:b,element2key:y}=f,v=function(e,t){let i=e||document.activeElement;for(;i;){if(t.has(i))return i;i=i.parentElement}return null}(b.get(t),m),_=y.get(v),C=function(e,t,i,r){let n="prev",l="next",o="children",a="parent";if("inline"===e&&r===eN)return{inlineTrigger:!0};let s={[eW]:n,[eZ]:l},h={[eW]:n,[eZ]:l,[eN]:o,[e$]:a,[eD]:i?o:a,[ez]:i?a:o};switch(({inline:s,horizontal:{[eD]:i?l:n,[ez]:i?n:l,[eZ]:o,[eN]:o},vertical:h,inlineSub:s,horizontalSub:h,verticalSub:h})[`${e}${t?"":"Sub"}`]?.[r]){case n:return{offset:-1,sibling:!0};case l:return{offset:1,sibling:!0};case a:return{offset:-1,sibling:!1};case o:return{offset:1,sibling:!1};default:return null}}(e,1===a(_,!0).length,i,g);if(!C&&g!==ej&&g!==eG)return;(eV.includes(g)||[ej,eG].includes(g))&&n.preventDefault();let x=e=>{if(e){let t=e,i=e.querySelector("a");i?.getAttribute("href")&&(t=i);let r=y.get(e);s(r),p(),u.current=(0,J.Z)(()=>{c.current===r&&t.focus()})}};if([ej,eG].includes(g)||C.sibling||!v){let t,i,r=eU(t=v&&"inline"!==e?function(e){let t=e;for(;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(v):l.current,m);x(g===ej?r[0]:g===eG?r[r.length-1]:eK(t,m,v,C.offset))}else if(C.inlineTrigger)h(_);else if(C.offset>0)h(_,!0),p(),u.current=(0,J.Z)(()=>{f=eX(d,r);let e=v.getAttribute("aria-controls");x(eK(document.getElementById(e),f.elements))},5);else if(C.offset<0){let e=a(_,!0),t=e[e.length-2],i=b.get(t);h(t,!1),x(i)}}d?.(n)}}(eb,e6,eo,el,en,e1,eO,e8,(e,t)=>{let i=t??!eh.includes(e);to(e,i)},G);n.useEffect(()=>{er(!0)},[]);let ts=n.useMemo(()=>({_internalRenderMenuItem:K,_internalRenderSubMenuItem:X}),[K,X]),th="horizontal"!==eb||y?ee:ee.map((e,t)=>n.createElement(eR,{key:e.key,overflowDisabled:t>ek,classNames:h,styles:s},e)),td=n.createElement(e_.Z,tx({id:g,ref:en,prefixCls:`${i}-overflow`,component:"ul",itemComponent:e9,className:(0,o.W)(i,`${i}-root`,`${i}-${eb}`,a,{[`${i}-inline-collapsed`]:ev,[`${i}-rtl`]:eo},r),dir:p,style:l,role:"menu",tabIndex:d,data:th,renderRawItem:e=>e,renderRawRest:e=>{let t=e.length,i=t?ee.slice(-t):null;return n.createElement(tf,{eventKey:eQ,title:z,disabled:eT,internalPopupClose:0===t,popupClassName:W},i)},maxCount:"horizontal"!==eb||y?e_.Z.INVALIDATE:e_.Z.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:e=>{eM(e)},onKeyDown:ta},Q));return n.createElement(eF.Provider,{value:ts},n.createElement(eA.Provider,{value:el},n.createElement(eR,{prefixCls:i,rootClassName:r,classNames:h,styles:s,mode:eb,openKeys:eh,rtl:eo,disabled:b,motion:ei?I:null,defaultMotions:ei?L:null,activeKey:e6,onActive:e7,onInactive:te,selectedKeys:tr,inlineIndent:B,subMenuOpenDelay:v,subMenuCloseDelay:_,forceSubMenuRender:C,builtinPlacements:H,triggerSubMenuAction:F,getPopupContainer:Z,itemIcon:O,expandIcon:D,onItemClick:tl,onOpenChange:to,popupRender:q},n.createElement(eL.Provider,{value:e4},td),n.createElement("div",{style:{display:"none"},"aria-hidden":!0},n.createElement(eE.Provider,{value:e3},et)))))});function tA(){return(tA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}tS.Item=e9,tS.SubMenu=tf,tS.ItemGroup=tv,tS.Divider=tm;let tk=n.forwardRef((e,t)=>{let{prefixCls:i,id:r,tabs:l,locale:a,mobile:s,more:h={},style:d,className:u,editable:c,tabBarGutter:p,rtl:g,removeAriaLabel:f,onTabClick:m,getPopupContainer:b,popupClassName:y,popupStyle:v}=e,[_,C]=(0,n.useState)(!1),[x,w]=(0,n.useState)(null),{icon:S="More"}=h,A=`${r}-more-popup`,k=`${i}-dropdown`,M=null!==x?`${A}-${x}`:null,T=a?.dropdownAriaLabel,R=n.createElement(tS,{onClick:({key:e,domEvent:t})=>{m(e,t),C(!1)},prefixCls:`${k}-menu`,id:A,tabIndex:-1,role:"listbox","aria-activedescendant":M,selectedKeys:[x],"aria-label":void 0!==T?T:"expanded dropdown"},l.map(e=>{let{closable:t,disabled:i,closeIcon:l,key:o,label:a}=e,s=ea(t,l,c,i);return n.createElement(e9,{key:o,id:`${A}-${o}`,role:"option","aria-controls":r&&`${r}-panel-${o}`,disabled:i},n.createElement("span",null,a),s&&n.createElement("button",{type:"button","aria-label":f||"remove",tabIndex:0,className:`${k}-menu-item-remove`,onClick:e=>{e.stopPropagation(),e.preventDefault(),e.stopPropagation(),c.onEdit("remove",{key:o,event:e})}},l||c.removeIcon||"\xd7"))}));function E(e){let t=l.filter(e=>!e.disabled),i=t.findIndex(e=>e.key===x)||0,r=t.length;for(let n=0;n<r;n+=1){let n=t[i=(i+e+r)%r];if(!n.disabled)return void w(n.key)}}(0,n.useEffect)(()=>{let e=document.getElementById(M);e?.scrollIntoView&&e.scrollIntoView(!1)},[M,x]),(0,n.useEffect)(()=>{_||w(null)},[_]);let P={marginInlineStart:p};l.length||(P.visibility="hidden",P.order=1);let B=(0,o.W)(y,{[`${k}-rtl`]:g}),I=s?null:n.createElement(ev,tA({prefixCls:k,overlay:R,visible:!!l.length&&_,onVisibleChange:C,overlayClassName:B,overlayStyle:v,mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:b},h),n.createElement("button",{type:"button",className:`${i}-nav-more`,style:P,"aria-haspopup":"listbox","aria-controls":A,id:`${r}-more`,"aria-expanded":_,onKeyDown:function(e){let{which:t}=e;if(!_){[eu.Z.DOWN,eu.Z.SPACE,eu.Z.ENTER].includes(t)&&(C(!0),e.preventDefault());return}switch(t){case eu.Z.UP:E(-1),e.preventDefault();break;case eu.Z.DOWN:E(1),e.preventDefault();break;case eu.Z.ESC:C(!1);break;case eu.Z.SPACE:case eu.Z.ENTER:null!==x&&m(x,e)}}},S));return n.createElement("div",{className:(0,o.W)(`${i}-nav-operations`,u),style:d,ref:t},I,n.createElement(es,{prefixCls:i,locale:a,editable:c}))}),tM=n.memo(tk,(e,t)=>t.tabMoving),tT=e=>{let{prefixCls:t,id:i,active:r,focus:l,tab:{key:a,label:s,disabled:h,closeIcon:d,icon:u},closable:c,renderWrapper:p,removeAriaLabel:g,editable:f,onClick:m,onFocus:b,onBlur:y,onKeyDown:v,onMouseDown:_,onMouseUp:C,style:x,className:w,tabCount:S,currentPosition:A}=e,k=`${t}-tab`,M=ea(c,d,f,h);function T(e){h||m(e)}let R=n.useMemo(()=>u&&"string"==typeof s?n.createElement("span",null,s):s,[s,u]),E=n.useRef(null);n.useEffect(()=>{l&&E.current&&E.current.focus()},[l]);let P=n.createElement("div",{key:a,"data-node-key":eo(a),className:(0,o.W)(k,w,{[`${k}-with-remove`]:M,[`${k}-active`]:r,[`${k}-disabled`]:h,[`${k}-focus`]:l}),style:x,onClick:T},n.createElement("div",{ref:E,role:"tab","aria-selected":r,id:i&&`${i}-tab-${a}`,className:`${k}-btn`,"aria-controls":i&&`${i}-panel-${a}`,"aria-disabled":h,tabIndex:h?null:r?0:-1,onClick:e=>{e.stopPropagation(),T(e)},onKeyDown:v,onMouseDown:_,onMouseUp:C,onFocus:b,onBlur:y},l&&n.createElement("div",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},`Tab ${A} of ${S}`),u&&n.createElement("span",{className:`${k}-icon`},u),s&&R),M&&n.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:r?0:-1,className:`${k}-remove`,onClick:e=>{e.stopPropagation(),e.preventDefault(),e.stopPropagation(),f.onEdit("remove",{key:a,event:e})}},d||f.removeIcon||"\xd7"));return p?p(P):P};function tR(){return(tR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let tE=(e,t)=>{let{offsetWidth:i,offsetHeight:r,offsetTop:n,offsetLeft:l}=e,{width:o,height:a,left:s,top:h}=e.getBoundingClientRect();return 1>Math.abs(o-i)?[o,a,s-t.left,h-t.top]:[i,r,l,n]},tP=e=>{let{offsetWidth:t=0,offsetHeight:i=0}=e.current||{};if(e.current){let{width:i,height:r}=e.current.getBoundingClientRect();if(1>Math.abs(i-t))return[i,r]}return[t,i]},tB=(e,t)=>e[+!t],tI=n.forwardRef((e,t)=>{var i;let r,l,a,s,{className:h,style:d,id:u,animated:c,activeKey:p,rtl:g,extra:f,editable:m,locale:b,tabPosition:y,tabBarGutter:v,children:_,onTabClick:C,onTabScroll:x,indicator:w,classNames:S,styles:A}=e,{prefixCls:k,tabs:M}=n.useContext(K),T=(0,n.useRef)(null),R=(0,n.useRef)(null),E=(0,n.useRef)(null),P=(0,n.useRef)(null),B=(0,n.useRef)(null),I=(0,n.useRef)(null),L=(0,n.useRef)(null),F="top"===y||"bottom"===y,[H,O]=et(0,(e,t)=>{F&&x&&x({direction:e>t?"left":"right"})}),[D,z]=et(0,(e,t)=>{!F&&x&&x({direction:e>t?"top":"bottom"})}),[W,Z]=(0,n.useState)([0,0]),[N,$]=(0,n.useState)([0,0]),[j,G]=(0,n.useState)([0,0]),[V,U]=(0,n.useState)([0,0]),[J,ei]=function(e){let t=(0,n.useRef)([]),[,i]=(0,n.useState)({}),r=(0,n.useRef)("function"==typeof e?e():e),l=er(()=>{let e=r.current;t.current.forEach(t=>{e=t(e)}),t.current=[],r.current=e,i({})});return[r.current,function(e){t.current.push(e),l()}]}(new Map),ed=(i=N[0],(0,n.useMemo)(()=>{let e=new Map,t=J.get(M[0]?.key)||ee,i=t.left+t.width;for(let t=0;t<M.length;t+=1){let{key:r}=M[t],n=J.get(r);n||(n=J.get(M[t-1]?.key)||ee);let l=e.get(r)||{...n};l.right=i-l.left-l.width,e.set(r,l)}return e},[M.map(e=>e.key).join("_"),J,i])),eu=tB(W,F),ec=tB(N,F),ep=tB(j,F),eg=tB(V,F),ef=Math.floor(eu)<Math.floor(ec+ep),em=ef?eu-eg:eu-ep,eb=`${k}-nav-operations-hidden`,ey=0,ev=0;function e_(e){return e<ey?ey:e>ev?ev:e}F&&g?(ey=0,ev=Math.max(0,ec-em)):(ey=Math.min(0,em-ec),ev=0);let eC=(0,n.useRef)(null),[ex,ew]=(0,n.useState)();function eS(){ew(Date.now())}function eA(){eC.current&&clearTimeout(eC.current)}!function(e,t){let[i,r]=(0,n.useState)(),[l,o]=(0,n.useState)(0),[a,s]=(0,n.useState)(0),[h,d]=(0,n.useState)(),u=(0,n.useRef)(),c=(0,n.useRef)(),p=(0,n.useRef)(null);p.current={onTouchStart:function(e){let{screenX:t,screenY:i}=e.touches[0];r({x:t,y:i}),window.clearInterval(u.current)},onTouchMove:function(e){if(!i)return;let{screenX:n,screenY:a}=e.touches[0];r({x:n,y:a});let h=n-i.x,u=a-i.y;t(h,u);let c=Date.now();o(c),s(c-l),d({x:h,y:u})},onTouchEnd:function(){if(i&&(r(null),d(null),h)){let e=h.x/a,i=h.y/a;if(.1>Math.max(Math.abs(e),Math.abs(i)))return;let r=e,n=i;u.current=window.setInterval(()=>{if(.01>Math.abs(r)&&.01>Math.abs(n))return void window.clearInterval(u.current);r*=.9046104802746175,n*=.9046104802746175,t(20*r,20*n)},20)}},onWheel:function(e){let{deltaX:i,deltaY:r}=e,n=0,l=Math.abs(i),o=Math.abs(r);l===o?n="x"===c.current?i:r:l>o?(n=i,c.current="x"):(n=r,c.current="y"),t(-n,-n)&&e.preventDefault()}},n.useEffect(()=>{function t(e){p.current.onTouchMove(e)}function i(e){p.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",i,{passive:!0}),e.current.addEventListener("touchstart",function(e){p.current.onTouchStart(e)},{passive:!0}),e.current.addEventListener("wheel",function(e){p.current.onWheel(e)},{passive:!1}),()=>{document.removeEventListener("touchmove",t),document.removeEventListener("touchend",i)}},[])}(P,(e,t)=>{var i,r,n,l;function o(e,t){e(e=>e_(e+t))}return!!ef&&(F?(i=O,r=e,i(e=>e_(e+r))):(n=z,l=t,n(e=>e_(e+l))),eA(),eS(),!0)}),(0,n.useEffect)(()=>(eA(),ex&&(eC.current=setTimeout(()=>{ew(0)},100)),eA),[ex]);let[ek,eM]=function(e,t,i,r,l,o,{tabs:a,tabPosition:s,rtl:h}){let d,u,c;return["top","bottom"].includes(s)?(d="width",u=h?"right":"left",c=Math.abs(i)):(d="height",u="top",c=-i),(0,n.useMemo)(()=>{if(!a.length)return[0,0];let i=a.length,r=i;for(let n=0;n<i;n+=1){let i=e.get(a[n].key)||en;if(Math.floor(i[u]+i[d])>Math.floor(c+t)){r=n-1;break}}let n=0;for(let t=i-1;t>=0;t-=1)if((e.get(a[t].key)||en)[u]<c){n=t+1;break}return n>r?[0,-1]:[n,r]},[e,t,r,l,o,c,s,a.map(e=>e.key).join("_"),h])}(ed,em,F?H:D,ec,ep,eg,{...e,tabs:M}),eT=(0,Y.Z)((e=p)=>{let t=ed.get(e)||{width:0,height:0,left:0,right:0,top:0};if(F){let e=H;g?t.right<H?e=t.right:t.right+t.width>H+em&&(e=t.right+t.width-em):t.left<-H?e=-t.left:t.left+t.width>-H+em&&(e=-(t.left+t.width-em)),z(0),O(e_(e))}else{let e=D;t.top<-D?e=-t.top:t.top+t.height>-D+em&&(e=-(t.top+t.height-em)),O(0),z(e_(e))}}),[eR,eE]=(0,n.useState)(),[eP,eB]=(0,n.useState)(!1),eI=M.filter(e=>!e.disabled).map(e=>e.key),eL=e=>{let t=eI.indexOf(eR||p),i=eI.length;eE(eI[(t+e+i)%i])},eF=(e,t)=>{let i=eI.indexOf(e),r=M.find(t=>t.key===e);ea(r?.closable,r?.closeIcon,m,r?.disabled)&&(t.preventDefault(),t.stopPropagation(),m.onEdit("remove",{key:e,event:t}),i===eI.length-1?eL(-1):eL(1))},eH=(e,t)=>{eB(!0),1===t.button&&eF(e,t)},eO=e=>{let{code:t}=e,i=g&&F,r=eI[0],n=eI[eI.length-1];switch(t){case"ArrowLeft":F&&eL(i?1:-1);break;case"ArrowRight":F&&eL(i?-1:1);break;case"ArrowUp":e.preventDefault(),F||eL(-1);break;case"ArrowDown":e.preventDefault(),F||eL(1);break;case"Home":e.preventDefault(),eE(r);break;case"End":e.preventDefault(),eE(n);break;case"Enter":case"Space":e.preventDefault(),C(eR??p,e);break;case"Backspace":case"Delete":eF(eR,e)}},eD={};F?eD.marginInlineStart=v:eD.marginTop=v;let ez=M.map((e,t)=>{let{key:i}=e;return n.createElement(tT,{id:u,prefixCls:k,key:i,tab:e,className:S?.item,style:0===t?A?.item:{...eD,...A?.item},closable:e.closable,editable:m,active:i===p,focus:i===eR,renderWrapper:_,removeAriaLabel:b?.removeAriaLabel,tabCount:eI.length,currentPosition:t+1,onClick:e=>{C(i,e)},onKeyDown:eO,onFocus:()=>{eP||eE(i),eT(i),eS(),P.current&&(g||(P.current.scrollLeft=0),P.current.scrollTop=0)},onBlur:()=>{eE(void 0)},onMouseDown:e=>eH(i,e),onMouseUp:()=>{eB(!1)}})}),eW=()=>ei(()=>{let e=new Map,t=B.current?.getBoundingClientRect();return M.forEach(({key:i})=>{let r=B.current?.querySelector(`[data-node-key="${eo(i)}"]`);if(r){let[n,l,o,a]=tE(r,t);e.set(i,{width:n,height:l,left:o,top:a})}}),e});(0,n.useEffect)(()=>{eW()},[M.map(e=>e.key).join("_")]);let eZ=er(()=>{let e=tP(T),t=tP(R),i=tP(E);Z([e[0]-t[0]-i[0],e[1]-t[1]-i[1]]);let r=tP(L);G(r),U(tP(I));let n=tP(B);$([n[0]-r[0],n[1]-r[1]]),eW()}),eN=[...M.slice(0,ek),...M.slice(eM+1)],e$=ed.get(p),{style:ej}=Q({activeTabOffset:e$,horizontal:F,indicator:w,rtl:g});(0,n.useEffect)(()=>{eT()},[p,ey,ev,el(e$),el(ed),F]),(0,n.useEffect)(()=>{eZ()},[g]);let eG=!!eN.length,eV=`${k}-nav-wrap`;return F?g?(l=H>0,r=H!==ev):(r=H<0,l=H!==ey):(a=D<0,s=D!==ey),n.createElement(X.ZP,{onResize:eZ},n.createElement("div",{ref:(0,q.x1)(t,T),role:"tablist","aria-orientation":F?"horizontal":"vertical",className:(0,o.W)(`${k}-nav`,h,S?.header),style:{...A?.header,...d},onKeyDown:()=>{eS()}},n.createElement(eh,{ref:R,position:"left",extra:f,prefixCls:k}),n.createElement(X.ZP,{onResize:eZ},n.createElement("div",{className:(0,o.W)(eV,{[`${eV}-ping-left`]:r,[`${eV}-ping-right`]:l,[`${eV}-ping-top`]:a,[`${eV}-ping-bottom`]:s}),ref:P},n.createElement(X.ZP,{onResize:eZ},n.createElement("div",{ref:B,className:`${k}-nav-list`,style:{transform:`translate(${H}px, ${D}px)`,transition:ex?"none":void 0}},ez,n.createElement(es,{ref:L,prefixCls:k,locale:b,editable:m,style:{...0===ez.length?void 0:eD,visibility:eG?"hidden":null}}),n.createElement("div",{className:(0,o.W)(`${k}-ink-bar`,S?.indicator,{[`${k}-ink-bar-animated`]:c.inkBar}),style:{...ej,...A?.indicator}}))))),n.createElement(tM,tR({},e,{removeAriaLabel:b?.removeAriaLabel,ref:I,prefixCls:k,tabs:eN,className:!eG&&eb,popupStyle:A?.popup,tabMoving:!!ex})),n.createElement(eh,{ref:E,position:"right",extra:f,prefixCls:k})))}),tL=({renderTabBar:e,...t})=>e?e(t,tI):n.createElement(tI,t),tF=n.forwardRef((e,t)=>{let{prefixCls:i,className:r,style:l,id:a,active:s,tabKey:h,children:d}=e,u=n.Children.count(d)>0;return n.createElement("div",{id:a&&`${a}-panel-${h}`,role:"tabpanel",tabIndex:s&&u?0:-1,"aria-labelledby":a&&`${a}-tab-${h}`,"aria-hidden":!s,style:l,className:(0,o.W)(i,s&&`${i}-active`,r),ref:t},d)});function tH(){return(tH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let tO=e=>{let{id:t,activeKey:i,animated:r,tabPosition:l,destroyOnHidden:a,contentStyle:s,contentClassName:h}=e,{prefixCls:d,tabs:u}=n.useContext(K),c=r.tabPane,p=`${d}-tabpane`;return n.createElement("div",{className:(0,o.W)(`${d}-content-holder`)},n.createElement("div",{className:(0,o.W)(`${d}-content`,`${d}-content-${l}`,{[`${d}-content-animated`]:c})},u.map(e=>{let{key:l,forceRender:d,style:u,className:g,destroyOnHidden:f,...m}=e,b=l===i;return n.createElement(td.ZP,tH({key:l,visible:b,forceRender:d,removeOnLeave:!!(a??f),leavedClassName:`${p}-hidden`},r.tabPaneMotion),({style:e,className:i},r)=>n.createElement(tF,tH({},m,{prefixCls:p,id:t,tabKey:l,animated:c,active:b,style:{...s,...u,...e},className:(0,o.W)(h,g,i),ref:r})))})))};function tD(){return(tD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let tz=0,tW=n.forwardRef((e,t)=>{let{id:i,prefixCls:r="rc-tabs",className:l,items:a,direction:s,activeKey:h,defaultActiveKey:d,editable:u,animated:c,tabPosition:p="top",tabBarGutter:g,tabBarStyle:f,tabBarExtraContent:m,locale:b,more:y,destroyOnHidden:v,renderTabBar:_,onChange:C,onTabClick:x,onTabScroll:w,getPopupContainer:S,popupClassName:A,indicator:k,classNames:M,styles:T,...R}=e,E=n.useMemo(()=>(a||[]).filter(e=>e&&"object"==typeof e&&"key"in e),[a]),P="rtl"===s,B=function(e={inkBar:!0,tabPane:!1}){let t;return(t=!1===e?{inkBar:!1,tabPane:!1}:!0===e?{inkBar:!0,tabPane:!1}:{inkBar:!0,..."object"==typeof e?e:{}}).tabPaneMotion&&void 0===t.tabPane&&(t.tabPane=!0),!t.tabPaneMotion&&t.tabPane&&(t.tabPane=!1),t}(c),[I,L]=(0,n.useState)(!1);(0,n.useEffect)(()=>{L(U())},[]);let[F,H]=(0,j.Z)(d??E[0]?.key,h),[O,D]=(0,n.useState)(()=>E.findIndex(e=>e.key===F));(0,n.useEffect)(()=>{let e=E.findIndex(e=>e.key===F);-1===e&&(e=Math.max(0,Math.min(O,E.length-1)),H(E[e]?.key)),D(e)},[E.map(e=>e.key).join("_"),F,O]);let[z,W]=(0,j.Z)(null,i);(0,n.useEffect)(()=>{i||(W(`rc-tabs-${tz}`),tz+=1)},[]);let Z={id:z,activeKey:F,animated:B,tabPosition:p,rtl:P,mobile:I},N={...Z,editable:u,locale:b,more:y,tabBarGutter:g,onTabClick:function(e,t){x?.(e,t);let i=e!==F;H(e),i&&C?.(e)},onTabScroll:w,extra:m,style:f,getPopupContainer:S,popupClassName:(0,o.W)(A,M?.popup),indicator:k,styles:T,classNames:M},$=n.useMemo(()=>({tabs:E,prefixCls:r}),[E,r]);return n.createElement(K.Provider,{value:$},n.createElement("div",tD({ref:t,id:i,className:(0,o.W)(r,`${r}-${p}`,{[`${r}-mobile`]:I,[`${r}-editable`]:u,[`${r}-rtl`]:P},l)},R),n.createElement(tL,tD({},N,{renderTabBar:_})),n.createElement(tO,tD({destroyOnHidden:v},Z,{contentStyle:T?.content,contentClassName:M?.content,animated:B}))))});var tZ=i(74750),tN=i(99833);let t$={motionAppear:!1,motionEnter:!0,motionLeave:!0};var tj=i(83447),tG=i(39004);let tV=e=>{let{componentCls:t,motionDurationSlow:i}=e;return[{[t]:{[`${t}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${i}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${i}`}}}}},[(0,tG.oN)(e,"slide-up"),(0,tG.oN)(e,"slide-down")]]},tU=e=>{let{componentCls:t,tabsCardPadding:i,cardBg:r,cardGutter:n,colorBorderSecondary:l,itemSelectedColor:o}=e;return{[`${t}-card`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{margin:0,padding:i,background:r,border:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${l}`,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`${t}-tab-active`]:{color:o,background:e.colorBgContainer},[`${t}-tab-focus:has(${t}-tab-btn:focus-visible)`]:(0,tj.oN)(e,-3),[`& ${t}-tab${t}-tab-focus ${t}-tab-btn:focus-visible`]:{outline:"none"},[`${t}-ink-bar`]:{visibility:"hidden"}},[`&${t}-top, &${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginLeft:{_skip_check_:!0,value:(0,c.bf)(n)}}}},[`&${t}-top`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`${(0,c.bf)(e.borderRadiusLG)} ${(0,c.bf)(e.borderRadiusLG)} 0 0`},[`${t}-tab-active`]:{borderBottomColor:e.colorBgContainer}}},[`&${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`0 0 ${(0,c.bf)(e.borderRadiusLG)} ${(0,c.bf)(e.borderRadiusLG)}`},[`${t}-tab-active`]:{borderTopColor:e.colorBgContainer}}},[`&${t}-left, &${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginTop:(0,c.bf)(n)}}},[`&${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${(0,c.bf)(e.borderRadiusLG)} 0 0 ${(0,c.bf)(e.borderRadiusLG)}`}},[`${t}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:e.colorBgContainer}}}},[`&${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${(0,c.bf)(e.borderRadiusLG)} ${(0,c.bf)(e.borderRadiusLG)} 0`}},[`${t}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:e.colorBgContainer}}}}}}},tK=e=>{let{componentCls:t,itemHoverColor:i,dropdownEdgeChildVerticalPadding:r}=e;return{[`${t}-dropdown`]:{...(0,tj.Wf)(e),position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:e.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${t}-dropdown-menu`]:{maxHeight:e.tabsDropdownHeight,margin:0,padding:`${(0,c.bf)(r)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:e.colorBgContainer,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,"&-item":{...tj.vS,display:"flex",alignItems:"center",minWidth:e.tabsDropdownWidth,margin:0,padding:`${(0,c.bf)(e.paddingXXS)} ${(0,c.bf)(e.paddingSM)}`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:e.marginSM},color:e.colorIcon,fontSize:e.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:i}},"&:hover":{background:e.controlItemBgHover},"&-disabled":{"&, &:hover":{color:e.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}}}}}},tX=e=>{let{componentCls:t,margin:i,colorBorderSecondary:r,horizontalMargin:n,verticalItemPadding:l,verticalItemMargin:o,calc:a}=e;return{[`${t}-top, ${t}-bottom`]:{flexDirection:"column",[`> ${t}-nav, > div > ${t}-nav`]:{margin:n,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${r}`,content:"''"},[`${t}-ink-bar`]:{height:e.lineWidthBold,"&-animated":{transition:`width ${e.motionDurationSlow}, left ${e.motionDurationSlow},
            right ${e.motionDurationSlow}`}},[`${t}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:e.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowRight},[`&${t}-nav-wrap-ping-left::before`]:{opacity:1},[`&${t}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${t}-top`]:{[`> ${t}-nav,
        > div > ${t}-nav`]:{"&::before":{bottom:0},[`${t}-ink-bar`]:{bottom:0}}},[`${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,marginTop:i,marginBottom:0,"&::before":{top:0},[`${t}-ink-bar`]:{top:0}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0}},[`${t}-left, ${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{flexDirection:"column",minWidth:a(e.controlHeight).mul(1.25).equal(),[`${t}-tab`]:{padding:l,textAlign:"center"},[`${t}-tab + ${t}-tab`]:{margin:o},[`${t}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:e.controlHeight},"&::before":{top:0,boxShadow:e.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:e.boxShadowTabsOverflowBottom},[`&${t}-nav-wrap-ping-top::before`]:{opacity:1},[`&${t}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${t}-ink-bar`]:{width:e.lineWidthBold,"&-animated":{transition:`height ${e.motionDurationSlow}, top ${e.motionDurationSlow}`}},[`${t}-nav-list, ${t}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{marginLeft:{_skip_check_:!0,value:(0,c.bf)(a(e.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:e.paddingLG}}}},[`${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,[`${t}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:a(e.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingRight:{_skip_check_:!0,value:e.paddingLG}}}}}},tY=e=>{let{componentCls:t,cardPaddingSM:i,cardPaddingLG:r,cardHeightSM:n,cardHeightLG:l,horizontalItemPaddingSM:o,horizontalItemPaddingLG:a}=e;return{[t]:{"&-small":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:o,fontSize:e.titleFontSizeSM}}},"&-large":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:a,fontSize:e.titleFontSizeLG,lineHeight:e.lineHeightLG}}}},[`${t}-card`]:{[`&${t}-small`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:i},[`${t}-nav-add`]:{minWidth:n,minHeight:n}},[`&${t}-bottom`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`0 0 ${(0,c.bf)(e.borderRadius)} ${(0,c.bf)(e.borderRadius)}`}},[`&${t}-top`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`${(0,c.bf)(e.borderRadius)} ${(0,c.bf)(e.borderRadius)} 0 0`}},[`&${t}-right`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${(0,c.bf)(e.borderRadius)} ${(0,c.bf)(e.borderRadius)} 0`}}},[`&${t}-left`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${(0,c.bf)(e.borderRadius)} 0 0 ${(0,c.bf)(e.borderRadius)}`}}}},[`&${t}-large`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:r},[`${t}-nav-add`]:{minWidth:l,minHeight:l}}}}}},tq=e=>{let{componentCls:t,itemActiveColor:i,itemHoverColor:r,iconCls:n,tabsHorizontalItemMargin:l,horizontalItemPadding:o,itemSelectedColor:a,itemColor:s}=e,h=`${t}-tab`;return{[h]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:o,fontSize:e.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:s,"&-btn, &-remove":{"&:focus:not(:focus-visible), &:active":{color:i}},"&-btn":{outline:"none",transition:`all ${e.motionDurationSlow}`,[`${h}-icon:not(:last-child)`]:{marginInlineEnd:e.marginSM}},"&-remove":{flex:"none",lineHeight:1,marginRight:{_skip_check_:!0,value:e.calc(e.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:e.marginXS},color:e.colorIcon,fontSize:e.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextHeading},...(0,tj.Qy)(e)},"&:hover":{color:r},[`&${h}-active ${h}-btn`]:{color:a},[`&${h}-focus ${h}-btn:focus-visible`]:(0,tj.oN)(e),[`&${h}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${h}-disabled ${h}-btn, &${h}-disabled ${t}-remove`]:{"&:focus, &:active":{color:e.colorTextDisabled}},[`& ${h}-remove ${n}`]:{margin:0,verticalAlign:"middle"},[`${n}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:e.marginSM}}},[`${h} + ${h}`]:{margin:{_skip_check_:!0,value:l}}}},tJ=e=>{let{componentCls:t,tabsHorizontalItemMarginRTL:i,iconCls:r,cardGutter:n,calc:l}=e;return{[`${t}-rtl`]:{direction:"rtl",[`${t}-nav`]:{[`${t}-tab`]:{margin:{_skip_check_:!0,value:i},[`${t}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[r]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:(0,c.bf)(e.marginSM)}},[`${t}-tab-remove`]:{marginRight:{_skip_check_:!0,value:(0,c.bf)(e.marginXS)},marginLeft:{_skip_check_:!0,value:(0,c.bf)(l(e.marginXXS).mul(-1).equal())},[r]:{margin:0}}}},[`&${t}-left`]:{[`> ${t}-nav`]:{order:1},[`> ${t}-content-holder`]:{order:0}},[`&${t}-right`]:{[`> ${t}-nav`]:{order:0},[`> ${t}-content-holder`]:{order:1}},[`&${t}-card${t}-top, &${t}-card${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginRight:{_skip_check_:!0,value:n},marginLeft:{_skip_check_:!0,value:0}}}}},[`${t}-dropdown-rtl`]:{direction:"rtl"},[`${t}-menu-item`]:{[`${t}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},tQ=e=>{let{componentCls:t,tabsCardPadding:i,cardHeight:r,cardGutter:n,itemHoverColor:l,itemActiveColor:o,colorBorderSecondary:a}=e;return{[t]:{...(0,tj.Wf)(e),display:"flex",[`> ${t}-nav, > div > ${t}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${t}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${e.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${t}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${e.motionDurationSlow}`},[`${t}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${t}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${t}-nav-more`]:{position:"relative",padding:i,background:"transparent",border:0,color:e.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:e.calc(e.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${t}-nav-add`]:{minWidth:r,minHeight:r,marginLeft:{_skip_check_:!0,value:n},background:"transparent",border:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${a}`,borderRadius:`${(0,c.bf)(e.borderRadiusLG)} ${(0,c.bf)(e.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:e.colorText,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&:hover":{color:l},"&:active, &:focus:not(:focus-visible)":{color:o},...(0,tj.Qy)(e,-3)}},[`${t}-extra-content`]:{flex:"none"},[`${t}-ink-bar`]:{position:"absolute",background:e.inkBarColor,pointerEvents:"none"},...tq(e),[`${t}-content`]:{position:"relative",width:"100%"},[`${t}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${t}-tabpane`]:{...(0,tj.Qy)(e),"&-hidden":{display:"none"}}},[`${t}-centered`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-nav-wrap`]:{[`&:not([class*='${t}-nav-wrap-ping']) > ${t}-nav-list`]:{margin:"auto"}}}}}},t0=(0,p.I$)("Tabs",e=>{let t=(0,g.IX)(e,{tabsCardPadding:e.cardPadding,dropdownEdgeChildVerticalPadding:e.paddingXXS,tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${(0,c.bf)(e.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${(0,c.bf)(e.horizontalItemGutter)}`});return[tY(t),tJ(t),tX(t),tK(t),tU(t),tQ(t),tV(t)]},e=>{let{cardHeight:t,cardHeightSM:i,cardHeightLG:r,controlHeight:n,controlHeightLG:l}=e,o=t||l,a=i||n,s=r||l+8;return{zIndexPopup:e.zIndexPopupBase+50,cardBg:e.colorFillAlter,cardHeight:o,cardHeightSM:a,cardHeightLG:s,cardPadding:`${(o-e.fontHeight)/2-e.lineWidth}px ${e.padding}px`,cardPaddingSM:`${(a-e.fontHeight)/2-e.lineWidth}px ${e.paddingXS}px`,cardPaddingLG:`${(s-e.fontHeightLG)/2-e.lineWidth}px ${e.padding}px`,titleFontSize:e.fontSize,titleFontSizeLG:e.fontSizeLG,titleFontSizeSM:e.fontSize,inkBarColor:e.colorPrimary,horizontalMargin:`0 0 ${e.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${e.paddingSM}px 0`,horizontalItemPaddingSM:`${e.paddingXS}px 0`,horizontalItemPaddingLG:`${e.padding}px 0`,verticalItemPadding:`${e.paddingXS}px ${e.paddingLG}px`,verticalItemMargin:`${e.margin}px 0 0 0`,itemColor:e.colorText,itemSelectedColor:e.colorPrimary,itemHoverColor:e.colorPrimaryHover,itemActiveColor:e.colorPrimaryActive,cardGutter:e.marginXXS/2}}),t1=n.forwardRef((e,t)=>{var i,r;let d,{type:u,className:c,rootClassName:p,size:g,onEdit:f,hideAdd:m,centered:b,addIcon:y,removeIcon:v,moreIcon:_,more:C,popupClassName:x,children:w,items:S,animated:A,style:k,indicatorSize:M,indicator:T,classNames:R,styles:E,destroyInactiveTabPane:P,destroyOnHidden:B,tabPlacement:I,tabPosition:L,...F}=e,{prefixCls:O}=F,{getPrefixCls:D,direction:z,getPopupContainer:Z,className:N,style:j,classNames:G,styles:V}=(0,s.dj)("tabs"),{tabs:U}=n.useContext(s.E_),K=D("tabs",O),X=(0,tZ.Z)(K),[Y,q]=t0(K,X),J=n.useRef(null);n.useImperativeHandle(t,()=>({nativeElement:J.current})),"editable-card"===u&&(d={onEdit:(e,{key:t,event:i})=>{f?.("add"===e?i:t,e)},removeIcon:v??U?.removeIcon??n.createElement(H.Z,null),addIcon:(y??U?.addIcon)||n.createElement($,null),showAdd:!0!==m});let Q=D(),ee=(0,h.Z)(g),et=(i=S,r=w,i?i.map(e=>({...e,destroyOnHidden:e.destroyOnHidden??e.destroyInactiveTabPane})):(0,l.qo)(r).map(e=>{if(n.isValidElement(e)){let{key:t,props:i}=e,{tab:r,...n}=i||{};return{key:String(t),...n,label:r}}return null}).filter(e=>e)),ei=function(e,t={inkBar:!0,tabPane:!1}){let i;return(i=!1===t?{inkBar:!1,tabPane:!1}:!0===t?{inkBar:!0,tabPane:!0}:{inkBar:!0,..."object"==typeof t?t:{}}).tabPane&&(i.tabPaneMotion={...t$,motionName:(0,tN.m)(e,"switch")}),i}(K,A),er={align:T?.align??U?.indicator?.align,size:T?.size??M??U?.indicator?.size??U?.indicatorSize},en=n.useMemo(()=>{let e=I??L??void 0,t="rtl"===z;switch(e){case"start":return t?"right":"left";case"end":return t?"left":"right";default:return e}},[I,L,z]),el={...e,size:ee,tabPlacement:en,items:et},[eo,ea]=(0,a.MW)([G,R],[V,E],{props:el},{popup:{_default:"root"}});return n.createElement(tW,{ref:J,direction:z,getPopupContainer:Z,...F,items:et,className:(0,o.W)({[`${K}-${ee}`]:ee,[`${K}-card`]:["card","editable-card"].includes(u),[`${K}-editable-card`]:"editable-card"===u,[`${K}-centered`]:b},N,c,p,eo.root,Y,q,X),classNames:{...eo,popup:(0,o.W)(x,Y,q,X,eo.popup?.root)},styles:ea,style:{...ea.root,...j,...k},editable:d,more:{icon:U?.more?.icon??U?.moreIcon??_??n.createElement(W,null),transitionName:`${Q}-slide-up`,...C},prefixCls:K,animated:ei,indicator:er,destroyOnHidden:B??P,tabPosition:en})});t1.TabPane=()=>null;let t2=({prefixCls:e,className:t,hoverable:i=!0,...r})=>{let{getPrefixCls:l}=n.useContext(s.E_),a=l("card",e),h=(0,o.W)(`${a}-grid`,t,{[`${a}-grid-hoverable`]:i});return n.createElement("div",{...r,className:h})},t3=e=>{let{antCls:t,componentCls:i,headerHeight:r,headerPadding:n,tabsMarginBottom:l}=e;return{display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${(0,c.bf)(n)}`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.headerFontSize,background:e.headerBg,borderBottom:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${(0,c.bf)(e.borderRadiusLG)} ${(0,c.bf)(e.borderRadiusLG)} 0 0`,...(0,tj.dF)(),"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":{display:"inline-block",flex:1,...tj.vS,[`
          > ${i}-typography,
          > ${i}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}},[`${t}-tabs-top`]:{clear:"both",marginBottom:l,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`}}}},t4=e=>{let{cardPaddingBase:t,colorBorderSecondary:i,cardShadow:r,lineWidth:n}=e;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`
      ${(0,c.bf)(n)} 0 0 0 ${i},
      0 ${(0,c.bf)(n)} 0 0 ${i},
      ${(0,c.bf)(n)} ${(0,c.bf)(n)} 0 0 ${i},
      ${(0,c.bf)(n)} 0 0 0 ${i} inset,
      0 ${(0,c.bf)(n)} 0 0 ${i} inset;
    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},t5=e=>{let{componentCls:t,iconCls:i,actionsLiMargin:r,cardActionsIconSize:n,colorBorderSecondary:l,actionsBg:o}=e;return{margin:0,padding:0,listStyle:"none",background:o,borderTop:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${l}`,display:"flex",borderRadius:`0 0 ${(0,c.bf)(e.borderRadiusLG)} ${(0,c.bf)(e.borderRadiusLG)}`,...(0,tj.dF)(),"& > li":{margin:r,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.calc(e.cardActionsIconSize).mul(2).equal(),fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${t}-btn), > ${i}`]:{display:"inline-block",width:"100%",color:e.colorIcon,lineHeight:(0,c.bf)(e.fontHeight),transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${i}`]:{fontSize:n,lineHeight:(0,c.bf)(e.calc(n).mul(e.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${l}`}}}},t6=e=>({margin:`${(0,c.bf)(e.calc(e.marginXXS).mul(-1).equal())} 0`,display:"flex",...(0,tj.dF)(),"&-avatar":{paddingInlineEnd:e.padding},"&-section":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,...tj.vS},"&-description":{color:e.colorTextDescription}}),t8=e=>{let{componentCls:t,colorFillAlter:i,headerPadding:r,bodyPadding:n}=e;return{[`${t}-head`]:{padding:`0 ${(0,c.bf)(r)}`,background:i,"&-title":{fontSize:e.fontSize}},[`${t}-body`]:{padding:`${(0,c.bf)(e.padding)} ${(0,c.bf)(n)}`}}},t7=e=>{let{componentCls:t}=e;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},t9=e=>{let{componentCls:t,cardShadow:i,cardHeadPadding:r,colorBorderSecondary:n,boxShadowTertiary:l,bodyPadding:o,extraColor:a}=e;return{[t]:{...(0,tj.Wf)(e),position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:l},[`${t}-head`]:t3(e),[`${t}-extra`]:{marginInlineStart:"auto",color:a,fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:{padding:o,borderRadius:`0 0 ${(0,c.bf)(e.borderRadiusLG)} ${(0,c.bf)(e.borderRadiusLG)}`},[`${t}-grid`]:t4(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%",borderRadius:`${(0,c.bf)(e.borderRadiusLG)} ${(0,c.bf)(e.borderRadiusLG)} 0 0`}},[`${t}-actions`]:t5(e),[`${t}-meta`]:t6(e)},[`${t}-bordered`]:{border:`${(0,c.bf)(e.lineWidth)} ${e.lineType} ${n}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:i}},[`${t}-contain-grid`]:{borderRadius:`${(0,c.bf)(e.borderRadiusLG)} ${(0,c.bf)(e.borderRadiusLG)} 0 0 `,[`&:not(:has(> ${t}-head))`]:{borderRadius:0},[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:e.calc(e.lineWidth).mul(-1).equal(),marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),padding:0}},[`${t}-contain-tabs`]:{[`> div${t}-head`]:{minHeight:0,[`${t}-head-title, ${t}-extra`]:{paddingTop:r}}},[`${t}-type-inner`]:t8(e),[`${t}-loading`]:t7(e),[`${t}-rtl`]:{direction:"rtl"}}},ie=e=>{let{componentCls:t,bodyPaddingSM:i,headerPaddingSM:r,headerHeightSM:n,headerFontSizeSM:l}=e;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:n,padding:`0 ${(0,c.bf)(r)}`,fontSize:l,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:e.fontSize}}},[`> ${t}-body`]:{padding:i}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}},it=(0,p.I$)("Card",e=>{let t=(0,g.IX)(e,{cardShadow:e.boxShadowCard,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardActionsIconSize:e.fontSize});return[t9(t),ie(t)]},e=>({headerBg:"transparent",headerFontSize:e.fontSizeLG,headerFontSizeSM:e.fontSize,headerHeight:e.fontSizeLG*e.lineHeightLG+2*e.padding,headerHeightSM:e.fontSize*e.lineHeight+2*e.paddingXS,actionsBg:e.colorBgContainer,actionsLiMargin:`${e.paddingSM}px 0`,tabsMarginBottom:-e.padding-e.lineWidth,extraColor:e.colorText,bodyPaddingSM:12,headerPaddingSM:12,bodyPadding:e.bodyPadding??e.paddingLG,headerPadding:e.headerPadding??e.paddingLG})),ii=e=>{let{actionClasses:t,actions:i=[],actionStyle:r}=e;return n.createElement("ul",{className:t,style:r},i.map((e,t)=>{let r=`action-${t}`;return n.createElement("li",{style:{width:`${100/i.length}%`},key:r},n.createElement("span",null,e))}))},ir=n.forwardRef((e,t)=>{let i,{prefixCls:r,className:u,rootClassName:c,style:p,extra:g,headStyle:f={},bodyStyle:m={},title:b,loading:y,bordered:v,variant:_,size:C,type:x,cover:w,actions:S,tabList:A,children:k,activeTabKey:M,defaultActiveTabKey:T,tabBarExtraContent:R,hoverable:E,tabProps:P={},classNames:B,styles:I,...L}=e,{getPrefixCls:H,direction:O,className:D,style:z,classNames:W,styles:Z}=(0,s.dj)("card"),[N]=(0,d.Z)("card",_,v),$=(0,h.Z)(C),j={...e,size:$,variant:N,loading:y},[G,V]=(0,a.MW)([W,B],[Z,I],{props:j}),U=n.useMemo(()=>(0,l.qo)(k).some(e=>n.isValidElement(e)&&e.type===t2),[k]),K=H("card",r),[X,Y]=it(K),q=n.createElement(F,{loading:!0,active:!0,paragraph:{rows:4},title:!1},k),J=void 0!==M,Q={...P,[J?"activeKey":"defaultActiveKey"]:J?M:T,tabBarExtraContent:R},ee=$&&"default"!==$?$:"large",et=A?n.createElement(t1,{size:ee,...Q,className:`${K}-head-tabs`,onChange:t=>{e.onTabChange?.(t)},items:A.map(({tab:e,...t})=>({label:e,...t}))}):null;if(b||g||et){let e=(0,o.W)(`${K}-head`,G.header),t=(0,o.W)(`${K}-head-title`,G.title),r=(0,o.W)(`${K}-extra`,G.extra),l={...f,...V.header};i=n.createElement("div",{className:e,style:l},n.createElement("div",{className:`${K}-head-wrapper`},b&&n.createElement("div",{className:t,style:V.title},b),g&&n.createElement("div",{className:r,style:V.extra},g)),et)}let ei=(0,o.W)(`${K}-cover`,G.cover),er=w?n.createElement("div",{className:ei,style:V.cover},w):null,en=(0,o.W)(`${K}-body`,G.body),el={...m,...V.body},eo=n.createElement("div",{className:en,style:el},y?q:k),ea=(0,o.W)(`${K}-actions`,G.actions),es=S?.length?n.createElement(ii,{actionClasses:ea,actionStyle:V.actions,actions:S}):null,eh=(0,l.CE)(L,["onTabChange"]),ed=(0,o.W)(K,D,{[`${K}-loading`]:y,[`${K}-bordered`]:"borderless"!==N,[`${K}-hoverable`]:E,[`${K}-contain-grid`]:U,[`${K}-contain-tabs`]:A?.length,[`${K}-${$}`]:$,[`${K}-type-${x}`]:!!x,[`${K}-rtl`]:"rtl"===O},u,c,X,Y,G.root),eu={...V.root,...z,...p};return n.createElement("div",{ref:t,...eh,className:ed,style:eu},i,er,eo,es)});ir.Grid=t2,ir.Meta=e=>{let{prefixCls:t,className:i,avatar:r,title:l,description:h,style:d,classNames:u,styles:c,...p}=e,{getPrefixCls:g,className:f,style:m,classNames:b,styles:y}=(0,s.dj)("cardMeta"),v=g("card",t),_=`${v}-meta`,[C,x]=(0,a.MW)([b,u],[y,c],{props:e}),w=(0,o.W)(_,i,f,C.root),S={...m,...x.root,...d},A=(0,o.W)(`${_}-avatar`,C.avatar),k=(0,o.W)(`${_}-title`,C.title),M=(0,o.W)(`${_}-description`,C.description),T=(0,o.W)(`${_}-section`,C.section),R=r?n.createElement("div",{className:A,style:x.avatar},r):null,E=l?n.createElement("div",{className:k,style:x.title},l):null,P=h?n.createElement("div",{className:M,style:x.description},h):null,B=E||P?n.createElement("div",{className:T,style:x.section},E,P):null;return n.createElement("div",{...p,className:w,style:S},R,B)};let il=ir},4147:function(e,t,i){i.d(t,{Z:()=>o,n:()=>l});var r=i(44194);let n=r.createContext(!1),l=({children:e,disabled:t})=>{let i=r.useContext(n);return r.createElement(n.Provider,{value:t??i},e)},o=n},35933:function(e,t,i){i.d(t,{Z:()=>o,q:()=>l});var r=i(44194);let n=r.createContext(void 0),l=({children:e,size:t})=>{let i=r.useContext(n);return r.createElement(n.Provider,{value:t||i},e)},o=n},391:function(e,t,i){i.d(t,{E_:()=>a,Rf:()=>n,dj:()=>d,oR:()=>l,tr:()=>o});var r=i(44194);let n="ant",l="anticon",o=["outlined","borderless","filled","underlined"],a=r.createContext({getPrefixCls:(e,t)=>t||(e?`${n}-${e}`:n),iconPrefixCls:l}),{Consumer:s}=a,h={};function d(e){let t=r.useContext(a),{getPrefixCls:i,direction:n,getPopupContainer:l,renderEmpty:o}=t;return{classNames:h,styles:h,...t[e],getPrefixCls:i,direction:n,getPopupContainer:l,renderEmpty:o}}},76436:function(e,t,i){i.d(t,{Z:()=>b});var r=i(44194),n=i(391),l=i(10976),o=i(27338),a=i(50806),s=i(38187),h=i(35865),d=i(58476),u=i(64033);let c=e=>{let{componentCls:t,margin:i,marginXS:r,marginXL:n,fontSize:l,lineHeight:o}=e;return{[t]:{marginInline:r,fontSize:l,lineHeight:o,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:r,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorTextDescription},[`${t}-footer`]:{marginTop:i},"&-normal":{marginBlock:n,color:e.colorTextDescription,[`${t}-description`]:{color:e.colorTextDescription},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:r,color:e.colorTextDescription,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},p=(0,d.I$)("Empty",e=>{let{componentCls:t,controlHeightLG:i,calc:r}=e;return c((0,u.IX)(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r(i).mul(2.5).equal(),emptyImgHeightMD:i,emptyImgHeightSM:r(i).mul(.875).equal()}))}),g=r.createElement(()=>{let[,e]=(0,h.ZP)(),[t]=(0,a.Z)("Empty"),i=new s.t(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return r.createElement("svg",{style:i,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},r.createElement("title",null,t?.description||"Empty"),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("g",{transform:"translate(24 31.67)"},r.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),r.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),r.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),r.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),r.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),r.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),r.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},r.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),r.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},null),f=r.createElement(()=>{let[,e]=(0,h.ZP)(),[t]=(0,a.Z)("Empty"),{colorFill:i,colorFillTertiary:n,colorFillQuaternary:l,colorBgContainer:o}=e,{borderColor:d,shadowColor:u,contentColor:c}=(0,r.useMemo)(()=>({borderColor:new s.t(i).onBackground(o).toHexString(),shadowColor:new s.t(n).onBackground(o).toHexString(),contentColor:new s.t(l).onBackground(o).toHexString()}),[i,n,l,o]);return r.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},r.createElement("title",null,t?.description||"Empty"),r.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},r.createElement("ellipse",{fill:u,cx:"32",cy:"33",rx:"32",ry:"7"}),r.createElement("g",{fillRule:"nonzero",stroke:d},r.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),r.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:c}))))},null),m=e=>{let{className:t,rootClassName:i,prefixCls:s,image:h,description:d,children:u,imageStyle:c,style:m,classNames:b,styles:y,...v}=e,{getPrefixCls:_,direction:C,className:x,style:w,classNames:S,styles:A,image:k}=(0,n.dj)("empty"),M=_("empty",s),[T,R]=p(M),[E,P]=(0,o.MW)([S,b],[A,y],{props:e}),[B]=(0,a.Z)("Empty"),I=void 0!==d?d:B?.description,L="string"==typeof I?I:"empty",F=h??k??g,H=null;return H="string"==typeof F?r.createElement("img",{draggable:!1,alt:L,src:F}):F,r.createElement("div",{className:(0,l.W)(T,R,M,x,{[`${M}-normal`]:F===f,[`${M}-rtl`]:"rtl"===C},t,i,E.root),style:{...P.root,...w,...m},...v},r.createElement("div",{className:(0,l.W)(`${M}-image`,E.image),style:{...c,...P.image}},H),I&&r.createElement("div",{className:(0,l.W)(`${M}-description`,E.description),style:P.description},I),u&&r.createElement("div",{className:(0,l.W)(`${M}-footer`,E.footer),style:P.footer},u))};m.PRESENTED_IMAGE_DEFAULT=g,m.PRESENTED_IMAGE_SIMPLE=f;let b=e=>{let{componentName:t}=e,{getPrefixCls:i}=(0,r.useContext)(n.E_),l=i("empty");switch(t){case"Table":case"List":return r.createElement(m,{image:m.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return r.createElement(m,{image:m.PRESENTED_IMAGE_SIMPLE,className:`${l}-small`});case"Table.filter":return null;default:return r.createElement(m,null)}}},74750:function(e,t,i){i.d(t,{Z:()=>r});let r=e=>`${e}-css-var`},54544:function(e,t,i){i.d(t,{Z:()=>l});var r=i(44194),n=i(35933);let l=e=>{let t=r.useContext(n.Z);return r.useMemo(()=>e?"string"==typeof e?e??t:"function"==typeof e?e(t):t:t,[e,t])}},51040:function(e,t,i){i.d(t,{Z:()=>A});var r=i(44194),n=i(10894),l=i(10976),o=i(20325),a=i(24659),s=i(8484),h=i(391),d=i(58476),u=i(64033);let c=["wrap","nowrap","wrap-reverse"],p=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],g=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],f=(e,t)=>{let i=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${i}`]:i&&c.includes(i)}},m=(e,t)=>{let i={};return g.forEach(r=>{i[`${e}-align-${r}`]=t.align===r}),i[`${e}-align-stretch`]=!t.align&&!!t.vertical,i},b=(e,t)=>{let i={};return p.forEach(r=>{i[`${e}-justify-${r}`]=t.justify===r}),i},y=(e,t)=>(0,l.W)({...f(e,t),...m(e,t),...b(e,t)}),v=e=>{let{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},_=e=>{let{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}},C=e=>{let{componentCls:t}=e,i={};return c.forEach(e=>{i[`${t}-wrap-${e}`]={flexWrap:e}}),i},x=e=>{let{componentCls:t}=e,i={};return g.forEach(e=>{i[`${t}-align-${e}`]={alignItems:e}}),i},w=e=>{let{componentCls:t}=e,i={};return p.forEach(e=>{i[`${t}-justify-${e}`]={justifyContent:e}}),i},S=(0,d.I$)("Flex",e=>{let{paddingXS:t,padding:i,paddingLG:r}=e,n=(0,u.IX)(e,{flexGapSM:t,flexGap:i,flexGapLG:r});return[v(n),_(n),C(n),x(n),w(n)]},()=>({}),{resetStyle:!1}),A=r.forwardRef((e,t)=>{let{prefixCls:i,rootClassName:d,className:u,style:c,flex:p,gap:g,vertical:f,orientation:m,component:b="div",children:v,..._}=e,{flex:C,direction:x,getPrefixCls:w}=r.useContext(h.E_),A=w("flex",i),[k,M]=S(A),[,T]=(0,a.R)(m,f??C?.vertical),R=(0,l.W)(u,d,C?.className,A,k,M,y(A,e),{[`${A}-rtl`]:"rtl"===x,[`${A}-gap-${g}`]:(0,o.n)(g),[`${A}-vertical`]:T}),E={...C?.style,...c};return(0,s.Z)(p)&&(E.flex=p),(0,s.Z)(g)&&!(0,o.n)(g)&&(E.gap=g),r.createElement(b,{ref:t,className:R,style:E,...(0,n.CE)(_,["justify","wrap","align"])},v)})},65525:function(e,t,i){i.d(t,{aM:()=>ex,Ux:()=>ew,pg:()=>eS});var r,n=i(44194),l=i(48071),o=i(64246),a=i(57705);let s="RC_FORM_INTERNAL_HOOKS",h=()=>{(0,a.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},d=n.createContext({getFieldValue:h,getFieldsValue:h,getFieldError:h,getFieldWarning:h,getFieldsError:h,isFieldsTouched:h,isFieldTouched:h,isFieldValidating:h,isFieldsValidating:h,resetFields:h,setFields:h,setFieldValue:h,setFieldsValue:h,validateFields:h,submit:h,getInternalHooks:()=>(h(),{dispatch:h,initEntityValue:h,registerField:h,useSubscribe:h,setInitialValues:h,destroyForm:h,setCallbacks:h,registerWatch:h,getFields:h,setValidateMessages:h,setPreserve:h,getInitialValue:h})}),u=n.createContext(null);function c(e){return null==e?[]:Array.isArray(e)?e:[e]}var p=i(88185),g=i(44603),f=i(8230),m=i(70062),b=i(86873),y=i(14816);function v(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",tel:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var _=v(),C=i(83436),x=i(8159),w=i(62391),S=i(55309),A=i(89485),k=i(23312);function M(e){var t="function"==typeof Map?new Map:void 0;return(M=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return function(e,t,i){if((0,k.Z)())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var n=new(e.bind.apply(e,r));return i&&(0,A.Z)(n,i.prototype),n}(e,arguments,(0,S.Z)(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),(0,A.Z)(i,e)})(e)}var T=/%[sdj%]/g;function R(e){if(!e||!e.length)return null;var t={};return e.forEach(function(e){var i=e.field;t[i]=t[i]||[],t[i].push(e)}),t}function E(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var n=0,l=i.length;return"function"==typeof e?e.apply(null,i):"string"==typeof e?e.replace(T,function(e){if("%%"===e)return"%";if(n>=l)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}):e}function P(e,t){return!!(null==e||"array"===t&&Array.isArray(e)&&!e.length)||("string"===t||"url"===t||"hex"===t||"email"===t||"date"===t||"pattern"===t||"tel"===t)&&"string"==typeof e&&!e||!1}function B(e,t,i){var r=0,n=e.length;!function l(o){if(o&&o.length)return void i(o);var a=r;r+=1,a<n?t(e[a],l):i([])}([])}"undefined"!=typeof process&&process.env;var I=function(e){(0,x.Z)(i,e);var t=(0,w.Z)(i);function i(e,r){var n;return(0,m.Z)(this,i),n=t.call(this,"Async Validation Error"),(0,y.Z)((0,C.Z)(n),"errors",void 0),(0,y.Z)((0,C.Z)(n),"fields",void 0),n.errors=e,n.fields=r,n}return(0,b.Z)(i)}(M(Error));function L(e,t){return function(i){var r;return(r=e.fullFields?function(e,t){for(var i=e,r=0;r<t.length&&void 0!=i;r++)i=i[t[r]];return i}(t,e.fullFields):t[i.field||e.fullField],i&&void 0!==i.message)?(i.field=i.field||e.fullField,i.fieldValue=r,i):{message:"function"==typeof i?i():i,fieldValue:r,field:i.field||e.fullField}}}function F(e,t){if(t){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];"object"===(0,f.Z)(r)&&"object"===(0,f.Z)(e[i])?e[i]=(0,p.Z)((0,p.Z)({},e[i]),r):e[i]=r}}return e}var H="enum";let O=function(e,t,i,r,n,l){e.required&&(!i.hasOwnProperty(e.field)||P(t,l||e.type))&&r.push(E(n.messages.required,e.fullField))},D=function(){if(r)return r;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",l=["(?:".concat(n,":){7}(?:").concat(n,"|:)"),"(?:".concat(n,":){6}(?:").concat(i,"|:").concat(n,"|:)"),"(?:".concat(n,":){5}(?::").concat(i,"|(?::").concat(n,"){1,2}|:)"),"(?:".concat(n,":){4}(?:(?::").concat(n,"){0,1}:").concat(i,"|(?::").concat(n,"){1,3}|:)"),"(?:".concat(n,":){3}(?:(?::").concat(n,"){0,2}:").concat(i,"|(?::").concat(n,"){1,4}|:)"),"(?:".concat(n,":){2}(?:(?::").concat(n,"){0,3}:").concat(i,"|(?::").concat(n,"){1,5}|:)"),"(?:".concat(n,":){1}(?:(?::").concat(n,"){0,4}:").concat(i,"|(?::").concat(n,"){1,6}|:)"),"(?::(?:(?::".concat(n,"){0,5}:").concat(i,"|(?::").concat(n,"){1,7}|:))")],o="(?:".concat(l.join("|"),")").concat("(?:%[0-9a-zA-Z]{1,})?"),a=new RegExp("(?:^".concat(i,"$)|(?:^").concat(o,"$)")),s=new RegExp("^".concat(i,"$")),h=new RegExp("^".concat(o,"$")),d=function(e){return e&&e.exact?a:RegExp("(?:".concat(t(e)).concat(i).concat(t(e),")|(?:").concat(t(e)).concat(o).concat(t(e),")"),"g")};d.v4=function(e){return e&&e.exact?s:RegExp("".concat(t(e)).concat(i).concat(t(e)),"g")},d.v6=function(e){return e&&e.exact?h:RegExp("".concat(t(e)).concat(o).concat(t(e)),"g")};var u=d.v4().source,c=d.v6().source,p="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:localhost|").concat(u,"|").concat(c,"|").concat("(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return r=RegExp("(?:^".concat(p,"$)"),"i")};var z={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,tel:/^(\+[0-9]{1,3}[-\s\u2011]?)?(\([0-9]{1,4}\)[-\s\u2011]?)?([0-9]+[-\s\u2011]?)*[0-9]+$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},W={integer:function(e){return W.number(e)&&parseInt(e,10)===e},float:function(e){return W.number(e)&&!W.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return new RegExp(e),!0}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===(0,f.Z)(e)&&!W.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&e.length<=320&&!!e.match(z.email)},tel:function(e){return"string"==typeof e&&e.length<=32&&!!e.match(z.tel)},url:function(e){return"string"==typeof e&&e.length<=2048&&!!e.match(D())},hex:function(e){return"string"==typeof e&&!!e.match(z.hex)}};let Z={required:O,whitespace:function(e,t,i,r,n){(/^\s+$/.test(t)||""===t)&&r.push(E(n.messages.whitespace,e.fullField))},type:function(e,t,i,r,n){if(e.required&&void 0===t)return void O(e,t,i,r,n);var l=e.type;["integer","float","array","regexp","object","method","email","tel","number","date","url","hex"].indexOf(l)>-1?W[l](t)||r.push(E(n.messages.types[l],e.fullField,e.type)):l&&(0,f.Z)(t)!==e.type&&r.push(E(n.messages.types[l],e.fullField,e.type))},range:function(e,t,i,r,n){var l="number"==typeof e.len,o="number"==typeof e.min,a="number"==typeof e.max,s=t,h=null,d="number"==typeof t,u="string"==typeof t,c=Array.isArray(t);if(d?h="number":u?h="string":c&&(h="array"),!h)return!1;c&&(s=t.length),u&&(s=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),l?s!==e.len&&r.push(E(n.messages[h].len,e.fullField,e.len)):o&&!a&&s<e.min?r.push(E(n.messages[h].min,e.fullField,e.min)):a&&!o&&s>e.max?r.push(E(n.messages[h].max,e.fullField,e.max)):o&&a&&(s<e.min||s>e.max)&&r.push(E(n.messages[h].range,e.fullField,e.min,e.max))},enum:function(e,t,i,r,n){e[H]=Array.isArray(e[H])?e[H]:[],-1===e[H].indexOf(t)&&r.push(E(n.messages[H],e.fullField,e[H].join(", ")))},pattern:function(e,t,i,r,n){e.pattern&&(e.pattern instanceof RegExp?(e.pattern.lastIndex=0,e.pattern.test(t)||r.push(E(n.messages.pattern.mismatch,e.fullField,t,e.pattern))):"string"==typeof e.pattern&&(new RegExp(e.pattern).test(t)||r.push(E(n.messages.pattern.mismatch,e.fullField,t,e.pattern))))}},N=function(e,t,i,r,n){var l=e.type,o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t,l)&&!e.required)return i();Z.required(e,t,r,o,n,l),P(t,l)||Z.type(e,t,r,o,n)}i(o)},$={string:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t,"string")&&!e.required)return i();Z.required(e,t,r,l,n,"string"),P(t,"string")||(Z.type(e,t,r,l,n),Z.range(e,t,r,l,n),Z.pattern(e,t,r,l,n),!0===e.whitespace&&Z.whitespace(e,t,r,l,n))}i(l)},method:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return i();Z.required(e,t,r,l,n),void 0!==t&&Z.type(e,t,r,l,n)}i(l)},number:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),P(t)&&!e.required)return i();Z.required(e,t,r,l,n),void 0!==t&&(Z.type(e,t,r,l,n),Z.range(e,t,r,l,n))}i(l)},boolean:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return i();Z.required(e,t,r,l,n),void 0!==t&&Z.type(e,t,r,l,n)}i(l)},regexp:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return i();Z.required(e,t,r,l,n),P(t)||Z.type(e,t,r,l,n)}i(l)},integer:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return i();Z.required(e,t,r,l,n),void 0!==t&&(Z.type(e,t,r,l,n),Z.range(e,t,r,l,n))}i(l)},float:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return i();Z.required(e,t,r,l,n),void 0!==t&&(Z.type(e,t,r,l,n),Z.range(e,t,r,l,n))}i(l)},array:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return i();Z.required(e,t,r,l,n,"array"),null!=t&&(Z.type(e,t,r,l,n),Z.range(e,t,r,l,n))}i(l)},object:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return i();Z.required(e,t,r,l,n),void 0!==t&&Z.type(e,t,r,l,n)}i(l)},enum:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return i();Z.required(e,t,r,l,n),void 0!==t&&Z.enum(e,t,r,l,n)}i(l)},pattern:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t,"string")&&!e.required)return i();Z.required(e,t,r,l,n),P(t,"string")||Z.pattern(e,t,r,l,n)}i(l)},date:function(e,t,i,r,n){var l,o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t,"date")&&!e.required)return i();Z.required(e,t,r,o,n),!P(t,"date")&&(l=t instanceof Date?t:new Date(t),Z.type(e,l,r,o,n),l&&Z.range(e,l.getTime(),r,o,n))}i(o)},url:N,hex:N,email:N,tel:N,required:function(e,t,i,r,n){var l=[],o=Array.isArray(t)?"array":(0,f.Z)(t);Z.required(e,t,r,l,n,o),i(l)},any:function(e,t,i,r,n){var l=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(P(t)&&!e.required)return i();Z.required(e,t,r,l,n)}i(l)}};var j=function(){function e(t){(0,m.Z)(this,e),(0,y.Z)(this,"rules",null),(0,y.Z)(this,"_messages",_),this.define(t)}return(0,b.Z)(e,[{key:"define",value:function(e){var t=this;if(!e)throw Error("Cannot configure a schema with no rules");if("object"!==(0,f.Z)(e)||Array.isArray(e))throw Error("Rules must be an object");this.rules={},Object.keys(e).forEach(function(i){var r=e[i];t.rules[i]=Array.isArray(r)?r:[r]})}},{key:"messages",value:function(e){return e&&(this._messages=F(v(),e)),this._messages}},{key:"validate",value:function(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},l=t,o=r,a=n;if("function"==typeof o&&(a=o,o={}),!this.rules||0===Object.keys(this.rules).length)return a&&a(null,l),Promise.resolve(l);if(o.messages){var s=this.messages();s===_&&(s=v()),F(s,o.messages),o.messages=s}else o.messages=this.messages();var h={};(o.keys||Object.keys(this.rules)).forEach(function(e){var r=i.rules[e],n=l[e];r.forEach(function(r){var o=r;"function"==typeof o.transform&&(l===t&&(l=(0,p.Z)({},l)),null!=(n=l[e]=o.transform(n))&&(o.type=o.type||(Array.isArray(n)?"array":(0,f.Z)(n)))),(o="function"==typeof o?{validator:o}:(0,p.Z)({},o)).validator=i.getValidationMethod(o),o.validator&&(o.field=e,o.fullField=o.fullField||e,o.type=i.getType(o),h[e]=h[e]||[],h[e].push({rule:o,value:n,source:l,field:e}))})});var d={};return function(e,t,i,r,n){if(t.first){var l=new Promise(function(t,l){var o;B((o=[],Object.keys(e).forEach(function(t){o.push.apply(o,(0,g.Z)(e[t]||[]))}),o),i,function(e){return r(e),e.length?l(new I(e,R(e))):t(n)})});return l.catch(function(e){return e}),l}var o=!0===t.firstFields?Object.keys(e):t.firstFields||[],a=Object.keys(e),s=a.length,h=0,d=[],u=new Promise(function(t,l){var u=function(e){if(d.push.apply(d,e),++h===s)return r(d),d.length?l(new I(d,R(d))):t(n)};a.length||(r(d),t(n)),a.forEach(function(t){var r=e[t];if(-1!==o.indexOf(t))B(r,i,u);else{var n=[],l=0,a=r.length;function s(e){n.push.apply(n,(0,g.Z)(e||[])),++l===a&&u(n)}r.forEach(function(e){i(e,s)})}})});return u.catch(function(e){return e}),u}(h,o,function(t,i){var r,n,a,s=t.rule,h=("object"===s.type||"array"===s.type)&&("object"===(0,f.Z)(s.fields)||"object"===(0,f.Z)(s.defaultField));function u(e,t){return(0,p.Z)((0,p.Z)({},t),{},{fullField:"".concat(s.fullField,".").concat(e),fullFields:s.fullFields?[].concat((0,g.Z)(s.fullFields),[e]):[e]})}function c(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Array.isArray(r)?r:[r];!o.suppressWarning&&n.length&&e.warning("async-validator:",n),n.length&&void 0!==s.message&&null!==s.message&&(n=[].concat(s.message));var a=n.map(L(s,l));if(o.first&&a.length)return d[s.field]=1,i(a);if(h){if(s.required&&!t.value)return void 0!==s.message?a=[].concat(s.message).map(L(s,l)):o.error&&(a=[o.error(s,E(o.messages.required,s.field))]),i(a);var c={};s.defaultField&&Object.keys(t.value).map(function(e){c[e]=s.defaultField});var f={};Object.keys(c=(0,p.Z)((0,p.Z)({},c),t.rule.fields)).forEach(function(e){var t=c[e],i=Array.isArray(t)?t:[t];f[e]=i.map(u.bind(null,e))});var m=new e(f);m.messages(o.messages),t.rule.options&&(t.rule.options.messages=o.messages,t.rule.options.error=o.error),m.validate(t.value,t.rule.options||o,function(e){var t=[];a&&a.length&&t.push.apply(t,(0,g.Z)(a)),e&&e.length&&t.push.apply(t,(0,g.Z)(e)),i(t.length?t:null)})}else i(a)}if(h=h&&(s.required||!s.required&&t.value),s.field=t.field,s.asyncValidator)r=s.asyncValidator(s,t.value,c,t.source,o);else if(s.validator){try{r=s.validator(s,t.value,c,t.source,o)}catch(e){null==(n=(a=console).error)||n.call(a,e),o.suppressValidatorError||setTimeout(function(){throw e},0),c(e.message)}!0===r?c():!1===r?c("function"==typeof s.message?s.message(s.fullField||s.field):s.message||"".concat(s.fullField||s.field," fails")):r instanceof Array?c(r):r instanceof Error&&c(r.message)}r&&r.then&&r.then(function(){return c()},function(e){return c(e)})},function(e){!function(e){for(var t=[],i={},r=0;r<e.length;r++){var n,o=e[r];Array.isArray(o)?t=(n=t).concat.apply(n,(0,g.Z)(o)):t.push(o)}t.length?(i=R(t),a(t,i)):a(null,l)}(e)},l)}},{key:"getType",value:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!$.hasOwnProperty(e.type))throw Error(E("Unknown rule type %s",e.type));return e.type||"string"}},{key:"getValidationMethod",value:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),i=t.indexOf("message");return(-1!==i&&t.splice(i,1),1===t.length&&"required"===t[0])?$.required:$[this.getType(e)]||void 0}}]),e}();(0,y.Z)(j,"register",function(e,t){if("function"!=typeof t)throw Error("Cannot register a validator by type, validator is not a function");$[e]=t}),(0,y.Z)(j,"warning",function(){}),(0,y.Z)(j,"messages",_),(0,y.Z)(j,"validators",$);let G="'${name}' is not a valid ${type}",V={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:G,method:G,array:G,object:G,number:G,date:G,boolean:G,integer:G,float:G,regexp:G,email:G,tel:G,url:G,hex:G},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};var U=i(46136);let K="CODE_LOGIC_ERROR";async function X(e,t,i,r,l){let o={...i};if(delete o.ruleIndex,j.warning=()=>void 0,o.validator){let e=o.validator;o.validator=(...t)=>{try{return e(...t)}catch(e){return console.error(e),Promise.reject(K)}}}let a=null;o&&"array"===o.type&&o.defaultField&&(a=o.defaultField,delete o.defaultField);let s=new j({[e]:[o]}),h=(0,U.TS)(V,r.validateMessages);s.messages(h);let d=[];try{await Promise.resolve(s.validate({[e]:t},{...r}))}catch(e){e.errors&&(d=e.errors.map(({message:e},t)=>{let i=e===K?h.default:e;return n.isValidElement(i)?n.cloneElement(i,{key:`error_${t}`}):i}))}if(!d.length&&a&&Array.isArray(t)&&t.length>0)return(await Promise.all(t.map((t,i)=>X(`${e}.${i}`,t,a,r,l)))).reduce((e,t)=>[...e,...t],[]);let u={...i,name:e,enum:(i.enum||[]).join(", "),...l};return d.map(e=>{if("string"==typeof e)return e.replace(/\\?\$\{\w+\}/g,e=>e.startsWith("\\")?e.slice(1):u[e.slice(2,-1)]);return e})}async function Y(e){return Promise.all(e).then(e=>[].concat(...e))}async function q(e){let t=0;return new Promise(i=>{e.forEach(r=>{r.then(r=>{r.errors.length&&i([r]),(t+=1)===e.length&&i([])})})})}var J=i(88659);function Q(e){return c(e)}function ee(e,t){let i={};return t.forEach(t=>{let r=(0,J.Z)(e,t);i=(0,U.ZP)(i,t,r)}),i}function et(e,t,i=!1){return e&&e.some(e=>ei(t,e,i))}function ei(e,t,i=!1){return!!e&&!!t&&(!!i||e.length===t.length)&&t.every((t,i)=>e[i]===t)}function er(e,t,i){let{length:r}=e;if(t<0||t>=r||i<0||i>=r)return e;let n=e[t],l=t-i;return l>0?[...e.slice(0,i),n,...e.slice(i,t),...e.slice(t+1,r)]:l<0?[...e.slice(0,t),...e.slice(t+1,i+1),n,...e.slice(i+1,r)]:e}function en(){return(en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let el=[],eo=[];function ea(e,t,i,r,n,l){return"function"==typeof e?e(t,i,"source"in l?{source:l.source}:{}):r!==n}class es extends n.Component{static contextType=d;state={resetCount:0};cancelRegisterFunc=null;mounted=!1;touched=!1;dirty=!1;validatePromise;prevValidating;errors=el;warnings=eo;constructor(e){if(super(e),e.fieldContext){let{getInternalHooks:t}=e.fieldContext,{initEntityValue:i}=t(s);i(this)}}componentDidMount(){let{shouldUpdate:e,fieldContext:t}=this.props;if(this.mounted=!0,t){let{getInternalHooks:e}=t,{registerField:i}=e(s);this.cancelRegisterFunc=i(this)}!0===e&&this.reRender()}componentWillUnmount(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}cancelRegister=()=>{let{preserve:e,isListField:t,name:i}=this.props;this.cancelRegisterFunc&&this.cancelRegisterFunc(t,e,Q(i)),this.cancelRegisterFunc=null};getNamePath=()=>{let{name:e,fieldContext:t}=this.props,{prefixName:i=[]}=t;return void 0!==e?[...i,...e]:[]};getRules=()=>{let{rules:e=[],fieldContext:t}=this.props;return e.map(e=>"function"==typeof e?e(t):e)};reRender(){this.mounted&&this.forceUpdate()}refresh=()=>{this.mounted&&this.setState(({resetCount:e})=>({resetCount:e+1}))};metaCache=null;triggerMetaEvent=e=>{let{onMetaChange:t}=this.props;if(t){let i={...this.getMeta(),destroy:e};(0,o.Z)(this.metaCache,i)||t(i),this.metaCache=i}else this.metaCache=null};onStoreChange=(e,t,i)=>{let{shouldUpdate:r,dependencies:n=[],onReset:l}=this.props,{store:a}=i,s=this.getNamePath(),h=this.getValue(e),d=this.getValue(a),u=t&&et(t,s);switch("valueUpdate"===i.type&&"external"===i.source&&!(0,o.Z)(h,d)&&(this.touched=!0,this.dirty=!0,this.validatePromise=null,this.errors=el,this.warnings=eo,this.triggerMetaEvent()),i.type){case"reset":if(!t||u){this.touched=!1,this.dirty=!1,this.validatePromise=void 0,this.errors=el,this.warnings=eo,this.triggerMetaEvent(),l?.(),this.refresh();return}break;case"remove":if(r&&ea(r,e,a,h,d,i))return void this.reRender();break;case"setField":{let{data:n}=i;if(u){"touched"in n&&(this.touched=n.touched),"validating"in n&&!("originRCField"in n)&&(this.validatePromise=n.validating?Promise.resolve([]):null),"errors"in n&&(this.errors=n.errors||el),"warnings"in n&&(this.warnings=n.warnings||eo),this.dirty=!0,this.triggerMetaEvent(),this.reRender();return}if("value"in n&&et(t,s,!0)||r&&!s.length&&ea(r,e,a,h,d,i))return void this.reRender();break}case"dependenciesUpdate":if(n.map(Q).some(e=>et(i.relatedFields,e)))return void this.reRender();break;default:if(u||(!n.length||s.length||r)&&ea(r,e,a,h,d,i))return void this.reRender()}!0===r&&this.reRender()};validateRules=e=>{let t=this.getNamePath(),i=this.getValue(),{triggerName:r,validateOnly:n=!1}=e||{},l=Promise.resolve().then(async()=>{if(!this.mounted)return[];let{validateFirst:n=!1,messageVariables:o,validateDebounce:s}=this.props,h=this.getRules();if(r&&(h=h.filter(e=>e).filter(e=>{let{validateTrigger:t}=e;return!t||c(t).includes(r)})),s&&r&&(await new Promise(e=>{setTimeout(e,s)}),this.validatePromise!==l))return[];let d=function(e,t,i,r,n,l){let o,s=e.join("."),h=i.map((e,t)=>{let i=e.validator,r={...e,ruleIndex:t};return i&&(r.validator=(e,t,r)=>{let n=!1,l=i(e,t,(...e)=>{Promise.resolve().then(()=>{(0,a.ZP)(!n,"Your validator function has already return a promise. `callback` will be ignored."),n||r(...e)})});n=l&&"function"==typeof l.then&&"function"==typeof l.catch,(0,a.ZP)(n,"`callback` is deprecated. Please return a promise instead."),n&&l.then(()=>{r()}).catch(e=>{r(e||" ")})}),r}).sort(({warningOnly:e,ruleIndex:t},{warningOnly:i,ruleIndex:r})=>!!e==!!i?t-r:e?1:-1);if(!0===n)o=new Promise(async(e,i)=>{for(let e=0;e<h.length;e+=1){let n=h[e],o=await X(s,t,n,r,l);if(o.length)return void i([{errors:o,rule:n}])}e([])});else{let e=h.map(e=>X(s,t,e,r,l).then(t=>({errors:t,rule:e})));o=(n?q(e):Y(e)).then(e=>Promise.reject(e))}return o.catch(e=>e),o}(t,i,h,e,n,o);return d.catch(e=>e).then((e=el)=>{if(this.validatePromise===l){this.validatePromise=null;let t=[],i=[];e.forEach?.(({rule:{warningOnly:e},errors:r=el})=>{e?i.push(...r):t.push(...r)}),this.errors=t,this.warnings=i,this.triggerMetaEvent(),this.reRender()}}),d});return n||(this.validatePromise=l,this.dirty=!0,this.errors=el,this.warnings=eo,this.triggerMetaEvent(),this.reRender()),l};isFieldValidating=()=>!!this.validatePromise;isFieldTouched=()=>this.touched;isFieldDirty=()=>{if(this.dirty||void 0!==this.props.initialValue)return!0;let{fieldContext:e}=this.props,{getInitialValue:t}=e.getInternalHooks(s);return void 0!==t(this.getNamePath())};getErrors=()=>this.errors;getWarnings=()=>this.warnings;isListField=()=>this.props.isListField;isList=()=>this.props.isList;isPreserve=()=>this.props.preserve;getMeta=()=>(this.prevValidating=this.isFieldValidating(),{touched:this.isFieldTouched(),validating:this.prevValidating,errors:this.errors,warnings:this.warnings,name:this.getNamePath(),validated:null===this.validatePromise});getOnlyChild=e=>{if("function"==typeof e){let t=this.getMeta();return{...this.getOnlyChild(e(this.getControlled(),t,this.props.fieldContext)),isFunction:!0}}let t=(0,l.Z)(e);return 1===t.length&&n.isValidElement(t[0])?{child:t[0],isFunction:!1}:{child:t,isFunction:!1}};getValue=e=>{let{getFieldsValue:t}=this.props.fieldContext,i=this.getNamePath();return(0,J.Z)(e||t(!0),i)};getControlled=(e={})=>{let{name:t,trigger:i="onChange",validateTrigger:r,getValueFromEvent:n,normalize:l,valuePropName:o="value",getValueProps:a,fieldContext:h}=this.props,d=void 0!==r?r:h.validateTrigger,u=this.getNamePath(),{getInternalHooks:p,getFieldsValue:g}=h,{dispatch:f}=p(s),m=this.getValue(),b=a||(e=>({[o]:e})),y=e[i],v=void 0!==t?b(m):{},_={...e,...v};return _[i]=(...e)=>{let t;this.touched=!0,this.dirty=!0,this.triggerMetaEvent(),t=n?n(...e):function(e,...t){let i=t[0];return i&&i.target&&"object"==typeof i.target&&e in i.target?i.target[e]:i}(o,...e),l&&(t=l(t,m,g(!0))),t!==m&&f({type:"updateValue",namePath:u,value:t}),y&&y(...e)},c(d||[]).forEach(e=>{let t=_[e];_[e]=(...i)=>{t&&t(...i);let{rules:r}=this.props;r&&r.length&&f({type:"validateField",namePath:u,triggerName:e})}}),_};render(){let e,{resetCount:t}=this.state,{children:i}=this.props,{child:r,isFunction:l}=this.getOnlyChild(i);return l?e=r:n.isValidElement(r)?e=n.cloneElement(r,this.getControlled(r.props)):((0,a.ZP)(!r,"`children` of Field is not validate ReactElement."),e=r),n.createElement(n.Fragment,{key:t},e)}}let eh=function({name:e,...t}){let i=n.useContext(d),r=n.useContext(u),l=void 0!==e?Q(e):void 0,o=t.isListField??!!r,a="keep";return o||(a=`_${(l||[]).join("_")}`),n.createElement(es,en({key:a,name:l,isListField:o},t,{fieldContext:i}))};var ed=i(10894);let eu="__@field_split__";function ec(e){return e.map(e=>`${typeof e}:${e}`).join(eu)}class ep{kvs=new Map;set(e,t){this.kvs.set(ec(e),t)}get(e){return this.kvs.get(ec(e))}getAsPrefix(e){let t=ec(e),i=t+eu,r=[],n=this.kvs.get(t);return void 0!==n&&r.push(n),this.kvs.forEach((e,t)=>{t.startsWith(i)&&r.push(e)}),r}update(e,t){let i=t(this.get(e));i?this.set(e,i):this.delete(e)}delete(e){this.kvs.delete(ec(e))}map(e){return[...this.kvs.entries()].map(([t,i])=>e({key:t.split(eu).map(e=>{let[,t,i]=e.match(/^([^:]*):(.*)$/);return"number"===t?Number(i):i}),value:i}))}toJSON(){let e={};return this.map(({key:t,value:i})=>(e[t.join(".")]=i,null)),e}}let eg=e=>{let t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(null)};class ef{namePathList=[];taskId=0;watcherList=new Set;form;constructor(e){this.form=e}register(e){return this.watcherList.add(e),()=>{this.watcherList.delete(e)}}notify(e){e.forEach(e=>{this.namePathList.every(t=>!ei(t,e))&&this.namePathList.push(e)}),this.doBatch()}doBatch(){this.taskId+=1;let e=this.taskId;eg(()=>{if(e===this.taskId&&this.watcherList.size){let e=this.form.getForm(),t=e.getFieldsValue(),i=e.getFieldsValue(!0);this.watcherList.forEach(e=>{e(t,i,this.namePathList)}),this.namePathList=[]}})}}class em{formHooked=!1;forceRootUpdate;subscribable=!0;store={};fieldEntities=[];initialValues={};callbacks={};validateMessages=null;preserve=null;lastValidatePromise=null;watcherCenter=new ef(this);constructor(e){this.forceRootUpdate=e}getForm=()=>({getFieldValue:this.getFieldValue,getFieldsValue:this.getFieldsValue,getFieldError:this.getFieldError,getFieldWarning:this.getFieldWarning,getFieldsError:this.getFieldsError,isFieldsTouched:this.isFieldsTouched,isFieldTouched:this.isFieldTouched,isFieldValidating:this.isFieldValidating,isFieldsValidating:this.isFieldsValidating,resetFields:this.resetFields,setFields:this.setFields,setFieldValue:this.setFieldValue,setFieldsValue:this.setFieldsValue,validateFields:this.validateFields,submit:this.submit,_init:!0,getInternalHooks:this.getInternalHooks});getInternalHooks=e=>e===s?(this.formHooked=!0,{dispatch:this.dispatch,initEntityValue:this.initEntityValue,registerField:this.registerField,useSubscribe:this.useSubscribe,setInitialValues:this.setInitialValues,destroyForm:this.destroyForm,setCallbacks:this.setCallbacks,setValidateMessages:this.setValidateMessages,getFields:this.getFields,setPreserve:this.setPreserve,getInitialValue:this.getInitialValue,registerWatch:this.registerWatch}):((0,a.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null);useSubscribe=e=>{this.subscribable=e};prevWithoutPreserves=null;setInitialValues=(e,t)=>{if(this.initialValues=e||{},t){let t=(0,U.TS)(e,this.store);this.prevWithoutPreserves?.map(({key:i})=>{t=(0,U.ZP)(t,i,(0,J.Z)(e,i))}),this.prevWithoutPreserves=null,this.updateStore(t)}};destroyForm=e=>{if(e)this.updateStore({});else{let e=new ep;this.getFieldEntities(!0).forEach(t=>{this.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)}),this.prevWithoutPreserves=e}};getInitialValue=e=>{let t=(0,J.Z)(this.initialValues,e);return e.length?(0,U.TS)(t):t};setCallbacks=e=>{this.callbacks=e};setValidateMessages=e=>{this.validateMessages=e};setPreserve=e=>{this.preserve=e};registerWatch=e=>this.watcherCenter.register(e);notifyWatch=(e=[])=>{this.watcherCenter.notify(e)};timeoutId=null;warningUnhooked=()=>{};updateStore=e=>{this.store=e};getFieldEntities=(e=!1)=>e?this.fieldEntities.filter(e=>e.getNamePath().length):this.fieldEntities;getFieldsMap=(e=!1)=>{let t=new ep;return this.getFieldEntities(e).forEach(e=>{let i=e.getNamePath();t.set(i,e)}),t};getFieldEntitiesForNamePathList=(e,t=!1)=>{if(!e)return this.getFieldEntities(!0);let i=this.getFieldsMap(!0);return t?e.flatMap(e=>{let t=Q(e),r=i.getAsPrefix(t);return r.length?r:[{INVALIDATE_NAME_PATH:t}]}):e.map(e=>{let t=Q(e);return i.get(t)||{INVALIDATE_NAME_PATH:Q(e)}})};getFieldsValue=(e,t)=>{let i,r;if(this.warningUnhooked(),!0===e||Array.isArray(e)?(i=e,r=t):e&&"object"==typeof e&&(r=e.filter),!0===i&&!r)return this.store;let n=this.getFieldEntitiesForNamePathList(Array.isArray(i)?i:null,!0),l=[],o=[];n.forEach(e=>{let t=e.INVALIDATE_NAME_PATH||e.getNamePath();if(e.isList?.())return void o.push(t);if(r){let i="getMeta"in e?e.getMeta():null;r(i)&&l.push(t)}else l.push(t)});let a=ee(this.store,l.map(Q));return o.forEach(e=>{(0,J.Z)(a,e)||(a=(0,U.ZP)(a,e,[]))}),a};getFieldValue=e=>{this.warningUnhooked();let t=Q(e);return(0,J.Z)(this.store,t)};getFieldsError=e=>(this.warningUnhooked(),this.getFieldEntitiesForNamePathList(e).map((t,i)=>t&&!t.INVALIDATE_NAME_PATH?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:Q(e[i]),errors:[],warnings:[]}));getFieldError=e=>{this.warningUnhooked();let t=Q(e);return this.getFieldsError([t])[0].errors};getFieldWarning=e=>{this.warningUnhooked();let t=Q(e);return this.getFieldsError([t])[0].warnings};isFieldsTouched=(...e)=>{let t;this.warningUnhooked();let[i,r]=e,n=!1;0===e.length?t=null:1===e.length?Array.isArray(i)?(t=i.map(Q),n=!1):(t=null,n=i):(t=i.map(Q),n=r);let l=this.getFieldEntities(!0),o=e=>e.isFieldTouched();if(!t)return n?l.every(e=>o(e)||e.isList()):l.some(o);let a=new ep;t.forEach(e=>{a.set(e,[])}),l.forEach(e=>{let i=e.getNamePath();t.forEach(t=>{t.every((e,t)=>i[t]===e)&&a.update(t,t=>[...t,e])})});let s=e=>e.some(o),h=a.map(({value:e})=>e);return n?h.every(s):h.some(s)};isFieldTouched=e=>(this.warningUnhooked(),this.isFieldsTouched([e]));isFieldsValidating=e=>{this.warningUnhooked();let t=this.getFieldEntities();if(!e)return t.some(e=>e.isFieldValidating());let i=e.map(Q);return t.some(e=>et(i,e.getNamePath())&&e.isFieldValidating())};isFieldValidating=e=>(this.warningUnhooked(),this.isFieldsValidating([e]));resetWithFieldInitialValue=(e={})=>{let t,i=new ep,r=this.getFieldEntities(!0);r.forEach(e=>{let{initialValue:t}=e.props,r=e.getNamePath();if(void 0!==t){let n=i.get(r)||new Set;n.add({entity:e,value:t}),i.set(r,n)}}),e.entities?t=e.entities:e.namePathList?(t=[],e.namePathList.forEach(e=>{let r=i.get(e);r&&t.push(...[...r].map(e=>e.entity))})):t=r,t.forEach(t=>{let{initialValue:r}=t.props;if(void 0!==r){let r=t.getNamePath();if(void 0!==this.getInitialValue(r))(0,a.ZP)(!1,`Form already set 'initialValues' with path '${r.join(".")}'. Field can not overwrite it.`);else{let n=i.get(r);if(n&&n.size>1)(0,a.ZP)(!1,`Multiple Field with path '${r.join(".")}' set 'initialValue'. Can not decide which one to pick.`);else if(n){let i=this.getFieldValue(r);t.isListField()||e.skipExist&&void 0!==i||this.updateStore((0,U.ZP)(this.store,r,[...n][0].value))}}}})};resetFields=e=>{this.warningUnhooked();let t=this.store;if(!e){this.updateStore((0,U.TS)(this.initialValues)),this.resetWithFieldInitialValue(),this.notifyObservers(t,null,{type:"reset"}),this.notifyWatch();return}let i=e.map(Q);i.forEach(e=>{let t=this.getInitialValue(e);this.updateStore((0,U.ZP)(this.store,e,t))}),this.resetWithFieldInitialValue({namePathList:i}),this.notifyObservers(t,i,{type:"reset"}),this.notifyWatch(i)};setFields=e=>{this.warningUnhooked();let t=this.store,i=[];e.forEach(e=>{let{name:r,...n}=e,l=Q(r);i.push(l),"value"in n&&this.updateStore((0,U.ZP)(this.store,l,n.value)),this.notifyObservers(t,[l],{type:"setField",data:e})}),this.notifyWatch(i)};getFields=()=>this.getFieldEntities(!0).map(e=>{let t=e.getNamePath(),i={...e.getMeta(),name:t,value:this.getFieldValue(t)};return Object.defineProperty(i,"originRCField",{value:!0}),i});initEntityValue=e=>{let{initialValue:t}=e.props;if(void 0!==t){let i=e.getNamePath();void 0===(0,J.Z)(this.store,i)&&this.updateStore((0,U.ZP)(this.store,i,t))}};isMergedPreserve=e=>(void 0!==e?e:this.preserve)??!0;registerField=e=>{this.fieldEntities.push(e);let t=e.getNamePath();if(this.notifyWatch([t]),void 0!==e.props.initialValue){let t=this.store;this.resetWithFieldInitialValue({entities:[e],skipExist:!0}),this.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return(i,r,n=[])=>{if(this.fieldEntities=this.fieldEntities.filter(t=>t!==e),!this.isMergedPreserve(r)&&(!i||n.length>1)){let e=i?void 0:this.getInitialValue(t);if(t.length&&this.getFieldValue(t)!==e&&this.fieldEntities.every(e=>!ei(e.getNamePath(),t))){let i=this.store;this.updateStore((0,U.ZP)(i,t,e,!0)),this.notifyObservers(i,[t],{type:"remove"}),this.triggerDependenciesUpdate(i,t)}}this.notifyWatch([t])}};dispatch=e=>{switch(e.type){case"updateValue":{let{namePath:t,value:i}=e;this.updateValue(t,i);break}case"validateField":{let{namePath:t,triggerName:i}=e;this.validateFields([t],{triggerName:i})}}};notifyObservers=(e,t,i)=>{if(this.subscribable){let r={...i,store:this.getFieldsValue(!0)};this.getFieldEntities().forEach(({onStoreChange:i})=>{i(e,t,r)})}else this.forceRootUpdate()};triggerDependenciesUpdate=(e,t)=>{let i=this.getDependencyChildrenFields(t);return i.length&&this.validateFields(i),this.notifyObservers(e,i,{type:"dependenciesUpdate",relatedFields:[t,...i]}),i};updateValue=(e,t)=>{let i=Q(e),r=this.store;this.updateStore((0,U.ZP)(this.store,i,t)),this.notifyObservers(r,[i],{type:"valueUpdate",source:"internal"}),this.notifyWatch([i]);let n=this.triggerDependenciesUpdate(r,i),{onValuesChange:l}=this.callbacks;if(l){let e=this.getFieldsMap(!0).get(i),t=ee(this.store,[i]),r=this.getFieldsValue(),n=(0,ed.bT)([r,t],{prepareArray:t=>e?.isList()?[]:[...t||[]]});l(t,n)}this.triggerOnFieldsChange([i,...n])};setFieldsValue=e=>{this.warningUnhooked();let t=this.store;if(e){let t=(0,U.TS)(this.store,e);this.updateStore(t)}this.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),this.notifyWatch()};setFieldValue=(e,t)=>{this.setFields([{name:e,value:t,errors:[],warnings:[],touched:!0}])};getDependencyChildrenFields=e=>{let t=new Set,i=[],r=new ep;this.getFieldEntities().forEach(e=>{let{dependencies:t}=e.props;(t||[]).forEach(t=>{let i=Q(t);r.update(i,(t=new Set)=>(t.add(e),t))})});let n=e=>{(r.get(e)||new Set).forEach(e=>{if(!t.has(e)){t.add(e);let r=e.getNamePath();e.isFieldDirty()&&r.length&&(i.push(r),n(r))}})};return n(e),i};triggerOnFieldsChange=(e,t)=>{let{onFieldsChange:i}=this.callbacks;if(i){let r=this.getFields();if(t){let e=new ep;t.forEach(({name:t,errors:i})=>{e.set(t,i)}),r.forEach(t=>{t.errors=e.get(t.name)||t.errors})}let n=r.filter(({name:t})=>et(e,t));n.length&&i(n,r)}};validateFields=(e,t)=>{let i,r;this.warningUnhooked(),Array.isArray(e)||"string"==typeof e||"string"==typeof t?(i=e,r=t):r=e;let n=!!i,l=n?i.map(Q):[],o=[...l],a=[],s=String(Date.now()),h=new Set,{recursive:d,dirty:u}=r||{};this.getFieldEntities(!0).forEach(e=>{let t=e.getNamePath();if((n||(e.isList()&&l.some(e=>ei(e,t,!0))||o.push(t),l.push(t)),e.props.rules&&e.props.rules.length)&&(!u||e.isFieldDirty())&&(h.add(t.join(s)),!n||et(l,t,d))){let i=e.validateRules({validateMessages:{...V,...this.validateMessages},...r});a.push(i.then(()=>({name:t,errors:[],warnings:[]})).catch(e=>{let i=[],r=[];return(e.forEach?.(({rule:{warningOnly:e},errors:t})=>{e?r.push(...t):i.push(...t)}),i.length)?Promise.reject({name:t,errors:i,warnings:r}):{name:t,errors:i,warnings:r}}))}});let c=function(e){let t=!1,i=e.length,r=[];return e.length?new Promise((n,l)=>{e.forEach((e,o)=>{e.catch(e=>(t=!0,e)).then(e=>{i-=1,r[o]=e,i>0||(t&&l(r),n(r))})})}):Promise.resolve([])}(a);this.lastValidatePromise=c,c.catch(e=>e).then(e=>{let t=e.map(({name:e})=>e);this.notifyObservers(this.store,t,{type:"validateFinish"}),this.triggerOnFieldsChange(t,e)});let p=c.then(()=>this.lastValidatePromise===c?Promise.resolve(this.getFieldsValue(o)):Promise.reject([])).catch(e=>{let t=e.filter(e=>e&&e.errors.length);return Promise.reject({message:t[0]?.errors?.[0],values:this.getFieldsValue(l),errorFields:t,outOfDate:this.lastValidatePromise!==c})});p.catch(e=>e);let g=l.filter(e=>h.has(e.join(s)));return this.triggerOnFieldsChange(g),p};submit=()=>{this.warningUnhooked(),this.validateFields().then(e=>{let{onFinish:t}=this.callbacks;if(t)try{t(e)}catch(e){console.error(e)}}).catch(e=>{let{onFinishFailed:t}=this.callbacks;t&&t(e)})}}let eb=function(e){let t=n.useRef(null),[,i]=n.useState({});return t.current||(e?t.current=e:t.current=new em(()=>{i({})}).getForm()),[t.current]},ey=n.createContext({triggerFormChange:()=>{},triggerFormFinish:()=>{},registerForm:()=>{},unregisterForm:()=>{}});function ev(){return(ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function e_(e){try{return JSON.stringify(e)}catch{return Math.random()}}let eC=n.forwardRef(({name:e,initialValues:t,fields:i,form:r,preserve:l,children:o,component:a="form",validateMessages:h,validateTrigger:c="onChange",onValuesChange:p,onFieldsChange:g,onFinish:f,onFinishFailed:m,clearOnDestroy:b,...y},v)=>{let _,C=n.useRef(null),x=n.useContext(ey),[w]=eb(r),{useSubscribe:S,setInitialValues:A,setCallbacks:k,setValidateMessages:M,setPreserve:T,destroyForm:R}=w.getInternalHooks(s);n.useImperativeHandle(v,()=>({...w,nativeElement:C.current})),n.useEffect(()=>(x.registerForm(e,w),()=>{x.unregisterForm(e)}),[x,w,e]),M({...x.validateMessages,...h}),k({onValuesChange:p,onFieldsChange:(t,...i)=>{x.triggerFormChange(e,t),g&&g(t,...i)},onFinish:t=>{x.triggerFormFinish(e,t),f&&f(t)},onFinishFailed:m}),T(l);let E=n.useRef(null);A(t,!E.current),E.current||(E.current=!0),n.useEffect(()=>()=>R(b),[]);let P="function"==typeof o;_=P?o(w.getFieldsValue(!0),w):o,S(!P);let B=n.useRef(null);n.useEffect(()=>{var e,t;e=B.current||[],e===(t=i||[])||(e||!t)&&(!e||t)&&e&&t&&"object"==typeof e&&"object"==typeof t&&[...new Set([...Object.keys(e),...Object.keys(t)])].every(i=>{let r=e[i],n=t[i];return"function"==typeof r&&"function"==typeof n||r===n})||w.setFields(i||[]),B.current=i},[i,w]);let I=n.useMemo(()=>({...w,validateTrigger:c}),[w,c]),L=n.createElement(u.Provider,{value:null},n.createElement(d.Provider,{value:I},_));return!1===a?L:n.createElement(a,ev({},y,{ref:C,onSubmit:e=>{e.preventDefault(),e.stopPropagation(),w.submit()},onReset:e=>{e.preventDefault(),w.resetFields(),y.onReset?.(e)}}),L)});eC.FormProvider=({validateMessages:e,onFormChange:t,onFormFinish:i,children:r})=>{let l=n.useContext(ey),o=n.useRef({});return n.createElement(ey.Provider,{value:{...l,validateMessages:{...l.validateMessages,...e},triggerFormChange:(e,i)=>{t&&t(e,{changedFields:i,forms:o.current}),l.triggerFormChange(e,i)},triggerFormFinish:(e,t)=>{i&&i(e,{values:t,forms:o.current}),l.triggerFormFinish(e,t)},registerForm:(e,t)=>{e&&(o.current={...o.current,[e]:t}),l.registerForm(e,t)},unregisterForm:e=>{let t={...o.current};delete t[e],o.current=t,l.unregisterForm(e)}}},r)},eC.Field=eh,eC.List=function({name:e,initialValue:t,children:i,rules:r,validateTrigger:l,isListField:o}){let s=n.useContext(d),h=n.useContext(u),c=n.useRef({keys:[],id:0}).current,p=n.useMemo(()=>[...Q(s.prefixName)||[],...Q(e)],[s.prefixName,e]),g=n.useMemo(()=>({...s,prefixName:p}),[s,p]),f=n.useMemo(()=>({getKey:e=>{let t=p.length,i=e[t];return[c.keys[i],e.slice(t+1)]}}),[c,p]);return"function"!=typeof i?((0,a.ZP)(!1,"Form.List only accepts function as children."),null):n.createElement(u.Provider,{value:f},n.createElement(d.Provider,{value:g},n.createElement(eh,{name:[],shouldUpdate:(e,t,{source:i})=>"internal"!==i&&e!==t,rules:r,validateTrigger:l,initialValue:t,isList:!0,isListField:o??!!h},({value:e=[],onChange:t},r)=>{let{getFieldValue:n}=s,l=()=>n(p||[])||[],o=e||[];return Array.isArray(o)||(o=[]),i(o.map((e,t)=>{let i=c.keys[t];return void 0===i&&(c.keys[t]=c.id,i=c.keys[t],c.id+=1),{name:t,key:i,isListField:!0}}),{add:(e,i)=>{let r=l();i>=0&&i<=r.length?(c.keys=[...c.keys.slice(0,i),c.id,...c.keys.slice(i)],t([...r.slice(0,i),e,...r.slice(i)])):(c.keys=[...c.keys,c.id],t([...r,e])),c.id+=1},remove:e=>{let i=l(),r=new Set(Array.isArray(e)?e:[e]);r.size<=0||(c.keys=c.keys.filter((e,t)=>!r.has(t)),t(i.filter((e,t)=>!r.has(t))))},move(e,i){if(e===i)return;let r=l();e<0||e>=r.length||i<0||i>=r.length||(c.keys=er(c.keys,e,i),t(er(r,e,i)))}},r)})))},eC.useForm=eb,eC.useWatch=function(...e){let[t,i={}]=e,r=i&&i._init?{form:i}:i,l=r.form,[o,a]=(0,n.useState)(()=>"function"==typeof t?t({}):void 0),h=(0,n.useMemo)(()=>e_(o),[o]);(0,n.useRef)(h).current=h;let u=(0,n.useContext)(d),c=l||u,p=c&&c._init,{getFieldsValue:g,getInternalHooks:f}=c,{registerWatch:m}=f(s),b=(0,ed.zX)((e,i)=>{let n=r.preserve?i??g(!0):e??g(),l="function"==typeof t?t(n):(0,J.Z)(n,Q(t));e_(o)!==e_(l)&&a(l)}),y="function"==typeof t?t:JSON.stringify(t);return(0,n.useEffect)(()=>{p&&b()},[p,y]),(0,n.useEffect)(()=>{if(p)return m((e,t)=>{b(e,t)})},[p]),o};let ex=n.createContext({}),ew=({children:e,status:t,override:i})=>{let r=n.useContext(ex),l=n.useMemo(()=>{let e={...r};return i&&delete e.isFormItemInput,t&&(delete e.status,delete e.hasFeedback,delete e.feedbackIcon),e},[t,i,r]);return n.createElement(ex.Provider,{value:l},e)},eS=n.createContext(void 0)},95623:function(e,t,i){i.d(t,{Z:()=>o});var r=i(44194),n=i(391),l=i(65525);let o=(e,t,i)=>{let o,{variant:a,[e]:s}=r.useContext(n.E_),h=r.useContext(l.pg),d=s?.variant;o=void 0!==t?t:!1===i?"borderless":h??d??a??"outlined";let u=n.tr.includes(o);return[o,u]}},38506:function(e,t,i){i.d(t,{Z:()=>te});var r=i(44603),n=i(44194),l=i(10976);let o=function(...e){let t={};return e.forEach(e=>{e&&Object.keys(e).forEach(i=>{void 0!==e[i]&&(t[i]=e[i])})}),t};var a=i(35865);let s=["xxl","xl","lg","md","sm","xs"],h=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),d=e=>{let t=[].concat(s).reverse();return t.forEach((i,r)=>{let n=i.toUpperCase(),l=`screen${n}Min`,o=`screen${n}`;if(!(e[l]<=e[o]))throw Error(`${l}<=${o} fails : !(${e[l]}<=${e[o]})`);if(r<t.length-1){let i=`screen${n}Max`;if(!(e[o]<=e[i]))throw Error(`${o}<=${i} fails : !(${e[o]}<=${e[i]})`);let l=t[r+1].toUpperCase(),a=`screen${l}Min`;if(!(e[i]<=e[a]))throw Error(`${i}<=${a} fails : !(${e[i]}<=${e[a]})`)}}),e},u=()=>{let[,e]=(0,a.ZP)(),t=h(d(e));return n.useMemo(()=>{let e=new Map,i=-1,r={};return{responsiveMap:t,matchHandlers:{},dispatch:t=>(r=t,e.forEach(e=>e(r)),e.size>=1),subscribe(t){return e.size||this.register(),i+=1,e.set(i,t),t(r),i},unsubscribe(t){e.delete(t),e.size||this.unregister()},register(){Object.entries(t).forEach(([e,t])=>{let i=({matches:t})=>{this.dispatch({...r,[e]:t})},n=window.matchMedia(t);"function"==typeof n?.addEventListener&&n.addEventListener("change",i),this.matchHandlers[t]={mql:n,listener:i},i(n)})},unregister(){Object.values(t).forEach(e=>{let t=this.matchHandlers[e];"function"==typeof t?.mql?.removeEventListener&&t.mql.removeEventListener("change",t?.listener)}),e.clear()}}},[t])};var c=i(391),p=i(76436),g=i(54544),f=i(68176);let m=()=>n.useReducer(e=>e+1,0),b=function(e=!0,t={}){let i=(0,n.useRef)(t),[,r]=m(),l=u();return(0,f.Z)(()=>{let t=l.subscribe(t=>{i.current=t,e&&r()});return()=>l.unsubscribe(t)},[]),i.current},y=(0,n.createContext)({});var v=i(55839),_=i(58476),C=i(64033);let x=e=>{let{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},w=(e,t)=>{let{prefixCls:i,componentCls:r,gridColumns:n}=e,l={};for(let e=n;e>=0;e--)0===e?(l[`${r}${t}-${e}`]={display:"none"},l[`${r}-push-${e}`]={insetInlineStart:"auto"},l[`${r}-pull-${e}`]={insetInlineEnd:"auto"},l[`${r}${t}-push-${e}`]={insetInlineStart:"auto"},l[`${r}${t}-pull-${e}`]={insetInlineEnd:"auto"},l[`${r}${t}-offset-${e}`]={marginInlineStart:0},l[`${r}${t}-order-${e}`]={order:0}):(l[`${r}${t}-${e}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${e/n*100}%`,maxWidth:`${e/n*100}%`}],l[`${r}${t}-push-${e}`]={insetInlineStart:`${e/n*100}%`},l[`${r}${t}-pull-${e}`]={insetInlineEnd:`${e/n*100}%`},l[`${r}${t}-offset-${e}`]={marginInlineStart:`${e/n*100}%`},l[`${r}${t}-order-${e}`]={order:e});return l[`${r}${t}-flex`]={flex:`var(--${i}${t}-flex)`},l},S=(e,t)=>w(e,t),A=(e,t,i)=>({[`@media (min-width: ${(0,v.bf)(t)})`]:{...S(e,i)}}),k=(0,_.I$)("Grid",e=>{let{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},()=>({})),M=e=>({xs:e.screenXSMin,sm:e.screenSMMin,md:e.screenMDMin,lg:e.screenLGMin,xl:e.screenXLMin,xxl:e.screenXXLMin}),T=(0,_.I$)("Grid",e=>{let t=(0,C.IX)(e,{gridColumns:24}),i=M(t);return delete i.xs,[x(t),S(t,""),S(t,"-xs"),Object.keys(i).map(e=>A(t,i[e],`-${e}`)).reduce((e,t)=>({...e,...t}),{})]},()=>({}));function R(e,t){let[i,r]=n.useState("string"==typeof e?e:""),l=()=>{if("string"==typeof e&&r(e),"object"==typeof e)for(let i=0;i<s.length;i++){let n=s[i];if(!t||!t[n])continue;let l=e[n];if(void 0!==l)return void r(l)}};return n.useEffect(()=>{l()},[JSON.stringify(e),t]),i}let E=n.forwardRef((e,t)=>{let{prefixCls:i,justify:r,align:o,className:a,style:h,children:d,gutter:u=0,wrap:p,...g}=e,{getPrefixCls:f,direction:m}=n.useContext(c.E_),v=b(!0,null),_=R(o,v),C=R(r,v),x=f("row",i),[w,S]=k(x),A=function(e,t){let i=[void 0,void 0],r=Array.isArray(e)?e:[e,void 0],n=t||{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0};return r.forEach((e,t)=>{if("object"==typeof e&&null!==e)for(let r=0;r<s.length;r++){let l=s[r];if(n[l]&&void 0!==e[l]){i[t]=e[l];break}}else i[t]=e}),i}(u,v),M=(0,l.W)(x,{[`${x}-no-wrap`]:!1===p,[`${x}-${C}`]:C,[`${x}-${_}`]:_,[`${x}-rtl`]:"rtl"===m},a,w,S),T={};A?.[0]&&(T.marginInline="number"==typeof A[0]?`${-(A[0]/2)}px`:`calc(${A[0]} / -2)`);let[E,P]=A;T.rowGap=P;let B=n.useMemo(()=>({gutter:[E,P],wrap:p}),[E,P,p]);return n.createElement(y.Provider,{value:B},n.createElement("div",{...g,className:M,style:{...T,...h},ref:t},d))}),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};var B=i(981);function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let L=n.forwardRef((e,t)=>n.createElement(B.Z,I({},e,{ref:t,icon:P}))),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let O=n.forwardRef((e,t)=>n.createElement(B.Z,H({},e,{ref:t,icon:F}))),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let W=n.forwardRef((e,t)=>n.createElement(B.Z,z({},e,{ref:t,icon:D}))),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};function N(){return(N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let $=n.forwardRef((e,t)=>n.createElement(B.Z,N({},e,{ref:t,icon:Z})));var j=i(9708),G=i(93676),V=i(6207);i(57705);let U={items_per_page:"/",jump_to:"",jump_to_confirm:"",page:"",prev_page:"",next_page:"",prev_5:" 5 ",next_5:" 5 ",prev_3:" 3 ",next_3:" 3 ",page_size:""},K=[10,20,50,100],X=e=>{let{pageSizeOptions:t=K,locale:i,changeSize:r,pageSize:l,goButton:o,quickGo:a,rootPrefixCls:s,disabled:h,buildOptionText:d,showSizeChanger:u,sizeChangerRender:c}=e,[p,g]=n.useState(""),f=n.useMemo(()=>!p||Number.isNaN(p)?void 0:Number(p),[p]),m="function"==typeof d?d:e=>`${e} ${i.items_per_page}`,b=e=>{""!==p&&(e.keyCode===G.Z.ENTER||"click"===e.type)&&(g(""),a?.(f))},y=`${s}-options`;if(!u&&!a)return null;let v=null,_=null,C=null;return u&&c&&(v=c({disabled:h,size:l,onSizeChange:e=>{r?.(Number(e))},"aria-label":i.page_size,className:`${y}-size-changer`,options:(t.some(e=>e.toString()===l.toString())?t:t.concat([l]).sort((e,t)=>(Number.isNaN(Number(e))?0:Number(e))-(Number.isNaN(Number(t))?0:Number(t)))).map(e=>({label:m(e),value:e}))})),a&&(o&&(C="boolean"==typeof o?n.createElement("button",{type:"button",onClick:b,onKeyUp:b,disabled:h,className:`${y}-quick-jumper-button`},i.jump_to_confirm):n.createElement("span",{onClick:b,onKeyUp:b},o)),_=n.createElement("div",{className:`${y}-quick-jumper`},i.jump_to,n.createElement("input",{disabled:h,type:"text",value:p,onChange:e=>{let t=e.target.value;/^\d*$/.test(t)&&g(t)},onKeyUp:b,onBlur:e=>{!o&&""!==p&&(g(""),e.relatedTarget&&(e.relatedTarget.className.includes(`${s}-item-link`)||e.relatedTarget.className.includes(`${s}-item`))||a?.(f))},"aria-label":i.page}),i.page,C)),n.createElement("li",{className:y},v,_)},Y=e=>{let{rootPrefixCls:t,page:i,active:r,className:o,style:a,showTitle:s,onClick:h,onKeyPress:d,itemRender:u}=e,c=`${t}-item`,p=(0,l.W)(c,`${c}-${i}`,{[`${c}-active`]:r,[`${c}-disabled`]:!i},o),g=u(i,"page",n.createElement("a",{rel:"nofollow"},i));return g?n.createElement("li",{title:s?String(i):null,className:p,style:a,onClick:()=>{h(i)},onKeyDown:e=>{d(e,h,i)},tabIndex:0},g):null};function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let J=(e,t,i)=>i;function Q(){}function ee(e){let t=Number(e);return"number"==typeof t&&!Number.isNaN(t)&&isFinite(t)&&Math.floor(t)===t}function et(e,t,i){return Math.floor((i-1)/(void 0===e?t:e))+1}let ei=e=>{let{prefixCls:t="rc-pagination",selectPrefixCls:i="rc-select",className:r,classNames:o,styles:a,current:s,defaultCurrent:h=1,total:d=0,pageSize:u,defaultPageSize:c=10,onChange:p=Q,hideOnSinglePage:g,align:f,showPrevNextJumpers:m=!0,showQuickJumper:b,showLessItems:y,showTitle:v=!0,onShowSizeChange:_=Q,locale:C=U,style:x,totalBoundaryShowSizeChanger:w=50,disabled:S,simple:A,showTotal:k,showSizeChanger:M=d>w,sizeChangerRender:T,pageSizeOptions:R,itemRender:E=J,jumpPrevIcon:P,jumpNextIcon:B,prevIcon:I,nextIcon:L}=e,F=n.useRef(null),[H,O]=(0,j.Z)(c,u),[D,z]=(0,j.Z)(h,s),W=Math.max(1,Math.min(D,et(void 0,H,d))),[Z,N]=n.useState(W);(0,n.useEffect)(()=>{N(W)},[W]);let $=Math.max(1,W-(y?3:5)),K=Math.min(et(void 0,H,d),W+(y?3:5));function ei(i,r){let l=i||n.createElement("button",{type:"button","aria-label":r,className:`${t}-item-link`});return"function"==typeof i&&(l=n.createElement(i,e)),l}function er(e){let t,i=e.target.value,r=et(void 0,H,d);return""===i?i:Number.isNaN(Number(i))?Z:i>=r?r:Number(i)}let en=d>H&&b;function el(e){let t=er(e);switch(t!==Z&&N(t),e.keyCode){case G.Z.ENTER:eo(t);break;case G.Z.UP:eo(t-1);break;case G.Z.DOWN:eo(t+1)}}function eo(e){if(ee(e)&&e!==W&&ee(d)&&d>0&&!S){let t=et(void 0,H,d),i=e;return e>t?i=t:e<1&&(i=1),i!==Z&&N(i),z(i),p?.(i,H),i}return W}let ea=W>1,es=W<et(void 0,H,d);function eh(){ea&&eo(W-1)}function ed(){es&&eo(W+1)}function eu(){eo($)}function ec(){eo(K)}function ep(e,t,...i){("Enter"===e.key||e.charCode===G.Z.ENTER||e.keyCode===G.Z.ENTER)&&t(...i)}function eg(e){("click"===e.type||e.keyCode===G.Z.ENTER)&&eo(Z)}let ef=null,em=(0,V.Z)(e,{aria:!0,data:!0}),eb=k&&n.createElement("li",{className:`${t}-total-text`},k(d,[0===d?0:(W-1)*H+1,W*H>d?d:W*H])),ey=null,ev=et(void 0,H,d);if(g&&d<=H)return null;let e_=[],eC={rootPrefixCls:t,onClick:eo,onKeyPress:ep,showTitle:v,itemRender:E,page:-1,className:o?.item,style:a?.item},ex=W-1>0?W-1:0,ew=W+1<ev?W+1:ev,eS=b&&b.goButton,eA="object"==typeof A?A.readOnly:!A,ek=eS,eM=null;A&&(eS&&(ek="boolean"==typeof eS?n.createElement("button",{type:"button",onClick:eg,onKeyUp:eg},C.jump_to_confirm):n.createElement("span",{onClick:eg,onKeyUp:eg},eS),ek=n.createElement("li",{title:v?`${C.jump_to}${W}/${ev}`:null,className:`${t}-simple-pager`},ek)),eM=n.createElement("li",{title:v?`${W}/${ev}`:null,className:(0,l.W)(`${t}-simple-pager`,o?.item),style:a?.item},eA?Z:n.createElement("input",{type:"text","aria-label":C.jump_to,value:Z,disabled:S,onKeyDown:function(e){(e.keyCode===G.Z.UP||e.keyCode===G.Z.DOWN)&&e.preventDefault()},onKeyUp:el,onChange:el,onBlur:function(e){eo(er(e))},size:3}),n.createElement("span",{className:`${t}-slash`},"/"),ev));let eT=y?1:2;if(ev<=3+2*eT){ev||e_.push(n.createElement(Y,q({},eC,{key:"noPager",page:1,className:`${t}-item-disabled`})));for(let e=1;e<=ev;e+=1)e_.push(n.createElement(Y,q({},eC,{key:e,page:e,active:W===e})))}else{let e=y?C.prev_3:C.prev_5,i=y?C.next_3:C.next_5,r=E($,"jump-prev",ei(P,"prev page")),o=E(K,"jump-next",ei(B,"next page"));m&&(ef=r?n.createElement("li",{title:v?e:null,key:"prev",onClick:eu,tabIndex:0,onKeyDown:function(e){ep(e,eu)},className:(0,l.W)(`${t}-jump-prev`,{[`${t}-jump-prev-custom-icon`]:!!P})},r):null,ey=o?n.createElement("li",{title:v?i:null,key:"next",onClick:ec,tabIndex:0,onKeyDown:function(e){ep(e,ec)},className:(0,l.W)(`${t}-jump-next`,{[`${t}-jump-next-custom-icon`]:!!B})},o):null);let a=Math.max(1,W-eT),s=Math.min(W+eT,ev);W-1<=eT&&(s=1+2*eT),ev-W<=eT&&(a=ev-2*eT);for(let e=a;e<=s;e+=1)e_.push(n.createElement(Y,q({},eC,{key:e,page:e,active:W===e})));if(W-1>=2*eT&&3!==W&&(e_[0]=n.cloneElement(e_[0],{className:(0,l.W)(`${t}-item-after-jump-prev`,e_[0].props.className)}),e_.unshift(ef)),ev-W>=2*eT&&W!==ev-2){let e=e_[e_.length-1];e_[e_.length-1]=n.cloneElement(e,{className:(0,l.W)(`${t}-item-before-jump-next`,e.props.className)}),e_.push(ey)}1!==a&&e_.unshift(n.createElement(Y,q({},eC,{key:1,page:1}))),s!==ev&&e_.push(n.createElement(Y,q({},eC,{key:ev,page:ev})))}let eR=function(e){let t=E(e,"prev",ei(I,"prev page"));return n.isValidElement(t)?n.cloneElement(t,{disabled:!ea}):t}(ex);if(eR){let e=!ea||!ev;eR=n.createElement("li",{title:v?C.prev_page:null,onClick:eh,tabIndex:e?null:0,onKeyDown:function(e){ep(e,eh)},className:(0,l.W)(`${t}-prev`,o?.item,{[`${t}-disabled`]:e}),style:a?.item,"aria-disabled":e},eR)}let eE=function(e){let t=E(e,"next",ei(L,"next page"));return n.isValidElement(t)?n.cloneElement(t,{disabled:!es}):t}(ew);if(eE){let e,i;A?(e=!es,i=ea?0:null):i=(e=!es||!ev)?null:0,eE=n.createElement("li",{title:v?C.next_page:null,onClick:ed,tabIndex:i,onKeyDown:function(e){ep(e,ed)},className:(0,l.W)(`${t}-next`,o?.item,{[`${t}-disabled`]:e}),style:a?.item,"aria-disabled":e},eE)}let eP=(0,l.W)(t,r,{[`${t}-start`]:"start"===f,[`${t}-center`]:"center"===f,[`${t}-end`]:"end"===f,[`${t}-simple`]:A,[`${t}-disabled`]:S});return n.createElement("ul",q({className:eP,style:x,ref:F},em),eb,eR,A?eM:e_,eE,n.createElement(X,{locale:C,rootPrefixCls:t,disabled:S,selectPrefixCls:i,changeSize:function(e){let t=et(e,H,d),i=W>t&&0!==t?t:W;O(e),N(i),_?.(W,e),z(i),p?.(i,e)},pageSize:H,pageSizeOptions:R,quickGo:en?eo:null,goButton:ek,showSizeChanger:M,sizeChangerRender:T}))};var er=i(65460),en=i(27338),el=i(50806),eo=i(23131),ea=i(83447),es=i(10469);function eh(e){return(0,C.IX)(e,{inputAffixPadding:e.paddingXXS})}let ed=e=>{let{controlHeight:t,fontSize:i,lineHeight:r,lineWidth:n,controlHeightSM:l,controlHeightLG:o,fontSizeLG:a,lineHeightLG:s,paddingSM:h,controlPaddingHorizontalSM:d,controlPaddingHorizontal:u,colorFillAlter:c,colorPrimaryHover:p,colorPrimary:g,controlOutlineWidth:f,controlOutline:m,colorErrorOutline:b,colorWarningOutline:y,colorBgContainer:v,inputFontSize:_,inputFontSizeLG:C,inputFontSizeSM:x}=e,w=_||i,S=x||w,A=C||a;return{paddingBlock:Math.max(Math.round((t-w*r)/2*10)/10-n,0),paddingBlockSM:Math.max(Math.round((l-S*r)/2*10)/10-n,0),paddingBlockLG:Math.max(Math.ceil((o-A*s)/2*10)/10-n,0),paddingInline:h-n,paddingInlineSM:d-n,paddingInlineLG:u-n,addonBg:c,activeBorderColor:g,hoverBorderColor:p,activeShadow:`0 0 0 ${f}px ${m}`,errorActiveShadow:`0 0 0 ${f}px ${b}`,warningActiveShadow:`0 0 0 ${f}px ${y}`,hoverBg:v,activeBg:v,inputFontSize:w,inputFontSizeLG:A,inputFontSizeSM:S}},eu=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),ec=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":{...eu((0,C.IX)(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled}))}}),ep=(e,t)=>({background:e.colorBgContainer,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:t.borderColor,"&:hover":{borderColor:t.hoverBorderColor,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:t.activeBorderColor,boxShadow:t.activeShadow,outline:0,backgroundColor:e.activeBg}}),eg=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:{...ep(e,t),[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}},[`&${e.componentCls}-status-${t.status}${e.componentCls}-disabled`]:{borderColor:t.borderColor}}),ef=(e,t)=>({"&-outlined":{...ep(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow}),[`&${e.componentCls}-disabled, &[disabled]`]:{...ec(e)},...eg(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError}),...eg(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning}),...t}}),em=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{borderColor:t.addonBorderColor,color:t.addonColor}}}),eb=e=>({"&-outlined":{[`${e.componentCls}-group`]:{"&-addon":{background:e.addonBg,border:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}},...em(e,{status:"error",addonBorderColor:e.colorError,addonColor:e.colorErrorText}),...em(e,{status:"warning",addonBorderColor:e.colorWarning,addonColor:e.colorWarningText}),[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group-addon`]:{...ec(e)}}}}),ey=(e,t)=>{let{componentCls:i}=e;return{"&-borderless":{background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${i}-disabled, &[disabled]`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${i}-status-error`]:{"&, & input, & textarea":{color:e.colorError}},[`&${i}-status-warning`]:{"&, & input, & textarea":{color:e.colorWarning}},...t}}},ev=(e,t)=>({background:t.bg,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:t?.inputColor??"unset"},"&:hover":{background:t.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:t.activeBorderColor,backgroundColor:e.activeBg}}),e_=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:{...ev(e,t),[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}}}),eC=(e,t)=>({"&-filled":{...ev(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor,inputColor:e.colorText}),[`&${e.componentCls}-disabled, &[disabled]`]:{...ec(e)},...e_(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,inputColor:e.colorErrorText,affixColor:e.colorError}),...e_(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,inputColor:e.colorWarningText,affixColor:e.colorWarning}),...t}}),ex=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{background:t.addonBg,color:t.addonColor}}}),ew=e=>({"&-filled":{[`${e.componentCls}-group-addon`]:{background:e.colorFillTertiary,"&:last-child":{position:"static"}},...ex(e,{status:"error",addonBg:e.colorErrorBg,addonColor:e.colorErrorText}),...ex(e,{status:"warning",addonBg:e.colorWarningBg,addonColor:e.colorWarningText}),[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary,color:e.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`}}}}}),eS=(e,t)=>({background:e.colorBgContainer,borderWidth:`${(0,v.bf)(e.lineWidth)} 0`,borderStyle:`${e.lineType} none`,borderColor:`transparent transparent ${t.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${t.hoverBorderColor} transparent`,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${t.activeBorderColor} transparent`,outline:0,backgroundColor:e.activeBg}}),eA=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:{...eS(e,t),[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}},[`&${e.componentCls}-status-${t.status}${e.componentCls}-disabled`]:{borderColor:`transparent transparent ${t.borderColor} transparent`}}),ek=(e,t)=>({"&-underlined":{...eS(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow}),[`&${e.componentCls}-disabled, &[disabled]`]:{color:e.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${e.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"},...eA(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError}),...eA(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning}),...t}}),eM=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),eT=e=>{let{paddingBlockLG:t,lineHeightLG:i,borderRadiusLG:r,paddingInlineLG:n}=e;return{padding:`${(0,v.bf)(t)} ${(0,v.bf)(n)}`,fontSize:e.inputFontSizeLG,lineHeight:i,borderRadius:r}},eR=e=>({padding:`${(0,v.bf)(e.paddingBlockSM)} ${(0,v.bf)(e.paddingInlineSM)}`,fontSize:e.inputFontSizeSM,borderRadius:e.borderRadiusSM}),eE=(e,t={})=>({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,v.bf)(e.paddingBlock)} ${(0,v.bf)(e.paddingInline)}`,color:e.colorText,fontSize:e.inputFontSize,lineHeight:e.lineHeight,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`,...eM(e.colorTextPlaceholder),"&-lg":{...eT(e),...t.largeStyle},"&-sm":{...eR(e),...t.smallStyle},"&-rtl, &-textarea-rtl":{direction:"rtl"}}),eP=e=>{let{componentCls:t,antCls:i}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:{...eT(e)},[`&-sm ${t}, &-sm > ${t}-group-addon`]:{...eR(e)},[`&-lg ${i}-select-single`]:{height:e.controlHeightLG},[`&-sm ${i}-select-single`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,v.bf)(e.paddingInline)}`,color:e.colorText,fontWeight:"normal",fontSize:e.inputFontSize,textAlign:"center",borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${i}-select`]:{margin:`${(0,v.bf)(e.calc(e.paddingBlock).add(1).mul(-1).equal())} ${(0,v.bf)(e.calc(e.paddingInline).mul(-1).equal())}`,[`&${i}-select-single:not(${i}-select-customize-input):not(${i}-pagination-size-changer)`]:{backgroundColor:"inherit",border:`${(0,v.bf)(e.lineWidth)} ${e.lineType} transparent`,boxShadow:"none"}},[`${i}-cascader-picker`]:{margin:`-9px ${(0,v.bf)(e.calc(e.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${i}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[t]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${i}-select`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${i}-select`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0},"&:not(:first-child)":{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:{display:"block",...(0,ea.dF)(),[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${i}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderInlineEndWidth:e.lineWidth},[t]:{float:"none"},[`& > ${i}-select,
      & > ${i}-select-auto-complete ${t},
      & > ${i}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${i}-select-focused`]:{zIndex:1},[`& > ${i}-select > ${i}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${i}-select:first-child,
      & > ${i}-select-auto-complete:first-child ${t},
      & > ${i}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${i}-select:last-child,
      & > ${i}-cascader-picker:last-child ${t},
      & > ${i}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${i}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),[`${t}-affix-wrapper`]:{}}}}},eB=e=>{let{componentCls:t,controlHeightSM:i,lineWidth:r,calc:n}=e,l=n(i).sub(n(r).mul(2)).sub(16).div(2).equal();return{[t]:{...(0,ea.Wf)(e),...eE(e),...ef(e),...eC(e),...ey(e),...ek(e),'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:i,paddingTop:l,paddingBottom:l}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{appearance:"none"}}}},eI=e=>{let{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:e.colorIcon},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,v.bf)(e.inputAffixPadding)}`}}}},eL=e=>{let{componentCls:t,inputAffixPadding:i,colorTextDescription:r,motionDurationSlow:n,colorIcon:l,colorIconHover:o,iconCls:a}=e,s=`${t}-affix-wrapper`,h=`${t}-affix-wrapper-disabled`;return{[s]:{...eE(e),display:"inline-flex","&-focused, &:focus":{zIndex:1},[`> input${t}`]:{padding:0},[`> input${t}, > textarea${t}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[t]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:r,direction:"ltr"},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:i},"&-suffix":{marginInlineStart:i}},...eI(e),[`${a}${t}-password-icon`]:{color:l,cursor:"pointer",transition:`all ${n}`,"&:hover":{color:o}}},[`${t}-underlined`]:{borderRadius:0},[h]:{[`${a}${t}-password-icon`]:{color:l,cursor:"not-allowed","&:hover":{color:l}}}}},eF=e=>{let{componentCls:t,borderRadiusLG:i,borderRadiusSM:r}=e;return{[`${t}-group`]:{...(0,ea.Wf)(e),...eP(e),"&-rtl":{direction:"rtl"},"&-wrapper":{display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:i,fontSize:e.inputFontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:r}},...eb(e),...ew(e),[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-item`]:{[`${t}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}}},eH=e=>{let{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}};(0,_.I$)(["Input","Shared"],e=>{let t=(0,C.IX)(e,eh(e));return[eB(t),eL(t)]},ed,{resetFont:!1}),(0,_.I$)(["Input","Component"],e=>{let t=(0,C.IX)(e,eh(e));return[eF(t),eH(t),(0,es.c)(t,{focus:!0,focusElCls:`${t.componentCls}-affix-wrapper-focused`})]},ed,{resetFont:!1});let eO=e=>{let{componentCls:t}=e;return{[`${t}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-item`]:{cursor:"not-allowed",backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${t}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${t}-simple-pager`]:{color:e.colorTextDisabled},[`${t}-jump-prev, ${t}-jump-next`]:{[`${t}-item-link-icon`]:{opacity:0},[`${t}-item-ellipsis`]:{opacity:1}}}}},eD=e=>{let{componentCls:t}=e;return{[`&${t}-mini ${t}-total-text, &${t}-mini ${t}-simple-pager`]:{height:e.itemSizeSM,lineHeight:(0,v.bf)(e.itemSizeSM)},[`&${t}-mini ${t}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:(0,v.bf)(e.calc(e.itemSizeSM).sub(2).equal())},[`&${t}-mini ${t}-prev, &${t}-mini ${t}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:(0,v.bf)(e.itemSizeSM)},[`&${t}-mini:not(${t}-disabled)`]:{[`${t}-prev, ${t}-next`]:{[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover ${t}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${t}-mini ${t}-prev ${t}-item-link,
    &${t}-mini ${t}-next ${t}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:(0,v.bf)(e.itemSizeSM)}},[`&${t}-mini ${t}-jump-prev, &${t}-mini ${t}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:(0,v.bf)(e.itemSizeSM)},[`&${t}-mini ${t}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:(0,v.bf)(e.itemSizeSM),input:{...eR(e),width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM}}}}},ez=e=>{let{componentCls:t}=e;return{[`&${t}-simple`]:{[`${t}-prev, ${t}-next`]:{height:e.itemSize,lineHeight:(0,v.bf)(e.itemSize),verticalAlign:"top",[`${t}-item-link`]:{height:e.itemSize,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSize,lineHeight:(0,v.bf)(e.itemSize)}}},[`${t}-simple-pager`]:{display:"inline-flex",alignItems:"center",height:e.itemSize,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",width:e.quickJumperInputWidth,padding:`0 ${(0,v.bf)(e.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${(0,v.bf)(e.inputOutlineOffset)} 0 ${(0,v.bf)(e.controlOutlineWidth)} ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}},[`&${t}-disabled`]:{[`${t}-prev, ${t}-next`]:{[`${t}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}},[`&${t}-mini`]:{[`${t}-prev, ${t}-next`]:{height:e.itemSizeSM,lineHeight:(0,v.bf)(e.itemSizeSM),[`${t}-item-link`]:{height:e.itemSizeSM,"&::after":{height:e.itemSizeSM,lineHeight:(0,v.bf)(e.itemSizeSM)}}},[`${t}-simple-pager`]:{height:e.itemSizeSM,input:{width:e.paginationMiniQuickJumperInputWidth}}}}}},eW=e=>{let{componentCls:t}=e;return{[`${t}-jump-prev, ${t}-jump-next`]:{outline:0,[`${t}-item-container`]:{position:"relative",[`${t}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${t}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}}},[`
    ${t}-prev,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{marginInlineEnd:e.marginXS},[`
    ${t}-prev,
    ${t}-next,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:(0,v.bf)(e.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${t}-prev, ${t}-next`]:{outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${t}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${(0,v.bf)(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover`]:{[`${t}-item-link`]:{backgroundColor:"transparent"}}},[`${t}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${t}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer":{width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:(0,v.bf)(e.controlHeight),verticalAlign:"top",input:{...eE(e),...ep(e,{borderColor:e.colorBorder,hoverBorderColor:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadow:e.activeShadow}),"&[disabled]":{...ec(e)},width:e.quickJumperInputWidth,height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS}}}}},eZ=e=>{let{componentCls:t}=e;return{[`${t}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:(0,v.bf)(e.calc(e.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:e.itemBg,border:`${(0,v.bf)(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${(0,v.bf)(e.paginationItemPaddingInline)}`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${t}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.itemActiveColor},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.itemActiveColorHover}}}}},eN=e=>{let{componentCls:t}=e;return{[t]:{...(0,ea.Wf)(e),display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${t}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:(0,v.bf)(e.calc(e.itemSize).sub(2).equal()),verticalAlign:"middle"},...eZ(e),...eW(e),...ez(e),...eD(e),...eO(e),[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${t}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${t}-options`]:{display:"none"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},e$=e=>{let{componentCls:t}=e;return{[`${t}:not(${t}-disabled)`]:{[`${t}-item`]:{...(0,ea.Qy)(e)},[`${t}-jump-prev, ${t}-jump-next`]:{"&:focus-visible":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0},...(0,ea.oN)(e)}},[`${t}-prev, ${t}-next`]:{[`&:focus-visible ${t}-item-link`]:(0,ea.oN)(e)}}}},ej=e=>({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemActiveColor:e.colorPrimary,itemActiveColorHover:e.colorPrimaryHover,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0,...ed(e)}),eG=e=>(0,C.IX)(e,{inputOutlineOffset:0,quickJumperInputWidth:e.calc(e.controlHeightLG).mul(1.25).equal(),paginationMiniOptionsMarginInlineStart:e.calc(e.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:e.calc(e.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:e.calc(e.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:e.calc(e.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:e.marginSM,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},eh(e)),eV=(0,_.I$)("Pagination",e=>{let t=eG(e);return[eN(t),e$(t)]},ej),eU=e=>{let{componentCls:t}=e;return{[`${t}${t}-bordered${t}-disabled:not(${t}-mini)`]:{"&, &:hover":{[`${t}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${t}-item-link`]:{borderColor:e.colorBorder}},[`${t}-item, ${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${t}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${t}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${t}-prev, ${t}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${t}${t}-bordered:not(${t}-mini)`]:{[`${t}-prev, ${t}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${t}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${t}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${t}-disabled`]:{[`${t}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${t}-item`]:{backgroundColor:e.itemBg,border:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${t}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},eK=(0,_.bk)(["Pagination","bordered"],e=>eU(eG(e)),ej);function eX(e){return(0,n.useMemo)(()=>"boolean"==typeof e?[e,{}]:e&&"object"==typeof e?[!0,e]:[void 0,void 0],[e])}let eY=e=>{let{align:t,prefixCls:i,selectPrefixCls:r,className:o,rootClassName:s,style:h,size:d,locale:u,responsive:p,showSizeChanger:f,selectComponentClass:m,pageSizeOptions:y,styles:v,classNames:_,...C}=e,{xs:x}=b(p),[,w]=(0,a.ZP)(),{getPrefixCls:S,direction:A,showSizeChanger:k,className:M,style:T,classNames:R,styles:E}=(0,c.dj)("pagination"),P=S("pagination",i),[B,I]=eV(P),F=(0,g.Z)(d),H="small"===F||!!(x&&!F&&p),D={...e,size:F},[z,Z]=(0,en.MW)([R,_],[E,v],{props:D}),[N]=(0,el.Z)("Pagination",er.Z),j={...N,...u},[G,V]=eX(f),[U,K]=eX(k),X=V??K,Y=m||eo.Z,q=n.useMemo(()=>y?y.map(e=>Number(e)):void 0,[y]),J=n.useMemo(()=>{let e=n.createElement("span",{className:`${P}-item-ellipsis`},""),t=n.createElement("button",{className:`${P}-item-link`,type:"button",tabIndex:-1},"rtl"===A?n.createElement($,null):n.createElement(W,null)),i=n.createElement("button",{className:`${P}-item-link`,type:"button",tabIndex:-1},"rtl"===A?n.createElement(W,null):n.createElement($,null));return{prevIcon:t,nextIcon:i,jumpPrevIcon:n.createElement("a",{className:`${P}-item-link`},n.createElement("div",{className:`${P}-item-container`},"rtl"===A?n.createElement(O,{className:`${P}-item-link-icon`}):n.createElement(L,{className:`${P}-item-link-icon`}),e)),jumpNextIcon:n.createElement("a",{className:`${P}-item-link`},n.createElement("div",{className:`${P}-item-container`},"rtl"===A?n.createElement(L,{className:`${P}-item-link-icon`}):n.createElement(O,{className:`${P}-item-link-icon`}),e))}},[A,P]),Q=S("select",r),ee=(0,l.W)({[`${P}-${t}`]:!!t,[`${P}-mini`]:H,[`${P}-rtl`]:"rtl"===A,[`${P}-bordered`]:w.wireframe},M,o,s,z.root,B,I),et={...Z.root,...T,...h};return n.createElement(n.Fragment,null,w.wireframe&&n.createElement(eK,{prefixCls:P}),n.createElement(ei,{...J,...C,styles:Z,classNames:z,style:et,prefixCls:P,selectPrefixCls:Q,className:ee,locale:j,pageSizeOptions:q,showSizeChanger:G??U,sizeChangerRender:e=>{let{disabled:t,size:i,onSizeChange:r,"aria-label":o,className:a,options:s}=e,{className:h,onChange:d}=X||{},u=s.find(e=>String(e.value)===String(i))?.value;return n.createElement(Y,{disabled:t,showSearch:!0,popupMatchSelectWidth:!1,getPopupContainer:e=>e.parentNode,"aria-label":o,options:s,...X,value:u,onChange:(e,t)=>{r?.(e),d?.(e,t)},size:H?"small":"middle",className:(0,l.W)(a,h)})}}))};var eq=i(9405);let eJ=n.createContext({});eJ.Consumer;var eQ=i(10894),e0=i(74123);function e1(e){return"auto"===e?"1 1 auto":"number"==typeof e?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}let e2=["xs","sm","md","lg","xl","xxl"],e3=n.forwardRef((e,t)=>{let{getPrefixCls:i,direction:r}=n.useContext(c.E_),{gutter:o,wrap:a}=n.useContext(y),{prefixCls:s,span:h,order:d,offset:u,push:p,pull:g,className:f,children:m,flex:b,style:v,..._}=e,C=i("col",s),[x,w]=T(C),S={},A={};e2.forEach(t=>{let i={},n=e[t];"number"==typeof n?i.span=n:"object"==typeof n&&(i=n||{}),delete _[t],A={...A,[`${C}-${t}-${i.span}`]:void 0!==i.span,[`${C}-${t}-order-${i.order}`]:i.order||0===i.order,[`${C}-${t}-offset-${i.offset}`]:i.offset||0===i.offset,[`${C}-${t}-push-${i.push}`]:i.push||0===i.push,[`${C}-${t}-pull-${i.pull}`]:i.pull||0===i.pull,[`${C}-rtl`]:"rtl"===r},i.flex&&(A[`${C}-${t}-flex`]=!0,S[`--${C}-${t}-flex`]=e1(i.flex))});let k=(0,l.W)(C,{[`${C}-${h}`]:void 0!==h,[`${C}-order-${d}`]:d,[`${C}-offset-${u}`]:u,[`${C}-push-${p}`]:p,[`${C}-pull-${g}`]:g},f,A,x,w),M={};return o?.[0]&&(M.paddingInline="number"==typeof o[0]?`${o[0]/2}px`:`calc(${o[0]} / 2)`),b&&(M.flex=e1(b),!1!==a||M.minWidth||(M.minWidth=0)),n.createElement("div",{..._,style:{...M,...v,...S},className:k,ref:t},m)}),e4=n.forwardRef((e,t)=>{let{prefixCls:i,children:r,actions:o,extra:a,styles:s,className:h,classNames:d,colStyle:u,...p}=e,{grid:g,itemLayout:f}=(0,n.useContext)(eJ),{getPrefixCls:m,list:b}=(0,n.useContext)(c.E_),y=e=>(0,l.W)(b?.item?.classNames?.[e],d?.[e]),v=e=>({...b?.item?.styles?.[e],...s?.[e]}),_=m("list",i),C=o&&o.length>0&&n.createElement("ul",{className:(0,l.W)(`${_}-item-action`,y("actions")),key:"actions",style:v("actions")},o.map((e,t)=>n.createElement("li",{key:`${_}-item-action-${t}`},e,t!==o.length-1&&n.createElement("em",{className:`${_}-item-action-split`})))),x=n.createElement(g?"div":"li",{...p,...!g?{ref:t}:{},className:(0,l.W)(`${_}-item`,{[`${_}-item-no-flex`]:!("vertical"===f?!!a:!(()=>{let e=(0,eQ.qo)(r);return e.some(e=>"string"==typeof e)&&e.length>1})())},h)},"vertical"===f&&a?[n.createElement("div",{className:`${_}-item-main`,key:"content"},r,C),n.createElement("div",{className:(0,l.W)(`${_}-item-extra`,y("extra")),key:"extra",style:v("extra")},a)]:[r,C,(0,e0.Tm)(a,{key:"extra"})]);return g?n.createElement(e3,{ref:t,flex:1,style:u},x):x});e4.Meta=({prefixCls:e,className:t,avatar:i,title:r,description:o,...a})=>{let{getPrefixCls:s}=(0,n.useContext)(c.E_),h=s("list",e),d=(0,l.W)(`${h}-item-meta`,t),u=n.createElement("div",{className:`${h}-item-meta-content`},r&&n.createElement("h4",{className:`${h}-item-meta-title`},r),o&&n.createElement("div",{className:`${h}-item-meta-description`},o));return n.createElement("div",{...a,className:d},i&&n.createElement("div",{className:`${h}-item-meta-avatar`},i),(r||o)&&u)};let e5=e=>{let{listBorderedCls:t,componentCls:i,paddingLG:r,margin:n,itemPaddingSM:l,itemPaddingLG:o,marginLG:a,borderRadiusLG:s}=e,h=(0,v.bf)(e.calc(s).sub(e.lineWidth).equal());return{[t]:{border:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:s,[`${i}-header`]:{borderRadius:`${h} ${h} 0 0`},[`${i}-footer`]:{borderRadius:`0 0 ${h} ${h}`},[`${i}-header,${i}-footer,${i}-item`]:{paddingInline:r},[`${i}-pagination`]:{margin:`${(0,v.bf)(n)} ${(0,v.bf)(a)}`}},[`${t}${i}-sm`]:{[`${i}-item,${i}-header,${i}-footer`]:{padding:l}},[`${t}${i}-lg`]:{[`${i}-item,${i}-header,${i}-footer`]:{padding:o}}}},e6=e=>{let{componentCls:t,screenSM:i,screenMD:r,marginLG:n,marginSM:l,margin:o}=e;return{[`@media screen and (max-width:${r}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:n}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:n}}}},[`@media screen and (max-width: ${i}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:l}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${(0,v.bf)(o)}`}}}}}},e8=e=>{let{componentCls:t,antCls:i,controlHeight:r,minHeight:n,paddingSM:l,marginLG:o,padding:a,itemPadding:s,colorPrimary:h,itemPaddingSM:d,itemPaddingLG:u,paddingXS:c,margin:p,colorText:g,colorTextDescription:f,motionDurationSlow:m,lineWidth:b,headerBg:y,footerBg:_,emptyTextPadding:C,metaMarginBottom:x,avatarMarginRight:w,titleMarginBottom:S,descriptionFontSize:A}=e;return{[t]:{...(0,ea.Wf)(e),position:"relative","--rc-virtual-list-scrollbar-bg":e.colorSplit,"*":{outline:"none"},[`${t}-header`]:{background:y},[`${t}-footer`]:{background:_},[`${t}-header, ${t}-footer`]:{paddingBlock:l},[`${t}-pagination`]:{marginBlockStart:o,[`${i}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:n,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:s,color:g,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:w},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:g},[`${t}-item-meta-title`]:{margin:`0 0 ${(0,v.bf)(e.marginXXS)} 0`,color:g,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:g,transition:`all ${m}`,"&:hover":{color:h}}},[`${t}-item-meta-description`]:{color:f,fontSize:A,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${(0,v.bf)(c)}`,color:f,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:b,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${(0,v.bf)(a)} 0`,color:f,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:C,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}},[`${t}-grid ${i}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:p,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:o},[`${t}-item-meta`]:{marginBlockEnd:x,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:S,color:g,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:a,marginInlineStart:"auto","> li":{padding:`0 ${(0,v.bf)(a)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${i}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${(0,v.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:u},[`${t}-sm ${t}-item`]:{padding:d},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},e7=(0,_.I$)("List",e=>{let t=(0,C.IX)(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[e8(t),e5(t),e6(t)]},e=>({contentWidth:220,itemPadding:`${(0,v.bf)(e.paddingContentVertical)} 0`,itemPaddingSM:`${(0,v.bf)(e.paddingContentVerticalSM)} ${(0,v.bf)(e.paddingContentHorizontal)}`,itemPaddingLG:`${(0,v.bf)(e.paddingContentVerticalLG)} ${(0,v.bf)(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize})),e9=n.forwardRef((e,t)=>{let{pagination:i=!1,prefixCls:a,bordered:h=!1,split:d=!0,className:u,rootClassName:f,style:m,children:y,itemLayout:v,loadMore:_,grid:C,dataSource:x=[],size:w,header:S,footer:A,loading:k=!1,rowKey:M,renderItem:T,locale:R,...P}=e,B=i&&"object"==typeof i?i:{},[I,L]=n.useState(B.defaultCurrent||1),[F,H]=n.useState(B.defaultPageSize||10),{getPrefixCls:O,direction:D,className:z,style:W}=(0,c.dj)("list"),{renderEmpty:Z}=n.useContext(c.E_),N=e=>(t,r)=>{L(t),H(r),i&&i?.[e]?.(t,r)},$=N("onChange"),j=N("onShowSizeChange"),G=!!(_||i||A),V=O("list",a),[U,K]=e7(V),X=k;"boolean"==typeof X&&(X={spinning:X});let Y=!!X?.spinning,q=(0,g.Z)(w),J="";switch(q){case"large":J="lg";break;case"small":J="sm"}let Q=(0,l.W)(V,{[`${V}-vertical`]:"vertical"===v,[`${V}-${J}`]:J,[`${V}-split`]:d,[`${V}-bordered`]:h,[`${V}-loading`]:Y,[`${V}-grid`]:!!C,[`${V}-something-after-last-item`]:G,[`${V}-rtl`]:"rtl"===D},z,u,f,U,K),ee=o({current:1,total:0,position:"bottom"},{total:x.length,current:I,pageSize:F},i||{}),et=Math.ceil(ee.total/ee.pageSize);ee.current=Math.min(ee.current,et);let ei=i&&n.createElement("div",{className:(0,l.W)(`${V}-pagination`)},n.createElement(eY,{align:"end",...ee,onChange:$,onShowSizeChange:j})),er=(0,r.Z)(x);i&&x.length>(ee.current-1)*ee.pageSize&&(er=(0,r.Z)(x).splice((ee.current-1)*ee.pageSize,ee.pageSize));let en=b(Object.keys(C||{}).some(e=>["xs","sm","md","lg","xl","xxl"].includes(e))),el=n.useMemo(()=>{for(let e=0;e<s.length;e+=1){let t=s[e];if(en[t])return t}},[en]),eo=n.useMemo(()=>{if(!C)return;let e=el&&C[el]?C[el]:C.column;if(e)return{width:`${100/e}%`,maxWidth:`${100/e}%`}},[JSON.stringify(C),el]),ea=Y&&n.createElement("div",{style:{minHeight:53}});if(er.length>0){let e=er.map((e,t)=>{let i;return T?((i="function"==typeof M?M(e):M?e[M]:e.key)||(i=`list-item-${t}`),n.createElement(n.Fragment,{key:i},T(e,t))):null});ea=C?n.createElement(E,{gutter:C.gutter},n.Children.map(e,e=>n.createElement("div",{key:e?.key,style:eo},e))):n.createElement("ul",{className:`${V}-items`},e)}else y||Y||(ea=n.createElement("div",{className:`${V}-empty-text`},R?.emptyText||Z?.("List")||n.createElement(p.Z,{componentName:"List"})));let es=ee.position,eh=n.useMemo(()=>({grid:C,itemLayout:v}),[JSON.stringify(C),v]);return n.createElement(eJ.Provider,{value:eh},n.createElement("div",{ref:t,style:{...W,...m},className:Q,...P},("top"===es||"both"===es)&&ei,S&&n.createElement("div",{className:`${V}-header`},S),n.createElement(eq.Z,{...X},ea,y),A&&n.createElement("div",{className:`${V}-footer`},A),_||("bottom"===es||"both"===es)&&ei))});e9.Item=e4;let te=e9},42562:function(e,t,i){i.d(t,{Z:()=>r});let r=(0,i(44194).createContext)(void 0)},68125:function(e,t,i){i.d(t,{Z:()=>u});var r=i(65460);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){var r,l,o;r=e,l=t,o=i[t],(l=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=n(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}(l))in r?Object.defineProperty(r,l,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[l]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var a=o(o({},{yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});let s={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},h={lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],...a},timePickerLocale:{...s}},d="${label} is not a valid ${type}",u={locale:"en",Pagination:r.Z,DatePicker:h,TimePicker:s,Calendar:h,global:{placeholder:"Please select",close:"Close",sortable:"sortable"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:d,method:d,array:d,object:d,number:d,date:d,boolean:d,integer:d,float:d,regexp:d,email:d,url:d,hex:d},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}}},50806:function(e,t,i){i.d(t,{Z:()=>o});var r=i(44194),n=i(42562),l=i(68125);let o=(e,t)=>{let i=r.useContext(n.Z);return[r.useMemo(()=>{let r=t||l.Z[e],n=i?.[e]??{};return{..."function"==typeof r?r():r,...n||{}}},[e,t,i]),r.useMemo(()=>{let e=i?.locale;return i?.exist&&!e?l.Z.locale:e},[i])]}},23131:function(e,t,i){i.d(t,{Z:()=>it});var r,n,l,o,a,s=i(44194),h=i(9708),d=i(57705),u=i(10976),c=i(51827);let p=(e,t,i,r,n=!1,l,o)=>{let a=(0,s.useMemo)(()=>"boolean"==typeof i?{allowClear:i}:i&&"object"==typeof i?i:{allowClear:!1},[i]);return(0,s.useMemo)(()=>{let e=!n&&!1!==a.allowClear&&(t.length||l)&&("combobox"!==o||""!==l);return{allowClear:e,clearIcon:e?a.clearIcon||r||"\xd7":null}},[a,r,n,t.length,l,o])},g=s.createContext(null);function f(){return s.useContext(g)}var m=i(10894);function b(e,t){return e.filter(e=>e).some(e=>e.contains(t)||e===t)}var y=i(81801);function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let _=e=>{let t=+(!0!==e);return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"}}},C=s.forwardRef((e,t)=>{let{prefixCls:i,disabled:r,visible:n,children:l,popupElement:o,animation:a,transitionName:h,popupStyle:d,popupClassName:c,direction:p="ltr",placement:g,builtinPlacements:f,popupMatchSelectWidth:m,popupRender:b,popupAlign:C,getPopupContainer:x,empty:w,onPopupVisibleChange:S,onPopupMouseEnter:A,onPopupMouseDown:k,onPopupBlur:M,...T}=e,R=`${i}-dropdown`,E=o;b&&(E=b(o));let P=s.useMemo(()=>f||_(m),[f,m]),B=a?`${R}-${a}`:h,I="number"==typeof m,L=s.useMemo(()=>I?null:!1===m?"minWidth":"width",[m,I]),F=d;I&&(F={...d,width:m});let H=s.useRef(null);return s.useImperativeHandle(t,()=>({getPopupElement:()=>H.current?.popupElement})),s.createElement(y.ZP,v({},T,{showAction:S?["click"]:[],hideAction:S?["click"]:[],popupPlacement:g||("rtl"===p?"bottomRight":"bottomLeft"),builtinPlacements:P,prefixCls:R,popupMotion:{motionName:B},popup:s.createElement("div",{onMouseEnter:A,onMouseDown:k,onBlur:M},E),ref:H,stretch:L,popupAlign:C,popupVisible:n,getPopupContainer:x,popupClassName:(0,u.W)(c,{[`${R}-empty`]:w}),popupStyle:F,onPopupVisibleChange:S}),l)});function x(e,t){let i,{key:r}=e;return("value"in e&&({value:i}=e),null!=r)?r:void 0!==i?i:`rc-index-key-${t}`}function w(e){return void 0!==e&&!Number.isNaN(e)}function S(e,t){let{label:i,value:r,options:n,groupLabel:l}=e||{},o=i||(t?"children":"label");return{label:o,value:r||"value",options:n||"options",groupLabel:l||o}}function A(e){let t={...e};return"props"in t||Object.defineProperty(t,"props",{get:()=>((0,d.ZP)(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t)}),t}let k=(e,t,i)=>{if(!t||!t.length)return null;let r=!1,n=(e,[t,...i])=>{if(!t)return[e];let l=e.split(t);return r=r||l.length>1,l.reduce((e,t)=>[...e,...n(t,i)],[]).filter(Boolean)},l=n(e,t);return r?void 0!==i?l.slice(0,i):l:null};function M(e){let{visible:t,values:i}=e;return t?s.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},`${i.slice(0,50).map(({label:e,value:t})=>["number","string"].includes(typeof e)?e:t).join(", ")}`,i.length>50?", ...":null):null}let T=e=>{let t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(null)},R=(e,t=1)=>{if(t<=0)return void e();T(()=>{R(e,t-1)})};function E(e){let{children:t,...i}=e;return t?s.createElement("div",i,t):null}var P=i(6207);let B=s.createContext(null);function I(){return s.useContext(B)}var L=i(68176),F=i(73260);let H=s.forwardRef((e,t)=>{let{onChange:i,onKeyDown:r,onBlur:n,style:l,syncWidth:o,value:a,className:h,autoComplete:d,...c}=e,{prefixCls:p,mode:g,onSearch:m,onSearchSubmit:b,onInputBlur:y,autoFocus:v,tokenWithEnter:_,placeholder:C,components:{input:x="input"}}=I(),{id:w,classNames:S,styles:A,open:k,activeDescendantId:M,role:T,disabled:R}=f()||{},E=(0,u.W)(`${p}-input`,S?.input,h),P=s.useRef(!1),B=s.useRef(null),H=s.useRef(null);s.useImperativeHandle(t,()=>H.current);let[O,D]=s.useState(void 0);(0,L.Z)(()=>{let e=H.current;o&&e&&(e.style.width="0px",D(e.scrollWidth),e.style.width="")},[o,a]);let z={id:w,type:"combobox"===g?"text":"search",...c,ref:H,style:{...A?.input,...l,"--select-input-width":O},autoFocus:v,autoComplete:d||"off",className:E,disabled:R,value:a||"",onChange:e=>{let{value:t}=e.target;if(_&&B.current&&/[\r\n]/.test(B.current)){let e=B.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(e,B.current)}B.current=null,m&&m(t,!0,P.current),i?.(e)},onKeyDown:e=>{let{key:t}=e,{value:i}=e.currentTarget;"Enter"===t&&"tags"===g&&!P.current&&b&&b(i),r?.(e)},onBlur:e=>{y?.(),n?.(e)},onPaste:e=>{let{clipboardData:t}=e;B.current=t?.getData("text")||""},onCompositionStart:()=>{P.current=!0},onCompositionEnd:e=>{if(P.current=!1,"combobox"!==g){let{value:t}=e.currentTarget;m?.(t,!0,!1)}},role:T||"combobox","aria-expanded":k||!1,"aria-haspopup":"listbox","aria-owns":k?`${w}_list`:void 0,"aria-autocomplete":"list","aria-controls":k?`${w}_list`:void 0,"aria-activedescendant":k?M:void 0};if(s.isValidElement(x)){let t=x.props||{},i={placeholder:e.placeholder||C,...z,...t};return Object.keys(t).forEach(e=>{let r=t[e];"function"==typeof r&&(i[e]=(...t)=>{r(...t),z[e]?.(...t)})}),i.ref=(0,F.sQ)(x.ref,z.ref),s.cloneElement(x,i)}return s.createElement(x,z)});function O(e){let{prefixCls:t,placeholder:i,displayValues:r}=I(),{classNames:n,styles:l}=f(),{show:o=!0}=e;return r.length?null:s.createElement("div",{className:(0,u.W)(`${t}-placeholder`,n?.placeholder),style:{visibility:o?"visible":"hidden",...l?.placeholder}},i)}let D=s.createContext(null);function z(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}function W(e){return["string","number"].includes(typeof e)}function Z(e){let t;return e&&(W(e.title)?t=e.title.toString():W(e.label)&&(t=e.label.toString())),t}function N(){return(N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}"undefined"!=typeof window&&window.document&&window.document.documentElement;let $=s.forwardRef(({inputProps:e},t)=>{let{prefixCls:i,searchValue:r,activeValue:n,displayValues:l,maxLength:o,mode:a}=I(),{triggerOpen:h,title:d,showSearch:c,classNames:p,styles:g}=f(),m=s.useContext(D),[b,y]=s.useState(!1),v="combobox"===a,_=l[0],C=s.useMemo(()=>v&&n&&!b&&h?n:c?r:"",[v,n,b,h,r,c]),x=s.useMemo(()=>{let e={className:`${i}-content-value`,style:{visibility:C?"hidden":"visible"}};if(_&&m?.flattenOptions){let t=m.flattenOptions.find(e=>e.value===_.value);if(t?.data){let{className:i,style:r}=t.data;Object.assign(e,{title:Z(t.data),className:(0,u.W)(e.className,i),style:{...e.style,...r}})}}return _&&!e.title&&(e.title=Z(_)),void 0!==d&&(e.title=d),e},[_,m?.flattenOptions,i,C,d]);return s.useEffect(()=>{v&&y(!1)},[v,n]),s.createElement("div",{className:(0,u.W)(`${i}-content`,p?.content),style:g?.content},_?s.createElement("div",x,_.label):s.createElement(O,{show:!C}),s.createElement(H,N({ref:t},e,{value:C,maxLength:"combobox"===a?o:void 0,onChange:t=>{y(!0),e.onChange?.(t)}})))});var j=i(30936);let G=e=>{let{className:t,style:i,customizeIcon:r,customizeIconProps:n,children:l,onMouseDown:o,onClick:a}=e,h="function"==typeof r?r(n):r;return s.createElement("span",{className:t,onMouseDown:e=>{e.preventDefault(),o?.(e)},style:{userSelect:"none",WebkitUserSelect:"none",...i},unselectable:"on",onClick:a,"aria-hidden":!0},void 0!==h?h:s.createElement("span",{className:(0,u.W)(t.split(/\s+/).map(e=>`${e}-icon`))},l))};function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function U(e){return e.key??e.value}let K=e=>{e.preventDefault(),e.stopPropagation()},X=s.forwardRef(function({inputProps:e},t){let{prefixCls:i,displayValues:r,searchValue:n,mode:l,onSelectorRemove:o,removeIcon:a}=I(),{disabled:h,showSearch:d,triggerOpen:c,toggleOpen:p,autoClearSearchValue:g,tagRender:m,maxTagPlaceholder:b,maxTagTextLength:y,maxTagCount:v,classNames:_,styles:C}=f(),x=`${i}-selection-item`,w=n;c||"multiple"!==l||!1===g||(w="");let S=d&&w||"",A=d&&!h,k=a??"\xd7",M=b??(e=>`+ ${e.length} ...`),T=e=>{p(e)},R=e=>{o?.(e)},E=(e,t,i,r,n)=>s.createElement("span",{title:Z(e),className:(0,u.W)(x,{[`${x}-disabled`]:i},_?.item),style:C?.item},s.createElement("span",{className:(0,u.W)(`${x}-content`,_?.itemContent),style:C?.itemContent},t),r&&s.createElement(G,{className:(0,u.W)(`${x}-remove`,_?.itemRemove),style:C?.itemRemove,onMouseDown:K,onClick:n,customizeIcon:k},"\xd7")),P=(e,t,i,r,n,l,o)=>s.createElement("span",{onMouseDown:e=>{K(e),T(!c)}},m({label:t,value:e,index:o?.index,disabled:i,closable:r,onClose:n,isMaxTag:!!l}));return s.createElement(j.Z,{prefixCls:`${i}-content`,className:_?.content,style:C?.content,prefix:r.length||n&&c?null:s.createElement(O,null),data:r,renderItem:(e,t)=>{let{disabled:i,label:r,value:n}=e,l=!h&&!i,o=r;if("number"==typeof y&&("string"==typeof r||"number"==typeof r)){let e=String(o);e.length>y&&(o=`${e.slice(0,y)}...`)}let a=t=>{t&&t.stopPropagation(),R(e)};return"function"==typeof m?P(n,o,i,l,a,void 0,t):E(e,o,i,l,a)},renderRest:e=>{if(!r.length)return null;let t="function"==typeof M?M(e):M;return"function"==typeof m?P(void 0,t,!1,!1,void 0,!0):E({title:t},t,!1)},suffix:s.createElement(H,V({ref:t,disabled:h,readOnly:!A},e,{value:S||"",syncWidth:!0})),itemKey:U,maxCount:v})}),Y=s.forwardRef(function(e,t){let{multiple:i,onInputKeyDown:r,tabIndex:n}=I(),l=f(),{showSearch:o}=l,a={...(0,P.Z)(l,{aria:!0}),onKeyDown:r,readOnly:!o,tabIndex:n};return i?s.createElement(X,{ref:t,inputProps:a}):s.createElement($,{ref:t,inputProps:a})});var q=i(93676);function J(){return(J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let Q=["value","onChange","removeIcon","placeholder","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex","activeValue","onSelectorRemove","focused"],ee=s.forwardRef(function(e,t){let{prefixCls:i,className:r,style:n,prefix:l,suffix:o,clearIcon:a,children:h,multiple:d,displayValues:p,placeholder:g,mode:b,searchValue:y,onSearch:v,onSearchSubmit:_,onInputBlur:C,maxLength:x,autoFocus:w,onMouseDown:S,onClearMouseDown:A,onInputKeyDown:k,onSelectorRemove:M,tokenWithEnter:T,components:R,...P}=e,{triggerOpen:I,toggleOpen:L,showSearch:H,disabled:O,loading:D,classNames:z,styles:W}=f(),Z=s.useRef(null),N=s.useRef(null),$=(0,m.zX)(e=>{let{which:t}=e,i=N.current instanceof HTMLTextAreaElement;(!i&&I&&(t===q.Z.UP||t===q.Z.DOWN)&&e.preventDefault(),k&&k(e),!(i&&!I&&~[q.Z.UP,q.Z.DOWN,q.Z.LEFT,q.Z.RIGHT].indexOf(t)))&&t&&![q.Z.ESC,q.Z.SHIFT,q.Z.BACKSPACE,q.Z.TAB,q.Z.WIN_KEY,q.Z.ALT,q.Z.META,q.Z.WIN_KEY_RIGHT,q.Z.CTRL,q.Z.SEMICOLON,q.Z.EQUALS,q.Z.CAPS_LOCK,q.Z.CONTEXT_MENU,q.Z.UP,q.Z.LEFT,q.Z.RIGHT,q.Z.F1,q.Z.F2,q.Z.F3,q.Z.F4,q.Z.F5,q.Z.F6,q.Z.F7,q.Z.F8,q.Z.F9,q.Z.F10,q.Z.F11,q.Z.F12].includes(t)&&L(!0)});s.useImperativeHandle(t,()=>({focus:e=>{(N.current||Z.current).focus?.(e)},blur:()=>{(N.current||Z.current).blur?.()},nativeElement:Z.current}));let j=(0,m.zX)(e=>{if(!O){let t=(0,c.bn)(N.current);e.nativeEvent._ori_target=t,t&&e.target!==t&&!t.contains(e.target)&&e.preventDefault();let i=I&&!d&&("combobox"===b||H);e.nativeEvent._select_lazy?I&&L(!1):(N.current?.focus(),i||L())}S?.(e)}),{root:G}=R,V=(0,m.CE)(P,Q),U={...e,onInputKeyDown:$};return G?s.isValidElement(G)?s.cloneElement(G,{...V,ref:(0,F.sQ)(G.ref,Z)}):s.createElement(G,J({},V,{ref:Z})):s.createElement(B.Provider,{value:U},s.createElement("div",J({},V,{ref:Z,className:r,style:n,onMouseDown:j}),s.createElement(E,{className:(0,u.W)(`${i}-prefix`,z?.prefix),style:W?.prefix},l),s.createElement(Y,{ref:N}),s.createElement(E,{className:(0,u.W)(`${i}-suffix`,{[`${i}-suffix-loading`]:D},z?.suffix),style:W?.suffix},o),a&&s.createElement(E,{className:(0,u.W)(`${i}-clear`,z?.clear),style:W?.clear,onMouseDown:e=>{e.nativeEvent._select_lazy=!0,A?.(e)}},a),h))});function et(){return(et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let ei=e=>"tags"===e||"multiple"===e,er=s.forwardRef((e,t)=>{let i,{id:r,prefixCls:n,className:l,styles:o,classNames:a,showSearch:h,tagRender:d,showScrollBar:f="optional",direction:y,omitDomProps:v,displayValues:_,onDisplayValuesChange:x,emptyOptions:S,notFoundContent:A="Not Found",onClear:T,maxCount:E,placeholder:P,mode:B,disabled:I,loading:L,getInputElement:F,getRawInputElement:H,open:O,defaultOpen:D,onPopupVisibleChange:z,activeValue:W,onActiveValueChange:Z,activeDescendantId:N,searchValue:$,autoClearSearchValue:j,onSearch:G,onSearchSplit:V,tokenSeparators:U,allowClear:K,prefix:X,suffix:Y,suffixIcon:q,clearIcon:J,OptionList:Q,animation:er,transitionName:en,popupStyle:el,popupClassName:eo,popupMatchSelectWidth:ea,popupRender:es,popupAlign:eh,placement:ed,builtinPlacements:eu,getPopupContainer:ec,showAction:ep=[],onFocus:eg,onBlur:ef,onKeyUp:em,onKeyDown:eb,onMouseDown:ey,components:ev,...e_}=e,eC=ei(B),ex=s.useRef(null),ew=s.useRef(null),eS=s.useRef(null),[eA,ek]=s.useState(!1);s.useImperativeHandle(t,()=>({focus:ex.current?.focus,blur:ex.current?.blur,scrollTo:e=>eS.current?.scrollTo(e),nativeElement:(0,c.bn)(ex.current)}));let eM=s.useMemo(()=>{let{root:e,input:t}=ev||{};return H&&(e=H()),F&&(t=F()),{root:e,input:t}},[ev,F,H]),eT=s.useMemo(()=>{if("combobox"!==B)return $;let e=_[0]?.value;return"string"==typeof e||"number"==typeof e?String(e):""},[$,B,_]),eR="combobox"===B&&"function"==typeof F&&F()||null,eE=!A&&S,[eP,eB]=function(e,t,i,r){let[n,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{l(!0)},[]);let[o,a]=(0,m.zk)(e,t),h=r(!!n&&o),d=(0,s.useRef)(0),u=(0,m.zX)(e=>{i&&h!==e&&i(e),a(e)}),c=(0,m.zX)((e,t={})=>{let{cancelFun:i}=t;d.current+=1;let r=d.current,n="boolean"==typeof e?e:!h;function l(){r!==d.current||i?.()||u(n)}n?l():R(()=>{l()})});return[h,c]}(D||!1,O,z,e=>!I&&!eE&&e),eI=s.useMemo(()=>(U||[]).some(e=>["\n","\r\n"].includes(e)),[U]),eL=(e,t,i)=>{if(eC&&w(E)&&_.length>=E)return;let r=!0,n=e;Z?.(null);let l=k(e,U,w(E)?E-_.length:void 0),o=i?null:l;return"combobox"!==B&&o&&(n="",V?.(o),eB(!1),r=!1),G&&eT!==n&&G(n,{source:t?"typing":"effect"}),e&&t&&r&&eB(!0),r};s.useEffect(()=>{eP||eC||"combobox"===B||eL("",!1,!1)},[eP]),s.useEffect(()=>{I&&(eB(!1),ek(!1))},[I,eP]);let[eF,eH]=function(e=250){let t=s.useRef(null),i=s.useRef(null);return s.useEffect(()=>()=>{window.clearTimeout(i.current)},[]),[()=>t.current,function(r){(r||null===t.current)&&(t.current=r),window.clearTimeout(i.current),i.current=window.setTimeout(()=>{t.current=null},e)}]}(),eO=s.useRef(!1),eD=(0,m.zX)(e=>{x(_.filter(t=>t!==e),{type:"remove",values:[e]})}),ez=()=>[(0,c.bn)(ex.current),ew.current?.getPopupElement()];var eW=!!eM.root;let eZ=(0,m.zX)(e=>{if(eW)return;let t=e.target;t.shadowRoot&&e.composed&&(t=e.composedPath()[0]||t),e._ori_target&&(t=e._ori_target),eP&&!b(ez(),t)&&eB(!1)});s.useEffect(()=>(window.addEventListener("mousedown",eZ),()=>window.removeEventListener("mousedown",eZ)),[eZ]);let eN=s.useRef(!1),e$=()=>{eP&&!eN.current&&eB(!1,{cancelFun:()=>b(ez(),document.activeElement)})},ej=(e,...t)=>{let{target:i}=e,r=ew.current?.getPopupElement();r?.contains(i)&&eB&&eB(!0),ey?.(e,...t),eN.current=!0,R(()=>{eN.current=!1})},[,eG]=s.useState({});eM.root&&(i=e=>{eB(e)});let eV=s.useMemo(()=>({...e,notFoundContent:A,open:eP,triggerOpen:eP,id:r,showSearch:h,multiple:eC,toggleOpen:eB,showScrollBar:f,styles:o,classNames:a}),[e,A,eB,r,h,eC,eP,f,o,a]),eU=s.useMemo(()=>{let e=Y??q;return"function"==typeof e?e({searchValue:eT,open:eP,focused:eA,showSearch:h,loading:L}):e},[Y,q,eT,eP,eA,h,L]),{allowClear:eK,clearIcon:eX}=p(n,_,K,J,I,eT,B),eY=s.createElement(Q,{ref:eS}),eq=(0,u.W)(n,l,{[`${n}-focused`]:eA,[`${n}-multiple`]:eC,[`${n}-single`]:!eC,[`${n}-allow-clear`]:eK,[`${n}-show-arrow`]:null!=eU,[`${n}-disabled`]:I,[`${n}-loading`]:L,[`${n}-open`]:eP,[`${n}-customize-input`]:eR,[`${n}-show-search`]:h}),eJ=s.createElement(ee,et({},e_,{ref:ex,prefixCls:n,className:eq,focused:eA,prefix:X,suffix:eU,clearIcon:eX,multiple:eC,mode:B,displayValues:_,placeholder:P,searchValue:eT,activeValue:W,onSearch:eL,onSearchSubmit:e=>{e&&e.trim()&&G(e,{source:"submit"})},onInputBlur:()=>{eO.current=!1},onFocus:e=>{ek(!0),I||(ep.includes("focus")&&eB(!0),eg?.(e))},onBlur:e=>{ek(!1),eT&&("tags"===B?G(eT,{source:"submit"}):"multiple"===B&&G("",{source:"blur"})),e$(),I||ef?.(e)},onClearMouseDown:()=>{T?.(),ex.current?.focus(),x([],{type:"clear",values:_}),eL("",!1,!1)},onKeyDown:e=>{let t=eF(),{key:i}=e,r="Enter"===i;if(r&&("combobox"!==B&&e.preventDefault(),eP||eB(!0)),eH(!!eT),"Backspace"===i&&!t&&eC&&!eT&&_.length){let e=[..._],t=null;for(let i=e.length-1;i>=0;i-=1){let r=e[i];if(!r.disabled){e.splice(i,1),t=r;break}}t&&x(e,{type:"remove",values:[t]})}!eP||r&&eO.current||(r&&(eO.current=!0),eS.current?.onKeyDown(e)),eb?.(e)},onKeyUp:(e,...t)=>{eP&&eS.current?.onKeyUp(e,...t),"Enter"===e.key&&(eO.current=!1),em?.(e,...t)},onSelectorRemove:eD,tokenWithEnter:eI,onMouseDown:ej,components:eM}));return eJ=s.createElement(C,{ref:ew,disabled:I,prefixCls:n,visible:eP,popupElement:eY,animation:er,transitionName:en,popupStyle:el,popupClassName:eo,direction:y,popupMatchSelectWidth:ea,popupRender:es,popupAlign:eh,placement:ed,builtinPlacements:eu,getPopupContainer:ec,empty:S,onPopupVisibleChange:i,onPopupMouseEnter:function(){eG({})},onPopupMouseDown:ej,onPopupBlur:e$},eJ),s.createElement(g.Provider,{value:eV},s.createElement(M,{visible:eA&&!eP,values:_}),eJ)}),en=()=>null;en.isSelectOptGroup=!0;let el=()=>null;el.isSelectOption=!0;var eo=i(55668),ea=i(52074),es=i(48970),eh=i(86144),ed=i(56321);let eu=s.forwardRef(({height:e,offsetY:t,offsetX:i,children:r,prefixCls:n,onInnerResize:l,innerProps:o,rtl:a,extra:h},d)=>{let c={},p={display:"flex",flexDirection:"column"};return void 0!==t&&(c={height:e,position:"relative",overflow:"hidden"},p={...p,transform:`translateY(${t}px)`,[a?"marginRight":"marginLeft"]:-i,position:"absolute",left:0,right:0,top:0}),s.createElement("div",{style:c},s.createElement(eh.ZP,{onResize:({offsetHeight:e})=>{e&&l&&l()}},s.createElement("div",(0,es.Z)({style:p,className:(0,u.W)({[`${n}-holder-inner`]:n}),ref:d},o),r,h)))});function ec({children:e,setRef:t}){let i=s.useCallback(e=>{t(e)},[]);return s.cloneElement(e,{ref:i})}eu.displayName="Filler";var ep=i(18839);let eg="object"==typeof navigator&&/Firefox/i.test(navigator.userAgent),ef=(e,t,i,r)=>{let n=(0,s.useRef)(!1),l=(0,s.useRef)(null),o=(0,s.useRef)({top:e,bottom:t,left:i,right:r});return o.current.top=e,o.current.bottom=t,o.current.left=i,o.current.right=r,(e,t,i=!1)=>{let r=e?t<0&&o.current.left||t>0&&o.current.right:t<0&&o.current.top||t>0&&o.current.bottom;return i&&r?(clearTimeout(l.current),n.current=!1):(!r||n.current)&&(clearTimeout(l.current),n.current=!0,l.current=setTimeout(()=>{n.current=!1},50)),!n.current&&r}};class em{maps;id=0;diffRecords=new Map;constructor(){this.maps=Object.create(null)}set(e,t){this.diffRecords.set(e,this.maps[e]),this.maps[e]=t,this.id+=1}get(e){return this.maps[e]}resetRecord(){this.diffRecords.clear()}getRecord(){return this.diffRecords}}function eb(e){let t=parseFloat(e);return isNaN(t)?0:t}let ey=14/15;function ev(e){return Math.floor(e**.5)}function e_(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]-window[t?"scrollX":"scrollY"]}let eC=s.forwardRef((e,t)=>{let{prefixCls:i,rtl:r,scrollOffset:n,scrollRange:l,onStartMove:o,onStopMove:a,onScroll:h,horizontal:d,spinSize:c,containerSize:p,style:g,thumbStyle:f,showScrollBar:m}=e,[b,y]=s.useState(!1),[v,_]=s.useState(null),[C,x]=s.useState(null),w=!r,S=s.useRef(),A=s.useRef(),[k,M]=s.useState(m),T=s.useRef(),R=()=>{!0!==m&&!1!==m&&(clearTimeout(T.current),M(!0),T.current=setTimeout(()=>{M(!1)},3e3))},E=l-p||0,P=p-c||0,B=s.useMemo(()=>0===n||0===E?0:n/E*P,[n,E,P]),I=s.useRef({top:B,dragging:b,pageY:v,startTop:C});I.current={top:B,dragging:b,pageY:v,startTop:C};let L=e=>{y(!0),_(e_(e,d)),x(I.current.top),o(),e.stopPropagation(),e.preventDefault()};s.useEffect(()=>{let e=e=>{e.preventDefault()},t=S.current,i=A.current;return t.addEventListener("touchstart",e,{passive:!1}),i.addEventListener("touchstart",L,{passive:!1}),()=>{t.removeEventListener("touchstart",e),i.removeEventListener("touchstart",L)}},[]);let F=s.useRef();F.current=E;let H=s.useRef();H.current=P,s.useEffect(()=>{if(b){let e,t=t=>{let{dragging:i,pageY:r,startTop:n}=I.current;ep.Z.cancel(e);let l=S.current.getBoundingClientRect(),o=p/(d?l.width:l.height);if(i){let i=(e_(t,d)-r)*o,l=n;!w&&d?l-=i:l+=i;let a=F.current,s=H.current,u=Math.ceil((s?l/s:0)*a);u=Math.min(u=Math.max(u,0),a),e=(0,ep.Z)(()=>{h(u,d)})}},i=()=>{y(!1),a()};return window.addEventListener("mousemove",t,{passive:!0}),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("mouseup",i,{passive:!0}),window.addEventListener("touchend",i,{passive:!0}),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i),ep.Z.cancel(e)}}},[b]),s.useEffect(()=>(R(),()=>{clearTimeout(T.current)}),[n]),s.useImperativeHandle(t,()=>({delayHidden:R}));let O=`${i}-scrollbar`,D={position:"absolute",visibility:k?null:"hidden"},z={position:"absolute",borderRadius:99,background:"var(--rc-virtual-list-scrollbar-bg, rgba(0, 0, 0, 0.5))",cursor:"pointer",userSelect:"none"};return d?(Object.assign(D,{height:8,left:0,right:0,bottom:0}),Object.assign(z,{height:"100%",width:c,[w?"left":"right"]:B})):(Object.assign(D,{width:8,top:0,bottom:0,[w?"right":"left"]:0}),Object.assign(z,{width:"100%",height:c,top:B})),s.createElement("div",{ref:S,className:(0,u.W)(O,{[`${O}-horizontal`]:d,[`${O}-vertical`]:!d,[`${O}-visible`]:k}),style:{...D,...g},onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},onMouseMove:R},s.createElement("div",{ref:A,className:(0,u.W)(`${O}-thumb`,{[`${O}-thumb-moving`]:b}),style:{...z,...f},onMouseDown:L}))});function ex(e=0,t=0){let i=e/t*e;return isNaN(i)&&(i=0),Math.floor(i=Math.max(i,20))}let ew=[],eS={overflowY:"auto",overflowAnchor:"none"},eA=s.forwardRef(function(e,t){var i;let{prefixCls:r="rc-virtual-list",className:n,height:l,itemHeight:o,fullHeight:a=!0,style:h,data:d,children:c,itemKey:p,virtual:g,direction:f,scrollWidth:b,component:y="div",onScroll:v,onVirtualScroll:_,onVisibleChange:C,innerProps:x,extraRender:w,styles:S,showScrollBar:A="optional",...k}=e,M=s.useCallback(e=>"function"==typeof p?p(e):e?.[p],[p]),[T,R,E,P]=function(e,t,i){let[r,n]=s.useState(0),l=(0,s.useRef)(new Map),o=(0,s.useRef)(new em),a=(0,s.useRef)(0);function h(){a.current+=1}function d(e=!1){h();let t=()=>{let e=!1;l.current.forEach((t,i)=>{if(t&&t.offsetParent){let{offsetHeight:r}=t,{marginTop:n,marginBottom:l}=getComputedStyle(t),a=r+eb(n)+eb(l);o.current.get(i)!==a&&(o.current.set(i,a),e=!0)}}),e&&n(e=>e+1)};if(e)t();else{a.current+=1;let e=a.current;Promise.resolve().then(()=>{e===a.current&&t()})}}return(0,s.useEffect)(()=>h,[]),[function(t,i){let r=e(t),n=l.current.get(r);i?(l.current.set(r,i),d()):l.current.delete(r)},d,o.current,r]}(M,0,0),B=!!(!1!==g&&l&&o),I=s.useMemo(()=>Object.values(E.maps).reduce((e,t)=>e+t,0),[E.id,E.maps]),F=B&&d&&(Math.max(o*d.length,I)>l||!!b),H="rtl"===f,O=(0,u.W)(r,{[`${r}-rtl`]:H},n),D=d||ew,z=(0,s.useRef)(),W=(0,s.useRef)(),Z=(0,s.useRef)(),[N,$]=(0,s.useState)(0),[j,G]=(0,s.useState)(0),[V,U]=(0,s.useState)(!1),K=()=>{U(!0)},X=()=>{U(!1)};function Y(e){$(t=>{let i,r,n=(r="function"==typeof e?e(t):e,Number.isNaN(eT.current)||(r=Math.min(r,eT.current)),r=Math.max(r,0));return z.current.scrollTop=n,n})}let q=(0,s.useRef)({start:0,end:D.length}),J=(0,s.useRef)(),[Q]=function(e,t,i){let[r,n]=s.useState(e),[l,o]=s.useState(null);return s.useEffect(()=>{let i=function(e,t,i){let r,n,l=e.length,o=t.length;if(0===l&&0===o)return null;l<o?(r=e,n=t):(r=t,n=e);let a={__EMPTY_ITEM__:!0};function s(e){return void 0!==e?i(e):a}let h=null,d=1!==Math.abs(l-o);for(let e=0;e<n.length;e+=1){let t=s(r[e]);if(t!==s(n[e])){h=e,d=d||t!==s(n[e+1]);break}}return null===h?null:{index:h,multiple:d}}(r||[],e||[],t);i?.index!==void 0&&o(e[i.index]),n(e)},[e]),[l]}(D,M);J.current=Q;let{scrollHeight:ee,start:et,end:ei,offset:er}=s.useMemo(()=>{let e,t,i;if(!B)return{scrollHeight:void 0,start:0,end:D.length-1,offset:void 0};if(!F)return{scrollHeight:W.current?.offsetHeight||0,start:0,end:D.length-1,offset:void 0};let r=0,n=D.length;for(let a=0;a<n;a+=1){let n=M(D[a]),s=E.get(n),h=r+(void 0===s?o:s);h>=N&&void 0===e&&(e=a,t=r),h>N+l&&void 0===i&&(i=a),r=h}return void 0===e&&(e=0,t=0,i=Math.ceil(l/o)),void 0===i&&(i=D.length-1),{scrollHeight:r,start:e,end:i=Math.min(i+1,D.length-1),offset:t}},[F,B,N,D,P,l]);q.current.start=et,q.current.end=ei,s.useLayoutEffect(()=>{let e=E.getRecord();if(1===e.size){let t=Array.from(e.keys())[0],i=e.get(t),r=D[et];if(r&&void 0===i&&M(r)===t){let e=E.get(t)-o;Y(t=>t+e)}}E.resetRecord()},[ee]);let[en,el]=s.useState({width:0,height:l}),eo=(0,s.useRef)(),ea=(0,s.useRef)(),eA=s.useMemo(()=>ex(en.width,b),[en.width,b]),ek=s.useMemo(()=>ex(en.height,ee),[en.height,ee]),eM=ee-l,eT=(0,s.useRef)(eM);eT.current=eM;let eR=N<=0,eE=N>=eM,eP=j<=0,eB=j>=b,eI=ef(eR,eE,eP,eB),eL=()=>({x:H?-j:j,y:N}),eF=(0,s.useRef)(eL()),eH=(0,m.zX)(e=>{if(_){let t={...eL(),...e};(eF.current.x!==t.x||eF.current.y!==t.y)&&(_(t),eF.current=t)}});function eO(e,t){t?((0,ed.flushSync)(()=>{G(e)}),eH()):Y(e)}let eD=e=>{let t=e,i=b?b-en.width:0;return Math.min(t=Math.max(t,0),i)},[ez,eW]=function(e,t,i,r,n,l,o){let a=(0,s.useRef)(0),h=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useRef)(!1),c=ef(t,i,r,n),p=(0,s.useRef)(null),g=(0,s.useRef)(null);return[function(t){if(!e)return;ep.Z.cancel(g.current),g.current=(0,ep.Z)(()=>{p.current=null},2);let{deltaX:i,deltaY:r,shiftKey:n}=t,s=i,f=r;("sx"===p.current||!p.current&&n&&r&&!i)&&(s=r,f=0,p.current="sx");let m=Math.abs(s),b=Math.abs(f);if(null===p.current&&(p.current=l&&m>b?"x":"y"),"y"===p.current)!function(e,t){if(ep.Z.cancel(h.current),!c(!1,t))e._virtualHandled||(e._virtualHandled=!0,a.current+=t,d.current=t,eg||e.preventDefault(),h.current=(0,ep.Z)(()=>{let e=u.current?10:1;o(a.current*e,!1),a.current=0}))}(t,f);else o(s,!0),eg||t.preventDefault()},function(t){e&&(u.current=t.detail===d.current)}]}(B,eR,eE,eP,eB,!!b,(0,m.zX)((e,t)=>{t?((0,ed.flushSync)(()=>{G(t=>eD(t+(H?-e:e)))}),eH()):Y(t=>t+e)}));!function(e,t,i){let r,n=(0,s.useRef)(!1),l=(0,s.useRef)(0),o=(0,s.useRef)(0),a=(0,s.useRef)(null),h=(0,s.useRef)(null),d=e=>{if(n.current){let t=Math.ceil(e.touches[0].pageX),r=Math.ceil(e.touches[0].pageY),n=l.current-t,a=o.current-r,s=Math.abs(n)>Math.abs(a);s?l.current=t:o.current=r;let d=i(s,s?n:a,!1,e);d&&e.preventDefault(),clearInterval(h.current),d&&(h.current=setInterval(()=>{s?n*=ey:a*=ey;let e=Math.floor(s?n:a);(!i(s,e,!0)||.1>=Math.abs(e))&&clearInterval(h.current)},16))}},u=()=>{n.current=!1,r()},c=e=>{r(),1!==e.touches.length||n.current||(n.current=!0,l.current=Math.ceil(e.touches[0].pageX),o.current=Math.ceil(e.touches[0].pageY),a.current=e.target,a.current.addEventListener("touchmove",d,{passive:!1}),a.current.addEventListener("touchend",u,{passive:!0}))};r=()=>{a.current&&(a.current.removeEventListener("touchmove",d),a.current.removeEventListener("touchend",u))},(0,L.Z)(()=>(e&&t.current.addEventListener("touchstart",c,{passive:!0}),()=>{t.current?.removeEventListener("touchstart",c),r(),clearInterval(h.current)}),[e])}(B,z,(e,t,i,r)=>!eI(e,t,i)&&(!r||!r._virtualHandled)&&(r&&(r._virtualHandled=!0),ez({preventDefault(){},deltaX:e?t:0,deltaY:e?0:t}),!0)),i=e=>{Y(t=>t+e)},s.useEffect(()=>{let e=z.current;if(F&&e){let t,r,n=!1,l=()=>{ep.Z.cancel(t)},o=()=>{l(),t=(0,ep.Z)(()=>{i(r),o()})},a=()=>{n=!1,l()},s=e=>{!e.target.draggable&&0===e.button&&(e._virtualHandled||(e._virtualHandled=!0,n=!0))},h=t=>{if(n){let i=e_(t,!1),{top:n,bottom:a}=e.getBoundingClientRect();i<=n?(r=-ev(n-i),o()):i>=a?(r=ev(i-a),o()):l()}};return e.addEventListener("mousedown",s),e.ownerDocument.addEventListener("mouseup",a),e.ownerDocument.addEventListener("mousemove",h),e.ownerDocument.addEventListener("dragend",a),()=>{e.removeEventListener("mousedown",s),e.ownerDocument.removeEventListener("mouseup",a),e.ownerDocument.removeEventListener("mousemove",h),e.ownerDocument.removeEventListener("dragend",a),l()}}},[F]),(0,L.Z)(()=>{function e(e){let t=eR&&e.detail<0,i=eE&&e.detail>0;!B||t||i||e.preventDefault()}let t=z.current;return t.addEventListener("wheel",ez,{passive:!1}),t.addEventListener("DOMMouseScroll",eW,{passive:!0}),t.addEventListener("MozMousePixelScroll",e,{passive:!1}),()=>{t.removeEventListener("wheel",ez),t.removeEventListener("DOMMouseScroll",eW),t.removeEventListener("MozMousePixelScroll",e)}},[B,eR,eE]),(0,L.Z)(()=>{if(b){let e=eD(j);G(e),eH({x:e})}},[en.width,b]);let eZ=()=>{eo.current?.delayHidden(),ea.current?.delayHidden()},eN=function(e,t,i,r,n,l,o,a){let h=s.useRef(),[d,u]=s.useState(null);return(0,L.Z)(()=>{if(d&&d.times<10){if(!e.current)return void u(e=>({...e}));l();let{targetAlign:a,originAlign:s,index:h,offset:c}=d,p=e.current.clientHeight,g=!1,f=a,m=null;if(p){let l=a||s,u=0,b=0,y=0,v=Math.min(t.length-1,h);for(let e=0;e<=v;e+=1){let l=n(t[e]);b=u;let o=i.get(l);u=y=b+(void 0===o?r:o)}let _="top"===l?c:p-c;for(let e=v;e>=0;e-=1){let r=n(t[e]),l=i.get(r);if(void 0===l){g=!0;break}if((_-=l)<=0)break}switch(l){case"top":m=b-c;break;case"bottom":m=y-p+c;break;default:{let{scrollTop:t}=e.current;b<t?f="top":y>t+p&&(f="bottom")}}null!==m&&o(m),m!==d.lastTop&&(g=!0)}g&&u({...d,times:d.times+1,targetAlign:f,lastTop:m})}},[d,e.current]),e=>{if(null==e)return void a();if(ep.Z.cancel(h.current),"number"==typeof e)o(e);else if(e&&"object"==typeof e){let i,{align:r}=e;"index"in e?{index:i}=e:i=t.findIndex(t=>n(t)===e.key);let{offset:l=0}=e;u({times:0,index:i,offset:l,originAlign:r})}}}(z,D,E,o,M,()=>R(!0),Y,eZ);s.useImperativeHandle(t,()=>({nativeElement:Z.current,getScrollInfo:eL,scrollTo:e=>{e&&"object"==typeof e&&("left"in e||"top"in e)?(void 0!==e.left&&G(eD(e.left)),eN(e.top)):eN(e)}})),(0,L.Z)(()=>{C&&C(D.slice(et,ei+1),D)},[et,ei,D]);let e$=function(e,t,i,r){let[n,l]=s.useMemo(()=>[new Map,[]],[e,i.id,r]);return(o,a=o)=>{let s=n.get(o),h=n.get(a);if(void 0===s||void 0===h){let d=e.length;for(let u=l.length;u<d;u+=1){let d=t(e[u]);n.set(d,u);let c=i.get(d)??r;if(l[u]=(l[u-1]||0)+c,d===o&&(s=u),d===a&&(h=u),void 0!==s&&void 0!==h)break}}return{top:l[s-1]||0,bottom:l[h]}}}(D,M,E,o),ej=w?.({start:et,end:ei,virtual:F,offsetX:j,offsetY:er,rtl:H,getSize:e$}),eG=function(e,t,i,r,n,l,o,{getKey:a}){return e.slice(t,i+1).map((e,i)=>{let h=o(e,t+i,{style:{width:r},offsetX:n}),d=a(e);return s.createElement(ec,{key:d,setRef:t=>l(e,t)},h)})}(D,et,ei,b,j,T,c,{getKey:M}),eV=null;l&&(eV={[a?"height":"maxHeight"]:l,...eS},B&&(eV.overflowY="hidden",b&&(eV.overflowX="hidden"),V&&(eV.pointerEvents="none")));let eU={};return H&&(eU.dir="rtl"),s.createElement("div",(0,es.Z)({ref:Z,style:{...h,position:"relative"},className:O},eU,k),s.createElement(eh.ZP,{onResize:e=>{el({width:e.offsetWidth,height:e.offsetHeight})}},s.createElement(y,{className:`${r}-holder`,style:eV,ref:z,onScroll:function(e){let{scrollTop:t}=e.currentTarget;t!==N&&Y(t),v?.(e),eH()},onMouseEnter:eZ},s.createElement(eu,{prefixCls:r,height:ee,offsetX:j,offsetY:er,scrollWidth:b,onInnerResize:R,ref:W,innerProps:x,rtl:H,extra:ej},eG))),F&&ee>l&&s.createElement(eC,{ref:eo,prefixCls:r,scrollOffset:N,scrollRange:ee,rtl:H,onScroll:eO,onStartMove:K,onStopMove:X,spinSize:ek,containerSize:en.height,style:S?.verticalScrollBar,thumbStyle:S?.verticalScrollBarThumb,showScrollBar:A}),F&&b>en.width&&s.createElement(eC,{ref:ea,prefixCls:r,scrollOffset:j,scrollRange:b,rtl:H,onScroll:eO,onStartMove:K,onStopMove:X,spinSize:eA,containerSize:en.width,horizontal:!0,style:S?.horizontalScrollBar,thumbStyle:S?.horizontalScrollBarThumb,showScrollBar:A}))});function ek(){return(ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function eM(e){return"string"==typeof e||"number"==typeof e}eA.displayName="List";let eT=s.forwardRef((e,t)=>{let{prefixCls:i,id:r,open:n,multiple:l,mode:o,searchValue:a,toggleOpen:h,notFoundContent:d,onPopupScroll:c,showScrollBar:p}=f(),{maxCount:g,flattenOptions:m,onActiveValue:b,defaultActiveFirstOption:y,onSelect:v,menuItemSelectedIcon:_,rawValues:C,fieldNames:x,virtual:S,direction:A,listHeight:k,listItemHeight:M,optionRender:T,classNames:R,styles:E}=s.useContext(D),B=`${i}-item`,I=(0,eo.Z)(()=>m,[n,m],(e,t)=>t[0]&&e[1]!==t[1]),L=s.useRef(null),F=s.useMemo(()=>l&&w(g)&&C?.size>=g,[l,g,C?.size]),H=e=>{e.preventDefault()},O=e=>{L.current?.scrollTo("number"==typeof e?{index:e}:e)},z=s.useCallback(e=>"combobox"!==o&&C.has(e),[o,[...C].toString(),C.size]),W=(e,t=1)=>{let i=I.length;for(let r=0;r<i;r+=1){let n=(e+r*t+i)%i,{group:l,data:o}=I[n]||{};if(!l&&!o?.disabled&&(z(o.value)||!F))return n}return -1},[Z,N]=s.useState(()=>W(0)),$=(e,t=!1)=>{N(e);let i={source:t?"keyboard":"mouse"},r=I[e];if(!r)return void b(null,-1,i);b(r.value,e,i)};(0,s.useEffect)(()=>{$(!1!==y?W(0):-1)},[I.length,a]);let j=s.useCallback(e=>"combobox"===o?String(e).toLowerCase()===a.toLowerCase():C.has(e),[o,a,[...C].toString(),C.size]);(0,s.useEffect)(()=>{let e;if(!l&&n&&1===C.size){let t=Array.from(C)[0],i=I.findIndex(({data:e})=>a?String(e.value).startsWith(a):e.value===t);-1!==i&&($(i),e=setTimeout(()=>{O(i)}))}return n&&L.current?.scrollTo(void 0),()=>clearTimeout(e)},[n,a]);let V=e=>{void 0!==e&&v(e,{selected:!C.has(e)}),l||h(!1)};if(s.useImperativeHandle(t,()=>({onKeyDown:e=>{let{which:t,ctrlKey:i}=e;switch(t){case q.Z.N:case q.Z.P:case q.Z.UP:case q.Z.DOWN:{let e=0;if(t===q.Z.UP?e=-1:t===q.Z.DOWN?e=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&i&&(t===q.Z.N?e=1:t===q.Z.P&&(e=-1)),0!==e){let t=W(Z+e,e);O(t),$(t,!0)}break}case q.Z.TAB:case q.Z.ENTER:{let t=I[Z];if(!t||t.data.disabled)return V(void 0);!F||C.has(t.value)?V(t.value):V(void 0),n&&e.preventDefault();break}case q.Z.ESC:h(!1),n&&e.stopPropagation()}},onKeyUp:()=>{},scrollTo:e=>{O(e)}})),0===I.length)return s.createElement("div",{role:"listbox",id:`${r}_list`,className:`${B}-empty`,onMouseDown:H},d);let U=Object.keys(x).map(e=>x[e]),K=e=>e.label;function X(e,t){let{group:i}=e;return{role:i?"presentation":"option",id:`${r}_list_${t}`}}let Y=e=>{let t=I[e];if(!t)return null;let i=t.data||{},{value:r}=i,{group:n}=t,l=(0,P.Z)(i,!0),o=K(t);return t?s.createElement("div",ek({"aria-label":"string"!=typeof o||n?null:o},l,{key:e},X(t,e),{"aria-selected":j(r)}),r):null},J={role:"listbox",id:`${r}_list`};return s.createElement(s.Fragment,null,S&&s.createElement("div",ek({},J,{style:{height:0,width:0,overflow:"hidden"}}),Y(Z-1),Y(Z),Y(Z+1)),s.createElement(eA,{itemKey:"key",ref:L,data:I,height:k,itemHeight:M,fullHeight:!1,onMouseDown:H,onScroll:c,virtual:S,direction:A,innerProps:S?null:J,showScrollBar:p,className:R?.popup?.list,style:E?.popup?.list},(e,t)=>{let{group:i,groupOption:r,data:n,label:l,value:o}=e,{key:a}=n;if(i){let e=n.title??(eM(l)?l.toString():void 0);return s.createElement("div",{className:(0,u.W)(B,`${B}-group`,n.className),title:e},void 0!==l?l:a)}let{disabled:h,title:d,children:c,style:p,className:g,...f}=n,m=(0,ea.Z)(f,U),b=z(o),y=h||!b&&F,v=`${B}-option`,C=(0,u.W)(B,v,g,R?.popup?.listItem,{[`${v}-grouped`]:r,[`${v}-active`]:Z===t&&!y,[`${v}-disabled`]:y,[`${v}-selected`]:b}),x=K(e),w=!_||"function"==typeof _||b,A="number"==typeof x?x:x||o,k=eM(A)?A.toString():void 0;return void 0!==d&&(k=d),s.createElement("div",ek({},(0,P.Z)(m),S?{}:X(e,t),{"aria-selected":S?void 0:j(o),className:C,title:k,onMouseMove:()=>{Z===t||y||$(t)},onClick:()=>{y||V(o)},style:{...E?.popup?.listItem,...p}}),s.createElement("div",{className:`${v}-content`},"function"==typeof T?T(e,{index:t}):A),s.isValidElement(_)||b,w&&s.createElement(G,{className:`${B}-option-state`,customizeIcon:_,customizeIconProps:{value:o,disabled:y,isSelected:b}},b?"":null))}))}),eR=(e,t)=>{let i=s.useRef({values:new Map,options:new Map});return[s.useMemo(()=>{let{values:r,options:n}=i.current,l=e.map(e=>void 0===e.label?{...e,label:r.get(e.value)?.label}:e),o=new Map,a=new Map;return l.forEach(e=>{o.set(e.value,e),a.set(e.value,t.get(e.value)||n.get(e.value))}),i.current.values=o,i.current.options=a,l},[e,t]),s.useCallback(e=>t.get(e)||i.current.options.get(e),[t])]};function eE(e,t){return z(e).join("").toUpperCase().includes(t)}let eP=(e,t,i,r,n)=>s.useMemo(()=>{if(!i||!1===r)return e;let{options:l,label:o,value:a}=t,s=[],h="function"==typeof r,d=i.toUpperCase(),u=h?r:(e,t)=>n&&n.length?n.some(e=>eE(t[e],d)):t[l]?eE(t["children"!==o?o:"label"],d):eE(t[a],d),c=h?e=>A(e):e=>e;return e.forEach(e=>{if(e[l]){if(u(i,c(e)))s.push(e);else{let t=e[l].filter(e=>u(i,c(e)));t.length&&s.push({...e,[l]:t})}return}u(i,c(e))&&s.push(e)}),s},[e,r,n,i,t]);var eB=i(32162),eI=i(48071);let eL=(e,t,i,r,n)=>s.useMemo(()=>{let l=e;e||(l=function e(t,i=!1){return(0,eI.Z)(t).map((t,r)=>{if(!s.isValidElement(t)||!t.type)return null;let{type:{isSelectOptGroup:n},key:l,props:{children:o,...a}}=t;if(i||!n){let{key:e,props:{children:i,value:r,...n}}=t;return{key:e,value:void 0!==r?r:e,children:i,...n}}return{key:`__RC_SELECT_GRP__${null===l?r:l}__`,label:l,...a,options:e(o)}}).filter(e=>e)}(t));let o=new Map,a=new Map,h=(e,t,i)=>{i&&"string"==typeof i&&e.set(t[i],t)},d=(e,t=!1)=>{for(let l=0;l<e.length;l+=1){let s=e[l];!s[i.options]||t?(o.set(s[i.value],s),h(a,s,i.label),r.forEach(e=>{h(a,s,e)}),h(a,s,n)):d(s[i.options],!0)}};return d(l),{options:l,valueOptions:o,labelOptions:a}},[e,t,i,r,n]);function eF(e){let t=s.useRef();return t.current=e,s.useCallback((...e)=>t.current(...e),[])}function eH(){return(eH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let eO=["inputValue"],eD=s.forwardRef((e,t)=>{let{id:i,mode:r,prefixCls:n="rc-select",backfill:l,fieldNames:o,showSearch:a,searchValue:d,onSearch:u,autoClearSearchValue:c,filterOption:p,optionFilterProp:g,filterSort:f,onSelect:m,onDeselect:b,onActive:y,popupMatchSelectWidth:v=!0,optionLabelProp:_,options:C,optionRender:w,children:k,defaultActiveFirstOption:M,menuItemSelectedIcon:T,virtual:R,direction:E,listHeight:P=200,listItemHeight:B=20,labelRender:I,value:L,defaultValue:F,labelInValue:H,onChange:O,maxCount:W,classNames:Z,styles:N,...$}=e,[j,G]=function(e,t,i){let{filterOption:r,searchValue:n,optionFilterProp:l,filterSort:o,onSearch:a,autoClearSearchValue:h}=t;return s.useMemo(()=>{let t="object"==typeof e,s={filterOption:r,searchValue:n,optionFilterProp:l,filterSort:o,onSearch:a,autoClearSearchValue:h,...t?e:{}};return[!!t||"combobox"===i||"tags"===i||"multiple"===i&&void 0===e||e,s]},[i,e,r,n,l,o,a,h])}(a,{searchValue:d,onSearch:u,autoClearSearchValue:c,filterOption:p,optionFilterProp:g,filterSort:f},r),{filterOption:V,searchValue:U,optionFilterProp:K,filterSort:X,onSearch:Y,autoClearSearchValue:q=!0}=G,J=s.useMemo(()=>K?Array.isArray(K)?K:[K]:[],[K]),Q=(0,eB.Z)(i),ee=ei(r),et=!!(!C&&k),en=s.useMemo(()=>(void 0!==V||"combobox"!==r)&&V,[V,r]),el=s.useMemo(()=>S(o,et),[JSON.stringify(o),et]),[eo,ea]=(0,h.Z)("",U),es=eo||"",eh=eL(C,k,el,J,_),{valueOptions:ed,labelOptions:eu,options:ec}=eh,ep=s.useCallback(e=>z(e).map(e=>{let t,i,r,n;e&&"object"==typeof e?(i=e.label,t=e.value):t=e;let l=ed.get(t);return l&&(void 0===i&&(i=l?.[_||el.label]),r=l?.disabled,n=l?.title),{label:i,value:t,key:t,disabled:r,title:n}}),[el,_,ed]),[eg,ef]=(0,h.Z)(F,L),[em,eb]=eR(s.useMemo(()=>{var e;let t=ep(ee&&null===eg?[]:eg);return"combobox"!==r||(e=t[0]?.value)||0===e?t:[]},[eg,ep,r,ee]),ed),ey=s.useMemo(()=>{if(!r&&1===em.length){let e=em[0];if(null===e.value&&(null===e.label||void 0===e.label))return[]}return em.map(e=>({...e,label:("function"==typeof I?I(e):e.label)??e.value}))},[r,em,I]),ev=s.useMemo(()=>new Set(em.map(e=>e.value)),[em]);s.useEffect(()=>{if("combobox"===r){let e=em[0]?.value;ea(null!=e?String(e):"")}},[em]);let e_=eF((e,t)=>({[el.value]:e,[el.label]:t??e})),eC=eP(s.useMemo(()=>{if("tags"!==r)return ec;let e=[...ec],t=e=>ed.has(e);return[...em].sort((e,t)=>e.value<t.value?-1:1).forEach(i=>{let r=i.value;t(r)||e.push(e_(r,i.label))}),e},[e_,ec,ed,em,r]),el,es,en,J),ex=s.useMemo(()=>{let e=e=>J.length?J.some(t=>e?.[t]===es):e?.value===es;return"tags"!==r||!es||eC.some(t=>e(t))||eC.some(e=>e[el.value]===es)?eC:[e_(es),...eC]},[e_,J,r,eC,es,el]),ew=e=>[...e].sort((e,t)=>X(e,t,{searchValue:es})).map(e=>Array.isArray(e.options)?{...e,options:e.options.length>0?ew(e.options):e.options}:e),eS=s.useMemo(()=>X?ew(ex):ex,[ex,X,es]),eA=s.useMemo(()=>(function(e,{fieldNames:t,childrenAsData:i}={}){let r=[],{label:n,value:l,options:o,groupLabel:a}=S(t,!1);return!function e(t,s){Array.isArray(t)&&t.forEach(t=>{if(!s&&o in t){let n=t[a];void 0===n&&i&&(n=t.label),r.push({key:x(t,r.length),group:!0,data:t,label:n}),e(t[o],!0)}else{let e=t[l];r.push({key:x(t,r.length),groupOption:s,data:t,label:t[n],value:e})}})}(e,!1),r})(eS,{fieldNames:el,childrenAsData:et}),[eS,el,et]),ek=e=>{let t=ep(e);if(ef(t),O&&(t.length!==em.length||t.some((e,t)=>em[t]?.value!==e?.value))){let e=H?t.map(({label:e,value:t})=>({label:e,value:t})):t.map(e=>e.value),i=t.map(e=>A(eb(e.value)));O(ee?e:e[0],ee?i:i[0])}},[eM,eE]=s.useState(null),[eI,eD]=s.useState(0),ez=void 0!==M?M:"combobox"!==r,eW=s.useRef(),eZ=s.useCallback((e,t,{source:i="keyboard"}={})=>{eD(t),l&&"combobox"===r&&null!==e&&"keyboard"===i&&eE(String(e));let n=Promise.resolve().then(()=>{eW.current===n&&y?.(e)});eW.current=n},[l,r,y]),eN=(e,t,i)=>{let r=()=>{let t=eb(e);return[H?{label:t?.[el.label],value:e}:e,A(t)]};if(t&&m){let[e,t]=r();m(e,t)}else if(!t&&b&&"clear"!==i){let[e,t]=r();b(e,t)}},e$=eF((e,t)=>{let i,n=!ee||t.selected;ek(n?ee?[...em,e]:[e]:em.filter(t=>t.value!==e)),eN(e,n),"combobox"===r?eE(""):(!ei||q)&&(ea(""),eE(""))}),ej=s.useMemo(()=>{let e=!1!==R&&!1!==v;return{...eh,flattenOptions:eA,onActiveValue:eZ,defaultActiveFirstOption:ez,onSelect:e$,menuItemSelectedIcon:T,rawValues:ev,fieldNames:el,virtual:e,direction:E,listHeight:P,listItemHeight:B,childrenAsData:et,maxCount:W,optionRender:w,classNames:Z,styles:N}},[W,eh,eA,eZ,ez,e$,T,ev,el,R,v,E,P,B,et,w,Z,N]);return s.createElement(D.Provider,{value:ej},s.createElement(er,eH({},$,{id:Q,prefixCls:n,ref:t,omitDomProps:eO,mode:r,classNames:Z,styles:N,displayValues:ey,onDisplayValuesChange:(e,t)=>{ek(e);let{type:i,values:r}=t;("remove"===i||"clear"===i)&&r.forEach(e=>{eN(e.value,!1,i)})},maxCount:W,direction:E,showSearch:j,searchValue:es,onSearch:(e,t)=>{if(ea(e),eE(null),"submit"===t.source){let t=(e||"").trim();t&&(ek(Array.from(new Set([...ev,t]))),eN(t,!0),ea(""));return}"blur"!==t.source&&("combobox"===r&&ek(e),Y?.(e))},autoClearSearchValue:q,onSearchSplit:e=>{let t=e;"tags"!==r&&(t=e.map(e=>{let t=eu.get(e);return t?.value}).filter(e=>void 0!==e));let i=Array.from(new Set([...ev,...t]));ek(i),i.forEach(e=>{eN(e,!0)})},popupMatchSelectWidth:v,OptionList:eT,emptyOptions:!eA.length,activeValue:eM,activeDescendantId:`${Q}_list_${eI}`})))});eD.Option=el,eD.OptGroup=en;var ez=i(27338),eW=i(35865);let eZ=s.createContext(void 0),eN={Modal:100,Drawer:100,Popover:100,Popconfirm:100,Tooltip:100,Tour:100,FloatButton:100},e$={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1},ej=e=>e in eN,eG=(e,t)=>{let i,[,r]=(0,eW.ZP)(),n=s.useContext(eZ),l=ej(e);if(void 0!==t)i=[t,t];else{let o=n??0;l?o+=(n?0:r.zIndexPopupBase)+eN[e]:o+=e$[e],i=[void 0===n?t:o,o]}return i};var eV=i(99833),eU=i(55839),eK=i(33393);function eX(){}let{resetWarned:eY}=m.Kp,eq=s.createContext({}),eJ=()=>{let e=()=>{};return e.deprecated=eX,e},eQ=(0,s.createContext)(void 0);var e0=i(68125);e0.Z.Modal;let e1=[],e2=()=>e1.reduce((e,t)=>({...e,...t}),e0.Z.Modal);var e3=i(42562);let e4=e=>{let{locale:t={},children:i,_ANT_MARK__:r}=e;s.useEffect(()=>(function(e){if(e){let t={...e};return e1.push(t),e2(),()=>{e1=e1.filter(e=>e!==t),e2()}}({...e0.Z.Modal})})(t?.Modal),[t]);let n=s.useMemo(()=>({...t,exist:!0}),[t]);return s.createElement(e3.Z.Provider,{value:n},i)};var e5=i(79633),e6=i(70723),e8=i(76353),e7=i(27502),e9=i(391);let te=({children:e})=>{let{getPrefixCls:t}=s.useContext(e9.E_),i=t();return s.isValidElement(e)?s.createElement(e7.ZP,{visible:!0,motionName:`${i}-fade`,motionAppear:!0,motionEnter:!0,motionLeave:!1,removeOnLeave:!1},({style:t,className:i})=>{let{className:r,style:n}=e.props,l={...n,...t};return s.cloneElement(e,{className:(0,u.W)(r,i),style:l})}):e},tt=[null,null],ti=({children:e})=>s.createElement(y._v,{postTriggerProps:e=>{let t="function"==typeof e.popup?e.popup():e.popup,{id:i,builtinPlacements:r}=e,n=function(e){if(tt[0]!==e){let t={};Object.keys(e).forEach(i=>{t[i]={...e[i],dynamicInset:!1}}),tt[0]=e,tt[1]=t}return tt[1]}(r);return{...e,getPopupContainer:null,arrow:!1,popup:s.createElement(te,{key:i},t),builtinPlacements:n}}},e);var tr=i(4147),tn=i(35933),tl=i(64246);let to=s.createContext(!0);function ta(e){let t=s.useContext(to),{children:i}=e,[,r]=(0,eW.ZP)(),{motion:n}=r,l=s.useRef(!1);return(l.current||(l.current=t!==n),l.current)?s.createElement(to.Provider,{value:n},s.createElement(e7.zt,{motion:n},i)):i}let ts=()=>null;var th=i(83447);let td=(e,t)=>{let[i,r]=(0,eW.ZP)();return(0,eU.xy)({theme:i,token:r,hashId:"",path:["ant-design-icons",e],nonce:()=>t?.nonce,layer:{name:"antd"}},()=>(0,th.JT)(e))},tu=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],tc=e=>{let{children:t,csp:i,autoInsertSpaceInButton:r,alert:n,affix:l,anchor:o,form:a,locale:h,componentSize:d,direction:u,space:c,splitter:p,virtual:g,dropdownMatchSelectWidth:f,popupMatchSelectWidth:b,popupOverflow:y,legacyLocale:v,parentContext:_,iconPrefixCls:C,theme:x,componentDisabled:w,segmented:S,statistic:A,spin:k,calendar:M,carousel:T,cascader:R,collapse:E,typography:P,checkbox:B,descriptions:I,divider:L,drawer:F,skeleton:H,steps:O,image:D,layout:z,list:W,mentions:Z,modal:N,progress:$,result:j,slider:G,breadcrumb:V,masonry:U,menu:K,pagination:X,input:Y,textArea:q,otp:J,empty:Q,badge:ee,radio:et,rate:ei,ribbon:er,switch:en,transfer:el,avatar:ea,message:es,tag:eh,table:ed,card:eu,cardMeta:ec,tabs:ep,timeline:eg,timePicker:ef,upload:em,notification:eb,tree:ey,colorPicker:ev,datePicker:e_,rangePicker:eC,flex:ex,wave:ew,dropdown:eS,warning:eA,tour:ek,tooltip:eM,popover:eT,popconfirm:eR,qrcode:eE,floatButton:eP,floatButtonGroup:eB,variant:eI,inputNumber:eL,treeSelect:eF,watermark:eH}=e,eO=s.useCallback((t,i)=>{let{prefixCls:r}=e;if(i)return i;let n=r||_.getPrefixCls("");return t?`${n}-${t}`:n},[_.getPrefixCls,e.prefixCls]),eD=C||_.iconPrefixCls||e9.oR,ez=i||_.csp;td(eD,ez);let eW=function(e,t,i){eJ("ConfigProvider");let r=e||{},n=!1!==r.inherit&&t?t:{...e6.u_,hashed:t?.hashed??e6.u_.hashed,cssVar:t?.cssVar},l=(0,s.useId)();return(0,eo.Z)(()=>{if(!e)return t;let o={...n.components};Object.keys(e.components||{}).forEach(t=>{o[t]={...o[t],...e.components[t]}});let a=`css-var-${l.replace(/:/g,"")}`,s={prefix:i?.prefixCls,...n.cssVar,...r.cssVar,key:r.cssVar?.key||a};return{...n,...r,token:{...n.token,...r.token},components:o,cssVar:s}},[r,n],(e,t)=>e.some((e,i)=>{let r=t[i];return!(0,tl.Z)(e,r,!0)}))}(x,_.theme,{prefixCls:eO("")}),eZ={csp:ez,autoInsertSpaceInButton:r,alert:n,affix:l,anchor:o,locale:h||v,direction:u,space:c,splitter:p,virtual:g,popupMatchSelectWidth:b??f,popupOverflow:y,getPrefixCls:eO,iconPrefixCls:eD,theme:eW,segmented:S,statistic:A,spin:k,calendar:M,carousel:T,cascader:R,collapse:E,typography:P,checkbox:B,descriptions:I,divider:L,drawer:F,skeleton:H,steps:O,image:D,input:Y,textArea:q,otp:J,layout:z,list:W,mentions:Z,modal:N,progress:$,result:j,slider:G,breadcrumb:V,masonry:U,menu:K,pagination:X,empty:Q,badge:ee,radio:et,rate:ei,ribbon:er,switch:en,transfer:el,avatar:ea,message:es,tag:eh,table:ed,card:eu,cardMeta:ec,tabs:ep,timeline:eg,timePicker:ef,upload:em,notification:eb,tree:ey,colorPicker:ev,datePicker:e_,rangePicker:eC,flex:ex,wave:ew,dropdown:eS,warning:eA,tour:ek,tooltip:eM,popover:eT,popconfirm:eR,qrcode:eE,floatButton:eP,floatButtonGroup:eB,variant:eI,inputNumber:eL,treeSelect:eF,watermark:eH},eN={..._};Object.keys(eZ).forEach(e=>{void 0!==eZ[e]&&(eN[e]=eZ[e])}),tu.forEach(t=>{let i=e[t];i&&(eN[t]=i)}),void 0!==r&&(eN.button={autoInsertSpace:r,...eN.button});let e$=(0,eo.Z)(()=>eN,eN,(e,t)=>{let i=Object.keys(e),r=Object.keys(t);return i.length!==r.length||i.some(i=>e[i]!==t[i])}),{layer:ej}=s.useContext(eU.uP),eG=s.useMemo(()=>({prefixCls:eD,csp:ez,layer:ej?"antd":void 0}),[eD,ez,ej]),eV=s.createElement(s.Fragment,null,s.createElement(ts,{dropdownMatchSelectWidth:f}),t),eX=s.useMemo(()=>(0,m.TS)(e0.Z.Form?.defaultValidateMessages||{},e$.locale?.Form?.defaultValidateMessages||{},e$.form?.validateMessages||{},a?.validateMessages||{}),[e$,a?.validateMessages]);Object.keys(eX).length>0&&(eV=s.createElement(eQ.Provider,{value:eX},eV)),h&&(eV=s.createElement(e4,{locale:h,_ANT_MARK__:"internalMark"},eV)),(eD||ez)&&(eV=s.createElement(eK.Z.Provider,{value:eG},eV)),d&&(eV=s.createElement(tn.q,{size:d},eV)),eV=s.createElement(ta,null,eV),eM?.unique&&(eV=s.createElement(ti,null,eV));let eY=s.useMemo(()=>{let{algorithm:e,token:t,components:i,cssVar:r,...n}=eW||{},l=e&&(!Array.isArray(e)||e.length>0)?(0,eU.jG)(e):e5.Z,o={};Object.entries(i||{}).forEach(([e,t])=>{let i={...t};"algorithm"in i&&(!0===i.algorithm?i.theme=l:(Array.isArray(i.algorithm)||"function"==typeof i.algorithm)&&(i.theme=(0,eU.jG)(i.algorithm)),delete i.algorithm),o[e]=i});let a={...e8.Z,...t};return{...n,theme:l,token:a,components:o,override:{override:a,...o},cssVar:r}},[eW]);return x&&(eV=s.createElement(e6.Mj.Provider,{value:eY},eV)),e$.warning&&(eV=s.createElement(eq.Provider,{value:e$.warning},eV)),void 0!==w&&(eV=s.createElement(tr.n,{disabled:w},eV)),s.createElement(e9.E_.Provider,{value:e$},eV)},tp=e=>{let t=s.useContext(e9.E_),i=s.useContext(e3.Z);return s.createElement(tc,{parentContext:t,legacyLocale:i,...e})};tp.ConfigContext=e9.E_,tp.SizeContext=tn.Z,tp.config=e=>{let{prefixCls:t,iconPrefixCls:i,theme:r,holderRender:n}=e},tp.useConfig=function(){return{componentDisabled:(0,s.useContext)(tr.Z),componentSize:(0,s.useContext)(tn.Z)}},Object.defineProperty(tp,"SizeContext",{get:()=>tn.Z});var tg=i(57438),tf=i(76436),tm=i(74750),tb=i(54544),ty=i(65525),tv=i(95623),t_=i(39231);let tC=e=>{let t={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:"scroll"===e?"scroll":"visible",dynamicInset:!0};return{bottomLeft:{...t,points:["tl","bl"],offset:[0,4]},bottomRight:{...t,points:["tr","br"],offset:[0,4]},topLeft:{...t,points:["bl","tl"],offset:[0,-4]},topRight:{...t,points:["br","tr"],offset:[0,-4]}}};var tx=i(10469),tw=i(58476),tS=i(64033),tA=i(39004),tk=i(80283);let tM=new eU.E4("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),tT=new eU.E4("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),tR=new eU.E4("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),tE=new eU.E4("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),tP=new eU.E4("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),tB=new eU.E4("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),tI={"move-up":{inKeyframes:new eU.E4("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),outKeyframes:new eU.E4("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}})},"move-down":{inKeyframes:tM,outKeyframes:tT},"move-left":{inKeyframes:tR,outKeyframes:tE},"move-right":{inKeyframes:tP,outKeyframes:tB}},tL=(e,t)=>{let{antCls:i}=e,r=`${i}-${t}`,{inKeyframes:n,outKeyframes:l}=tI[t];return[(0,tk.R)(r,n,l,e.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},tF=e=>{let{optionHeight:t,optionFontSize:i,optionLineHeight:r,optionPadding:n}=e;return{position:"relative",display:"block",minHeight:t,padding:n,color:e.colorText,fontWeight:"normal",fontSize:i,lineHeight:r,boxSizing:"border-box"}},tH=e=>{let{antCls:t,componentCls:i}=e,r=`${i}-item`,n=`&${t}-slide-up-enter${t}-slide-up-enter-active`,l=`&${t}-slide-up-appear${t}-slide-up-appear-active`,o=`&${t}-slide-up-leave${t}-slide-up-leave-active`,a=`${i}-dropdown-placement-`,s=`${r}-option-selected`;return[{[`${i}-dropdown`]:{...(0,th.Wf)(e),position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${n}${a}bottomLeft,
          ${l}${a}bottomLeft
        `]:{animationName:tA.fJ},[`
          ${n}${a}topLeft,
          ${l}${a}topLeft,
          ${n}${a}topRight,
          ${l}${a}topRight
        `]:{animationName:tA.Qt},[`${o}${a}bottomLeft`]:{animationName:tA.Uw},[`
          ${o}${a}topLeft,
          ${o}${a}topRight
        `]:{animationName:tA.ly},"&-hidden":{display:"none"},[r]:{...tF(e),cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":{flex:"auto",...th.vS},"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${r}-option-state`]:{color:e.colorPrimary}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.calc(e.controlPaddingHorizontal).mul(2).equal()}},"&-empty":{...tF(e),color:e.colorTextDisabled}},[`${s}:has(+ ${s})`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${s}`]:{borderStartStartRadius:0,borderStartEndRadius:0}},"&-rtl":{direction:"rtl"}}},(0,tA.oN)(e,"slide-up"),(0,tA.oN)(e,"slide-down"),tL(e,"move-up"),tL(e,"move-down")]},tO=e=>{let{componentCls:t}=e;return{[`&${t}-customize`]:{border:0,padding:0,fontSize:"inherit",lineHeight:"inherit",[`${t}-placeholder`]:{display:"none"},[`${t}-content`]:{margin:0,padding:0,"&-value":{display:"none"}}}}},tD=e=>{let{componentCls:t,calc:i,iconCls:r,paddingXS:n,paddingXXS:l,INTERNAL_FIXED_ITEM_MARGIN:o,lineWidth:a,colorIcon:s,colorIconHover:h,inputPaddingHorizontalBase:d}=e;return{"&-multiple":{"--select-multi-item-background":e.multipleItemBg,"--select-multi-item-border-color":"transparent","--select-multi-item-border-radius":e.borderRadiusSM,"--select-multi-item-height":e.multipleItemHeight,"--select-multi-padding-base":"calc((var(--select-height) - var(--select-multi-item-height)) / 2)","--select-multi-padding-vertical":`calc(var(--select-multi-padding-base) - ${o} - ${a})`,"--select-multi-item-padding-horizontal":`calc(${d} - var(--select-multi-padding-vertical) - ${a} * 2)`,paddingBlock:"var(--select-multi-padding-vertical)",paddingInlineStart:`calc(var(--select-multi-padding-base) - ${a})`,[`${t}-prefix`]:{marginInlineStart:"var(--select-multi-item-padding-horizontal)"},[`${t}-prefix + ${t}-content`]:{[`${t}-placeholder`]:{insetInlineStart:0},[`${t}-content-item${t}-content-item-suffix`]:{marginInlineStart:0}},[`${t}-placeholder`]:{position:"absolute",lineHeight:"var(--select-line-height)",insetInlineStart:"var(--select-multi-item-padding-horizontal)",width:"calc(100% - var(--select-multi-item-padding-horizontal))",top:"50%",transform:"translateY(-50%)"},[`${t}-content`]:{flexWrap:"wrap",alignItems:"center",lineHeight:1,"&-item-prefix":{height:"var(--select-font-size)"},"&-item":{lineHeight:1,maxWidth:"calc(100% - 4px)"},[`${t}-content-item-prefix + ${t}-content-item-suffix,
          ${t}-content-item-suffix:first-child`]:{marginInlineStart:"var(--select-multi-item-padding-horizontal)"},[`${t}-selection-item`]:{lineHeight:`calc(var(--select-multi-item-height) - ${a} * 2)`,border:`${a} solid var(--select-multi-item-border-color)`,display:"flex",marginBlock:o,marginInlineEnd:i(o).mul(2).equal(),background:"var(--select-multi-item-background)",borderRadius:"var(--select-multi-item-border-radius)",paddingInlineStart:n,paddingInlineEnd:l,transition:["height","line-height","padding"].map(t=>`${t} ${e.motionDurationSlow}`).join(","),"&-content":{...th.vS,marginInlineEnd:l},"&-remove":{...(0,th.Ro)(),display:"inline-flex",alignItems:"center",color:s,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${r}`]:{verticalAlign:"-0.2em"},"&:hover":{color:h}}},[`${t}-input`]:{lineHeight:i(o).mul(2).add("var(--select-multi-item-height)").equal(),width:"calc(var(--select-input-width, 0) * 1px)",minWidth:4,maxWidth:"100%",transition:`line-height ${e.motionDurationSlow}`}},[`&${t}-sm`]:{"--select-multi-item-height":e.multipleItemHeightSM,"--select-multi-item-border-radius":e.borderRadiusXS},[`&${t}-lg`]:{"--select-multi-item-height":e.multipleItemHeightLG,"--select-multi-item-border-radius":e.borderRadius},[`&${t}-filled`]:{"--select-multi-item-border-color":e.colorSplit,"--select-multi-item-background":e.colorBgContainer,[`&${t}-disabled`]:{"--select-multi-item-border-color":"transparent"}}}}},tz=(e,t)=>{let{componentCls:i}=e,{border:r,borderHover:n,borderActive:l,borderOutline:o}=t,a=t.background||e.selectorBg||e.colorBgContainer;return{"--select-border-color":r,"--select-background":a,"--select-color":t.color||e.colorText,[`&:not(${i}-disabled)`]:{"&:hover":{"--select-border-color":n,"--select-background":t.backgroundHover||a},[`&${i}-focused`]:{"--select-border-color":l,"--select-background":t.backgroundActive||a,boxShadow:`0 0 0 ${(0,eU.bf)(e.controlOutlineWidth)} ${o}`}},[`&${i}-disabled`]:{"--select-border-color":t.borderDisabled||t.border,"--select-background":t.backgroundDisabled||t.background}}},tW=(e,t,i,r={},n={},l)=>{let{componentCls:o}=e;return{[`&${o}-${t}`]:[tz(e,i),{[`&${o}-status-error`]:tz(e,{...i,color:r.color||e.colorError,...r}),[`&${o}-status-warning`]:tz(e,{...i,color:n.color||e.colorWarning,...n})},l]}},tZ=e=>{let{componentCls:t,calc:i,fontHeight:r,controlHeight:n,iconCls:l}=e;return{[t]:[{"--select-border-radius":e.borderRadius,"--select-border-color":"#000","--select-border-size":e.lineWidth,"--select-background":e.colorBgContainer,"--select-font-size":e.fontSize,"--select-line-height":e.lineHeight,"--select-font-height":r,"--select-color":e.colorText,"--select-height":n,"--select-padding-horizontal":i(e.paddingSM).sub(e.lineWidth).equal(),"--select-padding-vertical":"calc((var(--select-height) - var(--select-font-height)) / 2 - var(--select-border-size))",...(0,th.Wf)(e,!0),display:"inline-flex",flexWrap:"nowrap",position:"relative",transition:`all ${e.motionDurationSlow}`,alignItems:"flex-start",outline:0,cursor:"pointer",borderRadius:"var(--select-border-radius)",borderWidth:"var(--select-border-size)",borderStyle:e.lineType,borderColor:"var(--select-border-color)",background:"var(--select-background)",fontSize:"var(--select-font-size)",lineHeight:"var(--select-line-height)",color:"var(--select-color)",paddingInline:"var(--select-padding-horizontal)",paddingBlock:"var(--select-padding-vertical)",[`${t}-prefix`]:{flex:"none",lineHeight:1},[`${t}-placeholder`]:{...th.vS,color:e.colorTextPlaceholder,pointerEvents:"none",zIndex:1},[`${t}-content`]:{flex:"auto",minWidth:0,position:"relative",display:"flex",marginInlineEnd:i(e.paddingXXS).mul(1.5).equal(),"&:before":{content:'"\\a0"',width:0,overflow:"hidden"},"&-value":{...th.vS,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,zIndex:1},"input[readonly]":{cursor:"inherit",caretColor:"transparent"}},[`&-open ${t}-content-value`]:{color:e.colorTextPlaceholder},[`${t}-suffix`]:{flex:"none",color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,"> :not(:last-child)":{marginInlineEnd:e.marginXS}},[`${t}-prefix, ${t}-suffix`]:{alignSelf:"center",[l]:{verticalAlign:"top"}},"&-disabled":{background:e.colorBgContainerDisabled,color:e.colorTextDisabled,cursor:"not-allowed",input:{cursor:"not-allowed"}},"&-sm":{"--select-height":e.controlHeightSM,"--select-padding-horizontal":i(e.paddingXS).sub(e.lineWidth).equal(),"--select-border-radius":e.borderRadiusSM},"&-lg":{"--select-height":e.controlHeightLG,"--select-font-size":e.fontSizeLG,"--select-line-height":e.lineHeightLG,"--select-font-height":e.fontHeightLG,"--select-border-radius":e.borderRadiusLG}},{[`&:not(${t}-customize)`]:{[`${t}-input`]:{outline:"none",background:"transparent",appearance:"none",border:0,margin:0,padding:0,color:"inherit","&::-webkit-search-cancel-button":{display:"none",appearance:"none"}}}},{[`&-single:not(${t}-customize)`]:{[`${t}-input`]:{position:"absolute",insetInline:0,insetBlock:"calc(var(--select-padding-vertical) * -1)",lineHeight:"calc(var(--select-font-height) + var(--select-padding-vertical) * 2)"},[`${t}-content`]:{alignSelf:"center"}}},{[`&-show-search:not(${t}-customize-input):not(${t}-disabled)`]:{cursor:"text"}},tD(e),tW(e,"outlined",{border:e.colorBorder,borderHover:e.hoverBorderColor,borderActive:e.activeBorderColor,borderOutline:e.activeOutlineColor,borderDisabled:e.colorBorderDisabled},{border:e.colorError,borderHover:e.colorErrorHover,borderActive:e.colorError,borderOutline:e.colorErrorOutline},{border:e.colorWarning,borderHover:e.colorWarningHover,borderActive:e.colorWarning,borderOutline:e.colorWarningOutline}),tW(e,"filled",{border:"transparent",borderHover:"transparent",borderActive:e.activeBorderColor,borderOutline:"transparent",borderDisabled:e.colorBorderDisabled,background:e.colorFillTertiary,backgroundHover:e.colorFillSecondary,backgroundActive:e.colorBgContainer},{background:e.colorErrorBg,backgroundHover:e.colorErrorBgHover,borderActive:e.colorError},{background:e.colorWarningBg,backgroundHover:e.colorWarningBgHover,borderActive:e.colorWarning}),tW(e,"borderless",{border:"transparent",borderHover:"transparent",borderActive:"transparent",borderOutline:"transparent",background:"transparent"}),tW(e,"underlined",{border:e.colorBorder,borderHover:e.hoverBorderColor,borderActive:e.activeBorderColor,borderOutline:"transparent"},{border:e.colorError,borderHover:e.colorErrorHover,borderActive:e.colorError},{border:e.colorWarning,borderHover:e.colorWarningHover,borderActive:e.colorWarning},{borderRadius:0,borderTopColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent"}),tO(e)]}},tN=e=>{let{antCls:t,componentCls:i,inputPaddingHorizontalBase:r}=e,n={[`${i}-clear`]:{opacity:1,background:e.colorBgBase,borderRadius:"50%"}};return{[i]:{...(0,th.Wf)(e),[`${i}-selection-item`]:{flex:1,fontWeight:"normal",position:"relative",userSelect:"none",...th.vS,[`> ${t}-typography`]:{display:"inline"}},[`${i}-prefix`]:{flex:"none",marginInlineEnd:e.selectAffixPadding},[`${i}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto",transform:"translateZ(0)","&:before":{display:"block"},"&:hover":{color:e.colorIcon}},"@media(hover:none)":n,"&:hover":n},[`${i}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${i}-has-feedback`]:{[`${i}-clear`]:{insetInlineEnd:e.calc(r).add(e.fontSize).add(e.paddingXS).equal()}}}}}},t$=e=>{let{componentCls:t}=e;return[{[t]:{[`&${t}-in-form-item`]:{width:"100%"}}},tN(e),tH(e),{[`${t}-rtl`]:{direction:"rtl"}},(0,tx.c)(e,{focusElCls:`${t}-focused`})]},tj=(0,tw.I$)("Select",(e,{rootPrefixCls:t})=>{let i=(0,tS.IX)(e,{rootPrefixCls:t,inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(e.lineWidth).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[t$(i),tZ(i)]},e=>{let{fontSize:t,lineHeight:i,lineWidth:r,controlHeight:n,controlHeightSM:l,controlHeightLG:o,paddingXXS:a,controlPaddingHorizontal:s,zIndexPopupBase:h,colorText:d,fontWeightStrong:u,controlItemBgActive:c,controlItemBgHover:p,colorBgContainer:g,colorFillSecondary:f,colorBgContainerDisabled:m,colorTextDisabled:b,colorPrimaryHover:y,colorPrimary:v,controlOutline:_}=e,C=2*a,x=2*r,w=Math.min(n-C,n-x),S=Math.min(l-C,l-x),A=Math.min(o-C,o-x);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(a/2),zIndexPopup:h+50,optionSelectedColor:d,optionSelectedFontWeight:u,optionSelectedBg:c,optionActiveBg:p,optionPadding:`${(n-t*i)/2}px ${s}px`,optionFontSize:t,optionLineHeight:i,optionHeight:n,selectorBg:g,clearBg:g,singleItemHeightLG:o,multipleItemBg:f,multipleItemBorderColor:"transparent",multipleItemHeight:w,multipleItemHeightSM:S,multipleItemHeightLG:A,multipleSelectorBgDisabled:m,multipleItemColorDisabled:b,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(1.25*e.fontSize),hoverBorderColor:y,activeBorderColor:v,activeOutlineColor:_,selectAffixPadding:a}},{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}}),tG={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};var tV=i(981);function tU(){return(tU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let tK=s.forwardRef((e,t)=>s.createElement(tV.Z,tU({},e,{ref:t,icon:tG}))),tX={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};function tY(){return(tY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let tq=s.forwardRef((e,t)=>s.createElement(tV.Z,tY({},e,{ref:t,icon:tX})));var tJ=i(57258);let tQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};function t0(){return(t0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let t1=s.forwardRef((e,t)=>s.createElement(tV.Z,t0({},e,{ref:t,icon:tQ})));var t2=i(24281);let t3={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function t4(){return(t4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}let t5=s.forwardRef((e,t)=>s.createElement(tV.Z,t4({},e,{ref:t,icon:t3})));var t6=i(8484);let t8=e=>{let{space:t,form:i,children:r}=e;if(!(0,t6.Z)(r))return null;let n=r;return i&&(n=s.createElement(ty.Ux,{override:!0,status:!0},n)),t&&(n=s.createElement(t_.BR,null,n)),n},t7="SECRET_COMBOBOX_MODE_DO_NOT_USE",t9=s.forwardRef((e,t)=>{var i,r,n;let l,{prefixCls:o,bordered:a,className:h,rootClassName:d,getPopupContainer:c,popupClassName:p,dropdownClassName:g,listHeight:f=256,placement:b,listItemHeight:y,size:v,disabled:_,notFoundContent:C,status:x,builtinPlacements:w,dropdownMatchSelectWidth:S,popupMatchSelectWidth:A,direction:k,style:M,allowClear:T,variant:R,popupStyle:E,dropdownStyle:P,transitionName:B,tagRender:I,maxCount:L,prefix:F,dropdownRender:H,popupRender:O,onDropdownVisibleChange:D,onOpenChange:z,styles:W,classNames:Z,...N}=e,{getPopupContainer:$,getPrefixCls:j,renderEmpty:G,direction:V,virtual:U,popupMatchSelectWidth:K,popupOverflow:X}=s.useContext(e9.E_),{showSearch:Y,style:q,styles:J,className:Q,classNames:ee}=(0,e9.dj)("select"),[,et]=(0,eW.ZP)(),ei=y??et?.controlHeight,er=j("select",o),en=j(),el=k??V,{compactSize:eo,compactItemClassnames:ea}=(0,t_.ri)(er,el),[es,eh]=(0,tv.Z)("select",R,a),ed=(0,tm.Z)(er),[eu,ec]=tj(er,ed),ep=s.useMemo(()=>{let{mode:t}=e;if("combobox"!==t)return t===t7?"combobox":t},[e.mode]),eg="multiple"===ep||"tags"===ep,ef=(i=e.suffixIcon,void 0!==(r=e.showArrow)?r:null!==i),em=(n=O||H,s.useMemo(()=>{if(n)return(...e)=>s.createElement(t8,{space:!0},n.apply(void 0,e))},[n])),{status:eb,hasFeedback:ey,isFormItemInput:ev,feedbackIcon:e_}=s.useContext(ty.aM),eC=(0,tg.F)(eb,x);l=void 0!==C?C:"combobox"===ep?null:G?.("Select")||s.createElement(tf.Z,{componentName:"Select"});let{suffixIcon:ex,itemIcon:ew,removeIcon:eS,clearIcon:eA}=function({suffixIcon:e,clearIcon:t,menuItemSelectedIcon:i,removeIcon:r,loading:n,multiple:l,hasFeedback:o,showSuffixIcon:a,feedbackIcon:h,showArrow:d,componentName:u}){let c=t??s.createElement(tq,null),p=t=>null!==e||o||d?s.createElement(s.Fragment,null,!1!==a&&t,o&&h):null,g=null;g=void 0!==e?p(e):n?p(s.createElement(t2.Z,{spin:!0})):({open:e,showSearch:t})=>e&&t?p(s.createElement(t5,null)):p(s.createElement(t1,null));let f=null;f=void 0!==i?i:l?s.createElement(tK,null):null;let m=null;return{clearIcon:c,suffixIcon:g,itemIcon:f,removeIcon:void 0!==r?r:s.createElement(tJ.Z,null)}}({...N,multiple:eg,hasFeedback:ey,feedbackIcon:e_,showSuffixIcon:ef,prefixCls:er,componentName:"Select"}),ek=(0,m.CE)(N,["suffixIcon","itemIcon"]),eM=(0,tb.Z)(e=>v??eo??e),eT=s.useContext(tr.Z),eR=_??eT,eE={...e,variant:es,status:eC,disabled:eR,size:eM},[eP,eB]=(0,ez.MW)([ee,Z],[J,W],{props:eE},{popup:{_default:"root"}}),eI=(0,u.W)(eP.popup?.root,p,g,{[`${er}-dropdown-${el}`]:"rtl"===el},d,ec,ed,eu),eL={...eB.popup?.root,...E??P},eF=(0,u.W)({[`${er}-lg`]:"large"===eM,[`${er}-sm`]:"small"===eM,[`${er}-rtl`]:"rtl"===el,[`${er}-${es}`]:eh,[`${er}-in-form-item`]:ev},(0,tg.Z)(er,eC,ey),ea,Q,h,eP.root,d,ec,ed,eu),eH=s.useMemo(()=>void 0!==b?b:"rtl"===el?"bottomRight":"bottomLeft",[b,el]),[eO]=eG("SelectLike",eB.popup?.root?.zIndex??eL?.zIndex);return s.createElement(eD,{ref:t,virtual:U,classNames:eP,styles:eB,showSearch:Y,...ek,style:{...eB.root,...q,...M},popupMatchSelectWidth:A??S??K,transitionName:(0,eV.m)(en,"slide-up",B),builtinPlacements:w||tC(X),listHeight:f,listItemHeight:ei,mode:ep,prefixCls:er,placement:eH,direction:el,prefix:F,suffixIcon:ex,menuItemSelectedIcon:ew,removeIcon:eS,allowClear:!0===T?{clearIcon:eA}:T,notFoundContent:l,className:eF,getPopupContainer:c||$,popupClassName:eI,disabled:eR,popupStyle:{...eB.popup?.root,...eL,zIndex:eO},maxCount:eg?L:void 0,tagRender:eg?I:void 0,popupRender:em,onPopupVisibleChange:z||D})}),ie=(r="popupAlign",a=e=>{let{prefixCls:t,style:i}=e,a=s.useRef(null),[h,d]=s.useState(0),[u,c]=s.useState(0),[p,g]=(0,m.zk)(!1,e.open),{getPrefixCls:f}=s.useContext(e9.E_),b=f(l||"select",t);s.useEffect(()=>{if(g(!0),"undefined"!=typeof ResizeObserver){let e=new ResizeObserver(e=>{let t=e[0].target;d(t.offsetHeight+8),c(t.offsetWidth)}),t=setInterval(()=>{let i=o?`.${o(b)}`:`.${b}-dropdown`,r=a.current?.querySelector(i);r&&(clearInterval(t),e.observe(r))},10);return()=>{clearInterval(t),e.disconnect()}}},[b]);let y={...e,style:{...i,margin:0},open:p,getPopupContainer:()=>a.current};return n&&(y=n(y)),r&&Object.assign(y,{[r]:{overflow:{adjustX:!1,adjustY:!1}}}),s.createElement("div",{ref:a,style:{paddingBottom:h,position:"relative",minWidth:u}},s.createElement(t9,{...y}))},e=>s.createElement(tp,{theme:{token:{motion:!1,zIndexPopupBase:0}}},s.createElement(a,{...e})));t9.SECRET_COMBOBOX_MODE_DO_NOT_USE=t7,t9.Option=el,t9.OptGroup=en,t9._InternalPanelDoNotUseOrYouWillBeFired=ie;let it=t9},39231:function(e,t,i){i.d(t,{BR:()=>g,ZP:()=>m,ri:()=>p});var r=i(44194),n=i(10894),l=i(10976),o=i(24659),a=i(391),s=i(54544),h=i(58476);let d=e=>{let{componentCls:t}=e;return{[t]:{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"}}}},u=(0,h.I$)(["Space","Compact"],e=>[d(e)],()=>({}),{resetStyle:!1}),c=r.createContext(null),p=(e,t)=>{let i=r.useContext(c),n=r.useMemo(()=>{if(!i)return"";let{compactDirection:r,isFirstItem:n,isLastItem:o}=i,a="vertical"===r?"-vertical-":"-";return(0,l.W)(`${e}-compact${a}item`,{[`${e}-compact${a}first-item`]:n,[`${e}-compact${a}last-item`]:o,[`${e}-compact${a}item-rtl`]:"rtl"===t})},[e,t,i]);return{compactSize:i?.compactSize,compactDirection:i?.compactDirection,compactItemClassnames:n}},g=e=>{let{children:t}=e;return r.createElement(c.Provider,{value:null},t)},f=e=>{let{children:t,...i}=e;return r.createElement(c.Provider,{value:r.useMemo(()=>i,[i])},t)},m=e=>{let{getPrefixCls:t,direction:i}=r.useContext(a.E_),{size:h,direction:d,orientation:p,block:g,prefixCls:m,className:b,rootClassName:y,children:v,vertical:_,...C}=e,[x,w]=(0,o.R)(p,_,d),S=(0,s.Z)(e=>h??e),A=t("space-compact",m),[k]=u(A),M=(0,l.W)(A,k,{[`${A}-rtl`]:"rtl"===i,[`${A}-block`]:g,[`${A}-vertical`]:w},b,y),T=r.useContext(c),R=(0,n.qo)(v),E=r.useMemo(()=>R.map((e,t)=>{let i=e?.key||`${A}-item-${t}`;return r.createElement(f,{key:i,compactSize:S,compactDirection:x,isFirstItem:0===t&&(!T||T?.isFirstItem),isLastItem:t===R.length-1&&(!T||T?.isLastItem)},e)}),[R,T,x,S,A]);return 0===R.length?null:r.createElement("div",{className:M,...C},E)}},67556:function(e,t,i){i.d(t,{Z:()=>k});var r=i(44194),n=i(10894),l=i(10976),o=i(20325),a=i(24659),s=i(27338),h=i(8484),d=i(391),u=i(39231),c=i(57438),p=i(10469),g=i(58476);let f=e=>{let{componentCls:t,borderRadius:i,paddingSM:r,colorBorder:n,paddingXS:l,fontSizeLG:o,fontSizeSM:a,borderRadiusLG:s,borderRadiusSM:h,colorBgContainerDisabled:d,lineWidth:u}=e;return{[t]:[{display:"inline-flex",alignItems:"center",gap:0,paddingInline:r,margin:0,borderWidth:u,borderStyle:"solid",borderRadius:i,"&:hover":{zIndex:0},[`&${t}-disabled`]:{color:e.colorTextDisabled},"&-large":{fontSize:o,borderRadius:s},"&-small":{paddingInline:l,borderRadius:h,fontSize:a},"&-compact-last-item":{borderEndStartRadius:0,borderStartStartRadius:0},"&-compact-first-item":{borderEndEndRadius:0,borderStartEndRadius:0},"&-compact-item:not(:first-child):not(:last-child)":{borderRadius:0},"&-compact-item:not(:last-child)":{borderInlineEndWidth:0},"&-compact-item:not(:first-child)":{borderInlineStartWidth:0}},{"--space-addon-border-color":n,"--space-addon-background":d,"--space-addon-border-color-outlined":n,"--space-addon-background-filled":d,borderColor:"var(--space-addon-border-color)",background:"var(--space-addon-background)","&-variant-outlined":{"--space-addon-border-color":"var(--space-addon-border-color-outlined)"},"&-variant-filled":{"--space-addon-border-color":"transparent","--space-addon-background":"var(--space-addon-background-filled)",[`&${t}-disabled`]:{"--space-addon-border-color":n,"--space-addon-background":d}},"&-variant-borderless":{border:"none",background:"transparent"},"&-variant-underlined":{border:"none",background:"transparent"}},{"&-status-error":{"--space-addon-border-color-outlined":e.colorError,"--space-addon-background-filled":e.colorErrorBg,color:e.colorError},"&-status-warning":{"--space-addon-border-color-outlined":e.colorWarning,"--space-addon-background-filled":e.colorWarningBg,color:e.colorWarning}}]}},m=(0,g.I$)(["Space","Addon"],e=>[f(e),(0,p.c)(e,{focus:!1})]),b=r.forwardRef((e,t)=>{let{className:i,children:n,style:o,prefixCls:a,variant:s="outlined",disabled:h,status:p,...g}=e,{getPrefixCls:f,direction:b}=r.useContext(d.E_),y=f("space-addon",a),[v,_]=m(y),{compactItemClassnames:C,compactSize:x}=(0,u.ri)(y,b),w=(0,c.Z)(y,p),S=(0,l.W)(y,v,C,_,`${y}-variant-${s}`,w,{[`${y}-${x}`]:x,[`${y}-disabled`]:h},i);return r.createElement("div",{ref:t,className:S,style:o,...g},n)}),y=r.createContext({latestIndex:0}),v=y.Provider,_=e=>{let{className:t,prefix:i,index:n,children:o,separator:a,style:s,classNames:d,styles:u}=e,{latestIndex:c}=r.useContext(y);return(0,h.Z)(o)?r.createElement(r.Fragment,null,r.createElement("div",{className:t,style:s},o),n<c&&a&&r.createElement("span",{className:(0,l.W)(`${i}-item-separator`,d.separator),style:u.separator},a)):null};var C=i(64033);let x=e=>{let{componentCls:t,antCls:i}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-item:empty`]:{display:"none"},[`${t}-item > ${i}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},w=e=>{let{componentCls:t}=e;return{[t]:{"&-gap-row-small":{rowGap:e.spaceGapSmallSize},"&-gap-row-middle":{rowGap:e.spaceGapMiddleSize},"&-gap-row-large":{rowGap:e.spaceGapLargeSize},"&-gap-col-small":{columnGap:e.spaceGapSmallSize},"&-gap-col-middle":{columnGap:e.spaceGapMiddleSize},"&-gap-col-large":{columnGap:e.spaceGapLargeSize}}}},S=(0,g.I$)("Space",e=>{let t=(0,C.IX)(e,{spaceGapSmallSize:e.paddingXS,spaceGapMiddleSize:e.padding,spaceGapLargeSize:e.paddingLG});return[x(t),w(t)]},()=>({}),{resetStyle:!1}),A=r.forwardRef((e,t)=>{let{getPrefixCls:i,direction:u,size:c,className:p,style:g,classNames:f,styles:m}=(0,d.dj)("space"),{size:b=c??"small",align:y,className:C,rootClassName:x,children:w,direction:A,orientation:k,prefixCls:M,split:T,separator:R,style:E,vertical:P,wrap:B=!1,classNames:I,styles:L,...F}=e,[H,O]=Array.isArray(b)?b:[b,b],D=(0,o.n)(O),z=(0,o.n)(H),W=(0,o.T)(O),Z=(0,o.T)(H),N=(0,n.qo)(w,{keepEmpty:!0}),[$,j]=(0,a.R)(k,P,A),G=void 0!==y||j?y:"center",V=R??T,U=i("space",M),[K,X]=S(U),Y={...e,size:b,orientation:$,align:G},[q,J]=(0,s.MW)([f,I],[m,L],{props:Y}),Q=(0,l.W)(U,p,K,`${U}-${$}`,{[`${U}-rtl`]:"rtl"===u,[`${U}-align-${G}`]:G,[`${U}-gap-row-${O}`]:D,[`${U}-gap-col-${H}`]:z},C,x,X,q.root),ee=(0,l.W)(`${U}-item`,q.item),et=N.map((e,t)=>{let i=e?.key||`${ee}-${t}`;return r.createElement(_,{prefix:U,classNames:q,styles:J,className:ee,key:i,index:t,separator:V,style:J.item},e)}),ei=r.useMemo(()=>({latestIndex:N.reduce((e,t,i)=>(0,h.Z)(t)?i:e,0)}),[N]);if(0===N.length)return null;let er={};return B&&(er.flexWrap="wrap"),!z&&Z&&(er.columnGap=H),!D&&W&&(er.rowGap=O),r.createElement("div",{ref:t,className:Q,style:{...er,...J.root,...g,...E},...F},r.createElement(v,{value:ei},et))});A.Compact=u.ZP,A.Addon=b;let k=A},9405:function(e,t,i){let r;i.d(t,{Z:()=>A});var n=i(44194),l=i(10976),o=i(27338),a=i(391),s=i(74123),h=i(68176);let d=80*Math.PI,u=e=>{let{dotClassName:t,style:i,hasCircleCls:r}=e;return n.createElement("circle",{className:(0,l.W)(`${t}-circle`,{[`${t}-circle-bg`]:r}),r:40,cx:50,cy:50,strokeWidth:20,style:i})},c=({percent:e,prefixCls:t})=>{let i=`${t}-dot`,r=`${i}-holder`,o=`${r}-hidden`,[a,s]=n.useState(!1);(0,h.Z)(()=>{0!==e&&s(!0)},[0!==e]);let c=Math.max(Math.min(e,100),0);if(!a)return null;let p={strokeDashoffset:`${d/4}`,strokeDasharray:`${d*c/100} ${d*(100-c)/100}`};return n.createElement("span",{className:(0,l.W)(r,`${i}-progress`,c<=0&&o)},n.createElement("svg",{viewBox:"0 0 100 100",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c},n.createElement(u,{dotClassName:i,hasCircleCls:!0}),n.createElement(u,{dotClassName:i,style:p})))};function p(e){let{prefixCls:t,percent:i=0,className:r,style:o}=e,a=`${t}-dot`,s=`${a}-holder`,h=`${s}-hidden`;return n.createElement(n.Fragment,null,n.createElement("span",{className:(0,l.W)(s,r,i>0&&h),style:o},n.createElement("span",{className:(0,l.W)(a,`${t}-dot-spin`)},[1,2,3,4].map(e=>n.createElement("i",{className:`${t}-dot-item`,key:e})))),n.createElement(c,{prefixCls:t,percent:i}))}function g(e){let{prefixCls:t,indicator:i,percent:r,className:o,style:a}=e,h=`${t}-dot`;return i&&n.isValidElement(i)?(0,s.Tm)(i,e=>({className:(0,l.W)(e.className,h,o),style:{...e.style,...a},percent:r})):n.createElement(p,{prefixCls:t,percent:r,className:o,style:a})}var f=i(55839),m=i(83447),b=i(58476),y=i(64033);let v=new f.E4("antSpinMove",{to:{opacity:1}}),_=new f.E4("antRotate",{to:{transform:"rotate(405deg)"}}),C=e=>{let{componentCls:t,calc:i}=e;return{[t]:{...(0,m.Wf)(e),position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${t}-text`]:{fontSize:e.fontSize,paddingTop:i(i(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[t]:{[`${t}-dot-holder`]:{color:e.colorWhite},[`${t}-text`]:{color:e.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${t}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${t}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:i(e.dotSize).mul(-1).div(2).equal()},[`${t}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${t}-show-text ${t}-dot`]:{marginTop:i(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${t}-dot`]:{margin:i(e.dotSizeSM).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:i(i(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:i(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${t}-dot`]:{margin:i(e.dotSizeLG).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:i(i(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:i(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${t}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${t}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${t}-dot-holder`]:{width:"1em",height:"1em",fontSize:e.dotSize,display:"inline-block",transition:`transform ${e.motionDurationSlow} ease, opacity ${e.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:e.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${t}-dot-progress`]:{position:"absolute",inset:0},[`${t}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:i(e.dotSize).sub(i(e.marginXXS).div(2)).div(2).equal(),height:i(e.dotSize).sub(i(e.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:v,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:_,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(t=>`${t} ${e.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:e.colorFillSecondary}},[`&-sm ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeSM}},[`&-sm ${t}-dot-holder`]:{i:{width:i(i(e.dotSizeSM).sub(i(e.marginXXS).div(2))).div(2).equal(),height:i(i(e.dotSizeSM).sub(i(e.marginXXS).div(2))).div(2).equal()}},[`&-lg ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeLG}},[`&-lg ${t}-dot-holder`]:{i:{width:i(i(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:i(i(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},[`&${t}-show-text ${t}-text`]:{display:"block"}}}},x=(0,b.I$)("Spin",e=>C((0,y.IX)(e,{spinDotDefault:e.colorTextDescription})),e=>{let{controlHeightLG:t,controlHeight:i}=e;return{contentHeight:400,dotSize:t/2,dotSizeSM:.35*t,dotSizeLG:i}}),w=[[30,.05],[70,.03],[96,.01]],S=e=>{let{prefixCls:t,spinning:i=!0,delay:s=0,className:h,rootClassName:d,size:u="default",tip:c,wrapperClassName:p,style:f,children:m,fullscreen:b=!1,indicator:y,percent:v,classNames:_,styles:C,...S}=e,{getPrefixCls:A,direction:k,indicator:M,className:T,style:R,classNames:E,styles:P}=(0,a.dj)("spin"),B=A("spin",t),[I,L]=x(B),[F,H]=n.useState(()=>i&&(!i||!s||!!Number.isNaN(Number(s)))),O=function(e,t){let[i,r]=n.useState(0),l=n.useRef(null),o="auto"===t;return n.useEffect(()=>(o&&e&&(r(0),l.current=setInterval(()=>{r(e=>{let t=100-e;for(let i=0;i<w.length;i+=1){let[r,n]=w[i];if(e<=r)return e+t*n}return e})},200)),()=>{l.current&&(clearInterval(l.current),l.current=null)}),[o,e]),o?i:t}(F,v);n.useEffect(()=>{if(i){let e=function(e,t,i){var r,n=i||{},l=n.noTrailing,o=void 0!==l&&l,a=n.noLeading,s=void 0!==a&&a,h=n.debounceMode,d=void 0===h?void 0:h,u=!1,c=0;function p(){r&&clearTimeout(r)}function g(){for(var i=arguments.length,n=Array(i),l=0;l<i;l++)n[l]=arguments[l];var a=this,h=Date.now()-c;function g(){c=Date.now(),t.apply(a,n)}function f(){r=void 0}!u&&(s||!d||r||g(),p(),void 0===d&&h>e?s?(c=Date.now(),o||(r=setTimeout(d?f:g,e))):g():!0!==o&&(r=setTimeout(d?f:g,void 0===d?e-h:e)))}return g.cancel=function(e){var t=(e||{}).upcomingOnly;p(),u=!(void 0!==t&&t)},g}(s,()=>{H(!0)},{debounceMode:false});return e(),()=>{e?.cancel?.()}}H(!1)},[s,i]);let D=n.useMemo(()=>void 0!==m&&!b,[m,b]),z={...e,size:u,spinning:F,tip:c,fullscreen:b,children:m,percent:O},[W,Z]=(0,o.MW)([E,_],[P,C],{props:z}),N=(0,l.W)(B,T,{[`${B}-sm`]:"small"===u,[`${B}-lg`]:"large"===u,[`${B}-spinning`]:F,[`${B}-show-text`]:!!c,[`${B}-rtl`]:"rtl"===k},h,!b&&d,!b&&W.root,I,L),$=(0,l.W)(`${B}-container`,{[`${B}-blur`]:F}),j=y??M??r,G={...R,...f},V=n.createElement("div",{...S,style:b?G:{...Z.root,...G},className:N,"aria-live":"polite","aria-busy":F},n.createElement(g,{className:W.indicator,style:Z.indicator,prefixCls:B,indicator:j,percent:O}),c&&(D||b)?n.createElement("div",{className:(0,l.W)(`${B}-text`,W.tip),style:Z.tip},c):null);return D?n.createElement("div",{...S,className:(0,l.W)(`${B}-nested-loading`,p,W.wrapper,I,L),style:Z.wrapper},F&&n.createElement("div",{key:"loading"},V),n.createElement("div",{className:$,key:"container"},m)):b?n.createElement("div",{className:(0,l.W)(`${B}-fullscreen`,{[`${B}-fullscreen-show`]:F},d,I,L,W.mask),style:Z.mask},V):V};S.setDefaultIndicator=e=>{r=e};let A=S},10469:function(e,t,i){i.d(t,{c:()=>r});function r(e,t={focus:!0}){let{componentCls:i}=e,{componentCls:n}=t,l=n||i,o=`${l}-compact`;return{[o]:{...function(e,t,i,r){let{focusElCls:n,focus:l,borderElCls:o}=i,a=o?"> *":"",s=["hover",l?"focus":null,"active"].filter(Boolean).map(e=>`&:${e} ${a}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},[`&-item:not(${r}-status-success)`]:{zIndex:2},"&-item":{[s]:{zIndex:3},...n?{[`&${n}`]:{zIndex:3}}:{},[`&[disabled] ${a}`]:{zIndex:0}}}}(e,o,t,l),...function(e,t,i){let{borderElCls:r}=i,n=r?`> ${r}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${n}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${n}, &${e}-sm ${n}, &${e}-lg ${n}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${n}, &${e}-sm ${n}, &${e}-lg ${n}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}(l,o,t)}}}},83447:function(e,t,i){i.d(t,{JT:()=>c,Lx:()=>s,Qy:()=>u,Ro:()=>o,Wf:()=>l,dF:()=>a,du:()=>h,oN:()=>d,vS:()=>n});var r=i(55839);let n={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},l=(e,t=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}),o=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),a=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),s=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active, &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),h=(e,t,i,r)=>{let n=`[class^="${t}"], [class*=" ${t}"]`,l=i?`.${i}`:n,o={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}},a={};return!1!==r&&(a={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[l]:{...a,...o,[n]:o}}},d=(e,t)=>({outline:`${(0,r.bf)(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:t??1,transition:"outline-offset 0s, outline 0s"}),u=(e,t)=>({"&:focus-visible":d(e,t)}),c=e=>({[`.${e}`]:{...o(),[`.${e} .${e}-icon`]:{display:"block"}}})},80283:function(e,t,i){i.d(t,{R:()=>l});let r=e=>({animationDuration:e,animationFillMode:"both"}),n=e=>({animationDuration:e,animationFillMode:"both"}),l=(e,t,i,l,o=!1)=>{let a=o?"&":"";return{[`
      ${a}${e}-enter,
      ${a}${e}-appear
    `]:{...r(l),animationPlayState:"paused"},[`${a}${e}-leave`]:{...n(l),animationPlayState:"paused"},[`
      ${a}${e}-enter${e}-enter-active,
      ${a}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${a}${e}-leave${e}-leave-active`]:{animationName:i,animationPlayState:"running",pointerEvents:"none"}}}},39004:function(e,t,i){i.d(t,{Qt:()=>a,Uw:()=>o,fJ:()=>l,ly:()=>s,oN:()=>c});var r=i(55839),n=i(80283);let l=new r.E4("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),o=new r.E4("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),a=new r.E4("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),s=new r.E4("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),h=new r.E4("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),d=new r.E4("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),u={"slide-up":{inKeyframes:l,outKeyframes:o},"slide-down":{inKeyframes:a,outKeyframes:s},"slide-left":{inKeyframes:h,outKeyframes:d},"slide-right":{inKeyframes:new r.E4("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),outKeyframes:new r.E4("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}})}},c=(e,t)=>{let{antCls:i}=e,r=`${i}-${t}`,{inKeyframes:l,outKeyframes:o}=u[t];return[(0,n.R)(r,l,o,e.motionDurationMid),{[`
      ${r}-enter,
      ${r}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]}},70723:function(e,t,i){i.d(t,{Mj:()=>o,u_:()=>l});var r=i(44194),n=i(76353);let l={token:n.Z,override:{override:n.Z},hashed:!0},o=r.createContext(l)},79633:function(e,t,i){i.d(t,{Z:()=>f});var r=i(55839),n=i(36602),l=i(76353),o=i(38187);let a=e=>{let t=e,i=e,r=e,n=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?i=4:e<8&&e>=7?i=5:e<14&&e>=8?i=6:e<16&&e>=14?i=7:e>=16&&(i=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?n=4:e>=8&&(n=6),{borderRadius:e,borderRadiusXS:r,borderRadiusSM:i,borderRadiusLG:t,borderRadiusOuter:n}},s=e=>{let{controlHeight:t}=e;return{controlHeightSM:.75*t,controlHeightXS:.5*t,controlHeightLG:1.25*t}};var h=i(2307);let d=e=>{let t=(0,h.Z)(e),i=t.map(e=>e.size),r=t.map(e=>e.lineHeight),n=i[1],l=i[0],o=i[2],a=r[1],s=r[0],d=r[2];return{fontSizeSM:l,fontSize:n,fontSizeLG:o,fontSizeXL:i[3],fontSizeHeading1:i[6],fontSizeHeading2:i[5],fontSizeHeading3:i[4],fontSizeHeading4:i[3],fontSizeHeading5:i[2],lineHeight:a,lineHeightLG:d,lineHeightSM:s,fontHeight:Math.round(a*n),fontHeightLG:Math.round(d*o),fontHeightSM:Math.round(s*l),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}},u=(e,t)=>new o.t(e).setA(t).toRgbString(),c=(e,t)=>new o.t(e).darken(t).toHexString(),p=e=>{let t=(0,n.R_)(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},g=(e,t)=>{let i=e||"#fff",r=t||"#000";return{colorBgBase:i,colorTextBase:r,colorText:u(r,.88),colorTextSecondary:u(r,.65),colorTextTertiary:u(r,.45),colorTextQuaternary:u(r,.25),colorFill:u(r,.15),colorFillSecondary:u(r,.06),colorFillTertiary:u(r,.04),colorFillQuaternary:u(r,.02),colorBgSolid:u(r,1),colorBgSolidHover:u(r,.75),colorBgSolidActive:u(r,.95),colorBgLayout:c(i,4),colorBgContainer:c(i,0),colorBgElevated:c(i,0),colorBgSpotlight:u(r,.85),colorBgBlur:"transparent",colorBorder:c(i,15),colorBorderDisabled:c(i,15),colorBorderSecondary:c(i,6)}},f=(0,r.jG)(function(e){n.ez.pink=n.ez.magenta,n.Ti.pink=n.Ti.magenta;let t=Object.keys(l.M).map(t=>{let i=e[t]===n.ez[t]?n.Ti[t]:(0,n.R_)(e[t]);return Array.from({length:10},()=>1).reduce((e,r,n)=>(e[`${t}-${n+1}`]=i[n],e[`${t}${n+1}`]=i[n],e),{})}).reduce((e,t)=>e={...e,...t},{});return{...e,...t,...function(e,{generateColorPalettes:t,generateNeutralColorPalettes:i}){let{colorSuccess:r,colorWarning:n,colorError:l,colorInfo:a,colorPrimary:s,colorBgBase:h,colorTextBase:d}=e,u=t(s),c=t(r),p=t(n),g=t(l),f=t(a),m=i(h,d),b=t(e.colorLink||e.colorInfo),y=new o.t(g[1]).mix(new o.t(g[3]),50).toHexString();return{...m,colorPrimaryBg:u[1],colorPrimaryBgHover:u[2],colorPrimaryBorder:u[3],colorPrimaryBorderHover:u[4],colorPrimaryHover:u[5],colorPrimary:u[6],colorPrimaryActive:u[7],colorPrimaryTextHover:u[8],colorPrimaryText:u[9],colorPrimaryTextActive:u[10],colorSuccessBg:c[1],colorSuccessBgHover:c[2],colorSuccessBorder:c[3],colorSuccessBorderHover:c[4],colorSuccessHover:c[4],colorSuccess:c[6],colorSuccessActive:c[7],colorSuccessTextHover:c[8],colorSuccessText:c[9],colorSuccessTextActive:c[10],colorErrorBg:g[1],colorErrorBgHover:g[2],colorErrorBgFilledHover:y,colorErrorBgActive:g[3],colorErrorBorder:g[3],colorErrorBorderHover:g[4],colorErrorHover:g[5],colorError:g[6],colorErrorActive:g[7],colorErrorTextHover:g[8],colorErrorText:g[9],colorErrorTextActive:g[10],colorWarningBg:p[1],colorWarningBgHover:p[2],colorWarningBorder:p[3],colorWarningBorderHover:p[4],colorWarningHover:p[4],colorWarning:p[6],colorWarningActive:p[7],colorWarningTextHover:p[8],colorWarningText:p[9],colorWarningTextActive:p[10],colorInfoBg:f[1],colorInfoBgHover:f[2],colorInfoBorder:f[3],colorInfoBorderHover:f[4],colorInfoHover:f[4],colorInfo:f[6],colorInfoActive:f[7],colorInfoTextHover:f[8],colorInfoText:f[9],colorInfoTextActive:f[10],colorLinkHover:b[4],colorLink:b[6],colorLinkActive:b[7],colorBgMask:new o.t("#000").setA(.45).toRgbString(),colorWhite:"#fff"}}(e,{generateColorPalettes:p,generateNeutralColorPalettes:g}),...d(e.fontSize),...function(e){let{sizeUnit:t,sizeStep:i}=e;return{sizeXXL:t*(i+8),sizeXL:t*(i+4),sizeLG:t*(i+2),sizeMD:t*(i+1),sizeMS:t*i,size:t*i,sizeSM:t*(i-1),sizeXS:t*(i-2),sizeXXS:t*(i-3)}}(e),...s(e),...function(e){let{motionUnit:t,motionBase:i,borderRadius:r,lineWidth:n}=e;return{motionDurationFast:`${(i+t).toFixed(1)}s`,motionDurationMid:`${(i+2*t).toFixed(1)}s`,motionDurationSlow:`${(i+3*t).toFixed(1)}s`,lineWidthBold:n+1,...a(r)}}(e)}})},76353:function(e,t,i){i.d(t,{M:()=>r,Z:()=>n});let r={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},n={...r,colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}},2307:function(e,t,i){function r(e){return(e+8)/e}function n(e){let t=Array.from({length:10}).map((t,i)=>{let r=e*Math.E**((i-1)/5);return 2*Math.floor((i>1?Math.floor(r):Math.ceil(r))/2)});return t[1]=e,t.map(e=>({size:e,lineHeight:r(e)}))}i.d(t,{D:()=>r,Z:()=>n})},35865:function(e,t,i){i.d(t,{NJ:()=>d,ZP:()=>g});var r=i(44194),n=i(55839),l=i(70723),o=i(79633),a=i(76353),s=i(38187),h=i(82274);let d={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},u={motionBase:!0,motionUnit:!0},c={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},p=(e,t,i)=>{let r=i.getDerivativeToken(e),{override:n,...l}=t,o={...r,override:n};return o=function(e){let{override:t,...i}=e,r={...t};Object.keys(a.Z).forEach(e=>{delete r[e]});let n={...i,...r};return!1===n.motion&&(n.motionDurationFast="0s",n.motionDurationMid="0s",n.motionDurationSlow="0s"),{...n,colorFillContent:n.colorFillSecondary,colorFillContentHover:n.colorFill,colorFillAlter:n.colorFillQuaternary,colorBgContainerDisabled:n.colorFillTertiary,colorBorderBg:n.colorBgContainer,colorSplit:(0,h.Z)(n.colorBorderSecondary,n.colorBgContainer),colorTextPlaceholder:n.colorTextQuaternary,colorTextDisabled:n.colorTextQuaternary,colorTextHeading:n.colorText,colorTextLabel:n.colorTextSecondary,colorTextDescription:n.colorTextTertiary,colorTextLightSolid:n.colorWhite,colorHighlight:n.colorError,colorBgTextHover:n.colorFillSecondary,colorBgTextActive:n.colorFill,colorIcon:n.colorTextTertiary,colorIconHover:n.colorText,colorErrorOutline:(0,h.Z)(n.colorErrorBg,n.colorBgContainer),colorWarningOutline:(0,h.Z)(n.colorWarningBg,n.colorBgContainer),fontSizeIcon:n.fontSizeSM,lineWidthFocus:3*n.lineWidth,lineWidth:n.lineWidth,controlOutlineWidth:2*n.lineWidth,controlInteractiveSize:n.controlHeight/2,controlItemBgHover:n.colorFillTertiary,controlItemBgActive:n.colorPrimaryBg,controlItemBgActiveHover:n.colorPrimaryBgHover,controlItemBgActiveDisabled:n.colorFill,controlTmpOutline:n.colorFillQuaternary,controlOutline:(0,h.Z)(n.colorPrimaryBg,n.colorBgContainer),lineType:n.lineType,borderRadius:n.borderRadius,borderRadiusXS:n.borderRadiusXS,borderRadiusSM:n.borderRadiusSM,borderRadiusLG:n.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:n.sizeXXS,paddingXS:n.sizeXS,paddingSM:n.sizeSM,padding:n.size,paddingMD:n.sizeMD,paddingLG:n.sizeLG,paddingXL:n.sizeXL,paddingContentHorizontalLG:n.sizeLG,paddingContentVerticalLG:n.sizeMS,paddingContentHorizontal:n.sizeMS,paddingContentVertical:n.sizeSM,paddingContentHorizontalSM:n.size,paddingContentVerticalSM:n.sizeXS,marginXXS:n.sizeXXS,marginXS:n.sizeXS,marginSM:n.sizeSM,margin:n.size,marginMD:n.sizeMD,marginLG:n.sizeLG,marginXL:n.sizeXL,marginXXL:n.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:1200,screenXLMin:1200,screenXLMax:1599,screenXXL:1600,screenXXLMin:1600,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new s.t("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new s.t("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new s.t("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)",...r}}(o),l&&Object.entries(l).forEach(([e,t])=>{let{theme:i,...r}=t,n=r;i&&(n=p({...o,...r},{override:r},i)),o[e]=n}),o};function g(){let{token:e,hashed:t,theme:i,override:s,cssVar:h,zeroRuntime:g}=r.useContext(l.Mj),f={prefix:h?.prefix??"ant",key:h?.key??"css-var-root"},m=`6.1.3-${t||""}`,b=i||o.Z,[y,v,_]=(0,n.fp)(b,[a.Z,e],{salt:m,override:s,getComputedToken:p,cssVar:{...f,unitless:d,ignore:u,preserve:c}});return[b,_,t?v:"",y,f,!!g]}},58476:function(e,t,i){i.d(t,{A1:()=>h,I$:()=>s,bk:()=>d,o_:()=>u});var r=i(44194),n=i(64033),l=i(391),o=i(83447),a=i(35865);let{genStyleHooks:s,genComponentStyleHook:h,genSubStyleComponent:d}=(0,n.rb)({usePrefix:()=>{let{getPrefixCls:e,iconPrefixCls:t}=(0,r.useContext)(l.E_);return{rootPrefixCls:e(),iconPrefixCls:t}},useToken:()=>{let[e,t,i,r,n,l]=(0,a.ZP)();return{theme:e,realToken:t,hashId:i,token:r,cssVar:n,zeroRuntime:l}},useCSP:()=>{let{csp:e}=(0,r.useContext)(l.E_);return e??{}},getResetStyles:(e,t)=>{let i=(0,o.Lx)(e);return[i,{"&":i},(0,o.JT)(t?.prefix.iconPrefixCls??l.oR)]},getCommonStyle:o.du,getCompUnitless:()=>a.NJ}),u=(e,t)=>{let i=`--${e.replace(".","")}-${t}-`;return(e,t=!1)=>{let r=`${i}${e}`;return t?`var(${r})`:r}}},82274:function(e,t,i){i.d(t,{Z:()=>l});var r=i(38187);function n(e){return e>=0&&e<=255}let l=function(e,t){let{r:i,g:l,b:o,a:a}=new r.t(e).toRgb();if(a<1)return e;let{r:s,g:h,b:d}=new r.t(t).toRgb();for(let e=.01;e<=1;e+=.01){let t=Math.round((i-s*(1-e))/e),a=Math.round((l-h*(1-e))/e),u=Math.round((o-d*(1-e))/e);if(n(t)&&n(a)&&n(u))return new r.t({r:t,g:a,b:u,a:Math.round(100*e)/100}).toRgbString()}return new r.t({r:i,g:l,b:o,a:1}).toRgbString()}},51429:function(e){e.exports=n,e.exports.isMobile=n,e.exports.default=n;let t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|redmi|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/CrOS/,r=/android|ipad|playbook|silk/i;function n(e){e||(e={});let n=e.ua;if(n||"undefined"==typeof navigator||(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),"string"!=typeof n)return!1;let l=t.test(n)&&!i.test(n)||!!e.tablet&&r.test(n);return!l&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==n.indexOf("Macintosh")&&-1!==n.indexOf("Safari")&&(l=!0),l}},62369:function(e,t){var i,r=Symbol.for("react.element"),n=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),f=Symbol.for("react.lazy");Symbol.for("react.offscreen");Symbol.for("react.module.reference"),t.ForwardRef=u,t.isMemo=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case a:case o:case c:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case u:case f:case g:case s:return e;default:return t}}case n:return t}}}(e)===g}},87101:function(e,t,i){e.exports=i(62369)},83436:function(e,t,i){i.d(t,{Z:()=>r});function r(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},70062:function(e,t,i){i.d(t,{Z:()=>r});function r(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}},86873:function(e,t,i){i.d(t,{Z:()=>l});var r=i(63489);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,r.Z)(n.key),n)}}function l(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}},62391:function(e,t,i){i.d(t,{Z:()=>a});var r=i(55309),n=i(23312),l=i(8230),o=i(83436);function a(e){var t=(0,n.Z)();return function(){var i,n=(0,r.Z)(e);i=t?Reflect.construct(n,arguments,(0,r.Z)(this).constructor):n.apply(this,arguments);if(i&&("object"==(0,l.Z)(i)||"function"==typeof i))return i;if(void 0!==i)throw TypeError("Derived constructors may only return object or undefined");return(0,o.Z)(this)}}},55309:function(e,t,i){i.d(t,{Z:()=>r});function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}},8159:function(e,t,i){i.d(t,{Z:()=>n});var r=i(89485);function n(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},23312:function(e,t,i){i.d(t,{Z:()=>r});function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r=function(){return!!e})()}},88185:function(e,t,i){i.d(t,{Z:()=>l});var r=i(14816);function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach(function(t){(0,r.Z)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}},89485:function(e,t,i){i.d(t,{Z:()=>r});function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}},10976:function(e,t,i){i.d(t,{W:()=>r});function r(){for(var e,t,i=0,r="",n=arguments.length;i<n;i++)(e=arguments[i])&&(t=function e(t){var i,r,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(i=0;i<l;i++)t[i]&&(r=e(t[i]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}(e))&&(r&&(r+=" "),r+=t);return r}},5811:function(e,t,i){i.d(t,{U:()=>s});var r=i(44194);let n=e=>{let t,i=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),i.forEach(i=>i(t,e))}},n=()=>t,l={setState:r,getState:n,getInitialState:()=>o,subscribe:e=>(i.add(e),()=>i.delete(e))},o=t=e(r,n,l);return l},l=e=>e?n(e):n,o=e=>e,a=e=>{let t=l(e),i=e=>(function(e,t=o){let i=r.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return r.useDebugValue(i),i})(t,e);return Object.assign(i,t),i},s=e=>e?a(e):a},4474:function(e,t,i){i.d(t,{N:()=>s});var r=i(44194);let n=e=>Symbol.iterator in e,l=e=>"entries"in e,o=(e,t)=>{let i=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(i.size!==r.size)return!1;for(let[e,t]of i)if(!Object.is(t,r.get(e)))return!1;return!0},a=(e,t)=>{let i=e[Symbol.iterator](),r=t[Symbol.iterator](),n=i.next(),l=r.next();for(;!n.done&&!l.done;){if(!Object.is(n.value,l.value))return!1;n=i.next(),l=r.next()}return!!n.done&&!!l.done};function s(e){let t=r.useRef(void 0);return i=>{var r,s;let h=e(i);return(r=t.current,Object.is(r,s=h)||"object"==typeof r&&null!==r&&"object"==typeof s&&null!==s&&Object.getPrototypeOf(r)===Object.getPrototypeOf(s)&&(n(r)&&n(s)?l(r)&&l(s)?o(r,s):a(r,s):o({entries:()=>Object.entries(r)},{entries:()=>Object.entries(s)})))?t.current:t.current=h}}}}]);
//# sourceMappingURL=8693.1b167ac8.js.map