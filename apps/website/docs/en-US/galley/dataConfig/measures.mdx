---
pageType: doc
---

import { MeasureGroups, Measures, MeasureDataFormat, MeasureAutoDataFormat } from '@components'

# 指标

:::info {title="指标"} 支持树形指标组, 指标分组后, 图表会组合在一起, 其中双轴图更为特殊:::

## 普通指标

<Measures />

```json {4-6}
{
  "chartType": "columnParallel",
  "measures": [
    { "id": "profit", "alias": "利润" },
    { "id": "sales", "alias": "销售额" }
    { "id": "discount", "alias": "折扣" }
  ],
  "dimensions": [{ "id": "date", "alias": "日期", "location": "dimension" }],
  "dataset": [
    { "date": "2019", "profit": 10, "sales": 20, "discount": 0.1 },
    { "date": "2020", "profit": 30, "sales": 60, "discount": 0.2 },
    { "date": "2021", "profit": 30, "sales": 60, "discount": 0.1 },
    { "date": "2022", "profit": 50, "sales": 100, "discount": 0.2 },
    { "date": "2023", "profit": 40, "sales": 80, "discount": 0.3 }
  ]
}
```

## 指标组

<MeasureGroups />

```json {4-17}
{
  "chartType": "column",
  "measures": [
    {
      "id": "group1",
      "alias": "分组1",
      "children": [
        { "id": "profit", "alias": "利润" },
        { "id": "sales", "alias": "销售额" }
      ]
    },
    {
      "id": "group2",
      "alias": "分组2",
      "children": [{ "id": "discount", "alias": "折扣" }]
    },
    { "id": "rateOfReturn", "alias": "回报率" }
  ],
  "dimensions": [{ "id": "date", "alias": "日期", "location": "dimension" }],
  "dataset": [
    { "date": "2019", "profit": 10, "sales": 20, "discount": 0.5, "rateOfReturn": 0.1 },
    { "date": "2020", "profit": 20, "sales": 40, "discount": 0.2, "rateOfReturn": 0.2 },
    { "date": "2021", "profit": 30, "sales": 60, "discount": 0.4, "rateOfReturn": 0.3 },
    { "date": "2022", "profit": 40, "sales": 80, "discount": 0.2, "rateOfReturn": 0.4 },
    { "date": "2023", "profit": 50, "sales": 100, "discount": 0.05, "rateOfReturn": 0.5 }
  ]
}
```

## 自动数据格式

<MeasureAutoDataFormat />

```tsx pure
export const MeasureAutoDataFormat = memo(() => {
  const vseed: VSeed = {
    chartType: 'columnParallel',
    measures: [
      {
        id: 'group1',
        alias: 'group1',
        children: [
          {
            id: 'profit',
            alias: '利润',
            autoFormat: false,
          },
          {
            id: 'sales',
            alias: '销售额',
            autoFormat: true,
          },
        ],
      },
      {
        id: 'group2',
        alias: 'group2',
        children: [
          {
            id: 'discount',
            alias: '折扣',
            autoFormat: true,
          },
        ],
      },
      {
        id: 'rateOfReturn',
        alias: '回报率',
        autoFormat: true,
      },
    ],
    dimensions: [{ id: 'date', alias: '日期', location: 'dimension' }],
    dataset: [
      { date: '2019', profit: 10000, sales: 200000, discount: 0.5, rateOfReturn: 0.001 },
      { date: '2020', profit: 20000, sales: 400000, discount: 0.2, rateOfReturn: 0.002 },
      { date: '2021', profit: 30000, sales: 600000, discount: 0.4, rateOfReturn: 0.003 },
      { date: '2022', profit: 40000, sales: 800000, discount: 0.2, rateOfReturn: 0.004 },
      { date: '2023', profit: 50000, sales: 1000000, discount: 0.05, rateOfReturn: 0.005 },
    ],
  }
  return <PivotChart vseed={vseed} />
})
```

## 数据格式

<MeasureDataFormat />

```tsx pure {4-50}
export const MeasureDataFormat = memo(() => {
  const vseed: VSeed = {
    chartType: 'columnParallel',
    measures: [
      {
        id: 'profit',
        alias: '利润',
        format: {
          type: 'number',
          ratio: 1000,
          symbol: 'K',
          thousandSeparator: true,
          decimalPlaces: 2,
          round: 'round',
          prefix: '¥',
          suffix: '',
        },
      },
      {
        id: 'sales',
        alias: '销售额',
        format: {
          type: 'number',
          ratio: 10000,
          symbol: '万',
          thousandSeparator: true,
          decimalPlaces: 2,
          round: 'round',
          prefix: '¥',
        },
      },
      {
        id: 'discount',
        alias: '折扣',
        format: {
          type: 'percent',
          decimalPlaces: 2,
          round: 'round',
        },
      },
      {
        id: 'rateOfReturn',
        alias: '回报率',
        format: {
          type: 'permille',
          decimalPlaces: 2,
          round: 'floor',
        },
      },
    ],
    dimensions: [{ id: 'date', alias: '日期', location: 'dimension' }],
    dataset: [
      { date: '2019', profit: 10000, sales: 200000, discount: 0.5, rateOfReturn: 0.1 },
      { date: '2020', profit: 20000, sales: 400000, discount: 0.2, rateOfReturn: 0.02 },
      { date: '2021', profit: 30000, sales: 600000, discount: 0.4, rateOfReturn: 0.003 },
      { date: '2022', profit: 40000, sales: 800000, discount: 0.2, rateOfReturn: 0.0004 },
      { date: '2023', profit: 50000, sales: 1000000, discount: 0.05, rateOfReturn: 0.00005 },
    ],
  }
  return <VChartRender vseed={vseed} />
})
```
