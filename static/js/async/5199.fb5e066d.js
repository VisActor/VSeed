"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["5199"],{60378:function(e,l,i){i.r(l),i.d(l,{AngleEncoding:()=>ex,Builder:()=>L,ColorEncoding:()=>ev,ColorIdEncoding:()=>eA,DetailEncoding:()=>eC,FoldMeasureId:()=>es,FoldMeasureName:()=>ea,FoldMeasureValue:()=>ed,FoldPrimaryMeasureValue:()=>ec,FoldSecondaryMeasureValue:()=>eh,FoldXMeasureId:()=>eg,FoldXMeasureValue:()=>ef,FoldYMeasureId:()=>em,FoldYMeasureValue:()=>ep,MeasureName:()=>eu,ORIGINAL_DATA:()=>er,Separator:()=>ro,XEncoding:()=>eb,YEncoding:()=>ey,areaAdvancedPipeline:()=>iw,areaPercentAdvancedPipeline:()=>iN,areaPercentSpecPipeline:()=>i$,areaSpecPipeline:()=>iH,autoFormatter:()=>q,autoNumFormatter:()=>j,barAdvancedPipeline:()=>iI,barParallelAdvancedPipeline:()=>iP,barParallelSpecPipeline:()=>iT,barPercentAdvancedPipeline:()=>iX,barPercentSpecPipeline:()=>iZ,barSpecPipeline:()=>iB,columnAdvancedPipeline:()=>l8,columnParallelAdvancedPipeline:()=>is,columnParallelSpecPipeline:()=>iu,columnPercentAdvancedPipeline:()=>ih,columnPercentSpecPipeline:()=>ig,columnSpecPipeline:()=>ir,createFormatter:()=>U,createNumFormatter:()=>G,darkTheme:()=>n_,dataReshapeByEncoding:()=>e3,donutAdvancedPipeline:()=>tW,donutSpecPipeline:()=>tZ,dualAxisAdvancedPipeline:()=>ts,dualAxisSpecPipeline:()=>tv,execPipeline:()=>R,findAllDimensions:()=>nT,findAllMeasures:()=>w,findFirstMeasure:()=>O,findMeasureById:()=>Z,foldMeasures:()=>e_,funnelAdvancedPipeline:()=>na,funnelSpecPipeline:()=>nc,heatmapAdvancedPipeline:()=>nb,heatmapSpecPipeline:()=>nI,i18n:()=>B,intl:()=>z,isDimensionSelector:()=>l_,isMeasure:()=>Y,isMeasureGroup:()=>N,isMeasureSelector:()=>lS,isMeasures:()=>$,isPartialDatumSelector:()=>lk,isPivotChart:()=>eq,isPivotTable:()=>eG,isTable:()=>eK,isVChart:()=>eU,isVTable:()=>ej,isValueSelector:()=>lI,lightTheme:()=>nS,lineAdvancedPipeline:()=>ld,lineSpecPipeline:()=>lQ,measureDepth:()=>e$,pieAdvancedPipeline:()=>tz,pieSpecPipeline:()=>tL,pivotTableAdvancedPipeline:()=>eM,pivotTableSpecPipeline:()=>eB,preorderTraverse:()=>X,radarAdvancedPipeline:()=>t8,radarSpecPipeline:()=>nl,registerAll:()=>nF,registerArea:()=>iY,registerAreaPercent:()=>iK,registerBar:()=>iF,registerBarParallel:()=>iW,registerBarPercent:()=>iO,registerColumn:()=>ia,registerColumnParallel:()=>ic,registerColumnPercent:()=>im,registerCustomTheme:()=>nM,registerDarkTheme:()=>nB,registerDonut:()=>tO,registerFunnel:()=>nh,registerHeatmap:()=>nk,registerLightTheme:()=>nz,registerLine:()=>l0,registerPie:()=>tT,registerPivotTable:()=>eF,registerRadar:()=>ni,registerRose:()=>tJ,registerRoseParallel:()=>t2,registerScatter:()=>i9,registerTable:()=>eo,roseAdvancedPipeline:()=>tN,roseParallelAdvancedPipeline:()=>tQ,roseParallelSpecPipeline:()=>t1,roseSpecPipeline:()=>tq,scatterAdvancedPipeline:()=>i2,scatterSpecPipeline:()=>i6,selector:()=>lR,tableAdvancedPipeline:()=>H,tableSpecPipeline:()=>en,unfoldDimensions:()=>e2,updateAdvanced:()=>nP,updateSpec:()=>nL,zAdvancedVSeed:()=>rn,zAnalysis:()=>oN,zAnnotation:()=>oD,zAnnotationArea:()=>oE,zAnnotationHorizontalLine:()=>oV,zAnnotationPoint:()=>oO,zAnnotationVerticalLine:()=>ow,zArea:()=>o2,zAreaConfig:()=>og,zAreaPercent:()=>o4,zAreaPercentConfig:()=>om,zAreaStyle:()=>oX,zAxis:()=>o_,zBackgroundColor:()=>n9,zBar:()=>oQ,zBarConfig:()=>oh,zBarParallel:()=>o0,zBarParallelConfig:()=>of,zBarPercent:()=>o1,zBarPercentConfig:()=>op,zBarStyle:()=>oL,zChartType:()=>nW,zColor:()=>oe,zColorLegend:()=>on,zColumn:()=>oU,zColumnConfig:()=>od,zColumnParallel:()=>oq,zColumnParallelConfig:()=>ou,zColumnPercent:()=>oJ,zColumnPercentConfig:()=>oc,zConfig:()=>oS,zCrosshairLine:()=>n7,zCrosshairRect:()=>n8,zCustomTheme:()=>oz,zCustomThemeConfig:()=>oM,zDataset:()=>nO,zDatasetReshapeInfo:()=>n0,zDatum:()=>nZ,zDimension:()=>nw,zDimensionGroup:()=>nV,zDimensionTree:()=>nD,zDimensions:()=>nE,zDonut:()=>o9,zDonutConfig:()=>oA,zDualAxis:()=>o5,zDualAxisConfig:()=>ob,zDualChartType:()=>nX,zDualMeasure:()=>nG,zDualMeasures:()=>nj,zEncoding:()=>n1,zFoldInfo:()=>nJ,zFunnel:()=>rl,zFunnelConfig:()=>oI,zHeatmap:()=>ri,zHeatmapConfig:()=>ok,zLabel:()=>oi,zLegend:()=>ot,zLine:()=>oj,zLineConfig:()=>os,zLineStyle:()=>oW,zLinearColor:()=>ol,zLocale:()=>o$,zMarkStyle:()=>oZ,zMeasure:()=>nY,zMeasureGroup:()=>nN,zMeasureTree:()=>nK,zMeasures:()=>n$,zNumFormat:()=>nH,zPie:()=>o6,zPieConfig:()=>ov,zPivotTable:()=>oG,zPivotTableConfig:()=>oa,zPointStyle:()=>oT,zRadar:()=>re,zRadarConfig:()=>oR,zRose:()=>o7,zRoseConfig:()=>ox,zRoseParallel:()=>o8,zRoseParallelConfig:()=>oC,zScatter:()=>o3,zScatterConfig:()=>oy,zScatterMeasure:()=>nU,zScatterMeasures:()=>nq,zSort:()=>oH,zSortLegend:()=>oY,zStackCornerRadius:()=>n6,zTable:()=>oK,zTableConfig:()=>or,zTheme:()=>oB,zTooltip:()=>oo,zUnfoldInfo:()=>nQ,zVSeed:()=>rt,zXBandAxis:()=>n2,zXLinearAxis:()=>n3,zYBandAxis:()=>n4,zYLinearAxis:()=>n5});var t,n,o,r,a=i(12341),s=i(40160),d=i(84086),u=i(83361),c=i(51560),h=i(53126),f=i(36922),p=i(62443),g=i(57969),m=i(60647),b=i(24356),y=i(36628),x=i(34712),C=i(83498),v=i(16304),A=i(24709);let R=(e,l,i={})=>e.reduce((e,i)=>i(e,l),i),I=e=>{let l="undefined"!=typeof performance?performance.now():Date.now(),{chartType:i}=e.vseed;if(!i)throw Error("chartType is nil in buildAdvanced");let t=L.getAdvancedPipeline(i);if(!t)throw Error(`no advanced pipeline for chartType ${i}`);let n={vseed:e.vseed,customTheme:L.getThemeMap()};try{return R(t,n)}catch(e){throw console.error(e),Error("buildAdvanced error, see error info in console")}finally{let i="undefined"!=typeof performance?performance.now():Date.now();e.performance.buildAdvanced=`${(i-l).toFixed(4)}ms`}},k=(e,l)=>{let i="undefined"!=typeof performance?performance.now():Date.now(),{chartType:t}=e.vseed;if(!t)throw Error("chartType is nil in buildSpec");let n=L.getSpecPipeline(t);if(!n)throw Error(`no spec pipeline for chartType ${t}`);let o={vseed:e.vseed,advancedVSeed:l};try{return R(n,o)}catch(e){throw console.error(e),Error("buildSpec error, see error info in console")}finally{let l="undefined"!=typeof performance?performance.now():Date.now();e.performance.buildSpec=`${(l-i).toFixed(4)}ms`}},S=e=>{let l=e.buildAdvanced();if(e.advancedVSeed=l,!l)throw Error("advancedVSeed is null");let i=e.buildSpec(l);return e.spec=i,i};var _=JSON.parse('{"指标名称":{"en-US":"MeasureName","zh-CN":"指标名称"},"指标Id":{"en-US":"MeasureId","zh-CN":"指标Id"},"指标值":{"en-US":"MeasureValue","zh-CN":"指标值"}}');class M{static instance;translateMap=_;locale="zh-CN";canTranslate=e=>!!this.translateMap[e];i18n=(e,...l)=>{let i=e.map((e,i)=>e+(l[i]||"")).join(""),t=this.translateMap?.[i]?.[this.locale];return(0,a.a)(t)?(console.warn(`i18n ${this.locale} no translate: ${i}`),i):t};setLocale=e=>{this.locale=e};getLocale=()=>this.locale;static getInstance(){return M.instance||(M.instance=new M),M.instance}}let z=M.getInstance(),B=z.i18n,F=e=>{let l=e.advancedVSeed;if(!l)return[];let{datasetReshapeInfo:i}=l,t=(0,s.a)(i.flatMap(e=>e.unfoldInfo.colorItems)),n=i.reduce((e,l)=>({...e,...l.unfoldInfo.colorIdMap}),{});return t.map(e=>n[e])},P=e=>{let l=e.advancedVSeed;if(!l)return{};let{datasetReshapeInfo:i}=l;return i.reduce((e,l)=>({...e,...l.unfoldInfo.colorIdMap}),{})};class L{_vseed;_advancedVSeed=null;_spec=null;_performance={};constructor(e){this._vseed=e,this._vseed.locale=e.locale||z.getLocale()}build=()=>S(this);buildSpec=e=>k(this,e);buildAdvanced=()=>I(this);getColorItems=()=>F(this);getColorIdMap=()=>P(this);get vseed(){return this._vseed}set vseed(e){this._vseed=e}get advancedVSeed(){return this._advancedVSeed}set advancedVSeed(e){this._advancedVSeed=e}get spec(){return this._spec}set spec(e){this._spec=e}get performance(){return this._performance}set performance(e){this._performance=e}static getAdvancedPipeline=e=>{let l=L._customAdvancedPipe[e],i=L._advancedPipelineMap[e];return l&&i.push(l),i};static getSpecPipeline=e=>{let l=L._customSpecPipe[e],i=L._specPipelineMap[e];return l&&i.push(l),i};static getTheme=e=>L._themeMap[e];static getThemeMap=()=>L._themeMap;static from=e=>new L(e);static _advancedPipelineMap={};static _specPipelineMap={};static _customAdvancedPipe={};static _customSpecPipe={};static _themeMap={}}let T=(e,l)=>{let{vseed:i}=l,{chartType:t,locale:n}=i;return{...e,chartType:t,locale:n||"zh-CN"}},W=(e,l)=>{let{vseed:i}=l,{measures:t,dataset:n}=i;if(t&&t.length>0)return{...e,measures:t};if(!n)throw Error("dataset is required");if(0===n.length)return{...e,measures:[]};let o=n.slice(0,100),r=Object.keys(o.reduce((e,l)=>({...e,...l}),{})).filter(e=>o.some(l=>"number"==typeof l[e])&&!["",null,void 0].includes(e)).map(e=>({id:e,alias:e}));return{...e,measures:r}},X=(e,l)=>{if(!e||0===e.length)return;let i=[...e].reverse();for(;i.length>0;){let e=i.pop();if(!0===l(e))return;if(!("children"in e))continue;let t=e.children;if(t&&t.length>0)for(let e=t.length-1;e>=0;e--){let l=t[e];i.push(l)}}},Z=(e=[],l)=>{let i;if(e)return X(e,e=>!("children"in e)&&e.id===l&&(i=e,!0)),i},O=(e=[])=>{let l;if(e)return X(e,e=>!("children"in e)&&(l=e,!0)),l},w=(e=[])=>{if(!e)return[];let l=[];return X(e,e=>("children"in e||l.push(e),!1)),l},V=(e,l)=>{let i={...e},{vseed:t}=l,{dimensions:n,dataset:o}=t;if(n&&n.length>0)return{...i,dimensions:n};if(!o)throw Error("dataset is required");if(0===o.length)return i;let r=w(e.measures),a=o.slice(0,100),s=Object.keys(a.reduce((e,l)=>({...e,...l}),{})).filter(e=>a.some(l=>"string"==typeof l[e])&&!["",null,void 0].includes(e)&&!r.some(l=>l.id===e)).map(e=>({id:e,alias:e}));return{...i,dimensions:s}},E=(e,l)=>{let{customTheme:i,vseed:t}=l,{theme:n="light",chartType:o}=t,r={...e};if(!i||!i[n])return r;let a=i?.[n].config?.[o];if(a){let e=r.config?.[o]||{},l=(0,u.a)(a,(0,c.a)(e));for(let e in l)Array.isArray(l[e])&&(l[e]=D(l[e],a[e]));r.config={[o]:l}}let s=i?.[n]?.config?.[o];return r.customTheme={config:{[o]:s}},r},D=(e,l)=>(0,a.a)(l)||(0,h.a)(l)||(0,f.a)(l)||!Array.isArray(e)||e.some(e=>!(0,p.a)(e))?e:e.map(e=>(0,g.a)(l,e)),H=[T,W,V,(e,l)=>{let{vseed:i}=l,{dataset:t}=i;return{...e,dataset:t}},(e,l)=>{let{vseed:i}=l,{chartType:t}=i,n={...e},o=(0,d.a)(i,["backgroundColor","bodyFontSize","bodyFontColor","bodyBackgroundColor","headerFontSize","headerFontColor","headerBackgroundColor","hoverHeaderBackgroundColor","hoverHeaderInlineBackgroundColor","selectedBorderColor","selectedBackgroundColor"]);return n.config={...n.config||{},[t]:{...o}},n},E],Y=e=>!("children"in e),N=e=>"children"in e,$=e=>e.every(Y),K=(e,l)=>e.map(e=>{if("children"in e&&Array.isArray(e.children)){let i=e.id,t=e.alias??e.id,n=l?.(e)||{};return{field:i,title:t,columns:K(e.children,l),...n}}{let i=e.id;return{field:i,title:e.alias??e.id,...l?.(e)||{}}}})||[],G=(e,l=z.getLocale())=>{let{type:i="number",ratio:t=1,symbol:n="",thousandSeparator:o=!0,prefix:r="",suffix:a="",fractionDigits:s=2,significantDigits:d,roundingMode:u="halfExpand",roundingPriority:c="auto"}=e||{},h={style:"decimal",notation:"scientific"===i?"scientific":"standard",roundingMode:u,roundingPriority:c};(0,f.a)(s)&&s>=0&&(h.minimumFractionDigits=s,h.maximumFractionDigits=s),(0,f.a)(d)&&d>0&&d>0&&(h.minimumSignificantDigits=d,h.maximumSignificantDigits=d);let p=new Intl.NumberFormat(l,h);return e=>{let l=Number(e),s="";if(Number.isNaN(l))return String(e);"percent"===i?(l*=100,s="%"):"permille"===i?(l*=1e3,s="‰"):"number"===i&&(l/=t||1);let d=p.format(l);if(o){let e=d.split(".");e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),d=e.join(".")}return`${r}${d}${s}${n}${a}`}},j=(e,l=z.getLocale())=>{if(null==e||Number.isNaN(Number(e)))return String(e);let i={style:"decimal",notation:"compact"};return i.minimumFractionDigits=0,i.maximumFractionDigits=2,new Intl.NumberFormat(l,{...i}).format(Number(e))},U=e=>G(e),q=(e,l)=>j(e,l),J=(e,l)=>i=>{let{format:t={},autoFormat:n=!0,id:o}=e,r=i[o];return(0,m.a)(t)?n?q(r,l):void 0:U(t)(r)},Q=(e,l)=>e.map(e=>{if("children"in e&&Array.isArray(e.children)){let i=e.id,t=e.alias??e.id,n=l?.(e)||{};return{field:i,title:t,columns:Q(e.children,l),...n}}{let i=e.id;return{field:i,title:e.alias??e.id,...l?.(e)||{}}}})||[],ee=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{chartType:n,config:o}=t,r=o?.[n];if(!i.theme||!r)return i;let a=r.borderColor||"rgb(224, 224, 224)",s=r.bodyBackgroundColor||"#fff",d=r.bodyFontColor||"#1B1F23",u=r.bodyFontSize||12,c=r.hoverBodyBackgroundColor||"#bedaff",h=r.hoverBodyInlineBackgroundColor||"#bedaff";return i.theme.bodyStyle={borderColor:a,borderLineWidth:1,padding:[8,12,8,12],textAlign:"right",hover:{cellBgColor:c,inlineRowBgColor:h,inlineColumnBgColor:h},color:d,fontSize:u,fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",bgColor:s,lineHeight:1.5*u},i},el=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{config:n,chartType:o}=t,r=n?.[o];if(!i.theme||!r)return i;let a=r.borderColor||"rgb(224, 224, 224)",s=r.headerBackgroundColor||"#EEF1F5",d=r.headerFontColor||"#1B1F23",u=r.headerFontSize||12,c=r.hoverHeaderBackgroundColor||"#bedaff",h=r.hoverHeaderInlineBackgroundColor||"#bedaff";return i.theme.headerStyle={borderColor:a,borderLineWidth:1,padding:[8,12,8,12],textAlign:"center",hover:{cellBgColor:c,inlineRowBgColor:h,inlineColumnBgColor:h},frameStyle:{borderColor:[null,null,a,null],borderLineWidth:1},fontSize:u,fontVariant:"normal",fontStyle:"normal",fontWeight:"bold",color:d,bgColor:s,lineHeight:1.5*u},i},ei=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{config:n,chartType:o}=t,r=n?.[o];if(!i.theme||!r)return i;let a=r.borderColor||"rgb(224, 224, 224)";return i.theme.frameStyle={borderColor:a,borderLineWidth:0,cornerRadius:4},i},et=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{config:n,chartType:o}=t,r=n?.[o];if(!i.theme||!r)return i;let a=r.selectedBorderColor||"rgb(224, 224, 224)",s=r.selectedBackgroundColor||"rgb(224, 224, 224, 0.5)";return i.theme.selectionStyle={cellBorderColor:a,cellBorderLineWidth:2,cellBgColor:s},i},en=[(e,l)=>{let{advancedVSeed:i}=l,{dataset:t}=i,{config:n}=i,{backgroundColor:o="transparent"}=n.table||{};return{...e,records:t,widthMode:"standard",heightMode:"autoHeight",autoWrapText:!0,columnResizeMode:"all",showHeader:!0,tooltip:{isShowOverflowTextTooltip:!0},animationAppear:{duration:300,delay:250,type:"one-by-one",direction:"row"},hover:{highlightMode:"row"},theme:{underlayBackgroundColor:o}}},(e,l)=>{let{advancedVSeed:i}=l,t=i.dimensions,n={...e},o=K(t,e=>Y(e)?{width:"auto"}:{});return{...n,columns:[...n.columns||[],...o]}},(e,l)=>{let{advancedVSeed:i}=l,{locale:t}=i,n=i.measures,o={...e},r=Q(n,e=>Y(e)?{width:"auto",fieldFormat:J(e,t)}:{});return{...o,columns:[...o.columns||[],...r]}},ee,el,ei,et],eo=()=>{L._advancedPipelineMap.table=H,L._specPipelineMap.table=en},er="__OriginalData__",ea="__MeaName__",es="__MeaId__",ed="__MeaValue__",eu=ea,ec="__MeaPrimaryValue__",eh="__MeaSecondaryValue__",ef="__MeaXValue__",ep="__MeaYValue__",eg="__MeaXId__",em="__MeaYId__",eb="__Dim_X__",ey="__Dim_Y__",ex="__Dim_Angle__",eC="__Dim_Detail__",ev="__Dim_Color__",eA="__Dim_ColorId__",eR=(e,l)=>{let i=(0,s.a)(e.map(e=>e.id));l.tooltip=i,l.row=[],l.column=[],i.forEach((e,i)=>{i%2==0?l.column.push(e):l.row.push(e)})},eI=(e,l)=>{l.tooltip=(0,s.a)(e.map(e=>e.id)),l.row=[],l.column=[],e.forEach((e,i)=>{let t=e.id;"row"===e.encoding?l.row.push(t):"column"===e.encoding||i%2==0?l.column.push(t):l.row.push(t)})},ek=(e,l)=>{l.tooltip=(0,s.a)(e.map(e=>e.id)),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding||!e.encoding).map(e=>e.id))},eS=(e,l)=>{l.tooltip=e.map(e=>e.id),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding||!e.encoding).map(e=>e.id))},e_=(e,l,i)=>{let{measureId:t,measureName:n,measureValue:o,colorMeasureId:r}=i||{},a={measureId:t,measureName:n,measureValue:o,colorRange:[0,1],measureRange:[0,1],foldMap:{}},s=Array(e.length*l.length),d=0,u=l.map(e=>e.id);for(let i=0;i<e.length;i++)for(let c=0;c<l.length;c++){let h=(0,b.a)({...e[i]},u);h[er]=e[i];let{id:f,alias:p}=l[c];if(h[f]=e[i][f],h[t]=f,h[n]=p||f,h[o]=e[i][f],r){let e=h[er][r];h[ev]=e,h[eA]=r,a.colorRange=[Math.min(a.colorRange[0]||1/0,Number(e)),Math.max(a.colorRange[1]||-1/0,Number(e))]}a.measureRange=[Math.min(a.measureRange[0]||1/0,Number(h[f])),Math.max(a.measureRange[1]||-1/0,Number(h[f]))],a.foldMap[f]=p,s[d++]=h}return{dataset:s,foldInfo:a}},eM=[T,W,V,e=>{let l={...e},i={id:eu,alias:z.i18n`指标名称`};return l.dimensions?.some(e=>e.id===eu)||l.dimensions?.push(i),l},e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?eI(i,r):eR(i,r),o?eS(t,r):ek(t,r),{...e,encoding:r}},(e,l)=>{let i={...e},{vseed:t}=l,{dataset:n,chartType:o}=t,{dimensions:r,measures:a}=e,{dataset:s,foldInfo:d}=e_(n,w(a),{measureId:es,measureName:ea,measureValue:ed}),u=[{id:String(o),index:0,foldInfo:d}];return{...i,dataset:s,datasetReshapeInfo:u,dimensions:r,measures:a}},(e,l)=>{let{vseed:i}=l,{chartType:t}=i,n={...e},o=(0,d.a)(i,["backgroundColor","bodyFontSize","bodyFontColor","bodyBackgroundColor","headerFontSize","headerFontColor","headerBackgroundColor","hoverHeaderBackgroundColor","hoverHeaderInlineBackgroundColor","selectedBorderColor","selectedBackgroundColor"]);return n.config={...n.config||{},[t]:{...o}},n},E],ez=(e,l,i)=>(t,n,o,r)=>{if(!(0,f.a)(n)||!(0,f.a)(o)||!r)return t;let a=r.getCellOriginRecord(n,o);if(!a[0])return t;let{measureId:s}=l,d=Z(e,a[0][s]);if(!d)return t;let{format:u={},autoFormat:c=!0}=d;return(0,m.a)(u)?c?q(t,i):void 0:U(u)(t)};(t=o||(o={})).RECORD="RECORD",t.NONE="NONE",t.SUM="SUM",t.MIN="MIN",t.MAX="MAX",t.AVG="AVG",t.COUNT="COUNT",t.CUSTOM="CUSTOM",t.RECALCULATE="RECALCULATE",(n=r||(r={})).ASC="ASC",n.DESC="DESC",n.NORMAL="NORMAL",n.desc="desc",n.asc="asc",n.normal="normal";let eB=[(e,l)=>{let{advancedVSeed:i}=l,{dataset:t}=i,{config:n}=i,{backgroundColor:o="transparent"}=n.pivotTable||{};return{...e,records:t,widthMode:"standard",heightMode:"autoHeight",autoWrapText:!0,columnResizeMode:"all",columnResizeType:"column",showColumnHeader:!0,showRowHeader:!0,select:{highlightMode:"cell",headerSelectMode:"inline"},hover:{highlightMode:"cross"},tooltip:{isShowOverflowTextTooltip:!0},corner:{titleOnDimension:"all"},widthAdaptiveMode:"all",animationAppear:{duration:300,delay:250,type:"one-by-one",direction:"row"},theme:{underlayBackgroundColor:o}}},(e,l)=>{let{advancedVSeed:i}=l,{encoding:t}=i,n=i.dimensions.filter(e=>t.column?.includes(e.id));return{...e,columns:n.map(e=>({dimensionKey:e.id,title:e.alias||e.id,width:"auto"}))}},(e,l)=>{let{advancedVSeed:i}=l,t=i.dimensions,{encoding:n}=i,o=t.filter(e=>n.row?.includes(e.id));return{...e,rows:o.map(e=>({dimensionKey:e.id,title:e.alias||e.id,width:"auto"}))}},(e,l)=>{let{advancedVSeed:i}=l,{locale:t,measures:n,datasetReshapeInfo:o}=i,{foldInfo:r}=o[0];return{...e,indicatorsAsCol:!0,indicatorTitle:z.i18n`指标名称`,hideIndicatorName:!0,indicators:[{cellType:"text",indicatorKey:r.measureValue,title:"indicator",width:"auto",format:ez(n,r,t)}]}},ee,el,(e,l)=>{let i={...e},{advancedVSeed:t}=l,{config:n,chartType:o}=t,r=n?.[o];if(!i.theme||!r)return i;let a=r.borderColor||"rgb(224, 224, 224)",s=r.headerBackgroundColor||"#EEF1F5",d=r.headerFontColor||"#1B1F23",u=r.headerFontSize||12,c=r.hoverHeaderBackgroundColor||"#bedaff",h=r.hoverHeaderInlineBackgroundColor||"#bedaff";return i.theme.rowHeaderStyle={borderColor:a,borderLineWidth:1,padding:[8,12,8,12],textAlign:"left",hover:{cellBgColor:c,inlineRowBgColor:h,inlineColumnBgColor:h},frameStyle:{borderColor:[null,a,null,null],borderLineWidth:1},fontSize:u,fontVariant:"normal",fontStyle:"normal",fontWeight:"bold",color:d,bgColor:s,lineHeight:1.5*u},i},(e,l)=>{let i={...e},{advancedVSeed:t}=l,{config:n,chartType:o}=t,r=n?.[o];if(!i.theme||!r)return i;let a=r.borderColor||"rgb(224, 224, 224)",s=r.headerBackgroundColor||"#EEF1F5",d=r.headerFontColor||"#1B1F23",u=r.headerFontSize||12,c=r.hoverHeaderInlineBackgroundColor,h=r.hoverHeaderBackgroundColor;return i.theme.cornerHeaderStyle={borderColor:[a,a],borderLineWidth:1,padding:[8,12,8,12],textAlign:"left",hover:{cellBgColor:h||void 0,inlineRowBgColor:c||void 0,inlineColumnBgColor:c||void 0},frameStyle:{borderColor:[null,a,a,null],borderLineWidth:1},fontSize:u,fontVariant:"normal",fontStyle:"normal",fontWeight:"bold",color:d,bgColor:s,lineHeight:1.5*u},i},ei,et,(e,l)=>{let{advancedVSeed:i}=l,t=w(i.measures).map(e=>({field:e.id,aggregationType:o.NONE,indicatorKey:e.id}));return{...e,dataConfig:{aggregationRules:t}}}],eF=()=>{L._advancedPipelineMap.pivotTable=eM,L._specPipelineMap.pivotTable=eB},eP=(e,l)=>{let{vseed:i}=l,{chartType:t,locale:n}=i;return{...e,chartType:t,locale:n||"zh-CN"}},eL=(e,l)=>{let{vseed:i}=l,{measures:t,dataset:n}=i;if(t&&t.length>0)return{...e,measures:t};if(!n)throw Error("dataset is required");if(0===n.length)return{...e,measures:[]};let o=n.slice(0,100),r=Object.keys(o.reduce((e,l)=>({...e,...l}),{})).filter(e=>o.some(l=>"number"==typeof l[e])&&!["",null,void 0].includes(e)).map(e=>({id:e,alias:e}));return{...e,measures:r}},eT=(e,l)=>{let i={...e},{vseed:t}=l,{dimensions:n,dataset:o}=t;if(n&&n.length>0)return{...i,dimensions:n};if(!o)throw Error("dataset is required");if(0===o.length)return i;let r=w(e.measures),a=o.slice(0,100),s=Object.keys(a.reduce((e,l)=>({...e,...l}),{})).filter(e=>a.some(l=>"string"==typeof l[e])&&!["",null,void 0].includes(e)&&!r.some(l=>l.id===e)).map(e=>({id:e,alias:e}));return{...i,dimensions:s}},eW=e=>{let l={...e},i={id:eu,alias:z.i18n`指标名称`};return l.dimensions?.some(e=>e.id===eu)||l.dimensions?.push(i),l},eX=(e,l)=>(i,t)=>{let{dimensions:n=[],measures:o=[]}=i,r=n.some(e=>e.encoding),a=o.some(e=>e.encoding);return r||a?R(l,t,i):R(e,t,i)},eZ=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return ew(i,n),eE(t,n),{...e,encoding:n}},eO=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?eV(i,r):ew(i,r),o?eD(t,r):eE(t,r),{...e,encoding:r}},ew=(e,l)=>{let i=(0,s.a)(e.map(e=>e.id));l.x=i.slice(0,1),l.color=i.slice(1),l.tooltip=i.filter(e=>e!==eu),l.detail=[],l.label=[],l.row=[],l.column=[]},eV=(e,l)=>{l.x=(0,s.a)(e.filter(e=>"xAxis"===e.encoding).map(e=>e.id)),0===l.x.length&&(l.x=[e[0].id]),l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding).map(e=>e.id)),0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},eE=(e,l)=>{l.y=(0,s.a)(e.filter(e=>"yAxis"===e.encoding||!e.encoding).map(e=>e.id))},eD=(e,l)=>{l.y=(0,s.a)(e.filter(e=>"yAxis"===e.encoding||!e.encoding).map(e=>e.id));let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=i);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},eH=e=>{let{measures:l}=e;return!!l&&l.some(e=>"children"in e)},eY=e=>{let{measures:l}=e;return!!l&&l.some(e=>"parentId"in e)},eN=e=>{let l=()=>({id:"group",alias:"",children:[]}),i=l(),t=[];for(let n of e)"children"in n?(i.children?.length&&(i.id=[i.id,...i.children.map(e=>e.id)].join("-"),i.alias=i.children.map(e=>e.alias).join("-"),t.push(i),i=l()),t.push(n)):i.children?.push(n);return i.children?.length&&(i.id=[i.id,...i.children.map(e=>e.id)].join("-"),i.alias=i.children.map(e=>e.alias).join("-"),t.push(i),i=l()),t},e$=(e=[])=>{if(!e)return 0;let l=1;return X(e,e=>("children"in e&&(l=Math.max(l,1+e$(e.children))),!1)),l},eK=e=>"table"===e.chartType,eG=e=>"pivotTable"===e.chartType,ej=e=>["table","pivotTable"].includes(e.chartType),eU=e=>!ej(e),eq=e=>{if(ej(e))return!1;if(eY(e)){let l=e.measures?.map(e=>e.parentId);return l&&(0,s.a)(l).length>1}if("dualAxis"===e.chartType||"scatter"===e.chartType){let{dimensions:l=[]}=e;if(l&&l.some(e=>"row"===e.encoding||"column"===e.encoding))return!0;if("scatter"===e.chartType)return eH(e)?3===e$(e.measures):!!e.scatterMeasures&&!!(e.scatterMeasures.length>1);if("dualAxis"===e.chartType){if(eH(e))return 3===e$(e.measures);if(e.dualMeasures&&e.dualMeasures.length>1)return!0}return!1}let{measures:l=[],dimensions:i=[]}=e,t=i&&i.some(e=>"row"===e.encoding||"column"===e.encoding),n=l&&l.some(e=>e&&e.children);return t||n},eJ=(e,l)=>{let{vseed:i}=l;return eH(i)?e.measures=eN(i.measures):eY(i)?e.measures=eQ(i.measures):eq(i)&&(e.measures=e0(e.measures)),e},eQ=e=>{let l=[];return e.forEach(e=>{if(!e.parentId)return;let i=l.find(l=>l.id===e.parentId);i&&"children"in i?(i.children=i.children||[],i.children.push(e)):l.push({id:e.parentId,children:[e]})}),l},e0=e=>[{id:e.map(e=>e.id).join("-"),alias:e.map(e=>e.alias||e.id).join("-"),children:e}],e1=(e,l)=>(i,t)=>{let{vseed:n}=t;return eq(n)?R(l,t,i):R(e,t,i)},e2=(e,l,i,t)=>{let{foldMeasureId:n,separator:o,colorItemAsId:r}=t,a={encodingAngle:ex,encodingX:eb,encodingY:ey,encodingDetail:eC,encodingColor:ev,encodingColorId:eA,colorItems:[],colorIdMap:{}},{color:s,x:d,y:u,detail:c,angle:h}=i,f=h?l.filter(e=>h.includes(e.id)):[],p=d?l.filter(e=>d.includes(e.id)):[],g=u?l.filter(e=>u.includes(e.id)):[],m=s?l.filter(e=>s.includes(e.id)):[],b=c?l.filter(e=>c.includes(e.id)):[],y=new Set,x={};for(let l=0;l<e.length;l++){let i=e[l];if(e4(ex,f,i,o),e4(eb,p,i,o),e4(ey,g,i,o),e4(ev,m,i,o),e4(eC,b,i,o),!m.length||!i[ev])continue;let t=String(i[n]),a=String(i[ev]),s=r?a:t?[a,t].join(o):a;i[eA]=s,x[s]=a,y.add(s)}return a.colorItems=Array.from(y),a.colorIdMap=x,{dataset:e,unfoldInfo:a}},e4=(e,l,i,t)=>{e&&l.length&&(i[e]=l.map(e=>String(i[e.id])).join(t))},e3=(e,l,i,t,n)=>{let{foldMeasureId:o=es,foldMeasureName:r=ea,foldMeasureValue:a=ed,colorItemAsId:s=!1,colorMeasureId:d}=n||{},{dataset:u,foldInfo:c}=e_(e,i,{measureId:o,measureName:r,measureValue:a,colorMeasureId:d}),{dataset:h,unfoldInfo:f}=e2(u,l,t,{foldMeasureId:o,separator:"-",colorItemAsId:s});return{dataset:h,foldInfo:c,unfoldInfo:f}},e5=(e,l)=>(i,t)=>{let{advancedVSeed:n}=t;return e7(n)?l(i,t):e(i,t)},e7=e=>{let{encoding:l,measures:i}=e,t=w(i).map(e=>e.id),{color:n}=l;return n?.length===1&&t.includes(n[0])},e8=e=>{if(e7(e)){let{encoding:l}=e,{color:i}=l;return i?.[0]}},e6=(e,l)=>{let i={...e},{vseed:t}=l,{dataset:n,chartType:o}=t,{dimensions:r,measures:a,encoding:s}=e;if(!a||!r||!n||!s)return i;if(0===a.length)throw Error("measures can not be empty");let d=(t.dimensions||[]).some(e=>e.encoding),{dataset:u,foldInfo:c,unfoldInfo:h}=e3(n,(0,y.a)(r,e=>e.id),(0,y.a)(w(a),e=>e.id),s,{colorItemAsId:d,colorMeasureId:e8(e)});return{...i,dataset:u,datasetReshapeInfo:[{id:String(o),index:0,foldInfo:c,unfoldInfo:h}],dimensions:r,measures:a}},e9=(e,l)=>{let i={...e},{vseed:t}=l,{dataset:n}=t,{dimensions:o,measures:r,encoding:a}=e;if(!r||!o||!n||!a)return i;if(0===r.length)throw Error("measures can not be empty");let s=[];r&&r.forEach(e=>{e.children&&e.children.length>0&&s.push(e)});let d=(t.dimensions||[]).some(e=>e.encoding),u=[],c=[];return s.forEach((l,i)=>{let t=l.children;if(!t)return;let r=l.id,{dataset:s,foldInfo:h,unfoldInfo:f}=e3(n,(0,y.a)(o,e=>e.id),(0,y.a)(t,e=>e.id),a,{colorItemAsId:d,foldMeasureValue:`${ed}${r}`,colorMeasureId:e8(e)});u.push(s),c.push({id:r,index:i,foldInfo:h,unfoldInfo:f})}),{...i,dataset:u,datasetReshapeInfo:c}},le=(e,l)=>{let i={...e},{vseed:t}=l,{sort:n}=t,{datasetReshapeInfo:o,dataset:r}=e,{unfoldInfo:a}=o[0],s=a.encodingX;if(!n||!s)return e;i.analysis||(i.analysis={}),i.analysis.orderMapping||(i.analysis.orderMapping={});let d=ll(n,s,r.flat(2));return i.analysis.orderMapping[s]=d,i},ll=(e,l,i)=>{if(e.customOrder)return e.customOrder;let t=e.order||"asc",n=e.orderBy,o=(0,x.a)(i,(e,i)=>{let o=e[n||l],r=i[n||l];return"asc"===t?o<r?-1:+(o>r):o>r?-1:+(o<r)});return(0,s.a)(o.map(e=>e[l]))},li=(e,l)=>{let i={...e},{vseed:t}=l,{sortLegend:n}=t,{datasetReshapeInfo:o,dataset:r}=e,a=o?.[0]?.unfoldInfo?.encodingColorId,s=o?.[0]?.unfoldInfo?.colorIdMap,d=o?.[0]?.unfoldInfo?.colorItems;if(!n||!a||!s||!d)return e;if(i.analysis||(i.analysis={}),i.analysis.orderMapping||(i.analysis.orderMapping={}),n.customOrder){let e=Object.keys(s).reduce((e,l)=>(e[s[l]]=l,e),{}),l=n.customOrder.map(l=>e[l]?e[l]:l);return i.analysis.orderMapping[a]=l,i}let u=lt(n,a,r?.flat(2)||[]);return i.analysis.orderMapping[a]=u,i},lt=(e,l,i)=>{if(e.customOrder)return e.customOrder;let t=e.order||"asc",n=e.orderBy,o=(0,x.a)(i,(e,i)=>{let o=e[n||l],r=i[n||l];return"asc"===t?o<r?-1:+(o>r):o>r?-1:+(o<r)});return(0,s.a)(o.map(e=>e[l]))},ln=(e,l)=>{let{vseed:i}=l,{chartType:t}=i,n={...e},o=(0,d.a)(i,["backgroundColor","color","label","legend","tooltip","xAxis","yAxis","crosshairLine"]);return n.config={...n.config||{},[t]:{...o}},n},lo=(e,l)=>{let{vseed:i}=l,{chartType:t}=i,n={...e},o=(0,d.a)(i,["backgroundColor","color","label","legend","tooltip","xAxis","yAxis","crosshairRect","stackCornerRadius"]);return n.config={...n.config||{},[t]:{...o}},n},lr=(e,l)=>{let{vseed:i}=l,{chartType:t}=i,n={...e},o=(0,d.a)(i,["backgroundColor","color","label","legend","tooltip"]);return n.config={...n.config||{},[t]:{...o}},n},la=(e,l)=>{let{vseed:i}=l,t=(0,d.a)(i,["barStyle","pointStyle","lineStyle","areaStyle"]);return{...e,markStyle:t}},ls=(e,l)=>{let{vseed:i}=l,t=(0,d.a)(i,["annotationPoint","annotationHorizontalLine","annotationVerticalLine","annotationArea"]);return{...e,annotation:t}},ld=[eP,eL,eT,eW,eX([eZ,eJ],[eO,eJ]),e1([e6],[e9]),le,li,ln,E,la,ls],lu=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{foldInfo:o,unfoldInfo:r}=n[0];return i.type="line",i.direction="vertical",i.xField=r.encodingX,i.yField=o.measureValue,i.seriesField=e7(t)?r.encodingDetail:r.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},lc=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n,chartType:o}=t,{unfoldInfo:r}=n[0],a=t.config[o];if(!a||!a.color)return i;let s=r.colorItems,d=r.colorIdMap,{color:u}=a,{colorScheme:c,colorMapping:h}=u;return i.color={type:"ordinal",domain:s,range:c,specified:lh(h,d,s)},i},lh=(e,l,i)=>{if(!e||!l||!i)return;let t=[],n=Object.entries(e).sort((e,l)=>l[0].length-e[0].length),o=n.reduce((e,i)=>{let n=i[0],o=i[1];return Object.entries(l).filter(([e,l])=>e===n||l===n).forEach(l=>{e[l[0]]=o,t.push(n)}),e},{});return{...n.reduce((e,i)=>{let n=i[0],o=i[1];return t.includes(n)||Object.entries(l).filter(([e,l])=>e.includes(n)||l.includes(n)).forEach(l=>{e[l[0]]||(e[l[0]]=o)}),e},{}),...o}},lf=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n,chartType:o}=t,{unfoldInfo:r,id:a}=n[0],s=t.config[o];if(!s||!s.color)return i;let{color:d}=s,{colorScheme:u,linearColorScheme:c}=d;return i.color={type:"linear",range:c||u||[],domain:[{dataId:a,fields:[r.encodingColor]}]},i},lp=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{chartType:n}=t,{backgroundColor:o}=t.config[n];return{...i,background:o}},lg=(e,l)=>{let{advancedVSeed:i,vseed:t}=l,{analysis:n,datasetReshapeInfo:o}=i,{unfoldInfo:r}=o[0],a=n?.orderMapping||{},s=r.encodingAngle,d=r.encodingX,u=r.encodingColorId,c=o[0].id,h={};if(s&&(h[s]={sortIndex:0}),d){let e=a[d];e?h[d]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:h[d]={sortIndex:0}}if(u){let e=a[u];e?h[u]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:h[u]={sortIndex:0}}return{...e,data:{id:c,values:eq(t)?void 0:i.dataset,fields:h}}},lm=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{dataset:n=[]}=t;return n.length<5e3||(i.large=!0,i.largeThreshold=5e3,i.progressiveStep=400,i.progressiveThreshold=8e3),i},lb=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,r=t.config?.[o]?.xAxis;if(i.axes||(i.axes=[]),!r)return i.axes=[...i.axes,{visible:!0,type:"band",orient:"bottom"}],i;let{visible:a=!0,label:s,tick:d,title:u,grid:c,line:h,labelAutoHide:f,labelAutoHideGap:p,labelAutoLimit:g,labelAutoLimitLength:m=80,labelAutoRotate:b,labelAutoRotateAngleRange:y}=r,x={visible:a,type:"band",orient:"bottom",maxHeight:m+60,sampling:!(f||b||g),hover:!0,label:{visible:s?.visible,flush:!0,space:8,style:{maxLineWidth:m,fill:s?.labelColor,angle:s?.labelAngle,fontSize:s?.labelFontSize,fontWeight:s?.labelFontWeight},minGap:p,autoHide:f,autoHideMethod:"greedy",autoHideSeparation:p,autoLimit:g,autoRotate:b,autoRotateAngle:y,lastVisible:!0},title:{visible:u?.visible,text:u?.titleText,style:{fill:u?.titleColor,fontSize:u?.titleFontSize,fontWeight:u?.titleFontWeight}},tick:{visible:d?.visible,tickSize:d?.tickSize,inside:d?.tickInside,style:{stroke:d?.tickColor}},grid:{visible:c?.visible,style:{lineWidth:c?.gridWidth,stroke:c?.gridColor}},domainLine:{visible:h?.visible,style:{lineWidth:h?.lineWidth,stroke:h?.lineColor}},paddingInner:[.15,.1],paddingOuter:[.075,.1]};return i.axes=[...i.axes,x],i},ly=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,{locale:r}=t,a=t.config?.[o]?.yAxis;if(i.axes||(i.axes=[]),!a)return i.axes=[...i.axes,{visible:!0,type:"linear",orient:"left"}],i;let{visible:s=!0,label:d,tick:u,title:c,grid:h,line:f,zero:p,nice:g,inverse:m,max:b,min:y,log:x,logBase:C=10}=a,v={visible:s,type:x?"log":"linear",base:C,orient:"left",nice:g,zero:!x&&p,inverse:m,max:b,min:y,label:{visible:d?.visible,formatMethod:e=>q(e,r),style:{fill:d?.labelColor,angle:d?.labelAngle,fontSize:d?.labelFontSize,fontWeight:d?.labelFontWeight}},title:{visible:c?.visible,text:c?.titleText,style:{fill:c?.titleColor,fontSize:c?.titleFontSize,fontWeight:c?.titleFontWeight}},tick:{visible:u?.visible,tickSize:u?.tickSize,inside:u?.tickInside,style:{stroke:u?.tickColor}},grid:{visible:h?.visible,style:{lineWidth:h?.gridWidth,stroke:h?.gridColor}},domainLine:{visible:f?.visible,style:{lineWidth:f?.lineWidth,stroke:f?.lineColor}},innerOffset:{top:7}};return i.axes=[...i.axes,v],i},lx=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,r=t.config?.[o]?.crosshairLine;if(!r)return i;i.crosshair||(i.crosshair={});let a=r.visible||!0,s=r.lineColor||void 0,d=r.labelColor||void 0,u=r.labelVisible||void 0,c=r.labelBackgroundColor||void 0;return i.crosshair.xField={visible:a,line:{type:"line",style:{lineWidth:1,opacity:1,stroke:s,lineDash:[4,2]}},label:{visible:u,labelBackground:{visible:u,style:{fill:c}},style:{fill:d}}},i},lC=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n,chartType:o}=t,{unfoldInfo:r}=n[0],a=t.config[o];if(!a||!a.legend)return i;let{legend:s}=a,{enable:d,position:u="bottom",labelFontColor:c,labelFontSize:h=12,labelFontWeight:f,maxSize:p=1,border:g,shapeType:m="rectRound"}=s||{};return i.legends={type:"discrete",visible:d,maxCol:Math.max(1,p),maxRow:Math.max(1,p),autoPage:!0,orient:["bottom","bottomLeft","bottomRight","bl","br"].includes(u)?"bottom":["top","topLeft","topRight","tl","tr"].includes(u)?"top":["left","leftTop","leftBottom","lt","lb"].includes(u)?"left":"right",position:["topLeft","bottomLeft","leftTop","rightTop","lt","rt","tl","bl"].includes(u)?"start":["topRight","bottomRight","leftBottom","rightBottom","lb","rb","rt","br"].includes(u)?"end":"middle",data:g?e=>e.map(e=>(e.shape.outerBorder={stroke:e.shape.fill,distance:3,lineWidth:1},e)):void 0,item:{focus:!0,maxWidth:"30%",focusIconStyle:{size:h+2,fill:c,fontWeight:f},shape:{space:g?6:4,style:{symbolType:m,size:g?8:10}},label:{formatMethod:e=>r.colorIdMap[String(e)]??e,style:{fontSize:h,fill:c,fontWeight:f}},background:{state:{selectedHover:{fill:c,fillOpacity:.05}}}},padding:0},i},lv=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n,chartType:o}=t,{unfoldInfo:r}=n[0],a=t.config[o];if(!a||!a.legend)return i;let{legend:s}=a,{enable:d,position:u="bottom",labelFontColor:c,labelFontSize:h=12,labelFontWeight:f}=s||{};return i.legends={type:"color",visible:d,orient:["bottom","bottomLeft","bottomRight","bl","br"].includes(u)?"bottom":["top","topLeft","topRight","tl","tr"].includes(u)?"top":["left","leftTop","leftBottom","lt","lb"].includes(u)?"left":"right",position:["topLeft","bottomLeft","leftTop","rightTop","lt","rt","tl","bl"].includes(u)?"start":["topRight","bottomRight","leftBottom","rightBottom","lb","rb","rt","br"].includes(u)?"end":"middle",padding:0,field:r.encodingColor,maxWidth:"30%",startText:{visible:!0,style:{fill:c,fontSize:h,fontWeight:f}},endText:{visible:!0,style:{fill:c,fontSize:h,fontWeight:f}}},i},lA=e=>(l,i)=>{let t=e(l,i),{advancedVSeed:n}=i,{datasetReshapeInfo:o}=n,{unfoldInfo:r}=o[0];return e7(n)&&t?.point?.style&&(t.point.style.fill={field:r.encodingColor,scale:"color"}),t},lR=(e,l)=>{if(!l)return!0;let i=Object.keys(e).filter(e=>e.toLocaleLowerCase().startsWith("__vchart")),t=(0,b.a)(e,i);return(Array.isArray(l)?l:[l]).every(e=>{if(lI(e)){if(Object.values(t).find(l=>l===e))return!0}else if(lS(e)){let l=e.operator||e.op,i=Array.isArray(e.value)?e.value:[e.value];switch(l){case"=":case"==":if(t[e.field]===i[0])return!0;break;case"!=":if(t[e.field]!==i[0])return!0;break;case">":if(t[e.field]>i[0])return!0;break;case"<":if(t[e.field]<i[0])return!0;break;case">=":if(t[e.field]>=i[0])return!0;break;case"<=":if(t[e.field]<=i[0])return!0;break;case"between":if(Array.isArray(e.value)&&t[e.field]>=i[0]&&t[e.field]<=i[1])return!0}}else if(l_(e)){let l=e.operator||e.op,i=Array.isArray(e.value)?e.value:[e.value];switch(l){case"in":if(i.includes(t[e.field]))return!0;break;case"not in":if(!i.includes(t[e.field]))return!0}}else if(lk(e)&&Object.keys(e).every(l=>t[l]===e[l]))return!0;return!1})},lI=e=>"string"==typeof e||"number"==typeof e,lk=e=>"object"==typeof e&&null!==e,lS=e=>"object"==typeof e&&null!==e&&"field"in e&&("operator"in e||"op"in e)&&"value"in e&&(["=","==","!=",">","<",">=","<=","between"].includes(e.operator)||["=","==","!=",">","<",">=","<=","between"].includes(e.op)),l_=e=>"object"==typeof e&&null!==e&&"field"in e&&("operator"in e||"op"in e)&&"value"in e&&(["in","not in"].includes(e.operator)||["in","not in"].includes(e.op)),lM=(e,l)=>{let{advancedVSeed:i}=l,{markStyle:t}=i,{pointStyle:n}=t,o={...e,point:{style:{}}};if(!n)return o;let r=(Array.isArray(n)?n:[n]).reduce((e,l,i)=>{let{pointBorderColor:t,pointBorderStyle:n,pointBorderWidth:o=1,pointColor:r,pointColorOpacity:a,pointSize:s,pointVisible:d=!0}=l;return{...e,[`custom${i+1}`]:{level:i+1,filter:e=>!!lR(e,l.selector),style:{visible:d,size:s,fill:r,fillOpacity:a,innerBorder:{stroke:t,lineWidth:o,distance:(o||0)/2,lineDash:"dashed"===n?[5,2]:"dotted"===n?[2,5]:[0,0]}}}}},{});return{...o,point:{...o.point,state:{...r}}}},lz=e=>{let l=e.point||{};return{...e,point:{...l,state:{...l.state||{},dimension_hover:{scaleX:1.4,scaleY:1.4,outerBorder:{lineWidth:4,strokeOpacity:.25,distance:2}}}}}},lB=(e,l)=>{let i=e.point||{},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o}=n[0];return{...e,point:{...i,state:{...i.state||{},hover:{scaleX:1.4,scaleY:1.4,stroke:(e,l)=>{let i=o.encodingColorId;return l.seriesColor(e[i])},fillOpacity:.6,lineWidth:1}}}}},lF=e=>(l,i)=>{let t=e(l,i),{advancedVSeed:n}=i,{datasetReshapeInfo:o}=n,{unfoldInfo:r}=o[0];return e7(n)&&t?.line?.style&&(t.line.style.stroke={field:r.encodingColor,scale:"color"}),t},lP=(e,l)=>{let{advancedVSeed:i}=l,{markStyle:t,datasetReshapeInfo:n,dataset:o}=i,{unfoldInfo:r}=n[0],{lineStyle:a}=t,s={...e,line:{style:{}}};if(!a)return s;let d=Array.isArray(a)?a:[a],u=r.encodingColorId,c=(0,C.a)(o,e=>e[u??""]),h=d.reduce((e,l,i)=>{let{lineColor:t,lineColorOpacity:n,lineSmooth:o,lineStyle:r,lineWidth:a=2,lineVisible:s=!0}=l,d=2*a;return{...e,[`custom${i+1}`]:{level:i+1,filter:e=>{for(let i of c[e[u??""]])if(lR(i,l.selector))return!0;return!1},style:{visible:s,curveType:o?"monotone":"linear",strokeOpacity:n,stroke:t,lineWidth:a,lineDash:"dashed"===r?[d,d]:"dotted"===r?[a/2,2*a]:[0,0]}}}},{});return{...s,line:{...s.line,state:{...h}}}},lL=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{measures:n,datasetReshapeInfo:o,locale:r}=t,{chartType:a}=t,s=t.config[a];if(!s||!s.label)return i;let{measureId:d,measureValue:u}=o[0].foldInfo,{label:c}=s,{enable:h}=c;return i.label={visible:h,formatMethod:(e,l)=>{let i=[];return i.push((e=>{let i=Z(n,l[d]);if(!i)return e;let{format:t={},autoFormat:o=!0}=i;return(0,m.a)(t)?o?q(e,r):String(e):U(t)(e)})(l[u])),i.join(" ")}},i},lT=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{measures:n,datasetReshapeInfo:o,chartType:r,locale:a,dimensions:s,encoding:d}=t,{tooltip:u={enable:!0}}=t.config[r],{enable:c}=u,{foldInfo:h,unfoldInfo:f}=o[0];return i.tooltip={visible:c,mark:{title:{visible:!1},content:lX(d.tooltip||[],s,n,a,h,f)},dimension:{title:{visible:!0},content:lW(n,h,f,a)}},i},lW=(e,l,i,t)=>{let{measureId:n,measureValue:o}=l,{encodingColor:r}=i;return[{visible:!0,shapeType:"rectRound",hasShape:!0,key:e=>e&&e[r]||"",value:l=>{if(!l)return"";let i=l[o],r=Z(e,l[n]);if(!r)return String(i);let{format:a={},autoFormat:s=!0}=r;return(0,m.a)(a)?s?q(i,t):String(i):U(a)(i)}}]},lX=(e,l,i,t,n,o)=>{let r=l.filter(l=>e.includes(l.id)),a=i.filter(l=>e.includes(l.id)),s=r.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:l=>e.alias||e.id?e.alias||e.id:l&&l[e.id],value:l=>l&&l[e.id]}));return[...s,{visible:!0,hasShape:!0,shapeType:"rectRound",key:e=>{let{measureName:l}=n,{encodingColor:i}=o;return e&&e[l||i]||""},value:e=>{let{measureId:l,measureValue:o}=n;if(!e)return"";let r=e[o],a=Z(i,e[l]);if(!a)return String(r);let{format:s={},autoFormat:d=!0}=a;return(0,m.a)(s)?d?q(r,t):String(r):U(s)(r)}},...a.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:e.alias||e.id,value:l=>{if(!l)return"";let n=e.id;if(!l||!l[er]||!l[er])return"";let o=l[er][n],r=Z(i,n);if(!r)return String(o);let{format:a={},autoFormat:s=!0}=r;return(0,m.a)(a)?s?q(o,t):String(o):U(a)(o)}}))]},lZ=(e,l)=>Object.entries(e).every(([e,i])=>"string"!=typeof i&&"number"!=typeof i||l[e]===i),lO=(e,l)=>{let{advancedVSeed:i}=l,{annotation:t}=i;if(!t||!t.annotationPoint)return e;let{annotationPoint:n}=t,o=(Array.isArray(n)?n:[n]).flatMap(e=>{let{selector:l,text:t="",textColor:n="#ffffff",textFontSize:o=12,textFontWeight:r=400,textAlign:a="center",textBaseline:s="top",textBackgroundBorderColor:d,textBackgroundBorderRadius:u=4,textBackgroundBorderWidth:c=1,textBackgroundColor:h="#212121",textBackgroundPadding:f=2,textBackgroundVisible:p=!0,offsetX:g=0,offsetY:m=0}=e,b=i.dataset.flat();return(l?b.filter(e=>lR(e,l)):[]).map(e=>({zIndex:1e3,regionRelative:!0,position:(l,i)=>{let t=l.find(l=>lZ(e,l));if(t){let{x:e,y:l}=i.dataToPosition(t);return{x:e,y:l}}},itemLine:{visible:!1},itemContent:{offsetY:m,offsetX:g,text:{text:t,style:{visible:!0,textAlign:a,textBaseline:s,fill:n,stroke:h,lineWidth:1,fontSize:o,fontWeight:r,dy:o},labelBackground:{visible:p,padding:f,style:{cornerRadius:u??4,fill:h,stroke:d,lineWidth:c,dy:o}}}}}))});return{...e,markPoint:o}},lw=(e,l)=>{let{advancedVSeed:i}=l,{annotation:t,datasetReshapeInfo:n}=i,{unfoldInfo:o,foldInfo:r}=n[0];if(!t||!t.annotationVerticalLine)return e;let{annotationVerticalLine:a}=t,s=Array.isArray(a)?a:[a],d={outsideStart:"start",outsideEnd:"end",outsideMiddle:"middle",insideStart:"insideStartTop",insideMiddle:"insideMiddleTop",insideEnd:"insideEndTop"},u=s.flatMap(e=>{let{selector:l,xValue:t,text:n="",textPosition:a="insideEnd",textColor:s="#ffffff",textFontSize:u=12,textFontWeight:c=400,textAlign:p="right",textBaseline:g="top",textBackgroundVisible:m=!0,textBackgroundBorderColor:b="#212121",textBackgroundColor:y="#212121",textBackgroundBorderRadius:x=4,textBackgroundBorderWidth:C=1,textBackgroundPadding:A=2,lineVisible:R=!0,lineColor:I="#212121",lineWidth:k=1,lineStyle:S="dashed"}=e,_=i.dataset.flat(),M=e=>({x:e,zIndex:1e3,line:{style:{visible:R,stroke:I,lineStyle:S,lineWidth:k,lineDash:"dashed"===S?[5,2]:"dotted"===S?[2,5]:[0]}},label:{text:n,position:d[a||"insideEnd"],style:{visible:!0,stroke:y,lineWidth:1,textAlign:p,textBaseline:g,fill:s,fontSize:u,fontWeight:c,dy:u},labelBackground:{visible:m,padding:A,style:{dy:u,cornerRadius:x??4,fill:y,stroke:b,lineWidth:C}}},endSymbol:{visible:!0,size:10+(k||1),style:{dy:4,fill:I}}});return!l&&(0,v.a)(t)||(0,h.a)(t)||(0,f.a)(t)?(Array.isArray(t)?t:[t]).map(M):(l?_.filter(e=>lR(e,l)):[]).map(e=>e[o.encodingX]?M(e[o.encodingX]):e[r.measureValue]?M(e[r.measureValue]):{})}),c=[...e.markLine||[],...u||[]];return{...e,markLine:c}},lV=(e,l)=>{let{advancedVSeed:i}=l,{annotation:t,datasetReshapeInfo:n}=i,{foldInfo:o,unfoldInfo:r}=n[0];if(!t||!t.annotationHorizontalLine)return e;let{annotationHorizontalLine:a}=t,s=Array.isArray(a)?a:[a],d={outsideStart:"start",outsideEnd:"end",outsideMiddle:"middle",insideStart:"insideStartTop",insideMiddle:"insideMiddleTop",insideEnd:"insideEndTop"},u=s.flatMap(e=>{let{selector:l,yValue:t,text:n="",textPosition:a="insideEnd",textColor:s="#ffffff",textFontSize:u=12,textFontWeight:c=400,textAlign:p="right",textBaseline:g="top",lineColor:m="#212121",lineStyle:b="dashed",lineVisible:y=!0,lineWidth:x=1,textBackgroundVisible:C=!0,textBackgroundColor:A="#212121",textBackgroundBorderColor:R="#212121",textBackgroundBorderRadius:I=4,textBackgroundBorderWidth:k=1,textBackgroundPadding:S=2}=e,_=i.dataset.flat(),M=e=>({y:e,zIndex:1e3,line:{style:{visible:y,stroke:m,lineStyle:b,lineWidth:x,lineDash:"dashed"===b?[5,2]:"dotted"===b?[2,5]:[0]}},label:{text:n,position:d[a||"insideEnd"],style:{visible:!0,dy:u,stroke:A,lineWidth:1,textAlign:p,textBaseline:g,fill:s,fontSize:u,fontWeight:c},labelBackground:{visible:C,padding:S,style:{dy:u,cornerRadius:I??4,fill:A,stroke:R,lineWidth:k}}},endSymbol:{visible:!0,size:10+(x||1),style:{dx:-4,fill:m}}});return!l&&(0,v.a)(t)||(0,h.a)(t)||(0,f.a)(t)?(Array.isArray(t)?t:[t]).map(M):(l?_.filter(e=>lR(e,l)):[]).map(e=>e[r.encodingY]?M(e[r.encodingY]):e[o.measureValue]?M(e[o.measureValue]):{})}),c=[...e.markLine||[],...u||[]];return{...e,markLine:c}},lE=(e,l)=>{let{advancedVSeed:i}=l,{annotation:t}=i;if(!t||!t.annotationArea)return e;let{annotationArea:n}=t,o=Array.isArray(n)?n:[n],r={top:"insideTop",topRight:"insideTopRight",topLeft:"insideTopLeft",bottom:"insideBottom",bottomLeft:"insideBottomLeft",bottomRight:"insideBottomRight",left:"insideLeft",right:"insideRight"},a=o.flatMap(e=>{let{selector:l,text:t="",textPosition:n="top",textColor:o="#ffffff",textFontSize:a=12,textFontWeight:s=400,textAlign:d="center",textBaseline:u="top",textBackgroundVisible:c=!0,textBackgroundColor:h="#191d24",textBackgroundBorderColor:f="#191d24",textBackgroundBorderWidth:p=1,textBackgroundBorderRadius:g=4,textBackgroundPadding:m=4,areaColor:b="#888888",areaColorOpacity:y=.15,areaBorderColor:x="#888888",areaBorderRadius:C=4,areaBorderWidth:v=1,outerPadding:A=4}=e,R=i.dataset.flat(),I=l?R.filter(e=>lR(e,l)):[],k=r[n||"top"],S=k.toLocaleLowerCase().includes("bottom");return{zIndex:1e3,regionRelative:!0,positions:(e,l)=>{let i=e.filter(e=>I.some(l=>lZ(l,e))).map(e=>l.dataToPosition(e)),t=l.getYAxisHelper(),n=l.getXAxisHelper();if("function"==typeof n?.getBandwidth){let e=t.getScale(),l=Math.min(...i.map(e=>e.x))-(A||4),n=Math.max(...i.map(e=>e.x))+(A||4),o=Math.min(...e.range()),r=Math.max(...e.range());return[{x:l,y:o},{x:n,y:o},{x:n,y:r},{x:l,y:r}]}if("function"==typeof t?.getBandwidth){let e=n.getScale(),l=Math.min(...i.map(e=>e.y))-(A||4),t=Math.max(...i.map(e=>e.y))+(A||4),o=Math.min(...e.range()),r=Math.max(...e.range());return[{x:o,y:l},{x:r,y:l},{x:r,y:t},{x:o,y:t}]}return[]},label:{position:k,visible:!0,text:t,style:{dy:S?-(2*(a||12)):a,textAlign:d,textBaseline:u,fill:o,stroke:h,lineWidth:1,fontSize:a,fontWeight:s},labelBackground:{visible:c,padding:m,style:{dy:S?-(2*(a||12)):a,cornerRadius:g??4,fill:h,stroke:f,lineWidth:p}}},area:{style:{visible:!0,fill:b,fillOpacity:y,stroke:x,lineWidth:v,cornerRadius:C}}}});return{...e,markArea:a}},lD=e=>({...e,animation:!0,rows:[],columns:[],indicators:[],records:[],widthMode:"adaptive",heightMode:"adaptive",indicatorsAsCol:!1}),lH=e=>{let l={...e},i="rgba(0,0,0,0)",t="rgba(178,186,207, 0.2)";return{...l,theme:{underlayBackgroundColor:i,bodyStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:[0,0,2,0],bgColor:i,padding:[0,0,1,0],hover:{cellBgColor:"transparent"}},headerStyle:{borderColor:"rgba(0,4,20,0.2)",fontSize:12,color:"#333333",textAlign:"center",borderLineWidth:0,bgColor:i,hover:{cellBgColor:t}},rowHeaderStyle:{borderColor:"rgba(0,4,20,0.2)",fontSize:12,color:"#333333",borderLineWidth:0,bgColor:i,hover:{cellBgColor:t}},cornerHeaderStyle:{borderColor:"rgba(0,4,20,0.2)",textAlign:"center",fontSize:12,color:"#333333",fontWeight:"bold",borderLineWidth:[0,0,0,0],bgColor:i,hover:{cellBgColor:t}},cornerRightTopCellStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:i,hover:{cellBgColor:t}},cornerLeftBottomCellStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:i,hover:{cellBgColor:t}},cornerRightBottomCellStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:i,hover:{cellBgColor:t}},rightFrozenStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:i,hover:{cellBgColor:t}},bottomFrozenStyle:{borderColor:"rgba(0,4,20,0.2)",borderLineWidth:0,bgColor:i,hover:{cellBgColor:t}},selectionStyle:{cellBgColor:"",cellBorderColor:""},frameStyle:{borderLineWidth:0,bgColor:i}}}},lY=e=>(l,i)=>{let t={...l},{advancedVSeed:n}=i,{measures:o,datasetReshapeInfo:r,dataset:a}=n,d=(0,s.a)(r.flatMap(e=>e.unfoldInfo.colorItems)),u=r.map((l,t)=>{let r=o?.find(e=>e.id===l.id),s=a[t],u=[{...l,unfoldInfo:{...l.unfoldInfo,colorItems:d}}],c=R(e,{...i,advancedVSeed:{...n,datasetReshapeInfo:u,dataset:s}},{});return{indicatorKey:l.id,title:r?.alias,cellType:"chart",chartModule:"vchart",chartSpec:c,style:{padding:[1,1,0,1]}}});return{...t,indicators:u}},lN=e=>({...e,indicatorsAsCol:!1}),l$=e=>({...e,indicatorsAsCol:!0}),lK=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{dataset:n,datasetReshapeInfo:o}=t,r=n.reduce((e,l,i)=>(e[o[i].id]=l,e),{});return{...i,records:r}},lG=(e,l)=>{let i={...e},{advancedVSeed:t}=l,n=t.dimensions;if(!n)return i;let o=n.filter(e=>"row"===e.encoding).map(e=>({dimensionKey:e.id,title:e.alias||e.id}));return{...i,rows:o}},lj=(e,l)=>{let i={...e},{advancedVSeed:t}=l,n=t.dimensions;if(!n)return i;let o=n.filter(e=>"column"===e.encoding).map(e=>({dimensionKey:e.id,title:e.alias||e.id}));return{...i,columns:o}},lU=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{chartType:n}=t,o=t.config[n];if(!o||!o.legend)return i;let{datasetReshapeInfo:r}=t,a=(0,s.a)(r.flatMap(e=>e.unfoldInfo.colorItems)),d=r.reduce((e,l)=>({...e,...l.unfoldInfo.colorIdMap}),{}),{legend:u,color:c}=o,{colorScheme:h,colorMapping:f}=c,p=lh(f,d,a),{enable:g,position:m="bottom",labelFontColor:b,labelFontSize:y=12,labelFontWeight:x=400,maxSize:C=1,border:v,shapeType:A="rectRound"}=u||{},R={visible:g,type:"discrete",orient:["bottom","bottomLeft","bottomRight","bl","br"].includes(m)?"bottom":["top","topLeft","topRight","tl","tr"].includes(m)?"top":["left","leftTop","leftBottom","lt","lb"].includes(m)?"left":"right",position:["topLeft","bottomLeft","leftTop","rightTop","lt","rt","tl","bl"].includes(m)?"start":["topRight","bottomRight","leftBottom","rightBottom","lb","rb","rt","br"].includes(m)?"end":"middle",maxCol:Math.max(1,C),maxRow:Math.max(1,C),data:a.map((e,l)=>{let i=p?.[e]??h?.[l%h.length];return{label:e,shape:{outerBorder:v?{stroke:i,distance:3,lineWidth:1}:void 0,fill:i}}}),item:{focus:!0,maxWidth:"30%",focusIconStyle:{size:y+2,fill:b,fontWeight:x},shape:{space:v?6:4,style:{symbolType:A,size:v?8:10}},label:{formatMethod:e=>d[e]??e,style:{fontSize:y,fill:b,fontWeight:x}},background:{state:{selectedHover:{fill:b,fillOpacity:.05}}}}};return{...i,legends:R}},lq=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{chartType:n}=t,o=t.config[n];if(!o||!o.legend)return i;let{datasetReshapeInfo:r}=t,a=Math.max(...r.map(e=>e.foldInfo.colorRange[1])),s=Math.min(...r.map(e=>e.foldInfo.colorRange[0])),{legend:d,color:u}=o,{colorScheme:c,linearColorScheme:h}=u,{enable:f,position:p="bottom",labelFontColor:g,labelFontSize:m=12,labelFontWeight:b=400}=d||{},y=["bottom","bottomLeft","bottomRight","bl","br"].includes(p)?"bottom":["top","topLeft","topRight","tl","tr"].includes(p)?"top":["left","leftTop","leftBottom","lt","lb"].includes(p)?"left":"right",x=["topLeft","bottomLeft","leftTop","rightTop","lt","rt","tl","bl"].includes(p)?"start":["topRight","bottomRight","leftBottom","rightBottom","lb","rb","rt","br"].includes(p)?"end":"middle";return{...i,legends:{visible:f,type:"color",orient:y,position:x,colors:h||c||[],value:[s,a],min:s,max:a,maxWidth:"30%",startText:{visible:!0,style:{fill:g,fontSize:m,fontWeight:b}},endText:{visible:!0,style:{fill:g,fontSize:m,fontWeight:b}}}}},lJ=(e,l)=>(i,t)=>{let{vseed:n}=t;return eq(n)?R(l,t,i):R(e,t,i)},lQ=[lJ([lu,e5(lc,lf),lp,lg,lm,lb,ly,lx,e5(lC,lv),lA(lM),lz,lF(lP),lL,lT,lO,lw,lV,lE],[lD,lH,lN,lK,lY([lu,e5(lc,lf),lp,lg,lm,lb,ly,lx,lA(lM),lz,lF(lP),lL,lT,lO,lw,lV,lE]),lG,lj,e5(lU,lq)])],l0=()=>{L._advancedPipelineMap.line=ld,L._specPipelineMap.line=lQ},l1=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return l4(i,n),l5(t,n),{...e,encoding:n}},l2=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?l3(i,r):l4(i,r),o?l7(t,r):l5(t,r),{...e,encoding:r}},l4=(e,l)=>{let i=1===e.length&&e.find(e=>e.id===eu),t=(0,s.a)(e.map(e=>e.id));l.x=t.slice(0,1),l.color=t.slice(+!i),l.detail=t.slice(+!i),l.tooltip=t.filter(e=>e!==eu),l.label=[],l.row=[],l.column=[]},l3=(e,l)=>{l.x=(0,s.a)(e.filter(e=>"xAxis"===e.encoding).map(e=>e.id)),0===l.x.length&&(l.x=[e[0].id]),l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding).map(e=>e.id)),0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},l5=(e,l)=>{l.y=(0,s.a)(e.filter(e=>"yAxis"===e.encoding||!e.encoding).map(e=>e.id))},l7=(e,l)=>{l.y=(0,s.a)(e.filter(e=>"yAxis"===e.encoding||!e.encoding).map(e=>e.id));let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=i);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},l8=[eP,eL,eT,eW,eX([l1,eJ],[l2,eJ]),e1([e6],[e9]),le,li,lo,E,la,ls],l6=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o,foldInfo:r}=n[0];return i.type="bar",i.direction="vertical",i.xField=o.encodingX,i.yField=r.measureValue,i.seriesField=o.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},l9=(e,l)=>{let{advancedVSeed:i,vseed:t}=l,{chartType:n}=t,o=i.config?.[n]?.stackCornerRadius,{datasetReshapeInfo:r}=i,{foldInfo:a}=r[0];return{...e,stackCornerRadius:(e,l)=>l[a.measureValue]>0?o:0}},ie=e=>{let l={...e};return l.stackInverse=!0,l},il=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,r=t.config?.[o]?.crosshairRect;if(!r)return i;i.crosshair||(i.crosshair={});let a=r.visible||!0,s=r.rectColor||void 0,d=r.labelColor||void 0,u=r.labelVisible||!1,c=r.labelBackgroundColor||void 0;return i.crosshair.xField={visible:a,line:{type:"rect",style:{lineWidth:0,opacity:.2,fill:s}},label:{visible:u,labelBackground:{visible:u,style:{fill:c}},style:{fill:d}}},i},ii=e=>(l,i)=>{let t=e(l,i),{advancedVSeed:n}=i,{datasetReshapeInfo:o}=n,{unfoldInfo:r}=o[0];return e7(n)&&t?.bar?.style&&(t.bar.style.fill={field:r.encodingColor,scale:"color"}),t},it=(e,l)=>{let{advancedVSeed:i}=l,{markStyle:t,dataset:n=[]}=i,{barStyle:o}=t,r=n.length<=100,a={...e,bar:{style:{lineWidth:+!!r},state:{hover:{fillOpacity:.6}}}};if(!o)return a;let s=(Array.isArray(o)?o:[o]).reduce((e,l,i)=>{let{barBorderColor:t,barBorderStyle:n,barBorderWidth:o=1,barColor:r,barColorOpacity:a,barRadius:s,barVisible:d=!0}=l;return{...e,[`custom${i+1}`]:{level:i+1,filter:e=>!!lR(e,l.selector),style:{visible:d,fill:r,fillOpacity:a,cornerRadius:s,innerBorder:{stroke:t,lineWidth:o,distance:(o||0)/2,lineDash:"dashed"===n?[5,2]:"dotted"===n?[2,5]:[0,0]}}}}},{});return{...a,bar:{state:{...s}}}},io=(e,l)=>{let{advancedVSeed:i}=l,{annotation:t}=i;if(!t||!t.annotationArea)return e;let{annotationArea:n}=t,o=Array.isArray(n)?n:[n],r={top:"insideTop",topRight:"insideTopRight",topLeft:"insideTopLeft",bottom:"insideBottom",bottomLeft:"insideBottomLeft",bottomRight:"insideBottomRight",left:"insideLeft",right:"insideRight"},a=o.flatMap(e=>{let{selector:l,text:t="",textPosition:n="top",textColor:o="#ffffff",textFontSize:a=12,textFontWeight:s=400,textAlign:d="center",textBaseline:u="top",textBackgroundVisible:c=!0,textBackgroundColor:h="#191d24",textBackgroundBorderColor:f="#191d24",textBackgroundBorderWidth:p=1,textBackgroundBorderRadius:g=4,textBackgroundPadding:m=4,areaColor:b="#888888",areaColorOpacity:y=.15,areaBorderColor:x="#888888",areaBorderRadius:C=4,areaBorderWidth:v=1,outerPadding:A=4}=e,R=i.dataset.flat(),I=l?R.filter(e=>lR(e,l)):[];return{zIndex:1e3,regionRelative:!0,positions:(e,l)=>{let i=e.filter(e=>I.some(l=>lZ(l,e))).map(e=>l.dataToPosition(e)),t=l.getYAxisHelper(),n=l.getXAxisHelper();if("function"==typeof n?.getBandwidth){let e=l.fieldX.length??0,o=n?.getBandwidth?.(e-1),r=t.getScale(),a=Math.min(...i.map(e=>e.x))-(A||4),s=Math.max(...i.map(e=>e.x))+o+(A||4),d=Math.min(...r.range()),u=Math.max(...r.range());return[{x:a,y:d},{x:s,y:d},{x:s,y:u},{x:a,y:u}]}if("function"==typeof t?.getBandwidth){let e=l.fieldY.length??0,o=t?.getBandwidth?.(e-1),r=n.getScale(),a=Math.min(...i.map(e=>e.y))-(A||4),s=Math.max(...i.map(e=>e.y))+o+(A||4),d=Math.min(...r.range()),u=Math.max(...r.range());return[{x:d,y:a},{x:u,y:a},{x:u,y:s},{x:d,y:s}]}return[]},label:{position:r[n||"top"],visible:!0,text:t,style:{dy:a,textAlign:d,textBaseline:u,stroke:h,lineWidth:1,fill:o,fontSize:a,fontWeight:s},labelBackground:{visible:c,padding:m,style:{dy:a,cornerRadius:g??4,fill:h,stroke:f,lineWidth:p}}},area:{style:{visible:!0,fill:b,fillOpacity:y,stroke:x,lineWidth:v,cornerRadius:C}}}});return{...e,markArea:a}},ir=[lJ([l6,l9,ie,e5(lc,lf),lp,lg,lm,lb,ly,lL,lT,il,e5(lC,lv),ii(it),lO,lw,lV,io],[lD,lH,lN,lK,lY([l6,l9,ie,e5(lc,lf),lp,lg,lm,lb,ly,lL,lT,il,ii(it),lO,lw,lV,io]),lG,lj,e5(lU,lq)])],ia=()=>{L._advancedPipelineMap.column=l8,L._specPipelineMap.column=ir},is=[eP,eL,eT,eW,eX([l1,eJ],[l2,eJ]),e1([e6],[e9]),le,li,lo,E,la,ls],id=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n,dimensions:o}=t,{unfoldInfo:r,foldInfo:a}=n[0],s=o.length>1&&o.every(e=>e.id===o[0].id);return i.type="bar",i.direction="vertical",i.xField=s?[r.encodingX]:[r.encodingX,r.encodingDetail],i.yField=a.measureValue,i.seriesField=r.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},iu=[lJ([id,l9,e5(lc,lf),lp,lg,lm,lb,ly,lL,lT,e5(lC,lv),il,ii(it),lO,lw,lV,io],[lD,lH,lN,lK,lY([id,l9,e5(lc,lf),lp,lg,lm,lb,ly,lL,lT,il,ii(it),lO,lw,lV,io]),lG,lj,e5(lU,lq)])],ic=()=>{L._advancedPipelineMap.columnParallel=is,L._specPipelineMap.columnParallel=iu},ih=[eP,eL,eT,eW,eX([l1,eJ],[l2,eJ]),e1([e6],[e9]),le,li,lo,E,la,ls],ip=(e,l)=>{let i={...e};return i.percent=!0,i},ig=[lJ([l6,l9,ie,e5(lc,lf),lp,ip,lg,lm,lb,ly,lL,lT,e5(lC,lv),il,ii(it),lO,lw,lV,io],[lD,lH,lN,lK,lY([l6,l9,ie,e5(lc,lf),ip,lp,lg,lm,lb,ly,lL,lT,il,ii(it),lO,lw,lV,io]),lG,lj,e5(lU,lq)])],im=()=>{L._advancedPipelineMap.columnPercent=ih,L._specPipelineMap.columnPercent=ig},ib=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return ix(i,n),iv(t,n),{...e,encoding:n}},iy=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?iC(i,r):ix(i,r),o?iA(t,r):iv(t,r),{...e,encoding:r}},ix=(e,l)=>{let i=1===e.length&&e.find(e=>e.id===eu),t=(0,s.a)(e.map(e=>e.id));l.y=t.slice(0,1),l.color=t.slice(+!i),l.detail=t.slice(+!i),l.tooltip=t.filter(e=>e!==eu),l.label=[],l.row=[],l.column=[]},iC=(e,l)=>{l.y=(0,s.a)(e.filter(e=>"yAxis"===e.encoding).map(e=>e.id)),0===l.y.length&&(l.y=[e[0].id]),l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding).map(e=>e.id)),0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},iv=(e,l)=>{l.x=(0,s.a)(e.filter(e=>"xAxis"===e.encoding||!e.encoding).map(e=>e.id))},iA=(e,l)=>{l.x=(0,s.a)(e.filter(e=>"xAxis"===e.encoding||!e.encoding).map(e=>e.id));let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=i);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},iR=(e,l)=>{let i={...e},{vseed:t}=l,{sort:n}=t,{datasetReshapeInfo:o,dataset:r}=e,{unfoldInfo:a}=o[0],s=a?.encodingY;if(!n||!s)return e;i.analysis||(i.analysis={}),i.analysis.orderMapping||(i.analysis.orderMapping={});let d=ll(n,s,r.flat(2));return i.analysis.orderMapping[s]=d,i},iI=[eP,eL,eT,eW,eX([ib,eJ],[iy,eJ]),e1([e6],[e9]),iR,li,lo,E,la,ls],ik=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o,foldInfo:r}=n[0];return i.type="bar",i.direction="horizontal",i.yField=o.encodingY,i.xField=r.measureValue,i.seriesField=o.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},iS=(e,l)=>{let{advancedVSeed:i,vseed:t}=l,{analysis:n,datasetReshapeInfo:o}=i,{unfoldInfo:r}=o[0],a=n?.orderMapping||{},s=r.encodingAngle,d=r.encodingY,u=r.encodingColorId,c=o[0].id,h={};if(s&&(h[s]={sortIndex:0}),d){let e=a[d];e?h[d]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:h[d]={sortIndex:0}}if(u){let e=a[u];e?h[u]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:h[u]={sortIndex:0}}return{...e,data:{id:c,values:eq(t)?void 0:i.dataset,fields:h}}},i_=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,{locale:r}=t,a=t.config?.[o]?.xAxis;if(i.axes||(i.axes=[]),!a)return i.axes=[...i.axes,{visible:!0,type:"linear",orient:"bottom"}],i;let{visible:s=!0,label:d,tick:u,title:c,grid:h,line:f,zero:p,nice:g,inverse:m,max:b,min:y,log:x,logBase:C=10}=a,v={visible:s,type:x?"log":"linear",base:C,orient:"bottom",nice:g,zero:!x&&p,inverse:m,max:b,min:y,label:{visible:d?.visible,formatMethod:e=>q(e,r),style:{fill:d?.labelColor,angle:d?.labelAngle,fontSize:d?.labelFontSize,fontWeight:d?.labelFontWeight}},title:{visible:c?.visible,text:c?.titleText,style:{fill:c?.titleColor,fontSize:c?.titleFontSize,fontWeight:c?.titleFontWeight}},tick:{visible:u?.visible,tickSize:u?.tickSize,inside:u?.tickInside,style:{stroke:u?.tickColor}},grid:{visible:h?.visible,style:{lineWidth:h?.gridWidth,stroke:h?.gridColor}},domainLine:{visible:f?.visible,style:{lineWidth:f?.lineWidth,stroke:f?.lineColor}},innerOffset:{right:7}};return i.axes=[...i.axes,v],i},iM=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,r=t.config?.[o]?.yAxis;if(i.axes||(i.axes=[]),!r)return i.axes=[...i.axes,{visible:!0,type:"band",orient:"left"}],i;let{visible:a=!0,label:s,tick:d,title:u,grid:c,line:h,labelAutoHide:f,labelAutoHideGap:p,labelAutoLimit:g,labelAutoLimitLength:m=80,labelAutoRotate:b,labelAutoRotateAngleRange:y}=r,x={visible:a,type:"band",orient:"left",maxWidth:m+60,sampling:!(f||b||g),hover:!0,label:{visible:s?.visible,flush:!0,containerAlign:"right",space:8,style:{maxLineWidth:m,fill:s?.labelColor,angle:s?.labelAngle,fontSize:s?.labelFontSize,fontWeight:s?.labelFontWeight},minGap:p,autoHide:f,autoHideMethod:"greedy",autoHideSeparation:p,autoLimit:g,autoRotate:b,autoRotateAngle:y,lastVisible:!0},title:{visible:u?.visible,text:u?.titleText,style:{fill:u?.titleColor,fontSize:u?.titleFontSize,fontWeight:u?.titleFontWeight}},tick:{visible:d?.visible,tickSize:d?.tickSize,inside:d?.tickInside,style:{stroke:d?.tickColor}},grid:{visible:c?.visible,style:{lineWidth:c?.gridWidth,stroke:c?.gridColor}},domainLine:{visible:h?.visible,style:{lineWidth:h?.lineWidth,stroke:h?.lineColor}},paddingInner:[.15,.1],paddingOuter:[.075,.1]};return i.axes=[...i.axes,x],i},iz=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,r=t.config?.[o]?.crosshairRect;if(!r)return i;i.crosshair||(i.crosshair={});let a=r.visible||!0,s=r.rectColor||void 0,d=r.labelColor||void 0,u=r.labelVisible||!1,c=r.labelBackgroundColor||void 0;return i.crosshair.yField={visible:a,line:{type:"rect",style:{lineWidth:0,opacity:.2,fill:s}},label:{visible:u,labelBackground:{visible:u,style:{fill:c}},style:{fill:d}}},i},iB=[lJ([ik,l9,e5(lc,lf),lp,iS,lm,i_,iM,lL,lT,e5(lC,lv),iz,ii(it),lO,lw,lV,io],[lD,lH,l$,lK,lY([ik,l9,e5(lc,lf),lp,iS,lm,i_,iM,lL,lL,lT,ii(it),iz,lO,lw,lV,io]),lG,lj,e5(lU,lq)])],iF=()=>{L._advancedPipelineMap.bar=iI,L._specPipelineMap.bar=iB},iP=[eP,eL,eT,eW,eX([ib,eJ],[iy,eJ]),e1([e6],[e9]),iR,li,lo,E,la,ls],iL=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n,dimensions:o}=t,{unfoldInfo:r,foldInfo:a}=n[0],s=o.length>1&&o.every(e=>e.id===o[0].id);return i.type="bar",i.direction="horizontal",i.yField=s?[r.encodingY]:[r.encodingY,r.encodingDetail],i.xField=a.measureValue,i.seriesField=r.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},iT=[lJ([iL,l9,e5(lc,lf),lp,iS,lm,i_,iM,lL,lT,e5(lC,lv),iz,ii(it),lO,lw,lV,io],[lD,lH,l$,lK,lY([iL,l9,e5(lc,lf),lp,iS,i_,iM,lL,lT,ii(it),iz,lO,lw,lV,io]),lG,lj,e5(lU,lq)])],iW=()=>{L._advancedPipelineMap.barParallel=iP,L._specPipelineMap.barParallel=iT},iX=[eP,eL,eT,eW,eX([ib,eJ],[iy,eJ]),e1([e6],[e9]),iR,li,lo,E,la,ls],iZ=[lJ([ik,l9,e5(lc,lf),lp,ip,iS,lm,i_,iM,lL,lT,e5(lC,lv),iz,ii(it),lO,lw,lV,io],[lD,lH,l$,lK,lY([ik,l9,e5(lc,lf),lp,ip,iS,iM,i_,lL,lT,ii(it),iz,lO,lw,lV,io]),lG,lj,e5(lU,lq)])],iO=()=>{L._advancedPipelineMap.barPercent=iX,L._specPipelineMap.barPercent=iZ},iw=[eP,eL,eT,eW,eX([eZ,eJ],[eO,eJ]),e1([e6],[e9]),le,li,ln,E,la,ls],iV=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o,foldInfo:r}=n[0];return i.type="area",i.direction="vertical",i.yField=r.measureValue,i.xField=o.encodingX,i.seriesField=e7(t)?o.encodingDetail:o.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},iE=e=>(l,i)=>{let t=e(l,i),{advancedVSeed:n}=i,{datasetReshapeInfo:o}=n,{unfoldInfo:r}=o[0];return e7(n)&&t?.area?.style&&(t.area.style.fill={field:r.encodingColor,scale:"color"}),t},iD=(e,l)=>{let{advancedVSeed:i}=l,{markStyle:t,datasetReshapeInfo:n,dataset:o}=i,{areaStyle:r}=t,{unfoldInfo:a}=n[0],s={...e,area:{visible:!0,style:{}}};if(!r)return s;let d=Array.isArray(r)?r:[r],u=a.encodingColorId,c=(0,C.a)(o,e=>e[u??""]),h=d.reduce((e,l,i)=>{let{areaColor:t,areaColorOpacity:n,areaVisible:o=!0}=l;return{...e,[`custom${i+1}`]:{level:i+1,filter:e=>{for(let i of c[e[u??""]])if(lR(i,l.selector))return!0;return!1},style:{visible:o,fill:t,fillOpacity:n}}}},{});return{...s,area:{...s.area,visible:!0,state:{...h}}}},iH=[lJ([iV,ie,e5(lc,lf),lp,lg,lm,lb,ly,lL,lT,e5(lC,lv),lx,lA(lM),lz,lF(lP),iE(iD),lO,lw,lV,lE],[lD,lH,lN,lK,lY([iV,e5(lc,lf),lp,ie,lg,lm,lb,ly,lL,lT,lx,lA(lM),lz,lF(lP),iE(iD),lO,lw,lV,lE]),lG,lj,e5(lU,lq)])],iY=()=>{L._advancedPipelineMap.area=iw,L._specPipelineMap.area=iH},iN=[eP,eL,eT,eW,eX([eZ,eJ],[eO,eJ]),e1([e6],[e9]),le,li,ln,E,la,ls],i$=[lJ([iV,ie,e5(lc,lf),lp,ip,lg,lm,lb,ly,lL,lT,e5(lC,lv),lx,lA(lM),lz,lF(lP),iE(iD),lO,lw,lV,lE],[lD,lH,lN,lK,lY([iV,ie,e5(lc,lf),lp,ip,lg,lm,lb,ly,lL,lT,lx,lA(lM),lz,lF(lP),iE(iD),lO,lw,lV,lE]),lG,lj,e5(lU,lq)])],iK=()=>{L._advancedPipelineMap.areaPercent=iN,L._specPipelineMap.areaPercent=i$},iG=(e,l)=>{let i=e.filter(e=>e.id!==eu),t=(0,s.a)(i.map(e=>e.id));l.color=t.slice(0),l.detail=t.slice(0),l.tooltip=t.filter(e=>e!==eu),l.label=[],l.row=[],l.column=[]},ij=(e,l)=>{l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding).map(e=>e.id)),0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},iU=(e,l)=>{l.y=(0,s.a)(e.filter(e=>"xAxis"===e.encoding||"yAxis"===e.encoding||!e.encoding).map(e=>e.id))},iq=(e,l)=>{l.tooltip=e.map(e=>e.id),l.y=(0,s.a)(e.filter(e=>"xAxis"===e.encoding||"yAxis"===e.encoding||!e.encoding).map(e=>e.id));let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=[i[0]]);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},iJ=(e,l)=>{let{vseed:i}=l;if(eH(i))return e.measures=i.measures,e;if(eY(i))return e.measures=i1(i.measures),e;let t=i.scatterMeasures?i.scatterMeasures:iQ(e.measures||[]);return e.measures=i0(t),e},iQ=e=>{let l=[],i=[];for(let t=0;t<e.length;t++){let n=e[t],o=Array.isArray(n.encoding)?n.encoding:[n.encoding],r=o.includes("yAxis"),a=o.includes("xAxis");r?l.push(n):a?i.push(n):0!==t?l.push(n):i.push(n)}return 0===l.length&&i.length>0&&l.push(i[0]),[{id:"scatterMeasures",xMeasures:i,yMeasures:l}]},i0=e=>{let l=e.map((e,l)=>{let{id:i,xMeasures:t,yMeasures:n}=e,o=[],r=`${i}-`;if(t){let e=Array.isArray(t)?t:[t];r+=e.map(e=>e.alias||e.id).toString(),o.push({id:`${l}-x`,alias:e.map(e=>e.alias||e.id).toString(),children:e})}if(n){let e=Array.isArray(n)?n:[n];r+=e.map(e=>e.alias||e.id).toString(),o.push({id:`${l}-y`,alias:e.map(e=>e.alias||e.id).toString(),children:e})}return{id:r,alias:r,children:o}});return 1===e.length?l[0].children||[]:l},i1=e=>{let l=[];return e.forEach(e=>{if(!e.parentId)return;l.find(l=>l.id===e.parentId)||l.push({id:e.parentId,yMeasures:[],xMeasures:[]});let i=l.find(l=>l.id===e.parentId);if(!i||!Array.isArray(i.yMeasures)||!Array.isArray(i.xMeasures))return;let t=Array.isArray(e.encoding)?e.encoding:[e.encoding],n=t.includes("xAxis"),o=t.includes("yAxis"),r=!t.length;o?i.yMeasures.push(e):n?i.xMeasures.push(e):r&&(0!==i.yMeasures.length?i.yMeasures.push(e):i.xMeasures.push(e))}),i0(l)},i2=[eP,eL,eT,eW,eX([e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return iG(i,n),iU(t,n),{...e,encoding:n}},iJ],[e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?ij(i,r):iG(i,r),o?iq(t,r):iU(t,r),{...e,encoding:r}},iJ]),e1([(e,l)=>{let i={...e},{vseed:t}=l,{dataset:n}=t,{dimensions:o,measures:r,encoding:a,chartType:s}=e;if(!r||!o||!n||!a)return i;if(0===r.length)throw Error("measures can not be empty");if(r.length>2)throw Error("measures can not be more than 2");let d=[],u=[],c=[],h=r[0],f=r[1]||h;if(h&&h.children){let{dataset:l,foldInfo:i,unfoldInfo:t}=e3(n,(0,y.a)(o,e=>e.id),(0,y.a)(h.children,e=>e.id),a,{foldMeasureValue:ef,foldMeasureId:eg,colorItemAsId:!0,colorMeasureId:e8(e)});c.push(l),d.push(i),u.push(t)}if(f&&f.children){let{dataset:l,foldInfo:i,unfoldInfo:t}=e3(c[0],(0,y.a)(o,e=>e.id),(0,y.a)(f.children,e=>e.id),a,{foldMeasureValue:ep,foldMeasureId:em,colorItemAsId:!0,colorMeasureId:e8(e)});c[0]=l,d.push(i),u.push(t)}let p={...u[0],colorItems:u.flatMap(e=>e.colorItems),colorIdMap:u.reduce((e,l)=>({...e,...l.colorIdMap}),{})};return{...i,dataset:c[0],datasetReshapeInfo:[{id:String(s),index:0,foldInfo:d[0],foldInfoList:d,unfoldInfo:p}]}}],[(e,l)=>{let i={...e},{vseed:t}=l,{dataset:n}=t,{dimensions:o,measures:r,encoding:a,chartType:s}=e;if(!r||!o||!n||!a)return i;let d=[],u=e$(r);3===u?r.forEach(e=>{d.push(e.children)}):2===u&&d.push(r);let c=[],h=[];return d.forEach((l,i)=>{if(0===l.length)throw Error("measures can not be empty");if(l.length>2)throw Error("measures can not be more than 2");let t=[],r=[],d=[],u=l[0],f=l[1]||u;if(u&&u.children){let{dataset:l,foldInfo:s,unfoldInfo:c}=e3(n,o,u.children,a,{foldMeasureValue:`${ef}${i}`,colorItemAsId:!0,colorMeasureId:e8(e)});d.push(l),t.push(s),r.push(c)}if(f&&f.children){let{dataset:l,foldInfo:s,unfoldInfo:u}=e3(n,o,f.children,a,{foldMeasureValue:`${ep}${i}`,colorItemAsId:!0,colorMeasureId:e8(e)});d.push(l),t.push(s),r.push(u)}let p={...r[0],colorItems:r.flatMap(e=>e.colorItems),colorIdMap:r.reduce((e,l)=>({...e,...l.colorIdMap}),{})},g={id:`${s}-${i}`,index:i,foldInfo:t[0],foldInfoList:t,unfoldInfo:p};h.push(g),c.push(d[0].map((e,l)=>({...e,...d[1]?.[l]||{}})))}),{...i,dataset:c,datasetReshapeInfo:h}}]),ln,E,la,ls],i4=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o,foldInfoList:r}=n[0];return i.type="scatter",i.direction="vertical",i.xField=r?.[0].measureValue,r?.[1]&&(i.yField=r[1].measureValue),i.seriesField=o.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},i3=(e,l)=>{let{advancedVSeed:i,vseed:t}=l,{datasetReshapeInfo:n}=i,o=n[0].id;return{...e,data:{id:o,values:eq(t)?void 0:i.dataset.flat(),fields:{}}}},i5=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{measures:n,datasetReshapeInfo:o,chartType:r,locale:a,dimensions:s,encoding:d}=t,{tooltip:u={enable:!0}}=t.config[r],{enable:c}=u,{foldInfoList:h}=o[0];return i.tooltip={visible:c,mark:{title:{visible:!1},content:i7(d.tooltip||[],s,n,a,h)},dimension:{visible:!1}},i},i7=(e,l,i,t,n)=>{let o=l.filter(l=>e.includes(l.id)),r=i.filter(l=>e.includes(l.id)),a=o.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:l=>e.alias||e.id?e.alias||e.id:l&&l[e.id],value:l=>l&&l[e.id]})),s=r.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:e.alias||e.id,value:l=>{if(!l)return"";let n=e.id;if(!l||!l[er]||!l[er])return"";let o=l[er][n],r=Z(i,n);if(!r)return String(o);let{format:a={},autoFormat:s=!0}=r;return(0,m.a)(a)?s?q(o,t):String(o):U(a)(o)}}));return[...a,...n.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:l=>{let{measureId:i,foldMap:t}=e,n=l[i];return t[n]||n},value:l=>{let{measureId:n,measureValue:o}=e;if(!l)return"";let r=l[o],a=Z(i,l[n]);if(!a)return String(r);let{format:s={},autoFormat:d=!0}=a;return(0,m.a)(s)?d?q(r,t):String(r):U(s)(r)}})),...s]},i8=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,r=t.config?.[o]?.crosshairLine;if(!r)return i;i.crosshair||(i.crosshair={});let a=r.visible||!0,s=r.lineColor||void 0,d=r.labelColor||void 0,u=r.labelVisible||void 0,c=r.labelBackgroundColor||void 0;return i.crosshair.yField={visible:a,line:{type:"line",style:{lineWidth:1,opacity:1,stroke:s,lineDash:[4,2]}},label:{visible:u,labelBackground:{visible:u,style:{fill:c}},style:{fill:d}}},i},i6=[lJ([i4,e5(lc,lf),lp,i3,lm,i_,ly,lL,i5,e5(lC,lv),lx,i8,lA(lM),lB,lO,lw,lV,lE],[lD,lH,lN,lK,lY([i4,e5(lc,lf),lp,i3,lm,i_,ly,lL,i5,lx,i8,lA(lM),lB,lO,lw,lV,lE]),lG,lj,e5(lU,lq)])],i9=()=>{L._advancedPipelineMap.scatter=i2,L._specPipelineMap.scatter=i6},te=(e,l)=>{let i=1===e.length&&e.find(e=>e.id===eu),t=(0,s.a)(e.map(e=>e.id));l.x=t.slice(0,1),l.color=t.slice(+!i),l.detail=t.slice(+!i),l.tooltip=t.filter(e=>e!==eu),l.label=[],l.row=[],l.column=[]},tl=(e,l)=>{l.x=(0,s.a)(e.filter(e=>"xAxis"===e.encoding).map(e=>e.id)),0===l.x.length&&(l.x=[e[0].id]),l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding).map(e=>e.id)),0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},ti=(e,l)=>{l.y=(0,s.a)(e.filter(e=>"primaryYAxis"===e.encoding||"secondaryYAxis"===e.encoding||!e.encoding).map(e=>e.id))},tt=(e,l)=>{l.y=(0,s.a)(e.filter(e=>"primaryYAxis"===e.encoding||"secondaryYAxis"===e.encoding||!e.encoding).map(e=>e.id));let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=i);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},tn=(e,l)=>{let{vseed:i}=l;if(eH(i))return e.measures=i.measures,e;if(eY(i))return e.measures=ta(i.measures),e;let t=i.dualMeasures?i.dualMeasures:to(e.measures||[]);return e.measures=tr(t),e},to=e=>{let l=[],i=[];for(let t=0;t<e.length;t++){let n=e[t],o=Array.isArray(n.encoding)?n.encoding:[n.encoding],r=o.includes("primaryYAxis"),a=o.includes("secondaryYAxis");r?l.push(n):a?i.push(n):0===t?l.push(n):i.push(n)}return[{id:"dualMeasures",primaryMeasures:l,secondaryMeasures:i}]},tr=e=>{let l=e.map((e,l)=>{let{id:i,primaryMeasures:t,secondaryMeasures:n}=e,o=[],r=`${i}-`;if(t){let e=Array.isArray(t)?t:[t];r+=e.map(e=>e.alias||e.id).toString(),o.push({id:`${l}-primary`,alias:e.map(e=>e.alias||e.id).toString(),children:e})}if(n){let e=Array.isArray(n)?n:[n];r+=e.map(e=>e.alias||e.id).toString(),o.push({id:`${l}-secondary`,alias:e.map(e=>e.alias||e.id).toString(),children:e})}return{id:r,alias:r,children:o}});return 1===e.length?l[0].children||[]:l},ta=e=>{let l=[];return e.forEach(e=>{if(!e.parentId)return;l.find(l=>l.id===e.parentId)||l.push({id:e.parentId,primaryMeasures:[],secondaryMeasures:[]});let i=l.find(l=>l.id===e.parentId);if(!i||!Array.isArray(i.primaryMeasures)||!Array.isArray(i.secondaryMeasures))return;let t=Array.isArray(e.encoding)?e.encoding:[e.encoding],n=t.includes("primaryYAxis"),o=t.includes("secondaryYAxis"),r=!e.encoding;n?i.primaryMeasures.push(e):o?i.secondaryMeasures.push(e):r&&(0===i.primaryMeasures.length?i.primaryMeasures.push(e):i.secondaryMeasures.push(e))}),tr(l)},ts=[eP,eL,eT,eW,eX([e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return te(i,n),ti(t,n),{...e,encoding:n}},tn],[e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?tl(i,r):te(i,r),o?tt(t,r):ti(t,r),{...e,encoding:r}},tn]),e1([(e,l)=>{let i={...e},{vseed:t}=l,{dataset:n}=t,{dimensions:o,measures:r,encoding:a,chartType:s}=e;if(!r||!o||!n||!a)return i;if(0===r.length)throw Error("measures can not be empty");if(r.length>2)throw Error("measures can not be more than 2");let d=[],u=[],c=[],h=r[0],f=r[1]||[],p=(t.dimensions||[]).some(e=>e.encoding);if(h&&h.children){let{dataset:l,foldInfo:i,unfoldInfo:t}=e3(n,o,h.children,a,{colorItemAsId:p,foldMeasureValue:ec,colorMeasureId:e8(e)});c.push(l),d.push(i),u.push(t)}if(f&&f.children){let{dataset:l,foldInfo:i,unfoldInfo:t}=e3(n,o,f.children,a,{foldMeasureValue:eh,colorMeasureId:e8(e)});c.push(l),d.push(i),u.push(t)}let g={...u[0],colorItems:u.flatMap(e=>e.colorItems),colorIdMap:u.reduce((e,l)=>({...e,...l.colorIdMap}),{})};return{...i,dataset:c,datasetReshapeInfo:[{id:String(s),index:0,foldInfo:d[0],foldInfoList:d,unfoldInfo:g}]}}],[(e,l)=>{let i={...e},{vseed:t}=l,{dataset:n}=t,{dimensions:o,measures:r,encoding:a,chartType:s}=e;if(!r||!o||!n||!a)return i;let d=(t.dimensions||[]).some(e=>e.encoding),u=[],c=[],h=[],f=e$(r);return 3===f?r.forEach(e=>{h.push(e.children)}):2===f&&h.push(r),h.forEach((l,i)=>{if(0===l.length)throw Error("measures can not be empty");if(l.length>2)throw Error("measures can not be more than 2");let t=[],r=[],h=[],f=l[0],p=l[1]||[];if(f&&f.children){let{dataset:l,foldInfo:s,unfoldInfo:u}=e3(n,o,f.children,a,{colorItemAsId:d,foldMeasureValue:`${ec}${i}`,colorMeasureId:e8(e)});h.push(l),t.push(s),r.push(u)}if(p&&p.children){let{dataset:l,foldInfo:s,unfoldInfo:d}=e3(n,o,p.children,a,{foldMeasureValue:`${eh}${i}`,colorMeasureId:e8(e)});h.push(l),t.push(s),r.push(d)}let g={...r[0],colorItems:r.flatMap(e=>e.colorItems),colorIdMap:r.reduce((e,l)=>({...e,...l.colorIdMap}),{})},m={id:`${s}-${i}`,index:i,foldInfo:t[0],foldInfoList:t,unfoldInfo:g};c.push(m),u.push(h.flat(2))}),{...i,dataset:u,datasetReshapeInfo:c}}]),le,li,(e,l)=>{let{vseed:i}=l,{chartType:t}=i,n={...e},o=(0,d.a)(i,["backgroundColor","color","label","legend","tooltip","dualChartType","alignTicks","primaryYAxis","secondaryYAxis","crosshairLine"]);return n.config={...n.config||{},[t]:{...o}},n},E,la,ls],td=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o,foldInfoList:r,id:a}=n[0];return i.id=`${a}-primary-series`,i.type="bar",i.direction="vertical",i.xField=o.encodingX,i.seriesField=o.encodingColorId,i.yField=r?.[0].measureValue,i.animation=!0,i},tu=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o,foldInfoList:r,id:a}=n[0];return i.id=`${a}-secondary-series`,i.type="line",i.direction="vertical",i.xField=o.encodingX,r?.[1]&&(i.yField=r[1].measureValue),i.seriesField=e7(t)?o.encodingDetail:o.encodingColorId,i.animation=!0,i},tc=(e,l)=>{let i={...e,zIndex:1001},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,{datasetReshapeInfo:r}=t,a=r[0].index,s=t.config?.[o]?.dualChartType||{primary:"column",secondary:"line"},d=Array.isArray(s)?s[a].primary||s[0].primary:s.primary,u=Array.isArray(s)?s[a].secondary||s[0].secondary:s.secondary;switch("column"===d&&"column"===u?"columnParallel":d){case"line":i.type="line";break;case"column":i.type="bar",i.zIndex=1e3;break;case"columnParallel":Array.isArray(i.xField)?i.xField.push(r[0].unfoldInfo.encodingDetail):i.xField&&(i.xField=[i.xField,r[0].unfoldInfo.encodingDetail]),i.type="bar",i.zIndex=1e3;break;case"columnPercent":i.type="bar",i.percent=!0;break;case"area":i.type="area";break;case"areaPercent":i.type="area",i.percent=!0;break;case"scatter":i.type="scatter";break;default:i.type=d}return i},th=(e,l)=>{let i={...e,zIndex:1001},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,{datasetReshapeInfo:r}=t,a=t.config?.[o]?.dualChartType||{primary:"column",secondary:"line"},s=r[0].index,d=Array.isArray(a)?a[s].primary||a[0].primary:a.primary,u=Array.isArray(a)?a[s].secondary||a[0].secondary:a.secondary;switch("column"===d&&"column"===u?"columnParallel":u){case"line":i.type="line";break;case"column":i.type="bar",i.zIndex=1e3;break;case"columnParallel":Array.isArray(i.xField)?i.xField.push(r[0].unfoldInfo.encodingDetail):i.xField&&(i.xField=[i.xField,r[0].unfoldInfo.encodingDetail]),i.type="bar",i.zIndex=1e3;break;case"columnPercent":i.type="bar",i.percent=!0;break;case"area":i.type="area";break;case"areaPercent":i.type="area",i.percent=!0;break;case"scatter":i.type="scatter";break;default:i.type=u}return i},tf=(e,l)=>{let{advancedVSeed:i,vseed:t}=l,{analysis:n,datasetReshapeInfo:o}=i,r=n?.orderMapping||{},{unfoldInfo:a}=o[0],s=a.encodingX,d=a.encodingColorId,u=o[0].id,c={};if(s){let e=r[s];e?c[s]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:c[s]={sortIndex:0}}if(d){let e=r[d];e?c[d]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:c[d]={sortIndex:0}}return{...e,data:{id:`${u}-primary-dataset`,values:eq(t)?void 0:i.dataset,fields:c}}},tp=(e,l)=>{let{advancedVSeed:i,vseed:t}=l,{analysis:n,datasetReshapeInfo:o}=i,r=n?.orderMapping||{},{unfoldInfo:a}=o[0],s=a.encodingX,d=a.encodingColorId,u=o[0].id,c={};if(s){let e=r[s];e?c[s]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:c[s]={sortIndex:0}}if(d){let e=r[d];e?c[d]={sortIndex:0,domain:e,lockStatisticsByDomain:!0}:c[d]={sortIndex:0}}return{...e,data:{id:`${u}-secondary-dataset`,values:eq(t)?void 0:i.dataset,fields:c}}},tg=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{measures:n,datasetReshapeInfo:o,locale:r}=t,{chartType:a}=t,s=t.config[a];if(!s||!s.label)return i;let{measureId:d,measureValue:u}=o[0].foldInfoList[0],{label:c}=s,{enable:h}=c;return i.label={visible:h,formatMethod:(e,l)=>{let i=[];return i.push((e=>{let i=Z(n,l[d]);if(!i)return e;let{format:t={},autoFormat:o=!0}=i;return(0,m.a)(t)?o?q(e,r):String(e):U(t)(e)})(l[u])),i.join(" ")}},i},tm=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{measures:n,datasetReshapeInfo:o,locale:r}=t,{chartType:s}=t,d=t.config[s];if(!d||!d.label||(0,a.a)(o[0].foldInfoList?.[1]))return i;let{measureId:u,measureValue:c}=o[0].foldInfoList[1],{label:h}=d,{enable:f}=h;return i.label={visible:f,formatMethod:(e,l)=>{let i=[];return i.push((e=>{let i=Z(n,l[u]);if(!i)return e;let{format:t={},autoFormat:o=!0}=i;return(0,m.a)(t)?o?q(e,r):String(e):U(t)(e)})(l[c])),i.join(" ")}},i},tb=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{measures:n,datasetReshapeInfo:o,chartType:r,locale:a,dimensions:s,encoding:d}=t,{tooltip:u={enable:!0}}=t.config[r],{enable:c}=u,h=o[0].foldInfoList,f=o[0].unfoldInfo;return i.tooltip={visible:c,mark:{title:{visible:!1},content:lX(d.tooltip||[],s,n,a,h[0],f)},dimension:{title:{visible:!0},content:lW(n,h[0],f,a)}},i},ty=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{measures:n,datasetReshapeInfo:o,chartType:r,locale:s,dimensions:d,encoding:u}=t,{tooltip:c={enable:!0}}=t.config[r],{enable:h}=c;if((0,a.a)(o[0].foldInfoList?.[1]))return i;let f=o[0].foldInfoList,p=o[0].unfoldInfo;return i.tooltip={visible:h,mark:{title:{visible:!1},content:lX(u.tooltip||[],d,n,s,f[1],p)},dimension:{title:{visible:!0},content:lW(n,f[1],p,s)}},i},tx=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,{locale:r,datasetReshapeInfo:s}=t,{index:d,id:u,foldInfoList:c}=s[0],h=t.config?.[o]?.primaryYAxis,f=Array.isArray(h)?h[d]||h[0]:h,p=t.config?.[o]?.alignTicks,g=Array.isArray(p)?p[d]||p[0]:p;if((0,a.a)(c?.[0]))return i;let b=(0,m.a)(c?.[0].foldMap),y=`${u}-primary-axis`,x=[`${u}-primary-series`,`${u}-secondary-series`],C=g?x:x[0];if(i.axes||(i.axes=[]),!f)return i.axes=[...i.axes,{visible:!0,id:y,seriesId:C,type:"linear",orient:"left"}],i;let{visible:v=!0,label:A,tick:R,title:I,grid:k,line:S,zero:_,nice:M,inverse:z,max:B,min:F,log:P,logBase:L=10}=f,T={visible:!b&&v,id:y,seriesId:C,type:P?"log":"linear",base:L,orient:"left",nice:M,zero:!P&&_,inverse:z,max:B,min:F,label:{visible:A?.visible,formatMethod:e=>q(e,r),style:{fill:A?.labelColor,angle:A?.labelAngle,fontSize:A?.labelFontSize,fontWeight:A?.labelFontWeight}},title:{visible:I?.visible,text:I?.titleText,style:{fill:I?.titleColor,fontSize:I?.titleFontSize,fontWeight:I?.titleFontWeight}},tick:{visible:R?.visible,tickSize:R?.tickSize,inside:R?.tickInside,style:{stroke:R?.tickColor}},grid:{visible:k?.visible,style:{lineWidth:k?.gridWidth,stroke:k?.gridColor}},domainLine:{visible:S?.visible,style:{lineWidth:S?.lineWidth,stroke:S?.lineColor}},innerOffset:{top:7}};return i.axes=[...i.axes,T],i},tC=(e,l)=>{let i={...e},{advancedVSeed:t,vseed:n}=l,{chartType:o}=n,{locale:r,datasetReshapeInfo:s}=t,{index:d,id:u,foldInfoList:c}=s[0],h=t.config?.[o]?.secondaryYAxis,f=Array.isArray(h)?h[d]||h[0]:h,p=t.config?.[o]?.alignTicks,g=Array.isArray(p)?p[d]||p[0]:p;if((0,a.a)(c?.[1]))return i;let b=(0,m.a)(c?.[1].foldMap),y=(0,m.a)(c?.[0].foldMap)&&!b,x={axisId:`${u}-primary-axis`,zeroAlign:!0},C=`${u}-secondary-axis`,v=[`${u}-primary-series`,`${u}-secondary-series`],A=g?v:v[1];if(i.axes||(i.axes=[]),!f)return i.axes=[...i.axes,{visible:!0,id:C,seriesId:A,type:"linear",orient:"right",sync:x}],i;let{visible:R=!0,label:I,tick:k,title:S,grid:_,line:M,zero:z,nice:B,inverse:F,max:P,min:L,log:T,logBase:W=10}=f,X={visible:!b&&R,id:C,seriesId:A,sync:x,type:T?"log":"linear",base:W,orient:"right",nice:B,zero:!T&&z,inverse:F,max:P,min:L,label:{visible:I?.visible,formatMethod:e=>q(e,r),style:{fill:I?.labelColor,angle:I?.labelAngle,fontSize:I?.labelFontSize,fontWeight:I?.labelFontWeight}},title:{visible:S?.visible,text:S?.titleText,style:{fill:S?.titleColor,fontSize:S?.titleFontSize,fontWeight:S?.titleFontWeight}},tick:{visible:k?.visible,tickSize:k?.tickSize,inside:k?.tickInside,style:{stroke:k?.tickColor}},grid:{visible:!!y||_?.visible,style:{lineWidth:_?.gridWidth,stroke:_?.gridColor}},domainLine:{visible:M?.visible,style:{lineWidth:M?.lineWidth,stroke:M?.lineColor}},innerOffset:{top:7}};return i.axes=[...i.axes,X],i},tv=[lJ([((...e)=>{let l={type:"common",padding:0,region:[{clip:!0}]},i=(e,l)=>{let{advancedVSeed:i}=e,t=i.dataset[l];return{...e,advancedVSeed:{...i,dataset:t}}};return(t,n)=>(l.series=e.map((e,l)=>R(e,i(n,l),{})),l)})([td,tc,tf,tg,tb,lm,ii(it),lA(lM),lz,lF(lP),iE(iD)],[tu,th,tp,tm,ty,lm,ii(it),lA(lM),lz,lF(lP),iE(iD)]),lb,tx,tC,e5(lc,(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n,chartType:o}=t,{unfoldInfo:r,id:a}=n[0],s=t.config[o];if(!s||!s.color)return i;let{color:d}=s,{colorScheme:u,linearColorScheme:c}=d;return i.color={type:"linear",range:c||u||[],domain:[{dataId:`${a}-primary-dataset`,fields:[r.encodingColor]},{dataId:`${a}-secondary-dataset`,fields:[r.encodingColor]}]},i}),e5(lC,lv),lp,il,lO,lw,lV,lE],[lD,lH,lN,lK,lY([((...e)=>{let l={type:"common",padding:0,region:[{clip:!0}]};return(i,t)=>(l.series=e.map(e=>R(e,t,{})),l)})([td,tc,tf,tg,tb,lm,ii(it),lA(lM),lz,lF(lP),iE(iD)],[tu,th,tp,tm,ty,lm,ii(it),lA(lM),lz,lF(lP),iE(iD)]),lb,tx,tC,e5(lc,lf),lp,il,lO,lw,lV,lE]),lG,lj,e5(lU,lq)])],tA=()=>{L._advancedPipelineMap.dualAxis=ts,L._specPipelineMap.dualAxis=tv},tR=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return tk(i,n),t_(t,n),{...e,encoding:n}},tI=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?tS(i,r):tk(i,r),o?tM(t,r):t_(t,r),{...e,encoding:r}},tk=(e,l)=>{let i=(0,s.a)(e.map(e=>e.id));l.color=i.slice(0),l.detail=i.slice(0),l.tooltip=i.filter(e=>e!==eu),l.label=[],l.row=[],l.column=[]},tS=(e,l)=>{l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding).map(e=>e.id)),0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},t_=(e,l)=>{l.angle=(0,s.a)(e.filter(e=>"angle"===e.encoding||!e.encoding).map(e=>e.id))},tM=(e,l)=>{l.angle=(0,s.a)(e.filter(e=>"angle"===e.encoding||!e.encoding).map(e=>e.id));let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=i);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},tz=[eP,eL,eT,eW,eX([tR,eJ],[tI,eJ]),e1([e6],[e9]),lr,E,ls],tB=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o,foldInfo:r}=n[0];return i.type="pie",i.outerRadius=.8,i.innerRadius=0,i.valueField=r.measureValue,i.categoryField=o.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},tF=e=>(l,i)=>{let t=e(l,i),{advancedVSeed:n}=i,{datasetReshapeInfo:o}=n,{unfoldInfo:r}=o[0];return e7(n)&&t?.pie?.style&&(t.pie.style.fill={field:r.encodingColor,scale:"color"}),t},tP=(e,l)=>{let{advancedVSeed:i}=l,{dataset:t}=i,n=t.length<=30,o={...e,pie:{style:{}}};return{...o,pie:{style:{stroke:"#ffffff",lineWidth:+!!n},state:{hover:{outerRadius:1.1*o.outerRadius}}}}},tL=[lJ([tB,e5(lc,lf),lp,lg,lm,tF(tP),e5(lC,lv),lL,lT,lO,lw,lV,lE],[lD,lH,lN,lK,lY([tB,e5(lc,lf),lp,lg,lm,tF(tP),lL,lT,lO,lw,lV,lE]),lG,lj,e5(lU,lq)])],tT=()=>{L._advancedPipelineMap.pie=tz,L._specPipelineMap.pie=tL},tW=[eP,eL,eT,eW,eX([tR,eJ],[tI,eJ]),e1([e6],[e9]),lr,E,ls],tX=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{foldInfo:o,unfoldInfo:r}=n[0];return i.type="pie",i.outerRadius=.8,i.innerRadius=.8*i.outerRadius,i.valueField=o.measureValue,i.categoryField=r.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},tZ=[lJ([tX,e5(lc,lf),lp,lg,lm,lL,tF(tP),e5(lC,lv),lT,lO,lw,lV,lE],[lD,lH,lN,lK,lY([tX,e5(lc,lf),lp,lg,lm,lL,tF(tP),lT,lO,lw,lV,lE]),lG,lj,e5(lU,lq)])],tO=()=>{L._advancedPipelineMap.donut=tW,L._specPipelineMap.donut=tZ},tw=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return tE(i,n),tH(t,n),{...e,encoding:n}},tV=e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?tD(i,r):tE(i,r),o?tY(t,r):tH(t,r),{...e,encoding:r}},tE=(e,l)=>{let i=1===e.length&&e.find(e=>e.id===eu),t=(0,s.a)(e.map(e=>e.id));l.angle=t.slice(0,1),l.color=t.slice(+!i),l.detail=t.slice(+!i),l.tooltip=t.filter(e=>e!==eu),l.label=[],l.row=[],l.column=[]},tD=(e,l)=>{l.angle=(0,s.a)(e.filter(e=>"angle"===e.encoding).map(e=>e.id)),0===l.angle.length&&(l.angle=[e[0].id]),l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding).map(e=>e.id)),0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},tH=(e,l)=>{l.radius=(0,s.a)(e.filter(e=>"radius"===e.encoding||!e.encoding).map(e=>e.id))},tY=(e,l)=>{l.radius=(0,s.a)(e.filter(e=>"radius"===e.encoding||!e.encoding).map(e=>e.id));let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=i);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},tN=[eP,eL,eT,eW,eX([tw,eJ],[tV,eJ]),e1([e6],[e9]),lr,E,la,ls],t$=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{dataset:n,datasetReshapeInfo:o}=t,{foldInfo:r,unfoldInfo:a}=o[0];return i.type="rose",i.angleField=a.encodingAngle,i.seriesField=a.encodingColorId,i.valueField=r.measureValue,i.padding=0,i.outerRadius=.9,i.innerRadius=0,n.flat().find(e=>e[r.measureValue]<0)&&(i.innerRadius=.05),i.region=[{clip:!0}],i.animation=!0,i},tK=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{dimensions:n,measures:o}=t;if(!n||!o)return i;let r=0===n.length,a=1===n.length&&1===o.length,s=!(r||a);return i.axes||(i.axes=[]),i.axes.push({orient:"angle",visible:s,zero:!0,nice:!!s,paddingInner:s?[.15,.1]:[0,0],paddingOuter:s?[.075,.1]:[0,0],grid:{visible:s},domainLine:{visible:s},tick:{visible:s}}),i},tG=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{dimensions:n,measures:o}=t;if(!n||!o)return i;let r=0===n.length,a=1===n.length&&1===o.length,s=!(r||a);return i.axes||(i.axes=[]),i.axes.push({orient:"radius",visible:s,zero:!0,nice:!!s,grid:{visible:s},tick:{visible:s},label:{visible:s},domainLine:{visible:s}}),i},tj=e=>(l,i)=>{let t=e(l,i),{advancedVSeed:n}=i,{datasetReshapeInfo:o}=n,{unfoldInfo:r}=o[0];return e7(n)&&t?.rose?.style&&(t.rose.style.fill={field:r.encodingColor,scale:"color"}),t},tU=(e,l)=>{let{advancedVSeed:i}=l,{dataset:t}=i,n=t.length<=30;return{...e,rose:{style:{}},rose:{style:{stroke:"#ffffff",lineWidth:+!!n},state:{hover:{lineWidth:1,fillOpacity:.6}}}}},tq=[lJ([t$,l9,ie,e5(lc,lf),lp,lg,lm,tK,tG,il,tj(tU),e5(lC,lv),lL,lT],[lD,lH,lN,lK,lY([t$,l9,ie,e5(lc,lf),lp,lg,lm,tG,tK,il,tj(tU),lL,lT]),lG,lj,e5(lU,lq)])],tJ=()=>{L._advancedPipelineMap.rose=tN,L._specPipelineMap.rose=tq},tQ=[eP,eL,eT,eW,eX([tw,eJ],[tV,eJ]),e1([e6],[e9]),lr,E,la,ls],t0=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n,dataset:o,dimensions:r}=t,{unfoldInfo:a,foldInfo:s}=n[0],d=r.length>1&&r.every(e=>e.id===r[0].id);return i.type="rose",i.angleField=d?[a.encodingAngle]:[a.encodingAngle,a.encodingDetail],i.valueField=s.measureValue,i.seriesField=a.encodingColorId,i.padding=0,i.outerRadius=.9,i.innerRadius=0,o.flat().find(e=>e[s.measureValue]<0)&&(i.innerRadius=.05),i.rose={style:{stroke:"#ffffff",lineWidth:1},state:{hover:{lineWidth:1,fillOpacity:.6}}},i.region=[{clip:!0}],i.animation=!0,i},t1=[lJ([t0,l9,e5(lc,lf),lp,lg,lm,tG,tK,tj(tU),e5(lC,lv),lL,lT,il,lO,lw,lV,io],[lD,lH,lN,lK,lY([t0,l9,e5(lc,lf),lp,lg,lm,tG,tK,il,tj(tU),lL,lT,lO,lw,lV,io]),lG,lj,e5(lU,lq)])],t2=()=>{L._advancedPipelineMap.roseParallel=tQ,L._specPipelineMap.roseParallel=t1},t4=(e,l)=>{let i=(0,s.a)(e.map(e=>e.id));l.angle=i.slice(0,1),l.color=i.slice(1),l.tooltip=i.filter(e=>e!==eu),l.detail=[],l.label=[],l.row=[],l.column=[]},t3=(e,l)=>{l.angle=(0,s.a)(e.filter(e=>"angle"===e.encoding).map(e=>e.id)),0===l.angle.length&&(l.angle=[e[0].id]),l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=[],0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},t5=(e,l)=>{l.radius=(0,s.a)(e.filter(e=>"radius"===e.encoding||!e.encoding).map(e=>e.id))},t7=(e,l)=>{l.radius=(0,s.a)(e.filter(e=>"radius"===e.encoding||!e.encoding).map(e=>e.id));let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=i);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},t8=[eP,eL,eT,eW,eX([e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return t4(i,n),t5(t,n),{...e,encoding:n}},eJ],[e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?t3(i,r):t4(i,r),o?t7(t,r):t5(t,r),{...e,encoding:r}},eJ]),e1([e6],[e9]),li,lr,E,la,ls],t6=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o,foldInfo:r}=n[0];return i.type="radar",i.angleField=o.encodingAngle,i.radiusField=r.measureValue,i.seriesField=e7(t)?o.encodingDetail:o.encodingColorId,i.padding=0,i.region=[{clip:!0}],i.animation=!0,i},t9=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{dimensions:n,measures:o}=t;return n&&o&&(i.axes||(i.axes=[]),i.axes.push({orient:"angle",visible:!0,zero:!0,nice:!0,grid:{visible:!0},domainLine:{visible:!0},tick:{visible:!0}})),i},ne=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{dimensions:n,measures:o}=t;return n&&o&&(i.axes||(i.axes=[]),i.axes.push({orient:"radius",visible:!0,zero:!0,nice:!0,grid:{visible:!0},tick:{visible:!0},label:{visible:!0},domainLine:{visible:!0}})),i},nl=[lJ([t6,e5(lc,lf),lp,lg,lm,t9,ne,lL,lT,e5(lC,lv),lx,lA(lM),lz,lF(lP),iE(iD)],[lD,lH,lN,lK,lY([t6,e5(lc,lf),lp,lg,lm,t9,ne,lL,lT,lx,lA(lM),lz,lF(lP),iE(iD)]),lG,lj,e5(lU,lq)])],ni=()=>{L._advancedPipelineMap.radar=t8,L._specPipelineMap.radar=nl},nt=(e,l)=>{let i=(0,s.a)(e.map(e=>e.id));l.color=i.slice(0),l.detail=i.slice(0),l.tooltip=i.filter(e=>e!==eu),l.label=[],l.row=[],l.column=[]},nn=(e,l)=>{l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding).map(e=>e.id)),0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},no=(e,l)=>{l.size=(0,s.a)(e.filter(e=>"size"===e.encoding||!e.encoding).map(e=>e.id))},nr=(e,l)=>{l.size=(0,s.a)(e.filter(e=>"size"===e.encoding||!e.encoding).map(e=>e.id));let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=[i[0]]);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},na=[eP,eL,eT,eW,eX([e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return nt(i,n),no(t,n),{...e,encoding:n}},eJ],[e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?nn(i,r):nt(i,r),o?nr(t,r):no(t,r),{...e,encoding:r}},eJ]),e1([e6],[e9]),lr,E,ls],ns=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{foldInfo:o,unfoldInfo:r}=n[0];return i.type="funnel",i.valueField=o.measureValue,i.categoryField=r.encodingColorId,i.padding=0,i.isTransform=!0,i.shape="rect",i.maxSize="75%",i.minSize="10%",i.region=[{clip:!0}],i.transformLabel={visible:!0},i.animation=!0,i},nd=e=>(l,i)=>{let t=e(l,i),{advancedVSeed:n}=i,{datasetReshapeInfo:o}=n,{unfoldInfo:r}=o[0];return e7(n)&&t?.funnel?.style&&(t.funnel.style.fill={field:r.encodingColor,scale:"color"}),t},nu=e=>({...e,funnel:{style:{}},funnel:{style:{cornerRadius:4},state:{hover:{fillOpacity:.6}}}}),nc=[lJ([ns,lp,lg,e5(lc,lf),lL,e5(lC,lv),nd(nu),lT,lO,lw,lV,lE],[lD,lH,lN,lK,lY([ns,lp,lg,e5(lc,lf),lL,lT,nd(nu),lO,lw,lV,lE]),lG,lj,e5(lU,lq)])],nh=()=>{L._advancedPipelineMap.funnel=na,L._specPipelineMap.funnel=nc},nf=(e,l)=>{let i=1===e.length&&e.find(e=>e.id===eu),t=(0,s.a)(e.map(e=>e.id));l.x=t.slice(0,1),l.y=t.slice(+!i),l.color=t.slice(+!i),l.detail=t.slice(+!i),l.tooltip=t.filter(e=>e!==eu),l.label=[],l.row=[],l.column=[]},np=(e,l)=>{l.x=(0,s.a)(e.filter(e=>"xAxis"===e.encoding).map(e=>e.id)),0===l.x.length&&(l.x=[e[0].id]),l.y=(0,s.a)(e.filter(e=>"yAxis"===e.encoding).map(e=>e.id)),0===l.y.length&&(e.length>1?l.y=e.slice(1).map(e=>e.id):l.y=e.slice(0).map(e=>e.id)),l.color=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id)),0===l.color.length&&(l.color=[eu]),l.detail=(0,s.a)(e.filter(e=>"detail"===e.encoding).map(e=>e.id)),0===l.detail.length&&(l.detail=[eu]),l.tooltip=(0,s.a)(e.map(e=>e.id)),l.tooltip=l.tooltip.filter(e=>e!==eu)},ng=(e,l)=>{let i=(0,s.a)(e.filter(e=>"color"===e.encoding||!e.encoding).map(e=>e.id));i.length>0&&(l.color=[i[0]])},nm=(e,l)=>{let i=(0,s.a)(e.filter(e=>"color"===e.encoding).map(e=>e.id));i.length>0&&(l.color=[i[0]]);let t=(0,s.a)(e.filter(e=>"tooltip"===e.encoding).map(e=>e.id));l.tooltip=(0,s.a)([...l.tooltip||[],...t])},nb=[eP,eL,eT,eW,eX([e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n={};return nf(i,n),ng(t,n),{...e,encoding:n}},eJ],[e=>{let{measures:l=[],dimensions:i=[]}=e,t=w(l),n=i.some(e=>e.encoding),o=t.some(e=>e.encoding),r={};return n?np(i,r):nf(i,r),o?nm(t,r):ng(t,r),{...e,encoding:r}},eJ]),e1([e6],[e9]),le,lr,E,la,ls],ny=e=>{let l={...e};return l.label?l.label.smartInvert=!0:l.label={smartInvert:!0},l},nx=e=>(l,i)=>{let t=e(l,i),{advancedVSeed:n}=i,{datasetReshapeInfo:o}=n,{unfoldInfo:r}=o[0];return e7(n)&&t?.cell?.style&&(t.cell.style.fill={field:r.encodingColor,scale:"color"}),t},nC=e=>({...e,cell:{style:{}},cell:{style:{shape:"rect",stroke:"#ffffff",lineWidth:1}}}),nv=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{measures:n,datasetReshapeInfo:o,chartType:r,locale:a,dimensions:s,encoding:d}=t,{tooltip:u={enable:!0}}=t.config[r],{enable:c}=u,{foldInfo:h}=o[0];return i.tooltip={visible:c,mark:{title:{visible:!1},content:nA(d.tooltip||[],s,n,a,h)},dimension:{visible:!1}},i},nA=(e,l,i,t,n)=>{let o=l.filter(l=>e.includes(l.id)),r=i.filter(l=>e.includes(l.id)),a=o.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:l=>e.alias||e.id?e.alias||e.id:l&&l[e.id],value:l=>l&&l[e.id]})),s=r.map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:e.alias||e.id,value:l=>{if(!l)return"";let n=e.id;if(!l||!l[er]||!l[er])return"";let o=l[er][n],r=Z(i,n);if(!r)return String(o);let{format:a={},autoFormat:s=!0}=r;return(0,m.a)(a)?s?q(o,t):String(o):U(a)(o)}}));return[...a,...[n].map(e=>({visible:!0,hasShape:!0,shapeType:"rectRound",key:l=>{let{measureId:i,foldMap:t}=e,n=l[i];return t[n]||n},value:l=>{let{measureId:n,measureValue:o}=e;if(!l)return"";let r=l[o],a=Z(i,l[n]);if(!a)return String(r);let{format:s={},autoFormat:d=!0}=a;return(0,m.a)(s)?d?q(r,t):String(r):U(s)(r)}})),...s]},nR=(e,l)=>{let i={...e},{advancedVSeed:t}=l,{datasetReshapeInfo:n}=t,{unfoldInfo:o,foldInfo:r}=n[0];return i.type="heatmap",i.direction="vertical",i.xField=o.encodingX,i.yField=o.encodingY,i.seriesField=o.encodingColorId,i.valueField=r.measureValue,i.padding=0,i.axes=[{type:"band",orient:"left",bandPadding:0},{type:"band",orient:"bottom",bandPadding:0}],i.region=[{clip:!0}],i.animation=!0,i},nI=[lJ([nR,lp,lg,e5(lc,lf),lL,ny,e5(lC,lv),nx(nC),nv,lO,lw,lV,lE],[lD,lH,lN,lK,lY([nR,lp,lg,e5(lc,lf),lL,ny,lC,nv,nx(nC),lO,lw,lV,lE]),lG,lj,e5(lU,lq)])],nk=()=>{L._advancedPipelineMap.heatmap=nb,L._specPipelineMap.heatmap=nI},nS=()=>{let e={nice:!0,zero:!0,inverse:!1,label:{visible:!0,labelAngle:0,labelColor:"#797B85",labelFontSize:12,labelFontWeight:400},title:{visible:!1,titleText:"",titleColor:"#646A73",titleFontSize:12,titleFontWeight:400},grid:{visible:!0,gridColor:"#36415926",gridWidth:.5},tick:{visible:!1,tickInside:!1,tickSize:4,tickColor:"#3641594d"},line:{visible:!1,lineColor:"#3641594d",lineWidth:1}},l={labelAutoHide:!0,labelAutoHideGap:4,labelAutoLimit:!0,labelAutoLimitLength:80,labelAutoRotate:!1,labelAutoRotateAngleRange:[0,-45,-90],label:{visible:!0,labelAngle:0,labelColor:"#797B85",labelFontSize:12,labelFontWeight:400},title:{visible:!1,titleText:"",titleColor:"#646A73",titleFontSize:12,titleFontWeight:400},grid:{visible:!1,gridColor:"#36415926",gridWidth:.5},tick:{visible:!1,tickInside:!1,tickSize:4,tickColor:"#3641594d"},line:{visible:!0,lineColor:"#3641594d",lineWidth:1}},i={...l,labelAutoHide:!1,labelAutoHideGap:1,labelAutoLimit:!1,labelAutoLimitLength:void 0,labelAutoRotate:!1,labelAutoRotateAngleRange:[0,-45,-90]},t={visible:!0,labelVisible:!0,lineColor:"#3641594d",labelColor:"#ffffff",labelBackgroundColor:"#364159"},n={visible:!0,labelVisible:!0,rectColor:"#3641594d",labelColor:"#ffffff",labelBackgroundColor:"#364159"},o={backgroundColor:"transparent",color:{linearColorScheme:["#C2CEFF","#5766EC"],colorScheme:["#8D72F6","#5766EC","#66A3FE","#51D5E6","#4EC0B3","#F9DF90","#F9AD71","#ED8888","#E9A0C3","#D77DD3"]},label:{enable:!0},tooltip:{enable:!0},legend:{enable:!0,border:!0,maxSize:1,shapeType:"rectRound",position:"rt",labelFontColor:"#646A73",labelFontSize:12,labelFontWeight:400}},r={borderColor:"#e3e5eb",bodyFontSize:12,bodyFontColor:"#141414",bodyBackgroundColor:"transparent",headerFontSize:12,headerFontColor:"#21252c",headerBackgroundColor:"#f6f7f9",hoverBodyBackgroundColor:"#bedaff",hoverBodyInlineBackgroundColor:"#bedaff33",hoverHeaderBackgroundColor:"#D9DDE4",hoverHeaderInlineBackgroundColor:"#D9DDE455",selectedBorderColor:"#4080ff",selectedBackgroundColor:"#bedaff33",backgroundColor:"transparent"};return{config:{table:r,pivotTable:r,line:{...o,xAxis:l,yAxis:e,crosshairLine:t},column:{...o,xAxis:l,yAxis:e,crosshairRect:n,stackCornerRadius:[4,4,0,0]},columnParallel:{...o,xAxis:l,yAxis:e,crosshairRect:n,stackCornerRadius:[4,4,0,0]},columnPercent:{...o,xAxis:l,yAxis:e,crosshairRect:n,stackCornerRadius:[4,4,0,0]},bar:{...o,xAxis:e,yAxis:i,crosshairRect:n,stackCornerRadius:[0,4,4,0]},barParallel:{...o,xAxis:e,yAxis:i,crosshairRect:n,stackCornerRadius:[0,4,4,0]},barPercent:{...o,xAxis:e,yAxis:i,crosshairRect:n,stackCornerRadius:[0,4,4,0]},area:{...o,xAxis:l,yAxis:e,crosshairLine:t},areaPercent:{...o,xAxis:l,yAxis:e,crosshairLine:t},scatter:{...o,xAxis:{...e,line:{...e.line,visible:!0}},yAxis:{...e,line:{...e.line,visible:!0}},crosshairLine:t},dualAxis:{...o,xAxis:l,primaryYAxis:e,secondaryYAxis:{...e,grid:{visible:!1}},dualChartType:{primary:"column",secondary:"line"},crosshairRect:n},pie:{...o},donut:{...o},radar:{...o},rose:{...o},roseParallel:{...o},funnel:{...o},heatmap:{...o}}}},n_=()=>{let e={nice:!0,zero:!0,label:{visible:!0,labelAngle:0,labelColor:"#E2E3E6",labelFontSize:12,labelFontWeight:400},title:{visible:!1,titleText:"",titleColor:"#FDFDFD",titleFontSize:12,titleFontWeight:400},grid:{visible:!0,gridColor:"#404349",gridWidth:.5},tick:{visible:!1,tickInside:!1,tickSize:4,tickColor:"#4B4F54"},line:{visible:!1,lineColor:"#4B4F54",lineWidth:1}},l={labelAutoHide:!0,labelAutoHideGap:4,labelAutoLimit:!0,labelAutoLimitLength:80,labelAutoRotate:!1,labelAutoRotateAngleRange:[0,-45,-90],label:{visible:!0,labelAngle:0,labelColor:"#E2E3E6",labelFontSize:12,labelFontWeight:400},title:{visible:!1,titleText:"",titleColor:"#FDFDFD",titleFontSize:12,titleFontWeight:400},grid:{visible:!1,gridColor:"#404349",gridWidth:.5},tick:{visible:!1,tickInside:!1,tickSize:4,tickColor:"#4B4F54"},line:{visible:!0,lineColor:"#4B4F54",lineWidth:1}},i={...l,labelAutoHide:!1,labelAutoHideGap:1,labelAutoLimit:!1,labelAutoLimitLength:void 0,labelAutoRotate:!1,labelAutoRotateAngleRange:[0,-45,-90]},t={visible:!0,labelVisible:!0,lineColor:"#E2E3E6",labelColor:"#4B4F54",labelBackgroundColor:"#ffffff"},n={visible:!0,labelVisible:!0,lineColor:"#E2E3E6",labelColor:"#4B4F54",labelBackgroundColor:"#ffffff"},o={backgroundColor:"transparent",color:{linearColorScheme:["#A0CEFF","#2E62F1"],colorScheme:["#2E62F1","#4DC36A","#FF8406","#FFCC00","#4F44CF","#5AC8FA","#003A8C","#B08AE2","#FF6341","#98DD62"]},label:{enable:!0},tooltip:{enable:!0},legend:{enable:!0,border:!0,maxSize:1,position:"rt",shapeType:"rectRound",labelFontColor:"#FDFDFD",labelFontSize:12,labelFontWeight:400}},r={borderColor:"#4b4e53",bodyFontSize:12,bodyFontColor:"#fdfdfd",bodyBackgroundColor:"transparent",headerFontSize:12,headerFontColor:"#fdfdfd",headerBackgroundColor:"#36393e",hoverBodyBackgroundColor:"#4284ff66",hoverBodyInlineBackgroundColor:"#4284ff10",hoverHeaderBackgroundColor:"#6f7984cc",hoverHeaderInlineBackgroundColor:"#4b4f54",selectedBorderColor:"#3073f2",selectedBackgroundColor:"#4284ff33"};return{config:{table:r,pivotTable:r,line:{...o,xAxis:l,yAxis:e,crosshairLine:t},column:{...o,xAxis:l,yAxis:e,crosshairRect:n,stackCornerRadius:[4,4,0,0]},columnParallel:{...o,xAxis:l,yAxis:e,crosshairRect:n,stackCornerRadius:[4,4,0,0]},columnPercent:{...o,xAxis:l,yAxis:e,crosshairRect:n,stackCornerRadius:[4,4,0,0]},bar:{...o,xAxis:e,yAxis:i,crosshairRect:n,stackCornerRadius:[0,4,4,0]},barParallel:{...o,xAxis:e,yAxis:i,crosshairRect:n,stackCornerRadius:[0,4,4,0]},barPercent:{...o,xAxis:e,yAxis:i,crosshairRect:n,stackCornerRadius:[0,4,4,0]},area:{...o,xAxis:l,yAxis:e,crosshairLine:t},areaPercent:{...o,xAxis:l,yAxis:e,crosshairLine:t},scatter:{...o,xAxis:{...e,line:{...e.line,visible:!0}},yAxis:{...e,line:{...e.line,visible:!0}},crosshairLine:t},dualAxis:{...o,xAxis:l,primaryYAxis:e,secondaryYAxis:{...e,grid:{visible:!1}},dualChartType:{primary:"column",secondary:"line"},crosshairRect:n},pie:{...o},donut:{...o},radar:{...o},rose:{...o},roseParallel:{...o},funnel:{...o},heatmap:{...o}}}},nM=(e,l)=>{let i="function"==typeof l?l({lightTheme:nS(),darkTheme:n_()}):l;L._themeMap[e]=i},nz=()=>{nM("light",nS())},nB=()=>{nM("dark",n_())},nF=()=>{eo(),eF(),l0(),ia(),ic(),im(),iF(),iW(),iO(),iY(),iK(),i9(),tA(),tT(),tO(),tJ(),t2(),ni(),nh(),nk(),nz(),nB()},nP=(e,l)=>{L._customAdvancedPipe[e]=l},nL=(e,l)=>{L._customSpecPipe[e]=l},nT=(e=[])=>{if(!e)return[];let l=[];return X(e,e=>("children"in e||l.push(e),!1)),l},nW=A.Km(["table","pivotTable","line","column","columnPercent","columnParallel","bar","barPercent","barParallel","area","areaPercent","scatter","dualAxis","rose","roseParallel","pie","donut","radar","funnel","heatmap"]),nX=A.Ry({primary:A.Km(["line","column","columnParallel","area","scatter"]).default("column"),secondary:A.Km(["line","column","columnParallel","area","scatter"]).default("line")}),nZ=A.IM(A.Z_().or(A.Rx()),A.Yj()),nO=A.IX(nZ),nw=A.Ry({id:A.Z_(),alias:A.Z_().optional(),encoding:A.Km(["xAxis","yAxis","angle","color","detail","tooltip","label","row","column"]).optional()}),nV=A.Ry({id:A.Z_(),alias:A.Z_().optional(),get children(){return A.IX(nV.or(nw)).optional()}}),nE=A.IX(nw),nD=A.IX(nV.or(nw)),nH=A.Ry({type:A.Km(["number","percent","permille","scientific"]).default("number").optional(),ratio:A.Rx().default(1).optional(),symbol:A.Z_().default("").optional(),thousandSeparator:A.O7().default(!1).optional(),prefix:A.Z_().default("").optional(),suffix:A.Z_().default("").optional(),fractionDigits:A.Rx().default(2).optional(),significantDigits:A.Rx().default(0).optional(),roundingPriority:A.Km(["morePrecision","lessPrecision"]).default("morePrecision").optional(),roundingMode:A.Km(["floor","ceil","halfEven","expand","trunc","halfFloor","halfCeil","halfExpand","halfTrunc"]).default("halfCeil").optional()}).optional(),nY=A.Ry({id:A.Z_(),alias:A.Z_().optional(),autoFormat:A.O7().default(!0),format:nH.default({}),encoding:A.Km(["primaryYAxis","secondaryYAxis","xAxis","yAxis","angle","radius","size","color","label","tooltip","detail","column"]).optional(),parentId:A.Z_().optional()}),nN=A.Ry({id:A.Z_(),alias:A.Z_().optional(),get children(){return A.IX(nN.or(nY)).optional()}}),n$=A.IX(nY),nK=A.IX(nN.or(nY)),nG=A.Ry({id:A.Z_(),primaryMeasures:A.IX(nY).or(nY).optional(),secondaryMeasures:A.IX(nY).or(nY).optional()}),nj=A.IX(nG),nU=A.Ry({id:A.Z_(),xMeasures:A.IX(nY).or(nY).optional(),yMeasures:A.IX(nY).or(nY).optional()}),nq=A.IX(nU),nJ=A.Ry({foldMap:A.IM(A.Z_(),A.Z_().or(A.S1())),colorRange:A.IX(A.Rx()),measureRange:A.IX(A.Rx()),measureId:A.Z_(),measureName:A.Z_(),measureValue:A.Z_()}),nQ=A.Ry({encodingX:A.Z_(),encodingY:A.Z_(),encodingColor:A.Z_(),encodingColorId:A.Z_(),encodingDetail:A.Z_(),encodingAngle:A.Z_(),colorItems:A.IX(A.Z_()),colorIdMap:A.IM(A.Z_(),A.Z_())}),n0=A.IX(A.Ry({id:A.Z_(),index:A.Rx(),foldInfo:nJ,foldInfoList:A.IX(nJ).nullish(),unfoldInfo:nQ})),n1=A.Ry({x:A.IX(A.Z_()).nullish(),y:A.IX(A.Z_()).nullish(),angle:A.IX(A.Z_()).nullish(),radius:A.IX(A.Z_()).nullish(),detail:A.IX(A.Z_()).nullish(),color:A.IX(A.Z_()).nullish(),size:A.IX(A.Z_()).nullish(),tooltip:A.IX(A.Z_()).nullish(),label:A.IX(A.Z_()).nullish(),row:A.IX(A.Z_()).nullish(),column:A.IX(A.Z_()).nullish(),group:A.IX(A.Z_()).nullish().describe("已弃用, 请使用颜色替代")}),n2=A.Ry({visible:A.O7().default(!0).nullish(),labelAutoHide:A.O7().default(!0).nullish(),labelAutoHideGap:A.Rx().default(0).nullish(),labelAutoRotate:A.O7().default(!0).nullish(),labelAutoRotateAngleRange:A.IX(A.Rx()).default([0,-45,-90]).nullish(),labelAutoLimit:A.O7().default(!0).nullish(),labelAutoLimitLength:A.Rx().default(100).nullish(),label:A.Ry({visible:A.O7().default(!0).nullish(),labelColor:A.Z_().default("#797B85").nullish(),labelFontSize:A.Rx().default(12).nullish(),labelFontWeight:A.Rx().default(400).nullish(),labelAngle:A.Rx().default(0).nullish()}).nullish(),line:A.Ry({visible:A.O7().default(!0).nullish(),lineColor:A.Z_().default("rgba(54, 65, 89, 0.30)").nullish(),lineWidth:A.Rx().default(1).nullish()}).nullish(),tick:A.Ry({visible:A.O7().default(!0).nullish(),tickInside:A.O7().default(!1).nullish(),tickColor:A.Z_().default("rgba(54, 65, 89, 0.30)").nullish(),tickSize:A.Rx().default(4).nullish()}).nullish(),title:A.Ry({visible:A.O7().default(!1).nullish(),titleText:A.Z_().default("").nullish(),titleColor:A.Z_().default("#646A73").nullish(),titleFontSize:A.Rx().default(12).nullish(),titleFontWeight:A.Rx().default(400).nullish()}).nullish(),grid:A.Ry({visible:A.O7().default(!1).nullish(),gridColor:A.Z_().default("rgba(54, 65, 89, 0.15)").nullish(),gridWidth:A.Rx().default(.5).nullish()}).nullish()}),n4=n2,n3=A.Ry({visible:A.O7().default(!0).nullish(),min:A.Rx().nullish(),max:A.Rx().nullish(),nice:A.O7().default(!0).nullish(),zero:A.O7().default(!0).nullish(),log:A.O7().default(!1).nullish(),logBase:A.Rx().default(10).nullish(),inverse:A.O7().default(!1).nullish(),label:A.Ry({visible:A.O7().default(!0).nullish(),labelColor:A.Z_().default("#797B85").nullish(),labelFontSize:A.Rx().default(12).nullish(),labelFontWeight:A.Rx().default(400).nullish(),labelAngle:A.Rx().default(0).nullish()}).nullish(),line:A.Ry({visible:A.O7().default(!0).nullish(),lineColor:A.Z_().default("rgba(54, 65, 89, 0.30)").nullish(),lineWidth:A.Rx().default(1).nullish()}).nullish(),tick:A.Ry({visible:A.O7().default(!0).nullish(),tickInside:A.O7().default(!1).nullish(),tickColor:A.Z_().default("rgba(54, 65, 89, 0.30)").nullish(),tickSize:A.Rx().default(4).nullish()}).nullish(),title:A.Ry({visible:A.O7().default(!1).nullish(),titleText:A.Z_().default("").nullish(),titleColor:A.Z_().default("#646A73").nullish(),titleFontSize:A.Rx().default(12).nullish(),titleFontWeight:A.Rx().default(400).nullish()}).nullish(),grid:A.Ry({visible:A.O7().default(!1).nullish(),gridColor:A.Z_().default("rgba(54, 65, 89, 0.15)").nullish(),gridWidth:A.Rx().default(.5).nullish()}).nullish()}),n5=n3,n7=A.Ry({visible:A.O7().nullish(),lineColor:A.Z_().nullish(),labelColor:A.Z_().nullish(),labelVisible:A.O7().nullish(),labelBackgroundColor:A.Z_().nullish()}),n8=A.Ry({visible:A.O7().nullish(),rectColor:A.Z_().nullish(),labelColor:A.Z_().nullish(),labelVisible:A.O7().nullish(),labelBackgroundColor:A.Z_().nullish()}),n6=A.Rx().or(A.IX(A.Rx())).default([3,3,0,0]),n9=A.Z_().default("transparent").nullish(),oe=A.Ry({colorScheme:A.IX(A.Z_()).nullish(),linearColorScheme:A.IX(A.Z_()).nullish(),colorMapping:A.IM(A.Z_(),A.Z_()).nullish()}),ol=A.Ry({linearColorScheme:A.IX(A.Z_()).nullish()}),oi=A.Ry({enable:A.O7().default(!0).nullish()}),ot=A.Ry({enable:A.O7().default(!0).nullish(),border:A.O7().default(!0).nullish(),maxSize:A.Rx().default(1).nullish(),shapeType:A.Km(["circle","cross","diamond","square","arrow","arrow2Left","arrow2Right","wedge","thinTriangle","triangle","triangleUp","triangleDown","triangleRight","triangleLeft","stroke","star","wye","rect","arrowLeft","arrowRight","rectRound","roundLine"]).default("rectRound").nullish(),position:A.Km(["left","leftTop","leftBottom","lt","lb","top","topLeft","topRight","tl","tr","right","rightTop","rightBottom","rt","rb","bottom","bottomLeft","bottomRight","bl","br"]).default("bottom").nullish(),labelFontSize:A.Rx().default(12).nullish(),labelFontColor:A.Z_().default("#fff").nullish(),labelFontWeight:A.Rx().or(A.Z_()).default(400).nullish()}),on=A.Ry({position:A.Km(["left","leftTop","leftBottom","lt","lb","top","topLeft","topRight","tl","tr","right","rightTop","rightBottom","rt","rb","bottom","bottomLeft","bottomRight","bl","br"]).default("bottom").nullish(),enable:A.O7().default(!0).nullish()}),oo=A.Ry({enable:A.O7().default(!0).nullish()}),or=A.Ry({backgroundColor:n9.nullish(),borderColor:A.Z_().nullish(),bodyFontSize:A.Rx().nullish(),bodyFontColor:A.Z_().nullish(),bodyBackgroundColor:A.Z_().nullish(),hoverBodyBackgroundColor:A.Z_().nullish(),hoverBodyInlineBackgroundColor:A.Z_().nullish(),headerFontSize:A.Rx().nullish(),headerFontColor:A.Z_().nullish(),headerBackgroundColor:A.Z_().nullish(),hoverHeaderBackgroundColor:A.Z_().nullish(),hoverHeaderInlineBackgroundColor:A.Z_().nullish(),selectedBorderColor:A.Z_().nullish(),selectedBackgroundColor:A.Z_().nullish()}),oa=or,os=A.Ry({backgroundColor:n9.nullish(),label:oi.nullish(),color:oe.nullish(),tooltip:oo.nullish(),legend:ot.nullish(),xAxis:n2.nullish(),yAxis:n5.nullish(),crosshairLine:n7.nullish()}),od=A.Ry({backgroundColor:n9.nullish(),label:oi.nullish(),color:oe.nullish(),tooltip:oo.nullish(),legend:ot.nullish(),xAxis:n2.nullish(),yAxis:n5.nullish(),crosshairRect:n8.nullish(),stackCornerRadius:n6.nullish()}),ou=od,oc=od,oh=A.Ry({backgroundColor:n9.nullish(),label:oi.nullish(),color:oe.nullish(),tooltip:oo.nullish(),legend:ot.nullish(),xAxis:n3.nullish(),yAxis:n4.nullish(),crosshairRect:n8.nullish(),stackCornerRadius:n6.nullish()}),of=oh,op=oh,og=A.Ry({backgroundColor:n9.nullish(),label:oi.nullish(),color:oe.nullish(),tooltip:oo.nullish(),legend:ot.nullish(),xAxis:n2.nullish(),yAxis:n5.nullish(),crosshairLine:n7.nullish()}),om=og,ob=A.Ry({backgroundColor:n9.nullish(),label:oi.nullish(),color:oe.nullish(),tooltip:oo.nullish(),legend:ot.nullish(),dualChartType:A.IX(nX).or(nX).nullish(),alignTicks:A.IX(A.O7()).or(A.O7()).nullish(),primaryYAxis:A.IX(n5).or(n5).nullish(),secondaryYAxis:A.IX(n5).or(n5).nullish(),xAxis:n2.nullish(),crosshairRect:n8.nullish()}),oy=A.Ry({backgroundColor:n9.nullish(),label:oi.nullish(),color:oe.nullish(),tooltip:oo.nullish(),legend:ot.nullish(),xAxis:n3.nullish(),yAxis:n5.nullish(),crosshairLine:n7.nullish()}),ox=A.Ry({backgroundColor:n9.nullish(),label:oi.nullish(),color:oe.nullish(),tooltip:oo.nullish(),legend:ot.nullish()}),oC=ox,ov=A.Ry({backgroundColor:n9.nullish(),label:oi.nullish(),color:oe.nullish(),tooltip:oo.nullish(),legend:ot.nullish()}),oA=ov,oR=ov,oI=ov,ok=ov,oS=A.Ry({table:or.nullish(),pivotTable:oa.nullish(),line:os.nullish(),column:od.nullish(),columnParallel:ou.nullish(),columnPercent:oc.nullish(),bar:oh.nullish(),barParallel:of.nullish(),barPercent:op.nullish(),area:og.nullish(),areaPercent:om.nullish(),scatter:oy.nullish(),dualAxis:ob.nullish(),rose:ox.nullish(),roseParallel:oC.nullish(),pie:ov.nullish(),donut:oA.nullish(),radar:oR.nullish(),funnel:oI.nullish(),heatmap:ok.nullish()}),o_=A.Ry({visible:A.O7().default(!0).nullish(),min:A.Rx().nullish(),max:A.Rx().nullish(),nice:A.O7().default(!0).nullish(),zero:A.O7().default(!0).nullish(),inverse:A.O7().default(!1).nullish(),log:A.O7().default(!1).nullish(),logBase:A.Rx().default(10).nullish(),labelAutoHide:A.O7().default(!0).nullish(),labelAutoHideGap:A.Rx().default(4).nullish(),labelAutoRotate:A.O7().default(!0).nullish(),labelAutoRotateAngleRange:A.IX(A.Rx()).default([0,-45,-90]).nullish(),labelAutoLimit:A.O7().default(!0).nullish(),labelAutoLimitLength:A.Rx().default(100).nullish(),label:A.Ry({visible:A.O7().default(!0).nullish(),labelColor:A.Z_().default("#797B85").nullish(),labelFontSize:A.Rx().default(12).nullish(),labelFontWeight:A.Rx().default(400).nullish(),labelAngle:A.Rx().default(0).nullish()}).nullish(),line:A.Ry({visible:A.O7().default(!0).nullish(),lineColor:A.Z_().default("rgba(54, 65, 89, 0.30)").nullish(),lineWidth:A.Rx().default(1).nullish()}).nullish(),tick:A.Ry({visible:A.O7().default(!0).nullish(),tickInside:A.O7().default(!1).nullish(),tickColor:A.Z_().default("rgba(54, 65, 89, 0.30)").nullish(),tickSize:A.Rx().default(4).nullish()}).nullish(),title:A.Ry({visible:A.O7().default(!1).nullish(),titleText:A.Z_().default("").nullish(),titleColor:A.Z_().default("#646A73").nullish(),titleFontSize:A.Rx().default(12).nullish(),titleFontWeight:A.Rx().default(400).nullish()}).nullish(),grid:A.Ry({visible:A.O7().default(!1).nullish(),gridColor:A.Z_().default("rgba(54, 65, 89, 0.15)").nullish(),gridWidth:A.Rx().default(.5).nullish()}).nullish()}),oM=A.Ry({config:oS.nullish()}),oz=A.IM(A.Z_(),oM).nullish(),oB=A.Z_(),oF=A.G0([A.Z_(),A.Rx(),A.Ry({field:A.Z_(),operator:A.Km(["=","==","!=",">","<",">=","<=","between"]).nullish(),op:A.Km(["=","==","!=",">","<",">=","<=","between"]).nullish(),value:A.G0([A.Z_(),A.Rx(),A.IX(A.G0([A.Z_(),A.Rx()]))])}),A.Ry({field:A.Z_(),operator:A.Km(["in","not in"]).nullish(),op:A.Km(["in","not in"]).nullish(),value:A.G0([A.Z_(),A.Rx(),A.IX(A.G0([A.Z_(),A.Rx()]))])})]),oP=A.IX(oF),oL=A.Ry({selector:A.G0([oF,oP]).nullish(),barVisible:A.O7().nullish(),barColor:A.Z_().nullish(),barColorOpacity:A.Rx().nullish(),barBorderColor:A.Z_().nullish(),barBorderWidth:A.Rx().nullish(),barBorderStyle:A.G0([A.i0("solid"),A.i0("dashed"),A.i0("dotted")]).nullish(),barRadius:A.G0([A.Rx(),A.IX(A.Rx())]).nullish()}),oT=A.Ry({selector:A.G0([oF,oP]).nullish(),pointVisible:A.O7().nullish(),pointSize:A.Rx().nullish(),pointColor:A.Z_().nullish(),pointColorOpacity:A.Rx().nullish(),pointBorderColor:A.Z_().nullish(),pointBorderWidth:A.Rx().nullish(),pointBorderStyle:A.G0([A.Km(["solid","dashed","dotted"])]).nullish()}),oW=A.Ry({selector:A.G0([oF,oP]).nullish(),lineVisible:A.O7().nullish(),lineSmooth:A.O7().nullish(),lineColor:A.Z_().nullish(),lineColorOpacity:A.Rx().nullish(),lineWidth:A.Rx().nullish(),lineStyle:A.G0([A.Km(["solid","dashed","dotted"])]).nullish()}),oX=A.Ry({selector:A.G0([oF,oP]).nullish(),areaVisible:A.O7().nullish(),areaColor:A.Z_().nullish(),areaColorOpacity:A.Rx().nullish()}),oZ=A.Ry({barStyle:oL.or(A.IX(oL)).nullish(),pointStyle:oT.or(A.IX(oT)).nullish(),lineStyle:oW.or(A.IX(oW)).nullish(),areaStyle:oX.or(A.IX(oX)).nullish()}),oO=A.Ry({selector:A.G0([oF,oP]),text:A.Z_().or(A.IX(A.Z_())).nullish(),textColor:A.Z_().default("#ffffff").nullish(),textFontSize:A.Rx().default(12).nullish(),textFontWeight:A.Rx().default(400).nullish(),textAlign:A.Km(["left","right","center"]).default("center").nullish(),textBaseline:A.Km(["top","middle","bottom"]).default("middle").nullish(),textBackgroundVisible:A.O7().default(!0).nullish(),textBackgroundColor:A.Z_().default("#212121").nullish(),textBackgroundBorderColor:A.Z_().nullish(),textBackgroundBorderWidth:A.Rx().default(1).nullish(),textBackgroundBorderRadius:A.Rx().default(4).nullish(),textBackgroundPadding:A.Rx().nullish(),offsetY:A.Rx().default(0).nullish(),offsetX:A.Rx().default(0).nullish()}),ow=A.Ry({selector:A.G0([oF,oP]).nullish(),xValue:A.G0([A.Rx(),A.Z_(),A.IX(A.G0([A.Rx(),A.Z_()]))]).nullish(),text:A.Z_().or(A.IX(A.Z_())).nullish(),textPosition:A.Km(["outsideStart","outsideEnd","outsideMiddle","insideStart","insideMiddle","insideEnd"]).default("insideEnd").nullish(),textColor:A.Z_().default("#ffffff").nullish(),textFontSize:A.Rx().default(12).nullish(),textFontWeight:A.Rx().default(400).nullish(),textAlign:A.Km(["left","right","center"]).default("right").nullish(),textBaseline:A.Km(["top","middle","bottom"]).default("top").nullish(),textBackgroundVisible:A.O7().default(!0).nullish(),textBackgroundColor:A.Z_().default("#212121").nullish(),textBackgroundBorderColor:A.Z_().default("#212121").nullish(),textBackgroundBorderRadius:A.Rx().default(4).nullish(),textBackgroundBorderWidth:A.Rx().default(1).nullish(),textBackgroundPadding:A.Rx().default(2).nullish(),lineVisible:A.O7().default(!0).nullish(),lineColor:A.Z_().default("#212121").nullish(),lineWidth:A.Rx().default(1).nullish(),lineStyle:A.G0([A.i0("solid"),A.i0("dashed"),A.i0("dotted")]).default("dashed").nullish()}),oV=A.Ry({selector:A.G0([oF,oP]).nullish(),yValue:A.G0([A.Rx(),A.Z_(),A.IX(A.G0([A.Rx(),A.Z_()]))]).nullish(),text:A.Z_().or(A.IX(A.Z_())).nullish(),textPosition:A.Km(["outsideStart","outsideEnd","outsideMiddle","insideStart","insideMiddle","insideEnd"]).default("insideEnd").nullish(),textColor:A.Z_().default("#ffffff").nullish(),textFontSize:A.Rx().default(12).nullish(),textFontWeight:A.Rx().default(400).nullish(),textAlign:A.Km(["left","right","center"]).default("right").nullish(),textBaseline:A.Km(["top","middle","bottom"]).default("top").nullish(),lineVisible:A.O7().default(!0).nullish(),lineColor:A.Z_().default("#212121").nullish(),lineWidth:A.Rx().default(1).nullish(),lineStyle:A.G0([A.i0("solid"),A.i0("dashed"),A.i0("dotted")]).default("dashed").nullish(),textBackgroundVisible:A.O7().default(!0).nullish(),textBackgroundColor:A.Z_().default("#212121").nullish(),textBackgroundBorderColor:A.Z_().default("#212121").nullish(),textBackgroundBorderRadius:A.Rx().default(4).nullish(),textBackgroundBorderWidth:A.Rx().default(1).nullish(),textBackgroundPadding:A.Rx().default(2).nullish()}),oE=A.Ry({selector:A.G0([oF,oP]),textPosition:A.Km(["top","topRight","topLeft","bottom","bottomLeft","bottomRight","left","right"]).default("top").nullish(),text:A.Z_().or(A.IX(A.Z_())).nullish(),textColor:A.Z_().default("#ffffff").nullish(),textFontSize:A.Rx().default(12).nullish(),textFontWeight:A.Rx().default(400).nullish(),textAlign:A.Km(["left","right","center"]).default("center").nullish(),textBaseline:A.Km(["top","middle","bottom"]).default("top").nullish(),textBackgroundVisible:A.O7().default(!0).nullish(),textBackgroundColor:A.Z_().default("#191d24").nullish(),textBackgroundBorderColor:A.Z_().default("#191d24").nullish(),textBackgroundBorderWidth:A.Rx().default(1).nullish(),textBackgroundBorderRadius:A.Rx().default(4).nullish(),textBackgroundPadding:A.Rx().default(4).nullish(),areaColor:A.Z_().default("#888888").nullish(),areaColorOpacity:A.Rx().default(.15).nullish(),areaBorderColor:A.Z_().default("#888888").nullish(),areaBorderWidth:A.Rx().default(1).nullish(),areaBorderRadius:A.Rx().default(4).nullish(),outerPadding:A.Rx().default(4).nullish()}),oD=A.Ry({annotationPoint:oO.or(A.IX(oO)).nullish(),annotationVerticalLine:ow.or(A.IX(ow)).nullish(),annotationHorizontalLine:oV.or(A.IX(oV)).nullish(),annotationArea:oE.or(A.IX(oE)).nullish()}),oH=A.Ry({order:A.Km(["asc","desc"]).default("asc"),orderBy:A.Z_().nullish(),customOrder:A.IX(A.Yj()).nullish()}),oY=A.Ry({order:A.Km(["asc","desc"]).default("asc"),orderBy:A.Z_().nullish(),customOrder:A.IX(A.Yj()).nullish()}),oN=A.Ry({orderMapping:A.IM(A.Z_(),A.IX(A.Z_())).nullish()}),o$=A.Km(["zh-CN","en-US"]).default("zh-CN"),oK=A.Ry({chartType:A.i0("table"),dataset:nO.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),borderColor:A.Z_().nullish(),bodyFontSize:A.Rx().nullish(),bodyFontColor:A.Z_().nullish(),bodyBackgroundColor:A.Z_().nullish(),hoverBodyBackgroundColor:A.Z_().nullish(),hoverBodyInlineBackgroundColor:A.Z_().nullish(),headerFontSize:A.Rx().nullish(),headerFontColor:A.Z_().nullish(),headerBackgroundColor:A.Z_().nullish(),hoverHeaderBackgroundColor:A.Z_().nullish(),hoverHeaderInlineBackgroundColor:A.Z_().nullish(),selectedBorderColor:A.Z_().nullish(),selectedBackgroundColor:A.Z_().nullish(),theme:oB.nullish(),locale:o$.nullish()}),oG=A.Ry({chartType:A.i0("pivotTable"),dataset:nO.nullish(),dimensions:nE.nullish(),measures:n$.nullish(),backgroundColor:n9.nullish(),borderColor:A.Z_().nullish(),bodyFontSize:A.Rx().nullish(),bodyFontColor:A.Z_().nullish(),bodyBackgroundColor:A.Z_().nullish(),hoverBodyBackgroundColor:A.Z_().nullish(),hoverBodyInlineBackgroundColor:A.Z_().nullish(),headerFontSize:A.Rx().nullish(),headerFontColor:A.Z_().nullish(),headerBackgroundColor:A.Z_().nullish(),hoverHeaderBackgroundColor:A.Z_().nullish(),hoverHeaderInlineBackgroundColor:A.Z_().nullish(),selectedBorderColor:A.Z_().nullish(),selectedBackgroundColor:A.Z_().nullish(),theme:oB.nullish(),locale:o$.nullish()}),oj=A.Ry({chartType:A.i0("line"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n2.nullish(),yAxis:n5.nullish(),crosshairLine:n7.nullish(),sort:oH.nullish(),sortLegend:oY.nullish(),theme:oB.nullish(),pointStyle:A.IX(oT).or(oT).nullish(),lineStyle:A.IX(oW).or(oW).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),oU=A.Ry({chartType:A.i0("column"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n2.nullish(),yAxis:n5.nullish(),crosshairRect:n8.nullish(),stackCornerRadius:n6.nullish(),theme:oB.nullish(),barStyle:A.IX(oL).or(oL).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),oq=A.Ry({chartType:A.i0("columnParallel"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n2.nullish(),yAxis:n5.nullish(),crosshairRect:n8.nullish(),stackCornerRadius:n6.nullish(),theme:oB.nullish(),barStyle:A.IX(oL).or(oL).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),oJ=A.Ry({chartType:A.i0("columnPercent"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n2.nullish(),yAxis:n5.nullish(),crosshairRect:n8.nullish(),stackCornerRadius:n6.nullish(),theme:oB.nullish(),barStyle:A.IX(oL).or(oL).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),oQ=A.Ry({chartType:A.i0("bar"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n3.nullish(),yAxis:n4.nullish(),crosshairRect:n8.nullish(),stackCornerRadius:n6.nullish(),theme:oB.nullish(),barStyle:A.IX(oL).or(oL).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),o0=A.Ry({chartType:A.i0("barParallel"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n3.nullish(),yAxis:n4.nullish(),crosshairRect:n8.nullish(),stackCornerRadius:n6.nullish(),theme:oB.nullish(),barStyle:A.IX(oL).or(oL).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),o1=A.Ry({chartType:A.i0("barPercent"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n3.nullish(),yAxis:n4.nullish(),crosshairRect:n8.nullish(),stackCornerRadius:n6.nullish(),theme:oB.nullish(),barStyle:A.IX(oL).or(oL).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),o2=A.Ry({chartType:A.i0("area"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n2.nullish(),yAxis:n5.nullish(),crosshairLine:n7.nullish(),theme:oB.nullish(),pointStyle:A.IX(oT).or(oT).nullish(),lineStyle:A.IX(oW).or(oW).nullish(),areaStyle:A.IX(oX).or(oX).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),o4=A.Ry({chartType:A.i0("areaPercent"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n2.nullish(),yAxis:n5.nullish(),crosshairLine:n7.nullish(),theme:oB.nullish(),pointStyle:A.IX(oT).or(oT).nullish(),lineStyle:A.IX(oW).or(oW).nullish(),areaStyle:A.IX(oX).or(oX).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),o3=A.Ry({chartType:A.i0("scatter"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),scatterMeasures:nq.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),xAxis:n3.nullish(),yAxis:n5.nullish(),crosshairLine:n7.nullish(),theme:oB.nullish(),pointStyle:A.IX(oT).or(oT).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),o5=A.Ry({chartType:A.i0("dualAxis"),dataset:nO.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),dualMeasures:nj.nullish(),dualChartType:A.IX(nX).or(nX).nullish(),alignTicks:A.IX(A.O7()).or(A.O7()).nullish(),primaryYAxis:A.IX(n5).or(n5).nullish(),secondaryYAxis:A.IX(n5).or(n5).nullish(),xAxis:n2.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),crosshairRect:n8.nullish(),sort:oH.nullish(),sortLegend:oY.nullish(),theme:oB.nullish(),barStyle:A.IX(oL).or(oL).nullish(),pointStyle:A.IX(oT).or(oT).nullish(),lineStyle:A.IX(oW).or(oW).nullish(),areaStyle:A.IX(oX).or(oX).nullish(),annotationPoint:A.IX(oO).or(oO).nullish(),annotationVerticalLine:A.IX(ow).or(ow).nullish(),annotationHorizontalLine:A.IX(oV).or(oV).nullish(),annotationArea:A.IX(oE).or(oE).nullish(),locale:o$.nullish()}),o7=A.Ry({chartType:A.i0("rose"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),theme:oB.nullish(),locale:o$.nullish()}),o8=A.Ry({chartType:A.i0("roseParallel"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),theme:oB.nullish(),locale:o$.nullish()}),o6=A.Ry({chartType:A.i0("pie"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),theme:oB.nullish(),locale:o$.nullish()}),o9=A.Ry({chartType:A.i0("donut"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),theme:oB.nullish(),locale:o$.nullish()}),re=A.Ry({chartType:A.i0("radar"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:ot.nullish(),tooltip:oo.nullish(),theme:oB.nullish(),locale:o$.nullish()}),rl=A.Ry({chartType:A.i0("funnel"),dataset:nO.nullish(),encoding:n1.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:on.nullish(),tooltip:oo.nullish(),theme:oB.nullish(),locale:o$.nullish()}),ri=A.Ry({chartType:A.i0("heatmap"),dataset:nO.nullish(),dimensions:nE.nullish(),measures:nK.nullish(),backgroundColor:n9.nullish(),color:oe.nullish(),label:oi.nullish(),legend:on.nullish(),tooltip:oo.nullish(),theme:oB.nullish(),locale:o$.nullish()}),rt=A.VK("chartType",[oK,oG,oj,oU,oq,oJ,oQ,o0,o1,o2,o4,o3,o5,o6,o9,o7,o8,re,rl,ri]),rn=A.Ry({chartType:nW,dataset:nO,datasetReshapeInfo:n0,dimensions:nD,measures:nK,encoding:n1,config:oS,analysis:oN,theme:oB,markStyle:oZ,customTheme:oM,annotation:oD,locale:o$});var ro="-"}}]);
//# sourceMappingURL=5199.fb5e066d.js.map