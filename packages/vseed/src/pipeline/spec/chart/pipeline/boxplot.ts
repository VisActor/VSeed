import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'
import {
  backgroundColor,
  label,
  tooltipBoxplot,
  color,
  pivotAdapter,
  initPivot,
  datasetPivot,
  pivotIndicators,
  pivotDiscreteLegend,
  pivotGridStyle,
  pivotColumnDimensions,
  pivotRowDimensions,
  annotationPoint,
  annotationVerticalLine,
  annotationHorizontalLine,
  annotationAreaBand,
  stackCornerRadius,
  progressive,
  colorAdapter,
  linearColor,
  colorLegend,
  pivotColorLegend,
  initBoxplot,
  xBand,
  yLinear,
  verticalCrosshairRect,
  datasetBoxplot,
  pivotAxisStyle,
  pivotTitle,
  dimensionLinkage,
  boxPlotStyle,
  colorBoxPlotStyleFill,
  outlierStyle,
  discreteLegend,
} from '../pipes'
import { boxMaxWidth } from '../pipes/barWidth/boxMaxWidth'
import { boxGapInGroup } from '../pipes/barWidth/boxGapInGroup'

const boxplot: VChartSpecPipeline = [
  initBoxplot,
  stackCornerRadius,
  boxMaxWidth,
  boxGapInGroup,
  colorAdapter(color, linearColor),
  backgroundColor,
  datasetBoxplot,
  progressive,
  xBand,
  yLinear,
  label,
  tooltipBoxplot,
  colorAdapter(discreteLegend, colorLegend),
  verticalCrosshairRect,
  colorBoxPlotStyleFill(boxPlotStyle),
  outlierStyle,
  annotationPoint,
  annotationVerticalLine,
  annotationHorizontalLine,
  annotationAreaBand,
]

const pivotBoxplot: PivotChartSpecPipeline = [
  initPivot,
  pivotGridStyle,
  datasetPivot,
  pivotIndicators([
    initBoxplot,
    stackCornerRadius,
    boxMaxWidth,
    boxGapInGroup,
    colorAdapter(color, linearColor),
    backgroundColor,
    datasetBoxplot,
    progressive,
    xBand,
    pivotAxisStyle(yLinear),
    label,
    tooltipBoxplot,
    colorBoxPlotStyleFill(boxPlotStyle),
    outlierStyle,
    verticalCrosshairRect,
    annotationPoint,
    annotationVerticalLine,
    annotationHorizontalLine,
    annotationAreaBand,
  ]),
  pivotRowDimensions,
  pivotColumnDimensions,
  pivotTitle,
  colorAdapter(pivotDiscreteLegend, pivotColorLegend),
  dimensionLinkage,
]

export const boxplotSpecPipeline = [pivotAdapter(boxplot, pivotBoxplot)]
