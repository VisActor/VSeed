---
pageType: doc
---

# 分析功能

## 轴排序 与 图例排序

```tsx direction=vertical
import { useRef, useEffect, useState } from 'react'
import VChart from '@visactor/vchart'
import { ListTable, PivotTable } from '@visactor/vtable'
import { registerAll, VSeed, Builder, isTable, isPivotTable } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)
  const [order, setOrder] = useState('asc')
  const [orderBy, setOrderBy] = useState('date')
  const orderList = ['desc', 'asc']
  const orderByList = ['date', 'profit', 'sales']

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'barParallel',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
      ],
      sort: {
        order,
        orderBy,
      },
      sortLegend: {
        order,
      },
    }
    const builder = Builder.from(vseed)
    const spec = builder.build()
    console.log(builder.advancedVSeed.analysis)
    if (isTable(vseed)) {
      const tableInstance = new ListTable(ref.current, spec)
      return () => tableInstance.release()
    } else if (isPivotTable(vseed)) {
      const tableInstance = new PivotTable(ref.current, spec)
      return () => tableInstance.release()
    } else {
      const vchart = new VChart(spec, { dom: ref.current })
      vchart.renderSync()
      return () => vchart.release()
    }
  }, [orderBy, order])

  return (
    <div style={{ display: 'flex', flexDirection: 'column' }}>
      <div>
        {orderList.map((d) => {
          return (
            <span key={d} style={{ margin: '0 2px 0 0' }}>
              <button
                onClick={() => setOrder(d)}
                style={{ fontSize: 10, padding: '0 2px', border: '1px solid #cccccc' }}
              >
                {d}
              </button>
            </span>
          )
        })}
      </div>
      <div>
        {orderByList.map((d) => {
          return (
            <span key={d} style={{ margin: '0 2px 0 0' }}>
              <button
                onClick={() => setOrderBy(d)}
                style={{ fontSize: 10, padding: '0 2px', border: '1px solid #cccccc' }}
              >
                {d}
              </button>
            </span>
          )
        })}
      </div>
      <div ref={ref} style={{ height: 260, width: '100%' }}></div>
    </div>
  )
}

export default Demo
```
