"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["8039"],{70491:function(e,t,i){e.exports=i.p+"static/assets/duckdb-browser-eh.worker.5a0e3443.js"},85434:function(e,t,i){e.exports=i.p+"static/assets/duckdb-browser-mvp.worker.bc600b4f.js"},59108:function(e,t,i){e.exports=i.p+"static/wasm/dec040427027234f.module.wasm"},80681:function(e,t,i){e.exports=i.p+"static/wasm/30a40a60cab71c41.module.wasm"},86307:function(e,t,i){i.d(t,{Z:()=>tP});var r,n,s,o,a,l={};i.r(l),i.d(l,{BrowserRouter:()=>g.VK,Content:()=>g.VY,DataContext:()=>g.R0,Helmet:()=>g.ql,NoSSR:()=>g.ri,ThemeContext:()=>g.Ni,addLeadingSlash:()=>g.nY,isEqualPath:()=>g.pV,isProduction:()=>g.yv,matchPath:()=>g.LX,matchRoutes:()=>g.fp,normalizeHrefInRuntime:()=>g.AP,normalizeImagePath:()=>g.i6,normalizeRoutePath:()=>g.Tm,normalizeSlash:()=>g.Kw,pathnameToRouteService:()=>g.Ww,removeBase:()=>g.E9,removeTrailingSlash:()=>g.Qj,useDark:()=>g.e7,useI18n:()=>g.QT,useLang:()=>g.Jr,useLocation:()=>g.TH,useNavigate:()=>g.s0,usePageData:()=>g.Vi,useSearchParams:()=>g.lr,useVersion:()=>g.aw,useViewTransition:()=>g.n_,useWindowSize:()=>g.iP,withBase:()=>g.pJ});var d={};i.r(d),i.d(d,{AggregationType:()=>T.E,Aggregator:()=>E.jk,AvgAggregator:()=>E.ky,CountAggregator:()=>E.ZP,CustomAggregator:()=>E.Js,HierarchyState:()=>x.g,HighlightScope:()=>I.p,IconFuncTypeEnum:()=>O.cI,IconPosition:()=>O.q0,InteractionState:()=>I.F,InternalIconName:()=>O.up,MaxAggregator:()=>E.Fn,MinAggregator:()=>E.NF,NoneAggregator:()=>E.ld,Placement:()=>x.u,RecalculateAggregator:()=>E.U4,RecordAggregator:()=>E.hT,SortType:()=>T.F,SumAggregator:()=>E.__,cellStyleKeys:()=>S.n,indicatorSort:()=>E.vg,naturalSort:()=>E.SL,registeredAggregators:()=>E.YJ,sortBy:()=>E.MR,typeSort:()=>E.y4});var u={};i.r(u),i.d(u,{BaseTable:()=>k.D});var c={};i.r(c),i.d(c,{CachedDataSource:()=>D.Z,DataSource:()=>A.o2});var h={};i.r(h),i.d(h,{dateFormat:()=>R,numberFormat:()=>F});var p={};i.r(p),i.d(p,{CustomCellStylePlugin:()=>P.Wg,PluginManager:()=>L.Q});var f={};i.r(f),i.d(f,{Arc:()=>ed,CheckBox:()=>ef.J,Circle:()=>G,Container:()=>Y,Group:()=>eh,GroupElement:()=>H,Icon:()=>et,Image:()=>ei,Line:()=>ep.x,Radio:()=>ey.Y,Rect:()=>en,Tag:()=>ec,Text:()=>eo,percentCalc:()=>ea});var y={};i.r(y),i.d(y,{CUSTOM_CONTAINER_NAME:()=>eL.FH,CUSTOM_MERGE_PRE_NAME:()=>eL.Ki,CustomLayout:()=>f,DataStatistics:()=>h,EventTarget:()=>eW.R,Icon:()=>eR.J,ListTable:()=>M.T,ListTableSimple:()=>z,PIVOT_CHART_EVENT_TYPE:()=>eU.Z,PIVOT_TABLE_EVENT_TYPE:()=>eU.z,PivotChart:()=>Q.z,PivotTable:()=>q.I,PivotTableSimple:()=>$,TABLE_EVENT_TYPE:()=>eM.B,TYPES:()=>d,VArc:()=>eT.NP,VArea:()=>eT.q_,VCheckBox:()=>eC,VCircle:()=>eT.uU,VGlyph:()=>eT.rE,VGroup:()=>eT.qP,VImage:()=>eT.rV,VLine:()=>eT.EG,VPath:()=>eT.VA,VPolygon:()=>eT.sg,VRadio:()=>eB,VRect:()=>eT.bZ,VSymbol:()=>eT.p8,VTag:()=>eD,VText:()=>eT.Jj,clearGlobal:()=>ej,core:()=>u,data:()=>c,getDataCellPath:()=>eS,getIcons:()=>eq,getTargetCell:()=>eV.J$,graphicUtil:()=>N.WN,jsx:()=>eA,pluginsDefinition:()=>p,register:()=>B,registerAnimation:()=>eP.ph,registerAxis:()=>eP.R2,registerButtonCell:()=>W.ah,registerChartCell:()=>W.LQ,registerCheckboxCell:()=>W.yR,registerEmptyTip:()=>eP.Eg,registerImageCell:()=>W.pk,registerLegend:()=>eP.I,registerMenu:()=>eP.FD,registerProgressBarCell:()=>W.m4,registerRadioCell:()=>W.Jy,registerSparkLineCell:()=>W.dB,registerSwitchCell:()=>W.VT,registerTextCell:()=>W.ge,registerTitle:()=>eP._t,registerTooltip:()=>eP.Mh,registerVideoCell:()=>W.au,renderChart:()=>eg.pF,restoreMeasureText:()=>eb.sb,setCustomAlphabetCharSet:()=>eb.fg,textMeasure:()=>eb.QC,themes:()=>V,toBoxArray:()=>eF.JO,updateCell:()=>em.wW,version:()=>ez});var m=i(31549),g=i(62300),b=i(44194),v=i.t(b,2),w=i(17739),_=i(23341),N=i(9207),I=i(83519),S=i(87926),T=i(82526),x=i(23182),O=i(18742),E=i(79653),k=i(12661),A=i(37521),D=i(39012),C=i(87912),B=i(78586),V=i(44229);function F(e){return e=Object.assign({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},e),function(t){if(isNaN(t)||!isFinite(t))return"";let i=function(e,t,i){var r,n;let s=(e+="").split("."),o=s[0],a=s.length>1?i+s[1]:"";return r=o,n=t,(o=r.replace(/\d+/,function(e){return e.replace(/(\d)(?=(\d{3})+$)/g,function(e){return`${e}${n}`})}))+a}((e.scaler*t).toFixed(e.digitsAfterDecimal),e.thousandsSep,e.decimalSep);return`${e.prefix}${i}${e.suffix}`}}function R(e,t,i,r,n){null==i&&(i=!1),null==r&&(r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==n&&(n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);let s=i?"UTC":"",o=function(e){return`0${e}`.substring(0,2)};return function(i){let a=new Date(Date.parse(i[e]));return t.replace(/%(.)/g,function(e,t){switch(t){case"y":return a[`get${s}FullYear`]();case"m":return o(a[`get${s}Month`]()+1);case"n":return r[a[`get${s}Month`]()];case"d":return o(a[`get${s}Date`]());case"w":return n[a[`get${s}Day`]()];case"x":return a[`get${s}Day`]();case"H":return o(a[`get${s}Hours`]());case"M":return o(a[`get${s}Minutes`]());case"S":return o(a[`get${s}Seconds`]());default:return`%${t}`}})}}var L=i(53967),P=i(49207),M=i(62549),U=i(18555),W=i(67228);(0,W.ge)();class z extends U.e{}var q=i(6034),j=i(93741);(0,W.ge)();class $ extends j.Z{}var Q=i(77655),Z=i(65962),J=i(43735);class G extends Z.C{constructor(e){var t,i,r,n,s,o,a,l,d,u;let c=(0,J.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(l=e.marginLeft)?l:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var K=i(18270);class Y extends K.ZA{constructor(e){var t,i,r,n,s,o,a,l,d,u,c,h,p,f;e.direction&&(e.flexDirection=e.direction),e.justifyContent&&("start"===e.justifyContent||"end"===e.justifyContent)&&(e.justifyContent="flex-"+e.justifyContent),e.alignItems&&("start"===e.alignItems||"end"===e.alignItems)&&(e.alignItems="flex-"+e.alignItems),e.alignContent&&("start"===e.alignContent||"end"===e.alignContent)&&(e.alignContent="flex-"+e.alignContent),e.display="flex",e.flexDirection||(e.flexDirection="row"),e.clip=!0,e.fill=null==(t=null==e?void 0:e.background)?void 0:t.fill,e.stroke=null==(i=null==e?void 0:e.background)?void 0:i.stroke,e.lineWidth=null==(r=null==e?void 0:e.background)?void 0:r.lineWidth,e.cornerRadius=null==(n=null==e?void 0:e.background)?void 0:n.cornerRadius;let y=(0,J.Z)(e.boundsPadding),m=[null!=(o=null!=(s=e.marginTop)?s:y?e.boundsPadding[0]:e.boundsPadding)?o:0,null!=(l=null!=(a=e.marginRight)?a:y?e.boundsPadding[1]:e.boundsPadding)?l:0,null!=(c=null!=(d=e.marginBottom)?d:y?null!=(u=e.boundsPadding[2])?u:e.boundsPadding[0]:e.boundsPadding)?c:0,null!=(f=null!=(h=e.marginLeft)?h:y?null!=(p=e.boundsPadding[3])?p:e.boundsPadding[1]:e.boundsPadding)?f:0];e.boundsPadding=m,super(e)}}class H extends Y{constructor(e){e.flexWrap="nowrap",super(e)}}var X=i(15742),ee=i(58853);class et extends X.E{constructor(e){var t,i,r,n,s,o,a,l,d,u,c,h;let p;(0,ee.Z)(e.iconName)&&(p=C.U2()[e.iconName])&&(e.width=null!=(t=e.width)?t:p.width,e.height=null!=(i=e.height)?i:p.height,e.svg=p.svg,e.cursor=p.cursor),e.svg&&(e.image=e.svg);let f=(0,J.Z)(e.boundsPadding),y=[null!=(n=null!=(r=e.marginTop)?r:f?e.boundsPadding[0]:e.boundsPadding)?n:0,null!=(o=null!=(s=e.marginRight)?s:f?e.boundsPadding[1]:e.boundsPadding)?o:0,null!=(d=null!=(a=e.marginBottom)?a:f?null!=(l=e.boundsPadding[2])?l:e.boundsPadding[0]:e.boundsPadding)?d:0,null!=(h=null!=(u=e.marginLeft)?u:f?null!=(c=e.boundsPadding[3])?c:e.boundsPadding[1]:e.boundsPadding)?h:0];e.boundsPadding=y,super(e),this.cache=p}}class ei extends X.E{constructor(e){var t,i,r,n,s,o,a,l,d,u;e.src&&(e.image=e.src),"circle"===e.shape&&(e.cornerRadius=e.width/2);let c=(0,J.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(l=e.marginLeft)?l:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var er=i(66144);class en extends er.U{constructor(e){var t,i,r,n,s,o,a,l,d,u;let c=(0,J.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(l=e.marginLeft)?l:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var es=i(61731);class eo extends es.x{constructor(e){var t,i,r,n,s,o,a,l,d,u,c;e.textBaseline||(e.textBaseline="top");let h=(0,J.Z)(e.boundsPadding),p=[null!=(i=null!=(t=e.marginTop)?t:h?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:h?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:h?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(l=e.marginLeft)?l:h?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=p,e.fill=null!=(c=e.fill)?c:"#000",super(e)}getSize(e){this.AABBBounds.width()}}function ea(e,t=0){return{percent:e,delta:t}}var el=i(33462);class ed extends el.w{constructor(e){var t,i,r,n,s,o,a,l,d,u;let c=(0,J.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(l=e.marginLeft)?l:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var eu=i(63873);class ec extends eu.V{constructor(e){var t,i,r,n,s,o,a,l,d,u;let c=(0,J.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(l=e.marginLeft)?l:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}getSize(e){this.AABBBounds.width()}}class eh extends K.ZA{constructor(e){var t,i,r,n,s,o,a,l,d,u;let c=(0,J.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(l=e.marginLeft)?l:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var ep=i(19074),ef=i(42943),ey=i(83225),em=i(15476),eg=i(43291),eb=i(30505),ev=i(25112),ew=i(28778),e_=i(20181),eN=i(53504),eI=i(63361);function eS(e,t,i){var r,n;let s=function(e){var t,i,r,n,s,o,a,l,d,u,c;let h,p,f,y,m={seqId:0},g={isPivotChart:!0};e.columnTree&&(!1!==e.indicatorsAsCol&&(f=(0,ew.VN)(e.columnTree,e.indicators)),h=new e_.KO(null!=(t=e.columnTree)?t:[],m)),e.rowTree&&(!1===e.indicatorsAsCol&&(y=(0,ew.VN)(e.rowTree,e.indicators)),p=new e_.KO(null!=(i=e.rowTree)?i:[],m));let b=(null==(r=p.dimensionKeys)?void 0:r.count)?p.dimensionKeys.valueArr():null!=(s=null==(n=e.rows)?void 0:n.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?s:[],v=(null==(o=h.dimensionKeys)?void 0:o.count)?h.dimensionKeys.valueArr():null!=(l=null==(a=e.columns)?void 0:a.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?l:[],w=null!=(u=null==(d=e.indicators)?void 0:d.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.indicatorKey),e),[]))?u:[];return g.collectValuesBy=function(e,t,i){var r,n,s,o,a,l,d,u,c,h,p,f,y,m,g,b,v,w,_,N,I,S,T;let x={};for(let O=0,E=null==(r=e.indicators)?void 0:r.length;O<E;O++)if("string"!=typeof e.indicators[O]&&e.indicators[O].chartSpec)if(!1===e.indicatorsAsCol){let r=e.indicators[O];if(x[r.indicatorKey]={by:i,range:!0,sumBy:!1!==(null==(n=r.chartSpec)?void 0:n.stack)&&t.concat(null==(s=r.chartSpec)?void 0:s.xField)},r.chartSpec.series)r.chartSpec.series.forEach(e=>{var n,s,o,a,l,d,u,c,h,p,f,y,m,g,b,v;let w="string"==typeof e.xField?e.xField:e.xField[0];x[w]={by:t,type:"horizontal"!==e.direction?"xField":void 0,range:"horizontal"===e.direction,sortBy:"horizontal"!==e.direction?null!=(a=null==(o=null==(s=null==(n=null==e?void 0:e.data)?void 0:n.fields)?void 0:s[w])?void 0:o.domain)?a:null==(c=null==(u=null==(d=null==(l=r.chartSpec)?void 0:l.data)?void 0:d.fields)?void 0:u[w])?void 0:c.domain:void 0};let _=e.yField;x[_]={by:i,range:"horizontal"!==e.direction,sumBy:!1!==e.stack&&t.concat(null==e?void 0:e.xField),sortBy:"horizontal"===e.direction?null!=(y=null==(f=null==(p=null==(h=null==e?void 0:e.data)?void 0:h.fields)?void 0:p[_])?void 0:f.domain)?y:null==(v=null==(b=null==(g=null==(m=r.chartSpec)?void 0:m.data)?void 0:g.fields)?void 0:b[_])?void 0:v.domain:void 0}});else{let n="string"==typeof r.chartSpec.xField?r.chartSpec.xField:r.chartSpec.xField[0];x[n]={by:t,type:"horizontal"!==r.chartSpec.direction?"xField":void 0,range:"horizontal"===r.chartSpec.direction,sortBy:"horizontal"!==r.chartSpec.direction?null==(d=null==(l=null==(a=null==(o=r.chartSpec)?void 0:o.data)?void 0:a.fields)?void 0:l[n])?void 0:d.domain:void 0};let s=r.chartSpec.yField;x[s]={by:i,range:"horizontal"!==e.indicators[O].chartSpec.direction,sumBy:!1!==r.chartSpec.stack&&t.concat(null==(u=r.chartSpec)?void 0:u.xField),sortBy:"horizontal"===r.chartSpec.direction?null==(f=null==(p=null==(h=null==(c=r.chartSpec)?void 0:c.data)?void 0:h.fields)?void 0:p[s])?void 0:f.domain:void 0}}}else{let r=e.indicators[O];if(x[r.indicatorKey]={by:t,range:!0,sumBy:!1!==(null==(y=r.chartSpec)?void 0:y.stack)&&i.concat(null==(m=r.chartSpec)?void 0:m.yField)},r.chartSpec.series)r.chartSpec.series.forEach(e=>{var n,s,o,a,l,d,u,c,h,p,f,y,m,g,b,v;let w="string"==typeof e.yField?e.yField:e.yField[0];x[w]={by:i,type:"horizontal"===e.direction?"yField":void 0,range:"horizontal"!==e.direction,sortBy:"horizontal"===e.direction?null!=(a=null==(o=null==(s=null==(n=null==e?void 0:e.data)?void 0:n.fields)?void 0:s[w])?void 0:o.domain)?a:null==(c=null==(u=null==(d=null==(l=r.chartSpec)?void 0:l.data)?void 0:d.fields)?void 0:u[w])?void 0:c.domain:void 0};let _=e.xField;x[_]={by:t,range:"horizontal"===e.direction,sumBy:!1!==e.stack&&i.concat(null==e?void 0:e.yField),sortBy:"horizontal"!==e.direction?null!=(y=null==(f=null==(p=null==(h=null==e?void 0:e.data)?void 0:h.fields)?void 0:p[_])?void 0:f.domain)?y:null==(v=null==(b=null==(g=null==(m=r.chartSpec)?void 0:m.data)?void 0:g.fields)?void 0:b[_])?void 0:v.domain:void 0}});else{let n="string"==typeof r.chartSpec.yField?r.chartSpec.yField:r.chartSpec.yField[0];x[n]={by:i,type:"horizontal"===r.chartSpec.direction?"yField":void 0,range:"horizontal"!==r.chartSpec.direction,sortBy:"horizontal"===r.chartSpec.direction?null==(w=null==(v=null==(b=null==(g=r.chartSpec)?void 0:g.data)?void 0:b.fields)?void 0:v[n])?void 0:w.domain:void 0};let s=r.chartSpec.xField;x[s]={by:t,range:"horizontal"===e.indicators[O].chartSpec.direction,sumBy:!1!==r.chartSpec.stack&&i.concat(null==(_=r.chartSpec)?void 0:_.yField),sortBy:"horizontal"!==r.chartSpec.direction?null==(T=null==(S=null==(I=null==(N=r.chartSpec)?void 0:N.data)?void 0:I.fields)?void 0:S[s])?void 0:T.domain:void 0}}}return x}(e,v,b),g.aggregationRules=function(e){var t;let i=[];return null==(t=e.indicators)||t.forEach(t=>{var r,n;if("string"==typeof t)i.push({indicatorKey:t,field:t,aggregationType:T.E.RECORD});else if(null==(r=t.chartSpec)?void 0:r.series){let r=[];null==(n=t.chartSpec)||n.series.forEach(t=>{let i=!1===e.indicatorsAsCol?t.yField:t.xField;-1===r.indexOf(i)&&r.push(i)}),i.push({indicatorKey:t.indicatorKey,field:r,aggregationType:T.E.RECORD})}else{let r=!1===e.indicatorsAsCol?t.chartSpec.yField:t.chartSpec.xField;i.push({indicatorKey:t.indicatorKey,field:null!=r?r:t.indicatorKey,aggregationType:T.E.RECORD})}}),i}(e),{dataset:new ev.q(g,b,v,w,e.indicators,null==(c=e.indicatorsAsCol)||c,e.records,void 0,void 0,f||e.columnTree,y||e.rowTree,!0),columnDimensionTree:h,rowDimensionTree:p,layoutNodeId:m}}(e),o=s.columnDimensionTree,a=s.rowDimensionTree,l=!1,d=!1;e.columnTree&&e.indicatorsAsCol&&!o.dimensionKeys.contain(eI.ek)&&(l=!0),e.rowTree&&(e.indicatorsAsCol||a.dimensionKeys.contain(eI.ek)||(d=!0));let{dataset:u,layoutNodeId:c}=s;e.columnTree&&!l||(o=new e_.KO(null!=(r=u.colHeaderTree)?r:[],c)),e.rowTree&&!d||(a=new e_.KO(null!=(n=u.rowHeaderTree)?n:[],c));let h=new eN.z({options:e,layoutNodeId:c,internalProps:e,isPivotChart:()=>!0,pivotChartAxes:[],_selectedDataItemsInChart:[],_getActiveChartInstance:()=>({updateState:()=>{}})},u,o,a);for(let e=0;e<h.colCount;e++)for(let r=0;r<h.rowCount;r++){if(h.isHeader(e,r))continue;let n=h.getCellHeaderPaths(e,r),s=n.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=n.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),a=u.getAggregator(h.indicatorsAsCol?o:o.slice(0,-1),h.indicatorsAsCol?s.slice(0,-1):s,h.getIndicatorKey(e,r)),l=function(e,t,i,r,n,s){if((0,J.Z)(e))for(let l=0;l<e.length;l++){var o,a;if(s?s(e[l],t):(o=e[l],a=t,JSON.stringify(o)===JSON.stringify(a)))return n.getCellHeaderPaths(i,r)}}(a.value?a.value():void 0,t,e,r,h,i);if(l)return l}}var eT=i(21637),ex=i(95723),eO=i(83624),eE=i(8864),ek=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};function eA(e,t,...i){let r=t||{},{key:n,name:s,id:o,attribute:a,stateProxy:l,animation:d,timeline:u}=r,c=ek(r,["key","name","id","attribute","stateProxy","animation","timeline"]),h=e;(0,eO.Z)(e)&&(h=eE.i[e]);let p=[];i.length&&function e(t,i){if((0,ex.Z)(t))return t.forEach(t=>e(t,i));i.push(t)}(1===i.length?i[0]:i,p);let f="Group"===h.name?new h(a):h(t);if(function(e,t,i){let r,n=!1;switch(e.type){case"richtext":case"rich/image":break;case"rich/text":r=e.attribute||{},t[0]&&(r.text=t[0]);break;default:n=!0}n?(t.forEach(t=>{t&&e.add(t)}),Object.keys(i).forEach(t=>{let r=eT.Nv[t];r&&e.on(r,i[t])})):"richtext"===e.type&&(e.attribute.textConfig=t.map(e=>e.attribute).filter(e=>e))}(f,p,c),l&&(f.stateProxy=l),s&&(f.name=s),(0,ex.Z)(d)){let e=f.animate();u&&e.setTimeline(u),d.forEach(t=>{e[t[0]](...t.slice(1))})}return f}function eD(e){return new eu.V(e?e.attribute:{})}function eC(e){return new ef.J(e?e.attribute:{})}function eB(e){return new ey.Y(e?e.attribute:{})}var eV=i(99412),eF=i(89097),eR=i(77888),eL=i(83521),eP=i(91209),eM=i(36043),eU=i(52721),eW=i(77192);(0,_.sTO)();let ez="1.22.9-alpha.2";function eq(){return C.U2()}function ej(){B.clearAll()}T.E;var e$=i(52980),eQ=i(81723),eZ=i(6742);let eJ=new Map;eJ.set("react",v),eJ.set("rspress/runtime",l),eJ.set("@visactor/vchart",w),eJ.set("@visactor/vtable",y),eJ.set("@visactor/vseed",e$),eJ.set("@visactor/vquery",eQ),eJ.set("@visactor/vbi",eZ);let eG=function(e,t){if(!eJ.has(e))throw Error("Module "+e+" not found");let i=eJ.get(e);return t&&"object"==typeof i&&i.default||i};function eK(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function eY(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(i),!0).forEach(function(t){var r;r=i[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eK(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function eH(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function eX(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function e0(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?eX(Object(i),!0).forEach(function(t){var r;r=i[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eX(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function e1(e){return function t(){for(var i=this,r=arguments.length,n=Array(r),s=0;s<r;s++)n[s]=arguments[s];return n.length>=e.length?e.apply(this,n):function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return t.apply(i,[].concat(n,r))}}}function e2(e){return({}).toString.call(e).includes("Object")}function e4(e){return"function"==typeof e}var e8=e1(function(e,t){throw Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),e3=function(e,t){return e2(t)||e8("changeType"),Object.keys(t).some(function(t){return!Object.prototype.hasOwnProperty.call(e,t)})&&e8("changeField"),t},e6=function(e){e4(e)||e8("selectorType")},e5=function(e){e4(e)||e2(e)||e8("handlerType"),e2(e)&&Object.values(e).some(function(e){return!e4(e)})&&e8("handlersType")},e9=function(e){e||e8("initialIsRequired"),e2(e)||e8("initialType"),Object.keys(e).length||e8("initialContent")};function e7(e,t){return e4(t)?t(e.current):t}function te(e,t){return e.current=e0(e0({},e.current),t),t}function tt(e,t,i){return e4(t)?t(e.current):Object.keys(i).forEach(function(i){var r;return null==(r=t[i])?void 0:r.call(t,e.current[i])}),i}var ti={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},tr=(o=function(e,t){throw Error(e[t]||e.default)},function e(){for(var t=this,i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];return r.length>=o.length?o.apply(this,r):function(){for(var i=arguments.length,n=Array(i),s=0;s<i;s++)n[s]=arguments[s];return e.apply(t,[].concat(r,n))}})(ti);let tn=function(e){return(e||tr("configIsRequired"),({}).toString.call(e).includes("Object")||tr("configType"),e.urls)?(console.warn(ti.deprecation),{paths:{vs:e.urls.monacoBase}}):e},ts=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}};var to={type:"cancelation",msg:"operation is manually canceled"};let ta=function(e){var t=!1,i=new Promise(function(i,r){e.then(function(e){return t?r(to):i(e)}),e.catch(r)});return i.cancel=function(){return t=!0},i};var tl=function(e){if(Array.isArray(e))return e}(a=({create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e9(e),e5(t);var i={current:e},r=e1(tt)(i,t),n=e1(te)(i),s=e1(e3)(e),o=e1(e7)(i);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return e6(e),e(i.current)},function(e){(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}})(r,n,s,o)(e)}]}}).create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}))||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],r=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(i.push(o.value),i.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}return i}}(a,2)||function(e,t){if(e){if("string"==typeof e)return eH(e,2);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return eH(e,t)}}(a,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),td=tl[0],tu=tl[1];function tc(e){return document.body.appendChild(e)}function th(e){var t,i,r=td(function(e){return{config:e.config,reject:e.reject}}),n=(t="".concat(r.config.paths.vs,"/loader.js"),i=document.createElement("script"),t&&(i.src=t),i);return n.onload=function(){return e()},n.onerror=r.reject,n}function tp(){var e=td(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(t){tf(t),e.resolve(t)},function(t){e.reject(t)})}function tf(e){td().monaco||tu({monaco:e})}var ty=new Promise(function(e,t){return tu({resolve:e,reject:t})});let tm=function(){var e=td(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(tu({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),ta(ty);if(window.monaco&&window.monaco.editor)return tf(window.monaco),e.resolve(window.monaco),ta(ty);ts(tc,th)(tp)}return ta(ty)};var tg={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},tb={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},tv=function({children:e}){return b.createElement("div",{style:tb},e)},tw=(0,b.memo)(function({width:e,height:t,isEditorReady:i,loading:r,_ref:n,className:s,wrapperProps:o}){return b.createElement("section",{style:{...tg.wrapper,width:e,height:t},...o},!i&&b.createElement(tv,null,r),b.createElement("div",{ref:n,style:{...tg.fullWidth,...!i&&tg.hide},className:s}))}),t_=function(e){(0,b.useEffect)(e,[])},tN=function(e,t,i=!0){let r=(0,b.useRef)(!0);(0,b.useEffect)(r.current||!i?()=>{r.current=!1}:e,t)};function tI(){}function tS(e,t,i,r){var n,s,o,a,l,d;return n=e,s=r,n.editor.getModel(tT(n,s))||(o=e,a=t,l=i,d=r,o.editor.createModel(a,l,d?tT(o,d):void 0))}function tT(e,t){return e.Uri.parse(t)}(0,b.memo)(function({original:e,modified:t,language:i,originalLanguage:r,modifiedLanguage:n,originalModelPath:s,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:l=!1,theme:d="light",loading:u="Loading...",options:c={},height:h="100%",width:p="100%",className:f,wrapperProps:y={},beforeMount:m=tI,onMount:g=tI}){let[v,w]=(0,b.useState)(!1),[_,N]=(0,b.useState)(!0),I=(0,b.useRef)(null),S=(0,b.useRef)(null),T=(0,b.useRef)(null),x=(0,b.useRef)(g),O=(0,b.useRef)(m),E=(0,b.useRef)(!1);t_(()=>{let e=tm();return e.then(e=>(S.current=e)&&N(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>{let t;return I.current?(t=I.current?.getModel(),void(a||t?.original?.dispose(),l||t?.modified?.dispose(),I.current?.dispose())):e.cancel()}}),tN(()=>{if(I.current&&S.current){let t=I.current.getOriginalEditor(),n=tS(S.current,e||"",r||i||"text",s||"");n!==t.getModel()&&t.setModel(n)}},[s],v),tN(()=>{if(I.current&&S.current){let e=I.current.getModifiedEditor(),r=tS(S.current,t||"",n||i||"text",o||"");r!==e.getModel()&&e.setModel(r)}},[o],v),tN(()=>{let e=I.current.getModifiedEditor();e.getOption(S.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[t],v),tN(()=>{I.current?.getModel()?.original.setValue(e||"")},[e],v),tN(()=>{let{original:e,modified:t}=I.current.getModel();S.current.editor.setModelLanguage(e,r||i||"text"),S.current.editor.setModelLanguage(t,n||i||"text")},[i,r,n],v),tN(()=>{S.current?.editor.setTheme(d)},[d],v),tN(()=>{I.current?.updateOptions(c)},[c],v);let k=(0,b.useCallback)(()=>{if(!S.current)return;O.current(S.current);let a=tS(S.current,e||"",r||i||"text",s||""),l=tS(S.current,t||"",n||i||"text",o||"");I.current?.setModel({original:a,modified:l})},[i,t,n,e,r,s,o]),A=(0,b.useCallback)(()=>{!E.current&&T.current&&(I.current=S.current.editor.createDiffEditor(T.current,{automaticLayout:!0,...c}),k(),S.current?.editor.setTheme(d),w(!0),E.current=!0)},[c,d,k]);return(0,b.useEffect)(()=>{v&&x.current(I.current,S.current)},[v]),(0,b.useEffect)(()=>{_||v||A()},[_,v,A]),b.createElement(tw,{width:p,height:h,isEditorReady:v,loading:u,_ref:T,className:f,wrapperProps:y})});var tx=function(e){let t=(0,b.useRef)();return(0,b.useEffect)(()=>{t.current=e},[e]),t.current},tO=new Map,tE=(0,b.memo)(function({defaultValue:e,defaultLanguage:t,defaultPath:i,value:r,language:n,path:s,theme:o="light",line:a,loading:l="Loading...",options:d={},overrideServices:u={},saveViewState:c=!0,keepCurrentModel:h=!1,width:p="100%",height:f="100%",className:y,wrapperProps:m={},beforeMount:g=tI,onMount:v=tI,onChange:w,onValidate:_=tI}){let[N,I]=(0,b.useState)(!1),[S,T]=(0,b.useState)(!0),x=(0,b.useRef)(null),O=(0,b.useRef)(null),E=(0,b.useRef)(null),k=(0,b.useRef)(v),A=(0,b.useRef)(g),D=(0,b.useRef)(),C=(0,b.useRef)(r),B=tx(s),V=(0,b.useRef)(!1),F=(0,b.useRef)(!1);t_(()=>{let e=tm();return e.then(e=>(x.current=e)&&T(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>O.current?void(D.current?.dispose(),h?c&&tO.set(s,O.current.saveViewState()):O.current.getModel()?.dispose(),O.current.dispose()):e.cancel()}),tN(()=>{let o=tS(x.current,e||r||"",t||n||"",s||i||"");o!==O.current?.getModel()&&(c&&tO.set(B,O.current?.saveViewState()),O.current?.setModel(o),c&&O.current?.restoreViewState(tO.get(s)))},[s],N),tN(()=>{O.current?.updateOptions(d)},[d],N),tN(()=>{O.current&&void 0!==r&&(O.current.getOption(x.current.editor.EditorOption.readOnly)?O.current.setValue(r):r!==O.current.getValue()&&(F.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),O.current.pushUndoStop(),F.current=!1))},[r],N),tN(()=>{let e=O.current?.getModel();e&&n&&x.current?.editor.setModelLanguage(e,n)},[n],N),tN(()=>{void 0!==a&&O.current?.revealLine(a)},[a],N),tN(()=>{x.current?.editor.setTheme(o)},[o],N);let R=(0,b.useCallback)(()=>{if(!(!E.current||!x.current)&&!V.current){A.current(x.current);let l=s||i,h=tS(x.current,r||e||"",t||n||"",l||"");O.current=x.current?.editor.create(E.current,{model:h,automaticLayout:!0,...d},u),c&&O.current.restoreViewState(tO.get(l)),x.current.editor.setTheme(o),void 0!==a&&O.current.revealLine(a),I(!0),V.current=!0}},[e,t,i,r,n,s,d,u,c,o,a]);return(0,b.useEffect)(()=>{N&&k.current(O.current,x.current)},[N]),(0,b.useEffect)(()=>{S||N||R()},[S,N,R]),C.current=r,(0,b.useEffect)(()=>{N&&w&&(D.current?.dispose(),D.current=O.current?.onDidChangeModelContent(e=>{F.current||w(O.current.getValue(),e)}))},[N,w]),(0,b.useEffect)(()=>{if(N){let e=x.current.editor.onDidChangeMarkers(e=>{let t=O.current.getModel()?.uri;if(t&&e.find(e=>e.path===t.path)){let e=x.current.editor.getModelMarkers({resource:t});_?.(e)}});return()=>{e?.dispose()}}return()=>{}},[N,_]),b.createElement(tw,{width:p,height:f,isEditorReady:N,loading:l,_ref:E,className:y,wrapperProps:m})});function tk(e){let{options:t,className:i="",theme:r,...n}=e||{},s=(0,g.e7)(),o=(0,b.useMemo)(()=>r||(s?"vs-dark":"light"),[r,s]);return(0,m.jsx)("div",{className:`rspress-playground-editor ${i}`,children:(0,m.jsx)(tE,{...n,theme:o,options:{minimap:{enabled:!0,autohide:!0},fontSize:14,lineNumbersMinChars:7,scrollBeyondLastLine:!1,automaticLayout:!0,wordBasedSuggestions:!0,quickSuggestions:!0,scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8},scrollPredominantAxis:!1,...t}})})}function tA(e,t){return{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:"string"==typeof e?{type:"Identifier",name:e}:e,init:t}],kind:"const"}}function tD(e){return{type:"Identifier",name:e}}function tC(e,t){return{type:"ObjectProperty",key:tD(e),computed:!1,shorthand:e===t,value:tD(t)}}function tB(e,t){return{type:"CallExpression",callee:{type:"Identifier",name:"__get_import"},arguments:[{type:"StringLiteral",value:e},{type:"BooleanLiteral",value:!!t}]}}async function tV(){let e=await fetch("https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.20/babel.min.js"),t=await e.text(),i=Function("exports","module","require",`with(exports, module, require) {${t}}`),r={};return i(r,{exports:r},()=>{}),r}n=(r=tn({paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs"}})).monaco,s=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)i=s[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(r,["monaco"]),tu(function(e){return{config:function e(t,i){return Object.keys(i).forEach(function(r){i[r]instanceof Object&&t[r]&&Object.assign(i[r],e(t[r],i[r]))}),eY(eY({},t),i)}(e.config,s),monaco:n}});let tF=null;async function tR(){if(window.Babel)return window.Babel;if(tF)return tF;tF=tV();try{let e=await tF;return window.Babel=e,e}catch(e){throw tF=null,e}}class tL extends b.Component{static getDerivedStateFromError(e){return{error:e,comp:null}}waitCompile(e){this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.timer=null,this.doCompile(e)},800)}async doCompile(e){let{language:t,getImport:i}=this.props,r=await tR();try{let n=[[r.availablePresets.react],[r.availablePresets.env,{modules:"commonjs"}]];("tsx"===t||"ts"===t)&&n.unshift([r.availablePresets.typescript,{allExtensions:!0,isTSX:"tsx"===t}]);let s=r.transform(e,{sourceType:"module",sourceMaps:"inline",presets:n,plugins:[{pre(){this.hasReactImported=!1},visitor:{ImportDeclaration(e){let t=e.node.source.value,i=[],r=[];for(let n of e.node.specifiers)"React"===n.local.name&&(this.hasReactImported=!0),"ImportDefaultSpecifier"===n.type&&i.push(tA(n.local.name,tB(t,!0))),"ImportNamespaceSpecifier"===n.type&&i.push(tA(n.local.name,tB(t))),"ImportSpecifier"===n.type&&("name"in n.imported&&n.imported.name!==n.local.name?r.push([n.imported.name,n.local.name]):r.push(n.local.name));r.length>0&&i.push(tA({type:"ObjectPattern",properties:r.map(e=>Array.isArray(e)?tC(e[0],e[1]):tC(e,e))},tB(t))),e.replaceWithMultiple(i)}},post(e){this.hasReactImported||e.ast.program.body.unshift(tA("React",tB("react",!0)))}}]});if(e!==this.props.code||!s||!s.code)return;let o={};if(Function("__get_import","exports",s.code)(i,o),o.default)return void this.setState({error:void 0,comp:b.createElement(o.default)});this.setState({error:Error("No default export")})}catch(t){if(e!==this.props.code)return;console.error(t),this.setState({error:t})}}componentDidCatch(e,t){console.error(e),console.error(t)}componentDidMount(){this.doCompile(this.props.code)}componentDidUpdate(e){e.code!==this.props.code&&this.waitCompile(this.props.code)}render(){let{className:e="",code:t,language:i,getImport:r,...n}=this.props,{error:s,comp:o}=this.state;return(0,m.jsxs)("div",{className:`rspress-playground-runner ${e}`,...n,children:[o,s&&(0,m.jsx)("pre",{className:"rspress-playground-error",children:s.message})]})}constructor(e){var t;super(e),(t="timer")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null,this.state={error:void 0,comp:null},this.doCompile=this.doCompile.bind(this),this.waitCompile=this.waitCompile.bind(this)}}function tP(e){let{code:t,language:i,className:r="",direction:n,editorPosition:s,renderChildren:o,...a}=e,l=function(e){let{page:t}=(0,g.Vi)(),{frontmatter:i={}}=t,{playgroundDirection:r}=i;return e.direction?e.direction:r?r:"horizontal"}(e),[d,u]=(0,b.useState)(t),c=(0,b.useCallback)(e=>{u(e||"")},[]),h="horizontal"===l&&"left"===s,p=["rspress-playground",`rspress-playground-${l}`,`rspress-playground-reverse-${h?"y":"n"}`,r].join(" ");return(0,m.jsxs)("div",{className:p,...a,children:[(0,m.jsx)(tL,{language:i,code:d,getImport:eG}),(0,m.jsx)(tk,{value:d,onChange:c,language:"tsx"===i||"ts"===i?"typescript":"javascript",beforeMount:e=>{e.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0,noSuggestionDiagnostics:!0})}}),null==o?void 0:o(e,d,l)]})}},2371:function(e,t,i){let r,n,s,o,a,l,d,u,c,h,p,f,y,m,g,b,v,w;function _(e,t,i,r){return new(i||(i=Promise))(function(n,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})}i.d(t,{kw:()=>sQ,Dn:()=>oo,ak:()=>s2});function N(e){return this instanceof N?(this.v=e,this):new N(e)}function I(e,t,i){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(t){return Promise.resolve(t).then(e,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function o(e,t){n[e]&&(r[e]=function(t){return new Promise(function(i,r){s.push([e,t,i,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{var i;(i=n[e](t)).value instanceof N?Promise.resolve(i.value.v).then(l,d):u(s[0][2],i)}catch(e){u(s[0][3],e)}}function l(e){a("next",e)}function d(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function S(e){var t,i;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,n){t[r]=e[r]?function(t){return(i=!i)?{value:N(e[r](t)),done:!1}:n?n(t):t}:n}}function T(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise(function(r,n){var s,o,a;s=r,o=n,a=(t=e[i](t)).done,Promise.resolve(t.value).then(function(e){s({value:e,done:a})},o)})}}}(n3=nj||(nj={}))[n3.NONE=0]="NONE",n3[n3.Null=1]="Null",n3[n3.Int=2]="Int",n3[n3.Float=3]="Float",n3[n3.Binary=4]="Binary",n3[n3.Utf8=5]="Utf8",n3[n3.Bool=6]="Bool",n3[n3.Decimal=7]="Decimal",n3[n3.Date=8]="Date",n3[n3.Time=9]="Time",n3[n3.Timestamp=10]="Timestamp",n3[n3.Interval=11]="Interval",n3[n3.List=12]="List",n3[n3.Struct=13]="Struct",n3[n3.Union=14]="Union",n3[n3.FixedSizeBinary=15]="FixedSizeBinary",n3[n3.FixedSizeList=16]="FixedSizeList",n3[n3.Map=17]="Map",n3[n3.Duration=18]="Duration",n3[n3.LargeBinary=19]="LargeBinary",n3[n3.LargeUtf8=20]="LargeUtf8",n3[n3.Dictionary=-1]="Dictionary",n3[n3.Int8=-2]="Int8",n3[n3.Int16=-3]="Int16",n3[n3.Int32=-4]="Int32",n3[n3.Int64=-5]="Int64",n3[n3.Uint8=-6]="Uint8",n3[n3.Uint16=-7]="Uint16",n3[n3.Uint32=-8]="Uint32",n3[n3.Uint64=-9]="Uint64",n3[n3.Float16=-10]="Float16",n3[n3.Float32=-11]="Float32",n3[n3.Float64=-12]="Float64",n3[n3.DateDay=-13]="DateDay",n3[n3.DateMillisecond=-14]="DateMillisecond",n3[n3.TimestampSecond=-15]="TimestampSecond",n3[n3.TimestampMillisecond=-16]="TimestampMillisecond",n3[n3.TimestampMicrosecond=-17]="TimestampMicrosecond",n3[n3.TimestampNanosecond=-18]="TimestampNanosecond",n3[n3.TimeSecond=-19]="TimeSecond",n3[n3.TimeMillisecond=-20]="TimeMillisecond",n3[n3.TimeMicrosecond=-21]="TimeMicrosecond",n3[n3.TimeNanosecond=-22]="TimeNanosecond",n3[n3.DenseUnion=-23]="DenseUnion",n3[n3.SparseUnion=-24]="SparseUnion",n3[n3.IntervalDayTime=-25]="IntervalDayTime",n3[n3.IntervalYearMonth=-26]="IntervalYearMonth",n3[n3.DurationSecond=-27]="DurationSecond",n3[n3.DurationMillisecond=-28]="DurationMillisecond",n3[n3.DurationMicrosecond=-29]="DurationMicrosecond",n3[n3.DurationNanosecond=-30]="DurationNanosecond",(n6=n$||(n$={}))[n6.OFFSET=0]="OFFSET",n6[n6.DATA=1]="DATA",n6[n6.VALIDITY=2]="VALIDITY",n6[n6.TYPE=3]="TYPE";let x=void 0;function O(e){if(null===e)return"null";if(e===x)return"undefined";switch(typeof e){case"number":case"bigint":return`${e}`;case"string":return`"${e}"`}return"function"==typeof e[Symbol.toPrimitive]?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(e=>O(e))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(e,t)=>"bigint"==typeof t?`${t}`:t)}let E=new TextDecoder("utf-8"),k=e=>E.decode(e),A=new TextEncoder,D=e=>A.encode(e),C=e=>"number"==typeof e,B=e=>"boolean"==typeof e,V=e=>"function"==typeof e,F=e=>null!=e&&Object(e)===e,R=e=>F(e)&&V(e.then),L=e=>F(e)&&V(e[Symbol.iterator]),P=e=>F(e)&&V(e[Symbol.asyncIterator]),M=e=>F(e)&&F(e.schema),U=e=>F(e)&&"done"in e&&"value"in e,W=e=>F(e)&&V(e.stat)&&C(e.fd),z=e=>F(e)&&$(e.body),q=e=>"_getDOMStream"in e&&"_getNodeStream"in e,j=e=>F(e)&&V(e.abort)&&V(e.getWriter)&&!q(e),$=e=>F(e)&&V(e.cancel)&&V(e.getReader)&&!q(e),Q=e=>F(e)&&V(e.end)&&V(e.write)&&B(e.writable)&&!q(e),Z=e=>F(e)&&V(e.read)&&V(e.pipe)&&B(e.readable)&&!q(e),J=e=>F(e)&&V(e.clear)&&V(e.bytes)&&V(e.position)&&V(e.setPosition)&&V(e.capacity)&&V(e.getBufferIdentifier)&&V(e.createLong),G="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function K(e,t,i=0,r=t.byteLength){let n=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,n),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,n));return s.set(o,i),e}function Y(e,t){let i,r,n,s=function(e){let t,i,r,n,s=e[0]?[e[0]]:[];for(let o,a,l=0,d=0,u=e.length;++l<u;){if(o=s[d],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset||({byteOffset:t,byteLength:r}=o,{byteOffset:i,byteLength:n}=a,t+r<i||i+n<t)){a&&(s[++d]=a);continue}s[d]=new Uint8Array(o.buffer,t,i-t+n)}return s}(e),o=s.reduce((e,t)=>e+t.byteLength,0),a=0,l=-1,d=Math.min(t||Number.POSITIVE_INFINITY,o);for(let e=s.length;++l<e;){if(r=(i=s[l]).subarray(0,Math.min(i.length,d-a)),d<=a+r.length){r.length<i.length?s[l]=i.subarray(r.length):r.length===i.length&&l++,n?K(n,r,a):n=r;break}K(n||(n=new Uint8Array(d)),r,a),a+=r.length}return[n||new Uint8Array(0),s.slice(l),o-(n?n.byteLength:0)]}function H(e,t){let i=U(t)?t.value:t;return i instanceof e?e===Uint8Array?new e(i.buffer,i.byteOffset,i.byteLength):i:i?("string"==typeof i&&(i=D(i)),i instanceof ArrayBuffer||i instanceof G)?new e(i):J(i)?H(e,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new e(0):new e(i.buffer,i.byteOffset,i.byteLength/e.BYTES_PER_ELEMENT):e.from(i):new e(0)}let X=e=>H(Int32Array,e),ee=e=>H(BigInt64Array,e),et=e=>H(Uint8Array,e),ei=e=>(e.next(),e),er=e=>(function*(e,t){let i=function*(e){yield e},r="string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof G?i(t):L(t)?t:i(t);return yield*ei(function*(t){let i=null;do i=t.next((yield H(e,i)));while(!i.done)}(r[Symbol.iterator]())),new e})(Uint8Array,e),en=e=>(function e(t,i){return I(this,arguments,function*(){if(R(i))return yield N((yield N((yield*S(T(e(t,(yield N(i)))))))));let r=function(e){return I(this,arguments,function*(){yield yield N((yield N(e)))})},n="string"==typeof i||ArrayBuffer.isView(i)||i instanceof ArrayBuffer||i instanceof G?r(i):L(i)?function(e){return I(this,arguments,function*(){yield N((yield*S(T(ei(function*(e){let t=null;do t=e.next((yield null==t?void 0:t.value));while(!t.done)}(e[Symbol.iterator]()))))))})}(i):P(i)?i:r(i);return yield N((yield*S(T(ei(function(e){return I(this,arguments,function*(){let i=null;do i=yield N(e.next((yield yield N(H(t,i)))));while(!i.done)})}(n[Symbol.asyncIterator]())))))),yield N(new t)})})(Uint8Array,e);function es(e,t,i){if(0!==e){i=i.slice(0,t);for(let t=-1,r=i.length;++t<r;)i[t]+=e}return i.subarray(0,t)}function eo(e){if("bigint"==typeof e&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw TypeError(`${e} is not safe to convert to a number.`);return Number(e)}function ea(e,t){return eo(e/t)+eo(e%t)/eo(t)}let el=Symbol.for("isArrowBigNum");function ed(e,...t){return 0===t.length?Object.setPrototypeOf(H(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}function eu(...e){return ed.apply(this,e)}function ec(...e){return ed.apply(this,e)}function eh(...e){return ed.apply(this,e)}ed.prototype[el]=!0,ed.prototype.toJSON=function(){return`"${ey(this)}"`},ed.prototype.valueOf=function(e){return ef(this,e)},ed.prototype.toString=function(){return ey(this)},ed.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return ef(this);case"string":break;case"default":var t;return t=this,8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:ey(t)}return ey(this)},Object.setPrototypeOf(eu.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(ec.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(eh.prototype,Object.create(Uint32Array.prototype)),Object.assign(eu.prototype,ed.prototype,{constructor:eu,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(ec.prototype,ed.prototype,{constructor:ec,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(eh.prototype,ed.prototype,{constructor:eh,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});let ep=BigInt(0x100000000)*BigInt(0x100000000)-BigInt(1);function ef(e,t){let{buffer:i,byteOffset:r,byteLength:n,signed:s}=e,o=new BigUint64Array(i,r,n/8),a=s&&o.at(-1)&BigInt(1)<<BigInt(63),l=BigInt(0),d=0;if(a){for(let e of o)l|=(e^ep)*(BigInt(1)<<BigInt(64*d++));l*=BigInt(-1),l-=BigInt(1)}else for(let e of o)l|=e*(BigInt(1)<<BigInt(64*d++));if("number"==typeof t){let e=BigInt(Math.pow(10,t)),i=l/e,r=l%e;return eo(i)+eo(r)/eo(e)}return eo(l)}function ey(e){if(8===e.byteLength){let t=new e.BigIntArray(e.buffer,e.byteOffset,1);return`${t[0]}`}if(!e.signed)return em(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return em(e);t=t.slice();let i=1;for(let e=0;e<t.length;e++){let r=t[e],n=~r+i;t[e]=n,i&=0===r}let r=em(t);return`-${r}`}function em(e){let t="",i=new Uint32Array(2),r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),n=new Uint32Array((r=new Uint16Array(r).reverse()).buffer),s=-1,o=r.length-1;do{for(i[0]=r[s=0];s<o;)r[s++]=i[1]=i[0]/10,i[0]=(i[0]-10*i[1]<<16)+r[s];r[s]=i[1]=i[0]/10,i[0]=i[0]-10*i[1],t=`${i[0]}${t}`}while(n[0]||n[1]||n[2]||n[3]);return null!=t?t:"0"}class eg{static new(e,t){switch(t){case!0:return new eu(e);case!1:return new ec(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new eu(e)}return 16===e.byteLength?new eh(e):new ec(e)}static signed(e){return new eu(e)}static unsigned(e){return new ec(e)}static decimal(e){return new eh(e)}constructor(e,t){return eg.new(e,t)}}(n5=nQ||(nQ={}))[n5.HALF=0]="HALF",n5[n5.SINGLE=1]="SINGLE",n5[n5.DOUBLE=2]="DOUBLE",(n9=nZ||(nZ={}))[n9.SECOND=0]="SECOND",n9[n9.MILLISECOND=1]="MILLISECOND",n9[n9.MICROSECOND=2]="MICROSECOND",n9[n9.NANOSECOND=3]="NANOSECOND",(n7=nJ||(nJ={}))[n7.DAY=0]="DAY",n7[n7.MILLISECOND=1]="MILLISECOND",(se=nG||(nG={}))[se.YEAR_MONTH=0]="YEAR_MONTH",se[se.DAY_TIME=1]="DAY_TIME",se[se.MONTH_DAY_NANO=2]="MONTH_DAY_NANO",(st=nK||(nK={}))[st.Sparse=0]="Sparse",st[st.Dense=1]="Dense";class eb{static isNull(e){return(null==e?void 0:e.typeId)===nj.Null}static isInt(e){return(null==e?void 0:e.typeId)===nj.Int}static isFloat(e){return(null==e?void 0:e.typeId)===nj.Float}static isBinary(e){return(null==e?void 0:e.typeId)===nj.Binary}static isLargeBinary(e){return(null==e?void 0:e.typeId)===nj.LargeBinary}static isUtf8(e){return(null==e?void 0:e.typeId)===nj.Utf8}static isLargeUtf8(e){return(null==e?void 0:e.typeId)===nj.LargeUtf8}static isBool(e){return(null==e?void 0:e.typeId)===nj.Bool}static isDecimal(e){return(null==e?void 0:e.typeId)===nj.Decimal}static isDate(e){return(null==e?void 0:e.typeId)===nj.Date}static isTime(e){return(null==e?void 0:e.typeId)===nj.Time}static isTimestamp(e){return(null==e?void 0:e.typeId)===nj.Timestamp}static isInterval(e){return(null==e?void 0:e.typeId)===nj.Interval}static isDuration(e){return(null==e?void 0:e.typeId)===nj.Duration}static isList(e){return(null==e?void 0:e.typeId)===nj.List}static isStruct(e){return(null==e?void 0:e.typeId)===nj.Struct}static isUnion(e){return(null==e?void 0:e.typeId)===nj.Union}static isFixedSizeBinary(e){return(null==e?void 0:e.typeId)===nj.FixedSizeBinary}static isFixedSizeList(e){return(null==e?void 0:e.typeId)===nj.FixedSizeList}static isMap(e){return(null==e?void 0:e.typeId)===nj.Map}static isDictionary(e){return(null==e?void 0:e.typeId)===nj.Dictionary}static isDenseUnion(e){return eb.isUnion(e)&&e.mode===nK.Dense}static isSparseUnion(e){return eb.isUnion(e)&&e.mode===nK.Sparse}constructor(e){this.typeId=e}}eb[Symbol.toStringTag]=((si=eb.prototype).children=null,si.ArrayType=Array,si.OffsetArrayType=Int32Array,si[Symbol.toStringTag]="DataType");class ev extends eb{constructor(){super(nj.Null)}toString(){return"Null"}}ev[Symbol.toStringTag]=ev.prototype[Symbol.toStringTag]="Null";class ew extends eb{constructor(e,t){super(nj.Int),this.isSigned=e,this.bitWidth=t}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}ew[Symbol.toStringTag]=((sr=ew.prototype).isSigned=null,sr.bitWidth=null,sr[Symbol.toStringTag]="Int");class e_ extends ew{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty((class extends ew{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}).prototype,"ArrayType",{value:Int8Array}),Object.defineProperty((class extends ew{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}).prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(e_.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty((class extends ew{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}).prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty((class extends ew{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}).prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty((class extends ew{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}).prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty((class extends ew{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}).prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty((class extends ew{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}).prototype,"ArrayType",{value:BigUint64Array});class eN extends eb{constructor(e){super(nj.Float),this.precision=e}get ArrayType(){switch(this.precision){case nQ.HALF:return Uint16Array;case nQ.SINGLE:return Float32Array;case nQ.DOUBLE:return Float64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}eN[Symbol.toStringTag]=((sn=eN.prototype).precision=null,sn[Symbol.toStringTag]="Float"),Object.defineProperty((class extends eN{constructor(){super(nQ.HALF)}}).prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty((class extends eN{constructor(){super(nQ.SINGLE)}}).prototype,"ArrayType",{value:Float32Array}),Object.defineProperty((class extends eN{constructor(){super(nQ.DOUBLE)}}).prototype,"ArrayType",{value:Float64Array});class eI extends eb{constructor(){super(nj.Binary)}toString(){return"Binary"}}eI[Symbol.toStringTag]=((ss=eI.prototype).ArrayType=Uint8Array,ss[Symbol.toStringTag]="Binary");class eS extends eb{constructor(){super(nj.LargeBinary)}toString(){return"LargeBinary"}}eS[Symbol.toStringTag]=((so=eS.prototype).ArrayType=Uint8Array,so.OffsetArrayType=BigInt64Array,so[Symbol.toStringTag]="LargeBinary");class eT extends eb{constructor(){super(nj.Utf8)}toString(){return"Utf8"}}eT[Symbol.toStringTag]=((sa=eT.prototype).ArrayType=Uint8Array,sa[Symbol.toStringTag]="Utf8");class ex extends eb{constructor(){super(nj.LargeUtf8)}toString(){return"LargeUtf8"}}ex[Symbol.toStringTag]=((sl=ex.prototype).ArrayType=Uint8Array,sl.OffsetArrayType=BigInt64Array,sl[Symbol.toStringTag]="LargeUtf8");class eO extends eb{constructor(){super(nj.Bool)}toString(){return"Bool"}}eO[Symbol.toStringTag]=((sd=eO.prototype).ArrayType=Uint8Array,sd[Symbol.toStringTag]="Bool");class eE extends eb{constructor(e,t,i=128){super(nj.Decimal),this.scale=e,this.precision=t,this.bitWidth=i}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}eE[Symbol.toStringTag]=((su=eE.prototype).scale=null,su.precision=null,su.ArrayType=Uint32Array,su[Symbol.toStringTag]="Decimal");class ek extends eb{constructor(e){super(nj.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${nJ[this.unit]}>`}get ArrayType(){return this.unit===nJ.DAY?Int32Array:BigInt64Array}}ek[Symbol.toStringTag]=((sc=ek.prototype).unit=null,sc[Symbol.toStringTag]="Date");class eA extends eb{constructor(e,t){super(nj.Time),this.unit=e,this.bitWidth=t}toString(){return`Time${this.bitWidth}<${nZ[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}eA[Symbol.toStringTag]=((sh=eA.prototype).unit=null,sh.bitWidth=null,sh[Symbol.toStringTag]="Time");class eD extends eb{constructor(e,t){super(nj.Timestamp),this.unit=e,this.timezone=t}toString(){return`Timestamp<${nZ[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}eD[Symbol.toStringTag]=((sp=eD.prototype).unit=null,sp.timezone=null,sp.ArrayType=BigInt64Array,sp[Symbol.toStringTag]="Timestamp");class eC extends eb{constructor(e){super(nj.Interval),this.unit=e}toString(){return`Interval<${nG[this.unit]}>`}}eC[Symbol.toStringTag]=((sf=eC.prototype).unit=null,sf.ArrayType=Int32Array,sf[Symbol.toStringTag]="Interval");class eB extends eb{constructor(e){super(nj.Duration),this.unit=e}toString(){return`Duration<${nZ[this.unit]}>`}}eB[Symbol.toStringTag]=((sy=eB.prototype).unit=null,sy.ArrayType=BigInt64Array,sy[Symbol.toStringTag]="Duration");class eV extends eb{constructor(e){super(nj.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}eV[Symbol.toStringTag]=((sm=eV.prototype).children=null,sm[Symbol.toStringTag]="List");class eF extends eb{constructor(e){super(nj.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}eF[Symbol.toStringTag]=((sg=eF.prototype).children=null,sg[Symbol.toStringTag]="Struct");class eR extends eb{constructor(e,t,i){super(nj.Union),this.mode=e,this.children=i,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce((e,t,i)=>(e[t]=i)&&e||e,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}eR[Symbol.toStringTag]=((sb=eR.prototype).mode=null,sb.typeIds=null,sb.children=null,sb.typeIdToChildIndex=null,sb.ArrayType=Int8Array,sb[Symbol.toStringTag]="Union");class eL extends eb{constructor(e){super(nj.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}eL[Symbol.toStringTag]=((sv=eL.prototype).byteWidth=null,sv.ArrayType=Uint8Array,sv[Symbol.toStringTag]="FixedSizeBinary");class eP extends eb{constructor(e,t){super(nj.FixedSizeList),this.listSize=e,this.children=[t]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}eP[Symbol.toStringTag]=((sw=eP.prototype).children=null,sw.listSize=null,sw[Symbol.toStringTag]="FixedSizeList");class eM extends eb{constructor(e,t=!1){var i,r,n;if(super(nj.Map),this.children=[e],this.keysSorted=t,e&&(e.name="entries",null==(i=null==e?void 0:e.type)?void 0:i.children)){let t=null==(r=null==e?void 0:e.type)?void 0:r.children[0];t&&(t.name="key");let i=null==(n=null==e?void 0:e.type)?void 0:n.children[1];i&&(i.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}eM[Symbol.toStringTag]=((s_=eM.prototype).children=null,s_.keysSorted=null,s_[Symbol.toStringTag]="Map_");let eU=(n=-1,()=>++n);class eW extends eb{constructor(e,t,i,r){super(nj.Dictionary),this.indices=t,this.dictionary=e,this.isOrdered=r||!1,this.id=null==i?eU():eo(i)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function ez(e){switch(e.typeId){case nj.Decimal:return e.bitWidth/32;case nj.Interval:return 1+e.unit;case nj.FixedSizeList:return e.listSize;case nj.FixedSizeBinary:return e.byteWidth;default:return 1}}eW[Symbol.toStringTag]=((sN=eW.prototype).id=null,sN.indices=null,sN.isOrdered=null,sN.dictionary=null,sN[Symbol.toStringTag]="Dictionary");class eq{visitMany(e,...t){return e.map((e,i)=>this.visit(e,...t.map(e=>e[i])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,t=!0){return function(e,t,i=!0){return"number"==typeof t?ej(e,t,i):"string"==typeof t&&t in nj?ej(e,nj[t],i):t&&t instanceof eb?ej(e,e$(t),i):(null==t?void 0:t.type)&&t.type instanceof eb?ej(e,e$(t.type),i):ej(e,nj.NONE,i)}(this,e,t)}getVisitFnByTypeId(e,t=!0){return ej(this,e,t)}visitNull(e,...t){return null}visitBool(e,...t){return null}visitInt(e,...t){return null}visitFloat(e,...t){return null}visitUtf8(e,...t){return null}visitLargeUtf8(e,...t){return null}visitBinary(e,...t){return null}visitLargeBinary(e,...t){return null}visitFixedSizeBinary(e,...t){return null}visitDate(e,...t){return null}visitTimestamp(e,...t){return null}visitTime(e,...t){return null}visitDecimal(e,...t){return null}visitList(e,...t){return null}visitStruct(e,...t){return null}visitUnion(e,...t){return null}visitDictionary(e,...t){return null}visitInterval(e,...t){return null}visitDuration(e,...t){return null}visitFixedSizeList(e,...t){return null}visitMap(e,...t){return null}}function ej(e,t,i=!0){let r=null;switch(t){case nj.Null:r=e.visitNull;break;case nj.Bool:r=e.visitBool;break;case nj.Int:r=e.visitInt;break;case nj.Int8:r=e.visitInt8||e.visitInt;break;case nj.Int16:r=e.visitInt16||e.visitInt;break;case nj.Int32:r=e.visitInt32||e.visitInt;break;case nj.Int64:r=e.visitInt64||e.visitInt;break;case nj.Uint8:r=e.visitUint8||e.visitInt;break;case nj.Uint16:r=e.visitUint16||e.visitInt;break;case nj.Uint32:r=e.visitUint32||e.visitInt;break;case nj.Uint64:r=e.visitUint64||e.visitInt;break;case nj.Float:r=e.visitFloat;break;case nj.Float16:r=e.visitFloat16||e.visitFloat;break;case nj.Float32:r=e.visitFloat32||e.visitFloat;break;case nj.Float64:r=e.visitFloat64||e.visitFloat;break;case nj.Utf8:r=e.visitUtf8;break;case nj.LargeUtf8:r=e.visitLargeUtf8;break;case nj.Binary:r=e.visitBinary;break;case nj.LargeBinary:r=e.visitLargeBinary;break;case nj.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case nj.Date:r=e.visitDate;break;case nj.DateDay:r=e.visitDateDay||e.visitDate;break;case nj.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case nj.Timestamp:r=e.visitTimestamp;break;case nj.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case nj.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case nj.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case nj.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case nj.Time:r=e.visitTime;break;case nj.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case nj.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case nj.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case nj.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case nj.Decimal:r=e.visitDecimal;break;case nj.List:r=e.visitList;break;case nj.Struct:r=e.visitStruct;break;case nj.Union:r=e.visitUnion;break;case nj.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case nj.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case nj.Dictionary:r=e.visitDictionary;break;case nj.Interval:r=e.visitInterval;break;case nj.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case nj.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case nj.Duration:r=e.visitDuration;break;case nj.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case nj.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case nj.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case nj.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case nj.FixedSizeList:r=e.visitFixedSizeList;break;case nj.Map:r=e.visitMap}if("function"==typeof r)return r;if(!i)return()=>null;throw Error(`Unrecognized type '${nj[t]}'`)}function e$(e){switch(e.typeId){case nj.Null:return nj.Null;case nj.Int:{let{bitWidth:t,isSigned:i}=e;switch(t){case 8:return i?nj.Int8:nj.Uint8;case 16:return i?nj.Int16:nj.Uint16;case 32:return i?nj.Int32:nj.Uint32;case 64:return i?nj.Int64:nj.Uint64}return nj.Int}case nj.Float:switch(e.precision){case nQ.HALF:return nj.Float16;case nQ.SINGLE:return nj.Float32;case nQ.DOUBLE:return nj.Float64}return nj.Float;case nj.Binary:return nj.Binary;case nj.LargeBinary:return nj.LargeBinary;case nj.Utf8:return nj.Utf8;case nj.LargeUtf8:return nj.LargeUtf8;case nj.Bool:return nj.Bool;case nj.Decimal:return nj.Decimal;case nj.Time:switch(e.unit){case nZ.SECOND:return nj.TimeSecond;case nZ.MILLISECOND:return nj.TimeMillisecond;case nZ.MICROSECOND:return nj.TimeMicrosecond;case nZ.NANOSECOND:return nj.TimeNanosecond}return nj.Time;case nj.Timestamp:switch(e.unit){case nZ.SECOND:return nj.TimestampSecond;case nZ.MILLISECOND:return nj.TimestampMillisecond;case nZ.MICROSECOND:return nj.TimestampMicrosecond;case nZ.NANOSECOND:return nj.TimestampNanosecond}return nj.Timestamp;case nj.Date:switch(e.unit){case nJ.DAY:return nj.DateDay;case nJ.MILLISECOND:return nj.DateMillisecond}return nj.Date;case nj.Interval:switch(e.unit){case nG.DAY_TIME:return nj.IntervalDayTime;case nG.YEAR_MONTH:return nj.IntervalYearMonth}return nj.Interval;case nj.Duration:switch(e.unit){case nZ.SECOND:return nj.DurationSecond;case nZ.MILLISECOND:return nj.DurationMillisecond;case nZ.MICROSECOND:return nj.DurationMicrosecond;case nZ.NANOSECOND:return nj.DurationNanosecond}return nj.Duration;case nj.Map:return nj.Map;case nj.List:return nj.List;case nj.Struct:return nj.Struct;case nj.Union:switch(e.mode){case nK.Dense:return nj.DenseUnion;case nK.Sparse:return nj.SparseUnion}return nj.Union;case nj.FixedSizeBinary:return nj.FixedSizeBinary;case nj.FixedSizeList:return nj.FixedSizeList;case nj.Dictionary:return nj.Dictionary}throw Error(`Unrecognized type '${nj[e.typeId]}'`)}eq.prototype.visitInt8=null,eq.prototype.visitInt16=null,eq.prototype.visitInt32=null,eq.prototype.visitInt64=null,eq.prototype.visitUint8=null,eq.prototype.visitUint16=null,eq.prototype.visitUint32=null,eq.prototype.visitUint64=null,eq.prototype.visitFloat16=null,eq.prototype.visitFloat32=null,eq.prototype.visitFloat64=null,eq.prototype.visitDateDay=null,eq.prototype.visitDateMillisecond=null,eq.prototype.visitTimestampSecond=null,eq.prototype.visitTimestampMillisecond=null,eq.prototype.visitTimestampMicrosecond=null,eq.prototype.visitTimestampNanosecond=null,eq.prototype.visitTimeSecond=null,eq.prototype.visitTimeMillisecond=null,eq.prototype.visitTimeMicrosecond=null,eq.prototype.visitTimeNanosecond=null,eq.prototype.visitDenseUnion=null,eq.prototype.visitSparseUnion=null,eq.prototype.visitIntervalDayTime=null,eq.prototype.visitIntervalYearMonth=null,eq.prototype.visitDuration=null,eq.prototype.visitDurationSecond=null,eq.prototype.visitDurationMillisecond=null,eq.prototype.visitDurationMicrosecond=null,eq.prototype.visitDurationNanosecond=null;let eQ=new Float64Array(1),eZ=new Uint32Array(eQ.buffer);function eJ(e){let t=(31744&e)>>10,i=(1023&e)/1024,r=Math.pow(-1,(32768&e)>>15);switch(t){case 31:return r*(i?Number.NaN:1/0);case 0:return r*(i?6103515625e-14*i:0)}return r*Math.pow(2,t-15)*(1+i)}class eG extends eq{}function eK(e){return(t,i,r)=>{if(t.setValid(i,null!=r))return e(t,i,r)}}let eY=(e,t,i)=>{e[t]=Math.floor(i/864e5)},eH=(e,t,i,r)=>{if(i+1<t.length){let n=eo(t[i]),s=eo(t[i+1]);e.set(r.subarray(0,s-n),n)}},eX=({values:e},t,i)=>{e[t]=i},e0=({values:e},t,i)=>{e[t]=i},e1=({values:e},t,i)=>{e[t]=function(e){if(e!=e)return 32256;eQ[0]=e;let t=(0x80000000&eZ[1])>>16&65535,i=0x7ff00000&eZ[1],r=0;return i>=0x40f00000?eZ[0]>0?i=31744:(i=(0x7c000000&i)>>16,r=(1048575&eZ[1])>>10):i<=0x3f000000?(r=1048576+((r=1048576+(1048575&eZ[1]))<<(i>>20)-998)>>21,i=0):(i=i-0x3f000000>>10,r=(1048575&eZ[1])+512>>10),t|i|65535&r}(i)},e2=({values:e},t,i)=>{eY(e,t,i.valueOf())},e4=({values:e},t,i)=>{e[t]=BigInt(i)},e8=({values:e,valueOffsets:t},i,r)=>eH(e,t,i,r),e3=({values:e,valueOffsets:t},i,r)=>eH(e,t,i,D(r)),e6=({values:e},t,i)=>{e[t]=BigInt(i/1e3)},e5=({values:e},t,i)=>{e[t]=BigInt(i)},e9=({values:e},t,i)=>{e[t]=BigInt(1e3*i)},e7=({values:e},t,i)=>{e[t]=BigInt(1e6*i)},te=({values:e},t,i)=>{e[t]=i},tt=({values:e},t,i)=>{e[t]=i},ti=({values:e},t,i)=>{e[t]=i},tr=({values:e},t,i)=>{e[t]=i},tn=(e,t)=>(i,r,n,s)=>r&&i(r,e,t[s]),ts=(e,t)=>(i,r,n,s)=>r&&i(r,e,t.get(s)),to=(e,t)=>(i,r,n,s)=>r&&i(r,e,t.get(n.name)),ta=(e,t)=>(i,r,n,s)=>r&&i(r,e,t[n.name]),tl=(e,t,i)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];tm.visit(n,e.valueOffsets[t],i)},td=(e,t,i)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];tm.visit(n,t,i)},tu=({values:e},t,i)=>{e.set(i.subarray(0,2),2*t)},tc=({values:e},t,i)=>{e[t]=12*i[0]+i[1]%12},th=({values:e},t,i)=>{e[t]=i},tp=({values:e},t,i)=>{e[t]=i},tf=({values:e},t,i)=>{e[t]=i},ty=({values:e},t,i)=>{e[t]=i};eG.prototype.visitBool=eK(({offset:e,values:t},i,r)=>{let n=e+i;r?t[n>>3]|=1<<n%8:t[n>>3]&=~(1<<n%8)}),eG.prototype.visitInt=eK(eX),eG.prototype.visitInt8=eK(eX),eG.prototype.visitInt16=eK(eX),eG.prototype.visitInt32=eK(eX),eG.prototype.visitInt64=eK(eX),eG.prototype.visitUint8=eK(eX),eG.prototype.visitUint16=eK(eX),eG.prototype.visitUint32=eK(eX),eG.prototype.visitUint64=eK(eX),eG.prototype.visitFloat=eK((e,t,i)=>{switch(e.type.precision){case nQ.HALF:return e1(e,t,i);case nQ.SINGLE:case nQ.DOUBLE:return e0(e,t,i)}}),eG.prototype.visitFloat16=eK(e1),eG.prototype.visitFloat32=eK(e0),eG.prototype.visitFloat64=eK(e0),eG.prototype.visitUtf8=eK(e3),eG.prototype.visitLargeUtf8=eK(e3),eG.prototype.visitBinary=eK(e8),eG.prototype.visitLargeBinary=eK(e8),eG.prototype.visitFixedSizeBinary=eK(({stride:e,values:t},i,r)=>{t.set(r.subarray(0,e),e*i)}),eG.prototype.visitDate=eK((e,t,i)=>{e.type.unit===nJ.DAY?e2(e,t,i):e4(e,t,i)}),eG.prototype.visitDateDay=eK(e2),eG.prototype.visitDateMillisecond=eK(e4),eG.prototype.visitTimestamp=eK((e,t,i)=>{switch(e.type.unit){case nZ.SECOND:return e6(e,t,i);case nZ.MILLISECOND:return e5(e,t,i);case nZ.MICROSECOND:return e9(e,t,i);case nZ.NANOSECOND:return e7(e,t,i)}}),eG.prototype.visitTimestampSecond=eK(e6),eG.prototype.visitTimestampMillisecond=eK(e5),eG.prototype.visitTimestampMicrosecond=eK(e9),eG.prototype.visitTimestampNanosecond=eK(e7),eG.prototype.visitTime=eK((e,t,i)=>{switch(e.type.unit){case nZ.SECOND:return te(e,t,i);case nZ.MILLISECOND:return tt(e,t,i);case nZ.MICROSECOND:return ti(e,t,i);case nZ.NANOSECOND:return tr(e,t,i)}}),eG.prototype.visitTimeSecond=eK(te),eG.prototype.visitTimeMillisecond=eK(tt),eG.prototype.visitTimeMicrosecond=eK(ti),eG.prototype.visitTimeNanosecond=eK(tr),eG.prototype.visitDecimal=eK(({values:e,stride:t},i,r)=>{e.set(r.subarray(0,t),t*i)}),eG.prototype.visitList=eK((e,t,i)=>{let r=e.children[0],n=e.valueOffsets,s=tm.getVisitFn(r);if(Array.isArray(i))for(let e=-1,o=n[t],a=n[t+1];o<a;)s(r,o++,i[++e]);else for(let e=-1,o=n[t],a=n[t+1];o<a;)s(r,o++,i.get(++e))}),eG.prototype.visitStruct=eK((e,t,i)=>{let r=e.type.children.map(e=>tm.getVisitFn(e.type)),n=i instanceof Map?to(t,i):i instanceof iT?ts(t,i):Array.isArray(i)?tn(t,i):ta(t,i);e.type.children.forEach((t,i)=>n(r[i],e.children[i],t,i))}),eG.prototype.visitUnion=eK((e,t,i)=>{e.type.mode===nK.Dense?tl(e,t,i):td(e,t,i)}),eG.prototype.visitDenseUnion=eK(tl),eG.prototype.visitSparseUnion=eK(td),eG.prototype.visitDictionary=eK((e,t,i)=>{var r;null==(r=e.dictionary)||r.set(e.values[t],i)}),eG.prototype.visitInterval=eK((e,t,i)=>{e.type.unit===nG.DAY_TIME?tu(e,t,i):tc(e,t,i)}),eG.prototype.visitIntervalDayTime=eK(tu),eG.prototype.visitIntervalYearMonth=eK(tc),eG.prototype.visitDuration=eK((e,t,i)=>{switch(e.type.unit){case nZ.SECOND:return th(e,t,i);case nZ.MILLISECOND:return tp(e,t,i);case nZ.MICROSECOND:return tf(e,t,i);case nZ.NANOSECOND:return ty(e,t,i)}}),eG.prototype.visitDurationSecond=eK(th),eG.prototype.visitDurationMillisecond=eK(tp),eG.prototype.visitDurationMicrosecond=eK(tf),eG.prototype.visitDurationNanosecond=eK(ty),eG.prototype.visitFixedSizeList=eK((e,t,i)=>{let{stride:r}=e,n=e.children[0],s=tm.getVisitFn(n);if(Array.isArray(i))for(let e=-1,o=t*r;++e<r;)s(n,o+e,i[e]);else for(let e=-1,o=t*r;++e<r;)s(n,o+e,i.get(e))}),eG.prototype.visitMap=eK((e,t,i)=>{let r=e.children[0],{valueOffsets:n}=e,s=tm.getVisitFn(r),{[t]:o,[t+1]:a}=n;for(let e of i instanceof Map?i.entries():Object.entries(i))if(s(r,o,e),++o>=a)break});let tm=new eG,tg=Symbol.for("parent"),tb=Symbol.for("rowIndex");class tv{constructor(e,t){return this[tg]=e,this[tb]=t,new Proxy(this,new t_)}toArray(){return Object.values(this.toJSON())}toJSON(){let e=this[tb],t=this[tg],i=t.type.children,r={};for(let n=-1,s=i.length;++n<s;)r[i[n].name]=tJ.visit(t.children[n],e);return r}toString(){return`{${[...this].map(([e,t])=>`${O(e)}: ${O(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new tw(this[tg],this[tb])}}class tw{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){let e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,tJ.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(tv.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[tg]:{writable:!0,enumerable:!1,configurable:!1,value:null},[tb]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class t_{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[tg].type.children.map(e=>e.name)}has(e,t){return -1!==e[tg].type.children.findIndex(e=>e.name===t)}getOwnPropertyDescriptor(e,t){if(-1!==e[tg].type.children.findIndex(e=>e.name===t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];let i=e[tg].type.children.findIndex(e=>e.name===t);if(-1!==i){let r=tJ.visit(e[tg].children[i],e[tb]);return Reflect.set(e,t,r),r}}set(e,t,i){let r=e[tg].type.children.findIndex(e=>e.name===t);return -1!==r?(tm.visit(e[tg].children[r],e[tb],i),Reflect.set(e,t,i)):(!!Reflect.has(e,t)||"symbol"==typeof t)&&Reflect.set(e,t,i)}}class tN extends eq{}function tI(e){return(t,i)=>t.getValid(i)?e(t,i):null}let tS=(e,t)=>864e5*e[t],tT=(e,t,i)=>{if(i+1>=t.length)return null;let r=eo(t[i]),n=eo(t[i+1]);return e.subarray(r,n)},tx=({values:e},t)=>tS(e,t),tO=({values:e},t)=>eo(e[t]),tE=({stride:e,values:t},i)=>t[e*i],tk=({values:e},t)=>e[t],tA=({values:e,valueOffsets:t},i)=>tT(e,t,i),tD=({values:e,valueOffsets:t},i)=>{let r=tT(e,t,i);return null!==r?k(r):null},tC=({values:e},t)=>1e3*eo(e[t]),tB=({values:e},t)=>eo(e[t]),tV=({values:e},t)=>ea(e[t],BigInt(1e3)),tF=({values:e},t)=>ea(e[t],BigInt(1e6)),tR=({values:e},t)=>e[t],tL=({values:e},t)=>e[t],tP=({values:e},t)=>e[t],tM=({values:e},t)=>e[t],tU=(e,t)=>{let i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];return tJ.visit(r,e.valueOffsets[t])},tW=(e,t)=>{let i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];return tJ.visit(r,t)},tz=({values:e},t)=>e.subarray(2*t,2*(t+1)),tq=({values:e},t)=>{let i=e[t],r=new Int32Array(2);return r[0]=Math.trunc(i/12),r[1]=Math.trunc(i%12),r},tj=({values:e},t)=>e[t],t$=({values:e},t)=>e[t],tQ=({values:e},t)=>e[t],tZ=({values:e},t)=>e[t];tN.prototype.visitNull=tI((e,t)=>null),tN.prototype.visitBool=tI(({offset:e,values:t},i)=>{let r=e+i;return(t[r>>3]&1<<r%8)!=0}),tN.prototype.visitInt=tI(({values:e},t)=>e[t]),tN.prototype.visitInt8=tI(tE),tN.prototype.visitInt16=tI(tE),tN.prototype.visitInt32=tI(tE),tN.prototype.visitInt64=tI(tk),tN.prototype.visitUint8=tI(tE),tN.prototype.visitUint16=tI(tE),tN.prototype.visitUint32=tI(tE),tN.prototype.visitUint64=tI(tk),tN.prototype.visitFloat=tI(({type:e,values:t},i)=>e.precision!==nQ.HALF?t[i]:eJ(t[i])),tN.prototype.visitFloat16=tI(({stride:e,values:t},i)=>eJ(t[e*i])),tN.prototype.visitFloat32=tI(tE),tN.prototype.visitFloat64=tI(tE),tN.prototype.visitUtf8=tI(tD),tN.prototype.visitLargeUtf8=tI(tD),tN.prototype.visitBinary=tI(tA),tN.prototype.visitLargeBinary=tI(tA),tN.prototype.visitFixedSizeBinary=tI(({stride:e,values:t},i)=>t.subarray(e*i,e*(i+1))),tN.prototype.visitDate=tI((e,t)=>e.type.unit===nJ.DAY?tx(e,t):tO(e,t)),tN.prototype.visitDateDay=tI(tx),tN.prototype.visitDateMillisecond=tI(tO),tN.prototype.visitTimestamp=tI((e,t)=>{switch(e.type.unit){case nZ.SECOND:return tC(e,t);case nZ.MILLISECOND:return tB(e,t);case nZ.MICROSECOND:return tV(e,t);case nZ.NANOSECOND:return tF(e,t)}}),tN.prototype.visitTimestampSecond=tI(tC),tN.prototype.visitTimestampMillisecond=tI(tB),tN.prototype.visitTimestampMicrosecond=tI(tV),tN.prototype.visitTimestampNanosecond=tI(tF),tN.prototype.visitTime=tI((e,t)=>{switch(e.type.unit){case nZ.SECOND:return tR(e,t);case nZ.MILLISECOND:return tL(e,t);case nZ.MICROSECOND:return tP(e,t);case nZ.NANOSECOND:return tM(e,t)}}),tN.prototype.visitTimeSecond=tI(tR),tN.prototype.visitTimeMillisecond=tI(tL),tN.prototype.visitTimeMicrosecond=tI(tP),tN.prototype.visitTimeNanosecond=tI(tM),tN.prototype.visitDecimal=tI(({values:e,stride:t},i)=>eg.decimal(e.subarray(t*i,t*(i+1)))),tN.prototype.visitList=tI((e,t)=>{let{valueOffsets:i,stride:r,children:n}=e,{[t*r]:s,[t*r+1]:o}=i;return new iT([n[0].slice(s,o-s)])}),tN.prototype.visitStruct=tI((e,t)=>new tv(e,t)),tN.prototype.visitUnion=tI((e,t)=>e.type.mode===nK.Dense?tU(e,t):tW(e,t)),tN.prototype.visitDenseUnion=tI(tU),tN.prototype.visitSparseUnion=tI(tW),tN.prototype.visitDictionary=tI((e,t)=>{var i;return null==(i=e.dictionary)?void 0:i.get(e.values[t])}),tN.prototype.visitInterval=tI((e,t)=>e.type.unit===nG.DAY_TIME?tz(e,t):tq(e,t)),tN.prototype.visitIntervalDayTime=tI(tz),tN.prototype.visitIntervalYearMonth=tI(tq),tN.prototype.visitDuration=tI((e,t)=>{switch(e.type.unit){case nZ.SECOND:return tj(e,t);case nZ.MILLISECOND:return t$(e,t);case nZ.MICROSECOND:return tQ(e,t);case nZ.NANOSECOND:return tZ(e,t)}}),tN.prototype.visitDurationSecond=tI(tj),tN.prototype.visitDurationMillisecond=tI(t$),tN.prototype.visitDurationMicrosecond=tI(tQ),tN.prototype.visitDurationNanosecond=tI(tZ),tN.prototype.visitFixedSizeList=tI((e,t)=>{let{stride:i,children:r}=e;return new iT([r[0].slice(t*i,i)])}),tN.prototype.visitMap=tI((e,t)=>{let{valueOffsets:i,children:r}=e,{[t]:n,[t+1]:s}=i;return new tX(r[0].slice(n,s-n))});let tJ=new tN,tG=Symbol.for("keys"),tK=Symbol.for("vals"),tY=Symbol.for("kKeysAsStrings"),tH=Symbol.for("_kKeysAsStrings");class tX{constructor(e){return this[tG]=new iT([e.children[0]]).memoize(),this[tK]=e.children[1],new Proxy(this,new t1)}get[tY](){return this[tH]||(this[tH]=Array.from(this[tG].toArray(),String))}[Symbol.iterator](){return new t0(this[tG],this[tK])}get size(){return this[tG].length}toArray(){return Object.values(this.toJSON())}toJSON(){let e=this[tG],t=this[tK],i={};for(let r=-1,n=e.length;++r<n;)i[e.get(r)]=tJ.visit(t,r);return i}toString(){return`{${[...this].map(([e,t])=>`${O(e)}: ${O(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class t0{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){let e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),tJ.visit(this.vals,e)]})}}class t1{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[tY]}has(e,t){return e[tY].includes(t)}getOwnPropertyDescriptor(e,t){if(-1!==e[tY].indexOf(t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];let i=e[tY].indexOf(t);if(-1!==i){let r=tJ.visit(Reflect.get(e,tK),i);return Reflect.set(e,t,r),r}}set(e,t,i){let r=e[tY].indexOf(t);return -1!==r?(tm.visit(Reflect.get(e,tK),r,i),Reflect.set(e,t,i)):!!Reflect.has(e,t)&&Reflect.set(e,t,i)}}function t2(e,t,i,n){let{length:s=0}=e,o="number"!=typeof t?0:t,a="number"!=typeof i?s:i;return o<0&&(o=(o%s+s)%s),a<0&&(a=(a%s+s)%s),a<o&&(r=o,o=a,a=r),a>s&&(a=s),n?n(e,o,a):[o,a]}Object.defineProperties(tX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[tG]:{writable:!0,enumerable:!1,configurable:!1,value:null},[tK]:{writable:!0,enumerable:!1,configurable:!1,value:null},[tH]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let t4=(e,t)=>e<0?t+e:e,t8=e=>e!=e;function t3(e){if("object"!=typeof e||null===e)return t8(e)?t8:t=>t===e;if(e instanceof Date){let t=e.valueOf();return e=>e instanceof Date&&e.valueOf()===t}return ArrayBuffer.isView(e)?t=>!!t&&function(e,t){let i=0,r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[i]!==t[i])return!1;while(++i<r);return!0}(e,t):e instanceof Map?function(e){let t=-1,i=[];for(let r of e.values())i[++t]=t3(r);return t6(i)}(e):Array.isArray(e)?function(e){let t=[];for(let i=-1,r=e.length;++i<r;)t[i]=t3(e[i]);return t6(t)}(e):e instanceof iT?function(e){let t=[];for(let i=-1,r=e.length;++i<r;)t[i]=t3(e.get(i));return t6(t)}(e):function(e,t=!1){let i=Object.keys(e);if(!t&&0===i.length)return()=>!1;let r=[];for(let t=-1,n=i.length;++t<n;)r[t]=t3(e[i[t]]);return t6(r,i)}(e,!0)}function t6(e,t){return i=>{if(!i||"object"!=typeof i)return!1;switch(i.constructor){case Array:var r=e,n=i;let s=r.length;if(n.length!==s)return!1;for(let e=-1;++e<s;)if(!r[e](n[e]))return!1;return!0;case Map:return t5(e,i,i.keys());case tX:case tv:case Object:case void 0:return t5(e,i,t||Object.keys(i))}return i instanceof iT&&function(e,t){let i=e.length;if(t.length!==i)return!1;for(let r=-1;++r<i;)if(!e[r](t.get(r)))return!1;return!0}(e,i)}}function t5(e,t,i){let r=i[Symbol.iterator](),n=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator](),o=0,a=e.length,l=s.next(),d=r.next(),u=n.next();for(;o<a&&!d.done&&!u.done&&!l.done&&d.value===u.value&&e[o](l.value);++o,d=r.next(),u=n.next(),l=s.next());return o===a&&!!d.done&&!!u.done&&!!l.done||(r.return&&r.return(),n.return&&n.return(),s.return&&s.return(),!1)}class t9{constructor(e=0,t){this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){let e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function t7(e){return e.reduce((e,t)=>e+t.nullCount,0)}function ie(e){return e.reduce((e,t,i)=>(e[i+1]=e[i]+t.length,e),new Uint32Array(e.length+1))}function it(e,t,i,r){let n=[];for(let s=-1,o=e.length;++s<o;){let o=e[s],a=t[s],{length:l}=o;if(a>=r)break;if(i>=a+l)continue;if(a>=i&&a+l<=r){n.push(o);continue}let d=Math.max(0,i-a),u=Math.min(r-a,l);n.push(o.slice(d,u-d))}return 0===n.length&&n.push(e[0].slice(0,0)),n}function ii(e,t,i,r){let n=0,s=0,o=t.length-1;do{if(n>=o-1)return i<t[o]?r(e,n,i-t[n]):null;i<t[s=n+Math.trunc((o-n)*.5)]?o=s:n=s}while(n<o)}function ir(e,t){return e.getValid(t)}function is(e){function t(t,i,r){return e(t[i],r)}return function(e){return ii(this.data,this._offsets,e,t)}}function io(e){let t;function i(i,r,n){return e(i[r],n,t)}return function(e,r){let n=this.data;t=r;let s=ii(n,this._offsets,e,i);return t=void 0,s}}function ia(e){let t;function i(i,r,n){let s=n,o=0,a=0;for(let n=r-1,l=i.length;++n<l;){let r=i[n];if(~(o=e(r,t,s)))return a+o;s=0,a+=r.length}return -1}return function(e,r){t=e;let n=this.data,s="number"!=typeof r?i(n,0,0):ii(n,this._offsets,r,i);return t=void 0,s}}function il(e,t,i,r){return(i&1<<r)!=0}function id(e,t,i,r){return(i&1<<r)>>r}function iu(e,t,i){let r=i.byteLength+7&-8;if(e>0||i.byteLength<r){let n=new Uint8Array(r);return n.set(e%8==0?i.subarray(e>>3):ic(new ih(i,e,t,null,il)).subarray(0,r)),n}return i}function ic(e){let t=[],i=0,r=0,n=0;for(let s of e)s&&(n|=1<<r),8==++r&&(t[i++]=n,n=r=0);(0===i||r>0)&&(t[i++]=n);let s=new Uint8Array(t.length+7&-8);return s.set(t),s}class ih{constructor(e,t,i,r,n){this.bytes=e,this.length=i,this.context=r,this.get=n,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function ip(e){let t=Math.trunc(e);return t-=t>>>1&0x55555555,((t=(0x33333333&t)+(t>>>2&0x33333333))+(t>>>4)&0xf0f0f0f)*0x1010101>>>24}class iy extends eq{}function im(e,t,i){if(void 0===t)return -1;if(null===t)switch(e.typeId){case nj.Union:case nj.Dictionary:break;default:let{nullBitmap:r}=e;if(!r||e.nullCount<=0)return -1;let n=0;for(let t of new ih(r,e.offset+(i||0),e.length,r,il)){if(!t)return n;++n}return -1}let s=tJ.getVisitFn(e),o=t3(t);for(let t=(i||0)-1,r=e.length;++t<r;)if(o(s(e,t)))return t;return -1}function ig(e,t,i){let r=tJ.getVisitFn(e),n=t3(t);for(let t=(i||0)-1,s=e.length;++t<s;)if(n(r(e,t)))return t;return -1}iy.prototype.visitNull=function(e,t){return null===t&&e.length>0?0:-1},iy.prototype.visitBool=im,iy.prototype.visitInt=im,iy.prototype.visitInt8=im,iy.prototype.visitInt16=im,iy.prototype.visitInt32=im,iy.prototype.visitInt64=im,iy.prototype.visitUint8=im,iy.prototype.visitUint16=im,iy.prototype.visitUint32=im,iy.prototype.visitUint64=im,iy.prototype.visitFloat=im,iy.prototype.visitFloat16=im,iy.prototype.visitFloat32=im,iy.prototype.visitFloat64=im,iy.prototype.visitUtf8=im,iy.prototype.visitLargeUtf8=im,iy.prototype.visitBinary=im,iy.prototype.visitLargeBinary=im,iy.prototype.visitFixedSizeBinary=im,iy.prototype.visitDate=im,iy.prototype.visitDateDay=im,iy.prototype.visitDateMillisecond=im,iy.prototype.visitTimestamp=im,iy.prototype.visitTimestampSecond=im,iy.prototype.visitTimestampMillisecond=im,iy.prototype.visitTimestampMicrosecond=im,iy.prototype.visitTimestampNanosecond=im,iy.prototype.visitTime=im,iy.prototype.visitTimeSecond=im,iy.prototype.visitTimeMillisecond=im,iy.prototype.visitTimeMicrosecond=im,iy.prototype.visitTimeNanosecond=im,iy.prototype.visitDecimal=im,iy.prototype.visitList=im,iy.prototype.visitStruct=im,iy.prototype.visitUnion=im,iy.prototype.visitDenseUnion=ig,iy.prototype.visitSparseUnion=ig,iy.prototype.visitDictionary=im,iy.prototype.visitInterval=im,iy.prototype.visitIntervalDayTime=im,iy.prototype.visitIntervalYearMonth=im,iy.prototype.visitDuration=im,iy.prototype.visitDurationSecond=im,iy.prototype.visitDurationMillisecond=im,iy.prototype.visitDurationMicrosecond=im,iy.prototype.visitDurationNanosecond=im,iy.prototype.visitFixedSizeList=im,iy.prototype.visitMap=im;let ib=new iy;class iv extends eq{}function iw(e){let{type:t}=e;if(0===e.nullCount&&1===e.stride&&(eb.isInt(t)&&64!==t.bitWidth||eb.isTime(t)&&64!==t.bitWidth||eb.isFloat(t)&&t.precision!==nQ.HALF))return new t9(e.data.length,t=>{let i=e.data[t];return i.values.subarray(0,i.length)[Symbol.iterator]()});let i=0;return new t9(e.data.length,t=>{let r=e.data[t].length,n=e.slice(i,i+r);return i+=r,new i_(n)})}class i_{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}iv.prototype.visitNull=iw,iv.prototype.visitBool=iw,iv.prototype.visitInt=iw,iv.prototype.visitInt8=iw,iv.prototype.visitInt16=iw,iv.prototype.visitInt32=iw,iv.prototype.visitInt64=iw,iv.prototype.visitUint8=iw,iv.prototype.visitUint16=iw,iv.prototype.visitUint32=iw,iv.prototype.visitUint64=iw,iv.prototype.visitFloat=iw,iv.prototype.visitFloat16=iw,iv.prototype.visitFloat32=iw,iv.prototype.visitFloat64=iw,iv.prototype.visitUtf8=iw,iv.prototype.visitLargeUtf8=iw,iv.prototype.visitBinary=iw,iv.prototype.visitLargeBinary=iw,iv.prototype.visitFixedSizeBinary=iw,iv.prototype.visitDate=iw,iv.prototype.visitDateDay=iw,iv.prototype.visitDateMillisecond=iw,iv.prototype.visitTimestamp=iw,iv.prototype.visitTimestampSecond=iw,iv.prototype.visitTimestampMillisecond=iw,iv.prototype.visitTimestampMicrosecond=iw,iv.prototype.visitTimestampNanosecond=iw,iv.prototype.visitTime=iw,iv.prototype.visitTimeSecond=iw,iv.prototype.visitTimeMillisecond=iw,iv.prototype.visitTimeMicrosecond=iw,iv.prototype.visitTimeNanosecond=iw,iv.prototype.visitDecimal=iw,iv.prototype.visitList=iw,iv.prototype.visitStruct=iw,iv.prototype.visitUnion=iw,iv.prototype.visitDenseUnion=iw,iv.prototype.visitSparseUnion=iw,iv.prototype.visitDictionary=iw,iv.prototype.visitInterval=iw,iv.prototype.visitIntervalDayTime=iw,iv.prototype.visitIntervalYearMonth=iw,iv.prototype.visitDuration=iw,iv.prototype.visitDurationSecond=iw,iv.prototype.visitDurationMillisecond=iw,iv.prototype.visitDurationMicrosecond=iw,iv.prototype.visitDurationNanosecond=iw,iv.prototype.visitFixedSizeList=iw,iv.prototype.visitMap=iw;let iN=new iv,iI={},iS={};class iT{constructor(e){var t,i,r;let n=e[0]instanceof iT?e.flatMap(e=>e.data):e;if(0===n.length||n.some(e=>!(e instanceof iO)))throw TypeError("Vector constructor expects an Array of Data instances.");let s=null==(t=n[0])?void 0:t.type;switch(n.length){case 0:this._offsets=[0];break;case 1:{let{get:e,set:t,indexOf:i}=iI[s.typeId],r=n[0];this.isValid=e=>ir(r,e),this.get=t=>e(r,t),this.set=(e,i)=>t(r,e,i),this.indexOf=e=>i(r,e),this._offsets=[0,r.length];break}default:Object.setPrototypeOf(this,iS[s.typeId]),this._offsets=ie(n)}this.data=n,this.type=s,this.stride=ez(s),this.numChildren=null!=(r=null==(i=s.children)?void 0:i.length)?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,t)=>e+t.byteLength,0)}get nullable(){return this.data.some(e=>e.nullable)}get nullCount(){return t7(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${nj[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(t4(e,this.length))}set(e,t){}indexOf(e,t){return -1}includes(e,t){return this.indexOf(e,t)>-1}[Symbol.iterator](){return iN.visit(this)}concat(...e){return new iT(this.data.concat(e.flatMap(e=>e.data).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new iT(t2(this,e,t,({data:e,_offsets:t},i,r)=>it(e,t,i,r)))}toJSON(){return[...this]}toArray(){let{type:e,data:t,length:i,stride:r,ArrayType:n}=this;switch(e.typeId){case nj.Int:case nj.Float:case nj.Decimal:case nj.Time:case nj.Timestamp:switch(t.length){case 0:return new n;case 1:return t[0].values.subarray(0,i*r);default:return t.reduce((e,{values:t,length:i})=>(e.array.set(t.subarray(0,i*r),e.offset),e.offset+=i*r,e),{array:new n(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt(null==(t=this.type.children)?void 0:t.findIndex(t=>t.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new iT(this.data.map(({children:t})=>t[e])):null}get isMemoized(){return!!eb.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(eb.isDictionary(this.type)){let e=new ix(this.data[0].dictionary);return new iT(this.data.map(t=>{let i=t.clone();return i.dictionary=e,i}))}return new ix(this)}unmemoize(){if(eb.isDictionary(this.type)&&this.isMemoized){let e=this.data[0].dictionary.unmemoize();return new iT(this.data.map(t=>{let i=t.clone();return i.dictionary=e,i}))}return this}}iT[Symbol.toStringTag]=(e=>{for(let t of(e.type=eb.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0,Object.keys(nj).map(e=>nj[e]).filter(e=>"number"==typeof e&&e!==nj.NONE))){let i=tJ.getVisitFnByTypeId(t),r=tm.getVisitFnByTypeId(t),n=ib.getVisitFnByTypeId(t);iI[t]={get:i,set:r,indexOf:n},iS[t]=Object.create(e,{isValid:{value:is(ir)},get:{value:is(tJ.getVisitFnByTypeId(t))},set:{value:io(tm.getVisitFnByTypeId(t))},indexOf:{value:ia(ib.getVisitFnByTypeId(t))}})}return"Vector"})(iT.prototype);class ix extends iT{constructor(e){super(e.data);let t=this.get,i=this.set,r=this.slice,n=Array(this.length);Object.defineProperty(this,"get",{value(e){let i=n[e];if(void 0!==i)return i;let r=t.call(this,e);return n[e]=r,r}}),Object.defineProperty(this,"set",{value(e,t){i.call(this,e,t),n[e]=t}}),Object.defineProperty(this,"slice",{value:(e,t)=>new ix(r.call(this,e,t))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new iT(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class iO{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(0!==this._nullCount){let{type:e}=this;return eb.isSparseUnion(e)?this.children.some(e=>e.nullable):eb.isDenseUnion(e)?this.children.some(e=>e.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0,{valueOffsets:t,values:i,nullBitmap:r,typeIds:n}=this;return t&&(e+=t.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),n&&(e+=n.byteLength),this.children.reduce((e,t)=>e+t.byteLength,e)}get nullCount(){let e;if(eb.isUnion(this.type))return this.children.reduce((e,t)=>e+t.nullCount,0);let t=this._nullCount;return t<=-1&&(e=this.nullBitmap)&&(this._nullCount=t=0===e.length?0:this.length-function e(t,i,r){if(r-i<=0)return 0;if(r-i<8){let e=0;for(let n of new ih(t,i,r-i,t,id))e+=n;return e}let n=r>>3<<3,s=i+(i%8==0?0:8-i%8);return e(t,i,s)+e(t,n,r)+function(e,t,i){let r=0,n=Math.trunc(t),s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=void 0===i?e.byteLength:n+i;for(;o-n>=4;)r+=ip(s.getUint32(n)),n+=4;for(;o-n>=2;)r+=ip(s.getUint16(n)),n+=2;for(;o-n>=1;)r+=ip(s.getUint8(n)),n+=1;return r}(t,s>>3,n-s>>3)}(e,this.offset,this.offset+this.length)),t}constructor(e,t,i,r,n,s=[],o){let a;this.type=e,this.children=s,this.dictionary=o,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1)),n instanceof iO?(this.stride=n.stride,this.values=n.values,this.typeIds=n.typeIds,this.nullBitmap=n.nullBitmap,this.valueOffsets=n.valueOffsets):(this.stride=ez(e),n&&((a=n[0])&&(this.valueOffsets=a),(a=n[1])&&(this.values=a),(a=n[2])&&(this.nullBitmap=a),(a=n[3])&&(this.typeIds=a)))}getValid(e){let{type:t}=this;if(eb.isUnion(t)){let i=this.children[t.typeIdToChildIndex[this.typeIds[e]]],r=t.mode===nK.Dense?this.valueOffsets[e]:e;return i.getValid(r)}if(this.nullable&&this.nullCount>0){let t=this.offset+e;return(this.nullBitmap[t>>3]&1<<t%8)!=0}return!0}setValid(e,t){let i,{type:r}=this;if(eb.isUnion(r)){let n=this.children[r.typeIdToChildIndex[this.typeIds[e]]],s=r.mode===nK.Dense?this.valueOffsets[e]:e;i=n.getValid(s),n.setValid(s,t)}else{let{nullBitmap:r}=this,{offset:n,length:s}=this,o=n+e,a=1<<o%8,l=o>>3;(!r||r.byteLength<=l)&&(r=new Uint8Array((n+s+63&-64)>>3).fill(255),this.nullCount>0?(r.set(iu(n,s,this.nullBitmap),0),Object.assign(this,{nullBitmap:r})):Object.assign(this,{nullBitmap:r,_nullCount:0}));let d=r[l];i=(d&a)!=0,r[l]=t?d|a:d&~a}return!!t!==i&&(this._nullCount=this.nullCount+(t?-1:1)),t}clone(e=this.type,t=this.offset,i=this.length,r=this._nullCount,n=this,s=this.children){return new iO(e,t,i,r,n,s,this.dictionary)}slice(e,t){let{stride:i,typeId:r,children:n}=this,s=(0===this._nullCount)-1,o=16===r?i:1,a=this._sliceBuffers(e,t,i,r);return this.clone(this.type,this.offset+e,t,s,a,0===n.length||this.valueOffsets?n:this._sliceChildren(n,o*e,o*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===nj.Null)return this.clone(this.type,0,e,0);let{length:t,nullCount:i}=this,r=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);r[t>>3]=(1<<t-(-8&t))-1,i>0&&r.set(iu(this.offset,t,this.nullBitmap),0);let n=this.buffers;return n[n$.VALIDITY]=r,this.clone(this.type,0,e,i+(e-t),n)}_sliceBuffers(e,t,i,r){let n,{buffers:s}=this;return(n=s[n$.TYPE])&&(s[n$.TYPE]=n.subarray(e,e+t)),(n=s[n$.OFFSET])&&(s[n$.OFFSET]=n.subarray(e,e+t+1))||(n=s[n$.DATA])&&(s[n$.DATA]=6===r?n:n.subarray(i*e,i*(e+t))),s}_sliceChildren(e,t,i){return e.map(e=>e.slice(t,i))}}iO.prototype.children=Object.freeze([]);class iE extends eq{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){let{type:t,offset:i=0,length:r=0}=e;return new iO(t,i,r,r)}visitBool(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length>>3,nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitInt(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length,nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitFloat(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length,nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitUtf8(e){let{type:t,offset:i=0}=e,r=et(e.data),n=et(e.nullBitmap),s=X(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new iO(t,i,o,a,[s,r,n])}visitLargeUtf8(e){let{type:t,offset:i=0}=e,r=et(e.data),n=et(e.nullBitmap),s=ee(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new iO(t,i,o,a,[s,r,n])}visitBinary(e){let{type:t,offset:i=0}=e,r=et(e.data),n=et(e.nullBitmap),s=X(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new iO(t,i,o,a,[s,r,n])}visitLargeBinary(e){let{type:t,offset:i=0}=e,r=et(e.data),n=et(e.nullBitmap),s=ee(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new iO(t,i,o,a,[s,r,n])}visitFixedSizeBinary(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitDate(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitTimestamp(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitTime(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitDecimal(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitList(e){let{type:t,offset:i=0,child:r}=e,n=et(e.nullBitmap),s=X(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new iO(t,i,o,a,[s,void 0,n],[r])}visitStruct(e){let{type:t,offset:i=0,children:r=[]}=e,n=et(e.nullBitmap),{length:s=r.reduce((e,{length:t})=>Math.max(e,t),0),nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,void 0,n],r)}visitUnion(e){let{type:t,offset:i=0,children:r=[]}=e,n=H(t.ArrayType,e.typeIds),{length:s=n.length,nullCount:o=-1}=e;return eb.isSparseUnion(t)?new iO(t,i,s,o,[void 0,void 0,void 0,n],r):new iO(t,i,s,o,[X(e.valueOffsets),void 0,void 0,n],r)}visitDictionary(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.indices.ArrayType,e.data),{dictionary:s=new iT([new iE().visit({type:t.dictionary})])}=e,{length:o=n.length,nullCount:a=e.nullBitmap?-1:0}=e;return new iO(t,i,o,a,[void 0,n,r],[],s)}visitInterval(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitDuration(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length,nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,n,r])}visitFixedSizeList(e){let{type:t,offset:i=0,child:r=new iE().visit({type:t.valueType})}=e,n=et(e.nullBitmap),{length:s=r.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new iO(t,i,s,o,[void 0,void 0,n],[r])}visitMap(e){let{type:t,offset:i=0,child:r=new iE().visit({type:t.childType})}=e,n=et(e.nullBitmap),s=X(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new iO(t,i,o,a,[s,void 0,n],[r])}}let ik=new iE;function iA(e){return ik.visit(e)}(sI=nY||(nY={}))[sI.NONE=0]="NONE",sI[sI.Schema=1]="Schema",sI[sI.DictionaryBatch=2]="DictionaryBatch",sI[sI.RecordBatch=3]="RecordBatch",sI[sI.Tensor=4]="Tensor",sI[sI.SparseTensor=5]="SparseTensor";class iD{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,i,r){return e.prep(8,24),e.writeInt64(BigInt(null!=r?r:0)),e.pad(4),e.writeInt32(i),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}}let iC=new Int32Array(2),iB=new Float32Array(iC.buffer),iV=new Float64Array(iC.buffer),iF=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];(sS=nH||(nH={}))[sS.UTF8_BYTES=1]="UTF8_BYTES",sS[sS.UTF16_STRING=2]="UTF16_STRING";class iR{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new iR(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return iC["0"]=this.readInt32(e),iB["0"]}readFloat64(e){return iC[+!iF]=this.readInt32(e),iC[+!!iF]=this.readInt32(e+4),iV["0"]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){iB["0"]=t,this.writeInt32(e,iC["0"])}writeFloat64(e,t){iV["0"]=t,this.writeInt32(e,iC[+!iF]),this.writeInt32(e+4,iC[+!!iF])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<4;t++)e+=String.fromCharCode(this.readInt8(this.position_+4+t));return e}__offset(e,t){let i=e-this.readInt32(e);return t<this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);let i=this.readInt32(e);e+=4;let r=this.bytes_.subarray(e,e+i);return t===nH.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+4}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(4!=e.length)throw Error("FlatBuffers: file identifier must be length 4");for(let t=0;t<4;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+4+t))return!1;return!0}createScalarList(e,t){let i=[];for(let r=0;r<t;++r){let t=e(r);null!==t&&i.push(t)}return i}createObjList(e,t){let i=[];for(let r=0;r<t;++r){let t=e(r);null!==t&&i.push(t.unpack())}return i}}class iL{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=iR.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);let i=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<i+e+t;){let e=this.bb.capacity();this.bb=iL.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(i)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){(this.force_defaults||t!==i)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){let t=e.capacity();if(0xc0000000&t)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let i=t<<1,r=iR.allocate(i);return r.setPosition(i-t),r.bytes().set(e.bytes(),i-t),r}addOffset(e){this.prep(4,0),this.writeInt32(this.offset()-e+4)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let e=this.offset(),t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);let i=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);let r=(i+2)*2;this.addInt16(r);let n=0,s=this.space;e:for(t=0;t<this.vtables.length;t++){let e=this.bb.capacity()-this.vtables[t];if(r==this.bb.readInt16(e)){for(let t=2;t<r;t+=2)if(this.bb.readInt16(s+t)!=this.bb.readInt16(e+t))continue e;n=this.vtables[t];break}}return n?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,n-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){let r=4*!!i;if(t){if(this.prep(this.minalign,8+r),4!=t.length)throw TypeError("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){let i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(t<this.bb.readInt16(r)&&0!=this.bb.readInt16(r+t)))throw TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(4,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);let t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){let t;return null==e?0:(t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createByteVector(e){return null==e?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){let t=[];for(let i=0;i<e.length;++i){let r=e[i];if(null!==r)t.push(this.createObjectOffset(r));else throw TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}class iP{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new iP).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+4),(t||new iP).__init(e.readInt32(e.position())+e.position(),e)}key(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,i){return iP.startKeyValue(e),iP.addKey(e,t),iP.addValue(e,i),iP.endKeyValue(e)}}(sT=nX||(nX={}))[sT.V1=0]="V1",sT[sT.V2=1]="V2",sT[sT.V3=2]="V3",sT[sT.V4=3]="V4",sT[sT.V5=4]="V5",(sx=n0||(n0={}))[sx.Little=0]="Little",sx[sx.Big=1]="Big",(sO=n1||(n1={}))[sO.DenseArray=0]="DenseArray";class iM{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new iM).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+4),(t||new iM).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){let e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,i){return iM.startInt(e),iM.addBitWidth(e,t),iM.addIsSigned(e,i),iM.endInt(e)}}class iU{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new iU).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+4),(t||new iU).__init(e.readInt32(e.position())+e.position(),e)}id(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new iM).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){let e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}dictionaryKind(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):n1.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,n1.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}(sE=n2||(n2={}))[sE.NONE=0]="NONE",sE[sE.Null=1]="Null",sE[sE.Int=2]="Int",sE[sE.FloatingPoint=3]="FloatingPoint",sE[sE.Binary=4]="Binary",sE[sE.Utf8=5]="Utf8",sE[sE.Bool=6]="Bool",sE[sE.Decimal=7]="Decimal",sE[sE.Date=8]="Date",sE[sE.Time=9]="Time",sE[sE.Timestamp=10]="Timestamp",sE[sE.Interval=11]="Interval",sE[sE.List=12]="List",sE[sE.Struct_=13]="Struct_",sE[sE.Union=14]="Union",sE[sE.FixedSizeBinary=15]="FixedSizeBinary",sE[sE.FixedSizeList=16]="FixedSizeList",sE[sE.Map=17]="Map",sE[sE.Duration=18]="Duration",sE[sE.LargeBinary=19]="LargeBinary",sE[sE.LargeUtf8=20]="LargeUtf8",sE[sE.LargeList=21]="LargeList",sE[sE.RunEndEncoded=22]="RunEndEncoded";class iW{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new iW).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+4),(t||new iW).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){let e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}typeType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):n2.NONE}type(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){let t=this.bb.__offset(this.bb_pos,12);return t?(e||new iU).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(e,t){let i=this.bb.__offset(this.bb_pos,14);return i?(t||new iW).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){let i=this.bb.__offset(this.bb_pos,16);return i?(t||new iP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,n2.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}}class iz{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new iz).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+4),(t||new iz).__init(e.readInt32(e.position())+e.position(),e)}endianness(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n0.Little}fields(e,t){let i=this.bb.__offset(this.bb_pos,6);return i?(t||new iW).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}fieldsLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){let i=this.bb.__offset(this.bb_pos,8);return i?(t||new iP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}featuresLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,n0.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let i=t.length-1;i>=0;i--)e.addInt64(t[i]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(e,t,i,r,n){return iz.startSchema(e),iz.addEndianness(e,t),iz.addFields(e,i),iz.addCustomMetadata(e,r),iz.addFeatures(e,n),iz.endSchema(e)}}class iq{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new iq).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+4),(t||new iq).__init(e.readInt32(e.position())+e.position(),e)}version(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nX.V1}schema(e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new iz).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){let i=this.bb.__offset(this.bb_pos,8);return i?(t||new iD).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}dictionariesLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){let i=this.bb.__offset(this.bb_pos,10);return i?(t||new iD).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}recordBatchesLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){let i=this.bb.__offset(this.bb_pos,12);return i?(t||new iP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,nX.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}class ij{constructor(e=[],t,i,r=nX.V5){this.fields=e||[],this.metadata=t||new Map,i||(i=iZ(this.fields)),this.dictionaries=i,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,t)=>`${t}: ${e}`).join(", ")} }>`}select(e){let t=new Set(e);return new ij(this.fields.filter(e=>t.has(e.name)),this.metadata)}selectAt(e){return new ij(e.map(e=>this.fields[e]).filter(Boolean),this.metadata)}assign(...e){let t=e[0]instanceof ij?e[0]:new ij(Array.isArray(e[0])?e[0]:e),i=[...this.fields],r=iQ(iQ(new Map,this.metadata),t.metadata),n=t.fields.filter(e=>{let t=i.findIndex(t=>t.name===e.name);return!~t||(i[t]=e.clone({metadata:iQ(iQ(new Map,i[t].metadata),e.metadata)}))&&!1}),s=iZ(n,new Map);return new ij([...i,...n],r,new Map([...this.dictionaries,...s]))}}ij.prototype.fields=null,ij.prototype.metadata=null,ij.prototype.dictionaries=null;class i${static new(...e){let[t,i,r,n]=e;return e[0]&&"object"==typeof e[0]&&({name:t}=e[0],void 0===i&&(i=e[0].type),void 0===r&&(r=e[0].nullable),void 0===n&&(n=e[0].metadata)),new i$(`${t}`,i,r,n)}constructor(e,t,i=!1,r){this.name=e,this.type=t,this.nullable=i,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[t,i,r,n]=e;return e[0]&&"object"==typeof e[0]?{name:t=this.name,type:i=this.type,nullable:r=this.nullable,metadata:n=this.metadata}=e[0]:[t=this.name,i=this.type,r=this.nullable,n=this.metadata]=e,i$.new(t,i,r,n)}}function iQ(e,t){return new Map([...e||new Map,...t||new Map])}function iZ(e,t=new Map){for(let i=-1,r=e.length;++i<r;){let r=e[i].type;if(eb.isDictionary(r))if(t.has(r.id)){if(t.get(r.id)!==r.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id")}else t.set(r.id,r.dictionary);r.children&&r.children.length>0&&iZ(r.children,t)}return t}i$.prototype.type=null,i$.prototype.name=null,i$.prototype.nullable=null,i$.prototype.metadata=null;class iJ{static decode(e){e=new iR(et(e));let t=iq.getRootAsFooter(e);return new iG(ij.decode(t.schema(),new Map,t.version()),t)}static encode(e){let t=new iL,i=ij.encode(t,e.schema);for(let i of(iq.startRecordBatchesVector(t,e.numRecordBatches),[...e.recordBatches()].slice().reverse()))iK.encode(t,i);let r=t.endVector();for(let i of(iq.startDictionariesVector(t,e.numDictionaries),[...e.dictionaryBatches()].slice().reverse()))iK.encode(t,i);let n=t.endVector();return iq.startFooter(t),iq.addSchema(t,i),iq.addVersion(t,nX.V5),iq.addRecordBatches(t,r),iq.addDictionaries(t,n),iq.finishFooterBuffer(t,iq.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,t=nX.V5,i,r){this.schema=e,this.version=t,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let e,t=-1,i=this.numRecordBatches;++t<i;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,i=this.numDictionaries;++t<i;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class iG extends iJ{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,t){super(e,t.version()),this._footer=t}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){let t=this._footer.recordBatches(e);if(t)return iK.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){let t=this._footer.dictionaries(e);if(t)return iK.decode(t)}return null}}class iK{static decode(e){return new iK(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){let{metaDataLength:i}=t,r=BigInt(t.offset),n=BigInt(t.bodyLength);return iD.createBlock(e,r,i,n)}constructor(e,t,i){this.metaDataLength=e,this.offset=eo(i),this.bodyLength=eo(t)}}let iY={fromIterable:e=>iH(function*(e){let t,i=!1,r=[],n,s,o,a=0;({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});let l=er(e)[Symbol.iterator]();try{do if({done:t,value:n}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&n.byteLength>0&&(r.push(n),a+=n.byteLength),t||o<=a)do({cmd:s,size:o}=yield"peek"===s?Y(r,o)[0]:([n,r,a]=Y(r,o),n));while(o<a);while(!t)}catch(e){i=!0,"function"==typeof l.throw&&l.throw(e)}finally{!1===i&&"function"==typeof l.return&&l.return(null)}return null}(e)),fromAsyncIterable:e=>iH(function(e){return I(this,arguments,function*(){let t,i=!1,r=[],n,s,o,a=0;({cmd:s,size:o}=(yield yield N(null))||{cmd:"read",size:0});let l=en(e)[Symbol.asyncIterator]();try{do if({done:t,value:n}=Number.isNaN(o-a)?yield N(l.next()):yield N(l.next(o-a)),!t&&n.byteLength>0&&(r.push(n),a+=n.byteLength),t||o<=a)do({cmd:s,size:o}=yield yield N("peek"===s?Y(r,o)[0]:([n,r,a]=Y(r,o),n)));while(o<a);while(!t)}catch(e){i=!0,"function"==typeof l.throw&&(yield N(l.throw(e)))}finally{!1===i&&"function"==typeof l.return&&(yield N(l.return(new Uint8Array(0))))}return yield N(null)})}(e)),fromDOMStream:e=>iH(function(e){return I(this,arguments,function*(){let t=!1,i=!1,r=[],n,s,o,a=0;({cmd:s,size:o}=(yield yield N(null))||{cmd:"read",size:0});let l=new iX(e);try{do if({done:t,value:n}=Number.isNaN(o-a)?yield N(l.read()):yield N(l.read(o-a)),!t&&n.byteLength>0&&(r.push(et(n)),a+=n.byteLength),t||o<=a)do({cmd:s,size:o}=yield yield N("peek"===s?Y(r,o)[0]:([n,r,a]=Y(r,o),n)));while(o<a);while(!t)}catch(e){i=!0,yield N(l.cancel(e))}finally{!1===i?yield N(l.cancel()):e.locked&&l.releaseLock()}return yield N(null)})}(e)),fromNodeStream:e=>iH(function(e){return I(this,arguments,function*(){let t=[],i="error",r=!1,n=null,s,o,a=0,l=[],d;if({cmd:s,size:o}=(yield yield N(null))||{cmd:"read",size:0},e.isTTY)return yield yield N(new Uint8Array(0)),yield N(null);try{t[0]=i0(e,"end"),t[1]=i0(e,"error");do{if(t[2]=i0(e,"readable"),[i,n]=yield N(Promise.race(t.map(e=>e[2]))),"error"===i)break;if((r="end"===i)||(Number.isFinite(o-a)?(d=et(e.read(o-a))).byteLength<o-a&&(d=et(e.read())):d=et(e.read()),d.byteLength>0&&(l.push(d),a+=d.byteLength)),r||o<=a)do({cmd:s,size:o}=yield yield N("peek"===s?Y(l,o)[0]:([d,l,a]=Y(l,o),d)));while(o<a)}while(!r)}finally{var u,c;yield N((u=t,c="error"===i?n:null,d=l=null,new Promise((t,i)=>{for(let[t,i]of u)e.off(t,i);try{let t=e.destroy;t&&t.call(e,c),c=void 0}catch(e){c=e||c}finally{null!=c?i(c):t()}})))}return yield N(null)})}(e)),toDOMStream(e,t){throw Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw Error('"toNodeStream" not available in this environment')}},iH=e=>(e.next(),e);class iX{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return _(this,void 0,void 0,function*(){let{reader:t,source:i}=this;t&&(yield t.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return _(this,void 0,void 0,function*(){if(0===e)return{done:null==this.reader,value:new Uint8Array(0)};let t=yield this.reader.read();return t.done||(t.value=et(t)),t})}}let i0=(e,t)=>{let i,r=e=>i([t,e]);return[t,r,new Promise(n=>(i=n)&&e.once(t,r))]},i1=Object.freeze({done:!0,value:void 0});class i2{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class i4{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class i8 extends i4{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return _(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){let{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(i1);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return iY.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return iY.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return _(this,void 0,void 0,function*(){return yield this.abort(e),i1})}return(e){return _(this,void 0,void 0,function*(){return yield this.close(),i1})}read(e){return _(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return _(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((e,t)=>{this.resolvers.push({resolve:e,reject:t})}):Promise.resolve(i1)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw Error("AsyncQueue is closed")}}class i3 extends i8{write(e){if((e=et(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?k(this.toUint8Array(!0)):this.toUint8Array(!1).then(k)}toUint8Array(e=!1){return e?Y(this._values)[0]:_(this,void 0,void 0,function*(){var e,t,i,r;let n=[],s=0;try{for(var o,a=!0,l=T(this);!(e=(o=yield l.next()).done);a=!0)r=o.value,a=!1,n.push(r),s+=r.byteLength}catch(e){t={error:e}}finally{try{!a&&!e&&(i=l.return)&&(yield i.call(l))}finally{if(t)throw t.error}}return Y(n,s)[0]})}}class i6{constructor(e){e&&(this.source=new i9(iY.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class i5{constructor(e){e instanceof i5?this.source=e.source:e instanceof i3?this.source=new i7(iY.fromAsyncIterable(e)):Z(e)?this.source=new i7(iY.fromNodeStream(e)):$(e)?this.source=new i7(iY.fromDOMStream(e)):z(e)?this.source=new i7(iY.fromDOMStream(e.body)):L(e)?this.source=new i7(iY.fromIterable(e)):R(e)?this.source=new i7(iY.fromAsyncIterable(e)):P(e)&&(this.source=new i7(iY.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class i9{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,t="read"){return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||i1)}return(e){return Object.create(this.source.return&&this.source.return(e)||i1)}}class i7{constructor(e){this.source=e,this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}cancel(e){return _(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return _(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return _(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return _(this,arguments,void 0,function*(e,t="read"){return yield this.source.next({cmd:t,size:e})})}throw(e){return _(this,void 0,void 0,function*(){let t=this.source.throw&&(yield this.source.throw(e))||i1;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}return(e){return _(this,void 0,void 0,function*(){let t=this.source.return&&(yield this.source.return(e))||i1;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}}class re extends i6{constructor(e,t){super(),this.position=0,this.buffer=et(e),this.size=void 0===t?this.buffer.byteLength:t}readInt32(e){let{buffer:t,byteOffset:i}=this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){let{buffer:t,size:i,position:r}=this;return t&&r<i?("number"!=typeof e&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,e)),t.subarray(r,this.position)):null}readAt(e,t){let i=this.buffer,r=Math.min(this.size,e+t);return i?i.subarray(e,r):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class rt extends i5{constructor(e,t){super(),this.position=0,this._handle=e,"number"==typeof t?this.size=t:this._pending=_(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return _(this,void 0,void 0,function*(){let{buffer:t,byteOffset:i}=yield this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)})}seek(e){return _(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return _(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:t,size:i,position:r}=this;if(t&&r<i){"number"!=typeof e&&(e=Number.POSITIVE_INFINITY);let n=r,s=0,o=0,a=Math.min(i,n+Math.min(i-n,e)),l=new Uint8Array(Math.max(0,(this.position=a)-n));for(;(n+=o)<a&&(s+=o)<l.byteLength;)({bytesRead:o}=yield t.read(l,s,l.byteLength-s,n));return l}return null})}readAt(e,t){return _(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:i,size:r}=this;if(i&&e+t<r){let n=new Uint8Array(Math.min(r,e+t)-e);return(yield i.read(n,0,t,e)).buffer}return new Uint8Array(t)})}close(){return _(this,void 0,void 0,function*(){let e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return _(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return _(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}function ri(e){return e<0&&(e=0xffffffff+e+1),`0x${e.toString(16)}`}let rr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class rn{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){let t=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),i=new Uint32Array([e.buffer[1]>>>16,65535&e.buffer[1],e.buffer[0]>>>16,65535&e.buffer[0]]),r=t[3]*i[3];this.buffer[0]=65535&r;let n=r>>>16;return n+=(r=t[2]*i[3])+(r=t[3]*i[2]>>>0),this.buffer[0]+=n<<16,this.buffer[1]=65536*(n>>>0<r),this.buffer[1]+=n>>>16,this.buffer[1]+=t[1]*i[3]+t[2]*i[2]+t[3]*i[1],this.buffer[1]+=t[0]*i[3]+t[1]*i[2]+t[2]*i[1]+t[3]*i[0]<<16,this}_plus(e){let t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${ri(this.buffer[1])} ${ri(this.buffer[0])}`}}class rs extends rn{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,t=new Uint32Array(2)){return rs.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return rs.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){let i=e.length,r=new rs(t);for(let t=0;t<i;){let n=8<i-t?8:i-t,s=new rs(new Uint32Array([Number.parseInt(e.slice(t,t+n),10),0])),o=new rs(new Uint32Array([rr[n],0]));r.times(o),r.plus(s),t+=n}return r}static convertArray(e){let t=new Uint32Array(2*e.length);for(let i=-1,r=e.length;++i<r;)rs.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new rs(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new rs(new Uint32Array(e.buffer)).plus(t)}}class ro extends rn{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){let t=0|this.buffer[1],i=0|e.buffer[1];return t<i||t===i&&this.buffer[0]<e.buffer[0]}static from(e,t=new Uint32Array(2)){return ro.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return ro.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){let i=e.startsWith("-"),r=e.length,n=new ro(t);for(let t=+!!i;t<r;){let i=8<r-t?8:r-t,s=new ro(new Uint32Array([Number.parseInt(e.slice(t,t+i),10),0])),o=new ro(new Uint32Array([rr[i],0]));n.times(o),n.plus(s),t+=i}return i?n.negate():n}static convertArray(e){let t=new Uint32Array(2*e.length);for(let i=-1,r=e.length;++i<r;)ro.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new ro(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new ro(new Uint32Array(e.buffer)).plus(t)}}class ra{constructor(e){this.buffer=e}high(){return new ro(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ro(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(e){let t=new rs(new Uint32Array([this.buffer[3],0])),i=new rs(new Uint32Array([this.buffer[2],0])),r=new rs(new Uint32Array([this.buffer[1],0])),n=new rs(new Uint32Array([this.buffer[0],0])),s=new rs(new Uint32Array([e.buffer[3],0])),o=new rs(new Uint32Array([e.buffer[2],0])),a=new rs(new Uint32Array([e.buffer[1],0])),l=new rs(new Uint32Array([e.buffer[0],0])),d=rs.multiply(n,l);this.buffer[0]=d.low();let u=new rs(new Uint32Array([d.high(),0]));return d=rs.multiply(r,l),u.plus(d),d=rs.multiply(n,a),u.plus(d),this.buffer[1]=u.low(),this.buffer[3]=+!!u.lessThan(d),this.buffer[2]=u.high(),new rs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(rs.multiply(i,l)).plus(rs.multiply(r,a)).plus(rs.multiply(n,o)),this.buffer[3]+=rs.multiply(t,l).plus(rs.multiply(i,a)).plus(rs.multiply(r,o)).plus(rs.multiply(n,s)).low(),this}plus(e){let t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${ri(this.buffer[3])} ${ri(this.buffer[2])} ${ri(this.buffer[1])} ${ri(this.buffer[0])}`}static multiply(e,t){return new ra(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new ra(new Uint32Array(e.buffer)).plus(t)}static from(e,t=new Uint32Array(4)){return ra.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(4)){return ra.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(4)){let i=e.startsWith("-"),r=e.length,n=new ra(t);for(let t=+!!i;t<r;){let i=8<r-t?8:r-t,s=new ra(new Uint32Array([Number.parseInt(e.slice(t,t+i),10),0,0,0])),o=new ra(new Uint32Array([rr[i],0,0,0]));n.times(o),n.plus(s),t+=i}return i?n.negate():n}static convertArray(e){let t=new Uint32Array(4*e.length);for(let i=-1,r=e.length;++i<r;)ra.from(e[i],new Uint32Array(t.buffer,t.byteOffset+16*i,4));return t}}class rl extends eq{constructor(e,t,i,r,n=nX.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=i,this.dictionaries=r,this.metadataVersion=n}visit(e){return super.visit(e instanceof i$?e.type:e)}visitNull(e,{length:t}=this.nextFieldNode()){return iA({type:e,length:t})}visitBool(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e,{length:t,nullCount:i}=this.nextFieldNode()){return this.metadataVersion<nX.V5&&this.readNullBitmap(e,i),e.mode===nK.Sparse?this.visitSparseUnion(e,{length:t,nullCount:i}):this.visitDenseUnion(e,{length:t,nullCount:i})}visitDenseUnion(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDuration(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:t,nullCount:i}=this.nextFieldNode()){return iA({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t,i=this.nextBufferRange()){return t>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e,{length:t,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class rd extends rl{constructor(e,t,i,r,n){super(new Uint8Array(0),t,i,r,n),this.sources=e}readNullBitmap(e,t,{offset:i}=this.nextBufferRange()){return t<=0?new Uint8Array(0):ic(this.sources[i])}readOffsets(e,{offset:t}=this.nextBufferRange()){return H(Uint8Array,H(e.OffsetArrayType,this.sources[t]))}readTypeIds(e,{offset:t}=this.nextBufferRange()){return H(Uint8Array,H(e.ArrayType,this.sources[t]))}readData(e,{offset:t}=this.nextBufferRange()){let{sources:i}=this;if(eb.isTimestamp(e)||(eb.isInt(e)||eb.isTime(e))&&64===e.bitWidth||eb.isDuration(e))return H(Uint8Array,ro.convertArray(i[t]));if(eb.isDate(e)&&e.unit===nJ.MILLISECOND)return H(Uint8Array,ro.convertArray(i[t]));if(eb.isDecimal(e))return H(Uint8Array,ra.convertArray(i[t]));if(eb.isBinary(e)||eb.isLargeBinary(e)||eb.isFixedSizeBinary(e))return function(e){let t=e.join(""),i=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)i[e>>1]=Number.parseInt(t.slice(e,e+2),16);return i}(i[t]);else if(eb.isBool(e))return ic(i[t]);else if(eb.isUtf8(e)||eb.isLargeUtf8(e))return D(i[t].join(""));return H(Uint8Array,H(e.ArrayType,i[t].map(e=>+e)))}}class ru extends eq{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((e,i)=>this.compareFields(e,t[i]))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function rc(e,t){return t instanceof e.constructor}function rh(e,t){return e===t||rc(e,t)}function rp(e,t){return e===t||rc(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function rf(e,t){return e===t||rc(e,t)&&e.precision===t.precision}function ry(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function rm(e,t){return e===t||rc(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function rg(e,t){return e===t||rc(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function rb(e,t){return e===t||rc(e,t)&&e.mode===t.mode&&e.typeIds.every((e,i)=>e===t.typeIds[i])&&r_.compareManyFields(e.children,t.children)}function rv(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function rw(e,t){return e===t||rc(e,t)&&e.unit===t.unit}ru.prototype.visitNull=rh,ru.prototype.visitBool=rh,ru.prototype.visitInt=rp,ru.prototype.visitInt8=rp,ru.prototype.visitInt16=rp,ru.prototype.visitInt32=rp,ru.prototype.visitInt64=rp,ru.prototype.visitUint8=rp,ru.prototype.visitUint16=rp,ru.prototype.visitUint32=rp,ru.prototype.visitUint64=rp,ru.prototype.visitFloat=rf,ru.prototype.visitFloat16=rf,ru.prototype.visitFloat32=rf,ru.prototype.visitFloat64=rf,ru.prototype.visitUtf8=rh,ru.prototype.visitLargeUtf8=rh,ru.prototype.visitBinary=rh,ru.prototype.visitLargeBinary=rh,ru.prototype.visitFixedSizeBinary=function(e,t){return e===t||rc(e,t)&&e.byteWidth===t.byteWidth},ru.prototype.visitDate=ry,ru.prototype.visitDateDay=ry,ru.prototype.visitDateMillisecond=ry,ru.prototype.visitTimestamp=rm,ru.prototype.visitTimestampSecond=rm,ru.prototype.visitTimestampMillisecond=rm,ru.prototype.visitTimestampMicrosecond=rm,ru.prototype.visitTimestampNanosecond=rm,ru.prototype.visitTime=rg,ru.prototype.visitTimeSecond=rg,ru.prototype.visitTimeMillisecond=rg,ru.prototype.visitTimeMicrosecond=rg,ru.prototype.visitTimeNanosecond=rg,ru.prototype.visitDecimal=rh,ru.prototype.visitList=function(e,t){return e===t||rc(e,t)&&e.children.length===t.children.length&&r_.compareManyFields(e.children,t.children)},ru.prototype.visitStruct=function(e,t){return e===t||rc(e,t)&&e.children.length===t.children.length&&r_.compareManyFields(e.children,t.children)},ru.prototype.visitUnion=rb,ru.prototype.visitDenseUnion=rb,ru.prototype.visitSparseUnion=rb,ru.prototype.visitDictionary=function(e,t){return e===t||rc(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&r_.visit(e.indices,t.indices)&&r_.visit(e.dictionary,t.dictionary)},ru.prototype.visitInterval=rv,ru.prototype.visitIntervalDayTime=rv,ru.prototype.visitIntervalYearMonth=rv,ru.prototype.visitDuration=rw,ru.prototype.visitDurationSecond=rw,ru.prototype.visitDurationMillisecond=rw,ru.prototype.visitDurationMicrosecond=rw,ru.prototype.visitDurationNanosecond=rw,ru.prototype.visitFixedSizeList=function(e,t){return e===t||rc(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&r_.compareManyFields(e.children,t.children)},ru.prototype.visitMap=function(e,t){return e===t||rc(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&r_.compareManyFields(e.children,t.children)};let r_=new ru;function rN(e,t){return r_.compareSchemas(e,t)}function rI(e,t){return function(e,t){let i=[...e.fields],r=[],n={numBatches:t.reduce((e,t)=>Math.max(e,t.length),0)},s=0,o=0,a=-1,l=t.length,d,u=[];for(;n.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)u[a]=d=t[a].shift(),o=Math.min(o,d?d.length:o);Number.isFinite(o)&&(u=function(e,t,i,r,n){var s;let o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){let l=i[a],d=null==l?void 0:l.length;if(d>=t)d===t?i[a]=l:(i[a]=l.slice(0,t),n.numBatches=Math.max(n.numBatches,r[a].unshift(l.slice(t,d-t))));else{let r=e[a];e[a]=r.clone({nullable:!0}),i[a]=null!=(s=null==l?void 0:l._changeLengthAndBackfillNullBitmap(t))?s:iA({type:r.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return i}(i,o,u,t,n),o>0&&(r[s++]=iA({type:new eF(i),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(i),r.map(t=>new rT(e,t))]}(e,t.map(e=>e.data.concat()))}class rS{constructor(...e){var t,i;let r,n;if(0===e.length)return this.batches=[],this.schema=new ij([]),this._offsets=[0],this;e[0]instanceof ij&&(r=e.shift()),e.at(-1)instanceof Uint32Array&&(n=e.pop());let s=e=>{if(e){if(e instanceof rT)return[e];else if(e instanceof rS)return e.batches;else if(e instanceof iO){if(e.type instanceof eF)return[new rT(new ij(e.type.children),e)]}else if(Array.isArray(e))return e.flatMap(e=>s(e));else if("function"==typeof e[Symbol.iterator])return[...e].flatMap(e=>s(e));else if("object"==typeof e){let t=Object.keys(e),i=t.map(t=>new iT([e[t]])),[,n]=rI(null!=r?r:new ij(t.map((e,t)=>new i$(String(e),i[t].type,i[t].nullable))),i);return 0===n.length?[new rT(e)]:n}}return[]},o=e.flatMap(e=>s(e));if(!((r=null!=(i=null!=r?r:null==(t=o[0])?void 0:t.schema)?i:new ij([]))instanceof ij))throw TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(let e of o){if(!(e instanceof rT))throw TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!rN(r,e.schema))throw TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=null!=n?n:ie(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,t)=>e+t.length,0)}get nullCount(){return -1===this._nullCount&&(this._nullCount=t7(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(t4(e,this.numRows))}set(e,t){}indexOf(e,t){return -1}[Symbol.iterator](){return this.batches.length>0?iN.visit(new iT(this.data)):[][Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(",\n  ")}
]`}concat(...e){let t=this.schema;return new rS(t,this.data.concat(e.flatMap(({data:e})=>e)).map(e=>new rT(t,e)))}slice(e,t){let i=this.schema;return[e,t]=t2({length:this.numRows},e,t),new rS(i,it(this.data,this._offsets,e,t).map(e=>new rT(i,e)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(t=>t.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){let t=this.data.map(t=>t.children[e]);if(0===t.length){let{type:i}=this.schema.fields[e],r=iA({type:i,length:0,nullCount:0});t.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new iT(t)}return null}setChild(e,t){var i;return this.setChildAt(null==(i=this.schema.fields)?void 0:i.findIndex(t=>t.name===e),t)}setChildAt(e,t){let i=this.schema,r=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new iT([iA({type:new ev,length:this.numRows})]));let n=i.fields.slice(),s=n[e].clone({type:t.type}),o=this.schema.fields.map((e,t)=>this.getChildAt(t));[n[e],o[e]]=[s,t],[i,r]=rI(i,o)}return new rS(i,r)}select(e){let t=this.schema.fields.reduce((e,t,i)=>e.set(t.name,i),new Map);return this.selectAt(e.map(e=>t.get(e)).filter(e=>e>-1))}selectAt(e){return new rS(this.schema.selectAt(e),this.batches.map(t=>t.selectAt(e)))}assign(e){let t=this.schema.fields,[i,r]=e.schema.fields.reduce((e,i,r)=>{let[n,s]=e,o=t.findIndex(e=>e.name===i.name);return~o?s[o]=r:n.push(r),e},[[],[]]);return new rS(...rI(this.schema.assign(e.schema),[...t.map((e,t)=>[t,r[t]]).map(([t,i])=>void 0===i?this.getChildAt(t):e.getChildAt(i)),...i.map(t=>e.getChildAt(t))].filter(Boolean)))}}rS[Symbol.toStringTag]=((sk=rS.prototype).schema=null,sk.batches=[],sk._offsets=new Uint32Array([0]),sk._nullCount=-1,sk[Symbol.isConcatSpreadable]=!0,sk.isValid=is(ir),sk.get=is(tJ.getVisitFn(nj.Struct)),sk.set=io(tm.getVisitFn(nj.Struct)),sk.indexOf=ia(ib.getVisitFn(nj.Struct)),"Table");class rT{constructor(...e){switch(e.length){case 2:if([this.schema]=e,!(this.schema instanceof ij)||([,this.data=iA({nullCount:0,type:new eF(this.schema.fields),children:this.schema.fields.map(e=>iA({type:e.type,nullCount:0}))})]=e,!(this.data instanceof iO)))throw TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=rx(this.schema,this.data.children);break;case 1:{let[t]=e,{fields:i,children:r,length:n}=Object.keys(t).reduce((e,i,r)=>(e.children[r]=t[i],e.length=Math.max(e.length,t[i].length),e.fields[r]=i$.new({name:i,type:t[i].type,nullable:!0}),e),{length:0,fields:[],children:[]}),s=new ij(i),o=iA({type:new eF(i),length:n,children:r,nullCount:0});[this.schema,this.data]=rx(s,o.children,n);break}default:throw TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=function e(t,i,r=new Map){var n,s;if((null!=(n=null==t?void 0:t.length)?n:0)>0&&(null==t?void 0:t.length)===(null==i?void 0:i.length))for(let n=-1,o=t.length;++n<o;){let{type:o}=t[n],a=i[n];for(let t of[a,...(null==(s=null==a?void 0:a.dictionary)?void 0:s.data)||[]])e(o.children,null==t?void 0:t.children,r);if(eb.isDictionary(o)){let{id:e}=o;if(r.has(e)){if(r.get(e)!==a.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id")}else(null==a?void 0:a.dictionary)&&r.set(e,a.dictionary)}}return r}(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return tJ.visit(this.data,e)}at(e){return this.get(t4(e,this.numRows))}set(e,t){return tm.visit(this.data,e,t)}indexOf(e,t){return ib.visit(this.data,e,t)}[Symbol.iterator](){return iN.visit(new iT([this.data]))}toArray(){return[...this]}concat(...e){return new rS(this.schema,[this,...e])}slice(e,t){let[i]=new iT([this.data]).slice(e,t).data;return new rT(this.schema,i)}getChild(e){var t;return this.getChildAt(null==(t=this.schema.fields)?void 0:t.findIndex(t=>t.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new iT([this.data.children[e]]):null}setChild(e,t){var i;return this.setChildAt(null==(i=this.schema.fields)?void 0:i.findIndex(t=>t.name===e),t)}setChildAt(e,t){let i=this.schema,r=this.data;if(e>-1&&e<this.numCols){t||(t=new iT([iA({type:new ev,length:this.numRows})]));let n=i.fields.slice(),s=r.children.slice(),o=n[e].clone({type:t.type});[n[e],s[e]]=[o,t.data[0]],i=new ij(n,new Map(this.schema.metadata)),r=iA({type:new eF(n),children:s})}return new rT(i,r)}select(e){let t=this.schema.select(e),i=new eF(t.fields),r=[];for(let t of e){let e=this.schema.fields.findIndex(e=>e.name===t);~e&&(r[e]=this.data.children[e])}return new rT(t,iA({type:i,length:this.numRows,children:r}))}selectAt(e){let t=this.schema.selectAt(e),i=e.map(e=>this.data.children[e]).filter(Boolean),r=iA({type:new eF(t.fields),length:this.numRows,children:i});return new rT(t,r)}}function rx(e,t,i=t.reduce((e,t)=>Math.max(e,t.length),0)){var r;let n=[...e.fields],s=[...t],o=(i+63&-64)>>3;for(let[a,l]of e.fields.entries()){let e=t[a];e&&e.length===i||(n[a]=l.clone({nullable:!0}),s[a]=null!=(r=null==e?void 0:e._changeLengthAndBackfillNullBitmap(i))?r:iA({type:l.type,length:i,nullCount:i,nullBitmap:new Uint8Array(o)}))}return[e.assign(n),iA({type:new eF(n),length:i,children:s})]}rT[Symbol.toStringTag]=((sA=rT.prototype)._nullCount=-1,sA[Symbol.isConcatSpreadable]=!0,"RecordBatch");class rO extends rT{constructor(e){super(e,iA({type:new eF(e.fields),nullCount:0,children:e.fields.map(e=>iA({type:e.type}))}))}}(sD=n4||(n4={}))[sD.BUFFER=0]="BUFFER",(sC=n8||(n8={}))[sC.LZ4_FRAME=0]="LZ4_FRAME",sC[sC.ZSTD=1]="ZSTD";class rE{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new rE).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+4),(t||new rE).__init(e.readInt32(e.position())+e.position(),e)}codec(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):n8.LZ4_FRAME}method(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):n4.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,n8.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,n4.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,i){return rE.startBodyCompression(e),rE.addCodec(e,t),rE.addMethod(e,i),rE.endBodyCompression(e)}}class rk{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,i){return e.prep(8,16),e.writeInt64(BigInt(null!=i?i:0)),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}}class rA{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,i){return e.prep(8,16),e.writeInt64(BigInt(null!=i?i:0)),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}}class rD{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(e,t){return(t||new rD).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,t){return e.setPosition(e.position()+4),(t||new rD).__init(e.readInt32(e.position())+e.position(),e)}length(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,t){let i=this.bb.__offset(this.bb_pos,6);return i?(t||new rA).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}nodesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){let i=this.bb.__offset(this.bb_pos,8);return i?(t||new rk).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}buffersLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){let t=this.bb.__offset(this.bb_pos,10);return t?(e||new rE).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}}class rC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(e,t){return(t||new rC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,t){return e.setPosition(e.position()+4),(t||new rC).__init(e.readInt32(e.position())+e.position(),e)}id(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new rD).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){let e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}}class rB{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new rB).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+4),(t||new rB).__init(e.readInt32(e.position())+e.position(),e)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nQ.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,nQ.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return rB.startFloatingPoint(e),rB.addPrecision(e,t),rB.endFloatingPoint(e)}}class rV{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(e,t){return(t||new rV).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,t){return e.setPosition(e.position()+4),(t||new rV).__init(e.readInt32(e.position())+e.position(),e)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,t,i,r){return rV.startDecimal(e),rV.addPrecision(e,t),rV.addScale(e,i),rV.addBitWidth(e,r),rV.endDecimal(e)}}class rF{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(e,t){return(t||new rF).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,t){return e.setPosition(e.position()+4),(t||new rF).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nJ.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,nJ.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,t){return rF.startDate(e),rF.addUnit(e,t),rF.endDate(e)}}class rR{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new rR).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+4),(t||new rR).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nZ.MILLISECOND}bitWidth(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,nZ.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,i){return rR.startTime(e),rR.addUnit(e,t),rR.addBitWidth(e,i),rR.endTime(e)}}class rL{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new rL).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+4),(t||new rL).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nZ.SECOND}timezone(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,nZ.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,i){return rL.startTimestamp(e),rL.addUnit(e,t),rL.addTimezone(e,i),rL.endTimestamp(e)}}class rP{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new rP).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+4),(t||new rP).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nG.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,nG.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return rP.startInterval(e),rP.addUnit(e,t),rP.endInterval(e)}}class rM{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDuration(e,t){return(t||new rM).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,t){return e.setPosition(e.position()+4),(t||new rM).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nZ.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,nZ.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,t){return rM.startDuration(e),rM.addUnit(e,t),rM.endDuration(e)}}class rU{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new rU).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+4),(t||new rU).__init(e.readInt32(e.position())+e.position(),e)}mode(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nK.Sparse}typeIds(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}typeIdsLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,nK.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addInt32(t[i]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,i){return rU.startUnion(e),rU.addMode(e,t),rU.addTypeIds(e,i),rU.endUnion(e)}}class rW{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(e,t){return(t||new rW).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,t){return e.setPosition(e.position()+4),(t||new rW).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,t){return rW.startFixedSizeBinary(e),rW.addByteWidth(e,t),rW.endFixedSizeBinary(e)}}class rz{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(e,t){return(t||new rz).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,t){return e.setPosition(e.position()+4),(t||new rz).__init(e.readInt32(e.position())+e.position(),e)}listSize(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,t){return rz.startFixedSizeList(e),rz.addListSize(e,t),rz.endFixedSizeList(e)}}class rq{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(e,t){return(t||new rq).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,t){return e.setPosition(e.position()+4),(t||new rq).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){let e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(e,t){return rq.startMap(e),rq.addKeysSorted(e,t),rq.endMap(e)}}class rj{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new rj).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+4),(t||new rj).__init(e.readInt32(e.position())+e.position(),e)}version(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nX.V1}headerType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):nY.NONE}header(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,t){let i=this.bb.__offset(this.bb_pos,12);return i?(t||new iP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,nX.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,nY.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,BigInt("0"))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(e,t,i,r,n,s){return rj.startMessage(e),rj.addVersion(e,t),rj.addHeaderType(e,i),rj.addHeader(e,r),rj.addBodyLength(e,n),rj.addCustomMetadata(e,s),rj.endMessage(e)}}class r${constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(e,t){return(t||new r$).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,t){return e.setPosition(e.position()+4),(t||new r$).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return r$.startNull(e),r$.endNull(e)}}class rQ{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(e,t){return(t||new rQ).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,t){return e.setPosition(e.position()+4),(t||new rQ).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return rQ.startBinary(e),rQ.endBinary(e)}}class rZ{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeBinary(e,t){return(t||new rZ).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,t){return e.setPosition(e.position()+4),(t||new rZ).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return rZ.startLargeBinary(e),rZ.endLargeBinary(e)}}class rJ{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(e,t){return(t||new rJ).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,t){return e.setPosition(e.position()+4),(t||new rJ).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return rJ.startBool(e),rJ.endBool(e)}}class rG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(e,t){return(t||new rG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,t){return e.setPosition(e.position()+4),(t||new rG).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return rG.startUtf8(e),rG.endUtf8(e)}}class rK{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeUtf8(e,t){return(t||new rK).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,t){return e.setPosition(e.position()+4),(t||new rK).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return rK.startLargeUtf8(e),rK.endLargeUtf8(e)}}class rY{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(e,t){return(t||new rY).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,t){return e.setPosition(e.position()+4),(t||new rY).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return rY.startList(e),rY.endList(e)}}class rH{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new rH).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+4),(t||new rH).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return rH.startStruct_(e),rH.endStruct_(e)}}let rX=new class extends eq{visit(e,t){return null==e||null==t?void 0:super.visit(e,t)}visitNull(e,t){return r$.startNull(t),r$.endNull(t)}visitInt(e,t){return iM.startInt(t),iM.addBitWidth(t,e.bitWidth),iM.addIsSigned(t,e.isSigned),iM.endInt(t)}visitFloat(e,t){return rB.startFloatingPoint(t),rB.addPrecision(t,e.precision),rB.endFloatingPoint(t)}visitBinary(e,t){return rQ.startBinary(t),rQ.endBinary(t)}visitLargeBinary(e,t){return rZ.startLargeBinary(t),rZ.endLargeBinary(t)}visitBool(e,t){return rJ.startBool(t),rJ.endBool(t)}visitUtf8(e,t){return rG.startUtf8(t),rG.endUtf8(t)}visitLargeUtf8(e,t){return rK.startLargeUtf8(t),rK.endLargeUtf8(t)}visitDecimal(e,t){return rV.startDecimal(t),rV.addScale(t,e.scale),rV.addPrecision(t,e.precision),rV.addBitWidth(t,e.bitWidth),rV.endDecimal(t)}visitDate(e,t){return rF.startDate(t),rF.addUnit(t,e.unit),rF.endDate(t)}visitTime(e,t){return rR.startTime(t),rR.addUnit(t,e.unit),rR.addBitWidth(t,e.bitWidth),rR.endTime(t)}visitTimestamp(e,t){let i=e.timezone&&t.createString(e.timezone)||void 0;return rL.startTimestamp(t),rL.addUnit(t,e.unit),void 0!==i&&rL.addTimezone(t,i),rL.endTimestamp(t)}visitInterval(e,t){return rP.startInterval(t),rP.addUnit(t,e.unit),rP.endInterval(t)}visitDuration(e,t){return rM.startDuration(t),rM.addUnit(t,e.unit),rM.endDuration(t)}visitList(e,t){return rY.startList(t),rY.endList(t)}visitStruct(e,t){return rH.startStruct_(t),rH.endStruct_(t)}visitUnion(e,t){rU.startTypeIdsVector(t,e.typeIds.length);let i=rU.createTypeIdsVector(t,e.typeIds);return rU.startUnion(t),rU.addMode(t,e.mode),rU.addTypeIds(t,i),rU.endUnion(t)}visitDictionary(e,t){let i=this.visit(e.indices,t);return iU.startDictionaryEncoding(t),iU.addId(t,BigInt(e.id)),iU.addIsOrdered(t,e.isOrdered),void 0!==i&&iU.addIndexType(t,i),iU.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return rW.startFixedSizeBinary(t),rW.addByteWidth(t,e.byteWidth),rW.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return rz.startFixedSizeList(t),rz.addListSize(t,e.listSize),rz.endFixedSizeList(t)}visitMap(e,t){return rq.startMap(t),rq.addKeysSorted(t,e.keysSorted),rq.endMap(t)}};function r0(e){return new r6(e.count,function e(t){return(t||[]).reduce((t,i)=>[...t,new r7(i.count,(i.VALIDITY||[]).reduce((e,t)=>e+ +(0===t),0)),...e(i.children)],[])}(e.columns),function e(t,i=[]){for(let r=-1,n=(t||[]).length;++r<n;){let n=t[r];n.VALIDITY&&i.push(new r9(i.length,n.VALIDITY.length)),n.TYPE_ID&&i.push(new r9(i.length,n.TYPE_ID.length)),n.OFFSET&&i.push(new r9(i.length,n.OFFSET.length)),n.DATA&&i.push(new r9(i.length,n.DATA.length)),i=e(n.children,i)}return i}(e.columns))}function r1(e,t){return(e.children||[]).filter(Boolean).map(e=>i$.fromJSON(e,t))}function r2(e=[]){return new Map(e.map(({key:e,value:t})=>[e,t]))}function r4(e){return new ew(e.isSigned,e.bitWidth)}function r8(e,t){let i=e.type.name;switch(i){case"NONE":case"null":return new ev;case"binary":return new eI;case"largebinary":return new eS;case"utf8":return new eT;case"largeutf8":return new ex;case"bool":return new eO;case"list":return new eV((t||[])[0]);case"struct":case"struct_":return new eF(t||[])}switch(i){case"int":{let t=e.type;return new ew(t.isSigned,t.bitWidth)}case"floatingpoint":return new eN(nQ[e.type.precision]);case"decimal":{let t=e.type;return new eE(t.scale,t.precision,t.bitWidth)}case"date":return new ek(nJ[e.type.unit]);case"time":{let t=e.type;return new eA(nZ[t.unit],t.bitWidth)}case"timestamp":{let t=e.type;return new eD(nZ[t.unit],t.timezone)}case"interval":return new eC(nG[e.type.unit]);case"duration":return new eB(nZ[e.type.unit]);case"union":{let i=e.type,[r,...n]=(i.mode+"").toLowerCase();return new eR(nK[r.toUpperCase()+n.join("")],i.typeIds||[],t||[])}case"fixedsizebinary":return new eL(e.type.byteWidth);case"fixedsizelist":return new eP(e.type.listSize,(t||[])[0]);case"map":{let i=e.type;return new eM((t||[])[0],i.keysSorted)}}throw Error(`Unrecognized type: "${i}"`)}class r3{static fromJSON(e,t){var i,r;let n=new r3(0,nX.V5,t);return i=e,r=t,n._createHeader=()=>{switch(r){case nY.Schema:return ij.fromJSON(i);case nY.RecordBatch:return r6.fromJSON(i);case nY.DictionaryBatch:return r5.fromJSON(i)}throw Error(`Unrecognized Message type: { name: ${nY[r]}, type: ${r} }`)},n}static decode(e){var t,i;e=new iR(et(e));let r=rj.getRootAsMessage(e),n=r.bodyLength(),s=r.version(),o=r.headerType(),a=new r3(n,s,o);return t=r,i=o,a._createHeader=()=>{switch(i){case nY.Schema:return ij.decode(t.header(new iz),new Map,t.version());case nY.RecordBatch:return r6.decode(t.header(new rD),t.version());case nY.DictionaryBatch:return r5.decode(t.header(new rC),t.version())}throw Error(`Unrecognized Message type: { name: ${nY[i]}, type: ${i} }`)},a}static encode(e){let t=new iL,i=-1;return e.isSchema()?i=ij.encode(t,e.header()):e.isRecordBatch()?i=r6.encode(t,e.header()):e.isDictionaryBatch()&&(i=r5.encode(t,e.header())),rj.startMessage(t),rj.addVersion(t,nX.V5),rj.addHeader(t,i),rj.addHeaderType(t,e.headerType),rj.addBodyLength(t,BigInt(e.bodyLength)),rj.finishMessageBuffer(t,rj.endMessage(t)),t.asUint8Array()}static from(e,t=0){if(e instanceof ij)return new r3(0,nX.V5,nY.Schema,e);if(e instanceof r6)return new r3(t,nX.V5,nY.RecordBatch,e);if(e instanceof r5)return new r3(t,nX.V5,nY.DictionaryBatch,e);throw Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===nY.Schema}isRecordBatch(){return this.headerType===nY.RecordBatch}isDictionaryBatch(){return this.headerType===nY.DictionaryBatch}constructor(e,t,i,r){this._version=t,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=eo(e)}}class r6{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,t,i){this._nodes=t,this._buffers=i,this._length=eo(e)}}class r5{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,t,i=!1){this._data=e,this._isDelta=i,this._id=eo(t)}}class r9{constructor(e,t){this.offset=eo(e),this.length=eo(t)}}class r7{constructor(e,t){this.length=eo(e),this.nullCount=eo(t)}}function ne(e,t){let i=[];for(let r,n=-1,s=-1,o=e.childrenLength();++n<o;)(r=e.children(n))&&(i[++s]=i$.decode(r,t));return i}function nt(e){let t=new Map;if(e)for(let i,r,n=-1,s=Math.trunc(e.customMetadataLength());++n<s;)(i=e.customMetadata(n))&&null!=(r=i.key())&&t.set(r,i.value());return t}function ni(e){return new ew(e.isSigned(),e.bitWidth())}function nr(e,t){let i=e.typeType();switch(i){case n2.NONE:case n2.Null:return new ev;case n2.Binary:return new eI;case n2.LargeBinary:return new eS;case n2.Utf8:return new eT;case n2.LargeUtf8:return new ex;case n2.Bool:return new eO;case n2.List:return new eV((t||[])[0]);case n2.Struct_:return new eF(t||[])}switch(i){case n2.Int:{let t=e.type(new iM);return new ew(t.isSigned(),t.bitWidth())}case n2.FloatingPoint:return new eN(e.type(new rB).precision());case n2.Decimal:{let t=e.type(new rV);return new eE(t.scale(),t.precision(),t.bitWidth())}case n2.Date:return new ek(e.type(new rF).unit());case n2.Time:{let t=e.type(new rR);return new eA(t.unit(),t.bitWidth())}case n2.Timestamp:{let t=e.type(new rL);return new eD(t.unit(),t.timezone())}case n2.Interval:return new eC(e.type(new rP).unit());case n2.Duration:return new eB(e.type(new rM).unit());case n2.Union:{let i=e.type(new rU);return new eR(i.mode(),i.typeIdsArray()||[],t||[])}case n2.FixedSizeBinary:return new eL(e.type(new rW).byteWidth());case n2.FixedSizeList:return new eP(e.type(new rz).listSize(),(t||[])[0]);case n2.Map:{let i=e.type(new rq);return new eM((t||[])[0],i.keysSorted())}}throw Error(`Unrecognized type: "${n2[i]}" (${i})`)}i$.encode=function(e,t){let i=-1,r=-1,n=-1,s=t.type,o=t.typeId;eb.isDictionary(s)?(o=s.dictionary.typeId,n=rX.visit(s,e),r=rX.visit(s.dictionary,e)):r=rX.visit(s,e);let a=(s.children||[]).map(t=>i$.encode(e,t)),l=iW.createChildrenVector(e,a),d=t.metadata&&t.metadata.size>0?iW.createCustomMetadataVector(e,[...t.metadata].map(([t,i])=>{let r=e.createString(`${t}`),n=e.createString(`${i}`);return iP.startKeyValue(e),iP.addKey(e,r),iP.addValue(e,n),iP.endKeyValue(e)})):-1;return t.name&&(i=e.createString(t.name)),iW.startField(e),iW.addType(e,r),iW.addTypeType(e,o),iW.addChildren(e,l),iW.addNullable(e,!!t.nullable),-1!==i&&iW.addName(e,i),-1!==n&&iW.addDictionary(e,n),-1!==d&&iW.addCustomMetadata(e,d),iW.endField(e)},i$.decode=function(e,t){let i,r,n,s,o,a;return t&&(a=e.dictionary())?(t.has(i=eo(a.id()))?(s=(s=a.indexType())?ni(s):new e_,o=new eW(t.get(i),s,i,a.isOrdered())):(s=(s=a.indexType())?ni(s):new e_,t.set(i,n=nr(e,ne(e,t))),o=new eW(n,s,i,a.isOrdered())),r=new i$(e.name(),o,e.nullable(),nt(e))):(n=nr(e,ne(e,t)),r=new i$(e.name(),n,e.nullable(),nt(e))),r||null},i$.fromJSON=function(e,t){let i,r,n,s,o,a;return t&&(s=e.dictionary)?(t.has(i=s.id)?(r=(r=s.indexType)?r4(r):new e_,a=new eW(t.get(i),r,i,s.isOrdered)):(r=(r=s.indexType)?r4(r):new e_,t.set(i,o=r8(e,r1(e,t))),a=new eW(o,r,i,s.isOrdered)),n=new i$(e.name,a,e.nullable,r2(e.metadata))):(o=r8(e,r1(e,t)),n=new i$(e.name,o,e.nullable,r2(e.metadata))),n||null},ij.encode=function(e,t){let i=t.fields.map(t=>i$.encode(e,t));iz.startFieldsVector(e,i.length);let r=iz.createFieldsVector(e,i),n=t.metadata&&t.metadata.size>0?iz.createCustomMetadataVector(e,[...t.metadata].map(([t,i])=>{let r=e.createString(`${t}`),n=e.createString(`${i}`);return iP.startKeyValue(e),iP.addKey(e,r),iP.addValue(e,n),iP.endKeyValue(e)})):-1;return iz.startSchema(e),iz.addFields(e,r),iz.addEndianness(e,nn?n0.Little:n0.Big),-1!==n&&iz.addCustomMetadata(e,n),iz.endSchema(e)},ij.decode=function(e,t=new Map,i=nX.V5){return new ij(function(e,t){let i=[];for(let r,n=-1,s=-1,o=e.fieldsLength();++n<o;)(r=e.fields(n))&&(i[++s]=i$.decode(r,t));return i}(e,t),nt(e),t,i)},ij.fromJSON=function(e,t=new Map){var i,r;return new ij((i=e,r=t,(i.fields||[]).filter(Boolean).map(e=>i$.fromJSON(e,r))),r2(e.metadata),t)},r6.encode=function(e,t){let i=t.nodes||[],r=t.buffers||[];for(let t of(rD.startNodesVector(e,i.length),i.slice().reverse()))r7.encode(e,t);let n=e.endVector();for(let t of(rD.startBuffersVector(e,r.length),r.slice().reverse()))r9.encode(e,t);let s=e.endVector();return rD.startRecordBatch(e),rD.addLength(e,BigInt(t.length)),rD.addNodes(e,n),rD.addBuffers(e,s),rD.endRecordBatch(e)},r6.decode=function(e,t=nX.V5){if(null!==e.compression())throw Error("Record batch compression not implemented");return new r6(e.length(),function(e){let t=[];for(let i,r=-1,n=-1,s=e.nodesLength();++r<s;)(i=e.nodes(r))&&(t[++n]=r7.decode(i));return t}(e),function(e,t){let i=[];for(let r,n=-1,s=-1,o=e.buffersLength();++n<o;)(r=e.buffers(n))&&(t<nX.V4&&(r.bb_pos+=8*(n+1)),i[++s]=r9.decode(r));return i}(e,t))},r6.fromJSON=r0,r5.encode=function(e,t){let i=r6.encode(e,t.data);return rC.startDictionaryBatch(e),rC.addId(e,BigInt(t.id)),rC.addIsDelta(e,t.isDelta),rC.addData(e,i),rC.endDictionaryBatch(e)},r5.decode=function(e,t=nX.V5){return new r5(r6.decode(e.data(),t),e.id(),e.isDelta())},r5.fromJSON=function(e){return new r5(r0(e.data),e.id,e.isDelta)},r7.encode=function(e,t){return rA.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))},r7.decode=function(e){return new r7(e.length(),e.nullCount())},r9.encode=function(e,t){return rk.createBuffer(e,BigInt(t.offset),BigInt(t.length))},r9.decode=function(e){return new r9(e.offset(),e.length())};let nn=(()=>{let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})(),ns=e=>`Expected ${nY[e]} Message in stream, but was null or length 0.`,no=e=>`Header pointer of flatbuffer-encoded ${nY[e]} Message is null or length 0.`,na=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,nl=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class nd{constructor(e){this.source=e instanceof i6?e:new i6(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||-1===e.value&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?i1:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw Error(ns(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);let t=et(this.source.read(e));if(t.byteLength<e)throw Error(nl(e,t.byteLength));return t.byteOffset%8==0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(e=!1){let t=nY.Schema,i=this.readMessage(t),r=null==i?void 0:i.header();if(e&&!r)throw Error(no(t));return r}readMetadataLength(){let e=this.source.read(nh),t=e&&new iR(e),i=(null==t?void 0:t.readInt32(0))||0;return{done:0===i,value:i}}readMetadata(e){let t=this.source.read(e);if(!t)return i1;if(t.byteLength<e)throw Error(na(e,t.byteLength));return{done:!1,value:r3.decode(t)}}}class nu{constructor(e,t){this.source=e instanceof i5?e:W(e)?new rt(e,t):new i5(e)}[Symbol.asyncIterator](){return this}next(){return _(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||-1===e.value&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?i1:e})}throw(e){return _(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return _(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return _(this,void 0,void 0,function*(){let t;if((t=yield this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw Error(ns(e));return t.value})}readMessageBody(e){return _(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);let t=et((yield this.source.read(e)));if(t.byteLength<e)throw Error(nl(e,t.byteLength));return t.byteOffset%8==0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()})}readSchema(){return _(this,arguments,void 0,function*(e=!1){let t=nY.Schema,i=yield this.readMessage(t),r=null==i?void 0:i.header();if(e&&!r)throw Error(no(t));return r})}readMetadataLength(){return _(this,void 0,void 0,function*(){let e=yield this.source.read(nh),t=e&&new iR(e),i=(null==t?void 0:t.readInt32(0))||0;return{done:0===i,value:i}})}readMetadata(e){return _(this,void 0,void 0,function*(){let t=yield this.source.read(e);if(!t)return i1;if(t.byteLength<e)throw Error(na(e,t.byteLength));return{done:!1,value:r3.decode(t)}})}}class nc extends nd{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof i2?e:new i2(e)}next(){let{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:r3.fromJSON(e.schema,nY.Schema)};if(this._dictionaryIndex<e.dictionaries.length){let t=e.dictionaries[this._dictionaryIndex++];return this._body=t.data.columns,{done:!1,value:r3.fromJSON(t,nY.DictionaryBatch)}}if(this._batchIndex<e.batches.length){let t=e.batches[this._batchIndex++];return this._body=t.columns,{done:!1,value:r3.fromJSON(t,nY.RecordBatch)}}return this._body=[],i1}readMessageBody(e){return function e(t){return(t||[]).reduce((t,i)=>[...t,...i.VALIDITY&&[i.VALIDITY]||[],...i.TYPE_ID&&[i.TYPE_ID]||[],...i.OFFSET&&[i.OFFSET]||[],...i.DATA&&[i.DATA]||[],...e(i.children)],[])}(this._body)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw Error(ns(e));return t.value}readSchema(){let e=nY.Schema,t=this.readMessage(e),i=null==t?void 0:t.header();if(!t||!i)throw Error(no(e));return i}}let nh=4,np="ARROW1",nf=new Uint8Array(np.length);for(let e=0;e<np.length;e+=1)nf[e]=np.codePointAt(e);function ny(e,t=0){for(let i=-1,r=nf.length;++i<r;)if(nf[i]!==e[t+i])return!1;return!0}let nm=nf.length,ng=nm+nh,nb=2*nm+nh;class nv extends i4{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){let t=this._impl.open(e);return R(t)?t.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return iY.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return iY.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw Error('"throughDOM" not available in this environment')}static from(e){if(e instanceof nv)return e;if(M(e))return new nw(new nk(e));if(W(e))return function(e){return _(this,void 0,void 0,function*(){let{size:t}=yield e.stat(),i=new rt(e,t);return t>=nb&&ny((yield i.readAt(0,nm+7&-8)))?new nI(new nE(i)):new n_(new nx(i))})}(e);if(R(e))return _(this,void 0,void 0,function*(){return yield nv.from((yield e))});if(z(e)||$(e)||Z(e)||P(e))return function(e){return _(this,void 0,void 0,function*(){let t=yield e.peek(nm+7&-8);return t&&t.byteLength>=4?ny(t)?new nN(new nO((yield e.read()))):new n_(new nx(e)):new n_(new nx(function(){return I(this,arguments,function*(){})}()))})}(new i5(e));var t=new i6(e);let i=t.peek(nm+7&-8);return i&&i.byteLength>=4?ny(i)?new nN(new nO(t.read())):new nw(new nT(t)):new nw(new nT(function*(){}()))}static readAll(e){return e instanceof nv?e.isSync()?nD(e):nC(e):M(e)||ArrayBuffer.isView(e)||L(e)||U(e)?nD(e):nC(e)}}class nw extends nv{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return I(this,arguments,function*(){yield N((yield*S(T(this[Symbol.iterator]()))))})}}class n_ extends nv{constructor(e){super(e),this._impl=e}readAll(){return _(this,void 0,void 0,function*(){var e,t,i,r;let n=[];try{for(var s,o=!0,a=T(this);!(e=(s=yield a.next()).done);o=!0)r=s.value,o=!1,n.push(r)}catch(e){t={error:e}}finally{try{!o&&!e&&(i=a.return)&&(yield i.call(a))}finally{if(t)throw t.error}}return n})}[Symbol.iterator](){throw Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class nN extends nw{constructor(e){super(e),this._impl=e}}class nI extends n_{constructor(e){super(e),this._impl=e}}class nS{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){let i=this._loadVectors(e,t,this.schema.fields),r=iA({type:new eF(this.schema.fields),length:e.length,children:i});return new rT(this.schema,r)}_loadDictionaryBatch(e,t){let{id:i,isDelta:r}=e,{dictionaries:n,schema:s}=this,o=n.get(i),a=s.dictionaries.get(i),l=this._loadVectors(e.data,t,[a]);return(o&&r?o.concat(new iT(l)):new iT(l)).memoize()}_loadVectors(e,t,i){return new rl(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(i)}}class nT extends nS{constructor(e,t){super(t),this._reader=M(e)?new nc(this._handle=e):new nd(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return!this.closed&&(this.autoDestroy=nA(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):i1}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):i1}next(){let e;if(this.closed)return i1;let{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;let i=e.header(),r=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;let i=e.header(),r=t.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,n)}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new rO(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class nx extends nS{constructor(e,t){super(t),this._reader=new nu(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return _(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return _(this,void 0,void 0,function*(){return!this.closed&&(this.autoDestroy=nA(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return _(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):i1})}return(e){return _(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):i1})}next(){return _(this,void 0,void 0,function*(){let e;if(this.closed)return i1;let{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;let i=e.header(),r=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;let i=e.header(),r=yield t.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,n)}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new rO(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return _(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class nO extends nT{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,t){super(e instanceof re?e:new re(e),t)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer)for(let e of(this.schema=(this._footer=this._readFooter()).schema,this._footer.dictionaryBatches()))e&&this._readDictionaryBatch(this._dictionaryIndex++);return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();let i=null==(t=this._footer)?void 0:t.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){let e=this._reader.readMessage(nY.RecordBatch);if(null==e?void 0:e.isRecordBatch()){let t=e.header(),i=this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,i)}}return null}_readDictionaryBatch(e){var t;let i=null==(t=this._footer)?void 0:t.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){let e=this._reader.readMessage(nY.DictionaryBatch);if(null==e?void 0:e.isDictionaryBatch()){let t=e.header(),i=this._reader.readMessageBody(e.bodyLength),r=this._loadDictionaryBatch(t,i);this.dictionaries.set(t.id,r)}}}_readFooter(){let{_handle:e}=this,t=e.size-ng,i=e.readInt32(t),r=e.readAt(t-i,i);return iJ.decode(r)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){let i=null==(t=this._footer)?void 0:t.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class nE extends nx{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...t){super(e instanceof rt?e:new rt(e,"number"!=typeof t[0]?t.shift():void 0),t[0]instanceof Map?t.shift():void 0)}isFile(){return!0}isAsync(){return!0}open(e){let t=Object.create(null,{open:{get:()=>super.open}});return _(this,void 0,void 0,function*(){if(!this.closed&&!this._footer)for(let e of(this.schema=(this._footer=yield this._readFooter()).schema,this._footer.dictionaryBatches()))e&&(yield this._readDictionaryBatch(this._dictionaryIndex++));return yield t.open.call(this,e)})}readRecordBatch(e){return _(this,void 0,void 0,function*(){var t;if(this.closed)return null;this._footer||(yield this.open());let i=null==(t=this._footer)?void 0:t.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){let e=yield this._reader.readMessage(nY.RecordBatch);if(null==e?void 0:e.isRecordBatch()){let t=e.header(),i=yield this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,i)}}return null})}_readDictionaryBatch(e){return _(this,void 0,void 0,function*(){var t;let i=null==(t=this._footer)?void 0:t.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){let e=yield this._reader.readMessage(nY.DictionaryBatch);if(null==e?void 0:e.isDictionaryBatch()){let t=e.header(),i=yield this._reader.readMessageBody(e.bodyLength),r=this._loadDictionaryBatch(t,i);this.dictionaries.set(t.id,r)}}})}_readFooter(){return _(this,void 0,void 0,function*(){let{_handle:e}=this;e._pending&&(yield e._pending);let t=e.size-ng,i=yield e.readInt32(t),r=yield e.readAt(t-i,i);return iJ.decode(r)})}_readNextMessageAndValidate(e){return _(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){let t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null})}}class nk extends nT{constructor(e,t){super(e,t)}_loadVectors(e,t,i){return new rd(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(i)}}function nA(e,t){return t&&"boolean"==typeof t.autoDestroy?t.autoDestroy:e.autoDestroy}function*nD(e){let t=nv.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function nC(e){return I(this,arguments,function*(){let t=yield N(nv.from(e));try{if(!(yield N(t.open({autoDestroy:!1}))).closed)do yield yield N(t);while(!(yield N(t.reset().open())).closed)}finally{yield N(t.cancel())}})}class nB extends eq{static assemble(...e){let t=e=>e.flatMap(e=>Array.isArray(e)?t(e):e instanceof rT?e.data.children:e.data),i=new nB;return i.visitMany(t(e)),i}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof iT)return this.visitMany(e.data),this;let{type:t}=e;if(!eb.isDictionary(t)){let{length:i}=e;if(i>0x7fffffff)throw RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(eb.isUnion(t))this.nodes.push(new r7(i,0));else{let{nullCount:r}=e;eb.isNull(t)||nV.call(this,r<=0?new Uint8Array(0):iu(e.offset,i,e.nullBitmap)),this.nodes.push(new r7(i,r))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function nV(e){let t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new r9(this._byteLength,t)),this._byteLength+=t,this}function nF(e){return nV.call(this,e.values.subarray(0,e.length*e.stride))}function nR(e){let{length:t,values:i,valueOffsets:r}=e,n=eo(r[0]),s=Math.min(eo(r[t])-n,i.byteLength-n);return nV.call(this,es(-n,t+1,r)),nV.call(this,i.subarray(n,n+s)),this}function nL(e){let{length:t,valueOffsets:i}=e;if(i){let{0:r,[t]:n}=i;return nV.call(this,es(-r,t+1,i)),this.visit(e.children[0].slice(r,n-r))}return this.visit(e.children[0])}function nP(e){return this.visitMany(e.type.children.map((t,i)=>e.children[i]).filter(Boolean))[0]}nB.prototype.visitBool=function(e){let t;return e.nullCount>=e.length?nV.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?nV.call(this,iu(e.offset,e.length,t)):nV.call(this,ic(e.values))},nB.prototype.visitInt=nF,nB.prototype.visitFloat=nF,nB.prototype.visitUtf8=nR,nB.prototype.visitLargeUtf8=nR,nB.prototype.visitBinary=nR,nB.prototype.visitLargeBinary=nR,nB.prototype.visitFixedSizeBinary=nF,nB.prototype.visitDate=nF,nB.prototype.visitTimestamp=nF,nB.prototype.visitTime=nF,nB.prototype.visitDecimal=nF,nB.prototype.visitList=nL,nB.prototype.visitStruct=nP,nB.prototype.visitUnion=function(e){var t;let{type:i,length:r,typeIds:n,valueOffsets:s}=e;if(nV.call(this,n),i.mode===nK.Sparse)return nP.call(this,e);if(i.mode===nK.Dense)if(e.offset<=0)return nV.call(this,s),nP.call(this,e);else{let o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let e,i,d=-1;++d<r;)void 0!==(e=n[d])&&(void 0===(i=a[e])&&(i=a[e]=s[d]),o[d]=s[d]-i,l[e]=(null!=(t=l[e])?t:0)+1);nV.call(this,o),this.visitMany(e.children.map((e,t)=>{let n=i.typeIds[t],s=a[n],o=l[n];return e.slice(s,Math.min(r,o))}))}return this},nB.prototype.visitInterval=nF,nB.prototype.visitDuration=nF,nB.prototype.visitFixedSizeList=nL,nB.prototype.visitMap=nL;class nM extends i4{static throughNode(e){throw Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new i3,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,F(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof e.autoDestroy||e.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof e.writeLegacyIpcFormat&&e.writeLegacyIpcFormat}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return R(e)?e.then(e=>this.writeAll(e)):P(e)?nq(this,e):nz(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,t=null){return e===this._sink||e instanceof i3?this._sink=e:(this._sink=new i3,e&&j(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&Q(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,t&&rN(t,this._schema)||(null==t?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(this._sink){if(null==e)return this.finish()&&void 0;else if(e instanceof rS&&!(t=e.schema))return this.finish()&&void 0;else if(e instanceof rT&&!(t=e.schema))return this.finish()&&void 0}else throw Error("RecordBatchWriter is closed");if(t&&!rN(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof rT?e instanceof rO||this._writeRecordBatch(e):e instanceof rS?this.writeAll(e.batches):L(e)&&this.writeAll(e)}_writeMessage(e,t=8){let i=t-1,r=r3.encode(e),n=r.byteLength,s=this._writeLegacyIpcFormat?4:8,o=n+s+i&~i,a=o-n-s;return e.headerType===nY.RecordBatch?this._recordBatchBlocks.push(new iK(o,e.bodyLength,this._position)):e.headerType===nY.DictionaryBatch&&this._dictionaryBlocks.push(new iK(o,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-s)),n>0&&this._write(r),this._writePadding(a)}_write(e){if(this._started){let t=et(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(r3.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(nf)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){let{byteLength:t,nodes:i,bufferRegions:r,buffers:n}=nB.assemble(e),s=new r6(e.numRows,i,r),o=r3.from(s,t);return this._writeDictionaries(e)._writeMessage(o)._writeBodyBuffers(n)}_writeDictionaryBatch(e,t,i=!1){let{byteLength:r,nodes:n,bufferRegions:s,buffers:o}=nB.assemble(new iT([e])),a=new r5(new r6(e.length,n,s),t,i),l=r3.from(a,r);return this._writeMessage(l)._writeBodyBuffers(o)}_writeBodyBuffers(e){let t,i,r;for(let n=-1,s=e.length;++n<s;)(t=e[n])&&(i=t.byteLength)>0&&(this._write(t),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(e){var t,i;for(let[r,n]of e.dictionaries){let e=null!=(t=null==n?void 0:n.data)?t:[],s=this._seenDictionaries.get(r),o=null!=(i=this._dictionaryDeltaOffsets.get(r))?i:0;if(s&&s.data[0]===e[0]){if(o<e.length)for(let t of e.slice(o))this._writeDictionaryBatch(t,r,!0)}else for(let[t,i]of e.entries())this._writeDictionaryBatch(i,r,t>0);this._seenDictionaries.set(r,n),this._dictionaryDeltaOffsets.set(r,e.length)}return this}}class nU extends nM{static writeAll(e,t){let i=new nU(t);return R(e)?e.then(e=>i.writeAll(e)):P(e)?nq(i,e):nz(i,e)}}class nW extends nM{static writeAll(e){let t=new nW;return R(e)?e.then(e=>t.writeAll(e)):P(e)?nq(t,e):nz(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,t,i=!1){if(!i&&this._seenDictionaries.has(t))throw Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,t,i)}_writeFooter(e){let t=iJ.encode(new iJ(e,nX.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function nz(e,t){let i=t;for(let r of(t instanceof rS&&(i=t.batches,e.reset(void 0,t.schema)),i))e.write(r);return e.finish()}function nq(e,t){return _(this,void 0,void 0,function*(){var i,r,n,s,o,a,l;try{for(i=!0,r=T(t);!(s=(n=yield r.next()).done);i=!0)l=n.value,i=!1,e.write(l)}catch(e){o={error:e}}finally{try{!i&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}var nj,n$,nQ,nZ,nJ,nG,nK,nY,nH,nX,n0,n1,n2,n4,n8,n3,n6,n5,n9,n7,se,st,si,sr,sn,ss,so,sa,sl,sd,su,sc,sh,sp,sf,sy,sm,sg,sb,sv,sw,s_,sN,sI,sS,sT,sx,sO,sE,sk,sA,sD,sC,sB=Object.create,sV=Object.defineProperty,sF=Object.getOwnPropertyDescriptor,sR=Object.getOwnPropertyNames,sL=Object.getPrototypeOf,sP=Object.prototype.hasOwnProperty,sM=(s=(e,t)=>{t.exports=Worker},()=>(o||s((o={exports:{}}).exports,o),o.exports)),sU=((a=sU||{})[a.UNDEFINED=0]="UNDEFINED",a[a.AUTOMATIC=1]="AUTOMATIC",a[a.READ_ONLY=2]="READ_ONLY",a[a.READ_WRITE=3]="READ_WRITE",a),sW=((l=sW||{})[l.IDENTIFIER=0]="IDENTIFIER",l[l.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",l[l.STRING_CONSTANT=2]="STRING_CONSTANT",l[l.OPERATOR=3]="OPERATOR",l[l.KEYWORD=4]="KEYWORD",l[l.COMMENT=5]="COMMENT",l),sz=((d=sz||{})[d.NONE=0]="NONE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARNING=3]="WARNING",d[d.ERROR=4]="ERROR",d),sq=((u=sq||{})[u.NONE=0]="NONE",u[u.CONNECT=1]="CONNECT",u[u.DISCONNECT=2]="DISCONNECT",u[u.OPEN=3]="OPEN",u[u.QUERY=4]="QUERY",u[u.INSTANTIATE=5]="INSTANTIATE",u),sj=((c=sj||{})[c.NONE=0]="NONE",c[c.OK=1]="OK",c[c.ERROR=2]="ERROR",c[c.START=3]="START",c[c.RUN=4]="RUN",c[c.CAPTURE=5]="CAPTURE",c),s$=((h=s$||{})[h.NONE=0]="NONE",h[h.WEB_WORKER=1]="WEB_WORKER",h[h.NODE_WORKER=2]="NODE_WORKER",h[h.BINDINGS=3]="BINDINGS",h[h.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",h),sQ=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},sZ=((p=sZ||{})[p.SUCCESS=0]="SUCCESS",p[p.MAX_ARROW_ERROR=255]="MAX_ARROW_ERROR",p[p.DUCKDB_WASM_RETRY=256]="DUCKDB_WASM_RETRY",p),sJ=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),i=nv.from(t);return console.assert(i.isSync(),"Reader is not sync"),console.assert(i.isFile(),"Reader is not file"),new rS(i)}async send(e,t=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let i=await this._bindings.startPendingQuery(this._conn,e,t);for(;null==i;)i=await this._bindings.pollPendingQuery(this._conn);let r=new sG(this._bindings,this._conn,i),n=await nv.from(r);return console.assert(n.isAsync()),console.assert(n.isStream()),n}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new sK(this._bindings,this._conn,t)}async insertArrowTable(e,t){let i=function(e,t="stream"){return("stream"===t?nU:nW).writeAll(e).toUint8Array(!0)}(e,"stream");await this.insertArrowFromIPCStream(i,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},sG=class{constructor(e,t,i){this.db=e,this.conn=t,this.header=i,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;for(null!=this._inFlight&&(e=await this._inFlight,this._inFlight=null);null==e;)e=await this.db.fetchQueryResults(this.conn);return this._depleted=0==e.length,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},sK=class{constructor(e,t,i){this.bindings=e,this.connectionId=t,this.statementId=i}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),i=nv.from(t);return console.assert(i.isSync()),console.assert(i.isFile()),new rS(i)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),i=new sG(this.bindings,this.connectionId,t),r=await nv.from(i);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},sY=((f=sY||{}).CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",f.CLOSE_PREPARED="CLOSE_PREPARED",f.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",f.REGISTER_OPFS_FILE_NAME="REGISTER_OPFS_FILE_NAME",f.CONNECT="CONNECT",f.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",f.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",f.CREATE_PREPARED="CREATE_PREPARED",f.DISCONNECT="DISCONNECT",f.DROP_FILE="DROP_FILE",f.DROP_FILES="DROP_FILES",f.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",f.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",f.FLUSH_FILES="FLUSH_FILES",f.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",f.GET_TABLE_NAMES="GET_TABLE_NAMES",f.GET_VERSION="GET_VERSION",f.GLOB_FILE_INFOS="GLOB_FILE_INFOS",f.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",f.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",f.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",f.INSTANTIATE="INSTANTIATE",f.OPEN="OPEN",f.PING="PING",f.POLL_PENDING_QUERY="POLL_PENDING_QUERY",f.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",f.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",f.REGISTER_FILE_URL="REGISTER_FILE_URL",f.RESET="RESET",f.RUN_PREPARED="RUN_PREPARED",f.RUN_QUERY="RUN_QUERY",f.SEND_PREPARED="SEND_PREPARED",f.START_PENDING_QUERY="START_PENDING_QUERY",f.TOKENIZE="TOKENIZE",f),sH=((y=sH||{}).CONNECTION_INFO="CONNECTION_INFO",y.ERROR="ERROR",y.FEATURE_FLAGS="FEATURE_FLAGS",y.FILE_BUFFER="FILE_BUFFER",y.FILE_INFOS="FILE_INFOS",y.FILE_SIZE="FILE_SIZE",y.FILE_STATISTICS="FILE_STATISTICS",y.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",y.LOG="LOG",y.PROGRESS_UPDATE="PROGRESS_UPDATE",y.OK="OK",y.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",y.QUERY_PLAN="QUERY_PLAN",y.QUERY_RESULT="QUERY_RESULT",y.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",y.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",y.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",y.REGISTERED_FILE="REGISTERED_FILE",y.SCRIPT_TOKENS="SCRIPT_TOKENS",y.SUCCESS="SUCCESS",y.TABLE_NAMES="TABLE_NAMES",y.VERSION_STRING="VERSION_STRING",y),sX=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((e,t)=>{this.promiseResolver=e,this.promiseRejecter=t})}};function s0(e,t){let i=function e(t){switch(t.typeId){case nj.Binary:return{sqlType:"binary"};case nj.Bool:return{sqlType:"bool"};case nj.Date:return{sqlType:"date"};case nj.DateDay:return{sqlType:"date32[d]"};case nj.DateMillisecond:return{sqlType:"date64[ms]"};case nj.Decimal:return{sqlType:"decimal",precision:t.precision,scale:t.scale};case nj.Float:return{sqlType:"float"};case nj.Float16:return{sqlType:"float16"};case nj.Float32:return{sqlType:"float32"};case nj.Float64:return{sqlType:"float64"};case nj.Int:return{sqlType:"int32"};case nj.Int16:return{sqlType:"int16"};case nj.Int32:return{sqlType:"int32"};case nj.Int64:return{sqlType:"int64"};case nj.Uint16:return{sqlType:"uint16"};case nj.Uint32:return{sqlType:"uint32"};case nj.Uint64:return{sqlType:"uint64"};case nj.Uint8:return{sqlType:"uint8"};case nj.IntervalDayTime:return{sqlType:"interval[dt]"};case nj.IntervalYearMonth:return{sqlType:"interval[m]"};case nj.List:return{sqlType:"list",valueType:e(t.valueType)};case nj.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case nj.Null:return{sqlType:"null"};case nj.Utf8:return{sqlType:"utf8"};case nj.Struct:return{sqlType:"struct",fields:t.children.map(e=>s0(e.name,e.type))};case nj.Map:return{sqlType:"map",keyType:e(t.keyType),valueType:e(t.valueType)};case nj.Time:return{sqlType:"time[s]"};case nj.TimeMicrosecond:return{sqlType:"time[us]"};case nj.TimeMillisecond:return{sqlType:"time[ms]"};case nj.TimeNanosecond:return{sqlType:"time[ns]"};case nj.TimeSecond:return{sqlType:"time[s]"};case nj.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case nj.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case nj.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case nj.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case nj.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw Error("unsupported arrow type: ".concat(t.toString()))}(t);return i.name=e,i}var s1=new TextEncoder,s2=class{constructor(e,t=null){this._onInstantiationProgress=[],this._onExecutionProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),null!=t&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,t)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker)return void console.error("cannot send a message since the worker is not set!");let i=this._nextMessageId++;return this._pendingRequests.set(i,e),this._worker.postMessage({messageId:i,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let i=e.data;switch(i.type){case"PROGRESS_UPDATE":for(let e of this._onExecutionProgress)e(i.data);return;case"LOG":return void this._logger.log(i.data);case"INSTANTIATE_PROGRESS":for(let e of this._onInstantiationProgress)e(i.data);return}let r=this._pendingRequests.get(i.requestId);if(!r)return void console.warn("unassociated response: [".concat(i.requestId,", ").concat(i.type.toString(),"]"));if(this._pendingRequests.delete(i.requestId),"ERROR"==i.type){let e=Error(i.data.message);e.name=i.data.name,null!=(t=Object.getOwnPropertyDescriptor(e,"stack"))&&t.writable&&(e.stack=i.data.stack),r.promiseRejecter(e);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"REGISTER_OPFS_FILE_NAME":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if("OK"==i.type)return void r.promiseResolver(i.data);break;case"INSTANTIATE":if(this._onInstantiationProgress=[],"OK"==i.type)return void r.promiseResolver(i.data);break;case"GLOB_FILE_INFOS":if("FILE_INFOS"==i.type)return void r.promiseResolver(i.data);break;case"GET_VERSION":if("VERSION_STRING"==i.type)return void r.promiseResolver(i.data);break;case"GET_FEATURE_FLAGS":if("FEATURE_FLAGS"==i.type)return void r.promiseResolver(i.data);break;case"GET_TABLE_NAMES":if("TABLE_NAMES"==i.type)return void r.promiseResolver(i.data);break;case"TOKENIZE":if("SCRIPT_TOKENS"==i.type)return void r.promiseResolver(i.data);break;case"COPY_FILE_TO_BUFFER":if("FILE_BUFFER"==i.type)return void r.promiseResolver(i.data);break;case"EXPORT_FILE_STATISTICS":if("FILE_STATISTICS"==i.type)return void r.promiseResolver(i.data);break;case"CONNECT":if("CONNECTION_INFO"==i.type)return void r.promiseResolver(i.data);break;case"RUN_PREPARED":case"RUN_QUERY":if("QUERY_RESULT"==i.type)return void r.promiseResolver(i.data);break;case"SEND_PREPARED":if("QUERY_RESULT_HEADER"==i.type)return void r.promiseResolver(i.data);break;case"START_PENDING_QUERY":case"POLL_PENDING_QUERY":if("QUERY_RESULT_HEADER_OR_NULL"==i.type)return void r.promiseResolver(i.data);break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],"SUCCESS"==i.type)return void r.promiseResolver(i.data);break;case"FETCH_QUERY_RESULTS":if("QUERY_RESULT_CHUNK"==i.type)return void r.promiseResolver(i.data);break;case"CREATE_PREPARED":if("PREPARED_STATEMENT_ID"==i.type)return void r.promiseResolver(i.data)}r.promiseRejecter(Error("unexpected response type: ".concat(i.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),0!=this._pendingRequests.size)return void console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));this._pendingRequests.clear()}async reset(){let e=new sX("RESET",null);return await this.postTask(e)}async ping(){let e=new sX("PING",null);await this.postTask(e)}async dropFile(e){let t=new sX("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new sX("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new sX("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,i=e=>{}){this._onInstantiationProgress.push(i);let r=new sX("INSTANTIATE",[e,t]);return await this.postTask(r)}async getVersion(){let e=new sX("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new sX("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new sX("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new sX("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new sX("CONNECT",null);return await this.postTask(e)}async connect(){return new sJ(this,await this.connectInternal())}async disconnect(e){let t=new sX("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let i=new sX("RUN_QUERY",[e,t]);return await this.postTask(i)}async startPendingQuery(e,t,i=!1){let r=new sX("START_PENDING_QUERY",[e,t,i]);return await this.postTask(r)}async pollPendingQuery(e){let t=new sX("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new sX("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new sX("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let i=new sX("GET_TABLE_NAMES",[e,t]);return await this.postTask(i)}async createPrepared(e,t){let i=new sX("CREATE_PREPARED",[e,t]);return await this.postTask(i)}async closePrepared(e,t){let i=new sX("CLOSE_PREPARED",[e,t]);await this.postTask(i)}async runPrepared(e,t,i){let r=new sX("RUN_PREPARED",[e,t,i]);return await this.postTask(r)}async sendPrepared(e,t,i){let r=new sX("SEND_PREPARED",[e,t,i]);return await this.postTask(r)}async globFiles(e){let t=new sX("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let i=s1.encode(t);await this.registerFileBuffer(e,i)}async registerFileURL(e,t,i,r){void 0===t&&(t=e);let n=new sX("REGISTER_FILE_URL",[e,t,i,r]);await this.postTask(n)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let i=new sX("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(i,[t.buffer])}async registerFileHandle(e,t,i,r){let n=new sX("REGISTER_FILE_HANDLE",[e,t,i,r]);await this.postTask(n,[])}async registerOPFSFileName(e){let t=new sX("REGISTER_OPFS_FILE_NAME",[e]);await this.postTask(t,[])}async collectFileStatistics(e,t){let i=new sX("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(i,[])}async exportFileStatistics(e){let t=new sX("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new sX("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let i=new sX("COPY_FILE_TO_PATH",[e,t]);await this.postTask(i)}async insertArrowFromIPCStream(e,t,i){if(0==t.length)return;let r=new sX("INSERT_ARROW_FROM_IPC_STREAM",[e,t,i]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(e,t,i){if(void 0!==i.columns){let e=[];for(let t in i.columns){let r=i.columns[t];e.push(s0(t,r))}i.columnsFlat=e,delete i.columns}let r=new sX("IMPORT_CSV_FROM_PATH",[e,t,i]);await this.postTask(r)}async insertJSONFromPath(e,t,i){if(void 0!==i.columns){let e=[];for(let t in i.columns){let r=i.columns[t];e.push(s0(t,r))}i.columnsFlat=e,delete i.columns}let r=new sX("IMPORT_JSON_FROM_PATH",[e,t,i]);await this.postTask(r)}};m=new TextDecoder,e=>("u">typeof SharedArrayBuffer&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),m.decode(e));var s4=((g=s4||{})[g.BUFFER=0]="BUFFER",g[g.NODE_FS=1]="NODE_FS",g[g.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",g[g.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",g[g.HTTP=4]="HTTP",g[g.S3=5]="S3",g),s8=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),s3=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),s6=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),s5=()=>(async e=>{try{return"u">typeof MessageChannel&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),s9="1.30.0".split(".");s9[0],s9[1],s9[2];var s7=()=>typeof navigator>"u",oe=null,ot=null,oi=null,or=null,on=null;async function os(){return null==oe&&(oe="u">typeof BigInt64Array),null==ot&&(ot=await s3()),null==oi&&(oi=await s5()),null==or&&(or=await s6()),null==on&&(on=await s8()),{bigInt64Array:oe,crossOriginIsolated:s7()||globalThis.crossOriginIsolated||!1,wasmExceptions:ot,wasmSIMD:or,wasmThreads:oi,wasmBulkMemory:on}}async function oo(e){let t=await os();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}w=null!=(b=sM())?sB(sL(b)):{},((e,t,i,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of sR(t))sP.call(e,n)||n===i||sV(e,n,{get:()=>t[n],enumerable:!(r=sF(t,n))||r.enumerable});return})(!v&&b&&b.__esModule?w:sV(w,"default",{value:b,enumerable:!0}),b)},9572:function(e,t,i){i.d(t,{r:()=>o});var r=i(11593);class n{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}let s=BigInt("3853314791062309107");class o extends n{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,t){await (0,r.i)`select pg_advisory_xact_lock(${r.i.lit(s)})`.execute(e)}async releaseMigrationLock(e,t){}}},76533:function(e,t,i){i.d(t,{n:()=>b});var r=i(75197),n=i(76059),s=i(47589);class o{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=(0,s.vV)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}var a=i(75460),l=i(82923),d=i(15659),u=i(19997),c=i(6886),h=i(64380);class p extends o{#t="";#i=[];get numParameters(){return this.#i.length}compileQuery(e){return this.#t="",this.#i=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),(0,s.vV)({query:e,sql:this.getSql(),parameters:[...this.#i]})}getSql(){return this.#t}visitSelectQuery(e){let t=void 0!==this.parentNode&&!l.L.is(this.parentNode)&&!n.P.is(this.parentNode)&&!r.u.is(this.parentNode)&&!u.B.is(this.parentNode)&&!c.M.is(this.parentNode);void 0===this.parentNode&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),t&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,t=", "){let i=e.length-1;for(let r=0;r<=i;r++)this.visitNode(e[r]),r<i&&this.append(t)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let t=this.nodeStack.find(d.V.is),i=t!==e;!i&&e.explain&&(this.visitNode(e.explain),this.append(" ")),i&&!h.F.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),i&&!h.F.is(t)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let t=this.nodeStack.find(d.V.is)!==e;!t&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),t&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!(0,s.HD)(e.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:t}=e;for(let e=0;e<t.length;++e)this.appendValue(t[e]),e!==t.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(m[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:t,parameters:i}=e;for(let e=0;e<t.length;++e)this.append(t[e]),i.length>e&&this.visitNode(i[e])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let t=this.nodeStack.find(d.V.is),i=t!==e;!i&&e.explain&&(this.visitNode(e.explain),this.append(" ")),i&&!h.F.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),i&&!h.F.is(t)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),!0===e.doNothing?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),(0,s.jn)(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),"cascade"===e.modifier?this.append(" cascade"):"restrict"===e.modifier&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(f[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return a.$X.is(e)&&"-"===e.operator}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){for(let t of(e.inOperator&&this.visitNode(e.inOperator),this.append("'$"),e.pathLegs))this.visitNode(t);this.append("'")}visitJSONPathLeg(e){let t="ArrayLocation"===e.type;this.append(t?"[":"."),this.append(String(e.value)),t&&this.append("]")}visitJSONOperatorChain(e){for(let t=0,i=e.values.length;t<i;t++)t===i-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[t])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#t+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let t=this.getLeftIdentifierWrapper(),i=this.getRightIdentifierWrapper(),r="";for(let n of e)r+=n,n===t?r+=t:n===i&&(r+=i);return r}addParameter(e){this.#i.push(e)}appendImmediateValue(e){if((0,s.HD)(e))this.append(`'${e}'`);else if((0,s.hj)(e)||(0,s.jn)(e))this.append(e.toString());else if((0,s.Ft)(e))this.append("null");else if((0,s.J_)(e))this.appendImmediateValue(e.toISOString());else if((0,s.C4)(e))this.appendImmediateValue(e.toString());else throw Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((e,t)=>e.modifier&&t.modifier?y[e.modifier]-y[t.modifier]:1),(0,s.vV)(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}let f=(0,s.vV)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),y=(0,s.vV)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),m=(0,s.vV)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"}),g=/"/g;class b extends p{sanitizeIdentifier(e){return e.replace(g,'""')}}},67771:function(e,t,i){i.d(t,{U:()=>r});class r{async init(){}async acquireConnection(){return new n}async beginTransaction(){}async commitTransaction(){}async rollbackTransaction(){}async releaseConnection(){}async destroy(){}}class n{async executeQuery(){return{rows:[]}}async *streamQuery(){}}},28165:function(e,t,i){i.d(t,{Q:()=>o,a:()=>a});var r=i(62240),n=i(57550),s=i(47589);class o{#r;get dynamicReference(){return this.#r}get refType(){}constructor(e){this.#r=e}toOperationNode(){return(0,n.F9)(this.#r)}}function a(e){return(0,s.Kn)(e)&&(0,r.x)(e)&&(0,s.HD)(e.dynamicReference)}},44951:function(e,t,i){i.d(t,{b:()=>R,Z:()=>L});var r=i(10957),n=i(11973),s=i(90679),o=i(16697),a=i(25381),l=i(15123),d=i(57550),u=i(50350),c=i(82923),h=i(60081),p=i(75460),f=i(47589);let y=(0,f.vV)({is:e=>"UnaryOperationNode"===e.kind,create:(e,t)=>(0,f.vV)({kind:"UnaryOperationNode",operator:e,operand:t})});var m=i(11942),g=i(39745),b=i(71661),v=i(33052),w=i(1784),_=i(36548),N=i(66523);let I=(0,f.vV)({is:e=>"JSONPathLegNode"===e.kind,create:(e,t)=>(0,f.vV)({kind:"JSONPathLegNode",type:e,value:t})});var S=i(54474),T=i(49188),x=i(62240),O=i(38419);class E{#n;constructor(e){this.#n=e}at(e){return this.#s("ArrayLocation",e)}key(e){return this.#s("Member",e)}#s(e,t){return new k(T.y.is(this.#n)?T.y.cloneWithTraversal(this.#n,S.t.is(this.#n.traversal)?S.t.cloneWithLeg(this.#n.traversal,I.create(e,t)):N.s.cloneWithValue(this.#n.traversal,O.g.createImmediate(t))):S.t.cloneWithLeg(this.#n,I.create(e,t)))}}class k extends E{#n;constructor(e){super(e),this.#n=e}get expressionType(){}as(e){return new A(this,e)}$castTo(){return new k(this.#n)}$notNull(){return new k(this.#n)}toOperationNode(){return this.#n}}class A{#o;#a;constructor(e,t){this.#o=e,this.#a=t}get expression(){return this.#o}get alias(){return this.#a}toOperationNode(){return w.i.create(this.#o.toOperationNode(),(0,x.x)(this.#a)?this.#a.toOperationNode():_.T.create(this.#a))}}var D=i(95315),C=i(83550);let B=(0,f.vV)({is:e=>"TupleNode"===e.kind,create:e=>(0,f.vV)({kind:"TupleNode",values:(0,f.vV)(e)})});var V=i(65147);let F=(0,f.vV)({is:e=>"CastNode"===e.kind,create:(e,t)=>(0,f.vV)({kind:"CastNode",expression:e,dataType:t})});function R(e=g.H){function t(e,t){return new h.Pc(y.create(p.$X.create(e),(0,d.jI)(t)))}let i=Object.assign(function(e,t,i){return new h.Pc((0,u.i9)(e,t,i))},{fn:void 0,eb:void 0,selectFrom:t=>(0,r.u)({queryId:(0,a.y)(),executor:e,queryNode:n.a.createFrom((0,s._V)(t))}),case:e=>new b.wY({node:v.j.create((0,f.o8)(e)?void 0:(0,d.jI)(e))}),ref:(e,t)=>(0,f.o8)(t)?new h.Pc((0,d.KX)(e)):new E((0,d.D2)(e,t)),jsonPath:()=>new E(S.t.create()),table:e=>new h.Pc((0,s.G2)(e)),val:e=>new h.Pc((0,m.j2)(e)),refTuple:(...e)=>new h.Pc(B.create(e.map(d.jI))),tuple:(...e)=>new h.Pc(B.create(e.map(m.j2))),lit:e=>new h.Pc((0,m.AB)(e)),unary:t,not:e=>t("not",e),exists:e=>t("exists",e),neg:e=>t("-",e),between:(e,t,i)=>new h.Pc(D.a.create((0,d.jI)(e),p.$X.create("between"),C.O.create((0,m.j2)(t),(0,m.j2)(i)))),betweenSymmetric:(e,t,i)=>new h.Pc(D.a.create((0,d.jI)(e),p.$X.create("between symmetric"),C.O.create((0,m.j2)(t),(0,m.j2)(i)))),and:e=>new h.Pc((0,f.DM)(e)?(0,u.QX)(e,"and"):(0,u.Li)(e,"and")),or:e=>new h.Pc((0,f.DM)(e)?(0,u.QX)(e,"or"):(0,u.Li)(e,"or")),parens(...e){let t=(0,u.k0)(e);return new h.Pc(c.L.is(t)?t:c.L.create(t))},cast:(e,t)=>new h.Pc(F.create((0,d.jI)(e),(0,V.z)(t))),withSchema:t=>R(e.withPluginAtFront(new o.v(t)))});return i.fn=(0,l.W)(),i.eb=i,i}function L(e){return R()}},60081:function(e,t,i){i.d(t,{Pc:()=>u});var r=i(1784),n=i(83550),s=i(36548),o=i(62240),a=i(27306),l=i(82923),d=i(50350);class u{#n;constructor(e){this.#n=e}get expressionType(){}as(e){return new c(this,e)}or(...e){return new h(a.O.create(this.#n,(0,d.k0)(e)))}and(...e){return new p(n.O.create(this.#n,(0,d.k0)(e)))}$castTo(){return new u(this.#n)}$notNull(){return new u(this.#n)}toOperationNode(){return this.#n}}class c{#l;#a;constructor(e,t){this.#l=e,this.#a=t}get expression(){return this.#l}get alias(){return this.#a}toOperationNode(){return r.i.create(this.#l.toOperationNode(),(0,o.x)(this.#a)?this.#a.toOperationNode():s.T.create(this.#a))}}class h{#n;constructor(e){this.#n=e}get expressionType(){}as(e){return new c(this,e)}or(...e){return new h(a.O.create(this.#n,(0,d.k0)(e)))}$castTo(){return new h(this.#n)}toOperationNode(){return l.L.create(this.#n)}}class p{#n;constructor(e){this.#n=e}get expressionType(){}as(e){return new c(this,e)}and(...e){return new p(n.O.create(this.#n,(0,d.k0)(e)))}$castTo(){return new p(this.#n)}toOperationNode(){return l.L.create(this.#n)}}},90375:function(e,t,i){i.d(t,{$2:()=>eU});var r=i(47589);let n=(0,r.vV)({is:e=>"AlterTableNode"===e.kind,create:e=>(0,r.vV)({kind:"AlterTableNode",table:e}),cloneWithTableProps:(e,t)=>(0,r.vV)({...e,...t}),cloneWithColumnAlteration:(e,t)=>(0,r.vV)({...e,columnAlterations:e.columnAlterations?[...e.columnAlterations,t]:[t]})});var s=i(36548);let o=(0,r.vV)({is:e=>"CreateIndexNode"===e.kind,create:e=>(0,r.vV)({kind:"CreateIndexNode",name:s.T.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t}),cloneWithColumns:(e,t)=>(0,r.vV)({...e,columns:[...e.columns||[],...t]})}),a=(0,r.vV)({is:e=>"CreateSchemaNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"CreateSchemaNode",schema:s.T.create(e),...t}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});var l=i(75197),d=i(28202);let u=(0,r.vV)({is:e=>"DropIndexNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"DropIndexNode",name:d.j.create(e),...t}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),c=(0,r.vV)({is:e=>"DropSchemaNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"DropSchemaNode",schema:s.T.create(e),...t}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),h=(0,r.vV)({is:e=>"DropTableNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"DropTableNode",table:e,...t}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});var p=i(90679);let f=(0,r.vV)({is:e=>"AddColumnNode"===e.kind,create:e=>(0,r.vV)({kind:"AddColumnNode",column:e})});var y=i(1824);let m=(0,r.vV)({is:e=>"ColumnDefinitionNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"ColumnDefinitionNode",column:y.k.create(e),dataType:t}),cloneWithFrontModifier:(e,t)=>(0,r.vV)({...e,frontModifiers:e.frontModifiers?(0,r.vV)([...e.frontModifiers,t]):[t]}),cloneWithEndModifier:(e,t)=>(0,r.vV)({...e,endModifiers:e.endModifiers?(0,r.vV)([...e.endModifiers,t]):[t]}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),g=(0,r.vV)({is:e=>"DropColumnNode"===e.kind,create:e=>(0,r.vV)({kind:"DropColumnNode",column:y.k.create(e)})}),b=(0,r.vV)({is:e=>"RenameColumnNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"RenameColumnNode",column:y.k.create(e),renameTo:y.k.create(t)})});var v=i(26481);let w=(0,r.vV)({is:e=>"CheckConstraintNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"CheckConstraintNode",expression:e,name:t?s.T.create(t):void 0})}),_=["no action","restrict","cascade","set null","set default"],N=(0,r.vV)({is:e=>"ReferencesNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"ReferencesNode",table:e,columns:(0,r.vV)([...t])}),cloneWithOnDelete:(e,t)=>(0,r.vV)({...e,onDelete:t}),cloneWithOnUpdate:(e,t)=>(0,r.vV)({...e,onUpdate:t})});var I=i(8809),S=i(57550),T=i(62240),x=i(38419);function O(e){return(0,T.x)(e)?e.toOperationNode():x.g.createImmediate(e)}let E=(0,r.vV)({is:e=>"GeneratedNode"===e.kind,create:e=>(0,r.vV)({kind:"GeneratedNode",...e}),createWithExpression:e=>(0,r.vV)({kind:"GeneratedNode",always:!0,expression:e}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),k=(0,r.vV)({is:e=>"DefaultValueNode"===e.kind,create:e=>(0,r.vV)({kind:"DefaultValueNode",defaultValue:e})});function A(e){if(_.includes(e))return e;throw Error(`invalid OnModifyForeignAction ${e}`)}class D{#n;constructor(e){this.#n=e}autoIncrement(){return new D(m.cloneWith(this.#n,{autoIncrement:!0}))}identity(){return new D(m.cloneWith(this.#n,{identity:!0}))}primaryKey(){return new D(m.cloneWith(this.#n,{primaryKey:!0}))}references(e){let t=(0,S.KX)(e);if(!t.table||I.B.is(t.column))throw Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new D(m.cloneWith(this.#n,{references:N.create(t.table,[t.column])}))}onDelete(e){if(!this.#n.references)throw Error("on delete constraint can only be added for foreign keys");return new D(m.cloneWith(this.#n,{references:N.cloneWithOnDelete(this.#n.references,A(e))}))}onUpdate(e){if(!this.#n.references)throw Error("on update constraint can only be added for foreign keys");return new D(m.cloneWith(this.#n,{references:N.cloneWithOnUpdate(this.#n.references,A(e))}))}unique(){return new D(m.cloneWith(this.#n,{unique:!0}))}notNull(){return new D(m.cloneWith(this.#n,{notNull:!0}))}unsigned(){return new D(m.cloneWith(this.#n,{unsigned:!0}))}defaultTo(e){return new D(m.cloneWith(this.#n,{defaultTo:k.create(O(e))}))}check(e){return new D(m.cloneWith(this.#n,{check:w.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new D(m.cloneWith(this.#n,{generated:E.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new D(m.cloneWith(this.#n,{generated:E.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new D(m.cloneWith(this.#n,{generated:E.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#n.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new D(m.cloneWith(this.#n,{generated:E.cloneWith(this.#n.generated,{stored:!0})}))}modifyFront(e){return new D(m.cloneWithFrontModifier(this.#n,e.toOperationNode()))}nullsNotDistinct(){return new D(m.cloneWith(this.#n,{nullsNotDistinct:!0}))}ifNotExists(){return new D(m.cloneWith(this.#n,{ifNotExists:!0}))}modifyEnd(e){return new D(m.cloneWithEndModifier(this.#n,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#n}}(0,v.q)(D,"don't await ColumnDefinitionBuilder instances directly.");let C=(0,r.vV)({is:e=>"ModifyColumnNode"===e.kind,create:e=>(0,r.vV)({kind:"ModifyColumnNode",column:e})});var B=i(65147);let V=(0,r.vV)({is:e=>"ForeignKeyConstraintNode"===e.kind,create:(e,t,i,n)=>(0,r.vV)({kind:"ForeignKeyConstraintNode",columns:e,references:N.create(t,i),name:n?s.T.create(n):void 0}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});class F{#n;constructor(e){this.#n=e}onDelete(e){return new F(V.cloneWith(this.#n,{onDelete:A(e)}))}onUpdate(e){return new F(V.cloneWith(this.#n,{onUpdate:A(e)}))}$call(e){return e(this)}toOperationNode(){return this.#n}}(0,v.q)(F,"don't await ForeignKeyConstraintBuilder instances directly.");let R=(0,r.vV)({is:e=>"AddConstraintNode"===e.kind,create:e=>(0,r.vV)({kind:"AddConstraintNode",constraint:e})}),L=(0,r.vV)({is:e=>"UniqueConstraintNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"UniqueConstraintNode",columns:(0,r.vV)(e.map(y.k.create)),name:t?s.T.create(t):void 0,nullsNotDistinct:i}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),P=(0,r.vV)({is:e=>"DropConstraintNode"===e.kind,create:e=>(0,r.vV)({kind:"DropConstraintNode",constraintName:s.T.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),M=(0,r.vV)({is:e=>"AlterColumnNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"AlterColumnNode",column:y.k.create(e),[t]:i})});class U{#d;constructor(e){this.#d=e}setDataType(e){return new W(M.create(this.#d,"dataType",(0,B.z)(e)))}setDefault(e){return new W(M.create(this.#d,"setDefault",O(e)))}dropDefault(){return new W(M.create(this.#d,"dropDefault",!0))}setNotNull(){return new W(M.create(this.#d,"setNotNull",!0))}dropNotNull(){return new W(M.create(this.#d,"dropNotNull",!0))}$call(e){return e(this)}}(0,v.q)(U,"don't await AlterColumnBuilder instances");class W{#u;constructor(e){this.#u=e}toOperationNode(){return this.#u}}(0,v.q)(W,"don't await AlteredColumnBuilder instances");class z{#c;constructor(e){this.#c=(0,r.vV)(e)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(z,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class q{#c;constructor(e){this.#c=(0,r.vV)(e)}onDelete(e){return new q({...this.#c,constraintBuilder:this.#c.constraintBuilder.onDelete(e)})}onUpdate(e){return new q({...this.#c,constraintBuilder:this.#c.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(n.cloneWithTableProps(this.#c.node,{addConstraint:R.create(this.#c.constraintBuilder.toOperationNode())}),this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(q,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class j{#c;constructor(e){this.#c=(0,r.vV)(e)}ifExists(){return new j({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropConstraint:P.cloneWith(this.#c.node.dropConstraint,{ifExists:!0})})})}cascade(){return new j({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropConstraint:P.cloneWith(this.#c.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new j({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropConstraint:P.cloneWith(this.#c.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(j,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");let $=(0,r.vV)({is:e=>"PrimaryKeyConstraintNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"PrimaryKeyConstraintNode",columns:(0,r.vV)(e.map(y.k.create)),name:t?s.T.create(t):void 0})}),Q=(0,r.vV)({is:e=>"AddIndexNode"===e.kind,create:e=>(0,r.vV)({kind:"AddIndexNode",name:s.T.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t}),cloneWithColumns:(e,t)=>(0,r.vV)({...e,columns:[...e.columns||[],...t]})});var Z=i(67386);class J{#c;constructor(e){this.#c=(0,r.vV)(e)}unique(){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWith(this.#c.node.addIndex,{unique:!0})})})}column(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWithColumns(this.#c.node.addIndex,[(0,S.Dz)(e)])})})}columns(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWithColumns(this.#c.node.addIndex,e.map(S.Dz))})})}expression(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWithColumns(this.#c.node.addIndex,[e.toOperationNode()])})})}using(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWith(this.#c.node.addIndex,{using:Z.x.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(J,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class G{#n;constructor(e){this.#n=e}toOperationNode(){return this.#n}nullsNotDistinct(){return new G(L.cloneWith(this.#n,{nullsNotDistinct:!0}))}}(0,v.q)(G,"don't await UniqueConstraintNodeBuilder instances directly.");class K{#c;constructor(e){this.#c=(0,r.vV)(e)}renameTo(e){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{renameTo:(0,p.G2)(e)})})}setSchema(e){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{setSchema:s.T.create(e)})})}alterColumn(e,t){let i=t(new U(e));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,i.toOperationNode())})}dropColumn(e){return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,g.create(e))})}renameColumn(e,t){return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,b.create(e,t))})}addColumn(e,t,i=r.ZT){let s=i(new D(m.create(e,(0,B.z)(t))));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,f.create(s.toOperationNode()))})}modifyColumn(e,t,i=r.ZT){let s=i(new D(m.create(e,(0,B.z)(t))));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,C.create(s.toOperationNode()))})}addUniqueConstraint(e,t,i=r.ZT){let s=i(new G(L.create(t,e)));return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addConstraint:R.create(s.toOperationNode())})})}addCheckConstraint(e,t){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addConstraint:R.create(w.create(t.toOperationNode(),e))})})}addForeignKeyConstraint(e,t,i,r){return new q({...this.#c,constraintBuilder:new F(V.create(t.map(y.k.create),(0,p.G2)(i),r.map(y.k.create),e))})}addPrimaryKeyConstraint(e,t){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addConstraint:R.create($.create(t,e))})})}dropConstraint(e){return new j({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropConstraint:P.create(e)})})}addIndex(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.create(e)})})}dropIndex(e){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropIndex:u.create(e)})})}$call(e){return e(this)}}(0,v.q)(K,"don't await AlterTableBuilder instances");class Y{#c;constructor(e){this.#c=(0,r.vV)(e)}alterColumn(e,t){let i=t(new U(e));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,i.toOperationNode())})}dropColumn(e){return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,g.create(e))})}renameColumn(e,t){return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,b.create(e,t))})}addColumn(e,t,i=r.ZT){let s=i(new D(m.create(e,(0,B.z)(t))));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,f.create(s.toOperationNode()))})}modifyColumn(e,t,i=r.ZT){let s=i(new D(m.create(e,(0,B.z)(t))));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,C.create(s.toOperationNode()))})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(Y,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var H=i(50350),X=i(15659),ee=i(24107);class et extends ee.s{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class ei{#c;constructor(e){this.#c=(0,r.vV)(e)}ifNotExists(){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{ifNotExists:!0})})}unique(){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{unique:!0})})}nullsNotDistinct(){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{nullsNotDistinct:!0})})}on(e){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{table:(0,p.G2)(e)})})}column(e){return new ei({...this.#c,node:o.cloneWithColumns(this.#c.node,[(0,S.Dz)(e)])})}columns(e){return new ei({...this.#c,node:o.cloneWithColumns(this.#c.node,e.map(S.Dz))})}expression(e){return new ei({...this.#c,node:o.cloneWithColumns(this.#c.node,[e.toOperationNode()])})}using(e){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{using:Z.x.createWithSql(e)})})}where(...e){let t=new et;return new ei({...this.#c,node:X.V.cloneWithWhere(this.#c.node,t.transformNode((0,H.k0)(e)))})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(ei,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class er{#c;constructor(e){this.#c=(0,r.vV)(e)}ifNotExists(){return new er({...this.#c,node:a.cloneWith(this.#c.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(er,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var en=i(28173);class es{#c;constructor(e){this.#c=(0,r.vV)(e)}temporary(){return new es({...this.#c,node:l.u.cloneWith(this.#c.node,{temporary:!0})})}onCommit(e){return new es({...this.#c,node:l.u.cloneWith(this.#c.node,{onCommit:function(e){if(l.h.includes(e))return e;throw Error(`invalid OnCommitAction ${e}`)}(e)})})}ifNotExists(){return new es({...this.#c,node:l.u.cloneWith(this.#c.node,{ifNotExists:!0})})}addColumn(e,t,i=r.ZT){let n=i(new D(m.create(e,(0,B.z)(t))));return new es({...this.#c,node:l.u.cloneWithColumn(this.#c.node,n.toOperationNode())})}addPrimaryKeyConstraint(e,t){return new es({...this.#c,node:l.u.cloneWithConstraint(this.#c.node,$.create(t,e))})}addUniqueConstraint(e,t,i=r.ZT){let n=i(new G(L.create(t,e)));return new es({...this.#c,node:l.u.cloneWithConstraint(this.#c.node,n.toOperationNode())})}addCheckConstraint(e,t){return new es({...this.#c,node:l.u.cloneWithConstraint(this.#c.node,w.create(t.toOperationNode(),e))})}addForeignKeyConstraint(e,t,i,n,s=r.ZT){let o=s(new F(V.create(t.map(y.k.create),(0,p.G2)(i),n.map(y.k.create),e)));return new es({...this.#c,node:l.u.cloneWithConstraint(this.#c.node,o.toOperationNode())})}modifyFront(e){return new es({...this.#c,node:l.u.cloneWithFrontModifier(this.#c.node,e.toOperationNode())})}modifyEnd(e){return new es({...this.#c,node:l.u.cloneWithEndModifier(this.#c.node,e.toOperationNode())})}as(e){return new es({...this.#c,node:l.u.cloneWith(this.#c.node,{selectQuery:(0,en.BJ)(e)})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(es,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class eo{#c;constructor(e){this.#c=(0,r.vV)(e)}on(e){return new eo({...this.#c,node:u.cloneWith(this.#c.node,{table:(0,p.G2)(e)})})}ifExists(){return new eo({...this.#c,node:u.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new eo({...this.#c,node:u.cloneWith(this.#c.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(eo,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class ea{#c;constructor(e){this.#c=(0,r.vV)(e)}ifExists(){return new ea({...this.#c,node:c.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new ea({...this.#c,node:c.cloneWith(this.#c.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(ea,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class el{#c;constructor(e){this.#c=(0,r.vV)(e)}ifExists(){return new el({...this.#c,node:h.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new el({...this.#c,node:h.cloneWith(this.#c.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(el,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var ed=i(25381),eu=i(16697),ec=i(19997);class eh{#h=new et;transformQuery(e){return this.#h.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class ep{#c;constructor(e){this.#c=(0,r.vV)(e)}temporary(){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{temporary:!0})})}materialized(){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{materialized:!0})})}ifNotExists(){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{ifNotExists:!0})})}orReplace(){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{orReplace:!0})})}columns(e){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{columns:e.map(S.xM)})})}as(e){let t=e.withPlugin(new eh).toOperationNode();return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{as:t})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(ep,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");let ef=(0,r.vV)({is:e=>"DropViewNode"===e.kind,create:e=>(0,r.vV)({kind:"DropViewNode",name:d.j.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});class ey{#c;constructor(e){this.#c=(0,r.vV)(e)}materialized(){return new ey({...this.#c,node:ef.cloneWith(this.#c.node,{materialized:!0})})}ifExists(){return new ey({...this.#c,node:ef.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new ey({...this.#c,node:ef.cloneWith(this.#c.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(ey,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var em=i(18181);let eg=(0,r.vV)({is:e=>"CreateTypeNode"===e.kind,create:e=>(0,r.vV)({kind:"CreateTypeNode",name:e}),cloneWithEnum:(e,t)=>(0,r.vV)({...e,enum:em.F.create(t.map(e=>x.g.createImmediate(e)))})});class eb{#c;constructor(e){this.#c=(0,r.vV)(e)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}asEnum(e){return new eb({...this.#c,node:eg.cloneWithEnum(this.#c.node,e)})}$call(e){return e(this)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,v.q)(eb,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");let ev=(0,r.vV)({is:e=>"DropTypeNode"===e.kind,create:e=>(0,r.vV)({kind:"DropTypeNode",name:e}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});class ew{#c;constructor(e){this.#c=(0,r.vV)(e)}ifExists(){return new ew({...this.#c,node:ev.cloneWith(this.#c.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}function e_(e){if(!e.includes("."))return d.j.create(e);{let t=e.split(".").map(eN);if(2===t.length)return d.j.createWithSchema(t[0],t[1]);throw Error(`invalid schemable identifier ${e}`)}}function eN(e){return e.trim()}(0,v.q)(ew,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");class eI{#p;constructor(e){this.#p=e}createTable(e){return new es({queryId:(0,ed.y)(),executor:this.#p,node:l.u.create((0,p.G2)(e))})}dropTable(e){return new el({queryId:(0,ed.y)(),executor:this.#p,node:h.create((0,p.G2)(e))})}createIndex(e){return new ei({queryId:(0,ed.y)(),executor:this.#p,node:o.create(e)})}dropIndex(e){return new eo({queryId:(0,ed.y)(),executor:this.#p,node:u.create(e)})}createSchema(e){return new er({queryId:(0,ed.y)(),executor:this.#p,node:a.create(e)})}dropSchema(e){return new ea({queryId:(0,ed.y)(),executor:this.#p,node:c.create(e)})}alterTable(e){return new K({queryId:(0,ed.y)(),executor:this.#p,node:n.create((0,p.G2)(e))})}createView(e){return new ep({queryId:(0,ed.y)(),executor:this.#p,node:ec.B.create(e)})}dropView(e){return new ey({queryId:(0,ed.y)(),executor:this.#p,node:ef.create(e)})}createType(e){return new eb({queryId:(0,ed.y)(),executor:this.#p,node:eg.create(e_(e))})}dropType(e){return new ew({queryId:(0,ed.y)(),executor:this.#p,node:ev.create(e_(e))})}withPlugin(e){return new eI(this.#p.withPlugin(e))}withoutPlugins(){return new eI(this.#p.withoutPlugins())}withSchema(e){return new eI(this.#p.withPluginAtFront(new eu.v(e)))}}var eS=i(28165);class eT{ref(e){return new eS.Q(e)}}class ex{#f;constructor(e){this.#f=e}async provideConnection(e){let t=await this.#f.acquireConnection();try{return await e(t)}finally{await this.#f.releaseConnection(t)}}}var eO=i(3255),eE=i(56305);class ek extends eE.u{#y;#m;#g;constructor(e,t,i,r=[]){super(r),this.#y=e,this.#m=t,this.#g=i}get adapter(){return this.#m}compileQuery(e){return this.#y.compileQuery(e)}provideConnection(e){return this.#g.provideConnection(e)}withPlugins(e){return new ek(this.#y,this.#m,this.#g,[...this.plugins,...e])}withPlugin(e){return new ek(this.#y,this.#m,this.#g,[...this.plugins,e])}withPluginAtFront(e){return new ek(this.#y,this.#m,this.#g,[e,...this.plugins])}withConnectionProvider(e){return new ek(this.#y,this.#m,e,[...this.plugins])}withoutPlugins(){return new ek(this.#y,this.#m,this.#g,[])}}function eA(){return"undefined"!=typeof performance&&(0,r.mf)(performance.now)?performance.now():Date.now()}class eD{#f;#b;#v;#w;#_;#N=new WeakSet;constructor(e,t){this.#w=!1,this.#f=e,this.#b=t}async init(){if(this.#_)throw Error("driver has already been destroyed");this.#v||(this.#v=this.#f.init().then(()=>{this.#w=!0}).catch(e=>(this.#v=void 0,Promise.reject(e)))),await this.#v}async acquireConnection(){if(this.#_)throw Error("driver has already been destroyed");this.#w||await this.init();let e=await this.#f.acquireConnection();return this.#N.has(e)||(this.#I()&&this.#S(e),this.#N.add(e)),e}async releaseConnection(e){await this.#f.releaseConnection(e)}beginTransaction(e,t){return this.#f.beginTransaction(e,t)}commitTransaction(e){return this.#f.commitTransaction(e)}rollbackTransaction(e){return this.#f.rollbackTransaction(e)}async destroy(){this.#v&&(await this.#v,this.#_||(this.#_=this.#f.destroy().catch(e=>(this.#_=void 0,Promise.reject(e)))),await this.#_)}#I(){return this.#b.isLevelEnabled("query")||this.#b.isLevelEnabled("error")}#S(e){let t=e.executeQuery;e.executeQuery=async i=>{let r,n=eA();try{return await t.call(e,i)}catch(e){throw r=e,await this.#T(e,i,n),e}finally{r||await this.#x(i,n)}}}async #T(e,t,i){await this.#b.error(()=>({level:"error",error:e,query:t,queryDurationMillis:this.#O(i)}))}async #x(e,t){await this.#b.query(()=>({level:"query",query:e,queryDurationMillis:this.#O(t)}))}#O(e){return eA()-e}}let eC=()=>{};class eB{#E;#k;constructor(e){this.#E=e}async provideConnection(e){for(;this.#k;)await this.#k.catch(eC);return this.#k=this.#A(e).finally(()=>{this.#k=void 0}),this.#k}async #A(e){return await e(this.#E)}}let eV=["read uncommitted","read committed","repeatable read","serializable","snapshot"];var eF=i(15123);(0,r.vV)(["query","error"]);class eR{#D;#C;constructor(e){(0,r.mf)(e)?(this.#C=e,this.#D=(0,r.vV)({query:!0,error:!0})):(this.#C=eL,this.#D=(0,r.vV)({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#D[e]}async query(e){this.#D.query&&await this.#C(e())}async error(e){this.#D.error&&await this.#C(e())}}function eL(e){"query"===e.level?(console.log(`kysely:query: ${e.query.sql}`),console.log(`kysely:query: duration: ${e.queryDurationMillis.toFixed(1)}ms`)):"error"===e.level&&(e.error instanceof Error?console.error(`kysely:error: ${e.error.stack??e.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:e.error,query:e.query.sql,queryDurationMillis:e.queryDurationMillis})}`))}var eP=i(71661),eM=i(33052);class eU extends eO.x{#c;constructor(e){var t;let i,n;if(t=e,(0,r.Kn)(t)&&(0,r.Kn)(t.config)&&(0,r.Kn)(t.driver)&&(0,r.Kn)(t.executor)&&(0,r.Kn)(t.dialect))i={executor:e.executor},n={...e};else{let t=e.dialect,r=t.createDriver(),s=t.createQueryCompiler(),o=t.createAdapter(),a=new eD(r,new eR(e.log??[])),l=new ek(s,o,new ex(a),e.plugins??[]);i={executor:l},n={config:e,executor:l,dialect:t,driver:a}}super(i),this.#c=(0,r.vV)(n)}get schema(){return new eI(this.#c.executor)}get dynamic(){return new eT}get introspection(){return this.#c.dialect.createIntrospector(this.withoutPlugins())}case(e){return new eP.wY({node:eM.j.create((0,r.o8)(e)?void 0:(0,en.BJ)(e))})}get fn(){return(0,eF.W)()}transaction(){return new eq({...this.#c})}connection(){return new ez({...this.#c})}withPlugin(e){return new eU({...this.#c,executor:this.#c.executor.withPlugin(e)})}withoutPlugins(){return new eU({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(e){return new eU({...this.#c,executor:this.#c.executor.withPluginAtFront(new eu.v(e))})}withTables(){return new eU({...this.#c})}async destroy(){await this.#c.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#c.executor}executeQuery(e,t=(0,ed.y)()){let i=(0,r.Kn)(e)&&(0,r.mf)(e.compile)?e.compile():e;return this.getExecutor().executeQuery(i,t)}}class eW extends eU{#c;constructor(e){super(e),this.#c=e}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new eW({...this.#c,executor:this.#c.executor.withPlugin(e)})}withoutPlugins(){return new eW({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(e){return new eW({...this.#c,executor:this.#c.executor.withPluginAtFront(new eu.v(e))})}withTables(){return new eW({...this.#c})}}class ez{#c;constructor(e){this.#c=(0,r.vV)(e)}async execute(e){return this.#c.executor.provideConnection(async t=>{let i=this.#c.executor.withConnectionProvider(new eB(t)),r=new eU({...this.#c,executor:i});return await e(r)})}}(0,v.q)(ez,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class eq{#c;constructor(e){this.#c=(0,r.vV)(e)}setIsolationLevel(e){return new eq({...this.#c,isolationLevel:e})}async execute(e){let{isolationLevel:t,...i}=this.#c,r={isolationLevel:t};return function(e){if(e.isolationLevel&&!eV.includes(e.isolationLevel))throw Error(`invalid transaction isolation level ${e.isolationLevel}`)}(r),this.#c.executor.provideConnection(async t=>{let n=this.#c.executor.withConnectionProvider(new eB(t)),s=new eW({...i,executor:n});try{await this.#c.driver.beginTransaction(t,r);let i=await e(s);return await this.#c.driver.commitTransaction(t),i}catch(e){throw await this.#c.driver.rollbackTransaction(t),e}})}}(0,v.q)(eq,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method")},1784:function(e,t,i){i.d(t,{i:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"AliasNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"AliasNode",node:e,alias:t})})},83550:function(e,t,i){i.d(t,{O:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"AndNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"AndNode",left:e,right:t})})},95315:function(e,t,i){i.d(t,{a:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"BinaryOperationNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"BinaryOperationNode",leftOperand:e,operator:t,rightOperand:i})})},33052:function(e,t,i){i.d(t,{j:()=>s});var r=i(47589),n=i(96409);let s=(0,r.vV)({is:e=>"CaseNode"===e.kind,create:e=>(0,r.vV)({kind:"CaseNode",value:e}),cloneWithWhen:(e,t)=>(0,r.vV)({...e,when:(0,r.vV)(e.when?[...e.when,t]:[t])}),cloneWithThen:(e,t)=>(0,r.vV)({...e,when:e.when?(0,r.vV)([...e.when.slice(0,-1),n.$.cloneWithResult(e.when[e.when.length-1],t)]):void 0}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})})},1824:function(e,t,i){i.d(t,{k:()=>s});var r=i(47589),n=i(36548);let s=(0,r.vV)({is:e=>"ColumnNode"===e.kind,create:e=>(0,r.vV)({kind:"ColumnNode",column:n.T.create(e)})})},75197:function(e,t,i){i.d(t,{h:()=>n,u:()=>s});var r=i(47589);let n=["preserve rows","delete rows","drop"],s=(0,r.vV)({is:e=>"CreateTableNode"===e.kind,create:e=>(0,r.vV)({kind:"CreateTableNode",table:e,columns:(0,r.vV)([])}),cloneWithColumn:(e,t)=>(0,r.vV)({...e,columns:(0,r.vV)([...e.columns,t])}),cloneWithConstraint:(e,t)=>(0,r.vV)({...e,constraints:e.constraints?(0,r.vV)([...e.constraints,t]):(0,r.vV)([t])}),cloneWithFrontModifier:(e,t)=>(0,r.vV)({...e,frontModifiers:e.frontModifiers?(0,r.vV)([...e.frontModifiers,t]):(0,r.vV)([t])}),cloneWithEndModifier:(e,t)=>(0,r.vV)({...e,endModifiers:e.endModifiers?(0,r.vV)([...e.endModifiers,t]):(0,r.vV)([t])}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})})},19997:function(e,t,i){i.d(t,{B:()=>s});var r=i(47589),n=i(28202);let s=(0,r.vV)({is:e=>"CreateViewNode"===e.kind,create:e=>(0,r.vV)({kind:"CreateViewNode",name:n.j.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})})},75689:function(e,t,i){i.d(t,{U:()=>a});var r=i(47589),n=i(88270),s=i(76374);let o=(0,r.vV)({is:e=>"UsingNode"===e.kind,create:e=>(0,r.vV)({kind:"UsingNode",tables:(0,r.vV)(e)}),cloneWithTables:(e,t)=>(0,r.vV)({...e,tables:(0,r.vV)([...e.tables,...t])})}),a=(0,r.vV)({is:e=>"DeleteQueryNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"DeleteQueryNode",from:n.e.create(e),...t&&{with:t}}),cloneWithOrderByItems:(e,t)=>(0,r.vV)({...e,orderBy:e.orderBy?s.r.cloneWithItems(e.orderBy,t):s.r.create(t)}),cloneWithoutOrderBy:e=>(0,r.vV)({...e,orderBy:void 0}),cloneWithLimit:(e,t)=>(0,r.vV)({...e,limit:t}),cloneWithoutLimit:e=>(0,r.vV)({...e,limit:void 0}),cloneWithUsing:(e,t)=>(0,r.vV)({...e,using:void 0!==e.using?o.cloneWithTables(e.using,t):o.create(t)})})},88270:function(e,t,i){i.d(t,{e:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"FromNode"===e.kind,create:e=>(0,r.vV)({kind:"FromNode",froms:(0,r.vV)(e)}),cloneWithFroms:(e,t)=>(0,r.vV)({...e,froms:(0,r.vV)([...e.froms,...t])})})},36548:function(e,t,i){i.d(t,{T:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"IdentifierNode"===e.kind,create:e=>(0,r.vV)({kind:"IdentifierNode",name:e})})},76059:function(e,t,i){i.d(t,{P:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"InsertQueryNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"InsertQueryNode",into:e,...t&&{with:t},replace:i}),createWithoutInto:()=>(0,r.vV)({kind:"InsertQueryNode"}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})})},37203:function(e,t,i){i.d(t,{u:()=>a});var r=i(47589),n=i(83550),s=i(27306);let o=(0,r.vV)({is:e=>"OnNode"===e.kind,create:e=>(0,r.vV)({kind:"OnNode",on:e}),cloneWithOperation:(e,t,i)=>(0,r.vV)({...e,on:"And"===t?n.O.create(e.on,i):s.O.create(e.on,i)})}),a=(0,r.vV)({is:e=>"JoinNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"JoinNode",joinType:e,table:t,on:void 0}),createWithOn:(e,t,i)=>(0,r.vV)({kind:"JoinNode",joinType:e,table:t,on:o.create(i)}),cloneWithOn:(e,t)=>(0,r.vV)({...e,on:e.on?o.cloneWithOperation(e.on,"And",t):o.create(t)})})},66523:function(e,t,i){i.d(t,{s:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"JSONOperatorChainNode"===e.kind,create:e=>(0,r.vV)({kind:"JSONOperatorChainNode",operator:e,values:(0,r.vV)([])}),cloneWithValue:(e,t)=>(0,r.vV)({...e,values:(0,r.vV)([...e.values,t])})})},54474:function(e,t,i){i.d(t,{t:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"JSONPathNode"===e.kind,create:e=>(0,r.vV)({kind:"JSONPathNode",inOperator:e,pathLegs:(0,r.vV)([])}),cloneWithLeg:(e,t)=>(0,r.vV)({...e,pathLegs:(0,r.vV)([...e.pathLegs,t])})})},49188:function(e,t,i){i.d(t,{y:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"JSONReferenceNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"JSONReferenceNode",reference:e,traversal:t}),cloneWithTraversal:(e,t)=>(0,r.vV)({...e,traversal:t})})},56251:function(e,t,i){i.d(t,{Z:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"LimitNode"===e.kind,create:e=>(0,r.vV)({kind:"LimitNode",limit:e})})},64380:function(e,t,i){i.d(t,{F:()=>s});var r=i(47589),n=i(96409);let s=(0,r.vV)({is:e=>"MergeQueryNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"MergeQueryNode",into:e,...t&&{with:t}}),cloneWithUsing:(e,t)=>(0,r.vV)({...e,using:t}),cloneWithWhen:(e,t)=>(0,r.vV)({...e,whens:e.whens?(0,r.vV)([...e.whens,t]):(0,r.vV)([t])}),cloneWithThen:(e,t)=>(0,r.vV)({...e,whens:e.whens?(0,r.vV)([...e.whens.slice(0,-1),n.$.cloneWithResult(e.whens[e.whens.length-1],t)]):void 0})})},62240:function(e,t,i){i.d(t,{x:()=>n});var r=i(47589);function n(e){return(0,r.Kn)(e)&&(0,r.mf)(e.toOperationNode)}},24107:function(e,t,i){i.d(t,{s:()=>n});var r=i(47589);class n{nodeStack=[];#B=(0,r.vV)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let t=this.transformNodeImpl(e);return this.nodeStack.pop(),(0,r.vV)(t)}transformNodeImpl(e){return this.#B[e.kind](e)}transformNodeList(e){return e?(0,r.vV)(e.map(e=>this.transformNode(e))):e}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:(0,r.vV)([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}},75460:function(e,t,i){i.d(t,{$X:()=>o,fP:()=>s,rt:()=>a});var r=i(47589);let n=["->","->>"],s=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from","+","-","*","/","%","^","&","|","#","<<",">>","&&","||",...n,"not","-","exists","not exists","between","between symmetric"],o=(0,r.vV)({is:e=>"OperatorNode"===e.kind,create:e=>(0,r.vV)({kind:"OperatorNode",operator:e})});function a(e){return(0,r.HD)(e)&&n.includes(e)}},27306:function(e,t,i){i.d(t,{O:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"OrNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"OrNode",left:e,right:t})})},76374:function(e,t,i){i.d(t,{r:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"OrderByNode"===e.kind,create:e=>(0,r.vV)({kind:"OrderByNode",items:(0,r.vV)([...e])}),cloneWithItems:(e,t)=>(0,r.vV)({...e,items:(0,r.vV)([...e.items,...t])})})},82923:function(e,t,i){i.d(t,{L:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"ParensNode"===e.kind,create:e=>(0,r.vV)({kind:"ParensNode",node:e})})},53190:function(e,t,i){i.d(t,{c:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"PrimitiveValueListNode"===e.kind,create:e=>(0,r.vV)({kind:"PrimitiveValueListNode",values:(0,r.vV)([...e])})})},15659:function(e,t,i){i.d(t,{V:()=>p});var r=i(76059),n=i(11973),s=i(45219),o=i(75689),a=i(92447),l=i(47589);let d=(0,l.vV)({is:e=>"ReturningNode"===e.kind,create:e=>(0,l.vV)({kind:"ReturningNode",selections:(0,l.vV)(e)}),cloneWithSelections:(e,t)=>(0,l.vV)({...e,selections:e.selections?(0,l.vV)([...e.selections,...t]):(0,l.vV)(t)})}),u=(0,l.vV)({is:e=>"ExplainNode"===e.kind,create:(e,t)=>(0,l.vV)({kind:"ExplainNode",format:e,options:t})});var c=i(64380);let h=(0,l.vV)({is:e=>"OutputNode"===e.kind,create:e=>(0,l.vV)({kind:"OutputNode",selections:(0,l.vV)(e)}),cloneWithSelections:(e,t)=>(0,l.vV)({...e,selections:e.selections?(0,l.vV)([...e.selections,...t]):(0,l.vV)(t)})}),p=(0,l.vV)({is:e=>n.a.is(e)||r.P.is(e)||s.j.is(e)||o.U.is(e)||c.F.is(e),cloneWithEndModifier:(e,t)=>(0,l.vV)({...e,endModifiers:e.endModifiers?(0,l.vV)([...e.endModifiers,t]):(0,l.vV)([t])}),cloneWithWhere:(e,t)=>(0,l.vV)({...e,where:e.where?a.F.cloneWithOperation(e.where,"And",t):a.F.create(t)}),cloneWithJoin:(e,t)=>(0,l.vV)({...e,joins:e.joins?(0,l.vV)([...e.joins,t]):(0,l.vV)([t])}),cloneWithReturning:(e,t)=>(0,l.vV)({...e,returning:e.returning?d.cloneWithSelections(e.returning,t):d.create(t)}),cloneWithoutReturning:e=>(0,l.vV)({...e,returning:void 0}),cloneWithoutWhere:e=>(0,l.vV)({...e,where:void 0}),cloneWithExplain:(e,t,i)=>(0,l.vV)({...e,explain:u.create(t,i?.toOperationNode())}),cloneWithTop:(e,t)=>(0,l.vV)({...e,top:t}),cloneWithOutput:(e,t)=>(0,l.vV)({...e,output:e.output?h.cloneWithSelections(e.output,t):h.create(t)})})},67386:function(e,t,i){i.d(t,{x:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"RawNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"RawNode",sqlFragments:(0,r.vV)(e),parameters:(0,r.vV)(t)}),createWithSql:e=>n.create([e],[]),createWithChild:e=>n.create(["",""],[e]),createWithChildren:e=>n.create(Array(e.length+1).fill(""),e)})},34463:function(e,t,i){i.d(t,{b:()=>s});var r=i(8809),n=i(47589);let s=(0,n.vV)({is:e=>"ReferenceNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"ReferenceNode",table:t,column:e}),createSelectAll:e=>(0,n.vV)({kind:"ReferenceNode",table:e,column:r.B.create()})})},28202:function(e,t,i){i.d(t,{j:()=>s});var r=i(47589),n=i(36548);let s=(0,r.vV)({is:e=>"SchemableIdentifierNode"===e.kind,create:e=>(0,r.vV)({kind:"SchemableIdentifierNode",identifier:n.T.create(e)}),createWithSchema:(e,t)=>(0,r.vV)({kind:"SchemableIdentifierNode",schema:n.T.create(e),identifier:n.T.create(t)})})},8809:function(e,t,i){i.d(t,{B:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"SelectAllNode"===e.kind,create:()=>(0,r.vV)({kind:"SelectAllNode"})})},11973:function(e,t,i){i.d(t,{a:()=>u});var r=i(47589),n=i(88270);let s=(0,r.vV)({is:e=>"GroupByNode"===e.kind,create:e=>(0,r.vV)({kind:"GroupByNode",items:(0,r.vV)(e)}),cloneWithItems:(e,t)=>(0,r.vV)({...e,items:(0,r.vV)([...e.items,...t])})});var o=i(83550),a=i(27306);let l=(0,r.vV)({is:e=>"HavingNode"===e.kind,create:e=>(0,r.vV)({kind:"HavingNode",having:e}),cloneWithOperation:(e,t,i)=>(0,r.vV)({...e,having:"And"===t?o.O.create(e.having,i):a.O.create(e.having,i)})});var d=i(76374);let u=(0,r.vV)({is:e=>"SelectQueryNode"===e.kind,create:e=>(0,r.vV)({kind:"SelectQueryNode",...e&&{with:e}}),createFrom:(e,t)=>(0,r.vV)({kind:"SelectQueryNode",from:n.e.create(e),...t&&{with:t}}),cloneWithSelections:(e,t)=>(0,r.vV)({...e,selections:e.selections?(0,r.vV)([...e.selections,...t]):(0,r.vV)(t)}),cloneWithDistinctOn:(e,t)=>(0,r.vV)({...e,distinctOn:e.distinctOn?(0,r.vV)([...e.distinctOn,...t]):(0,r.vV)(t)}),cloneWithFrontModifier:(e,t)=>(0,r.vV)({...e,frontModifiers:e.frontModifiers?(0,r.vV)([...e.frontModifiers,t]):(0,r.vV)([t])}),cloneWithOrderByItems:(e,t)=>(0,r.vV)({...e,orderBy:e.orderBy?d.r.cloneWithItems(e.orderBy,t):d.r.create(t)}),cloneWithGroupByItems:(e,t)=>(0,r.vV)({...e,groupBy:e.groupBy?s.cloneWithItems(e.groupBy,t):s.create(t)}),cloneWithLimit:(e,t)=>(0,r.vV)({...e,limit:t}),cloneWithOffset:(e,t)=>(0,r.vV)({...e,offset:t}),cloneWithFetch:(e,t)=>(0,r.vV)({...e,fetch:t}),cloneWithHaving:(e,t)=>(0,r.vV)({...e,having:e.having?l.cloneWithOperation(e.having,"And",t):l.create(t)}),cloneWithSetOperations:(e,t)=>(0,r.vV)({...e,setOperations:e.setOperations?(0,r.vV)([...e.setOperations,...t]):(0,r.vV)([...t])}),cloneWithoutSelections:e=>(0,r.vV)({...e,selections:[]}),cloneWithoutLimit:e=>(0,r.vV)({...e,limit:void 0}),cloneWithoutOffset:e=>(0,r.vV)({...e,offset:void 0}),cloneWithoutOrderBy:e=>(0,r.vV)({...e,orderBy:void 0}),cloneWithoutGroupBy:e=>(0,r.vV)({...e,groupBy:void 0})})},6886:function(e,t,i){i.d(t,{M:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"SetOperationNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"SetOperationNode",operator:e,expression:t,all:i})})},49501:function(e,t,i){i.d(t,{F:()=>s});var r=i(47589),n=i(28202);let s=(0,r.vV)({is:e=>"TableNode"===e.kind,create:e=>(0,r.vV)({kind:"TableNode",table:n.j.create(e)}),createWithSchema:(e,t)=>(0,r.vV)({kind:"TableNode",table:n.j.createWithSchema(e,t)})})},45219:function(e,t,i){i.d(t,{j:()=>s});var r=i(47589),n=i(88270);let s=(0,r.vV)({is:e=>"UpdateQueryNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"UpdateQueryNode",table:e,...t&&{with:t}}),createWithoutTable:()=>(0,r.vV)({kind:"UpdateQueryNode"}),cloneWithFromItems:(e,t)=>(0,r.vV)({...e,from:e.from?n.e.cloneWithFroms(e.from,t):n.e.create(t)}),cloneWithUpdates:(e,t)=>(0,r.vV)({...e,updates:e.updates?(0,r.vV)([...e.updates,...t]):t}),cloneWithLimit:(e,t)=>(0,r.vV)({...e,limit:t})})},18181:function(e,t,i){i.d(t,{F:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"ValueListNode"===e.kind,create:e=>(0,r.vV)({kind:"ValueListNode",values:(0,r.vV)(e)})})},38419:function(e,t,i){i.d(t,{g:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"ValueNode"===e.kind,create:e=>(0,r.vV)({kind:"ValueNode",value:e}),createImmediate:e=>(0,r.vV)({kind:"ValueNode",value:e,immediate:!0})})},96409:function(e,t,i){i.d(t,{$:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"WhenNode"===e.kind,create:e=>(0,r.vV)({kind:"WhenNode",condition:e}),cloneWithResult:(e,t)=>(0,r.vV)({...e,result:t})})},92447:function(e,t,i){i.d(t,{F:()=>o});var r=i(47589),n=i(83550),s=i(27306);let o=(0,r.vV)({is:e=>"WhereNode"===e.kind,create:e=>(0,r.vV)({kind:"WhereNode",where:e}),cloneWithOperation:(e,t,i)=>(0,r.vV)({...e,where:"And"===t?n.O.create(e.where,i):s.O.create(e.where,i)})})},50350:function(e,t,i){i.d(t,{L4:()=>y,Li:()=>m,QX:()=>g,i9:()=>f,k0:()=>p});var r=i(95315),n=i(47589),s=i(62240),o=i(75460),a=i(57550),l=i(11942),d=i(38419),u=i(83550),c=i(82923),h=i(27306);function p(e){if(3===e.length)return f(e[0],e[1],e[2]);if(1===e.length)return(0,l.j2)(e[0]);throw Error(`invalid arguments: ${JSON.stringify(e)}`)}function f(e,t,i){var n;return("is"===(n=t)||"is not"===n)&&b(i)?r.a.create((0,a.jI)(e),v(t),d.g.createImmediate(i)):r.a.create((0,a.jI)(e),v(t),(0,l.wZ)(i))}function y(e,t,i){return r.a.create((0,a.jI)(e),v(t),(0,a.jI)(i))}function m(e,t){return g(Object.entries(e).filter(([,e])=>!(0,n.o8)(e)).map(([e,t])=>f(e,b(t)?"is":"=",t)),t)}function g(e,t,i=!0){let n="and"===t?u.O.create:h.O.create;if(0===e.length)return r.a.create(d.g.createImmediate(1),o.$X.create("="),d.g.createImmediate(+("and"===t)));let s=w(e[0]);for(let t=1;t<e.length;++t)s=n(s,w(e[t]));return e.length>1&&i?c.L.create(s):s}function b(e){return(0,n.Ft)(e)||(0,n.jn)(e)}function v(e){if((0,n.HD)(e)&&o.fP.includes(e))return o.$X.create(e);if((0,s.x)(e))return e.toOperationNode();throw Error(`invalid operator ${JSON.stringify(e)}`)}function w(e){return(0,s.x)(e)?e.toOperationNode():e}},65147:function(e,t,i){i.d(t,{z:()=>l});var r=i(47589);let n=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],s=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],o=(0,r.vV)({is:e=>"DataTypeNode"===e.kind,create:e=>(0,r.vV)({kind:"DataTypeNode",dataType:e})});var a=i(62240);function l(e){if((0,a.x)(e))return e.toOperationNode();if(n.includes(e)||s.some(t=>t.test(e)))return o.create(e);throw Error(`invalid column data type ${JSON.stringify(e)}`)}},28173:function(e,t,i){i.d(t,{Yb:()=>l,Jx:()=>a,BJ:()=>o});var r=i(62240),n=i(47589),s=i(44951);function o(e){if((0,r.x)(e))return e.toOperationNode();if((0,n.mf)(e))return e((0,s.Z)()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(e)}`)}function a(e){if((0,r.x)(e))return e.toOperationNode();if((0,n.mf)(e))return e((0,s.Z)()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(e)}`)}function l(e){return(0,n.Kn)(e)&&"expressionType"in e&&(0,r.x)(e)||(0,n.Kn)(e)&&"expression"in e&&(0,n.HD)(e.alias)&&(0,r.x)(e)||(0,n.mf)(e)}},56044:function(e,t,i){i.d(t,{h:()=>a});var r=i(37203),n=i(90679),s=i(50350),o=i(23013);function a(e,t){var i,a,l,d,u,c;if(3===t.length){return i=e,a=t[0],l=t[1],d=t[2],r.u.createWithOn(i,(0,n.Lr)(a),(0,s.L4)(l,"=",d))}if(2===t.length){return u=e,c=t[0],(0,t[1])((0,o.$h)(u,c)).toOperationNode()}throw Error("not implemented")}},75760:function(e,t,i){i.d(t,{Wr:()=>d,bX:()=>u});var r=i(28165),n=i(47589);let s=(0,n.vV)({is:e=>"OrderByItemNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"OrderByItemNode",orderBy:e,direction:t})});var o=i(67386),a=i(28173),l=i(57550);function d(e){return"asc"===e||"desc"===e}function u(e){if(2===e.length)return[c(e[0],e[1])];if(1===e.length){let[t]=e;return Array.isArray(t)?t.map(e=>c(e)):[c(t)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${e.length}`)}function c(e,t){let i=function(e){if((0,a.Yb)(e))return(0,a.BJ)(e);if((0,r.a)(e))return e.toOperationNode();let[t,i]=e.split(" ");if(i){if(!d(i))throw Error(`Invalid order by direction: ${i}`);return s.create((0,l.KX)(t),h(i))}return(0,l.KX)(e)}(e);if(s.is(i)){if(t)throw Error("Cannot specify direction twice!");return i}return s.create(i,h(t))}function h(e){if(e)return"asc"===e||"desc"===e?o.x.createWithSql(e):e.toOperationNode()}},23013:function(e,t,i){i.d(t,{$h:()=>w,gs:()=>_,$l:()=>v});var r=i(37203),n=i(47589),s=i(76374);let o=(0,n.vV)({is:e=>"PartitionByNode"===e.kind,create:e=>(0,n.vV)({kind:"PartitionByNode",items:(0,n.vV)(e)}),cloneWithItems:(e,t)=>(0,n.vV)({...e,items:(0,n.vV)([...e.items,...t])})}),a=(0,n.vV)({is:e=>"OverNode"===e.kind,create:()=>(0,n.vV)({kind:"OverNode"}),cloneWithOrderByItems:(e,t)=>(0,n.vV)({...e,orderBy:e.orderBy?s.r.cloneWithItems(e.orderBy,t):s.r.create(t)}),cloneWithPartitionByItems:(e,t)=>(0,n.vV)({...e,partitionBy:e.partitionBy?o.cloneWithItems(e.partitionBy,t):o.create(t)})});var l=i(67386),d=i(50350),u=i(26481);class c{#c;constructor(e){this.#c=(0,n.vV)(e)}on(...e){return new c({...this.#c,joinNode:r.u.cloneWithOn(this.#c.joinNode,(0,d.k0)(e))})}onRef(e,t,i){return new c({...this.#c,joinNode:r.u.cloneWithOn(this.#c.joinNode,(0,d.L4)(e,t,i))})}onTrue(){return new c({...this.#c,joinNode:r.u.cloneWithOn(this.#c.joinNode,l.x.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#c.joinNode}}(0,u.q)(c,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var h=i(75760);let p=(0,n.vV)({is:e=>"PartitionByItemNode"===e.kind,create:e=>(0,n.vV)({kind:"PartitionByItemNode",partitionBy:e})});var f=i(57550);class y{#c;constructor(e){this.#c=(0,n.vV)(e)}orderBy(e,t){return new y({overNode:a.cloneWithOrderByItems(this.#c.overNode,(0,h.bX)([e,t]))})}partitionBy(e){return new y({overNode:a.cloneWithPartitionByItems(this.#c.overNode,(0,f.ik)(e).map(p.create))})}$call(e){return e(this)}toOperationNode(){return this.#c.overNode}}(0,u.q)(y,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var m=i(3255),g=i(39745),b=i(90679);function v(){return new m.x({executor:g.H})}function w(e,t){return new c({joinNode:r.u.create(e,(0,b.Lr)(t))})}function _(){return new y({overNode:a.create()})}},57550:function(e,t,i){i.d(t,{D2:()=>b,Dz:()=>N,F9:()=>y,Ji:()=>w,KX:()=>v,ik:()=>m,jI:()=>g,xM:()=>_});var r=i(1784),n=i(1824),s=i(34463),o=i(49501),a=i(47589),l=i(28173),d=i(36548),u=i(75760),c=i(75460),h=i(49188),p=i(66523),f=i(54474);function y(e){return(0,a.HD)(e)?v(e):e.toOperationNode()}function m(e){return(0,a.DM)(e)?e.map(e=>g(e)):[g(e)]}function g(e){return(0,l.Yb)(e)?(0,l.BJ)(e):y(e)}function b(e,t){let i=v(e);if((0,c.rt)(t))return h.y.create(i,p.s.create(c.$X.create(t)));let r=t.slice(0,-1);if((0,c.rt)(r))return h.y.create(i,f.t.create(c.$X.create(r)));throw Error(`Invalid JSON operator: ${t}`)}function v(e){if(!e.includes("."))return s.b.create(n.k.create(e));let t=e.split(".").map(I);if(3===t.length){var i=t;let[e,r,a]=i;return s.b.create(n.k.create(a),o.F.createWithSchema(e,r))}if(2===t.length){var r=t;let[e,i]=r;return s.b.create(n.k.create(i),o.F.create(e))}throw Error(`invalid column reference ${e}`)}function w(e){let t=" as ";if(!e.includes(t))return v(e);{let[i,n]=e.split(t).map(I);return r.i.create(v(i),d.T.create(n))}}function _(e){return n.k.create(e)}function N(e){if(!e.includes(" "))return _(e);{let[t,i]=e.split(" ").map(I);if(!(0,u.Wr)(i))throw Error(`invalid order direction "${i}" next to "${t}"`);return(0,u.bX)([t,i])[0]}}function I(e){return e.trim()}},57725:function(e,t,i){i.d(t,{A:()=>function e(t){return(0,r.mf)(t)?e(t((0,c.Z)())):(0,r.DM)(t)?t.map(e=>h(e)):[h(t)]},L:()=>p});var r=i(47589),n=i(34463),s=i(8809);let o=(0,r.vV)({is:e=>"SelectionNode"===e.kind,create:e=>(0,r.vV)({kind:"SelectionNode",selection:e}),createSelectAll:()=>(0,r.vV)({kind:"SelectionNode",selection:s.B.create()}),createSelectAllFromTable:e=>(0,r.vV)({kind:"SelectionNode",selection:n.b.createSelectAll(e)})});var a=i(57550),l=i(28165),d=i(28173),u=i(90679),c=i(44951);function h(e){return(0,r.HD)(e)?o.create((0,a.Ji)(e)):(0,l.a)(e)?o.create(e.toOperationNode()):o.create((0,d.Jx)(e))}function p(e){return e?Array.isArray(e)?e.map(f):[f(e)]:[o.createSelectAll()]}function f(e){if((0,r.HD)(e))return o.createSelectAllFromTable((0,u.G2)(e));throw Error(`invalid value selectAll expression: ${JSON.stringify(e)}`)}},90679:function(e,t,i){i.d(t,{G2:()=>c,Lr:()=>d,_V:()=>l,hm:()=>u});var r=i(47589),n=i(1784),s=i(49501),o=i(28173),a=i(36548);function l(e){return(0,r.DM)(e)?e.map(e=>d(e)):[d(e)]}function d(e){return(0,r.HD)(e)?u(e):(0,o.Jx)(e)}function u(e){let t=" as ";if(!e.includes(t))return c(e);{let[i,r]=e.split(t).map(h);return n.i.create(c(i),a.T.create(r))}}function c(e){if(!e.includes("."))return s.F.create(e);{let[t,i]=e.split(".").map(h);return s.F.createWithSchema(t,i)}}function h(e){return e.trim()}},45261:function(e,t,i){i.d(t,{G:()=>s});var r=i(47589);let n=(0,r.vV)({is:e=>"TopNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"TopNode",expression:e,modifiers:t})});function s(e,t){var i;if(!(0,r.hj)(e)&&!(0,r.C4)(e))throw Error(`Invalid top expression: ${e}`);if(!(0,r.o8)(t)&&"percent"!==(i=t)&&"with ties"!==i&&"percent with ties"!==i)throw Error(`Invalid top modifiers: ${t}`);return n.create(e,t)}},11942:function(e,t,i){i.d(t,{$0:()=>u,AB:()=>c,j2:()=>d,wZ:()=>l});var r=i(53190),n=i(18181),s=i(38419),o=i(47589),a=i(28173);function l(e){var t;return(0,o.DM)(e)?(t=e).some(a.Yb)?n.F.create(t.map(e=>d(e))):r.c.create(t):d(e)}function d(e){return(0,a.Yb)(e)?(0,a.BJ)(e):s.g.create(e)}function u(e){return(0,o.hj)(e)||(0,o.jn)(e)||(0,o.Ft)(e)}function c(e){if(!u(e))throw Error(`unsafe immediate value ${JSON.stringify(e)}`);return s.g.createImmediate(e)}},16697:function(e,t,i){i.d(t,{v:()=>c});var r=i(1784),n=i(36548),s=i(24107),o=i(28202),a=i(49501);let l=(0,i(47589).vV)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),d={json_agg:!0,to_json:!0};class u extends s.s{#V;#F=new Set;#R=new Set;constructor(e){super(),this.#V=e}transformNodeImpl(e){if(!this.#L(e))return super.transformNodeImpl(e);let t=this.#P(e);for(let e of t)this.#R.add(e);let i=this.#M(e);for(let e of i)this.#F.add(e);let r=super.transformNodeImpl(e);for(let e of i)this.#F.delete(e);for(let e of t)this.#R.delete(e);return r}transformSchemableIdentifier(e){let t=super.transformSchemableIdentifier(e);return t.schema||!this.#F.has(e.identifier.name)?t:{...t,schema:n.T.create(this.#V)}}transformReferences(e){let t=super.transformReferences(e);return t.table.table.schema?t:{...t,table:a.F.createWithSchema(this.#V,t.table.table.identifier.name)}}transformAggregateFunction(e){return{...super.transformAggregateFunction({...e,aggregated:[]}),aggregated:this.#U(e,"aggregated")}}transformFunction(e){return{...super.transformFunction({...e,arguments:[]}),arguments:this.#U(e,"arguments")}}#U(e,t){return d[e.func]?e[t].map(e=>!a.F.is(e)||e.table.schema?this.transformNode(e):{...e,table:this.transformIdentifier(e.table.identifier)}):this.transformNodeList(e[t])}#L(e){return e.kind in l}#M(e){let t=new Set;if("name"in e&&e.name&&o.j.is(e.name)&&this.#W(e.name,t),"from"in e&&e.from)for(let i of e.from.froms)this.#z(i,t);if("into"in e&&e.into&&this.#z(e.into,t),"table"in e&&e.table&&this.#z(e.table,t),"joins"in e&&e.joins)for(let i of e.joins)this.#z(i.table,t);return"using"in e&&e.using&&this.#z(e.using,t),t}#P(e){let t=new Set;return"with"in e&&e.with&&this.#q(e.with,t),t}#z(e,t){let i=a.F.is(e)?e:r.i.is(e)&&a.F.is(e.node)?e.node:null;i&&this.#W(i.table,t)}#W(e,t){let i=e.identifier.name;this.#F.has(i)||this.#R.has(i)||t.add(i)}#q(e,t){for(let i of e.expressions){let e=i.name.table.table.identifier.name;this.#R.has(e)||t.add(e)}}}class c{#h;constructor(e){this.#h=new u(e)}transformQuery(e){return this.#h.transformNode(e.node)}async transformResult(e){return e.result}}},71661:function(e,t,i){i.d(t,{wY:()=>d});var r=i(60081),n=i(47589),s=i(33052),o=i(96409),a=i(50350),l=i(11942);class d{#c;constructor(e){this.#c=(0,n.vV)(e)}when(...e){return new u({...this.#c,node:s.j.cloneWithWhen(this.#c.node,o.$.create((0,a.k0)(e)))})}}class u{#c;constructor(e){this.#c=(0,n.vV)(e)}then(e){return new c({...this.#c,node:s.j.cloneWithThen(this.#c.node,(0,l.$0)(e)?(0,l.AB)(e):(0,l.j2)(e))})}}class c{#c;constructor(e){this.#c=(0,n.vV)(e)}when(...e){return new u({...this.#c,node:s.j.cloneWithWhen(this.#c.node,o.$.create((0,a.k0)(e)))})}else(e){return new h({...this.#c,node:s.j.cloneWith(this.#c.node,{else:(0,l.$0)(e)?(0,l.AB)(e):(0,l.j2)(e)})})}end(){return new r.Pc(s.j.cloneWith(this.#c.node,{isStatement:!1}))}endCase(){return new r.Pc(s.j.cloneWith(this.#c.node,{isStatement:!0}))}}class h{#c;constructor(e){this.#c=(0,n.vV)(e)}end(){return new r.Pc(s.j.cloneWith(this.#c.node,{isStatement:!1}))}endCase(){return new r.Pc(s.j.cloneWith(this.#c.node,{isStatement:!0}))}}},15123:function(e,t,i){i.d(t,{W:()=>w});var r=i(60081),n=i(47589),s=i(92447),o=i(76374);let a=(0,n.vV)({is:e=>"AggregateFunctionNode"===e.kind,create:(e,t=[])=>(0,n.vV)({kind:"AggregateFunctionNode",func:e,aggregated:t}),cloneWithDistinct:e=>(0,n.vV)({...e,distinct:!0}),cloneWithOrderBy:(e,t)=>(0,n.vV)({...e,orderBy:e.orderBy?o.r.cloneWithItems(e.orderBy,t):o.r.create(t)}),cloneWithFilter:(e,t)=>(0,n.vV)({...e,filter:e.filter?s.F.cloneWithOperation(e.filter,"And",t):s.F.create(t)}),cloneWithOrFilter:(e,t)=>(0,n.vV)({...e,filter:e.filter?s.F.cloneWithOperation(e.filter,"Or",t):s.F.create(t)}),cloneWithOver:(e,t)=>(0,n.vV)({...e,over:t})}),l=(0,n.vV)({is:e=>"FunctionNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"FunctionNode",func:e,arguments:t})});var d=i(57550),u=i(57725),c=i(1784),h=i(36548),p=i(26481),f=i(23013),y=i(50350),m=i(75760);class g{#c;constructor(e){this.#c=(0,n.vV)(e)}get expressionType(){}as(e){return new b(this,e)}distinct(){return new g({...this.#c,aggregateFunctionNode:a.cloneWithDistinct(this.#c.aggregateFunctionNode)})}orderBy(e,t){return new g({...this.#c,aggregateFunctionNode:a.cloneWithOrderBy(this.#c.aggregateFunctionNode,(0,m.bX)([e,t]))})}filterWhere(...e){return new g({...this.#c,aggregateFunctionNode:a.cloneWithFilter(this.#c.aggregateFunctionNode,(0,y.k0)(e))})}filterWhereRef(e,t,i){return new g({...this.#c,aggregateFunctionNode:a.cloneWithFilter(this.#c.aggregateFunctionNode,(0,y.L4)(e,t,i))})}over(e){let t=(0,f.gs)();return new g({...this.#c,aggregateFunctionNode:a.cloneWithOver(this.#c.aggregateFunctionNode,(e?e(t):t).toOperationNode())})}$call(e){return e(this)}$castTo(){return new g(this.#c)}$notNull(){return new g(this.#c)}toOperationNode(){return this.#c.aggregateFunctionNode}}(0,p.q)(g,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class b{#j;#a;constructor(e,t){this.#j=e,this.#a=t}get expression(){return this.#j}get alias(){return this.#a}toOperationNode(){return c.i.create(this.#j.toOperationNode(),h.T.create(this.#a))}}var v=i(90679);function w(){let e=(e,t)=>new r.Pc(l.create(e,(0,d.ik)(t??[]))),t=(e,t)=>new g({aggregateFunctionNode:a.create(e,t?(0,d.ik)(t):void 0)});return Object.assign(e,{agg:t,avg:e=>t("avg",[e]),coalesce:(...t)=>e("coalesce",t),count:e=>t("count",[e]),countAll:e=>new g({aggregateFunctionNode:a.create("count",(0,u.L)(e))}),max:e=>t("max",[e]),min:e=>t("min",[e]),sum:e=>t("sum",[e]),any:t=>e("any",[t]),jsonAgg:e=>new g({aggregateFunctionNode:a.create("json_agg",[(0,n.HD)(e)?(0,v.G2)(e):e.toOperationNode()])}),toJson:e=>new r.Pc(l.create("to_json",[(0,n.HD)(e)?(0,v.G2)(e):e.toOperationNode()]))})}},85804:function(e,t,i){i.d(t,{G:()=>r,b:()=>n});class r extends Error{node;constructor(e){super("no result"),this.node=e}}function n(e){return Object.prototype.hasOwnProperty.call(e,"prototype")}},10957:function(e,t,i){i.d(t,{u:()=>A});var r=i(1784),n=i(47589);let s=(0,n.vV)({is:e=>"SelectModifierNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"SelectModifierNode",modifier:e,of:t}),createWithExpression:e=>(0,n.vV)({kind:"SelectModifierNode",rawModifier:e})});var o=i(56044),a=i(90679),l=i(57725),d=i(57550),u=i(11973),c=i(15659),h=i(75760),p=i(26481),f=i(56251);let y=(0,n.vV)({is:e=>"OffsetNode"===e.kind,create:e=>(0,n.vV)({kind:"OffsetNode",offset:e})}),m=(0,n.vV)({is:e=>"GroupByItemNode"===e.kind,create:e=>(0,n.vV)({kind:"GroupByItemNode",groupBy:e})});var g=i(44951),b=i(85804),v=i(36548),w=i(6886),_=i(28173);function N(e,t,i){return(0,n.mf)(t)&&(t=t((0,g.b)())),(0,n.DM)(t)||(t=[t]),t.map(t=>w.M.create(e,(0,_.BJ)(t),i))}var I=i(50350),S=i(60081),T=i(11942),x=i(38419);let O=(e,t)=>({kind:"FetchNode",rowCount:x.g.create(e),modifier:t});var E=i(45261);class k{#c;constructor(e){this.#c=(0,n.vV)(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new k({...this.#c,queryNode:c.V.cloneWithWhere(this.#c.queryNode,(0,I.k0)(e))})}whereRef(e,t,i){return new k({...this.#c,queryNode:c.V.cloneWithWhere(this.#c.queryNode,(0,I.L4)(e,t,i))})}having(...e){return new k({...this.#c,queryNode:u.a.cloneWithHaving(this.#c.queryNode,(0,I.k0)(e))})}havingRef(e,t,i){return new k({...this.#c,queryNode:u.a.cloneWithHaving(this.#c.queryNode,(0,I.L4)(e,t,i))})}select(e){return new k({...this.#c,queryNode:u.a.cloneWithSelections(this.#c.queryNode,(0,l.A)(e))})}distinctOn(e){return new k({...this.#c,queryNode:u.a.cloneWithDistinctOn(this.#c.queryNode,(0,d.ik)(e))})}modifyFront(e){return new k({...this.#c,queryNode:u.a.cloneWithFrontModifier(this.#c.queryNode,s.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new k({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.createWithExpression(e.toOperationNode()))})}distinct(){return new k({...this.#c,queryNode:u.a.cloneWithFrontModifier(this.#c.queryNode,s.create("Distinct"))})}forUpdate(e){return new k({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("ForUpdate",e?(0,n._2)(e).map(a.G2):void 0))})}forShare(e){return new k({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("ForShare",e?(0,n._2)(e).map(a.G2):void 0))})}forKeyShare(e){return new k({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("ForKeyShare",e?(0,n._2)(e).map(a.G2):void 0))})}forNoKeyUpdate(e){return new k({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("ForNoKeyUpdate",e?(0,n._2)(e).map(a.G2):void 0))})}skipLocked(){return new k({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("SkipLocked"))})}noWait(){return new k({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("NoWait"))})}selectAll(e){return new k({...this.#c,queryNode:u.a.cloneWithSelections(this.#c.queryNode,(0,l.L)(e))})}innerJoin(...e){return new k({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("InnerJoin",e))})}leftJoin(...e){return new k({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("LeftJoin",e))})}rightJoin(...e){return new k({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("RightJoin",e))})}fullJoin(...e){return new k({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("FullJoin",e))})}innerJoinLateral(...e){return new k({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("LateralInnerJoin",e))})}leftJoinLateral(...e){return new k({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("LateralLeftJoin",e))})}orderBy(...e){return new k({...this.#c,queryNode:u.a.cloneWithOrderByItems(this.#c.queryNode,(0,h.bX)(e))})}groupBy(e){var t;return new k({...this.#c,queryNode:u.a.cloneWithGroupByItems(this.#c.queryNode,(t=e,t=(0,n.mf)(t)?t((0,g.Z)()):t,(0,d.ik)(t).map(m.create)))})}limit(e){return new k({...this.#c,queryNode:u.a.cloneWithLimit(this.#c.queryNode,f.Z.create((0,T.j2)(e)))})}offset(e){return new k({...this.#c,queryNode:u.a.cloneWithOffset(this.#c.queryNode,y.create((0,T.j2)(e)))})}fetch(e,t="only"){return new k({...this.#c,queryNode:u.a.cloneWithFetch(this.#c.queryNode,function(e,t){var i;if(!(0,n.hj)(e)&&!(0,n.C4)(e))throw Error(`Invalid fetch row count: ${e}`);if("only"!==(i=t)&&"with ties"!==i)throw Error(`Invalid fetch modifier: ${t}`);return O(e,t)}(e,t))})}top(e,t){return new k({...this.#c,queryNode:c.V.cloneWithTop(this.#c.queryNode,(0,E.G)(e,t))})}union(e){return new k({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,N("union",e,!1))})}unionAll(e){return new k({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,N("union",e,!0))})}intersect(e){return new k({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,N("intersect",e,!1))})}intersectAll(e){return new k({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,N("intersect",e,!0))})}except(e){return new k({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,N("except",e,!1))})}exceptAll(e){return new k({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,N("except",e,!0))})}as(e){return new D(this,e)}clearSelect(){return new k({...this.#c,queryNode:u.a.cloneWithoutSelections(this.#c.queryNode)})}clearWhere(){return new k({...this.#c,queryNode:c.V.cloneWithoutWhere(this.#c.queryNode)})}clearLimit(){return new k({...this.#c,queryNode:u.a.cloneWithoutLimit(this.#c.queryNode)})}clearOffset(){return new k({...this.#c,queryNode:u.a.cloneWithoutOffset(this.#c.queryNode)})}clearOrderBy(){return new k({...this.#c,queryNode:u.a.cloneWithoutOrderBy(this.#c.queryNode)})}clearGroupBy(){return new k({...this.#c,queryNode:u.a.cloneWithoutGroupBy(this.#c.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new k({...this.#c})}$castTo(){return new k(this.#c)}$narrowType(){return new k(this.#c)}$assertType(){return new k(this.#c)}$asTuple(){return new S.Pc(this.toOperationNode())}withPlugin(e){return new k({...this.#c,executor:this.#c.executor.withPlugin(e)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile();return(await this.#c.executor.executeQuery(e,this.#c.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=b.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,b.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let i of this.#c.executor.stream(t,e,this.#c.queryId))yield*i.rows}async explain(e,t){let i=new k({...this.#c,queryNode:c.V.cloneWithExplain(this.#c.queryNode,e,t)});return await i.execute()}}function A(e){return new k(e)}(0,p.q)(k,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class D{#$;#a;constructor(e,t){this.#$=e,this.#a=t}get expression(){return this.#$}get alias(){return this.#a}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return r.i.create(this.#$.toOperationNode(),v.T.create(this.#a))}}(0,p.q)(D,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.")},3255:function(e,t,i){i.d(t,{x:()=>ep});var r=i(10957),n=i(57725),s=i(1824),o=i(53190),a=i(18181),l=i(47589),d=i(11942);let u=(0,l.vV)({is:e=>"ValuesNode"===e.kind,create:e=>(0,l.vV)({kind:"ValuesNode",values:(0,l.vV)(e)})});var c=i(28173);let h=(0,l.vV)({is:e=>"DefaultInsertValueNode"===e.kind,create:()=>(0,l.vV)({kind:"DefaultInsertValueNode"})});var p=i(44951);function f(e){let t=(0,l.mf)(e)?e((0,p.Z)()):e;var i=(0,l.DM)(t)?t:(0,l.vV)([t]);let r=function(e){let t=new Map;for(let i of e)for(let e of Object.keys(i))t.has(e)||void 0===i[e]||t.set(e,t.size);return t}(i);return[(0,l.vV)([...r.keys()].map(s.k.create)),u.create(i.map(e=>(function(e,t){let i=Object.keys(e),r=Array.from({length:t.size}),n=!1,s=i.length;for(let o of i){let i=t.get(o);if((0,l.o8)(i)){s--;continue}let a=e[o];((0,l.o8)(a)||(0,c.Yb)(a))&&(n=!0),r[i]=a}if(s<t.size||n){let e=h.create();return a.F.create(r.map(t=>(0,l.o8)(t)?e:(0,d.j2)(t)))}return o.c.create(r)})(e,r)))]}var y=i(76059),m=i(15659);let g=(0,l.vV)({is:e=>"ColumnUpdateNode"===e.kind,create:(e,t)=>(0,l.vV)({kind:"ColumnUpdateNode",column:e,value:t})});var b=i(57550);function v(e){return Object.entries((0,l.mf)(e)?e((0,p.Z)()):e).filter(([e,t])=>void 0!==t).map(([e,t])=>g.create(s.k.create(e),(0,d.j2)(t)))}var w=i(26481);let _=(0,l.vV)({is:e=>"OnDuplicateKeyNode"===e.kind,create:e=>(0,l.vV)({kind:"OnDuplicateKeyNode",updates:e})});class N{insertId;numInsertedOrUpdatedRows;constructor(e,t){this.insertId=e,this.numInsertedOrUpdatedRows=t}}var I=i(85804),S=i(36548),T=i(92447);let x=(0,l.vV)({is:e=>"OnConflictNode"===e.kind,create:()=>(0,l.vV)({kind:"OnConflictNode"}),cloneWith:(e,t)=>(0,l.vV)({...e,...t}),cloneWithIndexWhere:(e,t)=>(0,l.vV)({...e,indexWhere:e.indexWhere?T.F.cloneWithOperation(e.indexWhere,"And",t):T.F.create(t)}),cloneWithIndexOrWhere:(e,t)=>(0,l.vV)({...e,indexWhere:e.indexWhere?T.F.cloneWithOperation(e.indexWhere,"Or",t):T.F.create(t)}),cloneWithUpdateWhere:(e,t)=>(0,l.vV)({...e,updateWhere:e.updateWhere?T.F.cloneWithOperation(e.updateWhere,"And",t):T.F.create(t)}),cloneWithUpdateOrWhere:(e,t)=>(0,l.vV)({...e,updateWhere:e.updateWhere?T.F.cloneWithOperation(e.updateWhere,"Or",t):T.F.create(t)}),cloneWithoutIndexWhere:e=>(0,l.vV)({...e,indexWhere:void 0}),cloneWithoutUpdateWhere:e=>(0,l.vV)({...e,updateWhere:void 0})});var O=i(50350);class E{#c;constructor(e){this.#c=(0,l.vV)(e)}column(e){let t=s.k.create(e);return new E({...this.#c,onConflictNode:x.cloneWith(this.#c.onConflictNode,{columns:this.#c.onConflictNode.columns?(0,l.vV)([...this.#c.onConflictNode.columns,t]):(0,l.vV)([t])})})}columns(e){let t=e.map(s.k.create);return new E({...this.#c,onConflictNode:x.cloneWith(this.#c.onConflictNode,{columns:this.#c.onConflictNode.columns?(0,l.vV)([...this.#c.onConflictNode.columns,...t]):(0,l.vV)(t)})})}constraint(e){return new E({...this.#c,onConflictNode:x.cloneWith(this.#c.onConflictNode,{constraint:S.T.create(e)})})}expression(e){return new E({...this.#c,onConflictNode:x.cloneWith(this.#c.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new E({...this.#c,onConflictNode:x.cloneWithIndexWhere(this.#c.onConflictNode,(0,O.k0)(e))})}whereRef(e,t,i){return new E({...this.#c,onConflictNode:x.cloneWithIndexWhere(this.#c.onConflictNode,(0,O.L4)(e,t,i))})}clearWhere(){return new E({...this.#c,onConflictNode:x.cloneWithoutIndexWhere(this.#c.onConflictNode)})}doNothing(){return new k({...this.#c,onConflictNode:x.cloneWith(this.#c.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new A({...this.#c,onConflictNode:x.cloneWith(this.#c.onConflictNode,{updates:v(e)})})}$call(e){return e(this)}}(0,w.q)(E,"don't await OnConflictBuilder instances.");class k{#c;constructor(e){this.#c=(0,l.vV)(e)}toOperationNode(){return this.#c.onConflictNode}}(0,w.q)(k,"don't await OnConflictDoNothingBuilder instances.");class A{#c;constructor(e){this.#c=(0,l.vV)(e)}where(...e){return new A({...this.#c,onConflictNode:x.cloneWithUpdateWhere(this.#c.onConflictNode,(0,O.k0)(e))})}whereRef(e,t,i){return new A({...this.#c,onConflictNode:x.cloneWithUpdateWhere(this.#c.onConflictNode,(0,O.L4)(e,t,i))})}clearWhere(){return new A({...this.#c,onConflictNode:x.cloneWithoutUpdateWhere(this.#c.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#c.onConflictNode}}(0,w.q)(A,"don't await OnConflictUpdateBuilder instances.");var D=i(45261);class C{#c;constructor(e){this.#c=(0,l.vV)(e)}values(e){let[t,i]=f(e);return new C({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{columns:t,values:i})})}columns(e){return new C({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{columns:(0,l.vV)(e.map(s.k.create))})})}expression(e){return new C({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{values:(0,c.BJ)(e)})})}defaultValues(){return new C({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{defaultValues:!0})})}modifyEnd(e){return new C({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}ignore(){return new C({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{ignore:!0})})}top(e,t){return new C({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,D.G)(e,t))})}onConflict(e){return new C({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{onConflict:e(new E({onConflictNode:x.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new C({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{onDuplicateKey:_.create(v(e))})})}returning(e){return new C({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.A)(e))})}returningAll(){return new C({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.L)())})}output(e){return new C({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new C({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}clearReturning(){return new C({...this.#c,queryNode:m.V.cloneWithoutReturning(this.#c.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new C({...this.#c})}$castTo(){return new C(this.#c)}$narrowType(){return new C(this.#c)}$assertType(){return new C(this.#c)}withPlugin(e){return new C({...this.#c,executor:this.#c.executor.withPlugin(e)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile(),t=await this.#c.executor.executeQuery(e,this.#c.queryId),{adapter:i}=this.#c.executor,r=e.query;return r.returning&&i.supportsReturning||r.output&&i.supportsOutput?t.rows:[new N(t.insertId,t.numAffectedRows??t.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=I.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,I.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let i of this.#c.executor.stream(t,e,this.#c.queryId))yield*i.rows}async explain(e,t){let i=new C({...this.#c,queryNode:m.V.cloneWithExplain(this.#c.queryNode,e,t)});return await i.execute()}}(0,w.q)(C,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var B=i(56044),V=i(90679);class F{numDeletedRows;constructor(e){this.numDeletedRows=e}}var R=i(75689),L=i(56251),P=i(75760);class M{#c;constructor(e){this.#c=(0,l.vV)(e)}where(...e){return new M({...this.#c,queryNode:m.V.cloneWithWhere(this.#c.queryNode,(0,O.k0)(e))})}whereRef(e,t,i){return new M({...this.#c,queryNode:m.V.cloneWithWhere(this.#c.queryNode,(0,O.L4)(e,t,i))})}clearWhere(){return new M({...this.#c,queryNode:m.V.cloneWithoutWhere(this.#c.queryNode)})}top(e,t){return new M({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,D.G)(e,t))})}using(e){return new M({...this.#c,queryNode:R.U.cloneWithUsing(this.#c.queryNode,(0,V._V)(e))})}innerJoin(...e){return new M({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,B.h)("InnerJoin",e))})}leftJoin(...e){return new M({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,B.h)("LeftJoin",e))})}rightJoin(...e){return new M({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,B.h)("RightJoin",e))})}fullJoin(...e){return new M({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,B.h)("FullJoin",e))})}returning(e){return new M({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.A)(e))})}returningAll(e){return new M({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.L)(e))})}output(e){return new M({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new M({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}clearReturning(){return new M({...this.#c,queryNode:m.V.cloneWithoutReturning(this.#c.queryNode)})}clearLimit(){return new M({...this.#c,queryNode:R.U.cloneWithoutLimit(this.#c.queryNode)})}clearOrderBy(){return new M({...this.#c,queryNode:R.U.cloneWithoutOrderBy(this.#c.queryNode)})}orderBy(e,t){return new M({...this.#c,queryNode:R.U.cloneWithOrderByItems(this.#c.queryNode,(0,P.bX)([e,t]))})}limit(e){return new M({...this.#c,queryNode:R.U.cloneWithLimit(this.#c.queryNode,L.Z.create((0,d.j2)(e)))})}modifyEnd(e){return new M({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,t){return e?t(this):new M({...this.#c})}$castTo(){return new M(this.#c)}$narrowType(){return new M(this.#c)}$assertType(){return new M(this.#c)}withPlugin(e){return new M({...this.#c,executor:this.#c.executor.withPlugin(e)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile(),t=await this.#c.executor.executeQuery(e,this.#c.queryId),{adapter:i}=this.#c.executor,r=e.query;return r.returning&&i.supportsReturning||r.output&&i.supportsOutput?t.rows:[new F(t.numAffectedRows??t.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=I.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,I.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let i of this.#c.executor.stream(t,e,this.#c.queryId))yield*i.rows}async explain(e,t){let i=new M({...this.#c,queryNode:m.V.cloneWithExplain(this.#c.queryNode,e,t)});return await i.execute()}}(0,w.q)(M,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var U=i(45219);class W{numUpdatedRows;numChangedRows;constructor(e,t){this.numUpdatedRows=e,this.numChangedRows=t}}class z{#c;constructor(e){this.#c=(0,l.vV)(e)}where(...e){return new z({...this.#c,queryNode:m.V.cloneWithWhere(this.#c.queryNode,(0,O.k0)(e))})}whereRef(e,t,i){return new z({...this.#c,queryNode:m.V.cloneWithWhere(this.#c.queryNode,(0,O.L4)(e,t,i))})}clearWhere(){return new z({...this.#c,queryNode:m.V.cloneWithoutWhere(this.#c.queryNode)})}top(e,t){return new z({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,D.G)(e,t))})}from(e){return new z({...this.#c,queryNode:U.j.cloneWithFromItems(this.#c.queryNode,(0,V._V)(e))})}innerJoin(...e){return new z({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,B.h)("InnerJoin",e))})}leftJoin(...e){return new z({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,B.h)("LeftJoin",e))})}rightJoin(...e){return new z({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,B.h)("RightJoin",e))})}fullJoin(...e){return new z({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,B.h)("FullJoin",e))})}limit(e){return new z({...this.#c,queryNode:U.j.cloneWithLimit(this.#c.queryNode,L.Z.create((0,d.j2)(e)))})}set(...e){return new z({...this.#c,queryNode:U.j.cloneWithUpdates(this.#c.queryNode,function(...e){return 2===e.length?[g.create((0,b.jI)(e[0]),(0,d.j2)(e[1]))]:v(e[0])}(...e))})}returning(e){return new z({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.A)(e))})}returningAll(e){return new z({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.L)(e))})}output(e){return new z({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new z({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}modifyEnd(e){return new z({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}clearReturning(){return new z({...this.#c,queryNode:m.V.cloneWithoutReturning(this.#c.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new z({...this.#c})}$castTo(){return new z(this.#c)}$narrowType(){return new z(this.#c)}$assertType(){return new z(this.#c)}withPlugin(e){return new z({...this.#c,executor:this.#c.executor.withPlugin(e)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile(),t=await this.#c.executor.executeQuery(e,this.#c.queryId),{adapter:i}=this.#c.executor,r=e.query;return r.returning&&i.supportsReturning||r.output&&i.supportsOutput?t.rows:[new W(t.numAffectedRows??t.numUpdatedOrDeletedRows??BigInt(0),t.numChangedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=I.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,I.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let i of this.#c.executor.stream(t,e,this.#c.queryId))yield*i.rows}async explain(e,t){let i=new z({...this.#c,queryNode:m.V.cloneWithExplain(this.#c.queryNode,e,t)});return await i.execute()}}(0,w.q)(z,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var q=i(11973),j=i(49501);let $=(0,l.vV)({is:e=>"CommonTableExpressionNameNode"===e.kind,create:(e,t)=>(0,l.vV)({kind:"CommonTableExpressionNameNode",table:j.F.create(e),columns:t?(0,l.vV)(t.map(s.k.create)):void 0})});var Q=i(23013);let Z=(0,l.vV)({is:e=>"CommonTableExpressionNode"===e.kind,create:(e,t)=>(0,l.vV)({kind:"CommonTableExpressionNode",name:e,expression:t}),cloneWith:(e,t)=>(0,l.vV)({...e,...t})});class J{#c;constructor(e){this.#c=(0,l.vV)(e)}materialized(){return new J({...this.#c,node:Z.cloneWith(this.#c.node,{materialized:!0})})}notMaterialized(){return new J({...this.#c,node:Z.cloneWith(this.#c.node,{materialized:!1})})}toOperationNode(){return this.#c.node}}function G(e,t){var i;let r=t((0,Q.$l)()).toOperationNode();return(0,l.mf)(e)?e((i=r,e=>new J({node:Z.create(K(e),i)}))).toOperationNode():Z.create(K(e),r)}function K(e){if(!e.includes("("))return $.create(e);{let t=e.split(/[\(\)]/),i=t[0],r=t[1].split(",").map(e=>e.trim());return $.create(i,r)}}(0,w.q)(J,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");let Y=(0,l.vV)({is:e=>"WithNode"===e.kind,create:(e,t)=>(0,l.vV)({kind:"WithNode",expressions:(0,l.vV)([e]),...t}),cloneWithExpression:(e,t)=>(0,l.vV)({...e,expressions:(0,l.vV)([...e.expressions,t])})});var H=i(25381),X=i(16697),ee=i(64380);let et=(0,l.vV)({is:e=>"MatchedNode"===e.kind,create:(e,t=!1)=>(0,l.vV)({kind:"MatchedNode",not:e,bySource:t})});var ei=i(62240),er=i(67386),en=i(96409);function es(e,t,i){return en.$.create((0,O.QX)([et.create(!e.isMatched,e.bySource),...t&&t.length>0?[3===t.length&&i?(0,O.L4)(t[0],t[1],t[2]):(0,O.k0)(t)]:[]],"and",!1))}function eo(e){return(0,l.HD)(e)?er.x.create([e],[]):(0,ei.x)(e)?e.toOperationNode():e}var ea=i(39745);class el{numChangedRows;constructor(e){this.numChangedRows=e}}class ed{#c;constructor(e){this.#c=(0,l.vV)(e)}modifyEnd(e){return new ed({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}top(e,t){return new ed({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,D.G)(e,t))})}using(...e){return new eu({...this.#c,queryNode:ee.F.cloneWithUsing(this.#c.queryNode,(0,B.h)("Using",e))})}output(e){return new ed({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new ed({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}}(0,w.q)(ed,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class eu{#c;constructor(e){this.#c=(0,l.vV)(e)}modifyEnd(e){return new eu({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}top(e,t){return new eu({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,D.G)(e,t))})}whenMatched(){return this.#Q([])}whenMatchedAnd(...e){return this.#Q(e)}whenMatchedAndRef(e,t,i){return this.#Q([e,t,i],!0)}#Q(e,t){return new ec({...this.#c,queryNode:ee.F.cloneWithWhen(this.#c.queryNode,es({isMatched:!0},e,t))})}whenNotMatched(){return this.#Z([])}whenNotMatchedAnd(...e){return this.#Z(e)}whenNotMatchedAndRef(e,t,i){return this.#Z([e,t,i],!0)}whenNotMatchedBySource(){return this.#Z([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#Z(e,!1,!0)}whenNotMatchedBySourceAndRef(e,t,i){return this.#Z([e,t,i],!0,!0)}output(e){return new eu({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new eu({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}#Z(e,t=!1,i=!1){let r={...this.#c,queryNode:ee.F.cloneWithWhen(this.#c.queryNode,es({isMatched:!1,bySource:i},e,t))};return new(i?ec:eh)(r)}$call(e){return e(this)}$if(e,t){return e?t(this):new eu({...this.#c})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile(),t=await this.#c.executor.executeQuery(e,this.#c.queryId);return e.query.output&&this.#c.executor.adapter.supportsOutput?t.rows:[new el(t.numAffectedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=I.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,I.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}}(0,w.q)(eu,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class ec{#c;constructor(e){this.#c=(0,l.vV)(e)}thenDelete(){return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo("delete"))})}thenDoNothing(){return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo("do nothing"))})}thenUpdate(e){return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo(e(new z({queryId:this.#c.queryId,executor:ea.H,queryNode:U.j.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(t=>t.set(...e))}}(0,w.q)(ec,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class eh{#c;constructor(e){this.#c=(0,l.vV)(e)}thenDoNothing(){return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo("do nothing"))})}thenInsertValues(e){let[t,i]=f(e);return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo(y.P.cloneWith(y.P.createWithoutInto(),{columns:t,values:i})))})}}(0,w.q)(eh,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class ep{#c;constructor(e){this.#c=(0,l.vV)(e)}selectFrom(e){return(0,r.u)({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:q.a.createFrom((0,V._V)(e),this.#c.withNode)})}selectNoFrom(e){return(0,r.u)({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:q.a.cloneWithSelections(q.a.create(this.#c.withNode),(0,n.A)(e))})}insertInto(e){return new C({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:y.P.create((0,V.G2)(e),this.#c.withNode)})}replaceInto(e){return new C({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:y.P.create((0,V.G2)(e),this.#c.withNode,!0)})}deleteFrom(e){return new M({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:R.U.create((0,V._V)(e),this.#c.withNode)})}updateTable(e){return new z({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:U.j.create((0,V.Lr)(e),this.#c.withNode)})}mergeInto(e){return new ed({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:ee.F.create((0,V.hm)(e),this.#c.withNode)})}with(e,t){let i=G(e,t);return new ep({...this.#c,withNode:this.#c.withNode?Y.cloneWithExpression(this.#c.withNode,i):Y.create(i)})}withRecursive(e,t){let i=G(e,t);return new ep({...this.#c,withNode:this.#c.withNode?Y.cloneWithExpression(this.#c.withNode,i):Y.create(i,{recursive:!0})})}withPlugin(e){return new ep({...this.#c,executor:this.#c.executor.withPlugin(e)})}withoutPlugins(){return new ep({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(e){return new ep({...this.#c,executor:this.#c.executor.withPluginAtFront(new X.v(e))})}}},39745:function(e,t,i){i.d(t,{H:()=>s});var r=i(56305);class n extends r.u{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(e){return new n([...this.plugins,e])}withPlugins(e){return new n([...this.plugins,...e])}withPluginAtFront(e){return new n([e,...this.plugins])}withoutPlugins(){return new n([])}}let s=new n},56305:function(e,t,i){i.d(t,{u:()=>a});var r=i(47589);class n{#J;#G;#K;constructor(){this.#J=new Promise((e,t)=>{this.#K=t,this.#G=e})}get promise(){return this.#J}resolve=e=>{this.#G&&this.#G(e)};reject=e=>{this.#K&&this.#K(e)}}let s=new Set,o=(0,r.vV)([]);class a{#Y;constructor(e=o){this.#Y=e}get plugins(){return this.#Y}transformQuery(e,t){for(let i of this.#Y){let r=i.transformQuery({node:e,queryId:t});if(r.kind===e.kind)e=r;else throw Error(`KyselyPlugin.transformQuery must return a node of the same kind that was given to it. The plugin was given a ${e.kind} but it returned a ${r.kind}`)}return e}async executeQuery(e,t){return await this.provideConnection(async i=>{let r=await i.executeQuery(e),n=await this.#H(r,t);return function(e,t){let{numAffectedRows:i}=e;if((void 0!==i||void 0!==e.numUpdatedOrDeletedRows)&&(void 0===i||void 0===t.numAffectedRows)){var r;r="kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.",s.has(r)||(s.add(r),console.log(r))}}(r,n),n})}async *stream(e,t,i){let r=new n,s=new n;this.provideConnection(async e=>(r.resolve(e),await s.promise)).catch(e=>r.reject(e));let o=await r.promise;try{for await(let r of o.streamQuery(e,t))yield await this.#H(r,i)}finally{s.resolve()}}async #H(e,t){for(let i of this.#Y)e=await i.transformResult({result:e,queryId:t});return e}}},11593:function(e,t,i){i.d(t,{i:()=>b});var r=i(36548),n=i(62240),s=i(67386),o=i(38419),a=i(57550),l=i(90679),d=i(11942),u=i(25381),c=i(1784),h=i(26481),p=i(47589),f=i(39745);class y{#c;constructor(e){this.#c=(0,p.vV)(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new g(this,e)}$castTo(){return new y({...this.#c})}$notNull(){return new y(this.#c)}withPlugin(e){return new y({...this.#c,plugins:void 0!==this.#c.plugins?(0,p.vV)([...this.#c.plugins,e]):(0,p.vV)([e])})}toOperationNode(){return this.#X(this.#ee())}compile(e){return this.#et(this.#ee(e))}async execute(e){let t=this.#ee(e);return t.executeQuery(this.#et(t),this.#c.queryId)}#ee(e){let t=void 0!==e?e.getExecutor():f.H;return void 0!==this.#c.plugins?t.withPlugins(this.#c.plugins):t}#X(e){return e.transformQuery(this.#c.rawNode,this.#c.queryId)}#et(e){return e.compileQuery(this.#X(e),this.#c.queryId)}}function m(e){return new y(e)}(0,h.q)(y,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class g{#ei;#a;constructor(e,t){this.#ei=e,this.#a=t}get expression(){return this.#ei}get alias(){return this.#a}get rawBuilder(){return this.#ei}toOperationNode(){return c.i.create(this.#ei.toOperationNode(),(0,n.x)(this.#a)?this.#a.toOperationNode():r.T.create(this.#a))}}(0,h.q)(g,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");let b=Object.assign((e,...t)=>m({queryId:(0,u.y)(),rawNode:s.x.create(e,t?.map(v)??[])}),{ref:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithChild((0,a.KX)(e))}),val:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithChild((0,d.j2)(e))}),value(e){return this.val(e)},table:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithChild((0,l.G2)(e))}),id(...e){let t=Array(e.length+1).fill(".");return t[0]="",t[t.length-1]="",m({queryId:(0,u.y)(),rawNode:s.x.create(t,e.map(r.T.create))})},lit:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithChild(o.g.createImmediate(e))}),literal(e){return this.lit(e)},raw:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithSql(e)}),join(e,t=b`, `){let i=Array(2*e.length-1),r=t.toOperationNode();for(let t=0;t<e.length;++t)i[2*t]=v(e[t]),t!==e.length-1&&(i[2*t+1]=r);return m({queryId:(0,u.y)(),rawNode:s.x.createWithChildren(i)})}});function v(e){return(0,n.x)(e)?e.toOperationNode():(0,d.j2)(e)}},47589:function(e,t,i){function r(e){return void 0===e||void 0===e}function n(e){return"string"==typeof e}function s(e){return"number"==typeof e}function o(e){return"boolean"==typeof e}function a(e){return null===e}function l(e){return e instanceof Date}function d(e){return"bigint"==typeof e}function u(e){return"function"==typeof e}function c(e){return"object"==typeof e&&null!==e}function h(e){return Object.freeze(e)}function p(e){return f(e)?e:[e]}function f(e){return Array.isArray(e)}function y(e){return e}i.d(t,{C4:()=>d,DM:()=>f,Ft:()=>a,HD:()=>n,J_:()=>l,Kn:()=>c,ZT:()=>y,_2:()=>p,hj:()=>s,jn:()=>o,mf:()=>u,o8:()=>r,vV:()=>h}),Object.prototype.toString},26481:function(e,t,i){i.d(t,{q:()=>r});function r(e,t){Object.defineProperties(e.prototype,{then:{enumerable:!1,value:()=>{throw Error(t)}}})}},25381:function(e,t,i){i.d(t,{y:()=>n});let r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function n(){return new s}class s{#er;get queryId(){return void 0===this.#er&&(this.#er=function(e){let t="";for(let e=0;e<8;++e)t+=r[~~(Math.random()*r.length)];return t}(0)),this.#er}}},23135:function(e,t,i){function r(e){if(0===e.length)throw Error("mean requires at least one data point");return function(e){if(0===e.length)return 0;var t,i=e[0],r=0;if("number"!=typeof i)return Number.NaN;for(var n=1;n<e.length;n++){if("number"!=typeof e[n])return Number.NaN;t=i+e[n],Math.abs(i)>=Math.abs(e[n])?r+=i-t+e[n]:r+=e[n]-t+i,i=t}return i+r}(e)/e.length}function n(e){return 1===e.length?0:Math.sqrt(function(e){if(0===e.length)throw Error("variance requires at least one data point");return function(e,t){var i,n,s=r(e),o=0;for(n=0;n<e.length;n++)o+=(i=e[n]-s)*i;return o}(e,0)/e.length}(e))}function s(e,t){var i=e.length*t;if(0===e.length)throw Error("quantile requires at least one data point.");if(t<0||t>1)throw Error("quantiles must be between 0 and 1");if(1===t)return e[e.length-1];if(0===t)return e[0];if(i%1!=0)return e[Math.ceil(i)-1];else if(e.length%2==0)return(e[i-1]+e[i])/2;else return e[i]}function o(e,t,i,r){for(i=i||0,r=r||e.length-1;r>i;){if(r-i>600){var n=r-i+1,s=t-i+1,l=Math.log(n),d=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*d*(n-d)/n);s-n/2<0&&(u*=-1);var c=Math.max(i,Math.floor(t-s*d/n+u)),h=Math.min(r,Math.floor(t+(n-s)*d/n+u));o(e,t,c,h)}var p=e[t],f=i,y=r;for(a(e,i,t),e[r]>p&&a(e,i,r);f<y;){for(a(e,f,y),f++,y--;e[f]<p;)f++;for(;e[y]>p;)y--}e[i]===p?a(e,i,y):a(e,++y,r),y<=t&&(i=y+1),t<=y&&(r=y-1)}}function a(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function l(e,t,i,r){t%1==0?o(e,t,i,r):(o(e,t=Math.floor(t),i,r),o(e,t+1,t+1,r))}function d(e,t){return e-t}function u(e,t){var i=e*t;return 1===t?e-1:0===t?0:i%1!=0?Math.ceil(i)-1:e%2==0?i-.5:i}function c(e){return+function(e,t){var i=e.slice();if(Array.isArray(.5)){!function(e,t){for(var i=[0],r=0;r<t.length;r++)i.push(u(e.length,t[r]));i.push(e.length-1),i.sort(d);for(var n=[0,i.length-1];n.length;){var s=Math.ceil(n.pop()),o=Math.floor(n.pop());if(!(s-o<=1)){var a=Math.floor((o+s)/2);l(e,i[a],Math.floor(i[o]),Math.ceil(i[s])),n.push(o,a,a,s)}}}(i,.5);for(var r=[],n=0;n<t.length;n++)r[n]=s(i,t[n]);return r}var o=u(i.length,t);return l(i,o,0,i.length-1),s(i,t)}(e,.5)}function h(e){for(var t=c(e),i=[],r=0;r<e.length;r++)i.push(Math.abs(e[r]-t));return c(i)}i.d(t,{C2:()=>c,IN:()=>n,J6:()=>r,Ju:()=>h});var p=function(){this.totalCount=0,this.data={}};p.prototype.train=function(e,t){for(var i in this.data[t]||(this.data[t]={}),e){var r=e[i];void 0===this.data[t][i]&&(this.data[t][i]={}),void 0===this.data[t][i][r]&&(this.data[t][i][r]=0),this.data[t][i][r]++}this.totalCount++},p.prototype.score=function(e){var t,i={};for(var r in e){var n=e[r];for(t in this.data)i[t]={},this.data[t][r]?i[t][r+"_"+n]=(this.data[t][r][n]||0)/this.totalCount:i[t][r+"_"+n]=0}var s={};for(t in i)for(var o in s[t]=0,i[t])s[t]+=i[t][o];return s};var f=function(){this.weights=[],this.bias=0};f.prototype.predict=function(e){if(e.length!==this.weights.length)return null;for(var t=0,i=0;i<this.weights.length;i++)t+=this.weights[i]*e[i];return+((t+=this.bias)>0)},f.prototype.train=function(e,t){if(0!==t&&1!==t)return null;e.length!==this.weights.length&&(this.weights=e,this.bias=1);var i=this.predict(e);if("number"==typeof i&&i!==t){for(var r=t-i,n=0;n<this.weights.length;n++)this.weights[n]+=r*e[n];this.bias+=r}return this};for(var y=Math.sqrt(2*Math.PI),m=[],g=0;g<=3.09;g+=.01)m.push(function(e){for(var t=e,i=e,r=1;r<15;r++)i*=e*e/(2*r+1),t+=i;return Math.round((.5+t/y*Math.exp(-e*e/2))*1e4)/1e4}(g))},2318:function(e,t,i){let r,n;i.d(t,{QW:()=>iP,D5:()=>r3,mJ:()=>r4});let s=()=>new Map,o=e=>{let t=s();return e.forEach((e,i)=>{t.set(i,e)}),t},a=(e,t,i)=>{let r=e.get(t);return void 0===r&&e.set(t,r=i()),r},l=(e,t)=>{let i=[];for(let[r,n]of e)i.push(t(n,r));return i},d=(e,t)=>{for(let[i,r]of e)if(t(r,i))return!0;return!1},u=()=>new Set,c=e=>e[e.length-1],h=(e,t)=>{for(let i=0;i<t.length;i++)e.push(t[i])},p=Array.from,f=(e,t)=>{for(let i=0;i<e.length;i++)if(!t(e[i],i,e))return!1;return!0},y=(e,t)=>{for(let i=0;i<e.length;i++)if(t(e[i],i,e))return!0;return!1},m=(e,t)=>{let i=Array(e);for(let r=0;r<e;r++)i[r]=t(r,i);return i},g=Array.isArray;class b{constructor(){this._observers=s()}on(e,t){return a(this._observers,e,u).add(t),t}once(e,t){let i=(...r)=>{this.off(e,i),t(...r)};this.on(e,i)}off(e,t){let i=this._observers.get(e);void 0!==i&&(i.delete(t),0===i.size&&this._observers.delete(e))}emit(e,t){return p((this._observers.get(e)||s()).values()).forEach(e=>e(...t))}destroy(){this._observers=s()}}let v=Math.floor,w=Math.abs,_=(e,t)=>e<t?e:t,N=(e,t)=>e>t?e:t,I=e=>0!==e?e<0:1/e<0,S=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,x=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&v(e)===e),O=String.fromCharCode;O(65535);let E=e=>e.toLowerCase(),k=/^\s*/g,A=e=>e.replace(k,""),D=/([A-Z])/g,C=(e,t)=>A(e.replace(D,e=>`${t}${E(e)}`)),B="undefined"!=typeof TextEncoder?new TextEncoder:null,V=B?e=>B.encode(e):e=>{let t=unescape(encodeURIComponent(e)),i=t.length,r=new Uint8Array(i);for(let e=0;e<i;e++)r[e]=t.codePointAt(e);return r},F="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});F&&1===F.decode(new Uint8Array).length&&(F=null);let R=(e,t)=>m(t,()=>e).join("");class L{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let P=()=>new L,M=e=>{let t=e.cpos;for(let i=0;i<e.bufs.length;i++)t+=e.bufs[i].length;return t},U=e=>{let t=new Uint8Array(M(e)),i=0;for(let r=0;r<e.bufs.length;r++){let n=e.bufs[r];t.set(n,i),i+=n.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),i),t},W=(e,t)=>{let i=e.cbuf.length;i-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*N(i,t)),e.cpos=0)},z=(e,t)=>{let i=e.cbuf.length;e.cpos===i&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*i),e.cpos=0),e.cbuf[e.cpos++]=t},q=(e,t)=>{for(;t>127;)z(e,128|127&t),t=v(t/128);z(e,127&t)},j=(e,t)=>{let i=I(t);for(i&&(t=-t),z(e,128*(t>63)|64*!!i|63&t),t=v(t/64);t>0;)z(e,128*(t>127)|127&t),t=v(t/128)},$=new Uint8Array(3e4),Q=$.length/3,Z=B&&B.encodeInto?(e,t)=>{if(t.length<Q){let i=B.encodeInto(t,$).written||0;q(e,i);for(let t=0;t<i;t++)z(e,$[t])}else G(e,V(t))}:(e,t)=>{let i=unescape(encodeURIComponent(t)),r=i.length;q(e,r);for(let t=0;t<r;t++)z(e,i.codePointAt(t))},J=(e,t)=>{let i=e.cbuf.length,r=e.cpos,n=_(i-r,t.length),s=t.length-n;e.cbuf.set(t.subarray(0,n),r),e.cpos+=n,s>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(N(2*i,s)),e.cbuf.set(t.subarray(n)),e.cpos=s)},G=(e,t)=>{q(e,t.byteLength),J(e,t)},K=(e,t)=>{W(e,t);let i=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,i},Y=(e,t)=>K(e,4).setFloat32(0,t,!1),H=(e,t)=>K(e,8).setFloat64(0,t,!1),X=(e,t)=>K(e,8).setBigInt64(0,t,!1),ee=new DataView(new ArrayBuffer(4)),et=e=>(ee.setFloat32(0,e),ee.getFloat32(0)===e),ei=(e,t)=>{switch(typeof t){case"string":z(e,119),Z(e,t);break;case"number":x(t)&&0x7fffffff>=w(t)?(z(e,125),j(e,t)):et(t)?(z(e,124),Y(e,t)):(z(e,123),H(e,t));break;case"bigint":z(e,122),X(e,t);break;case"object":if(null===t)z(e,126);else if(g(t)){z(e,117),q(e,t.length);for(let i=0;i<t.length;i++)ei(e,t[i])}else if(t instanceof Uint8Array)z(e,116),G(e,t);else{z(e,118);let i=Object.keys(t);q(e,i.length);for(let r=0;r<i.length;r++){let n=i[r];Z(e,n),ei(e,t[n])}}break;case"boolean":z(e,t?120:121);break;default:z(e,127)}};class er extends L{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&q(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}let en=e=>{e.count>0&&(j(e.encoder,1===e.count?e.s:-e.s),e.count>1&&q(e.encoder,e.count-2))};class es{constructor(){this.encoder=new L,this.s=0,this.count=0}write(e){this.s===e?this.count++:(en(this),this.count=1,this.s=e)}toUint8Array(){return en(this),U(this.encoder)}}let eo=e=>{if(e.count>0){let t=2*e.diff+ +(1!==e.count);j(e.encoder,t),e.count>1&&q(e.encoder,e.count-2)}};class ea{constructor(){this.encoder=new L,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(eo(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return eo(this),U(this.encoder)}}class el{constructor(){this.sarr=[],this.s="",this.lensE=new es}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new L;return this.sarr.push(this.s),this.s="",Z(e,this.sarr.join("")),J(e,this.lensE.toUint8Array()),U(e)}}let ed=e=>Error(e),eu=()=>{throw ed("Method unimplemented")},ec=()=>{throw ed("Unexpected case")},eh=ed("Unexpected end of array"),ep=ed("Integer out of Range");class ef{constructor(e){this.arr=e,this.pos=0}}let ey=e=>e.pos!==e.arr.length,em=(e,t)=>{let i=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,i},eg=e=>em(e,ev(e)),eb=e=>e.arr[e.pos++],ev=e=>{let t=0,i=1,r=e.arr.length;for(;e.pos<r;){let r=e.arr[e.pos++];if(t+=(127&r)*i,i*=128,r<128)return t;if(t>S)throw ep}throw eh},ew=e=>{let t=e.arr[e.pos++],i=63&t,r=64,n=(64&t)>0?-1:1;if((128&t)==0)return n*i;let s=e.arr.length;for(;e.pos<s;){if(i+=(127&(t=e.arr[e.pos++]))*r,r*=128,t<128)return n*i;if(i>S)throw ep}throw eh},e_=F?e=>F.decode(eg(e)):e=>{let t=ev(e);if(0===t)return"";{let i=String.fromCodePoint(eb(e));if(--t<100)for(;t--;)i+=String.fromCodePoint(eb(e));else for(;t>0;){let r=t<1e4?t:1e4,n=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,i+=String.fromCodePoint.apply(null,n),t-=r}return decodeURIComponent(escape(i))}},eN=(e,t)=>{let i=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,i},eI=[e=>void 0,e=>null,ew,e=>eN(e,4).getFloat32(0,!1),e=>eN(e,8).getFloat64(0,!1),e=>eN(e,8).getBigInt64(0,!1),e=>!1,e=>!0,e_,e=>{let t=ev(e),i={};for(let r=0;r<t;r++)i[e_(e)]=eS(e);return i},e=>{let t=ev(e),i=[];for(let r=0;r<t;r++)i.push(eS(e));return i},eg],eS=e=>eI[127-eb(e)](e);class eT extends ef{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),ey(this)?this.count=ev(this)+1:this.count=-1),this.count--,this.s}}class ex extends ef{constructor(e){super(e),this.s=0,this.count=0}read(){if(0===this.count){this.s=ew(this);let e=I(this.s);this.count=1,e&&(this.s=-this.s,this.count=ev(this)+2)}return this.count--,this.s}}class eO extends ef{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){let e=ew(this);this.diff=v(e/2),this.count=1,1&e&&(this.count=ev(this)+2)}return this.s+=this.diff,this.count--,this.s}}class eE{constructor(e){this.decoder=new ex(e),this.str=e_(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}crypto.subtle;let ek=crypto.getRandomValues.bind(crypto),eA=()=>ek(new Uint32Array(1))[0],eD=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^eA()&15>>e/4).toString(16)),eC=e=>new Promise(e);Promise.all.bind(Promise);let eB=Symbol("Equality"),eV=(e,t)=>e===t||!!e?.[eB]?.(t),eF=e=>"object"==typeof e,eR=Object.assign,eL=Object.keys,eP=(e,t)=>{for(let i in e)t(e[i],i)},eM=e=>eL(e).length,eU=e=>{for(let t in e)return!1;return!0},eW=(e,t)=>{for(let i in e)if(!t(e[i],i))return!1;return!0},ez=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),eq=(e,t)=>e===t||eM(e)===eM(t)&&eW(e,(e,i)=>(void 0!==e||ez(t,i))&&eV(t[i],e)),ej=Object.freeze,e$=e=>{for(let t in e){let i=e[t];("object"==typeof i||"function"==typeof i)&&e$(e[t])}return ej(e)},eQ=(e,t,i=0)=>{try{for(;i<e.length;i++)e[i](...t)}finally{i<e.length&&eQ(e,t,i+1)}},eZ=(e,t)=>{if(e===t)return!0;if(null==e||null==t||e.constructor!==t.constructor&&(e.constructor||Object)!==(t.constructor||Object))return!1;if(null!=e[eB])return e[eB](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;break;case Set:if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;break;case Map:if(e.size!==t.size)return!1;for(let i of e.keys())if(!t.has(i)||!eZ(e.get(i),t.get(i)))return!1;break;case void 0:case Object:if(eM(e)!==eM(t))return!1;for(let i in e)if(!ez(e,i)||!eZ(e[i],t[i]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!eZ(e[i],t[i]))return!1;break;default:return!1}return!0},eJ=e=>void 0===e?null:e,eG=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}};try{"undefined"!=typeof localStorage&&localStorage&&(eG=localStorage)}catch(e){}let eK=eG,eY="undefined"!=typeof process&&process.release&&/node|io\.js/.test(process.release.name)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let eH=[],eX=()=>{if(void 0===r)if(eY){r=s();let e=process.argv,t=null;for(let i=0;i<e.length;i++){let n=e[i];"-"===n[0]?(null!==t&&r.set(t,""),t=n):null!==t?(r.set(t,n),t=null):eH.push(n)}null!==t&&r.set(t,"")}else"object"==typeof location?(r=s(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[t,i]=e.split("=");r.set(`--${C(t,"-")}`,i),r.set(`-${C(t,"-")}`,i)}})):r=s();return r},e0=e=>eX().has(e),e1=e=>eY?eJ(process.env[e.toUpperCase().replaceAll("-","_")]):eJ(eK.getItem(e)),e2=e=>e0("--"+e)||null!==e1(e),e4=e2("production"),e8=eY&&["true","1","2"].includes(process.env.FORCE_COLOR)||!e0("--no-colors")&&!e2("no-color")&&(!eY||process.stdout.isTTY)&&(!eY||e0("--color")||null!==e1("COLORTERM")||(e1("TERM")||"").includes("color"));class e3{constructor(e,t){this.left=e,this.right=t}}let e6=(e,t)=>new e3(e,t),e5=e=>e.next()>=.5,e9=(e,t,i)=>v(e.next()*(i+1-t)+t),e7=(e,t,i)=>v(e.next()*(i+1-t)+t),te=(e,t,i)=>e7(e,t,i),tt=e=>O(te(e,97,122)),ti=(e,t=0,i=20)=>{let r=te(e,t,i),n="";for(let t=0;t<r;t++)n+=tt(e);return n},tr=(e,t)=>t[te(e,0,t.length-1)],tn=Symbol("0schema");class ts{constructor(){this._rerrs=[]}extend(e,t,i,r=null){this._rerrs.push({path:e,expected:t,has:i,message:r})}toString(){let e=[];for(let t=this._rerrs.length-1;t>0;t--){let i=this._rerrs[t];e.push(R(" ",(this._rerrs.length-t)*2)+`${null!=i.path?`[${i.path}] `:""}${i.has} doesn't match ${i.expected}. ${i.message}`)}return e.join("\n")}}let to=(e,t)=>e===t||null!=e&&null!=t&&e.constructor===t.constructor&&(e[eB]?eV(e,t):g(e)?f(e,e=>y(t,t=>to(e,t))):!!eF(e)&&eW(e,(e,i)=>to(e,t[i])));class ta{static _dilutes=!1;extends(e){let[t,i]=[this.shape,e.shape];return this.constructor._dilutes&&([i,t]=[t,i]),to(t,i)}equals(e){return this.constructor===e.constructor&&eZ(this.shape,e.shape)}[tn](){return!0}[eB](e){return this.equals(e)}validate(e){return this.check(e)}check(e,t){eu()}get nullable(){return tM(this,t0)}get optional(){return new tb(this)}cast(e){return t5(e,this),e}expect(e){return t5(e,this),e}}class tl extends ta{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t){let i=e?.constructor===this.shape&&(null==this._c||this._c(e));return i||t?.extend(null,this.shape.name,e?.constructor.name,e?.constructor!==this.shape?"Constructor match failed":"Check failed"),i}}let td=(e,t=null)=>new tl(e,t);td(tl);class tu extends ta{constructor(e){super(),this.shape=e}check(e,t){let i=this.shape(e);return i||t?.extend(null,"custom prop",e?.constructor.name,"failed to check custom prop"),i}}let tc=e=>new tu(e);td(tu);class th extends ta{constructor(e){super(),this.shape=e}check(e,t){let i=this.shape.some(t=>t===e);return i||t?.extend(null,this.shape.join(" | "),e.toString()),i}}let tp=(...e)=>new th(e),tf=td(th),ty=RegExp.escape||(e=>e.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),tm=e=>tG.check(e)?[ty(e)]:tf.check(e)?e.shape.map(e=>e+""):tJ.check(e)?["[+-]?\\d+.?\\d*"]:tK.check(e)?[".*"]:tU.check(e)?e.shape.map(tm).flat(1):void ec();td(class extends ta{constructor(e){super(),this.shape=e,this._r=RegExp("^"+e.map(tm).map(e=>`(${e.join("|")})`).join("")+"$")}check(e,t){let i=null!=this._r.exec(e);return i||t?.extend(null,this._r.toString(),e.toString(),"String doesn't match string template."),i}});let tg=Symbol("optional");class tb extends ta{constructor(e){super(),this.shape=e}check(e,t){let i=void 0===e||this.shape.check(e);return i||t?.extend(null,"undefined (optional)","()"),i}get[tg](){return!0}}let tv=td(tb);class tw extends ta{check(e,t){return t?.extend(null,"never",typeof e),!1}}new tw,td(tw);class t_ extends ta{constructor(e,t=!1){super(),this.shape=e,this._isPartial=t}static _dilutes=!0;get partial(){return new t_(this.shape,!0)}check(e,t){return null==e?(t?.extend(null,"object","null"),!1):eW(this.shape,(i,r)=>{let n=this._isPartial&&!ez(e,r)||i.check(e[r],t);return n||t?.extend(r.toString(),i.toString(),typeof e[r],"Object property does not match"),n})}}let tN=e=>new t_(e),tI=td(t_),tS=tc(e=>null!=e&&(e.constructor===Object||null==e.constructor));class tT extends ta{constructor(e,t){super(),this.shape={keys:e,values:t}}check(e,t){return null!=e&&eW(e,(i,r)=>{let n=this.shape.keys.check(r,t);return n||t?.extend(r+"","Record",typeof e,n?"Key doesn't match schema":"Value doesn't match value"),n&&this.shape.values.check(i,t)})}}let tx=(e,t)=>new tT(e,t),tO=td(tT);class tE extends ta{constructor(e){super(),this.shape=e}check(e,t){return null!=e&&eW(this.shape,(i,r)=>{let n=i.check(e[r],t);return n||t?.extend(r.toString(),"Tuple",typeof i),n})}}let tk=(...e)=>new tE(e);td(tE);class tA extends ta{constructor(e){super(),this.shape=1===e.length?e[0]:new tP(e)}check(e,t){let i=g(e)&&f(e,e=>this.shape.check(e));return i||t?.extend(null,"Array",""),i}}let tD=(...e)=>new tA(e),tC=td(tA),tB=tc(e=>g(e));class tV extends ta{constructor(e,t){super(),this.shape=e,this._c=t}check(e,t){let i=e instanceof this.shape&&(null==this._c||this._c(e));return i||t?.extend(null,this.shape.name,e?.constructor.name),i}}td(tV);let tF=((e,t=null)=>new tV(e,t))(ta),tR=td(class extends ta{constructor(e){super(),this.len=e.length-1,this.args=tk(...e.slice(-1)),this.res=e[this.len]}check(e,t){let i=e.constructor===Function&&e.length<=this.len;return i||t?.extend(null,"function",typeof e),i}}),tL=tc(e=>"function"==typeof e);td(class extends ta{constructor(e){super(),this.shape=e}check(e,t){let i=f(this.shape,i=>i.check(e,t));return i||t?.extend(null,"Intersectinon",typeof e),i}},e=>e.shape.length>0);class tP extends ta{static _dilutes=!0;constructor(e){super(),this.shape=e}check(e,t){let i=y(this.shape,i=>i.check(e,t));return t?.extend(null,"Union",typeof e),i}}let tM=(...e)=>e.findIndex(e=>tU.check(e))>=0?tM(...e.map(e=>t6(e)).map(e=>tU.check(e)?e.shape:[e]).flat(1)):1===e.length?e[0]:new tP(e),tU=td(tP),tW=()=>!0,tz=tc(tW),tq=td(tu,e=>e.shape===tW),tj=tc(e=>"bigint"==typeof e),t$=tc(e=>e===tj),tQ=tc(e=>"symbol"==typeof e);tc(e=>e===tQ);let tZ=tc(e=>"number"==typeof e),tJ=tc(e=>e===tZ),tG=tc(e=>"string"==typeof e),tK=tc(e=>e===tG),tY=tc(e=>"boolean"==typeof e),tH=tc(e=>e===tY),tX=tp(void 0);td(th,e=>1===e.shape.length&&void 0===e.shape[0]),tp(void 0);let t0=tp(null),t1=td(th,e=>1===e.shape.length&&null===e.shape[0]);td(Uint8Array),td(tl,e=>e.shape===Uint8Array);let t2=tM(tZ,tG,t0,tX,tj,tY,tQ),t4=tD(tz),t8=tx(tG,tz),t3=tM(tZ,tG,t0,tY,t4,t8);t4.shape=t3,t8.shape.values=t3;let t6=e=>{if(tF.check(e))return e;if(tS.check(e)){let t={};for(let i in e)t[i]=t6(e[i]);return tN(t)}if(tB.check(e))return tM(...e.map(t6));if(t2.check(e))return tp(e);if(tL.check(e))return td(e);ec()},t5=e4?()=>{}:(e,t)=>{let i=new ts;if(!t.check(e,i))throw ed(`Expected value to be of type ${t.constructor.name}.
${i.toString()}`)},t9=new class e{constructor(e){this.patterns=[],this.$state=e}if(e,t){return this.patterns.push({if:t6(e),h:t}),this}else(e){return this.if(tz,e)}done(){return(e,t)=>{for(let i=0;i<this.patterns.length;i++){let r=this.patterns[i];if(r.if.check(e))return r.h(e,t)}throw ed("Unhandled pattern")}}}(tz).if(tJ,(e,t)=>e9(t,T,S)).if(tK,(e,t)=>ti(t)).if(tH,(e,t)=>e5(t)).if(t$,(e,t)=>BigInt(e9(t,T,S))).if(tU,(e,t)=>t7(t,tr(t,e.shape))).if(tI,(e,t)=>{let i={};for(let r in e.shape){let n=e.shape[r];if(tv.check(n)){if(e5(t))continue;n=n.shape}i[r]=t9(n,t)}return i}).if(tC,(e,t)=>{let i=[],r=e7(t,0,42);for(let n=0;n<r;n++)i.push(t7(t,e.shape));return i}).if(tf,(e,t)=>tr(t,e.shape)).if(t1,(e,t)=>null).if(tR,(e,t)=>{let i=t7(t,e.res);return()=>i}).if(tq,(e,t)=>t7(t,tr(t,[tZ,tG,t0,tX,tj,tY,tD(tZ),tx(tM("a","b","c"),tZ)]))).if(tO,(e,t)=>{let i={},r=e9(t,0,3);for(let n=0;n<r;n++){let r=t7(t,e.shape.keys),n=t7(t,e.shape.values);i[r]=n}return i}).done(),t7=(e,t)=>t9(t6(t),e),ie="undefined"!=typeof document?document:{};tc(e=>e.nodeType===io),"undefined"!=typeof DOMParser&&new DOMParser,tc(e=>e.nodeType===ii),tc(e=>e.nodeType===ir);let it=e=>l(e,(e,t)=>`${t}:${e};`).join(""),ii=ie.ELEMENT_NODE,ir=ie.TEXT_NODE;ie.CDATA_SECTION_NODE,ie.COMMENT_NODE;let is=ie.DOCUMENT_NODE;ie.DOCUMENT_TYPE_NODE;let io=ie.DOCUMENT_FRAGMENT_NODE;tc(e=>e.nodeType===is);let ia=Symbol,il=Date.now,id=ia(),iu=ia(),ic=ia(),ih=ia(),ip=ia(),iy=ia(),im=ia(),ig=ia(),ib=ia();il();let iv={[id]:e6("font-weight","bold"),[iu]:e6("font-weight","normal"),[ic]:e6("color","blue"),[ip]:e6("color","green"),[ih]:e6("color","grey"),[iy]:e6("color","red"),[im]:e6("color","purple"),[ig]:e6("color","orange"),[ib]:e6("color","black")},iw=e8?e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],i=[],r=s(),n=[],o=0;for(;o<e.length;o++){let n=e[o],s=iv[n];if(void 0!==s)r.set(s.left,s.right);else{if(void 0===n)break;if(n.constructor===String||n.constructor===Number){let e=it(r);o>0||e.length>0?(t.push("%c"+n),i.push(e)):t.push(n)}else break}}for(o>0&&(n=i).unshift(t.join(""));o<e.length;o++){let t=e[o];t instanceof Symbol||n.push(t)}return n}:e=>{1===e.length&&e[0]?.constructor===Function&&(e=e[0]());let t=[],i=[],r=0;for(;r<e.length;r++){let i=e[r];if(void 0===i)break;if(i.constructor===String||i.constructor===Number)t.push(i);else if(i.constructor===Object)break}for(r>0&&i.push(t.join(""));r<e.length;r++){let t=e[r];t instanceof Symbol||i.push(t)}return i},i_=(...e)=>{console.log(...iw(e)),iI.forEach(t=>t.print(e))},iN=(...e)=>{console.warn(...iw(e)),e.unshift(ig),iI.forEach(t=>t.print(e))},iI=u(),iS=e=>({[Symbol.iterator](){return this},next:e}),iT=(e,t)=>iS(()=>{let i;do i=e.next();while(!i.done&&!t(i.value));return i}),ix=(e,t)=>iS(()=>{let{done:i,value:r}=e.next();return{done:i,value:i?void 0:t(r)}});class iO{constructor(e,t){this.clock=e,this.len=t}}class iE{constructor(){this.clients=new Map}}let ik=(e,t,i)=>t.clients.forEach((t,r)=>{let n=e.doc.store.clients.get(r);if(null!=n){let r=n[n.length-1],s=r.id.clock+r.length;for(let r=0,o=t[r];r<t.length&&o.clock<s;o=t[++r])rd(e,n,o.clock,o.len,i)}}),iA=(e,t)=>{let i=0,r=e.length-1;for(;i<=r;){let n=v((i+r)/2),s=e[n],o=s.clock;if(o<=t){if(t<o+s.len)return n;i=n+1}else r=n-1}return null},iD=(e,t)=>{let i=e.clients.get(t.client);return void 0!==i&&null!==iA(i,t.clock)},iC=e=>{e.clients.forEach(e=>{let t,i;for(e.sort((e,t)=>e.clock-t.clock),t=1,i=1;t<e.length;t++){let r=e[i-1],n=e[t];r.clock+r.len>=n.clock?r.len=N(r.len,n.clock+n.len-r.clock):(i<t&&(e[i]=n),i++)}e.length=i})},iB=e=>{let t=new iE;for(let i=0;i<e.length;i++)e[i].clients.forEach((r,n)=>{if(!t.clients.has(n)){let s=r.slice();for(let t=i+1;t<e.length;t++)h(s,e[t].clients.get(n)||[]);t.clients.set(n,s)}});return iC(t),t},iV=(e,t,i,r)=>{a(e.clients,t,()=>[]).push(new iO(i,r))},iF=(e,t)=>{q(e.restEncoder,t.clients.size),p(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(([t,i])=>{e.resetDsCurVal(),q(e.restEncoder,t);let r=i.length;q(e.restEncoder,r);for(let t=0;t<r;t++){let r=i[t];e.writeDsClock(r.clock),e.writeDsLen(r.len)}})},iR=e=>{let t=new iE,i=decoding.readVarUint(e.restDecoder);for(let r=0;r<i;r++){e.resetDsCurVal();let i=decoding.readVarUint(e.restDecoder),r=decoding.readVarUint(e.restDecoder);if(r>0){let n=map.setIfUndefined(t.clients,i,()=>[]);for(let t=0;t<r;t++)n.push(new iO(e.readDsClock(),e.readDsLen()))}}return t},iL=(e,t,i)=>{let r=new iE,n=decoding.readVarUint(e.restDecoder);for(let s=0;s<n;s++){e.resetDsCurVal();let n=decoding.readVarUint(e.restDecoder),s=decoding.readVarUint(e.restDecoder),o=i.clients.get(n)||[],a=rt(i,n);for(let i=0;i<s;i++){let i=e.readDsClock(),s=i+e.readDsLen();if(i<a){a<s&&iV(r,n,a,s-a);let e=rr(o,i),l=o[e];for(!l.deleted&&l.id.clock<i&&(o.splice(e+1,0,nV(t,l,i-l.id.clock)),e++);e<o.length;)if((l=o[e++]).id.clock<s)l.deleted||(s<l.id.clock+l.length&&o.splice(e,0,nV(t,l,s-l.id.clock)),l.delete(t));else break}else iV(r,n,i,s-i)}}if(r.clients.size>0){let e=new ij;return encoding.writeVarUint(e.restEncoder,0),iF(e,r),e.toUint8Array()}return null};class iP extends b{constructor({guid:e=eD(),collectionid:t=null,gc:i=!0,gcFilter:r=()=>!0,meta:n=null,autoLoad:s=!1,shouldLoad:o=!0}={}){super(),this.gc=i,this.gcFilter=r,this.clientID=eA(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new i7,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=s,this.meta=n,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=eC(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});let a=()=>eC(e=>{let t=i=>{(void 0===i||!0===i)&&(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){let e=this._item;null===e||this.shouldLoad||rg(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(p(this.subdocs).map(e=>e.guid))}transact(e,t=null){return rg(this,e,t)}get(e,t=rL){let i=a(this.share,e,()=>{let e=new t;return e._integrate(this,null),e}),r=i.constructor;if(t!==rL&&r!==t)if(r===rL){let r=new t;r._map=i._map,i._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=r}),r._start=i._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=i._length,this.share.set(e,r),r._integrate(this,null),r}else throw Error(`Type with the name ${e} has already been defined with a different constructor`);return i}getArray(e=""){return this.get(e,r4)}getText(e=""){return this.get(e,nh)}getMap(e=""){return this.get(e,r3)}getXmlElement(e=""){return this.get(e,ny)}getXmlFragment(e=""){return this.get(e,nf)}toJSON(){let e={};return this.share.forEach((t,i)=>{e[i]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,p(this.subdocs).forEach(e=>e.destroy());let e=this._item;if(null!==e){this._item=null;let t=e.content;t.doc=new iP({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,rg(e.parent.doc,i=>{let r=t.doc;e.deleted||i.subdocsAdded.add(r),i.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class iM{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ev(this.restDecoder),this.dsCurrVal}readDsLen(){let e=ev(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class iU extends iM{constructor(e){super(e),this.keys=[],ev(e),this.keyClockDecoder=new eO(eg(e)),this.clientDecoder=new ex(eg(e)),this.leftClockDecoder=new eO(eg(e)),this.rightClockDecoder=new eO(eg(e)),this.infoDecoder=new eT(eg(e),eb),this.stringDecoder=new eE(eg(e)),this.parentInfoDecoder=new eT(eg(e),eb),this.typeRefDecoder=new ex(eg(e)),this.lenDecoder=new ex(eg(e))}readLeftID(){return new i4(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new i4(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return eS(this.restDecoder)}readBuf(){return eg(this.restDecoder)}readJSON(){return eS(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let e=this.stringDecoder.read();return this.keys.push(e),e}}}class iW{constructor(){this.restEncoder=P()}toUint8Array(){return U(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){q(this.restEncoder,e)}writeDsLen(e){q(this.restEncoder,e)}}class iz extends iW{writeLeftID(e){q(this.restEncoder,e.client),q(this.restEncoder,e.clock)}writeRightID(e){q(this.restEncoder,e.client),q(this.restEncoder,e.clock)}writeClient(e){q(this.restEncoder,e)}writeInfo(e){z(this.restEncoder,e)}writeString(e){Z(this.restEncoder,e)}writeParentInfo(e){q(this.restEncoder,+!!e)}writeTypeRef(e){q(this.restEncoder,e)}writeLen(e){q(this.restEncoder,e)}writeAny(e){ei(this.restEncoder,e)}writeBuf(e){G(this.restEncoder,e)}writeJSON(e){Z(this.restEncoder,JSON.stringify(e))}writeKey(e){Z(this.restEncoder,e)}}class iq{constructor(){this.restEncoder=P(),this.dsCurrVal=0}toUint8Array(){return U(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let t=e-this.dsCurrVal;this.dsCurrVal=e,q(this.restEncoder,t)}writeDsLen(e){0===e&&ec(),q(this.restEncoder,e-1),this.dsCurrVal+=e}}class ij extends iq{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new ea,this.clientEncoder=new es,this.leftClockEncoder=new ea,this.rightClockEncoder=new ea,this.infoEncoder=new er(z),this.stringEncoder=new el,this.parentInfoEncoder=new er(z),this.typeRefEncoder=new es,this.lenEncoder=new es}toUint8Array(){let e=P();return q(e,0),G(e,this.keyClockEncoder.toUint8Array()),G(e,this.clientEncoder.toUint8Array()),G(e,this.leftClockEncoder.toUint8Array()),G(e,this.rightClockEncoder.toUint8Array()),G(e,U(this.infoEncoder)),G(e,this.stringEncoder.toUint8Array()),G(e,U(this.parentInfoEncoder)),G(e,this.typeRefEncoder.toUint8Array()),G(e,this.lenEncoder.toUint8Array()),J(e,U(this.restEncoder)),U(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(+!!e)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){ei(this.restEncoder,e)}writeBuf(e){G(this.restEncoder,e)}writeJSON(e){ei(this.restEncoder,e)}writeKey(e){let t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}let i$=(e,t,i,r)=>{r=N(r,t[0].id.clock);let n=rr(t,r);q(e.restEncoder,t.length-n),e.writeClient(i),q(e.restEncoder,r);let s=t[n];s.write(e,r-s.id.clock);for(let i=n+1;i<t.length;i++)t[i].write(e,0)},iQ=(e,t,i)=>{let r=new Map;i.forEach((e,i)=>{rt(t,i)>e&&r.set(i,e)}),re(t).forEach((e,t)=>{i.has(t)||r.set(t,0)}),q(e.restEncoder,r.size),p(r.entries()).sort((e,t)=>t[0]-e[0]).forEach(([i,r])=>{i$(e,t.clients.get(i),i,r)})},iZ=(e,t)=>{let i=map.create(),r=decoding.readVarUint(e.restDecoder);for(let n=0;n<r;n++){let r=decoding.readVarUint(e.restDecoder),n=Array(r),s=e.readClient(),o=decoding.readVarUint(e.restDecoder);i.set(s,{i:0,refs:n});for(let i=0;i<r;i++){let r=e.readInfo();switch(binary.BITS5&r){case 0:{let t=e.readLen();n[i]=new nb(i3(s,o),t),o+=t;break}case 10:{let t=decoding.readVarUint(e.restDecoder);n[i]=new nP(i3(s,o),t),o+=t;break}default:{let a=(r&(binary.BIT7|binary.BIT8))==0,l=new nF(i3(s,o),null,(r&binary.BIT8)===binary.BIT8?e.readLeftID():null,null,(r&binary.BIT7)===binary.BIT7?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,a&&(r&binary.BIT6)===binary.BIT6?e.readString():null,nR(e,r));n[i]=l,o+=l.length}}}}return i},iJ=(e,t,i)=>{let r=[],n=array.from(i.keys()).sort((e,t)=>e-t);if(0===n.length)return null;let s=()=>{if(0===n.length)return null;let e=i.get(n[n.length-1]);for(;e.refs.length===e.i;){if(n.pop(),!(n.length>0))return null;e=i.get(n[n.length-1])}return e},o=s();if(null===o)return null;let a=new i7,l=new Map,d=(e,t)=>{let i=l.get(e);(null==i||i>t)&&l.set(e,t)},u=o.refs[o.i++],c=new Map,h=()=>{for(let e of r){let t=e.id.client,r=i.get(t);r?(r.i--,a.clients.set(t,r.refs.slice(r.i)),i.delete(t),r.i=0,r.refs=[]):a.clients.set(t,[e]),n=n.filter(e=>e!==t)}r.length=0};for(;;){if(u.constructor!==nP){let n=map.setIfUndefined(c,u.id.client,()=>rt(t,u.id.client))-u.id.clock;if(n<0)r.push(u),d(u.id.client,u.id.clock-1),h();else{let s=u.getMissing(e,t);if(null!==s){r.push(u);let e=i.get(s)||{refs:[],i:0};if(e.refs.length===e.i)d(s,rt(t,s)),h();else{u=e.refs[e.i++];continue}}else(0===n||n<u.length)&&(u.integrate(e,n),c.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(null!==o&&o.i<o.refs.length)u=o.refs[o.i++];else{if(null===(o=s()))break;u=o.refs[o.i++]}}if(a.clients.size>0){let e=new ij;return iQ(e,a,new Map),encoding.writeVarUint(e.restEncoder,0),{missing:l,update:e.toUint8Array()}}return null},iG=(e,t)=>iQ(e,t.doc.store,t.beforeState),iK=(e,t,i,r=new iU(e))=>rg(t,e=>{e.local=!1;let t=!1,i=e.doc,n=i.store,s=iJ(e,n,iZ(r,i)),o=n.pendingStructs;if(o){for(let[e,i]of o.missing)if(i<rt(n,e)){t=!0;break}if(s){for(let[e,t]of s.missing){let i=o.missing.get(e);(null==i||i>t)&&o.missing.set(e,t)}o.update=r_([o.update,s.update])}}else n.pendingStructs=s;let a=iL(r,e,n);if(n.pendingDs){let t=new iU(decoding.createDecoder(n.pendingDs));decoding.readVarUint(t.restDecoder);let i=iL(t,e,n);a&&i?n.pendingDs=r_([a,i]):n.pendingDs=a||i}else n.pendingDs=a;if(t){let t=n.pendingStructs.update;n.pendingStructs=null,iY(e.doc,t)}},i,!1),iY=(e,t,i,r=iU)=>{let n=decoding.createDecoder(t);iK(n,e,i,new r(n))};class iH{constructor(){this.l=[]}}let iX=()=>new iH,i0=(e,t)=>e.l.push(t),i1=(e,t)=>{let i=e.l,r=i.length;e.l=i.filter(e=>t!==e),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},i2=(e,t,i)=>eQ(e.l,[t,i]);class i4{constructor(e,t){this.client=e,this.clock=t}}let i8=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,i3=(e,t)=>new i4(e,t),i6=e=>{for(let[t,i]of e.doc.share.entries())if(i===e)return t;throw ec()};n=new iE,new class e{constructor(e,t){this.ds=e,this.sv=t}}(n,new Map);let i5=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!iD(t.ds,e.id),i9=(e,t)=>{let i=a(e.meta,i9,u),r=e.doc.store;i.has(t)||(t.sv.forEach((t,i)=>{t<rt(r,i)&&ro(e,i3(i,t))}),ik(e,t.ds,e=>{}),i.add(t))};class i7{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}let re=e=>{let t=new Map;return e.clients.forEach((e,i)=>{let r=e[e.length-1];t.set(i,r.id.clock+r.length)}),t},rt=(e,t)=>{let i=e.clients.get(t);if(void 0===i)return 0;let r=i[i.length-1];return r.id.clock+r.length},ri=(e,t)=>{let i=e.clients.get(t.id.client);if(void 0===i)i=[],e.clients.set(t.id.client,i);else{let e=i[i.length-1];if(e.id.clock+e.length!==t.id.clock)throw ec()}i.push(t)},rr=(e,t)=>{let i=0,r=e.length-1,n=e[r],s=n.id.clock;if(s===t)return r;let o=v(t/(s+n.length-1)*r);for(;i<=r;){if((s=(n=e[o]).id.clock)<=t){if(t<s+n.length)return o;i=o+1}else r=o-1;o=v((i+r)/2)}throw ec()},rn=(e,t)=>{let i=e.clients.get(t.client);return i[rr(i,t.clock)]},rs=(e,t,i)=>{let r=rr(t,i),n=t[r];return n.id.clock<i&&n instanceof nF?(t.splice(r+1,0,nV(e,n,i-n.id.clock)),r+1):r},ro=(e,t)=>{let i=e.doc.store.clients.get(t.client);return i[rs(e,i,t.clock)]},ra=(e,t,i)=>{let r=t.clients.get(i.client),n=rr(r,i.clock),s=r[n];return i.clock!==s.id.clock+s.length-1&&s.constructor!==nb&&r.splice(n+1,0,nV(e,s,i.clock-s.id.clock+1)),s},rl=(e,t,i)=>{let r=e.clients.get(t.id.client);r[rr(r,t.id.clock)]=i},rd=(e,t,i,r,n)=>{let s;if(0===r)return;let o=i+r,a=rs(e,t,i);do o<(s=t[a++]).id.clock+s.length&&rs(e,t,o),n(s);while(a<t.length&&t[a].id.clock<o)};class ru{constructor(e,t,i){this.doc=e,this.deleteSet=new iE,this.beforeState=re(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}let rc=(e,t)=>(0!==t.deleteSet.clients.size||!!d(t.afterState,(e,i)=>t.beforeState.get(i)!==e))&&(iC(t.deleteSet),iG(e,t),iF(e,t.deleteSet),!0),rh=(e,t,i)=>{let r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&a(e.changed,t,u).add(i)},rp=(e,t)=>{let i=e[t],r=e[t-1],n=t;for(;n>0;i=r,r=e[--n-1]){if(r.deleted===i.deleted&&r.constructor===i.constructor&&r.mergeWith(i)){i instanceof nF&&null!==i.parentSub&&i.parent._map.get(i.parentSub)===i&&i.parent._map.set(i.parentSub,r);continue}break}let s=t-n;return s&&e.splice(t+1-s,s),s},rf=(e,t,i)=>{for(let[r,n]of e.clients.entries()){let e=t.clients.get(r);for(let r=n.length-1;r>=0;r--){let s=n[r],o=s.clock+s.len;for(let r=rr(e,s.clock),n=e[r];r<e.length&&n.id.clock<o;n=e[++r]){let n=e[r];if(s.clock+s.len<=n.id.clock)break;n instanceof nF&&n.deleted&&!n.keep&&i(n)&&n.gc(t,!1)}}}},ry=(e,t)=>{e.clients.forEach((e,i)=>{let r=t.clients.get(i);for(let t=e.length-1;t>=0;t--){let i=e[t],n=_(r.length-1,1+rr(r,i.clock+i.len-1));for(let e=n,t=r[e];e>0&&t.id.clock>=i.clock;t=r[e])e-=1+rp(r,e)}})},rm=(e,t)=>{if(t<e.length){let i=e[t],r=i.doc,n=r.store,s=i.deleteSet,o=i._mergeStructs;try{iC(s),i.afterState=re(i.doc.store),r.emit("beforeObserverCalls",[i,r]);let e=[];i.changed.forEach((t,r)=>e.push(()=>{null!==r._item&&r._item.deleted||r._callObserver(i,t)})),e.push(()=>{i.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),i2(t._dEH,e,i))})}),e.push(()=>r.emit("afterTransaction",[i,r])),eQ(e,[]),i._needFormattingCleanup&&nd(i)}finally{r.gc&&rf(s,n,r.gcFilter),ry(s,n),i.afterState.forEach((e,t)=>{let r=i.beforeState.get(t)||0;if(r!==e){let e=n.clients.get(t),i=N(rr(e,r),1);for(let t=e.length-1;t>=i;)t-=1+rp(e,t)}});for(let e=o.length-1;e>=0;e--){let{client:t,clock:i}=o[e].id,r=n.clients.get(t),s=rr(r,i);!(s+1<r.length&&rp(r,s+1)>1)&&s>0&&rp(r,s)}if(i.local||i.afterState.get(r.clientID)===i.beforeState.get(r.clientID)||(i_(ig,id,"[yjs] ",iu,iy,"Changed the client-id because another client seems to be using it."),r.clientID=eA()),r.emit("afterTransactionCleanup",[i,r]),r._observers.has("update")){let e=new iz;rc(e,i)&&r.emit("update",[e.toUint8Array(),i.origin,r,i])}if(r._observers.has("updateV2")){let e=new ij;rc(e,i)&&r.emit("updateV2",[e.toUint8Array(),i.origin,r,i])}let{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:d}=i;(a.size>0||d.size>0||l.size>0)&&(a.forEach(e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)}),d.forEach(e=>r.subdocs.delete(e)),r.emit("subdocs",[{loaded:l,added:a,removed:d},r,i]),d.forEach(e=>e.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):rm(e,t+1)}}},rg=(e,t,i=null,r=!0)=>{let n=e._transactionCleanups,s=!1,o=null;null===e._transaction&&(s=!0,e._transaction=new ru(e,i,r),n.push(e._transaction),1===n.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(s){let t=e._transaction===n[0];e._transaction=null,t&&rm(n,0)}}return o};class rb{constructor(e,t){this.gen=function*(e){let t=decoding.readVarUint(e.restDecoder);for(let i=0;i<t;i++){let t=decoding.readVarUint(e.restDecoder),i=e.readClient(),r=decoding.readVarUint(e.restDecoder);for(let n=0;n<t;n++){let t=e.readInfo();if(10===t){let t=decoding.readVarUint(e.restDecoder);yield new nP(i3(i,r),t),r+=t}else if((binary.BITS5&t)!=0){let n=(t&(binary.BIT7|binary.BIT8))==0,s=new nF(i3(i,r),null,(t&binary.BIT8)===binary.BIT8?e.readLeftID():null,null,(t&binary.BIT7)===binary.BIT7?e.readRightID():null,n?e.readParentInfo()?e.readString():e.readLeftID():null,n&&(t&binary.BIT6)===binary.BIT6?e.readString():null,nR(e,t));yield s,r+=s.length}else{let t=e.readLen();yield new nb(i3(i,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&null!==this.curr&&this.curr.constructor===nP);return this.curr}}class rv{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}let rw=(e,t)=>{if(e.constructor===nb){let{client:i,clock:r}=e.id;return new nb(i3(i,r+t),e.length-t)}if(e.constructor===nP){let{client:i,clock:r}=e.id;return new nP(i3(i,r+t),e.length-t)}{let{client:i,clock:r}=e.id;return new nF(i3(i,r+t),null,i3(i,r+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},r_=(e,t=iU,i=ij)=>{if(1===e.length)return e[0];let r=e.map(e=>new t(decoding.createDecoder(e))),n=r.map(e=>new rb(e,!0)),s=null,o=new i,a=new rv(o);for(;(n=n.filter(e=>null!==e.curr)).sort((e,t)=>{if(e.curr.id.client!==t.curr.id.client)return t.curr.id.client-e.curr.id.client;{let i=e.curr.id.clock-t.curr.id.clock;return 0===i?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===nP?1:-1:i}}),0!==n.length;){let e=n[0],t=e.curr.id.client;if(null!==s){let i=e.curr,r=!1;for(;null!==i&&i.id.clock+i.length<=s.struct.id.clock+s.struct.length&&i.id.client>=s.struct.id.client;)i=e.next(),r=!0;if(null===i||i.id.client!==t||r&&i.id.clock>s.struct.id.clock+s.struct.length)continue;if(t!==s.struct.id.client)rI(a,s.struct,s.offset),s={struct:i,offset:0},e.next();else if(s.struct.id.clock+s.struct.length<i.id.clock)if(s.struct.constructor===nP)s.struct.length=i.id.clock+i.length-s.struct.id.clock;else{rI(a,s.struct,s.offset);let e=i.id.clock-s.struct.id.clock-s.struct.length;s={struct:new nP(i3(t,s.struct.id.clock+s.struct.length),e),offset:0}}else{let t=s.struct.id.clock+s.struct.length-i.id.clock;t>0&&(s.struct.constructor===nP?s.struct.length-=t:i=rw(i,t)),s.struct.mergeWith(i)||(rI(a,s.struct,s.offset),s={struct:i,offset:0},e.next())}}else s={struct:e.curr,offset:0},e.next();for(let i=e.curr;null!==i&&i.id.client===t&&i.id.clock===s.struct.id.clock+s.struct.length&&i.constructor!==nP;i=e.next())rI(a,s.struct,s.offset),s={struct:i,offset:0}}return null!==s&&(rI(a,s.struct,s.offset),s=null),rS(a),iF(o,iB(r.map(e=>iR(e)))),o.toUint8Array()},rN=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:encoding.toUint8Array(e.encoder.restEncoder)}),e.encoder.restEncoder=encoding.createEncoder(),e.written=0)},rI=(e,t,i)=>{e.written>0&&e.currClient!==t.id.client&&rN(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),encoding.writeVarUint(e.encoder.restEncoder,t.id.clock+i)),t.write(e.encoder,i),e.written++},rS=e=>{rN(e);let t=e.encoder.restEncoder;encoding.writeVarUint(t,e.clientStructs.length);for(let i=0;i<e.clientStructs.length;i++){let r=e.clientStructs[i];encoding.writeVarUint(t,r.written),encoding.writeUint8Array(t,r.restEncoder)}},rT="You must not compute changes after the event-handler fired.";class rx{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=rO(this.currentTarget,this.target))}deletes(e){return iD(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw ed(rT);let e=new Map,t=this.target;this.transaction.changed.get(t).forEach(i=>{if(null!==i){let r,n,s=t._map.get(i);if(this.adds(s)){let e=s.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(s))if(!(null!==e&&this.deletes(e)))return;else r="delete",n=c(e.content.getContent());else null!==e&&this.deletes(e)?(r="update",n=c(e.content.getContent())):(r="add",n=void 0)}else{if(!this.deletes(s))return;r="delete",n=c(s.content.getContent())}e.set(i,{action:r,oldValue:n})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw ed(rT);let t=this.target,i=u(),r=u(),n=[];if(e={added:i,deleted:r,delta:n,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null,s=()=>{e&&n.push(e)};for(let n=t._start;null!==n;n=n.right)n.deleted?this.deletes(n)&&!this.adds(n)&&((null===e||void 0===e.delete)&&(s(),e={delete:0}),e.delete+=n.length,r.add(n)):this.adds(n)?((null===e||void 0===e.insert)&&(s(),e={insert:[]}),e.insert=e.insert.concat(n.content.getContent()),i.add(n)):((null===e||void 0===e.retain)&&(s(),e={retain:0}),e.retain+=n.length);null!==e&&void 0===e.retain&&s()}this._changes=e}return e}}let rO=(e,t)=>{let i=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)i.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;i.unshift(e)}t=t._item.parent}return i},rE=()=>{iN("Invalid access: Add Yjs type to a document before reading data.")},rk=0;class rA{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=rk++}}let rD=e=>{e.timestamp=rk++},rC=(e,t,i)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=i,e.timestamp=rk++},rB=(e,t,i)=>{if(e.length>=80){let r=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return rC(r,t,i),r}{let r=new rA(t,i);return e.push(r),r}},rV=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;let i=0===e._searchMarker.length?null:e._searchMarker.reduce((e,i)=>w(t-e.index)<w(t-i.index)?e:i),r=e._start,n=0;for(null!==i&&(r=i.p,n=i.index,rD(i));null!==r.right&&n<t;){if(!r.deleted&&r.countable){if(t<n+r.length)break;n+=r.length}r=r.right}for(;null!==r.left&&n>t;)!(r=r.left).deleted&&r.countable&&(n-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)!(r=r.left).deleted&&r.countable&&(n-=r.length);return null!==i&&w(i.index-n)<r.parent.length/80?(rC(i,r,n),i):rB(e._searchMarker,r,n)},rF=(e,t,i)=>{for(let r=e.length-1;r>=0;r--){let n=e[r];if(i>0){let t=n.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)(t=t.left)&&!t.deleted&&t.countable&&(n.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}n.p=t,t.marker=!0}(t<n.index||i>0&&t===n.index)&&(n.index=N(t,n.index+i))}},rR=(e,t,i)=>{let r=e,n=t.changedParentTypes;for(;a(n,e,()=>[]).push(i),null!==e._item;)e=e._item.parent;i2(r._eH,i,t)};class rL{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=iX(),this._dEH=iX(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw eu()}clone(){throw eu()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){i0(this._eH,e)}observeDeep(e){i0(this._dEH,e)}unobserve(e){i1(this._eH,e)}unobserveDeep(e){i1(this._dEH,e)}toJSON(){}}let rP=(e,t,i)=>{e.doc??rE(),t<0&&(t=e._length+t),i<0&&(i=e._length+i);let r=i-t,n=[],s=e._start;for(;null!==s&&r>0;){if(s.countable&&!s.deleted){let e=s.content.getContent();if(e.length<=t)t-=e.length;else{for(let i=t;i<e.length&&r>0;i++)n.push(e[i]),r--;t=0}}s=s.right}return n},rM=e=>{e.doc??rE();let t=[],i=e._start;for(;null!==i;){if(i.countable&&!i.deleted){let e=i.content.getContent();for(let i=0;i<e.length;i++)t.push(e[i])}i=i.right}return t},rU=(e,t)=>{let i=0,r=e._start;for(e.doc??rE();null!==r;){if(r.countable&&!r.deleted){let n=r.content.getContent();for(let r=0;r<n.length;r++)t(n[r],i++,e)}r=r.right}},rW=(e,t)=>{let i=[];return rU(e,(r,n)=>{i.push(t(r,n,e))}),i},rz=e=>{let t=e._start,i=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===i){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};i=t.content.getContent(),r=0,t=t.right}let e=i[r++];return i.length<=r&&(i=null),{done:!1,value:e}}}},rq=(e,t)=>{e.doc??rE();let i=rV(e,t),r=e._start;for(null!==i&&(r=i.p,t-=i.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},rj=(e,t,i,r)=>{let n=i,s=e.doc,o=s.clientID,a=s.store,l=null===i?t._start:i.right,d=[],u=()=>{d.length>0&&((n=new nF(i3(o,rt(a,o)),n,n&&n.lastId,l,l&&l.id,t,null,new nx(d))).integrate(e,0),d=[])};r.forEach(i=>{if(null===i)d.push(i);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(i);break;default:switch(u(),i.constructor){case Uint8Array:case ArrayBuffer:(n=new nF(i3(o,rt(a,o)),n,n&&n.lastId,l,l&&l.id,t,null,new nv(new Uint8Array(i)))).integrate(e,0);break;case iP:(n=new nF(i3(o,rt(a,o)),n,n&&n.lastId,l,l&&l.id,t,null,new nN(i))).integrate(e,0);break;default:if(i instanceof rL)(n=new nF(i3(o,rt(a,o)),n,n&&n.lastId,l,l&&l.id,t,null,new nB(i))).integrate(e,0);else throw Error("Unexpected content type in insert operation")}}}),u()},r$=()=>ed("Length exceeded!"),rQ=(e,t,i,r)=>{if(i>t._length)throw r$();if(0===i)return t._searchMarker&&rF(t._searchMarker,i,r.length),rj(e,t,null,r);let n=i,s=rV(t,i),o=t._start;for(null!==s&&(o=s.p,0==(i-=s.index)&&(i+=(o=o.prev)&&o.countable&&!o.deleted?o.length:0));null!==o;o=o.right)if(!o.deleted&&o.countable){if(i<=o.length){i<o.length&&ro(e,i3(o.id.client,o.id.clock+i));break}i-=o.length}return t._searchMarker&&rF(t._searchMarker,n,r.length),rj(e,t,o,r)},rZ=(e,t,i)=>{let r=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;return rj(e,t,r,i)},rJ=(e,t,i,r)=>{if(0===r)return;let n=i,s=r,o=rV(t,i),a=t._start;for(null!==o&&(a=o.p,i-=o.index);null!==a&&i>0;a=a.right)!a.deleted&&a.countable&&(i<a.length&&ro(e,i3(a.id.client,a.id.clock+i)),i-=a.length);for(;r>0&&null!==a;)a.deleted||(r<a.length&&ro(e,i3(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw r$();t._searchMarker&&rF(t._searchMarker,n,-s+r)},rG=(e,t,i)=>{let r=t._map.get(i);void 0!==r&&r.delete(e)},rK=(e,t,i,r)=>{let n,s=t._map.get(i)||null,o=e.doc,a=o.clientID;if(null==r)n=new nx([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:n=new nx([r]);break;case Uint8Array:n=new nv(r);break;case iP:n=new nN(r);break;default:if(r instanceof rL)n=new nB(r);else throw Error("Unexpected content type")}new nF(i3(a,rt(o.store,a)),s,s&&s.lastId,null,null,t,i,n).integrate(e,0)},rY=(e,t)=>{e.doc??rE();let i=e._map.get(t);return void 0===i||i.deleted?void 0:i.content.getContent()[i.length-1]},rH=e=>{let t={};return e.doc??rE(),e._map.forEach((e,i)=>{e.deleted||(t[i]=e.content.getContent()[e.length-1])}),t},rX=(e,t)=>{e.doc??rE();let i=e._map.get(t);return void 0!==i&&!i.deleted},r0=(e,t)=>{let i={};return e._map.forEach((e,r)=>{let n=e;for(;null!==n&&(!t.sv.has(n.id.client)||n.id.clock>=(t.sv.get(n.id.client)||0));)n=n.left;null!==n&&i5(n,t)&&(i[r]=n.content.getContent()[n.length-1])}),i},r1=e=>(e.doc??rE(),iT(e._map.entries(),e=>!e[1].deleted));class r2 extends rx{}class r4 extends rL{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let t=new r4;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new r4}clone(){let e=new r4;return e.insert(0,this.toArray().map(e=>e instanceof rL?e.clone():e)),e}get length(){return this.doc??rE(),this._length}_callObserver(e,t){super._callObserver(e,t),rR(this,e,new r2(this,e))}insert(e,t){null!==this.doc?rg(this.doc,i=>{rQ(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?rg(this.doc,t=>{rZ(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?rg(this.doc,i=>{rJ(i,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return rq(this,e)}toArray(){return rM(this)}slice(e=0,t=this.length){return rP(this,e,t)}toJSON(){return this.map(e=>e instanceof rL?e.toJSON():e)}map(e){return rW(this,e)}forEach(e){rU(this,e)}[Symbol.iterator](){return rz(this)}_write(e){e.writeTypeRef(nE)}}class r8 extends rx{constructor(e,t,i){super(e,t),this.keysChanged=i}}class r3 extends rL{constructor(e){super(),this._prelimContent=null,void 0===e?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new r3}clone(){let e=new r3;return this.forEach((t,i)=>{e.set(i,t instanceof rL?t.clone():t)}),e}_callObserver(e,t){rR(this,e,new r8(this,e,t))}toJSON(){this.doc??rE();let e={};return this._map.forEach((t,i)=>{if(!t.deleted){let r=t.content.getContent()[t.length-1];e[i]=r instanceof rL?r.toJSON():r}}),e}get size(){return[...r1(this)].length}keys(){return ix(r1(this),e=>e[0])}values(){return ix(r1(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return ix(r1(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??rE(),this._map.forEach((t,i)=>{t.deleted||e(t.content.getContent()[t.length-1],i,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?rg(this.doc,t=>{rG(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?rg(this.doc,i=>{rK(i,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return rY(this,e)}has(e){return rX(this,e)}clear(){null!==this.doc?rg(this.doc,e=>{this.forEach(function(t,i,r){rG(e,r,i)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(nk)}}let r6=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&eq(e,t);class r5{constructor(e,t,i,r){this.left=e,this.right=t,this.index=i,this.currentAttributes=r}forward(){null===this.right&&ec(),this.right.content.constructor===nS?this.right.deleted||nt(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}}let r9=(e,t,i)=>{for(;null!==t.right&&i>0;)t.right.content.constructor===nS?t.right.deleted||nt(t.currentAttributes,t.right.content):t.right.deleted||(i<t.right.length&&ro(e,i3(t.right.id.client,t.right.id.clock+i)),t.index+=t.right.length,i-=t.right.length),t.left=t.right,t.right=t.right.right;return t},r7=(e,t,i,r)=>{let n=new Map,s=r?rV(t,i):null;return s?r9(e,new r5(s.p.left,s.p,s.index,n),i-s.index):r9(e,new r5(null,t._start,0,n),i)},ne=(e,t,i,r)=>{for(;null!==i.right&&(!0===i.right.deleted||i.right.content.constructor===nS&&r6(r.get(i.right.content.key),i.right.content.value));)i.right.deleted||r.delete(i.right.content.key),i.forward();let n=e.doc,s=n.clientID;r.forEach((r,o)=>{let a=i.left,l=i.right,d=new nF(i3(s,rt(n.store,s)),a,a&&a.lastId,l,l&&l.id,t,null,new nS(o,r));d.integrate(e,0),i.right=d,i.forward()})},nt=(e,t)=>{let{key:i,value:r}=t;null===r?e.delete(i):e.set(i,r)},ni=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===nS&&r6(t[e.right.content.key]??null,e.right.content.value));){;e.forward()}},nr=(e,t,i,r)=>{let n=e.doc,s=n.clientID,o=new Map;for(let a in r){let l=r[a],d=i.currentAttributes.get(a)??null;if(!r6(d,l)){o.set(a,d);let{left:r,right:u}=i;i.right=new nF(i3(s,rt(n.store,s)),r,r&&r.lastId,u,u&&u.id,t,null,new nS(a,l)),i.right.integrate(e,0),i.forward()}}return o},nn=(e,t,i,r,n)=>{i.currentAttributes.forEach((e,t)=>{void 0===n[t]&&(n[t]=null)});let s=e.doc,o=s.clientID;ni(i,n);let a=nr(e,t,i,n),l=r.constructor===String?new nO(r):r instanceof rL?new nB(r):new nI(r),{left:d,right:u,index:c}=i;t._searchMarker&&rF(t._searchMarker,i.index,l.getLength()),(u=new nF(i3(o,rt(s.store,o)),d,d&&d.lastId,u,u&&u.id,t,null,l)).integrate(e,0),i.right=u,i.index=c,i.forward(),ne(e,t,i,a)},ns=(e,t,i,r,n)=>{let s=e.doc,o=s.clientID;ni(i,n);let a=nr(e,t,i,n);for(;null!==i.right&&(r>0||a.size>0&&(i.right.deleted||i.right.content.constructor===nS));){if(!i.right.deleted)if(i.right.content.constructor===nS){let{key:t,value:s}=i.right.content,o=n[t];if(void 0!==o){if(r6(o,s))a.delete(t);else{if(0===r)break;a.set(t,s)}i.right.delete(e)}else i.currentAttributes.set(t,s)}else r<i.right.length&&ro(e,i3(i.right.id.client,i.right.id.clock+r)),r-=i.right.length;i.forward()}if(r>0){let n="";for(;r>0;r--)n+="\n";i.right=new nF(i3(o,rt(s.store,o)),i.left,i.left&&i.left.lastId,i.right,i.right&&i.right.id,t,null,new nO(n)),i.right.integrate(e,0),i.forward()}ne(e,t,i,a)},no=(e,t,i,r,n)=>{let o=t,a=s();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===nS){let e=o.content;a.set(e.key,e)}o=o.right}let l=0,d=!1;for(;t!==o;){if(i===t&&(d=!0),!t.deleted){let i=t.content;if(i.constructor===nS){let{key:s,value:o}=i,u=r.get(s)??null;(a.get(s)!==i||u===o)&&(t.delete(e),l++,d||(n.get(s)??null)!==o||u===o||(null===u?n.delete(s):n.set(s,u))),d||t.deleted||nt(n,i)}}t=t.right}return l},na=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;let i=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===nS){let r=t.content.key;i.has(r)?t.delete(e):i.add(r)}t=t.left}},nl=e=>{let t=0;return rg(e.doc,i=>{let r=e._start,n=e._start,a=s(),l=o(a);for(;n;)!1===n.deleted&&(n.content.constructor===nS?nt(l,n.content):(t+=no(i,r,n,a,l),a=o(l),r=n)),n=n.right}),t},nd=e=>{let t=new Set,i=e.doc;for(let[r,n]of e.afterState.entries()){let s=e.beforeState.get(r)||0;n!==s&&rd(e,i.store.clients.get(r),s,n,e=>{e.deleted||e.content.constructor!==nS||e.constructor===nb||t.add(e.parent)})}rg(i,i=>{for(let r of(ik(e,e.deleteSet,e=>{if(e instanceof nb||!e.parent._hasFormatting||t.has(e.parent))return;let r=e.parent;e.content.constructor===nS?t.add(r):na(i,e)}),t))nl(r)})},nu=(e,t,i)=>{let r=i,n=o(t.currentAttributes),s=t.right;for(;i>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case nB:case nI:case nO:i<t.right.length&&ro(e,i3(t.right.id.client,t.right.id.clock+i)),i-=t.right.length,t.right.delete(e)}t.forward()}s&&no(e,s,t.right,n,t.currentAttributes);let a=(t.left||t.right).parent;return a._searchMarker&&rF(a._searchMarker,t.index,-r+i),t};class nc extends rx{constructor(e,t,i){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,i.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}get changes(){if(null===this._changes){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){let e=this.target.doc,t=[];rg(e,e=>{let i=new Map,r=new Map,n=this.target._start,s=null,o={},a="",l=0,d=0,u=()=>{if(null!==s){let e=null;switch(s){case"delete":d>0&&(e={delete:d}),d=0;break;case"insert":("object"==typeof a||a.length>0)&&(e={insert:a},i.size>0&&(e.attributes={},i.forEach((t,i)=>{null!==t&&(e.attributes[i]=t)}))),a="";break;case"retain":l>0&&(e={retain:l},eU(o)||(e.attributes=eR({},o))),l=0}e&&t.push(e),s=null}};for(;null!==n;){switch(n.content.constructor){case nB:case nI:this.adds(n)?this.deletes(n)||(u(),s="insert",a=n.content.getContent()[0],u()):this.deletes(n)?("delete"!==s&&(u(),s="delete"),d+=1):n.deleted||("retain"!==s&&(u(),s="retain"),l+=1);break;case nO:this.adds(n)?this.deletes(n)||("insert"!==s&&(u(),s="insert"),a+=n.content.str):this.deletes(n)?("delete"!==s&&(u(),s="delete"),d+=n.length):n.deleted||("retain"!==s&&(u(),s="retain"),l+=n.length);break;case nS:{let{key:t,value:a}=n.content;if(this.adds(n))this.deletes(n)||(r6(i.get(t)??null,a)?null!==a&&n.delete(e):("retain"===s&&u(),r6(a,r.get(t)??null)?delete o[t]:o[t]=a));else if(this.deletes(n)){r.set(t,a);let e=i.get(t)??null;r6(e,a)||("retain"===s&&u(),o[t]=e)}else if(!n.deleted){r.set(t,a);let i=o[t];void 0!==i&&(r6(i,a)?null!==i&&n.delete(e):("retain"===s&&u(),null===a?delete o[t]:o[t]=a))}n.deleted||("insert"===s&&u(),nt(i,n.content))}}n=n.right}for(u();t.length>0;){let e=t[t.length-1];if(void 0!==e.retain&&void 0===e.attributes)t.pop();else break}}),this._delta=t}return this._delta}}class nh extends rL{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??rE(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new nh}clone(){let e=new nh;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);let i=new nc(this,e,t);rR(this,e,i),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??rE();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===nO&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?rg(this.doc,i=>{let r=new r5(null,this._start,0,new Map);for(let n=0;n<e.length;n++){let s=e[n];if(void 0!==s.insert){let o=t||"string"!=typeof s.insert||n!==e.length-1||null!==r.right||"\n"!==s.insert.slice(-1)?s.insert:s.insert.slice(0,-1);("string"!=typeof o||o.length>0)&&nn(i,this,r,o,s.attributes||{})}else void 0!==s.retain?ns(i,this,r,s.retain,s.attributes||{}):void 0!==s.delete&&nu(i,r,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,i){this.doc??rE();let r=[],n=new Map,s=this.doc,o="",a=this._start;function l(){if(o.length>0){let e={},t=!1;n.forEach((i,r)=>{t=!0,e[r]=i});let i={insert:o};t&&(i.attributes=e),r.push(i),o=""}}let d=()=>{for(;null!==a;){if(i5(a,e)||void 0!==t&&i5(a,t))switch(a.content.constructor){case nO:{let r=n.get("ychange");void 0===e||i5(a,e)?void 0===t||i5(a,t)?void 0!==r&&(l(),n.delete("ychange")):(void 0===r||r.user!==a.id.client||"added"!==r.type)&&(l(),n.set("ychange",i?i("added",a.id):{type:"added"})):(void 0===r||r.user!==a.id.client||"removed"!==r.type)&&(l(),n.set("ychange",i?i("removed",a.id):{type:"removed"})),o+=a.content.str;break}case nB:case nI:{l();let e={insert:a.content.getContent()[0]};if(n.size>0){let t={};e.attributes=t,n.forEach((e,i)=>{t[i]=e})}r.push(e);break}case nS:i5(a,e)&&(l(),nt(n,a.content))}a=a.right}l()};return e||t?rg(s,i=>{e&&i9(i,e),t&&i9(i,t),d()},"cleanup"):d(),r}insert(e,t,i){if(t.length<=0)return;let r=this.doc;null!==r?rg(r,r=>{let n=r7(r,this,e,!i);i||(i={},n.currentAttributes.forEach((e,t)=>{i[t]=e})),nn(r,this,n,t,i)}):this._pending.push(()=>this.insert(e,t,i))}insertEmbed(e,t,i){let r=this.doc;null!==r?rg(r,r=>{let n=r7(r,this,e,!i);nn(r,this,n,t,i||{})}):this._pending.push(()=>this.insertEmbed(e,t,i||{}))}delete(e,t){if(0===t)return;let i=this.doc;null!==i?rg(i,i=>{nu(i,r7(i,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,i){if(0===t)return;let r=this.doc;null!==r?rg(r,r=>{let n=r7(r,this,e,!1);null!==n.right&&ns(r,this,n,t,i)}):this._pending.push(()=>this.format(e,t,i))}removeAttribute(e){null!==this.doc?rg(this.doc,t=>{rG(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?rg(this.doc,i=>{rK(i,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return rY(this,e)}getAttributes(){return rH(this)}_write(e){e.writeTypeRef(nA)}}class np{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??rE()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,e.deleted||t.constructor!==ny&&t.constructor!==nf||null===t._start)for(;null!==e;){let t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start;while(null!==e&&(e.deleted||!this._filter(e.content.type)));return(this._firstCall=!1,null===e)?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class nf extends rL{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new nf}clone(){let e=new nf;return e.insert(0,this.toArray().map(e=>e instanceof rL?e.clone():e)),e}get length(){return this.doc??rE(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new np(this,e)}querySelector(e){e=e.toUpperCase();let t=new np(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),p(new np(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){rR(this,e,new nm(this,t,e))}toString(){return rW(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},i){let r=e.createDocumentFragment();return void 0!==i&&i._createAssociation(r,this),rU(this,n=>{r.insertBefore(n.toDOM(e,t,i),null)}),r}insert(e,t){null!==this.doc?rg(this.doc,i=>{rQ(i,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)rg(this.doc,i=>{rj(i,this,e&&e instanceof rL?e._item:e,t)});else{let i=this._prelimContent,r=null===e?0:i.findIndex(t=>t===e)+1;if(0===r&&null!==e)throw ed("Reference item not found");i.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?rg(this.doc,i=>{rJ(i,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return rM(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return rq(this,e)}slice(e=0,t=this.length){return rP(this,e,t)}forEach(e){rU(this,e)}_write(e){e.writeTypeRef(nC)}}class ny extends nf{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new ny(this.nodeName)}clone(){let e=new ny(this.nodeName);return eP(this.getAttributes(),(t,i)=>{e.setAttribute(i,t)}),e.insert(0,this.toArray().map(e=>e instanceof rL?e.clone():e)),e}toString(){let e=this.getAttributes(),t=[],i=[];for(let t in e)i.push(t);i.sort();let r=i.length;for(let n=0;n<r;n++){let r=i[n];t.push(r+'="'+e[r]+'"')}let n=this.nodeName.toLocaleLowerCase(),s=t.length>0?" "+t.join(" "):"";return`<${n}${s}>${super.toString()}</${n}>`}removeAttribute(e){null!==this.doc?rg(this.doc,t=>{rG(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?rg(this.doc,i=>{rK(i,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return rY(this,e)}hasAttribute(e){return rX(this,e)}getAttributes(e){return e?r0(this,e):rH(this)}toDOM(e=document,t={},i){let r=e.createElement(this.nodeName),n=this.getAttributes();for(let e in n){let t=n[e];"string"==typeof t&&r.setAttribute(e,t)}return rU(this,n=>{r.appendChild(n.toDOM(e,t,i))}),void 0!==i&&i._createAssociation(r,this),r}_write(e){e.writeTypeRef(nD),e.writeKey(this.nodeName)}}class nm extends rx{constructor(e,t,i){super(e,i),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class ng{constructor(e,t){this.id=e,this.length=t}get deleted(){throw eu()}mergeWith(e){return!1}write(e,t,i){throw eu()}integrate(e,t){throw eu()}}class nb extends ng{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),ri(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class nv{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new nv(this.content)}splice(e){throw eu()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class nw{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new nw(this.len)}splice(e){let t=new nw(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){iV(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}let n_=(e,t)=>new iP({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class nN{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new nN(n_(this.doc.guid,this.opts))}splice(e){throw eu()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class nI{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new nI(this.embed)}splice(e){throw eu()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class nS{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new nS(this.key,this.value)}splice(e){throw eu()}mergeWith(e){return!1}integrate(e,t){let i=t.parent;i._searchMarker=null,i._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}let nT="development"===e1("node_env");class nx{constructor(e){this.arr=e,nT&&e$(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new nx(this.arr)}splice(e){let t=new nx(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let i=this.arr.length;e.writeLen(i-t);for(let r=t;r<i;r++){let t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class nO{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new nO(this.str)}splice(e){let t=new nO(this.str.slice(e));this.str=this.str.slice(0,e);let i=this.str.charCodeAt(e-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}let nE=0,nk=1,nA=2,nD=3,nC=4;class nB{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new nB(this.type._copy())}splice(e){throw eu()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}let nV=(e,t,i)=>{let{client:r,clock:n}=t.id,s=new nF(i3(r,n+i),t,i3(r,n+i-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(i));return t.deleted&&s.markDeleted(),t.keep&&(s.keep=!0),null!==t.redone&&(s.redone=i3(t.redone.client,t.redone.clock+i)),t.right=s,null!==s.right&&(s.right.left=s),e._mergeStructs.push(s),null!==s.parentSub&&null===s.right&&s.parent._map.set(s.parentSub,s),t.length=i,s};class nF extends ng{constructor(e,t,i,r,n,s,o,a){super(e,a.getLength()),this.origin=i,this.left=t,this.right=r,this.rightOrigin=n,this.parent=s,this.parentSub=o,this.redone=null,this.content=a,this.info=2*!!this.content.isCountable()}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=rt(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=rt(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===i4&&this.id.client!==this.parent.client&&this.parent.clock>=rt(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ra(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ro(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===nb||this.right&&this.right.constructor===nb)this.parent=null;else if(this.parent){if(this.parent.constructor===i4){let e=rn(t,this.parent);e.constructor===nb?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===nF?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===nF&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=ra(e,e.doc.store,i3(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,i=this.left;if(null!==i)t=i.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;let r=new Set,n=new Set;for(;null!==t&&t!==this.right;){if(n.add(t),r.add(t),i8(this.origin,t.origin)){if(t.id.client<this.id.client)i=t,r.clear();else if(i8(this.rightOrigin,t.rightOrigin))break}else if(null!==t.origin&&n.has(rn(e.doc.store,t.origin)))r.has(rn(e.doc.store,t.origin))||(i=t,r.clear());else break;t=t.right}this.left=i}if(null!==this.left){let e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),ri(e.doc.store,this),this.content.integrate(e,this),rh(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new nb(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:i3(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&i8(e.origin,this.lastId)&&this.right===e&&i8(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),iV(e.deleteSet,this.id.client,this.id.clock,this.length),rh(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw ec();this.content.gc(e),t?rl(e,this,new nb(this.id,this.length)):this.content=new nw(this.length)}write(e,t){let i=t>0?i3(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,n=this.parentSub,s=31&this.content.getRef()|128*(null!==i)|64*(null!==r)|32*(null!==n);if(e.writeInfo(s),null!==i&&e.writeLeftID(i),null!==r&&e.writeRightID(r),null===i&&null===r){let t=this.parent;if(void 0!==t._item){let i=t._item;if(null===i){let i=i6(t);e.writeParentInfo(!0),e.writeString(i)}else e.writeParentInfo(!1),e.writeLeftID(i.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===i4?(e.writeParentInfo(!1),e.writeLeftID(t)):ec();null!==n&&e.writeString(n)}this.content.write(e,t)}}let nR=(e,t)=>nL[t&binary.BITS5](e),nL=null;class nP extends null{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){error.unexpectedCase()}write(e,t){e.writeInfo(10),encoding.writeVarUint(e.restEncoder,this.length-t)}getMissing(e,t){return null}}let nM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},nU="__ $YJS$ __";!0===nM[nU]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),nM[nU]=!0},96604:function(e,t,i){function r(e,t,i){function r(i,r){var n;for(let s in Object.defineProperty(i,"_zod",{value:i._zod??{},enumerable:!1}),(n=i._zod).traits??(n.traits=new Set),i._zod.traits.add(e),t(i,r),o.prototype)s in i||Object.defineProperty(i,s,{value:o.prototype[s].bind(i)});i._zod.constr=o,i._zod.def=r}let n=i?.Parent??Object;class s extends n{}function o(e){var t;let n=i?.Parent?new s:this;for(let i of(r(n,e),(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred))i();return n}return Object.defineProperty(s,"name",{value:e}),Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!i?.Parent&&t instanceof i.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}i.d(t,{O7:()=>ig,VK:()=>iC,Km:()=>iL,Z_:()=>tX,Yj:()=>i_,G0:()=>iA,IX:()=>ix,i0:()=>iM,Rx:()=>ih,o4:()=>t0,Ry:()=>iE,IM:()=>iF,S1:()=>iv}),Object.freeze({status:"aborted"}),Symbol("zod_brand");class n extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let s={};function o(e){return e&&Object.assign(s,e),s}let a=/^[cC][^\s-]{8,}$/,l=/^[0-9a-z]+$/,d=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,u=/^[0-9a-vA-V]{20}$/,c=/^[A-Za-z0-9]{27}$/,h=/^[a-zA-Z0-9_-]{21}$/,p=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,f=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,y=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,m=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,g=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,b=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,v=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,w=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,_=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,N=/^[A-Za-z0-9_-]*$/,I=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,S=/^\+(?:[0-9]){6,14}[0-9]$/,T="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",x=RegExp(`^${T}$`);function O(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}let E=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},k=/^\d+$/,A=/^-?\d+(?:\.\d+)?/i,D=/true|false/i,C=/undefined/i,B=/^[^A-Z]*$/,V=/^[^a-z]*$/;function F(e,t){return"bigint"==typeof t?t.toString():t}function R(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function L(e){let t=+!!e.startsWith("^"),i=e.endsWith("$")?e.length-1:e.length;return e.slice(t,i)}let P=Symbol("evaluating");function M(e,t,i){let r;Object.defineProperty(e,t,{get(){if(r!==P)return void 0===r&&(r=P,r=i()),r},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}function U(e,t,i){Object.defineProperty(e,t,{value:i,writable:!0,enumerable:!0,configurable:!0})}function W(...e){let t={};for(let i of e)Object.assign(t,Object.getOwnPropertyDescriptors(i));return Object.defineProperties({},t)}function z(e){return JSON.stringify(e)}let q="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function j(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let $=R(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function Q(e){if(!1===j(e))return!1;let t=e.constructor;if(void 0===t)return!0;let i=t.prototype;return!1!==j(i)&&!1!==Object.prototype.hasOwnProperty.call(i,"isPrototypeOf")}function Z(e){return Q(e)?{...e}:e}let J=new Set(["string","number","symbol"]);function G(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function K(e,t,i){let r=new e._zod.constr(t??e._zod.def);return(!t||i?.parent)&&(r._zod.parent=e),r}function Y(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}let H={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function X(e,t=0){for(let i=t;i<e.issues.length;i++)if(e.issues[i]?.continue!==!0)return!0;return!1}function ee(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function et(e){return"string"==typeof e?e:e?.message}function ei(e,t,i){let r={...e,path:e.path??[]};return e.message||(r.message=et(e.inst?._zod.def?.error?.(e))??et(t?.error?.(e))??et(i.customError?.(e))??et(i.localeError?.(e))??"Invalid input"),delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function er(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function en(...e){let[t,i,r]=e;return"string"==typeof t?{message:t,code:"custom",input:i,inst:r}:{...t}}let es=r("$ZodCheck",(e,t)=>{var i;e._zod??(e._zod={}),e._zod.def=t,(i=e._zod).onattach??(i.onattach=[])}),eo={number:"number",bigint:"bigint",object:"date"},ea=r("$ZodCheckLessThan",(e,t)=>{es.init(e,t);let i=eo[typeof t.value];e._zod.onattach.push(e=>{let i=e._zod.bag,r=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:i,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),el=r("$ZodCheckGreaterThan",(e,t)=>{es.init(e,t);let i=eo[typeof t.value];e._zod.onattach.push(e=>{let i=e._zod.bag,r=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:i,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ed=r("$ZodCheckMultipleOf",(e,t)=>{es.init(e,t),e._zod.onattach.push(e=>{var i;(i=e._zod.bag).multipleOf??(i.multipleOf=t.value)}),e._zod.check=i=>{if(typeof i.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof i.value?i.value%t.value===BigInt(0):0===function(e,t){let i=(e.toString().split(".")[1]||"").length,r=t.toString(),n=(r.split(".")[1]||"").length;if(0===n&&/\d?e-\d?/.test(r)){let e=r.match(/\d?e-(\d?)/);e?.[1]&&(n=Number.parseInt(e[1]))}let s=i>n?i:n;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}(i.value,t.value))||i.issues.push({origin:typeof i.value,code:"not_multiple_of",divisor:t.value,input:i.value,inst:e,continue:!t.abort})}}),eu=r("$ZodCheckNumberFormat",(e,t)=>{es.init(e,t),t.format=t.format||"float64";let i=t.format?.includes("int"),r=i?"int":"number",[n,s]=H[t.format];e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,r.minimum=n,r.maximum=s,i&&(r.pattern=k)}),e._zod.check=o=>{let a=o.value;if(i){if(!Number.isInteger(a))return void o.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});if(!Number.isSafeInteger(a))return void(a>0?o.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):o.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}a<n&&o.issues.push({origin:"number",input:a,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),a>s&&o.issues.push({origin:"number",input:a,code:"too_big",maximum:s,inst:e})}}),ec=r("$ZodCheckMaxLength",(e,t)=>{var i;es.init(e,t),(i=e._zod.def).when??(i.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let i=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{let r=i.value;if(r.length<=t.maximum)return;let n=er(r);i.issues.push({origin:n,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),eh=r("$ZodCheckMinLength",(e,t)=>{var i;es.init(e,t),(i=e._zod.def).when??(i.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let i=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{let r=i.value;if(r.length>=t.minimum)return;let n=er(r);i.issues.push({origin:n,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),ep=r("$ZodCheckLengthEquals",(e,t)=>{var i;es.init(e,t),(i=e._zod.def).when??(i.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let i=e._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=i=>{let r=i.value,n=r.length;if(n===t.length)return;let s=er(r),o=n>t.length;i.issues.push({origin:s,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),ef=r("$ZodCheckStringFormat",(e,t)=>{var i,r;es.init(e,t),e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(i=e._zod).check??(i.check=i=>{t.pattern.lastIndex=0,t.pattern.test(i.value)||i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),ey=r("$ZodCheckRegex",(e,t)=>{ef.init(e,t),e._zod.check=i=>{t.pattern.lastIndex=0,t.pattern.test(i.value)||i.issues.push({origin:"string",code:"invalid_format",format:"regex",input:i.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),em=r("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=B),ef.init(e,t)}),eg=r("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=V),ef.init(e,t)}),eb=r("$ZodCheckIncludes",(e,t)=>{es.init(e,t);let i=G(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${i}`:i);t.pattern=r,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),ev=r("$ZodCheckStartsWith",(e,t)=>{es.init(e,t);let i=RegExp(`^${G(t.prefix)}.*`);t.pattern??(t.pattern=i),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(i)}),e._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:e,continue:!t.abort})}}),ew=r("$ZodCheckEndsWith",(e,t)=>{es.init(e,t);let i=RegExp(`.*${G(t.suffix)}$`);t.pattern??(t.pattern=i),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(i)}),e._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:e,continue:!t.abort})}}),e_=r("$ZodCheckOverwrite",(e,t)=>{es.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class eN{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),i=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(i)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let eI=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,F,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},eS=r("$ZodError",eI),eT=r("$ZodError",eI,{Parent:Error}),ex=e=>(t,i,r)=>{let s=r?{...r,async:!1}:{async:!1},a=t._zod.run({value:i,issues:[]},s);if(a instanceof Promise)throw new n;return a.issues.length?{success:!1,error:new(e??eS)(a.issues.map(e=>ei(e,s,o())))}:{success:!0,data:a.value}},eO=ex(eT),eE=e=>async(t,i,r)=>{let n=r?Object.assign(r,{async:!0}):{async:!0},s=t._zod.run({value:i,issues:[]},n);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(e=>ei(e,n,o())))}:{success:!0,data:s.value}},ek=eE(eT),eA={major:4,minor:0,patch:17},eD=r("$ZodType",(e,t)=>{var i;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=eA;let r=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&r.unshift(e),r))for(let i of t._zod.onattach)i(e);if(0===r.length)(i=e._zod).deferred??(i.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,i)=>{let r,s=X(e);for(let o of t){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(s)continue;let t=e.issues.length,a=o._zod.check(e);if(a instanceof Promise&&i?.async===!1)throw new n;if(r||a instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(s||(s=X(e,t)))});else{if(e.issues.length===t)continue;s||(s=X(e,t))}}return r?r.then(()=>e):e};e._zod.run=(i,s)=>{let o=e._zod.parse(i,s);if(o instanceof Promise){if(!1===s.async)throw new n;return o.then(e=>t(e,r,s))}return t(o,r,s)}}e["~standard"]={validate:t=>{try{let i=eO(e,t);return i.success?{value:i.data}:{issues:i.error?.issues}}catch(i){return ek(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),eC=r("$ZodString",(e,t)=>{eD.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??E(e._zod.bag),e._zod.parse=(i,r)=>{if(t.coerce)try{i.value=String(i.value)}catch(e){}return"string"==typeof i.value||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:e}),i}}),eB=r("$ZodStringFormat",(e,t)=>{ef.init(e,t),eC.init(e,t)}),eV=r("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=f),eB.init(e,t)}),eF=r("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=y(e))}else t.pattern??(t.pattern=y());eB.init(e,t)}),eR=r("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=m),eB.init(e,t)}),eL=r("$ZodURL",(e,t)=>{eB.init(e,t),e._zod.check=i=>{try{let r=i.value.trim(),n=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:I.source,input:i.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:i.value,inst:e,continue:!t.abort})),t.normalize?i.value=n.href:i.value=r;return}catch(r){i.issues.push({code:"invalid_format",format:"url",input:i.value,inst:e,continue:!t.abort})}}}),eP=r("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),eB.init(e,t)}),eM=r("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=h),eB.init(e,t)}),eU=r("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=a),eB.init(e,t)}),eW=r("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=l),eB.init(e,t)}),ez=r("$ZodULID",(e,t)=>{t.pattern??(t.pattern=d),eB.init(e,t)}),eq=r("$ZodXID",(e,t)=>{t.pattern??(t.pattern=u),eB.init(e,t)}),ej=r("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=c),eB.init(e,t)}),e$=r("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){let t=O({precision:e.precision}),i=["Z"];e.local&&i.push(""),e.offset&&i.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let r=`${t}(?:${i.join("|")})`;return RegExp(`^${T}T(?:${r})$`)}(t)),eB.init(e,t)}),eQ=r("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=x),eB.init(e,t)}),eZ=r("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=RegExp(`^${O(t)}$`)),eB.init(e,t)}),eJ=r("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=p),eB.init(e,t)}),eG=r("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=g),eB.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),eK=r("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=b),eB.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=i=>{try{new URL(`http://[${i.value}]`)}catch{i.issues.push({code:"invalid_format",format:"ipv6",input:i.value,inst:e,continue:!t.abort})}}}),eY=r("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=v),eB.init(e,t)}),eH=r("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=w),eB.init(e,t),e._zod.check=i=>{let[r,n]=i.value.split("/");try{if(!n)throw Error();let e=Number(n);if(`${e}`!==n||e<0||e>128)throw Error();new URL(`http://[${r}]`)}catch{i.issues.push({code:"invalid_format",format:"cidrv6",input:i.value,inst:e,continue:!t.abort})}}});function eX(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let e0=r("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=_),eB.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=i=>{eX(i.value)||i.issues.push({code:"invalid_format",format:"base64",input:i.value,inst:e,continue:!t.abort})}}),e1=r("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=N),eB.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=i=>{!function(e){if(!N.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return eX(t.padEnd(4*Math.ceil(t.length/4),"="))}(i.value)&&i.issues.push({code:"invalid_format",format:"base64url",input:i.value,inst:e,continue:!t.abort})}}),e2=r("$ZodE164",(e,t)=>{t.pattern??(t.pattern=S),eB.init(e,t)}),e4=r("$ZodJWT",(e,t)=>{eB.init(e,t),e._zod.check=i=>{!function(e,t=null){try{let i=e.split(".");if(3!==i.length)return!1;let[r]=i;if(!r)return!1;let n=JSON.parse(atob(r));if("typ"in n&&n?.typ!=="JWT"||!n.alg||t&&(!("alg"in n)||n.alg!==t))return!1;return!0}catch{return!1}}(i.value,t.alg)&&i.issues.push({code:"invalid_format",format:"jwt",input:i.value,inst:e,continue:!t.abort})}}),e8=r("$ZodNumber",(e,t)=>{eD.init(e,t),e._zod.pattern=e._zod.bag.pattern??A,e._zod.parse=(i,r)=>{if(t.coerce)try{i.value=Number(i.value)}catch(e){}let n=i.value;if("number"==typeof n&&!Number.isNaN(n)&&Number.isFinite(n))return i;let s="number"==typeof n?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return i.issues.push({expected:"number",code:"invalid_type",input:n,inst:e,...s?{received:s}:{}}),i}}),e3=r("$ZodNumber",(e,t)=>{eu.init(e,t),e8.init(e,t)}),e6=r("$ZodBoolean",(e,t)=>{eD.init(e,t),e._zod.pattern=D,e._zod.parse=(i,r)=>{if(t.coerce)try{i.value=!!i.value}catch(e){}let n=i.value;return"boolean"==typeof n||i.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:e}),i}}),e5=r("$ZodUndefined",(e,t)=>{eD.init(e,t),e._zod.pattern=C,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,i)=>{let r=t.value;return void 0===r||t.issues.push({expected:"undefined",code:"invalid_type",input:r,inst:e}),t}}),e9=r("$ZodAny",(e,t)=>{eD.init(e,t),e._zod.parse=e=>e}),e7=r("$ZodUnknown",(e,t)=>{eD.init(e,t),e._zod.parse=e=>e}),te=r("$ZodNever",(e,t)=>{eD.init(e,t),e._zod.parse=(t,i)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function tt(e,t,i){e.issues.length&&t.issues.push(...ee(i,e.issues)),t.value[i]=e.value}let ti=r("$ZodArray",(e,t)=>{eD.init(e,t),e._zod.parse=(i,r)=>{let n=i.value;if(!Array.isArray(n))return i.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),i;i.value=Array(n.length);let s=[];for(let e=0;e<n.length;e++){let o=n[e],a=t.element._zod.run({value:o,issues:[]},r);a instanceof Promise?s.push(a.then(t=>tt(t,i,e))):tt(a,i,e)}return s.length?Promise.all(s).then(()=>i):i}});function tr(e,t,i,r){e.issues.length&&t.issues.push(...ee(i,e.issues)),void 0===e.value?i in r&&(t.value[i]=void 0):t.value[i]=e.value}let tn=r("$ZodObject",(e,t)=>{let i,r;eD.init(e,t);let n=R(()=>{var e;let i=Object.keys(t.shape);for(let e of i)if(!t.shape[e]._zod.traits.has("$ZodType"))throw Error(`Invalid element at key "${e}": expected a Zod schema`);let r=Object.keys(e=t.shape).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout);return{shape:t.shape,keys:i,keySet:new Set(i),numKeys:i.length,optionalKeys:new Set(r)}});M(e._zod,"propValues",()=>{let e=t.shape,i={};for(let t in e){let r=e[t]._zod;if(r.values)for(let e of(i[t]??(i[t]=new Set),r.values))i[t].add(e)}return i});let o=e=>{let t=new eN(["shape","payload","ctx"]),i=n.value,r=e=>{let t=z(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let s=Object.create(null),o=0;for(let e of i.keys)s[e]=`key_${o++}`;for(let e of(t.write("const newResult = {}"),i.keys)){let i=s[e],n=z(e);t.write(`const ${i} = ${r(e)};`),t.write(`
        if (${i}.issues.length) {
          payload.issues = payload.issues.concat(${i}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${n}, ...iss.path] : [${n}]
          })));
        }
        
        if (${i}.value === undefined) {
          if (${n} in input) {
            newResult[${n}] = undefined;
          }
        } else {
          newResult[${n}] = ${i}.value;
        }
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let a=t.compile();return(t,i)=>a(e,t,i)},a=!s.jitless,l=a&&$.value,d=t.catchall;e._zod.parse=(s,u)=>{r??(r=n.value);let c=s.value;if(!j(c))return s.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),s;let h=[];if(a&&l&&u?.async===!1&&!0!==u.jitless)i||(i=o(t.shape)),s=i(s,u);else{s.value={};let e=r.shape;for(let t of r.keys){let i=e[t]._zod.run({value:c[t],issues:[]},u);i instanceof Promise?h.push(i.then(e=>tr(e,s,t,c))):tr(i,s,t,c)}}if(!d)return h.length?Promise.all(h).then(()=>s):s;let p=[],f=r.keySet,y=d._zod,m=y.def.type;for(let e of Object.keys(c)){if(f.has(e))continue;if("never"===m){p.push(e);continue}let t=y.run({value:c[e],issues:[]},u);t instanceof Promise?h.push(t.then(t=>tr(t,s,e,c))):tr(t,s,e,c)}return(p.length&&s.issues.push({code:"unrecognized_keys",keys:p,input:c,inst:e}),h.length)?Promise.all(h).then(()=>s):s}});function ts(e,t,i,r){for(let i of e)if(0===i.issues.length)return t.value=i.value,t;let n=e.filter(e=>!X(e));return 1===n.length?(t.value=n[0].value,n[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:i,errors:e.map(e=>e.issues.map(e=>ei(e,r,o())))}),t)}let to=r("$ZodUnion",(e,t)=>{eD.init(e,t),M(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),M(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),M(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),M(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>L(e.source)).join("|")})$`)}});let i=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(n,s)=>{if(i)return r(n,s);let o=!1,a=[];for(let e of t.options){let t=e._zod.run({value:n.value,issues:[]},s);if(t instanceof Promise)a.push(t),o=!0;else{if(0===t.issues.length)return t;a.push(t)}}return o?Promise.all(a).then(t=>ts(t,n,e,s)):ts(a,n,e,s)}}),ta=r("$ZodDiscriminatedUnion",(e,t)=>{to.init(e,t);let i=e._zod.parse;M(e._zod,"propValues",()=>{let e={};for(let i of t.options){let r=i._zod.propValues;if(!r||0===Object.keys(r).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(let[t,i]of Object.entries(r))for(let r of(e[t]||(e[t]=new Set),i))e[t].add(r)}return e});let r=R(()=>{let e=t.options,i=new Map;for(let r of e){let e=r._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let t of e){if(i.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);i.set(t,r)}}return i});e._zod.parse=(n,s)=>{let o=n.value;if(!j(o))return n.issues.push({code:"invalid_type",expected:"object",input:o,inst:e}),n;let a=r.value.get(o?.[t.discriminator]);return a?a._zod.run(n,s):t.unionFallback?i(n,s):(n.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),n)}}),tl=r("$ZodIntersection",(e,t)=>{eD.init(e,t),e._zod.parse=(e,i)=>{let r=e.value,n=t.left._zod.run({value:r,issues:[]},i),s=t.right._zod.run({value:r,issues:[]},i);return n instanceof Promise||s instanceof Promise?Promise.all([n,s]).then(([t,i])=>td(e,t,i)):td(e,n,s)}});function td(e,t,i){if(t.issues.length&&e.issues.push(...t.issues),i.issues.length&&e.issues.push(...i.issues),X(e))return e;let r=function e(t,i){if(t===i||t instanceof Date&&i instanceof Date&&+t==+i)return{valid:!0,data:t};if(Q(t)&&Q(i)){let r=Object.keys(i),n=Object.keys(t).filter(e=>-1!==r.indexOf(e)),s={...t,...i};for(let r of n){let n=e(t[r],i[r]);if(!n.valid)return{valid:!1,mergeErrorPath:[r,...n.mergeErrorPath]};s[r]=n.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(i)){if(t.length!==i.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<t.length;n++){let s=e(t[n],i[n]);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}(t.value,i.value);if(!r.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}let tu=r("$ZodRecord",(e,t)=>{eD.init(e,t),e._zod.parse=(i,r)=>{let n=i.value;if(!Q(n))return i.issues.push({expected:"record",code:"invalid_type",input:n,inst:e}),i;let s=[];if(t.keyType._zod.values){let o,a=t.keyType._zod.values;for(let e of(i.value={},a))if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let o=t.valueType._zod.run({value:n[e],issues:[]},r);o instanceof Promise?s.push(o.then(t=>{t.issues.length&&i.issues.push(...ee(e,t.issues)),i.value[e]=t.value})):(o.issues.length&&i.issues.push(...ee(e,o.issues)),i.value[e]=o.value)}for(let e in n)a.has(e)||(o=o??[]).push(e);o&&o.length>0&&i.issues.push({code:"unrecognized_keys",input:n,inst:e,keys:o})}else for(let a of(i.value={},Reflect.ownKeys(n))){if("__proto__"===a)continue;let l=t.keyType._zod.run({value:a,issues:[]},r);if(l instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(l.issues.length){i.issues.push({code:"invalid_key",origin:"record",issues:l.issues.map(e=>ei(e,r,o())),input:a,path:[a],inst:e}),i.value[l.value]=l.value;continue}let d=t.valueType._zod.run({value:n[a],issues:[]},r);d instanceof Promise?s.push(d.then(e=>{e.issues.length&&i.issues.push(...ee(a,e.issues)),i.value[l.value]=e.value})):(d.issues.length&&i.issues.push(...ee(a,d.issues)),i.value[l.value]=d.value)}return s.length?Promise.all(s).then(()=>i):i}}),tc=r("$ZodEnum",(e,t)=>{eD.init(e,t);let i=function(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,i])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries),r=new Set(i);e._zod.values=r,e._zod.pattern=RegExp(`^(${i.filter(e=>J.has(typeof e)).map(e=>"string"==typeof e?G(e):e.toString()).join("|")})$`),e._zod.parse=(t,n)=>{let s=t.value;return r.has(s)||t.issues.push({code:"invalid_value",values:i,input:s,inst:e}),t}}),th=r("$ZodLiteral",(e,t)=>{if(eD.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?G(e):e?G(e.toString()):String(e)).join("|")})$`),e._zod.parse=(i,r)=>{let n=i.value;return e._zod.values.has(n)||i.issues.push({code:"invalid_value",values:t.values,input:n,inst:e}),i}}),tp=r("$ZodTransform",(e,t)=>{eD.init(e,t),e._zod.parse=(e,i)=>{let r=t.transform(e.value,e);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(t=>(e.value=t,e));if(r instanceof Promise)throw new n;return e.value=r,e}});function tf(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let ty=r("$ZodOptional",(e,t)=>{eD.init(e,t),e._zod.optin="optional",e._zod.optout="optional",M(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),M(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${L(e.source)})?$`):void 0}),e._zod.parse=(e,i)=>{if("optional"===t.innerType._zod.optin){let r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(t=>tf(t,e.value)):tf(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,i)}}),tm=r("$ZodNullable",(e,t)=>{eD.init(e,t),M(e._zod,"optin",()=>t.innerType._zod.optin),M(e._zod,"optout",()=>t.innerType._zod.optout),M(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${L(e.source)}|null)$`):void 0}),M(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,i)=>null===e.value?e:t.innerType._zod.run(e,i)}),tg=r("$ZodDefault",(e,t)=>{eD.init(e,t),e._zod.optin="optional",M(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,i)=>{if(void 0===e.value)return e.value=t.defaultValue,e;let r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(e=>tb(e,t)):tb(r,t)}});function tb(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let tv=r("$ZodPrefault",(e,t)=>{eD.init(e,t),e._zod.optin="optional",M(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,i)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,i))}),tw=r("$ZodNonOptional",(e,t)=>{eD.init(e,t),M(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(i,r)=>{let n=t.innerType._zod.run(i,r);return n instanceof Promise?n.then(t=>t_(t,e)):t_(n,e)}});function t_(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let tN=r("$ZodCatch",(e,t)=>{eD.init(e,t),M(e._zod,"optin",()=>t.innerType._zod.optin),M(e._zod,"optout",()=>t.innerType._zod.optout),M(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,i)=>{let r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>ei(e,i,o()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>ei(e,i,o()))},input:e.value}),e.issues=[]),e)}}),tI=r("$ZodPipe",(e,t)=>{eD.init(e,t),M(e._zod,"values",()=>t.in._zod.values),M(e._zod,"optin",()=>t.in._zod.optin),M(e._zod,"optout",()=>t.out._zod.optout),M(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,i)=>{let r=t.in._zod.run(e,i);return r instanceof Promise?r.then(e=>tS(e,t,i)):tS(r,t,i)}});function tS(e,t,i){return e.issues.length?e:t.out._zod.run({value:e.value,issues:e.issues},i)}let tT=r("$ZodReadonly",(e,t)=>{eD.init(e,t),M(e._zod,"propValues",()=>t.innerType._zod.propValues),M(e._zod,"values",()=>t.innerType._zod.values),M(e._zod,"optin",()=>t.innerType._zod.optin),M(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,i)=>{let r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(tx):tx(r)}});function tx(e){return e.value=Object.freeze(e.value),e}let tO=r("$ZodCustom",(e,t)=>{es.init(e,t),eD.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=i=>{let r=i.value,n=t.fn(r);if(n instanceof Promise)return n.then(t=>tE(t,i,r,e));tE(n,i,r,e)}});function tE(e,t,i,r){if(!e){let e={code:"custom",input:i,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(en(e))}}Symbol("ZodOutput"),Symbol("ZodInput");let tk=new class e{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){let i=t[0];if(this._map.set(e,i),i&&"object"==typeof i&&"id"in i){if(this._idmap.has(i.id))throw Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let i={...this.get(t)??{}};delete i.id;let r={...i,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function tA(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Y(t)})}function tD(e,t){return new ea({check:"less_than",...Y(t),value:e,inclusive:!1})}function tC(e,t){return new ea({check:"less_than",...Y(t),value:e,inclusive:!0})}function tB(e,t){return new el({check:"greater_than",...Y(t),value:e,inclusive:!1})}function tV(e,t){return new el({check:"greater_than",...Y(t),value:e,inclusive:!0})}function tF(e,t){return new ed({check:"multiple_of",...Y(t),value:e})}function tR(e,t){return new ec({check:"max_length",...Y(t),maximum:e})}function tL(e,t){return new eh({check:"min_length",...Y(t),minimum:e})}function tP(e,t){return new ep({check:"length_equals",...Y(t),length:e})}function tM(e){return new e_({check:"overwrite",tx:e})}let tU=r("ZodISODateTime",(e,t)=>{e$.init(e,t),t0.init(e,t)}),tW=r("ZodISODate",(e,t)=>{eQ.init(e,t),t0.init(e,t)}),tz=r("ZodISOTime",(e,t)=>{eZ.init(e,t),t0.init(e,t)}),tq=r("ZodISODuration",(e,t)=>{eJ.init(e,t),t0.init(e,t)}),tj=(e,t)=>{eS.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>(function(e,t){let i=t||function(e){return e.message},r={_errors:[]},n=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>n({issues:e}));else if("invalid_key"===t.code)n({issues:t.issues});else if("invalid_element"===t.code)n({issues:t.issues});else if(0===t.path.length)r._errors.push(i(t));else{let e=r,n=0;for(;n<t.path.length;){let r=t.path[n];n===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(i(t))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r})(e,t)},flatten:{value:t=>(function(e,t=e=>e.message){let i={},r=[];for(let n of e.issues)n.path.length>0?(i[n.path[0]]=i[n.path[0]]||[],i[n.path[0]].push(t(n))):r.push(t(n));return{formErrors:r,fieldErrors:i}})(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,F,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,F,2)}},isEmpty:{get:()=>0===e.issues.length}})};r("ZodError",tj);let t$=r("ZodError",tj,{Parent:Error}),tQ=(e,t,i,r)=>{let s=i?Object.assign(i,{async:!1}):{async:!1},a=e._zod.run({value:t,issues:[]},s);if(a instanceof Promise)throw new n;if(a.issues.length){let e=new(r?.Err??t$)(a.issues.map(e=>ei(e,s,o())));throw q(e,r?.callee),e}return a.value},tZ=async(e,t,i,r)=>{let n=i?Object.assign(i,{async:!0}):{async:!0},s=e._zod.run({value:t,issues:[]},n);if(s instanceof Promise&&(s=await s),s.issues.length){let e=new(r?.Err??t$)(s.issues.map(e=>ei(e,n,o())));throw q(e,r?.callee),e}return s.value},tJ=ex(t$),tG=eE(t$),tK=r("ZodType",(e,t)=>(eD.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...i)=>e.clone({...t,checks:[...t.checks??[],...i.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,i)=>K(e,t,i),e.brand=()=>e,e.register=(t,i)=>(t.add(e,i),e),e.parse=(t,i)=>tQ(e,t,i,{callee:e.parse}),e.safeParse=(t,i)=>tJ(e,t,i),e.parseAsync=async(t,i)=>tZ(e,t,i,{callee:e.parseAsync}),e.safeParseAsync=async(t,i)=>tG(e,t,i),e.spa=e.safeParseAsync,e.refine=(t,i)=>e.check(function(e,t={}){return new iH({type:"custom",check:"custom",fn:e,...Y(t)})}(t,i)),e.superRefine=t=>e.check(function(e){let t=function(e,t){let i=new es({check:"custom",...Y(void 0)});return i._zod.check=e,i}(i=>(i.addIssue=e=>{"string"==typeof e?i.issues.push(en(e,i.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=i.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),i.issues.push(en(e)))},e(i.value,i)));return t}(t)),e.overwrite=t=>e.check(tM(t)),e.optional=()=>iz(e),e.nullable=()=>ij(e),e.nullish=()=>iz(ij(e)),e.nonoptional=t=>new iZ({type:"nonoptional",innerType:e,...Y(t)}),e.array=()=>ix(e),e.or=t=>iA([e,t]),e.and=t=>new iB({type:"intersection",left:e,right:t}),e.transform=t=>iK(e,new iU({type:"transform",transform:t})),e.default=t=>{var i,r;return i=e,r=t,new i$({type:"default",innerType:i,get defaultValue(){return"function"==typeof r?r():Z(r)}})},e.prefault=t=>{var i,r;return i=e,r=t,new iQ({type:"prefault",innerType:i,get defaultValue(){return"function"==typeof r?r():Z(r)}})},e.catch=t=>{var i;return new iJ({type:"catch",innerType:e,catchValue:"function"==typeof(i=t)?i:()=>i})},e.pipe=t=>iK(e,t),e.readonly=()=>new iY({type:"readonly",innerType:e}),e.describe=t=>{let i=e.clone();return tk.add(i,{description:t}),i},Object.defineProperty(e,"description",{get:()=>tk.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return tk.get(e);let i=e.clone();return tk.add(i,t[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),tY=r("_ZodString",(e,t)=>{eC.init(e,t),tK.init(e,t);let i=e._zod.bag;e.format=i.format??null,e.minLength=i.minimum??null,e.maxLength=i.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new ey({check:"string_format",format:"regex",...Y(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new eb({check:"string_format",format:"includes",...Y(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new ev({check:"string_format",format:"starts_with",...Y(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new ew({check:"string_format",format:"ends_with",...Y(t),suffix:e})}(...t)),e.min=(...t)=>e.check(tL(...t)),e.max=(...t)=>e.check(tR(...t)),e.length=(...t)=>e.check(tP(...t)),e.nonempty=(...t)=>e.check(tL(1,...t)),e.lowercase=t=>e.check(new em({check:"string_format",format:"lowercase",...Y(t)})),e.uppercase=t=>e.check(new eg({check:"string_format",format:"uppercase",...Y(t)})),e.trim=()=>e.check(tM(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return tM(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(tM(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(tM(e=>e.toUpperCase()))}),tH=r("ZodString",(e,t)=>{eC.init(e,t),tY.init(e,t),e.email=t=>e.check(new t1({type:"string",format:"email",check:"string_format",abort:!1,...Y(t)})),e.url=t=>e.check(new t8({type:"string",format:"url",check:"string_format",abort:!1,...Y(t)})),e.jwt=t=>e.check(new iu({type:"string",format:"jwt",check:"string_format",abort:!1,...Y(t)})),e.emoji=t=>e.check(new t3({type:"string",format:"emoji",check:"string_format",abort:!1,...Y(t)})),e.guid=t=>e.check(tA(t2,t)),e.uuid=t=>e.check(new t4({type:"string",format:"uuid",check:"string_format",abort:!1,...Y(t)})),e.uuidv4=t=>e.check(new t4({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Y(t)})),e.uuidv6=t=>e.check(new t4({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Y(t)})),e.uuidv7=t=>e.check(new t4({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Y(t)})),e.nanoid=t=>e.check(new t6({type:"string",format:"nanoid",check:"string_format",abort:!1,...Y(t)})),e.guid=t=>e.check(tA(t2,t)),e.cuid=t=>e.check(new t5({type:"string",format:"cuid",check:"string_format",abort:!1,...Y(t)})),e.cuid2=t=>e.check(new t9({type:"string",format:"cuid2",check:"string_format",abort:!1,...Y(t)})),e.ulid=t=>e.check(new t7({type:"string",format:"ulid",check:"string_format",abort:!1,...Y(t)})),e.base64=t=>e.check(new ia({type:"string",format:"base64",check:"string_format",abort:!1,...Y(t)})),e.base64url=t=>e.check(new il({type:"string",format:"base64url",check:"string_format",abort:!1,...Y(t)})),e.xid=t=>e.check(new ie({type:"string",format:"xid",check:"string_format",abort:!1,...Y(t)})),e.ksuid=t=>e.check(new it({type:"string",format:"ksuid",check:"string_format",abort:!1,...Y(t)})),e.ipv4=t=>e.check(new ii({type:"string",format:"ipv4",check:"string_format",abort:!1,...Y(t)})),e.ipv6=t=>e.check(new ir({type:"string",format:"ipv6",check:"string_format",abort:!1,...Y(t)})),e.cidrv4=t=>e.check(new is({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Y(t)})),e.cidrv6=t=>e.check(new io({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Y(t)})),e.e164=t=>e.check(new id({type:"string",format:"e164",check:"string_format",abort:!1,...Y(t)})),e.datetime=t=>e.check(new tU({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Y(t)})),e.date=t=>e.check(new tW({type:"string",format:"date",check:"string_format",...Y(t)})),e.time=t=>e.check(new tz({type:"string",format:"time",check:"string_format",precision:null,...Y(t)})),e.duration=t=>e.check(new tq({type:"string",format:"duration",check:"string_format",...Y(t)}))});function tX(e){return new tH({type:"string",...Y(e)})}let t0=r("ZodStringFormat",(e,t)=>{eB.init(e,t),tY.init(e,t)}),t1=r("ZodEmail",(e,t)=>{eR.init(e,t),t0.init(e,t)}),t2=r("ZodGUID",(e,t)=>{eV.init(e,t),t0.init(e,t)}),t4=r("ZodUUID",(e,t)=>{eF.init(e,t),t0.init(e,t)}),t8=r("ZodURL",(e,t)=>{eL.init(e,t),t0.init(e,t)}),t3=r("ZodEmoji",(e,t)=>{eP.init(e,t),t0.init(e,t)}),t6=r("ZodNanoID",(e,t)=>{eM.init(e,t),t0.init(e,t)}),t5=r("ZodCUID",(e,t)=>{eU.init(e,t),t0.init(e,t)}),t9=r("ZodCUID2",(e,t)=>{eW.init(e,t),t0.init(e,t)}),t7=r("ZodULID",(e,t)=>{ez.init(e,t),t0.init(e,t)}),ie=r("ZodXID",(e,t)=>{eq.init(e,t),t0.init(e,t)}),it=r("ZodKSUID",(e,t)=>{ej.init(e,t),t0.init(e,t)}),ii=r("ZodIPv4",(e,t)=>{eG.init(e,t),t0.init(e,t)}),ir=r("ZodIPv6",(e,t)=>{eK.init(e,t),t0.init(e,t)}),is=r("ZodCIDRv4",(e,t)=>{eY.init(e,t),t0.init(e,t)}),io=r("ZodCIDRv6",(e,t)=>{eH.init(e,t),t0.init(e,t)}),ia=r("ZodBase64",(e,t)=>{e0.init(e,t),t0.init(e,t)}),il=r("ZodBase64URL",(e,t)=>{e1.init(e,t),t0.init(e,t)}),id=r("ZodE164",(e,t)=>{e2.init(e,t),t0.init(e,t)}),iu=r("ZodJWT",(e,t)=>{e4.init(e,t),t0.init(e,t)}),ic=r("ZodNumber",(e,t)=>{e8.init(e,t),tK.init(e,t),e.gt=(t,i)=>e.check(tB(t,i)),e.gte=(t,i)=>e.check(tV(t,i)),e.min=(t,i)=>e.check(tV(t,i)),e.lt=(t,i)=>e.check(tD(t,i)),e.lte=(t,i)=>e.check(tC(t,i)),e.max=(t,i)=>e.check(tC(t,i)),e.int=t=>e.check(iy(t)),e.safe=t=>e.check(iy(t)),e.positive=t=>e.check(tB(0,t)),e.nonnegative=t=>e.check(tV(0,t)),e.negative=t=>e.check(tD(0,t)),e.nonpositive=t=>e.check(tC(0,t)),e.multipleOf=(t,i)=>e.check(tF(t,i)),e.step=(t,i)=>e.check(tF(t,i)),e.finite=()=>e;let i=e._zod.bag;e.minValue=Math.max(i.minimum??Number.NEGATIVE_INFINITY,i.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(i.maximum??Number.POSITIVE_INFINITY,i.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(i.format??"").includes("int")||Number.isSafeInteger(i.multipleOf??.5),e.isFinite=!0,e.format=i.format??null});function ih(e){return new ic({type:"number",checks:[],...Y(e)})}let ip=r("ZodNumberFormat",(e,t)=>{e3.init(e,t),ic.init(e,t)});function iy(e){return new ip({type:"number",check:"number_format",abort:!1,format:"safeint",...Y(e)})}let im=r("ZodBoolean",(e,t)=>{e6.init(e,t),tK.init(e,t)});function ig(e){return new im({type:"boolean",...Y(e)})}let ib=r("ZodUndefined",(e,t)=>{e5.init(e,t),tK.init(e,t)});function iv(e){return new ib({type:"undefined",...Y(e)})}let iw=r("ZodAny",(e,t)=>{e9.init(e,t),tK.init(e,t)});function i_(){return new iw({type:"any"})}let iN=r("ZodUnknown",(e,t)=>{e7.init(e,t),tK.init(e,t)});function iI(){return new iN({type:"unknown"})}let iS=r("ZodNever",(e,t)=>{te.init(e,t),tK.init(e,t)}),iT=r("ZodArray",(e,t)=>{ti.init(e,t),tK.init(e,t),e.element=t.element,e.min=(t,i)=>e.check(tL(t,i)),e.nonempty=t=>e.check(tL(1,t)),e.max=(t,i)=>e.check(tR(t,i)),e.length=(t,i)=>e.check(tP(t,i)),e.unwrap=()=>e.element});function ix(e,t){return new iT({type:"array",element:e,...Y(t)})}let iO=r("ZodObject",(e,t)=>{tn.init(e,t),tK.init(e,t),M(e,"shape",()=>t.shape),e.keyof=()=>iL(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:iI()}),e.loose=()=>e.clone({...e._zod.def,catchall:iI()}),e.strict=()=>{var t;return e.clone({...e._zod.def,catchall:new iS({type:"never",...Y(void 0)})})},e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>(function(e,t){if(!Q(t))throw Error("Invalid input to extend: expected a plain object");let i=W(e._zod.def,{get shape(){let i={...e._zod.def.shape,...t};return U(this,"shape",i),i},checks:[]});return K(e,i)})(e,t),e.merge=t=>(function(e,t){let i=W(e._zod.def,{get shape(){let i={...e._zod.def.shape,...t._zod.def.shape};return U(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return K(e,i)})(e,t),e.pick=t=>(function(e,t){let i=e._zod.def,r=W(e._zod.def,{get shape(){let e={};for(let r in t){if(!(r in i.shape))throw Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=i.shape[r])}return U(this,"shape",e),e},checks:[]});return K(e,r)})(e,t),e.omit=t=>(function(e,t){let i=e._zod.def,r=W(e._zod.def,{get shape(){let r={...e._zod.def.shape};for(let e in t){if(!(e in i.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return U(this,"shape",r),r},checks:[]});return K(e,r)})(e,t),e.partial=(...t)=>(function(e,t,i){let r=W(t._zod.def,{get shape(){let r=t._zod.def.shape,n={...r};if(i)for(let t in i){if(!(t in r))throw Error(`Unrecognized key: "${t}"`);i[t]&&(n[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(let t in r)n[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return U(this,"shape",n),n},checks:[]});return K(t,r)})(iW,e,t[0]),e.required=(...t)=>(function(e,t,i){let r=W(t._zod.def,{get shape(){let r=t._zod.def.shape,n={...r};if(i)for(let t in i){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);i[t]&&(n[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(let t in r)n[t]=new e({type:"nonoptional",innerType:r[t]});return U(this,"shape",n),n},checks:[]});return K(t,r)})(iZ,e,t[0])});function iE(e,t){return new iO({type:"object",get shape(){return U(this,"shape",e?Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e)):{}),this.shape},...Y(t)})}let ik=r("ZodUnion",(e,t)=>{to.init(e,t),tK.init(e,t),e.options=t.options});function iA(e,t){return new ik({type:"union",options:e,...Y(t)})}let iD=r("ZodDiscriminatedUnion",(e,t)=>{ik.init(e,t),ta.init(e,t)});function iC(e,t,i){return new iD({type:"union",options:t,discriminator:e,...Y(i)})}let iB=r("ZodIntersection",(e,t)=>{tl.init(e,t),tK.init(e,t)}),iV=r("ZodRecord",(e,t)=>{tu.init(e,t),tK.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function iF(e,t,i){return new iV({type:"record",keyType:e,valueType:t,...Y(i)})}let iR=r("ZodEnum",(e,t)=>{tc.init(e,t),tK.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let i=new Set(Object.keys(t.entries));e.extract=(e,r)=>{let n={};for(let r of e)if(i.has(r))n[r]=t.entries[r];else throw Error(`Key ${r} not found in enum`);return new iR({...t,checks:[],...Y(r),entries:n})},e.exclude=(e,r)=>{let n={...t.entries};for(let t of e)if(i.has(t))delete n[t];else throw Error(`Key ${t} not found in enum`);return new iR({...t,checks:[],...Y(r),entries:n})}});function iL(e,t){return new iR({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...Y(t)})}let iP=r("ZodLiteral",(e,t)=>{th.init(e,t),tK.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function iM(e,t){return new iP({type:"literal",values:Array.isArray(e)?e:[e],...Y(t)})}let iU=r("ZodTransform",(e,t)=>{tp.init(e,t),tK.init(e,t),e._zod.parse=(i,r)=>{i.addIssue=r=>{"string"==typeof r?i.issues.push(en(r,i.value,t)):(r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=i.value),r.inst??(r.inst=e),i.issues.push(en(r)))};let n=t.transform(i.value,i);return n instanceof Promise?n.then(e=>(i.value=e,i)):(i.value=n,i)}}),iW=r("ZodOptional",(e,t)=>{ty.init(e,t),tK.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iz(e){return new iW({type:"optional",innerType:e})}let iq=r("ZodNullable",(e,t)=>{tm.init(e,t),tK.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ij(e){return new iq({type:"nullable",innerType:e})}let i$=r("ZodDefault",(e,t)=>{tg.init(e,t),tK.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),iQ=r("ZodPrefault",(e,t)=>{tv.init(e,t),tK.init(e,t),e.unwrap=()=>e._zod.def.innerType}),iZ=r("ZodNonOptional",(e,t)=>{tw.init(e,t),tK.init(e,t),e.unwrap=()=>e._zod.def.innerType}),iJ=r("ZodCatch",(e,t)=>{tN.init(e,t),tK.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),iG=r("ZodPipe",(e,t)=>{tI.init(e,t),tK.init(e,t),e.in=t.in,e.out=t.out});function iK(e,t){return new iG({type:"pipe",in:e,out:t})}let iY=r("ZodReadonly",(e,t)=>{tT.init(e,t),tK.init(e,t),e.unwrap=()=>e._zod.def.innerType}),iH=r("ZodCustom",(e,t)=>{tO.init(e,t),tK.init(e,t)})}}]);
//# sourceMappingURL=8039.e23979c2.js.map