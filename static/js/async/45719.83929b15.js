"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["45719"],{70491:function(e,t,i){e.exports=i.p+"static/assets/duckdb-browser-eh.worker.5a0e3443.js"},85434:function(e,t,i){e.exports=i.p+"static/assets/duckdb-browser-mvp.worker.bc600b4f.js"},59108:function(e,t,i){e.exports=i.p+"static/wasm/dec040427027234f.module.wasm"},80681:function(e,t,i){e.exports=i.p+"static/wasm/30a40a60cab71c41.module.wasm"},53047:function(e,t,i){i.d(t,{Z:()=>tL});var r,n,s,o,a,d={};i.r(d),i.d(d,{BrowserRouter:()=>v.VK,Content:()=>v.VY,DataContext:()=>v.R0,Helmet:()=>v.ql,NoSSR:()=>v.ri,ThemeContext:()=>v.Ni,addLeadingSlash:()=>v.nY,isEqualPath:()=>v.pV,isProduction:()=>v.yv,matchPath:()=>v.LX,matchRoutes:()=>v.fp,normalizeHrefInRuntime:()=>v.AP,normalizeImagePath:()=>v.i6,normalizeRoutePath:()=>v.Tm,normalizeSlash:()=>v.Kw,pathnameToRouteService:()=>v.Ww,removeBase:()=>v.E9,removeTrailingSlash:()=>v.Qj,useDark:()=>v.e7,useI18n:()=>v.QT,useLang:()=>v.Jr,useLocation:()=>v.TH,useNavigate:()=>v.s0,usePageData:()=>v.Vi,useSearchParams:()=>v.lr,useVersion:()=>v.aw,useViewTransition:()=>v.n_,useWindowSize:()=>v.iP,withBase:()=>v.pJ});var l={};i.r(l),i.d(l,{AggregationType:()=>O.E,Aggregator:()=>A.jk,AvgAggregator:()=>A.ky,CountAggregator:()=>A.ZP,CustomAggregator:()=>A.Js,HierarchyState:()=>x.g,HighlightScope:()=>S.p,IconFuncTypeEnum:()=>E.cI,IconPosition:()=>E.q0,InteractionState:()=>S.F,InternalIconName:()=>E.up,MaxAggregator:()=>A.Fn,MinAggregator:()=>A.NF,NoneAggregator:()=>A.ld,Placement:()=>x.u,RecalculateAggregator:()=>A.U4,RecordAggregator:()=>A.hT,SortType:()=>O.F,SumAggregator:()=>A.__,cellStyleKeys:()=>T.n,indicatorSort:()=>A.vg,naturalSort:()=>A.SL,registeredAggregators:()=>A.YJ,sortBy:()=>A.MR,typeSort:()=>A.y4});var u={};i.r(u),i.d(u,{BaseTable:()=>D.D});var c={};i.r(c),i.d(c,{CachedDataSource:()=>k.Z,DataSource:()=>B.o2});var h={};i.r(h),i.d(h,{dateFormat:()=>P,numberFormat:()=>R});var p={};i.r(p),i.d(p,{CustomCellStylePlugin:()=>M.Wg,PluginManager:()=>L.Q});var f={};i.r(f),i.d(f,{Arc:()=>eu,CheckBox:()=>ey.J,Circle:()=>K,Container:()=>H,Group:()=>ep,GroupElement:()=>X,Icon:()=>ei,Image:()=>er,Line:()=>ef.x,Radio:()=>em.Y,Rect:()=>es,Tag:()=>eh,Text:()=>ea,percentCalc:()=>ed});var y={};i.r(y),i.d(y,{CUSTOM_CONTAINER_NAME:()=>eL.FH,CUSTOM_MERGE_PRE_NAME:()=>eL.Ki,CustomLayout:()=>f,DataStatistics:()=>h,EventTarget:()=>ez.R,Icon:()=>eP.J,ListTable:()=>U.T,ListTableSimple:()=>q,PIVOT_CHART_EVENT_TYPE:()=>eW.Z,PIVOT_TABLE_EVENT_TYPE:()=>eW.z,PivotChart:()=>Z.z,PivotTable:()=>j.I,PivotTableSimple:()=>Q,TABLE_EVENT_TYPE:()=>eU.B,TYPES:()=>l,VArc:()=>eO.NP,VArea:()=>eO.q_,VCheckBox:()=>eC,VCircle:()=>eO.uU,VGlyph:()=>eO.rE,VGroup:()=>eO.qP,VImage:()=>eO.rV,VLine:()=>eO.EG,VPath:()=>eO.VA,VPolygon:()=>eO.sg,VRadio:()=>eF,VRect:()=>eO.bZ,VSymbol:()=>eO.p8,VTag:()=>ek,VText:()=>eO.Jj,clearGlobal:()=>e$,core:()=>u,data:()=>c,getDataCellPath:()=>eT,getIcons:()=>ej,getTargetCell:()=>eV.J$,graphicUtil:()=>I.WN,jsx:()=>eB,pluginsDefinition:()=>p,register:()=>F,registerAnimation:()=>eM.ph,registerAxis:()=>eM.R2,registerButtonCell:()=>z.ah,registerChartCell:()=>z.LQ,registerCheckboxCell:()=>z.yR,registerEmptyTip:()=>eM.Eg,registerImageCell:()=>z.pk,registerLegend:()=>eM.I,registerMenu:()=>eM.FD,registerProgressBarCell:()=>z.m4,registerRadioCell:()=>z.Jy,registerSparkLineCell:()=>z.dB,registerSwitchCell:()=>z.VT,registerTextCell:()=>z.ge,registerTitle:()=>eM._t,registerTooltip:()=>eM.Mh,registerVideoCell:()=>z.au,renderChart:()=>eb.pF,restoreMeasureText:()=>eg.sb,setCustomAlphabetCharSet:()=>eg.fg,textMeasure:()=>eg.QC,themes:()=>V,toBoxArray:()=>eR.JO,updateCell:()=>ev.wW,version:()=>eq});var m=i(31549),v=i(88021),b=i(44194),g=i.t(b,2),w=i(37319),N=i(55192),_=i(28971),I=i(99982),S=i(85694),T=i(51436),O=i(56763),x=i(49560),E=i(48942),A=i(19571),D=i(99201),B=i(97129),k=i(92678),C=i(29859),F=i(12582),V=i(74285);function R(e){return e=Object.assign({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},e),function(t){if(isNaN(t)||!isFinite(t))return"";let i=function(e,t,i){var r,n;let s=(e+="").split("."),o=s[0],a=s.length>1?i+s[1]:"";return r=o,n=t,(o=r.replace(/\d+/,function(e){return e.replace(/(\d)(?=(\d{3})+$)/g,function(e){return`${e}${n}`})}))+a}((e.scaler*t).toFixed(e.digitsAfterDecimal),e.thousandsSep,e.decimalSep);return`${e.prefix}${i}${e.suffix}`}}function P(e,t,i,r,n){null==i&&(i=!1),null==r&&(r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==n&&(n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);let s=i?"UTC":"",o=function(e){return`0${e}`.substring(0,2)};return function(i){let a=new Date(Date.parse(i[e]));return t.replace(/%(.)/g,function(e,t){switch(t){case"y":return a[`get${s}FullYear`]();case"m":return o(a[`get${s}Month`]()+1);case"n":return r[a[`get${s}Month`]()];case"d":return o(a[`get${s}Date`]());case"w":return n[a[`get${s}Day`]()];case"x":return a[`get${s}Day`]();case"H":return o(a[`get${s}Hours`]());case"M":return o(a[`get${s}Minutes`]());case"S":return o(a[`get${s}Seconds`]());default:return`%${t}`}})}}var L=i(87410),M=i(39989),U=i(84823),W=i(44037),z=i(1387);(0,z.ge)();class q extends W.e{}var j=i(76958),$=i(74340);(0,z.ge)();class Q extends $.Z{}var Z=i(28920),J=i(96724),G=i(43735);class K extends J.C{constructor(e){var t,i,r,n,s,o,a,d,l,u;let c=(0,G.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(d=e.marginLeft)?d:c?null!=(l=e.boundsPadding[3])?l:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var Y=i(14404);class H extends Y.ZA{constructor(e){var t,i,r,n,s,o,a,d,l,u,c,h,p,f;e.direction&&(e.flexDirection=e.direction),e.justifyContent&&("start"===e.justifyContent||"end"===e.justifyContent)&&(e.justifyContent="flex-"+e.justifyContent),e.alignItems&&("start"===e.alignItems||"end"===e.alignItems)&&(e.alignItems="flex-"+e.alignItems),e.alignContent&&("start"===e.alignContent||"end"===e.alignContent)&&(e.alignContent="flex-"+e.alignContent),e.display="flex",e.flexDirection||(e.flexDirection="row"),e.clip=!0,e.fill=null==(t=null==e?void 0:e.background)?void 0:t.fill,e.stroke=null==(i=null==e?void 0:e.background)?void 0:i.stroke,e.lineWidth=null==(r=null==e?void 0:e.background)?void 0:r.lineWidth,e.cornerRadius=null==(n=null==e?void 0:e.background)?void 0:n.cornerRadius;let y=(0,G.Z)(e.boundsPadding),m=[null!=(o=null!=(s=e.marginTop)?s:y?e.boundsPadding[0]:e.boundsPadding)?o:0,null!=(d=null!=(a=e.marginRight)?a:y?e.boundsPadding[1]:e.boundsPadding)?d:0,null!=(c=null!=(l=e.marginBottom)?l:y?null!=(u=e.boundsPadding[2])?u:e.boundsPadding[0]:e.boundsPadding)?c:0,null!=(f=null!=(h=e.marginLeft)?h:y?null!=(p=e.boundsPadding[3])?p:e.boundsPadding[1]:e.boundsPadding)?f:0];e.boundsPadding=m,super(e)}}class X extends H{constructor(e){e.flexWrap="nowrap",super(e)}}var ee=i(66984),et=i(58853);class ei extends ee.E{constructor(e){var t,i,r,n,s,o,a,d,l,u,c,h;let p;(0,et.Z)(e.iconName)&&(p=C.U2()[e.iconName])&&(e.width=null!=(t=e.width)?t:p.width,e.height=null!=(i=e.height)?i:p.height,e.svg=p.svg,e.cursor=p.cursor),e.svg&&(e.image=e.svg);let f=(0,G.Z)(e.boundsPadding),y=[null!=(n=null!=(r=e.marginTop)?r:f?e.boundsPadding[0]:e.boundsPadding)?n:0,null!=(o=null!=(s=e.marginRight)?s:f?e.boundsPadding[1]:e.boundsPadding)?o:0,null!=(l=null!=(a=e.marginBottom)?a:f?null!=(d=e.boundsPadding[2])?d:e.boundsPadding[0]:e.boundsPadding)?l:0,null!=(h=null!=(u=e.marginLeft)?u:f?null!=(c=e.boundsPadding[3])?c:e.boundsPadding[1]:e.boundsPadding)?h:0];e.boundsPadding=y,super(e),this.cache=p}}class er extends ee.E{constructor(e){var t,i,r,n,s,o,a,d,l,u;e.src&&(e.image=e.src),"circle"===e.shape&&(e.cornerRadius=e.width/2);let c=(0,G.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(d=e.marginLeft)?d:c?null!=(l=e.boundsPadding[3])?l:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var en=i(13557);class es extends en.U{constructor(e){var t,i,r,n,s,o,a,d,l,u;let c=(0,G.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(d=e.marginLeft)?d:c?null!=(l=e.boundsPadding[3])?l:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var eo=i(28893);class ea extends eo.x{constructor(e){var t,i,r,n,s,o,a,d,l,u,c;e.textBaseline||(e.textBaseline="top");let h=(0,G.Z)(e.boundsPadding),p=[null!=(i=null!=(t=e.marginTop)?t:h?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:h?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:h?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(d=e.marginLeft)?d:h?null!=(l=e.boundsPadding[3])?l:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=p,e.fill=null!=(c=e.fill)?c:"#000",super(e)}getSize(e){this.AABBBounds.width()}}function ed(e,t=0){return{percent:e,delta:t}}var el=i(61261);class eu extends el.w{constructor(e){var t,i,r,n,s,o,a,d,l,u;let c=(0,G.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(d=e.marginLeft)?d:c?null!=(l=e.boundsPadding[3])?l:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var ec=i(75334);class eh extends ec.V{constructor(e){var t,i,r,n,s,o,a,d,l,u;let c=(0,G.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(d=e.marginLeft)?d:c?null!=(l=e.boundsPadding[3])?l:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}getSize(e){this.AABBBounds.width()}}class ep extends Y.ZA{constructor(e){var t,i,r,n,s,o,a,d,l,u;let c=(0,G.Z)(e.boundsPadding),h=[null!=(i=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?i:0,null!=(n=null!=(r=e.marginRight)?r:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(a=null!=(s=e.marginBottom)?s:c?null!=(o=e.boundsPadding[2])?o:e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(u=null!=(d=e.marginLeft)?d:c?null!=(l=e.boundsPadding[3])?l:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var ef=i(40778),ey=i(19909),em=i(23320),ev=i(98817),eb=i(5706),eg=i(70423),ew=i(86794),eN=i(41893),e_=i(16117),eI=i(74861),eS=i(24559);function eT(e,t,i){var r,n;let s=function(e){var t,i,r,n,s,o,a,d,l,u,c;let h,p,f,y,m={seqId:0},v={isPivotChart:!0};e.columnTree&&(!1!==e.indicatorsAsCol&&(f=(0,eN.VN)(e.columnTree,e.indicators)),h=new e_.KO(null!=(t=e.columnTree)?t:[],m)),e.rowTree&&(!1===e.indicatorsAsCol&&(y=(0,eN.VN)(e.rowTree,e.indicators)),p=new e_.KO(null!=(i=e.rowTree)?i:[],m));let b=(null==(r=p.dimensionKeys)?void 0:r.count)?p.dimensionKeys.valueArr():null!=(s=null==(n=e.rows)?void 0:n.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?s:[],g=(null==(o=h.dimensionKeys)?void 0:o.count)?h.dimensionKeys.valueArr():null!=(d=null==(a=e.columns)?void 0:a.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?d:[],w=null!=(u=null==(l=e.indicators)?void 0:l.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.indicatorKey),e),[]))?u:[];return v.collectValuesBy=function(e,t,i){var r,n,s,o,a,d,l,u,c,h,p,f,y,m,v,b,g,w,N,_,I,S,T;let O={};for(let x=0,E=null==(r=e.indicators)?void 0:r.length;x<E;x++)if("string"!=typeof e.indicators[x]&&e.indicators[x].chartSpec)if(!1===e.indicatorsAsCol){let r=e.indicators[x];if(O[r.indicatorKey]={by:i,range:!0,sumBy:!1!==(null==(n=r.chartSpec)?void 0:n.stack)&&t.concat(null==(s=r.chartSpec)?void 0:s.xField)},r.chartSpec.series)r.chartSpec.series.forEach(e=>{var n,s,o,a,d,l,u,c,h,p,f,y,m,v,b,g;let w="string"==typeof e.xField?e.xField:e.xField[0];O[w]={by:t,type:"horizontal"!==e.direction?"xField":void 0,range:"horizontal"===e.direction,sortBy:"horizontal"!==e.direction?null!=(a=null==(o=null==(s=null==(n=null==e?void 0:e.data)?void 0:n.fields)?void 0:s[w])?void 0:o.domain)?a:null==(c=null==(u=null==(l=null==(d=r.chartSpec)?void 0:d.data)?void 0:l.fields)?void 0:u[w])?void 0:c.domain:void 0};let N=e.yField;O[N]={by:i,range:"horizontal"!==e.direction,sumBy:!1!==e.stack&&t.concat(null==e?void 0:e.xField),sortBy:"horizontal"===e.direction?null!=(y=null==(f=null==(p=null==(h=null==e?void 0:e.data)?void 0:h.fields)?void 0:p[N])?void 0:f.domain)?y:null==(g=null==(b=null==(v=null==(m=r.chartSpec)?void 0:m.data)?void 0:v.fields)?void 0:b[N])?void 0:g.domain:void 0}});else{let n="string"==typeof r.chartSpec.xField?r.chartSpec.xField:r.chartSpec.xField[0];O[n]={by:t,type:"horizontal"!==r.chartSpec.direction?"xField":void 0,range:"horizontal"===r.chartSpec.direction,sortBy:"horizontal"!==r.chartSpec.direction?null==(l=null==(d=null==(a=null==(o=r.chartSpec)?void 0:o.data)?void 0:a.fields)?void 0:d[n])?void 0:l.domain:void 0};let s=r.chartSpec.yField;O[s]={by:i,range:"horizontal"!==e.indicators[x].chartSpec.direction,sumBy:!1!==r.chartSpec.stack&&t.concat(null==(u=r.chartSpec)?void 0:u.xField),sortBy:"horizontal"===r.chartSpec.direction?null==(f=null==(p=null==(h=null==(c=r.chartSpec)?void 0:c.data)?void 0:h.fields)?void 0:p[s])?void 0:f.domain:void 0}}}else{let r=e.indicators[x];if(O[r.indicatorKey]={by:t,range:!0,sumBy:!1!==(null==(y=r.chartSpec)?void 0:y.stack)&&i.concat(null==(m=r.chartSpec)?void 0:m.yField)},r.chartSpec.series)r.chartSpec.series.forEach(e=>{var n,s,o,a,d,l,u,c,h,p,f,y,m,v,b,g;let w="string"==typeof e.yField?e.yField:e.yField[0];O[w]={by:i,type:"horizontal"===e.direction?"yField":void 0,range:"horizontal"!==e.direction,sortBy:"horizontal"===e.direction?null!=(a=null==(o=null==(s=null==(n=null==e?void 0:e.data)?void 0:n.fields)?void 0:s[w])?void 0:o.domain)?a:null==(c=null==(u=null==(l=null==(d=r.chartSpec)?void 0:d.data)?void 0:l.fields)?void 0:u[w])?void 0:c.domain:void 0};let N=e.xField;O[N]={by:t,range:"horizontal"===e.direction,sumBy:!1!==e.stack&&i.concat(null==e?void 0:e.yField),sortBy:"horizontal"!==e.direction?null!=(y=null==(f=null==(p=null==(h=null==e?void 0:e.data)?void 0:h.fields)?void 0:p[N])?void 0:f.domain)?y:null==(g=null==(b=null==(v=null==(m=r.chartSpec)?void 0:m.data)?void 0:v.fields)?void 0:b[N])?void 0:g.domain:void 0}});else{let n="string"==typeof r.chartSpec.yField?r.chartSpec.yField:r.chartSpec.yField[0];O[n]={by:i,type:"horizontal"===r.chartSpec.direction?"yField":void 0,range:"horizontal"!==r.chartSpec.direction,sortBy:"horizontal"===r.chartSpec.direction?null==(w=null==(g=null==(b=null==(v=r.chartSpec)?void 0:v.data)?void 0:b.fields)?void 0:g[n])?void 0:w.domain:void 0};let s=r.chartSpec.xField;O[s]={by:t,range:"horizontal"===e.indicators[x].chartSpec.direction,sumBy:!1!==r.chartSpec.stack&&i.concat(null==(N=r.chartSpec)?void 0:N.yField),sortBy:"horizontal"!==r.chartSpec.direction?null==(T=null==(S=null==(I=null==(_=r.chartSpec)?void 0:_.data)?void 0:I.fields)?void 0:S[s])?void 0:T.domain:void 0}}}return O}(e,g,b),v.aggregationRules=function(e){var t;let i=[];return null==(t=e.indicators)||t.forEach(t=>{var r,n;if("string"==typeof t)i.push({indicatorKey:t,field:t,aggregationType:O.E.RECORD});else if(null==(r=t.chartSpec)?void 0:r.series){let r=[];null==(n=t.chartSpec)||n.series.forEach(t=>{let i=!1===e.indicatorsAsCol?t.yField:t.xField;-1===r.indexOf(i)&&r.push(i)}),i.push({indicatorKey:t.indicatorKey,field:r,aggregationType:O.E.RECORD})}else{let r=!1===e.indicatorsAsCol?t.chartSpec.yField:t.chartSpec.xField;i.push({indicatorKey:t.indicatorKey,field:null!=r?r:t.indicatorKey,aggregationType:O.E.RECORD})}}),i}(e),{dataset:new ew.q(v,b,g,w,e.indicators,null==(c=e.indicatorsAsCol)||c,e.records,void 0,void 0,f||e.columnTree,y||e.rowTree,!0),columnDimensionTree:h,rowDimensionTree:p,layoutNodeId:m}}(e),o=s.columnDimensionTree,a=s.rowDimensionTree,d=!1,l=!1;e.columnTree&&e.indicatorsAsCol&&!o.dimensionKeys.contain(eS.ek)&&(d=!0),e.rowTree&&(e.indicatorsAsCol||a.dimensionKeys.contain(eS.ek)||(l=!0));let{dataset:u,layoutNodeId:c}=s;e.columnTree&&!d||(o=new e_.KO(null!=(r=u.colHeaderTree)?r:[],c)),e.rowTree&&!l||(a=new e_.KO(null!=(n=u.rowHeaderTree)?n:[],c));let h=new eI.z({options:e,layoutNodeId:c,internalProps:e,isPivotChart:()=>!0,pivotChartAxes:[],_selectedDataItemsInChart:[],_getActiveChartInstance:()=>({updateState:()=>{}})},u,o,a);for(let e=0;e<h.colCount;e++)for(let r=0;r<h.rowCount;r++){if(h.isHeader(e,r))continue;let n=h.getCellHeaderPaths(e,r),s=n.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=n.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),a=u.getAggregator(h.indicatorsAsCol?o:o.slice(0,-1),h.indicatorsAsCol?s.slice(0,-1):s,h.getIndicatorKey(e,r)),d=function(e,t,i,r,n,s){if((0,G.Z)(e))for(let d=0;d<e.length;d++){var o,a;if(s?s(e[d],t):(o=e[d],a=t,JSON.stringify(o)===JSON.stringify(a)))return n.getCellHeaderPaths(i,r)}}(a.value?a.value():void 0,t,e,r,h,i);if(d)return d}}var eO=i(31003),ex=i(13384),eE=i(4954),eA=i(33835),eD=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i};function eB(e,t,...i){let r=t||{},{key:n,name:s,id:o,attribute:a,stateProxy:d,animation:l,timeline:u}=r,c=eD(r,["key","name","id","attribute","stateProxy","animation","timeline"]),h=e;(0,eE.Z)(e)&&(h=eA.i[e]);let p=[];i.length&&function e(t,i){if((0,ex.Z)(t))return t.forEach(t=>e(t,i));i.push(t)}(1===i.length?i[0]:i,p);let f="Group"===h.name?new h(a):h(t);if(function(e,t,i){let r,n=!1;switch(e.type){case"richtext":case"rich/image":break;case"rich/text":r=e.attribute||{},t[0]&&(r.text=t[0]);break;default:n=!0}n?(t.forEach(t=>{t&&e.add(t)}),Object.keys(i).forEach(t=>{let r=eO.Nv[t];r&&e.on(r,i[t])})):"richtext"===e.type&&(e.attribute.textConfig=t.map(e=>e.attribute).filter(e=>e))}(f,p,c),d&&(f.stateProxy=d),s&&(f.name=s),(0,ex.Z)(l)){let e=f.animate();u&&e.setTimeline(u),l.forEach(t=>{e[t[0]](...t.slice(1))})}return f}function ek(e){return new ec.V(e?e.attribute:{})}function eC(e){return new ey.J(e?e.attribute:{})}function eF(e){return new em.Y(e?e.attribute:{})}var eV=i(35613),eR=i(58482),eP=i(84561),eL=i(27676),eM=i(50668),eU=i(63730),eW=i(63182),ez=i(48702);(0,_.sTO)();let eq="1.22.5";function ej(){return C.U2()}function e$(){F.clearAll()}O.E;var eQ=i(62911),eZ=i(6231);let eJ=new Map;eJ.set("rspress/runtime",d),eJ.set("react",g),eJ.set("@visactor/vchart",w),eJ.set("@visactor/vseed",N),eJ.set("@visactor/vtable",y),eJ.set("@visactor/vquery",eQ),eJ.set("@visactor/vbi",eZ);let eG=function(e,t){if(!eJ.has(e))throw Error("Module "+e+" not found");let i=eJ.get(e);return t&&"object"==typeof i&&i.default||i};function eK(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function eY(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(i),!0).forEach(function(t){var r;r=i[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eK(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function eH(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r}function eX(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function e0(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?eX(Object(i),!0).forEach(function(t){var r;r=i[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eX(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function e1(e){return function t(){for(var i=this,r=arguments.length,n=Array(r),s=0;s<r;s++)n[s]=arguments[s];return n.length>=e.length?e.apply(this,n):function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return t.apply(i,[].concat(n,r))}}}function e2(e){return({}).toString.call(e).includes("Object")}function e4(e){return"function"==typeof e}var e3=e1(function(e,t){throw Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),e8=function(e,t){return e2(t)||e3("changeType"),Object.keys(t).some(function(t){return!Object.prototype.hasOwnProperty.call(e,t)})&&e3("changeField"),t},e6=function(e){e4(e)||e3("selectorType")},e5=function(e){e4(e)||e2(e)||e3("handlerType"),e2(e)&&Object.values(e).some(function(e){return!e4(e)})&&e3("handlersType")},e9=function(e){e||e3("initialIsRequired"),e2(e)||e3("initialType"),Object.keys(e).length||e3("initialContent")};function e7(e,t){return e4(t)?t(e.current):t}function te(e,t){return e.current=e0(e0({},e.current),t),t}function tt(e,t,i){return e4(t)?t(e.current):Object.keys(i).forEach(function(i){var r;return null==(r=t[i])?void 0:r.call(t,e.current[i])}),i}var ti={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},tr=(o=function(e,t){throw Error(e[t]||e.default)},function e(){for(var t=this,i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];return r.length>=o.length?o.apply(this,r):function(){for(var i=arguments.length,n=Array(i),s=0;s<i;s++)n[s]=arguments[s];return e.apply(t,[].concat(r,n))}})(ti);let tn=function(e){return(e||tr("configIsRequired"),({}).toString.call(e).includes("Object")||tr("configType"),e.urls)?(console.warn(ti.deprecation),{paths:{vs:e.urls.monacoBase}}):e},ts=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}};var to={type:"cancelation",msg:"operation is manually canceled"};let ta=function(e){var t=!1,i=new Promise(function(i,r){e.then(function(e){return t?r(to):i(e)}),e.catch(r)});return i.cancel=function(){return t=!0},i};var td=function(e){if(Array.isArray(e))return e}(a=({create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e9(e),e5(t);var i={current:e},r=e1(tt)(i,t),n=e1(te)(i),s=e1(e8)(e),o=e1(e7)(i);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return e6(e),e(i.current)},function(e){(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}})(r,n,s,o)(e)}]}}).create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}))||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],r=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(i.push(o.value),i.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}return i}}(a,2)||function(e,t){if(e){if("string"==typeof e)return eH(e,2);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return eH(e,t)}}(a,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),tl=td[0],tu=td[1];function tc(e){return document.body.appendChild(e)}function th(e){var t,i,r=tl(function(e){return{config:e.config,reject:e.reject}}),n=(t="".concat(r.config.paths.vs,"/loader.js"),i=document.createElement("script"),t&&(i.src=t),i);return n.onload=function(){return e()},n.onerror=r.reject,n}function tp(){var e=tl(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(t){tf(t),e.resolve(t)},function(t){e.reject(t)})}function tf(e){tl().monaco||tu({monaco:e})}var ty=new Promise(function(e,t){return tu({resolve:e,reject:t})});let tm=function(){var e=tl(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(tu({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),ta(ty);if(window.monaco&&window.monaco.editor)return tf(window.monaco),e.resolve(window.monaco),ta(ty);ts(tc,th)(tp)}return ta(ty)};var tv={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},tb={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},tg=function({children:e}){return b.createElement("div",{style:tb},e)},tw=(0,b.memo)(function({width:e,height:t,isEditorReady:i,loading:r,_ref:n,className:s,wrapperProps:o}){return b.createElement("section",{style:{...tv.wrapper,width:e,height:t},...o},!i&&b.createElement(tg,null,r),b.createElement("div",{ref:n,style:{...tv.fullWidth,...!i&&tv.hide},className:s}))}),tN=function(e){(0,b.useEffect)(e,[])},t_=function(e,t,i=!0){let r=(0,b.useRef)(!0);(0,b.useEffect)(r.current||!i?()=>{r.current=!1}:e,t)};function tI(){}function tS(e,t,i,r){var n,s,o,a,d,l;return n=e,s=r,n.editor.getModel(tT(n,s))||(o=e,a=t,d=i,l=r,o.editor.createModel(a,d,l?tT(o,l):void 0))}function tT(e,t){return e.Uri.parse(t)}(0,b.memo)(function({original:e,modified:t,language:i,originalLanguage:r,modifiedLanguage:n,originalModelPath:s,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:d=!1,theme:l="light",loading:u="Loading...",options:c={},height:h="100%",width:p="100%",className:f,wrapperProps:y={},beforeMount:m=tI,onMount:v=tI}){let[g,w]=(0,b.useState)(!1),[N,_]=(0,b.useState)(!0),I=(0,b.useRef)(null),S=(0,b.useRef)(null),T=(0,b.useRef)(null),O=(0,b.useRef)(v),x=(0,b.useRef)(m),E=(0,b.useRef)(!1);tN(()=>{let e=tm();return e.then(e=>(S.current=e)&&_(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>{let t;return I.current?(t=I.current?.getModel(),void(a||t?.original?.dispose(),d||t?.modified?.dispose(),I.current?.dispose())):e.cancel()}}),t_(()=>{if(I.current&&S.current){let t=I.current.getOriginalEditor(),n=tS(S.current,e||"",r||i||"text",s||"");n!==t.getModel()&&t.setModel(n)}},[s],g),t_(()=>{if(I.current&&S.current){let e=I.current.getModifiedEditor(),r=tS(S.current,t||"",n||i||"text",o||"");r!==e.getModel()&&e.setModel(r)}},[o],g),t_(()=>{let e=I.current.getModifiedEditor();e.getOption(S.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[t],g),t_(()=>{I.current?.getModel()?.original.setValue(e||"")},[e],g),t_(()=>{let{original:e,modified:t}=I.current.getModel();S.current.editor.setModelLanguage(e,r||i||"text"),S.current.editor.setModelLanguage(t,n||i||"text")},[i,r,n],g),t_(()=>{S.current?.editor.setTheme(l)},[l],g),t_(()=>{I.current?.updateOptions(c)},[c],g);let A=(0,b.useCallback)(()=>{if(!S.current)return;x.current(S.current);let a=tS(S.current,e||"",r||i||"text",s||""),d=tS(S.current,t||"",n||i||"text",o||"");I.current?.setModel({original:a,modified:d})},[i,t,n,e,r,s,o]),D=(0,b.useCallback)(()=>{!E.current&&T.current&&(I.current=S.current.editor.createDiffEditor(T.current,{automaticLayout:!0,...c}),A(),S.current?.editor.setTheme(l),w(!0),E.current=!0)},[c,l,A]);return(0,b.useEffect)(()=>{g&&O.current(I.current,S.current)},[g]),(0,b.useEffect)(()=>{N||g||D()},[N,g,D]),b.createElement(tw,{width:p,height:h,isEditorReady:g,loading:u,_ref:T,className:f,wrapperProps:y})});var tO=function(e){let t=(0,b.useRef)();return(0,b.useEffect)(()=>{t.current=e},[e]),t.current},tx=new Map,tE=(0,b.memo)(function({defaultValue:e,defaultLanguage:t,defaultPath:i,value:r,language:n,path:s,theme:o="light",line:a,loading:d="Loading...",options:l={},overrideServices:u={},saveViewState:c=!0,keepCurrentModel:h=!1,width:p="100%",height:f="100%",className:y,wrapperProps:m={},beforeMount:v=tI,onMount:g=tI,onChange:w,onValidate:N=tI}){let[_,I]=(0,b.useState)(!1),[S,T]=(0,b.useState)(!0),O=(0,b.useRef)(null),x=(0,b.useRef)(null),E=(0,b.useRef)(null),A=(0,b.useRef)(g),D=(0,b.useRef)(v),B=(0,b.useRef)(),k=(0,b.useRef)(r),C=tO(s),F=(0,b.useRef)(!1),V=(0,b.useRef)(!1);tN(()=>{let e=tm();return e.then(e=>(O.current=e)&&T(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>x.current?void(B.current?.dispose(),h?c&&tx.set(s,x.current.saveViewState()):x.current.getModel()?.dispose(),x.current.dispose()):e.cancel()}),t_(()=>{let o=tS(O.current,e||r||"",t||n||"",s||i||"");o!==x.current?.getModel()&&(c&&tx.set(C,x.current?.saveViewState()),x.current?.setModel(o),c&&x.current?.restoreViewState(tx.get(s)))},[s],_),t_(()=>{x.current?.updateOptions(l)},[l],_),t_(()=>{x.current&&void 0!==r&&(x.current.getOption(O.current.editor.EditorOption.readOnly)?x.current.setValue(r):r!==x.current.getValue()&&(V.current=!0,x.current.executeEdits("",[{range:x.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),x.current.pushUndoStop(),V.current=!1))},[r],_),t_(()=>{let e=x.current?.getModel();e&&n&&O.current?.editor.setModelLanguage(e,n)},[n],_),t_(()=>{void 0!==a&&x.current?.revealLine(a)},[a],_),t_(()=>{O.current?.editor.setTheme(o)},[o],_);let R=(0,b.useCallback)(()=>{if(!(!E.current||!O.current)&&!F.current){D.current(O.current);let d=s||i,h=tS(O.current,r||e||"",t||n||"",d||"");x.current=O.current?.editor.create(E.current,{model:h,automaticLayout:!0,...l},u),c&&x.current.restoreViewState(tx.get(d)),O.current.editor.setTheme(o),void 0!==a&&x.current.revealLine(a),I(!0),F.current=!0}},[e,t,i,r,n,s,l,u,c,o,a]);return(0,b.useEffect)(()=>{_&&A.current(x.current,O.current)},[_]),(0,b.useEffect)(()=>{S||_||R()},[S,_,R]),k.current=r,(0,b.useEffect)(()=>{_&&w&&(B.current?.dispose(),B.current=x.current?.onDidChangeModelContent(e=>{V.current||w(x.current.getValue(),e)}))},[_,w]),(0,b.useEffect)(()=>{if(_){let e=O.current.editor.onDidChangeMarkers(e=>{let t=x.current.getModel()?.uri;if(t&&e.find(e=>e.path===t.path)){let e=O.current.editor.getModelMarkers({resource:t});N?.(e)}});return()=>{e?.dispose()}}return()=>{}},[_,N]),b.createElement(tw,{width:p,height:f,isEditorReady:_,loading:d,_ref:E,className:y,wrapperProps:m})});function tA(e){let{options:t,className:i="",theme:r,...n}=e||{},s=(0,v.e7)(),o=(0,b.useMemo)(()=>r||(s?"vs-dark":"light"),[r,s]);return(0,m.jsx)("div",{className:`rspress-playground-editor ${i}`,children:(0,m.jsx)(tE,{...n,theme:o,options:{minimap:{enabled:!0,autohide:!0},fontSize:14,lineNumbersMinChars:7,scrollBeyondLastLine:!1,automaticLayout:!0,wordBasedSuggestions:!0,quickSuggestions:!0,scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8},scrollPredominantAxis:!1,...t}})})}function tD(e,t){return{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:"string"==typeof e?{type:"Identifier",name:e}:e,init:t}],kind:"const"}}function tB(e){return{type:"Identifier",name:e}}function tk(e,t){return{type:"ObjectProperty",key:tB(e),computed:!1,shorthand:e===t,value:tB(t)}}function tC(e,t){return{type:"CallExpression",callee:{type:"Identifier",name:"__get_import"},arguments:[{type:"StringLiteral",value:e},{type:"BooleanLiteral",value:!!t}]}}async function tF(){let e=await fetch("https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.20/babel.min.js"),t=await e.text(),i=Function("exports","module","require",`with(exports, module, require) {${t}}`),r={};return i(r,{exports:r},()=>{}),r}n=(r=tn({paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs"}})).monaco,s=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)i=s[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(r,["monaco"]),tu(function(e){return{config:function e(t,i){return Object.keys(i).forEach(function(r){i[r]instanceof Object&&t[r]&&Object.assign(i[r],e(t[r],i[r]))}),eY(eY({},t),i)}(e.config,s),monaco:n}});let tV=null;async function tR(){if(window.Babel)return window.Babel;if(tV)return tV;tV=tF();try{let e=await tV;return window.Babel=e,e}catch(e){throw tV=null,e}}class tP extends b.Component{static getDerivedStateFromError(e){return{error:e,comp:null}}waitCompile(e){this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.timer=null,this.doCompile(e)},800)}async doCompile(e){let{language:t,getImport:i}=this.props,r=await tR();try{let n=[[r.availablePresets.react],[r.availablePresets.env,{modules:"commonjs"}]];("tsx"===t||"ts"===t)&&n.unshift([r.availablePresets.typescript,{allExtensions:!0,isTSX:"tsx"===t}]);let s=r.transform(e,{sourceType:"module",sourceMaps:"inline",presets:n,plugins:[{pre(){this.hasReactImported=!1},visitor:{ImportDeclaration(e){let t=e.node.source.value,i=[],r=[];for(let n of e.node.specifiers)"React"===n.local.name&&(this.hasReactImported=!0),"ImportDefaultSpecifier"===n.type&&i.push(tD(n.local.name,tC(t,!0))),"ImportNamespaceSpecifier"===n.type&&i.push(tD(n.local.name,tC(t))),"ImportSpecifier"===n.type&&("name"in n.imported&&n.imported.name!==n.local.name?r.push([n.imported.name,n.local.name]):r.push(n.local.name));r.length>0&&i.push(tD({type:"ObjectPattern",properties:r.map(e=>Array.isArray(e)?tk(e[0],e[1]):tk(e,e))},tC(t))),e.replaceWithMultiple(i)}},post(e){this.hasReactImported||e.ast.program.body.unshift(tD("React",tC("react",!0)))}}]});if(e!==this.props.code||!s||!s.code)return;let o={};if(Function("__get_import","exports",s.code)(i,o),o.default)return void this.setState({error:void 0,comp:b.createElement(o.default)});this.setState({error:Error("No default export")})}catch(t){if(e!==this.props.code)return;console.error(t),this.setState({error:t})}}componentDidCatch(e,t){console.error(e),console.error(t)}componentDidMount(){this.doCompile(this.props.code)}componentDidUpdate(e){e.code!==this.props.code&&this.waitCompile(this.props.code)}render(){let{className:e="",code:t,language:i,getImport:r,...n}=this.props,{error:s,comp:o}=this.state;return(0,m.jsxs)("div",{className:`rspress-playground-runner ${e}`,...n,children:[o,s&&(0,m.jsx)("pre",{className:"rspress-playground-error",children:s.message})]})}constructor(e){var t;super(e),(t="timer")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null,this.state={error:void 0,comp:null},this.doCompile=this.doCompile.bind(this),this.waitCompile=this.waitCompile.bind(this)}}function tL(e){let{code:t,language:i,className:r="",direction:n,editorPosition:s,renderChildren:o,...a}=e,d=function(e){let{page:t}=(0,v.Vi)(),{frontmatter:i={}}=t,{playgroundDirection:r}=i;return e.direction?e.direction:r?r:"horizontal"}(e),[l,u]=(0,b.useState)(t),c=(0,b.useCallback)(e=>{u(e||"")},[]),h="horizontal"===d&&"left"===s,p=["rspress-playground",`rspress-playground-${d}`,`rspress-playground-reverse-${h?"y":"n"}`,r].join(" ");return(0,m.jsxs)("div",{className:p,...a,children:[(0,m.jsx)(tP,{language:i,code:l,getImport:eG}),(0,m.jsx)(tA,{value:l,onChange:c,language:"tsx"===i||"ts"===i?"typescript":"javascript",beforeMount:e=>{e.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0,noSuggestionDiagnostics:!0})}}),null==o?void 0:o(e,l,d)]})}},2371:function(e,t,i){let r,n,s,o,a,d,l,u,c,h,p,f,y,m,v,b,g,w;function N(e,t,i,r){return new(i||(i=Promise))(function(n,s){function o(e){try{d(r.next(e))}catch(e){s(e)}}function a(e){try{d(r.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}d((r=r.apply(e,t||[])).next())})}i.d(t,{kw:()=>sQ,Dn:()=>oo,ak:()=>s2});function _(e){return this instanceof _?(this.v=e,this):new _(e)}function I(e,t,i){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(t){return Promise.resolve(t).then(e,l)}}),r[Symbol.asyncIterator]=function(){return this},r;function o(e,t){n[e]&&(r[e]=function(t){return new Promise(function(i,r){s.push([e,t,i,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{var i;(i=n[e](t)).value instanceof _?Promise.resolve(i.value.v).then(d,l):u(s[0][2],i)}catch(e){u(s[0][3],e)}}function d(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function S(e){var t,i;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,n){t[r]=e[r]?function(t){return(i=!i)?{value:_(e[r](t)),done:!1}:n?n(t):t}:n}}function T(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise(function(r,n){var s,o,a;s=r,o=n,a=(t=e[i](t)).done,Promise.resolve(t.value).then(function(e){s({value:e,done:a})},o)})}}}(n8=nj||(nj={}))[n8.NONE=0]="NONE",n8[n8.Null=1]="Null",n8[n8.Int=2]="Int",n8[n8.Float=3]="Float",n8[n8.Binary=4]="Binary",n8[n8.Utf8=5]="Utf8",n8[n8.Bool=6]="Bool",n8[n8.Decimal=7]="Decimal",n8[n8.Date=8]="Date",n8[n8.Time=9]="Time",n8[n8.Timestamp=10]="Timestamp",n8[n8.Interval=11]="Interval",n8[n8.List=12]="List",n8[n8.Struct=13]="Struct",n8[n8.Union=14]="Union",n8[n8.FixedSizeBinary=15]="FixedSizeBinary",n8[n8.FixedSizeList=16]="FixedSizeList",n8[n8.Map=17]="Map",n8[n8.Duration=18]="Duration",n8[n8.LargeBinary=19]="LargeBinary",n8[n8.LargeUtf8=20]="LargeUtf8",n8[n8.Dictionary=-1]="Dictionary",n8[n8.Int8=-2]="Int8",n8[n8.Int16=-3]="Int16",n8[n8.Int32=-4]="Int32",n8[n8.Int64=-5]="Int64",n8[n8.Uint8=-6]="Uint8",n8[n8.Uint16=-7]="Uint16",n8[n8.Uint32=-8]="Uint32",n8[n8.Uint64=-9]="Uint64",n8[n8.Float16=-10]="Float16",n8[n8.Float32=-11]="Float32",n8[n8.Float64=-12]="Float64",n8[n8.DateDay=-13]="DateDay",n8[n8.DateMillisecond=-14]="DateMillisecond",n8[n8.TimestampSecond=-15]="TimestampSecond",n8[n8.TimestampMillisecond=-16]="TimestampMillisecond",n8[n8.TimestampMicrosecond=-17]="TimestampMicrosecond",n8[n8.TimestampNanosecond=-18]="TimestampNanosecond",n8[n8.TimeSecond=-19]="TimeSecond",n8[n8.TimeMillisecond=-20]="TimeMillisecond",n8[n8.TimeMicrosecond=-21]="TimeMicrosecond",n8[n8.TimeNanosecond=-22]="TimeNanosecond",n8[n8.DenseUnion=-23]="DenseUnion",n8[n8.SparseUnion=-24]="SparseUnion",n8[n8.IntervalDayTime=-25]="IntervalDayTime",n8[n8.IntervalYearMonth=-26]="IntervalYearMonth",n8[n8.DurationSecond=-27]="DurationSecond",n8[n8.DurationMillisecond=-28]="DurationMillisecond",n8[n8.DurationMicrosecond=-29]="DurationMicrosecond",n8[n8.DurationNanosecond=-30]="DurationNanosecond",(n6=n$||(n$={}))[n6.OFFSET=0]="OFFSET",n6[n6.DATA=1]="DATA",n6[n6.VALIDITY=2]="VALIDITY",n6[n6.TYPE=3]="TYPE";let O=void 0;function x(e){if(null===e)return"null";if(e===O)return"undefined";switch(typeof e){case"number":case"bigint":return`${e}`;case"string":return`"${e}"`}return"function"==typeof e[Symbol.toPrimitive]?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(e=>x(e))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(e,t)=>"bigint"==typeof t?`${t}`:t)}let E=new TextDecoder("utf-8"),A=e=>E.decode(e),D=new TextEncoder,B=e=>D.encode(e),k=e=>"number"==typeof e,C=e=>"boolean"==typeof e,F=e=>"function"==typeof e,V=e=>null!=e&&Object(e)===e,R=e=>V(e)&&F(e.then),P=e=>V(e)&&F(e[Symbol.iterator]),L=e=>V(e)&&F(e[Symbol.asyncIterator]),M=e=>V(e)&&V(e.schema),U=e=>V(e)&&"done"in e&&"value"in e,W=e=>V(e)&&F(e.stat)&&k(e.fd),z=e=>V(e)&&$(e.body),q=e=>"_getDOMStream"in e&&"_getNodeStream"in e,j=e=>V(e)&&F(e.abort)&&F(e.getWriter)&&!q(e),$=e=>V(e)&&F(e.cancel)&&F(e.getReader)&&!q(e),Q=e=>V(e)&&F(e.end)&&F(e.write)&&C(e.writable)&&!q(e),Z=e=>V(e)&&F(e.read)&&F(e.pipe)&&C(e.readable)&&!q(e),J=e=>V(e)&&F(e.clear)&&F(e.bytes)&&F(e.position)&&F(e.setPosition)&&F(e.capacity)&&F(e.getBufferIdentifier)&&F(e.createLong),G="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function K(e,t,i=0,r=t.byteLength){let n=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,n),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,n));return s.set(o,i),e}function Y(e,t){let i,r,n,s=function(e){let t,i,r,n,s=e[0]?[e[0]]:[];for(let o,a,d=0,l=0,u=e.length;++d<u;){if(o=s[l],a=e[d],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset||({byteOffset:t,byteLength:r}=o,{byteOffset:i,byteLength:n}=a,t+r<i||i+n<t)){a&&(s[++l]=a);continue}s[l]=new Uint8Array(o.buffer,t,i-t+n)}return s}(e),o=s.reduce((e,t)=>e+t.byteLength,0),a=0,d=-1,l=Math.min(t||Number.POSITIVE_INFINITY,o);for(let e=s.length;++d<e;){if(r=(i=s[d]).subarray(0,Math.min(i.length,l-a)),l<=a+r.length){r.length<i.length?s[d]=i.subarray(r.length):r.length===i.length&&d++,n?K(n,r,a):n=r;break}K(n||(n=new Uint8Array(l)),r,a),a+=r.length}return[n||new Uint8Array(0),s.slice(d),o-(n?n.byteLength:0)]}function H(e,t){let i=U(t)?t.value:t;return i instanceof e?e===Uint8Array?new e(i.buffer,i.byteOffset,i.byteLength):i:i?("string"==typeof i&&(i=B(i)),i instanceof ArrayBuffer||i instanceof G)?new e(i):J(i)?H(e,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new e(0):new e(i.buffer,i.byteOffset,i.byteLength/e.BYTES_PER_ELEMENT):e.from(i):new e(0)}let X=e=>H(Int32Array,e),ee=e=>H(BigInt64Array,e),et=e=>H(Uint8Array,e),ei=e=>(e.next(),e),er=e=>(function*(e,t){let i=function*(e){yield e},r="string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof G?i(t):P(t)?t:i(t);return yield*ei(function*(t){let i=null;do i=t.next((yield H(e,i)));while(!i.done)}(r[Symbol.iterator]())),new e})(Uint8Array,e),en=e=>(function e(t,i){return I(this,arguments,function*(){if(R(i))return yield _((yield _((yield*S(T(e(t,(yield _(i)))))))));let r=function(e){return I(this,arguments,function*(){yield yield _((yield _(e)))})},n="string"==typeof i||ArrayBuffer.isView(i)||i instanceof ArrayBuffer||i instanceof G?r(i):P(i)?function(e){return I(this,arguments,function*(){yield _((yield*S(T(ei(function*(e){let t=null;do t=e.next((yield null==t?void 0:t.value));while(!t.done)}(e[Symbol.iterator]()))))))})}(i):L(i)?i:r(i);return yield _((yield*S(T(ei(function(e){return I(this,arguments,function*(){let i=null;do i=yield _(e.next((yield yield _(H(t,i)))));while(!i.done)})}(n[Symbol.asyncIterator]())))))),yield _(new t)})})(Uint8Array,e);function es(e,t,i){if(0!==e){i=i.slice(0,t);for(let t=-1,r=i.length;++t<r;)i[t]+=e}return i.subarray(0,t)}function eo(e){if("bigint"==typeof e&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw TypeError(`${e} is not safe to convert to a number.`);return Number(e)}function ea(e,t){return eo(e/t)+eo(e%t)/eo(t)}let ed=Symbol.for("isArrowBigNum");function el(e,...t){return 0===t.length?Object.setPrototypeOf(H(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}function eu(...e){return el.apply(this,e)}function ec(...e){return el.apply(this,e)}function eh(...e){return el.apply(this,e)}el.prototype[ed]=!0,el.prototype.toJSON=function(){return`"${ey(this)}"`},el.prototype.valueOf=function(e){return ef(this,e)},el.prototype.toString=function(){return ey(this)},el.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return ef(this);case"string":break;case"default":var t;return t=this,8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:ey(t)}return ey(this)},Object.setPrototypeOf(eu.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(ec.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(eh.prototype,Object.create(Uint32Array.prototype)),Object.assign(eu.prototype,el.prototype,{constructor:eu,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(ec.prototype,el.prototype,{constructor:ec,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(eh.prototype,el.prototype,{constructor:eh,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});let ep=BigInt(0x100000000)*BigInt(0x100000000)-BigInt(1);function ef(e,t){let{buffer:i,byteOffset:r,byteLength:n,signed:s}=e,o=new BigUint64Array(i,r,n/8),a=s&&o.at(-1)&BigInt(1)<<BigInt(63),d=BigInt(0),l=0;if(a){for(let e of o)d|=(e^ep)*(BigInt(1)<<BigInt(64*l++));d*=BigInt(-1),d-=BigInt(1)}else for(let e of o)d|=e*(BigInt(1)<<BigInt(64*l++));if("number"==typeof t){let e=BigInt(Math.pow(10,t)),i=d/e,r=d%e;return eo(i)+eo(r)/eo(e)}return eo(d)}function ey(e){if(8===e.byteLength){let t=new e.BigIntArray(e.buffer,e.byteOffset,1);return`${t[0]}`}if(!e.signed)return em(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return em(e);t=t.slice();let i=1;for(let e=0;e<t.length;e++){let r=t[e],n=~r+i;t[e]=n,i&=0===r}let r=em(t);return`-${r}`}function em(e){let t="",i=new Uint32Array(2),r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),n=new Uint32Array((r=new Uint16Array(r).reverse()).buffer),s=-1,o=r.length-1;do{for(i[0]=r[s=0];s<o;)r[s++]=i[1]=i[0]/10,i[0]=(i[0]-10*i[1]<<16)+r[s];r[s]=i[1]=i[0]/10,i[0]=i[0]-10*i[1],t=`${i[0]}${t}`}while(n[0]||n[1]||n[2]||n[3]);return null!=t?t:"0"}class ev{static new(e,t){switch(t){case!0:return new eu(e);case!1:return new ec(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new eu(e)}return 16===e.byteLength?new eh(e):new ec(e)}static signed(e){return new eu(e)}static unsigned(e){return new ec(e)}static decimal(e){return new eh(e)}constructor(e,t){return ev.new(e,t)}}(n5=nQ||(nQ={}))[n5.HALF=0]="HALF",n5[n5.SINGLE=1]="SINGLE",n5[n5.DOUBLE=2]="DOUBLE",(n9=nZ||(nZ={}))[n9.SECOND=0]="SECOND",n9[n9.MILLISECOND=1]="MILLISECOND",n9[n9.MICROSECOND=2]="MICROSECOND",n9[n9.NANOSECOND=3]="NANOSECOND",(n7=nJ||(nJ={}))[n7.DAY=0]="DAY",n7[n7.MILLISECOND=1]="MILLISECOND",(se=nG||(nG={}))[se.YEAR_MONTH=0]="YEAR_MONTH",se[se.DAY_TIME=1]="DAY_TIME",se[se.MONTH_DAY_NANO=2]="MONTH_DAY_NANO",(st=nK||(nK={}))[st.Sparse=0]="Sparse",st[st.Dense=1]="Dense";class eb{static isNull(e){return(null==e?void 0:e.typeId)===nj.Null}static isInt(e){return(null==e?void 0:e.typeId)===nj.Int}static isFloat(e){return(null==e?void 0:e.typeId)===nj.Float}static isBinary(e){return(null==e?void 0:e.typeId)===nj.Binary}static isLargeBinary(e){return(null==e?void 0:e.typeId)===nj.LargeBinary}static isUtf8(e){return(null==e?void 0:e.typeId)===nj.Utf8}static isLargeUtf8(e){return(null==e?void 0:e.typeId)===nj.LargeUtf8}static isBool(e){return(null==e?void 0:e.typeId)===nj.Bool}static isDecimal(e){return(null==e?void 0:e.typeId)===nj.Decimal}static isDate(e){return(null==e?void 0:e.typeId)===nj.Date}static isTime(e){return(null==e?void 0:e.typeId)===nj.Time}static isTimestamp(e){return(null==e?void 0:e.typeId)===nj.Timestamp}static isInterval(e){return(null==e?void 0:e.typeId)===nj.Interval}static isDuration(e){return(null==e?void 0:e.typeId)===nj.Duration}static isList(e){return(null==e?void 0:e.typeId)===nj.List}static isStruct(e){return(null==e?void 0:e.typeId)===nj.Struct}static isUnion(e){return(null==e?void 0:e.typeId)===nj.Union}static isFixedSizeBinary(e){return(null==e?void 0:e.typeId)===nj.FixedSizeBinary}static isFixedSizeList(e){return(null==e?void 0:e.typeId)===nj.FixedSizeList}static isMap(e){return(null==e?void 0:e.typeId)===nj.Map}static isDictionary(e){return(null==e?void 0:e.typeId)===nj.Dictionary}static isDenseUnion(e){return eb.isUnion(e)&&e.mode===nK.Dense}static isSparseUnion(e){return eb.isUnion(e)&&e.mode===nK.Sparse}constructor(e){this.typeId=e}}eb[Symbol.toStringTag]=((si=eb.prototype).children=null,si.ArrayType=Array,si.OffsetArrayType=Int32Array,si[Symbol.toStringTag]="DataType");class eg extends eb{constructor(){super(nj.Null)}toString(){return"Null"}}eg[Symbol.toStringTag]=eg.prototype[Symbol.toStringTag]="Null";class ew extends eb{constructor(e,t){super(nj.Int),this.isSigned=e,this.bitWidth=t}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}ew[Symbol.toStringTag]=((sr=ew.prototype).isSigned=null,sr.bitWidth=null,sr[Symbol.toStringTag]="Int");class eN extends ew{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty((class extends ew{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}).prototype,"ArrayType",{value:Int8Array}),Object.defineProperty((class extends ew{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}).prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(eN.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty((class extends ew{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}).prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty((class extends ew{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}).prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty((class extends ew{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}).prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty((class extends ew{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}).prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty((class extends ew{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}).prototype,"ArrayType",{value:BigUint64Array});class e_ extends eb{constructor(e){super(nj.Float),this.precision=e}get ArrayType(){switch(this.precision){case nQ.HALF:return Uint16Array;case nQ.SINGLE:return Float32Array;case nQ.DOUBLE:return Float64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}e_[Symbol.toStringTag]=((sn=e_.prototype).precision=null,sn[Symbol.toStringTag]="Float"),Object.defineProperty((class extends e_{constructor(){super(nQ.HALF)}}).prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty((class extends e_{constructor(){super(nQ.SINGLE)}}).prototype,"ArrayType",{value:Float32Array}),Object.defineProperty((class extends e_{constructor(){super(nQ.DOUBLE)}}).prototype,"ArrayType",{value:Float64Array});class eI extends eb{constructor(){super(nj.Binary)}toString(){return"Binary"}}eI[Symbol.toStringTag]=((ss=eI.prototype).ArrayType=Uint8Array,ss[Symbol.toStringTag]="Binary");class eS extends eb{constructor(){super(nj.LargeBinary)}toString(){return"LargeBinary"}}eS[Symbol.toStringTag]=((so=eS.prototype).ArrayType=Uint8Array,so.OffsetArrayType=BigInt64Array,so[Symbol.toStringTag]="LargeBinary");class eT extends eb{constructor(){super(nj.Utf8)}toString(){return"Utf8"}}eT[Symbol.toStringTag]=((sa=eT.prototype).ArrayType=Uint8Array,sa[Symbol.toStringTag]="Utf8");class eO extends eb{constructor(){super(nj.LargeUtf8)}toString(){return"LargeUtf8"}}eO[Symbol.toStringTag]=((sd=eO.prototype).ArrayType=Uint8Array,sd.OffsetArrayType=BigInt64Array,sd[Symbol.toStringTag]="LargeUtf8");class ex extends eb{constructor(){super(nj.Bool)}toString(){return"Bool"}}ex[Symbol.toStringTag]=((sl=ex.prototype).ArrayType=Uint8Array,sl[Symbol.toStringTag]="Bool");class eE extends eb{constructor(e,t,i=128){super(nj.Decimal),this.scale=e,this.precision=t,this.bitWidth=i}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}eE[Symbol.toStringTag]=((su=eE.prototype).scale=null,su.precision=null,su.ArrayType=Uint32Array,su[Symbol.toStringTag]="Decimal");class eA extends eb{constructor(e){super(nj.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${nJ[this.unit]}>`}get ArrayType(){return this.unit===nJ.DAY?Int32Array:BigInt64Array}}eA[Symbol.toStringTag]=((sc=eA.prototype).unit=null,sc[Symbol.toStringTag]="Date");class eD extends eb{constructor(e,t){super(nj.Time),this.unit=e,this.bitWidth=t}toString(){return`Time${this.bitWidth}<${nZ[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}eD[Symbol.toStringTag]=((sh=eD.prototype).unit=null,sh.bitWidth=null,sh[Symbol.toStringTag]="Time");class eB extends eb{constructor(e,t){super(nj.Timestamp),this.unit=e,this.timezone=t}toString(){return`Timestamp<${nZ[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}eB[Symbol.toStringTag]=((sp=eB.prototype).unit=null,sp.timezone=null,sp.ArrayType=BigInt64Array,sp[Symbol.toStringTag]="Timestamp");class ek extends eb{constructor(e){super(nj.Interval),this.unit=e}toString(){return`Interval<${nG[this.unit]}>`}}ek[Symbol.toStringTag]=((sf=ek.prototype).unit=null,sf.ArrayType=Int32Array,sf[Symbol.toStringTag]="Interval");class eC extends eb{constructor(e){super(nj.Duration),this.unit=e}toString(){return`Duration<${nZ[this.unit]}>`}}eC[Symbol.toStringTag]=((sy=eC.prototype).unit=null,sy.ArrayType=BigInt64Array,sy[Symbol.toStringTag]="Duration");class eF extends eb{constructor(e){super(nj.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}eF[Symbol.toStringTag]=((sm=eF.prototype).children=null,sm[Symbol.toStringTag]="List");class eV extends eb{constructor(e){super(nj.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}eV[Symbol.toStringTag]=((sv=eV.prototype).children=null,sv[Symbol.toStringTag]="Struct");class eR extends eb{constructor(e,t,i){super(nj.Union),this.mode=e,this.children=i,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce((e,t,i)=>(e[t]=i)&&e||e,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}eR[Symbol.toStringTag]=((sb=eR.prototype).mode=null,sb.typeIds=null,sb.children=null,sb.typeIdToChildIndex=null,sb.ArrayType=Int8Array,sb[Symbol.toStringTag]="Union");class eP extends eb{constructor(e){super(nj.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}eP[Symbol.toStringTag]=((sg=eP.prototype).byteWidth=null,sg.ArrayType=Uint8Array,sg[Symbol.toStringTag]="FixedSizeBinary");class eL extends eb{constructor(e,t){super(nj.FixedSizeList),this.listSize=e,this.children=[t]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}eL[Symbol.toStringTag]=((sw=eL.prototype).children=null,sw.listSize=null,sw[Symbol.toStringTag]="FixedSizeList");class eM extends eb{constructor(e,t=!1){var i,r,n;if(super(nj.Map),this.children=[e],this.keysSorted=t,e&&(e.name="entries",null==(i=null==e?void 0:e.type)?void 0:i.children)){let t=null==(r=null==e?void 0:e.type)?void 0:r.children[0];t&&(t.name="key");let i=null==(n=null==e?void 0:e.type)?void 0:n.children[1];i&&(i.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}eM[Symbol.toStringTag]=((sN=eM.prototype).children=null,sN.keysSorted=null,sN[Symbol.toStringTag]="Map_");let eU=(n=-1,()=>++n);class eW extends eb{constructor(e,t,i,r){super(nj.Dictionary),this.indices=t,this.dictionary=e,this.isOrdered=r||!1,this.id=null==i?eU():eo(i)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function ez(e){switch(e.typeId){case nj.Decimal:return e.bitWidth/32;case nj.Interval:return 1+e.unit;case nj.FixedSizeList:return e.listSize;case nj.FixedSizeBinary:return e.byteWidth;default:return 1}}eW[Symbol.toStringTag]=((s_=eW.prototype).id=null,s_.indices=null,s_.isOrdered=null,s_.dictionary=null,s_[Symbol.toStringTag]="Dictionary");class eq{visitMany(e,...t){return e.map((e,i)=>this.visit(e,...t.map(e=>e[i])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,t=!0){return function(e,t,i=!0){return"number"==typeof t?ej(e,t,i):"string"==typeof t&&t in nj?ej(e,nj[t],i):t&&t instanceof eb?ej(e,e$(t),i):(null==t?void 0:t.type)&&t.type instanceof eb?ej(e,e$(t.type),i):ej(e,nj.NONE,i)}(this,e,t)}getVisitFnByTypeId(e,t=!0){return ej(this,e,t)}visitNull(e,...t){return null}visitBool(e,...t){return null}visitInt(e,...t){return null}visitFloat(e,...t){return null}visitUtf8(e,...t){return null}visitLargeUtf8(e,...t){return null}visitBinary(e,...t){return null}visitLargeBinary(e,...t){return null}visitFixedSizeBinary(e,...t){return null}visitDate(e,...t){return null}visitTimestamp(e,...t){return null}visitTime(e,...t){return null}visitDecimal(e,...t){return null}visitList(e,...t){return null}visitStruct(e,...t){return null}visitUnion(e,...t){return null}visitDictionary(e,...t){return null}visitInterval(e,...t){return null}visitDuration(e,...t){return null}visitFixedSizeList(e,...t){return null}visitMap(e,...t){return null}}function ej(e,t,i=!0){let r=null;switch(t){case nj.Null:r=e.visitNull;break;case nj.Bool:r=e.visitBool;break;case nj.Int:r=e.visitInt;break;case nj.Int8:r=e.visitInt8||e.visitInt;break;case nj.Int16:r=e.visitInt16||e.visitInt;break;case nj.Int32:r=e.visitInt32||e.visitInt;break;case nj.Int64:r=e.visitInt64||e.visitInt;break;case nj.Uint8:r=e.visitUint8||e.visitInt;break;case nj.Uint16:r=e.visitUint16||e.visitInt;break;case nj.Uint32:r=e.visitUint32||e.visitInt;break;case nj.Uint64:r=e.visitUint64||e.visitInt;break;case nj.Float:r=e.visitFloat;break;case nj.Float16:r=e.visitFloat16||e.visitFloat;break;case nj.Float32:r=e.visitFloat32||e.visitFloat;break;case nj.Float64:r=e.visitFloat64||e.visitFloat;break;case nj.Utf8:r=e.visitUtf8;break;case nj.LargeUtf8:r=e.visitLargeUtf8;break;case nj.Binary:r=e.visitBinary;break;case nj.LargeBinary:r=e.visitLargeBinary;break;case nj.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case nj.Date:r=e.visitDate;break;case nj.DateDay:r=e.visitDateDay||e.visitDate;break;case nj.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case nj.Timestamp:r=e.visitTimestamp;break;case nj.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case nj.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case nj.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case nj.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case nj.Time:r=e.visitTime;break;case nj.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case nj.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case nj.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case nj.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case nj.Decimal:r=e.visitDecimal;break;case nj.List:r=e.visitList;break;case nj.Struct:r=e.visitStruct;break;case nj.Union:r=e.visitUnion;break;case nj.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case nj.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case nj.Dictionary:r=e.visitDictionary;break;case nj.Interval:r=e.visitInterval;break;case nj.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case nj.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case nj.Duration:r=e.visitDuration;break;case nj.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case nj.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case nj.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case nj.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case nj.FixedSizeList:r=e.visitFixedSizeList;break;case nj.Map:r=e.visitMap}if("function"==typeof r)return r;if(!i)return()=>null;throw Error(`Unrecognized type '${nj[t]}'`)}function e$(e){switch(e.typeId){case nj.Null:return nj.Null;case nj.Int:{let{bitWidth:t,isSigned:i}=e;switch(t){case 8:return i?nj.Int8:nj.Uint8;case 16:return i?nj.Int16:nj.Uint16;case 32:return i?nj.Int32:nj.Uint32;case 64:return i?nj.Int64:nj.Uint64}return nj.Int}case nj.Float:switch(e.precision){case nQ.HALF:return nj.Float16;case nQ.SINGLE:return nj.Float32;case nQ.DOUBLE:return nj.Float64}return nj.Float;case nj.Binary:return nj.Binary;case nj.LargeBinary:return nj.LargeBinary;case nj.Utf8:return nj.Utf8;case nj.LargeUtf8:return nj.LargeUtf8;case nj.Bool:return nj.Bool;case nj.Decimal:return nj.Decimal;case nj.Time:switch(e.unit){case nZ.SECOND:return nj.TimeSecond;case nZ.MILLISECOND:return nj.TimeMillisecond;case nZ.MICROSECOND:return nj.TimeMicrosecond;case nZ.NANOSECOND:return nj.TimeNanosecond}return nj.Time;case nj.Timestamp:switch(e.unit){case nZ.SECOND:return nj.TimestampSecond;case nZ.MILLISECOND:return nj.TimestampMillisecond;case nZ.MICROSECOND:return nj.TimestampMicrosecond;case nZ.NANOSECOND:return nj.TimestampNanosecond}return nj.Timestamp;case nj.Date:switch(e.unit){case nJ.DAY:return nj.DateDay;case nJ.MILLISECOND:return nj.DateMillisecond}return nj.Date;case nj.Interval:switch(e.unit){case nG.DAY_TIME:return nj.IntervalDayTime;case nG.YEAR_MONTH:return nj.IntervalYearMonth}return nj.Interval;case nj.Duration:switch(e.unit){case nZ.SECOND:return nj.DurationSecond;case nZ.MILLISECOND:return nj.DurationMillisecond;case nZ.MICROSECOND:return nj.DurationMicrosecond;case nZ.NANOSECOND:return nj.DurationNanosecond}return nj.Duration;case nj.Map:return nj.Map;case nj.List:return nj.List;case nj.Struct:return nj.Struct;case nj.Union:switch(e.mode){case nK.Dense:return nj.DenseUnion;case nK.Sparse:return nj.SparseUnion}return nj.Union;case nj.FixedSizeBinary:return nj.FixedSizeBinary;case nj.FixedSizeList:return nj.FixedSizeList;case nj.Dictionary:return nj.Dictionary}throw Error(`Unrecognized type '${nj[e.typeId]}'`)}eq.prototype.visitInt8=null,eq.prototype.visitInt16=null,eq.prototype.visitInt32=null,eq.prototype.visitInt64=null,eq.prototype.visitUint8=null,eq.prototype.visitUint16=null,eq.prototype.visitUint32=null,eq.prototype.visitUint64=null,eq.prototype.visitFloat16=null,eq.prototype.visitFloat32=null,eq.prototype.visitFloat64=null,eq.prototype.visitDateDay=null,eq.prototype.visitDateMillisecond=null,eq.prototype.visitTimestampSecond=null,eq.prototype.visitTimestampMillisecond=null,eq.prototype.visitTimestampMicrosecond=null,eq.prototype.visitTimestampNanosecond=null,eq.prototype.visitTimeSecond=null,eq.prototype.visitTimeMillisecond=null,eq.prototype.visitTimeMicrosecond=null,eq.prototype.visitTimeNanosecond=null,eq.prototype.visitDenseUnion=null,eq.prototype.visitSparseUnion=null,eq.prototype.visitIntervalDayTime=null,eq.prototype.visitIntervalYearMonth=null,eq.prototype.visitDuration=null,eq.prototype.visitDurationSecond=null,eq.prototype.visitDurationMillisecond=null,eq.prototype.visitDurationMicrosecond=null,eq.prototype.visitDurationNanosecond=null;let eQ=new Float64Array(1),eZ=new Uint32Array(eQ.buffer);function eJ(e){let t=(31744&e)>>10,i=(1023&e)/1024,r=Math.pow(-1,(32768&e)>>15);switch(t){case 31:return r*(i?Number.NaN:1/0);case 0:return r*(i?6103515625e-14*i:0)}return r*Math.pow(2,t-15)*(1+i)}class eG extends eq{}function eK(e){return(t,i,r)=>{if(t.setValid(i,null!=r))return e(t,i,r)}}let eY=(e,t,i)=>{e[t]=Math.floor(i/864e5)},eH=(e,t,i,r)=>{if(i+1<t.length){let n=eo(t[i]),s=eo(t[i+1]);e.set(r.subarray(0,s-n),n)}},eX=({values:e},t,i)=>{e[t]=i},e0=({values:e},t,i)=>{e[t]=i},e1=({values:e},t,i)=>{e[t]=function(e){if(e!=e)return 32256;eQ[0]=e;let t=(0x80000000&eZ[1])>>16&65535,i=0x7ff00000&eZ[1],r=0;return i>=0x40f00000?eZ[0]>0?i=31744:(i=(0x7c000000&i)>>16,r=(1048575&eZ[1])>>10):i<=0x3f000000?(r=1048576+((r=1048576+(1048575&eZ[1]))<<(i>>20)-998)>>21,i=0):(i=i-0x3f000000>>10,r=(1048575&eZ[1])+512>>10),t|i|65535&r}(i)},e2=({values:e},t,i)=>{eY(e,t,i.valueOf())},e4=({values:e},t,i)=>{e[t]=BigInt(i)},e3=({values:e,valueOffsets:t},i,r)=>eH(e,t,i,r),e8=({values:e,valueOffsets:t},i,r)=>eH(e,t,i,B(r)),e6=({values:e},t,i)=>{e[t]=BigInt(i/1e3)},e5=({values:e},t,i)=>{e[t]=BigInt(i)},e9=({values:e},t,i)=>{e[t]=BigInt(1e3*i)},e7=({values:e},t,i)=>{e[t]=BigInt(1e6*i)},te=({values:e},t,i)=>{e[t]=i},tt=({values:e},t,i)=>{e[t]=i},ti=({values:e},t,i)=>{e[t]=i},tr=({values:e},t,i)=>{e[t]=i},tn=(e,t)=>(i,r,n,s)=>r&&i(r,e,t[s]),ts=(e,t)=>(i,r,n,s)=>r&&i(r,e,t.get(s)),to=(e,t)=>(i,r,n,s)=>r&&i(r,e,t.get(n.name)),ta=(e,t)=>(i,r,n,s)=>r&&i(r,e,t[n.name]),td=(e,t,i)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];tm.visit(n,e.valueOffsets[t],i)},tl=(e,t,i)=>{let r=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[r];tm.visit(n,t,i)},tu=({values:e},t,i)=>{e.set(i.subarray(0,2),2*t)},tc=({values:e},t,i)=>{e[t]=12*i[0]+i[1]%12},th=({values:e},t,i)=>{e[t]=i},tp=({values:e},t,i)=>{e[t]=i},tf=({values:e},t,i)=>{e[t]=i},ty=({values:e},t,i)=>{e[t]=i};eG.prototype.visitBool=eK(({offset:e,values:t},i,r)=>{let n=e+i;r?t[n>>3]|=1<<n%8:t[n>>3]&=~(1<<n%8)}),eG.prototype.visitInt=eK(eX),eG.prototype.visitInt8=eK(eX),eG.prototype.visitInt16=eK(eX),eG.prototype.visitInt32=eK(eX),eG.prototype.visitInt64=eK(eX),eG.prototype.visitUint8=eK(eX),eG.prototype.visitUint16=eK(eX),eG.prototype.visitUint32=eK(eX),eG.prototype.visitUint64=eK(eX),eG.prototype.visitFloat=eK((e,t,i)=>{switch(e.type.precision){case nQ.HALF:return e1(e,t,i);case nQ.SINGLE:case nQ.DOUBLE:return e0(e,t,i)}}),eG.prototype.visitFloat16=eK(e1),eG.prototype.visitFloat32=eK(e0),eG.prototype.visitFloat64=eK(e0),eG.prototype.visitUtf8=eK(e8),eG.prototype.visitLargeUtf8=eK(e8),eG.prototype.visitBinary=eK(e3),eG.prototype.visitLargeBinary=eK(e3),eG.prototype.visitFixedSizeBinary=eK(({stride:e,values:t},i,r)=>{t.set(r.subarray(0,e),e*i)}),eG.prototype.visitDate=eK((e,t,i)=>{e.type.unit===nJ.DAY?e2(e,t,i):e4(e,t,i)}),eG.prototype.visitDateDay=eK(e2),eG.prototype.visitDateMillisecond=eK(e4),eG.prototype.visitTimestamp=eK((e,t,i)=>{switch(e.type.unit){case nZ.SECOND:return e6(e,t,i);case nZ.MILLISECOND:return e5(e,t,i);case nZ.MICROSECOND:return e9(e,t,i);case nZ.NANOSECOND:return e7(e,t,i)}}),eG.prototype.visitTimestampSecond=eK(e6),eG.prototype.visitTimestampMillisecond=eK(e5),eG.prototype.visitTimestampMicrosecond=eK(e9),eG.prototype.visitTimestampNanosecond=eK(e7),eG.prototype.visitTime=eK((e,t,i)=>{switch(e.type.unit){case nZ.SECOND:return te(e,t,i);case nZ.MILLISECOND:return tt(e,t,i);case nZ.MICROSECOND:return ti(e,t,i);case nZ.NANOSECOND:return tr(e,t,i)}}),eG.prototype.visitTimeSecond=eK(te),eG.prototype.visitTimeMillisecond=eK(tt),eG.prototype.visitTimeMicrosecond=eK(ti),eG.prototype.visitTimeNanosecond=eK(tr),eG.prototype.visitDecimal=eK(({values:e,stride:t},i,r)=>{e.set(r.subarray(0,t),t*i)}),eG.prototype.visitList=eK((e,t,i)=>{let r=e.children[0],n=e.valueOffsets,s=tm.getVisitFn(r);if(Array.isArray(i))for(let e=-1,o=n[t],a=n[t+1];o<a;)s(r,o++,i[++e]);else for(let e=-1,o=n[t],a=n[t+1];o<a;)s(r,o++,i.get(++e))}),eG.prototype.visitStruct=eK((e,t,i)=>{let r=e.type.children.map(e=>tm.getVisitFn(e.type)),n=i instanceof Map?to(t,i):i instanceof iT?ts(t,i):Array.isArray(i)?tn(t,i):ta(t,i);e.type.children.forEach((t,i)=>n(r[i],e.children[i],t,i))}),eG.prototype.visitUnion=eK((e,t,i)=>{e.type.mode===nK.Dense?td(e,t,i):tl(e,t,i)}),eG.prototype.visitDenseUnion=eK(td),eG.prototype.visitSparseUnion=eK(tl),eG.prototype.visitDictionary=eK((e,t,i)=>{var r;null==(r=e.dictionary)||r.set(e.values[t],i)}),eG.prototype.visitInterval=eK((e,t,i)=>{e.type.unit===nG.DAY_TIME?tu(e,t,i):tc(e,t,i)}),eG.prototype.visitIntervalDayTime=eK(tu),eG.prototype.visitIntervalYearMonth=eK(tc),eG.prototype.visitDuration=eK((e,t,i)=>{switch(e.type.unit){case nZ.SECOND:return th(e,t,i);case nZ.MILLISECOND:return tp(e,t,i);case nZ.MICROSECOND:return tf(e,t,i);case nZ.NANOSECOND:return ty(e,t,i)}}),eG.prototype.visitDurationSecond=eK(th),eG.prototype.visitDurationMillisecond=eK(tp),eG.prototype.visitDurationMicrosecond=eK(tf),eG.prototype.visitDurationNanosecond=eK(ty),eG.prototype.visitFixedSizeList=eK((e,t,i)=>{let{stride:r}=e,n=e.children[0],s=tm.getVisitFn(n);if(Array.isArray(i))for(let e=-1,o=t*r;++e<r;)s(n,o+e,i[e]);else for(let e=-1,o=t*r;++e<r;)s(n,o+e,i.get(e))}),eG.prototype.visitMap=eK((e,t,i)=>{let r=e.children[0],{valueOffsets:n}=e,s=tm.getVisitFn(r),{[t]:o,[t+1]:a}=n;for(let e of i instanceof Map?i.entries():Object.entries(i))if(s(r,o,e),++o>=a)break});let tm=new eG,tv=Symbol.for("parent"),tb=Symbol.for("rowIndex");class tg{constructor(e,t){return this[tv]=e,this[tb]=t,new Proxy(this,new tN)}toArray(){return Object.values(this.toJSON())}toJSON(){let e=this[tb],t=this[tv],i=t.type.children,r={};for(let n=-1,s=i.length;++n<s;)r[i[n].name]=tJ.visit(t.children[n],e);return r}toString(){return`{${[...this].map(([e,t])=>`${x(e)}: ${x(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new tw(this[tv],this[tb])}}class tw{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){let e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,tJ.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(tg.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[tv]:{writable:!0,enumerable:!1,configurable:!1,value:null},[tb]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class tN{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[tv].type.children.map(e=>e.name)}has(e,t){return -1!==e[tv].type.children.findIndex(e=>e.name===t)}getOwnPropertyDescriptor(e,t){if(-1!==e[tv].type.children.findIndex(e=>e.name===t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];let i=e[tv].type.children.findIndex(e=>e.name===t);if(-1!==i){let r=tJ.visit(e[tv].children[i],e[tb]);return Reflect.set(e,t,r),r}}set(e,t,i){let r=e[tv].type.children.findIndex(e=>e.name===t);return -1!==r?(tm.visit(e[tv].children[r],e[tb],i),Reflect.set(e,t,i)):(!!Reflect.has(e,t)||"symbol"==typeof t)&&Reflect.set(e,t,i)}}class t_ extends eq{}function tI(e){return(t,i)=>t.getValid(i)?e(t,i):null}let tS=(e,t)=>864e5*e[t],tT=(e,t,i)=>{if(i+1>=t.length)return null;let r=eo(t[i]),n=eo(t[i+1]);return e.subarray(r,n)},tO=({values:e},t)=>tS(e,t),tx=({values:e},t)=>eo(e[t]),tE=({stride:e,values:t},i)=>t[e*i],tA=({values:e},t)=>e[t],tD=({values:e,valueOffsets:t},i)=>tT(e,t,i),tB=({values:e,valueOffsets:t},i)=>{let r=tT(e,t,i);return null!==r?A(r):null},tk=({values:e},t)=>1e3*eo(e[t]),tC=({values:e},t)=>eo(e[t]),tF=({values:e},t)=>ea(e[t],BigInt(1e3)),tV=({values:e},t)=>ea(e[t],BigInt(1e6)),tR=({values:e},t)=>e[t],tP=({values:e},t)=>e[t],tL=({values:e},t)=>e[t],tM=({values:e},t)=>e[t],tU=(e,t)=>{let i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];return tJ.visit(r,e.valueOffsets[t])},tW=(e,t)=>{let i=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[i];return tJ.visit(r,t)},tz=({values:e},t)=>e.subarray(2*t,2*(t+1)),tq=({values:e},t)=>{let i=e[t],r=new Int32Array(2);return r[0]=Math.trunc(i/12),r[1]=Math.trunc(i%12),r},tj=({values:e},t)=>e[t],t$=({values:e},t)=>e[t],tQ=({values:e},t)=>e[t],tZ=({values:e},t)=>e[t];t_.prototype.visitNull=tI((e,t)=>null),t_.prototype.visitBool=tI(({offset:e,values:t},i)=>{let r=e+i;return(t[r>>3]&1<<r%8)!=0}),t_.prototype.visitInt=tI(({values:e},t)=>e[t]),t_.prototype.visitInt8=tI(tE),t_.prototype.visitInt16=tI(tE),t_.prototype.visitInt32=tI(tE),t_.prototype.visitInt64=tI(tA),t_.prototype.visitUint8=tI(tE),t_.prototype.visitUint16=tI(tE),t_.prototype.visitUint32=tI(tE),t_.prototype.visitUint64=tI(tA),t_.prototype.visitFloat=tI(({type:e,values:t},i)=>e.precision!==nQ.HALF?t[i]:eJ(t[i])),t_.prototype.visitFloat16=tI(({stride:e,values:t},i)=>eJ(t[e*i])),t_.prototype.visitFloat32=tI(tE),t_.prototype.visitFloat64=tI(tE),t_.prototype.visitUtf8=tI(tB),t_.prototype.visitLargeUtf8=tI(tB),t_.prototype.visitBinary=tI(tD),t_.prototype.visitLargeBinary=tI(tD),t_.prototype.visitFixedSizeBinary=tI(({stride:e,values:t},i)=>t.subarray(e*i,e*(i+1))),t_.prototype.visitDate=tI((e,t)=>e.type.unit===nJ.DAY?tO(e,t):tx(e,t)),t_.prototype.visitDateDay=tI(tO),t_.prototype.visitDateMillisecond=tI(tx),t_.prototype.visitTimestamp=tI((e,t)=>{switch(e.type.unit){case nZ.SECOND:return tk(e,t);case nZ.MILLISECOND:return tC(e,t);case nZ.MICROSECOND:return tF(e,t);case nZ.NANOSECOND:return tV(e,t)}}),t_.prototype.visitTimestampSecond=tI(tk),t_.prototype.visitTimestampMillisecond=tI(tC),t_.prototype.visitTimestampMicrosecond=tI(tF),t_.prototype.visitTimestampNanosecond=tI(tV),t_.prototype.visitTime=tI((e,t)=>{switch(e.type.unit){case nZ.SECOND:return tR(e,t);case nZ.MILLISECOND:return tP(e,t);case nZ.MICROSECOND:return tL(e,t);case nZ.NANOSECOND:return tM(e,t)}}),t_.prototype.visitTimeSecond=tI(tR),t_.prototype.visitTimeMillisecond=tI(tP),t_.prototype.visitTimeMicrosecond=tI(tL),t_.prototype.visitTimeNanosecond=tI(tM),t_.prototype.visitDecimal=tI(({values:e,stride:t},i)=>ev.decimal(e.subarray(t*i,t*(i+1)))),t_.prototype.visitList=tI((e,t)=>{let{valueOffsets:i,stride:r,children:n}=e,{[t*r]:s,[t*r+1]:o}=i;return new iT([n[0].slice(s,o-s)])}),t_.prototype.visitStruct=tI((e,t)=>new tg(e,t)),t_.prototype.visitUnion=tI((e,t)=>e.type.mode===nK.Dense?tU(e,t):tW(e,t)),t_.prototype.visitDenseUnion=tI(tU),t_.prototype.visitSparseUnion=tI(tW),t_.prototype.visitDictionary=tI((e,t)=>{var i;return null==(i=e.dictionary)?void 0:i.get(e.values[t])}),t_.prototype.visitInterval=tI((e,t)=>e.type.unit===nG.DAY_TIME?tz(e,t):tq(e,t)),t_.prototype.visitIntervalDayTime=tI(tz),t_.prototype.visitIntervalYearMonth=tI(tq),t_.prototype.visitDuration=tI((e,t)=>{switch(e.type.unit){case nZ.SECOND:return tj(e,t);case nZ.MILLISECOND:return t$(e,t);case nZ.MICROSECOND:return tQ(e,t);case nZ.NANOSECOND:return tZ(e,t)}}),t_.prototype.visitDurationSecond=tI(tj),t_.prototype.visitDurationMillisecond=tI(t$),t_.prototype.visitDurationMicrosecond=tI(tQ),t_.prototype.visitDurationNanosecond=tI(tZ),t_.prototype.visitFixedSizeList=tI((e,t)=>{let{stride:i,children:r}=e;return new iT([r[0].slice(t*i,i)])}),t_.prototype.visitMap=tI((e,t)=>{let{valueOffsets:i,children:r}=e,{[t]:n,[t+1]:s}=i;return new tX(r[0].slice(n,s-n))});let tJ=new t_,tG=Symbol.for("keys"),tK=Symbol.for("vals"),tY=Symbol.for("kKeysAsStrings"),tH=Symbol.for("_kKeysAsStrings");class tX{constructor(e){return this[tG]=new iT([e.children[0]]).memoize(),this[tK]=e.children[1],new Proxy(this,new t1)}get[tY](){return this[tH]||(this[tH]=Array.from(this[tG].toArray(),String))}[Symbol.iterator](){return new t0(this[tG],this[tK])}get size(){return this[tG].length}toArray(){return Object.values(this.toJSON())}toJSON(){let e=this[tG],t=this[tK],i={};for(let r=-1,n=e.length;++r<n;)i[e.get(r)]=tJ.visit(t,r);return i}toString(){return`{${[...this].map(([e,t])=>`${x(e)}: ${x(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class t0{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){let e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),tJ.visit(this.vals,e)]})}}class t1{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[tY]}has(e,t){return e[tY].includes(t)}getOwnPropertyDescriptor(e,t){if(-1!==e[tY].indexOf(t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];let i=e[tY].indexOf(t);if(-1!==i){let r=tJ.visit(Reflect.get(e,tK),i);return Reflect.set(e,t,r),r}}set(e,t,i){let r=e[tY].indexOf(t);return -1!==r?(tm.visit(Reflect.get(e,tK),r,i),Reflect.set(e,t,i)):!!Reflect.has(e,t)&&Reflect.set(e,t,i)}}function t2(e,t,i,n){let{length:s=0}=e,o="number"!=typeof t?0:t,a="number"!=typeof i?s:i;return o<0&&(o=(o%s+s)%s),a<0&&(a=(a%s+s)%s),a<o&&(r=o,o=a,a=r),a>s&&(a=s),n?n(e,o,a):[o,a]}Object.defineProperties(tX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[tG]:{writable:!0,enumerable:!1,configurable:!1,value:null},[tK]:{writable:!0,enumerable:!1,configurable:!1,value:null},[tH]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let t4=(e,t)=>e<0?t+e:e,t3=e=>e!=e;function t8(e){if("object"!=typeof e||null===e)return t3(e)?t3:t=>t===e;if(e instanceof Date){let t=e.valueOf();return e=>e instanceof Date&&e.valueOf()===t}return ArrayBuffer.isView(e)?t=>!!t&&function(e,t){let i=0,r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[i]!==t[i])return!1;while(++i<r);return!0}(e,t):e instanceof Map?function(e){let t=-1,i=[];for(let r of e.values())i[++t]=t8(r);return t6(i)}(e):Array.isArray(e)?function(e){let t=[];for(let i=-1,r=e.length;++i<r;)t[i]=t8(e[i]);return t6(t)}(e):e instanceof iT?function(e){let t=[];for(let i=-1,r=e.length;++i<r;)t[i]=t8(e.get(i));return t6(t)}(e):function(e,t=!1){let i=Object.keys(e);if(!t&&0===i.length)return()=>!1;let r=[];for(let t=-1,n=i.length;++t<n;)r[t]=t8(e[i[t]]);return t6(r,i)}(e,!0)}function t6(e,t){return i=>{if(!i||"object"!=typeof i)return!1;switch(i.constructor){case Array:var r=e,n=i;let s=r.length;if(n.length!==s)return!1;for(let e=-1;++e<s;)if(!r[e](n[e]))return!1;return!0;case Map:return t5(e,i,i.keys());case tX:case tg:case Object:case void 0:return t5(e,i,t||Object.keys(i))}return i instanceof iT&&function(e,t){let i=e.length;if(t.length!==i)return!1;for(let r=-1;++r<i;)if(!e[r](t.get(r)))return!1;return!0}(e,i)}}function t5(e,t,i){let r=i[Symbol.iterator](),n=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator](),o=0,a=e.length,d=s.next(),l=r.next(),u=n.next();for(;o<a&&!l.done&&!u.done&&!d.done&&l.value===u.value&&e[o](d.value);++o,l=r.next(),u=n.next(),d=s.next());return o===a&&!!l.done&&!!u.done&&!!d.done||(r.return&&r.return(),n.return&&n.return(),s.return&&s.return(),!1)}class t9{constructor(e=0,t){this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){let e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function t7(e){return e.reduce((e,t)=>e+t.nullCount,0)}function ie(e){return e.reduce((e,t,i)=>(e[i+1]=e[i]+t.length,e),new Uint32Array(e.length+1))}function it(e,t,i,r){let n=[];for(let s=-1,o=e.length;++s<o;){let o=e[s],a=t[s],{length:d}=o;if(a>=r)break;if(i>=a+d)continue;if(a>=i&&a+d<=r){n.push(o);continue}let l=Math.max(0,i-a),u=Math.min(r-a,d);n.push(o.slice(l,u-l))}return 0===n.length&&n.push(e[0].slice(0,0)),n}function ii(e,t,i,r){let n=0,s=0,o=t.length-1;do{if(n>=o-1)return i<t[o]?r(e,n,i-t[n]):null;i<t[s=n+Math.trunc((o-n)*.5)]?o=s:n=s}while(n<o)}function ir(e,t){return e.getValid(t)}function is(e){function t(t,i,r){return e(t[i],r)}return function(e){return ii(this.data,this._offsets,e,t)}}function io(e){let t;function i(i,r,n){return e(i[r],n,t)}return function(e,r){let n=this.data;t=r;let s=ii(n,this._offsets,e,i);return t=void 0,s}}function ia(e){let t;function i(i,r,n){let s=n,o=0,a=0;for(let n=r-1,d=i.length;++n<d;){let r=i[n];if(~(o=e(r,t,s)))return a+o;s=0,a+=r.length}return -1}return function(e,r){t=e;let n=this.data,s="number"!=typeof r?i(n,0,0):ii(n,this._offsets,r,i);return t=void 0,s}}function id(e,t,i,r){return(i&1<<r)!=0}function il(e,t,i,r){return(i&1<<r)>>r}function iu(e,t,i){let r=i.byteLength+7&-8;if(e>0||i.byteLength<r){let n=new Uint8Array(r);return n.set(e%8==0?i.subarray(e>>3):ic(new ih(i,e,t,null,id)).subarray(0,r)),n}return i}function ic(e){let t=[],i=0,r=0,n=0;for(let s of e)s&&(n|=1<<r),8==++r&&(t[i++]=n,n=r=0);(0===i||r>0)&&(t[i++]=n);let s=new Uint8Array(t.length+7&-8);return s.set(t),s}class ih{constructor(e,t,i,r,n){this.bytes=e,this.length=i,this.context=r,this.get=n,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function ip(e){let t=Math.trunc(e);return t-=t>>>1&0x55555555,((t=(0x33333333&t)+(t>>>2&0x33333333))+(t>>>4)&0xf0f0f0f)*0x1010101>>>24}class iy extends eq{}function im(e,t,i){if(void 0===t)return -1;if(null===t)switch(e.typeId){case nj.Union:case nj.Dictionary:break;default:let{nullBitmap:r}=e;if(!r||e.nullCount<=0)return -1;let n=0;for(let t of new ih(r,e.offset+(i||0),e.length,r,id)){if(!t)return n;++n}return -1}let s=tJ.getVisitFn(e),o=t8(t);for(let t=(i||0)-1,r=e.length;++t<r;)if(o(s(e,t)))return t;return -1}function iv(e,t,i){let r=tJ.getVisitFn(e),n=t8(t);for(let t=(i||0)-1,s=e.length;++t<s;)if(n(r(e,t)))return t;return -1}iy.prototype.visitNull=function(e,t){return null===t&&e.length>0?0:-1},iy.prototype.visitBool=im,iy.prototype.visitInt=im,iy.prototype.visitInt8=im,iy.prototype.visitInt16=im,iy.prototype.visitInt32=im,iy.prototype.visitInt64=im,iy.prototype.visitUint8=im,iy.prototype.visitUint16=im,iy.prototype.visitUint32=im,iy.prototype.visitUint64=im,iy.prototype.visitFloat=im,iy.prototype.visitFloat16=im,iy.prototype.visitFloat32=im,iy.prototype.visitFloat64=im,iy.prototype.visitUtf8=im,iy.prototype.visitLargeUtf8=im,iy.prototype.visitBinary=im,iy.prototype.visitLargeBinary=im,iy.prototype.visitFixedSizeBinary=im,iy.prototype.visitDate=im,iy.prototype.visitDateDay=im,iy.prototype.visitDateMillisecond=im,iy.prototype.visitTimestamp=im,iy.prototype.visitTimestampSecond=im,iy.prototype.visitTimestampMillisecond=im,iy.prototype.visitTimestampMicrosecond=im,iy.prototype.visitTimestampNanosecond=im,iy.prototype.visitTime=im,iy.prototype.visitTimeSecond=im,iy.prototype.visitTimeMillisecond=im,iy.prototype.visitTimeMicrosecond=im,iy.prototype.visitTimeNanosecond=im,iy.prototype.visitDecimal=im,iy.prototype.visitList=im,iy.prototype.visitStruct=im,iy.prototype.visitUnion=im,iy.prototype.visitDenseUnion=iv,iy.prototype.visitSparseUnion=iv,iy.prototype.visitDictionary=im,iy.prototype.visitInterval=im,iy.prototype.visitIntervalDayTime=im,iy.prototype.visitIntervalYearMonth=im,iy.prototype.visitDuration=im,iy.prototype.visitDurationSecond=im,iy.prototype.visitDurationMillisecond=im,iy.prototype.visitDurationMicrosecond=im,iy.prototype.visitDurationNanosecond=im,iy.prototype.visitFixedSizeList=im,iy.prototype.visitMap=im;let ib=new iy;class ig extends eq{}function iw(e){let{type:t}=e;if(0===e.nullCount&&1===e.stride&&(eb.isInt(t)&&64!==t.bitWidth||eb.isTime(t)&&64!==t.bitWidth||eb.isFloat(t)&&t.precision!==nQ.HALF))return new t9(e.data.length,t=>{let i=e.data[t];return i.values.subarray(0,i.length)[Symbol.iterator]()});let i=0;return new t9(e.data.length,t=>{let r=e.data[t].length,n=e.slice(i,i+r);return i+=r,new iN(n)})}class iN{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}ig.prototype.visitNull=iw,ig.prototype.visitBool=iw,ig.prototype.visitInt=iw,ig.prototype.visitInt8=iw,ig.prototype.visitInt16=iw,ig.prototype.visitInt32=iw,ig.prototype.visitInt64=iw,ig.prototype.visitUint8=iw,ig.prototype.visitUint16=iw,ig.prototype.visitUint32=iw,ig.prototype.visitUint64=iw,ig.prototype.visitFloat=iw,ig.prototype.visitFloat16=iw,ig.prototype.visitFloat32=iw,ig.prototype.visitFloat64=iw,ig.prototype.visitUtf8=iw,ig.prototype.visitLargeUtf8=iw,ig.prototype.visitBinary=iw,ig.prototype.visitLargeBinary=iw,ig.prototype.visitFixedSizeBinary=iw,ig.prototype.visitDate=iw,ig.prototype.visitDateDay=iw,ig.prototype.visitDateMillisecond=iw,ig.prototype.visitTimestamp=iw,ig.prototype.visitTimestampSecond=iw,ig.prototype.visitTimestampMillisecond=iw,ig.prototype.visitTimestampMicrosecond=iw,ig.prototype.visitTimestampNanosecond=iw,ig.prototype.visitTime=iw,ig.prototype.visitTimeSecond=iw,ig.prototype.visitTimeMillisecond=iw,ig.prototype.visitTimeMicrosecond=iw,ig.prototype.visitTimeNanosecond=iw,ig.prototype.visitDecimal=iw,ig.prototype.visitList=iw,ig.prototype.visitStruct=iw,ig.prototype.visitUnion=iw,ig.prototype.visitDenseUnion=iw,ig.prototype.visitSparseUnion=iw,ig.prototype.visitDictionary=iw,ig.prototype.visitInterval=iw,ig.prototype.visitIntervalDayTime=iw,ig.prototype.visitIntervalYearMonth=iw,ig.prototype.visitDuration=iw,ig.prototype.visitDurationSecond=iw,ig.prototype.visitDurationMillisecond=iw,ig.prototype.visitDurationMicrosecond=iw,ig.prototype.visitDurationNanosecond=iw,ig.prototype.visitFixedSizeList=iw,ig.prototype.visitMap=iw;let i_=new ig,iI={},iS={};class iT{constructor(e){var t,i,r;let n=e[0]instanceof iT?e.flatMap(e=>e.data):e;if(0===n.length||n.some(e=>!(e instanceof ix)))throw TypeError("Vector constructor expects an Array of Data instances.");let s=null==(t=n[0])?void 0:t.type;switch(n.length){case 0:this._offsets=[0];break;case 1:{let{get:e,set:t,indexOf:i}=iI[s.typeId],r=n[0];this.isValid=e=>ir(r,e),this.get=t=>e(r,t),this.set=(e,i)=>t(r,e,i),this.indexOf=e=>i(r,e),this._offsets=[0,r.length];break}default:Object.setPrototypeOf(this,iS[s.typeId]),this._offsets=ie(n)}this.data=n,this.type=s,this.stride=ez(s),this.numChildren=null!=(r=null==(i=s.children)?void 0:i.length)?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,t)=>e+t.byteLength,0)}get nullable(){return this.data.some(e=>e.nullable)}get nullCount(){return t7(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${nj[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(t4(e,this.length))}set(e,t){}indexOf(e,t){return -1}includes(e,t){return this.indexOf(e,t)>-1}[Symbol.iterator](){return i_.visit(this)}concat(...e){return new iT(this.data.concat(e.flatMap(e=>e.data).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new iT(t2(this,e,t,({data:e,_offsets:t},i,r)=>it(e,t,i,r)))}toJSON(){return[...this]}toArray(){let{type:e,data:t,length:i,stride:r,ArrayType:n}=this;switch(e.typeId){case nj.Int:case nj.Float:case nj.Decimal:case nj.Time:case nj.Timestamp:switch(t.length){case 0:return new n;case 1:return t[0].values.subarray(0,i*r);default:return t.reduce((e,{values:t,length:i})=>(e.array.set(t.subarray(0,i*r),e.offset),e.offset+=i*r,e),{array:new n(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt(null==(t=this.type.children)?void 0:t.findIndex(t=>t.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new iT(this.data.map(({children:t})=>t[e])):null}get isMemoized(){return!!eb.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(eb.isDictionary(this.type)){let e=new iO(this.data[0].dictionary);return new iT(this.data.map(t=>{let i=t.clone();return i.dictionary=e,i}))}return new iO(this)}unmemoize(){if(eb.isDictionary(this.type)&&this.isMemoized){let e=this.data[0].dictionary.unmemoize();return new iT(this.data.map(t=>{let i=t.clone();return i.dictionary=e,i}))}return this}}iT[Symbol.toStringTag]=(e=>{for(let t of(e.type=eb.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0,Object.keys(nj).map(e=>nj[e]).filter(e=>"number"==typeof e&&e!==nj.NONE))){let i=tJ.getVisitFnByTypeId(t),r=tm.getVisitFnByTypeId(t),n=ib.getVisitFnByTypeId(t);iI[t]={get:i,set:r,indexOf:n},iS[t]=Object.create(e,{isValid:{value:is(ir)},get:{value:is(tJ.getVisitFnByTypeId(t))},set:{value:io(tm.getVisitFnByTypeId(t))},indexOf:{value:ia(ib.getVisitFnByTypeId(t))}})}return"Vector"})(iT.prototype);class iO extends iT{constructor(e){super(e.data);let t=this.get,i=this.set,r=this.slice,n=Array(this.length);Object.defineProperty(this,"get",{value(e){let i=n[e];if(void 0!==i)return i;let r=t.call(this,e);return n[e]=r,r}}),Object.defineProperty(this,"set",{value(e,t){i.call(this,e,t),n[e]=t}}),Object.defineProperty(this,"slice",{value:(e,t)=>new iO(r.call(this,e,t))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new iT(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class ix{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(0!==this._nullCount){let{type:e}=this;return eb.isSparseUnion(e)?this.children.some(e=>e.nullable):eb.isDenseUnion(e)?this.children.some(e=>e.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0,{valueOffsets:t,values:i,nullBitmap:r,typeIds:n}=this;return t&&(e+=t.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),n&&(e+=n.byteLength),this.children.reduce((e,t)=>e+t.byteLength,e)}get nullCount(){let e;if(eb.isUnion(this.type))return this.children.reduce((e,t)=>e+t.nullCount,0);let t=this._nullCount;return t<=-1&&(e=this.nullBitmap)&&(this._nullCount=t=0===e.length?0:this.length-function e(t,i,r){if(r-i<=0)return 0;if(r-i<8){let e=0;for(let n of new ih(t,i,r-i,t,il))e+=n;return e}let n=r>>3<<3,s=i+(i%8==0?0:8-i%8);return e(t,i,s)+e(t,n,r)+function(e,t,i){let r=0,n=Math.trunc(t),s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=void 0===i?e.byteLength:n+i;for(;o-n>=4;)r+=ip(s.getUint32(n)),n+=4;for(;o-n>=2;)r+=ip(s.getUint16(n)),n+=2;for(;o-n>=1;)r+=ip(s.getUint8(n)),n+=1;return r}(t,s>>3,n-s>>3)}(e,this.offset,this.offset+this.length)),t}constructor(e,t,i,r,n,s=[],o){let a;this.type=e,this.children=s,this.dictionary=o,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1)),n instanceof ix?(this.stride=n.stride,this.values=n.values,this.typeIds=n.typeIds,this.nullBitmap=n.nullBitmap,this.valueOffsets=n.valueOffsets):(this.stride=ez(e),n&&((a=n[0])&&(this.valueOffsets=a),(a=n[1])&&(this.values=a),(a=n[2])&&(this.nullBitmap=a),(a=n[3])&&(this.typeIds=a)))}getValid(e){let{type:t}=this;if(eb.isUnion(t)){let i=this.children[t.typeIdToChildIndex[this.typeIds[e]]],r=t.mode===nK.Dense?this.valueOffsets[e]:e;return i.getValid(r)}if(this.nullable&&this.nullCount>0){let t=this.offset+e;return(this.nullBitmap[t>>3]&1<<t%8)!=0}return!0}setValid(e,t){let i,{type:r}=this;if(eb.isUnion(r)){let n=this.children[r.typeIdToChildIndex[this.typeIds[e]]],s=r.mode===nK.Dense?this.valueOffsets[e]:e;i=n.getValid(s),n.setValid(s,t)}else{let{nullBitmap:r}=this,{offset:n,length:s}=this,o=n+e,a=1<<o%8,d=o>>3;(!r||r.byteLength<=d)&&(r=new Uint8Array((n+s+63&-64)>>3).fill(255),this.nullCount>0?(r.set(iu(n,s,this.nullBitmap),0),Object.assign(this,{nullBitmap:r})):Object.assign(this,{nullBitmap:r,_nullCount:0}));let l=r[d];i=(l&a)!=0,r[d]=t?l|a:l&~a}return!!t!==i&&(this._nullCount=this.nullCount+(t?-1:1)),t}clone(e=this.type,t=this.offset,i=this.length,r=this._nullCount,n=this,s=this.children){return new ix(e,t,i,r,n,s,this.dictionary)}slice(e,t){let{stride:i,typeId:r,children:n}=this,s=(0===this._nullCount)-1,o=16===r?i:1,a=this._sliceBuffers(e,t,i,r);return this.clone(this.type,this.offset+e,t,s,a,0===n.length||this.valueOffsets?n:this._sliceChildren(n,o*e,o*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===nj.Null)return this.clone(this.type,0,e,0);let{length:t,nullCount:i}=this,r=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);r[t>>3]=(1<<t-(-8&t))-1,i>0&&r.set(iu(this.offset,t,this.nullBitmap),0);let n=this.buffers;return n[n$.VALIDITY]=r,this.clone(this.type,0,e,i+(e-t),n)}_sliceBuffers(e,t,i,r){let n,{buffers:s}=this;return(n=s[n$.TYPE])&&(s[n$.TYPE]=n.subarray(e,e+t)),(n=s[n$.OFFSET])&&(s[n$.OFFSET]=n.subarray(e,e+t+1))||(n=s[n$.DATA])&&(s[n$.DATA]=6===r?n:n.subarray(i*e,i*(e+t))),s}_sliceChildren(e,t,i){return e.map(e=>e.slice(t,i))}}ix.prototype.children=Object.freeze([]);class iE extends eq{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){let{type:t,offset:i=0,length:r=0}=e;return new ix(t,i,r,r)}visitBool(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length>>3,nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitInt(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length,nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitFloat(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length,nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitUtf8(e){let{type:t,offset:i=0}=e,r=et(e.data),n=et(e.nullBitmap),s=X(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new ix(t,i,o,a,[s,r,n])}visitLargeUtf8(e){let{type:t,offset:i=0}=e,r=et(e.data),n=et(e.nullBitmap),s=ee(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new ix(t,i,o,a,[s,r,n])}visitBinary(e){let{type:t,offset:i=0}=e,r=et(e.data),n=et(e.nullBitmap),s=X(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new ix(t,i,o,a,[s,r,n])}visitLargeBinary(e){let{type:t,offset:i=0}=e,r=et(e.data),n=et(e.nullBitmap),s=ee(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new ix(t,i,o,a,[s,r,n])}visitFixedSizeBinary(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitDate(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitTimestamp(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitTime(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitDecimal(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitList(e){let{type:t,offset:i=0,child:r}=e,n=et(e.nullBitmap),s=X(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new ix(t,i,o,a,[s,void 0,n],[r])}visitStruct(e){let{type:t,offset:i=0,children:r=[]}=e,n=et(e.nullBitmap),{length:s=r.reduce((e,{length:t})=>Math.max(e,t),0),nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,void 0,n],r)}visitUnion(e){let{type:t,offset:i=0,children:r=[]}=e,n=H(t.ArrayType,e.typeIds),{length:s=n.length,nullCount:o=-1}=e;return eb.isSparseUnion(t)?new ix(t,i,s,o,[void 0,void 0,void 0,n],r):new ix(t,i,s,o,[X(e.valueOffsets),void 0,void 0,n],r)}visitDictionary(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.indices.ArrayType,e.data),{dictionary:s=new iT([new iE().visit({type:t.dictionary})])}=e,{length:o=n.length,nullCount:a=e.nullBitmap?-1:0}=e;return new ix(t,i,o,a,[void 0,n,r],[],s)}visitInterval(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitDuration(e){let{type:t,offset:i=0}=e,r=et(e.nullBitmap),n=H(t.ArrayType,e.data),{length:s=n.length,nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,n,r])}visitFixedSizeList(e){let{type:t,offset:i=0,child:r=new iE().visit({type:t.valueType})}=e,n=et(e.nullBitmap),{length:s=r.length/ez(t),nullCount:o=e.nullBitmap?-1:0}=e;return new ix(t,i,s,o,[void 0,void 0,n],[r])}visitMap(e){let{type:t,offset:i=0,child:r=new iE().visit({type:t.childType})}=e,n=et(e.nullBitmap),s=X(e.valueOffsets),{length:o=s.length-1,nullCount:a=e.nullBitmap?-1:0}=e;return new ix(t,i,o,a,[s,void 0,n],[r])}}let iA=new iE;function iD(e){return iA.visit(e)}(sI=nY||(nY={}))[sI.NONE=0]="NONE",sI[sI.Schema=1]="Schema",sI[sI.DictionaryBatch=2]="DictionaryBatch",sI[sI.RecordBatch=3]="RecordBatch",sI[sI.Tensor=4]="Tensor",sI[sI.SparseTensor=5]="SparseTensor";class iB{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,i,r){return e.prep(8,24),e.writeInt64(BigInt(null!=r?r:0)),e.pad(4),e.writeInt32(i),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}}let ik=new Int32Array(2),iC=new Float32Array(ik.buffer),iF=new Float64Array(ik.buffer),iV=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];(sS=nH||(nH={}))[sS.UTF8_BYTES=1]="UTF8_BYTES",sS[sS.UTF16_STRING=2]="UTF16_STRING";class iR{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new iR(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return ik["0"]=this.readInt32(e),iC["0"]}readFloat64(e){return ik[+!iV]=this.readInt32(e),ik[+!!iV]=this.readInt32(e+4),iF["0"]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){iC["0"]=t,this.writeInt32(e,ik["0"])}writeFloat64(e,t){iF["0"]=t,this.writeInt32(e,ik[+!iV]),this.writeInt32(e+4,ik[+!!iV])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<4;t++)e+=String.fromCharCode(this.readInt8(this.position_+4+t));return e}__offset(e,t){let i=e-this.readInt32(e);return t<this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);let i=this.readInt32(e);e+=4;let r=this.bytes_.subarray(e,e+i);return t===nH.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+4}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(4!=e.length)throw Error("FlatBuffers: file identifier must be length 4");for(let t=0;t<4;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+4+t))return!1;return!0}createScalarList(e,t){let i=[];for(let r=0;r<t;++r){let t=e(r);null!==t&&i.push(t)}return i}createObjList(e,t){let i=[];for(let r=0;r<t;++r){let t=e(r);null!==t&&i.push(t.unpack())}return i}}class iP{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=iR.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);let i=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<i+e+t;){let e=this.bb.capacity();this.bb=iP.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(i)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){(this.force_defaults||t!==i)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){let t=e.capacity();if(0xc0000000&t)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let i=t<<1,r=iR.allocate(i);return r.setPosition(i-t),r.bytes().set(e.bytes(),i-t),r}addOffset(e){this.prep(4,0),this.writeInt32(this.offset()-e+4)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let e=this.offset(),t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);let i=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);let r=(i+2)*2;this.addInt16(r);let n=0,s=this.space;e:for(t=0;t<this.vtables.length;t++){let e=this.bb.capacity()-this.vtables[t];if(r==this.bb.readInt16(e)){for(let t=2;t<r;t+=2)if(this.bb.readInt16(s+t)!=this.bb.readInt16(e+t))continue e;n=this.vtables[t];break}}return n?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,n-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){let r=4*!!i;if(t){if(this.prep(this.minalign,8+r),4!=t.length)throw TypeError("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){let i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(t<this.bb.readInt16(r)&&0!=this.bb.readInt16(r+t)))throw TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(4,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);let t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){let t;return null==e?0:(t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createByteVector(e){return null==e?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){let t=[];for(let i=0;i<e.length;++i){let r=e[i];if(null!==r)t.push(this.createObjectOffset(r));else throw TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}class iL{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new iL).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+4),(t||new iL).__init(e.readInt32(e.position())+e.position(),e)}key(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,i){return iL.startKeyValue(e),iL.addKey(e,t),iL.addValue(e,i),iL.endKeyValue(e)}}(sT=nX||(nX={}))[sT.V1=0]="V1",sT[sT.V2=1]="V2",sT[sT.V3=2]="V3",sT[sT.V4=3]="V4",sT[sT.V5=4]="V5",(sO=n0||(n0={}))[sO.Little=0]="Little",sO[sO.Big=1]="Big",(sx=n1||(n1={}))[sx.DenseArray=0]="DenseArray";class iM{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new iM).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+4),(t||new iM).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){let e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,i){return iM.startInt(e),iM.addBitWidth(e,t),iM.addIsSigned(e,i),iM.endInt(e)}}class iU{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new iU).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+4),(t||new iU).__init(e.readInt32(e.position())+e.position(),e)}id(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new iM).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){let e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}dictionaryKind(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):n1.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,n1.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}(sE=n2||(n2={}))[sE.NONE=0]="NONE",sE[sE.Null=1]="Null",sE[sE.Int=2]="Int",sE[sE.FloatingPoint=3]="FloatingPoint",sE[sE.Binary=4]="Binary",sE[sE.Utf8=5]="Utf8",sE[sE.Bool=6]="Bool",sE[sE.Decimal=7]="Decimal",sE[sE.Date=8]="Date",sE[sE.Time=9]="Time",sE[sE.Timestamp=10]="Timestamp",sE[sE.Interval=11]="Interval",sE[sE.List=12]="List",sE[sE.Struct_=13]="Struct_",sE[sE.Union=14]="Union",sE[sE.FixedSizeBinary=15]="FixedSizeBinary",sE[sE.FixedSizeList=16]="FixedSizeList",sE[sE.Map=17]="Map",sE[sE.Duration=18]="Duration",sE[sE.LargeBinary=19]="LargeBinary",sE[sE.LargeUtf8=20]="LargeUtf8",sE[sE.LargeList=21]="LargeList",sE[sE.RunEndEncoded=22]="RunEndEncoded";class iW{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new iW).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+4),(t||new iW).__init(e.readInt32(e.position())+e.position(),e)}name(e){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){let e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}typeType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):n2.NONE}type(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){let t=this.bb.__offset(this.bb_pos,12);return t?(e||new iU).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(e,t){let i=this.bb.__offset(this.bb_pos,14);return i?(t||new iW).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){let i=this.bb.__offset(this.bb_pos,16);return i?(t||new iL).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,n2.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}}class iz{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new iz).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+4),(t||new iz).__init(e.readInt32(e.position())+e.position(),e)}endianness(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n0.Little}fields(e,t){let i=this.bb.__offset(this.bb_pos,6);return i?(t||new iW).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}fieldsLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){let i=this.bb.__offset(this.bb_pos,8);return i?(t||new iL).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}featuresLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,n0.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let i=t.length-1;i>=0;i--)e.addInt64(t[i]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(e,t,i,r,n){return iz.startSchema(e),iz.addEndianness(e,t),iz.addFields(e,i),iz.addCustomMetadata(e,r),iz.addFeatures(e,n),iz.endSchema(e)}}class iq{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new iq).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+4),(t||new iq).__init(e.readInt32(e.position())+e.position(),e)}version(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nX.V1}schema(e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new iz).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){let i=this.bb.__offset(this.bb_pos,8);return i?(t||new iB).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}dictionariesLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){let i=this.bb.__offset(this.bb_pos,10);return i?(t||new iB).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}recordBatchesLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){let i=this.bb.__offset(this.bb_pos,12);return i?(t||new iL).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,nX.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}class ij{constructor(e=[],t,i,r=nX.V5){this.fields=e||[],this.metadata=t||new Map,i||(i=iZ(this.fields)),this.dictionaries=i,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,t)=>`${t}: ${e}`).join(", ")} }>`}select(e){let t=new Set(e);return new ij(this.fields.filter(e=>t.has(e.name)),this.metadata)}selectAt(e){return new ij(e.map(e=>this.fields[e]).filter(Boolean),this.metadata)}assign(...e){let t=e[0]instanceof ij?e[0]:new ij(Array.isArray(e[0])?e[0]:e),i=[...this.fields],r=iQ(iQ(new Map,this.metadata),t.metadata),n=t.fields.filter(e=>{let t=i.findIndex(t=>t.name===e.name);return!~t||(i[t]=e.clone({metadata:iQ(iQ(new Map,i[t].metadata),e.metadata)}))&&!1}),s=iZ(n,new Map);return new ij([...i,...n],r,new Map([...this.dictionaries,...s]))}}ij.prototype.fields=null,ij.prototype.metadata=null,ij.prototype.dictionaries=null;class i${static new(...e){let[t,i,r,n]=e;return e[0]&&"object"==typeof e[0]&&({name:t}=e[0],void 0===i&&(i=e[0].type),void 0===r&&(r=e[0].nullable),void 0===n&&(n=e[0].metadata)),new i$(`${t}`,i,r,n)}constructor(e,t,i=!1,r){this.name=e,this.type=t,this.nullable=i,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[t,i,r,n]=e;return e[0]&&"object"==typeof e[0]?{name:t=this.name,type:i=this.type,nullable:r=this.nullable,metadata:n=this.metadata}=e[0]:[t=this.name,i=this.type,r=this.nullable,n=this.metadata]=e,i$.new(t,i,r,n)}}function iQ(e,t){return new Map([...e||new Map,...t||new Map])}function iZ(e,t=new Map){for(let i=-1,r=e.length;++i<r;){let r=e[i].type;if(eb.isDictionary(r))if(t.has(r.id)){if(t.get(r.id)!==r.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id")}else t.set(r.id,r.dictionary);r.children&&r.children.length>0&&iZ(r.children,t)}return t}i$.prototype.type=null,i$.prototype.name=null,i$.prototype.nullable=null,i$.prototype.metadata=null;class iJ{static decode(e){e=new iR(et(e));let t=iq.getRootAsFooter(e);return new iG(ij.decode(t.schema(),new Map,t.version()),t)}static encode(e){let t=new iP,i=ij.encode(t,e.schema);for(let i of(iq.startRecordBatchesVector(t,e.numRecordBatches),[...e.recordBatches()].slice().reverse()))iK.encode(t,i);let r=t.endVector();for(let i of(iq.startDictionariesVector(t,e.numDictionaries),[...e.dictionaryBatches()].slice().reverse()))iK.encode(t,i);let n=t.endVector();return iq.startFooter(t),iq.addSchema(t,i),iq.addVersion(t,nX.V5),iq.addRecordBatches(t,r),iq.addDictionaries(t,n),iq.finishFooterBuffer(t,iq.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,t=nX.V5,i,r){this.schema=e,this.version=t,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let e,t=-1,i=this.numRecordBatches;++t<i;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,i=this.numDictionaries;++t<i;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class iG extends iJ{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,t){super(e,t.version()),this._footer=t}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){let t=this._footer.recordBatches(e);if(t)return iK.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){let t=this._footer.dictionaries(e);if(t)return iK.decode(t)}return null}}class iK{static decode(e){return new iK(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){let{metaDataLength:i}=t,r=BigInt(t.offset),n=BigInt(t.bodyLength);return iB.createBlock(e,r,i,n)}constructor(e,t,i){this.metaDataLength=e,this.offset=eo(i),this.bodyLength=eo(t)}}let iY={fromIterable:e=>iH(function*(e){let t,i=!1,r=[],n,s,o,a=0;({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});let d=er(e)[Symbol.iterator]();try{do if({done:t,value:n}=Number.isNaN(o-a)?d.next():d.next(o-a),!t&&n.byteLength>0&&(r.push(n),a+=n.byteLength),t||o<=a)do({cmd:s,size:o}=yield"peek"===s?Y(r,o)[0]:([n,r,a]=Y(r,o),n));while(o<a);while(!t)}catch(e){i=!0,"function"==typeof d.throw&&d.throw(e)}finally{!1===i&&"function"==typeof d.return&&d.return(null)}return null}(e)),fromAsyncIterable:e=>iH(function(e){return I(this,arguments,function*(){let t,i=!1,r=[],n,s,o,a=0;({cmd:s,size:o}=(yield yield _(null))||{cmd:"read",size:0});let d=en(e)[Symbol.asyncIterator]();try{do if({done:t,value:n}=Number.isNaN(o-a)?yield _(d.next()):yield _(d.next(o-a)),!t&&n.byteLength>0&&(r.push(n),a+=n.byteLength),t||o<=a)do({cmd:s,size:o}=yield yield _("peek"===s?Y(r,o)[0]:([n,r,a]=Y(r,o),n)));while(o<a);while(!t)}catch(e){i=!0,"function"==typeof d.throw&&(yield _(d.throw(e)))}finally{!1===i&&"function"==typeof d.return&&(yield _(d.return(new Uint8Array(0))))}return yield _(null)})}(e)),fromDOMStream:e=>iH(function(e){return I(this,arguments,function*(){let t=!1,i=!1,r=[],n,s,o,a=0;({cmd:s,size:o}=(yield yield _(null))||{cmd:"read",size:0});let d=new iX(e);try{do if({done:t,value:n}=Number.isNaN(o-a)?yield _(d.read()):yield _(d.read(o-a)),!t&&n.byteLength>0&&(r.push(et(n)),a+=n.byteLength),t||o<=a)do({cmd:s,size:o}=yield yield _("peek"===s?Y(r,o)[0]:([n,r,a]=Y(r,o),n)));while(o<a);while(!t)}catch(e){i=!0,yield _(d.cancel(e))}finally{!1===i?yield _(d.cancel()):e.locked&&d.releaseLock()}return yield _(null)})}(e)),fromNodeStream:e=>iH(function(e){return I(this,arguments,function*(){let t=[],i="error",r=!1,n=null,s,o,a=0,d=[],l;if({cmd:s,size:o}=(yield yield _(null))||{cmd:"read",size:0},e.isTTY)return yield yield _(new Uint8Array(0)),yield _(null);try{t[0]=i0(e,"end"),t[1]=i0(e,"error");do{if(t[2]=i0(e,"readable"),[i,n]=yield _(Promise.race(t.map(e=>e[2]))),"error"===i)break;if((r="end"===i)||(Number.isFinite(o-a)?(l=et(e.read(o-a))).byteLength<o-a&&(l=et(e.read())):l=et(e.read()),l.byteLength>0&&(d.push(l),a+=l.byteLength)),r||o<=a)do({cmd:s,size:o}=yield yield _("peek"===s?Y(d,o)[0]:([l,d,a]=Y(d,o),l)));while(o<a)}while(!r)}finally{var u,c;yield _((u=t,c="error"===i?n:null,l=d=null,new Promise((t,i)=>{for(let[t,i]of u)e.off(t,i);try{let t=e.destroy;t&&t.call(e,c),c=void 0}catch(e){c=e||c}finally{null!=c?i(c):t()}})))}return yield _(null)})}(e)),toDOMStream(e,t){throw Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw Error('"toNodeStream" not available in this environment')}},iH=e=>(e.next(),e);class iX{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return N(this,void 0,void 0,function*(){let{reader:t,source:i}=this;t&&(yield t.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return N(this,void 0,void 0,function*(){if(0===e)return{done:null==this.reader,value:new Uint8Array(0)};let t=yield this.reader.read();return t.done||(t.value=et(t)),t})}}let i0=(e,t)=>{let i,r=e=>i([t,e]);return[t,r,new Promise(n=>(i=n)&&e.once(t,r))]},i1=Object.freeze({done:!0,value:void 0});class i2{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class i4{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class i3 extends i4{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return N(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){let{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(i1);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return iY.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return iY.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return N(this,void 0,void 0,function*(){return yield this.abort(e),i1})}return(e){return N(this,void 0,void 0,function*(){return yield this.close(),i1})}read(e){return N(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return N(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((e,t)=>{this.resolvers.push({resolve:e,reject:t})}):Promise.resolve(i1)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw Error("AsyncQueue is closed")}}class i8 extends i3{write(e){if((e=et(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?A(this.toUint8Array(!0)):this.toUint8Array(!1).then(A)}toUint8Array(e=!1){return e?Y(this._values)[0]:N(this,void 0,void 0,function*(){var e,t,i,r;let n=[],s=0;try{for(var o,a=!0,d=T(this);!(e=(o=yield d.next()).done);a=!0)r=o.value,a=!1,n.push(r),s+=r.byteLength}catch(e){t={error:e}}finally{try{!a&&!e&&(i=d.return)&&(yield i.call(d))}finally{if(t)throw t.error}}return Y(n,s)[0]})}}class i6{constructor(e){e&&(this.source=new i9(iY.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class i5{constructor(e){e instanceof i5?this.source=e.source:e instanceof i8?this.source=new i7(iY.fromAsyncIterable(e)):Z(e)?this.source=new i7(iY.fromNodeStream(e)):$(e)?this.source=new i7(iY.fromDOMStream(e)):z(e)?this.source=new i7(iY.fromDOMStream(e.body)):P(e)?this.source=new i7(iY.fromIterable(e)):R(e)?this.source=new i7(iY.fromAsyncIterable(e)):L(e)&&(this.source=new i7(iY.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class i9{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,t="read"){return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||i1)}return(e){return Object.create(this.source.return&&this.source.return(e)||i1)}}class i7{constructor(e){this.source=e,this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}cancel(e){return N(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return N(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return N(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return N(this,arguments,void 0,function*(e,t="read"){return yield this.source.next({cmd:t,size:e})})}throw(e){return N(this,void 0,void 0,function*(){let t=this.source.throw&&(yield this.source.throw(e))||i1;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}return(e){return N(this,void 0,void 0,function*(){let t=this.source.return&&(yield this.source.return(e))||i1;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}}class re extends i6{constructor(e,t){super(),this.position=0,this.buffer=et(e),this.size=void 0===t?this.buffer.byteLength:t}readInt32(e){let{buffer:t,byteOffset:i}=this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){let{buffer:t,size:i,position:r}=this;return t&&r<i?("number"!=typeof e&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,e)),t.subarray(r,this.position)):null}readAt(e,t){let i=this.buffer,r=Math.min(this.size,e+t);return i?i.subarray(e,r):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class rt extends i5{constructor(e,t){super(),this.position=0,this._handle=e,"number"==typeof t?this.size=t:this._pending=N(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return N(this,void 0,void 0,function*(){let{buffer:t,byteOffset:i}=yield this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)})}seek(e){return N(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return N(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:t,size:i,position:r}=this;if(t&&r<i){"number"!=typeof e&&(e=Number.POSITIVE_INFINITY);let n=r,s=0,o=0,a=Math.min(i,n+Math.min(i-n,e)),d=new Uint8Array(Math.max(0,(this.position=a)-n));for(;(n+=o)<a&&(s+=o)<d.byteLength;)({bytesRead:o}=yield t.read(d,s,d.byteLength-s,n));return d}return null})}readAt(e,t){return N(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:i,size:r}=this;if(i&&e+t<r){let n=new Uint8Array(Math.min(r,e+t)-e);return(yield i.read(n,0,t,e)).buffer}return new Uint8Array(t)})}close(){return N(this,void 0,void 0,function*(){let e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return N(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return N(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}function ri(e){return e<0&&(e=0xffffffff+e+1),`0x${e.toString(16)}`}let rr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class rn{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){let t=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),i=new Uint32Array([e.buffer[1]>>>16,65535&e.buffer[1],e.buffer[0]>>>16,65535&e.buffer[0]]),r=t[3]*i[3];this.buffer[0]=65535&r;let n=r>>>16;return n+=(r=t[2]*i[3])+(r=t[3]*i[2]>>>0),this.buffer[0]+=n<<16,this.buffer[1]=65536*(n>>>0<r),this.buffer[1]+=n>>>16,this.buffer[1]+=t[1]*i[3]+t[2]*i[2]+t[3]*i[1],this.buffer[1]+=t[0]*i[3]+t[1]*i[2]+t[2]*i[1]+t[3]*i[0]<<16,this}_plus(e){let t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${ri(this.buffer[1])} ${ri(this.buffer[0])}`}}class rs extends rn{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,t=new Uint32Array(2)){return rs.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return rs.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){let i=e.length,r=new rs(t);for(let t=0;t<i;){let n=8<i-t?8:i-t,s=new rs(new Uint32Array([Number.parseInt(e.slice(t,t+n),10),0])),o=new rs(new Uint32Array([rr[n],0]));r.times(o),r.plus(s),t+=n}return r}static convertArray(e){let t=new Uint32Array(2*e.length);for(let i=-1,r=e.length;++i<r;)rs.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new rs(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new rs(new Uint32Array(e.buffer)).plus(t)}}class ro extends rn{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){let t=0|this.buffer[1],i=0|e.buffer[1];return t<i||t===i&&this.buffer[0]<e.buffer[0]}static from(e,t=new Uint32Array(2)){return ro.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return ro.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){let i=e.startsWith("-"),r=e.length,n=new ro(t);for(let t=+!!i;t<r;){let i=8<r-t?8:r-t,s=new ro(new Uint32Array([Number.parseInt(e.slice(t,t+i),10),0])),o=new ro(new Uint32Array([rr[i],0]));n.times(o),n.plus(s),t+=i}return i?n.negate():n}static convertArray(e){let t=new Uint32Array(2*e.length);for(let i=-1,r=e.length;++i<r;)ro.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new ro(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new ro(new Uint32Array(e.buffer)).plus(t)}}class ra{constructor(e){this.buffer=e}high(){return new ro(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ro(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(e){let t=new rs(new Uint32Array([this.buffer[3],0])),i=new rs(new Uint32Array([this.buffer[2],0])),r=new rs(new Uint32Array([this.buffer[1],0])),n=new rs(new Uint32Array([this.buffer[0],0])),s=new rs(new Uint32Array([e.buffer[3],0])),o=new rs(new Uint32Array([e.buffer[2],0])),a=new rs(new Uint32Array([e.buffer[1],0])),d=new rs(new Uint32Array([e.buffer[0],0])),l=rs.multiply(n,d);this.buffer[0]=l.low();let u=new rs(new Uint32Array([l.high(),0]));return l=rs.multiply(r,d),u.plus(l),l=rs.multiply(n,a),u.plus(l),this.buffer[1]=u.low(),this.buffer[3]=+!!u.lessThan(l),this.buffer[2]=u.high(),new rs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(rs.multiply(i,d)).plus(rs.multiply(r,a)).plus(rs.multiply(n,o)),this.buffer[3]+=rs.multiply(t,d).plus(rs.multiply(i,a)).plus(rs.multiply(r,o)).plus(rs.multiply(n,s)).low(),this}plus(e){let t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${ri(this.buffer[3])} ${ri(this.buffer[2])} ${ri(this.buffer[1])} ${ri(this.buffer[0])}`}static multiply(e,t){return new ra(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new ra(new Uint32Array(e.buffer)).plus(t)}static from(e,t=new Uint32Array(4)){return ra.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(4)){return ra.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(4)){let i=e.startsWith("-"),r=e.length,n=new ra(t);for(let t=+!!i;t<r;){let i=8<r-t?8:r-t,s=new ra(new Uint32Array([Number.parseInt(e.slice(t,t+i),10),0,0,0])),o=new ra(new Uint32Array([rr[i],0,0,0]));n.times(o),n.plus(s),t+=i}return i?n.negate():n}static convertArray(e){let t=new Uint32Array(4*e.length);for(let i=-1,r=e.length;++i<r;)ra.from(e[i],new Uint32Array(t.buffer,t.byteOffset+16*i,4));return t}}class rd extends eq{constructor(e,t,i,r,n=nX.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=i,this.dictionaries=r,this.metadataVersion=n}visit(e){return super.visit(e instanceof i$?e.type:e)}visitNull(e,{length:t}=this.nextFieldNode()){return iD({type:e,length:t})}visitBool(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e,{length:t,nullCount:i}=this.nextFieldNode()){return this.metadataVersion<nX.V5&&this.readNullBitmap(e,i),e.mode===nK.Sparse?this.visitSparseUnion(e,{length:t,nullCount:i}):this.visitDenseUnion(e,{length:t,nullCount:i})}visitDenseUnion(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDuration(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:t,nullCount:i}=this.nextFieldNode()){return iD({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t,i=this.nextBufferRange()){return t>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e,{length:t,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class rl extends rd{constructor(e,t,i,r,n){super(new Uint8Array(0),t,i,r,n),this.sources=e}readNullBitmap(e,t,{offset:i}=this.nextBufferRange()){return t<=0?new Uint8Array(0):ic(this.sources[i])}readOffsets(e,{offset:t}=this.nextBufferRange()){return H(Uint8Array,H(e.OffsetArrayType,this.sources[t]))}readTypeIds(e,{offset:t}=this.nextBufferRange()){return H(Uint8Array,H(e.ArrayType,this.sources[t]))}readData(e,{offset:t}=this.nextBufferRange()){let{sources:i}=this;if(eb.isTimestamp(e)||(eb.isInt(e)||eb.isTime(e))&&64===e.bitWidth||eb.isDuration(e))return H(Uint8Array,ro.convertArray(i[t]));if(eb.isDate(e)&&e.unit===nJ.MILLISECOND)return H(Uint8Array,ro.convertArray(i[t]));if(eb.isDecimal(e))return H(Uint8Array,ra.convertArray(i[t]));if(eb.isBinary(e)||eb.isLargeBinary(e)||eb.isFixedSizeBinary(e))return function(e){let t=e.join(""),i=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2)i[e>>1]=Number.parseInt(t.slice(e,e+2),16);return i}(i[t]);else if(eb.isBool(e))return ic(i[t]);else if(eb.isUtf8(e)||eb.isLargeUtf8(e))return B(i[t].join(""));return H(Uint8Array,H(e.ArrayType,i[t].map(e=>+e)))}}class ru extends eq{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((e,i)=>this.compareFields(e,t[i]))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function rc(e,t){return t instanceof e.constructor}function rh(e,t){return e===t||rc(e,t)}function rp(e,t){return e===t||rc(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function rf(e,t){return e===t||rc(e,t)&&e.precision===t.precision}function ry(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function rm(e,t){return e===t||rc(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function rv(e,t){return e===t||rc(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function rb(e,t){return e===t||rc(e,t)&&e.mode===t.mode&&e.typeIds.every((e,i)=>e===t.typeIds[i])&&rN.compareManyFields(e.children,t.children)}function rg(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function rw(e,t){return e===t||rc(e,t)&&e.unit===t.unit}ru.prototype.visitNull=rh,ru.prototype.visitBool=rh,ru.prototype.visitInt=rp,ru.prototype.visitInt8=rp,ru.prototype.visitInt16=rp,ru.prototype.visitInt32=rp,ru.prototype.visitInt64=rp,ru.prototype.visitUint8=rp,ru.prototype.visitUint16=rp,ru.prototype.visitUint32=rp,ru.prototype.visitUint64=rp,ru.prototype.visitFloat=rf,ru.prototype.visitFloat16=rf,ru.prototype.visitFloat32=rf,ru.prototype.visitFloat64=rf,ru.prototype.visitUtf8=rh,ru.prototype.visitLargeUtf8=rh,ru.prototype.visitBinary=rh,ru.prototype.visitLargeBinary=rh,ru.prototype.visitFixedSizeBinary=function(e,t){return e===t||rc(e,t)&&e.byteWidth===t.byteWidth},ru.prototype.visitDate=ry,ru.prototype.visitDateDay=ry,ru.prototype.visitDateMillisecond=ry,ru.prototype.visitTimestamp=rm,ru.prototype.visitTimestampSecond=rm,ru.prototype.visitTimestampMillisecond=rm,ru.prototype.visitTimestampMicrosecond=rm,ru.prototype.visitTimestampNanosecond=rm,ru.prototype.visitTime=rv,ru.prototype.visitTimeSecond=rv,ru.prototype.visitTimeMillisecond=rv,ru.prototype.visitTimeMicrosecond=rv,ru.prototype.visitTimeNanosecond=rv,ru.prototype.visitDecimal=rh,ru.prototype.visitList=function(e,t){return e===t||rc(e,t)&&e.children.length===t.children.length&&rN.compareManyFields(e.children,t.children)},ru.prototype.visitStruct=function(e,t){return e===t||rc(e,t)&&e.children.length===t.children.length&&rN.compareManyFields(e.children,t.children)},ru.prototype.visitUnion=rb,ru.prototype.visitDenseUnion=rb,ru.prototype.visitSparseUnion=rb,ru.prototype.visitDictionary=function(e,t){return e===t||rc(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&rN.visit(e.indices,t.indices)&&rN.visit(e.dictionary,t.dictionary)},ru.prototype.visitInterval=rg,ru.prototype.visitIntervalDayTime=rg,ru.prototype.visitIntervalYearMonth=rg,ru.prototype.visitDuration=rw,ru.prototype.visitDurationSecond=rw,ru.prototype.visitDurationMillisecond=rw,ru.prototype.visitDurationMicrosecond=rw,ru.prototype.visitDurationNanosecond=rw,ru.prototype.visitFixedSizeList=function(e,t){return e===t||rc(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&rN.compareManyFields(e.children,t.children)},ru.prototype.visitMap=function(e,t){return e===t||rc(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&rN.compareManyFields(e.children,t.children)};let rN=new ru;function r_(e,t){return rN.compareSchemas(e,t)}function rI(e,t){return function(e,t){let i=[...e.fields],r=[],n={numBatches:t.reduce((e,t)=>Math.max(e,t.length),0)},s=0,o=0,a=-1,d=t.length,l,u=[];for(;n.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<d;)u[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(u=function(e,t,i,r,n){var s;let o=(t+63&-64)>>3;for(let a=-1,d=r.length;++a<d;){let d=i[a],l=null==d?void 0:d.length;if(l>=t)l===t?i[a]=d:(i[a]=d.slice(0,t),n.numBatches=Math.max(n.numBatches,r[a].unshift(d.slice(t,l-t))));else{let r=e[a];e[a]=r.clone({nullable:!0}),i[a]=null!=(s=null==d?void 0:d._changeLengthAndBackfillNullBitmap(t))?s:iD({type:r.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return i}(i,o,u,t,n),o>0&&(r[s++]=iD({type:new eV(i),length:o,nullCount:0,children:u.slice()})))}return[e=e.assign(i),r.map(t=>new rT(e,t))]}(e,t.map(e=>e.data.concat()))}class rS{constructor(...e){var t,i;let r,n;if(0===e.length)return this.batches=[],this.schema=new ij([]),this._offsets=[0],this;e[0]instanceof ij&&(r=e.shift()),e.at(-1)instanceof Uint32Array&&(n=e.pop());let s=e=>{if(e){if(e instanceof rT)return[e];else if(e instanceof rS)return e.batches;else if(e instanceof ix){if(e.type instanceof eV)return[new rT(new ij(e.type.children),e)]}else if(Array.isArray(e))return e.flatMap(e=>s(e));else if("function"==typeof e[Symbol.iterator])return[...e].flatMap(e=>s(e));else if("object"==typeof e){let t=Object.keys(e),i=t.map(t=>new iT([e[t]])),[,n]=rI(null!=r?r:new ij(t.map((e,t)=>new i$(String(e),i[t].type,i[t].nullable))),i);return 0===n.length?[new rT(e)]:n}}return[]},o=e.flatMap(e=>s(e));if(!((r=null!=(i=null!=r?r:null==(t=o[0])?void 0:t.schema)?i:new ij([]))instanceof ij))throw TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(let e of o){if(!(e instanceof rT))throw TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!r_(r,e.schema))throw TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=null!=n?n:ie(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,t)=>e+t.length,0)}get nullCount(){return -1===this._nullCount&&(this._nullCount=t7(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(t4(e,this.numRows))}set(e,t){}indexOf(e,t){return -1}[Symbol.iterator](){return this.batches.length>0?i_.visit(new iT(this.data)):[][Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(",\n  ")}
]`}concat(...e){let t=this.schema;return new rS(t,this.data.concat(e.flatMap(({data:e})=>e)).map(e=>new rT(t,e)))}slice(e,t){let i=this.schema;return[e,t]=t2({length:this.numRows},e,t),new rS(i,it(this.data,this._offsets,e,t).map(e=>new rT(i,e)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(t=>t.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){let t=this.data.map(t=>t.children[e]);if(0===t.length){let{type:i}=this.schema.fields[e],r=iD({type:i,length:0,nullCount:0});t.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new iT(t)}return null}setChild(e,t){var i;return this.setChildAt(null==(i=this.schema.fields)?void 0:i.findIndex(t=>t.name===e),t)}setChildAt(e,t){let i=this.schema,r=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new iT([iD({type:new eg,length:this.numRows})]));let n=i.fields.slice(),s=n[e].clone({type:t.type}),o=this.schema.fields.map((e,t)=>this.getChildAt(t));[n[e],o[e]]=[s,t],[i,r]=rI(i,o)}return new rS(i,r)}select(e){let t=this.schema.fields.reduce((e,t,i)=>e.set(t.name,i),new Map);return this.selectAt(e.map(e=>t.get(e)).filter(e=>e>-1))}selectAt(e){return new rS(this.schema.selectAt(e),this.batches.map(t=>t.selectAt(e)))}assign(e){let t=this.schema.fields,[i,r]=e.schema.fields.reduce((e,i,r)=>{let[n,s]=e,o=t.findIndex(e=>e.name===i.name);return~o?s[o]=r:n.push(r),e},[[],[]]);return new rS(...rI(this.schema.assign(e.schema),[...t.map((e,t)=>[t,r[t]]).map(([t,i])=>void 0===i?this.getChildAt(t):e.getChildAt(i)),...i.map(t=>e.getChildAt(t))].filter(Boolean)))}}rS[Symbol.toStringTag]=((sA=rS.prototype).schema=null,sA.batches=[],sA._offsets=new Uint32Array([0]),sA._nullCount=-1,sA[Symbol.isConcatSpreadable]=!0,sA.isValid=is(ir),sA.get=is(tJ.getVisitFn(nj.Struct)),sA.set=io(tm.getVisitFn(nj.Struct)),sA.indexOf=ia(ib.getVisitFn(nj.Struct)),"Table");class rT{constructor(...e){switch(e.length){case 2:if([this.schema]=e,!(this.schema instanceof ij)||([,this.data=iD({nullCount:0,type:new eV(this.schema.fields),children:this.schema.fields.map(e=>iD({type:e.type,nullCount:0}))})]=e,!(this.data instanceof ix)))throw TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=rO(this.schema,this.data.children);break;case 1:{let[t]=e,{fields:i,children:r,length:n}=Object.keys(t).reduce((e,i,r)=>(e.children[r]=t[i],e.length=Math.max(e.length,t[i].length),e.fields[r]=i$.new({name:i,type:t[i].type,nullable:!0}),e),{length:0,fields:[],children:[]}),s=new ij(i),o=iD({type:new eV(i),length:n,children:r,nullCount:0});[this.schema,this.data]=rO(s,o.children,n);break}default:throw TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=function e(t,i,r=new Map){var n,s;if((null!=(n=null==t?void 0:t.length)?n:0)>0&&(null==t?void 0:t.length)===(null==i?void 0:i.length))for(let n=-1,o=t.length;++n<o;){let{type:o}=t[n],a=i[n];for(let t of[a,...(null==(s=null==a?void 0:a.dictionary)?void 0:s.data)||[]])e(o.children,null==t?void 0:t.children,r);if(eb.isDictionary(o)){let{id:e}=o;if(r.has(e)){if(r.get(e)!==a.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id")}else(null==a?void 0:a.dictionary)&&r.set(e,a.dictionary)}}return r}(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return tJ.visit(this.data,e)}at(e){return this.get(t4(e,this.numRows))}set(e,t){return tm.visit(this.data,e,t)}indexOf(e,t){return ib.visit(this.data,e,t)}[Symbol.iterator](){return i_.visit(new iT([this.data]))}toArray(){return[...this]}concat(...e){return new rS(this.schema,[this,...e])}slice(e,t){let[i]=new iT([this.data]).slice(e,t).data;return new rT(this.schema,i)}getChild(e){var t;return this.getChildAt(null==(t=this.schema.fields)?void 0:t.findIndex(t=>t.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new iT([this.data.children[e]]):null}setChild(e,t){var i;return this.setChildAt(null==(i=this.schema.fields)?void 0:i.findIndex(t=>t.name===e),t)}setChildAt(e,t){let i=this.schema,r=this.data;if(e>-1&&e<this.numCols){t||(t=new iT([iD({type:new eg,length:this.numRows})]));let n=i.fields.slice(),s=r.children.slice(),o=n[e].clone({type:t.type});[n[e],s[e]]=[o,t.data[0]],i=new ij(n,new Map(this.schema.metadata)),r=iD({type:new eV(n),children:s})}return new rT(i,r)}select(e){let t=this.schema.select(e),i=new eV(t.fields),r=[];for(let t of e){let e=this.schema.fields.findIndex(e=>e.name===t);~e&&(r[e]=this.data.children[e])}return new rT(t,iD({type:i,length:this.numRows,children:r}))}selectAt(e){let t=this.schema.selectAt(e),i=e.map(e=>this.data.children[e]).filter(Boolean),r=iD({type:new eV(t.fields),length:this.numRows,children:i});return new rT(t,r)}}function rO(e,t,i=t.reduce((e,t)=>Math.max(e,t.length),0)){var r;let n=[...e.fields],s=[...t],o=(i+63&-64)>>3;for(let[a,d]of e.fields.entries()){let e=t[a];e&&e.length===i||(n[a]=d.clone({nullable:!0}),s[a]=null!=(r=null==e?void 0:e._changeLengthAndBackfillNullBitmap(i))?r:iD({type:d.type,length:i,nullCount:i,nullBitmap:new Uint8Array(o)}))}return[e.assign(n),iD({type:new eV(n),length:i,children:s})]}rT[Symbol.toStringTag]=((sD=rT.prototype)._nullCount=-1,sD[Symbol.isConcatSpreadable]=!0,"RecordBatch");class rx extends rT{constructor(e){super(e,iD({type:new eV(e.fields),nullCount:0,children:e.fields.map(e=>iD({type:e.type}))}))}}(sB=n4||(n4={}))[sB.BUFFER=0]="BUFFER",(sk=n3||(n3={}))[sk.LZ4_FRAME=0]="LZ4_FRAME",sk[sk.ZSTD=1]="ZSTD";class rE{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new rE).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+4),(t||new rE).__init(e.readInt32(e.position())+e.position(),e)}codec(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):n3.LZ4_FRAME}method(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):n4.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,n3.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,n4.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,i){return rE.startBodyCompression(e),rE.addCodec(e,t),rE.addMethod(e,i),rE.endBodyCompression(e)}}class rA{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,i){return e.prep(8,16),e.writeInt64(BigInt(null!=i?i:0)),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}}class rD{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,i){return e.prep(8,16),e.writeInt64(BigInt(null!=i?i:0)),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}}class rB{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(e,t){return(t||new rB).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,t){return e.setPosition(e.position()+4),(t||new rB).__init(e.readInt32(e.position())+e.position(),e)}length(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,t){let i=this.bb.__offset(this.bb_pos,6);return i?(t||new rD).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}nodesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){let i=this.bb.__offset(this.bb_pos,8);return i?(t||new rA).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}buffersLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){let t=this.bb.__offset(this.bb_pos,10);return t?(e||new rE).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}}class rk{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(e,t){return(t||new rk).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,t){return e.setPosition(e.position()+4),(t||new rk).__init(e.readInt32(e.position())+e.position(),e)}id(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){let t=this.bb.__offset(this.bb_pos,6);return t?(e||new rB).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){let e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}}class rC{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new rC).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+4),(t||new rC).__init(e.readInt32(e.position())+e.position(),e)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nQ.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,nQ.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return rC.startFloatingPoint(e),rC.addPrecision(e,t),rC.endFloatingPoint(e)}}class rF{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(e,t){return(t||new rF).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,t){return e.setPosition(e.position()+4),(t||new rF).__init(e.readInt32(e.position())+e.position(),e)}precision(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,t,i,r){return rF.startDecimal(e),rF.addPrecision(e,t),rF.addScale(e,i),rF.addBitWidth(e,r),rF.endDecimal(e)}}class rV{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(e,t){return(t||new rV).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,t){return e.setPosition(e.position()+4),(t||new rV).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nJ.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,nJ.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,t){return rV.startDate(e),rV.addUnit(e,t),rV.endDate(e)}}class rR{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new rR).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+4),(t||new rR).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nZ.MILLISECOND}bitWidth(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,nZ.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,i){return rR.startTime(e),rR.addUnit(e,t),rR.addBitWidth(e,i),rR.endTime(e)}}class rP{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new rP).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+4),(t||new rP).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nZ.SECOND}timezone(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,nZ.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,i){return rP.startTimestamp(e),rP.addUnit(e,t),rP.addTimezone(e,i),rP.endTimestamp(e)}}class rL{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new rL).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+4),(t||new rL).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nG.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,nG.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return rL.startInterval(e),rL.addUnit(e,t),rL.endInterval(e)}}class rM{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDuration(e,t){return(t||new rM).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,t){return e.setPosition(e.position()+4),(t||new rM).__init(e.readInt32(e.position())+e.position(),e)}unit(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nZ.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,nZ.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,t){return rM.startDuration(e),rM.addUnit(e,t),rM.endDuration(e)}}class rU{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new rU).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+4),(t||new rU).__init(e.readInt32(e.position())+e.position(),e)}mode(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nK.Sparse}typeIds(e){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}typeIdsLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,nK.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addInt32(t[i]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,i){return rU.startUnion(e),rU.addMode(e,t),rU.addTypeIds(e,i),rU.endUnion(e)}}class rW{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(e,t){return(t||new rW).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,t){return e.setPosition(e.position()+4),(t||new rW).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,t){return rW.startFixedSizeBinary(e),rW.addByteWidth(e,t),rW.endFixedSizeBinary(e)}}class rz{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(e,t){return(t||new rz).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,t){return e.setPosition(e.position()+4),(t||new rz).__init(e.readInt32(e.position())+e.position(),e)}listSize(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,t){return rz.startFixedSizeList(e),rz.addListSize(e,t),rz.endFixedSizeList(e)}}class rq{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(e,t){return(t||new rq).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,t){return e.setPosition(e.position()+4),(t||new rq).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){let e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(e,t){return rq.startMap(e),rq.addKeysSorted(e,t),rq.endMap(e)}}class rj{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new rj).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+4),(t||new rj).__init(e.readInt32(e.position())+e.position(),e)}version(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):nX.V1}headerType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):nY.NONE}header(e){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,t){let i=this.bb.__offset(this.bb_pos,12);return i?(t||new iL).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,nX.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,nY.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,BigInt("0"))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(e,t,i,r,n,s){return rj.startMessage(e),rj.addVersion(e,t),rj.addHeaderType(e,i),rj.addHeader(e,r),rj.addBodyLength(e,n),rj.addCustomMetadata(e,s),rj.endMessage(e)}}class r${constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(e,t){return(t||new r$).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,t){return e.setPosition(e.position()+4),(t||new r$).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return r$.startNull(e),r$.endNull(e)}}class rQ{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(e,t){return(t||new rQ).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,t){return e.setPosition(e.position()+4),(t||new rQ).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return rQ.startBinary(e),rQ.endBinary(e)}}class rZ{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeBinary(e,t){return(t||new rZ).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,t){return e.setPosition(e.position()+4),(t||new rZ).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return rZ.startLargeBinary(e),rZ.endLargeBinary(e)}}class rJ{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(e,t){return(t||new rJ).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,t){return e.setPosition(e.position()+4),(t||new rJ).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return rJ.startBool(e),rJ.endBool(e)}}class rG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(e,t){return(t||new rG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,t){return e.setPosition(e.position()+4),(t||new rG).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return rG.startUtf8(e),rG.endUtf8(e)}}class rK{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeUtf8(e,t){return(t||new rK).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,t){return e.setPosition(e.position()+4),(t||new rK).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return rK.startLargeUtf8(e),rK.endLargeUtf8(e)}}class rY{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(e,t){return(t||new rY).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,t){return e.setPosition(e.position()+4),(t||new rY).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return rY.startList(e),rY.endList(e)}}class rH{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new rH).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+4),(t||new rH).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return rH.startStruct_(e),rH.endStruct_(e)}}let rX=new class extends eq{visit(e,t){return null==e||null==t?void 0:super.visit(e,t)}visitNull(e,t){return r$.startNull(t),r$.endNull(t)}visitInt(e,t){return iM.startInt(t),iM.addBitWidth(t,e.bitWidth),iM.addIsSigned(t,e.isSigned),iM.endInt(t)}visitFloat(e,t){return rC.startFloatingPoint(t),rC.addPrecision(t,e.precision),rC.endFloatingPoint(t)}visitBinary(e,t){return rQ.startBinary(t),rQ.endBinary(t)}visitLargeBinary(e,t){return rZ.startLargeBinary(t),rZ.endLargeBinary(t)}visitBool(e,t){return rJ.startBool(t),rJ.endBool(t)}visitUtf8(e,t){return rG.startUtf8(t),rG.endUtf8(t)}visitLargeUtf8(e,t){return rK.startLargeUtf8(t),rK.endLargeUtf8(t)}visitDecimal(e,t){return rF.startDecimal(t),rF.addScale(t,e.scale),rF.addPrecision(t,e.precision),rF.addBitWidth(t,e.bitWidth),rF.endDecimal(t)}visitDate(e,t){return rV.startDate(t),rV.addUnit(t,e.unit),rV.endDate(t)}visitTime(e,t){return rR.startTime(t),rR.addUnit(t,e.unit),rR.addBitWidth(t,e.bitWidth),rR.endTime(t)}visitTimestamp(e,t){let i=e.timezone&&t.createString(e.timezone)||void 0;return rP.startTimestamp(t),rP.addUnit(t,e.unit),void 0!==i&&rP.addTimezone(t,i),rP.endTimestamp(t)}visitInterval(e,t){return rL.startInterval(t),rL.addUnit(t,e.unit),rL.endInterval(t)}visitDuration(e,t){return rM.startDuration(t),rM.addUnit(t,e.unit),rM.endDuration(t)}visitList(e,t){return rY.startList(t),rY.endList(t)}visitStruct(e,t){return rH.startStruct_(t),rH.endStruct_(t)}visitUnion(e,t){rU.startTypeIdsVector(t,e.typeIds.length);let i=rU.createTypeIdsVector(t,e.typeIds);return rU.startUnion(t),rU.addMode(t,e.mode),rU.addTypeIds(t,i),rU.endUnion(t)}visitDictionary(e,t){let i=this.visit(e.indices,t);return iU.startDictionaryEncoding(t),iU.addId(t,BigInt(e.id)),iU.addIsOrdered(t,e.isOrdered),void 0!==i&&iU.addIndexType(t,i),iU.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return rW.startFixedSizeBinary(t),rW.addByteWidth(t,e.byteWidth),rW.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return rz.startFixedSizeList(t),rz.addListSize(t,e.listSize),rz.endFixedSizeList(t)}visitMap(e,t){return rq.startMap(t),rq.addKeysSorted(t,e.keysSorted),rq.endMap(t)}};function r0(e){return new r6(e.count,function e(t){return(t||[]).reduce((t,i)=>[...t,new r7(i.count,(i.VALIDITY||[]).reduce((e,t)=>e+ +(0===t),0)),...e(i.children)],[])}(e.columns),function e(t,i=[]){for(let r=-1,n=(t||[]).length;++r<n;){let n=t[r];n.VALIDITY&&i.push(new r9(i.length,n.VALIDITY.length)),n.TYPE_ID&&i.push(new r9(i.length,n.TYPE_ID.length)),n.OFFSET&&i.push(new r9(i.length,n.OFFSET.length)),n.DATA&&i.push(new r9(i.length,n.DATA.length)),i=e(n.children,i)}return i}(e.columns))}function r1(e,t){return(e.children||[]).filter(Boolean).map(e=>i$.fromJSON(e,t))}function r2(e=[]){return new Map(e.map(({key:e,value:t})=>[e,t]))}function r4(e){return new ew(e.isSigned,e.bitWidth)}function r3(e,t){let i=e.type.name;switch(i){case"NONE":case"null":return new eg;case"binary":return new eI;case"largebinary":return new eS;case"utf8":return new eT;case"largeutf8":return new eO;case"bool":return new ex;case"list":return new eF((t||[])[0]);case"struct":case"struct_":return new eV(t||[])}switch(i){case"int":{let t=e.type;return new ew(t.isSigned,t.bitWidth)}case"floatingpoint":return new e_(nQ[e.type.precision]);case"decimal":{let t=e.type;return new eE(t.scale,t.precision,t.bitWidth)}case"date":return new eA(nJ[e.type.unit]);case"time":{let t=e.type;return new eD(nZ[t.unit],t.bitWidth)}case"timestamp":{let t=e.type;return new eB(nZ[t.unit],t.timezone)}case"interval":return new ek(nG[e.type.unit]);case"duration":return new eC(nZ[e.type.unit]);case"union":{let i=e.type,[r,...n]=(i.mode+"").toLowerCase();return new eR(nK[r.toUpperCase()+n.join("")],i.typeIds||[],t||[])}case"fixedsizebinary":return new eP(e.type.byteWidth);case"fixedsizelist":return new eL(e.type.listSize,(t||[])[0]);case"map":{let i=e.type;return new eM((t||[])[0],i.keysSorted)}}throw Error(`Unrecognized type: "${i}"`)}class r8{static fromJSON(e,t){var i,r;let n=new r8(0,nX.V5,t);return i=e,r=t,n._createHeader=()=>{switch(r){case nY.Schema:return ij.fromJSON(i);case nY.RecordBatch:return r6.fromJSON(i);case nY.DictionaryBatch:return r5.fromJSON(i)}throw Error(`Unrecognized Message type: { name: ${nY[r]}, type: ${r} }`)},n}static decode(e){var t,i;e=new iR(et(e));let r=rj.getRootAsMessage(e),n=r.bodyLength(),s=r.version(),o=r.headerType(),a=new r8(n,s,o);return t=r,i=o,a._createHeader=()=>{switch(i){case nY.Schema:return ij.decode(t.header(new iz),new Map,t.version());case nY.RecordBatch:return r6.decode(t.header(new rB),t.version());case nY.DictionaryBatch:return r5.decode(t.header(new rk),t.version())}throw Error(`Unrecognized Message type: { name: ${nY[i]}, type: ${i} }`)},a}static encode(e){let t=new iP,i=-1;return e.isSchema()?i=ij.encode(t,e.header()):e.isRecordBatch()?i=r6.encode(t,e.header()):e.isDictionaryBatch()&&(i=r5.encode(t,e.header())),rj.startMessage(t),rj.addVersion(t,nX.V5),rj.addHeader(t,i),rj.addHeaderType(t,e.headerType),rj.addBodyLength(t,BigInt(e.bodyLength)),rj.finishMessageBuffer(t,rj.endMessage(t)),t.asUint8Array()}static from(e,t=0){if(e instanceof ij)return new r8(0,nX.V5,nY.Schema,e);if(e instanceof r6)return new r8(t,nX.V5,nY.RecordBatch,e);if(e instanceof r5)return new r8(t,nX.V5,nY.DictionaryBatch,e);throw Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===nY.Schema}isRecordBatch(){return this.headerType===nY.RecordBatch}isDictionaryBatch(){return this.headerType===nY.DictionaryBatch}constructor(e,t,i,r){this._version=t,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=eo(e)}}class r6{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,t,i){this._nodes=t,this._buffers=i,this._length=eo(e)}}class r5{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,t,i=!1){this._data=e,this._isDelta=i,this._id=eo(t)}}class r9{constructor(e,t){this.offset=eo(e),this.length=eo(t)}}class r7{constructor(e,t){this.length=eo(e),this.nullCount=eo(t)}}function ne(e,t){let i=[];for(let r,n=-1,s=-1,o=e.childrenLength();++n<o;)(r=e.children(n))&&(i[++s]=i$.decode(r,t));return i}function nt(e){let t=new Map;if(e)for(let i,r,n=-1,s=Math.trunc(e.customMetadataLength());++n<s;)(i=e.customMetadata(n))&&null!=(r=i.key())&&t.set(r,i.value());return t}function ni(e){return new ew(e.isSigned(),e.bitWidth())}function nr(e,t){let i=e.typeType();switch(i){case n2.NONE:case n2.Null:return new eg;case n2.Binary:return new eI;case n2.LargeBinary:return new eS;case n2.Utf8:return new eT;case n2.LargeUtf8:return new eO;case n2.Bool:return new ex;case n2.List:return new eF((t||[])[0]);case n2.Struct_:return new eV(t||[])}switch(i){case n2.Int:{let t=e.type(new iM);return new ew(t.isSigned(),t.bitWidth())}case n2.FloatingPoint:return new e_(e.type(new rC).precision());case n2.Decimal:{let t=e.type(new rF);return new eE(t.scale(),t.precision(),t.bitWidth())}case n2.Date:return new eA(e.type(new rV).unit());case n2.Time:{let t=e.type(new rR);return new eD(t.unit(),t.bitWidth())}case n2.Timestamp:{let t=e.type(new rP);return new eB(t.unit(),t.timezone())}case n2.Interval:return new ek(e.type(new rL).unit());case n2.Duration:return new eC(e.type(new rM).unit());case n2.Union:{let i=e.type(new rU);return new eR(i.mode(),i.typeIdsArray()||[],t||[])}case n2.FixedSizeBinary:return new eP(e.type(new rW).byteWidth());case n2.FixedSizeList:return new eL(e.type(new rz).listSize(),(t||[])[0]);case n2.Map:{let i=e.type(new rq);return new eM((t||[])[0],i.keysSorted())}}throw Error(`Unrecognized type: "${n2[i]}" (${i})`)}i$.encode=function(e,t){let i=-1,r=-1,n=-1,s=t.type,o=t.typeId;eb.isDictionary(s)?(o=s.dictionary.typeId,n=rX.visit(s,e),r=rX.visit(s.dictionary,e)):r=rX.visit(s,e);let a=(s.children||[]).map(t=>i$.encode(e,t)),d=iW.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?iW.createCustomMetadataVector(e,[...t.metadata].map(([t,i])=>{let r=e.createString(`${t}`),n=e.createString(`${i}`);return iL.startKeyValue(e),iL.addKey(e,r),iL.addValue(e,n),iL.endKeyValue(e)})):-1;return t.name&&(i=e.createString(t.name)),iW.startField(e),iW.addType(e,r),iW.addTypeType(e,o),iW.addChildren(e,d),iW.addNullable(e,!!t.nullable),-1!==i&&iW.addName(e,i),-1!==n&&iW.addDictionary(e,n),-1!==l&&iW.addCustomMetadata(e,l),iW.endField(e)},i$.decode=function(e,t){let i,r,n,s,o,a;return t&&(a=e.dictionary())?(t.has(i=eo(a.id()))?(s=(s=a.indexType())?ni(s):new eN,o=new eW(t.get(i),s,i,a.isOrdered())):(s=(s=a.indexType())?ni(s):new eN,t.set(i,n=nr(e,ne(e,t))),o=new eW(n,s,i,a.isOrdered())),r=new i$(e.name(),o,e.nullable(),nt(e))):(n=nr(e,ne(e,t)),r=new i$(e.name(),n,e.nullable(),nt(e))),r||null},i$.fromJSON=function(e,t){let i,r,n,s,o,a;return t&&(s=e.dictionary)?(t.has(i=s.id)?(r=(r=s.indexType)?r4(r):new eN,a=new eW(t.get(i),r,i,s.isOrdered)):(r=(r=s.indexType)?r4(r):new eN,t.set(i,o=r3(e,r1(e,t))),a=new eW(o,r,i,s.isOrdered)),n=new i$(e.name,a,e.nullable,r2(e.metadata))):(o=r3(e,r1(e,t)),n=new i$(e.name,o,e.nullable,r2(e.metadata))),n||null},ij.encode=function(e,t){let i=t.fields.map(t=>i$.encode(e,t));iz.startFieldsVector(e,i.length);let r=iz.createFieldsVector(e,i),n=t.metadata&&t.metadata.size>0?iz.createCustomMetadataVector(e,[...t.metadata].map(([t,i])=>{let r=e.createString(`${t}`),n=e.createString(`${i}`);return iL.startKeyValue(e),iL.addKey(e,r),iL.addValue(e,n),iL.endKeyValue(e)})):-1;return iz.startSchema(e),iz.addFields(e,r),iz.addEndianness(e,nn?n0.Little:n0.Big),-1!==n&&iz.addCustomMetadata(e,n),iz.endSchema(e)},ij.decode=function(e,t=new Map,i=nX.V5){return new ij(function(e,t){let i=[];for(let r,n=-1,s=-1,o=e.fieldsLength();++n<o;)(r=e.fields(n))&&(i[++s]=i$.decode(r,t));return i}(e,t),nt(e),t,i)},ij.fromJSON=function(e,t=new Map){var i,r;return new ij((i=e,r=t,(i.fields||[]).filter(Boolean).map(e=>i$.fromJSON(e,r))),r2(e.metadata),t)},r6.encode=function(e,t){let i=t.nodes||[],r=t.buffers||[];for(let t of(rB.startNodesVector(e,i.length),i.slice().reverse()))r7.encode(e,t);let n=e.endVector();for(let t of(rB.startBuffersVector(e,r.length),r.slice().reverse()))r9.encode(e,t);let s=e.endVector();return rB.startRecordBatch(e),rB.addLength(e,BigInt(t.length)),rB.addNodes(e,n),rB.addBuffers(e,s),rB.endRecordBatch(e)},r6.decode=function(e,t=nX.V5){if(null!==e.compression())throw Error("Record batch compression not implemented");return new r6(e.length(),function(e){let t=[];for(let i,r=-1,n=-1,s=e.nodesLength();++r<s;)(i=e.nodes(r))&&(t[++n]=r7.decode(i));return t}(e),function(e,t){let i=[];for(let r,n=-1,s=-1,o=e.buffersLength();++n<o;)(r=e.buffers(n))&&(t<nX.V4&&(r.bb_pos+=8*(n+1)),i[++s]=r9.decode(r));return i}(e,t))},r6.fromJSON=r0,r5.encode=function(e,t){let i=r6.encode(e,t.data);return rk.startDictionaryBatch(e),rk.addId(e,BigInt(t.id)),rk.addIsDelta(e,t.isDelta),rk.addData(e,i),rk.endDictionaryBatch(e)},r5.decode=function(e,t=nX.V5){return new r5(r6.decode(e.data(),t),e.id(),e.isDelta())},r5.fromJSON=function(e){return new r5(r0(e.data),e.id,e.isDelta)},r7.encode=function(e,t){return rD.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))},r7.decode=function(e){return new r7(e.length(),e.nullCount())},r9.encode=function(e,t){return rA.createBuffer(e,BigInt(t.offset),BigInt(t.length))},r9.decode=function(e){return new r9(e.offset(),e.length())};let nn=(()=>{let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})(),ns=e=>`Expected ${nY[e]} Message in stream, but was null or length 0.`,no=e=>`Header pointer of flatbuffer-encoded ${nY[e]} Message is null or length 0.`,na=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,nd=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class nl{constructor(e){this.source=e instanceof i6?e:new i6(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||-1===e.value&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?i1:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw Error(ns(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);let t=et(this.source.read(e));if(t.byteLength<e)throw Error(nd(e,t.byteLength));return t.byteOffset%8==0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(e=!1){let t=nY.Schema,i=this.readMessage(t),r=null==i?void 0:i.header();if(e&&!r)throw Error(no(t));return r}readMetadataLength(){let e=this.source.read(nh),t=e&&new iR(e),i=(null==t?void 0:t.readInt32(0))||0;return{done:0===i,value:i}}readMetadata(e){let t=this.source.read(e);if(!t)return i1;if(t.byteLength<e)throw Error(na(e,t.byteLength));return{done:!1,value:r8.decode(t)}}}class nu{constructor(e,t){this.source=e instanceof i5?e:W(e)?new rt(e,t):new i5(e)}[Symbol.asyncIterator](){return this}next(){return N(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||-1===e.value&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?i1:e})}throw(e){return N(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return N(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return N(this,void 0,void 0,function*(){let t;if((t=yield this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw Error(ns(e));return t.value})}readMessageBody(e){return N(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);let t=et((yield this.source.read(e)));if(t.byteLength<e)throw Error(nd(e,t.byteLength));return t.byteOffset%8==0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()})}readSchema(){return N(this,arguments,void 0,function*(e=!1){let t=nY.Schema,i=yield this.readMessage(t),r=null==i?void 0:i.header();if(e&&!r)throw Error(no(t));return r})}readMetadataLength(){return N(this,void 0,void 0,function*(){let e=yield this.source.read(nh),t=e&&new iR(e),i=(null==t?void 0:t.readInt32(0))||0;return{done:0===i,value:i}})}readMetadata(e){return N(this,void 0,void 0,function*(){let t=yield this.source.read(e);if(!t)return i1;if(t.byteLength<e)throw Error(na(e,t.byteLength));return{done:!1,value:r8.decode(t)}})}}class nc extends nl{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof i2?e:new i2(e)}next(){let{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:r8.fromJSON(e.schema,nY.Schema)};if(this._dictionaryIndex<e.dictionaries.length){let t=e.dictionaries[this._dictionaryIndex++];return this._body=t.data.columns,{done:!1,value:r8.fromJSON(t,nY.DictionaryBatch)}}if(this._batchIndex<e.batches.length){let t=e.batches[this._batchIndex++];return this._body=t.columns,{done:!1,value:r8.fromJSON(t,nY.RecordBatch)}}return this._body=[],i1}readMessageBody(e){return function e(t){return(t||[]).reduce((t,i)=>[...t,...i.VALIDITY&&[i.VALIDITY]||[],...i.TYPE_ID&&[i.TYPE_ID]||[],...i.OFFSET&&[i.OFFSET]||[],...i.DATA&&[i.DATA]||[],...e(i.children)],[])}(this._body)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw Error(ns(e));return t.value}readSchema(){let e=nY.Schema,t=this.readMessage(e),i=null==t?void 0:t.header();if(!t||!i)throw Error(no(e));return i}}let nh=4,np="ARROW1",nf=new Uint8Array(np.length);for(let e=0;e<np.length;e+=1)nf[e]=np.codePointAt(e);function ny(e,t=0){for(let i=-1,r=nf.length;++i<r;)if(nf[i]!==e[t+i])return!1;return!0}let nm=nf.length,nv=nm+nh,nb=2*nm+nh;class ng extends i4{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){let t=this._impl.open(e);return R(t)?t.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return iY.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return iY.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw Error('"throughDOM" not available in this environment')}static from(e){if(e instanceof ng)return e;if(M(e))return new nw(new nA(e));if(W(e))return function(e){return N(this,void 0,void 0,function*(){let{size:t}=yield e.stat(),i=new rt(e,t);return t>=nb&&ny((yield i.readAt(0,nm+7&-8)))?new nI(new nE(i)):new nN(new nO(i))})}(e);if(R(e))return N(this,void 0,void 0,function*(){return yield ng.from((yield e))});if(z(e)||$(e)||Z(e)||L(e))return function(e){return N(this,void 0,void 0,function*(){let t=yield e.peek(nm+7&-8);return t&&t.byteLength>=4?ny(t)?new n_(new nx((yield e.read()))):new nN(new nO(e)):new nN(new nO(function(){return I(this,arguments,function*(){})}()))})}(new i5(e));var t=new i6(e);let i=t.peek(nm+7&-8);return i&&i.byteLength>=4?ny(i)?new n_(new nx(t.read())):new nw(new nT(t)):new nw(new nT(function*(){}()))}static readAll(e){return e instanceof ng?e.isSync()?nB(e):nk(e):M(e)||ArrayBuffer.isView(e)||P(e)||U(e)?nB(e):nk(e)}}class nw extends ng{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return I(this,arguments,function*(){yield _((yield*S(T(this[Symbol.iterator]()))))})}}class nN extends ng{constructor(e){super(e),this._impl=e}readAll(){return N(this,void 0,void 0,function*(){var e,t,i,r;let n=[];try{for(var s,o=!0,a=T(this);!(e=(s=yield a.next()).done);o=!0)r=s.value,o=!1,n.push(r)}catch(e){t={error:e}}finally{try{!o&&!e&&(i=a.return)&&(yield i.call(a))}finally{if(t)throw t.error}}return n})}[Symbol.iterator](){throw Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class n_ extends nw{constructor(e){super(e),this._impl=e}}class nI extends nN{constructor(e){super(e),this._impl=e}}class nS{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){let i=this._loadVectors(e,t,this.schema.fields),r=iD({type:new eV(this.schema.fields),length:e.length,children:i});return new rT(this.schema,r)}_loadDictionaryBatch(e,t){let{id:i,isDelta:r}=e,{dictionaries:n,schema:s}=this,o=n.get(i),a=s.dictionaries.get(i),d=this._loadVectors(e.data,t,[a]);return(o&&r?o.concat(new iT(d)):new iT(d)).memoize()}_loadVectors(e,t,i){return new rd(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(i)}}class nT extends nS{constructor(e,t){super(t),this._reader=M(e)?new nc(this._handle=e):new nl(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return!this.closed&&(this.autoDestroy=nD(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):i1}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):i1}next(){let e;if(this.closed)return i1;let{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;let i=e.header(),r=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;let i=e.header(),r=t.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,n)}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new rx(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class nO extends nS{constructor(e,t){super(t),this._reader=new nu(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return N(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return N(this,void 0,void 0,function*(){return!this.closed&&(this.autoDestroy=nD(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return N(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):i1})}return(e){return N(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):i1})}next(){return N(this,void 0,void 0,function*(){let e;if(this.closed)return i1;let{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;let i=e.header(),r=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;let i=e.header(),r=yield t.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,n)}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new rx(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return N(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class nx extends nT{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,t){super(e instanceof re?e:new re(e),t)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer)for(let e of(this.schema=(this._footer=this._readFooter()).schema,this._footer.dictionaryBatches()))e&&this._readDictionaryBatch(this._dictionaryIndex++);return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();let i=null==(t=this._footer)?void 0:t.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){let e=this._reader.readMessage(nY.RecordBatch);if(null==e?void 0:e.isRecordBatch()){let t=e.header(),i=this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,i)}}return null}_readDictionaryBatch(e){var t;let i=null==(t=this._footer)?void 0:t.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){let e=this._reader.readMessage(nY.DictionaryBatch);if(null==e?void 0:e.isDictionaryBatch()){let t=e.header(),i=this._reader.readMessageBody(e.bodyLength),r=this._loadDictionaryBatch(t,i);this.dictionaries.set(t.id,r)}}}_readFooter(){let{_handle:e}=this,t=e.size-nv,i=e.readInt32(t),r=e.readAt(t-i,i);return iJ.decode(r)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){let i=null==(t=this._footer)?void 0:t.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class nE extends nO{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...t){super(e instanceof rt?e:new rt(e,"number"!=typeof t[0]?t.shift():void 0),t[0]instanceof Map?t.shift():void 0)}isFile(){return!0}isAsync(){return!0}open(e){let t=Object.create(null,{open:{get:()=>super.open}});return N(this,void 0,void 0,function*(){if(!this.closed&&!this._footer)for(let e of(this.schema=(this._footer=yield this._readFooter()).schema,this._footer.dictionaryBatches()))e&&(yield this._readDictionaryBatch(this._dictionaryIndex++));return yield t.open.call(this,e)})}readRecordBatch(e){return N(this,void 0,void 0,function*(){var t;if(this.closed)return null;this._footer||(yield this.open());let i=null==(t=this._footer)?void 0:t.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){let e=yield this._reader.readMessage(nY.RecordBatch);if(null==e?void 0:e.isRecordBatch()){let t=e.header(),i=yield this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,i)}}return null})}_readDictionaryBatch(e){return N(this,void 0,void 0,function*(){var t;let i=null==(t=this._footer)?void 0:t.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){let e=yield this._reader.readMessage(nY.DictionaryBatch);if(null==e?void 0:e.isDictionaryBatch()){let t=e.header(),i=yield this._reader.readMessageBody(e.bodyLength),r=this._loadDictionaryBatch(t,i);this.dictionaries.set(t.id,r)}}})}_readFooter(){return N(this,void 0,void 0,function*(){let{_handle:e}=this;e._pending&&(yield e._pending);let t=e.size-nv,i=yield e.readInt32(t),r=yield e.readAt(t-i,i);return iJ.decode(r)})}_readNextMessageAndValidate(e){return N(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){let t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null})}}class nA extends nT{constructor(e,t){super(e,t)}_loadVectors(e,t,i){return new rl(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(i)}}function nD(e,t){return t&&"boolean"==typeof t.autoDestroy?t.autoDestroy:e.autoDestroy}function*nB(e){let t=ng.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function nk(e){return I(this,arguments,function*(){let t=yield _(ng.from(e));try{if(!(yield _(t.open({autoDestroy:!1}))).closed)do yield yield _(t);while(!(yield _(t.reset().open())).closed)}finally{yield _(t.cancel())}})}class nC extends eq{static assemble(...e){let t=e=>e.flatMap(e=>Array.isArray(e)?t(e):e instanceof rT?e.data.children:e.data),i=new nC;return i.visitMany(t(e)),i}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof iT)return this.visitMany(e.data),this;let{type:t}=e;if(!eb.isDictionary(t)){let{length:i}=e;if(i>0x7fffffff)throw RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(eb.isUnion(t))this.nodes.push(new r7(i,0));else{let{nullCount:r}=e;eb.isNull(t)||nF.call(this,r<=0?new Uint8Array(0):iu(e.offset,i,e.nullBitmap)),this.nodes.push(new r7(i,r))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function nF(e){let t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new r9(this._byteLength,t)),this._byteLength+=t,this}function nV(e){return nF.call(this,e.values.subarray(0,e.length*e.stride))}function nR(e){let{length:t,values:i,valueOffsets:r}=e,n=eo(r[0]),s=Math.min(eo(r[t])-n,i.byteLength-n);return nF.call(this,es(-n,t+1,r)),nF.call(this,i.subarray(n,n+s)),this}function nP(e){let{length:t,valueOffsets:i}=e;if(i){let{0:r,[t]:n}=i;return nF.call(this,es(-r,t+1,i)),this.visit(e.children[0].slice(r,n-r))}return this.visit(e.children[0])}function nL(e){return this.visitMany(e.type.children.map((t,i)=>e.children[i]).filter(Boolean))[0]}nC.prototype.visitBool=function(e){let t;return e.nullCount>=e.length?nF.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?nF.call(this,iu(e.offset,e.length,t)):nF.call(this,ic(e.values))},nC.prototype.visitInt=nV,nC.prototype.visitFloat=nV,nC.prototype.visitUtf8=nR,nC.prototype.visitLargeUtf8=nR,nC.prototype.visitBinary=nR,nC.prototype.visitLargeBinary=nR,nC.prototype.visitFixedSizeBinary=nV,nC.prototype.visitDate=nV,nC.prototype.visitTimestamp=nV,nC.prototype.visitTime=nV,nC.prototype.visitDecimal=nV,nC.prototype.visitList=nP,nC.prototype.visitStruct=nL,nC.prototype.visitUnion=function(e){var t;let{type:i,length:r,typeIds:n,valueOffsets:s}=e;if(nF.call(this,n),i.mode===nK.Sparse)return nL.call(this,e);if(i.mode===nK.Dense)if(e.offset<=0)return nF.call(this,s),nL.call(this,e);else{let o=new Int32Array(r),a=Object.create(null),d=Object.create(null);for(let e,i,l=-1;++l<r;)void 0!==(e=n[l])&&(void 0===(i=a[e])&&(i=a[e]=s[l]),o[l]=s[l]-i,d[e]=(null!=(t=d[e])?t:0)+1);nF.call(this,o),this.visitMany(e.children.map((e,t)=>{let n=i.typeIds[t],s=a[n],o=d[n];return e.slice(s,Math.min(r,o))}))}return this},nC.prototype.visitInterval=nV,nC.prototype.visitDuration=nV,nC.prototype.visitFixedSizeList=nP,nC.prototype.visitMap=nP;class nM extends i4{static throughNode(e){throw Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new i8,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,V(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof e.autoDestroy||e.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof e.writeLegacyIpcFormat&&e.writeLegacyIpcFormat}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return R(e)?e.then(e=>this.writeAll(e)):L(e)?nq(this,e):nz(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,t=null){return e===this._sink||e instanceof i8?this._sink=e:(this._sink=new i8,e&&j(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&Q(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,t&&r_(t,this._schema)||(null==t?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(this._sink){if(null==e)return this.finish()&&void 0;else if(e instanceof rS&&!(t=e.schema))return this.finish()&&void 0;else if(e instanceof rT&&!(t=e.schema))return this.finish()&&void 0}else throw Error("RecordBatchWriter is closed");if(t&&!r_(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof rT?e instanceof rx||this._writeRecordBatch(e):e instanceof rS?this.writeAll(e.batches):P(e)&&this.writeAll(e)}_writeMessage(e,t=8){let i=t-1,r=r8.encode(e),n=r.byteLength,s=this._writeLegacyIpcFormat?4:8,o=n+s+i&~i,a=o-n-s;return e.headerType===nY.RecordBatch?this._recordBatchBlocks.push(new iK(o,e.bodyLength,this._position)):e.headerType===nY.DictionaryBatch&&this._dictionaryBlocks.push(new iK(o,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-s)),n>0&&this._write(r),this._writePadding(a)}_write(e){if(this._started){let t=et(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(r8.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(nf)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){let{byteLength:t,nodes:i,bufferRegions:r,buffers:n}=nC.assemble(e),s=new r6(e.numRows,i,r),o=r8.from(s,t);return this._writeDictionaries(e)._writeMessage(o)._writeBodyBuffers(n)}_writeDictionaryBatch(e,t,i=!1){let{byteLength:r,nodes:n,bufferRegions:s,buffers:o}=nC.assemble(new iT([e])),a=new r5(new r6(e.length,n,s),t,i),d=r8.from(a,r);return this._writeMessage(d)._writeBodyBuffers(o)}_writeBodyBuffers(e){let t,i,r;for(let n=-1,s=e.length;++n<s;)(t=e[n])&&(i=t.byteLength)>0&&(this._write(t),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(e){var t,i;for(let[r,n]of e.dictionaries){let e=null!=(t=null==n?void 0:n.data)?t:[],s=this._seenDictionaries.get(r),o=null!=(i=this._dictionaryDeltaOffsets.get(r))?i:0;if(s&&s.data[0]===e[0]){if(o<e.length)for(let t of e.slice(o))this._writeDictionaryBatch(t,r,!0)}else for(let[t,i]of e.entries())this._writeDictionaryBatch(i,r,t>0);this._seenDictionaries.set(r,n),this._dictionaryDeltaOffsets.set(r,e.length)}return this}}class nU extends nM{static writeAll(e,t){let i=new nU(t);return R(e)?e.then(e=>i.writeAll(e)):L(e)?nq(i,e):nz(i,e)}}class nW extends nM{static writeAll(e){let t=new nW;return R(e)?e.then(e=>t.writeAll(e)):L(e)?nq(t,e):nz(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,t,i=!1){if(!i&&this._seenDictionaries.has(t))throw Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,t,i)}_writeFooter(e){let t=iJ.encode(new iJ(e,nX.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function nz(e,t){let i=t;for(let r of(t instanceof rS&&(i=t.batches,e.reset(void 0,t.schema)),i))e.write(r);return e.finish()}function nq(e,t){return N(this,void 0,void 0,function*(){var i,r,n,s,o,a,d;try{for(i=!0,r=T(t);!(s=(n=yield r.next()).done);i=!0)d=n.value,i=!1,e.write(d)}catch(e){o={error:e}}finally{try{!i&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}var nj,n$,nQ,nZ,nJ,nG,nK,nY,nH,nX,n0,n1,n2,n4,n3,n8,n6,n5,n9,n7,se,st,si,sr,sn,ss,so,sa,sd,sl,su,sc,sh,sp,sf,sy,sm,sv,sb,sg,sw,sN,s_,sI,sS,sT,sO,sx,sE,sA,sD,sB,sk,sC=Object.create,sF=Object.defineProperty,sV=Object.getOwnPropertyDescriptor,sR=Object.getOwnPropertyNames,sP=Object.getPrototypeOf,sL=Object.prototype.hasOwnProperty,sM=(s=(e,t)=>{t.exports=Worker},()=>(o||s((o={exports:{}}).exports,o),o.exports)),sU=((a=sU||{})[a.UNDEFINED=0]="UNDEFINED",a[a.AUTOMATIC=1]="AUTOMATIC",a[a.READ_ONLY=2]="READ_ONLY",a[a.READ_WRITE=3]="READ_WRITE",a),sW=((d=sW||{})[d.IDENTIFIER=0]="IDENTIFIER",d[d.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",d[d.STRING_CONSTANT=2]="STRING_CONSTANT",d[d.OPERATOR=3]="OPERATOR",d[d.KEYWORD=4]="KEYWORD",d[d.COMMENT=5]="COMMENT",d),sz=((l=sz||{})[l.NONE=0]="NONE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARNING=3]="WARNING",l[l.ERROR=4]="ERROR",l),sq=((u=sq||{})[u.NONE=0]="NONE",u[u.CONNECT=1]="CONNECT",u[u.DISCONNECT=2]="DISCONNECT",u[u.OPEN=3]="OPEN",u[u.QUERY=4]="QUERY",u[u.INSTANTIATE=5]="INSTANTIATE",u),sj=((c=sj||{})[c.NONE=0]="NONE",c[c.OK=1]="OK",c[c.ERROR=2]="ERROR",c[c.START=3]="START",c[c.RUN=4]="RUN",c[c.CAPTURE=5]="CAPTURE",c),s$=((h=s$||{})[h.NONE=0]="NONE",h[h.WEB_WORKER=1]="WEB_WORKER",h[h.NODE_WORKER=2]="NODE_WORKER",h[h.BINDINGS=3]="BINDINGS",h[h.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",h),sQ=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},sZ=((p=sZ||{})[p.SUCCESS=0]="SUCCESS",p[p.MAX_ARROW_ERROR=255]="MAX_ARROW_ERROR",p[p.DUCKDB_WASM_RETRY=256]="DUCKDB_WASM_RETRY",p),sJ=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),i=ng.from(t);return console.assert(i.isSync(),"Reader is not sync"),console.assert(i.isFile(),"Reader is not file"),new rS(i)}async send(e,t=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let i=await this._bindings.startPendingQuery(this._conn,e,t);for(;null==i;)i=await this._bindings.pollPendingQuery(this._conn);let r=new sG(this._bindings,this._conn,i),n=await ng.from(r);return console.assert(n.isAsync()),console.assert(n.isStream()),n}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new sK(this._bindings,this._conn,t)}async insertArrowTable(e,t){let i=function(e,t="stream"){return("stream"===t?nU:nW).writeAll(e).toUint8Array(!0)}(e,"stream");await this.insertArrowFromIPCStream(i,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},sG=class{constructor(e,t,i){this.db=e,this.conn=t,this.header=i,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;for(null!=this._inFlight&&(e=await this._inFlight,this._inFlight=null);null==e;)e=await this.db.fetchQueryResults(this.conn);return this._depleted=0==e.length,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},sK=class{constructor(e,t,i){this.bindings=e,this.connectionId=t,this.statementId=i}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),i=ng.from(t);return console.assert(i.isSync()),console.assert(i.isFile()),new rS(i)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),i=new sG(this.bindings,this.connectionId,t),r=await ng.from(i);return console.assert(r.isAsync()),console.assert(r.isStream()),r}},sY=((f=sY||{}).CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",f.CLOSE_PREPARED="CLOSE_PREPARED",f.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",f.REGISTER_OPFS_FILE_NAME="REGISTER_OPFS_FILE_NAME",f.CONNECT="CONNECT",f.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",f.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",f.CREATE_PREPARED="CREATE_PREPARED",f.DISCONNECT="DISCONNECT",f.DROP_FILE="DROP_FILE",f.DROP_FILES="DROP_FILES",f.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",f.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",f.FLUSH_FILES="FLUSH_FILES",f.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",f.GET_TABLE_NAMES="GET_TABLE_NAMES",f.GET_VERSION="GET_VERSION",f.GLOB_FILE_INFOS="GLOB_FILE_INFOS",f.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",f.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",f.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",f.INSTANTIATE="INSTANTIATE",f.OPEN="OPEN",f.PING="PING",f.POLL_PENDING_QUERY="POLL_PENDING_QUERY",f.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",f.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",f.REGISTER_FILE_URL="REGISTER_FILE_URL",f.RESET="RESET",f.RUN_PREPARED="RUN_PREPARED",f.RUN_QUERY="RUN_QUERY",f.SEND_PREPARED="SEND_PREPARED",f.START_PENDING_QUERY="START_PENDING_QUERY",f.TOKENIZE="TOKENIZE",f),sH=((y=sH||{}).CONNECTION_INFO="CONNECTION_INFO",y.ERROR="ERROR",y.FEATURE_FLAGS="FEATURE_FLAGS",y.FILE_BUFFER="FILE_BUFFER",y.FILE_INFOS="FILE_INFOS",y.FILE_SIZE="FILE_SIZE",y.FILE_STATISTICS="FILE_STATISTICS",y.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",y.LOG="LOG",y.PROGRESS_UPDATE="PROGRESS_UPDATE",y.OK="OK",y.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",y.QUERY_PLAN="QUERY_PLAN",y.QUERY_RESULT="QUERY_RESULT",y.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",y.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",y.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",y.REGISTERED_FILE="REGISTERED_FILE",y.SCRIPT_TOKENS="SCRIPT_TOKENS",y.SUCCESS="SUCCESS",y.TABLE_NAMES="TABLE_NAMES",y.VERSION_STRING="VERSION_STRING",y),sX=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((e,t)=>{this.promiseResolver=e,this.promiseRejecter=t})}};function s0(e,t){let i=function e(t){switch(t.typeId){case nj.Binary:return{sqlType:"binary"};case nj.Bool:return{sqlType:"bool"};case nj.Date:return{sqlType:"date"};case nj.DateDay:return{sqlType:"date32[d]"};case nj.DateMillisecond:return{sqlType:"date64[ms]"};case nj.Decimal:return{sqlType:"decimal",precision:t.precision,scale:t.scale};case nj.Float:return{sqlType:"float"};case nj.Float16:return{sqlType:"float16"};case nj.Float32:return{sqlType:"float32"};case nj.Float64:return{sqlType:"float64"};case nj.Int:return{sqlType:"int32"};case nj.Int16:return{sqlType:"int16"};case nj.Int32:return{sqlType:"int32"};case nj.Int64:return{sqlType:"int64"};case nj.Uint16:return{sqlType:"uint16"};case nj.Uint32:return{sqlType:"uint32"};case nj.Uint64:return{sqlType:"uint64"};case nj.Uint8:return{sqlType:"uint8"};case nj.IntervalDayTime:return{sqlType:"interval[dt]"};case nj.IntervalYearMonth:return{sqlType:"interval[m]"};case nj.List:return{sqlType:"list",valueType:e(t.valueType)};case nj.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case nj.Null:return{sqlType:"null"};case nj.Utf8:return{sqlType:"utf8"};case nj.Struct:return{sqlType:"struct",fields:t.children.map(e=>s0(e.name,e.type))};case nj.Map:return{sqlType:"map",keyType:e(t.keyType),valueType:e(t.valueType)};case nj.Time:return{sqlType:"time[s]"};case nj.TimeMicrosecond:return{sqlType:"time[us]"};case nj.TimeMillisecond:return{sqlType:"time[ms]"};case nj.TimeNanosecond:return{sqlType:"time[ns]"};case nj.TimeSecond:return{sqlType:"time[s]"};case nj.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case nj.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case nj.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case nj.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case nj.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw Error("unsupported arrow type: ".concat(t.toString()))}(t);return i.name=e,i}var s1=new TextEncoder,s2=class{constructor(e,t=null){this._onInstantiationProgress=[],this._onExecutionProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),null!=t&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,t)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker)return void console.error("cannot send a message since the worker is not set!");let i=this._nextMessageId++;return this._pendingRequests.set(i,e),this._worker.postMessage({messageId:i,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let i=e.data;switch(i.type){case"PROGRESS_UPDATE":for(let e of this._onExecutionProgress)e(i.data);return;case"LOG":return void this._logger.log(i.data);case"INSTANTIATE_PROGRESS":for(let e of this._onInstantiationProgress)e(i.data);return}let r=this._pendingRequests.get(i.requestId);if(!r)return void console.warn("unassociated response: [".concat(i.requestId,", ").concat(i.type.toString(),"]"));if(this._pendingRequests.delete(i.requestId),"ERROR"==i.type){let e=Error(i.data.message);e.name=i.data.name,null!=(t=Object.getOwnPropertyDescriptor(e,"stack"))&&t.writable&&(e.stack=i.data.stack),r.promiseRejecter(e);return}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"REGISTER_OPFS_FILE_NAME":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if("OK"==i.type)return void r.promiseResolver(i.data);break;case"INSTANTIATE":if(this._onInstantiationProgress=[],"OK"==i.type)return void r.promiseResolver(i.data);break;case"GLOB_FILE_INFOS":if("FILE_INFOS"==i.type)return void r.promiseResolver(i.data);break;case"GET_VERSION":if("VERSION_STRING"==i.type)return void r.promiseResolver(i.data);break;case"GET_FEATURE_FLAGS":if("FEATURE_FLAGS"==i.type)return void r.promiseResolver(i.data);break;case"GET_TABLE_NAMES":if("TABLE_NAMES"==i.type)return void r.promiseResolver(i.data);break;case"TOKENIZE":if("SCRIPT_TOKENS"==i.type)return void r.promiseResolver(i.data);break;case"COPY_FILE_TO_BUFFER":if("FILE_BUFFER"==i.type)return void r.promiseResolver(i.data);break;case"EXPORT_FILE_STATISTICS":if("FILE_STATISTICS"==i.type)return void r.promiseResolver(i.data);break;case"CONNECT":if("CONNECTION_INFO"==i.type)return void r.promiseResolver(i.data);break;case"RUN_PREPARED":case"RUN_QUERY":if("QUERY_RESULT"==i.type)return void r.promiseResolver(i.data);break;case"SEND_PREPARED":if("QUERY_RESULT_HEADER"==i.type)return void r.promiseResolver(i.data);break;case"START_PENDING_QUERY":case"POLL_PENDING_QUERY":if("QUERY_RESULT_HEADER_OR_NULL"==i.type)return void r.promiseResolver(i.data);break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],"SUCCESS"==i.type)return void r.promiseResolver(i.data);break;case"FETCH_QUERY_RESULTS":if("QUERY_RESULT_CHUNK"==i.type)return void r.promiseResolver(i.data);break;case"CREATE_PREPARED":if("PREPARED_STATEMENT_ID"==i.type)return void r.promiseResolver(i.data)}r.promiseRejecter(Error("unexpected response type: ".concat(i.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),0!=this._pendingRequests.size)return void console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));this._pendingRequests.clear()}async reset(){let e=new sX("RESET",null);return await this.postTask(e)}async ping(){let e=new sX("PING",null);await this.postTask(e)}async dropFile(e){let t=new sX("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new sX("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new sX("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,i=e=>{}){this._onInstantiationProgress.push(i);let r=new sX("INSTANTIATE",[e,t]);return await this.postTask(r)}async getVersion(){let e=new sX("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new sX("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new sX("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new sX("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new sX("CONNECT",null);return await this.postTask(e)}async connect(){return new sJ(this,await this.connectInternal())}async disconnect(e){let t=new sX("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let i=new sX("RUN_QUERY",[e,t]);return await this.postTask(i)}async startPendingQuery(e,t,i=!1){let r=new sX("START_PENDING_QUERY",[e,t,i]);return await this.postTask(r)}async pollPendingQuery(e){let t=new sX("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new sX("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new sX("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let i=new sX("GET_TABLE_NAMES",[e,t]);return await this.postTask(i)}async createPrepared(e,t){let i=new sX("CREATE_PREPARED",[e,t]);return await this.postTask(i)}async closePrepared(e,t){let i=new sX("CLOSE_PREPARED",[e,t]);await this.postTask(i)}async runPrepared(e,t,i){let r=new sX("RUN_PREPARED",[e,t,i]);return await this.postTask(r)}async sendPrepared(e,t,i){let r=new sX("SEND_PREPARED",[e,t,i]);return await this.postTask(r)}async globFiles(e){let t=new sX("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let i=s1.encode(t);await this.registerFileBuffer(e,i)}async registerFileURL(e,t,i,r){void 0===t&&(t=e);let n=new sX("REGISTER_FILE_URL",[e,t,i,r]);await this.postTask(n)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let i=new sX("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(i,[t.buffer])}async registerFileHandle(e,t,i,r){let n=new sX("REGISTER_FILE_HANDLE",[e,t,i,r]);await this.postTask(n,[])}async registerOPFSFileName(e){let t=new sX("REGISTER_OPFS_FILE_NAME",[e]);await this.postTask(t,[])}async collectFileStatistics(e,t){let i=new sX("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(i,[])}async exportFileStatistics(e){let t=new sX("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new sX("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let i=new sX("COPY_FILE_TO_PATH",[e,t]);await this.postTask(i)}async insertArrowFromIPCStream(e,t,i){if(0==t.length)return;let r=new sX("INSERT_ARROW_FROM_IPC_STREAM",[e,t,i]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(e,t,i){if(void 0!==i.columns){let e=[];for(let t in i.columns){let r=i.columns[t];e.push(s0(t,r))}i.columnsFlat=e,delete i.columns}let r=new sX("IMPORT_CSV_FROM_PATH",[e,t,i]);await this.postTask(r)}async insertJSONFromPath(e,t,i){if(void 0!==i.columns){let e=[];for(let t in i.columns){let r=i.columns[t];e.push(s0(t,r))}i.columnsFlat=e,delete i.columns}let r=new sX("IMPORT_JSON_FROM_PATH",[e,t,i]);await this.postTask(r)}};m=new TextDecoder,e=>("u">typeof SharedArrayBuffer&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),m.decode(e));var s4=((v=s4||{})[v.BUFFER=0]="BUFFER",v[v.NODE_FS=1]="NODE_FS",v[v.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",v[v.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",v[v.HTTP=4]="HTTP",v[v.S3=5]="S3",v),s3=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),s8=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),s6=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),s5=()=>(async e=>{try{return"u">typeof MessageChannel&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),s9="1.30.0".split(".");s9[0],s9[1],s9[2];var s7=()=>typeof navigator>"u",oe=null,ot=null,oi=null,or=null,on=null;async function os(){return null==oe&&(oe="u">typeof BigInt64Array),null==ot&&(ot=await s8()),null==oi&&(oi=await s5()),null==or&&(or=await s6()),null==on&&(on=await s3()),{bigInt64Array:oe,crossOriginIsolated:s7()||globalThis.crossOriginIsolated||!1,wasmExceptions:ot,wasmSIMD:or,wasmThreads:oi,wasmBulkMemory:on}}async function oo(e){let t=await os();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}w=null!=(b=sM())?sC(sP(b)):{},((e,t,i,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of sR(t))sL.call(e,n)||n===i||sF(e,n,{get:()=>t[n],enumerable:!(r=sV(t,n))||r.enumerable});return})(!g&&b&&b.__esModule?w:sF(w,"default",{value:b,enumerable:!0}),b)},9572:function(e,t,i){i.d(t,{r:()=>o});var r=i(11593);class n{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}let s=BigInt("3853314791062309107");class o extends n{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,t){await (0,r.i)`select pg_advisory_xact_lock(${r.i.lit(s)})`.execute(e)}async releaseMigrationLock(e,t){}}},76533:function(e,t,i){i.d(t,{n:()=>b});var r=i(75197),n=i(76059),s=i(47589);class o{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=(0,s.vV)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}var a=i(75460),d=i(82923),l=i(15659),u=i(19997),c=i(6886),h=i(64380);class p extends o{#t="";#i=[];get numParameters(){return this.#i.length}compileQuery(e){return this.#t="",this.#i=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),(0,s.vV)({query:e,sql:this.getSql(),parameters:[...this.#i]})}getSql(){return this.#t}visitSelectQuery(e){let t=void 0!==this.parentNode&&!d.L.is(this.parentNode)&&!n.P.is(this.parentNode)&&!r.u.is(this.parentNode)&&!u.B.is(this.parentNode)&&!c.M.is(this.parentNode);void 0===this.parentNode&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),t&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,t=", "){let i=e.length-1;for(let r=0;r<=i;r++)this.visitNode(e[r]),r<i&&this.append(t)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let t=this.nodeStack.find(l.V.is),i=t!==e;!i&&e.explain&&(this.visitNode(e.explain),this.append(" ")),i&&!h.F.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),i&&!h.F.is(t)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let t=this.nodeStack.find(l.V.is)!==e;!t&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),t&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!(0,s.HD)(e.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:t}=e;for(let e=0;e<t.length;++e)this.appendValue(t[e]),e!==t.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(m[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:t,parameters:i}=e;for(let e=0;e<t.length;++e)this.append(t[e]),i.length>e&&this.visitNode(i[e])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let t=this.nodeStack.find(l.V.is),i=t!==e;!i&&e.explain&&(this.visitNode(e.explain),this.append(" ")),i&&!h.F.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),i&&!h.F.is(t)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),!0===e.doNothing?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),(0,s.jn)(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),"cascade"===e.modifier?this.append(" cascade"):"restrict"===e.modifier&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(f[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return a.$X.is(e)&&"-"===e.operator}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){for(let t of(e.inOperator&&this.visitNode(e.inOperator),this.append("'$"),e.pathLegs))this.visitNode(t);this.append("'")}visitJSONPathLeg(e){let t="ArrayLocation"===e.type;this.append(t?"[":"."),this.append(String(e.value)),t&&this.append("]")}visitJSONOperatorChain(e){for(let t=0,i=e.values.length;t<i;t++)t===i-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[t])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#t+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let t=this.getLeftIdentifierWrapper(),i=this.getRightIdentifierWrapper(),r="";for(let n of e)r+=n,n===t?r+=t:n===i&&(r+=i);return r}addParameter(e){this.#i.push(e)}appendImmediateValue(e){if((0,s.HD)(e))this.append(`'${e}'`);else if((0,s.hj)(e)||(0,s.jn)(e))this.append(e.toString());else if((0,s.Ft)(e))this.append("null");else if((0,s.J_)(e))this.appendImmediateValue(e.toISOString());else if((0,s.C4)(e))this.appendImmediateValue(e.toString());else throw Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((e,t)=>e.modifier&&t.modifier?y[e.modifier]-y[t.modifier]:1),(0,s.vV)(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}let f=(0,s.vV)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),y=(0,s.vV)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),m=(0,s.vV)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"}),v=/"/g;class b extends p{sanitizeIdentifier(e){return e.replace(v,'""')}}},67771:function(e,t,i){i.d(t,{U:()=>r});class r{async init(){}async acquireConnection(){return new n}async beginTransaction(){}async commitTransaction(){}async rollbackTransaction(){}async releaseConnection(){}async destroy(){}}class n{async executeQuery(){return{rows:[]}}async *streamQuery(){}}},28165:function(e,t,i){i.d(t,{Q:()=>o,a:()=>a});var r=i(62240),n=i(57550),s=i(47589);class o{#r;get dynamicReference(){return this.#r}get refType(){}constructor(e){this.#r=e}toOperationNode(){return(0,n.F9)(this.#r)}}function a(e){return(0,s.Kn)(e)&&(0,r.x)(e)&&(0,s.HD)(e.dynamicReference)}},44951:function(e,t,i){i.d(t,{b:()=>R,Z:()=>P});var r=i(10957),n=i(11973),s=i(90679),o=i(16697),a=i(25381),d=i(15123),l=i(57550),u=i(50350),c=i(82923),h=i(60081),p=i(75460),f=i(47589);let y=(0,f.vV)({is:e=>"UnaryOperationNode"===e.kind,create:(e,t)=>(0,f.vV)({kind:"UnaryOperationNode",operator:e,operand:t})});var m=i(11942),v=i(39745),b=i(71661),g=i(33052),w=i(1784),N=i(36548),_=i(66523);let I=(0,f.vV)({is:e=>"JSONPathLegNode"===e.kind,create:(e,t)=>(0,f.vV)({kind:"JSONPathLegNode",type:e,value:t})});var S=i(54474),T=i(49188),O=i(62240),x=i(38419);class E{#n;constructor(e){this.#n=e}at(e){return this.#s("ArrayLocation",e)}key(e){return this.#s("Member",e)}#s(e,t){return new A(T.y.is(this.#n)?T.y.cloneWithTraversal(this.#n,S.t.is(this.#n.traversal)?S.t.cloneWithLeg(this.#n.traversal,I.create(e,t)):_.s.cloneWithValue(this.#n.traversal,x.g.createImmediate(t))):S.t.cloneWithLeg(this.#n,I.create(e,t)))}}class A extends E{#n;constructor(e){super(e),this.#n=e}get expressionType(){}as(e){return new D(this,e)}$castTo(){return new A(this.#n)}$notNull(){return new A(this.#n)}toOperationNode(){return this.#n}}class D{#o;#a;constructor(e,t){this.#o=e,this.#a=t}get expression(){return this.#o}get alias(){return this.#a}toOperationNode(){return w.i.create(this.#o.toOperationNode(),(0,O.x)(this.#a)?this.#a.toOperationNode():N.T.create(this.#a))}}var B=i(95315),k=i(83550);let C=(0,f.vV)({is:e=>"TupleNode"===e.kind,create:e=>(0,f.vV)({kind:"TupleNode",values:(0,f.vV)(e)})});var F=i(65147);let V=(0,f.vV)({is:e=>"CastNode"===e.kind,create:(e,t)=>(0,f.vV)({kind:"CastNode",expression:e,dataType:t})});function R(e=v.H){function t(e,t){return new h.Pc(y.create(p.$X.create(e),(0,l.jI)(t)))}let i=Object.assign(function(e,t,i){return new h.Pc((0,u.i9)(e,t,i))},{fn:void 0,eb:void 0,selectFrom:t=>(0,r.u)({queryId:(0,a.y)(),executor:e,queryNode:n.a.createFrom((0,s._V)(t))}),case:e=>new b.wY({node:g.j.create((0,f.o8)(e)?void 0:(0,l.jI)(e))}),ref:(e,t)=>(0,f.o8)(t)?new h.Pc((0,l.KX)(e)):new E((0,l.D2)(e,t)),jsonPath:()=>new E(S.t.create()),table:e=>new h.Pc((0,s.G2)(e)),val:e=>new h.Pc((0,m.j2)(e)),refTuple:(...e)=>new h.Pc(C.create(e.map(l.jI))),tuple:(...e)=>new h.Pc(C.create(e.map(m.j2))),lit:e=>new h.Pc((0,m.AB)(e)),unary:t,not:e=>t("not",e),exists:e=>t("exists",e),neg:e=>t("-",e),between:(e,t,i)=>new h.Pc(B.a.create((0,l.jI)(e),p.$X.create("between"),k.O.create((0,m.j2)(t),(0,m.j2)(i)))),betweenSymmetric:(e,t,i)=>new h.Pc(B.a.create((0,l.jI)(e),p.$X.create("between symmetric"),k.O.create((0,m.j2)(t),(0,m.j2)(i)))),and:e=>new h.Pc((0,f.DM)(e)?(0,u.QX)(e,"and"):(0,u.Li)(e,"and")),or:e=>new h.Pc((0,f.DM)(e)?(0,u.QX)(e,"or"):(0,u.Li)(e,"or")),parens(...e){let t=(0,u.k0)(e);return new h.Pc(c.L.is(t)?t:c.L.create(t))},cast:(e,t)=>new h.Pc(V.create((0,l.jI)(e),(0,F.z)(t))),withSchema:t=>R(e.withPluginAtFront(new o.v(t)))});return i.fn=(0,d.W)(),i.eb=i,i}function P(e){return R()}},60081:function(e,t,i){i.d(t,{Pc:()=>u});var r=i(1784),n=i(83550),s=i(36548),o=i(62240),a=i(27306),d=i(82923),l=i(50350);class u{#n;constructor(e){this.#n=e}get expressionType(){}as(e){return new c(this,e)}or(...e){return new h(a.O.create(this.#n,(0,l.k0)(e)))}and(...e){return new p(n.O.create(this.#n,(0,l.k0)(e)))}$castTo(){return new u(this.#n)}$notNull(){return new u(this.#n)}toOperationNode(){return this.#n}}class c{#d;#a;constructor(e,t){this.#d=e,this.#a=t}get expression(){return this.#d}get alias(){return this.#a}toOperationNode(){return r.i.create(this.#d.toOperationNode(),(0,o.x)(this.#a)?this.#a.toOperationNode():s.T.create(this.#a))}}class h{#n;constructor(e){this.#n=e}get expressionType(){}as(e){return new c(this,e)}or(...e){return new h(a.O.create(this.#n,(0,l.k0)(e)))}$castTo(){return new h(this.#n)}toOperationNode(){return d.L.create(this.#n)}}class p{#n;constructor(e){this.#n=e}get expressionType(){}as(e){return new c(this,e)}and(...e){return new p(n.O.create(this.#n,(0,l.k0)(e)))}$castTo(){return new p(this.#n)}toOperationNode(){return d.L.create(this.#n)}}},90375:function(e,t,i){i.d(t,{$2:()=>eU});var r=i(47589);let n=(0,r.vV)({is:e=>"AlterTableNode"===e.kind,create:e=>(0,r.vV)({kind:"AlterTableNode",table:e}),cloneWithTableProps:(e,t)=>(0,r.vV)({...e,...t}),cloneWithColumnAlteration:(e,t)=>(0,r.vV)({...e,columnAlterations:e.columnAlterations?[...e.columnAlterations,t]:[t]})});var s=i(36548);let o=(0,r.vV)({is:e=>"CreateIndexNode"===e.kind,create:e=>(0,r.vV)({kind:"CreateIndexNode",name:s.T.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t}),cloneWithColumns:(e,t)=>(0,r.vV)({...e,columns:[...e.columns||[],...t]})}),a=(0,r.vV)({is:e=>"CreateSchemaNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"CreateSchemaNode",schema:s.T.create(e),...t}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});var d=i(75197),l=i(28202);let u=(0,r.vV)({is:e=>"DropIndexNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"DropIndexNode",name:l.j.create(e),...t}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),c=(0,r.vV)({is:e=>"DropSchemaNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"DropSchemaNode",schema:s.T.create(e),...t}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),h=(0,r.vV)({is:e=>"DropTableNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"DropTableNode",table:e,...t}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});var p=i(90679);let f=(0,r.vV)({is:e=>"AddColumnNode"===e.kind,create:e=>(0,r.vV)({kind:"AddColumnNode",column:e})});var y=i(1824);let m=(0,r.vV)({is:e=>"ColumnDefinitionNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"ColumnDefinitionNode",column:y.k.create(e),dataType:t}),cloneWithFrontModifier:(e,t)=>(0,r.vV)({...e,frontModifiers:e.frontModifiers?(0,r.vV)([...e.frontModifiers,t]):[t]}),cloneWithEndModifier:(e,t)=>(0,r.vV)({...e,endModifiers:e.endModifiers?(0,r.vV)([...e.endModifiers,t]):[t]}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),v=(0,r.vV)({is:e=>"DropColumnNode"===e.kind,create:e=>(0,r.vV)({kind:"DropColumnNode",column:y.k.create(e)})}),b=(0,r.vV)({is:e=>"RenameColumnNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"RenameColumnNode",column:y.k.create(e),renameTo:y.k.create(t)})});var g=i(26481);let w=(0,r.vV)({is:e=>"CheckConstraintNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"CheckConstraintNode",expression:e,name:t?s.T.create(t):void 0})}),N=["no action","restrict","cascade","set null","set default"],_=(0,r.vV)({is:e=>"ReferencesNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"ReferencesNode",table:e,columns:(0,r.vV)([...t])}),cloneWithOnDelete:(e,t)=>(0,r.vV)({...e,onDelete:t}),cloneWithOnUpdate:(e,t)=>(0,r.vV)({...e,onUpdate:t})});var I=i(8809),S=i(57550),T=i(62240),O=i(38419);function x(e){return(0,T.x)(e)?e.toOperationNode():O.g.createImmediate(e)}let E=(0,r.vV)({is:e=>"GeneratedNode"===e.kind,create:e=>(0,r.vV)({kind:"GeneratedNode",...e}),createWithExpression:e=>(0,r.vV)({kind:"GeneratedNode",always:!0,expression:e}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),A=(0,r.vV)({is:e=>"DefaultValueNode"===e.kind,create:e=>(0,r.vV)({kind:"DefaultValueNode",defaultValue:e})});function D(e){if(N.includes(e))return e;throw Error(`invalid OnModifyForeignAction ${e}`)}class B{#n;constructor(e){this.#n=e}autoIncrement(){return new B(m.cloneWith(this.#n,{autoIncrement:!0}))}identity(){return new B(m.cloneWith(this.#n,{identity:!0}))}primaryKey(){return new B(m.cloneWith(this.#n,{primaryKey:!0}))}references(e){let t=(0,S.KX)(e);if(!t.table||I.B.is(t.column))throw Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new B(m.cloneWith(this.#n,{references:_.create(t.table,[t.column])}))}onDelete(e){if(!this.#n.references)throw Error("on delete constraint can only be added for foreign keys");return new B(m.cloneWith(this.#n,{references:_.cloneWithOnDelete(this.#n.references,D(e))}))}onUpdate(e){if(!this.#n.references)throw Error("on update constraint can only be added for foreign keys");return new B(m.cloneWith(this.#n,{references:_.cloneWithOnUpdate(this.#n.references,D(e))}))}unique(){return new B(m.cloneWith(this.#n,{unique:!0}))}notNull(){return new B(m.cloneWith(this.#n,{notNull:!0}))}unsigned(){return new B(m.cloneWith(this.#n,{unsigned:!0}))}defaultTo(e){return new B(m.cloneWith(this.#n,{defaultTo:A.create(x(e))}))}check(e){return new B(m.cloneWith(this.#n,{check:w.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new B(m.cloneWith(this.#n,{generated:E.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new B(m.cloneWith(this.#n,{generated:E.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new B(m.cloneWith(this.#n,{generated:E.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#n.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new B(m.cloneWith(this.#n,{generated:E.cloneWith(this.#n.generated,{stored:!0})}))}modifyFront(e){return new B(m.cloneWithFrontModifier(this.#n,e.toOperationNode()))}nullsNotDistinct(){return new B(m.cloneWith(this.#n,{nullsNotDistinct:!0}))}ifNotExists(){return new B(m.cloneWith(this.#n,{ifNotExists:!0}))}modifyEnd(e){return new B(m.cloneWithEndModifier(this.#n,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#n}}(0,g.q)(B,"don't await ColumnDefinitionBuilder instances directly.");let k=(0,r.vV)({is:e=>"ModifyColumnNode"===e.kind,create:e=>(0,r.vV)({kind:"ModifyColumnNode",column:e})});var C=i(65147);let F=(0,r.vV)({is:e=>"ForeignKeyConstraintNode"===e.kind,create:(e,t,i,n)=>(0,r.vV)({kind:"ForeignKeyConstraintNode",columns:e,references:_.create(t,i),name:n?s.T.create(n):void 0}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});class V{#n;constructor(e){this.#n=e}onDelete(e){return new V(F.cloneWith(this.#n,{onDelete:D(e)}))}onUpdate(e){return new V(F.cloneWith(this.#n,{onUpdate:D(e)}))}$call(e){return e(this)}toOperationNode(){return this.#n}}(0,g.q)(V,"don't await ForeignKeyConstraintBuilder instances directly.");let R=(0,r.vV)({is:e=>"AddConstraintNode"===e.kind,create:e=>(0,r.vV)({kind:"AddConstraintNode",constraint:e})}),P=(0,r.vV)({is:e=>"UniqueConstraintNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"UniqueConstraintNode",columns:(0,r.vV)(e.map(y.k.create)),name:t?s.T.create(t):void 0,nullsNotDistinct:i}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),L=(0,r.vV)({is:e=>"DropConstraintNode"===e.kind,create:e=>(0,r.vV)({kind:"DropConstraintNode",constraintName:s.T.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})}),M=(0,r.vV)({is:e=>"AlterColumnNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"AlterColumnNode",column:y.k.create(e),[t]:i})});class U{#l;constructor(e){this.#l=e}setDataType(e){return new W(M.create(this.#l,"dataType",(0,C.z)(e)))}setDefault(e){return new W(M.create(this.#l,"setDefault",x(e)))}dropDefault(){return new W(M.create(this.#l,"dropDefault",!0))}setNotNull(){return new W(M.create(this.#l,"setNotNull",!0))}dropNotNull(){return new W(M.create(this.#l,"dropNotNull",!0))}$call(e){return e(this)}}(0,g.q)(U,"don't await AlterColumnBuilder instances");class W{#u;constructor(e){this.#u=e}toOperationNode(){return this.#u}}(0,g.q)(W,"don't await AlteredColumnBuilder instances");class z{#c;constructor(e){this.#c=(0,r.vV)(e)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(z,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class q{#c;constructor(e){this.#c=(0,r.vV)(e)}onDelete(e){return new q({...this.#c,constraintBuilder:this.#c.constraintBuilder.onDelete(e)})}onUpdate(e){return new q({...this.#c,constraintBuilder:this.#c.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(n.cloneWithTableProps(this.#c.node,{addConstraint:R.create(this.#c.constraintBuilder.toOperationNode())}),this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(q,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class j{#c;constructor(e){this.#c=(0,r.vV)(e)}ifExists(){return new j({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropConstraint:L.cloneWith(this.#c.node.dropConstraint,{ifExists:!0})})})}cascade(){return new j({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropConstraint:L.cloneWith(this.#c.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new j({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropConstraint:L.cloneWith(this.#c.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(j,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");let $=(0,r.vV)({is:e=>"PrimaryKeyConstraintNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"PrimaryKeyConstraintNode",columns:(0,r.vV)(e.map(y.k.create)),name:t?s.T.create(t):void 0})}),Q=(0,r.vV)({is:e=>"AddIndexNode"===e.kind,create:e=>(0,r.vV)({kind:"AddIndexNode",name:s.T.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t}),cloneWithColumns:(e,t)=>(0,r.vV)({...e,columns:[...e.columns||[],...t]})});var Z=i(67386);class J{#c;constructor(e){this.#c=(0,r.vV)(e)}unique(){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWith(this.#c.node.addIndex,{unique:!0})})})}column(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWithColumns(this.#c.node.addIndex,[(0,S.Dz)(e)])})})}columns(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWithColumns(this.#c.node.addIndex,e.map(S.Dz))})})}expression(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWithColumns(this.#c.node.addIndex,[e.toOperationNode()])})})}using(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.cloneWith(this.#c.node.addIndex,{using:Z.x.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(J,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class G{#n;constructor(e){this.#n=e}toOperationNode(){return this.#n}nullsNotDistinct(){return new G(P.cloneWith(this.#n,{nullsNotDistinct:!0}))}}(0,g.q)(G,"don't await UniqueConstraintNodeBuilder instances directly.");class K{#c;constructor(e){this.#c=(0,r.vV)(e)}renameTo(e){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{renameTo:(0,p.G2)(e)})})}setSchema(e){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{setSchema:s.T.create(e)})})}alterColumn(e,t){let i=t(new U(e));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,i.toOperationNode())})}dropColumn(e){return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,v.create(e))})}renameColumn(e,t){return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,b.create(e,t))})}addColumn(e,t,i=r.ZT){let s=i(new B(m.create(e,(0,C.z)(t))));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,f.create(s.toOperationNode()))})}modifyColumn(e,t,i=r.ZT){let s=i(new B(m.create(e,(0,C.z)(t))));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,k.create(s.toOperationNode()))})}addUniqueConstraint(e,t,i=r.ZT){let s=i(new G(P.create(t,e)));return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addConstraint:R.create(s.toOperationNode())})})}addCheckConstraint(e,t){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addConstraint:R.create(w.create(t.toOperationNode(),e))})})}addForeignKeyConstraint(e,t,i,r){return new q({...this.#c,constraintBuilder:new V(F.create(t.map(y.k.create),(0,p.G2)(i),r.map(y.k.create),e))})}addPrimaryKeyConstraint(e,t){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addConstraint:R.create($.create(t,e))})})}dropConstraint(e){return new j({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropConstraint:L.create(e)})})}addIndex(e){return new J({...this.#c,node:n.cloneWithTableProps(this.#c.node,{addIndex:Q.create(e)})})}dropIndex(e){return new z({...this.#c,node:n.cloneWithTableProps(this.#c.node,{dropIndex:u.create(e)})})}$call(e){return e(this)}}(0,g.q)(K,"don't await AlterTableBuilder instances");class Y{#c;constructor(e){this.#c=(0,r.vV)(e)}alterColumn(e,t){let i=t(new U(e));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,i.toOperationNode())})}dropColumn(e){return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,v.create(e))})}renameColumn(e,t){return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,b.create(e,t))})}addColumn(e,t,i=r.ZT){let s=i(new B(m.create(e,(0,C.z)(t))));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,f.create(s.toOperationNode()))})}modifyColumn(e,t,i=r.ZT){let s=i(new B(m.create(e,(0,C.z)(t))));return new Y({...this.#c,node:n.cloneWithColumnAlteration(this.#c.node,k.create(s.toOperationNode()))})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(Y,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var H=i(50350),X=i(15659),ee=i(24107);class et extends ee.s{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class ei{#c;constructor(e){this.#c=(0,r.vV)(e)}ifNotExists(){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{ifNotExists:!0})})}unique(){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{unique:!0})})}nullsNotDistinct(){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{nullsNotDistinct:!0})})}on(e){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{table:(0,p.G2)(e)})})}column(e){return new ei({...this.#c,node:o.cloneWithColumns(this.#c.node,[(0,S.Dz)(e)])})}columns(e){return new ei({...this.#c,node:o.cloneWithColumns(this.#c.node,e.map(S.Dz))})}expression(e){return new ei({...this.#c,node:o.cloneWithColumns(this.#c.node,[e.toOperationNode()])})}using(e){return new ei({...this.#c,node:o.cloneWith(this.#c.node,{using:Z.x.createWithSql(e)})})}where(...e){let t=new et;return new ei({...this.#c,node:X.V.cloneWithWhere(this.#c.node,t.transformNode((0,H.k0)(e)))})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(ei,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class er{#c;constructor(e){this.#c=(0,r.vV)(e)}ifNotExists(){return new er({...this.#c,node:a.cloneWith(this.#c.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(er,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var en=i(28173);class es{#c;constructor(e){this.#c=(0,r.vV)(e)}temporary(){return new es({...this.#c,node:d.u.cloneWith(this.#c.node,{temporary:!0})})}onCommit(e){return new es({...this.#c,node:d.u.cloneWith(this.#c.node,{onCommit:function(e){if(d.h.includes(e))return e;throw Error(`invalid OnCommitAction ${e}`)}(e)})})}ifNotExists(){return new es({...this.#c,node:d.u.cloneWith(this.#c.node,{ifNotExists:!0})})}addColumn(e,t,i=r.ZT){let n=i(new B(m.create(e,(0,C.z)(t))));return new es({...this.#c,node:d.u.cloneWithColumn(this.#c.node,n.toOperationNode())})}addPrimaryKeyConstraint(e,t){return new es({...this.#c,node:d.u.cloneWithConstraint(this.#c.node,$.create(t,e))})}addUniqueConstraint(e,t,i=r.ZT){let n=i(new G(P.create(t,e)));return new es({...this.#c,node:d.u.cloneWithConstraint(this.#c.node,n.toOperationNode())})}addCheckConstraint(e,t){return new es({...this.#c,node:d.u.cloneWithConstraint(this.#c.node,w.create(t.toOperationNode(),e))})}addForeignKeyConstraint(e,t,i,n,s=r.ZT){let o=s(new V(F.create(t.map(y.k.create),(0,p.G2)(i),n.map(y.k.create),e)));return new es({...this.#c,node:d.u.cloneWithConstraint(this.#c.node,o.toOperationNode())})}modifyFront(e){return new es({...this.#c,node:d.u.cloneWithFrontModifier(this.#c.node,e.toOperationNode())})}modifyEnd(e){return new es({...this.#c,node:d.u.cloneWithEndModifier(this.#c.node,e.toOperationNode())})}as(e){return new es({...this.#c,node:d.u.cloneWith(this.#c.node,{selectQuery:(0,en.BJ)(e)})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(es,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class eo{#c;constructor(e){this.#c=(0,r.vV)(e)}on(e){return new eo({...this.#c,node:u.cloneWith(this.#c.node,{table:(0,p.G2)(e)})})}ifExists(){return new eo({...this.#c,node:u.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new eo({...this.#c,node:u.cloneWith(this.#c.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(eo,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class ea{#c;constructor(e){this.#c=(0,r.vV)(e)}ifExists(){return new ea({...this.#c,node:c.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new ea({...this.#c,node:c.cloneWith(this.#c.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(ea,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class ed{#c;constructor(e){this.#c=(0,r.vV)(e)}ifExists(){return new ed({...this.#c,node:h.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new ed({...this.#c,node:h.cloneWith(this.#c.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(ed,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var el=i(25381),eu=i(16697),ec=i(19997);class eh{#h=new et;transformQuery(e){return this.#h.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class ep{#c;constructor(e){this.#c=(0,r.vV)(e)}temporary(){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{temporary:!0})})}materialized(){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{materialized:!0})})}ifNotExists(){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{ifNotExists:!0})})}orReplace(){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{orReplace:!0})})}columns(e){return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{columns:e.map(S.xM)})})}as(e){let t=e.withPlugin(new eh).toOperationNode();return new ep({...this.#c,node:ec.B.cloneWith(this.#c.node,{as:t})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(ep,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");let ef=(0,r.vV)({is:e=>"DropViewNode"===e.kind,create:e=>(0,r.vV)({kind:"DropViewNode",name:l.j.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});class ey{#c;constructor(e){this.#c=(0,r.vV)(e)}materialized(){return new ey({...this.#c,node:ef.cloneWith(this.#c.node,{materialized:!0})})}ifExists(){return new ey({...this.#c,node:ef.cloneWith(this.#c.node,{ifExists:!0})})}cascade(){return new ey({...this.#c,node:ef.cloneWith(this.#c.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(ey,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var em=i(18181);let ev=(0,r.vV)({is:e=>"CreateTypeNode"===e.kind,create:e=>(0,r.vV)({kind:"CreateTypeNode",name:e}),cloneWithEnum:(e,t)=>(0,r.vV)({...e,enum:em.F.create(t.map(e=>O.g.createImmediate(e)))})});class eb{#c;constructor(e){this.#c=(0,r.vV)(e)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}asEnum(e){return new eb({...this.#c,node:ev.cloneWithEnum(this.#c.node,e)})}$call(e){return e(this)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}(0,g.q)(eb,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");let eg=(0,r.vV)({is:e=>"DropTypeNode"===e.kind,create:e=>(0,r.vV)({kind:"DropTypeNode",name:e}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})});class ew{#c;constructor(e){this.#c=(0,r.vV)(e)}ifExists(){return new ew({...this.#c,node:eg.cloneWith(this.#c.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#c.executor.transformQuery(this.#c.node,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){await this.#c.executor.executeQuery(this.compile(),this.#c.queryId)}}function eN(e){if(!e.includes("."))return l.j.create(e);{let t=e.split(".").map(e_);if(2===t.length)return l.j.createWithSchema(t[0],t[1]);throw Error(`invalid schemable identifier ${e}`)}}function e_(e){return e.trim()}(0,g.q)(ew,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");class eI{#p;constructor(e){this.#p=e}createTable(e){return new es({queryId:(0,el.y)(),executor:this.#p,node:d.u.create((0,p.G2)(e))})}dropTable(e){return new ed({queryId:(0,el.y)(),executor:this.#p,node:h.create((0,p.G2)(e))})}createIndex(e){return new ei({queryId:(0,el.y)(),executor:this.#p,node:o.create(e)})}dropIndex(e){return new eo({queryId:(0,el.y)(),executor:this.#p,node:u.create(e)})}createSchema(e){return new er({queryId:(0,el.y)(),executor:this.#p,node:a.create(e)})}dropSchema(e){return new ea({queryId:(0,el.y)(),executor:this.#p,node:c.create(e)})}alterTable(e){return new K({queryId:(0,el.y)(),executor:this.#p,node:n.create((0,p.G2)(e))})}createView(e){return new ep({queryId:(0,el.y)(),executor:this.#p,node:ec.B.create(e)})}dropView(e){return new ey({queryId:(0,el.y)(),executor:this.#p,node:ef.create(e)})}createType(e){return new eb({queryId:(0,el.y)(),executor:this.#p,node:ev.create(eN(e))})}dropType(e){return new ew({queryId:(0,el.y)(),executor:this.#p,node:eg.create(eN(e))})}withPlugin(e){return new eI(this.#p.withPlugin(e))}withoutPlugins(){return new eI(this.#p.withoutPlugins())}withSchema(e){return new eI(this.#p.withPluginAtFront(new eu.v(e)))}}var eS=i(28165);class eT{ref(e){return new eS.Q(e)}}class eO{#f;constructor(e){this.#f=e}async provideConnection(e){let t=await this.#f.acquireConnection();try{return await e(t)}finally{await this.#f.releaseConnection(t)}}}var ex=i(3255),eE=i(56305);class eA extends eE.u{#y;#m;#v;constructor(e,t,i,r=[]){super(r),this.#y=e,this.#m=t,this.#v=i}get adapter(){return this.#m}compileQuery(e){return this.#y.compileQuery(e)}provideConnection(e){return this.#v.provideConnection(e)}withPlugins(e){return new eA(this.#y,this.#m,this.#v,[...this.plugins,...e])}withPlugin(e){return new eA(this.#y,this.#m,this.#v,[...this.plugins,e])}withPluginAtFront(e){return new eA(this.#y,this.#m,this.#v,[e,...this.plugins])}withConnectionProvider(e){return new eA(this.#y,this.#m,e,[...this.plugins])}withoutPlugins(){return new eA(this.#y,this.#m,this.#v,[])}}function eD(){return"undefined"!=typeof performance&&(0,r.mf)(performance.now)?performance.now():Date.now()}class eB{#f;#b;#g;#w;#N;#_=new WeakSet;constructor(e,t){this.#w=!1,this.#f=e,this.#b=t}async init(){if(this.#N)throw Error("driver has already been destroyed");this.#g||(this.#g=this.#f.init().then(()=>{this.#w=!0}).catch(e=>(this.#g=void 0,Promise.reject(e)))),await this.#g}async acquireConnection(){if(this.#N)throw Error("driver has already been destroyed");this.#w||await this.init();let e=await this.#f.acquireConnection();return this.#_.has(e)||(this.#I()&&this.#S(e),this.#_.add(e)),e}async releaseConnection(e){await this.#f.releaseConnection(e)}beginTransaction(e,t){return this.#f.beginTransaction(e,t)}commitTransaction(e){return this.#f.commitTransaction(e)}rollbackTransaction(e){return this.#f.rollbackTransaction(e)}async destroy(){this.#g&&(await this.#g,this.#N||(this.#N=this.#f.destroy().catch(e=>(this.#N=void 0,Promise.reject(e)))),await this.#N)}#I(){return this.#b.isLevelEnabled("query")||this.#b.isLevelEnabled("error")}#S(e){let t=e.executeQuery;e.executeQuery=async i=>{let r,n=eD();try{return await t.call(e,i)}catch(e){throw r=e,await this.#T(e,i,n),e}finally{r||await this.#O(i,n)}}}async #T(e,t,i){await this.#b.error(()=>({level:"error",error:e,query:t,queryDurationMillis:this.#x(i)}))}async #O(e,t){await this.#b.query(()=>({level:"query",query:e,queryDurationMillis:this.#x(t)}))}#x(e){return eD()-e}}let ek=()=>{};class eC{#E;#A;constructor(e){this.#E=e}async provideConnection(e){for(;this.#A;)await this.#A.catch(ek);return this.#A=this.#D(e).finally(()=>{this.#A=void 0}),this.#A}async #D(e){return await e(this.#E)}}let eF=["read uncommitted","read committed","repeatable read","serializable","snapshot"];var eV=i(15123);(0,r.vV)(["query","error"]);class eR{#B;#k;constructor(e){(0,r.mf)(e)?(this.#k=e,this.#B=(0,r.vV)({query:!0,error:!0})):(this.#k=eP,this.#B=(0,r.vV)({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#B[e]}async query(e){this.#B.query&&await this.#k(e())}async error(e){this.#B.error&&await this.#k(e())}}function eP(e){"query"===e.level?(console.log(`kysely:query: ${e.query.sql}`),console.log(`kysely:query: duration: ${e.queryDurationMillis.toFixed(1)}ms`)):"error"===e.level&&(e.error instanceof Error?console.error(`kysely:error: ${e.error.stack??e.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:e.error,query:e.query.sql,queryDurationMillis:e.queryDurationMillis})}`))}var eL=i(71661),eM=i(33052);class eU extends ex.x{#c;constructor(e){var t;let i,n;if(t=e,(0,r.Kn)(t)&&(0,r.Kn)(t.config)&&(0,r.Kn)(t.driver)&&(0,r.Kn)(t.executor)&&(0,r.Kn)(t.dialect))i={executor:e.executor},n={...e};else{let t=e.dialect,r=t.createDriver(),s=t.createQueryCompiler(),o=t.createAdapter(),a=new eB(r,new eR(e.log??[])),d=new eA(s,o,new eO(a),e.plugins??[]);i={executor:d},n={config:e,executor:d,dialect:t,driver:a}}super(i),this.#c=(0,r.vV)(n)}get schema(){return new eI(this.#c.executor)}get dynamic(){return new eT}get introspection(){return this.#c.dialect.createIntrospector(this.withoutPlugins())}case(e){return new eL.wY({node:eM.j.create((0,r.o8)(e)?void 0:(0,en.BJ)(e))})}get fn(){return(0,eV.W)()}transaction(){return new eq({...this.#c})}connection(){return new ez({...this.#c})}withPlugin(e){return new eU({...this.#c,executor:this.#c.executor.withPlugin(e)})}withoutPlugins(){return new eU({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(e){return new eU({...this.#c,executor:this.#c.executor.withPluginAtFront(new eu.v(e))})}withTables(){return new eU({...this.#c})}async destroy(){await this.#c.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#c.executor}executeQuery(e,t=(0,el.y)()){let i=(0,r.Kn)(e)&&(0,r.mf)(e.compile)?e.compile():e;return this.getExecutor().executeQuery(i,t)}}class eW extends eU{#c;constructor(e){super(e),this.#c=e}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new eW({...this.#c,executor:this.#c.executor.withPlugin(e)})}withoutPlugins(){return new eW({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(e){return new eW({...this.#c,executor:this.#c.executor.withPluginAtFront(new eu.v(e))})}withTables(){return new eW({...this.#c})}}class ez{#c;constructor(e){this.#c=(0,r.vV)(e)}async execute(e){return this.#c.executor.provideConnection(async t=>{let i=this.#c.executor.withConnectionProvider(new eC(t)),r=new eU({...this.#c,executor:i});return await e(r)})}}(0,g.q)(ez,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class eq{#c;constructor(e){this.#c=(0,r.vV)(e)}setIsolationLevel(e){return new eq({...this.#c,isolationLevel:e})}async execute(e){let{isolationLevel:t,...i}=this.#c,r={isolationLevel:t};return function(e){if(e.isolationLevel&&!eF.includes(e.isolationLevel))throw Error(`invalid transaction isolation level ${e.isolationLevel}`)}(r),this.#c.executor.provideConnection(async t=>{let n=this.#c.executor.withConnectionProvider(new eC(t)),s=new eW({...i,executor:n});try{await this.#c.driver.beginTransaction(t,r);let i=await e(s);return await this.#c.driver.commitTransaction(t),i}catch(e){throw await this.#c.driver.rollbackTransaction(t),e}})}}(0,g.q)(eq,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method")},1784:function(e,t,i){i.d(t,{i:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"AliasNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"AliasNode",node:e,alias:t})})},83550:function(e,t,i){i.d(t,{O:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"AndNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"AndNode",left:e,right:t})})},95315:function(e,t,i){i.d(t,{a:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"BinaryOperationNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"BinaryOperationNode",leftOperand:e,operator:t,rightOperand:i})})},33052:function(e,t,i){i.d(t,{j:()=>s});var r=i(47589),n=i(96409);let s=(0,r.vV)({is:e=>"CaseNode"===e.kind,create:e=>(0,r.vV)({kind:"CaseNode",value:e}),cloneWithWhen:(e,t)=>(0,r.vV)({...e,when:(0,r.vV)(e.when?[...e.when,t]:[t])}),cloneWithThen:(e,t)=>(0,r.vV)({...e,when:e.when?(0,r.vV)([...e.when.slice(0,-1),n.$.cloneWithResult(e.when[e.when.length-1],t)]):void 0}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})})},1824:function(e,t,i){i.d(t,{k:()=>s});var r=i(47589),n=i(36548);let s=(0,r.vV)({is:e=>"ColumnNode"===e.kind,create:e=>(0,r.vV)({kind:"ColumnNode",column:n.T.create(e)})})},75197:function(e,t,i){i.d(t,{h:()=>n,u:()=>s});var r=i(47589);let n=["preserve rows","delete rows","drop"],s=(0,r.vV)({is:e=>"CreateTableNode"===e.kind,create:e=>(0,r.vV)({kind:"CreateTableNode",table:e,columns:(0,r.vV)([])}),cloneWithColumn:(e,t)=>(0,r.vV)({...e,columns:(0,r.vV)([...e.columns,t])}),cloneWithConstraint:(e,t)=>(0,r.vV)({...e,constraints:e.constraints?(0,r.vV)([...e.constraints,t]):(0,r.vV)([t])}),cloneWithFrontModifier:(e,t)=>(0,r.vV)({...e,frontModifiers:e.frontModifiers?(0,r.vV)([...e.frontModifiers,t]):(0,r.vV)([t])}),cloneWithEndModifier:(e,t)=>(0,r.vV)({...e,endModifiers:e.endModifiers?(0,r.vV)([...e.endModifiers,t]):(0,r.vV)([t])}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})})},19997:function(e,t,i){i.d(t,{B:()=>s});var r=i(47589),n=i(28202);let s=(0,r.vV)({is:e=>"CreateViewNode"===e.kind,create:e=>(0,r.vV)({kind:"CreateViewNode",name:n.j.create(e)}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})})},75689:function(e,t,i){i.d(t,{U:()=>a});var r=i(47589),n=i(88270),s=i(76374);let o=(0,r.vV)({is:e=>"UsingNode"===e.kind,create:e=>(0,r.vV)({kind:"UsingNode",tables:(0,r.vV)(e)}),cloneWithTables:(e,t)=>(0,r.vV)({...e,tables:(0,r.vV)([...e.tables,...t])})}),a=(0,r.vV)({is:e=>"DeleteQueryNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"DeleteQueryNode",from:n.e.create(e),...t&&{with:t}}),cloneWithOrderByItems:(e,t)=>(0,r.vV)({...e,orderBy:e.orderBy?s.r.cloneWithItems(e.orderBy,t):s.r.create(t)}),cloneWithoutOrderBy:e=>(0,r.vV)({...e,orderBy:void 0}),cloneWithLimit:(e,t)=>(0,r.vV)({...e,limit:t}),cloneWithoutLimit:e=>(0,r.vV)({...e,limit:void 0}),cloneWithUsing:(e,t)=>(0,r.vV)({...e,using:void 0!==e.using?o.cloneWithTables(e.using,t):o.create(t)})})},88270:function(e,t,i){i.d(t,{e:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"FromNode"===e.kind,create:e=>(0,r.vV)({kind:"FromNode",froms:(0,r.vV)(e)}),cloneWithFroms:(e,t)=>(0,r.vV)({...e,froms:(0,r.vV)([...e.froms,...t])})})},36548:function(e,t,i){i.d(t,{T:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"IdentifierNode"===e.kind,create:e=>(0,r.vV)({kind:"IdentifierNode",name:e})})},76059:function(e,t,i){i.d(t,{P:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"InsertQueryNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"InsertQueryNode",into:e,...t&&{with:t},replace:i}),createWithoutInto:()=>(0,r.vV)({kind:"InsertQueryNode"}),cloneWith:(e,t)=>(0,r.vV)({...e,...t})})},37203:function(e,t,i){i.d(t,{u:()=>a});var r=i(47589),n=i(83550),s=i(27306);let o=(0,r.vV)({is:e=>"OnNode"===e.kind,create:e=>(0,r.vV)({kind:"OnNode",on:e}),cloneWithOperation:(e,t,i)=>(0,r.vV)({...e,on:"And"===t?n.O.create(e.on,i):s.O.create(e.on,i)})}),a=(0,r.vV)({is:e=>"JoinNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"JoinNode",joinType:e,table:t,on:void 0}),createWithOn:(e,t,i)=>(0,r.vV)({kind:"JoinNode",joinType:e,table:t,on:o.create(i)}),cloneWithOn:(e,t)=>(0,r.vV)({...e,on:e.on?o.cloneWithOperation(e.on,"And",t):o.create(t)})})},66523:function(e,t,i){i.d(t,{s:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"JSONOperatorChainNode"===e.kind,create:e=>(0,r.vV)({kind:"JSONOperatorChainNode",operator:e,values:(0,r.vV)([])}),cloneWithValue:(e,t)=>(0,r.vV)({...e,values:(0,r.vV)([...e.values,t])})})},54474:function(e,t,i){i.d(t,{t:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"JSONPathNode"===e.kind,create:e=>(0,r.vV)({kind:"JSONPathNode",inOperator:e,pathLegs:(0,r.vV)([])}),cloneWithLeg:(e,t)=>(0,r.vV)({...e,pathLegs:(0,r.vV)([...e.pathLegs,t])})})},49188:function(e,t,i){i.d(t,{y:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"JSONReferenceNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"JSONReferenceNode",reference:e,traversal:t}),cloneWithTraversal:(e,t)=>(0,r.vV)({...e,traversal:t})})},56251:function(e,t,i){i.d(t,{Z:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"LimitNode"===e.kind,create:e=>(0,r.vV)({kind:"LimitNode",limit:e})})},64380:function(e,t,i){i.d(t,{F:()=>s});var r=i(47589),n=i(96409);let s=(0,r.vV)({is:e=>"MergeQueryNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"MergeQueryNode",into:e,...t&&{with:t}}),cloneWithUsing:(e,t)=>(0,r.vV)({...e,using:t}),cloneWithWhen:(e,t)=>(0,r.vV)({...e,whens:e.whens?(0,r.vV)([...e.whens,t]):(0,r.vV)([t])}),cloneWithThen:(e,t)=>(0,r.vV)({...e,whens:e.whens?(0,r.vV)([...e.whens.slice(0,-1),n.$.cloneWithResult(e.whens[e.whens.length-1],t)]):void 0})})},62240:function(e,t,i){i.d(t,{x:()=>n});var r=i(47589);function n(e){return(0,r.Kn)(e)&&(0,r.mf)(e.toOperationNode)}},24107:function(e,t,i){i.d(t,{s:()=>n});var r=i(47589);class n{nodeStack=[];#C=(0,r.vV)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let t=this.transformNodeImpl(e);return this.nodeStack.pop(),(0,r.vV)(t)}transformNodeImpl(e){return this.#C[e.kind](e)}transformNodeList(e){return e?(0,r.vV)(e.map(e=>this.transformNode(e))):e}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:(0,r.vV)([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}},75460:function(e,t,i){i.d(t,{$X:()=>o,fP:()=>s,rt:()=>a});var r=i(47589);let n=["->","->>"],s=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from","+","-","*","/","%","^","&","|","#","<<",">>","&&","||",...n,"not","-","exists","not exists","between","between symmetric"],o=(0,r.vV)({is:e=>"OperatorNode"===e.kind,create:e=>(0,r.vV)({kind:"OperatorNode",operator:e})});function a(e){return(0,r.HD)(e)&&n.includes(e)}},27306:function(e,t,i){i.d(t,{O:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"OrNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"OrNode",left:e,right:t})})},76374:function(e,t,i){i.d(t,{r:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"OrderByNode"===e.kind,create:e=>(0,r.vV)({kind:"OrderByNode",items:(0,r.vV)([...e])}),cloneWithItems:(e,t)=>(0,r.vV)({...e,items:(0,r.vV)([...e.items,...t])})})},82923:function(e,t,i){i.d(t,{L:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"ParensNode"===e.kind,create:e=>(0,r.vV)({kind:"ParensNode",node:e})})},53190:function(e,t,i){i.d(t,{c:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"PrimitiveValueListNode"===e.kind,create:e=>(0,r.vV)({kind:"PrimitiveValueListNode",values:(0,r.vV)([...e])})})},15659:function(e,t,i){i.d(t,{V:()=>p});var r=i(76059),n=i(11973),s=i(45219),o=i(75689),a=i(92447),d=i(47589);let l=(0,d.vV)({is:e=>"ReturningNode"===e.kind,create:e=>(0,d.vV)({kind:"ReturningNode",selections:(0,d.vV)(e)}),cloneWithSelections:(e,t)=>(0,d.vV)({...e,selections:e.selections?(0,d.vV)([...e.selections,...t]):(0,d.vV)(t)})}),u=(0,d.vV)({is:e=>"ExplainNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"ExplainNode",format:e,options:t})});var c=i(64380);let h=(0,d.vV)({is:e=>"OutputNode"===e.kind,create:e=>(0,d.vV)({kind:"OutputNode",selections:(0,d.vV)(e)}),cloneWithSelections:(e,t)=>(0,d.vV)({...e,selections:e.selections?(0,d.vV)([...e.selections,...t]):(0,d.vV)(t)})}),p=(0,d.vV)({is:e=>n.a.is(e)||r.P.is(e)||s.j.is(e)||o.U.is(e)||c.F.is(e),cloneWithEndModifier:(e,t)=>(0,d.vV)({...e,endModifiers:e.endModifiers?(0,d.vV)([...e.endModifiers,t]):(0,d.vV)([t])}),cloneWithWhere:(e,t)=>(0,d.vV)({...e,where:e.where?a.F.cloneWithOperation(e.where,"And",t):a.F.create(t)}),cloneWithJoin:(e,t)=>(0,d.vV)({...e,joins:e.joins?(0,d.vV)([...e.joins,t]):(0,d.vV)([t])}),cloneWithReturning:(e,t)=>(0,d.vV)({...e,returning:e.returning?l.cloneWithSelections(e.returning,t):l.create(t)}),cloneWithoutReturning:e=>(0,d.vV)({...e,returning:void 0}),cloneWithoutWhere:e=>(0,d.vV)({...e,where:void 0}),cloneWithExplain:(e,t,i)=>(0,d.vV)({...e,explain:u.create(t,i?.toOperationNode())}),cloneWithTop:(e,t)=>(0,d.vV)({...e,top:t}),cloneWithOutput:(e,t)=>(0,d.vV)({...e,output:e.output?h.cloneWithSelections(e.output,t):h.create(t)})})},67386:function(e,t,i){i.d(t,{x:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"RawNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"RawNode",sqlFragments:(0,r.vV)(e),parameters:(0,r.vV)(t)}),createWithSql:e=>n.create([e],[]),createWithChild:e=>n.create(["",""],[e]),createWithChildren:e=>n.create(Array(e.length+1).fill(""),e)})},34463:function(e,t,i){i.d(t,{b:()=>s});var r=i(8809),n=i(47589);let s=(0,n.vV)({is:e=>"ReferenceNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"ReferenceNode",table:t,column:e}),createSelectAll:e=>(0,n.vV)({kind:"ReferenceNode",table:e,column:r.B.create()})})},28202:function(e,t,i){i.d(t,{j:()=>s});var r=i(47589),n=i(36548);let s=(0,r.vV)({is:e=>"SchemableIdentifierNode"===e.kind,create:e=>(0,r.vV)({kind:"SchemableIdentifierNode",identifier:n.T.create(e)}),createWithSchema:(e,t)=>(0,r.vV)({kind:"SchemableIdentifierNode",schema:n.T.create(e),identifier:n.T.create(t)})})},8809:function(e,t,i){i.d(t,{B:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"SelectAllNode"===e.kind,create:()=>(0,r.vV)({kind:"SelectAllNode"})})},11973:function(e,t,i){i.d(t,{a:()=>u});var r=i(47589),n=i(88270);let s=(0,r.vV)({is:e=>"GroupByNode"===e.kind,create:e=>(0,r.vV)({kind:"GroupByNode",items:(0,r.vV)(e)}),cloneWithItems:(e,t)=>(0,r.vV)({...e,items:(0,r.vV)([...e.items,...t])})});var o=i(83550),a=i(27306);let d=(0,r.vV)({is:e=>"HavingNode"===e.kind,create:e=>(0,r.vV)({kind:"HavingNode",having:e}),cloneWithOperation:(e,t,i)=>(0,r.vV)({...e,having:"And"===t?o.O.create(e.having,i):a.O.create(e.having,i)})});var l=i(76374);let u=(0,r.vV)({is:e=>"SelectQueryNode"===e.kind,create:e=>(0,r.vV)({kind:"SelectQueryNode",...e&&{with:e}}),createFrom:(e,t)=>(0,r.vV)({kind:"SelectQueryNode",from:n.e.create(e),...t&&{with:t}}),cloneWithSelections:(e,t)=>(0,r.vV)({...e,selections:e.selections?(0,r.vV)([...e.selections,...t]):(0,r.vV)(t)}),cloneWithDistinctOn:(e,t)=>(0,r.vV)({...e,distinctOn:e.distinctOn?(0,r.vV)([...e.distinctOn,...t]):(0,r.vV)(t)}),cloneWithFrontModifier:(e,t)=>(0,r.vV)({...e,frontModifiers:e.frontModifiers?(0,r.vV)([...e.frontModifiers,t]):(0,r.vV)([t])}),cloneWithOrderByItems:(e,t)=>(0,r.vV)({...e,orderBy:e.orderBy?l.r.cloneWithItems(e.orderBy,t):l.r.create(t)}),cloneWithGroupByItems:(e,t)=>(0,r.vV)({...e,groupBy:e.groupBy?s.cloneWithItems(e.groupBy,t):s.create(t)}),cloneWithLimit:(e,t)=>(0,r.vV)({...e,limit:t}),cloneWithOffset:(e,t)=>(0,r.vV)({...e,offset:t}),cloneWithFetch:(e,t)=>(0,r.vV)({...e,fetch:t}),cloneWithHaving:(e,t)=>(0,r.vV)({...e,having:e.having?d.cloneWithOperation(e.having,"And",t):d.create(t)}),cloneWithSetOperations:(e,t)=>(0,r.vV)({...e,setOperations:e.setOperations?(0,r.vV)([...e.setOperations,...t]):(0,r.vV)([...t])}),cloneWithoutSelections:e=>(0,r.vV)({...e,selections:[]}),cloneWithoutLimit:e=>(0,r.vV)({...e,limit:void 0}),cloneWithoutOffset:e=>(0,r.vV)({...e,offset:void 0}),cloneWithoutOrderBy:e=>(0,r.vV)({...e,orderBy:void 0}),cloneWithoutGroupBy:e=>(0,r.vV)({...e,groupBy:void 0})})},6886:function(e,t,i){i.d(t,{M:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"SetOperationNode"===e.kind,create:(e,t,i)=>(0,r.vV)({kind:"SetOperationNode",operator:e,expression:t,all:i})})},49501:function(e,t,i){i.d(t,{F:()=>s});var r=i(47589),n=i(28202);let s=(0,r.vV)({is:e=>"TableNode"===e.kind,create:e=>(0,r.vV)({kind:"TableNode",table:n.j.create(e)}),createWithSchema:(e,t)=>(0,r.vV)({kind:"TableNode",table:n.j.createWithSchema(e,t)})})},45219:function(e,t,i){i.d(t,{j:()=>s});var r=i(47589),n=i(88270);let s=(0,r.vV)({is:e=>"UpdateQueryNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"UpdateQueryNode",table:e,...t&&{with:t}}),createWithoutTable:()=>(0,r.vV)({kind:"UpdateQueryNode"}),cloneWithFromItems:(e,t)=>(0,r.vV)({...e,from:e.from?n.e.cloneWithFroms(e.from,t):n.e.create(t)}),cloneWithUpdates:(e,t)=>(0,r.vV)({...e,updates:e.updates?(0,r.vV)([...e.updates,...t]):t}),cloneWithLimit:(e,t)=>(0,r.vV)({...e,limit:t})})},18181:function(e,t,i){i.d(t,{F:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"ValueListNode"===e.kind,create:e=>(0,r.vV)({kind:"ValueListNode",values:(0,r.vV)(e)})})},38419:function(e,t,i){i.d(t,{g:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"ValueNode"===e.kind,create:e=>(0,r.vV)({kind:"ValueNode",value:e}),createImmediate:e=>(0,r.vV)({kind:"ValueNode",value:e,immediate:!0})})},96409:function(e,t,i){i.d(t,{$:()=>n});var r=i(47589);let n=(0,r.vV)({is:e=>"WhenNode"===e.kind,create:e=>(0,r.vV)({kind:"WhenNode",condition:e}),cloneWithResult:(e,t)=>(0,r.vV)({...e,result:t})})},92447:function(e,t,i){i.d(t,{F:()=>o});var r=i(47589),n=i(83550),s=i(27306);let o=(0,r.vV)({is:e=>"WhereNode"===e.kind,create:e=>(0,r.vV)({kind:"WhereNode",where:e}),cloneWithOperation:(e,t,i)=>(0,r.vV)({...e,where:"And"===t?n.O.create(e.where,i):s.O.create(e.where,i)})})},50350:function(e,t,i){i.d(t,{L4:()=>y,Li:()=>m,QX:()=>v,i9:()=>f,k0:()=>p});var r=i(95315),n=i(47589),s=i(62240),o=i(75460),a=i(57550),d=i(11942),l=i(38419),u=i(83550),c=i(82923),h=i(27306);function p(e){if(3===e.length)return f(e[0],e[1],e[2]);if(1===e.length)return(0,d.j2)(e[0]);throw Error(`invalid arguments: ${JSON.stringify(e)}`)}function f(e,t,i){var n;return("is"===(n=t)||"is not"===n)&&b(i)?r.a.create((0,a.jI)(e),g(t),l.g.createImmediate(i)):r.a.create((0,a.jI)(e),g(t),(0,d.wZ)(i))}function y(e,t,i){return r.a.create((0,a.jI)(e),g(t),(0,a.jI)(i))}function m(e,t){return v(Object.entries(e).filter(([,e])=>!(0,n.o8)(e)).map(([e,t])=>f(e,b(t)?"is":"=",t)),t)}function v(e,t,i=!0){let n="and"===t?u.O.create:h.O.create;if(0===e.length)return r.a.create(l.g.createImmediate(1),o.$X.create("="),l.g.createImmediate(+("and"===t)));let s=w(e[0]);for(let t=1;t<e.length;++t)s=n(s,w(e[t]));return e.length>1&&i?c.L.create(s):s}function b(e){return(0,n.Ft)(e)||(0,n.jn)(e)}function g(e){if((0,n.HD)(e)&&o.fP.includes(e))return o.$X.create(e);if((0,s.x)(e))return e.toOperationNode();throw Error(`invalid operator ${JSON.stringify(e)}`)}function w(e){return(0,s.x)(e)?e.toOperationNode():e}},65147:function(e,t,i){i.d(t,{z:()=>d});var r=i(47589);let n=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],s=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],o=(0,r.vV)({is:e=>"DataTypeNode"===e.kind,create:e=>(0,r.vV)({kind:"DataTypeNode",dataType:e})});var a=i(62240);function d(e){if((0,a.x)(e))return e.toOperationNode();if(n.includes(e)||s.some(t=>t.test(e)))return o.create(e);throw Error(`invalid column data type ${JSON.stringify(e)}`)}},28173:function(e,t,i){i.d(t,{Yb:()=>d,Jx:()=>a,BJ:()=>o});var r=i(62240),n=i(47589),s=i(44951);function o(e){if((0,r.x)(e))return e.toOperationNode();if((0,n.mf)(e))return e((0,s.Z)()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(e)}`)}function a(e){if((0,r.x)(e))return e.toOperationNode();if((0,n.mf)(e))return e((0,s.Z)()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(e)}`)}function d(e){return(0,n.Kn)(e)&&"expressionType"in e&&(0,r.x)(e)||(0,n.Kn)(e)&&"expression"in e&&(0,n.HD)(e.alias)&&(0,r.x)(e)||(0,n.mf)(e)}},56044:function(e,t,i){i.d(t,{h:()=>a});var r=i(37203),n=i(90679),s=i(50350),o=i(23013);function a(e,t){var i,a,d,l,u,c;if(3===t.length){return i=e,a=t[0],d=t[1],l=t[2],r.u.createWithOn(i,(0,n.Lr)(a),(0,s.L4)(d,"=",l))}if(2===t.length){return u=e,c=t[0],(0,t[1])((0,o.$h)(u,c)).toOperationNode()}throw Error("not implemented")}},75760:function(e,t,i){i.d(t,{Wr:()=>l,bX:()=>u});var r=i(28165),n=i(47589);let s=(0,n.vV)({is:e=>"OrderByItemNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"OrderByItemNode",orderBy:e,direction:t})});var o=i(67386),a=i(28173),d=i(57550);function l(e){return"asc"===e||"desc"===e}function u(e){if(2===e.length)return[c(e[0],e[1])];if(1===e.length){let[t]=e;return Array.isArray(t)?t.map(e=>c(e)):[c(t)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${e.length}`)}function c(e,t){let i=function(e){if((0,a.Yb)(e))return(0,a.BJ)(e);if((0,r.a)(e))return e.toOperationNode();let[t,i]=e.split(" ");if(i){if(!l(i))throw Error(`Invalid order by direction: ${i}`);return s.create((0,d.KX)(t),h(i))}return(0,d.KX)(e)}(e);if(s.is(i)){if(t)throw Error("Cannot specify direction twice!");return i}return s.create(i,h(t))}function h(e){if(e)return"asc"===e||"desc"===e?o.x.createWithSql(e):e.toOperationNode()}},23013:function(e,t,i){i.d(t,{$h:()=>w,gs:()=>N,$l:()=>g});var r=i(37203),n=i(47589),s=i(76374);let o=(0,n.vV)({is:e=>"PartitionByNode"===e.kind,create:e=>(0,n.vV)({kind:"PartitionByNode",items:(0,n.vV)(e)}),cloneWithItems:(e,t)=>(0,n.vV)({...e,items:(0,n.vV)([...e.items,...t])})}),a=(0,n.vV)({is:e=>"OverNode"===e.kind,create:()=>(0,n.vV)({kind:"OverNode"}),cloneWithOrderByItems:(e,t)=>(0,n.vV)({...e,orderBy:e.orderBy?s.r.cloneWithItems(e.orderBy,t):s.r.create(t)}),cloneWithPartitionByItems:(e,t)=>(0,n.vV)({...e,partitionBy:e.partitionBy?o.cloneWithItems(e.partitionBy,t):o.create(t)})});var d=i(67386),l=i(50350),u=i(26481);class c{#c;constructor(e){this.#c=(0,n.vV)(e)}on(...e){return new c({...this.#c,joinNode:r.u.cloneWithOn(this.#c.joinNode,(0,l.k0)(e))})}onRef(e,t,i){return new c({...this.#c,joinNode:r.u.cloneWithOn(this.#c.joinNode,(0,l.L4)(e,t,i))})}onTrue(){return new c({...this.#c,joinNode:r.u.cloneWithOn(this.#c.joinNode,d.x.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#c.joinNode}}(0,u.q)(c,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var h=i(75760);let p=(0,n.vV)({is:e=>"PartitionByItemNode"===e.kind,create:e=>(0,n.vV)({kind:"PartitionByItemNode",partitionBy:e})});var f=i(57550);class y{#c;constructor(e){this.#c=(0,n.vV)(e)}orderBy(e,t){return new y({overNode:a.cloneWithOrderByItems(this.#c.overNode,(0,h.bX)([e,t]))})}partitionBy(e){return new y({overNode:a.cloneWithPartitionByItems(this.#c.overNode,(0,f.ik)(e).map(p.create))})}$call(e){return e(this)}toOperationNode(){return this.#c.overNode}}(0,u.q)(y,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var m=i(3255),v=i(39745),b=i(90679);function g(){return new m.x({executor:v.H})}function w(e,t){return new c({joinNode:r.u.create(e,(0,b.Lr)(t))})}function N(){return new y({overNode:a.create()})}},57550:function(e,t,i){i.d(t,{D2:()=>b,Dz:()=>_,F9:()=>y,Ji:()=>w,KX:()=>g,ik:()=>m,jI:()=>v,xM:()=>N});var r=i(1784),n=i(1824),s=i(34463),o=i(49501),a=i(47589),d=i(28173),l=i(36548),u=i(75760),c=i(75460),h=i(49188),p=i(66523),f=i(54474);function y(e){return(0,a.HD)(e)?g(e):e.toOperationNode()}function m(e){return(0,a.DM)(e)?e.map(e=>v(e)):[v(e)]}function v(e){return(0,d.Yb)(e)?(0,d.BJ)(e):y(e)}function b(e,t){let i=g(e);if((0,c.rt)(t))return h.y.create(i,p.s.create(c.$X.create(t)));let r=t.slice(0,-1);if((0,c.rt)(r))return h.y.create(i,f.t.create(c.$X.create(r)));throw Error(`Invalid JSON operator: ${t}`)}function g(e){if(!e.includes("."))return s.b.create(n.k.create(e));let t=e.split(".").map(I);if(3===t.length){var i=t;let[e,r,a]=i;return s.b.create(n.k.create(a),o.F.createWithSchema(e,r))}if(2===t.length){var r=t;let[e,i]=r;return s.b.create(n.k.create(i),o.F.create(e))}throw Error(`invalid column reference ${e}`)}function w(e){let t=" as ";if(!e.includes(t))return g(e);{let[i,n]=e.split(t).map(I);return r.i.create(g(i),l.T.create(n))}}function N(e){return n.k.create(e)}function _(e){if(!e.includes(" "))return N(e);{let[t,i]=e.split(" ").map(I);if(!(0,u.Wr)(i))throw Error(`invalid order direction "${i}" next to "${t}"`);return(0,u.bX)([t,i])[0]}}function I(e){return e.trim()}},57725:function(e,t,i){i.d(t,{A:()=>function e(t){return(0,r.mf)(t)?e(t((0,c.Z)())):(0,r.DM)(t)?t.map(e=>h(e)):[h(t)]},L:()=>p});var r=i(47589),n=i(34463),s=i(8809);let o=(0,r.vV)({is:e=>"SelectionNode"===e.kind,create:e=>(0,r.vV)({kind:"SelectionNode",selection:e}),createSelectAll:()=>(0,r.vV)({kind:"SelectionNode",selection:s.B.create()}),createSelectAllFromTable:e=>(0,r.vV)({kind:"SelectionNode",selection:n.b.createSelectAll(e)})});var a=i(57550),d=i(28165),l=i(28173),u=i(90679),c=i(44951);function h(e){return(0,r.HD)(e)?o.create((0,a.Ji)(e)):(0,d.a)(e)?o.create(e.toOperationNode()):o.create((0,l.Jx)(e))}function p(e){return e?Array.isArray(e)?e.map(f):[f(e)]:[o.createSelectAll()]}function f(e){if((0,r.HD)(e))return o.createSelectAllFromTable((0,u.G2)(e));throw Error(`invalid value selectAll expression: ${JSON.stringify(e)}`)}},90679:function(e,t,i){i.d(t,{G2:()=>c,Lr:()=>l,_V:()=>d,hm:()=>u});var r=i(47589),n=i(1784),s=i(49501),o=i(28173),a=i(36548);function d(e){return(0,r.DM)(e)?e.map(e=>l(e)):[l(e)]}function l(e){return(0,r.HD)(e)?u(e):(0,o.Jx)(e)}function u(e){let t=" as ";if(!e.includes(t))return c(e);{let[i,r]=e.split(t).map(h);return n.i.create(c(i),a.T.create(r))}}function c(e){if(!e.includes("."))return s.F.create(e);{let[t,i]=e.split(".").map(h);return s.F.createWithSchema(t,i)}}function h(e){return e.trim()}},45261:function(e,t,i){i.d(t,{G:()=>s});var r=i(47589);let n=(0,r.vV)({is:e=>"TopNode"===e.kind,create:(e,t)=>(0,r.vV)({kind:"TopNode",expression:e,modifiers:t})});function s(e,t){var i;if(!(0,r.hj)(e)&&!(0,r.C4)(e))throw Error(`Invalid top expression: ${e}`);if(!(0,r.o8)(t)&&"percent"!==(i=t)&&"with ties"!==i&&"percent with ties"!==i)throw Error(`Invalid top modifiers: ${t}`);return n.create(e,t)}},11942:function(e,t,i){i.d(t,{$0:()=>u,AB:()=>c,j2:()=>l,wZ:()=>d});var r=i(53190),n=i(18181),s=i(38419),o=i(47589),a=i(28173);function d(e){var t;return(0,o.DM)(e)?(t=e).some(a.Yb)?n.F.create(t.map(e=>l(e))):r.c.create(t):l(e)}function l(e){return(0,a.Yb)(e)?(0,a.BJ)(e):s.g.create(e)}function u(e){return(0,o.hj)(e)||(0,o.jn)(e)||(0,o.Ft)(e)}function c(e){if(!u(e))throw Error(`unsafe immediate value ${JSON.stringify(e)}`);return s.g.createImmediate(e)}},16697:function(e,t,i){i.d(t,{v:()=>c});var r=i(1784),n=i(36548),s=i(24107),o=i(28202),a=i(49501);let d=(0,i(47589).vV)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),l={json_agg:!0,to_json:!0};class u extends s.s{#F;#V=new Set;#R=new Set;constructor(e){super(),this.#F=e}transformNodeImpl(e){if(!this.#P(e))return super.transformNodeImpl(e);let t=this.#L(e);for(let e of t)this.#R.add(e);let i=this.#M(e);for(let e of i)this.#V.add(e);let r=super.transformNodeImpl(e);for(let e of i)this.#V.delete(e);for(let e of t)this.#R.delete(e);return r}transformSchemableIdentifier(e){let t=super.transformSchemableIdentifier(e);return t.schema||!this.#V.has(e.identifier.name)?t:{...t,schema:n.T.create(this.#F)}}transformReferences(e){let t=super.transformReferences(e);return t.table.table.schema?t:{...t,table:a.F.createWithSchema(this.#F,t.table.table.identifier.name)}}transformAggregateFunction(e){return{...super.transformAggregateFunction({...e,aggregated:[]}),aggregated:this.#U(e,"aggregated")}}transformFunction(e){return{...super.transformFunction({...e,arguments:[]}),arguments:this.#U(e,"arguments")}}#U(e,t){return l[e.func]?e[t].map(e=>!a.F.is(e)||e.table.schema?this.transformNode(e):{...e,table:this.transformIdentifier(e.table.identifier)}):this.transformNodeList(e[t])}#P(e){return e.kind in d}#M(e){let t=new Set;if("name"in e&&e.name&&o.j.is(e.name)&&this.#W(e.name,t),"from"in e&&e.from)for(let i of e.from.froms)this.#z(i,t);if("into"in e&&e.into&&this.#z(e.into,t),"table"in e&&e.table&&this.#z(e.table,t),"joins"in e&&e.joins)for(let i of e.joins)this.#z(i.table,t);return"using"in e&&e.using&&this.#z(e.using,t),t}#L(e){let t=new Set;return"with"in e&&e.with&&this.#q(e.with,t),t}#z(e,t){let i=a.F.is(e)?e:r.i.is(e)&&a.F.is(e.node)?e.node:null;i&&this.#W(i.table,t)}#W(e,t){let i=e.identifier.name;this.#V.has(i)||this.#R.has(i)||t.add(i)}#q(e,t){for(let i of e.expressions){let e=i.name.table.table.identifier.name;this.#R.has(e)||t.add(e)}}}class c{#h;constructor(e){this.#h=new u(e)}transformQuery(e){return this.#h.transformNode(e.node)}async transformResult(e){return e.result}}},71661:function(e,t,i){i.d(t,{wY:()=>l});var r=i(60081),n=i(47589),s=i(33052),o=i(96409),a=i(50350),d=i(11942);class l{#c;constructor(e){this.#c=(0,n.vV)(e)}when(...e){return new u({...this.#c,node:s.j.cloneWithWhen(this.#c.node,o.$.create((0,a.k0)(e)))})}}class u{#c;constructor(e){this.#c=(0,n.vV)(e)}then(e){return new c({...this.#c,node:s.j.cloneWithThen(this.#c.node,(0,d.$0)(e)?(0,d.AB)(e):(0,d.j2)(e))})}}class c{#c;constructor(e){this.#c=(0,n.vV)(e)}when(...e){return new u({...this.#c,node:s.j.cloneWithWhen(this.#c.node,o.$.create((0,a.k0)(e)))})}else(e){return new h({...this.#c,node:s.j.cloneWith(this.#c.node,{else:(0,d.$0)(e)?(0,d.AB)(e):(0,d.j2)(e)})})}end(){return new r.Pc(s.j.cloneWith(this.#c.node,{isStatement:!1}))}endCase(){return new r.Pc(s.j.cloneWith(this.#c.node,{isStatement:!0}))}}class h{#c;constructor(e){this.#c=(0,n.vV)(e)}end(){return new r.Pc(s.j.cloneWith(this.#c.node,{isStatement:!1}))}endCase(){return new r.Pc(s.j.cloneWith(this.#c.node,{isStatement:!0}))}}},15123:function(e,t,i){i.d(t,{W:()=>w});var r=i(60081),n=i(47589),s=i(92447),o=i(76374);let a=(0,n.vV)({is:e=>"AggregateFunctionNode"===e.kind,create:(e,t=[])=>(0,n.vV)({kind:"AggregateFunctionNode",func:e,aggregated:t}),cloneWithDistinct:e=>(0,n.vV)({...e,distinct:!0}),cloneWithOrderBy:(e,t)=>(0,n.vV)({...e,orderBy:e.orderBy?o.r.cloneWithItems(e.orderBy,t):o.r.create(t)}),cloneWithFilter:(e,t)=>(0,n.vV)({...e,filter:e.filter?s.F.cloneWithOperation(e.filter,"And",t):s.F.create(t)}),cloneWithOrFilter:(e,t)=>(0,n.vV)({...e,filter:e.filter?s.F.cloneWithOperation(e.filter,"Or",t):s.F.create(t)}),cloneWithOver:(e,t)=>(0,n.vV)({...e,over:t})}),d=(0,n.vV)({is:e=>"FunctionNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"FunctionNode",func:e,arguments:t})});var l=i(57550),u=i(57725),c=i(1784),h=i(36548),p=i(26481),f=i(23013),y=i(50350),m=i(75760);class v{#c;constructor(e){this.#c=(0,n.vV)(e)}get expressionType(){}as(e){return new b(this,e)}distinct(){return new v({...this.#c,aggregateFunctionNode:a.cloneWithDistinct(this.#c.aggregateFunctionNode)})}orderBy(e,t){return new v({...this.#c,aggregateFunctionNode:a.cloneWithOrderBy(this.#c.aggregateFunctionNode,(0,m.bX)([e,t]))})}filterWhere(...e){return new v({...this.#c,aggregateFunctionNode:a.cloneWithFilter(this.#c.aggregateFunctionNode,(0,y.k0)(e))})}filterWhereRef(e,t,i){return new v({...this.#c,aggregateFunctionNode:a.cloneWithFilter(this.#c.aggregateFunctionNode,(0,y.L4)(e,t,i))})}over(e){let t=(0,f.gs)();return new v({...this.#c,aggregateFunctionNode:a.cloneWithOver(this.#c.aggregateFunctionNode,(e?e(t):t).toOperationNode())})}$call(e){return e(this)}$castTo(){return new v(this.#c)}$notNull(){return new v(this.#c)}toOperationNode(){return this.#c.aggregateFunctionNode}}(0,p.q)(v,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class b{#j;#a;constructor(e,t){this.#j=e,this.#a=t}get expression(){return this.#j}get alias(){return this.#a}toOperationNode(){return c.i.create(this.#j.toOperationNode(),h.T.create(this.#a))}}var g=i(90679);function w(){let e=(e,t)=>new r.Pc(d.create(e,(0,l.ik)(t??[]))),t=(e,t)=>new v({aggregateFunctionNode:a.create(e,t?(0,l.ik)(t):void 0)});return Object.assign(e,{agg:t,avg:e=>t("avg",[e]),coalesce:(...t)=>e("coalesce",t),count:e=>t("count",[e]),countAll:e=>new v({aggregateFunctionNode:a.create("count",(0,u.L)(e))}),max:e=>t("max",[e]),min:e=>t("min",[e]),sum:e=>t("sum",[e]),any:t=>e("any",[t]),jsonAgg:e=>new v({aggregateFunctionNode:a.create("json_agg",[(0,n.HD)(e)?(0,g.G2)(e):e.toOperationNode()])}),toJson:e=>new r.Pc(d.create("to_json",[(0,n.HD)(e)?(0,g.G2)(e):e.toOperationNode()]))})}},85804:function(e,t,i){i.d(t,{G:()=>r,b:()=>n});class r extends Error{node;constructor(e){super("no result"),this.node=e}}function n(e){return Object.prototype.hasOwnProperty.call(e,"prototype")}},10957:function(e,t,i){i.d(t,{u:()=>D});var r=i(1784),n=i(47589);let s=(0,n.vV)({is:e=>"SelectModifierNode"===e.kind,create:(e,t)=>(0,n.vV)({kind:"SelectModifierNode",modifier:e,of:t}),createWithExpression:e=>(0,n.vV)({kind:"SelectModifierNode",rawModifier:e})});var o=i(56044),a=i(90679),d=i(57725),l=i(57550),u=i(11973),c=i(15659),h=i(75760),p=i(26481),f=i(56251);let y=(0,n.vV)({is:e=>"OffsetNode"===e.kind,create:e=>(0,n.vV)({kind:"OffsetNode",offset:e})}),m=(0,n.vV)({is:e=>"GroupByItemNode"===e.kind,create:e=>(0,n.vV)({kind:"GroupByItemNode",groupBy:e})});var v=i(44951),b=i(85804),g=i(36548),w=i(6886),N=i(28173);function _(e,t,i){return(0,n.mf)(t)&&(t=t((0,v.b)())),(0,n.DM)(t)||(t=[t]),t.map(t=>w.M.create(e,(0,N.BJ)(t),i))}var I=i(50350),S=i(60081),T=i(11942),O=i(38419);let x=(e,t)=>({kind:"FetchNode",rowCount:O.g.create(e),modifier:t});var E=i(45261);class A{#c;constructor(e){this.#c=(0,n.vV)(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new A({...this.#c,queryNode:c.V.cloneWithWhere(this.#c.queryNode,(0,I.k0)(e))})}whereRef(e,t,i){return new A({...this.#c,queryNode:c.V.cloneWithWhere(this.#c.queryNode,(0,I.L4)(e,t,i))})}having(...e){return new A({...this.#c,queryNode:u.a.cloneWithHaving(this.#c.queryNode,(0,I.k0)(e))})}havingRef(e,t,i){return new A({...this.#c,queryNode:u.a.cloneWithHaving(this.#c.queryNode,(0,I.L4)(e,t,i))})}select(e){return new A({...this.#c,queryNode:u.a.cloneWithSelections(this.#c.queryNode,(0,d.A)(e))})}distinctOn(e){return new A({...this.#c,queryNode:u.a.cloneWithDistinctOn(this.#c.queryNode,(0,l.ik)(e))})}modifyFront(e){return new A({...this.#c,queryNode:u.a.cloneWithFrontModifier(this.#c.queryNode,s.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new A({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.createWithExpression(e.toOperationNode()))})}distinct(){return new A({...this.#c,queryNode:u.a.cloneWithFrontModifier(this.#c.queryNode,s.create("Distinct"))})}forUpdate(e){return new A({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("ForUpdate",e?(0,n._2)(e).map(a.G2):void 0))})}forShare(e){return new A({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("ForShare",e?(0,n._2)(e).map(a.G2):void 0))})}forKeyShare(e){return new A({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("ForKeyShare",e?(0,n._2)(e).map(a.G2):void 0))})}forNoKeyUpdate(e){return new A({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("ForNoKeyUpdate",e?(0,n._2)(e).map(a.G2):void 0))})}skipLocked(){return new A({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("SkipLocked"))})}noWait(){return new A({...this.#c,queryNode:c.V.cloneWithEndModifier(this.#c.queryNode,s.create("NoWait"))})}selectAll(e){return new A({...this.#c,queryNode:u.a.cloneWithSelections(this.#c.queryNode,(0,d.L)(e))})}innerJoin(...e){return new A({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("InnerJoin",e))})}leftJoin(...e){return new A({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("LeftJoin",e))})}rightJoin(...e){return new A({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("RightJoin",e))})}fullJoin(...e){return new A({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("FullJoin",e))})}innerJoinLateral(...e){return new A({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("LateralInnerJoin",e))})}leftJoinLateral(...e){return new A({...this.#c,queryNode:c.V.cloneWithJoin(this.#c.queryNode,(0,o.h)("LateralLeftJoin",e))})}orderBy(...e){return new A({...this.#c,queryNode:u.a.cloneWithOrderByItems(this.#c.queryNode,(0,h.bX)(e))})}groupBy(e){var t;return new A({...this.#c,queryNode:u.a.cloneWithGroupByItems(this.#c.queryNode,(t=e,t=(0,n.mf)(t)?t((0,v.Z)()):t,(0,l.ik)(t).map(m.create)))})}limit(e){return new A({...this.#c,queryNode:u.a.cloneWithLimit(this.#c.queryNode,f.Z.create((0,T.j2)(e)))})}offset(e){return new A({...this.#c,queryNode:u.a.cloneWithOffset(this.#c.queryNode,y.create((0,T.j2)(e)))})}fetch(e,t="only"){return new A({...this.#c,queryNode:u.a.cloneWithFetch(this.#c.queryNode,function(e,t){var i;if(!(0,n.hj)(e)&&!(0,n.C4)(e))throw Error(`Invalid fetch row count: ${e}`);if("only"!==(i=t)&&"with ties"!==i)throw Error(`Invalid fetch modifier: ${t}`);return x(e,t)}(e,t))})}top(e,t){return new A({...this.#c,queryNode:c.V.cloneWithTop(this.#c.queryNode,(0,E.G)(e,t))})}union(e){return new A({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,_("union",e,!1))})}unionAll(e){return new A({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,_("union",e,!0))})}intersect(e){return new A({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,_("intersect",e,!1))})}intersectAll(e){return new A({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,_("intersect",e,!0))})}except(e){return new A({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,_("except",e,!1))})}exceptAll(e){return new A({...this.#c,queryNode:u.a.cloneWithSetOperations(this.#c.queryNode,_("except",e,!0))})}as(e){return new B(this,e)}clearSelect(){return new A({...this.#c,queryNode:u.a.cloneWithoutSelections(this.#c.queryNode)})}clearWhere(){return new A({...this.#c,queryNode:c.V.cloneWithoutWhere(this.#c.queryNode)})}clearLimit(){return new A({...this.#c,queryNode:u.a.cloneWithoutLimit(this.#c.queryNode)})}clearOffset(){return new A({...this.#c,queryNode:u.a.cloneWithoutOffset(this.#c.queryNode)})}clearOrderBy(){return new A({...this.#c,queryNode:u.a.cloneWithoutOrderBy(this.#c.queryNode)})}clearGroupBy(){return new A({...this.#c,queryNode:u.a.cloneWithoutGroupBy(this.#c.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new A({...this.#c})}$castTo(){return new A(this.#c)}$narrowType(){return new A(this.#c)}$assertType(){return new A(this.#c)}$asTuple(){return new S.Pc(this.toOperationNode())}withPlugin(e){return new A({...this.#c,executor:this.#c.executor.withPlugin(e)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile();return(await this.#c.executor.executeQuery(e,this.#c.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=b.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,b.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let i of this.#c.executor.stream(t,e,this.#c.queryId))yield*i.rows}async explain(e,t){let i=new A({...this.#c,queryNode:c.V.cloneWithExplain(this.#c.queryNode,e,t)});return await i.execute()}}function D(e){return new A(e)}(0,p.q)(A,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class B{#$;#a;constructor(e,t){this.#$=e,this.#a=t}get expression(){return this.#$}get alias(){return this.#a}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return r.i.create(this.#$.toOperationNode(),g.T.create(this.#a))}}(0,p.q)(B,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.")},3255:function(e,t,i){i.d(t,{x:()=>ep});var r=i(10957),n=i(57725),s=i(1824),o=i(53190),a=i(18181),d=i(47589),l=i(11942);let u=(0,d.vV)({is:e=>"ValuesNode"===e.kind,create:e=>(0,d.vV)({kind:"ValuesNode",values:(0,d.vV)(e)})});var c=i(28173);let h=(0,d.vV)({is:e=>"DefaultInsertValueNode"===e.kind,create:()=>(0,d.vV)({kind:"DefaultInsertValueNode"})});var p=i(44951);function f(e){let t=(0,d.mf)(e)?e((0,p.Z)()):e;var i=(0,d.DM)(t)?t:(0,d.vV)([t]);let r=function(e){let t=new Map;for(let i of e)for(let e of Object.keys(i))t.has(e)||void 0===i[e]||t.set(e,t.size);return t}(i);return[(0,d.vV)([...r.keys()].map(s.k.create)),u.create(i.map(e=>(function(e,t){let i=Object.keys(e),r=Array.from({length:t.size}),n=!1,s=i.length;for(let o of i){let i=t.get(o);if((0,d.o8)(i)){s--;continue}let a=e[o];((0,d.o8)(a)||(0,c.Yb)(a))&&(n=!0),r[i]=a}if(s<t.size||n){let e=h.create();return a.F.create(r.map(t=>(0,d.o8)(t)?e:(0,l.j2)(t)))}return o.c.create(r)})(e,r)))]}var y=i(76059),m=i(15659);let v=(0,d.vV)({is:e=>"ColumnUpdateNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"ColumnUpdateNode",column:e,value:t})});var b=i(57550);function g(e){return Object.entries((0,d.mf)(e)?e((0,p.Z)()):e).filter(([e,t])=>void 0!==t).map(([e,t])=>v.create(s.k.create(e),(0,l.j2)(t)))}var w=i(26481);let N=(0,d.vV)({is:e=>"OnDuplicateKeyNode"===e.kind,create:e=>(0,d.vV)({kind:"OnDuplicateKeyNode",updates:e})});class _{insertId;numInsertedOrUpdatedRows;constructor(e,t){this.insertId=e,this.numInsertedOrUpdatedRows=t}}var I=i(85804),S=i(36548),T=i(92447);let O=(0,d.vV)({is:e=>"OnConflictNode"===e.kind,create:()=>(0,d.vV)({kind:"OnConflictNode"}),cloneWith:(e,t)=>(0,d.vV)({...e,...t}),cloneWithIndexWhere:(e,t)=>(0,d.vV)({...e,indexWhere:e.indexWhere?T.F.cloneWithOperation(e.indexWhere,"And",t):T.F.create(t)}),cloneWithIndexOrWhere:(e,t)=>(0,d.vV)({...e,indexWhere:e.indexWhere?T.F.cloneWithOperation(e.indexWhere,"Or",t):T.F.create(t)}),cloneWithUpdateWhere:(e,t)=>(0,d.vV)({...e,updateWhere:e.updateWhere?T.F.cloneWithOperation(e.updateWhere,"And",t):T.F.create(t)}),cloneWithUpdateOrWhere:(e,t)=>(0,d.vV)({...e,updateWhere:e.updateWhere?T.F.cloneWithOperation(e.updateWhere,"Or",t):T.F.create(t)}),cloneWithoutIndexWhere:e=>(0,d.vV)({...e,indexWhere:void 0}),cloneWithoutUpdateWhere:e=>(0,d.vV)({...e,updateWhere:void 0})});var x=i(50350);class E{#c;constructor(e){this.#c=(0,d.vV)(e)}column(e){let t=s.k.create(e);return new E({...this.#c,onConflictNode:O.cloneWith(this.#c.onConflictNode,{columns:this.#c.onConflictNode.columns?(0,d.vV)([...this.#c.onConflictNode.columns,t]):(0,d.vV)([t])})})}columns(e){let t=e.map(s.k.create);return new E({...this.#c,onConflictNode:O.cloneWith(this.#c.onConflictNode,{columns:this.#c.onConflictNode.columns?(0,d.vV)([...this.#c.onConflictNode.columns,...t]):(0,d.vV)(t)})})}constraint(e){return new E({...this.#c,onConflictNode:O.cloneWith(this.#c.onConflictNode,{constraint:S.T.create(e)})})}expression(e){return new E({...this.#c,onConflictNode:O.cloneWith(this.#c.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new E({...this.#c,onConflictNode:O.cloneWithIndexWhere(this.#c.onConflictNode,(0,x.k0)(e))})}whereRef(e,t,i){return new E({...this.#c,onConflictNode:O.cloneWithIndexWhere(this.#c.onConflictNode,(0,x.L4)(e,t,i))})}clearWhere(){return new E({...this.#c,onConflictNode:O.cloneWithoutIndexWhere(this.#c.onConflictNode)})}doNothing(){return new A({...this.#c,onConflictNode:O.cloneWith(this.#c.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new D({...this.#c,onConflictNode:O.cloneWith(this.#c.onConflictNode,{updates:g(e)})})}$call(e){return e(this)}}(0,w.q)(E,"don't await OnConflictBuilder instances.");class A{#c;constructor(e){this.#c=(0,d.vV)(e)}toOperationNode(){return this.#c.onConflictNode}}(0,w.q)(A,"don't await OnConflictDoNothingBuilder instances.");class D{#c;constructor(e){this.#c=(0,d.vV)(e)}where(...e){return new D({...this.#c,onConflictNode:O.cloneWithUpdateWhere(this.#c.onConflictNode,(0,x.k0)(e))})}whereRef(e,t,i){return new D({...this.#c,onConflictNode:O.cloneWithUpdateWhere(this.#c.onConflictNode,(0,x.L4)(e,t,i))})}clearWhere(){return new D({...this.#c,onConflictNode:O.cloneWithoutUpdateWhere(this.#c.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#c.onConflictNode}}(0,w.q)(D,"don't await OnConflictUpdateBuilder instances.");var B=i(45261);class k{#c;constructor(e){this.#c=(0,d.vV)(e)}values(e){let[t,i]=f(e);return new k({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{columns:t,values:i})})}columns(e){return new k({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{columns:(0,d.vV)(e.map(s.k.create))})})}expression(e){return new k({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{values:(0,c.BJ)(e)})})}defaultValues(){return new k({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{defaultValues:!0})})}modifyEnd(e){return new k({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}ignore(){return new k({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{ignore:!0})})}top(e,t){return new k({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,B.G)(e,t))})}onConflict(e){return new k({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{onConflict:e(new E({onConflictNode:O.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new k({...this.#c,queryNode:y.P.cloneWith(this.#c.queryNode,{onDuplicateKey:N.create(g(e))})})}returning(e){return new k({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.A)(e))})}returningAll(){return new k({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.L)())})}output(e){return new k({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new k({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}clearReturning(){return new k({...this.#c,queryNode:m.V.cloneWithoutReturning(this.#c.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new k({...this.#c})}$castTo(){return new k(this.#c)}$narrowType(){return new k(this.#c)}$assertType(){return new k(this.#c)}withPlugin(e){return new k({...this.#c,executor:this.#c.executor.withPlugin(e)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile(),t=await this.#c.executor.executeQuery(e,this.#c.queryId),{adapter:i}=this.#c.executor,r=e.query;return r.returning&&i.supportsReturning||r.output&&i.supportsOutput?t.rows:[new _(t.insertId,t.numAffectedRows??t.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=I.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,I.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let i of this.#c.executor.stream(t,e,this.#c.queryId))yield*i.rows}async explain(e,t){let i=new k({...this.#c,queryNode:m.V.cloneWithExplain(this.#c.queryNode,e,t)});return await i.execute()}}(0,w.q)(k,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var C=i(56044),F=i(90679);class V{numDeletedRows;constructor(e){this.numDeletedRows=e}}var R=i(75689),P=i(56251),L=i(75760);class M{#c;constructor(e){this.#c=(0,d.vV)(e)}where(...e){return new M({...this.#c,queryNode:m.V.cloneWithWhere(this.#c.queryNode,(0,x.k0)(e))})}whereRef(e,t,i){return new M({...this.#c,queryNode:m.V.cloneWithWhere(this.#c.queryNode,(0,x.L4)(e,t,i))})}clearWhere(){return new M({...this.#c,queryNode:m.V.cloneWithoutWhere(this.#c.queryNode)})}top(e,t){return new M({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,B.G)(e,t))})}using(e){return new M({...this.#c,queryNode:R.U.cloneWithUsing(this.#c.queryNode,(0,F._V)(e))})}innerJoin(...e){return new M({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,C.h)("InnerJoin",e))})}leftJoin(...e){return new M({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,C.h)("LeftJoin",e))})}rightJoin(...e){return new M({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,C.h)("RightJoin",e))})}fullJoin(...e){return new M({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,C.h)("FullJoin",e))})}returning(e){return new M({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.A)(e))})}returningAll(e){return new M({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.L)(e))})}output(e){return new M({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new M({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}clearReturning(){return new M({...this.#c,queryNode:m.V.cloneWithoutReturning(this.#c.queryNode)})}clearLimit(){return new M({...this.#c,queryNode:R.U.cloneWithoutLimit(this.#c.queryNode)})}clearOrderBy(){return new M({...this.#c,queryNode:R.U.cloneWithoutOrderBy(this.#c.queryNode)})}orderBy(e,t){return new M({...this.#c,queryNode:R.U.cloneWithOrderByItems(this.#c.queryNode,(0,L.bX)([e,t]))})}limit(e){return new M({...this.#c,queryNode:R.U.cloneWithLimit(this.#c.queryNode,P.Z.create((0,l.j2)(e)))})}modifyEnd(e){return new M({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,t){return e?t(this):new M({...this.#c})}$castTo(){return new M(this.#c)}$narrowType(){return new M(this.#c)}$assertType(){return new M(this.#c)}withPlugin(e){return new M({...this.#c,executor:this.#c.executor.withPlugin(e)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile(),t=await this.#c.executor.executeQuery(e,this.#c.queryId),{adapter:i}=this.#c.executor,r=e.query;return r.returning&&i.supportsReturning||r.output&&i.supportsOutput?t.rows:[new V(t.numAffectedRows??t.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=I.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,I.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let i of this.#c.executor.stream(t,e,this.#c.queryId))yield*i.rows}async explain(e,t){let i=new M({...this.#c,queryNode:m.V.cloneWithExplain(this.#c.queryNode,e,t)});return await i.execute()}}(0,w.q)(M,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var U=i(45219);class W{numUpdatedRows;numChangedRows;constructor(e,t){this.numUpdatedRows=e,this.numChangedRows=t}}class z{#c;constructor(e){this.#c=(0,d.vV)(e)}where(...e){return new z({...this.#c,queryNode:m.V.cloneWithWhere(this.#c.queryNode,(0,x.k0)(e))})}whereRef(e,t,i){return new z({...this.#c,queryNode:m.V.cloneWithWhere(this.#c.queryNode,(0,x.L4)(e,t,i))})}clearWhere(){return new z({...this.#c,queryNode:m.V.cloneWithoutWhere(this.#c.queryNode)})}top(e,t){return new z({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,B.G)(e,t))})}from(e){return new z({...this.#c,queryNode:U.j.cloneWithFromItems(this.#c.queryNode,(0,F._V)(e))})}innerJoin(...e){return new z({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,C.h)("InnerJoin",e))})}leftJoin(...e){return new z({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,C.h)("LeftJoin",e))})}rightJoin(...e){return new z({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,C.h)("RightJoin",e))})}fullJoin(...e){return new z({...this.#c,queryNode:m.V.cloneWithJoin(this.#c.queryNode,(0,C.h)("FullJoin",e))})}limit(e){return new z({...this.#c,queryNode:U.j.cloneWithLimit(this.#c.queryNode,P.Z.create((0,l.j2)(e)))})}set(...e){return new z({...this.#c,queryNode:U.j.cloneWithUpdates(this.#c.queryNode,function(...e){return 2===e.length?[v.create((0,b.jI)(e[0]),(0,l.j2)(e[1]))]:g(e[0])}(...e))})}returning(e){return new z({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.A)(e))})}returningAll(e){return new z({...this.#c,queryNode:m.V.cloneWithReturning(this.#c.queryNode,(0,n.L)(e))})}output(e){return new z({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new z({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}modifyEnd(e){return new z({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}clearReturning(){return new z({...this.#c,queryNode:m.V.cloneWithoutReturning(this.#c.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new z({...this.#c})}$castTo(){return new z(this.#c)}$narrowType(){return new z(this.#c)}$assertType(){return new z(this.#c)}withPlugin(e){return new z({...this.#c,executor:this.#c.executor.withPlugin(e)})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile(),t=await this.#c.executor.executeQuery(e,this.#c.queryId),{adapter:i}=this.#c.executor,r=e.query;return r.returning&&i.supportsReturning||r.output&&i.supportsOutput?t.rows:[new W(t.numAffectedRows??t.numUpdatedOrDeletedRows??BigInt(0),t.numChangedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=I.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,I.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let i of this.#c.executor.stream(t,e,this.#c.queryId))yield*i.rows}async explain(e,t){let i=new z({...this.#c,queryNode:m.V.cloneWithExplain(this.#c.queryNode,e,t)});return await i.execute()}}(0,w.q)(z,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var q=i(11973),j=i(49501);let $=(0,d.vV)({is:e=>"CommonTableExpressionNameNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"CommonTableExpressionNameNode",table:j.F.create(e),columns:t?(0,d.vV)(t.map(s.k.create)):void 0})});var Q=i(23013);let Z=(0,d.vV)({is:e=>"CommonTableExpressionNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"CommonTableExpressionNode",name:e,expression:t}),cloneWith:(e,t)=>(0,d.vV)({...e,...t})});class J{#c;constructor(e){this.#c=(0,d.vV)(e)}materialized(){return new J({...this.#c,node:Z.cloneWith(this.#c.node,{materialized:!0})})}notMaterialized(){return new J({...this.#c,node:Z.cloneWith(this.#c.node,{materialized:!1})})}toOperationNode(){return this.#c.node}}function G(e,t){var i;let r=t((0,Q.$l)()).toOperationNode();return(0,d.mf)(e)?e((i=r,e=>new J({node:Z.create(K(e),i)}))).toOperationNode():Z.create(K(e),r)}function K(e){if(!e.includes("("))return $.create(e);{let t=e.split(/[\(\)]/),i=t[0],r=t[1].split(",").map(e=>e.trim());return $.create(i,r)}}(0,w.q)(J,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");let Y=(0,d.vV)({is:e=>"WithNode"===e.kind,create:(e,t)=>(0,d.vV)({kind:"WithNode",expressions:(0,d.vV)([e]),...t}),cloneWithExpression:(e,t)=>(0,d.vV)({...e,expressions:(0,d.vV)([...e.expressions,t])})});var H=i(25381),X=i(16697),ee=i(64380);let et=(0,d.vV)({is:e=>"MatchedNode"===e.kind,create:(e,t=!1)=>(0,d.vV)({kind:"MatchedNode",not:e,bySource:t})});var ei=i(62240),er=i(67386),en=i(96409);function es(e,t,i){return en.$.create((0,x.QX)([et.create(!e.isMatched,e.bySource),...t&&t.length>0?[3===t.length&&i?(0,x.L4)(t[0],t[1],t[2]):(0,x.k0)(t)]:[]],"and",!1))}function eo(e){return(0,d.HD)(e)?er.x.create([e],[]):(0,ei.x)(e)?e.toOperationNode():e}var ea=i(39745);class ed{numChangedRows;constructor(e){this.numChangedRows=e}}class el{#c;constructor(e){this.#c=(0,d.vV)(e)}modifyEnd(e){return new el({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}top(e,t){return new el({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,B.G)(e,t))})}using(...e){return new eu({...this.#c,queryNode:ee.F.cloneWithUsing(this.#c.queryNode,(0,C.h)("Using",e))})}output(e){return new el({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new el({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}}(0,w.q)(el,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class eu{#c;constructor(e){this.#c=(0,d.vV)(e)}modifyEnd(e){return new eu({...this.#c,queryNode:m.V.cloneWithEndModifier(this.#c.queryNode,e.toOperationNode())})}top(e,t){return new eu({...this.#c,queryNode:m.V.cloneWithTop(this.#c.queryNode,(0,B.G)(e,t))})}whenMatched(){return this.#Q([])}whenMatchedAnd(...e){return this.#Q(e)}whenMatchedAndRef(e,t,i){return this.#Q([e,t,i],!0)}#Q(e,t){return new ec({...this.#c,queryNode:ee.F.cloneWithWhen(this.#c.queryNode,es({isMatched:!0},e,t))})}whenNotMatched(){return this.#Z([])}whenNotMatchedAnd(...e){return this.#Z(e)}whenNotMatchedAndRef(e,t,i){return this.#Z([e,t,i],!0)}whenNotMatchedBySource(){return this.#Z([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#Z(e,!1,!0)}whenNotMatchedBySourceAndRef(e,t,i){return this.#Z([e,t,i],!0,!0)}output(e){return new eu({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.A)(e))})}outputAll(e){return new eu({...this.#c,queryNode:m.V.cloneWithOutput(this.#c.queryNode,(0,n.L)(e))})}#Z(e,t=!1,i=!1){let r={...this.#c,queryNode:ee.F.cloneWithWhen(this.#c.queryNode,es({isMatched:!1,bySource:i},e,t))};return new(i?ec:eh)(r)}$call(e){return e(this)}$if(e,t){return e?t(this):new eu({...this.#c})}toOperationNode(){return this.#c.executor.transformQuery(this.#c.queryNode,this.#c.queryId)}compile(){return this.#c.executor.compileQuery(this.toOperationNode(),this.#c.queryId)}async execute(){let e=this.compile(),t=await this.#c.executor.executeQuery(e,this.#c.queryId);return e.query.output&&this.#c.executor.adapter.supportsOutput?t.rows:[new ed(t.numAffectedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=I.G){let t=await this.executeTakeFirst();if(void 0===t)throw(0,I.b)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}}(0,w.q)(eu,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class ec{#c;constructor(e){this.#c=(0,d.vV)(e)}thenDelete(){return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo("delete"))})}thenDoNothing(){return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo("do nothing"))})}thenUpdate(e){return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo(e(new z({queryId:this.#c.queryId,executor:ea.H,queryNode:U.j.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(t=>t.set(...e))}}(0,w.q)(ec,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class eh{#c;constructor(e){this.#c=(0,d.vV)(e)}thenDoNothing(){return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo("do nothing"))})}thenInsertValues(e){let[t,i]=f(e);return new eu({...this.#c,queryNode:ee.F.cloneWithThen(this.#c.queryNode,eo(y.P.cloneWith(y.P.createWithoutInto(),{columns:t,values:i})))})}}(0,w.q)(eh,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class ep{#c;constructor(e){this.#c=(0,d.vV)(e)}selectFrom(e){return(0,r.u)({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:q.a.createFrom((0,F._V)(e),this.#c.withNode)})}selectNoFrom(e){return(0,r.u)({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:q.a.cloneWithSelections(q.a.create(this.#c.withNode),(0,n.A)(e))})}insertInto(e){return new k({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:y.P.create((0,F.G2)(e),this.#c.withNode)})}replaceInto(e){return new k({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:y.P.create((0,F.G2)(e),this.#c.withNode,!0)})}deleteFrom(e){return new M({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:R.U.create((0,F._V)(e),this.#c.withNode)})}updateTable(e){return new z({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:U.j.create((0,F.Lr)(e),this.#c.withNode)})}mergeInto(e){return new el({queryId:(0,H.y)(),executor:this.#c.executor,queryNode:ee.F.create((0,F.hm)(e),this.#c.withNode)})}with(e,t){let i=G(e,t);return new ep({...this.#c,withNode:this.#c.withNode?Y.cloneWithExpression(this.#c.withNode,i):Y.create(i)})}withRecursive(e,t){let i=G(e,t);return new ep({...this.#c,withNode:this.#c.withNode?Y.cloneWithExpression(this.#c.withNode,i):Y.create(i,{recursive:!0})})}withPlugin(e){return new ep({...this.#c,executor:this.#c.executor.withPlugin(e)})}withoutPlugins(){return new ep({...this.#c,executor:this.#c.executor.withoutPlugins()})}withSchema(e){return new ep({...this.#c,executor:this.#c.executor.withPluginAtFront(new X.v(e))})}}},39745:function(e,t,i){i.d(t,{H:()=>s});var r=i(56305);class n extends r.u{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(e){return new n([...this.plugins,e])}withPlugins(e){return new n([...this.plugins,...e])}withPluginAtFront(e){return new n([e,...this.plugins])}withoutPlugins(){return new n([])}}let s=new n},56305:function(e,t,i){i.d(t,{u:()=>a});var r=i(47589);class n{#J;#G;#K;constructor(){this.#J=new Promise((e,t)=>{this.#K=t,this.#G=e})}get promise(){return this.#J}resolve=e=>{this.#G&&this.#G(e)};reject=e=>{this.#K&&this.#K(e)}}let s=new Set,o=(0,r.vV)([]);class a{#Y;constructor(e=o){this.#Y=e}get plugins(){return this.#Y}transformQuery(e,t){for(let i of this.#Y){let r=i.transformQuery({node:e,queryId:t});if(r.kind===e.kind)e=r;else throw Error(`KyselyPlugin.transformQuery must return a node of the same kind that was given to it. The plugin was given a ${e.kind} but it returned a ${r.kind}`)}return e}async executeQuery(e,t){return await this.provideConnection(async i=>{let r=await i.executeQuery(e),n=await this.#H(r,t);return function(e,t){let{numAffectedRows:i}=e;if((void 0!==i||void 0!==e.numUpdatedOrDeletedRows)&&(void 0===i||void 0===t.numAffectedRows)){var r;r="kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.",s.has(r)||(s.add(r),console.log(r))}}(r,n),n})}async *stream(e,t,i){let r=new n,s=new n;this.provideConnection(async e=>(r.resolve(e),await s.promise)).catch(e=>r.reject(e));let o=await r.promise;try{for await(let r of o.streamQuery(e,t))yield await this.#H(r,i)}finally{s.resolve()}}async #H(e,t){for(let i of this.#Y)e=await i.transformResult({result:e,queryId:t});return e}}},11593:function(e,t,i){i.d(t,{i:()=>b});var r=i(36548),n=i(62240),s=i(67386),o=i(38419),a=i(57550),d=i(90679),l=i(11942),u=i(25381),c=i(1784),h=i(26481),p=i(47589),f=i(39745);class y{#c;constructor(e){this.#c=(0,p.vV)(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new v(this,e)}$castTo(){return new y({...this.#c})}$notNull(){return new y(this.#c)}withPlugin(e){return new y({...this.#c,plugins:void 0!==this.#c.plugins?(0,p.vV)([...this.#c.plugins,e]):(0,p.vV)([e])})}toOperationNode(){return this.#X(this.#ee())}compile(e){return this.#et(this.#ee(e))}async execute(e){let t=this.#ee(e);return t.executeQuery(this.#et(t),this.#c.queryId)}#ee(e){let t=void 0!==e?e.getExecutor():f.H;return void 0!==this.#c.plugins?t.withPlugins(this.#c.plugins):t}#X(e){return e.transformQuery(this.#c.rawNode,this.#c.queryId)}#et(e){return e.compileQuery(this.#X(e),this.#c.queryId)}}function m(e){return new y(e)}(0,h.q)(y,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class v{#ei;#a;constructor(e,t){this.#ei=e,this.#a=t}get expression(){return this.#ei}get alias(){return this.#a}get rawBuilder(){return this.#ei}toOperationNode(){return c.i.create(this.#ei.toOperationNode(),(0,n.x)(this.#a)?this.#a.toOperationNode():r.T.create(this.#a))}}(0,h.q)(v,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");let b=Object.assign((e,...t)=>m({queryId:(0,u.y)(),rawNode:s.x.create(e,t?.map(g)??[])}),{ref:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithChild((0,a.KX)(e))}),val:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithChild((0,l.j2)(e))}),value(e){return this.val(e)},table:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithChild((0,d.G2)(e))}),id(...e){let t=Array(e.length+1).fill(".");return t[0]="",t[t.length-1]="",m({queryId:(0,u.y)(),rawNode:s.x.create(t,e.map(r.T.create))})},lit:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithChild(o.g.createImmediate(e))}),literal(e){return this.lit(e)},raw:e=>m({queryId:(0,u.y)(),rawNode:s.x.createWithSql(e)}),join(e,t=b`, `){let i=Array(2*e.length-1),r=t.toOperationNode();for(let t=0;t<e.length;++t)i[2*t]=g(e[t]),t!==e.length-1&&(i[2*t+1]=r);return m({queryId:(0,u.y)(),rawNode:s.x.createWithChildren(i)})}});function g(e){return(0,n.x)(e)?e.toOperationNode():(0,l.j2)(e)}},47589:function(e,t,i){function r(e){return void 0===e||void 0===e}function n(e){return"string"==typeof e}function s(e){return"number"==typeof e}function o(e){return"boolean"==typeof e}function a(e){return null===e}function d(e){return e instanceof Date}function l(e){return"bigint"==typeof e}function u(e){return"function"==typeof e}function c(e){return"object"==typeof e&&null!==e}function h(e){return Object.freeze(e)}function p(e){return f(e)?e:[e]}function f(e){return Array.isArray(e)}function y(e){return e}i.d(t,{C4:()=>l,DM:()=>f,Ft:()=>a,HD:()=>n,J_:()=>d,Kn:()=>c,ZT:()=>y,_2:()=>p,hj:()=>s,jn:()=>o,mf:()=>u,o8:()=>r,vV:()=>h}),Object.prototype.toString},26481:function(e,t,i){i.d(t,{q:()=>r});function r(e,t){Object.defineProperties(e.prototype,{then:{enumerable:!1,value:()=>{throw Error(t)}}})}},25381:function(e,t,i){i.d(t,{y:()=>n});let r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function n(){return new s}class s{#er;get queryId(){return void 0===this.#er&&(this.#er=function(e){let t="";for(let e=0;e<8;++e)t+=r[~~(Math.random()*r.length)];return t}(0)),this.#er}}},24709:function(e,t,i){function r(e,t,i){function r(i,r){var n;for(let s in Object.defineProperty(i,"_zod",{value:i._zod??{},enumerable:!1}),(n=i._zod).traits??(n.traits=new Set),i._zod.traits.add(e),t(i,r),o.prototype)s in i||Object.defineProperty(i,s,{value:o.prototype[s].bind(i)});i._zod.constr=o,i._zod.def=r}let n=i?.Parent??Object;class s extends n{}function o(e){var t;let n=i?.Parent?new s:this;for(let i of(r(n,e),(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred))i();return n}return Object.defineProperty(s,"name",{value:e}),Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:t=>!!i?.Parent&&t instanceof i.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(o,"name",{value:e}),o}i.d(t,{O7:()=>im,VK:()=>iB,Km:()=>iR,Z_:()=>tH,Yj:()=>iw,G0:()=>iA,IX:()=>iT,i0:()=>iL,Rx:()=>ic,o4:()=>tX,Ry:()=>ix,IM:()=>iF,S1:()=>ib}),Object.freeze({status:"aborted"}),Symbol("zod_brand");class n extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let s={};function o(e){return e&&Object.assign(s,e),s}let a=/^[cC][^\s-]{8,}$/,d=/^[0-9a-z]+$/,l=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,u=/^[0-9a-vA-V]{20}$/,c=/^[A-Za-z0-9]{27}$/,h=/^[a-zA-Z0-9_-]{21}$/,p=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,f=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,y=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,m=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,v=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,b=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,g=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,w=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,N=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,_=/^[A-Za-z0-9_-]*$/,I=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,S=/^\+(?:[0-9]){6,14}[0-9]$/,T="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",O=RegExp(`^${T}$`);function x(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}let E=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},A=/^\d+$/,D=/^-?\d+(?:\.\d+)?/i,B=/true|false/i,k=/undefined/i,C=/^[^A-Z]*$/,F=/^[^a-z]*$/;function V(e,t){return"bigint"==typeof t?t.toString():t}function R(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function P(e){let t=+!!e.startsWith("^"),i=e.endsWith("$")?e.length-1:e.length;return e.slice(t,i)}let L=Symbol("evaluating");function M(e,t,i){let r;Object.defineProperty(e,t,{get(){if(r!==L)return void 0===r&&(r=L,r=i()),r},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}function U(e,t,i){Object.defineProperty(e,t,{value:i,writable:!0,enumerable:!0,configurable:!0})}function W(...e){let t={};for(let i of e)Object.assign(t,Object.getOwnPropertyDescriptors(i));return Object.defineProperties({},t)}function z(e){return JSON.stringify(e)}let q="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function j(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let $=R(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function Q(e){if(!1===j(e))return!1;let t=e.constructor;if(void 0===t)return!0;let i=t.prototype;return!1!==j(i)&&!1!==Object.prototype.hasOwnProperty.call(i,"isPrototypeOf")}let Z=new Set(["string","number","symbol"]);function J(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function G(e,t,i){let r=new e._zod.constr(t??e._zod.def);return(!t||i?.parent)&&(r._zod.parent=e),r}function K(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}let Y={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function H(e,t=0){for(let i=t;i<e.issues.length;i++)if(e.issues[i]?.continue!==!0)return!0;return!1}function X(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function ee(e){return"string"==typeof e?e:e?.message}function et(e,t,i){let r={...e,path:e.path??[]};return e.message||(r.message=ee(e.inst?._zod.def?.error?.(e))??ee(t?.error?.(e))??ee(i.customError?.(e))??ee(i.localeError?.(e))??"Invalid input"),delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function ei(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function er(...e){let[t,i,r]=e;return"string"==typeof t?{message:t,code:"custom",input:i,inst:r}:{...t}}let en=r("$ZodCheck",(e,t)=>{var i;e._zod??(e._zod={}),e._zod.def=t,(i=e._zod).onattach??(i.onattach=[])}),es={number:"number",bigint:"bigint",object:"date"},eo=r("$ZodCheckLessThan",(e,t)=>{en.init(e,t);let i=es[typeof t.value];e._zod.onattach.push(e=>{let i=e._zod.bag,r=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:i,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ea=r("$ZodCheckGreaterThan",(e,t)=>{en.init(e,t);let i=es[typeof t.value];e._zod.onattach.push(e=>{let i=e._zod.bag,r=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:i,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ed=r("$ZodCheckMultipleOf",(e,t)=>{en.init(e,t),e._zod.onattach.push(e=>{var i;(i=e._zod.bag).multipleOf??(i.multipleOf=t.value)}),e._zod.check=i=>{if(typeof i.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof i.value?i.value%t.value===BigInt(0):0===function(e,t){let i=(e.toString().split(".")[1]||"").length,r=t.toString(),n=(r.split(".")[1]||"").length;if(0===n&&/\d?e-\d?/.test(r)){let e=r.match(/\d?e-(\d?)/);e?.[1]&&(n=Number.parseInt(e[1]))}let s=i>n?i:n;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}(i.value,t.value))||i.issues.push({origin:typeof i.value,code:"not_multiple_of",divisor:t.value,input:i.value,inst:e,continue:!t.abort})}}),el=r("$ZodCheckNumberFormat",(e,t)=>{en.init(e,t),t.format=t.format||"float64";let i=t.format?.includes("int"),r=i?"int":"number",[n,s]=Y[t.format];e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,r.minimum=n,r.maximum=s,i&&(r.pattern=A)}),e._zod.check=o=>{let a=o.value;if(i){if(!Number.isInteger(a))return void o.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});if(!Number.isSafeInteger(a))return void(a>0?o.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):o.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}a<n&&o.issues.push({origin:"number",input:a,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),a>s&&o.issues.push({origin:"number",input:a,code:"too_big",maximum:s,inst:e})}}),eu=r("$ZodCheckMaxLength",(e,t)=>{var i;en.init(e,t),(i=e._zod.def).when??(i.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let i=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=i=>{let r=i.value;if(r.length<=t.maximum)return;let n=ei(r);i.issues.push({origin:n,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),ec=r("$ZodCheckMinLength",(e,t)=>{var i;en.init(e,t),(i=e._zod.def).when??(i.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let i=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=i=>{let r=i.value;if(r.length>=t.minimum)return;let n=ei(r);i.issues.push({origin:n,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),eh=r("$ZodCheckLengthEquals",(e,t)=>{var i;en.init(e,t),(i=e._zod.def).when??(i.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let i=e._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=i=>{let r=i.value,n=r.length;if(n===t.length)return;let s=ei(r),o=n>t.length;i.issues.push({origin:s,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!t.abort})}}),ep=r("$ZodCheckStringFormat",(e,t)=>{var i,r;en.init(e,t),e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(i=e._zod).check??(i.check=i=>{t.pattern.lastIndex=0,t.pattern.test(i.value)||i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),ef=r("$ZodCheckRegex",(e,t)=>{ep.init(e,t),e._zod.check=i=>{t.pattern.lastIndex=0,t.pattern.test(i.value)||i.issues.push({origin:"string",code:"invalid_format",format:"regex",input:i.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),ey=r("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=C),ep.init(e,t)}),em=r("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=F),ep.init(e,t)}),ev=r("$ZodCheckIncludes",(e,t)=>{en.init(e,t);let i=J(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${i}`:i);t.pattern=r,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),eb=r("$ZodCheckStartsWith",(e,t)=>{en.init(e,t);let i=RegExp(`^${J(t.prefix)}.*`);t.pattern??(t.pattern=i),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(i)}),e._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:e,continue:!t.abort})}}),eg=r("$ZodCheckEndsWith",(e,t)=>{en.init(e,t);let i=RegExp(`.*${J(t.suffix)}$`);t.pattern??(t.pattern=i),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(i)}),e._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:e,continue:!t.abort})}}),ew=r("$ZodCheckOverwrite",(e,t)=>{en.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class eN{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),i=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(i)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let e_=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,V,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},eI=r("$ZodError",e_),eS=r("$ZodError",e_,{Parent:Error}),eT=e=>(t,i,r)=>{let s=r?{...r,async:!1}:{async:!1},a=t._zod.run({value:i,issues:[]},s);if(a instanceof Promise)throw new n;return a.issues.length?{success:!1,error:new(e??eI)(a.issues.map(e=>et(e,s,o())))}:{success:!0,data:a.value}},eO=eT(eS),ex=e=>async(t,i,r)=>{let n=r?Object.assign(r,{async:!0}):{async:!0},s=t._zod.run({value:i,issues:[]},n);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(e=>et(e,n,o())))}:{success:!0,data:s.value}},eE=ex(eS),eA={major:4,minor:0,patch:14},eD=r("$ZodType",(e,t)=>{var i;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=eA;let r=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&r.unshift(e),r))for(let i of t._zod.onattach)i(e);if(0===r.length)(i=e._zod).deferred??(i.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,i)=>{let r,s=H(e);for(let o of t){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(s)continue;let t=e.issues.length,a=o._zod.check(e);if(a instanceof Promise&&i?.async===!1)throw new n;if(r||a instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(s||(s=H(e,t)))});else{if(e.issues.length===t)continue;s||(s=H(e,t))}}return r?r.then(()=>e):e};e._zod.run=(i,s)=>{let o=e._zod.parse(i,s);if(o instanceof Promise){if(!1===s.async)throw new n;return o.then(e=>t(e,r,s))}return t(o,r,s)}}e["~standard"]={validate:t=>{try{let i=eO(e,t);return i.success?{value:i.data}:{issues:i.error?.issues}}catch(i){return eE(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),eB=r("$ZodString",(e,t)=>{eD.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??E(e._zod.bag),e._zod.parse=(i,r)=>{if(t.coerce)try{i.value=String(i.value)}catch(e){}return"string"==typeof i.value||i.issues.push({expected:"string",code:"invalid_type",input:i.value,inst:e}),i}}),ek=r("$ZodStringFormat",(e,t)=>{ep.init(e,t),eB.init(e,t)}),eC=r("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=f),ek.init(e,t)}),eF=r("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=y(e))}else t.pattern??(t.pattern=y());ek.init(e,t)}),eV=r("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=m),ek.init(e,t)}),eR=r("$ZodURL",(e,t)=>{ek.init(e,t),e._zod.check=i=>{try{let r=i.value.trim(),n=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:I.source,input:i.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||i.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:i.value,inst:e,continue:!t.abort})),t.normalize?i.value=n.href:i.value=r;return}catch(r){i.issues.push({code:"invalid_format",format:"url",input:i.value,inst:e,continue:!t.abort})}}}),eP=r("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ek.init(e,t)}),eL=r("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=h),ek.init(e,t)}),eM=r("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=a),ek.init(e,t)}),eU=r("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=d),ek.init(e,t)}),eW=r("$ZodULID",(e,t)=>{t.pattern??(t.pattern=l),ek.init(e,t)}),ez=r("$ZodXID",(e,t)=>{t.pattern??(t.pattern=u),ek.init(e,t)}),eq=r("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=c),ek.init(e,t)}),ej=r("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){let t=x({precision:e.precision}),i=["Z"];e.local&&i.push(""),e.offset&&i.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let r=`${t}(?:${i.join("|")})`;return RegExp(`^${T}T(?:${r})$`)}(t)),ek.init(e,t)}),e$=r("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=O),ek.init(e,t)}),eQ=r("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=RegExp(`^${x(t)}$`)),ek.init(e,t)}),eZ=r("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=p),ek.init(e,t)}),eJ=r("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=v),ek.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),eG=r("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=b),ek.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=i=>{try{new URL(`http://[${i.value}]`)}catch{i.issues.push({code:"invalid_format",format:"ipv6",input:i.value,inst:e,continue:!t.abort})}}}),eK=r("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=g),ek.init(e,t)}),eY=r("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=w),ek.init(e,t),e._zod.check=i=>{let[r,n]=i.value.split("/");try{if(!n)throw Error();let e=Number(n);if(`${e}`!==n||e<0||e>128)throw Error();new URL(`http://[${r}]`)}catch{i.issues.push({code:"invalid_format",format:"cidrv6",input:i.value,inst:e,continue:!t.abort})}}});function eH(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let eX=r("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=N),ek.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=i=>{eH(i.value)||i.issues.push({code:"invalid_format",format:"base64",input:i.value,inst:e,continue:!t.abort})}}),e0=r("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=_),ek.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=i=>{!function(e){if(!_.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return eH(t.padEnd(4*Math.ceil(t.length/4),"="))}(i.value)&&i.issues.push({code:"invalid_format",format:"base64url",input:i.value,inst:e,continue:!t.abort})}}),e1=r("$ZodE164",(e,t)=>{t.pattern??(t.pattern=S),ek.init(e,t)}),e2=r("$ZodJWT",(e,t)=>{ek.init(e,t),e._zod.check=i=>{!function(e,t=null){try{let i=e.split(".");if(3!==i.length)return!1;let[r]=i;if(!r)return!1;let n=JSON.parse(atob(r));if("typ"in n&&n?.typ!=="JWT"||!n.alg||t&&(!("alg"in n)||n.alg!==t))return!1;return!0}catch{return!1}}(i.value,t.alg)&&i.issues.push({code:"invalid_format",format:"jwt",input:i.value,inst:e,continue:!t.abort})}}),e4=r("$ZodNumber",(e,t)=>{eD.init(e,t),e._zod.pattern=e._zod.bag.pattern??D,e._zod.parse=(i,r)=>{if(t.coerce)try{i.value=Number(i.value)}catch(e){}let n=i.value;if("number"==typeof n&&!Number.isNaN(n)&&Number.isFinite(n))return i;let s="number"==typeof n?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return i.issues.push({expected:"number",code:"invalid_type",input:n,inst:e,...s?{received:s}:{}}),i}}),e3=r("$ZodNumber",(e,t)=>{el.init(e,t),e4.init(e,t)}),e8=r("$ZodBoolean",(e,t)=>{eD.init(e,t),e._zod.pattern=B,e._zod.parse=(i,r)=>{if(t.coerce)try{i.value=!!i.value}catch(e){}let n=i.value;return"boolean"==typeof n||i.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:e}),i}}),e6=r("$ZodUndefined",(e,t)=>{eD.init(e,t),e._zod.pattern=k,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,i)=>{let r=t.value;return void 0===r||t.issues.push({expected:"undefined",code:"invalid_type",input:r,inst:e}),t}}),e5=r("$ZodAny",(e,t)=>{eD.init(e,t),e._zod.parse=e=>e}),e9=r("$ZodUnknown",(e,t)=>{eD.init(e,t),e._zod.parse=e=>e}),e7=r("$ZodNever",(e,t)=>{eD.init(e,t),e._zod.parse=(t,i)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function te(e,t,i){e.issues.length&&t.issues.push(...X(i,e.issues)),t.value[i]=e.value}let tt=r("$ZodArray",(e,t)=>{eD.init(e,t),e._zod.parse=(i,r)=>{let n=i.value;if(!Array.isArray(n))return i.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),i;i.value=Array(n.length);let s=[];for(let e=0;e<n.length;e++){let o=n[e],a=t.element._zod.run({value:o,issues:[]},r);a instanceof Promise?s.push(a.then(t=>te(t,i,e))):te(a,i,e)}return s.length?Promise.all(s).then(()=>i):i}});function ti(e,t,i,r){e.issues.length&&t.issues.push(...X(i,e.issues)),void 0===e.value?i in r&&(t.value[i]=void 0):t.value[i]=e.value}let tr=r("$ZodObject",(e,t)=>{let i,r;eD.init(e,t);let n=R(()=>{var e;let i=Object.keys(t.shape);for(let e of i)if(!(t.shape[e]instanceof eD))throw Error(`Invalid element at key "${e}": expected a Zod schema`);let r=Object.keys(e=t.shape).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout);return{shape:t.shape,keys:i,keySet:new Set(i),numKeys:i.length,optionalKeys:new Set(r)}});M(e._zod,"propValues",()=>{let e=t.shape,i={};for(let t in e){let r=e[t]._zod;if(r.values)for(let e of(i[t]??(i[t]=new Set),r.values))i[t].add(e)}return i});let o=e=>{let t=new eN(["shape","payload","ctx"]),i=n.value,r=e=>{let t=z(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let s=Object.create(null),o=0;for(let e of i.keys)s[e]=`key_${o++}`;for(let e of(t.write("const newResult = {}"),i.keys)){let i=s[e],n=z(e);t.write(`const ${i} = ${r(e)};`),t.write(`
        if (${i}.issues.length) {
          payload.issues = payload.issues.concat(${i}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${n}, ...iss.path] : [${n}]
          })));
        }
        
        if (${i}.value === undefined) {
          if (${n} in input) {
            newResult[${n}] = undefined;
          }
        } else {
          newResult[${n}] = ${i}.value;
        }
      `)}t.write("payload.value = newResult;"),t.write("return payload;");let a=t.compile();return(t,i)=>a(e,t,i)},a=!s.jitless,d=a&&$.value,l=t.catchall;e._zod.parse=(s,u)=>{r??(r=n.value);let c=s.value;if(!j(c))return s.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),s;let h=[];if(a&&d&&u?.async===!1&&!0!==u.jitless)i||(i=o(t.shape)),s=i(s,u);else{s.value={};let e=r.shape;for(let t of r.keys){let i=e[t]._zod.run({value:c[t],issues:[]},u);i instanceof Promise?h.push(i.then(e=>ti(e,s,t,c))):ti(i,s,t,c)}}if(!l)return h.length?Promise.all(h).then(()=>s):s;let p=[],f=r.keySet,y=l._zod,m=y.def.type;for(let e of Object.keys(c)){if(f.has(e))continue;if("never"===m){p.push(e);continue}let t=y.run({value:c[e],issues:[]},u);t instanceof Promise?h.push(t.then(t=>ti(t,s,e,c))):ti(t,s,e,c)}return(p.length&&s.issues.push({code:"unrecognized_keys",keys:p,input:c,inst:e}),h.length)?Promise.all(h).then(()=>s):s}});function tn(e,t,i,r){for(let i of e)if(0===i.issues.length)return t.value=i.value,t;let n=e.filter(e=>!H(e));return 1===n.length?(t.value=n[0].value,n[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:i,errors:e.map(e=>e.issues.map(e=>et(e,r,o())))}),t)}let ts=r("$ZodUnion",(e,t)=>{eD.init(e,t),M(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),M(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),M(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),M(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>P(e.source)).join("|")})$`)}});let i=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(n,s)=>{if(i)return r(n,s);let o=!1,a=[];for(let e of t.options){let t=e._zod.run({value:n.value,issues:[]},s);if(t instanceof Promise)a.push(t),o=!0;else{if(0===t.issues.length)return t;a.push(t)}}return o?Promise.all(a).then(t=>tn(t,n,e,s)):tn(a,n,e,s)}}),to=r("$ZodDiscriminatedUnion",(e,t)=>{ts.init(e,t);let i=e._zod.parse;M(e._zod,"propValues",()=>{let e={};for(let i of t.options){let r=i._zod.propValues;if(!r||0===Object.keys(r).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(let[t,i]of Object.entries(r))for(let r of(e[t]||(e[t]=new Set),i))e[t].add(r)}return e});let r=R(()=>{let e=t.options,i=new Map;for(let r of e){let e=r._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let t of e){if(i.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);i.set(t,r)}}return i});e._zod.parse=(n,s)=>{let o=n.value;if(!j(o))return n.issues.push({code:"invalid_type",expected:"object",input:o,inst:e}),n;let a=r.value.get(o?.[t.discriminator]);return a?a._zod.run(n,s):t.unionFallback?i(n,s):(n.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:o,path:[t.discriminator],inst:e}),n)}}),ta=r("$ZodIntersection",(e,t)=>{eD.init(e,t),e._zod.parse=(e,i)=>{let r=e.value,n=t.left._zod.run({value:r,issues:[]},i),s=t.right._zod.run({value:r,issues:[]},i);return n instanceof Promise||s instanceof Promise?Promise.all([n,s]).then(([t,i])=>td(e,t,i)):td(e,n,s)}});function td(e,t,i){if(t.issues.length&&e.issues.push(...t.issues),i.issues.length&&e.issues.push(...i.issues),H(e))return e;let r=function e(t,i){if(t===i||t instanceof Date&&i instanceof Date&&+t==+i)return{valid:!0,data:t};if(Q(t)&&Q(i)){let r=Object.keys(i),n=Object.keys(t).filter(e=>-1!==r.indexOf(e)),s={...t,...i};for(let r of n){let n=e(t[r],i[r]);if(!n.valid)return{valid:!1,mergeErrorPath:[r,...n.mergeErrorPath]};s[r]=n.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(i)){if(t.length!==i.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<t.length;n++){let s=e(t[n],i[n]);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}(t.value,i.value);if(!r.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}let tl=r("$ZodRecord",(e,t)=>{eD.init(e,t),e._zod.parse=(i,r)=>{let n=i.value;if(!Q(n))return i.issues.push({expected:"record",code:"invalid_type",input:n,inst:e}),i;let s=[];if(t.keyType._zod.values){let o,a=t.keyType._zod.values;for(let e of(i.value={},a))if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let o=t.valueType._zod.run({value:n[e],issues:[]},r);o instanceof Promise?s.push(o.then(t=>{t.issues.length&&i.issues.push(...X(e,t.issues)),i.value[e]=t.value})):(o.issues.length&&i.issues.push(...X(e,o.issues)),i.value[e]=o.value)}for(let e in n)a.has(e)||(o=o??[]).push(e);o&&o.length>0&&i.issues.push({code:"unrecognized_keys",input:n,inst:e,keys:o})}else for(let a of(i.value={},Reflect.ownKeys(n))){if("__proto__"===a)continue;let d=t.keyType._zod.run({value:a,issues:[]},r);if(d instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(d.issues.length){i.issues.push({code:"invalid_key",origin:"record",issues:d.issues.map(e=>et(e,r,o())),input:a,path:[a],inst:e}),i.value[d.value]=d.value;continue}let l=t.valueType._zod.run({value:n[a],issues:[]},r);l instanceof Promise?s.push(l.then(e=>{e.issues.length&&i.issues.push(...X(a,e.issues)),i.value[d.value]=e.value})):(l.issues.length&&i.issues.push(...X(a,l.issues)),i.value[d.value]=l.value)}return s.length?Promise.all(s).then(()=>i):i}}),tu=r("$ZodEnum",(e,t)=>{eD.init(e,t);let i=function(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,i])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries),r=new Set(i);e._zod.values=r,e._zod.pattern=RegExp(`^(${i.filter(e=>Z.has(typeof e)).map(e=>"string"==typeof e?J(e):e.toString()).join("|")})$`),e._zod.parse=(t,n)=>{let s=t.value;return r.has(s)||t.issues.push({code:"invalid_value",values:i,input:s,inst:e}),t}}),tc=r("$ZodLiteral",(e,t)=>{if(eD.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?J(e):e?J(e.toString()):String(e)).join("|")})$`),e._zod.parse=(i,r)=>{let n=i.value;return e._zod.values.has(n)||i.issues.push({code:"invalid_value",values:t.values,input:n,inst:e}),i}}),th=r("$ZodTransform",(e,t)=>{eD.init(e,t),e._zod.parse=(e,i)=>{let r=t.transform(e.value,e);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(t=>(e.value=t,e));if(r instanceof Promise)throw new n;return e.value=r,e}});function tp(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}let tf=r("$ZodOptional",(e,t)=>{eD.init(e,t),e._zod.optin="optional",e._zod.optout="optional",M(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),M(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${P(e.source)})?$`):void 0}),e._zod.parse=(e,i)=>{if("optional"===t.innerType._zod.optin){let r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(t=>tp(t,e.value)):tp(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,i)}}),ty=r("$ZodNullable",(e,t)=>{eD.init(e,t),M(e._zod,"optin",()=>t.innerType._zod.optin),M(e._zod,"optout",()=>t.innerType._zod.optout),M(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${P(e.source)}|null)$`):void 0}),M(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,i)=>null===e.value?e:t.innerType._zod.run(e,i)}),tm=r("$ZodDefault",(e,t)=>{eD.init(e,t),e._zod.optin="optional",M(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,i)=>{if(void 0===e.value)return e.value=t.defaultValue,e;let r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(e=>tv(e,t)):tv(r,t)}});function tv(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let tb=r("$ZodPrefault",(e,t)=>{eD.init(e,t),e._zod.optin="optional",M(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,i)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,i))}),tg=r("$ZodNonOptional",(e,t)=>{eD.init(e,t),M(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(i,r)=>{let n=t.innerType._zod.run(i,r);return n instanceof Promise?n.then(t=>tw(t,e)):tw(n,e)}});function tw(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let tN=r("$ZodCatch",(e,t)=>{eD.init(e,t),M(e._zod,"optin",()=>t.innerType._zod.optin),M(e._zod,"optout",()=>t.innerType._zod.optout),M(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,i)=>{let r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>et(e,i,o()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>et(e,i,o()))},input:e.value}),e.issues=[]),e)}}),t_=r("$ZodPipe",(e,t)=>{eD.init(e,t),M(e._zod,"values",()=>t.in._zod.values),M(e._zod,"optin",()=>t.in._zod.optin),M(e._zod,"optout",()=>t.out._zod.optout),M(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,i)=>{let r=t.in._zod.run(e,i);return r instanceof Promise?r.then(e=>tI(e,t,i)):tI(r,t,i)}});function tI(e,t,i){return e.issues.length?e:t.out._zod.run({value:e.value,issues:e.issues},i)}let tS=r("$ZodReadonly",(e,t)=>{eD.init(e,t),M(e._zod,"propValues",()=>t.innerType._zod.propValues),M(e._zod,"values",()=>t.innerType._zod.values),M(e._zod,"optin",()=>t.innerType._zod.optin),M(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,i)=>{let r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(tT):tT(r)}});function tT(e){return e.value=Object.freeze(e.value),e}let tO=r("$ZodCustom",(e,t)=>{en.init(e,t),eD.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=i=>{let r=i.value,n=t.fn(r);if(n instanceof Promise)return n.then(t=>tx(t,i,r,e));tx(n,i,r,e)}});function tx(e,t,i,r){if(!e){let e={code:"custom",input:i,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(er(e))}}Symbol("ZodOutput"),Symbol("ZodInput");let tE=new class e{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){let i=t[0];if(this._map.set(e,i),i&&"object"==typeof i&&"id"in i){if(this._idmap.has(i.id))throw Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let i={...this.get(t)??{}};delete i.id;let r={...i,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function tA(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...K(t)})}function tD(e,t){return new eo({check:"less_than",...K(t),value:e,inclusive:!1})}function tB(e,t){return new eo({check:"less_than",...K(t),value:e,inclusive:!0})}function tk(e,t){return new ea({check:"greater_than",...K(t),value:e,inclusive:!1})}function tC(e,t){return new ea({check:"greater_than",...K(t),value:e,inclusive:!0})}function tF(e,t){return new ed({check:"multiple_of",...K(t),value:e})}function tV(e,t){return new eu({check:"max_length",...K(t),maximum:e})}function tR(e,t){return new ec({check:"min_length",...K(t),minimum:e})}function tP(e,t){return new eh({check:"length_equals",...K(t),length:e})}function tL(e){return new ew({check:"overwrite",tx:e})}let tM=r("ZodISODateTime",(e,t)=>{ej.init(e,t),tX.init(e,t)}),tU=r("ZodISODate",(e,t)=>{e$.init(e,t),tX.init(e,t)}),tW=r("ZodISOTime",(e,t)=>{eQ.init(e,t),tX.init(e,t)}),tz=r("ZodISODuration",(e,t)=>{eZ.init(e,t),tX.init(e,t)}),tq=(e,t)=>{eI.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>(function(e,t){let i=t||function(e){return e.message},r={_errors:[]},n=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>n({issues:e}));else if("invalid_key"===t.code)n({issues:t.issues});else if("invalid_element"===t.code)n({issues:t.issues});else if(0===t.path.length)r._errors.push(i(t));else{let e=r,n=0;for(;n<t.path.length;){let r=t.path[n];n===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(i(t))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r})(e,t)},flatten:{value:t=>(function(e,t=e=>e.message){let i={},r=[];for(let n of e.issues)n.path.length>0?(i[n.path[0]]=i[n.path[0]]||[],i[n.path[0]].push(t(n))):r.push(t(n));return{formErrors:r,fieldErrors:i}})(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,V,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,V,2)}},isEmpty:{get:()=>0===e.issues.length}})};r("ZodError",tq);let tj=r("ZodError",tq,{Parent:Error}),t$=(e,t,i,r)=>{let s=i?Object.assign(i,{async:!1}):{async:!1},a=e._zod.run({value:t,issues:[]},s);if(a instanceof Promise)throw new n;if(a.issues.length){let e=new(r?.Err??tj)(a.issues.map(e=>et(e,s,o())));throw q(e,r?.callee),e}return a.value},tQ=async(e,t,i,r)=>{let n=i?Object.assign(i,{async:!0}):{async:!0},s=e._zod.run({value:t,issues:[]},n);if(s instanceof Promise&&(s=await s),s.issues.length){let e=new(r?.Err??tj)(s.issues.map(e=>et(e,n,o())));throw q(e,r?.callee),e}return s.value},tZ=eT(tj),tJ=ex(tj),tG=r("ZodType",(e,t)=>(eD.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...i)=>e.clone({...t,checks:[...t.checks??[],...i.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,i)=>G(e,t,i),e.brand=()=>e,e.register=(t,i)=>(t.add(e,i),e),e.parse=(t,i)=>t$(e,t,i,{callee:e.parse}),e.safeParse=(t,i)=>tZ(e,t,i),e.parseAsync=async(t,i)=>tQ(e,t,i,{callee:e.parseAsync}),e.safeParseAsync=async(t,i)=>tJ(e,t,i),e.spa=e.safeParseAsync,e.refine=(t,i)=>e.check(function(e,t={}){return new iY({type:"custom",check:"custom",fn:e,...K(t)})}(t,i)),e.superRefine=t=>e.check(function(e){let t=function(e,t){let i=new en({check:"custom",...K(void 0)});return i._zod.check=e,i}(i=>(i.addIssue=e=>{"string"==typeof e?i.issues.push(er(e,i.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=i.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),i.issues.push(er(e)))},e(i.value,i)));return t}(t)),e.overwrite=t=>e.check(tL(t)),e.optional=()=>iW(e),e.nullable=()=>iq(e),e.nullish=()=>iW(iq(e)),e.nonoptional=t=>new iQ({type:"nonoptional",innerType:e,...K(t)}),e.array=()=>iT(e),e.or=t=>iA([e,t]),e.and=t=>new ik({type:"intersection",left:e,right:t}),e.transform=t=>iG(e,new iM({type:"transform",transform:t})),e.default=t=>{var i,r;return i=e,r=t,new ij({type:"default",innerType:i,get defaultValue(){return"function"==typeof r?r():r}})},e.prefault=t=>{var i,r;return i=e,r=t,new i$({type:"prefault",innerType:i,get defaultValue(){return"function"==typeof r?r():r}})},e.catch=t=>{var i;return new iZ({type:"catch",innerType:e,catchValue:"function"==typeof(i=t)?i:()=>i})},e.pipe=t=>iG(e,t),e.readonly=()=>new iK({type:"readonly",innerType:e}),e.describe=t=>{let i=e.clone();return tE.add(i,{description:t}),i},Object.defineProperty(e,"description",{get:()=>tE.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return tE.get(e);let i=e.clone();return tE.add(i,t[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),tK=r("_ZodString",(e,t)=>{eB.init(e,t),tG.init(e,t);let i=e._zod.bag;e.format=i.format??null,e.minLength=i.minimum??null,e.maxLength=i.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new ef({check:"string_format",format:"regex",...K(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new ev({check:"string_format",format:"includes",...K(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new eb({check:"string_format",format:"starts_with",...K(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new eg({check:"string_format",format:"ends_with",...K(t),suffix:e})}(...t)),e.min=(...t)=>e.check(tR(...t)),e.max=(...t)=>e.check(tV(...t)),e.length=(...t)=>e.check(tP(...t)),e.nonempty=(...t)=>e.check(tR(1,...t)),e.lowercase=t=>e.check(new ey({check:"string_format",format:"lowercase",...K(t)})),e.uppercase=t=>e.check(new em({check:"string_format",format:"uppercase",...K(t)})),e.trim=()=>e.check(tL(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return tL(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(tL(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(tL(e=>e.toUpperCase()))}),tY=r("ZodString",(e,t)=>{eB.init(e,t),tK.init(e,t),e.email=t=>e.check(new t0({type:"string",format:"email",check:"string_format",abort:!1,...K(t)})),e.url=t=>e.check(new t4({type:"string",format:"url",check:"string_format",abort:!1,...K(t)})),e.jwt=t=>e.check(new il({type:"string",format:"jwt",check:"string_format",abort:!1,...K(t)})),e.emoji=t=>e.check(new t3({type:"string",format:"emoji",check:"string_format",abort:!1,...K(t)})),e.guid=t=>e.check(tA(t1,t)),e.uuid=t=>e.check(new t2({type:"string",format:"uuid",check:"string_format",abort:!1,...K(t)})),e.uuidv4=t=>e.check(new t2({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...K(t)})),e.uuidv6=t=>e.check(new t2({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...K(t)})),e.uuidv7=t=>e.check(new t2({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...K(t)})),e.nanoid=t=>e.check(new t8({type:"string",format:"nanoid",check:"string_format",abort:!1,...K(t)})),e.guid=t=>e.check(tA(t1,t)),e.cuid=t=>e.check(new t6({type:"string",format:"cuid",check:"string_format",abort:!1,...K(t)})),e.cuid2=t=>e.check(new t5({type:"string",format:"cuid2",check:"string_format",abort:!1,...K(t)})),e.ulid=t=>e.check(new t9({type:"string",format:"ulid",check:"string_format",abort:!1,...K(t)})),e.base64=t=>e.check(new io({type:"string",format:"base64",check:"string_format",abort:!1,...K(t)})),e.base64url=t=>e.check(new ia({type:"string",format:"base64url",check:"string_format",abort:!1,...K(t)})),e.xid=t=>e.check(new t7({type:"string",format:"xid",check:"string_format",abort:!1,...K(t)})),e.ksuid=t=>e.check(new ie({type:"string",format:"ksuid",check:"string_format",abort:!1,...K(t)})),e.ipv4=t=>e.check(new it({type:"string",format:"ipv4",check:"string_format",abort:!1,...K(t)})),e.ipv6=t=>e.check(new ii({type:"string",format:"ipv6",check:"string_format",abort:!1,...K(t)})),e.cidrv4=t=>e.check(new ir({type:"string",format:"cidrv4",check:"string_format",abort:!1,...K(t)})),e.cidrv6=t=>e.check(new is({type:"string",format:"cidrv6",check:"string_format",abort:!1,...K(t)})),e.e164=t=>e.check(new id({type:"string",format:"e164",check:"string_format",abort:!1,...K(t)})),e.datetime=t=>e.check(new tM({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...K(t)})),e.date=t=>e.check(new tU({type:"string",format:"date",check:"string_format",...K(t)})),e.time=t=>e.check(new tW({type:"string",format:"time",check:"string_format",precision:null,...K(t)})),e.duration=t=>e.check(new tz({type:"string",format:"duration",check:"string_format",...K(t)}))});function tH(e){return new tY({type:"string",...K(e)})}let tX=r("ZodStringFormat",(e,t)=>{ek.init(e,t),tK.init(e,t)}),t0=r("ZodEmail",(e,t)=>{eV.init(e,t),tX.init(e,t)}),t1=r("ZodGUID",(e,t)=>{eC.init(e,t),tX.init(e,t)}),t2=r("ZodUUID",(e,t)=>{eF.init(e,t),tX.init(e,t)}),t4=r("ZodURL",(e,t)=>{eR.init(e,t),tX.init(e,t)}),t3=r("ZodEmoji",(e,t)=>{eP.init(e,t),tX.init(e,t)}),t8=r("ZodNanoID",(e,t)=>{eL.init(e,t),tX.init(e,t)}),t6=r("ZodCUID",(e,t)=>{eM.init(e,t),tX.init(e,t)}),t5=r("ZodCUID2",(e,t)=>{eU.init(e,t),tX.init(e,t)}),t9=r("ZodULID",(e,t)=>{eW.init(e,t),tX.init(e,t)}),t7=r("ZodXID",(e,t)=>{ez.init(e,t),tX.init(e,t)}),ie=r("ZodKSUID",(e,t)=>{eq.init(e,t),tX.init(e,t)}),it=r("ZodIPv4",(e,t)=>{eJ.init(e,t),tX.init(e,t)}),ii=r("ZodIPv6",(e,t)=>{eG.init(e,t),tX.init(e,t)}),ir=r("ZodCIDRv4",(e,t)=>{eK.init(e,t),tX.init(e,t)}),is=r("ZodCIDRv6",(e,t)=>{eY.init(e,t),tX.init(e,t)}),io=r("ZodBase64",(e,t)=>{eX.init(e,t),tX.init(e,t)}),ia=r("ZodBase64URL",(e,t)=>{e0.init(e,t),tX.init(e,t)}),id=r("ZodE164",(e,t)=>{e1.init(e,t),tX.init(e,t)}),il=r("ZodJWT",(e,t)=>{e2.init(e,t),tX.init(e,t)}),iu=r("ZodNumber",(e,t)=>{e4.init(e,t),tG.init(e,t),e.gt=(t,i)=>e.check(tk(t,i)),e.gte=(t,i)=>e.check(tC(t,i)),e.min=(t,i)=>e.check(tC(t,i)),e.lt=(t,i)=>e.check(tD(t,i)),e.lte=(t,i)=>e.check(tB(t,i)),e.max=(t,i)=>e.check(tB(t,i)),e.int=t=>e.check(ip(t)),e.safe=t=>e.check(ip(t)),e.positive=t=>e.check(tk(0,t)),e.nonnegative=t=>e.check(tC(0,t)),e.negative=t=>e.check(tD(0,t)),e.nonpositive=t=>e.check(tB(0,t)),e.multipleOf=(t,i)=>e.check(tF(t,i)),e.step=(t,i)=>e.check(tF(t,i)),e.finite=()=>e;let i=e._zod.bag;e.minValue=Math.max(i.minimum??Number.NEGATIVE_INFINITY,i.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(i.maximum??Number.POSITIVE_INFINITY,i.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(i.format??"").includes("int")||Number.isSafeInteger(i.multipleOf??.5),e.isFinite=!0,e.format=i.format??null});function ic(e){return new iu({type:"number",checks:[],...K(e)})}let ih=r("ZodNumberFormat",(e,t)=>{e3.init(e,t),iu.init(e,t)});function ip(e){return new ih({type:"number",check:"number_format",abort:!1,format:"safeint",...K(e)})}let iy=r("ZodBoolean",(e,t)=>{e8.init(e,t),tG.init(e,t)});function im(e){return new iy({type:"boolean",...K(e)})}let iv=r("ZodUndefined",(e,t)=>{e6.init(e,t),tG.init(e,t)});function ib(e){return new iv({type:"undefined",...K(e)})}let ig=r("ZodAny",(e,t)=>{e5.init(e,t),tG.init(e,t)});function iw(){return new ig({type:"any"})}let iN=r("ZodUnknown",(e,t)=>{e9.init(e,t),tG.init(e,t)});function i_(){return new iN({type:"unknown"})}let iI=r("ZodNever",(e,t)=>{e7.init(e,t),tG.init(e,t)}),iS=r("ZodArray",(e,t)=>{tt.init(e,t),tG.init(e,t),e.element=t.element,e.min=(t,i)=>e.check(tR(t,i)),e.nonempty=t=>e.check(tR(1,t)),e.max=(t,i)=>e.check(tV(t,i)),e.length=(t,i)=>e.check(tP(t,i)),e.unwrap=()=>e.element});function iT(e,t){return new iS({type:"array",element:e,...K(t)})}let iO=r("ZodObject",(e,t)=>{tr.init(e,t),tG.init(e,t),M(e,"shape",()=>t.shape),e.keyof=()=>iR(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:i_()}),e.loose=()=>e.clone({...e._zod.def,catchall:i_()}),e.strict=()=>{var t;return e.clone({...e._zod.def,catchall:new iI({type:"never",...K(void 0)})})},e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>(function(e,t){if(!Q(t))throw Error("Invalid input to extend: expected a plain object");let i=W(e._zod.def,{get shape(){let i={...e._zod.def.shape,...t};return U(this,"shape",i),i},checks:[]});return G(e,i)})(e,t),e.merge=t=>(function(e,t){let i=W(e._zod.def,{get shape(){let i={...e._zod.def.shape,...t._zod.def.shape};return U(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return G(e,i)})(e,t),e.pick=t=>(function(e,t){let i=e._zod.def,r=W(e._zod.def,{get shape(){let e={};for(let r in t){if(!(r in i.shape))throw Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=i.shape[r])}return U(this,"shape",e),e},checks:[]});return G(e,r)})(e,t),e.omit=t=>(function(e,t){let i=e._zod.def,r=W(e._zod.def,{get shape(){let r={...e._zod.def.shape};for(let e in t){if(!(e in i.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return U(this,"shape",r),r},checks:[]});return G(e,r)})(e,t),e.partial=(...t)=>(function(e,t,i){let r=W(t._zod.def,{get shape(){let r=t._zod.def.shape,n={...r};if(i)for(let t in i){if(!(t in r))throw Error(`Unrecognized key: "${t}"`);i[t]&&(n[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(let t in r)n[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return U(this,"shape",n),n},checks:[]});return G(t,r)})(iU,e,t[0]),e.required=(...t)=>(function(e,t,i){let r=W(t._zod.def,{get shape(){let r=t._zod.def.shape,n={...r};if(i)for(let t in i){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);i[t]&&(n[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(let t in r)n[t]=new e({type:"nonoptional",innerType:r[t]});return U(this,"shape",n),n},checks:[]});return G(t,r)})(iQ,e,t[0])});function ix(e,t){return new iO({type:"object",get shape(){return U(this,"shape",{...e}),this.shape},...K(t)})}let iE=r("ZodUnion",(e,t)=>{ts.init(e,t),tG.init(e,t),e.options=t.options});function iA(e,t){return new iE({type:"union",options:e,...K(t)})}let iD=r("ZodDiscriminatedUnion",(e,t)=>{iE.init(e,t),to.init(e,t)});function iB(e,t,i){return new iD({type:"union",options:t,discriminator:e,...K(i)})}let ik=r("ZodIntersection",(e,t)=>{ta.init(e,t),tG.init(e,t)}),iC=r("ZodRecord",(e,t)=>{tl.init(e,t),tG.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function iF(e,t,i){return new iC({type:"record",keyType:e,valueType:t,...K(i)})}let iV=r("ZodEnum",(e,t)=>{tu.init(e,t),tG.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let i=new Set(Object.keys(t.entries));e.extract=(e,r)=>{let n={};for(let r of e)if(i.has(r))n[r]=t.entries[r];else throw Error(`Key ${r} not found in enum`);return new iV({...t,checks:[],...K(r),entries:n})},e.exclude=(e,r)=>{let n={...t.entries};for(let t of e)if(i.has(t))delete n[t];else throw Error(`Key ${t} not found in enum`);return new iV({...t,checks:[],...K(r),entries:n})}});function iR(e,t){return new iV({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...K(t)})}let iP=r("ZodLiteral",(e,t)=>{tc.init(e,t),tG.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function iL(e,t){return new iP({type:"literal",values:Array.isArray(e)?e:[e],...K(t)})}let iM=r("ZodTransform",(e,t)=>{th.init(e,t),tG.init(e,t),e._zod.parse=(i,r)=>{i.addIssue=r=>{"string"==typeof r?i.issues.push(er(r,i.value,t)):(r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=i.value),r.inst??(r.inst=e),i.issues.push(er(r)))};let n=t.transform(i.value,i);return n instanceof Promise?n.then(e=>(i.value=e,i)):(i.value=n,i)}}),iU=r("ZodOptional",(e,t)=>{tf.init(e,t),tG.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iW(e){return new iU({type:"optional",innerType:e})}let iz=r("ZodNullable",(e,t)=>{ty.init(e,t),tG.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iq(e){return new iz({type:"nullable",innerType:e})}let ij=r("ZodDefault",(e,t)=>{tm.init(e,t),tG.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),i$=r("ZodPrefault",(e,t)=>{tb.init(e,t),tG.init(e,t),e.unwrap=()=>e._zod.def.innerType}),iQ=r("ZodNonOptional",(e,t)=>{tg.init(e,t),tG.init(e,t),e.unwrap=()=>e._zod.def.innerType}),iZ=r("ZodCatch",(e,t)=>{tN.init(e,t),tG.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),iJ=r("ZodPipe",(e,t)=>{t_.init(e,t),tG.init(e,t),e.in=t.in,e.out=t.out});function iG(e,t){return new iJ({type:"pipe",in:e,out:t})}let iK=r("ZodReadonly",(e,t)=>{tS.init(e,t),tG.init(e,t),e.unwrap=()=>e._zod.def.innerType}),iY=r("ZodCustom",(e,t)=>{tO.init(e,t),tG.init(e,t)})}}]);
//# sourceMappingURL=45719.83929b15.js.map