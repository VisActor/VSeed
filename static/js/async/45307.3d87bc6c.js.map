{"version":3,"file":"static/js/async/45307.3d87bc6c.js","sources":["webpack://website/../../packages/vseed/src/builder/builder/buildAdvanced.ts","webpack://website/../../packages/vseed/src/builder/builder/buildSpec.ts","webpack://website/../../packages/vseed/src/builder/builder/build.ts","webpack://website/../../packages/vseed/src/builder/builder/advanced/colorItems.ts","webpack://website/../../packages/vseed/src/builder/builder/builder.ts","webpack://website/../../packages/vseed/src/builder/register/all.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/area.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/areaPercent.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/bar.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/barParallel.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/barPercent.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/boxplot.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/column.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/columnParallel.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/columnPercent.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/donut.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/dualAxis.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/funnel.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/heatmap.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/histogram.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/line.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/pie.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/pivotTable.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/radar.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/rose.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/roseParallel.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/scatter.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/table.ts","webpack://website/../../packages/vseed/src/builder/register/theme/custom.ts","webpack://website/../../packages/vseed/src/builder/register/theme/dark.ts","webpack://website/../../packages/vseed/src/builder/register/theme/light.ts","webpack://website/../../packages/vseed/src/dataReshape/constant.ts","webpack://website/../../packages/vseed/src/dataReshape/dataReshapeByEncoding.ts","webpack://website/../../packages/vseed/src/dataReshape/foldMeasures.ts","webpack://website/../../packages/vseed/src/dataReshape/unfoldDimensions.ts","webpack://website/../../packages/vseed/src/dataSelector/selector.ts","webpack://website/../../packages/vseed/src/i18n/i18nData.ts","webpack://website/../../packages/vseed/src/i18n/i18n.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/area.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/areaPercent.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/bar.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/barParallel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/barPercent.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithBoxplotEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithBoxplotEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/column.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/columnParallel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/columnPercent.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/donut.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/buildMeasuresForDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithDualEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithDualEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/funnel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/funnel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/heatmap.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/heatmap.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithHistogramEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithHistogramEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/line.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/pie.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/radar.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/radar.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/rose.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/roseParallel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/buildMeasuresForScatter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithScatterEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithScatterEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/common.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/sortLegend.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/sortXBand.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/sortYBand.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/annotation/annotation.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/column.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/index.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/line.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/pie.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/default/defaultDimensions.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/default/defaultMeasureId.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/default/defaultMeasures.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/dimensions/pickDimensionsForReshape.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/adapter/encodingAdapter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/bar.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/color/addColorToEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/column.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/line.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/pie.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/rose.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/init/initAdvancedVSeed.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/markStyle/markStyle.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/buildMeasures.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/pickMeasuresForReshape.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/utils.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/pivot/pivotAdapter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/regressionLine/regressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/theme/theme.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/encoding/pivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipeline/pivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/default/defaultMeasureId.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/reshape/reshapePivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/config/pivotTableConfig.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipeline/table.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/records/records.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/config/tableConfig.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/cellStyle/cellStyle.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/default/defaultDimensions.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/default/defaultMeasures.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/init/initAdvancedVSeed.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/area.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/areaPercent.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/bar.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/barParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/barParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/barPercent.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/boxWidth/boxMaxWidth.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/boxWidth/boxGapInGroup.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetBoxplot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipBoxplot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorBoxPlotStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/boxPlotStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/outlierStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/columnRegressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/column.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/columnParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/columnParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/columnPercent.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/donut.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/donut.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dual/dualChartType.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/barStyleFilter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/pointStyleFilter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/lineStyleFilter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/areaStyleFilter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yLinearPrimary.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yLinearSecondary.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPointOfDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/series/series.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/linearColorForDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/funnel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorFunnelStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/funnelStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/funnelTransformStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/funnel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/heatmapBandAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorCellStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/cellStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipHeatmap.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/heatmap.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/heatmap.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/heatmapColorLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetHistogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/histogramXLinear.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/utils/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipHistogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/histogramCrosshair.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPointOfHistogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/kdeRegressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/ecdfRegressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/line.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/line.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/pie.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/pie.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/radar.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/radarAngle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/radarRadius.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/radar.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/rose.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/rose.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/roseParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/roseParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetScatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/size/scatterSize.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelScatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipScatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/linearRegressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationArea.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationAreaBand.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationHorizontalLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPoint.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPointCommon.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationVerticalLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/splitLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/utils.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/bandAxisStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/format/linearFormat.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/linearAxisStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/radius.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/title/defaultTitleText.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/xBand.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/xLinear.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yBand.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yLinear.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/backgroundColor/background.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/barWidth/barGapInGroup.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/barWidth/barMaxWidth.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/color.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorAdapter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorAreaStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorBarStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorLineStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorPieStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorPointStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorRoseStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/linearColor.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairRect.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairRect.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetPivot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetXY.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetYX.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/progressive.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/area.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/bar.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/column.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/pivot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/label/label.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelPie.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/colorLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/discreteLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/pivotColorLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/pivotDiscreteLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/areaStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/barStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/curve/curve.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/lineStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/pieStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/pointState.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/pointStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/roseStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/percent/percent.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/dimensionLinkage.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotAdapter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotAxisStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotColumnDimensions.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotGridStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotHideIndicatorName.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotIndicators.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotRowDimensions.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotTitle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/region/addRegionPadding.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/common.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/stack/stack.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/stack/stackCornerRadius.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltip.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipElement.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/indicators/pivotIndicators.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipeline/pivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/init/pivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/columns/pivotColumns.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/rows/pivotRows.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/corner/titleOnDimension.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/rowHeaderStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/cornerHeaderStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/indicators/pivotDataConfig.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/cellStyle/pivot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/columns/dimensionsToColumns.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/columns/measuresToColumns.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipeline/table.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/init/table.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/cellStyle/table.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/cellStyle/common.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/bodyStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/frameStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/headerStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/selectionStyle.ts","webpack://website/../../packages/vseed/src/pipeline/utils/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/utils/chatType.ts","webpack://website/../../packages/vseed/src/pipeline/utils/constant.ts","webpack://website/../../packages/vseed/src/pipeline/utils/dimensions/delete.ts","webpack://website/../../packages/vseed/src/pipeline/utils/dimensions/typeGuard.ts","webpack://website/../../packages/vseed/src/pipeline/utils/format/createFormatter.ts","webpack://website/../../packages/vseed/src/pipeline/utils/format/createFormatterByMeasure.ts","webpack://website/../../packages/vseed/src/pipeline/utils/format/createNumFormatter.ts","webpack://website/../../packages/vseed/src/pipeline/utils/measures/delete.ts","webpack://website/../../packages/vseed/src/pipeline/utils/measures/depth.ts","webpack://website/../../packages/vseed/src/pipeline/utils/measures/find.ts","webpack://website/../../packages/vseed/src/pipeline/utils/measures/typeGuard.ts","webpack://website/../../packages/vseed/src/pipeline/utils/pipeline.ts","webpack://website/../../packages/vseed/src/pipeline/utils/replaceNullToUndefined.ts","webpack://website/../../packages/vseed/src/pipeline/utils/tree/traverse.ts","webpack://website/../../packages/vseed/src/pipeline/utils/valid/checkVSeed.ts","webpack://website/../../packages/vseed/src/theme/common/annotaion.ts","webpack://website/../../packages/vseed/src/theme/common/axes.ts","webpack://website/../../packages/vseed/src/theme/common/boxPlot.ts","webpack://website/../../packages/vseed/src/theme/common/color.ts","webpack://website/../../packages/vseed/src/theme/common/crosshair.ts","webpack://website/../../packages/vseed/src/theme/common/funnelTransform.ts","webpack://website/../../packages/vseed/src/theme/common/heatmapCell.ts","webpack://website/../../packages/vseed/src/theme/common/label.ts","webpack://website/../../packages/vseed/src/theme/common/legend.ts","webpack://website/../../packages/vseed/src/theme/common/regressionLine.ts","webpack://website/../../packages/vseed/src/theme/common/table.ts","webpack://website/../../packages/vseed/src/theme/common/tooltip.ts","webpack://website/../../packages/vseed/src/theme/dark/dark.ts","webpack://website/../../packages/vseed/src/theme/light/light.ts"],"sourcesContent":["import type { AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { Builder } from './builder'\nimport { intl } from 'src/i18n'\n\nexport const buildAdvanced = (builder: Builder): AdvancedVSeed | null => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n  const { chartType } = builder.vseed\n  if (!chartType) {\n    throw new Error('chartType is nil in buildAdvanced')\n  }\n\n  const pipeline = Builder.getAdvancedPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no advanced pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: AdvancedPipelineContext = {\n    vseed: builder.vseed,\n    customTheme: Builder.getThemeMap(),\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const advancedVSeed = execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context)\n    builder.advancedVSeed = advancedVSeed\n    return advancedVSeed\n  } catch (e) {\n    throw new Error(`buildAdvanced error: ${(e as Error).message}`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildAdvanced'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import type { Spec, VChartSpecPipeline } from 'src/types'\nimport { Builder } from './builder'\nimport type { AdvancedVSeed, SpecPipelineContext } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { intl } from 'src/i18n'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const buildSpec = (builder: Builder, advancedVSeed: AdvancedVSeed): Spec => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n\n  const { chartType } = builder.vseed\n\n  const pipeline = Builder.getSpecPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no spec pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: SpecPipelineContext = {\n    vseed: builder.vseed,\n    advancedVSeed,\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const spec = execPipeline<ISpec, SpecPipelineContext>(pipeline as VChartSpecPipeline, context)\n    builder.spec = spec\n    return spec\n  } catch (e) {\n    throw new Error(`buildSpec error: ${(e as Error).message}`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildSpec'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import type { Spec } from 'src/types'\nimport type { Builder } from './builder'\n\nexport const build = (builder: Builder): Spec => {\n  const advancedVSeed = builder.buildAdvanced()\n  if (!advancedVSeed) {\n    throw new Error('advancedVSeed is null')\n  }\n  const spec = builder.buildSpec(advancedVSeed)\n  return spec\n}\n","import { unique } from 'remeda'\nimport type { Builder } from '../builder'\nimport { isPivotTable, isTable } from 'src/pipeline'\n\nexport const getColorItems = (builder: Builder): { id: string; alias: string }[] => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return []\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorItems.map((d) => ({\n    id: d,\n    alias: colorIdMap[d]?.alias,\n  }))\n}\n\nexport const getColorIdMap = (builder: Builder): Record<string, { id: string; alias: string }> => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return {}\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorIdMap\n}\n","import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedVSeed,\n  ChartType,\n  CustomThemeConfig,\n  Locale,\n  Spec,\n  SpecPipe,\n  SpecPipeline,\n  VSeed,\n  VSeedBuilder,\n} from 'src/types'\nimport { buildAdvanced } from './buildAdvanced'\nimport { buildSpec } from './buildSpec'\nimport { build } from './build'\nimport { intl } from 'src/i18n'\nimport { getColorIdMap, getColorItems } from './advanced'\n\nexport class Builder implements VSeedBuilder {\n  private _vseed: VSeed\n  private _advancedVSeed: AdvancedVSeed | null = null\n  private _spec: Spec | null = null\n  private _performance: Record<string, string | number> = {}\n\n  private _locale: Locale\n\n  constructor(vseed: VSeed) {\n    this._vseed = vseed\n    this._locale = vseed.locale || intl.getLocale()\n  }\n\n  get locale() {\n    return this._locale\n  }\n\n  /**\n   * @description 构建spec\n   * @returns spec\n   */\n  build = <T extends Spec>(): T => build(this) as T\n\n  /**\n   * @description 构建spec\n   * @param advanced 高级配置\n   * @returns spec\n   */\n  buildSpec = (advanced: AdvancedVSeed): Spec => buildSpec(this, advanced)\n\n  /**\n   * @description 构建spec\n   * @returns AdvancedVSeed | null\n   */\n  buildAdvanced = (): AdvancedVSeed | null => buildAdvanced(this)\n\n  /**\n   * @description 获取颜色项, 颜色项可以重复,\n   * @returns 颜色项\n   */\n  getColorItems = () => getColorItems(this)\n\n  /**\n   * @description 获取颜色id映射\n   * @returns 颜色id映射\n   */\n  getColorIdMap = () => getColorIdMap(this)\n\n  /**\n   * @description 获取vseed\n   * @returns vseed\n   */\n  get vseed() {\n    return this._vseed\n  }\n\n  /**\n   * @description 设置vseed\n   * @param value vseed\n   */\n  set vseed(value) {\n    this._vseed = value\n  }\n\n  /**\n   * @description 获取advancedVSeed\n   * @returns advancedVSeed\n   */\n  get advancedVSeed() {\n    return this._advancedVSeed\n  }\n\n  /**\n   *\n   * @description 设置advancedVSeed\n   * @param value advancedVSeed\n   */\n  set advancedVSeed(value) {\n    this._advancedVSeed = value\n  }\n\n  /**\n   * @description 获取spec\n   * @returns spec\n   */\n  get spec() {\n    return this._spec\n  }\n\n  /**\n   * @description 设置spec\n   * @param value spec\n   */\n  set spec(value) {\n    this._spec = value\n  }\n\n  /**\n   * @description 获取performance, 统计了构建spec和advancedVSeed的时间\n   * @returns performance\n   */\n  get performance() {\n    return this._performance\n  }\n\n  /**\n   * @description 设置performance\n   * @param value performance\n   */\n  set performance(value) {\n    this._performance = value\n  }\n\n  /**\n   * @description 获取advancedPipeline\n   * @param chartType 图表类型\n   * @returns advancedPipeline\n   */\n  static getAdvancedPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customAdvancedPipe[chartType] as AdvancedPipe\n    const pipeline = Builder._advancedPipelineMap[chartType] as AdvancedPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 获取specPipeline\n   * @param chartType 图表类型\n   * @returns specPipeline\n   */\n\n  static getSpecPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customSpecPipe[chartType] as SpecPipe\n    const pipeline = Builder._specPipelineMap[chartType] as SpecPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 根据主题key获取主题配置\n   * @param themeKey 主题key\n   * @example Builder.getTheme('light'), 获取浅色主题\n   * @returns 主题配置\n   */\n  static getTheme = (themeKey?: string) => Builder._themeMap[themeKey || 'light']\n\n  /**\n   * @description 获取主题配置映射表\n   * @example Builder.getThemeMap()\n   * @returns 主题配置映射表\n   */\n  static getThemeMap = () => Builder._themeMap\n\n  /**\n   * @description 从vseed创建builder\n   * @param vseed 完整的vseed DSL\n   * @returns builder\n   */\n  static from = (vseed: VSeed) => new Builder(vseed)\n\n  static _advancedPipelineMap: Partial<Record<ChartType, AdvancedPipeline>> = {}\n  static _specPipelineMap: Partial<Record<ChartType, SpecPipeline>> = {}\n  static _customAdvancedPipe: Partial<Record<ChartType, AdvancedPipe>> = {}\n  static _customSpecPipe: Partial<Record<ChartType, SpecPipe>> = {}\n  static _themeMap: Record<string, CustomThemeConfig> = {}\n}\n","import {\n  registerArea,\n  registerAreaPercent,\n  registerBar,\n  registerBarParallel,\n  registerBarPercent,\n  registerColumn,\n  registerColumnParallel,\n  registerColumnPercent,\n  registerLine,\n  registerPie,\n  registerDonut,\n  registerRose,\n  registerRoseParallel,\n  registerFunnel,\n  registerScatter,\n  registerTable,\n  registerPivotTable,\n  registerHeatmap,\n  registerRadar,\n  registerDualAxis,\n  registerBoxPlot,\n  registerHistogram,\n} from './chartType'\nimport { registerDarkTheme, registerLightTheme } from './theme'\n\nexport const registerAll = () => {\n  // table\n  registerTable()\n  registerPivotTable()\n  // cartesian\n  registerLine()\n  registerColumn()\n  registerColumnParallel()\n  registerColumnPercent()\n  registerBar()\n  registerBarParallel()\n  registerBarPercent()\n  registerArea()\n  registerAreaPercent()\n  registerScatter()\n  registerDualAxis()\n  // polar\n  registerPie()\n  registerDonut()\n  registerRose()\n  registerRoseParallel()\n  registerRadar()\n  // other\n  registerFunnel()\n  registerHeatmap()\n  registerBoxPlot()\n  registerHistogram()\n  // theme\n  registerLightTheme()\n  registerDarkTheme()\n}\n","import { areaAdvancedPipeline, areaSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerArea = () => {\n  Builder._advancedPipelineMap['area'] = areaAdvancedPipeline\n  Builder._specPipelineMap['area'] = areaSpecPipeline\n}\n","import { areaPercentAdvancedPipeline, areaPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerAreaPercent = () => {\n  Builder._advancedPipelineMap['areaPercent'] = areaPercentAdvancedPipeline\n  Builder._specPipelineMap['areaPercent'] = areaPercentSpecPipeline\n}\n","import { barAdvancedPipeline, barSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBar = () => {\n  Builder._advancedPipelineMap['bar'] = barAdvancedPipeline\n  Builder._specPipelineMap['bar'] = barSpecPipeline\n}\n","import { barParallelAdvancedPipeline, barParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarParallel = () => {\n  Builder._advancedPipelineMap['barParallel'] = barParallelAdvancedPipeline\n  Builder._specPipelineMap['barParallel'] = barParallelSpecPipeline\n}\n","import { barPercentAdvancedPipeline, barPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarPercent = () => {\n  Builder._advancedPipelineMap['barPercent'] = barPercentAdvancedPipeline\n  Builder._specPipelineMap['barPercent'] = barPercentSpecPipeline\n}\n","import { boxplotAdvancedPipeline, boxplotSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBoxPlot = () => {\n  Builder._advancedPipelineMap['boxPlot'] = boxplotAdvancedPipeline\n  Builder._specPipelineMap['boxPlot'] = boxplotSpecPipeline\n}\n","import { columnAdvancedPipeline, columnSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumn = () => {\n  Builder._advancedPipelineMap['column'] = columnAdvancedPipeline\n  Builder._specPipelineMap['column'] = columnSpecPipeline\n}\n","import { columnParallelAdvancedPipeline, columnParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnParallel = () => {\n  Builder._advancedPipelineMap['columnParallel'] = columnParallelAdvancedPipeline\n  Builder._specPipelineMap['columnParallel'] = columnParallelSpecPipeline\n}\n","import { columnPercentAdvancedPipeline, columnPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnPercent = () => {\n  Builder._advancedPipelineMap['columnPercent'] = columnPercentAdvancedPipeline\n  Builder._specPipelineMap['columnPercent'] = columnPercentSpecPipeline\n}\n","import { donutAdvancedPipeline, donutSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDonut = () => {\n  Builder._advancedPipelineMap['donut'] = donutAdvancedPipeline\n  Builder._specPipelineMap['donut'] = donutSpecPipeline\n}\n","import { dualAxisAdvancedPipeline, dualAxisSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDualAxis = () => {\n  Builder._advancedPipelineMap['dualAxis'] = dualAxisAdvancedPipeline\n  Builder._specPipelineMap['dualAxis'] = dualAxisSpecPipeline\n}\n","import { funnelAdvancedPipeline, funnelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerFunnel = () => {\n  Builder._advancedPipelineMap['funnel'] = funnelAdvancedPipeline\n  Builder._specPipelineMap['funnel'] = funnelSpecPipeline\n}\n","import { heatmapAdvancedPipeline, heatmapSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHeatmap = () => {\n  Builder._advancedPipelineMap['heatmap'] = heatmapAdvancedPipeline\n  Builder._specPipelineMap['heatmap'] = heatmapSpecPipeline\n}\n","import { histogramSpecPipeline, histogramAdvancedPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHistogram = () => {\n  Builder._advancedPipelineMap['histogram'] = histogramAdvancedPipeline\n  Builder._specPipelineMap['histogram'] = histogramSpecPipeline\n}\n","import { lineAdvancedPipeline, lineSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerLine = () => {\n  Builder._advancedPipelineMap['line'] = lineAdvancedPipeline\n  Builder._specPipelineMap['line'] = lineSpecPipeline\n}\n","import { pieAdvancedPipeline, pieSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPie = () => {\n  Builder._advancedPipelineMap['pie'] = pieAdvancedPipeline\n  Builder._specPipelineMap['pie'] = pieSpecPipeline\n}\n","import { pivotTableAdvancedPipeline, pivotTableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPivotTable = () => {\n  Builder._advancedPipelineMap['pivotTable'] = pivotTableAdvancedPipeline\n  Builder._specPipelineMap['pivotTable'] = pivotTableSpecPipeline\n}\n","import { radarAdvancedPipeline, radarSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRadar = () => {\n  Builder._advancedPipelineMap['radar'] = radarAdvancedPipeline\n  Builder._specPipelineMap['radar'] = radarSpecPipeline\n}\n","import { roseAdvancedPipeline, roseSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRose = () => {\n  Builder._advancedPipelineMap['rose'] = roseAdvancedPipeline\n  Builder._specPipelineMap['rose'] = roseSpecPipeline\n}\n","import { roseParallelAdvancedPipeline, roseParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRoseParallel = () => {\n  Builder._advancedPipelineMap['roseParallel'] = roseParallelAdvancedPipeline\n  Builder._specPipelineMap['roseParallel'] = roseParallelSpecPipeline\n}\n","import { scatterAdvancedPipeline, scatterSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerScatter = () => {\n  Builder._advancedPipelineMap['scatter'] = scatterAdvancedPipeline\n  Builder._specPipelineMap['scatter'] = scatterSpecPipeline\n}\n","import { tableAdvancedPipeline, tableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerTable = () => {\n  Builder._advancedPipelineMap['table'] = tableAdvancedPipeline\n  Builder._specPipelineMap['table'] = tableSpecPipeline\n}\n","import type { CustomThemeConfig } from 'src/types'\nimport { Builder } from '../../builder'\nimport { darkTheme, lightTheme } from '../../../theme'\n\nexport const registerCustomTheme = (\n  key: string,\n  themeConfig:\n    | CustomThemeConfig\n    | ((props: { lightTheme: CustomThemeConfig; darkTheme: CustomThemeConfig }) => CustomThemeConfig),\n) => {\n  const customTheme =\n    typeof themeConfig === 'function' ? themeConfig({ lightTheme: lightTheme(), darkTheme: darkTheme() }) : themeConfig\n  Builder._themeMap[key] = customTheme\n}\n","import { darkTheme } from '../../../theme'\nimport { registerCustomTheme } from './custom'\n\nexport const registerDarkTheme = () => {\n  registerCustomTheme('dark', darkTheme())\n}\n","import { registerCustomTheme } from './custom'\nimport { lightTheme } from '../../../theme'\n\nexport const registerLightTheme = () => {\n  registerCustomTheme('light', lightTheme())\n}\n","// Reshape\nexport const ORIGINAL_DATA = '__OriginalData__'\nexport const Separator = '-'\n\n// Measures\nexport const FoldMeasureName = '__MeaName__'\nexport const FoldMeasureId = '__MeaId__'\nexport const FoldMeasureValue = '__MeaValue__'\nexport const MeasureId = FoldMeasureId\nexport const MeasureName = FoldMeasureName\n\n// Measures For DualAxis\nexport const FoldPrimaryMeasureValue = '__MeaPrimaryValue__'\nexport const FoldSecondaryMeasureValue = '__MeaSecondaryValue__'\n\n// Measures For Scatter\nexport const FoldXMeasureValue = '__MeaXValue__'\nexport const FoldYMeasureValue = '__MeaYValue__'\nexport const FoldXMeasureId = '__MeaXId__'\nexport const FoldYMeasureId = '__MeaYId__'\n// Encoding\nexport const XEncoding = '__Dim_X__'\nexport const YEncoding = '__Dim_Y__'\nexport const AngleEncoding = '__Dim_Angle__'\nexport const DetailEncoding = '__Dim_Detail__'\nexport const ColorEncoding = '__Dim_Color__'\nexport const ColorIdEncoding = '__Dim_ColorId__'\n\n// Measures For boxPlot\nexport const BoxPlotPivotIndicator = '__BoxPlot_Pivot_Indicator__'\nexport const Q1MeasureValue = '__Q1__'\nexport const Q3MeasureValue = '__Q3__'\nexport const LowerWhisker = '__Lower_Whisker__'\nexport const UpperWhisker = '__Upper_Whisker__'\nexport const OutliersMeasureId = '__Outliers__'\nexport const MedianMeasureId = '__Meadian__'\n\n// Measures For Histogram\nexport const BinStartMeasureId = '__BinStart__'\nexport const BinEndMeasureId = '__BinEnd__'\nexport const BinCountMeasureId = '__BinCount__'\nexport const BinPercentageMeasureId = '__BinPercentage__'\n","import type { Dataset, Dimension, Encoding, FoldInfo, Measure, Measures, UnfoldInfo } from 'src/types'\nimport { foldMeasures } from './foldMeasures'\nimport { FoldMeasureId, FoldMeasureName, FoldMeasureValue, Separator } from './constant'\nimport { unfoldDimensions } from './unfoldDimensions'\n\nexport const dataReshapeByEncoding = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  measures: Measure[],\n  encoding: Encoding,\n  options?: {\n    foldMeasureId?: string\n    foldMeasureName?: string\n    foldMeasureValue?: string\n    colorItemAsId?: boolean\n    colorMeasureId?: string\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n  unfoldInfo: UnfoldInfo\n} => {\n  const {\n    foldMeasureId = FoldMeasureId,\n    foldMeasureName = FoldMeasureName,\n    foldMeasureValue = FoldMeasureValue,\n    colorItemAsId = false,\n    colorMeasureId,\n    omitIds,\n  } = options || {}\n\n  // 合并所有指标为1个指标\n  const { dataset: foldedDataset, foldInfo } = foldMeasures(dataset, measures as Measures, {\n    measureId: foldMeasureId,\n    measureName: foldMeasureName,\n    measureValue: foldMeasureValue,\n    colorMeasureId,\n    omitIds,\n  })\n\n  // 展开指定的维度为指标\n  const { dataset: finalDataset, unfoldInfo } = unfoldDimensions(foldedDataset, dimensions, encoding, {\n    foldMeasureId,\n    separator: Separator,\n    colorItemAsId,\n  })\n  return { dataset: finalDataset, foldInfo, unfoldInfo }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { Dataset, FoldInfo, Measures } from 'src/types'\nimport { ColorEncoding, ColorIdEncoding, ORIGINAL_DATA } from './constant'\nimport { omit } from 'remeda'\n\n/**\n * 折叠指定的指标\n * @description 合并指定的指标为1个, 无论多少个, 都能转换为1个, 取名为fold, 意为折叠后混合在一起.\n */\nexport const foldMeasures = (\n  dataset: Dataset,\n  measures: Measures,\n  options: {\n    measureId: string\n    measureName: string\n    measureValue: string\n    colorMeasureId?: string\n    allowEmptyFold?: boolean\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n} => {\n  const { measureId, measureName, measureValue, colorMeasureId, allowEmptyFold = true, omitIds = [] } = options || {}\n\n  const foldInfo: FoldInfo = {\n    measureId,\n    measureName,\n    measureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n    foldMap: {},\n  }\n\n  if (!allowEmptyFold && measures.length === 0) {\n    return {\n      dataset,\n      foldInfo,\n    }\n  }\n\n  const result: Dataset = new Array(dataset.length * measures.length) as Dataset\n  let index = 0\n  const ids = measures.map((d) => d.id)\n  for (let i = 0; i < dataset.length; i++) {\n    for (let j = 0; j < measures.length; j++) {\n      const datum: Record<string, any> = omit({ ...dataset[i] }, [...ids, ...omitIds])\n\n      datum[ORIGINAL_DATA] = dataset[i]\n\n      const measure = measures[j]\n      const { id, alias } = measure\n\n      datum[id] = dataset[i][id] as unknown\n      datum[measureId] = id\n      datum[measureName] = alias || id\n      datum[measureValue] = dataset[i][id] as unknown\n\n      if (colorMeasureId) {\n        const value = (datum[ORIGINAL_DATA] as Record<string, string | number>)[colorMeasureId]\n        datum[ColorEncoding] = value\n        datum[ColorIdEncoding] = colorMeasureId\n\n        const valueNumber = Number(value)\n        foldInfo.statistics.colorMin = Math.min(foldInfo.statistics.colorMin, valueNumber)\n        foldInfo.statistics.colorMax = Math.max(foldInfo.statistics.colorMax, valueNumber)\n      }\n\n      const valueNumber = Number(datum[id])\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n\n      foldInfo.foldMap[id] = alias\n      result[index++] = datum\n    }\n  }\n\n  return {\n    dataset: result,\n    foldInfo,\n  }\n}\n","import type { Dataset, Datum, Dimension, Encoding, UnfoldInfo } from 'src/types'\nimport {\n  AngleEncoding,\n  XEncoding,\n  YEncoding,\n  ColorEncoding,\n  DetailEncoding,\n  ColorIdEncoding,\n  MeasureId,\n  MeasureName,\n} from './constant'\n\n/**\n * @description 展开并合并视觉通道的维度, 在foldMeasures后合并维度, 所以不需要进行笛卡尔积\n * @param dataset 原始数据集\n * @param dimensions 维度\n * @param encoding 编码\n * @param options\n * @returns\n */\nexport const unfoldDimensions = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  encoding: Encoding,\n  options: {\n    foldMeasureId: string\n    separator: string\n    colorItemAsId: boolean\n  },\n): {\n  dataset: Dataset\n  unfoldInfo: UnfoldInfo\n} => {\n  const { separator } = options\n\n  const unfoldInfo: UnfoldInfo = {\n    encodingAngle: AngleEncoding,\n    encodingX: XEncoding,\n    encodingY: YEncoding,\n    encodingDetail: DetailEncoding,\n    encodingColor: ColorEncoding,\n    encodingColorId: ColorIdEncoding,\n\n    colorItems: [],\n    colorIdMap: {},\n  }\n\n  // 每个通道对应的维度\n  const { color, x, y, detail, angle } = encoding\n  const angleDimensions = angle ? dimensions.filter((dim) => angle.includes(dim.id)) : []\n  const xDimensions = x ? dimensions.filter((dim) => x.includes(dim.id)) : []\n  const yDimensions = y ? dimensions.filter((dim) => y.includes(dim.id)) : []\n  const colorDimensions = color ? dimensions.filter((dim) => color.includes(dim.id)) : []\n  const detailDimensions = detail ? dimensions.filter((dim) => detail.includes(dim.id)) : []\n\n  // 离散图例项\n  const colorItems = new Set<string>()\n  const colorIdMap: Record<string, { id: string; alias: string }> = {}\n\n  // 遍历数据集, 按通道合并维度\n  for (let i = 0; i < dataset.length; i++) {\n    // 应用编码至Datum上\n    const datum = dataset[i]\n\n    /**\n     * !important 这是全仓库, 最最最重要的五行代码, 贯穿VSeed整个生命周期, 是化繁为简的绝对核心\n     * 1. 点睛之笔: 呼应foldMeasures, 此时此刻的datum一定是单点数据, 维度合并不可能造成任何冲突.\n     * 2. 数据即通道\n     * 3. 利用需要合并的维度, 直接进行join, 即可生成新的维度, 与指标彻底解耦;\n     * 4. 以下通道均在一次遍历中完成, 不存在性能问题\n     * 5. 以下通道均可放入多个维度\n     */\n    applyEncoding(AngleEncoding, angleDimensions, datum, separator)\n    applyEncoding(XEncoding, xDimensions, datum, separator)\n    applyEncoding(YEncoding, yDimensions, datum, separator)\n    applyEncoding(ColorEncoding, colorDimensions, datum, separator)\n    applyEncoding(DetailEncoding, detailDimensions, datum, separator)\n\n    // 处理离散的颜色图例\n    if (!colorDimensions.length || !datum[ColorEncoding]) {\n      // 无颜色通道, 则跳过\n      continue\n    }\n    const colorId = String(datum[ColorEncoding] ?? '')\n\n    datum[ColorIdEncoding] = colorId\n\n    colorIdMap[colorId] = {\n      id: colorId,\n      alias: getColorAliasItem(ColorEncoding, colorDimensions, datum, separator),\n    }\n    colorItems.add(colorId)\n  }\n\n  unfoldInfo.colorItems = Array.from(colorItems)\n  unfoldInfo.colorIdMap = colorIdMap\n\n  return {\n    dataset,\n    unfoldInfo,\n  }\n}\n\n/**\n * @description 应用编码至数据中, 此方法会原地修改数据\n * @param encoding 编码\n * @param dimensions 维度\n * @param datum 数据\n * @param separator 分隔符\n * @returns undefined\n */\nconst applyEncoding = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    datum[encoding] = dimensions.map((dim) => String(datum[dim.id])).join(separator)\n  }\n}\n\nconst getColorAliasItem = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    return dimensions\n      .map((dim) => {\n        if (dim.id === MeasureId) {\n          return String(datum[MeasureName])\n        }\n\n        return String(datum[dim.id])\n      })\n      .join(separator)\n  }\n  return ''\n}\n","import type { Datum } from 'src/types'\nimport type {\n  DimensionSelector,\n  MeasureSelector,\n  PartialDatumSelector,\n  Selector,\n  Selectors,\n  ValueSelector,\n} from '../types/dataSelector'\nimport { omit } from 'remeda'\n\n/**\n * 判断两个数字是否“近似相等”\n */\nfunction nearlyEqual(a: number, b: number, epsilon = 1e-8) {\n  // NaN 直接不相等\n  if (Number.isNaN(a) || Number.isNaN(b)) return false\n  // 引用同一个数 或 完全相等\n  if (a === b) return true\n  const diff = Math.abs(a - b)\n  return diff <= epsilon\n}\n\nexport const selector = (\n  vchartDatum: Datum,\n  selector: Selector | Selectors | undefined | null,\n  selectorMode: 'And' | 'Or' = 'And',\n) => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return true\n  }\n\n  // 过滤掉 vchart 相关字段\n  const vchartKeys = Object.keys(vchartDatum).filter((k) => k.toLocaleLowerCase().startsWith('__vchart'))\n  const datum = omit(vchartDatum, vchartKeys) as Datum\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n\n  return selectors[selectorMode === 'And' ? 'every' : 'some']((selector) => {\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      return selectByValue(selector, datum)\n    }\n\n    // 2. 指标选择器\n    else if (isMeasureSelector(selector)) {\n      return selectByMeasure(selector, datum)\n    }\n    // 3. 维度选择器\n    else if (isDimensionSelector(selector)) {\n      return selectByDmension(selector, datum)\n    }\n    // 4. 部分数据对象选择器\n    else if (isPartialDatumSelector(selector)) {\n      return selectByPartial(selector, datum)\n    }\n\n    return false\n  })\n}\n\nexport const selectorDatum = (datum: Datum, selector: Selector | Selectors | undefined | null): Datum[] => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return []\n  }\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n  let finalResult: Datum[] = []\n\n  for (const selector of selectors) {\n    const results: Datum[] = []\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      Object.entries(datum).forEach(([key, value]) => {\n        if (value === selector) {\n          results.push({ [key]: value } as Datum)\n        }\n      })\n    } else if (isMeasureSelector(selector) && selectByMeasure(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isDimensionSelector(selector) && selectByDmension(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isPartialDatumSelector(selector) && selectByPartial(selector, datum)) {\n      results.push(selector)\n    }\n\n    if (results.length) {\n      if (finalResult.length) {\n        finalResult = finalResult.flatMap((prev) => {\n          return results.map((r) => {\n            return {\n              ...prev,\n              ...r,\n            }\n          })\n        })\n      } else {\n        finalResult = results\n      }\n    } else {\n      finalResult = []\n      break\n    }\n  }\n\n  return finalResult\n}\n\nexport const isValueSelector = (selector: Selector): selector is ValueSelector => {\n  return typeof selector === 'string' || typeof selector === 'number'\n}\n\nexport const isPartialDatumSelector = (selector: Selector): selector is PartialDatumSelector => {\n  return typeof selector === 'object' && selector !== null\n}\n\nexport const isMeasureSelector = (selector: Selector): selector is MeasureSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.operator as string) ||\n      ['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.op as string))\n  )\n}\n\nexport const isDimensionSelector = (selector: Selector): selector is DimensionSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['in', 'not in'].includes(selector.operator as string) || ['in', 'not in'].includes(selector.op as string))\n  )\n}\n\nexport const selectByMeasure = (selector: MeasureSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n\n  switch (op) {\n    case '=':\n      if (\n        String(datum[selector.field]) === String(selectorValueArr[0]) ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '==':\n      if (datum[selector.field] === selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '!=':\n      if (datum[selector.field] !== selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '>':\n      if (\n        datum[selector.field] > selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<':\n      if (\n        datum[selector.field] < selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '>=':\n      if (\n        datum[selector.field] >= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<=':\n      if (\n        datum[selector.field] <= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case 'between':\n      if (\n        Array.isArray(selector.value) &&\n        (datum[selector.field] >= selectorValueArr[0] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))) &&\n        (datum[selector.field] <= selectorValueArr[1] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[1])))\n      ) {\n        return true\n      }\n      break\n  }\n  return false\n}\n\nexport const selectByDmension = (selector: DimensionSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n  switch (op) {\n    case 'in':\n      if (selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n    case 'not in':\n      if (!selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n  }\n\n  return false\n}\n\nexport const selectByPartial = (selector: PartialDatumSelector, datum: Datum) => {\n  return Object.keys(selector).every((key) => datum[key] === selector[key])\n}\n\nexport const selectByValue = (selector: ValueSelector, datum: Datum) => {\n  return Object.values(datum).some((v) => v === selector)\n}\n","import type { TranslateRecordType } from '../types'\n\nexport const translateMap: TranslateRecordType = {\n  指标名称: {\n    'en-US': 'MeasureName',\n    'zh-CN': '指标名称',\n  },\n  指标Id: {\n    'en-US': 'MeasureId',\n    'zh-CN': '指标Id',\n  },\n  指标值: {\n    'en-US': 'MeasureValue',\n    'zh-CN': '指标值',\n  },\n  异常点: {\n    'en-US': 'Outlier',\n    'zh-CN': '异常点',\n  },\n  上边界: {\n    'en-US': 'Upper Whisker',\n    'zh-CN': '上边界',\n  },\n  上四分位数: {\n    'en-US': 'Q3',\n    'zh-CN': '75分位数',\n  },\n  中位数: {\n    'en-US': 'Q2',\n    'zh-CN': '中位数',\n  },\n  下四分位数: {\n    'en-US': 'Q1',\n    'zh-CN': '25分位数',\n  },\n  下边界: {\n    'en-US': 'Lower Whisker',\n    'zh-CN': '下边界',\n  },\n}\n","import { isNullish } from 'remeda'\nimport { translateMap } from './i18nData'\nimport type { Locale, TranslateRecordType } from '../types'\n\nclass Intl {\n  private static instance: Intl\n\n  private translateMap: TranslateRecordType = translateMap\n  private locale: Locale = 'zh-CN'\n\n  canTranslate = (value: string) => !!this.translateMap[value]\n\n  /**\n   * @example i18n`指标名称`\n   */\n  i18n = (segments: TemplateStringsArray, ...values: Array<number | string>) => {\n    const text = segments.map((segment, index) => segment + (values[index] || '')).join('')\n    const translatedText = this.translateMap?.[text]?.[this.locale]\n    if (isNullish(translatedText)) {\n      return text\n    }\n    return translatedText\n  }\n\n  setLocale = (locale: Locale): void => {\n    this.locale = locale\n  }\n\n  getLocale: () => Locale = () => this.locale\n\n  public static getInstance() {\n    if (!Intl.instance) {\n      Intl.instance = new Intl()\n    }\n\n    return Intl.instance\n  }\n}\n\nconst intl = Intl.getInstance()\n\nexport { intl }\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  encodingForLine,\n  defaultMeasures,\n  defaultMeasureId,\n  defaultDimensions,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const areaAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForLine],\n    [buildMeasures, encodingForLine, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaPercentConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  encodingForLine,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const areaPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForLine],\n    [buildMeasures, encodingForLine, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  buildMeasures,\n  pivotAdapter,\n  barConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForBar],\n    [buildMeasures, encodingForBar, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barParallelConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForBar],\n    [buildMeasures, encodingForBar, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barPercentConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForBar],\n    [buildMeasures, encodingForBar, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  if ((!encoding.value || encoding.value.length <= 1) && encoding.color && encoding.color.length > 1) {\n    encoding.color = encoding.color.filter((c) => c !== MeasureId)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.q1 = unique(measures.filter((item) => item.encoding === 'q1').map((item) => item.id))\n  encoding.median = unique(measures.filter((item) => item.encoding === 'median').map((item) => item.id))\n  encoding.q3 = unique(measures.filter((item) => item.encoding === 'q3').map((item) => item.id))\n  encoding.min = unique(measures.filter((item) => item.encoding === 'min').map((item) => item.id))\n  encoding.max = unique(measures.filter((item) => item.encoding === 'max').map((item) => item.id))\n  encoding.outliers = unique(measures.filter((item) => item.encoding === 'outliers').map((item) => item.id))\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithBoxplotEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  defaultEncodingForBoxplot,\n  encodingForBoxplot,\n  reshapeWithBoxplotEncoding,\n  boxplotConfig,\n} from '../pipes'\n\nexport const boxplotAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  boxplotConfig,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForBoxplot],\n    [\n      buildMeasures,\n      encodingForBoxplot,\n      pickMeasuresForReshape(['tooltip', 'label', 'color']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithBoxplotEncoding], [pivotReshapeWithBoxplotEncoding]),\n\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const boxplotConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'whiskers',\n    'boxMaxWidth',\n    'boxGapInGroup',\n\n    'dimensionLinkage',\n  ]) as Config['boxPlot']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, ColumnParallel, Dataset, Encoding } from 'src/types'\nimport { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\n\nexport const reshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item) => item.id)\n\n  const whiskers = config?.[chartType as 'boxPlot']?.whiskers\n\n  let newDatasets: any[] = []\n  let foldInfo: any = {}\n  let unfoldInfo: any = {}\n\n  const allMeasures = findAllMeasures(measures)\n\n  if (encoding.value?.length) {\n    const boxPlotDataList: Dataset = []\n    encoding.value.forEach((f) => {\n      const m = allMeasures.find((m) => m.id === f)\n      const boxPlotData = boxplot(dataset, {\n        field: f,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        whiskers,\n        outputNames: {\n          q1: Q1MeasureValue,\n          q3: Q3MeasureValue,\n          lowerWhisker: LowerWhisker,\n          upperWhisker: UpperWhisker,\n          median: MedianMeasureId,\n          outliers: OutliersMeasureId,\n        },\n      }) as Dataset\n\n      boxPlotData.forEach((datum) => {\n        datum[FoldMeasureId] = f\n        datum[FoldMeasureName] = m?.alias ?? f\n      })\n      boxPlotDataList.push(...boxPlotData)\n    })\n    const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (\n    encoding.q1?.length &&\n    encoding.q3?.length &&\n    encoding.min?.length &&\n    encoding.max?.length &&\n    encoding.median?.length\n  ) {\n    const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((datum) => {\n      datum[UpperWhisker] = datum[encoding.max![0]]\n      datum[LowerWhisker] = datum[encoding.min![0]]\n      datum[Q1MeasureValue] = datum[encoding.q1![0]]\n      datum[Q3MeasureValue] = datum[encoding.q3![0]]\n      datum[MedianMeasureId] = datum[encoding.median![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = {}\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n    dimensions,\n    measures,\n  }\n}\n","import { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport { revisedBoxPlotFieldKey } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Dimension,\n  Encoding,\n  MeasureGroup,\n} from 'src/types'\n\nexport const pivotReshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'boxPlot']\n  const whiskers = chartConfig?.whiskers\n\n  const measureGroups: MeasureGroup[] = []\n  if (measures) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children && measure.children.length > 0) {\n        measureGroups.push(measure)\n      }\n    })\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measureGroup, index) => {\n    const subMeasures = measureGroup.children\n    if (!subMeasures) {\n      return\n    }\n    const groupId = measureGroup.id\n    let newDatasets: any[] = []\n    let foldInfo: any = {}\n    let unfoldInfo: any = {}\n    const validEncodingIds = (encoding.value || []).filter((id) => subMeasures.find((field) => field.id === id))\n\n    if (validEncodingIds.length) {\n      const boxPlotDataList: Dataset = []\n      validEncodingIds.forEach((f) => {\n        const m = subMeasures.find((m) => m.id === f)\n        const boxPlotData = boxplot(dataset, {\n          field: f,\n          groupField: [\n            ...(encoding.x ?? []),\n            ...(encoding.color ?? []),\n            ...rowColumnFields.map((item: Dimension) => item.id),\n          ] as string[],\n          whiskers,\n          outputNames: {\n            q1: Q1MeasureValue,\n            q3: Q3MeasureValue,\n            lowerWhisker: LowerWhisker,\n            upperWhisker: UpperWhisker,\n            median: MedianMeasureId,\n            outliers: OutliersMeasureId,\n          },\n        }) as Dataset\n\n        boxPlotData.forEach((datum) => {\n          datum[FoldMeasureId] = f\n          datum[FoldMeasureName] = m?.alias ?? f\n          datum[revisedBoxPlotFieldKey(Q1MeasureValue, groupId)] = datum[Q1MeasureValue]\n          datum[revisedBoxPlotFieldKey(Q3MeasureValue, groupId)] = datum[Q3MeasureValue]\n          datum[revisedBoxPlotFieldKey(LowerWhisker, groupId)] = datum[LowerWhisker]\n          datum[revisedBoxPlotFieldKey(UpperWhisker, groupId)] = datum[UpperWhisker]\n          datum[revisedBoxPlotFieldKey(MedianMeasureId, groupId)] = datum[MedianMeasureId]\n          datum[revisedBoxPlotFieldKey(OutliersMeasureId, groupId)] = datum[OutliersMeasureId]\n        })\n\n        boxPlotDataList.push(...boxPlotData)\n      })\n      const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (\n      encoding.q1?.length &&\n      encoding.q3?.length &&\n      encoding.min?.length &&\n      encoding.max?.length &&\n      encoding.median?.length\n    ) {\n      const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((datum) => {\n        datum[UpperWhisker] = datum[encoding.max![0]]\n        datum[revisedBoxPlotFieldKey(Q1MeasureValue, groupId)] = datum[encoding.max![0]]\n        datum[LowerWhisker] = datum[encoding.min![0]]\n        datum[revisedBoxPlotFieldKey(LowerWhisker, groupId)] = datum[encoding.min![0]]\n        datum[Q1MeasureValue] = datum[encoding.q1![0]]\n        datum[revisedBoxPlotFieldKey(Q1MeasureValue, groupId)] = datum[encoding.q1![0]]\n        datum[Q3MeasureValue] = datum[encoding.q3![0]]\n        datum[revisedBoxPlotFieldKey(Q3MeasureValue, groupId)] = datum[encoding.q3![0]]\n        datum[MedianMeasureId] = datum[encoding.median![0]]\n        datum[revisedBoxPlotFieldKey(MedianMeasureId, groupId)] = datum[encoding.median![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = {}\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  regressionLine,\n} from '../pipes'\n\nexport const columnAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForColumn],\n    [buildMeasures, encodingForColumn, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  columnParallelConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const columnParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForColumn],\n    [buildMeasures, encodingForColumn, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnPercentConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const columnPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForColumn],\n    [buildMeasures, encodingForColumn, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  donutConfig,\n  encodingForPie,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const donutAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForPie],\n    [buildMeasures, encodingForPie, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  donutConfig,\n  theme,\n  annotation,\n]\n","import type { AdvancedPipe, DualAxis, DualMeasures, MeasureGroup, Measures, MeasureTree } from 'src/types'\nimport { isMeasureTreeWithParentId, isMeasureTreeWithChildren } from './utils'\nimport { clone } from 'remeda'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\n\nexport const buildMeasuresForDualAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context as {\n    vseed: DualAxis\n  }\n\n  // 带Children的指标树, 不进行任何处理\n  if (isMeasureTreeWithChildren(advancedVSeed.measures)) {\n    return advancedVSeed\n  }\n  // 带parentId的指标树, 转换为带children的指标树\n  if (isMeasureTreeWithParentId(advancedVSeed.measures)) {\n    advancedVSeed.measures = generateMeasuresByParentId(advancedVSeed.measures as Measures)\n    return advancedVSeed\n  }\n\n  if (vseed.dualMeasures) {\n    advancedVSeed.measures = dualMeasuresToMeasureTree(clone(vseed.dualMeasures))\n\n    return advancedVSeed\n  }\n\n  const { dualMeasures, encodedMeasures } = basicMeasuresToDualMeasures(advancedVSeed.measures || [])\n  advancedVSeed.measures = dualMeasuresToMeasureTree(dualMeasures)\n\n  if (encodedMeasures.length) {\n    encodedMeasures.forEach((m) => {\n      advancedVSeed.measures!.push(m)\n    })\n  }\n\n  return advancedVSeed\n}\n\nconst basicMeasuresToDualMeasures = (basicMeasures: Measures) => {\n  const primaryMeasures: Measures = []\n  const secondaryMeasures: Measures = []\n  const encodedMeasures: Measures = []\n\n  for (let index = 0; index < basicMeasures.length; index++) {\n    const item = basicMeasures[index]\n    const encoding = item.encoding\n    const isPrimaryYAxis = encoding === 'primaryYAxis'\n    const isSecondaryYAxis = encoding === 'secondaryYAxis'\n    const isOtherEncoding = item.encoding && ['color', 'label', 'tooltip', 'detail'].includes(item.encoding)\n\n    if (isPrimaryYAxis) {\n      primaryMeasures.push(item)\n    } else if (isSecondaryYAxis) {\n      secondaryMeasures.push(item)\n    } else if (!isOtherEncoding) {\n      if (index === 0) {\n        primaryMeasures.push(item)\n      } else {\n        secondaryMeasures.push(item)\n      }\n    } else {\n      encodedMeasures.push(item)\n    }\n  }\n\n  return {\n    dualMeasures: [{ id: 'dualMeasures', primaryMeasures, secondaryMeasures }],\n    encodedMeasures,\n  }\n}\n\nconst dualMeasuresToMeasureTree = (dualMeasures: DualMeasures): MeasureTree => {\n  const measureTree = dualMeasures.map((item, index): MeasureGroup => {\n    const { id, primaryMeasures, secondaryMeasures } = item\n    const groupChildren: MeasureGroup[] = []\n\n    let groupId: string = `${id}-`\n    if (primaryMeasures) {\n      const arrPrimaryMeasures = Array.isArray(primaryMeasures) ? primaryMeasures : [primaryMeasures]\n      const alias = arrPrimaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-primary`,\n        alias: arrPrimaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrPrimaryMeasures,\n      })\n    }\n    if (secondaryMeasures) {\n      const arrSecondaryMeasures = Array.isArray(secondaryMeasures) ? secondaryMeasures : [secondaryMeasures]\n      const alias = arrSecondaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-secondary`,\n        alias: arrSecondaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrSecondaryMeasures,\n      })\n    }\n\n    return {\n      id: groupId,\n      alias: groupId,\n      children: groupChildren,\n    }\n  })\n\n  // 只有1个双轴图, 仅返回2层, vchart 绘制双轴图\n  if (dualMeasures.length === 1) {\n    return measureTree[0].children || []\n  }\n\n  // 有多个双轴图, 返回3层, pivot chart 绘制组合双轴图\n  return measureTree\n}\n\nconst generateMeasuresByParentId = (measures: Measures) => {\n  const dualMeasures: DualMeasures = []\n  const encodedMeasures: Measures = []\n\n  measures.forEach((item) => {\n    const id = item.parentId || DEFAULT_PARENT_ID\n    if (!dualMeasures.find((d) => d.id === id)) {\n      dualMeasures.push({\n        id,\n        primaryMeasures: [],\n        secondaryMeasures: [],\n      })\n    }\n\n    const dualChart = dualMeasures.find((d) => d.id === id)\n    if (!dualChart || !Array.isArray(dualChart.primaryMeasures) || !Array.isArray(dualChart.secondaryMeasures)) {\n      return\n    }\n\n    const encoding = item.encoding\n    const isPrimaryYAxis = encoding === 'primaryYAxis'\n    const isSecondaryYAxis = encoding === 'secondaryYAxis'\n    const isOtherEncoding = item.encoding && ['color', 'label', 'tooltip', 'detail'].includes(item.encoding)\n\n    if (isPrimaryYAxis) {\n      dualChart.primaryMeasures.push(item)\n    } else if (isSecondaryYAxis) {\n      dualChart.secondaryMeasures.push(item)\n    } else if (!isOtherEncoding) {\n      if (dualChart.primaryMeasures.length === 0) {\n        dualChart.primaryMeasures.push(item)\n      } else {\n        dualChart.secondaryMeasures.push(item)\n      }\n    } else {\n      encodedMeasures.push(item)\n    }\n  })\n\n  const res = dualMeasuresToMeasureTree(dualMeasures)\n\n  if (encodedMeasures.length) {\n    encodedMeasures.forEach((m) => {\n      res.push(m)\n    })\n  }\n\n  return res\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, measureDepth } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  Dimension,\n  Dimensions,\n  Encoding,\n  Measure,\n  MeasureGroup,\n  Measures,\n  MeasureTree,\n} from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nconst checkSingleViewMultiMeasures = (measures: MeasureTree = []): boolean => {\n  return measures.length <= 1 && ((measures[0] as MeasureGroup).children ?? []).length <= 1\n}\n\nconst hasMultipleMeasureInSingleView = (measures: MeasureTree = []): boolean => {\n  const depth = measureDepth(measures)\n\n  if (depth >= 3) {\n    return measures.some(\n      (m) => m && (m as MeasureGroup).children && !checkSingleViewMultiMeasures((m as MeasureGroup).children),\n    )\n  }\n\n  if (depth === 2) {\n    return !checkSingleViewMultiMeasures(measures)\n  }\n\n  if (depth === 1) {\n    return measures.length >= 1\n  }\n\n  return false\n}\n\nexport const defaultEncodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  encodingForDualAxis,\n  reshapeWithDualEncoding,\n  pivotReshapeWithDualEncoding,\n  buildMeasuresForDualAxis,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForDualAxis,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const dualAxisAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasuresForDualAxis, defaultEncodingForDualAxis],\n    [\n      buildMeasuresForDualAxis,\n      encodingForDualAxis,\n      pickMeasuresForReshape(['tooltip', 'label', 'color']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithDualEncoding], [pivotReshapeWithDualEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Encoding,\n  FoldInfo,\n  Measure,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = (advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []).filter(\n    (m: Measure | MeasureGroup) => m && (m as MeasureGroup).children,\n  )\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  if (measures.length > 2) {\n    throw new Error('measures can not be more than 2 groups in dualAxis')\n  }\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n\n  const datasets: Dataset[] = []\n  const primaryMeasures = measures[0] as MeasureGroup\n  const secondaryMeasures = (measures[1] || []) as MeasureGroup\n\n  if (primaryMeasures && primaryMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item) => item.id),\n      uniqueBy(primaryMeasures.children, (item) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldPrimaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets.push(newDataset)\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  if (secondaryMeasures && secondaryMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item) => item.id),\n      uniqueBy(secondaryMeasures.children, (item) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldSecondaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets.push(newDataset)\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures, measureDepth } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  FoldInfo,\n  Measure,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const allMeasures = findAllMeasures(measures)\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  const measureGroups: Array<MeasureGroup[]> = []\n\n  const depth = measureDepth(measures)\n  if (depth === 3) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children) {\n        measureGroups.push(measure.children as unknown as MeasureGroup[])\n      }\n    })\n  } else if (depth === 2) {\n    measureGroups.push(\n      measures.filter((m: Measure | MeasureGroup) => m && (m as MeasureGroup).children) as unknown as MeasureGroup[],\n    )\n  }\n\n  measureGroups.forEach((measures: MeasureGroup[], index) => {\n    if (measures.length > 2) {\n      throw new Error('measures can not be more than 2 groups in dualAxis')\n    }\n\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const primaryMeasures = measures[0]\n    const secondaryMeasures = measures[1] || []\n\n    if (primaryMeasures && primaryMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item) => item.id),\n        uniqueBy(primaryMeasures.children, (item) => item.id),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldPrimaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasures.map((item) => item.id),\n        },\n      )\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    if (secondaryMeasures && secondaryMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item) => item.id),\n        uniqueBy(secondaryMeasures.children, (item) => item.id),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldSecondaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasures.map((item) => item.id),\n        },\n      )\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(datasets.flat(2))\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const dualAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    // common\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n\n    // only for dualAxis\n    'dualChartType',\n    'alignTicks',\n    'primaryYAxis',\n    'secondaryYAxis',\n    'crosshairLine',\n    'crosshairRect',\n\n    'barGapInGroup',\n    'barMaxWidth',\n    'stackCornerRadius',\n\n    'dimensionLinkage',\n  ]) as Config['dualAxis']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.color =\n    !isMultiMeasure && uniqueDimIds.some((id) => id !== MeasureId)\n      ? uniqueDimIds.filter((id) => id !== MeasureId)\n      : uniqueDimIds.slice(0)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  funnelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForFunnel,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForFunnel,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const funnelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForFunnel],\n    [buildMeasures, encodingForFunnel, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  funnelConfig,\n  theme,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.y = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第2个维度放置于Y轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  // x\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    if (dimensions.length > 1) {\n      encoding.y = dimensions.slice(1).map((item) => item.id)\n    } else {\n      encoding.y = dimensions.slice(0).map((item) => item.id)\n    }\n  }\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  const colorDims = unique(\n    measures.filter((item) => item.encoding === 'color' || !item.encoding).map((item) => item.id),\n  )\n  if (colorDims.length > 0) {\n    encoding.color = [colorDims[0]]\n  }\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  heatmapConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForHeatmap,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForHeatmap,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const heatmapAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForHeatmap],\n    [buildMeasures, encodingForHeatmap, pickMeasuresForReshape(['tooltip', 'label']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  heatmapConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, false)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d: string) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail?.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip?.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label?.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  histogramConfig,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithHistogramEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  encodingAdapter,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  defaultEncodingForHistogram,\n  encodingForHistogram,\n  reshapeWithHistogramEncoding,\n  regressionLine,\n} from '../pipes'\nimport { histogramXAxisConfig } from '../pipes/config/histogram'\n\nexport const histogramAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  histogramConfig,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForHistogram],\n    [\n      buildMeasures,\n      encodingForHistogram,\n      pickMeasuresForReshape(['tooltip', 'label', 'color']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithHistogramEncoding], [pivotReshapeWithHistogramEncoding]),\n\n  histogramXAxisConfig,\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { merge } from '@visactor/vutils'\nimport { pick } from 'remeda'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config, Dimension } from 'src/types'\n\nexport const histogramConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const hasColorEncoding = (advancedVSeed?.dimensions || []).find((field: Dimension) => field?.encoding === 'color')\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'binCount',\n    'binStep',\n    'binValueType',\n\n    'dimensionLinkage',\n  ]) as Config['histogram']\n\n  let config = replaceNullToUndefined(pickedConfig)\n\n  if (pickedConfig?.binValueType === 'percentage') {\n    config = merge(\n      {},\n      {\n        yAxis: {\n          autoFomat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n        label: {\n          autoFormat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n      },\n      config,\n    )\n  }\n  if (!hasColorEncoding && !config?.legend?.enable) {\n    config = {\n      ...config,\n      legend: {\n        ...config?.legend,\n        enable: false,\n      },\n    }\n  }\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n\nexport const histogramXAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const { dataset = [] } = advancedVSeed\n  const flattenDatasert = dataset.flat()\n  const minValue = Math.min(...flattenDatasert.map((v) => +v[BinStartMeasureId]))\n  const maxValue = Math.max(...flattenDatasert.map((v) => +v[BinEndMeasureId]))\n\n  const chartConfig = result.config?.[chartType] as any\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...chartConfig,\n      xAxis: {\n        min: Number.isNaN(minValue) ? undefined : minValue,\n        max: Number.isNaN(maxValue) ? undefined : maxValue,\n        ...(chartConfig?.xAxis || {}),\n      },\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, ColumnParallel, Dataset, Dimension, Encoding, FoldInfo } from 'src/types'\nimport { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes/color/colorAdapter'\n\nexport const reshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  let newDatasets: any[] = []\n  let foldInfo: FoldInfo = {\n    foldMap: {},\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n  }\n  let unfoldInfo: any = {}\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const allMeasures = findAllMeasures(measures)\n\n  if (encoding.value?.length) {\n    const valueField = encoding.value[0]\n    const m = allMeasures.find((m) => m.id === valueField)\n    const binData = bin(dataset, {\n      field: valueField,\n      groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n      bins: binCount,\n      step: binStep,\n      outputNames: {\n        x0: BinStartMeasureId,\n        x1: BinEndMeasureId,\n        count: BinCountMeasureId,\n        percentage: BinPercentageMeasureId,\n      },\n    }) as Dataset\n\n    binData.forEach((datum) => {\n      datum[FoldMeasureId] = valueField\n      datum[FoldMeasureName] = m?.alias ?? valueField\n      const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n      datum[FoldMeasureValue] = valueNumber\n      datum[valueField] = valueNumber\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n    })\n    if (m?.id) {\n      foldInfo.foldMap[m?.id] = m?.alias\n    }\n\n    const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n    const res = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      findAllMeasures(measures)\n        .filter((item) => encoding.y?.includes(item.id))\n        .slice(0, 1),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        colorMeasureId,\n      },\n    )\n\n    res.dataset.forEach((datum) => {\n      datum[BinStartMeasureId] = datum[encoding.x0![0]]\n      datum[BinEndMeasureId] = datum[encoding.x1![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = res.foldInfo\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n    dimensions,\n    measures,\n  }\n}\n","import { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Datum,\n  Dimension,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n} from 'src/types'\n\nexport const pivotReshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  const measureGroups: MeasureGroup[] = []\n  if (measures) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children && measure.children.length > 0) {\n        measureGroups.push(measure)\n      }\n    })\n  }\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measureGroup, index) => {\n    const subMeasures = measureGroup.children\n    if (!subMeasures) {\n      return\n    }\n    const groupId = measureGroup.id\n\n    let newDatasets: any[] = []\n    let foldInfo: FoldInfo = {\n      foldMap: {},\n      measureId: FoldMeasureId,\n      measureName: FoldMeasureName,\n      measureValue: FoldMeasureValue,\n      statistics: {\n        max: -Infinity,\n        min: Infinity,\n        sum: 0,\n        count: 0,\n        colorMin: Infinity,\n        colorMax: -Infinity,\n      },\n    }\n    let unfoldInfo: any = {}\n\n    if (encoding.value?.length) {\n      const valueField = encoding.value[0]\n      const m = subMeasures.find((m) => m.id === valueField)\n      const binData = bin(dataset, {\n        field: valueField,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        facetField: rowColumnFields.map((item: Dimension) => item.id),\n        bins: binCount,\n        step: binStep,\n        outputNames: {\n          x0: BinStartMeasureId,\n          x1: BinEndMeasureId,\n          count: BinCountMeasureId,\n          percentage: BinPercentageMeasureId,\n        },\n      }) as Dataset\n\n      binData.forEach((datum: Datum) => {\n        datum[FoldMeasureId] = valueField\n        datum[FoldMeasureName] = m?.alias ?? valueField\n        const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n        datum[FoldMeasureValue] = valueNumber\n        datum[valueField] = valueNumber\n\n        foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n        foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n        foldInfo.statistics.sum += valueNumber\n        foldInfo.statistics.count++\n      })\n      if (m?.id) {\n        foldInfo.foldMap[m?.id] = m?.alias\n      }\n\n      const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n      const res = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item: Dimension) => item.id),\n        subMeasures.filter((item) => encoding.y?.includes(item.id)).slice(0, 1),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          colorMeasureId,\n        },\n      )\n\n      res.dataset.forEach((datum) => {\n        datum[BinStartMeasureId] = datum[encoding.x0![0]]\n        datum[BinEndMeasureId] = datum[encoding.x1![0]]\n        datum[FoldMeasureId] = datum[encoding.y![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = res.foldInfo\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  lineConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForLine,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const lineAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForLine],\n    [buildMeasures, encodingForLine, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  lineConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  pieConfig,\n  annotation,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForPie,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const pieAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForPie],\n    [buildMeasures, encodingForPie, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  pieConfig,\n  theme,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1)\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.detail = [] // 雷达图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = []\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // radius\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortLegend,\n  radarConfig,\n  encodingForRadar,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForRadar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const radarAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForRadar],\n    [buildMeasures, encodingForRadar, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  // sortXBandAxis,\n  sortLegend,\n  radarConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const roseAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForRose],\n    [buildMeasures, encodingForRose, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseParallelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const roseParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForRose],\n    [buildMeasures, encodingForRose, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipe, MeasureGroup, Measures, MeasureTree, Scatter, ScatterMeasures } from 'src/types'\nimport { isMeasureTreeWithParentId, isMeasureTreeWithChildren } from './utils'\nimport { clone } from 'remeda'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\n\nexport const buildMeasuresForScatter: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context as {\n    vseed: Scatter\n  }\n\n  // 带Children的指标树, 不进行任何处理\n  if (isMeasureTreeWithChildren(advancedVSeed.measures)) {\n    return advancedVSeed\n  }\n  // 带parentId的指标树, 转换为带children的指标树\n  if (isMeasureTreeWithParentId(advancedVSeed.measures)) {\n    advancedVSeed.measures = generateMeasuresByParentId(advancedVSeed.measures as Measures)\n    return advancedVSeed\n  }\n\n  /**\n   * 既不是带Children的指标树, 也不是带parentId的指标树, 则自动生成指标\n   */\n\n  if (vseed.scatterMeasures) {\n    advancedVSeed.measures = scatterMeasuresToMeasureTree(clone(vseed.scatterMeasures))\n\n    return advancedVSeed\n  }\n\n  const { scatterMeasures, encodedMeasures } = basicMeasuresToScatterMeasures(advancedVSeed.measures || [])\n  advancedVSeed.measures = scatterMeasuresToMeasureTree(scatterMeasures)\n\n  if (encodedMeasures.length) {\n    encodedMeasures.forEach((m) => {\n      advancedVSeed.measures!.push(m)\n    })\n  }\n\n  return advancedVSeed\n}\n\nconst basicMeasuresToScatterMeasures = (basicMeasures: Measures) => {\n  const yMeasures: Measures = []\n  const xMeasures: Measures = []\n  const encodedMeasures: Measures = []\n\n  for (let index = 0; index < basicMeasures.length; index++) {\n    const item = basicMeasures[index]\n    const encoding = item.encoding\n    const isYAxis = encoding === 'yAxis'\n    const isXAxis = encoding === 'xAxis'\n    const isOther = encoding && ['color', 'label', 'tooltip', 'detail'].includes(encoding)\n\n    if (isYAxis) {\n      yMeasures.push(item)\n    } else if (isXAxis) {\n      xMeasures.push(item)\n    } else if (!isOther) {\n      if (index !== 0) {\n        yMeasures.push(item)\n      } else {\n        xMeasures.push(item)\n      }\n    } else {\n      encodedMeasures.push(item)\n    }\n  }\n\n  if (yMeasures.length === 0 && xMeasures.length > 0) {\n    yMeasures.push(xMeasures[0])\n  }\n\n  return {\n    scatterMeasures: [{ id: 'scatterMeasures', xMeasures, yMeasures }],\n    encodedMeasures,\n  }\n}\n\nconst scatterMeasuresToMeasureTree = (scatterMeasures: ScatterMeasures): MeasureTree => {\n  const measureTree = scatterMeasures.map((item, index): MeasureGroup => {\n    const { id, xMeasures, yMeasures } = item\n    const groupChildren: MeasureGroup[] = []\n\n    let groupId: string = `${id}-`\n    if (xMeasures) {\n      const arrPrimaryMeasures = Array.isArray(xMeasures) ? xMeasures : [xMeasures]\n      const alias = arrPrimaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-x`,\n        alias: arrPrimaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrPrimaryMeasures,\n      })\n    }\n    if (yMeasures) {\n      const arrSecondaryMeasures = Array.isArray(yMeasures) ? yMeasures : [yMeasures]\n      const alias = arrSecondaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-y`,\n        alias: arrSecondaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrSecondaryMeasures,\n      })\n    }\n\n    return {\n      id: groupId,\n      alias: groupId,\n      children: groupChildren,\n    }\n  })\n\n  // 只有1个散点图, 仅返回2层, vchart 绘制散点图\n  if (scatterMeasures.length === 1) {\n    return measureTree[0].children || []\n  }\n\n  // 有多个散点图, 返回3层, pivot chart 绘制组合散点图\n  return measureTree\n}\n\nconst generateMeasuresByParentId = (measures: Measures) => {\n  const scatterMeasures: ScatterMeasures = []\n  const encodedMeasures: Measures = []\n\n  measures.forEach((item) => {\n    const id = item.parentId || DEFAULT_PARENT_ID\n\n    if (!scatterMeasures.find((d) => d.id === id)) {\n      scatterMeasures.push({\n        id,\n        yMeasures: [],\n        xMeasures: [],\n      })\n    }\n    const scatterChart = scatterMeasures.find((d) => d.id === id)\n    if (!scatterChart || !Array.isArray(scatterChart.yMeasures) || !Array.isArray(scatterChart.xMeasures)) {\n      return\n    }\n\n    const isYAxis = item.encoding === 'yAxis'\n    const isXAxis = item.encoding === 'xAxis'\n    const isOther = item.encoding && ['color', 'label', 'tooltip', 'detail'].includes(item.encoding)\n\n    if (isYAxis) {\n      scatterChart.yMeasures.push(item)\n    } else if (isXAxis) {\n      scatterChart.xMeasures.push(item)\n    } else if (!isOther) {\n      if (scatterChart.yMeasures.length !== 0) {\n        scatterChart.yMeasures.push(item)\n      } else {\n        scatterChart.xMeasures.push(item)\n      }\n    } else {\n      encodedMeasures.push(item)\n    }\n  })\n\n  const res = scatterMeasuresToMeasureTree(scatterMeasures)\n\n  if (encodedMeasures.length) {\n    encodedMeasures.forEach((m) => {\n      res.push(m)\n    })\n  }\n\n  return res\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const defaultEncodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  // prepare measures and dimensions\n  const measures = findAllMeasures(vseedMeasures)\n\n  // exist encoding condition\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  // color\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size').map((item) => item.id))\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  scatterConfig,\n  encodingForScatter,\n  buildMeasuresForScatter,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForScatter,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  regressionLine,\n} from '../pipes'\nimport { reshapeWithScatterEncoding } from '../pipes/reshape/reshapeWithScatterEncoding'\nimport { pivotReshapeWithScatterEncoding } from '../pipes/reshape/pivotReshapeWithScatterEncoding'\n\nexport const scatterAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasuresForScatter, defaultEncodingForScatter],\n    [\n      buildMeasuresForScatter,\n      encodingForScatter,\n      pickMeasuresForReshape(['tooltip', 'label', 'size']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithScatterEncoding], [pivotReshapeWithScatterEncoding]),\n\n  scatterConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import { uniqueBy } from 'remeda'\nimport {\n  dataReshapeByEncoding,\n  FoldXMeasureId,\n  FoldXMeasureValue,\n  FoldYMeasureId,\n  FoldYMeasureValue,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Encoding,\n  FoldInfo,\n  Measure,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = (advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []).filter(\n    (m: Measure | MeasureGroup) => m && (m as MeasureGroup).children,\n  )\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  if (measures.length > 2) {\n    throw new Error('measures can not be more than 2 groups in scatter')\n  }\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n\n  const datasets: Dataset[] = []\n  const xMeasures = measures[0] as MeasureGroup\n  const yMeasures = (measures[1] || xMeasures) as MeasureGroup\n\n  if (xMeasures && xMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (d) => d.id),\n      uniqueBy(xMeasures.children, (d) => d.id),\n      encoding as Encoding,\n      {\n        foldMeasureValue: FoldXMeasureValue,\n        foldMeasureId: FoldXMeasureId,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets.push(newDataset)\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  if (yMeasures && yMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      datasets[0],\n      uniqueBy(dimensions, (d) => d.id),\n      uniqueBy(yMeasures.children, (d) => d.id),\n      encoding as Encoding,\n      {\n        foldMeasureValue: FoldYMeasureValue,\n        foldMeasureId: FoldYMeasureId,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets[0] = newDataset\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets[0],\n\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { dataReshapeByEncoding, FoldXMeasureValue, FoldYMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures, measureDepth } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const allMeasures = findAllMeasures(measures)\n\n  const measureGroups: Array<MeasureGroup[]> = []\n\n  const depth = measureDepth(measures)\n  if (depth === 3) {\n    measures.forEach((measure: MeasureGroup) => {\n      measureGroups.push(measure.children as unknown as MeasureGroup[])\n    })\n  } else if (depth === 2) {\n    measureGroups.push(measures)\n  }\n\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measures: MeasureGroup[], index) => {\n    if (measures.length > 2) {\n      throw new Error('measures can not be more than 2 groups in scatter')\n    }\n\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const xMeasures = measures[0]\n    const yMeasures = measures[1] || xMeasures\n\n    if (xMeasures && xMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(dataset, dimensions, xMeasures.children, encoding as Encoding, {\n        foldMeasureValue: `${FoldXMeasureValue}${index}`,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasures.map((item) => item.id),\n      })\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    if (yMeasures && yMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(dataset, dimensions, yMeasures.children, encoding as Encoding, {\n        foldMeasureValue: `${FoldYMeasureValue}${index}`,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasures.map((item) => item.id),\n      })\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(datasets[0].map((d, index) => ({ ...d, ...(datasets[1]?.[index] || {}) })))\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const scatterConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'sizeRange',\n    'size',\n    'crosshairLine',\n\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { sort, unique } from 'remeda'\nimport type { Dataset, Datum } from 'src/types'\nimport type { Sort } from 'src/types/properties/analysis/sort'\n\nexport const calcOrder = (sortConfig: Sort, id: string, dataset: Dataset): string[] => {\n  if (sortConfig.customOrder) {\n    return sortConfig.customOrder\n  }\n\n  const order = sortConfig.order || 'asc'\n  const orderBy = sortConfig.orderBy\n\n  const res = sort(dataset, (a, b) => {\n    const aValue = a[orderBy || id] as string | number\n    const bValue = b[orderBy || id] as string | number\n\n    if (order === 'asc') {\n      if (aValue < bValue) {\n        return -1\n      }\n      if (aValue > bValue) {\n        return 1\n      }\n      return 0\n    }\n    if (aValue > bValue) {\n      return -1\n    }\n    if (aValue < bValue) {\n      return 1\n    }\n    return 0\n  })\n\n  return unique(res.map((item: Datum) => item[id] as string))\n}\n","import type { AdvancedPipe, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortLegend: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sortLegend } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed\n  const colorId = datasetReshapeInfo?.[0]?.unfoldInfo?.encodingColorId\n  const colorIdMap = datasetReshapeInfo?.[0]?.unfoldInfo?.colorIdMap ?? {}\n  const colorItems = datasetReshapeInfo?.[0]?.unfoldInfo?.colorItems\n  if (!sortLegend || !colorId || !colorIdMap || !colorItems) {\n    return advancedVSeed\n  }\n\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  if (sortLegend.customOrder) {\n    const colorIds = Object.keys(colorIdMap)\n    // 先根据名称匹配, 若名称不存在, 则根据id匹配, 从而兼容名称和id的两种情况\n    const orderRes = sortLegend.customOrder.map((itemNameOrId) => {\n      return colorIds.find((id) => {\n        return colorIdMap[id]?.alias === itemNameOrId || colorIdMap[id]?.id === itemNameOrId || id === itemNameOrId\n      }) as string\n    })\n    result.analysis.orderMapping[colorId] = orderRes\n    return result\n  }\n\n  const orderRes = calcOrder(sortLegend, colorId, dataset?.flat(2) || [])\n  result.analysis.orderMapping[colorId] = orderRes\n\n  return result\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortXBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const xField = unfoldInfo.encodingX\n  if (!sortAxis || !xField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, xField, dataset.flat(2))\n\n  result.analysis.orderMapping[xField] = axisOrderResult\n\n  return result\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortYBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const yField = unfoldInfo?.encodingY\n  if (!sortAxis || !yField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, yField, dataset.flat(2))\n\n  result.analysis.orderMapping[yField] = axisOrderResult\n\n  return result\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const annotation: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const annotation = pick(vseed, [\n    'annotationPoint',\n    'annotationHorizontalLine',\n    'annotationVerticalLine',\n    'annotationArea',\n  ]) as AdvancedVSeed['annotation']\n\n  return { ...advancedVSeed, annotation }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const columnConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'stackCornerRadius',\n    'barMaxWidth',\n    'barGapInGroup',\n\n    'dimensionLinkage',\n  ]) as Config['column']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { lineConfig } from './line'\nimport { columnConfig } from './column'\nimport { pieConfig } from './pie'\nimport { dualAxisConfig } from './dualAxis'\nimport { scatterConfig } from './scatter'\nimport { histogramConfig } from './histogram'\nimport { boxplotConfig } from './boxplot'\n\nexport { lineConfig, columnConfig, pieConfig, dualAxisConfig, scatterConfig, histogramConfig, boxplotConfig }\n\n// area\nexport const areaConfig = lineConfig\nexport const areaPercentConfig = lineConfig\n\n// bar\nexport const barConfig = columnConfig\nexport const barParallelConfig = columnConfig\nexport const barPercentConfig = columnConfig\n\n// column\nexport const columnParallelConfig = columnConfig\nexport const columnPercentConfig = columnConfig\n\n// donut, rose\nexport const donutConfig = pieConfig\nexport const roseConfig = pieConfig\nexport const roseParallelConfig = pieConfig\nexport const radarConfig = pieConfig\n\n// funnel, heatmap\nexport const funnelConfig = pieConfig\nexport const heatmapConfig = pieConfig\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const lineConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairLine',\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const pieConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, ['backgroundColor', 'color', 'label', 'legend', 'tooltip']) as Config['pie']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { clone } from 'remeda'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Dimensions, DimensionTree } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    return {\n      ...result,\n      dimensions: clone(dimensions.map((dim) => ({ ...dim, alias: dim.alias || dim.id }))),\n    }\n  }\n\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensions: newDimensions,\n  }\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport type { AdvancedPipe, Dimension } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n\n  const MeaIdDim: Dimension = {\n    id: MeasureId,\n    alias: intl.i18n`指标Id`,\n  }\n\n  // 如果没有指标Id维度，则默认添加指标Id维度\n  if (!result.dimensions?.some((dim) => dim.id === MeasureId)) {\n    result.dimensions?.push(MeaIdDim)\n  }\n\n  return result\n}\n","import { clone } from 'remeda'\nimport type { AdvancedPipe, Datum } from 'src/types'\nimport { preorderTraverse } from 'src/pipeline/utils'\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n    preorderTraverse(clonedMeasures, (node) => {\n      node.alias = node.alias || node.id\n\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      measures: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measures: defaultMeasures,\n  }\n}\n","import { clone } from 'remeda'\nimport { deleteDimensionTreeByCallback } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension } from 'src/types'\n\nexport const pickDimensionsForReshape: AdvancedPipe = (advancedVSeed) => {\n  const deleteBy = (dimension: Dimension) => dimension.encoding === 'tooltip' || dimension.encoding === 'label'\n  const reshapeDimensions = clone(advancedVSeed.dimensions)\n  deleteDimensionTreeByCallback(reshapeDimensions, deleteBy)\n\n  return {\n    ...advancedVSeed,\n    reshapeDimensions,\n  }\n}\n","import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedPipelineContext,\n  AdvancedVSeed,\n  Dimension,\n  Measure,\n} from 'src/types'\nimport { execPipeline } from 'src/pipeline/utils'\n\nexport const encodingAdapter = (\n  noEncodingPipeline: AdvancedPipeline,\n  hasEncodingPipeline: AdvancedPipeline,\n): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { dimensions = [], measures = [] } = advancedVSeed\n    const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n    const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n    const hasEncoding = hasDimensionEncoding || hasMeasureEncoding\n\n    if (hasEncoding) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(hasEncodingPipeline, context, advancedVSeed)\n    }\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(noEncodingPipeline, context, advancedVSeed)\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.y = uniqueDimIds.slice(0, 1) // 第一个维度放置于Y轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    encoding.y = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // x\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { Dimensions, Encoding } from 'src/types'\n\n/**\n * @description 为 encoding 添加 color 编码, 多指标场景, 会将 MeasureId 也添加到 color 编码中.\n * @param dimensions\n * @param encoding\n * @param isMultiMeasure\n */\nexport const addColorToEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n\n  const measureId = dimensions.find((item) => item.id === MeasureId)\n\n  if (isMultiMeasure && measureId && !measureId.encoding) {\n    encoding.color.push(MeasureId)\n  }\n  if (encoding.color.length === 0) {\n    encoding.color = [MeasureId]\n  }\n}\n\n/**\n * @description 为 encoding 添加 color 编码, 多指标场景, 会将 MeasureId 也添加到 color 编码中.\n * @param dimensions\n * @param encoding\n * @param isMultiMeasure\n */\nexport const addDefaultColorEncoding = (uniqueDimIds: string[], encoding: Encoding, isMultiMeasure: boolean) => {\n  if (uniqueDimIds.length === 1 && uniqueDimIds[0] === MeasureId) {\n    encoding.color = uniqueDimIds.slice(0)\n  } else if (isMultiMeasure) {\n    encoding.color = uniqueDimIds.slice(1)\n  } else {\n    encoding.color = uniqueDimIds.slice(1).filter((d: string) => d !== MeasureId)\n  }\n  if (encoding.color.length === 0) {\n    encoding.color = [MeasureId]\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1)\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标Id之外的所有维度\n  encoding.detail = [] // 折线图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n\n  if (isMultiMeasure) {\n    encoding.color = uniqueDimIds.slice(0) // 所有维度都用于color映射，包括MeasureId\n  } else {\n    encoding.color = uniqueDimIds.filter((d: string) => d !== MeasureId) // 除了MeasureId之外的所有维度用于color映射\n  }\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // angle\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const markStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedMarkStyle = pick(vseed, [\n    'barStyle',\n    'pointStyle',\n    'lineStyle',\n    'areaStyle',\n    'boxPlotStyle',\n    'outlierStyle',\n  ]) as AdvancedVSeed['markStyle']\n\n  const markStyle = replaceNullToUndefined(pickedMarkStyle)\n\n  return { ...advancedVSeed, markStyle }\n}\n","import type { AdvancedPipe, MeasureGroup, Measures, MeasureTree, VSeed } from 'src/types'\nimport { isMeasureTreeWithChildren, isMeasureTreeWithParentId, normalizeMeasureTree } from './utils'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport { isValid } from '@visactor/vutils'\n\nexport const buildMeasures: AdvancedPipe = (advancedVSeed) => {\n  // 带Children的指标树, 不进行任何处理\n  if (isMeasureTreeWithChildren(advancedVSeed.measures)) {\n    advancedVSeed.measures = normalizeMeasureTree(advancedVSeed.measures as MeasureTree)\n    return advancedVSeed\n  }\n  // 带parentId的指标树, 转换为带children的指标树\n  if (isMeasureTreeWithParentId(advancedVSeed.measures)) {\n    advancedVSeed.measures = generateMeasuresByParentId(advancedVSeed.measures as Measures)\n    return advancedVSeed\n  }\n\n  /**\n   * 透视图表, 自动生成指标树\n   */\n  if (isPivotChart(advancedVSeed as VSeed)) {\n    advancedVSeed.measures = basicMeasuresToMeasureTree(advancedVSeed.measures as Measures)\n  }\n\n  return advancedVSeed\n}\n\nconst generateMeasuresByParentId = (measures: Measures): MeasureTree => {\n  const measureTree: MeasureGroup[] = []\n\n  measures.forEach((measure) => {\n    const parent = measureTree.find((item) => item.id === measure.parentId)\n    if (parent && 'children' in parent) {\n      parent.children = parent.children || []\n\n      if (parent.children.length > 0) {\n        parent.alias += `-${measure.alias ?? measure.id}`\n      }\n\n      parent.children.push(measure)\n    } else if (isValid(measure.parentId)) {\n      measureTree.push({\n        id: measure.parentId,\n        alias: measure.alias ?? measure.id,\n        children: [measure],\n      })\n    } else {\n      measureTree.push({\n        id: DEFAULT_PARENT_ID,\n        alias: measure.alias ?? measure.id, // 当分组只有单个指标的时候，分组alias 设置为该指标的别名或者id\n        children: [measure],\n      })\n    }\n  })\n\n  return measureTree\n}\n\nconst basicMeasuresToMeasureTree = (measures: Measures): MeasureTree => {\n  const id = measures.map((item) => item.id).join('-')\n  const alias = measures.map((item) => item.alias || item.id).join('-')\n  return [\n    {\n      id,\n      alias,\n      children: measures,\n    },\n  ]\n}\n","import { clone } from 'remeda'\nimport { deleteMeasureTreeByCallback } from 'src/index'\nimport type { AdvancedPipe, Measure } from 'src/types'\n\nexport const pickMeasuresForReshape = (encodingKeys: string[]): AdvancedPipe => {\n  return (advancedVSeed) => {\n    const clonedMeasures = clone(advancedVSeed.measures)\n\n    const deleteBy = (measure: Measure) => encodingKeys.includes(measure.encoding as string)\n\n    deleteMeasureTreeByCallback(clonedMeasures, deleteBy)\n\n    return {\n      ...advancedVSeed,\n      reshapeMeasures: clonedMeasures,\n    }\n  }\n}\n","import type { MeasureGroup, MeasureTree } from 'src/types'\n\n/**\n * @description 检查是否为指标树, 指标树深度大于1. 如果存在一个指标为组, 即有children配置, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithChildren = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'children' in measure)\n}\n\n/**\n * @description 检查是否为指标树, 指标树存在parentId. 如果存在一个指标有parentId, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithParentId = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'parentId' in measure)\n}\n\n/**\n * @description 保证指标树中的每一组都有children, 没有children的指标, 会被放到一个默认的指标组中.\n * @param measures 指标树\n * @returns\n */\nexport const normalizeMeasureTree = (measures: MeasureTree) => {\n  const createEmptyMeasureGroup = (): MeasureGroup => {\n    return {\n      id: 'group',\n      alias: '',\n      children: [],\n    }\n  }\n\n  let currentGroup: MeasureGroup = createEmptyMeasureGroup()\n  const measureGroups: MeasureGroup[] = []\n  for (const measure of measures) {\n    if ('children' in measure) {\n      // 当前指标组之前的所有独立指标成组\n      if (currentGroup.children?.length) {\n        currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n        currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n        measureGroups.push(currentGroup)\n        currentGroup = createEmptyMeasureGroup()\n      }\n      // 当前是指标组\n      measureGroups.push(measure)\n    } else {\n      currentGroup.children?.push(measure)\n    }\n  }\n\n  // 最后一组\n  if (currentGroup.children?.length) {\n    currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n    currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n    measureGroups.push(currentGroup)\n    currentGroup = createEmptyMeasureGroup()\n  }\n\n  return measureGroups\n}\n","import type { AdvancedPipe, AdvancedPipeline, AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline, isPivotChart } from 'src/pipeline/utils'\n\nexport const pivotAdapter = (pipeline: AdvancedPipeline, pivotPipeline: AdvancedPipeline): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n\n    if (usePivotChart) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pivotPipeline, context, advancedVSeed)\n    }\n\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context, advancedVSeed)\n  }\n}\n","import type { AdvancedPipe, RegressionLineConfig } from 'src/types'\n\nexport const regressionLine: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  let keys = [] as string[]\n\n  if (vseed.chartType === 'histogram') {\n    keys = ['kdeRegressionLine', 'ecdfRegressionLine']\n  } else if (vseed.chartType === 'scatter') {\n    keys = ['linearRegressionLine', 'lowessRegressionLine', 'polynomialRegressionLine', 'logisticRegressionLine']\n  } else if (vseed.chartType === 'column') {\n    keys = ['polynomialRegressionLine']\n  }\n\n  if (keys.length) {\n    const regressionLineConfig: RegressionLineConfig = {}\n    let hasLine = false\n\n    keys.forEach((key: string) => {\n      if ((vseed as any)[key]) {\n        hasLine = true\n        regressionLineConfig[key as keyof RegressionLineConfig] = (vseed as any)[key]\n      }\n    })\n\n    return hasLine\n      ? {\n          ...advancedVSeed,\n          regressionLine: regressionLineConfig,\n        }\n      : advancedVSeed\n  }\n\n  return advancedVSeed\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  MeasureGroup,\n} from 'src/types'\n\nexport const pivotReshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const allMeasures = findAllMeasures(measures)\n  const measureGroups: MeasureGroup[] = []\n  if (measures) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children && measure.children.length > 0) {\n        measureGroups.push(measure)\n      }\n    })\n  }\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measureGroup, index) => {\n    const measures = measureGroup.children\n    if (!measures) {\n      return\n    }\n    const groupId = measureGroup.id\n    const {\n      dataset: newSubDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item) => item.id),\n      uniqueBy(measures, (item) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: `${FoldMeasureValue}${groupId}`,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasures.map((item) => item.id),\n      },\n    )\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newSubDataset)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, ColumnParallel, Encoding } from 'src/types'\n\nexport const reshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding } = advancedVSeed\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const {\n    dataset: newDatasets,\n    foldInfo,\n    unfoldInfo,\n  } = dataReshapeByEncoding(\n    dataset,\n    uniqueBy(advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? [], (item) => item.id),\n    uniqueBy(findAllMeasures(advancedVSeed.reshapeMeasures ?? advancedVSeed.measures), (item) => item.id),\n    encoding as Encoding,\n    {\n      colorItemAsId: false,\n      colorMeasureId,\n    },\n  )\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n  }\n}\n","import { clone, isNullish, isNumber, isObjectType, isString, merge, mergeDeep } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const theme: AdvancedPipe = (advancedVSeed, context) => {\n  const { customTheme, vseed } = context\n  const { theme = 'light', chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  } as AdvancedVSeed\n\n  if (!customTheme || !customTheme[theme]) {\n    return result\n  }\n\n  const chartConfigTheme = customTheme?.[theme].config?.[chartType]\n  if (chartConfigTheme) {\n    const chartConfig = result.config?.[chartType] || {}\n    const mergedConfig = mergeDeep(chartConfigTheme, clone(chartConfig))\n\n    // 数组项不会被Merge, 需要将1个主题配置, 合并到数组的每一项\n    for (const _k in mergedConfig) {\n      const key = _k as keyof typeof mergedConfig\n      // 配置的第一层, 如果是数组, 则数组的每一项目和主题配置合并\n      if (Array.isArray(mergedConfig[key])) {\n        mergedConfig[key] = mergeArray(mergedConfig[key], chartConfigTheme[key])\n      }\n    }\n\n    result.config = {\n      [chartType]: mergedConfig,\n    }\n  }\n\n  const chartCustomTheme = customTheme?.[theme]?.config?.[chartType]\n\n  result.customTheme = {\n    config: {\n      [chartType]: chartCustomTheme,\n    },\n  }\n\n  return result\n}\n\nconst mergeArray = <Destination extends Array<object>, Source extends object | number | string | undefined | null>(\n  arr: Destination,\n  themeItem: Source,\n): Destination => {\n  if (isNullish(themeItem) || isString(themeItem) || isNumber(themeItem)) {\n    return arr\n  }\n\n  if (!Array.isArray(arr)) {\n    return arr\n  }\n\n  if (arr.some((d) => !isObjectType(d))) {\n    return arr\n  }\n\n  return arr.map((item) => {\n    return merge(themeItem, item)\n  }) as Destination\n}\n","import { unique } from 'remeda'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const encodingForPivotTable: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  uniqueDimIds.forEach((item, index) => {\n    if (index % 2 === 0) {\n      encoding.column!.push(item)\n    } else {\n      encoding.row!.push(item)\n    }\n  })\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  dimensions.forEach((dim, index) => {\n    const id = dim.id\n    if (dim.encoding === 'row') {\n      encoding.row!.push(id)\n    } else if (dim.encoding === 'column') {\n      encoding.column!.push(id)\n    } else {\n      if (index % 2 === 0) {\n        encoding.column!.push(id)\n      } else {\n        encoding.row!.push(id)\n      }\n    }\n  })\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = unique(measures.map((item) => item.id))\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = measures.map((item) => item.id)\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { theme } from '../../chart/pipes'\nimport {\n  cellStyle,\n  defaultDimensions,\n  defaultMeasureId,\n  defaultMeasures,\n  encodingForPivotTable,\n  initAdvancedVSeed,\n  pivotTableConfig,\n  reshapePivotTable,\n} from '../pipes'\n\nexport const pivotTableAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  cellStyle,\n\n  encodingForPivotTable,\n  reshapePivotTable,\n  pivotTableConfig,\n  theme,\n]\n","import { MeasureId, MeasureName } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport type { AdvancedPipe, Dimension, DimensionTree } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  // 如果没有指标名称维度，则默认添加指标名称维度\n  if (measures.length > 1 && !result.dimensions?.some((dim) => dim.id === MeasureName)) {\n    result.dimensions?.push({\n      id: MeasureId,\n      alias: intl.i18n`指标名称`,\n      encoding: 'row',\n    } as Dimension)\n  }\n\n  return result\n}\n","import { FoldMeasureId, FoldMeasureName, foldMeasures, FoldMeasureValue } from 'src/dataReshape'\nimport {} from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, DatasetReshapeInfo, PivotTable } from 'src/types'\n\nexport const reshapePivotTable: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as PivotTable\n  const { dimensions, measures } = advancedVSeed\n  const { dataset: newDatasets, foldInfo } = foldMeasures(dataset, findAllMeasures(measures), {\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    allowEmptyFold: false,\n  })\n\n  const datasetReshapeInfo = [\n    {\n      id: String(chartType),\n      index: 0,\n      foldInfo,\n    },\n  ] as unknown as DatasetReshapeInfo\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n    dimensions,\n    measures,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const pivotTableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['table']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { initAdvancedVSeed, records, tableConfig, defaultMeasures, defaultDimensions, cellStyle } from '../pipes'\nimport { theme } from '../../chart/pipes'\n\nexport const tableAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  cellStyle,\n\n  records,\n  tableConfig,\n  theme,\n]\n","import type { AdvancedPipe } from 'src/types'\n\nexport const records: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { dataset } = vseed\n  return {\n    ...advancedVSeed,\n    dataset,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const tableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['pivotTable']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const cellStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedCellStyle = pick(vseed, ['bodyCellStyle']) as AdvancedVSeed['cellStyle']\n\n  const style = replaceNullToUndefined(pickedCellStyle)\n\n  return { ...advancedVSeed, cellStyle: style }\n}\n","import { clone } from 'remeda'\nimport { findAllMeasures, isDimension, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Dimensions, DimensionTree } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    const clonedDimensions = clone(dimensions)\n    preorderTraverse(clonedDimensions, (node) => {\n      if (isDimension(node)) {\n        node.alias = node.alias || node.id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      dimensions: clonedDimensions,\n    }\n  }\n\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensions: newDimensions,\n  }\n}\n","import { clone } from 'remeda'\nimport { isMeasure, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum } from 'src/types'\n\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n    preorderTraverse(clonedMeasures, (node) => {\n      if (isMeasure(node)) {\n        node.alias = node.alias || node.id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      measures: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measures: defaultMeasures,\n  }\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  yLinear,\n  initArea,\n  stackInverse,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  datasetXY,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotAxisStyle,\n  pivotTitle,\n  splitLine,\n  dimensionLinkage,\n} from '../pipes'\n\nconst area: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotArea: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    stackInverse,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaSpecPipeline = [pivotAdapter(area, pivotArea)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  percent,\n  datasetXY,\n  xBand,\n  yLinear,\n  initArea,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  progressive,\n  colorLegend,\n  colorAdapter,\n  linearColor,\n  pivotColorLegend,\n  pointStateDimensionHover,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst areaPercent: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotAreaPercent: PivotChartSpecPipeline = [\n  initPivot,\n\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaPercentSpecPipeline = [pivotAdapter(areaPercent, pivotAreaPercent)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst bar: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barSpecPipeline = [pivotAdapter(bar, pivotBar)]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBarParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.y, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n\n  result.yField = [unfoldInfo.encodingY]\n\n  if (!sameDimensionsMode) {\n    result.yField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.x?.length === 1) {\n      result.yField.pop()\n    }\n  }\n\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetYX,\n  xLinear,\n  yBand,\n  initBarParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst barParallel: VChartSpecPipeline = [\n  initBarParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBarParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barParallelSpecPipeline = [pivotAdapter(barParallel, pivotBarParallel)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst barPercent: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barPercentSpecPipeline = [pivotAdapter(barPercent, pivotBarPercent)]\n","import { type IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isDeepEqual } from 'remeda'\nimport {\n  LowerWhisker,\n  MeasureId,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n} from 'src/dataReshape/constant'\nimport { isPivotChart, revisedBoxPlotFieldKey } from 'src/pipeline/utils'\n\nexport const initBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBoxPlotChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n\n  const usePivotChart = isPivotChart(vseed)\n  result.type = 'boxPlot'\n  // 默认应该是盒须的位置\n  result.minField = revisedBoxPlotFieldKey(LowerWhisker, id, usePivotChart)\n  result.maxField = revisedBoxPlotFieldKey(UpperWhisker, id, usePivotChart)\n  result.q1Field = revisedBoxPlotFieldKey(Q1MeasureValue, id, usePivotChart)\n  result.medianField = revisedBoxPlotFieldKey(MedianMeasureId, id, usePivotChart)\n  result.q3Field = revisedBoxPlotFieldKey(Q3MeasureValue, id, usePivotChart)\n  result.outliersField = revisedBoxPlotFieldKey(OutliersMeasureId, id, usePivotChart)\n  result.xField = [unfoldInfo.encodingX]\n  result.seriesField = unfoldInfo.encodingColorId\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingColor)\n\n    if (encoding.color?.[0] === MeasureId && encoding.value?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import { isNullish } from 'remeda'\nimport type { BoxMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const boxMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxMaxWidth = advancedVSeed.config?.[chartType as 'boxPlot']?.boxMaxWidth as BoxMaxWidth\n\n  if (!isNullish(boxMaxWidth)) {\n    return {\n      ...spec,\n      boxMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import { isNullish } from 'remeda'\nimport type { BoxGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const boxGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxGapInGroup = advancedVSeed.config?.[chartType as 'boxPlot']?.boxGapInGroup as BoxGapInGroup\n\n  if (!isNullish(boxGapInGroup)) {\n    return {\n      ...spec,\n      boxGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const datasetBoxplot: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type {\n  Dimension,\n  Dimensions,\n  Encoding,\n  VChartSpecPipe,\n  Tooltip,\n  Measures,\n  FoldInfo,\n  UnfoldInfo,\n} from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern, ITooltipLineActual, TooltipData } from '@visactor/vchart'\nimport {\n  ColorEncoding,\n  LowerWhisker,\n  MeasureId,\n  MeasureName,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n  XEncoding,\n} from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { intl } from 'src/i18n'\nimport { updateTooltipElement } from './tooltipElement'\n\nconst boxPlotMeasureKeys = [UpperWhisker, Q3MeasureValue, MedianMeasureId, Q1MeasureValue, LowerWhisker]\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { chartType, dimensions, encoding, datasetReshapeInfo } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType as 'boxPlot'] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const meas = findAllMeasures(vseed.measures)\n  const valueMeasure = meas.find((item) => item.encoding === 'value' || isNullish(item.encoding))\n  const defaultFormatter = valueMeasure ? createFormatterByMeasure(valueMeasure) : (v: unknown) => v\n  const measureAliasMapping: Record<string, string> = {\n    [OutliersMeasureId]: intl.i18n`异常点`,\n    [UpperWhisker]: intl.i18n`上边界`,\n    [Q3MeasureValue]: intl.i18n`上四分位数`,\n    [MedianMeasureId]: intl.i18n`中位数`,\n    [Q1MeasureValue]: intl.i18n`下四分位数`,\n    [LowerWhisker]: intl.i18n`下边界`,\n  }\n  const { unfoldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    visible: enable,\n    style: getTooltipStyle(tooltip),\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, encoding as Encoding),\n      updateContent: (prev: ITooltipLineActual[] | undefined, data: TooltipData | undefined) => {\n        const datum = (data as any)?.[0]?.datum?.[0]\n\n        if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n          const tooltipItems: ITooltipLineActual[] = (prev ?? []).filter(\n            (item: any) => !boxPlotMeasureKeys.includes(item.key as string),\n          )\n          const outerlierMeasure = meas.find((item) => item.id === OutliersMeasureId)\n          const formatter = outerlierMeasure ? createFormatterByMeasure(outerlierMeasure) : defaultFormatter\n\n          tooltipItems.push({\n            ...(tooltipItems[0] as any),\n            key: outerlierMeasure?.alias ?? measureAliasMapping[OutliersMeasureId],\n            value: formatter(datum?.[VCHART_OUTLIER_KEY] as number) as string,\n          } as ITooltipLineActual)\n\n          return tooltipItems\n        }\n\n        return (prev ?? []).map((entry) => {\n          if (boxPlotMeasureKeys.includes((entry as any).key as string)) {\n            const mea = meas.find((item) => item.id === (entry as any).key)\n            const formatter = mea ? createFormatterByMeasure(mea) : defaultFormatter\n\n            return {\n              ...(entry as any),\n              value: formatter(datum?.[(entry as any).key] as number) as string,\n              key: mea?.alias ?? measureAliasMapping[entry?.key as string] ?? (entry as any).key,\n            }\n          }\n\n          return entry\n        }) as ITooltipLineActual[]\n      },\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, meas, unfoldInfo, measureAliasMapping[MedianMeasureId]),\n    },\n    updateElement: updateTooltipElement,\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (tooltip: string[], dimensions: Dimensions, encoding: Encoding) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return datum?.[item.id] as string\n    },\n  }))\n\n  const defaultContent = boxPlotMeasureKeys.map((key: string) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key,\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return datum[key] as string | number\n      },\n    }\n  })\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n\nconst createDimensionContent = (\n  dimensions: Dimensions,\n  measures: Measures,\n  unfoldInfo: UnfoldInfo,\n  medianAlias: string,\n) => {\n  const { encodingColor } = unfoldInfo\n\n  return [\n    {\n      visible: true,\n      shapeType: 'rectRound',\n      hasShape: true,\n      key: dimensions.some((d) => d.encoding === 'color')\n        ? (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[encodingColor] as string)) || ''\n            return `${unfoldInfo.colorIdMap[key].alias ?? key}(${medianAlias})`\n          }\n        : (v: unknown) => {\n            const datum = v as Datum\n            return `${datum[MeasureName] ?? datum[MeasureId]}(${medianAlias})`\n          },\n      value: (v: unknown) => {\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[MedianMeasureId] as string | number // dimension tooltip 中默认显示中位数\n        const id = datum[MeasureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    },\n  ]\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBoxPlotStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBoxPlotChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.boxPlot?.style) {\n        result.boxPlot.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BoxPlotStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const boxPlotStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { boxPlotStyle } = markStyle\n  const theme = config?.[vseed.chartType as 'boxPlot']?.boxPlotStyle\n\n  const result = {\n    ...spec,\n    boxPlot: {\n      style: {\n        shaftShape: 'filled-line',\n        visible: true,\n        shaftWidth: '50%',\n        stroke: theme?.whiskerBorderColor,\n        boxStroke: theme?.boxBorderColor,\n        boxCornerRadius: theme?.boxCornerRadius,\n        medianStroke: theme?.medianBorderColor ?? theme?.boxBorderColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(boxPlotStyle) || isEmpty(boxPlotStyle)) {\n    return result\n  }\n\n  const boxPlotStyles = (Array.isArray(boxPlotStyle) ? boxPlotStyle : [boxPlotStyle]) as BoxPlotStyle[]\n\n  const customMap = boxPlotStyles.reduce<object>((result, style, index) => {\n    const {\n      boxColor,\n      boxColorOpacity,\n      boxBorderColor,\n      boxBorderWidth = 1,\n      boxVisible = true,\n      boxBorderOpacity,\n      medianBorderColor,\n      whiskerBorderColor,\n    } = style\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: boxVisible,\n          fill: boxColor,\n          fillOpacity: boxColorOpacity,\n          lineWidth: boxBorderWidth,\n          stroke: whiskerBorderColor,\n          boxStroke: boxBorderColor,\n          strokeOpacity: boxBorderOpacity,\n          medianStroke: medianBorderColor ?? boxBorderColor,\n        },\n      },\n    }\n  }, {})\n\n  result.boxPlot!.state = {\n    ...result.boxPlot!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, OutlierStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const outlierStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { outlierStyle } = markStyle\n  const theme = config?.[vseed.chartType as 'boxPlot']?.outlierStyle\n  const result = {\n    ...spec,\n    outlier: {\n      style: {\n        // stroke: theme?.pointColor,\n        fill: theme?.pointColor,\n        lineWidth: theme?.pointBorderWidth,\n        stroke: theme?.pointBorderColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(outlierStyle) || isEmpty(outlierStyle)) {\n    return result\n  }\n\n  const outlierStyles = (Array.isArray(outlierStyle) ? outlierStyle : [outlierStyle]) as OutlierStyle[]\n\n  const customMap = outlierStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          stroke: pointBorderColor,\n          lineWidth: pointBorderWidth,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    outlier: {\n      ...result.outlier,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  label,\n  tooltipBoxplot,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  initBoxplot,\n  xBand,\n  yLinear,\n  verticalCrosshairRect,\n  datasetBoxplot,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  boxPlotStyle,\n  colorBoxPlotStyleFill,\n  outlierStyle,\n  discreteLegend,\n} from '../pipes'\n\nconst boxplot: VChartSpecPipeline = [\n  initBoxplot,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetBoxplot,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltipBoxplot,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBoxPlotStyleFill(boxPlotStyle),\n  outlierStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBoxplot: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initBoxplot,\n    stackCornerRadius,\n    boxMaxWidth,\n    boxGapInGroup,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetBoxplot,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltipBoxplot,\n    colorBoxPlotStyleFill(boxPlotStyle),\n    outlierStyle,\n    verticalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const boxplotSpecPipeline = [pivotAdapter(boxplot, pivotBoxplot)]\n","import type { IBarChartSpec, ICartesianSeries, IChart, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport { array, clamper, regressionPolynomial } from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n} from 'src/types'\nimport { defaultRegressionLineColor, getAlphaByConfidenceLevel } from './common'\n\nexport const columnPolynomialRegressionLine: VChartSpecPipe = (spec, context): Partial<IBarChartSpec> => {\n  const result = { ...spec } as Partial<IBarChartSpec>\n  const { advancedVSeed } = context\n  const { chartType, regressionLine } = advancedVSeed\n  const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.polynomialRegressionLine) {\n    return result\n  }\n\n  const lineList = array(regressionLine.polynomialRegressionLine)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n    const {\n      color,\n      lineWidth,\n      lineDash,\n      text,\n      textColor,\n      textFontSize,\n      textFontWeight,\n      confidenceIntervalOpacity,\n      confidenceLevel = 0.95,\n      shadowBlur,\n      shadowColor,\n      shadowOffsetX,\n      shadowOffsetY,\n      confidenceIntervalVisible = theme.confidenceIntervalVisible,\n    } = line as LinearRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `polynomialRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const s = chart.getAllSeries()[0] as ICartesianSeries\n\n          if (s) {\n            const rect = s.getRegion().getLayoutRect()\n\n            if (rect.width === 0 || rect.height === 0) {\n              return null\n            }\n\n            const yClamper = clamper(0, 0 + rect.height)\n            const data = s.getViewData()?.latestData as Datum[]\n            const fieldX = s.fieldX?.[0]\n            const fieldY = s.fieldY?.[0]\n            const xValues = s.getRawDataStatisticsByField(fieldX).values as string[]\n            const degree = (line as PolynomialRegressionLine).degree ?? 2\n            // 多项式拟合需要至少 degree + 1 个点\n            const minPoints = degree + 1\n\n            if (!fieldX || !fieldY || !data || data.length < minPoints || xValues.length < minPoints) {\n              return null\n            }\n\n            const { confidenceInterval, evaluateGrid } = regressionPolynomial(\n              xValues.map((xVal, index: number) => {\n                const filteredData = data.filter((d) => d[fieldX] === xVal)\n\n                return {\n                  x: index,\n                  y: Math.max(...filteredData.map((d) => d[fieldY] as number)),\n                }\n              }),\n              undefined,\n              undefined,\n              {\n                degree: (line as PolynomialRegressionLine).degree ?? 2,\n                alpha: getAlphaByConfidenceLevel(confidenceLevel),\n              },\n            )\n            const N = xValues.length\n            const xAxisHelper = s.getXAxisHelper()\n            const halfBandWidth = xAxisHelper ? xAxisHelper.getBandwidth!(0) / 2 : 0\n            const lineData = evaluateGrid(N)\n            const linePoints = lineData.map((datum: Datum, index: number) => {\n              const d = { [fieldX]: xValues[index], [fieldY]: datum.y }\n              return {\n                x: s.dataToPositionX(d)! + halfBandWidth,\n                y: yClamper(s.dataToPositionY(d)!),\n              }\n            })\n            const result: {\n              linePoints: { x: number; y: number }[]\n              areaPoints?: { x: number; y: number; y1: number }[]\n              color: string\n            } = {\n              linePoints,\n              color: s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n\n            if (confidenceIntervalVisible) {\n              const intervalData = confidenceInterval(N)\n\n              result.areaPoints = intervalData.map((datum: Datum, index: number) => {\n                const d = { [fieldX]: xValues[index], [fieldY]: datum.lower }\n                return {\n                  x: s.dataToPositionX(d)! + halfBandWidth,\n                  y: yClamper(s.dataToPositionY(d)!),\n                  y1: yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!),\n                }\n              })\n            }\n\n            return result\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    if (confidenceIntervalVisible) {\n      childrenMarks.push({\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        style: {\n          stroke: false,\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n          fill: color ?? defaultRegressionLineColor,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data) {\n              return parentNode.attribute.data.areaPoints\n            }\n\n            return []\n          },\n        },\n      })\n    }\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        shadowBlur: shadowBlur ?? theme.shadowBlur,\n        shadowColor: shadowColor ?? theme.shadowColor,\n        shadowOffsetX: shadowOffsetX ?? theme.shadowOffsetX,\n        shadowOffsetY: shadowOffsetY ?? theme.shadowOffsetY,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `polynomialRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.x\n            }\n\n            return undefined\n          },\n          y: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.y\n            }\n\n            return undefined\n          },\n        },\n      })\n    }\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  columnPolynomialRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst column: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  barMaxWidth,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  verticalCrosshairRect,\n  colorAdapter(discreteLegend, colorLegend),\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  columnPolynomialRegressionLine,\n]\n\nconst pivotColumn: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    barMaxWidth,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    columnPolynomialRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnSpecPipeline = [pivotAdapter(column, pivotColumn)]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumnParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = [unfoldInfo.encodingX]\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.y?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initColumnParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst columnParallel: VChartSpecPipeline = [\n  initColumnParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumnParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnParallelSpecPipeline = [pivotAdapter(columnParallel, pivotColumnParallel)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst columnPercent: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  stackInverse,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    stackInverse,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    percent,\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnPercentSpecPipeline = [pivotAdapter(columnPercent, pivotColumnPercent)]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initDonut: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = result.outerRadius * 0.8\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initDonut,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  pieStyle,\n  colorPieStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst donut: VChartSpecPipeline = [\n  initDonut,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  labelPie,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotDonut: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initDonut,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    labelPie,\n    colorPieStyleFill(pieStyle),\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const donutSpecPipeline = [pivotAdapter(donut, pivotDonut)]\n","import type { IBarSeriesSpec, ILineSeriesSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initDualAxisPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarSeriesSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList, id } = datasetReshapeInfo[0]\n\n  result.id = `${id}-primary-series`\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.yField = foldInfoList?.[0].measureValue\n  result.animation = true\n\n  return result\n}\n\nexport const initDualAxisSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineSeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList, id } = datasetReshapeInfo[0]\n\n  result.id = `${id}-secondary-series`\n  result.type = 'line'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  if (foldInfoList?.[1]) {\n    result.yField = foldInfoList[1].measureValue\n  }\n\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n  result.animation = true\n\n  return result\n}\n","import type { IBarSeriesSpec, ISeriesSpec } from '@visactor/vchart'\nimport { DUAL_AXIS_CHART_COLUMN_Z_INDEX, DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } from 'src/pipeline/utils/constant'\nimport type { DualChartType, VChartSpecPipe } from 'src/types'\n\nconst DEFAULT_DUAL_CHART_TYPE: DualChartType = {\n  primary: 'column',\n  secondary: 'line',\n}\n\nexport const dualChartTypePrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec, zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } as ISeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo } = advancedVSeed\n  const index = datasetReshapeInfo[0].index\n\n  const config = advancedVSeed.config?.[chartType as 'dualAxis']?.dualChartType || DEFAULT_DUAL_CHART_TYPE\n\n  const primary =\n    (Array.isArray(config) ? config[index]?.primary || config[0]?.primary : config.primary) ??\n    DEFAULT_DUAL_CHART_TYPE.primary\n  const secondary =\n    (Array.isArray(config) ? config[index]?.secondary || config[0]?.secondary : config.secondary) ??\n    DEFAULT_DUAL_CHART_TYPE.secondary\n  const bothColumn = primary === 'column' && secondary === 'column'\n  const type = bothColumn ? 'columnParallel' : primary\n  switch (type) {\n    case 'line': {\n      result.type = 'line'\n      break\n    }\n    case 'column': {\n      result.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnParallel': {\n      const columnSpec = result as IBarSeriesSpec\n      if (Array.isArray(columnSpec.xField)) {\n        columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail)\n      } else if (columnSpec.xField) {\n        columnSpec.xField = [columnSpec.xField, datasetReshapeInfo[0].unfoldInfo.encodingDetail]\n      }\n      columnSpec.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'columnPercent': {\n      result.type = 'bar'\n      result.percent = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'area': {\n      result.type = 'area'\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'areaPercent': {\n      result.type = 'area'\n      result.percent = true\n      break\n    }\n    case 'scatter': {\n      result.type = 'scatter'\n      break\n    }\n    default:\n      result.type = primary\n  }\n\n  return result\n}\n\nexport const dualChartTypeSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec, zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } as ISeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo } = advancedVSeed\n  const config = advancedVSeed.config?.[chartType as 'dualAxis']?.dualChartType || DEFAULT_DUAL_CHART_TYPE\n\n  const index = datasetReshapeInfo[0].index\n  const primary =\n    (Array.isArray(config) ? config[index]?.primary || config[0]?.primary : config.primary) ??\n    DEFAULT_DUAL_CHART_TYPE.primary\n  const secondary =\n    (Array.isArray(config) ? config[index]?.secondary || config[0]?.secondary : config.secondary) ??\n    DEFAULT_DUAL_CHART_TYPE.secondary\n  const bothColumn = primary === 'column' && secondary === 'column'\n  const type = bothColumn ? 'columnParallel' : secondary\n\n  switch (type) {\n    case 'line': {\n      result.type = 'line'\n      break\n    }\n    case 'column': {\n      result.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnParallel': {\n      const columnSpec = result as IBarSeriesSpec\n      if (Array.isArray(columnSpec.xField)) {\n        columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail)\n      } else if (columnSpec.xField) {\n        columnSpec.xField = [columnSpec.xField, datasetReshapeInfo[0].unfoldInfo.encodingDetail]\n      }\n      columnSpec.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'columnPercent': {\n      result.type = 'bar'\n      result.percent = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'area': {\n      result.type = 'area'\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'areaPercent': {\n      result.type = 'area'\n      result.percent = true\n      break\n    }\n    case 'scatter': {\n      result.type = 'scatter'\n      break\n    }\n    default:\n      result.type = secondary ?? DEFAULT_DUAL_CHART_TYPE.secondary\n  }\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetPrimary: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const orderMapping = analysis?.orderMapping || {}\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id: `${id}-primary-dataset`,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n\nexport const datasetSecondary: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const orderMapping = analysis?.orderMapping || {}\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id: `${id}-secondary-dataset`,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\nimport { DUAL_AXIS_LABEL_Z_INDEX } from 'src/pipeline/utils/constant'\n\nexport const labelPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n  result.label = buildLabel(\n    baseConfig.label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfoList[0]],\n  ) as unknown as ILineChartSpec['label']\n  ;(result.label as any)!.zIndex = DUAL_AXIS_LABEL_Z_INDEX\n  return result\n}\n\nexport const labelSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n\n  result.label = buildLabel(\n    baseConfig.label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfoList[1]],\n  ) as unknown as ILineChartSpec['label']\n  ;(result.label as any)!.zIndex = DUAL_AXIS_LABEL_Z_INDEX\n  return result\n}\n","import { isNullish } from 'remeda'\nimport { createDimensionContent, createMarkContent } from './tooltip'\nimport type { FoldInfo, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltipPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { measures, datasetReshapeInfo, chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n  const unfoldInfo = datasetReshapeInfo[0].unfoldInfo\n\n  result.tooltip = {\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        foldInfoList[0],\n        unfoldInfo,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfoList[0], unfoldInfo),\n    },\n  }\n  return result\n}\n\nexport const tooltipSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { measures, datasetReshapeInfo, chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n\n  if (isNullish(datasetReshapeInfo[0].foldInfoList?.[1])) {\n    return result\n  }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n  const unfoldInfo = datasetReshapeInfo[0].unfoldInfo as UnfoldInfo\n  result.tooltip = {\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        foldInfoList[1],\n        unfoldInfo,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfoList[1], unfoldInfo),\n    },\n  }\n  return result\n}\n\nexport const tooltipDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const barStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'bar') {\n      return pipe(spec, context) as IBarChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pointStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line' || spec.type === 'area') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const lineStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const areaStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'area') {\n      return pipe(spec, context) as IAreaChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { createNumFormatter } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { createLinearFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\n\nexport const yLinearPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, encoding, measures, dimensions } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const primaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.primaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(primaryYAxis) ? primaryYAxis[index] || primaryYAxis[0] : primaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (isNullish(foldInfoList?.[0])) {\n    return result\n  }\n\n  const isEmptySecondary = isEmpty(foldInfoList?.[0].foldMap)\n\n  const id = `${reshapeInfoId}-primary-axis`\n  const seriesIds = [`${reshapeInfoId}-primary-series`, `${reshapeInfoId}-secondary-series`]\n  const seriesId = alignTicksConfig ? seriesIds : seriesIds[0]\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { autoFormat, numFormat = {} } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const formatMethod = (value: string) => {\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = yAxisConfig?.title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[])\n\n  const linearAxis = {\n    ...linearAxisStyle({\n      ...yAxisConfig,\n      orient: 'left',\n      formatMethod,\n      titleText,\n      id,\n      seriesId,\n    }),\n    visible: isEmptySecondary ? false : (yAxisConfig?.visible ?? true),\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { createNumFormatter } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { createLinearFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\n\nexport const yLinearSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, measures, dimensions, encoding } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const secondaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.secondaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(secondaryYAxis) ? secondaryYAxis[index] || secondaryYAxis[0] : secondaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (isNullish(foldInfoList?.[1])) {\n    return result\n  }\n\n  const isEmptySecondary = isEmpty(foldInfoList?.[1].foldMap)\n  const onlySecondary = isEmpty(foldInfoList?.[0].foldMap) && !isEmptySecondary\n\n  const sync = {\n    axisId: `${reshapeInfoId}-primary-axis`,\n    zeroAlign: true,\n  }\n\n  const id = `${reshapeInfoId}-secondary-axis`\n  const seriesIds = [`${reshapeInfoId}-primary-series`, `${reshapeInfoId}-secondary-series`]\n  const seriesId = alignTicksConfig ? seriesIds : seriesIds[1]\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { autoFormat, numFormat = {} } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const formatMethod = (value: string) => {\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = yAxisConfig?.title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[])\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  const baseStyle = linearAxisStyle({\n    ...yAxisConfig,\n    orient: 'right',\n    formatMethod,\n    titleText,\n    id,\n    seriesId,\n    sync,\n  })\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n  const linearAxis = {\n    ...baseStyle,\n    visible: isEmptySecondary ? false : (yAxisConfig?.visible ?? true),\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    grid: {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      ...baseStyle.grid,\n      visible: onlySecondary ? true : yAxisConfig?.grid?.visible,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { IMarkPointSpec, ISpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, SpecPipelineContext, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport { MeasureId } from 'src/dataReshape/constant'\nimport { pickWithout } from '@visactor/vutils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfDualAxis: VChartSpecPipe = generateAnnotationPointPipe({\n  findSelectedDatas: (dataset, s, spec: ISpec, context: SpecPipelineContext) => {\n    return dataset.reduce((res: Datum[], d: Datum) => {\n      const { advancedVSeed } = context\n      const allMeasureIds = findAllMeasures(advancedVSeed.reshapeMeasures ?? advancedVSeed.measures).map((m) => m.id)\n      const pickedDatum = pickWithout(\n        d,\n        allMeasureIds.filter((id) => id !== d[MeasureId]),\n      )\n\n      if (selector(pickedDatum, s)) {\n        res.push(pickedDatum)\n      }\n\n      return res\n    }, [])\n  },\n  generateMarkPoint: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed } = context\n    const allMeasureIds = findAllMeasures(advancedVSeed.reshapeMeasures ?? advancedVSeed.measures).map((m) => m.id)\n    return spec.series?.map((s: any, index: number) => {\n      return {\n        relativeSeriesIndex: index,\n        coordinate: (data: Datum[]) => {\n          return data.find((item) => {\n            return isSubset(\n              datum,\n              item,\n              allMeasureIds.filter((id) => id !== item[MeasureId]),\n            )\n          })\n        },\n      } as IMarkPointSpec\n    })\n  },\n})\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  backgroundColor,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  pointStyle,\n  lineStyle,\n  pointStateDimensionHover,\n  progressive,\n  datasetPrimary,\n  datasetSecondary,\n  areaStyle,\n  barStyle,\n  verticalCrosshairRect,\n  yLinearSecondary,\n  initDualAxisPrimary,\n  initDualAxisSecondary,\n  labelPrimary,\n  labelSecondary,\n  tooltipPrimary,\n  tooltipSecondary,\n  yLinearPrimary,\n  dualChartTypePrimary,\n  dualChartTypeSecondary,\n  seriesDualAxis,\n  series,\n  colorBarStyleFill,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  linearColorForDualAxis,\n  annotationAreaBand,\n  barMaxWidth,\n  barGapInGroup,\n  stackCornerRadius,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n  annotationPointOfDualAxis,\n  barStyleFilter,\n  pointStyleFilter,\n  lineStyleFilter,\n  areaStyleFilter,\n  tooltipDualAxis,\n} from '../pipes'\n\nconst dualAxis: VChartSpecPipeline = [\n  seriesDualAxis(\n    [\n      initDualAxisPrimary,\n      dualChartTypePrimary,\n      datasetPrimary,\n      labelPrimary,\n      tooltipPrimary,\n      progressive,\n\n      barMaxWidth,\n      barGapInGroup,\n      stackCornerRadius,\n\n      barStyleFilter(colorBarStyleFill(barStyle)),\n      pointStyleFilter(colorPointStyleFill(pointStyle)),\n      pointStyleFilter(pointStateDimensionHover),\n      lineStyleFilter(colorLineStyleFill(lineStyle)),\n      areaStyleFilter(colorAreaStyleFill(areaStyle)),\n    ],\n    [\n      initDualAxisSecondary,\n      dualChartTypeSecondary,\n      datasetSecondary,\n      labelSecondary,\n      tooltipSecondary,\n      progressive,\n\n      barMaxWidth,\n      barGapInGroup,\n      stackCornerRadius,\n\n      barStyleFilter(colorBarStyleFill(barStyle)),\n      pointStyleFilter(colorPointStyleFill(pointStyle)),\n      pointStyleFilter(pointStateDimensionHover),\n      lineStyleFilter(colorLineStyleFill(lineStyle)),\n      areaStyleFilter(colorAreaStyleFill(areaStyle)),\n    ],\n  ),\n  xBand,\n  yLinearPrimary,\n  yLinearSecondary,\n\n  colorAdapter(color, linearColorForDualAxis),\n  colorAdapter(discreteLegend, colorLegend),\n\n  backgroundColor,\n\n  verticalCrosshairRect,\n  annotationPointOfDualAxis,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n\n  tooltipDualAxis,\n]\n\nconst pivotDualAxis: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    series(\n      [\n        initDualAxisPrimary,\n        dualChartTypePrimary,\n        datasetPrimary,\n        labelPrimary,\n        tooltipPrimary,\n        progressive,\n\n        stackCornerRadius,\n        barMaxWidth,\n        barGapInGroup,\n\n        colorBarStyleFill(barStyle),\n        colorPointStyleFill(pointStyle),\n        pointStateDimensionHover,\n        colorLineStyleFill(lineStyle),\n        colorAreaStyleFill(areaStyle),\n      ],\n      [\n        initDualAxisSecondary,\n        dualChartTypeSecondary,\n        datasetSecondary,\n        labelSecondary,\n        tooltipSecondary,\n        progressive,\n\n        stackCornerRadius,\n        barMaxWidth,\n        barGapInGroup,\n\n        colorBarStyleFill(barStyle),\n        colorPointStyleFill(pointStyle),\n        pointStateDimensionHover,\n        colorLineStyleFill(lineStyle),\n        colorAreaStyleFill(areaStyle),\n      ],\n    ),\n    xBand,\n    yLinearPrimary,\n    pivotAxisStyle(yLinearSecondary),\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    verticalCrosshairRect,\n    annotationPointOfDualAxis,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n\n    tooltipDualAxis,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const dualAxisSpecPipeline = [pivotAdapter(dualAxis, pivotDualAxis)]\n","import type { SpecPipelineContext, VChartSpecPipe, VChartSpecPipeline } from 'src/types'\nimport { execPipeline } from '../../../../utils'\nimport type { ICommonChartSpec, ILineSeriesSpec, ISpec } from '@visactor/vchart'\n\nexport const series = (...args: VChartSpecPipeline[]): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    result.series = args.map((pipeline) => {\n      return execPipeline<Partial<ISpec>, SpecPipelineContext>(pipeline, context, {})\n    }) as ILineSeriesSpec[]\n\n    return result as Partial<ISpec>\n  }\n}\n\n/**\n * @description 双轴图的透视场景, 不能使用此pipe, 请使用series\n * 因为VTable.PivotVChart会自行解析数据, 而非VChart解析.\n */\nexport const seriesDualAxis = (...args: VChartSpecPipeline[]): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    labelLayout: 'region',\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  const createDualContext = <T extends SpecPipelineContext>(context: T, index: number): T => {\n    const { advancedVSeed } = context\n    const dataset = advancedVSeed.dataset[index]\n    return {\n      ...context,\n      advancedVSeed: {\n        ...advancedVSeed,\n        dataset: dataset,\n      },\n    }\n  }\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    result.series = args.map((pipeline, index) => {\n      const seriesContext = createDualContext(context, index)\n      return execPipeline<ISpec, SpecPipelineContext>(pipeline, seriesContext, {})\n    }) as ILineSeriesSpec[]\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColorForDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: [\n      {\n        dataId: `${id}-primary-dataset`,\n        fields: [unfoldInfo.encodingColor],\n      },\n      {\n        dataId: `${id}-secondary-dataset`,\n        fields: [unfoldInfo.encodingColor],\n      },\n    ],\n  }\n\n  return result\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initFunnel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IFunnelChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'funnel'\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.isTransform = true\n  result.shape = 'rect'\n  result.maxSize = '75%'\n  result.minSize = '10%'\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorFunnelStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IFunnelChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.funnel?.style) {\n        result.funnel.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const funnelStyle: VChartSpecPipe = (spec) => {\n  const result = {\n    ...spec,\n    funnel: {\n      style: {},\n    },\n  } as IFunnelChartSpec\n\n  return {\n    ...result,\n    funnel: {\n      style: {\n        cornerRadius: 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { VChartSpecPipe } from 'src/types'\n\nexport const funnelTransformStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const config = advancedVSeed.config?.[chartType as 'funnel']?.transform\n\n  return {\n    ...spec,\n    transform: {\n      style: {\n        fill: config?.backgroundColor,\n      },\n    },\n    transformLabel: {\n      visible: true,\n      style: {\n        fill: config?.textColor,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  datasetXY,\n  datasetPivot,\n  initPivot,\n  label,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  initFunnel,\n  discreteLegend,\n  color,\n  funnelStyle,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorFunnelStyleFill,\n  pivotDiscreteLegend,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  funnelTransformStyle,\n  pivotTitle,\n} from '../pipes'\n\nconst funnel: VChartSpecPipeline = [\n  initFunnel,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  colorAdapter(discreteLegend, colorLegend),\n  colorFunnelStyleFill(funnelStyle),\n  funnelTransformStyle,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotFunnel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initFunnel,\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    tooltip,\n    colorFunnelStyleFill(funnelStyle),\n    funnelTransformStyle,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const funnelSpecPipeline = [pivotAdapter(funnel, pivotFunnel)]\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis, YBandAxis } from 'src/types'\nimport { bandAxisStyle } from './bandAxisStyle'\n\nexport const heatmapBandAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const xAxisConfig = (advancedVSeed.config?.[chartType as 'heatmap']?.xAxis ?? {}) as XBandAxis\n  const yAxisConfig = (advancedVSeed.config?.[chartType as 'heatmap']?.yAxis ?? {}) as YBandAxis\n  const xBandAxis = bandAxisStyle(xAxisConfig)\n  const yBandAxis = bandAxisStyle(yAxisConfig)\n\n  xBandAxis.orient = 'bottom'\n  xBandAxis.bandPadding = 0\n  yBandAxis.orient = 'left'\n  yBandAxis.bandPadding = 0\n\n  result.axes = [xBandAxis, yBandAxis]\n\n  return result\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorCellStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IHeatmapChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.cell?.style) {\n        result.cell.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const cellStyle: VChartSpecPipe = (spec, context) => {\n  const result = {\n    ...spec,\n    cell: {\n      style: {},\n    },\n  } as IHeatmapChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const cell = advancedVSeed.config?.[chartType as 'heatmap']?.cell\n\n  return {\n    ...result,\n    cell: {\n      style: {\n        visible: (datum: any) => {\n          return datum?.[DATUM_HIDE_KEY] !== true\n        },\n        shape: 'rect',\n        stroke: cell?.stroke,\n        lineWidth: cell?.lineWidth ?? 1,\n      },\n    },\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltipHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, findAllMeasures(vseed.measures), locale, foldInfo),\n    },\n    dimension: {\n      visible: false,\n    },\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures,\n  locale: Locale,\n  foldInfo: FoldInfo,\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = [foldInfo].map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (v: unknown) => {\n        const { measureId, foldMap } = foldInfo\n        const datum = v as Datum\n        const id = datum[measureId] as string\n        return foldMap[id] || id\n      },\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHeatmapChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'heatmap'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = unfoldInfo.encodingY\n  result.seriesField = unfoldInfo.encodingColorId\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltipHeatmap,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  discreteLegend,\n  color,\n  colorAdapter,\n  linearColor,\n  heatmapColorLegend,\n  cellStyle,\n  colorCellStyleFill,\n  pivotDiscreteLegend,\n  pivotColorLegend,\n  pivotTitle,\n  pivotAxisStyle,\n  heatmapBandAxis,\n} from '../pipes'\nimport { initHeatmap } from '../pipes/init/heatmap'\n\nconst heatmap: VChartSpecPipeline = [\n  initHeatmap,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  heatmapBandAxis,\n  colorAdapter(discreteLegend, heatmapColorLegend),\n  colorCellStyleFill(cellStyle),\n  tooltipHeatmap,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotHeatmap: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    pivotAxisStyle(initHeatmap),\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    heatmapBandAxis,\n    tooltipHeatmap,\n    colorCellStyleFill(cellStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const heatmapSpecPipeline = [pivotAdapter(heatmap, pivotHeatmap)]\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { VChartSpecPipe } from 'src/types'\nimport { colorLegend } from './colorLegend'\nimport type { Datum, IHeatmapChartSpec } from '@visactor/vchart'\nimport { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\n\nexport const heatmapColorLegend: VChartSpecPipe = (spec, context) => {\n  const result = colorLegend(spec, context) as IHeatmapChartSpec\n\n  if (result.legends) {\n    ;(result.legends as any).customFilter = (data: Datum[], range: number[], key: string) => {\n      const min = Math.min(range[0], range[1])\n      const max = Math.max(range[0], range[1])\n      return (data ?? []).map((entry: Datum) => {\n        const val = entry[key]\n        const isHide = val - min < -1e-6 || val - max > 1e-6\n\n        entry[DATUM_HIDE_KEY] = isHide\n\n        return entry\n      })\n    }\n  }\n\n  return result\n}\n","import type { IHistogramChartSpec } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, FoldMeasureValue } from 'src/index'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHistogram: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IHistogramChartSpec\n\n  // 直方图默认支持明细数据\n  result.type = 'histogram'\n  result.xField = BinStartMeasureId\n  result.x2Field = BinEndMeasureId\n  result.yField = FoldMeasureValue\n  // result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.legends = {\n    visible: false,\n  }\n  result.barGap = 2\n  result.animation = true\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetHistogram: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe, XLinearAxis } from 'src/types'\nimport { createNumFormatter, isAreaPercent, isBarPercent, isColumnPercent, isPivotChart } from 'src/pipeline/utils'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape/constant'\nimport { unique } from 'remeda'\n\nexport const histogramXLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { encoding, dimensions, measures, dataset } = advancedVSeed\n  const { chartType } = vseed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.xAxis ?? {}) as XLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const { autoFormat, numFormat = {} } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const formatMethod = (value: string) => {\n    if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n      return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n    }\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = config.title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[])\n\n  const linearAxis = linearAxisStyle({\n    ...config,\n    orient: 'bottom',\n    formatMethod,\n    titleText,\n    isPivot,\n  })\n\n  linearAxis.tick.tickMode = () => {\n    const binValues: number[] = []\n\n    dataset.forEach((entry: Datum) => {\n      binValues.push((entry as any)[BinStartMeasureId] as number)\n      binValues.push((entry as any)[BinEndMeasureId] as number)\n    })\n\n    return unique(binValues)\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import { autoFormatter, createNumFormatter } from 'src/pipeline/utils'\nimport type { AdvancedVSeed, XLinearAxis } from 'src/types'\nimport { createLinearFormat } from '../pipes/axes/format/linearFormat'\n\nexport const getDefaultXFormatterOfHistogram = (advancedVSeed: AdvancedVSeed) => {\n  const { chartType, config } = advancedVSeed\n  const xConfig = config?.[chartType as 'bar']?.xAxis as XLinearAxis\n  const { autoFormat = true, numFormat = {} } = xConfig\n  const formatter = createNumFormatter(numFormat)\n  return (value: number) => createLinearFormat(value, autoFormat, numFormat, formatter)\n}\n\nexport const getDefaultValueFormatterOfHistogram = (binValueType: 'count' | 'percentage' = 'count') => {\n  return binValueType === 'percentage'\n    ? createNumFormatter({\n        type: 'percent',\n        fractionDigits: 1,\n      })\n    : (value: number | string) => autoFormatter(value)\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport type { Dimension, Dimensions, Encoding, VChartSpecPipe, Tooltip } from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, ColorEncoding, FoldMeasureValue, XEncoding } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { getDefaultValueFormatterOfHistogram, getDefaultXFormatterOfHistogram } from '../../utils/histogram'\nimport { updateMarkTooltipElement } from './tooltipElement'\n\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipHistogram: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip; binValueType: 'count' | 'percentage' }\n  const { binValueType, tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(advancedVSeed)\n  const defaultValueFormatter = getDefaultValueFormatterOfHistogram(binValueType)\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n\n    updateElement: updateMarkTooltipElement,\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  encoding: Encoding,\n  dimFormatter: (value: number) => string,\n  defaultValueFormatter: (value: number | string) => string,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return defaultValueFormatter(datum?.[item.id] as string)\n    },\n  }))\n\n  const defaultContent = [\n    {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return `[${dimFormatter(+datum[BinStartMeasureId])}, ${dimFormatter(+datum[BinEndMeasureId])})`\n      },\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return defaultValueFormatter(datum[FoldMeasureValue] as string | number)\n      },\n    },\n  ]\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n","import type { ICartesianCrosshairSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { verticalCrosshairRect } from './verticalCrosshairRect'\nimport { getDefaultXFormatterOfHistogram } from '../../utils/histogram'\nimport { isArray } from '@visactor/vutils'\n\nexport const histogramVerticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = verticalCrosshairRect(spec, context)\n  if (!result.crosshair) {\n    return result\n  }\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  if (!crosshair.xField) {\n    return result\n  }\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(context.advancedVSeed)\n  crosshair.xField = {\n    ...(crosshair.xField || {}),\n    label: {\n      ...(crosshair.xField?.label || {}),\n      formatMethod: (text) => {\n        if (isArray(text)) {\n          return text\n        }\n        const binRange = `${text}`.split('~')\n        const binStart = defaultXFormatter(+binRange[0])\n        const binEnd = defaultXFormatter(+binRange[1])\n        return binRange.length === 1 ? binStart : `[${binStart}, ${binEnd})`\n      },\n    },\n  }\n\n  return result\n}\n","import type { IHistogramChartSpec, IMarkPointSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfHistogram: VChartSpecPipe = generateAnnotationPointPipe({\n  generateMarkPoint: (datum: Datum, spec) => {\n    const histogramSpec = spec as IHistogramChartSpec\n    const xField = histogramSpec.xField as string\n    const x2Field = histogramSpec.x2Field as string\n\n    return [\n      {\n        coordinate: (data: Datum[]) => {\n          const d = data.find((item) => isSubset(datum, item))\n\n          return d\n            ? {\n                ...d,\n                [xField]: (d[xField] + d[x2Field]) / 2,\n              }\n            : undefined\n        },\n      } as IMarkPointSpec,\n    ]\n  },\n})\n","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport type { KDEOptions } from '@visactor/vutils'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { kde, array } from '@visactor/vutils'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, KdeRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const kdeRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions, regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n  const binValueType = advancedVSeed.config[chartType as 'histogram']?.binValueType\n\n  if (!regressionLine || !regressionLine.kdeRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.kdeRegressionLine).filter((kdeLine) => kdeLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.kdeRegressionLine ?? {}) as KdeRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as KdeRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `kdeRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = kde(simpleData, {\n              bandwidth: Math.abs(viewData[0][BinEndMeasureId] - viewData[0][BinStartMeasureId]),\n            } as KDEOptions)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n\n            // 根据 binValueType 决定如何转换 KDE 密度值\n            // - 频次模式 (count): 频次 = 密度 × 样本数 × 带宽\n            // - 百分比模式 (percentage): 百分比 = 密度 × 带宽\n            const scaleR = (k: number) => {\n              if (binValueType === 'percentage') {\n                // 百分比模式：y轴是0-1的百分比，KDE密度值乘以带宽即可\n                return scaleY.scale(k * res.bandwidth)\n              } else {\n                // 频次模式：y轴是实际计数，需要乘以样本数量\n                return scaleY.scale(k * simpleData.length * res.bandwidth)\n              }\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `kdeRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  return result\n}\n","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { ecdf, array, isArray } from '@visactor/vutils'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, EcdfRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const ecdfRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions, regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.ecdfRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.ecdfRegressionLine).filter((ecdfLine) => ecdfLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme?.ecdfRegressionLine ?? {}) as EcdfRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as EcdfRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `ecdfRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = ecdf(simpleData)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n            const yRange = scaleY.range()\n            const y0 = yRange[0]\n            const y1 = yRange[yRange.length - 1]\n            const scaleR = (e: number) => {\n              return y0 + (y1 - y0) * e\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `ecdfRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  // add percent axis of ecdf\n  const leftAxis = result.axes?.find((v) => v.orient === 'left')\n  if (leftAxis && lineList.length) {\n    result.axes?.push({\n      visible: true,\n      orient: 'right',\n      type: 'linear',\n      base: 10,\n      min: 0,\n      max: 1,\n      domainLine: {\n        ...leftAxis.domainLine,\n      },\n      grid: {\n        visible: false,\n      },\n      tick: {\n        ...leftAxis.tick,\n      },\n      title: {\n        ...leftAxis.title,\n        visible: false,\n      },\n      label: {\n        ...leftAxis.label,\n        visible: true,\n        formatMethod: (v) => {\n          const text = isArray(v) ? v[0] : v\n          return `${(+text * 100).toFixed(1)}%`\n        },\n      },\n    })\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  label,\n  backgroundColor,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  datasetHistogram,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  initHistogram,\n  yLinear,\n  histogramVerticalCrosshairRect,\n  tooltipHistogram,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n  histogramXLinear,\n} from '../pipes'\n\nconst histogram: VChartSpecPipeline = [\n  initHistogram,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetHistogram,\n  progressive,\n  histogramXLinear,\n  yLinear,\n  label,\n  tooltipHistogram,\n  colorAdapter(discreteLegend, colorLegend),\n  histogramVerticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n]\n\nconst pivotHistogram: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initHistogram,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetHistogram,\n    progressive,\n    histogramXLinear,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltipHistogram,\n    colorBarStyleFill(barStyle),\n    histogramVerticalCrosshairRect,\n    annotationPointOfHistogram,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    kdeRegressionLine,\n    ecdfRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const histogramSpecPipeline = [pivotAdapter(histogram, pivotHistogram)]\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'line'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initLine,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorLineStyleFill,\n  colorPointStyleFill,\n  pivotColorLegend,\n  pivotTitle,\n  pivotAxisStyle,\n  splitLine,\n  dimensionLinkage,\n} from '../pipes'\n\nconst line: VChartSpecPipeline = [\n  initLine,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  verticalCrosshairLine,\n  colorAdapter(discreteLegend, colorLegend),\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  label,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotLine: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initLine,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    label,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const lineSpecPipeline = [pivotAdapter(line, pivotLine)]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = 0\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initPie,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  pieStyle,\n  colorPieStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst pie: VChartSpecPipeline = [\n  initPie,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotPie: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initPie,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    colorPieStyleFill(pieStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    addRegionPadding,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const pieSpecPipeline = [pivotAdapter(pie, pivotPie)]\n","import type { IRadarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initRadar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRadarChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'radar'\n  result.angleField = unfoldInfo.encodingAngle\n  result.radiusField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarAngleAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'angle',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarRadiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'radius',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n    label: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, SpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  initRadar,\n  areaStyle,\n  radarAngleAxis,\n  radarRadiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst radar: VChartSpecPipeline = [\n  initRadar,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radarAngleAxis,\n  radarRadiusAxis,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  // annotationPoint,\n  // annotationVerticalLine,\n  // annotationHorizontalLine,\n  // annotationArea,\n]\n\nconst pivotRadar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRadar,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radarAngleAxis,\n    radarRadiusAxis,\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    // annotationPoint,\n    // annotationVerticalLine,\n    // annotationHorizontalLine,\n    // annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const radarSpecPipeline: SpecPipeline = [pivotAdapter(radar, pivotRadar)]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRose: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'rose'\n\n  result.angleField = unfoldInfo.encodingAngle\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRose,\n  radiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  pivotColorLegend,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst rose: VChartSpecPipeline = [\n  initRose,\n  stackCornerRadius,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  verticalCrosshairRect,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n]\n\nconst pivotRose: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRose,\n    addRegionPadding,\n    stackCornerRadius,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const roseSpecPipeline = [pivotAdapter(rose, pivotRose)]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRoseParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, dataset, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.angle, encoding.color)\n\n  result.type = 'rose'\n  result.angleField = [unfoldInfo.encodingAngle]\n\n  if (!sameDimensionsMode) {\n    result.angleField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.radius?.length === 1) {\n      result.angleField.pop()\n    }\n  }\n\n  result.valueField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.rose = {\n    style: {\n      stroke: '#ffffff',\n      lineWidth: 1,\n    },\n    state: {\n      hover: {\n        lineWidth: 1,\n        fillOpacity: 0.6,\n      },\n    },\n  }\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRoseParallel,\n  radiusAxis,\n  progressive,\n  pivotColorLegend,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst roseParallel: VChartSpecPipeline = [\n  initRoseParallel,\n  stackCornerRadius,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  verticalCrosshairRect,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotRoseParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRoseParallel,\n    addRegionPadding,\n    stackCornerRadius,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const roseParallelSpecPipeline = [pivotAdapter(roseParallel, pivotRoseParallel)]\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList } = datasetReshapeInfo[0]\n\n  result.type = 'scatter'\n  result.direction = 'vertical'\n  result.xField = foldInfoList?.[0].measureValue\n  if (foldInfoList?.[1]) {\n    result.yField = foldInfoList[1].measureValue\n  }\n\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetScatter: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const scatterSize: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as {\n    sizeRange: number | number[]\n    size?: number | number[]\n  }\n  const hasSizeEncoding = encoding?.size?.[0]\n  if (!hasSizeEncoding) {\n    return result\n  }\n\n  const size = baseConfig.size ?? baseConfig.sizeRange\n\n  result.size = {\n    type: 'linear',\n    range: Array.isArray(size) ? size : [size, size],\n  } as IScatterChartSpec['size']\n\n  result.sizeField = encoding?.size?.[0] || undefined\n\n  return result\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    foldInfoList,\n  ) as unknown as IScatterChartSpec['label']\n\n  return result\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltipScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfoList } = datasetReshapeInfo[0] as unknown as {\n    foldInfoList: FoldInfo[]\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        locale,\n        foldInfoList,\n      ),\n    },\n    dimension: {\n      visible: false,\n    },\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures,\n  locale: Locale,\n  foldInfoList: FoldInfo[],\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = foldInfoList.map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: Object.values(foldInfo.foldMap)[0],\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { ICartesianSeries, IChart, IScatterChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport {\n  array,\n  clamper,\n  regressionLinear,\n  regressionLowess,\n  regressionPolynomial,\n  regressionLogistic,\n} from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n  SpecPipelineContext,\n  LogisticRegressionLine,\n  LowessRegressionLine,\n} from 'src/types'\nimport { getAlphaByConfidenceLevel } from './common'\n\nexport const generateRegressionLinePipe = (\n  type: 'linearRegressionLine' | 'lowessRegressionLine' | 'polynomialRegressionLine' | 'logisticRegressionLine',\n  regressionFunction: (\n    arr: Datum[],\n    xAccessor: (d: Datum) => number,\n    yAccessor: (d: Datum) => number,\n    options?: any,\n  ) => {\n    confidenceInterval: (N: number) => { lower: number; upper: number; x: number }[]\n    evaluateGrid: (N: number) => { x: number; y: number }[]\n  },\n  getOptions: (lineConfig: any) => any = getDefaultRegressionOptions,\n  getMinPoints: (lineConfig: any) => number = () => 2,\n): VChartSpecPipe => {\n  return ((spec: Partial<IScatterChartSpec>, context: SpecPipelineContext): Partial<IScatterChartSpec> => {\n    const result = { ...spec }\n    const { advancedVSeed } = context\n    const { chartType, regressionLine } = advancedVSeed\n    const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n    if (!regressionLine || !regressionLine[type]) {\n      return result\n    }\n\n    const lineList = array(regressionLine[type])\n\n    if (!result.extensionMark) {\n      result.extensionMark = []\n    }\n\n    lineList.forEach((line, lineIndex) => {\n      if (line.enable === false) {\n        return\n      }\n\n      const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n      const {\n        color,\n        lineWidth,\n        lineDash,\n        text,\n        textColor,\n        textFontSize,\n        textFontWeight,\n        confidenceIntervalOpacity,\n        shadowBlur,\n        shadowColor,\n        shadowOffsetX,\n        shadowOffsetY,\n        confidenceIntervalVisible = theme.confidenceIntervalVisible,\n      } = line as LinearRegressionLine\n\n      const childrenMarks: any[] = []\n\n      ;(result.extensionMark as any[]).push({\n        type: 'group',\n        interactive: false,\n        zIndex: 500,\n        name: `${type}-${lineIndex}`,\n        layoutType: 'region-relative',\n        dataId: (spec.data as any)?.id,\n        animation: false,\n        style: {\n          data: (datum: any, ctx: any) => {\n            const vchart = ctx.vchart as IVChart\n            const chart = vchart.getChart() as IChart\n            const s = chart.getAllSeries()[0] as ICartesianSeries\n\n            if (s) {\n              const rect = s.getRegion().getLayoutRect()\n              const segments: {\n                areaPoints?: { x: number; y: number; y1: number }[]\n                linePoints: { x: number; y: number }[]\n                color: string\n              }[] = []\n\n              if (rect.width === 0 || rect.height === 0) {\n                return segments\n              }\n\n              const yClamper = clamper(0, rect.height)\n              const colorAttrOptions = s.getColorAttribute()\n              const groups: (string | undefined)[] = s.getSeriesKeys()\n              const data = s.getViewData()?.latestData as Datum[]\n              const fieldX = s.fieldX?.[0]\n              const fieldY = s.fieldY?.[0]\n\n              if (!groups.length) {\n                groups.push(undefined)\n              }\n\n              groups.forEach((group) => {\n                const groupData = data.filter((d: Datum) => d[colorAttrOptions?.field] === group)\n\n                const minPoints = getMinPoints(line)\n\n                if (groupData.length < minPoints) {\n                  return\n                }\n                const { confidenceInterval, evaluateGrid } = regressionFunction(\n                  groupData,\n                  (datum: Datum) => datum?.[fieldX],\n                  (datum: Datum) => datum?.[fieldY],\n                  getOptions?.(line),\n                )\n                const N = Math.max(3, Math.floor(groupData.length / 4))\n                const mainColor = color ?? colorAttrOptions?.scale?.scale(group)\n\n                const lineData = evaluateGrid(N)\n                const linePoints: { x: number; y: number }[] = []\n\n                lineData.forEach((ld: Datum, index: number) => {\n                  const d = { [fieldX]: ld.x, [fieldY]: ld.y }\n                  const x = s.dataToPositionX(d)!\n                  const y = yClamper(s.dataToPositionY(d)!)\n\n                  if (segments.length && index === 0) {\n                    segments[segments.length - 1].linePoints.push({ x, y: NaN }) // 断开线段用的\n                  }\n\n                  linePoints.push({\n                    x,\n                    y,\n                  })\n                })\n\n                const segment: {\n                  color: string\n                  linePoints: { x: number; y: number }[]\n                  areaPoints?: { x: number; y: number; y1: number }[]\n                } = {\n                  color: mainColor,\n                  linePoints,\n                }\n\n                if (confidenceIntervalVisible) {\n                  const intervalData = confidenceInterval(N)\n                  const areaPoints: { x: number; y: number; y1: number }[] = []\n\n                  intervalData.map((datum: Datum, index: number) => {\n                    const d = { [fieldX]: datum.x, [fieldY]: datum.lower }\n                    const x = s.dataToPositionX(d)!\n                    const y = yClamper(s.dataToPositionY(d)!)\n                    const y1 = yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!)\n\n                    if (segments.length && index === 0) {\n                      segments[segments.length - 1].areaPoints!.push({ x, y: NaN, y1: NaN }) // 断开线段用的\n                    }\n\n                    areaPoints.push({ x, y, y1 })\n                  })\n\n                  segment.areaPoints = areaPoints\n                }\n\n                segments.push(segment)\n              })\n\n              return segments\n            }\n            return []\n          },\n        },\n        children: childrenMarks,\n      })\n\n      if (confidenceIntervalVisible) {\n        childrenMarks.push({\n          type: 'area',\n          interactive: false,\n          zIndex: 500,\n          dataId: (spec.data as any)?.id,\n          style: {\n            stroke: false,\n            lineWidth: lineWidth ?? theme.lineWidth,\n            lineDash: lineDash ?? theme.lineDash,\n            fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n            fill: 'red', // vrender bug，必须要设置一个全局的fill，才会绘制\n            segments: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode) {\n                const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n\n                if (data?.length) {\n                  return data.map((d: any) => {\n                    return {\n                      points: d.areaPoints ?? [],\n                      fill: d.color,\n                    }\n                  })\n                }\n              }\n\n              return []\n            },\n          },\n        })\n      }\n\n      childrenMarks.push({\n        type: 'line',\n        interactive: false,\n        zIndex: 500,\n        animation: false,\n        dataId: (spec.data as any)?.id,\n        style: {\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          stroke: 'red', // vrender bug，必须要设置一个全局的stroke，才会绘制\n          shadowBlur: shadowBlur ?? theme.shadowBlur,\n          shadowColor: shadowColor ?? theme.shadowColor,\n          shadowOffsetX: shadowOffsetX ?? theme.shadowOffsetX,\n          shadowOffsetY: shadowOffsetY ?? theme.shadowOffsetY,\n          segments: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode) {\n              const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n              if (data?.length) {\n                return data.map((d: any) => {\n                  return {\n                    points: d.linePoints,\n                    stroke: d.color,\n                  }\n                })\n              }\n            }\n\n            return []\n          },\n        },\n      })\n\n      if (!isNullish(text)) {\n        childrenMarks.push({\n          type: 'text',\n          interactive: false,\n          zIndex: 500,\n          animation: false,\n          dataId: (spec.data as any)?.id,\n          dataKey: () => {\n            return `regressionLine-label-${lineIndex}`\n          },\n          style: {\n            textAlign: 'end',\n            fill: textColor ?? theme.textColor,\n            fontSize: textFontSize ?? theme.textFontSize,\n            fontWeight: textFontWeight ?? theme.textFontWeight,\n            text: text,\n            x: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.x\n              }\n\n              return undefined\n            },\n            y: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.y\n              }\n\n              return undefined\n            },\n          },\n        })\n      }\n    })\n\n    return result\n  }) as VChartSpecPipe\n}\n\nconst getDefaultRegressionOptions = (\n  lineConfig: PolynomialRegressionLine | LinearRegressionLine | LogisticRegressionLine | LowessRegressionLine,\n) => {\n  const alpha = getAlphaByConfidenceLevel(lineConfig?.confidenceLevel)\n  return { alpha }\n}\n\nexport const linearRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'linearRegressionLine',\n  regressionLinear,\n  getDefaultRegressionOptions,\n)\nexport const lowessRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'lowessRegressionLine',\n  regressionLowess,\n  getDefaultRegressionOptions,\n)\nexport const polynomialRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'polynomialRegressionLine',\n  regressionPolynomial,\n  (lineConfig: PolynomialRegressionLine) => {\n    return { ...getDefaultRegressionOptions(lineConfig), degree: lineConfig.degree ?? 2 }\n  },\n  (lineConfig: PolynomialRegressionLine) => (lineConfig.degree ?? 2) + 1,\n)\nexport const logisticRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'logisticRegressionLine',\n  regressionLogistic,\n  getDefaultRegressionOptions,\n)\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  yLinear,\n  backgroundColor,\n  tooltipScatter,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  verticalCrosshairLine,\n  xLinear,\n  horizontalCrosshairLine,\n  pointStateHover,\n  initScatter,\n  progressive,\n  datasetScatter,\n  linearColor,\n  colorAdapter,\n  colorPointStyleFill,\n  colorLegend,\n  pivotColorLegend,\n  labelScatter,\n  scatterSize,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst scatter: VChartSpecPipeline = [\n  initScatter,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetScatter,\n  progressive,\n  xLinear,\n  yLinear,\n  scatterSize,\n  labelScatter,\n  tooltipScatter,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  horizontalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateHover,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n]\n\nconst pivotScatter: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initScatter,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetScatter,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yLinear),\n    scatterSize,\n    labelScatter,\n    tooltipScatter,\n    verticalCrosshairLine,\n    horizontalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateHover,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    linearRegressionLine,\n    lowessRegressionLine,\n    polynomialRegressionLine,\n    logisticRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const scatterSpecPipeline = [pivotAdapter(scatter, pivotScatter)]\n","/**\n * @description 适用于线图、面积图等的区块标注，计算标注区块的时候，只考虑点的大小\n */\nimport type { ICartesianSeries, ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationArea: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      positions: (data: Datum[], context: ICartesianSeries) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const maxX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n          const minY = 0\n          const maxY = regionRect.height\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const maxY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: (positionMap as any)[textPosition],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import { type ICartesianSeries, type ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationAreaBand: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      // coordinates: selectedData,\n      positions: (data: Datum[], context: ICartesianSeries & { _scaleConfig?: { bandPosition?: number } }) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const bandPosition = context?._scaleConfig?.bandPosition || 0\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldX.length ?? 0\n          const xBandWidth = xAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n          const startX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const endX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n\n          const width = endX - startX + xBandWidth\n          const middleX = (endX + startX) / 2 + xBandWidth * (0.5 - bandPosition)\n\n          const minX = middleX - width / 2\n          const maxX = middleX + width / 2\n\n          const minY = 0\n          const maxY = regionRect.height\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldY.length ?? 0\n          const yBandWidth = yAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const startY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const endY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const width = endY - startY + yBandWidth\n          const middleY = (endY + startY) / 2 + yBandWidth * (0.5 - bandPosition)\n\n          const minY = middleY - width / 2\n          const maxY = middleY + width / 2\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: positionMap[textPosition as 'bottom'],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationHorizontalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationHorizontalLine\n  const { annotationHorizontalLine } = annotation\n  const annotationHorizontalLineList = Array.isArray(annotationHorizontalLine)\n    ? annotationHorizontalLine\n    : [annotationHorizontalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n\n  const markLine = annotationHorizontalLineList.flatMap((annotationHorizontalLine) => {\n    const {\n      yValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'right',\n      textBaseline = 'bottom',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationHorizontalLine\n\n    const generateOneMarkLine = (y: string | number) => {\n      return {\n        y,\n        autoRange: true,\n        zIndex: ANNOTATION_Z_INDEX,\n        line: {\n          style: {\n            visible: lineVisible,\n            stroke: lineColor,\n            lineWidth: lineWidth,\n            lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n          },\n        },\n        label: {\n          confine: true,\n          text: text,\n          position: (positionMap as any)[textPosition || 'insideEnd'],\n          style: {\n            opacity: 0.95,\n            visible: true,\n            dy: 4,\n            stroke: textBackgroundColor,\n            lineWidth: 1,\n            textAlign: textAlign,\n            textBaseline: textBaseline,\n            fill: textColor,\n            fontSize: textFontSize,\n            fontWeight: textFontWeight,\n          },\n          labelBackground: {\n            visible: textBackgroundVisible,\n            padding: textBackgroundPadding,\n            style: {\n              opacity: 0.95,\n              dy: 4,\n              cornerRadius: textBackgroundBorderRadius,\n              fill: textBackgroundColor,\n              stroke: textBackgroundBorderColor,\n              lineWidth: textBackgroundBorderWidth,\n              fillOpacity: 1,\n            },\n          },\n        },\n        startSymbol: {\n          visible: theme?.startSymbolVisible ?? true,\n          symbolType: theme?.startSymbolType ?? 'triangleDown',\n          size: 5 + (lineWidth || 1),\n          style: {\n            dx: 3,\n            fill: lineColor,\n          },\n        },\n        endSymbol: {\n          visible: theme?.endSymbolVisible ?? false,\n          symbolType: theme?.endSymbolType ?? 'arrow',\n          size: 10 + (lineWidth || 1),\n          style: {\n            dx: -4,\n            fill: lineColor,\n          },\n        },\n      }\n    }\n    if (isArray(yValue) || isString(yValue) || isNumber(yValue)) {\n      const yValueArr = Array.isArray(yValue) ? yValue : [yValue]\n      return yValueArr.map(generateOneMarkLine)\n    }\n\n    return []\n  }) as IMarkLineSpec[]\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","import type { VChartSpecPipe } from 'src/types'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPoint: VChartSpecPipe = generateAnnotationPointPipe({})\n","import type { ISpec, IMarkPointSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, Selector, Selectors, SpecPipelineContext, VChartSpecPipe, VSeed } from 'src/types'\nimport { isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const generateAnnotationPointPipe = (options: {\n  findSelectedDatas?: (\n    dataset: Datum[],\n    selector: Selector | Selectors | undefined | null,\n    spec: ISpec,\n    context: SpecPipelineContext,\n  ) => Datum[]\n  generateMarkPoint?: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => IMarkPointSpec[] | undefined\n}) => {\n  const findSelectedDatas = options.findSelectedDatas ?? ((dataset, s) => dataset.filter((datum) => selector(datum, s)))\n  const generateMarkPoint =\n    options.generateMarkPoint ??\n    ((datum: Datum) => {\n      return [\n        {\n          coordinate: (data: Datum[]) => {\n            return data.find((item) => isSubset(datum, item))\n          },\n        },\n      ]\n    })\n\n  return ((spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    const { annotation, config } = advancedVSeed\n\n    if (!annotation || !annotation.annotationPoint) {\n      return spec\n    }\n\n    const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationPoint\n    const { annotationPoint } = annotation\n    const annotationPointList = Array.isArray(annotationPoint) ? annotationPoint : [annotationPoint]\n    const isHorizontalBar = isBarLikeChart(advancedVSeed as VSeed)\n    const defaultStyle = isHorizontalBar\n      ? {\n          textAlign: 'right',\n          textBaseline: 'middle',\n        }\n      : {\n          textAlign: 'center',\n          textBaseline: 'top',\n        }\n\n    const markPoint = annotationPointList.flatMap((annotationPoint) => {\n      const {\n        selector: selectorPoint,\n        text = '',\n        textColor = theme?.textColor ?? '#ffffff',\n        textFontSize = theme?.textFontSize ?? 12,\n        textFontWeight = theme?.textFontWeight ?? 400,\n        textAlign = defaultStyle.textAlign,\n        textBaseline = defaultStyle.textBaseline,\n        textBackgroundBorderColor = theme?.textBackgroundBorderColor,\n        textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n        textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n        textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n        textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n        textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n        offsetX = theme?.offsetX ?? 0,\n        offsetY = theme?.offsetY ?? 0,\n      } = annotationPoint\n\n      const dataset = advancedVSeed.dataset.flat()\n      const selectedData = selectorPoint ? findSelectedDatas(dataset, selectorPoint, spec, context) : []\n      const dx = -10 - (isHorizontalBar ? (textFontSize as number) : 0) // 由于vchart tag实现问题，需要设置这个强制偏移量\n      const dy = isHorizontalBar ? 0 : (textFontSize as number)\n      const markPointStyle = {\n        zIndex: ANNOTATION_Z_INDEX,\n        regionRelative: true,\n        itemLine: {\n          visible: false,\n        },\n        itemContent: {\n          offsetY,\n          offsetX,\n          confine: true,\n          text: {\n            text: text,\n            style: {\n              opacity: 0.95,\n              visible: true,\n              textAlign: textAlign,\n              textBaseline: textBaseline,\n              fill: textColor,\n              stroke: textBackgroundColor,\n              lineWidth: 1,\n              fontSize: textFontSize,\n              fontWeight: textFontWeight,\n              dx,\n              dy,\n            },\n            labelBackground: {\n              visible: textBackgroundVisible,\n              padding: textBackgroundPadding,\n              style: {\n                opacity: 0.95,\n                cornerRadius: textBackgroundBorderRadius ?? 4,\n                fill: textBackgroundColor,\n                stroke: textBackgroundBorderColor,\n                lineWidth: textBackgroundBorderWidth,\n                dx,\n                dy,\n              },\n            },\n          },\n        },\n      } as Partial<IMarkPointSpec>\n\n      return selectedData.reduce((res: IMarkPointSpec[], datum) => {\n        const marks = generateMarkPoint(datum, spec, context)\n\n        if (marks && marks.length) {\n          marks.forEach((mark) => {\n            res.push({\n              ...markPointStyle,\n              ...mark,\n            } as IMarkPointSpec)\n          })\n        }\n\n        return res\n      }, [])\n    }) as unknown as IMarkPointSpec[]\n\n    return {\n      ...spec,\n      markPoint,\n    } as ISpec\n  }) as VChartSpecPipe\n}\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationVerticalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationVerticalLine) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationVerticalLine\n  const { annotationVerticalLine } = annotation\n  const annotationVerticalLineList = Array.isArray(annotationVerticalLine)\n    ? annotationVerticalLine\n    : [annotationVerticalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n  const markLine = annotationVerticalLineList.flatMap((annotationVerticalLine) => {\n    const {\n      xValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'center',\n      textBaseline = 'top',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationVerticalLine\n\n    const generateOneMarkLine = (x: number | string) => ({\n      x,\n      autoRange: true,\n      zIndex: ANNOTATION_Z_INDEX,\n      line: {\n        style: {\n          visible: lineVisible,\n          stroke: lineColor,\n          lineStyle: lineStyle,\n          lineWidth: lineWidth,\n          lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n        },\n      },\n      label: {\n        confine: true,\n        text: text,\n        position: (positionMap as any)[textPosition || 'insideEnd'],\n        style: {\n          opacity: 0.95,\n          dx: 5,\n          visible: true,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            dx: 5,\n            cornerRadius: textBackgroundBorderRadius,\n            fill: textBackgroundColor,\n            fillOpacity: 1,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n          },\n        },\n      },\n      startSymbol: {\n        visible: theme?.startSymbolVisible ?? true,\n        symbolType: theme?.startSymbolType ?? 'triangleDown',\n        size: 5 + (lineWidth || 1),\n        style: {\n          dy: -3,\n          fill: lineColor,\n        },\n      },\n      endSymbol: {\n        visible: theme?.endSymbolVisible ?? false,\n        symbolType: theme?.endSymbolType ?? 'arrow',\n        size: 10 + (lineWidth || 1),\n        style: {\n          dy: 4,\n          fill: lineColor,\n        },\n      },\n    })\n\n    if (isArray(xValue) || isString(xValue) || isNumber(xValue)) {\n      const xValueArr = Array.isArray(xValue) ? xValue : [xValue]\n      return xValueArr.map(generateOneMarkLine)\n    }\n\n    return []\n  }) as IMarkLineSpec[]\n\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","import type { ICartesianSeries, IChart, ILineChartSpec, IVChart } from '@visactor/vchart'\nimport { array, clamper, Color as VUtilColor } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject } from 'remeda'\nimport type { AnnotationHorizontalLine, VChartSpecPipe, Color } from 'src/types'\n\ninterface SplitConfig {\n  points: { x: number; y: number }[]\n  splitCoordinate: number\n  lineStroke: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n  areaFill: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n}\n\nconst formatGradientStops = (stops: { color: string; offset: number }[]) => {\n  const firstInvalidateIndex = stops.findIndex((stop) => stop.offset < 0 || stop.offset > 1)\n\n  if (firstInvalidateIndex >= 0) {\n    if (stops[firstInvalidateIndex].offset > 1) {\n      const newStops = stops.slice(0, firstInvalidateIndex + 1)\n      newStops[newStops.length - 1].offset = 1\n\n      return newStops\n    }\n    const newStops = stops.slice(firstInvalidateIndex + 1)\n\n    newStops[0].offset = 0\n    return newStops\n  }\n\n  return stops\n}\n\nexport const splitLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { annotation, chartType, datasetReshapeInfo } = advancedVSeed\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  const splitLineConfig = array(annotation.annotationHorizontalLine).find(\n    (item) => !!(item as AnnotationHorizontalLine).splitLine,\n  ) as AnnotationHorizontalLine | undefined\n\n  const splitValue = +(splitLineConfig?.yValue as number | string)\n\n  if (Number.isNaN(splitValue) || !isNumber(splitValue)) {\n    return spec\n  }\n  const result = { ...spec } as Partial<ILineChartSpec>\n  const colorTheme = baseConfig?.color ?? {}\n  const colorConfig = {\n    positiveColor: colorTheme.positiveColor || 'red',\n    negativeColor: colorTheme.negativeColor || 'green',\n    ...(isPlainObject(splitLineConfig?.splitLine) ? splitLineConfig?.splitLine : {}),\n  }\n\n  const groupMark = {\n    type: 'group',\n    name: 'annotationHorizontalLine-splitLine',\n    zIndex: 300,\n    style: {\n      splitConfig: (datum: any, ctx: any) => {\n        const vchart = ctx.vchart as IVChart\n        const chart = vchart.getChart() as IChart\n        const lineSeries = chart.getAllSeries().find((s) => s.type === 'line' || s.type === 'area') as ICartesianSeries\n\n        if (!lineSeries) {\n          return\n        }\n        const lineMark = lineSeries.getMarkInName('line') ?? lineSeries.getMarkInName('area')\n\n        if (!lineMark) {\n          return\n        }\n        const lineGraphics = lineMark.getGraphics()\n\n        if (!lineGraphics || lineGraphics.length !== 1 || !lineGraphics[0]) {\n          return\n        }\n        const points = ((lineGraphics[0].attribute as any).points ?? []) as { x: number; y: number }[]\n\n        if ((lineGraphics[0].attribute as any).segments?.length) {\n          ;((lineGraphics[0].attribute as any).segments as any[]).forEach(\n            (seg: { points: { x: number; y: number }[] }) => {\n              seg.points.forEach((pt: { x: number; y: number }) => {\n                points.push({ x: pt.x, y: pt.y })\n              })\n            },\n          )\n        }\n\n        if (!points || !points.length) {\n          return\n        }\n        const scale = lineSeries.getYAxisHelper().getScale!(0)\n        const splitCoordinate = scale.scale(splitValue)\n        const minY = Math.min(...points.map((p) => p.y))\n        const maxY = Math.max(...points.map((p) => p.y))\n        const ratio = (splitCoordinate - minY) / (maxY - minY)\n\n        const lineStroke = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: colorConfig.positiveColor,\n              offset: ratio,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: ratio + 0.0000001,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const areaFill = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: new VUtilColor(colorConfig.positiveColor).setOpacity(0).toRGBA(),\n              offset: ratio,\n            },\n            {\n              offset: ratio + 0.0000001,\n              color: new VUtilColor(colorConfig.negativeColor).setOpacity(0).toRGBA(),\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const attrs: any = {\n          segments: null,\n          points,\n        }\n\n        if (lineGraphics[0].type === 'area') {\n          attrs.stroke = lineStroke\n          attrs.fill = areaFill\n        } else {\n          attrs.stroke = lineStroke\n        }\n\n        lineGraphics[0].setAttributes(attrs as unknown as Record<string, any>)\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        lineGraphics[0].setFinalAttributes?.(attrs)\n        const start = lineSeries.getRegion().getLayoutStartPoint()\n        const range = scale.range() as number[]\n\n        return {\n          points: points.map((entry) => ({ x: entry.x + start.x, y: entry.y + start.y })),\n          splitCoordinate: clamper(range[0], range[range.length - 1])(splitCoordinate as number) + start.y,\n          areaFill,\n          lineStroke,\n        } as SplitConfig\n      },\n    },\n    children: [\n      {\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        style: {\n          fillOpacity: 0.5,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { points, splitCoordinate } = parentNode.attribute.splitConfig as SplitConfig\n\n              return points.map((entry: { x: number; y: number }) => {\n                return {\n                  ...entry,\n                  y1: splitCoordinate,\n                }\n              })\n            }\n\n            return []\n          },\n          fill: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { areaFill } = parentNode.attribute.splitConfig as SplitConfig\n\n              return areaFill\n            }\n\n            return\n          },\n        },\n      },\n    ],\n  }\n\n  if (!result.customMark) {\n    result.customMark = []\n  }\n\n  ;(result.customMark as any[]).push(groupMark)\n\n  const seriesSpec =\n    result.type === 'line' || result.type === 'area'\n      ? result\n      : result.series?.find((s) => s.type === 'line' || s.type === 'area')\n\n  if (seriesSpec) {\n    if (!seriesSpec.point) {\n      seriesSpec.point = {}\n    }\n    if (!seriesSpec.line) {\n      seriesSpec.line = {}\n    }\n\n    if (!seriesSpec.point.style) {\n      seriesSpec.point.style = {}\n    }\n    if (!seriesSpec.line.style) {\n      seriesSpec.line.style = {}\n    }\n\n    const measureValueKey = datasetReshapeInfo[0].foldInfo.measureValue\n\n    seriesSpec.point.style.fill = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    seriesSpec.line.style.stroke = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    if (seriesSpec.label && (seriesSpec.label as any).visible && isNullish((seriesSpec.label as any).style?.fill)) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ;(seriesSpec.label as any).style = {\n        ...(seriesSpec.label as any).style,\n        fill: (datum: any) => {\n          return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n        },\n      }\n    }\n  }\n\n  return result\n}\n","import type { Datum } from 'src/types'\n\nexport const isSubset = (sub: Datum, obj: Datum, excludeMeasuresIds?: string[]) => {\n  return Object.entries(sub).every(([key, value]) => {\n    if (excludeMeasuresIds && excludeMeasuresIds.includes(key)) {\n      return false\n    }\n\n    if (typeof value === 'string') {\n      return obj[key] === value\n    }\n    if (typeof value === 'number') {\n      return obj[key] === value\n    }\n    return true\n  })\n}\n\nexport const ANNOTATION_AREA_TEXT_STYLE_BY_POSITION = {\n  top: {\n    textAlign: 'center',\n    textBaseline: 'top',\n  },\n  topRight: {\n    textAlign: 'right',\n    textBaseline: 'top',\n  },\n  topLeft: {\n    textAlign: 'left',\n    textBaseline: 'top',\n  },\n  bottom: {\n    textAlign: 'center',\n    textBaseline: 'bottom',\n  },\n  bottomLeft: {\n    textAlign: 'left',\n    textBaseline: 'bottom',\n  },\n  bottomRight: {\n    textAlign: 'right',\n    textBaseline: 'bottom',\n  },\n  left: {\n    textAlign: 'left',\n    textBaseline: 'middle',\n  },\n  right: {\n    textAlign: 'right',\n    textBaseline: 'middle',\n  },\n}\n","import type { ICartesianBandAxisSpec } from '@visactor/vchart'\nimport type { XBandAxis } from 'src/types'\nimport { AXIS_LABEL_SPACE } from 'src/pipeline/utils'\n\nexport const bandAxisStyle = (config: XBandAxis) => {\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    labelAutoHide,\n    labelAutoHideGap,\n    labelAutoLimit,\n    labelAutoLimitLength = 80,\n    labelAutoRotate,\n    labelAutoRotateAngleRange,\n  } = config\n\n  return {\n    type: 'band',\n    sampling: !(labelAutoHide || labelAutoRotate || labelAutoLimit),\n    visible,\n    hover: true,\n    label: {\n      visible: label?.visible,\n      flush: true,\n      space: AXIS_LABEL_SPACE,\n      style: {\n        maxLineWidth: labelAutoLimitLength,\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n\n      // 防重叠相关\n      minGap: labelAutoHideGap,\n      autoHide: labelAutoHide,\n      autoHideMethod: 'greedy',\n      autoHideSeparation: labelAutoHideGap,\n      autoLimit: labelAutoLimit,\n      autoRotate: labelAutoRotate,\n      autoRotateAngle: labelAutoRotateAngleRange,\n      lastVisible: true,\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText,\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n  } as Partial<ICartesianBandAxisSpec>\n}\n","import { isEmpty, isNullish } from 'remeda'\nimport { autoFormatter } from 'src/pipeline/utils'\nimport type { Formatter, NumFormat } from 'src/types'\n\nexport const createLinearFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return autoFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return autoFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n\nexport const createLinearPercentFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n  percentFormatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return percentFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return percentFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n","import type { YLinearAxis } from 'src/types'\nimport { AXIS_LABEL_SPACE, LINEAR_AXIS_INNER_OFFSET_TOP } from 'src/pipeline/utils'\n\nexport interface LinearAxisStyleConfig extends YLinearAxis {\n  orient: 'left' | 'right' | 'top' | 'bottom'\n  formatMethod?: (value: string) => string\n  titleText?: string\n  id?: string\n  seriesId?: string | string[]\n  sync?: {\n    axisId: string\n    zeroAlign: boolean\n  }\n  isPivot?: boolean\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const linearAxisStyle = (config: LinearAxisStyleConfig): any => {\n  const {\n    orient,\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n    formatMethod,\n    titleText,\n    id,\n    seriesId,\n    sync,\n    isPivot = false,\n  } = config\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const axisConfig: any = {\n    ...(isPivot\n      ? {\n          range: {\n            min,\n            max,\n          },\n        }\n      : {\n          min,\n          max,\n        }),\n    visible,\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient,\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod,\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: titleText,\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n  }\n\n  // Add innerOffset based on orientation\n  if (orient === 'bottom' || orient === 'top') {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.innerOffset = {\n      right: LINEAR_AXIS_INNER_OFFSET_TOP,\n    }\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.innerOffset = {\n      top: LINEAR_AXIS_INNER_OFFSET_TOP,\n    }\n  }\n\n  // Add optional fields\n  if (id) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.id = id\n  }\n  if (seriesId) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.seriesId = seriesId\n  }\n  if (sync) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.sync = sync\n  }\n\n  return axisConfig\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    type: 'linear',\n    orient: 'radius',\n    visible: false,\n    zero: true,\n    nice: false,\n  })\n\n  return result\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { Dimensions, MeasureTree } from 'src/types'\n\nexport const defaultTitleText = (measures: MeasureTree, dimensions: Dimensions, idList: string[] = []) => {\n  const allMeasures = findAllMeasures(measures)\n  return idList\n    .map((id) => {\n      const alias = [...allMeasures, ...dimensions].find((f) => f.id === id)?.alias || ''\n      return alias\n    })\n    .join(' & ')\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray, isNull } from '@visactor/vutils'\nimport { bandAxisStyle } from './bandAxisStyle'\n\nexport const xBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures, dimensions, encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.xAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { labelAutoLimitLength = 80 } = config\n\n  const onlyMeasureId = (encoding.x || []).filter((v) => v !== MeasureId).length === 0\n  const bandAxis = bandAxisStyle(config)\n\n  bandAxis.orient = 'bottom'\n  bandAxis.maxHeight = labelAutoLimitLength + 60\n  bandAxis.paddingInner = [0.15, 0.1]\n  bandAxis.paddingOuter = [0.075, 0.1]\n\n  if (isNull(bandAxis.title?.text)) {\n    bandAxis.title.text = defaultTitleText(measures, dimensions, encoding.x as string[])\n  }\n\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XLinearAxis } from 'src/types'\nimport { createNumFormatter, isAreaPercent, isBarPercent, isColumnPercent, isPivotChart } from 'src/pipeline/utils'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\n\nexport const xLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { encoding, dimensions, measures } = advancedVSeed\n  const { chartType } = vseed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.xAxis ?? {}) as XLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const { autoFormat, numFormat = {} } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const formatMethod = (value: string) => {\n    if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n      return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n    }\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = config.title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[])\n\n  const linearAxis = linearAxisStyle({\n    ...config,\n    orient: 'bottom',\n    formatMethod,\n    titleText,\n    isPivot,\n  })\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray, isNull } from '@visactor/vutils'\nimport { bandAxisStyle } from './bandAxisStyle'\n\nexport const yBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures, dimensions, encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.yAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { labelAutoLimitLength = 80 } = config\n\n  const onlyMeasureId = (encoding.y || []).filter((v) => v !== MeasureId).length === 0\n\n  const bandAxis = bandAxisStyle(config)\n\n  bandAxis.type = 'band'\n  bandAxis.orient = 'left'\n  bandAxis.maxWidth = labelAutoLimitLength + 60\n  if (bandAxis.label) {\n    bandAxis.label.containerAlign = 'right'\n  }\n  bandAxis.paddingInner = [0.15, 0.1]\n  bandAxis.paddingOuter = [0.075, 0.1]\n\n  if (isNull(bandAxis.title?.text)) {\n    bandAxis.title.text = defaultTitleText(measures, dimensions, encoding.y as string[])\n  }\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { createNumFormatter, isAreaPercent, isBarPercent, isColumnPercent, isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\n\nexport const yLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures, dimensions, encoding } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.yAxis ?? {}) as YLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const { autoFormat, numFormat = {} } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const formatMethod = (value: string) => {\n    if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n      return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n    }\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = config.title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[])\n\n  const linearAxis = linearAxisStyle({\n    ...config,\n    orient: 'left',\n    formatMethod,\n    titleText,\n    isPivot,\n  })\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { BackgroundColor, VChartSpecPipe } from 'src/types'\n\nexport const backgroundColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { backgroundColor: BackgroundColor }\n\n  const { backgroundColor } = baseConfig\n\n  return {\n    ...result,\n    background: backgroundColor,\n  }\n}\n","import { isNullish } from 'remeda'\nimport type { BarGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const barGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barGapInGroup = advancedVSeed.config?.[chartType as 'columnParallel']?.barGapInGroup as BarGapInGroup\n\n  if (!isNullish(barGapInGroup)) {\n    return {\n      ...spec,\n      barGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import { isNullish } from 'remeda'\nimport type { BarMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const barMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barMaxWidth = advancedVSeed.config?.[chartType as 'column']?.barMaxWidth as BarMaxWidth\n\n  if (!isNullish(barMaxWidth)) {\n    return {\n      ...spec,\n      barMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const color: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const colorItems = unfoldInfo.colorItems\n  const colorIdMap = unfoldInfo.colorIdMap\n\n  const { color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  result.color = {\n    type: 'ordinal',\n    domain: colorItems,\n    range: colorScheme,\n    specified: createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems),\n  } as ILineChartSpec['color']\n  return result\n}\n\nexport const createSpecifiedForColorMapping = (\n  colorMapping?: Record<string, string>,\n  colorIdMap?: Record<string, { id: string; alias: string }>,\n  colorItems?: string[],\n) => {\n  if (!colorMapping || !colorIdMap || !colorItems) {\n    return undefined\n  }\n\n  const matchedList: string[] = []\n\n  // 名称越长优先级越高: 按名称长度降, 优先匹配名称长的, 避免一个短的名称匹配到了超多个长的\n  const colors = Object.entries(colorMapping).sort((a, b) => b[0].length - a[0].length)\n  // 准确匹配\n  const accurateMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n\n      const accurateMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey === name || colorObj.alias === name || colorObj.id === name\n      })\n      accurateMatchedList.forEach((item) => {\n        prev[item[0]] = colorValue\n        matchedList.push(name)\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 模糊匹配\n  const fuzzyMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n      if (matchedList.includes(name)) {\n        return prev\n      }\n\n      const fuzzyMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey.includes(name) || colorObj.alias.includes(name) || colorObj.id.includes(name)\n      })\n      fuzzyMatchedList.forEach((item) => {\n        // 已经匹配有值, 则不重复匹配\n        if (prev[item[0]]) {\n          return\n        }\n        prev[item[0]] = colorValue\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 合并, 准确匹配的优先级高\n  return {\n    ...fuzzyMap,\n    ...accurateMap,\n  }\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedVSeed, PivotChartSpecPipe, VChartSpecPipe, VSeed, Pipe, SpecPipelineContext } from 'src/types'\n\nexport function colorAdapter(ordinalPipe: PivotChartSpecPipe, linearPipe: PivotChartSpecPipe): PivotChartSpecPipe\nexport function colorAdapter(ordinalPipe: VChartSpecPipe, linearPipe: VChartSpecPipe): VChartSpecPipe\nexport function colorAdapter<TSpec>(\n  ordinalPipe: Pipe<TSpec, SpecPipelineContext>,\n  linearPipe: Pipe<TSpec, SpecPipelineContext>,\n) {\n  return (spec: Partial<TSpec>, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    if (isLinearColor(advancedVSeed, vseed)) {\n      return linearPipe(spec, context)\n    }\n    return ordinalPipe(spec, context)\n  }\n}\n\nexport const isLinearColor = <T extends AdvancedVSeed, U extends VSeed>(advancedVSeed: T, vseed: U) => {\n  const { encoding } = advancedVSeed\n  const measures = vseed.measures || advancedVSeed.measures\n  const measureIdList = findAllMeasures(measures).map((measure) => measure.id)\n  const { color } = encoding\n  return color?.length === 1 && measureIdList.includes(color[0])\n}\n\nexport const getColorMeasureId = <T extends AdvancedVSeed, U extends VSeed>(\n  advancedVSeed: T,\n  vseed: U,\n): string | undefined => {\n  if (isLinearColor(advancedVSeed, vseed)) {\n    const { encoding } = advancedVSeed\n    const { color } = encoding\n    return color?.[0]\n  }\n  return undefined\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorAreaStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IAreaChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.area?.style) {\n        result.area.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBarStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBarChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.bar?.style) {\n        result.bar.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorLineStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.line?.style) {\n        result.line.style.stroke = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPieStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IPieChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.pie?.style) {\n        result.pie.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPointStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.point?.style) {\n        result.point.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isLinearColor } from './colorAdapter'\nimport type { VChartSpecPipe } from 'src/types/pipeline/spec/spec'\n\nexport const colorRoseStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IRoseChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.rose?.style) {\n        result.rose.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: [\n      {\n        dataId: id,\n        fields: [unfoldInfo.encodingColor],\n      },\n    ],\n  }\n\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const datasetPivot: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const records = dataset.reduce((pre, cur, index) => {\n    const id = datasetReshapeInfo[index].id\n    pre[id] = cur\n    return pre\n  }, {})\n  return {\n    ...result,\n    records: records,\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetXY: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n  const angle = unfoldInfo.encodingAngle\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetYX: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n\n  const angle = unfoldInfo.encodingAngle\n  const y = unfoldInfo.encodingY\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (y) {\n    const order = orderMapping[y]\n    if (order) {\n      fields[y] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[y] = {\n        sortIndex: 0,\n      }\n    }\n  }\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ILineSeriesSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const progressive: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as ILineSeriesSpec\n  // const { advancedVSeed } = context\n  // const { dataset = [] } = advancedVSeed\n  // const size = dataset.length\n\n  // if (size < 5000) {\n  //   return result\n  // }\n\n  result.large = false\n  result.largeThreshold = Infinity\n  result.progressiveStep = 400\n  result.progressiveThreshold = Infinity\n\n  return result\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initArea: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IAreaChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'area'\n  result.direction = 'vertical'\n  result.yField = foldInfo.measureValue\n\n  result.xField = unfoldInfo.encodingX\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n  result.yField = unfoldInfo.encodingY\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumn: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { PivotChartSpecPipe } from 'src/types'\n\nexport const initPivot: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    animation: true,\n    rows: [],\n    columns: [],\n    indicators: [],\n    records: [],\n    widthMode: 'standard',\n    autoFillWidth: true,\n    defaultHeaderColWidth: 'auto',\n    defaultColWidth: 240,\n\n    heightMode: 'standard',\n    autoFillHeight: true,\n    defaultRowHeight: 180,\n    defaultHeaderRowHeight: 'auto',\n\n    indicatorsAsCol: false,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    corner: {\n      titleOnDimension: 'row',\n    },\n    animationAppear: {\n      duration: 600,\n      type: 'all',\n      direction: 'row',\n    },\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { createFormatter, createFormatterByMeasure, DATUM_HIDE_KEY, findMeasureById } from '../../../../utils'\nimport type {\n  Datum,\n  Dimension,\n  Dimensions,\n  Encoding,\n  FoldInfo,\n  Formatter,\n  Label,\n  Measure,\n  Measures,\n  NumFormat,\n  VChartSpecPipe,\n} from 'src/types'\nimport { isNumber, merge, uniqueBy } from 'remeda'\nimport { selector } from 'src/dataSelector'\nimport { MeasureId } from 'src/dataReshape/constant'\n\nexport const label: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as ILineChartSpec['label']\n\n  return result\n}\n\nexport const generateMeasureValue = (\n  value: number | string,\n  measure: Measure,\n  labelAutoFormat?: boolean,\n  numFormat: NumFormat = {},\n) => {\n  const format = merge(numFormat, measure.numFormat || measure.format)\n  const mergedMeasure = { ...measure, numFormat: format, autoFormat: labelAutoFormat || measure.autoFormat }\n\n  const formatter = createFormatterByMeasure(mergedMeasure)\n  return formatter(value)\n}\n\nexport const generateMeasurePercent = (value: number | string, sum: number, formatter: Formatter) => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const percentValue = num / sum\n  return formatter(percentValue)\n}\n\nexport const buildLabel = (\n  label: Label,\n  vseedMeasures: Measures = [],\n  vseedDimensions: Dimensions = [],\n  advancedVSeedDimensions: Dimensions,\n  advancedVSeedMeasures: Measures,\n  encoding: Encoding,\n  foldInfoList: FoldInfo[],\n) => {\n  const {\n    enable,\n    wrap,\n    showValue,\n    showValuePercent,\n    showDimension,\n    labelOverlap,\n    labelColorSmartInvert,\n    labelStroke,\n    labelColor,\n    labelFontSize,\n    labelFontWeight,\n    labelBackgroundColor,\n    labelPosition,\n    autoFormat,\n    numFormat = {},\n  } = label\n\n  const hasDimLabelEncoding = vseedDimensions.some((item) => encoding.label?.includes(item.id))\n\n  const labelDims = uniqueBy(\n    hasDimLabelEncoding\n      ? vseedDimensions.filter((item) => encoding.label?.includes(item.id))\n      : showDimension\n        ? advancedVSeedDimensions.filter((d) => d.id !== MeasureId && d.encoding !== 'row' && d.encoding !== 'column')\n        : [],\n    (item: Dimension) => item.id,\n  )\n\n  const labelMeas = uniqueBy(\n    vseedMeasures.filter((item) => encoding.label?.includes(item.id)),\n    (item: Measure) => item.id,\n  )\n\n  const percentFormat: NumFormat = merge(numFormat, {\n    type: 'percent',\n  } as NumFormat)\n\n  const percentFormatter = createFormatter(percentFormat)\n\n  const result = {\n    visible: enable,\n    dataFilter: (data: Datum[]) => {\n      return data.filter((entry) => {\n        return entry.data?.[DATUM_HIDE_KEY] !== true && selector(entry.data as Datum, label.selector, 'Or')\n      })\n    },\n    formatMethod: (_: unknown, datum: Datum) => {\n      const result = []\n\n      const dimLabels = labelDims.map((item: Dimension) => {\n        const id = item.id\n        return datum[id] as number | string\n      })\n\n      const meaLabels = labelMeas.map((item: Measure) =>\n        generateMeasureValue(datum[item.id] as number | string, item, autoFormat, numFormat),\n      )\n\n      result.push(...dimLabels)\n\n      foldInfoList.forEach((foldInfo) => {\n        const { measureId, measureValue, statistics } = foldInfo\n        const measure = findMeasureById(advancedVSeedMeasures, datum[measureId] as string)\n        if (measure) {\n          const measureValueLabel = generateMeasureValue(\n            datum[measureValue] as number | string,\n            measure,\n            autoFormat,\n            numFormat,\n          )\n          // 饼图/环图需要使用实际占比数据\n          const measurePercentLabel = isNumber(datum['__VCHART_ARC_RATIO'])\n            ? generateMeasurePercent(datum['__VCHART_ARC_RATIO'], 1, percentFormatter)\n            : generateMeasurePercent(datum[measureValue] as number | string, statistics.sum, percentFormatter)\n          if (showValue) {\n            result.push(measureValueLabel)\n          }\n          if (showValuePercent) {\n            result.push(measurePercentLabel)\n          }\n        }\n      })\n\n      result.push(...meaLabels)\n\n      if (wrap) {\n        return result\n      }\n      return result.join(' ')\n    },\n    position: labelPosition,\n    style: {\n      stroke: labelStroke,\n      fill: labelColor,\n      fontSize: labelFontSize,\n      fontWeight: labelFontWeight,\n      background: labelBackgroundColor,\n    },\n    smartInvert: labelColorSmartInvert,\n  }\n\n  if (labelOverlap) {\n    ;(result as any).overlap = {\n      hideOnHit: true,\n      clampForce: true,\n    }\n  }\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, PieLabel, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: PieLabel }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as IPieChartSpec['label']\n  if (label.labelLayout) {\n    ;(result.label as any)!.layout = {\n      align: label.labelLayout,\n    }\n  }\n  return result\n}\n","import { createFormatterByMeasure, findTreeNodesBy } from 'src/pipeline/utils'\nimport type { ColorLegend, Measure, VChartSpecPipe } from 'src/types'\n\nexport const colorLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType, measures = [] } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: ColorLegend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight,\n    railBackgroundColor,\n    handlerBorderColor,\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  result.legends = {\n    type: 'color',\n    visible: enable,\n    orient,\n    position: legendPosition,\n    padding: 0,\n    field: unfoldInfo.encodingColor,\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n    rail: {\n      style: {\n        fill: railBackgroundColor,\n      },\n    },\n    handler: {\n      style: {\n        outerBorder: {\n          stroke: handlerBorderColor,\n        },\n      },\n    },\n  }\n  const colorMeasure = findTreeNodesBy<Measure>(measures, (m) => m.encoding === 'color')?.[0]\n  if (colorMeasure) {\n    const formatter = createFormatterByMeasure(colorMeasure)\n    result.legends.handlerText!.formatter = formatter\n  }\n  return result\n}\n","import type { Legend, VChartSpecPipe } from 'src/types'\n\nexport const discreteLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    pagerIconColor,\n    pagerIconDisableColor,\n    labelFontWeight,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n  const labelTextColor = labelColor || labelFontColor\n\n  result.legends = {\n    type: 'discrete',\n    visible: enable,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    autoPage: true,\n    orient,\n    position: legendPosition,\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelTextColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: (item) => {\n          return {\n            symbolType: shapeType,\n            size: border ? 8 : 10,\n            fillOpacity: 1,\n            opacity: 1,\n            stroke: false,\n            outerBorder: border\n              ? {\n                  stroke: item.shape.fill,\n                  distance: 3,\n                  lineWidth: 1,\n                }\n              : null,\n          }\n        },\n        state: {\n          unSelected: {\n            opacity: 0.2,\n            fillOpacity: 1, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      label: {\n        formatMethod: (value) => {\n          return unfoldInfo.colorIdMap[String(value)]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n        state: {\n          unSelected: {\n            fill: labelColor || labelFontColor, // 覆盖vchart里面的默认值\n            fillOpacity: 0.8, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n          unSelectedHover: {\n            fill: null,\n          },\n        },\n      },\n    },\n    pager: {\n      textStyle: {\n        fill: labelTextColor,\n      },\n      handler: {\n        style: {\n          fill: pagerIconColor,\n        },\n        state: {\n          disable: {\n            fill: pagerIconDisableColor,\n          },\n        },\n      },\n    },\n    padding: 0,\n  }\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColorLegend: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const max = Math.max(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMin))\n  const min = Math.min(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMax))\n  const { legend, color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    visible: enable,\n    type: 'color',\n    orient,\n    position: legendPosition,\n\n    colors: linearColorScheme || colorScheme || [],\n    value: [min, max],\n    min: min,\n    max: max,\n\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n  } as unknown\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { unique } from 'remeda'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\nimport { createSpecifiedForColorMapping } from '../color/color'\n\nexport const pivotDiscreteLegend: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const colorItems = unique(\n    datasetReshapeInfo.flatMap((d) => {\n      return d.unfoldInfo.colorItems\n    }),\n  )\n\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  const { legend, color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  const colorSpecified = createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems)\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    padding: 0,\n    visible: enable,\n    type: 'discrete',\n    orient,\n    position: legendPosition,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    data: colorItems.map((d: string, index: number) => {\n      const color = colorSpecified?.[d] ?? colorScheme?.[index % colorScheme.length]\n      return {\n        label: d,\n        shape: {\n          outerBorder: border\n            ? {\n                stroke: color,\n                distance: 3,\n                lineWidth: 1,\n              }\n            : undefined,\n          fill: color,\n        },\n      }\n    }),\n\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelColor || labelFontColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: {\n          symbolType: shapeType,\n          size: border ? 8 : 10,\n        },\n      },\n      label: {\n        formatMethod: (value: string) => {\n          return colorIdMap[value]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n        },\n      },\n    },\n  }\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { AreaStyle, Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { groupBy, isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const areaStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, datasetReshapeInfo, dataset } = advancedVSeed\n  const { areaStyle, lineStyle } = markStyle\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const result = {\n    ...spec,\n    area: {\n      visible: true,\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(areaStyle) || isEmpty(areaStyle)) {\n    return result\n  }\n\n  const areaStyles = (Array.isArray(areaStyle) ? areaStyle : [areaStyle]) as AreaStyle[]\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const group = unfoldInfo.encodingColorId\n\n  const areaGroups = groupBy(dataset, (d) => d[group ?? ''] as string)\n\n  const customMap = areaStyles.reduce<object>((result, style, index) => {\n    const { areaColor, areaColorOpacity, areaVisible = true } = style\n\n    const curveType = getCurveType(context.vseed, lineStyles[index]?.lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineStyles[index]?.lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          const lineData = areaGroups[datum[group ?? ''] as string]\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          curveType,\n          curveTension,\n          visible: areaVisible,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    area: {\n      ...result.area,\n      visible: true,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BarStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const barStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, dataset = [] } = advancedVSeed\n  const { barStyle } = markStyle\n\n  const showStroke = dataset.length <= 100\n\n  const result = {\n    ...spec,\n    bar: {\n      style: {\n        visible: true,\n        fillOpacity: 1,\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  } as IBarChartSpec\n\n  if (isNullish(barStyle) || isEmpty(barStyle)) {\n    return result\n  }\n\n  const barStyles = (Array.isArray(barStyle) ? barStyle : [barStyle]) as BarStyle[]\n\n  const customMap = barStyles.reduce<object>((result, style, index) => {\n    const {\n      barBorderColor,\n      barBorderStyle,\n      barBorderWidth = 1,\n      barColor,\n      barColorOpacity,\n      barBorderOpacity,\n      barRadius,\n      barVisible = true,\n    } = style\n\n    const lineDash = barBorderStyle === 'dashed' ? [5, 2] : barBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: barVisible,\n          fill: barColor,\n          fillOpacity: barColorOpacity,\n          cornerRadius: barRadius,\n          lineWidth: barBorderWidth,\n          stroke: barBorderColor,\n          strokeOpacity: barBorderOpacity,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  result.bar!.state = {\n    ...result.bar!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import { isRadar } from 'src/pipeline/utils'\nimport type { VSeed } from 'src/types'\n\nexport const getCurveType = (vseed: VSeed, lineSmooth: boolean = false): string => {\n  if (!lineSmooth) {\n    return 'linear'\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 'catmullRomClosed' : 'monotone'\n}\n\nexport const getCurveTension = (vseed: VSeed, lineSmooth: boolean = false): number => {\n  if (!lineSmooth) {\n    return 0\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 0.4 : 0\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const lineStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { lineStyle } = markStyle\n  const result = {\n    ...spec,\n    line: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(lineStyle) || isEmpty(lineStyle)) {\n    return result\n  }\n\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const customMap = lineStyles.reduce<object>((result, style, index) => {\n    const { lineColor, lineColorOpacity, lineSmooth, lineStyle, lineWidth = 2, lineVisible = true } = style\n\n    const dashSegment = lineWidth * 2\n    const dashGap = lineWidth\n\n    const lineDash =\n      lineStyle === 'dashed' ? [dashSegment, dashSegment] : lineStyle === 'dotted' ? [dashGap / 2, dashGap * 2] : [0, 0]\n\n    const curveType = getCurveType(context.vseed, lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (\n          _: Datum,\n          node: {\n            renderNode: {\n              context: {\n                data: Datum[]\n              }\n            }\n          },\n        ) => {\n          const lineData = node.renderNode.context.data\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          visible: lineVisible,\n          curveType: curveType,\n          curveTension: curveTension,\n          strokeOpacity: lineColorOpacity,\n          stroke: lineColor,\n          lineWidth: lineWidth,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    line: {\n      ...result.line,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pieStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n  const config = advancedVSeed.config?.[chartType as 'pie']\n\n  const result = {\n    ...spec,\n    pie: {\n      style: {\n        stroke: config?.backgroundColor ?? '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n    },\n  } as Required<IPieChartSpec>\n\n  if ((spec as IPieChartSpec).outerRadius) {\n    result.pie.state = {\n      hover: {\n        outerRadius: ((spec as IPieChartSpec).outerRadius as number) * 1.1,\n      },\n    }\n  }\n\n  if (config?.cornerRadius) {\n    result.pie.style!.cornerRadius = config.cornerRadius\n  }\n\n  return result\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\n\nexport const pointStateDimensionHover: VChartSpecPipe = (spec) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        dimension_hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          outerBorder: {\n            lineWidth: 4,\n            strokeOpacity: 0.25,\n            distance: 2,\n          },\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n\nexport const pointStateHover: VChartSpecPipe = (spec, context) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          stroke: (datum: Datum, context: unknown) => {\n            const field = unfoldInfo.encodingColorId\n            const color = (context as any).seriesColor(datum[field] as string)\n            return color\n          },\n          fillOpacity: 0.6,\n          lineWidth: 1,\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, PointStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const pointStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { pointStyle } = markStyle\n  const result = {\n    ...spec,\n    point: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(pointStyle) || isEmpty(pointStyle)) {\n    return result\n  }\n\n  const pointStyles = (Array.isArray(pointStyle) ? pointStyle : [pointStyle]) as PointStyle[]\n\n  const customMap = pointStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          innerBorder: {\n            stroke: pointBorderColor,\n            lineWidth: pointBorderWidth,\n            distance: (pointBorderWidth || 0) / 2,\n            lineDash: lineDash,\n          },\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    point: {\n      ...result.point,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const roseStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n\n  const result = {\n    ...spec,\n    rose: {\n      style: {},\n    },\n  } as Required<IRoseChartSpec>\n\n  return {\n    ...result,\n    rose: {\n      style: {\n        stroke: '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          lineWidth: 1,\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const percent: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.percent = true\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { DimensionLinkage, PivotChartSpecPipe } from 'src/types'\n\nexport const dimensionLinkage: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = (advancedVSeed.config?.[chartType as 'line']?.dimensionLinkage ?? {}) as DimensionLinkage\n\n  if (config.enable === false) {\n    return spec\n  }\n\n  const indicators = spec.indicators\n  const labelHoverOnAxis = {}\n  const chartSpec = (indicators as any)?.[0]?.chartSpec as ILineChartSpec\n  const crosshair = chartSpec?.crosshair as ICartesianCrosshairSpec\n\n  if (crosshair?.xField) {\n    const labelFormat = crosshair.xField.label?.formatMethod\n    ;(labelHoverOnAxis as any).bottom = {\n      visible: config.showLabel ?? crosshair.xField.label?.visible ?? true,\n      background: crosshair.xField.label?.labelBackground,\n      textStyle: crosshair.xField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n  if (crosshair?.yField) {\n    const labelFormat = crosshair.yField.label?.formatMethod\n    ;(labelHoverOnAxis as any).left = {\n      visible: config.showLabel ?? crosshair.yField.label?.visible ?? true,\n      background: crosshair.yField.label?.labelBackground,\n      textStyle: crosshair.yField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n\n  if (indicators && indicators.length) {\n    indicators.forEach((ind) => {\n      const crosshair = (ind as any)?.chartSpec?.crosshair as ICartesianCrosshairSpec\n\n      if (crosshair?.xField) {\n        crosshair.xField.label = { visible: false }\n      }\n\n      if (crosshair?.yField) {\n        crosshair.yField.label = { visible: false }\n      }\n    })\n  }\n\n  spec.chartDimensionLinkage = {\n    showTooltip: config.showTooltip ?? (chartSpec?.tooltip?.dimension?.visible as boolean) ?? true,\n    heightLimitToShowTooltipForEdgeRow: (spec.defaultRowHeight as number) / 2,\n    widthLimitToShowTooltipForEdgeColumn: (spec.defaultColWidth as number) / 2,\n    labelHoverOnAxis,\n  }\n\n  return spec\n}\n","import type {\n  PivotChartSpecPipe,\n  PivotChartSpecPipeline,\n  SpecPipe,\n  SpecPipelineContext,\n  VChartSpecPipe,\n  VChartSpecPipeline,\n} from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\nimport type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline, isPivotChart } from '../../../../utils'\n\nexport const pivotAdapter = (pipeline: VChartSpecPipeline, pivotPipeline: PivotChartSpecPipeline): SpecPipe => {\n  const adapted = ((spec: unknown, context: SpecPipelineContext) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n    if (usePivotChart) {\n      return execPipeline<PivotChartConstructorOptions, SpecPipelineContext>(\n        pivotPipeline,\n        context,\n        spec as Partial<PivotChartConstructorOptions>,\n      )\n    }\n    return execPipeline<ISpec, SpecPipelineContext>(pipeline, context, spec as Partial<ISpec>)\n  }) as VChartSpecPipe & PivotChartSpecPipe\n\n  return adapted as unknown as SpecPipe\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { MeasureId } from 'src/dataReshape'\nimport { BAND_AXIS_INNER_OFFSET_IN_PIVOT } from 'src/pipeline/utils/constant'\nimport type { Config, VChartSpecPipe } from 'src/types'\n\nexport const pivotAxisStyle = (axisStyle: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = axisStyle(spec, context) as ILineChartSpec\n\n    if (result.axes) {\n      const { advancedVSeed } = context\n      const { config, chartType, encoding, reshapeMeasures } = advancedVSeed\n      const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n      result.axes.forEach((axis: any) => {\n        axis.domainLine = {\n          visible: false,\n        }\n\n        if (themConfig.chartGridColor && axis.grid && axis.grid.visible && axis.grid.style) {\n          axis.grid.style.stroke = themConfig.chartGridColor\n        }\n\n        if (themConfig.axisLabelColor && axis.label && axis.label.visible && axis.label.style) {\n          axis.label.style.fill = themConfig.axisLabelColor\n        }\n\n        if (axis.type === 'band') {\n          if (axis.orient === 'left' || axis.orient === 'right') {\n            axis.innerOffset = {\n              top: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              bottom: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          } else if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.innerOffset = {\n              left: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              right: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          }\n        } else if (axis.type === 'linear') {\n          if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.label.flush = true\n          }\n\n          if (\n            reshapeMeasures &&\n            reshapeMeasures.length > 1 &&\n            axis.title.text &&\n            encoding.color &&\n            encoding.color.length &&\n            !encoding.color.includes(MeasureId)\n          ) {\n            axis.title.visible = true\n          }\n        }\n      })\n    }\n\n    return result\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColumnDimensions: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n\n  if (!dimensions) {\n    return result\n  }\n  const columnDimensions = dimensions.filter((dim) => dim.encoding === 'column')\n  const columns = columnDimensions.map((dim) => ({\n    dimensionKey: dim.id,\n    title: dim.alias || dim.id,\n  })) as unknown\n\n  return {\n    ...result,\n    columns: columns,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { isCombination, isPivot } from 'src/pipeline/utils'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\nimport { isNullish } from 'remeda'\n\nexport const pivotGridStyle: PivotChartSpecPipe = (spec, context) => {\n  const { vseed, advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  const onlyCombination = !isPivot(vseed) && isCombination(vseed)\n\n  const result = { ...spec } as PivotChartConstructorOptions\n  const transparent = 'rgba(0,0,0,0)'\n\n  const borderColor = themConfig.borderColor ?? '#e3e5eb'\n  const bodyFontColor = themConfig.bodyFontColor ?? '#141414'\n  const headerFontColor = themConfig.headerFontColor ?? '#21252c'\n  const headerBackgroundColor = themConfig.headerBackgroundColor ?? 'rgba(0,0,0,0)'\n  const hoverHeaderBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderBackgroundColor ?? '#D9DDE4')\n  const hoverHeaderInlineBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderInlineBackgroundColor ?? '#D9DDE455')\n  const outlineBorderLineWidth = themConfig.outlineBorderLineWidth ?? 0\n  const frameCornerRadius = themConfig.frameCornerRadius ?? 0\n\n  if (!isNullish(themConfig.minChartWidth)) {\n    result.defaultColWidth = themConfig.minChartWidth\n  }\n\n  if (!isNullish(themConfig.minChartHeight)) {\n    result.defaultRowHeight = themConfig.minChartHeight\n  }\n\n  return {\n    ...result,\n    theme: {\n      underlayBackgroundColor: transparent,\n      bodyStyle: {\n        borderColor,\n        color: bodyFontColor,\n        borderLineWidth: (arg: { row: number; col: number; table: any }) => {\n          const noYAxis =\n            chartType === 'pie' ||\n            chartType === 'rose' ||\n            chartType === 'donut' ||\n            chartType === 'funnel' ||\n            chartType === 'radar' ||\n            chartType === 'roseParallel'\n\n          return [\n            arg.row === 0 ? outlineBorderLineWidth : 1,\n            outlineBorderLineWidth,\n            0,\n            arg.col === 0 || (noYAxis && arg.col === 1 && arg.table.colCount <= 2) ? outlineBorderLineWidth : 1,\n          ]\n        },\n        bgColor: transparent,\n        hover: {\n          cellBgColor: 'transparent',\n        },\n      },\n      headerStyle: {\n        borderColor,\n        fontSize: 12,\n        // borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        borderLineWidth: (arg: { row: number; col: number }) => {\n          return [outlineBorderLineWidth, outlineBorderLineWidth, 1, arg.col === 0 ? outlineBorderLineWidth : 1]\n        },\n        color: headerFontColor,\n        textAlign: 'center',\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      rowHeaderStyle: {\n        borderColor,\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, 1, 0, outlineBorderLineWidth]\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerHeaderStyle: {\n        borderColor,\n        textAlign: 'center',\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        fontWeight: 'bold',\n        borderLineWidth: [outlineBorderLineWidth, 1, 1, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerLeftBottomCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightTopCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: 0,\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      rightFrozenStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, outlineBorderLineWidth, 0, 1]\n        },\n        frameStyle: {\n          borderLineWidth: 0,\n        },\n        hover: {\n          borderLineWidth: 0,\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightBottomCellStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n\n      bottomFrozenStyle: {\n        borderColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      selectionStyle: {\n        cellBgColor: '',\n        cellBorderColor: '',\n      },\n      frameStyle: {\n        borderColor,\n        cornerRadius: frameCornerRadius,\n        borderLineWidth: outlineBorderLineWidth,\n      },\n\n      axisStyle: {\n        leftAxisStyle: {\n          cellPaddingLeft: 10,\n        },\n        bottomAxisStyle: {\n          cellPaddingBottom: 4,\n        },\n        rightAxisStyle: {\n          cellPaddingRight: 4,\n        },\n      },\n      scrollStyle: {\n        visible: 'scrolling',\n        hoverOn: false,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const pivotHideIndicatorName: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  return {\n    ...spec,\n    hideIndicatorName: datasetReshapeInfo.length <= 1,\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline } from '../../../../utils'\nimport type {\n  Dataset,\n  Encoding,\n  MeasureGroup,\n  PivotChartSpecPipe,\n  SpecPipelineContext,\n  VChartSpecPipe,\n} from 'src/types'\nimport { unique } from 'remeda'\n\nexport const pivotIndicators =\n  (chartPipeline: VChartSpecPipe[]): PivotChartSpecPipe =>\n  (spec, context): Partial<PivotChartConstructorOptions> => {\n    const result = { ...spec } as PivotChartConstructorOptions\n    const { advancedVSeed } = context\n    const { measures, datasetReshapeInfo, dataset, encoding } = advancedVSeed\n\n    const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n    const allMeasureIds = unique(datasetReshapeInfo.flatMap((d) => Object.keys(d.foldInfo.foldMap || {})))\n\n    const indicators = datasetReshapeInfo.map((reshapeInfo, index) => {\n      const measureGroup = measures?.find((d) => `${d.id}` === reshapeInfo.id) as MeasureGroup\n      const subMeasuresId = (measureGroup?.children || []).map((d) => d.id)\n      const invalideMeasuresIds = allMeasureIds.filter((id) => !subMeasuresId.includes(id))\n\n      const newDataset = dataset[index] as Dataset\n      const newDatasetReshapeInfo = [\n        {\n          ...reshapeInfo,\n          unfoldInfo: { ...reshapeInfo.unfoldInfo, colorItems },\n        },\n      ]\n      const newContext: SpecPipelineContext = {\n        ...context,\n        advancedVSeed: {\n          ...advancedVSeed,\n          pivotAllDatasetReshapeInfo: datasetReshapeInfo,\n          datasetReshapeInfo: newDatasetReshapeInfo,\n          encoding: Object.keys(encoding).reduce((res, key) => {\n            res[key as keyof Encoding] = encoding[key as keyof Encoding]?.filter((e) => {\n              return !invalideMeasuresIds.includes(e)\n            }) as string[]\n\n            return res\n          }, {} as Encoding),\n          dataset: newDataset,\n        },\n      }\n\n      const chartSpec = execPipeline(chartPipeline, newContext, {})\n      return {\n        indicatorKey: `${reshapeInfo.id}`,\n        title: measureGroup?.alias,\n        cellType: 'chart',\n        chartModule: 'vchart',\n        chartSpec: chartSpec,\n        style: {\n          padding: [1, 1, 0, 1],\n        },\n      }\n    })\n\n    return {\n      ...result,\n      indicators: indicators,\n    } as Partial<PivotChartConstructorOptions>\n  }\n\nexport const pivotIndicatorsAsRow: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: false,\n  }\n}\n\nexport const pivotIndicatorsAsCol: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: true,\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotRowDimensions: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  if (!dimensions) {\n    return result\n  }\n  const rowDimensions = dimensions.filter((dim) => dim.encoding === 'row')\n  const rows = rowDimensions.map((dim) => ({\n    dimensionKey: dim.id,\n    title: dim.alias || dim.id,\n  }))\n  return {\n    ...result,\n    rows: rows,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotTitle: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  if (result.columns && result.columns.length > 0) {\n    result.title = {\n      text: (spec as unknown as { columns: { title: string }[] }).columns.map((entry) => entry.title).join('/'),\n      align: 'center',\n      orient: 'top',\n      padding: [2, 0, 0, 0],\n      textStyle: {\n        fontSize: themConfig.titleFontSize ?? 12,\n        fill: themConfig.titleFontColor ?? '#000',\n        fontWeight: themConfig.titleFontWeight ?? 'bold',\n      },\n    }\n  }\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const addRegionPadding: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IPieChartSpec\n\n  if (result.region && result.region.length > 0) {\n    result.region[0].padding = 10\n  }\n\n  return result\n}\n","import type { Datum } from '@visactor/vchart'\n\nexport const defaultRegressionLineColor = (datum: Datum, ctx: any, opt: any): string | undefined => {\n  const parentNode = opt.mark?._product?.parent\n  if (parentNode?.attribute?.data) {\n    return parentNode.attribute.data.color\n  }\n  return undefined\n}\n\nexport const defaultRegressionLineLabelX = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.x\n  }\n\n  return undefined\n}\n\nexport const defaultRegressionLineLabelY = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.y\n  }\n\n  return undefined\n}\n\nexport const getAlphaByConfidenceLevel = (confidenceLevel: number = 0.95) => {\n  return 1 - Math.max(Math.min(1, confidenceLevel), 0)\n}\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const stackInverse: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.stackInverse = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { FoldMeasureId } from 'src/dataReshape/constant'\nimport type { Datum, VChartSpecPipe, StackCornerRadius } from 'src/types'\n\nexport const stackCornerRadius: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const stackCornerRadius = advancedVSeed.config?.[chartType as 'column']?.stackCornerRadius as StackCornerRadius\n\n  if (chartType === 'dualAxis' && (spec as any).type !== 'bar') {\n    return spec\n  }\n\n  return {\n    ...spec,\n    stackCornerRadius: (_: unknown, datum: Datum) => {\n      if (datum && datum[datum[FoldMeasureId]] > 0) {\n        return stackCornerRadius\n      }\n\n      return 0\n    },\n  } as IBarChartSpec\n}\n","import { pipe, uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Measures, VChartSpecPipe, TooltipConfig, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltip: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { measures, datasetReshapeInfo, chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType as 'line'] as { tooltip: TooltipConfig }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable = true } = tooltip\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: !!enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        foldInfo,\n        unfoldInfo,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfo, unfoldInfo),\n    },\n\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n\nexport const createDimensionContent = (\n  dimensions: Dimensions,\n  measures: Measures,\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n) => {\n  const { measureId, measureValue, foldMap } = foldInfo\n  const { encodingColor } = unfoldInfo\n\n  return [\n    {\n      visible: true,\n      shapeType: 'rectRound',\n      hasShape: true,\n      key: dimensions.some((d) => d.encoding === 'color')\n        ? (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[encodingColor] as string)) || ''\n\n            return unfoldInfo.colorIdMap[key].alias ?? key\n          }\n        : (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[measureId] as string)) || ''\n            return foldMap[key] ?? key\n          },\n      value: (v: unknown) => {\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    },\n  ]\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures,\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item) => item.id),\n    uniqueBy((item) => item.alias),\n  )\n  const meas = pipe(\n    measures.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item) => item.id),\n    uniqueBy((item) => item.alias),\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const defaultContent = {\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const { measureName } = foldInfo\n      const { encodingColor: colorName } = unfoldInfo\n\n      const datum = v as Datum\n      return (datum && (datum[measureName || colorName] as string)) || ''\n    },\n    value: (v: unknown) => {\n      const { measureId, measureValue } = foldInfo\n\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const value = datum[measureValue] as string | number\n      const id = datum[measureId] as string\n      const measure = findMeasureById(measures, id)\n      if (!measure) {\n        return String(value)\n      }\n\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }\n\n  return [...dimContent, defaultContent, ...meaContent]\n}\n","const setWholeIcon = (shapeContainer: any, color: string) => {\n  shapeContainer.style.backgroundColor = color\n  shapeContainer.style.borderColor = color\n  shapeContainer.style.width = '4px'\n  shapeContainer.style.height = '100%'\n  shapeContainer.style.display = 'inline-block'\n  shapeContainer.style.borderRadius = '2px'\n  shapeContainer.style.marginRight = '6px'\n\n  const shapeElements = shapeContainer.children\n\n  for (let i = 0; i < shapeElements.length; i++) {\n    const shapeElement = shapeElements[i]\n    const svgElement = shapeElement.children[0]\n\n    if (svgElement) {\n      svgElement.style.visibility = 'hidden'\n    }\n\n    shapeElement.style.background = 'transparent'\n    shapeElement.style.borderColor = 'transparent'\n  }\n}\n\nexport const updateTooltipElement = (tooltipElement: any, actualTooltip: any) => {\n  if (!tooltipElement || !tooltipElement.querySelector || !actualTooltip) {\n    return\n  }\n\n  const shapeContainer = tooltipElement.querySelector('.vchart-tooltip-shape-column')\n\n  if (!shapeContainer) {\n    return\n  }\n\n  if (actualTooltip.activeType === 'mark') {\n    const color = (actualTooltip.content[0].shapeFill as string) ?? 'transparent'\n\n    setWholeIcon(shapeContainer, color)\n  } else if (actualTooltip.activeType === 'dimension') {\n    shapeContainer.style.background = 'transparent'\n    shapeContainer.style.borderColor = 'transparent'\n    shapeContainer.style.width = 'auto'\n    shapeContainer.style.height = 'auto'\n    shapeContainer.style.display = 'inline-block'\n    shapeContainer.style.marginRight = '2px'\n\n    const shapeElements = shapeContainer.children\n\n    for (let i = 0; i < shapeElements.length; i++) {\n      const shapeElement = shapeElements[i]\n      const svgElement = shapeElement.children[0]\n      if (svgElement) {\n        svgElement.style.visibility = 'hidden'\n      }\n      const color = actualTooltip.content[i]?.shapeFill ?? 'transparent'\n\n      shapeElement.style.width = '4px'\n      shapeElement.style.height = '100%'\n      shapeElement.style.borderRadius = '2px'\n      shapeElement.style.marginRight = '4px'\n      shapeElement.style.backgroundColor = color\n      shapeElement.style.borderColor = color\n    }\n  }\n\n  const title = tooltipElement.querySelector('.vchart-tooltip-title')\n\n  if (title) {\n    title.style.marginBottom = '8px'\n  }\n}\n\nexport const updateMarkTooltipElement = (tooltipElement: any, actualTooltip: any) => {\n  if (!tooltipElement || !tooltipElement.querySelector || !actualTooltip) {\n    return\n  }\n\n  const shapeContainer = tooltipElement.querySelector('.vchart-tooltip-shape-column')\n\n  if (!shapeContainer) {\n    return\n  }\n\n  const color = (actualTooltip.content[0].shapeFill as string) ?? 'transparent'\n\n  setWholeIcon(shapeContainer, color)\n}\n","import type { ITooltipSpec } from '@visactor/vchart'\nimport type { TooltipConfig } from 'src/types/properties'\n\nexport const getTooltipStyle = (tooltipConfig: TooltipConfig) => {\n  return {\n    panel: {\n      padding: tooltipConfig.padding,\n      border: {\n        radius: tooltipConfig.borderRadius,\n        width: tooltipConfig.borderWidth,\n        color: tooltipConfig.borderColor,\n      },\n      backgroundColor: tooltipConfig.backgroundColor,\n    },\n    keyLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.keyColor,\n    },\n    valueLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.valueColor,\n      fontWeight: 'medium',\n    },\n    titleLabel: {\n      fontSize: tooltipConfig.fontSize,\n      lineHeight: tooltipConfig.lineHeight,\n      fontColor: tooltipConfig.titleColor,\n      fontWeight: 'bold',\n    },\n  } as ITooltipSpec['style']\n}\n","import type { PivotChartConstructorOptions, BaseTableAPI } from '@visactor/vtable'\nimport { isNumber } from 'remeda'\nimport { intl } from 'src/i18n'\nimport { createFormatterByMeasure, findMeasureById } from 'src/pipeline/utils'\nimport type { Datum, FoldInfo, MeasureTree, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotIndicators: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { measures, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo } = datasetReshapeInfo[0]\n  const hasRow = ((spec as any)?.rows as any[])?.length > 0\n  const foldMapValues = Object.values(foldInfo.foldMap)\n\n  return {\n    ...spec,\n    indicatorTitle: intl.i18n`指标名称`,\n    indicatorsAsCol: hasRow,\n    hideIndicatorName: hasRow,\n    indicators: [\n      {\n        cellType: 'text',\n        indicatorKey: foldInfo.measureValue,\n        title: foldMapValues.length > 1 ? '' : foldMapValues[0],\n        width: 'auto',\n        format: fieldFormat(measures, foldInfo as FoldInfo),\n      },\n    ] as unknown as PivotChartConstructorOptions['indicators'],\n  }\n}\n\nconst fieldFormat = (measures: MeasureTree, foldInfo: FoldInfo) => {\n  return (value: number | string, col?: number, row?: number, table?: BaseTableAPI) => {\n    if (!isNumber(col) || !isNumber(row) || !table) {\n      return value\n    }\n\n    const datum = table.getCellOriginRecord(col, row) as Datum[]\n    if (!datum[0]) {\n      return value\n    }\n    const { measureId: foldMeasureId } = foldInfo\n    const measureId = datum[0][foldMeasureId] as string\n    const measure = findMeasureById(measures, measureId)\n    const formatter = createFormatterByMeasure(measure)\n    return formatter(value)\n  }\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  tableThemeStyle,\n  selectionStyle,\n  titleOnDimension,\n  pivotTableBodyCell,\n} from '../pipes'\nimport { dataConfig } from '../pipes/indicators/pivotDataConfig'\n\nexport const pivotTableSpecPipeline: SpecPipeline = [\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  titleOnDimension,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  tableThemeStyle,\n  selectionStyle,\n  dataConfig,\n  pivotTableBodyCell,\n]\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const initPivotTable: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.pivotTable || {}\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    columnResizeType: 'column',\n    showColumnHeader: true,\n    showRowHeader: true,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    corner: {\n      titleOnDimension: 'all',\n    },\n    widthAdaptiveMode: 'all',\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as PivotTableConstructorOptions\n}\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotColumns: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { encoding } = advancedVSeed\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  const columns = dimensions.filter((item) => encoding.column?.includes(item.id))\n\n  return {\n    ...spec,\n    columns: columns.map((item) => {\n      return {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n    }),\n  } as PivotTableConstructorOptions\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotRows: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  const { encoding, measures } = advancedVSeed\n  const rows = dimensions.filter((item) => encoding.row?.includes(item.id))\n  const allMeasures = findAllMeasures(measures)\n\n  return {\n    ...spec,\n    rows: rows.map((item) => {\n      const res = {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n\n      if (item.id === MeasureId) {\n        ;(res as any).headerFormat = (measureId: string) => {\n          const measure = allMeasures.find((m) => m.id === measureId)\n\n          return measure?.alias ?? measureId\n        }\n      }\n\n      return res\n    }),\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const titleOnDimension: PivotTableSpecPipe = (spec) => {\n  const { rows = [], columns = [] } = spec\n\n  return {\n    ...spec,\n    corner: {\n      titleOnDimension: (rows as any[]).length <= 1 && (columns as any[]).length >= 1 ? 'column' : 'row',\n    },\n  }\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const rowHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).rowHeaderStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 0, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const cornerHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor\n  const hoverCellColor = themConfig.hoverHeaderBackgroundColor\n\n  ;(result.theme as ThemeLike).cornerHeaderStyle = {\n    borderColor: [borderColor, borderColor],\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellColor || undefined,\n      inlineRowBgColor: hoverInlineColor || undefined,\n      inlineColumnBgColor: hoverInlineColor || undefined,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const dataConfig: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measures = findAllMeasures(advancedVSeed.measures)\n\n  const aggregationRules = measures.map((measure) => ({\n    field: measure.id,\n    aggregationType: 'NONE',\n    indicatorKey: measure.id,\n  }))\n\n  return {\n    ...spec,\n    dataConfig: {\n      aggregationRules,\n    },\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { IIndicator, PivotTableConstructorOptions } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, Datum, PivotTableSpecPipe } from 'src/types'\nimport { pickBodyCellStyle } from './common'\nimport { FoldMeasureValue, MeasureId } from 'src/dataReshape'\n\nexport const pivotTableBodyCell: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as PivotTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const indicators = (spec as PivotTableConstructorOptions).indicators || []\n  const selectedPos: { col: number; row: number }[] = []\n\n  const newIndicators = indicators.map((ind) => {\n    const newInd = isString(ind)\n      ? ({\n          indicatorKey: ind,\n        } as IIndicator)\n      : ind\n\n    const { indicatorKey } = newInd\n\n    newInd.style = (datum: any) => {\n      const { dataValue, cellHeaderPaths } = datum\n      const headerPaths = [...cellHeaderPaths.colHeaderPaths, ...cellHeaderPaths.rowHeaderPaths]\n\n      const originalDatum: Datum = {\n        [indicatorKey]: dataValue,\n      }\n\n      headerPaths.forEach((path: any) => {\n        if (path.dimensionKey) {\n          originalDatum[path.dimensionKey] = path.value\n        }\n      })\n\n      if (!isNullish(originalDatum[MeasureId]) && !isNullish(originalDatum[FoldMeasureValue])) {\n        originalDatum[originalDatum[MeasureId]] = originalDatum[FoldMeasureValue]\n      }\n\n      const mergedStyle = bodyCellStyleList.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          if (selectedPos.length && selectedPos[0].col === datum?.col && selectedPos[0].row === datum?.row) {\n            // 说明重复进入了，清空历史\n            selectedPos.length = 0\n          }\n          selectedPos.push({\n            col: datum?.col,\n            row: datum?.row,\n          })\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return newInd\n  })\n  return {\n    ...spec,\n    runningConfig: {\n      ...((spec as any)?.runningConfig || {}),\n      selectedPos,\n    },\n    indicators: newIndicators,\n  } as PivotTableConstructorOptions\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { isMeasure } from 'src/pipeline/utils'\nimport type { Dimension, DimensionGroup, DimensionTree, ListTableSpecPipe } from 'src/types'\n\nexport const dimensionTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensions = (advancedVSeed as unknown as { dimensions: DimensionTree }).dimensions\n  const result = { ...spec } as ListTableConstructorOptions\n  const eachNode = (node: Dimension | DimensionGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Dimension, DimensionGroup>(dimensions, eachNode)\n\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { createFormatterByMeasure, isMeasure } from 'src/pipeline/utils'\nimport type { MeasureGroup, Measure, MeasureTree, ListTableSpecPipe, Datum } from 'src/types'\n\nexport const measureTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measures = (advancedVSeed as unknown as { measures: MeasureTree }).measures\n  const result = { ...spec } as ListTableConstructorOptions\n\n  const eachNode = (node: Measure | MeasureGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n        fieldFormat: fieldFormat(node),\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Measure, MeasureGroup>(measures, eachNode)\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst fieldFormat = (node: Measure) => {\n  const formatter = createFormatterByMeasure(node)\n\n  return (datum: Datum) => {\n    const { id } = node\n    const value = datum[id] as number | string | undefined\n    return formatter(value)\n  }\n}\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  tableThemeStyle,\n  selectionStyle,\n  tableBodyCell,\n} from '../pipes'\n\nexport const tableSpecPipeline: SpecPipeline = [\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  tableThemeStyle,\n  selectionStyle,\n  tableBodyCell,\n]\n","import type { ListTableConstructorOptions } from '@visactor/vtable'\nimport type { ListTableSpecPipe } from 'src/types'\n\nexport const initTable: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.table || {}\n\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    showHeader: true,\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    hover: {\n      highlightMode: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as ListTableConstructorOptions\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { ListTableConstructorOptions, ColumnDefine } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, ListTableSpecPipe } from 'src/types'\nimport type { MeasureSelector, Selectors } from 'src/types/dataSelector'\nimport { pickBodyCellStyle } from './common'\nimport { preorderTraverse } from 'src/pipeline/utils/tree/traverse'\n\nexport const tableBodyCell: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as ListTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const columns = (spec as ListTableConstructorOptions).columns || []\n  const selectedPos: { col: number; row: number }[] = []\n  const setStyleOfColumn = (col: ColumnDefine) => {\n    const field = col.field as string\n    const matchedStyles = bodyCellStyleList.filter((style) => {\n      if (isNullish(style.selector)) {\n        return true\n      }\n      const selectors = array(style.selector) as Selectors\n\n      return selectors.some((selector) => {\n        return isPlainObject(selector)\n          ? isNullish(selector.field) || (selector as MeasureSelector).field === field\n          : isNumber(selector) || isString(selector)\n      })\n    })\n\n    if (!matchedStyles.length) {\n      return false\n    }\n\n    col.style = (datum: any) => {\n      const originalDatum = {\n        [field]: datum.dataValue,\n      }\n\n      const mergedStyle = matchedStyles.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          if (selectedPos.length && selectedPos[0].col === datum?.col && selectedPos[0].row === datum?.row) {\n            // 说明重复进入了，清空历史\n            selectedPos.length = 0\n          }\n          selectedPos.push({\n            col: datum?.col,\n            row: datum?.row,\n          })\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return false\n  }\n\n  preorderTraverse<ColumnDefine, 'columns'>(columns, setStyleOfColumn, 'columns')\n  ;(spec as any).runningConfig = {\n    ...((spec as any).runningConfig || {}),\n    selectedPos,\n  }\n\n  return spec as ListTableConstructorOptions\n}\n","import type { BodyCellStyle } from 'src/types'\n\nconst tableStyleMap = {\n  backgroundColor: 'bgColor',\n  textColor: 'color',\n  textFontSize: 'fontSize',\n  borderColor: 'borderColor',\n  borderLineWidth: 'borderLineWidth',\n}\n\nexport const pickBodyCellStyle = (bodyCellStyle: BodyCellStyle) => {\n  return (Object.keys(tableStyleMap) as Array<keyof typeof tableStyleMap>).reduce<Record<string, any>>((acc, key) => {\n    if (key in bodyCellStyle) {\n      acc[tableStyleMap[key]] = bodyCellStyle[key]\n    }\n\n    return acc\n  }, {})\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const bodyStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { chartType, config } = advancedVSeed\n  const themeConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themeConfig) return result\n\n  // basic\n  const borderColor = themeConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themeConfig.bodyBackgroundColor || '#fff'\n  const fontColor = themeConfig.bodyFontColor || '#1B1F23'\n  const fontSize = themeConfig.bodyFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themeConfig.hoverBodyBackgroundColor || '#bedaff'\n  const hoverInlineColor = themeConfig.hoverBodyInlineBackgroundColor || '#bedaff'\n\n  if (!result.theme) result.theme = {}\n  ;(result.theme as ThemeLike).bodyStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'right',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    color: fontColor,\n    fontSize: fontSize,\n    fontStyle: 'normal',\n    fontWeight: 'normal',\n    fontVariant: 'normal',\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const tableThemeStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n\n  ;(result.theme as ThemeLike).frameStyle = {\n    borderColor,\n    borderLineWidth: 1,\n    cornerRadius: 4,\n  }\n  result.theme.scrollStyle = {\n    visible: 'scrolling',\n    hoverOn: true,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const headerStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).headerStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'center',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 0, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const selectionStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.selectedBorderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.selectedBackgroundColor || 'rgb(224, 224, 224, 0.5)'\n\n  ;(result.theme as ThemeLike).selectionStyle = {\n    cellBorderColor: borderColor,\n    cellBorderLineWidth: 2,\n    cellBgColor: backgroundColor,\n  }\n\n  return result\n}\n","import { BoxPlotPivotIndicator } from 'src/dataReshape'\n\nexport const revisedBoxPlotFieldKey = (fieldKey: string, groupId: string, isPivotChart = true) => {\n  if (!isPivotChart) {\n    return fieldKey\n  }\n  return `${BoxPlotPivotIndicator}_${groupId}_${fieldKey}`\n}\n","import { type Dimensions, type DimensionGroup, type DimensionTree, type VSeed, type Measure } from 'src/types'\nimport { isPositionMeasure, measureDepth } from './measures'\nimport { isMeasureTreeWithChildren, isMeasureTreeWithParentId } from '../advanced/chart/pipes/measures/utils'\nimport { unique } from 'remeda'\nimport { ChartTypeEnum, DEFAULT_PARENT_ID } from './constant'\n\nexport const isTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Table\n}\nexport const isPivotTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.PivotTable\n}\nexport const isRadar = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Radar\n}\nexport const isAreaPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.AreaPercent\n}\nexport const isColumnPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.ColumnPercent\n}\nexport const isBarPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.BarPercent\n}\n\nexport const isBarLikeChart = (vseed: VSeed) => {\n  return (\n    vseed.chartType === ChartTypeEnum.Bar ||\n    vseed.chartType === ChartTypeEnum.BarPercent ||\n    vseed.chartType === ChartTypeEnum.BarParallel\n  )\n}\n\nexport const isVTable = (vseed: VSeed) => {\n  return ['table', 'pivotTable'].includes(vseed.chartType)\n}\nexport const isVChart = (vseed: VSeed): boolean => {\n  return !isVTable(vseed)\n}\n\n/**\n * @description 透视图表或组合图\n * - 透视图表定义: 存在 column 或 row的 encoding\n * - 组合图表定义: 存在多组指标的情况\n * - 透视组合图表: 存在 column 或 row的 encoding 且 存在多组指标的情况\n * 上述三者都只能使用 VTable.PivotChart 绘制\n */\nexport const isPivotChart = (vseed: VSeed) => {\n  if (isVTable(vseed)) {\n    return false\n  }\n\n  if (isPivot(vseed)) {\n    return true\n  }\n\n  return isCombination(vseed)\n}\n\n/**\n * @description 存在column 或 row的encoding\n */\nexport const isPivot = (vseed: VSeed) => {\n  const { dimensions = [] } = vseed as {\n    dimensions: Dimensions\n  }\n\n  return dimensions && dimensions.some((dimension) => dimension.encoding === 'row' || dimension.encoding === 'column')\n}\n\n/**\n * @description 不存在column 或 row的encoding, 但是有多组指标的情况\n */\nexport const isCombination = (vseed: VSeed) => {\n  if (isMeasureTreeWithParentId(vseed.measures)) {\n    const parentIds = vseed.measures\n      ?.filter(isPositionMeasure)\n      .map((measure: Measure) => measure.parentId || DEFAULT_PARENT_ID)\n    return parentIds && unique(parentIds).length > 1\n  }\n\n  if (vseed.chartType === 'dualAxis' || vseed.chartType === 'scatter') {\n    if (vseed.chartType === 'scatter') {\n      if (isMeasureTreeWithChildren(vseed.measures)) {\n        const depth = measureDepth(vseed.measures)\n        return depth === 3\n      }\n\n      if (vseed.scatterMeasures && vseed.scatterMeasures.length > 1) {\n        return true\n      }\n      return false\n    }\n    if (vseed.chartType === 'dualAxis') {\n      if (isMeasureTreeWithChildren(vseed.measures)) {\n        const depth = measureDepth(vseed.measures)\n        return depth === 3\n      }\n\n      if (vseed.dualMeasures && vseed.dualMeasures.length > 1) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  const { measures = [] } = vseed as {\n    measures: DimensionTree\n    dimensions: Dimensions\n  }\n\n  const hasMeasureGroup = measures && measures.some((measure: DimensionGroup) => measure && measure.children)\n\n  return hasMeasureGroup\n}\n","// 标注层 z-index\nexport const ANNOTATION_Z_INDEX = 1000\n// 线性轴 顶部空隙 预留5px\nexport const LINEAR_AXIS_INNER_OFFSET_TOP = 12\n// 双轴图 柱图 ZIndex\nexport const DUAL_AXIS_CHART_COLUMN_Z_INDEX = 1000\n// 双轴图 非柱图 ZIndex\nexport const DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX = 1001\n// 双轴图 标注层 ZIndex\nexport const DUAL_AXIS_LABEL_Z_INDEX = 1002\n// 默认父级id\nexport const DEFAULT_PARENT_ID = '__DefaultParentId__'\n// 轴标签间距\nexport const AXIS_LABEL_SPACE = 8\n// 透视轴 band 类型内边距\nexport const BAND_AXIS_INNER_OFFSET_IN_PIVOT = 2\n\n// 图表类型枚举\nexport const ChartTypeEnum = {\n  Table: 'table',\n  PivotTable: 'pivotTable',\n  // cartesian\n  Line: 'line',\n  Column: 'column',\n  ColumnPercent: 'columnPercent',\n  ColumnParallel: 'columnParallel',\n  Bar: 'bar',\n  BarPercent: 'barPercent',\n  BarParallel: 'barParallel',\n  Area: 'area',\n  AreaPercent: 'areaPercent',\n  DualAxis: 'dualAxis',\n  Scatter: 'scatter',\n  // polar\n  Rose: 'rose',\n  RoseParallel: 'roseParallel',\n  Pie: 'pie',\n  Donut: 'donut',\n  Radar: 'radar',\n  // other\n  Funnel: 'funnel',\n  Heatmap: 'heatmap',\n  Boxplot: 'boxPlot',\n  Histogram: 'histogram',\n} as const\n\n// Heatmap hide cell\nexport const DATUM_HIDE_KEY = '__VSEED_HideItem__'\n","import type { Dimension, DimensionGroup, DimensionTree } from 'src/types'\nimport { isDimension, isDimensionGroup } from './typeGuard'\n\n/**\n * @description 删除 dimensionTree 中符合 callback 条件的节点\n * @param dimensionTree 待删除的 dimensionTree\n * @param callback 回调函数，用于判断是否删除当前节点\n * @returns 删除后的 dimensionTree\n */\nexport const deleteDimensionTreeByCallback = <T extends DimensionTree>(\n  dimensionTree?: T,\n  callback?: (dimension: Dimension, index: number, dimensions: (Dimension | DimensionGroup)[]) => boolean,\n) => {\n  if (!dimensionTree) {\n    return dimensionTree\n  }\n  const stack: (Dimension | DimensionGroup)[] = [...dimensionTree].reverse()\n  const parents = new Map<Dimension | DimensionGroup, (Dimension | DimensionGroup)[]>()\n\n  dimensionTree.forEach((node) => {\n    parents.set(node, dimensionTree)\n  })\n\n  const nodesToProcess: (Dimension | DimensionGroup)[] = []\n  const visited = new Set<Dimension | DimensionGroup>()\n\n  while (stack.length > 0) {\n    const node = stack[stack.length - 1]\n\n    if (isDimensionGroup(node) && node.children && !visited.has(node)) {\n      visited.add(node)\n      const children = node.children.slice().reverse()\n      for (const child of children) {\n        parents.set(child, node.children)\n        stack.push(child)\n      }\n    } else {\n      stack.pop()\n      nodesToProcess.push(node)\n    }\n  }\n\n  for (const node of nodesToProcess) {\n    const parentList = parents.get(node)\n\n    if (parentList) {\n      const index = parentList.indexOf(node)\n      if (isDimension(node)) {\n        if (callback?.(node, index, parentList)) {\n          parentList.splice(index, 1)\n        }\n      }\n    }\n  }\n\n  return dimensionTree\n}\n","import type { Dimension, DimensionGroup } from 'src/types'\n\nexport const isDimension = (dimension: Dimension | DimensionGroup): dimension is Dimension => {\n  return !('children' in dimension)\n}\n\nexport const isDimensionGroup = (dimension: Dimension | DimensionGroup): dimension is DimensionGroup => {\n  return 'children' in dimension\n}\n\n// export const isDimensions = (dimensions: Dimension[] | DimensionGroup[]): dimensions is Dimension[] => {\n//   return dimensions.every(isDimension)\n// }\n","import type { Formatter, Locale, NumFormat } from 'src/types'\nimport { autoNumFormatter, createNumFormatter } from './createNumFormatter'\nimport { intl } from 'src/i18n'\n\nexport const createFormatter = (format: Partial<NumFormat>, locale?: Locale): Formatter => {\n  return createNumFormatter(format, locale)\n}\n\nexport const autoFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  return autoNumFormatter(value, locale)\n}\n","import type { Formatter, Measure } from 'src/types'\nimport { autoFormatter, createFormatter } from './createFormatter'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const createFormatterByMeasure = (measure?: Measure): Formatter => {\n  if (!measure) {\n    return (v) => String(v)\n  }\n  const { numFormat, format, autoFormat } = measure\n\n  const formatterFormat = numFormat || format || {}\n\n  if (autoFormat === true) {\n    return autoFormatter\n  }\n\n  if (isNullish(autoFormat) && isEmpty(formatterFormat)) {\n    return autoFormatter\n  }\n\n  if (!isEmpty(formatterFormat)) {\n    return createFormatter(formatterFormat)\n  }\n\n  return (v) => String(v)\n}\n","import { isNumber } from 'remeda'\nimport { intl } from '../../../i18n'\nimport type { Formatter, Locale, NumFormat } from 'src/types'\n\nexport const createNumFormatter = (format?: Partial<NumFormat>, locale: Locale = intl.getLocale()): Formatter => {\n  const {\n    type = 'number',\n    ratio = 1,\n    thousandSeparator = true,\n    prefix = '',\n    suffix = '',\n    symbol = '',\n    fractionDigits = 2,\n    significantDigits,\n    roundingMode = 'halfExpand',\n    roundingPriority = 'auto',\n  } = format || {}\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: type === 'scientific' ? 'scientific' : 'standard',\n    // @ts-expect-error roundingMode is not in NumberFormatOptions\n    roundingMode,\n    roundingPriority,\n  }\n\n  if (isNumber(fractionDigits)) {\n    if (fractionDigits >= 0) {\n      numFormatterOptions.minimumFractionDigits = fractionDigits\n      numFormatterOptions.maximumFractionDigits = fractionDigits\n    }\n  }\n  if (isNumber(significantDigits) && significantDigits > 0) {\n    if (significantDigits > 0) {\n      numFormatterOptions.minimumSignificantDigits = significantDigits\n      numFormatterOptions.maximumSignificantDigits = significantDigits\n    }\n  }\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions, useGrouping: thousandSeparator })\n\n  return (value?: number | string) => {\n    let num = Number(value)\n    let typeSymbol = ''\n    if (Number.isNaN(num)) {\n      return String(value)\n    }\n\n    // apply ratio for percent/permille\n    if (type === 'percent') {\n      num *= 100\n      typeSymbol = '%'\n    } else if (type === 'permille') {\n      num *= 1000\n      typeSymbol = '‰'\n    } else if (type === 'number') {\n      num = num / (ratio || 1)\n    }\n\n    // format value\n    let numStr = numFormatter.format(num)\n\n    // add thousand separator\n    if (thousandSeparator) {\n      const parts = numStr.split('.')\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n      numStr = parts.join('.')\n    }\n\n    const validSymbol = symbol ?? ''\n\n    // add symbol, typeSymbol, prefix and suffix\n    return `${prefix}${numStr}${typeSymbol}${validSymbol}${suffix}`\n  }\n}\n\nexport const autoNumFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: 'compact',\n    useGrouping: true,\n  }\n  numFormatterOptions.minimumFractionDigits = 0\n  numFormatterOptions.maximumFractionDigits = 2\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions })\n\n  return numFormatter.format(Number(value))\n}\n","import type { Measure, MeasureGroup, MeasureTree } from 'src/types'\nimport { isMeasure, isMeasureGroup } from './typeGuard'\n\n/**\n * @description 删除 measureTree 中符合 callback 条件的节点\n * @param measureTree 待删除的 measureTree\n * @param callback 回调函数，用于判断是否删除当前节点\n * @returns 删除的度量\n */\nexport const deleteMeasureTreeByCallback = <T extends MeasureTree>(\n  measureTree?: T,\n  callback?: (measure: Measure, index: number, measures: (Measure | MeasureGroup)[]) => boolean,\n): Measure[] => {\n  if (!measureTree) {\n    return undefined as unknown as Measure[]\n  }\n  const stack: (Measure | MeasureGroup)[] = [...measureTree].reverse()\n  const parents = new Map<Measure | MeasureGroup, (Measure | MeasureGroup)[]>()\n\n  measureTree.forEach((node) => {\n    parents.set(node, measureTree)\n  })\n\n  const nodesToProcess: Measure[] = []\n  const visited = new Set<Measure | MeasureGroup>()\n\n  while (stack.length > 0) {\n    const node = stack[stack.length - 1]\n\n    if (isMeasureGroup(node) && node.children && !visited.has(node)) {\n      visited.add(node)\n      const children = node.children.slice().reverse()\n      for (const child of children) {\n        parents.set(child, node.children)\n        stack.push(child)\n      }\n    } else {\n      stack.pop()\n      nodesToProcess.push(node as Measure)\n    }\n  }\n  const deleted: Measure[] = []\n\n  for (const node of nodesToProcess) {\n    const parentList = parents.get(node)\n\n    if (parentList) {\n      const index = parentList.indexOf(node)\n      if (isMeasure(node)) {\n        if (callback?.(node, index, parentList)) {\n          parentList.splice(index, 1)\n          deleted.push(node)\n        }\n      }\n    }\n  }\n\n  return deleted\n}\n","import type { Measure, MeasureTree } from 'src/types'\nimport { preorderTraverse } from '../tree/traverse'\n\n/**\n * 获取measures的深度\n * @param measures\n * @param id\n * @returns\n */\nexport const measureDepth = (measures: MeasureTree = []): number => {\n  if (!measures) return 0\n  let depth = 1\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if ('children' in node) {\n      depth = Math.max(depth, 1 + measureDepth(node.children as MeasureTree))\n    }\n    return false\n  })\n  return depth\n}\n","import type { Measure, MeasureGroup, MeasureTree } from 'src/types'\nimport { preorderTraverse } from '../tree'\n\nexport const findMeasureById = (measures: MeasureTree = [], id: string): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      if (node.id === id) {\n        result = node\n        return true\n      }\n    }\n    return false\n  })\n  return result\n}\n\nexport const findFirstMeasure = (measures: MeasureTree = []): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result = node\n      return true\n    }\n    return false\n  })\n  return result\n}\n\nexport const findAllMeasures = (measures: MeasureTree = []): Measure[] => {\n  if (!measures) return []\n  const result: Measure[] = []\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result.push(node)\n    }\n    return false\n  })\n  return result\n}\n\nexport const hasMultipleMeasureInSingleView = (measures: MeasureTree = []): boolean => {\n  if (measures.every((m) => !('children' in m))) {\n    return measures.length > 1\n  }\n  let found = false\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if ((node as MeasureGroup).children && (node as MeasureGroup).children!.length > 1) {\n      found = true\n      return true\n    }\n    return false\n  })\n  return found\n}\n","import type { Measure, MeasureGroup } from 'src/types'\n\nexport const isMeasure = (measure: Measure | MeasureGroup): measure is Measure => {\n  return !('children' in measure)\n}\n\nexport const isMeasureGroup = (measure: Measure | MeasureGroup): measure is MeasureGroup => {\n  return 'children' in measure\n}\n\nexport const isMeasures = (measures: Measure[] | MeasureGroup[]): measures is Measure[] => {\n  return measures.every(isMeasure)\n}\n\nexport const isPositionMeasure = (measure: Measure): boolean => {\n  return !measure.encoding || !['color', 'size', 'label', 'tooltip', 'detail'].includes(measure.encoding)\n}\n","import type { ExecPipelineType, Pipe } from 'src/types'\n\n/**\n * 执行pipeline, 每个pipe负责构建结果的一部分, 构建完成后得到完整的目标结果\n * @param pipeline pipeline数组, 每个pipe负责构建结果的一部分\n * @param initialValue 初始值\n * @param context 上下文\n * @returns 执行后的结果\n */\nexport const execPipeline: ExecPipelineType = <T, U>(\n  pipeline: Array<Pipe<T, U>>,\n  context: U,\n  initialValue: Partial<T> = {},\n): T => {\n  const result = pipeline.reduce((prev, cur) => {\n    return cur(prev, context)\n  }, initialValue)\n  return result as T\n}\n","import { isPlainObject, mapValues, pipe } from 'remeda'\n\n// 递归类型，将所有 null 替换为 undefined\ntype NullToUndefined<T> = T extends null\n  ? undefined\n  : T extends (infer U)[]\n    ? NullToUndefined<U>[]\n    : T extends object\n      ? { [K in keyof T]: NullToUndefined<T[K]> }\n      : T\n\nexport const replaceNullToUndefined = <T>(obj: T): NullToUndefined<T> => {\n  if (obj === null) {\n    return undefined as NullToUndefined<T>\n  }\n  if (Array.isArray(obj)) {\n    // 递归处理数组元素\n    return obj.map(replaceNullToUndefined) as NullToUndefined<T>\n  }\n  if (isPlainObject(obj)) {\n    // 使用 remeda 的 mapValues 递归处理对象属性\n    return pipe(\n      obj as object,\n      mapValues((value) => replaceNullToUndefined(value)),\n    ) as NullToUndefined<T>\n  }\n  return obj as NullToUndefined<T>\n}\n","/**\n * 支持泛型与可配置子节点键名的非递归前序遍历\n * @param tree 根节点数组\n * @param callback 遍历时对每个节点执行的回调，返回 true 时停止遍历\n * @param childrenKey 子节点键名（默认 'children'）\n */\ntype WithChildren<Node, K extends string> = Node & { [P in K]?: Node[] }\n\nexport const preorderTraverse = <Node, K extends string = 'children'>(\n  tree: Node[],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n) => {\n  if (!tree || tree.length === 0) return\n\n  const stack: Node[] = [...tree].reverse()\n\n  while (stack.length > 0) {\n    const node = stack.pop() as Node\n    const stop = callback(node)\n    if (stop === true) {\n      return\n    }\n\n    const children = (node as WithChildren<Node, K>)[childrenKey]\n    if (Array.isArray(children) && children.length > 0) {\n      for (let i = children.length - 1; i >= 0; i--) {\n        const child = children[i]\n        stack.push(child)\n      }\n    }\n  }\n}\n\nexport const findTreeNodesBy = <Node, K extends string = 'children'>(\n  nodes: Node[] = [],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n): Node[] => {\n  if (!nodes) return []\n  const result: Node[] = []\n  preorderTraverse<Node, K>(nodes, (node) => {\n    if (!(childrenKey in (node as WithChildren<Node, K>))) {\n      if (callback(node)) {\n        result.push(node)\n      }\n    }\n    return false\n  })\n  return result\n}\n","import { isEmpty } from 'remeda'\nimport type { VSeed } from 'src/types'\n\nexport const checkVSeed = (vseed: VSeed) => {\n  const { chartType, dataset, dimensions, measures } = vseed\n  if (!chartType) {\n    throw new Error('chartType is required')\n  }\n  if (!dataset || isEmpty(dataset)) {\n    throw new Error('dataset is required, and must be an array')\n  }\n  if (dimensions && !Array.isArray(dimensions)) {\n    throw new Error('dimensions must be an array')\n  }\n  if (measures && !Array.isArray(measures)) {\n    throw new Error('measures must be an array')\n  }\n}\n","import type {\n  AnnotationAreaConfig,\n  AnnotationHorizontalLineConfig,\n  AnnotationPointConfig,\n} from 'src/types/properties/config/annotation/annotation'\n\nexport const getDefaultAnnotationPoint = (): AnnotationPointConfig => ({\n  textBackgroundVisible: true,\n  textFontSize: 12,\n  textFontWeight: 400,\n\n  textBackgroundBorderRadius: 0,\n  textBackgroundBorderWidth: 1,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#ffffff',\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getDefaultAnnotationLine = (): AnnotationHorizontalLineConfig => ({\n  lineVisible: true,\n  lineWidth: 1,\n  lineStyle: 'solid' as const,\n\n  textFontSize: 12,\n  textFontWeight: 400,\n  startSymbolVisible: true,\n  endSymbolVisible: false,\n\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#BCC1CB',\n\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotationVerticalLine = () => getLightAnnotationHorizontalLine()\n\nexport const getDefaultAnnotationArea = (): AnnotationAreaConfig => ({\n  textFontSize: 12,\n  textFontWeight: 400,\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n  areaBorderWidth: 0,\n  areaBorderRadius: 0,\n  areaLineDash: [2, 2],\n\n  outerPadding: 4,\n})\n\nexport const getLightAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n\n  areaColor: '#BCC1CB',\n  areaColorOpacity: 0.12,\n  areaBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotation = () => ({\n  annotationPoint: getLightAnnotationPoint(),\n  annotationHorizontalLine: getLightAnnotationHorizontalLine(),\n  annotationVerticalLine: getLightAnnotationVerticalLine(),\n  annotationArea: getLightAnnotationArea(),\n})\n\n// --- dark ---\nexport const getDarkAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#55595F',\n\n  textColor: '#E2E3E6',\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationVerticalLine = () => getDarkAnnotationHorizontalLine()\n\nexport const getDarkAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n\n  areaColor: '#E2E3E6',\n  areaColorOpacity: 0.15,\n  areaBorderColor: '#E2E3E6',\n})\n\nexport const getDarkAnnotation = () => ({\n  annotationPoint: getDarkAnnotationPoint(),\n  annotationHorizontalLine: getDarkAnnotationHorizontalLine(),\n  annotationVerticalLine: getDarkAnnotationVerticalLine(),\n  annotationArea: getDarkAnnotationArea(),\n})\n\nexport default getLightAnnotation\n","import type { YBandAxis, YLinearAxis } from 'src/types'\n\nexport const getLightLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  inverse: false,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: false,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getLightBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: true,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: false,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: true,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n","import type { BoxPlotStyle, OutlierStyle } from 'src/types'\n\nconst getCommonBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    boxCornerRadius: 6,\n  }\n}\n\nexport const getLightBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    ...getCommonBoxPlotStyle(),\n    boxBorderColor: '#00000042',\n    whiskerBorderColor: '#606773',\n  }\n}\n\nexport const getDarkBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    ...getCommonBoxPlotStyle(),\n    boxBorderColor: '#ffffff42',\n    whiskerBorderColor: '#E2E3E6',\n  }\n}\nconst getCommonOutlierStyle = (): OutlierStyle => {\n  return {\n    pointBorderWidth: 2,\n    pointColor: 'transparent',\n  }\n}\n\nexport const getLightOutlierStyle = (): OutlierStyle => {\n  return {\n    ...getCommonOutlierStyle(),\n  }\n}\n\nexport const getDarkOutlierStyle = (): OutlierStyle => {\n  return {\n    ...getCommonOutlierStyle(),\n  }\n}\n","export const getLightColorScheme = () => [\n  '#8D72F6',\n  '#5766EC',\n  '#66A3FE',\n  '#51D5E6',\n  '#4EC0B3',\n  '#F9DF90',\n  '#F9AD71',\n  '#ED8888',\n  '#E9A0C3',\n  '#D77DD3',\n]\nexport const getDarkColorScheme = () => [\n  '#2E62F1',\n  '#4DC36A',\n  '#FF8406',\n  '#FFCC00',\n  '#4F44CF',\n  '#5AC8FA',\n  '#003A8C',\n  '#B08AE2',\n  '#FF6341',\n  '#98DD62',\n]\nexport const getLightLinearColorScheme = () => ['#C2CEFF', '#5766EC']\nexport const getDarkLinearColorScheme = () => ['#A0CEFF', '#2E62F1']\nexport const getLightColor = () => ({\n  linearColorScheme: getLightLinearColorScheme(),\n  colorScheme: getLightColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\nexport const getDarkColor = () => ({\n  linearColorScheme: getDarkLinearColorScheme(),\n  colorScheme: getDarkColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\n","export const getDarkCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  lineColor: '#55595F',\n})\n\nexport const getDarkCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  rectColor: '#4B4F54',\n})\n\nexport const getLightCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#21252C',\n  lineColor: '#21252C',\n})\nexport const getLightCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#364159',\n  rectColor: '#D9DDE4',\n})\n","import type { FunnelTransformConfig } from 'src/types/properties/config/funnelTransform'\n\nexport const getLightFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#F6F7F9',\n    textColor: '#737880',\n  }\n}\n\nexport const getDarkFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#2A2D33',\n    textColor: '#888C93',\n  }\n}\n","import type { HeatmapCell } from 'src/types/properties/config/heatmap/heatmap'\n\nexport const getLightHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#fff',\n  }\n}\n\nexport const getDarkHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#404349',\n  }\n}\n","export const getDefaultLabel = () => ({\n  enable: true,\n  wrap: true,\n  showValue: true,\n  showValuePercent: false,\n  labelColorSmartInvert: false,\n  labelOverlap: true,\n})\n\nexport const getDarkLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#21252C',\n})\n\nexport const getLightLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#fff',\n})\n","import type { ColorLegend, Legend } from 'src/types'\n\nexport const getDefaultLegend = (): Legend => ({\n  enable: true,\n  border: true,\n  maxSize: 1,\n  shapeType: 'rectRound',\n  position: 'rt',\n  labelFontSize: 12,\n  labelFontWeight: 400,\n})\n\nexport const getDarkLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#BBBDC3',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#2A2D33',\n})\n\nexport const getLightLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#606773',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#F1F2F5',\n})\n\nexport const getDarkColorLegend = (): ColorLegend => ({\n  ...getDefaultLegend(),\n  labelColor: '#BBBDC3',\n  railBackgroundColor: '#404349',\n  handlerBorderColor: '#4B4F54',\n})\n\nexport const getLightColorLegend = (): ColorLegend => ({\n  ...getDefaultLegend(),\n  labelColor: '#606773',\n  handlerBorderColor: '#fff',\n  railBackgroundColor: '#f1f3f4',\n})\n","import type { RegressionLineConfig } from 'src/types/properties/regressionLine'\n\nexport const getDefaultRegressionLine = () => {\n  return {\n    lineWidth: 2,\n    textFontSize: 12,\n    textFontWeight: 400,\n  }\n}\n\nexport const getLightRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n\nexport const getDarkRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n","import type { PivotChartGridConfig } from 'src/types'\n\nexport const getDefaultTableConfig = () => ({\n  bodyFontSize: 12,\n  bodyBackgroundColor: 'transparent',\n  headerFontSize: 12,\n})\n\nexport const getLightTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#e3e5eb',\n\n  bodyFontColor: '#141414',\n\n  headerFontColor: '#21252c',\n  headerBackgroundColor: '#f6f7f9',\n\n  hoverBodyBackgroundColor: '#bedaff',\n  hoverBodyInlineBackgroundColor: '#bedaff33',\n  hoverHeaderBackgroundColor: '#D9DDE4',\n  hoverHeaderInlineBackgroundColor: '#D9DDE455',\n\n  selectedBorderColor: '#4080ff',\n  selectedBackgroundColor: '#bedaff33',\n\n  backgroundColor: 'transparent',\n})\n\nexport const getDarkTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#4b4e53',\n\n  bodyFontColor: '#fdfdfd',\n  headerFontColor: '#fdfdfd',\n  headerBackgroundColor: '#36393e',\n\n  hoverBodyBackgroundColor: '#4284ff66',\n  hoverBodyInlineBackgroundColor: '#4284ff10',\n  hoverHeaderBackgroundColor: '#6f7984cc',\n  hoverHeaderInlineBackgroundColor: '#4b4f54',\n\n  selectedBorderColor: '#3073f2',\n  selectedBackgroundColor: '#4284ff33',\n})\n\nconst pickPivotChartGridConfig = (tableConfig: any) => {\n  return {\n    outlineBorderLineWidth: 0,\n    frameCornerRadius: 0,\n    borderColor: tableConfig.borderColor,\n    bodyFontColor: tableConfig.bodyFontColor,\n    headerFontColor: tableConfig.headerFontColor,\n\n    headerBackgroundColor: 'transparent',\n    hoverHeaderBackgroundColor: tableConfig.hoverHeaderBackgroundColor,\n    hoverHeaderInlineBackgroundColor: tableConfig.hoverHeaderInlineBackgroundColor,\n\n    titleFontColor: tableConfig.headerFontColor,\n    titleFontSize: tableConfig.headerFontSize,\n    titleFontWeight: 'bold',\n  }\n}\n\nexport const getLightPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getLightTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#D9DDE446'\n\n  res.chartGridColor = '#F0F1F6'\n  res.axisLabelColor = '#BCC1CB'\n\n  return res\n}\n\nexport const getDarkPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getDarkTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#4b4f5446'\n\n  return res\n}\n","import type { TooltipConfig } from 'src/types'\n\nconst getDefaultTooltip = (): TooltipConfig => ({\n  enable: true,\n  borderRadius: 12,\n  borderWidth: 1,\n  padding: 9,\n  lineHeight: 12,\n  fontSize: 12,\n  lineSpace: 6,\n})\n\nexport const getLightTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#e3e5e8',\n  backgroundColor: '#fff',\n  keyColor: '#606773',\n  valueColor: '#21252c',\n  titleColor: '#21252c',\n})\n\nexport const getDarkTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#3c3f44',\n  backgroundColor: '#2b2d30',\n  keyColor: '#89909D',\n  valueColor: '#E2E3E6',\n  titleColor: '#E2E3E6',\n})\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getDarkColor,\n  getDarkCrosshairLine,\n  getDarkCrosshairRect,\n  getDarkTableConfig,\n  getDarkPivotChartGridConfig,\n  getDarkLabel,\n  getDarkLegend,\n  getDarkColorLegend,\n} from '../common'\nimport { getDarkTooltip } from '../common/tooltip'\nimport { getDarkBandAxis, getDarkLinearAxis } from '../common/axes'\nimport { getDarkAnnotation } from '../common/annotaion'\nimport { getDarkFunnelTransformTheme } from '../common/funnelTransform'\nimport { getDarkHeatmapCellTheme } from '../common/heatmapCell'\nimport { getDarkRegressionLine } from '../common/regressionLine'\nimport { getDarkBoxPlotStyle, getDarkOutlierStyle } from '../common/boxPlot'\n\nexport const darkTheme = (): CustomThemeConfig => {\n  const linearAxis = getDarkLinearAxis()\n  const bandAxis = getDarkBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n  const crosshairLine = getDarkCrosshairLine()\n  const crosshairRect = getDarkCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getDarkColor(),\n    label: getDarkLabel(),\n    legend: getDarkLegend(),\n    tooltip: getDarkTooltip(),\n  }\n\n  const tableConfig = getDarkTableConfig()\n\n  return {\n    config: {\n      table: tableConfig,\n      pivotTable: tableConfig,\n\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        regressionLine: getDarkRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        dualChartType: {\n          primary: 'column',\n          secondary: 'line',\n        },\n        crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n        transform: getDarkFunnelTransformTheme(),\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        legend: getDarkColorLegend(),\n        xAxis: bandAxis,\n        yAxis: bandAxis,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n\n        cell: getDarkHeatmapCellTheme(),\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        boxPlotStyle: getDarkBoxPlotStyle(),\n        outlierStyle: getDarkOutlierStyle(),\n      },\n    },\n  }\n}\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getLightColor,\n  getLightColorLegend,\n  getLightCrosshairLine,\n  getLightCrosshairRect,\n  getLightLabel,\n  getLightLegend,\n  getLightPivotChartGridConfig,\n  getLightTableConfig,\n} from '../common'\nimport { getLightTooltip } from '../common/tooltip'\nimport { getLightBandAxis, getLightLinearAxis } from '../common/axes'\nimport { getLightAnnotation } from '../common/annotaion'\nimport { getLightFunnelTransformTheme } from '../common/funnelTransform'\nimport { getLightHeatmapCellTheme } from '../common/heatmapCell'\nimport { getLightRegressionLine } from '../common/regressionLine'\nimport { getLightBoxPlotStyle, getLightOutlierStyle } from '../common/boxPlot'\n\nexport const lightTheme = (): CustomThemeConfig => {\n  const linearAxis = getLightLinearAxis()\n  const bandAxis: YBandAxis = getLightBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n\n  const crosshairLine = getLightCrosshairLine()\n  const crosshairRect = getLightCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getLightColor(),\n    label: getLightLabel(),\n    legend: getLightLegend(),\n    tooltip: getLightTooltip(),\n  }\n  const tableConfig = getLightTableConfig()\n\n  return {\n    config: {\n      // table\n      table: tableConfig,\n      pivotTable: tableConfig,\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n        xAxis: {\n          ...linearAxis,\n        },\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        dualChartType: {\n          primary: 'column',\n          secondary: 'line',\n        },\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n\n        transform: getLightFunnelTransformTheme(),\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        legend: getLightColorLegend(),\n        xAxis: bandAxis,\n        yAxis: bandAxis,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n        cell: getLightHeatmapCellTheme(),\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n        regressionLine: getLightRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        boxPlotStyle: getLightBoxPlotStyle(),\n        outlierStyle: getLightOutlierStyle(),\n      },\n    },\n  }\n}\n"],"names":["buildAdvanced","builder","start","performance","Date","chartType","Error","pipeline","Builder","context","intl","advancedVSeed","execPipeline","e","end","buildSpec","spec","build","getColorItems","isTable","isPivotTable","datasetReshapeInfo","colorItems","unique","d","colorIdMap","prev","cur","_colorIdMap_d","getColorIdMap","value","vseed","advanced","customPipe","themeKey","registerAll","registerTable","registerPivotTable","registerLine","registerColumn","registerColumnParallel","registerColumnPercent","registerBar","registerBarParallel","registerBarPercent","registerArea","registerAreaPercent","registerScatter","registerDualAxis","registerPie","registerDonut","registerRose","registerRoseParallel","registerRadar","registerFunnel","registerHeatmap","registerBoxPlot","registerHistogram","registerLightTheme","registerDarkTheme","areaAdvancedPipeline","areaSpecPipeline","areaPercentAdvancedPipeline","areaPercentSpecPipeline","barAdvancedPipeline","barSpecPipeline","barParallelAdvancedPipeline","barParallelSpecPipeline","barPercentAdvancedPipeline","barPercentSpecPipeline","boxplotAdvancedPipeline","boxplotSpecPipeline","columnAdvancedPipeline","columnSpecPipeline","columnParallelAdvancedPipeline","columnParallelSpecPipeline","columnPercentAdvancedPipeline","columnPercentSpecPipeline","donutAdvancedPipeline","donutSpecPipeline","dualAxisAdvancedPipeline","dualAxisSpecPipeline","funnelAdvancedPipeline","funnelSpecPipeline","heatmapAdvancedPipeline","heatmapSpecPipeline","histogramAdvancedPipeline","histogramSpecPipeline","lineAdvancedPipeline","lineSpecPipeline","pieAdvancedPipeline","pieSpecPipeline","pivotTableAdvancedPipeline","pivotTableSpecPipeline","radarAdvancedPipeline","radarSpecPipeline","roseAdvancedPipeline","roseSpecPipeline","roseParallelAdvancedPipeline","roseParallelSpecPipeline","scatterAdvancedPipeline","scatterSpecPipeline","tableAdvancedPipeline","tableSpecPipeline","registerCustomTheme","key","themeConfig","customTheme","lightTheme","darkTheme","ORIGINAL_DATA","Separator","FoldMeasureName","FoldMeasureId","FoldMeasureValue","MeasureId","MeasureName","FoldPrimaryMeasureValue","FoldSecondaryMeasureValue","FoldXMeasureValue","FoldYMeasureValue","FoldXMeasureId","FoldYMeasureId","XEncoding","YEncoding","AngleEncoding","DetailEncoding","ColorEncoding","ColorIdEncoding","BoxPlotPivotIndicator","Q1MeasureValue","Q3MeasureValue","LowerWhisker","UpperWhisker","OutliersMeasureId","MedianMeasureId","BinStartMeasureId","BinEndMeasureId","BinCountMeasureId","BinPercentageMeasureId","dataReshapeByEncoding","dataset","dimensions","measures","encoding","options","foldMeasureId","foldMeasureName","foldMeasureValue","colorItemAsId","colorMeasureId","omitIds","foldedDataset","foldInfo","foldMeasures","finalDataset","unfoldInfo","unfoldDimensions","measureId","measureName","measureValue","allowEmptyFold","Infinity","result","Array","index","ids","i","j","datum","omit","id","alias","valueNumber","Number","Math","separator","color","x","y","detail","angle","angleDimensions","dim","xDimensions","yDimensions","colorDimensions","detailDimensions","Set","applyEncoding","colorId","String","getColorAliasItem","nearlyEqual","a","b","epsilon","diff","selector","vchartDatum","selectorMode","vchartKeys","Object","k","selectors","isValueSelector","selectByValue","isMeasureSelector","selectByMeasure","isDimensionSelector","selectByDmension","isPartialDatumSelector","selectByPartial","selectorDatum","finalResult","results","r","op","selectorValueArr","v","translateMap","Intl","segments","_this_translateMap_text","values","text","segment","translatedText","isNullish","locale","initAdvancedVSeed","defaultMeasures","defaultDimensions","defaultMeasureId","encodingAdapter","buildMeasures","defaultEncodingForLine","encodingForLine","pickMeasuresForReshape","pickDimensionsForReshape","pivotAdapter","reshapeWithEncoding","pivotReshapeWithEncoding","sortXBandAxis","sortLegend","areaConfig","theme","markStyle","annotation","areaPercentConfig","defaultEncodingForBar","encodingForBar","sortYBandAxis","barConfig","barParallelConfig","barPercentConfig","generateDefaultDimensionEncoding","isMultiMeasure","uniqueDimIds","addDefaultColorEncoding","generateDimensionEncoding","item","addColorToEncoding","generateDefaultMeasureEncoding","generateMeasureEncoding","label","tooltip","pickedConfig","pick","config","replaceNullToUndefined","vseedMeasures","findAllMeasures","hasMultipleMeasureInSingleView","hasDimensionEncoding","hasMeasureEncoding","hasMulti","c","_config_chartType","_encoding_value","_encoding_q1","_encoding_q3","_encoding_min","_encoding_max","_encoding_median","uniqDims","uniqueBy","whiskers","newDatasets","allMeasures","boxPlotDataList","f","m","boxPlotData","boxplot","res","chartConfig","measureGroups","measure","rowColumnFields","datasets","measureGroup","subMeasures","groupId","validEncodingIds","field","revisedBoxPlotFieldKey","reshapeInfo","defaultEncodingForColumn","encodingForColumn","columnConfig","regressionLine","columnParallelConfig","columnPercentConfig","defaultEncodingForPie","encodingForPie","donutConfig","buildMeasuresForDualAxis","isMeasureTreeWithChildren","isMeasureTreeWithParentId","generateMeasuresByParentId","dualMeasuresToMeasureTree","clone","dualMeasures","encodedMeasures","basicMeasuresToDualMeasures","basicMeasures","primaryMeasures","secondaryMeasures","isPrimaryYAxis","isSecondaryYAxis","isOtherEncoding","measureTree","groupChildren","arrPrimaryMeasures","arrSecondaryMeasures","DEFAULT_PARENT_ID","dualChart","checkSingleViewMultiMeasures","depth","measureDepth","foldInfoList","unfoldInfoList","newDataset","getColorMeasureId","datasetList","funnelConfig","onlyMeasureId","colorDims","heatmapConfig","dimensionsWithoutMeasureId","_encoding_detail","_encoding_tooltip","_encoding_label","_config_legend","hasColorEncoding","merge","_encoding_x0","_encoding_x1","_encoding_y","binCount","binStep","binValueType","valueField","binData","bin","_result_config","flattenDatasert","minValue","maxValue","undefined","lineConfig","pieConfig","radarConfig","defaultEncodingForRose","encodingForRose","roseConfig","roseParallelConfig","buildMeasuresForScatter","scatterMeasuresToMeasureTree","scatterMeasures","basicMeasuresToScatterMeasures","yMeasures","xMeasures","isYAxis","isXAxis","isOther","scatterChart","_datasets_","calcOrder","sortConfig","order","orderBy","sort","aValue","bValue","_datasetReshapeInfo__unfoldInfo","_datasetReshapeInfo__unfoldInfo1","_datasetReshapeInfo__unfoldInfo2","colorIds","orderRes","itemNameOrId","_colorIdMap_id","_colorIdMap_id1","sortAxis","xField","axisOrderResult","yField","top100dataset","newDimensions","_result_dimensions","_result_dimensions1","MeaIdDim","clonedMeasures","preorderTraverse","node","reshapeDimensions","deleteDimensionTreeByCallback","dimension","noEncodingPipeline","hasEncodingPipeline","checkVSeed","pickedMarkStyle","normalizeMeasureTree","isPivotChart","basicMeasuresToMeasureTree","parent","isValid","encodingKeys","deleteMeasureTreeByCallback","_currentGroup_children","_currentGroup_children1","_currentGroup_children2","createEmptyMeasureGroup","currentGroup","pivotPipeline","keys","regressionLineConfig","hasLine","newSubDataset","_customTheme_theme_config","_customTheme_theme_config1","chartConfigTheme","mergedConfig","mergeDeep","_k","mergeArray","chartCustomTheme","arr","themeItem","isString","isNumber","isObjectType","cellStyle","pickedCellStyle","style","clonedDimensions","isDimension","isMeasure","area","initArea","stackInverse","colorAdapter","linearColor","backgroundColor","datasetXY","progressive","xBand","yLinear","discreteLegend","colorLegend","verticalCrosshairLine","colorPointStyleFill","pointStyle","pointStateDimensionHover","colorLineStyleFill","lineStyle","colorAreaStyleFill","areaStyle","annotationPoint","annotationVerticalLine","annotationHorizontalLine","annotationArea","splitLine","pivotArea","initPivot","pivotGridStyle","pivotIndicatorsAsRow","datasetPivot","pivotIndicators","pivotAxisStyle","pivotRowDimensions","pivotColumnDimensions","pivotTitle","pivotDiscreteLegend","pivotColorLegend","dimensionLinkage","areaPercent","percent","pivotAreaPercent","bar","initBar","stackCornerRadius","barMaxWidth","datasetYX","xLinear","yBand","horizontalCrosshairRect","colorBarStyleFill","barStyle","annotationAreaBand","pivotBar","pivotIndicatorsAsCol","initBarParallel","sameDimensionsMode","isDeepEqual","_encoding_x","barParallel","barGapInGroup","pivotBarParallel","barPercent","pivotBarPercent","initBoxplot","usePivotChart","_encoding_color","boxMaxWidth","_advancedVSeed_config_chartType","boxGapInGroup","datasetBoxplot","boxPlotMeasureKeys","VCHART_OUTLIER_KEY","tooltipBoxplot","enable","meas","valueMeasure","defaultFormatter","createFormatterByMeasure","measureAliasMapping","getTooltipStyle","createMarkContent","data","_data__datum","tooltipItems","outerlierMeasure","formatter","entry","mea","createDimensionContent","updateTooltipElement","dims","pipe","medianAlias","encodingColor","findMeasureById","colorBoxPlotStyleFill","stylePipe","isLinearColor","_result_boxPlot","boxPlotStyle","_config_vseed_chartType","isEmpty","customMap","boxPlotStyles","boxColor","boxColorOpacity","boxBorderColor","boxBorderWidth","boxVisible","boxBorderOpacity","medianBorderColor","whiskerBorderColor","outlierStyle","outlierStyles","pointBorderColor","pointBorderStyle","pointBorderWidth","pointColor","pointColorOpacity","pointSize","pointVisible","verticalCrosshairRect","pivotBoxplot","columnPolynomialRegressionLine","lineTheme","lineList","array","line","lineIndex","_spec_data","_spec_data1","_spec_data2","_spec_data3","lineWidth","lineDash","textColor","textFontSize","textFontWeight","confidenceIntervalOpacity","confidenceLevel","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","confidenceIntervalVisible","childrenMarks","ctx","s","chart","vchart","_s_getViewData","_s_fieldX","_s_fieldY","_s_getOption_globalScale_getScale","rect","yClamper","clamper","fieldX","fieldY","xValues","minPoints","degree","confidenceInterval","evaluateGrid","regressionPolynomial","xVal","filteredData","getAlphaByConfidenceLevel","N","xAxisHelper","halfBandWidth","linePoints","lineData","intervalData","defaultRegressionLineColor","opt","_opt_mark__product","_parentNode_attribute","parentNode","_parentNode_attribute_data","_points_","points","column","initColumn","pivotColumn","initColumnParallel","columnParallel","pivotColumnParallel","columnPercent","pivotColumnPercent","initDonut","donut","labelPie","colorPieStyleFill","pieStyle","pivotDonut","pivotHideIndicatorName","addRegionPadding","initDualAxisPrimary","initDualAxisSecondary","DEFAULT_DUAL_CHART_TYPE","dualChartTypePrimary","_config_index","_config_","_config_index1","_config_1","DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX","primary","secondary","bothColumn","DUAL_AXIS_CHART_COLUMN_Z_INDEX","columnSpec","dualChartTypeSecondary","datasetPrimary","analysis","orderMapping","fields","datasetSecondary","labelPrimary","baseConfig","buildLabel","DUAL_AXIS_LABEL_Z_INDEX","labelSecondary","tooltipPrimary","tooltipSecondary","_datasetReshapeInfo__foldInfoList","tooltipDualAxis","barStyleFilter","pointStyleFilter","lineStyleFilter","areaStyleFilter","yLinearPrimary","_advancedVSeed_config_chartType1","_yAxisConfig_title","reshapeInfoId","primaryYAxis","yAxisConfig","alignTicks","alignTicksConfig","isEmptySecondary","seriesIds","seriesId","autoFormat","numFormat","createNumFormatter","titleText","defaultTitleText","linearAxis","linearAxisStyle","formatMethod","createLinearFormat","yLinearSecondary","_yAxisConfig_grid","secondaryYAxis","onlySecondary","sync","baseStyle","annotationPointOfDualAxis","generateAnnotationPointPipe","allMeasureIds","pickedDatum","pickWithout","_spec_series","isSubset","dualAxis","seriesDualAxis","args","createDualContext","_","seriesContext","colorScheme","linearColorScheme","pivotDualAxis","series","initFunnel","colorFunnelStyleFill","_result_funnel","funnelStyle","funnelTransformStyle","funnel","pivotFunnel","heatmapBandAxis","xAxisConfig","xBandAxis","bandAxisStyle","yBandAxis","colorCellStyleFill","_result_cell","cell","DATUM_HIDE_KEY","tooltipHeatmap","dimContent","meaContent","originalData","foldMap","initHeatmap","heatmap","range","min","max","val","pivotHeatmap","initHistogram","datasetHistogram","histogramXLinear","_config_title","isPivot","percentFormatter","isBarPercent","isColumnPercent","isAreaPercent","createLinearPercentFormat","binValues","getDefaultXFormatterOfHistogram","getDefaultValueFormatterOfHistogram","autoFormatter","tooltipHistogram","defaultXFormatter","defaultValueFormatter","updateMarkTooltipElement","dimFormatter","histogramVerticalCrosshairRect","_crosshair_xField","crosshair","isArray","binRange","binStart","binEnd","annotationPointOfHistogram","histogramSpec","x2Field","kdeRegressionLine","kdeLine","_s_getYAxisHelper","scaleY","viewData","simpleData","kde","scaleR","ld","defaultRegressionLineLabelX","defaultRegressionLineLabelY","ecdfRegressionLine","_result_axes","_result_axes1","ecdfLine","ecdf","yRange","y0","y1","leftAxis","histogram","pivotHistogram","initLine","pivotLine","initPie","pie","pivotPie","initRadar","radarAngleAxis","radarRadiusAxis","radar","pivotRadar","initRose","hasNegativeValue","rose","radiusAxis","colorRoseStyleFill","roseStyle","pivotRose","initRoseParallel","_encoding_radius","roseParallel","pivotRoseParallel","initScatter","datasetScatter","scatterSize","_encoding_size","_encoding_size1","size","labelScatter","tooltipScatter","horizontalCrosshairLine","_yAxisConfig_label","visible","lineColor","labelColor","labelVisible","labelBackgroundColor","yAxisFormatter","generateRegressionLinePipe","type","regressionFunction","getOptions","getDefaultRegressionOptions","getMinPoints","colorAttrOptions","groups","group","_colorAttrOptions_scale","groupData","mainColor","NaN","areaPoints","_parentNode_finalAttribute","_point_","point","alpha","linearRegressionLine","regressionLinear","lowessRegressionLine","regressionLowess","polynomialRegressionLine","logisticRegressionLine","regressionLogistic","scatter","pointStateHover","pivotScatter","_config_vseed_chartType_annotation","annotationAreaList","positionMap","defaultTextPosition","isBarLikeChart","markArea","selectorPoint","textBackgroundVisible","textBackgroundColor","textBackgroundBorderColor","textBackgroundBorderWidth","textBackgroundBorderRadius","textBackgroundPadding","areaColor","areaColorOpacity","areaBorderColor","areaBorderRadius","areaBorderWidth","areaLineDash","outerPadding","selectedData","textPosition","textAlign","ANNOTATION_AREA_TEXT_STYLE_BY_POSITION","textBaseline","ANNOTATION_Z_INDEX","xyList","positionData","yAxisHelper","regionRect","minX","maxX","maxY","minY","_context__scaleConfig","bandPosition","xBandWidth","startX","endX","width","middleX","yBandWidth","startY","endY","middleY","annotationHorizontalLineList","markLine","yValue","lineVisible","yValueArr","newMarkLine","findSelectedDatas","generateMarkPoint","annotationPointList","isHorizontalBar","defaultStyle","markPoint","offsetX","offsetY","dx","dy","markPointStyle","marks","mark","annotationVerticalLineList","xValue","xValueArr","formatGradientStops","stops","firstInvalidateIndex","stop","newStops","_result_series","_seriesSpec_label_style","splitLineConfig","splitValue","colorTheme","colorConfig","isPlainObject","_lineGraphics__attribute_segments","_lineGraphics_","lineSeries","lineMark","lineGraphics","seg","pt","scale","splitCoordinate","p","ratio","lineStroke","areaFill","VUtilColor","attrs","seriesSpec","measureValueKey","sub","obj","excludeMeasuresIds","tick","title","grid","labelAutoHide","labelAutoHideGap","labelAutoLimit","labelAutoLimitLength","labelAutoRotate","labelAutoRotateAngleRange","AXIS_LABEL_SPACE","orient","zero","nice","inverse","log","logBase","axisConfig","LINEAR_AXIS_INNER_OFFSET_TOP","idList","_find","_bandAxis_title","pivotAllDatasetReshapeInfo","bandAxis","isNull","allDatasetReshapeInfo","_colorIdMap_String","colorMapping","createSpecifiedForColorMapping","matchedList","colors","accurateMap","name","colorValue","accurateMatchedList","colorKey","colorObj","fuzzyMatchedList","ordinalPipe","linearPipe","measureIdList","_result_area","_result_bar","_result_line","_result_pie","_result_point","_result_rose","rectColor","_xAxisConfig_label","xAxisFormatter","records","pre","generateMeasureValue","labelAutoFormat","format","mergedMeasure","generateMeasurePercent","sum","num","vseedDimensions","advancedVSeedDimensions","advancedVSeedMeasures","wrap","showValue","showValuePercent","showDimension","labelOverlap","labelColorSmartInvert","labelStroke","labelFontSize","labelFontWeight","labelPosition","hasDimLabelEncoding","labelDims","labelMeas","percentFormat","createFormatter","_entry_data","dimLabels","meaLabels","statistics","measureValueLabel","measurePercentLabel","_findTreeNodesBy","legend","position","labelFontColor","railBackgroundColor","handlerBorderColor","colorMeasure","pagerIconColor","pagerIconDisableColor","maxSize","border","shapeType","legendPosition","labelTextColor","_unfoldInfo_colorIdMap_String","legends","colorSpecified","_colorIdMap_value","areaStyles","lineStyles","areaGroups","groupBy","_lineStyles_index","_lineStyles_index1","areaVisible","curveType","getCurveType","curveTension","getCurveTension","showStroke","barStyles","barBorderColor","barBorderStyle","barBorderWidth","barColor","barColorOpacity","barBorderOpacity","barRadius","barVisible","lineSmooth","isRadar","lineColorOpacity","dashSegment","dashGap","_advancedVSeed_config","pointStyles","_indicators_","_chartSpec_tooltip_dimension","_crosshair_xField_label","_crosshair_xField_label1","_crosshair_xField_label2","_crosshair_xField_label3","_crosshair_yField_label","_crosshair_yField_label1","_crosshair_yField_label2","_crosshair_yField_label3","indicators","labelHoverOnAxis","chartSpec","labelFormat","ind","_ind_chartSpec","axisStyle","reshapeMeasures","themConfig","axis","BAND_AXIS_INNER_OFFSET_IN_PIVOT","columns","columnDimensions","onlyCombination","isCombination","transparent","borderColor","bodyFontColor","headerFontColor","headerBackgroundColor","hoverHeaderBackgroundColor","hoverHeaderInlineBackgroundColor","outlineBorderLineWidth","frameCornerRadius","arg","noYAxis","chartPipeline","subMeasuresId","invalideMeasuresIds","newDatasetReshapeInfo","newContext","_encoding_key","rows","rowDimensions","colorName","setWholeIcon","shapeContainer","shapeElements","shapeElement","svgElement","tooltipElement","actualTooltip","_actualTooltip_content_i","tooltipConfig","fieldFormat","col","row","table","_encoding_column","_encoding_row","_spec_rows","hasRow","foldMapValues","bodyStyle","headerStyle","fontColor","fontSize","hoverCellBgColor","hoverInlineColor","hoverCellColor","tableThemeStyle","selectionStyle","aggregationRules","bodyCellStyle","bodyCellStyleList","selectedPos","newIndicators","newInd","indicatorKey","dataValue","cellHeaderPaths","headerPaths","originalDatum","path","pickBodyCellStyle","treeTreeToColumns","tree","callback","groupNode","props","matchedStyles","tableStyleMap","acc","fieldKey","ChartTypeEnum","isVTable","isVChart","_vseed_measures","parentIds","isPositionMeasure","dimensionTree","stack","parents","Map","nodesToProcess","visited","isDimensionGroup","child","parentList","autoNumFormatter","formatterFormat","thousandSeparator","prefix","suffix","symbol","fractionDigits","significantDigits","roundingMode","roundingPriority","numFormatterOptions","numFormatter","typeSymbol","numStr","parts","isMeasureGroup","deleted","findFirstMeasure","found","isMeasures","initialValue","mapValues","childrenKey","children","findTreeNodesBy","nodes","getDefaultAnnotationPoint","getLightAnnotationPoint","getDefaultAnnotationLine","getLightAnnotationHorizontalLine","getLightAnnotationVerticalLine","getDefaultAnnotationArea","getLightAnnotationArea","getLightAnnotation","getDarkAnnotationPoint","getDarkAnnotationHorizontalLine","getDarkAnnotationVerticalLine","getDarkAnnotationArea","getDarkAnnotation","getLightLinearAxis","getLightBandAxis","getDarkLinearAxis","getDarkBandAxis","getCommonBoxPlotStyle","getLightBoxPlotStyle","getDarkBoxPlotStyle","getCommonOutlierStyle","getLightOutlierStyle","getDarkOutlierStyle","getLightColorScheme","getDarkColorScheme","getLightLinearColorScheme","getDarkLinearColorScheme","getLightColor","getDarkColor","getDarkCrosshairLine","getDarkCrosshairRect","getLightCrosshairLine","getLightCrosshairRect","getLightFunnelTransformTheme","getDarkFunnelTransformTheme","getLightHeatmapCellTheme","getDarkHeatmapCellTheme","getDefaultLabel","getDarkLabel","getLightLabel","getDefaultLegend","getDarkLegend","getLightLegend","getDarkColorLegend","getLightColorLegend","getDefaultRegressionLine","getLightRegressionLine","getDarkRegressionLine","getDefaultTableConfig","getLightTableConfig","getDarkTableConfig","pickPivotChartGridConfig","tableConfig","getLightPivotChartGridConfig","getDarkPivotChartGridConfig","getDefaultTooltip","getLightTooltip","getDarkTooltip","barBandAxis","crosshairLine","crosshairRect"],"mappings":"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"}