"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["9479"],{72858:function(e,n,t){t.r(n),t.d(n,{default:()=>d});var r=t(31549),s=t(6603),a=t(89956);function i(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",h3:"h3",div:"div",p:"p",code:"code",pre:"pre"},(0,s.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"功能介绍",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#功能介绍",children:"#"}),"功能介绍"]}),"\n",(0,r.jsxs)(n.h2,{id:"图表类型切换",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#图表类型切换",children:"#"}),"图表类型切换"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect, useState } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n  const [chartType, setChartType] = useState('line')\n  const chartTypes = [\n    'line',\n    'column',\n    'columnPercent',\n    'columnParallel',\n    'bar',\n    'barPercent',\n    'barParallel',\n    'area',\n    'areaPercent',\n    'rose',\n    'roseParallel',\n    'pie',\n    'donut',\n    'scatter',\n    'funnel',\n  ]\n\n  const changeChartType = (c) => () => {\n    setChartType(c)\n  }\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType,\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n      ],\n    }\n    const builder = Builder.from(vseed)\n    const spec = builder.build()\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n    return () => vchart.release()\n  }, [chartType])\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column' }}>\n      <div>\n        {chartTypes.map((d) => {\n          return (\n            <span key={d} style={{ margin: '0 2px' }}>\n              <button\n                onClick={changeChartType(d)}\n                style={{ fontSize: 10, padding: '0 2px', border: '1px solid #cccccc' }}\n              >\n                {d}\n              </button>\n            </span>\n          )\n        })}\n      </div>\n      <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n    </div>\n  )\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h2,{id:"数据重塑",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#数据重塑",children:"#"}),"数据重塑"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect, useState } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n  const datasetList = [\n    // 单指标零维度\n    [{ profit: 10 }],\n    // 单指标单维度\n    [\n      { date: '2019', profit: 10 },\n      { date: '2020', profit: 30 },\n      { date: '2021', profit: 30 },\n      { date: '2022', profit: 50 },\n      { date: '2023', profit: 40 },\n    ],\n    // 单指标两维度\n    [\n      { date: '2019', region: 'A', profit: 1 },\n      { date: '2019', region: 'B', profit: 2 },\n      { date: '2019', region: 'C', profit: 3 },\n      { date: '2019', region: 'D', profit: 4 },\n      { date: '2019', region: 'E', profit: 5 },\n\n      { date: '2020', region: 'A', profit: 10 },\n      { date: '2020', region: 'B', profit: 9 },\n      { date: '2020', region: 'C', profit: 8 },\n      { date: '2020', region: 'D', profit: 7 },\n      { date: '2020', region: 'E', profit: 6 },\n    ],\n    // 单指标多维度\n    [\n      { date: '2019', region: 'east', city: 'A', profit: 10 },\n      { date: '2019', region: 'east', city: 'B', profit: 30 },\n      { date: '2019', region: 'east', city: 'C', profit: 30 },\n      { date: '2019', region: 'east', city: 'D', profit: 50 },\n      { date: '2019', region: 'east', city: 'E', profit: 40 },\n      { date: '2020', region: 'east', city: 'A', profit: 10 },\n      { date: '2020', region: 'east', city: 'B', profit: 30 },\n      { date: '2020', region: 'east', city: 'C', profit: 30 },\n      { date: '2020', region: 'east', city: 'D', profit: 50 },\n      { date: '2020', region: 'east', city: 'E', profit: 40 },\n    ],\n    // 多指标零维度\n    [{ profit: 1, sales: 2, discount: 0.1 }],\n    // 多指标单维度\n    [\n      { date: '2019', profit: 10, sales: 20, discount: 0.1 },\n      { date: '2020', profit: 30, sales: 60, discount: 0.1 },\n      { date: '2021', profit: 30, sales: 60, discount: 0.1 },\n      { date: '2022', profit: 50, sales: 100, discount: 0.1 },\n      { date: '2023', profit: 40, sales: 80, discount: 0.1 },\n    ],\n    // 多指标两维度\n    [\n      { date: '2019', type: 'A', profit: 10, sales: 20, discount: 0.1 },\n      { date: '2019', type: 'B', profit: 30, sales: 60, discount: 0.1 },\n      { date: '2019', type: 'C', profit: 30, sales: 60, discount: 0.1 },\n\n      { date: '2020', type: 'A', profit: 10, sales: 20, discount: 0.1 },\n      { date: '2020', type: 'B', profit: 30, sales: 60, discount: 0.1 },\n      { date: '2020', type: 'C', profit: 30, sales: 60, discount: 0.1 },\n    ],\n    // 多指标多维度\n    [\n      { date: '2019', region: 'east', city: 'A', profit: 10, sales: 20, discount: 0.1 },\n      { date: '2019', region: 'east', city: 'B', profit: 30, sales: 60, discount: 0.1 },\n      { date: '2019', region: 'east', city: 'C', profit: 30, sales: 60, discount: 0.1 },\n      { date: '2019', region: 'east', city: 'D', profit: 50, sales: 100, discount: 0.1 },\n      { date: '2019', region: 'east', city: 'E', profit: 40, sales: 80, discount: 0.1 },\n      { date: '2020', region: 'east', city: 'A', profit: 10, sales: 20, discount: 0.1 },\n      { date: '2020', region: 'east', city: 'B', profit: 30, sales: 60, discount: 0.1 },\n      { date: '2020', region: 'east', city: 'C', profit: 30, sales: 60, discount: 0.1 },\n      { date: '2020', region: 'east', city: 'D', profit: 50, sales: 100, discount: 0.1 },\n      { date: '2020', region: 'east', city: 'E', profit: 40, sales: 80, discount: 0.1 },\n    ],\n  ]\n\n  const chartTypes = [\n    'line',\n    'column',\n    'columnPercent',\n    'columnParallel',\n    'bar',\n    'barPercent',\n    'barParallel',\n    'area',\n    'areaPercent',\n    'rose',\n    'roseParallel',\n    'pie',\n    'donut',\n    'funnel',\n    'scatter',\n  ]\n\n  const [chartType, setChartType] = useState('columnParallel')\n  const [dataset, setDataset] = useState(datasetList[1])\n  const builderRef = useRef(null)\n  const changeDataset = (c) => () => {\n    setDataset(c)\n  }\n\n  const changeChartType = (c) => () => {\n    setChartType(c)\n  }\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType,\n      dataset,\n      legend: {\n        position: 'bottom',\n      },\n    }\n\n    const builder = Builder.from(vseed)\n    const spec = builder.build()\n    builderRef.current = builder\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  }, [dataset, chartType])\n\n  return (\n    <div\n      style={{ display: 'flex', flexDirection: 'column' }}\n      onClick={() => {\n        console.group(`selected ${chartType}`)\n        console.log('builder', builderRef.current)\n        console.log('spec', builderRef.current.spec)\n        console.log('vseed', builderRef.current.vseed)\n        console.log('advancedVSeed', builderRef.current.advancedVSeed)\n        console.groupEnd()\n      }}\n    >\n      <div>\n        {datasetList.map((d, index) => {\n          return (\n            <span key={index} style={{ margin: '0 2px' }}>\n              <button\n                onClick={changeDataset(d)}\n                style={{ fontSize: 10, padding: '0 2px', border: '1px solid #cccccc' }}\n              >\n                {`dataset` + (index + 1)}\n              </button>\n            </span>\n          )\n        })}\n      </div>\n      <div>\n        {chartTypes.map((d) => {\n          return (\n            <span key={d} style={{ margin: '0 2px' }}>\n              <button\n                onClick={changeChartType(d)}\n                style={{ fontSize: 10, padding: '0 2px', border: '1px solid #cccccc' }}\n              >\n                {d}\n              </button>\n            </span>\n          )\n        })}\n      </div>\n\n      <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n    </div>\n  )\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h2,{id:"数据格式",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#数据格式",children:"#"}),"数据格式"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useDark } from 'rspress/runtime'\n\nimport { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder, isPivotChart, isVChart, isVTable } from '@visactor/vseed'\nimport { ListTable, PivotChart, register } from '@visactor/vtable'\n\nregisterAll()\nregister.chartModule('vchart', VChart)\n\nconst Demo = () => {\n  const vseed: VSeed = {\n    chartType: 'columnParallel',\n    measures: [\n      {\n        id: 'profit',\n        alias: '利润',\n        autoFormat: false,\n        format: {\n          type: 'number',\n          ratio: 1000,\n          thousandSeparator: true,\n          decimalPlaces: 0,\n          symbol: '千',\n          prefix: '利润',\n          suffix: '$',\n        },\n      },\n      {\n        id: 'sales',\n        alias: '销售额',\n        autoFormat: true,\n      },\n    ],\n    dimensions: [{ id: 'date', alias: '日期', location: 'dimension' }],\n    dataset: [\n      { date: '2019', profit: 10000, sales: 200000, discount: 0.5, rateOfReturn: 0.001 },\n      { date: '2020', profit: 20000, sales: 400000, discount: 0.2, rateOfReturn: 0.002 },\n      { date: '2021', profit: 30000, sales: 600000, discount: 0.4, rateOfReturn: 0.003 },\n      { date: '2022', profit: 40000, sales: 800000, discount: 0.2, rateOfReturn: 0.004 },\n      { date: '2023', profit: 50000, sales: 1000000, discount: 0.05, rateOfReturn: 0.005 },\n    ],\n  }\n\n  return <SimpleVSeedRender vseed={vseed} />\n}\n\nconst SimpleVSeedRender = (props: { vseed: VSeed }) => {\n  const { vseed } = props\n  const ref = useRef<HTMLDivElement>(null)\n  const dark = useDark()\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n    const theme = dark ? 'dark' : 'light'\n    const spec = Builder.from({ ...vseed, theme }).build()\n\n    if (isPivotChart(vseed)) {\n      const tableInstance = new PivotChart(ref.current, spec)\n      return () => tableInstance.release()\n    } else if (isVChart(vseed)) {\n      const vchart = new VChart(spec, { dom: ref.current })\n      vchart.renderSync()\n      return () => vchart.release()\n    } else if (isVTable(vseed)) {\n      const tableInstance = new ListTable(ref.current, spec)\n      return () => tableInstance.release()\n    }\n  }, [vseed, dark])\n\n  return <div ref={ref} style={{ height: 300, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h2,{id:"透视与组合",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#透视与组合",children:"#"}),"透视与组合"]}),"\n",(0,r.jsxs)(n.h3,{id:"指标分组",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#指标分组",children:"#"}),"指标分组"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect, memo } from 'react'\nimport VChart from '@visactor/vchart'\nimport { register, PivotChart, PivotChartConstructorOptions } from '@visactor/vtable'\nimport { registerAll, VSeed, Builder, UnfoldDimensionGroupId } from '@visactor/vseed'\n\nregister.chartModule('vchart', VChart)\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'line',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n      ],\n      dimensions: [{ id: 'date', alias: '日期' }],\n      measures: [\n        {\n          id: 'profit-group',\n          children: [{ id: 'profit', alias: '利润' }],\n        },\n        {\n          id: 'sales-group',\n          children: [{ id: 'sales', alias: '销售额' }],\n        },\n      ],\n    }\n\n    const builder = Builder.from(vseed)\n    const spec = builder.build()\n\n    const tableInstance = new PivotChart(ref.current, spec)\n\n    tableInstance.on('legend_item_click', (args) => {\n      console.log('LEGEND_ITEM_CLICK', args)\n      tableInstance.updateFilterRules([\n        {\n          filterKey: UnfoldDimensionGroupId,\n          filteredValues: args.value,\n        },\n      ])\n    })\n\n    return () => tableInstance.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h3,{id:"行列透视",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#行列透视",children:"#"}),"行列透视"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect, memo } from 'react'\nimport VChart from '@visactor/vchart'\nimport { register, PivotChart, PivotChartConstructorOptions } from '@visactor/vtable'\nimport { registerAll, VSeed, Builder, UnfoldDimensionGroupId } from '@visactor/vseed'\n\nregister.chartModule('vchart', VChart)\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'column',\n      dataset: [\n        { date: '2019', category: 'food', profit: 10, sales: 88 },\n        { date: '2019', category: 'book', profit: 33, sales: 210 },\n        { date: '2019', category: 'tools', profit: 27, sales: 150 },\n\n        { date: '2020', category: 'food', profit: 10, sales: 100 },\n        { date: '2020', category: 'book', profit: 11, sales: 122 },\n        { date: '2020', category: 'tools', profit: 23, sales: 150 },\n\n        { date: '2021', category: 'food', profit: 10, sales: 100 },\n        { date: '2021', category: 'book', profit: 30, sales: 190 },\n        { date: '2021', category: 'tools', profit: 15, sales: 50 },\n      ],\n      dimensions: [\n        { id: 'date', alias: '日期' },\n        { id: 'category', alias: '类型', location: 'columnDimension' },\n      ],\n      measures: [\n        {\n          id: 'profit-group',\n          children: [{ id: 'profit', alias: '利润' }],\n        },\n        {\n          id: 'sales-group',\n          children: [{ id: 'sales', alias: '销售额' }],\n        },\n      ],\n    }\n\n    const builder = Builder.from(vseed)\n    const spec = builder.build()\n\n    const tableInstance = new PivotChart(ref.current, spec)\n\n    tableInstance.on('legend_item_click', (args) => {\n      console.log('LEGEND_ITEM_CLICK', args)\n      tableInstance.updateFilterRules([\n        {\n          filterKey: UnfoldDimensionGroupId,\n          filteredValues: args.value,\n        },\n      ])\n    })\n\n    return () => tableInstance.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h2,{id:"条件样式",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#条件样式",children:"#"}),"条件样式"]}),"\n",(0,r.jsxs)(n.h3,{id:"矩形图元样式",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#矩形图元样式",children:"#"}),"矩形图元样式"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'column',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n        { date: '2024', profit: 70, sales: 100 },\n      ],\n      barStyle: [\n        {\n          barRadius: 10,\n          barColorOpacity: 0.25,\n        },\n        {\n          selector: {\n            field: 'sales',\n            op: '>',\n            value: 400,\n          },\n          // selector: {\n          //   field: 'sales',\n          //   op: '>=',\n          //   value: 400,\n          // },\n          // selector: 30,\n          // selector: [40,30,50],\n          // selector: { date:\"2019\" },\n          // selector: [{ date:\"2019\" },{ date:\"2020\", profit: 30 }],\n          barColorOpacity: 1,\n          barRadius: 0,\n        },\n      ],\n    }\n\n    const spec = Builder.from(vseed).build()\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h3,{id:"点图元样式",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#点图元样式",children:"#"}),"点图元样式"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'line',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n        { date: '2024', profit: 70, sales: 100 },\n      ],\n      pointStyle: [\n        {\n          pointSize: 10,\n          pointColorOpacity: 0.25,\n        },\n        {\n          selector: {\n            field: 'profit',\n            op: '>',\n            value: 40,\n          },\n          // selector: {\n          //   field: 'sales',\n          //   op: '>=',\n          //   value: 400,\n          // },\n          // selector: 30,\n          // selector: [40,30,50],\n          // selector: { date:\"2019\" },\n          // selector: [{ date:\"2019\" },{ date:\"2020\", profit: 30 }],\n          pointColorOpacity: 1,\n          pointSize: 20,\n        },\n      ],\n    }\n\n    const spec = Builder.from(vseed).build()\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h3,{id:"线图元样式",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#线图元样式",children:"#"}),"线图元样式"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'line',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n        { date: '2024', profit: 70, sales: 100 },\n      ],\n      lineStyle: [\n        {\n          lineWidth: 2,\n          lineColorOpacity: 0.25,\n          lineSmooth: true,\n        },\n        {\n          selector: {\n            field: 'profit',\n            op: '>',\n            value: 40,\n          },\n          // selector: {\n          //   field: 'sales',\n          //   op: '>=',\n          //   value: 400,\n          // },\n          // selector: 30,\n          // selector: [40,30,50],\n          // selector: { date:\"2019\" },\n          // selector: [{ date:\"2019\" },{ date:\"2020\", profit: 30 }],\n          lineColorOpacity: 1,\n          lineWidth: 5,\n        },\n      ],\n    }\n\n    const spec = Builder.from(vseed).build()\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h3,{id:"面图元样式",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#面图元样式",children:"#"}),"面图元样式"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'area',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n        { date: '2024', profit: 70, sales: 100 },\n      ],\n      areaStyle: [\n        {\n          areaColorOpacity: 0.2,\n        },\n        {\n          selector: {\n            field: 'profit',\n            op: '>',\n            value: 40,\n          },\n          // selector: {\n          //   field: 'sales',\n          //   op: '>=',\n          //   value: 400,\n          // },\n          // selector: 30,\n          // selector: [40,30,50],\n          // selector: { date:\"2019\" },\n          // selector: [{ date:\"2019\" },{ date:\"2020\", profit: 30 }],\n          areaColorOpacity: 1,\n        },\n      ],\n    }\n\n    const spec = Builder.from(vseed).build()\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h2,{id:"标注",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#标注",children:"#"}),"标注"]}),"\n",(0,r.jsxs)(n.h3,{id:"数据点标注",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#数据点标注",children:"#"}),"数据点标注"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'area',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n        { date: '2024', profit: 70, sales: 100 },\n      ],\n      annotationPoint: {\n        selector: {\n          field: 'profit',\n          op: '>',\n          value: 10,\n        },\n        // selector: {\n        //   field: 'sales',\n        //   op: '>=',\n        //   value: 400,\n        // },\n        // selector: 30,\n        // selector: [40,30,50],\n        // selector: { date:\"2019\" },\n        // selector: [{ date:\"2019\" },{ date:\"2020\", profit: 30 }],\n\n        text: '数据点标注',\n      },\n    }\n\n    const spec = Builder.from(vseed).build()\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h3,{id:"数据水平线标注",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#数据水平线标注",children:"#"}),"数据水平线标注"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'area',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n        { date: '2024', profit: 70, sales: 100 },\n      ],\n      annotationHorizontalLine: {\n        yValue: 170,\n        text: '利润 70',\n      },\n    }\n\n    const spec = Builder.from(vseed).build()\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h3,{id:"数据垂直线标注",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#数据垂直线标注",children:"#"}),"数据垂直线标注"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'columnParallel',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n        { date: '2024', profit: 70, sales: 100 },\n      ],\n      annotationVerticalLine: {\n        selector: '2023',\n        text: '23年',\n      },\n    }\n\n    const spec = Builder.from(vseed).build()\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h3,{id:"数据区域标注",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#数据区域标注",children:"#"}),"数据区域标注"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'columnParallel',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n        { date: '2024', profit: 70, sales: 100 },\n      ],\n      annotationArea: {\n        selector: [{ date: '2022' }, { date: '2023' }],\n        text: '22~23年',\n        textPosition: 'top',\n        textAlign: 'center',\n      },\n    }\n\n    const spec = Builder.from(vseed).build()\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h2,{id:"跨平台渲染",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#跨平台渲染",children:"#"}),"跨平台渲染"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["\n",(0,r.jsx)(n.code,{children:"vseed"}),"支持无损序列化, 因此可以",(0,r.jsx)(n.code,{children:"跨平台传输"}),", ",(0,r.jsx)(n.code,{children:"复制粘贴"}),", 在Node环境、浏览器环境, 都可以直接通过",(0,r.jsx)(n.code,{children:"builder"}),"获取到完整的spec"]})})]}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect, useState } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const [vseed, setVSeed] = useState()\n  const ref = useRef()\n  const chartRef = useRef()\n  const vseed1: VSeed = {\n    chartType: 'line',\n    dataset: [\n      { date: '2019', profit: 10, sales: 100 },\n      { date: '2020', profit: 30, sales: 200 },\n      { date: '2021', profit: 30, sales: 300 },\n      { date: '2022', profit: 50, sales: 400 },\n      { date: '2023', profit: 40, sales: 500 },\n    ],\n  }\n\n  const vseed2: VSeed = {\n    chartType: 'bar',\n    dataset: [\n      { date: '2019', profit: 10, sales: 100 },\n      { date: '2020', profit: 30, sales: 200 },\n      { date: '2021', profit: 30, sales: 300 },\n      { date: '2022', profit: 50, sales: 400 },\n      { date: '2023', profit: 40, sales: 500 },\n    ],\n  }\n\n  const copyVSeed1 = async () => {\n    await navigator.clipboard.writeText(JSON.stringify(vseed1))\n  }\n  const copyVSeed2 = async () => {\n    await navigator.clipboard.writeText(JSON.stringify(vseed2))\n  }\n\n  const paste = async () => {\n    try {\n      if (chartRef.current) {\n        chartRef.current.release()\n      }\n      const clipboardText = await navigator.clipboard.readText()\n      const parsedVSeed = JSON.parse(clipboardText)\n\n      const builder = Builder.from(parsedVSeed)\n      const advancedVSeed = builder.buildAdvanced()\n      const spec = builder.buildSpec(advancedVSeed)\n      const vchart = new VChart(spec, { dom: ref.current })\n      vchart.renderSync()\n\n      chartRef.current = vchart\n    } catch (error) {\n      console.log('debug', error)\n      alert('从剪切板读取内容时出错')\n    }\n  }\n\n  return (\n    <div style={{ display: 'flex' }}>\n      <div style={{ width: 100 }}>\n        <button onClick={copyVSeed1} style={{ width: 100, marginBottom: 4 }}>\n          copy demo1\n        </button>\n        <button onClick={copyVSeed2} style={{ width: 100, marginBottom: 4 }}>\n          copy demo2\n        </button>\n        <button onClick={paste} style={{ width: 100 }}>\n          paste\n        </button>\n      </div>\n\n      <div ref={ref} style={{ height: 260, width: 'calc(100% - 100px)' }}></div>\n    </div>\n  )\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h2,{id:"分离式构建",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#分离式构建",children:"#"}),"分离式构建"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["\n通常情况下, 图表的数据处理比较耗时, VSeed支持拆分数据处理与数据渲染, ",(0,r.jsx)(n.code,{children:"build"}),"提供",(0,r.jsx)(n.code,{children:"buildAdvanced"}),"和",(0,r.jsx)(n.code,{children:"buildSpec"}),"进行分离式构建"]})})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",meta:"pure title=分离式构建 {4,7}",children:"const builder = Builder.from(vseed)\n\n// Node.js\nconst advancedVSeed = builder.buildAdvanced()\n\n// Web Browser\nconst spec = builder.buildSpec(advancedVSeed)\n\n// spec用于渲染\n"})}),"\n",(0,r.jsx)(a.Z,{code:"import { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder } from '@visactor/vseed'\nregisterAll()\n\nconst Demo = () => {\n  const ref = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n\n    const vseed: VSeed = {\n      chartType: 'line',\n      dataset: [\n        { date: '2019', profit: 10, sales: 100 },\n        { date: '2020', profit: 30, sales: 200 },\n        { date: '2021', profit: 30, sales: 300 },\n        { date: '2022', profit: 50, sales: 400 },\n        { date: '2023', profit: 40, sales: 500 },\n      ],\n    }\n    const builder = Builder.from(vseed)\n    const advancedVSeed = builder.buildAdvanced()\n    const spec = builder.buildSpec(advancedVSeed)\n\n    const vchart = new VChart(spec, { dom: ref.current })\n    vchart.renderSync()\n\n    return () => vchart.release()\n  })\n\n  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"}),"\n",(0,r.jsxs)(n.h2,{id:"国际化",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#国际化",children:"#"}),"国际化"]}),"\n",(0,r.jsx)(a.Z,{code:"import { useDark } from 'rspress/runtime'\n\nimport { useRef, useEffect } from 'react'\nimport VChart from '@visactor/vchart'\nimport { registerAll, VSeed, Builder, isPivotChart, isVChart, isVTable } from '@visactor/vseed'\nimport { ListTable, PivotChart, register } from '@visactor/vtable'\n\nregisterAll()\nregister.chartModule('vchart', VChart)\n\nconst Demo = () => {\n  const vseed: VSeed = {\n    chartType: 'columnParallel',\n    locale: 'en-US',\n    measures: [\n      {\n        id: 'profit',\n        alias: '利润',\n        autoFormat: true,\n      },\n      {\n        id: 'sales',\n        alias: '销售额',\n        autoFormat: true,\n      },\n      {\n        id: 'discount',\n        alias: '折扣',\n        autoFormat: true,\n      },\n      {\n        id: 'rateOfReturn',\n        alias: '回报率',\n        autoFormat: true,\n      },\n    ],\n    dimensions: [{ id: 'date', alias: '日期', location: 'dimension' }],\n    dataset: [\n      { date: '2019', profit: 10000, sales: 200000, discount: 0.5, rateOfReturn: 0.001 },\n      { date: '2020', profit: 20000, sales: 400000, discount: 0.2, rateOfReturn: 0.002 },\n      { date: '2021', profit: 30000, sales: 600000, discount: 0.4, rateOfReturn: 0.003 },\n      { date: '2022', profit: 40000, sales: 800000, discount: 0.2, rateOfReturn: 0.004 },\n      { date: '2023', profit: 50000, sales: 1000000, discount: 0.05, rateOfReturn: 0.005 },\n    ],\n  }\n\n  return <SimpleVSeedRender vseed={vseed} />\n}\n\nconst SimpleVSeedRender = (props: { vseed: VSeed }) => {\n  const { vseed } = props\n  const ref = useRef<HTMLDivElement>(null)\n  const dark = useDark()\n  useEffect(() => {\n    if (!ref.current) {\n      return\n    }\n    const theme = dark ? 'dark' : 'light'\n    const spec = Builder.from({ ...vseed, theme }).build()\n\n    if (isPivotChart(vseed)) {\n      const tableInstance = new PivotChart(ref.current, spec)\n      return () => tableInstance.release()\n    } else if (isVChart(vseed)) {\n      const vchart = new VChart(spec, { dom: ref.current })\n      vchart.renderSync()\n      return () => vchart.release()\n    } else if (isVTable(vseed)) {\n      const tableInstance = new ListTable(ref.current, spec)\n      return () => tableInstance.release()\n    }\n  }, [vseed, dark])\n\n  return <div ref={ref} style={{ height: 300, width: '100%' }}></div>\n}\n\nexport default Demo",language:"tsx",direction:"vertical",editorPosition:"left"})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(i,e)})):i(e)}let d=o;o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["zh-CN%2Fguide%2Fguide.mdx"]={toc:[{id:"图表类型切换",text:"图表类型切换",depth:2},{id:"数据重塑",text:"数据重塑",depth:2},{id:"数据格式",text:"数据格式",depth:2},{id:"透视与组合",text:"透视与组合",depth:2},{id:"指标分组",text:"指标分组",depth:3},{id:"行列透视",text:"行列透视",depth:3},{id:"条件样式",text:"条件样式",depth:2},{id:"矩形图元样式",text:"矩形图元样式",depth:3},{id:"点图元样式",text:"点图元样式",depth:3},{id:"线图元样式",text:"线图元样式",depth:3},{id:"面图元样式",text:"面图元样式",depth:3},{id:"标注",text:"标注",depth:2},{id:"数据点标注",text:"数据点标注",depth:3},{id:"数据水平线标注",text:"数据水平线标注",depth:3},{id:"数据垂直线标注",text:"数据垂直线标注",depth:3},{id:"数据区域标注",text:"数据区域标注",depth:3},{id:"跨平台渲染",text:"跨平台渲染",depth:2},{id:"分离式构建",text:"分离式构建",depth:2},{id:"国际化",text:"国际化",depth:2}],title:"功能介绍",headingTitle:"功能介绍",frontmatter:{pageType:"doc"}}}}]);
//# sourceMappingURL=9479.0c70bbc4.js.map