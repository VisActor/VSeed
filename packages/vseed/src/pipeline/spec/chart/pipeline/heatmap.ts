import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'
import {
  datasetXY,
  backgroundColor,
  label,
  tooltipHeatmap,
  initPivot,
  datasetPivot,
  pivotIndicators,
  pivotAdapter,
  pivotIndicatorsAsRow,
  pivotGridStyle,
  pivotColumnDimensions,
  pivotRowDimensions,
  annotationPoint,
  annotationVerticalLine,
  annotationHorizontalLine,
  annotationArea,
  discreteLegend,
  color,
  colorAdapter,
  linearColor,
  heatmapColorLegend,
  cellStyle,
  colorCellStyleFill,
  pivotDiscreteLegend,
  pivotTitle,
  pivotAxisStyle,
  heatmapBandAxis,
  pivotColorLegend,
  heatmapColorDomain,
} from '../pipes'
import { initHeatmap } from '../pipes/init/heatmap'

const heatmap: VChartSpecPipeline = [
  initHeatmap,
  backgroundColor,
  datasetXY,
  colorAdapter(color, linearColor),
  label,
  heatmapBandAxis,
  colorAdapter(discreteLegend, heatmapColorLegend),
  colorCellStyleFill(cellStyle),
  tooltipHeatmap,
  annotationPoint,
  annotationVerticalLine,
  annotationHorizontalLine,
  annotationArea,
]

const pivotHeatmap: PivotChartSpecPipeline = [
  initPivot,
  pivotGridStyle,
  pivotIndicatorsAsRow,
  datasetPivot,
  pivotIndicators([
    pivotAxisStyle(initHeatmap),
    backgroundColor,
    datasetXY,
    colorAdapter(color, linearColor),
    label,
    heatmapBandAxis,
    tooltipHeatmap,
    colorCellStyleFill(cellStyle),
    annotationPoint,
    annotationVerticalLine,
    annotationHorizontalLine,
    annotationArea,
  ]),
  heatmapColorDomain,
  pivotRowDimensions,
  pivotColumnDimensions,
  pivotTitle,
  colorAdapter(pivotDiscreteLegend, pivotColorLegend),
]

export const heatmapSpecPipeline = [pivotAdapter(heatmap, pivotHeatmap)]
