---
title: 标题
playgroundDirection: horizontal
pageType: custom
---

```tsx
const Demo = () => {
  const MeasureNames = '__MeaName__'

  const vseed: VSeed = {
    color: {
      colorScheme: [
        '#8D72F6',
        '#5766EC',
        '#66A3FE',
        '#51D5E6',
        '#4EC0B3',
        '#F9DF90',
        '#F9AD71',
        '#ED8888',
        '#E9A0C3',
        '#D77DD3',
      ],
    },
    legend: {
      enable: true,
      position: 'rightTop',
      maxSize: 1,
      labelFontSize: 12,
      labelFontColor: '#6F6F6F',
    },
    dualChartType: [
      {
        primary: 'scatter',
        secondary: 'columnPercent',
      },
    ],
    chartType: 'dualAxis',
    dataset: [
      {
        di_20250914101717_6266: '公司',
        di_20250914101717_a7e4: '中南',
        me_20250914101727_1111: '5991',
        me_20250914101727_9d4f: '2395179.3460000106',
      },
      {
        di_20250914101717_6266: '消费者',
        di_20250914101717_a7e4: '东北',
        me_20250914101727_1111: '4852',
        me_20250914101727_9d4f: '1863283.821',
      },
      {
        di_20250914101717_6266: '公司',
        di_20250914101717_a7e4: '东北',
        me_20250914101727_1111: '2976',
        me_20250914101727_9d4f: '1298340.3229999975',
      },
      {
        di_20250914101717_6266: '消费者',
        di_20250914101717_a7e4: '西南',
        me_20250914101727_1111: '3802',
        me_20250914101727_9d4f: '1481964.9879999934',
      },
      {
        di_20250914101717_6266: '消费者',
        di_20250914101717_a7e4: '中南',
        me_20250914101727_1111: '6674',
        me_20250914101727_9d4f: '2964133.059999989',
      },
      {
        di_20250914101717_6266: '消费者',
        di_20250914101717_a7e4: '西北',
        me_20250914101727_1111: '2281',
        me_20250914101727_9d4f: '1198059.436000001',
      },
      {
        di_20250914101717_6266: '消费者',
        di_20250914101717_a7e4: '华东',
        me_20250914101727_1111: '8704',
        me_20250914101727_9d4f: '3718172.451000012',
      },
      {
        di_20250914101717_6266: '消费者',
        di_20250914101717_a7e4: '华北',
        me_20250914101727_1111: '4792',
        me_20250914101727_9d4f: '2019475.7170000044',
      },
      {
        di_20250914101717_6266: '小型企业',
        di_20250914101717_a7e4: '东北',
        me_20250914101727_1111: '2055',
        me_20250914101727_9d4f: '912951.4030000004',
      },
      {
        di_20250914101717_6266: '小型企业',
        di_20250914101717_a7e4: '中南',
        me_20250914101727_1111: '3079',
        me_20250914101727_9d4f: '1356129.5789999985',
      },
      {
        di_20250914101717_6266: '小型企业',
        di_20250914101717_a7e4: '西南',
        me_20250914101727_1111: '748',
        me_20250914101727_9d4f: '230624.96800000023',
      },
      {
        di_20250914101717_6266: '公司',
        di_20250914101717_a7e4: '西北',
        me_20250914101727_1111: '1018',
        me_20250914101727_9d4f: '369699.7640000004',
      },
      {
        di_20250914101717_6266: '公司',
        di_20250914101717_a7e4: '华东',
        me_20250914101727_1111: '5254',
        me_20250914101727_9d4f: '2748821.432000004',
      },
      {
        di_20250914101717_6266: '公司',
        di_20250914101717_a7e4: '华北',
        me_20250914101727_1111: '1853',
        me_20250914101727_9d4f: '938985.3690000006',
      },
      {
        di_20250914101717_6266: '小型企业',
        di_20250914101717_a7e4: '华东',
        me_20250914101727_1111: '3082',
        me_20250914101727_9d4f: '1457499.204',
      },
      {
        di_20250914101717_6266: '小型企业',
        di_20250914101717_a7e4: '华北',
        me_20250914101727_1111: '1828',
        me_20250914101727_9d4f: '655606.930999999',
      },
      {
        di_20250914101717_6266: '小型企业',
        di_20250914101717_a7e4: '西北',
        me_20250914101727_1111: '251',
        me_20250914101727_9d4f: '123130.028',
      },
      {
        di_20250914101717_6266: '公司',
        di_20250914101717_a7e4: '西南',
        me_20250914101727_1111: '2146',
        me_20250914101727_9d4f: '1167314.5400000024',
      },
    ],
    measures: [
      {
        id: 'me_20250914101727_9d4f',
        alias: 'sum(销售额)',
        encoding: 'radius',
        format: {
          auto: false,
          kSep: true,
          precision: 4,
          precisionType: 'significantDecimal',
          type: 'digit',
          unit: null,
        },
        autoFormat: false,
      },
      {
        id: 'me_20250914101727_1111',
        alias: 'sum(数量)',
        encoding: 'radius',
        format: {
          auto: false,
          kSep: true,
          precision: null,
          precisionType: null,
          type: 'none',
          unit: null,
        },
        autoFormat: false,
      },
    ],
    label: {
      enable: false,
    },
    dimensions: [
      {
        id: 'di_20250914101717_6266',
        alias: '细分',
        encoding: 'angle',
        autoFormat: true,
      },
      {
        id: 'di_20250914101717_a7e4',
        alias: '地区',
        encoding: 'color',
        autoFormat: true,
      },
      {
        id: '__MeaName__',
        encoding: 'color',
      },
    ],
    locale: 'zh-CN',
  }

  if (zVSeed.safeParse(vseed).success) {
    console.log('zVSeed parse success!!!')
  } else {
    console.error('zVSeed parse error!!!')
  }

  return <SimpleVSeedRender vseed={vseed} />
}

import { useRef, useEffect } from 'react'
import { useDark } from 'rspress/runtime'
import VChart from '@visactor/vchart'
import { ListTable, PivotTable, PivotChart, register } from '@visactor/vtable'
import {
  registerAll,
  VSeed,
  Builder,
  isPivotChart,
  isVChart,
  isPivotTable,
  isTable,
  zVSeed,
  ColorIdEncoding,
} from '@visactor/vseed'

registerAll()
register.chartModule('vchart', VChart)

const SimpleVSeedRender = (props: { vseed: VSeed }) => {
  const { vseed } = props
  const ref = useRef<HTMLDivElement>(null)
  const builderRef = useRef<Builder>()
  const dark = useDark()
  useEffect(() => {
    if (!ref.current) {
      return
    }
    const theme = dark ? 'dark' : 'light'
    const builder = Builder.from({ ...vseed, theme })
    const spec = builder.build()
    console.log('builder', builder)
    console.log('builder performance', builder.performance)

    builderRef.current = builder
    if (isPivotChart(vseed)) {
      const tableInstance = new PivotChart(ref.current, spec)
      tableInstance.on('legend_item_click', (args) => {
        console.log('LEGEND_ITEM_CLICK', args)
        tableInstance.updateFilterRules([
          {
            filterKey: ColorIdEncoding,
            filteredValues: args.value,
          },
        ])
      })

      return () => tableInstance.release()
    } else if (isVChart(vseed)) {
      const vchart = new VChart(spec, { dom: ref.current })
      vchart.renderSync()
      return () => vchart.release()
    } else if (isTable(vseed)) {
      const tableInstance = new ListTable(ref.current, spec)
      return () => tableInstance.release()
    } else if (isPivotTable(vseed)) {
      const tableInstance = new PivotTable(ref.current, spec)
      return () => tableInstance.release()
    }
  }, [vseed, dark])

  return (
    <div
      ref={ref}
      style={{ height: 300, width: '100%' }}
      onClick={() => {
        console.group(`selected ${vseed.chartType}`)
        console.log('builder', builderRef.current)
        console.log('spec', builderRef.current.spec)
        console.log('vseed', builderRef.current.vseed)
        console.log('advancedVSeed', builderRef.current.advancedVSeed)
        console.groupEnd()
      }}
    >
      {' '}
    </div>
  )
}

export default Demo
```
