---
pageType: doc
---

# 功能介绍

## 图表类型切换

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  const chartTypes = [
    'line',
    'column',
    'columnPercent',
    'columnParallel',
    'bar',
    'barPercent',
    'barParallel',
    'pie',
    'area',
    'areaPercent',
  ]

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'line',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
      ],
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    const renderNext = (index: number) => {
      const chartType = chartTypes[index % chartTypes.length]
      const nextVSeed = {
        ...vseed,
        chartType: chartType,
      }
      const nextSpec = Builder.from(nextVSeed).build()
      vchart.updateSpec(nextSpec)

      setTimeout(() => {
        renderNext(index + 1)
      }, 2000)
    }
    renderNext(0)

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

## 数据重塑

```tsx direction=horizontal
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  const datasetList = [
    // 单指标零维度
    [{ profit: 10 }],
    // 单指标单维度
    [
      { date: '2019', profit: 10 },
      { date: '2020', profit: 30 },
      { date: '2021', profit: 30 },
      { date: '2022', profit: 50 },
      { date: '2023', profit: 40 },
    ],
    // 单指标多维度
    [
      { date: '2019', region: 'east', city: 'A', profit: 10 },
      { date: '2019', region: 'east', city: 'B', profit: 30 },
      { date: '2019', region: 'east', city: 'C', profit: 30 },
      { date: '2019', region: 'east', city: 'D', profit: 50 },
      { date: '2019', region: 'east', city: 'E', profit: 40 },

      { date: '2020', region: 'north of east', city: 'A', profit: 10 },
      { date: '2020', region: 'north of east', city: 'B', profit: 30 },
      { date: '2020', region: 'north of east', city: 'C', profit: 30 },
      { date: '2020', region: 'north of east', city: 'D', profit: 50 },
      { date: '2020', region: 'north of east', city: 'E', profit: 40 },
    ],
    // 多指标零维度
    [{ profit: 1, sales: 2, discount: 0.1 }],
    // 多指标单维度
    [
      { date: '2019', profit: 10, sales: 20, discount: 0.1 },
      { date: '2020', profit: 30, sales: 60, discount: 0.1 },
      { date: '2021', profit: 30, sales: 60, discount: 0.1 },
      { date: '2022', profit: 50, sales: 100, discount: 0.1 },
      { date: '2023', profit: 40, sales: 80, discount: 0.1 },
    ],
    // 多指标多维度
    [
      { date: '2019', region: 'east', city: 'A', profit: 10, sales: 20, discount: 0.1 },
      { date: '2019', region: 'east', city: 'B', profit: 30, sales: 60, discount: 0.1 },
      { date: '2019', region: 'east', city: 'C', profit: 30, sales: 60, discount: 0.1 },
      { date: '2019', region: 'east', city: 'D', profit: 50, sales: 100, discount: 0.1 },
      { date: '2019', region: 'east', city: 'E', profit: 40, sales: 80, discount: 0.1 },

      { date: '2020', region: 'north of east', city: 'A', profit: 10, sales: 20, discount: 0.1 },
      { date: '2020', region: 'north of east', city: 'B', profit: 30, sales: 60, discount: 0.1 },
      { date: '2020', region: 'north of east', city: 'C', profit: 30, sales: 60, discount: 0.1 },
      { date: '2020', region: 'north of east', city: 'D', profit: 50, sales: 100, discount: 0.1 },
      { date: '2020', region: 'north of east', city: 'E', profit: 40, sales: 80, discount: 0.1 },
    ],
  ]
  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'columnParallel',
      dataset: datasetList[0],
      legend: {
        position: 'bottom',
      },
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    const renderNext = (index: number) => {
      const dataset = datasetList[index % datasetList.length]
      const nextVSeed = {
        ...vseed,
        dataset: dataset,
      }
      const nextSpec = Builder.from(nextVSeed).build()
      vchart.updateSpec(nextSpec)

      setTimeout(() => {
        renderNext(index + 1)
      }, 3000)
    }
    renderNext(0)

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: '300', width: '100%' }}></div>
}

export default Demo
```

## 透视与组合

### 指标分组

```tsx direction=vertical
import { useRef, useEffect, memo } from 'react'
import VChart from '@visactor/vchart'
import { register, PivotChart, PivotChartConstructorOptions } from '@visactor/vtable'
import { registerAll, VSeed, Builder, UnfoldDimensionGroup } from '@visactor/vseed'

register.chartModule('vchart', VChart)
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'line',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
      ],
      dimensions: [{ id: 'date', alias: '日期' }],
      measures: [
        {
          id: 'profit-group',
          children: [{ id: 'profit', alias: '利润' }],
        },
        {
          id: 'sales-group',
          children: [{ id: 'sales', alias: '销售额' }],
        },
      ],
    }

    const builder = Builder.from(vseed)
    const spec = builder.build()

    const tableInstance = new PivotChart(ref.current, spec)

    tableInstance.on('legend_item_click', (args) => {
      console.log('LEGEND_ITEM_CLICK', args)
      tableInstance.updateFilterRules([
        {
          filterKey: UnfoldDimensionGroup,
          filteredValues: args.value,
        },
      ])
    })

    return () => tableInstance.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

### 行列透视

```tsx direction=vertical
import { useRef, useEffect, memo } from 'react'
import VChart from '@visactor/vchart'
import { register, PivotChart, PivotChartConstructorOptions } from '@visactor/vtable'
import { registerAll, VSeed, Builder, UnfoldDimensionGroup } from '@visactor/vseed'

register.chartModule('vchart', VChart)
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'column',
      dataset: [
        { date: '2019', category: 'food', profit: 10, sales: 88 },
        { date: '2019', category: 'book', profit: 33, sales: 210 },
        { date: '2019', category: 'tools', profit: 27, sales: 150 },

        { date: '2020', category: 'food', profit: 10, sales: 100 },
        { date: '2020', category: 'book', profit: 11, sales: 122 },
        { date: '2020', category: 'tools', profit: 23, sales: 150 },

        { date: '2021', category: 'food', profit: 10, sales: 100 },
        { date: '2021', category: 'book', profit: 30, sales: 190 },
        { date: '2021', category: 'tools', profit: 15, sales: 50 },
      ],
      dimensions: [
        { id: 'date', alias: '日期' },
        { id: 'category', alias: '类型', location: 'columnDimension' },
      ],
      measures: [
        {
          id: 'profit-group',
          children: [{ id: 'profit', alias: '利润' }],
        },
        {
          id: 'sales-group',
          children: [{ id: 'sales', alias: '销售额' }],
        },
      ],
    }

    const builder = Builder.from(vseed)
    const spec = builder.build()

    const tableInstance = new PivotChart(ref.current, spec)

    tableInstance.on('legend_item_click', (args) => {
      console.log('LEGEND_ITEM_CLICK', args)
      tableInstance.updateFilterRules([
        {
          filterKey: UnfoldDimensionGroup,
          filteredValues: args.value,
        },
      ])
    })

    return () => tableInstance.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

## 条件样式

### 柱图样式

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'column',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      barStyle: {
        selector: {
          field: 'profit',
          op: '>',
          value: 10,
        },
        // selector: {
        //   field: 'sales',
        //   op: '>=',
        //   value: 400,
        // },
        // selector: 30,
        // selector: [40,30,50],
        // selector: { date:"2019" },
        // selector: [{ date:"2019" },{ date:"2020", profit: 30 }],
        barColor: 'red',
        barBorderColor: '#ccc',
        barBorderWidth: 2,
      },
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

## 标注

### 数据点标注

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'area',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
        { date: '2024', profit: 70, sales: 100 },
      ],
      annotationPoint: {
        selector: {
          field: 'profit',
          op: '>',
          value: 10,
        },
        // selector: {
        //   field: 'sales',
        //   op: '>=',
        //   value: 400,
        // },
        // selector: 30,
        // selector: [40,30,50],
        // selector: { date:"2019" },
        // selector: [{ date:"2019" },{ date:"2020", profit: 30 }],

        text: '数据点标注',
      },
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })
    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```
