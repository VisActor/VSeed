"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["1656"],{79317:function(e,t,r){r.d(t,{Z:()=>t$});var i,n,o,a,l,s={};r.r(s),r.d(s,{AggregationType:()=>R.E,Aggregator:()=>A.jk,AvgAggregator:()=>A.ky,CountAggregator:()=>A.ZP,CustomAggregator:()=>A.Js,HierarchyState:()=>M.g,HighlightScope:()=>b.p,IconFuncTypeEnum:()=>S.cI,IconPosition:()=>S.q0,InteractionState:()=>b.F,InternalIconName:()=>S.up,MaxAggregator:()=>A.Fn,MinAggregator:()=>A.NF,NoneAggregator:()=>A.ld,Placement:()=>M.u,RecalculateAggregator:()=>A.U4,RecordAggregator:()=>A.hT,SortType:()=>R.F,SumAggregator:()=>A.__,cellStyleKeys:()=>H.n,indicatorSort:()=>A.vg,naturalSort:()=>A.SL,registeredAggregators:()=>A.YJ,sortBy:()=>A.MR,typeSort:()=>A.y4});var d={};r.r(d),r.d(d,{BaseTable:()=>x.D});var u={};r.r(u),r.d(u,{CachedDataSource:()=>E.Z,DataSource:()=>K.o2});var c={};r.r(c),r.d(c,{dateFormat:()=>z,numberFormat:()=>F});var h={};r.r(h),r.d(h,{CustomCellStylePlugin:()=>j.Wg,PluginManager:()=>B.Q});var p={};r.r(p),r.d(p,{Arc:()=>eK,CheckBox:()=>eF.J,Circle:()=>ef,Container:()=>ev,Group:()=>eI,GroupElement:()=>eP,Icon:()=>eT,Image:()=>eb,Line:()=>eO.x,Radio:()=>ez.Y,Rect:()=>eR,Tag:()=>eD,Text:()=>eS,percentCalc:()=>eA});var g={};r.r(g),r.d(g,{CustomLayout:()=>p,DataStatistics:()=>c,EventTarget:()=>eQ.R,Icon:()=>eY.J,ListTable:()=>L.T,ListTableSimple:()=>V,PIVOT_CHART_EVENT_TYPE:()=>$.Z,PIVOT_TABLE_EVENT_TYPE:()=>$.z,PivotChart:()=>ep.z,PivotTable:()=>ec,PivotTableSimple:()=>eh,TABLE_EVENT_TYPE:()=>X.B,TYPES:()=>s,VArc:()=>e_.NP,VArea:()=>e_.q_,VCheckBox:()=>eG,VCircle:()=>e_.uU,VGlyph:()=>e_.rE,VGroup:()=>e_.qP,VImage:()=>e_.rV,VLine:()=>e_.EG,VPath:()=>e_.VA,VPolygon:()=>e_.sg,VRadio:()=>eJ,VRect:()=>e_.bZ,VSymbol:()=>e_.p8,VTag:()=>eq,VText:()=>e_.Jj,clearGlobal:()=>e1,core:()=>d,data:()=>u,getDataCellPath:()=>eN,getIcons:()=>e0,getTargetCell:()=>eU.J$,graphicUtil:()=>T.WN,jsx:()=>e$,plugins:()=>h,register:()=>I,registerAnimation:()=>eu.ph,registerAxis:()=>eu.R2,registerButtonCell:()=>_.ah,registerChartCell:()=>_.LQ,registerCheckboxCell:()=>_.yR,registerEmptyTip:()=>eu.Eg,registerImageCell:()=>_.pk,registerLegend:()=>eu.I,registerMenu:()=>eu.FD,registerProgressBarCell:()=>_.m4,registerRadioCell:()=>_.Jy,registerSparkLineCell:()=>_.dB,registerSwitchCell:()=>_.VT,registerTextCell:()=>_.ge,registerTitle:()=>eu._t,registerTooltip:()=>eu.Mh,registerVideoCell:()=>_.au,renderChart:()=>es.pF,restoreMeasureText:()=>ej.sb,setCustomAlphabetCharSet:()=>ej.fg,textMeasure:()=>ej.QC,themes:()=>O,toBoxArray:()=>q.JO,updateCell:()=>eB.wW,version:()=>eX});var y=r(31549),f=r(59944),m=r(44194),v=r.t(m,2),P=r(91021),C=r(54862),w=r(59480),T=r(91925),b=r(5021),H=r(60072),R=r(21264),M=r(12348),S=r(27695),A=r(61763),x=r(56616),K=r(80983),E=r(56359),D=r(4234),I=r(94751),O=r(28399);function F(e){return e=Object.assign({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},e),function(t){if(isNaN(t)||!isFinite(t))return"";let r=function(e,t,r){var i,n;let o=(e+="").split("."),a=o[0],l=o.length>1?r+o[1]:"";return i=a,n=t,(a=i.replace(/\d+/,function(e){return e.replace(/(\d)(?=(\d{3})+$)/g,function(e){return`${e}${n}`})}))+l}((e.scaler*t).toFixed(e.digitsAfterDecimal),e.thousandsSep,e.decimalSep);return`${e.prefix}${r}${e.suffix}`}}function z(e,t,r,i,n){null==r&&(r=!1),null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==n&&(n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);let o=r?"UTC":"",a=function(e){return`0${e}`.substring(0,2)};return function(r){let l=new Date(Date.parse(r[e]));return t.replace(/%(.)/g,function(e,t){switch(t){case"y":return l[`get${o}FullYear`]();case"m":return a(l[`get${o}Month`]()+1);case"n":return i[l[`get${o}Month`]()];case"d":return a(l[`get${o}Date`]());case"w":return n[l[`get${o}Day`]()];case"x":return l[`get${o}Day`]();case"H":return a(l[`get${o}Hours`]());case"M":return a(l[`get${o}Minutes`]());case"S":return a(l[`get${o}Seconds`]());default:return`%${t}`}})}}var B=r(61240),j=r(52110),L=r(59458),N=r(87723),_=r(66209);(0,_.ge)();class V extends N.e{}var k=r(2714),W=r(18585);class Z{constructor(e,t){this.tree={},this.beforeChangedTree={},this.colFlatKeys={},this.rowFlatKeys={},this.stringJoinChar="\0",this.rowsIsTotal=[],this.colsIsTotal=[],this.dataConfig=e,t&&(this.records=t,"undefined"!=typeof window&&window.performance.now(),this.setRecords(t),"undefined"!=typeof window&&window.performance.now())}changeDataConfig(e){this.dataConfig=e}setRecords(e){this.processRecords()}processRecords(){for(let e=0,t=this.records.length;e<t;e++){let t=this.records[e];this.processRecord(t)}}processRecord(e){var t;let r=[],i=[];for(let t=0,r=this.dataConfig.rows.length;t<r;t++){let r=this.dataConfig.rows[t];void 0!==e[r]&&r!==this.dataConfig.indicatorDimensionKey&&i.push(e[r])}for(let t=0,i=this.dataConfig.columns.length;t<i;t++){let i=this.dataConfig.columns[t];void 0!==e[i]&&i!==this.dataConfig.indicatorDimensionKey&&r.push(e[i])}null==(t=this.dataConfig.indicators)||t.forEach(t=>{let n=e[t];void 0!==n&&(this.dataConfig.indicatorsAsCol?r.push(t):i.push(t));let o=i.join(this.stringJoinChar),a=r.join(this.stringJoinChar);0!==i.length&&(this.rowFlatKeys[o]||(this.rowFlatKeys[o]=1)),0!==r.length&&(this.colFlatKeys[a]||(this.colFlatKeys[a]=1)),0===r.length&&0===i.length||(this.tree[o]||(this.tree[o]={}),void 0!==n&&(this.tree[o][a]={value:n,record:e},this.dataConfig.indicatorsAsCol?r.pop():i.pop()))})}getTreeNode(e=[],t=[],r,i=!0){var n,o,a,l;let s,d;if("string"==typeof e)s=e;else{let t=!1;e.map((i,n)=>{i===r&&(e.splice(n,1),t=!0)}),t&&e.push(r),s=e.join(this.stringJoinChar)}if("string"==typeof t)d=t;else{let e=!1;t.map((i,n)=>{i===r&&(t.splice(n,1),e=!0)}),e&&t.push(r),d=t.join(this.stringJoinChar)}return i?null!=(a=null==(o=null==(n=this.tree)?void 0:n[s])?void 0:o[d])?a:void 0:(0,W.Z)(null==(l=this.beforeChangedTree[s])?void 0:l[d])?{value:this.beforeChangedTree[s][d].value,record:this.beforeChangedTree[s][d].record}:void 0}changeTreeNodeValue(e=[],t=[],r,i){var n,o,a,l,s,d,u;let c,h;if("string"==typeof e)c=e;else{let t=!1;e.map((i,n)=>{i===r&&(e.splice(n,1),t=!0)}),t&&e.push(r),c=e.join(this.stringJoinChar)}if("string"==typeof t)h=t;else{let e=!1;t.map((i,n)=>{i===r&&(t.splice(n,1),e=!0)}),e&&t.push(r),h=t.join(this.stringJoinChar)}let p=null==(o=null==(n=this.tree[c])?void 0:n[h])?void 0:o.value,g=Object.assign({},null==(l=null==(a=this.tree[c])?void 0:a[h])?void 0:l.record);(null==(d=null==(s=this.tree[c])?void 0:s[h])?void 0:d.record)?(this.tree[c][h].record[r]=i,this.tree[c][h].value=i):(this.tree[c]||(this.tree[c]={}),this.tree[c][h]={record:this._buildRecord(e,t,r,i),value:i}),(null==(u=this.beforeChangedTree[c])?void 0:u[h])||(this.beforeChangedTree[c]={},this.beforeChangedTree[c][h]={record:void 0,value:void 0},this.beforeChangedTree[c][h].record=g,this.beforeChangedTree[c][h].value=p)}_buildRecord(e=[],t=[],r,i){let n={},o=this.dataConfig.rows,a=this.dataConfig.columns;return o.forEach((t,r)=>{t!==this.dataConfig.indicatorDimensionKey&&(n[t]=e[r])}),a.forEach((e,r)=>{e!==this.dataConfig.indicatorDimensionKey&&(n[e]=t[r])}),n[r]=i,this.records.push(n),n}addRecords(e){for(let t=0,r=e.length;t<r;t++){let r=e[t];this.processRecord(r)}this.records.push(e)}changeRecordFieldValue(e,t,r){let i=!1;for(let t=0;t<this.dataConfig.indicators.length;t++)this.dataConfig.indicators[t]===e&&(i=!0);if(!i){for(let i=0,n=this.records.length;i<n;i++){let n=this.records[i];n[e]===t&&(n[e]=r)}this.rowFlatKeys={},this.colFlatKeys={},this.tree={},this.processRecords()}}}var $=r(53372),q=r(77597),G=r(9284),J=r(19465),U=r(58977),Y=r(27180),Q=r(20901),X=r(83847),ee=r(90321),et=r(62482),er=r(78958),ei=r(9649),en=r(28071),eo=r(70656),ea=r(43221),el=r(75025),es=r(62727);class ed extends x.D{constructor(e,t){var r,i,n,o,a,l,s,d,u,c,h,p,g,y,f,m,v,P,C,w,T,b,H,R;if(super(e,t),this.layoutNodeId={seqId:0},t=this.options){t.rowHierarchyType||(t.rowHierarchyType="grid"),t.columnHierarchyType||(t.columnHierarchyType="grid"),t.layout&&Object.assign(t,t.layout),this.internalProps.columns=(0,J.Z)(t.columns),this.internalProps.rows=(0,J.Z)(t.rows),this.internalProps.indicators=(0,eo.u)(t.indicators),null==(r=t.indicators)||r.forEach((e,t)=>{"object"==typeof e&&(null==e?void 0:e.editor)&&(this.internalProps.indicators[t].editor=e.editor)}),this.internalProps.columnTree=!t.indicatorsAsCol||(null==(i=t.columns)?void 0:i.length)||t.columnTree?(0,J.Z)(t.columnTree):[],this.internalProps.rowTree=t.indicatorsAsCol||(null==(n=t.rows)?void 0:n.length)||t.rowTree?(0,J.Z)(t.rowTree):[],this.internalProps.records=t.records,this.pagination=t.pagination,this.internalProps.columnResizeType=null!=(l=null!=(a=null==(o=t.resize)?void 0:o.columnResizeType)?a:t.columnResizeType)?l:"column",this.internalProps.rowResizeType=null!=(u=null!=(d=null==(s=t.resize)?void 0:s.rowResizeType)?d:t.rowResizeType)?u:"row",this.internalProps.dataConfig=(0,J.Z)(t.dataConfig),this.internalProps.columnWidthConfig=t.columnWidthConfig,this.internalProps.columnWidthConfigForRowHeader=t.columnWidthConfigForRowHeader;let e=this.internalProps.records;if(this.internalProps.recordsIsTwoDimensionalArray=!1,(null==(c=null==e?void 0:e[0])?void 0:c.constructor)===Array&&(this.internalProps.recordsIsTwoDimensionalArray=!0),!1===(null==(h=t.customConfig)?void 0:h.enableDataAnalysis)){let t=new Q.KO(null!=(p=this.internalProps.columnTree)?p:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(g=this.options.columnExpandLevel)?g:1:void 0),r=new Q.KO(null!=(y=this.internalProps.rowTree)?y:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(f=this.options.rowExpandLevel)?f:1:void 0);this.internalProps.layoutMap=new k.z(this,null,t,r),!1===this.internalProps.recordsIsTwoDimensionalArray&&(this.flatDataToObjects=new Z({rows:this.internalProps.layoutMap.fullRowDimensionKeys,columns:this.internalProps.layoutMap.colDimensionKeys,indicators:this.internalProps.layoutMap.indicatorKeys,indicatorsAsCol:this.internalProps.layoutMap.indicatorsAsCol,indicatorDimensionKey:this.internalProps.layoutMap.indicatorDimensionKey},e))}else{let e=(0,ea.Ul)(this,t),{rowKeys:r,columnKeys:i,indicatorKeys:n}=e,{columnDimensionTree:o,rowDimensionTree:a}=e;this.dataset=new G.q(this.internalProps.dataConfig,r,i,n,this.internalProps.indicators,null==(m=t.indicatorsAsCol)||m,t.records,t.rowHierarchyType,t.columnHierarchyType,this.internalProps.columnTree,this.internalProps.rowTree,!1,!!t.extensionRows,!!t.parseCustomTreeToMatchRecords),t.columnTree?o.hasHideNode&&((0,ea.uu)(o.tree.children,t.indicators,!0,this),o.reset(o.tree.children)):(!1!==t.indicatorsAsCol&&(this.dataset.colHeaderTree=(0,ea.VN)(this.dataset.colHeaderTree,t.indicators)),!1!==t.indicatorsAsCol&&t.indicators&&this.dataset.colHeaderTree&&(0,ea.uu)(this.dataset.colHeaderTree,t.indicators,!1,this),o=new Q.KO(null!=(v=this.dataset.colHeaderTree)?v:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(P=this.options.columnExpandLevel)?P:1:void 0)),t.rowTree?a.hasHideNode&&((0,ea.uu)(a.tree.children,t.indicators,!0,this),a.reset(a.tree.children)):(!1===t.indicatorsAsCol&&(this.dataset.rowHeaderTree=(0,ea.VN)(this.dataset.rowHeaderTree,t.indicators)),!1===t.indicatorsAsCol&&this.dataset.rowHeaderTree&&t.indicators&&(0,ea.uu)(this.dataset.rowHeaderTree,t.indicators,!1,this),a=new Q.KO(null!=(C=this.dataset.rowHeaderTree)?C:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(w=this.options.rowExpandLevel)?w:1:void 0)),this.internalProps.layoutMap=new k.z(this,this.dataset,o,a)}if(this._changePivotSortStateBySortRules(),(null!=(b=null==(T=t.pivotSortState)?void 0:T.length)?b:0)>0&&(this.pivotSortState=[],this.pivotSortState=t.pivotSortState),"node"!==Y.X.mode&&(this.editorManager=new ee.$(this)),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.stateManager.initCheckedState(e),this.scenegraph.createSceneGraph(),t.title){let e=el.F.getComponent("title");this.internalProps.title=new e(t.title,this),this.scenegraph.resize()}if(this.options.emptyTip)if(this.internalProps.emptyTip)null==(H=this.internalProps.emptyTip)||H.resetVisible();else{let e=el.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(R=this.internalProps.emptyTip)||R.resetVisible()}setTimeout(()=>{this.fireListeners(X.B.INITIALIZED,null)},0)}}static get EVENT_TYPE(){return $.z}isListTable(){return!1}isPivotTable(){return!0}isPivotChart(){return!1}get recordsCount(){var e;return null==(e=this.records)?void 0:e.length}_canResizeColumn(e,t){let r=super._canResizeColumn(e,t);if(r){if(this.internalProps.layoutMap.isSeriesNumber(e,t)&&!0===this.internalProps.rowSeriesNumber.disableColumnResize)return!1;if(!this.internalProps.layoutMap.indicatorsAsCol){let t=this.internalProps.layoutMap.getBody(e,this.columnHeaderLevelCount);if(null==t?void 0:t.disableColumnResize)return!1}}return r}updateOption(e){var t,r,i,n,o,a,l,s,d,u,c,h,p,g,y,f,m,v,P,C,w,T,b,H,R,M;let S=this.internalProps;if(super.updateOption(e),e.rowHierarchyType||(e.rowHierarchyType="grid"),e.columnHierarchyType||(e.columnHierarchyType="grid"),this.layoutNodeId={seqId:0},this.internalProps.columns=(0,J.Z)(e.columns),this.internalProps.rows=(0,J.Z)(e.rows),this.internalProps.indicators=(null==(t=e.indicators)?void 0:t.length)?(0,eo.u)(e.indicators):[],null==(r=e.indicators)||r.forEach((e,t)=>{"object"==typeof e&&(null==e?void 0:e.editor)&&(this.internalProps.indicators[t].editor=e.editor)}),this.internalProps.columnTree=!e.indicatorsAsCol||(null==(i=e.columns)?void 0:i.length)||e.columnTree?(0,J.Z)(e.columnTree):[],this.internalProps.rowTree=e.indicatorsAsCol||(null==(n=e.rows)?void 0:n.length)||e.rowTree?(0,J.Z)(e.rowTree):[],e.records&&(this.internalProps.records=e.records),this.stateManager.initCheckedState(this.internalProps.records),this.stateManager.updateDrillState(void 0,void 0,!1,!1,-1,-1),this.pagination=e.pagination,S.columnResizeType=null!=(l=null!=(a=null==(o=e.resize)?void 0:o.columnResizeType)?a:e.columnResizeType)?l:"column",S.rowResizeType=null!=(u=null!=(d=null==(s=e.resize)?void 0:s.rowResizeType)?d:e.rowResizeType)?u:"row",S.dataConfig=(0,J.Z)(e.dataConfig),this.internalProps.columnWidthConfig=e.columnWidthConfig,this.internalProps.columnWidthConfigForRowHeader=e.columnWidthConfigForRowHeader,"grid"!==(null==e?void 0:e.rowHierarchyType)&&"grid"!==this.internalProps.layoutMap.rowHierarchyType&&this.internalProps.layoutMap.rowExpandLevel===(null==e?void 0:e.rowExpandLevel)){let e=this.internalProps.layoutMap.rowDimensionTree.tree.children;null==(c=this.internalProps.rowTree)||c.forEach((t,r)=>{let i=e.find(e=>e.dimensionKey===t.dimensionKey&&e.value===t.value);i&&this._syncHierarchyState(i,t)})}let A=this.internalProps.records;if(this.internalProps.recordsIsTwoDimensionalArray=!1,(null==(h=null==A?void 0:A[0])?void 0:h.constructor)===Array&&(this.internalProps.recordsIsTwoDimensionalArray=!0),!1===(null==(p=e.customConfig)?void 0:p.enableDataAnalysis)){let t,r;e.columnTree&&(t=new Q.KO(null!=(g=this.internalProps.columnTree)?g:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(y=this.options.columnExpandLevel)?y:1:void 0)),e.rowTree&&(r=new Q.KO(null!=(f=this.internalProps.rowTree)?f:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(m=this.options.rowExpandLevel)?m:1:void 0)),S.layoutMap.clearHeaderPathCache(),S.layoutMap=new k.z(this,null,t,r),!1===this.internalProps.recordsIsTwoDimensionalArray&&(this.flatDataToObjects=new Z({rows:S.layoutMap.fullRowDimensionKeys,columns:S.layoutMap.colDimensionKeys,indicators:S.layoutMap.indicatorKeys,indicatorsAsCol:S.layoutMap.indicatorsAsCol,indicatorDimensionKey:S.layoutMap.indicatorDimensionKey},A))}else{let t=(0,ea.Ul)(this,e),{rowKeys:r,columnKeys:i,indicatorKeys:n}=t,{columnDimensionTree:o,rowDimensionTree:a}=t;this.dataset=new G.q(S.dataConfig,r,i,n,this.internalProps.indicators,null==(v=e.indicatorsAsCol)||v,A,e.rowHierarchyType,e.columnHierarchyType,this.internalProps.columnTree,this.internalProps.rowTree,!1,!!e.extensionRows,!!e.parseCustomTreeToMatchRecords),e.columnTree?o.hasHideNode&&((0,ea.uu)(o.tree.children,e.indicators,!0,this),o.reset(o.tree.children)):(!1!==e.indicatorsAsCol&&(this.dataset.colHeaderTree=(0,ea.VN)(this.dataset.colHeaderTree,e.indicators)),!1!==e.indicatorsAsCol&&e.indicators&&this.dataset.colHeaderTree&&(0,ea.uu)(this.dataset.colHeaderTree,e.indicators,!1,this),o=new Q.KO(null!=(P=this.dataset.colHeaderTree)?P:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(C=this.options.columnExpandLevel)?C:1:void 0)),e.rowTree?a.hasHideNode&&((0,ea.uu)(a.tree.children,e.indicators,!0,this),a.reset(a.tree.children)):(!1===e.indicatorsAsCol&&(this.dataset.rowHeaderTree=(0,ea.VN)(this.dataset.rowHeaderTree,e.indicators)),!1===e.indicatorsAsCol&&this.dataset.rowHeaderTree&&e.indicators&&(0,ea.uu)(this.dataset.rowHeaderTree,e.indicators,!1,this),a=new Q.KO(null!=(w=this.dataset.rowHeaderTree)?w:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(T=this.options.rowExpandLevel)?T:1:void 0)),S.layoutMap=new k.z(this,this.dataset,o,a)}if(this._changePivotSortStateBySortRules(),(null!=(H=null==(b=e.pivotSortState)?void 0:b.length)?H:0)>0&&(this.pivotSortState=[],this.pivotSortState=e.pivotSortState),this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,S.releaseList&&(S.releaseList.forEach(e=>{var t;return null==(t=null==e?void 0:e.release)?void 0:t.call(e)}),S.releaseList=null),this.scenegraph.clearCells(),this.scenegraph.createSceneGraph(),e.title){let t=el.F.getComponent("title");this.internalProps.title=new t(e.title,this),this.scenegraph.resize()}if(this.options.emptyTip)if(this.internalProps.emptyTip)null==(R=this.internalProps.emptyTip)||R.resetVisible();else{let e=el.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(M=this.internalProps.emptyTip)||M.resetVisible()}return new Promise(e=>{setTimeout(e,0)})}updatePagination(e){this.internalProps.layoutMap.clearHeaderPathCache(),e?(this.pagination||(this.pagination={currentPage:0,perPageCount:0}),"number"==typeof e.currentPage&&e.currentPage>=0&&(this.pagination.currentPage=e.currentPage),e.perPageCount&&(this.pagination.perPageCount=e.perPageCount||this.pagination.perPageCount),this.scenegraph.clearCells(),this.internalProps.layoutMap.setPagination(this.pagination),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.render()):this.pagination&&(this.pagination=void 0,this.scenegraph.clearCells(),this.internalProps.layoutMap.setPagination(void 0),this.refreshRowColCount(),this.scenegraph.createSceneGraph(),this.render())}refreshHeader(){this.setMinMaxLimitWidth(!0),this.refreshRowColCount()}refreshRowColCount(){var e,t,r,i,n,o,a,l;let{layoutMap:s}=this.internalProps;s&&(this.colCount=null!=(e=s.colCount)?e:0,this.rowCount=null!=(t=s.rowCount)?t:0,this.internalProps.frozenColCount=this.options.frozenColCount?this.options.frozenColCount:(null!=(r=s.rowHeaderLevelCount)?r:0)+s.leftRowSeriesNumberColumnCount,this.frozenRowCount=Math.max(s.headerLevelCount,null!=(i=this.options.frozenRowCount)?i:0),this.bottomFrozenRowCount!==(null!=(n=this.options.bottomFrozenRowCount)?n:0)&&(this.bottomFrozenRowCount=null!=(o=this.options.bottomFrozenRowCount)?o:0),this.rightFrozenColCount!==(null!=(a=this.options.rightFrozenColCount)?a:0)&&(this.rightFrozenColCount=null!=(l=this.options.rightFrozenColCount)?l:0),this.stateManager.setFrozenCol(this.internalProps.frozenColCount),this.stateManager.setFrozenRow(this.frozenRowCount))}_getSortFuncFromHeaderOption(e,t,r){}get rowHierarchyType(){return this.internalProps.layoutMap.rowHierarchyType}get columnHierarchyType(){return this.internalProps.layoutMap.columnHierarchyType}_syncHierarchyState(e,t){var r,i;e.value===t.value&&e.dimensionKey===t.dimensionKey&&(t.hierarchyState=null!=(r=t.hierarchyState)?r:(null==t?void 0:t.children)?e.hierarchyState:void 0,null==(i=null==t?void 0:t.children)||i.forEach((t,r)=>{var i;if((null==(i=null==e?void 0:e.children)?void 0:i[r])&&t){let r=e.children.find(e=>e.dimensionKey===t.dimensionKey&&e.value===t.value);r&&this._syncHierarchyState(r,t)}}))}getRecordShowIndexByCell(e,t){}getTableIndexByRecordIndex(e){}getTableIndexByField(e){}getCellAddrByFieldRecord(e,t){}getBodyIndexByRow(e){let{layoutMap:t}=this.internalProps;return t.getBodyIndexByRow(e)}getBodyIndexByCol(e){let{layoutMap:t}=this.internalProps;return t.getBodyIndexByCol(e)}getFieldData(e,t,r){var i,n,o;if(!this.internalProps.layoutMap.isHeader(t,r)){if(this.internalProps.recordsIsTwoDimensionalArray){let e=this.getBodyIndexByRow(r),n=this.getBodyIndexByCol(t);return null==(i=this.records[e])?void 0:i[n]}if(this.dataset){let i=this.internalProps.layoutMap.getCellHeaderPaths(t,r);if(i){let a,l=null==(n=i.colHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(a={position:"col",index:t}),null!=(r=e.indicatorKey)?r:e.value}),s=null==(o=i.rowHeaderPaths)?void 0:o.filter(e=>!e.virtual).map((e,t)=>{var r;return e.indicatorKey&&(a={position:"row",index:t}),null!=(r=e.indicatorKey)?r:e.value}),d=this.dataset.getAggregator(s,l,this.internalProps.layoutMap.getIndicatorKey(t,r),!0,a);if(d.records&&d.records.length>=1)return d.records[0][e]}}else if(this.flatDataToObjects){let i=this.internalProps.layoutMap.getCellHeaderPaths(t,r),n=i.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=i.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),a=this.flatDataToObjects.getTreeNode(o,n,this.internalProps.layoutMap.getBody(t,r).indicatorKey,!1);if(null==a?void 0:a.record)return null==a?void 0:a.record[e]}}}getCellValue(e,t,r){var i,n,o,a,l,s,d;if(!r){let r=this.getCustomMergeValue(e,t);if(r)return r}if(this.internalProps.layoutMap.isSeriesNumber(e,t)){if(this.internalProps.layoutMap.isSeriesNumberInHeader(e,t)){let{title:r}=this.internalProps.layoutMap.getSeriesNumberHeader(e,t);return r}let{format:r}=this.internalProps.layoutMap.getSeriesNumberBody(e,t);return"function"==typeof r?r(e,t,this):t-this.columnHeaderLevelCount+1}if(this.internalProps.layoutMap.isHeader(e,t)){let{title:r,fieldFormat:i}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof i?i(r,e,t,this):r}if(this.internalProps.recordsIsTwoDimensionalArray){let{fieldFormat:r}=this.internalProps.layoutMap.getBody(e,t),n=this.getBodyIndexByRow(t),o=this.getBodyIndexByCol(e),a=null==(i=this.records[n])?void 0:i[o];return"function"==typeof r?r(a,e,t,this):a}if(this.dataset){let r,i=this.internalProps.layoutMap.getCellHeaderPaths(e,t),d=null==(o=null==(n=i.colHeaderPaths)?void 0:n.filter(e=>!e.virtual))?void 0:o.map((e,t)=>{var i;return e.indicatorKey&&(r={position:"col",index:t}),null!=(i=e.indicatorKey)?i:e.value}),u=null==(l=null==(a=i.rowHeaderPaths)?void 0:a.filter(e=>!e.virtual))?void 0:l.map((e,t)=>{var i;return e.indicatorKey&&(r={position:"row",index:t}),null!=(i=e.indicatorKey)?i:e.value}),c=this.dataset.getAggregator(u,d,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,r),{fieldFormat:h}=this.internalProps.layoutMap.getBody(e,t);return c.formatValue?c.formatValue(e,t,this):"function"==typeof h?h(null==c?void 0:c.value(),e,t,this):null!=(s=null==c?void 0:c.value())?s:""}if(this.flatDataToObjects){let r=this.internalProps.layoutMap.getCellHeaderPaths(e,t),i=r.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=this.flatDataToObjects.getTreeNode(n,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey),{fieldFormat:a}=this.internalProps.layoutMap.getBody(e,t);return"function"==typeof a?a(null==o?void 0:o.value,e,t,this):null!=(d=null==o?void 0:o.value)?d:""}}getCellOriginValue(e,t){var r,i,n;if(this.internalProps.layoutMap.isHeader(e,t)){let{title:r}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof r?r():r}if(this.internalProps.recordsIsTwoDimensionalArray){let i=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);return null==(r=this.records[i])?void 0:r[n]}if(this.dataset){let r,o=this.internalProps.layoutMap.getCellHeaderPaths(e,t),a=null==(i=o.colHeaderPaths)?void 0:i.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(r={position:"col",index:t}),null!=(i=e.indicatorKey)?i:e.value}),l=null==(n=o.rowHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(r={position:"row",index:t}),null!=(i=e.indicatorKey)?i:e.value}),s=this.dataset.getAggregator(l,a,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,r);return s.value?s.value():void 0}if(this.flatDataToObjects){let r=this.internalProps.layoutMap.getCellHeaderPaths(e,t),i=r.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=this.flatDataToObjects.getTreeNode(n,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey);return null==o?void 0:o.value}}getCellRawValue(e,t){var r,i,n;if(this.internalProps.layoutMap.isHeader(e,t)){let{title:r}=this.internalProps.layoutMap.getHeader(e,t);return"function"==typeof r?r():r}if(this.internalProps.recordsIsTwoDimensionalArray){let i=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);return null==(r=this.records[i])?void 0:r[n]}if(this.dataset){let r,o=this.internalProps.layoutMap.getCellHeaderPaths(e,t),a=null==(i=o.colHeaderPaths)?void 0:i.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(r={position:"col",index:t}),null!=(i=e.indicatorKey)?i:e.value}),l=null==(n=o.rowHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(r={position:"row",index:t}),null!=(i=e.indicatorKey)?i:e.value}),s=this.dataset.getAggregator(l,a,this.internalProps.layoutMap.getIndicatorKey(e,t),!1,r);return s.value?s.value():void 0}if(this.flatDataToObjects){let r=this.internalProps.layoutMap.getCellHeaderPaths(e,t),i=r.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=this.flatDataToObjects.getTreeNode(n,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey,!1);return null==o?void 0:o.value}}getCellOriginRecord(e,t){var r,i,n;if(!this.internalProps.layoutMap.isHeader(e,t)){if(this.internalProps.recordsIsTwoDimensionalArray){let i=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);return null==(r=this.records[i])?void 0:r[n]}if(this.dataset){let r,o=this.internalProps.layoutMap.getCellHeaderPaths(e,t),a=null==(i=o.colHeaderPaths)?void 0:i.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(r={position:"col",index:t}),null!=(i=e.indicatorKey)?i:e.value}),l=null==(n=o.rowHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(r={position:"row",index:t}),null!=(i=e.indicatorKey)?i:e.value});return this.dataset.getAggregator(l,a,this.internalProps.layoutMap.getIndicatorKey(e,t),!0,r).records}if(this.flatDataToObjects){let r=this.internalProps.layoutMap.getCellHeaderPaths(e,t),i=r.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=this.flatDataToObjects.getTreeNode(n,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey);return null==o?void 0:o.record}}}getCellRawRecord(e,t){var r,i,n;if(!this.internalProps.layoutMap.isHeader(e,t)){if(this.internalProps.recordsIsTwoDimensionalArray){let i=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);return null==(r=this.records[i])?void 0:r[n]}if(this.dataset){let r,o=this.internalProps.layoutMap.getCellHeaderPaths(e,t),a=null==(i=o.colHeaderPaths)?void 0:i.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(r={position:"col",index:t}),null!=(i=e.indicatorKey)?i:e.value}),l=null==(n=o.rowHeaderPaths)?void 0:n.filter(e=>!e.virtual).map((e,t)=>{var i;return e.indicatorKey&&(r={position:"row",index:t}),null!=(i=e.indicatorKey)?i:e.value});return this.dataset.getAggregator(l,a,this.internalProps.layoutMap.getIndicatorKey(e,t),!1,r).records}if(this.flatDataToObjects){let r=this.internalProps.layoutMap.getCellHeaderPaths(e,t),i=r.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=r.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=this.flatDataToObjects.getTreeNode(n,i,this.internalProps.layoutMap.getBody(e,t).indicatorKey,!1);return null==o?void 0:o.record}}}updateSortRules(e,t,r){this.internalProps.dataConfig?this.internalProps.dataConfig.sortRules=e:this.internalProps.dataConfig={sortRules:e},this.dataset.updateSortRules(e),this._changePivotSortStateBySortRules();let{layoutMap:i}=this.internalProps;i.resetHeaderTree(),this.scenegraph.clearCells(),(0,U.Z)(t)&&(0,U.Z)(r)?(this.isRowHeader(t,r)?(this.setMinMaxLimitWidth(!0),this.internalProps._widthResizedColMap.clear()):this.isCornerHeader(t,r)?"column"===i.cornerSetting.titleOnDimension?(this.setMinMaxLimitWidth(!0),this.internalProps._widthResizedColMap.clear()):"row"===i.cornerSetting.titleOnDimension&&this.internalProps._heightResizedRowMap.clear():this.isColumnHeader(t,r)&&this.internalProps._heightResizedRowMap.clear(),this.refreshRowColCount()):this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.createSceneGraph(!0),this.render()}_changePivotSortStateBySortRules(){var e,t,r,i;this.pivotSortState=[];let n=null!=(t=null==(e=this.internalProps.dataConfig)?void 0:e.sortRules)?t:[];for(let e=0;e<n.length;e++){let t=n[e],o=[];if(t.sortByIndicator&&t.sortField===(this.dataset.indicatorsAsCol?this.dataset.rows[this.dataset.rows.length-1]:this.dataset.columns[this.dataset.columns.length-1])){for(let e=0;e<t.query.length;e++)o.push({dimensionKey:this.dataset.indicatorsAsCol?this.dataset.columns[e]:this.dataset.rows[e],value:t.query[e]});o.push({indicatorKey:t.sortByIndicator,value:null!=(i=null==(r=this.internalProps.layoutMap.getIndicatorInfo(t.sortByIndicator))?void 0:r.title)?i:t.sortByIndicator})}else o.push({dimensionKey:t.sortField,isPivotCorner:!0,value:t.sortField});let a=t.sortType?t.sortType.toUpperCase():"ASC";this.pivotSortState.push({dimensions:o,order:R.F[a]})}}_parseColumnWidthConfig(e){for(let t=0;t<(null==e?void 0:e.length);t++){let r=e[t],i=r.dimensions,n=r.width,o=this.getCellAddressByHeaderPaths(i);if(o&&o.col>=this.rowHeaderLevelCount){let e=this.getCellHeaderPaths(o.col,this.columnHeaderLevelCount);if(e.colHeaderPaths.length===i.length){let t=!0;for(let r=0;r<i.length;r++){let n=i[r];if(0>e.colHeaderPaths.findIndex((e,t)=>e.indicatorKey===n.indicatorKey||e.dimensionKey===n.dimensionKey&&e.value===n.value)){t=!1;break}}t&&!this.internalProps._widthResizedColMap.has(o.col)&&(this._setColWidth(o.col,n),this.internalProps._widthResizedColMap.add(o.col))}}else o&&o.col<this.rowHeaderLevelCount&&(this.internalProps._widthResizedColMap.has(o.col)||(this._setColWidth(o.col,n),this.internalProps._widthResizedColMap.add(o.col)))}}_parseColumnWidthConfigForRowHeader(e){for(let t=0;t<(null==e?void 0:e.length);t++){let r=e[t],i=r.dimensions,n=r.width,o=this.getCellAddressByHeaderPaths(i);o&&o.col<this.rowHeaderLevelCount&&(this.internalProps._widthResizedColMap.has(o.col)||(this._setColWidth(o.col,n),this.internalProps._widthResizedColMap.add(o.col)))}}updatePivotSortState(e){this.pivotSortState=e}sort(e,t,r){var i,n;let o;if(this.isCornerHeader(e,t)){let r=this.getHeaderDefine(e,t);o=[];let i={isPivotCorner:!0,dimensionKey:r.value,value:r.value};o.push(i)}else o=this.isColumnHeader(e,t)?this.getCellHeaderPaths(e,t).colHeaderPaths:this.getCellHeaderPaths(e,t).rowHeaderPaths;let a=o[o.length-1].indicatorKey,l=this.getHeaderDefine(e,t);if(l.sort){if(this.dataset.sortRules){let e={};for(let t=this.dataset.sortRules.length-1;t>=0;t--){let r=this.dataset.sortRules[t];(l.dimensionKey&&r.sortField===l.dimensionKey||a&&r.sortField===(this.dataset.indicatorsAsCol?this.dataset.rows[this.dataset.rows.length-1]:this.dataset.columns[this.dataset.columns.length-1]))&&(e[r.sortField]=r,this.dataset.sortRules.splice(t,1))}if(a){let t=this.dataset.indicatorsAsCol?this.dataset.rows[this.dataset.rows.length-1]:this.dataset.columns[this.dataset.columns.length-1];this.dataset.sortRules.push({sortField:t,sortType:R.F[r],sortByIndicator:a,query:o.reduce((e,t)=>(t.dimensionKey&&e.push(t.value),e),[]),sortFunc:null==(i=e[t])?void 0:i.sortFunc})}else this.dataset.sortRules.push(Object.assign(null!=(n=e[l.dimensionKey])?n:{},{sortField:l.dimensionKey,sortType:R.F[r]}))}else this.dataset.sortRules=a?[{sortField:this.dataset.indicatorsAsCol?this.dataset.rows[this.dataset.rows.length-1]:this.dataset.columns[this.dataset.columns.length-1],sortType:R.F[r],sortByIndicator:a,query:o.reduce((e,t)=>(t.dimensionKey&&e.push(t.value),e),[])}]:[{sortField:l.dimensionKey,sortType:R.F[r]}];this.updateSortRules(this.dataset.sortRules,e,t)}}getPivotSortState(e,t){if(!this.pivotSortState)return;let r=this.getCellRange(e,t);for(let e=0;e<this.pivotSortState.length;e++){let t=this.pivotSortState[e],i=t.dimensions,n=this.getCellAddressByHeaderPaths(i),o=t.order;if(n&&(0,q._Z)(r,n.col,n.row))return o}}_moveHeaderPosition(e,t){let r=this.getCellRange(e.col,e.row),i=this.getCellRange(t.col,t.row),n=this.internalProps.layoutMap.moveHeaderPosition(e,t);if(n){if("column"===n.moveType){if(this.internalProps.recordsIsTwoDimensionalArray)for(let e=0;e<this.internalProps.records.length;e++){let t=this.internalProps.records[e].splice(n.sourceIndex-this.rowHeaderLevelCount,n.sourceSize);t.unshift(n.targetIndex-this.rowHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records[e],t)}this.colWidthsMap.exchangeOrder(r.start.col,r.end.col-r.start.col+1,i.start.col,i.end.col-i.start.col+1,n.targetIndex),this.setMinMaxLimitWidth()}else if("row"===n.moveType){if(this.internalProps.recordsIsTwoDimensionalArray){let e=this.internalProps.records.splice(n.sourceIndex-this.columnHeaderLevelCount,n.sourceSize);e.unshift(n.targetIndex-this.columnHeaderLevelCount,0),Array.prototype.splice.apply(this.internalProps.records,e)}n.targetIndex>n.sourceIndex?this.rowHeightsMap.exchangeOrder(n.sourceIndex,n.sourceSize,n.targetIndex+n.sourceSize-n.targetSize,n.targetSize,n.targetIndex):this.rowHeightsMap.exchangeOrder(n.sourceIndex,n.sourceSize,n.targetIndex,n.targetSize,n.targetIndex)}return n}return null}toggleHierarchyState(e,t,r=!0){this.internalProps.layoutMap.clearHeaderPathCache();let i=this.getHierarchyState(e,t);if(i===M.g.expand)this._refreshHierarchyState(e,t,r),this.fireListeners($.z.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:M.g.collapse});else if(i===M.g.collapse){let i=this.internalProps.layoutMap.getHeadNode(e,t);Array.isArray(i.children)&&this._refreshHierarchyState(e,t,r),this.fireListeners($.z.TREE_HIERARCHY_STATE_CHANGE,{col:e,row:t,hierarchyState:M.g.expand,originData:i})}}_refreshHierarchyState(e,t,r=!0,i){var n,o;this.frozenColCount,this.frozenRowCount;let a=this.getBodyVisibleRowRange().rowStart;this.internalProps._oldRowCount=this.rowCount,this.internalProps._oldColCount=this.colCount;let l=!1,s=!1;this.stateManager.updateHoverIcon(e,t,void 0,void 0);let d=this.internalProps.layoutMap.checkHasChart();d&&(this.autoFillWidth&&(l=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&(s=this.getAllRowsHeight()<=this.tableNoFrameHeight));let u=this.internalProps.layoutMap.isRowHeader(e,t)?this.internalProps.layoutMap.toggleHierarchyState(e,t):this.internalProps.layoutMap.toggleHierarchyStateForColumnTree(e,t);i&&i(),this.refreshRowColCount(),this.frozenColCount,this.frozenRowCount,this.clearCellStyleCache(),"tree"===this.rowHierarchyType&&this.scenegraph.updateHierarchyIcon(e,t),null==(n=this.reactCustomLayout)||n.clearCache(),"grid-tree"!==this.rowHierarchyType&&"grid-tree"!==this.columnHierarchyType?this.scenegraph.updateRow(u.removeCellPositionsRowDirection,u.addCellPositionsRowDirection,u.updateCellPositionsRowDirection,r):(this.internalProps.stick.changedCells.clear(),this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.scrollToRow(a)),null==(o=this.reactCustomLayout)||o.updateAllCustomCell(),d&&(this.autoFillWidth&&!l&&(l=this.getAllColsWidth()<=this.tableNoFrameWidth),this.autoFillHeight&&!s&&(s=this.getAllRowsHeight()<=this.tableNoFrameHeight),("adaptive"===this.widthMode||l||"adaptive"===this.heightMode||s)&&this.scenegraph.updateChartSizeForResizeColWidth(-1)),this.internalProps._oldRowCount=void 0,this.internalProps._oldColCount=void 0}getHeaderCellAddressByPath(e){return this.internalProps.layoutMap.getPivotCellAdress(e)}getCellAddressByHeaderPaths(e){return this.internalProps.layoutMap.getCellAdressByHeaderPath(e)}getHeaderPathByXY(e){let t;return t=e?this.getCellAt(e.x+this.getFrozenColsWidth()+this.scrollLeft+1,e.y+this.getFrozenRowsHeight()+this.scrollTop+1):this.getCellAt(this.getFrozenColsWidth()+this.scrollLeft+1,this.getFrozenRowsHeight()+this.scrollTop+1),this.internalProps.layoutMap.getCellHeaderPaths(t.col,t.row)}getHierarchyState(e,t){var r;return null==(r=this._getHeaderLayoutMap(e,t))?void 0:r.hierarchyState}getLayoutColumnTree(){return this.internalProps.layoutMap.getLayoutColumnTree()}getLayoutColumnTreeCount(){return this.internalProps.layoutMap.getLayoutColumnTreeCount()}getLayoutRowTree(){return this.internalProps.layoutMap.getLayoutRowTree()}getLayoutRowTreeCount(){return this.internalProps.layoutMap.getLayoutRowTreeCount()}getCellHeaderTreeNodes(e,t){return this.internalProps.layoutMap.getCellHeaderPathsWithTreeNode(e,t)}getMenuInfo(e,t,r){let i=this.internalProps.layoutMap.getPivotDimensionInfo(e,t);return{dimensionKey:i[i.length-1].dimensionKey,value:this.getCellValue(e,t),cellLocation:this.getCellLocation(e,t),isPivotCorner:this.isCornerHeader(e,t),event:void 0}}setRecords(e){var t,r,i,n,o,a,l,s;(0,es.H6)();let d={col:this.stateManager.hover.cellPos.col,row:this.stateManager.hover.cellPos.row};this.options.records=this.internalProps.records=e,this.internalProps.recordsIsTwoDimensionalArray=!1,(null==(t=null==e?void 0:e[0])?void 0:t.constructor)===Array&&(this.internalProps.recordsIsTwoDimensionalArray=!0);let u=this.options,c=this.internalProps;if(!1===(null==(r=this.options.customConfig)?void 0:r.enableDataAnalysis))!1===this.internalProps.recordsIsTwoDimensionalArray&&(this.flatDataToObjects=new Z({rows:c.layoutMap.fullRowDimensionKeys,columns:c.layoutMap.colDimensionKeys,indicators:c.layoutMap.indicatorKeys,indicatorsAsCol:c.layoutMap.indicatorsAsCol,indicatorDimensionKey:c.layoutMap.indicatorDimensionKey},e));else{let t,r;this.dataset.setRecords(e),u.columnTree?t=c.layoutMap.columnDimensionTree:(!1!==u.indicatorsAsCol&&u.indicators&&this.dataset.colHeaderTree&&(0,ea.uu)(this.dataset.colHeaderTree,u.indicators,!1,this),t=new Q.KO(null!=(i=this.dataset.colHeaderTree)?i:[],this.layoutNodeId,this.options.columnHierarchyType,"grid"!==this.options.columnHierarchyType?null!=(n=this.options.columnExpandLevel)?n:1:void 0)),u.rowTree?r=c.layoutMap.rowDimensionTree:(!1===u.indicatorsAsCol&&this.dataset.rowHeaderTree&&u.indicators&&(0,ea.uu)(this.dataset.rowHeaderTree,u.indicators,!1,this),r=new Q.KO(null!=(o=this.dataset.rowHeaderTree)?o:[],this.layoutNodeId,this.options.rowHierarchyType,"grid"!==this.options.rowHierarchyType?null!=(a=this.options.rowExpandLevel)?a:1:void 0)),c.layoutMap=new k.z(this,this.dataset,t,r),this.pivotSortState=[],u.pivotSortState&&(this.pivotSortState=u.pivotSortState)}if(this.refreshHeader(),this.internalProps.useOneRowHeightFillAll=!1,this.scenegraph.clearCells(),this.clearCellStyleCache(),this.scenegraph.createSceneGraph(),this.stateManager.updateHoverPos(d.col,d.row),this.internalProps.title&&!this.internalProps.title.isReleased&&(this._updateSize(),this.internalProps.title.resize(),this.scenegraph.resize()),this.eventManager.updateEventBinder(),this.options.emptyTip)if(this.internalProps.emptyTip)null==(l=this.internalProps.emptyTip)||l.resetVisible();else{let e=el.F.getComponent("emptyTip");this.internalProps.emptyTip=new e(this.options.emptyTip,this),null==(s=this.internalProps.emptyTip)||s.resetVisible()}}startEditCell(e,t,r){var i;if((0,W.Z)(e)&&(0,W.Z)(t))this.eventManager.isDraging=!1,this.selectCell(e,t),this.editorManager.startEditCell(e,t,r);else if(null==(i=this.stateManager.select)?void 0:i.cellPos){let{col:e,row:t}=this.stateManager.select.cellPos;(0,W.Z)(e)&&(0,W.Z)(t)&&this.editorManager.startEditCell(e,t,r)}}completeEditCell(){this.editorManager.completeEdit()}getEditor(e,t){var r,i,n;let o;if(this.isCornerHeader(e,t)){let i=this.getHeaderDefine(e,t);o=null!=(r=null==i?void 0:i.headerEditor)?r:this.options.headerEditor}else if(this.isHeader(e,t)){let r=this.getHeaderDefine(e,t);o=null!=(i=null==r?void 0:r.headerEditor)?i:this.options.headerEditor}else{let r=this.getBodyColumnDefine(e,t);o=null!=(n=null==r?void 0:r.editor)?n:this.options.editor}return"function"==typeof o&&(o=o({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||"",table:this})),"string"==typeof o?et.U(o):o}isHasEditorDefine(e,t){var r;let i=this.getBodyColumnDefine(e,t),n=null!=(r=null==i?void 0:i.editor)?r:this.options.editor;return"function"==typeof n&&(n=n({col:e,row:t,dataValue:this.getCellOriginValue(e,t),value:this.getCellValue(e,t)||"",table:this})),(0,W.Z)(n)}changeCellValue(e,t,r,i=!1){var n,o;if(i&&this.isHasEditorDefine(e,t)||!1===i){let i=r,a=this.getCellOriginValue(e,t),l=this.getCellRawValue(e,t);"number"==typeof l&&(0,en.Zf)(r)&&(i=parseFloat(r)),this._changeCellValueToDataSet(e,t,a,i);let s=this.getCellRange(e,t);for(let e=s.start.col;e<=s.end.col;e++)for(let t=s.start.row;t<=s.end.row;t++)this.scenegraph.updateCellContent(e,t);if(null!=(o=null==(n=this.options.dataConfig)?void 0:n.updateAggregationOnEditCell)&&o)for(let e=0;e<this.colCount;e++)for(let t=0;t<this.rowCount;t++)this.internalProps.layoutMap.isAggregation(e,t)&&this.scenegraph.updateCellContent(e,t);if("adaptive"===this.widthMode||this.autoFillWidth&&this.getAllColsWidth()<=this.tableNoFrameWidth)0===this.internalProps._widthResizedColMap.size&&this.scenegraph.recalculateColWidths();else if(!this.internalProps._widthResizedColMap.has(e)){let t=this.getColWidth(e),r=(0,er.al)(e,0,this.rowCount-1,this,!1);r!==t&&this.scenegraph.updateColWidth(e,r-t)}if("adaptive"===this.heightMode||this.autoFillHeight&&this.getAllRowsHeight()<=this.tableNoFrameHeight)0===this.internalProps._heightResizedRowMap.size&&this.scenegraph.recalculateRowHeights();else if(this.isAutoRowHeight(t)&&!this.internalProps._heightResizedRowMap.has(t)){let e=this.getRowHeight(t),r=(0,ei.P)(t,0,this.colCount-1,this);this.scenegraph.updateRowHeight(t,r-e)}a!==i&&this.fireListeners(X.B.CHANGE_CELL_VALUE,{col:e,row:t,rawValue:l,currentValue:a,changedValue:i}),this.scenegraph.updateNextFrame()}}changeCellValues(e,t,r,i=!1){var n,o;let a=e,l=t,s=[],d=[];for(let i=0;i<r.length&&!(t+i>this.rowCount-1);i++){let n=r[i],o=[],a=[];s.push(o),d.push(a);for(let r=0;r<n.length&&!(e+r>this.colCount-1);r++){let n=this.getCellRawValue(e+r,t+i);o.push(n);let l=this.getCellOriginValue(e+r,t+i);a.push(l)}}for(let n=0;n<r.length&&!(t+n>this.rowCount-1);n++){l=t+n;let o=r[n],u=e;for(let r=0;r<o.length&&!(e+r>this.colCount-1);r++)if(u=e+r,i&&this.isHasEditorDefine(e+r,t+n)||!1===i){let i=o[r],a=i,l=d[n][r],u=s[n][r];"number"==typeof u&&(0,en.Zf)(i)&&(a=parseFloat(i)),this._changeCellValueToDataSet(e+r,t+n,l,a);let c=this.getCellOriginValue(e+r,t+n);c!==l&&this.fireListeners(X.B.CHANGE_CELL_VALUE,{col:e+r,row:t+n,rawValue:u,currentValue:l,changedValue:c})}a=Math.max(a,u)}let u=this.getCellRange(e,t),c=this.getCellRange(a,l);for(let e=u.start.col;e<=c.end.col;e++)for(let t=u.start.row;t<=c.end.row;t++)this.scenegraph.updateCellContent(e,t);if(null!=(o=null==(n=this.options.dataConfig)?void 0:n.updateAggregationOnEditCell)&&o)for(let e=0;e<this.colCount;e++)for(let t=0;t<this.rowCount;t++)this.internalProps.layoutMap.isAggregation(e,t)&&this.scenegraph.updateCellContent(e,t);if("adaptive"===this.widthMode||this.autoFillWidth&&this.getAllColsWidth()<=this.tableNoFrameWidth)0===this.internalProps._widthResizedColMap.size&&this.scenegraph.recalculateColWidths();else for(let t=e;t<=c.end.col;t++)if(!this.internalProps._widthResizedColMap.has(t)){let e=this.getColWidth(t),r=(0,er.al)(t,0,this.rowCount-1,this,!1);r!==e&&this.scenegraph.updateColWidth(t,r-e)}if("adaptive"===this.heightMode||this.autoFillHeight&&this.getAllRowsHeight()<=this.tableNoFrameHeight)this.scenegraph.recalculateRowHeights();else if(this.isAutoRowHeight(t)){let e=[],r=[];for(let i=t;i<=c.end.row;i++)if(this.rowHeightsMap.get(i)){let t=this.getRowHeight(i),n=(0,ei.P)(i,0,this.colCount-1,this);e.push(i),r.push(n-t)}this.scenegraph.updateRowsHeight(e,r)}this.scenegraph.updateNextFrame()}_changeCellValueToDataSet(e,t,r,i){var n,o,a,l,s,d,u,c;if(this.internalProps.recordsIsTwoDimensionalArray){let r=this.getBodyIndexByRow(t),n=this.getBodyIndexByCol(e);this.records[r][n]=i}else if(this.dataset){let d=this.internalProps.layoutMap.getCellHeaderPaths(e,t);if(this.isCornerHeader(e,t))this.internalProps.layoutMap.changeCornerTitle(e,t,i);else if(this.isHeader(e,t))this.internalProps.layoutMap.changeTreeNodeTitle(e,t,i),this.isCornerHeader(e,t)||this.dataset.changeRecordFieldValue((null==(n=d.colHeaderPaths)?void 0:n.length)?null!=(o=d.colHeaderPaths[d.colHeaderPaths.length-1].indicatorKey)?o:d.colHeaderPaths[d.colHeaderPaths.length-1].dimensionKey:null!=(a=d.rowHeaderPaths[d.rowHeaderPaths.length-1].indicatorKey)?a:d.rowHeaderPaths[d.rowHeaderPaths.length-1].dimensionKey,r,i);else{let r=null==(l=d.colHeaderPaths)?void 0:l.filter(e=>!e.virtual).map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),n=null==(s=d.rowHeaderPaths)?void 0:s.filter(e=>!e.virtual).map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value});this.dataset.changeTreeNodeValue(this.internalProps.layoutMap.indicatorsAsCol?n:n.slice(0,-1),this.internalProps.layoutMap.indicatorsAsCol?r.slice(0,-1):r,this.internalProps.layoutMap.getIndicatorKey(e,t),i)}}else if(this.flatDataToObjects){let n=this.internalProps.layoutMap.getCellHeaderPaths(e,t);if(this.isHeader(e,t))this.internalProps.layoutMap.changeTreeNodeTitle(e,t,i),this.isCornerHeader(e,t)||this.flatDataToObjects.changeRecordFieldValue((null==(d=n.colHeaderPaths)?void 0:d.length)?null!=(u=n.colHeaderPaths[n.colHeaderPaths.length-1].indicatorKey)?u:n.colHeaderPaths[n.colHeaderPaths.length-1].dimensionKey:null!=(c=n.rowHeaderPaths[n.rowHeaderPaths.length-1].indicatorKey)?c:n.rowHeaderPaths[n.rowHeaderPaths.length-1].dimensionKey,r,i);else{let r=n.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),o=n.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value});this.flatDataToObjects.changeTreeNodeValue(o,r,this.internalProps.layoutMap.getBody(e,t).indicatorKey,i)}}}_hasCustomRenderOrLayout(){if(this.options.customRender)return!0;let{columnsDefine:e,rowsDefine:t,indicatorsDefine:r}=this.internalProps.layoutMap;for(let t=0;t<e.length;t++){let r=e[t];if("string"!=typeof r&&(r.headerCustomLayout||r.headerCustomRender))return!0}for(let e=0;e<t.length;e++){let r=t[e];if("string"!=typeof r&&(r.headerCustomLayout||r.headerCustomRender))return!0}for(let e=0;e<r.length;e++){let t=r[e];if("string"!=typeof t&&(t.customLayout||t.headerCustomLayout||t.customRender||t.headerCustomRender))return!0}return!1}changeRecordOrder(e,t){}setTreeNodeChildren(e,t,r,i){this.flatDataToObjects?(this.internalProps.layoutMap.getHeadNode(r,i).children=e,this._refreshHierarchyState(r,i,!0,()=>{this.flatDataToObjects.changeDataConfig({rows:this.internalProps.layoutMap.fullRowDimensionKeys,columns:this.internalProps.layoutMap.colDimensionKeys,indicators:this.internalProps.layoutMap.indicatorKeys,indicatorsAsCol:this.internalProps.layoutMap.indicatorsAsCol,indicatorDimensionKey:this.internalProps.layoutMap.indicatorDimensionKey}),this.flatDataToObjects.addRecords(t)})):(this.internalProps.layoutMap.getHeadNode(r,i).children=e,this._refreshHierarchyState(r,i,!0,()=>{this.dataset._rowTreeHasChanged(),this.dataset.changeDataConfig({rows:this.internalProps.layoutMap.fullRowDimensionKeys,columns:this.internalProps.layoutMap.colDimensionKeys}),this.dataset.addRecords(t)}))}updateFilterRules(e){this.internalProps.dataConfig.filterRules=e,this.dataset.updateFilterRules(e),this.renderWithRecreateCells()}getFilteredRecords(){var e;return null==(e=this.dataset)?void 0:e.filterRules}getCellPivotRole(e,t){let{cellLocation:r,colHeaderPaths:i,rowHeaderPaths:n}=this.getCellHeaderPaths(e,t),o=i.length?"normal":void 0,a=n.length?"normal":void 0;return i.forEach(e=>{"sub-total"===e.role?o="sub-total":"grand-total"===e.role&&(o="grand-total")}),n.forEach(e=>{"sub-total"===e.role?a="sub-total":"grand-total"===e.role&&(a="grand-total")}),{colRole:o,rowRole:a,cellLocation:r}}setLoadingHierarchyState(e,t){this.scenegraph.setLoadingHierarchyState(e,t)}expandAllForRowTree(){"tree"!==this.rowHierarchyType&&"grid-tree"!==this.rowHierarchyType||this.internalProps.layoutMap.rowDimensionTree&&(this.internalProps.layoutMap.clearHeaderPathCache(),this.internalProps.layoutMap.expandAllForRowDimensionTree(),this.renderWithRecreateCells(),this.fireListeners($.z.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:M.g.expand,changeAll:!0}))}collapseAllForRowTree(){"tree"!==this.rowHierarchyType&&"grid-tree"!==this.rowHierarchyType||this.internalProps.layoutMap.rowDimensionTree&&(this.internalProps.layoutMap.clearHeaderPathCache(),this.internalProps.layoutMap.collapseAllForRowDimensionTree(),this.renderWithRecreateCells(),this.fireListeners($.z.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:M.g.collapse,changeAll:!0}))}expandAllForColumnTree(){"grid-tree"===this.columnHierarchyType&&this.internalProps.layoutMap.columnDimensionTree&&(this.internalProps.layoutMap.clearHeaderPathCache(),this.internalProps.layoutMap.expandAllForColumnDimensionTree(),this.renderWithRecreateCells(),this.fireListeners($.z.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:M.g.expand,changeAll:!0}))}collapseAllForColumnTree(){"grid-tree"===this.columnHierarchyType&&this.internalProps.layoutMap.columnDimensionTree&&(this.internalProps.layoutMap.clearHeaderPathCache(),this.internalProps.layoutMap.collapseAllForColumnDimensionTree(),this.renderWithRecreateCells(),this.fireListeners($.z.TREE_HIERARCHY_STATE_CHANGE,{col:-1,row:-1,hierarchyState:M.g.collapse,changeAll:!0}))}release(){this.internalProps.layoutMap.clearHeaderPathCache(),this.editorManager.release(),super.release()}}var eu=r(50173);(0,eu.R2)(),(0,eu.Eg)(),(0,eu.I)(),(0,eu.FD)(),(0,eu._t)(),(0,eu.Mh)(),(0,eu.ph)(),(0,_.yR)(),(0,_.pk)(),(0,_.m4)(),(0,_.Jy)(),(0,_.dB)(),(0,_.ge)(),(0,_.au)();class ec extends ed{}(0,_.ge)();class eh extends ed{}var ep=r(75747),eg=r(21054),ey=r(43735);class ef extends eg.C{constructor(e){var t,r,i,n,o,a,l,s,d,u;let c=(0,ey.Z)(e.boundsPadding),h=[null!=(r=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?r:0,null!=(n=null!=(i=e.marginRight)?i:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(l=null!=(o=e.marginBottom)?o:c?null!=(a=e.boundsPadding[2])?a:e.boundsPadding[0]:e.boundsPadding)?l:0,null!=(u=null!=(s=e.marginLeft)?s:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var em=r(53068);class ev extends em.ZA{constructor(e){var t,r,i,n,o,a,l,s,d,u,c,h,p,g;e.direction&&(e.flexDirection=e.direction),e.justifyContent&&("start"===e.justifyContent||"end"===e.justifyContent)&&(e.justifyContent="flex-"+e.justifyContent),e.alignItems&&("start"===e.alignItems||"end"===e.alignItems)&&(e.alignItems="flex-"+e.alignItems),e.alignContent&&("start"===e.alignContent||"end"===e.alignContent)&&(e.alignContent="flex-"+e.alignContent),e.display="flex",e.flexDirection||(e.flexDirection="row"),e.clip=!0,e.fill=null==(t=null==e?void 0:e.background)?void 0:t.fill,e.stroke=null==(r=null==e?void 0:e.background)?void 0:r.stroke,e.lineWidth=null==(i=null==e?void 0:e.background)?void 0:i.lineWidth,e.cornerRadius=null==(n=null==e?void 0:e.background)?void 0:n.cornerRadius;let y=(0,ey.Z)(e.boundsPadding),f=[null!=(a=null!=(o=e.marginTop)?o:y?e.boundsPadding[0]:e.boundsPadding)?a:0,null!=(s=null!=(l=e.marginRight)?l:y?e.boundsPadding[1]:e.boundsPadding)?s:0,null!=(c=null!=(d=e.marginBottom)?d:y?null!=(u=e.boundsPadding[2])?u:e.boundsPadding[0]:e.boundsPadding)?c:0,null!=(g=null!=(h=e.marginLeft)?h:y?null!=(p=e.boundsPadding[3])?p:e.boundsPadding[1]:e.boundsPadding)?g:0];e.boundsPadding=f,super(e)}}class eP extends ev{constructor(e){e.flexWrap="nowrap",super(e)}}var eC=r(19427),ew=r(58853);class eT extends eC.E{constructor(e){var t,r,i,n,o,a,l,s,d,u,c,h;let p;(0,ew.Z)(e.iconName)&&(p=D.U2()[e.iconName])&&(e.width=null!=(t=e.width)?t:p.width,e.height=null!=(r=e.height)?r:p.height,e.svg=p.svg,e.cursor=p.cursor),e.svg&&(e.image=e.svg);let g=(0,ey.Z)(e.boundsPadding),y=[null!=(n=null!=(i=e.marginTop)?i:g?e.boundsPadding[0]:e.boundsPadding)?n:0,null!=(a=null!=(o=e.marginRight)?o:g?e.boundsPadding[1]:e.boundsPadding)?a:0,null!=(d=null!=(l=e.marginBottom)?l:g?null!=(s=e.boundsPadding[2])?s:e.boundsPadding[0]:e.boundsPadding)?d:0,null!=(h=null!=(u=e.marginLeft)?u:g?null!=(c=e.boundsPadding[3])?c:e.boundsPadding[1]:e.boundsPadding)?h:0];e.boundsPadding=y,super(e),this.cache=p}}class eb extends eC.E{constructor(e){var t,r,i,n,o,a,l,s,d,u;e.src&&(e.image=e.src),"circle"===e.shape&&(e.cornerRadius=e.width/2);let c=(0,ey.Z)(e.boundsPadding),h=[null!=(r=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?r:0,null!=(n=null!=(i=e.marginRight)?i:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(l=null!=(o=e.marginBottom)?o:c?null!=(a=e.boundsPadding[2])?a:e.boundsPadding[0]:e.boundsPadding)?l:0,null!=(u=null!=(s=e.marginLeft)?s:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var eH=r(28651);class eR extends eH.U{constructor(e){var t,r,i,n,o,a,l,s,d,u;let c=(0,ey.Z)(e.boundsPadding),h=[null!=(r=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?r:0,null!=(n=null!=(i=e.marginRight)?i:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(l=null!=(o=e.marginBottom)?o:c?null!=(a=e.boundsPadding[2])?a:e.boundsPadding[0]:e.boundsPadding)?l:0,null!=(u=null!=(s=e.marginLeft)?s:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var eM=r(29411);class eS extends eM.x{constructor(e){var t,r,i,n,o,a,l,s,d,u,c;e.textBaseline||(e.textBaseline="top");let h=(0,ey.Z)(e.boundsPadding),p=[null!=(r=null!=(t=e.marginTop)?t:h?e.boundsPadding[0]:e.boundsPadding)?r:0,null!=(n=null!=(i=e.marginRight)?i:h?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(l=null!=(o=e.marginBottom)?o:h?null!=(a=e.boundsPadding[2])?a:e.boundsPadding[0]:e.boundsPadding)?l:0,null!=(u=null!=(s=e.marginLeft)?s:h?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=p,e.fill=null!=(c=e.fill)?c:"#000",super(e)}getSize(e){this.AABBBounds.width()}}function eA(e,t=0){return{percent:e,delta:t}}var ex=r(11971);class eK extends ex.w{constructor(e){var t,r,i,n,o,a,l,s,d,u;let c=(0,ey.Z)(e.boundsPadding),h=[null!=(r=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?r:0,null!=(n=null!=(i=e.marginRight)?i:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(l=null!=(o=e.marginBottom)?o:c?null!=(a=e.boundsPadding[2])?a:e.boundsPadding[0]:e.boundsPadding)?l:0,null!=(u=null!=(s=e.marginLeft)?s:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var eE=r(46293);class eD extends eE.V{constructor(e){var t,r,i,n,o,a,l,s,d,u;let c=(0,ey.Z)(e.boundsPadding),h=[null!=(r=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?r:0,null!=(n=null!=(i=e.marginRight)?i:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(l=null!=(o=e.marginBottom)?o:c?null!=(a=e.boundsPadding[2])?a:e.boundsPadding[0]:e.boundsPadding)?l:0,null!=(u=null!=(s=e.marginLeft)?s:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}getSize(e){this.AABBBounds.width()}}class eI extends em.ZA{constructor(e){var t,r,i,n,o,a,l,s,d,u;let c=(0,ey.Z)(e.boundsPadding),h=[null!=(r=null!=(t=e.marginTop)?t:c?e.boundsPadding[0]:e.boundsPadding)?r:0,null!=(n=null!=(i=e.marginRight)?i:c?e.boundsPadding[1]:e.boundsPadding)?n:0,null!=(l=null!=(o=e.marginBottom)?o:c?null!=(a=e.boundsPadding[2])?a:e.boundsPadding[0]:e.boundsPadding)?l:0,null!=(u=null!=(s=e.marginLeft)?s:c?null!=(d=e.boundsPadding[3])?d:e.boundsPadding[1]:e.boundsPadding)?u:0];e.boundsPadding=h,super(e)}}var eO=r(73208),eF=r(74294),ez=r(66707),eB=r(17097),ej=r(85021),eL=r(90251);function eN(e,t,r){var i,n;let o=function(e){var t,r,i,n,o,a,l,s,d,u,c;let h,p,g,y,f={seqId:0},m={isPivotChart:!0};e.columnTree&&(!1!==e.indicatorsAsCol&&(g=(0,ea.VN)(e.columnTree,e.indicators)),h=new Q.KO(null!=(t=e.columnTree)?t:[],f)),e.rowTree&&(!1===e.indicatorsAsCol&&(y=(0,ea.VN)(e.rowTree,e.indicators)),p=new Q.KO(null!=(r=e.rowTree)?r:[],f));let v=(null==(i=p.dimensionKeys)?void 0:i.count)?p.dimensionKeys.valueArr():null!=(o=null==(n=e.rows)?void 0:n.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?o:[],P=(null==(a=h.dimensionKeys)?void 0:a.count)?h.dimensionKeys.valueArr():null!=(s=null==(l=e.columns)?void 0:l.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.dimensionKey),e),[]))?s:[],C=null!=(u=null==(d=e.indicators)?void 0:d.reduce((e,t)=>("string"==typeof t?e.push(t):e.push(t.indicatorKey),e),[]))?u:[];return m.collectValuesBy=function(e,t,r){var i,n,o,a,l,s,d,u,c,h,p,g,y,f,m,v,P,C,w,T,b,H,R;let M={};for(let S=0,A=null==(i=e.indicators)?void 0:i.length;S<A;S++)if("string"!=typeof e.indicators[S]&&e.indicators[S].chartSpec)if(!1===e.indicatorsAsCol){let i=e.indicators[S];if(M[i.indicatorKey]={by:r,range:!0,sumBy:!1!==(null==(n=i.chartSpec)?void 0:n.stack)&&t.concat(null==(o=i.chartSpec)?void 0:o.xField)},i.chartSpec.series)i.chartSpec.series.forEach(e=>{var n,o,a,l,s,d,u,c,h,p,g,y,f,m,v,P;let C="string"==typeof e.xField?e.xField:e.xField[0];M[C]={by:t,type:"horizontal"!==e.direction?"xField":void 0,range:"horizontal"===e.direction,sortBy:"horizontal"!==e.direction?null!=(l=null==(a=null==(o=null==(n=null==e?void 0:e.data)?void 0:n.fields)?void 0:o[C])?void 0:a.domain)?l:null==(c=null==(u=null==(d=null==(s=i.chartSpec)?void 0:s.data)?void 0:d.fields)?void 0:u[C])?void 0:c.domain:void 0};let w=e.yField;M[w]={by:r,range:"horizontal"!==e.direction,sumBy:!1!==e.stack&&t.concat(null==e?void 0:e.xField),sortBy:"horizontal"===e.direction?null!=(y=null==(g=null==(p=null==(h=null==e?void 0:e.data)?void 0:h.fields)?void 0:p[w])?void 0:g.domain)?y:null==(P=null==(v=null==(m=null==(f=i.chartSpec)?void 0:f.data)?void 0:m.fields)?void 0:v[w])?void 0:P.domain:void 0}});else{let n="string"==typeof i.chartSpec.xField?i.chartSpec.xField:i.chartSpec.xField[0];M[n]={by:t,type:"horizontal"!==i.chartSpec.direction?"xField":void 0,range:"horizontal"===i.chartSpec.direction,sortBy:"horizontal"!==i.chartSpec.direction?null==(d=null==(s=null==(l=null==(a=i.chartSpec)?void 0:a.data)?void 0:l.fields)?void 0:s[n])?void 0:d.domain:void 0};let o=i.chartSpec.yField;M[o]={by:r,range:"horizontal"!==e.indicators[S].chartSpec.direction,sumBy:!1!==i.chartSpec.stack&&t.concat(null==(u=i.chartSpec)?void 0:u.xField),sortBy:"horizontal"===i.chartSpec.direction?null==(g=null==(p=null==(h=null==(c=i.chartSpec)?void 0:c.data)?void 0:h.fields)?void 0:p[o])?void 0:g.domain:void 0}}}else{let i=e.indicators[S];if(M[i.indicatorKey]={by:t,range:!0,sumBy:!1!==(null==(y=i.chartSpec)?void 0:y.stack)&&r.concat(null==(f=i.chartSpec)?void 0:f.yField)},i.chartSpec.series)i.chartSpec.series.forEach(e=>{var n,o,a,l,s,d,u,c,h,p,g,y,f,m,v,P;let C="string"==typeof e.yField?e.yField:e.yField[0];M[C]={by:r,type:"horizontal"===e.direction?"yField":void 0,range:"horizontal"!==e.direction,sortBy:"horizontal"===e.direction?null!=(l=null==(a=null==(o=null==(n=null==e?void 0:e.data)?void 0:n.fields)?void 0:o[C])?void 0:a.domain)?l:null==(c=null==(u=null==(d=null==(s=i.chartSpec)?void 0:s.data)?void 0:d.fields)?void 0:u[C])?void 0:c.domain:void 0};let w=e.xField;M[w]={by:t,range:"horizontal"===e.direction,sumBy:!1!==e.stack&&r.concat(null==e?void 0:e.yField),sortBy:"horizontal"!==e.direction?null!=(y=null==(g=null==(p=null==(h=null==e?void 0:e.data)?void 0:h.fields)?void 0:p[w])?void 0:g.domain)?y:null==(P=null==(v=null==(m=null==(f=i.chartSpec)?void 0:f.data)?void 0:m.fields)?void 0:v[w])?void 0:P.domain:void 0}});else{let n="string"==typeof i.chartSpec.yField?i.chartSpec.yField:i.chartSpec.yField[0];M[n]={by:r,type:"horizontal"===i.chartSpec.direction?"yField":void 0,range:"horizontal"!==i.chartSpec.direction,sortBy:"horizontal"===i.chartSpec.direction?null==(C=null==(P=null==(v=null==(m=i.chartSpec)?void 0:m.data)?void 0:v.fields)?void 0:P[n])?void 0:C.domain:void 0};let o=i.chartSpec.xField;M[o]={by:t,range:"horizontal"===e.indicators[S].chartSpec.direction,sumBy:!1!==i.chartSpec.stack&&r.concat(null==(w=i.chartSpec)?void 0:w.yField),sortBy:"horizontal"!==i.chartSpec.direction?null==(R=null==(H=null==(b=null==(T=i.chartSpec)?void 0:T.data)?void 0:b.fields)?void 0:H[o])?void 0:R.domain:void 0}}}return M}(e,P,v),m.aggregationRules=function(e){var t;let r=[];return null==(t=e.indicators)||t.forEach(t=>{var i,n;if("string"==typeof t)r.push({indicatorKey:t,field:t,aggregationType:R.E.RECORD});else if(null==(i=t.chartSpec)?void 0:i.series){let i=[];null==(n=t.chartSpec)||n.series.forEach(t=>{let r=!1===e.indicatorsAsCol?t.yField:t.xField;-1===i.indexOf(r)&&i.push(r)}),r.push({indicatorKey:t.indicatorKey,field:i,aggregationType:R.E.RECORD})}else{let i=!1===e.indicatorsAsCol?t.chartSpec.yField:t.chartSpec.xField;r.push({indicatorKey:t.indicatorKey,field:null!=i?i:t.indicatorKey,aggregationType:R.E.RECORD})}}),r}(e),{dataset:new G.q(m,v,P,C,e.indicators,null==(c=e.indicatorsAsCol)||c,e.records,void 0,void 0,g||e.columnTree,y||e.rowTree,!0),columnDimensionTree:h,rowDimensionTree:p,layoutNodeId:f}}(e),a=o.columnDimensionTree,l=o.rowDimensionTree,s=!1,d=!1;e.columnTree&&e.indicatorsAsCol&&!a.dimensionKeys.contain(eL.ek)&&(s=!0),e.rowTree&&(e.indicatorsAsCol||l.dimensionKeys.contain(eL.ek)||(d=!0));let{dataset:u,layoutNodeId:c}=o;e.columnTree&&!s||(a=new Q.KO(null!=(i=u.colHeaderTree)?i:[],c)),e.rowTree&&!d||(l=new Q.KO(null!=(n=u.rowHeaderTree)?n:[],c));let h=new k.z({options:e,layoutNodeId:c,internalProps:e,isPivotChart:()=>!0,pivotChartAxes:[],_selectedDataItemsInChart:[],_getActiveChartInstance:()=>({updateState:()=>{}})},u,a,l);for(let e=0;e<h.colCount;e++)for(let i=0;i<h.rowCount;i++){if(h.isHeader(e,i))continue;let n=h.getCellHeaderPaths(e,i),o=n.colHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),a=n.rowHeaderPaths.map(e=>{var t;return null!=(t=e.indicatorKey)?t:e.value}),l=u.getAggregator(h.indicatorsAsCol?a:a.slice(0,-1),h.indicatorsAsCol?o.slice(0,-1):o,h.getIndicatorKey(e,i)),s=function(e,t,r,i,n,o){if((0,ey.Z)(e))for(let s=0;s<e.length;s++){var a,l;if(o?o(e[s],t):(a=e[s],l=t,JSON.stringify(a)===JSON.stringify(l)))return n.getCellHeaderPaths(r,i)}}(l.value?l.value():void 0,t,e,i,h,r);if(s)return s}}var e_=r(52812),eV=r(31535),ek=r(30756),eW=r(20672),eZ=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};function e$(e,t,...r){let i=t||{},{key:n,name:o,id:a,attribute:l,stateProxy:s,animation:d,timeline:u}=i,c=eZ(i,["key","name","id","attribute","stateProxy","animation","timeline"]),h=e;(0,ek.Z)(e)&&(h=eW.i[e]);let p=[];r.length&&function e(t,r){if((0,eV.Z)(t))return t.forEach(t=>e(t,r));r.push(t)}(1===r.length?r[0]:r,p);let g="Group"===h.name?new h(l):h(t);if(function(e,t,r){let i,n=!1;switch(e.type){case"richtext":case"rich/image":break;case"rich/text":i=e.attribute||{},t[0]&&(i.text=t[0]);break;default:n=!0}n?(t.forEach(t=>{t&&e.add(t)}),Object.keys(r).forEach(t=>{let i=e_.Nv[t];i&&e.on(i,r[t])})):"richtext"===e.type&&(e.attribute.textConfig=t.map(e=>e.attribute).filter(e=>e))}(g,p,c),s&&(g.stateProxy=s),o&&(g.name=o),(0,eV.Z)(d)){let e=g.animate();u&&e.setTimeline(u),d.forEach(t=>{e[t[0]](...t.slice(1))})}return g}function eq(e){return new eE.V(e?e.attribute:{})}function eG(e){return new eF.J(e?e.attribute:{})}function eJ(e){return new ez.Y(e?e.attribute:{})}var eU=r(63388),eY=r(1669),eQ=r(31150);(0,w.sTO)();let eX="1.19.4";function e0(){return D.U2()}function e1(){I.clearAll()}R.E;let e2=new Map;e2.set("react",v),e2.set("@visactor/vchart",P),e2.set("@visactor/vseed",C),e2.set("@visactor/vtable",g);let e5=function(e,t){if(!e2.has(e))throw Error("Module "+e+" not found");let r=e2.get(e);return t&&"object"==typeof r&&r.default||r};function e7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function e3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e7(Object(r),!0).forEach(function(t){var i;i=r[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e7(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function e9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function e8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e9(Object(r),!0).forEach(function(t){var i;i=r[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e9(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e6(e){return function t(){for(var r=this,i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return n.length>=e.length?e.apply(this,n):function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return t.apply(r,[].concat(n,i))}}}function te(e){return({}).toString.call(e).includes("Object")}function tt(e){return"function"==typeof e}var tr=e6(function(e,t){throw Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),ti=function(e,t){return te(t)||tr("changeType"),Object.keys(t).some(function(t){return!Object.prototype.hasOwnProperty.call(e,t)})&&tr("changeField"),t},tn=function(e){tt(e)||tr("selectorType")},to=function(e){tt(e)||te(e)||tr("handlerType"),te(e)&&Object.values(e).some(function(e){return!tt(e)})&&tr("handlersType")},ta=function(e){e||tr("initialIsRequired"),te(e)||tr("initialType"),Object.keys(e).length||tr("initialContent")};function tl(e,t){return tt(t)?t(e.current):t}function ts(e,t){return e.current=e8(e8({},e.current),t),t}function td(e,t,r){return tt(t)?t(e.current):Object.keys(r).forEach(function(r){var i;return null==(i=t[r])?void 0:i.call(t,e.current[r])}),r}var tu={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},tc=(a=function(e,t){throw Error(e[t]||e.default)},function e(){for(var t=this,r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];return i.length>=a.length?a.apply(this,i):function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.apply(t,[].concat(i,n))}})(tu);let th=function(e){return(e||tc("configIsRequired"),({}).toString.call(e).includes("Object")||tc("configType"),e.urls)?(console.warn(tu.deprecation),{paths:{vs:e.urls.monacoBase}}):e},tp=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}};var tg={type:"cancelation",msg:"operation is manually canceled"};let ty=function(e){var t=!1,r=new Promise(function(r,i){e.then(function(e){return t?i(tg):r(e)}),e.catch(i)});return r.cancel=function(){return t=!0},r};var tf=function(e){if(Array.isArray(e))return e}(l=({create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ta(e),to(t);var r={current:e},i=e6(td)(r,t),n=e6(ts)(r),o=e6(ti)(e),a=e6(tl)(r);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return tn(e),e(r.current)},function(e){(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}})(i,n,o,a)(e)}]}}).create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}))||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done)&&(r.push(a.value),r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(n)throw o}}return r}}(l,2)||function(e,t){if(e){if("string"==typeof e)return e4(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e4(e,t)}}(l,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),tm=tf[0],tv=tf[1];function tP(e){return document.body.appendChild(e)}function tC(e){var t,r,i=tm(function(e){return{config:e.config,reject:e.reject}}),n=(t="".concat(i.config.paths.vs,"/loader.js"),r=document.createElement("script"),t&&(r.src=t),r);return n.onload=function(){return e()},n.onerror=i.reject,n}function tw(){var e=tm(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(t){tT(t),e.resolve(t)},function(t){e.reject(t)})}function tT(e){tm().monaco||tv({monaco:e})}var tb=new Promise(function(e,t){return tv({resolve:e,reject:t})});let tH=function(){var e=tm(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(tv({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),ty(tb);if(window.monaco&&window.monaco.editor)return tT(window.monaco),e.resolve(window.monaco),ty(tb);tp(tP,tC)(tw)}return ty(tb)};var tR={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},tM={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},tS=function({children:e}){return m.createElement("div",{style:tM},e)},tA=(0,m.memo)(function({width:e,height:t,isEditorReady:r,loading:i,_ref:n,className:o,wrapperProps:a}){return m.createElement("section",{style:{...tR.wrapper,width:e,height:t},...a},!r&&m.createElement(tS,null,i),m.createElement("div",{ref:n,style:{...tR.fullWidth,...!r&&tR.hide},className:o}))}),tx=function(e){(0,m.useEffect)(e,[])},tK=function(e,t,r=!0){let i=(0,m.useRef)(!0);(0,m.useEffect)(i.current||!r?()=>{i.current=!1}:e,t)};function tE(){}function tD(e,t,r,i){var n,o,a,l,s,d;return n=e,o=i,n.editor.getModel(tI(n,o))||(a=e,l=t,s=r,d=i,a.editor.createModel(l,s,d?tI(a,d):void 0))}function tI(e,t){return e.Uri.parse(t)}(0,m.memo)(function({original:e,modified:t,language:r,originalLanguage:i,modifiedLanguage:n,originalModelPath:o,modifiedModelPath:a,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:s=!1,theme:d="light",loading:u="Loading...",options:c={},height:h="100%",width:p="100%",className:g,wrapperProps:y={},beforeMount:f=tE,onMount:v=tE}){let[P,C]=(0,m.useState)(!1),[w,T]=(0,m.useState)(!0),b=(0,m.useRef)(null),H=(0,m.useRef)(null),R=(0,m.useRef)(null),M=(0,m.useRef)(v),S=(0,m.useRef)(f),A=(0,m.useRef)(!1);tx(()=>{let e=tH();return e.then(e=>(H.current=e)&&T(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>{let t;return b.current?(t=b.current?.getModel(),void(l||t?.original?.dispose(),s||t?.modified?.dispose(),b.current?.dispose())):e.cancel()}}),tK(()=>{if(b.current&&H.current){let t=b.current.getOriginalEditor(),n=tD(H.current,e||"",i||r||"text",o||"");n!==t.getModel()&&t.setModel(n)}},[o],P),tK(()=>{if(b.current&&H.current){let e=b.current.getModifiedEditor(),i=tD(H.current,t||"",n||r||"text",a||"");i!==e.getModel()&&e.setModel(i)}},[a],P),tK(()=>{let e=b.current.getModifiedEditor();e.getOption(H.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[t],P),tK(()=>{b.current?.getModel()?.original.setValue(e||"")},[e],P),tK(()=>{let{original:e,modified:t}=b.current.getModel();H.current.editor.setModelLanguage(e,i||r||"text"),H.current.editor.setModelLanguage(t,n||r||"text")},[r,i,n],P),tK(()=>{H.current?.editor.setTheme(d)},[d],P),tK(()=>{b.current?.updateOptions(c)},[c],P);let x=(0,m.useCallback)(()=>{if(!H.current)return;S.current(H.current);let l=tD(H.current,e||"",i||r||"text",o||""),s=tD(H.current,t||"",n||r||"text",a||"");b.current?.setModel({original:l,modified:s})},[r,t,n,e,i,o,a]),K=(0,m.useCallback)(()=>{!A.current&&R.current&&(b.current=H.current.editor.createDiffEditor(R.current,{automaticLayout:!0,...c}),x(),H.current?.editor.setTheme(d),C(!0),A.current=!0)},[c,d,x]);return(0,m.useEffect)(()=>{P&&M.current(b.current,H.current)},[P]),(0,m.useEffect)(()=>{w||P||K()},[w,P,K]),m.createElement(tA,{width:p,height:h,isEditorReady:P,loading:u,_ref:R,className:g,wrapperProps:y})});var tO=function(e){let t=(0,m.useRef)();return(0,m.useEffect)(()=>{t.current=e},[e]),t.current},tF=new Map,tz=(0,m.memo)(function({defaultValue:e,defaultLanguage:t,defaultPath:r,value:i,language:n,path:o,theme:a="light",line:l,loading:s="Loading...",options:d={},overrideServices:u={},saveViewState:c=!0,keepCurrentModel:h=!1,width:p="100%",height:g="100%",className:y,wrapperProps:f={},beforeMount:v=tE,onMount:P=tE,onChange:C,onValidate:w=tE}){let[T,b]=(0,m.useState)(!1),[H,R]=(0,m.useState)(!0),M=(0,m.useRef)(null),S=(0,m.useRef)(null),A=(0,m.useRef)(null),x=(0,m.useRef)(P),K=(0,m.useRef)(v),E=(0,m.useRef)(),D=(0,m.useRef)(i),I=tO(o),O=(0,m.useRef)(!1),F=(0,m.useRef)(!1);tx(()=>{let e=tH();return e.then(e=>(M.current=e)&&R(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>S.current?void(E.current?.dispose(),h?c&&tF.set(o,S.current.saveViewState()):S.current.getModel()?.dispose(),S.current.dispose()):e.cancel()}),tK(()=>{let a=tD(M.current,e||i||"",t||n||"",o||r||"");a!==S.current?.getModel()&&(c&&tF.set(I,S.current?.saveViewState()),S.current?.setModel(a),c&&S.current?.restoreViewState(tF.get(o)))},[o],T),tK(()=>{S.current?.updateOptions(d)},[d],T),tK(()=>{S.current&&void 0!==i&&(S.current.getOption(M.current.editor.EditorOption.readOnly)?S.current.setValue(i):i!==S.current.getValue()&&(F.current=!0,S.current.executeEdits("",[{range:S.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),S.current.pushUndoStop(),F.current=!1))},[i],T),tK(()=>{let e=S.current?.getModel();e&&n&&M.current?.editor.setModelLanguage(e,n)},[n],T),tK(()=>{void 0!==l&&S.current?.revealLine(l)},[l],T),tK(()=>{M.current?.editor.setTheme(a)},[a],T);let z=(0,m.useCallback)(()=>{if(!(!A.current||!M.current)&&!O.current){K.current(M.current);let s=o||r,h=tD(M.current,i||e||"",t||n||"",s||"");S.current=M.current?.editor.create(A.current,{model:h,automaticLayout:!0,...d},u),c&&S.current.restoreViewState(tF.get(s)),M.current.editor.setTheme(a),void 0!==l&&S.current.revealLine(l),b(!0),O.current=!0}},[e,t,r,i,n,o,d,u,c,a,l]);return(0,m.useEffect)(()=>{T&&x.current(S.current,M.current)},[T]),(0,m.useEffect)(()=>{H||T||z()},[H,T,z]),D.current=i,(0,m.useEffect)(()=>{T&&C&&(E.current?.dispose(),E.current=S.current?.onDidChangeModelContent(e=>{F.current||C(S.current.getValue(),e)}))},[T,C]),(0,m.useEffect)(()=>{if(T){let e=M.current.editor.onDidChangeMarkers(e=>{let t=S.current.getModel()?.uri;if(t&&e.find(e=>e.path===t.path)){let e=M.current.editor.getModelMarkers({resource:t});w?.(e)}});return()=>{e?.dispose()}}return()=>{}},[T,w]),m.createElement(tA,{width:p,height:g,isEditorReady:T,loading:s,_ref:A,className:y,wrapperProps:f})});function tB(e){let{options:t,className:r="",theme:i,...n}=e||{},o=(0,f.e7)(),a=(0,m.useMemo)(()=>i||(o?"vs-dark":"light"),[i,o]);return(0,y.jsx)("div",{className:`rspress-playground-editor ${r}`,children:(0,y.jsx)(tz,{...n,theme:a,options:{minimap:{enabled:!0,autohide:!0},fontSize:14,lineNumbersMinChars:7,scrollBeyondLastLine:!1,automaticLayout:!0,wordBasedSuggestions:!0,quickSuggestions:!0,scrollbar:{verticalScrollbarSize:8,horizontalScrollbarSize:8},scrollPredominantAxis:!1,...t}})})}function tj(e,t){return{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:"string"==typeof e?{type:"Identifier",name:e}:e,init:t}],kind:"const"}}function tL(e){return{type:"Identifier",name:e}}function tN(e,t){return{type:"ObjectProperty",key:tL(e),computed:!1,shorthand:e===t,value:tL(t)}}function t_(e,t){return{type:"CallExpression",callee:{type:"Identifier",name:"__get_import"},arguments:[{type:"StringLiteral",value:e},{type:"BooleanLiteral",value:!!t}]}}async function tV(){let e=await fetch("https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.20/babel.min.js"),t=await e.text(),r=Function("exports","module","require",`with(exports, module, require) {${t}}`),i={};return r(i,{exports:i},()=>{}),i}n=(i=th({paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs"}})).monaco,o=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(i,["monaco"]),tv(function(e){return{config:function e(t,r){return Object.keys(r).forEach(function(i){r[i]instanceof Object&&t[i]&&Object.assign(r[i],e(t[i],r[i]))}),e3(e3({},t),r)}(e.config,o),monaco:n}});let tk=null;async function tW(){if(window.Babel)return window.Babel;if(tk)return tk;tk=tV();try{let e=await tk;return window.Babel=e,e}catch(e){throw tk=null,e}}class tZ extends m.Component{static getDerivedStateFromError(e){return{error:e,comp:null}}waitCompile(e){this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.timer=null,this.doCompile(e)},800)}async doCompile(e){let{language:t,getImport:r}=this.props,i=await tW();try{let n=[[i.availablePresets.react],[i.availablePresets.env,{modules:"commonjs"}]];("tsx"===t||"ts"===t)&&n.unshift([i.availablePresets.typescript,{allExtensions:!0,isTSX:"tsx"===t}]);let o=i.transform(e,{sourceType:"module",sourceMaps:"inline",presets:n,plugins:[{pre(){this.hasReactImported=!1},visitor:{ImportDeclaration(e){let t=e.node.source.value,r=[],i=[];for(let n of e.node.specifiers)"React"===n.local.name&&(this.hasReactImported=!0),"ImportDefaultSpecifier"===n.type&&r.push(tj(n.local.name,t_(t,!0))),"ImportNamespaceSpecifier"===n.type&&r.push(tj(n.local.name,t_(t))),"ImportSpecifier"===n.type&&("name"in n.imported&&n.imported.name!==n.local.name?i.push([n.imported.name,n.local.name]):i.push(n.local.name));i.length>0&&r.push(tj({type:"ObjectPattern",properties:i.map(e=>Array.isArray(e)?tN(e[0],e[1]):tN(e,e))},t_(t))),e.replaceWithMultiple(r)}},post(e){this.hasReactImported||e.ast.program.body.unshift(tj("React",t_("react",!0)))}}]});if(e!==this.props.code||!o||!o.code)return;let a={};if(Function("__get_import","exports",o.code)(r,a),a.default)return void this.setState({error:void 0,comp:m.createElement(a.default)});this.setState({error:Error("No default export")})}catch(t){if(e!==this.props.code)return;console.error(t),this.setState({error:t})}}componentDidCatch(e,t){console.error(e),console.error(t)}componentDidMount(){this.doCompile(this.props.code)}componentDidUpdate(e){e.code!==this.props.code&&this.waitCompile(this.props.code)}render(){let{className:e="",code:t,language:r,getImport:i,...n}=this.props,{error:o,comp:a}=this.state;return(0,y.jsxs)("div",{className:`rspress-playground-runner ${e}`,...n,children:[a,o&&(0,y.jsx)("pre",{className:"rspress-playground-error",children:o.message})]})}constructor(e){var t;super(e),(t="timer")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null,this.state={error:void 0,comp:null},this.doCompile=this.doCompile.bind(this),this.waitCompile=this.waitCompile.bind(this)}}function t$(e){let{code:t,language:r,className:i="",direction:n,editorPosition:o,renderChildren:a,...l}=e,s=function(e){let{page:t}=(0,f.Vi)(),{frontmatter:r={}}=t,{playgroundDirection:i}=r;return e.direction?e.direction:i?i:"horizontal"}(e),[d,u]=(0,m.useState)(t),c=(0,m.useCallback)(e=>{u(e||"")},[]),h="horizontal"===s&&"left"===o,p=["rspress-playground",`rspress-playground-${s}`,`rspress-playground-reverse-${h?"y":"n"}`,i].join(" ");return(0,y.jsxs)("div",{className:p,...l,children:[(0,y.jsx)(tZ,{language:r,code:d,getImport:e5}),(0,y.jsx)(tB,{value:d,onChange:c,language:"tsx"===r||"ts"===r?"typescript":"javascript",beforeMount:e=>{e.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0,noSuggestionDiagnostics:!0})}}),null==a?void 0:a(e,d,s)]})}}}]);