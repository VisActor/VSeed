---
pageType: doc
---

# 快速开始

```bash title=install
npm install @visactor/vseed

# optional
npm install @visactor/vchart

# optional
npm install @visactor/vtable
```

## 快速理解

### vseed DSL

vseed 是一个面向分析领域的DSL, 封装了该领域常用的图表能力, 极大地提升分析式报表平台的搭建效率.

一般情况下, 给定数据集和图表类型, 即可直接出图. 每类图表类型存在大量的默认约定逻辑.

```tsx pure {5-12}
import { VSeed } from '@visactor/vseed'
registerAll()

const vseed: VSeed = {
  chartType: 'line',
  dataset: [
    { date: '2019', profit: 10, sales: 100 },
    { date: '2020', profit: 30, sales: 200 },
    { date: '2021', profit: 30, sales: 300 },
    { date: '2022', profit: 50, sales: 400 },
    { date: '2023', profit: 40, sales: 500 },
  ],
}
```

### builder

一个`spec builder`, 输入1个`vseed`, 即可获得1个 `vtable` 或 `vchart` 的 `spec`

可以基于自己的业务场景, 二次处理 `spec` 

极大地降低vtable、vchart的图表的配置复杂度, 并给予开发者极高的灵活度.

```tsx pure {15,17}
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const vseed: VSeed = {
  chartType: 'line',
  dataset: [
    { date: '2019', profit: 10, sales: 100 },
    { date: '2020', profit: 30, sales: 200 },
    { date: '2021', profit: 30, sales: 300 },
    { date: '2022', profit: 50, sales: 400 },
    { date: '2023', profit: 40, sales: 500 },
  ],
}

const builder = Builder.from(vseed)

const spec = builder.build()
```

### register

可以使用register注册特定图表类型

- registerAll 注册所有图表类型和深浅色主题
- registerCustomTheme用于自定义主题.

```tsx pure {14}
import { registerAll } from '@visactor/vseed'
registerAll()
```

## VChart 渲染

:::tip
只需传入图表类型与数据, 即可直接出图
:::

```tsx direction=vertical
import { useRef, useEffect } from 'react'
import VChart from '@visactor/vchart'
import { registerAll, VSeed, Builder } from '@visactor/vseed'
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'line',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
      ],
    }

    const spec = Builder.from(vseed).build()

    const vchart = new VChart(spec, { dom: ref.current })

    vchart.renderSync()

    return () => vchart.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```

## PivotChart 渲染

:::tip
配置measures分组, 或维度透视, 即可渲染出透视图表
:::

```tsx direction=vertical
import { useRef, useEffect, memo } from 'react'
import VChart from '@visactor/vchart'
import { register, PivotChart, PivotChartConstructorOptions } from '@visactor/vtable'
import { registerAll, VSeed, Builder, UnfoldDimensionGroupId } from '@visactor/vseed'

register.chartModule('vchart', VChart)
registerAll()

const Demo = () => {
  const ref = useRef<HTMLDivElement>(null)

  useEffect(() => {
    if (!ref.current) {
      return
    }

    const vseed: VSeed = {
      chartType: 'line',
      dataset: [
        { date: '2019', profit: 10, sales: 100 },
        { date: '2020', profit: 30, sales: 200 },
        { date: '2021', profit: 30, sales: 300 },
        { date: '2022', profit: 50, sales: 400 },
        { date: '2023', profit: 40, sales: 500 },
      ],
      dimensions: [{ id: 'date', alias: '日期' }],
      measures: [
        {
          id: 'profit-group',
          children: [{ id: 'profit', alias: '利润' }],
        },
        {
          id: 'sales-group',
          children: [{ id: 'sales', alias: '销售额' }],
        },
      ],
    }

    const spec = Builder.from(vseed).build()

    const tableInstance = new PivotChart(ref.current, spec)

    tableInstance.on('legend_item_click', (args) => {
      console.log('LEGEND_ITEM_CLICK', args)
      tableInstance.updateFilterRules([
        {
          filterKey: UnfoldDimensionGroupId,
          filteredValues: args.value,
        },
      ])
    })

    return () => tableInstance.release()
  })

  return <div ref={ref} style={{ height: 260, width: '100%' }}></div>
}

export default Demo
```
