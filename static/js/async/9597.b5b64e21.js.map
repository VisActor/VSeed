{"version":3,"file":"static/js/async/9597.b5b64e21.js","sources":["../../../../../../packages/vseed/src/builder/builder/builder.ts","../../../../../../packages/vseed/src/builder/builder/build.ts","../../../../../../packages/vseed/src/builder/builder/buildSpec.ts","../../../../../../packages/vseed/src/builder/builder/buildAdvanced.ts","../../../../../../packages/vseed/src/builder/builder/advanced/colorItems.ts","../../../../../../packages/vseed/src/builder/register/all.ts","../../../../../../packages/vseed/src/builder/register/chartType/area.ts","../../../../../../packages/vseed/src/builder/register/chartType/areaPercent.ts","../../../../../../packages/vseed/src/builder/register/chartType/bar.ts","../../../../../../packages/vseed/src/builder/register/chartType/barParallel.ts","../../../../../../packages/vseed/src/builder/register/chartType/barPercent.ts","../../../../../../packages/vseed/src/builder/register/chartType/boxplot.ts","../../../../../../packages/vseed/src/builder/register/chartType/column.ts","../../../../../../packages/vseed/src/builder/register/chartType/columnParallel.ts","../../../../../../packages/vseed/src/builder/register/chartType/columnPercent.ts","../../../../../../packages/vseed/src/builder/register/chartType/donut.ts","../../../../../../packages/vseed/src/builder/register/chartType/dualAxis.ts","../../../../../../packages/vseed/src/builder/register/chartType/funnel.ts","../../../../../../packages/vseed/src/builder/register/chartType/heatmap.ts","../../../../../../packages/vseed/src/builder/register/chartType/histogram.ts","../../../../../../packages/vseed/src/builder/register/chartType/line.ts","../../../../../../packages/vseed/src/builder/register/chartType/pie.ts","../../../../../../packages/vseed/src/builder/register/chartType/pivotTable.ts","../../../../../../packages/vseed/src/builder/register/chartType/radar.ts","../../../../../../packages/vseed/src/builder/register/chartType/rose.ts","../../../../../../packages/vseed/src/builder/register/chartType/roseParallel.ts","../../../../../../packages/vseed/src/builder/register/chartType/scatter.ts","../../../../../../packages/vseed/src/builder/register/chartType/table.ts","../../../../../../packages/vseed/src/builder/register/theme/custom.ts","../../../../../../packages/vseed/src/builder/register/theme/dark.ts","../../../../../../packages/vseed/src/builder/register/theme/light.ts","../../../../../../packages/vseed/src/dataReshape/constant.ts","../../../../../../packages/vseed/src/dataReshape/dataReshapeByEncoding.ts","../../../../../../packages/vseed/src/dataReshape/foldMeasures.ts","../../../../../../packages/vseed/src/dataReshape/unfoldDimensions.ts","../../../../../../packages/vseed/src/dataSelector/selector.ts","../../../../../../packages/vseed/src/i18n/i18nData.ts","../../../../../../packages/vseed/src/i18n/i18n.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/area.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/areaPercent.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/bar.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/barParallel.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/barPercent.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/boxplot.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/boxplot.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/config/boxplot.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithBoxplotEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithBoxplotEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/column.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/columnParallel.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/columnPercent.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/donut.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/buildMeasuresForDualAxis.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/dualAxis.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/dualAxis.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithDualEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithDualEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/config/dualAxis.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/funnel.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/funnel.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/heatmap.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/heatmap.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/config/heatmap.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/histogram.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/histogram.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/config/histogram.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithHistogramEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithHistogramEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/line.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/pie.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/radar.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/radar.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/rose.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/roseParallel.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/buildMeasuresForScatter.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/dimensions/addPivotDimensionsForScatter.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/scatter.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipeline/scatter.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithScatterEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithScatterEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/config/scatter.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/common.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/sortLegend.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/sortXBand.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/sortYBand.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/annotation/annotation.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/config/column.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/config/index.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/config/line.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/config/pie.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/default/defaultDimensions.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/default/defaultMeasureId.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/default/defaultMeasures.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/dimensions/pickDimensionsForReshape.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/adapter/encodingAdapter.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/bar.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/color/addColorToEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/column.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/line.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/pie.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/rose.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/init/initAdvancedVSeed.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/markStyle/markStyle.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/buildMeasures.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/utils.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/page/page.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/pivot/pivotAdapter.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/regressionLine/regressionLine.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithEncoding.ts","../../../../../../packages/vseed/src/pipeline/advanced/chart/pipes/theme/theme.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipeline/pivotTable.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/default/defaultMeasureId.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/encoding/pivotTable.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/reshape/reshapePivotTable.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/config/pivotTableConfig.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipeline/table.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/records/records.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/config/tableConfig.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/cellStyle/cellStyle.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/default/defaultDimensions.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/default/defaultMeasures.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/init/initAdvancedVSeed.ts","../../../../../../packages/vseed/src/pipeline/advanced/table/pipes/page/page.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/area.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/areaPercent.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/bar.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/barParallel.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/barParallel.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/barPercent.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/boxplot.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/boxWidth/boxMaxWidth.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/boxWidth/boxGapInGroup.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetBoxplot.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelBoxPlot.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipBoxplot.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorBoxPlotStyleFill.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/boxPlotStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/outlierStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/boxplot.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/columnRegressionLine.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/column.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/columnParallel.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/columnParallel.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/columnPercent.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/donut.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/donut.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/series/series.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/dualAxis.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dual/dualChartType.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetDualAxis.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelDualAxis.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipDualAxis.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/barStyleFilter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/pointStyleFilter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/lineStyleFilter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/areaStyleFilter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dual/adjustXField.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yLinearPrimary.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yLinearSecondary.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPointOfDualAxis.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/dualAxis.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/linearColorForDualAxis.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/funnel.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorFunnelStyleFill.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/funnelStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/funnelTransformStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/funnel.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/heatmapBandAxis.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/cellStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipHeatmap.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/heatmap.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/heatmap.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/legend/heatmapColorLegend.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/heatmapColorDomain.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/histogram.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetHistogram.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/histogramXLinear.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/utils/histogram.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipHistogram.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/histogramCrosshair.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPointOfHistogram.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/kdeRegressionLine.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/ecdfRegressionLine.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/histogram.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/line.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/line.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/pie.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/pie.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/radar.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/radarAngle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/radarRadius.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/radar.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/rose.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/rose.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/roseParallel.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/roseParallel.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/scatter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetScatter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/size/scatterSize.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelScatter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipScatter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairLine.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/linearRegressionLine.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipeline/scatter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationArea.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationAreaBand.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationHorizontalLine.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPoint.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPointCommon.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationVerticalLine.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/splitLine.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/utils.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/bandAxisStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/format/linearFormat.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/linearAxisStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/radius.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/title/defaultTitleText.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/xBand.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/xLinear.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yBand.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yLinear.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/backgroundColor/background.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/barWidth/barGapInGroup.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/barWidth/barMaxWidth.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/brush/brush.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/color.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorAdapter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorAreaStyleFill.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorBarStyleFill.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorLineStyleFill.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorPieStyleFill.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorPointStyleFill.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorRoseStyleFill.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/color/linearColor.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairRect.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairLine.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairRect.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetPivot.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetXY.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetYX.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/progressive.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/area.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/bar.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/column.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/init/pivot.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/label/label.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelPie.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/legend/colorLegend.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/legend/discreteLegend.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/legend/pivotColorLegend.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/legend/pivotDiscreteLegend.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/areaStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/barStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/curve/curve.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/lineStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/pieStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/pointState.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/pointStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/roseStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/percent/percent.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/dimensionLinkage.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotAdapter.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotAxisStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotColumnDimensions.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotGridStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotHideIndicatorName.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotIndicators.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotRowDimensions.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotTitle.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/region/addRegionPadding.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/common.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/stack/stack.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/stack/stackCornerRadius.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltip.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipElement.ts","../../../../../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipeline/pivotTable.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/init/pivotTable.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/columns/pivotColumns.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/rows/pivotRows.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/corner/titleOnDimension.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/indicators/pivotIndicators.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/theme/rowHeaderStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/theme/cornerHeaderStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/indicators/pivotDataConfig.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/cellStyle/pivot.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/columns/dimensionsToColumns.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/columns/measuresToColumns.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipeline/table.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/init/table.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/cellStyle/table.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/cellStyle/common.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/theme/bodyStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/theme/frameStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/theme/headerStyle.ts","../../../../../../packages/vseed/src/pipeline/spec/table/pipes/theme/selectionStyle.ts","../../../../../../packages/vseed/src/pipeline/utils/boxplot.ts","../../../../../../packages/vseed/src/pipeline/utils/chatType.ts","../../../../../../packages/vseed/src/pipeline/utils/constant.ts","../../../../../../packages/vseed/src/pipeline/utils/dimensions/typeGuard.ts","../../../../../../packages/vseed/src/pipeline/utils/format/createFormatter.ts","../../../../../../packages/vseed/src/pipeline/utils/format/createFormatterByMeasure.ts","../../../../../../packages/vseed/src/pipeline/utils/format/createNumFormatter.ts","../../../../../../packages/vseed/src/pipeline/utils/measures/find.ts","../../../../../../packages/vseed/src/pipeline/utils/measures/typeGuard.ts","../../../../../../packages/vseed/src/pipeline/utils/pipeline.ts","../../../../../../packages/vseed/src/pipeline/utils/replaceNullToUndefined.ts","../../../../../../packages/vseed/src/pipeline/utils/tree/traverse.ts","../../../../../../packages/vseed/src/pipeline/utils/valid/checkVSeed.ts","../../../../../../packages/vseed/src/theme/common/annotaion.ts","../../../../../../packages/vseed/src/theme/common/axes.ts","../../../../../../packages/vseed/src/theme/common/boxPlot.ts","../../../../../../packages/vseed/src/theme/common/brush.ts","../../../../../../packages/vseed/src/theme/common/color.ts","../../../../../../packages/vseed/src/theme/common/crosshair.ts","../../../../../../packages/vseed/src/theme/common/funnelTransform.ts","../../../../../../packages/vseed/src/theme/common/heatmapCell.ts","../../../../../../packages/vseed/src/theme/common/label.ts","../../../../../../packages/vseed/src/theme/common/legend.ts","../../../../../../packages/vseed/src/theme/common/regressionLine.ts","../../../../../../packages/vseed/src/theme/common/table.ts","../../../../../../packages/vseed/src/theme/common/tooltip.ts","../../../../../../packages/vseed/src/theme/dark/dark.ts","../../../../../../packages/vseed/src/theme/light/light.ts"],"sourcesContent":["import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedVSeed,\n  ChartType,\n  CustomThemeConfig,\n  Locale,\n  Spec,\n  SpecPipe,\n  SpecPipeline,\n  VSeed,\n  VSeedBuilder,\n} from 'src/types'\nimport { buildAdvanced } from './buildAdvanced'\nimport { buildSpec } from './buildSpec'\nimport { build } from './build'\nimport { intl } from 'src/i18n'\nimport { getColorIdMap, getColorItems } from './advanced'\n\nexport class Builder implements VSeedBuilder {\n  private _vseed: VSeed\n  private _advancedVSeed: AdvancedVSeed | null = null\n  private _spec: Spec | null = null\n  private _performance: Record<string, string | number> = {}\n\n  private _locale: Locale\n\n  constructor(vseed: VSeed) {\n    this._vseed = vseed\n    this._locale = vseed.locale || intl.getLocale()\n  }\n\n  get locale() {\n    return this._locale\n  }\n\n  /**\n   * @description 构建spec\n   * @returns spec\n   */\n  build = <T extends Spec>(): T => build(this) as T\n\n  /**\n   * @description 构建spec\n   * @param advanced 高级配置\n   * @returns spec\n   */\n  buildSpec = (advanced: AdvancedVSeed): Spec => buildSpec(this, advanced)\n\n  /**\n   * @description 构建spec\n   * @returns AdvancedVSeed | null\n   */\n  buildAdvanced = (): AdvancedVSeed | null => buildAdvanced(this)\n\n  /**\n   * @description 获取颜色项, 颜色项可以重复,\n   * @returns 颜色项\n   */\n  getColorItems = () => getColorItems(this)\n\n  /**\n   * @description 获取颜色id映射\n   * @returns 颜色id映射\n   */\n  getColorIdMap = () => getColorIdMap(this)\n\n  /**\n   * @description 获取vseed\n   * @returns vseed\n   */\n  get vseed() {\n    return this._vseed\n  }\n\n  /**\n   * @description 设置vseed\n   * @param value vseed\n   */\n  set vseed(value) {\n    this._vseed = value\n  }\n\n  /**\n   * @description 获取advancedVSeed\n   * @returns advancedVSeed\n   */\n  get advancedVSeed() {\n    return this._advancedVSeed\n  }\n\n  /**\n   *\n   * @description 设置advancedVSeed\n   * @param value advancedVSeed\n   */\n  set advancedVSeed(value) {\n    this._advancedVSeed = value\n  }\n\n  /**\n   * @description 获取spec\n   * @returns spec\n   */\n  get spec() {\n    return this._spec\n  }\n\n  /**\n   * @description 设置spec\n   * @param value spec\n   */\n  set spec(value) {\n    this._spec = value\n  }\n\n  /**\n   * @description 获取performance, 统计了构建spec和advancedVSeed的时间\n   * @returns performance\n   */\n  get performance() {\n    return this._performance\n  }\n\n  /**\n   * @description 设置performance\n   * @param value performance\n   */\n  set performance(value) {\n    this._performance = value\n  }\n\n  /**\n   * @description 获取advancedPipeline\n   * @param chartType 图表类型\n   * @returns advancedPipeline\n   */\n  static getAdvancedPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customAdvancedPipe[chartType] as AdvancedPipe\n    const pipeline = Builder._advancedPipelineMap[chartType] as AdvancedPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 获取specPipeline\n   * @param chartType 图表类型\n   * @returns specPipeline\n   */\n\n  static getSpecPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customSpecPipe[chartType] as SpecPipe\n    const pipeline = Builder._specPipelineMap[chartType] as SpecPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 根据主题key获取主题配置\n   * @param themeKey 主题key\n   * @example Builder.getTheme('light'), 获取浅色主题\n   * @returns 主题配置\n   */\n  static getTheme = (themeKey?: string) => Builder._themeMap[themeKey || 'light']\n\n  /**\n   * @description 获取主题配置映射表\n   * @example Builder.getThemeMap()\n   * @returns 主题配置映射表\n   */\n  static getThemeMap = () => Builder._themeMap\n\n  /**\n   * @description 从vseed创建builder\n   * @param vseed 完整的vseed DSL\n   * @returns builder\n   */\n  static from = (vseed: VSeed) => new Builder(vseed)\n\n  static _advancedPipelineMap: Partial<Record<ChartType, AdvancedPipeline>> = {}\n  static _specPipelineMap: Partial<Record<ChartType, SpecPipeline>> = {}\n  static _customAdvancedPipe: Partial<Record<ChartType, AdvancedPipe>> = {}\n  static _customSpecPipe: Partial<Record<ChartType, SpecPipe>> = {}\n  static _themeMap: Record<string, CustomThemeConfig> = {}\n}\n","import type { Spec } from 'src/types'\nimport type { Builder } from './builder'\n\nexport const build = (builder: Builder): Spec => {\n  const advancedVSeed = builder.buildAdvanced()\n  if (!advancedVSeed) {\n    throw new Error('advancedVSeed is null')\n  }\n  const spec = builder.buildSpec(advancedVSeed)\n  return spec\n}\n","import type { Spec, VChartSpecPipeline } from 'src/types'\nimport { Builder } from './builder'\nimport type { AdvancedVSeed, SpecPipelineContext } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { intl } from 'src/i18n'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const buildSpec = (builder: Builder, advancedVSeed: AdvancedVSeed): Spec => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n\n  const { chartType } = builder.vseed\n\n  const pipeline = Builder.getSpecPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no spec pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: SpecPipelineContext = {\n    vseed: builder.vseed,\n    advancedVSeed,\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const spec = execPipeline<ISpec, SpecPipelineContext>(pipeline as VChartSpecPipeline, context)\n    builder.spec = spec\n    return spec\n  } catch (e) {\n    throw new Error(`buildSpec error: ${(e as Error).message}`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildSpec'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import type { AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { Builder } from './builder'\nimport { intl } from 'src/i18n'\n\nexport const buildAdvanced = (builder: Builder): AdvancedVSeed | null => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n  const { chartType } = builder.vseed\n  if (!chartType) {\n    throw new Error('chartType is nil in buildAdvanced')\n  }\n\n  const pipeline = Builder.getAdvancedPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no advanced pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: AdvancedPipelineContext = {\n    vseed: builder.vseed,\n    customTheme: Builder.getThemeMap(),\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const advancedVSeed = execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context)\n    builder.advancedVSeed = advancedVSeed\n    return advancedVSeed\n  } catch (e) {\n    throw new Error(`buildAdvanced error: ${(e as Error).message}`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildAdvanced'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import { unique } from 'remeda'\nimport type { Builder } from '../builder'\nimport { isPivotTable, isTable } from 'src/pipeline'\n\nexport const getColorItems = (builder: Builder): { id: string; alias: string }[] => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return []\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorItems.map((d) => ({\n    id: d,\n    alias: colorIdMap[d]?.alias,\n  }))\n}\n\nexport const getColorIdMap = (builder: Builder): Record<string, { id: string; alias: string }> => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return {}\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorIdMap\n}\n","import {\n  registerArea,\n  registerAreaPercent,\n  registerBar,\n  registerBarParallel,\n  registerBarPercent,\n  registerColumn,\n  registerColumnParallel,\n  registerColumnPercent,\n  registerLine,\n  registerPie,\n  registerDonut,\n  registerRose,\n  registerRoseParallel,\n  registerFunnel,\n  registerScatter,\n  registerTable,\n  registerPivotTable,\n  registerHeatmap,\n  registerRadar,\n  registerDualAxis,\n  registerBoxPlot,\n  registerHistogram,\n} from './chartType'\nimport { registerDarkTheme, registerLightTheme } from './theme'\n\nexport const registerAll = () => {\n  // table\n  registerTable()\n  registerPivotTable()\n  // cartesian\n  registerLine()\n  registerColumn()\n  registerColumnParallel()\n  registerColumnPercent()\n  registerBar()\n  registerBarParallel()\n  registerBarPercent()\n  registerArea()\n  registerAreaPercent()\n  registerScatter()\n  registerDualAxis()\n  // polar\n  registerPie()\n  registerDonut()\n  registerRose()\n  registerRoseParallel()\n  registerRadar()\n  // other\n  registerFunnel()\n  registerHeatmap()\n  registerBoxPlot()\n  registerHistogram()\n  // theme\n  registerLightTheme()\n  registerDarkTheme()\n}\n","import { areaAdvancedPipeline, areaSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerArea = () => {\n  Builder._advancedPipelineMap['area'] = areaAdvancedPipeline\n  Builder._specPipelineMap['area'] = areaSpecPipeline\n}\n","import { areaPercentAdvancedPipeline, areaPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerAreaPercent = () => {\n  Builder._advancedPipelineMap['areaPercent'] = areaPercentAdvancedPipeline\n  Builder._specPipelineMap['areaPercent'] = areaPercentSpecPipeline\n}\n","import { barAdvancedPipeline, barSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBar = () => {\n  Builder._advancedPipelineMap['bar'] = barAdvancedPipeline\n  Builder._specPipelineMap['bar'] = barSpecPipeline\n}\n","import { barParallelAdvancedPipeline, barParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarParallel = () => {\n  Builder._advancedPipelineMap['barParallel'] = barParallelAdvancedPipeline\n  Builder._specPipelineMap['barParallel'] = barParallelSpecPipeline\n}\n","import { barPercentAdvancedPipeline, barPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarPercent = () => {\n  Builder._advancedPipelineMap['barPercent'] = barPercentAdvancedPipeline\n  Builder._specPipelineMap['barPercent'] = barPercentSpecPipeline\n}\n","import { boxplotAdvancedPipeline, boxplotSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBoxPlot = () => {\n  Builder._advancedPipelineMap['boxPlot'] = boxplotAdvancedPipeline\n  Builder._specPipelineMap['boxPlot'] = boxplotSpecPipeline\n}\n","import { columnAdvancedPipeline, columnSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumn = () => {\n  Builder._advancedPipelineMap['column'] = columnAdvancedPipeline\n  Builder._specPipelineMap['column'] = columnSpecPipeline\n}\n","import { columnParallelAdvancedPipeline, columnParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnParallel = () => {\n  Builder._advancedPipelineMap['columnParallel'] = columnParallelAdvancedPipeline\n  Builder._specPipelineMap['columnParallel'] = columnParallelSpecPipeline\n}\n","import { columnPercentAdvancedPipeline, columnPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnPercent = () => {\n  Builder._advancedPipelineMap['columnPercent'] = columnPercentAdvancedPipeline\n  Builder._specPipelineMap['columnPercent'] = columnPercentSpecPipeline\n}\n","import { donutAdvancedPipeline, donutSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDonut = () => {\n  Builder._advancedPipelineMap['donut'] = donutAdvancedPipeline\n  Builder._specPipelineMap['donut'] = donutSpecPipeline\n}\n","import { dualAxisAdvancedPipeline, dualAxisSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDualAxis = () => {\n  Builder._advancedPipelineMap['dualAxis'] = dualAxisAdvancedPipeline\n  Builder._specPipelineMap['dualAxis'] = dualAxisSpecPipeline\n}\n","import { funnelAdvancedPipeline, funnelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerFunnel = () => {\n  Builder._advancedPipelineMap['funnel'] = funnelAdvancedPipeline\n  Builder._specPipelineMap['funnel'] = funnelSpecPipeline\n}\n","import { heatmapAdvancedPipeline, heatmapSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHeatmap = () => {\n  Builder._advancedPipelineMap['heatmap'] = heatmapAdvancedPipeline\n  Builder._specPipelineMap['heatmap'] = heatmapSpecPipeline\n}\n","import { histogramSpecPipeline, histogramAdvancedPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHistogram = () => {\n  Builder._advancedPipelineMap['histogram'] = histogramAdvancedPipeline\n  Builder._specPipelineMap['histogram'] = histogramSpecPipeline\n}\n","import { lineAdvancedPipeline, lineSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerLine = () => {\n  Builder._advancedPipelineMap['line'] = lineAdvancedPipeline\n  Builder._specPipelineMap['line'] = lineSpecPipeline\n}\n","import { pieAdvancedPipeline, pieSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPie = () => {\n  Builder._advancedPipelineMap['pie'] = pieAdvancedPipeline\n  Builder._specPipelineMap['pie'] = pieSpecPipeline\n}\n","import { pivotTableAdvancedPipeline, pivotTableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPivotTable = () => {\n  Builder._advancedPipelineMap['pivotTable'] = pivotTableAdvancedPipeline\n  Builder._specPipelineMap['pivotTable'] = pivotTableSpecPipeline\n}\n","import { radarAdvancedPipeline, radarSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRadar = () => {\n  Builder._advancedPipelineMap['radar'] = radarAdvancedPipeline\n  Builder._specPipelineMap['radar'] = radarSpecPipeline\n}\n","import { roseAdvancedPipeline, roseSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRose = () => {\n  Builder._advancedPipelineMap['rose'] = roseAdvancedPipeline\n  Builder._specPipelineMap['rose'] = roseSpecPipeline\n}\n","import { roseParallelAdvancedPipeline, roseParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRoseParallel = () => {\n  Builder._advancedPipelineMap['roseParallel'] = roseParallelAdvancedPipeline\n  Builder._specPipelineMap['roseParallel'] = roseParallelSpecPipeline\n}\n","import { scatterAdvancedPipeline, scatterSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerScatter = () => {\n  Builder._advancedPipelineMap['scatter'] = scatterAdvancedPipeline\n  Builder._specPipelineMap['scatter'] = scatterSpecPipeline\n}\n","import { tableAdvancedPipeline, tableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerTable = () => {\n  Builder._advancedPipelineMap['table'] = tableAdvancedPipeline\n  Builder._specPipelineMap['table'] = tableSpecPipeline\n}\n","import type { CustomThemeConfig } from 'src/types'\nimport { Builder } from '../../builder'\nimport { darkTheme, lightTheme } from '../../../theme'\n\nexport const registerCustomTheme = (\n  key: string,\n  themeConfig:\n    | CustomThemeConfig\n    | ((props: { lightTheme: CustomThemeConfig; darkTheme: CustomThemeConfig }) => CustomThemeConfig),\n) => {\n  const customTheme =\n    typeof themeConfig === 'function' ? themeConfig({ lightTheme: lightTheme(), darkTheme: darkTheme() }) : themeConfig\n  Builder._themeMap[key] = customTheme\n}\n","import { darkTheme } from '../../../theme'\nimport { registerCustomTheme } from './custom'\n\nexport const registerDarkTheme = () => {\n  registerCustomTheme('dark', darkTheme())\n}\n","import { registerCustomTheme } from './custom'\nimport { lightTheme } from '../../../theme'\n\nexport const registerLightTheme = () => {\n  registerCustomTheme('light', lightTheme())\n}\n","// Reshape\nexport const ORIGINAL_DATA = '__OriginalData__'\nexport const Separator = '-'\n\n// Measures\nexport const FoldMeasureName = '__MeaName__'\nexport const FoldMeasureId = '__MeaId__'\nexport const FoldMeasureValue = '__MeaValue__'\nexport const MeasureId = FoldMeasureId\nexport const MeasureName = FoldMeasureName\n\n// Measures For DualAxis\nexport const FoldPrimaryMeasureValue = '__MeaPrimaryValue__'\nexport const FoldSecondaryMeasureValue = '__MeaSecondaryValue__'\nexport const DimAxisType = '__Dim_AxisType__'\n\n// Measures For Scatter\nexport const FoldXMeasureValue = '__MeaXValue__'\nexport const FoldYMeasureValue = '__MeaYValue__'\nexport const FoldXMeasureId = '__MeaXId__'\nexport const FoldYMeasureId = '__MeaYId__'\n// Encoding\nexport const XEncoding = '__Dim_X__'\nexport const YEncoding = '__Dim_Y__'\nexport const AngleEncoding = '__Dim_Angle__'\nexport const DetailEncoding = '__Dim_Detail__'\nexport const ColorEncoding = '__Dim_Color__'\nexport const ColorIdEncoding = '__Dim_ColorId__'\n\n// Measures For boxPlot\nexport const BoxPlotPivotIndicator = '__BoxPlot_Pivot_Indicator__'\nexport const Q1MeasureValue = '__Q1__'\nexport const Q3MeasureValue = '__Q3__'\nexport const LowerWhisker = '__Lower_Whisker__'\nexport const UpperWhisker = '__Upper_Whisker__'\nexport const OutliersMeasureId = '__Outliers__'\nexport const MedianMeasureId = '__Meadian__'\n\n// Measures For Histogram\nexport const BinStartMeasureId = '__BinStart__'\nexport const BinEndMeasureId = '__BinEnd__'\nexport const BinCountMeasureId = '__BinCount__'\nexport const BinPercentageMeasureId = '__BinPercentage__'\n","import type { Dataset, Dimension, Encoding, FoldInfo, Measure, Measures, UnfoldInfo } from 'src/types'\nimport { foldMeasures } from './foldMeasures'\nimport { FoldMeasureId, FoldMeasureName, FoldMeasureValue, Separator } from './constant'\nimport { unfoldDimensions } from './unfoldDimensions'\n\nexport const dataReshapeByEncoding = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  measures: Measure[],\n  encoding: Encoding,\n  options?: {\n    foldMeasureId?: string\n    foldMeasureName?: string\n    foldMeasureValue?: string\n    colorItemAsId?: boolean\n    colorMeasureId?: string\n    omitIds: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n  unfoldInfo: UnfoldInfo\n} => {\n  const {\n    foldMeasureId = FoldMeasureId,\n    foldMeasureName = FoldMeasureName,\n    foldMeasureValue = FoldMeasureValue,\n    colorItemAsId = false,\n    colorMeasureId,\n    omitIds,\n  } = options || {}\n\n  // 合并所有指标为1个指标\n  const { dataset: foldedDataset, foldInfo } = foldMeasures(dataset, measures as Measures, {\n    measureId: foldMeasureId,\n    measureName: foldMeasureName,\n    measureValue: foldMeasureValue,\n    colorMeasureId,\n    omitIds,\n  })\n\n  // 展开指定的维度为指标\n  const { dataset: finalDataset, unfoldInfo } = unfoldDimensions(foldedDataset, dimensions, encoding, {\n    foldMeasureId,\n    separator: Separator,\n    colorItemAsId,\n  })\n  return { dataset: finalDataset, foldInfo, unfoldInfo }\n}\n","import type { Dataset, FoldInfo, Measures } from 'src/types'\nimport { ColorEncoding, ColorIdEncoding, ORIGINAL_DATA } from './constant'\nimport { omit } from 'remeda'\n\n/**\n * 折叠指定的指标\n * @description 合并指定的指标为1个, 无论多少个, 都能转换为1个, 取名为fold, 意为折叠后混合在一起.\n */\nexport const foldMeasures = (\n  dataset: Dataset,\n  measures: Measures,\n  options: {\n    measureId: string\n    measureName: string\n    measureValue: string\n    colorMeasureId?: string\n    allowEmptyFold?: boolean\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n} => {\n  const { measureId, measureName, measureValue, colorMeasureId, allowEmptyFold = true, omitIds = [] } = options || {}\n\n  const foldInfo: FoldInfo = {\n    measureId,\n    measureName,\n    measureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n    foldMap: {},\n  }\n\n  if (!allowEmptyFold && measures.length === 0) {\n    return {\n      dataset,\n      foldInfo,\n    }\n  }\n\n  const result: Dataset = new Array(dataset.length * measures.length) as Dataset\n  let index = 0\n  // const ids = measures.map((d) => d.id)\n  for (let i = 0; i < dataset.length; i++) {\n    for (let j = 0; j < measures.length; j++) {\n      const datum: Record<string, any> = omit({ ...dataset[i] }, omitIds)\n\n      datum[ORIGINAL_DATA] = dataset[i]\n\n      const measure = measures[j]\n      const { id, alias } = measure\n\n      datum[id] = dataset[i][id] as unknown\n      datum[measureId] = id\n      datum[measureName] = alias || id\n      datum[measureValue] = dataset[i][id] as unknown\n\n      const valueNumber = Number(datum[id])\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n\n      if (measure.encoding === 'color') {\n        foldInfo.statistics.colorMin = foldInfo.statistics.min\n        foldInfo.statistics.colorMax = foldInfo.statistics.max\n        datum[ColorEncoding] = valueNumber\n        datum[ColorIdEncoding] = measure.id\n      } else if (colorMeasureId) {\n        const value = (datum[ORIGINAL_DATA] as Record<string, string | number>)[colorMeasureId]\n        datum[ColorEncoding] = value\n        datum[ColorIdEncoding] = colorMeasureId\n\n        const valueNumber = Number(value)\n        foldInfo.statistics.colorMin = Math.min(foldInfo.statistics.colorMin, valueNumber)\n        foldInfo.statistics.colorMax = Math.max(foldInfo.statistics.colorMax, valueNumber)\n      }\n\n      foldInfo.foldMap[id] = alias\n      result[index++] = datum\n    }\n  }\n\n  return {\n    dataset: result,\n    foldInfo,\n  }\n}\n","import type { Dataset, Datum, Dimension, Encoding, UnfoldInfo } from 'src/types'\nimport {\n  AngleEncoding,\n  XEncoding,\n  YEncoding,\n  ColorEncoding,\n  DetailEncoding,\n  ColorIdEncoding,\n  MeasureId,\n  MeasureName,\n} from './constant'\n\n/**\n * @description 展开并合并视觉通道的维度, 在foldMeasures后合并维度, 所以不需要进行笛卡尔积\n * @param dataset 原始数据集\n * @param dimensions 维度\n * @param encoding 编码\n * @param options\n * @returns\n */\nexport const unfoldDimensions = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  encoding: Encoding,\n  options: {\n    foldMeasureId: string\n    separator: string\n    colorItemAsId: boolean\n  },\n): {\n  dataset: Dataset\n  unfoldInfo: UnfoldInfo\n} => {\n  const { separator } = options\n\n  const unfoldInfo: UnfoldInfo = {\n    encodingAngle: AngleEncoding,\n    encodingX: XEncoding,\n    encodingY: YEncoding,\n    encodingDetail: DetailEncoding,\n    encodingColor: ColorEncoding,\n    encodingColorId: ColorIdEncoding,\n\n    colorItems: [],\n    colorIdMap: {},\n  }\n\n  // 每个通道对应的维度\n  const { color, x, y, detail, angle } = encoding\n  const angleDimensions = angle ? dimensions.filter((dim) => angle.includes(dim.id)) : []\n  const xDimensions = x ? dimensions.filter((dim) => x.includes(dim.id)) : []\n  const yDimensions = y ? dimensions.filter((dim) => y.includes(dim.id)) : []\n  const colorDimensions = color ? dimensions.filter((dim) => color.includes(dim.id)) : []\n  const detailDimensions = detail ? dimensions.filter((dim) => detail.includes(dim.id)) : []\n\n  // 离散图例项\n  const colorItems = new Set<string>()\n  const colorIdMap: Record<string, { id: string; alias: string }> = {}\n\n  // 遍历数据集, 按通道合并维度\n  for (let i = 0; i < dataset.length; i++) {\n    // 应用编码至Datum上\n    const datum = dataset[i]\n\n    /**\n     * !important 这是全仓库, 最最最重要的五行代码, 贯穿VSeed整个生命周期, 是化繁为简的绝对核心\n     * 1. 点睛之笔: 呼应foldMeasures, 此时此刻的datum一定是单点数据, 维度合并不可能造成任何冲突.\n     * 2. 数据即通道\n     * 3. 利用需要合并的维度, 直接进行join, 即可生成新的维度, 与指标彻底解耦;\n     * 4. 以下通道均在一次遍历中完成, 不存在性能问题\n     * 5. 以下通道均可放入多个维度\n     */\n    applyEncoding(AngleEncoding, angleDimensions, datum, separator)\n    applyEncoding(XEncoding, xDimensions, datum, separator)\n    applyEncoding(YEncoding, yDimensions, datum, separator)\n    applyEncoding(ColorEncoding, colorDimensions, datum, separator)\n    applyEncoding(DetailEncoding, detailDimensions, datum, separator)\n\n    // 处理离散的颜色图例\n    if (!colorDimensions.length || !datum[ColorEncoding]) {\n      // 无颜色通道, 则跳过\n      continue\n    }\n    const colorId = String(datum[ColorEncoding] ?? '')\n\n    datum[ColorIdEncoding] = colorId\n\n    colorIdMap[colorId] = {\n      id: colorId,\n      alias: getColorAliasItem(ColorEncoding, colorDimensions, datum, separator),\n    }\n    colorItems.add(colorId)\n  }\n\n  unfoldInfo.colorItems = Array.from(colorItems)\n  unfoldInfo.colorIdMap = colorIdMap\n\n  return {\n    dataset,\n    unfoldInfo,\n  }\n}\n\n/**\n * @description 应用编码至数据中, 此方法会原地修改数据\n * @param encoding 编码\n * @param dimensions 维度\n * @param datum 数据\n * @param separator 分隔符\n * @returns undefined\n */\nconst applyEncoding = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    datum[encoding] = dimensions.map((dim) => String(datum[dim.id])).join(separator)\n  }\n}\n\nconst getColorAliasItem = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    return dimensions\n      .map((dim) => {\n        if (dim.id === MeasureId) {\n          return String(datum[MeasureName])\n        }\n\n        return String(datum[dim.id])\n      })\n      .join(separator)\n  }\n  return ''\n}\n","import type { Datum } from 'src/types'\nimport type {\n  DimensionSelector,\n  MeasureSelector,\n  PartialDatumSelector,\n  Selector,\n  Selectors,\n  ValueSelector,\n} from '../types/dataSelector'\nimport { omit } from 'remeda'\n\n/**\n * 判断两个数字是否“近似相等”\n */\nfunction nearlyEqual(a: number, b: number, epsilon = 1e-8) {\n  // NaN 直接不相等\n  if (Number.isNaN(a) || Number.isNaN(b)) return false\n  // 引用同一个数 或 完全相等\n  if (a === b) return true\n  const diff = Math.abs(a - b)\n  return diff <= epsilon\n}\n\nexport const selector = (\n  vchartDatum: Datum,\n  selector: Selector | Selectors | undefined | null,\n  selectorMode: 'And' | 'Or' = 'And',\n) => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return true\n  }\n\n  // 过滤掉 vchart 相关字段\n  const vchartKeys = Object.keys(vchartDatum).filter((k) => k.toLocaleLowerCase().startsWith('__vchart'))\n  const datum = omit(vchartDatum, vchartKeys) as Datum\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n\n  return selectors[selectorMode === 'And' ? 'every' : 'some']((selector) => {\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      return selectByValue(selector, datum)\n    }\n\n    // 2. 指标选择器\n    else if (isMeasureSelector(selector)) {\n      return selectByMeasure(selector, datum)\n    }\n    // 3. 维度选择器\n    else if (isDimensionSelector(selector)) {\n      return selectByDmension(selector, datum)\n    }\n    // 4. 部分数据对象选择器\n    else if (isPartialDatumSelector(selector)) {\n      return selectByPartial(selector, datum)\n    }\n\n    return false\n  })\n}\n\nexport const selectorDatum = (datum: Datum, selector: Selector | Selectors | undefined | null): Datum[] => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return []\n  }\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n  let finalResult: Datum[] = []\n\n  for (const selector of selectors) {\n    const results: Datum[] = []\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      Object.entries(datum).forEach(([key, value]) => {\n        if (value === selector) {\n          results.push({ [key]: value } as Datum)\n        }\n      })\n    } else if (isMeasureSelector(selector) && selectByMeasure(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isDimensionSelector(selector) && selectByDmension(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isPartialDatumSelector(selector) && selectByPartial(selector, datum)) {\n      results.push(selector)\n    }\n\n    if (results.length) {\n      if (finalResult.length) {\n        finalResult = finalResult.flatMap((prev) => {\n          return results.map((r) => {\n            return {\n              ...prev,\n              ...r,\n            }\n          })\n        })\n      } else {\n        finalResult = results\n      }\n    } else {\n      finalResult = []\n      break\n    }\n  }\n\n  return finalResult\n}\n\nexport const isValueSelector = (selector: Selector): selector is ValueSelector => {\n  return typeof selector === 'string' || typeof selector === 'number'\n}\n\nexport const isPartialDatumSelector = (selector: Selector): selector is PartialDatumSelector => {\n  return typeof selector === 'object' && selector !== null\n}\n\nexport const isMeasureSelector = (selector: Selector): selector is MeasureSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.operator as string) ||\n      ['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.op as string))\n  )\n}\n\nexport const isDimensionSelector = (selector: Selector): selector is DimensionSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['in', 'not in'].includes(selector.operator as string) || ['in', 'not in'].includes(selector.op as string))\n  )\n}\n\nexport const selectByMeasure = (selector: MeasureSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n\n  switch (op) {\n    case '=':\n      if (\n        String(datum[selector.field]) === String(selectorValueArr[0]) ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '==':\n      if (datum[selector.field] === selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '!=':\n      if (datum[selector.field] !== selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '>':\n      if (\n        datum[selector.field] > selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<':\n      if (\n        datum[selector.field] < selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '>=':\n      if (\n        datum[selector.field] >= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<=':\n      if (\n        datum[selector.field] <= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case 'between':\n      if (\n        Array.isArray(selector.value) &&\n        (datum[selector.field] >= selectorValueArr[0] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))) &&\n        (datum[selector.field] <= selectorValueArr[1] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[1])))\n      ) {\n        return true\n      }\n      break\n  }\n  return false\n}\n\nexport const selectByDmension = (selector: DimensionSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n  switch (op) {\n    case 'in':\n      if (selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n    case 'not in':\n      if (!selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n  }\n\n  return false\n}\n\nexport const selectByPartial = (selector: PartialDatumSelector, datum: Datum) => {\n  return Object.keys(selector).every((key) => datum[key] === selector[key])\n}\n\nexport const selectByValue = (selector: ValueSelector, datum: Datum) => {\n  return Object.values(datum).some((v) => v === selector)\n}\n","import type { TranslateRecordType } from '../types'\n\nexport const translateMap: TranslateRecordType = {\n  指标名称: {\n    'en-US': 'MeasureName',\n    'zh-CN': '指标名称',\n  },\n  指标Id: {\n    'en-US': 'MeasureId',\n    'zh-CN': '指标Id',\n  },\n  指标值: {\n    'en-US': 'MeasureValue',\n    'zh-CN': '指标值',\n  },\n  异常点: {\n    'en-US': 'Outlier',\n    'zh-CN': '异常点',\n  },\n  上边界: {\n    'en-US': 'Upper Whisker',\n    'zh-CN': '上边界',\n  },\n  上四分位数: {\n    'en-US': 'Q3',\n    'zh-CN': '75分位数',\n  },\n  中位数: {\n    'en-US': 'Q2',\n    'zh-CN': '中位数',\n  },\n  下四分位数: {\n    'en-US': 'Q1',\n    'zh-CN': '25分位数',\n  },\n  下边界: {\n    'en-US': 'Lower Whisker',\n    'zh-CN': '下边界',\n  },\n}\n","import { isNullish } from 'remeda'\nimport { translateMap } from './i18nData'\nimport type { Locale, TranslateRecordType } from '../types'\n\nclass Intl {\n  private static instance: Intl\n\n  private translateMap: TranslateRecordType = translateMap\n  private locale: Locale = 'zh-CN'\n\n  canTranslate = (value: string) => !!this.translateMap[value]\n\n  /**\n   * @example i18n`指标名称`\n   */\n  i18n = (segments: TemplateStringsArray, ...values: Array<number | string>) => {\n    const text = segments.map((segment, index) => segment + (values[index] || '')).join('')\n    const translatedText = this.translateMap?.[text]?.[this.locale]\n    if (isNullish(translatedText)) {\n      return text\n    }\n    return translatedText\n  }\n\n  setLocale = (locale: Locale): void => {\n    this.locale = locale\n  }\n\n  getLocale: () => Locale = () => this.locale\n\n  public static getInstance() {\n    if (!Intl.instance) {\n      Intl.instance = new Intl()\n    }\n\n    return Intl.instance\n  }\n}\n\nconst intl = Intl.getInstance()\n\nexport { intl }\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  encodingForLine,\n  defaultMeasures,\n  defaultMeasureId,\n  defaultDimensions,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const areaAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForLine],\n    [buildMeasures(['yAxis', 'detail']), encodingForLine, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaPercentConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  encodingForLine,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const areaPercentAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForLine],\n    [buildMeasures(['yAxis', 'detail']), encodingForLine, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  buildMeasures,\n  pivotAdapter,\n  barConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const barAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['xAxis', 'detail']), defaultEncodingForBar],\n    [buildMeasures(['xAxis', 'detail']), encodingForBar, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barParallelConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const barParallelAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['xAxis', 'detail']), defaultEncodingForBar],\n    [buildMeasures(['xAxis', 'detail']), encodingForBar, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barPercentConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const barPercentAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['xAxis', 'detail']), defaultEncodingForBar],\n    [buildMeasures(['xAxis', 'detail']), encodingForBar, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  if ((!encoding.value || encoding.value.length <= 1) && encoding.color && encoding.color.length > 1) {\n    encoding.color = encoding.color.filter((c) => c !== MeasureId)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.q1 = unique(measures.filter((item) => item.encoding === 'q1').map((item) => item.id))\n  encoding.median = unique(measures.filter((item) => item.encoding === 'median').map((item) => item.id))\n  encoding.q3 = unique(measures.filter((item) => item.encoding === 'q3').map((item) => item.id))\n  encoding.min = unique(measures.filter((item) => item.encoding === 'min').map((item) => item.id))\n  encoding.max = unique(measures.filter((item) => item.encoding === 'max').map((item) => item.id))\n  encoding.outliers = unique(measures.filter((item) => item.encoding === 'outliers').map((item) => item.id))\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithBoxplotEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  pickDimensionsForReshape,\n  defaultEncodingForBoxplot,\n  encodingForBoxplot,\n  reshapeWithBoxplotEncoding,\n  boxplotConfig,\n  page,\n} from '../pipes'\n\nexport const boxplotAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  boxplotConfig,\n\n  encodingAdapter(\n    [buildMeasures(['value', 'q1', 'q3', 'min', 'max', 'median', 'outliers']), defaultEncodingForBoxplot],\n    [\n      buildMeasures(['value', 'q1', 'q3', 'min', 'max', 'median', 'outliers']),\n      encodingForBoxplot,\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithBoxplotEncoding], [pivotReshapeWithBoxplotEncoding]),\n\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const boxplotConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'whiskers',\n    'boxMaxWidth',\n    'boxGapInGroup',\n\n    'dimensionLinkage',\n  ]) as Config['boxPlot']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport type { AdvancedPipe, ColumnParallel, Dataset, Datum, Dimension, Encoding } from 'src/types'\nimport { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\n\nexport const reshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config, measures = [] } = advancedVSeed\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n\n  const whiskers = config?.[chartType as 'boxPlot']?.whiskers\n\n  let newDatasets: any[] = []\n  let foldInfo: any = {}\n  let unfoldInfo: any = {}\n\n  if (encoding.value?.length) {\n    const boxPlotDataList: Dataset = []\n    encoding.value.forEach((f) => {\n      const m = measures.find((m) => m.id === f)\n      const boxPlotData = boxplot(dataset, {\n        field: f,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        whiskers,\n        outputNames: {\n          q1: Q1MeasureValue,\n          q3: Q3MeasureValue,\n          lowerWhisker: LowerWhisker,\n          upperWhisker: UpperWhisker,\n          median: MedianMeasureId,\n          outliers: OutliersMeasureId,\n        },\n      }) as Dataset\n\n      boxPlotData.forEach((datum: Datum) => {\n        datum[FoldMeasureId] = f\n        datum[FoldMeasureName] = m?.alias ?? f\n      })\n      boxPlotDataList.push(...boxPlotData)\n    })\n    const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d: Datum) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (\n    encoding.q1?.length &&\n    encoding.q3?.length &&\n    encoding.min?.length &&\n    encoding.max?.length &&\n    encoding.median?.length\n  ) {\n    const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((datum: Datum) => {\n      datum[UpperWhisker] = datum[encoding.max![0]]\n      datum[LowerWhisker] = datum[encoding.min![0]]\n      datum[Q1MeasureValue] = datum[encoding.q1![0]]\n      datum[Q3MeasureValue] = datum[encoding.q3![0]]\n      datum[MedianMeasureId] = datum[encoding.median![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = {}\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n  }\n}\n","import { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport { DEFAULT_PARENT_ID, revisedBoxPlotFieldKey } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Datum,\n  Dimension,\n  Encoding,\n  Measure,\n} from 'src/types'\n\nexport const pivotReshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'boxPlot']\n  const whiskers = chartConfig?.whiskers\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((measureGroup: Measure[], index: number) => {\n    const groupId = measureGroup[0].parentId ?? DEFAULT_PARENT_ID\n    let newDatasets: any[] = []\n    let foldInfo: any = {}\n    let unfoldInfo: any = {}\n    const validEncodingIds = (encoding.value || []).filter((id: string) =>\n      measureGroup.find((field) => field.id === id),\n    )\n\n    if (validEncodingIds.length) {\n      const boxPlotDataList: Dataset = []\n      validEncodingIds.forEach((f: string) => {\n        const m = measureGroup.find((m) => m.id === f)\n        const boxPlotData = boxplot(dataset, {\n          field: f,\n          groupField: [\n            ...(encoding.x ?? []),\n            ...(encoding.color ?? []),\n            ...rowColumnFields.map((item: Dimension) => item.id),\n          ] as string[],\n          whiskers,\n          outputNames: {\n            q1: Q1MeasureValue,\n            q3: Q3MeasureValue,\n            lowerWhisker: LowerWhisker,\n            upperWhisker: UpperWhisker,\n            median: MedianMeasureId,\n            outliers: OutliersMeasureId,\n          },\n        }) as Dataset\n\n        boxPlotData.forEach((datum: Datum) => {\n          datum[FoldMeasureId] = f\n          datum[FoldMeasureName] = m?.alias ?? f\n          datum[revisedBoxPlotFieldKey(Q1MeasureValue, groupId)] = datum[Q1MeasureValue]\n          datum[revisedBoxPlotFieldKey(Q3MeasureValue, groupId)] = datum[Q3MeasureValue]\n          datum[revisedBoxPlotFieldKey(LowerWhisker, groupId)] = datum[LowerWhisker]\n          datum[revisedBoxPlotFieldKey(UpperWhisker, groupId)] = datum[UpperWhisker]\n          datum[revisedBoxPlotFieldKey(MedianMeasureId, groupId)] = datum[MedianMeasureId]\n          datum[revisedBoxPlotFieldKey(OutliersMeasureId, groupId)] = datum[OutliersMeasureId]\n        })\n\n        boxPlotDataList.push(...boxPlotData)\n      })\n      const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d: Datum) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (\n      encoding.q1?.length &&\n      encoding.q3?.length &&\n      encoding.min?.length &&\n      encoding.max?.length &&\n      encoding.median?.length\n    ) {\n      const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((datum: Datum) => {\n        datum[UpperWhisker] = datum[encoding.max![0]]\n        datum[revisedBoxPlotFieldKey(Q1MeasureValue, groupId)] = datum[encoding.max![0]]\n        datum[LowerWhisker] = datum[encoding.min![0]]\n        datum[revisedBoxPlotFieldKey(LowerWhisker, groupId)] = datum[encoding.min![0]]\n        datum[Q1MeasureValue] = datum[encoding.q1![0]]\n        datum[revisedBoxPlotFieldKey(Q1MeasureValue, groupId)] = datum[encoding.q1![0]]\n        datum[Q3MeasureValue] = datum[encoding.q3![0]]\n        datum[revisedBoxPlotFieldKey(Q3MeasureValue, groupId)] = datum[encoding.q3![0]]\n        datum[MedianMeasureId] = datum[encoding.median![0]]\n        datum[revisedBoxPlotFieldKey(MedianMeasureId, groupId)] = datum[encoding.median![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = {}\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickDimensionsForReshape,\n  regressionLine,\n  page,\n} from '../pipes'\n\nexport const columnAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForColumn],\n    [buildMeasures(['yAxis', 'detail']), encodingForColumn, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  columnParallelConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const columnParallelAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForColumn],\n    [buildMeasures(['yAxis', 'detail']), encodingForColumn, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnPercentConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const columnPercentAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForColumn],\n    [buildMeasures(['yAxis', 'detail']), encodingForColumn, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  donutConfig,\n  encodingForPie,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const donutAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['angle', 'detail']), defaultEncodingForPie],\n    [buildMeasures(['angle', 'detail']), encodingForPie, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  donutConfig,\n  theme,\n  annotation,\n]\n","import type { AdvancedPipe, DualAxisMeasure, MeasureEncoding, Measures } from 'src/types'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport { ensureParentIdInitialized, isCommonMeasureEncoding } from './utils'\nimport { DEFAULT_DUAL_CHART_TYPE, isDualAxisChartType } from 'src/pipeline/utils/chatType'\n\nexport const buildMeasuresForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [] } = advancedVSeed\n  const measuresByView = {} as { [key: string]: Measures }\n  const parentIds: string[] = []\n\n  for (let index = 0; index < measures.length; index++) {\n    const item = measures[index]\n    const encoding = item.encoding\n    const parentId = item.parentId || DEFAULT_PARENT_ID\n    const isPrimaryYAxis = encoding === 'primaryYAxis'\n    const isSecondaryYAxis = encoding === 'secondaryYAxis'\n    const isOtherEncoding = item.encoding && isCommonMeasureEncoding(encoding as MeasureEncoding)\n\n    ensureParentIdInitialized(parentId, measuresByView, parentIds)\n\n    if (isPrimaryYAxis) {\n      measuresByView[parentId].push(item)\n\n      if (!isDualAxisChartType((item as DualAxisMeasure).chartType)) {\n        ;(item as any).chartType = DEFAULT_DUAL_CHART_TYPE.primary\n      }\n    } else if (isSecondaryYAxis) {\n      measuresByView[parentId].push(item)\n\n      if (!isDualAxisChartType((item as DualAxisMeasure).chartType)) {\n        ;(item as any).chartType = DEFAULT_DUAL_CHART_TYPE.secondary\n      }\n    } else if (!isOtherEncoding) {\n      const primaryCount = measuresByView[parentId].filter((m) => m.encoding === 'primaryYAxis').length\n      item.encoding = primaryCount === 0 ? 'primaryYAxis' : 'secondaryYAxis'\n\n      if (!isDualAxisChartType((item as DualAxisMeasure).chartType)) {\n        ;(item as any).chartType =\n          item.encoding === 'primaryYAxis' ? DEFAULT_DUAL_CHART_TYPE.primary : DEFAULT_DUAL_CHART_TYPE.secondary\n      }\n\n      measuresByView[parentId].push(item)\n    }\n  }\n\n  advancedVSeed.reshapeMeasures = parentIds.map((pid) => measuresByView[pid]).filter((m) => m.length > 0)\n\n  return advancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  encodingForDualAxis,\n  reshapeWithDualEncoding,\n  pivotReshapeWithDualEncoding,\n  buildMeasuresForDualAxis,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForDualAxis,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const dualAxisAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasuresForDualAxis, defaultEncodingForDualAxis],\n    [buildMeasuresForDualAxis, encodingForDualAxis, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithDualEncoding], [pivotReshapeWithDualEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { uniqueBy, unique } from 'remeda'\nimport { dataReshapeByEncoding, DimAxisType, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { DEFAULT_DUAL_CHART_TYPE } from 'src/pipeline/utils/chatType'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Datum,\n  Dimension,\n  DualAxisMeasure,\n  Encoding,\n  FoldInfo,\n  Measure,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = (advancedVSeed.reshapeMeasures?.[0] ?? []) as Measure[]\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const allMeasuresIds = measures.map((m: Measure) => m.id)\n\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n\n  const datasets: Dataset[] = []\n  const primaryMeasures = measures.filter((m) => m.encoding === 'primaryYAxis')\n  const secondaryMeasures = measures.filter((m) => m.encoding === 'secondaryYAxis')\n  const primaryChartTypes: string[] = unique(primaryMeasures.map((m) => (m as DualAxisMeasure).chartType!))\n  const secondaryChartTypes: string[] = unique(secondaryMeasures.map((m) => (m as DualAxisMeasure).chartType!))\n\n  if (!primaryChartTypes.length) {\n    primaryChartTypes.push(DEFAULT_DUAL_CHART_TYPE.primary)\n  }\n\n  if (!secondaryChartTypes.length) {\n    secondaryChartTypes.push(DEFAULT_DUAL_CHART_TYPE.secondary)\n  }\n\n  primaryChartTypes.forEach((chartType) => {\n    const primaryResult = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      uniqueBy(\n        primaryMeasures.filter((m) => (m as DualAxisMeasure).chartType! === chartType),\n        (item: Measure) => item.id,\n      ),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldPrimaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasuresIds,\n      },\n    )\n\n    primaryResult.dataset.forEach((row: Datum) => {\n      row[DimAxisType] = 'primaryYAxis'\n    })\n\n    datasets.push(primaryResult.dataset)\n    foldInfoList.push(primaryResult.foldInfo)\n    unfoldInfoList.push(primaryResult.unfoldInfo)\n  })\n\n  secondaryChartTypes.forEach((chartType) => {\n    const secondaryResult = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      uniqueBy(\n        secondaryMeasures.filter((m) => (m as DualAxisMeasure).chartType! === chartType),\n        (item: Measure) => item.id,\n      ),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldSecondaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasuresIds,\n      },\n    )\n\n    secondaryResult.dataset.forEach((row: Datum) => {\n      row[DimAxisType] = 'secondaryYAxis'\n    })\n\n    datasets.push(secondaryResult.dataset)\n    foldInfoList.push(secondaryResult.foldInfo)\n    unfoldInfoList.push(secondaryResult.unfoldInfo)\n  })\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { uniqueBy, unique } from 'remeda'\nimport { dataReshapeByEncoding, DimAxisType, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { DEFAULT_DUAL_CHART_TYPE } from 'src/index'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Datum,\n  Dimension,\n  DualAxisMeasure,\n  Encoding,\n  FoldInfo,\n  Measure,\n  Measures,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const allMeasuresIds = reshapeMeasures.flatMap((measureGroup: Measures) => measureGroup.map((m) => m.id))\n\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((measures: Measures, index: number) => {\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const primaryMeasures = measures.filter((m) => m.encoding === 'primaryYAxis')\n    const secondaryMeasures = measures.filter((m) => m.encoding === 'secondaryYAxis')\n    const primaryChartTypes: string[] = unique(primaryMeasures.map((m) => (m as DualAxisMeasure).chartType!))\n    const secondaryChartTypes: string[] = unique(secondaryMeasures.map((m) => (m as DualAxisMeasure).chartType!))\n\n    if (!primaryChartTypes.length) {\n      primaryChartTypes.push(DEFAULT_DUAL_CHART_TYPE.primary)\n    }\n\n    if (!secondaryChartTypes.length) {\n      secondaryChartTypes.push(DEFAULT_DUAL_CHART_TYPE.secondary)\n    }\n\n    primaryChartTypes.forEach((chartType) => {\n      const primaryResult = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item: Dimension) => item.id),\n        uniqueBy(\n          primaryMeasures.filter((m) => (m as DualAxisMeasure).chartType! === chartType),\n          (item: Measure) => item.id,\n        ),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldPrimaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasuresIds,\n        },\n      )\n\n      primaryResult.dataset.forEach((row: Datum) => {\n        row[DimAxisType] = 'primaryYAxis'\n      })\n\n      datasets.push(primaryResult.dataset)\n      foldInfoList.push(primaryResult.foldInfo)\n      unfoldInfoList.push(primaryResult.unfoldInfo)\n    })\n\n    secondaryChartTypes.forEach((chartType) => {\n      const secondaryResult = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item: Dimension) => item.id),\n        uniqueBy(\n          secondaryMeasures.filter((m) => (m as DualAxisMeasure).chartType! === chartType),\n          (item: Measure) => item.id,\n        ),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldSecondaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasuresIds,\n        },\n      )\n\n      secondaryResult.dataset.forEach((row: Datum) => {\n        row[DimAxisType] = 'secondaryYAxis'\n      })\n\n      datasets.push(secondaryResult.dataset)\n      foldInfoList.push(secondaryResult.foldInfo)\n      unfoldInfoList.push(secondaryResult.unfoldInfo)\n    })\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(datasets.flat(2))\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const dualAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    // common\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n\n    // only for dualAxis\n    'alignTicks',\n    'primaryYAxis',\n    'secondaryYAxis',\n    'crosshairLine',\n    'crosshairRect',\n\n    'barGapInGroup',\n    'barMaxWidth',\n    'stackCornerRadius',\n\n    'dimensionLinkage',\n  ]) as Config['dualAxis']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.color =\n    !isMultiMeasure && uniqueDimIds.some((id) => id !== MeasureId)\n      ? uniqueDimIds.filter((id) => id !== MeasureId)\n      : uniqueDimIds.slice(0)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  funnelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForFunnel,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForFunnel,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const funnelAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['size', 'detail']), defaultEncodingForFunnel],\n    [buildMeasures(['size', 'detail']), encodingForFunnel, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  funnelConfig,\n  theme,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.y = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第2个维度放置于Y轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  // x\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    if (dimensions.length > 1) {\n      encoding.y = dimensions.slice(1).map((item) => item.id)\n    } else {\n      encoding.y = dimensions.slice(0).map((item) => item.id)\n    }\n  }\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  const colorDims = unique(\n    measures.filter((item) => item.encoding === 'color' || !item.encoding).map((item) => item.id),\n  )\n  if (colorDims.length > 0) {\n    encoding.color = colorDims\n  }\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  heatmapConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForHeatmap,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForHeatmap,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const heatmapAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['color', 'detail']), defaultEncodingForHeatmap],\n    [buildMeasures(['color', 'detail']), encodingForHeatmap, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  heatmapConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const heatmapConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'brush',\n    'dimensionLinkage',\n  ]) as Config['heatmap']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, false)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d: string) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail?.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip?.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label?.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  histogramConfig,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithHistogramEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  encodingAdapter,\n  pickDimensionsForReshape,\n  defaultEncodingForHistogram,\n  encodingForHistogram,\n  reshapeWithHistogramEncoding,\n  regressionLine,\n  page,\n} from '../pipes'\nimport { histogramXAxisConfig } from '../pipes/config/histogram'\n\nexport const histogramAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  histogramConfig,\n\n  encodingAdapter(\n    [buildMeasures(['value', 'x0', 'x1', 'yAxis', 'detail']), defaultEncodingForHistogram],\n    [buildMeasures(['value', 'x0', 'x1', 'yAxis', 'detail']), encodingForHistogram, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithHistogramEncoding], [pivotReshapeWithHistogramEncoding]),\n\n  histogramXAxisConfig,\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import { merge } from '@visactor/vutils'\nimport { pick } from 'remeda'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config, Dimension } from 'src/types'\n\nexport const histogramConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const hasColorEncoding = (advancedVSeed?.dimensions || []).find((field: Dimension) => field?.encoding === 'color')\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'binCount',\n    'binStep',\n    'binValueType',\n    'brush',\n    'dimensionLinkage',\n  ]) as Config['histogram']\n\n  let config = replaceNullToUndefined(pickedConfig)\n\n  if (pickedConfig?.binValueType === 'percentage') {\n    config = merge(\n      {},\n      {\n        yAxis: {\n          autoFomat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n        label: {\n          autoFormat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n      },\n      config,\n    )\n  }\n  if (!hasColorEncoding && !config?.legend?.enable) {\n    config = {\n      ...config,\n      legend: {\n        ...config?.legend,\n        enable: false,\n      },\n    }\n  }\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n\nexport const histogramXAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const { dataset = [] } = advancedVSeed\n  const flattenDatasert = dataset.flat()\n  const minValue = Math.min(...flattenDatasert.map((v) => +v[BinStartMeasureId]))\n  const maxValue = Math.max(...flattenDatasert.map((v) => +v[BinEndMeasureId]))\n\n  const chartConfig = result.config?.[chartType] as any\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...chartConfig,\n      xAxis: {\n        min: Number.isNaN(minValue) ? undefined : minValue,\n        max: Number.isNaN(maxValue) ? undefined : maxValue,\n        ...(chartConfig?.xAxis || {}),\n      },\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Datum,\n  Dimension,\n  Encoding,\n  FoldInfo,\n  Measure,\n} from 'src/types'\nimport { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes/color/colorAdapter'\n\nexport const reshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config, measures = [] } = advancedVSeed\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  let newDatasets: any[] = []\n  let foldInfo: FoldInfo = {\n    foldMap: {},\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n  }\n  let unfoldInfo: any = {}\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n\n  if (encoding.value?.length) {\n    const valueField = encoding.value[0]\n    const m = measures.find((m: Measure) => m.id === valueField)\n    const binData = bin(dataset, {\n      field: valueField,\n      groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n      bins: binCount,\n      step: binStep,\n      outputNames: {\n        x0: BinStartMeasureId,\n        x1: BinEndMeasureId,\n        count: BinCountMeasureId,\n        percentage: BinPercentageMeasureId,\n      },\n    }) as Dataset\n\n    binData.forEach((datum: Datum) => {\n      datum[FoldMeasureId] = valueField\n      datum[FoldMeasureName] = m?.alias ?? valueField\n      const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n      datum[FoldMeasureValue] = valueNumber\n      datum[valueField] = valueNumber\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n    })\n    if (m?.id) {\n      foldInfo.foldMap[m?.id] = m?.alias\n    }\n\n    const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d: Datum) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n    const res = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      measures.filter((item: Measure) => encoding.y?.includes(item.id)).slice(0, 1),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        colorMeasureId,\n        omitIds: [],\n      },\n    )\n\n    res.dataset.forEach((datum: Datum) => {\n      datum[BinStartMeasureId] = datum[encoding.x0![0]]\n      datum[BinEndMeasureId] = datum[encoding.x1![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = res.foldInfo\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n  }\n}\n","import { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Datum,\n  Dimension,\n  Encoding,\n  FoldInfo,\n  Measure,\n} from 'src/types'\n\nexport const pivotReshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((subMeasures: Measure[], index: number) => {\n    if (!subMeasures) {\n      return\n    }\n    const groupId = subMeasures[0].id ?? DEFAULT_PARENT_ID\n\n    let newDatasets: any[] = []\n    let foldInfo: FoldInfo = {\n      foldMap: {},\n      measureId: FoldMeasureId,\n      measureName: FoldMeasureName,\n      measureValue: FoldMeasureValue,\n      statistics: {\n        max: -Infinity,\n        min: Infinity,\n        sum: 0,\n        count: 0,\n        colorMin: Infinity,\n        colorMax: -Infinity,\n      },\n    }\n    let unfoldInfo: any = {}\n\n    if (encoding.value?.length) {\n      const valueField = encoding.value[0]\n      const m = subMeasures.find((m: Measure) => m.id === valueField)\n      const binData = bin(dataset, {\n        field: valueField,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        facetField: rowColumnFields.map((item: Dimension) => item.id),\n        bins: binCount,\n        step: binStep,\n        outputNames: {\n          x0: BinStartMeasureId,\n          x1: BinEndMeasureId,\n          count: BinCountMeasureId,\n          percentage: BinPercentageMeasureId,\n        },\n      }) as Dataset\n\n      binData.forEach((datum: Datum) => {\n        datum[FoldMeasureId] = valueField\n        datum[FoldMeasureName] = m?.alias ?? valueField\n        const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n        datum[FoldMeasureValue] = valueNumber\n        datum[valueField] = valueNumber\n\n        foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n        foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n        foldInfo.statistics.sum += valueNumber\n        foldInfo.statistics.count++\n      })\n      if (m?.id) {\n        foldInfo.foldMap[m?.id] = m?.alias\n      }\n\n      const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d: Datum) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n      const res = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item: Dimension) => item.id),\n        subMeasures.filter((item: Measure) => encoding.y?.includes(item.id)).slice(0, 1),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          colorMeasureId,\n          omitIds: [],\n        },\n      )\n\n      res.dataset.forEach((datum: Datum) => {\n        datum[BinStartMeasureId] = datum[encoding.x0![0]]\n        datum[BinEndMeasureId] = datum[encoding.x1![0]]\n        datum[FoldMeasureId] = datum[encoding.y![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = res.foldInfo\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  lineConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForLine,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const lineAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForLine],\n    [buildMeasures(['yAxis', 'detail']), encodingForLine, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  lineConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  pieConfig,\n  annotation,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForPie,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const pieAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['angle', 'detail']), defaultEncodingForPie],\n    [buildMeasures(['angle', 'detail']), encodingForPie, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  pieConfig,\n  theme,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1)\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.detail = [] // 雷达图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = []\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // radius\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortLegend,\n  radarConfig,\n  encodingForRadar,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForRadar,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const radarAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['radius', 'detail']), defaultEncodingForRadar],\n    [buildMeasures(['radius', 'detail']), encodingForRadar, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  // sortXBandAxis,\n  sortLegend,\n  radarConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const roseAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['angle', 'detail']), defaultEncodingForRose],\n    [buildMeasures(['angle', 'detail']), encodingForRose, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseParallelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickDimensionsForReshape,\n  page,\n} from '../pipes'\n\nexport const roseParallelAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['radius', 'detail']), defaultEncodingForRose],\n    [buildMeasures(['radius', 'detail']), encodingForRose, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipe, MeasureEncoding, ScatterMeasure } from 'src/types'\nimport { clone } from 'remeda'\nimport { isCommonMeasureEncoding } from './utils'\n\nexport const buildMeasuresForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [] } = advancedVSeed\n  const encodedMeasures: ScatterMeasure[] = []\n\n  for (let index = 0; index < measures.length; index++) {\n    const item = measures[index]\n    const encoding = item.encoding\n    const isYAxis = encoding === 'yAxis'\n    const isXAxis = encoding === 'xAxis'\n    const isOtherEncoding = item.encoding && isCommonMeasureEncoding(encoding as MeasureEncoding)\n\n    if (isYAxis) {\n      encodedMeasures.push(item as ScatterMeasure)\n    } else if (isXAxis) {\n      encodedMeasures.push(item as ScatterMeasure)\n    } else if (!isOtherEncoding && encoding !== 'size') {\n      const xCount = encodedMeasures.filter((m) => m.encoding === 'xAxis').length\n      item.encoding = xCount === 0 ? 'xAxis' : 'yAxis'\n      encodedMeasures.push(item as ScatterMeasure)\n    }\n  }\n\n  const xCount = encodedMeasures.filter((m) => m.encoding === 'xAxis').length\n  const yCount = encodedMeasures.filter((m) => m.encoding === 'yAxis').length\n\n  if (yCount === 0 && xCount > 0) {\n    const cloneMeasure = clone(encodedMeasures[0])\n    cloneMeasure.encoding = 'yAxis'\n    encodedMeasures.push(cloneMeasure)\n  }\n\n  advancedVSeed.reshapeMeasures = encodedMeasures.length > 0 ? [encodedMeasures] : []\n\n  return advancedVSeed\n}\n","import { FoldXMeasureId, FoldYMeasureId } from 'src/dataReshape/constant'\nimport type { AdvancedPipe, Dimensions, Measure } from 'src/types'\n\nexport const addPivotDimensionsForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { reshapeMeasures = [] } = advancedVSeed\n\n  if (reshapeMeasures[0]?.length >= 2) {\n    const dimensions = (advancedVSeed.dimensions ?? []) as Dimensions\n    const xMeasures = reshapeMeasures[0].filter((m: Measure) => m.encoding === 'xAxis')\n    const yMeasures = reshapeMeasures[0].filter((m: Measure) => m.encoding === 'yAxis')\n\n    if (xMeasures.length > 1 || yMeasures.length > 1) {\n      dimensions.push({\n        id: FoldXMeasureId,\n        alias: ' ',\n        encoding: 'column',\n      })\n      dimensions.push({\n        id: FoldYMeasureId,\n        alias: ' ',\n        encoding: 'row',\n      })\n    }\n\n    return {\n      ...advancedVSeed,\n      dimensions,\n    }\n  }\n\n  return advancedVSeed\n}\n","import { unique } from 'remeda'\nimport { FoldXMeasureId, FoldYMeasureId, MeasureId } from 'src/dataReshape'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const defaultEncodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n\n  // exist encoding condition\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d: string) => ![MeasureId, FoldYMeasureId, FoldXMeasureId].includes(d)) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  // color\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail!.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip!.filter((d) => ![MeasureId, FoldYMeasureId, FoldXMeasureId].includes(d))\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label!.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size').map((item) => item.id))\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color, ...encoding.size!])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  scatterConfig,\n  encodingForScatter,\n  buildMeasuresForScatter,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForScatter,\n  pickDimensionsForReshape,\n  regressionLine,\n  addPivotDimensionsForScatter,\n  page,\n} from '../pipes'\nimport { reshapeWithScatterEncoding } from '../pipes/reshape/reshapeWithScatterEncoding'\nimport { pivotReshapeWithScatterEncoding } from '../pipes/reshape/pivotReshapeWithScatterEncoding'\n\nexport const scatterAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasuresForScatter, addPivotDimensionsForScatter, defaultEncodingForScatter],\n    [buildMeasuresForScatter, addPivotDimensionsForScatter, encodingForScatter, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithScatterEncoding], [pivotReshapeWithScatterEncoding]),\n\n  scatterConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import { uniqueBy } from 'remeda'\nimport {\n  dataReshapeByEncoding,\n  FoldXMeasureId,\n  FoldXMeasureValue,\n  FoldYMeasureId,\n  FoldYMeasureValue,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Dimension,\n  Encoding,\n  FoldInfo,\n  Measure,\n  Measures,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType, reshapeMeasures } = advancedVSeed\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const measures = reshapeMeasures?.[0] ?? []\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n  const sizeEncodingIds = encoding?.size ?? []\n\n  const datasets: Dataset[] = []\n  const xMeasures = measures.filter((m: Measure) => m.encoding === 'xAxis') as Measures\n  const yMeasures = measures.filter((m: Measure) => m.encoding === 'yAxis') as Measures\n\n  const xResult = dataReshapeByEncoding(\n    dataset,\n    uniqueBy(dimensions, (d: Dimension) => d.id),\n    uniqueBy(xMeasures, (d: Measure) => d.id),\n    encoding as Encoding,\n    {\n      foldMeasureValue: FoldXMeasureValue,\n      foldMeasureId: FoldXMeasureId,\n      colorItemAsId: true,\n      colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      omitIds: xMeasures.map((m: Measure) => m.id).filter((id: string) => !sizeEncodingIds.includes(id)),\n    },\n  )\n\n  datasets.push(xResult.dataset)\n  foldInfoList.push(xResult.foldInfo)\n  unfoldInfoList.push(xResult.unfoldInfo)\n\n  const yResult = dataReshapeByEncoding(\n    datasets[0],\n    uniqueBy(dimensions, (d: Dimension) => d.id),\n    uniqueBy(yMeasures, (d: Measure) => d.id),\n    encoding as Encoding,\n    {\n      foldMeasureValue: FoldYMeasureValue,\n      foldMeasureId: FoldYMeasureId,\n      colorItemAsId: true,\n      colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      omitIds: yMeasures.map((m: Measure) => m.id).filter((id: string) => !sizeEncodingIds.includes(id)),\n    },\n  )\n\n  datasets[0] = yResult.dataset\n  foldInfoList.push(yResult.foldInfo)\n  unfoldInfoList.push(yResult.unfoldInfo)\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets[0],\n\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { unique } from 'remeda'\nimport {\n  dataReshapeByEncoding,\n  FoldXMeasureId,\n  FoldXMeasureValue,\n  FoldYMeasureId,\n  FoldYMeasureValue,\n  ORIGINAL_DATA,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Datum,\n  Encoding,\n  FoldInfo,\n  Measure,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  let allMeasuresIds = unique(reshapeMeasures.flatMap((measureGroup: Measure[]) => measureGroup.map((m) => m.id)))\n\n  if (encoding?.size?.length) {\n    allMeasuresIds = allMeasuresIds.filter((mId: string) => !encoding.size!.includes(mId))\n  }\n\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((measures: Measure[], index: number) => {\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const xMeasures = measures.filter((m) => m.encoding === 'xAxis')\n    const yMeasures = measures.filter((m) => m.encoding === 'yAxis')\n\n    const xResult = dataReshapeByEncoding(dataset, dimensions, xMeasures, encoding as Encoding, {\n      foldMeasureValue: `${FoldXMeasureValue}${index}`,\n      foldMeasureId: FoldXMeasureId,\n      colorItemAsId: true,\n      colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      omitIds: allMeasuresIds,\n    })\n\n    datasets.push(xResult.dataset)\n    foldInfoList.push(xResult.foldInfo)\n    unfoldInfoList.push(xResult.unfoldInfo)\n\n    const yResult = dataReshapeByEncoding(dataset, dimensions, yMeasures, encoding as Encoding, {\n      foldMeasureValue: `${FoldYMeasureValue}${index}`,\n      foldMeasureId: FoldYMeasureId,\n      colorItemAsId: true,\n      colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      omitIds: allMeasuresIds,\n    })\n\n    datasets.push(yResult.dataset)\n    foldInfoList.push(yResult.foldInfo)\n    unfoldInfoList.push(yResult.unfoldInfo)\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(\n      datasets[0].flatMap((d: Datum) => {\n        return datasets[1]\n          .filter((yDatum: Datum) => {\n            return yDatum[ORIGINAL_DATA] === d[ORIGINAL_DATA]\n          })\n          .map((yDatum: Datum) => {\n            return {\n              ...d,\n              ...yDatum,\n            }\n          })\n      }),\n    )\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const scatterConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'sizeRange',\n    'size',\n    'crosshairLine',\n    'brush',\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { sort, unique } from 'remeda'\nimport type { Dataset, Datum } from 'src/types'\nimport type { Sort } from 'src/types/properties/analysis/sort'\n\nexport const calcOrder = (sortConfig: Sort, id: string, dataset: Dataset): string[] => {\n  if (sortConfig.customOrder) {\n    return sortConfig.customOrder\n  }\n\n  const order = sortConfig.order || 'asc'\n  const orderBy = sortConfig.orderBy\n\n  const res = sort(dataset, (a, b) => {\n    const aValue = a[orderBy || id] as string | number\n    const bValue = b[orderBy || id] as string | number\n\n    if (order === 'asc') {\n      if (aValue < bValue) {\n        return -1\n      }\n      if (aValue > bValue) {\n        return 1\n      }\n      return 0\n    }\n    if (aValue > bValue) {\n      return -1\n    }\n    if (aValue < bValue) {\n      return 1\n    }\n    return 0\n  })\n\n  return unique(res.map((item: Datum) => item[id] as string))\n}\n","import type { AdvancedPipe, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortLegend: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sortLegend } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed\n  const colorId = datasetReshapeInfo?.[0]?.unfoldInfo?.encodingColorId\n  const colorIdMap = datasetReshapeInfo?.[0]?.unfoldInfo?.colorIdMap ?? {}\n  const colorItems = datasetReshapeInfo?.[0]?.unfoldInfo?.colorItems\n  if (!sortLegend || !colorId || !colorIdMap || !colorItems) {\n    return advancedVSeed\n  }\n\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  if (sortLegend.customOrder) {\n    const colorIds = Object.keys(colorIdMap)\n    // 先根据名称匹配, 若名称不存在, 则根据id匹配, 从而兼容名称和id的两种情况\n    const orderRes = sortLegend.customOrder.map((itemNameOrId) => {\n      return colorIds.find((id) => {\n        return colorIdMap[id]?.alias === itemNameOrId || colorIdMap[id]?.id === itemNameOrId || id === itemNameOrId\n      }) as string\n    })\n    result.analysis.orderMapping[colorId] = orderRes\n    return result\n  }\n\n  const orderRes = calcOrder(sortLegend, colorId, dataset?.flat(2) || [])\n  result.analysis.orderMapping[colorId] = orderRes\n\n  return result\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortXBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const xField = unfoldInfo.encodingX\n  if (!sortAxis || !xField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, xField, dataset.flat(2))\n\n  result.analysis.orderMapping[xField] = axisOrderResult\n\n  return result\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortYBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const yField = unfoldInfo?.encodingY\n  if (!sortAxis || !yField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, yField, dataset.flat(2))\n\n  result.analysis.orderMapping[yField] = axisOrderResult\n\n  return result\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const annotation: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const annotation = pick(vseed, [\n    'annotationPoint',\n    'annotationHorizontalLine',\n    'annotationVerticalLine',\n    'annotationArea',\n  ]) as AdvancedVSeed['annotation']\n\n  return { ...advancedVSeed, annotation }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const columnConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'stackCornerRadius',\n    'barMaxWidth',\n    'barGapInGroup',\n    'brush',\n    'dimensionLinkage',\n  ]) as Config['column']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { lineConfig } from './line'\nimport { columnConfig } from './column'\nimport { pieConfig } from './pie'\nimport { dualAxisConfig } from './dualAxis'\nimport { scatterConfig } from './scatter'\nimport { histogramConfig } from './histogram'\nimport { boxplotConfig } from './boxplot'\nimport { heatmapConfig } from './heatmap'\n\nexport {\n  lineConfig,\n  columnConfig,\n  pieConfig,\n  dualAxisConfig,\n  scatterConfig,\n  histogramConfig,\n  boxplotConfig,\n  heatmapConfig,\n}\n\n// area\nexport const areaConfig = lineConfig\nexport const areaPercentConfig = lineConfig\n\n// bar\nexport const barConfig = columnConfig\nexport const barParallelConfig = columnConfig\nexport const barPercentConfig = columnConfig\n\n// column\nexport const columnParallelConfig = columnConfig\nexport const columnPercentConfig = columnConfig\n\n// donut, rose\nexport const donutConfig = pieConfig\nexport const roseConfig = pieConfig\nexport const roseParallelConfig = pieConfig\nexport const radarConfig = pieConfig\n\n// funnel, heatmap\nexport const funnelConfig = pieConfig\n// heatmapConfig 已独立导出\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const lineConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairLine',\n    'brush',\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const pieConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, ['backgroundColor', 'color', 'label', 'legend', 'tooltip', 'brush']) as Config['pie']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { clone } from 'remeda'\nimport type { AdvancedPipe, Datum, Dimension, Dimensions, Measure } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    return {\n      ...result,\n      dimensions: clone(dimensions.map((dim: Dimension) => ({ ...dim, alias: dim.alias || dim.id }))),\n    }\n  }\n\n  const measures = advancedVSeed.measures as Measure[]\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensions: newDimensions,\n  }\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport type { AdvancedPipe, Dimension } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n\n  const MeaIdDim: Dimension = {\n    id: MeasureId,\n    alias: intl.i18n`指标Id`,\n  }\n\n  // 如果没有指标Id维度，则默认添加指标Id维度\n  if (!result.dimensions?.some((dim) => dim.id === MeasureId)) {\n    result.dimensions?.push(MeaIdDim)\n  }\n\n  return result\n}\n","import { clone } from 'remeda'\nimport type { AdvancedPipe, Datum, Measure } from 'src/types'\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n\n    clonedMeasures.forEach((m: Measure) => {\n      m.alias = m.alias ?? m.id\n    })\n\n    return {\n      ...advancedVSeed,\n      measures: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measures: defaultMeasures,\n  }\n}\n","import type { AdvancedPipe, Dimension, Dimensions } from 'src/types'\n\nexport const pickDimensionsForReshape: AdvancedPipe = (advancedVSeed) => {\n  const deleteBy = (dimension: Dimension) => dimension.encoding === 'tooltip' || dimension.encoding === 'label'\n  const reshapeDimensions: Dimensions = []\n  ;(advancedVSeed.dimensions ?? []).forEach((d) => {\n    if (!deleteBy(d)) {\n      reshapeDimensions.push(d)\n    }\n  })\n\n  return {\n    ...advancedVSeed,\n    reshapeDimensions,\n  }\n}\n","import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedPipelineContext,\n  AdvancedVSeed,\n  Dimension,\n  Measure,\n} from 'src/types'\nimport { execPipeline } from 'src/pipeline/utils'\n\nexport const encodingAdapter = (\n  noEncodingPipeline: AdvancedPipeline,\n  hasEncodingPipeline: AdvancedPipeline,\n): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { dimensions = [], measures = [] } = advancedVSeed\n    const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n    const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n    const hasEncoding = hasDimensionEncoding || hasMeasureEncoding\n\n    if (hasEncoding) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(hasEncodingPipeline, context, advancedVSeed)\n    }\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(noEncodingPipeline, context, advancedVSeed)\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.y = uniqueDimIds.slice(0, 1) // 第一个维度放置于Y轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    encoding.y = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // x\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { Dimensions, Encoding } from 'src/types'\n\n/**\n * @description 为 encoding 添加 color 编码, 多指标场景, 会将 MeasureId 也添加到 color 编码中.\n * @param dimensions\n * @param encoding\n * @param isMultiMeasure\n */\nexport const addColorToEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n\n  const measureId = dimensions.find((item) => item.id === MeasureId)\n\n  if (isMultiMeasure && measureId && !measureId.encoding) {\n    encoding.color.push(MeasureId)\n  }\n  if (encoding.color.length === 0) {\n    encoding.color = [MeasureId]\n  }\n}\n\n/**\n * @description 为 encoding 添加 color 编码, 多指标场景, 会将 MeasureId 也添加到 color 编码中.\n * @param dimensions\n * @param encoding\n * @param isMultiMeasure\n */\nexport const addDefaultColorEncoding = (uniqueDimIds: string[], encoding: Encoding, isMultiMeasure: boolean) => {\n  if (uniqueDimIds.length === 1 && uniqueDimIds[0] === MeasureId) {\n    encoding.color = uniqueDimIds.slice(0)\n  } else if (isMultiMeasure) {\n    encoding.color = uniqueDimIds.slice(1)\n  } else {\n    encoding.color = uniqueDimIds.slice(1).filter((d: string) => d !== MeasureId)\n  }\n  if (encoding.color.length === 0) {\n    encoding.color = [MeasureId]\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { reshapeMeasures = [], measures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { reshapeMeasures = [], measures = [], dimensions = [] } = advancedVSeed\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  generateMeasureEncoding(measures, encoding)\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1)\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标Id之外的所有维度\n  encoding.detail = [] // 折线图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n\n  if (isMultiMeasure) {\n    encoding.color = uniqueDimIds.slice(0) // 所有维度都用于color映射，包括MeasureId\n  } else {\n    encoding.color = uniqueDimIds.filter((d: string) => d !== MeasureId) // 除了MeasureId之外的所有维度用于color映射\n  }\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // angle\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const markStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedMarkStyle = pick(vseed, [\n    'barStyle',\n    'pointStyle',\n    'lineStyle',\n    'areaStyle',\n    'boxPlotStyle',\n    'outlierStyle',\n  ]) as AdvancedVSeed['markStyle']\n\n  const markStyle = replaceNullToUndefined(pickedMarkStyle)\n\n  return { ...advancedVSeed, markStyle }\n}\n","import type { AdvancedPipe, MeasureEncoding, Measures } from 'src/types'\n\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport { ensureParentIdInitialized, isCommonMeasureEncoding } from './utils'\n\nexport const buildMeasures = (encodingKeys: string[]): AdvancedPipe => {\n  return (advancedVSeed) => {\n    const { measures = [] } = advancedVSeed\n    const measuresByView = {} as { [key: string]: Measures }\n    const parentIds: string[] = []\n\n    for (let index = 0; index < measures.length; index++) {\n      const item = measures[index]\n      const encoding = item.encoding\n      const parentId = item.parentId || DEFAULT_PARENT_ID\n\n      const isOtherEncoding = item.encoding && isCommonMeasureEncoding(encoding as MeasureEncoding)\n\n      ensureParentIdInitialized(parentId, measuresByView, parentIds)\n\n      if (encodingKeys.includes(encoding as string)) {\n        measuresByView[parentId].push(item)\n      } else if (!isOtherEncoding) {\n        item.encoding = encodingKeys[0] as MeasureEncoding\n        measuresByView[parentId].push(item)\n      }\n    }\n\n    advancedVSeed.reshapeMeasures = parentIds.map((pid) => measuresByView[pid]).filter((m) => m.length > 0)\n\n    return advancedVSeed\n  }\n}\n","import type { MeasureEncoding, MeasureGroup, MeasureTree } from 'src/types'\n\n/**\n * @description 检查是否为指标树, 指标树深度大于1. 如果存在一个指标为组, 即有children配置, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithChildren = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'children' in measure)\n}\n\n/**\n * @description 检查是否为指标树, 指标树存在parentId. 如果存在一个指标有parentId, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithParentId = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'parentId' in measure)\n}\n\n/**\n * @description 保证指标树中的每一组都有children, 没有children的指标, 会被放到一个默认的指标组中.\n * @param measures 指标树\n * @returns\n */\nexport const normalizeMeasureTree = (measures: MeasureTree) => {\n  const createEmptyMeasureGroup = (): MeasureGroup => {\n    return {\n      id: 'group',\n      alias: '',\n      children: [],\n    }\n  }\n\n  let currentGroup: MeasureGroup = createEmptyMeasureGroup()\n  const measureGroups: MeasureGroup[] = []\n  for (const measure of measures) {\n    if ('children' in measure) {\n      // 当前指标组之前的所有独立指标成组\n      if (currentGroup.children?.length) {\n        currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n        currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n        measureGroups.push(currentGroup)\n        currentGroup = createEmptyMeasureGroup()\n      }\n      // 当前是指标组\n      measureGroups.push(measure)\n    } else {\n      currentGroup.children?.push(measure)\n    }\n  }\n\n  // 最后一组\n  if (currentGroup.children?.length) {\n    currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n    currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n    measureGroups.push(currentGroup)\n    currentGroup = createEmptyMeasureGroup()\n  }\n\n  return measureGroups\n}\n\nexport const isCommonMeasureEncoding = (encoding: MeasureEncoding) => {\n  return ['color', 'label', 'tooltip'].includes(encoding)\n}\n\n/**\n * @description Ensures that the measuresByView object has an initialized array for the given parentId.\n * If the parentId doesn't exist in measuresByView, it initializes an empty array and tracks the parentId.\n * @param parentId The parent ID to ensure initialization for\n * @param measuresByView The object mapping parent IDs to measures arrays\n * @param parentIds The array tracking all parent IDs that have been initialized\n */\nexport const ensureParentIdInitialized = <T>(\n  parentId: string,\n  measuresByView: { [key: string]: T[] },\n  parentIds: string[],\n) => {\n  if (!measuresByView[parentId]) {\n    measuresByView[parentId] = []\n    parentIds.push(parentId)\n  }\n}\n","import type { AdvancedPipe, Table } from 'src/types'\n\nexport const page: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { page } = vseed as Table\n\n  if (!page) {\n    return advancedVSeed\n  }\n\n  const { field, currentValue } = page\n  const { dataset } = vseed\n\n  const pagedDataset = dataset.filter((datum) => {\n    return datum[field] === currentValue\n  })\n\n  context.vseed = {\n    ...vseed,\n    dataset: pagedDataset,\n  }\n\n  return advancedVSeed\n}\n","import type { AdvancedPipe, AdvancedPipeline, AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline, isPivotChart } from 'src/pipeline/utils'\n\nexport const pivotAdapter = (pipeline: AdvancedPipeline, pivotPipeline: AdvancedPipeline): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n\n    if (usePivotChart) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pivotPipeline, context, advancedVSeed)\n    }\n\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context, advancedVSeed)\n  }\n}\n","import type { AdvancedPipe, RegressionLineConfig } from 'src/types'\n\nexport const regressionLine: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  let keys = [] as string[]\n\n  if (vseed.chartType === 'histogram') {\n    keys = ['kdeRegressionLine', 'ecdfRegressionLine']\n  } else if (vseed.chartType === 'scatter') {\n    keys = ['linearRegressionLine', 'lowessRegressionLine', 'polynomialRegressionLine', 'logisticRegressionLine']\n  } else if (vseed.chartType === 'column') {\n    keys = ['polynomialRegressionLine']\n  }\n\n  if (keys.length) {\n    const regressionLineConfig: RegressionLineConfig = {}\n    let hasLine = false\n\n    keys.forEach((key: string) => {\n      if ((vseed as any)[key]) {\n        hasLine = true\n        regressionLineConfig[key as keyof RegressionLineConfig] = (vseed as any)[key]\n      }\n    })\n\n    return hasLine\n      ? {\n          ...advancedVSeed,\n          regressionLine: regressionLineConfig,\n        }\n      : advancedVSeed\n  }\n\n  return advancedVSeed\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Dimension,\n  Encoding,\n  Measure,\n} from 'src/types'\n\nexport const pivotReshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const allMeasuresIds = reshapeMeasures.flatMap((measureGroup: Measure[]) => measureGroup.map((m) => m.id))\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((measures: Measure[], index: number) => {\n    if (!measures) {\n      return\n    }\n    const groupId = measures[0].parentId ?? DEFAULT_PARENT_ID\n    const {\n      dataset: newSubDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      uniqueBy(measures, (item: Measure) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: `${FoldMeasureValue}${groupId}`,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasuresIds,\n      },\n    )\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newSubDataset)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type { AdvancedPipe, AdvancedVSeed, ColumnParallel, Dimension, Encoding, Measure } from 'src/types'\n\nexport const reshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding, reshapeMeasures = [] } = advancedVSeed\n  const allMeasuresIds = (reshapeMeasures[0] ?? []).map((m: Measure) => m.id)\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const {\n    dataset: newDatasets,\n    foldInfo,\n    unfoldInfo,\n  } = dataReshapeByEncoding(\n    dataset,\n    uniqueBy(advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? [], (item: Dimension) => item.id),\n    uniqueBy(advancedVSeed.reshapeMeasures?.[0] ?? [], (item: Measure) => item.id),\n    encoding as Encoding,\n    {\n      colorItemAsId: false,\n      colorMeasureId,\n      omitIds: allMeasuresIds,\n    },\n  )\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n  }\n}\n","import { clone, isNullish, isNumber, isObjectType, isString, merge, mergeDeep } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const theme: AdvancedPipe = (advancedVSeed, context) => {\n  const { customTheme, vseed } = context\n  const { theme = 'light', chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  } as AdvancedVSeed\n\n  if (!customTheme || !customTheme[theme]) {\n    return result\n  }\n\n  const chartConfigTheme = customTheme?.[theme].config?.[chartType]\n  if (chartConfigTheme) {\n    const chartConfig = result.config?.[chartType] || {}\n    const mergedConfig = mergeDeep(chartConfigTheme, clone(chartConfig))\n\n    // 数组项不会被Merge, 需要将1个主题配置, 合并到数组的每一项\n    for (const _k in mergedConfig) {\n      const key = _k as keyof typeof mergedConfig\n      // 配置的第一层, 如果是数组, 则数组的每一项目和主题配置合并\n      if (Array.isArray(mergedConfig[key])) {\n        mergedConfig[key] = mergeArray(mergedConfig[key], chartConfigTheme[key])\n      }\n    }\n\n    result.config = {\n      [chartType]: mergedConfig,\n    }\n  }\n\n  const chartCustomTheme = customTheme?.[theme]?.config?.[chartType]\n\n  result.customTheme = {\n    config: {\n      [chartType]: chartCustomTheme,\n    },\n  }\n\n  return result\n}\n\nconst mergeArray = <Destination extends Array<object>, Source extends object | number | string | undefined | null>(\n  arr: Destination,\n  themeItem: Source,\n): Destination => {\n  if (isNullish(themeItem) || isString(themeItem) || isNumber(themeItem)) {\n    return arr\n  }\n\n  if (!Array.isArray(arr)) {\n    return arr\n  }\n\n  if (arr.some((d) => !isObjectType(d))) {\n    return arr\n  }\n\n  return arr.map((item) => {\n    return merge(themeItem, item)\n  }) as Destination\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { theme } from '../../chart/pipes'\nimport {\n  cellStyle,\n  defaultDimensions,\n  defaultMeasureId,\n  defaultMeasures,\n  encodingForPivotTable,\n  initAdvancedVSeed,\n  page,\n  pivotTableConfig,\n  reshapePivotTable,\n} from '../pipes'\n\nexport const pivotTableAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  cellStyle,\n\n  encodingForPivotTable,\n  reshapePivotTable,\n  pivotTableConfig,\n  theme,\n]\n","import { MeasureId, MeasureName } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport { findTreeNodesBy } from 'src/pipeline/utils/tree/traverse'\nimport type { AdvancedPipe, Dimension, MeasureTree } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n  const measures = findAllMeasures(advancedVSeed.measureTree as MeasureTree)\n\n  // 如果没有指标名称维度，则默认添加指标名称维度\n  if (\n    measures.length > 1 &&\n    !findTreeNodesBy(advancedVSeed.dimensionTree, (dim) => dim.id === MeasureId || dim.id === MeasureName).length\n  ) {\n    result.dimensionTree!.push({\n      id: MeasureId,\n      alias: intl.i18n`指标名称`,\n      encoding: 'row',\n    } as Dimension)\n  }\n\n  return result\n}\n","import { unique } from 'remeda'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const encodingForPivotTable: AdvancedPipe = (advancedVSeed) => {\n  const { measureTree = [], dimensionTree = [] } = advancedVSeed\n  const measures = findAllMeasures(measureTree)\n\n  const hasDimensionEncoding = dimensionTree.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensionTree, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensionTree, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  uniqueDimIds.forEach((item, index) => {\n    if (index % 2 === 0) {\n      encoding.column!.push(item)\n    } else {\n      encoding.row!.push(item)\n    }\n  })\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  dimensions.forEach((dim, index) => {\n    const id = dim.id\n    if (dim.encoding === 'row') {\n      encoding.row!.push(id)\n    } else if (dim.encoding === 'column') {\n      encoding.column!.push(id)\n    } else {\n      if (index % 2 === 0) {\n        encoding.column!.push(id)\n      } else {\n        encoding.row!.push(id)\n      }\n    }\n  })\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = unique(measures.map((item) => item.id))\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = measures.map((item) => item.id)\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\n","import { FoldMeasureId, FoldMeasureName, foldMeasures, FoldMeasureValue } from 'src/dataReshape'\nimport {} from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, DatasetReshapeInfo, PivotTable } from 'src/types'\n\nexport const reshapePivotTable: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as PivotTable\n  const { measureTree } = advancedVSeed\n  const { dataset: newDatasets, foldInfo } = foldMeasures(dataset, findAllMeasures(measureTree), {\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    allowEmptyFold: false,\n  })\n\n  const datasetReshapeInfo = [\n    {\n      id: String(chartType),\n      index: 0,\n      foldInfo,\n    },\n  ] as unknown as DatasetReshapeInfo\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const pivotTableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['table']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { initAdvancedVSeed, records, tableConfig, defaultMeasures, defaultDimensions, cellStyle, page } from '../pipes'\nimport { theme } from '../../chart/pipes'\n\nexport const tableAdvancedPipeline: AdvancedPipeline = [\n  page,\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  cellStyle,\n\n  records,\n  tableConfig,\n  theme,\n]\n","import type { AdvancedPipe } from 'src/types'\n\nexport const records: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { dataset } = vseed\n  return {\n    ...advancedVSeed,\n    dataset,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const tableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['pivotTable']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const cellStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedCellStyle = pick(vseed, ['bodyCellStyle']) as AdvancedVSeed['cellStyle']\n\n  const style = replaceNullToUndefined(pickedCellStyle)\n\n  return { ...advancedVSeed, cellStyle: style }\n}\n","import { clone } from 'remeda'\nimport { findAllMeasures, isDimension, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Dimension, Dimensions, MeasureTree } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    const clonedDimensions = clone(dimensions)\n    preorderTraverse<Dimension>(clonedDimensions as unknown as Dimension[], (node) => {\n      if (isDimension(node)) {\n        node.alias = node.alias || node.id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      dimensionTree: clonedDimensions,\n    }\n  }\n\n  const measures = findAllMeasures(advancedVSeed.measureTree as MeasureTree)\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensionTree: newDimensions,\n  }\n}\n","import { clone } from 'remeda'\nimport { isMeasure, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Measure } from 'src/types'\n\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n    preorderTraverse<Measure>(clonedMeasures as unknown as Measure[], (node) => {\n      if (isMeasure(node)) {\n        node.alias = node.alias || node.id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      measureTree: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measureTree: defaultMeasures,\n  }\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","import type { AdvancedPipe, Table } from 'src/types'\n\nexport const page: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { page } = vseed as Table\n\n  if (!page) {\n    return advancedVSeed\n  }\n\n  const { field, currentValue } = page\n  const { dataset } = vseed\n\n  const pagedDataset = dataset.filter((datum) => {\n    return datum[field] === currentValue\n  })\n\n  context.vseed = {\n    ...vseed,\n    dataset: pagedDataset,\n  }\n\n  return advancedVSeed\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  yLinear,\n  initArea,\n  stackInverse,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  datasetXY,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotAxisStyle,\n  pivotTitle,\n  splitLine,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst area: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  brush,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotArea: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    stackInverse,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    brush,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaSpecPipeline = [pivotAdapter(area, pivotArea)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  percent,\n  datasetXY,\n  xBand,\n  yLinear,\n  initArea,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  progressive,\n  colorLegend,\n  colorAdapter,\n  linearColor,\n  pivotColorLegend,\n  pointStateDimensionHover,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst areaPercent: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  brush,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotAreaPercent: PivotChartSpecPipeline = [\n  initPivot,\n\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    brush,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaPercentSpecPipeline = [pivotAdapter(areaPercent, pivotAreaPercent)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst bar: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  brush,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    brush,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barSpecPipeline = [pivotAdapter(bar, pivotBar)]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBarParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.y, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n\n  result.yField = [unfoldInfo.encodingY]\n\n  if (!sameDimensionsMode) {\n    result.yField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.x?.length === 1) {\n      result.yField.pop()\n    }\n  }\n\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetYX,\n  xLinear,\n  yBand,\n  initBarParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst barParallel: VChartSpecPipeline = [\n  initBarParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  brush,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBarParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    brush,\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barParallelSpecPipeline = [pivotAdapter(barParallel, pivotBarParallel)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst barPercent: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  brush,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    brush,\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barPercentSpecPipeline = [pivotAdapter(barPercent, pivotBarPercent)]\n","import { type IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isDeepEqual } from 'remeda'\nimport {\n  LowerWhisker,\n  MeasureId,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n} from 'src/dataReshape/constant'\nimport { isPivotChart, revisedBoxPlotFieldKey } from 'src/pipeline/utils'\n\nexport const initBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBoxPlotChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n\n  const usePivotChart = isPivotChart(vseed)\n  result.type = 'boxPlot'\n  // 默认应该是盒须的位置\n  result.minField = revisedBoxPlotFieldKey(LowerWhisker, id, usePivotChart)\n  result.maxField = revisedBoxPlotFieldKey(UpperWhisker, id, usePivotChart)\n  result.q1Field = revisedBoxPlotFieldKey(Q1MeasureValue, id, usePivotChart)\n  result.medianField = revisedBoxPlotFieldKey(MedianMeasureId, id, usePivotChart)\n  result.q3Field = revisedBoxPlotFieldKey(Q3MeasureValue, id, usePivotChart)\n  result.outliersField = revisedBoxPlotFieldKey(OutliersMeasureId, id, usePivotChart)\n  result.xField = [unfoldInfo.encodingX]\n  result.seriesField = unfoldInfo.encodingColorId\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingColor)\n\n    if (encoding.color?.[0] === MeasureId && encoding.value?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import { isNullish } from 'remeda'\nimport type { BoxMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const boxMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxMaxWidth = advancedVSeed.config?.[chartType as 'boxPlot']?.boxMaxWidth as BoxMaxWidth\n\n  if (!isNullish(boxMaxWidth)) {\n    return {\n      ...spec,\n      boxMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import { isNullish } from 'remeda'\nimport type { BoxGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const boxGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxGapInGroup = advancedVSeed.config?.[chartType as 'boxPlot']?.boxGapInGroup as BoxGapInGroup\n\n  if (!isNullish(boxGapInGroup)) {\n    return {\n      ...spec,\n      boxGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const datasetBoxplot: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { Encoding, PieLabel, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\nimport { FoldMeasureId, MedianMeasureId } from 'src/dataReshape/constant'\n\nexport const labelBoxPlot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: PieLabel }\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions!,\n    advancedVSeed.measures!,\n    encoding as Encoding,\n    [\n      {\n        measureId: FoldMeasureId,\n        measureValue: MedianMeasureId,\n      },\n    ],\n  ) as unknown as IPieChartSpec['label']\n\n  return result\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport { createFormatterByMeasure, findMeasureById } from '../../../../utils'\nimport type {\n  Dimension,\n  Dimensions,\n  Encoding,\n  VChartSpecPipe,\n  Tooltip,\n  Measures,\n  FoldInfo,\n  UnfoldInfo,\n} from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern, ITooltipLineActual, TooltipData } from '@visactor/vchart'\nimport {\n  ColorEncoding,\n  LowerWhisker,\n  MeasureId,\n  MeasureName,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n  XEncoding,\n} from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { intl } from 'src/i18n'\nimport { updateTooltipElement } from './tooltipElement'\n\nconst boxPlotMeasureKeys = [UpperWhisker, Q3MeasureValue, MedianMeasureId, Q1MeasureValue, LowerWhisker]\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { chartType, dimensions = [], encoding, datasetReshapeInfo } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType as 'boxPlot'] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const meas = (vseed.measures ?? []) as Measures\n  const valueMeasure = meas.find((item) => item.encoding === 'value' || isNullish(item.encoding))\n  const defaultFormatter = valueMeasure ? createFormatterByMeasure(valueMeasure) : (v: unknown) => v\n  const measureAliasMapping: Record<string, string> = {\n    [OutliersMeasureId]: intl.i18n`异常点`,\n    [UpperWhisker]: intl.i18n`上边界`,\n    [Q3MeasureValue]: intl.i18n`上四分位数`,\n    [MedianMeasureId]: intl.i18n`中位数`,\n    [Q1MeasureValue]: intl.i18n`下四分位数`,\n    [LowerWhisker]: intl.i18n`下边界`,\n  }\n  const { unfoldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    visible: enable,\n    style: getTooltipStyle(tooltip),\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, encoding as Encoding),\n      updateContent: (prev: ITooltipLineActual[] | undefined, data: TooltipData | undefined) => {\n        const datum = (data as any)?.[0]?.datum?.[0]\n\n        if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n          const tooltipItems: ITooltipLineActual[] = (prev ?? []).filter(\n            (item: any) => !boxPlotMeasureKeys.includes(item.key as string),\n          )\n          const outerlierMeasure = meas.find((item) => item.id === OutliersMeasureId)\n          const formatter = outerlierMeasure ? createFormatterByMeasure(outerlierMeasure) : defaultFormatter\n\n          tooltipItems.push({\n            ...(tooltipItems[0] as any),\n            key: outerlierMeasure?.alias ?? measureAliasMapping[OutliersMeasureId],\n            value: formatter(datum?.[VCHART_OUTLIER_KEY] as number) as string,\n          } as ITooltipLineActual)\n\n          return tooltipItems\n        }\n\n        return (prev ?? []).map((entry) => {\n          if (boxPlotMeasureKeys.includes((entry as any).key as string)) {\n            const mea = meas.find((item) => item.id === (entry as any).key)\n            const formatter = mea ? createFormatterByMeasure(mea) : defaultFormatter\n\n            return {\n              ...(entry as any),\n              value: formatter(datum?.[(entry as any).key] as number) as string,\n              key: mea?.alias ?? measureAliasMapping[entry?.key as string] ?? (entry as any).key,\n            }\n          }\n\n          return entry\n        }) as ITooltipLineActual[]\n      },\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, meas, unfoldInfo, measureAliasMapping[MedianMeasureId]),\n    },\n    updateElement: updateTooltipElement,\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (tooltip: string[], dimensions: Dimensions, encoding: Encoding) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return datum?.[item.id] as string\n    },\n  }))\n\n  const defaultContent = boxPlotMeasureKeys.map((key: string) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key,\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return datum[key] as string | number\n      },\n    }\n  })\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n\nconst createDimensionContent = (\n  dimensions: Dimensions,\n  measures: Measures,\n  unfoldInfo: UnfoldInfo,\n  medianAlias: string,\n  hasMultiMeasureGroup?: boolean,\n) => {\n  const { encodingColor } = unfoldInfo\n\n  return [\n    {\n      visible: true,\n      shapeType: 'rectRound',\n      hasShape: true,\n      key: dimensions.some((d) => d.encoding === 'color')\n        ? (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[encodingColor] as string)) || ''\n            const colorKey = `${unfoldInfo.colorIdMap[key].alias ?? key}(${medianAlias})`\n\n            if (hasMultiMeasureGroup) {\n              const id = datum[MeasureId] as string\n              const measure = findMeasureById(measures, id)\n\n              return measure ? `${colorKey}-${measure.alias ?? id}` : colorKey\n            }\n\n            return colorKey\n          }\n        : (v: unknown) => {\n            const datum = v as Datum\n            return `${datum[MeasureName] ?? datum[MeasureId]}(${medianAlias})`\n          },\n      value: (v: unknown) => {\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[MedianMeasureId] as string | number // dimension tooltip 中默认显示中位数\n        const id = datum[MeasureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    },\n  ]\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBoxPlotStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBoxPlotChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.boxPlot?.style) {\n        result.boxPlot.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BoxPlotStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const boxPlotStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { boxPlotStyle } = markStyle\n  const { chartType } = vseed\n  const theme = config?.[chartType as 'boxPlot']?.boxPlotStyle\n\n  const result = {\n    ...spec,\n    boxPlot: {\n      style: {\n        shaftShape: 'filled-line',\n        visible: true,\n        shaftWidth: '50%',\n        stroke: theme?.whiskerBorderColor,\n        boxStroke: theme?.boxBorderColor,\n        boxCornerRadius: theme?.boxCornerRadius,\n        medianStroke: theme?.medianBorderColor ?? theme?.boxBorderColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(boxPlotStyle) || isEmpty(boxPlotStyle)) {\n    return result\n  }\n\n  const boxPlotStyles = (Array.isArray(boxPlotStyle) ? boxPlotStyle : [boxPlotStyle]) as BoxPlotStyle[]\n\n  const customMap = boxPlotStyles.reduce<object>((result, style, index) => {\n    const {\n      boxColor,\n      boxColorOpacity,\n      boxBorderColor,\n      boxBorderWidth = 1,\n      boxVisible = true,\n      boxBorderOpacity,\n      medianBorderColor,\n      whiskerBorderColor,\n      boxCornerRadius,\n    } = style\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: boxVisible,\n          fill: boxColor,\n          fillOpacity: boxColorOpacity,\n          lineWidth: boxBorderWidth,\n          stroke: whiskerBorderColor,\n          boxStroke: boxBorderColor,\n          boxCornerRadius: boxCornerRadius,\n          strokeOpacity: boxBorderOpacity,\n          medianStroke: medianBorderColor ?? boxBorderColor,\n        },\n      },\n    }\n  }, {})\n\n  result.boxPlot!.state = {\n    ...result.boxPlot!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, OutlierStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const outlierStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { outlierStyle } = markStyle\n  const { chartType } = vseed\n  const theme = config?.[chartType as 'boxPlot']?.outlierStyle\n\n  const result = {\n    ...spec,\n    outlier: {\n      style: {\n        fill: theme?.pointColor,\n        lineWidth: theme?.pointBorderWidth,\n        stroke: theme?.pointBorderColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(outlierStyle) || isEmpty(outlierStyle)) {\n    return result\n  }\n\n  const outlierStyles = (Array.isArray(outlierStyle) ? outlierStyle : [outlierStyle]) as OutlierStyle[]\n\n  const customMap = outlierStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          stroke: pointBorderColor,\n          lineWidth: pointBorderWidth,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    outlier: {\n      ...result.outlier,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  labelBoxPlot,\n  tooltipBoxplot,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  initBoxplot,\n  xBand,\n  yLinear,\n  verticalCrosshairRect,\n  datasetBoxplot,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  boxPlotStyle,\n  colorBoxPlotStyleFill,\n  outlierStyle,\n  discreteLegend,\n} from '../pipes'\n\nconst boxplot: VChartSpecPipeline = [\n  initBoxplot,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetBoxplot,\n  progressive,\n  xBand,\n  yLinear,\n  labelBoxPlot,\n  tooltipBoxplot,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBoxPlotStyleFill(boxPlotStyle),\n  outlierStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBoxplot: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initBoxplot,\n    stackCornerRadius,\n    boxMaxWidth,\n    boxGapInGroup,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetBoxplot,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    labelBoxPlot,\n    tooltipBoxplot,\n    colorBoxPlotStyleFill(boxPlotStyle),\n    outlierStyle,\n    verticalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const boxplotSpecPipeline = [pivotAdapter(boxplot, pivotBoxplot)]\n","import type { IBarChartSpec, ICartesianSeries, IChart, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport { array, clamper, regressionPolynomial } from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n} from 'src/types'\nimport { defaultRegressionLineColor, getAlphaByConfidenceLevel } from './common'\n\nexport const columnPolynomialRegressionLine: VChartSpecPipe = (spec, context): Partial<IBarChartSpec> => {\n  const result = { ...spec } as Partial<IBarChartSpec>\n  const { advancedVSeed } = context\n  const { chartType, regressionLine } = advancedVSeed\n  const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.polynomialRegressionLine) {\n    return result\n  }\n\n  const lineList = array(regressionLine.polynomialRegressionLine)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n    const {\n      color,\n      lineWidth,\n      lineDash,\n      text,\n      textColor,\n      textFontSize,\n      textFontWeight,\n      confidenceIntervalOpacity,\n      confidenceLevel = 0.95,\n      shadowBlur,\n      shadowColor,\n      shadowOffsetX,\n      shadowOffsetY,\n      confidenceIntervalVisible = theme.confidenceIntervalVisible,\n    } = line as LinearRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `polynomialRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const s = chart.getAllSeries()[0] as ICartesianSeries\n\n          if (s) {\n            const rect = s.getRegion().getLayoutRect()\n\n            if (rect.width === 0 || rect.height === 0) {\n              return null\n            }\n\n            const yClamper = clamper(0, 0 + rect.height)\n            const data = s.getViewData()?.latestData as Datum[]\n            const fieldX = s.fieldX?.[0]\n            const fieldY = s.fieldY?.[0]\n            const xValues = s.getRawDataStatisticsByField(fieldX).values as string[]\n            const degree = (line as PolynomialRegressionLine).degree ?? 2\n            // 多项式拟合需要至少 degree + 1 个点\n            const minPoints = degree + 1\n\n            if (!fieldX || !fieldY || !data || data.length < minPoints || xValues.length < minPoints) {\n              return null\n            }\n\n            const { confidenceInterval, evaluateGrid } = regressionPolynomial(\n              xValues.map((xVal, index: number) => {\n                const filteredData = data.filter((d) => d[fieldX] === xVal)\n\n                return {\n                  x: index,\n                  y: Math.max(...filteredData.map((d) => d[fieldY] as number)),\n                }\n              }),\n              undefined,\n              undefined,\n              {\n                degree: (line as PolynomialRegressionLine).degree ?? 2,\n                alpha: getAlphaByConfidenceLevel(confidenceLevel),\n              },\n            )\n            const N = xValues.length\n            const xAxisHelper = s.getXAxisHelper()\n            const halfBandWidth = xAxisHelper ? xAxisHelper.getBandwidth!(0) / 2 : 0\n            const lineData = evaluateGrid(N)\n            const linePoints = lineData.map((datum: Datum, index: number) => {\n              const d = { [fieldX]: xValues[index], [fieldY]: datum.y }\n              return {\n                x: s.dataToPositionX(d)! + halfBandWidth,\n                y: yClamper(s.dataToPositionY(d)!),\n              }\n            })\n            const result: {\n              linePoints: { x: number; y: number }[]\n              areaPoints?: { x: number; y: number; y1: number }[]\n              color: string\n            } = {\n              linePoints,\n              color: s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n\n            if (confidenceIntervalVisible) {\n              const intervalData = confidenceInterval(N)\n\n              result.areaPoints = intervalData.map((datum: Datum, index: number) => {\n                const d = { [fieldX]: xValues[index], [fieldY]: datum.lower }\n                return {\n                  x: s.dataToPositionX(d)! + halfBandWidth,\n                  y: yClamper(s.dataToPositionY(d)!),\n                  y1: yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!),\n                }\n              })\n            }\n\n            return result\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    if (confidenceIntervalVisible) {\n      childrenMarks.push({\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        style: {\n          stroke: false,\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n          fill: color ?? defaultRegressionLineColor,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data) {\n              return parentNode.attribute.data.areaPoints\n            }\n\n            return []\n          },\n        },\n      })\n    }\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        shadowBlur: shadowBlur ?? theme.shadowBlur,\n        shadowColor: shadowColor ?? theme.shadowColor,\n        shadowOffsetX: shadowOffsetX ?? theme.shadowOffsetX,\n        shadowOffsetY: shadowOffsetY ?? theme.shadowOffsetY,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `polynomialRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.x\n            }\n\n            return undefined\n          },\n          y: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.y\n            }\n\n            return undefined\n          },\n        },\n      })\n    }\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  columnPolynomialRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst column: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  barMaxWidth,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  brush,\n  tooltip,\n  verticalCrosshairRect,\n  colorAdapter(discreteLegend, colorLegend),\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  columnPolynomialRegressionLine,\n]\n\nconst pivotColumn: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    barMaxWidth,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    brush,\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    columnPolynomialRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnSpecPipeline = [pivotAdapter(column, pivotColumn)]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumnParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = [unfoldInfo.encodingX]\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.y?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initColumnParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst columnParallel: VChartSpecPipeline = [\n  initColumnParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  brush,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumnParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    brush,\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnParallelSpecPipeline = [pivotAdapter(columnParallel, pivotColumnParallel)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst columnPercent: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  stackInverse,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  brush,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    stackInverse,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    percent,\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    brush,\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnPercentSpecPipeline = [pivotAdapter(columnPercent, pivotColumnPercent)]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initDonut: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = result.outerRadius * 0.8\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initDonut,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  pieStyle,\n  colorPieStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n  brush,\n  dimensionLinkage,\n} from '../pipes'\n\nconst donut: VChartSpecPipeline = [\n  initDonut,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  brush,\n  labelPie,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotDonut: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initDonut,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    brush,\n    labelPie,\n    colorPieStyleFill(pieStyle),\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const donutSpecPipeline = [pivotAdapter(donut, pivotDonut)]\n","import type {\n  ChartType,\n  Dataset,\n  DualAxisMeasure,\n  DualAxisOptions,\n  SpecPipelineContext,\n  VChartSpecPipe,\n} from 'src/types'\nimport { DEFAULT_DUAL_CHART_TYPE, execPipeline } from '../../../../utils'\nimport type { ICommonChartSpec, ILineSeriesSpec, ISpec } from '@visactor/vchart'\nimport { FoldPrimaryMeasureValue } from 'src/dataReshape/constant'\n\nexport const series = (\n  pipeByAxis: ((options: DualAxisOptions) => VChartSpecPipe)[],\n  pipes: VChartSpecPipe[],\n): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    const { advancedVSeed } = context\n    const { datasetReshapeInfo, reshapeMeasures = [] } = advancedVSeed\n    const { foldInfoList = [], index } = datasetReshapeInfo[0]!\n\n    result.series = foldInfoList!.map((foldInfo) => {\n      const measureId = Object.keys(foldInfo.foldMap)[0]\n      const axisType = foldInfo.measureValue === `${FoldPrimaryMeasureValue}${index}` ? 'primary' : 'secondary'\n      const measure = (reshapeMeasures[index] ?? []).find((m) => m.id === measureId)!\n\n      const options: DualAxisOptions = {\n        axisType,\n        chartType: ((measure as DualAxisMeasure)?.chartType ??\n          (axisType === 'primary' ? DEFAULT_DUAL_CHART_TYPE.primary : DEFAULT_DUAL_CHART_TYPE.secondary)) as ChartType,\n        foldInfo,\n      }\n      const pipeline = [...pipeByAxis.map((p) => p(options)), ...pipes]\n      return execPipeline<ISpec, SpecPipelineContext>(pipeline, context, {})\n    }) as ILineSeriesSpec[]\n\n    return result\n  }\n}\n\n/**\n * @description 双轴图的透视场景, 不能使用此pipe, 请使用series\n * 因为VTable.PivotVChart会自行解析数据, 而非VChart解析.\n */\nexport const seriesDualAxis = (\n  pipeByAxis: ((options: DualAxisOptions) => VChartSpecPipe)[],\n  pipes: VChartSpecPipe[],\n): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    labelLayout: 'region',\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    const { advancedVSeed } = context\n    const { datasetReshapeInfo, dataset, reshapeMeasures = [] } = advancedVSeed\n\n    result.series = dataset.map((d, index) => {\n      const seriesContext = {\n        ...context,\n        advancedVSeed: {\n          ...advancedVSeed,\n          dataset: d as Dataset,\n        },\n      }\n\n      const foldInfo = datasetReshapeInfo[0]!.foldInfoList![index]\n      const measureId = Object.keys(foldInfo.foldMap)[0]\n      const axisType = foldInfo.measureValue === FoldPrimaryMeasureValue ? 'primary' : 'secondary'\n      const measure = (reshapeMeasures[0] ?? []).find((m) => m.id === measureId)!\n\n      const options: DualAxisOptions = {\n        axisType,\n        chartType: ((measure as DualAxisMeasure)?.chartType ??\n          (axisType === 'primary' ? DEFAULT_DUAL_CHART_TYPE.primary : DEFAULT_DUAL_CHART_TYPE.secondary)) as ChartType,\n        foldInfo,\n      }\n      const pipeline = [...pipeByAxis.map((p) => p(options)), ...pipes]\n      return execPipeline<ISpec, SpecPipelineContext>(pipeline, seriesContext, {})\n    }) as ILineSeriesSpec[]\n\n    return result\n  }\n}\n","import type { IBarSeriesSpec, ILineSeriesSpec } from '@visactor/vchart'\nimport type { DualAxisOptions, VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initDualAxis = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = { ...spec } as IBarSeriesSpec | ILineSeriesSpec\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo, id } = datasetReshapeInfo[0]\n\n    result.id = `${id}-${options.axisType}-${options.chartType}`\n    result.type = options.chartType === 'line' ? 'line' : 'bar'\n    result.direction = 'vertical'\n    result.xField = unfoldInfo.encodingX\n    result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n    result.yField = options.foldInfo.measureValue\n\n    result.animation = true\n\n    return result\n  }\n}\n","import type { IBarSeriesSpec, ISeriesSpec } from '@visactor/vchart'\nimport { DUAL_AXIS_CHART_COLUMN_Z_INDEX, DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } from 'src/pipeline/utils/constant'\nimport type { VChartSpecPipe } from 'src/types'\nimport type { DualAxisOptions } from 'src/types/properties'\n\n/**\n * 应用图表类型到 spec\n * @param result spec 结果对象\n * @param type 图表类型\n * @param datasetReshapeInfo 数据集重塑信息\n */\nfunction applyChartType(result: ISeriesSpec, type: string, datasetReshapeInfo: any): void {\n  switch (type) {\n    case 'line': {\n      result.type = 'line'\n      break\n    }\n    case 'column': {\n      result.type = 'bar'\n      result.stack = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnParallel': {\n      const columnSpec = result as IBarSeriesSpec\n      if (Array.isArray(columnSpec.xField)) {\n        columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail)\n      } else if (columnSpec.xField) {\n        columnSpec.xField = [columnSpec.xField, datasetReshapeInfo[0].unfoldInfo.encodingDetail]\n      }\n      columnSpec.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnPercent': {\n      result.type = 'bar'\n      result.percent = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'area': {\n      result.type = 'area'\n      break\n    }\n    case 'areaPercent': {\n      result.type = 'area'\n      result.percent = true\n      break\n    }\n    case 'scatter': {\n      result.type = 'scatter'\n      break\n    }\n    default:\n      result.type = type\n  }\n}\n\nexport const dualChartType = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = { ...spec, zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } as ISeriesSpec\n    const { advancedVSeed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n\n    applyChartType(result, options.chartType, datasetReshapeInfo)\n\n    return result\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { DualAxisOptions, VChartSpecPipe } from 'src/types'\n\nexport const datasetDualAxis = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const { advancedVSeed, vseed } = context\n    const { analysis, datasetReshapeInfo } = advancedVSeed\n    const orderMapping = analysis?.orderMapping || {}\n\n    const { unfoldInfo } = datasetReshapeInfo[0]\n    const x = unfoldInfo.encodingX\n    const colorId = unfoldInfo.encodingColorId\n    const id = datasetReshapeInfo[0].id\n    const fields: Record<string, object> = {}\n\n    if (x) {\n      const order = orderMapping[x]\n      if (order) {\n        fields[x] = {\n          sortIndex: 0,\n          domain: order,\n          lockStatisticsByDomain: true,\n        }\n      } else {\n        fields[x] = {\n          sortIndex: 0,\n        }\n      }\n    }\n    if (colorId) {\n      const order = orderMapping[colorId]\n      if (order) {\n        fields[colorId] = {\n          sortIndex: 0,\n          domain: order,\n          lockStatisticsByDomain: true,\n        }\n      } else {\n        fields[colorId] = {\n          sortIndex: 0,\n        }\n      }\n    }\n\n    return {\n      ...spec,\n      data: {\n        id: `${id}-${options.axisType}-${options.chartType}`,\n        // 透视表不使用 dataValues\n        values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n        fields: fields,\n      },\n    } as ISpec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { DualAxisOptions, Encoding, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\nimport { DUAL_AXIS_LABEL_Z_INDEX } from 'src/pipeline/utils/constant'\n\nexport const labelDualAxis = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = { ...spec } as ILineChartSpec\n    const { advancedVSeed, vseed } = context\n    const { encoding } = advancedVSeed\n    const { chartType } = advancedVSeed\n    const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n    result.label = buildLabel(\n      baseConfig.label,\n      vseed.measures,\n      vseed.dimensions,\n      advancedVSeed.dimensions!,\n      advancedVSeed.measures!,\n      encoding as Encoding,\n      [options.foldInfo],\n    ) as unknown as ILineChartSpec['label']\n    ;(result.label as any)!.zIndex = DUAL_AXIS_LABEL_Z_INDEX\n    return result\n  }\n}\n","import { createDimensionContent, createMarkContent } from './tooltip'\nimport type { VChartSpecPipe, Tooltip, Measures, DualAxisOptions } from 'src/types'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltipOfDualAxisSeries = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = { ...spec }\n    const { advancedVSeed, vseed } = context\n    const {\n      measures = [],\n      datasetReshapeInfo,\n      chartType,\n      dimensions = [],\n      encoding,\n      reshapeMeasures = [],\n    } = advancedVSeed\n    const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n    const { tooltip = { enable: true } } = baseConfig\n    const { enable } = tooltip\n\n    const unfoldInfo = datasetReshapeInfo[0].unfoldInfo\n\n    result.tooltip = {\n      visible: enable,\n      mark: {\n        title: {\n          visible: false,\n        },\n        content: createMarkContent(\n          encoding.tooltip || [],\n          dimensions,\n          vseed.measures as Measures,\n          options.foldInfo,\n          unfoldInfo,\n        ),\n      },\n      dimension: {\n        title: {\n          visible: true,\n        },\n        content: createDimensionContent(\n          encoding.tooltip || [],\n          measures,\n          options.foldInfo,\n          unfoldInfo,\n          reshapeMeasures.length > 1,\n        ),\n      },\n    }\n    return result\n  }\n}\n\nexport const tooltipDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const barStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'bar') {\n      return pipe(spec, context) as IBarChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pointStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line' || spec.type === 'area') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const lineStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const areaStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'area') {\n      return pipe(spec, context) as IAreaChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ICommonChartSpec, IBarSeriesSpec } from '@visactor/vchart'\nimport { DimAxisType } from 'src/dataReshape/constant'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const adjustXField: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as ICommonChartSpec\n  const chartTypes = (spec.series ?? []).map((s: any) => (s as IBarSeriesSpec).type)\n\n  if (chartTypes.length > 1 && chartTypes.filter((type: string) => type === 'bar').length > 1) {\n    result.series!.forEach((s: any) => {\n      if (s.type === 'bar' && !Array.isArray((s as IBarSeriesSpec).xField)) {\n        // 当左右轴都是柱图的时候，带堆积的柱图增加轴类型作为分组字段，来实现左右轴柱图平行展示的效果\n        ;(s as IBarSeriesSpec).xField = [(s as IBarSeriesSpec).xField as string, DimAxisType]\n      }\n    })\n  }\n\n  return result\n}\n","import type { ILineSeriesSpec, ISpec } from '@visactor/vchart'\nimport { createNumFormatter, flatReshapeMeasures } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { createLinearFormat } from './format/linearFormat'\nimport { linearAxisStyle } from './linearAxisStyle'\nimport { FoldPrimaryMeasureValue } from 'src/dataReshape'\n\nexport const yLinearPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, reshapeMeasures = [] } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const primaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.primaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(primaryYAxis) ? primaryYAxis[index] || primaryYAxis[0] : primaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (!foldInfoList) {\n    return result\n  }\n  const primaryFoldInfoList = foldInfoList!.filter((f) => f.measureValue.startsWith(FoldPrimaryMeasureValue))\n\n  const isEmpty =\n    !primaryFoldInfoList.length || primaryFoldInfoList.every((foldInfo) => !Object.keys(foldInfo.foldMap).length)\n\n  const id = `${reshapeInfoId}-primary-axis`\n\n  const seriesId = alignTicksConfig\n    ? spec.series!.map((s) => (s as any).id)\n    : spec\n        .series!.filter((s) => ((s as ILineSeriesSpec).yField as string).startsWith(FoldPrimaryMeasureValue))\n        .map((s) => (s as any).id)\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { autoFormat, numFormat = {} } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const formatMethod = (value: string) => {\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const measures = flatReshapeMeasures(reshapeMeasures)\n  const measureIds = primaryFoldInfoList.reduce((res: string[], foldInfo) => {\n    Object.keys(foldInfo.foldMap).forEach((k) => {\n      if (!res.includes(k)) {\n        res.push(k)\n      }\n    })\n    return res\n  }, [])\n  const titleText =\n    yAxisConfig?.title?.titleText ||\n    measures\n      .filter((m) => m.encoding === 'primaryYAxis' && measureIds.includes(m.id))\n      .map((m) => m.alias ?? m.id)\n      .join(' & ')\n\n  const linearAxis = {\n    ...linearAxisStyle({\n      ...yAxisConfig,\n      orient: 'left',\n      formatMethod,\n      titleText,\n      id,\n      seriesId,\n    }),\n    visible: isEmpty ? false : (yAxisConfig?.visible ?? true),\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ILineSeriesSpec, ISpec } from '@visactor/vchart'\nimport { createNumFormatter, flatReshapeMeasures } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { createLinearFormat } from './format/linearFormat'\nimport { linearAxisStyle } from './linearAxisStyle'\nimport { FoldSecondaryMeasureValue } from 'src/dataReshape'\n\nexport const yLinearSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, reshapeMeasures = [] } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const secondaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.secondaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(secondaryYAxis) ? secondaryYAxis[index] || secondaryYAxis[0] : secondaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (!foldInfoList) {\n    return result\n  }\n\n  const secondaryFoldInfoList = foldInfoList!.filter((f) => f.measureValue.startsWith(FoldSecondaryMeasureValue))\n\n  const isEmptySecondary =\n    !secondaryFoldInfoList.length || secondaryFoldInfoList.every((foldInfo) => !Object.keys(foldInfo.foldMap).length)\n  const onlySecondary =\n    !isEmptySecondary &&\n    foldInfoList.length &&\n    foldInfoList!.every(\n      (f) => f.measureValue.startsWith(FoldSecondaryMeasureValue) || Object.keys(f.foldMap).length === 0,\n    )\n\n  const sync = {\n    axisId: `${reshapeInfoId}-primary-axis`,\n    zeroAlign: true,\n  }\n\n  const id = `${reshapeInfoId}-secondary-axis`\n  const seriesId = alignTicksConfig\n    ? spec.series!.map((s) => (s as any).id)\n    : spec\n        .series!.filter((s) => ((s as ILineSeriesSpec).yField as string).startsWith(FoldSecondaryMeasureValue))\n        .map((s) => (s as any).id)\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { autoFormat, numFormat = {} } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const formatMethod = (value: string) => {\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n  const measures = flatReshapeMeasures(reshapeMeasures)\n  const titleText =\n    yAxisConfig?.title?.titleText ||\n    measures\n      .filter((m) => m.encoding === 'secondaryYAxis')\n      .map((m) => m.alias ?? m.id)\n      .join(' & ')\n\n  const baseStyle = linearAxisStyle({\n    ...yAxisConfig,\n    orient: 'right',\n    formatMethod,\n    titleText,\n    id,\n    seriesId,\n    sync,\n  })\n\n  const linearAxis = {\n    ...baseStyle,\n    visible: isEmptySecondary ? false : (yAxisConfig?.visible ?? true),\n\n    grid: {\n      ...baseStyle.grid,\n      visible: onlySecondary ? true : yAxisConfig?.grid?.visible,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { IMarkPointSpec, ISpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, SpecPipelineContext, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { flatReshapeMeasures } from 'src/pipeline/utils'\nimport { MeasureId } from 'src/dataReshape/constant'\nimport { pickWithout } from '@visactor/vutils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfDualAxis: VChartSpecPipe = generateAnnotationPointPipe({\n  findSelectedDatas: (dataset, s, spec: ISpec, context: SpecPipelineContext) => {\n    return dataset.reduce((res: Datum[], d: Datum) => {\n      const { advancedVSeed } = context\n      const allMeasureIds = flatReshapeMeasures(advancedVSeed.reshapeMeasures ?? []).map((m) => m.id)\n      const pickedDatum = pickWithout(\n        d,\n        allMeasureIds.filter((id) => id !== d[MeasureId]),\n      )\n\n      if (selector(pickedDatum, s)) {\n        res.push(pickedDatum)\n      }\n\n      return res\n    }, [])\n  },\n  generateMarkPoint: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed } = context\n    const allMeasureIds = flatReshapeMeasures(advancedVSeed.reshapeMeasures ?? []).map((m) => m.id)\n    return spec.series?.map((s: any, index: number) => {\n      return {\n        relativeSeriesIndex: index,\n        coordinate: (data: Datum[]) => {\n          return data.find((item) => {\n            return isSubset(\n              datum,\n              item,\n              allMeasureIds.filter((id) => id !== item[MeasureId]),\n            )\n          })\n        },\n      } as IMarkPointSpec\n    })\n  },\n})\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  backgroundColor,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  pointStyle,\n  lineStyle,\n  pointStateDimensionHover,\n  progressive,\n  areaStyle,\n  barStyle,\n  verticalCrosshairRect,\n  yLinearSecondary,\n  yLinearPrimary,\n  seriesDualAxis,\n  series,\n  colorBarStyleFill,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  linearColorForDualAxis,\n  annotationAreaBand,\n  barMaxWidth,\n  barGapInGroup,\n  stackCornerRadius,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n  annotationPointOfDualAxis,\n  barStyleFilter,\n  pointStyleFilter,\n  lineStyleFilter,\n  areaStyleFilter,\n  tooltipDualAxis,\n  initDualAxis,\n  dualChartType,\n  datasetDualAxis,\n  labelDualAxis,\n  tooltipOfDualAxisSeries,\n  adjustXField,\n} from '../pipes'\n\nconst dualAxis: VChartSpecPipeline = [\n  seriesDualAxis(\n    [initDualAxis, dualChartType, datasetDualAxis, labelDualAxis, tooltipOfDualAxisSeries],\n\n    [\n      progressive,\n\n      barMaxWidth,\n      barGapInGroup,\n      stackCornerRadius,\n\n      barStyleFilter(colorBarStyleFill(barStyle)),\n      pointStyleFilter(colorPointStyleFill(pointStyle)),\n      pointStyleFilter(pointStateDimensionHover),\n      lineStyleFilter(colorLineStyleFill(lineStyle)),\n      areaStyleFilter(colorAreaStyleFill(areaStyle)),\n    ],\n  ),\n  adjustXField,\n  xBand,\n  yLinearPrimary,\n  yLinearSecondary,\n\n  colorAdapter(color, linearColorForDualAxis),\n  colorAdapter(discreteLegend, colorLegend),\n\n  backgroundColor,\n\n  verticalCrosshairRect,\n  annotationPointOfDualAxis,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n\n  tooltipDualAxis,\n]\n\nconst pivotDualAxis: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    series(\n      [initDualAxis, dualChartType, datasetDualAxis, labelDualAxis, tooltipOfDualAxisSeries],\n\n      [\n        progressive,\n\n        barMaxWidth,\n        barGapInGroup,\n        stackCornerRadius,\n\n        barStyleFilter(colorBarStyleFill(barStyle)),\n        pointStyleFilter(colorPointStyleFill(pointStyle)),\n        pointStyleFilter(pointStateDimensionHover),\n        lineStyleFilter(colorLineStyleFill(lineStyle)),\n        areaStyleFilter(colorAreaStyleFill(areaStyle)),\n      ],\n    ),\n    adjustXField,\n    xBand,\n    yLinearPrimary,\n    pivotAxisStyle(yLinearSecondary),\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    verticalCrosshairRect,\n    annotationPointOfDualAxis,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n\n    tooltipDualAxis,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const dualAxisSpecPipeline = [pivotAdapter(dualAxis, pivotDualAxis)]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColorForDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: spec.series!.map((s) => {\n      return {\n        dataId: (s as any).data.id,\n        fields: [unfoldInfo.encodingColor],\n      }\n    }),\n  }\n\n  return result\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initFunnel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IFunnelChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'funnel'\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.isTransform = true\n  result.shape = 'rect'\n  result.maxSize = '75%'\n  result.minSize = '10%'\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorFunnelStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IFunnelChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.funnel?.style) {\n        result.funnel.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const funnelStyle: VChartSpecPipe = (spec) => {\n  const result = {\n    ...spec,\n    funnel: {\n      style: {},\n    },\n  } as IFunnelChartSpec\n\n  return {\n    ...result,\n    funnel: {\n      style: {\n        cornerRadius: 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { VChartSpecPipe } from 'src/types'\nexport const funnelTransformStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const config = advancedVSeed.config?.[chartType as 'funnel']?.transform\n  return {\n    ...spec,\n    transform: {\n      style: {\n        fill: config?.backgroundColor,\n      },\n    },\n    transformLabel: {\n      visible: true,\n      style: {\n        fill: config?.textColor,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  datasetXY,\n  datasetPivot,\n  initPivot,\n  label,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsCol,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  initFunnel,\n  discreteLegend,\n  color,\n  funnelStyle,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorFunnelStyleFill,\n  pivotDiscreteLegend,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  funnelTransformStyle,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst funnel: VChartSpecPipeline = [\n  initFunnel,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  colorAdapter(discreteLegend, colorLegend),\n  colorFunnelStyleFill(funnelStyle),\n  funnelTransformStyle,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotFunnel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initFunnel,\n    addRegionPadding,\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    tooltip,\n    colorFunnelStyleFill(funnelStyle),\n    funnelTransformStyle,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const funnelSpecPipeline = [pivotAdapter(funnel, pivotFunnel)]\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis, YBandAxis } from 'src/types'\nimport { bandAxisStyle } from './bandAxisStyle'\n\nexport const heatmapBandAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const xAxisConfig = (advancedVSeed.config?.[chartType as 'heatmap']?.xAxis ?? {}) as XBandAxis\n  const yAxisConfig = (advancedVSeed.config?.[chartType as 'heatmap']?.yAxis ?? {}) as YBandAxis\n  const xBandAxis = bandAxisStyle(xAxisConfig)\n  const yBandAxis = bandAxisStyle(yAxisConfig)\n\n  xBandAxis.orient = 'bottom'\n  xBandAxis.bandPadding = 0\n  yBandAxis.orient = 'left'\n  yBandAxis.bandPadding = 0\n\n  result.axes = [xBandAxis, yBandAxis]\n\n  return result\n}\n","import { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const cellStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const cell = advancedVSeed.config?.[chartType as 'heatmap']?.cell\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n\n  return {\n    ...spec,\n    cell: {\n      style: {\n        visible: (datum: any) => {\n          return datum?.[DATUM_HIDE_KEY] !== true\n        },\n        shape: 'rect',\n        stroke: cell?.stroke,\n        lineWidth: cell?.lineWidth ?? 1,\n        fill: {\n          field: isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingColor : unfoldInfo.encodingColorId,\n          scale: 'color',\n        },\n      },\n      state: {\n        hover: {\n          shadowColor: cell?.hoverShadowColor,\n          shadowBlur: 5,\n          shadowOffsetX: 0,\n          shadowOffsetY: 0,\n        },\n      },\n    },\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltipHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions = [], encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, vseed.measures as Measures, locale, foldInfo),\n    },\n    dimension: {\n      visible: false,\n    },\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures = [],\n  locale: Locale,\n  foldInfo: FoldInfo,\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = [foldInfo].map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (v: unknown) => {\n        const { measureId, foldMap } = foldInfo\n        const datum = v as Datum\n        const id = datum[measureId] as string\n        return foldMap[id] || id\n      },\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHeatmapChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'heatmap'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = unfoldInfo.encodingY\n  result.seriesField = unfoldInfo.encodingColorId\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltipHeatmap,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  discreteLegend,\n  color,\n  colorAdapter,\n  linearColor,\n  heatmapColorLegend,\n  cellStyle,\n  pivotDiscreteLegend,\n  pivotTitle,\n  pivotAxisStyle,\n  heatmapBandAxis,\n  pivotColorLegend,\n  heatmapColorDomain,\n  brush,\n} from '../pipes'\nimport { initHeatmap } from '../pipes/init/heatmap'\n\nconst heatmap: VChartSpecPipeline = [\n  initHeatmap,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  heatmapBandAxis,\n  brush,\n  colorAdapter(discreteLegend, heatmapColorLegend),\n  cellStyle,\n  tooltipHeatmap,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotHeatmap: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initHeatmap,\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    pivotAxisStyle(heatmapBandAxis),\n    brush,\n    tooltipHeatmap,\n    cellStyle,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  heatmapColorDomain,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const heatmapSpecPipeline = [pivotAdapter(heatmap, pivotHeatmap)]\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { VChartSpecPipe } from 'src/types'\nimport { colorLegend } from './colorLegend'\nimport type { Datum, IHeatmapChartSpec } from '@visactor/vchart'\nimport { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\n\nexport const heatmapColorLegend: VChartSpecPipe = (spec, context) => {\n  const result = colorLegend(spec, context) as IHeatmapChartSpec\n\n  if (result.legends) {\n    ;(result.legends as any).customFilter = (data: Datum[], range: number[], key: string) => {\n      const min = Math.min(range[0], range[1])\n      const max = Math.max(range[0], range[1])\n      return (data ?? []).map((entry: Datum) => {\n        const val = entry[key]\n        const isHide = val - min < -1e-6 || val - max > 1e-6\n\n        entry[DATUM_HIDE_KEY] = isHide\n\n        return entry\n      })\n    }\n  }\n\n  return result\n}\n","import type { FoldInfo, PivotChartSpecPipe } from 'src/types'\n\nexport const heatmapColorDomain: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n\n  const indicators = spec.indicators\n\n  if (!indicators || !indicators.length || indicators.every((ind: any) => ind.chartSpec.color?.type !== 'linear')) {\n    return spec\n  }\n  const { datasetReshapeInfo } = advancedVSeed\n  const max = Math.max(...datasetReshapeInfo.map((d: { foldInfo: FoldInfo }) => d.foldInfo.statistics.colorMax))\n  const min = Math.min(...datasetReshapeInfo.map((d: { foldInfo: FoldInfo }) => d.foldInfo.statistics.colorMin))\n\n  indicators.forEach((ind: any) => {\n    if (ind.chartSpec.color?.type === 'linear') {\n      ind.chartSpec.color.domain = [min, max]\n    }\n  })\n\n  return spec\n}\n","import type { IHistogramChartSpec } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, FoldMeasureValue } from 'src/index'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHistogram: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IHistogramChartSpec\n\n  // 直方图默认支持明细数据\n  result.type = 'histogram'\n  result.xField = BinStartMeasureId\n  result.x2Field = BinEndMeasureId\n  result.yField = FoldMeasureValue\n  // result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.legends = {\n    visible: false,\n  }\n  result.barGap = 2\n  result.animation = true\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetHistogram: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe, XLinearAxis } from 'src/types'\nimport { createNumFormatter, isAreaPercent, isBarPercent, isColumnPercent, isPivotChart } from 'src/pipeline/utils'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape/constant'\nimport { unique } from 'remeda'\n\nexport const histogramXLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { encoding, dimensions = [], measures = [], dataset } = advancedVSeed\n  const { chartType } = vseed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.xAxis ?? {}) as XLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const { autoFormat, numFormat = {} } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const formatMethod = (value: string) => {\n    if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n      return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n    }\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = config.title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[])\n\n  const linearAxis = linearAxisStyle({\n    ...config,\n    orient: 'bottom',\n    formatMethod,\n    titleText,\n    isPivot,\n  })\n\n  linearAxis.tick.tickMode = () => {\n    const binValues: number[] = []\n\n    dataset.forEach((entry: Datum) => {\n      binValues.push((entry as any)[BinStartMeasureId] as number)\n      binValues.push((entry as any)[BinEndMeasureId] as number)\n    })\n\n    return unique(binValues)\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import { autoFormatter, createNumFormatter } from 'src/pipeline/utils'\nimport type { AdvancedVSeed, XLinearAxis } from 'src/types'\nimport { createLinearFormat } from '../pipes/axes/format/linearFormat'\n\nexport const getDefaultXFormatterOfHistogram = (advancedVSeed: AdvancedVSeed) => {\n  const { chartType, config } = advancedVSeed\n  const xConfig = config?.[chartType as 'bar']?.xAxis as XLinearAxis\n  const { autoFormat = true, numFormat = {} } = xConfig\n  const formatter = createNumFormatter(numFormat)\n  return (value: number) => createLinearFormat(value, autoFormat, numFormat, formatter)\n}\n\nexport const getDefaultValueFormatterOfHistogram = (binValueType: 'count' | 'percentage' = 'count') => {\n  return binValueType === 'percentage'\n    ? createNumFormatter({\n        type: 'percent',\n        fractionDigits: 1,\n      })\n    : (value: number | string) => autoFormatter(value)\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport type { Dimension, Dimensions, Encoding, VChartSpecPipe, Tooltip } from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, ColorEncoding, FoldMeasureValue, XEncoding } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { getDefaultValueFormatterOfHistogram, getDefaultXFormatterOfHistogram } from '../../utils/histogram'\nimport { updateMarkTooltipElement } from './tooltipElement'\n\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipHistogram: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType, dimensions = [], encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip; binValueType: 'count' | 'percentage' }\n  const { binValueType, tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(advancedVSeed)\n  const defaultValueFormatter = getDefaultValueFormatterOfHistogram(binValueType)\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n\n    updateElement: updateMarkTooltipElement,\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  encoding: Encoding,\n  dimFormatter: (value: number) => string,\n  defaultValueFormatter: (value: number | string) => string,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return defaultValueFormatter(datum?.[item.id] as string)\n    },\n  }))\n\n  const defaultContent = [\n    {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return `[${dimFormatter(+datum[BinStartMeasureId])}, ${dimFormatter(+datum[BinEndMeasureId])})`\n      },\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return defaultValueFormatter(datum[FoldMeasureValue] as string | number)\n      },\n    },\n  ]\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n","import type { ICartesianCrosshairSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { verticalCrosshairRect } from './verticalCrosshairRect'\nimport { getDefaultXFormatterOfHistogram } from '../../utils/histogram'\nimport { isArray } from '@visactor/vutils'\n\nexport const histogramVerticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = verticalCrosshairRect(spec, context)\n  if (!result.crosshair) {\n    return result\n  }\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  if (!crosshair.xField) {\n    return result\n  }\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(context.advancedVSeed)\n  crosshair.xField = {\n    ...(crosshair.xField || {}),\n    label: {\n      ...(crosshair.xField?.label || {}),\n      formatMethod: (text) => {\n        if (isArray(text)) {\n          return text\n        }\n        const binRange = `${text}`.split('~')\n        const binStart = defaultXFormatter(+binRange[0])\n        const binEnd = defaultXFormatter(+binRange[1])\n        return binRange.length === 1 ? binStart : `[${binStart}, ${binEnd})`\n      },\n    },\n  }\n\n  return result\n}\n","import type { IHistogramChartSpec, IMarkPointSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfHistogram: VChartSpecPipe = generateAnnotationPointPipe({\n  generateMarkPoint: (datum: Datum, spec) => {\n    const histogramSpec = spec as IHistogramChartSpec\n    const xField = histogramSpec.xField as string\n    const x2Field = histogramSpec.x2Field as string\n\n    return [\n      {\n        coordinate: (data: Datum[]) => {\n          const d = data.find((item) => isSubset(datum, item))\n\n          return d\n            ? {\n                ...d,\n                [xField]: (d[xField] + d[x2Field]) / 2,\n              }\n            : undefined\n        },\n      } as IMarkPointSpec,\n    ]\n  },\n})\n","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport type { KDEOptions } from '@visactor/vutils'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { kde, array } from '@visactor/vutils'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, KdeRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const kdeRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions = [], regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n  const binValueType = advancedVSeed.config[chartType as 'histogram']?.binValueType\n\n  if (!regressionLine || !regressionLine.kdeRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.kdeRegressionLine).filter((kdeLine) => kdeLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.kdeRegressionLine ?? {}) as KdeRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as KdeRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `kdeRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = kde(simpleData, {\n              bandwidth: Math.abs(viewData[0][BinEndMeasureId] - viewData[0][BinStartMeasureId]),\n            } as KDEOptions)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n\n            // 根据 binValueType 决定如何转换 KDE 密度值\n            // - 频次模式 (count): 频次 = 密度 × 样本数 × 带宽\n            // - 百分比模式 (percentage): 百分比 = 密度 × 带宽\n            const scaleR = (k: number) => {\n              if (binValueType === 'percentage') {\n                // 百分比模式：y轴是0-1的百分比，KDE密度值乘以带宽即可\n                return scaleY.scale(k * res.bandwidth)\n              } else {\n                // 频次模式：y轴是实际计数，需要乘以样本数量\n                return scaleY.scale(k * simpleData.length * res.bandwidth)\n              }\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `kdeRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  return result\n}\n","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { ecdf, array, isArray } from '@visactor/vutils'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, EcdfRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const ecdfRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions = [], regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.ecdfRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.ecdfRegressionLine).filter((ecdfLine) => ecdfLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme?.ecdfRegressionLine ?? {}) as EcdfRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as EcdfRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `ecdfRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = ecdf(simpleData)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n            const yRange = scaleY.range()\n            const y0 = yRange[0]\n            const y1 = yRange[yRange.length - 1]\n            const scaleR = (e: number) => {\n              return y0 + (y1 - y0) * e\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `ecdfRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  // add percent axis of ecdf\n  const leftAxis = result.axes?.find((v) => v.orient === 'left')\n  if (leftAxis && lineList.length) {\n    result.axes?.push({\n      visible: true,\n      orient: 'right',\n      type: 'linear',\n      base: 10,\n      min: 0,\n      max: 1,\n      domainLine: {\n        ...leftAxis.domainLine,\n      },\n      grid: {\n        visible: false,\n      },\n      tick: {\n        ...leftAxis.tick,\n      },\n      title: {\n        ...leftAxis.title,\n        visible: false,\n      },\n      label: {\n        ...leftAxis.label,\n        visible: true,\n        formatMethod: (v) => {\n          const text = isArray(v) ? v[0] : v\n          return `${(+text * 100).toFixed(1)}%`\n        },\n      },\n    })\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  label,\n  backgroundColor,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  datasetHistogram,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  initHistogram,\n  yLinear,\n  histogramVerticalCrosshairRect,\n  tooltipHistogram,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n  histogramXLinear,\n  brush,\n} from '../pipes'\n\nconst histogram: VChartSpecPipeline = [\n  initHistogram,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetHistogram,\n  progressive,\n  histogramXLinear,\n  yLinear,\n  label,\n  brush,\n  tooltipHistogram,\n  colorAdapter(discreteLegend, colorLegend),\n  histogramVerticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n]\n\nconst pivotHistogram: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initHistogram,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetHistogram,\n    progressive,\n    histogramXLinear,\n    pivotAxisStyle(yLinear),\n    brush,\n    label,\n    tooltipHistogram,\n    colorBarStyleFill(barStyle),\n    histogramVerticalCrosshairRect,\n    annotationPointOfHistogram,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    kdeRegressionLine,\n    ecdfRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const histogramSpecPipeline = [pivotAdapter(histogram, pivotHistogram)]\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'line'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initLine,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorLineStyleFill,\n  colorPointStyleFill,\n  pivotColorLegend,\n  pivotTitle,\n  pivotAxisStyle,\n  splitLine,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst line: VChartSpecPipeline = [\n  initLine,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  brush,\n  verticalCrosshairLine,\n  colorAdapter(discreteLegend, colorLegend),\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  label,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotLine: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initLine,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    brush,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    label,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const lineSpecPipeline = [pivotAdapter(line, pivotLine)]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = 0\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initPie,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  pieStyle,\n  colorPieStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n  brush,\n  dimensionLinkage,\n} from '../pipes'\n\nconst pie: VChartSpecPipeline = [\n  initPie,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  brush,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotPie: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initPie,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    brush,\n    colorPieStyleFill(pieStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    addRegionPadding,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const pieSpecPipeline = [pivotAdapter(pie, pivotPie)]\n","import type { IRadarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initRadar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRadarChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'radar'\n  result.angleField = unfoldInfo.encodingAngle\n  result.radiusField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarAngleAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'angle',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarRadiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'radius',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n    label: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, SpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  initRadar,\n  areaStyle,\n  radarAngleAxis,\n  radarRadiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst radar: VChartSpecPipeline = [\n  initRadar,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radarAngleAxis,\n  radarRadiusAxis,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  // annotationPoint,\n  // annotationVerticalLine,\n  // annotationHorizontalLine,\n  // annotationArea,\n]\n\nconst pivotRadar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRadar,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radarAngleAxis,\n    radarRadiusAxis,\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    // annotationPoint,\n    // annotationVerticalLine,\n    // annotationHorizontalLine,\n    // annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const radarSpecPipeline: SpecPipeline = [pivotAdapter(radar, pivotRadar)]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRose: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'rose'\n\n  result.angleField = unfoldInfo.encodingAngle\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRose,\n  radiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  pivotColorLegend,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n  dimensionLinkage,\n} from '../pipes'\n\nconst rose: VChartSpecPipeline = [\n  initRose,\n  stackCornerRadius,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  verticalCrosshairRect,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n]\n\nconst pivotRose: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRose,\n    addRegionPadding,\n    stackCornerRadius,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const roseSpecPipeline = [pivotAdapter(rose, pivotRose)]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRoseParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, dataset, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.angle, encoding.color)\n\n  result.type = 'rose'\n  result.angleField = [unfoldInfo.encodingAngle]\n\n  if (!sameDimensionsMode) {\n    result.angleField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.radius?.length === 1) {\n      result.angleField.pop()\n    }\n  }\n\n  result.valueField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.rose = {\n    style: {\n      stroke: '#ffffff',\n      lineWidth: 1,\n    },\n    state: {\n      hover: {\n        lineWidth: 1,\n        fillOpacity: 0.6,\n      },\n    },\n  }\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRoseParallel,\n  radiusAxis,\n  progressive,\n  pivotColorLegend,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n  dimensionLinkage,\n} from '../pipes'\n\nconst roseParallel: VChartSpecPipeline = [\n  initRoseParallel,\n  stackCornerRadius,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  verticalCrosshairRect,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotRoseParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRoseParallel,\n    addRegionPadding,\n    stackCornerRadius,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const roseParallelSpecPipeline = [pivotAdapter(roseParallel, pivotRoseParallel)]\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList } = datasetReshapeInfo[0]\n\n  result.type = 'scatter'\n  result.direction = 'vertical'\n  result.xField = foldInfoList?.[0].measureValue\n  if (foldInfoList?.[1]) {\n    result.yField = foldInfoList[1].measureValue\n  }\n\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetScatter: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const scatterSize: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as {\n    sizeRange: number | number[]\n    size?: number | number[]\n  }\n  const hasSizeEncoding = encoding?.size?.[0]\n  if (!hasSizeEncoding) {\n    return result\n  }\n\n  const size = baseConfig.size ?? baseConfig.sizeRange\n\n  result.size = {\n    type: 'linear',\n    range: Array.isArray(size) ? size : [size, size],\n  } as IScatterChartSpec['size']\n\n  result.sizeField = encoding?.size?.[0] || undefined\n\n  return result\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions!,\n    advancedVSeed.measures!,\n    encoding as Encoding,\n    foldInfoList,\n  ) as unknown as IScatterChartSpec['label']\n\n  return result\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltipScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions = [], encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfoList } = datasetReshapeInfo[0] as unknown as {\n    foldInfoList: FoldInfo[]\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, vseed.measures as Measures, locale, foldInfoList),\n      updateContent: (prev: Datum[] = []) => {\n        return uniqueBy(prev, (entry) => `${String(entry.key)}::${String(entry.value)}`)\n      },\n    },\n    dimension: {\n      visible: false,\n    },\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures = [],\n  locale: Locale,\n  foldInfoList: FoldInfo[],\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = foldInfoList.map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (v: unknown) => {\n        const { measureId, foldMap } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const id = datum[measureId] as string\n\n        return foldMap[id] ?? id\n      },\n      // key: Object.values(foldInfo.foldMap)[0],\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { ICartesianSeries, IChart, IScatterChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport {\n  array,\n  clamper,\n  regressionLinear,\n  regressionLowess,\n  regressionPolynomial,\n  regressionLogistic,\n} from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n  SpecPipelineContext,\n  LogisticRegressionLine,\n  LowessRegressionLine,\n} from 'src/types'\nimport { getAlphaByConfidenceLevel } from './common'\n\nexport const generateRegressionLinePipe = (\n  type: 'linearRegressionLine' | 'lowessRegressionLine' | 'polynomialRegressionLine' | 'logisticRegressionLine',\n  regressionFunction: (\n    arr: Datum[],\n    xAccessor: (d: Datum) => number,\n    yAccessor: (d: Datum) => number,\n    options?: any,\n  ) => {\n    confidenceInterval: (N: number) => { lower: number; upper: number; x: number }[]\n    evaluateGrid: (N: number) => { x: number; y: number }[]\n  },\n  getOptions: (lineConfig: any) => any = getDefaultRegressionOptions,\n  getMinPoints: (lineConfig: any) => number = () => 2,\n): VChartSpecPipe => {\n  return ((spec: Partial<IScatterChartSpec>, context: SpecPipelineContext): Partial<IScatterChartSpec> => {\n    const result = { ...spec }\n    const { advancedVSeed } = context\n    const { chartType, regressionLine } = advancedVSeed\n    const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n    if (!regressionLine || !regressionLine[type]) {\n      return result\n    }\n\n    const lineList = array(regressionLine[type])\n\n    if (!result.extensionMark) {\n      result.extensionMark = []\n    }\n\n    lineList.forEach((line, lineIndex) => {\n      if (line.enable === false) {\n        return\n      }\n\n      const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n      const {\n        color,\n        lineWidth,\n        lineDash,\n        text,\n        textColor,\n        textFontSize,\n        textFontWeight,\n        confidenceIntervalOpacity,\n        shadowBlur,\n        shadowColor,\n        shadowOffsetX,\n        shadowOffsetY,\n        confidenceIntervalVisible = theme.confidenceIntervalVisible,\n      } = line as LinearRegressionLine\n\n      const childrenMarks: any[] = []\n\n      ;(result.extensionMark as any[]).push({\n        type: 'group',\n        interactive: false,\n        zIndex: 500,\n        name: `${type}-${lineIndex}`,\n        layoutType: 'region-relative',\n        dataId: (spec.data as any)?.id,\n        animation: false,\n        style: {\n          data: (datum: any, ctx: any) => {\n            const vchart = ctx.vchart as IVChart\n            const chart = vchart.getChart() as IChart\n            const s = chart.getAllSeries()[0] as ICartesianSeries\n\n            if (s) {\n              const rect = s.getRegion().getLayoutRect()\n              const segments: {\n                areaPoints?: { x: number; y: number; y1: number }[]\n                linePoints: { x: number; y: number }[]\n                color: string\n              }[] = []\n\n              if (rect.width === 0 || rect.height === 0) {\n                return segments\n              }\n\n              const yClamper = clamper(0, rect.height)\n              const colorAttrOptions = s.getColorAttribute()\n              const groups: (string | undefined)[] = s.getSeriesKeys()\n              const data = s.getViewData()?.latestData as Datum[]\n              const fieldX = s.fieldX?.[0]\n              const fieldY = s.fieldY?.[0]\n\n              if (!groups.length) {\n                groups.push(undefined)\n              }\n\n              groups.forEach((group) => {\n                const groupData = data.filter((d: Datum) => d[colorAttrOptions?.field] === group)\n\n                const minPoints = getMinPoints(line)\n\n                if (groupData.length < minPoints) {\n                  return\n                }\n                const { confidenceInterval, evaluateGrid } = regressionFunction(\n                  groupData,\n                  (datum: Datum) => datum?.[fieldX],\n                  (datum: Datum) => datum?.[fieldY],\n                  getOptions?.(line),\n                )\n                const N = Math.max(3, Math.floor(groupData.length / 4))\n                const mainColor = color ?? colorAttrOptions?.scale?.scale(group)\n\n                const lineData = evaluateGrid(N)\n                const linePoints: { x: number; y: number }[] = []\n\n                lineData.forEach((ld: Datum, index: number) => {\n                  const d = { [fieldX]: ld.x, [fieldY]: ld.y }\n                  const x = s.dataToPositionX(d)!\n                  const y = yClamper(s.dataToPositionY(d)!)\n\n                  if (segments.length && index === 0) {\n                    segments[segments.length - 1].linePoints.push({ x, y: NaN }) // 断开线段用的\n                  }\n\n                  linePoints.push({\n                    x,\n                    y,\n                  })\n                })\n\n                const segment: {\n                  color: string\n                  linePoints: { x: number; y: number }[]\n                  areaPoints?: { x: number; y: number; y1: number }[]\n                } = {\n                  color: mainColor,\n                  linePoints,\n                }\n\n                if (confidenceIntervalVisible) {\n                  const intervalData = confidenceInterval(N)\n                  const areaPoints: { x: number; y: number; y1: number }[] = []\n\n                  intervalData.map((datum: Datum, index: number) => {\n                    const d = { [fieldX]: datum.x, [fieldY]: datum.lower }\n                    const x = s.dataToPositionX(d)!\n                    const y = yClamper(s.dataToPositionY(d)!)\n                    const y1 = yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!)\n\n                    if (segments.length && index === 0) {\n                      segments[segments.length - 1].areaPoints!.push({ x, y: NaN, y1: NaN }) // 断开线段用的\n                    }\n\n                    areaPoints.push({ x, y, y1 })\n                  })\n\n                  segment.areaPoints = areaPoints\n                }\n\n                segments.push(segment)\n              })\n\n              return segments\n            }\n            return []\n          },\n        },\n        children: childrenMarks,\n      })\n\n      if (confidenceIntervalVisible) {\n        childrenMarks.push({\n          type: 'area',\n          interactive: false,\n          zIndex: 500,\n          dataId: (spec.data as any)?.id,\n          style: {\n            stroke: false,\n            lineWidth: lineWidth ?? theme.lineWidth,\n            lineDash: lineDash ?? theme.lineDash,\n            fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n            fill: 'red', // vrender bug，必须要设置一个全局的fill，才会绘制\n            segments: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode) {\n                const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n\n                if (data?.length) {\n                  return data.map((d: any) => {\n                    return {\n                      points: d.areaPoints ?? [],\n                      fill: d.color,\n                    }\n                  })\n                }\n              }\n\n              return []\n            },\n          },\n        })\n      }\n\n      childrenMarks.push({\n        type: 'line',\n        interactive: false,\n        zIndex: 500,\n        animation: false,\n        dataId: (spec.data as any)?.id,\n        style: {\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          stroke: 'red', // vrender bug，必须要设置一个全局的stroke，才会绘制\n          shadowBlur: shadowBlur ?? theme.shadowBlur,\n          shadowColor: shadowColor ?? theme.shadowColor,\n          shadowOffsetX: shadowOffsetX ?? theme.shadowOffsetX,\n          shadowOffsetY: shadowOffsetY ?? theme.shadowOffsetY,\n          segments: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode) {\n              const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n              if (data?.length) {\n                return data.map((d: any) => {\n                  return {\n                    points: d.linePoints,\n                    stroke: d.color,\n                  }\n                })\n              }\n            }\n\n            return []\n          },\n        },\n      })\n\n      if (!isNullish(text)) {\n        childrenMarks.push({\n          type: 'text',\n          interactive: false,\n          zIndex: 500,\n          animation: false,\n          dataId: (spec.data as any)?.id,\n          dataKey: () => {\n            return `regressionLine-label-${lineIndex}`\n          },\n          style: {\n            textAlign: 'end',\n            fill: textColor ?? theme.textColor,\n            fontSize: textFontSize ?? theme.textFontSize,\n            fontWeight: textFontWeight ?? theme.textFontWeight,\n            text: text,\n            x: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.x\n              }\n\n              return undefined\n            },\n            y: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.y\n              }\n\n              return undefined\n            },\n          },\n        })\n      }\n    })\n\n    return result\n  }) as VChartSpecPipe\n}\n\nconst getDefaultRegressionOptions = (\n  lineConfig: PolynomialRegressionLine | LinearRegressionLine | LogisticRegressionLine | LowessRegressionLine,\n) => {\n  const alpha = getAlphaByConfidenceLevel(lineConfig?.confidenceLevel)\n  return { alpha }\n}\n\nexport const linearRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'linearRegressionLine',\n  regressionLinear,\n  getDefaultRegressionOptions,\n)\nexport const lowessRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'lowessRegressionLine',\n  regressionLowess,\n  getDefaultRegressionOptions,\n)\nexport const polynomialRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'polynomialRegressionLine',\n  regressionPolynomial,\n  (lineConfig: PolynomialRegressionLine) => {\n    return { ...getDefaultRegressionOptions(lineConfig), degree: lineConfig.degree ?? 2 }\n  },\n  (lineConfig: PolynomialRegressionLine) => (lineConfig.degree ?? 2) + 1,\n)\nexport const logisticRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'logisticRegressionLine',\n  regressionLogistic,\n  getDefaultRegressionOptions,\n)\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  yLinear,\n  backgroundColor,\n  tooltipScatter,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  verticalCrosshairLine,\n  xLinear,\n  horizontalCrosshairLine,\n  pointStateHover,\n  initScatter,\n  progressive,\n  datasetScatter,\n  linearColor,\n  colorAdapter,\n  colorPointStyleFill,\n  colorLegend,\n  pivotColorLegend,\n  labelScatter,\n  scatterSize,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  brush,\n} from '../pipes'\n\nconst scatter: VChartSpecPipeline = [\n  initScatter,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetScatter,\n  progressive,\n  xLinear,\n  yLinear,\n  brush,\n  scatterSize,\n  labelScatter,\n  tooltipScatter,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  horizontalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateHover,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n]\n\nconst pivotScatter: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initScatter,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetScatter,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yLinear),\n    brush,\n    scatterSize,\n    labelScatter,\n    tooltipScatter,\n    verticalCrosshairLine,\n    horizontalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateHover,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    linearRegressionLine,\n    lowessRegressionLine,\n    polynomialRegressionLine,\n    logisticRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const scatterSpecPipeline = [pivotAdapter(scatter, pivotScatter)]\n","/**\n * @description 适用于线图、面积图等的区块标注，计算标注区块的时候，只考虑点的大小\n */\nimport type { ICartesianSeries, ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationArea: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      positions: (data: Datum[], context: ICartesianSeries) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const maxX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n          const minY = 0\n          const maxY = regionRect.height\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const maxY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: (positionMap as any)[textPosition],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import { type ICartesianSeries, type ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationAreaBand: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      // coordinates: selectedData,\n      positions: (data: Datum[], context: ICartesianSeries & { _scaleConfig?: { bandPosition?: number } }) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const bandPosition = context?._scaleConfig?.bandPosition || 0\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldX.length ?? 0\n          const xBandWidth = xAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n          const startX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const endX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n\n          const width = endX - startX + xBandWidth\n          const middleX = (endX + startX) / 2 + xBandWidth * (0.5 - bandPosition)\n\n          const minX = middleX - width / 2\n          const maxX = middleX + width / 2\n\n          const minY = 0\n          const maxY = regionRect.height\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldY.length ?? 0\n          const yBandWidth = yAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const startY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const endY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const width = endY - startY + yBandWidth\n          const middleY = (endY + startY) / 2 + yBandWidth * (0.5 - bandPosition)\n\n          const minY = middleY - width / 2\n          const maxY = middleY + width / 2\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: positionMap[textPosition as 'bottom'],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationHorizontalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationHorizontalLine\n  const { annotationHorizontalLine } = annotation\n  const annotationHorizontalLineList = Array.isArray(annotationHorizontalLine)\n    ? annotationHorizontalLine\n    : [annotationHorizontalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n\n  const markLine = annotationHorizontalLineList.flatMap((annotationHorizontalLine) => {\n    const {\n      yValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'right',\n      textBaseline = 'bottom',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationHorizontalLine\n\n    const generateOneMarkLine = (y: string | number) => {\n      return {\n        y,\n        autoRange: true,\n        zIndex: ANNOTATION_Z_INDEX,\n        line: {\n          style: {\n            visible: lineVisible,\n            stroke: lineColor,\n            lineWidth: lineWidth,\n            lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n          },\n        },\n        label: {\n          confine: true,\n          text: text,\n          position: (positionMap as any)[textPosition || 'insideEnd'],\n          style: {\n            opacity: 0.95,\n            visible: true,\n            dy: 4,\n            stroke: textBackgroundColor,\n            lineWidth: 1,\n            textAlign: textAlign,\n            textBaseline: textBaseline,\n            fill: textColor,\n            fontSize: textFontSize,\n            fontWeight: textFontWeight,\n          },\n          labelBackground: {\n            visible: textBackgroundVisible,\n            padding: textBackgroundPadding,\n            style: {\n              opacity: 0.95,\n              dy: 4,\n              cornerRadius: textBackgroundBorderRadius,\n              fill: textBackgroundColor,\n              stroke: textBackgroundBorderColor,\n              lineWidth: textBackgroundBorderWidth,\n              fillOpacity: 1,\n            },\n          },\n        },\n        startSymbol: {\n          visible: theme?.startSymbolVisible ?? true,\n          symbolType: theme?.startSymbolType ?? 'triangleDown',\n          size: 5 + (lineWidth || 1),\n          style: {\n            dx: 3,\n            fill: lineColor,\n          },\n        },\n        endSymbol: {\n          visible: theme?.endSymbolVisible ?? false,\n          symbolType: theme?.endSymbolType ?? 'arrow',\n          size: 10 + (lineWidth || 1),\n          style: {\n            dx: -4,\n            fill: lineColor,\n          },\n        },\n      }\n    }\n    if (isArray(yValue) || isString(yValue) || isNumber(yValue)) {\n      const yValueArr = Array.isArray(yValue) ? yValue : [yValue]\n      return yValueArr.map(generateOneMarkLine)\n    }\n\n    return []\n  }) as IMarkLineSpec[]\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","import type { VChartSpecPipe } from 'src/types'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPoint: VChartSpecPipe = generateAnnotationPointPipe({})\n","import type { ISpec, IMarkPointSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, Selector, Selectors, SpecPipelineContext, VChartSpecPipe, VSeed } from 'src/types'\nimport { isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const generateAnnotationPointPipe = (options: {\n  findSelectedDatas?: (\n    dataset: Datum[],\n    selector: Selector | Selectors | undefined | null,\n    spec: ISpec,\n    context: SpecPipelineContext,\n  ) => Datum[]\n  generateMarkPoint?: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => IMarkPointSpec[] | undefined\n}) => {\n  const findSelectedDatas = options.findSelectedDatas ?? ((dataset, s) => dataset.filter((datum) => selector(datum, s)))\n  const generateMarkPoint =\n    options.generateMarkPoint ??\n    ((datum: Datum) => {\n      return [\n        {\n          coordinate: (data: Datum[]) => {\n            return data.find((item) => isSubset(datum, item))\n          },\n        },\n      ]\n    })\n\n  return ((spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    const { annotation, config } = advancedVSeed\n\n    if (!annotation || !annotation.annotationPoint) {\n      return spec\n    }\n\n    const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationPoint\n    const { annotationPoint } = annotation\n    const annotationPointList = Array.isArray(annotationPoint) ? annotationPoint : [annotationPoint]\n    const isHorizontalBar = isBarLikeChart(advancedVSeed as VSeed)\n    const defaultStyle = isHorizontalBar\n      ? {\n          textAlign: 'right',\n          textBaseline: 'middle',\n        }\n      : {\n          textAlign: 'center',\n          textBaseline: 'top',\n        }\n\n    const markPoint = annotationPointList.flatMap((annotationPoint) => {\n      const {\n        selector: selectorPoint,\n        text = '',\n        textColor = theme?.textColor ?? '#ffffff',\n        textFontSize = theme?.textFontSize ?? 12,\n        textFontWeight = theme?.textFontWeight ?? 400,\n        textAlign = defaultStyle.textAlign,\n        textBaseline = defaultStyle.textBaseline,\n        textBackgroundBorderColor = theme?.textBackgroundBorderColor,\n        textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n        textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n        textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n        textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n        textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n        offsetX = theme?.offsetX ?? 0,\n        offsetY = theme?.offsetY ?? 0,\n      } = annotationPoint\n\n      const dataset = advancedVSeed.dataset.flat()\n      const selectedData = selectorPoint ? findSelectedDatas(dataset, selectorPoint, spec, context) : []\n      const dx = -10 - (isHorizontalBar ? (textFontSize as number) : 0) // 由于vchart tag实现问题，需要设置这个强制偏移量\n      const dy = isHorizontalBar ? 0 : (textFontSize as number)\n      const markPointStyle = {\n        zIndex: ANNOTATION_Z_INDEX,\n        regionRelative: true,\n        itemLine: {\n          visible: false,\n        },\n        itemContent: {\n          offsetY,\n          offsetX,\n          confine: true,\n          text: {\n            text: text,\n            labelBackground: {\n              visible: textBackgroundVisible,\n              padding: textBackgroundPadding,\n              style: {\n                opacity: 0.95,\n                cornerRadius: textBackgroundBorderRadius ?? 4,\n                fill: textBackgroundColor,\n                stroke: textBackgroundBorderColor,\n                lineWidth: textBackgroundBorderWidth,\n                dx,\n                dy,\n              },\n            },\n          },\n          style: {\n            opacity: 0.95,\n            visible: true,\n            textAlign: textAlign,\n            textBaseline: textBaseline,\n            fill: textColor,\n            stroke: textBackgroundColor,\n            lineWidth: 1,\n            fontSize: textFontSize,\n            fontWeight: textFontWeight,\n            dx,\n            dy,\n          },\n        },\n      } as Partial<IMarkPointSpec>\n\n      return selectedData.reduce((res: IMarkPointSpec[], datum) => {\n        const marks = generateMarkPoint(datum, spec, context)\n\n        if (marks && marks.length) {\n          marks.forEach((mark) => {\n            res.push({\n              ...markPointStyle,\n              ...mark,\n            } as IMarkPointSpec)\n          })\n        }\n\n        return res\n      }, [])\n    }) as unknown as IMarkPointSpec[]\n\n    return {\n      ...spec,\n      markPoint,\n    } as ISpec\n  }) as VChartSpecPipe\n}\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationVerticalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationVerticalLine) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationVerticalLine\n  const { annotationVerticalLine } = annotation\n  const annotationVerticalLineList = Array.isArray(annotationVerticalLine)\n    ? annotationVerticalLine\n    : [annotationVerticalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n  const markLine = annotationVerticalLineList.flatMap((annotationVerticalLine) => {\n    const {\n      xValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'center',\n      textBaseline = 'top',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationVerticalLine\n\n    const generateOneMarkLine = (x: number | string) => ({\n      x,\n      autoRange: true,\n      zIndex: ANNOTATION_Z_INDEX,\n      line: {\n        style: {\n          visible: lineVisible,\n          stroke: lineColor,\n          lineStyle: lineStyle,\n          lineWidth: lineWidth,\n          lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n        },\n      },\n      label: {\n        confine: true,\n        text: text,\n        position: (positionMap as any)[textPosition || 'insideEnd'],\n        style: {\n          opacity: 0.95,\n          dx: 5,\n          visible: true,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            dx: 5,\n            cornerRadius: textBackgroundBorderRadius,\n            fill: textBackgroundColor,\n            fillOpacity: 1,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n          },\n        },\n      },\n      startSymbol: {\n        visible: theme?.startSymbolVisible ?? true,\n        symbolType: theme?.startSymbolType ?? 'triangleDown',\n        size: 5 + (lineWidth || 1),\n        style: {\n          dy: -3,\n          fill: lineColor,\n        },\n      },\n      endSymbol: {\n        visible: theme?.endSymbolVisible ?? false,\n        symbolType: theme?.endSymbolType ?? 'arrow',\n        size: 10 + (lineWidth || 1),\n        style: {\n          dy: 4,\n          fill: lineColor,\n        },\n      },\n    })\n\n    if (isArray(xValue) || isString(xValue) || isNumber(xValue)) {\n      const xValueArr = Array.isArray(xValue) ? xValue : [xValue]\n      return xValueArr.map(generateOneMarkLine)\n    }\n\n    return []\n  }) as IMarkLineSpec[]\n\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","import type { ICartesianSeries, IChart, ILineChartSpec, IVChart } from '@visactor/vchart'\nimport { array, clamper, Color as VUtilColor } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject } from 'remeda'\nimport type { AnnotationHorizontalLine, VChartSpecPipe, Color } from 'src/types'\n\ninterface SplitConfig {\n  points: { x: number; y: number }[]\n  splitCoordinate: number\n  lineStroke: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n  areaFill: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n}\n\nconst formatGradientStops = (stops: { color: string; offset: number }[]) => {\n  const firstInvalidateIndex = stops.findIndex((stop) => stop.offset < 0 || stop.offset > 1)\n\n  if (firstInvalidateIndex >= 0) {\n    if (stops[firstInvalidateIndex].offset > 1) {\n      const newStops = stops.slice(0, firstInvalidateIndex + 1)\n      newStops[newStops.length - 1].offset = 1\n\n      return newStops\n    }\n    const newStops = stops.slice(firstInvalidateIndex + 1)\n\n    newStops[0].offset = 0\n    return newStops\n  }\n\n  return stops\n}\n\nexport const splitLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { annotation, chartType, datasetReshapeInfo } = advancedVSeed\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  const splitLineConfig = array(annotation.annotationHorizontalLine).find(\n    (item) => !!(item as AnnotationHorizontalLine).splitLine,\n  ) as AnnotationHorizontalLine | undefined\n\n  const splitValue = +(splitLineConfig?.yValue as number | string)\n\n  if (Number.isNaN(splitValue) || !isNumber(splitValue)) {\n    return spec\n  }\n  const result = { ...spec } as Partial<ILineChartSpec>\n  const colorTheme = baseConfig?.color ?? {}\n  const colorConfig = {\n    positiveColor: colorTheme.positiveColor || 'red',\n    negativeColor: colorTheme.negativeColor || 'green',\n    ...(isPlainObject(splitLineConfig?.splitLine) ? splitLineConfig?.splitLine : {}),\n  }\n\n  const groupMark = {\n    type: 'group',\n    name: 'annotationHorizontalLine-splitLine',\n    zIndex: 300,\n    style: {\n      splitConfig: (datum: any, ctx: any) => {\n        const vchart = ctx.vchart as IVChart\n        const chart = vchart.getChart() as IChart\n        const lineSeries = chart.getAllSeries().find((s) => s.type === 'line' || s.type === 'area') as ICartesianSeries\n\n        if (!lineSeries) {\n          return\n        }\n        const lineMark = lineSeries.getMarkInName('line') ?? lineSeries.getMarkInName('area')\n\n        if (!lineMark) {\n          return\n        }\n        const lineGraphics = lineMark.getGraphics()\n\n        if (!lineGraphics || lineGraphics.length !== 1 || !lineGraphics[0]) {\n          return\n        }\n        const points = ((lineGraphics[0].attribute as any).points ?? []) as { x: number; y: number }[]\n\n        if ((lineGraphics[0].attribute as any).segments?.length) {\n          ;((lineGraphics[0].attribute as any).segments as any[]).forEach(\n            (seg: { points: { x: number; y: number }[] }) => {\n              seg.points.forEach((pt: { x: number; y: number }) => {\n                points.push({ x: pt.x, y: pt.y })\n              })\n            },\n          )\n        }\n\n        if (!points || !points.length) {\n          return\n        }\n        const scale = lineSeries.getYAxisHelper().getScale!(0)\n        const splitCoordinate = scale.scale(splitValue)\n        const minY = Math.min(...points.map((p) => p.y))\n        const maxY = Math.max(...points.map((p) => p.y))\n        const ratio = (splitCoordinate - minY) / (maxY - minY)\n\n        const lineStroke = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: colorConfig.positiveColor,\n              offset: ratio,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: ratio + 0.0000001,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const areaFill = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: new VUtilColor(colorConfig.positiveColor).setOpacity(0).toRGBA(),\n              offset: ratio,\n            },\n            {\n              offset: ratio + 0.0000001,\n              color: new VUtilColor(colorConfig.negativeColor).setOpacity(0).toRGBA(),\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const attrs: any = {\n          segments: null,\n          points,\n        }\n\n        if (lineGraphics[0].type === 'area') {\n          attrs.stroke = lineStroke\n          attrs.fill = areaFill\n        } else {\n          attrs.stroke = lineStroke\n        }\n\n        lineGraphics[0].setAttributes(attrs as unknown as Record<string, any>)\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        lineGraphics[0].setFinalAttributes?.(attrs)\n        const start = lineSeries.getRegion().getLayoutStartPoint()\n        const range = scale.range() as number[]\n\n        return {\n          points: points.map((entry) => ({ x: entry.x + start.x, y: entry.y + start.y })),\n          splitCoordinate: clamper(range[0], range[range.length - 1])(splitCoordinate as number) + start.y,\n          areaFill,\n          lineStroke,\n        } as SplitConfig\n      },\n    },\n    children: [\n      {\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        style: {\n          fillOpacity: 0.5,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { points, splitCoordinate } = parentNode.attribute.splitConfig as SplitConfig\n\n              return points.map((entry: { x: number; y: number }) => {\n                return {\n                  ...entry,\n                  y1: splitCoordinate,\n                }\n              })\n            }\n\n            return []\n          },\n          fill: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { areaFill } = parentNode.attribute.splitConfig as SplitConfig\n\n              return areaFill\n            }\n\n            return\n          },\n        },\n      },\n    ],\n  }\n\n  if (!result.customMark) {\n    result.customMark = []\n  }\n\n  ;(result.customMark as any[]).push(groupMark)\n\n  const seriesSpec =\n    result.type === 'line' || result.type === 'area'\n      ? result\n      : result.series?.find((s) => s.type === 'line' || s.type === 'area')\n\n  if (seriesSpec) {\n    if (!seriesSpec.point) {\n      seriesSpec.point = {}\n    }\n    if (!seriesSpec.line) {\n      seriesSpec.line = {}\n    }\n\n    if (!seriesSpec.point.style) {\n      seriesSpec.point.style = {}\n    }\n    if (!seriesSpec.line.style) {\n      seriesSpec.line.style = {}\n    }\n\n    const measureValueKey = datasetReshapeInfo[0].foldInfo.measureValue\n\n    seriesSpec.point.style.fill = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    seriesSpec.line.style.stroke = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    if (seriesSpec.label && (seriesSpec.label as any).visible && isNullish((seriesSpec.label as any).style?.fill)) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ;(seriesSpec.label as any).style = {\n        ...(seriesSpec.label as any).style,\n        fill: (datum: any) => {\n          return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n        },\n      }\n    }\n  }\n\n  return result\n}\n","import type { Datum } from 'src/types'\n\nexport const isSubset = (sub: Datum, obj: Datum, excludeMeasuresIds?: string[]) => {\n  return Object.entries(sub).every(([key, value]) => {\n    if (excludeMeasuresIds && excludeMeasuresIds.includes(key)) {\n      return false\n    }\n\n    if (typeof value === 'string') {\n      return obj[key] === value\n    }\n    if (typeof value === 'number') {\n      return obj[key] === value\n    }\n    return true\n  })\n}\n\nexport const ANNOTATION_AREA_TEXT_STYLE_BY_POSITION = {\n  top: {\n    textAlign: 'center',\n    textBaseline: 'top',\n  },\n  topRight: {\n    textAlign: 'right',\n    textBaseline: 'top',\n  },\n  topLeft: {\n    textAlign: 'left',\n    textBaseline: 'top',\n  },\n  bottom: {\n    textAlign: 'center',\n    textBaseline: 'bottom',\n  },\n  bottomLeft: {\n    textAlign: 'left',\n    textBaseline: 'bottom',\n  },\n  bottomRight: {\n    textAlign: 'right',\n    textBaseline: 'bottom',\n  },\n  left: {\n    textAlign: 'left',\n    textBaseline: 'middle',\n  },\n  right: {\n    textAlign: 'right',\n    textBaseline: 'middle',\n  },\n}\n","import type { ICartesianBandAxisSpec } from '@visactor/vchart'\nimport type { XBandAxis } from 'src/types'\nimport { AXIS_LABEL_SPACE } from 'src/pipeline/utils'\n\nexport const bandAxisStyle = (config: XBandAxis) => {\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    labelAutoHide,\n    labelAutoHideGap,\n    labelAutoLimit,\n    labelAutoLimitLength = 80,\n    labelAutoRotate,\n    labelAutoRotateAngleRange,\n  } = config\n\n  return {\n    type: 'band',\n    sampling: !(labelAutoHide || labelAutoRotate || labelAutoLimit),\n    visible,\n    hover: true,\n    label: {\n      visible: label?.visible,\n      flush: true,\n      space: AXIS_LABEL_SPACE,\n      style: {\n        maxLineWidth: labelAutoLimitLength,\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n\n      // 防重叠相关\n      minGap: labelAutoHideGap,\n      autoHide: labelAutoHide,\n      autoHideMethod: 'greedy',\n      autoHideSeparation: labelAutoHideGap,\n      autoLimit: labelAutoLimit,\n      autoRotate: labelAutoRotate,\n      autoRotateAngle: labelAutoRotateAngleRange,\n      lastVisible: true,\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText,\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n  } as Partial<ICartesianBandAxisSpec>\n}\n","import { isEmpty, isNullish } from 'remeda'\nimport { autoFormatter } from 'src/pipeline/utils'\nimport type { Formatter, NumFormat } from 'src/types'\n\nexport const createLinearFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return autoFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return autoFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n\nexport const createLinearPercentFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n  percentFormatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return percentFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return percentFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n","import type { YLinearAxis } from 'src/types'\nimport { AXIS_LABEL_SPACE, LINEAR_AXIS_INNER_OFFSET_TOP } from 'src/pipeline/utils'\n\nexport interface LinearAxisStyleConfig extends YLinearAxis {\n  orient: 'left' | 'right' | 'top' | 'bottom'\n  formatMethod?: (value: string) => string\n  titleText?: string\n  id?: string\n  seriesId?: string | string[]\n  sync?: {\n    axisId: string\n    zeroAlign: boolean\n  }\n  isPivot?: boolean\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const linearAxisStyle = (config: LinearAxisStyleConfig): any => {\n  const {\n    orient,\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n    formatMethod,\n    titleText,\n    id,\n    seriesId,\n    sync,\n    isPivot = false,\n  } = config\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const axisConfig: any = {\n    ...(isPivot\n      ? {\n          range: {\n            min,\n            max,\n          },\n        }\n      : {\n          min,\n          max,\n        }),\n    visible,\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient,\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod,\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: titleText,\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n  }\n\n  // Add innerOffset based on orientation\n  if (orient === 'bottom' || orient === 'top') {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.innerOffset = {\n      right: LINEAR_AXIS_INNER_OFFSET_TOP,\n    }\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.innerOffset = {\n      top: LINEAR_AXIS_INNER_OFFSET_TOP,\n    }\n  }\n\n  // Add optional fields\n  if (id) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.id = id\n  }\n  if (seriesId) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.seriesId = seriesId\n  }\n  if (sync) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.sync = sync\n  }\n\n  return axisConfig\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    type: 'linear',\n    orient: 'radius',\n    visible: false,\n    zero: true,\n    nice: false,\n  })\n\n  return result\n}\n","import type { Dimensions, Measure } from 'src/types'\n\nexport const defaultTitleText = (measures: Measure[], dimensions: Dimensions, idList: string[] = []) => {\n  return idList\n    .map((id) => {\n      const alias = [...measures, ...dimensions].find((f) => f.id === id)?.alias || ''\n      return alias\n    })\n    .join(' & ')\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray, isNil } from '@visactor/vutils'\nimport { bandAxisStyle } from './bandAxisStyle'\n\nexport const xBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures = [], dimensions = [], encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.xAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { labelAutoLimitLength = 80 } = config\n\n  const onlyMeasureId = (encoding.x || []).filter((v) => v !== MeasureId).length === 0\n  const bandAxis = bandAxisStyle(config)\n\n  bandAxis.orient = 'bottom'\n  bandAxis.maxHeight = labelAutoLimitLength + 60\n  bandAxis.paddingInner = [0.15, 0.1]\n  bandAxis.paddingOuter = [0.075, 0.1]\n\n  if (isNil(bandAxis.title?.text)) {\n    bandAxis.title!.text = defaultTitleText(measures, dimensions, encoding.x as string[])\n  }\n\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XLinearAxis } from 'src/types'\nimport { createNumFormatter, isAreaPercent, isBarPercent, isColumnPercent, isPivotChart } from 'src/pipeline/utils'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\n\nexport const xLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { encoding, dimensions = [], measures = [] } = advancedVSeed\n  const { chartType } = vseed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.xAxis ?? {}) as XLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const { autoFormat, numFormat = {} } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const formatMethod = (value: string) => {\n    if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n      return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n    }\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = config.title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[])\n\n  const linearAxis = linearAxisStyle({\n    ...config,\n    orient: 'bottom',\n    formatMethod,\n    titleText,\n    isPivot,\n  })\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray, isNil } from '@visactor/vutils'\nimport { bandAxisStyle } from './bandAxisStyle'\n\nexport const yBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures = [], dimensions = [], encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.yAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { labelAutoLimitLength = 80 } = config\n\n  const onlyMeasureId = (encoding.y || []).filter((v: string) => v !== MeasureId).length === 0\n\n  const bandAxis = bandAxisStyle(config)\n\n  bandAxis.type = 'band'\n  bandAxis.orient = 'left'\n  bandAxis.maxWidth = labelAutoLimitLength + 60\n  if (bandAxis.label) {\n    bandAxis.label.containerAlign = 'right'\n  }\n  bandAxis.paddingInner = [0.15, 0.1]\n  bandAxis.paddingOuter = [0.075, 0.1]\n\n  if (isNil(bandAxis.title?.text)) {\n    bandAxis.title!.text = defaultTitleText(measures, dimensions, encoding.y as string[])\n  }\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { createNumFormatter, isAreaPercent, isBarPercent, isColumnPercent, isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\n\nexport const yLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures = [], dimensions = [], encoding } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.yAxis ?? {}) as YLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const { autoFormat, numFormat = {} } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const formatMethod = (value: string) => {\n    if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n      return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n    }\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = config.title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[])\n\n  const linearAxis = linearAxisStyle({\n    ...config,\n    orient: 'left',\n    formatMethod,\n    titleText,\n    isPivot,\n  })\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { BackgroundColor, VChartSpecPipe } from 'src/types'\n\nexport const backgroundColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { backgroundColor: BackgroundColor }\n\n  const { backgroundColor } = baseConfig\n\n  return {\n    ...result,\n    background: backgroundColor,\n  }\n}\n","import { isNullish } from 'remeda'\nimport type { BarGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const barGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barGapInGroup = advancedVSeed.config?.[chartType as 'columnParallel']?.barGapInGroup as BarGapInGroup\n\n  if (!isNullish(barGapInGroup)) {\n    return {\n      ...spec,\n      barGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import { isNullish } from 'remeda'\nimport type { BarMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const barMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barMaxWidth = advancedVSeed.config?.[chartType as 'column']?.barMaxWidth as BarMaxWidth\n\n  if (!isNullish(barMaxWidth)) {\n    return {\n      ...spec,\n      barMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import type { Column, VChartSpecPipe } from 'src/types'\nimport type { BrushConfig } from 'src/types/properties/brush/zBrush'\n\nexport const brush: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as any\n  const { advancedVSeed, vseed } = context\n  const { brush = {}, chartType } = vseed as Column\n\n  const theme = (advancedVSeed.config as any)?.[chartType]?.brush ?? ({} as BrushConfig)\n\n  const enable = brush.enable ?? theme?.enable\n\n  if (enable === false) {\n    return result\n  }\n\n  result.brush = {\n    visible: true,\n    removeOnClick: brush.removeOnClick,\n    brushMode: brush?.brushMode || 'single',\n    brushType: brush?.brushType || 'rect',\n    inBrush: {\n      opacity: theme.inBrushStyle?.opacity,\n      stroke: theme.inBrushStyle?.stroke,\n      lineWidth: theme.inBrushStyle?.lineWidth,\n    },\n    outOfBrush: {\n      opacity: theme.outOfBrushStyle?.opacity,\n      stroke: theme.outOfBrushStyle?.stroke,\n      lineWidth: theme.outOfBrushStyle?.lineWidth,\n    },\n  }\n\n  if (result.label && result.label.visible !== false) {\n    if (!result.label.state) {\n      result.label.state = {}\n    }\n\n    result.label.state.outOfBrush = {\n      opacity: result.brush.outOfBrush.opacity,\n    }\n    result.label.state.inBrush = {\n      opacity: result.brush.inBrush.opacity,\n    }\n  }\n\n  return result\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const color: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const colorItems = unfoldInfo.colorItems\n  const colorIdMap = unfoldInfo.colorIdMap\n\n  const { color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  result.color = {\n    type: 'ordinal',\n    domain: colorItems,\n    range: colorScheme,\n    specified: createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems),\n  } as ILineChartSpec['color']\n  return result\n}\n\nexport const createSpecifiedForColorMapping = (\n  colorMapping?: Record<string, string>,\n  colorIdMap?: Record<string, { id: string; alias: string }>,\n  colorItems?: string[],\n) => {\n  if (!colorMapping || !colorIdMap || !colorItems) {\n    return undefined\n  }\n\n  const matchedList: string[] = []\n\n  // 名称越长优先级越高: 按名称长度降, 优先匹配名称长的, 避免一个短的名称匹配到了超多个长的\n  const colors = Object.entries(colorMapping).sort((a, b) => b[0].length - a[0].length)\n  // 准确匹配\n  const accurateMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n\n      const accurateMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey === name || colorObj.alias === name || colorObj.id === name\n      })\n      accurateMatchedList.forEach((item) => {\n        prev[item[0]] = colorValue\n        matchedList.push(name)\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 模糊匹配\n  const fuzzyMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n      if (matchedList.includes(name)) {\n        return prev\n      }\n\n      const fuzzyMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey.includes(name) || colorObj.alias.includes(name) || colorObj.id.includes(name)\n      })\n      fuzzyMatchedList.forEach((item) => {\n        // 已经匹配有值, 则不重复匹配\n        if (prev[item[0]]) {\n          return\n        }\n        prev[item[0]] = colorValue\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 合并, 准确匹配的优先级高\n  return {\n    ...fuzzyMap,\n    ...accurateMap,\n  }\n}\n","import type {\n  AdvancedVSeed,\n  PivotChartSpecPipe,\n  VChartSpecPipe,\n  VSeed,\n  Pipe,\n  SpecPipelineContext,\n  Measure,\n} from 'src/types'\n\nexport function colorAdapter(ordinalPipe: PivotChartSpecPipe, linearPipe: PivotChartSpecPipe): PivotChartSpecPipe\nexport function colorAdapter(ordinalPipe: VChartSpecPipe, linearPipe: VChartSpecPipe): VChartSpecPipe\nexport function colorAdapter<TSpec>(\n  ordinalPipe: Pipe<TSpec, SpecPipelineContext>,\n  linearPipe: Pipe<TSpec, SpecPipelineContext>,\n) {\n  return (spec: Partial<TSpec>, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    if (isLinearColor(advancedVSeed, vseed)) {\n      return linearPipe(spec, context)\n    }\n    return ordinalPipe(spec, context)\n  }\n}\n\nexport const isLinearColor = <T extends AdvancedVSeed, U extends VSeed>(advancedVSeed: T, vseed: U) => {\n  const { encoding, chartType } = advancedVSeed\n  const measureIdList = (vseed.measures || advancedVSeed.measures)!.map((measure: Measure) => measure.id)\n  const { color = [] } = encoding\n  return chartType === 'heatmap'\n    ? color!.length >= 1 && color!.every((c: string) => measureIdList.includes(c))\n    : color!.length === 1 && measureIdList.includes(color![0])\n}\n\nexport const getColorMeasureId = <T extends AdvancedVSeed, U extends VSeed>(\n  advancedVSeed: T,\n  vseed: U,\n): string | undefined => {\n  if (isLinearColor(advancedVSeed, vseed)) {\n    const { encoding } = advancedVSeed\n    const { color } = encoding\n    return color?.[0]\n  }\n  return undefined\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorAreaStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IAreaChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.area?.style) {\n        result.area.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBarStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBarChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.bar?.style) {\n        result.bar.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorLineStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.line?.style) {\n        result.line.style.stroke = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPieStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IPieChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.pie?.style) {\n        result.pie.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPointStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.point?.style) {\n        result.point.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isLinearColor } from './colorAdapter'\nimport type { VChartSpecPipe } from 'src/types/pipeline/spec/spec'\n\nexport const colorRoseStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IRoseChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.rose?.style) {\n        result.rose.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: [\n      {\n        dataId: id,\n        fields: [unfoldInfo.encodingColor],\n      },\n    ],\n  }\n\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const datasetPivot: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const records = dataset.reduce((pre, cur, index) => {\n    const id = datasetReshapeInfo[index].id\n    pre[id] = cur\n    return pre\n  }, {})\n  return {\n    ...result,\n    records: records,\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetXY: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n  const angle = unfoldInfo.encodingAngle\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetYX: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n\n  const angle = unfoldInfo.encodingAngle\n  const y = unfoldInfo.encodingY\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (y) {\n    const order = orderMapping[y]\n    if (order) {\n      fields[y] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[y] = {\n        sortIndex: 0,\n      }\n    }\n  }\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ILineSeriesSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const progressive: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as ILineSeriesSpec\n  // const { advancedVSeed } = context\n  // const { dataset = [] } = advancedVSeed\n  // const size = dataset.length\n\n  // if (size < 5000) {\n  //   return result\n  // }\n\n  result.large = false\n  result.largeThreshold = Infinity\n  result.progressiveStep = 400\n  result.progressiveThreshold = Infinity\n\n  return result\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initArea: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IAreaChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'area'\n  result.direction = 'vertical'\n  result.yField = foldInfo.measureValue\n\n  result.xField = unfoldInfo.encodingX\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n  result.yField = unfoldInfo.encodingY\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumn: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { PivotChartSpecPipe } from 'src/types'\n\nexport const initPivot: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    animation: true,\n    rows: [],\n    columns: [],\n    indicators: [],\n    records: [],\n    widthMode: 'standard',\n    autoFillWidth: true,\n    defaultHeaderColWidth: 'auto',\n    defaultColWidth: 240,\n\n    heightMode: 'standard',\n    autoFillHeight: true,\n    defaultRowHeight: 180,\n    defaultHeaderRowHeight: 'auto',\n\n    indicatorsAsCol: false,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    corner: {\n      titleOnDimension: 'row',\n    },\n    animationAppear: {\n      duration: 600,\n      type: 'all',\n      direction: 'row',\n    },\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { createFormatter, createFormatterByMeasure, DATUM_HIDE_KEY, findMeasureById } from '../../../../utils'\nimport type {\n  Datum,\n  Dimension,\n  Dimensions,\n  Encoding,\n  FoldInfo,\n  Formatter,\n  Label,\n  Measure,\n  Measures,\n  NumFormat,\n  VChartSpecPipe,\n} from 'src/types'\nimport { isNumber, merge, uniqueBy } from 'remeda'\nimport { selector } from 'src/dataSelector'\nimport { MeasureId } from 'src/dataReshape/constant'\n\nexport const label: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions!,\n    advancedVSeed.measures!,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as ILineChartSpec['label']\n\n  return result\n}\n\nexport const generateMeasureValue = (\n  value: number | string,\n  measure: Measure,\n  labelAutoFormat?: boolean,\n  numFormat: NumFormat = {},\n) => {\n  const format = merge(numFormat, measure.numFormat || measure.format)\n  const mergedMeasure = { ...measure, numFormat: format, autoFormat: labelAutoFormat || measure.autoFormat }\n\n  const formatter = createFormatterByMeasure(mergedMeasure)\n  return formatter(value)\n}\n\nexport const generateMeasurePercent = (value: number | string, sum: number, formatter: Formatter) => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const percentValue = num / sum\n  return formatter(percentValue)\n}\n\nexport const buildLabel = (\n  label: Label,\n  vseedMeasures: Measures = [],\n  vseedDimensions: Dimensions = [],\n  advancedVSeedDimensions: Dimensions,\n  advancedVSeedMeasures: Measures,\n  encoding: Encoding,\n  foldInfoList: (Pick<FoldInfo, 'measureId' | 'measureValue'> & Partial<Pick<FoldInfo, 'statistics'>>)[],\n) => {\n  const {\n    enable,\n    wrap,\n    showValue,\n    showValuePercent,\n    showDimension,\n    labelOverlap,\n    labelColorSmartInvert,\n    labelStroke,\n    labelColor,\n    labelFontSize,\n    labelFontWeight,\n    labelBackgroundColor,\n    labelPosition,\n    autoFormat,\n    numFormat = {},\n  } = label\n\n  const hasDimLabelEncoding = vseedDimensions.some((item) => encoding.label?.includes(item.id))\n\n  const labelDims = uniqueBy(\n    hasDimLabelEncoding\n      ? vseedDimensions.filter((item) => encoding.label?.includes(item.id))\n      : showDimension\n        ? advancedVSeedDimensions.filter((d) => d.id !== MeasureId && d.encoding !== 'row' && d.encoding !== 'column')\n        : [],\n    (item: Dimension) => item.id,\n  )\n\n  const labelMeas = uniqueBy(\n    vseedMeasures.filter((item) => encoding.label?.includes(item.id)),\n    (item: Measure) => item.id,\n  )\n\n  const percentFormat: NumFormat = merge(numFormat, {\n    type: 'percent',\n  } as NumFormat)\n\n  const percentFormatter = createFormatter(percentFormat)\n\n  const result = {\n    visible: enable,\n    dataFilter: (data: Datum[]) => {\n      return data.filter((entry) => {\n        return entry.data?.[DATUM_HIDE_KEY] !== true && selector(entry.data as Datum, label.selector, 'Or')\n      })\n    },\n    formatMethod: (_: unknown, datum: Datum) => {\n      const result = []\n\n      const dimLabels = labelDims.map((item: Dimension) => {\n        const id = item.id\n        return datum[id] as number | string\n      })\n\n      const meaLabels = labelMeas.map((item: Measure) =>\n        generateMeasureValue(datum[item.id] as number | string, item, autoFormat, numFormat),\n      )\n\n      result.push(...dimLabels)\n\n      foldInfoList.forEach((foldInfo) => {\n        const { measureId, measureValue, statistics } = foldInfo\n        const measure = findMeasureById(advancedVSeedMeasures, datum[measureId] as string)\n        if (measure) {\n          const measureValueLabel = generateMeasureValue(\n            datum[measureValue] as number | string,\n            measure,\n            autoFormat,\n            numFormat,\n          )\n\n          if (showValue) {\n            result.push(measureValueLabel)\n          }\n          if (showValuePercent) {\n            if (isNumber(datum['__VCHART_ARC_RATIO'])) {\n              // 饼图/环图需要使用实际占比数据\n              result.push(generateMeasurePercent(datum['__VCHART_ARC_RATIO'], 1, percentFormatter))\n            } else if (statistics && isNumber(statistics.sum)) {\n              result.push(\n                generateMeasurePercent(datum[measureValue] as number | string, statistics.sum, percentFormatter),\n              )\n            }\n          }\n        }\n      })\n\n      result.push(...meaLabels)\n\n      if (wrap) {\n        return result\n      }\n      return result.join(' ')\n    },\n    syncState: true,\n    position: labelPosition,\n    style: {\n      stroke: labelStroke,\n      fill: labelColor,\n      fontSize: labelFontSize,\n      fontWeight: labelFontWeight,\n      background: labelBackgroundColor,\n    },\n    smartInvert: labelColorSmartInvert,\n  }\n\n  if (labelColorSmartInvert) {\n    ;(result.style as any).lineWidth = 2 // label 边框线宽度，不设置这个会导致智能反色失败\n  }\n\n  if (labelOverlap) {\n    ;(result as any).overlap = {\n      hideOnHit: true,\n      clampForce: true,\n    }\n  }\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, PieLabel, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: PieLabel }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions!,\n    advancedVSeed.measures!,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as IPieChartSpec['label']\n  if (label.labelLayout) {\n    ;(result.label as any)!.layout = {\n      align: label.labelLayout,\n    }\n  }\n  return result\n}\n","import { createFormatterByMeasure, findTreeNodesBy } from 'src/pipeline/utils'\nimport type { ColorLegend, Measure, VChartSpecPipe } from 'src/types'\n\nexport const colorLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType, measures = [] } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: ColorLegend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight,\n    railBackgroundColor,\n    handlerBorderColor,\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  result.legends = {\n    type: 'color',\n    visible: enable,\n    orient,\n    position: legendPosition,\n    padding: 0,\n    field: unfoldInfo.encodingColor,\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n    rail: {\n      style: {\n        fill: railBackgroundColor,\n      },\n    },\n    handler: {\n      style: {\n        outerBorder: {\n          stroke: handlerBorderColor,\n        },\n      },\n    },\n  }\n  const colorMeasure = findTreeNodesBy<Measure>(measures, (m) => m.encoding === 'color')?.[0]\n  if (colorMeasure) {\n    const formatter = createFormatterByMeasure(colorMeasure)\n    result.legends.handlerText!.formatter = formatter\n\n    // TODO: 先注释掉图例标题，后续看需求是否需要恢复\n    // result.legends.startText = {\n    //   visible: true,\n    //   text: colorMeasure.alias || colorMeasure.id,\n    //   space: 12,\n    //   textStyle: {\n    //     fill: labelColor || labelFontColor,\n    //     fontSize: labelFontSize,\n    //     fontWeight: labelFontWeight,\n    //   },\n    // }\n  }\n  return result\n}\n","import type { Legend, VChartSpecPipe } from 'src/types'\n\nexport const discreteLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    pagerIconColor,\n    pagerIconDisableColor,\n    labelFontWeight,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n  const labelTextColor = labelColor || labelFontColor\n\n  result.legends = {\n    type: 'discrete',\n    visible: enable,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    autoPage: true,\n    orient,\n    position: legendPosition,\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelTextColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: (item) => {\n          return {\n            symbolType: shapeType,\n            size: border ? 8 : 10,\n            fillOpacity: 1,\n            opacity: 1,\n            stroke: false,\n            outerBorder: border\n              ? {\n                  stroke: item.shape.fill,\n                  distance: 3,\n                  lineWidth: 1,\n                }\n              : null,\n          }\n        },\n        state: {\n          unSelected: {\n            opacity: 0.2,\n            fillOpacity: 1, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      label: {\n        formatMethod: (value) => {\n          return unfoldInfo.colorIdMap[String(value)]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n        state: {\n          unSelected: {\n            fill: labelColor || labelFontColor, // 覆盖vchart里面的默认值\n            fillOpacity: 0.8, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n          unSelectedHover: {\n            fill: null,\n          },\n        },\n      },\n    },\n    pager: {\n      textStyle: {\n        fill: labelTextColor,\n      },\n      handler: {\n        style: {\n          fill: pagerIconColor,\n        },\n        state: {\n          disable: {\n            fill: pagerIconDisableColor,\n          },\n        },\n      },\n    },\n    padding: 0,\n  }\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColorLegend: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const max = Math.max(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMax))\n  const min = Math.min(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMin))\n  const { legend, color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    visible: enable,\n    type: 'color',\n    orient,\n    position: legendPosition,\n\n    colors: linearColorScheme || colorScheme || [],\n    value: [min, max],\n    min: min,\n    max: max,\n\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n  } as unknown\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { unique } from 'remeda'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\nimport { createSpecifiedForColorMapping } from '../color/color'\n\nexport const pivotDiscreteLegend: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const colorItems = unique(\n    datasetReshapeInfo.flatMap((d) => {\n      return d.unfoldInfo.colorItems\n    }),\n  )\n\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  const { legend, color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  const colorSpecified = createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems)\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    padding: 0,\n    visible: enable,\n    type: 'discrete',\n    orient,\n    position: legendPosition,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    data: colorItems.map((d: string, index: number) => {\n      const color = colorSpecified?.[d] ?? colorScheme?.[index % colorScheme.length]\n      return {\n        label: d,\n        shape: {\n          outerBorder: border\n            ? {\n                stroke: color,\n                distance: 3,\n                lineWidth: 1,\n              }\n            : undefined,\n          fill: color,\n        },\n      }\n    }),\n\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelColor || labelFontColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: {\n          symbolType: shapeType,\n          size: border ? 8 : 10,\n        },\n      },\n      label: {\n        formatMethod: (value: string) => {\n          return colorIdMap[value]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n        },\n      },\n    },\n  }\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { AreaStyle, Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { groupBy, isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const areaStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, datasetReshapeInfo, dataset } = advancedVSeed\n  const { areaStyle, lineStyle } = markStyle\n  const { unfoldInfo } = datasetReshapeInfo[0]\n\n  const result = {\n    ...spec,\n    area: {\n      visible: true,\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(areaStyle) || isEmpty(areaStyle)) {\n    return result\n  }\n\n  const areaStyles = (Array.isArray(areaStyle) ? areaStyle : [areaStyle]) as AreaStyle[]\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const group = unfoldInfo.encodingColorId\n\n  const areaGroups = groupBy(dataset, (d) => d[group ?? ''] as string)\n\n  const customMap = areaStyles.reduce<object>((result, style, index) => {\n    const { areaColor, areaColorOpacity, areaVisible = true } = style\n\n    const curveType = getCurveType(context.vseed, lineStyles[index]?.lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineStyles[index]?.lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          const lineData = areaGroups[datum[group ?? ''] as string]\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          curveType,\n          curveTension,\n          visible: areaVisible,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    area: {\n      ...result.area,\n      visible: true,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BarStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const barStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, dataset = [] } = advancedVSeed\n  const { barStyle } = markStyle\n\n  const showStroke = dataset.length <= 100\n\n  const result = {\n    ...spec,\n    bar: {\n      style: {\n        visible: true,\n        fillOpacity: 1,\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  } as IBarChartSpec\n\n  if (isNullish(barStyle) || isEmpty(barStyle)) {\n    return result\n  }\n\n  const barStyles = (Array.isArray(barStyle) ? barStyle : [barStyle]) as BarStyle[]\n\n  const customMap = barStyles.reduce<object>((result, style, index) => {\n    const {\n      barBorderColor,\n      barBorderStyle,\n      barBorderWidth = 1,\n      barColor,\n      barColorOpacity,\n      barBorderOpacity,\n      barRadius,\n      barVisible = true,\n    } = style\n\n    const lineDash = barBorderStyle === 'dashed' ? [5, 2] : barBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: barVisible,\n          fill: barColor,\n          fillOpacity: barColorOpacity,\n          cornerRadius: barRadius,\n          lineWidth: barBorderWidth,\n          stroke: barBorderColor,\n          strokeOpacity: barBorderOpacity,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  result.bar!.state = {\n    ...result.bar!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import { isRadar } from 'src/pipeline/utils'\nimport type { VSeed } from 'src/types'\n\nexport const getCurveType = (vseed: VSeed, lineSmooth: boolean = false): string => {\n  if (!lineSmooth) {\n    return 'linear'\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 'catmullRomClosed' : 'monotone'\n}\n\nexport const getCurveTension = (vseed: VSeed, lineSmooth: boolean = false): number => {\n  if (!lineSmooth) {\n    return 0\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 0.4 : 0\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const lineStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { lineStyle } = markStyle\n  const result = {\n    ...spec,\n    line: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(lineStyle) || isEmpty(lineStyle)) {\n    return result\n  }\n\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const customMap = lineStyles.reduce<object>((result, style, index) => {\n    const { lineColor, lineColorOpacity, lineSmooth, lineStyle, lineWidth = 2, lineVisible = true } = style\n\n    const dashSegment = lineWidth * 2\n    const dashGap = lineWidth\n\n    const lineDash =\n      lineStyle === 'dashed' ? [dashSegment, dashSegment] : lineStyle === 'dotted' ? [dashGap / 2, dashGap * 2] : [0, 0]\n\n    const curveType = getCurveType(context.vseed, lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (\n          _: Datum,\n          node: {\n            renderNode: {\n              context: {\n                data: Datum[]\n              }\n            }\n          },\n        ) => {\n          const lineData = node.renderNode.context.data\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          visible: lineVisible,\n          curveType: curveType,\n          curveTension: curveTension,\n          strokeOpacity: lineColorOpacity,\n          stroke: lineColor,\n          lineWidth: lineWidth,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    line: {\n      ...result.line,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pieStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n  const config = advancedVSeed.config?.[chartType as 'pie']\n\n  const result = {\n    ...spec,\n    pie: {\n      style: {\n        stroke: config?.backgroundColor ?? '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n    },\n  } as Required<IPieChartSpec>\n\n  if ((spec as IPieChartSpec).outerRadius) {\n    result.pie.state = {\n      hover: {\n        outerRadius: ((spec as IPieChartSpec).outerRadius as number) * 1.1,\n      },\n    }\n  }\n\n  if (config?.cornerRadius) {\n    result.pie.style!.cornerRadius = config.cornerRadius\n  }\n\n  return result\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\n\nexport const pointStateDimensionHover: VChartSpecPipe = (spec) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        dimension_hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          outerBorder: {\n            lineWidth: 4,\n            strokeOpacity: 0.25,\n            distance: 2,\n          },\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n\nexport const pointStateHover: VChartSpecPipe = (spec, context) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          stroke: (datum: Datum, context: unknown) => {\n            const field = unfoldInfo.encodingColorId\n            const color = (context as any).seriesColor(datum[field] as string)\n            return color\n          },\n          fillOpacity: 0.6,\n          lineWidth: 1,\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, PointStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const pointStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { pointStyle } = markStyle\n  const result = {\n    ...spec,\n    point: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(pointStyle) || isEmpty(pointStyle)) {\n    return result\n  }\n\n  const pointStyles = (Array.isArray(pointStyle) ? pointStyle : [pointStyle]) as PointStyle[]\n\n  const customMap = pointStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          innerBorder: {\n            stroke: pointBorderColor,\n            lineWidth: pointBorderWidth,\n            distance: (pointBorderWidth || 0) / 2,\n            lineDash: lineDash,\n          },\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    point: {\n      ...result.point,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const roseStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n\n  const result = {\n    ...spec,\n    rose: {\n      style: {},\n    },\n  } as Required<IRoseChartSpec>\n\n  return {\n    ...result,\n    rose: {\n      style: {\n        stroke: '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          lineWidth: 1,\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const percent: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.percent = true\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { DimensionLinkage, PivotChartSpecPipe } from 'src/types'\n\nexport const dimensionLinkage: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = (advancedVSeed.config?.[chartType as 'line']?.dimensionLinkage ?? {}) as DimensionLinkage\n\n  if (config.enable === false) {\n    return spec\n  }\n\n  const indicators = spec.indicators\n  const labelHoverOnAxis = {}\n  const chartSpec = (indicators as any)?.[0]?.chartSpec as ILineChartSpec\n  const crosshair = chartSpec?.crosshair as ICartesianCrosshairSpec\n\n  if (crosshair?.xField) {\n    const labelFormat = crosshair.xField.label?.formatMethod\n    ;(labelHoverOnAxis as any).bottom = {\n      visible: config.showLabel ?? crosshair.xField.label?.visible ?? true,\n      background: crosshair.xField.label?.labelBackground,\n      textStyle: crosshair.xField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n  if (crosshair?.yField) {\n    const labelFormat = crosshair.yField.label?.formatMethod\n    ;(labelHoverOnAxis as any).left = {\n      visible: config.showLabel ?? crosshair.yField.label?.visible ?? true,\n      background: crosshair.yField.label?.labelBackground,\n      textStyle: crosshair.yField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n\n  if (indicators && indicators.length) {\n    indicators.forEach((ind) => {\n      const crosshair = (ind as any)?.chartSpec?.crosshair as ICartesianCrosshairSpec\n\n      if (crosshair?.xField) {\n        crosshair.xField.label = { visible: false }\n      }\n\n      if (crosshair?.yField) {\n        crosshair.yField.label = { visible: false }\n      }\n    })\n  }\n\n  spec.chartDimensionLinkage = {\n    showTooltip: config.showTooltip ?? (chartSpec?.tooltip?.dimension?.visible as boolean) ?? true,\n    heightLimitToShowTooltipForEdgeRow: (spec.defaultRowHeight as number) / 2,\n    widthLimitToShowTooltipForEdgeColumn: (spec.defaultColWidth as number) / 2,\n    labelHoverOnAxis,\n  }\n\n  return spec\n}\n","import type {\n  PivotChartSpecPipe,\n  PivotChartSpecPipeline,\n  SpecPipe,\n  SpecPipelineContext,\n  VChartSpecPipe,\n  VChartSpecPipeline,\n} from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\nimport type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline, isPivotChart } from '../../../../utils'\n\nexport const pivotAdapter = (pipeline: VChartSpecPipeline, pivotPipeline: PivotChartSpecPipeline): SpecPipe => {\n  const adapted = ((spec: unknown, context: SpecPipelineContext) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n    if (usePivotChart) {\n      return execPipeline<PivotChartConstructorOptions, SpecPipelineContext>(\n        pivotPipeline,\n        context,\n        spec as Partial<PivotChartConstructorOptions>,\n      )\n    }\n    return execPipeline<ISpec, SpecPipelineContext>(pipeline, context, spec as Partial<ISpec>)\n  }) as VChartSpecPipe & PivotChartSpecPipe\n\n  return adapted as unknown as SpecPipe\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { isNil } from '@visactor/vutils'\nimport { MeasureId } from 'src/dataReshape'\nimport { BAND_AXIS_INNER_OFFSET_IN_PIVOT, ChartTypeEnum } from 'src/pipeline/utils/constant'\nimport type { Config, VChartSpecPipe } from 'src/types'\n\nexport const pivotAxisStyle = (axisStyle: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = axisStyle(spec, context) as ILineChartSpec\n\n    if (result.axes) {\n      const { advancedVSeed } = context\n      const { config, chartType, encoding, reshapeMeasures, datasetReshapeInfo } = advancedVSeed\n      const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n      result.axes.forEach((axis: any) => {\n        axis.domainLine = {\n          visible: false,\n        }\n\n        if (themConfig.chartGridColor && axis.grid && axis.grid.visible && axis.grid.style) {\n          axis.grid.style.stroke = themConfig.chartGridColor\n        }\n\n        if (themConfig.axisLabelColor && axis.label && axis.label.visible && axis.label.style) {\n          axis.label.style.fill = themConfig.axisLabelColor\n        }\n\n        if (axis.type === 'band') {\n          if (axis.orient === 'left' || axis.orient === 'right') {\n            axis.innerOffset = {\n              top: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              bottom: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n\n            if (\n              reshapeMeasures &&\n              reshapeMeasures.length > 1 &&\n              chartType === ChartTypeEnum.Heatmap &&\n              isNil(axis.title.text)\n            ) {\n              axis.title.visible = true\n              axis.title.text = Object.values(datasetReshapeInfo[0].foldInfo.foldMap)[0]\n            }\n          } else if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.innerOffset = {\n              left: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              right: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          }\n        } else if (axis.type === 'linear') {\n          if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.label.flush = true\n          }\n\n          if (\n            reshapeMeasures &&\n            reshapeMeasures.length > 1 &&\n            axis.title.text &&\n            encoding.color &&\n            encoding.color.length &&\n            !encoding.color.includes(MeasureId)\n          ) {\n            axis.title.visible = true\n          }\n        }\n      })\n    }\n\n    return result\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { FoldXMeasureId } from 'src/dataReshape'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColumnDimensions: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  const measures = advancedVSeed.measures ?? []\n\n  if (!dimensions) {\n    return result\n  }\n  const columnDimensions = dimensions.filter((dim) => dim.encoding === 'column')\n  const columns = columnDimensions.map((dim) => {\n    const baseConfig: any = {\n      dimensionKey: dim.id,\n      title: dim.alias ?? dim.id,\n    }\n\n    if (dim.id === FoldXMeasureId) {\n      baseConfig.headerFormat = (title: string) => {\n        const measure = measures.find((m) => m.id === title)\n\n        return measure ? (measure.alias ?? measure.id) : title\n      }\n    }\n\n    return baseConfig\n  }) as unknown\n\n  return {\n    ...result,\n    columns: columns,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { isCombination, isPivot } from 'src/pipeline/utils'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\nimport { isNullish } from 'remeda'\n\nexport const pivotGridStyle: PivotChartSpecPipe = (spec, context) => {\n  const { vseed, advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  const onlyCombination = !isPivot(vseed) && isCombination(vseed)\n\n  const result = { ...spec } as PivotChartConstructorOptions\n  const transparent = 'rgba(0,0,0,0)'\n\n  const borderColor = themConfig.borderColor ?? '#e3e5eb'\n  const bodyFontColor = themConfig.bodyFontColor ?? '#141414'\n  const headerFontColor = themConfig.headerFontColor ?? '#21252c'\n  const headerBackgroundColor = themConfig.headerBackgroundColor ?? 'rgba(0,0,0,0)'\n  const hoverHeaderBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderBackgroundColor ?? '#D9DDE4')\n  const hoverHeaderInlineBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderInlineBackgroundColor ?? '#D9DDE455')\n  const outlineBorderLineWidth = themConfig.outlineBorderLineWidth ?? 0\n  const frameCornerRadius = themConfig.frameCornerRadius ?? 0\n\n  if (!isNullish(themConfig.minChartWidth)) {\n    result.defaultColWidth = themConfig.minChartWidth!\n  }\n\n  if (!isNullish(themConfig.minChartHeight)) {\n    result.defaultRowHeight = themConfig.minChartHeight!\n  }\n\n  return {\n    ...result,\n    theme: {\n      underlayBackgroundColor: transparent,\n      bodyStyle: {\n        borderColor,\n        color: bodyFontColor,\n        borderLineWidth: (arg: { row: number; col: number; table: any }) => {\n          const noYAxis =\n            chartType === 'pie' ||\n            chartType === 'rose' ||\n            chartType === 'donut' ||\n            chartType === 'radar' ||\n            chartType === 'roseParallel'\n\n          return [\n            arg.row === 0 || (chartType === 'funnel' && arg.row === 1 && arg.table.rowCount <= 2)\n              ? outlineBorderLineWidth\n              : 1,\n            outlineBorderLineWidth,\n            0,\n            arg.col === 0 || (noYAxis && arg.col === 1 && arg.table.colCount <= 2) ? outlineBorderLineWidth : 1,\n          ]\n        },\n        bgColor: transparent,\n        hover: {\n          cellBgColor: 'transparent',\n        },\n      },\n      headerStyle: {\n        borderColor,\n        fontSize: 12,\n        // borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        borderLineWidth: (arg: { row: number; col: number }) => {\n          return [outlineBorderLineWidth, outlineBorderLineWidth, 1, arg.col === 0 ? outlineBorderLineWidth : 1]\n        },\n        color: headerFontColor,\n        textAlign: 'center',\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      rowHeaderStyle: {\n        borderColor,\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, 1, 0, outlineBorderLineWidth]\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerHeaderStyle: {\n        borderColor,\n        textAlign: 'center',\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        fontWeight: 'bold',\n        borderLineWidth: [outlineBorderLineWidth, 1, 1, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerLeftBottomCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightTopCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: 0,\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      rightFrozenStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, outlineBorderLineWidth, 0, 1]\n        },\n        frameStyle: {\n          borderLineWidth: 0,\n        },\n        hover: {\n          borderLineWidth: 0,\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightBottomCellStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n\n      bottomFrozenStyle: {\n        borderColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      selectionStyle: {\n        cellBgColor: '',\n        cellBorderColor: '',\n      },\n      frameStyle: {\n        borderColor,\n        cornerRadius: frameCornerRadius,\n        borderLineWidth: outlineBorderLineWidth,\n      },\n\n      axisStyle: {\n        leftAxisStyle: {\n          cellPaddingLeft: 10,\n        },\n        bottomAxisStyle: {\n          cellPaddingBottom: 4,\n        },\n        rightAxisStyle: {\n          cellPaddingRight: 4,\n        },\n      },\n      scrollStyle: {\n        visible: 'scrolling',\n        hoverOn: false,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const pivotHideIndicatorName: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  return {\n    ...spec,\n    hideIndicatorName: datasetReshapeInfo.length <= 1,\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline, isRectungularCoordinate } from '../../../../utils'\nimport type { Dataset, Encoding, Measures, PivotChartSpecPipe, SpecPipelineContext, VChartSpecPipe } from 'src/types'\nimport { unique } from 'remeda'\n\nexport const pivotIndicators =\n  (chartPipeline: VChartSpecPipe[]): PivotChartSpecPipe =>\n  (spec, context): Partial<PivotChartConstructorOptions> => {\n    const result = { ...spec } as PivotChartConstructorOptions\n    const { advancedVSeed } = context\n    const { datasetReshapeInfo, dataset, encoding, reshapeMeasures = [] } = advancedVSeed\n\n    const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n    const allMeasureIds = unique(datasetReshapeInfo.flatMap((d) => Object.keys(d.foldInfo.foldMap || {})))\n    const indicators = datasetReshapeInfo.map((reshapeInfo, index) => {\n      const subMeasures = (reshapeMeasures[index] || []) as Measures\n      const subMeasuresId = (reshapeMeasures[index] || []).map((d) => d.id)\n      const invalideMeasuresIds = allMeasureIds.filter((id: string) => !subMeasuresId.includes(id))\n\n      const newDataset = dataset[index] as Dataset\n      const newDatasetReshapeInfo = [\n        {\n          ...reshapeInfo,\n          unfoldInfo: { ...reshapeInfo.unfoldInfo, colorItems },\n        },\n      ]\n      const newContext: SpecPipelineContext = {\n        ...context,\n        advancedVSeed: {\n          ...advancedVSeed,\n          pivotAllDatasetReshapeInfo: datasetReshapeInfo,\n          datasetReshapeInfo: newDatasetReshapeInfo,\n          encoding: Object.keys(encoding).reduce((res, key) => {\n            res[key as keyof Encoding] = encoding[key as keyof Encoding]?.filter((e) => {\n              return !invalideMeasuresIds.includes(e)\n            }) as string[]\n\n            return res\n          }, {} as Encoding),\n          dataset: newDataset,\n        },\n      }\n\n      const chartSpec = execPipeline(chartPipeline, newContext, {})\n\n      return {\n        indicatorKey: `${reshapeInfo.id}`,\n        title: isRectungularCoordinate(advancedVSeed.chartType)\n          ? ''\n          : subMeasures.map((m) => m.alias ?? m.id).join('-'),\n        cellType: 'chart',\n        chartModule: 'vchart',\n        chartSpec: chartSpec,\n        style: {\n          padding: [1, 1, 0, 1],\n        },\n      }\n    })\n\n    return {\n      ...result,\n      indicators: indicators,\n    } as Partial<PivotChartConstructorOptions>\n  }\n\nexport const pivotIndicatorsAsRow: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: false,\n  }\n}\n\nexport const pivotIndicatorsAsCol: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: true,\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { FoldYMeasureId } from 'src/dataReshape/constant'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotRowDimensions: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  const measures = advancedVSeed.measures ?? []\n  if (!dimensions) {\n    return result\n  }\n  const rowDimensions = dimensions.filter((dim) => dim.encoding === 'row')\n  const rows = rowDimensions.map((dim) => {\n    const baseConfig: any = {\n      dimensionKey: dim.id,\n      title: dim.alias ?? dim.id,\n    }\n\n    if (dim.id === FoldYMeasureId) {\n      baseConfig.headerFormat = (title: string) => {\n        const measure = measures.find((m) => m.id === title)\n\n        return measure ? (measure.alias ?? measure.id) : title\n      }\n    }\n\n    return baseConfig\n  }) as unknown\n  return {\n    ...result,\n    rows: rows,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { FoldXMeasureId } from 'src/dataReshape'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotTitle: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n  const columns = result.columns?.filter((c) => (c as any).dimensionKey !== FoldXMeasureId)\n\n  if (columns && columns.length > 0) {\n    result.title = {\n      text: columns.map((entry: any) => entry.title).join('/'),\n      align: 'center',\n      orient: 'top',\n      padding: [2, 0, 0, 0],\n      textStyle: {\n        fontSize: themConfig.titleFontSize ?? 12,\n        fill: themConfig.titleFontColor ?? '#000',\n        fontWeight: themConfig.titleFontWeight ?? 'bold',\n      },\n    }\n  }\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const addRegionPadding: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IPieChartSpec\n\n  if (result.region && result.region.length > 0) {\n    result.region[0].padding = 10\n  }\n\n  return result\n}\n","import type { Datum } from '@visactor/vchart'\n\nexport const defaultRegressionLineColor = (datum: Datum, ctx: any, opt: any): string | undefined => {\n  const parentNode = opt.mark?._product?.parent\n  if (parentNode?.attribute?.data) {\n    return parentNode.attribute.data.color\n  }\n  return undefined\n}\n\nexport const defaultRegressionLineLabelX = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.x\n  }\n\n  return undefined\n}\n\nexport const defaultRegressionLineLabelY = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.y\n  }\n\n  return undefined\n}\n\nexport const getAlphaByConfidenceLevel = (confidenceLevel: number = 0.95) => {\n  return 1 - Math.max(Math.min(1, confidenceLevel), 0)\n}\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const stackInverse: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.stackInverse = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { FoldMeasureId } from 'src/dataReshape/constant'\nimport type { Datum, VChartSpecPipe, StackCornerRadius } from 'src/types'\n\nexport const stackCornerRadius: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const stackCornerRadius = advancedVSeed.config?.[chartType as 'column']?.stackCornerRadius as StackCornerRadius\n\n  if (chartType === 'dualAxis' && (spec as any).type !== 'bar') {\n    return spec\n  }\n\n  return {\n    ...spec,\n    stackCornerRadius: (_: unknown, datum: Datum) => {\n      if (datum && datum[datum[FoldMeasureId]] > 0) {\n        return stackCornerRadius\n      }\n\n      return 0\n    },\n  } as IBarChartSpec\n}\n","import { pipe, uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findMeasureById } from '../../../../utils'\nimport type {\n  Datum,\n  Dimensions,\n  FoldInfo,\n  Measures,\n  VChartSpecPipe,\n  TooltipConfig,\n  UnfoldInfo,\n  Dimension,\n  Measure,\n} from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltip: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const {\n    measures = [],\n    datasetReshapeInfo,\n    chartType,\n    dimensions = [],\n    encoding,\n    reshapeMeasures = [],\n  } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType as 'line'] as { tooltip: TooltipConfig }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable = true } = tooltip\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: !!enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, vseed.measures as Measures, foldInfo, unfoldInfo),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(\n        encoding.tooltip || [],\n        measures,\n        foldInfo,\n        unfoldInfo,\n        reshapeMeasures.length > 1,\n      ),\n    },\n\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n\nexport const createDimensionContent = (\n  tooltip: string[],\n  measures: Measures = [],\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n  hasMultiMeasureGroup: boolean,\n) => {\n  const { measureId, measureValue, foldMap } = foldInfo\n  const { encodingColor } = unfoldInfo\n\n  const hasMeasureTooltip = tooltip.some((d) => measures.find((item) => item.id === d))\n\n  return [\n    {\n      visible: true,\n      shapeType: 'rectRound',\n      hasShape: true,\n      key: !hasMeasureTooltip\n        ? (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[encodingColor] as string)) || ''\n\n            const colorKey = `${unfoldInfo.colorIdMap[key].alias ?? key}`\n\n            if (hasMultiMeasureGroup) {\n              const mId = (datum && (datum[measureId] as string)) || ''\n\n              return `${colorKey}-${foldMap[mId] ?? mId}`\n            }\n\n            return colorKey\n          }\n        : (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[measureId] as string)) || ''\n            return foldMap[key] ?? key\n          },\n      value: (v: unknown) => {\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    },\n  ]\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions = [],\n  measures: Measures = [],\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n  const meas = pipe(\n    measures.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Measure) => item.id),\n    uniqueBy((item: Measure) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item: Measure) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const defaultContent = {\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const { measureName } = foldInfo\n      const { encodingColor: colorName } = unfoldInfo\n\n      const datum = v as Datum\n      return (datum && (datum[measureName || colorName] as string)) || ''\n    },\n    value: (v: unknown) => {\n      const { measureId, measureValue } = foldInfo\n\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const value = datum[measureValue] as string | number\n      const id = datum[measureId] as string\n      const measure = findMeasureById(measures, id)\n      if (!measure) {\n        return String(value)\n      }\n\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }\n\n  return [...dimContent, defaultContent, ...meaContent]\n}\n","const setWholeIcon = (shapeContainer: any, color: string) => {\n  shapeContainer.style.backgroundColor = color\n  shapeContainer.style.borderColor = color\n  shapeContainer.style.width = '4px'\n  shapeContainer.style.height = '100%'\n  shapeContainer.style.display = 'inline-block'\n  shapeContainer.style.borderRadius = '2px'\n  shapeContainer.style.marginRight = '6px'\n\n  const shapeElements = shapeContainer.children\n\n  for (let i = 0; i < shapeElements.length; i++) {\n    const shapeElement = shapeElements[i]\n    const svgElement = shapeElement.children[0]\n\n    if (svgElement) {\n      svgElement.style.visibility = 'hidden'\n    }\n\n    shapeElement.style.background = 'transparent'\n    shapeElement.style.borderColor = 'transparent'\n  }\n}\n\nexport const updateTooltipElement = (tooltipElement: any, actualTooltip: any) => {\n  if (!tooltipElement || !tooltipElement.querySelector || !actualTooltip) {\n    return\n  }\n\n  const shapeContainer = tooltipElement.querySelector('.vchart-tooltip-shape-column')\n\n  if (!shapeContainer) {\n    return\n  }\n\n  if (actualTooltip.activeType === 'mark') {\n    const color = (actualTooltip.content[0].shapeFill as string) ?? 'transparent'\n\n    setWholeIcon(shapeContainer, color)\n  } else if (actualTooltip.activeType === 'dimension') {\n    shapeContainer.style.background = 'transparent'\n    shapeContainer.style.borderColor = 'transparent'\n    shapeContainer.style.width = 'auto'\n    shapeContainer.style.height = 'auto'\n    shapeContainer.style.display = 'inline-block'\n    shapeContainer.style.marginRight = '2px'\n\n    const shapeElements = shapeContainer.children\n\n    for (let i = 0; i < shapeElements.length; i++) {\n      const shapeElement = shapeElements[i]\n      const svgElement = shapeElement.children[0]\n      if (svgElement) {\n        svgElement.style.visibility = 'hidden'\n      }\n      const color = actualTooltip.content[i]?.shapeFill ?? 'transparent'\n\n      shapeElement.style.width = '4px'\n      shapeElement.style.height = '100%'\n      shapeElement.style.borderRadius = '2px'\n      shapeElement.style.marginRight = '4px'\n      shapeElement.style.backgroundColor = color\n      shapeElement.style.borderColor = color\n    }\n  }\n\n  const title = tooltipElement.querySelector('.vchart-tooltip-title')\n\n  if (title) {\n    title.style.marginBottom = '8px'\n  }\n}\n\nexport const updateMarkTooltipElement = (tooltipElement: any, actualTooltip: any) => {\n  if (!tooltipElement || !tooltipElement.querySelector || !actualTooltip) {\n    return\n  }\n\n  const shapeContainer = tooltipElement.querySelector('.vchart-tooltip-shape-column')\n\n  if (!shapeContainer) {\n    return\n  }\n\n  const color = (actualTooltip.content[0].shapeFill as string) ?? 'transparent'\n\n  setWholeIcon(shapeContainer, color)\n}\n","import type { ITooltipSpec } from '@visactor/vchart'\nimport type { TooltipConfig } from 'src/types/properties'\n\nexport const getTooltipStyle = (tooltipConfig: TooltipConfig) => {\n  return {\n    panel: {\n      padding: tooltipConfig.padding,\n      border: {\n        radius: tooltipConfig.borderRadius,\n        width: tooltipConfig.borderWidth,\n        color: tooltipConfig.borderColor,\n      },\n      backgroundColor: tooltipConfig.backgroundColor,\n    },\n    keyLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.keyColor,\n    },\n    valueLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.valueColor,\n      fontWeight: 'medium',\n    },\n    titleLabel: {\n      fontSize: tooltipConfig.fontSize,\n      lineHeight: tooltipConfig.lineHeight,\n      fontColor: tooltipConfig.titleColor,\n      fontWeight: 'bold',\n    },\n  } as ITooltipSpec['style']\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  tableThemeStyle,\n  selectionStyle,\n  titleOnDimension,\n  pivotTableBodyCell,\n} from '../pipes'\nimport { dataConfig } from '../pipes/indicators/pivotDataConfig'\n\nexport const pivotTableSpecPipeline: SpecPipeline = [\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  titleOnDimension,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  tableThemeStyle,\n  selectionStyle,\n  dataConfig,\n  pivotTableBodyCell,\n]\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const initPivotTable: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.pivotTable || {}\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    columnResizeType: 'column',\n    showColumnHeader: true,\n    showRowHeader: true,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n      renderMode: 'html',\n      confine: false,\n      parentElement: typeof document !== 'undefined' ? document.body : null,\n    },\n    corner: {\n      titleOnDimension: 'all',\n    },\n    widthAdaptiveMode: 'all',\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as PivotTableConstructorOptions\n}\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotColumns: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { encoding } = advancedVSeed\n  const dimensions = advancedVSeed.dimensionTree as Dimensions\n  const columns = dimensions.filter((item) => encoding.column?.includes(item.id))\n\n  return {\n    ...spec,\n    columns: columns.map((item) => {\n      return {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n    }),\n  } as PivotTableConstructorOptions\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotRows: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensionTree as Dimensions\n  const { encoding } = advancedVSeed\n  const rows = dimensions.filter((item) => encoding.row?.includes(item.id))\n  const allMeasures = findAllMeasures(advancedVSeed.measureTree)\n\n  return {\n    ...spec,\n    rows: rows.map((item) => {\n      const res = {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n\n      if (item.id === MeasureId) {\n        ;(res as any).headerFormat = (measureId: string) => {\n          const measure = allMeasures.find((m) => m.id === measureId)\n\n          return measure?.alias ?? measureId\n        }\n      }\n\n      return res\n    }),\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const titleOnDimension: PivotTableSpecPipe = (spec) => {\n  const { rows = [], columns = [] } = spec\n\n  return {\n    ...spec,\n    corner: {\n      titleOnDimension: (rows as any[]).length <= 1 && (columns as any[]).length >= 1 ? 'column' : 'row',\n    },\n  }\n}\n","import type { PivotChartConstructorOptions, BaseTableAPI } from '@visactor/vtable'\nimport { isNumber } from 'remeda'\nimport { intl } from 'src/i18n'\nimport { createFormatterByMeasure, findMeasureById } from 'src/pipeline/utils'\nimport type { Datum, FoldInfo, MeasureTree, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotIndicators: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { measureTree, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo } = datasetReshapeInfo[0]\n  const hasRow = ((spec as any)?.rows as any[])?.length > 0\n  const foldMapValues = Object.values(foldInfo.foldMap)\n\n  return {\n    ...spec,\n    indicatorTitle: intl.i18n`指标名称`,\n    indicatorsAsCol: hasRow,\n    hideIndicatorName: hasRow,\n    indicators: [\n      {\n        cellType: 'text',\n        indicatorKey: foldInfo.measureValue,\n        title: foldMapValues.length > 1 ? '' : foldMapValues[0],\n        width: 'auto',\n        format: fieldFormat(measureTree as MeasureTree, foldInfo as FoldInfo),\n      },\n    ] as unknown as PivotChartConstructorOptions['indicators'],\n  }\n}\n\nconst fieldFormat = (measureTree: MeasureTree, foldInfo: FoldInfo) => {\n  return (value: number | string, col?: number, row?: number, table?: BaseTableAPI) => {\n    if (!isNumber(col) || !isNumber(row) || !table) {\n      return value\n    }\n\n    const datum = table.getCellOriginRecord(col, row) as Datum[]\n    if (!datum[0]) {\n      return value\n    }\n    const { measureId: foldMeasureId } = foldInfo\n    const measureId = datum[0][foldMeasureId] as string\n    const measure = findMeasureById(measureTree, measureId)\n    const formatter = createFormatterByMeasure(measure)\n    return formatter(value)\n  }\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const rowHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).rowHeaderStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 0, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const cornerHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor\n  const hoverCellColor = themConfig.hoverHeaderBackgroundColor\n\n  ;(result.theme as ThemeLike).cornerHeaderStyle = {\n    borderColor: [borderColor, borderColor],\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellColor || undefined,\n      inlineRowBgColor: hoverInlineColor || undefined,\n      inlineColumnBgColor: hoverInlineColor || undefined,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const dataConfig: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measures = findAllMeasures(advancedVSeed.measureTree)\n\n  const aggregationRules = measures.map((measure) => ({\n    field: measure.id,\n    aggregationType: 'NONE',\n    indicatorKey: measure.id,\n  }))\n\n  return {\n    ...spec,\n    dataConfig: {\n      aggregationRules,\n    },\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { IIndicator, PivotTableConstructorOptions } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, Datum, PivotTableSpecPipe } from 'src/types'\nimport { pickBodyCellStyle } from './common'\nimport { FoldMeasureValue, MeasureId } from 'src/dataReshape'\n\nexport const pivotTableBodyCell: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as PivotTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const indicators = (spec as PivotTableConstructorOptions).indicators || []\n  const selectedPos: { col: number; row: number }[] = []\n\n  const newIndicators = indicators.map((ind) => {\n    const newInd = isString(ind)\n      ? ({\n          indicatorKey: ind,\n        } as IIndicator)\n      : ind\n\n    const { indicatorKey } = newInd\n\n    newInd.style = (datum: any) => {\n      const { dataValue, cellHeaderPaths } = datum\n      const headerPaths = [...cellHeaderPaths.colHeaderPaths, ...cellHeaderPaths.rowHeaderPaths]\n\n      const originalDatum: Datum = {\n        [indicatorKey]: dataValue,\n      }\n\n      headerPaths.forEach((path: any) => {\n        if (path.dimensionKey) {\n          originalDatum[path.dimensionKey] = path.value\n        }\n      })\n\n      if (!isNullish(originalDatum[MeasureId]) && !isNullish(originalDatum[FoldMeasureValue])) {\n        originalDatum[originalDatum[MeasureId]] = originalDatum[FoldMeasureValue]\n      }\n\n      const mergedStyle = bodyCellStyleList.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          if (selectedPos.length && selectedPos[0].col === datum?.col && selectedPos[0].row === datum?.row) {\n            // 说明重复进入了，清空历史\n            selectedPos.length = 0\n          }\n          selectedPos.push({\n            col: datum?.col,\n            row: datum?.row,\n          })\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return newInd\n  })\n  return {\n    ...spec,\n    runningConfig: {\n      ...((spec as any)?.runningConfig || {}),\n      selectedPos,\n    },\n    indicators: newIndicators,\n  } as PivotTableConstructorOptions\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { isMeasure } from 'src/pipeline/utils'\nimport type { Dimension, DimensionGroup, DimensionTree, ListTableSpecPipe } from 'src/types'\n\nexport const dimensionTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensionTree = (advancedVSeed as unknown as { dimensionTree: DimensionTree }).dimensionTree\n  const result = { ...spec } as ListTableConstructorOptions\n  const eachNode = (node: Dimension | DimensionGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Dimension, DimensionGroup>(dimensionTree, eachNode)\n\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { createFormatterByMeasure, isMeasure } from 'src/pipeline/utils'\nimport type { MeasureGroup, Measure, MeasureTree, ListTableSpecPipe, Datum } from 'src/types'\n\nexport const measureTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measureTree = (advancedVSeed as unknown as { measureTree: MeasureTree }).measureTree\n  const result = { ...spec } as ListTableConstructorOptions\n\n  const eachNode = (node: Measure | MeasureGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n        fieldFormat: fieldFormat(node),\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Measure, MeasureGroup>(measureTree, eachNode)\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst fieldFormat = (node: Measure) => {\n  const formatter = createFormatterByMeasure(node)\n\n  return (datum: Datum) => {\n    const { id } = node\n    const value = datum[id] as number | string | undefined\n    return formatter(value)\n  }\n}\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  tableThemeStyle,\n  selectionStyle,\n  tableBodyCell,\n} from '../pipes'\n\nexport const tableSpecPipeline: SpecPipeline = [\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  tableThemeStyle,\n  selectionStyle,\n  tableBodyCell,\n]\n","import type { ListTableConstructorOptions } from '@visactor/vtable'\nimport type { ListTableSpecPipe } from 'src/types'\n\nexport const initTable: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.table || {}\n\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    showHeader: true,\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n      renderMode: 'html',\n      confine: false,\n      parentElement: typeof document !== 'undefined' ? document.body : null,\n    },\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    hover: {\n      highlightMode: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as ListTableConstructorOptions\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { ListTableConstructorOptions, ColumnDefine } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, ListTableSpecPipe } from 'src/types'\nimport type { MeasureSelector, Selectors } from 'src/types/dataSelector'\nimport { pickBodyCellStyle } from './common'\nimport { preorderTraverse } from 'src/pipeline/utils/tree/traverse'\n\nexport const tableBodyCell: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as ListTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const columns = (spec as ListTableConstructorOptions).columns || []\n  const selectedPos: { col: number; row: number }[] = []\n  const setStyleOfColumn = (col: ColumnDefine) => {\n    const field = col.field as string\n    const matchedStyles = bodyCellStyleList.filter((style) => {\n      if (isNullish(style.selector)) {\n        return true\n      }\n      const selectors = array(style.selector) as Selectors\n\n      return selectors.some((selector) => {\n        return isPlainObject(selector)\n          ? isNullish(selector.field) || (selector as MeasureSelector).field === field\n          : isNumber(selector) || isString(selector)\n      })\n    })\n\n    if (!matchedStyles.length) {\n      return false\n    }\n\n    col.style = (datum: any) => {\n      const originalDatum = {\n        [field]: datum.dataValue,\n      }\n\n      const mergedStyle = matchedStyles.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          if (selectedPos.length && selectedPos[0].col === datum?.col && selectedPos[0].row === datum?.row) {\n            // 说明重复进入了，清空历史\n            selectedPos.length = 0\n          }\n          selectedPos.push({\n            col: datum?.col,\n            row: datum?.row,\n          })\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return false\n  }\n\n  preorderTraverse<ColumnDefine, 'columns'>(columns, setStyleOfColumn, 'columns')\n  ;(spec as any).runningConfig = {\n    ...((spec as any).runningConfig || {}),\n    selectedPos,\n  }\n\n  return spec as ListTableConstructorOptions\n}\n","import type { BodyCellStyle } from 'src/types'\n\nconst tableStyleMap = {\n  backgroundColor: 'bgColor',\n  textColor: 'color',\n  textFontSize: 'fontSize',\n  borderColor: 'borderColor',\n  borderLineWidth: 'borderLineWidth',\n}\n\nexport const pickBodyCellStyle = (bodyCellStyle: BodyCellStyle) => {\n  return (Object.keys(tableStyleMap) as Array<keyof typeof tableStyleMap>).reduce<Record<string, any>>((acc, key) => {\n    if (key in bodyCellStyle) {\n      acc[tableStyleMap[key]] = bodyCellStyle[key]\n    }\n\n    return acc\n  }, {})\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const bodyStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { chartType, config } = advancedVSeed\n  const themeConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themeConfig) return result\n\n  // basic\n  const borderColor = themeConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themeConfig.bodyBackgroundColor || '#fff'\n  const fontColor = themeConfig.bodyFontColor || '#1B1F23'\n  const fontSize = themeConfig.bodyFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themeConfig.hoverBodyBackgroundColor || '#bedaff'\n  const hoverInlineColor = themeConfig.hoverBodyInlineBackgroundColor || '#bedaff'\n\n  if (!result.theme) result.theme = {}\n  ;(result.theme as ThemeLike).bodyStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'right',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    color: fontColor,\n    fontSize: fontSize,\n    fontStyle: 'normal',\n    fontWeight: 'normal',\n    fontVariant: 'normal',\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const tableThemeStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n\n  ;(result.theme as ThemeLike).frameStyle = {\n    borderColor,\n    borderLineWidth: 1,\n    cornerRadius: 4,\n  }\n  result.theme.scrollStyle = {\n    visible: 'scrolling',\n    hoverOn: true,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const headerStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).headerStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'center',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 0, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const selectionStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.selectedBorderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.selectedBackgroundColor || 'rgb(224, 224, 224, 0.5)'\n\n  ;(result.theme as ThemeLike).selectionStyle = {\n    cellBorderColor: borderColor,\n    cellBorderLineWidth: 2,\n    cellBgColor: backgroundColor,\n  }\n\n  return result\n}\n","import { BoxPlotPivotIndicator } from 'src/dataReshape'\n\nexport const revisedBoxPlotFieldKey = (fieldKey: string, groupId: string, isPivotChart = true) => {\n  if (!isPivotChart) {\n    return fieldKey\n  }\n  return `${BoxPlotPivotIndicator}_${groupId}_${fieldKey}`\n}\n","import type { MeasureEncoding, Measures } from 'src/types'\nimport { type Dimensions, type DimensionGroup, type VSeed, type Measure } from 'src/types'\nimport { isPositionMeasure } from './measures'\nimport { isCommonMeasureEncoding, isMeasureTreeWithParentId } from '../advanced/chart/pipes/measures/utils'\nimport { unique } from 'remeda'\nimport { ChartTypeEnum, DEFAULT_PARENT_ID } from './constant'\n\nexport const isTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Table\n}\nexport const isPivotTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.PivotTable\n}\nexport const isRadar = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Radar\n}\nexport const isAreaPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.AreaPercent\n}\nexport const isColumnPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.ColumnPercent\n}\nexport const isBarPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.BarPercent\n}\n\nexport const isBarLikeChart = (vseed: VSeed) => {\n  return (\n    vseed.chartType === ChartTypeEnum.Bar ||\n    vseed.chartType === ChartTypeEnum.BarPercent ||\n    vseed.chartType === ChartTypeEnum.BarParallel\n  )\n}\n\nexport const isVTable = (vseed: VSeed) => {\n  return ['table', 'pivotTable'].includes(vseed.chartType)\n}\nexport const isVChart = (vseed: VSeed): boolean => {\n  return !isVTable(vseed)\n}\n\n/**\n * @description 透视图表或组合图\n * - 透视图表定义: 存在 column 或 row的 encoding\n * - 组合图表定义: 存在多组指标的情况\n * - 透视组合图表: 存在 column 或 row的 encoding 且 存在多组指标的情况\n * 上述三者都只能使用 VTable.PivotChart 绘制\n */\nexport const isPivotChart = (vseed: VSeed) => {\n  if (isVTable(vseed)) {\n    return false\n  }\n\n  if (isPivot(vseed)) {\n    return true\n  }\n\n  return isCombination(vseed)\n}\n\n/**\n * @description 存在column 或 row的encoding\n */\nexport const isPivot = (vseed: VSeed) => {\n  const { dimensions = [], measures = [] } = vseed as {\n    dimensions: Dimensions\n    measures: Measures\n  }\n\n  if (dimensions && dimensions.some((dimension) => dimension.encoding === 'row' || dimension.encoding === 'column')) {\n    return true\n  }\n\n  if (vseed.chartType === ChartTypeEnum.Scatter) {\n    const xCount = measures.filter((m: Measure) => m.encoding === 'xAxis').length\n    const yCount = measures.filter((m: Measure) => m.encoding === 'yAxis').length\n    const otherCount = measures.filter(\n      (m: Measure) =>\n        !['size', 'xAxis', 'yAxis'].includes(m.encoding as string) &&\n        !isCommonMeasureEncoding(m.encoding as MeasureEncoding),\n    ).length\n\n    /**\n     * Scatter \"matrix\" detection logic\n     *\n     * xCount:    number of measures explicitly encoded on the x-axis\n     * yCount:    number of measures explicitly encoded on the y-axis\n     * otherCount: measures that are not size/xAxis/yAxis and are not common encodings\n     *\n     * When there is at least one explicit x-axis measure (xCount > 0):\n     * - All x-encoded measures are counted as X.\n     * - Remaining measures (y-encoded + \"other\") are treated as Y variants.\n     *\n     * When there is no explicit x-axis measure (xCount === 0):\n     * - If there is at least one \"other\" measure, we treat exactly one of them as the X measure\n     *   (so finalXCount = 1), and the remaining \"other\" measures contribute to Y alongside\n     *   the explicit y-encoded measures.\n     * - Since we conceptually \"promote\" one of the other measures to X, only (otherCount - 1)\n     *   are left to be counted towards Y. Math.max(..., 0) protects against negative values\n     *   when otherCount is 0.\n     */\n    let finalXCount: number\n    let finalYCount: number\n\n    if (xCount > 0) {\n      // Explicit x-axis measures exist: X is fixed, Y aggregates y-encoded + other measures.\n      finalXCount = xCount\n      finalYCount = yCount + otherCount\n    } else {\n      // No explicit x-axis measure:\n      // - If there are \"other\" measures, treat one as X.\n      // - Remaining \"other\" measures contribute to Y, together with any y-encoded measures.\n      finalXCount = otherCount > 0 ? 1 : 0\n      finalYCount = yCount + Math.max(otherCount - 1, 0)\n    }\n    if (finalXCount > 1 || finalYCount > 1) return true\n  }\n\n  return false\n}\n\n/**\n * @description 不存在column 或 row的encoding, 但是有多组指标的情况\n */\nexport const isCombination = (vseed: VSeed) => {\n  if (isMeasureTreeWithParentId(vseed.measures)) {\n    const parentIds = vseed.measures\n      ?.filter((m: Measure) => isPositionMeasure(m, vseed.chartType))\n      .map((measure: Measure) => measure.parentId || DEFAULT_PARENT_ID)\n    return parentIds && unique(parentIds).length > 1\n  }\n\n  const { measures = [] } = vseed as {\n    measures: Measures\n    dimensions: Dimensions\n  }\n\n  const hasMeasureGroup = measures && measures.some((measure: DimensionGroup) => measure && measure.children)\n\n  return hasMeasureGroup\n}\n\nexport const isRectungularCoordinate = (chartType: string) => {\n  return (\n    [\n      ChartTypeEnum.Bar,\n      ChartTypeEnum.BarPercent,\n      ChartTypeEnum.BarParallel,\n      ChartTypeEnum.Column,\n      ChartTypeEnum.ColumnPercent,\n      ChartTypeEnum.ColumnParallel,\n      ChartTypeEnum.Line,\n      ChartTypeEnum.Area,\n      ChartTypeEnum.AreaPercent,\n      ChartTypeEnum.DualAxis,\n      ChartTypeEnum.Boxplot,\n      ChartTypeEnum.DualAxis,\n      ChartTypeEnum.Scatter,\n      ChartTypeEnum.Heatmap,\n      ChartTypeEnum.Boxplot,\n    ] as string[]\n  ).includes(chartType)\n}\n\n/**\n * 默认的双轴图图表类型配置\n */\nexport const DEFAULT_DUAL_CHART_TYPE = {\n  primary: 'column',\n  secondary: 'line',\n}\n\nexport const isDualAxisChartType = (chartType: string | undefined) => {\n  return (\n    chartType &&\n    ['column', 'columnParallel', 'columnPercent', 'line', 'area', 'areaPercent', 'scatter'].includes(chartType)\n  )\n}\n","// 标注层 z-index\nexport const ANNOTATION_Z_INDEX = 1000\n// 线性轴 顶部空隙 预留5px\nexport const LINEAR_AXIS_INNER_OFFSET_TOP = 12\n// 双轴图 柱图 ZIndex\nexport const DUAL_AXIS_CHART_COLUMN_Z_INDEX = 1000\n// 双轴图 非柱图 ZIndex\nexport const DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX = 1001\n// 双轴图 标注层 ZIndex\nexport const DUAL_AXIS_LABEL_Z_INDEX = 1002\n// 默认父级id\nexport const DEFAULT_PARENT_ID = '__DefaultParentId__'\n// 轴标签间距\nexport const AXIS_LABEL_SPACE = 8\n// 透视轴 band 类型内边距\nexport const BAND_AXIS_INNER_OFFSET_IN_PIVOT = 2\n\n// 图表类型枚举\nexport const ChartTypeEnum = {\n  Table: 'table',\n  PivotTable: 'pivotTable',\n  // cartesian\n  Line: 'line',\n  Column: 'column',\n  ColumnPercent: 'columnPercent',\n  ColumnParallel: 'columnParallel',\n  Bar: 'bar',\n  BarPercent: 'barPercent',\n  BarParallel: 'barParallel',\n  Area: 'area',\n  AreaPercent: 'areaPercent',\n  DualAxis: 'dualAxis',\n  Scatter: 'scatter',\n  // polar\n  Rose: 'rose',\n  RoseParallel: 'roseParallel',\n  Pie: 'pie',\n  Donut: 'donut',\n  Radar: 'radar',\n  // other\n  Funnel: 'funnel',\n  Heatmap: 'heatmap',\n  Boxplot: 'boxPlot',\n  Histogram: 'histogram',\n} as const\n\n// Heatmap hide cell\nexport const DATUM_HIDE_KEY = '__VSEED_HideItem__'\n","import type { Dimension, DimensionGroup } from 'src/types'\n\nexport const isDimension = (dimension: Dimension | DimensionGroup): dimension is Dimension => {\n  return !('children' in dimension)\n}\n\nexport const isDimensionGroup = (dimension: Dimension | DimensionGroup): dimension is DimensionGroup => {\n  return 'children' in dimension\n}\n\n// export const isDimensions = (dimensions: Dimension[] | DimensionGroup[]): dimensions is Dimension[] => {\n//   return dimensions.every(isDimension)\n// }\n","import type { Formatter, Locale, NumFormat } from 'src/types'\nimport { autoNumFormatter, createNumFormatter } from './createNumFormatter'\nimport { intl } from 'src/i18n'\n\nexport const createFormatter = (format: Partial<NumFormat>, locale?: Locale): Formatter => {\n  return createNumFormatter(format, locale)\n}\n\nexport const autoFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  return autoNumFormatter(value, locale)\n}\n","import type { Formatter, Measure } from 'src/types'\nimport { autoFormatter, createFormatter } from './createFormatter'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const createFormatterByMeasure = (measure?: Measure): Formatter => {\n  if (!measure) {\n    return (v) => String(v)\n  }\n  const { numFormat, format, autoFormat } = measure\n\n  const formatterFormat = numFormat || format || {}\n\n  if (autoFormat === true) {\n    return autoFormatter\n  }\n\n  if (isNullish(autoFormat) && isEmpty(formatterFormat)) {\n    return autoFormatter\n  }\n\n  if (!isEmpty(formatterFormat)) {\n    return createFormatter(formatterFormat)\n  }\n\n  return (v) => String(v)\n}\n","import { isNumber } from 'remeda'\nimport { intl } from '../../../i18n'\nimport type { Formatter, Locale, NumFormat } from 'src/types'\n\nexport const createNumFormatter = (format?: Partial<NumFormat>, locale: Locale = intl.getLocale()): Formatter => {\n  const {\n    type = 'number',\n    ratio = 1,\n    thousandSeparator = true,\n    prefix = '',\n    suffix = '',\n    symbol = '',\n    fractionDigits = 2,\n    significantDigits,\n    roundingMode = 'halfExpand',\n    roundingPriority = 'auto',\n  } = format || {}\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: type === 'scientific' ? 'scientific' : 'standard',\n    // @ts-expect-error roundingMode is not in NumberFormatOptions\n    roundingMode,\n    roundingPriority,\n  }\n\n  if (isNumber(fractionDigits)) {\n    if (fractionDigits >= 0) {\n      numFormatterOptions.minimumFractionDigits = fractionDigits\n      numFormatterOptions.maximumFractionDigits = fractionDigits\n    }\n  }\n  if (isNumber(significantDigits) && significantDigits > 0) {\n    if (significantDigits > 0) {\n      numFormatterOptions.minimumSignificantDigits = significantDigits\n      numFormatterOptions.maximumSignificantDigits = significantDigits\n    }\n  }\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions, useGrouping: thousandSeparator })\n\n  return (value?: number | string) => {\n    let num = Number(value)\n    let typeSymbol = ''\n    if (Number.isNaN(num)) {\n      return String(value)\n    }\n\n    // apply ratio for percent/permille\n    if (type === 'percent') {\n      num *= 100\n      typeSymbol = '%'\n    } else if (type === 'permille') {\n      num *= 1000\n      typeSymbol = '‰'\n    } else if (type === 'number') {\n      num = num / (ratio || 1)\n    }\n\n    // format value\n    let numStr = numFormatter.format(num)\n\n    // add thousand separator\n    if (thousandSeparator) {\n      const parts = numStr.split('.')\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n      numStr = parts.join('.')\n    }\n\n    const validSymbol = symbol ?? ''\n\n    // add symbol, typeSymbol, prefix and suffix\n    return `${prefix}${numStr}${typeSymbol}${validSymbol}${suffix}`\n  }\n}\n\nexport const autoNumFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: 'compact',\n    useGrouping: true,\n  }\n  numFormatterOptions.minimumFractionDigits = 0\n  numFormatterOptions.maximumFractionDigits = 2\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions })\n\n  return numFormatter.format(Number(value))\n}\n","import type { Measure, MeasureTree } from 'src/types'\nimport { preorderTraverse } from '../tree'\n\nexport const findMeasureById = (measures: MeasureTree = [], id: string): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      if (node.id === id) {\n        result = node\n        return true\n      }\n    }\n    return false\n  })\n  return result\n}\n\nexport const findFirstMeasure = (measures: MeasureTree = []): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result = node\n      return true\n    }\n    return false\n  })\n  return result\n}\n\nexport const findAllMeasures = (measures: MeasureTree = []): Measure[] => {\n  if (!measures) return []\n  const result: Measure[] = []\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result.push(node)\n    }\n    return false\n  })\n  return result\n}\n\nexport const hasMultipleMeasureInSingleView = (reshapeMeasures: Measure[][]): boolean => {\n  return reshapeMeasures.some((m) => m.length > 1)\n}\n\nexport const flatReshapeMeasures = (reshapeMeasures: Measure[][]) => {\n  return reshapeMeasures.flat()\n}\n","import type { Measure, MeasureGroup } from 'src/types'\nimport { ChartTypeEnum } from '../constant'\n\nexport const isMeasure = (measure: Measure | MeasureGroup): measure is Measure => {\n  return !('children' in measure)\n}\n\nexport const isMeasureGroup = (measure: Measure | MeasureGroup): measure is MeasureGroup => {\n  return 'children' in measure\n}\n\nexport const isMeasures = (measures: Measure[] | MeasureGroup[]): measures is Measure[] => {\n  return measures.every(isMeasure)\n}\n\nexport const isPositionMeasure = (measure: Measure, chartType: string): boolean => {\n  if (!measure.encoding) {\n    return true\n  }\n\n  if (chartType === ChartTypeEnum.Funnel) {\n    return measure.encoding === 'size'\n  }\n\n  if (chartType === ChartTypeEnum.Heatmap) {\n    return measure.encoding === 'color'\n  }\n\n  if (\n    ([ChartTypeEnum.Pie, ChartTypeEnum.Donut, ChartTypeEnum.Rose, ChartTypeEnum.RoseParallel] as string[]).includes(\n      chartType,\n    )\n  ) {\n    return measure.encoding === 'angle'\n  }\n\n  if (chartType === ChartTypeEnum.DualAxis) {\n    return ['primaryYAxis', 'secondaryYAxis'].includes(measure.encoding as string)\n  }\n\n  if (ChartTypeEnum.Radar === chartType) {\n    return measure.encoding === 'radius'\n  }\n\n  if (\n    (\n      [\n        ChartTypeEnum.Line,\n        ChartTypeEnum.Area,\n        ChartTypeEnum.AreaPercent,\n        ChartTypeEnum.Column,\n        ChartTypeEnum.ColumnParallel,\n        ChartTypeEnum.ColumnPercent,\n      ] as string[]\n    ).includes(chartType)\n  ) {\n    return measure.encoding === 'yAxis'\n  }\n\n  if (([ChartTypeEnum.Bar, ChartTypeEnum.BarParallel, ChartTypeEnum.BarPercent] as string[]).includes(chartType)) {\n    return measure.encoding === 'xAxis'\n  }\n\n  return chartType === ChartTypeEnum.Boxplot && measure.encoding === 'value'\n}\n","import type { ExecPipelineType, Pipe } from 'src/types'\n\n/**\n * 执行pipeline, 每个pipe负责构建结果的一部分, 构建完成后得到完整的目标结果\n * @param pipeline pipeline数组, 每个pipe负责构建结果的一部分\n * @param initialValue 初始值\n * @param context 上下文\n * @returns 执行后的结果\n */\nexport const execPipeline: ExecPipelineType = <T, U>(\n  pipeline: Array<Pipe<T, U>>,\n  context: U,\n  initialValue: Partial<T> = {},\n): T => {\n  const result = pipeline.reduce((prev, cur) => {\n    return cur(prev, context)\n  }, initialValue)\n  return result as T\n}\n","import { isPlainObject, mapValues, pipe } from 'remeda'\n\n// 递归类型，将所有 null 替换为 undefined\ntype NullToUndefined<T> = T extends null\n  ? undefined\n  : T extends (infer U)[]\n    ? NullToUndefined<U>[]\n    : T extends object\n      ? { [K in keyof T]: NullToUndefined<T[K]> }\n      : T\n\nexport const replaceNullToUndefined = <T>(obj: T): NullToUndefined<T> => {\n  if (obj === null) {\n    return undefined as NullToUndefined<T>\n  }\n  if (Array.isArray(obj)) {\n    // 递归处理数组元素\n    return obj.map(replaceNullToUndefined) as NullToUndefined<T>\n  }\n  if (isPlainObject(obj)) {\n    // 使用 remeda 的 mapValues 递归处理对象属性\n    return pipe(\n      obj as object,\n      mapValues((value) => replaceNullToUndefined(value)),\n    ) as NullToUndefined<T>\n  }\n  return obj as NullToUndefined<T>\n}\n","/**\n * 支持泛型与可配置子节点键名的非递归前序遍历\n * @param tree 根节点数组\n * @param callback 遍历时对每个节点执行的回调，返回 true 时停止遍历\n * @param childrenKey 子节点键名（默认 'children'）\n */\ntype WithChildren<Node, K extends string> = Node & { [P in K]?: Node[] }\n\nexport const preorderTraverse = <Node, K extends string = 'children'>(\n  tree: Node[],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n) => {\n  if (!tree || tree.length === 0) return\n\n  const stack: Node[] = [...tree].reverse()\n\n  while (stack.length > 0) {\n    const node = stack.pop() as Node\n    const stop = callback(node)\n    if (stop === true) {\n      return\n    }\n\n    const children = (node as WithChildren<Node, K>)[childrenKey]\n    if (Array.isArray(children) && children.length > 0) {\n      for (let i = children.length - 1; i >= 0; i--) {\n        const child = children[i]\n        stack.push(child)\n      }\n    }\n  }\n}\n\nexport const findTreeNodesBy = <Node, K extends string = 'children'>(\n  nodes: Node[] = [],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n): Node[] => {\n  if (!nodes) return []\n  const result: Node[] = []\n  preorderTraverse<Node, K>(nodes, (node) => {\n    if (!(childrenKey in (node as WithChildren<Node, K>))) {\n      if (callback(node)) {\n        result.push(node)\n      }\n    }\n    return false\n  })\n  return result\n}\n","import { isEmpty } from 'remeda'\nimport type { VSeed } from 'src/types'\n\nexport const checkVSeed = (vseed: VSeed) => {\n  const { chartType, dataset, dimensions, measures } = vseed\n  if (!chartType) {\n    throw new Error('chartType is required')\n  }\n  if (!dataset || isEmpty(dataset)) {\n    throw new Error('dataset is required, and must be an array')\n  }\n  if (dimensions && !Array.isArray(dimensions)) {\n    throw new Error('dimensions must be an array')\n  }\n  if (measures && !Array.isArray(measures)) {\n    throw new Error('measures must be an array')\n  }\n}\n","import type {\n  AnnotationAreaConfig,\n  AnnotationHorizontalLineConfig,\n  AnnotationPointConfig,\n} from 'src/types/properties/config/annotation/annotation'\n\nexport const getDefaultAnnotationPoint = (): AnnotationPointConfig => ({\n  textBackgroundVisible: true,\n  textFontSize: 12,\n  textFontWeight: 400,\n\n  textBackgroundBorderRadius: 0,\n  textBackgroundBorderWidth: 1,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#ffffff',\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getDefaultAnnotationLine = (): AnnotationHorizontalLineConfig => ({\n  lineVisible: true,\n  lineWidth: 1,\n  lineStyle: 'solid' as const,\n\n  textFontSize: 12,\n  textFontWeight: 400,\n  startSymbolVisible: true,\n  endSymbolVisible: false,\n\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#BCC1CB',\n\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotationVerticalLine = () => getLightAnnotationHorizontalLine()\n\nexport const getDefaultAnnotationArea = (): AnnotationAreaConfig => ({\n  textFontSize: 12,\n  textFontWeight: 400,\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n  areaBorderWidth: 0,\n  areaBorderRadius: 0,\n  areaLineDash: [2, 2],\n\n  outerPadding: 4,\n})\n\nexport const getLightAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n\n  areaColor: '#BCC1CB',\n  areaColorOpacity: 0.12,\n  areaBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotation = () => ({\n  annotationPoint: getLightAnnotationPoint(),\n  annotationHorizontalLine: getLightAnnotationHorizontalLine(),\n  annotationVerticalLine: getLightAnnotationVerticalLine(),\n  annotationArea: getLightAnnotationArea(),\n})\n\n// --- dark ---\nexport const getDarkAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#55595F',\n\n  textColor: '#E2E3E6',\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationVerticalLine = () => getDarkAnnotationHorizontalLine()\n\nexport const getDarkAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n\n  areaColor: '#E2E3E6',\n  areaColorOpacity: 0.15,\n  areaBorderColor: '#E2E3E6',\n})\n\nexport const getDarkAnnotation = () => ({\n  annotationPoint: getDarkAnnotationPoint(),\n  annotationHorizontalLine: getDarkAnnotationHorizontalLine(),\n  annotationVerticalLine: getDarkAnnotationVerticalLine(),\n  annotationArea: getDarkAnnotationArea(),\n})\n\nexport default getLightAnnotation\n","import type { YBandAxis, YLinearAxis } from 'src/types'\n\nexport const getLightLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  inverse: false,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: false,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getLightBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: true,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: false,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: true,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n","import type { BoxPlotStyle, OutlierStyle } from 'src/types'\n\nconst getCommonBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    boxCornerRadius: 2,\n  }\n}\n\nexport const getLightBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    ...getCommonBoxPlotStyle(),\n    boxBorderColor: '#606773',\n    whiskerBorderColor: '#606773',\n  }\n}\n\nexport const getDarkBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    ...getCommonBoxPlotStyle(),\n    boxBorderColor: '#888C93',\n    whiskerBorderColor: '#888C93',\n  }\n}\nconst getCommonOutlierStyle = (): OutlierStyle => {\n  return {\n    pointSize: 10,\n    pointBorderWidth: 1.5,\n    pointColor: 'transparent',\n  }\n}\n\nexport const getLightOutlierStyle = (): OutlierStyle => {\n  return {\n    ...getCommonOutlierStyle(),\n    pointBorderColor: '#606773',\n  }\n}\n\nexport const getDarkOutlierStyle = (): OutlierStyle => {\n  return {\n    ...getCommonOutlierStyle(),\n    pointBorderColor: '#888C93',\n  }\n}\n","import type { BrushConfig } from 'src/types'\n\nexport const getLightBrushConfig = (): BrushConfig => ({\n  enable: false,\n  inBrushStyle: {\n    opacity: 1,\n  },\n  outOfBrushStyle: {\n    opacity: 0.2,\n  },\n})\n\nexport const getDarkBrushConfig = (): BrushConfig => ({\n  enable: false,\n  inBrushStyle: {\n    opacity: 1,\n  },\n  outOfBrushStyle: {\n    opacity: 0.25,\n  },\n})\n","export const getLightColorScheme = () => [\n  '#8D72F6',\n  '#5766EC',\n  '#66A3FE',\n  '#51D5E6',\n  '#4EC0B3',\n  '#F9DF90',\n  '#F9AD71',\n  '#ED8888',\n  '#E9A0C3',\n  '#D77DD3',\n]\nexport const getDarkColorScheme = () => [\n  '#2E62F1',\n  '#4DC36A',\n  '#FF8406',\n  '#FFCC00',\n  '#4F44CF',\n  '#5AC8FA',\n  '#003A8C',\n  '#B08AE2',\n  '#FF6341',\n  '#98DD62',\n]\nexport const getLightLinearColorScheme = () => ['#C2CEFF', '#5766EC']\nexport const getDarkLinearColorScheme = () => ['#A0CEFF', '#2E62F1']\nexport const getLightColor = () => ({\n  linearColorScheme: getLightLinearColorScheme(),\n  colorScheme: getLightColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\nexport const getDarkColor = () => ({\n  linearColorScheme: getDarkLinearColorScheme(),\n  colorScheme: getDarkColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\n","export const getDarkCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  lineColor: '#55595F',\n})\n\nexport const getDarkCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  rectColor: '#4B4F54',\n})\n\nexport const getLightCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#21252C',\n  lineColor: '#21252C',\n})\nexport const getLightCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#364159',\n  rectColor: '#D9DDE4',\n})\n","import type { FunnelTransformConfig } from 'src/types/properties/config/funnelTransform'\n\nexport const getLightFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#F6F7F9',\n    textColor: '#737880',\n  }\n}\n\nexport const getDarkFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#2A2D33',\n    textColor: '#888C93',\n  }\n}\n","import type { HeatmapCell } from 'src/types/properties/config/heatmap/heatmap'\n\nexport const getLightHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#fff',\n    hoverShadowColor: '#404349',\n  }\n}\n\nexport const getDarkHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#404349',\n    hoverShadowColor: '#404349',\n  }\n}\n","export const getDefaultLabel = () => ({\n  enable: true,\n  wrap: true,\n  showValue: true,\n  showValuePercent: false,\n  labelColorSmartInvert: false,\n  labelOverlap: true,\n})\n\nexport const getDarkLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#21252C',\n})\n\nexport const getLightLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#fff',\n})\n\nexport const getFunnelDarkLabel = () => ({\n  ...getDefaultLabel(),\n  labelColor: '#fff',\n})\n\nexport const getFunnelLightLabel = () => ({\n  ...getDefaultLabel(),\n  labelColor: '#fff',\n})\n","import type { ColorLegend, Legend } from 'src/types'\n\nexport const getDefaultLegend = (): Legend => ({\n  enable: true,\n  border: true,\n  maxSize: 1,\n  shapeType: 'rectRound',\n  position: 'rt',\n  labelFontSize: 12,\n  labelFontWeight: 400,\n})\n\nexport const getDarkLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#BBBDC3',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#2A2D33',\n})\n\nexport const getLightLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#606773',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#F1F2F5',\n})\n\nexport const getDarkColorLegend = (): ColorLegend => ({\n  ...getDefaultLegend(),\n  labelColor: '#BBBDC3',\n  railBackgroundColor: '#404349',\n  handlerBorderColor: '#4B4F54',\n})\n\nexport const getLightColorLegend = (): ColorLegend => ({\n  ...getDefaultLegend(),\n  labelColor: '#606773',\n  handlerBorderColor: '#fff',\n  railBackgroundColor: '#f1f3f4',\n})\n","import type { RegressionLineConfig } from 'src/types/properties/regressionLine'\n\nexport const getDefaultRegressionLine = () => {\n  return {\n    lineWidth: 2,\n    textFontSize: 12,\n    textFontWeight: 400,\n  }\n}\n\nexport const getLightRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n\nexport const getDarkRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n","import type { PivotChartGridConfig } from 'src/types'\n\nexport const getDefaultTableConfig = () => ({\n  bodyFontSize: 12,\n  bodyBackgroundColor: 'transparent',\n  headerFontSize: 12,\n})\n\nexport const getLightTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#e3e5eb',\n\n  bodyFontColor: '#141414',\n\n  headerFontColor: '#21252c',\n  headerBackgroundColor: '#f6f7f9',\n\n  hoverBodyBackgroundColor: '#bedaff',\n  hoverBodyInlineBackgroundColor: '#bedaff33',\n  hoverHeaderBackgroundColor: '#D9DDE4',\n  hoverHeaderInlineBackgroundColor: '#D9DDE455',\n\n  selectedBorderColor: '#4080ff',\n  selectedBackgroundColor: '#bedaff33',\n\n  backgroundColor: 'transparent',\n})\n\nexport const getDarkTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#4b4e53',\n\n  bodyFontColor: '#fdfdfd',\n  headerFontColor: '#fdfdfd',\n  headerBackgroundColor: '#36393e',\n\n  hoverBodyBackgroundColor: '#4284ff66',\n  hoverBodyInlineBackgroundColor: '#4284ff10',\n  hoverHeaderBackgroundColor: '#6f7984cc',\n  hoverHeaderInlineBackgroundColor: '#4b4f54',\n\n  selectedBorderColor: '#3073f2',\n  selectedBackgroundColor: '#4284ff33',\n})\n\nconst pickPivotChartGridConfig = (tableConfig: any) => {\n  return {\n    outlineBorderLineWidth: 0,\n    frameCornerRadius: 0,\n    borderColor: tableConfig.borderColor,\n    bodyFontColor: tableConfig.bodyFontColor,\n    headerFontColor: tableConfig.headerFontColor,\n\n    headerBackgroundColor: 'transparent',\n    hoverHeaderBackgroundColor: tableConfig.hoverHeaderBackgroundColor,\n    hoverHeaderInlineBackgroundColor: tableConfig.hoverHeaderInlineBackgroundColor,\n\n    titleFontColor: tableConfig.headerFontColor,\n    titleFontSize: tableConfig.headerFontSize,\n    titleFontWeight: 'bold',\n  }\n}\n\nexport const getLightPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getLightTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#D9DDE446'\n\n  res.chartGridColor = '#F0F1F6'\n  res.axisLabelColor = '#BCC1CB'\n\n  return res\n}\n\nexport const getDarkPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getDarkTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#4b4f5446'\n\n  return res\n}\n","import type { TooltipConfig } from 'src/types'\n\nconst getDefaultTooltip = (): TooltipConfig => ({\n  enable: true,\n  borderRadius: 12,\n  borderWidth: 1,\n  padding: 9,\n  lineHeight: 12,\n  fontSize: 12,\n  lineSpace: 6,\n})\n\nexport const getLightTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#e3e5e8',\n  backgroundColor: '#fff',\n  keyColor: '#606773',\n  valueColor: '#21252c',\n  titleColor: '#21252c',\n})\n\nexport const getDarkTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#3c3f44',\n  backgroundColor: '#2b2d30',\n  keyColor: '#89909D',\n  valueColor: '#E2E3E6',\n  titleColor: '#E2E3E6',\n})\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getDarkColor,\n  getDarkCrosshairLine,\n  getDarkCrosshairRect,\n  getDarkBrushConfig,\n  getDarkTableConfig,\n  getDarkPivotChartGridConfig,\n  getDarkLabel,\n  getDarkLegend,\n  getDarkColorLegend,\n  getFunnelDarkLabel,\n} from '../common'\nimport { getDarkTooltip } from '../common/tooltip'\nimport { getDarkBandAxis, getDarkLinearAxis } from '../common/axes'\nimport { getDarkAnnotation } from '../common/annotaion'\nimport { getDarkFunnelTransformTheme } from '../common/funnelTransform'\nimport { getDarkHeatmapCellTheme } from '../common/heatmapCell'\nimport { getDarkRegressionLine } from '../common/regressionLine'\nimport { getDarkBoxPlotStyle, getDarkOutlierStyle } from '../common/boxPlot'\n\nexport const darkTheme = (): CustomThemeConfig => {\n  const linearAxis = getDarkLinearAxis()\n  const bandAxis = getDarkBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n  const crosshairLine = getDarkCrosshairLine()\n  const crosshairRect = getDarkCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getDarkColor(),\n    label: getDarkLabel(),\n    legend: getDarkLegend(),\n    tooltip: getDarkTooltip(),\n    brush: getDarkBrushConfig(),\n  }\n\n  const tableConfig = getDarkTableConfig()\n\n  return {\n    config: {\n      table: tableConfig,\n      pivotTable: tableConfig,\n\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        regressionLine: getDarkRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n        label: getFunnelDarkLabel(),\n        transform: getDarkFunnelTransformTheme(),\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        legend: getDarkColorLegend(),\n        xAxis: bandAxis,\n        yAxis: bandAxis,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n\n        cell: getDarkHeatmapCellTheme(),\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        boxPlotStyle: getDarkBoxPlotStyle(),\n        outlierStyle: getDarkOutlierStyle(),\n      },\n    },\n  }\n}\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getFunnelLightLabel,\n  getLightColor,\n  getLightColorLegend,\n  getLightCrosshairLine,\n  getLightCrosshairRect,\n  getLightBrushConfig,\n  getLightLabel,\n  getLightLegend,\n  getLightPivotChartGridConfig,\n  getLightTableConfig,\n} from '../common'\nimport { getLightTooltip } from '../common/tooltip'\nimport { getLightBandAxis, getLightLinearAxis } from '../common/axes'\nimport { getLightAnnotation } from '../common/annotaion'\nimport { getLightFunnelTransformTheme } from '../common/funnelTransform'\nimport { getLightHeatmapCellTheme } from '../common/heatmapCell'\nimport { getLightRegressionLine } from '../common/regressionLine'\nimport { getLightBoxPlotStyle, getLightOutlierStyle } from '../common/boxPlot'\n\nexport const lightTheme = (): CustomThemeConfig => {\n  const linearAxis = getLightLinearAxis()\n  const bandAxis: YBandAxis = getLightBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n\n  const crosshairLine = getLightCrosshairLine()\n  const crosshairRect = getLightCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getLightColor(),\n    label: getLightLabel(),\n    legend: getLightLegend(),\n    tooltip: getLightTooltip(),\n    brush: getLightBrushConfig(),\n  }\n  const tableConfig = getLightTableConfig()\n\n  return {\n    config: {\n      // table\n      table: tableConfig,\n      pivotTable: tableConfig,\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n        xAxis: {\n          ...linearAxis,\n        },\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n        label: getFunnelLightLabel(),\n        transform: getLightFunnelTransformTheme(),\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        legend: getLightColorLegend(),\n        xAxis: bandAxis,\n        yAxis: bandAxis,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n        cell: getLightHeatmapCellTheme(),\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n        regressionLine: getLightRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        boxPlotStyle: getLightBoxPlotStyle(),\n        outlierStyle: getLightOutlierStyle(),\n      },\n    },\n  }\n}\n"],"names":["Builder","vseed","intl","build","builder","advancedVSeed","Error","advanced","buildSpec","start","performance","Date","chartType","pipeline","context","spec","execPipeline","e","end","buildAdvanced","getColorItems","isTable","isPivotTable","datasetReshapeInfo","colorItems","unique","d","colorIdMap","prev","cur","getColorIdMap","value","customPipe","themeKey","registerAll","registerTable","registerPivotTable","registerLine","registerColumn","registerColumnParallel","registerColumnPercent","registerBar","registerBarParallel","registerBarPercent","registerArea","registerAreaPercent","registerScatter","registerDualAxis","registerPie","registerDonut","registerRose","registerRoseParallel","registerRadar","registerFunnel","registerHeatmap","registerBoxPlot","registerHistogram","registerLightTheme","registerDarkTheme","areaAdvancedPipeline","areaSpecPipeline","areaPercentAdvancedPipeline","areaPercentSpecPipeline","barAdvancedPipeline","barSpecPipeline","barParallelAdvancedPipeline","barParallelSpecPipeline","barPercentAdvancedPipeline","barPercentSpecPipeline","boxplotAdvancedPipeline","boxplotSpecPipeline","columnAdvancedPipeline","columnSpecPipeline","columnParallelAdvancedPipeline","columnParallelSpecPipeline","columnPercentAdvancedPipeline","columnPercentSpecPipeline","donutAdvancedPipeline","donutSpecPipeline","dualAxisAdvancedPipeline","dualAxisSpecPipeline","funnelAdvancedPipeline","funnelSpecPipeline","heatmapAdvancedPipeline","heatmapSpecPipeline","histogramAdvancedPipeline","histogramSpecPipeline","lineAdvancedPipeline","lineSpecPipeline","pieAdvancedPipeline","pieSpecPipeline","pivotTableAdvancedPipeline","pivotTableSpecPipeline","radarAdvancedPipeline","radarSpecPipeline","roseAdvancedPipeline","roseSpecPipeline","roseParallelAdvancedPipeline","roseParallelSpecPipeline","scatterAdvancedPipeline","scatterSpecPipeline","tableAdvancedPipeline","tableSpecPipeline","registerCustomTheme","key","themeConfig","customTheme","lightTheme","darkTheme","ORIGINAL_DATA","FoldMeasureName","FoldMeasureId","FoldMeasureValue","MeasureId","MeasureName","FoldPrimaryMeasureValue","FoldSecondaryMeasureValue","DimAxisType","FoldXMeasureValue","FoldYMeasureValue","FoldXMeasureId","FoldYMeasureId","XEncoding","YEncoding","AngleEncoding","DetailEncoding","ColorEncoding","ColorIdEncoding","BoxPlotPivotIndicator","LowerWhisker","UpperWhisker","OutliersMeasureId","MedianMeasureId","BinStartMeasureId","BinEndMeasureId","BinCountMeasureId","BinPercentageMeasureId","dataReshapeByEncoding","dataset","dimensions","measures","encoding","options","foldMeasureId","foldMeasureName","foldMeasureValue","colorItemAsId","colorMeasureId","omitIds","foldedDataset","foldInfo","foldMeasures","finalDataset","unfoldInfo","unfoldDimensions","Separator","measureId","measureName","measureValue","allowEmptyFold","Infinity","result","Array","index","i","j","datum","omit","measure","id","alias","valueNumber","Number","Math","separator","color","x","y","detail","angle","angleDimensions","dim","xDimensions","yDimensions","colorDimensions","detailDimensions","Set","applyEncoding","colorId","String","getColorAliasItem","nearlyEqual","a","b","epsilon","diff","selector","vchartDatum","selectorMode","vchartKeys","Object","k","selectors","isValueSelector","selectByValue","isMeasureSelector","selectByMeasure","isDimensionSelector","selectByDmension","isPartialDatumSelector","selectByPartial","selectorDatum","finalResult","results","r","op","selectorValueArr","v","translateMap","Intl","segments","values","text","segment","translatedText","isNullish","locale","page","initAdvancedVSeed","defaultMeasures","defaultDimensions","defaultMeasureId","encodingAdapter","buildMeasures","defaultEncodingForLine","encodingForLine","pickDimensionsForReshape","pivotAdapter","reshapeWithEncoding","pivotReshapeWithEncoding","sortXBandAxis","sortLegend","areaConfig","theme","markStyle","annotation","areaPercentConfig","defaultEncodingForBar","encodingForBar","sortYBandAxis","barConfig","barParallelConfig","barPercentConfig","generateDefaultDimensionEncoding","isMultiMeasure","uniqueDimIds","addDefaultColorEncoding","generateDefaultMeasureEncoding","item","pickedConfig","pick","config","replaceNullToUndefined","reshapeMeasures","hasMultipleMeasureInSingleView","label","tooltip","hasDimensionEncoding","hasMeasureEncoding","hasMulti","addColorToEncoding","c","uniqDims","uniqueBy","whiskers","newDatasets","boxPlotDataList","f","m","boxPlotData","boxplot","Q1MeasureValue","Q3MeasureValue","res","chartConfig","rowColumnFields","datasets","measureGroup","groupId","DEFAULT_PARENT_ID","validEncodingIds","field","revisedBoxPlotFieldKey","reshapeInfo","defaultEncodingForColumn","encodingForColumn","columnConfig","regressionLine","columnParallelConfig","columnPercentConfig","defaultEncodingForPie","encodingForPie","donutConfig","buildMeasuresForDualAxis","measuresByView","parentIds","parentId","isPrimaryYAxis","isSecondaryYAxis","isOtherEncoding","isCommonMeasureEncoding","ensureParentIdInitialized","isDualAxisChartType","DEFAULT_DUAL_CHART_TYPE","primaryCount","pid","allMeasuresIds","foldInfoList","unfoldInfoList","primaryMeasures","secondaryMeasures","primaryChartTypes","secondaryChartTypes","primaryResult","getColorMeasureId","row","secondaryResult","datasetList","funnelConfig","onlyMeasureId","colorDims","dimensionsWithoutMeasureId","hasColorEncoding","merge","binCount","binStep","binValueType","valueField","binData","bin","subMeasures","flattenDatasert","minValue","maxValue","undefined","lineConfig","pieConfig","radarConfig","defaultEncodingForRose","encodingForRose","roseConfig","roseParallelConfig","buildMeasuresForScatter","encodedMeasures","isYAxis","isXAxis","xCount","yCount","cloneMeasure","clone","addPivotDimensionsForScatter","xMeasures","yMeasures","sizeEncodingIds","xResult","yResult","mId","yDatum","calcOrder","sortConfig","order","orderBy","sort","aValue","bValue","colorIds","orderRes","itemNameOrId","sortAxis","xField","axisOrderResult","yField","top100dataset","newDimensions","MeaIdDim","clonedMeasures","reshapeDimensions","dimension","noEncodingPipeline","hasEncodingPipeline","generateDimensionEncoding","generateMeasureEncoding","checkVSeed","pickedMarkStyle","encodingKeys","isMeasureTreeWithParentId","currentValue","pagedDataset","pivotPipeline","isPivotChart","keys","regressionLineConfig","hasLine","newSubDataset","chartConfigTheme","mergedConfig","mergeDeep","_k","mergeArray","chartCustomTheme","arr","themeItem","isString","isNumber","isObjectType","findAllMeasures","findTreeNodesBy","cellStyle","measureTree","dimensionTree","pickedCellStyle","style","clonedDimensions","preorderTraverse","node","isDimension","isMeasure","area","initArea","stackInverse","colorAdapter","linearColor","backgroundColor","datasetXY","progressive","xBand","yLinear","brush","discreteLegend","colorLegend","verticalCrosshairLine","colorPointStyleFill","pointStyle","pointStateDimensionHover","colorLineStyleFill","lineStyle","colorAreaStyleFill","areaStyle","annotationPoint","annotationVerticalLine","annotationHorizontalLine","annotationArea","splitLine","pivotArea","initPivot","pivotGridStyle","pivotIndicatorsAsRow","datasetPivot","pivotIndicators","pivotAxisStyle","pivotRowDimensions","pivotColumnDimensions","pivotTitle","pivotDiscreteLegend","pivotColorLegend","dimensionLinkage","areaPercent","percent","pivotAreaPercent","bar","initBar","stackCornerRadius","barMaxWidth","datasetYX","xLinear","yBand","horizontalCrosshairRect","colorBarStyleFill","barStyle","annotationAreaBand","pivotBar","pivotIndicatorsAsCol","initBarParallel","sameDimensionsMode","isDeepEqual","barParallel","barGapInGroup","pivotBarParallel","barPercent","pivotBarPercent","initBoxplot","usePivotChart","boxMaxWidth","boxGapInGroup","datasetBoxplot","labelBoxPlot","buildLabel","boxPlotMeasureKeys","VCHART_OUTLIER_KEY","tooltipBoxplot","enable","meas","valueMeasure","defaultFormatter","createFormatterByMeasure","measureAliasMapping","getTooltipStyle","createMarkContent","data","tooltipItems","outerlierMeasure","formatter","entry","mea","createDimensionContent","updateTooltipElement","dims","pipe","medianAlias","hasMultiMeasureGroup","encodingColor","colorKey","findMeasureById","colorBoxPlotStyleFill","stylePipe","isLinearColor","boxPlotStyle","isEmpty","customMap","boxPlotStyles","boxColor","boxColorOpacity","boxBorderColor","boxBorderWidth","boxVisible","boxBorderOpacity","medianBorderColor","whiskerBorderColor","boxCornerRadius","outlierStyle","outlierStyles","pointBorderColor","pointBorderStyle","pointBorderWidth","pointColor","pointColorOpacity","pointSize","pointVisible","verticalCrosshairRect","pivotBoxplot","columnPolynomialRegressionLine","lineTheme","lineList","array","line","lineIndex","lineWidth","lineDash","textColor","textFontSize","textFontWeight","confidenceIntervalOpacity","confidenceLevel","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","confidenceIntervalVisible","childrenMarks","ctx","s","chart","vchart","rect","yClamper","clamper","fieldX","fieldY","xValues","minPoints","degree","confidenceInterval","evaluateGrid","regressionPolynomial","xVal","filteredData","getAlphaByConfidenceLevel","N","xAxisHelper","halfBandWidth","linePoints","lineData","intervalData","defaultRegressionLineColor","opt","parentNode","points","column","initColumn","pivotColumn","initColumnParallel","columnParallel","pivotColumnParallel","columnPercent","pivotColumnPercent","initDonut","donut","labelPie","colorPieStyleFill","pieStyle","pivotDonut","pivotHideIndicatorName","addRegionPadding","pipeByAxis","pipes","initDualAxis","dualChartType","DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX","type","DUAL_AXIS_CHART_COLUMN_Z_INDEX","columnSpec","datasetDualAxis","analysis","orderMapping","fields","labelDualAxis","baseConfig","DUAL_AXIS_LABEL_Z_INDEX","tooltipOfDualAxisSeries","tooltipDualAxis","barStyleFilter","pointStyleFilter","lineStyleFilter","areaStyleFilter","adjustXField","chartTypes","yLinearPrimary","reshapeInfoId","primaryYAxis","yAxisConfig","alignTicks","alignTicksConfig","primaryFoldInfoList","seriesId","autoFormat","numFormat","createNumFormatter","flatReshapeMeasures","measureIds","titleText","linearAxis","linearAxisStyle","formatMethod","createLinearFormat","yLinearSecondary","secondaryYAxis","secondaryFoldInfoList","isEmptySecondary","onlySecondary","sync","baseStyle","annotationPointOfDualAxis","generateAnnotationPointPipe","allMeasureIds","pickedDatum","pickWithout","isSubset","dualAxis","_","seriesContext","axisType","p","colorScheme","linearColorScheme","pivotDualAxis","initFunnel","colorFunnelStyleFill","funnelStyle","funnelTransformStyle","funnel","pivotFunnel","heatmapBandAxis","xAxisConfig","xBandAxis","bandAxisStyle","yBandAxis","cell","DATUM_HIDE_KEY","tooltipHeatmap","dimContent","meaContent","originalData","foldMap","initHeatmap","heatmap","range","min","max","val","pivotHeatmap","indicators","ind","initHistogram","datasetHistogram","histogramXLinear","isPivot","percentFormatter","defaultTitleText","isBarPercent","isColumnPercent","isAreaPercent","createLinearPercentFormat","binValues","getDefaultXFormatterOfHistogram","getDefaultValueFormatterOfHistogram","autoFormatter","tooltipHistogram","defaultXFormatter","defaultValueFormatter","updateMarkTooltipElement","dimFormatter","histogramVerticalCrosshairRect","crosshair","isArray","binRange","binStart","binEnd","annotationPointOfHistogram","histogramSpec","x2Field","kdeRegressionLine","kdeLine","series","scaleY","viewData","simpleData","kde","ld","defaultRegressionLineLabelX","defaultRegressionLineLabelY","ecdfRegressionLine","ecdfLine","ecdf","yRange","y0","y1","leftAxis","histogram","pivotHistogram","initLine","pivotLine","initPie","pie","pivotPie","initRadar","radarAngleAxis","radarRadiusAxis","radar","pivotRadar","initRose","hasNegativeValue","rose","radiusAxis","colorRoseStyleFill","roseStyle","pivotRose","initRoseParallel","roseParallel","pivotRoseParallel","initScatter","datasetScatter","scatterSize","size","labelScatter","tooltipScatter","horizontalCrosshairLine","visible","lineColor","labelColor","labelVisible","labelBackgroundColor","yAxisFormatter","generateRegressionLinePipe","regressionFunction","getOptions","getDefaultRegressionOptions","getMinPoints","colorAttrOptions","groups","group","groupData","mainColor","NaN","areaPoints","point","alpha","linearRegressionLine","regressionLinear","lowessRegressionLine","regressionLowess","polynomialRegressionLine","logisticRegressionLine","regressionLogistic","scatter","pointStateHover","pivotScatter","annotationAreaList","positionMap","defaultTextPosition","isBarLikeChart","markArea","selectorPoint","textBackgroundVisible","textBackgroundColor","textBackgroundBorderColor","textBackgroundBorderWidth","textBackgroundBorderRadius","textBackgroundPadding","areaColor","areaColorOpacity","areaBorderColor","areaBorderRadius","areaBorderWidth","areaLineDash","outerPadding","selectedData","textPosition","textAlign","ANNOTATION_AREA_TEXT_STYLE_BY_POSITION","textBaseline","ANNOTATION_Z_INDEX","xyList","positionData","yAxisHelper","regionRect","minX","maxX","maxY","minY","bandPosition","depth","xBandWidth","startX","endX","width","middleX","yBandWidth","startY","endY","middleY","annotationHorizontalLineList","markLine","yValue","lineVisible","yValueArr","newMarkLine","findSelectedDatas","generateMarkPoint","annotationPointList","isHorizontalBar","defaultStyle","markPoint","offsetX","offsetY","dx","dy","markPointStyle","marks","mark","annotationVerticalLineList","xValue","xValueArr","formatGradientStops","stops","firstInvalidateIndex","stop","newStops","splitLineConfig","splitValue","colorTheme","colorConfig","isPlainObject","lineSeries","lineMark","lineGraphics","seg","pt","scale","splitCoordinate","ratio","lineStroke","areaFill","VUtilColor","attrs","seriesSpec","measureValueKey","sub","obj","excludeMeasuresIds","tick","title","grid","labelAutoHide","labelAutoHideGap","labelAutoLimit","labelAutoLimitLength","labelAutoRotate","labelAutoRotateAngleRange","AXIS_LABEL_SPACE","orient","zero","nice","inverse","log","logBase","axisConfig","LINEAR_AXIS_INNER_OFFSET_TOP","idList","pivotAllDatasetReshapeInfo","bandAxis","isNil","allDatasetReshapeInfo","colorMapping","createSpecifiedForColorMapping","matchedList","colors","accurateMap","name","colorValue","accurateMatchedList","colorObj","fuzzyMatchedList","ordinalPipe","linearPipe","measureIdList","rectColor","xAxisFormatter","records","pre","generateMeasureValue","labelAutoFormat","format","mergedMeasure","generateMeasurePercent","sum","num","vseedMeasures","vseedDimensions","advancedVSeedDimensions","advancedVSeedMeasures","wrap","showValue","showValuePercent","showDimension","labelOverlap","labelColorSmartInvert","labelStroke","labelFontSize","labelFontWeight","labelPosition","hasDimLabelEncoding","labelDims","labelMeas","percentFormat","createFormatter","dimLabels","meaLabels","statistics","measureValueLabel","legend","position","labelFontColor","railBackgroundColor","handlerBorderColor","colorMeasure","pagerIconColor","pagerIconDisableColor","maxSize","border","shapeType","legendPosition","labelTextColor","legends","colorSpecified","areaStyles","lineStyles","areaGroups","groupBy","areaVisible","curveType","getCurveType","curveTension","getCurveTension","showStroke","barStyles","barBorderColor","barBorderStyle","barBorderWidth","barColor","barColorOpacity","barBorderOpacity","barRadius","barVisible","lineSmooth","isRadar","lineColorOpacity","dashSegment","dashGap","pointStyles","labelHoverOnAxis","chartSpec","labelFormat","axisStyle","themConfig","axis","BAND_AXIS_INNER_OFFSET_IN_PIVOT","ChartTypeEnum","columns","columnDimensions","onlyCombination","isCombination","transparent","borderColor","bodyFontColor","headerFontColor","headerBackgroundColor","hoverHeaderBackgroundColor","hoverHeaderInlineBackgroundColor","outlineBorderLineWidth","frameCornerRadius","arg","noYAxis","chartPipeline","subMeasuresId","invalideMeasuresIds","newDataset","newDatasetReshapeInfo","newContext","isRectungularCoordinate","rows","rowDimensions","colorName","setWholeIcon","shapeContainer","shapeElements","shapeElement","svgElement","tooltipElement","actualTooltip","tooltipConfig","document","allMeasures","hasRow","foldMapValues","col","table","bodyStyle","headerStyle","fontColor","fontSize","hoverCellBgColor","hoverInlineColor","hoverCellColor","tableThemeStyle","selectionStyle","aggregationRules","bodyCellStyle","bodyCellStyleList","selectedPos","newIndicators","newInd","indicatorKey","dataValue","cellHeaderPaths","headerPaths","originalDatum","path","pickBodyCellStyle","treeTreeToColumns","tree","callback","groupNode","props","matchedStyles","tableStyleMap","acc","fieldKey","isVTable","isVChart","finalXCount","finalYCount","otherCount","isPositionMeasure","isDimensionGroup","autoNumFormatter","formatterFormat","thousandSeparator","prefix","suffix","symbol","fractionDigits","significantDigits","roundingMode","roundingPriority","numFormatterOptions","numFormatter","typeSymbol","numStr","parts","findFirstMeasure","isMeasureGroup","isMeasures","initialValue","mapValues","childrenKey","stack","children","child","nodes","getDefaultAnnotationPoint","getDefaultAnnotationLine","getLightAnnotationHorizontalLine","getDefaultAnnotationArea","getLightAnnotation","getDarkAnnotationHorizontalLine","getDarkAnnotation","getLightLinearAxis","getLightBandAxis","getDarkLinearAxis","getDarkBandAxis","getCommonBoxPlotStyle","getLightBoxPlotStyle","getDarkBoxPlotStyle","getCommonOutlierStyle","getLightOutlierStyle","getDarkOutlierStyle","getLightBrushConfig","getDarkBrushConfig","getLightColor","getDarkColor","getDarkCrosshairLine","getDarkCrosshairRect","getLightCrosshairLine","getLightCrosshairRect","getLightFunnelTransformTheme","getDarkFunnelTransformTheme","getLightHeatmapCellTheme","getDarkHeatmapCellTheme","getDefaultLabel","getDarkLabel","getLightLabel","getFunnelDarkLabel","getFunnelLightLabel","getDefaultLegend","getDarkLegend","getLightLegend","getDarkColorLegend","getLightColorLegend","getDefaultRegressionLine","getLightRegressionLine","getDarkRegressionLine","getDefaultTableConfig","getLightTableConfig","getDarkTableConfig","pickPivotChartGridConfig","tableConfig","getLightPivotChartGridConfig","getDarkPivotChartGridConfig","getDefaultTooltip","getLightTooltip","getDarkTooltip","barBandAxis","crosshairLine","crosshairRect"],"mappings":"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"}