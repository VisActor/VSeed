{"version":3,"file":"static/js/async/45307.72543b4c.js","sources":["webpack://website/../../packages/vseed/src/builder/builder/buildAdvanced.ts","webpack://website/../../packages/vseed/src/builder/builder/buildSpec.ts","webpack://website/../../packages/vseed/src/builder/builder/build.ts","webpack://website/../../packages/vseed/src/builder/builder/advanced/colorItems.ts","webpack://website/../../packages/vseed/src/builder/builder/builder.ts","webpack://website/../../packages/vseed/src/builder/register/all.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/area.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/areaPercent.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/bar.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/barParallel.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/barPercent.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/boxplot.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/column.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/columnParallel.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/columnPercent.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/donut.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/dualAxis.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/funnel.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/heatmap.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/histogram.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/line.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/pie.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/pivotTable.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/radar.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/rose.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/roseParallel.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/scatter.ts","webpack://website/../../packages/vseed/src/builder/register/chartType/table.ts","webpack://website/../../packages/vseed/src/builder/register/theme/custom.ts","webpack://website/../../packages/vseed/src/builder/register/theme/dark.ts","webpack://website/../../packages/vseed/src/builder/register/theme/light.ts","webpack://website/../../packages/vseed/src/dataReshape/constant.ts","webpack://website/../../packages/vseed/src/dataReshape/dataReshapeByEncoding.ts","webpack://website/../../packages/vseed/src/dataReshape/foldMeasures.ts","webpack://website/../../packages/vseed/src/dataReshape/unfoldDimensions.ts","webpack://website/../../packages/vseed/src/dataSelector/selector.ts","webpack://website/../../packages/vseed/src/i18n/i18nData.ts","webpack://website/../../packages/vseed/src/i18n/i18n.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/area.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/areaPercent.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/bar.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/barParallel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/barPercent.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithBoxplotEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithBoxplotEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/column.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/columnParallel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/columnPercent.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/donut.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/buildMeasuresForDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithDualEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithDualEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/funnel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/funnel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/heatmap.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/heatmap.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithHistogramEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithHistogramEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/line.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/pie.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/radar.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/radar.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/rose.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/roseParallel.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/buildMeasuresForScatter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipeline/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithScatterEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithScatterEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/common.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/sortLegend.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/sortXBand.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/analysis/sortYBand.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/annotation/annotation.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/column.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/index.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/line.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/config/pie.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/default/defaultDimensions.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/default/defaultMeasureId.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/default/defaultMeasures.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/dimensions/pickDimensionsForReshape.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/adapter/encodingAdapter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/bar.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/color/addColorToEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/column.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/line.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/pie.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/encoding/rose.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/init/initAdvancedVSeed.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/markStyle/markStyle.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/buildMeasures.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/measures/utils.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/pivot/pivotAdapter.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/regressionLine/regressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/reshape/reshapeWithEncoding.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/chart/pipes/theme/theme.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/encoding/pivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipeline/pivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/default/defaultMeasureId.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/reshape/reshapePivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/config/pivotTableConfig.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipeline/table.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/records/records.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/config/tableConfig.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/cellStyle/cellStyle.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/default/defaultDimensions.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/default/defaultMeasures.ts","webpack://website/../../packages/vseed/src/pipeline/advanced/table/pipes/init/initAdvancedVSeed.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/area.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/areaPercent.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/bar.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/barParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/barParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/barPercent.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/boxWidth/boxMaxWidth.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/boxWidth/boxGapInGroup.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetBoxplot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelBoxPlot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipBoxplot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorBoxPlotStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/boxPlotStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/outlierStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/columnRegressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/column.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/columnParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/columnParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/columnPercent.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/donut.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/donut.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dual/dualChartType.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/barStyleFilter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/pointStyleFilter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/lineStyleFilter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pipeFilter/areaStyleFilter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dual/adjustXField.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yLinearPrimary.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yLinearSecondary.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPointOfDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/dualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/series/series.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/linearColorForDualAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/funnel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorFunnelStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/funnelStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/funnelTransformStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/funnel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/heatmapBandAxis.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorCellStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/cellStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipHeatmap.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/heatmap.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/heatmap.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/heatmapColorLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetHistogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/histogramXLinear.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/utils/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipHistogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/histogramCrosshair.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPointOfHistogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/kdeRegressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/ecdfRegressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/histogram.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/line.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/line.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/pie.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/pie.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/radar.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/radarAngle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/radarRadius.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/radar.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/rose.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/rose.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/roseParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/roseParallel.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetScatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/size/scatterSize.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelScatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipScatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/linearRegressionLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipeline/scatter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationArea.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationAreaBand.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationHorizontalLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPoint.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationPointCommon.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/annotationVerticalLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/splitLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/annotation/utils.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/bandAxisStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/format/linearFormat.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/linearAxisStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/radius.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/title/defaultTitleText.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/xBand.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/xLinear.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yBand.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/axes/yLinear.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/backgroundColor/background.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/barWidth/barGapInGroup.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/barWidth/barMaxWidth.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/color.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorAdapter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorAreaStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorBarStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorLineStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorPieStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorPointStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/colorRoseStyleFill.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/color/linearColor.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairRect.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairLine.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairRect.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetPivot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetXY.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/datasetYX.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/dataset/progressive.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/area.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/bar.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/column.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/init/pivot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/label/label.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/label/labelPie.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/colorLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/discreteLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/pivotColorLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/legend/pivotDiscreteLegend.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/areaStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/barStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/curve/curve.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/lineStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/pieStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/pointState.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/pointStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/markStyle/roseStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/percent/percent.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/dimensionLinkage.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotAdapter.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotAxisStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotColumnDimensions.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotGridStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotHideIndicatorName.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotIndicators.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotRowDimensions.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/pivotChart/pivotTitle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/region/addRegionPadding.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/regressionLine/common.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/stack/stack.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/stack/stackCornerRadius.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltip.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipElement.ts","webpack://website/../../packages/vseed/src/pipeline/spec/chart/pipes/tooltip/tooltipStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/indicators/pivotIndicators.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipeline/pivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/init/pivotTable.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/columns/pivotColumns.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/rows/pivotRows.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/corner/titleOnDimension.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/rowHeaderStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/cornerHeaderStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/indicators/pivotDataConfig.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/cellStyle/pivot.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/columns/dimensionsToColumns.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/columns/measuresToColumns.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipeline/table.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/init/table.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/cellStyle/table.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/cellStyle/common.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/bodyStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/frameStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/headerStyle.ts","webpack://website/../../packages/vseed/src/pipeline/spec/table/pipes/theme/selectionStyle.ts","webpack://website/../../packages/vseed/src/pipeline/utils/boxplot.ts","webpack://website/../../packages/vseed/src/pipeline/utils/chatType.ts","webpack://website/../../packages/vseed/src/pipeline/utils/constant.ts","webpack://website/../../packages/vseed/src/pipeline/utils/dimensions/typeGuard.ts","webpack://website/../../packages/vseed/src/pipeline/utils/format/createFormatter.ts","webpack://website/../../packages/vseed/src/pipeline/utils/format/createFormatterByMeasure.ts","webpack://website/../../packages/vseed/src/pipeline/utils/format/createNumFormatter.ts","webpack://website/../../packages/vseed/src/pipeline/utils/measures/find.ts","webpack://website/../../packages/vseed/src/pipeline/utils/measures/typeGuard.ts","webpack://website/../../packages/vseed/src/pipeline/utils/pipeline.ts","webpack://website/../../packages/vseed/src/pipeline/utils/replaceNullToUndefined.ts","webpack://website/../../packages/vseed/src/pipeline/utils/tree/traverse.ts","webpack://website/../../packages/vseed/src/pipeline/utils/valid/checkVSeed.ts","webpack://website/../../packages/vseed/src/theme/common/annotaion.ts","webpack://website/../../packages/vseed/src/theme/common/axes.ts","webpack://website/../../packages/vseed/src/theme/common/boxPlot.ts","webpack://website/../../packages/vseed/src/theme/common/color.ts","webpack://website/../../packages/vseed/src/theme/common/crosshair.ts","webpack://website/../../packages/vseed/src/theme/common/funnelTransform.ts","webpack://website/../../packages/vseed/src/theme/common/heatmapCell.ts","webpack://website/../../packages/vseed/src/theme/common/label.ts","webpack://website/../../packages/vseed/src/theme/common/legend.ts","webpack://website/../../packages/vseed/src/theme/common/regressionLine.ts","webpack://website/../../packages/vseed/src/theme/common/table.ts","webpack://website/../../packages/vseed/src/theme/common/tooltip.ts","webpack://website/../../packages/vseed/src/theme/dark/dark.ts","webpack://website/../../packages/vseed/src/theme/light/light.ts"],"sourcesContent":["import type { AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { Builder } from './builder'\nimport { intl } from 'src/i18n'\n\nexport const buildAdvanced = (builder: Builder): AdvancedVSeed | null => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n  const { chartType } = builder.vseed\n  if (!chartType) {\n    throw new Error('chartType is nil in buildAdvanced')\n  }\n\n  const pipeline = Builder.getAdvancedPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no advanced pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: AdvancedPipelineContext = {\n    vseed: builder.vseed,\n    customTheme: Builder.getThemeMap(),\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const advancedVSeed = execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context)\n    builder.advancedVSeed = advancedVSeed\n    return advancedVSeed\n  } catch (e) {\n    throw new Error(`buildAdvanced error: ${(e as Error).message}`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildAdvanced'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import type { Spec, VChartSpecPipeline } from 'src/types'\nimport { Builder } from './builder'\nimport type { AdvancedVSeed, SpecPipelineContext } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { intl } from 'src/i18n'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const buildSpec = (builder: Builder, advancedVSeed: AdvancedVSeed): Spec => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n\n  const { chartType } = builder.vseed\n\n  const pipeline = Builder.getSpecPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no spec pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: SpecPipelineContext = {\n    vseed: builder.vseed,\n    advancedVSeed,\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const spec = execPipeline<ISpec, SpecPipelineContext>(pipeline as VChartSpecPipeline, context)\n    builder.spec = spec\n    return spec\n  } catch (e) {\n    throw new Error(`buildSpec error: ${(e as Error).message}`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildSpec'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import type { Spec } from 'src/types'\nimport type { Builder } from './builder'\n\nexport const build = (builder: Builder): Spec => {\n  const advancedVSeed = builder.buildAdvanced()\n  if (!advancedVSeed) {\n    throw new Error('advancedVSeed is null')\n  }\n  const spec = builder.buildSpec(advancedVSeed)\n  return spec\n}\n","import { unique } from 'remeda'\nimport type { Builder } from '../builder'\nimport { isPivotTable, isTable } from 'src/pipeline'\n\nexport const getColorItems = (builder: Builder): { id: string; alias: string }[] => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return []\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorItems.map((d) => ({\n    id: d,\n    alias: colorIdMap[d]?.alias,\n  }))\n}\n\nexport const getColorIdMap = (builder: Builder): Record<string, { id: string; alias: string }> => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return {}\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorIdMap\n}\n","import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedVSeed,\n  ChartType,\n  CustomThemeConfig,\n  Locale,\n  Spec,\n  SpecPipe,\n  SpecPipeline,\n  VSeed,\n  VSeedBuilder,\n} from 'src/types'\nimport { buildAdvanced } from './buildAdvanced'\nimport { buildSpec } from './buildSpec'\nimport { build } from './build'\nimport { intl } from 'src/i18n'\nimport { getColorIdMap, getColorItems } from './advanced'\n\nexport class Builder implements VSeedBuilder {\n  private _vseed: VSeed\n  private _advancedVSeed: AdvancedVSeed | null = null\n  private _spec: Spec | null = null\n  private _performance: Record<string, string | number> = {}\n\n  private _locale: Locale\n\n  constructor(vseed: VSeed) {\n    this._vseed = vseed\n    this._locale = vseed.locale || intl.getLocale()\n  }\n\n  get locale() {\n    return this._locale\n  }\n\n  /**\n   * @description 构建spec\n   * @returns spec\n   */\n  build = <T extends Spec>(): T => build(this) as T\n\n  /**\n   * @description 构建spec\n   * @param advanced 高级配置\n   * @returns spec\n   */\n  buildSpec = (advanced: AdvancedVSeed): Spec => buildSpec(this, advanced)\n\n  /**\n   * @description 构建spec\n   * @returns AdvancedVSeed | null\n   */\n  buildAdvanced = (): AdvancedVSeed | null => buildAdvanced(this)\n\n  /**\n   * @description 获取颜色项, 颜色项可以重复,\n   * @returns 颜色项\n   */\n  getColorItems = () => getColorItems(this)\n\n  /**\n   * @description 获取颜色id映射\n   * @returns 颜色id映射\n   */\n  getColorIdMap = () => getColorIdMap(this)\n\n  /**\n   * @description 获取vseed\n   * @returns vseed\n   */\n  get vseed() {\n    return this._vseed\n  }\n\n  /**\n   * @description 设置vseed\n   * @param value vseed\n   */\n  set vseed(value) {\n    this._vseed = value\n  }\n\n  /**\n   * @description 获取advancedVSeed\n   * @returns advancedVSeed\n   */\n  get advancedVSeed() {\n    return this._advancedVSeed\n  }\n\n  /**\n   *\n   * @description 设置advancedVSeed\n   * @param value advancedVSeed\n   */\n  set advancedVSeed(value) {\n    this._advancedVSeed = value\n  }\n\n  /**\n   * @description 获取spec\n   * @returns spec\n   */\n  get spec() {\n    return this._spec\n  }\n\n  /**\n   * @description 设置spec\n   * @param value spec\n   */\n  set spec(value) {\n    this._spec = value\n  }\n\n  /**\n   * @description 获取performance, 统计了构建spec和advancedVSeed的时间\n   * @returns performance\n   */\n  get performance() {\n    return this._performance\n  }\n\n  /**\n   * @description 设置performance\n   * @param value performance\n   */\n  set performance(value) {\n    this._performance = value\n  }\n\n  /**\n   * @description 获取advancedPipeline\n   * @param chartType 图表类型\n   * @returns advancedPipeline\n   */\n  static getAdvancedPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customAdvancedPipe[chartType] as AdvancedPipe\n    const pipeline = Builder._advancedPipelineMap[chartType] as AdvancedPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 获取specPipeline\n   * @param chartType 图表类型\n   * @returns specPipeline\n   */\n\n  static getSpecPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customSpecPipe[chartType] as SpecPipe\n    const pipeline = Builder._specPipelineMap[chartType] as SpecPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 根据主题key获取主题配置\n   * @param themeKey 主题key\n   * @example Builder.getTheme('light'), 获取浅色主题\n   * @returns 主题配置\n   */\n  static getTheme = (themeKey?: string) => Builder._themeMap[themeKey || 'light']\n\n  /**\n   * @description 获取主题配置映射表\n   * @example Builder.getThemeMap()\n   * @returns 主题配置映射表\n   */\n  static getThemeMap = () => Builder._themeMap\n\n  /**\n   * @description 从vseed创建builder\n   * @param vseed 完整的vseed DSL\n   * @returns builder\n   */\n  static from = (vseed: VSeed) => new Builder(vseed)\n\n  static _advancedPipelineMap: Partial<Record<ChartType, AdvancedPipeline>> = {}\n  static _specPipelineMap: Partial<Record<ChartType, SpecPipeline>> = {}\n  static _customAdvancedPipe: Partial<Record<ChartType, AdvancedPipe>> = {}\n  static _customSpecPipe: Partial<Record<ChartType, SpecPipe>> = {}\n  static _themeMap: Record<string, CustomThemeConfig> = {}\n}\n","import {\n  registerArea,\n  registerAreaPercent,\n  registerBar,\n  registerBarParallel,\n  registerBarPercent,\n  registerColumn,\n  registerColumnParallel,\n  registerColumnPercent,\n  registerLine,\n  registerPie,\n  registerDonut,\n  registerRose,\n  registerRoseParallel,\n  registerFunnel,\n  registerScatter,\n  registerTable,\n  registerPivotTable,\n  registerHeatmap,\n  registerRadar,\n  registerDualAxis,\n  registerBoxPlot,\n  registerHistogram,\n} from './chartType'\nimport { registerDarkTheme, registerLightTheme } from './theme'\n\nexport const registerAll = () => {\n  // table\n  registerTable()\n  registerPivotTable()\n  // cartesian\n  registerLine()\n  registerColumn()\n  registerColumnParallel()\n  registerColumnPercent()\n  registerBar()\n  registerBarParallel()\n  registerBarPercent()\n  registerArea()\n  registerAreaPercent()\n  registerScatter()\n  registerDualAxis()\n  // polar\n  registerPie()\n  registerDonut()\n  registerRose()\n  registerRoseParallel()\n  registerRadar()\n  // other\n  registerFunnel()\n  registerHeatmap()\n  registerBoxPlot()\n  registerHistogram()\n  // theme\n  registerLightTheme()\n  registerDarkTheme()\n}\n","import { areaAdvancedPipeline, areaSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerArea = () => {\n  Builder._advancedPipelineMap['area'] = areaAdvancedPipeline\n  Builder._specPipelineMap['area'] = areaSpecPipeline\n}\n","import { areaPercentAdvancedPipeline, areaPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerAreaPercent = () => {\n  Builder._advancedPipelineMap['areaPercent'] = areaPercentAdvancedPipeline\n  Builder._specPipelineMap['areaPercent'] = areaPercentSpecPipeline\n}\n","import { barAdvancedPipeline, barSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBar = () => {\n  Builder._advancedPipelineMap['bar'] = barAdvancedPipeline\n  Builder._specPipelineMap['bar'] = barSpecPipeline\n}\n","import { barParallelAdvancedPipeline, barParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarParallel = () => {\n  Builder._advancedPipelineMap['barParallel'] = barParallelAdvancedPipeline\n  Builder._specPipelineMap['barParallel'] = barParallelSpecPipeline\n}\n","import { barPercentAdvancedPipeline, barPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarPercent = () => {\n  Builder._advancedPipelineMap['barPercent'] = barPercentAdvancedPipeline\n  Builder._specPipelineMap['barPercent'] = barPercentSpecPipeline\n}\n","import { boxplotAdvancedPipeline, boxplotSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBoxPlot = () => {\n  Builder._advancedPipelineMap['boxPlot'] = boxplotAdvancedPipeline\n  Builder._specPipelineMap['boxPlot'] = boxplotSpecPipeline\n}\n","import { columnAdvancedPipeline, columnSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumn = () => {\n  Builder._advancedPipelineMap['column'] = columnAdvancedPipeline\n  Builder._specPipelineMap['column'] = columnSpecPipeline\n}\n","import { columnParallelAdvancedPipeline, columnParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnParallel = () => {\n  Builder._advancedPipelineMap['columnParallel'] = columnParallelAdvancedPipeline\n  Builder._specPipelineMap['columnParallel'] = columnParallelSpecPipeline\n}\n","import { columnPercentAdvancedPipeline, columnPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnPercent = () => {\n  Builder._advancedPipelineMap['columnPercent'] = columnPercentAdvancedPipeline\n  Builder._specPipelineMap['columnPercent'] = columnPercentSpecPipeline\n}\n","import { donutAdvancedPipeline, donutSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDonut = () => {\n  Builder._advancedPipelineMap['donut'] = donutAdvancedPipeline\n  Builder._specPipelineMap['donut'] = donutSpecPipeline\n}\n","import { dualAxisAdvancedPipeline, dualAxisSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDualAxis = () => {\n  Builder._advancedPipelineMap['dualAxis'] = dualAxisAdvancedPipeline\n  Builder._specPipelineMap['dualAxis'] = dualAxisSpecPipeline\n}\n","import { funnelAdvancedPipeline, funnelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerFunnel = () => {\n  Builder._advancedPipelineMap['funnel'] = funnelAdvancedPipeline\n  Builder._specPipelineMap['funnel'] = funnelSpecPipeline\n}\n","import { heatmapAdvancedPipeline, heatmapSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHeatmap = () => {\n  Builder._advancedPipelineMap['heatmap'] = heatmapAdvancedPipeline\n  Builder._specPipelineMap['heatmap'] = heatmapSpecPipeline\n}\n","import { histogramSpecPipeline, histogramAdvancedPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHistogram = () => {\n  Builder._advancedPipelineMap['histogram'] = histogramAdvancedPipeline\n  Builder._specPipelineMap['histogram'] = histogramSpecPipeline\n}\n","import { lineAdvancedPipeline, lineSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerLine = () => {\n  Builder._advancedPipelineMap['line'] = lineAdvancedPipeline\n  Builder._specPipelineMap['line'] = lineSpecPipeline\n}\n","import { pieAdvancedPipeline, pieSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPie = () => {\n  Builder._advancedPipelineMap['pie'] = pieAdvancedPipeline\n  Builder._specPipelineMap['pie'] = pieSpecPipeline\n}\n","import { pivotTableAdvancedPipeline, pivotTableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPivotTable = () => {\n  Builder._advancedPipelineMap['pivotTable'] = pivotTableAdvancedPipeline\n  Builder._specPipelineMap['pivotTable'] = pivotTableSpecPipeline\n}\n","import { radarAdvancedPipeline, radarSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRadar = () => {\n  Builder._advancedPipelineMap['radar'] = radarAdvancedPipeline\n  Builder._specPipelineMap['radar'] = radarSpecPipeline\n}\n","import { roseAdvancedPipeline, roseSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRose = () => {\n  Builder._advancedPipelineMap['rose'] = roseAdvancedPipeline\n  Builder._specPipelineMap['rose'] = roseSpecPipeline\n}\n","import { roseParallelAdvancedPipeline, roseParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRoseParallel = () => {\n  Builder._advancedPipelineMap['roseParallel'] = roseParallelAdvancedPipeline\n  Builder._specPipelineMap['roseParallel'] = roseParallelSpecPipeline\n}\n","import { scatterAdvancedPipeline, scatterSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerScatter = () => {\n  Builder._advancedPipelineMap['scatter'] = scatterAdvancedPipeline\n  Builder._specPipelineMap['scatter'] = scatterSpecPipeline\n}\n","import { tableAdvancedPipeline, tableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerTable = () => {\n  Builder._advancedPipelineMap['table'] = tableAdvancedPipeline\n  Builder._specPipelineMap['table'] = tableSpecPipeline\n}\n","import type { CustomThemeConfig } from 'src/types'\nimport { Builder } from '../../builder'\nimport { darkTheme, lightTheme } from '../../../theme'\n\nexport const registerCustomTheme = (\n  key: string,\n  themeConfig:\n    | CustomThemeConfig\n    | ((props: { lightTheme: CustomThemeConfig; darkTheme: CustomThemeConfig }) => CustomThemeConfig),\n) => {\n  const customTheme =\n    typeof themeConfig === 'function' ? themeConfig({ lightTheme: lightTheme(), darkTheme: darkTheme() }) : themeConfig\n  Builder._themeMap[key] = customTheme\n}\n","import { darkTheme } from '../../../theme'\nimport { registerCustomTheme } from './custom'\n\nexport const registerDarkTheme = () => {\n  registerCustomTheme('dark', darkTheme())\n}\n","import { registerCustomTheme } from './custom'\nimport { lightTheme } from '../../../theme'\n\nexport const registerLightTheme = () => {\n  registerCustomTheme('light', lightTheme())\n}\n","// Reshape\nexport const ORIGINAL_DATA = '__OriginalData__'\nexport const Separator = '-'\n\n// Measures\nexport const FoldMeasureName = '__MeaName__'\nexport const FoldMeasureId = '__MeaId__'\nexport const FoldMeasureValue = '__MeaValue__'\nexport const MeasureId = FoldMeasureId\nexport const MeasureName = FoldMeasureName\n\n// Measures For DualAxis\nexport const FoldPrimaryMeasureValue = '__MeaPrimaryValue__'\nexport const FoldSecondaryMeasureValue = '__MeaSecondaryValue__'\nexport const DimAxisType = '__Dim_AxisType__'\n\n// Measures For Scatter\nexport const FoldXMeasureValue = '__MeaXValue__'\nexport const FoldYMeasureValue = '__MeaYValue__'\nexport const FoldXMeasureId = '__MeaXId__'\nexport const FoldYMeasureId = '__MeaYId__'\n// Encoding\nexport const XEncoding = '__Dim_X__'\nexport const YEncoding = '__Dim_Y__'\nexport const AngleEncoding = '__Dim_Angle__'\nexport const DetailEncoding = '__Dim_Detail__'\nexport const ColorEncoding = '__Dim_Color__'\nexport const ColorIdEncoding = '__Dim_ColorId__'\n\n// Measures For boxPlot\nexport const BoxPlotPivotIndicator = '__BoxPlot_Pivot_Indicator__'\nexport const Q1MeasureValue = '__Q1__'\nexport const Q3MeasureValue = '__Q3__'\nexport const LowerWhisker = '__Lower_Whisker__'\nexport const UpperWhisker = '__Upper_Whisker__'\nexport const OutliersMeasureId = '__Outliers__'\nexport const MedianMeasureId = '__Meadian__'\n\n// Measures For Histogram\nexport const BinStartMeasureId = '__BinStart__'\nexport const BinEndMeasureId = '__BinEnd__'\nexport const BinCountMeasureId = '__BinCount__'\nexport const BinPercentageMeasureId = '__BinPercentage__'\n","import type { Dataset, Dimension, Encoding, FoldInfo, Measure, Measures, UnfoldInfo } from 'src/types'\nimport { foldMeasures } from './foldMeasures'\nimport { FoldMeasureId, FoldMeasureName, FoldMeasureValue, Separator } from './constant'\nimport { unfoldDimensions } from './unfoldDimensions'\n\nexport const dataReshapeByEncoding = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  measures: Measure[],\n  encoding: Encoding,\n  options?: {\n    foldMeasureId?: string\n    foldMeasureName?: string\n    foldMeasureValue?: string\n    colorItemAsId?: boolean\n    colorMeasureId?: string\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n  unfoldInfo: UnfoldInfo\n} => {\n  const {\n    foldMeasureId = FoldMeasureId,\n    foldMeasureName = FoldMeasureName,\n    foldMeasureValue = FoldMeasureValue,\n    colorItemAsId = false,\n    colorMeasureId,\n    omitIds,\n  } = options || {}\n\n  // 合并所有指标为1个指标\n  const { dataset: foldedDataset, foldInfo } = foldMeasures(dataset, measures as Measures, {\n    measureId: foldMeasureId,\n    measureName: foldMeasureName,\n    measureValue: foldMeasureValue,\n    colorMeasureId,\n    omitIds,\n  })\n\n  // 展开指定的维度为指标\n  const { dataset: finalDataset, unfoldInfo } = unfoldDimensions(foldedDataset, dimensions, encoding, {\n    foldMeasureId,\n    separator: Separator,\n    colorItemAsId,\n  })\n  return { dataset: finalDataset, foldInfo, unfoldInfo }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { Dataset, FoldInfo, Measures } from 'src/types'\nimport { ColorEncoding, ColorIdEncoding, ORIGINAL_DATA } from './constant'\nimport { omit } from 'remeda'\n\n/**\n * 折叠指定的指标\n * @description 合并指定的指标为1个, 无论多少个, 都能转换为1个, 取名为fold, 意为折叠后混合在一起.\n */\nexport const foldMeasures = (\n  dataset: Dataset,\n  measures: Measures,\n  options: {\n    measureId: string\n    measureName: string\n    measureValue: string\n    colorMeasureId?: string\n    allowEmptyFold?: boolean\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n} => {\n  const { measureId, measureName, measureValue, colorMeasureId, allowEmptyFold = true, omitIds = [] } = options || {}\n\n  const foldInfo: FoldInfo = {\n    measureId,\n    measureName,\n    measureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n    foldMap: {},\n  }\n\n  if (!allowEmptyFold && measures.length === 0) {\n    return {\n      dataset,\n      foldInfo,\n    }\n  }\n\n  const result: Dataset = new Array(dataset.length * measures.length) as Dataset\n  let index = 0\n  const ids = measures.map((d) => d.id)\n  for (let i = 0; i < dataset.length; i++) {\n    for (let j = 0; j < measures.length; j++) {\n      const datum: Record<string, any> = omit({ ...dataset[i] }, [...ids, ...omitIds])\n\n      datum[ORIGINAL_DATA] = dataset[i]\n\n      const measure = measures[j]\n      const { id, alias } = measure\n\n      datum[id] = dataset[i][id] as unknown\n      datum[measureId] = id\n      datum[measureName] = alias || id\n      datum[measureValue] = dataset[i][id] as unknown\n\n      if (colorMeasureId) {\n        const value = (datum[ORIGINAL_DATA] as Record<string, string | number>)[colorMeasureId]\n        datum[ColorEncoding] = value\n        datum[ColorIdEncoding] = colorMeasureId\n\n        const valueNumber = Number(value)\n        foldInfo.statistics.colorMin = Math.min(foldInfo.statistics.colorMin, valueNumber)\n        foldInfo.statistics.colorMax = Math.max(foldInfo.statistics.colorMax, valueNumber)\n      }\n\n      const valueNumber = Number(datum[id])\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n\n      foldInfo.foldMap[id] = alias\n      result[index++] = datum\n    }\n  }\n\n  return {\n    dataset: result,\n    foldInfo,\n  }\n}\n","import type { Dataset, Datum, Dimension, Encoding, UnfoldInfo } from 'src/types'\nimport {\n  AngleEncoding,\n  XEncoding,\n  YEncoding,\n  ColorEncoding,\n  DetailEncoding,\n  ColorIdEncoding,\n  MeasureId,\n  MeasureName,\n} from './constant'\n\n/**\n * @description 展开并合并视觉通道的维度, 在foldMeasures后合并维度, 所以不需要进行笛卡尔积\n * @param dataset 原始数据集\n * @param dimensions 维度\n * @param encoding 编码\n * @param options\n * @returns\n */\nexport const unfoldDimensions = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  encoding: Encoding,\n  options: {\n    foldMeasureId: string\n    separator: string\n    colorItemAsId: boolean\n  },\n): {\n  dataset: Dataset\n  unfoldInfo: UnfoldInfo\n} => {\n  const { separator } = options\n\n  const unfoldInfo: UnfoldInfo = {\n    encodingAngle: AngleEncoding,\n    encodingX: XEncoding,\n    encodingY: YEncoding,\n    encodingDetail: DetailEncoding,\n    encodingColor: ColorEncoding,\n    encodingColorId: ColorIdEncoding,\n\n    colorItems: [],\n    colorIdMap: {},\n  }\n\n  // 每个通道对应的维度\n  const { color, x, y, detail, angle } = encoding\n  const angleDimensions = angle ? dimensions.filter((dim) => angle.includes(dim.id)) : []\n  const xDimensions = x ? dimensions.filter((dim) => x.includes(dim.id)) : []\n  const yDimensions = y ? dimensions.filter((dim) => y.includes(dim.id)) : []\n  const colorDimensions = color ? dimensions.filter((dim) => color.includes(dim.id)) : []\n  const detailDimensions = detail ? dimensions.filter((dim) => detail.includes(dim.id)) : []\n\n  // 离散图例项\n  const colorItems = new Set<string>()\n  const colorIdMap: Record<string, { id: string; alias: string }> = {}\n\n  // 遍历数据集, 按通道合并维度\n  for (let i = 0; i < dataset.length; i++) {\n    // 应用编码至Datum上\n    const datum = dataset[i]\n\n    /**\n     * !important 这是全仓库, 最最最重要的五行代码, 贯穿VSeed整个生命周期, 是化繁为简的绝对核心\n     * 1. 点睛之笔: 呼应foldMeasures, 此时此刻的datum一定是单点数据, 维度合并不可能造成任何冲突.\n     * 2. 数据即通道\n     * 3. 利用需要合并的维度, 直接进行join, 即可生成新的维度, 与指标彻底解耦;\n     * 4. 以下通道均在一次遍历中完成, 不存在性能问题\n     * 5. 以下通道均可放入多个维度\n     */\n    applyEncoding(AngleEncoding, angleDimensions, datum, separator)\n    applyEncoding(XEncoding, xDimensions, datum, separator)\n    applyEncoding(YEncoding, yDimensions, datum, separator)\n    applyEncoding(ColorEncoding, colorDimensions, datum, separator)\n    applyEncoding(DetailEncoding, detailDimensions, datum, separator)\n\n    // 处理离散的颜色图例\n    if (!colorDimensions.length || !datum[ColorEncoding]) {\n      // 无颜色通道, 则跳过\n      continue\n    }\n    const colorId = String(datum[ColorEncoding] ?? '')\n\n    datum[ColorIdEncoding] = colorId\n\n    colorIdMap[colorId] = {\n      id: colorId,\n      alias: getColorAliasItem(ColorEncoding, colorDimensions, datum, separator),\n    }\n    colorItems.add(colorId)\n  }\n\n  unfoldInfo.colorItems = Array.from(colorItems)\n  unfoldInfo.colorIdMap = colorIdMap\n\n  return {\n    dataset,\n    unfoldInfo,\n  }\n}\n\n/**\n * @description 应用编码至数据中, 此方法会原地修改数据\n * @param encoding 编码\n * @param dimensions 维度\n * @param datum 数据\n * @param separator 分隔符\n * @returns undefined\n */\nconst applyEncoding = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    datum[encoding] = dimensions.map((dim) => String(datum[dim.id])).join(separator)\n  }\n}\n\nconst getColorAliasItem = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    return dimensions\n      .map((dim) => {\n        if (dim.id === MeasureId) {\n          return String(datum[MeasureName])\n        }\n\n        return String(datum[dim.id])\n      })\n      .join(separator)\n  }\n  return ''\n}\n","import type { Datum } from 'src/types'\nimport type {\n  DimensionSelector,\n  MeasureSelector,\n  PartialDatumSelector,\n  Selector,\n  Selectors,\n  ValueSelector,\n} from '../types/dataSelector'\nimport { omit } from 'remeda'\n\n/**\n * 判断两个数字是否“近似相等”\n */\nfunction nearlyEqual(a: number, b: number, epsilon = 1e-8) {\n  // NaN 直接不相等\n  if (Number.isNaN(a) || Number.isNaN(b)) return false\n  // 引用同一个数 或 完全相等\n  if (a === b) return true\n  const diff = Math.abs(a - b)\n  return diff <= epsilon\n}\n\nexport const selector = (\n  vchartDatum: Datum,\n  selector: Selector | Selectors | undefined | null,\n  selectorMode: 'And' | 'Or' = 'And',\n) => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return true\n  }\n\n  // 过滤掉 vchart 相关字段\n  const vchartKeys = Object.keys(vchartDatum).filter((k) => k.toLocaleLowerCase().startsWith('__vchart'))\n  const datum = omit(vchartDatum, vchartKeys) as Datum\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n\n  return selectors[selectorMode === 'And' ? 'every' : 'some']((selector) => {\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      return selectByValue(selector, datum)\n    }\n\n    // 2. 指标选择器\n    else if (isMeasureSelector(selector)) {\n      return selectByMeasure(selector, datum)\n    }\n    // 3. 维度选择器\n    else if (isDimensionSelector(selector)) {\n      return selectByDmension(selector, datum)\n    }\n    // 4. 部分数据对象选择器\n    else if (isPartialDatumSelector(selector)) {\n      return selectByPartial(selector, datum)\n    }\n\n    return false\n  })\n}\n\nexport const selectorDatum = (datum: Datum, selector: Selector | Selectors | undefined | null): Datum[] => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return []\n  }\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n  let finalResult: Datum[] = []\n\n  for (const selector of selectors) {\n    const results: Datum[] = []\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      Object.entries(datum).forEach(([key, value]) => {\n        if (value === selector) {\n          results.push({ [key]: value } as Datum)\n        }\n      })\n    } else if (isMeasureSelector(selector) && selectByMeasure(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isDimensionSelector(selector) && selectByDmension(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isPartialDatumSelector(selector) && selectByPartial(selector, datum)) {\n      results.push(selector)\n    }\n\n    if (results.length) {\n      if (finalResult.length) {\n        finalResult = finalResult.flatMap((prev) => {\n          return results.map((r) => {\n            return {\n              ...prev,\n              ...r,\n            }\n          })\n        })\n      } else {\n        finalResult = results\n      }\n    } else {\n      finalResult = []\n      break\n    }\n  }\n\n  return finalResult\n}\n\nexport const isValueSelector = (selector: Selector): selector is ValueSelector => {\n  return typeof selector === 'string' || typeof selector === 'number'\n}\n\nexport const isPartialDatumSelector = (selector: Selector): selector is PartialDatumSelector => {\n  return typeof selector === 'object' && selector !== null\n}\n\nexport const isMeasureSelector = (selector: Selector): selector is MeasureSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.operator as string) ||\n      ['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.op as string))\n  )\n}\n\nexport const isDimensionSelector = (selector: Selector): selector is DimensionSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['in', 'not in'].includes(selector.operator as string) || ['in', 'not in'].includes(selector.op as string))\n  )\n}\n\nexport const selectByMeasure = (selector: MeasureSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n\n  switch (op) {\n    case '=':\n      if (\n        String(datum[selector.field]) === String(selectorValueArr[0]) ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '==':\n      if (datum[selector.field] === selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '!=':\n      if (datum[selector.field] !== selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '>':\n      if (\n        datum[selector.field] > selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<':\n      if (\n        datum[selector.field] < selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '>=':\n      if (\n        datum[selector.field] >= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<=':\n      if (\n        datum[selector.field] <= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case 'between':\n      if (\n        Array.isArray(selector.value) &&\n        (datum[selector.field] >= selectorValueArr[0] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))) &&\n        (datum[selector.field] <= selectorValueArr[1] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[1])))\n      ) {\n        return true\n      }\n      break\n  }\n  return false\n}\n\nexport const selectByDmension = (selector: DimensionSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n  switch (op) {\n    case 'in':\n      if (selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n    case 'not in':\n      if (!selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n  }\n\n  return false\n}\n\nexport const selectByPartial = (selector: PartialDatumSelector, datum: Datum) => {\n  return Object.keys(selector).every((key) => datum[key] === selector[key])\n}\n\nexport const selectByValue = (selector: ValueSelector, datum: Datum) => {\n  return Object.values(datum).some((v) => v === selector)\n}\n","import type { TranslateRecordType } from '../types'\n\nexport const translateMap: TranslateRecordType = {\n  指标名称: {\n    'en-US': 'MeasureName',\n    'zh-CN': '指标名称',\n  },\n  指标Id: {\n    'en-US': 'MeasureId',\n    'zh-CN': '指标Id',\n  },\n  指标值: {\n    'en-US': 'MeasureValue',\n    'zh-CN': '指标值',\n  },\n  异常点: {\n    'en-US': 'Outlier',\n    'zh-CN': '异常点',\n  },\n  上边界: {\n    'en-US': 'Upper Whisker',\n    'zh-CN': '上边界',\n  },\n  上四分位数: {\n    'en-US': 'Q3',\n    'zh-CN': '75分位数',\n  },\n  中位数: {\n    'en-US': 'Q2',\n    'zh-CN': '中位数',\n  },\n  下四分位数: {\n    'en-US': 'Q1',\n    'zh-CN': '25分位数',\n  },\n  下边界: {\n    'en-US': 'Lower Whisker',\n    'zh-CN': '下边界',\n  },\n}\n","import { isNullish } from 'remeda'\nimport { translateMap } from './i18nData'\nimport type { Locale, TranslateRecordType } from '../types'\n\nclass Intl {\n  private static instance: Intl\n\n  private translateMap: TranslateRecordType = translateMap\n  private locale: Locale = 'zh-CN'\n\n  canTranslate = (value: string) => !!this.translateMap[value]\n\n  /**\n   * @example i18n`指标名称`\n   */\n  i18n = (segments: TemplateStringsArray, ...values: Array<number | string>) => {\n    const text = segments.map((segment, index) => segment + (values[index] || '')).join('')\n    const translatedText = this.translateMap?.[text]?.[this.locale]\n    if (isNullish(translatedText)) {\n      return text\n    }\n    return translatedText\n  }\n\n  setLocale = (locale: Locale): void => {\n    this.locale = locale\n  }\n\n  getLocale: () => Locale = () => this.locale\n\n  public static getInstance() {\n    if (!Intl.instance) {\n      Intl.instance = new Intl()\n    }\n\n    return Intl.instance\n  }\n}\n\nconst intl = Intl.getInstance()\n\nexport { intl }\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  encodingForLine,\n  defaultMeasures,\n  defaultMeasureId,\n  defaultDimensions,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const areaAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForLine],\n    [buildMeasures(['yAxis', 'detail']), encodingForLine, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaPercentConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  encodingForLine,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const areaPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForLine],\n    [buildMeasures(['yAxis', 'detail']), encodingForLine, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  buildMeasures,\n  pivotAdapter,\n  barConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['xAxis', 'detail']), defaultEncodingForBar],\n    [buildMeasures(['xAxis', 'detail']), encodingForBar, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barParallelConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['xAxis', 'detail']), defaultEncodingForBar],\n    [buildMeasures(['xAxis', 'detail']), encodingForBar, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barPercentConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['xAxis', 'detail']), defaultEncodingForBar],\n    [buildMeasures(['xAxis', 'detail']), encodingForBar, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  if ((!encoding.value || encoding.value.length <= 1) && encoding.color && encoding.color.length > 1) {\n    encoding.color = encoding.color.filter((c) => c !== MeasureId)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.q1 = unique(measures.filter((item) => item.encoding === 'q1').map((item) => item.id))\n  encoding.median = unique(measures.filter((item) => item.encoding === 'median').map((item) => item.id))\n  encoding.q3 = unique(measures.filter((item) => item.encoding === 'q3').map((item) => item.id))\n  encoding.min = unique(measures.filter((item) => item.encoding === 'min').map((item) => item.id))\n  encoding.max = unique(measures.filter((item) => item.encoding === 'max').map((item) => item.id))\n  encoding.outliers = unique(measures.filter((item) => item.encoding === 'outliers').map((item) => item.id))\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithBoxplotEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  pickDimensionsForReshape,\n  defaultEncodingForBoxplot,\n  encodingForBoxplot,\n  reshapeWithBoxplotEncoding,\n  boxplotConfig,\n} from '../pipes'\n\nexport const boxplotAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  boxplotConfig,\n\n  encodingAdapter(\n    [buildMeasures(['value', 'q1', 'q3', 'min', 'max', 'median', 'outliers']), defaultEncodingForBoxplot],\n    [\n      buildMeasures(['value', 'q1', 'q3', 'min', 'max', 'median', 'outliers']),\n      encodingForBoxplot,\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithBoxplotEncoding], [pivotReshapeWithBoxplotEncoding]),\n\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const boxplotConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'whiskers',\n    'boxMaxWidth',\n    'boxGapInGroup',\n\n    'dimensionLinkage',\n  ]) as Config['boxPlot']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport type { AdvancedPipe, ColumnParallel, Dataset, Dimension, Encoding } from 'src/types'\nimport { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\n\nexport const reshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config, measures = [] } = advancedVSeed\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n\n  const whiskers = config?.[chartType as 'boxPlot']?.whiskers\n\n  let newDatasets: any[] = []\n  let foldInfo: any = {}\n  let unfoldInfo: any = {}\n\n  if (encoding.value?.length) {\n    const boxPlotDataList: Dataset = []\n    encoding.value.forEach((f) => {\n      const m = measures.find((m) => m.id === f)\n      const boxPlotData = boxplot(dataset, {\n        field: f,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        whiskers,\n        outputNames: {\n          q1: Q1MeasureValue,\n          q3: Q3MeasureValue,\n          lowerWhisker: LowerWhisker,\n          upperWhisker: UpperWhisker,\n          median: MedianMeasureId,\n          outliers: OutliersMeasureId,\n        },\n      }) as Dataset\n\n      boxPlotData.forEach((datum) => {\n        datum[FoldMeasureId] = f\n        datum[FoldMeasureName] = m?.alias ?? f\n      })\n      boxPlotDataList.push(...boxPlotData)\n    })\n    const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (\n    encoding.q1?.length &&\n    encoding.q3?.length &&\n    encoding.min?.length &&\n    encoding.max?.length &&\n    encoding.median?.length\n  ) {\n    const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((datum) => {\n      datum[UpperWhisker] = datum[encoding.max![0]]\n      datum[LowerWhisker] = datum[encoding.min![0]]\n      datum[Q1MeasureValue] = datum[encoding.q1![0]]\n      datum[Q3MeasureValue] = datum[encoding.q3![0]]\n      datum[MedianMeasureId] = datum[encoding.median![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = {}\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n  }\n}\n","import { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport { DEFAULT_PARENT_ID, revisedBoxPlotFieldKey } from 'src/pipeline/utils'\nimport type { AdvancedPipe, ColumnParallel, Dataset, DatasetReshapeInfo, Dimension, Encoding } from 'src/types'\n\nexport const pivotReshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'boxPlot']\n  const whiskers = chartConfig?.whiskers\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((measureGroup, index) => {\n    const groupId = measureGroup[0].parentId ?? DEFAULT_PARENT_ID\n    let newDatasets: any[] = []\n    let foldInfo: any = {}\n    let unfoldInfo: any = {}\n    const validEncodingIds = (encoding.value || []).filter((id) => measureGroup.find((field) => field.id === id))\n\n    if (validEncodingIds.length) {\n      const boxPlotDataList: Dataset = []\n      validEncodingIds.forEach((f) => {\n        const m = measureGroup.find((m) => m.id === f)\n        const boxPlotData = boxplot(dataset, {\n          field: f,\n          groupField: [\n            ...(encoding.x ?? []),\n            ...(encoding.color ?? []),\n            ...rowColumnFields.map((item: Dimension) => item.id),\n          ] as string[],\n          whiskers,\n          outputNames: {\n            q1: Q1MeasureValue,\n            q3: Q3MeasureValue,\n            lowerWhisker: LowerWhisker,\n            upperWhisker: UpperWhisker,\n            median: MedianMeasureId,\n            outliers: OutliersMeasureId,\n          },\n        }) as Dataset\n\n        boxPlotData.forEach((datum) => {\n          datum[FoldMeasureId] = f\n          datum[FoldMeasureName] = m?.alias ?? f\n          datum[revisedBoxPlotFieldKey(Q1MeasureValue, groupId)] = datum[Q1MeasureValue]\n          datum[revisedBoxPlotFieldKey(Q3MeasureValue, groupId)] = datum[Q3MeasureValue]\n          datum[revisedBoxPlotFieldKey(LowerWhisker, groupId)] = datum[LowerWhisker]\n          datum[revisedBoxPlotFieldKey(UpperWhisker, groupId)] = datum[UpperWhisker]\n          datum[revisedBoxPlotFieldKey(MedianMeasureId, groupId)] = datum[MedianMeasureId]\n          datum[revisedBoxPlotFieldKey(OutliersMeasureId, groupId)] = datum[OutliersMeasureId]\n        })\n\n        boxPlotDataList.push(...boxPlotData)\n      })\n      const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (\n      encoding.q1?.length &&\n      encoding.q3?.length &&\n      encoding.min?.length &&\n      encoding.max?.length &&\n      encoding.median?.length\n    ) {\n      const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((datum) => {\n        datum[UpperWhisker] = datum[encoding.max![0]]\n        datum[revisedBoxPlotFieldKey(Q1MeasureValue, groupId)] = datum[encoding.max![0]]\n        datum[LowerWhisker] = datum[encoding.min![0]]\n        datum[revisedBoxPlotFieldKey(LowerWhisker, groupId)] = datum[encoding.min![0]]\n        datum[Q1MeasureValue] = datum[encoding.q1![0]]\n        datum[revisedBoxPlotFieldKey(Q1MeasureValue, groupId)] = datum[encoding.q1![0]]\n        datum[Q3MeasureValue] = datum[encoding.q3![0]]\n        datum[revisedBoxPlotFieldKey(Q3MeasureValue, groupId)] = datum[encoding.q3![0]]\n        datum[MedianMeasureId] = datum[encoding.median![0]]\n        datum[revisedBoxPlotFieldKey(MedianMeasureId, groupId)] = datum[encoding.median![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = {}\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickDimensionsForReshape,\n  regressionLine,\n} from '../pipes'\n\nexport const columnAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForColumn],\n    [buildMeasures(['yAxis', 'detail']), encodingForColumn, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  columnParallelConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const columnParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForColumn],\n    [buildMeasures(['yAxis', 'detail']), encodingForColumn, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnPercentConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const columnPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForColumn],\n    [buildMeasures(['yAxis', 'detail']), encodingForColumn, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  donutConfig,\n  encodingForPie,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const donutAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['angle', 'detail']), defaultEncodingForPie],\n    [buildMeasures(['angle', 'detail']), encodingForPie, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  donutConfig,\n  theme,\n  annotation,\n]\n","import type { AdvancedPipe, DualAxisMeasure, MeasureEncoding, Measures } from 'src/types'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport { ensureParentIdInitialized, isCommonMeasureEncoding } from './utils'\nimport { DEFAULT_DUAL_CHART_TYPE, isDualAxisChartType } from 'src/pipeline/utils/chatType'\n\nexport const buildMeasuresForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [] } = advancedVSeed\n  const measuresByView = {} as { [key: string]: Measures }\n  const parentIds: string[] = []\n\n  for (let index = 0; index < measures.length; index++) {\n    const item = measures[index]\n    const encoding = item.encoding\n    const parentId = item.parentId || DEFAULT_PARENT_ID\n    const isPrimaryYAxis = encoding === 'primaryYAxis'\n    const isSecondaryYAxis = encoding === 'secondaryYAxis'\n    const isOtherEncoding = item.encoding && isCommonMeasureEncoding(encoding as MeasureEncoding)\n\n    ensureParentIdInitialized(parentId, measuresByView, parentIds)\n\n    if (isPrimaryYAxis) {\n      measuresByView[parentId].push(item)\n\n      if (!isDualAxisChartType((item as DualAxisMeasure).chartType)) {\n        ;(item as any).chartType = DEFAULT_DUAL_CHART_TYPE.primary\n      }\n    } else if (isSecondaryYAxis) {\n      measuresByView[parentId].push(item)\n\n      if (!isDualAxisChartType((item as DualAxisMeasure).chartType)) {\n        ;(item as any).chartType = DEFAULT_DUAL_CHART_TYPE.secondary\n      }\n    } else if (!isOtherEncoding) {\n      const primaryCount = measuresByView[parentId].filter((m) => m.encoding === 'primaryYAxis').length\n      item.encoding = primaryCount === 0 ? 'primaryYAxis' : 'secondaryYAxis'\n\n      if (!isDualAxisChartType((item as DualAxisMeasure).chartType)) {\n        ;(item as any).chartType =\n          item.encoding === 'primaryYAxis' ? DEFAULT_DUAL_CHART_TYPE.primary : DEFAULT_DUAL_CHART_TYPE.secondary\n      }\n\n      measuresByView[parentId].push(item)\n    }\n  }\n\n  advancedVSeed.reshapeMeasures = parentIds.map((pid) => measuresByView[pid]).filter((m) => m.length > 0)\n\n  return advancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  encodingForDualAxis,\n  reshapeWithDualEncoding,\n  pivotReshapeWithDualEncoding,\n  buildMeasuresForDualAxis,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForDualAxis,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const dualAxisAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasuresForDualAxis, defaultEncodingForDualAxis],\n    [buildMeasuresForDualAxis, encodingForDualAxis, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithDualEncoding], [pivotReshapeWithDualEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { uniqueBy, unique } from 'remeda'\nimport { dataReshapeByEncoding, DimAxisType, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { DEFAULT_DUAL_CHART_TYPE } from 'src/pipeline/utils/chatType'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Datum,\n  Dimension,\n  DualAxisMeasure,\n  Encoding,\n  FoldInfo,\n  Measure,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = (advancedVSeed.reshapeMeasures?.[0] ?? []) as Measure[]\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n\n  const datasets: Dataset[] = []\n  const primaryMeasures = measures.filter((m) => m.encoding === 'primaryYAxis')\n  const secondaryMeasures = measures.filter((m) => m.encoding === 'secondaryYAxis')\n  const primaryChartTypes: string[] = unique(primaryMeasures.map((m) => (m as DualAxisMeasure).chartType!))\n  const secondaryChartTypes: string[] = unique(secondaryMeasures.map((m) => (m as DualAxisMeasure).chartType!))\n\n  if (!primaryChartTypes.length) {\n    primaryChartTypes.push(DEFAULT_DUAL_CHART_TYPE.primary)\n  }\n\n  if (!secondaryChartTypes.length) {\n    secondaryChartTypes.push(DEFAULT_DUAL_CHART_TYPE.secondary)\n  }\n\n  primaryChartTypes.forEach((chartType) => {\n    const primaryResult = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      uniqueBy(\n        primaryMeasures.filter((m) => (m as DualAxisMeasure).chartType! === chartType),\n        (item: Measure) => item.id,\n      ),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldPrimaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    primaryResult.dataset.forEach((row: Datum) => {\n      row[DimAxisType] = 'primaryYAxis'\n    })\n\n    datasets.push(primaryResult.dataset)\n    foldInfoList.push(primaryResult.foldInfo)\n    unfoldInfoList.push(primaryResult.unfoldInfo)\n  })\n\n  secondaryChartTypes.forEach((chartType) => {\n    const secondaryResult = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      uniqueBy(\n        secondaryMeasures.filter((m) => (m as DualAxisMeasure).chartType! === chartType),\n        (item: Measure) => item.id,\n      ),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldSecondaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    secondaryResult.dataset.forEach((row: Datum) => {\n      row[DimAxisType] = 'secondaryYAxis'\n    })\n\n    datasets.push(secondaryResult.dataset)\n    foldInfoList.push(secondaryResult.foldInfo)\n    unfoldInfoList.push(secondaryResult.unfoldInfo)\n  })\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { uniqueBy, unique } from 'remeda'\nimport { dataReshapeByEncoding, DimAxisType, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { DEFAULT_DUAL_CHART_TYPE } from 'src/index'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Datum,\n  Dimension,\n  DualAxisMeasure,\n  Encoding,\n  FoldInfo,\n  Measure,\n  Measures,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const allMeasuresIds = reshapeMeasures.flatMap((measureGroup: Measures) => measureGroup.map((m) => m.id))\n\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((measures: Measures, index: number) => {\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const primaryMeasures = measures.filter((m) => m.encoding === 'primaryYAxis')\n    const secondaryMeasures = measures.filter((m) => m.encoding === 'secondaryYAxis')\n    const primaryChartTypes: string[] = unique(primaryMeasures.map((m) => (m as DualAxisMeasure).chartType!))\n    const secondaryChartTypes: string[] = unique(secondaryMeasures.map((m) => (m as DualAxisMeasure).chartType!))\n\n    if (!primaryChartTypes.length) {\n      primaryChartTypes.push(DEFAULT_DUAL_CHART_TYPE.primary)\n    }\n\n    if (!secondaryChartTypes.length) {\n      secondaryChartTypes.push(DEFAULT_DUAL_CHART_TYPE.secondary)\n    }\n\n    primaryChartTypes.forEach((chartType) => {\n      const primaryResult = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item: Dimension) => item.id),\n        uniqueBy(\n          primaryMeasures.filter((m) => (m as DualAxisMeasure).chartType! === chartType),\n          (item: Measure) => item.id,\n        ),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldPrimaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasuresIds,\n        },\n      )\n\n      primaryResult.dataset.forEach((row: Datum) => {\n        row[DimAxisType] = 'primaryYAxis'\n      })\n\n      datasets.push(primaryResult.dataset)\n      foldInfoList.push(primaryResult.foldInfo)\n      unfoldInfoList.push(primaryResult.unfoldInfo)\n    })\n\n    secondaryChartTypes.forEach((chartType) => {\n      const secondaryResult = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item: Dimension) => item.id),\n        uniqueBy(\n          secondaryMeasures.filter((m) => (m as DualAxisMeasure).chartType! === chartType),\n          (item: Measure) => item.id,\n        ),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldSecondaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasuresIds,\n        },\n      )\n\n      secondaryResult.dataset.forEach((row: Datum) => {\n        row[DimAxisType] = 'secondaryYAxis'\n      })\n\n      datasets.push(secondaryResult.dataset)\n      foldInfoList.push(secondaryResult.foldInfo)\n      unfoldInfoList.push(secondaryResult.unfoldInfo)\n    })\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(datasets.flat(2))\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const dualAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    // common\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n\n    // only for dualAxis\n    'alignTicks',\n    'primaryYAxis',\n    'secondaryYAxis',\n    'crosshairLine',\n    'crosshairRect',\n\n    'barGapInGroup',\n    'barMaxWidth',\n    'stackCornerRadius',\n\n    'dimensionLinkage',\n  ]) as Config['dualAxis']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.color =\n    !isMultiMeasure && uniqueDimIds.some((id) => id !== MeasureId)\n      ? uniqueDimIds.filter((id) => id !== MeasureId)\n      : uniqueDimIds.slice(0)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  funnelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForFunnel,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForFunnel,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const funnelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['size', 'detail']), defaultEncodingForFunnel],\n    [buildMeasures(['size', 'detail']), encodingForFunnel, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  funnelConfig,\n  theme,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.y = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第2个维度放置于Y轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  // x\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    if (dimensions.length > 1) {\n      encoding.y = dimensions.slice(1).map((item) => item.id)\n    } else {\n      encoding.y = dimensions.slice(0).map((item) => item.id)\n    }\n  }\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  const colorDims = unique(\n    measures.filter((item) => item.encoding === 'color' || !item.encoding).map((item) => item.id),\n  )\n  if (colorDims.length > 0) {\n    encoding.color = [colorDims[0]]\n  }\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  heatmapConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForHeatmap,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForHeatmap,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const heatmapAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['color', 'detail']), defaultEncodingForHeatmap],\n    [buildMeasures(['color', 'detail']), encodingForHeatmap, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  heatmapConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, false)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d: string) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail?.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip?.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label?.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  histogramConfig,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithHistogramEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  encodingAdapter,\n  pickDimensionsForReshape,\n  defaultEncodingForHistogram,\n  encodingForHistogram,\n  reshapeWithHistogramEncoding,\n  regressionLine,\n} from '../pipes'\nimport { histogramXAxisConfig } from '../pipes/config/histogram'\n\nexport const histogramAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  histogramConfig,\n\n  encodingAdapter(\n    [buildMeasures(['value', 'x0', 'x1', 'yAxis', 'detail']), defaultEncodingForHistogram],\n    [buildMeasures(['value', 'x0', 'x1', 'yAxis', 'detail']), encodingForHistogram, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithHistogramEncoding], [pivotReshapeWithHistogramEncoding]),\n\n  histogramXAxisConfig,\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { merge } from '@visactor/vutils'\nimport { pick } from 'remeda'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config, Dimension } from 'src/types'\n\nexport const histogramConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const hasColorEncoding = (advancedVSeed?.dimensions || []).find((field: Dimension) => field?.encoding === 'color')\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'binCount',\n    'binStep',\n    'binValueType',\n\n    'dimensionLinkage',\n  ]) as Config['histogram']\n\n  let config = replaceNullToUndefined(pickedConfig)\n\n  if (pickedConfig?.binValueType === 'percentage') {\n    config = merge(\n      {},\n      {\n        yAxis: {\n          autoFomat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n        label: {\n          autoFormat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n      },\n      config,\n    )\n  }\n  if (!hasColorEncoding && !config?.legend?.enable) {\n    config = {\n      ...config,\n      legend: {\n        ...config?.legend,\n        enable: false,\n      },\n    }\n  }\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n\nexport const histogramXAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const { dataset = [] } = advancedVSeed\n  const flattenDatasert = dataset.flat()\n  const minValue = Math.min(...flattenDatasert.map((v) => +v[BinStartMeasureId]))\n  const maxValue = Math.max(...flattenDatasert.map((v) => +v[BinEndMeasureId]))\n\n  const chartConfig = result.config?.[chartType] as any\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...chartConfig,\n      xAxis: {\n        min: Number.isNaN(minValue) ? undefined : minValue,\n        max: Number.isNaN(maxValue) ? undefined : maxValue,\n        ...(chartConfig?.xAxis || {}),\n      },\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport type { AdvancedPipe, AdvancedVSeed, ColumnParallel, Dataset, Dimension, Encoding, FoldInfo } from 'src/types'\nimport { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes/color/colorAdapter'\n\nexport const reshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config, measures = [] } = advancedVSeed\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  let newDatasets: any[] = []\n  let foldInfo: FoldInfo = {\n    foldMap: {},\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n  }\n  let unfoldInfo: any = {}\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n\n  if (encoding.value?.length) {\n    const valueField = encoding.value[0]\n    const m = measures.find((m) => m.id === valueField)\n    const binData = bin(dataset, {\n      field: valueField,\n      groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n      bins: binCount,\n      step: binStep,\n      outputNames: {\n        x0: BinStartMeasureId,\n        x1: BinEndMeasureId,\n        count: BinCountMeasureId,\n        percentage: BinPercentageMeasureId,\n      },\n    }) as Dataset\n\n    binData.forEach((datum) => {\n      datum[FoldMeasureId] = valueField\n      datum[FoldMeasureName] = m?.alias ?? valueField\n      const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n      datum[FoldMeasureValue] = valueNumber\n      datum[valueField] = valueNumber\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n    })\n    if (m?.id) {\n      foldInfo.foldMap[m?.id] = m?.alias\n    }\n\n    const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n    const res = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      measures.filter((item) => encoding.y?.includes(item.id)).slice(0, 1),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        colorMeasureId,\n      },\n    )\n\n    res.dataset.forEach((datum) => {\n      datum[BinStartMeasureId] = datum[encoding.x0![0]]\n      datum[BinEndMeasureId] = datum[encoding.x1![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = res.foldInfo\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n  }\n}\n","import { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Datum,\n  Dimension,\n  Encoding,\n  FoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((subMeasures, index) => {\n    if (!subMeasures) {\n      return\n    }\n    const groupId = subMeasures[0].id ?? DEFAULT_PARENT_ID\n\n    let newDatasets: any[] = []\n    let foldInfo: FoldInfo = {\n      foldMap: {},\n      measureId: FoldMeasureId,\n      measureName: FoldMeasureName,\n      measureValue: FoldMeasureValue,\n      statistics: {\n        max: -Infinity,\n        min: Infinity,\n        sum: 0,\n        count: 0,\n        colorMin: Infinity,\n        colorMax: -Infinity,\n      },\n    }\n    let unfoldInfo: any = {}\n\n    if (encoding.value?.length) {\n      const valueField = encoding.value[0]\n      const m = subMeasures.find((m) => m.id === valueField)\n      const binData = bin(dataset, {\n        field: valueField,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        facetField: rowColumnFields.map((item: Dimension) => item.id),\n        bins: binCount,\n        step: binStep,\n        outputNames: {\n          x0: BinStartMeasureId,\n          x1: BinEndMeasureId,\n          count: BinCountMeasureId,\n          percentage: BinPercentageMeasureId,\n        },\n      }) as Dataset\n\n      binData.forEach((datum: Datum) => {\n        datum[FoldMeasureId] = valueField\n        datum[FoldMeasureName] = m?.alias ?? valueField\n        const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n        datum[FoldMeasureValue] = valueNumber\n        datum[valueField] = valueNumber\n\n        foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n        foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n        foldInfo.statistics.sum += valueNumber\n        foldInfo.statistics.count++\n      })\n      if (m?.id) {\n        foldInfo.foldMap[m?.id] = m?.alias\n      }\n\n      const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n      const res = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item: Dimension) => item.id),\n        subMeasures.filter((item) => encoding.y?.includes(item.id)).slice(0, 1),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          colorMeasureId,\n        },\n      )\n\n      res.dataset.forEach((datum) => {\n        datum[BinStartMeasureId] = datum[encoding.x0![0]]\n        datum[BinEndMeasureId] = datum[encoding.x1![0]]\n        datum[FoldMeasureId] = datum[encoding.y![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = res.foldInfo\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  lineConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForLine,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const lineAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['yAxis', 'detail']), defaultEncodingForLine],\n    [buildMeasures(['yAxis', 'detail']), encodingForLine, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  lineConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  pieConfig,\n  annotation,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForPie,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const pieAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['angle', 'detail']), defaultEncodingForPie],\n    [buildMeasures(['angle', 'detail']), encodingForPie, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  pieConfig,\n  theme,\n  annotation,\n]\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1)\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.detail = [] // 雷达图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = []\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // radius\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortLegend,\n  radarConfig,\n  encodingForRadar,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForRadar,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const radarAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['radius', 'detail']), defaultEncodingForRadar],\n    [buildMeasures(['radius', 'detail']), encodingForRadar, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  // sortXBandAxis,\n  sortLegend,\n  radarConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const roseAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['angle', 'detail']), defaultEncodingForRose],\n    [buildMeasures(['angle', 'detail']), encodingForRose, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseParallelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const roseParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures(['radius', 'detail']), defaultEncodingForRose],\n    [buildMeasures(['radius', 'detail']), encodingForRose, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { AdvancedPipe, MeasureEncoding, Measures } from 'src/types'\nimport { clone } from 'remeda'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport { ensureParentIdInitialized, isCommonMeasureEncoding } from './utils'\n\nexport const buildMeasuresForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [] } = advancedVSeed\n  const measuresByView = {} as { [key: string]: Measures }\n  const parentIds: string[] = []\n\n  for (let index = 0; index < measures.length; index++) {\n    const item = measures[index]\n    const encoding = item.encoding\n    const parentId = item.parentId || DEFAULT_PARENT_ID\n    const isYAxis = encoding === 'yAxis'\n    const isXAxis = encoding === 'xAxis'\n    const isOtherEncoding = item.encoding && isCommonMeasureEncoding(encoding as MeasureEncoding)\n\n    ensureParentIdInitialized(parentId, measuresByView, parentIds)\n\n    if (isYAxis) {\n      measuresByView[parentId].push(item)\n    } else if (isXAxis) {\n      measuresByView[parentId].push(item)\n    } else if (!isOtherEncoding && encoding !== 'size') {\n      const xCount = measuresByView[parentId].filter((m) => m.encoding === 'xAxis').length\n      item.encoding = xCount === 0 ? 'xAxis' : 'yAxis'\n      measuresByView[parentId].push(item)\n    }\n  }\n\n  advancedVSeed.reshapeMeasures = parentIds\n    .map((pid) => {\n      const basicMeasures = measuresByView[pid]\n      const xCount = basicMeasures.filter((m) => m.encoding === 'xAxis').length\n      const yCount = basicMeasures.filter((m) => m.encoding === 'yAxis').length\n\n      if (yCount === 0 && xCount > 0) {\n        const cloneMeasure = clone(basicMeasures[0])\n        cloneMeasure.encoding = 'yAxis'\n\n        return [...basicMeasures, cloneMeasure]\n      }\n\n      return basicMeasures\n    })\n    .filter((m) => m.length > 0)\n\n  return advancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const defaultEncodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], dimensions = [] } = advancedVSeed\n\n  // exist encoding condition\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  // color\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size').map((item) => item.id))\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color, ...encoding.size])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  scatterConfig,\n  encodingForScatter,\n  buildMeasuresForScatter,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForScatter,\n  pickDimensionsForReshape,\n  regressionLine,\n} from '../pipes'\nimport { reshapeWithScatterEncoding } from '../pipes/reshape/reshapeWithScatterEncoding'\nimport { pivotReshapeWithScatterEncoding } from '../pipes/reshape/pivotReshapeWithScatterEncoding'\n\nexport const scatterAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasuresForScatter, defaultEncodingForScatter],\n    [buildMeasuresForScatter, encodingForScatter, pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithScatterEncoding], [pivotReshapeWithScatterEncoding]),\n\n  scatterConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import { uniqueBy } from 'remeda'\nimport {\n  dataReshapeByEncoding,\n  FoldXMeasureId,\n  FoldXMeasureValue,\n  FoldYMeasureId,\n  FoldYMeasureValue,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Dimension,\n  Encoding,\n  FoldInfo,\n  Measure,\n  Measures,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType, reshapeMeasures } = advancedVSeed\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const measures = reshapeMeasures?.[0] ?? []\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n\n  const datasets: Dataset[] = []\n  const xMeasures = measures.filter((m) => m.encoding === 'xAxis') as Measures\n  const yMeasures = measures.filter((m) => m.encoding === 'yAxis') as Measures\n\n  const xResult = dataReshapeByEncoding(\n    dataset,\n    uniqueBy(dimensions, (d: Dimension) => d.id),\n    uniqueBy(xMeasures, (d: Measure) => d.id),\n    encoding as Encoding,\n    {\n      foldMeasureValue: FoldXMeasureValue,\n      foldMeasureId: FoldXMeasureId,\n      colorItemAsId: true,\n      colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n    },\n  )\n\n  datasets.push(xResult.dataset)\n  foldInfoList.push(xResult.foldInfo)\n  unfoldInfoList.push(xResult.unfoldInfo)\n\n  const yResult = dataReshapeByEncoding(\n    datasets[0],\n    uniqueBy(dimensions, (d: Dimension) => d.id),\n    uniqueBy(yMeasures, (d: Measure) => d.id),\n    encoding as Encoding,\n    {\n      foldMeasureValue: FoldYMeasureValue,\n      foldMeasureId: FoldYMeasureId,\n      colorItemAsId: true,\n      colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n    },\n  )\n\n  datasets[0] = yResult.dataset\n  foldInfoList.push(yResult.foldInfo)\n  unfoldInfoList.push(yResult.unfoldInfo)\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets[0],\n\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { dataReshapeByEncoding, FoldXMeasureValue, FoldYMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  FoldInfo,\n  Measure,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const allMeasuresIds = reshapeMeasures.flatMap((measureGroup) => measureGroup.map((m) => m.id))\n\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((measures: Measure[], index) => {\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const xMeasures = measures.filter((m) => m.encoding === 'xAxis')\n    const yMeasures = measures.filter((m) => m.encoding === 'yAxis')\n\n    const xResult = dataReshapeByEncoding(dataset, dimensions, xMeasures, encoding as Encoding, {\n      foldMeasureValue: `${FoldXMeasureValue}${index}`,\n      colorItemAsId: true,\n      colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      omitIds: allMeasuresIds,\n    })\n\n    datasets.push(xResult.dataset)\n    foldInfoList.push(xResult.foldInfo)\n    unfoldInfoList.push(xResult.unfoldInfo)\n\n    const yResult = dataReshapeByEncoding(dataset, dimensions, yMeasures, encoding as Encoding, {\n      foldMeasureValue: `${FoldYMeasureValue}${index}`,\n      colorItemAsId: true,\n      colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      omitIds: allMeasuresIds,\n    })\n\n    datasets.push(yResult.dataset)\n    foldInfoList.push(yResult.foldInfo)\n    unfoldInfoList.push(yResult.unfoldInfo)\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(datasets[0].map((d, index) => ({ ...d, ...(datasets[1]?.[index] || {}) })))\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const scatterConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'sizeRange',\n    'size',\n    'crosshairLine',\n\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { sort, unique } from 'remeda'\nimport type { Dataset, Datum } from 'src/types'\nimport type { Sort } from 'src/types/properties/analysis/sort'\n\nexport const calcOrder = (sortConfig: Sort, id: string, dataset: Dataset): string[] => {\n  if (sortConfig.customOrder) {\n    return sortConfig.customOrder\n  }\n\n  const order = sortConfig.order || 'asc'\n  const orderBy = sortConfig.orderBy\n\n  const res = sort(dataset, (a, b) => {\n    const aValue = a[orderBy || id] as string | number\n    const bValue = b[orderBy || id] as string | number\n\n    if (order === 'asc') {\n      if (aValue < bValue) {\n        return -1\n      }\n      if (aValue > bValue) {\n        return 1\n      }\n      return 0\n    }\n    if (aValue > bValue) {\n      return -1\n    }\n    if (aValue < bValue) {\n      return 1\n    }\n    return 0\n  })\n\n  return unique(res.map((item: Datum) => item[id] as string))\n}\n","import type { AdvancedPipe, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortLegend: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sortLegend } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed\n  const colorId = datasetReshapeInfo?.[0]?.unfoldInfo?.encodingColorId\n  const colorIdMap = datasetReshapeInfo?.[0]?.unfoldInfo?.colorIdMap ?? {}\n  const colorItems = datasetReshapeInfo?.[0]?.unfoldInfo?.colorItems\n  if (!sortLegend || !colorId || !colorIdMap || !colorItems) {\n    return advancedVSeed\n  }\n\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  if (sortLegend.customOrder) {\n    const colorIds = Object.keys(colorIdMap)\n    // 先根据名称匹配, 若名称不存在, 则根据id匹配, 从而兼容名称和id的两种情况\n    const orderRes = sortLegend.customOrder.map((itemNameOrId) => {\n      return colorIds.find((id) => {\n        return colorIdMap[id]?.alias === itemNameOrId || colorIdMap[id]?.id === itemNameOrId || id === itemNameOrId\n      }) as string\n    })\n    result.analysis.orderMapping[colorId] = orderRes\n    return result\n  }\n\n  const orderRes = calcOrder(sortLegend, colorId, dataset?.flat(2) || [])\n  result.analysis.orderMapping[colorId] = orderRes\n\n  return result\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortXBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const xField = unfoldInfo.encodingX\n  if (!sortAxis || !xField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, xField, dataset.flat(2))\n\n  result.analysis.orderMapping[xField] = axisOrderResult\n\n  return result\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortYBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const yField = unfoldInfo?.encodingY\n  if (!sortAxis || !yField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, yField, dataset.flat(2))\n\n  result.analysis.orderMapping[yField] = axisOrderResult\n\n  return result\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const annotation: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const annotation = pick(vseed, [\n    'annotationPoint',\n    'annotationHorizontalLine',\n    'annotationVerticalLine',\n    'annotationArea',\n  ]) as AdvancedVSeed['annotation']\n\n  return { ...advancedVSeed, annotation }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const columnConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'stackCornerRadius',\n    'barMaxWidth',\n    'barGapInGroup',\n\n    'dimensionLinkage',\n  ]) as Config['column']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { lineConfig } from './line'\nimport { columnConfig } from './column'\nimport { pieConfig } from './pie'\nimport { dualAxisConfig } from './dualAxis'\nimport { scatterConfig } from './scatter'\nimport { histogramConfig } from './histogram'\nimport { boxplotConfig } from './boxplot'\n\nexport { lineConfig, columnConfig, pieConfig, dualAxisConfig, scatterConfig, histogramConfig, boxplotConfig }\n\n// area\nexport const areaConfig = lineConfig\nexport const areaPercentConfig = lineConfig\n\n// bar\nexport const barConfig = columnConfig\nexport const barParallelConfig = columnConfig\nexport const barPercentConfig = columnConfig\n\n// column\nexport const columnParallelConfig = columnConfig\nexport const columnPercentConfig = columnConfig\n\n// donut, rose\nexport const donutConfig = pieConfig\nexport const roseConfig = pieConfig\nexport const roseParallelConfig = pieConfig\nexport const radarConfig = pieConfig\n\n// funnel, heatmap\nexport const funnelConfig = pieConfig\nexport const heatmapConfig = pieConfig\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const lineConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairLine',\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const pieConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, ['backgroundColor', 'color', 'label', 'legend', 'tooltip']) as Config['pie']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { clone } from 'remeda'\nimport type { AdvancedPipe, Datum, Dimension, Dimensions, Measure } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    return {\n      ...result,\n      dimensions: clone(dimensions.map((dim: Dimension) => ({ ...dim, alias: dim.alias || dim.id }))),\n    }\n  }\n\n  const measures = advancedVSeed.measures as Measure[]\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensions: newDimensions,\n  }\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport type { AdvancedPipe, Dimension } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n\n  const MeaIdDim: Dimension = {\n    id: MeasureId,\n    alias: intl.i18n`指标Id`,\n  }\n\n  // 如果没有指标Id维度，则默认添加指标Id维度\n  if (!result.dimensions?.some((dim) => dim.id === MeasureId)) {\n    result.dimensions?.push(MeaIdDim)\n  }\n\n  return result\n}\n","import { clone } from 'remeda'\nimport type { AdvancedPipe, Datum, Measure } from 'src/types'\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n\n    clonedMeasures.forEach((m: Measure) => {\n      m.alias = m.alias ?? m.id\n    })\n\n    return {\n      ...advancedVSeed,\n      measures: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measures: defaultMeasures,\n  }\n}\n","import type { AdvancedPipe, Dimension, Dimensions } from 'src/types'\n\nexport const pickDimensionsForReshape: AdvancedPipe = (advancedVSeed) => {\n  const deleteBy = (dimension: Dimension) => dimension.encoding === 'tooltip' || dimension.encoding === 'label'\n  const reshapeDimensions: Dimensions = []\n  ;(advancedVSeed.dimensions ?? []).forEach((d) => {\n    if (!deleteBy(d)) {\n      reshapeDimensions.push(d)\n    }\n  })\n\n  return {\n    ...advancedVSeed,\n    reshapeDimensions,\n  }\n}\n","import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedPipelineContext,\n  AdvancedVSeed,\n  Dimension,\n  Measure,\n} from 'src/types'\nimport { execPipeline } from 'src/pipeline/utils'\n\nexport const encodingAdapter = (\n  noEncodingPipeline: AdvancedPipeline,\n  hasEncodingPipeline: AdvancedPipeline,\n): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { dimensions = [], measures = [] } = advancedVSeed\n    const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n    const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n    const hasEncoding = hasDimensionEncoding || hasMeasureEncoding\n\n    if (hasEncoding) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(hasEncodingPipeline, context, advancedVSeed)\n    }\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(noEncodingPipeline, context, advancedVSeed)\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.y = uniqueDimIds.slice(0, 1) // 第一个维度放置于Y轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    encoding.y = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // x\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { Dimensions, Encoding } from 'src/types'\n\n/**\n * @description 为 encoding 添加 color 编码, 多指标场景, 会将 MeasureId 也添加到 color 编码中.\n * @param dimensions\n * @param encoding\n * @param isMultiMeasure\n */\nexport const addColorToEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n\n  const measureId = dimensions.find((item) => item.id === MeasureId)\n\n  if (isMultiMeasure && measureId && !measureId.encoding) {\n    encoding.color.push(MeasureId)\n  }\n  if (encoding.color.length === 0) {\n    encoding.color = [MeasureId]\n  }\n}\n\n/**\n * @description 为 encoding 添加 color 编码, 多指标场景, 会将 MeasureId 也添加到 color 编码中.\n * @param dimensions\n * @param encoding\n * @param isMultiMeasure\n */\nexport const addDefaultColorEncoding = (uniqueDimIds: string[], encoding: Encoding, isMultiMeasure: boolean) => {\n  if (uniqueDimIds.length === 1 && uniqueDimIds[0] === MeasureId) {\n    encoding.color = uniqueDimIds.slice(0)\n  } else if (isMultiMeasure) {\n    encoding.color = uniqueDimIds.slice(1)\n  } else {\n    encoding.color = uniqueDimIds.slice(1).filter((d: string) => d !== MeasureId)\n  }\n  if (encoding.color.length === 0) {\n    encoding.color = [MeasureId]\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { reshapeMeasures = [], measures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { reshapeMeasures = [], measures = [], dimensions = [] } = advancedVSeed\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  generateMeasureEncoding(measures, encoding)\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds: string[] = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1)\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标Id之外的所有维度\n  encoding.detail = [] // 折线图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n\n  if (isMultiMeasure) {\n    encoding.color = uniqueDimIds.slice(0) // 所有维度都用于color映射，包括MeasureId\n  } else {\n    encoding.color = uniqueDimIds.filter((d: string) => d !== MeasureId) // 除了MeasureId之外的所有维度用于color映射\n  }\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // angle\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\nimport { addDefaultColorEncoding } from './color/addColorToEncoding'\n\nexport const defaultEncodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(reshapeMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures = [], reshapeMeasures = [], dimensions = [] } = advancedVSeed\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(reshapeMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  addDefaultColorEncoding(uniqueDimIds, encoding, isMultiMeasure)\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip, ...color])\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const markStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedMarkStyle = pick(vseed, [\n    'barStyle',\n    'pointStyle',\n    'lineStyle',\n    'areaStyle',\n    'boxPlotStyle',\n    'outlierStyle',\n  ]) as AdvancedVSeed['markStyle']\n\n  const markStyle = replaceNullToUndefined(pickedMarkStyle)\n\n  return { ...advancedVSeed, markStyle }\n}\n","import type { AdvancedPipe, MeasureEncoding, Measures } from 'src/types'\n\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport { ensureParentIdInitialized, isCommonMeasureEncoding } from './utils'\n\nexport const buildMeasures = (encodingKeys: string[]): AdvancedPipe => {\n  return (advancedVSeed) => {\n    const { measures = [] } = advancedVSeed\n    const measuresByView = {} as { [key: string]: Measures }\n    const parentIds: string[] = []\n\n    for (let index = 0; index < measures.length; index++) {\n      const item = measures[index]\n      const encoding = item.encoding\n      const parentId = item.parentId || DEFAULT_PARENT_ID\n\n      const isOtherEncoding = item.encoding && isCommonMeasureEncoding(encoding as MeasureEncoding)\n\n      ensureParentIdInitialized(parentId, measuresByView, parentIds)\n\n      if (encodingKeys.includes(encoding as string)) {\n        measuresByView[parentId].push(item)\n      } else if (!isOtherEncoding) {\n        item.encoding = encodingKeys[0] as MeasureEncoding\n        measuresByView[parentId].push(item)\n      }\n    }\n\n    advancedVSeed.reshapeMeasures = parentIds.map((pid) => measuresByView[pid]).filter((m) => m.length > 0)\n\n    return advancedVSeed\n  }\n}\n","import type { MeasureEncoding, MeasureGroup, MeasureTree } from 'src/types'\n\n/**\n * @description 检查是否为指标树, 指标树深度大于1. 如果存在一个指标为组, 即有children配置, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithChildren = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'children' in measure)\n}\n\n/**\n * @description 检查是否为指标树, 指标树存在parentId. 如果存在一个指标有parentId, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithParentId = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'parentId' in measure)\n}\n\n/**\n * @description 保证指标树中的每一组都有children, 没有children的指标, 会被放到一个默认的指标组中.\n * @param measures 指标树\n * @returns\n */\nexport const normalizeMeasureTree = (measures: MeasureTree) => {\n  const createEmptyMeasureGroup = (): MeasureGroup => {\n    return {\n      id: 'group',\n      alias: '',\n      children: [],\n    }\n  }\n\n  let currentGroup: MeasureGroup = createEmptyMeasureGroup()\n  const measureGroups: MeasureGroup[] = []\n  for (const measure of measures) {\n    if ('children' in measure) {\n      // 当前指标组之前的所有独立指标成组\n      if (currentGroup.children?.length) {\n        currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n        currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n        measureGroups.push(currentGroup)\n        currentGroup = createEmptyMeasureGroup()\n      }\n      // 当前是指标组\n      measureGroups.push(measure)\n    } else {\n      currentGroup.children?.push(measure)\n    }\n  }\n\n  // 最后一组\n  if (currentGroup.children?.length) {\n    currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n    currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n    measureGroups.push(currentGroup)\n    currentGroup = createEmptyMeasureGroup()\n  }\n\n  return measureGroups\n}\n\nexport const isCommonMeasureEncoding = (encoding: MeasureEncoding) => {\n  return ['color', 'label', 'tooltip'].includes(encoding)\n}\n\n/**\n * @description Ensures that the measuresByView object has an initialized array for the given parentId.\n * If the parentId doesn't exist in measuresByView, it initializes an empty array and tracks the parentId.\n * @param parentId The parent ID to ensure initialization for\n * @param measuresByView The object mapping parent IDs to measures arrays\n * @param parentIds The array tracking all parent IDs that have been initialized\n */\nexport const ensureParentIdInitialized = <T>(\n  parentId: string,\n  measuresByView: { [key: string]: T[] },\n  parentIds: string[],\n) => {\n  if (!measuresByView[parentId]) {\n    measuresByView[parentId] = []\n    parentIds.push(parentId)\n  }\n}\n","import type { AdvancedPipe, AdvancedPipeline, AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline, isPivotChart } from 'src/pipeline/utils'\n\nexport const pivotAdapter = (pipeline: AdvancedPipeline, pivotPipeline: AdvancedPipeline): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n\n    if (usePivotChart) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pivotPipeline, context, advancedVSeed)\n    }\n\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context, advancedVSeed)\n  }\n}\n","import type { AdvancedPipe, RegressionLineConfig } from 'src/types'\n\nexport const regressionLine: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  let keys = [] as string[]\n\n  if (vseed.chartType === 'histogram') {\n    keys = ['kdeRegressionLine', 'ecdfRegressionLine']\n  } else if (vseed.chartType === 'scatter') {\n    keys = ['linearRegressionLine', 'lowessRegressionLine', 'polynomialRegressionLine', 'logisticRegressionLine']\n  } else if (vseed.chartType === 'column') {\n    keys = ['polynomialRegressionLine']\n  }\n\n  if (keys.length) {\n    const regressionLineConfig: RegressionLineConfig = {}\n    let hasLine = false\n\n    keys.forEach((key: string) => {\n      if ((vseed as any)[key]) {\n        hasLine = true\n        regressionLineConfig[key as keyof RegressionLineConfig] = (vseed as any)[key]\n      }\n    })\n\n    return hasLine\n      ? {\n          ...advancedVSeed,\n          regressionLine: regressionLineConfig,\n        }\n      : advancedVSeed\n  }\n\n  return advancedVSeed\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Dimension,\n  Encoding,\n  Measure,\n} from 'src/types'\n\nexport const pivotReshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding } = advancedVSeed\n  const reshapeMeasures = advancedVSeed.reshapeMeasures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const allMeasuresIds = reshapeMeasures.flatMap((measureGroup) => measureGroup.map((m) => m.id))\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  reshapeMeasures.forEach((measures, index) => {\n    if (!measures) {\n      return\n    }\n    const groupId = measures[0].parentId ?? DEFAULT_PARENT_ID\n    const {\n      dataset: newSubDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      uniqueBy(measures, (item: Measure) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: `${FoldMeasureValue}${groupId}`,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasuresIds,\n      },\n    )\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newSubDataset)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type { AdvancedPipe, AdvancedVSeed, ColumnParallel, Dimension, Encoding, Measure } from 'src/types'\n\nexport const reshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding } = advancedVSeed\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const {\n    dataset: newDatasets,\n    foldInfo,\n    unfoldInfo,\n  } = dataReshapeByEncoding(\n    dataset,\n    uniqueBy(advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? [], (item: Dimension) => item.id),\n    uniqueBy(advancedVSeed.reshapeMeasures?.[0] ?? [], (item: Measure) => item.id),\n    encoding as Encoding,\n    {\n      colorItemAsId: false,\n      colorMeasureId,\n    },\n  )\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n  }\n}\n","import { clone, isNullish, isNumber, isObjectType, isString, merge, mergeDeep } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const theme: AdvancedPipe = (advancedVSeed, context) => {\n  const { customTheme, vseed } = context\n  const { theme = 'light', chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  } as AdvancedVSeed\n\n  if (!customTheme || !customTheme[theme]) {\n    return result\n  }\n\n  const chartConfigTheme = customTheme?.[theme].config?.[chartType]\n  if (chartConfigTheme) {\n    const chartConfig = result.config?.[chartType] || {}\n    const mergedConfig = mergeDeep(chartConfigTheme, clone(chartConfig))\n\n    // 数组项不会被Merge, 需要将1个主题配置, 合并到数组的每一项\n    for (const _k in mergedConfig) {\n      const key = _k as keyof typeof mergedConfig\n      // 配置的第一层, 如果是数组, 则数组的每一项目和主题配置合并\n      if (Array.isArray(mergedConfig[key])) {\n        mergedConfig[key] = mergeArray(mergedConfig[key], chartConfigTheme[key])\n      }\n    }\n\n    result.config = {\n      [chartType]: mergedConfig,\n    }\n  }\n\n  const chartCustomTheme = customTheme?.[theme]?.config?.[chartType]\n\n  result.customTheme = {\n    config: {\n      [chartType]: chartCustomTheme,\n    },\n  }\n\n  return result\n}\n\nconst mergeArray = <Destination extends Array<object>, Source extends object | number | string | undefined | null>(\n  arr: Destination,\n  themeItem: Source,\n): Destination => {\n  if (isNullish(themeItem) || isString(themeItem) || isNumber(themeItem)) {\n    return arr\n  }\n\n  if (!Array.isArray(arr)) {\n    return arr\n  }\n\n  if (arr.some((d) => !isObjectType(d))) {\n    return arr\n  }\n\n  return arr.map((item) => {\n    return merge(themeItem, item)\n  }) as Destination\n}\n","import { unique } from 'remeda'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const encodingForPivotTable: AdvancedPipe = (advancedVSeed) => {\n  const { measureTree = [], dimensionTree = [] } = advancedVSeed\n  const measures = findAllMeasures(measureTree)\n\n  const hasDimensionEncoding = dimensionTree.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensionTree, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensionTree, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  uniqueDimIds.forEach((item, index) => {\n    if (index % 2 === 0) {\n      encoding.column!.push(item)\n    } else {\n      encoding.row!.push(item)\n    }\n  })\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  dimensions.forEach((dim, index) => {\n    const id = dim.id\n    if (dim.encoding === 'row') {\n      encoding.row!.push(id)\n    } else if (dim.encoding === 'column') {\n      encoding.column!.push(id)\n    } else {\n      if (index % 2 === 0) {\n        encoding.column!.push(id)\n      } else {\n        encoding.row!.push(id)\n      }\n    }\n  })\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = unique(measures.map((item) => item.id))\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = measures.map((item) => item.id)\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { theme } from '../../chart/pipes'\nimport {\n  cellStyle,\n  defaultDimensions,\n  defaultMeasureId,\n  defaultMeasures,\n  encodingForPivotTable,\n  initAdvancedVSeed,\n  pivotTableConfig,\n  reshapePivotTable,\n} from '../pipes'\n\nexport const pivotTableAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  cellStyle,\n\n  encodingForPivotTable,\n  reshapePivotTable,\n  pivotTableConfig,\n  theme,\n]\n","import { MeasureId, MeasureName } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport { findTreeNodesBy } from 'src/pipeline/utils/tree/traverse'\nimport type { AdvancedPipe, Dimension, MeasureTree } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n  const measures = findAllMeasures(advancedVSeed.measureTree as MeasureTree)\n\n  // 如果没有指标名称维度，则默认添加指标名称维度\n  if (\n    measures.length > 1 &&\n    !findTreeNodesBy(advancedVSeed.dimensionTree, (dim) => dim.id === MeasureId || dim.id === MeasureName).length\n  ) {\n    result.dimensionTree!.push({\n      id: MeasureId,\n      alias: intl.i18n`指标名称`,\n      encoding: 'row',\n    } as Dimension)\n  }\n\n  return result\n}\n","import { FoldMeasureId, FoldMeasureName, foldMeasures, FoldMeasureValue } from 'src/dataReshape'\nimport {} from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, DatasetReshapeInfo, PivotTable } from 'src/types'\n\nexport const reshapePivotTable: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as PivotTable\n  const { measureTree } = advancedVSeed\n  const { dataset: newDatasets, foldInfo } = foldMeasures(dataset, findAllMeasures(measureTree), {\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    allowEmptyFold: false,\n  })\n\n  const datasetReshapeInfo = [\n    {\n      id: String(chartType),\n      index: 0,\n      foldInfo,\n    },\n  ] as unknown as DatasetReshapeInfo\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const pivotTableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['table']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { initAdvancedVSeed, records, tableConfig, defaultMeasures, defaultDimensions, cellStyle } from '../pipes'\nimport { theme } from '../../chart/pipes'\n\nexport const tableAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  cellStyle,\n\n  records,\n  tableConfig,\n  theme,\n]\n","import type { AdvancedPipe } from 'src/types'\n\nexport const records: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { dataset } = vseed\n  return {\n    ...advancedVSeed,\n    dataset,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const tableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['pivotTable']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const cellStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedCellStyle = pick(vseed, ['bodyCellStyle']) as AdvancedVSeed['cellStyle']\n\n  const style = replaceNullToUndefined(pickedCellStyle)\n\n  return { ...advancedVSeed, cellStyle: style }\n}\n","import { clone } from 'remeda'\nimport { findAllMeasures, isDimension, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Dimension, Dimensions, MeasureTree } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    const clonedDimensions = clone(dimensions)\n    preorderTraverse(clonedDimensions, (node) => {\n      if (isDimension(node as Dimension)) {\n        ;(node as Dimension).alias = (node as Dimension).alias || (node as Dimension).id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      dimensionTree: clonedDimensions,\n    }\n  }\n\n  const measures = findAllMeasures(advancedVSeed.measureTree as MeasureTree)\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensionTree: newDimensions,\n  }\n}\n","import { clone } from 'remeda'\nimport { isMeasure, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Measure } from 'src/types'\n\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n    preorderTraverse(clonedMeasures, (node) => {\n      if (isMeasure(node as Measure)) {\n        ;(node as Measure).alias = (node as Measure).alias || (node as Measure).id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      measureTree: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measureTree: defaultMeasures,\n  }\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  yLinear,\n  initArea,\n  stackInverse,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  datasetXY,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotAxisStyle,\n  pivotTitle,\n  splitLine,\n  dimensionLinkage,\n} from '../pipes'\n\nconst area: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotArea: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    stackInverse,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaSpecPipeline = [pivotAdapter(area, pivotArea)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  percent,\n  datasetXY,\n  xBand,\n  yLinear,\n  initArea,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  progressive,\n  colorLegend,\n  colorAdapter,\n  linearColor,\n  pivotColorLegend,\n  pointStateDimensionHover,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst areaPercent: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotAreaPercent: PivotChartSpecPipeline = [\n  initPivot,\n\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaPercentSpecPipeline = [pivotAdapter(areaPercent, pivotAreaPercent)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst bar: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barSpecPipeline = [pivotAdapter(bar, pivotBar)]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBarParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.y, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n\n  result.yField = [unfoldInfo.encodingY]\n\n  if (!sameDimensionsMode) {\n    result.yField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.x?.length === 1) {\n      result.yField.pop()\n    }\n  }\n\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetYX,\n  xLinear,\n  yBand,\n  initBarParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst barParallel: VChartSpecPipeline = [\n  initBarParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBarParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barParallelSpecPipeline = [pivotAdapter(barParallel, pivotBarParallel)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst barPercent: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barPercentSpecPipeline = [pivotAdapter(barPercent, pivotBarPercent)]\n","import { type IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isDeepEqual } from 'remeda'\nimport {\n  LowerWhisker,\n  MeasureId,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n} from 'src/dataReshape/constant'\nimport { isPivotChart, revisedBoxPlotFieldKey } from 'src/pipeline/utils'\n\nexport const initBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBoxPlotChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n\n  const usePivotChart = isPivotChart(vseed)\n  result.type = 'boxPlot'\n  // 默认应该是盒须的位置\n  result.minField = revisedBoxPlotFieldKey(LowerWhisker, id, usePivotChart)\n  result.maxField = revisedBoxPlotFieldKey(UpperWhisker, id, usePivotChart)\n  result.q1Field = revisedBoxPlotFieldKey(Q1MeasureValue, id, usePivotChart)\n  result.medianField = revisedBoxPlotFieldKey(MedianMeasureId, id, usePivotChart)\n  result.q3Field = revisedBoxPlotFieldKey(Q3MeasureValue, id, usePivotChart)\n  result.outliersField = revisedBoxPlotFieldKey(OutliersMeasureId, id, usePivotChart)\n  result.xField = [unfoldInfo.encodingX]\n  result.seriesField = unfoldInfo.encodingColorId\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingColor)\n\n    if (encoding.color?.[0] === MeasureId && encoding.value?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import { isNullish } from 'remeda'\nimport type { BoxMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const boxMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxMaxWidth = advancedVSeed.config?.[chartType as 'boxPlot']?.boxMaxWidth as BoxMaxWidth\n\n  if (!isNullish(boxMaxWidth)) {\n    return {\n      ...spec,\n      boxMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import { isNullish } from 'remeda'\nimport type { BoxGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const boxGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxGapInGroup = advancedVSeed.config?.[chartType as 'boxPlot']?.boxGapInGroup as BoxGapInGroup\n\n  if (!isNullish(boxGapInGroup)) {\n    return {\n      ...spec,\n      boxGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const datasetBoxplot: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { Encoding, PieLabel, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\nimport { FoldMeasureId, MedianMeasureId } from 'src/dataReshape/constant'\n\nexport const labelBoxPlot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: PieLabel }\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions!,\n    advancedVSeed.measures!,\n    encoding as Encoding,\n    [\n      {\n        measureId: FoldMeasureId,\n        measureValue: MedianMeasureId,\n      },\n    ],\n  ) as unknown as IPieChartSpec['label']\n\n  return result\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport { createFormatterByMeasure, findMeasureById } from '../../../../utils'\nimport type {\n  Dimension,\n  Dimensions,\n  Encoding,\n  VChartSpecPipe,\n  Tooltip,\n  Measures,\n  FoldInfo,\n  UnfoldInfo,\n} from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern, ITooltipLineActual, TooltipData } from '@visactor/vchart'\nimport {\n  ColorEncoding,\n  LowerWhisker,\n  MeasureId,\n  MeasureName,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n  XEncoding,\n} from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { intl } from 'src/i18n'\nimport { updateTooltipElement } from './tooltipElement'\n\nconst boxPlotMeasureKeys = [UpperWhisker, Q3MeasureValue, MedianMeasureId, Q1MeasureValue, LowerWhisker]\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { chartType, dimensions = [], encoding, datasetReshapeInfo } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType as 'boxPlot'] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const meas = (vseed.measures ?? []) as Measures\n  const valueMeasure = meas.find((item) => item.encoding === 'value' || isNullish(item.encoding))\n  const defaultFormatter = valueMeasure ? createFormatterByMeasure(valueMeasure) : (v: unknown) => v\n  const measureAliasMapping: Record<string, string> = {\n    [OutliersMeasureId]: intl.i18n`异常点`,\n    [UpperWhisker]: intl.i18n`上边界`,\n    [Q3MeasureValue]: intl.i18n`上四分位数`,\n    [MedianMeasureId]: intl.i18n`中位数`,\n    [Q1MeasureValue]: intl.i18n`下四分位数`,\n    [LowerWhisker]: intl.i18n`下边界`,\n  }\n  const { unfoldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    visible: enable,\n    style: getTooltipStyle(tooltip),\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, encoding as Encoding),\n      updateContent: (prev: ITooltipLineActual[] | undefined, data: TooltipData | undefined) => {\n        const datum = (data as any)?.[0]?.datum?.[0]\n\n        if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n          const tooltipItems: ITooltipLineActual[] = (prev ?? []).filter(\n            (item: any) => !boxPlotMeasureKeys.includes(item.key as string),\n          )\n          const outerlierMeasure = meas.find((item) => item.id === OutliersMeasureId)\n          const formatter = outerlierMeasure ? createFormatterByMeasure(outerlierMeasure) : defaultFormatter\n\n          tooltipItems.push({\n            ...(tooltipItems[0] as any),\n            key: outerlierMeasure?.alias ?? measureAliasMapping[OutliersMeasureId],\n            value: formatter(datum?.[VCHART_OUTLIER_KEY] as number) as string,\n          } as ITooltipLineActual)\n\n          return tooltipItems\n        }\n\n        return (prev ?? []).map((entry) => {\n          if (boxPlotMeasureKeys.includes((entry as any).key as string)) {\n            const mea = meas.find((item) => item.id === (entry as any).key)\n            const formatter = mea ? createFormatterByMeasure(mea) : defaultFormatter\n\n            return {\n              ...(entry as any),\n              value: formatter(datum?.[(entry as any).key] as number) as string,\n              key: mea?.alias ?? measureAliasMapping[entry?.key as string] ?? (entry as any).key,\n            }\n          }\n\n          return entry\n        }) as ITooltipLineActual[]\n      },\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, meas, unfoldInfo, measureAliasMapping[MedianMeasureId]),\n    },\n    updateElement: updateTooltipElement,\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (tooltip: string[], dimensions: Dimensions, encoding: Encoding) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return datum?.[item.id] as string\n    },\n  }))\n\n  const defaultContent = boxPlotMeasureKeys.map((key: string) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key,\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return datum[key] as string | number\n      },\n    }\n  })\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n\nconst createDimensionContent = (\n  dimensions: Dimensions,\n  measures: Measures,\n  unfoldInfo: UnfoldInfo,\n  medianAlias: string,\n  hasMultiMeasureGroup?: boolean,\n) => {\n  const { encodingColor } = unfoldInfo\n\n  return [\n    {\n      visible: true,\n      shapeType: 'rectRound',\n      hasShape: true,\n      key: dimensions.some((d) => d.encoding === 'color')\n        ? (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[encodingColor] as string)) || ''\n            const colorKey = `${unfoldInfo.colorIdMap[key].alias ?? key}(${medianAlias})`\n\n            if (hasMultiMeasureGroup) {\n              const id = datum[MeasureId] as string\n              const measure = findMeasureById(measures, id)\n\n              return measure ? `${colorKey}-${measure.alias ?? id}` : colorKey\n            }\n\n            return colorKey\n          }\n        : (v: unknown) => {\n            const datum = v as Datum\n            return `${datum[MeasureName] ?? datum[MeasureId]}(${medianAlias})`\n          },\n      value: (v: unknown) => {\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[MedianMeasureId] as string | number // dimension tooltip 中默认显示中位数\n        const id = datum[MeasureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    },\n  ]\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBoxPlotStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBoxPlotChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.boxPlot?.style) {\n        result.boxPlot.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BoxPlotStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const boxPlotStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { boxPlotStyle } = markStyle\n  const theme = config?.[vseed.chartType as 'boxPlot']?.boxPlotStyle\n\n  const result = {\n    ...spec,\n    boxPlot: {\n      style: {\n        shaftShape: 'filled-line',\n        visible: true,\n        shaftWidth: '50%',\n        stroke: theme?.whiskerBorderColor,\n        boxStroke: theme?.boxBorderColor,\n        boxCornerRadius: theme?.boxCornerRadius,\n        medianStroke: theme?.medianBorderColor ?? theme?.boxBorderColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(boxPlotStyle) || isEmpty(boxPlotStyle)) {\n    return result\n  }\n\n  const boxPlotStyles = (Array.isArray(boxPlotStyle) ? boxPlotStyle : [boxPlotStyle]) as BoxPlotStyle[]\n\n  const customMap = boxPlotStyles.reduce<object>((result, style, index) => {\n    const {\n      boxColor,\n      boxColorOpacity,\n      boxBorderColor,\n      boxBorderWidth = 1,\n      boxVisible = true,\n      boxBorderOpacity,\n      medianBorderColor,\n      whiskerBorderColor,\n      boxCornerRadius,\n    } = style\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: boxVisible,\n          fill: boxColor,\n          fillOpacity: boxColorOpacity,\n          lineWidth: boxBorderWidth,\n          stroke: whiskerBorderColor,\n          boxStroke: boxBorderColor,\n          boxCornerRadius: boxCornerRadius,\n          strokeOpacity: boxBorderOpacity,\n          medianStroke: medianBorderColor ?? boxBorderColor,\n        },\n      },\n    }\n  }, {})\n\n  result.boxPlot!.state = {\n    ...result.boxPlot!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, OutlierStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const outlierStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { outlierStyle } = markStyle\n  const theme = config?.[vseed.chartType as 'boxPlot']?.outlierStyle\n  const result = {\n    ...spec,\n    outlier: {\n      style: {\n        // stroke: theme?.pointColor,\n        fill: theme?.pointColor,\n        lineWidth: theme?.pointBorderWidth,\n        stroke: theme?.pointBorderColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(outlierStyle) || isEmpty(outlierStyle)) {\n    return result\n  }\n\n  const outlierStyles = (Array.isArray(outlierStyle) ? outlierStyle : [outlierStyle]) as OutlierStyle[]\n\n  const customMap = outlierStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          stroke: pointBorderColor,\n          lineWidth: pointBorderWidth,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    outlier: {\n      ...result.outlier,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  labelBoxPlot,\n  tooltipBoxplot,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  initBoxplot,\n  xBand,\n  yLinear,\n  verticalCrosshairRect,\n  datasetBoxplot,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  boxPlotStyle,\n  colorBoxPlotStyleFill,\n  outlierStyle,\n  discreteLegend,\n} from '../pipes'\n\nconst boxplot: VChartSpecPipeline = [\n  initBoxplot,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetBoxplot,\n  progressive,\n  xBand,\n  yLinear,\n  labelBoxPlot,\n  tooltipBoxplot,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBoxPlotStyleFill(boxPlotStyle),\n  outlierStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBoxplot: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initBoxplot,\n    stackCornerRadius,\n    boxMaxWidth,\n    boxGapInGroup,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetBoxplot,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    labelBoxPlot,\n    tooltipBoxplot,\n    colorBoxPlotStyleFill(boxPlotStyle),\n    outlierStyle,\n    verticalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const boxplotSpecPipeline = [pivotAdapter(boxplot, pivotBoxplot)]\n","import type { IBarChartSpec, ICartesianSeries, IChart, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport { array, clamper, regressionPolynomial } from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n} from 'src/types'\nimport { defaultRegressionLineColor, getAlphaByConfidenceLevel } from './common'\n\nexport const columnPolynomialRegressionLine: VChartSpecPipe = (spec, context): Partial<IBarChartSpec> => {\n  const result = { ...spec } as Partial<IBarChartSpec>\n  const { advancedVSeed } = context\n  const { chartType, regressionLine } = advancedVSeed\n  const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.polynomialRegressionLine) {\n    return result\n  }\n\n  const lineList = array(regressionLine.polynomialRegressionLine)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n    const {\n      color,\n      lineWidth,\n      lineDash,\n      text,\n      textColor,\n      textFontSize,\n      textFontWeight,\n      confidenceIntervalOpacity,\n      confidenceLevel = 0.95,\n      shadowBlur,\n      shadowColor,\n      shadowOffsetX,\n      shadowOffsetY,\n      confidenceIntervalVisible = theme.confidenceIntervalVisible,\n    } = line as LinearRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `polynomialRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const s = chart.getAllSeries()[0] as ICartesianSeries\n\n          if (s) {\n            const rect = s.getRegion().getLayoutRect()\n\n            if (rect.width === 0 || rect.height === 0) {\n              return null\n            }\n\n            const yClamper = clamper(0, 0 + rect.height)\n            const data = s.getViewData()?.latestData as Datum[]\n            const fieldX = s.fieldX?.[0]\n            const fieldY = s.fieldY?.[0]\n            const xValues = s.getRawDataStatisticsByField(fieldX).values as string[]\n            const degree = (line as PolynomialRegressionLine).degree ?? 2\n            // 多项式拟合需要至少 degree + 1 个点\n            const minPoints = degree + 1\n\n            if (!fieldX || !fieldY || !data || data.length < minPoints || xValues.length < minPoints) {\n              return null\n            }\n\n            const { confidenceInterval, evaluateGrid } = regressionPolynomial(\n              xValues.map((xVal, index: number) => {\n                const filteredData = data.filter((d) => d[fieldX] === xVal)\n\n                return {\n                  x: index,\n                  y: Math.max(...filteredData.map((d) => d[fieldY] as number)),\n                }\n              }),\n              undefined,\n              undefined,\n              {\n                degree: (line as PolynomialRegressionLine).degree ?? 2,\n                alpha: getAlphaByConfidenceLevel(confidenceLevel),\n              },\n            )\n            const N = xValues.length\n            const xAxisHelper = s.getXAxisHelper()\n            const halfBandWidth = xAxisHelper ? xAxisHelper.getBandwidth!(0) / 2 : 0\n            const lineData = evaluateGrid(N)\n            const linePoints = lineData.map((datum: Datum, index: number) => {\n              const d = { [fieldX]: xValues[index], [fieldY]: datum.y }\n              return {\n                x: s.dataToPositionX(d)! + halfBandWidth,\n                y: yClamper(s.dataToPositionY(d)!),\n              }\n            })\n            const result: {\n              linePoints: { x: number; y: number }[]\n              areaPoints?: { x: number; y: number; y1: number }[]\n              color: string\n            } = {\n              linePoints,\n              color: s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n\n            if (confidenceIntervalVisible) {\n              const intervalData = confidenceInterval(N)\n\n              result.areaPoints = intervalData.map((datum: Datum, index: number) => {\n                const d = { [fieldX]: xValues[index], [fieldY]: datum.lower }\n                return {\n                  x: s.dataToPositionX(d)! + halfBandWidth,\n                  y: yClamper(s.dataToPositionY(d)!),\n                  y1: yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!),\n                }\n              })\n            }\n\n            return result\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    if (confidenceIntervalVisible) {\n      childrenMarks.push({\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        style: {\n          stroke: false,\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n          fill: color ?? defaultRegressionLineColor,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data) {\n              return parentNode.attribute.data.areaPoints\n            }\n\n            return []\n          },\n        },\n      })\n    }\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        shadowBlur: shadowBlur ?? theme.shadowBlur,\n        shadowColor: shadowColor ?? theme.shadowColor,\n        shadowOffsetX: shadowOffsetX ?? theme.shadowOffsetX,\n        shadowOffsetY: shadowOffsetY ?? theme.shadowOffsetY,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `polynomialRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.x\n            }\n\n            return undefined\n          },\n          y: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.y\n            }\n\n            return undefined\n          },\n        },\n      })\n    }\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  columnPolynomialRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst column: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  barMaxWidth,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  verticalCrosshairRect,\n  colorAdapter(discreteLegend, colorLegend),\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  columnPolynomialRegressionLine,\n]\n\nconst pivotColumn: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    barMaxWidth,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    columnPolynomialRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnSpecPipeline = [pivotAdapter(column, pivotColumn)]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumnParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = [unfoldInfo.encodingX]\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.y?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initColumnParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst columnParallel: VChartSpecPipeline = [\n  initColumnParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumnParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnParallelSpecPipeline = [pivotAdapter(columnParallel, pivotColumnParallel)]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst columnPercent: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  stackInverse,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    stackInverse,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    percent,\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnPercentSpecPipeline = [pivotAdapter(columnPercent, pivotColumnPercent)]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initDonut: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = result.outerRadius * 0.8\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initDonut,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  pieStyle,\n  colorPieStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst donut: VChartSpecPipeline = [\n  initDonut,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  labelPie,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotDonut: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initDonut,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    labelPie,\n    colorPieStyleFill(pieStyle),\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const donutSpecPipeline = [pivotAdapter(donut, pivotDonut)]\n","import type { IBarSeriesSpec, ILineSeriesSpec } from '@visactor/vchart'\nimport type { DualAxisOptions, VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initDualAxis = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = { ...spec } as IBarSeriesSpec | ILineSeriesSpec\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo, id } = datasetReshapeInfo[0]\n\n    result.id = `${id}-${options.axisType}-${options.chartType}`\n    result.type = options.chartType === 'line' ? 'line' : 'bar'\n    result.direction = 'vertical'\n    result.xField = unfoldInfo.encodingX\n    result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n    result.yField = options.foldInfo.measureValue\n\n    result.animation = true\n\n    return result\n  }\n}\n","import type { IBarSeriesSpec, ISeriesSpec } from '@visactor/vchart'\nimport { DUAL_AXIS_CHART_COLUMN_Z_INDEX, DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } from 'src/pipeline/utils/constant'\nimport type { VChartSpecPipe } from 'src/types'\nimport type { DualAxisOptions } from 'src/types/properties'\n\n/**\n * 应用图表类型到 spec\n * @param result spec 结果对象\n * @param type 图表类型\n * @param datasetReshapeInfo 数据集重塑信息\n */\nfunction applyChartType(result: ISeriesSpec, type: string, datasetReshapeInfo: any): void {\n  switch (type) {\n    case 'line': {\n      result.type = 'line'\n      break\n    }\n    case 'column': {\n      result.type = 'bar'\n      result.stack = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnParallel': {\n      const columnSpec = result as IBarSeriesSpec\n      if (Array.isArray(columnSpec.xField)) {\n        columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail)\n      } else if (columnSpec.xField) {\n        columnSpec.xField = [columnSpec.xField, datasetReshapeInfo[0].unfoldInfo.encodingDetail]\n      }\n      columnSpec.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnPercent': {\n      result.type = 'bar'\n      result.percent = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'area': {\n      result.type = 'area'\n      break\n    }\n    case 'areaPercent': {\n      result.type = 'area'\n      result.percent = true\n      break\n    }\n    case 'scatter': {\n      result.type = 'scatter'\n      break\n    }\n    default:\n      result.type = type\n  }\n}\n\nexport const dualChartType = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = { ...spec, zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } as ISeriesSpec\n    const { advancedVSeed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n\n    applyChartType(result, options.chartType, datasetReshapeInfo)\n\n    return result\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { DualAxisOptions, VChartSpecPipe } from 'src/types'\n\nexport const datasetDualAxis = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const { advancedVSeed, vseed } = context\n    const { analysis, datasetReshapeInfo } = advancedVSeed\n    const orderMapping = analysis?.orderMapping || {}\n\n    const { unfoldInfo } = datasetReshapeInfo[0]\n    const x = unfoldInfo.encodingX\n    const colorId = unfoldInfo.encodingColorId\n    const id = datasetReshapeInfo[0].id\n    const fields: Record<string, object> = {}\n\n    if (x) {\n      const order = orderMapping[x]\n      if (order) {\n        fields[x] = {\n          sortIndex: 0,\n          domain: order,\n          lockStatisticsByDomain: true,\n        }\n      } else {\n        fields[x] = {\n          sortIndex: 0,\n        }\n      }\n    }\n    if (colorId) {\n      const order = orderMapping[colorId]\n      if (order) {\n        fields[colorId] = {\n          sortIndex: 0,\n          domain: order,\n          lockStatisticsByDomain: true,\n        }\n      } else {\n        fields[colorId] = {\n          sortIndex: 0,\n        }\n      }\n    }\n\n    return {\n      ...spec,\n      data: {\n        id: `${id}-${options.axisType}-${options.chartType}`,\n        // 透视表不使用 dataValues\n        values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n        fields: fields,\n      },\n    } as ISpec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { DualAxisOptions, Encoding, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\nimport { DUAL_AXIS_LABEL_Z_INDEX } from 'src/pipeline/utils/constant'\n\nexport const labelDualAxis = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = { ...spec } as ILineChartSpec\n    const { advancedVSeed, vseed } = context\n    const { encoding } = advancedVSeed\n    const { chartType } = advancedVSeed\n    const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n    result.label = buildLabel(\n      baseConfig.label,\n      vseed.measures,\n      vseed.dimensions,\n      advancedVSeed.dimensions!,\n      advancedVSeed.measures!,\n      encoding as Encoding,\n      [options.foldInfo],\n    ) as unknown as ILineChartSpec['label']\n    ;(result.label as any)!.zIndex = DUAL_AXIS_LABEL_Z_INDEX\n    return result\n  }\n}\n","import { createDimensionContent, createMarkContent } from './tooltip'\nimport type { VChartSpecPipe, Tooltip, Measures, DualAxisOptions } from 'src/types'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltipOfDualAxisSeries = (options: DualAxisOptions): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = { ...spec }\n    const { advancedVSeed, vseed } = context\n    const {\n      measures = [],\n      datasetReshapeInfo,\n      chartType,\n      dimensions = [],\n      encoding,\n      reshapeMeasures = [],\n    } = advancedVSeed\n    const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n    const { tooltip = { enable: true } } = baseConfig\n    const { enable } = tooltip\n\n    const unfoldInfo = datasetReshapeInfo[0].unfoldInfo\n\n    result.tooltip = {\n      visible: enable,\n      mark: {\n        title: {\n          visible: false,\n        },\n        content: createMarkContent(\n          encoding.tooltip || [],\n          dimensions,\n          vseed.measures as Measures,\n          options.foldInfo,\n          unfoldInfo,\n        ),\n      },\n      dimension: {\n        title: {\n          visible: true,\n        },\n        content: createDimensionContent(dimensions, measures, options.foldInfo, unfoldInfo, reshapeMeasures.length > 1),\n      },\n    }\n    return result\n  }\n}\n\nexport const tooltipDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const barStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'bar') {\n      return pipe(spec, context) as IBarChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pointStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line' || spec.type === 'area') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const lineStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const areaStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'area') {\n      return pipe(spec, context) as IAreaChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ICommonChartSpec, IBarSeriesSpec } from '@visactor/vchart'\nimport { DimAxisType } from 'src/dataReshape/constant'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const adjustXField: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as ICommonChartSpec\n  const chartTypes = (spec.series ?? []).map((s: any) => (s as IBarSeriesSpec).type)\n\n  if (chartTypes.length > 1 && chartTypes.filter((type: string) => type === 'bar').length > 1) {\n    result.series!.forEach((s: any) => {\n      if (s.type === 'bar' && !Array.isArray((s as IBarSeriesSpec).xField)) {\n        // 当左右轴都是柱图的时候，带堆积的柱图增加轴类型作为分组字段，来实现左右轴柱图平行展示的效果\n        ;(s as IBarSeriesSpec).xField = [(s as IBarSeriesSpec).xField as string, DimAxisType]\n      }\n    })\n  }\n\n  return result\n}\n","import type { ILineSeriesSpec, ISpec } from '@visactor/vchart'\nimport { createNumFormatter, flatReshapeMeasures } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { createLinearFormat } from './format/linearFormat'\nimport { linearAxisStyle } from './linearAxisStyle'\nimport { FoldPrimaryMeasureValue } from 'src/dataReshape'\n\nexport const yLinearPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, reshapeMeasures = [] } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const primaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.primaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(primaryYAxis) ? primaryYAxis[index] || primaryYAxis[0] : primaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (!foldInfoList) {\n    return result\n  }\n  const primaryFoldInfoList = foldInfoList!.filter((f) => f.measureValue.startsWith(FoldPrimaryMeasureValue))\n\n  const isEmpty =\n    !primaryFoldInfoList.length || primaryFoldInfoList.every((foldInfo) => !Object.keys(foldInfo.foldMap).length)\n\n  const id = `${reshapeInfoId}-primary-axis`\n\n  const seriesId = alignTicksConfig\n    ? spec.series!.map((s) => (s as any).id)\n    : spec\n        .series!.filter((s) => ((s as ILineSeriesSpec).yField as string).startsWith(FoldPrimaryMeasureValue))\n        .map((s) => (s as any).id)\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { autoFormat, numFormat = {} } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const formatMethod = (value: string) => {\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const measures = flatReshapeMeasures(reshapeMeasures)\n  const measureIds = primaryFoldInfoList.reduce((res: string[], foldInfo) => {\n    Object.keys(foldInfo.foldMap).forEach((k) => {\n      if (!res.includes(k)) {\n        res.push(k)\n      }\n    })\n    return res\n  }, [])\n  const titleText =\n    yAxisConfig?.title?.titleText ||\n    measures\n      .filter((m) => m.encoding === 'primaryYAxis' && measureIds.includes(m.id))\n      .map((m) => m.alias ?? m.id)\n      .join(' & ')\n\n  const linearAxis = {\n    ...linearAxisStyle({\n      ...yAxisConfig,\n      orient: 'left',\n      formatMethod,\n      titleText,\n      id,\n      seriesId,\n    }),\n    visible: isEmpty ? false : (yAxisConfig?.visible ?? true),\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ILineSeriesSpec, ISpec } from '@visactor/vchart'\nimport { createNumFormatter, flatReshapeMeasures } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { createLinearFormat } from './format/linearFormat'\nimport { linearAxisStyle } from './linearAxisStyle'\nimport { FoldSecondaryMeasureValue } from 'src/dataReshape'\n\nexport const yLinearSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, reshapeMeasures = [] } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const secondaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.secondaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(secondaryYAxis) ? secondaryYAxis[index] || secondaryYAxis[0] : secondaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (!foldInfoList) {\n    return result\n  }\n\n  const secondaryFoldInfoList = foldInfoList!.filter((f) => f.measureValue.startsWith(FoldSecondaryMeasureValue))\n\n  const isEmptySecondary =\n    !secondaryFoldInfoList.length || secondaryFoldInfoList.every((foldInfo) => !Object.keys(foldInfo.foldMap).length)\n  const onlySecondary =\n    !isEmptySecondary &&\n    foldInfoList.length &&\n    foldInfoList!.every(\n      (f) => f.measureValue.startsWith(FoldSecondaryMeasureValue) || Object.keys(f.foldMap).length === 0,\n    )\n\n  const sync = {\n    axisId: `${reshapeInfoId}-primary-axis`,\n    zeroAlign: true,\n  }\n\n  const id = `${reshapeInfoId}-secondary-axis`\n  const seriesId = alignTicksConfig\n    ? spec.series!.map((s) => (s as any).id)\n    : spec\n        .series!.filter((s) => ((s as ILineSeriesSpec).yField as string).startsWith(FoldSecondaryMeasureValue))\n        .map((s) => (s as any).id)\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { autoFormat, numFormat = {} } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const formatMethod = (value: string) => {\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n  const measures = flatReshapeMeasures(reshapeMeasures)\n  const titleText =\n    yAxisConfig?.title?.titleText ||\n    measures\n      .filter((m) => m.encoding === 'secondaryYAxis')\n      .map((m) => m.alias ?? m.id)\n      .join(' & ')\n\n  const baseStyle = linearAxisStyle({\n    ...yAxisConfig,\n    orient: 'right',\n    formatMethod,\n    titleText,\n    id,\n    seriesId,\n    sync,\n  })\n\n  const linearAxis = {\n    ...baseStyle,\n    visible: isEmptySecondary ? false : (yAxisConfig?.visible ?? true),\n\n    grid: {\n      ...baseStyle.grid,\n      visible: onlySecondary ? true : yAxisConfig?.grid?.visible,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { IMarkPointSpec, ISpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, SpecPipelineContext, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { flatReshapeMeasures } from 'src/pipeline/utils'\nimport { MeasureId } from 'src/dataReshape/constant'\nimport { pickWithout } from '@visactor/vutils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfDualAxis: VChartSpecPipe = generateAnnotationPointPipe({\n  findSelectedDatas: (dataset, s, spec: ISpec, context: SpecPipelineContext) => {\n    return dataset.reduce((res: Datum[], d: Datum) => {\n      const { advancedVSeed } = context\n      const allMeasureIds = flatReshapeMeasures(advancedVSeed.reshapeMeasures ?? []).map((m) => m.id)\n      const pickedDatum = pickWithout(\n        d,\n        allMeasureIds.filter((id) => id !== d[MeasureId]),\n      )\n\n      if (selector(pickedDatum, s)) {\n        res.push(pickedDatum)\n      }\n\n      return res\n    }, [])\n  },\n  generateMarkPoint: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed } = context\n    const allMeasureIds = flatReshapeMeasures(advancedVSeed.reshapeMeasures ?? []).map((m) => m.id)\n    return spec.series?.map((s: any, index: number) => {\n      return {\n        relativeSeriesIndex: index,\n        coordinate: (data: Datum[]) => {\n          return data.find((item) => {\n            return isSubset(\n              datum,\n              item,\n              allMeasureIds.filter((id) => id !== item[MeasureId]),\n            )\n          })\n        },\n      } as IMarkPointSpec\n    })\n  },\n})\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  backgroundColor,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  pointStyle,\n  lineStyle,\n  pointStateDimensionHover,\n  progressive,\n  areaStyle,\n  barStyle,\n  verticalCrosshairRect,\n  yLinearSecondary,\n  yLinearPrimary,\n  seriesDualAxis,\n  series,\n  colorBarStyleFill,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  linearColorForDualAxis,\n  annotationAreaBand,\n  barMaxWidth,\n  barGapInGroup,\n  stackCornerRadius,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n  annotationPointOfDualAxis,\n  barStyleFilter,\n  pointStyleFilter,\n  lineStyleFilter,\n  areaStyleFilter,\n  tooltipDualAxis,\n  initDualAxis,\n  dualChartType,\n  datasetDualAxis,\n  labelDualAxis,\n  tooltipOfDualAxisSeries,\n  adjustXField,\n} from '../pipes'\n\nconst dualAxis: VChartSpecPipeline = [\n  seriesDualAxis(\n    [initDualAxis, dualChartType, datasetDualAxis, labelDualAxis, tooltipOfDualAxisSeries],\n\n    [\n      progressive,\n\n      barMaxWidth,\n      barGapInGroup,\n      stackCornerRadius,\n\n      barStyleFilter(colorBarStyleFill(barStyle)),\n      pointStyleFilter(colorPointStyleFill(pointStyle)),\n      pointStyleFilter(pointStateDimensionHover),\n      lineStyleFilter(colorLineStyleFill(lineStyle)),\n      areaStyleFilter(colorAreaStyleFill(areaStyle)),\n    ],\n  ),\n  adjustXField,\n  xBand,\n  yLinearPrimary,\n  yLinearSecondary,\n\n  colorAdapter(color, linearColorForDualAxis),\n  colorAdapter(discreteLegend, colorLegend),\n\n  backgroundColor,\n\n  verticalCrosshairRect,\n  annotationPointOfDualAxis,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n\n  tooltipDualAxis,\n]\n\nconst pivotDualAxis: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    series(\n      [initDualAxis, dualChartType, datasetDualAxis, labelDualAxis, tooltipOfDualAxisSeries],\n\n      [\n        progressive,\n\n        barMaxWidth,\n        barGapInGroup,\n        stackCornerRadius,\n\n        barStyleFilter(colorBarStyleFill(barStyle)),\n        pointStyleFilter(colorPointStyleFill(pointStyle)),\n        pointStyleFilter(pointStateDimensionHover),\n        lineStyleFilter(colorLineStyleFill(lineStyle)),\n        areaStyleFilter(colorAreaStyleFill(areaStyle)),\n      ],\n    ),\n    adjustXField,\n    xBand,\n    yLinearPrimary,\n    pivotAxisStyle(yLinearSecondary),\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    verticalCrosshairRect,\n    annotationPointOfDualAxis,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n\n    tooltipDualAxis,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const dualAxisSpecPipeline = [pivotAdapter(dualAxis, pivotDualAxis)]\n","import type {\n  ChartType,\n  Dataset,\n  DualAxisMeasure,\n  DualAxisOptions,\n  SpecPipelineContext,\n  VChartSpecPipe,\n} from 'src/types'\nimport { DEFAULT_DUAL_CHART_TYPE, execPipeline } from '../../../../utils'\nimport type { ICommonChartSpec, ILineSeriesSpec, ISpec } from '@visactor/vchart'\nimport { FoldPrimaryMeasureValue } from 'src/dataReshape/constant'\n\nexport const series = (\n  pipeByAxis: ((options: DualAxisOptions) => VChartSpecPipe)[],\n  pipes: VChartSpecPipe[],\n): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    const { advancedVSeed } = context\n    const { datasetReshapeInfo, reshapeMeasures = [] } = advancedVSeed\n    const { foldInfoList = [], index } = datasetReshapeInfo[0]!\n\n    result.series = foldInfoList!.map((foldInfo) => {\n      const measureId = Object.keys(foldInfo.foldMap)[0]\n      const axisType = foldInfo.measureValue === `${FoldPrimaryMeasureValue}${index}` ? 'primary' : 'secondary'\n      const measure = (reshapeMeasures[index] ?? []).find((m) => m.id === measureId)!\n\n      const options: DualAxisOptions = {\n        axisType,\n        chartType: ((measure as DualAxisMeasure)?.chartType ??\n          (axisType === 'primary' ? DEFAULT_DUAL_CHART_TYPE.primary : DEFAULT_DUAL_CHART_TYPE.secondary)) as ChartType,\n        foldInfo,\n      }\n      const pipeline = [...pipeByAxis.map((p) => p(options)), ...pipes]\n      return execPipeline<ISpec, SpecPipelineContext>(pipeline, context, {})\n    }) as ILineSeriesSpec[]\n\n    return result\n  }\n}\n\n/**\n * @description 双轴图的透视场景, 不能使用此pipe, 请使用series\n * 因为VTable.PivotVChart会自行解析数据, 而非VChart解析.\n */\nexport const seriesDualAxis = (\n  pipeByAxis: ((options: DualAxisOptions) => VChartSpecPipe)[],\n  pipes: VChartSpecPipe[],\n): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    labelLayout: 'region',\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    const { advancedVSeed } = context\n    const { datasetReshapeInfo, dataset, reshapeMeasures = [] } = advancedVSeed\n\n    result.series = dataset.map((d, index) => {\n      const seriesContext = {\n        ...context,\n        advancedVSeed: {\n          ...advancedVSeed,\n          dataset: d as Dataset,\n        },\n      }\n\n      const foldInfo = datasetReshapeInfo[0]!.foldInfoList![index]\n      const measureId = Object.keys(foldInfo.foldMap)[0]\n      const axisType = foldInfo.measureValue === FoldPrimaryMeasureValue ? 'primary' : 'secondary'\n      const measure = (reshapeMeasures[0] ?? []).find((m) => m.id === measureId)!\n\n      const options: DualAxisOptions = {\n        axisType,\n        chartType: ((measure as DualAxisMeasure)?.chartType ??\n          (axisType === 'primary' ? DEFAULT_DUAL_CHART_TYPE.primary : DEFAULT_DUAL_CHART_TYPE.secondary)) as ChartType,\n        foldInfo,\n      }\n      const pipeline = [...pipeByAxis.map((p) => p(options)), ...pipes]\n      return execPipeline<ISpec, SpecPipelineContext>(pipeline, seriesContext, {})\n    }) as ILineSeriesSpec[]\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColorForDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: spec.series!.map((s) => {\n      return {\n        dataId: (s as any).data.id,\n        fields: [unfoldInfo.encodingColor],\n      }\n    }),\n  }\n\n  return result\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initFunnel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IFunnelChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'funnel'\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.isTransform = true\n  result.shape = 'rect'\n  result.maxSize = '75%'\n  result.minSize = '10%'\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorFunnelStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IFunnelChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.funnel?.style) {\n        result.funnel.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const funnelStyle: VChartSpecPipe = (spec) => {\n  const result = {\n    ...spec,\n    funnel: {\n      style: {},\n    },\n  } as IFunnelChartSpec\n\n  return {\n    ...result,\n    funnel: {\n      style: {\n        cornerRadius: 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { VChartSpecPipe } from 'src/types'\n\nexport const funnelTransformStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const config = advancedVSeed.config?.[chartType as 'funnel']?.transform\n\n  return {\n    ...spec,\n    transform: {\n      style: {\n        fill: config?.backgroundColor,\n      },\n    },\n    transformLabel: {\n      visible: true,\n      style: {\n        fill: config?.textColor,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  datasetXY,\n  datasetPivot,\n  initPivot,\n  label,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  initFunnel,\n  discreteLegend,\n  color,\n  funnelStyle,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorFunnelStyleFill,\n  pivotDiscreteLegend,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  funnelTransformStyle,\n  pivotTitle,\n} from '../pipes'\n\nconst funnel: VChartSpecPipeline = [\n  initFunnel,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  colorAdapter(discreteLegend, colorLegend),\n  colorFunnelStyleFill(funnelStyle),\n  funnelTransformStyle,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotFunnel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initFunnel,\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    tooltip,\n    colorFunnelStyleFill(funnelStyle),\n    funnelTransformStyle,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const funnelSpecPipeline = [pivotAdapter(funnel, pivotFunnel)]\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis, YBandAxis } from 'src/types'\nimport { bandAxisStyle } from './bandAxisStyle'\n\nexport const heatmapBandAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const xAxisConfig = (advancedVSeed.config?.[chartType as 'heatmap']?.xAxis ?? {}) as XBandAxis\n  const yAxisConfig = (advancedVSeed.config?.[chartType as 'heatmap']?.yAxis ?? {}) as YBandAxis\n  const xBandAxis = bandAxisStyle(xAxisConfig)\n  const yBandAxis = bandAxisStyle(yAxisConfig)\n\n  xBandAxis.orient = 'bottom'\n  xBandAxis.bandPadding = 0\n  yBandAxis.orient = 'left'\n  yBandAxis.bandPadding = 0\n\n  result.axes = [xBandAxis, yBandAxis]\n\n  return result\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorCellStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IHeatmapChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.cell?.style) {\n        result.cell.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const cellStyle: VChartSpecPipe = (spec, context) => {\n  const result = {\n    ...spec,\n    cell: {\n      style: {},\n    },\n  } as IHeatmapChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const cell = advancedVSeed.config?.[chartType as 'heatmap']?.cell\n\n  return {\n    ...result,\n    cell: {\n      style: {\n        visible: (datum: any) => {\n          return datum?.[DATUM_HIDE_KEY] !== true\n        },\n        shape: 'rect',\n        stroke: cell?.stroke,\n        lineWidth: cell?.lineWidth ?? 1,\n      },\n    },\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltipHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions = [], encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, vseed.measures as Measures, locale, foldInfo),\n    },\n    dimension: {\n      visible: false,\n    },\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures = [],\n  locale: Locale,\n  foldInfo: FoldInfo,\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = [foldInfo].map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (v: unknown) => {\n        const { measureId, foldMap } = foldInfo\n        const datum = v as Datum\n        const id = datum[measureId] as string\n        return foldMap[id] || id\n      },\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHeatmapChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'heatmap'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = unfoldInfo.encodingY\n  result.seriesField = unfoldInfo.encodingColorId\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltipHeatmap,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  discreteLegend,\n  color,\n  colorAdapter,\n  linearColor,\n  heatmapColorLegend,\n  cellStyle,\n  colorCellStyleFill,\n  pivotDiscreteLegend,\n  pivotColorLegend,\n  pivotTitle,\n  pivotAxisStyle,\n  heatmapBandAxis,\n} from '../pipes'\nimport { initHeatmap } from '../pipes/init/heatmap'\n\nconst heatmap: VChartSpecPipeline = [\n  initHeatmap,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  heatmapBandAxis,\n  colorAdapter(discreteLegend, heatmapColorLegend),\n  colorCellStyleFill(cellStyle),\n  tooltipHeatmap,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotHeatmap: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    pivotAxisStyle(initHeatmap),\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    heatmapBandAxis,\n    tooltipHeatmap,\n    colorCellStyleFill(cellStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const heatmapSpecPipeline = [pivotAdapter(heatmap, pivotHeatmap)]\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { VChartSpecPipe } from 'src/types'\nimport { colorLegend } from './colorLegend'\nimport type { Datum, IHeatmapChartSpec } from '@visactor/vchart'\nimport { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\n\nexport const heatmapColorLegend: VChartSpecPipe = (spec, context) => {\n  const result = colorLegend(spec, context) as IHeatmapChartSpec\n\n  if (result.legends) {\n    ;(result.legends as any).customFilter = (data: Datum[], range: number[], key: string) => {\n      const min = Math.min(range[0], range[1])\n      const max = Math.max(range[0], range[1])\n      return (data ?? []).map((entry: Datum) => {\n        const val = entry[key]\n        const isHide = val - min < -1e-6 || val - max > 1e-6\n\n        entry[DATUM_HIDE_KEY] = isHide\n\n        return entry\n      })\n    }\n  }\n\n  return result\n}\n","import type { IHistogramChartSpec } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, FoldMeasureValue } from 'src/index'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHistogram: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IHistogramChartSpec\n\n  // 直方图默认支持明细数据\n  result.type = 'histogram'\n  result.xField = BinStartMeasureId\n  result.x2Field = BinEndMeasureId\n  result.yField = FoldMeasureValue\n  // result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.legends = {\n    visible: false,\n  }\n  result.barGap = 2\n  result.animation = true\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetHistogram: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe, XLinearAxis } from 'src/types'\nimport { createNumFormatter, isAreaPercent, isBarPercent, isColumnPercent, isPivotChart } from 'src/pipeline/utils'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape/constant'\nimport { unique } from 'remeda'\n\nexport const histogramXLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { encoding, dimensions = [], measures = [], dataset } = advancedVSeed\n  const { chartType } = vseed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.xAxis ?? {}) as XLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const { autoFormat, numFormat = {} } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const formatMethod = (value: string) => {\n    if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n      return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n    }\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = config.title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[])\n\n  const linearAxis = linearAxisStyle({\n    ...config,\n    orient: 'bottom',\n    formatMethod,\n    titleText,\n    isPivot,\n  })\n\n  linearAxis.tick.tickMode = () => {\n    const binValues: number[] = []\n\n    dataset.forEach((entry: Datum) => {\n      binValues.push((entry as any)[BinStartMeasureId] as number)\n      binValues.push((entry as any)[BinEndMeasureId] as number)\n    })\n\n    return unique(binValues)\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import { autoFormatter, createNumFormatter } from 'src/pipeline/utils'\nimport type { AdvancedVSeed, XLinearAxis } from 'src/types'\nimport { createLinearFormat } from '../pipes/axes/format/linearFormat'\n\nexport const getDefaultXFormatterOfHistogram = (advancedVSeed: AdvancedVSeed) => {\n  const { chartType, config } = advancedVSeed\n  const xConfig = config?.[chartType as 'bar']?.xAxis as XLinearAxis\n  const { autoFormat = true, numFormat = {} } = xConfig\n  const formatter = createNumFormatter(numFormat)\n  return (value: number) => createLinearFormat(value, autoFormat, numFormat, formatter)\n}\n\nexport const getDefaultValueFormatterOfHistogram = (binValueType: 'count' | 'percentage' = 'count') => {\n  return binValueType === 'percentage'\n    ? createNumFormatter({\n        type: 'percent',\n        fractionDigits: 1,\n      })\n    : (value: number | string) => autoFormatter(value)\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport type { Dimension, Dimensions, Encoding, VChartSpecPipe, Tooltip } from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, ColorEncoding, FoldMeasureValue, XEncoding } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { getDefaultValueFormatterOfHistogram, getDefaultXFormatterOfHistogram } from '../../utils/histogram'\nimport { updateMarkTooltipElement } from './tooltipElement'\n\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipHistogram: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType, dimensions = [], encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip; binValueType: 'count' | 'percentage' }\n  const { binValueType, tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(advancedVSeed)\n  const defaultValueFormatter = getDefaultValueFormatterOfHistogram(binValueType)\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n\n    updateElement: updateMarkTooltipElement,\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  encoding: Encoding,\n  dimFormatter: (value: number) => string,\n  defaultValueFormatter: (value: number | string) => string,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return defaultValueFormatter(datum?.[item.id] as string)\n    },\n  }))\n\n  const defaultContent = [\n    {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return `[${dimFormatter(+datum[BinStartMeasureId])}, ${dimFormatter(+datum[BinEndMeasureId])})`\n      },\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return defaultValueFormatter(datum[FoldMeasureValue] as string | number)\n      },\n    },\n  ]\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n","import type { ICartesianCrosshairSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { verticalCrosshairRect } from './verticalCrosshairRect'\nimport { getDefaultXFormatterOfHistogram } from '../../utils/histogram'\nimport { isArray } from '@visactor/vutils'\n\nexport const histogramVerticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = verticalCrosshairRect(spec, context)\n  if (!result.crosshair) {\n    return result\n  }\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  if (!crosshair.xField) {\n    return result\n  }\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(context.advancedVSeed)\n  crosshair.xField = {\n    ...(crosshair.xField || {}),\n    label: {\n      ...(crosshair.xField?.label || {}),\n      formatMethod: (text) => {\n        if (isArray(text)) {\n          return text\n        }\n        const binRange = `${text}`.split('~')\n        const binStart = defaultXFormatter(+binRange[0])\n        const binEnd = defaultXFormatter(+binRange[1])\n        return binRange.length === 1 ? binStart : `[${binStart}, ${binEnd})`\n      },\n    },\n  }\n\n  return result\n}\n","import type { IHistogramChartSpec, IMarkPointSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfHistogram: VChartSpecPipe = generateAnnotationPointPipe({\n  generateMarkPoint: (datum: Datum, spec) => {\n    const histogramSpec = spec as IHistogramChartSpec\n    const xField = histogramSpec.xField as string\n    const x2Field = histogramSpec.x2Field as string\n\n    return [\n      {\n        coordinate: (data: Datum[]) => {\n          const d = data.find((item) => isSubset(datum, item))\n\n          return d\n            ? {\n                ...d,\n                [xField]: (d[xField] + d[x2Field]) / 2,\n              }\n            : undefined\n        },\n      } as IMarkPointSpec,\n    ]\n  },\n})\n","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport type { KDEOptions } from '@visactor/vutils'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { kde, array } from '@visactor/vutils'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, KdeRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const kdeRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions = [], regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n  const binValueType = advancedVSeed.config[chartType as 'histogram']?.binValueType\n\n  if (!regressionLine || !regressionLine.kdeRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.kdeRegressionLine).filter((kdeLine) => kdeLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.kdeRegressionLine ?? {}) as KdeRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as KdeRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `kdeRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = kde(simpleData, {\n              bandwidth: Math.abs(viewData[0][BinEndMeasureId] - viewData[0][BinStartMeasureId]),\n            } as KDEOptions)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n\n            // 根据 binValueType 决定如何转换 KDE 密度值\n            // - 频次模式 (count): 频次 = 密度 × 样本数 × 带宽\n            // - 百分比模式 (percentage): 百分比 = 密度 × 带宽\n            const scaleR = (k: number) => {\n              if (binValueType === 'percentage') {\n                // 百分比模式：y轴是0-1的百分比，KDE密度值乘以带宽即可\n                return scaleY.scale(k * res.bandwidth)\n              } else {\n                // 频次模式：y轴是实际计数，需要乘以样本数量\n                return scaleY.scale(k * simpleData.length * res.bandwidth)\n              }\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `kdeRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  return result\n}\n","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { ecdf, array, isArray } from '@visactor/vutils'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, EcdfRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const ecdfRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions = [], regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.ecdfRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.ecdfRegressionLine).filter((ecdfLine) => ecdfLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme?.ecdfRegressionLine ?? {}) as EcdfRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as EcdfRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `ecdfRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = ecdf(simpleData)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n            const yRange = scaleY.range()\n            const y0 = yRange[0]\n            const y1 = yRange[yRange.length - 1]\n            const scaleR = (e: number) => {\n              return y0 + (y1 - y0) * e\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `ecdfRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  // add percent axis of ecdf\n  const leftAxis = result.axes?.find((v) => v.orient === 'left')\n  if (leftAxis && lineList.length) {\n    result.axes?.push({\n      visible: true,\n      orient: 'right',\n      type: 'linear',\n      base: 10,\n      min: 0,\n      max: 1,\n      domainLine: {\n        ...leftAxis.domainLine,\n      },\n      grid: {\n        visible: false,\n      },\n      tick: {\n        ...leftAxis.tick,\n      },\n      title: {\n        ...leftAxis.title,\n        visible: false,\n      },\n      label: {\n        ...leftAxis.label,\n        visible: true,\n        formatMethod: (v) => {\n          const text = isArray(v) ? v[0] : v\n          return `${(+text * 100).toFixed(1)}%`\n        },\n      },\n    })\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  label,\n  backgroundColor,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  datasetHistogram,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  initHistogram,\n  yLinear,\n  histogramVerticalCrosshairRect,\n  tooltipHistogram,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n  histogramXLinear,\n} from '../pipes'\n\nconst histogram: VChartSpecPipeline = [\n  initHistogram,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetHistogram,\n  progressive,\n  histogramXLinear,\n  yLinear,\n  label,\n  tooltipHistogram,\n  colorAdapter(discreteLegend, colorLegend),\n  histogramVerticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n]\n\nconst pivotHistogram: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initHistogram,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetHistogram,\n    progressive,\n    histogramXLinear,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltipHistogram,\n    colorBarStyleFill(barStyle),\n    histogramVerticalCrosshairRect,\n    annotationPointOfHistogram,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    kdeRegressionLine,\n    ecdfRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const histogramSpecPipeline = [pivotAdapter(histogram, pivotHistogram)]\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'line'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initLine,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorLineStyleFill,\n  colorPointStyleFill,\n  pivotColorLegend,\n  pivotTitle,\n  pivotAxisStyle,\n  splitLine,\n  dimensionLinkage,\n} from '../pipes'\n\nconst line: VChartSpecPipeline = [\n  initLine,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  verticalCrosshairLine,\n  colorAdapter(discreteLegend, colorLegend),\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  label,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotLine: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initLine,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    label,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const lineSpecPipeline = [pivotAdapter(line, pivotLine)]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = 0\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initPie,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  pieStyle,\n  colorPieStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst pie: VChartSpecPipeline = [\n  initPie,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotPie: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initPie,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    colorPieStyleFill(pieStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    addRegionPadding,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const pieSpecPipeline = [pivotAdapter(pie, pivotPie)]\n","import type { IRadarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initRadar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRadarChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'radar'\n  result.angleField = unfoldInfo.encodingAngle\n  result.radiusField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarAngleAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'angle',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarRadiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'radius',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n    label: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, SpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  initRadar,\n  areaStyle,\n  radarAngleAxis,\n  radarRadiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst radar: VChartSpecPipeline = [\n  initRadar,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radarAngleAxis,\n  radarRadiusAxis,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  // annotationPoint,\n  // annotationVerticalLine,\n  // annotationHorizontalLine,\n  // annotationArea,\n]\n\nconst pivotRadar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRadar,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radarAngleAxis,\n    radarRadiusAxis,\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    // annotationPoint,\n    // annotationVerticalLine,\n    // annotationHorizontalLine,\n    // annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const radarSpecPipeline: SpecPipeline = [pivotAdapter(radar, pivotRadar)]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRose: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'rose'\n\n  result.angleField = unfoldInfo.encodingAngle\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRose,\n  radiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  pivotColorLegend,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst rose: VChartSpecPipeline = [\n  initRose,\n  stackCornerRadius,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  verticalCrosshairRect,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n]\n\nconst pivotRose: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRose,\n    addRegionPadding,\n    stackCornerRadius,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const roseSpecPipeline = [pivotAdapter(rose, pivotRose)]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRoseParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, dataset, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.angle, encoding.color)\n\n  result.type = 'rose'\n  result.angleField = [unfoldInfo.encodingAngle]\n\n  if (!sameDimensionsMode) {\n    result.angleField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.radius?.length === 1) {\n      result.angleField.pop()\n    }\n  }\n\n  result.valueField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.rose = {\n    style: {\n      stroke: '#ffffff',\n      lineWidth: 1,\n    },\n    state: {\n      hover: {\n        lineWidth: 1,\n        fillOpacity: 0.6,\n      },\n    },\n  }\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRoseParallel,\n  radiusAxis,\n  progressive,\n  pivotColorLegend,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst roseParallel: VChartSpecPipeline = [\n  initRoseParallel,\n  stackCornerRadius,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  verticalCrosshairRect,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotRoseParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRoseParallel,\n    addRegionPadding,\n    stackCornerRadius,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const roseParallelSpecPipeline = [pivotAdapter(roseParallel, pivotRoseParallel)]\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList } = datasetReshapeInfo[0]\n\n  result.type = 'scatter'\n  result.direction = 'vertical'\n  result.xField = foldInfoList?.[0].measureValue\n  if (foldInfoList?.[1]) {\n    result.yField = foldInfoList[1].measureValue\n  }\n\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetScatter: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const scatterSize: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as {\n    sizeRange: number | number[]\n    size?: number | number[]\n  }\n  const hasSizeEncoding = encoding?.size?.[0]\n  if (!hasSizeEncoding) {\n    return result\n  }\n\n  const size = baseConfig.size ?? baseConfig.sizeRange\n\n  result.size = {\n    type: 'linear',\n    range: Array.isArray(size) ? size : [size, size],\n  } as IScatterChartSpec['size']\n\n  result.sizeField = encoding?.size?.[0] || undefined\n\n  return result\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions!,\n    advancedVSeed.measures!,\n    encoding as Encoding,\n    foldInfoList,\n  ) as unknown as IScatterChartSpec['label']\n\n  return result\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltipScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions = [], encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfoList } = datasetReshapeInfo[0] as unknown as {\n    foldInfoList: FoldInfo[]\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, vseed.measures as Measures, locale, foldInfoList),\n    },\n    dimension: {\n      visible: false,\n    },\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures = [],\n  locale: Locale,\n  foldInfoList: FoldInfo[],\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = foldInfoList.map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: Object.values(foldInfo.foldMap)[0],\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { ICartesianSeries, IChart, IScatterChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport {\n  array,\n  clamper,\n  regressionLinear,\n  regressionLowess,\n  regressionPolynomial,\n  regressionLogistic,\n} from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n  SpecPipelineContext,\n  LogisticRegressionLine,\n  LowessRegressionLine,\n} from 'src/types'\nimport { getAlphaByConfidenceLevel } from './common'\n\nexport const generateRegressionLinePipe = (\n  type: 'linearRegressionLine' | 'lowessRegressionLine' | 'polynomialRegressionLine' | 'logisticRegressionLine',\n  regressionFunction: (\n    arr: Datum[],\n    xAccessor: (d: Datum) => number,\n    yAccessor: (d: Datum) => number,\n    options?: any,\n  ) => {\n    confidenceInterval: (N: number) => { lower: number; upper: number; x: number }[]\n    evaluateGrid: (N: number) => { x: number; y: number }[]\n  },\n  getOptions: (lineConfig: any) => any = getDefaultRegressionOptions,\n  getMinPoints: (lineConfig: any) => number = () => 2,\n): VChartSpecPipe => {\n  return ((spec: Partial<IScatterChartSpec>, context: SpecPipelineContext): Partial<IScatterChartSpec> => {\n    const result = { ...spec }\n    const { advancedVSeed } = context\n    const { chartType, regressionLine } = advancedVSeed\n    const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n    if (!regressionLine || !regressionLine[type]) {\n      return result\n    }\n\n    const lineList = array(regressionLine[type])\n\n    if (!result.extensionMark) {\n      result.extensionMark = []\n    }\n\n    lineList.forEach((line, lineIndex) => {\n      if (line.enable === false) {\n        return\n      }\n\n      const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n      const {\n        color,\n        lineWidth,\n        lineDash,\n        text,\n        textColor,\n        textFontSize,\n        textFontWeight,\n        confidenceIntervalOpacity,\n        shadowBlur,\n        shadowColor,\n        shadowOffsetX,\n        shadowOffsetY,\n        confidenceIntervalVisible = theme.confidenceIntervalVisible,\n      } = line as LinearRegressionLine\n\n      const childrenMarks: any[] = []\n\n      ;(result.extensionMark as any[]).push({\n        type: 'group',\n        interactive: false,\n        zIndex: 500,\n        name: `${type}-${lineIndex}`,\n        layoutType: 'region-relative',\n        dataId: (spec.data as any)?.id,\n        animation: false,\n        style: {\n          data: (datum: any, ctx: any) => {\n            const vchart = ctx.vchart as IVChart\n            const chart = vchart.getChart() as IChart\n            const s = chart.getAllSeries()[0] as ICartesianSeries\n\n            if (s) {\n              const rect = s.getRegion().getLayoutRect()\n              const segments: {\n                areaPoints?: { x: number; y: number; y1: number }[]\n                linePoints: { x: number; y: number }[]\n                color: string\n              }[] = []\n\n              if (rect.width === 0 || rect.height === 0) {\n                return segments\n              }\n\n              const yClamper = clamper(0, rect.height)\n              const colorAttrOptions = s.getColorAttribute()\n              const groups: (string | undefined)[] = s.getSeriesKeys()\n              const data = s.getViewData()?.latestData as Datum[]\n              const fieldX = s.fieldX?.[0]\n              const fieldY = s.fieldY?.[0]\n\n              if (!groups.length) {\n                groups.push(undefined)\n              }\n\n              groups.forEach((group) => {\n                const groupData = data.filter((d: Datum) => d[colorAttrOptions?.field] === group)\n\n                const minPoints = getMinPoints(line)\n\n                if (groupData.length < minPoints) {\n                  return\n                }\n                const { confidenceInterval, evaluateGrid } = regressionFunction(\n                  groupData,\n                  (datum: Datum) => datum?.[fieldX],\n                  (datum: Datum) => datum?.[fieldY],\n                  getOptions?.(line),\n                )\n                const N = Math.max(3, Math.floor(groupData.length / 4))\n                const mainColor = color ?? colorAttrOptions?.scale?.scale(group)\n\n                const lineData = evaluateGrid(N)\n                const linePoints: { x: number; y: number }[] = []\n\n                lineData.forEach((ld: Datum, index: number) => {\n                  const d = { [fieldX]: ld.x, [fieldY]: ld.y }\n                  const x = s.dataToPositionX(d)!\n                  const y = yClamper(s.dataToPositionY(d)!)\n\n                  if (segments.length && index === 0) {\n                    segments[segments.length - 1].linePoints.push({ x, y: NaN }) // 断开线段用的\n                  }\n\n                  linePoints.push({\n                    x,\n                    y,\n                  })\n                })\n\n                const segment: {\n                  color: string\n                  linePoints: { x: number; y: number }[]\n                  areaPoints?: { x: number; y: number; y1: number }[]\n                } = {\n                  color: mainColor,\n                  linePoints,\n                }\n\n                if (confidenceIntervalVisible) {\n                  const intervalData = confidenceInterval(N)\n                  const areaPoints: { x: number; y: number; y1: number }[] = []\n\n                  intervalData.map((datum: Datum, index: number) => {\n                    const d = { [fieldX]: datum.x, [fieldY]: datum.lower }\n                    const x = s.dataToPositionX(d)!\n                    const y = yClamper(s.dataToPositionY(d)!)\n                    const y1 = yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!)\n\n                    if (segments.length && index === 0) {\n                      segments[segments.length - 1].areaPoints!.push({ x, y: NaN, y1: NaN }) // 断开线段用的\n                    }\n\n                    areaPoints.push({ x, y, y1 })\n                  })\n\n                  segment.areaPoints = areaPoints\n                }\n\n                segments.push(segment)\n              })\n\n              return segments\n            }\n            return []\n          },\n        },\n        children: childrenMarks,\n      })\n\n      if (confidenceIntervalVisible) {\n        childrenMarks.push({\n          type: 'area',\n          interactive: false,\n          zIndex: 500,\n          dataId: (spec.data as any)?.id,\n          style: {\n            stroke: false,\n            lineWidth: lineWidth ?? theme.lineWidth,\n            lineDash: lineDash ?? theme.lineDash,\n            fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n            fill: 'red', // vrender bug，必须要设置一个全局的fill，才会绘制\n            segments: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode) {\n                const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n\n                if (data?.length) {\n                  return data.map((d: any) => {\n                    return {\n                      points: d.areaPoints ?? [],\n                      fill: d.color,\n                    }\n                  })\n                }\n              }\n\n              return []\n            },\n          },\n        })\n      }\n\n      childrenMarks.push({\n        type: 'line',\n        interactive: false,\n        zIndex: 500,\n        animation: false,\n        dataId: (spec.data as any)?.id,\n        style: {\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          stroke: 'red', // vrender bug，必须要设置一个全局的stroke，才会绘制\n          shadowBlur: shadowBlur ?? theme.shadowBlur,\n          shadowColor: shadowColor ?? theme.shadowColor,\n          shadowOffsetX: shadowOffsetX ?? theme.shadowOffsetX,\n          shadowOffsetY: shadowOffsetY ?? theme.shadowOffsetY,\n          segments: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode) {\n              const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n              if (data?.length) {\n                return data.map((d: any) => {\n                  return {\n                    points: d.linePoints,\n                    stroke: d.color,\n                  }\n                })\n              }\n            }\n\n            return []\n          },\n        },\n      })\n\n      if (!isNullish(text)) {\n        childrenMarks.push({\n          type: 'text',\n          interactive: false,\n          zIndex: 500,\n          animation: false,\n          dataId: (spec.data as any)?.id,\n          dataKey: () => {\n            return `regressionLine-label-${lineIndex}`\n          },\n          style: {\n            textAlign: 'end',\n            fill: textColor ?? theme.textColor,\n            fontSize: textFontSize ?? theme.textFontSize,\n            fontWeight: textFontWeight ?? theme.textFontWeight,\n            text: text,\n            x: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.x\n              }\n\n              return undefined\n            },\n            y: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.y\n              }\n\n              return undefined\n            },\n          },\n        })\n      }\n    })\n\n    return result\n  }) as VChartSpecPipe\n}\n\nconst getDefaultRegressionOptions = (\n  lineConfig: PolynomialRegressionLine | LinearRegressionLine | LogisticRegressionLine | LowessRegressionLine,\n) => {\n  const alpha = getAlphaByConfidenceLevel(lineConfig?.confidenceLevel)\n  return { alpha }\n}\n\nexport const linearRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'linearRegressionLine',\n  regressionLinear,\n  getDefaultRegressionOptions,\n)\nexport const lowessRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'lowessRegressionLine',\n  regressionLowess,\n  getDefaultRegressionOptions,\n)\nexport const polynomialRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'polynomialRegressionLine',\n  regressionPolynomial,\n  (lineConfig: PolynomialRegressionLine) => {\n    return { ...getDefaultRegressionOptions(lineConfig), degree: lineConfig.degree ?? 2 }\n  },\n  (lineConfig: PolynomialRegressionLine) => (lineConfig.degree ?? 2) + 1,\n)\nexport const logisticRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'logisticRegressionLine',\n  regressionLogistic,\n  getDefaultRegressionOptions,\n)\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  yLinear,\n  backgroundColor,\n  tooltipScatter,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  verticalCrosshairLine,\n  xLinear,\n  horizontalCrosshairLine,\n  pointStateHover,\n  initScatter,\n  progressive,\n  datasetScatter,\n  linearColor,\n  colorAdapter,\n  colorPointStyleFill,\n  colorLegend,\n  pivotColorLegend,\n  labelScatter,\n  scatterSize,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst scatter: VChartSpecPipeline = [\n  initScatter,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetScatter,\n  progressive,\n  xLinear,\n  yLinear,\n  scatterSize,\n  labelScatter,\n  tooltipScatter,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  horizontalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateHover,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n]\n\nconst pivotScatter: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initScatter,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetScatter,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yLinear),\n    scatterSize,\n    labelScatter,\n    tooltipScatter,\n    verticalCrosshairLine,\n    horizontalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateHover,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    linearRegressionLine,\n    lowessRegressionLine,\n    polynomialRegressionLine,\n    logisticRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const scatterSpecPipeline = [pivotAdapter(scatter, pivotScatter)]\n","/**\n * @description 适用于线图、面积图等的区块标注，计算标注区块的时候，只考虑点的大小\n */\nimport type { ICartesianSeries, ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationArea: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      positions: (data: Datum[], context: ICartesianSeries) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const maxX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n          const minY = 0\n          const maxY = regionRect.height\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const maxY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: (positionMap as any)[textPosition],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import { type ICartesianSeries, type ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationAreaBand: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      // coordinates: selectedData,\n      positions: (data: Datum[], context: ICartesianSeries & { _scaleConfig?: { bandPosition?: number } }) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const bandPosition = context?._scaleConfig?.bandPosition || 0\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldX.length ?? 0\n          const xBandWidth = xAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n          const startX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const endX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n\n          const width = endX - startX + xBandWidth\n          const middleX = (endX + startX) / 2 + xBandWidth * (0.5 - bandPosition)\n\n          const minX = middleX - width / 2\n          const maxX = middleX + width / 2\n\n          const minY = 0\n          const maxY = regionRect.height\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldY.length ?? 0\n          const yBandWidth = yAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const startY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const endY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const width = endY - startY + yBandWidth\n          const middleY = (endY + startY) / 2 + yBandWidth * (0.5 - bandPosition)\n\n          const minY = middleY - width / 2\n          const maxY = middleY + width / 2\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: positionMap[textPosition as 'bottom'],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationHorizontalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationHorizontalLine\n  const { annotationHorizontalLine } = annotation\n  const annotationHorizontalLineList = Array.isArray(annotationHorizontalLine)\n    ? annotationHorizontalLine\n    : [annotationHorizontalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n\n  const markLine = annotationHorizontalLineList.flatMap((annotationHorizontalLine) => {\n    const {\n      yValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'right',\n      textBaseline = 'bottom',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationHorizontalLine\n\n    const generateOneMarkLine = (y: string | number) => {\n      return {\n        y,\n        autoRange: true,\n        zIndex: ANNOTATION_Z_INDEX,\n        line: {\n          style: {\n            visible: lineVisible,\n            stroke: lineColor,\n            lineWidth: lineWidth,\n            lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n          },\n        },\n        label: {\n          confine: true,\n          text: text,\n          position: (positionMap as any)[textPosition || 'insideEnd'],\n          style: {\n            opacity: 0.95,\n            visible: true,\n            dy: 4,\n            stroke: textBackgroundColor,\n            lineWidth: 1,\n            textAlign: textAlign,\n            textBaseline: textBaseline,\n            fill: textColor,\n            fontSize: textFontSize,\n            fontWeight: textFontWeight,\n          },\n          labelBackground: {\n            visible: textBackgroundVisible,\n            padding: textBackgroundPadding,\n            style: {\n              opacity: 0.95,\n              dy: 4,\n              cornerRadius: textBackgroundBorderRadius,\n              fill: textBackgroundColor,\n              stroke: textBackgroundBorderColor,\n              lineWidth: textBackgroundBorderWidth,\n              fillOpacity: 1,\n            },\n          },\n        },\n        startSymbol: {\n          visible: theme?.startSymbolVisible ?? true,\n          symbolType: theme?.startSymbolType ?? 'triangleDown',\n          size: 5 + (lineWidth || 1),\n          style: {\n            dx: 3,\n            fill: lineColor,\n          },\n        },\n        endSymbol: {\n          visible: theme?.endSymbolVisible ?? false,\n          symbolType: theme?.endSymbolType ?? 'arrow',\n          size: 10 + (lineWidth || 1),\n          style: {\n            dx: -4,\n            fill: lineColor,\n          },\n        },\n      }\n    }\n    if (isArray(yValue) || isString(yValue) || isNumber(yValue)) {\n      const yValueArr = Array.isArray(yValue) ? yValue : [yValue]\n      return yValueArr.map(generateOneMarkLine)\n    }\n\n    return []\n  }) as IMarkLineSpec[]\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","import type { VChartSpecPipe } from 'src/types'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPoint: VChartSpecPipe = generateAnnotationPointPipe({})\n","import type { ISpec, IMarkPointSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, Selector, Selectors, SpecPipelineContext, VChartSpecPipe, VSeed } from 'src/types'\nimport { isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const generateAnnotationPointPipe = (options: {\n  findSelectedDatas?: (\n    dataset: Datum[],\n    selector: Selector | Selectors | undefined | null,\n    spec: ISpec,\n    context: SpecPipelineContext,\n  ) => Datum[]\n  generateMarkPoint?: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => IMarkPointSpec[] | undefined\n}) => {\n  const findSelectedDatas = options.findSelectedDatas ?? ((dataset, s) => dataset.filter((datum) => selector(datum, s)))\n  const generateMarkPoint =\n    options.generateMarkPoint ??\n    ((datum: Datum) => {\n      return [\n        {\n          coordinate: (data: Datum[]) => {\n            return data.find((item) => isSubset(datum, item))\n          },\n        },\n      ]\n    })\n\n  return ((spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    const { annotation, config } = advancedVSeed\n\n    if (!annotation || !annotation.annotationPoint) {\n      return spec\n    }\n\n    const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationPoint\n    const { annotationPoint } = annotation\n    const annotationPointList = Array.isArray(annotationPoint) ? annotationPoint : [annotationPoint]\n    const isHorizontalBar = isBarLikeChart(advancedVSeed as VSeed)\n    const defaultStyle = isHorizontalBar\n      ? {\n          textAlign: 'right',\n          textBaseline: 'middle',\n        }\n      : {\n          textAlign: 'center',\n          textBaseline: 'top',\n        }\n\n    const markPoint = annotationPointList.flatMap((annotationPoint) => {\n      const {\n        selector: selectorPoint,\n        text = '',\n        textColor = theme?.textColor ?? '#ffffff',\n        textFontSize = theme?.textFontSize ?? 12,\n        textFontWeight = theme?.textFontWeight ?? 400,\n        textAlign = defaultStyle.textAlign,\n        textBaseline = defaultStyle.textBaseline,\n        textBackgroundBorderColor = theme?.textBackgroundBorderColor,\n        textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n        textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n        textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n        textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n        textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n        offsetX = theme?.offsetX ?? 0,\n        offsetY = theme?.offsetY ?? 0,\n      } = annotationPoint\n\n      const dataset = advancedVSeed.dataset.flat()\n      const selectedData = selectorPoint ? findSelectedDatas(dataset, selectorPoint, spec, context) : []\n      const dx = -10 - (isHorizontalBar ? (textFontSize as number) : 0) // 由于vchart tag实现问题，需要设置这个强制偏移量\n      const dy = isHorizontalBar ? 0 : (textFontSize as number)\n      const markPointStyle = {\n        zIndex: ANNOTATION_Z_INDEX,\n        regionRelative: true,\n        itemLine: {\n          visible: false,\n        },\n        itemContent: {\n          offsetY,\n          offsetX,\n          confine: true,\n          text: {\n            text: text,\n            style: {\n              opacity: 0.95,\n              visible: true,\n              textAlign: textAlign,\n              textBaseline: textBaseline,\n              fill: textColor,\n              stroke: textBackgroundColor,\n              lineWidth: 1,\n              fontSize: textFontSize,\n              fontWeight: textFontWeight,\n              dx,\n              dy,\n            },\n            labelBackground: {\n              visible: textBackgroundVisible,\n              padding: textBackgroundPadding,\n              style: {\n                opacity: 0.95,\n                cornerRadius: textBackgroundBorderRadius ?? 4,\n                fill: textBackgroundColor,\n                stroke: textBackgroundBorderColor,\n                lineWidth: textBackgroundBorderWidth,\n                dx,\n                dy,\n              },\n            },\n          },\n        },\n      } as Partial<IMarkPointSpec>\n\n      return selectedData.reduce((res: IMarkPointSpec[], datum) => {\n        const marks = generateMarkPoint(datum, spec, context)\n\n        if (marks && marks.length) {\n          marks.forEach((mark) => {\n            res.push({\n              ...markPointStyle,\n              ...mark,\n            } as IMarkPointSpec)\n          })\n        }\n\n        return res\n      }, [])\n    }) as unknown as IMarkPointSpec[]\n\n    return {\n      ...spec,\n      markPoint,\n    } as ISpec\n  }) as VChartSpecPipe\n}\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationVerticalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationVerticalLine) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationVerticalLine\n  const { annotationVerticalLine } = annotation\n  const annotationVerticalLineList = Array.isArray(annotationVerticalLine)\n    ? annotationVerticalLine\n    : [annotationVerticalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n  const markLine = annotationVerticalLineList.flatMap((annotationVerticalLine) => {\n    const {\n      xValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'center',\n      textBaseline = 'top',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationVerticalLine\n\n    const generateOneMarkLine = (x: number | string) => ({\n      x,\n      autoRange: true,\n      zIndex: ANNOTATION_Z_INDEX,\n      line: {\n        style: {\n          visible: lineVisible,\n          stroke: lineColor,\n          lineStyle: lineStyle,\n          lineWidth: lineWidth,\n          lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n        },\n      },\n      label: {\n        confine: true,\n        text: text,\n        position: (positionMap as any)[textPosition || 'insideEnd'],\n        style: {\n          opacity: 0.95,\n          dx: 5,\n          visible: true,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            dx: 5,\n            cornerRadius: textBackgroundBorderRadius,\n            fill: textBackgroundColor,\n            fillOpacity: 1,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n          },\n        },\n      },\n      startSymbol: {\n        visible: theme?.startSymbolVisible ?? true,\n        symbolType: theme?.startSymbolType ?? 'triangleDown',\n        size: 5 + (lineWidth || 1),\n        style: {\n          dy: -3,\n          fill: lineColor,\n        },\n      },\n      endSymbol: {\n        visible: theme?.endSymbolVisible ?? false,\n        symbolType: theme?.endSymbolType ?? 'arrow',\n        size: 10 + (lineWidth || 1),\n        style: {\n          dy: 4,\n          fill: lineColor,\n        },\n      },\n    })\n\n    if (isArray(xValue) || isString(xValue) || isNumber(xValue)) {\n      const xValueArr = Array.isArray(xValue) ? xValue : [xValue]\n      return xValueArr.map(generateOneMarkLine)\n    }\n\n    return []\n  }) as IMarkLineSpec[]\n\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","import type { ICartesianSeries, IChart, ILineChartSpec, IVChart } from '@visactor/vchart'\nimport { array, clamper, Color as VUtilColor } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject } from 'remeda'\nimport type { AnnotationHorizontalLine, VChartSpecPipe, Color } from 'src/types'\n\ninterface SplitConfig {\n  points: { x: number; y: number }[]\n  splitCoordinate: number\n  lineStroke: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n  areaFill: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n}\n\nconst formatGradientStops = (stops: { color: string; offset: number }[]) => {\n  const firstInvalidateIndex = stops.findIndex((stop) => stop.offset < 0 || stop.offset > 1)\n\n  if (firstInvalidateIndex >= 0) {\n    if (stops[firstInvalidateIndex].offset > 1) {\n      const newStops = stops.slice(0, firstInvalidateIndex + 1)\n      newStops[newStops.length - 1].offset = 1\n\n      return newStops\n    }\n    const newStops = stops.slice(firstInvalidateIndex + 1)\n\n    newStops[0].offset = 0\n    return newStops\n  }\n\n  return stops\n}\n\nexport const splitLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { annotation, chartType, datasetReshapeInfo } = advancedVSeed\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  const splitLineConfig = array(annotation.annotationHorizontalLine).find(\n    (item) => !!(item as AnnotationHorizontalLine).splitLine,\n  ) as AnnotationHorizontalLine | undefined\n\n  const splitValue = +(splitLineConfig?.yValue as number | string)\n\n  if (Number.isNaN(splitValue) || !isNumber(splitValue)) {\n    return spec\n  }\n  const result = { ...spec } as Partial<ILineChartSpec>\n  const colorTheme = baseConfig?.color ?? {}\n  const colorConfig = {\n    positiveColor: colorTheme.positiveColor || 'red',\n    negativeColor: colorTheme.negativeColor || 'green',\n    ...(isPlainObject(splitLineConfig?.splitLine) ? splitLineConfig?.splitLine : {}),\n  }\n\n  const groupMark = {\n    type: 'group',\n    name: 'annotationHorizontalLine-splitLine',\n    zIndex: 300,\n    style: {\n      splitConfig: (datum: any, ctx: any) => {\n        const vchart = ctx.vchart as IVChart\n        const chart = vchart.getChart() as IChart\n        const lineSeries = chart.getAllSeries().find((s) => s.type === 'line' || s.type === 'area') as ICartesianSeries\n\n        if (!lineSeries) {\n          return\n        }\n        const lineMark = lineSeries.getMarkInName('line') ?? lineSeries.getMarkInName('area')\n\n        if (!lineMark) {\n          return\n        }\n        const lineGraphics = lineMark.getGraphics()\n\n        if (!lineGraphics || lineGraphics.length !== 1 || !lineGraphics[0]) {\n          return\n        }\n        const points = ((lineGraphics[0].attribute as any).points ?? []) as { x: number; y: number }[]\n\n        if ((lineGraphics[0].attribute as any).segments?.length) {\n          ;((lineGraphics[0].attribute as any).segments as any[]).forEach(\n            (seg: { points: { x: number; y: number }[] }) => {\n              seg.points.forEach((pt: { x: number; y: number }) => {\n                points.push({ x: pt.x, y: pt.y })\n              })\n            },\n          )\n        }\n\n        if (!points || !points.length) {\n          return\n        }\n        const scale = lineSeries.getYAxisHelper().getScale!(0)\n        const splitCoordinate = scale.scale(splitValue)\n        const minY = Math.min(...points.map((p) => p.y))\n        const maxY = Math.max(...points.map((p) => p.y))\n        const ratio = (splitCoordinate - minY) / (maxY - minY)\n\n        const lineStroke = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: colorConfig.positiveColor,\n              offset: ratio,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: ratio + 0.0000001,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const areaFill = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: new VUtilColor(colorConfig.positiveColor).setOpacity(0).toRGBA(),\n              offset: ratio,\n            },\n            {\n              offset: ratio + 0.0000001,\n              color: new VUtilColor(colorConfig.negativeColor).setOpacity(0).toRGBA(),\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const attrs: any = {\n          segments: null,\n          points,\n        }\n\n        if (lineGraphics[0].type === 'area') {\n          attrs.stroke = lineStroke\n          attrs.fill = areaFill\n        } else {\n          attrs.stroke = lineStroke\n        }\n\n        lineGraphics[0].setAttributes(attrs as unknown as Record<string, any>)\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        lineGraphics[0].setFinalAttributes?.(attrs)\n        const start = lineSeries.getRegion().getLayoutStartPoint()\n        const range = scale.range() as number[]\n\n        return {\n          points: points.map((entry) => ({ x: entry.x + start.x, y: entry.y + start.y })),\n          splitCoordinate: clamper(range[0], range[range.length - 1])(splitCoordinate as number) + start.y,\n          areaFill,\n          lineStroke,\n        } as SplitConfig\n      },\n    },\n    children: [\n      {\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        style: {\n          fillOpacity: 0.5,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { points, splitCoordinate } = parentNode.attribute.splitConfig as SplitConfig\n\n              return points.map((entry: { x: number; y: number }) => {\n                return {\n                  ...entry,\n                  y1: splitCoordinate,\n                }\n              })\n            }\n\n            return []\n          },\n          fill: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { areaFill } = parentNode.attribute.splitConfig as SplitConfig\n\n              return areaFill\n            }\n\n            return\n          },\n        },\n      },\n    ],\n  }\n\n  if (!result.customMark) {\n    result.customMark = []\n  }\n\n  ;(result.customMark as any[]).push(groupMark)\n\n  const seriesSpec =\n    result.type === 'line' || result.type === 'area'\n      ? result\n      : result.series?.find((s) => s.type === 'line' || s.type === 'area')\n\n  if (seriesSpec) {\n    if (!seriesSpec.point) {\n      seriesSpec.point = {}\n    }\n    if (!seriesSpec.line) {\n      seriesSpec.line = {}\n    }\n\n    if (!seriesSpec.point.style) {\n      seriesSpec.point.style = {}\n    }\n    if (!seriesSpec.line.style) {\n      seriesSpec.line.style = {}\n    }\n\n    const measureValueKey = datasetReshapeInfo[0].foldInfo.measureValue\n\n    seriesSpec.point.style.fill = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    seriesSpec.line.style.stroke = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    if (seriesSpec.label && (seriesSpec.label as any).visible && isNullish((seriesSpec.label as any).style?.fill)) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ;(seriesSpec.label as any).style = {\n        ...(seriesSpec.label as any).style,\n        fill: (datum: any) => {\n          return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n        },\n      }\n    }\n  }\n\n  return result\n}\n","import type { Datum } from 'src/types'\n\nexport const isSubset = (sub: Datum, obj: Datum, excludeMeasuresIds?: string[]) => {\n  return Object.entries(sub).every(([key, value]) => {\n    if (excludeMeasuresIds && excludeMeasuresIds.includes(key)) {\n      return false\n    }\n\n    if (typeof value === 'string') {\n      return obj[key] === value\n    }\n    if (typeof value === 'number') {\n      return obj[key] === value\n    }\n    return true\n  })\n}\n\nexport const ANNOTATION_AREA_TEXT_STYLE_BY_POSITION = {\n  top: {\n    textAlign: 'center',\n    textBaseline: 'top',\n  },\n  topRight: {\n    textAlign: 'right',\n    textBaseline: 'top',\n  },\n  topLeft: {\n    textAlign: 'left',\n    textBaseline: 'top',\n  },\n  bottom: {\n    textAlign: 'center',\n    textBaseline: 'bottom',\n  },\n  bottomLeft: {\n    textAlign: 'left',\n    textBaseline: 'bottom',\n  },\n  bottomRight: {\n    textAlign: 'right',\n    textBaseline: 'bottom',\n  },\n  left: {\n    textAlign: 'left',\n    textBaseline: 'middle',\n  },\n  right: {\n    textAlign: 'right',\n    textBaseline: 'middle',\n  },\n}\n","import type { ICartesianBandAxisSpec } from '@visactor/vchart'\nimport type { XBandAxis } from 'src/types'\nimport { AXIS_LABEL_SPACE } from 'src/pipeline/utils'\n\nexport const bandAxisStyle = (config: XBandAxis) => {\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    labelAutoHide,\n    labelAutoHideGap,\n    labelAutoLimit,\n    labelAutoLimitLength = 80,\n    labelAutoRotate,\n    labelAutoRotateAngleRange,\n  } = config\n\n  return {\n    type: 'band',\n    sampling: !(labelAutoHide || labelAutoRotate || labelAutoLimit),\n    visible,\n    hover: true,\n    label: {\n      visible: label?.visible,\n      flush: true,\n      space: AXIS_LABEL_SPACE,\n      style: {\n        maxLineWidth: labelAutoLimitLength,\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n\n      // 防重叠相关\n      minGap: labelAutoHideGap,\n      autoHide: labelAutoHide,\n      autoHideMethod: 'greedy',\n      autoHideSeparation: labelAutoHideGap,\n      autoLimit: labelAutoLimit,\n      autoRotate: labelAutoRotate,\n      autoRotateAngle: labelAutoRotateAngleRange,\n      lastVisible: true,\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText,\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n  } as Partial<ICartesianBandAxisSpec>\n}\n","import { isEmpty, isNullish } from 'remeda'\nimport { autoFormatter } from 'src/pipeline/utils'\nimport type { Formatter, NumFormat } from 'src/types'\n\nexport const createLinearFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return autoFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return autoFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n\nexport const createLinearPercentFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n  percentFormatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return percentFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return percentFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n","import type { YLinearAxis } from 'src/types'\nimport { AXIS_LABEL_SPACE, LINEAR_AXIS_INNER_OFFSET_TOP } from 'src/pipeline/utils'\n\nexport interface LinearAxisStyleConfig extends YLinearAxis {\n  orient: 'left' | 'right' | 'top' | 'bottom'\n  formatMethod?: (value: string) => string\n  titleText?: string\n  id?: string\n  seriesId?: string | string[]\n  sync?: {\n    axisId: string\n    zeroAlign: boolean\n  }\n  isPivot?: boolean\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const linearAxisStyle = (config: LinearAxisStyleConfig): any => {\n  const {\n    orient,\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n    formatMethod,\n    titleText,\n    id,\n    seriesId,\n    sync,\n    isPivot = false,\n  } = config\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const axisConfig: any = {\n    ...(isPivot\n      ? {\n          range: {\n            min,\n            max,\n          },\n        }\n      : {\n          min,\n          max,\n        }),\n    visible,\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient,\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod,\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: titleText,\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n  }\n\n  // Add innerOffset based on orientation\n  if (orient === 'bottom' || orient === 'top') {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.innerOffset = {\n      right: LINEAR_AXIS_INNER_OFFSET_TOP,\n    }\n  } else {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.innerOffset = {\n      top: LINEAR_AXIS_INNER_OFFSET_TOP,\n    }\n  }\n\n  // Add optional fields\n  if (id) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.id = id\n  }\n  if (seriesId) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.seriesId = seriesId\n  }\n  if (sync) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    axisConfig.sync = sync\n  }\n\n  return axisConfig\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    type: 'linear',\n    orient: 'radius',\n    visible: false,\n    zero: true,\n    nice: false,\n  })\n\n  return result\n}\n","import type { Dimensions, Measure } from 'src/types'\n\nexport const defaultTitleText = (measures: Measure[], dimensions: Dimensions, idList: string[] = []) => {\n  return idList\n    .map((id) => {\n      const alias = [...measures, ...dimensions].find((f) => f.id === id)?.alias || ''\n      return alias\n    })\n    .join(' & ')\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray, isNil } from '@visactor/vutils'\nimport { bandAxisStyle } from './bandAxisStyle'\n\nexport const xBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures = [], dimensions = [], encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.xAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { labelAutoLimitLength = 80 } = config\n\n  const onlyMeasureId = (encoding.x || []).filter((v) => v !== MeasureId).length === 0\n  const bandAxis = bandAxisStyle(config)\n\n  bandAxis.orient = 'bottom'\n  bandAxis.maxHeight = labelAutoLimitLength + 60\n  bandAxis.paddingInner = [0.15, 0.1]\n  bandAxis.paddingOuter = [0.075, 0.1]\n\n  if (isNil(bandAxis.title?.text)) {\n    bandAxis.title!.text = defaultTitleText(measures, dimensions, encoding.x as string[])\n  }\n\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XLinearAxis } from 'src/types'\nimport { createNumFormatter, isAreaPercent, isBarPercent, isColumnPercent, isPivotChart } from 'src/pipeline/utils'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\n\nexport const xLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { encoding, dimensions = [], measures = [] } = advancedVSeed\n  const { chartType } = vseed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.xAxis ?? {}) as XLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const { autoFormat, numFormat = {} } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const formatMethod = (value: string) => {\n    if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n      return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n    }\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = config.title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[])\n\n  const linearAxis = linearAxisStyle({\n    ...config,\n    orient: 'bottom',\n    formatMethod,\n    titleText,\n    isPivot,\n  })\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray, isNil } from '@visactor/vutils'\nimport { bandAxisStyle } from './bandAxisStyle'\n\nexport const yBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures = [], dimensions = [], encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.yAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const { labelAutoLimitLength = 80 } = config\n\n  const onlyMeasureId = (encoding.y || []).filter((v: string) => v !== MeasureId).length === 0\n\n  const bandAxis = bandAxisStyle(config)\n\n  bandAxis.type = 'band'\n  bandAxis.orient = 'left'\n  bandAxis.maxWidth = labelAutoLimitLength + 60\n  if (bandAxis.label) {\n    bandAxis.label.containerAlign = 'right'\n  }\n  bandAxis.paddingInner = [0.15, 0.1]\n  bandAxis.paddingOuter = [0.075, 0.1]\n\n  if (isNil(bandAxis.title?.text)) {\n    bandAxis.title!.text = defaultTitleText(measures, dimensions, encoding.y as string[])\n  }\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { createNumFormatter, isAreaPercent, isBarPercent, isColumnPercent, isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { linearAxisStyle } from './linearAxisStyle'\n\nexport const yLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures = [], dimensions = [], encoding } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.yAxis ?? {}) as YLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const { autoFormat, numFormat = {} } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const formatMethod = (value: string) => {\n    if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n      return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n    }\n    return createLinearFormat(value, autoFormat, numFormat, formatter)\n  }\n\n  const titleText = config.title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[])\n\n  const linearAxis = linearAxisStyle({\n    ...config,\n    orient: 'left',\n    formatMethod,\n    titleText,\n    isPivot,\n  })\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { BackgroundColor, VChartSpecPipe } from 'src/types'\n\nexport const backgroundColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { backgroundColor: BackgroundColor }\n\n  const { backgroundColor } = baseConfig\n\n  return {\n    ...result,\n    background: backgroundColor,\n  }\n}\n","import { isNullish } from 'remeda'\nimport type { BarGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const barGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barGapInGroup = advancedVSeed.config?.[chartType as 'columnParallel']?.barGapInGroup as BarGapInGroup\n\n  if (!isNullish(barGapInGroup)) {\n    return {\n      ...spec,\n      barGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import { isNullish } from 'remeda'\nimport type { BarMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const barMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barMaxWidth = advancedVSeed.config?.[chartType as 'column']?.barMaxWidth as BarMaxWidth\n\n  if (!isNullish(barMaxWidth)) {\n    return {\n      ...spec,\n      barMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const color: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const colorItems = unfoldInfo.colorItems\n  const colorIdMap = unfoldInfo.colorIdMap\n\n  const { color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  result.color = {\n    type: 'ordinal',\n    domain: colorItems,\n    range: colorScheme,\n    specified: createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems),\n  } as ILineChartSpec['color']\n  return result\n}\n\nexport const createSpecifiedForColorMapping = (\n  colorMapping?: Record<string, string>,\n  colorIdMap?: Record<string, { id: string; alias: string }>,\n  colorItems?: string[],\n) => {\n  if (!colorMapping || !colorIdMap || !colorItems) {\n    return undefined\n  }\n\n  const matchedList: string[] = []\n\n  // 名称越长优先级越高: 按名称长度降, 优先匹配名称长的, 避免一个短的名称匹配到了超多个长的\n  const colors = Object.entries(colorMapping).sort((a, b) => b[0].length - a[0].length)\n  // 准确匹配\n  const accurateMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n\n      const accurateMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey === name || colorObj.alias === name || colorObj.id === name\n      })\n      accurateMatchedList.forEach((item) => {\n        prev[item[0]] = colorValue\n        matchedList.push(name)\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 模糊匹配\n  const fuzzyMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n      if (matchedList.includes(name)) {\n        return prev\n      }\n\n      const fuzzyMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey.includes(name) || colorObj.alias.includes(name) || colorObj.id.includes(name)\n      })\n      fuzzyMatchedList.forEach((item) => {\n        // 已经匹配有值, 则不重复匹配\n        if (prev[item[0]]) {\n          return\n        }\n        prev[item[0]] = colorValue\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 合并, 准确匹配的优先级高\n  return {\n    ...fuzzyMap,\n    ...accurateMap,\n  }\n}\n","import type { AdvancedVSeed, PivotChartSpecPipe, VChartSpecPipe, VSeed, Pipe, SpecPipelineContext } from 'src/types'\n\nexport function colorAdapter(ordinalPipe: PivotChartSpecPipe, linearPipe: PivotChartSpecPipe): PivotChartSpecPipe\nexport function colorAdapter(ordinalPipe: VChartSpecPipe, linearPipe: VChartSpecPipe): VChartSpecPipe\nexport function colorAdapter<TSpec>(\n  ordinalPipe: Pipe<TSpec, SpecPipelineContext>,\n  linearPipe: Pipe<TSpec, SpecPipelineContext>,\n) {\n  return (spec: Partial<TSpec>, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    if (isLinearColor(advancedVSeed, vseed)) {\n      return linearPipe(spec, context)\n    }\n    return ordinalPipe(spec, context)\n  }\n}\n\nexport const isLinearColor = <T extends AdvancedVSeed, U extends VSeed>(advancedVSeed: T, vseed: U) => {\n  const { encoding } = advancedVSeed\n  const measureIdList = (vseed.measures || advancedVSeed.measures)!.map((measure) => measure.id)\n  const { color } = encoding\n  return color?.length === 1 && measureIdList.includes(color[0])\n}\n\nexport const getColorMeasureId = <T extends AdvancedVSeed, U extends VSeed>(\n  advancedVSeed: T,\n  vseed: U,\n): string | undefined => {\n  if (isLinearColor(advancedVSeed, vseed)) {\n    const { encoding } = advancedVSeed\n    const { color } = encoding\n    return color?.[0]\n  }\n  return undefined\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorAreaStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IAreaChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.area?.style) {\n        result.area.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBarStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBarChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.bar?.style) {\n        result.bar.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorLineStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.line?.style) {\n        result.line.style.stroke = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPieStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IPieChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.pie?.style) {\n        result.pie.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPointStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.point?.style) {\n        result.point.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isLinearColor } from './colorAdapter'\nimport type { VChartSpecPipe } from 'src/types/pipeline/spec/spec'\n\nexport const colorRoseStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IRoseChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.rose?.style) {\n        result.rose.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: [\n      {\n        dataId: id,\n        fields: [unfoldInfo.encodingColor],\n      },\n    ],\n  }\n\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const datasetPivot: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const records = dataset.reduce((pre, cur, index) => {\n    const id = datasetReshapeInfo[index].id\n    pre[id] = cur\n    return pre\n  }, {})\n  return {\n    ...result,\n    records: records,\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetXY: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n  const angle = unfoldInfo.encodingAngle\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetYX: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n\n  const angle = unfoldInfo.encodingAngle\n  const y = unfoldInfo.encodingY\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (y) {\n    const order = orderMapping[y]\n    if (order) {\n      fields[y] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[y] = {\n        sortIndex: 0,\n      }\n    }\n  }\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ILineSeriesSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const progressive: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as ILineSeriesSpec\n  // const { advancedVSeed } = context\n  // const { dataset = [] } = advancedVSeed\n  // const size = dataset.length\n\n  // if (size < 5000) {\n  //   return result\n  // }\n\n  result.large = false\n  result.largeThreshold = Infinity\n  result.progressiveStep = 400\n  result.progressiveThreshold = Infinity\n\n  return result\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initArea: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IAreaChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'area'\n  result.direction = 'vertical'\n  result.yField = foldInfo.measureValue\n\n  result.xField = unfoldInfo.encodingX\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n  result.yField = unfoldInfo.encodingY\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumn: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { PivotChartSpecPipe } from 'src/types'\n\nexport const initPivot: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    animation: true,\n    rows: [],\n    columns: [],\n    indicators: [],\n    records: [],\n    widthMode: 'standard',\n    autoFillWidth: true,\n    defaultHeaderColWidth: 'auto',\n    defaultColWidth: 240,\n\n    heightMode: 'standard',\n    autoFillHeight: true,\n    defaultRowHeight: 180,\n    defaultHeaderRowHeight: 'auto',\n\n    indicatorsAsCol: false,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    corner: {\n      titleOnDimension: 'row',\n    },\n    animationAppear: {\n      duration: 600,\n      type: 'all',\n      direction: 'row',\n    },\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { createFormatter, createFormatterByMeasure, DATUM_HIDE_KEY, findMeasureById } from '../../../../utils'\nimport type {\n  Datum,\n  Dimension,\n  Dimensions,\n  Encoding,\n  FoldInfo,\n  Formatter,\n  Label,\n  Measure,\n  Measures,\n  NumFormat,\n  VChartSpecPipe,\n} from 'src/types'\nimport { isNumber, merge, uniqueBy } from 'remeda'\nimport { selector } from 'src/dataSelector'\nimport { MeasureId } from 'src/dataReshape/constant'\n\nexport const label: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions!,\n    advancedVSeed.measures!,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as ILineChartSpec['label']\n\n  return result\n}\n\nexport const generateMeasureValue = (\n  value: number | string,\n  measure: Measure,\n  labelAutoFormat?: boolean,\n  numFormat: NumFormat = {},\n) => {\n  const format = merge(numFormat, measure.numFormat || measure.format)\n  const mergedMeasure = { ...measure, numFormat: format, autoFormat: labelAutoFormat || measure.autoFormat }\n\n  const formatter = createFormatterByMeasure(mergedMeasure)\n  return formatter(value)\n}\n\nexport const generateMeasurePercent = (value: number | string, sum: number, formatter: Formatter) => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const percentValue = num / sum\n  return formatter(percentValue)\n}\n\nexport const buildLabel = (\n  label: Label,\n  vseedMeasures: Measures = [],\n  vseedDimensions: Dimensions = [],\n  advancedVSeedDimensions: Dimensions,\n  advancedVSeedMeasures: Measures,\n  encoding: Encoding,\n  foldInfoList: (Pick<FoldInfo, 'measureId' | 'measureValue'> & Partial<Pick<FoldInfo, 'statistics'>>)[],\n) => {\n  const {\n    enable,\n    wrap,\n    showValue,\n    showValuePercent,\n    showDimension,\n    labelOverlap,\n    labelColorSmartInvert,\n    labelStroke,\n    labelColor,\n    labelFontSize,\n    labelFontWeight,\n    labelBackgroundColor,\n    labelPosition,\n    autoFormat,\n    numFormat = {},\n  } = label\n\n  const hasDimLabelEncoding = vseedDimensions.some((item) => encoding.label?.includes(item.id))\n\n  const labelDims = uniqueBy(\n    hasDimLabelEncoding\n      ? vseedDimensions.filter((item) => encoding.label?.includes(item.id))\n      : showDimension\n        ? advancedVSeedDimensions.filter((d) => d.id !== MeasureId && d.encoding !== 'row' && d.encoding !== 'column')\n        : [],\n    (item: Dimension) => item.id,\n  )\n\n  const labelMeas = uniqueBy(\n    vseedMeasures.filter((item) => encoding.label?.includes(item.id)),\n    (item: Measure) => item.id,\n  )\n\n  const percentFormat: NumFormat = merge(numFormat, {\n    type: 'percent',\n  } as NumFormat)\n\n  const percentFormatter = createFormatter(percentFormat)\n\n  const result = {\n    visible: enable,\n    dataFilter: (data: Datum[]) => {\n      return data.filter((entry) => {\n        return entry.data?.[DATUM_HIDE_KEY] !== true && selector(entry.data as Datum, label.selector, 'Or')\n      })\n    },\n    formatMethod: (_: unknown, datum: Datum) => {\n      const result = []\n\n      const dimLabels = labelDims.map((item: Dimension) => {\n        const id = item.id\n        return datum[id] as number | string\n      })\n\n      const meaLabels = labelMeas.map((item: Measure) =>\n        generateMeasureValue(datum[item.id] as number | string, item, autoFormat, numFormat),\n      )\n\n      result.push(...dimLabels)\n\n      foldInfoList.forEach((foldInfo) => {\n        const { measureId, measureValue, statistics } = foldInfo\n        const measure = findMeasureById(advancedVSeedMeasures, datum[measureId] as string)\n        if (measure) {\n          const measureValueLabel = generateMeasureValue(\n            datum[measureValue] as number | string,\n            measure,\n            autoFormat,\n            numFormat,\n          )\n\n          if (showValue) {\n            result.push(measureValueLabel)\n          }\n          if (showValuePercent) {\n            if (isNumber(datum['__VCHART_ARC_RATIO'])) {\n              // 饼图/环图需要使用实际占比数据\n              result.push(generateMeasurePercent(datum['__VCHART_ARC_RATIO'], 1, percentFormatter))\n            } else if (statistics && isNumber(statistics.sum)) {\n              result.push(\n                generateMeasurePercent(datum[measureValue] as number | string, statistics.sum, percentFormatter),\n              )\n            }\n          }\n        }\n      })\n\n      result.push(...meaLabels)\n\n      if (wrap) {\n        return result\n      }\n      return result.join(' ')\n    },\n    position: labelPosition,\n    style: {\n      stroke: labelStroke,\n      fill: labelColor,\n      fontSize: labelFontSize,\n      fontWeight: labelFontWeight,\n      background: labelBackgroundColor,\n    },\n    smartInvert: labelColorSmartInvert,\n  }\n\n  if (labelOverlap) {\n    ;(result as any).overlap = {\n      hideOnHit: true,\n      clampForce: true,\n    }\n  }\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, PieLabel, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: PieLabel }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions!,\n    advancedVSeed.measures!,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as IPieChartSpec['label']\n  if (label.labelLayout) {\n    ;(result.label as any)!.layout = {\n      align: label.labelLayout,\n    }\n  }\n  return result\n}\n","import { createFormatterByMeasure, findTreeNodesBy } from 'src/pipeline/utils'\nimport type { ColorLegend, Measure, VChartSpecPipe } from 'src/types'\n\nexport const colorLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType, measures = [] } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: ColorLegend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight,\n    railBackgroundColor,\n    handlerBorderColor,\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  result.legends = {\n    type: 'color',\n    visible: enable,\n    orient,\n    position: legendPosition,\n    padding: 0,\n    field: unfoldInfo.encodingColor,\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n    rail: {\n      style: {\n        fill: railBackgroundColor,\n      },\n    },\n    handler: {\n      style: {\n        outerBorder: {\n          stroke: handlerBorderColor,\n        },\n      },\n    },\n  }\n  const colorMeasure = findTreeNodesBy<Measure>(measures, (m) => m.encoding === 'color')?.[0]\n  if (colorMeasure) {\n    const formatter = createFormatterByMeasure(colorMeasure)\n    result.legends.handlerText!.formatter = formatter\n\n    // TODO: 先注释掉图例标题，后续看需求是否需要恢复\n    // result.legends.startText = {\n    //   visible: true,\n    //   text: colorMeasure.alias || colorMeasure.id,\n    //   space: 12,\n    //   textStyle: {\n    //     fill: labelColor || labelFontColor,\n    //     fontSize: labelFontSize,\n    //     fontWeight: labelFontWeight,\n    //   },\n    // }\n  }\n  return result\n}\n","import type { Legend, VChartSpecPipe } from 'src/types'\n\nexport const discreteLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    pagerIconColor,\n    pagerIconDisableColor,\n    labelFontWeight,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n  const labelTextColor = labelColor || labelFontColor\n\n  result.legends = {\n    type: 'discrete',\n    visible: enable,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    autoPage: true,\n    orient,\n    position: legendPosition,\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelTextColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: (item) => {\n          return {\n            symbolType: shapeType,\n            size: border ? 8 : 10,\n            fillOpacity: 1,\n            opacity: 1,\n            stroke: false,\n            outerBorder: border\n              ? {\n                  stroke: item.shape.fill,\n                  distance: 3,\n                  lineWidth: 1,\n                }\n              : null,\n          }\n        },\n        state: {\n          unSelected: {\n            opacity: 0.2,\n            fillOpacity: 1, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      label: {\n        formatMethod: (value) => {\n          return unfoldInfo.colorIdMap[String(value)]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n        state: {\n          unSelected: {\n            fill: labelColor || labelFontColor, // 覆盖vchart里面的默认值\n            fillOpacity: 0.8, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n          unSelectedHover: {\n            fill: null,\n          },\n        },\n      },\n    },\n    pager: {\n      textStyle: {\n        fill: labelTextColor,\n      },\n      handler: {\n        style: {\n          fill: pagerIconColor,\n        },\n        state: {\n          disable: {\n            fill: pagerIconDisableColor,\n          },\n        },\n      },\n    },\n    padding: 0,\n  }\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColorLegend: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const max = Math.max(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMin))\n  const min = Math.min(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMax))\n  const { legend, color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    visible: enable,\n    type: 'color',\n    orient,\n    position: legendPosition,\n\n    colors: linearColorScheme || colorScheme || [],\n    value: [min, max],\n    min: min,\n    max: max,\n\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n  } as unknown\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { unique } from 'remeda'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\nimport { createSpecifiedForColorMapping } from '../color/color'\n\nexport const pivotDiscreteLegend: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const colorItems = unique(\n    datasetReshapeInfo.flatMap((d) => {\n      return d.unfoldInfo.colorItems\n    }),\n  )\n\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  const { legend, color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  const colorSpecified = createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems)\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    padding: 0,\n    visible: enable,\n    type: 'discrete',\n    orient,\n    position: legendPosition,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    data: colorItems.map((d: string, index: number) => {\n      const color = colorSpecified?.[d] ?? colorScheme?.[index % colorScheme.length]\n      return {\n        label: d,\n        shape: {\n          outerBorder: border\n            ? {\n                stroke: color,\n                distance: 3,\n                lineWidth: 1,\n              }\n            : undefined,\n          fill: color,\n        },\n      }\n    }),\n\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelColor || labelFontColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: {\n          symbolType: shapeType,\n          size: border ? 8 : 10,\n        },\n      },\n      label: {\n        formatMethod: (value: string) => {\n          return colorIdMap[value]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n        },\n      },\n    },\n  }\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { AreaStyle, Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { groupBy, isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const areaStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, datasetReshapeInfo, dataset } = advancedVSeed\n  const { areaStyle, lineStyle } = markStyle\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const result = {\n    ...spec,\n    area: {\n      visible: true,\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(areaStyle) || isEmpty(areaStyle)) {\n    return result\n  }\n\n  const areaStyles = (Array.isArray(areaStyle) ? areaStyle : [areaStyle]) as AreaStyle[]\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const group = unfoldInfo.encodingColorId\n\n  const areaGroups = groupBy(dataset, (d) => d[group ?? ''] as string)\n\n  const customMap = areaStyles.reduce<object>((result, style, index) => {\n    const { areaColor, areaColorOpacity, areaVisible = true } = style\n\n    const curveType = getCurveType(context.vseed, lineStyles[index]?.lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineStyles[index]?.lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          const lineData = areaGroups[datum[group ?? ''] as string]\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          curveType,\n          curveTension,\n          visible: areaVisible,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    area: {\n      ...result.area,\n      visible: true,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BarStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const barStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, dataset = [] } = advancedVSeed\n  const { barStyle } = markStyle\n\n  const showStroke = dataset.length <= 100\n\n  const result = {\n    ...spec,\n    bar: {\n      style: {\n        visible: true,\n        fillOpacity: 1,\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  } as IBarChartSpec\n\n  if (isNullish(barStyle) || isEmpty(barStyle)) {\n    return result\n  }\n\n  const barStyles = (Array.isArray(barStyle) ? barStyle : [barStyle]) as BarStyle[]\n\n  const customMap = barStyles.reduce<object>((result, style, index) => {\n    const {\n      barBorderColor,\n      barBorderStyle,\n      barBorderWidth = 1,\n      barColor,\n      barColorOpacity,\n      barBorderOpacity,\n      barRadius,\n      barVisible = true,\n    } = style\n\n    const lineDash = barBorderStyle === 'dashed' ? [5, 2] : barBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: barVisible,\n          fill: barColor,\n          fillOpacity: barColorOpacity,\n          cornerRadius: barRadius,\n          lineWidth: barBorderWidth,\n          stroke: barBorderColor,\n          strokeOpacity: barBorderOpacity,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  result.bar!.state = {\n    ...result.bar!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import { isRadar } from 'src/pipeline/utils'\nimport type { VSeed } from 'src/types'\n\nexport const getCurveType = (vseed: VSeed, lineSmooth: boolean = false): string => {\n  if (!lineSmooth) {\n    return 'linear'\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 'catmullRomClosed' : 'monotone'\n}\n\nexport const getCurveTension = (vseed: VSeed, lineSmooth: boolean = false): number => {\n  if (!lineSmooth) {\n    return 0\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 0.4 : 0\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const lineStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { lineStyle } = markStyle\n  const result = {\n    ...spec,\n    line: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(lineStyle) || isEmpty(lineStyle)) {\n    return result\n  }\n\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const customMap = lineStyles.reduce<object>((result, style, index) => {\n    const { lineColor, lineColorOpacity, lineSmooth, lineStyle, lineWidth = 2, lineVisible = true } = style\n\n    const dashSegment = lineWidth * 2\n    const dashGap = lineWidth\n\n    const lineDash =\n      lineStyle === 'dashed' ? [dashSegment, dashSegment] : lineStyle === 'dotted' ? [dashGap / 2, dashGap * 2] : [0, 0]\n\n    const curveType = getCurveType(context.vseed, lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (\n          _: Datum,\n          node: {\n            renderNode: {\n              context: {\n                data: Datum[]\n              }\n            }\n          },\n        ) => {\n          const lineData = node.renderNode.context.data\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          visible: lineVisible,\n          curveType: curveType,\n          curveTension: curveTension,\n          strokeOpacity: lineColorOpacity,\n          stroke: lineColor,\n          lineWidth: lineWidth,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    line: {\n      ...result.line,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pieStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n  const config = advancedVSeed.config?.[chartType as 'pie']\n\n  const result = {\n    ...spec,\n    pie: {\n      style: {\n        stroke: config?.backgroundColor ?? '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n    },\n  } as Required<IPieChartSpec>\n\n  if ((spec as IPieChartSpec).outerRadius) {\n    result.pie.state = {\n      hover: {\n        outerRadius: ((spec as IPieChartSpec).outerRadius as number) * 1.1,\n      },\n    }\n  }\n\n  if (config?.cornerRadius) {\n    result.pie.style!.cornerRadius = config.cornerRadius\n  }\n\n  return result\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\n\nexport const pointStateDimensionHover: VChartSpecPipe = (spec) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        dimension_hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          outerBorder: {\n            lineWidth: 4,\n            strokeOpacity: 0.25,\n            distance: 2,\n          },\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n\nexport const pointStateHover: VChartSpecPipe = (spec, context) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          stroke: (datum: Datum, context: unknown) => {\n            const field = unfoldInfo.encodingColorId\n            const color = (context as any).seriesColor(datum[field] as string)\n            return color\n          },\n          fillOpacity: 0.6,\n          lineWidth: 1,\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, PointStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const pointStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { pointStyle } = markStyle\n  const result = {\n    ...spec,\n    point: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(pointStyle) || isEmpty(pointStyle)) {\n    return result\n  }\n\n  const pointStyles = (Array.isArray(pointStyle) ? pointStyle : [pointStyle]) as PointStyle[]\n\n  const customMap = pointStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          innerBorder: {\n            stroke: pointBorderColor,\n            lineWidth: pointBorderWidth,\n            distance: (pointBorderWidth || 0) / 2,\n            lineDash: lineDash,\n          },\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    point: {\n      ...result.point,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const roseStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n\n  const result = {\n    ...spec,\n    rose: {\n      style: {},\n    },\n  } as Required<IRoseChartSpec>\n\n  return {\n    ...result,\n    rose: {\n      style: {\n        stroke: '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          lineWidth: 1,\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const percent: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.percent = true\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { DimensionLinkage, PivotChartSpecPipe } from 'src/types'\n\nexport const dimensionLinkage: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = (advancedVSeed.config?.[chartType as 'line']?.dimensionLinkage ?? {}) as DimensionLinkage\n\n  if (config.enable === false) {\n    return spec\n  }\n\n  const indicators = spec.indicators\n  const labelHoverOnAxis = {}\n  const chartSpec = (indicators as any)?.[0]?.chartSpec as ILineChartSpec\n  const crosshair = chartSpec?.crosshair as ICartesianCrosshairSpec\n\n  if (crosshair?.xField) {\n    const labelFormat = crosshair.xField.label?.formatMethod\n    ;(labelHoverOnAxis as any).bottom = {\n      visible: config.showLabel ?? crosshair.xField.label?.visible ?? true,\n      background: crosshair.xField.label?.labelBackground,\n      textStyle: crosshair.xField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n  if (crosshair?.yField) {\n    const labelFormat = crosshair.yField.label?.formatMethod\n    ;(labelHoverOnAxis as any).left = {\n      visible: config.showLabel ?? crosshair.yField.label?.visible ?? true,\n      background: crosshair.yField.label?.labelBackground,\n      textStyle: crosshair.yField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n\n  if (indicators && indicators.length) {\n    indicators.forEach((ind) => {\n      const crosshair = (ind as any)?.chartSpec?.crosshair as ICartesianCrosshairSpec\n\n      if (crosshair?.xField) {\n        crosshair.xField.label = { visible: false }\n      }\n\n      if (crosshair?.yField) {\n        crosshair.yField.label = { visible: false }\n      }\n    })\n  }\n\n  spec.chartDimensionLinkage = {\n    showTooltip: config.showTooltip ?? (chartSpec?.tooltip?.dimension?.visible as boolean) ?? true,\n    heightLimitToShowTooltipForEdgeRow: (spec.defaultRowHeight as number) / 2,\n    widthLimitToShowTooltipForEdgeColumn: (spec.defaultColWidth as number) / 2,\n    labelHoverOnAxis,\n  }\n\n  return spec\n}\n","import type {\n  PivotChartSpecPipe,\n  PivotChartSpecPipeline,\n  SpecPipe,\n  SpecPipelineContext,\n  VChartSpecPipe,\n  VChartSpecPipeline,\n} from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\nimport type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline, isPivotChart } from '../../../../utils'\n\nexport const pivotAdapter = (pipeline: VChartSpecPipeline, pivotPipeline: PivotChartSpecPipeline): SpecPipe => {\n  const adapted = ((spec: unknown, context: SpecPipelineContext) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n    if (usePivotChart) {\n      return execPipeline<PivotChartConstructorOptions, SpecPipelineContext>(\n        pivotPipeline,\n        context,\n        spec as Partial<PivotChartConstructorOptions>,\n      )\n    }\n    return execPipeline<ISpec, SpecPipelineContext>(pipeline, context, spec as Partial<ISpec>)\n  }) as VChartSpecPipe & PivotChartSpecPipe\n\n  return adapted as unknown as SpecPipe\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { MeasureId } from 'src/dataReshape'\nimport { BAND_AXIS_INNER_OFFSET_IN_PIVOT } from 'src/pipeline/utils/constant'\nimport type { Config, VChartSpecPipe } from 'src/types'\n\nexport const pivotAxisStyle = (axisStyle: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = axisStyle(spec, context) as ILineChartSpec\n\n    if (result.axes) {\n      const { advancedVSeed } = context\n      const { config, chartType, encoding, reshapeMeasures } = advancedVSeed\n      const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n      result.axes.forEach((axis: any) => {\n        axis.domainLine = {\n          visible: false,\n        }\n\n        if (themConfig.chartGridColor && axis.grid && axis.grid.visible && axis.grid.style) {\n          axis.grid.style.stroke = themConfig.chartGridColor\n        }\n\n        if (themConfig.axisLabelColor && axis.label && axis.label.visible && axis.label.style) {\n          axis.label.style.fill = themConfig.axisLabelColor\n        }\n\n        if (axis.type === 'band') {\n          if (axis.orient === 'left' || axis.orient === 'right') {\n            axis.innerOffset = {\n              top: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              bottom: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          } else if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.innerOffset = {\n              left: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              right: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          }\n        } else if (axis.type === 'linear') {\n          if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.label.flush = true\n          }\n\n          if (\n            reshapeMeasures &&\n            reshapeMeasures.length > 1 &&\n            axis.title.text &&\n            encoding.color &&\n            encoding.color.length &&\n            !encoding.color.includes(MeasureId)\n          ) {\n            axis.title.visible = true\n          }\n        }\n      })\n    }\n\n    return result\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColumnDimensions: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n\n  if (!dimensions) {\n    return result\n  }\n  const columnDimensions = dimensions.filter((dim) => dim.encoding === 'column')\n  const columns = columnDimensions.map((dim) => ({\n    dimensionKey: dim.id,\n    title: dim.alias || dim.id,\n  })) as unknown\n\n  return {\n    ...result,\n    columns: columns,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { isCombination, isPivot } from 'src/pipeline/utils'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\nimport { isNullish } from 'remeda'\n\nexport const pivotGridStyle: PivotChartSpecPipe = (spec, context) => {\n  const { vseed, advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  const onlyCombination = !isPivot(vseed) && isCombination(vseed)\n\n  const result = { ...spec } as PivotChartConstructorOptions\n  const transparent = 'rgba(0,0,0,0)'\n\n  const borderColor = themConfig.borderColor ?? '#e3e5eb'\n  const bodyFontColor = themConfig.bodyFontColor ?? '#141414'\n  const headerFontColor = themConfig.headerFontColor ?? '#21252c'\n  const headerBackgroundColor = themConfig.headerBackgroundColor ?? 'rgba(0,0,0,0)'\n  const hoverHeaderBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderBackgroundColor ?? '#D9DDE4')\n  const hoverHeaderInlineBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderInlineBackgroundColor ?? '#D9DDE455')\n  const outlineBorderLineWidth = themConfig.outlineBorderLineWidth ?? 0\n  const frameCornerRadius = themConfig.frameCornerRadius ?? 0\n\n  if (!isNullish(themConfig.minChartWidth)) {\n    result.defaultColWidth = themConfig.minChartWidth\n  }\n\n  if (!isNullish(themConfig.minChartHeight)) {\n    result.defaultRowHeight = themConfig.minChartHeight\n  }\n\n  return {\n    ...result,\n    theme: {\n      underlayBackgroundColor: transparent,\n      bodyStyle: {\n        borderColor,\n        color: bodyFontColor,\n        borderLineWidth: (arg: { row: number; col: number; table: any }) => {\n          const noYAxis =\n            chartType === 'pie' ||\n            chartType === 'rose' ||\n            chartType === 'donut' ||\n            chartType === 'funnel' ||\n            chartType === 'radar' ||\n            chartType === 'roseParallel'\n\n          return [\n            arg.row === 0 ? outlineBorderLineWidth : 1,\n            outlineBorderLineWidth,\n            0,\n            arg.col === 0 || (noYAxis && arg.col === 1 && arg.table.colCount <= 2) ? outlineBorderLineWidth : 1,\n          ]\n        },\n        bgColor: transparent,\n        hover: {\n          cellBgColor: 'transparent',\n        },\n      },\n      headerStyle: {\n        borderColor,\n        fontSize: 12,\n        // borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        borderLineWidth: (arg: { row: number; col: number }) => {\n          return [outlineBorderLineWidth, outlineBorderLineWidth, 1, arg.col === 0 ? outlineBorderLineWidth : 1]\n        },\n        color: headerFontColor,\n        textAlign: 'center',\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      rowHeaderStyle: {\n        borderColor,\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, 1, 0, outlineBorderLineWidth]\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerHeaderStyle: {\n        borderColor,\n        textAlign: 'center',\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        fontWeight: 'bold',\n        borderLineWidth: [outlineBorderLineWidth, 1, 1, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerLeftBottomCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightTopCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: 0,\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      rightFrozenStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, outlineBorderLineWidth, 0, 1]\n        },\n        frameStyle: {\n          borderLineWidth: 0,\n        },\n        hover: {\n          borderLineWidth: 0,\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightBottomCellStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n\n      bottomFrozenStyle: {\n        borderColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      selectionStyle: {\n        cellBgColor: '',\n        cellBorderColor: '',\n      },\n      frameStyle: {\n        borderColor,\n        cornerRadius: frameCornerRadius,\n        borderLineWidth: outlineBorderLineWidth,\n      },\n\n      axisStyle: {\n        leftAxisStyle: {\n          cellPaddingLeft: 10,\n        },\n        bottomAxisStyle: {\n          cellPaddingBottom: 4,\n        },\n        rightAxisStyle: {\n          cellPaddingRight: 4,\n        },\n      },\n      scrollStyle: {\n        visible: 'scrolling',\n        hoverOn: false,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const pivotHideIndicatorName: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  return {\n    ...spec,\n    hideIndicatorName: datasetReshapeInfo.length <= 1,\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline, isRectungularCoordinate } from '../../../../utils'\nimport type { Dataset, Encoding, Measures, PivotChartSpecPipe, SpecPipelineContext, VChartSpecPipe } from 'src/types'\nimport { unique } from 'remeda'\n\nexport const pivotIndicators =\n  (chartPipeline: VChartSpecPipe[]): PivotChartSpecPipe =>\n  (spec, context): Partial<PivotChartConstructorOptions> => {\n    const result = { ...spec } as PivotChartConstructorOptions\n    const { advancedVSeed } = context\n    const { datasetReshapeInfo, dataset, encoding, reshapeMeasures = [] } = advancedVSeed\n\n    const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n    const allMeasureIds = unique(datasetReshapeInfo.flatMap((d) => Object.keys(d.foldInfo.foldMap || {})))\n\n    const indicators = datasetReshapeInfo.map((reshapeInfo, index) => {\n      const subMeasures = (reshapeMeasures[index] || []) as Measures\n      const subMeasuresId = (reshapeMeasures[index] || []).map((d) => d.id)\n      const invalideMeasuresIds = allMeasureIds.filter((id: string) => !subMeasuresId.includes(id))\n\n      const newDataset = dataset[index] as Dataset\n      const newDatasetReshapeInfo = [\n        {\n          ...reshapeInfo,\n          unfoldInfo: { ...reshapeInfo.unfoldInfo, colorItems },\n        },\n      ]\n      const newContext: SpecPipelineContext = {\n        ...context,\n        advancedVSeed: {\n          ...advancedVSeed,\n          pivotAllDatasetReshapeInfo: datasetReshapeInfo,\n          datasetReshapeInfo: newDatasetReshapeInfo,\n          encoding: Object.keys(encoding).reduce((res, key) => {\n            res[key as keyof Encoding] = encoding[key as keyof Encoding]?.filter((e) => {\n              return !invalideMeasuresIds.includes(e)\n            }) as string[]\n\n            return res\n          }, {} as Encoding),\n          dataset: newDataset,\n        },\n      }\n\n      const chartSpec = execPipeline(chartPipeline, newContext, {})\n      return {\n        indicatorKey: `${reshapeInfo.id}`,\n        title: isRectungularCoordinate(advancedVSeed.chartType)\n          ? ''\n          : subMeasures.map((m) => m.alias ?? m.id).join('-'),\n        cellType: 'chart',\n        chartModule: 'vchart',\n        chartSpec: chartSpec,\n        style: {\n          padding: [1, 1, 0, 1],\n        },\n      }\n    })\n\n    return {\n      ...result,\n      indicators: indicators,\n    } as Partial<PivotChartConstructorOptions>\n  }\n\nexport const pivotIndicatorsAsRow: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: false,\n  }\n}\n\nexport const pivotIndicatorsAsCol: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: true,\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotRowDimensions: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  if (!dimensions) {\n    return result\n  }\n  const rowDimensions = dimensions.filter((dim) => dim.encoding === 'row')\n  const rows = rowDimensions.map((dim) => ({\n    dimensionKey: dim.id,\n    title: dim.alias || dim.id,\n  }))\n  return {\n    ...result,\n    rows: rows,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotTitle: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  if (result.columns && result.columns.length > 0) {\n    result.title = {\n      text: (spec as unknown as { columns: { title: string }[] }).columns.map((entry) => entry.title).join('/'),\n      align: 'center',\n      orient: 'top',\n      padding: [2, 0, 0, 0],\n      textStyle: {\n        fontSize: themConfig.titleFontSize ?? 12,\n        fill: themConfig.titleFontColor ?? '#000',\n        fontWeight: themConfig.titleFontWeight ?? 'bold',\n      },\n    }\n  }\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const addRegionPadding: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IPieChartSpec\n\n  if (result.region && result.region.length > 0) {\n    result.region[0].padding = 10\n  }\n\n  return result\n}\n","import type { Datum } from '@visactor/vchart'\n\nexport const defaultRegressionLineColor = (datum: Datum, ctx: any, opt: any): string | undefined => {\n  const parentNode = opt.mark?._product?.parent\n  if (parentNode?.attribute?.data) {\n    return parentNode.attribute.data.color\n  }\n  return undefined\n}\n\nexport const defaultRegressionLineLabelX = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.x\n  }\n\n  return undefined\n}\n\nexport const defaultRegressionLineLabelY = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.y\n  }\n\n  return undefined\n}\n\nexport const getAlphaByConfidenceLevel = (confidenceLevel: number = 0.95) => {\n  return 1 - Math.max(Math.min(1, confidenceLevel), 0)\n}\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const stackInverse: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.stackInverse = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { FoldMeasureId } from 'src/dataReshape/constant'\nimport type { Datum, VChartSpecPipe, StackCornerRadius } from 'src/types'\n\nexport const stackCornerRadius: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const stackCornerRadius = advancedVSeed.config?.[chartType as 'column']?.stackCornerRadius as StackCornerRadius\n\n  if (chartType === 'dualAxis' && (spec as any).type !== 'bar') {\n    return spec\n  }\n\n  return {\n    ...spec,\n    stackCornerRadius: (_: unknown, datum: Datum) => {\n      if (datum && datum[datum[FoldMeasureId]] > 0) {\n        return stackCornerRadius\n      }\n\n      return 0\n    },\n  } as IBarChartSpec\n}\n","import { pipe, uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findMeasureById } from '../../../../utils'\nimport type {\n  Datum,\n  Dimensions,\n  FoldInfo,\n  Measures,\n  VChartSpecPipe,\n  TooltipConfig,\n  UnfoldInfo,\n  Dimension,\n  Measure,\n} from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { updateTooltipElement } from './tooltipElement'\n\nexport const tooltip: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const {\n    measures = [],\n    datasetReshapeInfo,\n    chartType,\n    dimensions = [],\n    encoding,\n    reshapeMeasures = [],\n  } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType as 'line'] as { tooltip: TooltipConfig }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable = true } = tooltip\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: !!enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, vseed.measures as Measures, foldInfo, unfoldInfo),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfo, unfoldInfo, reshapeMeasures.length > 1),\n    },\n\n    updateElement: updateTooltipElement,\n  }\n  return result\n}\n\nexport const createDimensionContent = (\n  dimensions: Dimensions = [],\n  measures: Measures = [],\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n  hasMultiMeasureGroup: boolean,\n) => {\n  const { measureId, measureValue, foldMap } = foldInfo\n  const { encodingColor } = unfoldInfo\n\n  return [\n    {\n      visible: true,\n      shapeType: 'rectRound',\n      hasShape: true,\n      key: dimensions.some((d) => d.encoding === 'color')\n        ? (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[encodingColor] as string)) || ''\n\n            const colorKey = `${unfoldInfo.colorIdMap[key].alias ?? key}`\n\n            if (hasMultiMeasureGroup) {\n              const mId = (datum && (datum[measureId] as string)) || ''\n\n              return `${colorKey}-${foldMap[mId] ?? mId}`\n            }\n\n            return colorKey\n          }\n        : (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[measureId] as string)) || ''\n            return foldMap[key] ?? key\n          },\n      value: (v: unknown) => {\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    },\n  ]\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions = [],\n  measures: Measures = [],\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n  const meas = pipe(\n    measures.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Measure) => item.id),\n    uniqueBy((item: Measure) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item: Measure) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const defaultContent = {\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const { measureName } = foldInfo\n      const { encodingColor: colorName } = unfoldInfo\n\n      const datum = v as Datum\n      return (datum && (datum[measureName || colorName] as string)) || ''\n    },\n    value: (v: unknown) => {\n      const { measureId, measureValue } = foldInfo\n\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const value = datum[measureValue] as string | number\n      const id = datum[measureId] as string\n      const measure = findMeasureById(measures, id)\n      if (!measure) {\n        return String(value)\n      }\n\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }\n\n  return [...dimContent, defaultContent, ...meaContent]\n}\n","const setWholeIcon = (shapeContainer: any, color: string) => {\n  shapeContainer.style.backgroundColor = color\n  shapeContainer.style.borderColor = color\n  shapeContainer.style.width = '4px'\n  shapeContainer.style.height = '100%'\n  shapeContainer.style.display = 'inline-block'\n  shapeContainer.style.borderRadius = '2px'\n  shapeContainer.style.marginRight = '6px'\n\n  const shapeElements = shapeContainer.children\n\n  for (let i = 0; i < shapeElements.length; i++) {\n    const shapeElement = shapeElements[i]\n    const svgElement = shapeElement.children[0]\n\n    if (svgElement) {\n      svgElement.style.visibility = 'hidden'\n    }\n\n    shapeElement.style.background = 'transparent'\n    shapeElement.style.borderColor = 'transparent'\n  }\n}\n\nexport const updateTooltipElement = (tooltipElement: any, actualTooltip: any) => {\n  if (!tooltipElement || !tooltipElement.querySelector || !actualTooltip) {\n    return\n  }\n\n  const shapeContainer = tooltipElement.querySelector('.vchart-tooltip-shape-column')\n\n  if (!shapeContainer) {\n    return\n  }\n\n  if (actualTooltip.activeType === 'mark') {\n    const color = (actualTooltip.content[0].shapeFill as string) ?? 'transparent'\n\n    setWholeIcon(shapeContainer, color)\n  } else if (actualTooltip.activeType === 'dimension') {\n    shapeContainer.style.background = 'transparent'\n    shapeContainer.style.borderColor = 'transparent'\n    shapeContainer.style.width = 'auto'\n    shapeContainer.style.height = 'auto'\n    shapeContainer.style.display = 'inline-block'\n    shapeContainer.style.marginRight = '2px'\n\n    const shapeElements = shapeContainer.children\n\n    for (let i = 0; i < shapeElements.length; i++) {\n      const shapeElement = shapeElements[i]\n      const svgElement = shapeElement.children[0]\n      if (svgElement) {\n        svgElement.style.visibility = 'hidden'\n      }\n      const color = actualTooltip.content[i]?.shapeFill ?? 'transparent'\n\n      shapeElement.style.width = '4px'\n      shapeElement.style.height = '100%'\n      shapeElement.style.borderRadius = '2px'\n      shapeElement.style.marginRight = '4px'\n      shapeElement.style.backgroundColor = color\n      shapeElement.style.borderColor = color\n    }\n  }\n\n  const title = tooltipElement.querySelector('.vchart-tooltip-title')\n\n  if (title) {\n    title.style.marginBottom = '8px'\n  }\n}\n\nexport const updateMarkTooltipElement = (tooltipElement: any, actualTooltip: any) => {\n  if (!tooltipElement || !tooltipElement.querySelector || !actualTooltip) {\n    return\n  }\n\n  const shapeContainer = tooltipElement.querySelector('.vchart-tooltip-shape-column')\n\n  if (!shapeContainer) {\n    return\n  }\n\n  const color = (actualTooltip.content[0].shapeFill as string) ?? 'transparent'\n\n  setWholeIcon(shapeContainer, color)\n}\n","import type { ITooltipSpec } from '@visactor/vchart'\nimport type { TooltipConfig } from 'src/types/properties'\n\nexport const getTooltipStyle = (tooltipConfig: TooltipConfig) => {\n  return {\n    panel: {\n      padding: tooltipConfig.padding,\n      border: {\n        radius: tooltipConfig.borderRadius,\n        width: tooltipConfig.borderWidth,\n        color: tooltipConfig.borderColor,\n      },\n      backgroundColor: tooltipConfig.backgroundColor,\n    },\n    keyLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.keyColor,\n    },\n    valueLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.valueColor,\n      fontWeight: 'medium',\n    },\n    titleLabel: {\n      fontSize: tooltipConfig.fontSize,\n      lineHeight: tooltipConfig.lineHeight,\n      fontColor: tooltipConfig.titleColor,\n      fontWeight: 'bold',\n    },\n  } as ITooltipSpec['style']\n}\n","import type { PivotChartConstructorOptions, BaseTableAPI } from '@visactor/vtable'\nimport { isNumber } from 'remeda'\nimport { intl } from 'src/i18n'\nimport { createFormatterByMeasure, findMeasureById } from 'src/pipeline/utils'\nimport type { Datum, FoldInfo, MeasureTree, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotIndicators: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { measureTree, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo } = datasetReshapeInfo[0]\n  const hasRow = ((spec as any)?.rows as any[])?.length > 0\n  const foldMapValues = Object.values(foldInfo.foldMap)\n\n  return {\n    ...spec,\n    indicatorTitle: intl.i18n`指标名称`,\n    indicatorsAsCol: hasRow,\n    hideIndicatorName: hasRow,\n    indicators: [\n      {\n        cellType: 'text',\n        indicatorKey: foldInfo.measureValue,\n        title: foldMapValues.length > 1 ? '' : foldMapValues[0],\n        width: 'auto',\n        format: fieldFormat(measureTree as MeasureTree, foldInfo as FoldInfo),\n      },\n    ] as unknown as PivotChartConstructorOptions['indicators'],\n  }\n}\n\nconst fieldFormat = (measureTree: MeasureTree, foldInfo: FoldInfo) => {\n  return (value: number | string, col?: number, row?: number, table?: BaseTableAPI) => {\n    if (!isNumber(col) || !isNumber(row) || !table) {\n      return value\n    }\n\n    const datum = table.getCellOriginRecord(col, row) as Datum[]\n    if (!datum[0]) {\n      return value\n    }\n    const { measureId: foldMeasureId } = foldInfo\n    const measureId = datum[0][foldMeasureId] as string\n    const measure = findMeasureById(measureTree, measureId)\n    const formatter = createFormatterByMeasure(measure)\n    return formatter(value)\n  }\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  tableThemeStyle,\n  selectionStyle,\n  titleOnDimension,\n  pivotTableBodyCell,\n} from '../pipes'\nimport { dataConfig } from '../pipes/indicators/pivotDataConfig'\n\nexport const pivotTableSpecPipeline: SpecPipeline = [\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  titleOnDimension,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  tableThemeStyle,\n  selectionStyle,\n  dataConfig,\n  pivotTableBodyCell,\n]\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const initPivotTable: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.pivotTable || {}\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    columnResizeType: 'column',\n    showColumnHeader: true,\n    showRowHeader: true,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    corner: {\n      titleOnDimension: 'all',\n    },\n    widthAdaptiveMode: 'all',\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as PivotTableConstructorOptions\n}\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotColumns: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { encoding } = advancedVSeed\n  const dimensions = advancedVSeed.dimensionTree as Dimensions\n  const columns = dimensions.filter((item) => encoding.column?.includes(item.id))\n\n  return {\n    ...spec,\n    columns: columns.map((item) => {\n      return {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n    }),\n  } as PivotTableConstructorOptions\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotRows: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensionTree as Dimensions\n  const { encoding } = advancedVSeed\n  const rows = dimensions.filter((item) => encoding.row?.includes(item.id))\n  const allMeasures = findAllMeasures(advancedVSeed.measureTree)\n\n  return {\n    ...spec,\n    rows: rows.map((item) => {\n      const res = {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n\n      if (item.id === MeasureId) {\n        ;(res as any).headerFormat = (measureId: string) => {\n          const measure = allMeasures.find((m) => m.id === measureId)\n\n          return measure?.alias ?? measureId\n        }\n      }\n\n      return res\n    }),\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const titleOnDimension: PivotTableSpecPipe = (spec) => {\n  const { rows = [], columns = [] } = spec\n\n  return {\n    ...spec,\n    corner: {\n      titleOnDimension: (rows as any[]).length <= 1 && (columns as any[]).length >= 1 ? 'column' : 'row',\n    },\n  }\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const rowHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).rowHeaderStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 0, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const cornerHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor\n  const hoverCellColor = themConfig.hoverHeaderBackgroundColor\n\n  ;(result.theme as ThemeLike).cornerHeaderStyle = {\n    borderColor: [borderColor, borderColor],\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellColor || undefined,\n      inlineRowBgColor: hoverInlineColor || undefined,\n      inlineColumnBgColor: hoverInlineColor || undefined,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const dataConfig: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measures = findAllMeasures(advancedVSeed.measureTree)\n\n  const aggregationRules = measures.map((measure) => ({\n    field: measure.id,\n    aggregationType: 'NONE',\n    indicatorKey: measure.id,\n  }))\n\n  return {\n    ...spec,\n    dataConfig: {\n      aggregationRules,\n    },\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { IIndicator, PivotTableConstructorOptions } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, Datum, PivotTableSpecPipe } from 'src/types'\nimport { pickBodyCellStyle } from './common'\nimport { FoldMeasureValue, MeasureId } from 'src/dataReshape'\n\nexport const pivotTableBodyCell: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as PivotTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const indicators = (spec as PivotTableConstructorOptions).indicators || []\n  const selectedPos: { col: number; row: number }[] = []\n\n  const newIndicators = indicators.map((ind) => {\n    const newInd = isString(ind)\n      ? ({\n          indicatorKey: ind,\n        } as IIndicator)\n      : ind\n\n    const { indicatorKey } = newInd\n\n    newInd.style = (datum: any) => {\n      const { dataValue, cellHeaderPaths } = datum\n      const headerPaths = [...cellHeaderPaths.colHeaderPaths, ...cellHeaderPaths.rowHeaderPaths]\n\n      const originalDatum: Datum = {\n        [indicatorKey]: dataValue,\n      }\n\n      headerPaths.forEach((path: any) => {\n        if (path.dimensionKey) {\n          originalDatum[path.dimensionKey] = path.value\n        }\n      })\n\n      if (!isNullish(originalDatum[MeasureId]) && !isNullish(originalDatum[FoldMeasureValue])) {\n        originalDatum[originalDatum[MeasureId]] = originalDatum[FoldMeasureValue]\n      }\n\n      const mergedStyle = bodyCellStyleList.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          if (selectedPos.length && selectedPos[0].col === datum?.col && selectedPos[0].row === datum?.row) {\n            // 说明重复进入了，清空历史\n            selectedPos.length = 0\n          }\n          selectedPos.push({\n            col: datum?.col,\n            row: datum?.row,\n          })\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return newInd\n  })\n  return {\n    ...spec,\n    runningConfig: {\n      ...((spec as any)?.runningConfig || {}),\n      selectedPos,\n    },\n    indicators: newIndicators,\n  } as PivotTableConstructorOptions\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { isMeasure } from 'src/pipeline/utils'\nimport type { Dimension, DimensionGroup, DimensionTree, ListTableSpecPipe } from 'src/types'\n\nexport const dimensionTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensionTree = (advancedVSeed as unknown as { dimensionTree: DimensionTree }).dimensionTree\n  const result = { ...spec } as ListTableConstructorOptions\n  const eachNode = (node: Dimension | DimensionGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Dimension, DimensionGroup>(dimensionTree, eachNode)\n\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { createFormatterByMeasure, isMeasure } from 'src/pipeline/utils'\nimport type { MeasureGroup, Measure, MeasureTree, ListTableSpecPipe, Datum } from 'src/types'\n\nexport const measureTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measureTree = (advancedVSeed as unknown as { measureTree: MeasureTree }).measureTree\n  const result = { ...spec } as ListTableConstructorOptions\n\n  const eachNode = (node: Measure | MeasureGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n        fieldFormat: fieldFormat(node),\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Measure, MeasureGroup>(measureTree, eachNode)\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst fieldFormat = (node: Measure) => {\n  const formatter = createFormatterByMeasure(node)\n\n  return (datum: Datum) => {\n    const { id } = node\n    const value = datum[id] as number | string | undefined\n    return formatter(value)\n  }\n}\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  tableThemeStyle,\n  selectionStyle,\n  tableBodyCell,\n} from '../pipes'\n\nexport const tableSpecPipeline: SpecPipeline = [\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  tableThemeStyle,\n  selectionStyle,\n  tableBodyCell,\n]\n","import type { ListTableConstructorOptions } from '@visactor/vtable'\nimport type { ListTableSpecPipe } from 'src/types'\n\nexport const initTable: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.table || {}\n\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    showHeader: true,\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    hover: {\n      highlightMode: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as ListTableConstructorOptions\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { ListTableConstructorOptions, ColumnDefine } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, ListTableSpecPipe } from 'src/types'\nimport type { MeasureSelector, Selectors } from 'src/types/dataSelector'\nimport { pickBodyCellStyle } from './common'\nimport { preorderTraverse } from 'src/pipeline/utils/tree/traverse'\n\nexport const tableBodyCell: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as ListTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const columns = (spec as ListTableConstructorOptions).columns || []\n  const selectedPos: { col: number; row: number }[] = []\n  const setStyleOfColumn = (col: ColumnDefine) => {\n    const field = col.field as string\n    const matchedStyles = bodyCellStyleList.filter((style) => {\n      if (isNullish(style.selector)) {\n        return true\n      }\n      const selectors = array(style.selector) as Selectors\n\n      return selectors.some((selector) => {\n        return isPlainObject(selector)\n          ? isNullish(selector.field) || (selector as MeasureSelector).field === field\n          : isNumber(selector) || isString(selector)\n      })\n    })\n\n    if (!matchedStyles.length) {\n      return false\n    }\n\n    col.style = (datum: any) => {\n      const originalDatum = {\n        [field]: datum.dataValue,\n      }\n\n      const mergedStyle = matchedStyles.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          if (selectedPos.length && selectedPos[0].col === datum?.col && selectedPos[0].row === datum?.row) {\n            // 说明重复进入了，清空历史\n            selectedPos.length = 0\n          }\n          selectedPos.push({\n            col: datum?.col,\n            row: datum?.row,\n          })\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return false\n  }\n\n  preorderTraverse<ColumnDefine, 'columns'>(columns, setStyleOfColumn, 'columns')\n  ;(spec as any).runningConfig = {\n    ...((spec as any).runningConfig || {}),\n    selectedPos,\n  }\n\n  return spec as ListTableConstructorOptions\n}\n","import type { BodyCellStyle } from 'src/types'\n\nconst tableStyleMap = {\n  backgroundColor: 'bgColor',\n  textColor: 'color',\n  textFontSize: 'fontSize',\n  borderColor: 'borderColor',\n  borderLineWidth: 'borderLineWidth',\n}\n\nexport const pickBodyCellStyle = (bodyCellStyle: BodyCellStyle) => {\n  return (Object.keys(tableStyleMap) as Array<keyof typeof tableStyleMap>).reduce<Record<string, any>>((acc, key) => {\n    if (key in bodyCellStyle) {\n      acc[tableStyleMap[key]] = bodyCellStyle[key]\n    }\n\n    return acc\n  }, {})\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const bodyStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { chartType, config } = advancedVSeed\n  const themeConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themeConfig) return result\n\n  // basic\n  const borderColor = themeConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themeConfig.bodyBackgroundColor || '#fff'\n  const fontColor = themeConfig.bodyFontColor || '#1B1F23'\n  const fontSize = themeConfig.bodyFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themeConfig.hoverBodyBackgroundColor || '#bedaff'\n  const hoverInlineColor = themeConfig.hoverBodyInlineBackgroundColor || '#bedaff'\n\n  if (!result.theme) result.theme = {}\n  ;(result.theme as ThemeLike).bodyStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'right',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    color: fontColor,\n    fontSize: fontSize,\n    fontStyle: 'normal',\n    fontWeight: 'normal',\n    fontVariant: 'normal',\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const tableThemeStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n\n  ;(result.theme as ThemeLike).frameStyle = {\n    borderColor,\n    borderLineWidth: 1,\n    cornerRadius: 4,\n  }\n  result.theme.scrollStyle = {\n    visible: 'scrolling',\n    hoverOn: true,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const headerStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).headerStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'center',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 0, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const selectionStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.selectedBorderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.selectedBackgroundColor || 'rgb(224, 224, 224, 0.5)'\n\n  ;(result.theme as ThemeLike).selectionStyle = {\n    cellBorderColor: borderColor,\n    cellBorderLineWidth: 2,\n    cellBgColor: backgroundColor,\n  }\n\n  return result\n}\n","import { BoxPlotPivotIndicator } from 'src/dataReshape'\n\nexport const revisedBoxPlotFieldKey = (fieldKey: string, groupId: string, isPivotChart = true) => {\n  if (!isPivotChart) {\n    return fieldKey\n  }\n  return `${BoxPlotPivotIndicator}_${groupId}_${fieldKey}`\n}\n","import type { Measures } from 'src/types'\nimport { type Dimensions, type DimensionGroup, type VSeed, type Measure } from 'src/types'\nimport { isPositionMeasure } from './measures'\nimport { isMeasureTreeWithParentId } from '../advanced/chart/pipes/measures/utils'\nimport { unique } from 'remeda'\nimport { ChartTypeEnum, DEFAULT_PARENT_ID } from './constant'\n\nexport const isTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Table\n}\nexport const isPivotTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.PivotTable\n}\nexport const isRadar = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Radar\n}\nexport const isAreaPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.AreaPercent\n}\nexport const isColumnPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.ColumnPercent\n}\nexport const isBarPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.BarPercent\n}\n\nexport const isBarLikeChart = (vseed: VSeed) => {\n  return (\n    vseed.chartType === ChartTypeEnum.Bar ||\n    vseed.chartType === ChartTypeEnum.BarPercent ||\n    vseed.chartType === ChartTypeEnum.BarParallel\n  )\n}\n\nexport const isVTable = (vseed: VSeed) => {\n  return ['table', 'pivotTable'].includes(vseed.chartType)\n}\nexport const isVChart = (vseed: VSeed): boolean => {\n  return !isVTable(vseed)\n}\n\n/**\n * @description 透视图表或组合图\n * - 透视图表定义: 存在 column 或 row的 encoding\n * - 组合图表定义: 存在多组指标的情况\n * - 透视组合图表: 存在 column 或 row的 encoding 且 存在多组指标的情况\n * 上述三者都只能使用 VTable.PivotChart 绘制\n */\nexport const isPivotChart = (vseed: VSeed) => {\n  if (isVTable(vseed)) {\n    return false\n  }\n\n  if (isPivot(vseed)) {\n    return true\n  }\n\n  return isCombination(vseed)\n}\n\n/**\n * @description 存在column 或 row的encoding\n */\nexport const isPivot = (vseed: VSeed) => {\n  const { dimensions = [] } = vseed as {\n    dimensions: Dimensions\n  }\n\n  return dimensions && dimensions.some((dimension) => dimension.encoding === 'row' || dimension.encoding === 'column')\n}\n\n/**\n * @description 不存在column 或 row的encoding, 但是有多组指标的情况\n */\nexport const isCombination = (vseed: VSeed) => {\n  if (isMeasureTreeWithParentId(vseed.measures)) {\n    const parentIds = vseed.measures\n      ?.filter(isPositionMeasure)\n      .map((measure: Measure) => measure.parentId || DEFAULT_PARENT_ID)\n    return parentIds && unique(parentIds).length > 1\n  }\n\n  const { measures = [] } = vseed as {\n    measures: Measures\n    dimensions: Dimensions\n  }\n\n  const hasMeasureGroup = measures && measures.some((measure: DimensionGroup) => measure && measure.children)\n\n  return hasMeasureGroup\n}\n\nexport const isRectungularCoordinate = (chartType: string) => {\n  return (\n    [\n      ChartTypeEnum.Bar,\n      ChartTypeEnum.BarPercent,\n      ChartTypeEnum.BarParallel,\n      ChartTypeEnum.Column,\n      ChartTypeEnum.ColumnPercent,\n      ChartTypeEnum.ColumnParallel,\n      ChartTypeEnum.Line,\n      ChartTypeEnum.Area,\n      ChartTypeEnum.AreaPercent,\n      ChartTypeEnum.DualAxis,\n      ChartTypeEnum.Boxplot,\n      ChartTypeEnum.DualAxis,\n      ChartTypeEnum.Scatter,\n      ChartTypeEnum.Heatmap,\n      ChartTypeEnum.Boxplot,\n    ] as string[]\n  ).includes(chartType)\n}\n\n/**\n * 默认的双轴图图表类型配置\n */\nexport const DEFAULT_DUAL_CHART_TYPE = {\n  primary: 'column',\n  secondary: 'line',\n}\n\nexport const isDualAxisChartType = (chartType: string | undefined) => {\n  return (\n    chartType &&\n    ['column', 'columnParallel', 'columnPercent', 'line', 'area', 'areaPercent', 'scatter'].includes(chartType)\n  )\n}\n","// 标注层 z-index\nexport const ANNOTATION_Z_INDEX = 1000\n// 线性轴 顶部空隙 预留5px\nexport const LINEAR_AXIS_INNER_OFFSET_TOP = 12\n// 双轴图 柱图 ZIndex\nexport const DUAL_AXIS_CHART_COLUMN_Z_INDEX = 1000\n// 双轴图 非柱图 ZIndex\nexport const DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX = 1001\n// 双轴图 标注层 ZIndex\nexport const DUAL_AXIS_LABEL_Z_INDEX = 1002\n// 默认父级id\nexport const DEFAULT_PARENT_ID = '__DefaultParentId__'\n// 轴标签间距\nexport const AXIS_LABEL_SPACE = 8\n// 透视轴 band 类型内边距\nexport const BAND_AXIS_INNER_OFFSET_IN_PIVOT = 2\n\n// 图表类型枚举\nexport const ChartTypeEnum = {\n  Table: 'table',\n  PivotTable: 'pivotTable',\n  // cartesian\n  Line: 'line',\n  Column: 'column',\n  ColumnPercent: 'columnPercent',\n  ColumnParallel: 'columnParallel',\n  Bar: 'bar',\n  BarPercent: 'barPercent',\n  BarParallel: 'barParallel',\n  Area: 'area',\n  AreaPercent: 'areaPercent',\n  DualAxis: 'dualAxis',\n  Scatter: 'scatter',\n  // polar\n  Rose: 'rose',\n  RoseParallel: 'roseParallel',\n  Pie: 'pie',\n  Donut: 'donut',\n  Radar: 'radar',\n  // other\n  Funnel: 'funnel',\n  Heatmap: 'heatmap',\n  Boxplot: 'boxPlot',\n  Histogram: 'histogram',\n} as const\n\n// Heatmap hide cell\nexport const DATUM_HIDE_KEY = '__VSEED_HideItem__'\n","import type { Dimension, DimensionGroup } from 'src/types'\n\nexport const isDimension = (dimension: Dimension | DimensionGroup): dimension is Dimension => {\n  return !('children' in dimension)\n}\n\nexport const isDimensionGroup = (dimension: Dimension | DimensionGroup): dimension is DimensionGroup => {\n  return 'children' in dimension\n}\n\n// export const isDimensions = (dimensions: Dimension[] | DimensionGroup[]): dimensions is Dimension[] => {\n//   return dimensions.every(isDimension)\n// }\n","import type { Formatter, Locale, NumFormat } from 'src/types'\nimport { autoNumFormatter, createNumFormatter } from './createNumFormatter'\nimport { intl } from 'src/i18n'\n\nexport const createFormatter = (format: Partial<NumFormat>, locale?: Locale): Formatter => {\n  return createNumFormatter(format, locale)\n}\n\nexport const autoFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  return autoNumFormatter(value, locale)\n}\n","import type { Formatter, Measure } from 'src/types'\nimport { autoFormatter, createFormatter } from './createFormatter'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const createFormatterByMeasure = (measure?: Measure): Formatter => {\n  if (!measure) {\n    return (v) => String(v)\n  }\n  const { numFormat, format, autoFormat } = measure\n\n  const formatterFormat = numFormat || format || {}\n\n  if (autoFormat === true) {\n    return autoFormatter\n  }\n\n  if (isNullish(autoFormat) && isEmpty(formatterFormat)) {\n    return autoFormatter\n  }\n\n  if (!isEmpty(formatterFormat)) {\n    return createFormatter(formatterFormat)\n  }\n\n  return (v) => String(v)\n}\n","import { isNumber } from 'remeda'\nimport { intl } from '../../../i18n'\nimport type { Formatter, Locale, NumFormat } from 'src/types'\n\nexport const createNumFormatter = (format?: Partial<NumFormat>, locale: Locale = intl.getLocale()): Formatter => {\n  const {\n    type = 'number',\n    ratio = 1,\n    thousandSeparator = true,\n    prefix = '',\n    suffix = '',\n    symbol = '',\n    fractionDigits = 2,\n    significantDigits,\n    roundingMode = 'halfExpand',\n    roundingPriority = 'auto',\n  } = format || {}\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: type === 'scientific' ? 'scientific' : 'standard',\n    // @ts-expect-error roundingMode is not in NumberFormatOptions\n    roundingMode,\n    roundingPriority,\n  }\n\n  if (isNumber(fractionDigits)) {\n    if (fractionDigits >= 0) {\n      numFormatterOptions.minimumFractionDigits = fractionDigits\n      numFormatterOptions.maximumFractionDigits = fractionDigits\n    }\n  }\n  if (isNumber(significantDigits) && significantDigits > 0) {\n    if (significantDigits > 0) {\n      numFormatterOptions.minimumSignificantDigits = significantDigits\n      numFormatterOptions.maximumSignificantDigits = significantDigits\n    }\n  }\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions, useGrouping: thousandSeparator })\n\n  return (value?: number | string) => {\n    let num = Number(value)\n    let typeSymbol = ''\n    if (Number.isNaN(num)) {\n      return String(value)\n    }\n\n    // apply ratio for percent/permille\n    if (type === 'percent') {\n      num *= 100\n      typeSymbol = '%'\n    } else if (type === 'permille') {\n      num *= 1000\n      typeSymbol = '‰'\n    } else if (type === 'number') {\n      num = num / (ratio || 1)\n    }\n\n    // format value\n    let numStr = numFormatter.format(num)\n\n    // add thousand separator\n    if (thousandSeparator) {\n      const parts = numStr.split('.')\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n      numStr = parts.join('.')\n    }\n\n    const validSymbol = symbol ?? ''\n\n    // add symbol, typeSymbol, prefix and suffix\n    return `${prefix}${numStr}${typeSymbol}${validSymbol}${suffix}`\n  }\n}\n\nexport const autoNumFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: 'compact',\n    useGrouping: true,\n  }\n  numFormatterOptions.minimumFractionDigits = 0\n  numFormatterOptions.maximumFractionDigits = 2\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions })\n\n  return numFormatter.format(Number(value))\n}\n","import type { Measure, MeasureTree } from 'src/types'\nimport { preorderTraverse } from '../tree'\n\nexport const findMeasureById = (measures: MeasureTree = [], id: string): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      if (node.id === id) {\n        result = node\n        return true\n      }\n    }\n    return false\n  })\n  return result\n}\n\nexport const findFirstMeasure = (measures: MeasureTree = []): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result = node\n      return true\n    }\n    return false\n  })\n  return result\n}\n\nexport const findAllMeasures = (measures: MeasureTree = []): Measure[] => {\n  if (!measures) return []\n  const result: Measure[] = []\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result.push(node)\n    }\n    return false\n  })\n  return result\n}\n\nexport const hasMultipleMeasureInSingleView = (reshapeMeasures: Measure[][]): boolean => {\n  return reshapeMeasures.some((m) => m.length > 1)\n}\n\nexport const flatReshapeMeasures = (reshapeMeasures: Measure[][]) => {\n  return reshapeMeasures.flat()\n}\n","import type { Measure, MeasureGroup } from 'src/types'\n\nexport const isMeasure = (measure: Measure | MeasureGroup): measure is Measure => {\n  return !('children' in measure)\n}\n\nexport const isMeasureGroup = (measure: Measure | MeasureGroup): measure is MeasureGroup => {\n  return 'children' in measure\n}\n\nexport const isMeasures = (measures: Measure[] | MeasureGroup[]): measures is Measure[] => {\n  return measures.every(isMeasure)\n}\n\nexport const isPositionMeasure = (measure: Measure): boolean => {\n  return !measure.encoding || !['color', 'size', 'label', 'tooltip', 'detail'].includes(measure.encoding)\n}\n","import type { ExecPipelineType, Pipe } from 'src/types'\n\n/**\n * 执行pipeline, 每个pipe负责构建结果的一部分, 构建完成后得到完整的目标结果\n * @param pipeline pipeline数组, 每个pipe负责构建结果的一部分\n * @param initialValue 初始值\n * @param context 上下文\n * @returns 执行后的结果\n */\nexport const execPipeline: ExecPipelineType = <T, U>(\n  pipeline: Array<Pipe<T, U>>,\n  context: U,\n  initialValue: Partial<T> = {},\n): T => {\n  const result = pipeline.reduce((prev, cur) => {\n    return cur(prev, context)\n  }, initialValue)\n  return result as T\n}\n","import { isPlainObject, mapValues, pipe } from 'remeda'\n\n// 递归类型，将所有 null 替换为 undefined\ntype NullToUndefined<T> = T extends null\n  ? undefined\n  : T extends (infer U)[]\n    ? NullToUndefined<U>[]\n    : T extends object\n      ? { [K in keyof T]: NullToUndefined<T[K]> }\n      : T\n\nexport const replaceNullToUndefined = <T>(obj: T): NullToUndefined<T> => {\n  if (obj === null) {\n    return undefined as NullToUndefined<T>\n  }\n  if (Array.isArray(obj)) {\n    // 递归处理数组元素\n    return obj.map(replaceNullToUndefined) as NullToUndefined<T>\n  }\n  if (isPlainObject(obj)) {\n    // 使用 remeda 的 mapValues 递归处理对象属性\n    return pipe(\n      obj as object,\n      mapValues((value) => replaceNullToUndefined(value)),\n    ) as NullToUndefined<T>\n  }\n  return obj as NullToUndefined<T>\n}\n","/**\n * 支持泛型与可配置子节点键名的非递归前序遍历\n * @param tree 根节点数组\n * @param callback 遍历时对每个节点执行的回调，返回 true 时停止遍历\n * @param childrenKey 子节点键名（默认 'children'）\n */\ntype WithChildren<Node, K extends string> = Node & { [P in K]?: Node[] }\n\nexport const preorderTraverse = <Node, K extends string = 'children'>(\n  tree: Node[],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n) => {\n  if (!tree || tree.length === 0) return\n\n  const stack: Node[] = [...tree].reverse()\n\n  while (stack.length > 0) {\n    const node = stack.pop() as Node\n    const stop = callback(node)\n    if (stop === true) {\n      return\n    }\n\n    const children = (node as WithChildren<Node, K>)[childrenKey]\n    if (Array.isArray(children) && children.length > 0) {\n      for (let i = children.length - 1; i >= 0; i--) {\n        const child = children[i]\n        stack.push(child)\n      }\n    }\n  }\n}\n\nexport const findTreeNodesBy = <Node, K extends string = 'children'>(\n  nodes: Node[] = [],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n): Node[] => {\n  if (!nodes) return []\n  const result: Node[] = []\n  preorderTraverse<Node, K>(nodes, (node) => {\n    if (!(childrenKey in (node as WithChildren<Node, K>))) {\n      if (callback(node)) {\n        result.push(node)\n      }\n    }\n    return false\n  })\n  return result\n}\n","import { isEmpty } from 'remeda'\nimport type { VSeed } from 'src/types'\n\nexport const checkVSeed = (vseed: VSeed) => {\n  const { chartType, dataset, dimensions, measures } = vseed\n  if (!chartType) {\n    throw new Error('chartType is required')\n  }\n  if (!dataset || isEmpty(dataset)) {\n    throw new Error('dataset is required, and must be an array')\n  }\n  if (dimensions && !Array.isArray(dimensions)) {\n    throw new Error('dimensions must be an array')\n  }\n  if (measures && !Array.isArray(measures)) {\n    throw new Error('measures must be an array')\n  }\n}\n","import type {\n  AnnotationAreaConfig,\n  AnnotationHorizontalLineConfig,\n  AnnotationPointConfig,\n} from 'src/types/properties/config/annotation/annotation'\n\nexport const getDefaultAnnotationPoint = (): AnnotationPointConfig => ({\n  textBackgroundVisible: true,\n  textFontSize: 12,\n  textFontWeight: 400,\n\n  textBackgroundBorderRadius: 0,\n  textBackgroundBorderWidth: 1,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#ffffff',\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getDefaultAnnotationLine = (): AnnotationHorizontalLineConfig => ({\n  lineVisible: true,\n  lineWidth: 1,\n  lineStyle: 'solid' as const,\n\n  textFontSize: 12,\n  textFontWeight: 400,\n  startSymbolVisible: true,\n  endSymbolVisible: false,\n\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#BCC1CB',\n\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotationVerticalLine = () => getLightAnnotationHorizontalLine()\n\nexport const getDefaultAnnotationArea = (): AnnotationAreaConfig => ({\n  textFontSize: 12,\n  textFontWeight: 400,\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n  areaBorderWidth: 0,\n  areaBorderRadius: 0,\n  areaLineDash: [2, 2],\n\n  outerPadding: 4,\n})\n\nexport const getLightAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n\n  areaColor: '#BCC1CB',\n  areaColorOpacity: 0.12,\n  areaBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotation = () => ({\n  annotationPoint: getLightAnnotationPoint(),\n  annotationHorizontalLine: getLightAnnotationHorizontalLine(),\n  annotationVerticalLine: getLightAnnotationVerticalLine(),\n  annotationArea: getLightAnnotationArea(),\n})\n\n// --- dark ---\nexport const getDarkAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#55595F',\n\n  textColor: '#E2E3E6',\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationVerticalLine = () => getDarkAnnotationHorizontalLine()\n\nexport const getDarkAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n\n  areaColor: '#E2E3E6',\n  areaColorOpacity: 0.15,\n  areaBorderColor: '#E2E3E6',\n})\n\nexport const getDarkAnnotation = () => ({\n  annotationPoint: getDarkAnnotationPoint(),\n  annotationHorizontalLine: getDarkAnnotationHorizontalLine(),\n  annotationVerticalLine: getDarkAnnotationVerticalLine(),\n  annotationArea: getDarkAnnotationArea(),\n})\n\nexport default getLightAnnotation\n","import type { YBandAxis, YLinearAxis } from 'src/types'\n\nexport const getLightLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  inverse: false,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: false,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getLightBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: true,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: false,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: true,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n","import type { BoxPlotStyle, OutlierStyle } from 'src/types'\n\nconst getCommonBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    boxCornerRadius: 2,\n  }\n}\n\nexport const getLightBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    ...getCommonBoxPlotStyle(),\n    boxBorderColor: '#606773',\n    whiskerBorderColor: '#606773',\n  }\n}\n\nexport const getDarkBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    ...getCommonBoxPlotStyle(),\n    boxBorderColor: '#888C93',\n    whiskerBorderColor: '#888C93',\n  }\n}\nconst getCommonOutlierStyle = (): OutlierStyle => {\n  return {\n    pointSize: 10,\n    pointBorderWidth: 1.5,\n    pointColor: 'transparent',\n  }\n}\n\nexport const getLightOutlierStyle = (): OutlierStyle => {\n  return {\n    ...getCommonOutlierStyle(),\n    pointBorderColor: '#606773',\n  }\n}\n\nexport const getDarkOutlierStyle = (): OutlierStyle => {\n  return {\n    ...getCommonOutlierStyle(),\n    pointBorderColor: '#888C93',\n  }\n}\n","export const getLightColorScheme = () => [\n  '#8D72F6',\n  '#5766EC',\n  '#66A3FE',\n  '#51D5E6',\n  '#4EC0B3',\n  '#F9DF90',\n  '#F9AD71',\n  '#ED8888',\n  '#E9A0C3',\n  '#D77DD3',\n]\nexport const getDarkColorScheme = () => [\n  '#2E62F1',\n  '#4DC36A',\n  '#FF8406',\n  '#FFCC00',\n  '#4F44CF',\n  '#5AC8FA',\n  '#003A8C',\n  '#B08AE2',\n  '#FF6341',\n  '#98DD62',\n]\nexport const getLightLinearColorScheme = () => ['#C2CEFF', '#5766EC']\nexport const getDarkLinearColorScheme = () => ['#A0CEFF', '#2E62F1']\nexport const getLightColor = () => ({\n  linearColorScheme: getLightLinearColorScheme(),\n  colorScheme: getLightColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\nexport const getDarkColor = () => ({\n  linearColorScheme: getDarkLinearColorScheme(),\n  colorScheme: getDarkColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\n","export const getDarkCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  lineColor: '#55595F',\n})\n\nexport const getDarkCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  rectColor: '#4B4F54',\n})\n\nexport const getLightCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#21252C',\n  lineColor: '#21252C',\n})\nexport const getLightCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#364159',\n  rectColor: '#D9DDE4',\n})\n","import type { FunnelTransformConfig } from 'src/types/properties/config/funnelTransform'\n\nexport const getLightFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#F6F7F9',\n    textColor: '#737880',\n  }\n}\n\nexport const getDarkFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#2A2D33',\n    textColor: '#888C93',\n  }\n}\n","import type { HeatmapCell } from 'src/types/properties/config/heatmap/heatmap'\n\nexport const getLightHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#fff',\n  }\n}\n\nexport const getDarkHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#404349',\n  }\n}\n","export const getDefaultLabel = () => ({\n  enable: true,\n  wrap: true,\n  showValue: true,\n  showValuePercent: false,\n  labelColorSmartInvert: false,\n  labelOverlap: true,\n})\n\nexport const getDarkLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#21252C',\n})\n\nexport const getLightLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#fff',\n})\n\nexport const getFunnelDarkLabel = () => ({\n  ...getDefaultLabel(),\n  labelColor: '#fff',\n})\n\nexport const getFunnelLightLabel = () => ({\n  ...getDefaultLabel(),\n  labelColor: '#fff',\n})\n","import type { ColorLegend, Legend } from 'src/types'\n\nexport const getDefaultLegend = (): Legend => ({\n  enable: true,\n  border: true,\n  maxSize: 1,\n  shapeType: 'rectRound',\n  position: 'rt',\n  labelFontSize: 12,\n  labelFontWeight: 400,\n})\n\nexport const getDarkLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#BBBDC3',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#2A2D33',\n})\n\nexport const getLightLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#606773',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#F1F2F5',\n})\n\nexport const getDarkColorLegend = (): ColorLegend => ({\n  ...getDefaultLegend(),\n  labelColor: '#BBBDC3',\n  railBackgroundColor: '#404349',\n  handlerBorderColor: '#4B4F54',\n})\n\nexport const getLightColorLegend = (): ColorLegend => ({\n  ...getDefaultLegend(),\n  labelColor: '#606773',\n  handlerBorderColor: '#fff',\n  railBackgroundColor: '#f1f3f4',\n})\n","import type { RegressionLineConfig } from 'src/types/properties/regressionLine'\n\nexport const getDefaultRegressionLine = () => {\n  return {\n    lineWidth: 2,\n    textFontSize: 12,\n    textFontWeight: 400,\n  }\n}\n\nexport const getLightRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n\nexport const getDarkRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n","import type { PivotChartGridConfig } from 'src/types'\n\nexport const getDefaultTableConfig = () => ({\n  bodyFontSize: 12,\n  bodyBackgroundColor: 'transparent',\n  headerFontSize: 12,\n})\n\nexport const getLightTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#e3e5eb',\n\n  bodyFontColor: '#141414',\n\n  headerFontColor: '#21252c',\n  headerBackgroundColor: '#f6f7f9',\n\n  hoverBodyBackgroundColor: '#bedaff',\n  hoverBodyInlineBackgroundColor: '#bedaff33',\n  hoverHeaderBackgroundColor: '#D9DDE4',\n  hoverHeaderInlineBackgroundColor: '#D9DDE455',\n\n  selectedBorderColor: '#4080ff',\n  selectedBackgroundColor: '#bedaff33',\n\n  backgroundColor: 'transparent',\n})\n\nexport const getDarkTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#4b4e53',\n\n  bodyFontColor: '#fdfdfd',\n  headerFontColor: '#fdfdfd',\n  headerBackgroundColor: '#36393e',\n\n  hoverBodyBackgroundColor: '#4284ff66',\n  hoverBodyInlineBackgroundColor: '#4284ff10',\n  hoverHeaderBackgroundColor: '#6f7984cc',\n  hoverHeaderInlineBackgroundColor: '#4b4f54',\n\n  selectedBorderColor: '#3073f2',\n  selectedBackgroundColor: '#4284ff33',\n})\n\nconst pickPivotChartGridConfig = (tableConfig: any) => {\n  return {\n    outlineBorderLineWidth: 0,\n    frameCornerRadius: 0,\n    borderColor: tableConfig.borderColor,\n    bodyFontColor: tableConfig.bodyFontColor,\n    headerFontColor: tableConfig.headerFontColor,\n\n    headerBackgroundColor: 'transparent',\n    hoverHeaderBackgroundColor: tableConfig.hoverHeaderBackgroundColor,\n    hoverHeaderInlineBackgroundColor: tableConfig.hoverHeaderInlineBackgroundColor,\n\n    titleFontColor: tableConfig.headerFontColor,\n    titleFontSize: tableConfig.headerFontSize,\n    titleFontWeight: 'bold',\n  }\n}\n\nexport const getLightPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getLightTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#D9DDE446'\n\n  res.chartGridColor = '#F0F1F6'\n  res.axisLabelColor = '#BCC1CB'\n\n  return res\n}\n\nexport const getDarkPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getDarkTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#4b4f5446'\n\n  return res\n}\n","import type { TooltipConfig } from 'src/types'\n\nconst getDefaultTooltip = (): TooltipConfig => ({\n  enable: true,\n  borderRadius: 12,\n  borderWidth: 1,\n  padding: 9,\n  lineHeight: 12,\n  fontSize: 12,\n  lineSpace: 6,\n})\n\nexport const getLightTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#e3e5e8',\n  backgroundColor: '#fff',\n  keyColor: '#606773',\n  valueColor: '#21252c',\n  titleColor: '#21252c',\n})\n\nexport const getDarkTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#3c3f44',\n  backgroundColor: '#2b2d30',\n  keyColor: '#89909D',\n  valueColor: '#E2E3E6',\n  titleColor: '#E2E3E6',\n})\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getDarkColor,\n  getDarkCrosshairLine,\n  getDarkCrosshairRect,\n  getDarkTableConfig,\n  getDarkPivotChartGridConfig,\n  getDarkLabel,\n  getDarkLegend,\n  getDarkColorLegend,\n  getFunnelDarkLabel,\n} from '../common'\nimport { getDarkTooltip } from '../common/tooltip'\nimport { getDarkBandAxis, getDarkLinearAxis } from '../common/axes'\nimport { getDarkAnnotation } from '../common/annotaion'\nimport { getDarkFunnelTransformTheme } from '../common/funnelTransform'\nimport { getDarkHeatmapCellTheme } from '../common/heatmapCell'\nimport { getDarkRegressionLine } from '../common/regressionLine'\nimport { getDarkBoxPlotStyle, getDarkOutlierStyle } from '../common/boxPlot'\n\nexport const darkTheme = (): CustomThemeConfig => {\n  const linearAxis = getDarkLinearAxis()\n  const bandAxis = getDarkBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n  const crosshairLine = getDarkCrosshairLine()\n  const crosshairRect = getDarkCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getDarkColor(),\n    label: getDarkLabel(),\n    legend: getDarkLegend(),\n    tooltip: getDarkTooltip(),\n  }\n\n  const tableConfig = getDarkTableConfig()\n\n  return {\n    config: {\n      table: tableConfig,\n      pivotTable: tableConfig,\n\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        regressionLine: getDarkRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n        label: getFunnelDarkLabel(),\n        transform: getDarkFunnelTransformTheme(),\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        legend: getDarkColorLegend(),\n        xAxis: bandAxis,\n        yAxis: bandAxis,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n\n        cell: getDarkHeatmapCellTheme(),\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        boxPlotStyle: getDarkBoxPlotStyle(),\n        outlierStyle: getDarkOutlierStyle(),\n      },\n    },\n  }\n}\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getFunnelLightLabel,\n  getLightColor,\n  getLightColorLegend,\n  getLightCrosshairLine,\n  getLightCrosshairRect,\n  getLightLabel,\n  getLightLegend,\n  getLightPivotChartGridConfig,\n  getLightTableConfig,\n} from '../common'\nimport { getLightTooltip } from '../common/tooltip'\nimport { getLightBandAxis, getLightLinearAxis } from '../common/axes'\nimport { getLightAnnotation } from '../common/annotaion'\nimport { getLightFunnelTransformTheme } from '../common/funnelTransform'\nimport { getLightHeatmapCellTheme } from '../common/heatmapCell'\nimport { getLightRegressionLine } from '../common/regressionLine'\nimport { getLightBoxPlotStyle, getLightOutlierStyle } from '../common/boxPlot'\n\nexport const lightTheme = (): CustomThemeConfig => {\n  const linearAxis = getLightLinearAxis()\n  const bandAxis: YBandAxis = getLightBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n\n  const crosshairLine = getLightCrosshairLine()\n  const crosshairRect = getLightCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getLightColor(),\n    label: getLightLabel(),\n    legend: getLightLegend(),\n    tooltip: getLightTooltip(),\n  }\n  const tableConfig = getLightTableConfig()\n\n  return {\n    config: {\n      // table\n      table: tableConfig,\n      pivotTable: tableConfig,\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n        xAxis: {\n          ...linearAxis,\n        },\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n        label: getFunnelLightLabel(),\n        transform: getLightFunnelTransformTheme(),\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        legend: getLightColorLegend(),\n        xAxis: bandAxis,\n        yAxis: bandAxis,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n        cell: getLightHeatmapCellTheme(),\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n        regressionLine: getLightRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        boxPlotStyle: getLightBoxPlotStyle(),\n        outlierStyle: getLightOutlierStyle(),\n      },\n    },\n  }\n}\n"],"names":["buildAdvanced","builder","start","performance","Date","chartType","Error","pipeline","Builder","context","intl","advancedVSeed","execPipeline","e","end","buildSpec","spec","build","getColorItems","isTable","isPivotTable","datasetReshapeInfo","colorItems","unique","d","colorIdMap","prev","cur","_colorIdMap_d","getColorIdMap","value","vseed","advanced","customPipe","themeKey","registerAll","registerTable","registerPivotTable","registerLine","registerColumn","registerColumnParallel","registerColumnPercent","registerBar","registerBarParallel","registerBarPercent","registerArea","registerAreaPercent","registerScatter","registerDualAxis","registerPie","registerDonut","registerRose","registerRoseParallel","registerRadar","registerFunnel","registerHeatmap","registerBoxPlot","registerHistogram","registerLightTheme","registerDarkTheme","areaAdvancedPipeline","areaSpecPipeline","areaPercentAdvancedPipeline","areaPercentSpecPipeline","barAdvancedPipeline","barSpecPipeline","barParallelAdvancedPipeline","barParallelSpecPipeline","barPercentAdvancedPipeline","barPercentSpecPipeline","boxplotAdvancedPipeline","boxplotSpecPipeline","columnAdvancedPipeline","columnSpecPipeline","columnParallelAdvancedPipeline","columnParallelSpecPipeline","columnPercentAdvancedPipeline","columnPercentSpecPipeline","donutAdvancedPipeline","donutSpecPipeline","dualAxisAdvancedPipeline","dualAxisSpecPipeline","funnelAdvancedPipeline","funnelSpecPipeline","heatmapAdvancedPipeline","heatmapSpecPipeline","histogramAdvancedPipeline","histogramSpecPipeline","lineAdvancedPipeline","lineSpecPipeline","pieAdvancedPipeline","pieSpecPipeline","pivotTableAdvancedPipeline","pivotTableSpecPipeline","radarAdvancedPipeline","radarSpecPipeline","roseAdvancedPipeline","roseSpecPipeline","roseParallelAdvancedPipeline","roseParallelSpecPipeline","scatterAdvancedPipeline","scatterSpecPipeline","tableAdvancedPipeline","tableSpecPipeline","registerCustomTheme","key","themeConfig","customTheme","lightTheme","darkTheme","ORIGINAL_DATA","Separator","FoldMeasureName","FoldMeasureId","FoldMeasureValue","MeasureId","MeasureName","FoldPrimaryMeasureValue","FoldSecondaryMeasureValue","DimAxisType","FoldXMeasureValue","FoldYMeasureValue","FoldXMeasureId","FoldYMeasureId","XEncoding","YEncoding","AngleEncoding","DetailEncoding","ColorEncoding","ColorIdEncoding","BoxPlotPivotIndicator","Q1MeasureValue","Q3MeasureValue","LowerWhisker","UpperWhisker","OutliersMeasureId","MedianMeasureId","BinStartMeasureId","BinEndMeasureId","BinCountMeasureId","BinPercentageMeasureId","dataReshapeByEncoding","dataset","dimensions","measures","encoding","options","foldMeasureId","foldMeasureName","foldMeasureValue","colorItemAsId","colorMeasureId","omitIds","foldedDataset","foldInfo","foldMeasures","finalDataset","unfoldInfo","unfoldDimensions","measureId","measureName","measureValue","allowEmptyFold","Infinity","result","Array","index","ids","i","j","datum","omit","id","alias","valueNumber","Number","Math","separator","color","x","y","detail","angle","angleDimensions","dim","xDimensions","yDimensions","colorDimensions","detailDimensions","Set","applyEncoding","colorId","String","getColorAliasItem","nearlyEqual","a","b","epsilon","diff","selector","vchartDatum","selectorMode","vchartKeys","Object","k","selectors","isValueSelector","selectByValue","isMeasureSelector","selectByMeasure","isDimensionSelector","selectByDmension","isPartialDatumSelector","selectByPartial","selectorDatum","finalResult","results","r","op","selectorValueArr","v","translateMap","Intl","segments","_this_translateMap_text","values","text","segment","translatedText","isNullish","locale","initAdvancedVSeed","defaultMeasures","defaultDimensions","defaultMeasureId","encodingAdapter","buildMeasures","defaultEncodingForLine","encodingForLine","pickDimensionsForReshape","pivotAdapter","reshapeWithEncoding","pivotReshapeWithEncoding","sortXBandAxis","sortLegend","areaConfig","theme","markStyle","annotation","areaPercentConfig","defaultEncodingForBar","encodingForBar","sortYBandAxis","barConfig","barParallelConfig","barPercentConfig","generateDefaultDimensionEncoding","isMultiMeasure","uniqueDimIds","addDefaultColorEncoding","generateDimensionEncoding","item","addColorToEncoding","generateDefaultMeasureEncoding","generateMeasureEncoding","label","tooltip","pickedConfig","pick","config","replaceNullToUndefined","reshapeMeasures","hasMultipleMeasureInSingleView","hasDimensionEncoding","hasMeasureEncoding","hasMulti","c","_config_chartType","_encoding_value","_encoding_q1","_encoding_q3","_encoding_min","_encoding_max","_encoding_median","uniqDims","uniqueBy","whiskers","newDatasets","boxPlotDataList","f","m","boxPlotData","boxplot","res","chartConfig","rowColumnFields","datasets","measureGroup","groupId","DEFAULT_PARENT_ID","validEncodingIds","field","revisedBoxPlotFieldKey","reshapeInfo","defaultEncodingForColumn","encodingForColumn","columnConfig","regressionLine","columnParallelConfig","columnPercentConfig","defaultEncodingForPie","encodingForPie","donutConfig","buildMeasuresForDualAxis","measuresByView","parentIds","parentId","isPrimaryYAxis","isSecondaryYAxis","isOtherEncoding","isCommonMeasureEncoding","ensureParentIdInitialized","isDualAxisChartType","DEFAULT_DUAL_CHART_TYPE","primaryCount","pid","_advancedVSeed_reshapeMeasures","foldInfoList","unfoldInfoList","primaryMeasures","secondaryMeasures","primaryChartTypes","secondaryChartTypes","primaryResult","getColorMeasureId","row","secondaryResult","allMeasuresIds","datasetList","funnelConfig","onlyMeasureId","colorDims","heatmapConfig","dimensionsWithoutMeasureId","_encoding_detail","_encoding_tooltip","_encoding_label","_config_legend","hasColorEncoding","merge","_encoding_x0","_encoding_x1","_encoding_y","binCount","binStep","binValueType","valueField","binData","bin","subMeasures","_result_config","flattenDatasert","minValue","maxValue","undefined","lineConfig","pieConfig","radarConfig","defaultEncodingForRose","encodingForRose","roseConfig","roseParallelConfig","buildMeasuresForScatter","isYAxis","isXAxis","xCount","basicMeasures","yCount","cloneMeasure","clone","xMeasures","yMeasures","xResult","yResult","_datasets_","calcOrder","sortConfig","order","orderBy","sort","aValue","bValue","_datasetReshapeInfo__unfoldInfo","_datasetReshapeInfo__unfoldInfo1","_datasetReshapeInfo__unfoldInfo2","colorIds","orderRes","itemNameOrId","_colorIdMap_id","_colorIdMap_id1","sortAxis","xField","axisOrderResult","yField","top100dataset","newDimensions","measure","_result_dimensions","_result_dimensions1","MeaIdDim","clonedMeasures","deleteBy","dimension","reshapeDimensions","noEncodingPipeline","hasEncodingPipeline","checkVSeed","pickedMarkStyle","encodingKeys","isMeasureTreeWithParentId","pivotPipeline","isPivotChart","keys","regressionLineConfig","hasLine","newSubDataset","_customTheme_theme_config","_customTheme_theme_config1","chartConfigTheme","mergedConfig","mergeDeep","_k","mergeArray","chartCustomTheme","arr","themeItem","isString","isNumber","isObjectType","findAllMeasures","findTreeNodesBy","cellStyle","measureTree","dimensionTree","pickedCellStyle","style","clonedDimensions","preorderTraverse","node","isDimension","isMeasure","area","initArea","stackInverse","colorAdapter","linearColor","backgroundColor","datasetXY","progressive","xBand","yLinear","discreteLegend","colorLegend","verticalCrosshairLine","colorPointStyleFill","pointStyle","pointStateDimensionHover","colorLineStyleFill","lineStyle","colorAreaStyleFill","areaStyle","annotationPoint","annotationVerticalLine","annotationHorizontalLine","annotationArea","splitLine","pivotArea","initPivot","pivotGridStyle","pivotIndicatorsAsRow","datasetPivot","pivotIndicators","pivotAxisStyle","pivotRowDimensions","pivotColumnDimensions","pivotTitle","pivotDiscreteLegend","pivotColorLegend","dimensionLinkage","areaPercent","percent","pivotAreaPercent","bar","initBar","stackCornerRadius","barMaxWidth","datasetYX","xLinear","yBand","horizontalCrosshairRect","colorBarStyleFill","barStyle","annotationAreaBand","pivotBar","pivotIndicatorsAsCol","initBarParallel","sameDimensionsMode","isDeepEqual","_encoding_x","barParallel","barGapInGroup","pivotBarParallel","barPercent","pivotBarPercent","initBoxplot","usePivotChart","_encoding_color","boxMaxWidth","_advancedVSeed_config_chartType","boxGapInGroup","datasetBoxplot","labelBoxPlot","buildLabel","boxPlotMeasureKeys","VCHART_OUTLIER_KEY","tooltipBoxplot","enable","meas","valueMeasure","defaultFormatter","createFormatterByMeasure","measureAliasMapping","getTooltipStyle","createMarkContent","data","_data__datum","tooltipItems","outerlierMeasure","formatter","entry","mea","createDimensionContent","updateTooltipElement","dims","pipe","medianAlias","hasMultiMeasureGroup","encodingColor","colorKey","findMeasureById","colorBoxPlotStyleFill","stylePipe","isLinearColor","_result_boxPlot","boxPlotStyle","_config_vseed_chartType","isEmpty","customMap","boxPlotStyles","boxColor","boxColorOpacity","boxBorderColor","boxBorderWidth","boxVisible","boxBorderOpacity","medianBorderColor","whiskerBorderColor","boxCornerRadius","outlierStyle","outlierStyles","pointBorderColor","pointBorderStyle","pointBorderWidth","pointColor","pointColorOpacity","pointSize","pointVisible","verticalCrosshairRect","pivotBoxplot","columnPolynomialRegressionLine","lineTheme","lineList","array","line","lineIndex","_spec_data","_spec_data1","_spec_data2","_spec_data3","lineWidth","lineDash","textColor","textFontSize","textFontWeight","confidenceIntervalOpacity","confidenceLevel","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","confidenceIntervalVisible","childrenMarks","ctx","s","chart","vchart","_s_getViewData","_s_fieldX","_s_fieldY","_s_getOption_globalScale_getScale","rect","yClamper","clamper","fieldX","fieldY","xValues","minPoints","degree","confidenceInterval","evaluateGrid","regressionPolynomial","xVal","filteredData","getAlphaByConfidenceLevel","N","xAxisHelper","halfBandWidth","linePoints","lineData","intervalData","defaultRegressionLineColor","opt","_opt_mark__product","_parentNode_attribute","parentNode","_parentNode_attribute_data","_points_","points","column","initColumn","pivotColumn","initColumnParallel","columnParallel","pivotColumnParallel","columnPercent","pivotColumnPercent","initDonut","donut","labelPie","colorPieStyleFill","pieStyle","pivotDonut","pivotHideIndicatorName","addRegionPadding","initDualAxis","dualChartType","DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX","type","DUAL_AXIS_CHART_COLUMN_Z_INDEX","columnSpec","datasetDualAxis","analysis","orderMapping","fields","labelDualAxis","baseConfig","DUAL_AXIS_LABEL_Z_INDEX","tooltipOfDualAxisSeries","tooltipDualAxis","barStyleFilter","pointStyleFilter","lineStyleFilter","areaStyleFilter","adjustXField","chartTypes","yLinearPrimary","_advancedVSeed_config_chartType1","_yAxisConfig_title","reshapeInfoId","primaryYAxis","yAxisConfig","alignTicks","alignTicksConfig","primaryFoldInfoList","seriesId","autoFormat","numFormat","createNumFormatter","flatReshapeMeasures","measureIds","titleText","linearAxis","linearAxisStyle","formatMethod","createLinearFormat","yLinearSecondary","_yAxisConfig_grid","secondaryYAxis","secondaryFoldInfoList","isEmptySecondary","onlySecondary","sync","baseStyle","annotationPointOfDualAxis","generateAnnotationPointPipe","allMeasureIds","pickedDatum","pickWithout","_spec_series","isSubset","dualAxis","seriesDualAxis","pipeByAxis","pipes","_","seriesContext","axisType","p","colorScheme","linearColorScheme","pivotDualAxis","series","initFunnel","colorFunnelStyleFill","_result_funnel","funnelStyle","funnelTransformStyle","funnel","pivotFunnel","heatmapBandAxis","xAxisConfig","xBandAxis","bandAxisStyle","yBandAxis","colorCellStyleFill","_result_cell","cell","DATUM_HIDE_KEY","tooltipHeatmap","dimContent","meaContent","originalData","foldMap","initHeatmap","heatmap","range","min","max","val","pivotHeatmap","initHistogram","datasetHistogram","histogramXLinear","_config_title","isPivot","percentFormatter","defaultTitleText","isBarPercent","isColumnPercent","isAreaPercent","createLinearPercentFormat","binValues","getDefaultXFormatterOfHistogram","getDefaultValueFormatterOfHistogram","autoFormatter","tooltipHistogram","defaultXFormatter","defaultValueFormatter","updateMarkTooltipElement","dimFormatter","histogramVerticalCrosshairRect","_crosshair_xField","crosshair","isArray","binRange","binStart","binEnd","annotationPointOfHistogram","histogramSpec","x2Field","kdeRegressionLine","kdeLine","_s_getYAxisHelper","scaleY","viewData","simpleData","kde","scaleR","ld","defaultRegressionLineLabelX","defaultRegressionLineLabelY","ecdfRegressionLine","_result_axes","_result_axes1","ecdfLine","ecdf","yRange","y0","y1","leftAxis","histogram","pivotHistogram","initLine","pivotLine","initPie","pie","pivotPie","initRadar","radarAngleAxis","radarRadiusAxis","radar","pivotRadar","initRose","hasNegativeValue","rose","radiusAxis","colorRoseStyleFill","roseStyle","pivotRose","initRoseParallel","_encoding_radius","roseParallel","pivotRoseParallel","initScatter","datasetScatter","scatterSize","_encoding_size","_encoding_size1","size","labelScatter","tooltipScatter","horizontalCrosshairLine","_yAxisConfig_label","visible","lineColor","labelColor","labelVisible","labelBackgroundColor","yAxisFormatter","generateRegressionLinePipe","regressionFunction","getOptions","getDefaultRegressionOptions","getMinPoints","colorAttrOptions","groups","group","_colorAttrOptions_scale","groupData","mainColor","NaN","areaPoints","_parentNode_finalAttribute","_point_","point","alpha","linearRegressionLine","regressionLinear","lowessRegressionLine","regressionLowess","polynomialRegressionLine","logisticRegressionLine","regressionLogistic","scatter","pointStateHover","pivotScatter","_config_vseed_chartType_annotation","annotationAreaList","positionMap","defaultTextPosition","isBarLikeChart","markArea","selectorPoint","textBackgroundVisible","textBackgroundColor","textBackgroundBorderColor","textBackgroundBorderWidth","textBackgroundBorderRadius","textBackgroundPadding","areaColor","areaColorOpacity","areaBorderColor","areaBorderRadius","areaBorderWidth","areaLineDash","outerPadding","selectedData","textPosition","textAlign","ANNOTATION_AREA_TEXT_STYLE_BY_POSITION","textBaseline","ANNOTATION_Z_INDEX","xyList","positionData","yAxisHelper","regionRect","minX","maxX","maxY","minY","_context__scaleConfig","bandPosition","depth","xBandWidth","startX","endX","width","middleX","yBandWidth","startY","endY","middleY","annotationHorizontalLineList","markLine","yValue","lineVisible","yValueArr","newMarkLine","findSelectedDatas","generateMarkPoint","annotationPointList","isHorizontalBar","defaultStyle","markPoint","offsetX","offsetY","dx","dy","markPointStyle","marks","mark","annotationVerticalLineList","xValue","xValueArr","formatGradientStops","stops","firstInvalidateIndex","stop","newStops","_result_series","_seriesSpec_label_style","splitLineConfig","splitValue","colorTheme","colorConfig","isPlainObject","_lineGraphics__attribute_segments","_lineGraphics_","lineSeries","lineMark","lineGraphics","seg","pt","scale","splitCoordinate","ratio","lineStroke","areaFill","VUtilColor","attrs","seriesSpec","measureValueKey","sub","obj","excludeMeasuresIds","tick","title","grid","labelAutoHide","labelAutoHideGap","labelAutoLimit","labelAutoLimitLength","labelAutoRotate","labelAutoRotateAngleRange","AXIS_LABEL_SPACE","orient","zero","nice","inverse","log","logBase","axisConfig","LINEAR_AXIS_INNER_OFFSET_TOP","idList","_find","_bandAxis_title","pivotAllDatasetReshapeInfo","bandAxis","isNil","allDatasetReshapeInfo","_colorIdMap_String","colorMapping","createSpecifiedForColorMapping","matchedList","colors","accurateMap","name","colorValue","accurateMatchedList","colorObj","fuzzyMatchedList","ordinalPipe","linearPipe","measureIdList","_result_area","_result_bar","_result_line","_result_pie","_result_point","_result_rose","rectColor","_xAxisConfig_label","xAxisFormatter","records","pre","generateMeasureValue","labelAutoFormat","format","mergedMeasure","generateMeasurePercent","sum","num","vseedMeasures","vseedDimensions","advancedVSeedDimensions","advancedVSeedMeasures","wrap","showValue","showValuePercent","showDimension","labelOverlap","labelColorSmartInvert","labelStroke","labelFontSize","labelFontWeight","labelPosition","hasDimLabelEncoding","labelDims","labelMeas","percentFormat","createFormatter","_entry_data","dimLabels","meaLabels","statistics","measureValueLabel","_findTreeNodesBy","legend","position","labelFontColor","railBackgroundColor","handlerBorderColor","colorMeasure","pagerIconColor","pagerIconDisableColor","maxSize","border","shapeType","legendPosition","labelTextColor","_unfoldInfo_colorIdMap_String","legends","colorSpecified","_colorIdMap_value","areaStyles","lineStyles","areaGroups","groupBy","_lineStyles_index","_lineStyles_index1","areaVisible","curveType","getCurveType","curveTension","getCurveTension","showStroke","barStyles","barBorderColor","barBorderStyle","barBorderWidth","barColor","barColorOpacity","barBorderOpacity","barRadius","barVisible","lineSmooth","isRadar","lineColorOpacity","dashSegment","dashGap","_advancedVSeed_config","pointStyles","_indicators_","_chartSpec_tooltip_dimension","_crosshair_xField_label","_crosshair_xField_label1","_crosshair_xField_label2","_crosshair_xField_label3","_crosshair_yField_label","_crosshair_yField_label1","_crosshair_yField_label2","_crosshair_yField_label3","indicators","labelHoverOnAxis","chartSpec","labelFormat","ind","_ind_chartSpec","axisStyle","themConfig","axis","BAND_AXIS_INNER_OFFSET_IN_PIVOT","columns","columnDimensions","onlyCombination","isCombination","transparent","borderColor","bodyFontColor","headerFontColor","headerBackgroundColor","hoverHeaderBackgroundColor","hoverHeaderInlineBackgroundColor","outlineBorderLineWidth","frameCornerRadius","arg","noYAxis","chartPipeline","subMeasuresId","invalideMeasuresIds","newDataset","newDatasetReshapeInfo","newContext","_encoding_key","isRectungularCoordinate","rows","rowDimensions","mId","colorName","setWholeIcon","shapeContainer","shapeElements","shapeElement","svgElement","tooltipElement","actualTooltip","_actualTooltip_content_i","tooltipConfig","fieldFormat","col","table","_encoding_column","_encoding_row","allMeasures","_spec_rows","hasRow","foldMapValues","bodyStyle","headerStyle","fontColor","fontSize","hoverCellBgColor","hoverInlineColor","hoverCellColor","tableThemeStyle","selectionStyle","aggregationRules","bodyCellStyle","bodyCellStyleList","selectedPos","newIndicators","newInd","indicatorKey","dataValue","cellHeaderPaths","headerPaths","originalDatum","path","pickBodyCellStyle","treeTreeToColumns","tree","callback","groupNode","props","matchedStyles","tableStyleMap","acc","fieldKey","ChartTypeEnum","isVTable","isVChart","_vseed_measures","isPositionMeasure","isDimensionGroup","autoNumFormatter","formatterFormat","thousandSeparator","prefix","suffix","symbol","fractionDigits","significantDigits","roundingMode","roundingPriority","numFormatterOptions","numFormatter","typeSymbol","numStr","parts","findFirstMeasure","isMeasureGroup","isMeasures","initialValue","mapValues","childrenKey","stack","children","child","nodes","getDefaultAnnotationPoint","getLightAnnotationPoint","getDefaultAnnotationLine","getLightAnnotationHorizontalLine","getLightAnnotationVerticalLine","getDefaultAnnotationArea","getLightAnnotationArea","getLightAnnotation","getDarkAnnotationPoint","getDarkAnnotationHorizontalLine","getDarkAnnotationVerticalLine","getDarkAnnotationArea","getDarkAnnotation","getLightLinearAxis","getLightBandAxis","getDarkLinearAxis","getDarkBandAxis","getCommonBoxPlotStyle","getLightBoxPlotStyle","getDarkBoxPlotStyle","getCommonOutlierStyle","getLightOutlierStyle","getDarkOutlierStyle","getLightColorScheme","getDarkColorScheme","getLightLinearColorScheme","getDarkLinearColorScheme","getLightColor","getDarkColor","getDarkCrosshairLine","getDarkCrosshairRect","getLightCrosshairLine","getLightCrosshairRect","getLightFunnelTransformTheme","getDarkFunnelTransformTheme","getLightHeatmapCellTheme","getDarkHeatmapCellTheme","getDefaultLabel","getDarkLabel","getLightLabel","getFunnelDarkLabel","getFunnelLightLabel","getDefaultLegend","getDarkLegend","getLightLegend","getDarkColorLegend","getLightColorLegend","getDefaultRegressionLine","getLightRegressionLine","getDarkRegressionLine","getDefaultTableConfig","getLightTableConfig","getDarkTableConfig","pickPivotChartGridConfig","tableConfig","getLightPivotChartGridConfig","getDarkPivotChartGridConfig","getDefaultTooltip","getLightTooltip","getDarkTooltip","barBandAxis","crosshairLine","crosshairRect"],"mappings":"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"}